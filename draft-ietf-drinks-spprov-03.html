<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Session Peering Provisioning
      Protocol</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Session Peering Provisioning
      Protocol">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">DRINKS</td><td class="header">J-F. Mule</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">CableLabs</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">K. Cartwright</td></tr>
<tr><td class="header">Expires: April 25, 2011</td><td class="header">TNS</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">S. Ali</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">NeuStar</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">A. Mayrhofer</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">enum.at GmbH</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">October 22, 2010</td></tr>
</table></td></tr></table>
<h1><br />Session Peering Provisioning
      Protocol<br />draft-ietf-drinks-spprov-03</h1>

<h3>Abstract</h3>

<p> This document defines a protocol for provisioning session
        establishment data into Session Data Registries and SIP
        Service Provider data stores. The provisioned data is
        typically used by various network elements for session
        peering. 
</p>
<p> This document describes the Session Peering Provisioning
        Protocol used by clients to provision registries. The document
        provides a set of guiding principles for the design of this
        protocol including extensibility and independent transport
        definitions, a basic data model and an XML Schema Document.
      
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on April 25, 2011.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#introduction">1.</a>&nbsp;
Introduction<br />
<a href="#terminology">2.</a>&nbsp;
Terminology<br />
<a href="#highleveldesign">3.</a>&nbsp;
Protocol High Level Design<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#layering">3.1.</a>&nbsp;
Protocol Layering<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#datamodel">3.2.</a>&nbsp;
Protocol Data Model<br />
<a href="#transportreq">4.</a>&nbsp;
Transport Protocol Requirements<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#transpconnreq">4.1.</a>&nbsp;
Connection Oriented<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#requestresponse">4.2.</a>&nbsp;
Request and Response Model<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#connectionlength">4.3.</a>&nbsp;
Connection Lifetime<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#authentication">4.4.</a>&nbsp;
Authentication<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#confidentiality">4.5.</a>&nbsp;
Confidentiality and Integrity<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#timing">4.6.</a>&nbsp;
Near Real Time<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#respsizes">4.7.</a>&nbsp;
Request and Response Sizes<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#reqorder">4.8.</a>&nbsp;
Request and Response Correlation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ack">4.9.</a>&nbsp;
Request Acknowledgement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#mandatorytransport">4.10.</a>&nbsp;
Mandatory
        Transport<br />
<a href="#basicdatastructures">5.</a>&nbsp;
Base Protocol Data Structures<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#requestandresponse">5.1.</a>&nbsp;
Request and Response Structures<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#updates">5.1.1.</a>&nbsp;
Update Request and Response Structures<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#queries">5.1.2.</a>&nbsp;
Query Request and Response Structures<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#resultcodes">5.2.</a>&nbsp;
Response Codes and Messages<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#BasicObjType">5.3.</a>&nbsp;
Basic Object Type and Organization Identifiers<br />
<a href="#protocolcommands">6.</a>&nbsp;
Protocol Commands<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#addrtegrp">6.1.</a>&nbsp;
Add Route Group Operation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#getroutegrps">6.2.</a>&nbsp;
Get Route Groups Operation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#adddestgrp">6.3.</a>&nbsp;
Add Destination Group Operation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#getdestgrps">6.4.</a>&nbsp;
Get Destination Groups Operation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#addrtegrpoffer">6.5.</a>&nbsp;
Add Route Group Offer Operation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#accrtegrpoff">6.6.</a>&nbsp;
Accept Route Group Offer Operation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rejrtegrpoff">6.7.</a>&nbsp;
Reject Route Group Offer Operation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#getrtegrpoff">6.8.</a>&nbsp;
Get Route Group Offers Operation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#pubIdsOper">6.9.</a>&nbsp;
Public Identifier Operations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#egressRteOper">6.10.</a>&nbsp;
Egress Route Operations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#addrterec">6.11.</a>&nbsp;
Add Route Record Operation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#getrterecs">6.12.</a>&nbsp;
Get Route Records Operation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#delete_oper">6.13.</a>&nbsp;
Delete Operation<br />
<a href="#examples">7.</a>&nbsp;
SPPP Examples<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#add_destgrp">7.1.</a>&nbsp;
Add Destination Group<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#add_rterecs">7.2.</a>&nbsp;
Add Route Records<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#add_rterecs_uritype">7.3.</a>&nbsp;
Add Route Records -- URIType<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#add_rtegrp">7.4.</a>&nbsp;
Add Route Group<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#add_pi_corclaim">7.5.</a>&nbsp;
Add Public Identity -- Successful COR claim<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#add_lrn">7.6.</a>&nbsp;
Add LRN<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#add_tn_range">7.7.</a>&nbsp;
Add TN Range<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#add_tn_range_onp">7.8.</a>&nbsp;
Add TN Range with Open Number Plan support<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#add_tn_prefix">7.9.</a>&nbsp;
Add TN Prefix<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#add_rte_grp_offer">7.10.</a>&nbsp;
Enable Peering -- Route Group Offer<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#add_rte_grp_offer_accept">7.11.</a>&nbsp;
Enable Peering -- Route Group Offer Accept<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#add_egress_rte">7.12.</a>&nbsp;
Add Egress Route<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#get_dest_grp">7.13.</a>&nbsp;
Get Destination Group<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#add_pub_id">7.14.</a>&nbsp;
Get Public Identity<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#get_rte_grp_request">7.15.</a>&nbsp;
Get Route Group Request<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#get_rte_grp_offers_rqst">7.16.</a>&nbsp;
Get Route Group Offers Request<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#get_egress_rte">7.17.</a>&nbsp;
Get Egree Route<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#del_dest_grp">7.18.</a>&nbsp;
Delete Destination Group<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#del_pub_id">7.19.</a>&nbsp;
Delete Public Identity<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#del_rte_grp_rqst">7.20.</a>&nbsp;
Delete Route Group Request<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#del_rte_grp_offers_rqst">7.21.</a>&nbsp;
Delete Route Group Offers Request<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#del_egress_rte">7.22.</a>&nbsp;
Delete Egress Route<br />
<a href="#xmlconsiderations">8.</a>&nbsp;
XML Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#namespaces">8.1.</a>&nbsp;
Namespaces<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#versioning">8.2.</a>&nbsp;
Versioning and Character Encoding<br />
<a href="#securityconsiderations">9.</a>&nbsp;
Security Considerations<br />
<a href="#IANA">10.</a>&nbsp;
IANA Considerations<br />
<a href="#formalspecification">11.</a>&nbsp;
Formal Specification<br />
<a href="#specificationextensibility">12.</a>&nbsp;
Specification Extensibility<br />
<a href="#anchor1">13.</a>&nbsp;
Acknowledgments<br />
<a href="#rfc.references1">14.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">14.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">14.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="introduction"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p> Service providers and enterprises use registries to make
        call or session routing decisions for Voice over IP, SMS and
        MMS traffic exchanges. This document is narrowly focused on
        the provisioning protocol for these registries. This protocol
        prescribes a way for an entity to provision session-related
        data into a registry. The data being provisioned can be
        optionally shared with other participating peering entities.
        The requirements and use cases driving this protocol have been
        documented in <a class='info' href='#I-D.ietf-drinks-usecases-requirements'>[I&#8209;D.ietf&#8209;drinks&#8209;usecases&#8209;requirements]<span> (</span><span class='info'>Channabasappa, S., &ldquo;DRINKS Use cases and Protocol Requirements,&rdquo; May&nbsp;2010.</span><span>)</span></a>. The reader
        is expected to be familiar with the terminology defined in the
        previously mentioned document. <br />
<br />
 Three
        types of provisioning flows have been described in the use
        case document: client to registry provisioning, registry to
        local data repository and registry-to-registry. This document
        addresses a subset (client-to-registry provisioning) by
        defining a Session Peering Provisioning Protocol (SPPP) for
        provisioning Session Establishment Data (SED) into a Registry
        (arrow "1" in the figure below). While the other "provisioning
        flows" are shown below as separate message flows, no
        determination has been made for whether one common baseline
        protocol could be used for all three, or whether distinct
        protocols are required. 
</p>
<p>
        <br /><hr class="insert" />
<a name="RegFlows"></a>
</p>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>

                         *------------*               *------------*
(1). Provisioning SED    |            | (3).Registry  |            |
-----------------------&gt; |  Registry  |&lt;-------------&gt;|  Registry  |
     data into Registries|            |  to Registry  |            |
                         *------------*  exchanges    *------------*
                              /  \                          \
                             /    \                          \
                            /      \                          \
                           /        \                          v
                          /          \                         ...
                         /            \
                        / (2).         \
                       / Distributing   \
                      /      SED         \
                     V                    V
                    +----------+       +----------+
                    |Local Data|       |Local Data|
                    |Repository|       |Repository|
                    +----------+       +----------+

</pre></div><p>

<p style='text-align: center'> Three Registry Provisioning Flows 
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

      

<p> The data provisioned for session establishment is typically
        used by various downstream SIP signaling systems to route a
        call to the next hop associated with the called domain. These
        systems typically use a local data store ("Local Data
        Repository") as their source of session routing information.
        More specifically, the SED data is the set of parameters that
        the outgoing signaling path border elements (SBEs) need to
        initiate the session. See <a class='info' href='#RFC5486'>[RFC5486]<span> (</span><span class='info'>Malas, D. and D. Meyer, &ldquo;Session Peering for Multimedia Interconnect (SPEERMINT) Terminology,&rdquo; March&nbsp;2009.</span><span>)</span></a> for more
        details. <br />
<br />
 A "terminating" SIP Service
        Provider (SSP) provisions SED into the registry to be
        selectively shared with other peer SSPs. Subsequently, a
        Registry may distribute the provisioned data into local Data
        Repositories used for look-up queries (identifier -> URI) or
        for lookup and location resolution (identifier -> URI ->
        ingress SBE of terminating SSP). In some cases, the Registry
        may additionally offer a central query resolution service (not
        shown in the above figure). 
</p>
<p> A key requirement for the SPPP protocol is to be able to
        accommodate two basic deployment scenarios: </p>
<ol class="text">
<li> A Local Data Repository serves a Look-Up Function (LUF) to determine the target domain
            to assist in call routing (as described in <a class='info' href='#RFC5486'>[RFC5486]<span> (</span><span class='info'>Malas, D. and D. Meyer, &ldquo;Session Peering for Multimedia Interconnect (SPEERMINT) Terminology,&rdquo; March&nbsp;2009.</span><span>)</span></a>). In this case, the querying entity
            may use other means to perform the Location Routing
            Function (LRF) which in turn helps determine the actual
            location of the Signaling Function in that domain. 
</li>
<li> A Local Data Repository serves both a Look-Up function (LUF) and Location Routing
            Function (LRF) to locate the SED data fully. 
</li>
</ol><p>
      
</p>
<p> In terms of protocol design, SPPP protocol is agnostic to
        the transport. This document includes the description of the
        data model and the means to enable protocol operations within
        a request and response structure. To encourage
        interoperability, the protocol supports extensibility aspects. 
</p>
<p> Transport requirements are provided in this document to help
        with the selection of the optimum transport mechanism. (<a class='info' href='#I-D.ietf-drinks-sppp-over-soap'>[I&#8209;D.ietf&#8209;drinks&#8209;sppp&#8209;over&#8209;soap]<span> (</span><span class='info'>Cartwright, K., &ldquo;SPPP Over SOAP and HTTP,&rdquo; June&nbsp;2010.</span><span>)</span></a>) identifies a SOAP
        transport mechanism for SPPP. 
</p>
<p> This document is organized as follows: </p>
<ul class="text">
<li>
            <a class='info' href='#terminology'>Section&nbsp;2<span> (</span><span class='info'>Terminology</span><span>)</span></a> provides the terminology; 
          
</li>
<li>
            <a class='info' href='#highleveldesign'>Section&nbsp;3<span> (</span><span class='info'>Protocol High Level Design</span><span>)</span></a> provides an overview
            of the SPPP protocol, including the layering approach,
            functional entities and data model; 
</li>
<li>
            <a class='info' href='#transportreq'>Section&nbsp;4<span> (</span><span class='info'>Transport Protocol Requirements</span><span>)</span></a> specifies requirements for
            SPPP transport protocols; 
</li>
<li>
            <a class='info' href='#basicdatastructures'>Section&nbsp;5<span> (</span><span class='info'>Base Protocol Data Structures</span><span>)</span></a> describes the base protocol data structures including the request and response elements (<a class='info' href='#requestandresponse'>Section&nbsp;5.1<span> (</span><span class='info'>Request and Response Structures</span><span>)</span></a>), the response codes and messages (<a class='info' href='#resultcodes'>Section&nbsp;5.2<span> (</span><span class='info'>Response Codes and Messages</span><span>)</span></a>) and the basic object type most first class objects extend from;
</li>
<li> 
             <a class='info' href='#protocolcommands'>Section&nbsp;6<span> (</span><span class='info'>Protocol Commands</span><span>)</span></a> and <a class='info' href='#examples'>Section&nbsp;7<span> (</span><span class='info'>SPPP Examples</span><span>)</span></a> describe the main protocol commands and examples;
            
</li>
<li>
            <a class='info' href='#xmlconsiderations'>Section&nbsp;8<span> (</span><span class='info'>XML Considerations</span><span>)</span></a> defines XML
            considerations that XML parsers must meet to conform to
            this specification; 
</li>
<li><a class='info' href='#formalspecification'>Section&nbsp;11<span> (</span><span class='info'>Formal Specification</span><span>)</span></a> normatively defines the SPPP protocol using its XML Schema Definition. 
           
</li>
</ul><p>
      
</p>
<a name="terminology"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Terminology</h3>

<p> The key words "MUST", "MUST NOT", "REQUIRED", "SHALL",
        "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and
        "OPTIONAL" in this document are to be interpreted as described
        in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>. 
</p>
<p> This document reuses terms from <a class='info' href='#RFC3261'>[RFC3261]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a>,
          <a class='info' href='#RFC5486'>[RFC5486]<span> (</span><span class='info'>Malas, D. and D. Meyer, &ldquo;Session Peering for Multimedia Interconnect (SPEERMINT) Terminology,&rdquo; March&nbsp;2009.</span><span>)</span></a>, use cases and requirements
        documented in <a class='info' href='#I-D.ietf-drinks-usecases-requirements'>[I&#8209;D.ietf&#8209;drinks&#8209;usecases&#8209;requirements]<span> (</span><span class='info'>Channabasappa, S., &ldquo;DRINKS Use cases and Protocol Requirements,&rdquo; May&nbsp;2010.</span><span>)</span></a> and the
        ENUM Validation Architecture <a class='info' href='#RFC4725'>[RFC4725]<span> (</span><span class='info'>Mayrhofer, A. and B. Hoeneisen, &ldquo;ENUM Validation Architecture,&rdquo; November&nbsp;2006.</span><span>)</span></a>. 
</p>
<p> In addition, this document specifies the following
        additional terms: <br />
<br />

        </p>
<blockquote class="text"><dl>
<dt>SPPP: </dt>
<dd> Session Peering Provisioning Protocol,
            the protocol used to provision data into a Registry (see
            arrow labeled "1." in Figure 1 of <a class='info' href='#I-D.ietf-drinks-usecases-requirements'>[I&#8209;D.ietf&#8209;drinks&#8209;usecases&#8209;requirements]<span> (</span><span class='info'>Channabasappa, S., &ldquo;DRINKS Use cases and Protocol Requirements,&rdquo; May&nbsp;2010.</span><span>)</span></a>). It is
            the primary scope of this document. <br />

          
</dd>
<dt>SPDP: </dt>
<dd> Session Peering Distribution Protocol,
            the protocol used to distribute data to Local Data
            Repository (see arrow labeled "2." in Figure 1 of <a class='info' href='#I-D.ietf-drinks-usecases-requirements'>[I&#8209;D.ietf&#8209;drinks&#8209;usecases&#8209;requirements]<span> (</span><span class='info'>Channabasappa, S., &ldquo;DRINKS Use cases and Protocol Requirements,&rdquo; May&nbsp;2010.</span><span>)</span></a>).
              <br />

          
</dd>
<dt>Client: </dt>
<dd> An application that supports an SPPP
            Client; it is sometimes referred to as a "Registry
            Client". <br />

          
</dd>
<dt>Registry: </dt>
<dd> The Registry operates a master
            database of Session Establishment Data for one or more
            Registrants. <br />
 A Registry acts as
            an SPPP Server. <br />
<br />

          
</dd>
<dt>Registrant: </dt>
<dd> In this document, we extend the
            definition of a Registrant based on <a class='info' href='#RFC4725'>[RFC4725]<span> (</span><span class='info'>Mayrhofer, A. and B. Hoeneisen, &ldquo;ENUM Validation Architecture,&rdquo; November&nbsp;2006.</span><span>)</span></a>. The Registrant is the end-user, the person or
            organization who is the "holder" of the Session
            Establishment Data being provisioned into the Registry.
            For example, in <a class='info' href='#I-D.ietf-drinks-usecases-requirements'>[I&#8209;D.ietf&#8209;drinks&#8209;usecases&#8209;requirements]<span> (</span><span class='info'>Channabasappa, S., &ldquo;DRINKS Use cases and Protocol Requirements,&rdquo; May&nbsp;2010.</span><span>)</span></a>, a
            Registrant is pictured as a SIP Service Provider in Figure
            2. <br />
 A Registrant is identified by
            its name and an identifier in the data model. <br />
<br />

          
</dd>
<dt>Registrar: </dt>
<dd> In this document, we also extend
            the definition of a Registrar from <a class='info' href='#RFC4725'>[RFC4725]<span> (</span><span class='info'>Mayrhofer, A. and B. Hoeneisen, &ldquo;ENUM Validation Architecture,&rdquo; November&nbsp;2006.</span><span>)</span></a>. A Registrar performs provisioning operations on behalf
            of a Registrant by interacting with the Registry, in our
            case via the SPPP protocol defined in this document.
              <br />
 A Registrar is identified by
            its name and an identifier in the data model. 
</dd>
</dl></blockquote><p>
      
</p>
<a name="highleveldesign"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Protocol High Level Design</h3>

<p> This section introduces the structure of the data model and
        provides the information framework for the SPPP protocol. An
        overview of the protocol operations is first provided with a
        typical deployment scenario. The data model is then defined
        along with all the objects manipulated by the protocol and
        their relationships. 
</p>
<a name="layering"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Protocol Layering</h3>

<p> SPPP is a simple request/reply protocol that allows a
          client application to submit provisioning data and query
          requests to a server. The SPPP data structures are designed
          to be protocol agnostic. Concerns regarding encryption,
          non-repudiation, and authentication are beyond the scope of
          this document. For more details, please refer to the
          Transport Protocol Requirements section. 
</p><br /><hr class="insert" />
<a name="SPPP_layering"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>

          Layer                      Example
     +-------------+      +-----------------------------+
 (5) |Data Objects |      |      RteGrpType, etc.       |
     +-------------+      +-----------------------------+
           |                           |
     +-------------+      +-----------------------------+
 (4) | Operations  |      |   AddRteGrpRqstType, etc.   |
     +-------------+      +-----------------------------+
           |                           |
     +-------------+      +-----------------------------+
 (3) |   Message   |      |    spppUpdateRequest,       |
     |             |      |    spppUpdateResponse,      |
     |             |      |    spppQueryRequest,        |
     |             |      |    spppQueryResponse        |
     +-------------+      +-----------------------------+
           |                           |
     +-------------+      +-----------------------------+
 (2) |   Message   |      |   HTTP, SOAP, None, etc.    |
     |   Envelope  |      |                             |
     +-------------+      +-----------------------------+
           |                           |
     +-------------+      +-----------------------------+
 (1) |  Transport  |      |    TCP, TLS, BEEP, etc.     |
     |   Protocol  |      |                             |
     +-------------+      +-----------------------------+

</pre></div>
<p style='text-align: center'> SPPP Layering 
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p> SPPP can be viewed as a set of layers that collectively
          define the structure of an SPPP request and response. Layers
          1 and 2, as detailed below, are left to separate
          specifications to allow for potentially multiple SPPP
          transport, envelope, and authentication technologies. This
          document defines layers 3, 4, and 5 below. 
</p>
<p>
          </p>
<ol class="text">
<li> The transport protocol layer provides a communication
              mechanism between the client and server. SPPP can be
              layered over any transport protocol that provides a set
              of basic requirements defined in the Transport Protocol
              Requirements section. 
</li>
<li> The message envelope layer is optional, but can
              provide features that are above the transport technology
              layer but below the application messaging layer.
              Technologies such as HTTP and SOAP are examples of
              messaging envelope technologies. 
</li>
<li> The message layer provides a simple,
              envelope-independent and transport-independent, SPPP
              wrapper for SPPP request and response messages. 
</li>
<li> The operation layer defines the set of base SPPP
              actions that can be invoked for a given object data type 
              using an SPPP message.  Operations are encoded using XML 
              encoded actions and objects. 
</li>
<li> The data object layer defines the base set of SPPP
              data objects that can be included in update operations
              or returned in operation responses. 
</li>
</ol><p>
        
</p>
<a name="datamodel"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Protocol Data Model</h3>

<p> The data model illustrated and described in <a class='info' href='#SPPP_datamodel'>Figure&nbsp;3</a> defines the logical objects and
          the relationships between these objects that the SPPP
          protocol supports. SPPP defines the protocol operations
          through which an SPPP Client populates a Registry with these
          logical objects. Various clients belonging to different
          Registrars may use the protocol for populating the
          Registry's data. 
</p>
<p> The logical structure presented below is consistent with
            the terminology and requirements defined in <a class='info' href='#I-D.ietf-drinks-usecases-requirements'>[I&#8209;D.ietf&#8209;drinks&#8209;usecases&#8209;requirements]<span> (</span><span class='info'>Channabasappa, S., &ldquo;DRINKS Use cases and Protocol Requirements,&rdquo; May&nbsp;2010.</span><span>)</span></a>. 
</p><br /><hr class="insert" />
<a name="SPPP_datamodel"></a>

<p style='text-align: center'> 
</p><div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
+-------------+      +------------------+
| all object  |      |Organization:     |
| types       |      |orgId,            |
+------+------+      |orgName,          |
       +------------&gt;|extension         |
                     |                  |
 All objects are     |                  |
 associated with 2   |                  |
 Organizations to    +------------------+
 identify the            ^
 registrant and          |A Route Group is
 the registrar           |associated with
                         |zero or more Peering
                         |Organizations
                         |
                +--------+--------------+
                |Route Group:           |        +-----[abstract]-+
                |  rantId,              |        | Route Record:  |
                |  rarId,               |        |                |
                |  rteGrpName,          |        |  rrName,       |
                |  destGrpRef,          +-------&gt;|  priority,     |
                |  isInSvc,             |        |  extension     |
                |  rteRecRef,           |        |                |
                |  peeringOrg,          |        +----------------+
                |  sourceIdent,         |            ^
                |  priority,            |            |
                |  extension            |            |Various types
                +-----------------------+            |of Route
                      ^                              |Records...
                      |                       +------+------------...
                      |                       |        |         |
                      |                     +----+  +-------+ +----+
                      |                     | URI|  | NAPTR | | NS |
     +----------------+-----+               +----+  +-------+ +----+
     |Destination           |
     |Group:                |     +----------[abstract]-+
     |  rantId,             |     |Public Identifier:   |
     |  rarId,              |     |                     |
     |  dgName,             |     |  rantId,            |
     |  extension           |&lt;----+  rarId,             |
     +----------------------+     |  publicIdentifier,  |
                                  |  destGrpRef,        |
                                  |  rteRec,            |
                                  |  extension          |
                                  +---------------------+
                                             ^
                                             |Various types
                                             |of Public
                                             |Identifiers...
                          +---------+-------+------------...
                          |         |       |     |
                      +------+  +-----+  +-----+ +-----+
                      |  TN  |  | TNP |  | TNR | | RN  |
                      +------+  +-----+  +-----+ +-----+
</pre></div>
<p style='text-align: center'> SPPP Data Model 
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p> The objects and attributes that comprise the data model
            can be described as follows (objects listed from the
            bottom up): </p>
<ul class="text">
<li> Public Identifier: <br />
 
                A public identifier is a well known
                attribute that is used as the key to perform lookup
                functions. For the purposes of this document, a Public
                Identifier can be a telephone number, a range of telephone 
                numbers, a PSTN Routing Number (RN), or perhaps another 
                type of lookup key. <br />
<br />
 A Public 
                Identifier is associated with a Destination Group to
                create a logical grouping of Public Identifiers that share a common set of
                Routes. <br />
<br />
 A TN Public Identifier
                may optionally be associated with zero or more
                individual Route Records. This ability for a Public
                Identifier to be directly associated with a set of Route
                Records (e.g. target URI), as opposed to being
                associated with a Destination Group, supports the use
                cases where the target URI contains data specifically
                tailored to an individual TN Public Identifier. 
</li>
<li> Telephone Number Range: <br />

                A public identifier may represent
                an inclusive range of telephone numbers. The TN range
                is defined by the first and last telephone number of
                the inclusive range. For example, a TN range defined by 
                tn=12125550000 and endTn=12125560000 means all the TNs
                from 12125550000 to 12125560000 inclusive are included. 
</li>
<li> Destination Group: <br />
 
                A name collection of zero or more Public Identifiers that 
                can be associated with one or more Route Groups for the 
                purpose of facilitating the management of thier common 
                routing information. 
</li>
<li> Route Group: <br />

                A Route Group contains a set of references to Route Records, 
                a set of Destination Group references, and a set of 
                peering organization identifiers.  This is used to 
                establishe a three part relationships between a set of 
                Public Identifiers and their common routing information 
                (SED), and the list of peering organizations whose query 
                responses may include that routing information in their 
                query responses.  To support the use cases defined in 
                [I-D.ietf-drinks-usecases-requirements], this document 
                defines the following types of Route Records: NAPTRType, 
                NSType, and URIType.  The sourceIdent element within a Route 
                Group, in concert with the set of peering organization 
                identifiers enables fine grained source based routing.  
                Further details about the Route Group and source based routing 
                refer to the definitions and descriptions of the Route 
                Group operations found later in this document. 
</li>
<li> Route Record: <br />

                A Route Record contains the data that a resolution system 
                returns in response to a successful query for a Public 
                Identifier.  Route Recoords are associated with a Route 
                Group for SED that is not specific to a Public Identifier. 
                <br />
 To support the use cases defined in 
                <a class='info' href='#I-D.ietf-drinks-usecases-requirements'>[I&#8209;D.ietf&#8209;drinks&#8209;usecases&#8209;requirements]<span> (</span><span class='info'>Channabasappa, S., &ldquo;DRINKS Use cases and Protocol Requirements,&rdquo; May&nbsp;2010.</span><span>)</span></a>, 
                SPPP protocol defines three type of Route Records:
                URIType, NAPTRType, and NSType. These Route Records
                extend the abstract type RteRecType and inherit the
                common attribute 'priority' that is meant for setting
                precedence across the route records defined within a
                Route Group in a protocol agnostic fashion. 
</li>
<li> Organization: <br />
 An
                Organization is an entity that may fulfill any 
                combination of three roles:  Registrant, Registrar, and 
                Peering Organization.  All SPPP objects are
                associated with two organization identifiers to identify 
                each object's registrant and the registrar. A Route Group 
                object is also associated with a set of zero or more 
                organization identifiers that identify the peering 
                organizations whose query responses may include the 
                routing information (SED) defined in the Route Records 
                within that Route Group. 
</li>
</ul><p>
          
</p>
<a name="transportreq"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Transport Protocol Requirements</h3>

<p> This section provides requirements for transport protocols
        suitable for SPPP. More specifically, this section specifies
        the services, features, and assumptions that SPPP delegates to
        the chosen transport and envelope technologies. 
</p>
<p> Two different groups of use cases are specified in <a class='info' href='#I-D.ietf-drinks-usecases-requirements'>[I&#8209;D.ietf&#8209;drinks&#8209;usecases&#8209;requirements]<span> (</span><span class='info'>Channabasappa, S., &ldquo;DRINKS Use cases and Protocol Requirements,&rdquo; May&nbsp;2010.</span><span>)</span></a>. One group
        of use cases describes the provisioning of data by a client
        into a Registry (Section 3.1 of the above referenced
        document), while the other group describes the distribution of
        data into local data repositories (Section 3.2). The current
        version of this document focuses on the first set of use cases
        (client to registry provisioning). <br />
<br />

        These use cases may involve the provisioning of very small
        data sets like the modification or update of a single public
        identifier. Other provisioning operations may deal with huge
        datasets like the "download" of a whole local number
        portability database to a Registry. <br />
<br />

        As a result, a transport protocol for SPPP must be very
        flexible and accommodate various sizes of data set sizes. 
</p>
<p> For the reasons outlined above, it is conceivable that
        provisioning and distributing may use different transport
        protocols. This document focuses on the provisioning protocol. 
</p>
<p>A few topics remain open for discussion: </p>
<ul class="text">
<li>The ability to establish multiple connections between a
            client and server may be desirable. If so, we may want to
            specify the relation of transactions between the various
            connections.
</li>
<li>Pipelining of requests is required at the SPPP protocol
            layer. It may have impacts at the transport level that
            need to be outlined.
</li>
<li>Scope: the current scope of this effort is based upon
            having a connection oriented transport. Is there any need
            to support a transport protocol with asynchronous
            operation? 
</li>
<li>If it is required that responses arrive in the order of
            the requests, this must be specified clearly.
</li>
</ul><p>
      
</p>
<a name="transpconnreq"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Connection Oriented</h3>

<p> The SPPP protocol follows a model where a Client
          establishes a connection to a Server in order to further
          exchange provisioning transactions over such point-to-point
          connection. A transport protocol for SPPP MUST therefore be
          connection oriented. 
</p>
<p> Note that the role of the "Client" and the "Server" only
          applies to the connection, and those roles are not related
          in any way to the type of entity that participates in a
          protocol exchange. For example, a Registry might also
          include a "Client" when such a Registry initiates a
          connection (for example, for data distribution to SSP). 
</p>
<a name="requestresponse"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Request and Response Model</h3>

<p> Provisioning operations in SPPP follow the request -
          response model, where a transaction is initiated by a Client
          using a Request command, and the Server responds to the
          Client by means of a Response. <br />
<br />

          Multiple subsequent request-response exchanges MAY be
          performed over a single connection. 
</p>
<p> Therefore, a transport protocol for SPPP MUST follow the
          request-response model by allowing a response to be sent to
          the request initiator.
</p>
<a name="connectionlength"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
Connection Lifetime</h3>

<p> Some use cases involve provisioning a single request to a
          network element - connections supporting such provisioning
          requests might be short-lived, and only established on
          demand. 
</p>
<p> Other use cases involve either provisioning a huge set of
          data, or a constant stream of small updates, which would
          require long-lived connections. 
</p>
<p> Therefore, a protocol suitable for SPPP SHOULD support
          short lived as well as long lived connections. 
</p>
<a name="authentication"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4"></a><h3>4.4.&nbsp;
Authentication</h3>

<p> Many use cases require the Server to authenticate the
          Client, and potentially also the Client to authenticate the
          Server. While authentication of the Server by the Client is
          expected to be used only to prevent impersonation of the
          Server, authentication of the Client by the Server is
          expected to be used to identify and further authorize the
          Client to certain resources on the Server. 
</p>
<p> Therefore, an SPPP transport protocol MUST provide means
          for a Server to authenticate and authorize a Client, and MAY
          provide means for Clients to authenticate a Server. 
</p>
<p> However, SPPP transport SHOULD also allow for
          unauthenticated connections. 
</p>
<a name="confidentiality"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.5"></a><h3>4.5.&nbsp;
Confidentiality and Integrity</h3>

<p> Data that is transported over the protocol is deemed
          confidential. Therefore, a transport protocol suitable for
          SPPP MUST ensure confidentiality and integrity protection by
          providing encryption capabilities. 
</p>
<p> Additionally, a DRINKS protocol MUST NOT use an unreliable
          lower-layer transport protocol that does not provide
          confidentiality and integrity protection. 
</p>
<a name="timing"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6"></a><h3>4.6.&nbsp;
Near Real Time</h3>

<p> Many use cases require near real-time responses from the
          Server. Therefore, a DRINKS transport protocol MUST support
          near-real-time response to requests submitted by the Client.
        
</p>
<a name="respsizes"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.7"></a><h3>4.7.&nbsp;
Request and Response Sizes</h3>

<p> SPPP covers a range of use cases - from cases where
          provisioning a single public identifier will create very
          small request and response sizes to cases where millions of
          data records are submitted or retrieved in one transaction.
          Therefore, a transport protocol suitable for SPPP MUST
          support a great variety of request and response sizes. 
</p>
<p> A transport protocol MAY allow splitting large chunks of
          data into several smaller chunks. 
</p>
<a name="reqorder"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.8"></a><h3>4.8.&nbsp;
Request and Response Correlation</h3>

<p> A transport protocol suitable for SPPP MUST allow
          responses to be correlated with requests. 
</p>
<a name="ack"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.9"></a><h3>4.9.&nbsp;
Request Acknowledgement</h3>

<p> Data transported in the SPPP protocol is likely crucial
          for the operation of the communication network that is being
          provisioned. <br />
<br />
 Failed transactions
          can lead to situations where a subset of public identifiers
          (or even SSPs) might not be reachable, or situations where
          the provisioning state of the network is inconsistent. 
</p>
<p> Therefore, a transport protocol for SPPP MUST provide a
          Response for each Request, so that a Client can identify
          whether a Request succeeded or failed. 
</p>
<a name="mandatorytransport"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.10"></a><h3>4.10.&nbsp;
Mandatory
        Transport</h3>

<p> As of this writing of this revision, one transport
          protocol proposal has been provided in <a class='info' href='#I-D.ietf-drinks-sppp-over-soap'>[I&#8209;D.ietf&#8209;drinks&#8209;sppp&#8209;over&#8209;soap]<span> (</span><span class='info'>Cartwright, K., &ldquo;SPPP Over SOAP and HTTP,&rdquo; June&nbsp;2010.</span><span>)</span></a>. <br />
<br />
 This section will define a mandatory
          transport protocol to be compliant with this RFC. 
</p>
<a name="basicdatastructures"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Base Protocol Data Structures</h3>

<p>SPPP uses a common model and a common set of
       data structures for most of the supported operations and object types.  
       This section describes these common data structures.
</p>
<a name="requestandresponse"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Request and Response Structures</h3>

<p> An SPPP client interacts with an SPPP server by using one of
         the supported transport mechanisms to send one or more
         requests to the server and receive corresponding replies from
         the server.  There are two generalized types of operations that an SPPP
         client can submit to an SPPP server, updates and queries.  The following 
         two sub-sections describe the generalized data structures that are 
         used for each of these two types of operations. 
</p>
<a name="updates"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.1"></a><h3>5.1.1.&nbsp;
Update Request and Response Structures</h3>

<p>An SPPP update request is wrapped within the
         &lt;spppUpdateRequest&gt;  element while an SPPP update response is
         wrapped within an &lt;spppUpdateResponse&gt; element.
         The following two sub-sections describe these two elements.
</p>
<a name="updaterequest"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.1.1"></a><h3>5.1.1.1.&nbsp;
Update Request</h3>

<p> An SPPP update request object is contained within the generic
            &lt;spppUpdateRequest&gt; element. 
</p>
<p>
            </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


  &lt;element name="spppUpdateRequest"&gt;
    &lt;complexType&gt;
      &lt;sequence&gt;
        &lt;element name="clientTransId" type="spppb:TransIdType"
                 minOccurs="0"/&gt;
        &lt;element name="minorVer" type="spppb:MinorVerType"
                 minOccurs="0"/&gt;
        &lt;element name="rqst" type="spppb:BasicRqstType"
                 maxOccurs="unbounded"/&gt;
      &lt;/sequence&gt;
    &lt;/complexType&gt;
  &lt;/element&gt;

  &lt;simpleType name="TransIdType"&gt;
    &lt;restriction base="string"/&gt;
  &lt;/simpleType&gt;

  &lt;simpleType name="MinorVerType"&gt;
    &lt;restriction base="unsignedLong"/&gt;
  &lt;/simpleType&gt;


</pre></div><p>

          
</p>
<p> The data elements within the &lt;spppUpdateRequest&gt; 
          element are described as follows: 
          </p>
<ul class="text">
<li> clientTransId: Zero or one client generated transaction ID
              that, within the context of the SPPP client, identifies this 
              request. This value can be used at the discretion of the SPPP 
              client to track, log or correlate requests and their responses. This
              value is also echoed back to the client in the SPPP update response.
              An SPPP server will not check this value for uniqueness. 
</li>
<li> minorVer: Zero or one minor version identifier, indicating the minor  
              version of the SPPP API that the client is attempting to use. This is
              used in conjunction with the major version identifier in
              the XML namespace to identify the version of SPPP that the client 
              is using.  If the element is not present, the server assumes that 
              the client is using the latest minor version supported by the SPPP
              server for the given major version. The versions supported by a 
              given SPPP server can be retrieved by the client using the 
              SPPP server menu operation described later in the document.
</li>
<li> rqst: One or more BasicRqstType objects.  These are the actions 
              that the client is requesting the SPPP server perform.  They are processed 
              by the SPPP server in the order in which they are included in the request.  
              And with respect to handling error conditions, it is a matter of policy 
              whether the objects are processed in a "stop and rollback" fashion or 
              in a "stop and commit" fashion.  In the "stop and rollback" scenario, 
              the SPPP server would stop processing BasicRqstType object instances in the
              request at the first error and roll back any BasicRqstType object instances 
              that had already been processed for that update request. 
              In the "stop and commit" scenario the SPPP server would stop 
              processing BasicRqstType object instances in the request at the 
              first error but commit any BasicRqstType object instances 
              that had already been processed for that update request. 
            
</li>
</ul><p>
          
</p>
<p> All update request objects extend the base type BasicRqstType. This
          base type is defined as follows: 
</p>
<p>       
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;complexType name="BasicRqstType" abstract="true"&gt;
    &lt;sequence&gt;
      &lt;element name="ext" type="spppb:ExtAnyType" minOccurs="0"/&gt;
    &lt;/sequence&gt;
  &lt;/complexType&gt;

</pre></div><p>

          
</p>
<p> The BasicRqstType object primarily acts as an abstract base type, 
          and its only data element is described as follows: 
          </p>
<ul class="text">
<li> ext: This is the standard extension element for this
              object. Refer to the Extensibility section of this
              document for more details. 
</li>
</ul><p>
          
</p>
<a name="updateresponse"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.1.2"></a><h3>5.1.1.2.&nbsp;
Update Response</h3>

<p> An SPPP update response object is contained within the generic
          &lt;spppUpdateResponse&gt; element. 
</p>
<p>
            </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;element name="spppUpdateResponse"&gt;
    &lt;complexType&gt;
      &lt;sequence&gt;
        &lt;element name="overallResult" type="spppb:ResultCodeType"/&gt;
        &lt;element name="rqstObjResult" type="spppb:RqstObjResultCodeType"
            minOccurs="0" maxOccurs="unbounded"/&gt;
        &lt;element name="clientTransId" type="spppb:TransIdType"
            minOccurs="0"/&gt;
        &lt;element name="serverTransId" type="spppb:TransIdType"/&gt;
      &lt;/sequence&gt;
    &lt;/complexType&gt;
  &lt;/element&gt;

  &lt;complexType name="ResultCodeType"&gt;
    &lt;sequence&gt;
       &lt;element name="code" type="int"/&gt;
       &lt;element name="msg" type="string"/&gt;
    &lt;/sequence&gt;
  &lt;/complexType&gt;

  &lt;complexType name="RqstObjResultCodeType"&gt;
    &lt;complexContent&gt;
       &lt;extension base="spppb:ResultCodeType"&gt;
          &lt;sequence&gt;
             &lt;element name="rqstObj" type="spppb:BasicRqstType"/&gt;
          &lt;/sequence&gt;
       &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;


</pre></div><p>

          
</p>
<p> An &lt;spppUpdateResponse&gt; contains the 
          elements necessary for the SPPP client to precisely determine the 
          overal result of the request, and if an error occurred, it provides information about the specific object, data element, or condition caused the error. 
</p>
<p> The data elements within the SPPP update response are
            described as follows: </p>
<ul class="text">
<li> clientTransId: Zero or one client transaction ID.  This 
              value is simply an echo of the client transaction ID that 
              SPPP client passed into the SPPP update request.
</li>
<li> serverTransId: Exactly one server transaction ID that
              identifies this request for tracking purposes. This
              value is guaranteed to be unique for a given SPPP server. 
</li>
<li> overallResult: Exactly one response code and message pair that 
              explicitly identifies the result of the request. See the 
              Response Code section for further details. 
</li>
<li> rqstObjResult: An optional response code, response message, 
              and BasicRqstObject triplet.  This element will be present only if 
              an object level error condition occurs, and indicates exactly which 
              error condition occurred and exactly which request object that was 
              passed in caused the error condition.  The contained BasicRqstObject 
              is simply an echo of the request object instance that caused the error,
              while the response code and message indicate the error condition 
              for this object. See the Response Code section for further details. 
</li>
<li> ext: This is the standard extension element for this
              object. Refer to the Extensibility section for more
              details. 
</li>
</ul><p>
          
</p>
<a name="queries"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.2"></a><h3>5.1.2.&nbsp;
Query Request and Response Structures</h3>

<p>An SPPP query request is wrapped within the
         &lt;spppQueryRequest&gt;  element while an SPPP query response is
         wrapped within an &lt;spppQueryResponse&gt; element.
         The following two sub-sections describe these two element structures.
</p>
<a name="queryrequest"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.2.1"></a><h3>5.1.2.1.&nbsp;
Query Request</h3>

<p> An SPPP query request object is contained within the generic
            &lt;spppQueryRequest&gt; element. 
</p>
<p>
            </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;element name="spppQueryRequest"&gt;
    &lt;complexType&gt;
      &lt;sequence&gt;
        &lt;element name="minorVer" type="spppb:MinorVerType"
            minOccurs="0"/&gt;
        &lt;element name="rqst" type="spppb:BasicQueryRqstType"/&gt;
      &lt;/sequence&gt;
    &lt;/complexType&gt;
  &lt;/element&gt;

</pre></div><p>

          
</p>
<p> The data elements within the &lt;spppQueryRequest&gt; 
          element are described as follows: 
          </p>
<ul class="text">
<li> minorVer: Zero or one minor version identifier, indicating the minor  
              version of the SPPP API that the client is attempting to use. This is
              used in conjunction with the major version identifier in
              the XML namespace to identify the version of SPPP that the client 
              is using.  If the element is not present, the server assumes that 
              the client is using the latest minor version supported by the SPPP
              server for the given major version. The versions supported by a 
              given SPPP server can be retrieved by the client using the 
              SPPP server menu operation described later in the document.
</li>
<li> rqst: One BasicQueryRqstType objects.  This is the query 
              that the client is requesting the SPPP server perform. 
            
</li>
</ul><p>
          
</p>
<p> All query request objects extend the base type BasicQueryRqstType. This
          base type is defined as follows: 
</p>
<p>       
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;complexType name="BasicQueryRqstType" abstract="true"&gt;
    &lt;sequence&gt;
      &lt;element name="ext" type="spppb:ExtAnyType" minOccurs="0"/&gt;
    &lt;/sequence&gt;
  &lt;/complexType&gt;

</pre></div><p>

          
</p>
<p> The BasicQueryRqstType object primarily acts as an abstract base type, 
          and its only data element is described as follows: 
          </p>
<ul class="text">
<li> ext: This is the standard extension element for this
              object. Refer to the Extensibility section of this
              document for more details. 
</li>
</ul><p>
          
</p>
<a name="queryresponse"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.2.2"></a><h3>5.1.2.2.&nbsp;
Query Response</h3>

<p> An SPPP query response object is contained within the generic
          &lt;spppQueryResponse&gt; element. 
</p>
<p>
            </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;element name="spppQueryResponse"&gt;
    &lt;complexType&gt;
      &lt;sequence&gt;
        &lt;element name="overallResult" type="spppb:ResultCodeType"/&gt;
        &lt;element name="resultSet" type="spppb:BasicObjType"
           minOccurs="0" maxOccurs=" unbounded"/&gt;
      &lt;/sequence&gt;
    &lt;/complexType&gt;
  &lt;/element&gt;

</pre></div><p>

          
</p>
<p> An &lt;spppQueryResponse&gt; contains the 
          elements necessary for the SPPP client to precisely determine the 
          overal result of the query, and if an error occurred, exactly 
          what condition caused the error. 
</p>
<p> The data elements within the SPPP query response are
            described as follows: </p>
<ul class="text">
<li> overallResult: Exactly one response code and message pair that 
              explicitly identifies the result of the request. See the 
              Response Code section for further details. 
</li>
<li> resultSet: The set of zero or more objects that matched the 
              query criteria.  If no objects matched the query criteria then this 
              result set MUST be empty and the overallResult value MUST indicate success (if no matches are found for the query criteria, the response is considered a success).
</li>
</ul><p>
          
</p>
<a name="resultcodes"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Response Codes and Messages</h3>

<p> This section contains the listing of response codes
        and their corresponding human-readable text. 
</p>
<p> The response code numbering scheme generally adheres to the
        theory formalized in section 4.2.1 of <a class='info' href='#RFC5321'>[RFC5321]<span> (</span><span class='info'>Klensin, J., &ldquo;Simple Mail Transfer Protocol,&rdquo; October&nbsp;2008.</span><span>)</span></a>: 
        </p>
<ul class="text">
<li> The first digit of the response code can only be 1 or 2:
            1 = a positive result, 2 = a negative result. 
</li>
<li> The second digit of the response code indicates the
            category: 0 = Protocol Syntax, 1 = Implementation Specific
            Business Rule, 2 = Security, 3 = Server System. 
</li>
<li> The third and fourth digits of the response code
            indicate the individual message event within the category
            defines by the first two digits. 
</li>
</ul><p>
      
</p>
<p> The response codes are also categorized as to whether they are 
      overall response codes that may only be returned in the "overallResult"
      data element in SPPP responses, of object level response codes that 
      may only be returned in the "rqstObjResult" element of the SPPP
      responses.
</p><br /><hr class="insert" />
<a name="Table1"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left" width="10%"><col align="left" width="30%"><col align="left" width="60%">
<tr><th align="left">Result Code</th><th align="left">Text</th><th align="left">Overall or Object Level</th></tr>
<tr>
<td align="left"> 1000 </td>
<td align="left"> Request Succeeded.</td>
<td align="left"> Overall Response Code</td>
</tr>
<tr>
<td align="left"> 2001 </td>
<td align="left"> Request syntax invalid.</td>
<td align="left"> Overall Response Code</td>
</tr>
<tr>
<td align="left"> 2002 </td>
<td align="left"> Request too large.</td>
<td align="left"> Overall Response Code</td>
</tr>
<tr>
<td align="left"> 2003 </td>
<td align="left"> Version not supported.</td>
<td align="left"> Overall Response Code</td>
</tr>
<tr>
<td align="left"> 2103 </td>
<td align="left"> Command invalid.</td>
<td align="left"> Overall Response Code</td>
</tr>
<tr>
<td align="left"> 2301 </td>
<td align="left"> System temporarily unavailable.</td>
<td align="left"> Overall Response Code</td>
</tr>
<tr>
<td align="left"> 2302 </td>
<td align="left"> Unexpected internal system or server error.</td>
<td align="left"> Overall Response Code</td>
</tr>
<tr>
<td align="left"> 2104 </td>
<td align="left"> Attribute value invalid. AttrName:[AttributeName] AttrVal:[AttributeValue]</td>
<td align="left"> Object Level Response Code</td>
</tr>
<tr>
<td align="left"> 2105 </td>
<td align="left"> Object does not exist. AttrName:[AttributeName] AttrVal:[AttributeValue]</td>
<td align="left"> Object Level Response Code</td>
</tr>
<tr>
<td align="left"> 2106 </td>
<td align="left"> Object status or ownership does not allow for operation. AttrName:[AttributeName] 
        AttrVal:[AttributeValue]</td>
<td align="left"> Object Level Response Code</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 1: Response Codes Numbering Scheme and Messages&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p> Each of the object level response messages are "parameterized" with the 
        following parameters: "AttributeName" and "AttributeValue". 
</p>
<p> The use of these parameters MUST adhere to the following
        rules: </p>
<ul class="text">
<li> All parameters within a response message are
            mandatory and MUST be present. 
</li>
<li> Any value provided for the "AttributeName"
            parameter MUST be an exact XSD element name of the protocol
            data element that the response message is referring to.
            For example, valid values for "attribute name" are
            "dgName", "rteGrpName", "rteRec", etc. 
</li>
<li> The value for "AttributeValue" MUST be the
            value of the data element to which the preceding
            "AttributeName" refers. 
</li>
<li> Result code
            2104 SHOULD be used whenever an element value does not
            adhere to data validation rules. 
</li>
<li>
            Result codes 2104 and 2105 MUST NOT be used
            interchangeably. Response code 2105 SHOULD be returned
            by an update operation when the data element(s) used to uniquely identify a
            pre-existing object do not exist. If the data elements
            used to uniquely identify an object are malformed, then
            response code 2104 SHOULD be returned. 
</li>
</ul><p>
        
</p>
<a name="BasicObjType"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
Basic Object Type and Organization Identifiers</h3>

<p> This section introduces the basic object type that most first class objects derive from. 
</p>
<p> All first class objects extend the basic object type        BasicObjType which contains the identifier of the 
              registrant organization that owns this object, the identifier 
              of the registrar organization that provisioned this 
              object, the date and time that the object was created 
              by the server, and the date and time that the object 
              was last modified.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;complexType name="BasicObjType" abstract="true"&gt;
    &lt;sequence&gt;
      &lt;element name="rantId" type="spppb:OrgIdType"/&gt;
      &lt;element name="rarId" type="spppb:OrgIdType"/&gt;
      &lt;element name="crtDate" type="dateTime" minOccurs="0"/&gt;
      &lt;element name="modDate" type="dateTime" minOccurs="0"/&gt;
      &lt;element name="ext" type="spppb:ExtAnyType" minOccurs="0"/&gt;
    &lt;/sequence&gt;
  &lt;/complexType&gt;


</pre></div><p>

        
</p>
<p>
        	The identifiers used for registrants (rantId), registrars (rarId) and peering organizations (peeringOrg) are instances of OrgIdType. The OrgIdType is defined as a string and all OrgIdType instances SHOULD follow the textual convention: "namespace:value" (for example "iana-en:32473").  See the IANA Consideration section for more details.
        
</p>
<a name="protocolcommands"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Protocol Commands</h3>

<p> This section provides a description of each supported protocol 
      command. 
</p>
<a name="addrtegrp"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
Add Route Group Operation</h3>

<p> As described in the introductory sections, a Route Group
          represents a combined grouping of Route Records that define
          route information, Destination Groups that contain a set of
          Public Identifiers with common routing information, and the
          list of peer organizations that have access to these public
          identifiers using this route information. It is this
          indirect linking of public identifiers to their route 
          information that significantly improves the scalability and
          manageability of the peering data. Additions and changes to
          routing information are reduced to a single operation on a
          Route Group or Route Record , rather than millions of data updates 
          to individual public identifier records that individually contain
          their peering data. 
</p>
<p> The AddRteGrpRqstType operation creates or overwrites a Route 
          Group object. If a Route Group with the given
          name and registrant ID (which together comprise the unique key
          or a Route Group) does not exist, then the server MUST
          create the Route Group. If a Route Group with the given name
          and registrant ID does exist, then the server MUST replace the
          current properties of the Route Group with the properties
          passed into the AddRteGrpRqstType operation. The XSD
          declarations of the AddRteGrpRqstType operation request object 
          are as follows: 
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;complexType name="AddRteGrpRqstType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:BasicRqstType"&gt;
        &lt;sequence&gt;
          &lt;element name="rteGrp" type="spppb:RteGrpType"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;

</pre></div><p>

        
</p>
<p> The element passed into the spppUpdateRequest element for this
          operation is an instance of AddRteGrpRqstType, which extends 
          BasicRqstType and contains one RteGrpType object. The RteGrpType 
          object structure is defined as follows: 
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;complexType name="RteGrpType"&gt;
    &lt;complexContent&gt;
     &lt;extension base="spppb:BasicObjType"&gt;
       &lt;sequence&gt;
         &lt;element name="rteGrpName" type="spppb:ObjNameType"/&gt;
         &lt;element name="rteRecRef" type="spppb:RteRecRefType"
           minOccurs="0" maxOccurs="unbounded"/&gt;
         &lt;element name="dgName" type="spppb:ObjNameType" minOccurs="0"
           maxOccurs="unbounded"/&gt;
         &lt;element name="peeringOrg" type="spppb:OrgIdType"
           minOccurs="0" maxOccurs="unbounded"/&gt;
         &lt;element name="sourceIdent" type="spppb:SourceIdentType"
           minOccurs="0" maxOccurs="unbounded"/&gt;
         &lt;element name="isInSvc" type="boolean"/&gt;
         &lt;element name="priority" type="unsignedShort"/&gt;
         &lt;element name="ext" type="spppb:ExtAnyType" minOccurs="0"/&gt;
       &lt;/sequence&gt;
     &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;

  &lt;complexType name="RteRecRefType"&gt;
    &lt;sequence&gt;
      &lt;element name="rteRec" type="spppb:ObjKeyType"/&gt;
      &lt;element name="priority" type="unsignedShort"/&gt;
      &lt;element name="ext" type="spppb:ExtAnyType" minOccurs="0"/&gt;
    &lt;/sequence&gt;
  &lt;/complexType&gt;

</pre></div><p>

        
</p>
<p>The RteGrpType object is composed of the following
          elements: </p>
<ul class="text">
<li> base: All first class objects extend 
              BasicObjType which contains the ID of the 
              registrant organization that owns this object, the ID 
              of the registrar organization that provisioned this 
              object, the date and time that the object was created 
              by the server, and the date and time that the object 
              was last modified. If the client passes in either the 
              created date or the modification date, the server will  
              ignore them.  The server sets these two date/time values.
</li>
<li> rteGrpName: The character string that contains the
              name of the Route Group. It uniquely identifies this
              object within the context of the registrant ID (a child
              element of the base element as described above). 
</li>
<li> rteRecRef: Set of zero or more objects of type RteRecRefType
              that house the unique keys of the Route Records that the 
              the RteGrpType object refers to and their relative priority 
              within the context of a given route group. The associated Route  
              Records contain the routing information, sometimes called SED, 
              associated with this Roue Group.
</li>
<li> dgName: Set of zero or more names of DestGrpType
              object instances. Each dgName name, in association with
              this Route Group's registrant ID, uniquely identifies a
              DestGrpType object instance whose public identifiers are
              reachable using the routing information housed in this
              Route Group.  An intended side affect of this is that 
              a Route Group cannot provide routing information for a 
              Destination Group belonging to another registrant. 
</li>
<li> peeringOrg: Set of zero or more peering organization
              IDs that have accepted an offer to receive this Route
              Group's information. The set of peering organizations in
              this list is not directly settable or modifiable using
              the addRteGrpsRqst operation. This set is instead
              controlled using the route offer and accept operations. 
</li>
<li> sourceIdent: Set of zero or more SourceIdentType
              object instances. These objects, described further
              below, house the source identification schemes and
              identifiers that are applied at resolution time as part
              of source based routing algorithms for the Route Group. 
</li>
<li> isInSvc: A boolean element that defines whether this
              Route Group is in service. The routing information
              contained in a Route Group that is in service is a
              candidate for inclusion in resolution responses for
              public identities residing in the Destination Group
              associated with this Route Group. The routing
              information contained in a Route Group that is not in
              service is not a candidate for inclusion in resolution
              responses. 
</li>
<li> priority: Zero or one priority value that can be used 
              to provide a relative value weighting of one Route Group 
              over another.  The manner in which this value is used, 
              perhaps in conjunction with other factors, is a matter of 
              policy.
</li>
<li> ext: Point of extensibility described in a previous
              section of this document. 
</li>
</ul><p>
        
</p>
<p> As described above, the Route Group contains a set of references 
          to route record objects. A route record object is based on an
          abstract type: RteRecType. The concrete types that use
          RteRecType as an extension base are NAPTRType, NSType, and
          URIType. The definitions of these types are included the Route 
          Record section of this document. 
</p>
<p> The RteGrpType object provides support for source-based 
          routing via the peeringOrg data element and more granular 
          source base routing via the source identity element. The 
          source identity element provides the ability to specify zero or
          more of the following in association with a given Route
          Group: a regular expression that is matched against the
          resolution client IP address, a regular expression that is
          matched against the root domain name(s), and/or a regular
          expression that is matched against the calling party URI(s).
          The result will be that, after identifying the visible Route
          Groups whose associated Destination Group(s) contain the
          lookup key being queried and whose peeringOrg list contains 
          the querying organizations organization ID, the resolution server 
          will evaluate the characteristics of the Source URI, and Source
          IP address, and root domain of the lookup key being queried.
          The resolution server then compares these criteria against the 
          source identity criteria associated with the Route Groups. The
          routing information contained in Route Groups that have
          source based routing criteria will only be included in the
          resolution response if one or more of the criteria matches
          the source criteria from the resolution request.  The Source 
          Identity data element is of type SourceIdentType, whose structure 
          is defined as follows:
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;complexType name="SourceIdentType"&gt;
    &lt;sequence&gt;
      &lt;element name="sourceIdentLabel" type="string"/&gt;
      &lt;element name="sourceIdentScheme"
        type="spppb:SourceIdentSchemeType"/&gt;
      &lt;element name="ext" type="spppb:ExtAnyType" minOccurs="0"/&gt;
    &lt;/sequence&gt;
  &lt;/complexType&gt;

  &lt;simpleType name="SourceIdentSchemeType"&gt;
    &lt;restriction base="token"&gt;
      &lt;enumeration value="uri"/&gt;
      &lt;enumeration value="ip"/&gt;
      &lt;enumeration value="rootDomain"/&gt;
    &lt;/restriction&gt;
  &lt;/simpleType&gt;

</pre></div><p>

        
</p>
<p>The SourceIdentType object is composed of the following
          data elements: </p>
<ul class="text">
<li> sourceIdentScheme: The source identification scheme
              that this source identification criteria applies to and
              that the associated sourceIdentRegex should be matched
              against. 
</li>
<li> sourceIdentRegex: The regular expression that should
              be used to test for a match against the portion of the
              resolution request that is dictated by the associated
              sourceIdentScheme. 
</li>
<li> ext: Point of extensibility described in a previous
              section of this document. 
</li>
</ul><p>
        
</p>
<p>As with the responses to all update operations, the result 
        of the AddRteGrpRqstType operation is contained in the generic 
        spppUpdateResponse data structure described in an earlier sections 
        of this document.  For a detailed description of the 
        spppUpdateResponse data structure refer to that section of the 
        document.
</p>
<a name="getroutegrps"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2"></a><h3>6.2.&nbsp;
Get Route Groups Operation</h3>

<p> The getRteGrpsRqst operation allows a client to get the
          properties of Route Group objects that a registrar
          organization is authorized to view. The server will attempt
          to find a Route Group object that has the registrant ID and
          route group name pair contained in each ObjKeyType object
          instance. If the set of ObjKeyType objects is empty then the
          server will return the list of Route Group objects that the
          querying client has the authority to view. If there are no
          matching Route Groups found then an empty result set will be
          returned. 
</p>
<p> The element passed into the spppQueryRequest element for this
          operation is an instance of type GetRteGrpsRqstType, which 
          extends BasicRqstType and contains zero or more ObjKeyType 
          objects. Any limitation on the maximum number of objects that 
          may be passed into or returned by this operation is a policy 
          decision and not limited by the protocol. The XSD declaration 
          of the operation is as follows: 
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;complexType name="GetRteGrpsRqstType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:BasicQueryRqstType"&gt;
        &lt;sequence&gt;
          &lt;element name="objKey" type="spppb:ObjKeyType"
            minOccurs="0" maxOccurs="unbounded"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;

</pre></div><p>

        
</p>
<p>As described in an earlier section of this document, the result 
        of any spppQueryRequest operation is an spppQueryResponse element 
        that contains the overall response code and the query result set, if
        any.  Refer to that section of the document for a detailed description 
        of the spppQueryResponse element.
</p>
<a name="adddestgrp"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.3"></a><h3>6.3.&nbsp;
Add Destination Group Operation</h3>

<p> As described in the introductory sections, a Destination Group
          represents a set of Public Identifiers with common routing information. 
</p>
<p> The AddDestGrpRqstType operation creates or overwrites a Destination 
          Group object. If a Destination Group with the given
          name and registrant ID (which together comprise the unique key for a 
          Destination Group) does not exist, then the server MUST
          create the Destination Group. If a Destination Group with the given name
          and registrant ID does exist, then the server MUST replace the
          current properties of the Destination Group with the properties
          passed into the AddDestGrpsRqstType operation. The XSD
          declarations of the operation request object are as follows: 
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;complexType name="AddDestGrpRqstType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:BasicRqstType"&gt;
        &lt;sequence&gt;
          &lt;element name="destGrp" type="spppb:DestGrpType"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;

</pre></div><p>

        
</p>
<p> The element passed into the spppUpdateRequest element for this
          operation is an element of type AddDestGrpRqsttype, which extends 
          BasicRqstType and contains a DestGrpType object. The DestGrpType 
          object structure is defined as follows: 
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;complexType name="DestGrpType"&gt;
    &lt;complexContent&gt;
     &lt;extension base="spppb:BasicObjType"&gt;
      &lt;sequence&gt;
         &lt;element name="dgName" type="spppb:ObjNameType"/&gt;
      &lt;/sequence&gt;
     &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;

</pre></div><p>

        
</p>
<p>The DestGrpType object is composed of the following
          elements: </p>
<ul class="text">
<li> base: All first class objects extend  
              BasicObjType which contains the ID of the 
              registrant organization that owns this object, the ID 
              of the registrar organization that provisioned this 
              object, the date and time that the object was created 
              by the server, and the date and time that the object 
              was last modified. If the client passed in either the 
              created date or the modification date, the server will 
              ignore them.  The server sets these two date/time values.
</li>
<li> dgName: The character string that contains the
              name of the Destination Group. This uniquely identifies this
              object within the context of the registrant ID (a child
              element of the base element as described above). 
</li>
<li> ext: Point of extensibility described in a previous
              section of this document. 
</li>
</ul><p>
        
</p>
<p>As with the responses to all update operations, the result 
        of the AddDestGrpRqstType operation is contained in the generic 
        spppUpdateResponse data structure described in an earlier sections 
        of this document.  For a detailed description of the 
        spppUpdateResponse data structure refer to that section of the 
        document.
</p>
<a name="getdestgrps"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.4"></a><h3>6.4.&nbsp;
Get Destination Groups Operation</h3>

<p> The getDestGrpsRqst operation allows a client to get the
          properties of Destination Group objects that a registrar
          organization is authorized to view. The server will attempt
          to find a Destination Group object that has the registrant ID and
          destination group name pair contained in each ObjKeyType object
          instance. If there are no matching Destination Groups found then 
          an empty result set will be returned. If the set of ObjKeyType 
          objects passed in is empty then the server will return the list of  
          Destination Group objects that the querying registrar has the authority 
          to view. 
</p>
<p> The element passed into the spppQueryRequest element for this
          operation is an instance of type GetDestGrpsRqstType, which 
          extends BasicQueryRqstType and contains zero or more ObjKeyType 
          objects. Any limitation on the maximum number of objects that 
          may be passed into or returned by this operation is a policy 
          decision and not limited by the protocol. The XSD declaration 
          of the operation is as follows: 
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;complexType name="GetDestGrpsRqstType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:BasicQueryRqstType"&gt;
        &lt;sequence&gt;
          &lt;element name="objKey" type="spppb:ObjKeyType"
            minOccurs="0" maxOccurs="unbounded"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;

</pre></div><p>

        
</p>
<p>As described in an earlier section of this document, the result 
        of any spppQueryRequest operation is an spppQueryResponse element 
        that contains the overall response code and the query result set, if
        any.  Refer to that section of the document for a detailed description 
        of the spppQueryResponse element.
</p>
<a name="addrtegrpoffer"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.5"></a><h3>6.5.&nbsp;
Add Route Group Offer Operation</h3>

<p> The list of peer organizations whose resolution responses
          can include the routing information contained in a given
          Route Group is controlled by the organization to which a
          Route Group object belongs (its registrant), and the peer
          organization that submits resolution requests (a data
          recipient, also know as a peering organization). The registrant 
          offers access to a Route Group by submitting a Route Group Offer. 
          The data recipient can then accept or reject that offer.
          Not until access to a Route Group has been offered and
          accepted will the data recipient's organization ID be
          included in the peeringOrg list in a Route Group object, and
          that Route Group's peering information become a candidate
          for inclusion in the responses to the resolution requests
          submitted by that data recipient. The AddRteGrpOffersRqstType
          operation creates or overwrites one or more Route Group
          Offer objects. If a Route Group Offer for the given Route Group 
          object key and the offeredToOrg ID does not exist, then the 
          server creates the Route Group Offer object. If a such a 
          Route Group Offer does exist, then the server replaces the 
          current object with the new object. The XSD declarations of 
          the operation request object are as follows: 
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;complexType name="AddRteGrpOfferRqstType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:BasicRqstType"&gt;
        &lt;sequence&gt;
          &lt;element name="rteGrpOffer" type="spppb:RteGrpOfferType"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;

</pre></div><p>

        
</p>
<p> The element passed into the spppUpdateRequest element for this
          operation is an instance of AddRteGrpOfferRqstType, which extends
          BasicRqstType and contains a RteGrpOfferType object. The XSD
          declaration of the RteGrpOfferType is as follows: 
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;complexType name="RteGrpOfferType"&gt;
   &lt;complexContent&gt;
     &lt;extension base="spppb:BasicObjType"&gt;
       &lt;sequence&gt;
         &lt;element name="rteGrpOfferKey"
                  type="spppb:RteGrpOfferKeyType"/&gt;
         &lt;element name="status" type="spppb:RteGrpOfferStatusType"/&gt;
         &lt;element name="offerDateTime" type="dateTime"/&gt;
         &lt;element name="acceptDateTime" type="dateTime" minOccurs="0"/&gt;
         &lt;element name="ext" type="spppb:ExtAnyType" minOccurs="0"/&gt;
       &lt;/sequence&gt;
     &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;

  &lt;complexType name="RteGrpOfferKeyType"&gt;
    &lt;sequence&gt;
      &lt;element name="rteGrpKey" type="spppb:ObjKeyType"/&gt;
      &lt;element name="offeredTo" type="spppb:OrgIdType"/&gt;
    &lt;/sequence&gt;
  &lt;/complexType&gt;

  &lt;simpleType name="RteGrpOfferStatusType"&gt;
    &lt;restriction base="token"&gt;
      &lt;enumeration value="offered"/&gt;
      &lt;enumeration value="accepted"/&gt;
    &lt;/restriction&gt;
  &lt;/simpleType&gt;

</pre></div><p>

        
</p>
<p>The RteGrpOfferType object is composed of the following
          elements: </p>
<ul class="text">
<li> base: All first class objects extend  
              BasicObjType which contains the ID of the 
              registrant organization that owns this object, the ID 
              of the registrar organization that provisioned this 
              object, the date and time that the object was created 
              by the server, and the date and time that the object 
              was last modified. If the client passed in either the 
              created date or the modification date, the will ignore 
              them.  The server sets these two date/time values.
</li>
<li> rteGrpOfferKey: The object that identifies the route
              that is or has been offered and the organization that it
              is or has been offered to. The combination of these
              three data elements uniquely identify a Route Group
              Offer. 
</li>
<li> status: The status of the offer, offered or accepted.
              This status is controlled by the server. It is
              automatically set to "offered" when ever a new Route
              Group Offer is added, and is automatically set to
              "accepted" if and when that offer is accepted. The value
              of the element is ignored when passed in by the client. 
</li>
<li> offerDateTime: Date and time in GMT when the Route
              Group Offer was added. 
</li>
<li> acceptDateTime: Date and time in GMT when the Route
              Group Offer was accepted. 
</li>
</ul><p>
        
</p>
<p>As with the responses to all update operations, the result 
        of the AddRteGrpOfferRqstType operation is contained in the generic 
        spppUpdateResponse data structure described in an earlier sections 
        of this document.  For a detailed description of the 
        spppUpdateResponse data structure refer to that section of the 
        document.
</p>
<a name="accrtegrpoff"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.6"></a><h3>6.6.&nbsp;
Accept Route Group Offer Operation</h3>

<p> Not until access to a Route Group has been offered and
          accepted will the data recipient's organization ID will it be  
          included in the peeringOrg list in that Route Group object,
          and that Route Group's peering information become a
          candidate for inclusion in the responses to the resolution
          requests submitted by that data recipient.  The
          AcceptRteGrpOffersRqstType operation is called by, or on behalf
          of, the data recipient to accept a Route Group
          Offer that is pending in the "offered" status for the data
          recipient's organization ID. If a Route Group Offer for the
          given Route Group Offer key (route name, route registrant
          ID, data recipient's organization ID) exists, then the
          server moves the Route Group Offer to the "accepted" status
          and adds that data recipient's organization ID into the list
          of peerOrgIds for that Route Group. If a such a Route Group
          Offer does not exist, then the server returns the
          appropriate error code, 2105. The XSD declarations for the
          operation request object are as follows: 
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;complexType name="AcceptRteGrpOfferRqstType"&gt;
  &lt;complexContent&gt;
    &lt;extension base="spppb:BasicRqstType"&gt;
      &lt;sequence&gt;
        &lt;element name="rteGrpOfferKey" type="spppb:RteGrpOfferKeyType"/&gt;
      &lt;/sequence&gt;
    &lt;/extension&gt;
  &lt;/complexContent&gt;
&lt;/complexType&gt;

</pre></div><p>

        
</p>
<p>The element passed into the spppUpdateRequest element for this
          operation is an instance of AcceptRteGrpOffersRqstType, which extends
          BasicRqstType and contains a RteGrpOfferKeyType object.
</p>
<p>As with the responses to all update operations, the result 
        of the AcceptRteGrpOfferRqstType operation is contained in the generic 
        spppUpdateResponse data structure described in an earlier sections 
        of this document.  For a detailed description of the 
        spppUpdateResponse data structure refer to that section of the 
        document.
</p>
<a name="rejrtegrpoff"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.7"></a><h3>6.7.&nbsp;
Reject Route Group Offer Operation</h3>

<p> The data recipient to which a Route Group has been offered has 
          the option of rejecting a Route Group Offer.  Furthermore, that 
          offer may be rejected, regardless of whether or not it has been
          previously accepted.  The RejectRteGrpOffersRqstType operation is used
          for these purposes and is called by, or on behalf of, the data
          recipient to accept a Route Group Offer that is
          pending in the "offered" status or is in the "accepted" status for
          the data recipient's organization ID. If a Route Group Offer
          for the given Route Group Offer key (route name, route
          registrant ID, data recipient's organization ID) exists in
          either the offered or accepted status, then the server
          deletes that Route Group Offer object, and, if appropriate,
          removes the data recipients organization ID from the list of
          peeringOrg IDs for that Route Group. If the Route Group Offer
          does not exist, then the server returns the appropriate
          error code, 2105. The XSD declarations for the operation
          request object are as follows: 
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;complexType name="RejectRteGrpOfferRqstType"&gt;
  &lt;complexContent&gt;
    &lt;extension base="spppb:BasicRqstType"&gt;
      &lt;sequence&gt;
        &lt;element name="rteGrpOfferKey" type="spppb:RteGrpOfferKeyType"/&gt;
      &lt;/sequence&gt;
    &lt;/extension&gt;
  &lt;/complexContent&gt;
&lt;/complexType&gt;

</pre></div><p>

        
</p>
<p>The element passed into the spppUpdateRequest element for this
          operation is an instance of RejectRteGrpOffersRqstType, which extends
          BasicRqstType and contains a RteGrpOfferKeyType object.
</p>
<p>As with the responses to all update operations, the result 
        of the RejectRteGrpOfferRqstType operation is contained in the generic 
        spppUpdateResponse data structure described in an earlier sections 
        of this document.  For a detailed description of the 
        spppUpdateResponse data structure refer to that section of the 
        document.
</p>
<a name="getrtegrpoff"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.8"></a><h3>6.8.&nbsp;
Get Route Group Offers Operation</h3>

<p> The getRteGrpOffersRqst operation allows a client to get
          the properties of zero or more Route Group Offer objects
          that registrar is authorized to view. The server will
          attempt to find Route Group Offer objects that have all the
          properties specified in the criteria passed into the
          operation. If no criteria is passed in then the server will
          return the list of Route Group Offer objects that the
          querying client has the authority to view. If there are no
          matching Route Group Offers found then an empty result set
          will be returned. 
</p>
<p> The element passed into the spppQueryRequest element for this
          operation is an instance of GetRteGrpOffersRqstType, which extends
          BasicQueryRqstType and contains the criteria that the
          returned Route Group Offer objects must match. Any limitation
          on the maximum number of objects that may be 
          returned by this operation is a policy decision and not
          limited by the protocol. The XSD declaration of the
          operation is as follows: 
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;complexType name="GetRteGrpOffersRqstType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:BasicQueryRqstType"&gt;
        &lt;sequence&gt;
          &lt;element name="offeredByPeers" type="boolean" minOccurs="0"/&gt;
          &lt;element name="offeredToPeers" type="boolean" minOccurs="0"/&gt;
          &lt;element name="status" type="spppb:RteGrpOfferStatusType"
            minOccurs="0"/&gt;
          &lt;element name="peeringOrg" type="spppb:OrgIdType"
            minOccurs="0" maxOccurs="unbounded"/&gt;
          &lt;element name="rteGrpOfferKey"
            type="spppb:RteGrpOfferKeyType" minOccurs="0"
            maxOccurs="unbounded"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;

</pre></div><p>

        
</p>
<p>The GetRteGrpOffersRqstType object is composed of the
          following elements: </p>
<ul class="text">
<li> offeredByPeers: Zero or one boolean value that, if
              true, indicates that only offers that are offered by
              peering organizations to the querying registrant should
              be included in the result set. If this value is false,
              the offers by peering organizations to the querying
              registrant should not be included in the result set. The
              result set is also subject to other query criteria in
              the request. 
</li>
<li> offeredToPeers: Zero or one boolean value that, if
              true, indicates that only offers that are offered to
              peering organizations by the querying registrant should
              be included in the result set. If this value is false,
              the offers to peering organizations by the querying
              registrant should not be included in the result set. The
              result set is also subject to other query criteria in
              the request. 
</li>
<li> status: The status of the offer, offered or accepted.
              Only offers in the specified status should be included
              in the result set. If this element is not present then
              the status of the offer should not be considered in the
              query. The result set is also subject to other query
              criteria in the request. 
</li>
<li> peeringOrg: Zero or more organization IDs. Only offers
              that are offered to or offered by the organization IDs
              in this list should be included in the result set. The
              result set is also subject to other query criteria in
              the request. 
</li>
<li> rteGrpOfferKey: Zero or more Route Group Offer Keys.
              Only offers having one of these keys should be included
              in the result set. The result set is also subject to
              other query criteria in the request. 
</li>
</ul><p>
        
</p>
<p>As described in an earlier section of this document, the result 
        of any spppQueryRequest operation is an spppQueryResponse element 
        that contains the overall response code and the query result set, if
        any.  Refer to that section of the document for a detailed description 
        of the spppQueryResponse element.
</p>
<a name="pubIdsOper"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.9"></a><h3>6.9.&nbsp;
Public Identifier Operations</h3>

<p>Public Identifier is the search key used for locating the session establishment data (SED). In many cases, a Public Identifier is attributed to the end user who has a retail relationship with the service provider or registrant organization. In SPPP, SED can be provisioned by the registrant, or by the registrar on behalf of the registrant. Also, SPPP supports the notion of the carrier-of-record as defined in RFC 5067. Therefore, the entity adding the Public Identity in the Registry can optionally claim to be a carrier-of-record.
</p>
<p>SPPP identifies three types of Public Identifiers: telephone number (TN), email address, and the routing number (RN). SPPP provides structures to manage a single TN, a contiguous range of TNs, and a TN prefix. 
</p>
<p>The XML schema type definition PubIDType is the generalization of the Public Identifier. PubIDType is an abstract type. In agreement with the data model, PubIDType member 'dgName' represents the name of the destination group that a given Public Identifier is associated to. The PubIDType object structure is defined as follows:
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;complexType name="PubIdType" abstract="true"&gt;
    &lt;complexContent&gt;
     &lt;extension base="spppb:BasicObjType"&gt;
       &lt;sequence&gt;
         &lt;element name="dgName" type="spppb:ObjNameType" minOccurs="0"/&gt;
       &lt;/sequence&gt;
     &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;

</pre></div><p>

        
</p>
<p>A registrant can add a Public Identifier with the help of a BasicRqstType called AddPubIdRqstType. To complete the add request, AddPubIdRqstType XML instance is added to &lt;spppUpdateRequest&gt; root element. If there is a conflict and a Public Identifier already exists in the Registry, the old entry will be replaced with the newly provisioned entry. For the add or update operation, the destination group name is a mandatory parameter. Not including a valid destination group name in the update request will cause the Registry to return an appropriate error.
</p>
<p>Telephone number is identified by TNType, an extension of PubIDType. TNType is composed of the following attributes:
            </p>
<ul class="text">
<li>tn: Telephone number to be added to the Registry.
</li>
<li>rteRecRef: Optional reference to the route record that is directly associated with the TN Public Identifier. Following the SPPP data model, the route record could be a protocol agnostic URIType or another type.
</li>
<li>corInfo: corInfo is an optional parameter of type CORInfoType that allows the registrant organization to set forth a claim to be the carrier-of-record [see RFC 5067]. This is done by setting the value of &lt;corClaim&gt; element of the CORInfoType object structure to &quot;true&quot;. The other two parameters of the CORInfoType, &lt;cor&gt; and &lt;corDateTime&gt; are set by the Registry to describe the outcome of the carrier-of-record claim by the registrant. In general, inclusion of &lt;corInfo&gt; parameter is useful if the Registry has the authority information, such as, the number portability data, etc., in order to qualify whether the registrant claim can be satisfied. If the carrier-of-record claim disagrees with the authority data in the Registry, whether the TN add operation fails or not is a matter of policy and it is beyond the scope of this document. In the response message &lt;spppUpdateResponse&gt;, the SPPP Server must include the &lt;cor&gt; parameter of the &lt;corInfo&gt; element to let the registrant know the outcome of the claim.
</li>
</ul><p>
          
</p>
<p>TNType object definition is as follows:
</p>
<p>
            </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;complexType name="TNType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:PubIdType"&gt;
        &lt;sequence&gt;
          &lt;element name="tn" type="string"/&gt;
          &lt;element name="rteRecRef" type="spppb:RteRecRefType"
             minOccurs="0" maxOccurs="unbounded"/&gt;
          &lt;element name="corInfo" type="spppb:CORInfoType"
             minOccurs="0"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;

</pre></div><p>

          
</p>
<p>Routing number is identified by RNType. SSPs that possess the number portability data may be able to leverage the RN search key to discover the ingress routes for session establishment. Therefore, the registrant organization can add the RN and associate it with the appropriate destination group to share the route information.
</p>
<p>RNType is composed of the following attributes:
          </p>
<ul class="text">
<li>rn: Routing Number used as the search key
</li>
<li>corInfo: Optional &lt;corInfo&gt; element of type CORInfoType.
</li>
</ul><p>
          
</p>
<p>RNType object information is as follows:
</p>
<p>
            </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;complexType name="RNType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:PubIdType"&gt;
        &lt;sequence&gt;
          &lt;element name="rn" type="string" default="true"/&gt;
          &lt;element name="corInfo" type="spppb:CORInfoType"
               minOccurs="0"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;

</pre></div><p>

          
</p>
<p>A contiguous range of TNs is added with the help of TNRType structure. The object definition requires a starting TN and the ending TN that describes the TN range. In addition, TNRType includes an optional &quot;prefix&quot; attribute to indicate that the given TN range qualifies for the Open Number Plan (ONP). In order to correctly expand the number range that qualifies for Open Number Plan, the Registry must have the required data related to the national significant number length for the TNs in the TN range object. Further, &lt;spppUpdateRequest&gt; is transactional in nature, therefore, if the Registry encounters an error in adding even a single TN of a TNRType object, the whole request will be deemed a failure. In other words, the partial success case is not supported.
</p>
<p>TNRType is composed of the following attributes:
            </p>
<ul class="text">
<li>startTn: Starting TN in the TN range
</li>
<li>endTn: The last TN in the TN range
</li>
<li>corInfo: Optional &lt;corInfo&gt; element of type CORInfoType
</li>
<li>prefix: Optional attribute, when set to &quot;true&quot;, indicates that the Open Number Plan applies to a given TN Range
</li>
</ul><p>
          
</p>
<p>TNPType object structure is as follows:
</p>
<p>
            </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;complexType name="TNRType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:PubIdType"&gt;
        &lt;sequence&gt;
          &lt;element name="startTn" type="string"/&gt;
          &lt;element name="endTn" type="string"/&gt;
          &lt;element name="corInfo" type="spppb:CORInfoType"
              minOccurs="0"/&gt;
        &lt;/sequence&gt;
        &lt;attribute name="prefix" type="boolean" default="false"&gt;
           &lt;/attribute&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;

</pre></div><p>

          
</p>
<p>In some cases, it is useful to describe a set of TNs with the help of the first few digits of the telephone numbers identified as telephone number prefix. In many instances, the numbering authority assigns TN prefix, also referred to as a TN block, to a well-known telephony service provider. In SPPP, the TNPType structure describes a TN prefix and it consists of the following attributes:
            </p>
<ul class="text">
<li>tnPrefix: The telephone number prefix
</li>
<li>corInfo: Optional &lt;corInfo&gt; element of type CORInfoType.
</li>
</ul><p>
          
</p>
<p>TNPType object structure is as follows:
</p>
<p>
            </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;complexType name="TNPType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:PubIdType"&gt;
        &lt;sequence&gt;
          &lt;element name="tnPrefix" type="string"/&gt;
          &lt;element name="corInfo" type="spppb:CORInfoType"
            minOccurs="0"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;

</pre></div><p>

          
</p>
<p>The object structure of AddPubIdRqstType used to add Public Identifiers is as follows
</p>
<p>
            </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;complexType name="AddPubIdRqstType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:BasicRqstType"&gt;
        &lt;sequence&gt;
          &lt;element name="pi" type="spppb:PubIdType"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;

</pre></div><p>

          
</p>
<p>The client can set the GetPubIdsRqstType in the &lt;spppQueryRequest&gt; structure to obtain information about one or more &lt;pi&gt; objects that were successfully provisioned earlier and that the calling entity is privileged to see. If the GetPubIdsRqstType object does not include &lt;pi&gt; data, then all authorized Public Identity data will be returned by the Registry in the response. If no matching Public Identifiers are found, then an empty result set will be returned.
</p>
<p>GetPubIdsRqstType object structure is as follows:
</p>
<p>
            </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;complexType name="GetPubIdsRqstType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:BasicQueryRqstType"&gt;
        &lt;sequence&gt;
          &lt;element name="pi" type="spppb:PubIdType" minOccurs="0"
            maxOccurs="unbounded"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;

</pre></div><p>

          
</p>
<p>As described in an earlier section of this document, the result 
        of any spppQueryRequest operation is a spppQueryResponse 
        that contains the response code and the query result set, if
        any.
</p>
<a name="egressRteOper"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.10"></a><h3>6.10.&nbsp;
Egress Route Operations</h3>

<p>The egress route add operation allows a call originating SSP to define a preferred egress route in an attempt to reach the ingress SBE of the target SSP. The need arises when there is a choice of egress SBE and an SSP wants to exercise greater control in deciding how to route the outbound session establishment request.
</p>
<p>As a first step, it is assumed that the target SSP has offered to share the route group that consists of the ingress route information to the SBE(s) and the originating SSP has accepted the offer. Next, the originating SSP can add the egress route in the Registry, with appropriate regular expression, to rewrite ingress route information from the target SSP and include the egress SBE information. In high-availability configurations, the originating SSP will likely add a secondary egress route object re-writing the same ingress route from the target SSP with a secondary choice of egress SBE as a backup. In this case, the backup egress route definition will carry the higher integer value for the "pref" parameter to indicate a lower priority.
</p>
<p>An egress route is identified by type EgrRteType and its object structure is shown below: 
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;complexType name="EgrRteType"&gt;
    &lt;complexContent&gt;
     &lt;extension base="spppb:BasicObjType"&gt;
       &lt;sequence&gt;
         &lt;element name="egrRteName" type="spppb:ObjNameType"/&gt;
         &lt;element name="pref" type="unsignedShort"/&gt;
         &lt;element name="regxRewriteRule" type="spppb:RegexParamType"/&gt;
         &lt;element name="ingrRteRec" type="spppb:ObjKeyType"
            minOccurs="0" maxOccurs="unbounded"/&gt;
         &lt;element name="ext" type="spppb:ExtAnyType" minOccurs="0"/&gt;
       &lt;/sequence&gt;
     &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;

</pre></div><p>

        
</p>
<p>The EgrRteType object is composed of the following
          elements: </p>
<ul class="text">
<li> base: All first class objects extend 
              BasicObjType which contains the ID of the 
              registrant organization that owns this object, the ID 
              of the registrar organization that provisioned this 
              object, the date and time that the object was created 
              by the server, and the date and time that the object 
              was last modified. If the client passes in either the 
              created date or the modification date, the server will  
              ignore them.  The server sets these two date/time values.
</li>
<li> egrRteName: The name of the egress route. 
</li>
<li> pref: The preference of this egress route relative to other
              egress routes that may get selected when responding to a 
              resolution request.
</li>
<li> regxRewriteRule: The regular expression re-write rule
              that should be applied to the regular expression of the
              ingress NAPTR(s) that belong to the ingress route.
</li>
<li> ingrRteRec: The ingress route records that the
              egress route should be used for. 
</li>
<li> ext: Point of extensibility described in a previous
              section of this document. 
</li>
</ul><p>
        
</p>
<p> The AddEgrRteRqstType request is used to create or overwrite
          an egress route. 
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;complexType name="AddEgrRteRqstType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:BasicRqstType"&gt;
        &lt;sequence&gt;
          &lt;element name="egrRte" type="spppb:EgrRteType"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;

</pre></div><p>

        
</p>
<p> An instance of AddEgrRtesRqstType is added in the spppUpdateRequest 
            element in order to send a valid request to the server. Any
            limitation on the maximum number of AddEgrRteRqstType instances 
            is a matter of policy and is not limited by the specification. 
</p>
<p> The response from the server is returned in
            addEgrRteRspns element, which is defined as the element
            of type BasicRspnsType. 
</p>
<p> The GetEgrRtesRqstType is used by an authorized entity to
            fetch the well-known egress route data. 
</p>
<p>
            </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;complexType name="GetEgrRtesRqstType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:BasicQueryRqstType"&gt;
        &lt;sequence&gt;
          &lt;element name="objKey" type="spppb:ObjKeyType"
            minOccurs="0" maxOccurs="unbounded"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;

</pre></div><p>

          
</p>
<a name="addrterec"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.11"></a><h3>6.11.&nbsp;
Add Route Record Operation</h3>

<p> As described in the introductory sections, a Route Group
          represents a combined grouping of Route Records that define
          route information. However, Route Records need not be created to 
          just server a single Route Group.  Route Records can be created 
          and managed to serve multiple Route Groups.  As a result, a change 
          to the properties of a network node, for example, that is used for 
          multiple routes, would necessitate just a single update operation 
          to change the properties of that node.  The change would then be 
          reflected in all the Route Groups whose route record set contains 
          a reference to that node. 
</p>
<p> The AddRteRecRqstType operation creates or overwrites a Route 
          Record object. If a Route Record with the given
          name and registrant ID (which together comprise the unique key
          or a Route Record) does not exist, then the server MUST
          create the Route Record. If a Route Record with the given name
          and registrant ID does exist, then the server MUST replace the
          current properties of the Route Record with the properties
          passed into the AddRteRecRqstType operation. The XSD
          declarations of the AddRteRecRqstType operation request object 
          are as follows: 
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;complexType name="AddRteRecRqstType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:BasicRqstType"&gt;
        &lt;sequence&gt;
          &lt;element name="rteRec" type="spppb:RteRecType"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;

</pre></div><p>

        
</p>
<p> The element passed into the spppUpdateRequest element for this
          operation is an instance of AddRteRecRqstType, which extends 
          BasicRqstType and contains one RteRecType object. The RteRecType 
          object structure is defined as follows: 
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;complexType name="RteRecType" abstract="true"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:BasicObjType"&gt;
         &lt;sequence&gt;
           &lt;element name="rrName" type="spppb:ObjNameType"/&gt;
           &lt;element name="priority" type="unsignedShort" minOccurs="0"/&gt;
         &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;

</pre></div><p>

        
</p>
<p>The RteRecType object is composed of the following
          elements: </p>
<ul class="text">
<li> base: All first class objects extend 
              BasicObjType which contains the ID of the 
              registrant organization that owns this object, the ID 
              of the registrar organization that provisioned this 
              object, the date and time that the object was created 
              by the server, and the date and time that the object 
              was last modified. If the client passes in either the 
              created date or the modification date, the server will  
              ignore them.  The server sets these two date/time values.
</li>
<li> rrName: The character string that contains the
              name of the Route Record. It uniquely identifies this
              object within the context of the registrant ID (a child
              element of the base element as described above). 
</li>
<li> priority: Zero or one priority value that can be used 
              to provide a relative value weighting of one Route Record 
              over another.  The manner in which this value is used, 
              perhaps in conjunction with other factors, is a matter of 
              policy.
</li>
<li> ext: Point of extensibility described in a previous
              section of this document. 
</li>
</ul><p>
        
</p>
<p> As described above, route records are based on an
          abstract type: RteRecType. The concrete types that use
          RteRecType as an extension base are NAPTRType, NSType, and
          URIType. The definitions of these types are included below.
          The NAPTRType object is comprised of the data elements
          necessary for a NAPTR that contains routing information for a
          Route Group. The NSType object is comprised of the data
          elements necessary for a Name Server that points to another
          DNS server that contains the desired routing information.
          The URIType object is comprised of the data elements
          necessary to house a URI. 
</p>
<p> The data provisioned in a Registry can be leveraged for
          many purposes and queried using various protocols including
          SIP, ENUM and others. It is for this reason that a route
          record type offers a choice of URI and DNS resource record
          types. URIType fulfills the need for both SIP and ENUM protocols. When a given URIType is associated to a destination group, the user part of the replacement string &lt;uri&gt; that may require the Public Identifier cannot be preset. As a SIP Redirect, the resolution server will apply &lt;ere&gt; pattern on the input Public Identifier in the query and process the replacement string by substituting any back reference(s) in the &lt;uri&gt; to arrive at the final URI that is returned in the SIP Contact header. For an ENUM query, the resolution server will simply return the value of the &lt;ere&gt; and &lt;uri&gt; members of the URIType in the NAPTR REGEX parameter.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;complexType name="RteRecType" abstract="true"&gt;
    &lt;sequence&gt;
      &lt;element name="rrName" type="spppb:ObjNameType"/&gt;
      &lt;element name="priority" type="unsignedShort"/&gt;
    &lt;/sequence&gt;
  &lt;/complexType&gt;
  &lt;complexType name="NAPTRType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:RteRecType"&gt;
        &lt;sequence&gt;
          &lt;element name="order" type="unsignedShort"/&gt;
          &lt;element name="flags" type="string" minOccurs="0"/&gt;
          &lt;element name="svcs" type="string"/&gt;
          &lt;element name="regx" type="spppb:RegexParamType"
            minOccurs="0"/&gt;
          &lt;element name="repl" type="string" minOccurs="0"/&gt;
          &lt;element name="ttl" type="positiveInteger" minOccurs="0"/&gt;
          &lt;element name="ext" type="spppb:ExtAnyType" minOccurs="0"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;

  &lt;complexType name="NSType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:RteRecType"&gt;
        &lt;sequence&gt;
          &lt;element name="hostName" type="string"/&gt;
          &lt;element name="ipAddr" type="spppb:IPAddrType" minOccurs="0"
            maxOccurs="unbounded"/&gt;
          &lt;element name="ttl" type="positiveInteger" minOccurs="0"/&gt;
          &lt;element name="ext" type="spppb:ExtAnyType" minOccurs="0"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;

  &lt;complexType name="URIType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:RteRecType"&gt;
        &lt;sequence&gt;
          &lt;element name="ere" type="string" default="^(.*)$"/&gt;
          &lt;element name="uri" type="string"/&gt;
          &lt;element name="ext" type="spppb:ExtAnyType" minOccurs="0"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;

  &lt;complexType name="IPAddrType"&gt;
    &lt;sequence&gt;
      &lt;element name="addr" type="string"/&gt;
      &lt;element name="type" type="spppb:IPType"/&gt;
      &lt;element name="ext" type="spppb:ExtAnyType" minOccurs="0"/&gt;
    &lt;/sequence&gt;
  &lt;/complexType&gt;

  &lt;simpleType name="IPType"&gt;
    &lt;restriction base="token"&gt;
      &lt;enumeration value="IPv4"/&gt;
      &lt;enumeration value="IPv6"/&gt;
    &lt;/restriction&gt;
  &lt;/simpleType&gt;


</pre></div><p>

        
</p>
<p>The NAPTRType object is composed of the following elements:
            </p>
<ul class="text">
<li> order: Order value in an ENUM NAPTR, relative to other
              NAPTRType objects in the same Route Group. 
</li>
<li> svcs: ENUM service(s) that are served by the SBE. This
              field's value must be of the form specified in <a class='info' href='#RFC3761'>[RFC3761]<span> (</span><span class='info'>Faltstrom, P. and M. Mealling, &ldquo;The E.164 to Uniform Resource Identifiers (URI) Dynamic Delegation Discovery System (DDDS) Application (ENUM),&rdquo; April&nbsp;2004.</span><span>)</span></a>
              (e.g., E2U+pstn:sip+sip). The allowable values are a
              matter of policy and not limited by this protocol. 
</li>
<li> regx: NAPTR’s regular expression field. If this is not
              included then the Repl field must be included. 
</li>
<li> repl: NAPTR replacement field, should only be provided
              if the Regex field is not provided, otherwise it will be
              ignored by the server. 
</li>
<li> ttl: Number of seconds that an addressing server may
              cache this NAPTR. 
</li>
<li> ext: Point of extensibility described in a previous
              section of this document. 
</li>
</ul><p>
        
</p>
<p>The NSType object is composed of the following elements:
            </p>
<ul class="text">
<li> hostName: Fully qualified host name of the name
              server. 
</li>
<li> ipAddr: Zero or more objects of type IpAddrType. Each
              object holds an IP Address and the IP Address type, IPv4
              or IP v6. 
</li>
<li> ttl: Number of seconds that an addressing server may
              cache this Name Server. 
</li>
<li> ext: Point of extensibility described in a previous
              section of this document. 
</li>
</ul><p>
        
</p>
<p>The URIType object is composed of the following elements:
            </p>
<ul class="text">
<li>ere: The POSIX Extended Regular Expression (ere) as
              defined in <a class='info' href='#RFC3986'>[RFC3986]<span> (</span><span class='info'>Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;Uniform Resource Identifier (URI): Generic Syntax,&rdquo; January&nbsp;2005.</span><span>)</span></a>. 
            
</li>
<li>uri: the URI as defined in <a class='info' href='#RFC3986'>[RFC3986]<span> (</span><span class='info'>Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;Uniform Resource Identifier (URI): Generic Syntax,&rdquo; January&nbsp;2005.</span><span>)</span></a>. In some cases, this will serve as the replacement string and it will be left to the resolution server to arrive at the final usable URI.
            
</li>
</ul><p>
        
</p>
<p>As with the responses to all update operations, the result 
        of the AddRteRecRqstType operation is contained in the generic 
        spppUpdateResponse data structure described in an earlier sections 
        of this document.  For a detailed description of the 
        spppUpdateResponse data structure refer to that section of the 
        document.
</p>
<a name="getrterecs"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.12"></a><h3>6.12.&nbsp;
Get Route Records Operation</h3>

<p> The getRteRecsRqst operation allows a client to get the
          properties of Route Record objects that a registrar
          organization is authorized to view. The server will attempt
          to find a Route Record object that has the registrant ID and
          route record name pair contained in each ObjKeyType object
          instance. If the set of ObjKeyType objects is empty then the
          server will return the list of Route Record objects that the
          querying client has the authority to view. If there are no
          matching Route Record found then an empty result set will be
          returned. 
</p>
<p> The element passed into the spppQueryRequest element for this
          operation is an instance of type GetRteRecsRqstType, which 
          extends BasicRqstType and contains zero or more ObjKeyType 
          objects. Any limitation on the maximum number of objects that 
          may be passed into or returned by this operation is a policy 
          decision and not limited by the protocol. The XSD declaration 
          of the operation is as follows: 
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;complexType name="GetRteRecsRqstType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:BasicQueryRqstType"&gt;
        &lt;sequence&gt;
          &lt;element name="objKey" type="spppb:ObjKeyType"
            minOccurs="0" maxOccurs="unbounded"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;

</pre></div><p>

        
</p>
<p>As described in an earlier section of this document, the result 
        of any spppQueryRequest operation is an spppQueryResponse element 
        that contains the overall response code and the query result set, if
        any.  Refer to that section of the document for a detailed description 
        of the spppQueryResponse element.
</p>
<a name="delete_oper"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.13"></a><h3>6.13.&nbsp;
Delete Operation</h3>

<p>In order to remove an object from the Registry, an authorized entity can send the &lt;spppUpdateRequest&gt; to the Registry with a corresponding delete BasicRqstType object. If the entity that issued the command is not authorized to perform this operation or if the public identifier doesn't exist, an appropriate error code will be returned in the &lt;spppUpdateRespnonse&gt; message. 
</p>
<p>As an example, DelPubIdRqstType aids in identifying the Public Identifier that is used to delete a Public Identifier from the Registry. DelPubIdsRqstType object definition is shown below: 
</p>
<p>
            </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;complexType name="DelPubIdRqstType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:BasicRqstType"&gt;
        &lt;sequence&gt;
          &lt;element name="pi" type="spppb:PubIdType"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;

</pre></div><p>

          
</p>
<p>Similarly, each 'Add' operation in the SP protocol has a corresponding 'Del' operation used to delete the respective object type from the Registry.
</p>
<a name="examples"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
SPPP Examples</h3>

<p>This section shows XML message exchange between two SIP Service Providers (SSP) and a Registry. For the sake of simplicity, the transport wrapper for the SPPP protocol is left out. The SPPP protocol messages in this section are valid XML instances that conform to the SPPP schema version within this document.
</p>
<p>In this sample use case scenario, SSP1 and SSP2 provision resource data in the registry and use SPPP constructs to selectively share the route groups. In the figure below, SSP2 has two ingress SBE instances that are associated with the public identities that SSP2 has the retail relationship with. Also, the two SBE instances for SSP1 are used to show how to use SPPP protocol to associate route preferences for the destination ingress routes and exercise greater control on outbound traffic to the peer's ingress SBEs.
</p>
<p>
        </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

   ---------------+                      +------------------
                  |                      |
              +------+               +------+
              | sbe1 |               | sbe2 |
              +------+               +------+
    SSP1          |                      |           SSP2
              +------+               +------+
              | sbe3 |               | sbe4 |
              +------+               +------+
   iana-en:111    |                      |     iana-en:222
   ---------------+                      +------------------
           |                                     |
           |                                     |
           | SPPP   +------------------+   SPPP  |
           +-------&gt;|     Registry     |&lt;--------+
                    +------------------+

</pre></div><p>

        
</p>
<a name="add_destgrp"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1"></a><h3>7.1.&nbsp;
Add Destination Group</h3>

<p>SSP2 adds a destination group to the Registry for use later. The SSP2 SPPP client sets a unique transaction identifier 'tx_7777' for tracking purposes. The name of the destination group is set to DEST_GRP_SSP2_1
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

   &lt;?xml version="1.0" encoding="UTF-8"?&gt;
   &lt;spppUpdateRequest
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"
    xmlns="urn:ietf:params:xml:ns:sppp:base:1"&gt;
     &lt;clientTransId&gt;txid-5555&lt;/clientTransId&gt;
     &lt;rqst xmlns:ns1="urn:ietf:params:xml:ns:sppp:base:1"
       xsi:type="ns1:AddDestGrpRqstType"&gt;
       &lt;destGrp&gt;
         &lt;ns1:rantId&gt;iana-en:222&lt;/ns1:rantId&gt;
         &lt;ns1:rarId&gt;iana-en:222&lt;/ns1:rarId&gt;
         &lt;dgName&gt;DEST_GRP_SSP2_1&lt;/dgName&gt;
       &lt;/destGrp&gt;
     &lt;/rqst&gt;
   &lt;/spppUpdateRequest&gt;

</pre></div><p>

        
</p>
<p>The Registry processes the request and return a favorable response confirming successful creation of the named destination group. Also, besides returning a unique transaction identifier, Registry also returns the matching client transaction identifier from the request message back to the SPPP client.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

   &lt;?xml version="1.0" encoding="UTF-8"?&gt;
   &lt;spppUpdateResponse
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"
    xmlns="urn:ietf:params:xml:ns:sppp:base:1"&gt;
     &lt;clientTransId&gt;tx_7777&lt;/clientTransId&gt;
     &lt;serverTransId&gt;tx_id_12346&lt;/serverTransId&gt;
     &lt;overallResult&gt;
       &lt;code&gt;1000&lt;/code&gt;
       &lt;msg&gt;success&lt;/msg&gt;
     &lt;/overallResult&gt;
   &lt;/spppUpdateResponse&gt;

</pre></div><p>

        
</p>
<a name="add_rterecs"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2"></a><h3>7.2.&nbsp;
Add Route Records</h3>

<p>SSP2 adds an ingress routes in the Registry.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;?xml version="1.0" encoding="UTF-8"?&gt;
  &lt;spppUpdateRequest
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"
    xmlns="urn:ietf:params:xml:ns:sppp:base:1"&gt;
    &lt;rqst xmlns:ns1="urn:ietf:params:xml:ns:sppp:base:1"
      xsi:type="ns1:AddRteRecRqstType"&gt;
      &lt;rteRec xmlns:ns1="urn:ietf:params:xml:ns:sppp:base:1"
        xsi:type="ns1:NAPTRType"&gt;
        &lt;rantId&gt;iana-en:222&lt;/rantId&gt;
        &lt;rarId&gt;iana-en:222&lt;/rarId&gt;
        &lt;ns1:rrName&gt;RTE_SSP2_SBE2&lt;/ns1:rrName&gt;
        &lt;order&gt;10&lt;/order&gt;
        &lt;flags&gt;u&lt;/flags&gt;
        &lt;svcs&gt;E2U+sip&lt;/svcs&gt;
        &lt;regx&gt;
          &lt;ere&gt;^(.*)$&lt;/ere&gt;
          &lt;repl&gt;sip:\1@sbe2.ssp2.example.com&lt;/repl&gt;
        &lt;/regx&gt;
      &lt;/rteRec&gt;
    &lt;/rqst&gt;
  &lt;/spppUpdateRequest&gt;

</pre></div><p>

        
</p>
<p>The Registry returns a success response.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;?xml version="1.0" encoding="UTF-8"?&gt;
  &lt;spppUpdateResponse
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"
    xmlns="urn:ietf:params:xml:ns:sppp:base:1"&gt;
    &lt;serverTransId&gt;tx_id_11145&lt;/serverTransId&gt;
    &lt;overallResult&gt;
      &lt;code&gt;1000&lt;/code&gt;
      &lt;msg&gt;Request successful&lt;/msg&gt;
    &lt;/overallResult&gt;
  &lt;/spppUpdateResponse&gt;

</pre></div><p>

        
</p>
<a name="add_rterecs_uritype"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.3"></a><h3>7.3.&nbsp;
Add Route Records -- URIType</h3>

<p>SSP2 adds another ingress routes in the Registry and makes use of URIType
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;spppUpdateRequest
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"
  xmlns="urn:ietf:params:xml:ns:sppp:base:1"&gt;
  &lt;rqst xmlns:ns1="urn:ietf:params:xml:ns:sppp:base:1"
    xsi:type="ns1:AddRteRecRqstType"&gt;
    &lt;rteRec xmlns:ns1="urn:ietf:params:xml:ns:sppp:base:1"
      xsi:type="ns1:URIType"&gt;
      &lt;rantId&gt;iana-en:222&lt;/rantId&gt;
      &lt;rarId&gt;iana-en:222&lt;/rarId&gt;
      &lt;ns1:rrName&gt;RTE_SSP2_SBE4&lt;/ns1:rrName&gt;
      &lt;ns1:ere&gt;^(.*)$&lt;/ns1:ere&gt;
      &lt;ns1:uri&gt;sip:\1;npdi@sbe4.ssp2.example.com&lt;/ns1:uri&gt;
    &lt;/rteRec&gt;
  &lt;/rqst&gt;
&lt;/spppUpdateRequest&gt;

</pre></div><p>

        
</p>
<p>The Registry returns a success response.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;?xml version="1.0" encoding="UTF-8"?&gt;
  &lt;spppUpdateResponse
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"
    xmlns="urn:ietf:params:xml:ns:sppp:base:1"&gt;
    &lt;serverTransId&gt;tx_id_11145&lt;/serverTransId&gt;
    &lt;overallResult&gt;
      &lt;code&gt;1000&lt;/code&gt;
      &lt;msg&gt;Request successful&lt;/msg&gt;
    &lt;/overallResult&gt;
  &lt;/spppUpdateResponse&gt;

</pre></div><p>

        
</p>
<a name="add_rtegrp"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.4"></a><h3>7.4.&nbsp;
Add Route Group</h3>

<p>SSP2 creates the grouping of the ingress routes and choses higher precedence for RTE_SSP2_SBE2 by setting a lower number for the &quot;priority&quot; attribute, a protocol agnostic precedence indicator.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;?xml version="1.0" encoding="UTF-8"?&gt;
  &lt;spppUpdateRequest
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"
    xmlns="urn:ietf:params:xml:ns:sppp:base:1"&gt;
    &lt;rqst xmlns:ns1="urn:ietf:params:xml:ns:sppp:base:1"
      xsi:type="ns1:AddRteGrpRqstType"&gt;
      &lt;rteGrp&gt;
        &lt;rantId&gt;iana-en:222&lt;/rantId&gt;
        &lt;rarId&gt;iana-en:222&lt;/rarId&gt;
        &lt;rteGrpName&gt;RTE_GRP_SSP2_1&lt;/rteGrpName&gt;
        &lt;ns1:rteRecRef&gt;
          &lt;ns1:rteRec&gt;
            &lt;ns1:rantId&gt;iana-en:222&lt;/ns1:rantId&gt;
            &lt;ns1:name&gt;RTE_SSP2_SBE2&lt;/ns1:name&gt;
          &lt;/ns1:rteRec&gt;
          &lt;ns1:priority&gt;100&lt;/ns1:priority&gt;
        &lt;/ns1:rteRecRef&gt;
        &lt;dgName&gt;DEST_GRP_SSP2_1&lt;/dgName&gt;
        &lt;isInSvc&gt;true&lt;/isInSvc&gt;
        &lt;ns1:priority&gt;10&lt;/ns1:priority&gt;
      &lt;/rteGrp&gt;
    &lt;/rqst&gt;
  &lt;/spppUpdateRequest&gt;

</pre></div><p>

        
</p>
<p>To confirm successful processing of this request, Registry returns a well-known resolution code '1000' to the SSP2 client.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;?xml version="1.0" encoding="UTF-8"?&gt;
  &lt;spppUpdateResponse
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"
    xmlns="urn:ietf:params:xml:ns:sppp:base:1"&gt;
    &lt;serverTransId&gt;tx_id_12345&lt;/serverTransId&gt;
    &lt;overallResult&gt;
      &lt;code&gt;1000&lt;/code&gt;
      &lt;msg&gt;Request successful&lt;/msg&gt;
    &lt;/overallResult&gt;
  &lt;/spppUpdateResponse&gt;

</pre></div><p>

        
</p>
<a name="add_pi_corclaim"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.5"></a><h3>7.5.&nbsp;
Add Public Identity -- Successful COR claim</h3>

<p>SSP2 activates a TN public identity by associating it with a valid destination group. Further, SSP2 puts forth a claim that it is the carrier-of-record for the TN.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;?xml version="1.0" encoding="UTF-8"?&gt;
  &lt;spppUpdateRequest xmlns="urn:ietf:params:xml:ns:sppp:base:1"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"&gt;
    &lt;clientTransId&gt;txid-5577&lt;/clientTransId&gt;
    &lt;rqst xmlns:ns1="urn:ietf:params:xml:ns:sppp:base:1"
      xsi:type="ns1:AddPubIdRqstType"&gt;
      &lt;pi xmlns:ns1="urn:ietf:params:xml:ns:sppp:base:1"
        xsi:type="ns1:TNType"&gt;
        &lt;ns1:rantId&gt;iana-en:222&lt;/ns1:rantId&gt;
        &lt;ns1:rarId&gt;iana-en:222&lt;/ns1:rarId&gt;
        &lt;ns1:crtDate&gt;2010-05-30T09:30:10Z&lt;/ns1:crtDate&gt;
        &lt;ns1:dgName&gt;DEST_GRP_SSP2_1&lt;/ns1:dgName&gt;
        &lt;tn&gt;+12025556666&lt;/tn&gt;
        &lt;ns1:corInfo&gt;
          &lt;ns1:corClaim&gt;true&lt;/ns1:corClaim&gt;
        &lt;/ns1:corInfo&gt;
      &lt;/pi&gt;
    &lt;/rqst&gt;
  &lt;/spppUpdateRequest&gt;

</pre></div><p>

        
</p>
<p>Assuming that the Registry has access to TN authority data and it performs the required checks to verify that SSP2 is in fact the service provider of record for the given TN, the request was processed successfully. &lt;cor&gt; element confirms SSP2 claim to be the carrier of record has been accepted and the processing time is reflected by &lt;corDateTime&gt; data element.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;?xml version="1.0" encoding="UTF-8"?&gt;
  &lt;spppUpdateResponse
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"
    xmlns="urn:ietf:params:xml:ns:sppp:base:1"&gt;
    &lt;clientTransId&gt;txid-5577&lt;/clientTransId&gt;
    &lt;serverTransId&gt;tx_id_12345&lt;/serverTransId&gt;
    &lt;overallResult&gt;
      &lt;code&gt;1000&lt;/code&gt;
      &lt;msg&gt;success&lt;/msg&gt;
    &lt;/overallResult&gt;
    &lt;rqstObjResult&gt;
      &lt;code&gt;1000&lt;/code&gt;
      &lt;msg&gt;success&lt;/msg&gt;
      &lt;rqstObj xmlns:ns1="urn:ietf:params:xml:ns:sppp:base:1"
        xsi:type="ns1:AddPubIdRqstType"&gt;
          &lt;pi xmlns:ns1="urn:ietf:params:xml:ns:sppp:base:1"
            xsi:type="ns1:TNType"&gt;
            &lt;ns1:rantId&gt;iana-en:222&lt;/ns1:rantId&gt;
            &lt;ns1:rarId&gt;iana-en:222&lt;/ns1:rarId&gt;
            &lt;ns1:crtDate&gt;2010-05-30T09:30:10Z&lt;/ns1:crtDate&gt;
            &lt;ns1:dgName&gt;DEST_GRP_SSP2_1&lt;/ns1:dgName&gt;
            &lt;tn&gt;+12025556666&lt;/tn&gt;
            &lt;ns1:corInfo&gt;
              &lt;ns1:corClaim&gt;true&lt;/ns1:corClaim&gt;
              &lt;ns1:cor&gt;true&lt;/ns1:cor&gt;
              &lt;ns1:corDateTime&gt;2006-05-04T18:13:51.0Z
                                       &lt;/ns1:corDateTime&gt;
            &lt;/ns1:corInfo&gt;
          &lt;/pi&gt;
      &lt;/rqstObj&gt;
    &lt;/rqstObjResult&gt;
  &lt;/spppUpdateResponse&gt;

</pre></div><p>

        
</p>
<a name="add_lrn"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.6"></a><h3>7.6.&nbsp;
Add LRN</h3>

<p>If another entity that SSP2 shares the routes with has access to Number Portability data, it may choose to perform route lookups by routing number. Therefore, SSP2 associates a routing number to a destination group in order to facilitate ingress route discovery.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;?xml version="1.0" encoding="UTF-8"?&gt;
  &lt;spppUpdateRequest xmlns="urn:ietf:params:xml:ns:sppp:base:1"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"&gt;
    &lt;rqst xmlns:ns1="urn:ietf:params:xml:ns:sppp:base:1"
      xsi:type="ns1:AddPubIdRqstType"&gt;
      &lt;pi xmlns:ns1="urn:ietf:params:xml:ns:sppp:base:1"
        xsi:type="ns1:RNType"&gt;
        &lt;rantId&gt;rantId0&lt;/rantId&gt;
        &lt;rarId&gt;rarId0&lt;/rarId&gt;
        &lt;ns1:dgName&gt;DEST_GRP_SSP2_1&lt;/ns1:dgName&gt;
        &lt;rn&gt;2025550000&lt;/rn&gt;
      &lt;/pi&gt;
    &lt;/rqst&gt;
  &lt;/spppUpdateRequest&gt;

</pre></div><p>

        
</p>
<p>Registry completes the request successfully and returns a favorable response to the SPPP client.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

  &lt;?xml version="1.0" encoding="UTF-8"?&gt;
  &lt;spppUpdateResponse
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"
    xmlns="urn:ietf:params:xml:ns:sppp:base:1"&gt;
    &lt;serverTransId&gt;tx_id_12345&lt;/serverTransId&gt;
    &lt;overallResult&gt;
      &lt;code&gt;1000&lt;/code&gt;
      &lt;msg&gt;Request successful&lt;/msg&gt;
    &lt;/overallResult&gt;
  &lt;/spppUpdateResponse&gt;

</pre></div><p>

        
</p>
<a name="add_tn_range"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.7"></a><h3>7.7.&nbsp;
Add TN Range</h3>

<p>Next, SSP2 activates a block of ten thousand TNs and associate it to a destination group. Since the 'prefix' public identity attribute is not set to 'true', this means that the TNs belong to a closed number plan.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;spppUpdateRequest xmlns="urn:ietf:params:xml:ns:sppp:base:1"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"&gt;
  &lt;rqst xmlns:ns1="urn:ietf:params:xml:ns:sppp:base:1"
    xsi:type="ns1:AddPubIdRqstType"&gt;
    &lt;pi xmlns:ns1="urn:ietf:params:xml:ns:sppp:base:1"
      xsi:type="ns1:TNRType"&gt;
      &lt;rantId&gt;iana-en:222&lt;/rantId&gt;
      &lt;rarId&gt;iana-en:222&lt;/rarId&gt;
      &lt;ns1:dgName&gt;DEST_GRP_SSP2_1&lt;/ns1:dgName&gt;
      &lt;startTn&gt;+12026660000&lt;/startTn&gt;
      &lt;endTn&gt;+12026669999&lt;/endTn&gt;
    &lt;/pi&gt;
  &lt;/rqst&gt;
&lt;/spppUpdateRequest&gt;

</pre></div><p>

        
</p>
<p>Registry completes the request successfully and returns a favorable response.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;spppUpdateResponse
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"
  xmlns="urn:ietf:params:xml:ns:sppp:base:1"&gt;
  &lt;serverTransId&gt;tx_id_12244498&lt;/serverTransId&gt;
  &lt;overallResult&gt;
    &lt;code&gt;1000&lt;/code&gt;
    &lt;msg&gt;Request successful&lt;/msg&gt;
  &lt;/overallResult&gt;
&lt;/spppUpdateResponse&gt;

</pre></div><p>

        
</p>
<a name="add_tn_range_onp"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.8"></a><h3>7.8.&nbsp;
Add TN Range with Open Number Plan support</h3>

<p>In this case, open number plan refers to TN length variance. Inclusion of "prefix" attribute of TNRType with its value set to true indicates that the start TN range identified by the &lt;tn&gt; element is not necessarily a subscriber number and the Registry will have to consult the number plan data for the respective country to know how to expand the number range. &lt;endTn&gt; attribute marks the end of the TN range.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;spppUpdateRequest xmlns="urn:ietf:params:xml:ns:sppp:base:1"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"&gt;
  &lt;rqst xmlns:ns1="urn:ietf:params:xml:ns:sppp:base:1"
    xsi:type="ns1:AddPubIdRqstType"&gt;
    &lt;pi xmlns:ns1="urn:ietf:params:xml:ns:sppp:base:1"
      xsi:type="ns1:TNRType" prefix="true"&gt;
      &lt;rantId&gt;iana-en:222&lt;/rantId&gt;
      &lt;rarId&gt;iana-en:222&lt;/rarId&gt;
      &lt;ns1:dgName&gt;DEST_GRP_SSP2_1&lt;/ns1:dgName&gt;
      &lt;startTn&gt;+4312315566&lt;/startTn&gt;
      &lt;endTn&gt;+4312315567&lt;/endTn&gt;
    &lt;/pi&gt;
  &lt;/rqst&gt;
&lt;/spppUpdateRequest&gt;

</pre></div><p>

        
</p>
<p>Registry completes the request successfully and returns a favorable response.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;spppUpdateResponse
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"
  xmlns="urn:ietf:params:xml:ns:sppp:base:1"&gt;
  &lt;serverTransId&gt;tx_id_12255598&lt;/serverTransId&gt;
  &lt;overallResult&gt;
    &lt;code&gt;1000&lt;/code&gt;
    &lt;msg&gt;Request successful&lt;/msg&gt;
  &lt;/overallResult&gt;
&lt;/spppUpdateResponse&gt;

</pre></div><p>

        
</p>
<a name="add_tn_prefix"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.9"></a><h3>7.9.&nbsp;
Add TN Prefix</h3>

<p>Next, SSP2 activates a block of ten thousand TNs using the TNPType structure and identifying a TN prefix.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;spppUpdateRequest xmlns="urn:ietf:params:xml:ns:sppp:base:1"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"&gt;
  &lt;rqst xmlns:ns1="urn:ietf:params:xml:ns:sppp:base:1"
    xsi:type="ns1:AddPubIdRqstType"&gt;
    &lt;pi xmlns:ns1="urn:ietf:params:xml:ns:sppp:base:1"
      xsi:type="ns1:TNPType"&gt;
      &lt;rantId&gt;iana-en:222&lt;/rantId&gt;
      &lt;rarId&gt;iana-en:222&lt;/rarId&gt;
      &lt;ns1:dgName&gt;DEST_GRP_SSP2_1&lt;/ns1:dgName&gt;
      &lt;tnPrefix&gt;+1202777&lt;/tnPrefix&gt;
    &lt;/pi&gt;
  &lt;/rqst&gt;
&lt;/spppUpdateRequest&gt;

</pre></div><p>

        
</p>
<p>Registry completes the request successfully and returns a favorable response.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;spppUpdateResponse
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"
  xmlns="urn:ietf:params:xml:ns:sppp:base:1"&gt;
  &lt;serverTransId&gt;tx_id_12387698&lt;/serverTransId&gt;
  &lt;overallResult&gt;
    &lt;code&gt;1000&lt;/code&gt;
    &lt;msg&gt;Request successful&lt;/msg&gt;
  &lt;/overallResult&gt;
&lt;/spppUpdateResponse&gt;

</pre></div><p>

        
</p>
<a name="add_rte_grp_offer"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.10"></a><h3>7.10.&nbsp;
Enable Peering -- Route Group Offer</h3>

<p>In order for SSP1 to complete session establishment for a destination TN where the target subscriber has a retail relationship with SSP2, it first requires an asynchronous bi-directional handshake to show mutual consent. To start the process, SSP2 initiates the peering handshake by offering SSP1 access to its route group.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;spppUpdateRequest xmlns="urn:ietf:params:xml:ns:sppp:base:1"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"&gt;
  &lt;rqst xmlns:ns1="urn:ietf:params:xml:ns:sppp:base:1"
    xsi:type="ns1:AddRteGrpOfferRqstType"&gt;
    &lt;rteGrpOffer&gt;
      &lt;rantId&gt;iana-en:222&lt;/rantId&gt;
      &lt;rarId&gt;iana-en:222&lt;/rarId&gt;
      &lt;rteGrpOfferKey&gt;
        &lt;rteGrpKey&gt;
          &lt;rantId&gt;iana-en:222&lt;/rantId&gt;
          &lt;name&gt;RTE_GRP_SSP2_1&lt;/name&gt;
        &lt;/rteGrpKey&gt;
        &lt;offeredTo&gt;iana-en:111&lt;/offeredTo&gt;
      &lt;/rteGrpOfferKey&gt;
      &lt;status&gt;offered&lt;/status&gt;
      &lt;offerDateTime&gt;2006-05-04T18:13:51.0Z&lt;/offerDateTime&gt;
    &lt;/rteGrpOffer&gt;
  &lt;/rqst&gt;
&lt;/spppUpdateRequest&gt;

</pre></div><p>

        
</p>
<p>Registry completes the request successfully and confirms that the SSP1 will now have the opportunity to weigh in on the offer and either accept or reject it. The Registry may employ out-of-band notification mechanisms for quicker updates to SSP1 so they can act faster, though this topic is beyond the scope of this document.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;spppUpdateResponse
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"
  xmlns="urn:ietf:params:xml:ns:sppp:base:1"&gt;
  &lt;serverTransId&gt;tx_id_12277798&lt;/serverTransId&gt;
  &lt;overallResult&gt;
    &lt;code&gt;1000&lt;/code&gt;
    &lt;msg&gt;Request successful&lt;/msg&gt;
  &lt;/overallResult&gt;
&lt;/spppUpdateResponse&gt;

</pre></div><p>

        
</p>
<a name="add_rte_grp_offer_accept"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.11"></a><h3>7.11.&nbsp;
Enable Peering -- Route Group Offer Accept</h3>

<p>SSP1 responds to the offer from SSP2 and agrees to have visibility to SSP2 ingress routes.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;spppUpdateRequest xmlns="urn:ietf:params:xml:ns:sppp:base:1"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"&gt;
  &lt;rqst xmlns:ns1="urn:ietf:params:xml:ns:sppp:base:1"
    xsi:type="ns1:AcceptRteGrpOfferRqstType"&gt;
    &lt;rteGrpOfferKey&gt;
      &lt;rteGrpKey&gt;
        &lt;rantId&gt;iana-en:222&lt;/rantId&gt;
        &lt;name&gt;RTE_GRP_SSP2_1&lt;/name&gt;
      &lt;/rteGrpKey&gt;
      &lt;offeredTo&gt;iana-en:111&lt;/offeredTo&gt;
    &lt;/rteGrpOfferKey&gt;
  &lt;/rqst&gt;
&lt;/spppUpdateRequest&gt;

</pre></div><p>

        
</p>
<p>Registry confirms that the request has been processed successfully. From this point forward, if SSP1 looks up a public identity through the query resolution server, where the public identity is part of the destination group by way of "RTE_GRP_SSP2_1" route association, SSP2 ingress SBE information will be shared with SSP1.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;spppUpdateResponse
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"
  xmlns="urn:ietf:params:xml:ns:sppp:base:1"&gt;
  &lt;serverTransId&gt;tx_id_12333798&lt;/serverTransId&gt;
  &lt;overallResult&gt;
    &lt;code&gt;1000&lt;/code&gt;
    &lt;msg&gt;success&lt;/msg&gt;
  &lt;/overallResult&gt;
&lt;/spppUpdateResponse&gt;

</pre></div><p>

        
</p>
<a name="add_egress_rte"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.12"></a><h3>7.12.&nbsp;
Add Egress Route</h3>

<p>SSP1 wants to prioritize all outbound traffic to routes associated with "RTE_GRP_SSP2_1" route group through "sbe1.ssp1.example.com".
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;spppUpdateRequest xmlns="urn:ietf:params:xml:ns:sppp:base:1"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"&gt;
  &lt;clientTransId&gt;tx_9000&lt;/clientTransId&gt;
  &lt;rqst xmlns:ns1="urn:ietf:params:xml:ns:sppp:base:1"
    xsi:type="ns1:AddEgrRteRqstType"&gt;
    &lt;egrRte&gt;
      &lt;rantId&gt;iana-en:111&lt;/rantId&gt;
      &lt;rarId/&gt;
      &lt;egrRteName&gt;EGR_RTE_01&lt;/egrRteName&gt;
      &lt;pref&gt;50&lt;/pref&gt;
      &lt;regxRewriteRule&gt;
        &lt;ere&gt;^(.*@)(.*)$&lt;/ere&gt;
        &lt;repl&gt;\1\2?route=sbe1.ssp1.example.com&lt;/repl&gt;
      &lt;/regxRewriteRule&gt;
      &lt;ns1:ingrRteRec&gt;
        &lt;ns1:rantId&gt;iana-en:222&lt;/ns1:rantId&gt;
        &lt;ns1:name&gt;SSP2_RTE_REC_3&lt;/ns1:name&gt;
      &lt;/ns1:ingrRteRec&gt;
    &lt;/egrRte&gt;
  &lt;/rqst&gt;
&lt;/spppUpdateRequest&gt;

</pre></div><p>

        
</p>
<p>Since peering has already been established, the request to add the egress route has been successfully completed.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;spppUpdateResponse
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"
  xmlns="urn:ietf:params:xml:ns:sppp:base:1"&gt;
  &lt;clientTransId&gt;tx_9000&lt;/clientTransId&gt;
  &lt;serverTransId&gt;tx_id_12388898&lt;/serverTransId&gt;
  &lt;overallResult&gt;
    &lt;code&gt;1000&lt;/code&gt;
    &lt;msg&gt;Request successful&lt;/msg&gt;
  &lt;/overallResult&gt;
&lt;/spppUpdateResponse&gt;

</pre></div><p>

        
</p>
<a name="get_dest_grp"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.13"></a><h3>7.13.&nbsp;
Get Destination Group</h3>

<p>SSP2 uses the 'GetDestGrpsRqstType' operation to tally the last provisioned record for destination group DEST_GRP_SSP2_1.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;spppQueryRequest xmlns="urn:ietf:params:xml:ns:sppp:base:1"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"&gt;
  &lt;rqst xmlns:ns1="urn:ietf:params:xml:ns:sppp:base:1"
    xsi:type="ns1:GetDestGrpsRqstType"&gt;
    &lt;objKey&gt;
      &lt;rantId&gt;iana-en:222&lt;/rantId&gt;
      &lt;name&gt;DEST_GRP_SSP2_1&lt;/name&gt;
    &lt;/objKey&gt;
  &lt;/rqst&gt;
&lt;/spppQueryRequest&gt;

</pre></div><p>

        
</p>
<p>Registry completes the request successfully and returns a favorable response.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;spppQueryResponse xmlns="urn:ietf:params:xml:ns:sppp:base:1"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"&gt;
  &lt;overallResult&gt;
    &lt;code&gt;1000&lt;/code&gt;
    &lt;msg&gt;success&lt;/msg&gt;
  &lt;/overallResult&gt;
  &lt;resultSet xmlns:ns1="urn:ietf:params:xml:ns:sppp:base:1"
    xsi:type="ns1:DestGrpType"&gt;
    &lt;rantId&gt;iana-en:222&lt;/rantId&gt;
    &lt;rarId&gt;iana-en:222&lt;/rarId&gt;
    &lt;dgName&gt;DEST_GRP_SSP2_1&lt;/dgName&gt;
  &lt;/resultSet&gt;
&lt;/spppQueryResponse&gt;

</pre></div><p>

        
</p>
<a name="add_pub_id"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.14"></a><h3>7.14.&nbsp;
Get Public Identity</h3>

<p>SSP2 obtains the last provisioned record associated with a given TN.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;spppQueryRequest xmlns="urn:ietf:params:xml:ns:sppp:base:1"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"&gt;
  &lt;rqst xmlns:ns1="urn:ietf:params:xml:ns:sppp:base:1"
    xsi:type="ns1:GetPubIdsRqstType"&gt;
    &lt;pi xmlns:ns1="urn:ietf:params:xml:ns:sppp:base:1"
      xsi:type="ns1:TNType"&gt;
      &lt;rantId&gt;iana-en:222&lt;/rantId&gt;
      &lt;rarId&gt;iana-en:222&lt;/rarId&gt;
      &lt;tn&gt;+12025556666&lt;/tn&gt;
    &lt;/pi&gt;
  &lt;/rqst&gt;
&lt;/spppQueryRequest&gt;

</pre></div><p>

        
</p>
<p>Registry completes the request successfully and returns a favorable response.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;spppQueryResponse xmlns="urn:ietf:params:xml:ns:sppp:base:1"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"&gt;
  &lt;overallResult&gt;
    &lt;code&gt;1000&lt;/code&gt;
    &lt;msg&gt;success&lt;/msg&gt;
  &lt;/overallResult&gt;
  &lt;resultSet xmlns:ns1="urn:ietf:params:xml:ns:sppp:base:1"
    xsi:type="ns1:TNType"&gt;
    &lt;rantId&gt;iana-en:222&lt;/rantId&gt;
    &lt;rarId&gt;iana-en:222&lt;/rarId&gt;
    &lt;ns1:dgName&gt;DEST_GRP_1&lt;/ns1:dgName&gt;
    &lt;tn&gt;+12025556666&lt;/tn&gt;
    &lt;ns1:corInfo&gt;
      &lt;ns1:corClaim&gt;true&lt;/ns1:corClaim&gt;
      &lt;ns1:cor&gt;true&lt;/ns1:cor&gt;
      &lt;ns1:corDateTime&gt;2010-05-30T09:30:10Z&lt;/ns1:corDateTime&gt;
    &lt;/ns1:corInfo&gt;
  &lt;/resultSet&gt;
&lt;/spppQueryResponse&gt;

</pre></div><p>

        
</p>
<a name="get_rte_grp_request"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.15"></a><h3>7.15.&nbsp;
Get Route Group Request</h3>

<p>SSP2 obtains the last provisioned record for the route group RTE_GRP_SSP2_1.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;spppQueryRequest xmlns="urn:ietf:params:xml:ns:sppp:base:1"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"&gt;
  &lt;rqst xmlns:ns1="urn:ietf:params:xml:ns:sppp:base:1"
    xsi:type="ns1:GetRteGrpsRqstType"&gt;
    &lt;objKey&gt;
      &lt;rantId&gt;iana-en:222&lt;/rantId&gt;
      &lt;name&gt;RTE_GRP_SSP2_1&lt;/name&gt;
    &lt;/objKey&gt;
  &lt;/rqst&gt;
&lt;/spppQueryRequest&gt;

</pre></div><p>

        
</p>
<p>Registry completes the request successfully and returns a favorable response.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;spppQueryResponse xmlns="urn:ietf:params:xml:ns:sppp:base:1"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"&gt;
  &lt;overallResult&gt;
    &lt;code&gt;1000&lt;/code&gt;
    &lt;msg&gt;success&lt;/msg&gt;
  &lt;/overallResult&gt;
  &lt;resultSet xmlns:ns1="urn:ietf:params:xml:ns:sppp:base:1"
    xsi:type="ns1:RteGrpType"&gt;
    &lt;rantId&gt;iana-en:222&lt;/rantId&gt;
    &lt;rarId&gt;iana-en:222&lt;/rarId&gt;
    &lt;rteGrpName&gt;RTE_GRP_SSP2_1&lt;/rteGrpName&gt;
    &lt;ns1:rteRecRef&gt;
      &lt;ns1:rteRec&gt;
        &lt;ns1:rantId&gt;iana-en:222&lt;/ns1:rantId&gt;
        &lt;ns1:name&gt;RTE_SSP2_SBE2&lt;/ns1:name&gt;
      &lt;/ns1:rteRec&gt;
      &lt;ns1:priority&gt;100&lt;/ns1:priority&gt;
    &lt;/ns1:rteRecRef&gt;
    &lt;ns1:rteRecRef&gt;
      &lt;ns1:rteRec&gt;
        &lt;ns1:rantId&gt;iana-en:222&lt;/ns1:rantId&gt;
        &lt;ns1:name&gt;RTE_SSP2_SBE4&lt;/ns1:name&gt;
      &lt;/ns1:rteRec&gt;
      &lt;ns1:priority&gt;101&lt;/ns1:priority&gt;
    &lt;/ns1:rteRecRef&gt;
    &lt;dgName&gt;DEST_GRP_SSP2_1&lt;/dgName&gt;
    &lt;isInSvc&gt;true&lt;/isInSvc&gt;
    &lt;ns1:priority&gt;10&lt;/ns1:priority&gt;
  &lt;/resultSet&gt;
&lt;/spppQueryResponse&gt;

</pre></div><p>

        
</p>
<a name="get_rte_grp_offers_rqst"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.16"></a><h3>7.16.&nbsp;
Get Route Group Offers Request</h3>

<p>SSP2 choses to fetch the last provisioned route group sharing offer to the &lt;peeringOrg&gt; SSP1.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;spppQueryRequest xmlns="urn:ietf:params:xml:ns:sppp:base:1"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"&gt;
  &lt;rqst xmlns:ns1="urn:ietf:params:xml:ns:sppp:base:1"
    xsi:type="ns1:GetRteGrpOffersRqstType"&gt;
    &lt;ns1:offeredToPeers&gt;true&lt;/ns1:offeredToPeers&gt;
    &lt;ns1:peeringOrg&gt;ssp1&lt;/ns1:peeringOrg&gt;
  &lt;/rqst&gt;
&lt;/spppQueryRequest&gt;

</pre></div><p>

        
</p>
<p>Registry completes the request successfully and returns a favorable response.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;spppQueryResponse xmlns="urn:ietf:params:xml:ns:sppp:base:1"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"&gt;
  &lt;overallResult&gt;
    &lt;code&gt;1000&lt;/code&gt;
    &lt;msg&gt;success&lt;/msg&gt;
  &lt;/overallResult&gt;
  &lt;resultSet xmlns:ns1="urn:ietf:params:xml:ns:sppp:base:1"
    xsi:type="ns1:RteGrpOfferType"&gt;
    &lt;rantId&gt;iana-en:222&lt;/rantId&gt;
    &lt;rarId&gt;iana-en:222&lt;/rarId&gt;
    &lt;rteGrpOfferKey&gt;
      &lt;rteGrpKey&gt;
        &lt;rantId&gt;iana-en:222&lt;/rantId&gt;
        &lt;name&gt;RTE_GRP_SSP2_1&lt;/name&gt;
      &lt;/rteGrpKey&gt;
      &lt;offeredTo&gt;iana-en:111&lt;/offeredTo&gt;
    &lt;/rteGrpOfferKey&gt;
    &lt;status&gt;offered&lt;/status&gt;
    &lt;offerDateTime&gt;2006-05-04T18:13:51.0Z&lt;/offerDateTime&gt;
  &lt;/resultSet&gt;
&lt;/spppQueryResponse&gt;

</pre></div><p>

        
</p>
<a name="get_egress_rte"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.17"></a><h3>7.17.&nbsp;
Get Egree Route</h3>

<p>SSP1 wants to verify the last provisioned record for the egress route called EGR_RTE_01.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;spppQueryRequest xmlns="urn:ietf:params:xml:ns:sppp:base:1"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"&gt;
  &lt;rqst xmlns:ns1="urn:ietf:params:xml:ns:sppp:base:1"
    xsi:type="ns1:GetEgrRtesRqstType"&gt;
    &lt;ns1:objKey&gt;
      &lt;rantId&gt;iana-en:111&lt;/rantId&gt;
      &lt;name&gt;EGR_RTE_01&lt;/name&gt;
    &lt;/ns1:objKey&gt;
  &lt;/rqst&gt;
&lt;/spppQueryRequest&gt;

</pre></div><p>

        
</p>
<p>Registry completes the request successfully and returns a favorable response.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;spppQueryResponse xmlns="urn:ietf:params:xml:ns:sppp:base:1"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"&gt;
  &lt;overallResult&gt;
    &lt;code&gt;1000&lt;/code&gt;
    &lt;msg&gt;success&lt;/msg&gt;
  &lt;/overallResult&gt;
  &lt;resultSet xmlns:ns1="urn:ietf:params:xml:ns:sppp:base:1"
    xsi:type="ns1:EgrRteType"&gt;
    &lt;rantId&gt;iana-en:111&lt;/rantId&gt;
    &lt;rarId&gt;iana-en:111&lt;/rarId&gt;
    &lt;egrRteName&gt;EGR_RTE_01&lt;/egrRteName&gt;
    &lt;pref&gt;50&lt;/pref&gt;
    &lt;svcs&gt;E2U+sip&lt;/svcs&gt;
    &lt;regxRewriteRule&gt;
      &lt;ere&gt;^(.*)$&lt;/ere&gt;
      &lt;repl&gt;sip:\1@sbe1.ssp1.example.com&lt;/repl&gt;
    &lt;/regxRewriteRule&gt;
    &lt;ingressRte&gt;
      &lt;rantId&gt;iana-en:222&lt;/rantId&gt;
      &lt;name&gt;RTE_GRP_SSP2_1&lt;/name&gt;
    &lt;/ingressRte&gt;
  &lt;/resultSet&gt;
&lt;/spppQueryResponse&gt;

</pre></div><p>

        
</p>
<a name="del_dest_grp"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.18"></a><h3>7.18.&nbsp;
Delete Destination Group</h3>

<p>SSP2 initiates a request to delete the destination group DEST_GRP_SSP2_1.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;spppUpdateRequest xmlns="urn:ietf:params:xml:ns:sppp:base:1"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"&gt;
  &lt;rqst xmlns:ns1="urn:ietf:params:xml:ns:sppp:base:1"
    xsi:type="ns1:DelDestGrpRqstType"&gt;
    &lt;objKey&gt;
      &lt;rantId&gt;iana-en:222&lt;/rantId&gt;
      &lt;name&gt;DEST_GRP_SSP2_1&lt;/name&gt;
    &lt;/objKey&gt;
  &lt;/rqst&gt;
&lt;/spppUpdateRequest&gt;

</pre></div><p>

        
</p>
<p>Registry completes the request successfully and returns a favorable response.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;spppUpdateResponse xmlns="urn:ietf:params:xml:ns:sppp:base:1"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"&gt;
  &lt;serverTransId&gt;txid-982543123&lt;/serverTransId&gt;
  &lt;overallResult&gt;
    &lt;code&gt;1000&lt;/code&gt;
    &lt;msg&gt;Success&lt;/msg&gt;
  &lt;/overallResult&gt;
&lt;/spppUpdateResponse&gt;

</pre></div><p>

        
</p>
<a name="del_pub_id"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.19"></a><h3>7.19.&nbsp;
Delete Public Identity</h3>

<p>SSP2 choses to de-activate the TN and remove it from the Registry.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;spppUpdateRequest xmlns="urn:ietf:params:xml:ns:sppp:base:1"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"&gt;
  &lt;rqst xmlns:ns1="urn:ietf:params:xml:ns:sppp:base:1"
    xsi:type="ns1:DelPubIdRqstType"&gt;
    &lt;pi xmlns:ns1="urn:ietf:params:xml:ns:sppp:base:1"
      xsi:type="ns1:TNType"&gt;
      &lt;rantId&gt;iana-en:222&lt;/rantId&gt;
      &lt;rarId&gt;iana-en:222&lt;/rarId&gt;
      &lt;tn&gt;+12025556666&lt;/tn&gt;
    &lt;/pi&gt;
  &lt;/rqst&gt;
&lt;/spppUpdateRequest&gt;

</pre></div><p>

        
</p>
<p>Registry completes the request successfully and returns a favorable response.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;spppUpdateResponse xmlns="urn:ietf:params:xml:ns:sppp:base:1"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"&gt;
  &lt;serverTransId&gt;txid-98298273123&lt;/serverTransId&gt;
  &lt;overallResult&gt;
    &lt;code&gt;1000&lt;/code&gt;
    &lt;msg&gt;success&lt;/msg&gt;
  &lt;/overallResult&gt;
&lt;/spppUpdateResponse&gt;

</pre></div><p>

        
</p>
<a name="del_rte_grp_rqst"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.20"></a><h3>7.20.&nbsp;
Delete Route Group Request</h3>

<p>SSP2 removes the route group called RTE_GRP_SSP2_1.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;spppUpdateRequest xmlns="urn:ietf:params:xml:ns:sppp:base:1"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"&gt;
  &lt;rqst xmlns:ns1="urn:ietf:params:xml:ns:sppp:base:1"
    xsi:type="ns1:DelRteGrpRqstType"&gt;
    &lt;objKey&gt;
      &lt;rantId&gt;iana-en:222&lt;/rantId&gt;
      &lt;name&gt;RTE_GRP_SSP2_1&lt;/name&gt;
    &lt;/objKey&gt;
  &lt;/rqst&gt;
&lt;/spppUpdateRequest&gt;

</pre></div><p>

        
</p>
<p>Registry completes the request successfully and returns a favorable response.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;spppUpdateResponse xmlns="urn:ietf:params:xml:ns:sppp:base:1"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"&gt;
  &lt;serverTransId&gt;txid-982543123&lt;/serverTransId&gt;
  &lt;overallResult&gt;
    &lt;code&gt;1000&lt;/code&gt;
    &lt;msg&gt;msg&lt;/msg&gt;
  &lt;/overallResult&gt;
&lt;/spppUpdateResponse&gt;

</pre></div><p>

        
</p>
<a name="del_rte_grp_offers_rqst"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.21"></a><h3>7.21.&nbsp;
Delete Route Group Offers Request</h3>

<p>SSP2 no longer wants to share route group RTE_GRP_SSP2_1 with SSP1.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;spppUpdateRequest xmlns="urn:ietf:params:xml:ns:sppp:base:1"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"&gt;
  &lt;rqst xmlns:ns1="urn:ietf:params:xml:ns:sppp:base:1"
    xsi:type="ns1:DelRteGrpOfferRqstType"&gt;
    &lt;rteGrpOfferKey&gt;
      &lt;rteGrpKey&gt;
        &lt;rantId&gt;iana-en:222&lt;/rantId&gt;
        &lt;name&gt;RTE_GRP_SSP2_1&lt;/name&gt;
      &lt;/rteGrpKey&gt;
      &lt;offeredTo&gt;iana-en:111&lt;/offeredTo&gt;
    &lt;/rteGrpOfferKey&gt;
  &lt;/rqst&gt;
&lt;/spppUpdateRequest&gt;

</pre></div><p>

        
</p>
<p>Registry completes the request successfully and returns a favorable response. Restoring this resource sharing will require a new route group offer from SSP2 to SSP1 followed by a successful route group accept request from SSP1.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;spppUpdateResponse xmlns="urn:ietf:params:xml:ns:sppp:base:1"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"&gt;
  &lt;serverTransId&gt;txid-982543123&lt;/serverTransId&gt;
  &lt;overallResult&gt;
    &lt;code&gt;1000&lt;/code&gt;
    &lt;msg&gt;Success&lt;/msg&gt;
  &lt;/overallResult&gt;
&lt;/spppUpdateResponse&gt;

</pre></div><p>

        
</p>
<a name="del_egress_rte"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.22"></a><h3>7.22.&nbsp;
Delete Egress Route</h3>

<p>SSP1 decides to remove the egress route with the label EGR_RTE_01.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;spppUpdateRequest xmlns="urn:ietf:params:xml:ns:sppp:base:1"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"&gt;
  &lt;rqst xmlns:ns1="urn:ietf:params:xml:ns:sppp:base:1"
    xsi:type="ns1:DelEgrRteRqstType"&gt;
    &lt;objKey&gt;
      &lt;rantId&gt;iana-en:111&lt;/rantId&gt;
      &lt;name&gt;EGR_RTE_01&lt;/name&gt;
    &lt;/objKey&gt;
  &lt;/rqst&gt;
&lt;/spppUpdateRequest&gt;

</pre></div><p>

        
</p>
<p>Registry completes the request successfully and returns a favorable response.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;spppUpdateResponse xmlns="urn:ietf:params:xml:ns:sppp:base:1"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="urn:ietf:params:xml:ns:sppp:base:1 sppp.xsd"&gt;
  &lt;serverTransId&gt;txid-982543123&lt;/serverTransId&gt;
  &lt;overallResult&gt;
    &lt;code&gt;1000&lt;/code&gt;
    &lt;msg&gt;Success&lt;/msg&gt;
  &lt;/overallResult&gt;
&lt;/spppUpdateResponse&gt;

</pre></div><p>

        
</p>
<a name="xmlconsiderations"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
XML Considerations</h3>

<p> XML serves as the encoding format for SPPP, allowing complex
        hierarchical data to be expressed in a text format that can be
        read, saved, and manipulated with both traditional text tools
        and tools specific to XML. <br />
<br />
 XML is
        case sensitive. Unless stated otherwise, XML specifications
        and examples provided in this document MUST be interpreted in
        the character case presented to develop a conforming
        implementation. <br />
<br />
 This section
        discusses a small number of XML-related considerations
        pertaining to SPPP. 
</p>
<a name="namespaces"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.1"></a><h3>8.1.&nbsp;
Namespaces</h3>

<p> All SPPP protocol elements are defined in the namespaces 
        in te IANA Considerations section and in the Formal Protocol 
        Specification section of this document.
        
</p>
<a name="versioning"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.2"></a><h3>8.2.&nbsp;
Versioning and Character Encoding</h3>

<p> All XML instances SHOULD begin with an
           &lt;?xml?&gt;  declaration to identify the version of
          XML that is being used, optionally identify use of the
          character encoding used, and optionally provide a hint to an
          XML parser that an external schema file is needed to
          validate the XML instance. <br />
<br />

          Conformant XML parsers recognize both UTF-8 (defined in
            <a class='info' href='#RFC3629'>[RFC3629]<span> (</span><span class='info'>Yergeau, F., &ldquo;UTF-8, a transformation format of ISO 10646,&rdquo; November&nbsp;2003.</span><span>)</span></a>) and UTF-16 (defined in <a class='info' href='#RFC2781'>[RFC2781]<span> (</span><span class='info'>Hoffman, P. and F. Yergeau, &ldquo;UTF-16, an encoding of ISO 10646,&rdquo; February&nbsp;2000.</span><span>)</span></a>); per <a class='info' href='#RFC2277'>[RFC2277]<span> (</span><span class='info'>Alvestrand, H., &ldquo;IETF Policy on Character Sets and Languages,&rdquo; January&nbsp;1998.</span><span>)</span></a> UTF-8 is
          the RECOMMENDED character encoding for use with SPPP. 
</p>
<p> Character encodings other than UTF-8 and UTF-16 are
          allowed by XML. UTF-8 is the default encoding assumed by XML
          in the absence of an "encoding" attribute or a byte order
          mark (BOM); thus, the "encoding" attribute in the XML
          declaration is OPTIONAL if UTF-8 encoding is used. SPPP
          clients and servers MUST accept a UTF-8 BOM if present,
          though emitting a UTF-8 BOM is NOT RECOMMENDED. 
</p>
<p> Example XML declarations: <br />
<br />

           &lt;?xml?&gt; version="1.0" encoding="UTF-8" standalone="no"?&gt;
        
</p>
<a name="securityconsiderations"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Security Considerations</h3>

<p> The transport protocol section contains some security
        properties that the transport protocol must provide so that
        authenticated endpoints can exchange data confidentially and
        with integrity protection. 
</p>
<p> More details will be provided in a future revision of this
        document. 
</p>
<a name="IANA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
IANA Considerations</h3>

<p> This document uses URNs to describe XML namespaces and XML
        schemas conforming to a registry mechanism described in <a class='info' href='#RFC3688'>[RFC3688]<span> (</span><span class='info'>Mealling, M., &ldquo;The IETF XML Registry,&rdquo; January&nbsp;2004.</span><span>)</span></a>. 
</p>
<p> Two URI assignments are requested. <br />
<br />

        Registration request for the SPPP XML namespace: <br />
 urn:ietf:params:xml:ns:sppp:base:1 <br />
 Registrant Contact: IESG <br />
 XML: None. Namespace URIs do not represent
        an XML specification. 
</p>
<p> Registration request for the XML schema: <br />
 URI: urn:ietf:params:xml:schema:sppp:1
          <br />
 Registrant Contact: IESG <br />
 XML: See the "Formal Specification" section
        of this document (<a class='info' href='#formalspecification'>Section&nbsp;11<span> (</span><span class='info'>Formal Specification</span><span>)</span></a>). 
</p>
<p>
      	IANA is requested to create a new SPPP registry for Organization Identifiers that will indicate valid strings to be used for well-known enterprise namespaces.
      	<br />

      	This document makes the following assignments for the OrgIdType namespaces:
	  
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

      Namespace                    OrgIdType namespace string
      ----                         ----------------------------
      IANA Enterprise Numbers       iana-en

</pre></div><p>


      
</p>
<a name="formalspecification"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11"></a><h3>11.&nbsp;
Formal Specification</h3>

<p> This section provides the draft XML Schema Definition for
        the SPPP protocol. 
</p>
<p>
        </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;schema xmlns:spppb="urn:ietf:params:xml:ns:sppp:base:1"
  xmlns="http://www.w3.org/2001/XMLSchema"
  targetNamespace="urn:ietf:params:xml:ns:sppp:base:1"
  elementFormDefault="qualified" xml:lang="EN"&gt;
  &lt;annotation&gt;
    &lt;documentation&gt;
    ------------------ Object Type Definitions --------------
    &lt;/documentation&gt;
  &lt;/annotation&gt;
  &lt;complexType name="RteGrpType"&gt;
    &lt;complexContent&gt;
     &lt;extension base="spppb:BasicObjType"&gt;
       &lt;sequence&gt;
         &lt;element name="rteGrpName" type="spppb:ObjNameType"/&gt;
         &lt;element name="rteRecRef" type="spppb:RteRecRefType"
           minOccurs="0" maxOccurs="unbounded"/&gt;
         &lt;element name="dgName" type="spppb:ObjNameType" minOccurs="0"
           maxOccurs="unbounded"/&gt;
         &lt;element name="peeringOrg" type="spppb:OrgIdType" minOccurs="0"
           maxOccurs="unbounded"/&gt;
         &lt;element name="sourceIdent" type="spppb:SourceIdentType"
           minOccurs="0" maxOccurs="unbounded"/&gt;
         &lt;element name="isInSvc" type="boolean"/&gt;
         &lt;element name="priority" type="unsignedShort"/&gt;
         &lt;element name="ext" type="spppb:ExtAnyType" minOccurs="0"/&gt;
       &lt;/sequence&gt;
     &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;
  &lt;complexType name="DestGrpType"&gt;
    &lt;complexContent&gt;
     &lt;extension base="spppb:BasicObjType"&gt;
      &lt;sequence&gt;
         &lt;element name="dgName" type="spppb:ObjNameType"/&gt;
      &lt;/sequence&gt;
     &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;
  &lt;complexType name="PubIdType" abstract="true"&gt;
    &lt;complexContent&gt;
     &lt;extension base="spppb:BasicObjType"&gt;
       &lt;sequence&gt;
         &lt;element name="dgName" type="spppb:ObjNameType" minOccurs="0"/&gt;
       &lt;/sequence&gt;
     &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;
  &lt;complexType name="EmailType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:PubIdType"&gt;
        &lt;sequence&gt;
          &lt;element name="email" type="string"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;
  &lt;complexType name="TNType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:PubIdType"&gt;
        &lt;sequence&gt;
          &lt;element name="tn" type="string"/&gt;
          &lt;element name="rteRecRef" type="spppb:RteRecRefType"
             minOccurs="0" maxOccurs="unbounded"/&gt;
          &lt;element name="corInfo" type="spppb:CORInfoType"
             minOccurs="0"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;
  &lt;complexType name="TNRType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:PubIdType"&gt;
        &lt;sequence&gt;
          &lt;element name="startTn" type="string"/&gt;
          &lt;element name="endTn" type="string"/&gt;
          &lt;element name="corInfo" type="spppb:CORInfoType"
              minOccurs="0"/&gt;
        &lt;/sequence&gt;
        &lt;attribute name="prefix" type="boolean" default="false"&gt;
           &lt;/attribute&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;
  &lt;complexType name="TNPType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:PubIdType"&gt;
        &lt;sequence&gt;
          &lt;element name="tnPrefix" type="string"/&gt;
          &lt;element name="corInfo" type="spppb:CORInfoType"
            minOccurs="0"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;
  &lt;complexType name="RNType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:PubIdType"&gt;
        &lt;sequence&gt;
          &lt;element name="rn" type="string" default="true"/&gt;
          &lt;element name="corInfo" type="spppb:CORInfoType"
             minOccurs="0"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;
  &lt;complexType name="RteRecType" abstract="true"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:BasicObjType"&gt;
         &lt;sequence&gt;
           &lt;element name="rrName" type="spppb:ObjNameType"/&gt;
         &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;
  &lt;complexType name="NAPTRType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:RteRecType"&gt;
        &lt;sequence&gt;
          &lt;element name="order" type="unsignedShort"/&gt;
          &lt;element name="flags" type="string" minOccurs="0"/&gt;
          &lt;element name="svcs" type="string"/&gt;
          &lt;element name="regx" type="spppb:RegexParamType"
            minOccurs="0"/&gt;
          &lt;element name="repl" type="string" minOccurs="0"/&gt;
          &lt;element name="ttl" type="positiveInteger" minOccurs="0"/&gt;
          &lt;element name="ext" type="spppb:ExtAnyType" minOccurs="0"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;
  &lt;complexType name="NSType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:RteRecType"&gt;
        &lt;sequence&gt;
          &lt;element name="hostName" type="string"/&gt;
          &lt;element name="ipAddr" type="spppb:IPAddrType" minOccurs="0"
            maxOccurs="unbounded"/&gt;
          &lt;element name="ttl" type="positiveInteger" minOccurs="0"/&gt;
          &lt;element name="ext" type="spppb:ExtAnyType" minOccurs="0"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;
  &lt;complexType name="URIType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:RteRecType"&gt;
        &lt;sequence&gt;
          &lt;element name="ere" type="string" default="^(.*)$"/&gt;
          &lt;element name="uri" type="string"/&gt;
          &lt;element name="ext" type="spppb:ExtAnyType" minOccurs="0"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;
  &lt;complexType name="RteGrpOfferType"&gt;
   &lt;complexContent&gt;
     &lt;extension base="spppb:BasicObjType"&gt;
       &lt;sequence&gt;
         &lt;element name="rteGrpOfferKey" type="spppb:RteGrpOfferKeyType"
            /&gt;
         &lt;element name="status" type="spppb:RteGrpOfferStatusType"/&gt;
         &lt;element name="offerDateTime" type="dateTime"/&gt;
         &lt;element name="acceptDateTime" type="dateTime" minOccurs="0"/&gt;
         &lt;element name="ext" type="spppb:ExtAnyType" minOccurs="0"/&gt;
       &lt;/sequence&gt;
     &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;
  &lt;complexType name="EgrRteType"&gt;
    &lt;complexContent&gt;
     &lt;extension base="spppb:BasicObjType"&gt;
       &lt;sequence&gt;
         &lt;element name="egrRteName" type="spppb:ObjNameType"/&gt;
         &lt;element name="pref" type="unsignedShort"/&gt;
         &lt;element name="regxRewriteRule" type="spppb:RegexParamType"/&gt;
         &lt;element name="ingrRteRec" type="spppb:ObjKeyType"
            minOccurs="0" maxOccurs="unbounded"/&gt;
         &lt;element name="ext" type="spppb:ExtAnyType" minOccurs="0"/&gt;
       &lt;/sequence&gt;
     &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;
  &lt;annotation&gt;
    &lt;documentation&gt; ------------------ Abstract Object and Element
      Type Definitions -------------- &lt;/documentation&gt;
  &lt;/annotation&gt;
  &lt;complexType name="BasicObjType" abstract="true"&gt;
    &lt;sequence&gt;
      &lt;element name="rantId" type="spppb:OrgIdType"/&gt;
      &lt;element name="rarId" type="spppb:OrgIdType"/&gt;
      &lt;element name="crtDate" type="dateTime" minOccurs="0"/&gt;
      &lt;element name="modDate" type="dateTime" minOccurs="0"/&gt;
      &lt;element name="ext" type="spppb:ExtAnyType" minOccurs="0"/&gt;
    &lt;/sequence&gt;
  &lt;/complexType&gt;
  &lt;complexType name="RegexParamType"&gt;
    &lt;sequence&gt;
      &lt;element name="ere" type="string" default="^(.*)$"/&gt;
      &lt;element name="repl" type="string"/&gt;
    &lt;/sequence&gt;
  &lt;/complexType&gt;
  &lt;simpleType name="OrgIdType"&gt;
    &lt;restriction base="string"/&gt;
  &lt;/simpleType&gt;
  &lt;simpleType name="ObjNameType"&gt;
    &lt;restriction base="string"/&gt;
  &lt;/simpleType&gt;
  &lt;simpleType name="TransIdType"&gt;
    &lt;restriction base="string"/&gt;
  &lt;/simpleType&gt;
  &lt;simpleType name="MinorVerType"&gt;
    &lt;restriction base="unsignedLong"/&gt;
  &lt;/simpleType&gt;
  &lt;complexType name="ObjKeyType"&gt;
    &lt;sequence&gt;
      &lt;element name="rantId" type="spppb:OrgIdType"/&gt;
      &lt;element name="name" type="spppb:ObjNameType"/&gt;
    &lt;/sequence&gt;
  &lt;/complexType&gt;
  &lt;complexType name="IPAddrType"&gt;
    &lt;sequence&gt;
      &lt;element name="addr" type="string"/&gt;
      &lt;element name="type" type="spppb:IPType"/&gt;
      &lt;element name="ext" type="spppb:ExtAnyType" minOccurs="0"/&gt;
    &lt;/sequence&gt;
  &lt;/complexType&gt;
  &lt;simpleType name="IPType"&gt;
    &lt;restriction base="token"&gt;
      &lt;enumeration value="IPv4"/&gt;
      &lt;enumeration value="IPv6"/&gt;
    &lt;/restriction&gt;
  &lt;/simpleType&gt;
  &lt;complexType name="RteRecRefType"&gt;
    &lt;sequence&gt;
      &lt;element name="rteRec" type="spppb:ObjKeyType"/&gt;
      &lt;element name="priority" type="unsignedShort"/&gt;
      &lt;element name="ext" type="spppb:ExtAnyType" minOccurs="0"/&gt;
    &lt;/sequence&gt;
  &lt;/complexType&gt;
  &lt;complexType name="SourceIdentType"&gt;
    &lt;sequence&gt;
      &lt;element name="sourceIdentLabel" type="string"/&gt;
      &lt;element name="sourceIdentScheme"
        type="spppb:SourceIdentSchemeType"/&gt;
      &lt;element name="ext" type="spppb:ExtAnyType" minOccurs="0"/&gt;
    &lt;/sequence&gt;
  &lt;/complexType&gt;
  &lt;simpleType name="SourceIdentSchemeType"&gt;
    &lt;restriction base="token"&gt;
      &lt;enumeration value="uri"/&gt;
      &lt;enumeration value="ip"/&gt;
      &lt;enumeration value="rootDomain"/&gt;
    &lt;/restriction&gt;
  &lt;/simpleType&gt;
  &lt;complexType name="CORInfoType"&gt;
    &lt;sequence&gt;
      &lt;element name="corClaim" type="boolean" default="true"/&gt;
      &lt;element name="cor" type="boolean" default="false"
         minOccurs="0"/&gt;
      &lt;element name="corDateTime" type="dateTime" minOccurs="0"/&gt;
    &lt;/sequence&gt;
  &lt;/complexType&gt;
  &lt;complexType name="SvcMenuType"&gt;
    &lt;sequence&gt;
      &lt;element name="serverStatus" type="spppb:ServerStatusType"/&gt;
      &lt;element name="majMinVersion" type="string"
        maxOccurs="unbounded"/&gt;
      &lt;element name="objURI" type="anyURI" maxOccurs="unbounded"/&gt;
      &lt;element name="extURI" type="anyURI" minOccurs="0"
        maxOccurs="unbounded"/&gt;
    &lt;/sequence&gt;
  &lt;/complexType&gt;
  &lt;simpleType name="ServerStatusType"&gt;
    &lt;restriction base="token"&gt;
      &lt;enumeration value="inService"/&gt;
      &lt;enumeration value="outOfService"/&gt;
    &lt;/restriction&gt;
  &lt;/simpleType&gt;
  &lt;complexType name="RteGrpOfferKeyType"&gt;
    &lt;sequence&gt;
      &lt;element name="rteGrpKey" type="spppb:ObjKeyType"/&gt;
      &lt;element name="offeredTo" type="spppb:OrgIdType"/&gt;
    &lt;/sequence&gt;
  &lt;/complexType&gt;
  &lt;simpleType name="RteGrpOfferStatusType"&gt;
    &lt;restriction base="token"&gt;
      &lt;enumeration value="offered"/&gt;
      &lt;enumeration value="accepted"/&gt;
    &lt;/restriction&gt;
  &lt;/simpleType&gt;
  &lt;complexType name="ExtAnyType"&gt;
    &lt;sequence&gt;
      &lt;any namespace="##other" maxOccurs="unbounded"/&gt;
    &lt;/sequence&gt;
  &lt;/complexType&gt;
  &lt;annotation&gt;
    &lt;documentation&gt; -------------- Operation Request and Response
      Object Type Definitions ------------ &lt;/documentation&gt;
  &lt;/annotation&gt;
  &lt;complexType name="ResultCodeType"&gt;
    &lt;sequence&gt;
       &lt;element name="code" type="int"/&gt;
       &lt;element name="msg" type="string"/&gt;
    &lt;/sequence&gt;
  &lt;/complexType&gt;
  &lt;complexType name="RqstObjResultCodeType"&gt;
    &lt;complexContent&gt;
       &lt;extension base="spppb:ResultCodeType"&gt;
          &lt;sequence&gt;
             &lt;element name="rqstObj" type="spppb:BasicRqstType"/&gt;
          &lt;/sequence&gt;
       &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;

  &lt;complexType name="BasicRqstType" abstract="true"&gt;
    &lt;sequence&gt;
      &lt;element name="ext" type="spppb:ExtAnyType" minOccurs="0"/&gt;
    &lt;/sequence&gt;
  &lt;/complexType&gt;
  &lt;complexType name="BasicQueryRqstType" abstract="true"&gt;
    &lt;sequence&gt;
      &lt;element name="ext" type="spppb:ExtAnyType" minOccurs="0"/&gt;
    &lt;/sequence&gt;
  &lt;/complexType&gt;

  &lt;complexType name="AddRteGrpRqstType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:BasicRqstType"&gt;
        &lt;sequence&gt;
          &lt;element name="rteGrp" type="spppb:RteGrpType"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;
  &lt;complexType name="DelRteGrpRqstType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:BasicRqstType"&gt;
        &lt;sequence&gt;
          &lt;element name="objKey" type="spppb:ObjKeyType"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;
  &lt;complexType name="GetRteGrpsRqstType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:BasicQueryRqstType"&gt;
        &lt;sequence&gt;
          &lt;element name="objKey" type="spppb:ObjKeyType"
            minOccurs="0" maxOccurs="unbounded"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;
  &lt;complexType name="AddRteRecRqstType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:BasicRqstType"&gt;
        &lt;sequence&gt;
          &lt;element name="rteRec" type="spppb:RteRecType"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;
  &lt;complexType name="DelRteRecRqstType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:BasicRqstType"&gt;
        &lt;sequence&gt;
          &lt;element name="objKey" type="spppb:ObjKeyType"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;
  &lt;complexType name="GetRteRecsRqstType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:BasicQueryRqstType"&gt;
        &lt;sequence&gt;
          &lt;element name="objKey" type="spppb:ObjKeyType"
            minOccurs="0" maxOccurs="unbounded"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;

  &lt;complexType name="AddDestGrpRqstType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:BasicRqstType"&gt;
        &lt;sequence&gt;
          &lt;element name="destGrp" type="spppb:DestGrpType"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;
  &lt;complexType name="DelDestGrpRqstType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:BasicRqstType"&gt;
        &lt;sequence&gt;
          &lt;element name="objKey" type="spppb:ObjKeyType"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;
  &lt;complexType name="GetDestGrpsRqstType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:BasicQueryRqstType"&gt;
        &lt;sequence&gt;
          &lt;element name="objKey" type="spppb:ObjKeyType"
            minOccurs="0" maxOccurs="unbounded"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;
  &lt;complexType name="AddPubIdRqstType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:BasicRqstType"&gt;
        &lt;sequence&gt;
          &lt;element name="pi" type="spppb:PubIdType"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;
  &lt;complexType name="DelPubIdRqstType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:BasicRqstType"&gt;
        &lt;sequence&gt;
          &lt;element name="pi" type="spppb:PubIdType"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;
  &lt;complexType name="GetPubIdsRqstType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:BasicQueryRqstType"&gt;
        &lt;sequence&gt;
          &lt;element name="pi" type="spppb:PubIdType" minOccurs="0"
            maxOccurs="unbounded"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;
  &lt;complexType name="AddRteGrpOfferRqstType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:BasicRqstType"&gt;
        &lt;sequence&gt;
          &lt;element name="rteGrpOffer" type="spppb:RteGrpOfferType"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;
  &lt;complexType name="DelRteGrpOfferRqstType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:BasicRqstType"&gt;
        &lt;sequence&gt;
          &lt;element name="rteGrpOfferKey"
                     type="spppb:RteGrpOfferKeyType" /&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;
  &lt;complexType name="AcceptRteGrpOfferRqstType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:BasicRqstType"&gt;
        &lt;sequence&gt;
          &lt;element name="rteGrpOfferKey"
                    type="spppb:RteGrpOfferKeyType"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;
  &lt;complexType name="RejectRteGrpOfferRqstType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:BasicRqstType"&gt;
        &lt;sequence&gt;
          &lt;element name="rteGrpOfferKey"
                    type="spppb:RteGrpOfferKeyType"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;
  &lt;complexType name="GetRteGrpOffersRqstType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:BasicQueryRqstType"&gt;
        &lt;sequence&gt;
          &lt;element name="offeredByPeers" type="boolean"
             minOccurs="0"/&gt;
          &lt;element name="offeredToPeers" type="boolean"
             minOccurs="0"/&gt;
          &lt;element name="status" type="spppb:RteGrpOfferStatusType"
            minOccurs="0"/&gt;
          &lt;element name="peeringOrg" type="spppb:OrgIdType"
            minOccurs="0" maxOccurs="unbounded"/&gt;
          &lt;element name="rteGrpOfferKey"
            type="spppb:RteGrpOfferKeyType" minOccurs="0"
            maxOccurs="unbounded"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;
  &lt;complexType name="AddEgrRteRqstType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:BasicRqstType"&gt;
        &lt;sequence&gt;
          &lt;element name="egrRte" type="spppb:EgrRteType"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;
  &lt;complexType name="DelEgrRteRqstType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:BasicRqstType"&gt;
        &lt;sequence&gt;
          &lt;element name="objKey" type="spppb:ObjKeyType"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;
  &lt;complexType name="GetEgrRtesRqstType"&gt;
    &lt;complexContent&gt;
      &lt;extension base="spppb:BasicQueryRqstType"&gt;
        &lt;sequence&gt;
          &lt;element name="objKey" type="spppb:ObjKeyType"
            minOccurs="0" maxOccurs="unbounded"/&gt;
        &lt;/sequence&gt;
      &lt;/extension&gt;
    &lt;/complexContent&gt;
  &lt;/complexType&gt;
  &lt;annotation&gt;
    &lt;documentation&gt; -------- Generic Request and Response Definitions
      --------------- &lt;/documentation&gt;
  &lt;/annotation&gt;
  &lt;element name="spppUpdateRequest"&gt;
    &lt;complexType&gt;
      &lt;sequence&gt;
        &lt;element name="clientTransId" type="spppb:TransIdType"
            minOccurs="0"/&gt;
        &lt;element name="minorVer" type="spppb:MinorVerType"
            minOccurs="0"/&gt;
        &lt;element name="rqst" type="spppb:BasicRqstType"
            maxOccurs="unbounded"/&gt;
      &lt;/sequence&gt;
    &lt;/complexType&gt;
  &lt;/element&gt;
  &lt;element name="spppUpdateResponse"&gt;
    &lt;complexType&gt;
      &lt;sequence&gt;
        &lt;element name="clientTransId" type="spppb:TransIdType"
            minOccurs="0"/&gt;
        &lt;element name="serverTransId" type="spppb:TransIdType"/&gt;
        &lt;element name="overallResult" type="spppb:ResultCodeType"/&gt;
        &lt;element name="rqstObjResult"
            type="spppb:RqstObjResultCodeType" minOccurs="0"
          maxOccurs="unbounded"/&gt;
      &lt;/sequence&gt;
    &lt;/complexType&gt;
  &lt;/element&gt;
  &lt;element name="spppQueryRequest"&gt;
    &lt;complexType&gt;
      &lt;sequence&gt;
        &lt;element name="minorVer" type="spppb:MinorVerType"
            minOccurs="0"/&gt;
        &lt;element name="rqst" type="spppb:BasicQueryRqstType"/&gt;
      &lt;/sequence&gt;
    &lt;/complexType&gt;
  &lt;/element&gt;
  &lt;element name="spppQueryResponse"&gt;
    &lt;complexType&gt;
      &lt;sequence&gt;
        &lt;element name="overallResult" type="spppb:ResultCodeType"/&gt;
        &lt;element name="resultSet" type="spppb:BasicObjType"
           minOccurs="0" maxOccurs=" unbounded"/&gt;
      &lt;/sequence&gt;
    &lt;/complexType&gt;
  &lt;/element&gt;
  &lt;element name="spppServerStatusRequest"&gt;
    &lt;complexType&gt;
      &lt;sequence&gt;
        &lt;element name="minorVer" type="spppb:MinorVerType"
           minOccurs="0"/&gt;
      &lt;/sequence&gt;
    &lt;/complexType&gt;
  &lt;/element&gt;
  &lt;element name="spppServerStatusResponse"&gt;
    &lt;complexType&gt;
      &lt;sequence&gt;
        &lt;element name="overallResult" type="spppb:ResultCodeType"/&gt;
        &lt;element name="svcMenu" type="spppb:SvcMenuType"/&gt;
      &lt;/sequence&gt;
    &lt;/complexType&gt;
  &lt;/element&gt;
&lt;/schema&gt;

</pre></div><p>


      
</p>
<a name="specificationextensibility"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12"></a><h3>12.&nbsp;
Specification Extensibility</h3>

<p> The protocol defined in this specification is extensible.
        This section explains how to extend the protocol and what
        procedures are necessary to follow in order to ensure proper
        extensions. 
</p>
<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.13"></a><h3>13.&nbsp;
Acknowledgments</h3>

<p>This document is a result of various discussions held in the DRINKS working group and within the DRINKS protocol design team, which is comprised of the following individuals, in alphabetical order: Alexander Mayrhofer, Deborah A Guyton, David Schwartz, Lisa Dusseault, Manjul Maharishi, Otmar Lendl, Richard Shockey and Sumanth Channabasappa.
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.14"></a><h3>14.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>14.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-drinks-sppp-over-soap">[I-D.ietf-drinks-sppp-over-soap]</a></td>
<td class="author-text">Cartwright, K., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-drinks-sppp-over-soap-00.txt">SPPP Over SOAP and HTTP</a>,&rdquo; draft-ietf-drinks-sppp-over-soap-00 (work in progress), June&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-drinks-sppp-over-soap-00.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2277">[RFC2277]</a></td>
<td class="author-text"><a href="mailto:Harald.T.Alvestrand@uninett.no">Alvestrand, H.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2277">IETF Policy on Character Sets and Languages</a>,&rdquo; BCP&nbsp;18, RFC&nbsp;2277, January&nbsp;1998 (<a href="http://www.rfc-editor.org/rfc/rfc2277.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2277.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2277.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3629">[RFC3629]</a></td>
<td class="author-text">Yergeau, F., &ldquo;<a href="http://tools.ietf.org/html/rfc3629">UTF-8, a transformation format of ISO 10646</a>,&rdquo; STD&nbsp;63, RFC&nbsp;3629, November&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3629.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3688">[RFC3688]</a></td>
<td class="author-text">Mealling, M., &ldquo;<a href="http://tools.ietf.org/html/rfc3688">The IETF XML Registry</a>,&rdquo; BCP&nbsp;81, RFC&nbsp;3688, January&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3688.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3986">[RFC3986]</a></td>
<td class="author-text"><a href="mailto:timbl@w3.org">Berners-Lee, T.</a>, <a href="mailto:fielding@gbiv.com">Fielding, R.</a>, and <a href="mailto:LMM@acm.org">L. Masinter</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc3986">Uniform Resource Identifier (URI): Generic Syntax</a>,&rdquo; STD&nbsp;66, RFC&nbsp;3986, January&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc3986.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc3986.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc3986.xml">XML</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>14.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-drinks-usecases-requirements">[I-D.ietf-drinks-usecases-requirements]</a></td>
<td class="author-text">Channabasappa, S., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-drinks-usecases-requirements-03.txt">DRINKS Use cases and Protocol Requirements</a>,&rdquo; draft-ietf-drinks-usecases-requirements-03 (work in progress), May&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-drinks-usecases-requirements-03.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2781">[RFC2781]</a></td>
<td class="author-text"><a href="mailto:phoffman@imc.org">Hoffman, P.</a> and <a href="mailto:fyergeau@alis.com">F. Yergeau</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2781">UTF-16, an encoding of ISO 10646</a>,&rdquo; RFC&nbsp;2781, February&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc2781.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3261">[RFC3261]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;<a href="http://tools.ietf.org/html/rfc3261">SIP: Session Initiation Protocol</a>,&rdquo; RFC&nbsp;3261, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3261.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3761">[RFC3761]</a></td>
<td class="author-text">Faltstrom, P. and M. Mealling, &ldquo;<a href="http://tools.ietf.org/html/rfc3761">The E.164 to Uniform Resource Identifiers (URI) Dynamic Delegation Discovery System (DDDS) Application (ENUM)</a>,&rdquo; RFC&nbsp;3761, April&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3761.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4725">[RFC4725]</a></td>
<td class="author-text">Mayrhofer, A. and B. Hoeneisen, &ldquo;<a href="http://tools.ietf.org/html/rfc4725">ENUM Validation Architecture</a>,&rdquo; RFC&nbsp;4725, November&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4725.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5321">[RFC5321]</a></td>
<td class="author-text">Klensin, J., &ldquo;<a href="http://tools.ietf.org/html/rfc5321">Simple Mail Transfer Protocol</a>,&rdquo; RFC&nbsp;5321, October&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5321.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5486">[RFC5486]</a></td>
<td class="author-text">Malas, D. and D. Meyer, &ldquo;<a href="http://tools.ietf.org/html/rfc5486">Session Peering for Multimedia Interconnect (SPEERMINT) Terminology</a>,&rdquo; RFC&nbsp;5486, March&nbsp;2009 (<a href="http://www.rfc-editor.org/rfc/rfc5486.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Jean-Francois Mule</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">CableLabs</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">858 Coal Creek Circle</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Louisville, CO  80027</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:jfm@cablelabs.com">jfm@cablelabs.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Kenneth Cartwright</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">TNS</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">1939 Roland Clarke Place</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Reston, VA  20191</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:kcartwright@tnsi.com">kcartwright@tnsi.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Syed Wasim Ali</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">NeuStar</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">46000 Center Oak Plaza</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Sterling, VA  20166</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:syed.ali@neustar.biz">syed.ali@neustar.biz</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Alexander Mayrhofer</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">enum.at GmbH</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Karlsplatz 1/9</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Wien,   A-1010</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Austria</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:alexander.mayrhofer@enum.at">alexander.mayrhofer@enum.at</a></td></tr>
</table>
</body></html>
