flags = IPV6_PREFER_SRC_TMP;
preferences = IPV6_PREFER_SRC_TMP;

s = socket(ai->ai_family, ...);

s = -1;
extlen = sizeof(flags);
cmsglen = CMSG_SPACE(extlen);
cmsgptr = malloc(cmsglen);
extptr = CMSG_DATA(cmsgptr);

flags = IPV6_PREFER_SRC_COA;
