 



DCLC Research Group                                               Y. Shi
INTERNET-DRAFT                                                       UCI
Intended Status: Informational                                   S. Duan
Expires: January 22, 2015                                           CATR
                                                                 L. Deng
                                                            China Mobile
                                                           July 21, 2014


  Test and Analysis on Forwarding Latency in Terms of Queuing Length 
                     draft-shi-dclc-latency-test-00


Abstract

   We test the influence of the queue length, packet size and so on to
   the forwarding latency of the typical access switch, which is meant
   to set off our efforts in studying the relationship between the
   queuing length and the transport performance of some latency-
   sensitive applications in a DC network.   

Status of this Memo

   This Internet-Draft is submitted to IETF in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as
   Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/1id-abstracts.html

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html


Copyright and License Notice

   Copyright (c) 2013 IETF Trust and the persons identified as the
   document authors. All rights reserved.

 


<Shi, et al.>             Expires Jan 22, 2015                  [Page 1]

INTERNET DRAFT            <Buffer Delay Test>               Jul 21, 2014


   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document. Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document. Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.






Table of Contents

   1  Introduction  . . . . . . . . . . . . . . . . . . . . . . . . .  3
   2  Terminology . . . . . . . . . . . . . . . . . . . . . . . . . .  3
   3  Objective of the Tests  . . . . . . . . . . . . . . . . . . . .  3
   4  Preparation of the Test Environment . . . . . . . . . . . . . .  3
   5  Test Cases  . . . . . . . . . . . . . . . . . . . . . . . . . .  4
     5.1 Test of Buffer Configuration in Switch . . . . . . . . . . .  4
     5.2 Test of Forwarding Delay in Switch . . . . . . . . . . . . .  4
   6 Result Analysis  . . . . . . . . . . . . . . . . . . . . . . . .  5
   7 Future Works . . . . . . . . . . . . . . . . . . . . . . . . . .  6
   8  Security Considerations . . . . . . . . . . . . . . . . . . . .  6
   9  IANA Considerations . . . . . . . . . . . . . . . . . . . . . .  6
   10  References . . . . . . . . . . . . . . . . . . . . . . . . . .  6
     10.1  Normative References . . . . . . . . . . . . . . . . . . .  6
   Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . . .  7

















 


<Shi, et al.>             Expires Jan 22, 2015                  [Page 2]

INTERNET DRAFT            <Buffer Delay Test>               Jul 21, 2014


1  Introduction

   To investigate the effective optimization mechanism of the congestion
   control in the internal network of the data center, we test the
   influence of the queuing length and packet size to the forwarding
   latency of an access switch. From the analysis, we try to find the
   relationship between the queuing length and the transport performance
   of some latency-sensitive application.

2  Terminology

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC2119].


3  Objective of the Tests

   As a typical interconnection network with super high bandwidth,
   simultaneous multipath and low end-to-end delay, data center network
   has been widely used in uploading from traditional applications and
   desktop virtualization to highly interconnected distributed
   applications. The uploading method can be made by providing physical
   resources to the application system, or it can be made by providing
   virtual sources(virtual machine, virtual network and virtual
   equipment, etc.) through the abstract of the physical resources which
   is done by virtualized infrastructure.

   It is suggested that the interior network of the data center still
   has problems with the delivery performance of the latency-sensitive
   application for the mismatch between end-to-end congestion control
   and the variation of delay in IP level.

   To investigate the effective optimization mechanism of the congestion
   control in the internal network of the data center, we test the
   influence of the queuing length, packet size and so on to the
   forwarding latency of the representative COTS switch, which is
   assumed to be served as a basis for finding the control mechanism for
   the latency-sensitive applications when they are doing end-to-end
   local transportation.   

4  Preparation of the Test Environment

   We use an access switch as the test instrument. The measurement
   instrument is Spirent's TestCenter C1(SPT C1).

   To simulate the condition of the congestion, we use 3 switch ports in
   real test. 2 ports(port1 and port2)sent to the third one(port3)
 


<Shi, et al.>             Expires Jan 22, 2015                  [Page 3]

INTERNET DRAFT            <Buffer Delay Test>               Jul 21, 2014


   simultaneously. The total two input flow is larger than the output
   port bandwidth.

5  Test Cases

   We tried two test cases to investigate:

   1)buffer configuration of the switch and how the buffer space is
   shared; and

   2)no-packet-loss forwarding time delay of the switch when enabling a
   tail drop feature on a queue with configured consumption ratio (i.e.
   the buffer(%)).

5.1 Test of Buffer Configuration in Switch

   The buffer configuration test aims to evaluate the size of the
   queue's length in the switch, and how different packets share the
   buffer allocated to a given port. Since there are commonly multiple
   queues for different QoS packets passing a single port, and we are
   focusing on queuing length rather than service differentiation, we
   ignore the class of QoS and the priority queue schemes in the switch.
   When setting the length of the buffer, we ask the switch to drop the
   packet when the buffer allocated to the queue meets a threshold in
   percentage (i.e. the buffer(%)). 

   We set each of the input flow be 51% of the wire bandwidth to make
   sure that there will be a queue building (congestion) at the
   corresponding output port.

   Back-to-back test of the 3 ports is done by using RFC 2544 of SPT C1.
   The packet sizes are 512 and 1024. The test step is 0.1% of the
   bandwidth. The maximum number of received frame when the queue just
   meets the threshold is the real value of the length of the buffer.

   To verify the effectiveness of the value, we choose 50% queue and
   100% queue to test separately to see the change of the maximum number
   of received frame.

5.2 Test of Forwarding Delay in Switch

   Forwarding delay test mainly inspects the relationship between the
   queuing at the switch and the delay. Therefore, we verified the
   maximum buffer queue length to drop the packet when the buffer(%)
   reached the threshold. 

   We use RFC 2544 to go through the latency test of the three ports.
   Each input sets the flow percentage from 49.8% to 50.2% with an
 


<Shi, et al.>             Expires Jan 22, 2015                  [Page 4]

INTERNET DRAFT            <Buffer Delay Test>               Jul 21, 2014


   increase of 0.2% each time. The tested frame sizes are 64, 128, 256,
   512, 768, 1024, 1280 and 1518, as recommended in [RFC2544]. The
   buffer(%) is set to 1%, 5%, 10%, 20%, 30%, 40%, 50%, 60%, 70%, 80%,
   90%, 100% of the maximum queue length to analyze the delay time of
   different frame under different queue length.

6 Result Analysis

   We did a group of tests and got a bunch of data. The data were
   analyzed by univariate statistics first, and then by using linear
   regression model, we did the multivariate statistics. In this way, we
   found out that minimum delay time shown different relations with the
   variants under observation, while the maximum delay time and the
   average delay time share very similar features when we considered the
   packet size and the buffer(%) as the independent variable.

 6.1 The Minimum Delay

   Observation 1: when buffer(%) is fixed, the delay increases linearly
   with the packet size. 

   Observation 2: When packet size is fixed, the buffer(%) seems has no
   influence on the minimum delay time. 

   This was also been proved when we did the multivariate analysis. The
   coefficient of the buffer(%) was 0 in the fitting line.

 6.2 The Maximum/Average Delay

   Observation 1: Both the maximum and average delay have almost the
   same tendency and values. 

   Observation 2: When buffer(%)is fixed, with increasing packet size,
   delay time will also increase. Seen from the data, the maximum and
   average delay time have a nonlinear relationship with the packet
   size. Besides, we noticed that when the packet size is too big or
   small, the maximum delay time and the average delay time are more
   influenced by the packet size compared with the one with moderate
   packet size.

   Observation 3: When packet size is fixed, maximum and average delay
   increase linearly with the buffer(%). Also, with bigger packet size,
   the delays are more influenced by the buffer(%) since the slot of the
   fitting line is higher.

   Compared with the minimum delay time, we come to the conclusion that
   average delay time is more influenced by maximum delay time, rather
   than the minimum delay time. 
 


<Shi, et al.>             Expires Jan 22, 2015                  [Page 5]

INTERNET DRAFT            <Buffer Delay Test>               Jul 21, 2014


   In the multivariate statistics, since the relationship between the
   delay time and the packet size is nonlinear, we tried a lot of
   nonlinear models, such as polynomial equations. The best fitting
   result so far is the combination of packet number(buffer(%)/packet
   size) and first order of buffer(%) and a constant number. 

   Since the minimum delay time is only related to the packet size, we
   replaced the packet size with the minimum delay time in the maximum
   and average delay time's fitting equations, in this way both the
   maximum and average delay can be represented by the minimum delay
   time and buffer(%). 

7 Future Works

   Later we will have more tests and try to have a clear understanding
   of the influence of the congestion and the reason for the congestion.
   The preliminary considerations are:

   1) Test and analyze on other access switches and aggregate switches. 
   

   2) Test and analyze on a more complicated internetworking topology
   (e.g. sequence of or parallel union of multiple switches).

   3) Measure the RTT for TCP data flow, and analyze the relationship
   between the forwarding delay and TCP RTT.


8  Security Considerations

   N/A.


9  IANA Considerations

   N/A.


10  References

10.1  Normative References







 


<Shi, et al.>             Expires Jan 22, 2015                  [Page 6]

INTERNET DRAFT            <Buffer Delay Test>               Jul 21, 2014


Authors' Addresses



   Yang Shi
   University of California, Irvine

   Email: shiy4@uci.edu




   Shihui Duan
   China Academy of Telecommunication Research of MIIT

   Email: duanshihui@catr.cn




   Lingli Deng
   China Mobile

   Email: denglingli@chinamobile.com



























<Shi, et al.>             Expires Jan 22, 2015                  [Page 7]
