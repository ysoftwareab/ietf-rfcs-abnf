<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Layer-3 Discovery and Liveness</title>
<meta content="Randy Bush" name="author">
<meta content="Rob Austein" name="author">
<meta content="Keyur Patel" name="author">
<meta content="
       In Massive Data Centers, BGP-SPF and similar routing protocols
    are used to build topology and reachability databases.  These
    protocols need to discover IP Layer-3 attributes of links, such as
    neighbor IP addressing, logical link IP encapsulation abilities, and
    link liveness.  This Layer-3 Discovery and Liveness protocol
    collects these data, which may then be disseminated using BGP-SPF
    and similar protocols. 
    " name="description">
<meta content="xml2rfc 3.10.0" name="generator">
<meta content="draft-ietf-lsvr-l3dl-08" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.10.0
    Python 3.6.12
    appdirs 1.4.4
    ConfigArgParse 1.5.3
    google-i18n-address 2.5.0
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.6.3
    pycountry 20.7.3
    pyflakes 2.4.0
    PyYAML 5.4.1
    requests 2.26.0
    setuptools 58.2.0
    six 1.16.0
-->
<link href="/tmp/draft-ietf-lsvr-l3dl-sr_h76cj.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">Layer-3 Discovery and Liveness</td>
<td class="right">October 2021</td>
</tr></thead>
<tfoot><tr>
<td class="left">Bush, et al.</td>
<td class="center">Expires 17 April 2022</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">Network Working Group</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-ietf-lsvr-l3dl-08</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2021-10-14" class="published">14 October 2021</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2022-04-17">17 April 2022</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">R. Bush</div>
<div class="org">Arrcus &amp; Internet Initiative Japan</div>
</div>
<div class="author">
      <div class="author-name">R. Austein</div>
<div class="org">Arrcus</div>
</div>
<div class="author">
      <div class="author-name">K. Patel</div>
<div class="org">Arrcus</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Layer-3 Discovery and Liveness</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">In Massive Data Centers, BGP-SPF and similar routing protocols
    are used to build topology and reachability databases.  These
    protocols need to discover IP Layer-3 attributes of links, such as
    neighbor IP addressing, logical link IP encapsulation abilities, and
    link liveness.  This Layer-3 Discovery and Liveness protocol
    collects these data, which may then be disseminated using BGP-SPF
    and similar protocols.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<section class="note" id="section-note.1">
      <h2 id="name-requirements-language">
<a href="#name-requirements-language" class="section-name selfRef">Requirements Language</a>
      </h2>
<p id="section-note.1-1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
    "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
    "OPTIONAL" in this  document are to be interpreted as described in
    BCP 14 <span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="xref">RFC8174</a>]</span> when,
    and only when, they appear in all capitals, as shown here.<a href="#section-note.1-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 17 April 2022.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2021 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="xref">2</a>.  <a href="#name-terminology" class="xref">Terminology</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1" class="keepWithNext"><a href="#section-3" class="xref">3</a>.  <a href="#name-background" class="xref">Background</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-top-level-overview" class="xref">Top Level Overview</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-inter-link-protocol-overvie" class="xref">Inter-Link Protocol Overview</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="xref">5.1</a>.  <a href="#name-l3dl-ladder-diagram" class="xref">L3DL Ladder Diagram</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-transport-layer" class="xref">Transport Layer</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-the-checksum" class="xref">The Checksum</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-tlv-pdus" class="xref">TLV PDUs</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-logical-link-endpoint-ident" class="xref">Logical Link Endpoint Identifier</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="xref">10</a>. <a href="#name-hello" class="xref">HELLO</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-11" class="xref">11</a>. <a href="#name-open" class="xref">OPEN</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#section-12" class="xref">12</a>. <a href="#name-ack" class="xref">ACK</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.1">
                <p id="section-toc.1-1.12.2.1.1"><a href="#section-12.1" class="xref">12.1</a>.  <a href="#name-retransmission" class="xref">Retransmission</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#section-13" class="xref">13</a>. <a href="#name-the-encapsulations" class="xref">The Encapsulations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.1">
                <p id="section-toc.1-1.13.2.1.1"><a href="#section-13.1" class="xref">13.1</a>.  <a href="#name-the-encapsulation-pdu-skele" class="xref">The Encapsulation PDU Skeleton</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.2">
                <p id="section-toc.1-1.13.2.2.1"><a href="#section-13.2" class="xref">13.2</a>.  <a href="#name-encapsulaion-flags" class="xref">Encapsulaion Flags</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.3">
                <p id="section-toc.1-1.13.2.3.1"><a href="#section-13.3" class="xref">13.3</a>.  <a href="#name-ipv4-encapsulation" class="xref">IPv4 Encapsulation</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.4">
                <p id="section-toc.1-1.13.2.4.1"><a href="#section-13.4" class="xref">13.4</a>.  <a href="#name-ipv6-encapsulation" class="xref">IPv6 Encapsulation</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.5">
                <p id="section-toc.1-1.13.2.5.1"><a href="#section-13.5" class="xref">13.5</a>.  <a href="#name-mpls-label-list" class="xref">MPLS Label List</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.6">
                <p id="section-toc.1-1.13.2.6.1"><a href="#section-13.6" class="xref">13.6</a>.  <a href="#name-mpls-ipv4-encapsulation" class="xref">MPLS IPv4 Encapsulation</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.7">
                <p id="section-toc.1-1.13.2.7.1"><a href="#section-13.7" class="xref">13.7</a>.  <a href="#name-mpls-ipv6-encapsulation" class="xref">MPLS IPv6 Encapsulation</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a href="#section-14" class="xref">14</a>. <a href="#name-vendor-vendor-extensions" class="xref">VENDOR - Vendor Extensions</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15">
            <p id="section-toc.1-1.15.1"><a href="#section-15" class="xref">15</a>. <a href="#name-keepalive-layer-2-liveness" class="xref">KEEPALIVE - Layer-2 Liveness</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16">
            <p id="section-toc.1-1.16.1"><a href="#section-16" class="xref">16</a>. <a href="#name-layers-25-and-3-liveness" class="xref">Layers-2.5 and 3 Liveness</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.17">
            <p id="section-toc.1-1.17.1"><a href="#section-17" class="xref">17</a>. <a href="#name-the-north-south-protocol" class="xref">The North/South Protocol</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.17.2.1">
                <p id="section-toc.1-1.17.2.1.1"><a href="#section-17.1" class="xref">17.1</a>.  <a href="#name-use-bgp-ls-as-much-as-possi" class="xref">Use BGP-LS as Much as Possible</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.17.2.2">
                <p id="section-toc.1-1.17.2.2.1"><a href="#section-17.2" class="xref">17.2</a>.  <a href="#name-extensions-to-bgp-ls" class="xref">Extensions to BGP-LS</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18">
            <p id="section-toc.1-1.18.1"><a href="#section-18" class="xref">18</a>. <a href="#name-discussion" class="xref">Discussion</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18.2.1">
                <p id="section-toc.1-1.18.2.1.1"><a href="#section-18.1" class="xref">18.1</a>.  <a href="#name-hello-discussion" class="xref">HELLO Discussion</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18.2.2">
                <p id="section-toc.1-1.18.2.2.1"><a href="#section-18.2" class="xref">18.2</a>.  <a href="#name-hello-versus-keepalive" class="xref">HELLO versus KEEPALIVE</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19">
            <p id="section-toc.1-1.19.1"><a href="#section-19" class="xref">19</a>. <a href="#name-vlans-svis-sub-interfaces" class="xref">VLANs/SVIs/Sub-interfaces</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.20">
            <p id="section-toc.1-1.20.1"><a href="#section-20" class="xref">20</a>. <a href="#name-implementation-consideratio" class="xref">Implementation Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.21">
            <p id="section-toc.1-1.21.1"><a href="#section-21" class="xref">21</a>. <a href="#name-security-considerations" class="xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.22">
            <p id="section-toc.1-1.22.1"><a href="#section-22" class="xref">22</a>. <a href="#name-iana-considerations" class="xref">IANA Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.22.2.1">
                <p id="section-toc.1-1.22.2.1.1"><a href="#section-22.1" class="xref">22.1</a>.  <a href="#name-pdu-types" class="xref">PDU Types</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.22.2.2">
                <p id="section-toc.1-1.22.2.2.1"><a href="#section-22.2" class="xref">22.2</a>.  <a href="#name-signature-type" class="xref">Signature Type</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.22.2.3">
                <p id="section-toc.1-1.22.2.3.1"><a href="#section-22.3" class="xref">22.3</a>.  <a href="#name-flag-bits" class="xref">Flag Bits</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.22.2.4">
                <p id="section-toc.1-1.22.2.4.1"><a href="#section-22.4" class="xref">22.4</a>.  <a href="#name-error-codes" class="xref">Error Codes</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.23">
            <p id="section-toc.1-1.23.1"><a href="#section-23" class="xref">23</a>. <a href="#name-ieee-considerations" class="xref">IEEE Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.24">
            <p id="section-toc.1-1.24.1"><a href="#section-24" class="xref">24</a>. <a href="#name-acknowledgments" class="xref">Acknowledgments</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.25">
            <p id="section-toc.1-1.25.1"><a href="#section-25" class="xref">25</a>. <a href="#name-references" class="xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.25.2.1">
                <p id="section-toc.1-1.25.2.1.1"><a href="#section-25.1" class="xref">25.1</a>.  <a href="#name-normative-references" class="xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.25.2.2">
                <p id="section-toc.1-1.25.2.2.1"><a href="#section-25.2" class="xref">25.2</a>.  <a href="#name-informative-references" class="xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.26">
            <p id="section-toc.1-1.26.1"><a href="#appendix-A" class="xref"></a><a href="#name-authors-addresses" class="xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="intro">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">The Massive Data Center (MDC) environment presents unusual
    problems of scale, e.g. O(10,000) forwarding devices, while its
    homogeneity presents opportunities for simple approaches.
    Approaches such as Jupiter Rising <span>[<a href="#JUPITER" class="xref">JUPITER</a>]</span> use a
    central controller to deal with scaling, while BGP-SPF <span>[<a href="#I-D.ietf-lsvr-bgp-spf" class="xref">I-D.ietf-lsvr-bgp-spf</a>]</span> provides massive scale-out without
    centralization using a tried and tested scalable distributed control
    plane, offering a scalable routing solution in Clos <span>[<a href="#Clos0" class="xref">Clos0</a>]</span><span>[<a href="#Clos1" class="xref">Clos1</a>]</span> and similar environments.
    But BGP-SPF and similar higher level device-spanning protocols,
    e.g. <span>[<a href="#I-D.malhotra-bess-evpn-lsoe" class="xref">I-D.malhotra-bess-evpn-lsoe</a>]</span>, need logical link
    state and addressing data from the network to build the routing
    topology.  They also need prompt but prudent reaction to (logical)
    link failure.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">Layer-3 Discovery and Liveness (L3DL) provides brutally simple
    mechanisms for devices to<a href="#section-1-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1-3.1">Discover each other's unique endpoint identification,<a href="#section-1-3.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-1-3.2">Discover mutually supported layer-3 encapsulations, e.g.
      IP/MPLS,<a href="#section-1-3.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-1-3.3">Discover Layer-3 IP and/or MPLS addressing of interfaces of the
      encapsulations,<a href="#section-1-3.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-1-3.4">Present these data, using a very restricted profile of a BGP-LS
      <span>[<a href="#RFC7752" class="xref">RFC7752</a>]</span> API, to BGP-SPF which computes the
      topology and builds routing and forwarding tables,<a href="#section-1-3.4" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-1-3.5">Enable Layer-3 link liveness such as BFD,<a href="#section-1-3.5" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-1-3.6">Provide Layer-2 keep-alive messages for session continuity, and
      finally<a href="#section-1-3.6" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-1-3.7">Provide for authenticity verification of protocol messages.<a href="#section-1-3.7" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-1-4">In this document, the use case for L3DL is for point to point
    links in a datacenter Clos in order to exchange the data needed for
    BGP-SPF <span>[<a href="#I-D.ietf-lsvr-bgp-spf" class="xref">I-D.ietf-lsvr-bgp-spf</a>]</span> bootstrap and
    continuity.  Once layer-2 connectivity has been leveraged to get
    layer-3 addressability and forwarding capabilities, normal layer-3
    forwarding and routing can take over.<a href="#section-1-4" class="pilcrow">¶</a></p>
<p id="section-1-5">L3DL might be found to be more widely applicable to a range of
    routing and similar protocols which need layer-3 discovery and
    characterisation.<a href="#section-1-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="terminology">
<section id="section-2">
      <h2 id="name-terminology">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-terminology" class="section-name selfRef">Terminology</a>
      </h2>
<p id="section-2-1">Even though it concentrates on the inter-device layer, this
    document relies heavily on routing terminology.  The following
    attempts to clarify the use of some possibly confusing terms:<a href="#section-2-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-2-2">
        <dt id="section-2-2.1">ASN:</dt>
        <dd style="margin-left: 5.5em" id="section-2-2.2">Autonomous System Number <span>[<a href="#RFC4271" class="xref">RFC4271</a>]</span>, a BGP identifier for an originator of
      Layer-3 routes, particularly BGP announcements.<a href="#section-2-2.2" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.3">BGP-LS:</dt>
        <dd style="margin-left: 5.5em" id="section-2-2.4">A mechanism by which link-state and TE
      information can be collected from networks and shared with
      external components using the BGP routing protocol.  See <span>[<a href="#RFC7752" class="xref">RFC7752</a>]</span>.<a href="#section-2-2.4" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.5">BGP-SPF</dt>
        <dd style="margin-left: 5.5em" id="section-2-2.6">A hybrid protocol using BGP transport but
      a Dijkstra Shortest Path First decision process.  See <span>[<a href="#I-D.ietf-lsvr-bgp-spf" class="xref">I-D.ietf-lsvr-bgp-spf</a>]</span>.<a href="#section-2-2.6" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.7">Clos:</dt>
        <dd style="margin-left: 5.5em" id="section-2-2.8">A hierarchic subset of a crossbar switch
      topology commonly used in data centers.<a href="#section-2-2.8" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.9">Datagram:</dt>
        <dd style="margin-left: 5.5em" id="section-2-2.10">The L3DL content of a single Layer-2
      frame, sans Ethernet framing.  A full L3DL PDU may be packaged in
      multiple Datagrams.<a href="#section-2-2.10" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.11">Encapsulation:</dt>
        <dd style="margin-left: 5.5em" id="section-2-2.12">Address Family Indicator and
      Subsequent Address Family Indicator (AFI/SAFI).  I.e. classes of
      layer-2.5 and 3 addresses such as IPv4, IPv6, MPLS, etc.<a href="#section-2-2.12" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.13">Frame:</dt>
        <dd style="margin-left: 5.5em" id="section-2-2.14">A Layer-2 Ethernet packet.<a href="#section-2-2.14" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.15">Link or Logical Link:</dt>
        <dd style="margin-left: 5.5em" id="section-2-2.16">A logical connection between
      two logical ports on two devices.  E.g. two VLANs between the same
      two ports are two links.<a href="#section-2-2.16" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.17">LLEI:</dt>
        <dd style="margin-left: 5.5em" id="section-2-2.18">Logical Link Endpoint Identifier, the unique
      identifier of one end of a logical link, see <a href="#llei" class="xref">Section 9</a>.<a href="#section-2-2.18" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.19">MAC Address:</dt>
        <dd style="margin-left: 5.5em" id="section-2-2.20">48-bit Layer-2 addresses are assumed
      since they are used by all widely deployed Layer-2 network
      technologies of interest, especially Ethernet.  See <span>[<a href="#IEEE.802_2001" class="xref">IEEE.802_2001</a>]</span>.<a href="#section-2-2.20" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.21">MDC:</dt>
        <dd style="margin-left: 5.5em" id="section-2-2.22">Massive Data Center, commonly composed of
      thousands of Top of Rack Switches (TORs).<a href="#section-2-2.22" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.23">MTU:</dt>
        <dd style="margin-left: 5.5em" id="section-2-2.24">Maximum Transmission Unit, the size in octets
      of the largest packet that can be sent on a medium, see <span>[<a href="#RFC1122" class="xref">RFC1122</a>]</span> 1.3.3.<a href="#section-2-2.24" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.25">PDU:</dt>
        <dd style="margin-left: 5.5em" id="section-2-2.26">Protocol Data Unit, an L3DL application layer
      message.  A PDU's content may need to be broken into multiple
      Datagrams to make it through MTU or other restrictions.<a href="#section-2-2.26" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.27">RouterID:</dt>
        <dd style="margin-left: 5.5em" id="section-2-2.28">An 32-bit identifier unique in the
      current routing domain, see <span>[<a href="#RFC6286" class="xref">RFC6286</a>]</span>.<a href="#section-2-2.28" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.29">Session:</dt>
        <dd style="margin-left: 5.5em" id="section-2-2.30">An established, via OPEN PDUs, session
      between two L3DL capable link end-points,<a href="#section-2-2.30" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.31">SPF:</dt>
        <dd style="margin-left: 5.5em" id="section-2-2.32">Shortest Path First, an algorithm for finding
      the shortest paths between nodes in a graph; AKA Dijkstra's
      algorithm.<a href="#section-2-2.32" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.33">System Identifier:</dt>
        <dd style="margin-left: 5.5em" id="section-2-2.34">An eight octet ISO System
      Identifier a la <span>[<a href="#RFC1629" class="xref">RFC1629</a>]</span> System ID<a href="#section-2-2.34" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.35">TOR:</dt>
        <dd style="margin-left: 5.5em" id="section-2-2.36">Top Of Rack switch, aggregates the servers in
      a rack and connects to aggregation layers of the Clos tree, AKA
      the Clos spine.<a href="#section-2-2.36" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-2-2.37">ZTP:</dt>
        <dd style="margin-left: 5.5em" id="section-2-2.38">Zero Touch Provisioning gives devices initial
      addresses, credentials, etc. on boot/restart.<a href="#section-2-2.38" class="pilcrow">¶</a>
</dd>
      <dd class="break"></dd>
</dl>
</section>
</div>
<div id="background">
<section id="section-3">
      <h2 id="name-background">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-background" class="section-name selfRef">Background</a>
      </h2>
<p id="section-3-1">L3DL is primarily designed for a Clos type datacenter scale and
    topology, but can accommodate richer topologies which contain
    potential cycles.<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">While L3DL is designed for the MDC, there are no inherent reasons
    it could not run on a WAN.  The authentication and authorization
    needed to run safely on a WAN need to be considered, and the
    appropriate level of security options chosen.<a href="#section-3-2" class="pilcrow">¶</a></p>
<p id="section-3-3">L3DL assumes a new IEEE assigned EtherType (TBD).<a href="#section-3-3" class="pilcrow">¶</a></p>
<p id="section-3-4">The number of addresses of one Encapsulation type on an interface
    link may be quite large given a TOR with tens of servers, each
    server having a few hundred micro-services, resulting in an
    inordinate number of addresses.  And highly automated micro-service
    migration can cause serious address prefix disaggregation, resulting
    in interfaces with thousands of disaggregated prefixes.<a href="#section-3-4" class="pilcrow">¶</a></p>
<p id="section-3-5">Therefore the L3DL protocol is session oriented and uses
    incremental announcement and withdrawal with session restart, a la
    BGP (<span>[<a href="#RFC4271" class="xref">RFC4271</a>]</span>).<a href="#section-3-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="top">
<section id="section-4">
      <h2 id="name-top-level-overview">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-top-level-overview" class="section-name selfRef">Top Level Overview</a>
      </h2>
<ul class="normal">
<li class="normal" id="section-4-1.1">Devices discover each other on logical links<a href="#section-4-1.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-4-1.2">Logical Link Endpoint Identifiers (LLEIs) are exchanged<a href="#section-4-1.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-4-1.3">Layer-2 Liveness checks may be started<a href="#section-4-1.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-4-1.4">Encapsulation data are exchanged and IP-Level Liveness checks
      enabled<a href="#section-4-1.4" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-4-1.5">A BGP-like upper layer protocol is assumed to use the
      identifiers and encapsulation data to discover and build a topology
      database<a href="#section-4-1.5" class="pilcrow">¶</a>
</li>
      </ul>
<div class="alignLeft art-text artwork" id="section-4-2">
<pre>
+-------------------+   +-------------------+   +-------------------+
|      Device       |   |      Device       |   |      Device       |
|                   |   |                   |   |                   |
|+-----------------+|   |+-----------------+|   |+-----------------+|
||                 ||   ||                 ||   ||                 ||
||     BGP-SPF     &lt;+---+&gt;     BGP-SPF     &lt;+---+&gt;     BGP-SPF     ||
||                 ||   ||                 ||   ||                 ||
|+--------^--------+|   |+--------^--------+|   |+--------^--------+|
|         |         |   |         |         |   |         |         |
|         |         |   |         |         |   |         |         |
|+--------+--------+|   |+--------+--------+|   |+--------+--------+|
||  Encapsulations ||   ||  Encapsulations ||   ||  Encapsulations ||
||    Addresses    ||   ||    Addresses    ||   ||    Addresses    ||
||   L2 Liveness   ||   ||   L2 Liveness   ||   ||   L2 Liveness   ||
|+--------^--------+|   |+--------^--------+|   |+--------^--------+|
|         |         |   |         |         |   |         |         |
|         |         |   |         |         |   |         |         |
|+--------v--------+|   |+--------v--------+|   |+--------v--------+|
||                 ||   ||                 ||   ||                 ||
||Inter-Device PDUs&lt;+---+&gt;Inter-Device PDUs&lt;+---+&gt;Inter-Device PDUs||
||                 ||   ||                 ||   ||                 ||
|+-----------------+|   |+-----------------+|   |+-----------------+|
+-------------------+   +-------------------+   +-------------------+
</pre><a href="#section-4-2" class="pilcrow">¶</a>
</div>
<p id="section-4-3">There are two protocols, the inter-device (left-right in the
    diagram) per-link layer-3 discovery and the API to the upper level
    BGP-like routing protocol (up-down in the above diagram):<a href="#section-4-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4-4.1">Inter-device PDUs are used to exchange device and logical link
      identities and layer-2.5 (MPLS) and 3 identifiers (not payloads),
      e.g. device IDs, port identities, VLAN IDs, Encapsulations, and IP
      addresses.<a href="#section-4-4.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-4-4.2">A Link Layer to BGP API presents these data up the stack to
      a BGP protocol or an other device-spanning upper layer protocol,
      presenting them using the BGP-LS BGP-like data format.<a href="#section-4-4.2" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-4-5">The upper layer BGP family routing protocols cross all the
    devices, though they are not part of these L3DL protocols.<a href="#section-4-5" class="pilcrow">¶</a></p>
<p id="section-4-6">To simplify this document, Layer-2 framing is not shown.  L3DL is
    about layer-3.<a href="#section-4-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="ilpo">
<section id="section-5">
      <h2 id="name-inter-link-protocol-overvie">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-inter-link-protocol-overvie" class="section-name selfRef">Inter-Link Protocol Overview</a>
      </h2>
<p id="section-5-1">Two devices discover each other and their respective identities
    by sending multicast HELLO PDUs (<a href="#hello" class="xref">Section 10</a>).  To assure
    discovery of new devices coming up on a multi-link topology, devices
    on such a topology, and only on a multi-link topology, send periodic
    HELLOs forever, see <a href="#dhello" class="xref">Section 18.1</a>.<a href="#section-5-1" class="pilcrow">¶</a></p>
<p id="section-5-2">Once a new device is recognized, both devices attempt to
    negotiate and establish a session by sending unicast OPEN PDUs
    (<a href="#open" class="xref">Section 11</a>) to the source MAC addresses (plus VIDs if
    VLANs) of the received HELLOs.  Once a session is established
    through the OPEN exchange, the Encapsulations (<a href="#afisafi" class="xref">Section 13</a>) configured on an end point may be announced and
    modified.  Note that these are only the encapsulation and addresses
    configured on the announcing interface; though a device's loopback
    and overlay interface(s) may also be announced.  When two devices on
    a link have compatible Encapsulations and addresses, i.e. the same
    AFI/SAFI and the same subnet, the link is announced via the BGP-LS
    API.<a href="#section-5-2" class="pilcrow">¶</a></p>
<div id="ladder">
<section id="section-5.1">
        <h3 id="name-l3dl-ladder-diagram">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-l3dl-ladder-diagram" class="section-name selfRef">L3DL Ladder Diagram</a>
        </h3>
<p id="section-5.1-1">The HELLO, <a href="#hello" class="xref">Section 10</a>, is a priming message sent on
      all configured logical links.  It is a small L3DL PDU encapsulated
      in an Ethernet multicast frame with the simple goal of discovering
      the identities of logical link endpoint(s) reachable from a
      Logical Link Endpoint, <a href="#llei" class="xref">Section 9</a>.<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<p id="section-5.1-2">The HELLO and OPEN, <a href="#open" class="xref">Section 11</a>, PDUs, which are used
      to discover and exchange detailed Logical Link Endpoint
      Identifiers, LLEIs, and the ACK/ERROR PDU, are mandatory; other
      PDUs are optional; though at least one encapsulation SHOULD be
      agreed at some point.<a href="#section-5.1-2" class="pilcrow">¶</a></p>
<p id="section-5.1-3">The following is a ladder-style diagram of the L3DL protocol
      exchanges:<a href="#section-5.1-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.1-4">
<pre>
|            HELLO            | Logical Link Peer discovery
|----------------------------&gt;|
|            HELLO            | Mandatory
|&lt;----------------------------|
|                             |
|                             |
|            OPEN             | MACs, IDs, etc.
|----------------------------&gt;|
|            ACK              |
|&lt;----------------------------|
|                             |
|            OPEN             | Mandatory
|&lt;----------------------------|
|            ACK              |
|----------------------------&gt;|
|                             |
|                             |
|   Interface IPv4 Addresses  | Interface IPv4 Addresses
|----------------------------&gt;| Optional
|            ACK              |
|&lt;----------------------------|
|                             |
|   Interface IPv4 Addresses  |
|&lt;----------------------------|
|            ACK              |
|----------------------------&gt;|
|                             |
|                             |
|   Interface IPv6 Addresses  | Interface IPv6 Addresses
|----------------------------&gt;| Optional
|            ACK              |
|&lt;----------------------------|
|                             |
|   Interface IPv6 Addresses  |
|&lt;----------------------------|
|            ACK              |
|----------------------------&gt;|
|                             |
|                             |
|   Interface MPLSv4 Labels   | Interface MPLSv4 Labels
|----------------------------&gt;| Optional
|            ACK              |
|&lt;----------------------------|
|                             |
|   Interface MPLSv4 Labels   | Interface MPLSv4 Labels
|&lt;----------------------------| Optional
|            ACK              |
|----------------------------&gt;|
|                             |
|                             |
|   Interface MPLSv6 Labels   | Interface MPLSv6 Labels
|----------------------------&gt;| Optional
|            ACK              |
|&lt;----------------------------|
|                             |
|   Interface MPLSv6 Labels   | Interface MPLSv6 Labels
|&lt;----------------------------| Optional
|            ACK              |
|----------------------------&gt;|
|                             |
|                             |
|        L3DL KEEPALIVE       | Layer-2 Liveness
|----------------------------&gt;| Optional
|        L3DL KEEPALIVE       |
|&lt;----------------------------|
</pre><a href="#section-5.1-4" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="transport">
<section id="section-6">
      <h2 id="name-transport-layer">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-transport-layer" class="section-name selfRef">Transport Layer</a>
      </h2>
<p id="section-6-1">L3DL PDUs are carried by a simple transport layer which allows
    long PDUs to occupy many Ethernet frames.  The L3DL content of a
    single Ethernet frame, exclusive of Ethernet framing data, is
    referred to as a Datagram.<a href="#section-6-1" class="pilcrow">¶</a></p>
<p id="section-6-2">The L3DL Transport Layer encapsulates each Datagram using a
    common transport header.<a href="#section-6-2" class="pilcrow">¶</a></p>
<p id="section-6-3">If a PDU does not fit in a single datagram, it is broken into
    multiple Datagrams and reassembled by the receiver a la <span>[<a href="#RFC0791" class="xref">RFC0791</a>]</span> Section 2.3 Fragmentation.<a href="#section-6-3" class="pilcrow">¶</a></p>
<p id="section-6-4">This is not classic 'fragmentation', but rather decomposition at
    the origin to allow PDU payloads larger than the frame allows.
    There are no intermediate devices capable of further fragmentation
    or reassembly.<a href="#section-6-4" class="pilcrow">¶</a></p>
<p id="section-6-5">A PDU might need a large number of frames to be sent.  As
    fragments are not ACK paced (as PDUs are), to avoid overwhelming
    bursts, the sender should pace fragments of a large PDU.<a href="#section-6-5" class="pilcrow">¶</a></p>
<p id="section-6-6">L3DL is carrying a relatively small amount of data on relatively
    high bandwidth links, and at a time when the link is not active with
    other data as it does not yet have layer-3 connectivity.  So
    congestion is not considered a sufficiently significant risk to
    warrant additional complexity.<a href="#section-6-6" class="pilcrow">¶</a></p>
<p id="section-6-7">Should a PDU need to be retransmitted, it MUST BE sent as the
    identical Datagram set as the original transmission.  The
    Transmission Sequence Number informs the receiver that it is the
    same PDU.<a href="#section-6-7" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6-8">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    Version    |  Transmission Sequence Number |L| Dtgm Number ~
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
~   Datagram Number (contd)     |        Datagram Length        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                            Checksum                           |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                           Payload...                          |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a href="#section-6-8" class="pilcrow">¶</a>
</div>
<p id="section-6-9">The fields of the L3DL Transport Header are as follows:<a href="#section-6-9" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-6-10">
        <dt id="section-6-10.1">Version:</dt>
        <dd style="margin-left: 1.5em" id="section-6-10.2">Eight-bit Version number of the protocol,
      currently 0.  Values other than 0 MUST BE treated as an error.
      The protocol version needs to be in one and only one place, so it
      is in the datagram as opposed to, for example, the PDU header.<a href="#section-6-10.2" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-6-10.3">Transmission Sequence Number:</dt>
        <dd style="margin-left: 1.5em" id="section-6-10.4">A 16-bit strictly
      increasing unsigned integer identifying this PDU, possibly across
      retransmissions, that wraps from 2^16-1 to 0.  The initial value
      is arbitrary.  See <span>[<a href="#RFC1982" class="xref">RFC1982</a>]</span> on DNS Serial Number
      Arithmetic for too much detail on comparing and incrementing a
      wrapping sequence number.<a href="#section-6-10.4" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-6-10.5">L:</dt>
        <dd style="margin-left: 1.5em" id="section-6-10.6">A bit that set to one if this Datagram is the
      last Datagram of the PDU.  For a PDU which fits in
      only one Datagram, it is set to one.  Note that this is the
      inverse of the marking technique used by <span>[<a href="#RFC0791" class="xref">RFC0791</a>]</span>.<a href="#section-6-10.6" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-6-10.7">Datagram Number:</dt>
        <dd style="margin-left: 1.5em" id="section-6-10.8">A monotonically increasing 23-bit
      value which starts at zero for each PDU.  This is used to
      reassemble frames into PDUs a la <span>[<a href="#RFC0791" class="xref">RFC0791</a>]</span> Section
      2.3.  Note that this limits an L3DL PDU to 2^24 frames.<a href="#section-6-10.8" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-6-10.9">Datagram Length:</dt>
        <dd style="margin-left: 1.5em" id="section-6-10.10">Total number of octets in the
      Datagram including all payloads and fields.  Note that this limits
      a datagram to 2^16 octets; though Ethernet framing is likely to
      impose a smaller limit.<a href="#section-6-10.10" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-6-10.11">Checksum:</dt>
        <dd style="margin-left: 1.5em" id="section-6-10.12">A 32 bit hash over the Datagram to detect
      bit flips, see <a href="#checksum" class="xref">Section 7</a>.<a href="#section-6-10.12" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-6-10.13"></dt>
        <dd style="margin-left: 1.5em" id="section-6-10.14">If a Datagram fails checksum verification, the datagram is
      invalid and SHOULD be silently discarded.  The sender will
      retransmit the PDU, and the receiver can assemble it.<a href="#section-6-10.14" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-6-10.15">Payload:</dt>
        <dd style="margin-left: 1.5em" id="section-6-10.16">The PDU being transported or a fragment
      thereof.<a href="#section-6-10.16" class="pilcrow">¶</a>
</dd>
      <dd class="break"></dd>
</dl>
<p id="section-6-11">To avoid the need for a receiver to reassemble two PDUs at the
    same time, a sender MUST NOT send a subsequent PDU when a PDU is
    already in flight and not yet acknowledged; assuming it is an ACKed
    PDU Type.<a href="#section-6-11" class="pilcrow">¶</a></p>
</section>
</div>
<div id="checksum">
<section id="section-7">
      <h2 id="name-the-checksum">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-the-checksum" class="section-name selfRef">The Checksum</a>
      </h2>
<p id="section-7-1">There is a reason conservative folk use a checksum in UDP.  And
    as many operators stretch to jumbo frames (over 1,500 octets) longer
    checksums are the prudent approach.<a href="#section-7-1" class="pilcrow">¶</a></p>
<p id="section-7-2">For the purpose of computing a checksum, the checksum field
    itself is assumed to be zero.<a href="#section-7-2" class="pilcrow">¶</a></p>
<p id="section-7-3">The following code describes a suggested algorithm.  This
    specification avoids mandatory to implement, algorithm agility, etc.
    What matters is that the same algorithm is used consistently in any
    deployment.<a href="#section-7-3" class="pilcrow">¶</a></p>
<p id="section-7-4" class="keepWithNext">Sum up 32-bit unsigned ints in a 64-bit long, then take
     the high-order section, shift it right filling on the left with
     zeros, rotate, add it in, repeat until the high order 32 bits are
     all zero.<a href="#section-7-4" class="pilcrow">¶</a></p>
<div id="section-7-5">
<pre class="sourcecode">&lt;CODE BEGINS&gt;
#include &lt;stddef.h&gt;
#include &lt;stdint.h&gt;

/* The F table from Skipjack, and it would work for the S-Box. */
static const uint8_t sbox[256] = {
0xa3,0xd7,0x09,0x83,0xf8,0x48,0xf6,0xf4,0xb3,0x21,0x15,0x78,
0x99,0xb1,0xaf,0xf9,0xe7,0x2d,0x4d,0x8a,0xce,0x4c,0xca,0x2e,
0x52,0x95,0xd9,0x1e,0x4e,0x38,0x44,0x28,0x0a,0xdf,0x02,0xa0,
0x17,0xf1,0x60,0x68,0x12,0xb7,0x7a,0xc3,0xe9,0xfa,0x3d,0x53,
0x96,0x84,0x6b,0xba,0xf2,0x63,0x9a,0x19,0x7c,0xae,0xe5,0xf5,
0xf7,0x16,0x6a,0xa2,0x39,0xb6,0x7b,0x0f,0xc1,0x93,0x81,0x1b,
0xee,0xb4,0x1a,0xea,0xd0,0x91,0x2f,0xb8,0x55,0xb9,0xda,0x85,
0x3f,0x41,0xbf,0xe0,0x5a,0x58,0x80,0x5f,0x66,0x0b,0xd8,0x90,
0x35,0xd5,0xc0,0xa7,0x33,0x06,0x65,0x69,0x45,0x00,0x94,0x56,
0x6d,0x98,0x9b,0x76,0x97,0xfc,0xb2,0xc2,0xb0,0xfe,0xdb,0x20,
0xe1,0xeb,0xd6,0xe4,0xdd,0x47,0x4a,0x1d,0x42,0xed,0x9e,0x6e,
0x49,0x3c,0xcd,0x43,0x27,0xd2,0x07,0xd4,0xde,0xc7,0x67,0x18,
0x89,0xcb,0x30,0x1f,0x8d,0xc6,0x8f,0xaa,0xc8,0x74,0xdc,0xc9,
0x5d,0x5c,0x31,0xa4,0x70,0x88,0x61,0x2c,0x9f,0x0d,0x2b,0x87,
0x50,0x82,0x54,0x64,0x26,0x7d,0x03,0x40,0x34,0x4b,0x1c,0x73,
0xd1,0xc4,0xfd,0x3b,0xcc,0xfb,0x7f,0xab,0xe6,0x3e,0x5b,0xa5,
0xad,0x04,0x23,0x9c,0x14,0x51,0x22,0xf0,0x29,0x79,0x71,0x7e,
0xff,0x8c,0x0e,0xe2,0x0c,0xef,0xbc,0x72,0x75,0x6f,0x37,0xa1,
0xec,0xd3,0x8e,0x62,0x8b,0x86,0x10,0xe8,0x08,0x77,0x11,0xbe,
0x92,0x4f,0x24,0xc5,0x32,0x36,0x9d,0xcf,0xf3,0xa6,0xbb,0xac,
0x5e,0x6c,0xa9,0x13,0x57,0x25,0xb5,0xe3,0xbd,0xa8,0x3a,0x01,
0x05,0x59,0x2a,0x46
};

/* non-normative example C code, constant time even */

uint32_t sbox_checksum_32(const uint8_t *b, const size_t n)
{
  uint32_t sum[4] = {0, 0, 0, 0};
  uint64_t result = 0;
  for (size_t i = 0; i &lt; n; i++)
    sum[i &amp; 3] += sbox[*b++];
  for (int i = 0; i &lt; sizeof(sum)/sizeof(*sum); i++)
    result = (result &lt;&lt; 8) + sum[i];
  result = (result &gt;&gt; 32) + (result &amp; 0xFFFFFFFFU);
  result = (result &gt;&gt; 32) + (result &amp; 0xFFFFFFFFU);
  return (uint32_t) result;
}

&lt;CODE ENDS&gt;</pre><a href="#section-7-5" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="tlv">
<section id="section-8">
      <h2 id="name-tlv-pdus">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-tlv-pdus" class="section-name selfRef">TLV PDUs</a>
      </h2>
<p id="section-8-1">The basic L3DL application layer PDU is a typical TLV (Type
    Length Value) PDU.  It includes a signature to provide optional
    integrity and authentication.  It may be broken into multiple
    Datagrams, see <a href="#transport" class="xref">Section 6</a>.<a href="#section-8-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-8-2">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    PDU Type   |                 Payload Length                ~
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
~               |                  Payload ...                  |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    Sig Type   |        Signature Length       |               ~
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+               +
~                           Signature                           ~
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a href="#section-8-2" class="pilcrow">¶</a>
</div>
<p id="section-8-3">The fields of the basic L3DL header are as follows:<a href="#section-8-3" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-8-4">
        <dt id="section-8-4.1">PDU Type:</dt>
        <dd style="margin-left: 1.5em" id="section-8-4.2">An integer differentiating PDU payload
      types.  See <a href="#iana-types" class="xref">Section 22.1</a>.<a href="#section-8-4.2" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-8-4.3">Payload Length:</dt>
        <dd style="margin-left: 1.5em" id="section-8-4.4">Total number of octets in the
      Payload field.<a href="#section-8-4.4" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-8-4.5">Payload:</dt>
        <dd style="margin-left: 1.5em" id="section-8-4.6">The application layer content of the L3DL
      PDU.<a href="#section-8-4.6" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-8-4.7">Sig Type:</dt>
        <dd style="margin-left: 1.5em" id="section-8-4.8">The type of the Signature, see <a href="#iana-sigtype" class="xref">Section 22.2</a>.  Type 0, a null signature, is defined in
      this document.<a href="#section-8-4.8" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-8-4.9"></dt>
        <dd style="margin-left: 1.5em" id="section-8-4.10">Sig Type 0 indicates a null Signature.  For a trivial PDU such
      as KEEPALIVE, the underlying Datagram checksum may be sufficient
      for integrity, though it lacks authenticity.<a href="#section-8-4.10" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-8-4.11"></dt>
        <dd style="margin-left: 1.5em" id="section-8-4.12">Other Sig Types may be defined in other documents, cf. <span>[<a href="#I-D.ymbk-lsvr-l3dl-signing" class="xref">I-D.ymbk-lsvr-l3dl-signing</a>]</span>.<a href="#section-8-4.12" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-8-4.13">Signature Length:</dt>
        <dd style="margin-left: 1.5em" id="section-8-4.14">The length of the Signature,
      possibly including padding, in octets.  If Sig Type is 0,
      Signature Length MUST BE 0.<a href="#section-8-4.14" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-8-4.15">Signature:</dt>
        <dd style="margin-left: 1.5em" id="section-8-4.16">The result of running the signature
      algorithm specified in Sig Type over all octets of the PDU except
      for the Signature itself.<a href="#section-8-4.16" class="pilcrow">¶</a>
</dd>
      <dd class="break"></dd>
</dl>
</section>
</div>
<div id="llei">
<section id="section-9">
      <h2 id="name-logical-link-endpoint-ident">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-logical-link-endpoint-ident" class="section-name selfRef">Logical Link Endpoint Identifier</a>
      </h2>
<p id="section-9-1">L3DL discovers neighbors on logical links and establishes
    sessions between the two ends of all consenting discovered logical
    links.  A logical link is described by a pair of Logical Link
    Endpoint Identifiers, LLEIs.<a href="#section-9-1" class="pilcrow">¶</a></p>
<p id="section-9-2">An LLEI is a variable length descriptor which could be an ASN, a
    classic RouterID, a catenation of the two, an eight octet ISO System
    Identifier <span>[<a href="#RFC1629" class="xref">RFC1629</a>]</span>, or any other identifier unique
    to a single logical link endpoint in the topology.<a href="#section-9-2" class="pilcrow">¶</a></p>
<p id="section-9-3">An L3DL deployment will choose and define an LLEI which suits its
    needs, simple or complex.  Examples of two extremes follow:<a href="#section-9-3" class="pilcrow">¶</a></p>
<p id="section-9-4">A simplistic view of a link between two devices is two ports,
    identified by unique MAC addresses, carrying a layer-3 protocol
    conversation.  In this case, the MAC addresses might suffice for the
    LLEIs.<a href="#section-9-4" class="pilcrow">¶</a></p>
<p id="section-9-5">Unfortunately, things can get more complex.  Multiple VLANs can
    run between those two MAC addresses.  In practice, many real devices
    use the same MAC address on multiple ports and/or
    sub-interfaces.<a href="#section-9-5" class="pilcrow">¶</a></p>
<p id="section-9-6">Therefore, in the general circumstance, a fully described LLEI
    might be as follows:<a href="#section-9-6" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-9-7">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
+                       System Identifier                       +
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                            ifIndex                            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a href="#section-9-7" class="pilcrow">¶</a>
</div>
<p id="section-9-8">System Identifier, a la <span>[<a href="#RFC1629" class="xref">RFC1629</a>]</span>, is an eight
    octet identifier unique in the entire operational space.  Routers
    and switches usually have internal MAC Addresses which can be padded
    with high order zeros and used if no System ID exists on the device.
    If no unique identifier is burned into a device, the local L3DL
    configuration SHOULD create and assign a unique one, likely by
    configuration.<a href="#section-9-8" class="pilcrow">¶</a></p>
<p id="section-9-9">ifIndex is the SNMP identifier of the (sub-)interface, see <span>[<a href="#RFC1213" class="xref">RFC1213</a>]</span>.  This uniquely identifies the port.<a href="#section-9-9" class="pilcrow">¶</a></p>
<p id="section-9-10">For a layer-3 tagged sub-interface or a VLAN/SVI interface,
    IfIndex is that of the logical sub-interface, so no further
    disambiguation is needed.<a href="#section-9-10" class="pilcrow">¶</a></p>
<p id="section-9-11">L3DL PDUs learned over VLAN-ports may be interpreted by upper
    layer-3 routing protocols as being learned on the corresponding
    layer-3 SVI interface for the VLAN.<a href="#section-9-11" class="pilcrow">¶</a></p>
<p id="section-9-12">LLEIs are big-endian.<a href="#section-9-12" class="pilcrow">¶</a></p>
</section>
</div>
<div id="hello">
<section id="section-10">
      <h2 id="name-hello">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-hello" class="section-name selfRef">HELLO</a>
      </h2>
<p id="section-10-1">The HELLO PDU is unique in that it is encapsulated in a multicast
    Ethernet frame.  It solicits response(s) from other LLEI(s) on the
    link.  See <a href="#dhello" class="xref">Section 18.1</a> for why multicast is used.  The
    destination multicast MAC Addressees to be used MUST be one of the
    following, See Clause 9.2.2 of <span>[<a href="#IEEE802-2014" class="xref">IEEE802-2014</a>]</span>:<a href="#section-10-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-10-2">
        <dt id="section-10-2.1">01-80-C2-00-00-0E:</dt>
        <dd style="margin-left: 1.5em" id="section-10-2.2">Nearest Bridge = Propagation
      constrained to a single physical link; stopped by all types of
      bridges (including MPRs (media converters)).  This SHOULD be used
      when the link is known to be a simple point to point link.<a href="#section-10-2.2" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
<dt id="section-10-2.3">To Be Assigned:</dt>
        <dd style="margin-left: 1.5em" id="section-10-2.4"> When a switch receives a frame with
      a multicast destination MAC it does not recognize, it forwards to
      all ports.  This destination MAC SHOULD be sent when the interface
      is known to be connected to a switch.  See <a href="#ieee" class="xref">Section 23</a>.  This SHOULD be used when the link may be a
      multi-point link.<a href="#section-10-2.4" class="pilcrow">¶</a>
</dd>
      <dd class="break"></dd>
</dl>
<p id="section-10-3">All other L3DL PDUs are encapsulated in unicast frames, as the
    peer's destination MAC address is known after the HELLO
    exchange.<a href="#section-10-3" class="pilcrow">¶</a></p>
<p id="section-10-4">When an interface is turned up on a device, it SHOULD issue a
    HELLO if it is to participate in L3DL sessions.<a href="#section-10-4" class="pilcrow">¶</a></p>
<p id="section-10-5">If a constrained Nearest Bridge destination address has been
    configured for a point-to-point interface, see above, then the HELLO
    SHOULD NOT be repeated once a session has been created by an
    exchange of OPENs.<a href="#section-10-5" class="pilcrow">¶</a></p>
<p id="section-10-6">If the configured destination address is one that is propagated
    by switches, the HELLO SHOULD be repeated at a configured interval,
    with a default of 60 seconds.  This allows discovery by new devices
    which come up on the layer-2 mesh.  In this multi-link scenario, the
    operator should be aware of the trade-off between timer tuning and
    network noise and adjust the inter-HELLO timer accordingly.<a href="#section-10-6" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-10-7">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  PDU Type = 0 |               Payload Length = 0              ~
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
~               |  Sig Type = 0 |      Signature Length = 0     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a href="#section-10-7" class="pilcrow">¶</a>
</div>
<p id="section-10-8">If more than one device responds, one adjacency is formed for
    each unique source LLEI response.  L3DL treats each adjacency as a
    separate logical link.<a href="#section-10-8" class="pilcrow">¶</a></p>
<p id="section-10-9">When a HELLO is received from a source MAC address (plus VID if
    VLAN) with which there is no established L3DL session, the receiver
    SHOULD respond by sending an OPEN PDU to the source MAC address
    (plus VID).  The two devices establish an L3DL session by exchanging
    OPEN PDUs.<a href="#section-10-9" class="pilcrow">¶</a></p>
<p id="section-10-10">To ameliorate possible load spikes during bootstrap or event
    recovery, there SHOULD be a jittered delay between receipt of a
    HELLO and issue of the OPEN.  The default delay range SHOULD be zero
    to five seconds, and MUST be configurable.<a href="#section-10-10" class="pilcrow">¶</a></p>
<p id="section-10-11">If a HELLO is received from a MAC address with which there is an
    established session, the HELLO should be dropped.<a href="#section-10-11" class="pilcrow">¶</a></p>
<p id="section-10-12">The Payload Length is zero as there is no payload.<a href="#section-10-12" class="pilcrow">¶</a></p>
<p id="section-10-13">HELLO PDUs can not be signed as keying material has yet to be
    exchanged.  Hence the signature MUST always be the null type.<a href="#section-10-13" class="pilcrow">¶</a></p>
</section>
</div>
<div id="open">
<section id="section-11">
      <h2 id="name-open">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-open" class="section-name selfRef">OPEN</a>
      </h2>
<p id="section-11-1">Each device has learned the other's MAC Address from the HELLO
    exchange, see <a href="#hello" class="xref">Section 10</a>.  Therefore the OPEN and all
    subsequent PDUs MUST BE unicast, as opposed to the HELLO's multicast
    frame.<a href="#section-11-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-11-2">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  PDU Type = 1 |                 Payload Length                |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|               |                     Nonce                     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|               |  LLEI Length  |            My LLEI            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                               |   AttrCount   |               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|       Attribute List ...      |   Auth Type   |   Key Length  |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|               |                    Key ...                    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                         Serial Number                         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    Sig Type   |        Signature Length       | Signature ... |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a href="#section-11-2" class="pilcrow">¶</a>
</div>
<p id="section-11-3">The Payload Length is the number of octets in all fields of the
    PDU from the Nonce through the Serial Number, not including the
    three final signature fields.<a href="#section-11-3" class="pilcrow">¶</a></p>
<p id="section-11-4">The Nonce enables detection of a duplicate OPEN PDU.  It SHOULD
    be either a random number or a high resolution timestamp.  It is
    needed to prevent session closure due to a repeated OPEN caused by a
    race or a dropped or delayed ACK.<a href="#section-11-4" class="pilcrow">¶</a></p>
<p id="section-11-5">My LLEI is the sender's LLEI, see <a href="#llei" class="xref">Section 9</a>.<a href="#section-11-5" class="pilcrow">¶</a></p>
<p id="section-11-6">AttrCount is the number of attributes in the Attribute List.
    Attributes are single octets the semantics of which are
    operator-defined.<a href="#section-11-6" class="pilcrow">¶</a></p>
<p id="section-11-7">A node may have zero or more operator-defined attributes, e.g.:
    spine, leaf, backbone, route reflector, arabica, ...<a href="#section-11-7" class="pilcrow">¶</a></p>
<p id="section-11-8">Attribute syntax and semantics are local to an operator or
    datacenter; hence there is no global registry.  Nodes exchange
    their attributes only in the OPEN PDU.<a href="#section-11-8" class="pilcrow">¶</a></p>
<p id="section-11-9">Auth Type is the Signature algorithm suite, see <a href="#tlv" class="xref">Section 8</a>.<a href="#section-11-9" class="pilcrow">¶</a></p>
<p id="section-11-10">Key Length is a 16-bit field denoting the length in octets of the
    Key itself, not including the Auth Type or the Key Length.  If the
    Auth Type is zero, then the Key Length MUST also be zero, and there
    MUST BE no Key data.<a href="#section-11-10" class="pilcrow">¶</a></p>
<p id="section-11-11">The Key is specific to the operational environment.  A failure to
    authenticate is a failure to start the L3DL session, an ERROR PDU
    MUST BE sent (Error Code 3), and HELLOs MUST be restarted.<a href="#section-11-11" class="pilcrow">¶</a></p>
<p id="section-11-12">Although delay and jitter in responding with an OPEN were
    specified above, beware of load created by long strings of
    authentication failures and retries.  A configurable failure count
    limit (default 8) SHOULD result in giving up on the connection
    attempt.<a href="#section-11-12" class="pilcrow">¶</a></p>
<p id="section-11-13">The Serial Number is a monotonically increasing 32-bit value
    representing the sender's state at the time of sending the last PDU.
    It may be an integer, a timestamp, etc.  If incrementing the Serial
    Number would cause it to be zero, it should be incremented
    again.<a href="#section-11-13" class="pilcrow">¶</a></p>
<p id="section-11-14">On session restart (new OPEN), a receiver MAY send the last
    received Serial Number to tell the sender to only send data with a
    Serial Number greater (in the <span>[<a href="#RFC1982" class="xref">RFC1982</a>]</span> sense), or
    send a Serial Number of zero to request all data.<a href="#section-11-14" class="pilcrow">¶</a></p>
<p id="section-11-15">The Serial Number supports session resumption in anticipation of
    peers having a very large amount of state they would prefer not to
    re-exchange because of some glitch.  The Serial Number is not
    expected to wrap for a considerable time, e.g. days or weeks.  But
    to address the rare case it does, <span>[<a href="#RFC1982" class="xref">RFC1982</a>]</span> on DNS
    Serial Number Arithmetic should be used as it is in the Transmission
    Sequence Number.<a href="#section-11-15" class="pilcrow">¶</a></p>
<p id="section-11-16">This allows a sender of an OPEN to tell the receiver that the
    sender would like to resume a session and that the receiver only
    needs to send data starting with the PDU with the lowest Serial
    Number greater (in the <span>[<a href="#RFC1982" class="xref">RFC1982</a>]</span> sense) than the one
    sent in the OPEN.  If the sender is not trying to resume a dropped
    session, the Serial Number MUST be zero.<a href="#section-11-16" class="pilcrow">¶</a></p>
<p id="section-11-17">If the receiver of an OPEN PDU with a non-zero Serial Number can
    not resume from the requested point, it should return an ACK with an
    Error Code of 2, Session could not be continued.  The sender of the
    failing OPEN PDU SHOULD then send an OPEN PDU with a Serial Number
    of zero.<a href="#section-11-17" class="pilcrow">¶</a></p>
<p id="section-11-18">The Signature fields are described in <a href="#tlv" class="xref">Section 8</a> and in
    an asymmetric key environment serve as a proof of possession of the
    signing auth data by the sender.<a href="#section-11-18" class="pilcrow">¶</a></p>
<p id="section-11-19">Once two logical link endpoints know each other, and have ACKed
    each other's OPEN PDUs, Layer-2 KEEPALIVEs (see <a href="#keepalive" class="xref">Section 15</a>) MAY be started to ensure Layer-2 liveness and
    keep the session semantics alive.  The timing and acceptable drop of
    KEEPALIVE PDUs are discussed in <a href="#keepalive" class="xref">Section 15</a>.<a href="#section-11-19" class="pilcrow">¶</a></p>
<p id="section-11-20">If a sender of OPEN does not receive an ACK of the OPEN PDU, then
    they MUST resend the same OPEN PDU, with the same Nonce.  Resending
    an unacknowledged OPEN PDU, like other ACKed PDUs, SHOULD use
    exponential back-off, see <span>[<a href="#RFC1122" class="xref">RFC1122</a>]</span>.<a href="#section-11-20" class="pilcrow">¶</a></p>
<p id="section-11-21">If a properly authenticated OPEN arrives at L3DL speaker A with a
    new Nonce from an LLEI, speaker B, with which A believes it already
    has an L3DL session (OPENs have already been exchanged), and the
    Serial Number in the OPEN PDU is non-zero, speaker A SHOULD
    establish a new sending session by sending an OPEN with the Serial
    Number being the same as that of A's last sent and ACKed PDU.  A
    MUST resume sending encapsulations etc. subsequent to the requested
    Sequence Number.  And B MUST retain all previously discovered
    encapsulation and other data received from A.<a href="#section-11-21" class="pilcrow">¶</a></p>
<p id="section-11-22">If a properly authenticated OPEN arrives with a new Nonce from an
    LLEI with which the receiving logical link endpoint believes it
    already has an L3DL session (OPENs have already been exchanged), and
    the Serial Number in the OPEN is zero, then the receiver MUST assume
    that the sending LLEI or entire device has been reset.  All
    Previously discovered encapsulation data MUST NOT be kept and MUST
    BE withdrawn via the BGP-LS API and the recipient MUST respond with
    a new OPEN.<a href="#section-11-22" class="pilcrow">¶</a></p>
</section>
</div>
<div id="ack">
<section id="section-12">
      <h2 id="name-ack">
<a href="#section-12" class="section-number selfRef">12. </a><a href="#name-ack" class="section-name selfRef">ACK</a>
      </h2>
<p id="section-12-1">The ACK PDU acknowledges receipt of a PDU and reports any error
    condition which might have been raised.<a href="#section-12-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-12-2">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  PDU Type = 3 |               Payload Length = 5              ~
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
~               |   ACKed PDU   | EType |       Error Code      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|           Error Hint          |    Sig Type   |Signature Leng.~
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
~               |                 Signature ...                 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a href="#section-12-2" class="pilcrow">¶</a>
</div>
<p id="section-12-3">The ACK acknowledges receipt of an OPEN, Encapsulation, VENDOR
    PDU, etc.<a href="#section-12-3" class="pilcrow">¶</a></p>
<p id="section-12-4">The ACKed PDU is the PDU Type of the PDU being acknowledged,
    e.g., OPEN, one of the Encapsulations, etc.<a href="#section-12-4" class="pilcrow">¶</a></p>
<p id="section-12-5">If there was an error processing the received PDU, then the EType
    is non-zero.  If the EType is zero, Error Code and Error Hint MUST
    also be zero.<a href="#section-12-5" class="pilcrow">¶</a></p>
<p id="section-12-6">A non-zero EType is the receiver's way of telling the PDU's
    sender that the receiver had problems processing the PDU.  The Error
    Code and Error Hint will tell the sender more detail about the
    error.<a href="#section-12-6" class="pilcrow">¶</a></p>
<p id="section-12-7">The decimal value of EType gives a strong hint how the receiver
    sending the ACK believes things should proceed:<a href="#section-12-7" class="pilcrow">¶</a></p>
<ul class="normal ulEmpty">
<li class="normal ulEmpty" id="section-12-8.1">0 - No Error, Error Code and Error Hint MUST be zero<a href="#section-12-8.1" class="pilcrow">¶</a>
</li>
        <li class="normal ulEmpty" id="section-12-8.2">1 - Warning, something not too serious happened, continue<a href="#section-12-8.2" class="pilcrow">¶</a>
</li>
        <li class="normal ulEmpty" id="section-12-8.3">2 - Session should not be continued, try to restart<a href="#section-12-8.3" class="pilcrow">¶</a>
</li>
        <li class="normal ulEmpty" id="section-12-8.4">3 - Restart is hopeless, call the operator<a href="#section-12-8.4" class="pilcrow">¶</a>
</li>
        <li class="normal ulEmpty" id="section-12-8.5">4-15 - Reserved<a href="#section-12-8.5" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-12-9">The Error Codes, noting protocol failures, are listed in <a href="#iana-error" class="xref">Section 22.4</a>.  Someone stuck in the 1990s might think the
    catenation of EType and Error Code as an echo of 0x1zzz, 0x2zzz,
    etc.  They might be right; or not.<a href="#section-12-9" class="pilcrow">¶</a></p>
<p id="section-12-10">The Error Hint, an arbitrary 16 bits, is any additional data the
    sender of the error PDU thinks will help the recipient or the
    debugger with the particular error.<a href="#section-12-10" class="pilcrow">¶</a></p>
<p id="section-12-11">The Signature fields are described in <a href="#tlv" class="xref">Section 8</a>.<a href="#section-12-11" class="pilcrow">¶</a></p>
<div id="retrans">
<section id="section-12.1">
        <h3 id="name-retransmission">
<a href="#section-12.1" class="section-number selfRef">12.1. </a><a href="#name-retransmission" class="section-name selfRef">Retransmission</a>
        </h3>
<p id="section-12.1-1">If a PDU sender expects an ACK, e.g. for an OPEN, an
      Encapsulation, a VENDOR PDU, etc., and does not receive the ACK
      for a configurable time (default one second), and the interface is
      live at layer-2, the sender resends the PDU using exponential
      back-off, see <span>[<a href="#RFC1122" class="xref">RFC1122</a>]</span>.  This cycle MAY be
      repeated a configurable number of times (default three) before it
      is considered a failure.  The session MAY BE considered closed
      in this case of this ACK failure.<a href="#section-12.1-1" class="pilcrow">¶</a></p>
<p id="section-12.1-2">If the link is broken at layer-2, retransmission MAY BE retried
      when the link is restored.<a href="#section-12.1-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="afisafi">
<section id="section-13">
      <h2 id="name-the-encapsulations">
<a href="#section-13" class="section-number selfRef">13. </a><a href="#name-the-encapsulations" class="section-name selfRef">The Encapsulations</a>
      </h2>
<p id="section-13-1">Once the devices know each other's LLEIs, know each other's upper
    layer (L2.5 and L3) identities, have means to ensure link state,
    etc., the L3DL session is considered established, and the devices
    SHOULD exchange L3 interface encapsulations, L3 addresses, and L2.5
    labels.<a href="#section-13-1" class="pilcrow">¶</a></p>
<p id="section-13-2">The Encapsulation types the peers exchange may be IPv4 (<a href="#ipv4" class="xref">Section 13.3</a>), IPv6 (<a href="#ipv6" class="xref">Section 13.4</a>), MPLS IPv4 (<a href="#mpls4" class="xref">Section 13.6</a>), MPLS IPv6 (<a href="#mpls6" class="xref">Section 13.7</a>), and/or
    possibly others not defined here.<a href="#section-13-2" class="pilcrow">¶</a></p>
<p id="section-13-3">The sender of an Encapsulation PDU MUST NOT assume that the peer
    is capable of the same Encapsulation Type.  An ACK (<a href="#ack" class="xref">Section 12</a>) merely acknowledges receipt.  Only if both peers
    have sent the same Encapsulation Type is it safe for Layer-3
    protocols to assume that they are compatible for that type.<a href="#section-13-3" class="pilcrow">¶</a></p>
<p id="section-13-4">A receiver of an encapsulation might recognize an addressing
    conflict, such as both ends of the link trying to use the same
    address.  In this case, the receiver SHOULD respond with an error
    (Error Code 2) ACK.  As there may be other usable addresses or
    encapsulations, this error might log and continue, letting an upper
    layer topology builder deal with what works.<a href="#section-13-4" class="pilcrow">¶</a></p>
<p id="section-13-5">Further, to consider a logical link of a type to formally be
    established so that it may be pushed up to upper layer protocols,
    the addressing for the type must be compatible, e.g. on the same
    IP subnet.<a href="#section-13-5" class="pilcrow">¶</a></p>
<div id="encaps">
<section id="section-13.1">
        <h3 id="name-the-encapsulation-pdu-skele">
<a href="#section-13.1" class="section-number selfRef">13.1. </a><a href="#name-the-encapsulation-pdu-skele" class="section-name selfRef">The Encapsulation PDU Skeleton</a>
        </h3>
<p id="section-13.1-1">The header for all encapsulation PDUs is as follows:<a href="#section-13.1-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-13.1-2">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    PDU Type   |                 Payload Length                ~
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
~               |                     Count                     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                         Serial Number                         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|             Encapsulation List...             |    Sig Type   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        Signature Length       |         Signature ...         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a href="#section-13.1-2" class="pilcrow">¶</a>
</div>
<p id="section-13.1-3">An Encapsulation PDU describes zero or more addresses of the
      encapsulation type.<a href="#section-13.1-3" class="pilcrow">¶</a></p>
<p id="section-13.1-4">The 24-bit Count is the number of Encapsulations in the
      Encapsulation list.<a href="#section-13.1-4" class="pilcrow">¶</a></p>
<p id="section-13.1-5">The Serial Number is a monotonically increasing 32-bit value
      representing the sender's state in time.  It may be an integer, a
      timestamp, etc.  On session restart (new OPEN), a receiver MAY
      send the last received Session Number to tell the sender to only
      send newer data.<a href="#section-13.1-5" class="pilcrow">¶</a></p>
<p id="section-13.1-6">If a sender has multiple links on the same interface, separate
      state: data, ACKs, etc. must be kept for each peer session.<a href="#section-13.1-6" class="pilcrow">¶</a></p>
<p id="section-13.1-7">Over time, multiple Encapsulation PDUs may be sent for an
      interface as configuration changes.<a href="#section-13.1-7" class="pilcrow">¶</a></p>
<p id="section-13.1-8">If the length of an Encapsulation PDU exceeds the Datagram size
      limit on media, the PDU is broken into multiple Datagrams.  See
      <a href="#tlv" class="xref">Section 8</a>.<a href="#section-13.1-8" class="pilcrow">¶</a></p>
<p id="section-13.1-9">The Signature fields are described in <a href="#tlv" class="xref">Section 8</a>.<a href="#section-13.1-9" class="pilcrow">¶</a></p>
<p id="section-13.1-10">The Receiver MUST acknowledge the Encapsulation PDU with a
      Type=3, ACK PDU (<a href="#ack" class="xref">Section 12</a>) with the Encapsulation Type
      being that of the encapsulation being announced, see <a href="#ack" class="xref">Section 12</a>.<a href="#section-13.1-10" class="pilcrow">¶</a></p>
<p id="section-13.1-11">If the Sender does not receive an ACK in a configurable
      interval (default one second), and the interface is live at
      layer-2, they SHOULD retransmit.  After a user configurable number
      of failures (default three), the L3DL session should be considered
      dead and the OPEN process SHOULD be restarted.<a href="#section-13.1-11" class="pilcrow">¶</a></p>
<p id="section-13.1-12">If the link is broken at layer-2, retransmission MAY BE retried
      if data have not changed in the interim.<a href="#section-13.1-12" class="pilcrow">¶</a></p>
</section>
</div>
<div id="eflags">
<section id="section-13.2">
        <h3 id="name-encapsulaion-flags">
<a href="#section-13.2" class="section-number selfRef">13.2. </a><a href="#name-encapsulaion-flags" class="section-name selfRef">Encapsulaion Flags</a>
        </h3>
<p id="section-13.2-1">The Encapsulation Flags are a sequence of bit fields as
     follows:<a href="#section-13.2-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-13.2-2">
<pre>
 0           1            2            3            4  ...       7
+------------+------------+------------+------------+------------+
|  Ann/With  |   Primary  | Under/Over |  Loopback  | Reserved ..|
+------------+------------+------------+------------+------------+
</pre><a href="#section-13.2-2" class="pilcrow">¶</a>
</div>
<p id="section-13.2-3">Each encapsulation in an Encapsulation PDU of Type T may
      announce new and/or withdraw old encapsulations of Type T.  It
      indicates this with the Ann/With Encapsulation Flag, Announce ==
      1, Withdraw == 0.<a href="#section-13.2-3" class="pilcrow">¶</a></p>
<p id="section-13.2-4">Each Encapsulation interface address in an Encapsulation PDU is
      either a new encapsulation be announced (Ann/With == 1) (yes, a la
      BGP) or requests one be withdrawn (Ann/With == 0).  Adding an
      encapsulation which already exists SHOULD raise an
      Announce/Withdraw Error (see <a href="#iana-error" class="xref">Section 22.4</a>); the EType
      SHOULD be 2, suggesting a session restart (see <a href="#ack" class="xref">Section 12</a> so all encapsulations will be resent.<a href="#section-13.2-4" class="pilcrow">¶</a></p>
<p id="section-13.2-5">If an LLEI has multiple addresses for an encapsulation type,
      one and only one address MAY be marked as primary (Primary Flag ==
      1) for that Encapsulation Type.<a href="#section-13.2-5" class="pilcrow">¶</a></p>
<p id="section-13.2-6">An Encapsulation interface address in an Encapsulation PDU MAY
      be marked as a loopback, in which case the Loopback bit is set.
      Loopback addresses are generally not seen directly on an external
      interface.  One or more loopback addresses MAY be exposed by
      configuration on one or more L3DL speaking external interfaces,
      e.g. for iBGP peering.  They SHOULD be marked as such, Loopback
      Flag == 1.<a href="#section-13.2-6" class="pilcrow">¶</a></p>
<p id="section-13.2-7">Each Encapsulation interface address in an Encapsulation PDU is
      that of the direct 'underlay interface (Under/Over == 1), or an
      'overlay' address (Under/Over == 0), likely that of a VM or
      container guest bridged or configured on to the interface already
      having an underlay address.<a href="#section-13.2-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="ipv4">
<section id="section-13.3">
        <h3 id="name-ipv4-encapsulation">
<a href="#section-13.3" class="section-number selfRef">13.3. </a><a href="#name-ipv4-encapsulation" class="section-name selfRef">IPv4 Encapsulation</a>
        </h3>
<p id="section-13.3-1">The IPv4 Encapsulation describes a device's ability to exchange
      IPv4 packets on one or more subnets.  It does so by stating the
      interface's addresses and the corresponding prefix lengths.<a href="#section-13.3-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-13.3-2">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  PDU Type = 4 |                 Payload Length                ~
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
~               |                     Count                     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                         Serial Number                         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Encaps Flags  |                  IPv4 Address                 ~
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
~               |   PrefixLen   |    more ...   |    Sig Type   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        Signature Length       |         Signature ...         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a href="#section-13.3-2" class="pilcrow">¶</a>
</div>
<p id="section-13.3-3">The 24-bit Count is the sum of the number of IPv4
      Encapsulations being announced and/or withdrawn.<a href="#section-13.3-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="ipv6">
<section id="section-13.4">
        <h3 id="name-ipv6-encapsulation">
<a href="#section-13.4" class="section-number selfRef">13.4. </a><a href="#name-ipv6-encapsulation" class="section-name selfRef">IPv6 Encapsulation</a>
        </h3>
<p id="section-13.4-1">The IPv6 Encapsulation describes a logical link's ability to
      exchange IPv6 packets on one or more subnets.  It does so by
      stating the interface's addresses and the corresponding prefix
      lengths.<a href="#section-13.4-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-13.4-2">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  PDU Type = 5 |                 Payload Length                ~
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
~               |                     Count                     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                         Serial Number                         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Encaps Flags  |                                               |
+-+-+-+-+-+-+-+-+                                               +
|                                                               |
+                                                               +
|                                                               |
+                                                               +
|                          IPv6 Address                         |
+               +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|               |   PrefixLen   |    more ...   |    Sig Type   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        Signature Length       |         Signature ...         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a href="#section-13.4-2" class="pilcrow">¶</a>
</div>
<p id="section-13.4-3">The 24-bit Count is the sum of the number of IPv6
      Encapsulations being announced and/or withdrawn.<a href="#section-13.4-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="mplslist">
<section id="section-13.5">
        <h3 id="name-mpls-label-list">
<a href="#section-13.5" class="section-number selfRef">13.5. </a><a href="#name-mpls-label-list" class="section-name selfRef">MPLS Label List</a>
        </h3>
<p id="section-13.5-1">As an MPLS enabled interface may have a label stack, see <span>[<a href="#RFC3032" class="xref">RFC3032</a>]</span>, a variable length list of labels is needed.
      These are the labels the sender will accept for the prefix to
      which the list is attached.<a href="#section-13.5-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-13.5-2">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  Label Count  |                 Label                 | Exp |S|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                 Label                 | Exp |S|    more ...   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a href="#section-13.5-2" class="pilcrow">¶</a>
</div>
<p id="section-13.5-3">A Label Count of zero is an implicit withdraw of all labels for
      that prefix on that interface.<a href="#section-13.5-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="mpls4">
<section id="section-13.6">
        <h3 id="name-mpls-ipv4-encapsulation">
<a href="#section-13.6" class="section-number selfRef">13.6. </a><a href="#name-mpls-ipv4-encapsulation" class="section-name selfRef">MPLS IPv4 Encapsulation</a>
        </h3>
<p id="section-13.6-1">The MPLS IPv4 Encapsulation describes a logical link's ability
      to exchange labeled IPv4 packets on one or more subnets.  It does
      so by stating the interface's addresses the corresponding prefix
      lengths, and the corresponding labels which will be accepted for
      each address.<a href="#section-13.6-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-13.6-2">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  PDU Type = 6 |                 Payload Length                ~
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
~               |                     Count                     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                         Serial Number                         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Encaps Flags  |      MPLS Label List ...      |               ~
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
~                  IPv4 Address                 |   PrefixLen   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    more ...   |    Sig Type   |        Signature Length       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                           Signature                           |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a href="#section-13.6-2" class="pilcrow">¶</a>
</div>
<p id="section-13.6-3">The 24-bit Count is the sum of the number of MPLSv4
      Encapsulation being announced and/or withdrawn.<a href="#section-13.6-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="mpls6">
<section id="section-13.7">
        <h3 id="name-mpls-ipv6-encapsulation">
<a href="#section-13.7" class="section-number selfRef">13.7. </a><a href="#name-mpls-ipv6-encapsulation" class="section-name selfRef">MPLS IPv6 Encapsulation</a>
        </h3>
<p id="section-13.7-1">The MPLS IPv6 Encapsulation describes a logical link's ability
      to exchange labeled IPv6 packets on one or more subnets.  It does
      so by stating the interface's addresses, the corresponding prefix
      lengths, and the corresponding labels which will be accepted for
      each address.<a href="#section-13.7-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-13.7-2">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  PDU Type = 7 |                 Payload Length                ~
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
~               |                     Count                     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                         Serial Number                         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Encaps Flags  |      MPLS Label List ...      |               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+               +
|                                                               |
+                                                               +
|                                                               |
+                                                               +
|                          IPv6 Address                         |
+                                               +-+-+-+-+-+-+-+-+
|                                               |   Prefix Len  |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    more ...   |    Sig Type   |        Signature Length       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                         Signature ...                         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a href="#section-13.7-2" class="pilcrow">¶</a>
</div>
<p id="section-13.7-3">The 24-bit Count is the sum of the number of MPLSv6
      Encapsulations being announced and/or withdrawn.<a href="#section-13.7-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="vendor">
<section id="section-14">
      <h2 id="name-vendor-vendor-extensions">
<a href="#section-14" class="section-number selfRef">14. </a><a href="#name-vendor-vendor-extensions" class="section-name selfRef">VENDOR - Vendor Extensions</a>
      </h2>
<div class="alignLeft art-text artwork" id="section-14-1">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| PDU Type = 255|                 Payload Length                ~
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
~               |                 Serial Number                 ~
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
~               |               Enterprise Number               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    Ent Type   |              Enterprise Data ...              ~
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
~               |    Sig Type   |        Signature Length       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                         Signature ...                         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a href="#section-14-1" class="pilcrow">¶</a>
</div>
<p id="section-14-2">Vendors or enterprises may define TLVs beyond the scope of L3DL
    standards.  This is done using a Private Enterprise Number <span>[<a href="#IANA-PEN" class="xref">IANA-PEN</a>]</span> followed by Enterprise Data in a format
    defined for that Enterprise Number and Ent Type.<a href="#section-14-2" class="pilcrow">¶</a></p>
<p id="section-14-3">Ent Type allows a VENDOR PDU to be sub-typed in the event that
    the vendor/enterprise needs multiple PDU types.<a href="#section-14-3" class="pilcrow">¶</a></p>
<p id="section-14-4">As with Encapsulation PDUs, a receiver of a VENDOR PDU MUST
    respond with an ACK or an ERROR PDU.  Similarly, a VENDOR PDU MUST
    only be sent over an open session.<a href="#section-14-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="keepalive">
<section id="section-15">
      <h2 id="name-keepalive-layer-2-liveness">
<a href="#section-15" class="section-number selfRef">15. </a><a href="#name-keepalive-layer-2-liveness" class="section-name selfRef">KEEPALIVE - Layer-2 Liveness</a>
      </h2>
<div class="alignLeft art-text artwork" id="section-15-1">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  PDU Type = 2 |               Payload Length = 0              ~
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
~               |  Sig Type = 0 |      Signature Length = 0     |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre><a href="#section-15-1" class="pilcrow">¶</a>
</div>
<p id="section-15-2">L3DL devices SHOULD beacon frequent Layer-2 KEEPALIVE PDUs to
    ensure session continuity.  The inter-KEEPALIVE interval is
    configurable, with a default of ten seconds.  A receiver may choose
    to ignore KEEPALIVE PDUs.<a href="#section-15-2" class="pilcrow">¶</a></p>
<p id="section-15-3">An operational deployment MUST BE configured whether to use
    KEEPALIVEs or not, either globally, or as finely as to per-link
    granularity.  Disagreement MAY result in repeated session failure
    and reestablishment.<a href="#section-15-3" class="pilcrow">¶</a></p>
<p id="section-15-4">KEEPALIVEs SHOULD be beaconed at a configured frequency.  One per
    second is the default.  Layer-3 liveness, such as BFD, may be more
    (or less) aggressive.<a href="#section-15-4" class="pilcrow">¶</a></p>
<p id="section-15-5">When a sender transmits a PDU which is not a KEEPALIVE, the
    sender SHOULD reset the KEEPALIVE timer.  I.e. sending any PDU acts
    as a keepalive.  Once the last fragment has been sent, the
    KEEPALIVE timer SHOULD be restarted.  Do not wait for the ACK.<a href="#section-15-5" class="pilcrow">¶</a></p>
<p id="section-15-6">If a KEEPALIVE or other PDUs have not been received from a peer
    with which a receiver has an open session for a configurable time
    (default 30 seconds), the link SHOULD be presumed down.  The devices
    MAY keep configuration state and restore it without retransmission
    if no data have changed.  Otherwise, a new session SHOULD be
    established and new Encapsulation PDUs exchanged.<a href="#section-15-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="l3liveness">
<section id="section-16">
      <h2 id="name-layers-25-and-3-liveness">
<a href="#section-16" class="section-number selfRef">16. </a><a href="#name-layers-25-and-3-liveness" class="section-name selfRef">Layers-2.5 and 3 Liveness</a>
      </h2>
<p id="section-16-1">Layer-2 liveness may be continuously tested by KEEPALIVE PDUs,
    see <a href="#keepalive" class="xref">Section 15</a>.  As layer-2.5 or layer-3
    connectivity could still break, liveness above layer-2 MAY be
    frequently tested using BFD (<span>[<a href="#RFC5880" class="xref">RFC5880</a>]</span>) or a similar
    technique.<a href="#section-16-1" class="pilcrow">¶</a></p>
<p id="section-16-2">This protocol assumes that one or more Encapsulation addresses
    may be used to ping, run BFD, or whatever the operator
    configures.<a href="#section-16-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="northsouth">
<section id="section-17">
      <h2 id="name-the-north-south-protocol">
<a href="#section-17" class="section-number selfRef">17. </a><a href="#name-the-north-south-protocol" class="section-name selfRef">The North/South Protocol</a>
      </h2>
<p id="section-17-1">Thus far, a one-hop point-to-point logical link discovery
    protocol has been defined.<a href="#section-17-1" class="pilcrow">¶</a></p>
<p id="section-17-2">The devices know their unique LLEIs and know the unique peer
    LLEIs and Encapsulations on each logical link interface.<a href="#section-17-2" class="pilcrow">¶</a></p>
<p id="section-17-3">Full topology discovery is not appropriate at the L3DL layer, so
    Dijkstra a la IS-IS etc. is assumed to be done by higher level
    protocols such as BGP-SPF.<a href="#section-17-3" class="pilcrow">¶</a></p>
<p id="section-17-4">Therefore the LLEIs, link Encapsulations, and state changes are
    pushed North via a small subset of the BGP-LS API.  The upper layer
    routing protocol(s), e.g. BGP-SPF, learn and maintain the topology,
    run Dijkstra, and build the routing database(s).<a href="#section-17-4" class="pilcrow">¶</a></p>
<p id="section-17-5">For example, if a neighbor's IPv4 Encapsulation address changes,
    the devices seeing the change push that change Northbound.<a href="#section-17-5" class="pilcrow">¶</a></p>
<div id="ls">
<section id="section-17.1">
        <h3 id="name-use-bgp-ls-as-much-as-possi">
<a href="#section-17.1" class="section-number selfRef">17.1. </a><a href="#name-use-bgp-ls-as-much-as-possi" class="section-name selfRef">Use BGP-LS as Much as Possible</a>
        </h3>
<p id="section-17.1-1">BGP-LS <span>[<a href="#RFC7752" class="xref">RFC7752</a>]</span> defines BGP-like Datagrams
      describing logical link state (links, nodes, link prefixes, and
      many other things), and a new BGP path attribute providing
      Northbound transport, all of which can be ingested by upper layer
      protocols such as BGP-SPF; see Section 4 of <span>[<a href="#I-D.ietf-lsvr-bgp-spf" class="xref">I-D.ietf-lsvr-bgp-spf</a>]</span>.<a href="#section-17.1-1" class="pilcrow">¶</a></p>
<p id="section-17.1-2">For IPv4 links, TLVs 259 and 260 are used.  For IPv6 links,
      TLVs 261 and 262.  If there are multiple addresses on a link,
      multiple TLV pairs are pushed North, having the same ID pairs.<a href="#section-17.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="ls-ext">
<section id="section-17.2">
        <h3 id="name-extensions-to-bgp-ls">
<a href="#section-17.2" class="section-number selfRef">17.2. </a><a href="#name-extensions-to-bgp-ls" class="section-name selfRef">Extensions to BGP-LS</a>
        </h3>
<p id="section-17.2-1">The Northbound protocol needs a few minor extensions to BGP-LS.
      Luckily, others have needed the same extensions.<a href="#section-17.2-1" class="pilcrow">¶</a></p>
<p id="section-17.2-2">Similarly to BGP-SPF, the BGP protocol is used in the
      Protocol-ID field specified in table 1 of <span>[<a href="#I-D.ietf-idr-bgpls-segment-routing-epe" class="xref">I-D.ietf-idr-bgpls-segment-routing-epe</a>]</span>.  The local and
      remote node descriptors for all NLRI are the IDs described in
      <a href="#open" class="xref">Section 11</a>.  This is equivalent to an adjacency SID or
      a node SID if the address is a loopback address.<a href="#section-17.2-2" class="pilcrow">¶</a></p>
<p id="section-17.2-3">Label Sub-TLVs from <span>[<a href="#I-D.ietf-idr-bgp-ls-segment-routing-ext" class="xref">I-D.ietf-idr-bgp-ls-segment-routing-ext</a>]</span> Section 2.1.1,
      are used to associate one or more MPLS Labels with a link.<a href="#section-17.2-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="discuss">
<section id="section-18">
      <h2 id="name-discussion">
<a href="#section-18" class="section-number selfRef">18. </a><a href="#name-discussion" class="section-name selfRef">Discussion</a>
      </h2>
<p id="section-18-1">This section explores some trade-offs taken and some
    considerations.<a href="#section-18-1" class="pilcrow">¶</a></p>
<div id="dhello">
<section id="section-18.1">
        <h3 id="name-hello-discussion">
<a href="#section-18.1" class="section-number selfRef">18.1. </a><a href="#name-hello-discussion" class="section-name selfRef">HELLO Discussion</a>
        </h3>
<p id="section-18.1-1">A device with multiple Layer-2 interfaces, traditionally called
      a switch, may be used to forward frames and therefore packets from
      multiple devices to one logical interface (LLEI), I, on an L3DL
      speaking device.  Interface I could discover a peer J across the
      switch.  Later, a prospective peer K could come up across the
      switch.  If I was not still sending and listening for HELLOs, the
      potential peering with K could not be discovered.  Therefore, on
      multi-link interfaces, L3DL MUST continue to send HELLOs as long
      as they are turned up.<a href="#section-18.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="dkeepalive">
<section id="section-18.2">
        <h3 id="name-hello-versus-keepalive">
<a href="#section-18.2" class="section-number selfRef">18.2. </a><a href="#name-hello-versus-keepalive" class="section-name selfRef">HELLO versus KEEPALIVE</a>
        </h3>
<p id="section-18.2-1">Both HELLO and KEEPALIVE are periodic.  KEEPALIVE might be
      eliminated in favor of keeping only HELLOs.  But KEEPALIVEs are
      unicast, and thus less noisy on the network, especially if HELLO
      is configured to transit layer-2-only switches, see <a href="#dhello" class="xref">Section 18.1</a>.<a href="#section-18.2-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="vlans">
<section id="section-19">
      <h2 id="name-vlans-svis-sub-interfaces">
<a href="#section-19" class="section-number selfRef">19. </a><a href="#name-vlans-svis-sub-interfaces" class="section-name selfRef">VLANs/SVIs/Sub-interfaces</a>
      </h2>
<p id="section-19-1">One can think of the protocol as an instance (i.e. state machine)
    which runs on each logical link of a device.<a href="#section-19-1" class="pilcrow">¶</a></p>
<p id="section-19-2">As the upper routing layer must view VLAN topologies as separate
    graphs, L3DL treats VLAN ports as separate links.<a href="#section-19-2" class="pilcrow">¶</a></p>
<p id="section-19-3">L3DL PDUs learned over VLAN-ports may be interpreted by upper
    layer-3 routing protocols as being learned on the corresponding
    layer-3 SVI interface for the VLAN.<a href="#section-19-3" class="pilcrow">¶</a></p>
<p id="section-19-4">As Sub-Interfaces each have their own LLIEs, they act as separate
    interfaces, forming their own links.<a href="#section-19-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="impl">
<section id="section-20">
      <h2 id="name-implementation-consideratio">
<a href="#section-20" class="section-number selfRef">20. </a><a href="#name-implementation-consideratio" class="section-name selfRef">Implementation Considerations</a>
      </h2>
<p id="section-20-1">An implementation SHOULD provide the ability to configure each
    logical interface as L3DL speaking or not.<a href="#section-20-1" class="pilcrow">¶</a></p>
<p id="section-20-2">An implementation SHOULD provide the ability to configure whether
    HELLOs on an L3DL enabled interface send Nearest Bridge or the MAC
    which is propagated by switches from that interface; see <a href="#hello" class="xref">Section 10</a>.<a href="#section-20-2" class="pilcrow">¶</a></p>
<p id="section-20-3">An implementation SHOULD provide the ability to distribute one or
    more loopback addresses or interfaces into L3DL on an external L3DL
    speaking interface.<a href="#section-20-3" class="pilcrow">¶</a></p>
<p id="section-20-4">An implementation SHOULD provide the ability to distribute one or
    more overlay and/or underlay addresses or interfaces into L3DL on an
    external L3DL speaking interface.<a href="#section-20-4" class="pilcrow">¶</a></p>
<p id="section-20-5">An implementation SHOULD provide the ability to configure one of
    the addresses of an encapsulation as primary on an L3DL speaking
    interface.  If there is only one address for a particular
    encapsulation, the implementation MAY mark it as primary by
    default.<a href="#section-20-5" class="pilcrow">¶</a></p>
<p id="section-20-6">An implementation MAY allow optional configuration which updates
    the local forwarding table with overlay and underlay data both
    learned from L3DL peers and configured locally.<a href="#section-20-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="security">
<section id="section-21">
      <h2 id="name-security-considerations">
<a href="#section-21" class="section-number selfRef">21. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-21-1">The protocol as is MUST NOT be used outside a datacenter or
    similarly closed environment without authentication and
    authorization mechanisms such as <span>[<a href="#I-D.ymbk-lsvr-l3dl-signing" class="xref">I-D.ymbk-lsvr-l3dl-signing</a>]</span>.<a href="#section-21-1" class="pilcrow">¶</a></p>
<p id="section-21-2">Many MDC operators have a strange belief that physical walls and
    firewalls provide sufficient security.  This is not credible.  All
    MDC protocols need to be examined for exposure and attack surface.
    In the case of L3DL, Authentication and Integrity as provided in
    <span>[<a href="#I-D.ymbk-lsvr-l3dl-signing" class="xref">I-D.ymbk-lsvr-l3dl-signing</a>]</span> is strongly recommended.<a href="#section-21-2" class="pilcrow">¶</a></p>
<p id="section-21-3">It is generally unwise to assume that on the wire Layer-2 is
    secure.  Strange/unauthorized devices may plug into a port.
    Mis-wiring is very common in datacenter installations.  A poisoned
    laptop might be plugged into a device's port, form malicious
    sessions, etc. to divert, intercept, or drop traffic.<a href="#section-21-3" class="pilcrow">¶</a></p>
<p id="section-21-4">Similarly, malicious nodes/devices could mis-announce
    addressing.<a href="#section-21-4" class="pilcrow">¶</a></p>
<p id="section-21-5">If OPENs are not being authenticated, an attacker could forge an
    OPEN for an existing session and cause the session to be reset.<a href="#section-21-5" class="pilcrow">¶</a></p>
<p id="section-21-6">For these reasons, the OPEN PDU's authentication data exchange
    SHOULD be used.<a href="#section-21-6" class="pilcrow">¶</a></p>
<p id="section-21-7">If the KEEPALIVE PDU is not signed (as suggested in <a href="#tlv" class="xref">Section 8</a>) to save computation, then a MITM could fake a
    session being alive.<a href="#section-21-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="iana">
<section id="section-22">
      <h2 id="name-iana-considerations">
<a href="#section-22" class="section-number selfRef">22. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<div id="iana-types">
<section id="section-22.1">
        <h3 id="name-pdu-types">
<a href="#section-22.1" class="section-number selfRef">22.1. </a><a href="#name-pdu-types" class="section-name selfRef">PDU Types</a>
        </h3>
<p id="section-22.1-1">This document requests the IANA create a registry for L3DL PDU
      Type, which may range from 0 to 255.  The name of the registry
      should be L3DL-PDU-Type.  The policy for adding to the registry is
      RFC Required per <span>[<a href="#RFC5226" class="xref">RFC5226</a>]</span>, either standards track or
      experimental.  The initial entries should be the following:<a href="#section-22.1-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-22.1-2">
<pre>
          PDU
          Code      PDU Name
          ----      -------------------
            0       HELLO
            1       OPEN
            2       KEEPALIVE
            3       ACK
            4       IPv4 Announcement
            5       IPv6 Announcement
            6       MPLS IPv4 Announcement
            7       MPLS IPv6 Announcement
            8-254   Reserved
            255     VENDOR
</pre><a href="#section-22.1-2" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="iana-sigtype">
<section id="section-22.2">
        <h3 id="name-signature-type">
<a href="#section-22.2" class="section-number selfRef">22.2. </a><a href="#name-signature-type" class="section-name selfRef">Signature Type</a>
        </h3>
<p id="section-22.2-1">This document requests the IANA create a registry for L3DL
      Signature Type, AKA Sig Type, which may range from 0 to 255.  The
      name of the registry should be L3DL-Signature-Type.  The policy for
      adding to the registry is RFC Required per <span>[<a href="#RFC5226" class="xref">RFC5226</a>]</span>,
      either standards track or experimental.  The initial entries should
      be the following:<a href="#section-22.2-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-22.2-2">
<pre>
          Number      Name
          ------      -------------------
              0       Null
              1-255   Reserved
</pre><a href="#section-22.2-2" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="iana-flags">
<section id="section-22.3">
        <h3 id="name-flag-bits">
<a href="#section-22.3" class="section-number selfRef">22.3. </a><a href="#name-flag-bits" class="section-name selfRef">Flag Bits</a>
        </h3>
<p id="section-22.3-1">This document requests the IANA create a registry for L3DL PL
      Flag Bits, which may range from 0 to 7.  The name of the registry
      should be L3DL-PL-Flag-Bits.  The policy for adding to the registry is
      RFC Required per <span>[<a href="#RFC5226" class="xref">RFC5226</a>]</span>, either standards track or
      experimental.  The initial entries should be the following:<a href="#section-22.3-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-22.3-2">
<pre>
          Bit     Bit Name
          ----    -------------------
           0      Announce/Withdraw (ann == 0)
           1      Primary
           2      Underlay/Overlay (under == 0)
           3      Loopback
           4-7    Reserved
</pre><a href="#section-22.3-2" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="iana-error">
<section id="section-22.4">
        <h3 id="name-error-codes">
<a href="#section-22.4" class="section-number selfRef">22.4. </a><a href="#name-error-codes" class="section-name selfRef">Error Codes</a>
        </h3>
<p id="section-22.4-1">This document requests the IANA create a registry for L3DL Error
      Codes, a 16 bit integer.  The name of the registry should be
      L3DL-Error-Codes.  The policy for adding to the registry is RFC
      Required per <span>[<a href="#RFC5226" class="xref">RFC5226</a>]</span>, either standards track or
      experimental.  The initial entries should be the following:<a href="#section-22.4-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-22.4-2">
<pre>
          Error
          Code    Error Name
          ----    -------------------
            0     No Error
            1     Checksum Error
            2     Logical Link Addressing Conflict
            3     Authorization Failure
            4     Announce/Withdraw Error
</pre><a href="#section-22.4-2" class="pilcrow">¶</a>
</div>
</section>
</div>
</section>
</div>
<div id="ieee">
<section id="section-23">
      <h2 id="name-ieee-considerations">
<a href="#section-23" class="section-number selfRef">23. </a><a href="#name-ieee-considerations" class="section-name selfRef">IEEE Considerations</a>
      </h2>
<p id="section-23-1">This document requires a new EtherType.<a href="#section-23-1" class="pilcrow">¶</a></p>
<p id="section-23-2">This document requires a new multicast MAC address that will be
    broadcast through a switch.<a href="#section-23-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="acks">
<section id="section-24">
      <h2 id="name-acknowledgments">
<a href="#section-24" class="section-number selfRef">24. </a><a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="section-24-1">The authors thank Cristel Pelsser for multiple reviews, Harsha
    Kovuru for comments during implementation, Jeff Haas for review and
    comments, Joerg Ott for an early but deep transport review, Joe
    Clarke for a useful review, John Scudder for deeply serious review
    and comments, Larry Kreeger for a lot of layer-2 clue, Martijn
    Schmidt for his contribution, Nalinaksh Pai for transport
    discussions, Neeraj Malhotra for review, Paul Congdon for Ethernet
    hints, Russ Housley for checksum discussion and sBox, and Steve
    Bellovin for checksum advice.<a href="#section-24-1" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-25">
      <h2 id="name-references">
<a href="#section-25" class="section-number selfRef">25. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-25.1">
        <h3 id="name-normative-references">
<a href="#section-25.1" class="section-number selfRef">25.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="I-D.ietf-idr-bgp-ls-segment-routing-ext">[I-D.ietf-idr-bgp-ls-segment-routing-ext]</dt>
        <dd>
<span class="refAuthor">Previdi, S.</span>, <span class="refAuthor">Talaulikar, K.</span>, <span class="refAuthor">Filsfils, C.</span>, <span class="refAuthor">Gredler, H.</span>, and <span class="refAuthor">M. Chen</span>, <span class="refTitle">"Border Gateway Protocol - Link State (BGP-LS) Extensions for Segment Routing"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-idr-bgp-ls-segment-routing-ext-18</span>, <time datetime="2021-04-15" class="refDate">15 April 2021</time>, <span>&lt;<a href="https://www.ietf.org/archive/id/draft-ietf-idr-bgp-ls-segment-routing-ext-18.txt">https://www.ietf.org/archive/id/draft-ietf-idr-bgp-ls-segment-routing-ext-18.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-idr-bgpls-segment-routing-epe">[I-D.ietf-idr-bgpls-segment-routing-epe]</dt>
        <dd>
<span class="refAuthor">Previdi, S.</span>, <span class="refAuthor">Talaulikar, K.</span>, <span class="refAuthor">Filsfils, C.</span>, <span class="refAuthor">Patel, K.</span>, <span class="refAuthor">Ray, S.</span>, and <span class="refAuthor">J. Dong</span>, <span class="refTitle">"Border Gateway Protocol - Link State (BGP-LS) Extensions for Segment Routing BGP Egress Peer Engineering"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-idr-bgpls-segment-routing-epe-19</span>, <time datetime="2019-05-16" class="refDate">16 May 2019</time>, <span>&lt;<a href="https://www.ietf.org/archive/id/draft-ietf-idr-bgpls-segment-routing-epe-19.txt">https://www.ietf.org/archive/id/draft-ietf-idr-bgpls-segment-routing-epe-19.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-lsvr-bgp-spf">[I-D.ietf-lsvr-bgp-spf]</dt>
        <dd>
<span class="refAuthor">Patel, K.</span>, <span class="refAuthor">Lindem, A.</span>, <span class="refAuthor">Zandi, S.</span>, and <span class="refAuthor">W. Henderickx</span>, <span class="refTitle">"BGP Link-State Shortest Path First (SPF) Routing"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-lsvr-bgp-spf-15</span>, <time datetime="2021-07-01" class="refDate">1 July 2021</time>, <span>&lt;<a href="https://www.ietf.org/archive/id/draft-ietf-lsvr-bgp-spf-15.txt">https://www.ietf.org/archive/id/draft-ietf-lsvr-bgp-spf-15.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ymbk-lsvr-l3dl-signing">[I-D.ymbk-lsvr-l3dl-signing]</dt>
        <dd>
<span class="refAuthor">Bush, R.</span> and <span class="refAuthor">R. Austein</span>, <span class="refTitle">"Layer 3 Discovery and Liveness Signing"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ymbk-lsvr-l3dl-signing-01</span>, <time datetime="2020-05-06" class="refDate">6 May 2020</time>, <span>&lt;<a href="https://www.ietf.org/archive/id/draft-ymbk-lsvr-l3dl-signing-01.txt">https://www.ietf.org/archive/id/draft-ymbk-lsvr-l3dl-signing-01.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="IANA-PEN">[IANA-PEN]</dt>
        <dd>
<span class="refTitle">"IANA Private Enterprise Numbers"</span>, <span>&lt;<a href="https://www.iana.org/assignments/enterprise-numbers/enterprise-numbers">https://www.iana.org/assignments/enterprise-numbers/enterprise-numbers</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="IEEE.802_2001">[IEEE.802_2001]</dt>
        <dd>
<span class="refAuthor">IEEE</span>, <span class="refTitle">"IEEE Standard for Local and Metropolitan Area Networks: Overview and Architecture"</span>, <span class="seriesInfo">IEEE 802-2001</span>, <span class="seriesInfo">DOI 10.1109/ieeestd.2002.93395</span>, <time datetime="2002-07-27" class="refDate">27 July 2002</time>, <span>&lt;<a href="http://ieeexplore.ieee.org/servlet/opac?punumber=7732">http://ieeexplore.ieee.org/servlet/opac?punumber=7732</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="IEEE802-2014">[IEEE802-2014]</dt>
        <dd>
<span class="refAuthor">Institute of Electrical and Electronics Engineers</span>, <span class="refTitle">"Local and Metropolitan Area Networks: Overview and Architecture"</span>, <span class="seriesInfo">IEEE Std 802-2014</span>, <time datetime="2014" class="refDate">2014</time>. </dd>
<dd class="break"></dd>
<dt id="RFC1213">[RFC1213]</dt>
        <dd>
<span class="refAuthor">McCloghrie, K.</span> and <span class="refAuthor">M. Rose</span>, <span class="refTitle">"Management Information Base for Network Management of TCP/IP-based internets: MIB-II"</span>, <span class="seriesInfo">STD 17</span>, <span class="seriesInfo">RFC 1213</span>, <span class="seriesInfo">DOI 10.17487/RFC1213</span>, <time datetime="1991-03" class="refDate">March 1991</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc1213">https://www.rfc-editor.org/info/rfc1213</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC1629">[RFC1629]</dt>
        <dd>
<span class="refAuthor">Colella, R.</span>, <span class="refAuthor">Callon, R.</span>, <span class="refAuthor">Gardner, E.</span>, and <span class="refAuthor">Y. Rekhter</span>, <span class="refTitle">"Guidelines for OSI NSAP Allocation in the Internet"</span>, <span class="seriesInfo">RFC 1629</span>, <span class="seriesInfo">DOI 10.17487/RFC1629</span>, <time datetime="1994-05" class="refDate">May 1994</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc1629">https://www.rfc-editor.org/info/rfc1629</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3032">[RFC3032]</dt>
        <dd>
<span class="refAuthor">Rosen, E.</span>, <span class="refAuthor">Tappan, D.</span>, <span class="refAuthor">Fedorkow, G.</span>, <span class="refAuthor">Rekhter, Y.</span>, <span class="refAuthor">Farinacci, D.</span>, <span class="refAuthor">Li, T.</span>, and <span class="refAuthor">A. Conta</span>, <span class="refTitle">"MPLS Label Stack Encoding"</span>, <span class="seriesInfo">RFC 3032</span>, <span class="seriesInfo">DOI 10.17487/RFC3032</span>, <time datetime="2001-01" class="refDate">January 2001</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3032">https://www.rfc-editor.org/info/rfc3032</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4271">[RFC4271]</dt>
        <dd>
<span class="refAuthor">Rekhter, Y., Ed.</span>, <span class="refAuthor">Li, T., Ed.</span>, and <span class="refAuthor">S. Hares, Ed.</span>, <span class="refTitle">"A Border Gateway Protocol 4 (BGP-4)"</span>, <span class="seriesInfo">RFC 4271</span>, <span class="seriesInfo">DOI 10.17487/RFC4271</span>, <time datetime="2006-01" class="refDate">January 2006</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4271">https://www.rfc-editor.org/info/rfc4271</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5226">[RFC5226]</dt>
        <dd>
<span class="refAuthor">Narten, T.</span> and <span class="refAuthor">H. Alvestrand</span>, <span class="refTitle">"Guidelines for Writing an IANA Considerations Section in RFCs"</span>, <span class="seriesInfo">RFC 5226</span>, <span class="seriesInfo">DOI 10.17487/RFC5226</span>, <time datetime="2008-05" class="refDate">May 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5226">https://www.rfc-editor.org/info/rfc5226</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5880">[RFC5880]</dt>
        <dd>
<span class="refAuthor">Katz, D.</span> and <span class="refAuthor">D. Ward</span>, <span class="refTitle">"Bidirectional Forwarding Detection (BFD)"</span>, <span class="seriesInfo">RFC 5880</span>, <span class="seriesInfo">DOI 10.17487/RFC5880</span>, <time datetime="2010-06" class="refDate">June 2010</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5880">https://www.rfc-editor.org/info/rfc5880</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6286">[RFC6286]</dt>
        <dd>
<span class="refAuthor">Chen, E.</span> and <span class="refAuthor">J. Yuan</span>, <span class="refTitle">"Autonomous-System-Wide Unique BGP Identifier for BGP-4"</span>, <span class="seriesInfo">RFC 6286</span>, <span class="seriesInfo">DOI 10.17487/RFC6286</span>, <time datetime="2011-06" class="refDate">June 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6286">https://www.rfc-editor.org/info/rfc6286</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7752">[RFC7752]</dt>
        <dd>
<span class="refAuthor">Gredler, H., Ed.</span>, <span class="refAuthor">Medved, J.</span>, <span class="refAuthor">Previdi, S.</span>, <span class="refAuthor">Farrel, A.</span>, and <span class="refAuthor">S. Ray</span>, <span class="refTitle">"North-Bound Distribution of Link-State and Traffic Engineering (TE) Information Using BGP"</span>, <span class="seriesInfo">RFC 7752</span>, <span class="seriesInfo">DOI 10.17487/RFC7752</span>, <time datetime="2016-03" class="refDate">March 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7752">https://www.rfc-editor.org/info/rfc7752</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
      <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-25.2">
        <h3 id="name-informative-references">
<a href="#section-25.2" class="section-number selfRef">25.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="Clos0">[Clos0]</dt>
        <dd>
<span class="refAuthor">Clos, C.</span>, <span class="refTitle">"A study of non-blocking switching networks [PAYWALLED]"</span>, <span class="seriesInfo">Bell System Technical Journal 32 (2), pp 406-424</span>, <time datetime="1953-03" class="refDate">March 1953</time>. </dd>
<dd class="break"></dd>
<dt id="Clos1">[Clos1]</dt>
        <dd>
<span class="refTitle">"Clos Network"</span>, <span>&lt;<a href="https://en.wikipedia.org/wiki/Clos_network/">https://en.wikipedia.org/wiki/Clos_network/</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.malhotra-bess-evpn-lsoe">[I-D.malhotra-bess-evpn-lsoe]</dt>
        <dd>
<span class="refAuthor">Malhotra, N.</span>, <span class="refAuthor">Patel, K.</span>, and <span class="refAuthor">J. Rabadan</span>, <span class="refTitle">"LSoE-based PE-CE Control Plane for EVPN"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-malhotra-bess-evpn-lsoe-00</span>, <time datetime="2019-03-11" class="refDate">11 March 2019</time>, <span>&lt;<a href="https://www.ietf.org/archive/id/draft-malhotra-bess-evpn-lsoe-00.txt">https://www.ietf.org/archive/id/draft-malhotra-bess-evpn-lsoe-00.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="JUPITER">[JUPITER]</dt>
        <dd>
<span class="refAuthor">Singh, A.</span>, <span class="refAuthor">Ong, J.</span>, <span class="refAuthor">Agarwal, A.</span>, <span class="refAuthor">Anderson, G.</span>, <span class="refAuthor">Armistead, A.</span>, <span class="refAuthor">Bannon, R.</span>, <span class="refAuthor">Boving, S.</span>, <span class="refAuthor">Desai, G.</span>, <span class="refAuthor">Felderman, B.</span>, <span class="refAuthor">Germano, P.</span>, <span class="refAuthor">Kanagala, A.</span>, <span class="refAuthor">Liu, H.</span>, <span class="refAuthor">Provost, J.</span>, <span class="refAuthor">Simmons, J.</span>, <span class="refAuthor">Tanda, E.</span>, <span class="refAuthor">Wanderer, J.</span>, <span class="refAuthor">Hölzle, U.</span>, <span class="refAuthor">Stuart, S.</span>, and <span class="refAuthor">A. Vahdat</span>, <span class="refTitle">"Jupiter rising: a decade of clos topologies and centralized control in Google's datacenter network"</span>, <span class="seriesInfo">Communications of the ACM Vol. 59, pp. 88-97</span>, <span class="seriesInfo">DOI 10.1145/2975159</span>, <time datetime="2016-08" class="refDate">August 2016</time>, <span>&lt;<a href="https://doi.org/10.1145/2975159">https://doi.org/10.1145/2975159</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC0791">[RFC0791]</dt>
        <dd>
<span class="refAuthor">Postel, J.</span>, <span class="refTitle">"Internet Protocol"</span>, <span class="seriesInfo">STD 5</span>, <span class="seriesInfo">RFC 791</span>, <span class="seriesInfo">DOI 10.17487/RFC0791</span>, <time datetime="1981-09" class="refDate">September 1981</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc791">https://www.rfc-editor.org/info/rfc791</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC1122">[RFC1122]</dt>
        <dd>
<span class="refAuthor">Braden, R., Ed.</span>, <span class="refTitle">"Requirements for Internet Hosts - Communication Layers"</span>, <span class="seriesInfo">STD 3</span>, <span class="seriesInfo">RFC 1122</span>, <span class="seriesInfo">DOI 10.17487/RFC1122</span>, <time datetime="1989-10" class="refDate">October 1989</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc1122">https://www.rfc-editor.org/info/rfc1122</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC1982">[RFC1982]</dt>
      <dd>
<span class="refAuthor">Elz, R.</span> and <span class="refAuthor">R. Bush</span>, <span class="refTitle">"Serial Number Arithmetic"</span>, <span class="seriesInfo">RFC 1982</span>, <span class="seriesInfo">DOI 10.17487/RFC1982</span>, <time datetime="1996-08" class="refDate">August 1996</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc1982">https://www.rfc-editor.org/info/rfc1982</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="authors-addresses">
<section id="appendix-A">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Randy Bush</span></div>
<div dir="auto" class="left"><span class="org">Arrcus &amp; Internet Initiative Japan</span></div>
<div dir="auto" class="left"><span class="street-address">5147 Crystal Springs</span></div>
<div dir="auto" class="left">
<span class="locality">Bainbridge Island</span>, <span class="region">WA</span> <span class="postal-code">98110</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:randy@psg.com" class="email">randy@psg.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Rob Austein</span></div>
<div dir="auto" class="left"><span class="org">Arrcus, Inc</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:sra@hactrn.net" class="email">sra@hactrn.net</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Keyur Patel</span></div>
<div dir="auto" class="left"><span class="org">Arrcus</span></div>
<div dir="auto" class="left"><span class="street-address">2077 Gateway Place, Suite #400</span></div>
<div dir="auto" class="left">
<span class="locality">San Jose</span>, <span class="region">CA</span> <span class="postal-code">95119</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:keyur@arrcus.com" class="email">keyur@arrcus.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
