<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Reusing Transport Layer Connections in Session Initiation Protocol (SIP)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Reusing Transport Layer Connections in Session Initiation Protocol (SIP)">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">DISPATCH Working Group</td><td class="header">R. Jain, Ed.</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">IPC Systems</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">V. Gurbani</td></tr>
<tr><td class="header">Expires: March 12, 2010</td><td class="header">Bell Laboratories, Alcatel-Lucent</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">H. Kaplan</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">AcmePacket</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">September 08, 2009</td></tr>
</table></td></tr></table>
<h1><br />Reusing Transport Layer Connections in Session Initiation Protocol (SIP)<br />draft-jain-dispatch-sip-transport-connection-reuse-00</h1>

<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.
This document may contain material from IETF Documents or IETF
Contributions published or made publicly available before November
10, 2008. The person(s) controlling the copyright in some of this
material may not have granted the IETF Trust the right to allow
modifications of such material outside the IETF Standards Process.
Without obtaining an adequate license from the person(s) controlling
the copyright in such materials, this document may not be modified
outside the IETF Standards Process, and derivative works of it may
not be created outside the IETF Standards Process, except to format
it for publication as an RFC or to translate it into languages other
than English.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on March 12, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents in effect on the date of
publication of this document (http://trustee.ietf.org/license-info).
Please review these documents carefully, as they describe your
rights and restrictions with respect to this document.</p>

<h3>Abstract</h3>

<p>The current Session Initiation Protocol (SIP) specification dictates 
that a transport layer connection can carry SIP requests in only one direction i.e. from 
the client to the server. This presents scalability problems as twice the number of 
connections are needed for each pair of SIP entities that communicate with each other. 
The internet-draft <a class='info' href='#I-D.ietf-sip-connect-reuse'>[I&#8209;D.ietf&#8209;sip&#8209;connect&#8209;reuse]<span> (</span><span class='info'>Gurbani, V., Mahy, R., and B. Tate, &ldquo;Connection Reuse in the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2009.</span><span>)</span></a> specifies a mechanism for reusing 
SIP over TLS connections. However, that document is predicated on secure TLS mutual authentication 
and specifically refrains connection reuse for transports such as SIP over TCP and SCTP. There are 
many situations, such as in Trust Domains <a class='info' href='#RFC3324'>[RFC3324]<span> (</span><span class='info'>Watson, M., &ldquo;Short Term Requirements for Network Asserted Identity,&rdquo; November&nbsp;2002.</span><span>)</span></a>, where TLS mutual authentication 
may not be required but where connection reuse is beneficial. This document specifies connection 
reuse for SIP over connection-oriented transports such as TCP and SCTP. It specifies the same 
mechanism for connection reuse as specified in <a class='info' href='#I-D.ietf-sip-connect-reuse'>[I&#8209;D.ietf&#8209;sip&#8209;connect&#8209;reuse]<span> (</span><span class='info'>Gurbani, V., Mahy, R., and B. Tate, &ldquo;Connection Reuse in the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2009.</span><span>)</span></a>, 
however, the solution is presented in the context of Trust Domains.
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Requirements notation<br />
<a href="#anchor2">2.</a>&nbsp;
Applicability Statement<br />
<a href="#anchor3">3.</a>&nbsp;
Introduction<br />
<a href="#anchor4">4.</a>&nbsp;
Benefits of TCP, SCTP Connection Reuse<br />
<a href="#anchor5">5.</a>&nbsp;
Overview of operation<br />
<a href="#anchor6">6.</a>&nbsp;
Requirements<br />
<a href="#anchor7">7.</a>&nbsp;
Formal Syntax<br />
<a href="#anchor8">8.</a>&nbsp;
Normative Behavior<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">8.1.</a>&nbsp;
Client Behavior<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">8.2.</a>&nbsp;
Server Behavior<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">8.3.</a>&nbsp;
Closing a TCP or SCTP connection<br />
<a href="#anchor12">9.</a>&nbsp;
Security Considerations<br />
<a href="#anchor13">10.</a>&nbsp;
IANA Considerations<br />
<a href="#rfc.references1">11.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">11.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">11.2.</a>&nbsp;
Informational References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Requirements notation</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL",
            "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY",
            and "OPTIONAL" in this document are to be interpreted as
            described in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
</p>
<p>This document uses the concepts of Trust Domain and Spec(T), as specified 
            in section 2.3 of RFC 3324 <a class='info' href='#RFC3324'>[RFC3324]<span> (</span><span class='info'>Watson, M., &ldquo;Short Term Requirements for Network Asserted Identity,&rdquo; November&nbsp;2002.</span><span>)</span></a>.
</p>
<p>This document uses the same terminology as defined in section 1 of 
            <a class='info' href='#I-D.ietf-sip-connect-reuse'>[I&#8209;D.ietf&#8209;sip&#8209;connect&#8209;reuse]<span> (</span><span class='info'>Gurbani, V., Mahy, R., and B. Tate, &ldquo;Connection Reuse in the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2009.</span><span>)</span></a>.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Applicability Statement</h3>

<p>This document describes a mechanism that allows two SIP entities separated 
by a single hop that communicate over a connection-oriented transport protocol (e.g. TCP, 
SCTP) to reuse a connection for SIP requests sent in both directions. Many existing SIP
implementations currently support this feature in their own proprietary ways. This document
standardizes a mechanism for SIP over TCP and SCTP connection reuse.
</p>
<p>This document makes use of the same SIP extension for connection reuse 
as the one specified in <a class='info' href='#I-D.ietf-sip-connect-reuse'>[I&#8209;D.ietf&#8209;sip&#8209;connect&#8209;reuse]<span> (</span><span class='info'>Gurbani, V., Mahy, R., and B. Tate, &ldquo;Connection Reuse in the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2009.</span><span>)</span></a>, expect that the security 
considerations in this document are different. This document assumes that the SIP entities 
that make use of this mechanism are in a Trust Domain <a class='info' href='#RFC3324'>[RFC3324]<span> (</span><span class='info'>Watson, M., &ldquo;Short Term Requirements for Network Asserted Identity,&rdquo; November&nbsp;2002.</span><span>)</span></a> or they have 
mutually authenticated themselves through some other means. Therefore, unlike 
<a class='info' href='#I-D.ietf-sip-connect-reuse'>[I&#8209;D.ietf&#8209;sip&#8209;connect&#8209;reuse]<span> (</span><span class='info'>Gurbani, V., Mahy, R., and B. Tate, &ldquo;Connection Reuse in the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2009.</span><span>)</span></a>, this document does not mandate TLS mutual 
authentication as a prerequisite for connection reuse.
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Introduction</h3>

<p>The current Session Initiation Protocol (SIP) <a class='info' href='#RFC3261'>[RFC3261]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a> specification 
dictates that a transport layer connection can carry SIP requests in only one direction i.e. 
from the client to the server. This characteristic of SIP presents scalability problems as 
typically twice the number of connections are needed for each pair of SIP entities 
that communicate with each other.
</p>
<p>The client and server roles in SIP are transactional. Therefore, there is no 
fundamental reason why SIP initiated connections cannot be reused for requests 
in both directions. An existing internet-draft <a class='info' href='#I-D.ietf-sip-connect-reuse'>[I&#8209;D.ietf&#8209;sip&#8209;connect&#8209;reuse]<span> (</span><span class='info'>Gurbani, V., Mahy, R., and B. Tate, &ldquo;Connection Reuse in the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2009.</span><span>)</span></a> 
proposes a mechanism for reusing SIP over TLS connections. However, that 
specification is predicated on secure TLS mutual authentication and specifically refrains 
connection reuse for transports such as SIP over TCP and SCTP.
</p>
<p>There are many situations, such as in Trust Domains <a class='info' href='#RFC3324'>[RFC3324]<span> (</span><span class='info'>Watson, M., &ldquo;Short Term Requirements for Network Asserted Identity,&rdquo; November&nbsp;2002.</span><span>)</span></a>, where TLS 
mutual authentication is not required but where connection reuse is beneficial. 
This document enables connection reuse for SIP over TCP and SCTP transports. 
This document uses the same SIP extension for connection reuse as in 
<a class='info' href='#I-D.ietf-sip-connect-reuse'>[I&#8209;D.ietf&#8209;sip&#8209;connect&#8209;reuse]<span> (</span><span class='info'>Gurbani, V., Mahy, R., and B. Tate, &ldquo;Connection Reuse in the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2009.</span><span>)</span></a> (the Via "alias" parameter), expect that 
the security considerations in this document are different.
</p>
<p>This document assumes that the SIP entities that make use of the mechanism 
described here are in a Trust Domain <a class='info' href='#RFC3324'>[RFC3324]<span> (</span><span class='info'>Watson, M., &ldquo;Short Term Requirements for Network Asserted Identity,&rdquo; November&nbsp;2002.</span><span>)</span></a> or they have mutually 
authenticated themselves through some other means. Therefore, unlike 
<a class='info' href='#I-D.ietf-sip-connect-reuse'>[I&#8209;D.ietf&#8209;sip&#8209;connect&#8209;reuse]<span> (</span><span class='info'>Gurbani, V., Mahy, R., and B. Tate, &ldquo;Connection Reuse in the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2009.</span><span>)</span></a>, this document does not mandate TLS 
mutual authentication as a prerequisite for connection reuse.
</p>
<p>In the interest of avoiding duplication, this document only describes 
its differences from the SIP over TLS connection reuse document 
<a class='info' href='#I-D.ietf-sip-connect-reuse'>[I&#8209;D.ietf&#8209;sip&#8209;connect&#8209;reuse]<span> (</span><span class='info'>Gurbani, V., Mahy, R., and B. Tate, &ldquo;Connection Reuse in the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2009.</span><span>)</span></a>. It frequently refers 
to the sections of <a class='info' href='#I-D.ietf-sip-connect-reuse'>[I&#8209;D.ietf&#8209;sip&#8209;connect&#8209;reuse]<span> (</span><span class='info'>Gurbani, V., Mahy, R., and B. Tate, &ldquo;Connection Reuse in the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2009.</span><span>)</span></a> wherever 
there is commonality between the two documents.
</p>
<p>Section 3 of <a class='info' href='#I-D.ietf-sip-connect-reuse'>[I&#8209;D.ietf&#8209;sip&#8209;connect&#8209;reuse]<span> (</span><span class='info'>Gurbani, V., Mahy, R., and B. Tate, &ldquo;Connection Reuse in the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2009.</span><span>)</span></a> describes the 
uni-directional nature of connections for SIP requests in the current SIP 
specification and how their reuse is possible. That discussion also applies 
to SIP over TCP and SCTP transports and therefore this document.
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Benefits of TCP, SCTP Connection Reuse</h3>

<p>Section 4 of <a class='info' href='#I-D.ietf-sip-connect-reuse'>[I&#8209;D.ietf&#8209;sip&#8209;connect&#8209;reuse]<span> (</span><span class='info'>Gurbani, V., Mahy, R., and B. Tate, &ldquo;Connection Reuse in the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2009.</span><span>)</span></a> describes the 
benefits of TLS connection reuse. Many of the benefits of TLS connection reuse 
also apply to TCP and SCTP connection reuse. Each new TCP connection requires 
a 3-way handshake. Each new SCTP association requires a 4-way handshake. 
These handshakes contribute to latency, post-dial delay, media clipping etc. 
Section 4 of <a class='info' href='#I-D.ietf-sip-connect-reuse'>[I&#8209;D.ietf&#8209;sip&#8209;connect&#8209;reuse]<span> (</span><span class='info'>Gurbani, V., Mahy, R., and B. Tate, &ldquo;Connection Reuse in the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2009.</span><span>)</span></a> describes scenarios such 
as call flows involving frequent mid-dialog messages where connection reuse 
proves highly advantageous.
</p>
<p>Connections consume resources on both hosts that terminate a connection. 
Connections require state management and periodic maintenance and therefore 
consume computing resources on both ends. This presents scalability and 
performance problems. Therefore, any technique that allows SIP entities to 
conserve and reuse connections is beneficial.
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Overview of operation</h3>

<p>Section 5 of <a class='info' href='#I-D.ietf-sip-connect-reuse'>[I&#8209;D.ietf&#8209;sip&#8209;connect&#8209;reuse]<span> (</span><span class='info'>Gurbani, V., Mahy, R., and B. Tate, &ldquo;Connection Reuse in the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2009.</span><span>)</span></a> provides a tutorial 
on the operation of SIP over TLS connection reuse. Almost all of the discussion
in that section including concepts such as the Via "alias" parameter, the columns
in the alias table, the way RFC 3263 rules are applied are also applicable to SIP 
over TCP and SCTP connection reuse. The mention of TLS in the alias table 
and Via header example should be replaced with TCP or SCTP. In addition, any steps
pertaining to X.509 certificate exchange should be ignored.
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Requirements</h3>

<p>Section 6 of <a class='info' href='#I-D.ietf-sip-connect-reuse'>[I&#8209;D.ietf&#8209;sip&#8209;connect&#8209;reuse]<span> (</span><span class='info'>Gurbani, V., Mahy, R., and B. Tate, &ldquo;Connection Reuse in the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2009.</span><span>)</span></a> lists various requirements
behind its proposed SIP over TLS connection reuse solution. All of those requirements 
apply to SIP over TCP and SCTP connection reuse as well. This document imposes an
additional requirement:
</p>
<p>1. The SIP entities that utilize the connection sharing mechanism MUST be members of
a Trust Domain, T, and must comply to its Spec(T), as defined in section 2.3 of 
RFC 3324 <a class='info' href='#RFC3324'>[RFC3324]<span> (</span><span class='info'>Watson, M., &ldquo;Short Term Requirements for Network Asserted Identity,&rdquo; November&nbsp;2002.</span><span>)</span></a>.
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Formal Syntax</h3>

<p>Section 7 of <a class='info' href='#I-D.ietf-sip-connect-reuse'>[I&#8209;D.ietf&#8209;sip&#8209;connect&#8209;reuse]<span> (</span><span class='info'>Gurbani, V., Mahy, R., and B. Tate, &ldquo;Connection Reuse in the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2009.</span><span>)</span></a> presents the formal syntax
of the Via header "alias" parameter. The SIP over TCP and SCTP connection reuse
mechanism uses the same parameter and the same formal definition.
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Normative Behavior</h3>

<p>This section is largely a duplication of section 8 of 
<a class='info' href='#I-D.ietf-sip-connect-reuse'>[I&#8209;D.ietf&#8209;sip&#8209;connect&#8209;reuse]<span> (</span><span class='info'>Gurbani, V., Mahy, R., and B. Tate, &ldquo;Connection Reuse in the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2009.</span><span>)</span></a> except that all the normative text 
surrounding TLS and X.509 certificate exchange has not been carried over. 
Given that this section contains normative text, the authors felt that repetition
of text from section 8 of <a class='info' href='#I-D.ietf-sip-connect-reuse'>[I&#8209;D.ietf&#8209;sip&#8209;connect&#8209;reuse]<span> (</span><span class='info'>Gurbani, V., Mahy, R., and B. Tate, &ldquo;Connection Reuse in the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2009.</span><span>)</span></a> is necessary. The
repetition is not verbatim, however. The text has been modified to reflect
SIP over TCP and SCTP connection reuse.
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.1"></a><h3>8.1.&nbsp;
Client Behavior</h3>

<p>Clients SHOULD keep connections up as long as they are needed.
   Connection reuse works best when the client and the server maintain
   their connections for long periods of time.  Clients, therefore,
   SHOULD NOT automatically drop connections on completion of a
   transaction or termination of a dialog.
</p>
<p>The proposed mechanism uses the Via header field parameter specified in 
<a class='info' href='#I-D.ietf-sip-connect-reuse'>[I&#8209;D.ietf&#8209;sip&#8209;connect&#8209;reuse]<span> (</span><span class='info'>Gurbani, V., Mahy, R., and B. Tate, &ldquo;Connection Reuse in the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2009.</span><span>)</span></a>.  The "alias" header field parameter is 
included in a Via header field value to indicate that the client wants to 
create a transport layer alias.  The client places its advertised address 
in the Via header field value (in the "sent-by" production).
</p>
<p>If the client places an "alias" header field parameter in the topmost
   Via header of the request, the client MUST keep the connection open
   for as long as the resources on the host operating system allow it
   to, and that the client MUST accept requests over this connection --
   in addition to the default listening port -- from its downstream
   peer.  And furthermore, the client SHOULD reuse the connection when
   subsequent requests in the same or different transactions are
   destined to the same resolved address.
</p>
<p>Whether or not to allow an aliased connection ultimately depends on
   the recipient of the request; i.e., the client does not get any
   confirmation that its downstream peer created the alias, or indeed
   that it even supports this specification.  Thus, clients MUST NOT
   assume that the acceptance of a request by a server automatically
   enables connection aliasing.  Clients MUST continue receiving
   requests on their default port.
</p>
<p>The client MUST also populate the destination IP address,
   port, and transport of the server in the alias table; these fields
   are retrieved from executing RFC3263 server resolution process on the
   next hop URI.  And finally, the client MUST populate the alias
   descriptor field with the connection handle (or identifier) used to
   connect to the server.
</p>
<p>Once the alias table has been updated with a resolved address, and
   the client wants to send a new request in the direction of the
   server, the client reuses the connection only if all of the following
   conditions hold:
</p>
<p>   1.  The client uses the RFC3263 resolution on a URI and arrives at a
       resolved address contained in the alias table, and
</p>
<p>   2.  The URI used for RFC3263 server resolution matches one of the
       identities stored in the alias table row corresponding to that
       resolved address.
</p>
<p>Clients MUST be prepared for the case that the connection no longer
   exists when they are ready to send a subsequent request over it.  In
   such a case, a new connection MUST be opened to the resolved address
   and the alias table updated accordingly.
</p>
<p>This behavior has an adverse side effect when a CANCEL request or an
   ACK request for a non-2xx response is sent downstream.  Normally,
   these would be sent over the same connection that the INVITE request
   was sent over.  However, if between the sending of the INVITE request
   and subsequent sending of the CANCEL request or ACK request to a non-
   2xx response, the connection was reclaimed, then the client SHOULD
   open a new connection to the resolved address and send the CANCEL
   request or ACK request there instead.  The client MAY insert the
   newly opened connection into the alias table.
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.2"></a><h3>8.2.&nbsp;
Server Behavior</h3>

<p>Servers SHOULD keep connections up unless they need to reclaim
   resources.  Connection reuse works best when the client and the
   server maintain their connections for long periods of time.  Servers,
   therefore, SHOULD NOT automatically drop connections on completion of
   a transaction or termination of a dialog.
</p>
<p>When a server receives a request over TCP and SCTP whose topmost Via header
   field contains an "alias" header field parameter, it signifies that
   the upstream client will leave the connection open beyond the
   transaction and dialog lifetime, and that subsequent transactions and
   dialogs that are destined to a resolved address that matches the
   identifiers in the advertised address in the topmost Via header field
   can reuse this connection.
</p>
<p>Whether or not to use in the reverse direction a connection marked
   with the "alias" Via header field parameter ultimately depends on the
   policies of the server.  It can choose to honor it, and thereby send
   subsequent requests over the aliased connection.  If the server
   chooses not to honor an aliased connection, the server MUST allow the
   request to proceed as though the "alias" header field parameter was
   not present in the topmost Via header.
</p>
<p>This assures interoperability with <a class='info' href='#RFC3261'>[RFC3261]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a> server 
      behavior. Clients can include the "alias" header field parameter without
      fear that the server will reject the SIP request because of its
      presence.
</p>
<p>Servers MUST be prepared to deal with the case that the aliased
   connection no longer exists when they are ready to send a subsequent
   request over it.  This can happen if the peer ran out of operating
   system resources and had to close the connection.  In such a case,
   the server MUST open a new connection to the resolved address and the
   alias table updated accordingly.
</p>
<p>If the sent-by production of the Via header field contains a port,
   the server MUST use it as a destination port.  Otherwise the default
   port is the destination port.
</p>
<p>The server also populates the destination IP address, port and transport
   in the alias table from the topmost Via header field (using the
   ";received" parameter for the destination IP address).  If the port
   number is omitted, a default port number of 5060 is to be used.  And
   finally, the server populates the alias descriptor field with the
   connection handle (or identifier) used to accept the connection from
   the client (see Section 5 for the contents of the alias table.)
</p>
<p>Once the alias table has been updated, and the server wants to send a
   request in the direction of the client, it reuses the connection only
   if all of the following conditions hold:
</p>
<p>1.  The server, which acts as a client for this transaction, uses the
       RFC3263 resolution process on a URI and arrives at a resolved
       address contained in the alias table, and
</p>
<p>2.  The URI used for RFC3263 server resolution matches one of the
       identities stored in the alias table row corresponding to that
       resolved address.
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.3"></a><h3>8.3.&nbsp;
Closing a TCP or SCTP connection</h3>

<p>Either the client or the server may terminate a TCP or SCTP connection.  
   Before closing a TCP or SCTP connection, the initiator of the closure 
   MUST either wait for any outstanding SIP transactions to complete, or 
   explicitly abandon them.
</p>
<p>After one side has gracefully initiated connection termination (e.g. by 
   sending FIN message in TCP or SHUTDOWN message in SCTP), it MUST
   discard any TCP or SCTP messages until it has received an acknowledgement
   of the same from its peer. The receiver of the connection termination message
   MUST NOT start any new SIP transactions after the receipt of that message.
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Security Considerations</h3>

<p>This specification assumes that the entities that make use of the SIP connection
reuse mechanism described here are members of a Trust Domain, T, and they comply with 
its Spec(T), as defined in section 2.3 of RFC 3324 <a class='info' href='#RFC3324'>[RFC3324]<span> (</span><span class='info'>Watson, M., &ldquo;Short Term Requirements for Network Asserted Identity,&rdquo; November&nbsp;2002.</span><span>)</span></a>. Connection 
reuse outside of a Trust Domain or between different Trust Domains is specified in SIP over
TLS connection reuse specification <a class='info' href='#I-D.ietf-sip-connect-reuse'>[I&#8209;D.ietf&#8209;sip&#8209;connect&#8209;reuse]<span> (</span><span class='info'>Gurbani, V., Mahy, R., and B. Tate, &ldquo;Connection Reuse in the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2009.</span><span>)</span></a>.
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
IANA Considerations</h3>

<p>This document has no IANA actions.
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11"></a><h3>11.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>11.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-sip-connect-reuse">[I-D.ietf-sip-connect-reuse]</a></td>
<td class="author-text">Gurbani, V., Mahy, R., and B. Tate, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-sip-connect-reuse-14.txt">Connection Reuse in the Session Initiation Protocol (SIP)</a>,&rdquo; draft-ietf-sip-connect-reuse-14 (work in progress), August&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-sip-connect-reuse-14.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3261">[RFC3261]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;<a href="http://tools.ietf.org/html/rfc3261">SIP: Session Initiation Protocol</a>,&rdquo; RFC&nbsp;3261, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3261.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>11.2.&nbsp;Informational References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC3324">[RFC3324]</a></td>
<td class="author-text">Watson, M., &ldquo;<a href="http://tools.ietf.org/html/rfc3324">Short Term Requirements for Network Asserted Identity</a>,&rdquo; RFC&nbsp;3324, November&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3324.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Rajnish Jain (editor)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">IPC Systems</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">777 Commerce Drive</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Fairfield, CT  06825</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:rajnish.jain@ipc.com">rajnish.jain@ipc.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Vijay Gurbani</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Bell Laboratories, Alcatel-Lucent</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">2000 Lucent Lane</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Rm 6G-440</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Naperville, IL  60566</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:vkg@lucent.com">vkg@lucent.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Hadriel Kaplan</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">AcmePacket</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">71 Third Ave.</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Burlington, MA  01803</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:hkaplan@acmepacket.com">hkaplan@acmepacket.com</a></td></tr>
</table>
</body></html>
