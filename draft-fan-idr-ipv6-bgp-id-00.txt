



Network Working Group                                             P. Fan
Internet-Draft                                                     Z. Li
Intended status: Standards Track                            China Mobile
Expires: August 17, 2014                               February 13, 2014


                IPv6 BGP Identifier Capability for BGP-4
                      draft-fan-idr-ipv6-bgp-id-00

Abstract

   To solve the problem of BGP Identifier in an IPv6-only network
   without special configuration and planning considerations, this
   document extends BGP to allow a BGP Identifier to be a valid IPv6
   global unicast address assigned to the BGP speaker.  Protocol
   extension includes the definition of a BGP capability code, "IPv6 BGP
   Identifier capability", to be used by a BGP speaker to indicate its
   support for IPv6 address as a BGP Identifier.  This document updates
   RFC 4271.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on August 17, 2014.

Copyright Notice

   Copyright (c) 2014 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must



Fan & Li                 Expires August 17, 2014                [Page 1]

Internet-Draft           IPv6 BGP ID Capability            February 2014


   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Protocol Extension  . . . . . . . . . . . . . . . . . . . . .   3
   3.  Operations  . . . . . . . . . . . . . . . . . . . . . . . . .   3
     3.1.  Processing Received OPEN messages . . . . . . . . . . . .   3
     3.2.  Connection Collision Detection  . . . . . . . . . . . . .   3
     3.3.  Route Selection Decision  . . . . . . . . . . . . . . . .   3
   4.  Security Considerations . . . . . . . . . . . . . . . . . . .   4
   5.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   4
   6.  Normative References  . . . . . . . . . . . . . . . . . . . .   4
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   4

1.  Introduction

   The BGP Identifier of a BGP speaker is specified as a valid IPv4 host
   address assigned to the BGP speaker [RFC4271].  In addition, the
   deployed BGP code requires that two BGP speakers be of distinct BGP
   Identifiers in order to establish a BGP connection.

   In an IPv6-only network, the requirements for the BGP Identifier in
   [RFC4271] are not met as no IPv4 address is configured to the BGP
   speaker.  To accommodate this situation, [RFC6286] relaxes the
   definition of the BGP Identifier to be a 4-octet, unsigned, non-zero
   integer and requires AS-wide uniqueness of the BGP Identifiers.

   The proposal in [RFC6286] requires that a 4-octet integer be
   configured as BGP Identifier on the BGP speaker after basic IPv6
   information (such as IPv6 addresses) configuration has been
   completed.  The 4-octec integer to be configured as BGP Identifier
   has to be planned carefully in advance to guarantee uniqueness within
   the AS.  In a large IPv6-only AS the extra configuration and planning
   work introduced by the special integers can be troublesome.

   To solve the problem of BGP Identifier in an IPv6-only network
   without special configuration and planning considerations, this
   document extends BGP to allow a BGP Identifier to be a valid IPv6
   global unicast address assigned to the BGP speaker.  Protocol
   extension includes the definition of a BGP capability code, "IPv6 BGP
   Identifier capability", to be used by a BGP speaker to indicate its
   support for IPv6 address as a BGP Identifier.






Fan & Li                 Expires August 17, 2014                [Page 2]

Internet-Draft           IPv6 BGP ID Capability            February 2014


2.  Protocol Extension

   A new BGP capability [RFC5492] is defined to convey the IPv6 global
   unicast address to be used as the BGP Identifier.  A BGP speaker uses
   BGP Capabilities Advertisements in its OPEN message to advertise its
   neighbors this IPv6 BGP Identifier ability.  The BGP Identifier field
   of the OPEN message is set to zero, indicating that actual BGP ID is
   in the Capability Optional Parameter.

   The Capability Length field of the IPv6 BGP Identifier Capability is
   set to 16, and the Capability value field is set to one of the IPv6
   global unicast addresses that have been assigned to the BGP speaker.

   The BGP Identifier is also used in the AGGREGATOR attribute, so a BGP
   speaker that uses IPv6 BGP Identifier Capability sets the AGGREGATOR
   attribute accordingly.  The BGP Identifier carried in the attribute
   is encoded as a 16-octet entity.

3.  Operations

3.1.  Processing Received OPEN messages

   A BGP speaker checks the BGP Identifier field of the OPEN message
   received first.  If the BGP Identifier field is not zero, then the
   OPEN message is processed in the way of the message that does not
   contain IPv6 BGP Identifier, and any IPv6 BGP Identifier Capability
   in the Capability Optional Parameter of the message is ignored.  If
   the BGP Identifier field is zero, then the BGP speaker checks if any
   IPv6 BGP Identifier Capability is carried in the Capability Optional
   Parameter.  If there is no IPv6 BGP ID Capability, or the capability
   value of the IPv6 BGP ID Capability is not a valid IPv6 global
   unicast address, then a Notification message is generated, with Error
   Code set to 2 (OPEN Message Error) and Error subcode set to 3 (Bad
   BGP Identifier).

3.2.  Connection Collision Detection

   In case of collision detection, the BGP Identifiers of the peers
   involved in the collision are compared and only the connection
   initiated by the BGP speaker with the higher-valued BGP Identifier is
   retained.  Comparing BGP Identifiers is done by converting them to
   host byte order and treating them as 16-octet unsigned integers.

3.3.  Route Selection Decision

   If a route is advertised by an IPv4 BGP speaker and an IPv6 BGP
   speaker respectively, then the route advertised by the IPv6 BGP
   speaker is selected; if a route is advertised by two IPv6 BGP



Fan & Li                 Expires August 17, 2014                [Page 3]

Internet-Draft           IPv6 BGP ID Capability            February 2014


   speakers respectively, then their IPv6 BGP IDs are compared, and the
   route advertised by the BGP speaker with the lower-valued BGP
   Identifier is selected.

4.  Security Considerations

   TBD.

5.  IANA Considerations

   This document requests a new BGP Capability Code to be allocated by
   IANA.

6.  Normative References

   [RFC4271]  Rekhter, Y., Li, T., and S. Hares, "A Border Gateway
              Protocol 4 (BGP-4)", RFC 4271, January 2006.

   [RFC5492]  Scudder, J. and R. Chandra, "Capabilities Advertisement
              with BGP-4", RFC 5492, February 2009.

   [RFC6286]  Chen, E. and J. Yuan, "Autonomous-System-Wide Unique BGP
              Identifier for BGP-4", RFC 6286, June 2011.

Authors' Addresses

   Peng Fan
   China Mobile
   32 Xuanwumen West Street, Xicheng District
   Beijing  100053
   P.R. China

   Email: fanpeng@chinamobile.com


   Zhenqiang Li
   China Mobile
   32 Xuanwumen West Street, Xicheng District
   Beijing  100053
   P.R. China

   Email: lizhenqiang@chinamobile.com









Fan & Li                 Expires August 17, 2014                [Page 4]
