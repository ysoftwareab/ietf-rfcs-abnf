

  INTERNET-DRAFT                                    Soohong Daniel Park
  Expires: September 2003                           SAMSUNG Electronics
  File: draft-park-6dnar-01.txt                              March 2003 




               IPv6 Domain Name Auto-Registration (6DNAR)

   
                           
  Status of This Memo   
  
  This document is an Internet-Draft and is subject to all provisions 
  of Section 10 of RFC2026. 
  Internet-Drafts are working documents of the Internet Engineering 
  Task Force (IETF), its areas, and its working groups.  Note that 
  other groups may also distribute working documents as Internet- 
  Drafts. 
  Internet-Drafts are draft documents valid for a maximum of six  
  months and may be updated, replaced, or obsoleted by other 
  documents at any time.  It is inappropriate to use Internet-Drafts 
  as reference material or to cite them other than as "work in 
  progress." 
  The list of current Internet-Drafts can be accessed at 
  http://www.ietf.org/ietf/1id-abstracts.txt 
  The list of Internet-Draft Shadow Directories can be accessed at 
  http://www.ietf.org/shadow.html. 


  Abstract  
   
  This document proposes automatic configuration of IPv6 network using 
  Domain Name Auto-Registration(called 6DNAR). 6DNAR allows the 
  automatic registration of domain name and corresponding IPv6 
  Addresses with the DNS server. In order to provide 6DNAR function, 
  Neighbor Discovery Protocol [2461] will be used. Moreover, 6DNAR 
  don't change any existing DNS system.

   
  Table of Contents 
  
  1.     Introduction 
  2.     Terminology 
  3.     6DNAR Requirements 
  4.     Using DAD message 
  4.1    New option for Domain Name 
  5.     Duplication Detection Procedure 
  5.1    Duplicate Domain Name Detection Procedure
  6.     New flag of NA 
  7.     6DNAR procedure
  8.     Security Considerations
  9.     Acknowledgements 
  10.    Intellectual Property
  11.    Copyright
  12.    References 
  13.    Author' address 

  Park                   Expires September, 2003               [Page 1]
                                                       
  1. Introduction 
  
  Todays most networks use DNS[1034][1035] for convenience. 
  In case of IPv6, DNS is more important element because of IPv6 long 
  addresses which are difficult to remember. In addition, small
  networks like home networks using IPv6, should be able to make 
  network easily without manual configuration and required systems such
  as DNS server or DHCP server and so on. This document discusses 
  IPv6 Domain Name Auto-Registration(6DNAR) procedure for registering
  the Domain Name and IPv6 addresses with the DNS Server automatically.
  In order to use 6DNAR, there should be a minumun functions 
  implemented on 6DNAR node and server easily. Additionally, 6DNAR 
  server can be performed so well in home gateway or that kind of 
  existing system at home. 6DNAR can be applied to defined IPv6 
  addresses, Site-local and Global address not Link-local address. 
  
  Whenever DAD is performed, 6DNAR uses Neighbor Discovery Protocol 
  [2461] with new additions(defined in section 4.1 and 6) for 
  registering the Domain Name and IPv6 addresses with the DNS server 
  automatically.
   
  Note that the generation of unique Domain Name will be discussed
  on another document.
  
  
  2. Terminology 
   
  NS            - Neighbor Solicitation message (is defined [2461]) 
  
  NA            - Neighbor Advertisement message (is defined [2461]) 
  
  DAD           - Duplicate Address Detection (is defined [2461]) 
  
  "D" flag      - D flag is defined newly for acknowledgement of 
                  duplicate Domain Name (temporarily defined) 
  
  6DNAR node    - An IPv6 node that can generate its own unique Domain
                  Name. Section 3 identifies the new requirements that
                  6DNAR places on an IPv6 node to be a 6DNAR node. 
                  
  6DNAR server  - An 6DNAR node that can registrate Domain Name and 
  		  IPv6 addresses automatically. 6DNAR server uses the 
                  information from the DAD operation messages with 
                  newly defined option for the registration of the 
                  Domain Name and IPv6 Addresses. Section 3 identifies
                  the new requirements that 6DNAR places on an IPv6 
                  node to be a 6DNAR server. 6DNAR server should be 
                  performed both DNS functions (as a DNS Server) and
                  Gateway functions well. Also 6DNAR server can have 
                  various other functions depending on network 
                  environment and the network operator.
  
  
  3. 6DNAR Requirements 
  
  In order to use this mechanism, the 6DNAR node and 6DNAR server. 
  must support the following requirements.
  
  
  Park                   Expires September, 2003               [Page 2]
  
  6DANR node Requirements 
        6DNAR node must recognize newly defined NA option "Domain Name" 
        and "D" flag and generate its own unique Domain Name. After 
        generation, 6DNAR node must insert Domain Name to new option 
        field in NS when 6DNAR node is going on DAD. 
        
  
  6DNAR server Requirements 
        6DNAR server must reply NA message with newly defined NA option 
        and "D" flag set to initiated 6DNAR node, if Domain Name is 
        duplicate. 6DNAR server must update the local DNS Server file 
        dynamically using DNS UPDATE [2136]. In order to provide 
        stateful configuration, 6DNAR server can perform DHCPv6 
        function. Besides,6DNAR server must cache these information of 
        NS, IPv6 address and Domain Name. In home, generally, 6DNAR 
        server should be performed like home server or gateway as well.
  
  
  4. Using DAD message
  
  DAD must take place on all unicast addresses, regardless of
  whether they are obtained through stateful, stateless or manual
  configuration. 6DNAR uses the DAD messages (NS and NA) with new 
  option (for carrying the Domain Name) for autoconfiguration of the 
  Domain Name. Generally, Domain Name should be included in NS message 
  when DAD for site-local or global address not Link-local is 
  processing since Link-Local addresses should not be published in the 
  DNS.
  
  
  4.1 New option for Domain Name 
  
  In order to announce Domain Name simultaneously with the address, 
  this document defines new option called "Domain Name"
  (the Type value will be defined later).
  
  
   0                   1                   2                   3 
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
  |     Type      |    Length     |                               | 
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               + 
  ~                          Domain Name                          ~ 
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
  
        Option Name                              Type 
        
        Source Link-Layer Address                 1 
        Target Link-Layer Address                 2 
        Prefix Information                        3 
        Redirected Header                         4 
        MTU                                       5 
         .                                        . 
         .                                        . 
        Domain Name                              (TBD) 
       
       
                <Figure : new option for Domain Name> 
             
  Park                   Expires September, 2003               [Page 3]
  
  5. Duplicate Detection Procedure
  
  There are two kinds of duplications possible with 6DNAR, 
  IPv6 address duplication and Domain Name duplication. 
  If IPv6 address is duplicate, then it can not perform stateless 
  address autoconfiguration repeatedly, it must be configured with 
  stateful mechanism [2461]. However, if the Domain Name is duplicate 
  then, it can be modified and re-registered repeatedly. 
   
  
  5.1 Duplicate Domain Name Detection Procedure
   
  If IPv6 address or Domain Name is duplicate in file when 6DNAR 
  server is registrating, 6DNAR server must reply to originated node 
  to announce duplication. If IPv6 address is duplicate by [2461], 
  then node should be configured with stateful autoconfiguration 
  mechanism. However, if Domain Name is duplicate, it can 
  change/modify the Domain Name and can re-register repeatedly. 
  For notifying the duplicate Domain Name but not IPv6 address, 
  NA message[2461] must be modified. In order to announce that the 
  Domain Name is duplicate, NA message must carry the duplicate
  Domain Name in the Options field and a new flag ("D" Flag) defined 
  in the section 6. 
  
  
  6. New flag of NA 
  
  In order to announce that the Domain Name is duplicate , 6DNAR server
  must reply NA message to originated node in response to NS message. 
  
    0                   1                   2                   3 
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
   |     Type      |     Code      |          Checksum             | 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
   |R|S|O|D|                   Reserved                            | 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
   |                                                               | 
   +                                                               + 
   |                                                               | 
   +                       Target Address                          + 
   |                                                               | 
   +                                                               + 
   |                                                               | 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
   |   Options ...                                                 | 
   |                    Dupicated Domain Name                      | 
   |                                                               | 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
  

                  <Figure : new flag for NA message> 



  The new "D" (temporarily defined) flag as shown in the above figure
  is defined to announce that the Domain Name is duplicate. Other flag 
  are defined in [2461] 
  
  Park                   Expires September, 2003               [Page 4]
  
  Note that when 6DNAR node receives above message, it must check "D"
  flag to verify whether Domain Name duplication or not. If received
  packet is not set "D" flag, it should be performed original DAD 
  procedure, in order word, this case is address duplication.
  
  In order to distinguish Domain Name duplication from address 
  duplication, 6DNAR server can delay a few seconds before sending of
  NA for Domain Name duplication because after this delaying, 6DNAR 
  node will complete the composing of its own address.           
 
  
  7. 6DNAR procedure 
  
  [2373] defines Link-local address, Site-local address and Global 
  address. Link-local address is generated by the node itself, and of 
  course DAD must confirm its uniqueness. Therefore, if only Link-local 
  address is used, then the prefix is not required. But for using Site-
  local or Global addresses , an appropriate prefix must be announced 
  from router or that kind of equipment. After receiving of prefix,
  DAD is going to be required. The prefix delegation is illustrated in 
  [PREFIX] and others.
  
  Note that Link-local addresses should not be published in the DNS and
  Site-local addresses should not be published in the public DNS. Site-
  local addresses may be published in a site view of the DNS if two-face
  DNS is deployed. See [DNSISSUES] for details.
  
  In order to announce that the Domain Name is duplicate, NA message 
  must carry the duplicate Domain Name in the Options field and a new 
  flag ("D" Flag) defined  in the section 6. However, there is no
  necessary for sending multicast to 6DNAR node. Therefore, in 6DNAR
  server case, it will send unsolicited unicast advertisements 
  ( R,S,O = 0 / D = 1 ) to 6DNAR node.
  
  On receiving NA message with new option and flag, 6DNAR node must re-
  generate its own Domain Name, and sends NS message with new type 
  (is Domain Name). This NS message should be solicited unicast address
  to 6DNAR server which is target address in NA message with new Domain
  Name. If this Domain Name is duplicate again, 6DNAR server must reply 
  NA message ( R,O = 0 / S,D = 1) to 6DNAR node to announce Domain Name
  duplicate. And re-generation of new Domain Name will be performed
  repeatly. Note that the number of re-generations must be considered.
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  Park                   Expires September, 2003               [Page 5] 
   
                                               
            6DNAR                    6DNAR                    DNSv6
            Node                     Server                   Server 
              |                        |                        | 
              |                        |                        |
  [1]         |                        |                        |
  Node        |                        |                        | 
  performing  |                        |                        |
  DAD on      |------(sending NS)----->|no address duplication  |
  Link-local  |                        |go to [2]               | 
  address     |                        |                        |
              |<-----(sending NA)------|address duplication     |
              |                        |                        | 
              |                        |                        |
  Stateful    |                        |                        |
  state       |<---------------------->|6DNAR or DHCPv6 Server  | 
              |                        |                        |
              |                        |                        |
              |                        |                        | 
  Obtained    |                        |                        |
  address     |                        |                        |
  from server |-------go to [1]------->|                        | 
              |                        |                        |
              |                        |                        |
              |<----RA for prefix------|                        |
  [2]         |                        |                        |
  Node        |                        |                        |
  performing  |---(sending NS with     |                        | 
  DAD on      |     Domain Name)------>|Domain Name Duplication |
  Site-local  |                        |  (waiting for 3~5 sec) |
  or Global   |                        |                        | 
              |    [3]                 |                        |
             *|<--(sending NA(D flag)--|                        |
              |                        |                        | 
              |                        |                        |
  Modify      |                        |                        |
  Domain Name |---(sending NS with     |                        | 
              |   newly Domain Name)-->|**                      |
              |                        |Domain Name Duplication |
              |                        |                        |
            **|<--(sending NA(D flag)--|                        |
              |                        |                        |
              |---(sending NS with     |                        |
              |   newly Domain Name)-->|**                      |
              |                        |                        |
            **|<----(sending NA)-------|                        |  
              |                        |-----(DNS UPDATE)------>| 
              |                        |                        |
              |                        |Domain Name Duplication |
              |                        |                        |
              |                        |<------go to [3]--------| 
    
    
   
                
        Note: *   is unsolicited unicast address
	      **  is solicited unicast address  
  
  
  Park                   Expires September, 2003               [Page 6]
                  
  8. Security Considerations
   
  If someone wants to hijack correct Domain Name registration, they 
  could send a NS message with incorrect or same Domain Name to the
  6DNAR server repeatly and server would start the Domain Name 
  registration through above mechanise, which is a security hole. 
  As ND message is described in [2461], a host can check validity of 
  message. If ND message includes an IP Authentication Header, the 
  message authenticates correctly. For DNS UPDATE processing, secure
  DNS Dynamic Update is illustrated in [3007].
  
  
  9. Acknowledgements
  
  Special thanks are due to Badrin for many helpful suggestions. 
  
  
  10. Intellectual Property

  The following notice is copied from RFC 2026 [Bradner, 1996],
  Section 10.4, and describes the position of the IETF concerning
  intellectual property claims made against this document.

  The IETF takes no position regarding the validity or scope of any
  intellectual property or other rights that might be claimed to
  pertain to the implementation or use other technology described in
  this document or the extent to which any license under such rights
  might or might not be available; neither does it represent that it
  has made any effort to identify any such rights.  Information on the
  IETF's procedures with respect to rights in standards-track and
  standards-related documentation can be found in BCP-11.  Copies of
  claims of rights made available for publication and any assurances
  of licenses to be made available, or the result of an attempt made
  to obtain a general license or permission for the use of such
  proprietary rights by implementers or users of this specification
  can be obtained from the IETF Secretariat.

  The IETF invites any interested party to bring to its attention any
  copyrights, patents or patent applications, or other proprietary
  rights which may cover technology that may be required to practice
  this standard.  Please address the information to the IETF Executive
  Director.
  
  11. Copyright

  The following copyright notice is copied from RFC 2026 [Bradner,
  1996], Section 10.4, and describes the applicable copyright for this
  document.

  Copyright (C) The Internet Society July 12, 2001. All Rights
  Reserved.
  
  This document and translations of it may be copied and furnished to
  others, and derivative works that comment on or otherwise explain it
  or assist in its implementation may be prepared, copied, published
  and distributed, in whole or in part, without restriction of any
  kind, provided that the above copyright notice and this paragraph
  are included on all such copies and derivative works.  However, this
  
  Park                   Expires September, 2003               [Page 7]
  
  document itself may not be modified in any way, such as by removing
  the copyright notice or references to the Internet Society or other
  Internet organizations, except as needed for the purpose of
  developing Internet standards in which case the procedures for
  copyrights defined in the Internet Standards process must be
  followed, or as required to translate it into languages other than
  English.

  The limited permissions granted above are perpetual and will not be
  revoked by the Internet Society or its successors or assignees.

  This document and the information contained herein is provided on an
  "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
  TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
  BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
  HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
  MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
  
  
  
  
  
  12. References
   
   
  [2373]        Hinden, R. and S. Deering, "IP Version 6 Addressing 
                Architecture", RFC 2373, July 1998. 
               
  [2460]        Deering, S. abd R. Hinden, "Internet Protocol, Version 
  		6 (IPv6) Specification", RFC 2460, December 1998. 
               
  [2461]        Narten, T., Nordmark, E. and W. Simpson, "Neighbor 
                Discovery for IP version 6(IPv6)", RFC 2461, December 
                1998. 
               
  [1034]        P. Mockapetris, "DOMAIN NAMES - CONCEPTS AND 
  		FACILITIES", RFC 1034, November 1987. 
               
  [1035]        P. Mockapetris, "Domain Names - Implementation and 
                Specification" RFC 1035, November 1987. 

  [2136]        P. Vixie et al., "Dynamic Updates in the Domain Name
                System (DNS UPDATE)", RFC2136, April 1997.
                
  [3007]	B. Wellington, "Secure Domain Name System (DNS) Dynamic 
  		Update", RFC 3007, November 2000.
                 
  [DNSISSUES]	Durand, A., "IPv6 DNS transition issues", draft-ietf-              
                dnsop-ipv6-dns-issues-00.txt, work in progress.
                
  [PREFIX]	S. Miyakawa, R. Droms, "Requirements for IPv6 prefix
  		delegation", draft-ietf-ipv6-prefix-delegation-
  		requirement-01.txt, work in progress.
                 
  
  
  
  
  
  Park                   Expires September, 2003               [Page 8]
  
  13. Author' Address 
  
  Soohong Daniel Park 
  SAMSUNG Electronics 
  Digital Media R&D Center 
  416, Maetan-3Dong,Paldal-Gu, 
  Suwon City, Gyeonggi-Do,Korea 
  
  Phone: +82-31-200-3728 
  Email:soohong.park@samsung.com
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  
  Park                   Expires September, 2003               [Page 9]
