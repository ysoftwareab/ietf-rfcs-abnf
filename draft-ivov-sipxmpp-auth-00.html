<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Problem Statement and Possible Best Practices for Authentication of
      SIP+XMPP Clients</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Problem Statement and Possible Best Practices for Authentication of
      SIP+XMPP Clients">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">E. Ivov</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">SIP Communicator</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">E. Marocco</td></tr>
<tr><td class="header">Expires: September 2, 2010</td><td class="header">Telecom Italia</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">March 01, 2010</td></tr>
</table></td></tr></table>
<h1><br />Problem Statement and Possible Best Practices for Authentication of
      SIP+XMPP Clients<br />draft-ivov-sipxmpp-auth-00</h1>

<h3>Abstract</h3>

<p>
        This document discusses several mechanisms for simplifying
        authentication of dual-stack SIP+XMPP clients against the
        corresponding SIP and XMPP services. The text is not attempt to
        define a complex credential sharing protocol but rather to
        determine and eventually encourage use of a simple mechanism
        that would allow service providers to host a SIP+XMPP solution
        appearing as a single service to their users. In other words,
        the goal here is to agree on a set of recommendations that
        would encourage client developers to implement simple UIs that
        would only require users to provide an ID and a password when
        configuring their SIP+XMPP account for the first time (as
        opposed to having to do so separately for SIP and XMPP).
      
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on September 2, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">1.1.</a>&nbsp;
Why it is important to have a common
        authentication mechanism.<br />
<a href="#anchor3">2.</a>&nbsp;
Simply stating it ...<br />
<a href="#anchor4">3.</a>&nbsp;
Using the domain in the auth header in SIP or XMPP<br />
<a href="#anchor5">4.</a>&nbsp;
Security Considerations<br />
<a href="#anchor6">5.</a>&nbsp;
IANA Considerations<br />
<a href="#anchor7">6.</a>&nbsp;
Acknowledgments<br />
<a href="#rfc.references1">7.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
        [TODO:ref to charter] and [ref-to-draft] define the requirements
        and the semantics for combined use of SIP and XMPP servers.
        Among other things, the combination allows providers to easily
        use SIP server products with audio/video capabilities together
        with IM/presence XMPP ones when building platforms that provide
        all these features in a single service. Both, the proposed
        charter, and the draft solution make it clear that server side
        components should be barely if at all modified and that the
        effort of making both protocols function as one should be
        delegated to client-side applications
      
</p>
<p>
        The issue discussed in this problem statement is related to how
        such client-side applications would be able to determine that
        a SIP and an XMPP server operate together and that (or if) it
        would be able to reuse the same set of user credentials (e.g. a
        user ID and a password) when connecting to both of them. The
        purpose of this document is to enumerate a ways that would allow
        this and discuss their various pros and cons.
      
</p>
<p>
        The document does not attempt to open the way for new protocol
        extensions. The ideal result of this work would be a section in
        a related specification, that defines a set of assumptions,
        which clients would be able to make when discovering and
        connecting to SIP+XMPP networks, or a separate Best Practices
        document.
      
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Why it is important to have a common
        authentication mechanism.</h3>

<p>
          During a previous discussion which took place on the DISPATCH
          mailing list, various individuals expressed the opinion that
          the issue at hand need not be explicitly stated in an IETF
          document.
        
</p>
<p>
          The Internet has already seen an example of a similar
          situation that was left without a solution. The SMTP
          [TODO:reference] protocol is often used in conjunction with
          either POP3 [TODO:reference] or IMAP [TODO:reference] without
          any explicitly defined relation. As a result, most e-mail
          clients require users to configure separately their inbound
          and outbound mail accounts. The concept is often quite
          confusing to inexperienced users. Some clients have therefore
          started proposing per-provider account creation wizards which
          only require users to fill in a user name and a password and
          then "fill in" the rest according to the setup of the specific
          provider.
        
</p>
<p>
          The above workaround is of course non-existent for average and
          small size providers, and it requires an extra effort from
          application developers that is clearly avoidable.
        
</p>
<p>
          The following sections of this document briefly discuss
          simple ways of addressing the issue.
        
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Simply stating it ...</h3>

<p>
        One relatively simple way of making sure that a URI and a
        password would be enough to connect to a SIP+XMPP service would
        consist in allowing clients to make the following assumptions:

        </p>
<ul class="text">
<li>
            after applying the standard XMPP and SIP discovery
            mechanisms using the supplied URI (i.e. looking up the
            corresponding SRV DNS records), the client would discover
            the XMPP and SIP servers that should be used for the newly
            configured XMPP+SIP account.
          
</li>
<li>
            The supplied URI and password could be used as authentication
            credentials for both the XMPP and the SIP service.
          
</li>
</ul><p>
        Needless to say, clients may provide mechanisms (e.g. an
        "Advanced Configuration" form) that allow users to override the
        above assumptions and explicitly specify different connection
        points with different sets of credentials.
      
</p>
<p>
        The mechanism has the advantage of being relatively simple and
        require no other modifications to server side products other
        than making sure that user credentials would be valid for both
        the SIP and XMPP deployments. In many cases however, this would
        be resolvable through database synchronization and scripting,
        and hence be applicable to existing server-side implementations.
      
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Using the domain in the auth header in SIP or XMPP</h3>

<p>
        Participants in the related discussions on the DISPATCH mailing
        list also suggested using the "domain" parameter of the
        'WWW-Authenticate' headers used in SIP authentication
        challenges. If present such a "domain" parameter may be used as
        an indication that the target URI would allow XMPP connections
        with the same credentials.
      
</p>
<p>
        The main advantage of this mechanism is the fact that it allows
        for a discovery phase that is completely decoupled from the one
        used by regular SIP and XMPP. This means that service providers
        could use one set of servers to handle standard SIP and XMPP
        and then direct users to different addresses for their SIP+XMPP
        services.
      
</p>
<p>
        Contrary to the DNS-based mechanism however, relying on domain
        parameters is more likely to require implementation changes and
        hence represents more of a contradiction with the requirements
        that XMPP+SIP work was chartered with.
       
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Security Considerations</h3>

<p>
        </p>
<ol class="text">
<li>
            PENDING
          
</li>
</ol><p>
      
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
IANA Considerations</h3>

<p>
        None.
      
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Acknowledgments</h3>

<p>
          Peter St. Andre, Spencer Dawkins, Scott Lawrence and several
          others provided helpful feedback in the related discussion
          that took place on the DISPATCH mailing list.
        
</p>
<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>7.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC3261">[RFC3261]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;<a href="http://tools.ietf.org/html/rfc3261">SIP: Session Initiation Protocol</a>,&rdquo; RFC&nbsp;3261, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3261.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Emil Ivov</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">SIP Communicator</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Strasbourg  67000</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">France</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:emcho@sip-communicator.org">emcho@sip-communicator.org</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Enrico Marocco</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Telecom Italia</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Via G. Reiss Romoli, 274</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Turin  10148</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Italy</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:enrico.marocco@telecomitalia.it">enrico.marocco@telecomitalia.it</a></td></tr>
</table>
</body></html>
