<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>A Session Initiation Protocol (SIP) Event Package for
      Location Information</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="A Session Initiation Protocol (SIP) Event Package for
      Location Information">
<meta name="keywords" content="Internet-Draft">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">SIP</td><td class="header">J. Winterbottom</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">M. Thomson</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">Andrew Corporation</td></tr>
<tr><td class="header">Expires: January 8, 2009</td><td class="header">H. Tschofenig</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Nokia Siemens Networks</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">July 07, 2008</td></tr>
</table></td></tr></table>
<h1><br />A Session Initiation Protocol (SIP) Event Package for
      Location Information<br />draft-winterbottom-sip-location-package-00.txt</h1>

<h3>Status of this Memo</h3>
<p>
By submitting this Internet-Draft,
each author represents that any applicable patent or other IPR claims of which
he or she is aware have been or will be disclosed,
and any of which he or she becomes aware will be disclosed,
in accordance with Section&nbsp;6 of BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on January 8, 2009.</p>

<h3>Abstract</h3>

<p>This document specifies a SIP event package allowing allowing a location receiptient to
        subscribe for location information when provided a location URI using the sip, sips, or pres
        URI schemes. The notification that results from the subscription is either the location of
        the Target or an error. 
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#intro">1.</a>&nbsp;
Introduction<br />
<a href="#terminology">2.</a>&nbsp;
Terminology<br />
<a href="#anchor1">3.</a>&nbsp;
Protocol Interaction<br />
<a href="#anchor2">4.</a>&nbsp;
Overview of Operation<br />
<a href="#anchor3">5.</a>&nbsp;
Event Package details<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">5.1.</a>&nbsp;
Event Package Name<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">5.2.</a>&nbsp;
Event Package Parameters<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">5.3.</a>&nbsp;
Accept Header Value<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">5.4.</a>&nbsp;
Subscription Duration<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">5.5.</a>&nbsp;
Forked SUBSCRIBE Requests<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">5.6.</a>&nbsp;
Subscribing for Location Information<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">5.6.1.</a>&nbsp;
SUBSCRIBE Message Body<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">5.7.</a>&nbsp;
Location Notification<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#notify">5.7.1.</a>&nbsp;
NOTIFY Bodies<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">5.7.2.</a>&nbsp;
Rate of Notifications<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">5.8.</a>&nbsp;
State Agents<br />
<a href="#schema">6.</a>&nbsp;
Schema<br />
<a href="#anchor16">7.</a>&nbsp;
Examples<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor17">7.1.</a>&nbsp;
Example 1<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor18">7.2.</a>&nbsp;
Example 2<br />
<a href="#security-considerations">8.</a>&nbsp;
Security Considerations<br />
<a href="#iana">9.</a>&nbsp;
IANA Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor19">9.1.</a>&nbsp;
HELD Error Token Registration<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor20">9.2.</a>&nbsp;
URN Sub-Namespace Registration for urn:ietf:params:xml:ns:loc-event<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor21">9.3.</a>&nbsp;
XML Schema Registration<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor22">9.4.</a>&nbsp;
MIME Media Type Registration for 'application/loc-event+xml'<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor23">9.5.</a>&nbsp;
Event Package Registration<br />
<a href="#anchor24">10.</a>&nbsp;
Acknowledgements<br />
<a href="#rfc.references1">11.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">11.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">11.2.</a>&nbsp;
Informative References<br />
<a href="#appendixA">Appendix&nbsp;A.</a>&nbsp;
Subscription Examples<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor27">A.1.</a>&nbsp;
Requesting a Quality of Position<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor28">A.2.</a>&nbsp;
Inclusion of Mahy Loc-Filters<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
<a href="#rfc.copyright">&#167;</a>&nbsp;
Intellectual Property and Copyright Statements<br />
</p>
<br clear="all" />

<a name="intro"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p> Location information is generally recognized as being a subset of presence as described in
          <a class='info' href='#RFC4079'>[RFC4079]<span> (</span><span class='info'>Peterson, J., &ldquo;A Presence Architecture for the Distribution of GEOPRIV Location Objects,&rdquo; July&nbsp;2005.</span><span>)</span></a>. It is also recognized that location information is most readily
        available from the local access network serving a specific end-device. The node in a local
        access network responsible for determining and desseminating an end-point's location is
        referred to as a location information server (LIS). Where the LIS is capable of supporting
        SIP SUBSCRIBE and NOTIFY messages <a class='info' href='#RFC3265'>[RFC3265]<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> for the dissemination of location
        information it becomes a limited capability presence server. To support this limited
        capability a new SIP event package is defined specifically for the subscription to, and
        notification of, a Target's physical location. 
</p>
<p> This document proposes the usage of the Session Initiation Protocol (SIP) <a class='info' href='#RFC3261'>[RFC3261]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a> as a location dereference protocol. This is accomplished by defining a
        new subscription event package as described in RFC3265 <a class='info' href='#RFC3265'>[RFC3265]<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a>. 
</p>
<p> This event package is based on the concept of a location information server (LIS), which
        resides in the same access network as a Target. the LIS is capable of accepting
        subscriptions, storing subscription state, and generating notifications either periodically
        or when the LIS detects changes in a Target's physical location. 
</p>
<p>The event package defines a simple but extensible XML schema which allows a location
        recipient to subscribe to a LIS for a Target's location information. A base set of
        subscription criteria are defined in an XML schema. Extensions points are provided in the
        schema so that additional criteria can be specified for future application requirements. 
</p>
<p> How the location recipient learns the location URI is out of scope for this document. The
        specification relies of existing SIP, presence, and georpiv mechansisms for the
        authentication of location recipients and the application of these mechanisms is deemed out
        of scope for this specification. Existing presence and location authorization policies such
        as those described in common policy <a class='info' href='#RFC4745'>[RFC4745]<span> (</span><span class='info'>Schulzrinne, H., Tschofenig, H., Morris, J., Cuellar, J., Polk, J., and J. Rosenberg, &ldquo;Common Policy: A Document Format for Expressing Privacy Preferences,&rdquo; February&nbsp;2007.</span><span>)</span></a> and geolocation policy <a class='info' href='#I-D.ietf-geopriv-policy'>[I&#8209;D.ietf&#8209;geopriv&#8209;policy]<span> (</span><span class='info'>Schulzrinne, H., Tschofenig, H., Morris, J., Cuellar, J., and J. Polk, &ldquo;Geolocation Policy: A Document Format for Expressing Privacy Preferences for Location Information,&rdquo; January&nbsp;2010.</span><span>)</span></a> are assumed to be in place. Alternatively, specific
        constraints attached to the location URI itself, such as those described in <a class='info' href='#I-D.winterbottom-geopriv-held-context'>[I&#8209;D.winterbottom&#8209;geopriv&#8209;held&#8209;context]<span> (</span><span class='info'>Winterbottom, J., Tschofenig, H., and M. Thomson, &ldquo;Location URI Contexts in HTTP-Enabled Location Delivery (HELD),&rdquo; October&nbsp;2009.</span><span>)</span></a> are assumed to exist. 
</p>
<a name="terminology"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Terminology</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT",
        "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in
          <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>. 
</p>
<p>The terms Location Recipient and Target are used as defined in <a class='info' href='#RFC3693'>[RFC3693]<span> (</span><span class='info'>Cuellar, J., Morris, J., Mulligan, D., Peterson, J., and J. Polk, &ldquo;Geopriv Requirements,&rdquo; February&nbsp;2004.</span><span>)</span></a>
      
</p>
<p>The term location information (LIS) is used throughout this document as defined in <a class='info' href='#I-D.ietf-geopriv-l7-lcp-ps'>[I&#8209;D.ietf&#8209;geopriv&#8209;l7&#8209;lcp&#8209;ps]<span> (</span><span class='info'>Tschofenig, H. and H. Schulzrinne, &ldquo;GEOPRIV Layer 7 Location Configuration Protocol; Problem Statement and Requirements,&rdquo; July&nbsp;2009.</span><span>)</span></a>. A presence server that distributes physical
        location to watchers may also be regarded as a LIS in the terms of reference for this
        document. 
</p>
<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Protocol Interaction</h3>

<p>Using a location URI that provides a Target's location to a recipient directly from the LIS
        is often preferable and more effient than requiring location information originate from the
        LIS and traverse the Target end-point before reaching the location recipient. This is
        especially true in environments where the Target can move and change points of network
        attachment without an interuption in service. The merits and requirements of using a
        location URI are addressed in detail in the location by reference requirements document
          <a class='info' href='#I-D.ietf-geopriv-lbyr-requirements'>[I&#8209;D.ietf&#8209;geopriv&#8209;lbyr&#8209;requirements]<span> (</span><span class='info'>Marshall, R., &ldquo;Requirements for a Location-by-Reference Mechanism,&rdquo; November&nbsp;2009.</span><span>)</span></a>. 
</p>
<p> Location configuration protocols, such as HELD, provide an end-point the ability to
        request a location URI that they can distribute to external entities and applications for
        the purpose of later location retrival. A scheme for dereferencing HELD URIs is described in
          <a class='info' href='#I-D.winterbottom-geopriv-deref-protocol'>[I&#8209;D.winterbottom&#8209;geopriv&#8209;deref&#8209;protocol]<span> (</span><span class='info'>Winterbottom, J., Tschofenig, H., Schulzrinne, H., Thomson, M., and M. Dawson, &ldquo;A Location Dereferencing Protocol Using HELD,&rdquo; January&nbsp;2010.</span><span>)</span></a>. This specification describes a
        location information event package that an
        application or entity can use this to request location information directly from a LIS or
        presence server using SIP. 
</p>
<p>The SIP subscription functionality is described in <a class='info' href='#RFC3265'>[RFC3265]<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a>, along with
        general guidelines for defining new event packages for which subscriptions can be made. This
        specification defines a new event package that allows a recipient to specifically subscribe
        for location information. The event package consists of an XML schema that is included in
        the body of the SIP subscribe message, and a new subscribe event header. Both the schema and
        the subscribe event header are registered with IANA in <a class='info' href='#iana'>Section&nbsp;9<span> (</span><span class='info'>IANA Considerations</span><span>)</span></a>. The general
        context and model for location subscription is shown in <a class='info' href='#fig1'>Figure&nbsp;1<span> (</span><span class='info'>Context Diagram</span><span>)</span></a>. 
</p><br /><hr class="insert" />
<a name="fig1"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                              +-----------+
  +------------+              | Location  |                +-----------+
  | End Device |              |Information|                | Location  |
  |  (Target)  |              |  Server   |                | Recipient |
  +-----+------+              +----+------+                +-----+-----+
        |                          |                             |
     +--+--------------------------+--+                          |
     |  |                          |  |                          |
     |  |===locationRequest(URI)==&gt;0  |                          |
     |  |                          |  | Location                 |
     |  |                          |  | Configuration            |
     |  0&lt;==locationResponse(URI)==|  | Protocol                 |
     |  |                          |  |                          |
     +--+--------------------------+--+                          |
        |                          |                             |
        |                          |                             |
        |~~~~~~~~~~~~Location Conveyance (URI)~~~~~~~~~~~~~~~~~~&gt;0
        |                          |                             |
        |                       +--+-----------------------------+--+
        |                       |  |                             |  |
        |        Location       |  0&lt;======SUBSCRIBE(loc)========|  |
        |        Event          |  |                             |  |
        |        Package        |  |========NOTIFY(PIDF-LO)=====&gt;0  |
        |                       |  |========NOTIFY(PIDF-LO)=====&gt;0  |
        |                       |  |========NOTIFY(PIDF-LO)=====&gt;0  |
        |                       +--+~~~~~~~~~~~~~~~~~~~~~~~~~~~~~+--+
        |                          |                             |
        |                          |                             |
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: Context Diagram&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Overview of Operation</h3>

<p> In this section, an overview of the operation of this event package is presented. In order
        to provide clarity on this package the overview describes behavior that is documented in
        part here, partly in the SIP event framework <a class='info' href='#RFC3265'>[RFC3265]<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a>, and in the SIP
        specification <a class='info' href='#RFC3261'>[RFC3261]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a>. However, the detailed semantics of this package
        require the reader to be familiar with SIP events and the SIP specification itself. 
</p>
<p> When an entity, the subscriber, wishes to learn about the location from some user, it
        creates a SUBSCRIBE request. This request identifies the desired Target in the Request-URI,
        using a SIP URI, SIPS URI <a class='info' href='#RFC3261'>[RFC3261]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a> or a presence (pres) URI <a class='info' href='#RFC3859'>[RFC3859]<span> (</span><span class='info'>Peterson, J., &ldquo;Common Profile for Presence (CPP),&rdquo; August&nbsp;2004.</span><span>)</span></a>. The SUBSCRIBE request is carried along SIP proxies as any other SIP
        request would be and eventually arrives at a LIS, which will generate a response to the
        request. 
</p>
<p> The LIS first authenticates the subscription, then authorizes it. The means for
        authorization are outside the scope of this protocol. If authorized, a 200 OK response is
        returned followed immediately by a NOTFIY message containing the location of the target. If
        authorization could not be obtained at this time, the subscription is considered
        &quot;terminated&quot; with a reason code of &quot;rejected&quot; and a
        $quot;403 Forbidden&quot; response is returned. Periodicially, or as the location of the
        Target changes, the LIS generates and sends NOTIFY messages containing the location
        information to all subscribers with authorized subscriptions. Changes in the state of the
        subscription itself can also trigger NOTIFY messages; that state is carried in the
        Subscription-State header field of the NOTIFY, and would typically indicate whether the
        subscription is active or terminated. No pending state for location information is
        considered. 
</p>
<p> The SUBSCRIBE message establishes a "dialog" with the LIS. A dialog is defined in RFC 3261
          <a class='info' href='#RFC3261'>[RFC3261]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a>, and it represents the SIP state between a pair of entities to
        facilitate peer-to-peer message exchanges. This state includes the sequence numbers for
        messages in both directions (SUBSCRIBE from the subscriber, NOTIFY from the LIS), in
        addition to a route set and remote target URI. The route set is a list of SIP (or SIPS) URIs
        which identify SIP proxy servers that are to be visited along the path of SUBSCRIBE
        refreshes or NOTIFY requests. The remote target URI is the SIP or SIPS URI that identifies
        the target of the message - the subscriber, in the case of NOTIFY, or the LIS, in the case
        of a SUBSCRIBE refresh. 
</p>
<p> The subscription persists for a duration that is negotiated as part of the initial
        SUBSCRIBE. The subscriber will need to refresh the subscription before its expiration, if
        they wish to retain the subscription. This is accomplished by sending a SUBSCRIBE refresh
        within the same dialog established by the initial SUBSCRIBE. This SUBSCRIBE is nearly
        identical to the initial one, but contains a tag in the To header field and a higher CSeq
        header field value. 
</p>
<p> The subscriber can terminate the subscription by sending a SUBSCRIBE, within the dialog,
        with an Expires header field (which indicates duration of the subscription) value of zero.
        This causes an immediate termination of the subscription. A NOTIFY request is then generated
        by the LIS with the most recent location information for the Target. 
</p>
<p> The LIS can terminate the subscription at any time. To do so, it sends a NOTIFY request
        with a Subscription-State header field with a value of &quot;terminated&quot;. A
        reason parameter is also supplied which provides the reason for the termination. 
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Event Package details</h3>

<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Event Package Name</h3>

<p> A SIP subscription specifies precisely which event or set events (event package) the
          subscriber is interested in being notified about. This specification deals with
          subscription for location information and specifies a new event package excplicitly for
          this purpose. The SIP event notification specification <a class='info' href='#RFC3265'>[RFC3265]<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a> stipulates
          that a new event package requires the registration of a new &quot;Event&quot;
          header token so that a subscriber can explcitly subscribe for these events. This
          specification defines the &quot;loc-event&quot; Event header token, and registers it in
            <a class='info' href='#iana'>Section&nbsp;9<span> (</span><span class='info'>IANA Considerations</span><span>)</span></a>. All subscriptions for location information are expected to use
          this Event header token. 
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Event Package Parameters</h3>

<p> The SIP event framework allows event packages to define additional parameters carried in
          the Event header field. This package, presence, does not define any additional parameters.
        
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
Accept Header Value</h3>

<p> The Accept header in the SUBSCRIBE indicates to the LIS what type of information the
          location recipient is expecting. This event package requires that the Accept header bet
          set to &quot;application/held+xml&quot;. The rationale for resuing the HELD MIME
          type in the NOTIFY message is provide in <a class='info' href='#notify'>Section&nbsp;5.7.1<span> (</span><span class='info'>NOTIFY Bodies</span><span>)</span></a>. 
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.4"></a><h3>5.4.&nbsp;
Subscription Duration</h3>

<p> Default is 24 hours. If the URI was generated using HELD Context management or some
          other policy-based mechansism then the LIS MUST provide and expires value that is equal to
          or less than the expiry time of the specified in the policy. 
</p>
<p>Very short subscription times will be treated as though they are immediate notification
          requests. Assuming that the subscription is accepted, the LIS will respond with the
          fastest location that it is able to provide. 
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.5"></a><h3>5.5.&nbsp;
Forked SUBSCRIBE Requests</h3>

<p> This event package does not support forked SUBSCRIBE requests. 
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.6"></a><h3>5.6.&nbsp;
Subscribing for Location Information</h3>

<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.6.1"></a><h3>5.6.1.&nbsp;
SUBSCRIBE Message Body</h3>

<p>The characteristics of the subscription are defined in the XML schema which is conveyed
            from the subscriber to the LIS in the body of the SUBSCRIBE message. A new MIME type of
            application/loc-event+xml is defined for use with this schema and it is registered in <a class='info' href='#iana'>Section&nbsp;9<span> (</span><span class='info'>IANA Considerations</span><span>)</span></a>. 
</p>
<p> The schema is broken into two parts, a &quot;what&quot; part, and a
            &quot;when&quot; part. The &quot;what&quot; part defines what the
            subscriber requires, and the &quot;when&quot; part defines when the LIS should
            send it. These two components are described in more detail below. 
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.6.1.1"></a><h3>5.6.1.1.&nbsp;
What</h3>

<p> The &quot;what&quot; part of the location subscription comprises of two
              basic components. A location type element allows the subscriber to specify the type of
              location information that they wish to receive, geodetic, civic, or any. The LIS
              should try to provide location in the form subscribed for. If the LIS is unable to
              provide location in the form requested, then it may provide location in an alternative
              form. If the subscriber is unable to process the location form returned by the LIS,
              then the subscriber is expected to terminate the subscription. 
</p>
<p> An extension point is included in the schema so that additional requirements of what
              is to be provided in notification responses can be specified. Examples of how to use
              this this extension point are providced in <a class='info' href='#appendixA'>Appendix&nbsp;A<span> (</span><span class='info'>Subscription Examples</span><span>)</span></a>. Thes examples
              should be considered informative only. 
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.6.1.2"></a><h3>5.6.1.2.&nbsp;
When</h3>

<p> The &quot;when&quot; part of the subscription tells the LIS when the
              subscriber would like to receive location information about the Target. Two basic
              components are provided. An interval, in seconds, tell the LIS how often to send a
              location update to the subscriber. An trigger for sending notifications when the
              Target's point of network attachment changes is also provided. The
              &quot;when&quot; elements operate in a logical OR manner, and a notification
              SHOULD be sent whenever one of these conditions occurs. 
</p>
<p> An extension point exists in the schema so that additional notification triggers can
              be specified and added as they become required. 
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.7"></a><h3>5.7.&nbsp;
Location Notification</h3>

<p> Location information and error messages are returned to the subscriber in the body of a
          SIP NOTIFY message. 
</p>
<a name="notify"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.7.1"></a><h3>5.7.1.&nbsp;
NOTIFY Bodies</h3>

<p> The NOTIFY body is either a HELD locationResponse, or a HELD error message, both are
            defined in <a class='info' href='#I-D.ietf-geopriv-http-location-delivery'>[I&#8209;D.ietf&#8209;geopriv&#8209;http&#8209;location&#8209;delivery]<span> (</span><span class='info'>Barnes, M., Winterbottom, J., Thomson, M., and B. Stark, &ldquo;HTTP Enabled Location Delivery (HELD),&rdquo; August&nbsp;2009.</span><span>)</span></a>. The rationale for
            reusing the location response and error messages from HELD is twofold. Firstly a
            location recipient cannot be assured ahead of time of the location URI type that a
            Target will provide it; this is largely determined by what the LIS in the local access
            network provides to the Target and so is out of the control of both the Target and
            recipient. So the recipient should be capable of dealing with HELD location responses in
            any event. Secondly, the HELD location response and error messages provide excellent
            containers for the information that the LIS needs to provide to the location recipient
            in a NOTIFY. Rules from HELD <a class='info' href='#I-D.ietf-geopriv-http-location-delivery'>[I&#8209;D.ietf&#8209;geopriv&#8209;http&#8209;location&#8209;delivery]<span> (</span><span class='info'>Barnes, M., Winterbottom, J., Thomson, M., and B. Stark, &ldquo;HTTP Enabled Location Delivery (HELD),&rdquo; August&nbsp;2009.</span><span>)</span></a>
            apply when constructing these messages, with the exception of the clarifications
            provided later. 
</p>
<p> An error will, in some circumstances, result in a terminated subscription, however in
            other cases the error condition may be present for only one specific notification cycle
            in which case the subscription will remain active. The subscriber MUST examine the value
            of the Subscription-State header to determine if the subscription has been terminated or
            not. 
</p>
<p> The LIS MUST send a NOTIFY with a Subscription-State header value of
            &quot;terminated&quot; and a reason code of &quot;noresource&quot;when
            it is no longer able to provide the Target's location though the subscribed URI. This
            informs the subscriber that no further attempts to subscribe to the resource should be
            attempted. The LIS MUST include a HELD error message with a code of
            &quot;locationUnknown&quot; in the NOTFIY body when this condition occurs. 
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.7.2"></a><h3>5.7.2.&nbsp;
Rate of Notifications</h3>

<p> The rate at which notifications are generated is excplictly defined in the interval
            element of the &quot;when&quot; component in the SUBSCRIBE body. This element
            defines how often the subscriber wishes to receive notifications about a Target's
            location. The interval value is a positive integer respresenting seconds. 
</p>
<p> A new HELD error token of &quot;intervalTooShort&quot; is regsitered in <a class='info' href='#iana'>Section&nbsp;9<span> (</span><span class='info'>IANA Considerations</span><span>)</span></a> and MUST be used by the LIS when an inappropriately short notification
            interval is requested by the subscriber. When this error is returned the corresponding
            NOTIFY message MUST have a Subscription-State header value of
            &quot;termninated&quot;, reason code of &quot;giveup&quot; and a value
            for the retry-after parameter MAY be provided. 
</p>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.8"></a><h3>5.8.&nbsp;
State Agents</h3>

<p> The LIS is responsible for keeping track of where a Target is physically located in the
          access network. Stare, as it pertains to this event package, refers to the policies
          associated with the URI to which the subscription was made, and physical location of the
          Target. State is therefore maintained internal to the LIS and is explcitly resolved at the
          time that a notification is generated. 
</p>
<a name="schema"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Schema</h3>

<p>This section defines the schema that constitutes the body of this even package. 
</p><br /><hr class="insert" />
<a name="schem"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
 &lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;xs:schema
  targetNamespace="urn:ietf:params:xml:ns:loc-event"
  xmlns:loc-event="urn:ietf:params:xml:ns:loc-event"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"
  xmlns:qop="urn:ietf:params:xml:ns:geopriv:lq"
  xmlns:xs="http://www.w3.org/2001/XMLSchema"

  &lt;xs:element name="locationSubscription"&gt;
    &lt;xs:complexType&gt;
      &lt;xs:sequence&gt;
        &lt;xs:element name="what" type="loc-event:subscribeFor"
                    minOccurs="1" maxOccurs="1"/&gt;

        &lt;xs:element name="when" type="loc-event:trigger"
                    minOccurs="1" maxOccurs="1"/&gt;
      &lt;/xs:sequence&gt;
    &lt;/xs:complexType&gt;
  &lt;/xs:element&gt;

  &lt;xs:complexType name="subscribeFor"&gt;
    &lt;xs:complexContent&gt;
      &lt;xs:restriction base="xs:anyType"&gt;
        &lt;xs:sequence&gt;
          &lt;xs:element name="locationType"
                      type="loc-event:locationType"
                      minOccurs="1" maxOccurs="1"/&gt;

          &lt;xs:element name="QoP" type="qop:quality"
                      minOccurs="0" maxOccurs="1"/&gt;

          &lt;xs:any namespace="##other" processContents="lax"
                  minOccurs="0"  maxOccurs="unbounded"/&gt;
        &lt;/xs:sequence&gt;
        &lt;xs:anyAttribute namespace="##any" processContents="lax"/&gt;
      &lt;/xs:restriction&gt;
    &lt;/xs:complexContent&gt;
  &lt;/xs:complexType&gt;

  &lt;xs:simpleType name="locationType"&gt;
    &lt;xs:restriction base="xs:token"&gt;
      &lt;xs:enumeration value="any"/&gt;
      &lt;xs:enumeration value="civic"/&gt;
      &lt;xs:enumeration value="geodetic"/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;

  &lt;xs:complexType name="trigger"&gt;
    &lt;xs:complexContent&gt;
      &lt;xs:restriction base="xs:anyType"&gt;
        &lt;xs:sequence&gt;
          &lt;xs:element name="updateInterval"
                 type="loc-event:intervalType"/&gt;

          &lt;xs:element name="attachmentChange" type="xs:boolean"
                      minOccurs="0" maxOccurs="1"/&gt;

          &lt;xs:any namespace="##other" processContents="lax"
                  minOccurs="0"  maxOccurs="unbounded"/&gt;
        &lt;/xs:sequence&gt;
        &lt;xs:anyAttribute namespace="##any" processContents="lax"/&gt;
      &lt;/xs:restriction&gt;
    &lt;/xs:complexContent&gt;
  &lt;/xs:complexType&gt;

  &lt;xs:complexType name="intervalType"&gt;
    &lt;xs:simpleContent&gt;
      &lt;xs:extension base="xs:positiveInteger"&gt;
        &lt;xs:attribute name="notificationCount"
          type="xs:positiveInteger"
                      use="optional" default="1"/&gt;
      &lt;/xs:extension&gt;
    &lt;/xs:simpleContent&gt;
  &lt;/xs:complexType&gt;
&lt;/xs:schema&gt;
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: XML Schema for Subscription Body&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Examples</h3>

<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1"></a><h3>7.1.&nbsp;
Example 1</h3>

<p> In this example emergency application 1, emgapp1, is subscribing for the location
          information associated is xyzabc being service by the LIS at example.com. The emergency
          application would like to get geodetic location information, updated every 10 seconds or
          when xyzabc changes wireless access points. The subscription is for a duration of 30
          minutes. 
</p><br /><hr class="insert" />
<a name="ex1-1"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
SUBSCRIBE sip:xyzabc@lis.example.com SIP/2.0
Via: SIP/2.0/TCP emergency.emergizone.com;branch=z9hG4bKnashds7
To: &lt;sip:xyzabc@lis.example.com&gt;
From: &lt;sip:emgapp1@emergizone.com&gt;;tag=xfg9
Call-ID: 2010@emergency.emergizone.com
CSeq: 17766 SUBSCRIBE
Max-Forwards: 70
Event: loc-event
Accept: application/held+xml
Contact: &lt;sip:emgapp1@emergency.emergizone.com&gt;
Expires: 1800
Content-Type: application/loc-event+xml
Content-Length: 330

&lt;?xml version="1.0"?&gt;
&lt;locationSubscription xmlns="urn:ietf:params:xml:ns:loc-event"&gt;
  &lt;what&gt;
    &lt;locationType&gt;
      geodetic
    &lt;/locationType&gt;
  &lt;/what&gt;
  &lt;when&gt;
    &lt;updateInterval&gt;
      10
    &lt;/updateInterval&gt;
    &lt;attachmentChange&gt;
      yes
    &lt;/attachmentChange&gt;
  &lt;/when&gt;
&lt;/locationSubscription&gt;

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3: SUBSCRIBE Message&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p> The successful response to the subscription shown in <a class='info' href='#ex1-1'>Figure&nbsp;3<span> (</span><span class='info'>SUBSCRIBE Message</span><span>)</span></a> is a 200 OK
          followed almost immediately by a NOTIFY containing the requested location. This is shown
          in <a class='info' href='#ex1-2'>Figure&nbsp;4<span> (</span><span class='info'>NOTIFY Message with Location Information</span><span>)</span></a>. 
</p><br /><hr class="insert" />
<a name="ex1-2"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
NOTIFY sip:emgapp1@emergizone.com SIP/2.0
Via: SIP/2.0/TCP lis.example.com;branch=z9hG4bKna998sk
From: &lt;sip:xyzabc@lis.example.com&gt;;tag=ffd2
To: &lt;sip:emgapp1@emergizone.com&gt;;tag=xfg9
Call-ID: 2010@emergency.emergizone.com
Event: loc-event
Subscription-State: active;expires=1790
Max-Forwards: 70
CSeq: 8775 NOTIFY
Contact: sip:lis.example.com
Content-Type: application/held+xml
Content-Length: 911

&lt;?xml version="1.0"?&gt;
&lt;locationResponse xmlns="urn:ietf:params:xml:ns:geopriv:held"&gt;
  &lt;presence xmlns="urn:ietf:params:xml:ns:pidf"
            entity="pres:xyzabc@lis.example.com"&gt;
    &lt;tuple id="3b650sf789nd"&gt;
      &lt;status&gt;
        &lt;geopriv xmlns="urn:ietf:params:xml:ns:pidf:geopriv10"&gt;
          &lt;location-info&gt;
            &lt;Point xmlns="http://www.opengis.net/gml"
                   srsName="urn:ogc:def:crs:EPSG::4326"&gt;
              &lt;pos&gt;-34.407 150.88001&lt;/pos&gt;
            &lt;/Point&gt;
          &lt;/location-info&gt;
          &lt;usage-rules&gt;
            &lt;retention-expiry&gt;
              2006-01-11T03:42:28+00:00
            &lt;/retention-expiry&gt;
          &lt;/usage-rules&gt;
          &lt;method&gt;
            Device-Assisted_A-GPS
          &lt;/method&gt;
        &lt;/geopriv&gt;
      &lt;/status&gt;
      &lt;timestamp&gt;2008-03-31T03:42:28+00:00&lt;/timestamp&gt;
    &lt;/tuple&gt;
  &lt;/presence&gt;
&lt;/locationResponse&gt;

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;4: NOTIFY Message with Location Information&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2"></a><h3>7.2.&nbsp;
Example 2</h3>

<p> An error message is returned when a problem with the subscription is encountered, for
          example the location URI that the subscriber subscribed too has expired or its usage count
          has been exceeded. This error message may look something like the NOTIFY shown in <a class='info' href='#ex2-1'>Figure&nbsp;5<span> (</span><span class='info'>NOTIFY Message with Error</span><span>)</span></a>. 
</p><br /><hr class="insert" />
<a name="ex2-1"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
NOTIFY sip:emgapp1@emergizone.com SIP/2.0
Via: SIP/2.0/TCP lis.example.com;branch=z9hG4bKna998sk
From: &lt;sip:xyzabc@lis.example.com&gt;;tag=ffd2
To: &lt;sip:emgapp1@emergizone.com&gt;;tag=xfg9
Call-ID: 2010@emergency.emergizone.com
Event: loc-event
Subscription-State: terminated;reason=noresource
Max-Forwards: 70
CSeq: 8775 NOTIFY
Contact: sip:lis.example.com
Content-Type: application/held+xml
Content-Length: 159

&lt;?xml version="1.0"?&gt;
&lt;error xmlns="urn:ietf:params:xml:ns:geopriv:held"
       code="locationUnknown"
       message="Unable to determine location"/&gt;

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;5: NOTIFY Message with Error&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="security-considerations"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Security Considerations</h3>

<p> TBD. 
</p>
<a name="iana"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
IANA Considerations</h3>

<a name="anchor19"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.1"></a><h3>9.1.&nbsp;
HELD Error Token Registration</h3>

<p> Reference: RFC-XXXX (i.e., this document) requires the following new HELD error code to
          be added to the HELD error code respository defined in <a class='info' href='#I-D.ietf-geopriv-http-location-delivery'>[I&#8209;D.ietf&#8209;geopriv&#8209;http&#8209;location&#8209;delivery]<span> (</span><span class='info'>Barnes, M., Winterbottom, J., Thomson, M., and B. Stark, &ldquo;HTTP Enabled Location Delivery (HELD),&rdquo; August&nbsp;2009.</span><span>)</span></a>. </p>
<blockquote class="text">
<p>Error code: intervalTooShort
</p>
</blockquote><p>
        
</p>
<a name="anchor20"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.2"></a><h3>9.2.&nbsp;
URN Sub-Namespace Registration for urn:ietf:params:xml:ns:loc-event</h3>

<p> This section registers a new XML namespace, <tt>urn:ietf:params:xml:ns:loc-event</tt>, as per the guidelines in <a class='info' href='#RFC3688'>[RFC3688]<span> (</span><span class='info'>Mealling, M., &ldquo;The IETF XML Registry,&rdquo; January&nbsp;2004.</span><span>)</span></a>. </p>
<blockquote class="text">
<p>URI: urn:ietf:params:xml:ns:loc-event
</p>
<p>Registrant Contact: IETF, SIP working group, (sip@ietf.org), James
              Winterbottom (james.winterbottom@andrew.com).
</p>
<p>XML: </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
BEGIN
&lt;?xml version="1.0"?&gt;
  &lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;
  &lt;html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"&gt;
    &lt;head&gt;
      &lt;title&gt;Location Information Subscription Event Package&lt;/title&gt;
    &lt;/head&gt;
    &lt;body&gt;
      &lt;h1&gt;Namespace for the Location Information
          Subscription Application Event Package
      &lt;/h1&gt;
      &lt;h2&gt;urn:ietf:params:xml:ns:loc-event&lt;/h2&gt;
[[NOTE TO IANA/RFC-EDITOR: Please update RFC URL and replace XXXX
    with the RFC number for this specification.]]
      &lt;p&gt;See &lt;a href="[[RFC URL]]"&gt;RFCXXXX&lt;/a&gt;.&lt;/p&gt;
    &lt;/body&gt;
  &lt;/html&gt;
END
</pre></div><p>

            
</p>
</blockquote><p>
        
</p>
<a name="anchor21"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.3"></a><h3>9.3.&nbsp;
XML Schema Registration</h3>

<p> This section registers an XML schema as per the guidelines in <a class='info' href='#RFC3688'>[RFC3688]<span> (</span><span class='info'>Mealling, M., &ldquo;The IETF XML Registry,&rdquo; January&nbsp;2004.</span><span>)</span></a>.
            </p>
<blockquote class="text"><dl>
<dt>URI:</dt>
<dd>urn:ietf:params:xml:schema:loc-event
</dd>
<dt>Registrant Contact:</dt>
<dd>IETF, SIP working group, (sip@ietf.org), James
              Winterbottom (james.winterbottom@andrew.com).
</dd>
<dt>Schema:</dt>
<dd>The XML for this schema can be found as the entirety of <a class='info' href='#schema'>Section&nbsp;6<span> (</span><span class='info'>Schema</span><span>)</span></a> of this document. 
</dd>
</dl></blockquote><p>
        
</p>
<a name="anchor22"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.4"></a><h3>9.4.&nbsp;
MIME Media Type Registration for 'application/loc-event+xml'</h3>

<p>This section registers the <tt>application/loc-event+xml</tt> MIME type.
            </p>
<blockquote class="text"><dl>
<dt>To:</dt>
<dd>ietf-types@iana.org
</dd>
<dt>Subject:</dt>
<dd>Registration of MIME media type application/loc-event+xml
</dd>
<dt>MIME media type name:</dt>
<dd>application
</dd>
<dt>MIME subtype name:</dt>
<dd>loc-event+xml
</dd>
<dt>Required parameters:</dt>
<dd>(none)
</dd>
<dt>Optional parameters:</dt>
<dd>charsetIndicates the character encoding of
              enclosed XML. Default is UTF-8.
</dd>
<dt>Encoding considerations:</dt>
<dd>Uses XML, which can employ 8-bit characters,
              depending on the character encoding used. See <a class='info' href='#RFC3023'>RFC 3023<span> (</span><span class='info'>Murata, M., St. Laurent, S., and D. Kohn, &ldquo;XML Media Types,&rdquo; January&nbsp;2001.</span><span>)</span></a> [RFC3023],
              section 3.2.
</dd>
<dt>Security considerations:</dt>
<dd>This content type is designed to carry protocol
              data related to the location of an entity, which could include information that is
              considered private. Appropriate precautions should be taken to limit disclosure of
              this information. 
</dd>
<dt>Interoperability considerations:</dt>
<dd>This content type provides a basis for a
              protocol
</dd>
<dt>Published specification:</dt>
<dd>RFC XXXX [[NOTE TO IANA/RFC-EDITOR: Please
              replace XXXX with the RFC number for this specification.]]
</dd>
<dt>Applications which use this media type:</dt>
<dd>Location information consumers.
</dd>
<dt>Additional Information:</dt>
<dd>Magic Number(s): (none)File extension(s):
              .xml<br />
Macintosh File Type Code(s): (none)
</dd>
<dt>Person &amp; email address to contact for further information:</dt>
<dd>James
              Winterbottom &lt;james.winterbottom@andrew.com&gt;
</dd>
<dt>Intended usage:</dt>
<dd>LIMITED USE
</dd>
<dt>Author/Change controller:</dt>
<dd>This specification is TBD
</dd>
<dt>Other information:</dt>
<dd>This media type is a specialization of <a class='info' href='#RFC3023'>application/xml<span> (</span><span class='info'>Murata, M., St. Laurent, S., and D. Kohn, &ldquo;XML Media Types,&rdquo; January&nbsp;2001.</span><span>)</span></a> [RFC3023], and many of the considerations described
              there also apply to application/loc-event+xml.
</dd>
</dl></blockquote><p>
        
</p>
<a name="anchor23"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.5"></a><h3>9.5.&nbsp;
Event Package Registration</h3>

<p> This specification registers an event package, based on the registration procedures
          defined in RFC3265 <a class='info' href='#RFC3265'>[RFC3265]<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a>. The following is the information required for
          such a registration: </p>
<blockquote class="text"><dl>
<dt>Package Name:</dt>
<dd>loc-event
</dd>
<dt>Package or Template-Package:</dt>
<dd>This is a Package
</dd>
<dt>Published Document:</dt>
<dd>RFC XXXX [[NOTE TO IANA/RFC-EDITOR: Please replace
              XXXX with the RFC number for this specification.]]
</dd>
<dt>Person or Contact:</dt>
<dd>James Winterbottom, james.winterbottom@andrew.com
</dd>
</dl></blockquote><p>
        
</p>
<a name="anchor24"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
Acknowledgements</h3>

<p> We would like to thank Miguel Garcia and Brian Rosen for their comments.
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11"></a><h3>11.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>11.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3693">[RFC3693]</a></td>
<td class="author-text">Cuellar, J., Morris, J., Mulligan, D., Peterson, J., and J. Polk, &ldquo;<a href="http://tools.ietf.org/html/rfc3693">Geopriv Requirements</a>,&rdquo; RFC&nbsp;3693, February&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3693.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3265">[RFC3265]</a></td>
<td class="author-text">Roach, A., &ldquo;<a href="http://tools.ietf.org/html/rfc3265">Session Initiation Protocol (SIP)-Specific Event Notification</a>,&rdquo; RFC&nbsp;3265, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3265.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3023">[RFC3023]</a></td>
<td class="author-text">Murata, M., St. Laurent, S., and D. Kohn, &ldquo;<a href="http://tools.ietf.org/html/rfc3023">XML Media Types</a>,&rdquo; RFC&nbsp;3023, January&nbsp;2001 (<a href="http://www.rfc-editor.org/rfc/rfc3023.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3688">[RFC3688]</a></td>
<td class="author-text">Mealling, M., &ldquo;<a href="http://tools.ietf.org/html/rfc3688">The IETF XML Registry</a>,&rdquo; BCP&nbsp;81, RFC&nbsp;3688, January&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3688.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3859">[RFC3859]</a></td>
<td class="author-text">Peterson, J., &ldquo;<a href="http://tools.ietf.org/html/rfc3859">Common Profile for Presence (CPP)</a>,&rdquo; RFC&nbsp;3859, August&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3859.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3261">[RFC3261]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;<a href="http://tools.ietf.org/html/rfc3261">SIP: Session Initiation Protocol</a>,&rdquo; RFC&nbsp;3261, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3261.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-geopriv-lbyr-requirements">[I-D.ietf-geopriv-lbyr-requirements]</a></td>
<td class="author-text">Marshall, R., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-geopriv-lbyr-requirements-09.txt">Requirements for a Location-by-Reference Mechanism</a>,&rdquo; draft-ietf-geopriv-lbyr-requirements-09 (work in progress), November&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-geopriv-lbyr-requirements-09.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-geopriv-http-location-delivery">[I-D.ietf-geopriv-http-location-delivery]</a></td>
<td class="author-text">Barnes, M., Winterbottom, J., Thomson, M., and B. Stark, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-geopriv-http-location-delivery-16.txt">HTTP Enabled Location Delivery (HELD)</a>,&rdquo; draft-ietf-geopriv-http-location-delivery-16 (work in progress), August&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-geopriv-http-location-delivery-16.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-geopriv-l7-lcp-ps">[I-D.ietf-geopriv-l7-lcp-ps]</a></td>
<td class="author-text">Tschofenig, H. and H. Schulzrinne, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-geopriv-l7-lcp-ps-10.txt">GEOPRIV Layer 7 Location Configuration Protocol; Problem Statement and Requirements</a>,&rdquo; draft-ietf-geopriv-l7-lcp-ps-10 (work in progress), July&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-geopriv-l7-lcp-ps-10.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>11.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC4079">[RFC4079]</a></td>
<td class="author-text">Peterson, J., &ldquo;<a href="http://tools.ietf.org/html/rfc4079">A Presence Architecture for the Distribution of GEOPRIV Location Objects</a>,&rdquo; RFC&nbsp;4079, July&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4079.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3856">[RFC3856]</a></td>
<td class="author-text">Rosenberg, J., &ldquo;<a href="http://tools.ietf.org/html/rfc3856">A Presence Event Package for the Session Initiation Protocol (SIP)</a>,&rdquo; RFC&nbsp;3856, August&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3856.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-geopriv-pdif-lo-profile">[I-D.ietf-geopriv-pdif-lo-profile]</a></td>
<td class="author-text">Winterbottom, J., Thomson, M., and H. Tschofenig, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-geopriv-pdif-lo-profile-14.txt">GEOPRIV PIDF-LO Usage Clarification, Considerations and Recommendations</a>,&rdquo; draft-ietf-geopriv-pdif-lo-profile-14 (work in progress), November&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-geopriv-pdif-lo-profile-14.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.winterbottom-geopriv-deref-protocol">[I-D.winterbottom-geopriv-deref-protocol]</a></td>
<td class="author-text">Winterbottom, J., Tschofenig, H., Schulzrinne, H., Thomson, M., and M. Dawson, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-winterbottom-geopriv-deref-protocol-05.txt">A Location Dereferencing Protocol Using HELD</a>,&rdquo; draft-winterbottom-geopriv-deref-protocol-05 (work in progress), January&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-winterbottom-geopriv-deref-protocol-05.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4119">[RFC4119]</a></td>
<td class="author-text">Peterson, J., &ldquo;<a href="http://tools.ietf.org/html/rfc4119">A Presence-based GEOPRIV Location Object Format</a>,&rdquo; RFC&nbsp;4119, December&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4119.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4745">[RFC4745]</a></td>
<td class="author-text">Schulzrinne, H., Tschofenig, H., Morris, J., Cuellar, J., Polk, J., and J. Rosenberg, &ldquo;<a href="http://tools.ietf.org/html/rfc4745">Common Policy: A Document Format for Expressing Privacy Preferences</a>,&rdquo; RFC&nbsp;4745, February&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc4745.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-geopriv-policy">[I-D.ietf-geopriv-policy]</a></td>
<td class="author-text">Schulzrinne, H., Tschofenig, H., Morris, J., Cuellar, J., and J. Polk, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-geopriv-policy-21.txt">Geolocation Policy: A Document Format for Expressing Privacy Preferences for Location Information</a>,&rdquo; draft-ietf-geopriv-policy-21 (work in progress), January&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-geopriv-policy-21.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.winterbottom-geopriv-held-context">[I-D.winterbottom-geopriv-held-context]</a></td>
<td class="author-text">Winterbottom, J., Tschofenig, H., and M. Thomson, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-winterbottom-geopriv-held-context-05.txt">Location URI Contexts in HTTP-Enabled Location Delivery (HELD)</a>,&rdquo; draft-winterbottom-geopriv-held-context-05 (work in progress), October&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-winterbottom-geopriv-held-context-05.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.thomson-geopriv-location-quality">[I-D.thomson-geopriv-location-quality]</a></td>
<td class="author-text">Thomson, M. and J. Winterbottom, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-thomson-geopriv-location-quality-05.txt">Specifying Location Quality Requirements in Location Protocols</a>,&rdquo; draft-thomson-geopriv-location-quality-05 (work in progress), January&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-thomson-geopriv-location-quality-05.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-geopriv-loc-filters">[I-D.ietf-geopriv-loc-filters]</a></td>
<td class="author-text">Mahy, R., Rosen, B., and H. Tschofenig, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-geopriv-loc-filters-11.txt">Filtering Location Notifications in the Session Initiation Protocol (SIP)</a>,&rdquo; draft-ietf-geopriv-loc-filters-11 (work in progress), March&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-geopriv-loc-filters-11.txt">TXT</a>).</td></tr>
</table>

<a name="appendixA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
Subscription Examples</h3>

<p> The exmaples in this appendix should be regarded as non-normative, that is that they are
        for informational purposes only. There intent is to demonstrate that other geoprive location
        request criteria can easily be included into the framework described in this document. 
</p>
<a name="anchor27"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.1"></a><h3>A.1.&nbsp;
Requesting a Quality of Position</h3>

<p> It is quite common for applications to want loation to be provided as a set of
          coordinates, latitude, longitude and optionally alitutde, and an area of uncertainty. The
          document <a class='info' href='#I-D.thomson-geopriv-location-quality'>[I&#8209;D.thomson&#8209;geopriv&#8209;location&#8209;quality]<span> (</span><span class='info'>Thomson, M. and J. Winterbottom, &ldquo;Specifying Location Quality Requirements in Location Protocols,&rdquo; January&nbsp;2010.</span><span>)</span></a> describes a means by which
          location information of a specific accuracy and/or confidence can be requested. Together
          these characteristics are referred to as the Quality of Position (QoP). The following
          example show how a location subscription can be constructed including QoP
          parameters based on the scheme provided in <a class='info' href='#I-D.thomson-geopriv-location-quality'>[I&#8209;D.thomson&#8209;geopriv&#8209;location&#8209;quality]<span> (</span><span class='info'>Thomson, M. and J. Winterbottom, &ldquo;Specifying Location Quality Requirements in Location Protocols,&rdquo; January&nbsp;2010.</span><span>)</span></a>, the location provided in the subsequent
          location response messages should also comply with <a class='info' href='#I-D.thomson-geopriv-location-quality'>[I&#8209;D.thomson&#8209;geopriv&#8209;location&#8209;quality]<span> (</span><span class='info'>Thomson, M. and J. Winterbottom, &ldquo;Specifying Location Quality Requirements in Location Protocols,&rdquo; January&nbsp;2010.</span><span>)</span></a>. 
</p><br /><hr class="insert" />
<a name="exAAP-QoP1"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;locationSubscription xmlns="urn:ietf:params:xml:ns:loc-event"&gt;
  &lt;what&gt;
    &lt;locationType&gt;geodetic&lt;/locationType&gt;
    &lt;quality xmlns="urn:ietf:params:xml:ns:geopriv:lq"&gt;
      &lt;maxUncertainty confidence="95"&gt;
        &lt;horizontal&gt;150&lt;/horizontal&gt;
        &lt;vertical&gt;1000&lt;/vertical&gt;
      &lt;/maxUncertainty&gt;
      &lt;maxAge&gt;PT30S&lt;/maxAge&gt;
    &lt;/quality&gt;
  &lt;/what&gt;
  &lt;when&gt;
    &lt;updateInterval&gt;
      180
    &lt;/updateInterval&gt;
    &lt;attachmentChange&gt;
      true
    &lt;/attachmentChange&gt;
  &lt;/when&gt;
&lt;/locationSubscription&gt;

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;6: Subscribing for Location with a Quality of Position&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor28"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.2"></a><h3>A.2.&nbsp;
Inclusion of Mahy Loc-Filters</h3>

<p> Rohan Mahy produced an early specification <a class='info' href='#I-D.ietf-geopriv-loc-filters'>[I&#8209;D.ietf&#8209;geopriv&#8209;loc&#8209;filters]<span> (</span><span class='info'>Mahy, R., Rosen, B., and H. Tschofenig, &ldquo;Filtering Location Notifications in the Session Initiation Protocol (SIP),&rdquo; March&nbsp;2010.</span><span>)</span></a>
          that described how specific location events and triggers could be defined in an XML
          document. This work is easily included into the framework. 
</p>
<p> In this example the LIS is to generate a noficiation if the Target moves horizontally by
          more than 20 metres, or vertical by more than 10 metres. The LIS should provide an update
          every 3 minutes regardless of the Target movements, or when the Target changes its point
          of attachment to the network. 
</p><br /><hr class="insert" />
<a name="exAAP-LF-1"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;locationSubscription xmlns="urn:ietf:params:xml:ns:loc-event"&gt;
  &lt;what&gt;
    &lt;locationType&gt;civic&lt;/locationType&gt;
  &lt;/what&gt;
  &lt;when&gt;
    &lt;updateInterval&gt;
      180
    &lt;/updateInterval&gt;
    &lt;attachmentChange&gt;
      true
    &lt;/attachmentChange&gt;
    &lt;location-filter
        xmlns="urn:ietf:params:xml:ns:pidf:geopriv10:containment"&gt;
     &lt;movedHoriz uom="urn:ogc:def:uom:EPSG::9001"&gt;20&lt;/movedHoriz&gt;
     &lt;movedVert uom="urn:ogc:def:uom:EPSG::9001"&gt;3&lt;/movedVert&gt;
    &lt;/location-filter&gt;
  &lt;/when&gt;
&lt;/locationSubscription&gt;
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;7: Subscribing for Location of Location Constrained Target&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p> In this example LIS is to generate a noficiation if the Target exceeds a speed of 3 MPH.
          The LIS should provide an update every 3 minutes regardless of the Target movements, or
          when the Target changes its point of attachment to the network. 
</p><br /><hr class="insert" />
<a name="exAAP-LF-2"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;locationSubscription xmlns="urn:ietf:params:xml:ns:loc-event"&gt;
  &lt;what&gt;
    &lt;locationType&gt;civic&lt;/locationType&gt;
  &lt;/what&gt;
  &lt;when&gt;
    &lt;updateInterval&gt;
      60
    &lt;/updateInterval&gt;
    &lt;location-filter
      xmlns="urn:ietf:params:xml:ns:pidf:geopriv10:containment"&gt;
      &lt;speedExceeds uom="#mps"&gt;3&lt;/speedExceeds&gt;
    &lt;/location-filter&gt;
  &lt;/when&gt;
&lt;/locationSubscription&gt;
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;8: Subscribing for Location of a Speed Limited Target&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p> This final filters example shows how the entry or exit of a specific polygon by the
          Target can be subscribed to using the framework. 
</p><br /><hr class="insert" />
<a name="exAAP-LF-3"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;locationSubscription xmlns="urn:ietf:params:xml:ns:loc-event"&gt;
  &lt;what&gt;
    &lt;locationType&gt;civic&lt;/locationType&gt;
  &lt;/what&gt;
  &lt;when&gt;
    &lt;updateInterval&gt;
      60
    &lt;/updateInterval&gt;
    &lt;location-filter
      xmlns="urn:ietf:params:xml:ns:pidf:geopriv10:containment"&gt;
      &lt;enterOrExit&gt;
        &lt;gml:Polygon
             srsName="urn:ogc:def:crs:EPSG::4326"
             xmlns:gml="http://www.opengis.net/gml"&gt;
          &lt;gml:exterior&gt;
            &lt;gml:LinearRing&gt;
              &lt;gml:posList&gt;
                37.41188 -121.93243
                37.41142 -121.93243
                37.41142 -121.93132
                37.41188 -121.93132
                37.41188 -121.93243
              &lt;/gml:posList&gt;
            &lt;/gml:LinearRing&gt;
          &lt;/gml:exterior&gt;
        &lt;/gml:Polygon&gt;
      &lt;/enterOrExit&gt;
    &lt;/location-filter&gt;
  &lt;/when&gt;
&lt;/locationSubscription&gt;

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;9: Subscribing for Location of Target in a Polygon&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">James Winterbottom</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Andrew Corporation</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">PO Box U40</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Wollongong University Campus, NSW  2500</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">AU</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+61 2 4221 2938</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:james.winterbottom@andrew.com">james.winterbottom@andrew.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.andrew.com/">http://www.andrew.com/</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Martin Thomson</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Andrew Corporation</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">PO Box U40</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Wollongong University Campus, NSW  2500</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">AU</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+61 2 4221 2915</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:martin.thomson@andrew.com">martin.thomson@andrew.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.andrew.com/">http://www.andrew.com/</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Hannes Tschofenig</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia Siemens Networks</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Linnoitustie 6</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Espoo,   02600</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+358 (50) 4871445</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:Hannes.Tschofenig@nsn.com">Hannes.Tschofenig@nsn.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.tschofenig.priv.at">http://www.tschofenig.priv.at</a></td></tr>
</table>
<a name="rfc.copyright"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Full Copyright Statement</h3>
<p class='copyright'>
Copyright &copy; The IETF Trust (2008).</p>
<p class='copyright'>
This document is subject to the rights,
licenses and restrictions contained in BCP&nbsp;78,
and except as set forth therein,
the authors retain all their rights.</p>
<p class='copyright'>
This document and the information contained herein are provided
on an &ldquo;AS IS&rdquo; basis and THE CONTRIBUTOR,
THE ORGANIZATION HE/SHE REPRESENTS
OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE.</p>
<h3>Intellectual Property</h3>
<p class='copyright'>
The IETF takes no position regarding the validity or scope of any
Intellectual Property Rights or other rights that might be claimed
to pertain to the implementation or use of the technology
described in this document or the extent to which any license
under such rights might or might not be available; nor does it
represent that it has made any independent effort to identify any
such rights.
Information on the procedures with respect to
rights in RFC documents can be found in BCP&nbsp;78 and BCP&nbsp;79.</p>
<p class='copyright'>
Copies of IPR disclosures made to the IETF Secretariat and any
assurances of licenses to be made available,
or the result of an attempt made to obtain a general license or
permission for the use of such proprietary rights by implementers or
users of this specification can be obtained from the IETF on-line IPR
repository at <a href='http://www.ietf.org/ipr'>http://www.ietf.org/ipr</a>.</p>
<p class='copyright'>
The IETF invites any interested party to bring to its attention
any copyrights,
patents or patent applications,
or other
proprietary rights that may cover technology that may be required
to implement this standard.
Please address the information to the IETF at <a href='mailto:ietf-ipr@ietf.org'>ietf-ipr@ietf.org</a>.</p>
</body></html>
