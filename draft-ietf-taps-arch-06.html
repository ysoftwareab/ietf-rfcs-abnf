<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>An Architecture for Transport Services</title>
<meta content="Tommy Pauly" name="author">
<meta content="Brian Trammell" name="author">
<meta content="Anna Brunstrom" name="author">
<meta content="Godred Fairhurst" name="author">
<meta content="Colin Perkins" name="author">
<meta content="Philipp S. Tiesel" name="author">
<meta content="Chris Wood" name="author">
<meta content="
       This document describes an architecture for exposing transport protocol features to applications for network communication, the Transport Services architecture. The Transport Services Application Programming Interface (API) is based on an asynchronous, event-driven interaction pattern. It uses messages for representing data transfer to applications, and it assumes an implementation that can use multiple IP addresses, multiple protocols, and multiple paths, and provide multiple application streams. This document further defines common terminology and concepts to be used in definitions of Transport Services APIs and implementations. 
    " name="description">
<meta content="xml2rfc 2.37.2" name="generator">
<meta content="Internet-Draft" name="keyword">
<meta content="draft-ietf-taps-arch-06" name="ietf.draft">
<link href="/tmp/draft-ietf-taps-arch-06-ePL54j.xml" type="application/rfc+xml" rel="alternate">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Avoid wrapping of URLs in references */
@media screen {
  .references a {
    white-space: nowrap;
  }
}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin: 0 0 0.25em 0;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}</style>
<link href="rfc-local.css" type="text/css" rel="stylesheet">
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">TAPS Architecture</td>
<td class="right">December 2019</td>
</tr></thead>
<tfoot><tr>
<td class="left">Pauly, et al.</td>
<td class="center">Expires 25 June 2020</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">TAPS Working Group</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-ietf-taps-arch-06</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2019-12-23" class="published">23 December 2019</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2020-06-25">25 June 2020</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">T. Pauly, <span class="editor">Ed.</span>
</div>
<div class="org">Apple Inc.</div>
</div>
<div class="author">
      <div class="author-name">B. Trammell, <span class="editor">Ed.</span>
</div>
<div class="org">Google</div>
</div>
<div class="author">
      <div class="author-name">A. Brunstrom</div>
<div class="org">Karlstad University</div>
</div>
<div class="author">
      <div class="author-name">G. Fairhurst</div>
<div class="org">University of Aberdeen</div>
</div>
<div class="author">
      <div class="author-name">C. Perkins</div>
<div class="org">University of Glasgow</div>
</div>
<div class="author">
      <div class="author-name">P. Tiesel</div>
<div class="org">TU Berlin</div>
</div>
<div class="author">
      <div class="author-name">C. Wood</div>
<div class="org">Apple Inc.</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">An Architecture for Transport Services</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document describes an architecture for exposing transport protocol features to applications for network communication, the Transport Services architecture. The Transport Services Application Programming Interface (API) is based on an asynchronous, event-driven interaction pattern. It uses messages for representing data transfer to applications, and it assumes an implementation that can use multiple IP addresses, multiple protocols, and multiple paths, and provide multiple application streams. This document further defines common terminology and concepts to be used in definitions of Transport Services APIs and implementations.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 25 June 2020.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2019 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a><a href="#section-toc.1-1.1.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1"><a href="#section-1.1" class="xref">1.1</a>.  <a href="#name-background" class="xref">Background</a><a href="#section-toc.1-1.1.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-toc.1-1.1.2.2">
                <p id="section-toc.1-1.1.2.2.1"><a href="#section-1.2" class="xref">1.2</a>.  <a href="#name-overview" class="xref">Overview</a><a href="#section-toc.1-1.1.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-toc.1-1.1.2.3">
                <p id="section-toc.1-1.1.2.3.1"><a href="#section-1.3" class="xref">1.3</a>.  <a href="#name-specification-of-requiremen" class="xref">Specification of Requirements</a><a href="#section-toc.1-1.1.2.3.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="xref">2</a>.  <a href="#name-api-model" class="xref">API Model</a><a href="#section-toc.1-1.2.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1"><a href="#section-2.1" class="xref">2.1</a>.  <a href="#name-event-driven-api" class="xref">Event-Driven API</a><a href="#section-toc.1-1.2.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-toc.1-1.2.2.2">
                <p id="section-toc.1-1.2.2.2.1"><a href="#section-2.2" class="xref">2.2</a>.  <a href="#name-data-transfer-using-message" class="xref">Data Transfer Using Messages</a><a href="#section-toc.1-1.2.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-toc.1-1.2.2.3">
                <p id="section-toc.1-1.2.2.3.1"><a href="#section-2.3" class="xref">2.3</a>.  <a href="#name-flexibile-implementation" class="xref">Flexibile Implementation</a><a href="#section-toc.1-1.2.2.3.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-design-principles" class="xref">Design Principles</a><a href="#section-toc.1-1.3.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="xref">3.1</a>.  <a href="#name-common-apis-for-common-feat" class="xref">Common APIs for Common Features</a><a href="#section-toc.1-1.3.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="xref">3.2</a>.  <a href="#name-access-to-specialized-featu" class="xref">Access to Specialized Features</a><a href="#section-toc.1-1.3.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a href="#section-3.3" class="xref">3.3</a>.  <a href="#name-scope-for-api-and-implement" class="xref">Scope for API and Implementation Definitions</a><a href="#section-toc.1-1.3.2.3.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-transport-services-architec" class="xref">Transport Services Architecture and Concepts</a><a href="#section-toc.1-1.4.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="xref">4.1</a>.  <a href="#name-transport-services-api-conc" class="xref">Transport Services API Concepts</a><a href="#section-toc.1-1.4.2.1.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.4.2.1.2.1">
                    <p id="section-toc.1-1.4.2.1.2.1.1"><a href="#section-4.1.1" class="xref">4.1.1</a>.  <a href="#name-connections-and-related-obj" class="xref">Connections and Related Objects</a><a href="#section-toc.1-1.4.2.1.2.1.1" class="pilcrow">¶</a></p>
</li>
                  <li class="toc ulEmpty" id="section-toc.1-1.4.2.1.2.2">
                    <p id="section-toc.1-1.4.2.1.2.2.1"><a href="#section-4.1.2" class="xref">4.1.2</a>.  <a href="#name-pre-establishment" class="xref">Pre-Establishment</a><a href="#section-toc.1-1.4.2.1.2.2.1" class="pilcrow">¶</a></p>
</li>
                  <li class="toc ulEmpty" id="section-toc.1-1.4.2.1.2.3">
                    <p id="section-toc.1-1.4.2.1.2.3.1"><a href="#section-4.1.3" class="xref">4.1.3</a>.  <a href="#name-establishment-actions" class="xref">Establishment Actions</a><a href="#section-toc.1-1.4.2.1.2.3.1" class="pilcrow">¶</a></p>
</li>
                  <li class="toc ulEmpty" id="section-toc.1-1.4.2.1.2.4">
                    <p id="section-toc.1-1.4.2.1.2.4.1"><a href="#section-4.1.4" class="xref">4.1.4</a>.  <a href="#name-data-transfer-objects-and-a" class="xref">Data Transfer Objects and Actions</a><a href="#section-toc.1-1.4.2.1.2.4.1" class="pilcrow">¶</a></p>
</li>
                  <li class="toc ulEmpty" id="section-toc.1-1.4.2.1.2.5">
                    <p id="section-toc.1-1.4.2.1.2.5.1"><a href="#section-4.1.5" class="xref">4.1.5</a>.  <a href="#name-event-handling" class="xref">Event Handling</a><a href="#section-toc.1-1.4.2.1.2.5.1" class="pilcrow">¶</a></p>
</li>
                  <li class="toc ulEmpty" id="section-toc.1-1.4.2.1.2.6">
                    <p id="section-toc.1-1.4.2.1.2.6.1"><a href="#section-4.1.6" class="xref">4.1.6</a>.  <a href="#name-termination-actions" class="xref">Termination Actions</a><a href="#section-toc.1-1.4.2.1.2.6.1" class="pilcrow">¶</a></p>
</li>
                </ul>
</li>
              <li class="toc ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="xref">4.2</a>.  <a href="#name-transport-system-implementa" class="xref">Transport System Implementation Concepts</a><a href="#section-toc.1-1.4.2.2.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.4.2.2.2.1">
                    <p id="section-toc.1-1.4.2.2.2.1.1"><a href="#section-4.2.1" class="xref">4.2.1</a>.  <a href="#name-candidate-gathering" class="xref">Candidate Gathering</a><a href="#section-toc.1-1.4.2.2.2.1.1" class="pilcrow">¶</a></p>
</li>
                  <li class="toc ulEmpty" id="section-toc.1-1.4.2.2.2.2">
                    <p id="section-toc.1-1.4.2.2.2.2.1"><a href="#section-4.2.2" class="xref">4.2.2</a>.  <a href="#name-candidate-racing" class="xref">Candidate Racing</a><a href="#section-toc.1-1.4.2.2.2.2.1" class="pilcrow">¶</a></p>
</li>
                  <li class="toc ulEmpty" id="section-toc.1-1.4.2.2.2.3">
                    <p id="section-toc.1-1.4.2.2.2.3.1"><a href="#section-4.2.3" class="xref">4.2.3</a>.  <a href="#name-protocol-stack-equivalence" class="xref">Protocol Stack Equivalence</a><a href="#section-toc.1-1.4.2.2.2.3.1" class="pilcrow">¶</a></p>
</li>
                  <li class="toc ulEmpty" id="section-toc.1-1.4.2.2.2.4">
                    <p id="section-toc.1-1.4.2.2.2.4.1"><a href="#section-4.2.4" class="xref">4.2.4</a>.  <a href="#name-separating-connection-group" class="xref">Separating Connection Groups</a><a href="#section-toc.1-1.4.2.2.2.4.1" class="pilcrow">¶</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-iana-considerations" class="xref">IANA Considerations</a><a href="#section-toc.1-1.5.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-security-considerations" class="xref">Security Considerations</a><a href="#section-toc.1-1.6.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-acknowledgements" class="xref">Acknowledgements</a><a href="#section-toc.1-1.7.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-references" class="xref">References</a><a href="#section-toc.1-1.8.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="xref">8.1</a>.  <a href="#name-normative-references" class="xref">Normative References</a><a href="#section-toc.1-1.8.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a href="#section-8.2" class="xref">8.2</a>.  <a href="#name-informative-references" class="xref">Informative References</a><a href="#section-toc.1-1.8.2.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-appendix.a" class="xref"></a><a href="#name-authors-addresses" class="xref">Authors' Addresses</a><a href="#section-toc.1-1.9.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">Many application programming interfaces (APIs) to perform transport networking have been deployed, perhaps the most widely known and imitated being the BSD Socket <span>[<a href="#POSIX" class="xref">POSIX</a>]</span> interface. The naming of objects and functions across these APIs is not consistent, and varies depending on the protocol being used. For example, sending and receiving streams of data is conceptually the same for both an unencrypted Transmission Control Protocol (TCP) stream and operating on an encrypted Transport Layer Security (TLS) <span>[<a href="#RFC8446" class="xref">RFC8446</a>]</span> stream over TCP, but applications cannot use the same socket <code>send()</code> and <code>recv()</code> calls on top of both kinds of connections. Similarly, terminology for the implementation of transport protocols varies based on the context of the protocols themselves: terms such as "flow", "stream", "message", and "connection" can take on many different meanings. This variety can lead to confusion when trying to understand the similarities and differences between protocols, and how applications can use them effectively.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">The goal of the Transport Services architecture is to provide a common, flexible, and reusable interface for transport protocols. As applications adopt this interface, they will benefit from a wide set of transport features that can evolve over time, and ensure that the system providing the interface can optimize its behavior based on the application requirements and network conditions, without requiring changes to the applications. This flexibility enables faster deployment of new features and protocols. It can also support applications by offering racing and fallback mechanisms, which otherwise need to be implemented in each application separately.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">This document was developed in parallel with the specification of the Transport Services API <span>[<a href="#I-D.ietf-taps-interface" class="xref">I-D.ietf-taps-interface</a>]</span> and Implementation Guidelines <span>[<a href="#I-D.ietf-taps-impl" class="xref">I-D.ietf-taps-impl</a>]</span>. Although following the Transport Services Architecture does not require that all APIs and implementations are identical, a common minimal set of features represented in a consistent fashion will enable applications to be easily ported from one system to another.<a href="#section-1-3" class="pilcrow">¶</a></p>
<div id="background">
<section id="section-1.1">
        <h3 id="name-background">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-background" class="section-name selfRef">Background</a>
        </h3>
<p id="section-1.1-1">The Transport Services architecture is based on the survey of services provided by IETF transport protocols and congestion control mechanisms <span>[<a href="#RFC8095" class="xref">RFC8095</a>]</span>, and the distilled minimal set of the features offered by transport protocols <span>[<a href="#I-D.ietf-taps-minset" class="xref">I-D.ietf-taps-minset</a>]</span>. These documents identified common features and patterns across all transport protocols developed thus far in the IETF.<a href="#section-1.1-1" class="pilcrow">¶</a></p>
<p id="section-1.1-2">Since transport security is an increasingly relevant aspect of using transport protocols on the Internet, this architecture also considers the impact of transport security protocols on the feature-set exposed by transport services <span>[<a href="#I-D.ietf-taps-transport-security" class="xref">I-D.ietf-taps-transport-security</a>]</span>.<a href="#section-1.1-2" class="pilcrow">¶</a></p>
<p id="section-1.1-3">One of the key insights to come from identifying the minimal set of features provided by transport protocols <span>[<a href="#I-D.ietf-taps-minset" class="xref">I-D.ietf-taps-minset</a>]</span> was that features either require application interaction and guidance (referred to in that document as Functional or Optimizing Features), or else can be handled automatically by a system implementing Transport Services (referred to as Automatable Features). Among the Functional and Optimizing Features, some were common across all or nearly all transport protocols, while others could be seen as features that, if specified, would only be useful with a subset of protocols, but would not harm the functionality of other protocols. For example, some protocols can deliver messages faster for applications that do not require messages to arrive in the order in which they were sent. However, this functionality needs to be explicitly allowed by the application, since reordering messages would be undesirable in many cases.<a href="#section-1.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="overview">
<section id="section-1.2">
        <h3 id="name-overview">
<a href="#section-1.2" class="section-number selfRef">1.2. </a><a href="#name-overview" class="section-name selfRef">Overview</a>
        </h3>
<p id="section-1.2-1">This document describes the Transport Services architecture in three sections:<a href="#section-1.2-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-1.2-2.1">
            <a href="#model" class="xref">Section 2</a> describes how the API model of Transport Services differs from traditional socket-based APIs. Specifically, it offers asynchronous event-driven interaction, the use of messages for data transfer, and the ability to easily adopt different transport protocols.<a href="#section-1.2-2.1" class="pilcrow">¶</a>
</li>
          <li id="section-1.2-2.2">
            <a href="#design" class="xref">Section 3</a> explains the design principles behind the Transport Services API. These principles are intended to make sure that transport protocols can continue to be enhanced and evolve without requiring too many changes by application developers.<a href="#section-1.2-2.2" class="pilcrow">¶</a>
</li>
          <li id="section-1.2-2.3">
            <a href="#concepts" class="xref">Section 4</a> presents the Transport Services architecture diagram and defines the concepts that are used by both the API and implementation documents. The Preconnection allows applications to configure connection properties, and the Connection represents an object that can be used to send and receive Messages.<a href="#section-1.2-2.3" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="specification-of-requirements">
<section id="section-1.3">
        <h3 id="name-specification-of-requiremen">
<a href="#section-1.3" class="section-number selfRef">1.3. </a><a href="#name-specification-of-requiremen" class="section-name selfRef">Specification of Requirements</a>
        </h3>
<p id="section-1.3-1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
"SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
"OPTIONAL" in this document are to be interpreted as described in BCP 14
<span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="xref">RFC8174</a>]</span> when, and only when,
they appear in all capitals, as shown here.<a href="#section-1.3-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="model">
<section id="section-2">
      <h2 id="name-api-model">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-api-model" class="section-name selfRef">API Model</a>
      </h2>
<p id="section-2-1">The traditional model of using sockets for networking can be represented as follows:<a href="#section-2-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-2-2.1">Applications create connections and transfer data using the Socket API.<a href="#section-2-2.1" class="pilcrow">¶</a>
</li>
        <li id="section-2-2.2">The Socket API provides the interface to the implementations of TCP and UDP
(typically implemented in the system's kernel).<a href="#section-2-2.2" class="pilcrow">¶</a>
</li>
        <li id="section-2-2.3">TCP and UDP in the kernel send and receive data over the available network-layer interfaces.<a href="#section-2-2.3" class="pilcrow">¶</a>
</li>
        <li id="section-2-2.4">Sockets are bound directly to transport-layer and network-layer addresses,
obtained via a separate resolution step, usually performed by a
system-provided stub resolver.<a href="#section-2-2.4" class="pilcrow">¶</a>
</li>
      </ul>
<span id="name-socket-api-model"></span><div id="fig-sockets">
<figure id="figure-1">
        <div class="artwork art-text alignLeft" id="section-2-3.1">
<pre>
+-----------------------------------------------------+
|                    Application                      |
+-----------------------------------------------------+
        |                 |                  |
  +------------+     +------------+    +--------------+
  |    stub    |     | Stream API |    | Datagram API |
  |  resolver  |     +------------+    +--------------+
  +------------+          |                  |
                    +---------------------------------+
                    |    TCP                UDP       |
                    |    Kernel Networking Stack      |
                    +---------------------------------+
                                    |
+-----------------------------------------------------+
|               Network Layer Interface               |
+-----------------------------------------------------+

</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-socket-api-model" class="selfRef">Socket API Model</a>
        </figcaption></figure>
</div>
<p id="section-2-4">The Transport Services architecture evolves this general model of interaction, aiming to both modernize the API surface presented to applications by the transport layer and enrich the capabilities of the transport system implementation. It combines interfaces for multiple interaction patterns into a unified whole. By combining name resolution with connection establishment and data transfer in a single API, it allows for more flexible implementations to provide path and transport protocol agility on the application's behalf.<a href="#section-2-4" class="pilcrow">¶</a></p>
<span id="name-transport-services-api-mode"></span><div id="fig-taps">
<figure id="figure-2">
        <div class="artwork art-text alignLeft" id="section-2-5.1">
<pre>
+-----------------------------------------------------+
|                    Application                      |
+-----------------------------------------------------+
                          |
+-----------------------------------------------------+
|              Transport Services API                 |
+-----------------------------------------------------+
                          |
+-----------------------------------------------------+
|           Transport System Implementation           |
|  (Using: DNS, UDP, TCP, SCTP, DCCP, TLS, QUIC, etc) |
+-----------------------------------------------------+
                          |
+-----------------------------------------------------+
|               Network Layer Interface               |
+-----------------------------------------------------+

</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-transport-services-api-mode" class="selfRef">Transport Services API Model</a>
        </figcaption></figure>
</div>
<p id="section-2-6">The Transport Services API <span>[<a href="#I-D.ietf-taps-interface" class="xref">I-D.ietf-taps-interface</a>]</span> defines the mechanism for an application to create network connections and transfer data. The implementation <span>[<a href="#I-D.ietf-taps-impl" class="xref">I-D.ietf-taps-impl</a>]</span> is responsible for mapping the API to the various available transport protocols and managing the available network interfaces and paths.<a href="#section-2-6" class="pilcrow">¶</a></p>
<p id="section-2-7">There are key differences between the architecture of the Transport Services system and the architecture of the sockets API: the Transport Services API is asynchronous and event-driven; it uses messages for representing data transfer to applications, and it assumes an implementation that can use multiple IP addresses, multiple protocols, multiple paths, and provide multiple application streams.<a href="#section-2-7" class="pilcrow">¶</a></p>
<div id="event-driven-api">
<section id="section-2.1">
        <h3 id="name-event-driven-api">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-event-driven-api" class="section-name selfRef">Event-Driven API</a>
        </h3>
<p id="section-2.1-1">Originally, sockets presented a blocking interface for establishing connections and transferring data. However, most modern applications interact with the network asynchronously. Emulation of an asynchronous interface using sockets generally uses a try-and-fail model. If the application wants to read, but data has not yet been received from the peer, the call to read will fail. The application then waits and can try again later.<a href="#section-2.1-1" class="pilcrow">¶</a></p>
<p id="section-2.1-2">In contrast to sockets, all interaction with a Transport Services system is expected to be asynchronous, and use an event-driven model (see <a href="#events" class="xref">Section 4.1.5</a>). For example, if the application wants to read, its call to read will not complete immediately, but will deliver an event containing the received data once it is available. Error handling is also asynchronous; a failure to send results in an asynchronous send error as an event.<a href="#section-2.1-2" class="pilcrow">¶</a></p>
<p id="section-2.1-3">The Transport Services API also delivers events regarding the lifetime of a connection and changes in the available network links, which were not previously made explicit in sockets.<a href="#section-2.1-3" class="pilcrow">¶</a></p>
<p id="section-2.1-4">Using asynchronous events allows for a more natural interaction model when establishing connections and transferring data. Events in time more closely reflect the nature of interactions over networks, as opposed to how sockets represent network resources as file system objects that may be temporarily unavailable.<a href="#section-2.1-4" class="pilcrow">¶</a></p>
<p id="section-2.1-5">Separate from events, callbacks are also provided for asynchronous interactions with the API not directly related to events on the network or network interfaces.<a href="#section-2.1-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="data-transfer-using-messages">
<section id="section-2.2">
        <h3 id="name-data-transfer-using-message">
<a href="#section-2.2" class="section-number selfRef">2.2. </a><a href="#name-data-transfer-using-message" class="section-name selfRef">Data Transfer Using Messages</a>
        </h3>
<p id="section-2.2-1">Sockets provide a message interface for datagram protocols like UDP, but provide an unstructured stream abstraction for TCP. While TCP does indeed provide the ability to send and receive data as streams, most applications need to interpret structure within these streams. For example, HTTP/1.1 uses character delimiters to segment messages over a stream <span>[<a href="#RFC7230" class="xref">RFC7230</a>]</span>; TLS record headers carry a version, content type, and length <span>[<a href="#RFC8446" class="xref">RFC8446</a>]</span>; and HTTP/2 uses frames to segment its headers and bodies <span>[<a href="#RFC7540" class="xref">RFC7540</a>]</span>.<a href="#section-2.2-1" class="pilcrow">¶</a></p>
<p id="section-2.2-2">The Transport Services API represents data as messages, so that it more closely matches the way applications use the network. Providing a message-based abstraction provides many benefits, such as:<a href="#section-2.2-2" class="pilcrow">¶</a></p>
<ul>
<li id="section-2.2-3.1">the ability to associate deadlines with messages, for applications that care about timing;<a href="#section-2.2-3.1" class="pilcrow">¶</a>
</li>
          <li id="section-2.2-3.2">the ability to provide control of reliability, choosing which messages to retransmit when there is packet loss, and how best to make use of the data that arrived;<a href="#section-2.2-3.2" class="pilcrow">¶</a>
</li>
          <li id="section-2.2-3.3">the ability to manage dependencies between messages, when the transport system could decide to not deliver a message, either following packet loss or because it has missed a deadline. In particular, this can avoid (re-)sending data that relies on a previous transmission that was never received.<a href="#section-2.2-3.3" class="pilcrow">¶</a>
</li>
          <li id="section-2.2-3.4">the ability to automatically assign messages and connections to underlying transport connections to utilize multi-streaming and pooled connections.<a href="#section-2.2-3.4" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-2.2-4">Allowing applications to interact with messages is backwards-compatible with existings protocols and APIs, as it does not change the wire format of any protocol. Instead, it gives the protocol stack additional information to allow it to make better use of modern transport services, while simplifying the application's role in parsing data. For protocols which natively use a streaming abstraction, framers (<a href="#datatransfer" class="xref">Section 4.1.4</a>) bridge the gap between the two abstractions.<a href="#section-2.2-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="flexibile-implementation">
<section id="section-2.3">
        <h3 id="name-flexibile-implementation">
<a href="#section-2.3" class="section-number selfRef">2.3. </a><a href="#name-flexibile-implementation" class="section-name selfRef">Flexibile Implementation</a>
        </h3>
<p id="section-2.3-1">Sockets, for protocols like TCP, are generally limited to connecting to a single address over a single interface. They also present a single stream to the application. Software layers built upon sockets often propagate this limitation of a single-address single-stream model. The Transport Services architecture is designed to handle multiple candidate endpoints, protocols, and paths; and support multipath and multistreaming protocols.<a href="#section-2.3-1" class="pilcrow">¶</a></p>
<p id="section-2.3-2">Transport Services implementations are meant to be flexible at connection establishment time, considering many different options and trying to select the most optimal combinations (<a href="#gathering" class="xref">Section 4.2.1</a> and <a href="#racing" class="xref">Section 4.2.2</a>). This requires applications to provide higher-level endpoints than IP addresses, such as hostnames and URLs, which are used by a Transport Services implementation for resolution, path selection, and racing.<a href="#section-2.3-2" class="pilcrow">¶</a></p>
<p id="section-2.3-3">Flexibility after connection establishment is also important. Transport protocols that can migrate between multiple network-layer interfaces need to be able to process and react to interface changes. Protocols that support multiple application-layer streams need to support initiating and receiving new streams using existing connections.<a href="#section-2.3-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="design">
<section id="section-3">
      <h2 id="name-design-principles">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-design-principles" class="section-name selfRef">Design Principles</a>
      </h2>
<p id="section-3-1">The goal of the Transport Services architecture is to redefine the interface between applications and transports in a way that allows the transport layer to evolve and improve without fundamentally changing the contract with the application. This requires a careful consideration of how to expose the capabilities of protocols.<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">There are several degrees in which a Transport Services system is intended to offer flexibility to an application: it can provide access to multiple sets of protocols and protocol features; it can use these protocols across multiple paths that could have different performance and functional characteristics; and it can communicate with different remote systems to optimize performance, robustness to failure, or some other metric. Beyond these, if the API for the system remains the same over time, new protocols and features could be added to the system's implementation without requiring changes in applications for adoption.<a href="#section-3-2" class="pilcrow">¶</a></p>
<div id="common-apis-for-common-features">
<section id="section-3.1">
        <h3 id="name-common-apis-for-common-feat">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-common-apis-for-common-feat" class="section-name selfRef">Common APIs for Common Features</a>
        </h3>
<p id="section-3.1-1">Functionality that is common across multiple transport protocols SHOULD be accessible through a unified set of API calls. An application ought to be able to implement logic for its basic use of transport networking (establishing the transport, and sending and receiving data) once, and expect that implementation to continue to function as the transports change.<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<p id="section-3.1-2">Any Transport Services API is REQUIRED to allow access to the distilled minimal set of features offered by transport protocols <span>[<a href="#I-D.ietf-taps-minset" class="xref">I-D.ietf-taps-minset</a>]</span>.<a href="#section-3.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="access-to-specialized-features">
<section id="section-3.2">
        <h3 id="name-access-to-specialized-featu">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-access-to-specialized-featu" class="section-name selfRef">Access to Specialized Features</a>
        </h3>
<p id="section-3.2-1">There are applications that will need to control fine-grained details of transport protocols to optimize their behavior and ensure compatibility with remote systems. A Transport Services system therefore SHOULD also permit more specialized protocol features to be used. The interface for these specialized options ought to be exposed differently from the common options to ensure flexibility.<a href="#section-3.2-1" class="pilcrow">¶</a></p>
<p id="section-3.2-2">A specialized feature could be required by an application only when using a specific protocol, and not when using others. For example, if an application is using UDP, it could require control over the checksum or fragmentation behavior for UDP; if it used a protocol to frame its data over a byte stream like TCP, it would not need these options. In such cases, the API ought to expose the features in such a way that they take effect when a particular protocol is selected, but do not imply that only that protocol could be used. For example, if the API allows an application to specify a preference to use a partial checksum, communication would not fail when a protocol such as TCP is selected, which uses a checksum covering the entire payload.<a href="#section-3.2-2" class="pilcrow">¶</a></p>
<p id="section-3.2-3">Other specialized features, however, could be strictly required by an application and thus constrain the set of protocols that can be used. For example, if an application requires support for automatic handover or failover for a Connection, only protocol stacks that provide this feature are eligible to be used, e.g., protocol stacks that include a multipath protocol or a protocol that supports connection migration. A Transport Services API MUST allow applications to define such requirements and constrain the system's options. Since such options are not part of the core/common features, it will generally be simple for an application to modify its set of constraints and change the set of allowable protocol features without changing the core implementation.<a href="#section-3.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="scope-for-api-and-implementation-definitions">
<section id="section-3.3">
        <h3 id="name-scope-for-api-and-implement">
<a href="#section-3.3" class="section-number selfRef">3.3. </a><a href="#name-scope-for-api-and-implement" class="section-name selfRef">Scope for API and Implementation Definitions</a>
        </h3>
<p id="section-3.3-1">The Transport Services API is envisioned as the abstract model for a family of APIs that share a common way to expose transport features and encourage flexibility. The abstract API definition <span>[<a href="#I-D.ietf-taps-interface" class="xref">I-D.ietf-taps-interface</a>]</span> describes this interface and how it can be exposed to application developers.<a href="#section-3.3-1" class="pilcrow">¶</a></p>
<p id="section-3.3-2">Implementations that provide the Transport Services API <span>[<a href="#I-D.ietf-taps-impl" class="xref">I-D.ietf-taps-impl</a>]</span> will vary due to system-specific support and the needs of the deployment scenario. It is expected that all implementations of Transport Services will offer the entire mandatory API. All implementations are REQUIRED to offer an API that is sufficient to use the distilled minimal set of features offered by transport protocols <span>[<a href="#I-D.ietf-taps-minset" class="xref">I-D.ietf-taps-minset</a>]</span>, including API support for TCP and UDP transport. However, some features provided by this API will not be functional in certain implementations. For example, it is possible that some very constrained devices might not have a full TCP implementation beneath the API.<a href="#section-3.3-2" class="pilcrow">¶</a></p>
<p id="section-3.3-3">To preserve flexibility and compatibility with future protocols, top-level features in the Transport Services API SHOULD avoid referencing particular transport protocols. The mappings of these API features to specific implementations of each feature is explained in the <span>[<a href="#I-D.ietf-taps-impl" class="xref">I-D.ietf-taps-impl</a>]</span> along with the implications of the feature on existing protocols. It is expected that <span>[<a href="#I-D.ietf-taps-interface" class="xref">I-D.ietf-taps-interface</a>]</span> will be updated and supplemented as new protocols and protocol features are developed.<a href="#section-3.3-3" class="pilcrow">¶</a></p>
<p id="section-3.3-4">It is important to note that neither the Transport Services API <span>[<a href="#I-D.ietf-taps-interface" class="xref">I-D.ietf-taps-interface</a>]</span> nor the Implementation document <span>[<a href="#I-D.ietf-taps-impl" class="xref">I-D.ietf-taps-impl</a>]</span> define new protocols or protocol capabilities that affect what is communicated across the network: this implies that a Transport Services system MUST be deployable on only one side of a connection. A Transport Services system acting as a connection initiator can communicate with any existing system that implements the transport protocol(s) selected by the Transport Services system. Similarly, a Transport Services system acting as a listener can receive connections for any protocol that is supported by the system, from existing initiators.<a href="#section-3.3-4" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="concepts">
<section id="section-4">
      <h2 id="name-transport-services-architec">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-transport-services-architec" class="section-name selfRef">Transport Services Architecture and Concepts</a>
      </h2>
<p id="section-4-1">The concepts defined in this document are intended primarily for use in the documents and specifications that describe the Transport Services architecture and API. While the specific terminology can be used in some implementations, it is expected that there will remain a variety of terms used by running code.<a href="#section-4-1" class="pilcrow">¶</a></p>
<p id="section-4-2">The architecture divides the concepts for Transport Services into two categories:<a href="#section-4-2" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal" id="section-4-3">
        <li id="section-4-3.1">API concepts, which are intended to be exposed to applications; and<a href="#section-4-3.1" class="pilcrow">¶</a>
</li>
        <li id="section-4-3.2">System-implementation concepts, which are intended to be internally used when building systems that implement Transport Services.<a href="#section-4-3.2" class="pilcrow">¶</a>
</li>
      </ol>
<p id="section-4-4">The following diagram summarizes the top-level concepts in the architecture and how they relate to one another.<a href="#section-4-4" class="pilcrow">¶</a></p>
<span id="name-concepts-and-relationships-"></span><div id="fig-abstractions">
<figure id="figure-3">
        <div class="artwork art-text alignLeft" id="section-4-5.1">
<pre>
  +-----------------------------------------------------+
  |                    Application                      |
  +-+----------------+------^-------+--------^----------+
    |                |      |       |        |
  pre-               |     data     |      events
  establishment      |   transfer   |        |
    |        establishment  |   termination  |
    |                |      |       |        |
    |             +--v------v-------v+       |
  +-v-------------+   Connection(s)  +-------+----------+
  |  Transport    +--------+---------+                  |
  |  Services              |                            |
  |  API                   |                            |
  +------------------------|----------------------------+
                           |
  +------------------------|----------------------------+
  |  Transport             |                            |
  |  System                |        +-----------------+ |
  |  Implementation        |        |     Cached      | |
  |                        |        |      State      | |
  |  (Candidate Gathering) |        +-----------------+ |
  |                        |                            |
  |  (Candidate Racing)    |        +-----------------+ |
  |                        |        |     System      | |
  |                        |        |     Policy      | |
  |             +----------v-----+  +-----------------+ |
  |             |    Protocol    |                      |
  +-------------+    Stack(s)    +----------------------+
                +-------+--------+
                        V
              Network Layer Interface
</pre>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
<a href="#name-concepts-and-relationships-" class="selfRef">Concepts and Relationships in the Transport Services Architecture</a>
        </figcaption></figure>
</div>
<div id="transport-services-api-concepts">
<section id="section-4.1">
        <h3 id="name-transport-services-api-conc">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-transport-services-api-conc" class="section-name selfRef">Transport Services API Concepts</a>
        </h3>
<p id="section-4.1-1">Fundamentally, a Transport Services API needs to provide connection objects (<a href="#objects" class="xref">Section 4.1.1</a>) that allow applications to establish communication, and then send and receive data. These could be exposed as handles or referenced objects, depending on the language.<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<p id="section-4.1-2">Beyond the connection objects, there are several high-level groups of actions that any Transport Services API implementing this specification MUST provide:<a href="#section-4.1-2" class="pilcrow">¶</a></p>
<ul>
<li id="section-4.1-3.1">Pre-Establishment (<a href="#preestablishment" class="xref">Section 4.1.2</a>) encompasses the properties that an application can pass to describe its intent, requirements, prohibitions, and preferences for its networking operations. For any system that provides generic Transport Services, these properties SHOULD apply to multiple transport protocols. Properties specified during Pre-Establishment can have a large impact on the rest of the interface: they modify how establishment occurs, they influence the expectations around data transfer, and they determine the set of events that will be supported.<a href="#section-4.1-3.1" class="pilcrow">¶</a>
</li>
          <li id="section-4.1-3.2">Establishment (<a href="#establishment" class="xref">Section 4.1.3</a>) focuses on the actions that an application takes on the connection objects to prepare for data transfer.<a href="#section-4.1-3.2" class="pilcrow">¶</a>
</li>
          <li id="section-4.1-3.3">Data Transfer (<a href="#datatransfer" class="xref">Section 4.1.4</a>) consists of how an application represents the data to be sent and received, the functions required to send and receive that data, and how the application is notified of the status of its data transfer.<a href="#section-4.1-3.3" class="pilcrow">¶</a>
</li>
          <li id="section-4.1-3.4">Event Handling (<a href="#events" class="xref">Section 4.1.5</a>) defines categories of notifications which an application can receive during the lifetime of transport objects. Events MAY also provide opportunities for the application to interact with the underlying transport by querying state or updating maintenance options.<a href="#section-4.1-3.4" class="pilcrow">¶</a>
</li>
          <li id="section-4.1-3.5">Termination (<a href="#termination" class="xref">Section 4.1.6</a>) focuses on the methods by which data transmission is stopped, and state is torn down in the transport.<a href="#section-4.1-3.5" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-4.1-4">The diagram below provides a high-level view of the actions and events during the lifetime of a connection. Note that some actions are alternatives (e.g., whether to initiate a connection or to listen for incoming connections), while others are optional (e.g., setting Connection and Message Properties in Pre-Establishment) or have been omitted for brevity.<a href="#section-4.1-4" class="pilcrow">¶</a></p>
<span id="name-the-lifetime-of-a-connectio"></span><div id="fig-lifetime">
<figure id="figure-4">
          <div class="artwork art-text alignLeft" id="section-4.1-5.1">
<pre>
     Pre-Establishment     :       Established             : Termination
     -----------------     :       -----------             : -----------
                           :                               :
 +-- Local Endpoint        :           Message             :
 +-- Remote Endpoint       :    Receive() |                :
 +-- Transport Properties  :       Send() |                :
 |                         :              |        Close() :
 |   +---------------+  Initiate()  +-----+------+ Abort() :
 +---+ Preconnection |-------------&gt;| Connection |-----------&gt; Closed
     +---------------+ Rendezvous() +------------+ Conn.   :
             |             :           ^     |    Finished :
    Listen() |             :           |     |             :
             |             :           |     v             :
             v             :           | Connection        :
     +----------+          :           |   Ready           :
     | Listener |----------------------+                   :
     +----------+  Connection Received                     :
                           :                               : 
</pre>
</div>
<figcaption><a href="#figure-4" class="selfRef">Figure 4</a>:
<a href="#name-the-lifetime-of-a-connectio" class="selfRef">The lifetime of a connection</a>
          </figcaption></figure>
</div>
<div id="objects">
<section id="section-4.1.1">
          <h4 id="name-connections-and-related-obj">
<a href="#section-4.1.1" class="section-number selfRef">4.1.1. </a><a href="#name-connections-and-related-obj" class="section-name selfRef">Connections and Related Objects</a>
          </h4>
<ul>
<li id="section-4.1.1-1.1">Preconnection: A Preconnection object is a representation of a potential connection. It has state that describes parameters of a Connection that might exist in the future: the Local Endpoint from which that Connection will be established, the Remote Endpoint (<a href="#preestablishment" class="xref">Section 4.1.2</a>) to which it will connect, and Transport Properties that influence the paths and protocols a Connection will use. A Preconnection can be fully specified such that it represents a single possible Connection, or it can be partially specified such that it represents a family of possible Connections. The Local Endpoint (<a href="#preestablishment" class="xref">Section 4.1.2</a>) MUST be specified if the Preconnection is used to Listen for incoming connections. The Local Endpoint is OPTIONAL if it is used to Initiate connections. The Remote Endpoint MUST be specified in the Preconnection that is used to Initiate connections. The Remote Endpoint is OPTIONAL if it is used to Listen for incoming connections. The Local Endpoint and the Remote Endpoint MUST both be specified if a peer-to-peer Rendezvous is to occur based on the Preconnection.<a href="#section-4.1.1-1.1" class="pilcrow">¶</a>
</li>
            <li id="section-4.1.1-1.2">
              <p id="section-4.1.1-1.2.1">Transport Properties: Transport Properties allow the application to express their requirements, prohibitions, and preferences and configure the Transport System.  There are three kinds of Transport Properties:<a href="#section-4.1.1-1.2.1" class="pilcrow">¶</a></p>
<ul>
<li id="section-4.1.1-1.2.2.1">Selection Properties (<a href="#preestablishment" class="xref">Section 4.1.2</a>) that can only be specified on a Preconnection.<a href="#section-4.1.1-1.2.2.1" class="pilcrow">¶</a>
</li>
                <li id="section-4.1.1-1.2.2.2">Connection Properties (<a href="#preestablishment" class="xref">Section 4.1.2</a>) that can be specified on a Preconnection and changed on the Connection.<a href="#section-4.1.1-1.2.2.2" class="pilcrow">¶</a>
</li>
                <li id="section-4.1.1-1.2.2.3">Message Properties (<a href="#datatransfer" class="xref">Section 4.1.4</a>) that can be specified as defaults on a Preconnection or a Connection, and can also be specified during data transfer to affect specific Messages.<a href="#section-4.1.1-1.2.2.3" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li id="section-4.1.1-1.3">Connection: A Connection object represents one or more active transport protocol instances that can send and/or receive Messages between local and remote systems. It holds state pertaining to the underlying transport protocol instances and any ongoing data transfers. This represents, for example, an active connection in a connection-oriented protocol such as TCP, or a fully-specified 5-tuple for a connectionless protocol such as UDP. It can also represent a pool of transport protocol instances, e.g., a set of TCP and QUIC connections to equivalent endpoints, or a stream of a multi-streaming transport protocol instance. Connections can be created from a Preconnection or by a Listener.<a href="#section-4.1.1-1.3" class="pilcrow">¶</a>
</li>
            <li id="section-4.1.1-1.4">Listener: A Listener object accepts incoming transport protocol connections from remote systems and generates corresponding Connection objects. It is created from a Preconnection object that specifies the type of incoming connections it will accept.<a href="#section-4.1.1-1.4" class="pilcrow">¶</a>
</li>
          </ul>
</section>
</div>
<div id="preestablishment">
<section id="section-4.1.2">
          <h4 id="name-pre-establishment">
<a href="#section-4.1.2" class="section-number selfRef">4.1.2. </a><a href="#name-pre-establishment" class="section-name selfRef">Pre-Establishment</a>
          </h4>
<ul>
<li id="section-4.1.2-1.1">Endpoint: An Endpoint represents an identifier for one side of a transport connection.
Endpoints can be Local Endpoints or Remote Endpoints, and respectively represent an identity
that the application uses for the source or destination of a connection.
An Endpoint can be specified at various levels of abstraction, and an Endpoint at a higher level of abstraction (such as a hostname) can be resolved to more concrete identities (such as IP addresses).<a href="#section-4.1.2-1.1" class="pilcrow">¶</a>
</li>
            <li id="section-4.1.2-1.2">Remote Endpoint: The Remote Endpoint represents the application's identifier for a peer that can participate in a transport connection; for example, the combination of a DNS name for the peer and a service name/port.<a href="#section-4.1.2-1.2" class="pilcrow">¶</a>
</li>
            <li id="section-4.1.2-1.3">Local Endpoint: The Local Endpoint represents the application's identifier for itself that it uses for transport connections; for example, a local IP address and port.<a href="#section-4.1.2-1.3" class="pilcrow">¶</a>
</li>
            <li id="section-4.1.2-1.4">Selection Properties: The Selection Properties consist of the options that an application can set to influence the selection of paths between the local and remote systems, to influence the selection of transport protocols, or to configure the behavior of generic transport protocol features. These options can take the form of requirements, prohibitions, or preferences. Examples of options that influence path selection include the interface type (such as a Wi-Fi connection, or a Cellular LTE connection), requirements around the Maximum Transmission Unit (MTU) or path MTU (PMTU), or preferences for throughput and latency properties. Examples of options that influence protocol selection and configuration of transport protocol features include reliability, service class, multipath support, and fast open support.<a href="#section-4.1.2-1.4" class="pilcrow">¶</a>
</li>
            <li id="section-4.1.2-1.5">Connection Properties: The Connection Properties are used to configure protocol-specific options and control per-connection behavior of the Transport System; for example, a protocol-specific Connection Property can express that if UDP is used, the implementation ought to use checksums. Note that the presence of such a property does not require that a specific protocol will be used. In general, these properties do not explicitly determine the selection of paths or protocols, but can be used in this way by an implementation during connection establishment. Connection Properties are specified on a Preconnection prior to Connection establishment, and can be modified on the Connection later. Changes made to Connection Properties after Connection establishment take effect on a best-effort basis.<a href="#section-4.1.2-1.5" class="pilcrow">¶</a>
</li>
          </ul>
</section>
</div>
<div id="establishment">
<section id="section-4.1.3">
          <h4 id="name-establishment-actions">
<a href="#section-4.1.3" class="section-number selfRef">4.1.3. </a><a href="#name-establishment-actions" class="section-name selfRef">Establishment Actions</a>
          </h4>
<ul>
<li id="section-4.1.3-1.1">Initiate: The primary action that an application can take to create a Connection to a Remote Endpoint, and prepare any required local or remote state to enable the transmission of Messages. For some protocols, this will initiate a client-to-server style handshake; for other protocols, this will just establish local state (e.g., with connectionless protocols such as UDP). The process of identifying options for connecting, such as resolution of the Remote Endpoint, occurs in response to the Initiate call.<a href="#section-4.1.3-1.1" class="pilcrow">¶</a>
</li>
            <li id="section-4.1.3-1.2">Listen: Enables a listener to accept incoming Connections. The Listener will then create Connection objects as incoming connections are accepted (<a href="#events" class="xref">Section 4.1.5</a>). Listeners by default register with multiple paths, protocols, and local endpoints, unless constrained by Selection Properties and/or the specified Local Endpoint(s). Connections can be accepted on any of the available paths or endpoints.<a href="#section-4.1.3-1.2" class="pilcrow">¶</a>
</li>
            <li id="section-4.1.3-1.3">Rendezvous: The action of establishing a peer-to-peer connection with a
Remote Endpoint. It simultaneously attempts to initiate a connection to
a Remote Endpoint while listening for an incoming connection from that
endpoint.  The process of identifying options for the connection, such
as resolution of the Remote Endpoint, occurs during the Rendezvous call.
As with Listeners, the set of local paths and endpoints is constrained
by Selection Properties. If successful, the Rendezvous call returns a
Connection object to represent the established peer-to-peer connection.
The processes by which connections are initiated during a Rendezvous
action will depend on the set of Local and Remote Endpoints configured on
the Preconnection. For example, if the Local and Remote Endpoints are TCP
host candidates, then a TCP simultaneous open <span>[<a href="#RFC0793" class="xref">RFC0793</a>]</span> will be performed.
However, if the set of Local Endpoints includes server reflexive
candidates, such as those provided by STUN, a Rendezvous action will race
candidates in the style of the ICE algorithm <span>[<a href="#RFC8445" class="xref">RFC8445</a>]</span> to perform NAT
binding discovery and initiate a peer-to-peer connection.<a href="#section-4.1.3-1.3" class="pilcrow">¶</a>
</li>
          </ul>
</section>
</div>
<div id="datatransfer">
<section id="section-4.1.4">
          <h4 id="name-data-transfer-objects-and-a">
<a href="#section-4.1.4" class="section-number selfRef">4.1.4. </a><a href="#name-data-transfer-objects-and-a" class="section-name selfRef">Data Transfer Objects and Actions</a>
          </h4>
<ul>
<li id="section-4.1.4-1.1">Message: A Message object is a unit of data that can be represented as bytes that can be transferred between two systems over a transport connection. The bytes within a Message are assumed to be ordered within the Message. If an application does not care about the order in which a peer receives two distinct spans of bytes, those spans of bytes are considered independent Messages.<a href="#section-4.1.4-1.1" class="pilcrow">¶</a>
</li>
            <li id="section-4.1.4-1.2">Message Properties: Message Properties are used to specify details about Message transmission. They can be specified directly on individual Messages, or can be set on a Preconnection or Connection as defaults. These properties might only apply to how a Message is sent (such as how the transport will treat prioritization and reliability), but can also include properties that specific protocols encode and communicate to the Remote Endpoint. When receiving Messages, Message Properties can contain information about the received Message, such as metadata generated at the receiver and information signalled by the remote endpoint.<a href="#section-4.1.4-1.2" class="pilcrow">¶</a>
</li>
            <li id="section-4.1.4-1.3">Send: The action to transmit a Message over a Connection to the remote system. The interface to Send MAY include Message Properties specific to how the Message content is to be sent. The status of the Send operation MUST be delivered back to the sending application in an event (<a href="#events" class="xref">Section 4.1.5</a>).<a href="#section-4.1.4-1.3" class="pilcrow">¶</a>
</li>
            <li id="section-4.1.4-1.4">Receive: An action that indicates that the application is ready to asynchronously accept a Message over a Connection from a remote system, while the Message content itself will be delivered in an event (<a href="#events" class="xref">Section 4.1.5</a>). The interface to Receive MAY include Message Properties specific to the Message that is to be delivered to the application.<a href="#section-4.1.4-1.4" class="pilcrow">¶</a>
</li>
            <li id="section-4.1.4-1.5">Framer: A Framer is a data translation layer that can be added to a Connection to define how application-layer Messages are transmitted over a transport protocol. This is particularly relevant for protocols that otherwise present unstructured streams, such as TCP.<a href="#section-4.1.4-1.5" class="pilcrow">¶</a>
</li>
          </ul>
</section>
</div>
<div id="events">
<section id="section-4.1.5">
          <h4 id="name-event-handling">
<a href="#section-4.1.5" class="section-number selfRef">4.1.5. </a><a href="#name-event-handling" class="section-name selfRef">Event Handling</a>
          </h4>
<p id="section-4.1.5-1">The following categories of events can be delivered to an application:<a href="#section-4.1.5-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-4.1.5-2.1">Connection Ready: Signals to an application that a given Connection is ready to send and/or receive Messages. If the Connection relies on handshakes to establish state between peers, then it is assumed that these steps have been taken.<a href="#section-4.1.5-2.1" class="pilcrow">¶</a>
</li>
            <li id="section-4.1.5-2.2">Connection Finished: Signals to an application that a given Connection is no longer usable for sending or receiving Messages. The event SHOULD deliver a reason or error to the application that describes the nature of the termination.<a href="#section-4.1.5-2.2" class="pilcrow">¶</a>
</li>
            <li id="section-4.1.5-2.3">Connection Received: Signals to an application that a given Listener has received a Connection.<a href="#section-4.1.5-2.3" class="pilcrow">¶</a>
</li>
            <li id="section-4.1.5-2.4">Message Received: Delivers received Message content to the application, based on a Receive action. This MAY include an error if the Receive action cannot be satisfied due to the Connection being closed.<a href="#section-4.1.5-2.4" class="pilcrow">¶</a>
</li>
            <li id="section-4.1.5-2.5">Message Sent: Notifies the application of the status of its Send action. This might indicate a failure if the Message cannot be sent, or an indication that Message has been processed by the protocol stack.<a href="#section-4.1.5-2.5" class="pilcrow">¶</a>
</li>
            <li id="section-4.1.5-2.6">Path Properties Changed: Notifies the application that some property of the Connection has changed that might influence how and where data is sent and/or received.<a href="#section-4.1.5-2.6" class="pilcrow">¶</a>
</li>
          </ul>
</section>
</div>
<div id="termination">
<section id="section-4.1.6">
          <h4 id="name-termination-actions">
<a href="#section-4.1.6" class="section-number selfRef">4.1.6. </a><a href="#name-termination-actions" class="section-name selfRef">Termination Actions</a>
          </h4>
<ul>
<li id="section-4.1.6-1.1">Close: The action an application takes on a Connection to indicate that it no longer intends to send data, is no longer willing to receive data, and that the protocol SHOULD signal this state to the remote system if the transport protocol allows this. (Note that this is distinct from the concept of "half-closing" a bidirectional connection, such as when a FIN is sent in one direction of a TCP connection. Indicating the end of a stream in the Transport Services architecture is possible using Message Properties when sending.)<a href="#section-4.1.6-1.1" class="pilcrow">¶</a>
</li>
            <li id="section-4.1.6-1.2">Abort: The action the application takes on a Connection to indicate a Close and also indicate that the transport system SHOULD NOT attempt to deliver any outstanding data. This is intended for immediate termination of a connection, without cleaning up state.<a href="#section-4.1.6-1.2" class="pilcrow">¶</a>
</li>
          </ul>
</section>
</div>
</section>
</div>
<div id="transport-system-implementation-concepts">
<section id="section-4.2">
        <h3 id="name-transport-system-implementa">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-transport-system-implementa" class="section-name selfRef">Transport System Implementation Concepts</a>
        </h3>
<p id="section-4.2-1">This section defines the set of objects used internally to a system or library to implement the functionality needed to provide a transport service across a network, as required by the abstract interface.<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-4.2-2.1">Connection Group: A set of Connections that share properties and caches. For multiplexing transport protocols, only Connections within the same Connection Group are allowed to be multiplexed together. An application can explicitly define Connection Groups to control caching boundaries, as discussed in <a href="#groups" class="xref">Section 4.2.4</a>.<a href="#section-4.2-2.1" class="pilcrow">¶</a>
</li>
          <li id="section-4.2-2.2">Path: Represents an available set of properties that a local system can use to communicate with a remote system, such as routes, addresses, and physical and virtual network interfaces.<a href="#section-4.2-2.2" class="pilcrow">¶</a>
</li>
          <li id="section-4.2-2.3">Protocol Instance: A single instance of one protocol, including any state necessary to establish connectivity or send and receive Messages.<a href="#section-4.2-2.3" class="pilcrow">¶</a>
</li>
          <li id="section-4.2-2.4">Protocol Stack: A set of Protocol Instances (including relevant application, security, transport, or Internet protocols) that are used together to establish connectivity or send and receive Messages. A single stack can be simple (a single transport protocol instance over IP), or complex (multiple application protocol streams going through a single security and transport protocol, over IP; or, a multi-path transport protocol over multiple transport sub-flows).<a href="#section-4.2-2.4" class="pilcrow">¶</a>
</li>
          <li id="section-4.2-2.5">Candidate Path: One path that is available to an application and conforms to the Selection Properties and System Policy. Candidate Paths are identified during the gathering phase (<a href="#gathering" class="xref">Section 4.2.1</a>) and can be used during the racing phase (<a href="#racing" class="xref">Section 4.2.2</a>).<a href="#section-4.2-2.5" class="pilcrow">¶</a>
</li>
          <li id="section-4.2-2.6">Candidate Protocol Stack: One protocol stack that can be used by an application for a connection, of which there can be several. Candidate Protocol Stacks are identified during the gathering phase (<a href="#gathering" class="xref">Section 4.2.1</a>) and are started during the racing phase (<a href="#racing" class="xref">Section 4.2.2</a>).<a href="#section-4.2-2.6" class="pilcrow">¶</a>
</li>
          <li id="section-4.2-2.7">System Policy: Represents the input from an operating system or other global preferences that can constrain or influence how an implementation will gather candidate paths and protocol stacks (<a href="#gathering" class="xref">Section 4.2.1</a>) and race the candidates during establishment (<a href="#racing" class="xref">Section 4.2.2</a>). Specific aspects of the System Policy either apply to all Connections or only certain ones, depending on the runtime context and properties of the Connection.<a href="#section-4.2-2.7" class="pilcrow">¶</a>
</li>
          <li id="section-4.2-2.8">Cached State: The state and history that the implementation keeps for each set of associated Endpoints that have been used previously. This can include DNS results, TLS session state, previous success and quality of transport protocols over certain paths.<a href="#section-4.2-2.8" class="pilcrow">¶</a>
</li>
        </ul>
<div id="gathering">
<section id="section-4.2.1">
          <h4 id="name-candidate-gathering">
<a href="#section-4.2.1" class="section-number selfRef">4.2.1. </a><a href="#name-candidate-gathering" class="section-name selfRef">Candidate Gathering</a>
          </h4>
<ul>
<li id="section-4.2.1-1.1">Candidate Path Selection: Candidate Path Selection represents the act of choosing one or more paths that are available to use based on the Selection Properties and any available Local and Remote Endpoints provided by the application, as well as the policies and heuristics of a Transport Services system.<a href="#section-4.2.1-1.1" class="pilcrow">¶</a>
</li>
            <li id="section-4.2.1-1.2">Candidate Protocol Selection: Candidate Protocol Selection represents the act of choosing one or more sets of protocol stacks that are available to use based on the Transport Properties provided by the application, and the heuristics or policies within the Transport Services system.<a href="#section-4.2.1-1.2" class="pilcrow">¶</a>
</li>
          </ul>
</section>
</div>
<div id="racing">
<section id="section-4.2.2">
          <h4 id="name-candidate-racing">
<a href="#section-4.2.2" class="section-number selfRef">4.2.2. </a><a href="#name-candidate-racing" class="section-name selfRef">Candidate Racing</a>
          </h4>
<p id="section-4.2.2-1">Connection establishment attempts for a set of candidates may be performed simultaneously, synchronously, serially, or some combination of all of these. We refer to this process as racing, borrowing terminology from Happy Eyeballs <span>[<a href="#RFC8305" class="xref">RFC8305</a>]</span>.<a href="#section-4.2.2-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-4.2.2-2.1">Protocol Option Racing: Protocol Option Racing is the act of attempting to establish, or scheduling attempts to establish, multiple Protocol Stacks that differ based on the composition of protocols or the options used for protocols.<a href="#section-4.2.2-2.1" class="pilcrow">¶</a>
</li>
            <li id="section-4.2.2-2.2">Path Racing: Path Racing is the act of attempting to establish, or scheduling attempts to establish, multiple Protocol Stacks that differ based on a selection from the available Paths. Since different Paths will have distinct configurations for local addresses and DNS servers, attempts across different Paths will perform separate DNS resolution steps, which can lead to further racing of the resolved Remote Endpoints.<a href="#section-4.2.2-2.2" class="pilcrow">¶</a>
</li>
            <li id="section-4.2.2-2.3">Remote Endpoint Racing: Remote Endpoint Racing is the act of attempting to establish, or scheduling attempts to establish, multiple Protocol Stacks that differ based on the specific representation of the Remote Endpoint, such as IP addresses resolved from a DNS hostname.<a href="#section-4.2.2-2.3" class="pilcrow">¶</a>
</li>
          </ul>
</section>
</div>
<div id="equivalence">
<section id="section-4.2.3">
          <h4 id="name-protocol-stack-equivalence">
<a href="#section-4.2.3" class="section-number selfRef">4.2.3. </a><a href="#name-protocol-stack-equivalence" class="section-name selfRef">Protocol Stack Equivalence</a>
          </h4>
<p id="section-4.2.3-1">The Transport Services architecture defines a mechanism that allows applications to easily use different network paths and Protocol Stacks. In some cases, changing which Protocol Stacks or network paths are used will require updating the preferences expressed by the application that uses the Transport Services system. For example, an application can enable the use of a multipath or multistreaming transport protocol by modifying the properties in its Pre-Connection configuration. In some cases, however, the Transport Services system will be able to automatically change Protocol Stacks without an update to the application, either by selecting a new stack entirely, or by racing multiple candidate Protocol Stacks during connection establishment. This functionality in the API can be a powerful driver of new protocol adoption, but needs to be constrained carefully to avoid unexpected behavior that can lead to functional or security problems.<a href="#section-4.2.3-1" class="pilcrow">¶</a></p>
<p id="section-4.2.3-2">If two different Protocol Stacks can be safely swapped, or raced in parallel (see <a href="#racing" class="xref">Section 4.2.2</a>), then they are considered to be "equivalent". Equivalent Protocol Stacks need to meet the following criteria:<a href="#section-4.2.3-2" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal" id="section-4.2.3-3">
            <li id="section-4.2.3-3.1">Both stacks MUST offer the interface requested by the application for connection establishment and data transmission. For example, if an application requires preservation of message boundaries, a Protocol Stack that runs UDP as the top-level interface to the application is not equivalent to a Protocol Stack that runs TCP as the top-level interface. A UDP stack would allow an application to read out message boundaries based on datagrams sent from the remote system, whereas TCP does not preserve message boundaries on its own, but needs a framing protocol on top to determine message boundaries.<a href="#section-4.2.3-3.1" class="pilcrow">¶</a>
</li>
            <li id="section-4.2.3-3.2">Both stacks MUST offer the transport services that are requested by the application. For example, if an application specifies that it requires reliable transmission of data, then a Protocol Stack using UDP without any reliability layer on top would not be allowed to replace a Protocol Stack using TCP. However, if the application does not require reliability, then a Protocol Stack that adds reliability could be regarded as an equivalent Protocol Stack as long as providing this would not conflict with any other application-requested properties.<a href="#section-4.2.3-3.2" class="pilcrow">¶</a>
</li>
            <li id="section-4.2.3-3.3">Both stacks MUST offer security protocols and parameters as requested by the application <span>[<a href="#I-D.ietf-taps-transport-security" class="xref">I-D.ietf-taps-transport-security</a>]</span>. Security features and properties, such as cryptographic algorithms, peer authentication, and identity privacy vary across security protocols, and across versions of security protocols. Protocol equivalence ought not to be assumed for different protocols or protocol versions, even if they offer similar application configuration options. To ensure that security protocols are not incorrectly swapped, Transport Services systems SHOULD only automatically generate equivalent Protocol Stacks when the transport security protocols within the stacks are identical. Specifically, a transport system would consider protocols identical only if they are of the same type and version. For example, the same version of TLS running over two different transport protocol stacks are considered equivalent, whereas TLS 1.2 and TLS 1.3 <span>[<a href="#RFC8446" class="xref">RFC8446</a>]</span> are not considered equivalent. However, Transport Services systems MAY allow applications to indicate that they consider two different transport protocols equivalent, e.g., to allow fallback to TLS 1.2 if TLS 1.3 is not available.<a href="#section-4.2.3-3.3" class="pilcrow">¶</a>
</li>
          </ol>
</section>
</div>
<div id="groups">
<section id="section-4.2.4">
          <h4 id="name-separating-connection-group">
<a href="#section-4.2.4" class="section-number selfRef">4.2.4. </a><a href="#name-separating-connection-group" class="section-name selfRef">Separating Connection Groups</a>
          </h4>
<p id="section-4.2.4-1">By default, stored properties of the implementation, such as cached protocol state, cached path state, and heuristics, may be shared (e.g. across multiple connections in an application). This provides efficiency and convenience for the application, since the Transport System implementation can automatically optimize behavior.<a href="#section-4.2.4-1" class="pilcrow">¶</a></p>
<p id="section-4.2.4-2">There are several reasons, however, that an application might want to explicitly isolate some Connections. These reasons include:<a href="#section-4.2.4-2" class="pilcrow">¶</a></p>
<ul>
<li id="section-4.2.4-3.1">Privacy concerns about re-using cached protocol state that can lead to linkability. Sensitive state may include TLS session state <span>[<a href="#RFC8446" class="xref">RFC8446</a>]</span> and HTTP cookies <span>[<a href="#RFC6265" class="xref">RFC6265</a>]</span>.<a href="#section-4.2.4-3.1" class="pilcrow">¶</a>
</li>
            <li id="section-4.2.4-3.2">Privacy concerns about allowing Connections to multiplex together, which can tell a Remote Endpoint that all of the Connections are coming from the same application (for example, when Connections are multiplexed HTTP/2 or QUIC streams).<a href="#section-4.2.4-3.2" class="pilcrow">¶</a>
</li>
            <li id="section-4.2.4-3.3">Performance concerns about Connections introducing head-of-line blocking due to multiplexing or needing to share state on a single thread.<a href="#section-4.2.4-3.3" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-4.2.4-4">The Transport Services API SHOULD allow applications to explicitly define Connection Groups that force separation of Cached State and Protocol Stacks. For example, a web browser application might use Connection Groups with separate caches for different tabs in the browser to decrease linkability.<a href="#section-4.2.4-4" class="pilcrow">¶</a></p>
<p id="section-4.2.4-5">The interface to specify these groups MAY expose fine-grained tuning for which properties and cached state is allowed to be shared with other Connections. For example, an application might want to allow sharing TCP Fast Open cookies across groups, but not TLS session state.<a href="#section-4.2.4-5" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="iana-considerations">
<section id="section-5">
      <h2 id="name-iana-considerations">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-5-1">RFC-EDITOR: Please remove this section before publication.<a href="#section-5-1" class="pilcrow">¶</a></p>
<p id="section-5-2">This document has no actions for IANA.<a href="#section-5-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="security-considerations">
<section id="section-6">
      <h2 id="name-security-considerations">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-6-1">The Transport Services architecture does not recommend use of specific security
protocols or algorithms. Its goal is to offer ease of use for existing protocols
by providing a generic security-related interface. Each provided interface
translates to an existing protocol-specific interface provided by supported
security protocols. For example, trust verification callbacks are common parts
of TLS APIs. Transport Services APIs will expose similar functionality
<span>[<a href="#I-D.ietf-taps-transport-security" class="xref">I-D.ietf-taps-transport-security</a>]</span>.<a href="#section-6-1" class="pilcrow">¶</a></p>
<p id="section-6-2">As described above in <a href="#equivalence" class="xref">Section 4.2.3</a>, if a Transport Services system races
between two different Protocol Stacks, both MUST use the same security protocols
and options.<a href="#section-6-2" class="pilcrow">¶</a></p>
<p id="section-6-3">Applications need to ensure that they use security APIs appropriately. In cases
where applications use an interface to provide sensitive keying material, e.g.,
access to private keys or copies of pre-shared keys (PSKs), key use needs to be
validated. For example, applications ought not to use PSK material created for
the Encapsulating Security Protocol (ESP, part of IPsec) <span>[<a href="#RFC4303" class="xref">RFC4303</a>]</span> with QUIC,
and applications ought not to use private keys intended for server
authentication as keys for client authentication.<a href="#section-6-3" class="pilcrow">¶</a></p>
<p id="section-6-4">Moreover, Transport Services systems MUST NOT automatically fall back from
secure protocols to insecure protocols, or to weaker versions of secure
protocols. For example, if an application requests TLS, but the desired version
of TLS is not available, its connection will fail. Applications are thus
responsible for implementing security protocol fallback or version fallback by
creating multiple Transport Services Connections, if so desired.<a href="#section-6-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="acknowledgements">
<section id="section-7">
      <h2 id="name-acknowledgements">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-acknowledgements" class="section-name selfRef">Acknowledgements</a>
      </h2>
<p id="section-7-1">This work has received funding from the European Union's Horizon 2020 research
and innovation programme under grant agreements No. 644334 (NEAT) and No. 688421
(MAMI).<a href="#section-7-1" class="pilcrow">¶</a></p>
<p id="section-7-2">This work has been supported by Leibniz Prize project funds of DFG - German
Research Foundation: Gottfried Wilhelm Leibniz-Preis 2011 (FKZ FE 570/4-1).<a href="#section-7-2" class="pilcrow">¶</a></p>
<p id="section-7-3">This work has been supported by the UK Engineering and Physical Sciences
Research Council under grant EP/R04144X/1.<a href="#section-7-3" class="pilcrow">¶</a></p>
<p id="section-7-4">Thanks to Stuart Cheshire, Josh Graessley, David Schinazi, and Eric Kinnear for
their implementation and design efforts, including Happy Eyeballs, that heavily
influenced this work.<a href="#section-7-4" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-8">
      <h2 id="name-references">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-8.1">
        <h3 id="name-normative-references">
<a href="#section-8.1" class="section-number selfRef">8.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="I-D.ietf-taps-interface">[I-D.ietf-taps-interface]</dt>
        <dd>
<span class="refAuthor">Trammell, B.</span><span class="refAuthor">, Welzl, M.</span><span class="refAuthor">, Enghardt, T.</span><span class="refAuthor">, Fairhurst, G.</span><span class="refAuthor">, Kuehlewind, M.</span><span class="refAuthor">, Perkins, C.</span><span class="refAuthor">, Tiesel, P.</span><span class="refAuthor">, Wood, C.</span><span class="refAuthor">, and T. Pauly</span>, <span class="refTitle">"An Abstract Application Layer Interface to Transport Services"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-taps-interface-05</span>, <time datetime="2019-11-04">4 November 2019</time>, <span>&lt;<a href="http://www.ietf.org/internet-drafts/draft-ietf-taps-interface-05.txt">http://www.ietf.org/internet-drafts/draft-ietf-taps-interface-05.txt</a>&gt;</span>. </dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dt id="RFC8174">[RFC8174]</dt>
      <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
</dl>
</section>
<section id="section-8.2">
        <h3 id="name-informative-references">
<a href="#section-8.2" class="section-number selfRef">8.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="I-D.ietf-taps-impl">[I-D.ietf-taps-impl]</dt>
        <dd>
<span class="refAuthor">Brunstrom, A.</span><span class="refAuthor">, Pauly, T.</span><span class="refAuthor">, Enghardt, T.</span><span class="refAuthor">, Grinnemo, K.</span><span class="refAuthor">, Jones, T.</span><span class="refAuthor">, Tiesel, P.</span><span class="refAuthor">, Perkins, C.</span><span class="refAuthor">, and M. Welzl</span>, <span class="refTitle">"Implementing Interfaces to Transport Services"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-taps-impl-05</span>, <time datetime="2019-11-04">4 November 2019</time>, <span>&lt;<a href="http://www.ietf.org/internet-drafts/draft-ietf-taps-impl-05.txt">http://www.ietf.org/internet-drafts/draft-ietf-taps-impl-05.txt</a>&gt;</span>. </dd>
<dt id="I-D.ietf-taps-minset">[I-D.ietf-taps-minset]</dt>
        <dd>
<span class="refAuthor">Welzl, M.</span><span class="refAuthor"> and S. Gjessing</span>, <span class="refTitle">"A Minimal Set of Transport Services for End Systems"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-taps-minset-11</span>, <time datetime="2018-09-27">27 September 2018</time>, <span>&lt;<a href="http://www.ietf.org/internet-drafts/draft-ietf-taps-minset-11.txt">http://www.ietf.org/internet-drafts/draft-ietf-taps-minset-11.txt</a>&gt;</span>. </dd>
<dt id="I-D.ietf-taps-transport-security">[I-D.ietf-taps-transport-security]</dt>
        <dd>
<span class="refAuthor">Enghardt, T.</span><span class="refAuthor">, Pauly, T.</span><span class="refAuthor">, Perkins, C.</span><span class="refAuthor">, Rose, K.</span><span class="refAuthor">, and C. Wood</span>, <span class="refTitle">"A Survey of the Interaction Between Security Protocols and Transport Services"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-taps-transport-security-10</span>, <time datetime="2019-11-17">17 November 2019</time>, <span>&lt;<a href="http://www.ietf.org/internet-drafts/draft-ietf-taps-transport-security-10.txt">http://www.ietf.org/internet-drafts/draft-ietf-taps-transport-security-10.txt</a>&gt;</span>. </dd>
<dt id="POSIX">[POSIX]</dt>
        <dd>
<span class="refTitle">"IEEE Std. 1003.1-2008 Standard for Information Technology -- Portable Operating System Interface (POSIX).  Open group Technical Standard: Base Specifications, Issue 7"</span>, <time datetime="2008">2008</time>. </dd>
<dt id="RFC0793">[RFC0793]</dt>
        <dd>
<span class="refAuthor">Postel, J.</span>, <span class="refTitle">"Transmission Control Protocol"</span>, <span class="seriesInfo">STD 7</span>, <span class="seriesInfo">RFC 793</span>, <span class="seriesInfo">DOI 10.17487/RFC0793</span>, <time datetime="1981-09">September 1981</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc793">https://www.rfc-editor.org/info/rfc793</a>&gt;</span>. </dd>
<dt id="RFC4303">[RFC4303]</dt>
        <dd>
<span class="refAuthor">Kent, S.</span>, <span class="refTitle">"IP Encapsulating Security Payload (ESP)"</span>, <span class="seriesInfo">RFC 4303</span>, <span class="seriesInfo">DOI 10.17487/RFC4303</span>, <time datetime="2005-12">December 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4303">https://www.rfc-editor.org/info/rfc4303</a>&gt;</span>. </dd>
<dt id="RFC6265">[RFC6265]</dt>
        <dd>
<span class="refAuthor">Barth, A.</span>, <span class="refTitle">"HTTP State Management Mechanism"</span>, <span class="seriesInfo">RFC 6265</span>, <span class="seriesInfo">DOI 10.17487/RFC6265</span>, <time datetime="2011-04">April 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6265">https://www.rfc-editor.org/info/rfc6265</a>&gt;</span>. </dd>
<dt id="RFC7230">[RFC7230]</dt>
        <dd>
<span class="refAuthor">Fielding, R., Ed.</span><span class="refAuthor"> and J. Reschke, Ed.</span>, <span class="refTitle">"Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing"</span>, <span class="seriesInfo">RFC 7230</span>, <span class="seriesInfo">DOI 10.17487/RFC7230</span>, <time datetime="2014-06">June 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7230">https://www.rfc-editor.org/info/rfc7230</a>&gt;</span>. </dd>
<dt id="RFC7540">[RFC7540]</dt>
        <dd>
<span class="refAuthor">Belshe, M.</span><span class="refAuthor">, Peon, R.</span><span class="refAuthor">, and M. Thomson, Ed.</span>, <span class="refTitle">"Hypertext Transfer Protocol Version 2 (HTTP/2)"</span>, <span class="seriesInfo">RFC 7540</span>, <span class="seriesInfo">DOI 10.17487/RFC7540</span>, <time datetime="2015-05">May 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7540">https://www.rfc-editor.org/info/rfc7540</a>&gt;</span>. </dd>
<dt id="RFC8095">[RFC8095]</dt>
        <dd>
<span class="refAuthor">Fairhurst, G., Ed.</span><span class="refAuthor">, Trammell, B., Ed.</span><span class="refAuthor">, and M. Kuehlewind, Ed.</span>, <span class="refTitle">"Services Provided by IETF Transport Protocols and Congestion Control Mechanisms"</span>, <span class="seriesInfo">RFC 8095</span>, <span class="seriesInfo">DOI 10.17487/RFC8095</span>, <time datetime="2017-03">March 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8095">https://www.rfc-editor.org/info/rfc8095</a>&gt;</span>. </dd>
<dt id="RFC8305">[RFC8305]</dt>
        <dd>
<span class="refAuthor">Schinazi, D.</span><span class="refAuthor"> and T. Pauly</span>, <span class="refTitle">"Happy Eyeballs Version 2: Better Connectivity Using Concurrency"</span>, <span class="seriesInfo">RFC 8305</span>, <span class="seriesInfo">DOI 10.17487/RFC8305</span>, <time datetime="2017-12">December 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8305">https://www.rfc-editor.org/info/rfc8305</a>&gt;</span>. </dd>
<dt id="RFC8445">[RFC8445]</dt>
        <dd>
<span class="refAuthor">Keranen, A.</span><span class="refAuthor">, Holmberg, C.</span><span class="refAuthor">, and J. Rosenberg</span>, <span class="refTitle">"Interactive Connectivity Establishment (ICE): A Protocol for Network Address Translator (NAT) Traversal"</span>, <span class="seriesInfo">RFC 8445</span>, <span class="seriesInfo">DOI 10.17487/RFC8445</span>, <time datetime="2018-07">July 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8445">https://www.rfc-editor.org/info/rfc8445</a>&gt;</span>. </dd>
<dt id="RFC8446">[RFC8446]</dt>
      <dd>
<span class="refAuthor">Rescorla, E.</span>, <span class="refTitle">"The Transport Layer Security (TLS) Protocol Version 1.3"</span>, <span class="seriesInfo">RFC 8446</span>, <span class="seriesInfo">DOI 10.17487/RFC8446</span>, <time datetime="2018-08">August 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8446">https://www.rfc-editor.org/info/rfc8446</a>&gt;</span>. </dd>
</dl>
</section>
</section>
<div id="authors-addresses">
<section id="section-appendix.a">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Tommy Pauly (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">Apple Inc.</span></div>
<div dir="auto" class="left"><span class="street-address">One Apple Park Way</span></div>
<div dir="auto" class="left">
<span class="locality">Cupertino, California 95014</span>,  </div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:tpauly@apple.com" class="email">tpauly@apple.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Brian Trammell (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">Google</span></div>
<div dir="auto" class="left"><span class="street-address">Gustav-Gull-Platz 1</span></div>
<div dir="auto" class="left"><span class="locality">8004 Zurich</span></div>
<div dir="auto" class="left"><span class="country-name">Switzerland</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:ietf@trammell.ch" class="email">ietf@trammell.ch</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Anna Brunstrom</span></div>
<div dir="auto" class="left"><span class="org">Karlstad University</span></div>
<div dir="auto" class="left"><span class="street-address">Universitetsgatan 2</span></div>
<div dir="auto" class="left"><span class="locality">651 88 Karlstad</span></div>
<div dir="auto" class="left"><span class="country-name">Sweden</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:anna.brunstrom@kau.se" class="email">anna.brunstrom@kau.se</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Godred Fairhurst</span></div>
<div dir="auto" class="left"><span class="org">University of Aberdeen</span></div>
<div dir="auto" class="left"><span class="street-address">Fraser Noble Building</span></div>
<div dir="auto" class="left"><span class="locality">Aberdeen, AB24 3UE</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:gorry@erg.abdn.ac.uk" class="email">gorry@erg.abdn.ac.uk</a>
</div>
<div class="url">
<span>URI:</span>
<a href="http://www.erg.abdn.ac.uk/" class="url">http://www.erg.abdn.ac.uk/</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Colin Perkins</span></div>
<div dir="auto" class="left"><span class="org">University of Glasgow</span></div>
<div dir="auto" class="left"><span class="street-address">School of Computing Science</span></div>
<div dir="auto" class="left"><span class="locality">Glasgow  G12 8QQ</span></div>
<div dir="auto" class="left"><span class="country-name">United Kingdom</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:csp@csperkins.org" class="email">csp@csperkins.org</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Philipp S. Tiesel</span></div>
<div dir="auto" class="left"><span class="org">TU Berlin</span></div>
<div dir="auto" class="left"><span class="street-address">Einsteinufer 25</span></div>
<div dir="auto" class="left"><span class="locality">10587 Berlin</span></div>
<div dir="auto" class="left"><span class="country-name">Germany</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:philipp@tiesel.net" class="email">philipp@tiesel.net</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Chris Wood</span></div>
<div dir="auto" class="left"><span class="org">Apple Inc.</span></div>
<div dir="auto" class="left"><span class="street-address">One Apple Park Way</span></div>
<div dir="auto" class="left">
<span class="locality">Cupertino, California 95014</span>,  </div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:cawood@apple.com" class="email">cawood@apple.com</a>
</div>
</address>
</section>
</div>
<script>var toc = document.getElementById("toc");
var tocToggle = toc.querySelector("h2");
var tocNav = toc.querySelector("nav");

// mobile menu toggle
tocToggle.onclick = function(event) {
    if (window.innerWidth < 1024) {
 var tocNavDisplay = tocNav.currentStyle ? tocNav.currentStyle.display : getComputedStyle(tocNav, null).display;
 if (tocNavDisplay == "none") {
     tocNav.style.display = "block";
 } else {
     tocNav.style.display = "none";
 }
    }
}

// toc anchor scroll to anchor
tocNav.addEventListener("click", function (event) {
    event.preventDefault();
    if (event.target.nodeName == 'A') {
 if (window.innerWidth < 1024) {
     tocNav.style.display = "none";
 }
 var href = event.target.getAttribute("href");
 var anchorId = href.substr(1);
 var anchor =  document.getElementById(anchorId);
 anchor.scrollIntoView(true);
 window.history.pushState("","",href);
    }
});

// switch toc mode when window resized
window.onresize = function () {
    if (window.innerWidth < 1024) {
 tocNav.style.display = "none";
    } else {
 tocNav.style.display = "block";
    }
}
</script>
</body>
</html>
