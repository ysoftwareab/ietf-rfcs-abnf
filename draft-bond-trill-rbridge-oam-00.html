<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>RBridges: Operations, Administration, and Maintenance (OAM) Support</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="RBridges: Operations, Administration, and Maintenance (OAM) Support">
<meta name="keywords" content="TRILL, RBridges, OAM, Traceroute, Ping, Bridging, Routing, Operations, Administration, Maintenance">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">TRILL Working Group</td><td class="header">D. Bond</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">UNH-IOL</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">V. Manral</td></tr>
<tr><td class="header">Expires: April 21, 2011</td><td class="header">IP Infusion Inc.</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">October 18, 2010</td></tr>
</table></td></tr></table>
<h1><br />RBridges: Operations, Administration, and Maintenance (OAM) Support<br />draft-bond-trill-rbridge-oam-00</h1>

<h3>Abstract</h3>

<p>
        The IETF has standardized RBridges, devices that implement the TRILL protocol, a solution for transparent shortest-path frame routing in multi-hop networks with arbitrary topologies, using a link-state routing protocol technology and encapsulation with a hop-count. As RBridges are deployed in real-world situations, operators will need tools for debugging problems that arise. This document specifies a set of RBridge features for operations, administration, and maintenance purposes in RBridge campuses. The features specified in this document include tools for traceroute, ping, and error reporting.
      
</p>
<h3>Status of This Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on April 21, 2011.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">1.1.</a>&nbsp;
Requirements Language<br />
<a href="#acronyms">2.</a>&nbsp;
Acronyms<br />
<a href="#trill_oam_option">3.</a>&nbsp;
TRILL OAM Option<br />
<a href="#tools">4.</a>&nbsp;
RBridge Tools<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#app">4.1.</a>&nbsp;
Application Sub-Options RBridge Tools<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#traceroute">4.1.1.</a>&nbsp;
RBridge Traceroute<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#route_respond_traceroute">4.1.1.1.</a>&nbsp;
Route Respond Traceroute<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#route_respond_traceroute_multi_dest_targets">4.1.1.1.1.</a>&nbsp;
Multi-Destination Targets<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#route_respond_traceroute_example">4.1.1.1.2.</a>&nbsp;
Route Respond Traceroute Example<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#hop_count_traceroute">4.1.1.2.</a>&nbsp;
Hop Count Traceroute<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#hop_count_traceroute_multi_dest_targets">4.1.1.2.1.</a>&nbsp;
Multi-Destination Targets<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#hop_count_traceroute_example">4.1.1.2.2.</a>&nbsp;
Hop Count Traceroute Example<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ping">4.1.2.</a>&nbsp;
RBridge Ping<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ping_example">4.1.2.1.</a>&nbsp;
Ping Example<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#error_reporting">4.2.</a>&nbsp;
Error Sub-Options RBridge Tools<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#hop_count_zero_error_spec">4.2.1.</a>&nbsp;
Hop Count Zero Error<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#mtu_error_spec">4.2.2.</a>&nbsp;
MTU Error<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#generic_error_spec">4.2.3.</a>&nbsp;
Generic Error<br />
<a href="#trill_oam_option_format">5.</a>&nbsp;
TRILL OAM Option Format<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#code_values">5.1.</a>&nbsp;
Code Values<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#codes">5.2.</a>&nbsp;
Codes<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#application_codes">5.2.1.</a>&nbsp;
Application Codes<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#echo_request">5.2.1.1.</a>&nbsp;
Echo Request<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#route_respond_request">5.2.1.2.</a>&nbsp;
Route Respond Request<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#echo_reply">5.2.1.3.</a>&nbsp;
Echo Reply<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#error_codes">5.2.2.</a>&nbsp;
Error Codes<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#hop_count_zero_error">5.2.2.1.</a>&nbsp;
Hop Count Zero Error<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#mtu_error">5.2.2.2.</a>&nbsp;
MTU Error<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#generic_error">5.2.2.3.</a>&nbsp;
Generic Error<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#error_specifiers">5.2.2.3.1.</a>&nbsp;
Error Specifiers<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#expansion_code">5.2.3.</a>&nbsp;
Expansion Code<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#tlvs">5.3.</a>&nbsp;
Type, Length, Value (TLV) Encodings<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#tlv_types">5.3.1.</a>&nbsp;
TLV Types<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#padding">5.3.1.1.</a>&nbsp;
Padding<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#next_hop_nickname">5.3.1.2.</a>&nbsp;
Next Hop Nickname<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#incoming_port_id">5.3.1.3.</a>&nbsp;
Incoming Port ID<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#outgoing_port_id">5.3.1.4.</a>&nbsp;
Outgoing Port ID<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#outgoing_port_mtu">5.3.1.5.</a>&nbsp;
Outgoing Port MTU<br />
<a href="#oam_option_debate">6.</a>&nbsp;
OAM Option vs. OAM Frame<br />
<a href="#notes">7.</a>&nbsp;
Notes<br />
<a href="#acknowledgments">8.</a>&nbsp;
Acknowledgments<br />
<a href="#IANA">9.</a>&nbsp;
IANA Considerations<br />
<a href="#security">10.</a>&nbsp;
Security Considerations<br />
<a href="#rfc.references1">11.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">11.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">11.2.</a>&nbsp;
Informative References<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
        The IETF has standardized RBridges, devices that implement the TRILL protocol, a solution for transparent shortest-path frame routing in multi-hop networks with arbitrary topologies, using a link-state routing protocol technology and encapsulation with a hop-count (<a class='info' href='#I-D.ietf-trill-rbridge-protocol'>RFCtrill<span> (</span><span class='info'>3rd, D., Dutt, D., Gai, S., Ghanwani, A., and R. Perlman, &ldquo;Rbridges: Base Protocol Specification,&rdquo; March&nbsp;2010.</span><span>)</span></a> [I&#8209;D.ietf&#8209;trill&#8209;rbridge&#8209;protocol]).  As RBridges are deployed, operators will face problems that require tools for troubleshooting of connectivity issues in the network. By TRILL's design, every RBridge in a campus contains a link-state database that may be useful in troubleshooting. Implementers are encouraged to leverage this by providing a means for operators to view the link-state database; however, simply being able to view the link-state database is insufficient for the requirements of operations, administration, and maintenance (OAM).
      
</p>
<p>
        The link-state database is insufficient as the only tool for a number of reasons. As described in <a class='info' href='#I-D.ietf-trill-rbridge-protocol'>RFCtrill<span> (</span><span class='info'>3rd, D., Dutt, D., Gai, S., Ghanwani, A., and R. Perlman, &ldquo;Rbridges: Base Protocol Specification,&rdquo; March&nbsp;2010.</span><span>)</span></a> [I&#8209;D.ietf&#8209;trill&#8209;rbridge&#8209;protocol] and <a class='info' href='#I-D.ietf-trill-rbridge-mib'>RBridgeMIB<span> (</span><span class='info'>Rijhsinghani, A. and K. Zebrose, &ldquo;Definitions of Managed Objects for RBridges,&rdquo; September&nbsp;2010.</span><span>)</span></a> [I&#8209;D.ietf&#8209;trill&#8209;rbridge&#8209;mib], RBridges should support SNMP, but SNMP and the link-state database do not provide all the facilities needed. While the control plane within an RBridge campus may be functioning successfully the data plane may not be. This motivates the need for OAM tools that allow an operator to test the data plane. Protocols such as IP, MPLS, and IEEE 802.1 have features where an operator can exercise the data plane (<a class='info' href='#RFC4443'>RFC 4443<span> (</span><span class='info'>Conta, A., Deering, S., and M. Gupta, &ldquo;Internet Control Message Protocol (ICMPv6) for the Internet Protocol Version 6 (IPv6) Specification,&rdquo; March&nbsp;2006.</span><span>)</span></a> [RFC4443], <a class='info' href='#RFC0792'>RFC 0792<span> (</span><span class='info'>Postel, J., &ldquo;Internet Control Message Protocol,&rdquo; September&nbsp;1981.</span><span>)</span></a> [RFC0792], <a class='info' href='#IEEE.802-1ag'>IEEE 802.1ag<span> (</span><span class='info'>Institute of Electrical and Electronics Engineers, &ldquo;IEEE Stadard for Local and metropolitian area networks / Virtual Bridged Local Area Networks / Connectivity Fault Management,&rdquo; December&nbsp;2007.</span><span>)</span></a> [IEEE.802&#8209;1ag]). There is a need for a similar set of tools in TRILL.
      
</p>
<p>
        Likewise, there is a need for error reporting capabilities inside an RBridge campus. For instance, if a TRILL Inner.VLAN tag has an illegal value there should be a way for devices to report this. This would allow administrators of an RBridge campus to quickly locate a problem device in the network. This document specifies a set of RBridge features for operations, administration, and maintenance purposes in RBridge campuses along with a frame format through the use of a TRILL header option for future OAM features. The features specified in this document include tools for traceroute, ping, and error reporting. Other documents may specify additional features.
      
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Requirements Language</h3>

<p>
          The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a class='info' href='#RFC2119'>RFC 2119<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> [RFC2119].
        
</p>
<a name="acronyms"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Acronyms</h3>

<p>
        </p>
<ul class="text">
<li>BPDU - Bridge PDU
</li>
<li>CHbH - Critical Hop-by-Hop
</li>
<li>CItE - Critical Ingress-to-Egress
</li>
<li>DA - Destination Address
</li>
<li>DR - Designated Router
</li>
<li>DRB - Designated RBridge
</li>
<li>ECMP - Equal-Cost Multi-Path
</li>
<li>ESADI - End Station Address Distribution Instance
</li>
<li>FCS - Frame Check Sequence
</li>
<li>ID - Identification
</li>
<li>IEEE  - Institute of Electrical and Electronics Engineers
</li>
<li>IETF - Internet Engineering Task Force
</li>
<li>IP - Internet Protocol
</li>
<li>IS-IS - Intermediate System to Intermediate System
</li>
<li>MAC - Media Access Control
</li>
<li>MPLS - Multiprotocol Label Switching
</li>
<li>MTU - Maximum Transmission Unit
</li>
<li>OAM - Operations, Administration, and Maintenance
</li>
<li>P2P - Point-to-point
</li>
<li>PDU - Protocol Data Unit
</li>
<li>RBridge - Routing Bridge
</li>
<li>SA - Source Address
</li>
<li>SNMP - Simple Network Management Protocol
</li>
<li>TLV - Type, Length, Value
</li>
<li>TRILL - TRansparent Interconnection of Lots of Links
</li>
<li>VLAN - Virtual Local Area Network
</li>
</ul><p>
      
</p>
<a name="trill_oam_option"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
TRILL OAM Option</h3>

<p>
        To facilitate message passing as needed by OAM, a new TRILL OAM option is specified. The motivation behind choosing an option to transport OAM messages is specifically to exercise the data plane of the RBridge campus, since options appear in TRILL data frames. This option is a critial ingress-to-egress option, so that RBridges that do not implement the option will not accidentally treat the encapsulated data as valid data which should be processed as a normal TRILL data frame. In special cases the option may be marked as non-critical, such as if valid data is tagged with the OAM option for debugging as in the end of <a class='info' href='#route_respond_traceroute'>Section&nbsp;4.1.1.1<span> (</span><span class='info'>Route Respond Traceroute</span><span>)</span></a>. When a TRILL data frame has the critical bit set high in the OAM option the encapsulated frame MUST be discarded after the OAM logic processes it. If a TRILL data frame has the critical bit set low in the OAM option the encapsulated frame MUST be treated normally after the OAM logic processes it.
      
</p>
<p>
        If, in contrast to using an option to transport the messages, a separate protocol data unit (PDU) were specified this new PDU might not follow the same path as the data. This OAM option is a TLV option with a common, fixed-sized initial part of the option value (<a class='info' href='#I-D.ietf-trill-rbridge-options'>[I&#8209;D.ietf&#8209;trill&#8209;rbridge&#8209;options]<span> (</span><span class='info'>3rd, D., Ghanwani, A., and C. Bestler, &ldquo;RBridges: TRILL Header Options,&rdquo; July&nbsp;2010.</span><span>)</span></a>). This initial part contains a code that specifies a sub-option, and additional data may follow the initial part depending on this value. This section specifies the general usage of the option. <a class='info' href='#tools'>Section&nbsp;4<span> (</span><span class='info'>RBridge Tools</span><span>)</span></a> specifies some additional applications of the option. <a class='info' href='#trill_oam_option_format'>Section&nbsp;5<span> (</span><span class='info'>TRILL OAM Option Format</span><span>)</span></a> specifies the format of the option on the wire.
      
</p>
<p>
        There are two types of TRILL OAM messages: application and error-report.  Application messages have code values ranging from 0 to 127.  Error-report messages have code values ranging from 128 to 255.  Frames with an error-report message MUST NOT be generated in response to frames with an error-report message.  Implementations SHOULD rate limit the origination of error-report messages. As unknown unicast frames are sent as multi-destination message, sending unknown unicast frames with an error can lead to an amplification attack. As such special care and rate limiting needs to be done for error messages.
      
</p>
<p>
        The specification of rate limiting is beyond the scope of this document.  An RBridge SHOULD maintain counters for each type of error generated.  Application frames such as traceroute or ping frames generally contain a correctly formatted encapsulated Ethernet frame with a dummy payload.  The TRILL OAM sub-option specifies what reaction the RBridge has to the application frame.  Error frames, on the other hand, contain the error-causing frame or the initial part thereof.
      
</p>
<p>Both traceroute forms and ping use the following general layout with the TRILL OAM option being specific to the application. The fake data in certain applications can be real data:
</p><br /><hr class="insert" />
<a name="application_frame_layout"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>

+----------------------------+
|   Outer Ethernet Header    |
+----------------------------+
|        TRILL Header        |
+----------------------------+
|      TRILL OAM Option      |
+----------------------------+
|Dummy Inner Ethernet Header |
+----------------------------+
|   Dummy Ethernet Payload   |
+----------------------------+

</pre></div>
<p style='text-align: center'>
          Application Frame General Layout
        
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
        The general layout of the TRILL OAM Error reporting frame appears below. The TRILL OAM Option is specific to the type of error being reported:
      
</p><br /><hr class="insert" />
<a name="errror_frame_layout"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>

+---------------------------------------+
|         Outer Ethernet Header         |
+---------------------------------------+
|              TRILL Header             |
+---------------------------------------+
|           TRILL OAM Option            |
+---------------------------------------+
| Offending Frame Outer Ethernet Header |
+---------------------------------------+
|      Offending Frame TRILL Header     |
+---------------------------------------+
| Offending Frame Inner Ethernet Header |
+---------------------------------------+
|    Offending Frame Ethernet Payload   |
+---------------------------------------+

</pre></div>
<p style='text-align: center'>
          Error Frame General Layout
        
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
        Frames with the TRILL OAM Option generated in response to another TRILL data frame MUST have fields set as follows unless otherwise specified:
      
</p><br /><hr class="insert" />
<a name="frame_field_values"></a>
<table class="all" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="center"><col align="center"><col align="left">
<tr><th align="center">Frame Type</th><th align="center">Field</th><th align="left">Value</th></tr>
<tr>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="center">Application or Error</td>
<td align="center">Inner.MacSA</td>
<td align="left">If the Inner.MacDA of the received frame is one of the MAC addresses of the RBridge generating the frame, the value MUST be that MAC address. Otherwise, it MUST be one of the RBridge's MAC addresses.</td>
</tr>
<tr>
<td align="center">Application or Error</td>
<td align="center">Inner.MacDA</td>
<td align="left">The value MUST be the TRILL OAM unicast MAC address with a value of &lt;TBD&gt;. An egress RBridge MUST treat this MAC address as if it were one of its own MAC addresses. The Inner.MacDA MAY be other values as specified in subsequent sections.</td>
</tr>
<tr>
<td align="center">Application or Error</td>
<td align="center">Inner.VLAN ID</td>
<td align="left">The value MUST be one of the VLANs the egress RBridge advertises connectivity on.</td>
</tr>
<tr>
<td align="center">Application or Error</td>
<td align="center">Ingress RBridge nickname</td>
<td align="left">If the egress RBridge nickname of the received frame is a nickname of the RBridge generating the frame, then the value MUST be that nickname. Otherwise, it MUST be one of the RBridge's nicknames.</td>
</tr>
<tr>
<td align="center">Application or Error</td>
<td align="center">Egress RBridge nickname</td>
<td align="left">The value MUST be the ingress RBridge nickname of the received frame. If the ingress RBridge nickname received is unknown the frame MUST be generated on the port the frame was received on with an Outer.MacDA and egress RBridge nickname of the RBridge that transmitted the invalid frame.</td>
</tr>
<tr>
<td align="center">Error</td>
<td align="center">Encapsulated Frame</td>
<td align="left">The value MUST be N bytes of the frame which had the error where N is the minimum of the frame size and the MTU. This MUST include the TRILL header and MUST NOT include the link-layer header.</td>
</tr>
<tr>
<td align="center">Error</td>
<td align="center">M Bit</td>
<td align="left">The value MUST be zero.</td>
</tr>
<tr>
<td align="center">Application or Error</td>
<td align="center">Inner.Priority</td>
<td align="left">The value SHOULD be one less than the priority of the received frame, but not less than the lowest priority.</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 1: Frame Field Values&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
        RBridge campuses do not, in general, guarantee lossless transport of frames so a frame containing a TRILL OAM Option, possibly generated in response to some other frame, might be lost.
      
</p>
<a name="tools"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
RBridge Tools</h3>

<p>
        This section specifies a number of RBridge OAM tools. For classification purposes they are divided into two sections, applications and error tools.
      
</p>
<a name="app"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Application Sub-Options RBridge Tools</h3>

<a name="traceroute"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.1"></a><h3>4.1.1.&nbsp;
RBridge Traceroute</h3>

<p>
            The ability to trace the path through the network that the data is taking is an invaluable debugging tool. RBridge traceroute provides this functionality through use of the TRILL OAM option (See <a class='info' href='#trill_oam_option'>Section&nbsp;3<span> (</span><span class='info'>TRILL OAM Option</span><span>)</span></a>). This specification specifies two types of an RBridge traceroute, each providing varying benefits and drawbacks.
          
</p>
<a name="route_respond_traceroute"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.1.1"></a><h3>4.1.1.1.&nbsp;
Route Respond Traceroute</h3>

<p>
              In a route-respond traceroute, the originating RBridge transmits one or more TRILL data frames with a TRILL OAM option. This option contains a code of a route-respond request. (See <a class='info' href='#route_respond_request'>Section&nbsp;5.2.1.2<span> (</span><span class='info'>Route Respond Request</span><span>)</span></a>) The ingress RBridge MUST be the RBridge originating the frame. The route-respond traceroute is similar to the IP Option traceroute found in <a class='info' href='#RFC1393'>RFC 1393<span> (</span><span class='info'>Malkin, G., &ldquo;Traceroute Using an IP Option,&rdquo; January&nbsp;1993.</span><span>)</span></a> [RFC1393].
            
</p>
<p>
              When a traceroute is initiated, it is either targeting a known unicast target or a multi-destination target as specified by the operator. If the route-respond traceroute is for a known unicast target, the egress RBridge is the destination RBridge to which connectivity will be checked and the M bit MUST be zero. Otherwise, if the route-respond traceroute is for a multi-destination target, the egress RBridge is the distribution tree nickname for the traceroute. Multi-destination targets are handled the same as known unicast targets but require a small amount of additional logic as specified in <a class='info' href='#route_respond_traceroute_multi_dest_targets'>Section&nbsp;4.1.1.1.1<span> (</span><span class='info'>Multi-Destination Targets</span><span>)</span></a>.
            
</p>
<p>
              The purpose of the traceroute is to confirm connectivity of the data plane, and therefore additional options such as a flow ID or a security option MAY be included. If an RBridge supports equal-cost multi-pathing (ECMP) or load balancing, the RBridge SHOULD allow operators to specify which flow the traceroute is assigned to. There is no need for all RBridges to use the same assignment method. Being able to specify the flow allows operators to test the path taken by data through the data plane. The purpose of the frame is to mimic a data frame that follows the same path through the data plane that a 'real' data frame would.
            
</p>
<p>
              The route-respond request MAY have an arbitrary 32-bit unsigned integer sequence number to assist in matching reply messages to the request. In most circumstances a single route-respond request is needed to complete the trace but it might be desirable for a single RBridge to trace paths to multiple egress RBridges, or to trace differing flows simultaneously. Assigning differing sequence numbers to each frame aids in matching which trace the reply belongs to.
            
</p>
<p>
              The Inner.VLAN, Inner.MacSA, and Inner.MacDA SHOULD default to the values specified in <a class='info' href='#frame_field_values'>Table&nbsp;1<span> (</span><span class='info'>Frame Field Values</span><span>)</span></a>. RBridges SHOULD provide the ability to change these values to assign the TRILL data frame to a flow. The payload of the frame is arbitrary and MAY contain any value. This value MAY have an influence on which flow the frame is assigned to.
            
</p>
<p>
              RBridges implementing route-respond traceroute MAY issue a reply in response to this request. See <a class='info' href='#security'>Section&nbsp;10<span> (</span><span class='info'>Security Considerations</span><span>)</span></a> for reasoning on why some RBridges may choose not to respond to a request. If an RBridge chooses to respond to the request, the reply MUST consist of one TRILL data frame per request with a TRILL OAM option containing the code of an echo reply. The echo reply MUST have the same sequence number as the request being replied to.
            
</p>
<p>
              For the reply the ingress RBridge field MUST be the reply-originating RBridge. The egress RBridge MUST be the request-originating RBridge. The Inner.VLAN, Inner.MacSA, and Inner.MacDA SHOULD default to the values specified in <a class='info' href='#frame_field_values'>Table&nbsp;1<span> (</span><span class='info'>Frame Field Values</span><span>)</span></a>. The Outer.VLAN ID MUST be preserved. The M bit MUST be zero.
            
</p>
<p>
              The replying RBridge MUST include its 16-bit port ID from the port on which the request was received in the incoming port field of the reply. It MUST also include its 16-bit port ID from the port on which the frame is forwarded. A port ID of 0xFFFF indicates the frame was consumed by the RBridge itself. Finally the reply MUST include the 16-bit nickname of the next hop RBridge the frame is being sent to. If the request is a multi-destination frame, this field MUST be set to the nickname of the RBridge the request frame was received from. This is the previous hop RBridge. This is to facilitate knowledge of a more precise path through the campus as seen in <a class='info' href='#RFC5837'>RFC 5837<span> (</span><span class='info'>Atlas, A., Bonica, R., Pignataro, C., Shen, N., and JR. Rivers, &ldquo;Extending ICMP for Interface and Next-Hop Identification,&rdquo; April&nbsp;2010.</span><span>)</span></a> [RFC5837].
            
</p>
<p>
              The Internal Hop Count field is a field encoded in the echo reply option. It MUST be set to the value of the received TRILL data frame's TRILL hop-count. This allows the request-originating RBridge to order the replies received according to location in the path to the final egress RBridge. (See <a class='info' href='#echo_reply'>Section&nbsp;5.2.1.3<span> (</span><span class='info'>Echo Reply</span><span>)</span></a>)
            
</p>
<p>
              The advantage of this traceroute method is the request-originating RBridge only sends one frame. The disadvantage of it is that each transit RBridge implementing the OAM option needs to inspect the ingress to egress route-respond request option even though they are transit RBridges. Also, it is important to note the reply frame need not follow the same path though the campus. The reply messages are not meant to test the data plane.
            
</p>
<p>
              An important note to make is that the end stations are not involved in this process. RBridge traceroutes are from RBridge to RBridge. While the frames sent may emulate data sent from ESa to ESb, the end stations are not, in fact, involved. The one exception, however, is an RBridge MAY be configured to tag frames it ingresses with a route-respond request option. This would facilitate debugging of real traffic. The route-respond request option tagged frame MUST be processed normally by the egress RBridge. This is achieved by having the ingress RBridge mark real traffic with a non-critical route response option. If an RBridge is configured to tag certain frames on ingress with a route-respond request, it MUST rate limit the number of such frames that it tags to avoid becoming overwhelming the network with OAM traffic.
            
</p>
<p>
              An important implementation consideration is that the transmitting RBridge MUST wait for a reply frame until a time-out occurs. At that time, the RBridge MUST assume the frame was lost, and this shall be indicated to the operator. The length of this time-out is not specified in this document.
            
</p>
<a name="route_respond_traceroute_multi_dest_targets"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.1.1.1"></a><h3>4.1.1.1.1.&nbsp;
Multi-Destination Targets</h3>

<p>For multi-destination targets, it is important to note that at each branch in the tree the tagged frame will be replicated causing each RBridge in the tree to send a response. If all RBridges in the campus support the route-respond option, then the ingress RBridge will receive a reply from each of them less any RBridges pruned based on the Inner.VLAN. This is in contrast to a known unicast tagged frame where only the RBridges along the path from ingress to egress respond. The ingress RBridge can compile all of these replies, using the parent pointers located in the nexthop nickname field, into an output of the tree the traffic traversed. In the case that a non-valid distribution tree nickname is specified the traceroute frames should still be generated. The traceroute application MUST report any errors received due to the route-respond traceroute frames such as invalid nickname.
</p>
<a name="route_respond_traceroute_example"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.1.1.2"></a><h3>4.1.1.1.2.&nbsp;
Route Respond Traceroute Example</h3>

<p>
                <a class='info' href='#route_respond_traceroute_example_topology'>Figure&nbsp;3</a> contains a campus with three RBridges. Consider a route-respond traceroute from RB0 to RB2.
              
</p><br /><hr class="insert" />
<a name="route_respond_traceroute_example_topology"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>

+-----+  +-------+   +-------+   +-------+  +-----+
| ESa +--+  RB0  +---+  RB1  +---+  RB2  +--+ ESb |
+-----+  |ingress|   |transit|   |egress |  +-----+
         +-------+   +-------+   +-------+

 Time       RB0         RB1         RB2
  .         (1)-------&gt; (1) -------&gt; |
  .          | &lt;------- (2)          |
  .          | &lt;------- (3) &lt;-------(3)

</pre></div>
<p style='text-align: center'>
                  Route Respond Traceroute Example Topology
                
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
                In this diagram RB0 transmits frame (1) destined to RB2. This frame has the route-respond request option. When RB1 receives this frame it forwards it to RB2 and it transmits an echo reply to RB0 in frame (2). When RB2 receives frame (1) it processes that frame and it transmits an echo reply to RB0 in frame (3). Some select fields for the frames are:
              
</p><br /><hr class="insert" />
<a name="route_respond_traceroute_example_frames"></a>
<table class="all" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center">
<tr><th align="center">Frame #</th><th align="center">Ingress RBridge</th><th align="center">Egress RBridge</th><th align="center">Option Code</th><th align="center">Internal Hop Count</th><th align="center">Option Sequence Number</th></tr>
<tr>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
</tr>
<tr>
<td align="center">(1) @ RB0</td>
<td align="center">RB0</td>
<td align="center">RB1</td>
<td align="center">Route Respond Request</td>
<td align="center">N/A</td>
<td align="center">1</td>
</tr>
<tr>
<td align="center">(1) @ RB1</td>
<td align="center">RB0</td>
<td align="center">RB1</td>
<td align="center">Route Respond Request</td>
<td align="center">N/A</td>
<td align="center">1</td>
</tr>
<tr>
<td align="center">(2) @ RB1</td>
<td align="center">RB1</td>
<td align="center">RB0</td>
<td align="center">Echo Reply</td>
<td align="center">N</td>
<td align="center">1</td>
</tr>
<tr>
<td align="center">(3)</td>
<td align="center">RB2</td>
<td align="center">RB0</td>
<td align="center">Echo Reply</td>
<td align="center">N-1</td>
<td align="center">1</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 2: Route Respond Traceroute Example Frames&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
                For example, if the nicknames for RB0, RB1, and RB2 are 0x0001, 0x0002, and 0x0003 respectively, the console output from such a trace might be:
              
</p><br /><hr class="insert" />
<a name="route_respond_traceroute_example_output"></a>

<p style='text-align: left'>Route Respond Tracing
</p><table class="headers" align="left" border="0" cellpadding="2" cellspacing="2">
<col align="center"><col align="center"><col align="center"><col align="center">
<tr><th align="center">RBridge</th><th align="center">Incoming Port Id</th><th align="center">Outgoing Port Id</th><th align="center">RBridge Nexthop Nickname</th></tr>
<tr>
<td align="center">0x0001</td>
<td align="center">0xFFFF</td>
<td align="center">0x0001</td>
<td align="center">0x0002</td>
</tr>
<tr>
<td align="center">0x0002</td>
<td align="center">0x0000</td>
<td align="center">0x0001</td>
<td align="center">0x0003</td>
</tr>
<tr>
<td align="center">0x0003</td>
<td align="center">0x0000</td>
<td align="center">0xFFFF</td>
<td align="center">0x0000</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 3: Route Respond Traceroute Example Output&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>In this example, the first line of output is generated from local information, no route-respond frames are sent to generate it.
</p>
<a name="hop_count_traceroute"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.1.2"></a><h3>4.1.1.2.&nbsp;
Hop Count Traceroute</h3>

<p>
              In a hop-count traceroute, the originating RBridge starts by transmitting one TRILL data frame with a TRILL OAM option. This option contains a code of an echo request. (See <a class='info' href='#echo_request'>Section&nbsp;5.2.1.1<span> (</span><span class='info'>Echo Request</span><span>)</span></a>) The ingress RBridge MUST be the RBridge originating the frame.
            
</p>
<p>
              When a traceroute is initiated, it is either targeting a known unicast target or a multi-destination target as specified by the operator. If the hop-count traceroute is for a known unicast target, the egress RBridge is the destination RBridge to which connectivity will be checked and the M bit MUST be zero. Otherwise, if the hop-count traceroute is for a multi-destination target, the egress RBridge is the distribution tree nickname for the traceroute. Multi-destination targets are handled the same as known unicast targets but require a small amount of additional logic as specified in <a class='info' href='#hop_count_traceroute_multi_dest_targets'>Section&nbsp;4.1.1.2.1<span> (</span><span class='info'>Multi-Destination Targets</span><span>)</span></a>.
            
</p>
<p>The first echo request frame transmitted MUST have a hop-count of zero. The RBridge will continue transmitting these echo requests, incrementing the hop-count by one each time until a hop-count error message is received from the destination. Each of these requests in turn will generate a hop-count error message until the destination is reached. If a transit RBridge decrements the hop-count by more than one it may transmit multiple hop-count error messages.
</p>
<p>
              The purpose of the traceroute is to confirm connectivity of the data plane, and therefore additional options such as a flow ID or a security option MAY be included. If an RBridge supports equal-cost multi-pathing (ECMP) or load balancing, the RBridge SHOULD allow operators to specify which flow the traceroute is assigned to. There is no need for all RBridges to use the same assignment method. Being able to specify the flow allows operators to test the path taken by data through the data plane. The purpose of the frame is to mimic a data frame that follows the same path through the data plane that a 'real' data frame would.
            
</p>
<p>
              The route-respond request MAY have an arbitrary 32-bit unsigned integer sequence number to assist in matching reply messages to the request. This is important for the hop-count traceroute since replies may return to the ingress RBridge in a different order then their matching requests were sent.
            
</p>
<p>
              The Inner.VLAN, Inner.MacSA, and Inner.MacDA SHOULD default to the values specified in <a class='info' href='#frame_field_values'>Table&nbsp;1<span> (</span><span class='info'>Frame Field Values</span><span>)</span></a>.  RBridges SHOULD provide an option to change these values to assign the TRILL data frame to a flow. The payload of the frame is arbitrary and MAY contain any value. This value MAY have an influence on which flow the frame is assigned to.
            
</p>
<p>
              The replying RBridge MUST include its 16-bit port ID from the port on which the hop-count error generating frame was received in the incoming port field of the reply. It MUST also include its 16-bit port ID from the port on which the frame would be forwarded if the frame did not have an hop-count error. A port ID of 0xFFFF indicates the frame was consumed by the RBridge itself. Finally the reply MUST include the 16-bit nickname of the next hop RBridge the frame would have been sent to if there were no error. If the request is a multi-destination frame, this field MUST be set to the nickname of the RBridge the frame was received from. This is the previous hop RBridge. This is to facilitate knowledge of a more precise path through the campus as seen in <a class='info' href='#RFC5837'>RFC 5837<span> (</span><span class='info'>Atlas, A., Bonica, R., Pignataro, C., Shen, N., and JR. Rivers, &ldquo;Extending ICMP for Interface and Next-Hop Identification,&rdquo; April&nbsp;2010.</span><span>)</span></a> [RFC5837].
            
</p>
<p>
              The advantage of this traceroute method is the transit RBridges do not have to do any special processing of the frames until a hop-count error is detected, a condition they are required by the TRILL base protocol to at least detect. The disadvantage is the request-orginating RBridge needs to transmit as many frames as there are hops between itself and the destination RBridge.
            
</p>
<p>
              An important note to make is that the end stations are not involved in this process. RBridge traceroutes are from RBridge to RBridge. While the frames sent may emulate data sent from ESa to ESb, the end stations are not, in fact, involved.
            
</p>
<a name="hop_count_traceroute_multi_dest_targets"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.1.2.1"></a><h3>4.1.1.2.1.&nbsp;
Multi-Destination Targets</h3>

<p>For multi-destination targets, it is important to note that at each branch in the tree the tagged frame will be replicated causing each RBridge in the tree, possibly pruned by VLAN and/or multicast group, to send a response to the echo request. If all RBridges in the possibly pruned distribution tree support the echo request option, then the ingressing RBridge will receive a echo reply from each of them. This is in contrast to a known unicast tagged frame where only the RBridges along the path from ingress to egress transmit the error report. The ingressing RBridge can compile all of these replies, using the parent pointers located in the nexthop nickname field, into an output of the tree the traffic traversed. In the case that a non-valid distribution tree nickname is specified the traceroute frames should still be generated. The traceroute application MUST report any errors received due to the hop-count traceroute frames such as invalid distribution tree nickname. RBridges receiving a multicast destination echo request MUST NOT transmit an echo reply if the multi-destination bit is set. Echo requests not used with the hop-count traceroute are pings, and pings are not valid to multi-destination traffic. In a hop-count traceroute devices will already be transmitting a hop-count error message and so there is no reason to transmit a double set of replies. A multi-destination hop-count traceroute does not stop when an echo reply is received. It stops when the transmitted hopcount reaches 0x3F.
</p>
<a name="hop_count_traceroute_example"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.1.2.2"></a><h3>4.1.1.2.2.&nbsp;
Hop Count Traceroute Example</h3>

<p>
                <a class='info' href='#hop_count_traceroute_example_topology'>Figure&nbsp;4</a> contains a campus with three RBridges. Consider a hop-count traceroute from RB0 to RB2.
              
</p><br /><hr class="insert" />
<a name="hop_count_traceroute_example_topology"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>

+-----+  +-------+   +-------+   +-------+  +-----+
| ESa +--+  RB0  +---+  RB1  +---+  RB2  +--+ ESb |
+-----+  |ingress|   |transit|   |egress |  +-----+
         +-------+   +-------+   +-------+

 Time       RB0         RB1         RB2
  .         (1)-------&gt;  |           |
  .          | &lt;------- (2)          |
  .         (3)-------&gt; (3) -------&gt; |
  .          | &lt;------- (4) &lt;-------(4)

</pre></div>
<p style='text-align: center'>
                  Hop Count Traceroute Example Topology
                
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;4&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
                In this diagram RB0 transmits frame (1) destined to RB2. This frame has the echo request option and a hop-count of 0. When RB1 receives this frame it drops it and transmits a hop-count-exceeded message, (2), to RB0. RB0 then transmits a frame, (3), with a hop-count of 1. RB1 decrements this hop-count by 1 to 0 and forwards it to RB2. RB2 drops frame (3) and transmits a hop-count-exceeded message, (4), to RB0. The traceroute is now complete.
              
</p>
<p>
                Some select fields for the frames are:
              
</p><br /><hr class="insert" />
<a name="hop_count_traceroute_example_frames"></a>
<table class="all" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center">
<tr><th align="center">Frame #</th><th align="center">Ingress RBridge</th><th align="center">Egress RBridge</th><th align="center">Option Code</th><th align="center">Option Sequence Number</th><th align="center">Hop Count</th></tr>
<tr>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
</tr>
<tr>
<td align="center">(1) </td>
<td align="center">RB0</td>
<td align="center">RB2</td>
<td align="center">Echo Request</td>
<td align="center">1</td>
<td align="center">0</td>
</tr>
<tr>
<td align="center">(2)</td>
<td align="center">RB1</td>
<td align="center">RB0</td>
<td align="center">Hop Count Error</td>
<td align="center">1</td>
<td align="center">N/A</td>
</tr>
<tr>
<td align="center">(3) @ RB1</td>
<td align="center">RB0</td>
<td align="center">RB2</td>
<td align="center">Echo Request</td>
<td align="center">2</td>
<td align="center">1</td>
</tr>
<tr>
<td align="center">(3) @ RB2</td>
<td align="center">RB0</td>
<td align="center">RB2</td>
<td align="center">Echo Request</td>
<td align="center">2</td>
<td align="center">0</td>
</tr>
<tr>
<td align="center">(4) @ RB1</td>
<td align="center">RB2</td>
<td align="center">RB0</td>
<td align="center">Hop Count Error</td>
<td align="center">2</td>
<td align="center">N/A</td>
</tr>
<tr>
<td align="center">(4) @ RB0</td>
<td align="center">RB2</td>
<td align="center">RB0</td>
<td align="center">Hop Count Error</td>
<td align="center">2</td>
<td align="center">N/A</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 4: Hop Count Traceroute Example Frames&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
                For example, if the nicknames for RB0, RB1, and RB2 are 0x0001, 0x0002, and 0x0003 respectively, the console output from such a trace might be:
              
</p><br /><hr class="insert" />
<a name="hop_count_traceroute_example_output"></a>

<p style='text-align: left'>Hop Count Tracing
</p><table class="headers" align="left" border="0" cellpadding="2" cellspacing="2">
<col align="center"><col align="center"><col align="center"><col align="center">
<tr><th align="center">RBridge</th><th align="center">Incoming Port Id</th><th align="center">Outgoing Port Id</th><th align="center">RBridge Nexthop Nickname</th></tr>
<tr>
<td align="center">0x0001</td>
<td align="center">0xFFFF</td>
<td align="center">0x0001</td>
<td align="center">0x0002</td>
</tr>
<tr>
<td align="center">0x0002</td>
<td align="center">0x0000</td>
<td align="center">0x0001</td>
<td align="center">0x0003</td>
</tr>
<tr>
<td align="center">0x0003</td>
<td align="center">0x0000</td>
<td align="center">0xFFFF</td>
<td align="center">0x0000</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 5: Hop Count Traceroute Example Output&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>In this example, the first line of output is generated from local information, no hop-count frames are sent to generate it.
</p>
<a name="ping"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.2"></a><h3>4.1.2.&nbsp;
RBridge Ping</h3>

<p>
            Ping is a tool for verifying RBridge connectivity. Like with an RBridge traceroute, the ping-originating RBridge transmits one or more TRILL data frames with a TRILL OAM option.  This option contains the code of an echo request (See <a class='info' href='#echo_request'>Section&nbsp;5.2.1.1<span> (</span><span class='info'>Echo Request</span><span>)</span></a>). The ingress RBridge MUST be the RBridge-originating frame.  The egress RBridge is the destination RBridge to which connectivity will be checked.  The M bit MUST be zero.
          
</p>
<p>
            As with RBridge traceroute, additional options such as a flow ID or a security option MAY be included.  If an RBridge supports equal-cost multi-pathing (ECMP) or load balancing, the RBridge SHOULD allow operators to specify which flow the ping is assigned to.  There is no need for all RBridges to use the same assignment method. This ping traffic, once again, will mimic real traffic through the network, like traceroute traffic as previously specified in <a class='info' href='#route_respond_traceroute'>Section&nbsp;4.1.1.1<span> (</span><span class='info'>Route Respond Traceroute</span><span>)</span></a>.
          
</p>
<p>The echo request MAY have an arbitrary 32-bit unsigned integer sequence number to assist in matching reply messages to the request. In most circumstances, a single echo request is needed to complete the ping but it might be desirable for a single RBridge to ping multiple egress RBridges, or trace differing flows simultaneously.  Assigning differing sequence numbers to each frame aids in matching which trace the reply belongs to.
</p>
<p>
            The Inner.VLAN, Inner.MacSA, and Inner.MacDA SHOULD default to the values specified in <a class='info' href='#frame_field_values'>Table&nbsp;1<span> (</span><span class='info'>Frame Field Values</span><span>)</span></a>. RBridges SHOULD provide the ability to change these values as to assign the TRILL data frame to a flow.  The payload of the frame is arbitrary and MAY contain any value.  This value can have an influence on which flow the frame is assigned to.
          
</p>
<p>
            RBridges implementing ping MAY issue a reply in response to this request.  See <a class='info' href='#security'>Section&nbsp;10<span> (</span><span class='info'>Security Considerations</span><span>)</span></a> for reasoning on why some RBridges may choose not to respond to a request.  If an RBridge chooses to respond to the request, the reply MUST consist of one TRILL data frame per request with a OAM option containing the code of an echo reply.  The echo reply MUST have the same sequence  number as the request being matched.
          
</p>
<p>
            For the echo reply the ingress RBridge field MUST be the reply-originating RBridge's nickname.  The egress RBridge MUST be the request-originating RBridge's nickname.  The Inner.VLAN, Inner.MacSA, and Inner.MacDA SHOULD default to the values specified in <a class='info' href='#frame_field_values'>Table&nbsp;1<span> (</span><span class='info'>Frame Field Values</span><span>)</span></a>. The Outer.VLAN ID MUST be preserved. The M bit MUST be zero.
          
</p>
<p>The reply-originating RBridge MUST include its 16-bit port ID from the port on which the request was received in the incoming port field of the reply.  It MUST also include its 16-bit port ID from the port on which the frame is forwarded.  A port ID of 0xFFFF indicates the frame was consumed by the RBridge itself. The nickname field in the generated frame MUST be set to all zeros on transmission and ignored on reception. 
</p>
<p>
            The Internal Hop Count field of the reply MUST be set to zero. The ping functionality does not use the Internal Hop Count field of the reply. (See <a class='info' href='#echo_reply'>Section&nbsp;5.2.1.3<span> (</span><span class='info'>Echo Reply</span><span>)</span></a>)
          
</p>
<p>
            It is also important to note that the reply frame need not follow the same path though the campus.  The reply messages are not meant to test the data plane.
          
</p>
<p>End stations are not involved in this process.  RBridge pings are from RBridge to RBridge.  While the frames sent may emulate data sent from ESa to ESb, the end stations are not, in fact, involved.  The one exception, however, is an RBridge MAY be configured to tag frames it ingresses with an echo request option.  This would facilitate debugging of real traffic. The echo request option tagged frame MUST be processed normally by the egress RBridge. This is done by the ingress RBridge marking real traffic with a non-critical echo reply option. If an RBridge is configured to tag frames it ingresses with an echo request, it MUST rate limit how often it tags data being ingressed to prevent the network from becoming congested with OAM traffic.
</p>
<p>An important implementation consideration is that the transmitting RBridge MUST wait for a reply frame until a time-out occurs.  At that time, the RBridge MUST assume the frame was lost, and this shall be indicated to the operator.  The length of this time-out is not specified in this document.
</p>
<a name="ping_example"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.2.1"></a><h3>4.1.2.1.&nbsp;
Ping Example</h3>

<p>
              <a class='info' href='#ping_example_topology'>Figure&nbsp;5</a> contains a campus with three RBridges. Consider a ping from RB0 to RB2.
            
</p><br /><hr class="insert" />
<a name="ping_example_topology"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>

+-----+  +-------+   +-------+   +-------+  +-----+
| ESa +--+  RB0  +---+  RB1  +---+  RB2  +--+ ESb |
+-----+  |ingress|   |transit|   |egress |  +-----+
         +-------+   +-------+   +-------+

 Time       RB0         RB1         RB2
  .         (1)-------&gt; (1) -------&gt; |
  .          | &lt;------- (2) &lt;-------(2)

</pre></div>
<p style='text-align: center'>
                Ping Example Topology
              
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;5&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
              In this diagram RB0 transmits frame (1) destined to RB2. This frame has the echo request option. When RB1 receives this frame it forwards it to RB2. When RB2 receives this frame it transmits and echo reply frame (2) destined to RB0. RB1 receives this frame and forwards it to RB0.
            
</p>
<p>
              Some select fields for the frames are:
            
</p><br /><hr class="insert" />
<a name="ping_example_frames"></a>
<table class="all" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="center"><col align="center"><col align="center"><col align="center"><col align="center">
<tr><th align="center">Frame #</th><th align="center">Ingress RBridge</th><th align="center">Egress RBridge</th><th align="center">Option Code</th><th align="center">Option Sequence Number</th></tr>
<tr>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
<td align="center">&nbsp;</td>
</tr>
<tr>
<td align="center">(1) </td>
<td align="center">RB0</td>
<td align="center">RB2</td>
<td align="center">Echo Request</td>
<td align="center">1</td>
</tr>
<tr>
<td align="center">(2) </td>
<td align="center">RB2</td>
<td align="center">RB0</td>
<td align="center">Echo Reply</td>
<td align="center">1</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 6: Ping Example Frames&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
              For example, if the nicknames for RB0, RB1, and RB2 are 0x0001, 0x0002, and 0x0003 respectively, the console output from such a ping might be:
            
</p><br /><hr class="insert" />
<a name="ping_example_output"></a>
<table class="headers" align="left" border="0" cellpadding="2" cellspacing="2">
<col align="left">
<tr><th align="left">Pinging</th></tr>
<tr>
<td align="left">... from 0x0001 to 0x0003... 0x0003 is alive</td>
</tr>
<tr>
<td align="left">... from 0x0001 to 0x0003... 0x0003 is alive</td>
</tr>
<tr>
<td align="left">... from 0x0001 to 0x0003... 0x0003 is alive</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 7: Ping Example Output&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>In this example, the ping was repeated three times with the sequence number being changed each time.
</p>
<a name="error_reporting"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Error Sub-Options RBridge Tools</h3>

<p>Errors can occur through the reception of TRILL data frames. For this purpose, the TRILL OAM Option has several error sub-options. These are generated due to various events as specified subsequently.
</p>
<p>
          Each of these error sub-options is used in a similar fashion.  When a TRILL data frame is received that triggers an error, an error notification frame MAY be generated. See <a class='info' href='#security'>Section&nbsp;10<span> (</span><span class='info'>Security Considerations</span><span>)</span></a> for reasoning on why some RBridges MAY choose not to report an error. This frame has a TRILL header and it contains, as its payload, the frame received with the error. If the size of the received frame would cause the generated frame to exceed the campus-wide MTU, the payload MUST be truncated to the campus-wide MTU. The payload MUST include the TRILL header of the received frame and MUST NOT include the link-layer header. The generated reply MUST contain the error option specific to the error.
        
</p>
<p>When the original ingress RBridge receives the error frame, at a minimum, the RBridge SHOULD update a counter specifying the number of error frames received for the causing error. The encapsulated frame MUST NOT be unencapsulated and transmitted. The RBridge SHOULD also keep a set of counters for errors reported by other RBridges.
</p>
<a name="hop_count_zero_error_spec"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.1"></a><h3>4.2.1.&nbsp;
Hop Count Zero Error</h3>

<p>When a TRILL data frame is received with a hop-count of zero, an error notification frame MAY be generated. The generated reply MUST contain the hop-count zero error sub-option. If the received frame has the echo request option, the hop-count zero error option MUST have a sequence number matching the echo request. Otherwise, the sequence number MUST be set to zero. The incoming port ID MUST be the port ID the received frame arrived on. The outgoing port ID MUST be the port ID of the port the received frame would have been forwarded onto if the hop-count was not zero. Finally, the error frame MUST include the 16-bit nickname of the next hop RBridge the frame would have been sent to. If the request is a multi-destination frame, this field MUST be set to all zeros on transmission and ignored on reception. If the RBridge transmitting the request is the egress RBridge, this field MUST be set to 0x0000.
</p>
<a name="mtu_error_spec"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.2"></a><h3>4.2.2.&nbsp;
MTU Error</h3>

<p>When a TRILL data frame is received with a payload that would exceed the MTU of the port the frame would otherwise be forwarded to, an error notification frame MAY be generated. The generated reply MUST contain the MTU error sub-option. The outgoing port MTU field MUST have the MTU of the port the frame would have otherwise been transmitted on. The incoming port ID MUST be the port ID the received frame arrived on. The outgoing port ID MUST be the port ID of the port the received frame would have been forwarded onto if the frame size was not too large. Finally, the error-report message MUST include the 16-bit nickname of the next hop RBridge the frame would have been sent to. If this is a multi-destination frame this field MUST be set to all zeros on transmission and ignored on reception. If the RBridge transmitting the request is the egress RBridge, this field MUST be set to 0x0000.
</p>
<a name="generic_error_spec"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2.3"></a><h3>4.2.3.&nbsp;
Generic Error</h3>

<p>
            When a TRILL data frame is received with an error not already specified, an error notification frame is generated. The generated reply MUST contain the generic error sub-option. The sub-code MUST contain a code specifying the error encountered. The valid values are specified in <a class='info' href='#error_specifiers'>Section&nbsp;5.2.2.3.1<span> (</span><span class='info'>Error Specifiers</span><span>)</span></a>. By way of note for future error code specifications, this generic error reporting feature is meant for errors occurring where no additional information needs to be communicated back to the ingressing RBridge.
          
</p>
<a name="trill_oam_option_format"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
TRILL OAM Option Format</h3>

<p>
        This section specifies the format of the TRILL OAM Option on the wire.
      
</p><br /><hr class="insert" />
<a name="trill_oam_option_common_format"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>

| 0  1  2  3  4  5  6  7| 8| 9|     10-15       |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|IE|NC|      Type       |MT|       Length       |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|         Code          |         Subcode       |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|                   Sequence                    |
|                    Number                     |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+

</pre></div>
<p style='text-align: center'>
          TRILL OAM Option Common Initial Part
        
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;6&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
        The option fields and flags are as follows:
        </p>
<ul class="text">
<li>Type: 0x02.
</li>
<li>Length: The length of the option value in octets.
</li>
<li>IE: MUST be one. This is an ingress to egress option.
</li>
<li>NC: Varies depending on the code. 
</li>
<li>MT: MUST be zero. This is an immutable option. 
</li>
<li>
            Code: Specifies how this OAM option is to be interpreted. The value ranges from 0-255 inclusive and the code meanings are specified in <a class='info' href='#code_values'>Section&nbsp;5.1<span> (</span><span class='info'>Code Values</span><span>)</span></a>
          
</li>
<li>Subcode: Further specifies the code field. This allows for additional granularity specific to each code value. The value ranges from 0-255, inclusive and the meanings are specific to their code value.
</li>
<li>Sequence Number: This field is used to sequence frames for certain tools. Not all tools utilize the sequence number field.
</li>
</ul><p>
      
</p>
<a name="code_values"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Code Values</h3>

<p>
          The code values are:
          </p>
<ul class="text">
<li>
              0: Echo Request, See <a class='info' href='#echo_request'>Section&nbsp;5.2.1.1<span> (</span><span class='info'>Echo Request</span><span>)</span></a>
            
</li>
<li>
              1: Route Respond Request, See <a class='info' href='#route_respond_request'>Section&nbsp;5.2.1.2<span> (</span><span class='info'>Route Respond Request</span><span>)</span></a>
            
</li>
<li>
              2: Echo Reply, See <a class='info' href='#echo_reply'>Section&nbsp;5.2.1.3<span> (</span><span class='info'>Echo Reply</span><span>)</span></a>
            
</li>
<li>3-122: Available for Allocation by IETF Review
</li>
<li>123-126: Reserved for Private Experimentation
</li>
<li>
              127: Application Expansion Value, See <a class='info' href='#expansion_code'>Section&nbsp;5.2.3<span> (</span><span class='info'>Expansion Code</span><span>)</span></a>
            
</li>
<li>
              128: Hop Count Zero Error, See <a class='info' href='#hop_count_zero_error'>Section&nbsp;5.2.2.1<span> (</span><span class='info'>Hop Count Zero Error</span><span>)</span></a>
            
</li>
<li>
              129: Generic Error, See <a class='info' href='#generic_error'>Section&nbsp;5.2.2.3<span> (</span><span class='info'>Generic Error</span><span>)</span></a>
            
</li>
<li>
              130: MTU Error, See <a class='info' href='#mtu_error'>Section&nbsp;5.2.2.2<span> (</span><span class='info'>MTU Error</span><span>)</span></a>
            
</li>
<li>131-250: Available for Allocation by IETF Review
</li>
<li>251-254: Reserved for Private Experimentation
</li>
<li>
              255: Error Expansion Value, See <a class='info' href='#expansion_code'>Section&nbsp;5.2.3<span> (</span><span class='info'>Expansion Code</span><span>)</span></a>
            
</li>
</ul><p>
        
</p>
<a name="codes"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Codes</h3>

<a name="application_codes"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.1"></a><h3>5.2.1.&nbsp;
Application Codes</h3>

<a name="echo_request"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.1.1"></a><h3>5.2.1.1.&nbsp;
Echo Request</h3>
<br /><hr class="insert" />
<a name="echo_request_format"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>

| 0  1  2  3  4  5  6  7| 8| 9|     10-15       |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|IE|NC|      Type       |MT|       Length       |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|         Code          |         Subcode       |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|                   Sequence                    |
|                    Number                     |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+

</pre></div>
<p style='text-align: center'>
                Echo Request
              
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;7&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
              This option is used by ingress RBridges to request an echo reply from the egress RBridge. Further uses are specified in <a class='info' href='#traceroute'>Section&nbsp;4.1.1<span> (</span><span class='info'>RBridge Traceroute</span><span>)</span></a> and <a class='info' href='#ping'>Section&nbsp;4.1.2<span> (</span><span class='info'>RBridge Ping</span><span>)</span></a>
              </p>
<ul class="text">
<li>Length: 6
</li>
<li>IE: MUST be one. This is an ingress to egress option.
</li>
<li>NC: Defaults to zero. The OAM option is normally a critical ingress-to-egress option but it MAY be a non-critial option if the encapsulated frame is real data that needs to be processed normally on egress.
</li>
<li>MT: MUST be zero. This is an immutable option. 
</li>
<li>Code: MUST be 0.
</li>
<li>Subcode: MUST be 0x00. This field is not used by this sub-option. It is set to zero on transmission and ignored on reception.
</li>
<li>
                  Sequence Number: An arbitrary 32-bit unsigned integer used to aid in matching reply messages to echo requests. MAY be zero.
                
</li>
</ul><p>
            
</p>
<a name="route_respond_request"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.1.2"></a><h3>5.2.1.2.&nbsp;
Route Respond Request</h3>
<br /><hr class="insert" />
<a name="route_respond_request_format"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>

| 0  1  2  3  4  5  6  7| 8| 9|     10-15       |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|IE|NC|      Type       |MT|       Length       |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|         Code          |         Subcode       |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|                   Sequence                    |
|                    Number                     |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+

</pre></div>
<p style='text-align: center'>
                Route Respond Request Format
              
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;8&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
              This option is used by ingress RBridges to trace a route through an RBridge campus. Further uses are specified in <a class='info' href='#traceroute'>Section&nbsp;4.1.1<span> (</span><span class='info'>RBridge Traceroute</span><span>)</span></a>.
              </p>
<ul class="text">
<li>Length: 6
</li>
<li>IE: MUST be one. This is an ingress to egress option.
</li>
<li>NC: Defaults to zero. The OAM option is normally a critical ingress-to-egress option but it MAY be a non-critial option if the encapsulated frame is real data that needs to be processed normally on egress.
</li>
<li>MT: MUST be zero. This is an immutable option. 
</li>
<li>Code: MUST be 1.
</li>
<li>Subcode: MUST be 0x00. This field is not used by this sub-option. It is set to zero on transmission and ignored on reception.
</li>
<li>
                  Sequence Number: An arbitrary 32-bit unsigned integer used to aid in matching reply messages
                  to echo requests. May be zero.
                
</li>
</ul><p>
            
</p>
<a name="echo_reply"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.1.3"></a><h3>5.2.1.3.&nbsp;
Echo Reply</h3>
<br /><hr class="insert" />
<a name="echo_reply_format"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>

| 0  1  2  3  4  5  6  7| 8| 9|     10-15       |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|IE|NC|      Type       |MT|       Length       |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|         Code          |Reserved| I. Hop Count |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|                   Sequence                    |
|                    Number                     |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
.                                               .
.                     TLVs                      .
.                                               .
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+

</pre></div>
<p style='text-align: center'>
                Echo Reply Format
              
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;9&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
              This option is used by egress RBridges to reply to an echo request from the ingress RBridge. Further uses are specified in <a class='info' href='#traceroute'>Section&nbsp;4.1.1<span> (</span><span class='info'>RBridge Traceroute</span><span>)</span></a> and <a class='info' href='#ping'>Section&nbsp;4.1.2<span> (</span><span class='info'>RBridge Ping</span><span>)</span></a>.
              </p>
<ul class="text">
<li>Length: 14
</li>
<li>IE: MUST an one. This is an ingress to egress option.
</li>
<li>NC: MUST be zero. This is a critical option
</li>
<li>MT: MUST be zero. This is an immutable option. 
</li>
<li>Code: MUST be 2.
</li>
<li>
                  Reserved: A reserved field. Set to zero on transmission and ignored on reception.
                
</li>
<li>Internal Hop Count: If the request being replied to was an echo request, this value MUST be zero on transmission and ignored on reception. If the request being replied to was a respond request, this value is a copy of the TRILL Hop Count value in the request. The reserved and internal hop-count fields combined occupy the subcode field of the TRILL OAM option.
</li>
<li>
                  Sequence Number: A 32-bit unsigned integer used to aid in matching reply messages to echo requests. This MUST match the request being replied to.
                
</li>
<li>
                  TLVs: A set of type, length, value encoded fields as specified in <a class='info' href='#tlvs'>Section&nbsp;5.3<span> (</span><span class='info'>Type, Length, Value (TLV) Encodings</span><span>)</span></a>. The next hop nickname, outgoing port ID, and incoming port ID TLVs are required.
                
</li>
</ul><p>
            
</p>
<a name="error_codes"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.2"></a><h3>5.2.2.&nbsp;
Error Codes</h3>

<a name="hop_count_zero_error"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.2.1"></a><h3>5.2.2.1.&nbsp;
Hop Count Zero Error</h3>
<br /><hr class="insert" />
<a name="hop_count_zero_error_format"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>

| 0  1  2  3  4  5  6  7| 8| 9|     10-15       |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|IE|NC|      Type       |MT|       Length       |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|         Code          |         Subcode       |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|                   Sequence                    |
|                    Number                     |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
.                                               .
.                     TLVs                      .
.                                               .
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+

</pre></div>
<p style='text-align: center'>
                Hop Count Zero Error Format
              
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;10&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
              This option is used by egress or transit RBridges to signal that the TRILL hop-count field has reached zero.
              </p>
<ul class="text">
<li>Length: 14
</li>
<li>IE: MUST be one. This is an ingress to egress option.
</li>
<li>NC: MUST be zero. This is a critical option.
</li>
<li>MT: MUST be zero. This is an immutable option. 
</li>
<li>Code: MUST be 128.
</li>
<li>Subcode: MUST be 0x00. This field is not used by this sub-option. It is set to zero on transmission and ignored on reception.
</li>
<li>
                  Sequence Number: A 32-bit unsigned integer used to aid in matching reply messages to echo requests and route-respond requests. If the frame whose hop-count dropped to zero contains the echo request option (See <a class='info' href='#echo_request'>Section&nbsp;5.2.1.1<span> (</span><span class='info'>Echo Request</span><span>)</span></a>), this MUST match the sequence number echo request found in that option. If this is not in reply to a request, then the sequence number MUST be set to zero.
                
</li>
<li>
                  TLVs: A set of type, length, value encoded fields as specified in <a class='info' href='#tlvs'>Section&nbsp;5.3<span> (</span><span class='info'>Type, Length, Value (TLV) Encodings</span><span>)</span></a>. The next hop nickname, outgoing port ID, and incoming port ID TLVs are required.
                
</li>
</ul><p>
            
</p>
<a name="mtu_error"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.2.2"></a><h3>5.2.2.2.&nbsp;
MTU Error</h3>
<br /><hr class="insert" />
<a name="mtu_error_format"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>

| 0  1  2  3  4  5  6  7| 8| 9|     10-15       |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|IE|NC|      Type       |MT|       Length       |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|         Code          |         Subcode       |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|                   Sequence                    |
|                    Number                     |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
.                                               .
.                     TLVs                      .
.                                               .
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+

</pre></div>
<p style='text-align: center'>
                MTU Error Format
              
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;11&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
              This option is used by a transit RBridge to indicate a TRILL data frame that exceeds the MTU of the outgoing port from which it was transmitted.
              </p>
<ul class="text">
<li>Length: 10
</li>
<li>IE: MUST be one. This is an ingress to egress option.
</li>
<li>NC: MUST be zero. This is a critical option.
</li>
<li>MT: MUST be zero. This is an immutable option. 
</li>
<li>Code: MUST be 130.
</li>
<li>Subcode: MUST be 0x00. This field is not used by this sub-option. It is set to zero on transmission and ignored on reception.
</li>
<li>Sequence Number: This field is not used by this sub-option. It is set to zero on transmission and ignored on reception.
</li>
<li>
                  TLVs: A set of type, length, value encoded fields as specified in <a class='info' href='#tlvs'>Section&nbsp;5.3<span> (</span><span class='info'>Type, Length, Value (TLV) Encodings</span><span>)</span></a>. The outgoing port MTU, next hop nickname, outgoing port ID, and incoming port ID TLVs are required.
                
</li>
</ul><p>
            
</p>
<a name="generic_error"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.2.3"></a><h3>5.2.2.3.&nbsp;
Generic Error</h3>
<br /><hr class="insert" />
<a name="generic_error_format"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>

| 0  1  2  3  4  5  6  7| 8| 9|     10-15       |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|IE|NC|      Type       |MT|       Length       |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|         Code          |         Subcode       |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|                   Sequence                    |
|                    Number                     |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+

</pre></div>
<p style='text-align: center'>
                Generic Format
              
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;12&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
              This option is used by egress or transit RBridges to signal that a TRILL related frame has an error.
              </p>
<ul class="text">
<li>Length: 2
</li>
<li>IE: MUST be one. This is an ingress to egress option.
</li>
<li>NC: MUST be zero. This is a critical option.
</li>
<li>MT: MUST be zero. This is an immutable option. 
</li>
<li>Code: MUST be 129.
</li>
<li>
                  Subcode: MUST be a specifier of the error discovered in the frame. The valid values are specified in <a class='info' href='#error_specifiers'>Section&nbsp;5.2.2.3.1<span> (</span><span class='info'>Error Specifiers</span><span>)</span></a>
                
</li>
<li>Sequence Number: This field is not used by this sub-option. It is set to zero on transmission and ignored on reception.
</li>
</ul><p>
            
</p>
<a name="error_specifiers"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.2.3.1"></a><h3>5.2.2.3.1.&nbsp;
Error Specifiers</h3>

<p>The sub-code values fall into three categories: errors, warnings, and comments. All sub-codes represent something out of the ordinary that has gone wrong, but certain ones are more important then others. Sub-codes that are classified as errors are the most severe with warning sub-codes being slightly less severe. These are by default enabled. Sub-codes classified as comments are minor and are by default disabled. They may be useful for operators debugging a network. All error generations are optional and therefore MAY be generated or not generated depending on security and implementation constraints.
</p>
<p>
                The error specifiers sub-code values are:
              
</p>
<p>
                Sub-codes
              
</p>
<p>
                </p>
<ul class="text">
<li>0: Unknown Error: Indicates and an error has occurred.
</li>
<li>1: Corrupt Frame: Frame received with invalid FCS or that was not an 8-bit multiple in length. It may be impossible for a device to signal this if the low-level port hardware hides this from the software.
</li>
<li>2: Invalid Outer.MacDA: Indicates the MAC Address is a multicast address and the M bit is zero, the MAC Address is not a multicast address and the M bit is one, or the M bit is zero and the frame carried is an ESADI frame.
</li>
<li>3: Illegal Outer.VLAN: Indicates the Outer.VLAN ID is 0xFFF.
</li>
<li>4: Invalid Outer.VLAN: Indicates the Outer.VLAN ID was not the designated VLAN ID.
</li>
<li>5: Unknown TRILL Version: Indicates the TRILL Version is unknown.
</li>
<li>6: Op-Length Exceeds Frame Length: Indicates the Op-Length says the options field extends beyond the end of the received frame length.
</li>
<li>8: Unknown Egress RBridge: Indicates the Egress RBridge in a received frame is unknown.
</li>
<li>9: Unknown Ingress RBridge: Indicates the Ingress RBridge in a received frame is unknown.
</li>
<li>10: Unsupported Critical Hop-by-hop Option: Indicates an unsupported critical hop-by-hop option was received.
</li>
<li>11: Unsupported Critical Ingress-to-Egress Option: Indicates an unsupported critical ingress-to-egress option was received.
</li>
<li>12-84: Available for allocated by IETF Review
</li>
<li>85: Reserved for Private Experimentation
</li>
</ul><p>
              
</p>
<p>Warning Sub-codes
</p>
<p>
                </p>
<ul class="text">
<li>86: Illegal Inner.VLAN: Indicates the Inner.VLAN ID is 0xFFF.
</li>
<li>87: Inner/Outer VLAN Priority Mismatch: Indicates the priority values in the inner and outer VLANs do not match.
</li>
<li>88: P2P Hello on TRILL Hello Link: Indicates a P2P Hello was received on a TRILL Hello Link.
</li>
<li>89: TRILL Hello on P2P Hello Link: Indicates a TRILL Hello was received on a P2P Hello Link.
</li>
<li>90: No Adjacency: Indicates a TRILL data frame was sent from an RBridge the receiving RBridge is not adjacent with. 
</li>
<li>91: Encapsulated BPDU/VRP Frame: A TRILL Frame containing a BPDU or VRP frame was received. 
</li>
<li>92: Invalid Mutability Flag: Indicates the mutability flag was set on a received CHbH Option. 
</li>
<li>93: Invalid TLV Option Length: Indicates the option length field of a TLV option was between 121 and 127. 
</li>
<li>94: Options Ordering Error: Indicates the TLV options are ordered incorrectly. 
</li>
<li>95: Additional Flag TLV Zero: Indicates a problem in the additional Flag TLV. 
</li>
<li>96: Configured Nickname Collision: Indicates an RBridge was detected in the campus with the same nickname (Configured or not).
</li>
<li>97: Multiple DRBs detected.
</li>
<li>98: Multiple appointed forwarders detected.
</li>
<li>99-169: Available for allocation by IETF Review
</li>
<li>170: Reserved for Private Experimentation
</li>
</ul><p>
              
</p>
<p>Comment Sub-codes
</p>
<p>
                </p>
<ul class="text">
<li>171: Inner.VLAN C-Bit Set: Indicates the C-Bit in the Inner.VLAN is set.
</li>
<li>172: Unknown Inner.MacDA: Indicates the Inner.MacDA is unknown. This may occur if devices are configured to explicitly register end stations and an unknown Inner.MacDA occurs in a unicast TRILL data frame. This also only applies at egress and could indicate that the Inner.MacDA was a learned address that has timed out.
</li>
<li>173: Unknown Inner.MacSA: Indicates the Inner.MacSA is unknown. This may occur if devices are configured to explicitly register end stations and an unknown Inner.MacSA occurs in a TRILL data frame. 
</li>
<li>174: Outer.VLAN C-Bit Set: Indicates the C-Bit in the Outer.VLAN is set for an Ethernet frame.
</li>
<li>175: Invalid Reserved Bits: Indicates the reserved bits are non-zero in a received frame.
</li>
<li>176: Invalid Nickname: Indicates a nickname in the reserved space of 0xFFC0 to 0xFFFF was received that is not implemented at the receiving RBridge.
</li>
<li>177: Unsupported Non-Critical Hop-by-hop Option: Indicates an unsupported non-critical hop-by-hop option was received. While sending a non-critical option to an unsupported device is not an error this could be used to support identification of devices needing an upgrade.
</li>
<li>178: Unsupported Non-Critical Ingress-to-Egress Option: Indicates an unsupported non-critical ingress-to-egress option was received. While sending a non-critical option to an unsupported device is not an error this could be used to support identification of devices needing an upgrade.
</li>
<li>179: Performance Exceeded: Indicates a frame was discarded due to performance problems such as a buffer overflow. 
</li>
<li>180: Insufficient Hop Count: Indicates a frame was received with a hop-count that was insufficient to reach the destination.
</li>
<li>181-254: Available for allocation by IETF Review
</li>
<li>255: Reserved for Private Experimentation
</li>
</ul><p>
              
</p>
<a name="expansion_code"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.3"></a><h3>5.2.3.&nbsp;
Expansion Code</h3>
<br /><hr class="insert" />
<a name="expansion_code_format"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>

| 0  1  2  3  4  5  6  7| 8| 9|     10-15       |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|IE|NC|      Type       |MT|       Length       |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|         Code          |         Subcode       |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|                   Additional                  |
|                 Option Values                 |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+

</pre></div>
<p style='text-align: center'>
              Expansion Code Format
            
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;13&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
            This option is used to specify additional TRILL OAM Option code space beyond the 255 values specified.
            </p>
<ul class="text">
<li>Length: The length of the option value in octets.
</li>
<li>IE: MUST be one. This is an ingress-to-egress option.
</li>
<li>NC: Varies depending on the code. 
</li>
<li>MT: MUST be zero. This is an immutable option. 
</li>
<li>Code: MUST BE 127 or 255.
</li>
<li>Subcode: Further specifies the code field. This allows for additional granularity specific to each code value. The value ranges from 0-255 inclusive, and the meanings are specific to their code value.
</li>
<li>
                Additional Option Values: Specify how this OAM option is to be interpreted just as the code value does in the TRILL OAM option. The value meanings are available for allocation by IETF Review. This field occupies the sequence number field of the common OAM option initial part.
              
</li>
</ul><p>
          
</p>
<a name="tlvs"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
Type, Length, Value (TLV) Encodings</h3>

<p>To facilitate future interoperable expansion of the data carried in OAM sub-options some sub-options use a TLV encoding. These TLV sections consist of a list of type, length, value encoded data where the type signals to the RBridge how to interpret the value, and the length tells the RBridge the length of the value in bytes. The type and length are both 8 bit fields. A length of zero indicates the value is a UTF-8 string with a NULL ('\0') terminating byte.
</p><br /><hr class="insert" />
<a name="tlv_format"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>

| 0  1  2  3  4  5  6  7| 8| 9|     10-15       |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|         Type          |          Length       |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
.                                               .
.                    Value                      .
.                                               .
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+

</pre></div>
<p style='text-align: center'>
            TLV Format
          
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;14&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
          The type values are:
          </p>
<ul class="text">
<li>
              0: Padding, See <a class='info' href='#padding'>Section&nbsp;5.3.1.1<span> (</span><span class='info'>Padding</span><span>)</span></a>
            
</li>
<li>
              1: Next Hop Nickname, See <a class='info' href='#next_hop_nickname'>Section&nbsp;5.3.1.2<span> (</span><span class='info'>Next Hop Nickname</span><span>)</span></a>
            
</li>
<li>
              2: Outgoing Port ID, See <a class='info' href='#outgoing_port_id'>Section&nbsp;5.3.1.4<span> (</span><span class='info'>Outgoing Port ID</span><span>)</span></a>
            
</li>
<li>
              3: Incoming Port ID, See <a class='info' href='#incoming_port_id'>Section&nbsp;5.3.1.3<span> (</span><span class='info'>Incoming Port ID</span><span>)</span></a>
            
</li>
<li>
              4: Outgoing Port MTU, See <a class='info' href='#outgoing_port_mtu'>Section&nbsp;5.3.1.5<span> (</span><span class='info'>Outgoing Port MTU</span><span>)</span></a>
            
</li>
<li>5-254: Available for allocation by IETF Review
</li>
<li>255: Reserved for Private Experimentation
</li>
</ul><p>
        
</p>
<a name="tlv_types"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3.1"></a><h3>5.3.1.&nbsp;
TLV Types</h3>

<a name="padding"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3.1.1"></a><h3>5.3.1.1.&nbsp;
Padding</h3>
<br /><hr class="insert" />
<a name="padding_format"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>

| 0  1  2  3  4  5  6  7| 8| 9|     10-15       |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|     Type = 0x00       |          Length       |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+

</pre></div>
<p style='text-align: center'>
                Padding Format
              
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;15&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
              The padding TLV MAY appear in any TLV list to increase the length of the TRILL OAM sub-option to a multiple of 32-bits. If the length is zero the value MUST NOT be interpreted as a UTF-8 string and the value is instead interpreted as not present.
            
</p>
<a name="next_hop_nickname"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3.1.2"></a><h3>5.3.1.2.&nbsp;
Next Hop Nickname</h3>
<br /><hr class="insert" />
<a name="next_hop_nickname_format"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>

| 0  1  2  3  4  5  6  7| 8| 9|     10-15       |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|     Type = 0x01       |      Length = 0x02    |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|              Next Hop Nickname                |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+

</pre></div>
<p style='text-align: center'>
                Next Hop Nickname Format
              
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;16&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
              For traceroutes targeting known unicast destinations, hop-count errors, and MTU errors, this TLV MUST be the 16-bit nickname of the next hop RBridge the frame is being or would have been sent to. If the RBridge transmitting the TLV is the egress RBridge this field MUST be set to 0x0000. For traceroutes targeting multi-destination destinations, e.g. with the TRILL M bit high, this field contains the nickname of the RBridge the frame being responded to is from. For pings, this field MUST be set to all zeros on transmission and ignored on reception. For multi-destination hop-count errors this field contains the nickname of the RBridge the frame with the exceeded hop-count was sent from. For multi-destination MTU error traffic, this field MUST be set to all zeros on transmission and ignored on reception.
            
</p>
<a name="incoming_port_id"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3.1.3"></a><h3>5.3.1.3.&nbsp;
Incoming Port ID</h3>
<br /><hr class="insert" />
<a name="incoming_port_id_format"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>

| 0  1  2  3  4  5  6  7| 8| 9|     10-15       |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|     Type = 0x02       |      Length = 0x02    |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|               Incoming Port ID                |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+

</pre></div>
<p style='text-align: center'>
                Incoming Port ID Format
              
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;17&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
              This TLV MUST be set to the Port ID found in 'The Special VLANs and Flags sub-TLV' for the port the request being replied to was received on. ( <a class='info' href='#I-D.ietf-isis-trill'>[I&#8209;D.ietf&#8209;isis&#8209;trill]<span> (</span><span class='info'>3rd, D., Banerjee, A., Dutt, D., Perlman, R., and A. Ghanwani, &ldquo;TRILL Use of IS-IS,&rdquo; August&nbsp;2010.</span><span>)</span></a>)
            
</p>
<a name="outgoing_port_id"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3.1.4"></a><h3>5.3.1.4.&nbsp;
Outgoing Port ID</h3>
<br /><hr class="insert" />
<a name="outgoing_port_id_format"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>

| 0  1  2  3  4  5  6  7| 8| 9|     10-15       |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|     Type = 0x03       |      Length = 0x02    |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|               Outgoing Port ID                |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+

</pre></div>
<p style='text-align: center'>
                Outgoing Port ID Format
              
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;18&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
              This TLV MUST be set to the Port ID found in 'The Special VLANs and Flags sub-TLV' for the port the frame is being forwarded on to (or would have been for an echo request/hop-count error). ( <a class='info' href='#I-D.ietf-isis-trill'>[I&#8209;D.ietf&#8209;isis&#8209;trill]<span> (</span><span class='info'>3rd, D., Banerjee, A., Dutt, D., Perlman, R., and A. Ghanwani, &ldquo;TRILL Use of IS-IS,&rdquo; August&nbsp;2010.</span><span>)</span></a>) If the request was consumed by the replying RBridge, the port ID MUST be 0xFFFF.
            
</p>
<a name="outgoing_port_mtu"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3.1.5"></a><h3>5.3.1.5.&nbsp;
Outgoing Port MTU</h3>
<br /><hr class="insert" />
<a name="outgoing_port_mtu_format"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>

| 0  1  2  3  4  5  6  7| 8| 9|     10-15       |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|     Type = 0x04       |      Length = 0x02    |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+
|               Outgoing Port MTU               |
+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+--+

</pre></div>
<p style='text-align: center'>
                Outgoing Port MTU Format
              
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;19&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
              This TLV MUST be the MTU of the outgoing port specified in the outgoing port ID TLV.
            
</p>
<a name="oam_option_debate"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
OAM Option vs. OAM Frame</h3>

<p>During some offline discussion there was much debate on the use of the OAM option as presented in this draft. The problem with using an option is some ASIC implementations could slow path any TRILL data frame with an option length greater than zero by sending it to software. This means the OAM frame might not be handled by the same logic a regular data frame would be handled by.
</p>
<p>The intention of this draft was to allow OAM frames to still take the fast path by using a CItE option. All the forwarding path would have to do is peak at the first two bits in the TRILL options to know it does not need to slow path this frame. For hop count traceroutes this is fine since the frame only needs to be sent to the software after it has hit an error. With the error reporting and ping mechanisms this is also not a problem since these tools are end-to-end. The one place this might be a problem is in the route-respond traceroute. In this case transit RBridges implementing the OAM option are expected to snoop the ingress-to-egress option. Fortunately in practice if a device kept the frame on the fast path and did not snoop the OAM option this would only cause the RBridge performing the traceroute to skip certain hops along the way as seen in IP traceroutes.
</p>
<p>Another problem with using an OAM option is it limits the size of the OAM option to 120 bytes. In this presented draft this is fine since no TRILL OAM codes require a large amount of space but one can imagine more complicated applications defined later that need more bytes.
</p>
<p>
        An alternative solution to an OAM option would be to use the encapsulated frame for OAM purposes. The basic idea can be seen in <a class='info' href='#ccff'>Figure&nbsp;20</a>. The idea is to not use an option and drop the 16 bits of the IE, NC, Type, MT, and Length fields seen in <a class='info' href='#trill_oam_option_common_format'>Figure&nbsp;6</a>. The one change required here is the TLV sections would require an additional total TLV length field. to indicate how long the TLV section is.
      
</p><br /><hr class="insert" />
<a name="ccff"></a>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>

+--------------------------------+
|     Outer Ethernet Header      |
+--------------------------------+
|          TRILL Header          |
+--------------------------------+
|     Inner Ethernet Header      |
+--------------------------------+
|  TRILL or TRILL OAM Ethertype  |
+--------------------------------+
|         TRIL OAM Data          |
+--------------------------------+

</pre></div>
<p style='text-align: center'>
          OAM Frame Format
        
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;20&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>The disadvantage of this type of solution is real data can no longer be tagged with the TRILL OAM option to debug problems in real time. Also this solution does not solve the requirement of route-respond traceroute frames needing to be snooped. With this in mind a future version of this draft will present both of these solutions in parallel and perhaps using an OAM/control header as presented in other drafts.
</p>
<a name="notes"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Notes</h3>

<p>
        NOTE: This section contains some ideas and will be removed later.
      
</p>
<p>For the sequence number field in the generic error which is currently not used perhaps this could contain a pointer to the offending field in the frame. Then again we don't need a 32-bit number for that.
</p>
<p>The port-id use of 0xFFFF is not consistent with the -16 draft and would need to be reserved. Another option is to use a boolean to indicate this.
</p>
<p>Itt might be nice to specify a IS-IS sub-TLV for port-id to ifname string mapping. 
</p>
<p>Perhaps we should specify advertisement of this documents options in ISIS TLVs.
</p>
<p>Perhaps add a diagram for a multi-destination traceroute and for a error message
</p>
<p>A more detailed requirements section would benefit this draft.
</p>
<p>Traceroutes to specific multicast groups to test group pruning would be useful.
</p>
<a name="acknowledgments"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Acknowledgments</h3>

<p>
        Many people have contributed to this work, including the following, in alphabetic order: Donald E. Eastlake 3rd, Anoop Ghanwani, Jeff Laird, and Marc Sklar
      
</p>
<a name="IANA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
IANA Considerations</h3>

<p>
        IANA will create four subregistries within the TRILL registry. A "TRILL OAM Option Code" subregistry that is initially populated as specified in <a class='info' href='#code_values'>Section&nbsp;5.1<span> (</span><span class='info'>Code Values</span><span>)</span></a>.  A "TRILL OAM Option Error Sub-Option Error Specifiers" subregistry that is initially populated as specified in <a class='info' href='#error_specifiers'>Section&nbsp;5.2.2.3.1<span> (</span><span class='info'>Error Specifiers</span><span>)</span></a>. A "TRILL OAM Option Application Expansion Additional Option Values" and a "TRILL OAM Option Error Expansion Additional Option Values".
      
</p>
<p>
        Additional values for these subregistries are allocated by IETF Review <a class='info' href='#RFC5226'>[RFC5226]<span> (</span><span class='info'>Narten, T. and H. Alvestrand, &ldquo;Guidelines for Writing an IANA Considerations Section in RFCs,&rdquo; May&nbsp;2008.</span><span>)</span></a>.
      
</p>
<p>This draft also requires action to reserve the TRILL Header TLV Option Type 0x02 and of the TRILL OAM unicast MAC address.
</p>
<a name="security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
Security Considerations</h3>

<p>
        The nature of the TRILL OAM Option lends itself to security concerns. By providing information about the topology of a network, attackers can gain greater knowledge of a network in order to exploit the network. Passive attacks such as reading frames with the OAM option could be used to gain such knowledge or active attacks where an attacker mimics an RBridge can be used to probe the network. Authentication, data integrity, protection against replay attacks, and confidentiality for TRILL OAM frames may be provided using a to-be-specified TRILL Security Option. Using such a security option would mitigate both the passive and active attacks.
      
</p>
<p>
        For instance, data origin authentication could be provided in the future using a security options in the TRILL Header by verifying a hash using shared keys or a mechanism like SEND with CGA [RFC 3971]. To prevent against replay attacks rate limiting, sequence numbers as well as some nonce based mechanism could be provided. Confidentiality for TRILL OAM frames could be provided based on some future security option extension which encypts TRILL frames.
      
</p>
<p>
        In a network where one does not wish to configure a security option, the threat of attackers is still present. For this reason, generation of any TRILL OAM Option frames is optional and SHOULD be configurable by an operator on a per RBridge basis. An RBridge MAY have this configurable on a per port basis. For instance, an operator SHOULD be able to disable route-respond traceroute reply messages or error-report message generation per port.
      
</p>
<p>
        Another security threat is denial of service through use of OAM options. For this reason, RBridges MUST rate limit the generation of OAM option frames. For multi-destination frames, the frames MAY be discarded silently to prevent any DoS atacks in case of an errored packet such as an 'options not recognized' error message.
      
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11"></a><h3>11.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>11.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-isis-layer2">[I-D.ietf-isis-layer2]</a></td>
<td class="author-text">Banerjee, A. and D. Ward, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-isis-layer2-07.txt">Extensions to IS-IS for Layer-2 Systems</a>,&rdquo; draft-ietf-isis-layer2-07 (work in progress), September&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-isis-layer2-07.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-isis-trill">[I-D.ietf-isis-trill]</a></td>
<td class="author-text">3rd, D., Banerjee, A., Dutt, D., Perlman, R., and A. Ghanwani, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-isis-trill-01.txt">TRILL Use of IS-IS</a>,&rdquo; draft-ietf-isis-trill-01 (work in progress), August&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-isis-trill-01.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-trill-rbridge-options">[I-D.ietf-trill-rbridge-options]</a></td>
<td class="author-text">3rd, D., Ghanwani, A., and C. Bestler, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-trill-rbridge-options-02.txt">RBridges: TRILL Header Options</a>,&rdquo; draft-ietf-trill-rbridge-options-02 (work in progress), July&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-trill-rbridge-options-02.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-trill-rbridge-protocol">[I-D.ietf-trill-rbridge-protocol]</a></td>
<td class="author-text">3rd, D., Dutt, D., Gai, S., Ghanwani, A., and R. Perlman, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-trill-rbridge-protocol-16.txt">Rbridges: Base Protocol Specification</a>,&rdquo; draft-ietf-trill-rbridge-protocol-16 (work in progress), March&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-trill-rbridge-protocol-16.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>11.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-trill-rbridge-mib">[I-D.ietf-trill-rbridge-mib]</a></td>
<td class="author-text">Rijhsinghani, A. and K. Zebrose, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-trill-rbridge-mib-01.txt">Definitions of Managed Objects for RBridges</a>,&rdquo; draft-ietf-trill-rbridge-mib-01 (work in progress), September&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-trill-rbridge-mib-01.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="IEEE.802-1ag">[IEEE.802-1ag]</a></td>
<td class="author-text">Institute of Electrical and Electronics Engineers, &ldquo;IEEE Stadard for Local and metropolitian area networks / Virtual Bridged Local Area Networks / Connectivity Fault Management,&rdquo; IEEE&nbsp;Standard 802.1Q, December&nbsp;2007.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC0792">[RFC0792]</a></td>
<td class="author-text">Postel, J., &ldquo;<a href="http://tools.ietf.org/html/rfc792">Internet Control Message Protocol</a>,&rdquo; STD&nbsp;5, RFC&nbsp;792, September&nbsp;1981 (<a href="http://www.rfc-editor.org/rfc/rfc792.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC1393">[RFC1393]</a></td>
<td class="author-text"><a href="mailto:gmalkin@Xylogics.COM">Malkin, G.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc1393">Traceroute Using an IP Option</a>,&rdquo; RFC&nbsp;1393, January&nbsp;1993 (<a href="http://www.rfc-editor.org/rfc/rfc1393.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4443">[RFC4443]</a></td>
<td class="author-text">Conta, A., Deering, S., and M. Gupta, &ldquo;<a href="http://tools.ietf.org/html/rfc4443">Internet Control Message Protocol (ICMPv6) for the Internet Protocol Version 6 (IPv6) Specification</a>,&rdquo; RFC&nbsp;4443, March&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4443.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5226">[RFC5226]</a></td>
<td class="author-text">Narten, T. and H. Alvestrand, &ldquo;<a href="http://tools.ietf.org/html/rfc5226">Guidelines for Writing an IANA Considerations Section in RFCs</a>,&rdquo; BCP&nbsp;26, RFC&nbsp;5226, May&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5226.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5837">[RFC5837]</a></td>
<td class="author-text">Atlas, A., Bonica, R., Pignataro, C., Shen, N., and JR. Rivers, &ldquo;<a href="http://tools.ietf.org/html/rfc5837">Extending ICMP for Interface and Next-Hop Identification</a>,&rdquo; RFC&nbsp;5837, April&nbsp;2010 (<a href="http://www.rfc-editor.org/rfc/rfc5837.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">David Michael Bond</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">University of New Hampshire InterOperability Laboratory</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">121 Technology Drive Suite #2</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Durham, New Hampshire  03824</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">US</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1-603-339-7575</td></tr>
<tr><td class="author" align="right">EMail:&nbsp;</td>
<td class="author-text"><a href="mailto:david.bond@iol.unh.edu">david.bond@iol.unh.edu</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://mokon.net">http://mokon.net</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Vishwas Manral</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">IP Infusion Inc.</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">1188 E. Arques Ave.</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Sunnyvale, CA  94089</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">US</td></tr>
<tr><td class="author" align="right">EMail:&nbsp;</td>
<td class="author-text"><a href="mailto:vishwas@ipinfusion.com">vishwas@ipinfusion.com</a></td></tr>
</table>
</body></html>
