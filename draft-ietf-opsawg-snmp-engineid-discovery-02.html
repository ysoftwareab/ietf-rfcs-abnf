<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Simple Network Management Protocol (SNMP) Context EngineID
      Discovery</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Simple Network Management Protocol (SNMP) Context EngineID
      Discovery">
<meta name="keywords" content="Network Management, Simple Network Management Protocol, SNMP">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">J. Schoenwaelder</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Jacobs University Bremen</td></tr>
<tr><td class="header">Updates: <a href='http://tools.ietf.org/html/rfc3411'>3411</a> (if&nbsp;approved)</td><td class="header">February 13, 2008</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">&nbsp;</td></tr>
<tr><td class="header">Expires: August 16, 2008</td><td class="header">&nbsp;</td></tr>
</table></td></tr></table>
<h1><br />Simple Network Management Protocol (SNMP) Context EngineID
      Discovery<br />draft-ietf-opsawg-snmp-engineid-discovery-02.txt</h1>

<h3>Status of this Memo</h3>
<p>
By submitting this Internet-Draft,
each author represents that any applicable patent or other IPR claims of which
he or she is aware have been or will be disclosed,
and any of which he or she becomes aware will be disclosed,
in accordance with Section&nbsp;6 of BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on August 16, 2008.</p>

<h3>Abstract</h3>

<p>
          The Simple Network Management Protocol (SNMP) version three
	  (SNMPv3) requires that an application knows the identifier
	  (snmpEngineID) of the remote SNMP protocol engine in order
	  to retrieve or manipulate objects maintained on the remote
	  SNMP entity.
        
</p>
<p>
          This document introduces a well-known localEngineID and a
          discovery mechanism which can be used to learn the
          snmpEngineID of a remote SNMP protocol engine. The proposed
          mechanism is independent of the features provided by SNMP
          security models and may also be used by other protocol
          interfaces providing access to managed objects.
        
</p>
<p>
	  This document updates RFC 3411.
	
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#introduction">1.</a>&nbsp;
Introduction<br />
<a href="#background">2.</a>&nbsp;
Background<br />
<a href="#procedure">3.</a>&nbsp;
Procedure<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#local">3.1.</a>&nbsp;
Local EngineID<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#discovery">3.2.</a>&nbsp;
EngineID Discovery<br />
<a href="#anchor1">4.</a>&nbsp;
IANA Considerations<br />
<a href="#anchor2">5.</a>&nbsp;
Security Considerations<br />
<a href="#anchor3">6.</a>&nbsp;
Acknowledgments<br />
<a href="#rfc.references1">7.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">7.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">7.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Author's Address<br />
<a href="#rfc.copyright">&#167;</a>&nbsp;
Intellectual Property and Copyright Statements<br />
</p>
<br clear="all" />

<a name="introduction"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
        To retrieve or manipulate management information using the
        third version of the Simple Network Management Protocol
        (SNMPv3) <a class='info' href='#RFC3410'>[RFC3410]<span> (</span><span class='info'>Case, J., Mundy, R., Partain, D., and B. Stewart, &ldquo;Introduction and Applicability Statements for Internet-Standard Management Framework,&rdquo; December&nbsp;2002.</span><span>)</span></a>, it is necessary to know the
        identifier of the remote SNMP protocol engine, the so called
        snmpEngineID <a class='info' href='#RFC3411'>[RFC3411]<span> (</span><span class='info'>Harrington, D., Presuhn, R., and B. Wijnen, &ldquo;An Architecture for Describing Simple Network Management              Protocol (SNMP) Management Frameworks,&rdquo; December&nbsp;2002.</span><span>)</span></a>. While an appropriate
        snmpEngineID can in principle be configured on each management
        application for each SNMP agent, it is often desirable to
        discover the snmpEngineID automatically.
      
</p>
<p>
        This document introduces a discovery mechanism which can be
        used to learn the snmpEngineID of a remote SNMP protocol
        engine. The proposed mechanism is independent of the features
        provided by SNMP security models. The mechanism has been
        designed to co-exist with discovery mechanisms that may
        exist in SNMP security models, such as the authoritative
        engine identifier discovery of the User-based Security Model
        (USM) of SNMP <a class='info' href='#RFC3414'>[RFC3414]<span> (</span><span class='info'>Blumenthal, U. and B. Wijnen, &ldquo;User-based Security Model (USM) for version 3 of the             Simple Network Management Protocol (SNMPv3),&rdquo; December&nbsp;2002.</span><span>)</span></a>.
      
</p>
<p>
	This document updates RFC 3411 <a class='info' href='#RFC3411'>[RFC3411]<span> (</span><span class='info'>Harrington, D., Presuhn, R., and B. Wijnen, &ldquo;An Architecture for Describing Simple Network Management              Protocol (SNMP) Management Frameworks,&rdquo; December&nbsp;2002.</span><span>)</span></a> by
	clarifying the IANA rules for the maintenance of the
	SnmpEngineID format registry.
      
</p>
<p>
        The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
        NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and
        "OPTIONAL" in this document are to be interpreted as described
        in RFC 2119 <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
      
</p>
<a name="background"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Background</h3>

<p>
        Within an administrative domain, an SNMP engine is uniquely
        identified by an snmpEngineID value
        <a class='info' href='#RFC3411'>[RFC3411]<span> (</span><span class='info'>Harrington, D., Presuhn, R., and B. Wijnen, &ldquo;An Architecture for Describing Simple Network Management              Protocol (SNMP) Management Frameworks,&rdquo; December&nbsp;2002.</span><span>)</span></a>. An SNMP entity, which consists of an
        SNMP engine and several SNMP applications, may provide access
        to multiple contexts.
      
</p>
<p>
        An SNMP context is a collection of management information
        accessible by an SNMP entity.  An item of management
        information may exist in more than one context and an SNMP
        entity potentially has access to many contexts
        <a class='info' href='#RFC3411'>[RFC3411]<span> (</span><span class='info'>Harrington, D., Presuhn, R., and B. Wijnen, &ldquo;An Architecture for Describing Simple Network Management              Protocol (SNMP) Management Frameworks,&rdquo; December&nbsp;2002.</span><span>)</span></a>. A context is identified by the
        snmpEngineID value of the entity hosting the management
        information (also called a contextEngineID) and a context name
        which identifies the specific context (also called a
        contextName).
      
</p>
<p>
        To identify an individual item of management information
        within an administrative domain, a four tuple is used
        consisting of
      
</p>
<p>
        </p>
<ol class="text">
<li>a contextEngineID,
</li>
<li>a contextName,
</li>
<li>an object type, and
</li>
<li>its instance identification.
</li>
</ol><p>
      
</p>
<p>
        The last two elements are encoded in an object identifier
        (OID) value. The contextName is a character string (following
        the SnmpAdminString textual convention of the
        SNMP-FRAMEWORK-MIB <a class='info' href='#RFC3411'>[RFC3411]<span> (</span><span class='info'>Harrington, D., Presuhn, R., and B. Wijnen, &ldquo;An Architecture for Describing Simple Network Management              Protocol (SNMP) Management Frameworks,&rdquo; December&nbsp;2002.</span><span>)</span></a>) while the
        contextEngineID is an octet string constructed according to
        the rules defined as part of the SnmpEngineID textual
        convention of the SNMP-FRAMEWORK-MIB <a class='info' href='#RFC3411'>[RFC3411]<span> (</span><span class='info'>Harrington, D., Presuhn, R., and B. Wijnen, &ldquo;An Architecture for Describing Simple Network Management              Protocol (SNMP) Management Frameworks,&rdquo; December&nbsp;2002.</span><span>)</span></a>.
      
</p>
<p>
        The SNMP protocol operations and the protocol data units
        (PDUs) operate on OIDs and thus deal with object types and
        instances <a class='info' href='#RFC3416'>[RFC3416]<span> (</span><span class='info'>Presuhn, R., &ldquo;Version 2 of the Protocol Operations for             the Simple Network Management Protocol (SNMP),&rdquo; December&nbsp;2002.</span><span>)</span></a>.  The SNMP architecture
        <a class='info' href='#RFC3411'>[RFC3411]<span> (</span><span class='info'>Harrington, D., Presuhn, R., and B. Wijnen, &ldquo;An Architecture for Describing Simple Network Management              Protocol (SNMP) Management Frameworks,&rdquo; December&nbsp;2002.</span><span>)</span></a> introduces the concept of a scopedPDU
        as a data structure containing a contextEngineID, a
        contextName, and a PDU. The SNMP version 3 (SNMPv3) message
        format uses ScopedPDUs to exchange management information
        <a class='info' href='#RFC3412'>[RFC3412]<span> (</span><span class='info'>Case, J., Harrington, D., Presuhn, R., and B. Wijnen, &ldquo;Message Processing and Dispatching for the             Simple Network Management Protocol (SNMP),&rdquo; December&nbsp;2002.</span><span>)</span></a>.
      
</p>
<p>
        Within the SNMP framework, contextEngineIDs serve as
        end-to-end identifiers. This becomes important in situations
        where SNMP proxies are deployed to translate between protocol
        versions or to cross middleboxes such as network address
        translators. In addition, snmpEngineIDs separate the
        identification of an SNMP engine from the transport addresses
        used to communicate with an SNMP engine. This property can be
        used to correlate management information easily even in
        situations where multiple different transports were used to
        retrieve the information or where transport addresses can
        change dynamically.
      
</p>
<p>
        To retrieve data from an SNMPv3 agent, it is necessary to know
        the appropriate contextEngineID.  The User-based Security
        Model (USM) of SNMPv3 provides a mechanism to discover the
        snmpEngineID of the remote SNMP engine since this is needed
        for security processing reasons. The discovered snmpEngineID
        can subsequently be used as a contextEngineID in a ScopedPDU
        to access management information local to the remote SNMP
        engine. Other security models, such as the Transport Security
        Model (TSM) <a class='info' href='#I-D.TSM'>[I&#8209;D.TSM]<span> (</span><span class='info'>Harrington, D., &ldquo;Transport Security Model for SNMP,&rdquo; November&nbsp;2007.</span><span>)</span></a>, lack such a procedure
        and may use the discovery mechanism defined in this memo.
      
</p>
<a name="procedure"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Procedure</h3>

<p>
        The proposed discovery mechanism consists of two parts, namely
        (i) the definition of a special well-known snmpEngineID value,
        called the localEngineID, which always refers to a local default
        context, and (ii) the definition of a procedure to acquire the
        snmpEngineID scalar of the SNMP-FRAMEWORK-MIB
        <a class='info' href='#RFC3411'>[RFC3411]<span> (</span><span class='info'>Harrington, D., Presuhn, R., and B. Wijnen, &ldquo;An Architecture for Describing Simple Network Management              Protocol (SNMP) Management Frameworks,&rdquo; December&nbsp;2002.</span><span>)</span></a> using the special well-known local
        localEngineID value.
      
</p>
<a name="local"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Local EngineID</h3>

<p>
          An SNMP command responder implementing this specification
          MUST register their pduTypes using the localEngineID
          snmpEngineID value (defined below) using the
          registerContextEngineID() Abstract Service Interface (ASI)
          defined in RFC 3412 <a class='info' href='#RFC3412'>[RFC3412]<span> (</span><span class='info'>Case, J., Harrington, D., Presuhn, R., and B. Wijnen, &ldquo;Message Processing and Dispatching for the             Simple Network Management Protocol (SNMP),&rdquo; December&nbsp;2002.</span><span>)</span></a>. This
          registration is done in addition to the normal registration
          under the SNMP engine's snmpEngineID.  This is consistent
          with the SNMPv3 specifications since they explicitly allow
          to register multiple engineIDs and multiple pduTypes
          <a class='info' href='#RFC3412'>[RFC3412]<span> (</span><span class='info'>Case, J., Harrington, D., Presuhn, R., and B. Wijnen, &ldquo;Message Processing and Dispatching for the             Simple Network Management Protocol (SNMP),&rdquo; December&nbsp;2002.</span><span>)</span></a>.
        
</p>
<p>
          The SnmpEngineID textual convention <a class='info' href='#RFC3411'>[RFC3411]<span> (</span><span class='info'>Harrington, D., Presuhn, R., and B. Wijnen, &ldquo;An Architecture for Describing Simple Network Management              Protocol (SNMP) Management Frameworks,&rdquo; December&nbsp;2002.</span><span>)</span></a>
          defines that an snmpEngineID value MUST be between 5 and 32
          octets long.  This specification proposes to use the
          variable length format 3) and to allocate the reserved,
          unused format value 6, using the enterprise ID 0 for the
          localEngineID.  An ASN.1 definition for localEngineID would
          look like this:
        
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
            localEngineID OCTET STRING ::= '8000000006'H
</pre></div>
<p>
          The localEngineID value always provides access to the
          default context of an SNMP engine. Note that the
          localEngineID value is intended to be used as a special
          value for the contextEngineID field in the ScopedPDU. It
          MUST NOT be used as a value to identify an SNMP engine, that
          is this value MUST NOT be used in the snmpEngineID.0 scalar
          <a class='info' href='#RFC3418'>[RFC3418]<span> (</span><span class='info'>Presuhn, R., &ldquo;Management Information Base (MIB) for the             Simple Network Management Protocol (SNMP),&rdquo; December&nbsp;2002.</span><span>)</span></a> or in the msgAuthoritativeEngineID
          field in the securityParameters of the User-based Security
          Model (USM) <a class='info' href='#RFC3414'>[RFC3414]<span> (</span><span class='info'>Blumenthal, U. and B. Wijnen, &ldquo;User-based Security Model (USM) for version 3 of the             Simple Network Management Protocol (SNMPv3),&rdquo; December&nbsp;2002.</span><span>)</span></a>.
        
</p>
<a name="discovery"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
EngineID Discovery</h3>

<p>
          Discovery of the snmpEngineID is done by sending a Read
          Class protocol operation (see section 2.8 of
          <a class='info' href='#RFC3411'>[RFC3411]<span> (</span><span class='info'>Harrington, D., Presuhn, R., and B. Wijnen, &ldquo;An Architecture for Describing Simple Network Management              Protocol (SNMP) Management Frameworks,&rdquo; December&nbsp;2002.</span><span>)</span></a>) to retrieve the snmpEngineID
          scalar using the localEngineID defined above as a
          contextEngineID value.  Implementations SHOULD only perform
          this discovery step when it is needed. In particular, if
          security models are used that already discover the remote
          snmpEngineID (such as USM), then no further discovery is
          necessary. The same is true in situations where the
          application already knows a suitable snmpEngineID value.
        
</p>
<p>
	  The procedure to discover the snmpEngineID of a remote SNMP
	  engine can be described as follows:
	
</p>
<p>
	  </p>
<ol class="text">
<li>
	      Check whether a suitable contextEngineID value is
	      already known. If yes, use the provided contextEngineID
	      value and stop the discovery procedure.
	    
</li>
<li>
	      Check whether the selected security model supports
	      discovery of the remote snmpEngineID (e.g., USM with its
	      discovery mechanism). If yes, let the security model
	      perform the discovery. If the remote snmpEngineID value
	      has been successfully determined, assign it to the
	      contextEngineID and stop the discovery procedure.
	    
</li>
<li>
	      Send a Read Class operation to the remote SNMP engine
	      using the localEngineID value as the contextEngineID in
	      order to retrieve the scalar snmpEngineID.0 of the
	      SNMP-FRAMEWORK-MIB <a class='info' href='#RFC3411'>[RFC3411]<span> (</span><span class='info'>Harrington, D., Presuhn, R., and B. Wijnen, &ldquo;An Architecture for Describing Simple Network Management              Protocol (SNMP) Management Frameworks,&rdquo; December&nbsp;2002.</span><span>)</span></a>. If
	      successful, set the contextEngineID to the retrieved
	      value and stop the discovery procedure.
	    
</li>
<li>
	      Return an error indication that a suitable
	      contextEngineID could not be discovered.
	    
</li>
</ol><p>
	
</p>
<p>
	  The procedure outlined above is an example and can be
	  modified to retrieve more variables in step 3), such as the
	  sysObjectID.0 scalar or the snmpSetSerialNo.0 scalar of the
	  SNMPv2-MIB <a class='info' href='#RFC3418'>[RFC3418]<span> (</span><span class='info'>Presuhn, R., &ldquo;Management Information Base (MIB) for the             Simple Network Management Protocol (SNMP),&rdquo; December&nbsp;2002.</span><span>)</span></a>.
	
</p>
<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
IANA Considerations</h3>

<p>
	RFC 3411 requested IANA to create a registry for SnmpEngineID
	formats. However, RFC 3411 did not ask IANA to record the
	initial assignments made by RFC 3411 nor did RFC 3411 spell
	out the precise allocation rules. To address this issue, the
	following rules are hereby established.
      
</p>
<p>
        IANA has to maintain a registry for SnmpEngineID formats. The
	first four octets of an SnmpEngineID carry an enterprise
	number while the fifth octet in a variable length SnmpEngineID
	value, called the format octet, indicates how the following
	octets are formed. The following format values were allocated
	in <a class='info' href='#RFC3411'>[RFC3411]<span> (</span><span class='info'>Harrington, D., Presuhn, R., and B. Wijnen, &ldquo;An Architecture for Describing Simple Network Management              Protocol (SNMP) Management Frameworks,&rdquo; December&nbsp;2002.</span><span>)</span></a>:
      
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  Format    Description                     References
  -------   -----------                     ----------
       0    reserved, unused                 [RFC3411]
       1    IPv4 address                     [RFC3411]
       2    IPv6 address                     [RFC3411]
       3    MAC address                      [RFC3411]
       4    administratively assigned text   [RFC3411]
       5    administratively assigned octets [RFC3411]
    6-127   reserved, unused                 [RFC3411]
  128-255   enterprise specific              [RFC3411]
</pre></div>
<p>
       IANA can assign new format values out of the originally
       assigned and reserved number space 1-127. For new assignments
       in this number space, a specification is required as per
       <a class='info' href='#RFC2434'>[RFC2434]<span> (</span><span class='info'>Narten, T. and H. Alvestrand, &ldquo;Guidelines for Writing an IANA Considerations Section in RFCs,&rdquo; October&nbsp;1998.</span><span>)</span></a>. The number space 128-255 is
       enterprise specific and not controlled by IANA.
     
</p>
<p>
       This document requested the following assignment:
     
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  Format    Description                     References
  -------   -----------                     ----------
       6    local engine                     [RFCXXXX]

  [RFC Ed.: replace XXXX with RFC number assigned to the document]
</pre></div>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Security Considerations</h3>

<p>
        SNMP version 3 (SNMPv3) provides cryptographic security to
	protect devices from unauthorized access. This specification
	recommends to use the security services provided by SNMPv3. In
	particular, it is RECOMMENDED to protect the discovery
	exchange.
      
</p>
<p>
	In situations where SNMPv3 is used without security (i.e., the
	security level of noAuthNoPriv is used), the introduction of a
	localEngineID may make it slightly easier for an attacker to
	discover suitable snmpEngineID values. However, since SNMP
	messages with a security level of noAuthNoPriv are normally
	carried in clear-text over the wire, it is usually easy for an
	attacker to discover snmpEngineID values by sniffing on the
	wire and any attempts to keep snmpEngineID values private will
	not lead to strong security. The usage of SNMPv3 without
	security is therefore generally NOT RECOMMENDED.
      
</p>
<p>
	If a device configuration permits non-secure SNMPv1/v2c access
	to a target system, then reading the snmpEngineID variable of
	the SNMP-FRAMEWORK-MIB will also reveal a suitable
	contextEngineID value for subsequent SNMPv3 usage. However,
	implementations should not rely on non-secure SNMPv1/v2c
	access and therefore MUST implement this specification to
	enable secure contextEngineID discovery.
      
</p>
<p>
	The isAccessAllowed() abstract service primitive of the SNMP
	access control subsystem does not take the contextEngineID
	into account when checking access rights
	<a class='info' href='#RFC3411'>[RFC3411]<span> (</span><span class='info'>Harrington, D., Presuhn, R., and B. Wijnen, &ldquo;An Architecture for Describing Simple Network Management              Protocol (SNMP) Management Frameworks,&rdquo; December&nbsp;2002.</span><span>)</span></a>. As a consequence, it is not possible
	to define a special view for context engineID discovery. A
	request with a localEngineID is thus treated like a request
	with the correct snmpEngineID by the access control subsystem.
	This is inline with the SNMPv3 design where the authenticated
	identity is the securityName (together with the securityModel
	and securityLevel information) and transport addresses or
	knowledge of contextEngineID values do not impact to the
	access control decision.
      
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Acknowledgments</h3>

<p>
        Dave Perkins suggested to introduce a "local" contextEngineID
        during the interim meeting of the ISMS working group in
        Boston, 2006. Joe Fernandez, David Harrington, Dan Romascanu,
        and Bert Wijnen provided helpful review and feedback, which
        helped to improve this document.
      
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>7.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text">Bradner, S., &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3411">[RFC3411]</a></td>
<td class="author-text">Harrington, D., Presuhn, R., and B. Wijnen, &ldquo;<a href="http://tools.ietf.org/html/rfc3411">An Architecture for Describing Simple Network Management 
            Protocol (SNMP) Management Frameworks</a>,&rdquo; STD&nbsp;62, RFC&nbsp;3411, December&nbsp;2002.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3412">[RFC3412]</a></td>
<td class="author-text">Case, J., Harrington, D., Presuhn, R., and B. Wijnen, &ldquo;<a href="http://tools.ietf.org/html/rfc3412">Message Processing and Dispatching for the
            Simple Network Management Protocol (SNMP)</a>,&rdquo; STD&nbsp;62, RFC&nbsp;3412, December&nbsp;2002.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3414">[RFC3414]</a></td>
<td class="author-text">Blumenthal, U. and B. Wijnen, &ldquo;<a href="http://tools.ietf.org/html/rfc3414">User-based Security Model (USM) for version 3 of the
            Simple Network Management Protocol (SNMPv3)</a>,&rdquo; STD&nbsp;62, RFC&nbsp;3414, December&nbsp;2002.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3416">[RFC3416]</a></td>
<td class="author-text">Presuhn, R., &ldquo;<a href="http://tools.ietf.org/html/rfc3416">Version 2 of the Protocol Operations for
            the Simple Network Management Protocol (SNMP)</a>,&rdquo; STD&nbsp;62, RFC&nbsp;3416, December&nbsp;2002.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3418">[RFC3418]</a></td>
<td class="author-text">Presuhn, R., &ldquo;<a href="http://tools.ietf.org/html/rfc3418">Management Information Base (MIB) for the
            Simple Network Management Protocol (SNMP)</a>,&rdquo; STD&nbsp;62, RFC&nbsp;3418, December&nbsp;2002.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2434">[RFC2434]</a></td>
<td class="author-text">Narten, T. and H. Alvestrand, &ldquo;<a href="http://tools.ietf.org/html/rfc2434">Guidelines for Writing an IANA Considerations Section in RFCs</a>,&rdquo; BCP&nbsp;26, RFC&nbsp;2434, October&nbsp;1998.</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>7.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC3410">[RFC3410]</a></td>
<td class="author-text">Case, J., Mundy, R., Partain, D., and B. Stewart, &ldquo;<a href="http://tools.ietf.org/html/rfc3410">Introduction and Applicability Statements for Internet-Standard Management Framework</a>,&rdquo; RFC&nbsp;3410, December&nbsp;2002.</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.TSM">[I-D.TSM]</a></td>
<td class="author-text">Harrington, D., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-isms-transport-security-model-07.txt.txt">Transport Security Model for SNMP</a>,&rdquo; draft-ietf-isms-transport-security-model-07.txt (work in progress), November&nbsp;2007.</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Author's Address</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Juergen Schoenwaelder</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Jacobs University Bremen</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Campus Ring 1</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">28725 Bremen</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Germany</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+49 421 200-3587</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:j.schoenwaelder@jacobs-university.de">j.schoenwaelder@jacobs-university.de</a></td></tr>
</table>
<a name="rfc.copyright"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Full Copyright Statement</h3>
<p class='copyright'>
Copyright &copy; The IETF Trust (2008).</p>
<p class='copyright'>
This document is subject to the rights,
licenses and restrictions contained in BCP&nbsp;78,
and except as set forth therein,
the authors retain all their rights.</p>
<p class='copyright'>
This document and the information contained herein are provided
on an &ldquo;AS IS&rdquo; basis and THE CONTRIBUTOR,
THE ORGANIZATION HE/SHE REPRESENTS
OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE.</p>
<h3>Intellectual Property</h3>
<p class='copyright'>
The IETF takes no position regarding the validity or scope of any
Intellectual Property Rights or other rights that might be claimed
to pertain to the implementation or use of the technology
described in this document or the extent to which any license
under such rights might or might not be available; nor does it
represent that it has made any independent effort to identify any
such rights.
Information on the procedures with respect to
rights in RFC documents can be found in BCP&nbsp;78 and BCP&nbsp;79.</p>
<p class='copyright'>
Copies of IPR disclosures made to the IETF Secretariat and any
assurances of licenses to be made available,
or the result of an attempt made to obtain a general license or
permission for the use of such proprietary rights by implementers or
users of this specification can be obtained from the IETF on-line IPR
repository at <a href='http://www.ietf.org/ipr'>http://www.ietf.org/ipr</a>.</p>
<p class='copyright'>
The IETF invites any interested party to bring to its attention
any copyrights,
patents or patent applications,
or other
proprietary rights that may cover technology that may be required
to implement this standard.
Please address the information to the IETF at <a href='mailto:ietf-ipr@ietf.org'>ietf-ipr@ietf.org</a>.</p>
</body></html>
