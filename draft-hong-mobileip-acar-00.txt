

   Mobile-IP Working Group                               Yong-Geun Hong 
   Internet Draft                                         Myung-Ki Shin 
   Draft-hong-mobileip-acar-00.txt                        Jung-Soo Park 
   Expires: December 2003                                Hyoung-Jun Kim 
                                                                   ETRI 
                                                              June 2003 
    
    
       Access Router Based Movement Detection and CoA Configuration 
                      draft-hong-mobileip-acar-00.txt 
    
    
Status of this Memo 
    
   This document is an Internet-Draft and is in full conformance with 
   all provisions of Section 10 of RFC2026.  
    
   Internet-Drafts are working documents of the Internet Engineering 
   Task Force (IETF), its areas, and its working groups.  Note that      
   other groups may also distribute working documents as Internet-Drafts. 
    
   Internet-Drafts are draft documents valid for a maximum of six months 
   and may be updated, replaced, or obsoleted by other documents at any 
   time.  It is inappropriate to use Internet-Drafts as reference 
   material or to cite them other than as "work in progress." 
    
   The list of current Internet-Drafts can be accessed at 
        http://www.ietf.org/ietf/1id-abstracts.txt 
    
   The list of Internet-Draft Shadow Directories can be accessed at 
        http://www.ietf.org/shadow.html. 
    
    
    
Abstract 
    
   This document proposes Access Router (AR) based movement detection 
   and Care-of Address (CoA) configuration for fast handover in Mobile 
   IPv6. An Active Access Router (AcAR) which will serve a Mobile Node 
   (MN) performs movement detection, formulates a new CoA of the MN and 
   does Duplicate Address Detection (DAD) on behalf of the MN. After 
   confirming the uniqueness of the new CoA, the AcAR sends it through a 
   RA message. Since an AcAR can quickly determine the L3 movement by 
   the comparison between neighbor caches and L2 information of a MN, a 
   MN does not have to wait to receive RA messages from ARs. Thus, the 
   movement detection delay is reduced. Since DAD is performed by an 
   AcAR in advance, a MN does not have to do normal DAD and it can use 
   the new CoA for its interface directly. 
    
    
 
 
Hong, Shin, Park, Kim     Expires: December 2003              [Page 1] 
                  AR-Based MD and CoA Configuration         June 2003 
 
Table of Contents 
    
   1. Introduction...................................................2 
   2. Terminology....................................................3 
   3. Protocol Overview..............................................3 
      3.1 Movement Detection.........................................3 
      3.2 CoA configuration and Duplicate Address Detection..........4 
      3.3 Delivering new CoA to MN...................................4 
   4. Modification to IPv6 Neighbor Discovery........................5 
      4.1 Modified Router Solicitation Message Format................5 
      4.2 Modified Router Advertisement Message Format...............5 
      4.3 Modified Prefix Information Option Format..................6 
   5. Security Considerations........................................7 
   References........................................................8 
   Acknowledgments...................................................9 
   Author's Addresses................................................9 
    
    
1. Introduction 
    
   In Mobility Support in IPv6 (MIPv6) [1], a MN can determine its 
   network layer movement by using Router Discovery and Neighbor 
   Unreachability Detection. After a MN makes a new CoA, it must check 
   its uniqueness by DAD. The delay of movement detection, new CoA 
   configuration and DAD are inevitable in MIPv6 because of its basic 
   operations. But the combined delay could be appreciable for real-time 
   applications and throughput-sensitive applications [2]. Until now, 
   there are many efforts to reduce the handover latency, especially in 
   movement detection phase and in new CoA configuration phase. For fast 
   movement detection, there are many drafts such as IPv6 Fast Router 
   Advertisement [3], Fast Router Discovery with RA Caching in AP [4], 
   and Router Advertisement Link Identification for Mobile IPv6 Movement 
   Detection [5]. Also, there are many drafts such as Enhanced 
   Forwarding from Previous Care-of Address for Fast Mobile IPv6 
   Handover (eFWD) [6], Optimistic Duplicate Address Detection [7], and 
   Advance Duplicate Address Detection [8] for fast new CoA 
   configuration and DAD. 
    
   This document proposes Access Router (AR) based movement detection 
   and CoA configuration for fast handover in Mobile IPv6. An Active 
   Access Router (AcAR) which will serve a MN performs movement 
   detection, formulates a new CoA of the MN and does DAD on behalf of 
   the MN independently of MN's request immediately after L2 handoff. 
   Since an AcAR can quickly determine the L3 movement by the comparison 
   between neighbor caches and L2 information of a MN, a MN does not 
   have to wait to receive RA messages from ARs. Thus, the movement 
   detection delay is reduced. After confirming the uniqueness of the 
   new CoA, the AcAR sends it through a RA message. Since DAD is 
   performed by an AcAR in advance, a MN does not have to do normal DAD 
   and it can use the new CoA for its interface. 
 
 
Hong, Shin, Park, Kim     Expires: December 2003              [Page 2] 
                  AR-Based MD and CoA Configuration         June 2003 
 
2. Terminology 
    
   CoA      Care-of Address 
    
   DAD      Duplicate Address Detection 
    
   MN       Mobile Node 
    
   AcAR     Active Access Router  
            It performs movement detection, CoA configuration and DAD on  
            behalf of a MN. 
    
    
3. Protocol Overview 
 
   The goal of this draft is that it considers movement detection as 
   well as new CoA configuration, and DAD simultaneously at AR. Until 
   now, most only focus on one of them. And only MN does any necessary 
   operations to detect L3 movement such as soliciting a RS message, 
   checking the reachability of an old AR, checking the validation of an 
   old CoA and waiting RA messages from any ARs. If a MN and an AR have 
   the same information to detect L3 movement, the AR may take the role 
   of movement detection. It is same to CoA configuration and DAD. If an 
   AR generates a new CoA for a MN, it can do DAD instead of a MN. We 
   think that it is an extension of proxy-DAD in Home Agent.  
    
3.1 Movement Detection 
    
   After the completion of L2 handoff, a MN and an AR may know it by 
   some general L2 event. Especially in 802.11 networks, the LU trigger 
   may be used after reassociation.request and reassociation.reply 
   messages sharing.  
    
   In our proposed scheme, L3 movement detection is initiated by an AR. 
   We call this AR as an Active Access Router (AcAR). This initiation of 
   an AcAR is enabled by L2 triggers immediately after the completion of 
   L2 handoff and delivering to an AcAR independently of MN's request. 
   When L2 triggers are delivered to an AcAR, L2 information of a MN 
   also might be included in L2 triggers. For example, in 802.11 
   networks, delivering the L2 triggers to an AcAR depends on the 
   relationship between an Access Point (AP) and an AcAR [9]. If the AP 
   is acting as a transparent Layer 2 bridges, then some type of 
   protocol is needed to transfer the trigger from the AP to the AcAR. 
   This could be an addition to the Layer 2 protocol (802.11), or it 
   could be an enhancement of IAPP, the 802.11 InterAccess Point 
   Protocol [10], or it could be an IPv6 protocol enhancement [11].  
   Upon the receipt of the trigger protocol, the AcAR's driver or Mobile 
   IP stack disposes of it exactly as in the case of a trigger on the MN. 
   If the AP is integrated with the AcAR, then the trigger is delivered 
   programmatically to the Mobile IP stack. 
 
 
Hong, Shin, Park, Kim     Expires: December 2003              [Page 3] 
                  AR-Based MD and CoA Configuration         June 2003 
 
    
   After an AcAR receive L2 triggers, it can do movement detection 
   operation. The AcAR compare the L2 identifier of a MN (MAC address in 
   case of 802.11) with the values in neighbor caches. The comparison 
   results in two cases.  
     
    - The L2 identifier is not found in neighbor cache. It means that 
     the MN is a new comer of the subnet area of the AcAR. So the AcAR 
     prepare CoA generation and DAD operation. This situation is that 
     the MN is moved between each AR which has a different subnet 
     prefix. 
     
    - The L2 identifier is found in neighbor caches. It means that the 
     MN is already served by the AcAR. So the AcAR does not have to do 
     CoA generation and DAD operation. The only thing needed is that 
     the AcAR must immediately inform it to the MN and enables the MN 
     to continuously use the existing CoA. This situation is that the 
     MN is not moved between each AR which has a different subnet 
     prefix. For example, in 802.11 networks, the MN is moved between 
     different AP but each AP is connected to the same AR. In this case, 
     L2 handoff is happened, but L3 handover is not happened. So other 
     CoA configuration and DAD operation for the MN is unnecessary. 
    
3.2 CoA configuration and Duplicate Address Detection 
    
   If an AcAR decides to generate a CoA for a MN, it uses its prefix 
   information and L2 information of the MN which is included in L2 
   triggers. As described in IPv6 Stateless Address Autoconfiguration 
   [12], the CoA is generated using normal IPv6 mechanism. The AcAR 
   already has the prefix as one router and a L2 identifier (MAC address 
   in case of 802.11 networks) is provided by the L2 triggers. 
    
   After configuration of a new CoA, the AcAR does DAD operation on 
   behalf of the MN. If DAD is succeeded, the AcAR can deliver the CoA 
   to the MN. If DAD is failed, it follows normal IPv6 mechanism.  
 
3.3 Delivering new CoA to MN 
 
   When a MN requests a CoA through a modified Router Solicitation (RS) 
   message, an AcAR responds to the MN with a modified Router 
   Advertisement (RA) message which includes the new CoA. If movement 
   detection, CoA configuration and DAD are finished before the AcAR 
   receives the RS message, the AcAR responds immediately. But if the 
   operations are not finished, the AcAR wait to send the RA message 
   until completing these operations. On the other hand, the AcAR can 
   send the modified RA message in unsolicited manner. After the 
   completion of DAD, even though there is no solicited message, the 
   AcAR does the normal neighbor discovery protocol to acquire an IP 
   address of the MN using L2 information of the MN. Then the AcAR can 
   deliver the new generated CoA to the MN without a solicited message. 
 
 
Hong, Shin, Park, Kim     Expires: December 2003              [Page 4] 
                  AR-Based MD and CoA Configuration         June 2003 
 
    
   When the L3 movement is not happened even thought the L2 handoff is 
   happened, an AcAR informs it to an MN and enables the MN to 
   continuously use the existing CoA immediately after movement 
   detection. 
    
    
4. Modification to IPv6 Neighbor Discovery 
    
4.1 Modified Router Solicitation Message Format 
    
   Host sends Router Solicitations in order to prompt routers to 
   generate Router Advertisements quickly [13]. Like this, a MN can send 
   modified RS messages to AcARs to obtain a new CoA. To do this, we 
   modify the basic RS message by the addition of a single flag bit (C) 
   to indicate that the MN sending the RS message wants to get a new CoA 
   from AcARs. 
    
    
     0                   1                   2                   3 
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
    |     Type      |     Code      |          Checksum             | 
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
    |C|                          Reserved                           | 
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
    |   Source link-layer address options 
    +-+-+-+-+-+-+-+-+-+-+-+- 
    
    
   This format represents the following changes over that originally 
   specified for Neighbor Discovery [13].  
    
   CoA Generate (C)  
      1-bit CoA generate flag. When set, indicates that this RS message 
      is to request AcARs to generate a new CoA and respond.  
    
   Reserved   
      Reduced from a 32-bit field to a 31-bit field to account for the 
      addition of the above bit. 
    
   Options   
      Use Source link-layer address options. This options is used to 
      check the proper node for assigning new CoA by AcAR. 
 
4.2 Modified Router Advertisement Message Format 
 
   Routers send out Router Advertisement messages periodically, or in 
   response to a router Solicitation [13]. Like this, an AcAR responds 
   to the above RS message. We modify the basic RA message by the 
 
 
Hong, Shin, Park, Kim     Expires: December 2003              [Page 5] 
                  AR-Based MD and CoA Configuration         June 2003 
 
   addition of a single flag bit (C) to indicate that the modified 
   prefix information option includes the new generated CoA for the MN. 
    
    
     0                   1                   2                   3 
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
     |     Type      |     Code      |          Checksum             | 
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
     | Cur Hop Limit |M|O|H|C|Res... |       Router Lifetime         | 
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
     |                         Reachable Time                        | 
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
     |                          Retrans Timer                        | 
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
     |   Prefix Information options  
     +-+-+-+-+-+-+-+-+-+-+-+- 
    
    
   This format represents the following changes over that originally 
   specified for MIPv6 [1].  
    
   CoA Generate (C) 
      1-bit CoA generate flag. When set, indicates that this RA message 
      is advertised by an AcAR and the prefix information option in 
      this RA message includes the new generated CoA for the MN.  
    
   Reserved    
      Reduced from a 5-bit field to a 4-bit field to account for the 
      addition of the above bit. 
    
   Options      
      Use the modified prefix information option. This option is used 
      to deliver the generated CoA to the MN by AcAR. 
 
4.3 Modified Prefix Information Option Format 
 
   MIPv6 extends Neighbor Discovery to allow a router to advertise its 
   global address, by the addition a single flag bit in the format of a 
   prefix information for use in a RA message [1]. Like this, we modify 
   the prefix information option by the addition a single flag (C) bit 
   to indicate that the prefix field in this option contains the CoA for 
   the MN. 
    
    
    
    
    
    
    
 
 
Hong, Shin, Park, Kim     Expires: December 2003              [Page 6] 
                  AR-Based MD and CoA Configuration         June 2003 
 
      0                   1                   2                   3 
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
     |     Type      |    Length     | Prefix Length |L|A|R|C|Res..  | 
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
     |                         Valid Lifetime                        | 
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
     |                       Preferred Lifetime                      | 
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
     |                           Reserved2                           | 
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
     |                                                               | 
     +                                                               + 
     |                                                               | 
     +                            Prefix                             + 
     |                                                               | 
     +                                                               + 
     |                                                               | 
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
    
    
   This format represents the following changes over that originally 
   specified for MIPv6 [1].  
    
   CoA Generate (C)   
      1-bit CoA generate flag. When set, indicates that the prefix 
      field contains a complete IP address that will be assigned to the 
      MN as a CoA. 
    
   Reserved   
      Reduced from a 5-bit field to a 4-bit field to account for the 
      addition of the above bit. 
    
   Prefix    
      The complete IP address which is generated by an AcAR for a CoA of  
      the MN. If the IP address is the same to the existing CoA of MN, 
      it indicated that the MN can use the existing CoA even though L2 
      handoff. 
 
 
5. Security Considerations 
    
   In our proposed scheme, a delivering of L2 triggers to an AR may be 
   security issues. The specific method is not defined and the delivery 
   of L2 triggers can be done by L2 or L3 messages. The solution may be 
   dependent on each method. 
    
   Security issues of using a modified RS, RA message and modified 
   Prefix Information Option is not beyond the scope of Neighbor 
   Discovery and MIPv6. 
 
 
Hong, Shin, Park, Kim     Expires: December 2003              [Page 7] 
                  AR-Based MD and CoA Configuration         June 2003 
 
References 
    
   [1] D. Johnson, C. Perkins, J. Arkko, "Mobility Support in IPv6", 
       draft-ietf-mobileip-ipv6-22.txt (work in progress), May 2003
    
   [2] Koodli, R., "Fast Handovers for Mobile IPv6", 
      draft-ietf-mobileip-fast-mipv6-06 (work in progress), March 2003. 
    
   [3] J. Kempf, M. Khalil, B. Pentland. "IPv6 Fast Router 
       Advertisement", draft-mkhalil-ipv6-fastra-03.txt, March 2002. 
    
   [4] JinHyoeck Choi, DongYun Shin. "Fast Router Discovery with RA",  
       draft-jinchoi-mobileip-frd-00.txt (work in progress), Feb 2003. 
    
   [5] B. Pentland, G. Daley, "Router Advertisement Link Identification 
       for Mobile IPv6 Movement Detection", draft-pentland-mobileip-
       linkid-00.txt (work in progress), May 2003. 
    
   [6] Youngjune Gwon, A. Yegin, "Enhanced Forwarding from Previous 
       Care-of Address for Fast Mobile IPv6 Handovers (eFWD)",  
       draft-gwon-mobileip-efwd-fmipv6-01.txt, June 2002. 
    
   [7] N. Moore, "Optimistic Duplicated Address Detection", draft-moore-
       ipv6-optimistic-dad-01.txt (work in progress), Feb 2003. 
    
   [8] Y. Han, Y. Choi, S. Park, "Advance Duplicate Address Detection", 
       draft-han-mobileip-adad-00.txt (work in progress), June 2003. 
    
   [9] A. Yegin, et al, "Supporting Optimized Handover for IP Mobility-
       Requirements for Underlying Systems", draft-manyfolks-l2-
       mobilereq-02.txt, June 2002. 
    
   [10]"Recommended Practice for Multi-Vendor Access Point  
       Interoperability via an Inter-Access Point Protocol Across  
       Distribution Systems Supporting IEEE 802.11 Operation," IEEE Std  
       802.11f/D1, DRAFT. 
    
   [11] A. Yegin, "Link-layer Triggers Protocol", draft-yegin-l2-
        triggers-00.txt, June 2002. 
    
   [12] Thomson, S. and T. Narten, "IPv6 Stateless Address         
        Autoconfiguration", RFC 2462, December 1998. 
    
   [13] Narten, T., Nordmark, E. and W. Simpson, "Neighbor Discovery for 
        IP Version 6 (IPv6)", RFC 2461, December 1998. 
    
    
    
    
    
 
 
Hong, Shin, Park, Kim     Expires: December 2003              [Page 8] 
                  AR-Based MD and CoA Configuration         June 2003 
 
Acknowledgments 
    
   Thanks to Hee Young Jung, Seok Joo Koh and Kyeong Jin Lee for 
   providing valuable feedback and contributing to this draft. 
    
    
Author's Addresses 
    
   Yong-Guen Hong 
   ETRI PEC 
   161 Gajeong-Dong, Yuseong-Gu, Daejeon 305-350, Korea 
   Tel : +82 42 860 6447 
   Fax : +82 42 861 5404 
   E-mail : yghong@etri.re.kr 
    
   Myung-Ki Shin 
   ETRI PEC 
   161 Gajeong-Dong, Yuseong-Gu, Daejeon 305-350, Korea 
   Tel : +82 42 860 4847 
   Fax : +82 42 861 5404 
   E-mail : mkshin@etri.re.kr 
    
   Jung-Soo Park 
   ETRI PEC 
   161 Gajeong-Dong, Yuseong-Gu, Daejeon 305-350, Korea 
   Tel : +82 42 860 6514 
   Fax : +82 42 861 5404 
   E-mail : pjs@etri.re.kr 
    
   Hyoung-Jun Kim 
   ETRI PEC 
   161 Gajeong-Dong, Yuseong-Gu, Daejeon 305-350, Korea 
   Tel : +82 42 860 6576 
   Fax : +82 42 861 5404 
   E-mail : khj@etri.re.kr 
     














 
 
Hong, Shin, Park, Kim     Expires: December 2003              [Page 9] 
