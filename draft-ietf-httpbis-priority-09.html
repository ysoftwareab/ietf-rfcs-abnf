<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Extensible Prioritization Scheme for HTTP</title>
<meta content="Kazuho Oku" name="author">
<meta content="Lucas Pardue" name="author">
<meta content="
       This document describes a scheme that allows an HTTP client to communicate its
preferences for how the upstream server prioritizes responses to its requests,
and also allows a server to hint to a downstream intermediary how its responses
should be prioritized when they are forwarded.  This document defines the
Priority header field for communicating the initial priority in an HTTP
version-independent manner, as well as HTTP/2 and HTTP/3 frames for
reprioritizing responses. These share a common format structure that is designed
to provide future extensibility. 
    " name="description">
<meta content="xml2rfc 3.10.0" name="generator">
<meta content="Internet-Draft" name="keyword">
<meta content="draft-ietf-httpbis-priority-09" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.10.0
    Python 3.6.12
    appdirs 1.4.4
    ConfigArgParse 1.5.3
    google-i18n-address 2.5.0
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.6.3
    pycountry 20.7.3
    pyflakes 2.4.0
    PyYAML 5.4.1
    requests 2.26.0
    setuptools 58.2.0
    six 1.16.0
-->
<link href="/tmp/draft-ietf-httpbis-priority-09-njp6fmqu.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">HTTP Priorities</td>
<td class="right">November 2021</td>
</tr></thead>
<tfoot><tr>
<td class="left">Oku &amp; Pardue</td>
<td class="center">Expires 14 May 2022</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">HTTP</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-ietf-httpbis-priority-09</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2021-11-10" class="published">10 November 2021</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2022-05-14">14 May 2022</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">K. Oku</div>
<div class="org">Fastly</div>
</div>
<div class="author">
      <div class="author-name">L. Pardue</div>
<div class="org">Cloudflare</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Extensible Prioritization Scheme for HTTP</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document describes a scheme that allows an HTTP client to communicate its
preferences for how the upstream server prioritizes responses to its requests,
and also allows a server to hint to a downstream intermediary how its responses
should be prioritized when they are forwarded.  This document defines the
Priority header field for communicating the initial priority in an HTTP
version-independent manner, as well as HTTP/2 and HTTP/3 frames for
reprioritizing responses. These share a common format structure that is designed
to provide future extensibility.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<section class="note" id="section-note.1">
      <h2 id="name-note-to-readers">
<a href="#name-note-to-readers" class="section-name selfRef">Note to Readers</a>
      </h2>
<p id="section-note.1-1"><em>RFC EDITOR: please remove this section before publication</em><a href="#section-note.1-1" class="pilcrow">¶</a></p>
<p id="section-note.1-2">Discussion of this draft takes place on the HTTP working group mailing list
(ietf-http-wg@w3.org), which is archived at <a href="https://lists.w3.org/Archives/Public/ietf-http-wg/">https://lists.w3.org/Archives/Public/ietf-http-wg/</a>.<a href="#section-note.1-2" class="pilcrow">¶</a></p>
<p id="section-note.1-3">Working Group information can be found at <a href="https://httpwg.org/">https://httpwg.org/</a>; source
code and issues list for this draft can be found at
<a href="https://github.com/httpwg/http-extensions/labels/priorities">https://github.com/httpwg/http-extensions/labels/priorities</a>.<a href="#section-note.1-3" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 14 May 2022.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2021 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="xref">1.1</a>.  <a href="#name-notational-conventions" class="xref">Notational Conventions</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="xref">2</a>.  <a href="#name-motivation-for-replacing-rf" class="xref">Motivation for Replacing RFC 7540 Priorities</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1"><a href="#section-2.1" class="xref">2.1</a>.  <a href="#name-disabling-rfc-7540-prioriti" class="xref">Disabling RFC 7540 Priorities</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1.2.1">
                    <p id="section-toc.1-1.2.2.1.2.1.1" class="keepWithNext"><a href="#section-2.1.1" class="xref">2.1.1</a>.  <a href="#name-advice-when-using-extensibl" class="xref">Advice when Using Extensible Priorities as the Alternative</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-applicability-of-the-extens" class="xref">Applicability of the Extensible Priority Scheme</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-priority-parameters" class="xref">Priority Parameters</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="xref">4.1</a>.  <a href="#name-urgency" class="xref">Urgency</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="xref">4.2</a>.  <a href="#name-incremental" class="xref">Incremental</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="xref">4.3</a>.  <a href="#name-defining-new-parameters" class="xref">Defining New Parameters</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3.2.1">
                    <p id="section-toc.1-1.4.2.3.2.1.1"><a href="#section-4.3.1" class="xref">4.3.1</a>.  <a href="#name-registration" class="xref">Registration</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-the-priority-http-header-fi" class="xref">The Priority HTTP Header Field</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-reprioritization" class="xref">Reprioritization</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-the-priority_update-frame" class="xref">The PRIORITY_UPDATE Frame</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="xref">7.1</a>.  <a href="#name-http-2-priority_update-fram" class="xref">HTTP/2 PRIORITY_UPDATE Frame</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="xref">7.2</a>.  <a href="#name-http-3-priority_update-fram" class="xref">HTTP/3 PRIORITY_UPDATE Frame</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-merging-client-and-server-d" class="xref">Merging Client- and Server-Driven Parameters</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-client-scheduling" class="xref">Client Scheduling</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="xref">10</a>. <a href="#name-server-scheduling" class="xref">Server Scheduling</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a href="#section-10.1" class="xref">10.1</a>.  <a href="#name-intermediaries-with-multipl" class="xref">Intermediaries with Multiple Backend Connections</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-11" class="xref">11</a>. <a href="#name-scheduling-and-the-connect-" class="xref">Scheduling and the CONNECT Method</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#section-12" class="xref">12</a>. <a href="#name-retransmission-scheduling" class="xref">Retransmission Scheduling</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#section-13" class="xref">13</a>. <a href="#name-fairness" class="xref">Fairness</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.1">
                <p id="section-toc.1-1.13.2.1.1"><a href="#section-13.1" class="xref">13.1</a>.  <a href="#name-coalescing-intermediaries" class="xref">Coalescing Intermediaries</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.2">
                <p id="section-toc.1-1.13.2.2.1"><a href="#section-13.2" class="xref">13.2</a>.  <a href="#name-http-1x-back-ends" class="xref">HTTP/1.x Back Ends</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.3">
                <p id="section-toc.1-1.13.2.3.1"><a href="#section-13.3" class="xref">13.3</a>.  <a href="#name-intentional-introduction-of" class="xref">Intentional Introduction of Unfairness</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a href="#section-14" class="xref">14</a>. <a href="#name-why-use-an-end-to-end-heade" class="xref">Why use an End-to-End Header Field?</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15">
            <p id="section-toc.1-1.15.1"><a href="#section-15" class="xref">15</a>. <a href="#name-security-considerations" class="xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16">
            <p id="section-toc.1-1.16.1"><a href="#section-16" class="xref">16</a>. <a href="#name-iana-considerations" class="xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.17">
            <p id="section-toc.1-1.17.1"><a href="#section-17" class="xref">17</a>. <a href="#name-references" class="xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.17.2.1">
                <p id="section-toc.1-1.17.2.1.1"><a href="#section-17.1" class="xref">17.1</a>.  <a href="#name-normative-references" class="xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.17.2.2">
                <p id="section-toc.1-1.17.2.2.1"><a href="#section-17.2" class="xref">17.2</a>.  <a href="#name-informative-references" class="xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.18">
            <p id="section-toc.1-1.18.1"><a href="#appendix-A" class="xref">Appendix A</a>.  <a href="#name-acknowledgements" class="xref">Acknowledgements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19">
            <p id="section-toc.1-1.19.1"><a href="#appendix-B" class="xref">Appendix B</a>.  <a href="#name-change-log" class="xref">Change Log</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19.2.1">
                <p id="section-toc.1-1.19.2.1.1"><a href="#appendix-B.1" class="xref">B.1</a>.  <a href="#name-since-draft-ietf-httpbis-pr" class="xref">Since draft-ietf-httpbis-priority-08</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19.2.2">
                <p id="section-toc.1-1.19.2.2.1"><a href="#appendix-B.2" class="xref">B.2</a>.  <a href="#name-since-draft-ietf-httpbis-pri" class="xref">Since draft-ietf-httpbis-priority-07</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19.2.3">
                <p id="section-toc.1-1.19.2.3.1"><a href="#appendix-B.3" class="xref">B.3</a>.  <a href="#name-since-draft-ietf-httpbis-prio" class="xref">Since draft-ietf-httpbis-priority-06</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19.2.4">
                <p id="section-toc.1-1.19.2.4.1"><a href="#appendix-B.4" class="xref">B.4</a>.  <a href="#name-since-draft-ietf-httpbis-prior" class="xref">Since draft-ietf-httpbis-priority-05</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19.2.5">
                <p id="section-toc.1-1.19.2.5.1"><a href="#appendix-B.5" class="xref">B.5</a>.  <a href="#name-since-draft-ietf-httpbis-priori" class="xref">Since draft-ietf-httpbis-priority-04</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19.2.6">
                <p id="section-toc.1-1.19.2.6.1"><a href="#appendix-B.6" class="xref">B.6</a>.  <a href="#name-since-draft-ietf-httpbis-priorit" class="xref">Since draft-ietf-httpbis-priority-03</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19.2.7">
                <p id="section-toc.1-1.19.2.7.1"><a href="#appendix-B.7" class="xref">B.7</a>.  <a href="#name-since-draft-ietf-httpbis-priority" class="xref">Since draft-ietf-httpbis-priority-02</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19.2.8">
                <p id="section-toc.1-1.19.2.8.1"><a href="#appendix-B.8" class="xref">B.8</a>.  <a href="#name-since-draft-ietf-httpbis-priority-" class="xref">Since draft-ietf-httpbis-priority-01</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19.2.9">
                <p id="section-toc.1-1.19.2.9.1"><a href="#appendix-B.9" class="xref">B.9</a>.  <a href="#name-since-draft-ietf-httpbis-priority-0" class="xref">Since draft-ietf-httpbis-priority-00</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19.2.10">
                <p id="section-toc.1-1.19.2.10.1"><a href="#appendix-B.10" class="xref">B.10</a>. <a href="#name-since-draft-kazuho-httpbis-" class="xref">Since draft-kazuho-httpbis-priority-04</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19.2.11">
                <p id="section-toc.1-1.19.2.11.1"><a href="#appendix-B.11" class="xref">B.11</a>. <a href="#name-since-draft-kazuho-httpbis-p" class="xref">Since draft-kazuho-httpbis-priority-03</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19.2.12">
                <p id="section-toc.1-1.19.2.12.1"><a href="#appendix-B.12" class="xref">B.12</a>. <a href="#name-since-draft-kazuho-httpbis-pr" class="xref">Since draft-kazuho-httpbis-priority-02</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19.2.13">
                <p id="section-toc.1-1.19.2.13.1"><a href="#appendix-B.13" class="xref">B.13</a>. <a href="#name-since-draft-kazuho-httpbis-pri" class="xref">Since draft-kazuho-httpbis-priority-01</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.19.2.14">
                <p id="section-toc.1-1.19.2.14.1"><a href="#appendix-B.14" class="xref">B.14</a>. <a href="#name-since-draft-kazuho-httpbis-prio" class="xref">Since draft-kazuho-httpbis-priority-00</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.20">
            <p id="section-toc.1-1.20.1"><a href="#appendix-C" class="xref"></a><a href="#name-authors-addresses" class="xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">It is common for representations of an HTTP <span>[<a href="#HTTP" class="xref">HTTP</a>]</span>
resource to have relationships to one or more other resources. Clients will
often discover these relationships while processing a retrieved representation,
which may lead to further retrieval requests.  Meanwhile, the nature of the
relationship determines whether the client is blocked from continuing to process
locally available resources.  An example of this is visual rendering of an HTML
document, which could be blocked by the retrieval of a CSS file that the
document refers to. In contrast, inline images do not block rendering and get drawn
incrementally as the chunks of the images arrive.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">HTTP/2 <span>[<a href="#HTTP2" class="xref">HTTP2</a>]</span> and HTTP/3
<span>[<a href="#HTTP3" class="xref">HTTP3</a>]</span> support multiplexing of requests and responses in
a single connection. An important feature of any implementation of a protocol
that provides multiplexing is the ability to prioritize the sending of
information. For example, to provide meaningful presentation of an HTML document
at the earliest moment, it is important for an HTTP server to prioritize the
HTTP responses, or the chunks of those HTTP responses, that it sends to a
client.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">A server that operates in ignorance of how clients issue requests and
consume responses can cause suboptimal client application performance. Priority
signals allow clients to communicate their view of request
priority. Servers have their own needs that are independent from client needs,
so they often combine priority signals with other available information in order
to inform scheduling of response data.<a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4">RFC 7540 <span>[<a href="#RFC7540" class="xref">RFC7540</a>]</span> stream priority allowed a client to send a series of
priority signals that communicate to the server a "priority tree"; the structure
of this tree represents the client's preferred relative ordering and weighted
distribution of the bandwidth among HTTP responses. Servers could use these
priority signals as input into prioritization decision making.<a href="#section-1-4" class="pilcrow">¶</a></p>
<p id="section-1-5">The design and implementation of RFC 7540 stream priority was observed to have
shortcomings, explained in <a href="#motivation" class="xref">Section 2</a>. HTTP/2
<span>[<a href="#HTTP2" class="xref">HTTP2</a>]</span> has consequently deprecated the use of
these stream priority signals.<a href="#section-1-5" class="pilcrow">¶</a></p>
<p id="section-1-6">This document describes an extensible scheme for prioritizing HTTP responses
that uses absolute values. <a href="#parameters" class="xref">Section 4</a> defines priority parameters, which are
a standardized and extensible format of priority information. <a href="#header-field" class="xref">Section 5</a>
defines the Priority HTTP header field, a protocol-version-independent and
end-to-end priority signal. Clients can use this header to signal priority to
servers in order to specify the precedence of HTTP responses. Similarly, servers
behind an intermediary can use it to signal priority to the intermediary.
<a href="#h2-update-frame" class="xref">Section 7.1</a> and <a href="#h3-update-frame" class="xref">Section 7.2</a> define version-specific frames that
carry parameters, which clients can use for reprioritization.<a href="#section-1-6" class="pilcrow">¶</a></p>
<p id="section-1-7">Header field and frame priority signals are input to a server's response
prioritization process. They are only a suggestion and do not guarantee any
particular processing or transmission order for one response relative to any
other response. <a href="#server-scheduling" class="xref">Section 10</a> and <a href="#retransmission-scheduling" class="xref">Section 12</a> provide
consideration and guidance about how servers might act upon signals.<a href="#section-1-7" class="pilcrow">¶</a></p>
<p id="section-1-8">The prioritization scheme and priority signals defined herein can act as a
substitute for RFC 7540 stream priority.<a href="#section-1-8" class="pilcrow">¶</a></p>
<div id="notational-conventions">
<section id="section-1.1">
        <h3 id="name-notational-conventions">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-notational-conventions" class="section-name selfRef">Notational Conventions</a>
        </h3>
<p id="section-1.1-1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD",
"SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be
interpreted as described in <span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span>.<a href="#section-1.1-1" class="pilcrow">¶</a></p>
<p id="section-1.1-2">The terms Dictionary, sf-boolean, sf-dictionary, and sf-integer are imported from
<span>[<a href="#STRUCTURED-FIELDS" class="xref">STRUCTURED-FIELDS</a>]</span>.<a href="#section-1.1-2" class="pilcrow">¶</a></p>
<p id="section-1.1-3">Example HTTP requests and responses use the HTTP/2-style formatting from
<span>[<a href="#HTTP2" class="xref">HTTP2</a>]</span>.<a href="#section-1.1-3" class="pilcrow">¶</a></p>
<p id="section-1.1-4">This document uses the variable-length integer encoding from
<span>[<a href="#QUIC" class="xref">QUIC</a>]</span>.<a href="#section-1.1-4" class="pilcrow">¶</a></p>
<p id="section-1.1-5">The term control stream is used to describe the HTTP/2 stream with identifier
0x0, and HTTP/3 control stream; see <span><a href="https://datatracker.ietf.org/doc/html/draft-ietf-quic-http-34#section-6.2.1" class="relref">Section 6.2.1</a> of [<a href="#HTTP3" class="xref">HTTP3</a>]</span>.<a href="#section-1.1-5" class="pilcrow">¶</a></p>
<p id="section-1.1-6">The term HTTP/2 priority signal is used to describe the priority information
sent from clients to servers in HTTP/2 frames; see <span><a href="https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-http2bis-05#section-5.3.2" class="relref">Section 5.3.2</a> of [<a href="#HTTP2" class="xref">HTTP2</a>]</span>.<a href="#section-1.1-6" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="motivation">
<section id="section-2">
      <h2 id="name-motivation-for-replacing-rf">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-motivation-for-replacing-rf" class="section-name selfRef">Motivation for Replacing RFC 7540 Priorities</a>
      </h2>
<p id="section-2-1">RFC 7540 stream priority (see <span><a href="https://rfc-editor.org/rfc/rfc7540#section-5.3" class="relref">Section 5.3</a> of [<a href="#RFC7540" class="xref">RFC7540</a>]</span>) is a complex system
where clients signal stream dependencies and weights to describe an unbalanced
tree. It suffered from limited deployment and interoperability and was deprecated
in a revision of HTTP/2 <span>[<a href="#HTTP2" class="xref">HTTP2</a>]</span>. However, in order to maintain wire
compatibility, HTTP/2 priority signals are still mandatory to handle (see
<span><a href="https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-http2bis-05#section-5.3.2" class="relref">Section 5.3.2</a> of [<a href="#HTTP2" class="xref">HTTP2</a>]</span>).<a href="#section-2-1" class="pilcrow">¶</a></p>
<p id="section-2-2">Clients can build RFC 7540 trees with rich flexibility but experience has shown
this is rarely exercised. Instead they tend to choose a single model optimized
for a single use case and experiment within the model constraints, or do nothing
at all. Furthermore, many clients build their prioritization tree in a unique
way, which makes it difficult for servers to understand their intent and act or
intervene accordingly.<a href="#section-2-2" class="pilcrow">¶</a></p>
<p id="section-2-3">Many RFC 7540 server implementations do not act on HTTP/2 priority signals. Some
instead favor custom server-driven schemes based on heuristics or other hints,
such as resource content type or request generation order. For example, a
server, with knowledge of an HTML document structure, might want to prioritize
the delivery of images that are critical to user experience above other images,
but below the CSS files. Since client trees vary, it is impossible for the
server to determine how such images should be prioritized against other
responses.<a href="#section-2-3" class="pilcrow">¶</a></p>
<p id="section-2-4">RFC 7540 allows intermediaries to coalesce multiple client trees into a single
tree that is used for a single upstream HTTP/2 connection. However, most
intermediaries do not support this. Additionally, RFC 7540 does not define a
method that can be used by a server to express the priority of a response.
Without such a method, intermediaries cannot coordinate client-driven and
server-driven priorities.<a href="#section-2-4" class="pilcrow">¶</a></p>
<p id="section-2-5">RFC 7540 describes denial-of-service considerations for implementations. On
2019-08-13 Netflix issued an advisory notice about the discovery of several
resource exhaustion vectors affecting multiple RFC 7540 implementations. One
attack, <span>[<a href="#CVE-2019-9513" class="xref">CVE-2019-9513</a>]</span> aka "Resource Loop", is based on using priority signals
to manipulate the server's stored prioritization state.<a href="#section-2-5" class="pilcrow">¶</a></p>
<p id="section-2-6">HTTP/2 priority associated with an HTTP request is signalled as a value relative
to those of other requests sharing the same HTTP/2 connection. Therefore, in
order to prioritize requests, endpoints are compelled to have the knowledge of
the underlying HTTP version and how the requests are coalesced. This has been
a burden to HTTP endpoints that generate or forward requests in a
version-agnostic manner.<a href="#section-2-6" class="pilcrow">¶</a></p>
<p id="section-2-7">HTTP/2 priority signals are required to be delivered and processed in the order
they are sent so that the receiver handling is deterministic. Porting HTTP/2
priority signals to protocols that do not provide ordering guarantees presents
challenges. For example, HTTP/3 <span>[<a href="#HTTP3" class="xref">HTTP3</a>]</span> lacks global ordering across streams
that would carry priority signals. Early attempts to port HTTP/2 priority
signals to HTTP/3 required adding additional information to the signals, leading
to more complicated processing. Problems found with this approach could not be
resolved and definition of a HTTP/3 priority signalling feature was removed
before publication.<a href="#section-2-7" class="pilcrow">¶</a></p>
<p id="section-2-8">Considering the deployment problems and the design restrictions of RFC 7540
stream priority, as well as the difficulties in adapting it to HTTP/3,
continuing to base prioritization on this mechanism risks increasing the
complexity of systems. Multiple experiments from independent research have shown
that simpler schemes can reach at least equivalent performance characteristics
compared to the more complex RFC 7540 setups seen in practice, at least for the
web use case.<a href="#section-2-8" class="pilcrow">¶</a></p>
<div id="disabling">
<section id="section-2.1">
        <h3 id="name-disabling-rfc-7540-prioriti">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-disabling-rfc-7540-prioriti" class="section-name selfRef">Disabling RFC 7540 Priorities</a>
        </h3>
<p id="section-2.1-1">The problems and insights set out above provided the motivation for deprecating
RFC 7540 stream priority (see <span><a href="https://rfc-editor.org/rfc/rfc7540#section-5.3" class="relref">Section 5.3</a> of [<a href="#RFC7540" class="xref">RFC7540</a>]</span>).<a href="#section-2.1-1" class="pilcrow">¶</a></p>
<p id="section-2.1-2">The SETTINGS_NO_RFC7540_PRIORITIES HTTP/2 setting is defined by this document in
order to allow endpoints to omit or ignore HTTP/2 priority signals (see
<span><a href="https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-http2bis-05#section-5.3.2" class="relref">Section 5.3.2</a> of [<a href="#HTTP2" class="xref">HTTP2</a>]</span>), as described below. The value of
SETTINGS_NO_RFC7540_PRIORITIES MUST be 0 or 1. Any value other than 0 or 1 MUST
be treated as a connection error (see <span><a href="https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-http2bis-05#section-5.4.1" class="relref">Section 5.4.1</a> of [<a href="#HTTP2" class="xref">HTTP2</a>]</span>) of type
PROTOCOL_ERROR. The initial value is 0.<a href="#section-2.1-2" class="pilcrow">¶</a></p>
<p id="section-2.1-3">If endpoints use SETTINGS_NO_RFC7540_PRIORITIES they MUST send it in the first
SETTINGS frame. Senders MUST NOT change the SETTINGS_NO_RFC7540_PRIORITIES value
after the first SETTINGS frame. Receivers that detect a change MAY treat it as a
connection error of type PROTOCOL_ERROR.<a href="#section-2.1-3" class="pilcrow">¶</a></p>
<p id="section-2.1-4">Clients can send SETTINGS_NO_RFC7540_PRIORITIES with a value of 1 to indicate
that they are not using HTTP/2 priority signals. The SETTINGS frame precedes any
HTTP/2 priority signal sent from clients, so servers can determine whether they
need to allocate any resources to signal handling before signals arrive. A
server that receives SETTINGS_NO_RFC7540_PRIORITIES with a value of 1 MUST
ignore HTTP/2 priority signals.<a href="#section-2.1-4" class="pilcrow">¶</a></p>
<p id="section-2.1-5">Servers can send SETTINGS_NO_RFC7540_PRIORITIES with a value of 1 to indicate
that they will ignore HTTP/2 priority signals sent by clients.<a href="#section-2.1-5" class="pilcrow">¶</a></p>
<p id="section-2.1-6">Endpoints that send SETTINGS_NO_RFC7540_PRIORITIES are encouraged to use
alternative priority signals (for example, <a href="#header-field" class="xref">Section 5</a> or
<a href="#h2-update-frame" class="xref">Section 7.1</a>) but there is no requirement to use a specific signal type.<a href="#section-2.1-6" class="pilcrow">¶</a></p>
<div id="advice-when-using-extensible-priorities-as-the-alternative">
<section id="section-2.1.1">
          <h4 id="name-advice-when-using-extensibl">
<a href="#section-2.1.1" class="section-number selfRef">2.1.1. </a><a href="#name-advice-when-using-extensibl" class="section-name selfRef">Advice when Using Extensible Priorities as the Alternative</a>
          </h4>
<p id="section-2.1.1-1">Until the client receives the SETTINGS frame from the server, the client SHOULD
send both the HTTP/2 priority signals and the signals of this prioritization
scheme (see <a href="#header-field" class="xref">Section 5</a> and <a href="#h2-update-frame" class="xref">Section 7.1</a>). When the client receives
the first SETTINGS frame that contains the SETTINGS_NO_RFC7540_PRIORITIES
parameter with value of 1, it SHOULD stop sending the HTTP/2 priority signals.
If the value was 0 or if the settings parameter was absent, it SHOULD stop
sending PRIORITY_UPDATE frames (<a href="#h2-update-frame" class="xref">Section 7.1</a>), but MAY continue sending
the Priority header field (<a href="#header-field" class="xref">Section 5</a>), as it is an end-to-end signal that
might be useful to nodes behind the server that the client is directly connected
to.<a href="#section-2.1.1-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="applicability-of-the-extensible-priority-scheme">
<section id="section-3">
      <h2 id="name-applicability-of-the-extens">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-applicability-of-the-extens" class="section-name selfRef">Applicability of the Extensible Priority Scheme</a>
      </h2>
<p id="section-3-1">The priority scheme defined by this document considers only the prioritization
of HTTP messages and tunnels, see <a href="#client-scheduling" class="xref">Section 9</a>, <a href="#server-scheduling" class="xref">Section 10</a>,
and <a href="#connect-scheduling" class="xref">Section 11</a>.<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">Where HTTP extensions change stream behavior or define new data carriage
mechanisms, they can also define how this priority scheme can be applied.<a href="#section-3-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="parameters">
<section id="section-4">
      <h2 id="name-priority-parameters">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-priority-parameters" class="section-name selfRef">Priority Parameters</a>
      </h2>
<p id="section-4-1">The priority information is a sequence of key-value pairs, providing room for
future extensions. Each key-value pair represents a priority parameter.<a href="#section-4-1" class="pilcrow">¶</a></p>
<p id="section-4-2">The Priority HTTP header field (<a href="#header-field" class="xref">Section 5</a>) is an end-to-end way to
transmit this set of parameters when a request or a response is issued. In order
to reprioritize a request, HTTP-version-specific PRIORITY_UPDATE frames
(<a href="#h2-update-frame" class="xref">Section 7.1</a> and <a href="#h3-update-frame" class="xref">Section 7.2</a>) are used by clients to transmit
the same information on a single hop.<a href="#section-4-2" class="pilcrow">¶</a></p>
<p id="section-4-3">Intermediaries can consume and produce priority signals in a PRIORITY_UPDATE
frame or Priority header field. Sending a PRIORITY_UPDATE frame preserves the
signal from the client, but provides a signal that overrides that for the next
hop; see <a href="#header-field-rationale" class="xref">Section 14</a>. Replacing or adding a Priority header field
overrides any signal from a client and can affect prioritization for all
subsequent recipients.<a href="#section-4-3" class="pilcrow">¶</a></p>
<p id="section-4-4">For both the Priority header field and the PRIORITY_UPDATE frame, the set of
priority parameters is encoded as a Structured Fields Dictionary (see
<span><a href="https://rfc-editor.org/rfc/rfc8941#section-3.2" class="relref">Section 3.2</a> of [<a href="#STRUCTURED-FIELDS" class="xref">STRUCTURED-FIELDS</a>]</span>).<a href="#section-4-4" class="pilcrow">¶</a></p>
<p id="section-4-5">This document defines the urgency(<code>u</code>) and incremental(<code>i</code>) parameters. When
receiving an HTTP request that does not carry these priority parameters, a
server SHOULD act as if their default values were specified. Note that handling
of omitted parameters is different when processing an HTTP response; see
<a href="#merging" class="xref">Section 8</a>.<a href="#section-4-5" class="pilcrow">¶</a></p>
<p id="section-4-6">Receivers parse the Dictionary as defined in <span><a href="https://rfc-editor.org/rfc/rfc8941#section-4.2" class="relref">Section 4.2</a> of [<a href="#STRUCTURED-FIELDS" class="xref">STRUCTURED-FIELDS</a>]</span>. Where the Dictionary is successfully parsed, this document
places the additional requirement that unknown priority parameters, parameters
with out-of-range values, or values of unexpected types MUST be ignored.<a href="#section-4-6" class="pilcrow">¶</a></p>
<div id="urgency">
<section id="section-4.1">
        <h3 id="name-urgency">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-urgency" class="section-name selfRef">Urgency</a>
        </h3>
<p id="section-4.1-1">The urgency parameter (<code>u</code>) takes an integer between 0 and 7, in descending
order of priority.<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<p id="section-4.1-2">The value is encoded as an sf-integer. The default value is 3.<a href="#section-4.1-2" class="pilcrow">¶</a></p>
<p id="section-4.1-3">Endpoints use this parameter to communicate their view of the precedence of
HTTP responses. The chosen value of urgency can be based on the expectation that
servers might use this information to transmit HTTP responses in the order of
their urgency. The smaller the value, the higher the precedence.<a href="#section-4.1-3" class="pilcrow">¶</a></p>
<p id="section-4.1-4">The following example shows a request for a CSS file with the urgency set to
<code>0</code>:<a href="#section-4.1-4" class="pilcrow">¶</a></p>
<div id="section-4.1-5">
<pre class="lang-example sourcecode">
:method = GET
:scheme = https
:authority = example.net
:path = /style.css
priority = u=0
</pre><a href="#section-4.1-5" class="pilcrow">¶</a>
</div>
<p id="section-4.1-6">A client that fetches a document that likely consists of multiple HTTP resources
(e.g., HTML) SHOULD assign the default urgency level to the main resource.  This
convention allows servers to refine the urgency using
knowledge specific to the web-site (see <a href="#merging" class="xref">Section 8</a>).<a href="#section-4.1-6" class="pilcrow">¶</a></p>
<p id="section-4.1-7">The lowest urgency level (7) is reserved for background tasks such as delivery
of software updates. This urgency level SHOULD NOT be used for fetching
responses that have impact on user interaction.<a href="#section-4.1-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="incremental">
<section id="section-4.2">
        <h3 id="name-incremental">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-incremental" class="section-name selfRef">Incremental</a>
        </h3>
<p id="section-4.2-1">The incremental parameter (<code>i</code>) takes an sf-boolean as the value that indicates
if an HTTP response can be processed incrementally, i.e., provide some
meaningful output as chunks of the response arrive.<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<p id="section-4.2-2">The default value of the incremental parameter is false (<code>0</code>).<a href="#section-4.2-2" class="pilcrow">¶</a></p>
<p id="section-4.2-3">If a client makes concurrent requests with the incremental parameter set to
false, there is no benefit serving responses with the same urgency concurrently
because the client is not going to process those responses incrementally.
Serving non-incremental responses with the same urgency one by one, in the order in which those
requests were generated is considered to be the best strategy.<a href="#section-4.2-3" class="pilcrow">¶</a></p>
<p id="section-4.2-4">If a client makes concurrent requests with the incremental parameter set to
true, serving requests with the same urgency concurrently might be beneficial.
Doing this distributes the connection bandwidth, meaning that responses take
longer to complete. Incremental delivery is most useful where multiple
partial responses might provide some value to clients ahead of a
complete response being available.<a href="#section-4.2-4" class="pilcrow">¶</a></p>
<p id="section-4.2-5">The following example shows a request for a JPEG file with the urgency parameter
set to <code>5</code> and the incremental parameter set to <code>true</code>.<a href="#section-4.2-5" class="pilcrow">¶</a></p>
<div id="section-4.2-6">
<pre class="lang-example sourcecode">
:method = GET
:scheme = https
:authority = example.net
:path = /image.jpg
priority = u=5, i
</pre><a href="#section-4.2-6" class="pilcrow">¶</a>
</div>
</section>
</div>
<div id="new-parameters">
<section id="section-4.3">
        <h3 id="name-defining-new-parameters">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-defining-new-parameters" class="section-name selfRef">Defining New Parameters</a>
        </h3>
<p id="section-4.3-1">When attempting to define new parameters, care must be taken so that they do not
adversely interfere with prioritization performed by existing endpoints or
intermediaries that do not understand the newly defined parameter. Since unknown
parameters are ignored, new parameters should not change the interpretation of,
or modify, the urgency (see <a href="#urgency" class="xref">Section 4.1</a>) or incremental (see <a href="#incremental" class="xref">Section 4.2</a>)
parameters in a way that is not backwards compatible or fallback safe.<a href="#section-4.3-1" class="pilcrow">¶</a></p>
<p id="section-4.3-2">For example, if there is a need to provide more granularity than eight urgency
levels, it would be possible to subdivide the range using an additional
parameter. Implementations that do not recognize the parameter can safely
continue to use the less granular eight levels.<a href="#section-4.3-2" class="pilcrow">¶</a></p>
<p id="section-4.3-3">Alternatively, the urgency can be augmented. For example, a graphical user agent
could send a <code>visible</code> parameter to indicate if the resource being requested is
within the viewport.<a href="#section-4.3-3" class="pilcrow">¶</a></p>
<p id="section-4.3-4">Generic parameters are preferred over vendor-specific, application-specific or
deployment-specific values. If a generic value cannot be agreed upon in the
community, the parameter's name should be correspondingly specific (e.g., with
a prefix that identifies the vendor, application or deployment).<a href="#section-4.3-4" class="pilcrow">¶</a></p>
<div id="register">
<section id="section-4.3.1">
          <h4 id="name-registration">
<a href="#section-4.3.1" class="section-number selfRef">4.3.1. </a><a href="#name-registration" class="section-name selfRef">Registration</a>
          </h4>
<p id="section-4.3.1-1">New Priority parameters can be defined by registering them in the HTTP Priority
Parameters Registry. The registry governs the keys (short textual strings) used
in Structured Fields Dictionary (see <span><a href="https://rfc-editor.org/rfc/rfc8941#section-3.2" class="relref">Section 3.2</a> of [<a href="#STRUCTURED-FIELDS" class="xref">STRUCTURED-FIELDS</a>]</span>).
Since each HTTP request can have associated priority signals, there is value
in having short key lengths, especially single-character strings. In order to
encourage extension while avoiding unintended conflict among attractive key
values, the HTTP Priority Parameters Registry operates two registration policies
depending on key length.<a href="#section-4.3.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.3.1-2.1">Registration requests for parameters with a key length of one use the
Specification Required policy, as per <span><a href="https://rfc-editor.org/rfc/rfc8126#section-4.6" class="relref">Section 4.6</a> of [<a href="#RFC8126" class="xref">RFC8126</a>]</span>.<a href="#section-4.3.1-2.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-4.3.1-2.2">Registration requests for parameters with a key length greater than one use the
Expert Review policy, as per <span><a href="https://rfc-editor.org/rfc/rfc8126#section-4.5" class="relref">Section 4.5</a> of [<a href="#RFC8126" class="xref">RFC8126</a>]</span>. A specification
document is appreciated, but not required.<a href="#section-4.3.1-2.2" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-4.3.1-3">When reviewing registration requests, the designated expert(s) can consider the
additional guidance provided in <a href="#new-parameters" class="xref">Section 4.3</a> but cannot use it as a basis
for rejection.<a href="#section-4.3.1-3" class="pilcrow">¶</a></p>
<p id="section-4.3.1-4">Registration requests should use the following template:<a href="#section-4.3.1-4" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-4.3.1-5">
            <dt id="section-4.3.1-5.1">
Name:  </dt>
            <dd style="margin-left: 1.5em" id="section-4.3.1-5.2">
              <p id="section-4.3.1-5.2.1">[a name for the Priority Parameter that matches key]<a href="#section-4.3.1-5.2.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-4.3.1-5.3">
Description:  </dt>
            <dd style="margin-left: 1.5em" id="section-4.3.1-5.4">
              <p id="section-4.3.1-5.4.1">[a description of the parameter semantics and value]<a href="#section-4.3.1-5.4.1" class="pilcrow">¶</a></p>
</dd>
            <dd class="break"></dd>
<dt id="section-4.3.1-5.5">
Reference:  </dt>
            <dd style="margin-left: 1.5em" id="section-4.3.1-5.6">
              <p id="section-4.3.1-5.6.1">[to a specification defining this parameter]<a href="#section-4.3.1-5.6.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
</dl>
<p id="section-4.3.1-6">See the registry at <a href="https://iana.org/assignments/http-priority">https://iana.org/assignments/http-priority</a> for details on
where to send registration requests.<a href="#section-4.3.1-6" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="header-field">
<section id="section-5">
      <h2 id="name-the-priority-http-header-fi">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-the-priority-http-header-fi" class="section-name selfRef">The Priority HTTP Header Field</a>
      </h2>
<p id="section-5-1">The Priority HTTP header field carries priority parameters <a href="#parameters" class="xref">Section 4</a>. It
can appear in requests and responses. It is an end-to-end signal of the request
priority from the client or the response priority from the server. <a href="#merging" class="xref">Section 8</a>
describes how intermediaries can combine the priority information from client
requests and server responses to correct or amend the precedence. Clients cannot
interpret the appearance or omission of a Priority response header as
acknowledgement that any prioritization has occurred. Guidance for how endpoints
can act on Priority header values is given in <a href="#server-scheduling" class="xref">Section 10</a> and
<a href="#client-scheduling" class="xref">Section 9</a>.<a href="#section-5-1" class="pilcrow">¶</a></p>
<p id="section-5-2">Priority is a Dictionary (<span><a href="https://rfc-editor.org/rfc/rfc8941#section-3.2" class="relref">Section 3.2</a> of [<a href="#STRUCTURED-FIELDS" class="xref">STRUCTURED-FIELDS</a>]</span>):<a href="#section-5-2" class="pilcrow">¶</a></p>
<div id="section-5-3">
<pre class="lang-abnf sourcecode">
Priority   = sf-dictionary
</pre><a href="#section-5-3" class="pilcrow">¶</a>
</div>
<p id="section-5-4">As is the ordinary case for HTTP caching <span>[<a href="#CACHING" class="xref">CACHING</a>]</span>, a
response with a Priority header field might be cached and re-used for subsequent
requests. When an origin server generates the Priority response header field
based on properties of an HTTP request it receives, the server is expected to
control the cacheability or the applicability of the cached response, by using
header fields that control the caching behavior (e.g., Cache-Control, Vary).<a href="#section-5-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="reprioritization">
<section id="section-6">
      <h2 id="name-reprioritization">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-reprioritization" class="section-name selfRef">Reprioritization</a>
      </h2>
<p id="section-6-1">After a client sends a request, it may be beneficial to change the priority of
the response. As an example, a web browser might issue a prefetch request for a
JavaScript file with the urgency parameter of the Priority request header field
set to <code>u=7</code> (background). Then, when the user navigates to a page which
references the new JavaScript file, while the prefetch is in progress, the
browser would send a reprioritization signal with the priority field value set
to <code>u=0</code>. The PRIORITY_UPDATE frame (<a href="#frame" class="xref">Section 7</a>) can be used for such
reprioritization.<a href="#section-6-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="frame">
<section id="section-7">
      <h2 id="name-the-priority_update-frame">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-the-priority_update-frame" class="section-name selfRef">The PRIORITY_UPDATE Frame</a>
      </h2>
<p id="section-7-1">This document specifies a new PRIORITY_UPDATE frame for HTTP/2 <span>[<a href="#HTTP2" class="xref">HTTP2</a>]</span>
and HTTP/3 <span>[<a href="#HTTP3" class="xref">HTTP3</a>]</span>. It carries priority parameters and
references the target of the prioritization based on a version-specific
identifier. In HTTP/2, this identifier is the Stream ID; in HTTP/3, the
identifier is either the Stream ID or Push ID. Unlike the Priority header field,
the PRIORITY_UPDATE frame is a hop-by-hop signal.<a href="#section-7-1" class="pilcrow">¶</a></p>
<p id="section-7-2">PRIORITY_UPDATE frames are sent by clients on the control stream, allowing them
to be sent independent from the stream that carries the response. This means
they can be used to reprioritize a response or a push stream; or signal the
initial priority of a response instead of the Priority header field.<a href="#section-7-2" class="pilcrow">¶</a></p>
<p id="section-7-3">A PRIORITY_UPDATE frame communicates a complete set of all parameters in the
Priority Field Value field. Omitting a parameter is a signal to use the
parameter's default value. Failure to parse the Priority Field Value MAY be
treated as a connection error. In HTTP/2 the error is of type PROTOCOL_ERROR; in
HTTP/3 the error is of type H3_GENERAL_PROTOCOL_ERROR.<a href="#section-7-3" class="pilcrow">¶</a></p>
<p id="section-7-4">A client MAY send a PRIORITY_UPDATE frame before the stream that it references
is open (except for HTTP/2 push streams; see <a href="#h2-update-frame" class="xref">Section 7.1</a>). Furthermore,
HTTP/3 offers no guaranteed ordering across streams, which could cause the frame
to be received earlier than intended. Either case leads to a race condition
where a server receives a PRIORITY_UPDATE frame that references a request stream
that is yet to be opened. To solve this condition, for the purposes of
scheduling, the most recently received PRIORITY_UPDATE frame can be considered
as the most up-to-date information that overrides any other signal. Servers
SHOULD buffer the most recently received PRIORITY_UPDATE frame and apply it once
the referenced stream is opened. Holding PRIORITY_UPDATE frames for each stream
requires server resources, which can can be bound by local implementation
policy. Although there is no limit to the number of PRIORITY_UPDATES that can be
sent, storing only the most recently received frame limits resource commitment.<a href="#section-7-4" class="pilcrow">¶</a></p>
<div id="h2-update-frame">
<section id="section-7.1">
        <h3 id="name-http-2-priority_update-fram">
<a href="#section-7.1" class="section-number selfRef">7.1. </a><a href="#name-http-2-priority_update-fram" class="section-name selfRef">HTTP/2 PRIORITY_UPDATE Frame</a>
        </h3>
<p id="section-7.1-1">The HTTP/2 PRIORITY_UPDATE frame (type=0x10) is used by clients to signal the
initial priority of a response, or to reprioritize a response or push stream. It
carries the stream ID of the response and the priority in ASCII text, using the
same representation as the Priority header field value.<a href="#section-7.1-1" class="pilcrow">¶</a></p>
<p id="section-7.1-2">The Stream Identifier field (see <span><a href="https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-http2bis-05#section-5.1.1" class="relref">Section 5.1.1</a> of [<a href="#HTTP2" class="xref">HTTP2</a>]</span>) in the
PRIORITY_UPDATE frame header MUST be zero (0x0). Receiving a PRIORITY_UPDATE
frame with a field of any other value MUST be treated as a connection error of
type PROTOCOL_ERROR.<a href="#section-7.1-2" class="pilcrow">¶</a></p>
<span id="name-http-2-priority_update-frame"></span><div id="fig-h2-reprioritization-frame">
<figure id="figure-1">
          <div id="section-7.1-3.1">
<pre class="lang-drawing sourcecode">
HTTP/2 PRIORITY_UPDATE Frame {
  Length (24),
  Type (i) = 10,

  Unused Flags (8).

  Reserved (1),
  Stream Identifier (31),

  Reserved (1),
  Prioritized Stream ID (31),
  Priority Field Value (..),
}
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-http-2-priority_update-frame" class="selfRef">HTTP/2 PRIORITY_UPDATE Frame Payload</a>
          </figcaption></figure>
</div>
<p id="section-7.1-4">The Length, Type, Unused Flag(s), Reserved, and Stream Identifier fields are
described in <span><a href="https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-http2bis-05#section-4" class="relref">Section 4</a> of [<a href="#HTTP2" class="xref">HTTP2</a>]</span>. The frame payload of PRIORITY_UPDATE
frame payload contains the following additional fields:<a href="#section-7.1-4" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-7.1-5">
          <dt id="section-7.1-5.1">
Reserved:  </dt>
          <dd style="margin-left: 1.5em" id="section-7.1-5.2">
            <p id="section-7.1-5.2.1">A reserved 1-bit field. The semantics of this bit are undefined, and the bit
MUST remain unset (0x0) when sending and MUST be ignored when receiving.<a href="#section-7.1-5.2.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-7.1-5.3">
Prioritized Stream ID:  </dt>
          <dd style="margin-left: 1.5em" id="section-7.1-5.4">
            <p id="section-7.1-5.4.1">A 31-bit stream identifier for the stream that is the target of the priority
update.<a href="#section-7.1-5.4.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-7.1-5.5">
Priority Field Value:  </dt>
          <dd style="margin-left: 1.5em" id="section-7.1-5.6">
            <p id="section-7.1-5.6.1">The priority update value in ASCII text, encoded using Structured Fields. This
is the same representation as the Priority header field value.<a href="#section-7.1-5.6.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-7.1-6">When the PRIORITY_UPDATE frame applies to a request stream, clients SHOULD
provide a Prioritized Stream ID that refers to a stream in the "open",
"half-closed (local)", or "idle" state. Servers can discard frames where the
Prioritized Stream ID refers to a stream in the "half-closed (local)" or
"closed" state. The number of streams which have been prioritized but remain in
the "idle" state plus the number of active streams (those in the "open" or
either "half-closed" state; see <span><a href="https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-http2bis-05#section-5.1.2" class="relref">Section 5.1.2</a> of [<a href="#HTTP2" class="xref">HTTP2</a>]</span>) MUST NOT exceed
the value of the SETTINGS_MAX_CONCURRENT_STREAMS parameter. Servers that receive
such a PRIORITY_UPDATE MUST respond with a connection error of type
PROTOCOL_ERROR.<a href="#section-7.1-6" class="pilcrow">¶</a></p>
<p id="section-7.1-7">When the PRIORITY_UPDATE frame applies to a push stream, clients SHOULD provide
a Prioritized Stream ID that refers to a stream in the "reserved (remote)" or
"half-closed (local)" state. Servers can discard frames where the Prioritized
Stream ID refers to a stream in the "closed" state. Clients MUST NOT provide a
Prioritized Stream ID that refers to a push stream in the "idle" state. Servers
that receive a PRIORITY_UPDATE for a push stream in the "idle" state MUST
respond with a connection error of type PROTOCOL_ERROR.<a href="#section-7.1-7" class="pilcrow">¶</a></p>
<p id="section-7.1-8">If a PRIORITY_UPDATE frame is received with a Prioritized Stream ID of 0x0, the
recipient MUST respond with a connection error of type PROTOCOL_ERROR.<a href="#section-7.1-8" class="pilcrow">¶</a></p>
<p id="section-7.1-9">If a client receives a PRIORITY_UPDATE frame, it MUST respond with a connection
error of type PROTOCOL_ERROR.<a href="#section-7.1-9" class="pilcrow">¶</a></p>
</section>
</div>
<div id="h3-update-frame">
<section id="section-7.2">
        <h3 id="name-http-3-priority_update-fram">
<a href="#section-7.2" class="section-number selfRef">7.2. </a><a href="#name-http-3-priority_update-fram" class="section-name selfRef">HTTP/3 PRIORITY_UPDATE Frame</a>
        </h3>
<p id="section-7.2-1">The HTTP/3 PRIORITY_UPDATE frame (type=0xF0700 or 0xF0701) is used by clients to
signal the initial priority of a response, or to reprioritize a response or push
stream. It carries the identifier of the element that is being prioritized, and
the updated priority in ASCII text, using the same representation as that of the
Priority header field value. PRIORITY_UPDATE with a frame type of 0xF0700 is
used for request streams, while PRIORITY_UPDATE with a frame type of 0xF0701 is
used for push streams.<a href="#section-7.2-1" class="pilcrow">¶</a></p>
<p id="section-7.2-2">The PRIORITY_UPDATE frame MUST be sent on the client control stream
(see <span><a href="https://datatracker.ietf.org/doc/html/draft-ietf-quic-http-34#section-6.2.1" class="relref">Section 6.2.1</a> of [<a href="#HTTP3" class="xref">HTTP3</a>]</span>). Receiving a PRIORITY_UPDATE frame on a
stream other than the client control stream MUST be treated as a connection
error of type H3_FRAME_UNEXPECTED.<a href="#section-7.2-2" class="pilcrow">¶</a></p>
<span id="name-http-3-priority_update-frame"></span><div id="fig-h3-reprioritization-frame">
<figure id="figure-2">
          <div id="section-7.2-3.1">
<pre class="lang-drawing sourcecode">
HTTP/3 PRIORITY_UPDATE Frame {
  Type (i) = 0xF0700..0xF0701,
  Length (i),
  Prioritized Element ID (i),
  Priority Field Value (..),
}
</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-http-3-priority_update-frame" class="selfRef">HTTP/3 PRIORITY_UPDATE Frame</a>
          </figcaption></figure>
</div>
<p id="section-7.2-4">The PRIORITY_UPDATE frame payload has the following fields:<a href="#section-7.2-4" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-7.2-5">
          <dt id="section-7.2-5.1">
Prioritized Element ID:  </dt>
          <dd style="margin-left: 1.5em" id="section-7.2-5.2">
            <p id="section-7.2-5.2.1">The stream ID or push ID that is the target of the priority update.<a href="#section-7.2-5.2.1" class="pilcrow">¶</a></p>
</dd>
          <dd class="break"></dd>
<dt id="section-7.2-5.3">
Priority Field Value:  </dt>
          <dd style="margin-left: 1.5em" id="section-7.2-5.4">
            <p id="section-7.2-5.4.1">The priority update value in ASCII text, encoded using Structured Fields. This
is the same representation as the Priority header field value.<a href="#section-7.2-5.4.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
</dl>
<p id="section-7.2-6">The request-stream variant of PRIORITY_UPDATE (type=0xF0700) MUST reference a
request stream. If a server receives a PRIORITY_UPDATE (type=0xF0700) for a
Stream ID that is not a request stream, this MUST be treated as a connection
error of type H3_ID_ERROR. The Stream ID MUST be within the client-initiated
bidirectional stream limit. If a server receives a PRIORITY_UPDATE
(type=0xF0700) with a Stream ID that is beyond the stream limits, this SHOULD be
treated as a connection error of type H3_ID_ERROR. Generating an error is not
mandatory because HTTP/3 implementations might have practical barriers to
determining the active stream concurrency limit that is applied by the QUIC
layer.<a href="#section-7.2-6" class="pilcrow">¶</a></p>
<p id="section-7.2-7">The push-stream variant PRIORITY_UPDATE (type=0xF0701) MUST reference a promised
push stream. If a server receives a PRIORITY_UPDATE (type=0xF0701) with a Push ID
that is greater than the maximum Push ID or which has not yet been promised, this
MUST be treated as a connection error of type H3_ID_ERROR.<a href="#section-7.2-7" class="pilcrow">¶</a></p>
<p id="section-7.2-8">PRIORITY_UPDATE frames of either type are only sent by clients. If a client
receives a PRIORITY_UPDATE frame, this MUST be treated as a connection error of
type H3_FRAME_UNEXPECTED.<a href="#section-7.2-8" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="merging">
<section id="section-8">
      <h2 id="name-merging-client-and-server-d">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-merging-client-and-server-d" class="section-name selfRef">Merging Client- and Server-Driven Parameters</a>
      </h2>
<p id="section-8-1">It is not always the case that the client has the best understanding of how the
HTTP responses deserve to be prioritized. The server might have additional
information that can be combined with the client's indicated priority in order
to improve the prioritization of the response. For example, use of an HTML
document might depend heavily on one of the inline images; existence of such
dependencies is typically best known to the server. Or, a server that receives
requests for a font <span>[<a href="#RFC8081" class="xref">RFC8081</a>]</span> and images with the same urgency might give
higher precedence to the font, so that a visual client can render textual
information at an early moment.<a href="#section-8-1" class="pilcrow">¶</a></p>
<p id="section-8-2">An origin can use the Priority response header field to indicate its view on how
an HTTP response should be prioritized. An intermediary that forwards an HTTP
response can use the parameters found in the Priority response header field, in
combination with the client Priority request header field, as input to its
prioritization process. No guidance is provided for merging priorities, this is
left as an implementation decision.<a href="#section-8-2" class="pilcrow">¶</a></p>
<p id="section-8-3">Absence of a priority parameter in an HTTP response indicates the server's
disinterest in changing the client-provided value. This is different from the
logic being defined for the request header field, in which omission of a
priority parameter implies the use of their default values (see <a href="#parameters" class="xref">Section 4</a>).<a href="#section-8-3" class="pilcrow">¶</a></p>
<p id="section-8-4">As a non-normative example, when the client sends an HTTP request with the
urgency parameter set to <code>5</code> and the incremental parameter set to <code>true</code><a href="#section-8-4" class="pilcrow">¶</a></p>
<div id="section-8-5">
<pre class="lang-example sourcecode">
:method = GET
:scheme = https
:authority = example.net
:path = /menu.png
priority = u=5, i
</pre><a href="#section-8-5" class="pilcrow">¶</a>
</div>
<p id="section-8-6">and the origin responds with<a href="#section-8-6" class="pilcrow">¶</a></p>
<div id="section-8-7">
<pre class="lang-example sourcecode">
:status = 200
content-type = image/png
priority = u=1
</pre><a href="#section-8-7" class="pilcrow">¶</a>
</div>
<p id="section-8-8">the intermediary might alter its understanding of the urgency from <code>5</code> to <code>1</code>,
because it prefers the server-provided value over the client's. The incremental
value continues to be <code>true</code>, the value specified by the client, as the server did
not specify the incremental(<code>i</code>) parameter.<a href="#section-8-8" class="pilcrow">¶</a></p>
</section>
</div>
<div id="client-scheduling">
<section id="section-9">
      <h2 id="name-client-scheduling">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-client-scheduling" class="section-name selfRef">Client Scheduling</a>
      </h2>
<p id="section-9-1">A client MAY use priority values to make local processing or scheduling choices
about the requests it initiates.<a href="#section-9-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="server-scheduling">
<section id="section-10">
      <h2 id="name-server-scheduling">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-server-scheduling" class="section-name selfRef">Server Scheduling</a>
      </h2>
<p id="section-10-1">Priority signals are input to a prioritization process. They do not guarantee
any particular processing or transmission order for one response relative to any
other response. An endpoint cannot force a peer to process concurrent request in
a particular order using priority. Expressing priority is therefore only a
suggestion.<a href="#section-10-1" class="pilcrow">¶</a></p>
<p id="section-10-2">A server can use priority signals along with other inputs to make scheduling
decisions. No guidance is provided about how this can or should be done. Factors
such as implementation choices or deployment environment also play a role. Any
given connection is likely to have many dynamic permutations. For these reasons,
there is no unilateral perfect scheduler and this document only provides some
basic recommendations for implementations.<a href="#section-10-2" class="pilcrow">¶</a></p>
<p id="section-10-3">Clients cannot depend on particular treatment based on priority signals. Servers
can use other information to prioritize responses.<a href="#section-10-3" class="pilcrow">¶</a></p>
<p id="section-10-4">It is RECOMMENDED that, when possible, servers respect the urgency parameter
(<a href="#urgency" class="xref">Section 4.1</a>), sending higher urgency responses before lower urgency responses.<a href="#section-10-4" class="pilcrow">¶</a></p>
<p id="section-10-5">The incremental parameter indicates how a client processes response bytes as
they arrive. It is RECOMMENDED that, when possible, servers respect the
incremental parameter (<a href="#incremental" class="xref">Section 4.2</a>). Non-incremental resources can only be used
when all of the response payload has been received. Therefore, non-incremental
responses of the same urgency SHOULD be served in their entirety, one-by-one,
based on the stream ID, which corresponds to the order in which clients make
requests. Doing so ensures that clients can use request ordering to influence
response order.<a href="#section-10-5" class="pilcrow">¶</a></p>
<p id="section-10-6">Incremental responses of the same urgency SHOULD be served by sharing bandwidth
amongst them. Incremental resources are used as parts, or chunks, of the
response payload are received. A client might benefit more from receiving a
portion of all these resources rather than the entirety of a single resource.
How large a portion of the resource is needed to be useful in improving
performance varies. Some resource types place critical elements early, others
can use information progressively. This scheme provides no explicit mandate
about how a server should use size, type or any other input to decide how to
prioritize.<a href="#section-10-6" class="pilcrow">¶</a></p>
<p id="section-10-7">There can be scenarios where a server will need to schedule multiple incremental
and non-incremental responses at the same urgency level. Strictly abiding the
scheduling guidance based on urgency and request generation order might lead
to sub-optimal results at the client, as early non-incremental responses might
prevent serving of incremental responses issued later. The following are
examples of such challenges.<a href="#section-10-7" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-10-8">
<li id="section-10-8.1">At the same urgency level, a non-incremental request for a large resource
followed by an incremental request for a small resource.<a href="#section-10-8.1" class="pilcrow">¶</a>
</li>
        <li id="section-10-8.2">At the same urgency level, an incremental request of indeterminate length
followed by a non-incremental large resource.<a href="#section-10-8.2" class="pilcrow">¶</a>
</li>
      </ol>
<p id="section-10-9">It is RECOMMENDED that servers avoid such starvation where possible. The method
to do so is an implementation decision. For example, a server might
pre-emptively send responses of a particular incremental type based on other
information such as content size.<a href="#section-10-9" class="pilcrow">¶</a></p>
<p id="section-10-10">Optimal scheduling of server push is difficult, especially when pushed resources
contend with active concurrent requests. Servers can consider many factors when
scheduling, such as the type or size of resource being pushed, the priority of
the request that triggered the push, the count of active concurrent responses,
the priority of other active concurrent responses, etc. There is no general
guidance on the best way to apply these. A server that is too simple could
easily push at too high a priority and block client requests, or push at too low
a priority and delay the response, negating intended goals of server push.<a href="#section-10-10" class="pilcrow">¶</a></p>
<p id="section-10-11">Priority signals are a factor for server push scheduling. The concept of
parameter value defaults applies slightly differently because there is no
explicit client-signalled initial priority. A server can apply priority signals
provided in an origin response; see the merging guidance given in <a href="#merging" class="xref">Section 8</a>.
In the absence of origin signals, applying default parameter values could be
suboptimal. By whatever means a server decides to schedule a pushed response, it
can signal the intended priority to the client by including the Priority field
in a PUSH_PROMISE or HEADERS frame.<a href="#section-10-11" class="pilcrow">¶</a></p>
<div id="intermediaries-with-multiple-backend-connections">
<section id="section-10.1">
        <h3 id="name-intermediaries-with-multipl">
<a href="#section-10.1" class="section-number selfRef">10.1. </a><a href="#name-intermediaries-with-multipl" class="section-name selfRef">Intermediaries with Multiple Backend Connections</a>
        </h3>
<p id="section-10.1-1">An intermediary serving an HTTP connection might split requests over multiple
backend connections. When it applies prioritization rules strictly, low priority
requests cannot make progress while requests with higher priorities are inflight. This
blocking can propagate to backend connections, which the peer might interpret as
a connection stall. Endpoints often implement protections against stalls, such
as abruptly closing connections after a certain time period. To reduce the
possibility of this occurring, intermediaries can avoid strictly following
prioritization and instead allocate small amounts of bandwidth for all the
requests that they are forwarding, so that every request can make some progress
over time.<a href="#section-10.1-1" class="pilcrow">¶</a></p>
<p id="section-10.1-2">Similarly, servers SHOULD allocate some amount of bandwidths to streams acting
as tunnels.<a href="#section-10.1-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="connect-scheduling">
<section id="section-11">
      <h2 id="name-scheduling-and-the-connect-">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-scheduling-and-the-connect-" class="section-name selfRef">Scheduling and the CONNECT Method</a>
      </h2>
<p id="section-11-1">When a request stream carries the CONNECT method, the scheduling guidance in
this document applies to the frames on the stream. A client that issues multiple
CONNECT requests can set the incremental parameter to <code>true</code>, servers that
implement the recommendation in <a href="#server-scheduling" class="xref">Section 10</a> will schedule these
fairly.<a href="#section-11-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="retransmission-scheduling">
<section id="section-12">
      <h2 id="name-retransmission-scheduling">
<a href="#section-12" class="section-number selfRef">12. </a><a href="#name-retransmission-scheduling" class="section-name selfRef">Retransmission Scheduling</a>
      </h2>
<p id="section-12-1">Transport protocols such as TCP and QUIC provide reliability by detecting packet
losses and retransmitting lost information. While this document specifies
HTTP-layer prioritization, its effectiveness can be further enhanced if the
transport layer factors priority into scheduling both new data and
retransmission data. The remainder of this section discusses considerations when
using QUIC.<a href="#section-12-1" class="pilcrow">¶</a></p>
<p id="section-12-2"><span><a href="https://rfc-editor.org/rfc/rfc9000#section-13.3" class="relref">Section 13.3</a> of [<a href="#QUIC" class="xref">QUIC</a>]</span> states "Endpoints SHOULD prioritize
retransmission of data over sending new data, unless priorities specified by the
application indicate otherwise". When an HTTP/3 application uses the priority
scheme defined in this document and the QUIC transport implementation supports
application indicated stream priority, a transport that considers the relative
priority of streams when scheduling both new data and retransmission data might
better match the expectations of the application. However, there are no
requirements on how a transport chooses to schedule based on this information
because the decision depends on several factors and trade-offs. It could
prioritize new data for a higher urgency stream over retransmission data for a
lower priority stream, or it could prioritize retransmission data over new data
irrespective of urgencies.<a href="#section-12-2" class="pilcrow">¶</a></p>
<p id="section-12-3"><span><a href="https://rfc-editor.org/rfc/rfc9002#section-6.2.4" class="relref">Section 6.2.4</a> of [<a href="#QUIC-RECOVERY" class="xref">QUIC-RECOVERY</a>]</span>, also highlights consideration of
application priorities when sending probe packets after Probe Timeout timer
expiration. A QUIC implementation supporting application-indicated priorities
might use the relative priority of streams when choosing probe data.<a href="#section-12-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="fairness">
<section id="section-13">
      <h2 id="name-fairness">
<a href="#section-13" class="section-number selfRef">13. </a><a href="#name-fairness" class="section-name selfRef">Fairness</a>
      </h2>
<p id="section-13-1">As a general guideline, a server SHOULD NOT use priority information for making
scheduling decisions across multiple connections, unless it knows that those
connections originate from the same client. Due to this, priority information
conveyed over a non-coalesced HTTP connection (e.g., HTTP/1.1) might go unused.<a href="#section-13-1" class="pilcrow">¶</a></p>
<p id="section-13-2">The remainder of this section discusses scenarios where unfairness is
problematic and presents possible mitigations, or where unfairness is desirable.<a href="#section-13-2" class="pilcrow">¶</a></p>
<div id="coalescing-intermediaries">
<section id="section-13.1">
        <h3 id="name-coalescing-intermediaries">
<a href="#section-13.1" class="section-number selfRef">13.1. </a><a href="#name-coalescing-intermediaries" class="section-name selfRef">Coalescing Intermediaries</a>
        </h3>
<p id="section-13.1-1">When an intermediary coalesces HTTP requests coming from multiple clients into
one HTTP/2 or HTTP/3 connection going to the backend server, requests that
originate from one client might have higher precedence than those coming from
others.<a href="#section-13.1-1" class="pilcrow">¶</a></p>
<p id="section-13.1-2">It is sometimes beneficial for the server running behind an intermediary to obey
to the value of the Priority header field. As an example, a resource-constrained
server might defer the transmission of software update files that would have the
background urgency being associated. However, in the worst case, the asymmetry
between the precedence declared by multiple clients might cause responses going
to one user agent to be delayed totally after those going to another.<a href="#section-13.1-2" class="pilcrow">¶</a></p>
<p id="section-13.1-3">In order to mitigate this fairness problem, a server could use knowledge about
the intermediary as another signal in its prioritization decisions. For
instance, if a server knows the intermediary is coalescing requests, then it
could avoid serving the responses in their entirety and instead distribute
bandwidth (for example, in a round-robin manner). This can work if the
constrained resource is network capacity between the intermediary and the user
agent, as the intermediary buffers responses and forwards the chunks based on
the prioritization scheme it implements.<a href="#section-13.1-3" class="pilcrow">¶</a></p>
<p id="section-13.1-4">A server can determine if a request came from an intermediary through
configuration, or by consulting if that request contains one of the following
header fields:<a href="#section-13.1-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-13.1-5.1">Forwarded <span>[<a href="#FORWARDED" class="xref">FORWARDED</a>]</span>, X-Forwarded-For<a href="#section-13.1-5.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-13.1-5.2">Via (see <span><a href="https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-semantics-19#section-7.6.3" class="relref">Section 7.6.3</a> of [<a href="#HTTP" class="xref">HTTP</a>]</span>)<a href="#section-13.1-5.2" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="http1x-back-ends">
<section id="section-13.2">
        <h3 id="name-http-1x-back-ends">
<a href="#section-13.2" class="section-number selfRef">13.2. </a><a href="#name-http-1x-back-ends" class="section-name selfRef">HTTP/1.x Back Ends</a>
        </h3>
<p id="section-13.2-1">It is common for CDN infrastructure to support different HTTP versions on the
front end and back end. For instance, the client-facing edge might support
HTTP/2 and HTTP/3 while communication to back end servers is done using
HTTP/1.1. Unlike with connection coalescing, the CDN will "de-mux" requests into
discrete connections to the back end. HTTP/1.1 and older do not support response
multiplexing in a single connection, so there is not a fairness problem.
However, back end servers MAY still use client headers for request scheduling.
Back end servers SHOULD only schedule based on client priority information where
that information can be scoped to individual end clients. Authentication and
other session information might provide this linkability.<a href="#section-13.2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="intentional-introduction-of-unfairness">
<section id="section-13.3">
        <h3 id="name-intentional-introduction-of">
<a href="#section-13.3" class="section-number selfRef">13.3. </a><a href="#name-intentional-introduction-of" class="section-name selfRef">Intentional Introduction of Unfairness</a>
        </h3>
<p id="section-13.3-1">It is sometimes beneficial to deprioritize the transmission of one connection
over others, knowing that doing so introduces a certain amount of unfairness
between the connections and therefore between the requests served on those
connections.<a href="#section-13.3-1" class="pilcrow">¶</a></p>
<p id="section-13.3-2">For example, a server might use a scavenging congestion controller on
connections that only convey background priority responses such as software
update images. Doing so improves responsiveness of other connections at the cost
of delaying the delivery of updates.<a href="#section-13.3-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="header-field-rationale">
<section id="section-14">
      <h2 id="name-why-use-an-end-to-end-heade">
<a href="#section-14" class="section-number selfRef">14. </a><a href="#name-why-use-an-end-to-end-heade" class="section-name selfRef">Why use an End-to-End Header Field?</a>
      </h2>
<p id="section-14-1">Contrary to the prioritization scheme of HTTP/2 that uses a hop-by-hop frame,
the Priority header field is defined as end-to-end.<a href="#section-14-1" class="pilcrow">¶</a></p>
<p id="section-14-2">The rationale is that the Priority header field transmits how each response
affects the client's processing of those responses, rather than how relatively
urgent each response is to others.  The way a client processes a response is a
property associated to that client generating that request.  Not that of an
intermediary.  Therefore, it is an end-to-end property.  How these end-to-end
properties carried by the Priority header field affect the prioritization
between the responses that share a connection is a hop-by-hop issue.<a href="#section-14-2" class="pilcrow">¶</a></p>
<p id="section-14-3">Having the Priority header field defined as end-to-end is important for caching
intermediaries.  Such intermediaries can cache the value of the Priority header
field along with the response, and utilize the value of the cached header field
when serving the cached response, only because the header field is defined as
end-to-end rather than hop-by-hop.<a href="#section-14-3" class="pilcrow">¶</a></p>
<p id="section-14-4">It should also be noted that the use of a header field carrying a textual value
makes the prioritization scheme extensible; see the discussion below.<a href="#section-14-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="security-considerations">
<section id="section-15">
      <h2 id="name-security-considerations">
<a href="#section-15" class="section-number selfRef">15. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-15-1"><span>[<a href="#RFC7540" class="xref">RFC7540</a>]</span> stream prioritization relies on dependencies. Considerations are
presented to implementations, describing how limiting state or work commitments
can avoid some types of problems. In addition, <span>[<a href="#CVE-2019-9513" class="xref">CVE-2019-9513</a>]</span> aka "Resource
Loop", is an example of a DoS attack that abuses stream dependencies. Extensible
priorities does not use dependencies, which avoids these issues.<a href="#section-15-1" class="pilcrow">¶</a></p>
<p id="section-15-2"><a href="#frame" class="xref">Section 7</a> describes considerations for server buffering of PRIORITY_UPDATE
frames.<a href="#section-15-2" class="pilcrow">¶</a></p>
<p id="section-15-3"><a href="#server-scheduling" class="xref">Section 10</a> presents examples where servers that prioritize responses
in a certain way might be starved of the ability to transmit payload.<a href="#section-15-3" class="pilcrow">¶</a></p>
<p id="section-15-4">The security considerations from <span>[<a href="#STRUCTURED-FIELDS" class="xref">STRUCTURED-FIELDS</a>]</span> apply to processing of
priority parameters defined in <a href="#parameters" class="xref">Section 4</a>.<a href="#section-15-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="iana-considerations">
<section id="section-16">
      <h2 id="name-iana-considerations">
<a href="#section-16" class="section-number selfRef">16. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-16-1">This specification registers the following entry in the the Hypertext Transfer
Protocol (HTTP) Field Name Registry established by <span>[<a href="#HTTP" class="xref">HTTP</a>]</span>:<a href="#section-16-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-16-2">
        <dt id="section-16-2.1">
Field name:  </dt>
        <dd style="margin-left: 1.5em" id="section-16-2.2">
          <p id="section-16-2.2.1">Priority<a href="#section-16-2.2.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-16-2.3">
Status:  </dt>
        <dd style="margin-left: 1.5em" id="section-16-2.4">
          <p id="section-16-2.4.1">permanent<a href="#section-16-2.4.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-16-2.5">
Specification document(s):  </dt>
        <dd style="margin-left: 1.5em" id="section-16-2.6">
          <p id="section-16-2.6.1">This document<a href="#section-16-2.6.1" class="pilcrow">¶</a></p>
</dd>
      <dd class="break"></dd>
</dl>
<p id="section-16-3">This specification registers the following entry in the HTTP/2 Settings registry
established by <span>[<a href="#RFC7540" class="xref">RFC7540</a>]</span>:<a href="#section-16-3" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-16-4">
        <dt id="section-16-4.1">
Name:  </dt>
        <dd style="margin-left: 1.5em" id="section-16-4.2">
          <p id="section-16-4.2.1">SETTINGS_NO_RFC7540_PRIORITIES<a href="#section-16-4.2.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-16-4.3">
Code:  </dt>
        <dd style="margin-left: 1.5em" id="section-16-4.4">
          <p id="section-16-4.4.1">0x9<a href="#section-16-4.4.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-16-4.5">
Initial value:  </dt>
        <dd style="margin-left: 1.5em" id="section-16-4.6">
          <p id="section-16-4.6.1">0<a href="#section-16-4.6.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-16-4.7">
Specification:  </dt>
        <dd style="margin-left: 1.5em" id="section-16-4.8">
          <p id="section-16-4.8.1">This document<a href="#section-16-4.8.1" class="pilcrow">¶</a></p>
</dd>
      <dd class="break"></dd>
</dl>
<p id="section-16-5">This specification registers the following entry in the HTTP/2 Frame Type
registry established by <span>[<a href="#RFC7540" class="xref">RFC7540</a>]</span>:<a href="#section-16-5" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-16-6">
        <dt id="section-16-6.1">
Frame Type:  </dt>
        <dd style="margin-left: 1.5em" id="section-16-6.2">
          <p id="section-16-6.2.1">PRIORITY_UPDATE<a href="#section-16-6.2.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-16-6.3">
Code:  </dt>
        <dd style="margin-left: 1.5em" id="section-16-6.4">
          <p id="section-16-6.4.1">0x10<a href="#section-16-6.4.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-16-6.5">
Specification:  </dt>
        <dd style="margin-left: 1.5em" id="section-16-6.6">
          <p id="section-16-6.6.1">This document<a href="#section-16-6.6.1" class="pilcrow">¶</a></p>
</dd>
      <dd class="break"></dd>
</dl>
<p id="section-16-7">This specification registers the following entries in the HTTP/3 Frame Type
registry established by <span>[<a href="#HTTP3" class="xref">HTTP3</a>]</span>:<a href="#section-16-7" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-16-8">
        <dt id="section-16-8.1">
Frame Type:  </dt>
        <dd style="margin-left: 1.5em" id="section-16-8.2">
          <p id="section-16-8.2.1">PRIORITY_UPDATE<a href="#section-16-8.2.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-16-8.3">
Code:  </dt>
        <dd style="margin-left: 1.5em" id="section-16-8.4">
          <p id="section-16-8.4.1">0xF0700 and 0xF0701<a href="#section-16-8.4.1" class="pilcrow">¶</a></p>
</dd>
        <dd class="break"></dd>
<dt id="section-16-8.5">
Specification:  </dt>
        <dd style="margin-left: 1.5em" id="section-16-8.6">
          <p id="section-16-8.6.1">This document<a href="#section-16-8.6.1" class="pilcrow">¶</a></p>
</dd>
      <dd class="break"></dd>
</dl>
<p id="section-16-9">Upon publication, please create the HTTP Priority Parameters registry at
<a href="https://iana.org/assignments/http-priority">https://iana.org/assignments/http-priority</a> and populate it with the types
defined in <a href="#parameters" class="xref">Section 4</a>; see <a href="#register" class="xref">Section 4.3.1</a> for its associated procedures.<a href="#section-16-9" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-17">
      <h2 id="name-references">
<a href="#section-17" class="section-number selfRef">17. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-17.1">
        <h3 id="name-normative-references">
<a href="#section-17.1" class="section-number selfRef">17.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="HTTP">[HTTP]</dt>
        <dd>
<span class="refAuthor">Fielding, R. T.</span>, <span class="refAuthor">Nottingham, M.</span>, and <span class="refAuthor">J. Reschke</span>, <span class="refTitle">"HTTP Semantics"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-httpbis-semantics-19</span>, <time datetime="2021-09-12" class="refDate">12 September 2021</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-semantics-19">https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-semantics-19</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="HTTP2">[HTTP2]</dt>
        <dd>
<span class="refAuthor">Thomson, M.</span> and <span class="refAuthor">C. Benfield</span>, <span class="refTitle">"Hypertext Transfer Protocol Version 2 (HTTP/2)"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-httpbis-http2bis-05</span>, <time datetime="2021-09-26" class="refDate">26 September 2021</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-http2bis-05">https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-http2bis-05</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="HTTP3">[HTTP3]</dt>
        <dd>
<span class="refAuthor">Bishop, M.</span>, <span class="refTitle">"Hypertext Transfer Protocol Version 3 (HTTP/3)"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-quic-http-34</span>, <time datetime="2021-02-02" class="refDate">2 February 2021</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-quic-http-34">https://datatracker.ietf.org/doc/html/draft-ietf-quic-http-34</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="QUIC">[QUIC]</dt>
        <dd>
<span class="refAuthor">Iyengar, J., Ed.</span> and <span class="refAuthor">M. Thomson, Ed.</span>, <span class="refTitle">"QUIC: A UDP-Based Multiplexed and Secure Transport"</span>, <span class="seriesInfo">RFC 9000</span>, <span class="seriesInfo">DOI 10.17487/RFC9000</span>, <time datetime="2021-05" class="refDate">May 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9000">https://www.rfc-editor.org/rfc/rfc9000</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc2119">https://www.rfc-editor.org/rfc/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8126">[RFC8126]</dt>
        <dd>
<span class="refAuthor">Cotton, M.</span>, <span class="refAuthor">Leiba, B.</span>, and <span class="refAuthor">T. Narten</span>, <span class="refTitle">"Guidelines for Writing an IANA Considerations Section in RFCs"</span>, <span class="seriesInfo">BCP 26</span>, <span class="seriesInfo">RFC 8126</span>, <span class="seriesInfo">DOI 10.17487/RFC8126</span>, <time datetime="2017-06" class="refDate">June 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8126">https://www.rfc-editor.org/rfc/rfc8126</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="STRUCTURED-FIELDS">[STRUCTURED-FIELDS]</dt>
      <dd>
<span class="refAuthor">Nottingham, M.</span> and <span class="refAuthor">P-H. Kamp</span>, <span class="refTitle">"Structured Field Values for HTTP"</span>, <span class="seriesInfo">RFC 8941</span>, <span class="seriesInfo">DOI 10.17487/RFC8941</span>, <time datetime="2021-02" class="refDate">February 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8941">https://www.rfc-editor.org/rfc/rfc8941</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-17.2">
        <h3 id="name-informative-references">
<a href="#section-17.2" class="section-number selfRef">17.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="CACHING">[CACHING]</dt>
        <dd>
<span class="refAuthor">Fielding, R. T.</span>, <span class="refAuthor">Nottingham, M.</span>, and <span class="refAuthor">J. Reschke</span>, <span class="refTitle">"HTTP Caching"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-httpbis-cache-19</span>, <time datetime="2021-09-12" class="refDate">12 September 2021</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-cache-19">https://datatracker.ietf.org/doc/html/draft-ietf-httpbis-cache-19</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="CVE-2019-9513">[CVE-2019-9513]</dt>
        <dd>
<span class="refAuthor">Common Vulnerabilities and Exposures</span>, <span class="refTitle">"CVE-2019-9513"</span>, <time datetime="2019-03-01" class="refDate">1 March 2019</time>, <span>&lt;<a href="https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2019-9513">https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2019-9513</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="FORWARDED">[FORWARDED]</dt>
        <dd>
<span class="refAuthor">Petersson, A.</span> and <span class="refAuthor">M. Nilsson</span>, <span class="refTitle">"Forwarded HTTP Extension"</span>, <span class="seriesInfo">RFC 7239</span>, <span class="seriesInfo">DOI 10.17487/RFC7239</span>, <time datetime="2014-06" class="refDate">June 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7239">https://www.rfc-editor.org/rfc/rfc7239</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.lassey-priority-setting">[I-D.lassey-priority-setting]</dt>
        <dd>
<span class="refAuthor">Lassey, B.</span> and <span class="refAuthor">L. Pardue</span>, <span class="refTitle">"Declaring Support for HTTP/2 Priorities"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-lassey-priority-setting-00</span>, <time datetime="2019-07-25" class="refDate">25 July 2019</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-lassey-priority-setting-00">https://datatracker.ietf.org/doc/html/draft-lassey-priority-setting-00</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="QUIC-RECOVERY">[QUIC-RECOVERY]</dt>
        <dd>
<span class="refAuthor">Iyengar, J., Ed.</span> and <span class="refAuthor">I. Swett, Ed.</span>, <span class="refTitle">"QUIC Loss Detection and Congestion Control"</span>, <span class="seriesInfo">RFC 9002</span>, <span class="seriesInfo">DOI 10.17487/RFC9002</span>, <time datetime="2021-05" class="refDate">May 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc9002">https://www.rfc-editor.org/rfc/rfc9002</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7540">[RFC7540]</dt>
        <dd>
<span class="refAuthor">Belshe, M.</span>, <span class="refAuthor">Peon, R.</span>, and <span class="refAuthor">M. Thomson, Ed.</span>, <span class="refTitle">"Hypertext Transfer Protocol Version 2 (HTTP/2)"</span>, <span class="seriesInfo">RFC 7540</span>, <span class="seriesInfo">DOI 10.17487/RFC7540</span>, <time datetime="2015-05" class="refDate">May 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc7540">https://www.rfc-editor.org/rfc/rfc7540</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8081">[RFC8081]</dt>
      <dd>
<span class="refAuthor">Lilley, C.</span>, <span class="refTitle">"The "font" Top-Level Media Type"</span>, <span class="seriesInfo">RFC 8081</span>, <span class="seriesInfo">DOI 10.17487/RFC8081</span>, <time datetime="2017-02" class="refDate">February 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/rfc/rfc8081">https://www.rfc-editor.org/rfc/rfc8081</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="acknowledgements">
<section id="appendix-A">
      <h2 id="name-acknowledgements">
<a href="#appendix-A" class="section-number selfRef">Appendix A. </a><a href="#name-acknowledgements" class="section-name selfRef">Acknowledgements</a>
      </h2>
<p id="appendix-A-1">Roy Fielding presented the idea of using a header field for representing
priorities in <a href="http://tools.ietf.org/agenda/83/slides/slides-83-httpbis-5.pdf">http://tools.ietf.org/agenda/83/slides/slides-83-httpbis-5.pdf</a>.
In <a href="https://github.com/pmeenan/http3-prioritization-proposal">https://github.com/pmeenan/http3-prioritization-proposal</a>, Patrick Meenan
advocated for representing the priorities using a tuple of urgency and
concurrency. The ability to disable HTTP/2 prioritization is inspired by
<span>[<a href="#I-D.lassey-priority-setting" class="xref">I-D.lassey-priority-setting</a>]</span>, authored by Brad Lassey and Lucas Pardue, with
modifications based on feedback that was not incorporated into an update to that
document.<a href="#appendix-A-1" class="pilcrow">¶</a></p>
<p id="appendix-A-2">The motivation for defining an alternative to HTTP/2 priorities is drawn from
discussion within the broad HTTP community. Special thanks to Roberto Peon,
Martin Thomson and Netflix for text that was incorporated explicitly in this
document.<a href="#appendix-A-2" class="pilcrow">¶</a></p>
<p id="appendix-A-3">In addition to the people above, this document owes a lot to the extensive
discussion in the HTTP priority design team, consisting of Alan Frindell,
Andrew Galloni, Craig Taylor, Ian Swett, Kazuho Oku, Lucas Pardue, Matthew Cox,
Mike Bishop, Roberto Peon, Robin Marx, Roy Fielding.<a href="#appendix-A-3" class="pilcrow">¶</a></p>
<p id="appendix-A-4">Yang Chi contributed the section on retransmission scheduling.<a href="#appendix-A-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="change-log">
<section id="appendix-B">
      <h2 id="name-change-log">
<a href="#appendix-B" class="section-number selfRef">Appendix B. </a><a href="#name-change-log" class="section-name selfRef">Change Log</a>
      </h2>
<p id="appendix-B-1"><em>RFC EDITOR: please remove this section before publication</em><a href="#appendix-B-1" class="pilcrow">¶</a></p>
<div id="since-draft-ietf-httpbis-priority-08">
<section id="appendix-B.1">
        <h3 id="name-since-draft-ietf-httpbis-pr">
<a href="#appendix-B.1" class="section-number selfRef">B.1. </a><a href="#name-since-draft-ietf-httpbis-pr" class="section-name selfRef">Since draft-ietf-httpbis-priority-08</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.1-1.1">Changelog fixups<a href="#appendix-B.1-1.1" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="since-draft-ietf-httpbis-priority-07">
<section id="appendix-B.2">
        <h3 id="name-since-draft-ietf-httpbis-pri">
<a href="#appendix-B.2" class="section-number selfRef">B.2. </a><a href="#name-since-draft-ietf-httpbis-pri" class="section-name selfRef">Since draft-ietf-httpbis-priority-07</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.2-1.1">Relax requirements of receiving SETTINGS_NO_RFC7540_PRIORITIES that changes
value (#1714, #1725)<a href="#appendix-B.2-1.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="appendix-B.2-1.2">Clarify how intermediaries might use frames vs. headers (#1715, #1735)<a href="#appendix-B.2-1.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="appendix-B.2-1.3">Relax requirement when receiving a PRIORITY_UPDATE with an invalid structured
field value (#1741, #1756)<a href="#appendix-B.2-1.3" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="since-draft-ietf-httpbis-priority-06">
<section id="appendix-B.3">
        <h3 id="name-since-draft-ietf-httpbis-prio">
<a href="#appendix-B.3" class="section-number selfRef">B.3. </a><a href="#name-since-draft-ietf-httpbis-prio" class="section-name selfRef">Since draft-ietf-httpbis-priority-06</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.3-1.1">Focus on editorial changes<a href="#appendix-B.3-1.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="appendix-B.3-1.2">Clarify rules about Sf-Dictionary handling in headers<a href="#appendix-B.3-1.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="appendix-B.3-1.3">Split policy for parameter IANA registry into two sections based on key length<a href="#appendix-B.3-1.3" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="since-draft-ietf-httpbis-priority-05">
<section id="appendix-B.4">
        <h3 id="name-since-draft-ietf-httpbis-prior">
<a href="#appendix-B.4" class="section-number selfRef">B.4. </a><a href="#name-since-draft-ietf-httpbis-prior" class="section-name selfRef">Since draft-ietf-httpbis-priority-05</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.4-1.1">Renamed SETTINGS_DEPRECATE_RFC7540_PRIORITIES to
SETTINGS_NO_RFC7540_PRIORITIES<a href="#appendix-B.4-1.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="appendix-B.4-1.2">Clarify that senders of the HTTP/2 setting can use any alternative (#1679,
#1705)<a href="#appendix-B.4-1.2" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="since-draft-ietf-httpbis-priority-04">
<section id="appendix-B.5">
        <h3 id="name-since-draft-ietf-httpbis-priori">
<a href="#appendix-B.5" class="section-number selfRef">B.5. </a><a href="#name-since-draft-ietf-httpbis-priori" class="section-name selfRef">Since draft-ietf-httpbis-priority-04</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.5-1.1">Renamed SETTINGS_DEPRECATE_HTTP2_PRIORITIES to
SETTINGS_DEPRECATE_RFC7540_PRIORITIES (#1601)<a href="#appendix-B.5-1.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="appendix-B.5-1.2">Reoriented text towards RFC7540bis (#1561, #1601)<a href="#appendix-B.5-1.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="appendix-B.5-1.3">Clarify intermediary behavior (#1562)<a href="#appendix-B.5-1.3" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="since-draft-ietf-httpbis-priority-03">
<section id="appendix-B.6">
        <h3 id="name-since-draft-ietf-httpbis-priorit">
<a href="#appendix-B.6" class="section-number selfRef">B.6. </a><a href="#name-since-draft-ietf-httpbis-priorit" class="section-name selfRef">Since draft-ietf-httpbis-priority-03</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.6-1.1">Add statement about what this scheme applies to. Clarify extensions can
use it but must define how themselves (#1550, #1559)<a href="#appendix-B.6-1.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="appendix-B.6-1.2">Describe scheduling considerations for the CONNECT method (#1495, #1544)<a href="#appendix-B.6-1.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="appendix-B.6-1.3">Describe scheduling considerations for retransmitted data (#1429, #1504)<a href="#appendix-B.6-1.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="appendix-B.6-1.4">Suggest intermediaries might avoid strict prioritization (#1562)<a href="#appendix-B.6-1.4" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="since-draft-ietf-httpbis-priority-02">
<section id="appendix-B.7">
        <h3 id="name-since-draft-ietf-httpbis-priority">
<a href="#appendix-B.7" class="section-number selfRef">B.7. </a><a href="#name-since-draft-ietf-httpbis-priority" class="section-name selfRef">Since draft-ietf-httpbis-priority-02</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.7-1.1">Describe considerations for server push prioritization (#1056, #1345)<a href="#appendix-B.7-1.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="appendix-B.7-1.2">Define HTTP/2 PRIORITY_UPDATE ID limits in HTTP/2 terms (#1261, #1344)<a href="#appendix-B.7-1.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="appendix-B.7-1.3">Add a Parameters registry (#1371)<a href="#appendix-B.7-1.3" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="since-draft-ietf-httpbis-priority-01">
<section id="appendix-B.8">
        <h3 id="name-since-draft-ietf-httpbis-priority-">
<a href="#appendix-B.8" class="section-number selfRef">B.8. </a><a href="#name-since-draft-ietf-httpbis-priority-" class="section-name selfRef">Since draft-ietf-httpbis-priority-01</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.8-1.1">PRIORITY_UPDATE frame changes (#1096, #1079, #1167, #1262, #1267, #1271)<a href="#appendix-B.8-1.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="appendix-B.8-1.2">Add section to describe server scheduling considerations (#1215, #1232, #1266)<a href="#appendix-B.8-1.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="appendix-B.8-1.3">Remove specific instructions related to intermediary fairness (#1022, #1264)<a href="#appendix-B.8-1.3" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="since-draft-ietf-httpbis-priority-00">
<section id="appendix-B.9">
        <h3 id="name-since-draft-ietf-httpbis-priority-0">
<a href="#appendix-B.9" class="section-number selfRef">B.9. </a><a href="#name-since-draft-ietf-httpbis-priority-0" class="section-name selfRef">Since draft-ietf-httpbis-priority-00</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.9-1.1">Move text around (#1217, #1218)<a href="#appendix-B.9-1.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="appendix-B.9-1.2">Editorial change to the default urgency. The value is 3, which was always the
intent of previous changes.<a href="#appendix-B.9-1.2" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="since-draft-kazuho-httpbis-priority-04">
<section id="appendix-B.10">
        <h3 id="name-since-draft-kazuho-httpbis-">
<a href="#appendix-B.10" class="section-number selfRef">B.10. </a><a href="#name-since-draft-kazuho-httpbis-" class="section-name selfRef">Since draft-kazuho-httpbis-priority-04</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.10-1.1">Minimize semantics of Urgency levels (#1023, #1026)<a href="#appendix-B.10-1.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="appendix-B.10-1.2">Reduce guidance about how intermediary implements merging priority signals
(#1026)<a href="#appendix-B.10-1.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="appendix-B.10-1.3">Remove mention of CDN-Loop (#1062)<a href="#appendix-B.10-1.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="appendix-B.10-1.4">Editorial changes<a href="#appendix-B.10-1.4" class="pilcrow">¶</a>
</li>
          <li class="normal" id="appendix-B.10-1.5">Make changes due to WG adoption<a href="#appendix-B.10-1.5" class="pilcrow">¶</a>
</li>
          <li class="normal" id="appendix-B.10-1.6">Removed outdated Consideration (#118)<a href="#appendix-B.10-1.6" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="since-draft-kazuho-httpbis-priority-03">
<section id="appendix-B.11">
        <h3 id="name-since-draft-kazuho-httpbis-p">
<a href="#appendix-B.11" class="section-number selfRef">B.11. </a><a href="#name-since-draft-kazuho-httpbis-p" class="section-name selfRef">Since draft-kazuho-httpbis-priority-03</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.11-1.1">Changed numbering from <code>[-1,6]</code> to <code>[0,7]</code> (#78)<a href="#appendix-B.11-1.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="appendix-B.11-1.2">Replaced priority scheme negotiation with HTTP/2 priority deprecation (#100)<a href="#appendix-B.11-1.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="appendix-B.11-1.3">Shorten parameter names (#108)<a href="#appendix-B.11-1.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="appendix-B.11-1.4">Expand on considerations (#105, #107, #109, #110, #111, #113)<a href="#appendix-B.11-1.4" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="since-draft-kazuho-httpbis-priority-02">
<section id="appendix-B.12">
        <h3 id="name-since-draft-kazuho-httpbis-pr">
<a href="#appendix-B.12" class="section-number selfRef">B.12. </a><a href="#name-since-draft-kazuho-httpbis-pr" class="section-name selfRef">Since draft-kazuho-httpbis-priority-02</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.12-1.1">Consolidation of the problem statement (#61, #73)<a href="#appendix-B.12-1.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="appendix-B.12-1.2">Define SETTINGS_PRIORITIES for negotiation (#58, #69)<a href="#appendix-B.12-1.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="appendix-B.12-1.3">Define PRIORITY_UPDATE frame for HTTP/2 and HTTP/3 (#51)<a href="#appendix-B.12-1.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="appendix-B.12-1.4">Explain fairness issue and mitigations (#56)<a href="#appendix-B.12-1.4" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="since-draft-kazuho-httpbis-priority-01">
<section id="appendix-B.13">
        <h3 id="name-since-draft-kazuho-httpbis-pri">
<a href="#appendix-B.13" class="section-number selfRef">B.13. </a><a href="#name-since-draft-kazuho-httpbis-pri" class="section-name selfRef">Since draft-kazuho-httpbis-priority-01</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.13-1.1">Explain how reprioritization might be supported.<a href="#appendix-B.13-1.1" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="since-draft-kazuho-httpbis-priority-00">
<section id="appendix-B.14">
        <h3 id="name-since-draft-kazuho-httpbis-prio">
<a href="#appendix-B.14" class="section-number selfRef">B.14. </a><a href="#name-since-draft-kazuho-httpbis-prio" class="section-name selfRef">Since draft-kazuho-httpbis-priority-00</a>
        </h3>
<ul class="normal">
<li class="normal" id="appendix-B.14-1.1">Expand urgency levels from 3 to 8.<a href="#appendix-B.14-1.1" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-C">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Kazuho Oku</span></div>
<div dir="auto" class="left"><span class="org">Fastly</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:kazuhooku@gmail.com" class="email">kazuhooku@gmail.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Lucas Pardue</span></div>
<div dir="auto" class="left"><span class="org">Cloudflare</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:lucaspardue.24.7@gmail.com" class="email">lucaspardue.24.7@gmail.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
