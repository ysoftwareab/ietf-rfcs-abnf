
  Network Working Group                                     T. Sanda 
  Internet Draft                                               T. Ue 
  Expires: August 2004                                     Panasonic 
                                                       February 2004 
      
      
            Pre CRN discovery from proxy on candidate new path 
                draft-sanda-nsis-mobility-qos-proxy-00.txt  
      
      
  Status of this Memo 
      
     This document is an Internet-Draft and is in full conformance 
     with all provisions of Section 10 of RFC2026 [1].  
      
     Internet-Drafts are working documents of the Internet 
     Engineering Task Force (IETF), its areas, and its working groups.  
     Note that      other groups may also distribute working 
     documents as Internet-Drafts. 
      
     Internet-Drafts are draft documents valid for a maximum of six 
     months and may be updated, replaced, or obsoleted by other 
     documents at any time.  It is inappropriate to use Internet-
     Drafts as reference material or to cite them other than as "work 
     in progress." 
      
     The list of current Internet-Drafts can be accessed at 
          http://www.ietf.org/ietf/1id-abstracts.txt 
     The list of Internet-Draft Shadow Directories can be accessed at 
          http://www.ietf.org/shadow.html. 
      
      
  Abstract 
      
     This document proposes one method of pre CRN discovery by using 
     proxies on candidate new paths, i.e. the paths which will be 
     established when MN moves to a new networks. Pre CRN discovery 
     is used for fast state installation. 
      
      
  Conventions used in this document 
      
     The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL 
     NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and 
     "OPTIONAL" in this document are to be interpreted as described 
     in RFC-2119 [2]. 
      
      
  Table of Contents 
      
     1. Introduction................................................2 
     2. Requirements of Fast State Installation.....................3 


  Sanda et al.            Expires - August 2004              [Page 1] 
  Internet-Draft                                        February 2004 
   
     3. Proxies.....................................................3 
     4. Pre CRN Discovery...........................................4 
        4.1 Mobile Node.............................................5 
        4.2 Proxy sends DCRN_DISCOVERY..............................6 
        4.3 Intermediate QNEs belonging to the signaling path from 
        proxy to CN.................................................6 
        4.4 Correspondent Node......................................7 
        4.5 Intermediate QNEs belonging to the signaling path from CN 
        to proxy....................................................7 
        4.6 Proxy receives UCRN_DISCOVERY...........................8 
     5. Signaling messages for fast CRN discovery...................9 
     6. Security Considerations.....................................9 
     References.....................................................9 
     Author's Addresses............................................10 
      
      
  1. Introduction 
      
     When a MN performs L3 level handover, it is desirable to 
     establish new QoS paths before the MN starts sending/receiving 
     packets in new subnetwork. Furthermore, as described in [3] as 
     "Fast State Installation", it may be better to prepare new QoS 
     paths before MN moves from old sub network. 
      
     Fast state installation may be accomplished by interacting with 
     some mobility protocols such as FMIP or CT/CARD. However, it is 
     unclear NSIS can trigger, and be triggered by mobility protocols. 
     Moreover, it is required that the QoS scheme MUST have 
     provisions to accomplish its tasks even if one or more these 
     mobility protocols are not used [4]. 
     Therefore, some solutions without interacting with mobility 
     protocols are necessary to carry out fast state installation. 
      
     This document proposes one way to accomplish fast state 
     installation. The proposed way can work even if network does not 
     support mobility protocols such as FMIP and CARD. 
      
     Assumptions and terminology definition in this document are: 
      
      o MN is QNE which supports mobility specific functionalities 
     (mQNE).  
      
      o "Upstream data flow" is a data flow from MN to CN, and 
     "downstream data flow" is a data flow from CN and MN. 
      
      o On-path signaling 
      
      o Definition of "UCRN" and "DCRN" is the same as [6] 
      
      o Only optimized route case is discussed in this document 
     although several routes are possible such as triangle route, 
     tunnel between OAR and NAR established by FMIP, and so on. 


  Sanda et al.            Expires - August 2004              [Page 2] 
  Internet-Draft                                        February 2004 
   
      
  2. Requirements of Fast State Installation 
      
     This section describes some requirements of fast state 
     installation. 
      
     It is difficult for MN to initiate RESERVE (create) message for 
     new path when it is still in old subnetwork. Therefore NSIS 
     proxy utilization will be necessary for fast state installation, 
     as described in [3]. 
      
     Some types of usages are possible, such as. 
      
     1. Preparation 
     Proxy prepares to create new paths for the MN, e.g. discovering 
     CRNs in advance (pre CRN discovery). 
      
     2. Installation 
     Proxy initiates RESERVE message for creating new paths in behalf 
     of MN after/without preparation. 
     If installation without preparation is performed, CRN discovery 
     and route selection should be carried out simultaneously with 
     reservation process in this case. 
      
      
     The following section describes how to perform pre CRN discovery. 
      
  3. Proxies 
      
     It is desirable that either old (current) or candidate new 
     adjacent mQNEs of MN acts as a proxy. 
     An example of the former case is described in an appendix of [5]. 
     Here we aim to consider the latter case, i.e. new adjacent mQNE 
     acts as a proxy and prepares new path creation. 
      
     If candidate NAR(s) has mQNE functionalities, the NAR(s) acts as 
     a proxy. 
      
      
      
      
      
      
      
      
      
      
      
      
      
      
      


  Sanda et al.            Expires - August 2004              [Page 3] 
  Internet-Draft                                        February 2004 
   
      
                               new 
                             adjacent 
                               mQNE   
               +..+   +---+   +----+                              
               .MN.---|NAR|---|mQNE|---...--------                
               +..+   +---+   +----+             |                
                ^                                |                
                |                                |                
               +--+   +---+  +-+  +----+       +----+       +--+  
               |MN|===|OAR|==|R|==|mQNE|==...==|mQNE|==...==|CN|  
               +--+   +---+  +-+  +----+       +----+       +--+  
                               old (current) 
                                 adjacent   
                                   mQNE   
                                                                  
                                           === current path 
                                           --- expected new path 
                                           R: Router or NE (not QNE) 
      
                    Figure1: New and old adjacent mQNE 
      
      
     It is possible that new adjacent mQNE for upstream is not the 
     same as the mQNE for downstream. This case it is desirable that 
     a pair of new adjacent mQNE for upstream and downstream acts as 
     proxy. 
      
      
  4. Pre CRN Discovery 
      
     The basic idea of pre CRN (both UCRN and DCRN) discovery is as 
     follows. 
      
       o MN sends current flow identifier and session identifier (for 
     both upstream and downstream, or either) information to proxies.  
      
       o Each proxy sends a DCRN_DISCOVERY to CN. A DCRN_DISCOVERY is 
     NSLP signaling message and containing the flow identifier and 
     session identifier received from the MN. 
      
       o All intermediate QNEs, which belonging to the signaling path 
     from the proxy to CN, check if any interface has resource 
     reservation for the pair of flow identifier and session 
     identifier for upstream. If exist, the QNE appends an IP address 
     of the interface to DCRN_DISCOVERY. 
      
       o On receipt of DCRN_DISCOVERY, CN sends a UCRN_DISCOVERY to 
     the proxy. A UCRN_DISCOVERY is NSLP signaling message and 
     containing the flow identifier and session identifier received 
     from MN via DCRN_DISCOVERY. A UCRN_DISCOVERY also contains the 
     information of IP addresses appended to DCRN_DISCOVERY 


  Sanda et al.            Expires - August 2004              [Page 4] 
  Internet-Draft                                        February 2004 
   
      
       o All intermediate QNEs, which belonging to the signaling path 
     from CN to the proxy, check if any interface has resource 
     reservation for the pair of flow identifier and session 
     identifier for downstream. If exist, the QNE appends an IP 
     address of the interface to UCRN_DISCOVERY. 
      
       o From the information contained in UCRN_DISCOVERY, the proxy 
     is able to know IP addresses of DCRN and UCRN. 
      
                                                                  
                                                                  
                                  DCRN_DISCOVERY                  
                                                                  
                      +-----+    +----+    +----+    +----+       
                      |     |--->|mQNE|--->|mQNE|--->|    |       
                      |     |    +----+    +----+    |    |       
                      |Proxy|                        | CN |       
                      |     |    +----+    +----+    |    |       
                      |     |<---|mQNE|<---|mQNE|<---|    |       
                      +-----+    +----+    +----+    +----+       
                         ^                                        
              PROXY_INIT |        UCRN_DISCOVERY                  
                         |                                        
                      +----+                                      
                      |    |                                      
                      | MN |                                      
                      |    |                                      
                      +----+                                      
                       |  |                                       
            PROXY_INIT |  | PROXY_INIT                            
                       V  V                                       
                                                                 
      
                 Figure2: Basic idea of pre CRN discovery 
      
      
     The detailed operations are described in the following sub-
     sections. 
      
      
  4.1 Mobile Node 
      
     There are some ways for MN to perform proxy discovery, e.g. MN 
     can have a table of mQNE information locally and find an 
     appropriate proxies mQNE according to candidate APs information 
     in new subnetwork. Another way is that MN sends the APs 
     information in new subnetwork to, e.g. CARD server, and obtains 
     proxies information. 
      
     After the proxy discovery, MN sends the new proxy PROXY_INIT 
     which contains, at least, current session identifier, flow 


  Sanda et al.            Expires - August 2004              [Page 5] 
  Internet-Draft                                        February 2004 
   
     identifier, QoS path direction (upstream, downstream, or bi-
     directional). 
      
     PROXY_INIT may include new care-of address (NCoA) so that new 
     proxy mQNE can perform resource reservation in advance as well 
     as CRN discovery. NCoA can be configured by MN if MN and network 
     support FMIP. Even if MN and network do not support FMIP, MN 
     which has an AP-AR mapping table locally can configure NCoA as 
     soon as it listens to AP's link layer address. This case MN 
     should select an access router (AR) which can be a new proxy 
     mQNE to perform duplicate address detection (DAD). 
      
      
  4.2 Proxy sends DCRN_DISCOVERY 
      
     Each proxy receiving PROXY_INIT from MN starts preparing CRN 
     discovery.  
     The proxy sets the information of data stream direction, flow 
     identifier(s) and session identifier(s) contained in PROXY_INIT 
     to DCRN_DISCOVERY, and sends it toward CN. A DCRN_DISCOVERY is 
     NSLP signaling. 
      
     An IP address of CN is contained in flow identifier. However, 
     the PROXY_INIT may contain CN's IP address separately in 
     addition to the other information. 
      
  4.3 Intermediate QNEs belonging to the signaling path from proxy to 
      CN 
      
     Each QNE belonging to the signaling path from proxy to CN 
     intercepts DCRN_DISCOVERY, and checks if any interface has 
     resource reservation for the pair of flow identifier and session 
     identifier for upstream. If one of interface has the reservation, 
     the QNE appends IP address of the interface to DCRN_DISCOVERY. 
      
     If DCRN_DISCOVERY does not contain a pair of flow identifier and 
     session identifier for upstream, each QNE does not carry out 
     this checking process. 
      
     By this procedure, DCRN_DISCOVERY can gather the information of 
     all overlapping interfaces belonging to current upstream QoS 
     path (from MN to CN) and expected new upstream path (from proxy 
     to CN) in order. 
                       
      
      
      
      
      
      
      
         


  Sanda et al.            Expires - August 2004              [Page 6] 
  Internet-Draft                                        February 2004 
   
                          
                          
                              current path                           
                        =======================>                     
                                             IF1       IF2           
               +--+    +----+   +----+   +----+   +----+    +--+     
               |MN|>>>>|mQNE|>>>|mQNE|>>>|mQNE|>>>|mQNE|>>>>|CN|     
               +--+    +----+   +----+  >+----+>>>+----+>>>>+--+     
                                        ^                            
                                        ^ ----->                     
                                        ^ |                          
                   +-----+     +----+   ^ |                          
                   |Proxy|>>>>>|mQNE|>>>> |                          
                   +-----+     +----+     |                          
                                          |                          
                        -------------------                          
                        DCRN_DISCOVERY                               
                                          IF=Inteface to be appended 
                                             to the message          
                          
            Figure3: current upstream path and DCRN_DISCOVERY 
      
      
  4.4 Correspondent Node 
      
     When CN receives DCRN_DISCOVERY, the CN sets the information of 
     data stream direction, flow identifier(s) and session 
     identifier(s) contained in DCRN_DISCOVERY to UCRN_DISCOVERY, and 
     sends it toward CN. A UCRN_DISCOVERY is NSLP signaling message. 
     If DCRN_DISCOVERY contains a pair of flow identifier and session 
     identifier for upstream, the CN also sets interfaces IP 
     addresses appended by intermediate QNEs belonging to the 
     signaling path from proxy to CN. 
      
      
  4.5 Intermediate QNEs belonging to the signaling path from CN to 
      proxy 
      
     Each QNE belonging to the signaling path from CN to proxy 
     intercepts UCRN_DISCOVERY, and checks if any interface has 
     resource reservation for the pair of flow identifier and session 
     identifier for downstream. If one of interface has the 
     reservation, the QNE appends IP address of the interface to 
     UCRN_DISCOVERY. 
      
     If UCRN_DISCOVERY does not contain a pair of flow identifier and 
     session identifier for downstream, each QNE does not carry out 
     this checking process. 
      
     By this procedure, DCRN_DISCOVERY can gather the information of 
     all overlapping interfaces belonging to current upstream QoS 



  Sanda et al.            Expires - August 2004              [Page 7] 
  Internet-Draft                                        February 2004 
   
     path (from MN to CN) and expected new upstream path (from proxy 
     to CN) in order. 
      
                                              
                          
                              current path                           
                        <=======================                     
                                         IF4      IF3                
               +--+    +----+   +----+   +----+   +----+    +--+     
               |MN|<<<<|mQNE|<<<|mQNE|<<<|mQNE|<<<|mQNE|<<<<|CN|     
               +--+    +----+   +----+  <+----+<<<+----+<<<<+--+     
                                        v                            
                                        v ------                     
                                        v |                          
                   +-----+     +----+   v |                          
                   |Proxy|<<<<<|mQNE|<<<< |                          
                   +-----+     +----+     |                          
                                          |                          
                        <------------------                          
                         UCRN_DISCOVERY                              
                                          IF=Inteface to be appended 
                                             to the message          
                          
           Figure4: current downstream path and UCRN_DISCOVERY 
      
      
  4.6 Proxy receives UCRN_DISCOVERY 
      
     The proxy receiving UCRN_DISCOVERY from CN checks appended 
     information in UCRN_DISCOVERY and decides CRN(s). The first 
     interface IP address appended to DCRN_DISCOVERY (and set into 
     UCRN_DISCOVERY) is DCRN, and the last interface IP address 
     appended to UCRN_DISCOVERY is UCRN. 
      
                                                                     
                  collected by             collected by              
                 DCRN_DISCOVERY           UCRN_DISCOVERY             
                <===============>        <===============>           
                                                                     
        +------+--------+--------+------+--------+--------+          
        |up-   |IP addr.|IP addr.|down- |IP addr.|IP addr.|          
        |stream| of IF1 | of IF2 |stream| of IF1 | of IF2 |          
        +------+--------+--------+------+--------+--------+          
                                                                     
                   ^                                 ^               
                   |                                 |               
                  DCRN                              UCRN             
                                                                     
      
               Figure5: collected information and DCRN/UCRN 
      
      


  Sanda et al.            Expires - August 2004              [Page 8] 
   

     UCRN/DCRN information can be used in several ways for new QoS 
     path establishment. The proxy may send this information to MN so 
     that MN can embed them in RESERVE message after handover. 
      
     It is possible for the proxy to keep this information. In this 
     case the proxy can start new QoS path establishment soon after 
     handover without waiting for RESERVE message from MN. The proxy 
     can also start new QoS path establishment before handover if the 
     proxy obtains MN's NCoA in advance. Current QoS context can be 
     obtained, for instance, from discovered UCRN/DCRN. 
      
     For the purposes above, it is required for RESERVE message to 
     include IP addresses of UCRN/DCRN. It is also required for UCRN 
     to translate the RESERVE (create) message into RESERVE (update) 
     message and vice versa for DCRN in order to avoid duplicate 
     reservation of common QoS path (CN-UCRN/DCRN). 
      
      
  5. Signaling messages for fast CRN discovery 
      
     A DCRN_DISCOVERY and UCRN_DISCOVERY may be extended existing QoS 
     NSLP message, such as QUERY and its RESPONSE [7]. This case, 
     proxy can obtain downstream path information simultaneously with 
     CRN discovery. 
      
      
  6. Security Considerations 
      
     Security issues are addressed in section 12 of [manyfolks] but 
     they are not covering candidate proxies (mQNEs) which are 
     described in this document. Proper security handling must be 
     provided in candidate proxy discovery. It is also required to 
     consider the issues caused by sending PROXY_INIT which includes 
     session and flow identifiers from MN to candidate proxies, such 
     as session/reservation ownership. 
      
     Future draft will include these issues. 
      
      
  References 
      
     1. Bradner, S., "The Internet Standards Process -- Revision 3", 
     BCP 9, RFC 2026, October 1996. 
      
     2. Bradner, S., "Key words for use in RFCs to Indicate 
     Requirement Levels", BCP 14, RFC 2119, March 1997 
      
     3  X. Fu, et al., "Mobility Issues in Next Steps in Signaling 
     (NSIS)", Internet Draft (work in progress),  
     draft-fu-nsis-mobility-01.txt, October 2003 
      



  Sanda et al.            Expires - August 2004              [Page 1] 
  Internet-Draft                                        February 2004 
   
     4  H. Chaskar et al., "Requirements of a Quality of Service 
     (QoS) Solution for Mobile IP", RFC3583, September 2003 
      
     5  S. Lee, et al., "Mobility Functions in the QoS-NSLP", 
     Internet Draft (work in progress), draft-lee-nsis-mobility-nslp-
     01.txt, October 2003 
      
     6  Roland Bless, et al., "Mobility and Internet Signaling 
     Protocols", Internet Draft (work in progress), draft-manyfolks-
     signaling-protocol-mobility-00.txt, January 2004 
      
     7  Sven Van den Bosch (Editor), "NSLP for Quality-of-Service 
     signaling", Internet Draft (work in progress), draft-ietf-nsis-
     qos-nslp-01.txt, October 2003 
      
      
  Author's Addresses 
      
     Takako Sanda 
     Panasonic (Matsushita Electric Industrial Co., Ltd.) 
     5-3, Hikarino-oka, Yokosuka City, Kanagawa 239-0847, Japan 
     Phone: (+81) 46 840 5764 
     Email: sanda.takako@jp.panasonic.com 
      
     Toyoki Ue 
     Panasonic (Matsushita Electric Industrial Co., Ltd.) 
     5-3, Hikarino-oka, Yokosuka City, Kanagawa 239-0847, Japan 
     Phone: (+81) 46 840 5816 
     Email: ue.toyoki@jp.panasonic.com 
      
      
     Full Copyright Statement 
      
     Copyright (C) The Internet Society (2003).  All Rights Reserved. 
      
     This document and translations of it may be copied and furnished 
     to others, and derivative works that comment on or otherwise 
     explain it or assist in its implementation may be prepared, 
     copied, published and distributed, in whole or in part, without 
     restriction of any kind, provided that the above copyright 
     notice and this paragraph are included on all such copies and 
     derivative works.  However, this document itself may not be 
     modified in any way, such as by removing the copyright notice or 
     references to the Internet Society or other Internet 
     organizations, except as needed for the purpose of developing 
     Internet standards in which case the procedures for copyrights 
     defined in the Internet Standards process must be followed, or 
     as required to translate it into languages other than English. 
      
     The limited permissions granted above are perpetual and will not 
     be revoked by the Internet Society or its successors or assigns. 
      


  Sanda et al.            Expires - August 2004             [Page 10] 
  Internet-Draft                                        February 2004 
   
     This document and the information contained herein is provided 
     on an "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET 
     ENGINEERING TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR 
     IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE 
     OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY 
     IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A 
     PARTICULAR PURPOSE. 















































  Sanda et al.            Expires - August 2004             [Page 11] 