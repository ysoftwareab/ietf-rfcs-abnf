Internet Engineering Task Force                                 H. Zhao
Internet Draft                                                 Ericsson
Intended status: Standards Track                         August 3, 2017
Expires: February 2018



                A Yang Data Model for IGMP and MLD Snooping
               draft-zhao-pim-igmp-mld-snooping-yang-02.txt




Abstract

   This document defines a YANG data model that can be used to
configure and manage Internet Group Management Protocol (IGMP) and
Multicast Listener Discovery (MLD) Snooping devices.

Status of this Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html

   This Internet-Draft will expire on Feb 3, 2018.

Copyright Notice

   Copyright (c) 2017 IETF Trust and the persons identified as the
   document authors. All rights reserved.





Zhao                   Expires Feb 3, 2018                [Page 1]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017


   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document. Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document. Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.



Table of Contents


   1. Introduction...................................................2
      1.1. Terminology...............................................2
      1.2. Tree Diagrams.............................................3
   2. Design of Data Model...........................................3
      2.1. Overview..................................................3
      2.2. IGMP and MLD Snooping Configuration.......................3
      2.3. IGMP and MLD Snooping Operational State..................10
      2.4. IGMP and MLD Snooping RPC................................18
   3. IGMP and MLD Snooping YANG Module.............................18
   4. Security Considerations.......................................42
   5. IANA Considerations...........................................42
   6. Normative References..........................................42

1. Introduction

   This document defines a YANG [RFC6020] data model for the management
   of Internet Group Management Protocol (IGMP) and Multicast Listener
   Discovery (MLD) Snooping devices.

   This data model includes configuration data and state data (status
   information and counters for the collection of statistics).

1.1. Terminology

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in BCP
   14 [RFC2119].

   The terminology for describing YANG data models is found in[RFC6020].




Zhao                   Expires Feb 3, 2018                [Page 2]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017


1.2. Tree Diagrams

   A simplified graphical representation of the data model is used in
   this document.  The meaning of the symbols in these diagrams is as
   follows:

   o  Brackets "[" and "]" enclose list keys.

   o  Abbreviations before data node names: "rw" means configuration
   (read-write), and "ro" means state data (read-only).

   o  Symbols after data node names: "?" means an optional node, "!"
   means a presence container, and "*" denotes a list and leaf-list.

   o  Parentheses enclose choice and case nodes, and case nodes are also
   marked with a colon (":").

   o  Ellipsis ("...") stands for contents of subtrees that are not
   shown.

2. Design of Data Model

   The model covers Considerations for Internet Group Management
   Protocol (IGMP) and Multicast Listener Discovery (MLD) Snooping
   Switches [RFC4541].

   The goal of this document is to define a data model that provides a
   common user interface to IGMP and MLD Snooping.  There is very
   information that is designated as "mandatory", providing freedom for
   vendors to adapt this data model to their respective product
   implementations.

2.1. Overview

   The IGMP and MLD Snooping YANG module defined in this document has
   all the common building blocks for the IGMP and MLD Snooping
   protocol. The YANG module includes IGMP and MLD Snooping
   configuration data, Operational state data, and the RPC method for
   clearing the specified IGMP and MLD Snooping statistics.



2.2. IGMP and MLD Snooping Configuration

   The IGMP and MLD Snooping modules define the configuration in a
   three-level hierarchy as listed below:



Zhao                   Expires Feb 3, 2018                [Page 3]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017


   Global level: IGMP MLD Snooping configuration attributes for the
   entire routing instance

   VLANs-level: IGMP MLD configuration attributes specific to all VLANs.

   VLAN-level: IGMP MLD configuration attributes specific to the given
   VLAN.



   module: ietf-igmp-mld-snooping

     augment /rt:routing/rt:control-plane-protocols:

       +--rw igmp-snooping

          +--rw global

          |  +--rw enable?   boolean {global-admin-enable}?

          +--rw vlans

             +--rw (last-member-query-interval)?

             |  +--:(last-member-query-interval-basic)

             |  |  +--rw last-member-query-interval-basic?      uint16

             |  +--:(last-member-query-interval-extended)

             |     +--rw last-member-query-interval-extended?   uint16 {vlan-last-
   member-query-interval-extended}?

             +--rw (query-interval)?

             |  +--:(query-interval-basic)

             |  |  +--rw query-interval-basic?                  uint16

             |  +--:(query-interval-extended)

             |     +--rw query-interval-extended?               uint16 {vlan-query-
   interval-extended}?

             +--rw (query-max-response-time)?

             |  +--:(query-max-response-time-basic)


Zhao                   Expires Feb 3, 2018                [Page 4]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017


             |  |  +--rw query-max-response-time-basic?         uint16

             |  +--:(query-max-response-time-extended)

             |     +--rw query-max-response-time-extended?      uint16 {vlan-query-
   max-response-time-extended}?

             +--rw require-router-alert?                  boolean {require-router-
   alert}?

             +--rw (robustness-variable)?

             |  +--:(robustness-variable-basic)

             |  |  +--rw robustness-variable-basic?             uint8

             |  +--:(robustness-variable-extended)

             |     +--rw robustness-variable-extended?          uint8 {vlan-
   robustness-variable-extended}?

             +--rw version?                               uint8

             +--rw vlan* [vlan-id]

                +--rw vlan-id                                uint16

                +--rw enable?                                boolean {admin-enable}?

                +--rw forwarding-mode?                       enumeration

                +--rw explicit-tracking?                     string

                +--rw send-query?                            boolean

                +--rw mrouter-aging-time?                    uint16

                +--rw fast-leave?                            empty {fast-leave}?

                +--rw (last-member-query-interval)?

                |  +--:(last-member-query-interval-basic)

                |  |  +--rw last-member-query-interval-basic?      uint16

                |  +--:(last-member-query-interval-extended)



Zhao                   Expires Feb 3, 2018                [Page 5]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017


                |     +--rw last-member-query-interval-extended?   uint16 {vlan-last-
   member-query-interval-extended}?

                +--rw (query-interval)?

                |  +--:(query-interval-basic)

                |  |  +--rw query-interval-basic?                  uint16

                |  +--:(query-interval-extended)

                |     +--rw query-interval-extended?               uint16 {vlan-
   query-interval-extended}?

                +--rw (query-max-response-time)?

                |  +--:(query-max-response-time-basic)

                |  |  +--rw query-max-response-time-basic?         uint16

                |  +--:(query-max-response-time-extended)

                |     +--rw query-max-response-time-extended?      uint16 {vlan-
   query-max-response-time-extended}?

                +--rw require-router-alert?                  boolean {require-router-
   alert}?

                +--rw (robustness-variable)?

                |  +--:(robustness-variable-basic)

                |  |  +--rw robustness-variable-basic?             uint8

                |  +--:(robustness-variable-extended)

                |     +--rw robustness-variable-extended?          uint8 {vlan-
   robustness-variable-extended}?

                +--rw version?                               uint8

                +--rw static-mrouter-interface*              if:interface-ref
   {static-l2-multicast-group}?

                +--rw querier?                               inet:ipv4-address

                +--rw ssm-map* [source-addr group-addr-prefix] {ssm-map}?


Zhao                   Expires Feb 3, 2018                [Page 6]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017


                |  +--rw source-addr          ssm-map-ipv4-addr-type

                |  +--rw group-addr-prefix    inet:ipv4-prefix

                +--rw static-l2-multicast-group* [group source-addr] {static-l2-
   multicast-group}?

                   +--rw group          inet:ipv4-address

                   +--rw source-addr    source-ipv4-addr-type

                   +--rw interface?     if:interface-ref

     augment /rt:routing/rt:control-plane-protocols:

       +--rw mld-snooping

          +--rw global

          |  +--rw enable?   boolean {global-admin-enable}?

          +--rw vlans

             +--rw (last-member-query-interval)?

             |  +--:(last-member-query-interval-basic)

             |  |  +--rw last-member-query-interval-basic?      uint16

             |  +--:(last-member-query-interval-extended)

             |     +--rw last-member-query-interval-extended?   uint16 {vlan-last-
   member-query-interval-extended}?

             +--rw (query-interval)?

             |  +--:(query-interval-basic)

             |  |  +--rw query-interval-basic?                  uint16

             |  +--:(query-interval-extended)

             |     +--rw query-interval-extended?               uint16 {vlan-query-
   interval-extended}?

             +--rw (query-max-response-time)?



Zhao                   Expires Feb 3, 2018                [Page 7]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017


             |  +--:(query-max-response-time-basic)

             |  |  +--rw query-max-response-time-basic?         uint16

             |  +--:(query-max-response-time-extended)

             |     +--rw query-max-response-time-extended?      uint16 {vlan-query-
   max-response-time-extended}?

             +--rw require-router-alert?                  boolean {require-router-
   alert}?

             +--rw (robustness-variable)?

             |  +--:(robustness-variable-basic)

             |  |  +--rw robustness-variable-basic?             uint8

             |  +--:(robustness-variable-extended)

             |     +--rw robustness-variable-extended?          uint8 {vlan-
   robustness-variable-extended}?

             +--rw version?                               uint8

             +--rw vlan* [vlan-id]

                +--rw vlan-id                                uint16

                +--rw enable?                                boolean {admin-enable}?

                +--rw forwarding-mode?                       enumeration

                +--rw explicit-tracking?                     string

                +--rw send-query?                            boolean

                +--rw mrouter-aging-time?                    uint16

                +--rw fast-leave?                            empty {fast-leave}?

                +--rw (last-member-query-interval)?

                |  +--:(last-member-query-interval-basic)

                |  |  +--rw last-member-query-interval-basic?      uint16



Zhao                   Expires Feb 3, 2018                [Page 8]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017


                |  +--:(last-member-query-interval-extended)

                |     +--rw last-member-query-interval-extended?   uint16 {vlan-last-
   member-query-interval-extended}?

                +--rw (query-interval)?

                |  +--:(query-interval-basic)

                |  |  +--rw query-interval-basic?                  uint16

                |  +--:(query-interval-extended)

                |     +--rw query-interval-extended?               uint16 {vlan-
   query-interval-extended}?

                +--rw (query-max-response-time)?

                |  +--:(query-max-response-time-basic)

                |  |  +--rw query-max-response-time-basic?         uint16

                |  +--:(query-max-response-time-extended)

                |     +--rw query-max-response-time-extended?      uint16 {vlan-
   query-max-response-time-extended}?

                +--rw require-router-alert?                  boolean {require-router-
   alert}?

                +--rw (robustness-variable)?

                |  +--:(robustness-variable-basic)

                |  |  +--rw robustness-variable-basic?             uint8

                |  +--:(robustness-variable-extended)

                |     +--rw robustness-variable-extended?          uint8 {vlan-
   robustness-variable-extended}?

                +--rw version?                               uint8

                +--rw static-mrouter-interface*              if:interface-ref
   {static-l2-multicast-group}?

                +--rw querier?                               inet:ipv6-address


Zhao                   Expires Feb 3, 2018                [Page 9]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017


                +--rw ssm-map* [source-addr group-addr-prefix] {ssm-map}?

                |  +--rw source-addr          ssm-map-ipv6-addr-type

                |  +--rw group-addr-prefix    inet:ipv6-prefix

                +--rw static-l2-multicast-group* [group source-addr] {static-l2-
   multicast-group}?

                   +--rw group          inet:ipv6-address

                   +--rw source-addr    source-ipv6-addr-type

                   +--rw interface?     if:interface-ref

2.3. IGMP and MLD Snooping Operational State

   The IGMP and MLD Snooping module contains operational state
   information also in a three-level hierarchy as mentioned earlier.

   Global level: IGMP MLD Snooping operational state attributes for the
   entire routing instance

   VLANs-level: IGMP MLD Snooping operational state attributes for all
   VLANs.

   VLAN-level: IGMP MLD Snooping operational state attributes specific
   to the given VLAN.

   module: ietf-igmp-mld-snooping

      +--rw configuration

      ...

      augment /rt:routing-state/rt:control-plane-protocols:

       +--ro igmp-snooping

          +--ro global

          |  +--ro enable?          boolean {global-admin-enable}?

          |  +--ro entries-count?   uint32

          +--ro vlans



Zhao                   Expires Feb 3, 2018               [Page 10]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017


             +--ro (last-member-query-interval)?

             |  +--:(last-member-query-interval-basic)

             |  |  +--ro last-member-query-interval-basic?      uint16

             |  +--:(last-member-query-interval-extended)

             |     +--ro last-member-query-interval-extended?   uint16 {vlan-last-
   member-query-interval-extended}?

             +--ro (query-interval)?

             |  +--:(query-interval-basic)

             |  |  +--ro query-interval-basic?                  uint16

             |  +--:(query-interval-extended)

             |     +--ro query-interval-extended?               uint16 {vlan-query-
   interval-extended}?

             +--ro (query-max-response-time)?

             |  +--:(query-max-response-time-basic)

             |  |  +--ro query-max-response-time-basic?         uint16

             |  +--:(query-max-response-time-extended)

             |     +--ro query-max-response-time-extended?      uint16 {vlan-query-
   max-response-time-extended}?

             +--ro require-router-alert?                  boolean {require-router-
   alert}?

             +--ro (robustness-variable)?

             |  +--:(robustness-variable-basic)

             |  |  +--ro robustness-variable-basic?             uint8

             |  +--:(robustness-variable-extended)

             |     +--ro robustness-variable-extended?          uint8 {vlan-
   robustness-variable-extended}?



Zhao                   Expires Feb 3, 2018               [Page 11]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017


             +--ro version?                               uint8

             +--ro vlan* [vlan-id]

                +--ro vlan-id                                uint16

                +--ro enable?                                boolean {admin-enable}?

                +--ro forwarding-mode?                       enumeration

                +--ro explicit-tracking?                     string

                +--ro send-query?                            boolean

                +--ro mrouter-aging-time?                    uint16

                +--ro fast-leave?                            empty {fast-leave}?

                +--ro (last-member-query-interval)?

                |  +--:(last-member-query-interval-basic)

                |  |  +--ro last-member-query-interval-basic?      uint16

                |  +--:(last-member-query-interval-extended)

                |     +--ro last-member-query-interval-extended?   uint16 {vlan-last-
   member-query-interval-extended}?

                +--ro (query-interval)?

                |  +--:(query-interval-basic)

                |  |  +--ro query-interval-basic?                  uint16

                |  +--:(query-interval-extended)

                |     +--ro query-interval-extended?               uint16 {vlan-
   query-interval-extended}?

                +--ro (query-max-response-time)?

                |  +--:(query-max-response-time-basic)

                |  |  +--ro query-max-response-time-basic?         uint16

                |  +--:(query-max-response-time-extended)


Zhao                   Expires Feb 3, 2018               [Page 12]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017


                |     +--ro query-max-response-time-extended?      uint16 {vlan-
   query-max-response-time-extended}?

                +--ro require-router-alert?                  boolean {require-router-
   alert}?

                +--ro (robustness-variable)?

                |  +--:(robustness-variable-basic)

                |  |  +--ro robustness-variable-basic?             uint8

                |  +--:(robustness-variable-extended)

                |     +--ro robustness-variable-extended?          uint8 {vlan-
   robustness-variable-extended}?

                +--ro version?                               uint8

                +--ro static-mrouter-interface*              if:interface-ref
   {static-l2-multicast-group}?

                +--ro querier?                               inet:ipv4-address

                +--ro ssm-map* [source-addr group-addr-prefix] {ssm-map}?

                |  +--ro source-addr          ssm-map-ipv4-addr-type

                |  +--ro group-addr-prefix    inet:ipv4-prefix

                +--ro static-l2-multicast-group* [group source-addr] {static-l2-
   multicast-group}?

                |  +--ro group          inet:ipv4-address

                |  +--ro source-addr    source-ipv4-addr-type

                |  +--ro interface?     if:interface-ref

                +--ro mrouter-interface*                     if:interface-ref

                +--ro port-info*                             if:interface-ref

                +--ro mac-address*                           yang:phys-address

                +--ro group* [address]



Zhao                   Expires Feb 3, 2018               [Page 13]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017


                   +--ro address          inet:ipv4-address

                   +--ro expire?          uint32

                   +--ro up-time?         uint32

                   +--ro interface?       if:interface-ref

                   +--ro last-reporter?   inet:ipv4-address

                   +--ro source* [address]

                      +--ro address          inet:ipv4-address

                      +--ro up-time?         uint32

                      +--ro expire?          uint32

                      +--ro last-reporter?   inet:ipv4-address

     augment /rt:routing-state/rt:control-plane-protocols:

       +--ro mld-snooping

          +--ro global

          |  +--ro enable?          boolean {global-admin-enable}?

          |  +--ro entries-count?   uint32

          +--ro vlans

             +--ro (last-member-query-interval)?

             |  +--:(last-member-query-interval-basic)

             |  |  +--ro last-member-query-interval-basic?      uint16

             |  +--:(last-member-query-interval-extended)

             |     +--ro last-member-query-interval-extended?   uint16 {vlan-last-
   member-query-interval-extended}?

             +--ro (query-interval)?

             |  +--:(query-interval-basic)



Zhao                   Expires Feb 3, 2018               [Page 14]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017


             |  |  +--ro query-interval-basic?                  uint16

             |  +--:(query-interval-extended)

             |     +--ro query-interval-extended?               uint16 {vlan-query-
   interval-extended}?

             +--ro (query-max-response-time)?

             |  +--:(query-max-response-time-basic)

             |  |  +--ro query-max-response-time-basic?         uint16

             |  +--:(query-max-response-time-extended)

             |     +--ro query-max-response-time-extended?      uint16 {vlan-query-
   max-response-time-extended}?

             +--ro require-router-alert?                  boolean {require-router-
   alert}?

             +--ro (robustness-variable)?

             |  +--:(robustness-variable-basic)

             |  |  +--ro robustness-variable-basic?             uint8

             |  +--:(robustness-variable-extended)

             |     +--ro robustness-variable-extended?          uint8 {vlan-
   robustness-variable-extended}?

             +--ro version?                               uint8

             +--ro vlan* [vlan-id]

                +--ro vlan-id                                uint16

                +--ro enable?                                boolean {admin-enable}?

                +--ro forwarding-mode?                       enumeration

                +--ro explicit-tracking?                     string

                +--ro send-query?                            boolean

                +--ro mrouter-aging-time?                    uint16


Zhao                   Expires Feb 3, 2018               [Page 15]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017


                +--ro fast-leave?                            empty {fast-leave}?

                +--ro (last-member-query-interval)?

                |  +--:(last-member-query-interval-basic)

                |  |  +--ro last-member-query-interval-basic?      uint16

                |  +--:(last-member-query-interval-extended)

                |     +--ro last-member-query-interval-extended?   uint16 {vlan-last-
   member-query-interval-extended}?

                +--ro (query-interval)?

                |  +--:(query-interval-basic)

                |  |  +--ro query-interval-basic?                  uint16

                |  +--:(query-interval-extended)

                |     +--ro query-interval-extended?               uint16 {vlan-
   query-interval-extended}?

                +--ro (query-max-response-time)?

                |  +--:(query-max-response-time-basic)

                |  |  +--ro query-max-response-time-basic?         uint16

                |  +--:(query-max-response-time-extended)

                |     +--ro query-max-response-time-extended?      uint16 {vlan-
   query-max-response-time-extended}?

                +--ro require-router-alert?                  boolean {require-router-
   alert}?

                +--ro (robustness-variable)?

                |  +--:(robustness-variable-basic)

                |  |  +--ro robustness-variable-basic?             uint8

                |  +--:(robustness-variable-extended)




Zhao                   Expires Feb 3, 2018               [Page 16]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017


                |     +--ro robustness-variable-extended?          uint8 {vlan-
   robustness-variable-extended}?

                +--ro version?                               uint8

                +--ro static-mrouter-interface*              if:interface-ref
   {static-l2-multicast-group}?

                +--ro querier?                               inet:ipv6-address

                +--ro ssm-map* [source-addr group-addr-prefix] {ssm-map}?

                |  +--ro source-addr          ssm-map-ipv6-addr-type

                |  +--ro group-addr-prefix    inet:ipv6-prefix

                +--ro static-l2-multicast-group* [group source-addr] {static-l2-
   multicast-group}?

                |  +--ro group          inet:ipv6-address

                |  +--ro source-addr    source-ipv6-addr-type

                |  +--ro interface?     if:interface-ref

                +--ro mrouter-interface*                     if:interface-ref

                +--ro port-info*                             if:interface-ref

                +--ro mac-address*                           yang:phys-address

                +--ro group* [address]

                   +--ro address          inet:ipv6-address

                   +--ro expire?          uint32

                   +--ro up-time?         uint32

                   +--ro interface?       if:interface-ref

                   +--ro last-reporter?   inet:ipv6-address

                   +--ro source* [address]

                      +--ro address          inet:ipv6-address



Zhao                   Expires Feb 3, 2018               [Page 17]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017


                      +--ro up-time?         uint32

                      +--ro expire?          uint32

                      +--ro last-reporter?   inet:ipv6-address





2.4. IGMP and MLD Snooping RPC

   IGMP and MLD Snooping RPC clears the specified IGMP and MLD Snooping
   statistics.

   rpcs:
       +---x clear-igmp-snooping-statistics {rpc-clear-statistics}?
       |  +---w input
       |     +---w vlan-id?   uint16
       |     +---w group?     inet:ipv4-address
       |     +---w source?    inet:ipv4-address
       +---x clear-mld-snooping-statistics {rpc-clear-statistics}?
          +---w input
             +---w vlan-id?   uint16
             +---w group?     inet:ipv6-address
             +---w source?    inet:ipv6-address

3. IGMP and MLD Snooping YANG Module

   <CODE BEGINS> file "ietf-igmp-mld-snooping@2017-05-05.yang"
   module ietf-igmp-mld-snooping {
         namespace "urn:ietf:params:xml:ns:yang:ietf-igmp-mld-snooping";
         // replace with IANA namespace when assigned
         prefix igmp-mld-snooping;

         import ietf-inet-types {
           prefix "inet";
         }

         import ietf-yang-types {
           prefix "yang";
         }

         import ietf-interfaces {
           prefix "if";
         }



Zhao                   Expires Feb 3, 2018               [Page 18]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017


        import ietf-routing {
           prefix "rt";
         }

         organization
           "IETF PIM Working Group";

         contact
           "WG Web:   <http://tools.ietf.org/wg/pim/>
            WG List:  <mailto:pim@ietf.org>

            WG Chair: Stig Venaas
                      <mailto:stig@venaas.com>

            WG Chair: Mike McBride
                      <mailto:mmcbride7@gmail.com>

            Editors:  Hongji Zhao
                  <mailto:hongji.zhao@ericsson.com> ";

         description
           "The module defines a collection of YANG definitions common
   for
           IGMP and MLD Snooping.";

        revision 2017-05-05 {
           description
             "augment /rt:routing/rt:control-plane-protocols
            augment /rt:routing-state/rt:control-plane-protocols";
           reference
             "RFC XXXX: A YANG Data Model for IGMP and MLD Snooping";
         }

         revision 2017-02-05 {
           description
             "Initial revision.";
           reference
             "RFC XXXX: A YANG Data Model for IGMP and MLD Snooping";
         }

         /*
          * Features
          */
         feature global-admin-enable {
           description
             "Support global configuration to enable or disable IGMP and
   MLD Snooping.";


Zhao                   Expires Feb 3, 2018               [Page 19]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017


         }

        feature global-vlan-config {
           description
             "Support global configuration applied for all vlans.";
         }

         feature admin-enable {
           description
             "Support configuration to enable or disable protocol under
   VLAN instance.";
         }

         feature fast-leave {
           description
             "Support configuration of fast-leave.";
         }

         feature join-group {
           description
             "Support configuration of join-group.";
         }

         feature require-router-alert {
           description
             "Support configuration of require-router-alert.";
         }

         feature ssm-map {
           description
             "Support configuration of ssm-map.";
         }

         feature static-l2-multicast-group {
           description
             "Support configuration of L2 multicast static-group.";
         }

         feature per-vlan-config {
           description
             "Support configuration of each VLAN.";
         }

        feature rpc-clear-statistics {
           description
             "Support to clear statistics by RPC for IGMP and MLD
   Snooping.";


Zhao                   Expires Feb 3, 2018               [Page 20]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017


         }

         feature vlan-last-member-query-interval-extended {
           description
             "Support configuration of vlan last member query interval
              different value range.";
         }

         feature vlan-query-interval-extended {
           description
             "Support configuration of vlan query interval
              different value range.";
         }

         feature vlan-query-max-response-time-extended {
           description
             "Support configuration of vlan query max response time
              different value range.";
         }

         feature vlan-robustness-variable-extended {
           description
             "Support configuration of vlan robustness-variable
              different value range.";
         }

         /*
          * Typedefs
          */
         typedef ssm-map-ipv4-addr-type {
           type union {
             type enumeration {
               enum 'policy' {
                 description
                 "Source address in SSM map policy.";
               }
             }
             type inet:ipv4-address;
           }
           description
             "Source IPV4 address type for SSM map.";
         } // ssm-map-ipv4-addr-type

         typedef ssm-map-ipv6-addr-type {
           type union {
             type enumeration {
               enum 'policy' {


Zhao                   Expires Feb 3, 2018               [Page 21]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017


                 description
                 "Source address in SSM map policy.";
               }
             }
             type inet:ipv6-address;
           }
           description
             "Source IPV6 address type for SSM map.";
         } // ssm-map-ipv6-addr-type

         typedef source-ipv4-addr-type {
           type union {
             type enumeration {
               enum '*' {
                 description
                 "Any source address.";
               }
             }
             type inet:ipv4-address;
           }
           description
             "Multicast source IP address type.";
         } // source-ipv4-addr-type

         typedef source-ipv6-addr-type {
           type union {
             type enumeration {
               enum '*' {
                 description
                 "Any source address.";
               }
             }
             type inet:ipv6-address;
           }
           description
             "Multicast source IP address type.";
         } // source-ipv6-addr-type


         /*
          * Identities
          */

         /*
          * Groupings
          */
         grouping global-config-attributes {


Zhao                   Expires Feb 3, 2018               [Page 22]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017


           description "Global configuration of IGMP and MLD Snooping.";

           leaf enable {
             if-feature global-admin-enable;
             type boolean;

             description
      "Set the value to true to enable IGMP or MLD Snooping in the
   global view";
           }


         } // global-config-attributes

         grouping global-state-attributes {
           description  "Global attributes of IGMP and MLD Snooping
   state";
           leaf entries-count {
             type uint32;
             description
               "The number of L2 multicast entries in IGMP and MLD
   Snooping.";
           }


         } // global-state-attributes

        grouping vlans-config-attributes-igmp-mld-snooping {
           description
             "Configuration attributes applied to vlans whose
              per vlan attributes are not existing.";


            choice last-member-query-interval {
             description
               "Different vendors can restrict different range to the
                Last Member Query Interval parameter.";

             leaf last-member-query-interval-basic {
               type uint16 {
                 range "1..65535";
               }
               units seconds;
               default 1;
               description
                 "Last Member Query Interval, which may be tuned to
   modify the


Zhao                   Expires Feb 3, 2018               [Page 23]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017


                  leave latency of the network.";
                reference "RFC3376. Sec. 8.8.";
             }
             leaf last-member-query-interval-extended {
               if-feature vlan-last-member-query-interval-extended;
               type uint16;
               units seconds;
               default 1;
               description
                 "Last Member Query Interval, which may be tuned to
   modify the
                  leave latency of the network.";
                reference "RFC3376. Sec. 8.8.";
             }
           }

         choice query-interval {
             description
               "Different vendors can restrict different range to the
                Query Interval parameter.";

             leaf query-interval-basic {
               type uint16 {
                 range "1..31744";
               }
               units seconds;
               default 125;
               description
                 "The Query Interval is the interval between General
   Queries
                  sent by the Querier.";
               reference "RFC3376. Sec. 4.1.7, 8.2, 8.14.2.";
             }
             leaf query-interval-extended {
               if-feature vlan-query-interval-extended;
               type uint16;
               units seconds;
               default 125;
               description
                 "The Query Interval is the interval between General
   Queries
                  sent by the Querier.";
               reference "RFC3376. Sec. 4.1.7, 8.2, 8.14.2.";
             }
           }

           choice query-max-response-time {


Zhao                   Expires Feb 3, 2018               [Page 24]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017


             description
               "Different vendors can restrict different range to the
                Query maximum response time parameter.";

             leaf query-max-response-time-basic {
               type uint16 {
                 range "1..65535";
               }
               units seconds;
               default 10;
               description
                 "Query maximum response time specifies the maximum time
                  allowed before sending a responding report.";
                  reference "RFC3376. Sec. 4.1.1, 8.3, 8.14.3.";
             }
             leaf query-max-response-time-extended {
               if-feature vlan-query-max-response-time-extended;
               type uint16;
               units seconds;
               default 10;
               description
                 "Query maximum response time specifies the maximum time
                  allowed before sending a responding report.";
               reference "RFC3376. Sec. 4.1.1, 8.3, 8.14.3.";
             }
           }

           leaf require-router-alert {
             if-feature require-router-alert;
             type boolean;
           default false;
             description
               "When the value is true, router alert exists in the IP
   head of IGMP or MLD packet.";
           }

           choice robustness-variable {
             description
               "Different vendors can restrict different range to the
                Robustness Variable parameter.";

             leaf robustness-variable-basic {
               type uint8 {
                 range "2..7";
               }
               default 2;
               description


Zhao                   Expires Feb 3, 2018               [Page 25]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017


                 "Querier's Robustness Variable allows tuning for the
   expected
                  packet loss on a network.";
               reference "RFC3376. Sec. 4.1.6, 8.1, 8.14.1.";
             }
             leaf robustness-variable-extended {
               if-feature vlan-robustness-variable-extended;
               type uint8;
               default 2;
               description
                 "Querier's Robustness Variable allows tuning for the
   expected
                  packet loss on a network.";
               reference "RFC3376. Sec. 4.1.6, 8.1, 8.14.1.";
             }
           }

           leaf version {
             type uint8 {
               range "1..3";
             }
             description "IGMP and MLD Snooping version.";
           }

         } // vlans-config-attributes-igmp-mld-snooping


         grouping vlan-config-attributes-igmp-snooping {
           description "IGMP snooping configuration of each VLAN.";

           uses vlan-config-attributes-igmp-mld-snooping;

         leaf querier {
             type inet:ipv4-address;
             description "Use the IGMP snooping querier to support IGMP
   snooping in a VLAN where PIM and IGMP are not configured.
                     The IP address is used as the source address in
   messages.";
           }

           list ssm-map {

             if-feature ssm-map;
             key "source-addr group-addr-prefix";
           description "SSM mapping list for igmp snooping";

             leaf source-addr {


Zhao                   Expires Feb 3, 2018               [Page 26]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017


               type ssm-map-ipv4-addr-type;
               description
                 "Source IP address.";
             }
             leaf group-addr-prefix {
               type inet:ipv4-prefix;
               description
                 "Multicast group IP address for ssm-map in the format
   of x.x.x.x/x ";
             }
           }

          list static-l2-multicast-group {
            if-feature static-l2-multicast-group;
            key "group source-addr";
                description
                  "A static multicast route, (*,G) or (S,G).";

            leaf group {
               type inet:ipv4-address;
               description
               "Multicast group IP address";
            }

            leaf source-addr {
                  type source-ipv4-addr-type;
                  description
                    "Multicast source IP address.";
                }

            leaf interface {
               type if:interface-ref;
               description
               "Interface for static multicast group";
            }

          } // static-l2-multicast-group

         } // vlan-config-attributes-igmp-snooping

         grouping vlan-config-attributes-igmp-mld-snooping {
           description
             "IGMP and MLD Snooping configuration of each VLAN.";

           leaf enable {
             if-feature admin-enable;
             type boolean;


Zhao                   Expires Feb 3, 2018               [Page 27]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017


             description
               "Set the value to true to enable IGMP and MLD Snooping in
   the VLAN instance.";
           }

         leaf forwarding-mode {
            type enumeration {
               enum "mac" {
                description
                  "";
               }
               enum "ip"  {
                description
                  "";
               }
            }
            description "The default forwarding mode for IGMP and MLD
   Snooping is ip.";
         }

         leaf explicit-tracking {
            when "../version = 3";
            type string;
            description "Tracks IGMPv3 membership reports from
   individual hosts for each port of each VLAN. ";
         }

         leaf send-query {
            type boolean;
            default true;
            description "Enable quick response for topo changes";
         }


         leaf mrouter-aging-time {
            type uint16 ;
            default 180;
            description "Aging time for mrouter interface";
         }


           leaf fast-leave {
             if-feature fast-leave;
             type empty;
             description
               "When fast leave is enabled, the IGMP software assumes
   that no more than one host is present on each VLAN port.";


Zhao                   Expires Feb 3, 2018               [Page 28]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017


           }

           choice last-member-query-interval {
             description
               "Different vendors can restrict different range to the
                Last Member Query Interval parameter.";

             leaf last-member-query-interval-basic {
               type uint16 {
                 range "1..65535";
               }
               units seconds;
               default 1;
               description
                 "Last Member Query Interval, which may be tuned to
   modify the
                  leave latency of the network.";
                reference "RFC3376. Sec. 8.8.";
             }
             leaf last-member-query-interval-extended {
               if-feature vlan-last-member-query-interval-extended;
               type uint16;
               units seconds;
               default 1;
               description
                 "Last Member Query Interval, which may be tuned to
   modify the
                  leave latency of the network.";
                reference "RFC3376. Sec. 8.8.";
             }
           }

         choice query-interval {
             description
               "Different vendors can restrict different range to the
                Query Interval parameter.";

             leaf query-interval-basic {
               type uint16 {
                 range "1..31744";
               }
               units seconds;
               default 125;
               description
                 "The Query Interval is the interval between General
   Queries
                  sent by the Querier.";


Zhao                   Expires Feb 3, 2018               [Page 29]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017


               reference "RFC3376. Sec. 4.1.7, 8.2, 8.14.2.";
             }
             leaf query-interval-extended {
               if-feature vlan-query-interval-extended;
               type uint16;
               units seconds;
               default 125;
               description
                 "The Query Interval is the interval between General
   Queries
                  sent by the Querier.";
               reference "RFC3376. Sec. 4.1.7, 8.2, 8.14.2.";
             }
           }

           choice query-max-response-time {
             description
               "Different vendors can restrict different range to the
                Query maximum response time parameter.";

             leaf query-max-response-time-basic {
               type uint16 {
                 range "1..65535";
               }
               units seconds;
               default 10;
               description
                 "Query maximum response time specifies the maximum time
                  allowed before sending a responding report.";
                  reference "RFC3376. Sec. 4.1.1, 8.3, 8.14.3.";
             }
             leaf query-max-response-time-extended {
               if-feature vlan-query-max-response-time-extended;
               type uint16;
               units seconds;
               default 10;
               description
                 "Query maximum response time specifies the maximum time
                  allowed before sending a responding report.";
               reference "RFC3376. Sec. 4.1.1, 8.3, 8.14.3.";
             }
           }

           leaf require-router-alert {
             if-feature require-router-alert;
             type boolean;
           default false;


Zhao                   Expires Feb 3, 2018               [Page 30]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017


             description
               "When the value is true, router alert exists in the IP
   head of IGMP or MLD packet.";
           }

           choice robustness-variable {
             description
               "Different vendors can restrict different range to the
                Robustness Variable parameter.";

             leaf robustness-variable-basic {
               type uint8 {
                 range "2..7";
               }
               default 2;
               description
                 "Querier's Robustness Variable allows tuning for the
   expected
                  packet loss on a network.";
               reference "RFC3376. Sec. 4.1.6, 8.1, 8.14.1.";
             }
             leaf robustness-variable-extended {
               if-feature vlan-robustness-variable-extended;
               type uint8;
               default 2;
               description
                 "Querier's Robustness Variable allows tuning for the
   expected
                  packet loss on a network.";
               reference "RFC3376. Sec. 4.1.6, 8.1, 8.14.1.";
             }
           }

           leaf version {
             type uint8 {
               range "1..3";
             }
             description "IGMP and MLD Snooping version.";
           }

         leaf-list static-mrouter-interface {
            if-feature static-l2-multicast-group;
              type if:interface-ref;
              description "Multicast Router Interface. The interface to
   the router must be in the selected VLAN, and it is specified by type
   and number.";
          }


Zhao                   Expires Feb 3, 2018               [Page 31]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017



         } // vlan-config-attributes-igmp-mld-snooping

         grouping vlan-config-attributes-mld-snooping {
           description "MLD snooping configuration of each VLAN.";

           uses vlan-config-attributes-igmp-mld-snooping;

         leaf querier {
             type inet:ipv6-address;
             description
            "Use the IGMP snooping querier to support IGMP snooping in a
   VLAN where PIM and IGMP are not configured.
             The IP address is used as the source address in messages.";
           }

           list ssm-map {
             if-feature ssm-map;
             key "source-addr group-addr-prefix";
             description "SSM mapping list for MLD snooping";
             leaf source-addr {
               type ssm-map-ipv6-addr-type;
               description
                 "Source IP address.";
             }
             leaf group-addr-prefix {
               type inet:ipv6-prefix;
               description
                 "Multicast group IP address for ssm-map";
             }
           }

         list static-l2-multicast-group {
           if-feature static-l2-multicast-group;
           key "group source-addr";
             description
               "A static multicast route, (*,G) or (S,G).";

           leaf group {
               type inet:ipv6-address;
               description
                 "Multicast group IPv6 address.";
             }
             leaf source-addr {
               type source-ipv6-addr-type;
               description
                 "Multicast source IPv6 address.";


Zhao                   Expires Feb 3, 2018               [Page 32]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017


             }

           leaf interface {
            type if:interface-ref;
            description
            "Interface for static multicast group";
           }

         } // static-l2-multicast-group

         } // vlan-config-attributes-mld-snooping

        grouping vlan-state-group-attributes-igmp-mld-snooping {
           description
             "Per vlan state attributes for both IGMP and MLD snooping
   groups.";

           leaf expire {
             type uint32;
             units seconds;
             description
            "The time left before multicast group timeout.";
           }

           leaf up-time {
             type uint32;
             units seconds;
             description
               "The time after the device created L2 multicast record.";
           }

         leaf interface {
            type if:interface-ref;
            description
            "The outgoing interface for L2 multicast stream.";
         }

         } // vlan-state-group-attributes-igmp-mld-snooping


         grouping vlan-state-attributes-igmp-snooping {
           description
             "State attributes for IGMP snooping of each VLAN.";

           uses vlan-state-attributes-igmp-mld-snooping;

           list group {


Zhao                   Expires Feb 3, 2018               [Page 33]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017


             key "address";
             description "IGMP snooping information";

             leaf address {
               type inet:ipv4-address;
               description
                 "Multicast group IP address";
             }

           uses vlan-state-group-attributes-igmp-mld-snooping;

           leaf last-reporter {
               type inet:ipv4-address;
               description
                 "The last host address which has sent the
                  report to join the multicast group.";
             }

             list source {
               key "address";
            description "Source IP address for multicast stream";
               leaf address {
                 type inet:ipv4-address;
                 description "Source IP address for multicast stream";
               }

               uses vlan-state-source-attributes-igmp-mld-snooping;

            leaf last-reporter {
                 type inet:ipv4-address;
                 description
                   "The last host address which has sent the
                    report to join the multicast source and group.";
               }

             } // list source
           } // list group
         } // vlan-state-attributes-igmp-snooping

         grouping vlan-state-attributes-igmp-mld-snooping {
           description
             "State attributes for both IGMP and MLD Snooping of each
   VLAN.";

           leaf-list mrouter-interface {
            type if:interface-ref;



Zhao                   Expires Feb 3, 2018               [Page 34]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017


            description "Multicast Router Interface which is the
   interface that connect to the multicast router";
           }

           leaf-list port-info {
            type if:interface-ref;
            description "The port-info shows the interfaces that attach
   the hosts, which join in the multicast group";
           }

           leaf-list mac-address {
            type yang:phys-address;
            description "Destination mac address for L2 multicast
   forwarding.";
           }

         } // vlan-config-attributes-igmp-mld-snooping

         grouping vlan-state-attributes-mld-snooping {
           description
             "State attributes for MLD snooping of each VLAN.";

           uses vlan-state-attributes-igmp-mld-snooping;


           list group {
             key "address";
             description "MLD snooping statistics information";

             leaf address {
               type inet:ipv6-address;
               description
                 "Multicast group IP address";
             }

           uses vlan-state-group-attributes-igmp-mld-snooping;

           leaf last-reporter {
               type inet:ipv6-address;
               description
                 "The last host address which has sent the
                  report to join the multicast group.";
             }

             list source {
               key "address";
            description "Source IP address for multicast stream";


Zhao                   Expires Feb 3, 2018               [Page 35]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017



               leaf address {
                 type inet:ipv6-address;
                 description "Source IP address for multicast stream";
               }

               uses vlan-state-source-attributes-igmp-mld-snooping;

            leaf last-reporter {
               type inet:ipv6-address;
               description
                  "The last host address which has sent the report to
   join the multicast source and group.";
            }

             } // list source
           } // list group
         } // vlan-state-attributes-mld-snooping

         grouping vlan-state-source-attributes-igmp-mld-snooping {
           description
             "State attributes for both IGMP and MLD Snooping of each
   VLAN.";

           leaf up-time {
             type uint32;
             units seconds;
             description "The time after the device created L2 multicast
   record";
           }

         leaf expire {
             type uint32;
             units seconds;
             description
               "The time left before multicast group timeout.";
           }

         } // vlan-state-source-attributes-igmp-mld-snooping




         /*
          * Configuration data nodes
          */
         augment "/rt:routing/rt:control-plane-protocols"


Zhao                   Expires Feb 3, 2018               [Page 36]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017


         {
           description
             "IGMP snooping augmentation to routing control plane
   protocol configuration.";

           container igmp-snooping {
             description
               "IGMP Snooping configuration data.";

             container global {
               description
                 "Global attributes.";
               uses global-config-attributes;
             }

             container vlans {
               description
                 "List of VLANs that enable IGMP Snooping.";

            uses vlans-config-attributes-igmp-mld-snooping {
                 if-feature global-vlan-config;
               }

               list vlan {
                 key "vlan-id";
                 description
                   "IGMP Snooping config-attributes for each VLAN.";
                 leaf vlan-id {
                   type uint16 {
                  range "1 .. 4094";
               }
                   description
                     "VLAN ID, the range of which is 1 to 4094.";
                 }
                 uses vlan-config-attributes-igmp-snooping {
                   if-feature per-vlan-config;
                 }


               } // vlan
             } // vlans
           } // igmp-snooping
         } // augment

        augment "/rt:routing/rt:control-plane-protocols"
         {
           description


Zhao                   Expires Feb 3, 2018               [Page 37]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017


             "MLD snooping augmentation to routing control plane
   protocol configuration.";

           container mld-snooping {
             description
               "MLD Snooping configuration data.";

             container global {
               description
                 "Global attributes.";
               uses global-config-attributes;
             }

             container vlans {
               description
                 "List of VLANs that enable IGMP Snooping.";

            uses vlans-config-attributes-igmp-mld-snooping {
                 if-feature global-vlan-config;
               }

               list vlan {
                 key "vlan-id";
                 description
                   "IGMP Snooping configuration attributes for each
   VLAN.";

                 leaf vlan-id {
                   type uint16 {
                  range "1 .. 4094";
               }
                   description
                     "VLAN ID, the range of which is 1 to 4094";
                 }

                 uses vlan-config-attributes-mld-snooping {
                   if-feature per-vlan-config;
                 }

               } // vlan
             } // vlans
           } // mld-snooping
         } // augment

         /*
          * Operational state data nodes
          */


Zhao                   Expires Feb 3, 2018               [Page 38]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017


         augment "/rt:routing-state/rt:control-plane-protocols"
         {
           description
             "IGMP Snooping state data.";

           container igmp-snooping {
             description
               "IGMP Snooping operational state data.";

             container global {
               description
                 "Global attributes.";
               uses global-config-attributes;
               uses global-state-attributes;
             }

             container vlans{
               description
                 " List of VLANs that enable IGMP Snooping.";

            uses vlans-config-attributes-igmp-mld-snooping {
                 if-feature global-vlan-config;
               }

               list vlan {
                 key "vlan-id";
                 description
                   "IGMP Snooping state-attributes for each VLAN.";
                 leaf vlan-id {
                   type uint16 {
                  range "1 .. 4094";
               }
                   description
                     "VLAN ID, the range of which is 1 to 4094 ";
                 }
                 uses vlan-config-attributes-igmp-snooping {
                   if-feature per-vlan-config;
                 }
                 uses vlan-state-attributes-igmp-snooping;
               } // vlan
             } // vlans
           } // igmp-snooping
        } // augment

        augment "/rt:routing-state/rt:control-plane-protocols"
         {
           description


Zhao                   Expires Feb 3, 2018               [Page 39]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017


             "MLD Snooping state data.";

           container mld-snooping {
             description
               "MLD Snooping state data.";

             container global {
               description
                 "Global attributes.";
               uses global-config-attributes;
               uses global-state-attributes;
             }

             container vlans {
               description
                 "List of VLANs that enable MLD Snooping.";

            uses vlans-config-attributes-igmp-mld-snooping {
                 if-feature global-vlan-config;
               }

               list vlan {
                 key "vlan-id";
                 description
                   "MLD Snooping state-attributes for each VLAN.";

                 leaf vlan-id {
                   type uint16 {
                  range "1 .. 4094";
               }
                   description
                     "VLAN ID, the range of which is 1 to 4094 ";
                 }
                 uses vlan-config-attributes-mld-snooping {
                   if-feature per-vlan-config;
                 }
                 uses vlan-state-attributes-mld-snooping;
               } // vlan
             } // vlans
           } // mld-snooping
         } // augment

         /*
          * RPCs
          */
         //clear ip igmp snooping statistics interface vlan-id



Zhao                   Expires Feb 3, 2018               [Page 40]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017


        rpc clear-igmp-snooping-statistics {
           if-feature rpc-clear-statistics;
           description
             "Clears the specified IGMP Snooping statistics.";

           input {
             leaf vlan-id {
                   type uint16 {
                  range "1 .. 4094";
               }
                   description
                     "VLAN ID, the range of which is 1 to 4094 ";
             }

             leaf group {
               type inet:ipv4-address;
               description
                 "Multicast group IPv4 address.
                  If it is not specified, all IGMP snooping group tables
   are
                  cleared.";
             }

             leaf source {
               type inet:ipv4-address;
               description
                 "Multicast source IPv4 address.
                  If it is not specified, all IGMP snooping source-group
   tables are
                  cleared.";
             }
           }
         } // rpc clear-igmp-snooping-statistics

        rpc clear-mld-snooping-statistics {
           if-feature rpc-clear-statistics;
           description
             "Clears the specified MLD Snooping statistics.";

           input {
             leaf vlan-id {
                   type uint16 {
                  range "1 .. 4094";
               }
                   description
                     "VLAN ID, the range of which is 1 to 4094 ";
             }


Zhao                   Expires Feb 3, 2018               [Page 41]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017



             leaf group {
               type inet:ipv6-address;
               description
                 "Multicast group IPv6 address.
                  If it is not specified, all MLD snooping group tables
   are
                  cleared.";
             }
             leaf source {
               type inet:ipv6-address;
               description
                 "Multicast source IPv6 address.
                  If it is not specified, all MLD snooping source-group
   tables are
                  cleared.";
             }
           }
         } // rpc clear-mld-snooping-statistics

         /*
          * Notifications
          */
       }
   <CODE ENDS>




4. Security Considerations

   The data model defined does not create any security implications.



5. IANA Considerations

   This draft does not request any IANA action.



6. Normative References

   [RFC6020] Bjorklund, M., Ed., "YANG - A Data Modeling Language for
             the Network Configuration Protocol (NETCONF)", RFC 6020,
             October 2010.



Zhao                   Expires Feb 3, 2018               [Page 42]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017


   [RFC6021] Schoenwaelder, J., Ed., "Common YANG Data Types", RFC 6021,
             October 2010.

   [RFC4541] M. Christensen, K. Kimball, F. Solensky, "Considerations
             for Internet Group Management Protocol (IGMP) and Multicast
             Listener Discovery (MLD) Snooping Switches", RFC 4541, May
             2006.

   [RFC2236] Fenner, W., "Internet Group Management Protocol, Version
             2", RFC 2236, November 1997.

   [RFC2710] Deering, S., Fenner, W., and B. Haberman, "Multicast
             Listener Discovery (MLD) for IPv6", RFC 2710, October 1999.

   [RFC3376] Cain, B., Deering, S., Kouvelas, I., Fenner, B., and A.
             Thyagarajan, "Internet Group Management Protocol, Version
             3", RFC 3376, October 2002.

   [RFC3810] Vida, R. and L. Costa, "Multicast Listener Discovery
             Version 2 (MLDv2) for IPv6", RFC 3810, June 2004.

   [RFC4604] Holbrook, H., Cain, B., and B. Haberman, "Using
             InternetGroup Management Protocol Version 3 (IGMPv3) and
             Multicast Listener Discovery Protocol Version 2 (MLDv2) for
             Source-Specific Multicast", RFC 4604, August 2006.

   [RFC4607] Holbrook, H. and B. Cain, "Source-Specific Multicast for
             IP", RFC 4607, August 2006.

   [draft-ietf-pim-igmp-mld-yang-01] X. Liu, F. Guo, M. Sivakumar, P.
             McAllister, A. Peter, "A YANG data model for Internet Group
             Management Protocol (IGMP) and Multicast Listener Discovery
             (MLD)", draft-ietf-pim-igmp-mld-yang-01, October 28, 2016.

   [draft-ietf-pim-igmp-mld-yang-03] X. Liu, F. Guo, M. Sivakumar, P.
             McAllister, A. Peter, "A YANG data model for Internet Group
             Management Protocol (IGMP) and Multicast Listener Discovery
             (MLD)", draft-ietf-pim-igmp-mld-yang-03, March 13, 2017.











Zhao                   Expires Feb 3, 2018               [Page 43]

Internet-Draft      IGMP & MLD Snooping Yang Model             Aug 2017


   Authors' Addresses

   Hongji Zhao
   Ericsson (China) Communications Company Ltd.
   Ericsson Tower, No. 5 Lize East Street,
   Chaoyang District Beijing 100102, P.R. China

   Email: hongji.zhao@ericsson.com









































Zhao                   Expires Feb 3, 2018               [Page 44]

