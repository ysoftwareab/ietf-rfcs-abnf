draft-omar-nep-02                                      Khaled Omar
Internet-Draft                                           The Road                                       
Intended status: Standard Track
Expires: June 14, 2018	        	            December 14, 2017                                       


                     Numbering Exchange Protocol (NEP)
                             Specification
                           draft-omar-nep-02

Status of this Memo

   This Internet-Draft is submitted in full conformance with the provisions
   of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering Task
   Force (IETF). Note that other groups may also distribute working documents
   as Internet-Drafts. The list of current Internet-Drafts is at
   http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months and
   may be updated, replaced, or obsoleted by other documents at any time.
   It is inappropriate to use Internet-Drafts as reference material or to cite
   them other than as "work in progress."

   This Internet-Draft will expire on June 14, 2018.



Copyright Notice

   Copyright (c) 2017 IETF Trust and the persons identified as the document
   authors. All rights reserved. 

   This document is subject to BCP 78 and the IETF Trust's Legal Provisions
   Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect
   on the date of publication of this document. Please review these documents
   carefully, as they describe your rights and restrictions with respect to this
   document. Code Components extracted from this document must include
   Simplified BSD License text as described in Section 4.e of the Trust Legal
   Provisions and are provided without warranty as described in the Simplified
   BSD License.


Abstract

   This document specifies Numbering Exchange Protocol (NEP).




Table of Contents

   1. Introduction..................................................1
   2. Numbering Exchange Protocol (NEP).............................1
   3. Subnet Advertisement..........................................3
   4. NEP Loop Prevention...........................................4
   5. Security Considerations.......................................5
   6. Acknowledgments...............................................5
   7. Author Address................................................5
   8. References....................................................5
   9. Full Copyright Statement......................................5




Khaled Omar             Internet-Draft                   [Page 1]

RFC             Numbering Exchange Protocol (NEP)    December 14, 2017


1.  Introduction


    - Numbering Exchange Protocol (NEP) is an Interior Gateway Protocol (IGP)
      that delivers IP packets between routers in the same Autonomous System (AS).

    - NEP chooses its best path based on a composite metric of:

       a. Highest total bandwidth (for faster transmission).
       b. Number of hops (for less processing).
       c. Lowest total delay (for faster delivery).

    - NEP uses a numbering method between routers that provides a fast topology
      exchange and learning process.




2. Numbering Exchange Protocol (NEP)


   - The following figure shows 6 interconnected routers within an AS as follows:
 

                                                   22, 2500, 15
                              12, 3000, 30         31, 2000, 10
                              22, 1500, 25         42, 3000, 30
                              31, 1000, 20         63, 8000, 100
                                    <-----   *   ----->                        
                     ----------------------* 3 *----------------------
                     |           20        | *           10          |
                     |          1000       | |          2000         |
                     |                     v |                       |
                     |                       |                       |
    22, 4000, 60     |                       |  5                    |
    41, 1000, 20     |                     ^ | 500                   |
    52, 1100, 220 ^  |                     | |                       |   ^ 11, 2000, 10
    62, 6000, 90  |  |                     | |                       |   | 22, 3000, 20
                  |  | 32,41,52,62  12,21,32 |   31,41,51     31,51  |   | 52, 5000, 20
  *          <----   *  ---->        <----   * ---->          <----  *
* 6 *--------------* 4 *-------------------* 2 *-------------------* 1 *
  *       70         *           40        | *           10          *   | 11, 3000, 10
         5000        |          3000       | |          1000         |   | 22, 4000, 20
                  |  |                     v |                       |   v 32, 5000, 20
    22, 3100, 240 |  |                       |  40                   |     43, 6000, 40
    32, 1100, 220 v  |                     ^ | 2000                  |     64, 11000, 110
    41, 100, 200     |                     | |                       |
    62, 5100, 270    |                     | |                       |
                     |          200          |            10         |
                     |          100          *           3000        |         
                     ----------------------* 5 *----------------------
                                     <----   *  ---->             
                               12, 3100, 210         22, 5000, 50         
                               22, 2100, 240         42, 3100, 210
                               51, 100, 200          51, 3000, 10
                                                     63, 8100, 280

   
   - Each link has two numeric values:

     Upper value represents the link delay.
     Lower value represents the link bandwidth.    

 
   - Each NEP router advertises the topology information as follows:

     rh, b, d

     Where r represents the NEP router RID.
           h represents the number of hops to reach that router.
           b represents the total bandwidth.
           d represents the total delay.





Khaled Omar             Internet-Draft                   [Page 2]

RFC             Numbering Exchange Protocol (NEP)    December 14, 2017



    - Each router within an Autonomous System (AS) must be configured with
      a unique number called Router ID (RID).

   
    * RID: 32-bit decimal number that uniquely identifies a router within an AS.

      The RID has the following format: Y.Y.Y.Y

    - Each router advertises its RID first to its neighboring routers using Hello messages.

    - Each router advertises all the interconnected RIDs, total bandwidth, number of hops,
      and total delay to the neighboring router.

    - Each router calculates the best path to each router using the following values:

      a. Total bandwidth.
      b. Number of hops.
      c. Total delay.
   
    - The best NEP path from the local router to every other router from the collected advertised
      information has the following:

      a. Highest total bandwidth.
      b. Lowest number of hops that corresponds to the highest total bandwidth.
      c. Lowest total delay.

    - The NEP metric is calculated using the following formula:


                   ****************************************************
                   *             (No. of Hops * Total-Delay)          *
                   *  Metric = [-----------------------------] x 10^7 * 
                   *                    Total-BW                      *
                   ****************************************************                  


    - The best metric has the lowest value.


    - Each NEP router sends an Echo message of each of its interface to the neighboring
      router, the time taken by the message to be sent and received over the link
      divided by 2 determines the link delay.

    - The Echo message is sent by every router every 10 seconds (by default).

    - The link delay value is updated every 10 seconds on every advertised message that
      contains the 3 values that can be used to determine the best path from the NEP router
      to other routers.






Khaled Omar             Internet-Draft                   [Page 3]

RFC             Numbering Exchange Protocol (NEP)    December 14, 2017


3. Subnet Advertisement:


    - After learning the best routes from each router to other routers, every router
      advertises the directly connected subnet(s) to other routers.

    - Then, each router adds the learned subnet to the IP routing table.

    - Consider the following example:

    - Three routers are connected and every router is connected directly to one subnet.


                 ----------------------- 10.1.2.0/24 ---------------------
                 |                      -------------                    |
                 |              21, 3000, 10 |  21, 1000, 20             |
                 |              12, 4000, 30 |  32, 4000, 30             | 
                 V                    <----  *  ---->                    V
                     ----------------------* 2 *----------------------
                     |           10          *           20          |
                     |          3000                    1000         |
                     |                                               |
                     |                                               |
                     |                                               |
                     |                                               |
                   ^ |                                               |   ^ 11, 1000, 20
       31, 300, 10 | |  31, 500, 50                     11, 500, 50  |   | 32, 1500, 70
       12, 3500, 60| |  22, 3500, 60                    22, 1500,70  |   |
                     *  ---->                                 <----  *
                   * 3 *-------------------------------------------* 1 *
            ^        *                      50                       *          ^
            |        |                      500                      |          |
            |   -----------                                     ------------    |
            --- 10.1.3.0/24 -------->                    <-----  10.1.1.0/24 ----


   - For router number 1, the following topology information are received:

     2: 21, 1000, 20 ==> Metric = 200,000    (Added)
     2: 32, 4000, 30 ==> Metric = 150,000    (Added)
     3: 31, 500, 50  ==> Metric = 1,000,000  (Discarded)
     3: 22, 3500, 60 ==> Metric = 342,857.1  (Discarded)

   - Once every router learns the best route to every other router, each router
     builds its own IP routing table:

   - For router number 1, the IP routing table will be as follows:

     ************************************************************************ 
     * Destination Router * Destination Subnet *  Metric  * Next-hop Router *
     ************************************************************************
     *         2          *    10.1.2.0/24     * 200,000  *        2        *    
     ************************************************************************
     *         3          *    10.1.3.0/24     * 150,000  *        2        *
     ************************************************************************


   - If more than one subnet is directly connected to a router, another entry
     will be added to the IP routing table for that subnet with the same destination
     router, metric and next-hop router.





Khaled Omar             Internet-Draft                   [Page 4]

RFC             Numbering Exchange Protocol (NEP)    December 14, 2017



4. NEP Loop Prevention:


   - NEP uses a loop free mechanism by discarding the advertised topology information that has
     a higher metric than the existing stored entry for the same RID to prevent looping.

   - When an NEP router receives an advertised topology information to a specific router, it
     checks its own topology table, if there is no entry listed for that RID contained in the
     advertised message, it adds it to its own topology table.

   - If more than one message received to the same RID, the NEP router calculates the metric for
     each one of them and store the one with the lowest metric for that router.

    
   For example:

      a) Router 1 will have 3 messages to the destination router 4 as follows:

          2: 42, 4000, 50 ==> Metric = 250,000     (discarded)
          3: 42, 3000, 30 ==> Metric = 200,000     (added)
          5: 42, 3100, 210 ==> Metric = 1,354,839 (discarded)

      The message from router 3 has the lowest metric to the destination router 4 so this route
      through router 3 will be added to the routing table and other routes will be discarded.


      b) Router 1 will have 3 messages to the destination router 6 as follows:

          2: 63, 9000, 120 ==> Metric = 400,000    (discarded)
          3: 63, 8000, 100 ==> Metric = 375,000    (added)
          5: 63, 8100, 280 ==> Metric = 1,037,037 (discarded)

       The message from router 2 has the lowest metric to the destination router 6 so this route
       through router 2 will be added to the routing table and other routes will be discarded.


                        Router 1 Routing Table:


   ***************************************************************
   * Destination Router   *     Metric     *     Next-hop Router *
   ***************************************************************
   *         2            *     100,000    *            2        *
   ***************************************************************   
   *         3            *     50,000     *            3        *
   ***************************************************************   
   *         4            *     200,000    *            3        *
   ***************************************************************
   *         5            *     33,333.33  *            5        *
   ***************************************************************
   *         6            *     375,000    *            3        *
   ***************************************************************


Note:- - In case of two or more equal metrics for the same destination, the routes are added to the
         routing table and traffic is balanced between these routes.





Khaled Omar             Internet-Draft                   [Page 5]

RFC             Numbering Exchange Protocol (NEP)    December 14, 2017
Expires: 6-14-2018




Security Considerations



Acknowledgments



Author Address

   Khaled Omar Ibrahim Omar
   The Road
   6th of October City, Giza
   Egypt

   Phone: +2 01003620284
   E-mail: eng.khaled.omar@hotmail.com
   National ID No.: 28611262102992


References




Full Copyright Statement

   Copyright (C) IETF (2017).  All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works.  However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked.

   This document and the information contained herein is provided on
   THE INTERNET ENGINEERING TASK FORCE DISCLAIMS ALL WARRANTIES,
   EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
   THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR
   ANY IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
   PURPOSE.
