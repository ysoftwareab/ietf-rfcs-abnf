



SPRING WG                                                        R. Chen
Internet-Draft                                                  Sh. Peng
Intended status: Standards Track                         ZTE Corporation
Expires: February 18, 2021                               August 17, 2020


                    SRv6 SID Allocation Requirements
                 draft-cp-spring-srv6-sid-allocation-00

Abstract

   This document describes a SRv6 SID allocation method.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on February 18, 2021.

Copyright Notice

   Copyright (c) 2020 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.







Chen & Peng             Expires February 18, 2021               [Page 1]

Internet-Draft             SRv6 SID Allocation               August 2020


Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Conventions used in this document . . . . . . . . . . . . . .   2
   3.  Allocating a SRv6 Compressed SID to a node  . . . . . . . . .   2
   4.  The New SR Endpoint Behaviors . . . . . . . . . . . . . . . .   3
   5.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   5
   6.  Security Considerations . . . . . . . . . . . . . . . . . . .   5
   7.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   5
   8.  Normative References  . . . . . . . . . . . . . . . . . . . .   5
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   6

1.  Introduction

   Segment Routing architecture [RFC8402]leverages the paradigm of
   source routing.  It can be realized in a network data plane by
   prepending the packet with a list of instructions, a.k.a.  Segment
   Identifiers (SIDs).  A segment can be encoded as a Multi-Protocol
   Label Switching (MPLS) label, IPv4 address, or IPv6 address.  Segment
   Routing can be applied in MPLS data plane by encoding 20-bits SIDs in
   MPLS label stack [RFC8660].  It also can be applied to IPv6 data
   plane by encoding a list of 128-bits SIDs in IPv6 Segment Routing
   Extension Header (SRH)[I-D.ietf-6man-segment-routing-header].

   As we know, several proposals are introduced to reduce the overhead
   of SIDs.  The main ideas of them are basically to use a Compressed
   SID to replace the complete 128 bit SID in the SID list.  The
   consequence of this is that the SID allocation space provided to each
   node will be very limited, which will limit the deployment of
   services in the network.

   This document describes an SRv6 SID allocation method to increase the
   SID allocation space.

2.  Conventions used in this document

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC2119.

3.  Allocating a SRv6 Compressed SID to a node

   Assign a general global SRv6 SID to the corresponding consumer type,
   which is called the container SID.  In the SID List, the container
   SID is followed by the local index or identification to indicate a
   specific segment with complete meaning.  The container SID itself is
   128bits and can be compressed to a short SID (such as 32 bits or 16




Chen & Peng             Expires February 18, 2021               [Page 2]

Internet-Draft             SRv6 SID Allocation               August 2020


   bits).  The local index or identifier in general can also be a short
   SID.

   For example, END.X SIDs[I-D.ietf-spring-srv6-network-programming] are
   allocated to all outbound L3 links on SRv6 nodes, and all these END.X
   SIDs occupy the global SRv6 SID resource.  Now we define a new
   allocation method: for the consumer type of L3 link, only one general
   global container SID (called END.T.X SID) is allocated, and then
   allocates a local index for each specific L3 link, and the
   combination of END.T.X SID and local index can express the meaning of
   the original END.X.

4.  The New SR Endpoint Behaviors

   This document defines a new set of behaviors.  Following is a set of
   behaviors that can be associated with a SID.



































Chen & Peng             Expires February 18, 2021               [Page 3]

Internet-Draft             SRv6 SID Allocation               August 2020


   END.T.X SID     Endpoint with Layer-3 cross-connect.
                   Only one universal container SID (END.T.X SID) 
				   is allocated on each node,and each outbound L3 link 
				   is represented by a local index.
   END.T.DX6 SID   Endpoint with decapsulation and IPv6 cross-connect.
                   Only one universal container SID (END.T.DX6 SID) 
				   is allocated on each node,and each L3 link connecting 
				   the CE is represented by a local index.
   END.T.DX4 SID   Endpoint with decaps and IPv4 cross-connect.
                   Only one universal container SID (END.T.DX4 SID) 
				   is allocated on each node, and each L3 link connecting 
				   the CE is represented by a local index.
   END.T.DT6 SID   Endpoint with decapsulation and IPv6 table lookup.
                   Only one universal container SID (END.T.DT6 SID) 
				   is allocated on each node,and each L3VPN instance 
				   is represented by a local index.
   END.T.DT4 SID   Endpoint with decapsulation and IPv4 table lookup.
                   Only one universal container SID (END.T.DT4 SID) 
				   is allocated on each node, and each L3VPN instance 
				   is represented by a local index.
   END.T.DT46 SID  Endpoint with decapsulation and IP table lookup.
                   Only one universal container SID (END.T.DT46 SID) 
				   is allocated on each node, and each L3VPN instance 
				   is represented by a local index.
   END.T.DX2 SID   Endpoint with decapsulation and L2 cross-connect.
                   Only one universal container SID (END.T.DX2 SID) 
				   is allocated on each node,and each L2 link connecting 
				   the CE is represented by a local index.
   END.T.DX2V SID  Endpoint with decapsulation and VLAN L2 table lookup.
                   Only one universal container SID (END.T.DX2V SID) 
				   is allocated on each node,and each L2VPN/EVPN instance 
				   is represented by a local index.
   END.T.DT2U SID  Endpoint with decapsulation and unicast MAC L2table lookup.
                   Only one universal container SID (END.T.DT2U SID) 
				   is allocated on each node, and each L2VPN/EVPN instance 
				   is represented by a local index.
   END.T.DT2M SID  Endpoint with decapsulation and L2 table flooding
                   Only one universal container SID (END.T.DT2M SID) 
				   is allocated on each node, and each L2VPN/EVPN instance 
				   is represented by a local index.
   END.T.B SID     Endpoint bound to an SRv6 policy with encapsulation
                   Only one universal container SID (END.T.B SID) 
				   is allocated on each node, and each SR policy is 
				   represented by a local index.

   Above the END.T.X, END.T.DX6, END.T.DX4, END.T.DT6, END.T.DT4,
   END.T.DT46, END.T.DX2, END.T.DX2V, END.T.DT2U, END.T.DT2M, END.T.B
   are all variants of the End T behavior.

   The END.T behavior allows the use of the next classic SRv6 SID as the
   key value to look up and forward in a specific IPv6 FIB table, and
   these variants explicitly use the next short SID of a specific length
   (such as 32 or 16 bits) as the key value to look-up table in the
   specific consumer type table . These variants can also be combined
   with different Flavors, such as PSP, USP and USD Flavors defined in
   [I-D.ietf-spring-srv6-network-programming], and UET-0, UET-1, UET-2
   and UET-3 Flavor defined in [I-D.mirsky-6man-unified-id-sr].





Chen & Peng             Expires February 18, 2021               [Page 4]

Internet-Draft             SRv6 SID Allocation               August 2020


   For example,UET-0, UET-1, UET-2 and UET-3 Flavor indicates the
   compression type of the next SID following the current active SID. if
   the container SID is UET-0 flavor, it means that the index and next-
   sid following it in the SRH are both 128 bits.  If the container SID
   is in a UET-2 flavor, it means that the index and next sid following
   it in the SRH are both 32 bits.

5.  IANA Considerations

   TBD.

6.  Security Considerations

7.  Acknowledgements

   TBD.

8.  Normative References

   [I-D.ietf-6man-segment-routing-header]
              Filsfils, C., Dukes, D., Previdi, S., Leddy, J.,
              Matsushima, S., and D. Voyer, "IPv6 Segment Routing Header
              (SRH)", draft-ietf-6man-segment-routing-header-26 (work in
              progress), October 2019.

   [I-D.ietf-spring-srv6-network-programming]
              Filsfils, C., Camarillo, P., Leddy, J., Voyer, D.,
              Matsushima, S., and Z. Li, "SRv6 Network Programming",
              draft-ietf-spring-srv6-network-programming-17 (work in
              progress), August 2020.

   [I-D.mirsky-6man-unified-id-sr]
              Cheng, W., Mirsky, G., Peng, S., Aihua, L., and G. Mishra,
              "Unified Identifier in IPv6 Segment Routing Networks",
              draft-mirsky-6man-unified-id-sr-07 (work in progress),
              July 2020.

   [RFC8402]  Filsfils, C., Ed., Previdi, S., Ed., Ginsberg, L.,
              Decraene, B., Litkowski, S., and R. Shakir, "Segment
              Routing Architecture", RFC 8402, DOI 10.17487/RFC8402,
              July 2018, <https://www.rfc-editor.org/info/rfc8402>.

   [RFC8660]  Bashandy, A., Ed., Filsfils, C., Ed., Previdi, S.,
              Decraene, B., Litkowski, S., and R. Shakir, "Segment
              Routing with the MPLS Data Plane", RFC 8660,
              DOI 10.17487/RFC8660, December 2019,
              <https://www.rfc-editor.org/info/rfc8660>.




Chen & Peng             Expires February 18, 2021               [Page 5]

Internet-Draft             SRv6 SID Allocation               August 2020


Authors' Addresses

   Ran Chen
   ZTE Corporation

   Email: chen.ran@zte.com.cn


   Shaofu Peng
   ZTE Corporation

   Email: peng.shaofu@zte.com.cn







































Chen & Peng             Expires February 18, 2021               [Page 6]
