

Megaco WG                                                     J. Bouwen
Internet Draft                                             Alcatel Bell
Document: <draft-bouwen-megaco-isdn-data-00.txt>          November 2000
Category: Informational


       Extensions to Megaco to support Data in an ISDN D-channel


Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026 [1].

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups. Note that
   other groups may also distribute working documents as Internet-
   Drafts. Internet-Drafts are draft documents valid for a maximum of
   six months and may be updated, replaced, or obsoleted by other
   documents at any time. It is inappropriate to use Internet- Drafts
   as reference material or to cite them other than as "work in
   progress."
   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt
   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.


1. Abstract

   In ISDN interfaces the D-channel is used to transport the Q.931
   signalling messages. In addition, the D-channel can transport packet
   data for user-to-user communication. The Megaco protocol
   specification has to be extended to support data in an ISDN D-
   channel. More specifically, ephemeral terminations on top of
   physical ISDN terminations have to be allowed, and support for the
   ISDN addressing scheme has to be added to refer to the data streams
   in the D-channel. This draft defines the required additional
   functionality, that could be part of the second version of the
   Megaco protocol.


2. Conventions used in this document

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and "OPTIONAL" in
   this document are to be interpreted as described in RFC-2119 [2].


3. Introduction

   In ISDN interfaces the D-channel is used to transport the Q.931
   signalling messages. But the D-channel can be used for more than
   that. In addition to Q.931 signalling, it can be used to transport

Bouwen             Informational û Expires May 2001                  1

               Megaco Extensions for Data in D-channel  November 2000


   packet for user-to-user communication. Examples of packet data in
   the D-channel include:
   * Always on ISDN. An internet connection over the D-channel can be
   used to signal the arrival of new messages in the user's mailbox. A
   B-channel will be opened for download of the packet data.
   * Credit card verification
   * Exchange of data between shops and a central database, for
   instance for Lotto shops and petrol stations.

   The current Megaco specification doesnÆt contain the required
   functionality to support packet data in D-channels in ISDN access
   gateways. The necessary extensions are twofold:

   1. The possible presence of multiple data flows in the D-channels
      implies that the D-channel can be considered as a packet
      interface, that can support multiple ephemeral terminations. The
      consequence for the Megaco is that the protocol should allow that
      ephemeral terminations are created on top of physical
      terminations of the Switched Circuit Network.

   2. Ephemeral terminations on an IP interface are identified with the
      use of the transport address (IP address and port). In the case
      of ISDN, the Data Link Connection Identifier (DLCI) serves this
      purpose. Support for the ISDN addressing scheme of the DLCI has
      to be included in the Megaco protocol, i.e. in SDP in the case of
      the text version. (The binary version of the Megaco protocol is
      currently not discussed in this draft).

   The following paragraphs explain the ISDN addressing scheme (DLCI),
   and shows how a message of the extended Megaco protocol would look
   like.


4. Data Link Connection Identifier

   The D-channel uses a layered protocol according to ITU-T
   recommendations Q.920, Q.921, Q.930 and Q.931. The Q.921 Data Link
   uses the DLCI to identify a connection. Figure 1 shows the use of
   the DLCI.

   DLCI        Data Link Connection Identifier
               An address conveyed in a Q.921 message which indicates
               the source and destination of an intended instance of
               communication at the data link layer
               The DLCI is the combination of the TEI and the SAPI

   SAPI        Service Access Point Identifier
               Portion of the DLCI associated with the service access
               point on the network side or the user side of the user-
               network interface. The Service Access Point is the point
               at which the Q.921 data link layer provides services to
               layer 3 (Q.931).


Bouwen             Informational û Expires May 2001                  2

               Megaco Extensions for Data in D-channel  November 2000


   TEI         Terminal Endpoint Identifier
               Portion of a DLCI associated with one (point-to-point
               data link) or more than one (broadcast data link)
               terminal equipment. The TEI is used to identify a
               specific connection endpoint within a Service Access
               Point.


       ###########################    ########################### C P
       #       Terminal 1        #    #       Terminal 2        # U R
       #                         #    #                         # S E
       # +--------+  +--------+  #    #       +---------+       # T M
       # | Packet |  | Q.931  |  #    #       |  Q.931  |       # O I
       # | Data   |  | Sign.  |  #    #       |   Sign. |       # M S
       # +--------+  +--------+  #    #       +---------+       # E E
       #     |           |       #    #          |...|          # R S
       #    /|\ SAPI    /|\ SAPI #    #         /|   |\ SAPI    # '
       #    \|/  16     \|/  0   #    #         \|...|/  0      # S
       #     |           |       #    #          |   |          #
       ######|###########|########    ###########|###|###########
             |           |                       |   |
             |TEI88      |TEI88              TEI3|   |TEI8
             |           |                       |   |
             |           +--------+ +------------+   |
             +------------------+ | | +--------------+
                                | | | |
                                | | | |
                             -->| | | |<--D-Channel
                                | | | |
                                | | | +---------------+            N
                    +-----------+ | +-------------+   |            E
                    |             +-----------+   |   |            T
                    |                         |   |   |            W
                   / \ SAPI                  /|'''|'''|\ SAPI      O
                   \ /  16                   \|...|...|/  0        R
                    |                         |   |   |            K
                +--------+                   +---------+
                | Packet |                   |  Q.931  |
                |  Data  |                   |  Sign.  |
                +--------+                   +---------+

    DLCI = SAPI + TEI

    Figure 1 - Relationship between SAPI, TEI and DLCI (based on [5])

   The Q.921 SAPI differentiates between Q.931 signaling and packet
   data. The SAPI has the value of 0 for Q.931, and 16 for packet data.







Bouwen             Informational û Expires May 2001                  3

               Megaco Extensions for Data in D-channel  November 2000


5. Extensions to Megaco and SDP

   The following example message shows a Megaco message that creates an
   ephemeral termination on top of the D-channel for a data stream that
   is used for connection to the Internet.

   MEGACO/1 [123.123.123.4]:55555
   Transaction = 10003 {
        Context = $ {
                Add = ISDNTerm/BA17/D/$ {
                        Media { Stream = 66 {
                                LocalControl { Mode = SendReceive},
                                Remote {        v=0
                                                c=ISDN DLCI 88
                                                m=data 16 ppp }
                                }
                        },
                Add = $ {
                        Media { Stream = 66 {
                                LocalControl { Mode = SendReceive},
                                --Remote and Local descriptors for
                                IP network data session-- }}
                        }
        }
   }

5.1 New Megaco functionality

   The message contains the following new items:


   Add = ISDNTerm/BA17/D/$

        The command requests the Media Gateway to create an ephemeral
        termination within the D-channel (indicated by the $ after the
        name of the D-channel). The Media Gateway will indicate in its
        response the assigned termination identifier.

   Stream = 66

        A value different from 1 has been selected, as this one is
        reserved for audio

   An ephemeral termination on top of the D-channel is specified with
   the use of ISDN addressing information. This implies that a æRemoteÆ
   descriptor is required. The Remote descriptor contains SDP.

5.2 New SDP functionality

   The SDP part in the Remote descriptor for the ephemeral termination
   on to of the D-channel has the form:

   c=ISDN DLCI 88

Bouwen             Informational û Expires May 2001                  4

               Megaco Extensions for Data in D-channel  November 2000


   m=data 16 ppp

   The components of this description are (modelled on the current use
   of the parameters for IP networks):

   c=ISDN DLCI 88
        The network is the ISDN,
        Q.921 DLCI is the addressing scheme
        The Terminal Equipment Identifier is 88.

   m=data 16 ppp
        A data stream is set up
        to Service Access Point 16, (packet data in the D-channel)
        over PPP.

   The creation of an ephemeral termination on the IP side is basically
   no different from dial-in connections from analogue lines, and is
   not further discussed.



6. Conclusion

   This draft defined the necessary new functionality for the Megaco
   protocol in order to support packet data streams in an ISDN D-
   channel. Extensions to the Megaco syntax and SDP have been
   described. It is proposed that the described extensions are taken
   into consideration for inclusion in version 2 of the Megaco
   protocol.


8. Security Considerations


9. References


   1  Bradner, S., "The Internet Standards Process -- Revision 3", BCP
      9, RFC 2026, October 1996.

   2  Bradner, S., "Key words for use in RFCs to Indicate Requirement
      Levels", BCP 14, RFC 2119, March 1997



10.  Acknowledgments



11. Author's Addresses

   Jan Bouwen
   Alcatel Bell

Bouwen             Informational û Expires May 2001                  5

               Megaco Extensions for Data in D-channel  November 2000


   F. Wellesplein 1
   B-2000 Antwerpen
   Belgium
   Email: jan.bouwen@alcatel.be


















































Bouwen             Informational û Expires May 2001                  6

               Megaco Extensions for Data in D-channel  November 2000



Full Copyright Statement

   "Copyright (C) The Internet Society (date). All Rights Reserved.
   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implmentation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph
   are included on all such copies and derivative works. However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into







































Bouwen             Informational û Expires May 2001                  7
