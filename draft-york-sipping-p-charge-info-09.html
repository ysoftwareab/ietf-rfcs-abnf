<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>P-Charge-Info - A Private Header (P-Header) Extension to the Session Initiation
      Protocol (SIP)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="P-Charge-Info - A Private Header (P-Header) Extension to the Session Initiation
      Protocol (SIP)">
<meta name="keywords" content="p-header">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">SIPPING</td><td class="header">D. York</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Voxeo</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">T. Asveren</td></tr>
<tr><td class="header">Expires: April 16, 2011</td><td class="header">Sonus</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">October 13, 2010</td></tr>
</table></td></tr></table>
<h1><br />P-Charge-Info - A Private Header (P-Header) Extension to the Session Initiation
      Protocol (SIP)<br />draft-york-sipping-p-charge-info-09</h1>

<h3>Abstract</h3>

<p>This document describes 'P-Charge-Info', a private Session
       Initiation Protocol (SIP) header (P-header) used to convey billing information
       about the party to be charged.  This P-Header is currently
       in production usage by a number of equipment vendors and carriers
       and this document is submitted to request the registration of
       this header with IANA as required by section 4.2 of RFC 3427 and 
       RFC 3968. This P-Header may also be used in some situations to carry 
       the ISUP Charge Number parameter for PSTN interconnection.
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on April 16, 2011.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Overview<br />
<a href="#anchor2">2.</a>&nbsp;
Requirements Language<br />
<a href="#Purpose">3.</a>&nbsp;
Purpose of this Document<br />
<a href="#ProblemExplanation">4.</a>&nbsp;
Examples of the Problem<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#UseCase-BillingID">4.1.</a>&nbsp;
Use Case - Billing Identifier<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#UseCase-ISUPChargeNumber">4.2.</a>&nbsp;
Use Case - ISUP
    Charge Number<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#UseCase-DistributedEnterprise">4.3.</a>&nbsp;
Use Case -
    Distributed Enterprise<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#UseCase-HostedTelephonyProvider">4.4.</a>&nbsp;
Use Case -
    Hosted Telephony Provider<br />
<a href="#Alternatives">5.</a>&nbsp;
Alternatives<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#P-Charging-Vector">5.1.</a>&nbsp;
P-Charging-Vector<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#P-DCS-Billing-Info">5.2.</a>&nbsp;
P-DCS-Billing-Info<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#P-Asserted-Identity">5.3.</a>&nbsp;
P-Asserted-Identity<br />
<a href="#P-Charge-Info">6.</a>&nbsp;
The P-Charge-Info Header<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#applicability">6.1.</a>&nbsp;
Applicability Statement for the P-Charge-Info header<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#usage">6.2.</a>&nbsp;
Usage of the P-Charge-Info header<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#usage-ua">6.2.1.</a>&nbsp;
Procedures at the UA<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#usage-proxies">6.2.2.</a>&nbsp;
Procedures at the Proxy<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#example">6.3.</a>&nbsp;
Examples of Usage<br />
<a href="#formalsyntax">7.</a>&nbsp;
Formal Syntax<br />
<a href="#IANA">8.</a>&nbsp;
IANA Considerations<br />
<a href="#Security">9.</a>&nbsp;
Security Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#TrustRelationship">9.1.</a>&nbsp;
Trust Relationship<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#SecurityUntrustedPeers">9.2.</a>&nbsp;
Untrusted Peers<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#UntrustedPeersIngress">9.2.1.</a>&nbsp;
Ingress from
       Untrusted Peers<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#UntrustedPeersEgress">9.2.2.</a>&nbsp;
Egress to
       Untrusted Peers<br />
<a href="#acknowledgements">10.</a>&nbsp;
Acknowledgements<br />
<a href="#Changes">11.</a>&nbsp;
Changes<br />
<a href="#appendixa">12.</a>&nbsp;
Appendix A: NPI Parameter Values<br />
<a href="#rfc.references1">13.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">13.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">13.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Overview</h3>

<p>In certain network configurations, it is desirable to decouple
	the identity of the caller (what is normally thought of as "Caller
	ID") from the identity/number used for billing purposes.  This
	document describes the current usage of 'P-Charge-Info', a private
	SIP header, to provide simple billing information and requests the
	registration of this header with IANA as required by section 4.2 of
	 <a class='info' href='#RFC3427'>RFC 3427<span> (</span><span class='info'>Mankin, A., Bradner, S., Mahy, R., Willis, D., Ott, J., and B. Rosen, &ldquo;Change Process for the Session Initiation Protocol (SIP),&rdquo; December&nbsp;2002.</span><span>)</span></a> [RFC3427] and section 3 of 
	  <a class='info' href='#RFC3968'>RFC 3968<span> (</span><span class='info'>Camarillo, G., &ldquo;The Internet Assigned Number Authority (IANA) Header Field Parameter Registry for the Session Initiation Protocol (SIP),&rdquo; December&nbsp;2004.</span><span>)</span></a> [RFC3968]..
</p>
<p>In a typical configuration, the identity of the caller, commonly
	referred to as "Caller ID" by end users, is derived from one of the
	following SIP headers:</p>
<ul class="text">
<li>P-Asserted-Identity
</li>
<li>From (in the absence of P-Asserted-Identity)
</li>
</ul><p>(NOTE: Some service providers today also use the
	"Remote-Party-ID" header but this was replaced by
	P-Asserted-Identity in RFC 3325.)
</p>
<p>This identity/number is typically presented to the receiving UA where
	it is usually displayed for the end user.  It is also typically
	used for billing purposes by the network entities involved in
	carrying the session.  
</p>
<p>However, in some network configurations the "Caller ID" presented
	to the receiving UA may be different from the number desired to be
	used for billing purposes.
</p>
<p>For example, the "Caller ID" may not reflect the actual reality of 
	the underlying network in terms of costs incurred on the PSTN. This 
	may result in excessive charging of one carrier by another based on the
	erroneous assumption that the call was originating from a different
	point on the PSTN.
</p>
<p>Another example would be where a gateway to the Public Switched
	Telephone Network (PSTN) receives the ISUP "Charge Number" in the
	PSTN signaling which designates the number to be billed.  The
	gateway needs to pass this information along to a SIP entity
	associated with billing.
</p>
<p>In both these examples, there exists a need for a way to pass 
	an additional billing
	identifier that can be used between network entities in order to
	correctly bill for services.  At least one equipment provider,
	Sonus Networks, and several carriers have been using the
	"P-Charge-Info" header for the last 2-3 years as a simple 
	mechanism to exchange this billing identifier.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Requirements Language</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
        "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
        document are to be interpreted as described in RFC 2119.
</p>
<a name="Purpose"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Purpose of this Document</h3>

<p>This document has been prepared to comply with section 4.2 of  
        <a class='info' href='#RFC3427'>RFC 3427<span> (</span><span class='info'>Mankin, A., Bradner, S., Mahy, R., Willis, D., Ott, J., and B. Rosen, &ldquo;Change Process for the Session Initiation Protocol (SIP),&rdquo; December&nbsp;2002.</span><span>)</span></a> [RFC3427] which states very clearly:
       </p>
<blockquote class="text">
<p>All implemented P-headers SHOULD meet the P-Header requirements in 4.1. 
   Any P-header used outside of a very restricted research or teaching environment
   (such as a student lab on implementing extensions) MUST meet those
   requirements and MUST be documented in an RFC and be IANA registered.
</p>
</blockquote><p> 
</p>
<p>This document is submitted to comply with the process outlined in
section RFC 3427 Section 4.1 and the registration requirements in Section
4.2.
</p>
<a name="ProblemExplanation"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Examples of the Problem</h3>

<a name="UseCase-BillingID"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Use Case - Billing Identifier</h3>

<p>The simplest use case for P-Charge-Info could be an enterprise
    environment where each SIP endpoint has a direct number that is passed
    by the enterprise SIP proxy across to a SIP proxy at a SIP Service
    Provider who provides PSTN connectivity.  Rather than cause the SIP
    Service Provider to have to track each individual direct number for
    billing purposes, the enterprise SIP proxy could send in the
    P-Charge-Info header a single billing identifier that the SIP Service
    Provider uses for billing purposes.
</p>
<a name="UseCase-ISUPChargeNumber"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Use Case - ISUP
    Charge Number</h3>

<p>A second use case is one in which a PSTN gateway receives PSTN
    signaling that includes an ISUP Charge Number parameter and the PSTN
    gateway needs to send that ISUP Charge Number via SIP to other servers. 
    In this instance, the PSTN gateway will insert the ISUP Charge Number
    into the P-Charge-Info SIP header.
</p>
<a name="UseCase-DistributedEnterprise"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
Use Case -
    Distributed Enterprise</h3>

<p>A third and common use case is a large enterprise with a widely
      distributed SIP network to designate the specific point at which PSTN
      interconnection occurs.  Consider an enterprise with a work force and
      offices distributed over a wide geographic area and linked by a
      common internal network over which voice traffic is sent. Users
      across the network may be able to contact each other directly via SIP
      sessions, but there may only be a relatively few points in the
      network where interconnection occurs to the PSTN.  Consider this
      case:
</p>
<p></p>
<ul class="text">
<li>A branch office in Massachusetts has a series of IP phones that are
	 connected via SIP to systems in the main office in Colorado and from
	 there via SIP connections to the PSTN through a SIP service
	 provider.
</li>
<li>The phones in the Massachusetts office have each been assigned a
	 direct, local phone number in the US area code of 617.
</li>
<li>This local 617 phone number is presented to callers on the PSTN
	 as the "Caller ID" based on its inclusion in the From and/or
	 P-Asserted-Identity SIP headers.
</li>
<li>This local 617 phone number may also be used by the SIP service
	 provider as the billing identifier and the call will be charged to
	 the enterprise according to the relevant rates.
</li>
<li>However, the call actually connected to the PSTN via the SIP
	 connection in the Colorado office where the USA area code is 303.
	 
</li>
</ul><p>Rather than use the direct numbers of each SIP endpoint for
      generating the billing information, the enterprise might choose to
      instead pass the SIP URI of the PSTN interconnection point in the
      P-Charge-Info header, either for simplicity or potentially to obtain
      better rates from the SIP service provider.
</p>
<a name="UseCase-HostedTelephonyProvider"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4"></a><h3>4.4.&nbsp;
Use Case -
    Hosted Telephony Provider</h3>

<p>Similar to the third use case of a large enterprise, a hosted 
      telephony provider or hosted voice application provider may have a 
      large SIP network with customers distributed over a very large
      geographic area using local market PSTN numbers but with only a very
      few actual PSTN interconnection points.
</p>
<p>As with the branch office earlier, the customer may have all local
      phone numbers yet outgoing calls are actually being routed across a
      SIP network and out specific PSTN gateways or across specific SIP
      connections to SIP service providers. The hosted provider may want to
      pass a billing identifier to its SIP service providers again either
      for the purpose of simplicity in billing or to obtain better rates
      from the SIP service providers.
</p>
<a name="Alternatives"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Alternatives</h3>

<a name="P-Charging-Vector"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
P-Charging-Vector</h3>

<p>P-Charging-Vector is defined in section 4.6 of <a class='info' href='#RFC3455'>RFC
	3455<span> (</span><span class='info'>Garcia-Martin, M., Henrikson, E., and D. Mills, &ldquo;Private Header (P-Header) Extensions to the Session Initiation Protocol (SIP) for the 3rd-Generation Partnership Project (3GPP),&rdquo; January&nbsp;2003.</span><span>)</span></a> [RFC3455] and used by the 3GPP to carry information related to
	the charging of a session. There are, however, some differences 
	in the semantics associated with P-Charging-Vector and
	P-Charge-Info.  P-Charging-Vector is mainly used to carry information for 
	correlation of multiple charging records generated for a single session. 
	On the other hand, P-Charge-Info is used to convey information about 
	the party to be billed for a call. Furthermore, P-Charging-Vector has 
	a mandatory icid-value parameter which is a globally unique value to 
	identify the session for which the charging information is generated. 
	Such a globally-unique identifier is not necessary when carrying 
	information about the user to be billed when it is attached to the 
	corresponding session-related signaling.
</p>
<a name="P-DCS-Billing-Info"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
P-DCS-Billing-Info</h3>

<p>P-DCS-Billing-Info is defined in section 7 of <a class='info' href='#RFC3603'>RFC
      3603<span> (</span><span class='info'>Marshall, W. and F. Andreasen, &ldquo;Private Session Initiation Protocol (SIP) Proxy-to-Proxy Extensions for Supporting the PacketCable Distributed Call Signaling Architecture,&rdquo; October&nbsp;2003.</span><span>)</span></a> [RFC3603] and used for passing billing information between trusted 
      entities in the PacketCable Distributed Call Signaling Architecture.
      For many billing situations, particularly the very large-scale
      residential telephone networks for which this header is designed,
      P-DCS-Billing-Info is an excellent solution. However, this ability to
      address a range of situations adds complexity. According to RFC 3603,
      each use of the P-DCS-Billing-Info header MUST include in the header
      the following:
      </p>
<ul class="text">
<li>Billing-Correlation-ID, a globally unique identifier
</li>
<li>Financial-Entity-ID
</li>
<li>RKS-Group-ID (record keeping server
</li>
</ul><p>
      and may include a variety of additional parameters.
</p>
<p>While this may work well in many billing scenarios, there are
      other billing scenarios that do not at all need this level of
      complexity. In those simpler scenarios all that is needed is simply a
      number to use for billing. P-Charge-Info provides this simple
      solution for simple billing scenarios.
</p>
<p>Additionally, section 7.3 of RFC 3603 mandates that a UA MUST create a
      Billing-Correlation-ID and insert this into the P-DCS-Billing-Info
      header (along with the other required information) sent in the initial 
      SIP INVITE. This again makes sense for the residential telephone
      service environment for which this header is designed. In contrast,
      P-Charge-Info is designed to be used among proxies and not to be used
      at all by normal user agents. (P-Charge-Info may, though, by used by user agents
      associated with PSTN gateways.)
</p>
<a name="P-Asserted-Identity"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
P-Asserted-Identity</h3>

<p>Early reviewers of this document asked why the "P-Asserted-Identity"
      header documented in <a class='info' href='#RFC3325'>RFC 3325<span> (</span><span class='info'>Jennings, C., Peterson, J., and M. Watson, &ldquo;Private Extensions to the Session Initiation Protocol (SIP) for Asserted Identity within Trusted Networks,&rdquo; November&nbsp;2002.</span><span>)</span></a> [RFC3325] could not
      be used. As mentioned in the use case example above,
      P-Asserted-Identity is used to indicate the identity of the calling
      party. However, in this instance, the requirement is to provide an
      additional identity of the SIP-to-PSTN interconnect point. 
</p>
<p>It would be typical to find both P-Asserted-Identity and
      P-Charge-Info used in a SIP exchange. P-Asserted-Identity would be
      used to provide the caller identity which would be displayed to the
      end user as "Caller ID" while P-Charge-Info would provide the billing
      identifier used for the billing associated with the call.
</p>
<a name="P-Charge-Info"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
The P-Charge-Info Header</h3>

<a name="applicability"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
Applicability Statement for the P-Charge-Info header</h3>

<p>The P-Charge-Info header is applicable within a single private
	  administrative domain or between different administrative domains
	  where there is a trust relationship between the domains.
</p>
<a name="usage"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2"></a><h3>6.2.&nbsp;
Usage of the P-Charge-Info header</h3>

<p>The P-Charge-Info header is used to convey information about
	 the identity of the party to be charged.  The P-Charge-Info header
	 is typically inserted by one of the following:</p>
<ul class="text">
<li>the SIP proxy on the originating network;
</li>
<li>a PSTN gateway acting as a SIP UA; or
</li>
<li>an application server generating billing information.
</li>
</ul>

<p>P-Charge-Info is to be consumed by the SIP entity that
	      provides billing services for a session. This could be an
	      entity generating billing records or an entity interacting
	      with another enitity generating billing records. Upon receipt
	      of an INVITE request with P-Charge-Info header, such an
	      entity SHOULD use the value present in the P-Charge-Info as
	      indicating the party responsible for the charges associated
	      with the session.
</p>
<a name="usage-ua"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2.1"></a><h3>6.2.1.&nbsp;
Procedures at the UA</h3>

<p>The P-Charge-Info header may be inserted by PSTN gateways
	      or application servers
	      acting as a SIP UA, either through local policy or as a
	      result of information received via PSTN signaling, e.g. the
	      Charge Number parameter in an ISUP IAM message.
</p>
<p>The P-Charge-Info header is not used/interpreted by a
	      regular UA and should not normally be seen
	      by such a UA. If the header is transmitted to such a UA, the UA
	      SHOULD ignore the header.
</p>
<p>A PSTN gateway or application server acting as a UA MAY use 
	      the content of the P-Charge-Info header 
	      present in an INVITE request it received for billing related 
	      procedures, e.g. in a billing record or during interaction with 
	      another entity generating billing records, as the identity of 
	      the party to be charged for the session. A PSTN gateway or
	      application server acting as a UA MAY use 
	      the content of the P-Charge-Info header to populate information 
	      about the identity of the party to charge in another type of 
	      signaling, e.g. ISUP.
</p>
<a name="usage-proxies"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2.2"></a><h3>6.2.2.&nbsp;
Procedures at the Proxy</h3>

<p>A SIP proxy that supports this extension and receives a
	    request, typically a SIP INVITE, without the P-Charge-Info
	    header MAY insert a P-Charge-Info header. The contents of the
	    inserted header may be decided based on local policy or by
	    querying an external entity to determine the identity of the
	    party to be charged.
</p>
<p>A proxy MAY use the content of the P-Charge-Info header
	    present in an INVITE request it received for billing related
	    procedures, e.g. in a billing record or during interaction with
	    another entity generating billing records.
</p>
<p>A SIP proxy that does not support this extension will pass
	    any received P-Charge-Info header unmodified in compliance with
	    RFC 3261.
</p>
<p>A proxy supporting this extension SHOULD remove the
	    P-Charge-Info header before sending a request to a UA that is
	    not acting as a PSTN gateway or appropriate application server.
</p>
<a name="example"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.3"></a><h3>6.3.&nbsp;
Examples of Usage</h3>

<p>The content of the P-Charge-Info header is typically simply a SIP URI used
       as a billing indicator.  As such, an example would be as simple as:
</p>
<p>P-Charge-Info: &lt;sip:4075555555@1.2.3.4&gt;
</p>
<p>Any other applicable SIP URI could be used.
</p>
<p>P-Charge-Info optionally includes the additional parameters of
       the "Numbering Plan Indicator" and "Nature of Address".  These are used when 
       the ISUP Charge Number value needs to be passed as part of
       P-Charge-Info. For instance, this might be required in a
       SIP message for scenarios where SIP is used to connect two PSTN segments
       and needs to pass charging information between them. An example of
       the usage of the optional header is:
</p>
<p>P-Charge-Info: &lt;sip:6835555555@10.10.7.21&gt;;npi=ISDN;noa=3
</p>
<a name="formalsyntax"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Formal Syntax</h3>

<p>The Private Header specified in this document is described in
   both prose and an augmented Backus-Naur Form (BNF) defined in RFC
   2234.  Further, several BNF definitions are inherited from SIP
   and are not repeated here.  Implementors need to be familiar with the
   notation and contents of SIP [1] and RFC 2234 [3] to understand this
   document.
</p>
<p>The syntax of the P-Charge-Info header is described as follows:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      P-Charge-Info = "P-Charge-Info" HCOLON (name-addr / addr-spec)*
              (SEMI charge-param)
              ; name-addr and addr-spec are specified in RFC 3261
          charge-param = npi-param / noa-param / generic-param
          npi-param = "npi" EQUAL npi-value
              ; generic-param is specifed in RFC 3261
          npi-value = ("UNKNOWN" / "ISDN" / "SPARE2" / "DATA" /
              "TELEX" / "PRIVATE" / "SPARE6" / "SPARE7")
          noa-param = "noa" EQUAL noa-value
          noa-value = gen-value
</pre></div>
<p>Additional information about the "npi-value" is in Appendix A.
</p>
<a name="IANA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
IANA Considerations</h3>

<p>This document defines a private SIP extension header field
      (beginning with the prefixe "P-").
</p>
<p>The extension is registered as a private extension field:
</p>
<p>RFC Number:	RFCXXXX [Note to IANA: Please fill in with the RFC number
      of this specification.
</p>
<p>Header Field Name:  P-Charge-Info
</p>
<p>Compact Form:  none
</p>
<a name="Security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Security Considerations</h3>

<a name="TrustRelationship"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.1"></a><h3>9.1.&nbsp;
Trust Relationship</h3>

<p>Given that the information contained in the P-Charge-Info header
       will be used for billing purposes the proxies and other SIP entities
       that share this information MUST have a trust relationship.
</p>
<p>If an untrusted entity were inserted between the trusted
       entities, it could potentially interfere with the billing records
       for the call.  If the SIP connections are not made over a private
       WAN, a mechanism for securing the confidentiality and integrity of
       the SIP connection should be used to protect the information. One
       such mechanism could be TLS-encryption of the SIP signaling stream.
</p>
<a name="SecurityUntrustedPeers"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.2"></a><h3>9.2.&nbsp;
Untrusted Peers</h3>

<a name="UntrustedPeersIngress"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.2.1"></a><h3>9.2.1.&nbsp;
Ingress from
       Untrusted Peers</h3>

<p>If the P-Charge-Info header was accepted by a SIP entity from an
       untrusted peer, there is the potential for fraud if the untrusted
       entity sent incorrect information, either inadvertently or
       maliciously.
</p>
<p>Therefore a SIP entity MUST remove and ignore the P-Charge-Info
       header when it is received from an untrusted entity.
</p>
<a name="UntrustedPeersEgress"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.2.2"></a><h3>9.2.2.&nbsp;
Egress to
       Untrusted Peers</h3>

<p>If the P-Charge-Info header was sent by a SIP entity to an
       untrusted peer, there is the potential exposure of network
       information that is internal to a trust domain.  For instance, the
       untrusted entity may learn the identities of public SIP proxies used
       within the trust domain which could then potentially be directly
       attacked.
</p>
<p>Therefore a SIP entity MUST remove the P-Charge-Info
       header when it is sent to an untrusted entity.
</p>
<a name="acknowledgements"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
Acknowledgements</h3>

<p>The authors thank the following people for their comments,
      criticism, suggestions and assistance with ABNF notation: Keith
      Drage, Miguel Garcia, Christer Holmberg, Paul Kyzivat, Jonathan
      Rosenberg, Juha Heinanen and Sumit Garg.
</p>
<p>For revision -05, the authors thank John Haluska who provided a
      range of comments and specific information related to interworking
      with the ISUP Charge Number.
</p>
<p>For revision -08, the authors thank Glen Wang who helped clarify
      the NPI parameter values with the reference to ANSI T1.113.
</p>
<a name="Changes"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11"></a><h3>11.&nbsp;
Changes</h3>

<p>NOTE TO RFC EDITOR - Please remove this "Changes" section prior to
      publication. Thank you.
</p>
<p>Revision -09 included the following modifications:
      </p>
<ul class="text">
<li>Re-submitted with only a date change. Discussions are ongoing to finalize
	 this draft and submit it for expert review.
</li>
</ul>

<p>Revision -08 included the following modifications:
      </p>
<ul class="text">
<li>The ABNF for the "npi-value" was modified to conform to the 
	 sequence of possible values stated in ANSI T1.113.
</li>
<li>An Appendix A was created listing the values from ANSI T1.113.
</li>
</ul>

<p>Revision -07 was updated to the "trust200902" IPR statement and added
      references to RFC 3968.  At this point all comments have been incorporated
      and publication will be requested.
</p>
<p>Revision -06 had only a minor correction to the second usage
      example. The IPR statement was also updated to comply with RFC 5378.
</p>
<p>Revision -05 included the following modifications:</p>
<ul class="text">
<li>The usage of P-Charge-Info for carrying the ISUP Charge Number
	 parameter was formally incorporated into the draft. Previous
	 revisions had mentioned it as a possible use case but had not
	 really explicitly included it.
</li>
<li>The examples/use cases section was expanded to include further
	 examples of where P-Charge-Info may be used.
</li>
<li>The original use case which discussed inter/intra-state billing
	 practices was changed as the geographical references were clouding
	 the more fundamental issue.
</li>
<li>The "UNKNOWN" value was added to the ABNF for the "npi-value"
	 parameter as that was identified as missing but required for ISUP
	 interworking.
</li>
<li>The optional "Nature of Address" parameter was added to support
	 interworking with the ISUP Charge Number.
</li>
</ul>

<p>Revision -04 corrected a major error in the example where the
      parameter was placed inside the angle brackets.  The
      P-DCS-Billing-Info header was also added as an alternative and a few
      minor edits were made.
</p>
<a name="appendixa"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12"></a><h3>12.&nbsp;
Appendix A: NPI Parameter Values</h3>

<p>To better understand the possible values for the optional NPI parameter, 
    ANSI T1.113 states that the 'numbering plan indicator' may contain the 
    following values:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
       000 unknown (no interpretation)
       001 ISDN (Telephony) numbering plan (Recommendation E-164)
       010 spare (no interpretation)
       011 reserved (CCITT Data numbeting plan)
       100 reserved (CCITT Telex numbering plan)
       101 Private numbering plan
       110 spare (no interpretation)
       111 spare (no interpretation)
</pre></div>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.13"></a><h3>13.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>13.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC3427">[RFC3427]</a></td>
<td class="author-text">Mankin, A., Bradner, S., Mahy, R., Willis, D., Ott, J., and B. Rosen, &ldquo;<a href="http://tools.ietf.org/html/rfc3427">Change Process for the Session Initiation Protocol (SIP)</a>,&rdquo; RFC&nbsp;3427, December&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3427.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3968">[RFC3968]</a></td>
<td class="author-text">Camarillo, G., &ldquo;<a href="http://tools.ietf.org/html/rfc3968">The Internet Assigned Number Authority (IANA) Header Field Parameter Registry for the Session Initiation Protocol (SIP)</a>,&rdquo; BCP&nbsp;98, RFC&nbsp;3968, December&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3968.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>13.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC3325">[RFC3325]</a></td>
<td class="author-text">Jennings, C., Peterson, J., and M. Watson, &ldquo;<a href="http://tools.ietf.org/html/rfc3325">Private Extensions to the Session Initiation Protocol (SIP) for Asserted Identity within Trusted Networks</a>,&rdquo; RFC&nbsp;3325, November&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3325.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3455">[RFC3455]</a></td>
<td class="author-text">Garcia-Martin, M., Henrikson, E., and D. Mills, &ldquo;<a href="http://tools.ietf.org/html/rfc3455">Private Header (P-Header) Extensions to the Session Initiation Protocol (SIP) for the 3rd-Generation Partnership Project (3GPP)</a>,&rdquo; RFC&nbsp;3455, January&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3455.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3603">[RFC3603]</a></td>
<td class="author-text">Marshall, W. and F. Andreasen, &ldquo;<a href="http://tools.ietf.org/html/rfc3603">Private Session Initiation Protocol (SIP) Proxy-to-Proxy Extensions for Supporting the PacketCable Distributed Call Signaling Architecture</a>,&rdquo; RFC&nbsp;3603, October&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3603.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Dan York</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Voxeo Corporation</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Keene, NH  </td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1-407-455-5859</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:dyork@voxeo.com">dyork@voxeo.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.voxeo.com/">http://www.voxeo.com/</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Tolga Asveren</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Sonus Networks</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">3 Paragon Way</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Freehold, NJ  07728</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:tasveren@sonusnet.com">tasveren@sonusnet.com</a></td></tr>
</table>
</body></html>
