<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Synchronizing Location-to-Service Translation (LoST) Protocol based Service Boundaries and Mapping Elements</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Terminology">
<link href="#rfc.section.3" rel="Chapter" title="3 Querying for Mappings with a &lt;getMappingsRequest&gt; / &lt;getMappingsResponse&gt; Exchange ">
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 Behavior of the LoST Sync Source">
<link href="#rfc.section.3.2" rel="Chapter" title="3.2 Behavior of the LoST Sync Source">
<link href="#rfc.section.3.3" rel="Chapter" title="3.3 Examples">
<link href="#rfc.section.4" rel="Chapter" title="4 Pushing Mappings via &lt;pushMappings&gt; and &lt;pushMappingsResponse&gt;">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 Behavior of the LoST Sync Source">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Behavior of the LoST Sync Destination">
<link href="#rfc.section.4.3" rel="Chapter" title="4.3 Example">
<link href="#rfc.section.5" rel="Chapter" title="5 Transport">
<link href="#rfc.section.6" rel="Chapter" title="6 RelaxNG">
<link href="#rfc.section.7" rel="Chapter" title="7 Operational Considerations">
<link href="#rfc.section.8" rel="Chapter" title="8 Security Considerations">
<link href="#rfc.section.9" rel="Chapter" title="9 IANA Considerations">
<link href="#rfc.section.9.1" rel="Chapter" title="9.1 Content-type registration for 'application/lostsync+xml'">
<link href="#rfc.section.9.2" rel="Chapter" title="9.2 LoST Sync Relax NG Schema Registration">
<link href="#rfc.section.9.3" rel="Chapter" title="9.3 LoST Synchronization Namespace Registration">
<link href="#rfc.section.10" rel="Chapter" title="10 Acknowledgments">
<link href="#rfc.references" rel="Chapter" title="11 References">
<link href="#rfc.references.1" rel="Chapter" title="11.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="11.2 Informative References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="The Location-to-Service Translation (LoST) protocol is an XML-based protocol for mapping service identifiers and geodetic or civic location information to service URIs and service boundaries. In particular, it can be used to determine the location-appropriate Public Safety Answering Point (PSAP) for emergency services. " />
  <meta name="description" content="The Location-to-Service Translation (LoST) protocol is an XML-based protocol for mapping service identifiers and geodetic or civic location information to service URIs and service boundaries. In particular, it can be used to determine the location-appropriate Public Safety Answering Point (PSAP) for emergency services. " />
  <meta name="keywords" content="Internet-Draft, Location" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">ECRIT</td>
<td class="right">H. Schulzrinne</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">Columbia University</td>
</tr>
<tr>
<td class="left">Intended status: Experimental Protocol</td>
<td class="right">H. Tschofenig</td>
</tr>
<tr>
<td class="left">Expires: September 30, 2011</td>
<td class="right">Nokia Siemens Networks</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">March 29, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Synchronizing Location-to-Service Translation (LoST) Protocol based Service Boundaries and Mapping Elements<br />
  <span class="filename">draft-ietf-ecrit-lost-sync-10.txt</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>The Location-to-Service Translation (LoST) protocol is an XML-based protocol for mapping service identifiers and geodetic or civic location information to service URIs and service boundaries. In particular, it can be used to determine the location-appropriate Public Safety Answering Point (PSAP) for emergency services. </p>
<p>The main data structure, the &lt;mapping&gt; element, used for encapsulating information about service boundaries is defined in the LoST protocol specification and circumscribes the region within which all locations map to the same service Uniform Resource Identifier (URI) or set of URIs for a given service.</p>
<p>This document defines an XML protocol to exchange these mappings between two nodes.  This mechanism is designed for the exchange of authoritative &lt;mapping&gt; elements between two entities. Exchanging cached &lt;mapping&gt; elements, i.e. non-authoritative elements, is possible but not envisioned. In any case, this document can also be used without the LoST protocol even though the format of the &lt;mapping&gt; element is re-used from the LoST specification.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on September 30, 2011.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Terminology</a>
</li>
<li>3.   <a href="#rfc.section.3">Querying for Mappings with a &lt;getMappingsRequest&gt; / &lt;getMappingsResponse&gt; Exchange </a>
</li>
<li>3.1.   <a href="#rfc.section.3.1">Behavior of the LoST Sync Source</a>
</li>
<li>3.2.   <a href="#rfc.section.3.2">Behavior of the LoST Sync Source</a>
</li>
<li>3.3.   <a href="#rfc.section.3.3">Examples</a>
</li>
<li>4.   <a href="#rfc.section.4">Pushing Mappings via &lt;pushMappings&gt; and &lt;pushMappingsResponse&gt;</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">Behavior of the LoST Sync Source</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">Behavior of the LoST Sync Destination</a>
</li>
<li>4.3.   <a href="#rfc.section.4.3">Example</a>
</li>
<li>5.   <a href="#rfc.section.5">Transport</a>
</li>
<li>6.   <a href="#rfc.section.6">RelaxNG</a>
</li>
<li>7.   <a href="#rfc.section.7">Operational Considerations</a>
</li>
<li>8.   <a href="#rfc.section.8">Security Considerations</a>
</li>
<li>9.   <a href="#rfc.section.9">IANA Considerations</a>
</li>
<li>9.1.   <a href="#rfc.section.9.1">Content-type registration for 'application/lostsync+xml'</a>
</li>
<li>9.2.   <a href="#rfc.section.9.2">LoST Sync Relax NG Schema Registration</a>
</li>
<li>9.3.   <a href="#rfc.section.9.3">LoST Synchronization Namespace Registration</a>
</li>
<li>10.   <a href="#rfc.section.10">Acknowledgments</a>
</li>
<li>11.   <a href="#rfc.references">References</a>
</li>
<li>11.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>11.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">The <a href="#RFC5222">LoST (Location-to-Service Translation) protocol</a> <cite title="NONE">[RFC5222]</cite> maps service identifiers and geodetic or civic location information to service URIs.  The main data structure, the &lt;mapping&gt; element, used for encapsulating information about service boundaries is defined in the LoST protocol specification and circumscribes the region within which all locations map to the same service Uniform Resource Identifier (URI) or set of URIs for a given service.</p>
<p id="rfc.section.1.p.2">This mechanism is designed for the exchange of authoritative &lt;mapping&gt; elements between two entities (the LoST Sync source and the LoST Sync destination).</p>
<p id="rfc.section.1.p.3">The LoST Sync mechanism can, for example, be used in the LoST architecture, as specified in the <a href="#RFC5582">[RFC5582]</a>. There, LoST servers act in different roles that cooperate to provide an ubiquitous, globally scalable and resilient mapping service. In the LoST mapping architecture, LoST servers can peer, i.e., have an on-going data exchange relationship. Peering relationships are set up manually, based on local policies. A server can peer with any number of other servers. Forest guides peer with other forest guides; resolvers peer with forest guides and other resolvers (in the same cluster); authoritative mapping servers peer with forest guides and other authoritative servers, either in the same cluster or above or below them in the tree. Authoritative mapping servers push coverage regions "up" the tree, i.e., from child nodes to parent nodes. The child informs the parent of the geospatial or civic region that it covers for a specific service.</p>
<p id="rfc.section.1.p.4">Consider a hypothetical deployent of LoST in two countries, we call them Austria and Finland. Austria, in our example, runs three authoritative LoST servers labeled as 'East', 'West' and 'Vienna' whereby the former two cover the entire country expect for Vienna, which is covered by a separate LoST server. There may be other caching LoST servers run by ISPs, universities, and VSPs but they are not relevant for this illustration. Finland, on the other hand, decided to only deploy a single LoST server that also acts as a Forest Guide. For this simplistic illustration we assume that only one service is available, namely 'urn:service:sos' since otherwise the number of stored mappings would have to be multiplied by the number of used services.</p>
<div id="#rfc.figure.1"></div>
<div id="#example-deployment"></div>
<pre>
                   +---LoST-Sync--&gt;\\     //&lt;--LoST-Sync----+
                   |                 -----                  |
                   |                                        |
                   \/                                       \/
                 -----                                     -----
               //     \\                                 //     \\
              /         \                               /         \
             |  Forest   |                             |   Forest  |
             |  Guide    |                             |   Guide   |
             |  Austria  |                             |   Finland
              \         /                               \         /
    +---------&gt;\\     //&lt;--------+                       \\     //
    |            -----           |                         -----
    |             /\             |                           |
  LoST            |             LoST                     //------\\
  Sync           LoST           Sync                    |Co-Located|
    |            Sync            |                      |   LoST   |
    \/            |              \/                     | Server   |
 //----\\         \/          //----\\                   \\------//
|  LoST  |     //----\\      |  LoST  |
| Server |    |  LoST  |     | Server |
| (East) |    | Server |     |(Vienna)|
 \\----//     | (West) |      \\----//
               \\----//
</pre>
<p><a href="#example-deployment">Figure 1</a> shows the example deployment. </p>
<div id="#rfc.figure.2"></div>
<div id="#fg-austria"></div>
<pre>
&lt;mapping 
    expires="2009-01-01T01:44:33Z" 
    lastUpdated="2009-12-01T01:00:00Z"
    source="east-austria.lost-example.com" 
    sourceId="e8b05a41d8d1415b80f2cdbb96ccf109"&gt;
    &lt;displayName xml:lang="en"&gt;LoST Server 'East' &lt;/displayName&gt;
    &lt;service&gt;urn:service:sos&lt;/service&gt;
    &lt;serviceBoundary profile="geodetic-2d"&gt;
        &lt;p2:Polygon srsName="urn:ogc:def::crs:EPSG::4326"&gt;
            &lt;p2:exterior&gt;
                &lt;p2:LinearRing&gt;
                    &lt;p2:pos&gt; ... &lt;/p2:pos&gt;                    
                    ..... list of coordinates for 
                    boundary of LoST server 'East'
                    &lt;p2:pos&gt; ... &lt;/p2:pos&gt;
                &lt;/p2:LinearRing&gt;
            &lt;/p2:exterior&gt;
        &lt;/p2:Polygon&gt;
    &lt;/serviceBoundary&gt;
    &lt;uri/&gt;
&lt;/mapping&gt;
                                </pre>
<div id="#rfc.figure.3"></div>
<div id="#fg-finland"></div>
<pre>
&lt;mapping 
    expires="2007-01-01T01:44:33Z" 
    lastUpdated="2006-11-01T01:00:00Z"
    source="finland.lost-example.com" 
    sourceId="7e3f40b098c711dbb6060800200c9a66"&gt;
    &lt;displayName xml:lang="en"&gt; Finland ESRP &lt;/displayName&gt;
    &lt;service&gt;urn:service:sos&lt;/service&gt;
    &lt;serviceBoundary profile="civic"&gt;
        &lt;civicAddress 
            xmlns="urn:ietf:params:xml:ns:pidf:geopriv10:civicAddr"&gt;
            &lt;country&gt;FI&lt;/country&gt;
        &lt;/civicAddress&gt;
    &lt;/serviceBoundary&gt;
    &lt;uri/&gt;
&lt;/mapping&gt;
</pre>
<div id="#rfc.figure.4"></div>
<div id="#lost-finland"></div>
<pre>
&lt;mapping 
    expires="2007-01-01T01:44:33Z" 
    lastUpdated="2006-11-01T01:00:00Z"
    source="finland.lost-example.com" 
    sourceId="7e3f40b098c711dbb6060800200c9a66"&gt;
    &lt;displayName xml:lang="en"&gt; Finland ESRP &lt;/displayName&gt;
    &lt;service&gt;urn:service:sos&lt;/service&gt;
    &lt;serviceBoundary profile="civic"&gt;
        &lt;civicAddress 
            xmlns="urn:ietf:params:xml:ns:pidf:geopriv10:civicAddr"&gt;
            &lt;country&gt;FI&lt;/country&gt;
        &lt;/civicAddress&gt;
    &lt;/serviceBoundary&gt;
    &lt;uri&gt;sip:esrp@finland-example.com&lt;/uri&gt;
    &lt;uri&gt;xmpp:esrp@finland-example.com&lt;/uri&gt;
    &lt;serviceNumber&gt;112&lt;/serviceNumber&gt;
&lt;/mapping&gt;
</pre>
<p id="rfc.section.1.p.6">The configuration of these nodes would therefore be as follows: </p>

<dl>
<dt>Forest Guide Austria:</dt>
<dd style="margin-left: 8">This forest guide would contain mappings for the three authoritative LoST servers (East, West and Vienna) describing what area they are responsible for. Note that each mapping would contain a service URN and these mappings point to LoST servers rather than to PSAPs or ESRPs.</dd>
<dt>LoST Server 'East':</dt>
<dd style="margin-left: 8">This LoST server would contain all the mappings to PSAPs covering one half of the country. <br><br> Additionally, the LoST server aggregates all the information it has and provides an abstracted view towards the Forest Guide indicating that it is responsible for a certain area (for a given service, and for a given location profile). Such a mapping would have the following structure: <br><br> The above-shown mapping is what is the LoST server "east-austria.lost-example.com" provides to the Austrian Forest Guide. </dd>
<dt>LoST Server 'West':</dt>
<dd style="margin-left: 8">This LoST server would contain all the mappings to PSAPs covering the other half of the country.</dd>
<dt>LoST Server 'Vienna':</dt>
<dd style="margin-left: 8">This LoST server would contain all the mappings to PSAPs in the area of Vienna.</dd>
<dt>Forest Guide Finland:</dt>
<dd style="margin-left: 8">In our example we assume that Finland would deploy a single ESRP for the entire country as their IP-based emergency services solution. There is only a single LoST server and it is co-located with the Forest Guide, as shown in <a href="#example-deployment">Figure 1</a>. The mapping data this FG would distribute via LoST sync is shown in <a href="#fg-finland">Figure 3</a>. <a href="#lost-finland">Figure 4</a>. </dd>
</dl>

<p> </p>
<p id="rfc.section.1.p.7">The LoST sync mechanism described in this document could be run between the two Forest Guides. Thereby, the three mappings stored in the Austria FG are sent to the FG Finland and a single mapping in the FG Finland is sent to the FG Austria.  Additionally, the three Austrian LoST servers could utilize LoST sync to inform the Austrian FG about their boundaries. These three authoritative LoST servers in Austria would be responsible to maintain their own mapping information. Since the amount of data being exchanged is small and the expected rate of change is low the nodes are configured to always exchange all their mapping information whenever a change happens. </p>
<p id="rfc.section.1.p.8">This document defines two types of exchanges and those are best described by the exchange between two nodes as shown in <a href="#overview1">Figure 5</a> and <a href="#overview2">Figure 6</a>. The protocol exchange always runs between a LoST Sync source and a LoST Sync destination. Node A in the examples of <a href="#overview1">Figure 5</a> and <a href="#overview2">Figure 6</a> has mappings that Node B is going to retrieve. Node A acts as the source for the data and Node B is the destination.</p>
<div id="#rfc.figure.5"></div>
<div id="#overview1"></div>
<pre>
   +---------+                   +---------+
   | Node B  |                   | Node A  |
   | acting  |                   | acting  |
   | as      |                   | as      |
   | LoST    |                   | LoST    |
   | Sync    |                   | Sync    |
   | Dest.   |                   | Source  |
   +---------+                   +---------+
       |                              |
       |                              |
       |                              |
       | &lt;getMappingsRequest&gt;         |
       |-----------------------------&gt;|
       |                              |
       | &lt;getMappingsResponse&gt;        |
       |&lt;-----------------------------|
       |                              |
       |                              |
       |                              |
</pre>
<p id="rfc.section.1.p.9">The &lt;getMappingsRequest&gt; request allows a LoST Sync source to request mappings from a LoST Sync destination.</p>
<p id="rfc.section.1.p.10">Note that in the exchange illustrated in <a href="#overview1">Figure 5</a> Node B issuing the first request and plays the role of the HTTP/HTTPS client (with HTTP as selected transport) and Node A plays the role of the HTTP/HTTPS server.</p>
<div id="#rfc.figure.6"></div>
<div id="#overview2"></div>
<pre>
    +---------+                   +---------+
    | Node A  |                   | Node B  |
    | acting  |                   | acting  |
    | as      |                   | as      |
    | LoST    |                   | LoST    |
    | Sync    |                   | Sync    |
    | Source  |                   | Dest.   |
    +---------+                   +---------+
        |                              |
        |                              |
        |                              |
        | &lt;pushMappingsRequest&gt;        |
        |-----------------------------&gt;|
        |                              |
        | &lt;pushMappingsResponse&gt;       |
        |&lt;-----------------------------|
        |                              |
        |                              |
        |                              |
</pre>
<p id="rfc.section.1.p.11">The &lt;pushMappingsRequest&gt; exchange allows a LoST Sync source to push mappings to LoST Sync destination. The assumption is being made that Node A and B have previously been configured in a way that they push mappings in such a fashion and that Node A maintains state about the mappings have to be pushed to Node B. No subscribe mechanism is defined in this document that would allow Node B to tell Node A about what mappings it is interested nor a mechanism for learning to which entities mappings have to be pushed. </p>
<p id="rfc.section.1.p.12">Note that in the exchange illustrated in <a href="#overview2">Figure 6</a> Node A issuing the first request and plays the role of the HTTP/HTTPS client (with HTTP as selected transport) and Node B plays the role of the HTTP/HTTPS server.</p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> <a href="#terminology" id="terminology">Terminology</a>
</h1>
<p id="rfc.section.2.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in RFC 2119 <a href="#RFC2119">[RFC2119]</a>.</p>
<p id="rfc.section.2.p.2">This document reuses terminology introduced by the <a href="#RFC5582">mapping architecture document</a> <cite title="NONE">[RFC5582]</cite>.</p>
<p id="rfc.section.2.p.3">Throughout this document we use the term LoST Sync source and LoST Sync destination to denote the protocol end points of the exchange. The protocol is referred as LoST Sync within the text.</p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> <a href="#query" id="query">Querying for Mappings with a &lt;getMappingsRequest&gt; / &lt;getMappingsResponse&gt; Exchange </a>
</h1>
<h1 id="rfc.section.3.1">
<a href="#rfc.section.3.1">3.1.</a> Behavior of the LoST Sync Source</h1>
<p id="rfc.section.3.1.p.1">A LoST Sync destination has two ways to retrieve mapping elements from a LoST Sync source. </p>
<p></p>

<ol>
<li>A mechanisms that is suitable when no mappings are available on the LoST Sync destination is to submit an empty &lt;getMappingsRequest&gt; message, as shown in <a href="#empty-request">Figure 7</a>. The intent by the LoST Sync destination thereby is to retrieve all mappings from the LoST Sync source. Note that the request does not propagate further to other nodes.</li>
<li>In case a LoST Sync destination node has already obtained mappings in previous exchanges then it may want to check whether these mappings have been updated in the meanwhile. The policy when to poll for updated mapping information is outside the scope of this document. The &lt;getMappingsRequest&gt; message with one or multiple &lt;exists&gt; child element(s) allows to reduce the number of returned mappings to those that have been updated and also to those that are missing. </li>
</ol>

<p> </p>
<p id="rfc.section.3.1.p.3">In response to the &lt;getMappingsRequest&gt; message the LoST Sync destination waits for the &lt;getMappingsResponse&gt; message. In case of a successful response the LoST Sync destination stores the received mappings and determines which mappings to replace.</p>
<h1 id="rfc.section.3.2">
<a href="#rfc.section.3.2">3.2.</a> Behavior of the LoST Sync Source</h1>
<p id="rfc.section.3.2.p.1">When a LoST Sync source receives an empty &lt;getMappingsRequest&gt; message then all locally available mappings MUST be returned.</p>
<p id="rfc.section.3.2.p.2">When a LoST Sync source receives a &lt;getMappingsRequest&gt; message with one or multiple &lt;exists&gt; child element(s) then it MUST consult with the local mapping database to determine whether any of the mappings of the client is stale and whether there are mappings locally that the client does not yet have. The former can be determined by finding mappings corresponding to the 'source' and 'sourceID' attribut where a mapping with a more recent lastUpdated date exists. </p>
<p id="rfc.section.3.2.p.3">Processing a &lt;getMappingsRequest&gt; message MAY lead to a successful response in the form of a &lt;getMappingsResponse&gt; or an &lt;errors&gt; message. Only the &lt;badRequest&gt;, &lt;forbidden&gt;, &lt;internalError&gt;, &lt;serverTimeout&gt; errors, defined in <a href="#RFC5222">[RFC5222]</a>, are utilized by this specification. Neither the &lt;redirect&gt; nor the &lt;warnings&gt; messages are reused by this message.</p>
<h1 id="rfc.section.3.3">
<a href="#rfc.section.3.3">3.3.</a> Examples</h1>
<div id="#rfc.figure.7"></div>
<div id="#empty-request"></div>
<pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;getMappingsRequest xmlns="urn:ietf:params:xml:ns:lostsync1"/&gt; 
</pre>
<p id="rfc.section.3.3.p.1">The first example shows an empty &lt;getMappingsRequest&gt; message that would retrieve all locally stored mappings at the LoST Sync source. </p>
<p id="rfc.section.3.3.p.2">A further example request is shown in <a href="#getMappings">Figure 8</a> and the corresponding response is depicted in <a href="#getMappingsResponse">Figure 9</a>. In this example a request is made for a specific mapping (with source="authoritative.bar.example" and sourceId="7e3f40b098c711dbb6060800200c9a66") that is more recent than "2006-11-01T01:00:00Z" as well as any missing mapping. </p>
<div id="#rfc.figure.8"></div>
<div id="#getMappings"></div>
<pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;getMappingsRequest xmlns="urn:ietf:params:xml:ns:lostsync1"&gt;
    &lt;exists&gt;
        &lt;mapping-fingerprint source="authoritative.bar.example"
        sourceId="7e3f40b098c711dbb6060800200c9a66"
        lastUpdated="2006-11-01T01:00:00Z"&gt;
        &lt;/mapping-fingerprint&gt;
    &lt;/exists&gt;
&lt;/getMappingsRequest&gt;

</pre>
<p></p>
<p id="rfc.section.3.3.p.4">The response to the above request is shown in <a href="#getMappingsResponse">Figure 9</a>. A more recent mapping was available with the identification of source="authoritative.bar.example" and sourceId="7e3f40b098c711dbb6060800200c9a66". Only one mapping that matched source="authoritative.foo.example" was found and returned. </p>
<div id="#rfc.figure.9"></div>
<div id="#getMappingsResponse"></div>
<pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;sync:getMappingsResponse 
    xmlns:sync="urn:ietf:params:xml:ns:lostsync1"
    xmlns="urn:ietf:params:xml:ns:lost1"
    xmlns:p2="http://www.opengis.net/gml"&gt;
    
        &lt;mapping source="authoritative.bar.example"
            sourceId="7e3f40b098c711dbb6060800200c9a66"
            lastUpdated="2008-11-26T01:00:00Z"
            expires="2009-12-26T01:00:00Z"&gt;
            &lt;displayName xml:lang="en"&gt; 
                Leonia Police Department
            &lt;/displayName&gt;
            &lt;service&gt;urn:service:sos.police&lt;/service&gt;
            &lt;serviceBoundary
profile="urn:ietf:params:lost:location-profile:basic-civic"&gt;
                &lt;civicAddress
xmlns="urn:ietf:params:xml:ns:pidf:geopriv10:civicAddr"&gt;
                    &lt;country&gt;US&lt;/country&gt;
                    &lt;A1&gt;NJ&lt;/A1&gt;
                    &lt;A3&gt;Leonia&lt;/A3&gt;
                    &lt;PC&gt;07605&lt;/PC&gt;
                &lt;/civicAddress&gt;
            &lt;/serviceBoundary&gt;
            &lt;uri&gt;sip:police@leonianj2.example.org&lt;/uri&gt;
            &lt;serviceNumber&gt;911&lt;/serviceNumber&gt;
        &lt;/mapping&gt;
        
        &lt;mapping expires="2009-01-01T01:44:33Z"
            lastUpdated="2008-11-01T01:00:00Z"
            source="authoritative.foo.example"
            sourceId="7e3f40b098c711dbb606011111111111"&gt;
            &lt;displayName xml:lang="en"&gt; 
                New York City Police Department
            &lt;/displayName&gt;
            &lt;service&gt;urn:service:sos.police&lt;/service&gt;
            &lt;serviceBoundary profile="geodetic-2d"&gt;
                &lt;p2:Polygon srsName="urn:ogc:def::crs:EPSG::4326"&gt;
                    &lt;p2:exterior&gt;
                        &lt;p2:LinearRing&gt;
                            &lt;p2:pos&gt;37.775 -122.4194&lt;/p2:pos&gt;
                            &lt;p2:pos&gt;37.555 -122.4194&lt;/p2:pos&gt;
                            &lt;p2:pos&gt;37.555 -122.4264&lt;/p2:pos&gt;
                            &lt;p2:pos&gt;37.775 -122.4264&lt;/p2:pos&gt;
                            &lt;p2:pos&gt;37.775 -122.4194&lt;/p2:pos&gt;
                        &lt;/p2:LinearRing&gt;
                    &lt;/p2:exterior&gt;
                &lt;/p2:Polygon&gt;
            &lt;/serviceBoundary&gt;
            &lt;uri&gt;sip:nypd@example.com&lt;/uri&gt;
            &lt;uri&gt;xmpp:nypd@example.com&lt;/uri&gt;
            &lt;serviceNumber&gt;911&lt;/serviceNumber&gt;
        &lt;/mapping&gt;
    
&lt;/sync:getMappingsResponse&gt;
</pre>
<p></p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> Pushing Mappings via &lt;pushMappings&gt; and &lt;pushMappingsResponse&gt;</h1>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> Behavior of the LoST Sync Source</h1>
<p id="rfc.section.4.1.p.1">When a LoST Sync source obtains new information that is of interest to its peers, it may push the new mappings to its peers. Configuration settings at both peers decide whether this functionality is used and what mappings are pushed to which other peers. New mappings may arrive through various means, such as a manual addition to the local mapping database, or through the interaction with other entities. Deleting mappings may also trigger a protocol interaction.</p>
<p id="rfc.section.4.1.p.2">The LoST Sync source SHOULD keep track to which LoST Sync destination it has pushed mapping elements. If it does not keep state information then it always has to push the complete data set. As discussed in Section 5.1 of <a href="#RFC5222">[RFC5222]</a>, mapping elements are identified by the 'source', 'sourceID' and 'lastUpdated' attributes. A mapping is considered the same if these three attributes match. It is RECOMMENDED not to push the same information to the same peer more than once.</p>
<p id="rfc.section.4.1.p.3">A &lt;pushMappings&gt; request sent by a LoST Sync source MUST containing one or more &lt;mapping&gt; elements. </p>
<p id="rfc.section.4.1.p.4">To delete a mapping, the content of the mapping is left empty. The node can delete the mapping from its internal mapping database, but has to remember which peers it has distributed this update to. The 'expires' attribute is required, but ignored. If an attempt is made to delete a non-existent mapping, the request is silently ignored.</p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> Behavior of the LoST Sync Destination</h1>
<p id="rfc.section.4.2.p.1">When a LoST Sync destination receives a &lt;pushMappingsRequest&gt; message then a newly received mapping M' MUST replace an existing mapping M if all of the following conditions hold: </p>

<ol>
<li>M'.source equals M.source</li>
<li>M'.sourceID' equals M.sourceID</li>
<li>M'.lastUpdated is greater than M.lastUpdated</li>
</ol>

<p> </p>
<p id="rfc.section.4.2.p.2">If the received mapping M' does not update any existing mapping M then it MUST be added to the local cache as an independent mapping.</p>
<p id="rfc.section.4.2.p.3">If a &lt;pushMappingsRequest&gt; message with an empty &lt;mapping&gt; element is received then a corresponding mapping has to be determined based on the 'source', 'sourceID' and 'lastUpdated' attributes. If a mapping has been found then it MUST be deleted. If no mapping can be identified then an &lt;errors&gt; response MUST be returned that contains the &lt;notDeleted&gt; child element. The &lt;notDeleted&gt; element MAY carry a &lt;message&gt; element and MUST contain the &lt;mapping&gt; element(s) that caused the error.</p>
<p id="rfc.section.4.2.p.4">The response to a &lt;pushMappingsRequest&gt; request is a &lt;pushMappingsResponse&gt; message. With this specification, a successful response message returns no additional elements, whereas an &lt;errors&gt; response is returned in the response message, if the request failed. Only the &lt;badRequest&gt;, &lt;forbidden&gt;, &lt;internalError&gt; or &lt;serverTimeout&gt; errors defined in Section 13.1 of <a href="#RFC5222">[RFC5222]</a>, are used. The &lt;redirect&gt; and &lt;warnings&gt; messages are not used for this query/response.</p>
<p id="rfc.section.4.2.p.5">If the set of nodes that are synchronizing their data does not form a tree, it is possible that the same information arrives through several other nodes. This is unavoidable, but generally only imposes a modest overhead. (It would be possible to create a spanning tree in the same fashion as IP multicast, but the complexity does not seem warranted, given the relatively low volume of data.)</p>
<h1 id="rfc.section.4.3">
<a href="#rfc.section.4.3">4.3.</a> Example</h1>
<p id="rfc.section.4.3.p.1">An example is shown in <a href="#pushMappings">Figure 10</a>. Image a LoST node that obtained two new mappings identified as follows: </p>

<ul>
<li>source="authoritative.example" sourceId="7e3f40b098c711dbb6060800200c9a66" lastUpdated="2008-11-26T01:00:00Z" </li>
<li>source="authoritative.example" sourceId="7e3f40b098c711dbb606011111111111" lastUpdated="2008-11-01T01:00:00Z" </li>
</ul>

<p> </p>
<p id="rfc.section.4.3.p.2">These two mappings have to be added to the peer's mapping database. </p>
<p id="rfc.section.4.3.p.3">Additionally, the following mapping has to be deleted: </p>

<ul><li>source="nj.us.example" sourceId="123" lastUpdated="2008-11-01T01:00:00Z" </li></ul>

<p> </p>
<div id="#rfc.figure.10"></div>
<div id="#pushMappings"></div>
<pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;sync:pushMappingsRequest 
    xmlns:sync="urn:ietf:params:xml:ns:lostsync1"
    xmlns="urn:ietf:params:xml:ns:lost1"
    xmlns:p2="http://www.opengis.net/gml"&gt;
            
        &lt;mapping source="authoritative.example"
            sourceId="7e3f40b098c711dbb6060800200c9a66"
            lastUpdated="2008-11-26T01:00:00Z"
            expires="2009-12-26T01:00:00Z"&gt;
            &lt;displayName xml:lang="en"&gt; 
                Leonia Police Department
            &lt;/displayName&gt;
            &lt;service&gt;urn:service:sos.police&lt;/service&gt;
            &lt;serviceBoundary
     profile="urn:ietf:params:lost:location-profile:basic-civic"&gt;
                &lt;civicAddress
     xmlns="urn:ietf:params:xml:ns:pidf:geopriv10:civicAddr"&gt;
                    &lt;country&gt;US&lt;/country&gt;
                    &lt;A1&gt;NJ&lt;/A1&gt;
                    &lt;A3&gt;Leonia&lt;/A3&gt;
                    &lt;PC&gt;07605&lt;/PC&gt;
                &lt;/civicAddress&gt;
            &lt;/serviceBoundary&gt;
            &lt;uri&gt;sip:police@leonianj.example.org&lt;/uri&gt;
            &lt;serviceNumber&gt;911&lt;/serviceNumber&gt;
        &lt;/mapping&gt;
        
        &lt;mapping expires="2009-01-01T01:44:33Z"
            lastUpdated="2008-11-01T01:00:00Z"
            source="authoritative.example"
            sourceId="7e3f40b098c711dbb606011111111111"&gt;
            &lt;displayName xml:lang="en"&gt; 
                New York City Police Department
            &lt;/displayName&gt;
            &lt;service&gt;urn:service:sos.police&lt;/service&gt;
            &lt;serviceBoundary profile="geodetic-2d"&gt;
                &lt;p2:Polygon srsName="urn:ogc:def::crs:EPSG::4326"&gt;
                    &lt;p2:exterior&gt;
                        &lt;p2:LinearRing&gt;
                            &lt;p2:pos&gt;37.775 -122.4194&lt;/p2:pos&gt;
                            &lt;p2:pos&gt;37.555 -122.4194&lt;/p2:pos&gt;
                            &lt;p2:pos&gt;37.555 -122.4264&lt;/p2:pos&gt;
                            &lt;p2:pos&gt;37.775 -122.4264&lt;/p2:pos&gt;
                            &lt;p2:pos&gt;37.775 -122.4194&lt;/p2:pos&gt;
                        &lt;/p2:LinearRing&gt;
                    &lt;/p2:exterior&gt;
                &lt;/p2:Polygon&gt;
            &lt;/serviceBoundary&gt;
            &lt;uri&gt;sip:nypd@example.com&lt;/uri&gt;
            &lt;uri&gt;xmpp:nypd@example.com&lt;/uri&gt;
            &lt;serviceNumber&gt;911&lt;/serviceNumber&gt;
        &lt;/mapping&gt;
        
        &lt;mapping source="nj.us.example" 
            sourceId="123"
            lastUpdated="2008-11-01T01:00:00Z"
            expires="2008-11-01T01:00:00Z"/&gt;
    
&lt;/sync:pushMappingsRequest&gt;
</pre>
<p></p>
<p id="rfc.section.4.3.p.5">In response, the peer performs the necessary operation and updates its mapping database. In particular, it will check whether the other peer is authorized to perform the update and whether the elements and attributes contain values that it understands. In our example, a positive response is returned as shown in <a href="#pushMappingsResponse">Figure 11</a>.</p>
<div id="#rfc.figure.11"></div>
<div id="#pushMappingsResponse"></div>
<pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;pushMappingsResponse xmlns="urn:ietf:params:xml:ns:lostsync1" /&gt;
</pre>
<p></p>
<div id="#rfc.figure.12"></div>
<div id="#error"></div>
<pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;errors xmlns="urn:ietf:params:xml:ns:lost1"
    xmlns:sync="urn:ietf:params:xml:ns:lostsync1" 
    source="nodeA.example.com"&gt;

    &lt;sync:notDeleted 
        message="Could not delete the indicated mapping." 
        xml:lang="en"&gt; 
        
        &lt;mapping source="nj.us.example" 
            sourceId="123"
            lastUpdated="2008-11-01T01:00:00Z"
            expires="2008-11-01T01:00:00Z"/&gt;
        
    &lt;/sync:notDeleted&gt;
&lt;/errors&gt;
</pre>
<p id="rfc.section.4.3.p.7">In case that a mapping could not be deleted as requested the following error response might be returned instead. </p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> Transport</h1>
<p id="rfc.section.5.p.1">LoST Sync needs an underlying protocol transport mechanism to carry requests and responses. This document defines an XML protocol over HTTP and over HTTP-over-TLS.  Client and server developers are reminded that full support of RFC 2616 HTTP facilities is expected. If clients or servers re-implement HTTP, rather than using available servers or client code as a base, careful attention must be paid to full interoperability. Other transport mechanisms are left to future documents. The selection of the transport mechanism will in most cases be determined through manual configuration although the usage of the U-NAPTR application defined in the LoST specification is possible. In protocols that support content type indication, LoST Sync uses the media type application/lostsync+xml.</p>
<p id="rfc.section.5.p.2">When using HTTP <a href="#RFC2616">[RFC2616]</a> and HTTP-over-TLS <a href="#RFC2818">[RFC2818]</a>, LoST Sync messages use the HTTP POST method. The HTTP request MUST use the Cache-Control response directive "no-cache" to HTTP-level caching even by caches that have been configured to return stale responses to client requests.</p>
<p id="rfc.section.5.p.3">All LoST Sync responses, including those indicating a LoST warning or error, are carried in 2xx responses, typically 200 (OK). Other 2xx responses, in particular 203 (Non-authoritative information) may be returned by HTTP caches that disregard the caching instructions. 3xx, 4xx and 5xx HTTP response codes indicates that the HTTP request itself failed or was redirected; these responses do not contain any LoST Sync XML elements. </p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#schema" id="schema">RelaxNG</a>
</h1>
<div id="#rfc.figure.13"></div>
<pre>
&lt;?xml version="1.0" encoding="utf-8"?&gt;
 
     &lt;grammar ns="urn:ietf:params:xml:ns:lostsync1"
     xmlns="http://relaxng.org/ns/structure/1.0"
     xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0"
     datatypeLibrary="http://www.w3.org/2001/XMLSchema-datatypes"&gt;
         
         &lt;include href="lost.rng"/&gt;
         
         &lt;start combine="choice"&gt;
             
          &lt;a:documentation&gt; Location-to-Service Translation (LoST)
            Synchronization Protocol&lt;/a:documentation&gt;
             
             &lt;choice&gt;
                 &lt;ref name="pushMappings"/&gt;
                 &lt;ref name="pushMappingsResponse"/&gt;
                 &lt;ref name="getMappingsRequest"/&gt;
                 &lt;ref name="getMappingsResponse"/&gt;
             &lt;/choice&gt;
         &lt;/start&gt;
         
         
         &lt;define name="pushMappings"&gt;
             &lt;element name="pushMappings"&gt;
                     &lt;oneOrMore&gt;
                         &lt;ref name="mapping"/&gt;
                     &lt;/oneOrMore&gt;
                 
                 &lt;ref name="extensionPoint"/&gt;
             &lt;/element&gt;
         &lt;/define&gt;
         
         &lt;define name="pushMappingsResponse"&gt;
             &lt;element name="pushMappingsResponse"&gt;
                 &lt;ref name="extensionPoint"/&gt;
             &lt;/element&gt;
         &lt;/define&gt;
         
          &lt;define name="getMappingsRequest"&gt;
               &lt;element name="getMappingsRequest"&gt;
                 &lt;choice&gt;
                      &lt;ref name="exists"&gt;&lt;/ref&gt;
                      &lt;ref name="extensionPoint"/&gt;
                 &lt;/choice&gt;
             &lt;/element&gt;
         &lt;/define&gt;
         
          &lt;define name="exists"&gt;
               &lt;element name="exists"&gt;
                    &lt;oneOrMore&gt;
                         &lt;element name="mapping-fingerprint"&gt;
                              &lt;attribute name="source"&gt;
                                   &lt;data type="token"/&gt;
                              &lt;/attribute&gt;
                              &lt;attribute name="sourceId"&gt;
                                   &lt;data type="token"/&gt;
                              &lt;/attribute&gt;
                              &lt;attribute name="lastUpdated"&gt;
                                   &lt;data type="dateTime"/&gt;
                              &lt;/attribute&gt;
                              &lt;ref name="extensionPoint"/&gt;
                         &lt;/element&gt;
                    &lt;/oneOrMore&gt;
               &lt;/element&gt;
          &lt;/define&gt;
                    
         &lt;define name="getMappingsResponse"&gt;
             &lt;element name="getMappingsResponse"&gt;
                     &lt;oneOrMore&gt;
                         &lt;ref name="mapping"/&gt;
                     &lt;/oneOrMore&gt;                 
                 &lt;ref name="extensionPoint"/&gt;
             &lt;/element&gt;
         &lt;/define&gt;         
         
          &lt;!-- error messages --&gt; 
          
          &lt;define name="notDeleted"&gt;
               &lt;element name="notDeleted"&gt;
                    &lt;ref name="basicException"/&gt;
                    &lt;oneOrMore&gt;
                         &lt;ref name="mapping"/&gt;
                    &lt;/oneOrMore&gt;
               &lt;/element&gt;
          &lt;/define&gt;
     &lt;/grammar&gt;
	</pre>
<p></p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> Operational Considerations</h1>
<p id="rfc.section.7.p.1">When different LoST servers use the mechanism described in this document to synchronize their mapping data then it is important to ensure that loops are avoided. The example shown in <a href="#sync-problem">Figure 14</a> with three LoST servers A, B and C (each of them acts as a sync source and a sync destination) illustrates the challenge in more detail. A and B synchronize data between each other; the same is true for A and C, and B and C, respectively. </p>
<div id="#rfc.figure.14"></div>
<div id="#sync-problem"></div>
<pre>
     A -------- B
      \        /
       \      /
        \    /
         \  /
          C
                </pre>
<p></p>
<p id="rfc.section.7.p.3">Now, imagine that server A adds a new mapping. This mapping is uniquely identified by the combination of "source", "sourceid" and "last updated". Assume that A would push this new mapping to B and C. When B obtained this new mapping it would find out that it has to distribute it to its peer C. C would also want to distribute the mapping to B (and vice versa). If the originally mapping with the "source", "sourceid" and "last updated" is not modified by either B or C then these two servers would recognize that they already possess the mapping and can ignore the update.</p>
<p id="rfc.section.7.p.4">It is important that implementations MUST NOT modify mappings they receive. An entity acting maliciously would, however, intentially modify mappings or inject bogus mappings. To avoid the possibility of an untrustworthy member claiming a coverage region that it is not authorized for, any node introducing a new service boundary MUST sign the object by protecting the data with an XML digital signature <a href="#W3C.REC-xmldsig-core-20020212">[W3C.REC-xmldsig-core-20020212]</a>. A recipient MUST verify that the signing entity is indeed authorized to speak for that region. Determining who can speak for a particular region is inherently difficult unless there is a small set of authorizing entities that participants in the mapping architecture can trust.  Receiving systems should be particularly suspicious if an existing coverage region is replaced with a new one with a new mapping address. With this mechanism it is also possible to avoid the distribution of mappings that have been modified by servers forwarding mappings as part of the synchronization procedure. </p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> Security Considerations</h1>
<p id="rfc.section.8.p.1">This document defines a protocol for exchange of mapping information between two entities. Hence, the operations described in this document involve mutually-trusting LoST nodes. These nodes need to authenticate each other, using mechanisms such as <a href="#RFC2617">HTTP Digest</a> <cite title="NONE">[RFC2617]</cite>, <a href="#RFC2617">HTTP Basic</a> <cite title="NONE">[RFC2617]</cite> over <a href="#RFC5246">TLS</a> <cite title="NONE">[RFC5246]</cite> or TLS client and server certificates. Manual configuration for the setup of the peering relationships is required and hence the choice of the security mechanisms used between the two entities is a deployment specific decision. In any case, it MUST be ensured that the two end points are authenticated and that a secure communication channel (i.e., an integrity protected exchange of data with the help of the TLS Record Layer) is setup to avoid the possibility of injecting bogus mappings. If an adversary manages to inject false mappings then this could lead to denial of service attacks. If the mapping data contains a URL that does not exist then emergency services for the indicated area are not reachable. If all mapping data contains URLs that point to a single PSAP (rather than a large number) then this PSAP is likely to experience overload conditions. If the mapping data contains a URL that points to a server controlled by the adversary itself then it might impersonate PSAPs.</p>
<h1 id="rfc.section.9">
<a href="#rfc.section.9">9.</a> IANA Considerations</h1>
<h1 id="rfc.section.9.1">
<a href="#rfc.section.9.1">9.1.</a> Content-type registration for 'application/lostsync+xml'</h1>
<p id="rfc.section.9.1.p.1">This specification requests the registration of a new MIME type according to the procedures of RFC 4288 <a href="#RFC4288">[RFC4288]</a> and guidelines in RFC 3023 <a href="#RFC3023">[RFC3023]</a>.</p>
<p></p>

<dl>
<dt>MIME media type name:</dt>
<dd style="margin-left: 8">application <br><br> </dd>
<dt>MIME subtype name:</dt>
<dd style="margin-left: 8">lostsync+xml <br><br> </dd>
<dt>Mandatory parameters:</dt>
<dd style="margin-left: 8">none<br><br> </dd>
<dt>Optional parameters:</dt>
<dd style="margin-left: 8">charset<br><br> Indicates the character encoding of enclosed XML.<br><br> </dd>
<dt>Encoding considerations:</dt>
<dd style="margin-left: 8">Uses XML, which can employ 8-bit characters, depending on the character encoding used. See RFC 3023 <a href="#RFC3023">[RFC3023]</a>, Section 3.2.<br><br>
</dd>
<dt>Security considerations:</dt>
<dd style="margin-left: 8">This content type is designed to carry LoST Syncronization protocol payloads.<br><br>
</dd>
<dt>Interoperability considerations:</dt>
<dd style="margin-left: 8">None<br><br><br><br>
</dd>
<dt>Published specification:</dt>
<dd style="margin-left: 8">RFCXXXX [NOTE TO IANA/RFC-EDITOR: Please replace XXXX with the RFC number of this specification.]<br><br> </dd>
<dt>Applications which use this media type:</dt>
<dd style="margin-left: 8">Emergency and Location-based Systems<br><br> </dd>
<dt>Additional information:</dt>
<dd style="margin-left: 8">
<dl>
<dt>Magic Number:</dt>
<dd style="margin-left: 8">None<br><br> </dd>
<dt>File Extension:</dt>
<dd style="margin-left: 8">.lostsyncxml<br><br> </dd>
<dt>Macintosh file type code:</dt>
<dd style="margin-left: 8">'TEXT'<br><br> </dd>
</dl>
<p> </p>
</dd>
<dt>Personal and email address for further information:</dt>
<dd style="margin-left: 8">Hannes Tschofenig, Hannes.Tschofenig@nsn.com<br><br> </dd>
<dt>Intended usage:</dt>
<dd style="margin-left: 8">LIMITED USE<br><br> </dd>
<dt>Author:</dt>
<dd style="margin-left: 8">
<br><br> This specification is a work item of the IETF ECRIT working group, with mailing list address &lt;ecrit@ietf.org&gt;.<br><br> </dd>
<dt>Change controller:</dt>
<dd style="margin-left: 8">
<br><br>The IESG &lt;iesg@ietf.org&gt; </dd>
</dl>

<p> </p>
<h1 id="rfc.section.9.2">
<a href="#rfc.section.9.2">9.2.</a> LoST Sync Relax NG Schema Registration</h1>
<p></p>

<dl>
<dt>URI:</dt>
<dd style="margin-left: 8">urn:ietf:params:xml:schema:lostsync1</dd>
<dt>Registrant Contact:</dt>
<dd style="margin-left: 8">IETF ECRIT Working Group, Hannes Tschofenig (Hannes.Tschofenig@gmx.net).</dd>
<dt>Relax NG Schema:</dt>
<dd style="margin-left: 8">The Relax NG schema to be registered is contained in <a href="#schema">Section 6</a>. </dd>
</dl>

<p> </p>
<h1 id="rfc.section.9.3">
<a href="#rfc.section.9.3">9.3.</a> LoST Synchronization Namespace Registration</h1>
<div id="#rfc.figure.15"></div>
<pre>
BEGIN
&lt;?xml version="1.0"?&gt;
&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML Basic 1.0//EN"
  "http://www.w3.org/TR/xhtml-basic/xhtml-basic10.dtd"&gt;
&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt;
&lt;head&gt;
  &lt;meta http-equiv="content-type"
        content="text/html;charset=iso-8859-1"/&gt;
  &lt;title&gt;LoST Synchronization Namespace&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;h1&gt;Namespace for LoST server synchronization&lt;/h1&gt;
  &lt;h2&gt;urn:ietf:params:xml:ns:lost1:sync&lt;/h2&gt;
&lt;p&gt;See &lt;a href="[URL of published RFC]"&gt;RFCXXXX
    [NOTE TO IANA/RFC-EDITOR:
     Please replace XXXX with the RFC number of this
    specification.]&lt;/a&gt;.&lt;/p&gt;
&lt;/body&gt;
&lt;/html&gt;
END
</pre>
<p></p>

<dl>
<dt>URI:</dt>
<dd style="margin-left: 8">urn:ietf:params:xml:ns:lostsync1</dd>
<dt>Registrant Contact:</dt>
<dd style="margin-left: 8">IETF ECRIT Working Group, Hannes Tschofenig (Hannes.Tschofenig@gmx.net).</dd>
<dt>XML:</dt>
<dd style="margin-left: 8"></dd>
</dl>

<p> </p>
<h1 id="rfc.section.10">
<a href="#rfc.section.10">10.</a> Acknowledgments</h1>
<p id="rfc.section.10.p.1">Robins George, Cullen Jennings, Karl Heinz Wolf, Richard Barnes, Mayutan Arumaithurai, Alexander Mayrhofer, and Andrew Newton provided helpful input. Jari Urpalainen assisted with the Relax NG schema. We would also like to thank our PROTO shepherd Roger Marshall for his help with the document.</p>
<h1 id="rfc.references">
<a href="#rfc.references">11.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">11.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2617">[RFC2617]</b></td>
<td class="top">
<a href="mailto:john@math.nwu.edu" title="Northwestern University, Department of Mathematics">Franks, J.</a>, <a href="mailto:pbaker@verisign.com" title="Verisign Inc.">Hallam-Baker, P.M.</a>, <a href="mailto:jeff@AbiSource.com" title="AbiSource, Inc.">Hostetler, J.L.</a>, <a href="mailto:lawrence@agranat.com" title="Agranat Systems, Inc.">Lawrence, S.D.</a>, <a href="mailto:paulle@microsoft.com" title="Microsoft Corporation">Leach, P.J.</a>, <a title="Netscape Communications Corporation">Luotonen, A.</a> and <a href="mailto:stewart@OpenMarket.com" title="Open Market, Inc.">L. Stewart</a>, "<a href="http://tools.ietf.org/html/rfc2617">HTTP Authentication: Basic and Digest Access Authentication</a>", RFC 2617, June 1999.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5222">[RFC5222]</b></td>
<td class="top">
<a>Hardie, T.</a>, <a>Newton, A.</a>, <a>Schulzrinne, H.</a> and <a>H. Tschofenig</a>, "<a href="http://tools.ietf.org/html/rfc5222">LoST: A Location-to-Service Translation Protocol</a>", RFC 5222, August 2008.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5246">[RFC5246]</b></td>
<td class="top">
<a>Dierks, T.</a> and <a>E. Rescorla</a>, "<a href="http://tools.ietf.org/html/rfc5246">The Transport Layer Security (TLS) Protocol Version 1.2</a>", RFC 5246, August 2008.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3023">[RFC3023]</b></td>
<td class="top">
<a>Murata, M.</a>, <a>St. Laurent, S.</a> and <a>D. Kohn</a>, "<a href="http://tools.ietf.org/html/rfc3023">XML Media Types</a>", RFC 3023, January 2001.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4288">[RFC4288]</b></td>
<td class="top">
<a>Freed, N.</a> and <a>J. Klensin</a>, "<a href="http://tools.ietf.org/html/rfc4288">Media Type Specifications and Registration Procedures</a>", BCP 13, RFC 4288, December 2005.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2616">[RFC2616]</b></td>
<td class="top">
<a href="mailto:fielding@ics.uci.edu" title="Department of Information and Computer Science">Fielding, R.</a>, <a href="mailto:jg@w3.org" title="World Wide Web Consortium">Gettys, J.</a>, <a href="mailto:mogul@wrl.dec.com" title="Compaq Computer Corporation">Mogul, J.</a>, <a href="mailto:frystyk@w3.org" title="World Wide Web Consortium">Frystyk, H.</a>, <a href="mailto:masinter@parc.xerox.com" title="Xerox Corporation">Masinter, L.</a>, <a href="mailto:paulle@microsoft.com" title="Microsoft Corporation">Leach, P.</a> and <a href="mailto:timbl@w3.org" title="World Wide Web Consortium">T. Berners-Lee</a>, "<a href="http://tools.ietf.org/html/rfc2616">Hypertext Transfer Protocol -- HTTP/1.1</a>", RFC 2616, June 1999.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2818">[RFC2818]</b></td>
<td class="top">
<a>Rescorla, E.</a>, "<a href="http://tools.ietf.org/html/rfc2818">HTTP Over TLS</a>", RFC 2818, May 2000.</td>
</tr>
<tr>
<td class="reference"><b id="W3C.REC-xmldsig-core-20020212">[W3C.REC-xmldsig-core-20020212]</b></td>
<td class="top">
<a>Solo, D.</a>, <a>Eastlake, D.</a> and <a>J. Reagle</a>, "<a>XML-Signature Syntax and Processing</a>", World Wide Web Consortium FirstEdition REC-xmldsig-core-20020212, February 2002.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">11.2.</a> Informative References</h1>
<table><tbody><tr>
<td class="reference"><b id="RFC5582">[RFC5582]</b></td>
<td class="top">
<a>Schulzrinne, H.</a>, "<a href="http://tools.ietf.org/html/rfc5582">Location-to-URL Mapping Architecture and Framework</a>", RFC 5582, September 2009.</td>
</tr></tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Henning Schulzrinne</span> 
	  <span class="n hidden">
		<span class="family-name">Schulzrinne</span>
	  </span>
	</span>
	<span class="org vcardline">Columbia University</span>
	<span class="adr">
	  <span>Department of Computer Science</span>
<span>450 Computer Science Building</span>

	  <span class="vcardline">
		<span class="locality">New York</span>,  
		<span class="region">NY</span> 
		<span class="code">10027</span>
	  </span>
	  <span class="country-name vcardline">US</span>
	</span>
	<span class="vcardline">Phone: +1 212 939 7004</span>

<span class="vcardline">EMail: <a href="mailto:hgs+ecrit@cs.columbia.edu">hgs+ecrit@cs.columbia.edu</a></span>

<span class="vcardline">URI: <a href="http://www.cs.columbia.edu">http://www.cs.columbia.edu</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Hannes Tschofenig</span> 
	  <span class="n hidden">
		<span class="family-name">Tschofenig</span>
	  </span>
	</span>
	<span class="org vcardline">Nokia Siemens Networks</span>
	<span class="adr">
	  <span>Linnoitustie 6</span>

	  <span class="vcardline">
		<span class="locality">Espoo</span>,  
		<span class="region"></span>
		<span class="code">02600</span>
	  </span>
	  <span class="country-name vcardline">Finland</span>
	</span>
	<span class="vcardline">Phone: +358 (50) 4871445</span>

<span class="vcardline">EMail: <a href="mailto:Hannes.Tschofenig@gmx.net">Hannes.Tschofenig@gmx.net</a></span>

<span class="vcardline">URI: <a href="http://www.tschofenig.priv.at">http://www.tschofenig.priv.at</a></span>

  </address>
</div>

</body>
</html>