

SIMPLE WG                                                    M. Lonnfors
Internet-Draft                                     Nokia Research Center
Expires: December 25, 2003                                       K. Kiss
                                                                   Nokia
                                                           June 26, 2003


                Device capability PIDF status extension
                 draft-lonnfors-simple-prescaps-ext-01

Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups. Note that other
   groups may also distribute working documents as Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time. It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at http://
   www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on December 25, 2003.

Copyright Notice

   Copyright (C) The Internet Society (2003). All Rights Reserved.

Abstract

   Interoperation of Instant Messaging and Presence systems has been
   defined in IMPP Working Group. IMPP WG has come up with baseline
   interoperable operations and formats for Presence and Instant
   Messaging systems. However, these base formats might need
   standardized extensions in order to enable building rational
   applications using Presence and Instant Messaging. This memo proposes
   an extension to PIDF presence document format to represent SIP Caller
   preferences and Callee capabilities features to be used in SIMPLE
   based Presence systems but may also be applied to other protocols as
   well.




Lonnfors & Kiss        Expires December 25, 2003                [Page 1]

Internet-Draft    Device capability PIDF status extension      June 2003


Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3
   1.1 Motivation . . . . . . . . . . . . . . . . . . . . . . . . . .  3
   1.2 Scope  . . . . . . . . . . . . . . . . . . . . . . . . . . . .  4
   2.  Conventions  . . . . . . . . . . . . . . . . . . . . . . . . .  4
   3.  Support for Caller Preferences and Callee Capabilities . . . .  4
   3.1 Extension overview . . . . . . . . . . . . . . . . . . . . . .  4
   3.2 Handing of  Caller Preferences and Callee Capabilities
       matching rules . . . . . . . . . . . . . . . . . . . . . . . .  5
   3.3 <prescaps> element . . . . . . . . . . . . . . . . . . . . . .  5
   3.4 <feature> element  . . . . . . . . . . . . . . . . . . . . . .  5
   3.5 <value> element  . . . . . . . . . . . . . . . . . . . . . . .  6
   3.6 Handling of Caller Preferences and Callee Capabilities
       priority feature tag . . . . . . . . . . . . . . . . . . . . .  6
   4.  Guidelines for using extension with PIDF document format . . .  6
   5.  Examples . . . . . . . . . . . . . . . . . . . . . . . . . . .  6
   5.1 Basic extension in tuple level . . . . . . . . . . . . . . . .  7
   5.2 Basic extension in status level  . . . . . . . . . . . . . . .  7
   5.3 Complex example in tuple level . . . . . . . . . . . . . . . .  8
   6.  XML schema definitions . . . . . . . . . . . . . . . . . . . .  8
   7.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . .  9
   7.1 URN sub-namespace registration for
       'urn:ietf:params:xml:ns:simple-prescaps-ext' . . . . . . . . . 10
   8.  Security Considerations  . . . . . . . . . . . . . . . . . . . 10
   9.  Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . 11
       Normative references . . . . . . . . . . . . . . . . . . . . . 11
       Informative references . . . . . . . . . . . . . . . . . . . . 11
       Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . 12
       Intellectual Property and Copyright Statements . . . . . . . . 13





















Lonnfors & Kiss        Expires December 25, 2003                [Page 2]

Internet-Draft    Device capability PIDF status extension      June 2003


1. Introduction

   Interoperation of Instant Messaging and Presence systems has been
   defined in IMPP Working Group. Working Group has defined a generic
   model for Presence and Instant Messaging [2] and also requirements
   for protocols implementing such a system [3]. Common Presence and
   Instant Messaging (CPP/CPIM) defines common operations and formats
   which all Presence and Instant Messaging services must agree upon so
   that basic interoperability would be possible [5], [6]. The actual
   base format for presence is being defined in [4]. The PIDF document
   format has been designed to reduce the need for gatewaying and to
   allow end-to-end security of presence data. It has taken very
   minimalistic approach to support such operations. In order to make
   the PIDF format usable by different presence applications, these
   applications usually must extend the basic PIDF format by standard
   XML mechanism as defined in [4].

   The aim of this memo is to introduce SIP/SIMPLE specific extension
   mechanism for the PIDF document. With this extension SIMPLE based
   applications can have richer and usable formats compared to the
   baseline PIDF data format. Authors of this document believe that
   following items should be included into this extension:

   o  Support for SIP Caller Preferences and Callee Capabilities [7]


1.1 Motivation

   The PIDF document format [4] defines a <contact> element which may
   appear once inside every <tuple> element. The content of the
   <contact>  element encodes the CONTACT ADDRESS and CONTACT MEANS as
   defined in [2]. The <contact> element is defined to be an URI.  This
   URI can be of any URI type.  In some implementations this URI can
   uniquely identify the application the tuple intends to describe (e.g.
   im: URIs). However, this may not be the case in all implementations.
   For example in SIP, a SIP URI can represent different kinds of
   applications. A SIP URI can be used to contact voice applications,
   video applications, or messaging applications. If it is not known by
   other means, it might be hard for applications processing the
   presence document containing only SIP URI contact addresses to know
   what particular application the tuple intends to describe. Also
   watchers receiving presence information would probably benefit for
   getting more descriptive information about what particular
   communication means or applications are supported by the presentity.

   Caller Preferences and Callee Capabilities document [7] defines a set
   of extensions which allow callers and callees to express preferences
   about request handling in SIP servers. The same information could



Lonnfors & Kiss        Expires December 25, 2003                [Page 3]

Internet-Draft    Device capability PIDF status extension      June 2003


   provide value also to presence watchers so that they could make more
   rational decisions on how presentity should be contacted if presence
   document would contain similar information as defined in Caller
   Preferences and Callee Capabilities extension. When the Caller
   Preferences and Callee Capabilities extension is used in this context
   (to represent presence information) there is no need for automated
   processing compared to the case when the Caller Preferences and
   Callee Capabilities extension is used by proxies or registrars.
   Because of this, it should be sufficient to introduce Caller
   Preferences and Callee Capabilities extension representation for
   presence without specifying similar processing rules as defined in
   [7].

1.2 Scope

   This document defines extension to the PIDF document format which
   enables presence implementations based on SIP protocol to utilize
   similar capabilities in presence document as what Caller Preferences
   and Callee Capabilities document [7] defines. The intension is only
   to allow representation of callee capabilities and not caller
   preferences.

   This extension does not replace media negotiation mechanisms defined
   for SIP (e.g.  SDP [11]), therefore media negotiation (e.g.  choose
   of voice and video codecs) MUST be performed according to [8]. This
   extension is only aimed to give the watchers hints about the
   presentity's preferences, willingness and capabilities to communicate
   before watchers would initiate SIP based communication with the
   presentity.

2. Conventions

   In this document, the key words "MUST", "MUST NOT", "REQUIRED",
   "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY",
   and "OPTIONAL" are to be interpreted as described in RFC 2119 [1] and
   indicate requirement levels for compliant implementations.

3. Support for Caller Preferences and Callee Capabilities

   This section presents Caller Preferences and Callee Capabilities
   extension namespace, its elements, their values, and semantics. This
   section also describes how this extension can be further extended.
   This extension is intended to be used with application/cpim-pidf+xml
   content type and that particular usage is described here.  This
   extension may also be used with other content types if appropriate.

3.1 Extension overview




Lonnfors & Kiss        Expires December 25, 2003                [Page 4]

Internet-Draft    Device capability PIDF status extension      June 2003


   This extension adds most of the features presented in Caller
   Preferences and Callee Capabilities document [7] into PIDF presence
   document format.  Features presented in [7] are added here without
   any change in their semantics. Bringing these features to PIDF
   presence document format basically means mapping them to XML
   structure. However, some Caller Preferences and Callee Capabilities
   features are not needed here because identical counterpart already
   exists in PIDF. These features are discussed in Section 3.6.
   Namespace identifier for this extension is:

   urn:ietf:params:xml:ns:simple-prescaps-ext

   When this extension namespace is congregated with base PIDF document,
   combined document must follow the same general formatting rules as
   specified in [4] in chapter 4.1.

3.2 Handing of  Caller Preferences and Callee Capabilities matching
    rules

   Caller Preferences and Callee Capabilities document [7] defines a set
   of matching rules which can be used to determine if capabilities
   represented by two different URLs are equal. This extension is not
   aimed to provide these features i.e. this document does not provide
   means to compare two presence documents to determine whether
   capabilities represented by those documents match.

3.3 <prescaps> element

   Root element of this extension namespace is <prescaps>.  The root
   element MUST be always present. This element MAY contain one or more
   <feature> elements as specified later in this document.

   <prescaps> element does not have any attributes and it MAY contain
   other namespace declarations for the extensions used in the presence
   XML document.

3.4 <feature> element

   The <feature> element can represent any feature tag as defined in
   Caller Preferences and Callee Capabilities [7] or any media feature
   tag registered through [14]. This element MAY appear under <prescaps>
   element one or several times. <feature> element has one mandatory
   attribute called name.  This attribute represents the name of the
   feature tag. Each media feature tag (e.g.  media, feature and etc.)
   SHOULD appear only once inside root element. If media feature tag has
   multiple values these values SHOULD be nested inside single <feature>
   element. The <feature> cannot be extended using other namespace
   declarations.



Lonnfors & Kiss        Expires December 25, 2003                [Page 5]

Internet-Draft    Device capability PIDF status extension      June 2003


3.5 <value> element

   The <value> element represents the value of media feature tag.  Each
   value element SHOULD contain only a single tag value. If <feature>
   contains multiple values then all these values should be presented in
   different <value> elements. The <value> element has optional
   attribute called negated.  This attribute is of boolean type. It can
   be used to indicate whether feature value is supported or not
   supported. Value 'true' indicates that value is not supported and
   value 'false' indicates that value is supported. Default value is
   'false'. <value> element cannot be extended using other namespace
   declarations .

3.6 Handling of Caller Preferences and Callee Capabilities priority
    feature tag

   PIDF document format allows priority attribute to be used within
   <contact> element. Caller Preferences and Callee Capabilities
   priority feature tag can be mapped into this attribute and so there
   is no need to represent priority feature tag in inside XML structure.

4. Guidelines for using extension with PIDF document format

   This section presents guidelines how extension can be used with PIDF
   document format.

   PIDF format allows use of extension XML namespaces inside <presence>,
   <tuple>, and <status> elements. <presence> element is intended to
   describe presentity as a whole. Prescaps extension is related to
   Contact Address defined by PIDF to which this extension is applied
   to. These Contact Addresses can only appear inside <tuple> elements.
   The use of this extension in <presence> element level is NOT
   RECOMMENDED for this purpose.

   It is up to the applications using this extension to decide if they
   want to include extension inside <tuple> or inside <status> element.
   The semantics of the extension remains same regardless where it is
   placed inside PIDF document format.  Root element <prescaps> MUST NOT
   appear more than once inside a single <tuple> element but can appear
   multiple times in PIDF document format inside different <tuple>
   elements.

5. Examples

   This section presents various examples how this extension can be used
   with base PIDF document format.





Lonnfors & Kiss        Expires December 25, 2003                [Page 6]

Internet-Draft    Device capability PIDF status extension      June 2003


5.1 Basic extension in tuple level

       <?xml version="1.0" encoding="UTF-8"?>
           <presence xmlns="urn:ietf:params:xml:ns:cpim-pidf"
               xmlns:ext="urn:ietf:params:xml:ns:simple-prescaps-ext"
               entity="pres:someone@example.com">
            <tuple id="akfjga8v">
               <status>
                 <basic>open</basic>
               </status>
               <ext:prescaps>
                  <ext:feature name="Media">
                     <ext:value>voice</ext:value>
                     <ext:value>message</ext:value>
                  </ext:feature>
               </ext:prescaps>
               <contact>sip:someone@example.com</contact>
             </tuple>
           </presence>


5.2 Basic extension in status level

   	<?xml version="1.0" encoding="UTF-8"?>
           <presence xmlns="urn:ietf:params:xml:ns:cpim-pidf"
               xmlns:ext="urn:ietf:params:xml:ns:simple-prescaps-ext"
               entity="pres:someone@example.com">
            <tuple id="akfjga8v">
               <status>
                 <basic>open</basic>
                 <ext:prescaps>
                   <ext:feature name="Media">
                     <ext:value>voice</ext:value>
                     <ext:value negated="true">message</ext:value>
                   </ext:feature>
                 </ext:prescaps>
               </status>
               <contact>sip:someone@example.com</contact>
             </tuple>
           </presence>











Lonnfors & Kiss        Expires December 25, 2003                [Page 7]

Internet-Draft    Device capability PIDF status extension      June 2003


5.3 Complex example in tuple level

   	<?xml version="1.0" encoding="UTF-8"?>
           <presence xmlns="urn:ietf:params:xml:ns:cpim-pidf"
               xmlns:ext="urn:ietf:params:xml:ns:simple-prescaps-ext"
               entity="pres:someone@example.com">
            <tuple id="akfjga8v">
               <status>
                 <basic>open</basic>
               </status>
               <ext:prescaps>
                  <ext:feature name="Media">
                     <ext:value>voice</ext:value>
                  </ext:feature>
                  <ext:feature name="Mobility">
                     <ext:value>mobile</ext:value>
                  </ext:feature>
                  <ext:feature name="Feature">
                     <ext:value>voicemail</ext:value>
                  </ext:feature>
                  <ext:feature name="Automata">
                     <ext:value>false</ext:value>
                  </ext:feature>
                  <ext:feature name="Class">
                     <ext:value>business</ext:value>
                  </ext:feature>
                  <ext:feature name="Duplex">
                     <ext:value>full</ext:value>
                  </ext:feature>
               </ext:prescaps>
               <contact>sip:someone@example.com</contact>
             </tuple>
           </presence>


6. XML schema definitions

   This section gives the XML Schema Definition for the extension
   defined in this document which can be used in the context of
   "application/cpim-pidf+xml" content type.











Lonnfors & Kiss        Expires December 25, 2003                [Page 8]

Internet-Draft    Device capability PIDF status extension      June 2003


   	<?xml version="1.0" encoding="UTF-8"?>
      <xs:schema targetNamespace="urn:ietf:params:xml:ns:simple-prescaps-ext"
         xmlns:tns="urn:ietf:params:xml:ns:simple-prescaps-ext"
         xmlns:xs="http://www.w3.org/2001/XMLSchema"
         elementFormDefault="qualified"
         attributeFormDefault="unqualified">
         <!-- This import brings in the XML language attribute xml:lang-->
         <xs:import namespace="http://www.w3.org/XML/1998/namespace"
         schemaLocation="http://www.w3.org/2001/xml.xsd"/>

         <xs:element name="prescaps">

         <xs:complexType name="prescaps">
            <xs:sequence>
                <xs:element name="feature" type="tns:feature" minOccurs="0"
                         maxOccurs="unbounded"/>
                <xs:any namespace="##other" processContents="lax" minOccurs="0"
                         maxOccurs="unbounded"/>
            </sequence>
         </complexType>

         <xs:complexType name="feature">
            <xs:sequence>
               <xs:element name="value" minOccurs="0"
                         maxOccurs="unbounded"/>
                  <xs:complexType>
                     <xs:simpleContent>
      			 <xs:extension base="xs:string">
      		         <xs:attribute name="negated" type="xs:boolean"
      		         use="optional" default="false"/>
      			 </xs:extension>
      		 </xs:simpleContent>
      	     </xs:complexType>
               <xs:attribute name="name" type="xs:string" use="required"/>
            </sequence>
         </complexType>
      </schema>

                                Figure 4


7. IANA Considerations

   This memo calls for IANA to register a new XML namespace URN as
   defined in [12]

7.1  URN sub-namespace registration for
    'urn:ietf:params:xml:ns:simple-prescaps-ext'



Lonnfors & Kiss        Expires December 25, 2003                [Page 9]

Internet-Draft    Device capability PIDF status extension      June 2003


   URI:
   urn:ietf:params:xml:ns:simple-prescaps-ext

   Description:
   This is the XML namespace for XML elements defined by [RFCXXXX] to
   describe communication means extension for CPIM-PIDF presence
   document format in application/cpim-pidf+xml content type.

   Registrant Contact:
   IETF, SIMPLE working group, <simple@ietf.org>
   Mikko Lonnfors, <mikko.lonnfors@nokia.com>

   XML:

   BEGIN
   <?xml version="1.0"?>
   <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML Basic 1.0//EN"
   "http://www.w3.org/TR/xhtml-basic/xhtml-basic10.dtd">
   <html xmlns="http://www.w3.org/1999/xhtml
   <head>
        <meta http-equiv="content-type"
        content="text/html;charset=iso-8859-1"/>
        <title>SIMPLE PIDF presence capabilities extension</title>
   </head>
   <body>
       <h1>Namespace for SIMPLE presence capabilities extension</h1>
       <h2>application/cpim-pidf+xml</h2>
       <p>See <a href="[[[URL of published RFC]]]">RFCXXXX</a>.</p>
    </body>
    </html>
   END


8. Security Considerations

   All security considerations specified in CPIM [5] and in PIDF [4]
   documents apply also to this document.  For clarity some of the
   security considerations are repeated here.

   Because presence is very privacy-sensitive information, the transport
   protocol for the presence information SHOULD have capabilities to
   protect protocol messages from possible threats, such as
   eavesdropping, corruption, tamper and replay attacks. The protocols
   SHOULD be able to use security mechanisms which are standardized or
   being standardized in IETF. However, it depends on the actual
   transport protocols which security mechanisms should be used, and it
   is beyond the scope of this memo.




Lonnfors & Kiss        Expires December 25, 2003               [Page 10]

Internet-Draft    Device capability PIDF status extension      June 2003


9. Acknowledgements

   Authors of this document would like to thank following people for
   their contributions and valuable comments: Paul Kyzivat, Markus
   Isomaki, and Hisham Khartabil.

Normative references

   [1]  Bradner, S., "Key words for use in RFCs to Indicate Requirement
        Levels", BCP 14, RFC 2119, March 1997.

   [2]  Day, M., Rosenberg, J. and H. Sugano, "A Model for Presence and
        Instant Messaging", RFC 2778, February 2000.

   [3]  Day, M., Aggarwal, S., Mohr, G. and J. Vincent, "Instant
        Messaging / Presence Protocol Requirements", RFC 2779, February
        2000.

   [4]  Sugano, H., Fujimoto, S., Klyne, G. and A. Bateman, "Common
        Presence and Instant Messaging (CPIM) Presence Information Data
        Format",  draft-ietf-impp-cpim-pidf-08, May 2002.

   [5]  Peterson, J., "Common Profile for Presence (CPP)",
        draft-ietf-impp-pres-03, May 2003.

   [6]  Peterson, J., "Common Profile for Instant Messaging (CPIM)",
        draft-ietf-impp-im-03, May 2003.

Informative references

   [7]   Schulzrinne, H., "Session Initiation Protocol (SIP) Caller
         Preferences and Callee Capabilities",
         draft-ietf-sip-callerprefs-08, July 2002.

   [8]   Rosenberg, J., "SIP: Session Initiation Protocol", RFC 3261,
         June 2002.

   [9]   Roach, A., "Session Initiation Protocol (SIP)-Specific Event
         Notification", RFC 3265, June 2002.

   [10]  Rosenberg, J., "Session Initiation Protocol (SIP) Extensions
         for Presence",  draft-ietf-simple-presence-10.txt, May 2002.

   [11]  Handley, M. and V. Jacobson, "SDP: Session Description
         Protocol", RFC 2327, April 1998.

   [12]  Mealling, M., "The IETF XML Registry",
         draft-mealling-iana-xmlns-registry-04, June 2002.



Lonnfors & Kiss        Expires December 25, 2003               [Page 11]

Internet-Draft    Device capability PIDF status extension      June 2003


   [13]  Freed, N. and N. Borenstein, "Multipurpose Internet Mail
         Extensions (MIME) part two: Media Types", RFC 2046, November
         1996.

   [14]  Holtman, K., Mutz, A. and T. Hardie, "Media Feature Tag
         Registration Procedure", RFC 2046, March 1999.


Authors' Addresses

   Mikko Lonnfors
   Nokia Research Center
   Itamerenkatu 11-13 00180
   Helsinki
   Finland

   Phone: +358 50 4836402
   EMail: mikko.lonnfors@nokia.com


   Krisztian Kiss
   Nokia
   P.O BOX 100
   33721 Tampere
   Finland

   Phone: +358 50 4835363
   EMail: krisztian.kiss@nokia.com























Lonnfors & Kiss        Expires December 25, 2003               [Page 12]

Internet-Draft    Device capability PIDF status extension      June 2003


Intellectual Property Statement

   The IETF takes no position regarding the validity or scope of any
   intellectual property or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; neither does it represent that it
   has made any effort to identify any such rights. Information on the
   IETF's procedures with respect to rights in standards-track and
   standards-related documentation can be found in BCP-11. Copies of
   claims of rights made available for publication and any assurances of
   licenses to be made available, or the result of an attempt made to
   obtain a general license or permission for the use of such
   proprietary rights by implementors or users of this specification can
   be obtained from the IETF Secretariat.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights which may cover technology that may be required to practice
   this standard. Please address the information to the IETF Executive
   Director.


Full Copyright Statement

   Copyright (C) The Internet Society (2003). All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works. However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assignees.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION



Lonnfors & Kiss        Expires December 25, 2003               [Page 13]

Internet-Draft    Device capability PIDF status extension      June 2003


   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.











































Lonnfors & Kiss        Expires December 25, 2003               [Page 14]

