



MPLS Working Group                                             G. Mirsky
Internet-Draft                                               J. Tantsura
Intended status: Standards Track                                Ericsson
Expires: January 1, 2015                                   I. Varlashkin
                                                                 EasyNet
                                                           June 30, 2014


     Bidirectional Forwarding Detection (BFD) Directed Return Path
                   draft-mirsky-mpls-bfd-directed-00

Abstract

   Bidirectional Forwarding Detection (BFD) is expected to monitor bi-
   directional paths.  When forward direction of a BFD session is to
   monitor explicitly routed path there is\ a need to be able to direct
   far-end BFD peer to use specific path as reverse direction of the BFD
   session.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on January 1, 2015.

Copyright Notice

   Copyright (c) 2014 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of



Mirsky, et al.           Expires January 1, 2015                [Page 1]


Internet-Draft          BFD Directed Return Path               June 2014


   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
     1.1.  Conventions used in this document . . . . . . . . . . . .   3
       1.1.1.  Terminology . . . . . . . . . . . . . . . . . . . . .   3
       1.1.2.  Requirements Language . . . . . . . . . . . . . . . .   3
   2.  Problem Satement  . . . . . . . . . . . . . . . . . . . . . .   3
   3.  Direct Reverse BFD Path . . . . . . . . . . . . . . . . . . .   3
     3.1.  Case of MPLS Data Plane . . . . . . . . . . . . . . . . .   4
       3.1.1.  BFD Reverse Path TLV  . . . . . . . . . . . . . . . .   4
       3.1.2.  Segment Routing Tunnel sub-TLV  . . . . . . . . . . .   4
     3.2.  Case of IPv6 Data Plane . . . . . . . . . . . . . . . . .   5
   4.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   6
     4.1.  TLV . . . . . . . . . . . . . . . . . . . . . . . . . . .   6
     4.2.  Sub-TLV . . . . . . . . . . . . . . . . . . . . . . . . .   6
   5.  Security Considerations . . . . . . . . . . . . . . . . . . .   7
   6.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   7
   7.  Normative References  . . . . . . . . . . . . . . . . . . . .   7
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   8

1.  Introduction

   The [RFC5880], [RFC5881], and the [RFC5883] established BFD protocol
   for IP networks and the [RFC5884] set rules of using BFD Asynchronous
   mode over IP/MPLS LSPs.  All standards implicitly assume that the
   far-end BFD peer will use the best route regardless of route being
   used to send BFD control packets towards it.  As result, if the near-
   end BFD peer sends its BFD control packets over explicit path that is
   diverging from the best route, then reverse direction of the BFD
   session is likely not to be on co-routed bi-directional path with the
   forward direction of the BFD session.  And because BFD control
   packets are not guaranteed to cross the same links and nodes in both
   directions detection of Loss of Continuity (LoC) defect in forward
   direction is not guaranteed or free of positive negatives.

   This document proposes to use BFD Return Path TLV extension to LSP
   Ping [RFC4379] to instruct the far-end BFD peer to use explicit path
   for its BFD control packets associated with the particular BFD
   session.  As a special case, forward and reverse directions of the
   BFD session can form bi-directional co-routed associated channel.








Mirsky, et al.           Expires January 1, 2015                [Page 2]


Internet-Draft          BFD Directed Return Path               June 2014


1.1.  Conventions used in this document

1.1.1.  Terminology

   BFD: Bidirectional Forwarding Detection

   MPLS: Multiprotocol Label Switching

   LSP: Label Switching Path

   LoC: Loss of Continuity

1.1.2.  Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in
   [RFC2119].

2.  Problem Satement

   BFD is best suited to monitor bi-directional co-routed paths.  In
   most cases, in IP and IP/MPLS networks the best route between two IP
   nodes is likely to be co-routed in the stable network environment so
   that implicit BF D requirement is being fulfilled.  If BFD is tasked
   to monitor unidirectional explicitly routed path, e.g.  MPLS LSP, its
   control packets in forward direction would be in-band due to
   mechanism defined in [RFC5884] and [RFC5586].  But the reverse
   direction of the BFD session would still follow the best route and
   that presents following problems in regard to detecting defects on
   the unidirectional explicit path:

      - failure detection on the reverse path cannot be interpreted as
      bi-directional failure and thus trigger, for example, protection
      switchover of the forward direction;

      - if reverse direction is in Down state, the head-end node would
      not receive indication of forward direction failure from its far-
      end peer.

   To address these challenges the far-end BFD peer should be instructed
   to use specific path for its control packets.

3.  Direct Reverse BFD Path







Mirsky, et al.           Expires January 1, 2015                [Page 3]


Internet-Draft          BFD Directed Return Path               June 2014


3.1.  Case of MPLS Data Plane

   LSP ping, defined in [RFC4379], uses BFD Discriminator TLV [RFC5884]
   to bootstrap a BFD session over an MPLS LSP.  This document defines a
   new TLV, BFD Reverse Path TLV, that must contain a single sub-TLV
   that can be used to carry information about reverse path for the
   specified in BFD Discriminator TLV session.

3.1.1.  BFD Reverse Path TLV

   The BFD Reverse Path TLV is an optional TLV within the LSP ping
   protocol.  However, if used the BFD Discriminator TLV MUST be
   included in an Echo Request message as well.  If the BFD
   Discriminator TLV is not present when the BFD Reverse Path TLV is
   included, then it MUST be treated as malformed Echo Request, as
   described in [RFC4379].

   The BFD Reverse Path TLV carries the specified path that BFD control
   packets of the BFD session referenced in the BFD Discriminator TLV
   are required to follow.  The format of the BFD Reverse Path TLV is as
   presented in Figure 1.

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |   BFD Reverse Path TLV Type   |          Length             |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                        Reverse Path                         |
    ~                                                             ~
    |                                                             |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                      Figure 1: BFD Reverse Path TLV

   BFD Reverse Path TLV Type is 2 octets in length and value to be
   assigned by IANA.

   Length is 2 octets in lengh and defines the length in octets of the
   Reverse Path field.

3.1.2.  Segment Routing Tunnel sub-TLV

   With MPLS data plane explicit path can be either Static or RSVP-TE
   LSP, or Segment Routing tunnel.  In case of Static or RSVP-TE LSP
   [RFC7110] defined sub-TLVs to identify explicit return path.  For the
   Segment Routing with MPLS data plane case a new sub-TLV is defined in
   this document as presented in Figure 2.




Mirsky, et al.           Expires January 1, 2015                [Page 4]


Internet-Draft          BFD Directed Return Path               June 2014


    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |  SegRouting MPLS sub-TLV Type |          Length             |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                     Label Stack Element                     |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                     Label Stack Element                     |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    ~                                                             ~
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

               Figure 2: Segment Routing MPLS Tunnel sub-TLV

   The Segment Routing Tunnel sub-TLV Type is two octets in length, and
   will be allocated by IANA.

   The Segment Routing Tunnel sub-TLV MAY be used in Reply Path TLV
   defined in [RFC7110]

3.2.  Case of IPv6 Data Plane

   IPv6 can be data plane of choice for Segment Routed tunnels
   [I-D.previdi-6man-segment-routing-header].  In such networks the BFD
   Reverse Path TLV described in Section 3.1.1 can be used as well.  IP
   networks, unlike IP/MPLS, do not require use of LSP ping with BFD
   Discriminator TLV[RFC4379] to bootstrap BFD session.  But to specify
   reverse path of a BFD session in IPv6 environment the BFD
   Discriminator TLV MUST be used along with the BFD Reverse Path TLV.
   The BFD Reverse Path TLV in IPv6 network MUST include sub-TLV.





















Mirsky, et al.           Expires January 1, 2015                [Page 5]


Internet-Draft          BFD Directed Return Path               June 2014


    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |  SegRouting IPv6 sub-TLV Type |          Length             |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                             |
    |                         IPv6 Prefix                         |
    |                                                             |
    |                                                             |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                             |
    |                         IPv6 Prefix                         |
    |                                                             |
    |                                                             |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    ~                                                             ~
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

               Figure 3: Segment Routing IPv6 Tunnel sub-TLV

4.  IANA Considerations

4.1.  TLV

   The IANA is requested to assign a new value for BFD Reverse Path TLV
   from the "Multiprotocol Label Switching Architecture (MPLS) Label
   Switched Paths (LSPs) Ping Parameters - TLVs" registry, "TLVs and
   sub-TLVs" sub-registry.

            +----------+----------------------+---------------+
            | Value    | Description          | Reference     |
            +----------+----------------------+---------------+
            | X (TBD1) | BFD Reverse Path TLV | This document |
            +----------+----------------------+---------------+

                     Table 1: New BFD Reverse Type TLV

4.2.  Sub-TLV

   The IANA is requested to assign one new sub-TLV type from
   "Multiprotocol Label Switching Architecture (MPLS) Label Switched
   Paths (LSPs) Ping Parameters - TLVs" registry, "Sub-TLVs for TLV Type
   1" sub-registry.








Mirsky, et al.           Expires January 1, 2015                [Page 6]


Internet-Draft          BFD Directed Return Path               June 2014


    +----------+-------------------------------------+---------------+
    | Value    | Description                         | Reference     |
    +----------+-------------------------------------+---------------+
    | X (TBD2) | Segment Routing MPLS Tunnel sub-TLV | This document |
    | X (TBD3) | Segment Routing IPv6 Tunnel sub-TLV | This document |
    +----------+-------------------------------------+---------------+

                Table 2: New Segment Routing Tunnel sub-TLV

5.  Security Considerations

   Sequirity considerations discussed in [RFC5880], [RFC5884], and
   [RFC4379], apply to this document.

6.  Acknowledgements

7.  Normative References

   [I-D.previdi-6man-segment-routing-header]
              Previdi, S., Filsfils, C., Field, B., and I. Leung, "IPv6
              Segment Routing Header (SRH)", draft-previdi-6man-segment-
              routing-header-01 (work in progress), June 2014.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC4379]  Kompella, K. and G. Swallow, "Detecting Multi-Protocol
              Label Switched (MPLS) Data Plane Failures", RFC 4379,
              February 2006.

   [RFC5586]  Bocci, M., Vigoureux, M., and S. Bryant, "MPLS Generic
              Associated Channel", RFC 5586, June 2009.

   [RFC5880]  Katz, D. and D. Ward, "Bidirectional Forwarding Detection
              (BFD)", RFC 5880, June 2010.

   [RFC5881]  Katz, D. and D. Ward, "Bidirectional Forwarding Detection
              (BFD) for IPv4 and IPv6 (Single Hop)", RFC 5881, June
              2010.

   [RFC5883]  Katz, D. and D. Ward, "Bidirectional Forwarding Detection
              (BFD) for Multihop Paths", RFC 5883, June 2010.

   [RFC5884]  Aggarwal, R., Kompella, K., Nadeau, T., and G. Swallow,
              "Bidirectional Forwarding Detection (BFD) for MPLS Label
              Switched Paths (LSPs)", RFC 5884, June 2010.





Mirsky, et al.           Expires January 1, 2015                [Page 7]


Internet-Draft          BFD Directed Return Path               June 2014


   [RFC7110]  Chen, M., Cao, W., Ning, S., Jounay, F., and S. Delord,
              "Return Path Specified Label Switched Path (LSP) Ping",
              RFC 7110, January 2014.

Authors' Addresses

   Greg Mirsky
   Ericsson

   Email: gregory.mirsky@ericsson.com


   Jeff  Tantsura
   Ericsson

   Email: jeff.tantsura@ericsson.com


   Ilya Varlashkin
   EasyNet

   Email: Ilya.Varlashkin@easynet.com





























Mirsky, et al.           Expires January 1, 2015                [Page 8]

