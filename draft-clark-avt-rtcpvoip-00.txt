 
                                                               A. Clark 
                                                               Telchemy 
   Internet Draft  
   Document: draft-clark-avt-rtcpvoip-00   
   
   Expires: August 2002                                   February 2002 
 
           RTCP Extensions for Voice over IP Metric Reporting
    
 
Status of this Memo 
   This document is an Internet-Draft and is in full conformance with 
   all provisions of Section 10 of RFC2026. 
    
   Internet-Drafts are working documents of the Internet Engineering 
   Task Force (IETF), its areas, and its working groups.  Note that 
   other groups may also distribute working documents as Internet-
   Drafts. 
    
   Internet-Drafts are draft documents valid for a maximum of six 
   months and may be updated, replaced, or obsoleted by other documents 
   at any time.  It is inappropriate to use Internet- Drafts as 
   reference material or to cite them other than as work in progress. 
    
   The list of current Internet-Drafts can be accessed at 
   http://www.ietf.org/ietf/1id-abstracts.txt 
    
   The list of Internet-Draft Shadow Directories can be accessed at 
   http://www.ietf.org/shadow.html. 
    
    
Abstract 
   This document specifies an extension to the Real-time Transport 
   Control Protocol (RTCP) to support reporting of Voice over IP metrics
   from end-points. The proposed extension is useful for supporting
   both mid-call and end-of-call reporting of metrics for management
   and active control applications.
    
    
1. Conventions and Acronyms 
   The keywords MUST, MUST NOT, REQUIRED, SHALL, SHALL NOT, SHOULD, 
   SHOULD NOT, RECOMMENDED, MAY, and OPTIONAL, when they appear in this 
   document, are to be interpreted as described in RFC 2119. 
    





     
   Clark		     Internet Draft - Expires 2002            [Page 1] 







                RTCP Extensions for Voice over IP Metric Reporting 
    
 
2. Introduction 
   The Real-time Transport Protocol (RTP) [1] provides a real-time 
   transport mechanism suitable for unicast or Internet Standard 
   multicast communication between multimedia applications. Typical 
   uses are for real-time or near real-time group communication via 
   audio and video data streams. An important component of the RTP 
   protocol is the control channel, defined as the Real-Time Control 
   Protocol (RTCP). RTCP involves the periodic transmission of control 
   packets between group members in a session, enabling the 
   distribution or calculation of session specific information such as 
   packet loss and round trip time to other hosts, and group size 
   estimation. An additional advantage of providing a control channel 
   for a session is that a third-party session monitor can listen to 
   the traffic to establish network conditions and to diagnose faults 
   based on receiver locations. 
   
   Multimedia services, for example Voice over IP, are very sensitive
   to short term variations in network impairments such as packet loss 
   and jitter.  The use of adaptive jitter buffers and other impairment
   mitigation techniques can improve performance however make it very 
   difficult to infer the behavior of the end to end connection from
   observations of the packet stream or from RTCP reported statistics.

   The extensions to RTCP described in this document provide concise
   but useful metrics for Voice over IP calls.

    
3. Basic Operation 
   This draft proposes a small set of metrics that provide sufficient
   information to characterize a Voice over IP connection.  The set
   of metrics includes:-

3.1   Packet loss metrics
   It has been shown [2] that the distribution of packet loss on the
   Internet can be reasonably approximated by a Markov Model.  In the
   case of a Voice over IP connection it is necessary to consider both
   packets lost within the IP network and those discarded by a jitter
   buffer due to late arrival, overrun or underrun.

   (i) Packet loss rate (%) - a measure of the proportion of packets
   lost within the IP network

   (ii) Packet discard rate (%) - a measure of the proportion of
   packets discarded by the jitter buffer
       






   Clark		     Internet Draft - Expires 2002            [Page 2] 








                RTCP Extensions for Voice over IP Metric Reporting 
    

   Assume a Gilbert-Elliott model of the IP "channel" in which a
   "burst" is a period of time during which the number of packets 
   received between two successive lost or discarded packets is less 
   than some minimum Gmin [3].  This approach works well for Voice 
   over IP as it treats isolated lost packets as distinct from periods 
   of high packet loss - reflecting the effectiveness of packet 
   loss concealment.

   (iii) Mean burst duration (mS)- the average length of a burst

   (iv) Mean burst density (%) - the proportion of packets lost within
   a burst

   (v) Mean gap duration (mS) - the average time between bursts

   (vi) Mean gap density (%) - the proportion of packets lost within
   a burst

3.2 Delay
   Delay is critical in interactive multimedia sessions.  In general 
   this comprises the transmission delay and the end-system delay.
   Users are generally not aware of asymmetry in delay and hence it
   is sufficient to report round trip delay.

   (vii) Round trip delay (mS) - as measured by RTCP

   (viii) End-system delay (mS) - including jitter buffer and encoding/
   decoding delay

3.3 Analog metrics
   Analog metrics may be available in some systems

   (ix) Voice signal relative power (dB)

   (x) Echo level

   (xi) Noise level

   (xii) Distortion level

3.4 Voice Quality metrics
   Computing voice quality metrics in the end-system has the
   advantage that all the essential information is available
   and that time correlation is preserved.

   (xiii) Voice quality metric - Voice over IP segment (R factor)

   (xiv) Voice quality metric - Voice over IP segment (MOS score)

   (xv) Voice quality metric - External network (R factor)

     
   Clark		     Internet Draft - Expires 2002            [Page 3] 







                RTCP Extensions for Voice over IP Metric Reporting 
    

     
4. Extended Report Blocks

   4.1 RTCP Report Format
   Metrics will be carried in an RTCP extended report block [4]

   An extended report block has the following format:


 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|      BT       | type-specific |             length            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
:                      type-specific data                       :
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


   block type (BT): 8 bits = TBD
   Identifies the specific block format.

   type-specific: 8 bits
   The use of these bits is defined by the particular block type.

   length: 16 bits
   The length of this report block in 32-bit words minus one, including
   the header.

   type-specific data: variable length
   This MUST be a multiple of 32 bits long.  It MAY be zero bits long.

   The encoding of the VoIP performance metrics consists of a six
   32 bit words encoded using the following format. 

   4.2 Packet Loss and Discard Statistics
 
Packet loss rate

 0                   1
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|          loss rate            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   
   The packet loss rate is defined as 10x the percentage of packets
   detected as lost at the receiving RTCP instance during the RTP session
   or VoIP call.  For example, a value of 23 would correspond to a 
   detected packet loss rate of 2.3%
     
   Clark		     Internet Draft - Expires 2002            [Page 4] 







                RTCP Extensions for Voice over IP Metric Reporting 
    

Packet discard rate

 0                   1
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        discard rate           |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   The packet discard rate is defined as 10x the percentage of packets
   discarded due to underrun or buffer overflow at the receiving jitter
   buffer during the RTP session or VoIP call.  For example, a value of 
   47 would correspond to a discard rate of 4.7%


Mean burst duration (mS)

 0                   1
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|          burst duration       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   The mean burst duration is defined as the average period of time
   spent in a high loss state, i.e. a state in which the number of
   consecutive received packets between lost or discarded packets is
   less than some maximum value Gmin (default value 16).  This parameter
   is expressed in milliseconds.

Mean burst density

 0                   1
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|          burst density        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   Burst density is defined as 10x the percentage of packets lost or
   discarded whilst in the burst state.  For example, a value of 
   100 would correspond to a loss density of 10.0%
     








   Clark		     Internet Draft - Expires 2002            [Page 5] 







                RTCP Extensions for Voice over IP Metric Reporting 
    

Mean gap duration (mS)

 0                   1
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        gap duration           |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   The mean gap duration is defined as the average period of time
   spent in a low loss state, i.e. a state in which the number of
   consecutive received packets between lost or discarded packets is
   greater than some maximum value Gmin (default value 16).  This parameter
   is expressed in milliseconds.

Mean gap density

 0                   1
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|         gap density           |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   Gap density is defined as 10x the percentage of packets lost or
   discarded whilst in the gap state.  For example, a value of 
   3 would correspond to a loss density of 0.3%

   4.3 Delay metrics

Round trip delay (mS)

 0                   1
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|          RTD                  |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   Round trip delay is defined as the delay measured between RTCP
   end points expressed in milliseconds.

End-system delay (mS)

 0                   1
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        end system delay       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   End system delay is defined as the total encoding, decoding and
   jitter buffer delay determined at the end point.
     
   Clark		     Internet Draft - Expires 2002            [Page 6] 







                RTCP Extensions for Voice over IP Metric Reporting 
    

   4.4 Analog signal metrics

Voice signal relative power (dBm)

 0
 0 1 2 3 4 5 6 7 
+-+-+-+-+-+-+-+-+
| Sig Power     |
+-+-+-+-+-+-+-+-+

   The voice signal relative power is defined as the ratio of the
   peak signal power to overflow signal power expressed in dB as
   a signed 8 bit number.

Echo level

 0                
 0 1 2 3 4 5 6 7 
+-+-+-+-+-+-+-+-+
| echo level    |
+-+-+-+-+-+-+-+-+

   The echo level is defined as the ratio of far end echo to transmit
   level expressed in dB as a signed 8 bit number.

Noise level
 0                
 0 1 2 3 4 5 6 7 
+-+-+-+-+-+-+-+-+
| Noise level   |
+-+-+-+-+-+-+-+-+

   The noise level is defined as the estimated silent period background
   noise level expressed in dBm as a signed 8 bit number.

Distortion level
 0                
 0 1 2 3 4 5 6 7 
+-+-+-+-+-+-+-+-+
| distortion    |
+-+-+-+-+-+-+-+-+

   TBD
     







   Clark		     Internet Draft - Expires 2002            [Page 7] 







                RTCP Extensions for Voice over IP Metric Reporting 
    

   4.5 Voice quality metrics

Voice quality metric - Voice over IP segment R Factor
 0                
 0 1 2 3 4 5 6 7 
+-+-+-+-+-+-+-+-+
| R Factor      |
+-+-+-+-+-+-+-+-+

   Voice quality metric expressed as an R Factor

Voice quality metric - Voice over IP segment MOS
 0                
 0 1 2 3 4 5 6 7 
+-+-+-+-+-+-+-+-+
|   MOS         |
+-+-+-+-+-+-+-+-+

   Voice quality metric expressed as MOS x 10.  For example
   a value of 35 would correspond to an estimated MOS score of
   3.5

Voice quality metric - External network R Factor
 0                
 0 1 2 3 4 5 6 7 
+-+-+-+-+-+-+-+-+
|  R Factor     |
+-+-+-+-+-+-+-+-+

   Voice quality metric related to an external network segment, for
   example a cellular network.

 0                
 0 1 2 3 4 5 6 7 
+-+-+-+-+-+-+-+-+
| echo level    |
+-+-+-+-+-+-+-+-+




     







   Clark		     Internet Draft - Expires 2002            [Page 8] 









                RTCP Extensions for Voice over IP Metric Reporting 
    


5. Acknowledgements

6. Intellectual Property
   The IETF takes no position regarding the validity or scope of any
   intellectual property or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; neither does it represent that it
   has made any effort to identify any such rights.  Information on the
   IETF's procedures with respect to rights in standards-track and
   standards-related documentation can be found in BCP-11.  Copies of
   claims of rights made available for publication and any assurances of
   licenses to be made available, or the result of an attempt made to
   obtain a general license or permission for the use of such
   proprietary rights by implementors or users of this specification can
   be obtained from the IETF Secretariat.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights which may cover technology that may be required to practice
   this standard.  Please address the information to the IETF Executive
   Director.

7. References

   [1] H. Schulzrinne, S. Casner, R. Frederick and V. Jacobson, "RTP:
   A transport protocol for real-time applications", RFC 1889, IETF,
   February 1996

   [2] J. Bolot, S. Fosse-Parisis, D. Towsley "Adaptive FEC-Based Error 
   Control for Interactive Audio in the Internet", IEEE Infocom 1999

   [3] QoS Measurement for Voice over IP, ETSI TIPHON TS 101 329-5,
   December 2000 

   [4] T. Freidman, R. Caceres, K. Almeroth, K. Sarac, "RTCP Reporting
   Extensions", draft-friedman-avt-rtcp-report-extns-02.txt
     








   Clark		     Internet Draft - Expires 2002            [Page 9] 







                RTCP Extensions for Voice over IP Metric Reporting 
    

8  Full Copyright Statement
   Copyright (C) The Internet Society (2002). All Rights Reserved. 
    
   This document and translations of it may be copied and furnished to 
   others, and derivative works that comment on or otherwise explain it 
   or assist in its implementation may be prepared, copied, published 
   and distributed, in whole or in part, without restriction of any 
   kind, provided that the above copyright notice and this paragraph 
   are included on all such copies and derivative works.  However, this 
   document itself may not be modified in any way, such as by removing 
   the copyright notice or references to the Internet Society or other 
   Internet organizations, except as needed for the purpose of 
   developing Internet standards in which case the procedures for 
   copyrights defined in the Internet languages other than English. 
    
   The limited permissions granted above are perpetual and will not be 
   revoked by the Internet Society or its successors or assigns. 
    
   This document and the information contained herein is provided on an 
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING 
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING 
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION 
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF 
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE." 
     
9. Authors' Addresses
   
   Alan Clark <alan@telchemy.com>
   Telchemy Incorporated
   3360 Martins Farm Road, Suite 200
   Suwanee, GA 30024

     
   Clark		     Internet Draft - Expires 2002        [Page 10] 

