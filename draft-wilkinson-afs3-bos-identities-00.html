<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Adding Extended Authentication Names to the Bos Super User list</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Adding Extended Authentication Names to the Bos Super User list">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header"> Wilkinson</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">YFS</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">December 7, 2010</td></tr>
<tr><td class="header">Expires: June 10, 2011</td><td class="header">&nbsp;</td></tr>
</table></td></tr></table>
<h1><br />Adding Extended Authentication Names to the Bos Super User list<br />draft-wilkinson-afs3-bos-identities-00</h1>

<h3>Abstract</h3>

<p>This document describes an additional set of RX remote procedure calls which may be used to managed extended authenticated names within the AFS-3 basic overseer service's SuperUser list
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on June 10, 2011.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#anchor2">2.</a>&nbsp;
Error codes<br />
<a href="#anchor3">3.</a>&nbsp;
RPC Interface<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">3.1.</a>&nbsp;
AddSuperIdentity<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">3.2.</a>&nbsp;
DeleteSuperIdentity<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">3.3.</a>&nbsp;
ListSuperIdentities<br />
<a href="#anchor7">4.</a>&nbsp;
Behaviour of existing RPCs<br />
<a href="#anchor8">5.</a>&nbsp;
Security Considerations<br />
<a href="#anchor9">6.</a>&nbsp;
IANA Considerations<br />
<a href="#anchor10">7.</a>&nbsp;
AFS-3 Registry Considerations<br />
<a href="#rfc.references1">8.</a>&nbsp;
Normative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Author's Address<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>AFS-3 provides a management service (the "basic overseer service", or "bos" for short) which manages service wide configuration information, and launches the daemons which provide each of the individual AFS services.  This management service also maintains a list of identities which are granted super user privileges to bos itself, and to the services it manages. This list is maintained via a number of RX remote procedure calls which can be used to list, add, and remove identities.  Traditionally, AFS-3's security model was Kerberos v4 based, and the existing RPCs for managing the super user list are based around Kerberos v4 names.
</p>
<p><a class='info' href='#I-D.brashear-afs3-pts-extended-names'>Extended authentication names<span> (</span><span class='info'>Brashear, D., &ldquo;Authentication Name Mapping extension for AFS-3 Protection Service,&rdquo; November&nbsp;2010.</span><span>)</span></a> [I&#8209;D.brashear&#8209;afs3&#8209;pts&#8209;extended&#8209;names] provide a mechanism for encapsulating a wider variety of name types within the AFS-3 system. These new identity types bring with them a requirement to be able to manipulate bos super user lists containing extended identities.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Error codes</h3>

<p>The existing BZNOENT, BZEXISTS and BZPERM error codes are used by the RPCs defined within this document.
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
RPC Interface</h3>

<p>Three new RPCs are defined for the bos service. These are direct equivalents of existing RPCs, with the exception that they add support for extended authentication names.
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
AddSuperIdentity</h3>

<p>This is a direct equivalent of the existing AddSUser call. It adds an identity to the service's super user list.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
	AddSuperIdentity(IN struct PrAuthName *name) = XXX;
</pre></div>
<p>On success, the call returns 0. If the user doesn't have sufficient permission, then BZACCESS is returned. If the given identity already exists within the super user list BZEXISTS is returned.
</p>
<p>When called with a name with the PRAUTHTYPE_KRB4 data type (a Kerberos v4 name), the behaviour of this function MUST be identical to that of the existing AddSUser function.
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
DeleteSuperIdentity</h3>

<p>This is a direct equivalent of the existing DeleteSUser call. It deletes an identity from the service's super user list.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
	DeleteSuperIdentity(IN struct PRAuthName *name) = XXX;
</pre></div>
<p>On success, the call returns 0. If the user doesn't have sufficient permission, then BZACCESS is returned. If the identity doesn't exist within the super user list, then BZNOENT is returned.
</p>
<p>When called with a name with the PRAUTHTYPE_KRB4 data type the behaviour of this function MUST be identical to that of the existing DeleteSUser function
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
ListSuperIdentities</h3>

<p>This is an equivalent to the existing ListSUsers call. It provides a mechanism for building an iterator over the server's super user list.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
	ListSuperIdentities(IN afs_int32 cookie,
			    OUT struct PRAuthName *name,
			    OUT afs_int32 *newcookie) = XXX;
</pre></div>
<p>The first time this function is called, cookie MUST be set to 0. The server will then return the first entry in the super user list (or BZNOENT, if the super user list is empty). In newcookie, it will return a value that can be used to obtain the next entry from the server, or 0 if the current entry is the last one. The client may then repeat its call using newcookie as the cookie value, until it has obtained the desired number of entries, or until newcookie is 0, and the iteration is complete.
</p>
<p>This call MUST return all super users registered with the bos server, regardless of whether they were created using the RPCs defined in this document, or by the existing AFS-3 bos RPCs. Names created through the AddSUser interface should be returned as PRAuthNames with the PRAUTHTYPE_KRB4 type, as detailed in the extended authentication name specification.
</p>
<p>On success, the RPC will return 0. If the user doesn't have sufficient permissions to read the super user list, then BZACCESS is returned. If an entry pointed to by a specific cookie has ceased to exist, or if the super user list is empty, then BZNOENT is returned.
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Behaviour of existing RPCs</h3>

<p>The existing RPCs, and the ones described within this document, MUST both provide access to the same super user list. Where equivalent functionality is available to both new, and old, RPCs, there should be no observable difference between using the old or new forms.
</p>
<p>Calling AddSUser must have an identical result to calling AddSuperIdentity on the corresponding Kerberos v4 name
</p>
<p>Calling DeleteSUser must have an identical result to calling DeleteSuperIdentity on the corresponding Kerberos v4 name
</p>
<p>The ListSUsers RPC only iterates over Kerberos v4 form names. Due to the behaviour of existing clients spaces MUST NOT be left in the iteration sequence for extended identities in the user list. This means that ListSUsers will present an incomplete view of the super identities present on a particular server. Consideration SHOULD, therefore, be given to removing the ListSUsers call when support for the RPCs listed in this document is added.
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Security Considerations</h3>

<p>Current AFS-3 implementations provide a high degree of access to identities on the super user list. Whilst this document doesn't proscribe particular levels of access control for the RPCs it specifies, implementers should consider whether restricting these RPCs to particular security classes, and protection levels, is appropriate
</p>
<p>PrAuthNames contain both display and exported name forms, with the display name being provided purely for user interface purposes. When returning names to the client, servers MUST regenerate the display name from the given exported name. Where regeneration is impossible (for instance, because the name's underlying mechanism is unavailable), servers must indicate that the display name is unverified.
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
IANA Considerations</h3>

<p>This document doesn't require any IANA registrations.
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
AFS-3 Registry Considerations</h3>

<p>This documentation requires the registration of code points for the 3 new RPCS detailed above.
</p>
<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.brashear-afs3-pts-extended-names">[I-D.brashear-afs3-pts-extended-names]</a></td>
<td class="author-text">Brashear, D., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-brashear-afs3-pts-extended-names-07.txt">Authentication Name Mapping extension for AFS-3 Protection Service</a>,&rdquo; draft-brashear-afs3-pts-extended-names-07 (work in progress), November&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-brashear-afs3-pts-extended-names-07.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Author's Address</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Simon Wilkinson</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Your File System Inc</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:simon@sxw.org.uk">simon@sxw.org.uk</a></td></tr>
</table>
</body></html>
