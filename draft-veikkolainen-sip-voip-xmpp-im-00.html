<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Guidelines and Protocol Extensions for Combining SIP Based
      Real-time Media Sessions With XMPP Based Instant Messaging and
      Presence Service.</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Guidelines and Protocol Extensions for Combining SIP Based
      Real-time Media Sessions With XMPP Based Instant Messaging and
      Presence Service.">
<meta name="keywords" content="I-D, Internet-Draft, XMPP">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">S. Veikkolainen</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">M. Isomaki</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">Nokia</td></tr>
<tr><td class="header">Expires: September 5, 2009</td><td class="header">March 04, 2009</td></tr>
</table></td></tr></table>
<h1><br />Guidelines and Protocol Extensions for Combining SIP Based
      Real-time Media Sessions With XMPP Based Instant Messaging and
      Presence Service.<br />draft-veikkolainen-sip-voip-xmpp-im-00</h1>

<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on September 5, 2009.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents in effect on the date of
publication of this document (http://trustee.ietf.org/license-info).
Please review these documents carefully, as they describe your
rights and restrictions with respect to this document.</p>

<h3>Abstract</h3>

<p>
	This memo defines guidelines and protocol extensions for
	combining Session Initiation Protocol (SIP)  based real-time
	media sessions with Extensible Messaging and Presence Protocol
	(XMPP) based instant messaging and presence services in a
	seamless manner. This is accomplished by integration and
	protocol extension support in the endpoints, without
	requiring any changes in the SIP or XMPP server
	infrastructure. It is even possible that SIP and XMPP services
	are offered by different service providers. 
      
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#intro">1.</a>&nbsp;
Introduction<br />
<a href="#sec-conventions">2.</a>&nbsp;
Conventions Used in This Document<br />
<a href="#sec-deployment-scenarios-and-use-cases">3.</a>&nbsp;
Deployment scenarios and use cases<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-deployment-scenarios">3.1.</a>&nbsp;
Deployment scenarios<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-use-cases">3.2.</a>&nbsp;
Use cases<br />
<a href="#sec-requirements">4.</a>&nbsp;
Requirements<br />
<a href="#sec-overview-of-operation">5.</a>&nbsp;
Overview of operation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-adding-sip-session">5.1.</a>&nbsp;
Endpoints engaged in XMPP conversation adding a
		      SIP session<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-adding-xmpp-conversation">5.2.</a>&nbsp;
Endpoints engaged in a SIP session adding an
		    XMPP IM conversation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-using-xmpp-presence">5.3.</a>&nbsp;
Using XMPP presence for publishing and obtaining
	SIP contact address, media capabilities and availability<br />
<a href="#sec-protocol-extensions">6.</a>&nbsp;
Protocol extensions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-extension-message-stanza">6.1.</a>&nbsp;
Extensions to XMPP message stanza<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sip-contact-element">6.1.1.</a>&nbsp;
The &lt;sip-contact&gt; element<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sip-correlation-element">6.1.2.</a>&nbsp;
The &lt;sip-correlation&gt; element<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-extensions-to-xmpp-presence-stanza">6.2.</a>&nbsp;
Extensions to XMPP presence stanza<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-extensions-to-sip-headers">6.3.</a>&nbsp;
Extensions to SIP headers<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-xmpp-thread-header">6.3.1.</a>&nbsp;
SIP XMPP-Thread header<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-xmpp-contact-header">6.3.2.</a>&nbsp;
SIP XMPP-Contact header<br />
<a href="#sec-examples">7.</a>&nbsp;
Examples<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-example-add-voice-component">7.1.</a>&nbsp;
Endpoint engaged in an IM session adds a
		    voice/video component to the conversation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-example-add-im-component">7.2.</a>&nbsp;
Endpoint engaged in a SIP session adds an XMPP IM
		    conversation<br />
<a href="#sec-iana">8.</a>&nbsp;
IANA Considerations<br />
<a href="#sec-security">9.</a>&nbsp;
Security Considerations<br />
<a href="#sec-acks">10.</a>&nbsp;
Acknowledgments<br />
<a href="#rfc.references1">11.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">11.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">11.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="intro"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
	Currently most standards-based Voice over IP (VoIP)
	deployments use Session Initiation Protocol (SIP). In addition
	to providing basic voice service SIP has an extensive support
	for more advanced telephony features including interworking
	with the traditional Public Switched Telephone Network
	(PSTN). SIP is also gaining popularity in the field of video
	communication.
      
</p>
<p>
	At the same time, the Extensible Messaging and Presence
	Protocol (XMPP) is enjoying widespread usage in instant
	messaging and presence services. An interesting scenario
	arises when a SIP based voice and video service is combined
	together with an XMPP based instant messaging and presence
	service.
      
</p>
<p>
	This memo describes how SIP based real-tome sessions and XMPP
	based IM and presence can be offered using existing server
	implementations. This memo also presents a set of requirements
	and protocol extensions for SIP User Ageng and XMPP client
	implementations in order to offer a seamless usage experience
	when using SIP based VoIP  with XMPP based instant messaging
	and presence. 
      
</p>
<p>
	Combining SIP based real-time services with XMPP based presence
	and IM service can be accomplished for the most part in the
	endpoints; little if anything needs to be done in the service
	infrastructure. It is also possible to achieve seamless
	integration even when SIP and XMPP services are offered by
	different service providers.
      
</p>
<p>
	The main issues that need to be addressed when offering such
	combined services are identities and addressing. SIP and XMPP
	both use a similar addressing scheme (based on "user@domain"
	structure) to identify users and endpoints but there are some
	subtle differencies as well. It is not possible to assume any
	algorithmic correlation between SIP and XMPP Universal
	Resource Identifiers (URI), even when they identify the same
	user or endpoint. New protocol mechanisms are needed to tie
	together communication contexts that are based on the two
	protocols. 
      
</p>
<p>
	We do not discuss how protocol translation through a gateway
	could be performed between the protocols; this is the subject
	of other work, see for example <a class='info' href='#I-D.saintandre-sip-xmpp-core'>[I&#8209;D.saintandre&#8209;sip&#8209;xmpp&#8209;core]<span> (</span><span class='info'>Saint-Andre, P., Houri, A., and J. Hildebrand, &ldquo;Interworking between the Session Initiation Protocol (SIP) and the  Extensible Messaging and Presence Protocol (XMPP): Core,&rdquo; March&nbsp;2009.</span><span>)</span></a>. 
      
</p>
<p>
	We focus on one-to-one communication only. Multiparty use
	cases such as combining SIP voice conference with XMPP IM
	group chat are beyond the scope.
      
</p>
<p>
	The document structure is as follows: <a class='info' href='#sec-conventions'>Section&nbsp;2<span> (</span><span class='info'>Conventions Used in This Document</span><span>)</span></a> present the document conventions
	and definitions, <a class='info' href='#sec-deployment-scenarios-and-use-cases'>Section&nbsp;3<span> (</span><span class='info'>Deployment scenarios and use cases</span><span>)</span></a> presents
	deployment scenarios and use cases, <a class='info' href='#sec-requirements'>Section&nbsp;4<span> (</span><span class='info'>Requirements</span><span>)</span></a> lists the 
	requirements, <a class='info' href='#sec-overview-of-operation'>Section&nbsp;5<span> (</span><span class='info'>Overview of operation</span><span>)</span></a>
	provides an operview of the protocol operation, <a class='info' href='#sec-protocol-extensions'>Section&nbsp;6<span> (</span><span class='info'>Protocol extensions</span><span>)</span></a> provides the defintions,
	and examples are presented  in <a class='info' href='#sec-examples'>Section&nbsp;7<span> (</span><span class='info'>Examples</span><span>)</span></a>. 
      
</p>
<a name="sec-conventions"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Conventions Used in This Document</h3>

<p>
	The key words "MUST", "MUST NOT", "REQUIRED", "SHALL",
	"SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and
	"OPTIONAL" in this document are to be interpreted as described in
	BCP 14, <a class='info' href='#RFC2119'>RFC 2119<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> [RFC2119] and indicate
	requirement levels for compliant implementations.
      
</p>
<p>
	The following definitions are used in this memo:
      
</p>
<p>
	</p>
<blockquote class="text">
<p>Integrated endpoint is an implementation that combines
	  the functionality of SIP User Agent and XMPP client and can
	  offer its user a seamless user experience in the 
	  sense that a single UI and contact information can be user
	  for voice and video communication using the SIP protocol as
	  well as instant messaging and presence sharing using
	  XMPP. We assume an integrated endpoint is able to support
	  SIP and XMPP protocol extensions defined in this memo.
</p>
<p>Separated endpoint refers to independent SIP User Agent and
	  XMPP client implementations that are not aware of each other
	  if they are used by the same user. The users uses SIP UA for
	  voice and video, while using XMPP client for IM and
	  presence. It is assumed that a separated endpoint does not
	  support any SIP or XMPP protocol extensions defined in this
	  memo.
</p>
</blockquote><p>
      
</p>
<a name="sec-deployment-scenarios-and-use-cases"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Deployment scenarios and use cases</h3>

<p>
	This section presents the assumptions we make about SIP and
	XMPP deployments with respect to endpoints and server
	infrastructure. We also enumerate the actual use cases that
	the combined service must accommodate for.
      
</p>
<a name="sec-deployment-scenarios"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Deployment scenarios</h3>

<p>
	  The assumption is that the server infrastructure for SIP and
	  XMPP are totally separated, thus no exchange of information
	  is expected between them. There is no assumption that SIP
	  and XMPP services are even offered by the same service
	  provider. This means that the user identities can even be
	  from two different domains. However, if the same service
	  provider offers both SIP and XMPP service, it is recommended
	  that the URIs sip:user@domain and xmpp:user@domain
	  correspond to the same user. 
	
</p>
<p>
	  We assume that the user intially only knows the contact
	  address of the other user in one protocol space. The contact
	  address for the other protocol must be learned through this.
	
</p>
<p>
	  We consider only cases where two integrated endpoints
	  interact. When an intergrated endpoint communicates with a
	  separated endpoint, normal SIP and XMPP procedures apply and
	  no extensions defined in this memo are used. 
	
</p>
<a name="sec-use-cases"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Use cases</h3>

<p>
	  </p>
<ul class="text">
<li>
	      Two users who both use an integrated endpoint start an
	      (XMPP) IM conversation. After the exchange of initial
	      messages, their UIs show that the other party is capable
	      of (SIP) voice and/or video in addition to IM. Either
	      user can at any point add voice and/or video component
	      to the conversation in such a way that they end up in
	      the same endpoint and conversation context where the IM
	      exchange is already taking place. (Note that for this
	      use case the conversation initiatior initially only
	      needs to know the other user’s XMPP user id.)
	    
</li>
<li>
	      Two users who both use an integrated endpoint start a
	      (SIP) voice and/or video call. As the call is
	      established, their UIs show that the other party is
	      capable for (XMPP) IM. Either user can at any point add
	      an IM component to the conversation in such a way that
	      they end up in the same endpoint and conversation
	      context where the voice and/or call is already taking
	      place. (Note that for this use case the caller
	      initially only needs to know the other user’s SIP user
	      id.)    
	      
<blockquote class="text">
<p>
		  It is possible to vary the two cases above so that
		  one fo the users initiates a "multimedia call" to
		  the other one, i.e. SIP voice and/or video and XMPP
		  IM are all active from the stary. Tehcnically this
		  happens according to the two-phased approach above,
		  and it inivisble from the end-user.
		
</p>
</blockquote>
	    
</li>
<li>
	      A user of an integrated endpoint is able to publish her
	      SIP voice and video related presence status as part of
	      her XMPP presence. The status includes information such
	      as user’s SIP contact address (for the integrated
	      endpoint), media capability and availability and whether
	      the user is currently “on the phone”. Another user of an
	      integrated endpoint can see the presence status
	      (assuming she is authorized for that) and based on that
	      initiate calls. For instance watcher’s UI can now for
	      certainty show that the user on her roster is capable
	      of receiving “multimedia calls” (Note that the watcher
	      initially only needs to know the other user’s XMPP user id.)    
	    
</li>
</ul><p>

	  
<p>
	    </p>
<blockquote class="text">
<p>OPEN ISSUE: Is there a use case for discovering
	      other user’s XMPP identity based on her SIP identity
	      without needing to establish a media session. SIP
	      OPTIONS would be one possibility for that (as we do
	      not assume SIP presence support).
</p>
</blockquote><p>
	  
</p>
	  
	

<a name="sec-requirements"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Requirements</h3>

<p>
	This section presents the protocol requirements.
      
</p>
<p>
	</p>
<blockquote class="text"><dl>
<dt>REQ-1:</dt>
<dd>
	    It must be possible for the sender of an XMPP message to
	    include its SIP contact information within the
	    message. The contact information must allow the recipient
	    to establish the SIP session such that the session is
	    routed to the same endpoint which is hosting the XMPP
	    conversation. As including the same information
	    in every message would create some overhead, it is
	    desirable to be able to convey the contact only once per
	    IM conversation/thread.  
	  
</dd>
<dt>REQ-2:</dt>
<dd>
	    It must be possible for the caller to convey in the SIP
	    session initiation information which allows the callee to
	    correlate the session with an ongoing XMPP conversation. 
	  
</dd>
<dt>REQ-3:</dt>
<dd>
	    It must be possible for the SIP User Agent Client and User
	    Agent Server that establish a real-time media session to
	    exchange their XMPP contact information so that either
	    endpoint can at any time send XMPP messages to the other
	    endpoint. 
	  
</dd>
<dt>REQ-4:</dt>
<dd>
	    It must be possible for the sender to convey in the XMPP
	    message information which allows the recipient to
	    correlate the message with an ongoing SIP session.
	  
</dd>
<dt>REQ-5:</dt>
<dd>
	    It must be possible to include SIP real-time media related
	    contact and status in XMPP presence information. The
	    information must contain at least SIP contact address to
	    identify a user or a user agent instance, media
	    capabilities and general availability status
	  
</dd>
</dl></blockquote><p>
	
      
</p>
<p>
	</p>
<blockquote class="text">
<p>OPEN ISSUE: Should we define requirements related to
	  “error” or “corner” cases here. For instance what happens to
	  communication attempts after the other party has closed the
	  conversation context, e.g. a correlated XMPP message that is
	  sent after the related SIP session is terminated. Or a SIP
	  INVITE that appears two days after the XMPP IM conversation
	  was ended.
</p>
<p>NOTE: There is also an implicit requirement that we must
	  take Session Border Controllers into account when defining
	  how SIP User Agents are able to identify an existing session
	  between them in a common manner.
</p>
</blockquote><p>
      
</p>
<a name="sec-overview-of-operation"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Overview of operation</h3>

<p>
	Both SIP and XMPP allow registration of multiple endpoints 
	using the same identifier, either a SIP AOR or XMPP
	Jabber ID (JID). When two endpoints are enganged in an IM
	conversation, for example, and wish to add a voice component
	to the communication, it has be ensured that the resulting SIP 
	dialog is targeted to the same endoint that is
	running the IM conversation. Fortunately, both XMPP and SIP
	provide a mechanism for this.
      
</p>
<p>
	<a class='info' href='#I-D.ietf-sip-gruu'>[I&#8209;D.ietf&#8209;sip&#8209;gruu]<span> (</span><span class='info'>Rosenberg, J., &ldquo;Obtaining and Using Globally Routable User Agent (UA) URIs (GRUU) in the  Session Initiation Protocol (SIP),&rdquo; October&nbsp;2007.</span><span>)</span></a> defines mechanisms for
	a SIP UA to obtain and use a Globally Routable User Agent
	(UA) URI. A GRUU will route a call to a specific UA
	instance. Unfortunately, not all SIP registrars support the
	optional GRUU mechanism. In that case the SIP UA has not other
	option but to use its AOR in place of GRUU.
      
</p>
<p>
	In XMPP, a "full JID" consists of a name,
	domain and a resource identifier in the form of
	&lt;name@domain/resource&gt;. The resource identifier can be
	used to identify a specific endpoint.
      
</p>
<a name="sec-adding-sip-session"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Endpoints engaged in XMPP conversation adding a
		      SIP session</h3>

<p>
	</p>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>

Bob                    Alice
 |                       |
 |    IM session         |
 |&lt;=====================&gt;|
 |                       |
 | (F1) INVITE           |
 |----------------------&gt;|
 |                       |
 | (F2) 200OK            |
 |&lt;----------------------|
 |                       |
 | (F3) ACK              |
 |----------------------&gt;|
 |                       |
 |  RTP media            |
 |&lt;=====================&gt;|
 |                       |

</pre></div><p>

      
</p>
<p>
	This case starts by one endpoint (Bob) sending a message
	stanza to another (Alice). Bob includes &lt;thread&gt; element in
	the message and chooses a unique value for it. In his first
	message Bob also includes his SIP URI in &lt;sip-contact&gt;
	element, defined in <a class='info' href='#sec-extension-message-stanza'>Section&nbsp;6.1<span> (</span><span class='info'>Extensions to XMPP message stanza</span><span>)</span></a>. If Bob has been able to
	obtain a GRUU from his registrar, he populates the
	&lt;sip-contact&gt; with that. Otherwise a mere AOR is used. When
	Alice receives Bob’s SIP URI Alice stores it associated with
	the current &lt;thread&gt;. When responding to Bob’s messages
	Alice also includes &lt;thread&gt; and her SIP URI (GRUU or
	AOR) in &lt;sip-contact&gt;. Upon receiving Alice’s first message
	Bob stores Alice’s SIP URI associated with the current
	&lt;thread&gt;. In addition to containing a SIP URI,
	&lt;sip-contact&gt; also conveys the information whether an
	endpoint supports audio or video or both medias. So, based on
	exchanged &lt;sip-contact&gt; elements, both endpoints now know
	each others SIP URIs and media capabilities.  
      
</p>
<p>
	The same &lt;thread&gt; value is used in all further messages by
	both endpoints to keep track of the conversation. As long as
	the &lt;thread&gt; value is unchanged, the &lt;sip-contact&gt;
	element need not be repeated, unless either endpoint’s SIP
	GRUU changes for some reason.    
      
</p>
<p>
	When either party wants to extend the IM conversation by
	adding SIP voice or video session, they address a SIP INVITE
	to the SIP URI learned in &lt;sip-contact&gt;. If &lt;contact&gt;
	contained a GRUU, it ensures that the INVITE will be routed to
	the correct endpoint. The caller populates XMPP-Thread header,
	defined in <a class='info' href='#sec-xmpp-thread-header'>Section&nbsp;6.3.1<span> (</span><span class='info'>SIP XMPP-Thread header</span><span>)</span></a>, 
	in the INVITE with the value of &lt;thread&gt;. The callee is
	thus able to correlate the SIP session to the IM
	conversation. The callee replays XMPP-Thread in responses to
	INVITE to indicate that the correlation was successful.  
      
</p>
<a name="sec-adding-xmpp-conversation"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Endpoints engaged in a SIP session adding an
		    XMPP IM conversation</h3>

<p>
	In this case two endpoints first have a SIP voice or video
	session. They exchange their full JIDs within the session
	establishment. The caller (Bob) adds XMPP-Contact header,
	defined in <a class='info' href='#sec-xmpp-contact-header'>Section&nbsp;6.3.2<span> (</span><span class='info'>SIP XMPP-Contact header</span><span>)</span></a>, in
	INVITE populating it with his full JID. XMPP-Contact also
	includes an opaque end-to-end identifier for the session
	common to both endpoints. The callee (Alice) stores this
	information as part of the session state. In 200 OK response
	to INVITE Alice includes similar XMPP-Contact header with
	her full JID, and replays the end-to-end session
	identifier. Bob stores this information as part of his
	session state. Both endpoints now know each others full JIDs
	and have a common reference to the session. 
      
</p>
<p>	
	</p>
<blockquote class="text">
<p>OPEN ISSUE: Instead of defining XMPP-specific session
	  identifier we could use SIP call-id as is. However, there
	  is a concern that call-id may be changed by SBCs en route
	  is thus might not be a useful as a common reference for
	  both User Agents. <a class='info' href='#I-D.kaplan-sip-session-id'>[I&#8209;D.kaplan&#8209;sip&#8209;session&#8209;id]<span> (</span><span class='info'>Kaplan, H., &ldquo;A Session Identifier for the Session Initiation Protocol (SIP),&rdquo; March&nbsp;2009.</span><span>)</span></a>
	  defines a Session-ID header that potentially could also be
	  used.
</p>
</blockquote><p>      
      
</p>
<p>
	When either endpoint wants to send XMPP messages to each
	other, they address them to the full JID learned from
	XMPP-Contact header. This ensures that the messages reach
	the correct endpoint. In the very first message the sender
	also includes &lt;sip-correlation&gt; element, defined in
	<a class='info' href='#sec-extension-message-stanza'>Section&nbsp;6.1<span> (</span><span class='info'>Extensions to XMPP message stanza</span><span>)</span></a>, with the session
	identifier value learned from XMPP-Contact. The recipient
	uses the value to correlate the message with the SIP session
	and echoes it back the first message it sends to indicate
	that the correlation was succesful.  
      
</p>
<a name="sec-using-xmpp-presence"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
Using XMPP presence for publishing and obtaining
	SIP contact address, media capabilities and availability</h3>

<p>
	  SIP related presence information is encoded in XMPP presence
	  schema as an extension. It includes endpoints SIP URI
	  (preferably GRUU but can be also AOR), media capabilities
	  (audio, video), and availability (open, closed, busy). Based
	  on this information XMPP Presence watcher is able to
	  initiate SIP voice and video sessions. 
	
</p>
<a name="sec-protocol-extensions"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Protocol extensions</h3>

<p>
	In this section we define protocol extensions to meet the
	requirements stated in the previous section. 
      
</p>
<a name="sec-extension-message-stanza"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
Extensions to XMPP message stanza</h3>

<p>
	  The child elements of the message stanza can be extended
	  with elements from other namespaces. For the purposes of
	  carrying a SIP identifier in the message stanza, we define
	  two new elements, the &lt;sip-contact&gt; element and
	  &lt;sip-correlation&gt; element.
	
</p>
<a name="sip-contact-element"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1.1"></a><h3>6.1.1.&nbsp;
The &lt;sip-contact&gt; element</h3>

<p>
	  The &lt;sip-contact&gt; element, qualified by
	  "http://jabber.org/protocol/sip-contact" namespace, has one
	  mandatory attribute, "target", which defines the target's
	  SIP URI. The format of the "target" attribute is an
	  absoluteURI defined in <a class='info' href='#RFC3261'>[RFC3261]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a>.
	
</p>
<p>
	  When an endpoint initiates an XMPP IM conversation, and
	  wants to offer a possibility to later add a SIP real-time
	  media session, it MUST include a &lt;sip-contact&gt; element
	  as a child element in the first the &lt;message&gt; stanza
	  it sends, and MUST add a &lt;thread&gt; element and populate
	  its value according to <a class='info' href='#RFC3921'>[RFC3921]<span> (</span><span class='info'>Saint-Andre, P., Ed., &ldquo;Extensible Messaging and Presence Protocol (XMPP): Instant Messaging and Presence,&rdquo; October&nbsp;2004.</span><span>)</span></a>. The
	  endpoint MUST include in the “target” attribute of the
	  &lt;sip-contact&gt; element the SIP URI it wishes to be
	  contacted at. If the endpoint is aware of its GRUU, it
	  SHOULD use that as the value in the “target” attribute;
	  otherwise it MAY use its AOR.  
	
</p>
<p>
	  The endpoint receiving an XMPP &lt;message&gt; stanza that
	  includes &lt;thread&gt; and &lt;sip-contact&gt; elements
	  MUST copy the &lt;thread&gt; element value to the first
	  &lt;message&gt; stanza it sends back, as defined in <a class='info' href='#RFC3921'>[RFC3921]<span> (</span><span class='info'>Saint-Andre, P., Ed., &ldquo;Extensible Messaging and Presence Protocol (XMPP): Instant Messaging and Presence,&rdquo; October&nbsp;2004.</span><span>)</span></a>, and MUST include a &lt;sip-contact&gt;
	  element and set the “target” attribute value to the SIP URI
	  it wishes to be contacted at.  
	
</p>
<p>
	  An endpoint MUST add its audio and video capabilities
	  defined in <a class='info' href='#RFC3840'>[RFC3840]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., and P. Kyzivat, &ldquo;Indicating User Agent Capabilities in the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2004.</span><span>)</span></a> to the contact address
	  in the “target” attribute, and MUST understand those
	  capabilities if received from the other endpoint. An
	  endpoint MAY add other media capabilities.  
	
</p>
<p>
	  When an endpoint receives a &lt;sip-contact&gt; element in a
	  &lt;message&gt; stanza, it MUST store the value of the target
	  attribute, and use it as the SIP URI in an INVITE request if
	  the user of the endpoint would like to add a SIP session to
	  the IM conversation context 
	
</p>
<p>
	  For example, a &lt;sip-contact&gt; element carrying a SIP
	  Globally Routable Unique URI (GRUU) would be
	
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;sip-contact target="&lt;sip:alice@example.com"&gt;;gr=urn:
     uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6;
     audio;video"&gt;
</pre></div>
<a name="sip-correlation-element"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1.2"></a><h3>6.1.2.&nbsp;
The &lt;sip-correlation&gt; element</h3>

<p>
	    In order to indicate that an XMPP IM conversation is
	    related to an existing SIP session, we define a new
	    element in the message stanza called &lt;sip-correlation&gt;. The
	    &lt;sip-correlation&gt;, qualified by the
	    "http://jabber.org/protocol/sip-correlation" namespace,
	    has one mandatory attribute, "value".
	  
</p>
<p>
	    The endpoint sending the &lt;message&gt; stanza MUST set
	    the "value" attribute to the value of the
	    correlation-value parameter of the SIP XMPP-Contact
	    header. The XMPP-Contact header is exhanged during the
	    setup of the SIP session. The endpoint MUST also include
	    a &lt;thread&gt; element in the message.
	  
</p>
<p>
	    An endpoint receiving a &lt;message&gt; stanza which
	    includes a &lt;sip-correlation&gt; element MUST first
	    compare the "from" attribute value of the &lt;message&gt;
	    stanza to the XMPP JID in the contact-value of the
	    XMPP-Contact header of its active SIP sessions. If a
	    matching SIP session is found, the endpoint MUST compare
	    the "value" attribute to the correlation-value of the
	    XMPP-Contact header of that SIP session. If the "value"
	    attribute matches to correlation-value of an XMPP-Contact
	    header, the &lt;message&gt; stanza is correlated to that
	    SIP session. If the user replies to the message, the
	    values of the &lt;thread&gt; element and the "value"
	    attribute of the &lt;sip-correlation&gt; element in the
	    first reply MUST be the same as in the original
	    message. This indicates that the correlation was
	    successful. The correlation is valid as long as the
	    messages are exchanged with the same &lt;thread&gt;
	    value. 
	  
</p>
<p>
	    As an example, a &lt;sip-correlation&gt; element carrying
	    the XMPP-Contact header correlation-value parameter of an
	    existing SIP session would be

	    </p>
<blockquote class="text">
<p>&lt;sip-correlation value="xyz123"/&gt;
</p>
</blockquote><p>
	  
</p>
<p>
	  </p>
<blockquote class="text">
<p>OPEN ISSUE: XML Schemas to be provided
</p>
</blockquote><p>
	
</p>
<a name="sec-extensions-to-xmpp-presence-stanza"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2"></a><h3>6.2.&nbsp;
Extensions to XMPP presence stanza</h3>

<p>
	  The XMPP presence stanza defined in <a class='info' href='#RFC3921'>[RFC3921]<span> (</span><span class='info'>Saint-Andre, P., Ed., &ldquo;Extensible Messaging and Presence Protocol (XMPP): Instant Messaging and Presence,&rdquo; October&nbsp;2004.</span><span>)</span></a> can
	  be extended with any properly-namespaced child element. We
	  define a new optional element called &lt;contact&gt; which,
	  qualified by the http://jabber.org/protocol/contact namespace,
	  MAY appear as a child element in the presence stanza.
	
</p>
<p>
	  The contact element SHOULD be set to the SIP address (GRUU or
	  AOR) the endpoint wishes to be contacted at for further
	  communication.
	
</p>
<p>
	  Exact syntax and XML Schema of the correlation element is TBD.
	
</p>
<a name="sec-extensions-to-sip-headers"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.3"></a><h3>6.3.&nbsp;
Extensions to SIP headers</h3>

<a name="sec-xmpp-thread-header"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.3.1"></a><h3>6.3.1.&nbsp;
SIP XMPP-Thread header</h3>

<p>
	  In order to indicate that the SIP dialog is related to
	  an existing XMPP messaging session, we define a new SIP
	  header, called XMPP-Thread. The XMPP-Thread contains information
	  that can be used by the terminating endpoint to correlate
	  the SIP session establishment to an existing XMPP
	  conversation.
	
</p>
<p>
	  The endpoint sending a SIP INVITE request MUST include an
	  XMPP-Thread header, and set its value to the value of the
	  &lt;thread&gt; element used in the XMPP IM conversation.
	
</p>
<p>
	  The endpoint receiving a SIP INVITE which inludes an
	  XMPP-Thread header act as follows:
</p>
<p>
	    </p>
<ul class="text">
<li> it first compares the Contact header value with all
	      SIP GRUUs from &lt;sip-contact&gt;
	      elements in active XMPP IM conversations, and unless a
	      match is found,
</li>
<li> compares P-Asserted-Identity header value with 
	      all other SIP URIs from 
	      &lt;sip-contact&gt; elements in active XMPP IM
	      conversations
</li>
<li>if a single match is found, the receiving endpoint
	      MUST  the value of the XMPP-Thread element to the
	      &lt;thread&gt; element values of existing XMPP IM
	      conversations the endpoint has active, and 
	      
</li>
<li>if the value matches, the SIP INVITE is correlated to
	      the IM conversation. The endpoint MUST copy the
	      XMPP-Thread header to any of the 2xx series responses.
</li>
</ul><p>
	
</p>
<p>
	  <a class='info' href='#fig-xmpp-thread-header-support'>Figure&nbsp;1<span> (</span><span class='info'>XMPP-Thread header support</span><span>)</span></a>
	  defines support of XMPP-Contact header in SIP requests and
	  responses, and extends Table 2 of <a class='info' href='#RFC3261'>[RFC3261]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a>. MESSAGE, SUBCRIBE and NOTIFY, REFER,
	  INFO, UPDATE, PRACK, and PUBLISH are defined in <a class='info' href='#RFC3428'>[RFC3428]<span> (</span><span class='info'>Campbell, B., Rosenberg, J., Schulzrinne, H., Huitema, C., and D. Gurle, &ldquo;Session Initiation Protocol (SIP) Extension for Instant Messaging,&rdquo; December&nbsp;2002.</span><span>)</span></a>, <a class='info' href='#RFC3265'>[RFC3265]<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a>, <a class='info' href='#RFC3515'>[RFC3515]<span> (</span><span class='info'>Sparks, R., &ldquo;The Session Initiation Protocol (SIP) Refer Method,&rdquo; April&nbsp;2003.</span><span>)</span></a>, <a class='info' href='#RFC2976'>[RFC2976]<span> (</span><span class='info'>Donovan, S., &ldquo;The SIP INFO Method,&rdquo; October&nbsp;2000.</span><span>)</span></a>, <a class='info' href='#RFC3311'>[RFC3311]<span> (</span><span class='info'>Rosenberg, J., &ldquo;The Session Initiation Protocol (SIP) UPDATE Method,&rdquo; October&nbsp;2002.</span><span>)</span></a>, <a class='info' href='#RFC3262'>[RFC3262]<span> (</span><span class='info'>Rosenberg, J. and H. Schulzrinne, &ldquo;Reliability of Provisional Responses in Session Initiation Protocol (SIP),&rdquo; June&nbsp;2002.</span><span>)</span></a>, and <a class='info' href='#RFC3903'>[RFC3903]<span> (</span><span class='info'>Niemi, A., &ldquo;Session Initiation Protocol (SIP) Extension for Event State Publication,&rdquo; October&nbsp;2004.</span><span>)</span></a>, respectively.
	
</p><br /><hr class="insert" />
<a name="fig-xmpp-thread-header-support"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      Header field    where   proxy   ACK  BYE  CAN  INV  OPT  REG  MSG
      ------------    -----   -----   ---  ---  ---  ---  ---  ---  ---
      XMPP-Thread       R              -    -    -    o    -    -    -
      XMPP-Thread      2xx             -    -    -    o    -    -    -

                                      SUB  NOT  REF  INF  UPD  PRA  PUB
                                      ---  ---  ---  ---  ---  ---  ---
      XMPP-Thread       R              -    -    -    -    -    -    -
      XMPP-Thread      2xx             -    -    -    -    -    -    -
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: XMPP-Thread header support&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
	  The syntax of the XMPP-Thread using augmented Backur-Naur
	  Form (ABNF) <a class='info' href='#RFC5234'>[RFC5234]<span> (</span><span class='info'>Crocker, D. and P. Overell, &ldquo;Augmented BNF for Syntax Specifications: ABNF,&rdquo; January&nbsp;2008.</span><span>)</span></a> is defined as follows:
	
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
XMPP-Thread         = "XMPP-Thread" HCOLON thread-value
thread-value        = token
                      ;defined in RFC3261
</pre></div>
<a name="sec-xmpp-contact-header"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.3.2"></a><h3>6.3.2.&nbsp;
SIP XMPP-Contact header</h3>

<p>
	  The XMPP-Contact header is used to carry the XMPP JID and an
	  opaque token that can be used for correlation purposes. 
	
</p>
<p>
	  When an endpoint initiates a SIP session, and wants to offer
	  the possibility to later add an XMPP IM conversation, it
	  MUST include an XMPP-Contact header in the intitial SIP 
	  request. The contact-value of the XMPP-Contact header MUST
	  be set to the full XMPP JID the endpoint wishes to be contacted
	  at, and the correlation-value SHOULD be set to the value of
	  the Call-ID of the SIP session. If the Call-ID cannot be
	  used, the endpoint MUST select the correlation-value such
	  that it fulfills the same uniqueness requirements defined
	  for Call-ID in Section 8.1.1.4 of <a class='info' href='#RFC3261'>[RFC3261]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a>.  
	  
	
</p>
<p>
	  An endpoint sending a 2xx series response to an INVITE that
	  contains XMPP-Contact header MUST include a XMPP-Contact
	  header in the response, MUST set the contact-value of the
	  header to the full XMPP JID the endpoint wishes to be
	  contacted at, and MUST copy the correlation-value from the
	  INVITE to the 2xx response.  
	
</p>
<p>
	  The endpoint receiving a SIP request or response with an
	  XMPP-Contact header, MUST store the value of the
	  correlation-value in order to be able to later correlate an
	  XMPP IM conversation with the SIP session. 
	
</p>
<p>
	  An endpoint initiating a correlated XMPP IM conversation
	  MUST use the correlation-value in the
	  &lt;sip-correlation&gt; element as specified in <a class='info' href='#sip-correlation-element'>Section&nbsp;6.1.2<span> (</span><span class='info'>The &lt;sip-correlation&gt; element</span><span>)</span></a>. 
	
</p>
<p>
	  <a class='info' href='#fig-xmpp-contact-header-support'>Figure&nbsp;2<span> (</span><span class='info'>XMPP-Contact header field support</span><span>)</span></a>
	  defines support of XMPP-Contact header in SIP requests and
	  responses, and extends Table 2 of <a class='info' href='#RFC3261'>[RFC3261]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a>. MESSAGE, SUBCRIBE and NOTIFY, REFER,
	  INFO, UPDATE, PRACK, and PUBLISH are defined in <a class='info' href='#RFC3428'>[RFC3428]<span> (</span><span class='info'>Campbell, B., Rosenberg, J., Schulzrinne, H., Huitema, C., and D. Gurle, &ldquo;Session Initiation Protocol (SIP) Extension for Instant Messaging,&rdquo; December&nbsp;2002.</span><span>)</span></a>, <a class='info' href='#RFC3265'>[RFC3265]<span> (</span><span class='info'>Roach, A., &ldquo;Session Initiation Protocol (SIP)-Specific Event Notification,&rdquo; June&nbsp;2002.</span><span>)</span></a>, <a class='info' href='#RFC3515'>[RFC3515]<span> (</span><span class='info'>Sparks, R., &ldquo;The Session Initiation Protocol (SIP) Refer Method,&rdquo; April&nbsp;2003.</span><span>)</span></a>, <a class='info' href='#RFC2976'>[RFC2976]<span> (</span><span class='info'>Donovan, S., &ldquo;The SIP INFO Method,&rdquo; October&nbsp;2000.</span><span>)</span></a>, <a class='info' href='#RFC3311'>[RFC3311]<span> (</span><span class='info'>Rosenberg, J., &ldquo;The Session Initiation Protocol (SIP) UPDATE Method,&rdquo; October&nbsp;2002.</span><span>)</span></a>, <a class='info' href='#RFC3262'>[RFC3262]<span> (</span><span class='info'>Rosenberg, J. and H. Schulzrinne, &ldquo;Reliability of Provisional Responses in Session Initiation Protocol (SIP),&rdquo; June&nbsp;2002.</span><span>)</span></a>, and <a class='info' href='#RFC3903'>[RFC3903]<span> (</span><span class='info'>Niemi, A., &ldquo;Session Initiation Protocol (SIP) Extension for Event State Publication,&rdquo; October&nbsp;2004.</span><span>)</span></a>, respectively.
	
</p><br /><hr class="insert" />
<a name="fig-xmpp-contact-header-support"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      Header field    where   proxy   ACK  BYE  CAN  INV  OPT  REG  MSG
      ------------    -----   -----   ---  ---  ---  ---  ---  ---  ---
      XMPP-Contact      R              -    -    -    o    -    -    -
      XMPP-Contact     2xx             -    -    -    o    -    -    -

                                      SUB  NOT  REF  INF  UPD  PRA  PUB
                                      ---  ---  ---  ---  ---  ---  ---
      XMPP-Contact      R              -    -    -    -    -    -    -
      XMPP-Contact     2xx             -    -    -    o    -    -    -
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: XMPP-Contact header field support&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
	  The syntax of the XMPP-Contact using augmented Backur-Naur
	  Form (ABNF) <a class='info' href='#RFC5234'>[RFC5234]<span> (</span><span class='info'>Crocker, D. and P. Overell, &ldquo;Augmented BNF for Syntax Specifications: ABNF,&rdquo; January&nbsp;2008.</span><span>)</span></a> is defined as follows:
	
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
XMPP-Contact        = "XMPP-Contact" HCOLON contact-value SEMI correlation-value
contact-value       = token
                      ;defined in RFC3261
correlation-value   =token
</pre></div>
<a name="sec-examples"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Examples</h3>

<a name="sec-example-add-voice-component"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1"></a><h3>7.1.&nbsp;
Endpoint engaged in an IM session adds a
		    voice/video component to the conversation</h3>

<p>
	<br /><hr class="insert" />
</p>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>

Bob                    Alice
 |                       |
 | (F1) &lt;message&gt;        |
 |----------------------&gt;|
 |                       |
 | (F2) &lt;message&gt;        |
 |&lt;----------------------|
 |                       |
 | (F3) INVITE           |
 |----------------------&gt;|
 |                       |
 | (F4) 200OK            |
 |&lt;----------------------|
 |                       |
 | (F5) ACK              |
 |----------------------&gt;|
 |                       |
 |  RTP media            |
 |&lt;=====================&gt;|
 |                       |

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;SIP voice session added to XMPP IM conversation&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

      
</p>
<p>
	Bob and Alice are engaged in an XMPP IM session, when Bob
	would like to add voice/video component to the discussion. 
      
</p>
<p>
	When Bob and Alice exhange message stanzas, they also include
	the SIP address they would like to be contacted at. In this
	example, Bob is aware of its GRUU, while Alice is merely aware
	of her SIP AOR. Both include the SIP identifier in a contact
	element in the message stanza.
      
</p><br /><hr class="insert" />
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   &lt;message
       to='alice@example.net'
       from='bob@domain.com/Home'
       type='chat'
       xml:lang='en'&gt;
     &lt;body&gt;Hi!&lt;/body&gt;
     &lt;thread&gt;e0ffe42b28561960c6b12b944a092794b9683a38&lt;/thread&gt;

     &lt;sip-contact target="&lt;sip:bob@domain.com"&gt;;gr=urn:
              uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6;
              audio;video"
              xmlns="http//jabber.org/protocol/contact"/&gt;
   &lt;/message&gt;

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;(F1) Bob sends a message stanza to
		     Alice&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
	In the above message, Bob includes his GRUU, and also the
	media capabilities Bob is capable of handling (audio and
	video). 
      
</p>
<p>
	Alice sends back a message stanza containing her SIP contact
	information. 
      
</p><br /><hr class="insert" />
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   &lt;message
       to='bob@domain.com/Home'
       from='alice@example.net/4FIL45729'
       type='chat'
       xml:lang='en'&gt;
     &lt;body&gt;Hello there!&lt;/body&gt;
     &lt;thread&gt;e0ffe42b28561960c6b12b944a092794b9683a38&lt;/thread&gt;

     &lt;sip-contact target="&lt;sip:alice@example.net"&gt;;audio;video"
              xmlns="http//jabber.org/protocol/contact"/&gt;
   &lt;/message&gt;

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;(F2) Alice sends a message stanza to
		    Bob &nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
	Bob then decides to add SIP voice call to the existing XMPP
	conversation. He picks up Alice's contact information that
	Alice sent to him in a message stanza, and issues a SIP INVITE
	request to that URI. The XMPP-Thread carries the value of the
	&lt;thread&gt; element.
      
</p><br /><hr class="insert" />
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

      INVITE sip:alice@example.net SIP/2.0
      Via: SIP/2.0/UDP ua-991.domain.com;branch=apo92hgb2k100
      Max-Forwards: 70
      To: Alice &lt;sip:alice@example.com&gt;
      From: Bob &lt;sip:bob@domain.com&gt;;tag=18593756298
      Call-ID: a84b4c76e66710@ua-991.domain.com
      CSeq: 314159 INVITE
      XMPP-Thread:e0ffe42b28561960c6b12b944a092794b9683a38
      Contact: "&lt;sip:bob@domain.com"&gt;;gr=urn:
              uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6;
              audio;video"
      Content-Type: application/sdp
      Content-Length: 142

      (SDP not shown)

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;(F3) Bob sends a SIP INVITE to
		     Alice&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
	Alice responds with 200OK accepting the session invitiation
	request. Alice also includes the XMPP-Thread element to
	indicate that she has received the thread and successfully
	correlated the session invitation to the XMPP conversation. 
      
</p><br /><hr class="insert" />
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

      SIP/2.0 200 OK
      Via: SIP/2.0/UDP p1.example.com
         ;branch=z9hG4bKnashds8;received=192.0.2.3
      Via: SIP/2.0/UDP p1.domain.com
         ;branch=z9hG4bKnashds8;received=192.0.2.2
      Via: SIP/2.0/UDP ua-991.domain.com
         ;branch=apo92hgb2k100;received=192.0.2.1
      Max-Forwards: 70
      To: Alice &lt;sip:alice@example.com&gt;;tag=c09hh1lsn
      From: Bob &lt;sip:bob@domain.com&gt;;tag=18593756298
      Call-ID: a84b4c76e66710@ua-991.domain.com
      CSeq: 314159 INVITE
      XMPP-Thread:e0ffe42b28561960c6b12b944a092794b9683a38
      Contact: &lt;sip:alice@192.0.2.4&gt;
      Content-Type: application/sdp
      Content-Length: 131

      (SDP not shown)

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;(F4) Alice accepts the session and sends a 200OK
		     to Bob&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
	Bob then sends a ACK as per normal SIP procedures.
      
</p>
<a name="sec-example-add-im-component"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2"></a><h3>7.2.&nbsp;
Endpoint engaged in a SIP session adds an XMPP IM
		    conversation</h3>

<p>
	<br /><hr class="insert" />
</p>
<div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>

Bob                    Alice
 |                       |
 |                       |
 | (F1) INVITE           |
 |----------------------&gt;|
 |                       |
 | (F2) 200OK            |
 |&lt;----------------------|
 |                       |
 | (F3) ACK              |
 |----------------------&gt;|
 |                       |
 |  RTP media            |
 |&lt;=====================&gt;|
 |                       |
 | (F4) &lt;message&gt;        |
 |----------------------&gt;|
 |                       |
 | (F5) &lt;message&gt;        |
 |&lt;----------------------|

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;XMPP IM conversation added to SIP voice
		       session&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

      
</p>
<p>
	Bob invites Alice to a SIP session. In the INVITE request, Bob
	includes the XMPP-Contact header including his XMPP JID. 
      
</p><br /><hr class="insert" />
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

      INVITE sip:alice@example.net SIP/2.0
      Via: SIP/2.0/UDP ua-991.domain.com;branch=apo92hgb2k100
      Max-Forwards: 70
      To: Alice &lt;sip:alice@example.com&gt;
      From: Bob &lt;sip:bob@domain.com&gt;;tag=18593756298
      Call-ID: a84b4c76e66710@ua-991.domain.com
      CSeq: 314159 INVITE
      XMPP-contact:&lt;xmpp:bob@domain.com/home&gt;
                   ;a84b4c76e66710@ua-991.domain.com
      Contact: "&lt;sip:bob@domain.com"&gt;;gr=urn:
              uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6;
              audio;video"
      Content-Type: application/sdp
      Content-Length: 142

      (SDP not shown)

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;(F1) Bob sends a SIP INVITE to
		     Alice&nbsp;</b></font><br /></td></tr></table><hr class="insert" />
<br /><hr class="insert" />
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

      SIP/2.0 200 OK
      Via: SIP/2.0/UDP p1.example.com
         ;branch=z9hG4bKnashds8;received=192.0.2.3
      Via: SIP/2.0/UDP p1.domain.com
         ;branch=z9hG4bKnashds8;received=192.0.2.2
      Via: SIP/2.0/UDP ua-991.domain.com
         ;branch=apo92hgb2k100;received=192.0.2.1
      Max-Forwards: 70
      To: Alice &lt;sip:alice@example.com&gt;;tag=c09hh1lsn
      From: Bob &lt;sip:bob@domain.com&gt;;tag=18593756298
      Call-ID: a84b4c76e66710@ua-991.domain.com
      CSeq: 314159 INVITE
      XMPP-Contact:&lt;xmpp:alice@example.com/4FIL45729&gt;
                  ;a84b4c76e66710@ua-991.domain.com
      Contact: &lt;sip:alice@192.0.2.4&gt;
      Content-Type: application/sdp
      Content-Length: 131

      (SDP not shown)

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;(F2) Alice accepts the session and sends a 200OK
		     to Bob&nbsp;</b></font><br /></td></tr></table><hr class="insert" />
<br /><hr class="insert" />
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   &lt;message
       to='alice@example.net'
       from='bob@domain.com/Home'
       type='chat'
       xml:lang='en'&gt;
     &lt;body&gt;Hi!&lt;/body&gt;
     &lt;thread&gt;e0ffe42b28561960c6b12b944a092794b9683a38&lt;/thread&gt;
     &lt;sip-correlation value="a84b4c76e66710@ua-991.domain.com"&gt;
    &lt;/message&gt;

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;(F4) Bob sends a message to
		     Alice&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
	Alice sends back a message stanza copying the sip-correlation
	value indicating the the correlation was successful. 
      
</p><br /><hr class="insert" />
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   &lt;message
       to='bob@domain.com/Home'
       from='alice@example.net'
       type='chat'
       xml:lang='en'&gt;
     &lt;body&gt;Hello there!&lt;/body&gt;
     &lt;thread&gt;e0ffe42b28561960c6b12b944a092794b9683a38&lt;/thread&gt;
     &lt;sip-correlation value="a84b4c76e66710@ua-991.domain.com"&gt;
   &lt;/message&gt;

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;(F5) Alice sends a message stanza to
		    Bob &nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="sec-iana"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
IANA Considerations</h3>

<p>TBD
</p>
<a name="sec-security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Security Considerations</h3>

<p>
      The contact and correlation iformation is
      sensitive and we need to prevent connection hijacking and
      impersonation. If the contact information that is sent over
      one protocol is forged, the identity verification mechanism
      in the other no longer help as an attacker is able to assert
      the false identity.
    
</p>
<a name="sec-acks"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
Acknowledgments</h3>

<p>
      TBD
    
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11"></a><h3>11.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>11.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2976">[RFC2976]</a></td>
<td class="author-text">Donovan, S., &ldquo;<a href="http://tools.ietf.org/html/rfc2976">The SIP INFO Method</a>,&rdquo; RFC&nbsp;2976, October&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc2976.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3261">[RFC3261]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;<a href="http://tools.ietf.org/html/rfc3261">SIP: Session Initiation Protocol</a>,&rdquo; RFC&nbsp;3261, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3261.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3262">[RFC3262]</a></td>
<td class="author-text">Rosenberg, J. and H. Schulzrinne, &ldquo;<a href="http://tools.ietf.org/html/rfc3262">Reliability of Provisional Responses in Session Initiation Protocol (SIP)</a>,&rdquo; RFC&nbsp;3262, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3262.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3265">[RFC3265]</a></td>
<td class="author-text">Roach, A., &ldquo;<a href="http://tools.ietf.org/html/rfc3265">Session Initiation Protocol (SIP)-Specific Event Notification</a>,&rdquo; RFC&nbsp;3265, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3265.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3311">[RFC3311]</a></td>
<td class="author-text">Rosenberg, J., &ldquo;<a href="http://tools.ietf.org/html/rfc3311">The Session Initiation Protocol (SIP) UPDATE Method</a>,&rdquo; RFC&nbsp;3311, October&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3311.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3428">[RFC3428]</a></td>
<td class="author-text">Campbell, B., Rosenberg, J., Schulzrinne, H., Huitema, C., and D. Gurle, &ldquo;<a href="http://tools.ietf.org/html/rfc3428">Session Initiation Protocol (SIP) Extension for Instant Messaging</a>,&rdquo; RFC&nbsp;3428, December&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3428.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3515">[RFC3515]</a></td>
<td class="author-text">Sparks, R., &ldquo;<a href="http://tools.ietf.org/html/rfc3515">The Session Initiation Protocol (SIP) Refer Method</a>,&rdquo; RFC&nbsp;3515, April&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3515.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3840">[RFC3840]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., and P. Kyzivat, &ldquo;<a href="http://tools.ietf.org/html/rfc3840">Indicating User Agent Capabilities in the Session Initiation Protocol (SIP)</a>,&rdquo; RFC&nbsp;3840, August&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3840.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3903">[RFC3903]</a></td>
<td class="author-text">Niemi, A., &ldquo;<a href="http://tools.ietf.org/html/rfc3903">Session Initiation Protocol (SIP) Extension for Event State Publication</a>,&rdquo; RFC&nbsp;3903, October&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3903.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3920">[RFC3920]</a></td>
<td class="author-text"><a href="mailto:stpeter@jabber.org">Saint-Andre, P., Ed.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc3920">Extensible Messaging and Presence Protocol (XMPP): Core</a>,&rdquo; RFC&nbsp;3920, October&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3920.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc3920.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc3920.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3921">[RFC3921]</a></td>
<td class="author-text"><a href="mailto:stpeter@jabber.org">Saint-Andre, P., Ed.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc3921">Extensible Messaging and Presence Protocol (XMPP): Instant Messaging and Presence</a>,&rdquo; RFC&nbsp;3921, October&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3921.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc3921.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc3921.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5234">[RFC5234]</a></td>
<td class="author-text">Crocker, D. and P. Overell, &ldquo;<a href="http://tools.ietf.org/html/rfc5234">Augmented BNF for Syntax Specifications: ABNF</a>,&rdquo; STD&nbsp;68, RFC&nbsp;5234, January&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5234.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>11.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-sip-gruu">[I-D.ietf-sip-gruu]</a></td>
<td class="author-text">Rosenberg, J., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-sip-gruu-15.txt">Obtaining and Using Globally Routable User Agent (UA) URIs (GRUU) in the  Session Initiation Protocol (SIP)</a>,&rdquo; draft-ietf-sip-gruu-15 (work in progress), October&nbsp;2007 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-sip-gruu-15.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.kaplan-sip-session-id">[I-D.kaplan-sip-session-id]</a></td>
<td class="author-text">Kaplan, H., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-kaplan-sip-session-id-02.txt">A Session Identifier for the Session Initiation Protocol (SIP)</a>,&rdquo; draft-kaplan-sip-session-id-02 (work in progress), March&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-kaplan-sip-session-id-02.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.saintandre-sip-xmpp-core">[I-D.saintandre-sip-xmpp-core]</a></td>
<td class="author-text">Saint-Andre, P., Houri, A., and J. Hildebrand, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-saintandre-sip-xmpp-core-01.txt">Interworking between the Session Initiation Protocol (SIP) and the  Extensible Messaging and Presence Protocol (XMPP): Core</a>,&rdquo; draft-saintandre-sip-xmpp-core-01 (work in progress), March&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-saintandre-sip-xmpp-core-01.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Simo Veikkolainen</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">P.O. Box 407</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">NOKIA GROUP, FI  00045</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+358 50 486 4463</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text">simo.veikkolainen@nokia.com</td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Markus Isomaki</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">P.O. Box 100</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">NOKIA GROUP, FI  00045</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+358 50 522 5984</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text">markus.isomaki@nokia.com</td></tr>
</table>
</body></html>
