<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Media Resource
		Brokering</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Media Resource
		Brokering">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">C. Boulton</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">NS-Technologies</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">L. Miniero</td></tr>
<tr><td class="header">Expires: December 11, 2010</td><td class="header">University of Napoli</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">June 9, 2010</td></tr>
</table></td></tr></table>
<h1><br />Media Resource
		Brokering<br />draft-ietf-mediactrl-mrb-06</h1>

<h3>Abstract</h3>

<p>The MediaCtrl work group in the IETF has proposed an architecture 
			for controlling media services.  The Session Initiation Protocol (SIP) is used as 
			the signalling protocol which provides many inherent capabilities for 
			message routing.  In addition to such signalling properties, a need 
			exists for intelligent, application level media service selection based 
			on non-static signalling properties.  This is especially true when considered in 
			conjunction with deployment architectures that include 1:M and M:N combinations 
			of Application Servers and Media Servers.  This document introduces a Media
			Resource Broker (MRB) entity which manages the availability of Media Servers and the
			media resource demands of Application Servers.  The document includes potential deployment
			options for an MRB and appropriate interfaces to Application Servers and Media Servers.	
			
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on December 11, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#sec:Introduction">1.</a>&nbsp;
Introduction<br />
<a href="#Terminology">2.</a>&nbsp;
Conventions and Terminology<br />
<a href="#sec:Problem">3.</a>&nbsp;
Problem Discussion<br />
<a href="#sec:Deployment">4.</a>&nbsp;
Deployment Scenario Options <br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:Query">4.1.</a>&nbsp;
Query MRB<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:Query_hybrid">4.1.1.</a>&nbsp;
Hybrid Query MRB<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:Inline">4.2.</a>&nbsp;
In-Line MRB<br />
<a href="#sec:Interfaces">5.</a>&nbsp;
MRB Interface Definitions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:MS_Pub">5.1.</a>&nbsp;
Media Server Resource Publish Interface<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:Control_Package_Definition">5.1.1.</a>&nbsp;
Control Package Definition<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#definitions">5.1.2.</a>&nbsp;
Element Definitions<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:requests">5.1.3.</a>&nbsp;
&lt;mrbrequest><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:notifications">5.1.4.</a>&nbsp;
&lt;mrbnotification><br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:responses">5.1.5.</a>&nbsp;
&lt;mrbresponse><br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:Res_Cons">5.2.</a>&nbsp;
Media Service Resource Consumer Interface<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:http_Consumer">5.2.1.</a>&nbsp;
HTTP Consumer Interface Usage<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:sip_Consumer">5.2.2.</a>&nbsp;
SIP Consumer Interface Usage<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:lease">5.2.3.</a>&nbsp;
Consumer Interface Lease Mechanism<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:Media_Request">5.2.4.</a>&nbsp;
Media Service Resource Request<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:Media_Response">5.2.5.</a>&nbsp;
Media Service Resource Response<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:In_Line">5.3.</a>&nbsp;
In-Line MRB Interface<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:IUMM">5.3.1.</a>&nbsp;
In-line Unaware MRB Mode<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:IAMM">5.3.2.</a>&nbsp;
In-line Aware MRB Mode<br />
<a href="#sec:Examples">6.</a>&nbsp;
Examples<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:ExPub">6.1.</a>&nbsp;
Publish Example<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:ExCons">6.2.</a>&nbsp;
Consumer Example<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:ExConsQuery">6.2.1.</a>&nbsp;
Query Example<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:ExConsIAMM">6.2.2.</a>&nbsp;
IAMM Example<br />
<a href="#sec:publisher_xml">7.</a>&nbsp;
Media Service Resource Publisher Interface XML Schema<br />
<a href="#sec:consumer_xml">8.</a>&nbsp;
Media Service Resource Consumer Interface XML Schema<br />
<a href="#sec:security">9.</a>&nbsp;
Security Considerations<br />
<a href="#sec:IANA_Considerations">10.</a>&nbsp;
IANA Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:IANA_Package">10.1.</a>&nbsp;
Control Package Registration<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:IANA_Publish">10.2.</a>&nbsp;
application/mrb-publish+xml MIME Type<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:IANA_Consumer">10.3.</a>&nbsp;
application/mrb-consumer+xml MIME Type<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:IANA_mrbpub">10.4.</a>&nbsp;
URN Sub-Namespace Registration for mrb-publish<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:IANA_mrbcons">10.5.</a>&nbsp;
URN Sub-Namespace Registration for mrb-consumer<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:IANA_PubSchema">10.6.</a>&nbsp;
XML Schema Registration for mrb-publish<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec:IANA_ConsSchema">10.7.</a>&nbsp;
XML Schema Registration for mrb-consumer<br />
<a href="#anchor1">11.</a>&nbsp;
Changes<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">11.1.</a>&nbsp;
Changes from 04 Version<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">11.2.</a>&nbsp;
Changes from 03 Version<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">11.3.</a>&nbsp;
Changes from 02 Version<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">11.4.</a>&nbsp;
Changes from 01 Version<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">11.5.</a>&nbsp;
Changes from 00 Version<br />
<a href="#anchor7">12.</a>&nbsp;
Acknowledgments<br />
<a href="#rfc.references1">13.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">13.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">13.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="sec:Introduction"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>The topic of Media Resource management has been in discussion for a number of years with 
		varying proprietary solutions being used today.  It is clear that, as we move towards
		a consistent architecture and protocol for Media Server Control, a standard mechanism 
		is required for accurate media resource selection.
</p>
<p>As IP based multimedia infrastructures mature, the complexity and demands from 
		deployments increase.  Such complexity will result in a wide variety of capabilities
		from a range of vendors that should all be interoperable using the architecture
		and protocols produced by the MediaCtrl work group.  It should be possible 
		for a controlling entity to be assisted in Media Server selection so that 
		the most appropriate resource is selected for a particular operation.  The
	       	importance increases when you introduce a flexible level of deployment scenarios, 
		as specified in the <a class='info' href='#RFC5167'>RFC 5167<span> (</span><span class='info'>Dolly, M. and R. Even, &ldquo;Media Server Control Protocol Requirements,&rdquo; March&nbsp;2008.</span><span>)</span></a> [RFC5167] and <a class='info' href='#RFC5567'>RFC 5567<span> (</span><span class='info'>Melanchuk, T., &ldquo;An Architectural Framework for Media Server Control,&rdquo; June&nbsp;2009.</span><span>)</span></a> [RFC5567] documents.  
		These documents make statements like
		&quot;it should be possible to have a many-to-many relationship between Application 
		Servers and Media Servers that use this protocol&quot;.  This leads to the following 
		deployment architectures being possible when considering media resources.
		
</p>
<p>The simplest deployment view is illustrated in <a class='info' href='#fig:arch1'>Figure&nbsp;1<span> (</span><span class='info'>Basic Architecture</span><span>)</span></a>. 
		
</p><br /><hr class="insert" />
<a name="fig:arch1"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


+---+-----+---+                         +---+-----+---+
| Application |                         |    Media    |
|   Server    |&lt;-------MS Control------&gt;|    Server   |
+-------------+                         +-------------+


</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: Basic Architecture&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>This simply involves a single Application Server and Media Server.  Expanding 
		on this view, it is also possible for an Application Server to control 
		multiple (greater that 1) Media Server instances at any one time.  This deployment view is illustrated in 
		<a class='info' href='#fig:arch2'>Figure&nbsp;2<span> (</span><span class='info'>Multiple Media Servers</span><span>)</span></a>.  Typically, such architectures are associated with 
		application logic that requires high demand media services.  It is more than possible 
		that each media server possesses a different media capability set.  Media servers 
		may offer different media services as specified in the Mediactrl architecture document. 
		A Media server may have similar media functionality but may have different capacity 
		or media codec support.
</p><br /><hr class="insert" />
<a name="fig:arch2"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


                         		+---+-----+---+
                       		 	|    Media    |
				 +-----&gt;|    Server   |
                          	 |	+-------------+
                                 |
+---+-----+---+                  |      +---+-----+---+
| Application |                  |      |    Media    |
|   Server    |&lt;--MS Control-----+-----&gt;|    Server   |
+-------------+                  |      +-------------+
                                 |
                                 |      +---+-----+---+
                       		 +-----&gt;|    Media    |
          				|    Server   |
                          		+-------------+

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: Multiple Media Servers&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p><a class='info' href='#fig:arch3'>Figure&nbsp;3<span> (</span><span class='info'>Multiple Application Servers</span><span>)</span></a> conveys the opposite view to that in <a class='info' href='#fig:arch2'>Figure&nbsp;2<span> (</span><span class='info'>Multiple Media Servers</span><span>)</span></a>.  
		In this model there are a number of (greater than 1) application servers, possibly supporting
		dissimilar applications, controlling a single media server.  Typically, such architectures are
		associated with application logic that requires low demand media services.	
		
</p><br /><hr class="insert" />
<a name="fig:arch3"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

+---+-----+---+
| Application |
|   Server    |&lt;-----+
+-------------+      |
                     |
+---+-----+---+      |                  +---+-----+---+
| Application |      |                  |    Media    |
|   Server    |&lt;-----+-----MS Control--&gt;|    Server   |
+-------------+      |                  +-------------+
                     |
+---+-----+---+      |
| Application |      |
|   Server    |&lt;-----+
+-------------+


</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3: Multiple Application Servers&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>The final deployment view is the most complex.  In this model (M:N) there 
	exists any number of Application Servers and any number of Media Servers.  It is  
	again possible in this model that media servers might not be homogenous and have 
	different capability sets and capacity.
</p><br /><hr class="insert" />
<a name="fig:arch4"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

+---+-----+---+                         +---+-----+---+
| Application |                         |    Media    |
|   Server    |&lt;-----+            +----&gt;|    Server   |
+-------------+      |            |     +-------------+
                     |            |
+---+-----+---+      |            |     +---+-----+---+
| Application |      |            |     |    Media    |
|   Server    |&lt;-----+-MS Control-+----&gt;|    Server   |
+-------------+      |            |     +-------------+
                     |            |
+---+-----+---+      |            |     +---+-----+---+
| Application |      |            +----&gt;|    Media    |
|   Server    |&lt;-----+                  |    Server   |
+-------------+                         +---+-----+---+

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;4: Basic Architecture&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>This document will take a look at the specific problem areas related 
		to such deployment architectures.  It is recognised that the solutions 
		proposed in this document should be equally adaptable to all of the 
		previously described deployment models.  It is also recognised that 
		the solution is far more relevant to some of the previously discussed 
	       	deployment models and can almost be viewed as redundant
		on others.
</p>
<a name="Terminology"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Conventions and Terminology</h3>

<p>In this document, <a class='info' href='#RFC2119'>BCP 14/RFC 2119<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> [RFC2119]
	defines the key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
	NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY",
	and "OPTIONAL".
</p>
<p>This document inherits terminology proposed in
	<a class='info' href='#RFC5567'>RFC 5567<span> (</span><span class='info'>Melanchuk, T., &ldquo;An Architectural Framework for Media Server Control,&rdquo; June&nbsp;2009.</span><span>)</span></a> [RFC5567] and
	<a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>Media Control Channel Framework<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; October&nbsp;2009.</span><span>)</span></a> [I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework] documents.  
	In addition, the following terms are defined for use in this document and for 
	use in the context of the MediaCtrl Work group in the IETF:
			
</p>
<blockquote class="text"><dl>
<dt>Media Resource Broker (MRB): </dt>
<dd>A logical entity that is responsible for
     	both collection of appropriate published Media Server (MS)
      	information and selecting appropriate MS resources on behalf of
      	consuming entities.
</dd>
<dt>Query MRB: </dt>
<dd>An instantiation of an MRB (See previous definition) that provides 
	an interface for an Application Server to retrieve the address of an appropriate Media Server.  The result 
	returned to the Application Server can be influenced by information contained in the query 
	request.
</dd>
<dt>In-line MRB: </dt>
<dd>An instantiation of an MRB (See definition) that
      	directly receives requests on the signalling path. There is no
	separate query.
</dd>
</dl></blockquote><p>

	Within the context of In-line MRBs, additional terms are defined:

</p>
<blockquote class="text"><dl>
<dt>In-line Aware MRB Mode (IAMM): </dt>
<dd>Defined in <a class='info' href='#sec:IAMM'>Section&nbsp;5.3.2<span> (</span><span class='info'>In-line Aware MRB Mode</span><span>)</span></a>.
</dd>
<dt>In-line Unaware MRB Mode (IUMM): </dt>
<dd>Defined in <a class='info' href='#sec:IUMM'>Section&nbsp;5.3.1<span> (</span><span class='info'>In-line Unaware MRB Mode</span><span>)</span></a>.
</dd>
</dl></blockquote><p>
	
	The document will often specify when a specific identifier in a protocol message
	needs to be unique. Unless differently stated, such uniqueness will always need to
	be intended within the scope of the Media Servers controlled by the same Media
	Resource Broker. The interaction among different Media Resource Brokers, as the
	partitioning of a logical Media Resource Broker, is out of scope to this document.

</p>
<a name="sec:Problem"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Problem Discussion</h3>

<p>As anticipated in <a class='info' href='#sec:Introduction'>Section&nbsp;1<span> (</span><span class='info'>Introduction</span><span>)</span></a>, the main aim of the MediaCtrl group
		is to produce a solution that must service a wide variety of deployment architectures.  
		These range from the simplest 1:1 relationship between Media Servers and Application 
		Servers to potentially linearly scaling 1:M, M:1 and M:N deployments.
</p>
<p>This still does not seem like a major issue for the proposed solution until 
		you add a number of additional factors into the equation that increase 
		complexity.  As Media Servers evolve it must be taken into consideration that, 
		where many can exist in a deployment, they may not have been produced by the same 
		vendor and may not have the same capability set.  It should be possible for an 
		Application Server that exists in a deployment to select a Media Service based 
		on a common, appropriate capability set.  In conjunction with capabilities, it is 
		also important to take available resources into consideration.  The ability 
		to select an appropriate Media Service function is an extremely useful  
		feature but becomes even more powerful when considered with 
		available resources for servicing a request.
</p>
<p>In conclusion, the intention is to create a tool set that allows MediaCtrl 
		deployments to effectively utilize the available media resources.  It should 
		be noted that in the simplest deployments where only a single media server exists, 
		an MRB function is probably not required.  Only a single capability set exists 
		and resource unavailability can be handled using the appropriate underlying 
		signalling, e.g., SIP response.  This document does not prohibit such uses of 
		an MRB, it simply provides the tools for various entities to interact 
		where appropriate.  It is also worth noting that the tools provided 
       		in this document aim to provide a 'best effort' view of media resources 
		at the time of request for initial Media Server routing decisions.  Any 
		dramatic change in media capabilities after a request has taken place
		should be handled by the underlying protocol.
</p>
<p>Please note that there may be additional information that it is
		desirable for the MRB to have for purposes of selecting an MS resource, such as
		resource allocation rules across different applications, planned or unplanned
		downtime of Media Server resources, the planned addition of future Media Server
		resources, or MS resource capacity models. How the MRB acquires such information
		is outside the scope of this document.  The techniques used for selecting an
		appropriate Media Resource by an MRB is outside the scope of this document.
</p>
<a name="sec:Deployment"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Deployment Scenario Options </h3>

<p>On researching Media Resource Brokering it became clear that a couple of high level 
		models exist.  The general principles of &quot;in-line&quot; and &quot;query&quot; 
		MRB concepts are discussed in the rest of this section.
		
</p>
<a name="sec:Query"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Query MRB</h3>

<p>The &quot;Query&quot; model for MRB interactions provides the ability for 
		a client of media services (for example an Application Server) to 
		&quot;ask&quot; an MRB for an appropriate Media Server, as illustrated 
		in <a class='info' href='#fig:arch5'>Figure&nbsp;5<span> (</span><span class='info'>Query MRB</span><span>)</span></a>.
		
</p><br /><hr class="insert" />
<a name="fig:arch5"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

                     +---+-----+---+
       +------------&gt;|     MRB     |&lt;----------+----&lt;-----+---+
       |             +-------------+        (1)|          |   |
       |                                       |          |   |
       |(2)                             +---+--+--+---+   |   |
       |                                |    Media    |   |   |
       |                          +----&gt;|    Server   |   |   |
       |                          |     +-------------+   |   |
       |                          |                    (1)|   |
+---+--+--+---+                   |     +---+-----+---+   |   |
| Application |                   |     |    Media    |   |   |
|   Server    |&lt;-----+-MS Control-+----&gt;|    Server   |-&gt;-+   |
+-------------+          (3)      |     +-------------+       |
                                  |                           |
                                  |     +---+-----+---+    (1)|
                                  +----&gt;|    Media    |       |
				        |    Server   |---&gt;---+
                                        +---+-----+---+

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;5: Query MRB&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>In this deployment, the Media Servers use the &quot;Media Server Resource 
		Publish Interface&quot;, as discussed in <a class='info' href='#sec:MS_Pub'>Section&nbsp;5.1<span> (</span><span class='info'>Media Server Resource Publish Interface</span><span>)</span></a>, to 
		convey capability sets as well as resource information.  This is depicted 
		by (1) in <a class='info' href='#fig:arch5'>Figure&nbsp;5<span> (</span><span class='info'>Query MRB</span><span>)</span></a>.  It is then the MRB's responsibility to 
		accumulate all appropriate information relating to media services in the 
		logical deployment cluster.  The Application Server (or other media 
		services client) is then able to query the MRB for an appropriate resource (as 
		identified by (2) in <a class='info' href='#fig:arch5'>Figure&nbsp;5<span> (</span><span class='info'>Query MRB</span><span>)</span></a>).  Such a query would carry 
	       	specific information related to the Media Service required and enable the MRB 
		to provide an increased accuracy in its response.  This particular interface 
		is discussed in &quot;Media Resource Consumer Interface&quot; in 
		<a class='info' href='#sec:Res_Cons'>Section&nbsp;5.2<span> (</span><span class='info'>Media Service Resource Consumer Interface</span><span>)</span></a>.  The Application Server is then able 
		to direct control commands (for example create conference) and Media Dialogs 
		to the appropriate Media Server, as shown by (3) in <a class='info' href='#fig:arch5'>Figure&nbsp;5<span> (</span><span class='info'>Query MRB</span><span>)</span></a>. 
		Additionally, with Query MRB, the MRB is not in the signaling path
		between the AS and the selected MS resource.
</p>
<a name="sec:Query_hybrid"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.1"></a><h3>4.1.1.&nbsp;
Hybrid Query MRB</h3>

<p>As mentioned previously, it is the intention that a tool kit is provided 
		for MRB functionality within a MediaCtrl architecture.  It is expected that in
		specific deployment scenarios the role of the MRB might be co-hosted as a hybrid 
		logical entity with an Application Server, as shown in <a class='info' href='#fig:arch6'>Figure&nbsp;6<span> (</span><span class='info'>Hybrid Query MRB - AS Hosted</span><span>)</span></a>.
		
</p><br /><hr class="insert" />
<a name="fig:arch6"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

       +------------&lt;----------------&lt;---------+----&lt;-----+---+
       |                     (1)               |          |   |
       |                                       |          |   |
       |                                +---+--+--+---+   |   |
       |                                |    Media    |   |   |
       V                          +----&gt;|    Server   |   |   |
+------+------+                   |     +-------------+   |   |
|     MRB     |                   |                       |   |
+---+--+--+---+                   |     +---+-----+---+   |   |
| Application |                   |     |    Media    |   |   |
|   Server    |&lt;-----+-MS Control-+----&gt;|    Server   |-&gt;-+   |
+-------------+                   |     +-------------+       |
                                  |                           |
                                  |     +---+-----+---+       |
                                  +----&gt;|    Media    |       |
				        |    Server   |---&gt;---+
                                        +---+-----+---+

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;6: Hybrid Query MRB - AS Hosted&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>This diagram is identical to that in <a class='info' href='#fig:arch5'>Figure&nbsp;5<span> (</span><span class='info'>Query MRB</span><span>)</span></a> with the exception 
		that the MRB is now hosted on the Application Server.  The &quot;Media Server 
		Publish Interface&quot; is still being used to accumulate resource information 
		at the MRB but as it is co-hosted on the Application Server, the &quot;Media
		Server Consumer Interface&quot; has collapsed.  It might still exist within the 
		Application Server/MRB interaction but this is an implementation issue.  This 
		type of deployment suits a single Application Server environment but it should be noted 
		that a &quot;Media Server Consumer Interface&quot; could then be offered from the
		hybrid if required.	
		
</p>
<p>In a similar manner, the Media Server could also act as a hybrid for the deployment 
		cluster, as illustrated in <a class='info' href='#fig:arch7'>Figure&nbsp;7<span> (</span><span class='info'>Hybrid Query MRB - MS Hosted</span><span>)</span></a>.
		
</p><br /><hr class="insert" />
<a name="fig:arch7"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

                                (1)                 +---+-----+---+
+---+---+-------------&gt;----------------&gt;-----------&gt;|     MRB     |
|   |   |   +---+--+--+---+                         +---+-----+---+
|   |   +-&lt;-| Application |                         |    Media    |
|   |       |   Server    |&lt;--+-MS Control-+-------&gt;|    Server   |
|   |       +-------------+                   |     +-------------+
|   |                                         |
|   |       +---+--+--+---+                   |
|   +---&lt;---| Application |                   |
|           |   Server    |&lt;--+-MS Control-+--+
|           +-------------+                   |
|                                             |
|           +---+--+--+---+                   |
+---&lt;-------| Application |                   |
            |   Server    |&lt;--+-MS Control-+--+
            +-------------+




</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;7: Hybrid Query MRB - MS Hosted&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>This time the MRB has collapsed and is co-hosted by the Media Server.  The 
		&quot;Media Server Consumer Interface&quot; is still available to the Application 
		Servers (1) to query Media Server resources.  This time the &quot;Media
		Server Publish Interface&quot; has collapsed onto the Media Server.  It might 
		still exist within the Media Server/MRB interaction but this is an implementation 
		issue.  This type of deployment suits a single Media Server environment but 
		it should be noted that a &quot;Media Server Publish Interface&quot; could then 
		be offered from the hybrid if required. A typical use case scenario for such a
		topology would be a single MS representing a pool of MSs in a cluster. In that case,
		the MRB would actually be handling a cluster of MSs, rather than one.
		
</p>
<a name="sec:Inline"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
In-Line MRB</h3>

<p>The &quot;In-line&quot; MRB is architecturally different from the &quot;Query&quot; model 
	that was discussed in the previous section.  The concept of a separate
	query disappears.  The client of the MRB simply uses the media resource
	control and media dialog signalling to involve the MRB.  This type of deployment is illustrated
	in <a class='info' href='#fig:arch8'>Figure&nbsp;8<span> (</span><span class='info'>In-line MRB</span><span>)</span></a>.
</p><br /><hr class="insert" />
<a name="fig:arch8"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

                            +-------&lt;----------+----&lt;-------+---+
                            |                  | (1)        |   |
                            |                  |            |   |
                            |             +---+--+--+---+   |   |
                            |             |    Media    |   |   |
                            |     +------&gt;|    Server   |   |   |
                            |     |(3)    +-------------+   |   |
                            |     |                      (1)|   |
+---+--+--+---+             |     |       +---+-----+---+   |   |
| Application |  (2) +---+--V--+---+  (3) |    Media    |   |   |
|   Server    |-----&gt;|     MRB     |-----&gt;|    Server   |-&gt;-+   |
+-------------+      +---+-----+---+      +-------------+       |
                                  |                             |
                                  |   (3) +---+-----+---+    (1)|
                                  +------&gt;|    Media    |       |
				          |    Server   |---&gt;---+
                                          +---+-----+---+

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;8: In-line MRB&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>The Media Servers still use the 'Media Server Publish Interface' to convey 
	capabilities and resources to the MRB - as illustrated by (1).  The media server 
	Control (and Media dialogs as well, if required) is sent to the MRB (2) which then selects an 
	appropriate Media Server (3) and would stay in the signaling path between the AS
	and the MS resource for the handled dialogs.
</p>
<p>In-line MRB can be split into two distinct logical roles which can be applied on a per
	request basis.  They are:

	</p>
<blockquote class="text"><dl>
<dt>In-line Unaware MRB Mode (IUMM):</dt>
<dd>Allows an MRB to act on behalf of clients requiring
			media services who are not aware of an MRB or its operation.  In this case the AS does not
			provide explicit information on the kind of MS resource it needs
			(as in <a class='info' href='#sec:Res_Cons'>Section&nbsp;5.2<span> (</span><span class='info'>Media Service Resource Consumer Interface</span><span>)</span></a>) and the
			MRB is left to deduce it by potentially inspecting other information in the request from
			the AS; for example, SDP content, or address of the requesting AS, or additional Request-URI
			parameters as per <a class='info' href='#RFC4240'>RFC 4240<span> (</span><span class='info'>Burger, E., Van Dyke, J., and A. Spitzer, &ldquo;Basic Network Media Services with SIP,&rdquo; December&nbsp;2005.</span><span>)</span></a> [RFC4240].
</dd>
<dt>In-line Aware MRB Mode (IAMM):</dt>
<dd>Allows an MRB to act on behalf of clients requiring 
			media services who are aware of an MRB and its operation.  In particular it allows the AS
			to explicitly the convey the same kinds of MS characteristics desired as does the Query MRB
			mode (as in <a class='info' href='#sec:Res_Cons'>Section&nbsp;5.2<span> (</span><span class='info'>Media Service Resource Consumer Interface</span><span>)</span></a>).
		
		
</dd>
</dl></blockquote><p>

	In either role, the MRB would deduce that the selected MS resources are no longer needed when the AS 
	terminates the corresponding dialog.  The two modes are discussed in more detail
	in <a class='info' href='#sec:In_Line'>Section&nbsp;5.3<span> (</span><span class='info'>In-Line MRB Interface</span><span>)</span></a>.
</p>
<a name="sec:Interfaces"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
MRB Interface Definitions</h3>

<p>As discussed in previous sections in this document, the intention is to 
	provide a toolkit for a variety of deployment architectures where media resource 
	brokering can take place.  As a result, two main interfaces are required to 
	support the differing requirements.  The two interfaces are described in the 
	remainder of this section and have been named the 'Media Server Resource
	Publish' and 'Media Server Resource Consumer' interfaces.  These two 
	interfaces have extremely differing responsibilities and usages which is
	reflected in the choice of solutions.
	
</p>
<p>It is beyond the scope of this document to define exactly how to 
	construct an MRB.  This includes interpreting the data for the Media Service 
	Consumer interface supplied by the Media Server Publish interface.  It 
	is, however, important that the two interfaces are complimentary so that 
	development of appropriate MRB functionality is supported.
</p>
<a name="sec:MS_Pub"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Media Server Resource Publish Interface</h3>

<p>The Media Server Resource Publish interface is responsible for 
		providing an MRB with appropriate Media Server resource information.  
		As such, this interface is assumed to provide both general 
		and specific details related to Media Server resources.  This 
		information needs to be conveyed using an industry standard mechanism 
		to provide increased levels of adoption and interoperability.  A
		Control Package for the Media Control Channel Framework will be specified to fulfil this interface
		requirement.  It provides an establishment and monitoring
		mechanism to enable a Media Server to report appropriate statistics
		to an MRB.  The Publish interface is used with both Query and In-line modes of
		MRB operation.
		
</p>
<p>As already anticipated in the introduction, the MRB view
   		of MS resource availability will in practice be approximate - i.e.,
		partial and imperfect. The MRB Publish interface does not provide an exhaustive
   		view of current MS resource consumption, the MS may in some cases
		provide a best-effort computed view of resource consumption 
   		parameters conveyed in the Publish interface (e.g., DSP's with a
		fixed number of streams versus GPU's with CPU availability), there may be
		licensing constraints not factored in (e.g., even if lots of CPU and memory
   		are available, licensing or other configuration elements may restrict
   		the number of stream types), and MS resource information may only be
		reported periodically over the Publish interface to MRB.  Nevertheless,
		despite such limitations it is assumed that the provided information
		is enough to allow MRB implementors to realize its functionality.
</p>
<p>It is also worth noting that, while the scope of the MRB is definitely on providing interested Application Servers with
		the available resources, the MRB also allows for the retrieval of information about the currently
		occupied resources. While this is of course a relevant piece of information (e.g., for monitoring
		purposes), such a functionality inevitably raises security considerations, and implementations
		should take this into account. See <a class='info' href='#sec:security'>Section&nbsp;9<span> (</span><span class='info'>Security Considerations</span><span>)</span></a> for more details.
</p>
<p>The MRB Publish interface uses the Media Control Channel
		Framework (<a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; October&nbsp;2009.</span><span>)</span></a>) as the basis for interaction
		between a Media Server and an MRB.  The Media Control Channel Framework uses an extension mechanism
		to allow specific usages which are known as control packages.  <a class='info' href='#sec:Control_Package_Definition'>Section&nbsp;5.1.1<span> (</span><span class='info'>Control Package Definition</span><span>)</span></a>
		defines the control package that MUST be implemented by any Media Server wanting to interact
		with an MRB entity.
</p>
<p>Please note that it is out of scope how an MRB knows what MSs should be queried
		for publishing information.
</p>
<a name="sec:Control_Package_Definition"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.1"></a><h3>5.1.1.&nbsp;
Control Package Definition</h3>

<p>This section fulfills the mandatory requirement for information that
must be specified during the definition of a Control Framework Package,
as detailed in Section 8 of <a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; October&nbsp;2009.</span><span>)</span></a>.
</p>
<a name="sec:Control_Package_Name"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.1.1"></a><h3>5.1.1.1.&nbsp;
Control Package Name</h3>

<p>The Media Channel Control Framework requires a Control Package definition to
specify and register a unique name and version.
</p>
<p>The name and version of this Control Package is "mrb-publish/1.0".  
</p>
<a name="sec:Message_Usage"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.1.2"></a><h3>5.1.1.2.&nbsp;
Framework Message Usage</h3>

<p>The MRB publish interface allows a media server to convey available capabilities
	and resources to an MRB entity.
</p>
<p>This package defines XML elements in <a class='info' href='#definitions'>Section&nbsp;5.1.2<span> (</span><span class='info'>Element Definitions</span><span>)</span></a> and provides an XML
	Schema in <a class='info' href='#sec:publisher_xml'>Section&nbsp;7<span> (</span><span class='info'>Media Service Resource Publisher Interface XML Schema</span><span>)</span></a>. 
</p>
<p>The XML elements in this package are split into requests, responses
    	and event notifications.

    	Requests are carried in CONTROL message bodies; &lt;mrbrequest> element is defined as a package request.
    	This request can be used for creating new subscriptions and updating/removing existing subscriptions.

    	Event notifications are also carried in CONTROL message bodies; the
	&lt;mrbnotification> element is defined for package event notifications.

    	Responses are carried either in REPORT message or Control Framework
	200 response bodies; the &lt;mrbresponse> element is defined as a
	package level response. 

</p>
<p>Note that package responses are different from framework response
	codes. Framework error response codes (see Section 7 of
	<a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; October&nbsp;2009.</span><span>)</span></a>) are
	used when the request or event notification is
	invalid; for example, a request has invalid XML (400), or is not
	understood (500). Package level responses are carried in framework 200 response or
	REPORT message bodies. This package's response codes are defined
	in  <a class='info' href='#sec:responses'>Section&nbsp;5.1.5<span> (</span><span class='info'>&lt;mrbresponse></span><span>)</span></a>. 
</p>
<a name="sec:Common_XML"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.1.3"></a><h3>5.1.1.3.&nbsp;
Common XML Support</h3>

<p>The Media Control Channel Framework <a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; October&nbsp;2009.</span><span>)</span></a>
	requires a Control Package definition to
	specify if the attributes for media dialog or conference references are required.
</p>
<p>The Publish interface defined in <a class='info' href='#sec:publisher_xml'>Section&nbsp;7<span> (</span><span class='info'>Media Service Resource Publisher Interface XML Schema</span><span>)</span></a> does import and make use of the
	common XML schema defined in the Media Control Channel Framework.
</p>
<p>The Consumer interface defined in <a class='info' href='#sec:consumer_xml'>Section&nbsp;8<span> (</span><span class='info'>Media Service Resource Consumer Interface XML Schema</span><span>)</span></a> does import and make use of the
	common XML schema defined in the Media Control Channel Framework.
</p>
<a name="sec:Control_Body"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.1.4"></a><h3>5.1.1.4.&nbsp;
CONTROL Message Body</h3>

<p>A valid CONTROL body message MUST conform to the schema defined in <a class='info' href='#sec:publisher_xml'>Section&nbsp;7<span> (</span><span class='info'>Media Service Resource Publisher Interface XML Schema</span><span>)</span></a> and described in
    <a class='info' href='#definitions'>Section&nbsp;5.1.2<span> (</span><span class='info'>Element Definitions</span><span>)</span></a>. XML messages appearing in CONTROL messages
    MUST contain either a &lt;mrbrequest> or &lt;mrbnotification> element.  
</p>
<a name="sec:REPORT_Body"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.1.5"></a><h3>5.1.1.5.&nbsp;
REPORT Message Body</h3>

<p>A valid REPORT body MUST conform to the schema defined in <a class='info' href='#sec:publisher_xml'>Section&nbsp;7<span> (</span><span class='info'>Media Service Resource Publisher Interface XML Schema</span><span>)</span></a>
and described in <a class='info' href='#definitions'>Section&nbsp;5.1.2<span> (</span><span class='info'>Element Definitions</span><span>)</span></a>. XML
messages appearing in REPORT messages MUST contain a &lt;mrbresponse> element.


</p>
<a name="sec:Audit"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.1.6"></a><h3>5.1.1.6.&nbsp;
Audit</h3>

<p>The 'mrb-publish/1.0' Media Control Channel Framework package does not require any
	additional auditing capability.
</p>
<a name="definitions"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.2"></a><h3>5.1.2.&nbsp;
Element Definitions</h3>

<p>This section defines the XML elements for the Publish interface Media Control Channel package
	defined in <a class='info' href='#sec:MS_Pub'>Section&nbsp;5.1<span> (</span><span class='info'>Media Server Resource Publish Interface</span><span>)</span></a>.  The formal XML schema definition for the Publish
	interface can be found in <a class='info' href='#sec:publisher_xml'>Section&nbsp;7<span> (</span><span class='info'>Media Service Resource Publisher Interface XML Schema</span><span>)</span></a>.
</p>
<p>The root element is &lt;mrbpublish>.  All other XML elements (requests, responses, notifications) are
	contained within it.  The MRB Publish interface request element is detailed in <a class='info' href='#sec:requests'>Section&nbsp;5.1.3<span> (</span><span class='info'>&lt;mrbrequest></span><span>)</span></a>. 
	The MRB Publish interface notification element is detailed in <a class='info' href='#sec:notifications'>Section&nbsp;5.1.4<span> (</span><span class='info'>&lt;mrbnotification></span><span>)</span></a>.
	MRB Publish interface response element is contained in <a class='info' href='#sec:responses'>Section&nbsp;5.1.5<span> (</span><span class='info'>&lt;mrbresponse></span><span>)</span></a>.
</p>
<p>The &lt;mrbpublish> element has the following attributes:

	</p>
<blockquote class="text"><dl>
<dt>version:</dt>
<dd>a token specifying the mrb-publish package version.  The value
      	is fixed as '1.0' for this version of the package.  The attribute MUST be present.
</dd>
</dl></blockquote><p>
	
</p>
<p>The &lt;mrbpublish> element has the following child element, only one of which is allowed
	to occur in a request.

	</p>
<blockquote class="text"><dl>
<dt></dt>
<dd>&lt;mrbrequest> for sending an MRB request.  See <a class='info' href='#sec:requests'>Section&nbsp;5.1.3<span> (</span><span class='info'>&lt;mrbrequest></span><span>)</span></a>.
</dd>
<dt></dt>
<dd>&lt;mrbresponse> for sending an MRB response.  See <a class='info' href='#sec:responses'>Section&nbsp;5.1.5<span> (</span><span class='info'>&lt;mrbresponse></span><span>)</span></a>.
</dd>
<dt></dt>
<dd>&lt;mrbnotification> for sending an MRB notification.  See <a class='info' href='#sec:notifications'>Section&nbsp;5.1.4<span> (</span><span class='info'>&lt;mrbnotification></span><span>)</span></a>.
</dd>
</dl></blockquote><p>
	
</p>
<a name="sec:requests"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.3"></a><h3>5.1.3.&nbsp;
&lt;mrbrequest></h3>

<p>This section defines the &lt;mrbrequest> element used to initiate requests from an
	MRB to a Media Server.  The element is a container for information relevant for the interrogation
	of a media server.
</p>
<p>The &lt;mrbrequest> element has no defined attributes.
</p>
<p>The &lt;mrbrequest> element has the following sub-elements which are defined in the
	remainder of this section:

	</p>
<blockquote class="text"><dl>
<dt></dt>
<dd>&lt;subscription> for initiating a subscription to a Media Server from an MRB.  See <a class='info' href='#sec:subscription'>Section&nbsp;5.1.3.1<span> (</span><span class='info'>&lt;subscription></span><span>)</span></a>.
</dd>
</dl></blockquote><p>
	
</p>
<a name="sec:subscription"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.3.1"></a><h3>5.1.3.1.&nbsp;
&lt;subscription></h3>

<p>The &lt;subscription> element is included in a request from an MRB to a Media Server to provide the
	details relating to the configuration of updates.  This element can be used either to request a new subscription
	or to update an existing one (e.g., to change the frequency of the updates), and to remove ongoing subscriptions as
	well (e.g., to stop an indefinite update). The MRB will inform the Media Server how long
	it wishes to receive updates for and the frequency that updates should be sent. Updates related
	to the subscription are sent using the  &lt;mrbnotification> element.
</p>
<p>The &lt;subscription> element has the following attributes:
	
	</p>
<blockquote class="text"><dl>
<dt>id:</dt>
<dd> indicates a unique token representing the subscription session between the MRB
		and the Media Server.  The attribute MUST be present.
</dd>
<dt>seqnumber:</dt>
<dd> indicates a sequence number to be used in conjunction
		with the subscrition session id to identify a specific subscription command.
		The first subscription
		MUST have 1 as 'seqnumber', and following subscriptions MUST increment by 1 the
		previous 'seqnumber' value.
		The attribute MUST be present.
</dd>
<dt>action:</dt>
<dd> provides the operation that should be carried out on the subscription:
		
<ul class="text">
<li>The value of 'create' instructs the MS to attempt to setup a new subscription.
</li>
<li>The value of 'update' instructs the MS to attempt to update an existing subscription.
</li>
<li>The value of 'remove' instructs the MS to attempt to remove an existing subscription
		and consequently stop any ongoing related notification.
</li>
</ul>
		The attribute MUST be present.
</dd>
</dl></blockquote><p>
	
</p>
<p>The &lt;subscription> element has the following child elements:


	</p>
<blockquote class="text"><dl>
<dt>expires: </dt>
<dd>Provides the amount of time in seconds that a subscription should be installed for notifications
		at the Media Server.  Once the amount of time has passed, the subscription expires and the MRB has to subscribe
		again in case it is still interested in receiving notifications from the MS. The element MAY be present.
</dd>
<dt>frequency: </dt>
<dd>Provides the frequency in seconds that the MRB wishes to receive notifications
		from the MRB.  The element MAY be present.
</dd>
</dl></blockquote><p>
	
</p>
<p>
	Please note that these two optional pieces of
	information provided by the MRB only act as a suggestion: the MS MAY change the proposed values if it considers
	the suggestions unacceptable (e.g., if the MRB has requested a too high notification frequency). In such case,
	the request would not fail, but the updated, acceptable values would be reported in the &lt;mrbresponse> accordingly.
	
</p>
<a name="sec:notifications"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.4"></a><h3>5.1.4.&nbsp;
&lt;mrbnotification></h3>

<p>The &lt;mrbnotification> element is included in a request from a Media Server to an MRB to provide the
	details relating current status.  The Media Server will inform the MRB of its current status as defined by
	the information in the &lt;subscription> element.  Updates are sent
	using the  &lt;mrbnotification> element contained in an  &lt;mrbrequest> element.
</p>
<p>The &lt;mrbnotification> element has the following attributes:
	
	</p>
<blockquote class="text"><dl>
<dt>id:</dt>
<dd> indicates a unique token representing the session between the MRB
		and the Media Server and is the same as the one appearing in the &lt;subscription> element. 
		The attribute MUST be present.
</dd>
<dt>seqnumber:</dt>
<dd> indicates a sequence number to be used in conjunction
		with the subscription session id to identify a specific notification update.
		The first notification
		MUST have 1 as 'seqnumber', and following notifications MUST increment by 1 the
		previous 'seqnumber' value.
		The attribute MUST be present.
</dd>
</dl></blockquote><p>
	
</p>
<p>The following subsections provide details on the child elements that are contained within an
	&lt;mrbnotification> element.
</p>
<a name="sec:media-server-id"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.4.1"></a><h3>5.1.4.1.&nbsp;
&lt;media-server-id></h3>

<p>The &lt;media-server-id> element provides a unique system wide identifier for a Media Server
	instance.  The element MUST be present.
</p>
<a name="sec:supported-pacakges"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.4.2"></a><h3>5.1.4.2.&nbsp;
&lt;supported-packages></h3>

<p>The &lt;supported-packages> element provides the list of Media Control
	Channel Packages supported by the media server.  The element MAY be present.
</p>
<p>The &lt;supported-packages> element has no attributes.
</p>
<p>The &lt;supported-packages> element has the following child element:


	</p>
<blockquote class="text"><dl>
<dt>package: </dt>
<dd> The &lt;package> element represents the name of a package
		supported by the media server.  The &lt;package> element has a single attribute,
		'name', which represents the name of the supported Media Control Channel Framework
		package, compliant with the specification in the related IANA registry (e.g., "msc-ivr/1.0").
</dd>
</dl></blockquote><p>
	
</p>
<a name="sec:active-rtp-sessions"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.4.3"></a><h3>5.1.4.3.&nbsp;
&lt;active-rtp-sessions></h3>

<p>The &lt;active-rtp-sessions> element provides information detailing the current active
	Real-time Transport Protocol(RTP) sessions.  The element MAY be present.
</p>
<p>The &lt;active-rtp-sessions> element has no attributes.
</p>
<p>The &lt;active-rtp-sessions> element has the following child element:


	</p>
<blockquote class="text"><dl>
<dt>rtp-codec: </dt>
<dd> Is a container which represents a supported codec and the associated active sessions. 
		The &lt;rtp-codec> element has one attribute.  The attribute 'name' represents the name of the codec
		being represented. A valid value is a MIME media type
		which, depending on its definition, can include
      additional parameters (e.g., <a class='info' href='#RFC4281'>[RFC4281]<span> (</span><span class='info'>Gellens, R., Singer, D., and P. Frojdh, &ldquo;The Codecs Parameter for &quot;Bucket&quot; Media Types,&rdquo; November&nbsp;2005.</span><span>)</span></a>).  The &lt;rtp-codec> element has two child elements.  The child element,
		&lt;decoding>, represents the number of RTP sessions for the specified codec being decoded.  The
		child element, &lt;encoding>, represents the number of RTP sessions for the specified codec being
		encoded.
</dd>
</dl></blockquote><p>
	
</p>
<a name="sec:active-mixer-sessions"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.4.4"></a><h3>5.1.4.4.&nbsp;
&lt;active-mixer-sessions></h3>

<p>The &lt;active-mixer-sessions> element provides information detailing the current active
	mixed RTP sessions.  The element MAY be present.
</p>
<p>The &lt;active-mixer-sessions> element has no attributes.
</p>
<p>The &lt;active-mixer-sessions> element has the following child element:


	</p>
<blockquote class="text"><dl>
<dt>active-mix: </dt>
<dd> Is a container which represents a mixed active RTP session. 
		The &lt;active-mix> element has one attribute.  The attribute 'conferenceid' represents the name of the mix
		being represented.  The &lt;active-mix> element has one child element.  The child element,
		&lt;rtp-codec>, contains the same information relating to RTP sessions as defined in
	     	<a class='info' href='#sec:active-rtp-sessions'>Section&nbsp;5.1.4.3<span> (</span><span class='info'>&lt;active-rtp-sessions></span><span>)</span></a>.  The element MAY be present.
</dd>
</dl></blockquote><p>
	
</p>
<a name="sec:non-active-rtp-sessions"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.4.5"></a><h3>5.1.4.5.&nbsp;
&lt;non-active-rtp-sessions></h3>

<p>The &lt;non-active-rtp-sessions> element provides information detailing the currently available inactive
	RTP sessions.  The element MAY be present.
</p>
<p>The &lt;non-active-rtp-sessions> element has no attributes.
</p>
<p>The &lt;non-active-rtp-sessions> element has the following child element:


	</p>
<blockquote class="text"><dl>
<dt>rtp-codec: </dt>
<dd> Is a container which represents a supported codec and the inactive sessions. 
		The &lt;rtp-codec> element has one attribute.  The attribute 'name' represents the name of the codec
		being represented. A valid value is a MIME media type
		which, depending on its definition, can include
      additional parameters (e.g., <a class='info' href='#RFC4281'>[RFC4281]<span> (</span><span class='info'>Gellens, R., Singer, D., and P. Frojdh, &ldquo;The Codecs Parameter for &quot;Bucket&quot; Media Types,&rdquo; November&nbsp;2005.</span><span>)</span></a>).  The &lt;rtp-codec> element has two child elements.  The first child element,
		&lt;decoding>, represents the number of available incoming (decoding) RTP session for the specified codec.  The second
		child element, &lt;encoding>, represents the number of available  outgoing (encoding) RTP sessions
		for the specified codec.  The element MAY be present.
</dd>
</dl></blockquote><p>
	
</p>
<a name="sec:non-active-mixer-sessions"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.4.6"></a><h3>5.1.4.6.&nbsp;
&lt;non-active-mixer-sessions></h3>

<p>The &lt;non-active-mixer-sessions> element provides information detailing the current inactive
	mixed RTP sessions.  The element MAY be present.
</p>
<p>The &lt;non-active-rtp-sessions> element has no attributes.
</p>
<p>The &lt;non-active-mixer-sessions> element has the following child element:


	</p>
<blockquote class="text"><dl>
<dt>non-active-mix: </dt>
<dd> Is a container which representing an available mixed RTP session. 
		The &lt;non-active-mix> element has one attribute.  The attribute 'available' represents the number
		of mixes that could be used using that profile.  The &lt;non-active-mix> element has one child element. 
		The child element, &lt;rtp-codec>, contains the same information relating to RTP sessions as defined in
	     	<a class='info' href='#sec:non-active-rtp-sessions'>Section&nbsp;5.1.4.5<span> (</span><span class='info'>&lt;non-active-rtp-sessions></span><span>)</span></a>.  The element MAY be present.
</dd>
</dl></blockquote><p>
	
</p>
<a name="sec:media-server-status"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.4.7"></a><h3>5.1.4.7.&nbsp;
&lt;media-server-status></h3>

<p>The &lt;media-server-status> element provides information detailing the current status of the media
	server.  The element MUST be present.  It can return one of the following values:
	
	</p>
<blockquote class="text"><dl>
<dt>active: </dt>
<dd> Indicating that the Media Server is available for service.
</dd>
<dt>deactivated: </dt>
<dd> Indicating that the Media Server has been withdrawn from service,
		and as such should not be contacted before it becomes 'active' again.
</dd>
<dt>unavailable: </dt>
<dd> Indicating that the Media Server continues to process past requests but
		cannot accept new requests, and as such should not be contacted before it becomes 'active' again.
</dd>
</dl></blockquote><p>

</p>
<p>The &lt;media-server-status> element has no attributes.
</p>
<p>The &lt;media-server-status> element has no child elements.
</p>
<a name="sec:supported-codecs"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.4.8"></a><h3>5.1.4.8.&nbsp;
&lt;supported-codecs></h3>

<p>The &lt;supported-codecs> element provides information detailing the current codecs
	supported by a media server and associated actions.  The element MAY be present.
</p>
<p>The &lt;supported-codecs> element has no attributes.
</p>
<p>The &lt;supported-codecs> element has the following child element:


	</p>
<blockquote class="text"><dl>
<dt>supported-codec: </dt>
<dd> has a single attribute, 'name', which provides the
		name of the codec providing information.  A valid value is a MIME media type
		which, depending on its definition, can include
      additional parameters (e.g., <a class='info' href='#RFC4281'>[RFC4281]<span> (</span><span class='info'>Gellens, R., Singer, D., and P. Frojdh, &ldquo;The Codecs Parameter for &quot;Bucket&quot; Media Types,&rdquo; November&nbsp;2005.</span><span>)</span></a>). The &lt;supported-codec> element then has
		a further child element, &lt;supported-codec-package>.  The &lt;supported-codec-package>
		element has a single attribute, 'name', which provides the name of the Media Control Channel
		Framework package, compliant with the specification in the related IANA registry (e.g., "msc-ivr/1.0"), for which the codec support applies.  The &lt;supported-codec-package> 
		element has one further child element, &lt;supported-actions>, which provide the actions
       	that a Media Server can apply to this codec:
       	
<ul class="text">
<li>'decode', meaning a decoder for this codec is available;
</li>
<li>'encode', meaning an encoder for this codec is available;
</li>
<li>'passthrough', meaning the MS is able to pass a stream encoded using that codec through without re-encoding.
</li>
</ul>
</dd>
</dl></blockquote><p>
	
</p>
<a name="sec:application-data"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.4.9"></a><h3>5.1.4.9.&nbsp;
&lt;application-data></h3>

<p>The &lt;application-data> element provides arbitrary application level data.  This data is
	meant to only have meaning at the application level logic and as such is arbitrary.  The element MAY be present.
</p>
<p>The &lt;application-data> element has no attributes.
</p>
<p>The &lt;application-data> element has no child elements.
</p>
<a name="sec:file-formats"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.4.10"></a><h3>5.1.4.10.&nbsp;
&lt;file-formats></h3>

<p>The &lt;file-formats> element provides a list of file formats supported for the
	purpose of playing media.  The element MAY be present.
</p>
<p>The &lt;file-formats> element has no attributes.
</p>
<p>The &lt;file-formats> element has the following child element:


	</p>
<blockquote class="text"><dl>
<dt>supported-format: </dt>
<dd> has a single attribute, 'name', which provides the
		type of file format that is supported. A valid value is a MIME media type
		which, depending on its definition, can include
      additional parameters (e.g., <a class='info' href='#RFC4281'>[RFC4281]<span> (</span><span class='info'>Gellens, R., Singer, D., and P. Frojdh, &ldquo;The Codecs Parameter for &quot;Bucket&quot; Media Types,&rdquo; November&nbsp;2005.</span><span>)</span></a>). The &lt;supported-format> element then has
		a further child element, &lt;supported-file-package>.  The &lt;supported-file-package>
		element provides the name of the Media Control Channel
		Framework package, compliant with the specification in the related IANA registry (e.g., "msc-ivr/1.0"), for which the file format support applies.
</dd>
</dl></blockquote><p>
	
</p>
<a name="sec:max-prepared-duration"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.4.11"></a><h3>5.1.4.11.&nbsp;
&lt;max-prepared-duration></h3>

<p>The &lt;max-prepared-duration> element provides the amount of time a media dialog
	can be prepared in the system before it is executed.  The element MAY be present.
</p>
<p>The &lt;max-prepared-duration> element has no attributes.
</p>
<p>The &lt;max-prepared-duration> element has the following child element:


	</p>
<blockquote class="text"><dl>
<dt>max-time: </dt>
<dd> has a single attribute, 'max-time-seconds', which provides the
		amount of time in seconds that a media dialog can be in the prepared state.  The &lt;max-time> element then has
		a further child element, &lt;max-time-package>.  The &lt;max-time-package>
		element provides the name of the Media Control Channel
		Framework package, compliant with the specification in the related IANA registry (e.g., "msc-ivr/1.0"), for which the time period applies.
</dd>
</dl></blockquote><p>
	
</p>
<a name="sec:dtmf-support"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.4.12"></a><h3>5.1.4.12.&nbsp;
&lt;dtmf-support></h3>

<p>The &lt;dtmf-support> element supplies the supported methods to detect DTMF tones and to generate them. 
	The element MAY be present.
</p>
<p>The &lt;dtmf-support> element has no attributes.
</p>
<p>The &lt;dtmf-support> element has the following child elements:


	</p>
<blockquote class="text"><dl>
<dt>detect: </dt>
<dd>Indicates the support for DTMF detection.
		The &lt;detect> element has no attributes.  The &lt;detect> element then has
		a further child element, &lt;dtmf-type>.  The &lt;dtmf-type>
		element has two attributes, 'name' and 'package.  The 'name' attribute provides the
		type of DTMF being used, and it can only be either 'RFC4733' <a class='info' href='#RFC4733'>[RFC4733]<span> (</span><span class='info'>Schulzrinne, H. and T. Taylor, &ldquo;RTP Payload for DTMF Digits, Telephony Tones, and Telephony Signals,&rdquo; December&nbsp;2006.</span><span>)</span></a> or 'Media' (tones as signals in the audio stream).
		The 'package' attribute provides the name of the Media Control Channel
		Framework package, compliant with the specification in the related IANA registry
		(e.g., "msc-ivr/1.0"), for which the DTMF type applies.
</dd>
<dt>generate: </dt>
<dd>Indicates the support for DTMF generation.
		The &lt;generate> element has no attributes.  The &lt;generate> element then has
		a further child element, &lt;dtmf-type>.  The &lt;dtmf-type>
		element has two attributes, 'name' and 'package.  The 'name' attribute provides the
		type of DTMF being used, and it can only be either 'RFC4733' <a class='info' href='#RFC4733'>[RFC4733]<span> (</span><span class='info'>Schulzrinne, H. and T. Taylor, &ldquo;RTP Payload for DTMF Digits, Telephony Tones, and Telephony Signals,&rdquo; December&nbsp;2006.</span><span>)</span></a> or 'Media' (tones as signals in the audio stream).
		The 'package' attribute provides the name of the Media Control Channel
		Framework package, compliant with the specification in the related IANA registry
		(e.g., "msc-ivr/1.0"), for which the DTMF type applies.
</dd>
<dt>passthrough: </dt>
<dd>Indicates the support for passing DTMF through without re-encoding.
		The &lt;passthrough> element has no attributes.  The &lt;passthrough> element then has
		a further child element, &lt;dtmf-type>.  The &lt;dtmf-type>
		element has two attributes, 'name' and 'package.  The 'name' attribute provides the
		type of DTMF being used, and it can only be either 'RFC4733' <a class='info' href='#RFC4733'>[RFC4733]<span> (</span><span class='info'>Schulzrinne, H. and T. Taylor, &ldquo;RTP Payload for DTMF Digits, Telephony Tones, and Telephony Signals,&rdquo; December&nbsp;2006.</span><span>)</span></a> or 'Media' (tones as signals in the audio stream).
		The 'package' attribute provides the name of the Media Control Channel
		Framework package, compliant with the specification in the related IANA registry
		(e.g., "msc-ivr/1.0"), for which the DTMF type applies.
</dd>
</dl></blockquote><p>
	
</p>
<a name="sec:mixing-modes"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.4.13"></a><h3>5.1.4.13.&nbsp;
&lt;mixing-modes></h3>

<p>The &lt;mixing-modes> element provides information about the support for audio
	and video mixing of a Media Server, specifically a list of supported algorithms
	to mix audio and a list of supported video presentation layouts. The element MAY be present.
</p>
<p>The &lt;mixing-modes> element has no attributes.
</p>
<p>The &lt;mixing-modes> element has the following child elements:


	</p>
<blockquote class="text"><dl>
<dt>audio-mixing-modes: </dt>
<dd> Is a container representing the available algorithms for
	audio mixing. The &lt;audio-mixing-modes> element has no attributes. The
	&lt;audio-mixing-modes> element has one child element. The child element,
	&lt;audio-mixing-mode>, contains a specific available algorithm. It has a single
	attribute, 'package'. The attribute 'package' provides the name of the Media
	Control Channel Framework package, compliant with the specification in the related IANA registry (e.g., "msc-ivr/1.0"), for which the algorithm support applies.
</dd>
<dt>video-mixing-modes: </dt>
<dd> Is a container representing the available video
	presentation layouts and the supported functionality for what concerns video mixing.
	The &lt;video-mixing-modes> element has two attributes, 'vas' and 'activespeakermix'.
	The 'vas' attribute is of type boolean with a value of 'true' indicating the Media Server
	supports automatic Voice Activated Switching. The 'activespeakermix' is of type boolean
	with a value of 'true' indicating that the Media Server is able to prepare an
	additional video stream for the loudest speaker participant without its contribution.
	The &lt;video-mixing-modes> element has one child element.
	The child element, &lt;video-mixing-mode>, contains the name of a specific video presentation
	layout. The name may refer to one of predefined video layouts defined in the XCON
	conference information data model, or to non-XCON layouts as well, as long as they are properly prefixed.
	The &lt;video-mixing-mode> element has a single attribute, 'package'. The attribute 'package' provides the
	name of the Media Control Channel Framework package, compliant with
	the specification in the related IANA registry (e.g., "msc-ivr/1.0"), for which the algorithm
	support applies.
</dd>
</dl></blockquote><p>
	
</p>
<a name="sec:supported-tones"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.4.14"></a><h3>5.1.4.14.&nbsp;
&lt;supported-tones></h3>

<p>The &lt;supported-tones> element provides information about which
	tones a media server supports. In particular, the support is reported
	referring to both country codes support (ISO 3166-1 <a class='info' href='#ISO.3166-1'>[ISO.3166&#8209;1]<span> (</span><span class='info'>International Organization for Standardization, &ldquo;Codes for the representation of names of countries and their subdivisions - Part 1: Country codes,&rdquo; 1997.</span><span>)</span></a>) and supported
	functionality (ITU-T Recommendation Q.1950 <a class='info' href='#ITU-T.Q.1950'>[ITU&#8209;T.Q.1950]<span> (</span><span class='info'>International Telecommunication Union - Telecommunication Standardization Bureau, &ldquo;Call Bearer Control (CBC) Protocol,&rdquo; .</span><span>)</span></a>). The element MAY be present.
</p>
<p>The &lt;supported-tones> element has no attributes.
</p>
<p>The &lt;supported-tones> element has the following child elements:


	</p>
<blockquote class="text"><dl>
<dt>supported-country-codes: </dt>
<dd> Is a container representing the supported
		country codes with respect to tones. The &lt;supported-country-codes>
		element has no attributes. The &lt;supported-country-codes> has one
		child element. The child element, &lt;country-code>, reports support
		for a specific country code, compliant with the ISO 3166-1 <a class='info' href='#ISO.3166-1'>[ISO.3166&#8209;1]<span> (</span><span class='info'>International Organization for Standardization, &ldquo;Codes for the representation of names of countries and their subdivisions - Part 1: Country codes,&rdquo; 1997.</span><span>)</span></a>
		specification. The &lt;country-code> element has a single attribute,
		'package'. The attribute 'package' provides the name of the Media
		Control Channel Framework package, compliant with the specification in the related IANA registry (e.g., "msc-ivr/1.0"), in which the tones from the
		specified country code are supported.
</dd>
<dt>supported-h248-codes: </dt>
<dd> Is a container representing the supported
		H.248 codes with respect to tones. The &lt;supported-h248-codes>
		element has no attributes. The &lt;supported-h248-codes> has one
		child element. The child element, &lt;h248-code>, reports support
		for a specific H.248 code, compliant with the ITU-T Recommendation Q.1950 <a class='info' href='#ITU-T.Q.1950'>[ITU&#8209;T.Q.1950]<span> (</span><span class='info'>International Telecommunication Union - Telecommunication Standardization Bureau, &ldquo;Call Bearer Control (CBC) Protocol,&rdquo; .</span><span>)</span></a>
		specification. The codes can be either specific (e.g., cg/dt to
		only report the Dial Tone from the Call Progress Tones package)
		or generic (e.g., cg/* to report all the tones from the Call Progress
		Tones package) using wildcards. The &lt;h248-code> element has a
		single attribute, 'package'. The attribute 'package' provides
		the name of the Media Control Channel Framework package, compliant with the specification in the related IANA registry (e.g., "msc-ivr/1.0"), in which
		the specified codes are supported.
</dd>
</dl></blockquote><p>
	
</p>
<a name="sec:streaming-modes"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.4.15"></a><h3>5.1.4.15.&nbsp;
&lt;streaming-modes></h3>

<p>The &lt;streaming-modes> element allows the Media Server to specify which protocols are supported
	for streaming to a Media Server for each Media Control Channel Framework package type. For example, whether the Media Server
	supports audio streaming via RTSP, HTTP, NFS, etc protocols.  The element MAY be present.
</p>
<p>The &lt;streaming-modes> element has no attributes.
</p>
<p>The &lt;streaming-modes> element has the following child element:


	</p>
<blockquote class="text"><dl>
<dt>stream-mode: </dt>
<dd>has two attributes, 'name' and 'package'.  The 'name' attribute provides the
		type of protocol that can be used for streaming (e.g., "HTTP", "RTSP", etc.). 
		The 'package' attribute provides the name of the Media
		Control Channel Framework package, compliant with the specification in the related
		IANA registry (e.g., "msc-ivr/1.0"), for which the streaming protocol applies.
</dd>
</dl></blockquote><p>
	
</p>
<a name="sec:asr-tts-support"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.4.16"></a><h3>5.1.4.16.&nbsp;
&lt;asr-tts-support></h3>

<p>The &lt;asr-tts-support> element provides information about the support for
	Automatic Speech Recognition (ASR) and Text-to-Speech (TTS) functionality
	in a media server. The functionality are reported by referring to the supported
	languages (using <a class='info' href='#ISO.639.1988'>ISO-639-1<span> (</span><span class='info'>International Organization for Standardization, &ldquo;Code for the representation of names of languages, 1st edition,&rdquo; 1988.</span><span>)</span></a> [ISO.639.1988] codes) for what regards both ASR and TTS.

	The &lt;asr-tts-support> element has no attributes.

	The &lt;asr-tts-support> element has the following child elements:
		
		
	</p>
<blockquote class="text"><dl>
<dt>asr-support: </dt>
<dd> Is a container representing the available languages for ASR. The
	&lt;asr-support> element has no attributes. The &lt;asr-support> has one child element.
	The child element, &lt;language>, reports the MS supports ASR for a specific language.
	The &lt;language> element has a single attribute, 'xml:lang'. The attribute 'xml:lang'
	contains the <a class='info' href='#ISO.639.1988'>ISO-639-1<span> (</span><span class='info'>International Organization for Standardization, &ldquo;Code for the representation of names of languages, 1st edition,&rdquo; 1988.</span><span>)</span></a> [ISO.639.1988] code of the supported language.
</dd>
<dt>tts-support: </dt>
<dd> Is a container representing the available languages for TTS. The
	&lt;tts-support> element has no attributes. The &lt;tts-support> has one child element.
	The child element, &lt;language>, reports the MS supports tts for a specific language.
	The &lt;language> element has a single attribute, 'xml:lang'. The attribute 'xml:lang'
	contains the <a class='info' href='#ISO.639.1988'>ISO-639-1<span> (</span><span class='info'>International Organization for Standardization, &ldquo;Code for the representation of names of languages, 1st edition,&rdquo; 1988.</span><span>)</span></a> [ISO.639.1988] code of the supported language.
</dd>
</dl></blockquote><p>
	
</p>
<a name="sec:vxml-support"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.4.17"></a><h3>5.1.4.17.&nbsp;
&lt;vxml-support></h3>

<p>The &lt;vxml-support> element specifies if the Media Server supports VoiceXML and if it does which
	protocols the support is exposed through (e.g., via the control framework, RFC4240 <a class='info' href='#RFC4240'>[RFC4240]<span> (</span><span class='info'>Burger, E., Van Dyke, J., and A. Spitzer, &ldquo;Basic Network Media Services with SIP,&rdquo; December&nbsp;2005.</span><span>)</span></a>, or RFC5552 <a class='info' href='#RFC5552'>[RFC5552]<span> (</span><span class='info'>Burke, D. and M. Scott, &ldquo;SIP Interface to VoiceXML Media Services,&rdquo; May&nbsp;2009.</span><span>)</span></a>). 
	The element MAY be present.
</p>
<p>The &lt;vxml-support> element has a single attribute 'support'.  The 'support' attribute is of
	type boolean with a value of 'true' indicating that the media server does support VXML, and a
	value of 'false' indicating it does not support VXML.  The default value is 'false'.
</p>
<p>The &lt;vxml-support> element has the following child element:


	</p>
<blockquote class="text"><dl>
<dt>vxml-mode: </dt>
<dd>has two attributes, 'package' and 'support'.  The 'package' attribute
		provides the name of the Media Control Channel Framework package, compliant with the specification in the related IANA registry (e.g., "msc-ivr/1.0"), for which the VXML support
		applies.  The 'support' attribute provides the type of VXML support provided by the
		Media Server (RFC5552 <a class='info' href='#RFC5552'>[RFC5552]<span> (</span><span class='info'>Burke, D. and M. Scott, &ldquo;SIP Interface to VoiceXML Media Services,&rdquo; May&nbsp;2009.</span><span>)</span></a>, RFC4240 <a class='info' href='#RFC4240'>[RFC4240]<span> (</span><span class='info'>Burger, E., Van Dyke, J., and A. Spitzer, &ldquo;Basic Network Media Services with SIP,&rdquo; December&nbsp;2005.</span><span>)</span></a> or IVR-Package <a class='info' href='#I-D.ietf-mediactrl-ivr-control-package'>[I&#8209;D.ietf&#8209;mediactrl&#8209;ivr&#8209;control&#8209;package]<span> (</span><span class='info'>McGlashan, S., Melanchuk, T., and C. Boulton, &ldquo;An Interactive Voice Response (IVR) Control Package for the Media Control Channel Framework,&rdquo; February&nbsp;2010.</span><span>)</span></a>).
</dd>
</dl></blockquote><p>
	
</p>
<a name="sec:media-server-location"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.4.18"></a><h3>5.1.4.18.&nbsp;
&lt;media-server-location></h3>

<p>The &lt;media-server-location> element provides information about the civic
	location of a media server. Its description makes use of the Civic Address
	Schema standardized in <a class='info' href='#RFC5139'>RFC 5139<span> (</span><span class='info'>Thomson, M. and J. Winterbottom, &ldquo;Revised Civic Location Format for Presence Information Data Format Location Object (PIDF-LO),&rdquo; February&nbsp;2008.</span><span>)</span></a> [RFC5139]. The element MAY be present.
</p>
<p>The &lt;media-server-location> element has no attributes.
</p>
<p>The &lt;media-server-location> element one child element:

	</p>
<blockquote class="text"><dl>
<dt>civicAddress: </dt>
<dd> Is a container representing the civic
	address location of the media server, whose representation refers to the
	Section 4 of <a class='info' href='#RFC5139'>RFC 5139<span> (</span><span class='info'>Thomson, M. and J. Winterbottom, &ldquo;Revised Civic Location Format for Presence Information Data Format Location Object (PIDF-LO),&rdquo; February&nbsp;2008.</span><span>)</span></a> [RFC5139].
</dd>
</dl></blockquote><p>
	
</p>
<a name="sec:label"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.4.19"></a><h3>5.1.4.19.&nbsp;
&lt;label></h3>

<p>The &lt;label> element allows a Media Server to declare a piece of information that will be understood by the MRB. 
	For example, the Media Server can declare if it's a blue or green one.  It's a string to allow arbitrary values to be returned 
	to allow arbitrary classification, and as such is not meant to provide any explicit information associated
	with the features of a MS.  The element MAY be present.
</p>
<p>The &lt;label> element has no attributes.
</p>
<p>The &lt;label> element has no child elements.
</p>
<a name="sec:media-server-address"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.4.20"></a><h3>5.1.4.20.&nbsp;
&lt;media-server-address></h3>

<p>The &lt;media-server-address> element allows a Media Server to provide
	a direct SIP URI address where it can be reached (e.g., the URI AS would
	call to in order to setup a Control Channel and relay call legs). 
	The element MAY be present.
</p>
<p>The &lt;media-server-address> element has no attributes.
</p>
<p>The &lt;media-server-address> element has no child elements.
</p>
<a name="sec:encryption"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.4.21"></a><h3>5.1.4.21.&nbsp;
&lt;encryption></h3>

<p>The &lt;encyption> element allows a Media Server to declare support for encrypting RTP media streams
	using <a class='info' href='#RFC3711'>RFC 3711<span> (</span><span class='info'>Baugher, M., McGrew, D., Naslund, M., Carrara, E., and K. Norrman, &ldquo;The Secure Real-time Transport Protocol (SRTP),&rdquo; March&nbsp;2004.</span><span>)</span></a> [RFC3711].  A value of 'true' indicates that a Media Server does support
	<a class='info' href='#RFC3711'>RFC 3711<span> (</span><span class='info'>Baugher, M., McGrew, D., Naslund, M., Carrara, E., and K. Norrman, &ldquo;The Secure Real-time Transport Protocol (SRTP),&rdquo; March&nbsp;2004.</span><span>)</span></a> [RFC3711] for RTP.  A value of 'false' indicates that a Media Server does not
       	support <a class='info' href='#RFC3711'>RFC 3711<span> (</span><span class='info'>Baugher, M., McGrew, D., Naslund, M., Carrara, E., and K. Norrman, &ldquo;The Secure Real-time Transport Protocol (SRTP),&rdquo; March&nbsp;2004.</span><span>)</span></a> [RFC3711] for RTP.  The element MAY be present.
</p>
<p>The &lt;encryption> element has no attributes.
</p>
<p>The &lt;encryption> element has no child elements.
</p>
<a name="sec:responses"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1.5"></a><h3>5.1.5.&nbsp;
&lt;mrbresponse></h3>

<p>Responses to requests are indicated by a &lt;response> element from <a class='info' href='#sec:publisher_xml'>Section&nbsp;7<span> (</span><span class='info'>Media Service Resource Publisher Interface XML Schema</span><span>)</span></a>. 
</p>
<p>The &lt;response> element has following attributes:

</p>
<blockquote class="text"><dl>
<dt>status:</dt>
<dd>numeric code indicating the response status. The
attribute MUST be present.
</dd>
<dt>reason:</dt>
<dd>string specifying a reason for the response status. The
attribute MAY be present.
</dd>
</dl></blockquote><p>

</p>
<p>The following status codes are defined for 'status': 
</p><br /><hr class="insert" />
<a name="defn.response.statuscodes"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left" width="15%"><col align="left" width="85%">
<tr><th align="left">code</th><th align="left">description</th></tr>
<tr>
<td align="left">200</td>
<td align="left">OK</td>
</tr>
<tr>
<td align="left">400</td>
<td align="left">Syntax error</td>
</tr>
<tr>
<td align="left">401</td>
<td align="left">Unable to create Subscription</td>
</tr>
<tr>
<td align="left">402</td>
<td align="left">Unable to update Subscription</td>
</tr>
<tr>
<td align="left">403</td>
<td align="left">Unable to remove Subscription</td>
</tr>
<tr>
<td align="left">404</td>
<td align="left">Subscription does not exist</td>
</tr>
<tr>
<td align="left">405</td>
<td align="left">Subscription already exists</td>
</tr>
<tr>
<td align="left">420</td>
<td align="left">Unsupported attribute or element</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 1: &lt;response> status codes&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
In case a new subscription request made by an MRB (action='create') has been accepted,
the MS MUST reply with a &lt;mrbresponse> with status code 200. The same rule applies
whenever a request to update (action='update') or remove (action='remove') an
existing transaction can be fulfilled by the MS.

</p>
<p>
A subscription request, nevertheless, may fail for several reasons. In such
a case, the status codes defined in <a class='info' href='#defn.response.statuscodes'>Table&nbsp;1<span> (</span><span class='info'>&lt;response> status codes</span><span>)</span></a>
must be used instead. Specifically, if the MS fails to handle a request
due to a syntax error in the request itself (e.g., incorrext XML,
violation of the schema constraints or invalid values in any of the
attributes/elements) the MS MUST reply with a &lt;mrbresponse> with status code 400.
If a syntactically correct request fails because the request also includes any
attribute/element the MS doesn't understand, the MS MUST reply with a &lt;mrbresponse> with status code 420.
If a syntactically correct request fails because the MRB wants to create a new subscription,
but the provided intended id for the subscription already exists, the MS MUST reply
with a &lt;mrbresponse> with status code 405. If a syntactically correct request
failes because the MRB wants to update/remove a subscription that doesn't exist,
the MS MUST reply with a &lt;mrbresponse> with status code 404.
If the MS is unable to accept a request for any other
reason (e.g., the MRB has no more resources to fulfil the request),
the MS MUST reply with a &lt;mrbresponse> with status code 401/402/403,
depending on the action the MRB provided in its request:
</p>
<ul class="text">
<li>action='create' --&gt; 401;
</li>
<li>action='update' --&gt; 402;
</li>
<li>action='remove' --&gt; 403;
</li>
</ul><p>

</p>
<p>
As explained in <a class='info' href='#sec:subscription'>Section&nbsp;5.1.3.1<span> (</span><span class='info'>&lt;subscription></span><span>)</span></a>, even in case of
an accepted subscription request the MS might change the
suggested 'expires' and 'frequency' values provided by the MRB in its
&lt;mrbrequest>, if it considers them unacceptable (e.g., the requested
frequency is too high). In such a case, the MS MUST add an additional
&lt;subscription> element to the response, including the updated values,
to inform the MRB about the change. The MS MAY include such element
if the values have been accepted or were omitted in the request.

</p>
<a name="sec:Res_Cons"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Media Service Resource Consumer Interface</h3>

<p>The Media Server Consumer interface provides the ability for clients of an MRB, 
		such as Application Servers, to request an appropriate Media Server to satisfy
		specific criteria.  The interface allows a client to pass detailed meta-information 
		to the MRB to help select an appropriate Media Server.  The MRB is then able to make 
	       	an informed decision and provide the client with an appropriate media server 
		resource.  The MRB Consumer interface can be used in association with both
		the Session Initiation Protocol (SIP) and the Hypertext Transfer Protocol (HTTP)
		<a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a>.  The following subsections provide guidance on
		using the Consumer interface, as defined by the 'application/mrb-consumer+xml MIME
		type in <a class='info' href='#sec:consumer_xml'>Section&nbsp;8<span> (</span><span class='info'>Media Service Resource Consumer Interface XML Schema</span><span>)</span></a>, with HTTP and SIP.
</p>
<a name="sec:http_Consumer"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.1"></a><h3>5.2.1.&nbsp;
HTTP Consumer Interface Usage</h3>

<p>An appropriate interface for such a 'query' style interface is
		in fact a HTTP usage.  Using HTTP and XML combined reduces complexity
		and encourages use of common tools that are widely available in the industry today.
		The following information explains the primary operations required to request and then
		receive information from an MRB.  The following description will describe the use of
		HTTP <a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a> and HTTPS <a class='info' href='#RFC2818'>[RFC2818]<span> (</span><span class='info'>Rescorla, E., &ldquo;HTTP Over TLS,&rdquo; May&nbsp;2000.</span><span>)</span></a> as
		transport for a query for media resource and the appropriate response.
</p>
<p>The media resource query, as defined by the &lt;mediaResourceRequest> element from
	       	<a class='info' href='#sec:consumer_xml'>Section&nbsp;8<span> (</span><span class='info'>Media Service Resource Consumer Interface XML Schema</span><span>)</span></a>, MUST be carried in the body of an HTTP/HTTPS
		POST request.  The MIME type contained in the HTTP/HTTPS
		request/response MUST be 'application/mrb-consumer+xml'.  This value MUST
		be reflected in the appropriate HTTP headers like 'Content-Type' and
		'Accept'.  The body of the HTTP/HTTPS POST request MUST only contain the
		'mediaResourceRequest' element as defined 
		in <a class='info' href='#sec:consumer_xml'>Section&nbsp;8<span> (</span><span class='info'>Media Service Resource Consumer Interface XML Schema</span><span>)</span></a>.  The 'mediaResourceRequest' element
		is the primary container of information related to a media resource
		request.
</p>
<p>The media resource response to a query, as defined by the &lt;mediaResourceResponse> element from
	       	<a class='info' href='#sec:consumer_xml'>Section&nbsp;8<span> (</span><span class='info'>Media Service Resource Consumer Interface XML Schema</span><span>)</span></a>, MUST be carried in the body of an HTTP/HTTPS
		200 response to the original HTTP/HTTPS POST request.  The MIME type contained in the HTTP/HTTPS
		request/response MUST be 'application/mrb-consumer+xml'.  This value MUST
		be reflected in the appropriate HTTP headers like 'Content-Type' and
		'Accept'.  The body of the HTTP/HTTPS 200 response MUST only contain the
		'mediaResourceResponse' element as defined 
		in <a class='info' href='#sec:consumer_xml'>Section&nbsp;8<span> (</span><span class='info'>Media Service Resource Consumer Interface XML Schema</span><span>)</span></a>.  The 'mediaResourceResponse' element
		is the primary container of information related to a media resource
		response.
</p>
<a name="sec:sip_Consumer"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.2"></a><h3>5.2.2.&nbsp;
SIP Consumer Interface Usage</h3>

<p>This document provides a complete toolkit for MRB deployment which includes the ability
		to interact with an MRB using SIP for the Consumer interface.
		The following information explains the primary operations required to request and then
		receive information from an MRB.  The following description will describe the use of
		SIP <a class='info' href='#RFC3261'>[RFC3261]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a> as transport for a query for media resource and the appropriate
		response when used with IAMM of operation (as discussed in <a class='info' href='#sec:IAMM'>Section&nbsp;5.3.2<span> (</span><span class='info'>In-line Aware MRB Mode</span><span>)</span></a>).
</p>
<p>The media resource query, as defined by the &lt;mediaResourceRequest> element from
		<a class='info' href='#sec:consumer_xml'>Section&nbsp;8<span> (</span><span class='info'>Media Service Resource Consumer Interface XML Schema</span><span>)</span></a>, MUST be carried in a SIP INVITE request.  The INVITE
		request will be constructed as it would have been to connect to a media server, as
		defined by the Media Control
		Channel Framework <a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; October&nbsp;2009.</span><span>)</span></a>.  The following
		additional steps MUST be followed when using the Consumer interface:	

	
		</p>
<ul class="text">
<li>Include a payload in the SIP INVITE request of type
			'multipart/mixed'<a class='info' href='#RFC2046'>[RFC2046]<span> (</span><span class='info'>Freed, N. and N. Borenstein, &ldquo;Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types,&rdquo; November&nbsp;1996.</span><span>)</span></a>.  One of the parts to be included
			in the 'multipart/mixed' payload MUST be the 'application/sdp' format which is constructed as
			specified in the Media Control Channel
			Framework <a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; October&nbsp;2009.</span><span>)</span></a>. 
</li>
<li> Another part of the 'multipart/mixed' payload MUST be of type
			'application/mrb-consumer+xml', as specified in this document and defined in
			<a class='info' href='#sec:consumer_xml'>Section&nbsp;8<span> (</span><span class='info'>Media Service Resource Consumer Interface XML Schema</span><span>)</span></a>.  Only the &lt;mediaResourceRequest> and its child
			elements can be included in the payload.
</li>
<li> The INVITE request will then be dispatched to the MRB, as defined
			by <a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; October&nbsp;2009.</span><span>)</span></a>.
</li>
</ul><p>
		
</p>
<p>The media resource response to a query, as defined by the &lt;mediaResourceResponse> element from
	       	<a class='info' href='#sec:consumer_xml'>Section&nbsp;8<span> (</span><span class='info'>Media Service Resource Consumer Interface XML Schema</span><span>)</span></a>, MUST be carried in the payload of a SIP
		2xx class response to the original SIP INVITE request.  The 2xx class
		response will be constructed as it would have been to connect from a media server, as
		defined by the Media Control
		Channel Framework <a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; October&nbsp;2009.</span><span>)</span></a>.  The following
		additional steps MUST be followed when using the Consumer interface:

		</p>
<ul class="text">
<li>Include a payload in the SIP 2xx class response of type
			'multipart/mixed'<a class='info' href='#RFC2046'>RFC 2046<span> (</span><span class='info'>Freed, N. and N. Borenstein, &ldquo;Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types,&rdquo; November&nbsp;1996.</span><span>)</span></a> [RFC2046].  One of the parts to be included
			in the 'multipart/mixed' payload MUST be the 'application/sdp' format which is constructed as
			specified in the Media Control Channel
			Framework <a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; October&nbsp;2009.</span><span>)</span></a>.
</li>
<li> Another part of the 'multipart/mixed' payload MUST be of type
			'application/mrb-consumer+xml', as specified in this document and defined in
			<a class='info' href='#sec:consumer_xml'>Section&nbsp;8<span> (</span><span class='info'>Media Service Resource Consumer Interface XML Schema</span><span>)</span></a>.  Only the &lt;mediaResourceResponse> and its child
			elements can be included in the payload.
</li>
<li> The SIP 2xx class response will then be dispatched from the MRB.
</li>
<li>A SIP ACK to the 2xx class response will then be sent back to the MRB.
</li>
</ul><p>
		
</p>
<a name="sec:lease"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.3"></a><h3>5.2.3.&nbsp;
Consumer Interface Lease Mechanism</h3>

<p>The Consumer interface defined in <a class='info' href='#sec:Res_Cons'>Section&nbsp;5.2<span> (</span><span class='info'>Media Service Resource Consumer Interface</span><span>)</span></a>
			and <a class='info' href='#sec:consumer_xml'>Section&nbsp;8<span> (</span><span class='info'>Media Service Resource Consumer Interface XML Schema</span><span>)</span></a> allows a client to request an appropriate
			media resource based on information included in the request (either a HTTP POST
			or SIP INVITE message).  In case of success, the response that is returned to the client MUST contain
			a &lt;session-info> element in either the SIP 2xx class or HTTP 200 response.  The
		       	information contained in the &lt;response-session-info>
			element allows a Consumer client to monitor the life time of the resources it has
			successfully requested, as well as amending them.
</p>
<p>Before delving into the details of such lease mechanism, though, it's worthwhile
			to first clarify its role within the context of the Consumer interface. As
			explained in <a class='info' href='#sec:MS_Pub'>Section&nbsp;5.1<span> (</span><span class='info'>Media Server Resource Publish Interface</span><span>)</span></a>, the knowledge the MRB has of the resources
			of all the MS it handles is imperfect. As such, how an MRB actually manages such
			resources depends on how it is implemented: one may choose to have the MRB keeping
			track and state of the allocated resources, or simply depend on the MS themselves
			to provide the information by means of the publishing interface notifications.
			Further information may be inferred by the signalling, in case the MRB is in
			the path of call legs. This means that the MRB may or may not be able to enforce
			the leasing mechanism it provides: such functionality is demanded, if necessary,
			to the actual deployment of a compliant entity, with the help of the information
			herein provided.
			
</p>
<p>That said, the &lt;mediaResourceResponse> element returned from the MRB contains a &lt;response-session-info>
			element if the request is successful.  The &lt;response-session-info> element has the following child
			elements which provide the appropriate resource session information:

			</p>
<ul class="text">
<li>&lt;session-id> is a unique identifier that enables a Consumer client and MRB to
			correlate future media resource requests related to an initial media resource request. 
			The &lt;session-id> MUST be included in all future related requests (see &lt;session-id>
			use later in this section when constructing a subsequent request).
</li>
<li>&lt;seq> is a numeric value returned to the Consumer client.  On issuing any
			future requests related to the media resource session (as determined by the
			&lt;session-id> element) the consumer client MUST increment the value returned in the
			&lt;seq> element and include in the request (see &lt;seq>
			use later in this section when constructing a subsequent request).
</li>
<li>&lt;expires> provides a value which represents the number of seconds the
			request for media resources is deemed alive.  The Consumer client should issue a refresh
			of the request, as discussed later in this section, if the expires timer is due to fire
			and the media resources are still required.
</li>
<li>&lt;media-server-address> provides a value which represents the SIP URI where the
			assigned MS can be contacted to make use of the required media resources.
</li>
</ul><p>
			
</p>
<p>The &lt;mediaResourceRequest> element is used in subsequent Consumer interface
			requests if the client wishes to manipulate the session.  The Consumer client
			MUST include the  &lt;session-info> element which enables the receiving MRB
			to determine an existing media resource allocation session.  The &lt;session-info>
			element has the following child elements which provide the appropriate resource session
			information to the MRB:

			</p>
<ul class="text">
<li>&lt;session-id> is a unique identifier that allows a Consumer client to indicate the
			appropriate existing media resource session to be manipulated by the MRB for this request.  The
			value was provided by the MRB in the initial request for media resources, as discussed
			earlier in this section (&lt;session-id> element included as part of the &lt;session-info>
			element in the initial &lt;mediaResourceResponse>).
</li>
<li>&lt;seq> is a numeric value returned to Consumer client in the initial request for
			media resources, as discussed earlier in this section (&lt;seq> element included as
			part of the &lt;session-info> element in the initial &lt;mediaResourceResponse>).  On issuing any
			future requests related to the specific media resource session (as determined by the
			&lt;session-id> element) the consumer client MUST increment the value returned in the
			&lt;seq> element from the initial response (contained in the &lt;mediaResourceResponse>) for
			every new request.  The value of the &lt;seq> element in requests acts as a counter to
			and in conjunction with the unique &lt;session-id> allows for unique identification of a request.
</li>
<li>&lt;action> element provides the operation to be carried out by the MRB on receiving the request:
				
<ul class="text">
<li>The value of 'update' is a request by the Consumer client to update the existing session at the MRB
				with alternate requirements which are contained in the remainder of the request.  If the requested
				resource information is identical to the existing MRB session, the MRB will attempt a session refresh. 
				If the information has changed, the MRB
				will attempt to update the existing session with the new information.  If the operation is successful, the
				200 status code in the response is returned in the status attribute of the &lt;mediaResourceResponseType> element. 
				If the operation is not successful, a 409 status code in the response is
				returned in the status attribute of the &lt;mediaResourceResponseType> element.
</li>
<li>The value of 'remove' is a request by the Consumer client to remove
				the session at the MRB.  This provides a mechanism for Consumer clients to release unwanted
				resources before they expire.  If the operation is successful, a
				200 status code in the response is returned in the status attribute of the &lt;mediaResourceResponseType> element. 
				If the operation is not successful, a 410 status code in the response is returned in the status attribute of
				the &lt;mediaResourceResponseType> element.
</li>
</ul>
			
</li>
</ul><p>
			
</p>
<p>Omitting the 'action' attribute means requesting a new set of resources.
</p>
<p>When used with SIP the &lt;session-info> element MUST be included in either a SIP re-INVITE
			(as defined in <a class='info' href='#RFC3261'>[RFC3261]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a>) or a SIP UPDATE (as defined in<a class='info' href='#RFC3311'>[RFC3311]<span> (</span><span class='info'>Rosenberg, J., &ldquo;The Session Initiation Protocol (SIP) UPDATE Method,&rdquo; October&nbsp;2002.</span><span>)</span></a>) request. 
			When used with HTTP the &lt;session-info> element MUST be included in a HTTP POST
			message (as defined in <a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a>).
</p>
<a name="sec:Media_Request"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.4"></a><h3>5.2.4.&nbsp;
Media Service Resource Request</h3>

<p>This section defines the XML elements for the Consumer interface.  The formal XML schema definition
	for the Consumer interface can be found in <a class='info' href='#sec:consumer_xml'>Section&nbsp;8<span> (</span><span class='info'>Media Service Resource Consumer Interface XML Schema</span><span>)</span></a>.
</p>
<p>The root element is &lt;mrbconsumer>.  All other XML elements (requests, responses) are
	contained within it.  The MRB Consumer interface request element is detailed in <a class='info' href='#sec:mediaResourceRequest'>Section&nbsp;5.2.4.1<span> (</span><span class='info'><mediaResourceRequest> element</span><span>)</span></a>. 
	MRB Consumer interface response element is contained in <a class='info' href='#sec:mediaResourceResponse'>Section&nbsp;5.2.5.1<span> (</span><span class='info'><mediaResourceResponse> element</span><span>)</span></a>.
</p>
<p>The &lt;mrbconsumer> element has the following attributes:

	</p>
<blockquote class="text"><dl>
<dt>version: </dt>
<dd> a token specifying the mrb-consumer package version.  The value
      	is fixed as '1.0' for this version of the package.  The attribute
      	MUST be present.
</dd>
</dl></blockquote><p>
	
</p>
<p>The &lt;mrbconsumer> element has the following child elements, only one of which is allowed
	to occur.

	</p>
<blockquote class="text"><dl>
<dt></dt>
<dd>&lt;mediaResourceRequest> for sending a Consumer request.  See <a class='info' href='#sec:mediaResourceRequest'>Section&nbsp;5.2.4.1<span> (</span><span class='info'><mediaResourceRequest> element</span><span>)</span></a>.
</dd>
<dt></dt>
<dd>&lt;mediaResourceResponse> for sending a Consumer response.  See <a class='info' href='#sec:mediaResourceResponse'>Section&nbsp;5.2.5.1<span> (</span><span class='info'><mediaResourceResponse> element</span><span>)</span></a>.
</dd>
</dl></blockquote><p>
	
</p>
<a name="sec:mediaResourceRequest"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.4.1"></a><h3>5.2.4.1.&nbsp;
<mediaResourceRequest> element</h3>

<p>The &lt;mediaResourceRequest> element provides a container for clients
		wishing to query an external MRB entity.  The &lt;mediaResourceRequest> element has
		&lt;generalInfo>, &lt;ivrInfo> and &lt;mixerInfo> as
		child elements.  These three elements are used to describe the requirements of a
		client requesting a Media Server and are covered in the following sub-sections.
</p>
<a name="sec:requestGeneral"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.4.1.1"></a><h3>5.2.4.1.1.&nbsp;
<generalInfo> element</h3>

<p>The &lt;generalInfo> element provides a container for general Consumer request information
		that is neither IVR or Mixer specific.  This includes session information that can be used for
		subsequent requests as part of the leasing mechanism described in <a class='info' href='#sec:lease'>Section&nbsp;5.2.3<span> (</span><span class='info'>Consumer Interface Lease Mechanism</span><span>)</span></a>. 
		The following sub-sections describe the elements of the &lt;generalInfo> element,
		&lt;session-info> and &lt;packages>.
</p>
<a name="sec:session-info"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.4.1.1.1"></a><h3>5.2.4.1.1.1.&nbsp;
<session-info> element</h3>

<p>The &lt;session-info> element is included in Consumer requests when an update is being made
		to an existing media resource session.  The ability to change and remove an existing media resource
		session is described in more detail in <a class='info' href='#sec:lease'>Section&nbsp;5.2.3<span> (</span><span class='info'>Consumer Interface Lease Mechanism</span><span>)</span></a>.  The element MAY be present.
</p>
<p>The &lt;session-info> element has no attributes.
</p>
<p>The &lt;session-info> element has the following child elements:


		</p>
<blockquote class="text"><dl>
<dt>session-id: </dt>
<dd> is a unique identifier that explicitly references an existing media
		resource session on the MRB.  The identifier is included to update the existing session and is
		described in more detail in <a class='info' href='#sec:lease'>Section&nbsp;5.2.3<span> (</span><span class='info'>Consumer Interface Lease Mechanism</span><span>)</span></a>.
</dd>
<dt>seq: </dt>
<dd> is used in association with the &lt;session-id> element in a subsequent
		request to update an existing media resource session on an MRB.  The &lt;seq> number is incremented
		from its original value returned in response to the initial request for media resources.  More information
		about its use is provided in <a class='info' href='#sec:lease'>Section&nbsp;5.2.3<span> (</span><span class='info'>Consumer Interface Lease Mechanism</span><span>)</span></a>.
</dd>
<dt>action: </dt>
<dd> provides the operation that should be carried out on an existing media
		resource session on an MRB:
		
<ul class="text">
<li>The value of 'update' instructs the MRB to attempt to update the
		existing media resource session with the information contained in the &lt;ivrInfo> and &lt;mixerInfo>
		elements.
</li>
<li>The value of 'remove' instructs the MRB to attempt to remove the existing
		media resource session.  More information on its use is provided in <a class='info' href='#sec:lease'>Section&nbsp;5.2.3<span> (</span><span class='info'>Consumer Interface Lease Mechanism</span><span>)</span></a>.
</li>
</ul>
</dd>
</dl></blockquote><p>
		
</p>
<a name="sec:packages"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.4.1.1.2"></a><h3>5.2.4.1.1.2.&nbsp;
<packages> element</h3>

<p>The &lt;packages> element provides a list of Media Control Channel Framework compliant
		packages that are required by the Consumer client.  The element MAY be present.
</p>
<p>The &lt;packages> element has no attributes.
</p>
<p>The &lt;packages> element has the following child element:


		</p>
<blockquote class="text"><dl>
<dt>package: </dt>
<dd> child element contains a string representing the Media Control
			Channel Framework package required by the Consumer client.  The &lt;package> element
			can appear multiple times. A valid value is a Control Package name as specified
			in the related IANA registry (e.g., "msc-ivr/1.0")
</dd>
</dl></blockquote><p>
		
</p>
<a name="sec:requestivrInfo"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.4.1.2"></a><h3>5.2.4.1.2.&nbsp;
<ivrInfo> element</h3>

<p>The &lt;ivrInfo> element provides a container for general Consumer request information
		that is IVR specific.  The following sub-sections describe the elements of the &lt;ivrInfo>
		element, &lt;ivr-sessions>, &lt;file-formats>,
		&lt;dtmf>, &lt;tones>, &lt;asr-tts>, &lt;vxml>, &lt;location>, &lt;encryption>,
	       	&lt;application-data>, &lt;max-prepared-duration> and &lt;stream-mode>.
</p>
<a name="sec:ivr-sessions"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.4.1.2.1"></a><h3>5.2.4.1.2.1.&nbsp;
<ivr-sessions> element</h3>

<p>The &lt;ivr-sessions> element indicates the number of IVR sessions a Consumer
		client requires from a media resource.  The element MAY be present.
</p>
<p>The &lt;ivr-sessions> element has no attributes.
</p>
<p>The &lt;ivr-sessions> element has the following child element:


		</p>
<blockquote class="text"><dl>
<dt>rtp-codec: </dt>
<dd> child element contains has a single attribute, 'name'.  The 'name'
			attribute provides the name of the codec required for an IVR session and is an appropriately
			registered token.  A valid value is a MIME media type
		which, depending on its definition, can include
      additional parameters (e.g., <a class='info' href='#RFC4281'>[RFC4281]<span> (</span><span class='info'>Gellens, R., Singer, D., and P. Frojdh, &ldquo;The Codecs Parameter for &quot;Bucket&quot; Media Types,&rdquo; November&nbsp;2005.</span><span>)</span></a>). The &lt;rtp-codec> element has two child elements.  The child element,
			&lt;decoding>, represents the number of RTP sessions for which decoding using the specified codec is requested.  The
			child element, &lt;encoding>, represents the number of RTP sessions for which encoding using the specified codec is
			requested.  
</dd>
</dl></blockquote><p>
		
</p>
<a name="sec:file-formats_consumer"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.4.1.2.2"></a><h3>5.2.4.1.2.2.&nbsp;
<file-formats> element</h3>

<p>The &lt;file-formats> element provides a list of file formats required for the
		purpose of playing media.  The element MAY be present.
</p>
<p>The &lt;file-formats> element has no attributes.
</p>
<p>The &lt;file-formats> element has the following child element:


		</p>
<blockquote class="text"><dl>
<dt>required-format: </dt>
<dd> has a single attribute, 'name', which provides the
		type of file format that is required.  A valid value is a MIME media type
		which, depending on its definition, can include
      additional parameters (e.g., <a class='info' href='#RFC4281'>[RFC4281]<span> (</span><span class='info'>Gellens, R., Singer, D., and P. Frojdh, &ldquo;The Codecs Parameter for &quot;Bucket&quot; Media Types,&rdquo; November&nbsp;2005.</span><span>)</span></a>). The &lt;supported-format> element then has
		a further child element, &lt;required-file-package>.  The &lt;required-file-package>
		element provides the name of the Media Control Channel
		Framework package, compliant with the specification in the related IANA registry (e.g., "msc-ivr/1.0"), for which the file format support applies.
</dd>
</dl></blockquote><p>
		
</p>
<a name="sec:dtmf"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.4.1.2.3"></a><h3>5.2.4.1.2.3.&nbsp;
<dtmf> element</h3>

<p>The &lt;dtmf> element supplies the required methods to detect DTMF tones and to generate them. 
		The element MAY be present.
</p>
<p>The &lt;dtmf> element has no attributes.
</p>
<p>The &lt;dtmf> element has the following child elements:


		</p>
<blockquote class="text"><dl>
<dt>detect: </dt>
<dd>Indicates the required support for DTMF detection.
		The &lt;detect> element has no attributes.  The &lt;detect> element then has
		a further child element, &lt;dtmf-type>.  The &lt;dtmf-type>
		element has two attributes, 'name' and 'package.  The 'name' attribute provides the
		type of DTMF being needed, and it can only be either 'RFC4733' <a class='info' href='#RFC4733'>[RFC4733]<span> (</span><span class='info'>Schulzrinne, H. and T. Taylor, &ldquo;RTP Payload for DTMF Digits, Telephony Tones, and Telephony Signals,&rdquo; December&nbsp;2006.</span><span>)</span></a> or 'Media' (tones as signals in the audio stream).
		The 'package' attribute provides the name of the Media Control Channel
		Framework package, compliant with the specification in the related IANA registry
		(e.g., "msc-ivr/1.0"), for which the DTMF type applies.
</dd>
<dt>generate: </dt>
<dd>Indicates the required support for DTMF generation.
		The &lt;generate> element has no attributes.  The &lt;generate> element then has
		a further child element, &lt;dtmf-type>.  The &lt;dtmf-type>
		element has two attributes, 'name' and 'package.  The 'name' attribute provides the
		type of DTMF being needed, and it can only be either 'RFC4733' <a class='info' href='#RFC4733'>[RFC4733]<span> (</span><span class='info'>Schulzrinne, H. and T. Taylor, &ldquo;RTP Payload for DTMF Digits, Telephony Tones, and Telephony Signals,&rdquo; December&nbsp;2006.</span><span>)</span></a> or 'Media' (tones as signals in the audio stream).
		The 'package' attribute provides the name of the Media Control Channel
		Framework package, compliant with the specification in the related IANA registry
		(e.g., "msc-ivr/1.0"), for which the DTMF type applies.
</dd>
<dt>passthrough: </dt>
<dd>Indicates the required support for passing DTMF through without re-encoding.
		The &lt;passthrough> element has no attributes.  The &lt;passthrough> element then has
		a further child element, &lt;dtmf-type>.  The &lt;dtmf-type>
		element has two attributes, 'name' and 'package.  The 'name' attribute provides the
		type of DTMF being needed, and it can only be either 'RFC4733' <a class='info' href='#RFC4733'>[RFC4733]<span> (</span><span class='info'>Schulzrinne, H. and T. Taylor, &ldquo;RTP Payload for DTMF Digits, Telephony Tones, and Telephony Signals,&rdquo; December&nbsp;2006.</span><span>)</span></a> or 'Media' (tones as signals in the audio stream).
		The 'package' attribute provides the name of the Media Control Channel
		Framework package, compliant with the specification in the related IANA registry
		(e.g., "msc-ivr/1.0"), for which the DTMF type applies.
</dd>
</dl></blockquote><p>
		
</p>
<a name="sec:tones"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.4.1.2.4"></a><h3>5.2.4.1.2.4.&nbsp;
&lt;tones></h3>

<p>The &lt;tones> element provides requested
	tones a media server must support for IVR. In particular, the request refers
	to both country codes support (ISO 3166-1 <a class='info' href='#ISO.3166-1'>[ISO.3166&#8209;1]<span> (</span><span class='info'>International Organization for Standardization, &ldquo;Codes for the representation of names of countries and their subdivisions - Part 1: Country codes,&rdquo; 1997.</span><span>)</span></a>) and requested
	functionality (ITU-T Recommendation Q.1950 <a class='info' href='#ITU-T.Q.1950'>[ITU&#8209;T.Q.1950]<span> (</span><span class='info'>International Telecommunication Union - Telecommunication Standardization Bureau, &ldquo;Call Bearer Control (CBC) Protocol,&rdquo; .</span><span>)</span></a>). The element MAY be present.
</p>
<p>The &lt;tones> element has no attributes.
</p>
<p>The &lt;tones> element has the following child elements:


	</p>
<blockquote class="text"><dl>
<dt>country-codes: </dt>
<dd> Is a container representing the requested
		country codes with respect to tones. The &lt;country-codes>
		element has no attributes. The &lt;country-codes> has one
		child element. The child element, &lt;country-code>, requests
		a specific country code, compliant with the ISO 3166-1 <a class='info' href='#ISO.3166-1'>[ISO.3166&#8209;1]<span> (</span><span class='info'>International Organization for Standardization, &ldquo;Codes for the representation of names of countries and their subdivisions - Part 1: Country codes,&rdquo; 1997.</span><span>)</span></a>
		specification. The &lt;country-code> element has a single attribute,
		'package'. The attribute 'package' provides the name of the Media
		Control Channel Framework package, compliant with the specification in the related IANA registry (e.g., "msc-ivr/1.0"), in which the tones from the
		specified country code are requested.
</dd>
<dt>h248-codes: </dt>
<dd> Is a container representing the requested
		H.248 codes with respect to tones. The &lt;h248-codes>
		element has no attributes. The &lt;h248-codes> has one
		child element. The child element, &lt;h248-code>, requests
		a specific H.248 code, compliant with the ITU-T Recommendation Q.1950 <a class='info' href='#ITU-T.Q.1950'>[ITU&#8209;T.Q.1950]<span> (</span><span class='info'>International Telecommunication Union - Telecommunication Standardization Bureau, &ldquo;Call Bearer Control (CBC) Protocol,&rdquo; .</span><span>)</span></a>
		specification. The codes can be either specific (e.g., cg/dt to
		only report the Dial Tone from the Call Progress Tones package)
		or generic (e.g., cg/* to report all the tones from the Call Progress
		Tones package) using wildcards. The &lt;h248-code> element has a
		single attribute, 'package'. The attribute 'package' provides
		the name of the Media Control Channel Framework package, compliant with the specification in the related IANA registry (e.g., "msc-ivr/1.0"), in which
		the specified codes are requested.
</dd>
</dl></blockquote><p>
	
</p>
<a name="sec:asr-tts"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.4.1.2.5"></a><h3>5.2.4.1.2.5.&nbsp;
&lt;asr-tts></h3>

<p>The &lt;asr-tts-support> element requests information about the support for
	Automatic Speech Recognition (ASR) and Text-to-Speech (TTS) functionality
	in a media server. The functionality is requested by referring to the supported
	languages (using <a class='info' href='#ISO.639.1988'>ISO-639-1<span> (</span><span class='info'>International Organization for Standardization, &ldquo;Code for the representation of names of languages, 1st edition,&rdquo; 1988.</span><span>)</span></a> [ISO.639.1988] codes) for what regards both ASR and TTS.

	The &lt;asr-tts-support> element has no attributes.

	The &lt;asr-tts-support> element has the following child elements:
		
		
	</p>
<blockquote class="text"><dl>
<dt>asr-support: </dt>
<dd> Is a container representing the available languages for ASR. The
	&lt;asr-support> element has no attributes. The &lt;asr-support> has one child element.
	The child element, &lt;language>, requests the MS supports ASR for a specific language.
	The &lt;language> element has a single attribute, 'xml:lang'. The attribute 'xml:lang'
	contains the <a class='info' href='#ISO.639.1988'>ISO-639-1<span> (</span><span class='info'>International Organization for Standardization, &ldquo;Code for the representation of names of languages, 1st edition,&rdquo; 1988.</span><span>)</span></a> [ISO.639.1988] code of the supported language.
</dd>
<dt>tts-support: </dt>
<dd> Is a container requesting the available languages for TTS. The
	&lt;tts-support> element has no attributes. The &lt;tts-support> has one child element.
	The child element, &lt;language>, requests the MS supports tts for a specific language.
	The &lt;language> element has a single attribute, 'xml:lang'. The attribute 'xml:lang'
	contains the <a class='info' href='#ISO.639.1988'>ISO-639-1<span> (</span><span class='info'>International Organization for Standardization, &ldquo;Code for the representation of names of languages, 1st edition,&rdquo; 1988.</span><span>)</span></a> [ISO.639.1988] code of the supported language.
</dd>
</dl></blockquote><p>
	
</p>
<a name="sec:vxml"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.4.1.2.6"></a><h3>5.2.4.1.2.6.&nbsp;
<vxml> element</h3>

<p>The &lt;vxml> element specifies if the Consumer client required VoiceXML and if it does which
		protocols the support is exposed through (e.g., via the control framework, RFC4240 <a class='info' href='#RFC4240'>[RFC4240]<span> (</span><span class='info'>Burger, E., Van Dyke, J., and A. Spitzer, &ldquo;Basic Network Media Services with SIP,&rdquo; December&nbsp;2005.</span><span>)</span></a>, or RFC5552 <a class='info' href='#RFC5552'>[RFC5552]<span> (</span><span class='info'>Burke, D. and M. Scott, &ldquo;SIP Interface to VoiceXML Media Services,&rdquo; May&nbsp;2009.</span><span>)</span></a>). 
		The element MAY be present.
</p>
<p>The &lt;vxml> element has a single attribute 'support'.  The 'support' attribute is of
		type boolean with a value of 'true' indicating that the Consumer client requires VXML support, and a
		value of 'false' indicating it does not require VXML support.  The default value is 'false'.
</p>
<p>The &lt;vxml> element has the following child element:


		</p>
<blockquote class="text"><dl>
<dt>vxml-mode: </dt>
<dd>has two attributes, 'package' and 'require'.  The 'package' attribute
		provides the name of the Media Control Channel Framework package, compliant with the specification in the related IANA registry (e.g., "msc-ivr/1.0"), for which the VXML support
		applies.  The 'require' attribute specifies the type of VXML support required by the
		Consumer client (RFC5552 <a class='info' href='#RFC5552'>[RFC5552]<span> (</span><span class='info'>Burke, D. and M. Scott, &ldquo;SIP Interface to VoiceXML Media Services,&rdquo; May&nbsp;2009.</span><span>)</span></a>, RFC4240 <a class='info' href='#RFC4240'>[RFC4240]<span> (</span><span class='info'>Burger, E., Van Dyke, J., and A. Spitzer, &ldquo;Basic Network Media Services with SIP,&rdquo; December&nbsp;2005.</span><span>)</span></a> or IVR-Package <a class='info' href='#I-D.ietf-mediactrl-ivr-control-package'>[I&#8209;D.ietf&#8209;mediactrl&#8209;ivr&#8209;control&#8209;package]<span> (</span><span class='info'>McGlashan, S., Melanchuk, T., and C. Boulton, &ldquo;An Interactive Voice Response (IVR) Control Package for the Media Control Channel Framework,&rdquo; February&nbsp;2010.</span><span>)</span></a>).
</dd>
</dl></blockquote><p>
		
</p>
<a name="sec:location"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.4.1.2.7"></a><h3>5.2.4.1.2.7.&nbsp;
&lt;location></h3>

<p>The &lt;location> element requests a civic
	location for an IVR media server.  The request makes use of the Civic Address
	Schema standardized in <a class='info' href='#RFC5139'>RFC 5139<span> (</span><span class='info'>Thomson, M. and J. Winterbottom, &ldquo;Revised Civic Location Format for Presence Information Data Format Location Object (PIDF-LO),&rdquo; February&nbsp;2008.</span><span>)</span></a> [RFC5139]. The element MAY be present.
</p>
<p>The &lt;location> element has no attributes.
</p>
<p>The &lt;location> element one child element:

	</p>
<blockquote class="text"><dl>
<dt>civicAddress: </dt>
<dd> Is a container representing the civic
	address location of the requested media server, whose representation refers to
	Section 4 of <a class='info' href='#RFC5139'>RFC 5139<span> (</span><span class='info'>Thomson, M. and J. Winterbottom, &ldquo;Revised Civic Location Format for Presence Information Data Format Location Object (PIDF-LO),&rdquo; February&nbsp;2008.</span><span>)</span></a> [RFC5139].
</dd>
</dl></blockquote><p>
	
</p>
<a name="sec:encryption_consumer"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.4.1.2.8"></a><h3>5.2.4.1.2.8.&nbsp;
&lt;encryption></h3>

<p>The &lt;encryption> element allows a Consumer client to request support for encrypting RTP media streams
	using <a class='info' href='#RFC3711'>RFC 3711<span> (</span><span class='info'>Baugher, M., McGrew, D., Naslund, M., Carrara, E., and K. Norrman, &ldquo;The Secure Real-time Transport Protocol (SRTP),&rdquo; March&nbsp;2004.</span><span>)</span></a> [RFC3711].  A value of 'true' indicates that Consumer client requires support of
	<a class='info' href='#RFC3711'>RFC 3711<span> (</span><span class='info'>Baugher, M., McGrew, D., Naslund, M., Carrara, E., and K. Norrman, &ldquo;The Secure Real-time Transport Protocol (SRTP),&rdquo; March&nbsp;2004.</span><span>)</span></a> [RFC3711] for RTP.  A value of 'false' indicates that a Consumer client does not
	require support of <a class='info' href='#RFC3711'>RFC 3711<span> (</span><span class='info'>Baugher, M., McGrew, D., Naslund, M., Carrara, E., and K. Norrman, &ldquo;The Secure Real-time Transport Protocol (SRTP),&rdquo; March&nbsp;2004.</span><span>)</span></a> [RFC3711] for RTP.  The element MAY be present.  The default value
	is 'false'
</p>
<p>The &lt;encryption> element has no attributes.
</p>
<p>The &lt;encryption> element has no child elements.
</p>
<a name="sec:application-data_consumer"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.4.1.2.9"></a><h3>5.2.4.1.2.9.&nbsp;
&lt;application-data></h3>

<p>The &lt;application-data> element provides IVR application level data.  The element MAY be present.
</p>
<p>The &lt;application-data> element has no attributes.
</p>
<p>The &lt;application-data> element has no child elements.
</p>
<a name="sec:max-prepared-duration_consumer"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.4.1.2.10"></a><h3>5.2.4.1.2.10.&nbsp;
&lt;max-prepared-duration></h3>

<p>The &lt;max-prepared-duration> element provides the amount of time required by the Consumer client
	that a media dialog can be prepared in the system before it is executed.  The element MAY be present.
</p>
<p>The &lt;max-prepared-duration> element has no attributes.
</p>
<p>The &lt;max-prepared-duration> element has the following child element:


	</p>
<blockquote class="text"><dl>
<dt>max-time: </dt>
<dd> has a single attribute, 'max-time-seconds', which provides the
		amount of time in seconds that a media dialog can be in the prepared state.  The &lt;max-time> element then has
		a further child element, &lt;max-time-package>.  The &lt;max-time-package>
		element provides the name of the Media Control Channel
		Framework package, compliant with the specification in the related IANA registry (e.g., "msc-ivr/1.0"), for which the time period applies.
</dd>
</dl></blockquote><p>
	
</p>
<a name="sec:streaming-modes_consumer"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.4.1.2.11"></a><h3>5.2.4.1.2.11.&nbsp;
&lt;streaming-modes></h3>

<p>The &lt;streaming-modes> element allows the Consumer client to specify which protocols are required
	for streaming to a Media Server for each Media Control Channel Framework package type. For example does the Media Server
	supports audio streaming via RTSP, HTTP, NFS, etc protocols.  The element MAY be present.
</p>
<p>The &lt;streaming-modes> element has no attributes.
</p>
<p>The &lt;streaming-modes> element has the following child element:


	</p>
<blockquote class="text"><dl>
<dt>stream-mode: </dt>
<dd>has two attributes, 'name' and 'package'.  The 'name' attribute provides the
		type of protocol required for streaming.  The 'package' attribute provides the name of the Media
		Control Channel Framework package, compliant with the specification in the related IANA registry (e.g., "msc-ivr/1.0"), for which the streaming protocol applies.
</dd>
</dl></blockquote><p>
	
</p>
<a name="sec:requestMixerInfo"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.4.1.3"></a><h3>5.2.4.1.3.&nbsp;
<mixerInfo> element</h3>

<p>The &lt;mixerInfo> element provides a container for general Consumer request information
		that is Mixer specific.  The following sub-sections describe the elements of the &lt;mixerInfo>
		element, &lt;mixers>, &lt;file-formats>,
		&lt;dtmf-type>, &lt;tones>, &lt;mixing-mode>, &lt;application-data>, &lt;location> and &lt;encryption>.
</p>
<a name="sec:mixers"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.4.1.3.1"></a><h3>5.2.4.1.3.1.&nbsp;
&lt;mixers></h3>

<p>The &lt;mixers> element provides information detailing the required
		mixed RTP sessions.  The element MAY be present.
</p>
<p>The &lt;mixers> element has no attributes.
</p>
<p>The &lt;mixers> element has the following child element:


		</p>
<blockquote class="text"><dl>
<dt>mix: </dt>
<dd> Is a container which represents a required mixed RTP session. 
		The &lt;mix> element has one attribute.  The attribute 'users' represents the number of
		participants required in the mix.  The &lt;mix> element has one child element.  The child element,
		&lt;rtp-codec>, contains the same information relating to RTP sessions as defined in
	     	<a class='info' href='#sec:active-rtp-sessions'>Section&nbsp;5.1.4.3<span> (</span><span class='info'>&lt;active-rtp-sessions></span><span>)</span></a>.  The element MAY be present.
</dd>
</dl></blockquote><p>
		
</p>
<a name="sec:file-formats_mixer"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.4.1.3.2"></a><h3>5.2.4.1.3.2.&nbsp;
&lt;file-formats></h3>

<p>The &lt;file-formats> element provides a list of file formats required by
		the Consumer client for the purpose of playing media to a mix.  The element MAY be present.
</p>
<p>The &lt;file-formats> element has no attributes.
</p>
<p>The &lt;file-formats> element has the following child element:


		</p>
<blockquote class="text"><dl>
<dt>required-format: </dt>
<dd> has a single attribute, 'name', which provides the
		type of file format that is supported.  A valid value is a MIME media type
		which, depending on its definition, can include
      additional parameters (e.g., <a class='info' href='#RFC4281'>[RFC4281]<span> (</span><span class='info'>Gellens, R., Singer, D., and P. Frojdh, &ldquo;The Codecs Parameter for &quot;Bucket&quot; Media Types,&rdquo; November&nbsp;2005.</span><span>)</span></a>). The &lt;required-format> element then has
		a further child element, &lt;required-file-package>.  The &lt;required-file-package>
		element provides the name of the Media Control Channel
		Framework package, compliant with the specification in the related IANA registry (e.g., "msc-ivr/1.0"), for which the file format support applies.
</dd>
</dl></blockquote><p>
		
</p>
<a name="sec:dtmf_mixer"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.4.1.3.3"></a><h3>5.2.4.1.3.3.&nbsp;
<dtmf> element</h3>

<p>The &lt;dtmf> element supplies the required methods to detect DTMF tones and to generate them in a mix. 
		The element MAY be present.
</p>
<p>The &lt;dtmf> element has no attributes.
</p>
<p>The &lt;dtmf> element has the following child elements:

		</p>
<blockquote class="text"><dl>
<dt>detect: </dt>
<dd>Indicates the required support for DTMF detection.
		The &lt;detect> element has no attributes.  The &lt;detect> element then has
		a further child element, &lt;dtmf-type>.  The &lt;dtmf-type>
		element has two attributes, 'name' and 'package.  The 'name' attribute provides the
		type of DTMF being used, and it can only be either 'RFC4733' <a class='info' href='#RFC4733'>[RFC4733]<span> (</span><span class='info'>Schulzrinne, H. and T. Taylor, &ldquo;RTP Payload for DTMF Digits, Telephony Tones, and Telephony Signals,&rdquo; December&nbsp;2006.</span><span>)</span></a> or 'Media' (tones as signals in the audio stream).
		The 'package' attribute provides the name of the Media Control Channel
		Framework package, compliant with the specification in the related IANA registry
		(e.g., "msc-ivr/1.0"), for which the DTMF type applies.
</dd>
<dt>generate: </dt>
<dd>Indicates the required support for DTMF generation.
		The &lt;generate> element has no attributes.  The &lt;generate> element then has
		a further child element, &lt;dtmf-type>.  The &lt;dtmf-type>
		element has two attributes, 'name' and 'package.  The 'name' attribute provides the
		type of DTMF being used, and it can only be either 'RFC4733' <a class='info' href='#RFC4733'>[RFC4733]<span> (</span><span class='info'>Schulzrinne, H. and T. Taylor, &ldquo;RTP Payload for DTMF Digits, Telephony Tones, and Telephony Signals,&rdquo; December&nbsp;2006.</span><span>)</span></a> or 'Media' (tones as signals in the audio stream).
		The 'package' attribute provides the name of the Media Control Channel
		Framework package, compliant with the specification in the related IANA registry
		(e.g., "msc-ivr/1.0"), for which the DTMF type applies.
</dd>
<dt>passthrough: </dt>
<dd>Indicates the required support for passing DTMF through without re-encoding.
		The &lt;passthrough> element has no attributes.  The &lt;passthrough> element then has
		a further child element, &lt;dtmf-type>.  The &lt;dtmf-type>
		element has two attributes, 'name' and 'package.  The 'name' attribute provides the
		type of DTMF being used, and it can only be either 'RFC4733' <a class='info' href='#RFC4733'>[RFC4733]<span> (</span><span class='info'>Schulzrinne, H. and T. Taylor, &ldquo;RTP Payload for DTMF Digits, Telephony Tones, and Telephony Signals,&rdquo; December&nbsp;2006.</span><span>)</span></a> or 'Media' (tones as signals in the audio stream).
		The 'package' attribute provides the name of the Media Control Channel
		Framework package, compliant with the specification in the related IANA registry
		(e.g., "msc-ivr/1.0"), for which the DTMF type applies.
</dd>
</dl></blockquote><p>
		
</p>
<a name="sec:tones_mixer"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.4.1.3.4"></a><h3>5.2.4.1.3.4.&nbsp;
&lt;tones></h3>

<p>The &lt;tones> element provides requested
	tones a media server must support for a mix. In particular, the request refers
	to both country codes support (ISO 3166-1 <a class='info' href='#ISO.3166-1'>[ISO.3166&#8209;1]<span> (</span><span class='info'>International Organization for Standardization, &ldquo;Codes for the representation of names of countries and their subdivisions - Part 1: Country codes,&rdquo; 1997.</span><span>)</span></a>) and requested
	functionality (ITU-T Recommendation Q.1950 <a class='info' href='#ITU-T.Q.1950'>[ITU&#8209;T.Q.1950]<span> (</span><span class='info'>International Telecommunication Union - Telecommunication Standardization Bureau, &ldquo;Call Bearer Control (CBC) Protocol,&rdquo; .</span><span>)</span></a>). The element MAY be present.
</p>
<p>The &lt;tones> element has no attributes.
</p>
<p>The &lt;tones> element has the following child elements:

	</p>
<blockquote class="text"><dl>
<dt>country-codes: </dt>
<dd> Is a container representing the requested
		country codes with respect to tones. The &lt;country-codes>
		element has no attributes. The &lt;country-codes> has one
		child element. The child element, &lt;country-code>, requests
		a specific country code, compliant with the ISO 3166-1 <a class='info' href='#ISO.3166-1'>[ISO.3166&#8209;1]<span> (</span><span class='info'>International Organization for Standardization, &ldquo;Codes for the representation of names of countries and their subdivisions - Part 1: Country codes,&rdquo; 1997.</span><span>)</span></a>
		specification. The &lt;country-code> element has a single attribute,
		'package'. The attribute 'package' provides the name of the Media
		Control Channel Framework package, compliant with the specification in the related IANA registry (e.g., "msc-ivr/1.0"), in which the tones from the
		specified country code are requested.
</dd>
<dt>h248-codes: </dt>
<dd> Is a container representing the requested
		H.248 codes with respect to tones. The &lt;h248-codes>
		element has no attributes. The &lt;h248-codes> has one
		child element. The child element, &lt;h248-code>, requests
		a specific H.248 code, compliant with the ITU-T Recommendation Q.1950 <a class='info' href='#ITU-T.Q.1950'>[ITU&#8209;T.Q.1950]<span> (</span><span class='info'>International Telecommunication Union - Telecommunication Standardization Bureau, &ldquo;Call Bearer Control (CBC) Protocol,&rdquo; .</span><span>)</span></a>
		specification. The codes can be either specific (e.g., cg/dt to
		only report the Dial Tone from the Call Progress Tones package)
		or generic (e.g., cg/* to report all the tones from the Call Progress
		Tones package) using wildcards. The &lt;h248-code> element has a
		single attribute, 'package'. The attribute 'package' provides
		the name of the Media Control Channel Framework package, compliant with the specification in the related IANA registry (e.g., "msc-ivr/1.0"), in which
		the specified codes are requested.
</dd>
</dl></blockquote><p>
	
</p>
<a name="sec:mixing-modes_mixer"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.4.1.3.5"></a><h3>5.2.4.1.3.5.&nbsp;
&lt;mixing-modes></h3>

<p>The &lt;mixing-modes> element requests information about the support for audio
	and video mixing of a Media Server, specifically a list of supported algorithms
	to mix audio and a list of supported video presentation layouts. The element MAY be present.
</p>
<p>The &lt;mixing-modes> element has no attributes.
</p>
<p>The &lt;mixing-modes> element has the following child elements:


	</p>
<blockquote class="text"><dl>
<dt>audio-mixing-modes: </dt>
<dd> Is a container representing the requested algorithms for
	audio mixing. The &lt;audio-mixing-modes> element has no attributes. The
	&lt;audio-mixing-modes> element has one child element. The child element,
	&lt;audio-mixing-mode>, contains a specific requested algorithm. It has a single
	attribute, 'package'. The attribute 'package' provides the name of the Media
	Control Channel Framework package, compliant with the specification in the related IANA registry (e.g., "msc-ivr/1.0"), for which the algorithm support is requested.
</dd>
<dt>video-mixing-modes: </dt>
<dd> Is a container representing the requested video
	presentation layouts for video mixing. The &lt;video-mixing-modes> element
	has two attributes, 'vas' and 'activespeakermix'. The 'vas' attribute is of
	type boolean with a value of 'true' indicating that the Consumer Client requires
	automatic Voice Activated Switching. The 'activespeakermix' attribute is of
	type boolean with a value of 'true' indicating that the Consumer Client requires
	an additional video stream for the loudest speaker participant without its contribution.
	The &lt;video-mixing-modes> element has one child element.
	The child element, &lt;video-mixing-mode>, contains the name of a specific video presentation
	layout. The name may refer to one of predefined video layouts defined in the XCON
	conference information data model, or to non-XCON layouts as well, as long as they are properly prefixed.
	The &lt;video-mixing-mode> element has a single attribute, 'package'. The attribute 'package' provides the
	name of the Media Control Channel Framework package, compliant with the specification
	in the related IANA registry (e.g., "msc-ivr/1.0"), for which the algorithm
	support is requested.
</dd>
</dl></blockquote><p>
	
</p>
<a name="sec:application-data_mixer"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.4.1.3.6"></a><h3>5.2.4.1.3.6.&nbsp;
&lt;application-data></h3>

<p>The &lt;application-data> element provides IVR application level data.  The element MAY be present.
</p>
<p>The &lt;application-data> element has no attributes.
</p>
<p>The &lt;application-data> element has no child elements.
</p>
<a name="sec:location_mixer"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.4.1.3.7"></a><h3>5.2.4.1.3.7.&nbsp;
&lt;location></h3>

<p>The &lt;location> element requests a civic
	location for a mixer media server.  The request makes use of the Civic Address
	Schema standardized in <a class='info' href='#RFC5139'>RFC 5139<span> (</span><span class='info'>Thomson, M. and J. Winterbottom, &ldquo;Revised Civic Location Format for Presence Information Data Format Location Object (PIDF-LO),&rdquo; February&nbsp;2008.</span><span>)</span></a> [RFC5139]. The element MAY be present.
</p>
<p>The &lt;location> element has no attributes.
</p>
<p>The &lt;location> element one child element:

	</p>
<blockquote class="text"><dl>
<dt>civicAddress: </dt>
<dd> Is a container representing the civic
	address location of the requested media server, whose representation refers to
	Section 4 of <a class='info' href='#RFC5139'>RFC 5139<span> (</span><span class='info'>Thomson, M. and J. Winterbottom, &ldquo;Revised Civic Location Format for Presence Information Data Format Location Object (PIDF-LO),&rdquo; February&nbsp;2008.</span><span>)</span></a> [RFC5139].
</dd>
</dl></blockquote><p>
	
</p>
<a name="sec:encryption_mixer"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.4.1.3.8"></a><h3>5.2.4.1.3.8.&nbsp;
&lt;encryption></h3>

<p>The &lt;encryption> element allows a Consumer client to request support for encrypting mixed RTP media streams
	using <a class='info' href='#RFC3711'>RFC 3711<span> (</span><span class='info'>Baugher, M., McGrew, D., Naslund, M., Carrara, E., and K. Norrman, &ldquo;The Secure Real-time Transport Protocol (SRTP),&rdquo; March&nbsp;2004.</span><span>)</span></a> [RFC3711].  A value of 'true' indicates that Consumer client requires support of
	<a class='info' href='#RFC3711'>RFC 3711<span> (</span><span class='info'>Baugher, M., McGrew, D., Naslund, M., Carrara, E., and K. Norrman, &ldquo;The Secure Real-time Transport Protocol (SRTP),&rdquo; March&nbsp;2004.</span><span>)</span></a> [RFC3711] for RTP.  A value of 'false' indicates that a Consumer client does not
	require support of <a class='info' href='#RFC3711'>RFC 3711<span> (</span><span class='info'>Baugher, M., McGrew, D., Naslund, M., Carrara, E., and K. Norrman, &ldquo;The Secure Real-time Transport Protocol (SRTP),&rdquo; March&nbsp;2004.</span><span>)</span></a> [RFC3711] for RTP.  The element MAY be present.  The default value
	is 'false'
</p>
<p>The &lt;encryption> element has no attributes.
</p>
<p>The &lt;application-data> element has no child elements.
</p>
<a name="sec:Media_Response"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.5"></a><h3>5.2.5.&nbsp;
Media Service Resource Response</h3>

<p>This section provides the element definitions for use in Consumer interface
		responses.  The responses are carried in the &lt;mediaResourceResponse> container
		element.
</p>
<a name="sec:mediaResourceResponse"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.5.1"></a><h3>5.2.5.1.&nbsp;
<mediaResourceResponse> element</h3>

<p>The &lt;mediaResourceResponse> element provides a container for clients
		receiving query information from an external MRB entity.
</p>
<p>The &lt;mediaResourceResponse> element has a single attribute 'status' which
		indicates the status code of the operation.  The following status codes are defined for 'status': 
</p><br /><hr class="insert" />
<a name="defn.response.statuscodes.consumer"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left" width="15%"><col align="left" width="85%">
<tr><th align="left">code</th><th align="left">description</th></tr>
<tr>
<td align="left">200</td>
<td align="left">OK</td>
</tr>
<tr>
<td align="left">400</td>
<td align="left">Syntax error</td>
</tr>
<tr>
<td align="left">408</td>
<td align="left">Unable to find Resource</td>
</tr>
<tr>
<td align="left">409</td>
<td align="left">Unable to update Resource</td>
</tr>
<tr>
<td align="left">410</td>
<td align="left">Unable to remove Resource</td>
</tr>
<tr>
<td align="left">420</td>
<td align="left">Unsupported attribute or element</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 2: &lt;response> status codes&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
		In case a new media resource request made by an AS (no action) has been accepted,
		the MS MUST reply with a &lt;mediaResourceResponse> with status code 200. The same rule applies
		whenever a request to update (action='update') or remove (action='remove') an
		existing transaction can be fulfilled by the MRB.

</p>
<p>
		A media resource request, nevertheless, may fail for several reasons. In such
		a case, the status codes defined in <a class='info' href='#defn.response.statuscodes'>Table&nbsp;1<span> (</span><span class='info'>&lt;response> status codes</span><span>)</span></a>
		must be used instead. Specifically, if the MRB fails to handle a request
		due to a syntax error in the request itself (e.g., incorrext XML,
		violation of the schema constraints or invalid values in any of the
		attributes/elements) the MRB MUST reply with a &lt;mediaResourceResponse> with status code 400.
		If a syntactically correct request fails because the request also includes any
		attribute/element the MRB doesn't understand, the MRB MUST reply with a &lt;mediaResourceResponse> with status code 420.
		If a syntactically correct request fails because the MRB couldn't find any MS able to
		fulfil the requirements presented by the AS in its request, the MRB MUST reply
		with a &lt;mediaResourceResponse> with status code 408.
		If a syntactically correct request fails because the MRB couldn't update an
		existing request according to the new requirements presented by the AS in
		its request, the MRB MUST reply with a &lt;mediaResourceResponse> with status code 409.
		If a syntactically correct request fails because the MRB couldn't remove an
		existing request and release the related resources as requested by the AS,
		the MRB MUST reply with a &lt;mediaResourceResponse> with status code 410.

</p>
<p>
		Further details on status codes 409 and 410 are presented in <a class='info' href='#sec:lease'>Section&nbsp;5.2.3<span> (</span><span class='info'>Consumer Interface Lease Mechanism</span><span>)</span></a>,
		where the leasing mechanism, together with its related scenarios, is described.

</p>
<p>The &lt;mediaResourceResponse>
		element only has &lt;response-session-info> as a
		child element.  This element is used to describe the response of a Consumer interface
		query and is covered in the following sub-section.
</p>
<a name="sec:response-session-info"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.5.1.1"></a><h3>5.2.5.1.1.&nbsp;
<response-session-info> element</h3>

<p>The &lt;response-session-info> element is included in Consumer responses. This applies to responses
		to both requests for new resources and requests to update an existing media resource session.
		The ability to change and remove an existing media resource
		session is described in more detail in <a class='info' href='#sec:lease'>Section&nbsp;5.2.3<span> (</span><span class='info'>Consumer Interface Lease Mechanism</span><span>)</span></a>.
		The element MAY be present: specifically, the element MUST be included in case the request was
		successful, while it would not appear otherwise (e.g., in case the request ended up
		with an error).
		
</p>
<p>The &lt;response-session-info> element has no attributes.
</p>
<p>The &lt;response-session-info> element has the following child elements:


		</p>
<blockquote class="text"><dl>
<dt>session-id: </dt>
<dd> is a unique identifier that explicitly references an existing media
		resource session on the MRB.  The identifier is included to update the existing session and is
		described in more detail in <a class='info' href='#sec:lease'>Section&nbsp;5.2.3<span> (</span><span class='info'>Consumer Interface Lease Mechanism</span><span>)</span></a>.
</dd>
<dt>seq: </dt>
<dd> is used in association with the &lt;session-id> element in a subsequent
		request to update an existing media resource session on an MRB.  The &lt;seq> number is incremented
		from its original value returned in response to the initial request for media resources.  More information
		its use is provided in <a class='info' href='#sec:lease'>Section&nbsp;5.2.3<span> (</span><span class='info'>Consumer Interface Lease Mechanism</span><span>)</span></a>.
</dd>
<dt>expires: </dt>
<dd> includes the number of seconds that the media resources are reserved as part of this
		interaction.  If the lease is not refreshed before expiry, the MRB will re-claim the resources and they will
		no longer be guaranteed.  It is RECOMMENDED that a minimum value of 300 seconds be used for the value 
		of the 'expires' attribute.  It is also RECOMMENDED that a Consumer client refresh the lease at an
		interval that is not too close to the expiry time.  A value of 80% of the timeout period could be used.
   		For example, if the timeout period is 300 seconds, the Server would
   		refresh the transaction at 240 seconds.  More information on its use is provided in <a class='info' href='#sec:lease'>Section&nbsp;5.2.3<span> (</span><span class='info'>Consumer Interface Lease Mechanism</span><span>)</span></a>.
</dd>
<dt>media-server-address: </dt>
<dd> is the SIP URI to reach the MS handling the requested media resource.
</dd>
</dl></blockquote><p>
		
</p>
<a name="sec:In_Line"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
In-Line MRB Interface</h3>

<p>An entity acting as an In-Line MRB can act in one of two roles for a request, as introduced
		in <a class='info' href='#sec:Inline'>Section&nbsp;4.2<span> (</span><span class='info'>In-Line MRB</span><span>)</span></a>.  The following sub sections provide details for using In-Line Unaware
		MRB Mode (IUMM) of operation and In-Line Aware MRB Mode (IAMM) of operation.
</p>
<a name="sec:IUMM"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3.1"></a><h3>5.3.1.&nbsp;
In-line Unaware MRB Mode</h3>

<p>It should be noted that the introduction of an MRB entity into the network, as specified in this document, 
		requires interfaces to be implemented by those requesting media server resources (for example an application 
		server).  This applies when using both the Consumer interface as discussed in <a class='info' href='#sec:http_Consumer'>Section&nbsp;5.2.1<span> (</span><span class='info'>HTTP Consumer Interface Usage</span><span>)</span></a>
		and IAMM <a class='info' href='#sec:sip_Consumer'>Section&nbsp;5.2.2<span> (</span><span class='info'>SIP Consumer Interface Usage</span><span>)</span></a>. Nevertheless, an MRB is conceived to also
		be able to act in a client unaware mode when it is deployed into the network. 
		This allows any SIP compliant client entity, as defined by <a class='info' href='#RFC3261'>RFC 3261<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3261] and its
		extensions, to send requests to an MRB which in turn will select an appropriate media server based on
		knowledge of media server resources it currently has available transparently to the client entity.
		Mechanisms used to connect to media servers are detailed in the Media Channel Control 
		Framework <a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; October&nbsp;2009.</span><span>)</span></a>.  Using an MRB in this mode allows for
		easy migration of current applications and services that are unaware of the MRB concept and would simply require
		a configuration change resulting in the MRB being set as a SIP outbound proxy for clients requiring media services.
	      	Any client of media services wishing to take advantage of the advanced techniques detailed in this document
		when using In-line mode would implement IAMM which is covered in <a class='info' href='#sec:IAMM'>Section&nbsp;5.3.2<span> (</span><span class='info'>In-line Aware MRB Mode</span><span>)</span></a>.
		
</p>
<a name="sec:IAMM"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3.2"></a><h3>5.3.2.&nbsp;
In-line Aware MRB Mode</h3>

<p>An In-Line Aware Mode MRB (IAMM) is one that complies to the extended functionality provided in this section. 
		A client entity, such as an application server, wishing to use advanced MRB functionality can provide additional
		contextual information to an MRB.  This information is identical to that used in the Consumer interface in
		<a class='info' href='#sec:Res_Cons'>Section&nbsp;5.2<span> (</span><span class='info'>Media Service Resource Consumer Interface</span><span>)</span></a> with the only difference being the underlying transport mechanism of the
		contextual information, as specified by the 'application/mrb-consumer+xml' payload in
		<a class='info' href='#sec:consumer_xml'>Section&nbsp;8<span> (</span><span class='info'>Media Service Resource Consumer Interface XML Schema</span><span>)</span></a>. A client of an IAMM, as anticipated in <a class='info' href='#sec:sip_Consumer'>Section&nbsp;5.2.2<span> (</span><span class='info'>SIP Consumer Interface Usage</span><span>)</span></a>, uses
		SIP signalling to convey the 'application/mrb-consumer+xml' payload to the IAMM, unlike the Consumer interface
		presented in <a class='info' href='#sec:http_Consumer'>Section&nbsp;5.2.1<span> (</span><span class='info'>HTTP Consumer Interface Usage</span><span>)</span></a>, which instead uses HTTP as a transport. 
		A client of an IAMM requiring media services, as well as creating a standard SIP complaint request, MUST use
		the following steps (also presented in <a class='info' href='#sec:sip_Consumer'>Section&nbsp;5.2.2<span> (</span><span class='info'>SIP Consumer Interface Usage</span><span>)</span></a>) to ensure that the request is dealt with appropriately:


			</p>
<ul class="text">
<li>The client of the IAMM constructs a SIP INVITE request to connect to a Media
				Server as detailed in the Media Channel Control 
				Framework <a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; October&nbsp;2009.</span><span>)</span></a> with one exception.
</li>
<li>The client of the IAMM includes a MIME content type of multipart/mixed as defined in
				<a class='info' href='#RFC2046'>RFC 2046<span> (</span><span class='info'>Freed, N. and N. Borenstein, &ldquo;Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types,&rdquo; November&nbsp;1996.</span><span>)</span></a> [RFC2046].  As part of this mixed payload, the client MUST
				at least include a content-type of
		       		type 'application/sdp' and a content type of type 'application/mrb-consumer+xml'.  The part of
				type application/sdp represents the media server connection details and MUST adhere to the
				Media Channel Control Framework <a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; October&nbsp;2009.</span><span>)</span></a>.  The
				part of type 'application/mrb-consumer+xml' represents the IAMM contextual information and MUST
				adhere to the schema defined in <a class='info' href='#sec:consumer_xml'>Section&nbsp;8<span> (</span><span class='info'>Media Service Resource Consumer Interface XML Schema</span><span>)</span></a>.
</li>
<li>Once the SIP INVITE request is constructed, it is sent to the recipient as
				per <a class='info' href='#RFC3261'>RFC 3261<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3261].
</li>
</ul><p>
			
</p>
<p>On receiving a SIP INVITE request containing the multipart mixed payload as specified previously, the IAMM will
	complete a number of steps to fulfil the request.  It will:


		</p>
<ul class="text">
<li>Extract the multipart MIME payload from the SIP INVITE request.  It will then use the contextual
			information provided by the client in the 'application/mrb-consumer+xml' part to determine which media
			server should be selected to service the request.
</li>
<li>Extract the 'application/sdp' part from the payload and use it to populate a new SIP INVITE
			request for connecting the client to the selected media server, as defined in the
			Media Channel Control Framework <a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; October&nbsp;2009.</span><span>)</span></a>.  The
			IAMM acts as a Back-to-Back-UA (B2BUA) that extracts the 'application/mrb-consumer+xml' information
			from the SIP INVITE request and then forwards to the selected Media Server.
</li>
</ul><p>		
		
</p>
<a name="sec:Examples"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Examples</h3>

<p>This section provides examples of both the Publish and Consumer interfaces. For what concerns the
	Consumer interface, both Query and Inline modes are addressed.
</p>
<p>
		Note that due to RFC formatting conventions, this section often splits
		HTTP, SIP/SDP and CFW across lines whose content would exceed 72 characters.
		A backslash character marks where this line folding has taken place.  This
		backslash and its trailing CRLF and whitespace would not appear in the actual
		protocol contents.  Besides, also note that the indentation of the XML
		content is only provided for readability: actual messages will follow strict
		XML syntax, which allows for, but does not require, indentation.
	
</p>
<a name="sec:ExPub"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
Publish Example</h3>

<p>
		   The following example assumes a control channel has been established
		   and synced as described in the Media Control Channel Framework
		   (<a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; October&nbsp;2009.</span><span>)</span></a>).
	   
</p>
<p>
			<a class='info' href='#fig-expub'>Figure&nbsp;9<span> (</span><span class='info'>Publish Example: Sequence Diagram</span><span>)</span></a> shows the subscription/notification mechanism
			the Publish interface is based on, as defined in <a class='info' href='#sec:MS_Pub'>Section&nbsp;5.1<span> (</span><span class='info'>Media Server Resource Publish Interface</span><span>)</span></a>.
			The MRB subscribes for information at the MS (message A1.), and the MS accepts the subscription (A2).
			Notifications are triggered by the MS (A3.) and acknowledged by the MRB (A4.).
	   
</p>
<p>
				<br /><hr class="insert" />
<a name="fig-expub"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

        MRB                                            MS
         |                                              |
         | A1. CONTROL (MRB subscription)               |
         |---------------------------------------------&gt;|
         |                                   A2. 200 OK |
         |&lt;---------------------------------------------|
         |                                              |
         .                                              .
         .                                              .
         |                                              |
         |                                              |--+ collect
         |                                              |  | up-to-date
         |                                              |&lt;-+ info
         |               B1. CONTROL (MRB notification) |
         |&lt;---------------------------------------------|
         | B2. 200 OK                                   |
         |---------------------------------------------&gt;|
         |                                              |
         .                                              .
         .                                              .

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;9: Publish Example: Sequence Diagram&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

			
</p>
<p>
				The rest of this section includes a full dump of the messages
				associated with the previous sequence diagram, specifically:
			
</p>
<p>
			</p>
<ol class="text">
<li>the subscription (A1), in an &lt;mrbrequest&gt; (CFW CONTROL);
</li>
<li>the MS accepting the subscription (A2), in an &lt;mrbresponse&gt; (CFW 200);
</li>
<li>a notification (A3), in a &lt;mrbnotification&gt; (CFW CONTROL event);
</li>
<li>the ack to the notification (A4), in a framework level 200 message (CFW 200);
</li>
</ol><p>
			
</p>
<p>
				</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

A1. MRB -&gt; MS (CONTROL, publish request)
----------------------------------------
CFW lidc30BZObiC CONTROL
Control-Package: mrb-publish/1.0
Content-Type: application/mrb-publish+xml
Content-Length: 337

&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;
&lt;mrbpublish version="1.0" xmlns="urn:ietf:params:xml:ns:mrb-publish"&gt;
    &lt;mrbrequest&gt;
        &lt;subscription action="create" seqnumber="1" id="p0T65U"&gt;
            &lt;expires&gt;600&lt;/expires&gt;
            &lt;frequency&gt;20&lt;/frequency&gt;
        &lt;/subscription&gt;
    &lt;/mrbrequest&gt;
&lt;/mrbpublish&gt;



A2. MRB &lt;- MS (200 to CONTROL, request accepted)
------------------------------------------------
CFW lidc30BZObiC 200
Timeout: 10
Content-Type: application/mrb-publish+xml
Content-Length: 139

&lt;mrbpublish version="1.0" xmlns="urn:ietf:params:xml:ns:mrb-publish"&gt;
	&lt;mrbresponse status="200" reason="OK: Request accepted"/&gt;
&lt;/mrbpublish&gt;



B1. MRB &lt;- MS (CONTROL, event notification from MS)
---------------------------------------------------
CFW 03fff52e7b7a CONTROL
Control-Package: mrb-publish/1.0
Content-Type: application/mrb-publish+xml
Content-Length: 4242

&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;
&lt;mrbpublish version="1.0" xmlns="urn:ietf:params:xml:ns:mrb-publish" \
            xmlns:ca="urn:ietf:params:xml:ns:pidf:geopriv10:civicAddr"&gt;
    &lt;mrbnotification seqnumber="1" id="QQ6J3c"&gt;
        &lt;media-server-id&gt;a1b2c3d4&lt;/media-server-id&gt;
        &lt;supported-packages&gt;
            &lt;package name="msc-ivr/1.0"/&gt;
            &lt;package name="msc-mixer/1.0"/&gt;
            &lt;package name="mrb-publish/1.0"/&gt;
            &lt;package name="msc-example-pkg/1.0"/&gt;
        &lt;/supported-packages&gt;
        &lt;active-rtp-sessions&gt;
            &lt;rtp-codec name="audio/basic"&gt;
                &lt;decoding&gt;10&lt;/decoding&gt;
                &lt;encoding&gt;20&lt;/encoding&gt;
            &lt;/rtp-codec&gt;
        &lt;/active-rtp-sessions&gt;
        &lt;active-mixer-sessions&gt;
            &lt;active-mix conferenceid="7cfgs43"&gt;
                &lt;rtp-codec name="audio/basic"&gt;
                    &lt;decoding&gt;3&lt;/decoding&gt;
                    &lt;encoding&gt;3&lt;/encoding&gt;
                &lt;/rtp-codec&gt;
            &lt;/active-mix&gt;
        &lt;/active-mixer-sessions&gt;
        &lt;non-active-rtp-sessions&gt;
            &lt;rtp-codec name="audio/basic"&gt;
                &lt;decoding&gt;50&lt;/decoding&gt;
                &lt;encoding&gt;40&lt;/encoding&gt;
            &lt;/rtp-codec&gt;
        &lt;/non-active-rtp-sessions&gt;
        &lt;non-active-mixer-sessions&gt;
            &lt;non-active-mix available="15"&gt;
                &lt;rtp-codec name="audio/basic"/&gt;
            &lt;/non-active-mix&gt;
        &lt;/non-active-mixer-sessions&gt;
        &lt;media-server-status&gt;active&lt;/media-server-status&gt;
        &lt;supported-codecs&gt;
            &lt;supported-codecs name="audio/basic"&gt;
                &lt;supported-codec-package name="msc-ivr/1.0"&gt;
                    &lt;supported-actions&gt;encoding&lt;/supported-actions&gt;
                    &lt;supported-actions&gt;decoding&lt;/supported-actions&gt;
                &lt;/supported-codec-package&gt;
                &lt;supported-codec-package name="msc-mixer/1.0"&gt;
                    &lt;supported-actions&gt;encoding&lt;/supported-actions&gt;
                    &lt;supported-actions&gt;decoding&lt;/supported-actions&gt;
                &lt;/supported-codec-package&gt;
            &lt;/supported-codecs&gt;
        &lt;/supported-codecs&gt;
        &lt;application-data&gt;Testbed Prototype&lt;/application-data&gt;
        &lt;file-formats&gt;
            &lt;supported-format name="audio/x-wav"&gt;
                &lt;supported-file-package/&gt;
            &lt;/supported-format&gt;
        &lt;/file-formats&gt;
        &lt;max-prepared-duration&gt;
            &lt;max-time max-time-seconds="3600"&gt;
                &lt;max-time-package&gt;msc-ivr&lt;/max-time-package&gt;
            &lt;/max-time&gt;
        &lt;/max-prepared-duration&gt;
        &lt;dtmf-support&gt;
            &lt;detect&gt;
                &lt;dtmf-type package="msc-ivr/1.0" name="RFC4733"/&gt;
                &lt;dtmf-type package="msc-mixer/1.0" name="RFC4733"/&gt;
            &lt;/detect&gt;
            &lt;generate&gt;
                &lt;dtmf-type package="msc-ivr/1.0" name="RFC4733"/&gt;
                &lt;dtmf-type package="msc-mixer/1.0" name="RFC4733"/&gt;
            &lt;/generate&gt;
            &lt;passthrough&gt;
                &lt;dtmf-type package="msc-ivr/1.0" name="RFC4733"/&gt;
                &lt;dtmf-type package="msc-mixer/1.0" name="RFC4733"/&gt;
            &lt;/passthrough&gt;
        &lt;/dtmf-support&gt;
        &lt;mixing-modes&gt;
            &lt;audio-mixing-modes&gt;
                &lt;audio-mixing-mode package="msc-ivr/1.0"&gt;
                     nbest
                &lt;/audio-mixing-mode&gt;
            &lt;/audio-mixing-modes&gt;
            &lt;video-mixing-modes activespeakermix="true" vas="true"&gt;
                &lt;video-mixing-mode package="msc-mixer/1.0"&gt;
                     single-view
                &lt;/video-mixing-mode&gt;
                &lt;video-mixing-mode package="msc-mixer/1.0"&gt;
                     dual-view
                &lt;/video-mixing-mode&gt;
                &lt;video-mixing-mode package="msc-mixer/1.0"&gt;
                     dual-view-crop
                &lt;/video-mixing-mode&gt;
                &lt;video-mixing-mode package="msc-mixer/1.0"&gt;
                     dual-view-2x1
                &lt;/video-mixing-mode&gt;
                &lt;video-mixing-mode package="msc-mixer/1.0"&gt;
                     dual-view-2x1-crop
                &lt;/video-mixing-mode&gt;
                &lt;video-mixing-mode package="msc-mixer/1.0"&gt;
                     quad-view
                &lt;/video-mixing-mode&gt;
                &lt;video-mixing-mode package="msc-mixer/1.0"&gt;
                     multiple-5x1
                &lt;/video-mixing-mode&gt;
                &lt;video-mixing-mode package="msc-mixer/1.0"&gt;
                     multiple-3x3
                &lt;/video-mixing-mode&gt;
                &lt;video-mixing-mode package="msc-mixer/1.0"&gt;
                     multiple-4x4
                &lt;/video-mixing-mode&gt;
            &lt;/video-mixing-modes&gt;
        &lt;/mixing-modes&gt;
        &lt;supported-tones&gt;
            &lt;supported-country-codes&gt;
                &lt;country-code package="msc-ivr/1.0"&gt;GB&lt;/country-code&gt;
                &lt;country-code package="msc-ivr/1.0"&gt;IT&lt;/country-code&gt;
                &lt;country-code package="msc-ivr/1.0"&gt;US&lt;/country-code&gt;
            &lt;/supported-country-codes&gt;
            &lt;supported-h248-codes&gt;
                &lt;h248-code package="msc-ivr/1.0"&gt;cg/*&lt;/h248-code&gt;
                &lt;h248-code package="msc-ivr/1.0"&gt;biztn/ofque&lt;/h248-code&gt;
                &lt;h248-code package="msc-ivr/1.0"&gt;biztn/erwt&lt;/h248-code&gt;
                &lt;h248-code package="msc-mixer/1.0"&gt;conftn/*&lt;/h248-code&gt;
            &lt;/supported-h248-codes&gt;
        &lt;/supported-tones&gt;
        &lt;streaming-modes&gt;
            &lt;stream-mode package="msc-ivr/1.0" name="HTTP"/&gt;
        &lt;/streaming-modes&gt;
        &lt;asr-tts-support&gt;
            &lt;asr-support&gt;
                &lt;language xml:lang="en"/&gt;
            &lt;/asr-support&gt;
            &lt;tts-support&gt;
                &lt;language xml:lang="en"/&gt;
            &lt;/tts-support&gt;
        &lt;/asr-tts-support&gt;
        &lt;vxml-support support="false"&gt;
            &lt;vxml-mode package="msc-ivr/1.0"/&gt;
        &lt;/vxml-support&gt;
        &lt;media-server-location&gt;
           &lt;ca:civicAddress xml:lang="it"&gt;
             &lt;ca:country&gt;IT&lt;/ca:country&gt;
             &lt;ca:A1&gt;Campania&lt;/ca:A1&gt;
             &lt;ca:A3&gt;Napoli&lt;/ca:A3&gt;
             &lt;ca:A6&gt;Via Claudio&lt;/ca:A6&gt;
             &lt;ca:HNO&gt;21&lt;/ca:HNO&gt;
             &lt;ca:LMK&gt;University of Napoli Federico II&lt;/ca:LMK&gt;
             &lt;ca:NAM&gt;Dipartimento di Informatica e Sistemistica&lt;/ca:NAM&gt;
             &lt;ca:PC&gt;80210&lt;/ca:PC&gt;
           &lt;/ca:civicAddress&gt;
        &lt;/media-server-location&gt;
        &lt;label&gt;TestbedPrototype-01&lt;/label&gt;
        &lt;media-server-address&gt;
                 sip:MediaServer@ms.example.com:5080
        &lt;/media-server-address&gt;
        &lt;encryption&gt;false&lt;/encryption&gt;
    &lt;/mrbnotification&gt;
&lt;/mrbpublish&gt;



B2. MRB -&gt; MS (200 to CONTROL)
------------------------------
CFW 03fff52e7b7a 200

</pre></div><p>

			
</p>
<a name="sec:ExCons"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2"></a><h3>6.2.&nbsp;
Consumer Example</h3>

<p>
		As specified in <a class='info' href='#sec:Res_Cons'>Section&nbsp;5.2<span> (</span><span class='info'>Media Service Resource Consumer Interface</span><span>)</span></a>, the Consumer interface
		can be involved in two different modes: Query and Inline-aware. When in Query mode,
		Consumer messages are transported in HTTP messages: an example of such an
		approach is presented in <a class='info' href='#sec:ExConsQuery'>Section&nbsp;6.2.1<span> (</span><span class='info'>Query Example</span><span>)</span></a>. When in
		Inline-aware mode, messages are transported as part of SIP negotiations:
		an example of such an approach is presented in <a class='info' href='#sec:ExConsIAMM'>Section&nbsp;6.2.2<span> (</span><span class='info'>IAMM Example</span><span>)</span></a>.
		
</p>
<a name="sec:ExConsQuery"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2.1"></a><h3>6.2.1.&nbsp;
Query Example</h3>

<p>
		   The following example assumes the interested AS already knows the
		   HTTP URL where an MRB is listening for Consumer messages.
	   
</p>
<p>
			<a class='info' href='#fig-excons'>Figure&nbsp;10<span> (</span><span class='info'>Consumer Example (Query): Sequence Diagram</span><span>)</span></a> shows the HTTP-based transaction between the AS and
			the MRB. The AS sends a consumer request as payload of an HTTP POST message (1.),
			and the MRB provides an answer in an HTTP 200 OK message (2.).
	   
</p>
<p>
				<br /><hr class="insert" />
<a name="fig-excons"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

    AS                                             MRB
     |                                              |
     | 1. HTTP POST (Consumer request)              |
     |---------------------------------------------&gt;|
     |                                              |
     |                                              |
     |                                              |--+ Parse request
     |                                              |  | and see if any
     |                                              |&lt;-+ MS applies
     |                                              |
     |                2. 200 OK (Consumer response) |
     |&lt;---------------------------------------------|
     |                                              |
     |--+ Parse response and                        |
     |  | start session (SIP/COMEDIA/CFW)           |
     |&lt;-+ with MS reported by MRB                   |
     |                                              |
     .                                              .
     .                                              .

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;10: Consumer Example (Query): Sequence Diagram&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

			
</p>
<p>
				The rest of this section includes a full dump of the messages
				associated with the previous sequence diagram, specifically:
			
</p>
<p>
			</p>
<ol class="text">
<li>the Consumer request (1), in a &lt;mediaResourceRequest&gt; (HTTP POST, Content-Type 'application/mrb-consumer+xml');
</li>
<li>the Consumer response (2), in an &lt;mediaResourceResponse&gt; (HTTP 200 OK, Content-Type 'application/mrb-consumer+xml').
</li>
</ol><p>
			
</p>
<p>
				</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

1. AS -&gt; MRB (HTTP POST, Consumer request)
------------------------------------------
POST /Mrb/Consumer HTTP/1.1
Content-Length: 870
Content-Type: application/mrb-consumer+xml
Host: mrb.example.net:8080
Connection: Keep-Alive
User-Agent: Apache-HttpClient/4.0.1 (java 1.5)

&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;
&lt;mrbconsumer version="1.0" xmlns="urn:ietf:params:xml:ns:mrb-consumer"&gt;
    &lt;mediaResourceRequest&gt;
        &lt;generalInfo&gt;
            &lt;packages&gt;
                &lt;package&gt;msc-ivr/1.0&lt;/package&gt;
                &lt;package&gt;msc-mixer/1.0&lt;/package&gt;
            &lt;/packages&gt;
        &lt;/generalInfo&gt;
        &lt;ivrInfo&gt;
            &lt;ivr-sessions&gt;
                &lt;rtp-codec name="audio/basic"&gt;
                    &lt;decoding&gt;10&lt;/decoding&gt;
                    &lt;encoding&gt;10&lt;/encoding&gt;
                &lt;/rtp-codec&gt;
            &lt;/ivr-sessions&gt;
            &lt;file-formats&gt;
                &lt;required-format name="audio/x-wav"/&gt;
            &lt;/file-formats&gt;
            &lt;streaming-modes&gt;
                &lt;stream-mode package="msc-ivr/1.0" name="HTTP"/&gt;
            &lt;/streaming-modes&gt;
        &lt;/ivrInfo&gt;
    &lt;/mediaResourceRequest&gt;
&lt;/mrbconsumer&gt;


2. AS &lt;- MRB (200 to POST, Consumer response)
---------------------------------------------
HTTP/1.1 200 OK
X-Powered-By: Servlet/2.5
Server: Sun GlassFish Communications Server 1.5
Content-Type: application/mrb-consumer+xml;charset=ISO-8859-1
Content-Length: 506
Date: Mon, 08 Feb 2010 16:53:34 GMT

&lt;?xml version="1.0" encoding="UTF-8" standalone="yes"?&gt;
&lt;mrbconsumer version="1.0" xmlns="urn:ietf:params:xml:ns:mrb-consumer" &gt;
    &lt;mediaResourceResponse reason="Resource found" status="200"&gt;
        &lt;response-session-info&gt;
            &lt;session-id&gt;0GX1jCYZ8WBa&lt;/session-id&gt;
            &lt;seq&gt;1&lt;/seq&gt;
            &lt;expires&gt;3600&lt;/expires&gt;
            &lt;media-server-address&gt;
                sip:MediaServer@ms.example.com:5080
            &lt;/media-server-address&gt;
        &lt;/response-session-info&gt;
    &lt;/mediaResourceResponse&gt;
&lt;/mrbconsumer&gt;

</pre></div><p>

			
</p>
<p>
				The rest of the scenario is omitted for brevity. After having received
				the 'mediaResourceResponse', the AS has the address of a MS able to
				fulfil its media requirements, and can start a Control Dialog with it.
			
</p>
<a name="sec:ExConsIAMM"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2.2"></a><h3>6.2.2.&nbsp;
IAMM Example</h3>

<p>
		   The following example assumes the interested AS already knows the
		   SIP URI where an MRB is listening as an UAS.
	   
</p>
<p>
			<a class='info' href='#fig-excons'>Figure&nbsp;10<span> (</span><span class='info'>Consumer Example (Query): Sequence Diagram</span><span>)</span></a> shows the SIP-based transactions involving the AS,
			the MRB and the MS that will be chosen eventually. The diagram is more complex than before.
			This is basically a scenario envisaging the MRB as a B2BUA. The AS sends a SIP
			INVITE (1.), containing both a CFW-related SDP and a Consumer request (multipart body).
			The MRB sends a provisional response to the AS (2.) and starts working on the request.
			First of all, it makes use of the Consumer request from the AS to determine which MS
			should be exploited. Once the right MS has been chosen, the MRB sends a new SIP INVITE
			to this MS by just including the SDP part of the original request (3.). The MS
			negotiates this INVITE as specified in <a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; October&nbsp;2009.</span><span>)</span></a>
			(4., 5., 6.), providing the MRB with its own CFW-related SDP. The MRB replies to the
			original AS INVITE preparing a SIP 200 OK with another multipart body (7.): this
			multipart body includes the Consumer response used by the MRB to determine the right MS
			and the SDP returned by the MS in 5. The AS finally acknowledges the 200 OK (8.), and
			can start a CFW connection towards the MS.
	   
</p>
<p>
			Please note that, to ease the reading of the protocol contents, a simple '=_Part' is
			used whenever a boundary for a 'multipart/mixed' payload is provided, instead of
			the actual boundary that would be inserted in the SIP messages.
	   
</p>
<p>
				<br /><hr class="insert" />
<a name="fig-exiamm"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

AS                  MRB                          MS
 |                       |                           |
 | 1. INVITE             |                           |
 | (multipart/mixed)     |                           |
 |----------------------&gt;|                           |
 |       2. 100 (Trying) |                           |
 |&lt;----------------------|                           |
 |                       |--+ Extract SDP and        |
 |                       |  | MRB payloads; handle   |
 |                       |&lt;-+ Consumer request to    |
 |                       |    know MS to use         |
 |                       |                           |
 |                       | 3. INVITE                 |
 |                       | (only copy SDP from 1.)   |
 |                       |--------------------------&gt;|
 |                       |           4. 100 (Trying) |
 |                       |&lt;--------------------------|
 |                       |                           |--+ Negotiate
 |                       |                           |  | CFW Control
 |                       |                           |&lt;-+ Channel
 |                       |                 5. 200 OK |
 |                       |&lt;--------------------------|
 |                       | 6. ACK                    |
 |                       |--------------------------&gt;|
 |        Prepare new +--|                           |
 |       payload with |  |                           |
 |    SDP from MS and +-&gt;|                           |
 |     Consumer reply    |                           |
 |                       |                           |
 |             7. 200 OK |                           |
 |     (multipart/mixed) |                           |
 |&lt;----------------------|                           |
 | 8. ACK                |                           |
 |----------------------&gt;|                           |
 |                       |                           |
 |--+ Read Cons. reply   |                           |
 |  | and use SDP to     |                           |
 |&lt;-+ create CFW Chn.    |                           |
 |                       |                           |
 |                                                   |
 |&lt;&lt;############## TCP CONNECTION #################&gt;&gt;|
 |                                                   |
 | CFW SYNC                                          |
 |++++++++++++++++++++++++++++++++++++++++++++++++++&gt;|
 |                                                   |
 .                       .                           .
 .                       .                           .

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;11: Consumer Example (IAMM): Sequence Diagram&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

			
</p>
<p>
				The rest of this section includes an almost full dump of the messages
				associated with the previous sequence diagram. Only the relevant SIP messages
				are shown (both the INVITEs and the 200 OKs), and only the relevant headers
				are preserved for brevity (Content-Type and multipart-related information).
				Specifically:
			
</p>
<p>
			</p>
<ol class="text">
<li>the original INVITE (1), containing both a CFW-related SDP (COMEDIA information
				to negotiate a new Control Channel) and a Consumer &lt;mediaResourceRequest&gt;;
</li>
<li>the INVITE sent by the MRB to the MS as a B2BUA (3.), containing only the
				CFW-related SDP from the original INVITE;.
</li>
<li>the 200 OK sent by the MS back to the MRB (5.), to complete the CFW-related negotiation (SDP only);
</li>
<li>the 200 OK sent by the MRB back to the AS in response to the original INVITE (7.),
				containing both the CFW-related information sent by the MS and a Consumer
				&lt;mediaResourceRequest&gt; documenting the MRB's decision to use that MS.
</li>
</ol><p>
			
</p>
<p>
				</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

1. AS -&gt; MRB (INVITE multipart/mixed)
-------------------------------------
   [..]
   Content-Type: multipart/mixed;boundary="=_Part"

   =_Part
   Content-Type: application/sdp

   v=0
   o=- 2890844526 2890842807 IN IP4 as.example.com
   s=MediaCtrl
   c=IN IP4 as.example.com
   t=0 0
   m=application 48035 TCP cfw
   a=connection:new
   a=setup:active
   a=cfw-id:vF0zD4xzUAW9
   a=ctrl-package:msc-mixer/1.0
   a=ctrl-package:msc-ivr/1.0

   =_Part
   Content-Type: application/mrb-consumer+xml

   &lt;mrbconsumer version="1.0" \
                xmlns="urn:ietf:params:xml:ns:mrb-consumer"&gt;
    &lt;mediaResourceRequest&gt;
        &lt;generalInfo&gt;
            &lt;packages&gt;
                &lt;package&gt;msc-ivr/1.0&lt;/package&gt;
                &lt;package&gt;msc-mixer/1.0&lt;/package&gt;
            &lt;/packages&gt;
        &lt;/generalInfo&gt;
        &lt;ivrInfo&gt;
            &lt;ivr-sessions&gt;
                &lt;rtp-codec name="audio/basic"&gt;
                    &lt;decoding&gt;10&lt;/decoding&gt;
                    &lt;encoding&gt;10&lt;/encoding&gt;
                &lt;/rtp-codec&gt;
            &lt;/ivr-sessions&gt;
            &lt;file-formats&gt;
                &lt;required-format name="audio/x-wav"/&gt;
            &lt;/file-formats&gt;
            &lt;streaming-modes&gt;
                &lt;stream-mode package="msc-ivr/1.0" name="HTTP"/&gt;
            &lt;/streaming-modes&gt;
        &lt;/ivrInfo&gt;
    &lt;/mediaResourceRequest&gt;
   &lt;/mrbconsumer&gt;

   =_Part



3. MRB -&gt; MS (INVITE sdp only)
------------------------------
   [..]
   Content-Type: application/sdp

   v=0
   o=- 2890844526 2890842807 IN IP4 as.example.com
   s=MediaCtrl
   c=IN IP4 as.example.com
   t=0 0
   m=application 48035 TCP cfw
   a=connection:new
   a=setup:active
   a=cfw-id:vF0zD4xzUAW9
   a=ctrl-package:msc-mixer/1.0
   a=ctrl-package:msc-ivr/1.0



5. MRB &lt;- MS (200 OK sdp)
-------------------------
   [..]
   Content-Type: application/sdp

   v=0
   o=lminiero 2890844526 2890842808 IN IP4 ms.example.net
   s=MediaCtrl
   c=IN IP4 ms.example.net
   t=0 0
   m=application 7575 TCP cfw
   a=connection:new
   a=setup:passive
   a=cfw-id:vF0zD4xzUAW9
   a=ctrl-package:msc-mixer/1.0
   a=ctrl-package:msc-ivr/1.0
   a=ctrl-package:mrb-publish/1.0
   a=ctrl-package:msc-example-pkg/1.0



7. AS &lt;- MRB (200 OK multipart/mixed)
-------------------------------------
   [..]
   Content-Type: multipart/mixed;boundary="=_Part"

   =_Part
   Content-Type: application/sdp

   v=0
   o=lminiero 2890844526 2890842808 IN IP4 ms.example.net
   s=MediaCtrl
   c=IN IP4 ms.example.net
   t=0 0
   m=application 7575 TCP cfw
   a=connection:new
   a=setup:passive
   a=cfw-id:vF0zD4xzUAW9
   a=ctrl-package:msc-mixer/1.0
   a=ctrl-package:msc-ivr/1.0
   a=ctrl-package:mrb-publish/1.0
   a=ctrl-package:msc-example-pkg/1.0

   =_Part
   Content-Type: application/mrb-consumer+xml

   &lt;mrbconsumer version="1.0" \
                xmlns="urn:ietf:params:xml:ns:mrb-consumer"&gt;
    &lt;mediaResourceResponse reason="Resource found" status="200"&gt;
        &lt;response-session-info&gt;
            &lt;session-id&gt;q79OYY0q4M6M&lt;/session-id&gt;
            &lt;seq&gt;1&lt;/seq&gt;
            &lt;expires&gt;3600&lt;/expires&gt;
            &lt;media-server-address&gt;
                  sip:MediaServer@ms.example.net
            &lt;/media-server-address&gt;
        &lt;/response-session-info&gt;
    &lt;/mediaResourceResponse&gt;
   &lt;/mrbconsumer&gt;

   =_Part

</pre></div><p>

			
</p>
<p>
				The continuation of the scenario (the AS connecting to the MS to start the Control Channel, the SYNC message, etc.)
				are omitted for brevity.
			
</p>
<a name="sec:publisher_xml"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Media Service Resource Publisher Interface XML Schema</h3>

<p>This section gives the XML Schema Definition
   [W3C.REC-xmlschema-1-20041028], [W3C.REC-xmlschema-2-20041028] of the
   "application/mrb-publish+xml" format.
</p><br /><hr class="insert" />
<a name="fig:publisher_xml"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;xsd:schema targetNamespace="urn:ietf:params:xml:ns:mrb-publish"
 elementFormDefault="qualified" blockDefault="#all"
 xmlns="urn:ietf:params:xml:ns:mrb-publish"
 xmlns:fw="urn:ietf:params:xml:ns:control:framework-attributes"
 xmlns:ca="urn:ietf:params:xml:ns:pidf:geopriv10:civicAddr"
 xmlns:xsd="http://www.w3.org/2001/XMLSchema"&gt;

 &lt;xsd:annotation&gt;
  &lt;xsd:documentation&gt;
   IETF MediaCtrl MRB 1.0

   This is the schema of the IETF MediaCtrl MRB package.

   The schema namespace is urn:ietf:params:xml:ns:mrb-publish

  &lt;/xsd:documentation&gt;
 &lt;/xsd:annotation&gt;


 &lt;!--
  #############################################################

  SCHEMA IMPORTS

  #############################################################
 --&gt;

 &lt;xsd:import namespace="http://www.w3.org/XML/1998/namespace"
  schemaLocation="http://www.w3.org/2001/xml.xsd"&gt;
  &lt;xsd:annotation&gt;
   &lt;xsd:documentation&gt;
    This import brings in the XML attributes for
    xml:base, xml:lang, etc
   &lt;/xsd:documentation&gt;
  &lt;/xsd:annotation&gt;
 &lt;/xsd:import&gt;

&lt;xsd:import
  namespace="urn:ietf:params:xml:ns:control:framework-attributes"
  schemaLocation="framework.xsd"&gt;
  &lt;xsd:annotation&gt;
   &lt;xsd:documentation&gt;
    This import brings in the framework attributes for
    conferenceid and connectionid.
   &lt;/xsd:documentation&gt;
  &lt;/xsd:annotation&gt;
&lt;/xsd:import&gt;

&lt;xsd:import
  namespace="urn:ietf:params:xml:ns:pidf:geopriv10:civicAddr"
  schemaLocation="civicAddress.xsd"&gt;
  &lt;xsd:annotation&gt;
   &lt;xsd:documentation&gt;
    This import brings in the civicAddress specification
    from RFC5139.
   &lt;/xsd:documentation&gt;
  &lt;/xsd:annotation&gt;
&lt;/xsd:import&gt;

&lt;!--
  #####################################################

  Extensible core type

  #####################################################
 --&gt;


 &lt;xsd:complexType name="Tcore"&gt;
  &lt;xsd:annotation&gt;
   &lt;xsd:documentation&gt;
    This type is extended by other (non-mixed) component types to
    allow attributes from other namespaces.
   &lt;/xsd:documentation&gt;
  &lt;/xsd:annotation&gt;
  &lt;xsd:sequence/&gt;
  &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
 &lt;/xsd:complexType&gt;


&lt;!--
  #####################################################

  TOP LEVEL ELEMENT: mrbpublish

  #####################################################
 --&gt;

&lt;xsd:complexType name="mrbpublishType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
     &lt;xsd:choice&gt;
      &lt;xsd:element ref="mrbrequest" /&gt;
      &lt;xsd:element ref="mrbresponse" /&gt;
      &lt;xsd:element ref="mrbnotification" /&gt;
      &lt;xsd:any namespace="##other" minOccurs="0"
       maxOccurs="unbounded" processContents="lax" /&gt;
     &lt;/xsd:choice&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="version" type="version.datatype"
      use="required" /&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="mrbpublish" type="mrbpublishType" /&gt;

&lt;!--
  #####################################################

  mrbrequest TYPE

  #####################################################
 --&gt;

&lt;!--  mrbrequest --&gt;

 &lt;xsd:complexType name="mrbrequestType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
     &lt;xsd:element ref="subscription" /&gt;
     &lt;xsd:any namespace="##other" minOccurs="0"
      maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="mrbrequest" type="mrbrequestType" /&gt;

&lt;!--  subscription --&gt;

&lt;xsd:complexType name="subscriptionType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
     &lt;xsd:element name="expires" type="xsd:nonNegativeInteger"
      minOccurs="0" maxOccurs="1" /&gt;
     &lt;xsd:element name="frequency" type="xsd:nonNegativeInteger"
      minOccurs="0" maxOccurs="1" /&gt;
     &lt;xsd:any namespace="##other" minOccurs="0"
      maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="id" type="id.datatype" use="required" /&gt;
    &lt;xsd:attribute name="seqnumber" type="xsd:nonNegativeInteger"
      use="required" /&gt;
    &lt;xsd:attribute name="action" type="action.datatype"
      use="required" /&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="subscription" type="subscriptionType" /&gt;


&lt;!--
  #####################################################

  mrbresponse TYPE

  #####################################################
 --&gt;

&lt;!--  mrbresponse --&gt;

 &lt;xsd:complexType name="mrbresponseType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
     &lt;xsd:element ref="subscription" minOccurs="0" maxOccurs="1" /&gt;
     &lt;xsd:any namespace="##other" minOccurs="0"
       maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="status" type="status.datatype"
     use="required" /&gt;
    &lt;xsd:attribute name="reason" type="xsd:string" /&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;


 &lt;xsd:element name="mrbresponse" type="mrbresponseType" /&gt;

&lt;!--
  #####################################################

  mrbnotification TYPE

  #####################################################
 --&gt;

&lt;!--  mrbnotification --&gt;

&lt;xsd:complexType name="mrbnotificationType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
     &lt;xsd:element name="media-server-id"
        type="subscriptionid.datatype"/&gt;
     &lt;xsd:element ref="supported-packages" minOccurs="0" /&gt;
     &lt;xsd:element ref="active-rtp-sessions" minOccurs="0" /&gt;
     &lt;xsd:element ref="active-mixer-sessions" minOccurs="0" /&gt;
     &lt;xsd:element ref="non-active-rtp-sessions" minOccurs="0" /&gt;
     &lt;xsd:element ref="non-active-mixer-sessions" minOccurs="0" /&gt;
     &lt;xsd:element ref="media-server-status" minOccurs="0" /&gt;
     &lt;xsd:element ref="supported-codecs" minOccurs="0" /&gt;
     &lt;xsd:element ref="application-data" minOccurs="0"
      maxOccurs="unbounded" /&gt;
     &lt;xsd:element ref="file-formats" minOccurs="0" /&gt;
     &lt;xsd:element ref="max-prepared-duration" minOccurs="0" /&gt;
     &lt;xsd:element ref="dtmf-support" minOccurs="0" /&gt;
     &lt;xsd:element ref="mixing-modes" minOccurs="0" /&gt;
     &lt;xsd:element ref="supported-tones" minOccurs="0" /&gt;
     &lt;xsd:element ref="streaming-modes" minOccurs="0" /&gt;
     &lt;xsd:element ref="asr-tts-support" minOccurs="0" /&gt;
     &lt;xsd:element ref="vxml-support" minOccurs="0" /&gt;
     &lt;xsd:element ref="media-server-location" minOccurs="0" /&gt;
     &lt;xsd:element ref="label" minOccurs="0" /&gt;
     &lt;xsd:element ref="media-server-address" minOccurs="0" /&gt;
     &lt;xsd:element ref="encryption" minOccurs="0" /&gt;
     &lt;xsd:any namespace="##other" minOccurs="0"
      maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
     &lt;xsd:attribute name="id" type="subscriptionid.datatype"
      use="required" /&gt;
     &lt;xsd:attribute name="seqnumber" type="xsd:nonNegativeInteger"
      use="required" /&gt;
     &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="mrbnotification" type="mrbnotificationType" /&gt;


&lt;!--  supported-packages --&gt;

 &lt;xsd:complexType name="supported-packagesType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
      &lt;xsd:element ref="package" minOccurs="0"
        maxOccurs="unbounded" /&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

&lt;xsd:element name="supported-packages" type="supported-packagesType"/&gt;


 &lt;xsd:complexType name="packageType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="name" type="xsd:string" use="required" /&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="package" type="packageType" /&gt;


&lt;!--  active-rtp-sessions --&gt;

 &lt;xsd:complexType name="active-rtp-sessionsType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
      &lt;xsd:element ref="rtp-codec" minOccurs="0"
        maxOccurs="unbounded" /&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

&lt;xsd:element name="active-rtp-sessions" type="active-rtp-sessionsType"/&gt;


 &lt;xsd:complexType name="rtp-codecType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
      &lt;xsd:element name="decoding" type="xsd:nonNegativeInteger" /&gt;
      &lt;xsd:element name="encoding" type="xsd:nonNegativeInteger" /&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="name" type="xsd:string" use="required" /&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="rtp-codec" type="rtp-codecType" /&gt;


&lt;!--  active-mixer-sessions --&gt;

&lt;xsd:complexType name="active-mixer-sessionsType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
      &lt;xsd:element ref="active-mix" minOccurs="0"
        maxOccurs="unbounded" /&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="active-mixer-sessions"
  type="active-mixer-sessionsType" /&gt;


&lt;xsd:complexType name="active-mixType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
      &lt;xsd:element ref="rtp-codec" minOccurs="0"
        maxOccurs="unbounded" /&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attributeGroup ref="fw:framework-attributes" /&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="active-mix" type="active-mixType" /&gt;


&lt;!--  non-active-rtp-sessions --&gt;

&lt;xsd:complexType name="non-active-rtp-sessionsType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
      &lt;xsd:element ref="rtp-codec" minOccurs="0"
        maxOccurs="unbounded" /&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="non-active-rtp-sessions"
  type="non-active-rtp-sessionsType" /&gt;

&lt;!--  non-active-mixer-sessions --&gt;

&lt;xsd:complexType name="non-active-mixer-sessionsType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
      &lt;xsd:element ref="non-active-mix" minOccurs="0"
        maxOccurs="unbounded" /&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="non-active-mixer-sessions"
  type="non-active-mixer-sessionsType" /&gt;

 &lt;xsd:complexType name="non-active-mixType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
      &lt;xsd:element ref="rtp-codec" /&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="available" type="xsd:nonNegativeInteger"
      use="required" /&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="non-active-mix" type="non-active-mixType" /&gt;

&lt;!--  media-server-status --&gt;

 &lt;xsd:element name="media-server-status" type="msstatus.datatype" /&gt;

&lt;!--  supported-codecs --&gt;

&lt;xsd:complexType name="supported-codecsType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
       &lt;xsd:element ref="supported-codec"
         minOccurs="0" maxOccurs="unbounded" /&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
         maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="supported-codecs" type="supported-codecsType" /&gt;

 &lt;xsd:complexType name="supported-codecType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
      &lt;xsd:element ref="supported-codec-package"
         minOccurs="0" maxOccurs="unbounded" /&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="name" type="xsd:string" use="required" /&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="supported-codec" type="supported-codecType" /&gt;

 &lt;xsd:complexType name="supported-codec-packageType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
       &lt;xsd:element name="supported-actions" type="actions.datatype"
        minOccurs="0" maxOccurs="unbounded" /&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="name" type="xsd:string" use="required" /&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="supported-codec-package"
  type="supported-codec-packageType" /&gt;


&lt;!--  application-data --&gt;

&lt;xsd:element name="application-data" type="appdata.datatype" /&gt;

&lt;!--  file-formats --&gt;

&lt;xsd:complexType name="file-formatsType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
       &lt;xsd:element ref="supported-format"
         minOccurs="0" maxOccurs="unbounded" /&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
         maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="file-formats" type="file-formatsType" /&gt;

 &lt;xsd:complexType name="supported-formatType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
      &lt;xsd:element ref="supported-file-package"
         minOccurs="0" maxOccurs="unbounded" /&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="name" type="xsd:string" use="required" /&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="supported-format" type="supported-formatType" /&gt;

 &lt;xsd:element name="supported-file-package"
  type="xsd:string" /&gt;

&lt;!--  max-prepared-duration --&gt;

&lt;xsd:complexType name="max-prepared-durationType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
      &lt;xsd:element ref="max-time" /&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="max-prepared-duration"
  type="max-prepared-durationType" /&gt;


 &lt;xsd:complexType name="max-timeType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
      &lt;xsd:element name="max-time-package" type="xsd:string" /&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="max-time-seconds" type="xsd:nonNegativeInteger"
     use="required" /&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="max-time" type="max-timeType" /&gt;

&lt;!--  dtmf-support --&gt;

&lt;xsd:complexType name="dtmf-supportType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
       &lt;xsd:element ref="detect" /&gt;
       &lt;xsd:element ref="generate" /&gt;
       &lt;xsd:element ref="passthrough" /&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="dtmf-support" type="dtmf-supportType" /&gt;

 &lt;xsd:complexType name="detectType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
       &lt;xsd:element ref="dtmf-type"
        minOccurs="0" maxOccurs="unbounded" /&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="detect" type="detectType" /&gt;

 &lt;xsd:complexType name="generateType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
       &lt;xsd:element ref="dtmf-type"
        minOccurs="0" maxOccurs="unbounded" /&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="generate" type="generateType" /&gt;

 &lt;xsd:complexType name="passthroughType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
       &lt;xsd:element ref="dtmf-type"
        minOccurs="0" maxOccurs="unbounded" /&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="passthrough" type="passthroughType" /&gt;


 &lt;xsd:complexType name="dtmf-typeType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="name" type="dtmf.datatype" use="required" /&gt;
    &lt;xsd:attribute name="package" type="xsd:string" use="required" /&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="dtmf-type" type="dtmf-typeType" /&gt;


&lt;!--  mixing-modes --&gt;

&lt;xsd:complexType name="mixing-modesType"&gt;
 &lt;xsd:complexContent&gt;
  &lt;xsd:extension base="Tcore"&gt;
   &lt;xsd:sequence&gt;
      &lt;xsd:element ref="audio-mixing-modes"
        minOccurs="0" maxOccurs="1" /&gt;
      &lt;xsd:element ref="video-mixing-modes"
        minOccurs="0" maxOccurs="1" /&gt;
      &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
   &lt;/xsd:sequence&gt;
   &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
  &lt;/xsd:extension&gt;
 &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="mixing-modes" type="mixing-modesType" /&gt;

&lt;xsd:complexType name="audio-mixing-modesType"&gt;
 &lt;xsd:complexContent&gt;
  &lt;xsd:extension base="Tcore"&gt;
   &lt;xsd:sequence&gt;
     &lt;xsd:element ref="audio-mixing-mode"
        minOccurs="0" maxOccurs="unbounded" /&gt;
      &lt;xsd:any namespace="##other" minOccurs="0"
       maxOccurs="unbounded" processContents="lax" /&gt;
   &lt;/xsd:sequence&gt;
   &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
  &lt;/xsd:extension&gt;
 &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="audio-mixing-modes" type="audio-mixing-modesType" /&gt;

&lt;xsd:complexType name="audio-mixing-modeType" mixed="true"&gt;
 &lt;xsd:sequence&gt;
    &lt;xsd:any namespace="##other" minOccurs="0"
     maxOccurs="unbounded" processContents="lax" /&gt;
 &lt;/xsd:sequence&gt;
 &lt;xsd:attribute name="package" type="xsd:string" use="required" /&gt;
 &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="audio-mixing-mode" type="audio-mixing-modeType" /&gt;

&lt;xsd:complexType name="video-mixing-modesType"&gt;
 &lt;xsd:complexContent&gt;
  &lt;xsd:extension base="Tcore"&gt;
   &lt;xsd:sequence&gt;
     &lt;xsd:element ref="video-mixing-mode"
        minOccurs="0" maxOccurs="unbounded" /&gt;
      &lt;xsd:any namespace="##other" minOccurs="0"
       maxOccurs="unbounded" processContents="lax" /&gt;
   &lt;/xsd:sequence&gt;
   &lt;xsd:attribute name="vas" type="boolean.datatype"
     default="false" /&gt;
   &lt;xsd:attribute name="activespeakermix" type="boolean.datatype"
     default="false" /&gt;
   &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
  &lt;/xsd:extension&gt;
 &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="video-mixing-modes" type="video-mixing-modesType" /&gt;

&lt;xsd:complexType name="video-mixing-modeType" mixed="true"&gt;
 &lt;xsd:sequence&gt;
    &lt;xsd:any namespace="##other" minOccurs="0"
     maxOccurs="unbounded" processContents="lax" /&gt;
 &lt;/xsd:sequence&gt;
 &lt;xsd:attribute name="package" type="xsd:string" use="required" /&gt;
 &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="video-mixing-mode" type="video-mixing-modeType" /&gt;


&lt;!--  supported-tones --&gt;

&lt;xsd:complexType name="supported-tonesType"&gt;
 &lt;xsd:complexContent&gt;
  &lt;xsd:extension base="Tcore"&gt;
   &lt;xsd:sequence&gt;
      &lt;xsd:element ref="supported-country-codes"
        minOccurs="0" maxOccurs="1" /&gt;
      &lt;xsd:element ref="supported-h248-codes"
        minOccurs="0" maxOccurs="1" /&gt;
      &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
   &lt;/xsd:sequence&gt;
   &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
  &lt;/xsd:extension&gt;
 &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="supported-tones" type="supported-tonesType" /&gt;

&lt;xsd:complexType name="supported-country-codesType"&gt;
 &lt;xsd:complexContent&gt;
  &lt;xsd:extension base="Tcore"&gt;
   &lt;xsd:sequence&gt;
     &lt;xsd:element ref="country-code"
        minOccurs="0" maxOccurs="unbounded" /&gt;
      &lt;xsd:any namespace="##other" minOccurs="0"
       maxOccurs="unbounded" processContents="lax" /&gt;
   &lt;/xsd:sequence&gt;
   &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
  &lt;/xsd:extension&gt;
 &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="supported-country-codes"
  type="supported-country-codesType" /&gt;

&lt;xsd:complexType name="country-codeType" mixed="true"&gt;
 &lt;xsd:sequence&gt;
    &lt;xsd:any namespace="##other" minOccurs="0"
     maxOccurs="unbounded" processContents="lax" /&gt;
 &lt;/xsd:sequence&gt;
 &lt;xsd:attribute name="package" type="xsd:string" use="required" /&gt;
 &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="country-code" type="country-codeType" /&gt;

&lt;xsd:complexType name="supported-h248-codesType"&gt;
 &lt;xsd:complexContent&gt;
  &lt;xsd:extension base="Tcore"&gt;
   &lt;xsd:sequence&gt;
     &lt;xsd:element ref="h248-code"
        minOccurs="0" maxOccurs="unbounded" /&gt;
      &lt;xsd:any namespace="##other" minOccurs="0"
       maxOccurs="unbounded" processContents="lax" /&gt;
   &lt;/xsd:sequence&gt;
   &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
  &lt;/xsd:extension&gt;
 &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="supported-h248-codes"
  type="supported-h248-codesType" /&gt;

&lt;xsd:complexType name="h248-codeType" mixed="true"&gt;
 &lt;xsd:sequence&gt;
    &lt;xsd:any namespace="##other" minOccurs="0"
     maxOccurs="unbounded" processContents="lax" /&gt;
 &lt;/xsd:sequence&gt;
 &lt;xsd:attribute name="package" type="xsd:string" use="required" /&gt;
 &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="h248-code" type="h248-codeType" /&gt;


&lt;!--  streaming-modes --&gt;

 &lt;xsd:complexType name="streaming-modesType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
      &lt;xsd:element ref="stream-mode"
        minOccurs="0" maxOccurs="unbounded" /&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="streaming-modes" type="streaming-modesType" /&gt;

 &lt;xsd:complexType name="stream-modeType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="name" type="streammode.datatype"
     use="required" /&gt;
    &lt;xsd:attribute name="package" type="xsd:string" use="required" /&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;
 &lt;xsd:element name="stream-mode" type="stream-modeType" /&gt;


&lt;!--  asr-tts-support --&gt;

&lt;xsd:complexType name="asr-tts-supportType"&gt;
 &lt;xsd:complexContent&gt;
  &lt;xsd:extension base="Tcore"&gt;
   &lt;xsd:sequence&gt;
      &lt;xsd:element ref="asr-support"
        minOccurs="0" maxOccurs="1" /&gt;
      &lt;xsd:element ref="tts-support"
        minOccurs="0" maxOccurs="1" /&gt;
      &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
   &lt;/xsd:sequence&gt;
   &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
  &lt;/xsd:extension&gt;
 &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="asr-tts-support" type="asr-tts-supportType" /&gt;

&lt;xsd:complexType name="asr-supportType"&gt;
 &lt;xsd:complexContent&gt;
  &lt;xsd:extension base="Tcore"&gt;
   &lt;xsd:sequence&gt;
     &lt;xsd:element ref="language"
        minOccurs="0" maxOccurs="unbounded" /&gt;
      &lt;xsd:any namespace="##other" minOccurs="0"
       maxOccurs="unbounded" processContents="lax" /&gt;
   &lt;/xsd:sequence&gt;
   &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
  &lt;/xsd:extension&gt;
 &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="asr-support" type="asr-supportType" /&gt;

&lt;xsd:complexType name="tts-supportType"&gt;
 &lt;xsd:complexContent&gt;
  &lt;xsd:extension base="Tcore"&gt;
   &lt;xsd:sequence&gt;
     &lt;xsd:element ref="language"
        minOccurs="0" maxOccurs="unbounded" /&gt;
      &lt;xsd:any namespace="##other" minOccurs="0"
       maxOccurs="unbounded" processContents="lax" /&gt;
   &lt;/xsd:sequence&gt;
   &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
  &lt;/xsd:extension&gt;
 &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="tts-support" type="tts-supportType" /&gt;

&lt;xsd:complexType name="languageType"&gt;
 &lt;xsd:complexContent&gt;
  &lt;xsd:extension base="Tcore"&gt;
   &lt;xsd:sequence&gt;
      &lt;xsd:any namespace="##other" minOccurs="0"
       maxOccurs="unbounded" processContents="lax" /&gt;
   &lt;/xsd:sequence&gt;
   &lt;xsd:attribute ref="xml:lang" /&gt;
   &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
  &lt;/xsd:extension&gt;
 &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="language" type="languageType" /&gt;


&lt;!--  media-server-location --&gt;

&lt;xsd:complexType name="media-server-locationType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
       &lt;xsd:element name="civicAddress" type="ca:civicAddress"
                        minOccurs="1" maxOccurs="1" /&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

&lt;xsd:element name="media-server-location"
  type="media-server-locationType" /&gt;


&lt;!--  vxml-support --&gt;

 &lt;xsd:complexType name="vxml-supportType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
      &lt;xsd:element ref="vxml-mode"
        minOccurs="0" maxOccurs="unbounded" /&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="support" type="boolean.datatype"
     default="false" /&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="vxml-support" type="vxml-supportType" /&gt;

 &lt;xsd:complexType name="vxml-modeType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="package" type="xsd:string" use="required" /&gt;
    &lt;xsd:attribute name="support" type="vxml.datatype" use="required" /&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="vxml-mode" type="vxml-modeType" /&gt;


&lt;!--  label --&gt;

 &lt;xsd:element name="label" type="label.datatype" /&gt;


&lt;!-- media-server-address --&gt;

 &lt;xsd:element name="media-server-address" type="xsd:anyURI" /&gt;


&lt;!--  encryption --&gt;

&lt;xsd:element name="encryption" type="boolean.datatype" /&gt;


&lt;!--
  ####################################################

  DATATYPES

  ####################################################
 --&gt;


 &lt;xsd:simpleType name="version.datatype"&gt;
  &lt;xsd:restriction base="xsd:NMTOKEN"&gt;
   &lt;xsd:enumeration value="1.0" /&gt;
  &lt;/xsd:restriction&gt;
 &lt;/xsd:simpleType&gt;

&lt;xsd:simpleType name="id.datatype"&gt;
  &lt;xsd:restriction base="xsd:NMTOKEN" /&gt;
 &lt;/xsd:simpleType&gt;

 &lt;xsd:simpleType name="status.datatype"&gt;
  &lt;xsd:restriction base="xsd:positiveInteger"&gt;
   &lt;xsd:pattern value="[0-9][0-9][0-9]" /&gt;
  &lt;/xsd:restriction&gt;
 &lt;/xsd:simpleType&gt;

 &lt;xsd:simpleType name="msstatus.datatype"&gt;
  &lt;xsd:restriction base="xsd:NMTOKEN"&gt;
   &lt;xsd:enumeration value="active" /&gt;
   &lt;xsd:enumeration value="deactivated" /&gt;
   &lt;xsd:enumeration value="unavailable" /&gt;
  &lt;/xsd:restriction&gt;
 &lt;/xsd:simpleType&gt;

 &lt;xsd:simpleType name="action.datatype"&gt;
  &lt;xsd:restriction base="xsd:NMTOKEN"&gt;
   &lt;xsd:enumeration value="create" /&gt;
   &lt;xsd:enumeration value="update" /&gt;
   &lt;xsd:enumeration value="remove" /&gt;
  &lt;/xsd:restriction&gt;
 &lt;/xsd:simpleType&gt;

 &lt;xsd:simpleType name="actions.datatype"&gt;
  &lt;xsd:restriction base="xsd:NMTOKEN"&gt;
   &lt;xsd:enumeration value="encoding" /&gt;
   &lt;xsd:enumeration value="decoding" /&gt;
   &lt;xsd:enumeration value="passthrough" /&gt;
  &lt;/xsd:restriction&gt;
 &lt;/xsd:simpleType&gt;

 &lt;xsd:simpleType name="appdata.datatype"&gt;
  &lt;xsd:restriction base="xsd:NMTOKEN" /&gt;
 &lt;/xsd:simpleType&gt;

 &lt;xsd:simpleType name="dtmf.datatype"&gt;
  &lt;xsd:restriction base="xsd:NMTOKEN"&gt;
   &lt;xsd:enumeration value="RFC4733" /&gt;
   &lt;xsd:enumeration value="Media" /&gt;
  &lt;/xsd:restriction&gt;
 &lt;/xsd:simpleType&gt;

 &lt;xsd:simpleType name="streammode.datatype"&gt;
  &lt;xsd:restriction base="xsd:NMTOKEN" /&gt;
 &lt;/xsd:simpleType&gt;

 &lt;xsd:simpleType name="boolean.datatype"&gt;
  &lt;xsd:restriction base="xsd:NMTOKEN"&gt;
   &lt;xsd:enumeration value="true" /&gt;
   &lt;xsd:enumeration value="false" /&gt;
  &lt;/xsd:restriction&gt;
 &lt;/xsd:simpleType&gt;

  &lt;xsd:simpleType name="vxml.datatype"&gt;
  &lt;xsd:restriction base="xsd:NMTOKEN"&gt;
   &lt;xsd:enumeration value="RFC4240" /&gt;
   &lt;xsd:enumeration value="RFC5552" /&gt;
   &lt;xsd:enumeration value="IVR-Package" /&gt;
  &lt;/xsd:restriction&gt;
 &lt;/xsd:simpleType&gt;

 &lt;xsd:simpleType name="label.datatype"&gt;
  &lt;xsd:restriction base="xsd:NMTOKEN" /&gt;
 &lt;/xsd:simpleType&gt;

 &lt;xsd:simpleType name="subscriptionid.datatype"&gt;
  &lt;xsd:restriction base="xsd:NMTOKEN" /&gt;
 &lt;/xsd:simpleType&gt;

&lt;/xsd:schema&gt;
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;12&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="sec:consumer_xml"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Media Service Resource Consumer Interface XML Schema</h3>

<p>This section gives the XML Schema Definition
   [W3C.REC-xmlschema-1-20041028], [W3C.REC-xmlschema-2-20041028] of the
   "application/mrb-consumer+xml" format.
</p><br /><hr class="insert" />
<a name="fig:xml_schema"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;xsd:schema targetNamespace="urn:ietf:params:xml:ns:mrb-consumer"
 elementFormDefault="qualified" blockDefault="#all"
 xmlns="urn:ietf:params:xml:ns:mrb-consumer"
 xmlns:ca="urn:ietf:params:xml:ns:pidf:geopriv10:civicAddr"
 xmlns:xsd="http://www.w3.org/2001/XMLSchema"&gt;

 &lt;xsd:annotation&gt;
  &lt;xsd:documentation&gt;
   IETF MediaCtrl MRB 1.0

   This is the schema of the IETF MediaCtrl MRB Consumer interface.

   The schema namespace is urn:ietf:params:xml:ns:mrb-consumer

  &lt;/xsd:documentation&gt;
 &lt;/xsd:annotation&gt;


 &lt;!--
  #############################################################

  SCHEMA IMPORTS

  #############################################################
 --&gt;

 &lt;xsd:import namespace="http://www.w3.org/XML/1998/namespace"
  schemaLocation="http://www.w3.org/2001/xml.xsd"&gt;
  &lt;xsd:annotation&gt;
   &lt;xsd:documentation&gt;
    This import brings in the XML attributes for
    xml:base, xml:lang, etc
   &lt;/xsd:documentation&gt;
  &lt;/xsd:annotation&gt;
 &lt;/xsd:import&gt;

&lt;xsd:import
  namespace="urn:ietf:params:xml:ns:pidf:geopriv10:civicAddr"
  schemaLocation="civicAddress.xsd"&gt;
  &lt;xsd:annotation&gt;
   &lt;xsd:documentation&gt;
    This import brings in the civicAddress specification
    from RFC5139.
   &lt;/xsd:documentation&gt;
  &lt;/xsd:annotation&gt;
&lt;/xsd:import&gt;

&lt;!--
  #####################################################

  Extensible core type

  #####################################################
 --&gt;


 &lt;xsd:complexType name="Tcore"&gt;
  &lt;xsd:annotation&gt;
   &lt;xsd:documentation&gt;
    This type is extended by other (non-mixed) component types to
    allow attributes from other namespaces.
   &lt;/xsd:documentation&gt;
  &lt;/xsd:annotation&gt;
  &lt;xsd:sequence/&gt;
  &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
 &lt;/xsd:complexType&gt;


&lt;!--
  #####################################################

  TOP LEVEL ELEMENT: mrbconsumer

  #####################################################
 --&gt;

&lt;xsd:complexType name="mrbconsumerType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
     &lt;xsd:choice&gt;
      &lt;xsd:element ref="mediaResourceRequest" /&gt;
      &lt;xsd:element ref="mediaResourceResponse" /&gt;
      &lt;xsd:any namespace="##other" minOccurs="0"
       maxOccurs="unbounded" processContents="lax" /&gt;
     &lt;/xsd:choice&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="version" type="version.datatype"
      use="required" /&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

 &lt;xsd:element name="mrbconsumer" type="mrbconsumerType" /&gt;

&lt;!--
  #####################################################

  mediaResourceRequest TYPE

  #####################################################
 --&gt;

&lt;!--  mediaResourceRequst --&gt;

 &lt;xsd:complexType name="mediaResourceRequestType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
      &lt;xsd:element ref="generalInfo" minOccurs="0" /&gt;
      &lt;xsd:element ref="ivrInfo" minOccurs="0" /&gt;
      &lt;xsd:element ref="mixerInfo" minOccurs="0" /&gt;
     &lt;xsd:any namespace="##other" minOccurs="0"
      maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

 &lt;xsd:element name="mediaResourceRequest"
	 type="mediaResourceRequestType" /&gt;

&lt;!--
  #####################################################

  generalInfo TYPE

  #####################################################
--&gt;

&lt;!--  generalInfo --&gt;

&lt;xsd:complexType name="generalInfoType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
     &lt;xsd:choice&gt;
      &lt;xsd:element ref="session-info" minOccurs="0" /&gt;
      &lt;xsd:element ref="packages" minOccurs="0" /&gt;
      &lt;xsd:any namespace="##other" minOccurs="0"
       maxOccurs="unbounded" processContents="lax" /&gt;
     &lt;/xsd:choice&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

&lt;xsd:element name="generalInfo" type="generalInfoType" /&gt;


&lt;!--  session-info --&gt;

&lt;xsd:complexType name="session-infoType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
     &lt;xsd:choice&gt;
       &lt;xsd:element name="session-id" type="id.datatype"/&gt;
       &lt;xsd:element name="seq" type="xsd:nonNegativeInteger"/&gt;
       &lt;xsd:element name="action" type="action.datatype"/&gt;
      &lt;xsd:any namespace="##other" minOccurs="0"
       maxOccurs="unbounded" processContents="lax" /&gt;
     &lt;/xsd:choice&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

&lt;xsd:element name="session-info" type="session-infoType" /&gt;

&lt;!--  packages --&gt;

&lt;xsd:complexType name="packagesType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
      &lt;xsd:element name="package" type="xsd:string" minOccurs="0"
        maxOccurs="unbounded" /&gt;
      &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="packages" type="packagesType"/&gt;


&lt;!--
  #####################################################

  ivrInfo TYPE

  #####################################################
--&gt;

&lt;!--  ivrInfo --&gt;

&lt;xsd:complexType name="ivrInfoType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
     &lt;xsd:choice&gt;
      &lt;xsd:element ref="ivr-sessions" /&gt;
      &lt;xsd:element ref="file-formats" /&gt;
      &lt;xsd:element ref="dtmf-type" /&gt;
      &lt;xsd:element ref="tones" /&gt;
      &lt;xsd:element ref="asr-tts" /&gt;
      &lt;xsd:element ref="vxml" /&gt;
      &lt;xsd:element ref="location" /&gt;
      &lt;xsd:element ref="encryption" /&gt;
      &lt;xsd:element ref="application-data" /&gt;
      &lt;xsd:element ref="max-prepared-duration" /&gt;
      &lt;xsd:element ref="streaming-modes" /&gt;
      &lt;xsd:any namespace="##other" minOccurs="0"
       maxOccurs="unbounded" processContents="lax" /&gt;
     &lt;/xsd:choice&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

&lt;xsd:element name="ivrInfo" type="ivrInfoType" /&gt;


&lt;!--
  #####################################################

  mixerInfo TYPE

  #####################################################
--&gt;

&lt;!--  mixerInfo --&gt;

&lt;xsd:complexType name="mixerInfoType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
     &lt;xsd:choice&gt;
      &lt;xsd:element ref="mixers" /&gt;
      &lt;xsd:element ref="file-formats" /&gt;
      &lt;xsd:element ref="dtmf-type" /&gt;
      &lt;xsd:element ref="tones" /&gt;
      &lt;xsd:element ref="mixing-modes" /&gt;
      &lt;xsd:element ref="application-data" /&gt;
      &lt;xsd:element ref="location" /&gt;
      &lt;xsd:element ref="encryption" /&gt;
      &lt;xsd:any namespace="##other" minOccurs="0"
       maxOccurs="unbounded" processContents="lax" /&gt;
     &lt;/xsd:choice&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

&lt;xsd:element name="mixerInfo" type="mixerInfoType" /&gt;


&lt;!--
  #####################################################

  mediaResourceResponse TYPE

  #####################################################
 --&gt;

&lt;!--  mediaResourceResponse --&gt;

 &lt;xsd:complexType name="mediaResourceResponseType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
       &lt;xsd:element ref="response-session-info" minOccurs="0" /&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
          maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="status" type="status.datatype"
     use="required" /&gt;
    &lt;xsd:attribute name="reason" type="xsd:string" /&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;


 &lt;xsd:element name="mediaResourceResponse"
	 type="mediaResourceResponseType" /&gt;


&lt;!--
  ####################################################

  ELEMENTS

  ####################################################
 --&gt;

&lt;!--  session-info --&gt;

&lt;xsd:complexType name="response-session-infoType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
     &lt;xsd:choice&gt;
       &lt;xsd:element name="session-id" type="id.datatype"/&gt;
       &lt;xsd:element name="seq" type="xsd:nonNegativeInteger"/&gt;
       &lt;xsd:element name="expires" type="xsd:nonNegativeInteger"/&gt;
       &lt;xsd:element ref="media-server-address" minOccurs="0" /&gt;
      &lt;xsd:any namespace="##other" minOccurs="0"
       maxOccurs="unbounded" processContents="lax" /&gt;
     &lt;/xsd:choice&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

&lt;xsd:element name="response-session-info"
   type="response-session-infoType" /&gt;


&lt;!-- media-server-address --&gt;

 &lt;xsd:element name="media-server-address" type="xsd:anyURI" /&gt;


&lt;!--  ivr-sessions --&gt;

&lt;xsd:complexType name="ivr-sessionsType"&gt;
 &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
      &lt;xsd:element ref="rtp-codec" minOccurs="0"
        maxOccurs="unbounded" /&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

&lt;xsd:element name="ivr-sessions" type="ivr-sessionsType" /&gt;

&lt;xsd:complexType name="rtp-codecType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
      &lt;xsd:element name="decoding" type="xsd:nonNegativeInteger" /&gt;
      &lt;xsd:element name="encoding" type="xsd:nonNegativeInteger" /&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="name" type="xsd:string" use="required" /&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

&lt;xsd:element name="rtp-codec" type="rtp-codecType" /&gt;


&lt;!-- file-format --&gt;

&lt;xsd:complexType name="file-formatsType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
       &lt;xsd:element ref="required-format"
         minOccurs="0" maxOccurs="unbounded" /&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
         maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="file-formats" type="file-formatsType" /&gt;

&lt;xsd:complexType name="required-formatType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
      &lt;xsd:element ref="required-file-package"
         minOccurs="0" maxOccurs="unbounded" /&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="name" type="xsd:string" use="required" /&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="required-format" type="required-formatType" /&gt;

&lt;xsd:complexType name="required-file-packageType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
       &lt;xsd:element name="required-file-package-name" type="xsd:string"
        minOccurs="0" maxOccurs="unbounded" /&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="required-file-package"
  type="required-file-packageType" /&gt;

&lt;!--  dtmf-type --&gt;

&lt;xsd:complexType name="dtmfType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
       &lt;xsd:element ref="detect" /&gt;
       &lt;xsd:element ref="generate" /&gt;
       &lt;xsd:element ref="passthrough" /&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="dtmf" type="dtmfType" /&gt;

&lt;xsd:complexType name="detectType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
       &lt;xsd:element ref="dtmf-type"
        minOccurs="0" maxOccurs="unbounded" /&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="detect" type="detectType" /&gt;

&lt;xsd:complexType name="generateType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
       &lt;xsd:element ref="dtmf-type"
        minOccurs="0" maxOccurs="unbounded" /&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="generate" type="generateType" /&gt;

&lt;xsd:complexType name="passthroughType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
       &lt;xsd:element ref="dtmf-type"
        minOccurs="0" maxOccurs="unbounded" /&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="passthrough" type="passthroughType" /&gt;

&lt;xsd:complexType name="dtmf-typeType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="name" type="dtmf.datatype" use="required" /&gt;
    &lt;xsd:attribute name="package" type="xsd:string" use="required" /&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="dtmf-type" type="dtmf-typeType" /&gt;

&lt;!--  tones --&gt;

&lt;xsd:complexType name="required-tonesType"&gt;
 &lt;xsd:complexContent&gt;
  &lt;xsd:extension base="Tcore"&gt;
   &lt;xsd:sequence&gt;
      &lt;xsd:element ref="country-codes"
        minOccurs="0" maxOccurs="1" /&gt;
      &lt;xsd:element ref="h248-codes"
        minOccurs="0" maxOccurs="1" /&gt;
      &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
   &lt;/xsd:sequence&gt;
   &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
  &lt;/xsd:extension&gt;
 &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="tones" type="required-tonesType" /&gt;

&lt;xsd:complexType name="required-country-codesType"&gt;
 &lt;xsd:complexContent&gt;
  &lt;xsd:extension base="Tcore"&gt;
   &lt;xsd:sequence&gt;
     &lt;xsd:element ref="country-code"
        minOccurs="0" maxOccurs="unbounded" /&gt;
      &lt;xsd:any namespace="##other" minOccurs="0"
       maxOccurs="unbounded" processContents="lax" /&gt;
   &lt;/xsd:sequence&gt;
   &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
  &lt;/xsd:extension&gt;
 &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="country-codes"
   type="required-country-codesType" /&gt;

&lt;xsd:complexType name="country-codeType" mixed="true"&gt;
 &lt;xsd:sequence&gt;
    &lt;xsd:any namespace="##other" minOccurs="0"
     maxOccurs="unbounded" processContents="lax" /&gt;
 &lt;/xsd:sequence&gt;
 &lt;xsd:attribute name="package" type="xsd:string" use="required" /&gt;
 &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="country-code" type="country-codeType" /&gt;

&lt;xsd:complexType name="required-h248-codesType"&gt;
 &lt;xsd:complexContent&gt;
  &lt;xsd:extension base="Tcore"&gt;
   &lt;xsd:sequence&gt;
     &lt;xsd:element ref="h248-code"
        minOccurs="0" maxOccurs="unbounded" /&gt;
      &lt;xsd:any namespace="##other" minOccurs="0"
       maxOccurs="unbounded" processContents="lax" /&gt;
   &lt;/xsd:sequence&gt;
   &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
  &lt;/xsd:extension&gt;
 &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="h248-codes"
   type="required-h248-codesType" /&gt;

&lt;xsd:complexType name="h248-codeType" mixed="true"&gt;
 &lt;xsd:sequence&gt;
    &lt;xsd:any namespace="##other" minOccurs="0"
     maxOccurs="unbounded" processContents="lax" /&gt;
 &lt;/xsd:sequence&gt;
 &lt;xsd:attribute name="package" type="xsd:string" use="required" /&gt;
 &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="h248-code" type="h248-codeType" /&gt;

&lt;!--  asr-tts --&gt;

&lt;xsd:complexType name="asr-ttsType"&gt;
 &lt;xsd:complexContent&gt;
  &lt;xsd:extension base="Tcore"&gt;
   &lt;xsd:sequence&gt;
      &lt;xsd:element ref="asr-support"
        minOccurs="0" maxOccurs="1" /&gt;
      &lt;xsd:element ref="tts-support"
        minOccurs="0" maxOccurs="1" /&gt;
      &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
   &lt;/xsd:sequence&gt;
   &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
  &lt;/xsd:extension&gt;
 &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="asr-tts" type="asr-ttsType" /&gt;

&lt;xsd:complexType name="asr-supportType"&gt;
 &lt;xsd:complexContent&gt;
  &lt;xsd:extension base="Tcore"&gt;
   &lt;xsd:sequence&gt;
     &lt;xsd:element ref="language"
        minOccurs="0" maxOccurs="unbounded" /&gt;
      &lt;xsd:any namespace="##other" minOccurs="0"
       maxOccurs="unbounded" processContents="lax" /&gt;
   &lt;/xsd:sequence&gt;
   &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
  &lt;/xsd:extension&gt;
 &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="asr-support" type="asr-supportType" /&gt;

&lt;xsd:complexType name="tts-supportType"&gt;
 &lt;xsd:complexContent&gt;
  &lt;xsd:extension base="Tcore"&gt;
   &lt;xsd:sequence&gt;
     &lt;xsd:element ref="language"
        minOccurs="0" maxOccurs="unbounded" /&gt;
      &lt;xsd:any namespace="##other" minOccurs="0"
       maxOccurs="unbounded" processContents="lax" /&gt;
   &lt;/xsd:sequence&gt;
   &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
  &lt;/xsd:extension&gt;
 &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="tts-support" type="tts-supportType" /&gt;

&lt;xsd:complexType name="languageType"&gt;
 &lt;xsd:complexContent&gt;
  &lt;xsd:extension base="Tcore"&gt;
   &lt;xsd:sequence&gt;
      &lt;xsd:any namespace="##other" minOccurs="0"
       maxOccurs="unbounded" processContents="lax" /&gt;
   &lt;/xsd:sequence&gt;
   &lt;xsd:attribute ref="xml:lang" /&gt;
   &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
  &lt;/xsd:extension&gt;
 &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="language" type="languageType" /&gt;


&lt;!--  vxml --&gt;

&lt;xsd:complexType name="vxmlType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
      &lt;xsd:element ref="vxml-mode"
        minOccurs="0" maxOccurs="unbounded" /&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="support" type="boolean.datatype"
     default="false" /&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="vxml" type="vxmlType" /&gt;

&lt;xsd:complexType name="vxml-modeType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="package" type="xsd:string" use="required" /&gt;
    &lt;xsd:attribute name="require" type="vxml.datatype" use="required" /&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="vxml-mode" type="vxml-modeType" /&gt;

&lt;!--  location --&gt;

&lt;xsd:complexType name="locationType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
       &lt;xsd:element ref="ca:civicAddress"
                        minOccurs="1" maxOccurs="1" /&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
 &lt;/xsd:complexType&gt;

&lt;xsd:element name="location" type="locationType" /&gt;


&lt;!--  encryption --&gt;

&lt;xsd:element name="encryption" type="boolean.datatype" /&gt;

&lt;!--  application-data --&gt;

&lt;xsd:element name="application-data" type="appdata.datatype" /&gt;

&lt;!--  max-prepared-duration --&gt;

&lt;xsd:complexType name="max-prepared-durationType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
      &lt;xsd:element ref="max-time" /&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="max-prepared-duration"
  type="max-prepared-durationType" /&gt;


&lt;xsd:complexType name="max-timeType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
      &lt;xsd:element name="max-time-package" type="xsd:string" /&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="max-time-seconds" type="xsd:nonNegativeInteger"
     use="required" /&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="max-time" type="max-timeType" /&gt;


&lt;!--  stream-mode --&gt;

&lt;xsd:complexType name="streaming-modesType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
      &lt;xsd:element ref="stream-mode"
        minOccurs="0" maxOccurs="unbounded" /&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="streaming-modes" type="streaming-modesType" /&gt;

&lt;xsd:complexType name="stream-modeType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="name" type="streammode.datatype"
     use="required" /&gt;
    &lt;xsd:attribute name="package" type="xsd:string" use="required" /&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="stream-mode" type="stream-modeType" /&gt;

&lt;!--  mixers --&gt;

&lt;xsd:complexType name="mixerssessionsType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
      &lt;xsd:element ref="mix" minOccurs="0"
        maxOccurs="unbounded" /&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="mixers" type="mixerssessionsType" /&gt;

&lt;xsd:complexType name="mixType"&gt;
  &lt;xsd:complexContent&gt;
   &lt;xsd:extension base="Tcore"&gt;
    &lt;xsd:sequence&gt;
      &lt;xsd:element ref="rtp-codec" minOccurs="0"
        maxOccurs="unbounded" /&gt;
       &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
    &lt;/xsd:sequence&gt;
    &lt;xsd:attribute name="users" type="xsd:nonNegativeInteger"
     use="required" /&gt;
    &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
   &lt;/xsd:extension&gt;
  &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="mix" type="mixType" /&gt;


&lt;!--  mixing-modes --&gt;

&lt;xsd:complexType name="mixing-modesType"&gt;
 &lt;xsd:complexContent&gt;
  &lt;xsd:extension base="Tcore"&gt;
   &lt;xsd:sequence&gt;
      &lt;xsd:element ref="audio-mixing-modes"
        minOccurs="0" maxOccurs="1" /&gt;
      &lt;xsd:element ref="video-mixing-modes"
        minOccurs="0" maxOccurs="1" /&gt;
      &lt;xsd:any namespace="##other" minOccurs="0"
        maxOccurs="unbounded" processContents="lax" /&gt;
   &lt;/xsd:sequence&gt;
   &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
  &lt;/xsd:extension&gt;
 &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="mixing-modes" type="mixing-modesType" /&gt;

&lt;xsd:complexType name="audio-mixing-modesType"&gt;
 &lt;xsd:complexContent&gt;
  &lt;xsd:extension base="Tcore"&gt;
   &lt;xsd:sequence&gt;
     &lt;xsd:element ref="audio-mixing-mode"
        minOccurs="0" maxOccurs="unbounded" /&gt;
      &lt;xsd:any namespace="##other" minOccurs="0"
       maxOccurs="unbounded" processContents="lax" /&gt;
   &lt;/xsd:sequence&gt;
   &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
  &lt;/xsd:extension&gt;
 &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="audio-mixing-modes" type="audio-mixing-modesType" /&gt;

&lt;xsd:complexType name="audio-mixing-modeType" mixed="true"&gt;
 &lt;xsd:sequence&gt;
    &lt;xsd:any namespace="##other" minOccurs="0"
     maxOccurs="unbounded" processContents="lax" /&gt;
 &lt;/xsd:sequence&gt;
 &lt;xsd:attribute name="package" type="xsd:string" use="required" /&gt;
 &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="audio-mixing-mode" type="audio-mixing-modeType" /&gt;

&lt;xsd:complexType name="video-mixing-modesType"&gt;
 &lt;xsd:complexContent&gt;
  &lt;xsd:extension base="Tcore"&gt;
   &lt;xsd:sequence&gt;
     &lt;xsd:element ref="video-mixing-mode"
        minOccurs="0" maxOccurs="unbounded" /&gt;
      &lt;xsd:any namespace="##other" minOccurs="0"
       maxOccurs="unbounded" processContents="lax" /&gt;
   &lt;/xsd:sequence&gt;
   &lt;xsd:attribute name="vas" type="boolean.datatype"
     default="false" /&gt;
   &lt;xsd:attribute name="activespeakermix" type="boolean.datatype"
     default="false" /&gt;
   &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
  &lt;/xsd:extension&gt;
 &lt;/xsd:complexContent&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="video-mixing-modes" type="video-mixing-modesType" /&gt;

&lt;xsd:complexType name="video-mixing-modeType" mixed="true"&gt;
 &lt;xsd:sequence&gt;
    &lt;xsd:any namespace="##other" minOccurs="0"
     maxOccurs="unbounded" processContents="lax" /&gt;
 &lt;/xsd:sequence&gt;
 &lt;xsd:attribute name="package" type="xsd:string" use="required" /&gt;
 &lt;xsd:anyAttribute namespace="##other" processContents="lax" /&gt;
&lt;/xsd:complexType&gt;

&lt;xsd:element name="video-mixing-mode" type="video-mixing-modeType" /&gt;


&lt;!--
  ####################################################

  DATATYPES

  ####################################################
 --&gt;

&lt;xsd:simpleType name="version.datatype"&gt;
  &lt;xsd:restriction base="xsd:NMTOKEN"&gt;
   &lt;xsd:enumeration value="1.0" /&gt;
  &lt;/xsd:restriction&gt;
&lt;/xsd:simpleType&gt;

&lt;xsd:simpleType name="id.datatype"&gt;
  &lt;xsd:restriction base="xsd:NMTOKEN" /&gt;
&lt;/xsd:simpleType&gt;

&lt;xsd:simpleType name="status.datatype"&gt;
  &lt;xsd:restriction base="xsd:positiveInteger"&gt;
   &lt;xsd:pattern value="[0-9][0-9][0-9]" /&gt;
  &lt;/xsd:restriction&gt;
&lt;/xsd:simpleType&gt;

&lt;xsd:simpleType name="streammode.datatype"&gt;
  &lt;xsd:restriction base="xsd:NMTOKEN"/&gt;
&lt;/xsd:simpleType&gt;

&lt;xsd:simpleType name="action.datatype"&gt;
  &lt;xsd:restriction base="xsd:NMTOKEN"&gt;
   &lt;xsd:enumeration value="remove" /&gt;
   &lt;xsd:enumeration value="update" /&gt;
  &lt;/xsd:restriction&gt;
&lt;/xsd:simpleType&gt;

&lt;xsd:simpleType name="dtmf.datatype"&gt;
  &lt;xsd:restriction base="xsd:NMTOKEN"&gt;
   &lt;xsd:enumeration value="RFC4733" /&gt;
   &lt;xsd:enumeration value="Media" /&gt;
  &lt;/xsd:restriction&gt;
&lt;/xsd:simpleType&gt;

&lt;xsd:simpleType name="boolean.datatype"&gt;
  &lt;xsd:restriction base="xsd:NMTOKEN"&gt;
   &lt;xsd:enumeration value="true" /&gt;
   &lt;xsd:enumeration value="false" /&gt;
  &lt;/xsd:restriction&gt;
&lt;/xsd:simpleType&gt;

&lt;xsd:simpleType name="vxml.datatype"&gt;
  &lt;xsd:restriction base="xsd:NMTOKEN"&gt;
   &lt;xsd:enumeration value="RFC4240" /&gt;
   &lt;xsd:enumeration value="RFC5552" /&gt;
   &lt;xsd:enumeration value="IVR-Package" /&gt;
  &lt;/xsd:restriction&gt;
&lt;/xsd:simpleType&gt;

&lt;xsd:simpleType name="appdata.datatype"&gt;
  &lt;xsd:restriction base="xsd:NMTOKEN" /&gt;
 &lt;/xsd:simpleType&gt;

&lt;/xsd:schema&gt;
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;13&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="sec:security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Security Considerations</h3>

<p>The MRB network entity has two primary interfaces, Publish and Consumer,
	that carry sensitive information and must therefore be appropriately protected
	and secured.
</p>
<p>The Publish interface, as defined in and described in <a class='info' href='#sec:MS_Pub'>Section&nbsp;5.1<span> (</span><span class='info'>Media Server Resource Publish Interface</span><span>)</span></a>,
	uses the Media Control Channel Framework <a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; October&nbsp;2009.</span><span>)</span></a>
	as a mechanism to connect an MRB to a media server.  The appropriate Security
	Considerations included in the Media Control Channel Framework specification MUST be
	used in conjunction with this specification to protect interactions between an MRB
	and a media server.
</p>
<p>The Consumer interface, as defined in and described in <a class='info' href='#sec:Res_Cons'>Section&nbsp;5.2<span> (</span><span class='info'>Media Service Resource Consumer Interface</span><span>)</span></a>,
	uses either the Hypertext Transfer Protocol (HTTP) or Session
	Initiation Protocol (SIP) as the mechanism for clients to connect to an MRB to
	request media resources.  In the case of the HTTP use, any binding using the Consumer
	interface MUST be capable of being transacted over TLS, as described in
	<a class='info' href='#RFC2818'>RFC 2818<span> (</span><span class='info'>Rescorla, E., &ldquo;HTTP Over TLS,&rdquo; May&nbsp;2000.</span><span>)</span></a> [RFC2818]. 
	In the case of the SIP use, the appropriate security
	considerations included in the Media Control Channel Framework specification MUST be
	used in conjunction with this specification to protect interactions between a client
	requesting media resources and an MRB.
</p>
<p>It is also worth noting that in In-line mode (both IAMM and IUMM) the MRB
	may act as a Back-to-Back User Agent (B2BUA). This means that, as a B2BUA, the
	MRB may happen to modify SIP bodies: it is the case, for instance, of the IAMM
	handling multipart/mixed payloads. This impacts the ability to use any SIP
	security feature that protects the body (e.g., RFC4474, s/mime, etc.) unless
	the MRB intermediates the security association. This should be taken into
	account when implementing an MRB compliant with this specification.
</p>
<p>Finally, it is worthwhile to also discuss authorization issues related
	to the specification. Neither the Publishing nor the Consumer interface
	provide an explicit means for implementing authentication, i.e., they
	do not envisage protocol messages to make sure, for instance, that
	only authorized Application Servers can make use of the services provided
	by a MRB. Nevertheless, considering both the interfaces are transported
	in well-established protocols (HTTP, SIP, CFW), support for such an
	functionality can be expressed by means of the authentication mechanisms
	provided by the protocol themselves. Therefore, any
	MRB-aware entity (Application Servers, Media Servers, Media Resource
	Brokers themselves) MUST support the HTTP and SIP Digest access
	authentication. That said, the usage of such Digest access authentications
	is recommended and not mandatory, which means MRB-aware entities MAY
	exploit it in deployment.
</p>
<a name="sec:IANA_Considerations"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
IANA Considerations</h3>

<p>There are several IANA considerations associated with this specification.
</p>
<a name="sec:IANA_Package"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.1"></a><h3>10.1.&nbsp;
Control Package Registration</h3>

<p>This section registers a new Media Control Channel Framework package,
   per the instructions in Section 13.1 of
   <a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; October&nbsp;2009.</span><span>)</span></a>.
</p>
<p>
	</p>
<blockquote class="text"><dl>
<dt>To: </dt>
<dd>ietf-sip-control@iana.org
</dd>
<dt>Subject: </dt>
<dd>Registration of new Channel Framework package
</dd>
<dt>Package Name: </dt>
<dd>mrb-publish/1.0
        [NOTE TO IANA/RFC-EDITOR: Please replace XXXX
        with the RFC number for this specification.]
</dd>
<dt>Published Specification(s): </dt>
<dd>RFCXXXX
      Person and email address to contact for further information:
      IETF, MEDIACTRL working group, (mediactrl@ietf.org),
      Chris Boulton (chris@ns-technologies.com).
</dd>
</dl></blockquote><p>
	
</p>
<a name="sec:IANA_Publish"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.2"></a><h3>10.2.&nbsp;
application/mrb-publish+xml MIME Type</h3>

<p>
	</p>
<blockquote class="text"><dl>
<dt>MIME media type name: </dt>
<dd>application
</dd>
<dt>MIME subtype name: </dt>
<dd>mrb-publish+xml
</dd>
<dt>Mandatory parameters: </dt>
<dd>none
</dd>
<dt>Optional parameters: </dt>
<dd>Same as charset parameter application/xml as
 specified in RFC 3023 <a class='info' href='#RFC3023'>[RFC3023]<span> (</span><span class='info'>Murata, M., St. Laurent, S., and D. Kohn, &ldquo;XML Media Types,&rdquo; January&nbsp;2001.</span><span>)</span></a>.
</dd>
<dt>Encoding considerations: </dt>
<dd>Same as encoding considerations of
 application/xml as specified in RFC 3023 <a class='info' href='#RFC3023'>[RFC3023]<span> (</span><span class='info'>Murata, M., St. Laurent, S., and D. Kohn, &ldquo;XML Media Types,&rdquo; January&nbsp;2001.</span><span>)</span></a>.
</dd>
<dt>Security considerations: </dt>
<dd>See Section 10 of RFC 3023 <a class='info' href='#RFC3023'>[RFC3023]<span> (</span><span class='info'>Murata, M., St. Laurent, S., and D. Kohn, &ldquo;XML Media Types,&rdquo; January&nbsp;2001.</span><span>)</span></a> and
 Section 8 of RFCXXXX [[NOTE TO RFC-EDITOR/IANA: Please replace
 XXXX with the RFC number of this specification.]].
</dd>
<dt>Interoperability considerations: </dt>
<dd>none.
</dd>
<dt>Published specification: </dt>
<dd>This document.
</dd>
<dt>Applications which use this media type: </dt>
<dd>This document type has
 been used to support a Media Resource Broker (MRB) entity.
</dd>
<dt>Additional Information:</dt>
<dd>
</dd>
<dt>Magic Number: </dt>
<dd>None
</dd>
<dt>File Extension: </dt>
<dd>.xdf
</dd>
<dt>Macintosh file type code: </dt>
<dd>&quot;TEXT&quot;
</dd>
<dt>Personal and email address for further information: </dt>
<dd>Chris
 Boulton, chris@ns-technologies.com
</dd>
<dt>Intended usage: COMMON</dt>
<dd>
</dd>
<dt>Author/Change controller: </dt>
<dd>The IETF.
</dd>
</dl></blockquote><p>
	
</p>
<a name="sec:IANA_Consumer"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.3"></a><h3>10.3.&nbsp;
application/mrb-consumer+xml MIME Type</h3>

<p>
	</p>
<blockquote class="text"><dl>
<dt>MIME media type name: </dt>
<dd>application
</dd>
<dt>MIME subtype name: </dt>
<dd>mrb-consumer+xml
</dd>
<dt>Mandatory parameters: </dt>
<dd>none
</dd>
<dt>Optional parameters: </dt>
<dd>Same as charset parameter application/xml as
 specified in RFC 3023 <a class='info' href='#RFC3023'>[RFC3023]<span> (</span><span class='info'>Murata, M., St. Laurent, S., and D. Kohn, &ldquo;XML Media Types,&rdquo; January&nbsp;2001.</span><span>)</span></a>.
</dd>
<dt>Encoding considerations: </dt>
<dd>Same as encoding considerations of
 application/xml as specified in RFC 3023 <a class='info' href='#RFC3023'>[RFC3023]<span> (</span><span class='info'>Murata, M., St. Laurent, S., and D. Kohn, &ldquo;XML Media Types,&rdquo; January&nbsp;2001.</span><span>)</span></a>.
</dd>
<dt>Security considerations: </dt>
<dd>See Section 10 of RFC 3023 <a class='info' href='#RFC3023'>[RFC3023]<span> (</span><span class='info'>Murata, M., St. Laurent, S., and D. Kohn, &ldquo;XML Media Types,&rdquo; January&nbsp;2001.</span><span>)</span></a> and
 Section 8 of RFCXXXX [[NOTE TO RFC-EDITOR/IANA: Please replace
 XXXX with the RFC number of this specification.]].
</dd>
<dt>Interoperability considerations: </dt>
<dd>none.
</dd>
<dt>Published specification: </dt>
<dd>This document.
</dd>
<dt>Applications which use this media type: </dt>
<dd>This document type has
 been used to support a Media Resource Broker (MRB) entity.
</dd>
<dt>Additional Information:</dt>
<dd>
</dd>
<dt>Magic Number: </dt>
<dd>None
</dd>
<dt>File Extension: </dt>
<dd>.xdf
</dd>
<dt>Macintosh file type code: </dt>
<dd>&quot;TEXT&quot;
</dd>
<dt>Personal and email address for further information: </dt>
<dd>Chris
 Boulton, chris@ns-technologies.com
</dd>
<dt>Intended usage: COMMON</dt>
<dd>
</dd>
<dt>Author/Change controller: </dt>
<dd>The IETF.
</dd>
</dl></blockquote><p>
	
</p>
<a name="sec:IANA_mrbpub"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.4"></a><h3>10.4.&nbsp;
URN Sub-Namespace Registration for mrb-publish</h3>

<p>
   Please register the URN name space "urn:ietf:params:xml:ns:mrb-publish", with the ID of "mrb-publish".  The template is in <a class='info' href='#sec:publisher_xml'>Section&nbsp;7<span> (</span><span class='info'>Media Service Resource Publisher Interface XML Schema</span><span>)</span></a>.

</p>
<a name="sec:IANA_mrbcons"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.5"></a><h3>10.5.&nbsp;
URN Sub-Namespace Registration for mrb-consumer</h3>

<p>
   Please register the URN name space "urn:ietf:params:xml:ns:mrb-consumer", with the ID of "mrb-consumer".  The template is in <a class='info' href='#sec:consumer_xml'>Section&nbsp;8<span> (</span><span class='info'>Media Service Resource Consumer Interface XML Schema</span><span>)</span></a>.

</p>
<a name="sec:IANA_PubSchema"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.6"></a><h3>10.6.&nbsp;
XML Schema Registration for mrb-publish</h3>

<p>Please register the schema for mrb-publish:
</p>
<p>
	</p>
<blockquote class="text"><dl>
<dt>URI: </dt>
<dd>urn:ietf:params:xml:ns:mrb-publish
</dd>
<dt>ID: </dt>
<dd>mrb-publish
</dd>
<dt>Filename: </dt>
<dd>mbr-publish
</dd>
<dt>Registrant Contact: </dt>
<dd>IETF, MEDIACTRL working group (mediactrl@ietf.org)
</dd>
<dt>Schema: </dt>
<dd>The XML for the schema is in <a class='info' href='#sec:publisher_xml'>Section&nbsp;7<span> (</span><span class='info'>Media Service Resource Publisher Interface XML Schema</span><span>)</span></a> of this document.
</dd>
</dl></blockquote><p>
	
</p>
<a name="sec:IANA_ConsSchema"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.7"></a><h3>10.7.&nbsp;
XML Schema Registration for mrb-consumer</h3>

<p>Please register the schema for mrb-consumer:
</p>
<p>
	</p>
<blockquote class="text"><dl>
<dt>URI: </dt>
<dd>urn:ietf:params:xml:ns:mrb-consumer
</dd>
<dt>ID: </dt>
<dd>mrb-consumer
</dd>
<dt>Filename: </dt>
<dd>mbr-consumer
</dd>
<dt>Registrant Contact: </dt>
<dd>IETF, MEDIACTRL working group (mediactrl@ietf.org)
</dd>
<dt>Schema: </dt>
<dd>The XML for the schema is in <a class='info' href='#sec:consumer_xml'>Section&nbsp;8<span> (</span><span class='info'>Media Service Resource Consumer Interface XML Schema</span><span>)</span></a> of this document.
</dd>
</dl></blockquote><p>
	
</p>
<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11"></a><h3>11.&nbsp;
Changes</h3>

<p>Note to RFC Editor:  Please remove this whole section.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11.1"></a><h3>11.1.&nbsp;
Changes from 04 Version</h3>

<p>
	</p>
<ul class="text">
<li>Corrected some typos and leftovers in both 'session-info' and
		'response-session-info' definitions.
</li>
<li>Clarified that 'response-session-info' is not only included
		in reply to updates, but also to new requests; besides, clarified
		that it is an optional element, in the sense that it is mandatory
		in successful responses (200), while not needed otherwise (any
		error).
</li>
<li>Corrected the Query example flow which included a 'session'info'
		in a new request.
</li>
</ul><p>
  
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11.2"></a><h3>11.2.&nbsp;
Changes from 03 Version</h3>

<p>
	</p>
<ul class="text">
<li>Addressed comments per the Expert RAI Review by Ben Campbell.
</li>
<li>Several editorial changes (fixes, typos, nits).
</li>
<li>Removed the 3xx class responses for the IAMM, per discussion in Anaheim (feature had been added in the -02 version).
</li>
<li>Clarified that backslashes and XML indentation in the Examples are only provided for readability.
</li>
<li>Clarified the distinction between 'deactivated' and 'unavailable'.
</li>
<li>Added text to the status codes in both Publish and Consumer responses, in order to clarify when they are involved.
</li>
<li>Added some text to better clarify the role of leasing in the Consumer interface.
</li>
<li>Added additional IANA considerations, that were missing in the previous versions of the document.
</li>
<li>Added text to the security considerations.
</li>
</ul><p>
  
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11.3"></a><h3>11.3.&nbsp;
Changes from 02 Version</h3>

<p>
	</p>
<ul class="text">
<li>Added examples in <a class='info' href='#sec:Examples'>Section&nbsp;6<span> (</span><span class='info'>Examples</span><span>)</span></a>.
</li>
<li>Fixed some nits in the schemas (encryption and required mixed=true elements).
</li>
<li>Completed review nit review comments from Gary Munson.
</li>
</ul><p>
  
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11.4"></a><h3>11.4.&nbsp;
Changes from 01 Version</h3>

<p>
	</p>
<ul class="text">
<li>Added description of lease mechanism.
</li>
<li>Added specific HTTP and SIP usage of Consumer interface.
</li>
<li>Completed Publish interface schema + associated text.
</li>
<li>Included Consumer interface schema + associated text.
</li>
<li>Included supported-packages element.
</li>
<li>Removed announce-var element from doc.
</li>
<li>Expanded Abstract.
</li>
<li>General scrub of text - input from Simon Romano.
</li>
<li>Added IANA Considerations section.
</li>
<li>Added Security Considerations section.
</li>
</ul><p>
  
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11.5"></a><h3>11.5.&nbsp;
Changes from 00 Version</h3>

<p>
	</p>
<ul class="text">
<li>Included In-line text based on strawman proposal.
</li>
<li>Included first attempt at publish interface based on design team work.
</li>
</ul><p>
  
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12"></a><h3>12.&nbsp;
Acknowledgments</h3>

<p>The authors would like to thank the members of the Publish Interface design team who provided valuable
	input into this document.  The design team consisted of Gary Munson, Adnan Saleem, Michael Trank,
	Victor Paulsamy, Martin Dolly, and Scott McGlashan.  The authors would also like to thank John Dally,
	Simon Romano, Henry Lum, Christian Groves and Jonathan Lennox for input into this specification.
</p>
<p>Ben Campbell carried out the RAI expert review on this specification
	and provided a great deal of invaluable input.
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.13"></a><h3>13.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>13.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="ISO.3166-1">[ISO.3166-1]</a></td>
<td class="author-text">International Organization for Standardization, &ldquo;Codes for the representation of names of countries and their subdivisions - Part 1: Country codes,&rdquo; ISO&nbsp;Standard 3166-1:1997, 1997.</td></tr>
<tr><td class="author-text" valign="top"><a name="ISO.639.1988">[ISO.639.1988]</a></td>
<td class="author-text">International Organization for Standardization, &ldquo;Code for the representation of names of languages, 1st edition,&rdquo; ISO&nbsp;Standard 639, 1988.</td></tr>
<tr><td class="author-text" valign="top"><a name="ITU-T.Q.1950">[ITU-T.Q.1950]</a></td>
<td class="author-text">International Telecommunication Union - Telecommunication Standardization Bureau, &ldquo;Call Bearer Control (CBC) Protocol,&rdquo; ITU-T&nbsp;Recommendation Q.1950.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2046">[RFC2046]</a></td>
<td class="author-text"><a href="mailto:ned@innosoft.com">Freed, N.</a> and <a href="mailto:nsb@nsb.fv.com">N. Borenstein</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2046">Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types</a>,&rdquo; RFC&nbsp;2046, November&nbsp;1996 (<a href="http://www.rfc-editor.org/rfc/rfc2046.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2616">[RFC2616]</a></td>
<td class="author-text"><a href="mailto:fielding@ics.uci.edu">Fielding, R.</a>, <a href="mailto:jg@w3.org">Gettys, J.</a>, <a href="mailto:mogul@wrl.dec.com">Mogul, J.</a>, <a href="mailto:frystyk@w3.org">Frystyk, H.</a>, <a href="mailto:masinter@parc.xerox.com">Masinter, L.</a>, <a href="mailto:paulle@microsoft.com">Leach, P.</a>, and <a href="mailto:timbl@w3.org">T. Berners-Lee</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2616">Hypertext Transfer Protocol -- HTTP/1.1</a>,&rdquo; RFC&nbsp;2616, June&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2616.txt">TXT</a>, <a href="http://www.rfc-editor.org/rfc/rfc2616.ps">PS</a>, <a href="http://www.rfc-editor.org/rfc/rfc2616.pdf">PDF</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2616.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2616.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2818">[RFC2818]</a></td>
<td class="author-text">Rescorla, E., &ldquo;<a href="http://tools.ietf.org/html/rfc2818">HTTP Over TLS</a>,&rdquo; RFC&nbsp;2818, May&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc2818.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3023">[RFC3023]</a></td>
<td class="author-text">Murata, M., St. Laurent, S., and D. Kohn, &ldquo;<a href="http://tools.ietf.org/html/rfc3023">XML Media Types</a>,&rdquo; RFC&nbsp;3023, January&nbsp;2001 (<a href="http://www.rfc-editor.org/rfc/rfc3023.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3261">[RFC3261]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;<a href="http://tools.ietf.org/html/rfc3261">SIP: Session Initiation Protocol</a>,&rdquo; RFC&nbsp;3261, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3261.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3311">[RFC3311]</a></td>
<td class="author-text">Rosenberg, J., &ldquo;<a href="http://tools.ietf.org/html/rfc3311">The Session Initiation Protocol (SIP) UPDATE Method</a>,&rdquo; RFC&nbsp;3311, October&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3311.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3711">[RFC3711]</a></td>
<td class="author-text">Baugher, M., McGrew, D., Naslund, M., Carrara, E., and K. Norrman, &ldquo;<a href="http://tools.ietf.org/html/rfc3711">The Secure Real-time Transport Protocol (SRTP)</a>,&rdquo; RFC&nbsp;3711, March&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3711.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5139">[RFC5139]</a></td>
<td class="author-text">Thomson, M. and J. Winterbottom, &ldquo;<a href="http://tools.ietf.org/html/rfc5139">Revised Civic Location Format for Presence Information Data Format Location Object (PIDF-LO)</a>,&rdquo; RFC&nbsp;5139, February&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5139.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="W3C.CR-wsdl20-20051215">[W3C.CR-wsdl20-20051215]</a></td>
<td class="author-text">Chinnici, R., Moreau, J., Ryman, A., and S. Weerawarana, &ldquo;<a href="http://www.w3.org/TR/2005/CR-wsdl20-20051215">Web Services Description Language (WSDL) Version 2.0 Part 1: Core Language</a>,&rdquo; W3C CR&nbsp;CR-wsdl20-20051215, December&nbsp;2005.</td></tr>
<tr><td class="author-text" valign="top"><a name="W3C.REC-soap12-part1-20030624">[W3C.REC-soap12-part1-20030624]</a></td>
<td class="author-text">Nielsen, H., Gudgin, M., Hadley, M., Moreau, J., and N. Mendelsohn, &ldquo;<a href="http://www.w3.org/TR/2003/REC-soap12-part1-20030624">SOAP Version 1.2 Part 1: Messaging Framework</a>,&rdquo; World Wide Web Consortium FirstEdition&nbsp;REC-soap12-part1-20030624, June&nbsp;2003 (<a href="http://www.w3.org/TR/2003/REC-soap12-part1-20030624">HTML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="W3C.REC-soap12-part2-20030624">[W3C.REC-soap12-part2-20030624]</a></td>
<td class="author-text">Mendelsohn, N., Moreau, J., Hadley, M., Gudgin, M., and H. Nielsen, &ldquo;<a href="http://www.w3.org/TR/2003/REC-soap12-part2-20030624">SOAP Version 1.2 Part 2: Adjuncts</a>,&rdquo; World Wide Web Consortium FirstEdition&nbsp;REC-soap12-part2-20030624, June&nbsp;2003 (<a href="http://www.w3.org/TR/2003/REC-soap12-part2-20030624">HTML</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>13.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-mediactrl-ivr-control-package">[I-D.ietf-mediactrl-ivr-control-package]</a></td>
<td class="author-text">McGlashan, S., Melanchuk, T., and C. Boulton, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-mediactrl-ivr-control-package-08.txt">An Interactive Voice Response (IVR) Control Package for the Media Control Channel Framework</a>,&rdquo; draft-ietf-mediactrl-ivr-control-package-08 (work in progress), February&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-mediactrl-ivr-control-package-08.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-mediactrl-sip-control-framework">[I-D.ietf-mediactrl-sip-control-framework]</a></td>
<td class="author-text">Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-mediactrl-sip-control-framework-11.txt">Media Control Channel Framework</a>,&rdquo; draft-ietf-mediactrl-sip-control-framework-11 (work in progress), October&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-mediactrl-sip-control-framework-11.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4240">[RFC4240]</a></td>
<td class="author-text">Burger, E., Van Dyke, J., and A. Spitzer, &ldquo;<a href="http://tools.ietf.org/html/rfc4240">Basic Network Media Services with SIP</a>,&rdquo; RFC&nbsp;4240, December&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4240.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4281">[RFC4281]</a></td>
<td class="author-text">Gellens, R., Singer, D., and P. Frojdh, &ldquo;<a href="http://tools.ietf.org/html/rfc4281">The Codecs Parameter for "Bucket" Media Types</a>,&rdquo; RFC&nbsp;4281, November&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4281.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4733">[RFC4733]</a></td>
<td class="author-text">Schulzrinne, H. and T. Taylor, &ldquo;<a href="http://tools.ietf.org/html/rfc4733">RTP Payload for DTMF Digits, Telephony Tones, and Telephony Signals</a>,&rdquo; RFC&nbsp;4733, December&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4733.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5167">[RFC5167]</a></td>
<td class="author-text">Dolly, M. and R. Even, &ldquo;<a href="http://tools.ietf.org/html/rfc5167">Media Server Control Protocol Requirements</a>,&rdquo; RFC&nbsp;5167, March&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5167.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5552">[RFC5552]</a></td>
<td class="author-text">Burke, D. and M. Scott, &ldquo;<a href="http://tools.ietf.org/html/rfc5552">SIP Interface to VoiceXML Media Services</a>,&rdquo; RFC&nbsp;5552, May&nbsp;2009 (<a href="http://www.rfc-editor.org/rfc/rfc5552.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5567">[RFC5567]</a></td>
<td class="author-text">Melanchuk, T., &ldquo;<a href="http://tools.ietf.org/html/rfc5567">An Architectural Framework for Media Server Control</a>,&rdquo; RFC&nbsp;5567, June&nbsp;2009 (<a href="http://www.rfc-editor.org/rfc/rfc5567.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Chris Boulton</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">NS-Technologies</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:chris@ns-technologies.com">chris@ns-technologies.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Lorenzo Miniero</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">University of Napoli</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:lorenzo.miniero@unina.it">lorenzo.miniero@unina.it</a></td></tr>
</table>
</body></html>
