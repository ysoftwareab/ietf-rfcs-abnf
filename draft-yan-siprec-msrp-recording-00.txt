



SIPREC                                                            M. Yan
Internet-Draft                                                P. Kyzivat
Intended status: Informational                                    Huawei
Expires: August 18, 2014                               February 14, 2014


              Overview for MSRP Recording based on SIPREC
                   draft-yan-siprec-msrp-recording-00

Abstract

   SIPREC is capable of recording interactive text media that is
   transmitted via RTP.  However that format is not commonly used for
   message or chat scenarios.  There is also a need for recording text
   media carried via MSRP.  One case of note is exchange of text between
   hearing-impaired users and emergence service bureaus.  Also,
   recording support is needed for MSRP used in chat conferences and
   multimedia conferences.

   This document describes how to achieve MSRP channel recording within
   the mechanism of SIP Recording (SIPREC).

Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC2119].

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on August 18, 2014.







Yan & Kyzivat            Expires August 18, 2014                [Page 1]

Internet-Draft         Overview for MSRP Recording         February 2014


Copyright Notice

   Copyright (c) 2014 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Definitions . . . . . . . . . . . . . . . . . . . . . . . . .   3
   3.  MSRP Recording Architecture . . . . . . . . . . . . . . . . .   3
     3.1.  MSRP Client acts as SRC . . . . . . . . . . . . . . . . .   3
     3.2.  MSRP Relay acts as SRC  . . . . . . . . . . . . . . . . .   4
     3.3.  MSRP Switch acts as SRC . . . . . . . . . . . . . . . . .   4
   4.  MSRP Recording Protocol . . . . . . . . . . . . . . . . . . .   5
   5.  Metadata  . . . . . . . . . . . . . . . . . . . . . . . . . .   5
   6.  Open Issues . . . . . . . . . . . . . . . . . . . . . . . . .   5
   7.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   6
   8.  Security Considerations . . . . . . . . . . . . . . . . . . .   6
   9.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   6
     9.1.  Normative References  . . . . . . . . . . . . . . . . . .   6
     9.2.  Informative References  . . . . . . . . . . . . . . . . .   6
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   7

1.  Introduction

   SIPREC is capable of recording interactive text media that is
   transmitted via RTP, as defined by [RFC4103].  However that format is
   not commonly used for message or chat scenarios.  There is also a
   need for recording text media carried via MSRP.  One case of note is
   exchange of text between hearing-impaired users and emergence service
   bureaus.  Also, recording support is needed for MSRP used in chat
   conferences (as defined by [I-D.ietf-simple-chat]) and multimedia
   conferences (as defined by [RFC4597]).

   Instant message media is carried by a variety of protocols such as
   IRC, MSRP and XMPP/JINGLE.  The SIP based protocol MSRP (as defined
   by [RFC4975][RFC4976]) supports the delivery of messages and files
   from one SIPUA to another.  When a SIPREC SRC is recording a CS that



Yan & Kyzivat            Expires August 18, 2014                [Page 2]

Internet-Draft         Overview for MSRP Recording         February 2014


   contains an MSRP channel, it may want to record the messages passing
   over that channel.  To gain access to the messages, the SRC may act
   as an MSRP client, relay, or switch.  The SRC needs to replicate and
   deliver the messages over an MSRP channel within a Recording Session
   (RS) to an SRS.  The replicated content could be in Message/CPIM
   format containing plain text, HTML, images, etc.  In this document,
   file delivering sessions have not yet been considered.  Other instant
   message protocols, like IRC or XMPP, are out of scope.

   This document describes how MRSP sessions are established between an
   SRC and SRS, and used for conveying the replicated MSRP Media, and
   also specifies metadata that describes the recorded MSRP sessions.  A
   Recording Session employing MSRP is established using the normal
   procedures for establishing INVITE initiated dialogs [RFC3261] and
   uses SDP for describing the media to be used during the session
   [RFC4566] as described by [I-D.ietf-siprec-architecture].

2.  Definitions

   (TBD...)

3.  MSRP Recording Architecture

   For consistency with [RFC6341] and [I-D.ietf-siprec-architecture],
   MSRP recording needs to deliver duplicated MSRP message content from
   the SRC to the SRS, with suitable descriptive metadata.  The SRC may
   be associated with SIP UA (endpoint) with an MSRP client, or with a
   SIP B2BUA that accesses the media via an MRSP Relay.  An SRC may also
   be associated with a SIP conference focus and an MSRP switch.

3.1.  MSRP Client acts as SRC

   [RFC4975][RFC4976] describes how an MSRP client communicates to
   another MSRP client via a SIP session.  A MSRP client that has access
   to the MSRP content to be recorded may act as SRC.  The MSRP client
   may send the replicated media to the SRS along with corresponding
   metadata.

   If the MSRP client/SRC is aware the MSRP session needs to be
   recorded, it can initiate the establishment of a SIP RS by sending an
   INVITE to SRS, or vice-versa.  The MSRP client/SRC is responsible for
   notifying the other MSRP client involved in the CS that the MSRP
   session is being recorded.  The MSRP client/SRC is responsible for
   complying with request from recording aware UAs or through some
   configured policies indicating that the CS should not be recorded.






Yan & Kyzivat            Expires August 18, 2014                [Page 3]

Internet-Draft         Overview for MSRP Recording         February 2014


       +-------------+
       | MSRP CLIENT |
       +-------------+
         ^
         | (Communication Session)
         |
         |  SIP
         v
       +-------------+   (Recording Session)  +-------------+
       | MSRP CLIENT |<---------------------->|   Recorder  |
       |    (SRC)    |      SIP/Metadata      |    (SRS)    |
       +-------------+                        +-------------+



                     Figure 1: MSRP Client Acts as SRC

3.2.  MSRP Relay acts as SRC

   (TBD... RFC4976)

       +-------------+
       | MSRP CLIENT |
       +-------------+
         ^
         | (Communication Session)
         |  SIP
       +-------------+   (Recording Session)  +-------------+
       | MSRP RELAY  |<---------------------->|   Recorder  |
       |    (SRC)    |      SIP/Metadata      |    (SRS)    |
       +-------------+                        +-------------+
         |
         |
         v
       +-------------+
       | MSRP CLIENT |
       +-------------+


                     Figure 2: MSRP Relay Acts as SRC

3.3.  MSRP Switch acts as SRC

   (TBD... ietf-simple-chat)







Yan & Kyzivat            Expires August 18, 2014                [Page 4]

Internet-Draft         Overview for MSRP Recording         February 2014


       +-------------+    +-------------+
       | MSRP CLIENT |    | MSRP CLIENT |
       +-------------+    +-------------+
              ^            ^
               \ SIP      / (Communication Session)
                \        /  SIP
              +-------------+                     +-------------+
              | MSRP switch | (Recording Session) |   Recorder  |
              |    (SRC)    |<------------------->|    (SRS)    |
              +-------------+    SIP/Metadata     +-------------+
                /        \
               / SIP      \ SIP
              v            v
       +-------------+    +-------------+
       | MSRP CLIENT |    | MSRP CLIENT |
       +-------------+    +-------------+


                     Figure 3: MSRP Switch Acts as SRC

4.  MSRP Recording Protocol

   There are several possible ways of passing CS MSRP messages from the
   SRC to the SRS.  Here are three:

   1.  For each CS MSRP channel that is recorded, a corresponding new
       MSRP channel is created in the RS.

   2.  For each CS MSRP channel that is recorded, a corresponding MSRP
       channel is dedicated in the RS.  When recording of the CS MSRP
       channel ceases, the corresponding MSRP channel may be reassigned.

   3.  MSRP messages from multiple MSRP participants of a CS are
       multiplexed (mixed) over a single MSRP channel in the RS.

5.  Metadata

   (TBD...)

6.  Open Issues

   o  Is there any need for in-band indication that MSRP is being
      recorded?

   o  MSRP-based file transfers (in scope or not?)






Yan & Kyzivat            Expires August 18, 2014                [Page 5]

Internet-Draft         Overview for MSRP Recording         February 2014


7.  IANA Considerations

   This document contains no IANA considerations.

8.  Security Considerations

   Not explicitly covered in this version.

9.  References

9.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC3261]  Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston,
              A., Peterson, J., Sparks, R., Handley, M., and E.
              Schooler, "SIP: Session Initiation Protocol", RFC 3261,
              June 2002.

   [RFC4975]  Campbell, B., Mahy, R., and C. Jennings, "The Message
              Session Relay Protocol (MSRP)", RFC 4975, September 2007.

   [RFC4976]  Jennings, C., Mahy, R., and A. Roach, "Relay Extensions
              for the Message Sessions Relay Protocol (MSRP)", RFC 4976,
              September 2007.

   [RFC6341]  Rehor, K., Portman, L., Hutton, A., and R. Jain, "Use
              Cases and Requirements for SIP-Based Media Recording
              (SIPREC)", RFC 6341, August 2011.

   [I-D.ietf-siprec-architecture]
              Hutton, A., Portman, L., Jain, R., and K. Rehor, "An
              Architecture for Media Recording using the Session
              Initiation Protocol", draft-ietf-siprec-architecture-11
              (work in progress), December 2013.

   [I-D.ietf-simple-chat]
              Niemi, A., Garcia, M., and G. Sandbakken, "Multi-party
              Chat Using the Message Session Relay Protocol (MSRP)",
              draft-ietf-simple-chat-18 (work in progress), January
              2013.

9.2.  Informative References

   [RFC4103]  Hellstrom, G. and P. Jones, "RTP Payload for Text
              Conversation", RFC 4103, June 2005.




Yan & Kyzivat            Expires August 18, 2014                [Page 6]

Internet-Draft         Overview for MSRP Recording         February 2014


   [RFC4566]  Handley, M., Jacobson, V., and C. Perkins, "SDP: Session
              Description Protocol", RFC 4566, July 2006.

   [RFC4597]  Even, R. and N. Ismail, "Conferencing Scenarios", RFC
              4597, August 2006.

Authors' Addresses

   Michael Yan
   Huawei

   Email: michael.yan@huawei.com


   Paul H. Kyzivat
   Huawei

   Email: pkyzivat@alum.mit.edu

































Yan & Kyzivat            Expires August 18, 2014                [Page 7]
