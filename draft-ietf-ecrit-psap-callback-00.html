<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Public Safety Answering Point (PSAP) Callbacks</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Public Safety Answering Point (PSAP) Callbacks">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">ECRIT</td><td class="header">H. Schulzrinne</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Columbia University</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">H. Tschofenig</td></tr>
<tr><td class="header">Expires: March 25, 2011</td><td class="header">Nokia Siemens Networks</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">M. Patel</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Nortel</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">September 21, 2010</td></tr>
</table></td></tr></table>
<h1><br />Public Safety Answering Point (PSAP) Callbacks<br />draft-ietf-ecrit-psap-callback-00.txt</h1>

<h3>Abstract</h3>

<p>After an emergency call is completed (either prematurely terminated by the emergency
				caller or normally by the call-taker) it is possible that the call-taker feels the
				need for further communication or for a clarification. For example, the call may
				have been dropped by accident without the call-taker having sufficient information
				about the current situation of a wounded person. A call-taker may trigger a callback
				towards the emergency caller using the contact information provided with the initial
				emergency call. This callback could, under certain circumstances, then be treated
				like any other call and as a consequence, it may get blocked by authorization
				policies or may get forwarded to an answering machine.
</p>
<p>The IETF emergency services architecture addresses callbacks in a limited fashion and
				thereby covers a couple of scenarios. This document discusses some shortcomings and
				raises the question whether additional solution techniques are needed.
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on March 25, 2011.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#intro">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor1">1.1.</a>&nbsp;
Routing Asymmetry<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">1.2.</a>&nbsp;
Multi-Stage Resolution<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">1.3.</a>&nbsp;
Call Forwarding<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">1.4.</a>&nbsp;
PSTN Interworking<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">1.5.</a>&nbsp;
Network-based Service URN Resolution<br />
<a href="#terminology">2.</a>&nbsp;
Terminology<br />
<a href="#design">3.</a>&nbsp;
Design Approaches<br />
<a href="#anchor6">4.</a>&nbsp;
Topics for Investigation<br />
<a href="#anchor7">5.</a>&nbsp;
Security Considerations<br />
<a href="#anchor8">6.</a>&nbsp;
Acknowledgements<br />
<a href="#rfc.references1">7.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">7.1.</a>&nbsp;
Informative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">7.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="intro"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>Summoning police, the fire department or an ambulance in emergencies is one of the
				fundamental and most-valued functions of the telephone. As telephone functionality
				moves from circuit-switched telephony to Internet telephony, its users rightfully
				expect that this core functionality will continue to work at least as well as it has
				for the legacy technology. New devices and services are being made available that
				could be used to make a request for help, which are not traditional telephones, and
				users are increasingly expecting them to be used to place emergency calls.
</p>
<p>Regulatory requirements demand that the emergency call itself provides enough
				information to allow the call-taker to initiate a call back to the emergency caller
				in case the call dropped or to interact with the emergency caller in case of further
				questions. Such a call, referred as PSAP callback subsequently in this document,
				may, however, be blocked or forwarded to an answering machine as SIP entities (SIP
				proxies as well as the SIP UA itself) cannot associate the potential importantance
				of the call based on the SIP signaling.
</p>
<p>
				</p>
<blockquote class="text">
<p>Note that the authors are, however, not aware of regulatory requirements for
						providing preferential treatment of callbacks initiated by the call-taker at
						the PSAP towards the emergency caller.
</p>
</blockquote><p>
			
</p>
<p>Section 10 of <a class='info' href='#I-D.ietf-ecrit-framework'>[I&#8209;D.ietf&#8209;ecrit&#8209;framework]<span> (</span><span class='info'>Rosen, B., Schulzrinne, H., Polk, J., and A. Newton, &ldquo;Framework for Emergency Calling using Internet Multimedia,&rdquo; July&nbsp;2010.</span><span>)</span></a> discusses the identifiers
				required for callbacks, namely AOR URI and a globally routable URI in a Contact:
				header. Section 13 of <a class='info' href='#I-D.ietf-ecrit-framework'>[I&#8209;D.ietf&#8209;ecrit&#8209;framework]<span> (</span><span class='info'>Rosen, B., Schulzrinne, H., Polk, J., and A. Newton, &ldquo;Framework for Emergency Calling using Internet Multimedia,&rdquo; July&nbsp;2010.</span><span>)</span></a> provides the
				following guidance regarding callback handling:
</p>
<p>
				</p>
<blockquote class="text">
<p> A UA may be able to determine a PSAP call back by examining the domain of
						incoming calls after placing an emergency call and comparing that to the
						domain of the answering PSAP from the emergency call. Any call from the same
						domain and directed to the supplied Contact header or AoR after an emergency
						call should be accepted as a call-back from the PSAP if it occurs within a
						reasonable time after an emergency call was placed. 
</p>
</blockquote><p>
			
</p>
<p>This approach mimics a stateful packet filtering firewall and is indeed helpful in a
				number of cases. It is also relatively simple to implement. Below, we discuss a few
				cases where this approach fails.
</p>
<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Routing Asymmetry</h3>

<p>In some deployment environments it is common to have incoming and outgoing SIP
					messaging to use different routes. 
</p>
<p>
					<br /><hr class="insert" />
<a name="asymmetry"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                                                ,-------.
                                              ,'         `.
                   ,-------.                 /  Emergency  \
                 ,'         `.              |   Services    |
                /  VoIP       \      I      |   Network     |
               |   Provider    |     n      |               |
               |               |     t      |               |
               |               |     e      |               |
               |   +-------+   |     r      |               |
            +--+---|Inbound|&lt;--+-----m      |               |
            |  |   |Proxy  |   |     e      |   +------+    |
            |  |   +-------+   |     d      |   |PSAP  |    |
            |  |               |     i      |   +--+---+    |
  +----+    |  |               |     a-+    |      |        |
  | UA |&lt;---+  |               |     t |    |      |        |
  |    |----+  |               |     e |    |      |        |
  +----+    |  |               |       |    |      |        |
            |  |               |     P  |   |      |        |
            |  |               |     r  |   |      |        |
            |  |   +--------+  |     o   |  |      |        |
            +--+--&gt;|Outbound|--+----&gt;v   |  |   +--+---+    |
               |   |Proxy   |  |     i    | | +-+ESRP  |    |
               |   +--------+  |     d    | | | +------+    |
               |               |     e     || |             |
               |               |     r     |+-+             |
                \             /             |               |
                 `.         ,'               \             /
                   '-------'                  `.         ,'
                                                '-------'
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: Example for Routing Asymmetry&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

				
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.2"></a><h3>1.2.&nbsp;
Multi-Stage Resolution</h3>

<p>Consider the following emergency call routing scenario shown in <a class='info' href='#stages'>Figure&nbsp;2<span> (</span><span class='info'>Example for Multi-Stage Resolution</span><span>)</span></a> where routing towards the PSAP occurs in several stages.
					An emergency call uses a SIP UA that does not run LoST on the end point. Hence,
					the call is marked with the 'urn:service:sos' Service URN <a class='info' href='#RFC5031'>[RFC5031]<span> (</span><span class='info'>Schulzrinne, H., &ldquo;A Uniform Resource Name (URN) for Emergency and Other Well-Known Services,&rdquo; January&nbsp;2008.</span><span>)</span></a>. The user's VoIP provider receives the emergency call and determines where to
					route it. Local configuration or a LoST lookup might, in our example, reveal
					that emergency calls are routed via a dedicated provider FooBar and targeted to
					a specific entity, referred as esrp1@foobar.com. FooBar does not handle
					emergency calls itself but performs another resolution step to let calls enter
					the emergency services network and in this case another resolution step takes
					place and esrp-a@esinet.org is determined as the recipient, pointing to an edge
					device at the IP-based emergency services network. Inside the emergency services
					there might be more sophisticated routing taking place somewhat depending on the
					existing structure of the emergency services infrastructure.
</p>
<p>
					<br /><hr class="insert" />
<a name="stages"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                                   ,-------.
 +----+                          ,'         `.
 | UA |--- urn:service:sos      /  Emergency  \
 +----+   \                    |   Services    |
           \  ,-------.        |   Network     |
            ,'         `.      |               |
           /   VoIP      \     |               |
          (    Provider   )    |               |
           \             /     |               |
            `.         ,'      |               |
              '---+---'        |   +------+    |
                  |            |   |PSAP  |    |
          esrp1@foobar.com     |   +--+---+    |
                  |            |      |        |
                  |            |      |        |
              ,---+---.        |      |        |
            ,'         `.      |      |        |
           /   Provider  \     |      |        |
          +    FooBar     )    |      |        |
           \             /     |      |        |
            `.         ,'      |   +--+---+    |
              '---+---'        | +-+ESRP  |    |
                  |            | | +------+    |
                  |            | |             |
                  +------------+-+             |
             esrp-a@esinet.org |               |
                                \             /
                                 `.         ,'
                                   '-------'
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: Example for Multi-Stage Resolution&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

				
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.3"></a><h3>1.3.&nbsp;
Call Forwarding</h3>

<p>Imagine the following case where an emergency call enters an emergency network
					(state.org) via an ERSP but then gets forwarded to a different emergency
					services network (in our example to police-town.org, fire-town.org or
					medic-town.org). The same considerations apply when the the police, fire and
					ambulance networks are part of the state.org sub-domains (e.g.,
					police.state.org). 
</p>
<p>
					<br /><hr class="insert" />
<a name="fwd"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                                ,-------.
                              ,'         `.
                             /  Emergency  \
                            |   Services    |
                            |   Network     |
                            |   (state.org) |
                            |               |
                            |               |
                            |   +------+    |
                            |   |PSAP  +--+ |
                            |   +--+---+  | |
                            |      |      | |
                            |      |      | |
                            |      |      | |
                            |      |      | |
                            |      |      | |
                            |   +--+---+  | |
          ------------------+---+ESRP  |  | |
          esrp-a@state.org  |   +------+  | |
                            |             | |
                            |    Call Fwd | |
                            |     +-+-+---+ |
                             \    | | |    /
                              `.  | | |  ,'
                                '-|-|-|-'           ,-------.
                         Police   | | | Fire      ,'         `.
                     +------------+ | +----+     /  Emergency  \
      ,-------.      |              |      |    |   Services    |
    ,'         `.    |              |      |    |   Network     |
   /  Emergency  \   |          Ambulance  |    | fire-town.org |
  |   Services    |  |              |      |    |               |
  |   Network     |  |              +----+ |    |   +------+    |
  |police-town.org|  |     ,-------.     | +----+---+PSAP  |    |
  |               |  |   ,'         `.   |      |   +------+    |
  |   +------+    |  |  /  Emergency  \  |      |               |
  |   |PSAP  +----+--+ |   Services    | |      |               ,
  |   +------+    |    |   Network     | |      `~~~~~~~~~~~~~~~
  |               |    |medic-town.org | |
  |               ,    |               | |
  `~~~~~~~~~~~~~~~     |   +------+    | |
                       |   |PSAP  +----+ +
                       |   +------+    |
                       |               |
                       |               ,
                       `~~~~~~~~~~~~~~~
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3: Example for Call Forwarding&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

				
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.4"></a><h3>1.4.&nbsp;
PSTN Interworking</h3>

<p>In case an emergency call enters the PSTN, as shown in <a class='info' href='#pstn'>Figure&nbsp;4<span> (</span><span class='info'>Example for PSTN Interworking</span><span>)</span></a>,
					there is no guarantee that the callback some time later does leave the same
					PSTN/VoIP gateway or that the same end point identifier is used in the forward
					as well as in the backward direction making it difficult to reliably detect PSAP
					callbacks.
</p>
<p>
					<br /><hr class="insert" />
<a name="pstn"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  +-----------+
  | PSTN      |-------------+
  | Calltaker |             |
  | Bob       |&lt;--------+   |
  +-----------+         |   v
             -------------------
         ////                   \\\\      +------------+
        |                           |     |PSTN / VoIP |
        |             PSTN          |----&gt;|Gateway     |
         \\\\                   ////      |            |
             -------------------          +----+-------+
                        ^                      |
                        |                      |
                  +-------------+              |  +--------+
                  |             |              |  |VoIP    |
                  | PSTN / VoIP |              +-&gt;|Service |
                  | Gateway     |                 |Provider|
                  |             |&lt;------Invite----|   Y    |
                  +-------------+                 +--------+
                                                   |     ^
                                                   |     |
                                                 Invite Invite
                                                   |     |
                                                   V     |
                                                  +-------+
                                                  | SIP   |
                                                  | UA    |
                                                  | Alice |
                                                  +-------+
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;4: Example for PSTN Interworking&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

				
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.5"></a><h3>1.5.&nbsp;
Network-based Service URN Resolution</h3>

<p>The mechanism described in <a class='info' href='#I-D.ietf-ecrit-framework'>[I&#8209;D.ietf&#8209;ecrit&#8209;framework]<span> (</span><span class='info'>Rosen, B., Schulzrinne, H., Polk, J., and A. Newton, &ldquo;Framework for Emergency Calling using Internet Multimedia,&rdquo; July&nbsp;2010.</span><span>)</span></a> assumes that
					all devices at the call signaling path store information about the domain of the
					communication recipient. This is necessary to match the stored domain name
					against the domain of the sender when an incoming call arrives.
</p>
<p>However, the IETF emergency services architecture also considers those cases
					where the resolution from the Service URN to the PSAP URI happens somewhere in
					the network rather than immediately at the end point itself. In such a case, the
					end device is therefore not able to match the domain of the sender with any
					information from the outgoing emergency call.
</p>
<p><a class='info' href='#late-binding'>Figure&nbsp;5<span> (</span><span class='info'>Example for Network-based Service URN Resolution</span><span>)</span></a> shows this message exchange graphically.
</p>
<p>
					<br /><hr class="insert" />
<a name="late-binding"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
     ,-------.
   ,'         `.
  /  Emergency  \
 |   Services    |
 |   Network     |
 |police-town.org|
 |               |
 |   +------+    |    Invite to police.example.com
 |   |PSAP  +&lt;---+------------------------+
 |   |      +----+------------------+     ^
 |   +------+    |Invite from       |     |
 |               ,police.example.com|     |
 `~~~~~~~~~~~~~~~                   v     |
 +--------+                        ++-----+-+
 |        |            query       |VoIP    |
 | LoST   |&lt;-----------------------|Service |
 | Server |   police.example.com   |Provider|
 |        |-----------------------&gt;|        |
 +--------+                        +--------+
                                    |     ^
                              Invite|     | Invite
                                from|     | to
                  police.example.com|     | urn:service:sos
                                    V     |
                                   +-------+
                                   | SIP   |
                                   | UA    |
                                   | Alice |
                                   +-------+
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;5: Example for Network-based Service URN Resolution&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

				
</p>
<a name="terminology"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Terminology</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD
				NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as
				described in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
</p>
<p>Emergency services related terminology is borrowed from <a class='info' href='#RFC5012'>[RFC5012]<span> (</span><span class='info'>Schulzrinne, H. and R. Marshall, &ldquo;Requirements for Emergency Context Resolution with Internet Technologies,&rdquo; January&nbsp;2008.</span><span>)</span></a>.
</p>
<a name="design"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Design Approaches</h3>

<p>The starting point of the investigations is the currently provided functionality in
				Section 13 of <a class='info' href='#I-D.ietf-ecrit-framework'>[I&#8209;D.ietf&#8209;ecrit&#8209;framework]<span> (</span><span class='info'>Rosen, B., Schulzrinne, H., Polk, J., and A. Newton, &ldquo;Framework for Emergency Calling using Internet Multimedia,&rdquo; July&nbsp;2010.</span><span>)</span></a>. It focuses on identifying a
				response to a previously made emergency call. As described in the introduction this
				approach is quite coarse grained since any call from the PSAP's domain is given
				preferential treatment. This approach is, however, likely going to be practical.
				Still there are a couple of limitations, as discussed in this document. 
</p>
<p>To expand on the initially provided solution the following description starts with
				attempt to identify the caller as a PSAP. There are two approaches for accomplishing
				this functionality.
</p>
<p>
				<br /><hr class="insert" />
<a name="identity-authz"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                 +----------+
                 | List of  |+
                 | valid    ||
                 | PSAP ids ||
                 +----------+|
                  +----------+
                      *
                      * whitelist
                      *
                      V
   Incoming      +----------+    Normal
   SIP Msg       | SIP      |+   Treatment
  --------------&gt;| Entity   ||=============&gt;
   + Identity    |          ||(if not in whitelist)
                 +----------+|
                 +----------+
                      ||
                      ||
                      || Preferential
                      || Treatment
                      ++=============&gt;
                        (in whitelist)
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;6: Identity-based Authorization&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

			
</p>
<p>In <a class='info' href='#identity-authz'>Figure&nbsp;6<span> (</span><span class='info'>Identity-based Authorization</span><span>)</span></a> an interaction is presented that allows a SIP
				entity to make a policy decision whether to bypass installed authorization policies
				and thereby providing preferential treatment. To make this decision the sender's
				identity is compared with a whitelist of valid PSAPs. The identity assurances in SIP
				can come in different forms, such as SIP Identity <a class='info' href='#RFC4474'>[RFC4474]<span> (</span><span class='info'>Peterson, J. and C. Jennings, &ldquo;Enhancements for Authenticated Identity Management in the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2006.</span><span>)</span></a> or with
				P-Asserted-Identity <a class='info' href='#RFC3325'>[RFC3325]<span> (</span><span class='info'>Jennings, C., Peterson, J., and M. Watson, &ldquo;Private Extensions to the Session Initiation Protocol (SIP) for Asserted Identity within Trusted Networks,&rdquo; November&nbsp;2002.</span><span>)</span></a>. The former technique relies on a
				cryptographic assurance and the latter on a chain of trust.
</p>
<p> The establishment of a whitelist with PSAP identities is operationally complex and
				does not easily scale world wide. When there is a local relationship between the
				VSP/ASP and the PSAP then populating the whitelist is far simpler.
</p>
<p>An alternative approach to an identity based authorization model is outlined in <a class='info' href='#trait'>Figure&nbsp;7<span> (</span><span class='info'>Trait-based Authorization</span><span>)</span></a>. In fact, RFC 4484 <a class='info' href='#RFC4484'>[RFC4484]<span> (</span><span class='info'>Peterson, J., Polk, J., Sicker, D., and H. Tschofenig, &ldquo;Trait-Based Authorization Requirements for the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2006.</span><span>)</span></a> already illustrated
				the basic requirements for this technique.
</p>
<p>
				<br /><hr class="insert" />
<a name="trait"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
               +----------+
               | List of  |+
               | trust    ||
               | anchor   ||
               +----------+|
                +----------+
                    *
                    *
                    *
                    V
 Incoming      +----------+    Normal
 SIP Msg       | SIP      |+   Treatment
--------------&gt;| Entity   ||=============&gt;
 + trait       |          ||(no indication
               +----------+| of PSAP)
               +----------+
                    ||
                    ||
                    || Preferential
                    || Treatment
                    ++=============&gt;
                      (indicated as
                       PSAP)
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;7: Trait-based Authorization&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

			
</p>
<p> In a trait-based authorization scenario an incoming SIP message contains a form of
				trait, i.e. some form of assertion. The assertion contains an indication that the
				sending party has the role of a PSAP (or similar emergency services entity). The
				assertion is either cryptographically protected to enable end-to-end verification or
				an chain of trust security model has to be assumed. In <a class='info' href='#trait'>Figure&nbsp;7<span> (</span><span class='info'>Trait-based Authorization</span><span>)</span></a> we
				assume an end-to-end security model where trust anchors are provisioned to ensure
				the ability for a SIP entity to verify the received assertion. 
</p>
<p> From a solution point of view various approaches are feasible, such as SIP SAML (see
					<a class='info' href='#I-D.ietf-sip-saml'>[I&#8209;D.ietf&#8209;sip&#8209;saml]<span> (</span><span class='info'>Tschofenig, H., Hodges, J., Peterson, J., Polk, J., and D. Sicker, &ldquo;SIP SAML Profile and Binding,&rdquo; March&nbsp;2010.</span><span>)</span></a>) or URI Parameters for indicating the Calling
				Party's Category and Originating Line Information (see <a class='info' href='#I-D.patel-dispatch-cpc-oli-parameter'>[I&#8209;D.patel&#8209;dispatch&#8209;cpc&#8209;oli&#8209;parameter]<span> (</span><span class='info'>Patel, M., Jesske, R., and M. Dolly, &ldquo;Uniform Resource Identifier (URI) Parameters for indicating the Calling Party's Category and Originating Line Information,&rdquo; June&nbsp;2010.</span><span>)</span></a>). 
</p>
<p>Still, a drawback of the outlined approaches above is that it does not allow any
				mechanism to distinguish different types of calls initiated by PSAPs. Not every call
				from a PSAP is indeed a response to an emergency call.
</p>
<p>This leads us to another mechanism on top of the previously presented onces, namely
				the indication is that the communication attempt is of emergency nature. As such, it
				is a slight modification of the one presented previously. In addition to the
				indication that the calling party is a PSAP there is an expression that the specific
				call is of emergency services nature. This indication cannot be verified by external
				parties, similarly to the emergency call marking for a citizen-to-authority
				emergency call using a Service URN, because it heavily depends on the intention of
				the call taker itself. 
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Topics for Investigation</h3>

<p> When you make an IP-based emergency call to an IP-based PSAP then the PSAP will get
				two pieces of identity information about the emergency caller: </p>
<ul class="text">
<li>Contact-URI: Information that uniquely identifies the device the call came
						from. 
</li>
<li>Address of Record: Long-term contact information 
</li>
</ul><p>
			
</p>
<p>Should the callback functionality be tied to a previous emergency call setup and as
				such enabled only for a specific time? For example, preferential treatment for
				callbacks could be provided only within one hour after the initial emergency call
				was made. 
</p>
<p>Is it expected that the callback reaches primarily the device that initiated the
				emergency call? In some cases the device that was used to originally initiate the
				call does not respond anymore to a callback (e.g. imagine a fixed line phone that
				was used to report a fire in a house and is out of order soon afterwards). Since the
				initial emergency call provided a second contact mechanism (namely the address of
				record) it could be used by the call taker as well. Should this communication also
				experience the same type of override privilege as the initially transmitted callback
				to the emergency caller's device? 
</p>
<p>Should any restrictions be made regarding the media being used for callback? Is it
				acceptable to return an instant message when the caller started the conversation
				with audio?
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Security Considerations</h3>

<p>This document provides discussions problems of PSAP callbacks and explores the design
				space.
</p>
<p>An important aspect from a security point of view is the relationship between the
				emergency services network and the VSP (assuming that the emergency call travels via
				the VSP and not directly between the SIP UA and the PSAP). If there is some form of
				relationship between the emergency services operator and the VSP then the
				identification of a PSAP call back is less problematic than in the case where the
				two entities have not entered in some form of relationship that would allow the VSP
				to verify whether the marked callback message indeed came from a legitimate source.
</p>
<p> The main attack surface can be seen in the usage of PSAP callback marking to bypass
				blacklists, ignore call forwarding procedures and similar features to interact with
				users and to get their attention. For example, using PSAP callback marking devices
				would be able to recognize these types of incoming messages leading to the device
				overriding user interface configurations, such as vibrate-only mode. As such, the
				requirement is to ensure that the mechanisms described in this document can not be
				used for malicious purposes, including SPIT.
</p>
<p>It is important that PSAP callback marked SIP messages, which cannot be verified
				adequately, are treated like a call that does not have any marking attached instead
				of failing the call processing procedure.
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Acknowledgements</h3>

<p>We would like to thank members from the ECRIT working group, in particular Brian
				Rosen, for their discussions around PSAP callbacks. The working group discussed the
				topic of callbacks at their virtual interim meeting in February 2010 and the
				following persons provided valuable input: John Elwell, Bernard Aboba, Cullen
				Jennings, Keith Drage, Marc Linsner, Roger Marshall, Dan Romascanu, Geoff Thompson,
				Milan Patel, Janet Gunn.
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>7.1.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>7.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-ecrit-framework">[I-D.ietf-ecrit-framework]</a></td>
<td class="author-text">Rosen, B., Schulzrinne, H., Polk, J., and A. Newton, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-ecrit-framework-11.txt">Framework for Emergency Calling using Internet Multimedia</a>,&rdquo; draft-ietf-ecrit-framework-11 (work in progress), July&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-ecrit-framework-11.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-sip-saml">[I-D.ietf-sip-saml]</a></td>
<td class="author-text">Tschofenig, H., Hodges, J., Peterson, J., Polk, J., and D. Sicker, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-sip-saml-07.txt">SIP SAML Profile and Binding</a>,&rdquo; draft-ietf-sip-saml-07 (work in progress), March&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-sip-saml-07.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.patel-dispatch-cpc-oli-parameter">[I-D.patel-dispatch-cpc-oli-parameter]</a></td>
<td class="author-text">Patel, M., Jesske, R., and M. Dolly, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-patel-dispatch-cpc-oli-parameter-03.txt">Uniform Resource Identifier (URI) Parameters for indicating the Calling Party's Category and Originating Line Information</a>,&rdquo; draft-patel-dispatch-cpc-oli-parameter-03 (work in progress), June&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-patel-dispatch-cpc-oli-parameter-03.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.patel-ecrit-sos-parameter">[I-D.patel-ecrit-sos-parameter]</a></td>
<td class="author-text">Patel, M., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-patel-ecrit-sos-parameter-09.txt">SOS Uniform Resource Identifier (URI) Parameter for Marking of Session Initiation Protocol (SIP) Requests related to Emergency Services</a>,&rdquo; draft-patel-ecrit-sos-parameter-09 (work in progress), July&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-patel-ecrit-sos-parameter-09.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3325">[RFC3325]</a></td>
<td class="author-text">Jennings, C., Peterson, J., and M. Watson, &ldquo;<a href="http://tools.ietf.org/html/rfc3325">Private Extensions to the Session Initiation Protocol (SIP) for Asserted Identity within Trusted Networks</a>,&rdquo; RFC&nbsp;3325, November&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3325.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4474">[RFC4474]</a></td>
<td class="author-text">Peterson, J. and C. Jennings, &ldquo;<a href="http://tools.ietf.org/html/rfc4474">Enhancements for Authenticated Identity Management in the Session Initiation Protocol (SIP)</a>,&rdquo; RFC&nbsp;4474, August&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4474.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4484">[RFC4484]</a></td>
<td class="author-text">Peterson, J., Polk, J., Sicker, D., and H. Tschofenig, &ldquo;<a href="http://tools.ietf.org/html/rfc4484">Trait-Based Authorization Requirements for the Session Initiation Protocol (SIP)</a>,&rdquo; RFC&nbsp;4484, August&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4484.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5012">[RFC5012]</a></td>
<td class="author-text">Schulzrinne, H. and R. Marshall, &ldquo;<a href="http://tools.ietf.org/html/rfc5012">Requirements for Emergency Context Resolution with Internet Technologies</a>,&rdquo; RFC&nbsp;5012, January&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5012.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5031">[RFC5031]</a></td>
<td class="author-text">Schulzrinne, H., &ldquo;<a href="http://tools.ietf.org/html/rfc5031">A Uniform Resource Name (URN) for Emergency and Other Well-Known Services</a>,&rdquo; RFC&nbsp;5031, January&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5031.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Henning Schulzrinne</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Columbia University</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Department of Computer Science</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">450 Computer Science Building</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">New York, NY  10027</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">US</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 212 939 7004</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:hgs+ecrit@cs.columbia.edu">hgs+ecrit@cs.columbia.edu</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.cs.columbia.edu">http://www.cs.columbia.edu</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Hannes Tschofenig</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia Siemens Networks</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Linnoitustie 6</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Espoo  02600</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+358 (50) 4871445</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:Hannes.Tschofenig@gmx.net">Hannes.Tschofenig@gmx.net</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.tschofenig.priv.at">http://www.tschofenig.priv.at</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Milan Patel</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nortel</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Maidenhead Office Park, Westacott Way</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Maidenhead  SL6 3QH</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">UK</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:milanpa@nortel.com">milanpa@nortel.com</a></td></tr>
</table>
</body></html>
