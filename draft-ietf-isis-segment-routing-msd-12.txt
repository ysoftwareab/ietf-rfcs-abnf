



IS-IS Working Group                                          J. Tantsura
Internet-Draft                                            Nuage Networks
Intended status: Standards Track                             U. Chunduri
Expires: November 17, 2018                           Huawei Technologies
                                                               S. Aldrin
                                                             Google, Inc
                                                             L. Ginsberg
                                                           Cisco Systems
                                                            May 16, 2018


             Signaling MSD (Maximum SID Depth) using IS-IS
                 draft-ietf-isis-segment-routing-msd-12

Abstract

   This document defines a way for an IS-IS Router to advertise multiple
   types of supported Maximum SID Depths (MSDs) at node and/or link
   granularity.  Such advertisements allow entities (e.g., centralized
   controllers) to determine whether a particular SID stack can be
   supported in a given network.  This document only defines one type of
   MSD maximum label imposition, but defines an encoding that can
   support other MSD types.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on November 17, 2018.

Copyright Notice

   Copyright (c) 2018 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents



Tantsura, et al.        Expires November 17, 2018               [Page 1]

Internet-Draft                                                  May 2018


   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
     1.1.  Conventions used in this document . . . . . . . . . . . .   3
       1.1.1.  Terminology . . . . . . . . . . . . . . . . . . . . .   3
     1.2.  Requirements Language . . . . . . . . . . . . . . . . . .   3
   2.  Node MSD Advertisement  . . . . . . . . . . . . . . . . . . .   4
   3.  Link MSD Advertisement  . . . . . . . . . . . . . . . . . . .   5
   4.  Using Node and Link MSD Advertisements  . . . . . . . . . . .   6
   5.  Base MPLS Imposition MSD  . . . . . . . . . . . . . . . . . .   6
   6.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   6
   7.  Security Considerations . . . . . . . . . . . . . . . . . . .   7
   8.  Contributors  . . . . . . . . . . . . . . . . . . . . . . . .   8
   9.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   8
   10. References  . . . . . . . . . . . . . . . . . . . . . . . . .   8
     10.1.  Normative References . . . . . . . . . . . . . . . . . .   8
     10.2.  Informative References . . . . . . . . . . . . . . . . .   8
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   9

1.  Introduction

   When Segment Routing(SR) paths are computed by a centralized
   controller, it is critical that the controller learns the Maximum SID
   Depth(MSD) that can be imposed at each node/link a given SR path to
   insure that the SID stack depth of a computed path doesn't exceed the
   number of SIDs the node is capable of imposing.

   PCEP SR extensions draft [I-D.ietf-pce-segment-routing] signals MSD
   in SR PCE Capability TLV and METRIC Object.  However, if PCEP is not
   supported/configured on the head-end of an SR tunnel or a Binding-SID
   anchor node and controller does not participate in IGP routing, it
   has no way to learn the MSD of nodes and links.  BGP-LS [RFC7752]
   defines a way to expose topology and associated attributes and
   capabilities of the nodes in that topology to a centralized
   controller.  MSD signaling by BGP-LS has been defined in
   [I-D.ietf-idr-bgp-ls-segment-routing-msd].  Typically, BGP-LS is
   configured on a small number of nodes that do not necessarily act as
   head-ends.  In order for BGP-LS to signal MSD for all the nodes and
   links in the network MSD is relevant, MSD capabilites should be
   advertised by every IS-IS router in the network.



Tantsura, et al.        Expires November 17, 2018               [Page 2]

Internet-Draft                                                  May 2018


   Other types of MSD are known to be useful.  For example,
   [I-D.ietf-isis-mpls-elc] defines Readable Label Depth Capability
   (RLDC) that is used by a head-end to insert an Entropy Label (EL) at
   a depth, that could be read by transit nodes.

   This document defines an extension to IS-IS used to advertise one or
   more types of MSD at node and/or link granularity.  It also creates
   an IANA registry for assigning MSD type identifiers.  It also defines
   the Base MPLS Imposition MSD type.  In the future it is expected,
   that new MSD types will be defined to signal additional capabilities
   e.g., entropy labels, SIDs that can be imposed through recirculation,
   or SIDs associated with another dataplane e.g., IPv6.  Although MSD
   advertisements are associated with Segment Routing, the
   advertisements MAY be present even if Segment Routing itself is not
   enabled.

1.1.  Conventions used in this document

1.1.1.  Terminology

   BGP-LS: Distribution of Link-State and TE Information using Border
   Gateway Protocol

   BMI: Base MPLS Imposition is the number of MPLS labels which can be
   imposed inclusive of all service/transport/special labels

   IS-IS: Intermediate System to Intermediate System

   MSD: Maximum SID Depth - the number of SIDs a node or a link on a
   node can support

   PCC: Path Computation Client

   PCE: Path Computation Element

   PCEP: Path Computation Element Protocol

   SID: Segment Identifier

   SR: Segment Routing

1.2.  Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in BCP
   14 [RFC2119] [RFC8174] when, and only when, they appear in all
   capitals, as shown here .



Tantsura, et al.        Expires November 17, 2018               [Page 3]

Internet-Draft                                                  May 2018


2.  Node MSD Advertisement

   The node MSD sub-TLV is defined within the body of the IS-IS Router
   Capability TLV [RFC7981], to carry the provisioned SID depth of the
   router originating the Router Capability TLV.  Node MSD is the
   smallest MSD supported by the node on the set of interfaces
   configured for use by the advertising IGP instance.  MSD values may
   be learned via a hardware API or may be provisioned.

          0                   1
          0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5

         +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
         |    Type       |   Length      |
         +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
         |   MSD-Type    | MSD Value     |
         +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
         //     ...................     //
         +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
         |   MSD-Type    | MSD Value     |
         +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


                        Figure 1: Node MSD Sub-TLV

   Type: 23 (allocated by IANA via the early assignment process)

   Length: variable (minimum of 2, multiple of 2 octets) and represents
   the total length of value field.

   Value: field consists of one or more pairs of a 1 octet MSD-Type and
   1 octet MSD-Value.

   MSD-Type is one of the values defined in the MSD Types registry
   created by the IANA Section of this document.

   MSD-Value is a number in the range of 0-255.  For all MSD-Types, 0
   represents lack of the ability to support SID stack of any depth; any
   other value represents that of the node.  This value MUST represent
   the lowest value supported by any link configured for use by the
   advertising IS-IS instance.

   This sub-TLV is optional.  The scope of the advertisement is specific
   to the deployment.

   If there exist multiple Node MSD advertisements for the same MSD-Type
   originated by the same router, the procedures defined in [RFC7981]
   apply.



Tantsura, et al.        Expires November 17, 2018               [Page 4]

Internet-Draft                                                  May 2018


3.  Link MSD Advertisement

   The link MSD sub-TLV is defined for TLVs 22, 23, 25, 141, 222, and
   223 to carry the MSD of the interface associated with the link.  MSD
   values may be learned via a hardware API or may be provisioned.

         0                   1
         0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5

         +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
         |    Type       |   Length      |
         +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
         |   MSD-Type    | MSD Value     |
         +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
         //     ...................     //
         +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
         |   MSD-Type    | MSD Value     |
         +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


                        Figure 2: Link MSD Sub-TLV

   Type: 15 (allocated by IANA via the early assignment process)

   Length: variable (minimum of 2, multiple of 2 octets) and represents
   the total length of value field.

   Value: consists of one or more pairs of a 1 octet MSD-Type and 1
   octet Value.

   MSD-Type is one of the values defined in the MSD Types registry
   created by the IANA Section of this document.

   MSD-Value is a number in the range of 0-255.  For all MSD-Types, 0
   represents lack of the ability to support SID stack of any depth; any
   other value represents that of the link when used as an outgoing
   link.

   This sub-TLV is optional.  The scope of the advertisement is specific
   to the deployment.

   If multiple Link MSD advertisements for the same MSD Type and the
   same link are received, the procedure used to select which copy is
   used is undefined.







Tantsura, et al.        Expires November 17, 2018               [Page 5]

Internet-Draft                                                  May 2018


4.  Using Node and Link MSD Advertisements

   When Link MSD is present for a given MSD type, the value of the Link
   MSD MUST take preference over the Node MSD.  When a Link MSD type is
   not signalled but the Node MSD type is, then the Node MSD type value
   MUST be considered as the MSD value for that link.

   In order to increase flooding efficiency, it is RECOMMENDED that
   routers with homogenous link MSD values advertise just the Node MSD
   value.

   The meaning of the absence of both Node and Link MSD advertisements
   for a given MSD type is specific to the MSD type.  Generally it can
   only be inferred that the advertising node does not support
   advertisement of that MSD type.  However, in some cases the lack of
   advertisement might imply that the functionality associated with the
   MSD type is not supported.  The correct interpretation MUST be
   specified when an MSD type is defined.

5.  Base MPLS Imposition MSD

   Base MPLS Imposition MSD (BMI-MSD) signals the total number of MPLS
   labels a node is capable of imposing, including all
   service/transport/special labels.

   Absence of BMI-MSD advertisements indicates solely that the
   advertising node does not support advertisement of this capability.

6.  IANA Considerations

   This document requests IANA to allocate a sub-TLV type for the new
   sub TLV proposed in Section 2 of this document from IS-IS Router
   Capability TLV Registry as defined by [RFC7981].

   IANA has allocated the following value through the early assignment
   process:


      Value     Description                      Reference
      -----     ---------------                  -------------
      23        Node MSD                         This document

                            Figure 3: Node MSD

   This document requests IANA to allocate a sub-TLV type as defined in
   Section 3 from Sub-TLVs for TLVs 22, 23, 25, 141, 222 and 223
   registry.




Tantsura, et al.        Expires November 17, 2018               [Page 6]

Internet-Draft                                                  May 2018


   IANA has allocated the following value through the early assignment
   process:


      Value     Description                      Reference
      -----     ---------------                  -------------
      15        Link MSD                         This document

                            Figure 4: Link MSD

   Per TLV information where Link MSD sub-TLV can be part of:


      TLV  22 23 25 141 222 223
      ---  --------------------
           y  y  y   y   y   y

           Figure 5: TLVs where LINK MSD Sub-TLV can be present

   This document requests creation of an IANA managed registry under a
   new category of "Interior Gateway Protocol (IGP) Parameters" IANA
   registries to identify MSD types as proposed in Section 2 and
   Section 3.  The registration procedure is "Expert Review" as defined
   in [RFC8126].  Suggested registry name is "MSD types".  Types are an
   unsigned 8 bit number.  The following values are defined by this
   document


      Value     Name                             Reference
      -----     ---------------------            -------------
      0         Reserved                         This document
      1         Base MPLS Imposition MSD         This document
      2-250     Unassigned                       This document
      251-254   Experimental                     This document
      255       Reserved                         This document

                  Figure 6: MSD Types Codepoints Registry

7.  Security Considerations

   Security considerations as specified by [RFC7981] are applicable to
   this document.

   Advertisement of the additional information defined in this document
   that is false, e.g., an MSD that is incorrect, may result in a path
   computation failing, having a service unavailable, or instantiation
   of a path that can't be supported by the head-end (the node
   performing the imposition).



Tantsura, et al.        Expires November 17, 2018               [Page 7]

Internet-Draft                                                  May 2018


8.  Contributors

   The following people contributed to this document:

   Peter Psenak

   Email: ppsenak@cisco.com

9.  Acknowledgements

   The authors would like to thank Acee Lindem, Ketan Talaulikar,
   Stephane Litkowski and Bruno Decraene for their reviews and valuable
   comments.

10.  References

10.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC7981]  Ginsberg, L., Previdi, S., and M. Chen, "IS-IS Extensions
              for Advertising Router Information", RFC 7981,
              DOI 10.17487/RFC7981, October 2016,
              <https://www.rfc-editor.org/info/rfc7981>.

   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC
              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,
              May 2017, <https://www.rfc-editor.org/info/rfc8174>.

10.2.  Informative References

   [I-D.ietf-idr-bgp-ls-segment-routing-msd]
              Tantsura, J., Chunduri, U., Mirsky, G., and S. Sivabalan,
              "Signaling Maximum SID Depth using Border Gateway Protocol
              Link-State", draft-ietf-idr-bgp-ls-segment-routing-msd-01
              (work in progress), October 2017.

   [I-D.ietf-isis-mpls-elc]
              Xu, X., Kini, S., Sivabalan, S., Filsfils, C., and S.
              Litkowski, "Signaling Entropy Label Capability and
              Readable Label-stack Depth Using IS-IS", draft-ietf-isis-
              mpls-elc-03 (work in progress), January 2018.






Tantsura, et al.        Expires November 17, 2018               [Page 8]

Internet-Draft                                                  May 2018


   [I-D.ietf-pce-segment-routing]
              Sivabalan, S., Filsfils, C., Tantsura, J., Henderickx, W.,
              and J. Hardwick, "PCEP Extensions for Segment Routing",
              draft-ietf-pce-segment-routing-11 (work in progress),
              November 2017.

   [RFC7752]  Gredler, H., Ed., Medved, J., Previdi, S., Farrel, A., and
              S. Ray, "North-Bound Distribution of Link-State and
              Traffic Engineering (TE) Information Using BGP", RFC 7752,
              DOI 10.17487/RFC7752, March 2016,
              <https://www.rfc-editor.org/info/rfc7752>.

   [RFC8126]  Cotton, M., Leiba, B., and T. Narten, "Guidelines for
              Writing an IANA Considerations Section in RFCs", BCP 26,
              RFC 8126, DOI 10.17487/RFC8126, June 2017,
              <https://www.rfc-editor.org/info/rfc8126>.

Authors' Addresses

   Jeff Tantsura
   Nuage Networks

   Email: jefftant.ietf@gmail.com


   Uma Chunduri
   Huawei Technologies

   Email: uma.chunduri@huawei.com


   Sam Aldrin
   Google, Inc

   Email: aldrin.ietf@gmail.com


   Les Ginsberg
   Cisco Systems

   Email: ginsberg@cisco.com










Tantsura, et al.        Expires November 17, 2018               [Page 9]
