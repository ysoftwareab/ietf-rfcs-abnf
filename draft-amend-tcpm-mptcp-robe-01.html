<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Multipath TCP Extension for Robust Session Establishment</title>
<meta content="Markus Amend" name="author">
<meta content="Jiao Kang" name="author">
<meta content="
       Multipath TCP extends the plain, single-path limited, TCP towards the capability
of multipath transmission. This greatly improves the reliability and performance
of TCP communication. For backwards compatibility reasons the Multipath TCP
was designed to setup successfully an initial path first, after which subsequent
paths can be added for multipath transmission. For that reason the Multipath
TCP has the same limitations as the plain TCP during connection setup, in
case the selected path is not functional. 
       This document proposes a set of implementations and possible combinations
thereof, that provide a more Robust Establishment (RobE) of MPTCP sessions.
It includes RobE_TIMER, RobE_SIM, RobE_eSIM and RobE_IPS. 
       RobE_TIMER is designed to stay close to MPTCP in that standard functionality
is used wherever possible. Resiliency against network outages is achieved
by modifying the SYN retransmission timer: If one path is defective, another
path is used. 
       RobE_SIM and RobE_eSIM provides the ability to simultaneously use multiple
paths for connection setup. They ensure connectivity if at least one functional
path out of a bunch of paths is given and offers beside that the opportunity
to significantly improve loading times of Internet services. 
       RobE_IPS provides a heuristic to select properly an initial path for connection
establishment with a remote host based on empirical data derived from previous
connection information. 
       In practice, these independent solutions can be complementary used. This
document also presents the design and protocol procedure for those combinations
in addition to the respective stand-alone solutions. 
    " name="description">
<meta content="xml2rfc 3.5.0" name="generator">
<meta content="Internet-Draft" name="keyword">
<meta content="draft-amend-tcpm-mptcp-robe-01" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.5.0
    Python 3.6.12
    appdirs 1.4.4
    ConfigArgParse 1.3
    google-i18n-address 2.4.0
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.6.2
    pycountry 20.7.3
    pyflakes 2.2.0
    PyYAML 5.4.1
    requests 2.25.1
    setuptools 53.0.0
    six 1.15.0
-->
<link href="/tmp/draft-amend-tcpm-mptcp-robe.prepped-a_i_k0j0.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: avoid-page;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">MPTCP RobE</td>
<td class="right">February 2021</td>
</tr></thead>
<tfoot><tr>
<td class="left">Amend &amp; Kang</td>
<td class="center">Expires 26 August 2021</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">TCP Maintenance and Minor Extensions</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-amend-tcpm-mptcp-robe-01</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2021-02-22" class="published">22 February 2021</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Experimental</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2021-08-26">26 August 2021</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">M. Amend</div>
<div class="org">DT</div>
</div>
<div class="author">
      <div class="author-name">J. Kang</div>
<div class="org">Huawei</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Multipath TCP Extension for Robust Session Establishment</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">Multipath TCP extends the plain, single-path limited, TCP towards the capability
of multipath transmission. This greatly improves the reliability and performance
of TCP communication. For backwards compatibility reasons the Multipath TCP
was designed to setup successfully an initial path first, after which subsequent
paths can be added for multipath transmission. For that reason the Multipath
TCP has the same limitations as the plain TCP during connection setup, in
case the selected path is not functional.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
<p id="section-abstract-2">This document proposes a set of implementations and possible combinations
thereof, that provide a more Robust Establishment (RobE) of MPTCP sessions.
It includes RobE_TIMER, RobE_SIM, RobE_eSIM and RobE_IPS.<a href="#section-abstract-2" class="pilcrow">¶</a></p>
<p id="section-abstract-3">RobE_TIMER is designed to stay close to MPTCP in that standard functionality
is used wherever possible. Resiliency against network outages is achieved
by modifying the SYN retransmission timer: If one path is defective, another
path is used.<a href="#section-abstract-3" class="pilcrow">¶</a></p>
<p id="section-abstract-4">RobE_SIM and RobE_eSIM provides the ability to simultaneously use multiple
paths for connection setup. They ensure connectivity if at least one functional
path out of a bunch of paths is given and offers beside that the opportunity
to significantly improve loading times of Internet services.<a href="#section-abstract-4" class="pilcrow">¶</a></p>
<p id="section-abstract-5">RobE_IPS provides a heuristic to select properly an initial path for connection
establishment with a remote host based on empirical data derived from previous
connection information.<a href="#section-abstract-5" class="pilcrow">¶</a></p>
<p id="section-abstract-6">In practice, these independent solutions can be complementary used. This
document also presents the design and protocol procedure for those combinations
in addition to the respective stand-alone solutions.<a href="#section-abstract-6" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 26 August 2021.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2021 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="toc compact ulEmpty">
<li class="toc compact ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a><a href="#section-toc.1-1.1.1" class="pilcrow">¶</a></p>
<ul class="toc compact ulEmpty">
<li class="toc compact ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="xref">1.1</a>.  <a href="#name-terminology" class="xref">Terminology</a><a href="#section-toc.1-1.1.2.1.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc compact ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="xref">2</a>.  <a href="#name-implementation-without-mptc" class="xref">Implementation without MPTCP protocol adaptation</a><a href="#section-toc.1-1.2.1" class="pilcrow">¶</a></p>
<ul class="toc compact ulEmpty">
<li class="toc compact ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1" class="keepWithNext"><a href="#section-2.1" class="xref">2.1</a>.  <a href="#name-re-transmission-timerrobe_t" class="xref">Re-transmission Timer(RobE_TIMER)</a><a href="#section-toc.1-1.2.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc compact ulEmpty" id="section-toc.1-1.2.2.2">
                <p id="section-toc.1-1.2.2.2.1"><a href="#section-2.2" class="xref">2.2</a>.  <a href="#name-simultaneous-initial-paths-" class="xref">Simultaneous Initial Paths Simple Version (RobE_SIM)</a><a href="#section-toc.1-1.2.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc compact ulEmpty" id="section-toc.1-1.2.2.3">
                <p id="section-toc.1-1.2.2.3.1"><a href="#section-2.3" class="xref">2.3</a>.  <a href="#name-heuristic-initial-path-sele" class="xref">Heuristic Initial Path Selection (RobE_IPS)</a><a href="#section-toc.1-1.2.2.3.1" class="pilcrow">¶</a></p>
<ul class="toc compact ulEmpty">
<li class="toc compact ulEmpty" id="section-toc.1-1.2.2.3.2.1">
                    <p id="section-toc.1-1.2.2.3.2.1.1"><a href="#section-2.3.1" class="xref">2.3.1</a>.  <a href="#name-architecture" class="xref">Architecture</a><a href="#section-toc.1-1.2.2.3.2.1.1" class="pilcrow">¶</a></p>
</li>
                  <li class="toc compact ulEmpty" id="section-toc.1-1.2.2.3.2.2">
                    <p id="section-toc.1-1.2.2.3.2.2.1"><a href="#section-2.3.2" class="xref">2.3.2</a>.  <a href="#name-typical-scenarios" class="xref">Typical Scenarios</a><a href="#section-toc.1-1.2.2.3.2.2.1" class="pilcrow">¶</a></p>
</li>
                  <li class="toc compact ulEmpty" id="section-toc.1-1.2.2.3.2.3">
                    <p id="section-toc.1-1.2.2.3.2.3.1"><a href="#section-2.3.3" class="xref">2.3.3</a>.  <a href="#name-path-decision-information" class="xref">Path decision information</a><a href="#section-toc.1-1.2.2.3.2.3.1" class="pilcrow">¶</a></p>
</li>
                  <li class="toc compact ulEmpty" id="section-toc.1-1.2.2.3.2.4">
                    <p id="section-toc.1-1.2.2.3.2.4.1"><a href="#section-2.3.4" class="xref">2.3.4</a>.  <a href="#name-initial-path-selection-use-" class="xref">Initial Path Selection use local RTT information</a><a href="#section-toc.1-1.2.2.3.2.4.1" class="pilcrow">¶</a></p>
</li>
                </ul>
</li>
              <li class="toc compact ulEmpty" id="section-toc.1-1.2.2.4">
                <p id="section-toc.1-1.2.2.4.1"><a href="#section-2.4" class="xref">2.4</a>.  <a href="#name-combination-of-robe_sim-and" class="xref">Combination of RobE_SIM and RobE_IPS</a><a href="#section-toc.1-1.2.2.4.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc compact ulEmpty" id="section-toc.1-1.2.2.5">
                <p id="section-toc.1-1.2.2.5.1"><a href="#section-2.5" class="xref">2.5</a>.  <a href="#name-combination-of-robe_timer-a" class="xref">Combination of RobE_TIMER and RobE_IPS</a><a href="#section-toc.1-1.2.2.5.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc compact ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-implementation-with-bi-dire" class="xref">Implementation with Bi-directional MPTCP Support</a><a href="#section-toc.1-1.3.1" class="pilcrow">¶</a></p>
<ul class="toc compact ulEmpty">
<li class="toc compact ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="xref">3.1</a>.  <a href="#name-simultaneous-initial-paths-e" class="xref">Simultaneous Initial Paths Extended Version (RobE_eSIM)</a><a href="#section-toc.1-1.3.2.1.1" class="pilcrow">¶</a></p>
<ul class="toc compact ulEmpty">
<li class="toc compact ulEmpty" id="section-toc.1-1.3.2.1.2.1">
                    <p id="section-toc.1-1.3.2.1.2.1.1"><a href="#section-3.1.1" class="xref">3.1.1</a>.  <a href="#name-robe_esim-implicit-negotiat" class="xref">RobE_eSIM implicit Negotiation and Procedure</a><a href="#section-toc.1-1.3.2.1.2.1.1" class="pilcrow">¶</a></p>
</li>
                  <li class="toc compact ulEmpty" id="section-toc.1-1.3.2.1.2.2">
                    <p id="section-toc.1-1.3.2.1.2.2.1"><a href="#section-3.1.2" class="xref">3.1.2</a>.  <a href="#name-robe_esim-explicit-negotiat" class="xref">RobE_eSIM explicit Negotiation and Procedure</a><a href="#section-toc.1-1.3.2.1.2.2.1" class="pilcrow">¶</a></p>
</li>
                  <li class="toc compact ulEmpty" id="section-toc.1-1.3.2.1.2.3">
                    <p id="section-toc.1-1.3.2.1.2.3.1"><a href="#section-3.1.3" class="xref">3.1.3</a>.  <a href="#name-protocol-adaptation" class="xref">Protocol Adaptation</a><a href="#section-toc.1-1.3.2.1.2.3.1" class="pilcrow">¶</a></p>
</li>
                  <li class="toc compact ulEmpty" id="section-toc.1-1.3.2.1.2.4">
                    <p id="section-toc.1-1.3.2.1.2.4.1"><a href="#section-3.1.4" class="xref">3.1.4</a>.  <a href="#name-fallback-mechanisms" class="xref">Fallback Mechanisms</a><a href="#section-toc.1-1.3.2.1.2.4.1" class="pilcrow">¶</a></p>
</li>
                  <li class="toc compact ulEmpty" id="section-toc.1-1.3.2.1.2.5">
                    <p id="section-toc.1-1.3.2.1.2.5.1"><a href="#section-3.1.5" class="xref">3.1.5</a>.  <a href="#name-comparison-robe_sim-and-rob" class="xref">Comparison Robe_SIM and RobE_eSIM</a><a href="#section-toc.1-1.3.2.1.2.5.1" class="pilcrow">¶</a></p>
</li>
                  <li class="toc compact ulEmpty" id="section-toc.1-1.3.2.1.2.6">
                    <p id="section-toc.1-1.3.2.1.2.6.1"><a href="#section-3.1.6" class="xref">3.1.6</a>.  <a href="#name-security-consideration" class="xref">Security Consideration</a><a href="#section-toc.1-1.3.2.1.2.6.1" class="pilcrow">¶</a></p>
</li>
                </ul>
</li>
              <li class="toc compact ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="xref">3.2</a>.  <a href="#name-heuristic-initial-path-selec" class="xref">Heuristic Initial Path Selection with remote RTT Measurement</a><a href="#section-toc.1-1.3.2.2.1" class="pilcrow">¶</a></p>
<ul class="toc compact ulEmpty">
<li class="toc compact ulEmpty" id="section-toc.1-1.3.2.2.2.1">
                    <p id="section-toc.1-1.3.2.2.2.1.1"><a href="#section-3.2.1" class="xref">3.2.1</a>.  <a href="#name-description" class="xref">Description</a><a href="#section-toc.1-1.3.2.2.2.1.1" class="pilcrow">¶</a></p>
</li>
                  <li class="toc compact ulEmpty" id="section-toc.1-1.3.2.2.2.2">
                    <p id="section-toc.1-1.3.2.2.2.2.1"><a href="#section-3.2.2" class="xref">3.2.2</a>.  <a href="#name-protocol-adaptation-2" class="xref">Protocol Adaptation</a><a href="#section-toc.1-1.3.2.2.2.2.1" class="pilcrow">¶</a></p>
</li>
                  <li class="toc compact ulEmpty" id="section-toc.1-1.3.2.2.2.3">
                    <p id="section-toc.1-1.3.2.2.2.3.1"><a href="#section-3.2.3" class="xref">3.2.3</a>.  <a href="#name-fallback-mechanism" class="xref">Fallback Mechanism</a><a href="#section-toc.1-1.3.2.2.2.3.1" class="pilcrow">¶</a></p>
</li>
                  <li class="toc compact ulEmpty" id="section-toc.1-1.3.2.2.2.4">
                    <p id="section-toc.1-1.3.2.2.2.4.1"><a href="#section-3.2.4" class="xref">3.2.4</a>.  <a href="#name-security-consideration-2" class="xref">Security Consideration</a><a href="#section-toc.1-1.3.2.2.2.4.1" class="pilcrow">¶</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="toc compact ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-iana-considerations" class="xref">IANA Considerations</a><a href="#section-toc.1-1.4.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc compact ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-references" class="xref">References</a><a href="#section-toc.1-1.5.1" class="pilcrow">¶</a></p>
<ul class="toc compact ulEmpty">
<li class="toc compact ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="xref">5.1</a>.  <a href="#name-normative-references" class="xref">Normative References</a><a href="#section-toc.1-1.5.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc compact ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="xref">5.2</a>.  <a href="#name-informative-references" class="xref">Informative References</a><a href="#section-toc.1-1.5.2.2.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc compact ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-appendix.a" class="xref"></a><a href="#name-authors-addresses" class="xref">Authors' Addresses</a><a href="#section-toc.1-1.6.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">Multipath TCP Robust Session Establishment (MPTCP RobE) is a set of extensions
to regular MPTCP <span>[<a href="#RFC6824" class="xref">RFC6824</a>]</span> and its next version
<span>[<a href="#RFC8684" class="xref">RFC8684</a>]</span>, which releases single path limitations
during the initial connection setup.
Several scenarios require and benefit from a reliable and in time connection
setup which is not covered by <span>[<a href="#RFC6824" class="xref">RFC6824</a>]</span> and
<span>[<a href="#RFC8684" class="xref">RFC8684</a>]</span> so far.  MPTCP was designed to be
compliant with the TCP standard <span>[<a href="#RFC0793" class="xref">RFC0793</a>]</span> and introduced therefore
the concept of an initial TCP flow while adding subsequent flows after
successful multipath negotiation on the initial path.
While fulfilling its purpose, MPTCP is however fully dependent on the transmission
characteristics of the communication link selected for initiating MPTCP.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2"><a href="#ref-mptcp-signaling" class="xref">Figure 1</a> shows the traditional way of MPTCP handshaking
with an MP_CAPABLE exchanged first, followed when successfully
negotiated by additional flows engaging MP_JOIN. <span>[<a href="#RFC6824" class="xref">RFC6824</a>]</span> and the 
next MPTCP <span>[<a href="#RFC8684" class="xref">RFC8684</a>]</span> differ in that a Key-A is
sent with the first MP_CAPABLE or not.<a href="#section-1-2" class="pilcrow">¶</a></p>
<span id="name-mptcp-connection-setup"></span><div id="ref-mptcp-signaling">
<figure id="figure-1">
        <div class="artwork art-text alignLeft" id="section-1-3.1">
<pre>
            Host A                                  Host B
     ------------------------                       ----------
     Address A1    Address A2                       Address B1
     ----------    ----------                       ----------
         |             |                                |
         |            SYN + MP_CAPABLE(Key-A[*])        |
         |---------------------------------------------&gt;|
         |&lt;---------------------------------------------|
         |          SYN/ACK + MP_CAPABLE(Key-B)         |
         |             |                                |
         |        ACK + MP_CAPABLE(Key-A, Key-B)        |
         |---------------------------------------------&gt;|
         |             |                                |
         |             |   SYN + MP_JOIN(Token-B, R-A)  |
         |             |-------------------------------&gt;|
         |             |&lt;-------------------------------|
         |             | SYN/ACK + MP_JOIN(HMAC-B, R-B) |
         |             |                                |
         |             |     ACK + MP_JOIN(HMAC-A)      |
         |             |-------------------------------&gt;|
         |             |&lt;-------------------------------|
         |             |             ACK                |

         [*] Key-A in the first MP-capable is related to
             RFC6824 only and does not exist in RFC8684.
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-mptcp-connection-setup" class="selfRef">MPTCP connection setup</a>
        </figcaption></figure>
</div>
<p id="section-1-4">Multipath TCP itself enables hosts to exchange packets belonging to a single
connection over several paths. Implemented in mobile phones (UEs), these
paths are usually assigned to different network interfaces within the UE
and correspond to different access networks such as cellular and WiFi.
The path or network interface for initiating the initial subflow setup
is most often provided by the operation system of the UE. For example,
if both a cellular connection and WiFi are present in a mobile phone,
WiFi is usually the interface offered to initiate the MPTCP session.<a href="#section-1-4" class="pilcrow">¶</a></p>
<p id="section-1-5">This design falls short in situations where the default path does not provide
the best performance compared to other available paths. In a worst case the
default path is not even capable of setting up the initial flow letting any
other functional path unused. For example, if the WiFi signal is weak, broken
or cannot forward traffic to the destination, the establishment of the subflow
will be delayed or impossible. This in turn, leads to a longer startup delay
or no communication at all for services using MPTCP even if other functional
paths are available. Even in scenarios where all paths are functional but
services would benefit from a setup over the path with the lowest latency,
MPTCP has no mean to support this demand.<a href="#section-1-5" class="pilcrow">¶</a></p>
<p id="section-1-6">It can be concluded, that sequential path establishment relying with an
initial path establishment over an externally given default route will
result in experience reduction when using MPTCP. So this document
proposes solutions to overcome the aforementioned limitations and
provides a more robust connection setup compared to traditional MPTCP.<a href="#section-1-6" class="pilcrow">¶</a></p>
<p id="section-1-7">Introduction of RobE_SIM and RobE_eSIM aims to overcome the limitations
of <span>[<a href="#RFC6824" class="xref">RFC6824</a>]</span> and <span>[<a href="#RFC8684" class="xref">RFC8684</a>]</span>, using one initial flow and
introduces the concept of multiple potential initial flows triggered
simultaneously.Potential initial flows give the freedom
to use more than one path to request multipath capability and select the
initial flow at a later point. Potential initial flow mechanisms and the
gain of robustness and performance over the traditional MPTCP connection
setup are evaluated in <span>[<a href="#RobE_slides" class="xref">RobE_slides</a>]</span> and <span>[<a href="#RobE_paper" class="xref">RobE_paper</a>]</span>. RobE_SIM is
a break-before-make mechanism, guaranteeing at least the robust
connection establishment, however the RobE_eSIM reuses every potential initial
flow request to combine it with less overhead and accelerated multipath availability,
leveraging a new MPTCP option MP_JOIN_CAP. From a standardization perspective,
the RobE_SIM is fully compliant with <span>[<a href="#RFC6824" class="xref">RFC6824</a>]</span> and
<span>[<a href="#RFC8684" class="xref">RFC8684</a>]</span> and is herein more of a descriptive and
procedural nature. The RobE_eSIM requires a new MPTCP option but offers
the potential to significantly improve the MPTCP experience.<a href="#section-1-7" class="pilcrow">¶</a></p>
<p id="section-1-8">For the limitation of the default initial path, RobE_IPS makes no changes
to standard MPTCP procedure and improves the performance of connection establishment
by introducing an initial path selection strategy and required algorithms.
The input for strategy and algorithms is the transmission status information
which represents the transmission performance of each available path or network
interface. The transmission status information is characterized by at least
one of the parameters: signal strength, throughput, round-trip time (RTT),
and link success rate. In this way, a path with better transmission performance
can be learned and determined and the respective network interface can be
used for connection establishment.<a href="#section-1-8" class="pilcrow">¶</a></p>
<p id="section-1-9">The most simple approach for a robust MPTCP session establishment is RobE_TIMER,
iterating the process of initial path establishment over all available paths,
if the previous try has failed. Triggering a new try on a next path is depending
on an expiration timer, preferably re-use TCP's in-built expiration timer.<a href="#section-1-9" class="pilcrow">¶</a></p>
<p id="section-1-10"><a href="#table_robe_features" class="xref">Table 1</a> summarizes the impact of RobE_TIMER, RobE_SIM,
RobE_eSIM, and RobE_IPS compared to <span>[<a href="#RFC6824" class="xref">RFC6824</a>]</span> and <span>[<a href="#RFC8684" class="xref">RFC8684</a>]</span>.<a href="#section-1-10" class="pilcrow">¶</a></p>
<span id="name-overview-robe-features-duri"></span><div id="table_robe_features">
<table class="center" id="table-1">
        <caption>
<a href="#table-1" class="selfRef">Table 1</a>:
<a href="#name-overview-robe-features-duri" class="selfRef">Overview RobE features during initial connection setup</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" rowspan="1" colspan="1">Scenario</th>
            <th class="text-left" rowspan="1" colspan="1">MPTCP</th>
            <th class="text-left" rowspan="1" colspan="1">RobE_TIMER</th>
            <th class="text-left" rowspan="1" colspan="1">RobE_SIM</th>
            <th class="text-left" rowspan="1" colspan="1">RobE_eSIM</th>
            <th class="text-left" rowspan="1" colspan="1">RobE_IPS</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">IP packet loss</td>
            <td class="text-left" rowspan="1" colspan="1">Delayed connection</td>
            <td class="text-left" rowspan="1" colspan="1">In the scope of timer</td>
            <td class="text-left" rowspan="1" colspan="1">No impact</td>
            <td class="text-left" rowspan="1" colspan="1">No impact</td>
            <td class="text-left" rowspan="1" colspan="1">Delayed connection</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">IP broken</td>
            <td class="text-left" rowspan="1" colspan="1">No connection</td>
            <td class="text-left" rowspan="1" colspan="1">In the scope of timer</td>
            <td class="text-left" rowspan="1" colspan="1">No impact</td>
            <td class="text-left" rowspan="1" colspan="1">No impact</td>
            <td class="text-left" rowspan="1" colspan="1">No connection</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">IP setup duration de-pendency</td>
            <td class="text-left" rowspan="1" colspan="1">Default route</td>
            <td class="text-left" rowspan="1" colspan="1">Default route (+ path 1..n)</td>
            <td class="text-left" rowspan="1" colspan="1">Fastest path</td>
            <td class="text-left" rowspan="1" colspan="1">Fastest path</td>
            <td class="text-left" rowspan="1" colspan="1">Selected path</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">MP avail-ability duration</td>
            <td class="text-left" rowspan="1" colspan="1">MP_CAPABLE HS + MP_JOIN HS</td>
            <td class="text-left" rowspan="1" colspan="1">sum_1..n( MP_CAPABLE_n HS) + MP_JOIN HS</td>
            <td class="text-left" rowspan="1" colspan="1">MP_CAPABLE HS + MP_JOIN HS</td>
            <td class="text-left" rowspan="1" colspan="1">max( MP_CAPABLE_1 .. MP_CAPABLE_n HS)</td>
            <td class="text-left" rowspan="1" colspan="1">MP_CAPABLE HS + MP_JOIN HS</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Guaran-teeing session setup</td>
            <td class="text-left" rowspan="1" colspan="1">Depends on the default route</td>
            <td class="text-left" rowspan="1" colspan="1">Yes</td>
            <td class="text-left" rowspan="1" colspan="1">Yes</td>
            <td class="text-left" rowspan="1" colspan="1">Yes</td>
            <td class="text-left" rowspan="1" colspan="1">Depends on selection</td>
          </tr>
        </tbody>
      </table>
</div>
<aside id="section-1-12">
        <p id="section-1-12.1">IP: Initial Path; MP: Multi-Path; HS: Handshake<a href="#section-1-12.1" class="pilcrow">¶</a></p>
</aside>
<div id="terminology">
<section id="section-1.1">
        <h3 id="name-terminology">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-terminology" class="section-name selfRef">Terminology</a>
        </h3>
<p id="section-1.1-1">This document makes use of a number of terms that are either MPTCP-specific
or have defined meaning in the context of MPTCP, as follows:<a href="#section-1.1-1" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-1.1-2">
          <dt id="section-1.1-2.1">Path:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.2">
  A sequence of links between a sender and a receiver, defined
in this context by a 4-tuple of source and destination address/port pairs.<a href="#section-1.1-2.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.1-2.3">Subflow:</dt>
          <dd style="margin-left: 1.5em" id="section-1.1-2.4">
  A flow of TCP segments operating over an individual path,
which forms part of a larger MPTCP connection.  A subflow is
started and terminated similar to a regular TCP connection.<a href="#section-1.1-2.4" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</div>
</section>
</div>
<div id="unilateral_impl">
<section id="section-2">
      <h2 id="name-implementation-without-mptc">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-implementation-without-mptc" class="section-name selfRef">Implementation without MPTCP protocol adaptation</a>
      </h2>
<p id="section-2-1">RobE_TIMER, RobE_SIM, and RobE_IPS are compatible with the current MPTCP
protocol definitions in <span>[<a href="#RFC6824" class="xref">RFC6824</a>]</span> and <span>[<a href="#RFC8684" class="xref">RFC8684</a>]</span> but may lack of the
full optimization potential which requires protocol adaptation as
detailed in <a href="#bi_impl" class="xref">Section 3</a>. Following sections will describe the newly
introduced mechanisms in detail.<a href="#section-2-1" class="pilcrow">¶</a></p>
<div id="robe_timer">
<section id="section-2.1">
        <h3 id="name-re-transmission-timerrobe_t">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-re-transmission-timerrobe_t" class="section-name selfRef">Re-transmission Timer(RobE_TIMER)</a>
        </h3>
<p id="section-2.1-1">In RobE_TIMER, a new connection is initiated by sending a SYN+MP_CAPABLE
along the initial path. If this path is functional, the solution will
perform in the same way as classic MPTCP: the initial flow will be
established, and subsequent flows can be created afterwards. If however
the initial path is faulty, the retransmission will be triggered on
another path. This path might circumvent the dysfunctional network, and
allow the client to create an initial subflow. The first path is now
seen as a subsequent path and the client sends SYN+MP_JOIN messages to
create a subsequent flow.<a href="#section-2.1-1" class="pilcrow">¶</a></p>
<p id="section-2.1-2">In high latency networks, the initial SYN+MP_CAPABLE messages might be
delayed until the client retries sending them on another path. Once the
second SYN arrives at the server, it will try to complete the three-way
handshake. If the first SYN was delayed by more than the retransmission
time plus half a Round Trip Time (RTT) of the second path, it will
arrive at the server after the second SYN. The server could now treat
the segment as obsolete and drop it.<a href="#section-2.1-2" class="pilcrow">¶</a></p>
<span id="name-the-robe_timer-solution"></span><div id="ref-timer">
<figure id="figure-2">
          <div class="artwork art-text alignCenter" id="section-2.1-3.1">
<pre>
       Host A                                    Host B
------------------------                       ----------
Address A1    Address A2                       Address B1
----------    ----------                       ----------
    |             |                                |
    |            SYN + MP_CAPABLE(Key-A[*])        |
    |Timer----------------------------------------&gt;|
    |             |   SYN + MP_CAPABLE(Key-A'[*])  |
    |             |-------------------------------&gt;|
    |             |   SYN/ACK+MP_CAPABLE(Key-B')   |
    |             |&lt;-------------------------------|
    |             | ACK + MP_CAPABLE(Key-A',Key-B')|
    |             |-------------------------------&gt;|
    |             |   SYN + MP_JOIN(Token-B',R-A)  |
    |---------------------------------------------&gt;|
    |   Subflow will be set up as normal MPTCP     |
    |                                              |

     [*] Key-A in the first MP-capable is related to
      RFC6824 only and does not exist in RFC8684.
</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-the-robe_timer-solution" class="selfRef">The RobE_TIMER Solution</a>
          </figcaption></figure>
</div>
<p id="section-2.1-4">Immediately after sending the final ACK of the initial handshake, subflows
are established on the remaining paths as defined in <span>[<a href="#RFC6824" class="xref">RFC6824</a>]</span> and <span>[<a href="#RFC8684" class="xref">RFC8684</a>]</span><a href="#section-2.1-4" class="pilcrow">¶</a></p>
<p id="section-2.1-5">[Notes: How to set the Timer is TBD. If there is the case that the first
SYN on default path arrives earlier than that from the second path, the MPTCP
connection will be initialized on the path of the first SYN. The server could
treat the second SYN as obsolete and drop it.]<a href="#section-2.1-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="robe_sim">
<section id="section-2.2">
        <h3 id="name-simultaneous-initial-paths-">
<a href="#section-2.2" class="section-number selfRef">2.2. </a><a href="#name-simultaneous-initial-paths-" class="section-name selfRef">Simultaneous Initial Paths Simple Version (RobE_SIM)</a>
        </h3>
<p id="section-2.2-1">RobE_SIM is a sender only implementation and no prior negotiation with
the receiver side is required. In RobE_SIM, the MPTCP connection setup
benefits from the fastest path. As shown in <a href="#ref_mptcp_robe_sim_signaling" class="xref">Figure 3</a>,
host A initiates the connection handshake on more than one path
independently (SA1 and SA2). The paths selected for RobE_SIM and
referred to as potential initial flows, can belong to the number of
interfaces on the device or a subset selected on experience. When Host A
receives the first SYN/ACK back from Host B (SA3), the path carrying
this message is identified as the normal initial path. Host A sends then
immediately a TCP RST message (SA6.1) on any other path used for
simultaneous connection setup causing an immediate termination of
assigned flows (break-before-make). The terminated ones are merged as
subsequent subflows following the JOIN procedure described in
<span>[<a href="#RFC6824" class="xref">RFC6824</a>]</span> and <span>[<a href="#RFC8684" class="xref">RFC8684</a>]</span>. The process is equivalent to any other
scenario where the SYN/ACK arrives on an other path than depicted in
<a href="#ref_mptcp_robe_sim_signaling" class="xref">Figure 3</a>.<a href="#section-2.2-1" class="pilcrow">¶</a></p>
<span id="name-mptcp-robe_sim-connection-s"></span><div id="ref_mptcp_robe_sim_signaling">
<figure id="figure-3">
          <div class="artwork art-text alignCenter" id="section-2.2-2.1">
<pre>
                Host A                                  Host B
        ------------------------                       ----------
        Address A1    Address A2                       Address B1
        ----------    ----------                       ----------
            |             |                                |
            |            SYN + MP_CAPABLE(Key-A[*])        |
    (SA1)   |---------------------------------------------&gt;|  (SB1)
            |             |    SYN + MP_CAPABLE(Key-A'[*]) |
    (SA2)   |             |-------------------------------&gt;|  (SB2)
            |             |                                |
    (SA3)   |&lt;---------------------------------------------|  (SB3)
            |          SYN/ACK + MP_CAPABLE(Key-B)         |
    (SA4)   |             |&lt;-------------------------------|  (SB4)
            |             |   SYN/ACK + MP_CAPABLE(Key-B') |
            |             |                                |
            |        ACK + MP_CAPABLE(Key-A, Key-B)        |
    (SA5)   |---------------------------------------------&gt;|  (SB5)
            |             |             RST                |
    (SA6.1) |             |-------------------------------&gt;|  (SB6.1)
   RobE SIM |             |   SYN + MP_JOIN(Token-B, R-A)  |
   (robust) |             |-------------------------------&gt;|
            |             |         MP_JOIN Process...     |

            [*] Key-A in the first MP-capable is related to
                RFC6824 only and does not exist in RFC8684.
</pre>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
<a href="#name-mptcp-robe_sim-connection-s" class="selfRef">MPTCP RobE_SIM Connection Setup</a>
          </figcaption></figure>
</div>
</section>
</div>
<div id="robe_ips">
<section id="section-2.3">
        <h3 id="name-heuristic-initial-path-sele">
<a href="#section-2.3" class="section-number selfRef">2.3. </a><a href="#name-heuristic-initial-path-sele" class="section-name selfRef">Heuristic Initial Path Selection (RobE_IPS)</a>
        </h3>
<div id="arc_1">
<section id="section-2.3.1">
          <h4 id="name-architecture">
<a href="#section-2.3.1" class="section-number selfRef">2.3.1. </a><a href="#name-architecture" class="section-name selfRef">Architecture</a>
          </h4>
<p id="section-2.3.1-1"><a href="#ref_ips_arc" class="xref">Figure 4</a> provides the architecture for RobE_IPS and employs an "Initial Path Selection"
logic which can be integrated into the MPTCP stack or exists as an isolated
module in the terminal. The IPS logic has access to a set of transmission
status information for each available path or its belonging network interfaces.
When an application starts a first communication, IPS selects based on the
available path transmission characteristics the path with the highest probability
to succeed.<a href="#section-2.3.1-1" class="pilcrow">¶</a></p>
<span id="name-architecture-for-initial-pa"></span><div id="ref_ips_arc">
<figure id="figure-4">
            <div class="artwork art-text alignCenter" id="section-2.3.1-2.1">
<pre>
+-------------------+              +-------------------+
|     Terminal      |              |      Server       |
|  +-------------+  |              |  +-------------+  |
|  |Application n|  |              |  |Application n|  |
|  +-------------+  |              |  +-------------+  |
|        |          |              |         |         |
|  +-------------+  |              |         |         |
|  |Initial-path |  |-------+      |         |         |
|  |  Selection  |  |       |      |         |         |
|  +-------------+  |       |      |         |         |
|        |          |  +--------+  |         |         |
|  +-------------+  |--|Internet|--|  +-------------+  |
|  | MPTCP Stack |  |--+--------+--|  | MPTCP Stack |  |
|  +-------------+  |              |  +-------------+  |
+-------------------+              +-------------------+
</pre>
</div>
<figcaption><a href="#figure-4" class="selfRef">Figure 4</a>:
<a href="#name-architecture-for-initial-pa" class="selfRef">Architecture for Initial-path Selection</a>
            </figcaption></figure>
</div>
</section>
</div>
<div id="typical_flow_1">
<section id="section-2.3.2">
          <h4 id="name-typical-scenarios">
<a href="#section-2.3.2" class="section-number selfRef">2.3.2. </a><a href="#name-typical-scenarios" class="section-name selfRef">Typical Scenarios</a>
          </h4>
<p id="section-2.3.2-1">Two typical RobE_IPS scenarios are presented in this
section. <a href="#ref_mptcp_robe_ips_est" class="xref">Figure 5</a> shows the "Initial Path
Selection" logic executed for each MPTCP connection establishment.
On the other hand <a href="#ref_mptcp_robe_ips_default" class="xref">Figure 6</a> describes that
"Initial Path Selection" in case no path information is available.
Considering the fact that no heuristics are given before a recent MPTCP connection
was established, the default initial path can be adopted. Further combinations
and implementations with more or less sophisticated heuristics are possible.<a href="#section-2.3.2-1" class="pilcrow">¶</a></p>
<span id="name-robe_ips-for-each-connectio"></span><div id="ref_mptcp_robe_ips_est">
<figure id="figure-5">
            <div class="artwork art-text alignCenter" id="section-2.3.2-2.1">
<pre>
     +---------------+
     |  Application  |
     |    Request    |
     +---------------+
             |
             V
     +---------------+
+---&gt;| Initial-path  |&lt;---+
|    |   Selection   |    |
|    +---------------+    |
|            |            |
|            V            |Info
|    +---------------+    |
|    |  Set initial  |----+
|    |     path      |
|    |   for MPTCP   |
|    +---------------+
|            |
|            V
|    +---------------+
|No  |Establish MPTCP|
+----|  Connection   |
     +---------------+
             |Yes
             V
</pre>
</div>
<figcaption><a href="#figure-5" class="selfRef">Figure 5</a>:
<a href="#name-robe_ips-for-each-connectio" class="selfRef">RobE_IPS for each connection establishment</a>
            </figcaption></figure>
</div>
<span id="name-robe_ips-using-default-rout"></span><div id="ref_mptcp_robe_ips_default">
<figure id="figure-6">
            <div class="artwork art-text alignCenter" id="section-2.3.2-3.1">
<pre>
       +--------------+
       |  Application |
       |    Request   |
       +--------------+
               |
               V
       +--------------+Yes
       |     First    |------------+
       |  Connection? |            |
       +--------------+            |
               |No                 |
               V                   |
       +--------------+            V
+-----&gt;| Initial-path |&lt;-+     +-------+
|      |   Selection  |  |     |Default|
|      +--------------+  |     |initial|
|              |         |     |  path |
|              |         |     +-------+
|              V         |Info     |
|      +--------------+  |         |
|      |  Set initial |--+         |
|      |     path     |            |
|      |   for MPTCP  |            |
|      +--------------+            |
|              |                   |
|              V                   |
|No    +--------------+            |
+------| Successful? |&lt;-----------+
       +--------------+
               |Yes
               V

</pre>
</div>
<figcaption><a href="#figure-6" class="selfRef">Figure 6</a>:
<a href="#name-robe_ips-using-default-rout" class="selfRef">RobE_IPS using default route when no meaningful heuristic available</a>
            </figcaption></figure>
</div>
<p id="section-2.3.2-4"><a href="#ref_mptcp_robe_ips_proc" class="xref">Figure 7</a> shows the process flow of "Initial Path
Selection". Upon a request from an application, the IPS logic will
acquire transmission status information which represents the
transmission performance of each available path or network interface
and evaluate it.
The transmission status information is characterized by at least one
of the parameters: signal strength, throughput, round-trip time (RTT),
and link success rate. In this way, the path with the best
transmission performance can be determined and used for connection
establishment.<a href="#section-2.3.2-4" class="pilcrow">¶</a></p>
<span id="name-implementation-process-for-"></span><div id="ref_mptcp_robe_ips_proc">
<figure id="figure-7">
            <div class="artwork art-text alignCenter" id="section-2.3.2-5.1">
<pre>
             |
             V
+---------------------------+
|Acquire transmission status|
| info for available paths  |
+---------------------------+
             |
             V
+---------------------------+
|   Evaluating the status   |
|    for available paths    |
+---------------------------+
             |No
             V
+---------------------------+
| Determining an available  |
|     path with better      |
|      transmission         |
|      performance          |
+---------------------------+
             |
             V
+---------------------------+
|     Using the network     |
|         interface         |
|corresponding to the path |
| with better transmission  |
|performance for connection |
|       establishment       |
+---------------------------+
             |
             V
</pre>
</div>
<figcaption><a href="#figure-7" class="selfRef">Figure 7</a>:
<a href="#name-implementation-process-for-" class="selfRef">Implementation process for Initial Path Selection</a>
            </figcaption></figure>
</div>
</section>
</div>
<div id="path_decision_info">
<section id="section-2.3.3">
          <h4 id="name-path-decision-information">
<a href="#section-2.3.3" class="section-number selfRef">2.3.3. </a><a href="#name-path-decision-information" class="section-name selfRef">Path decision information</a>
          </h4>
<p id="section-2.3.3-1">The level of heuristic can be mainly divided into three layers: application
level, transport-layer level and link-layer level based on the information
acquisition method. For example, RTT can be calculated for each path within
an MPTCP connection and belongs thereof to the transport-layer level.
The transmission status information for each available path SHOULD be characterized
by at least one of the parameters: signal strength, throughput, RTT, and link
success rate.
Application level information are more seen for statistical purposes.<a href="#section-2.3.3-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.3.3-2.1">Application level: application name, domain name, port number, and location.<a href="#section-2.3.3-2.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-2.3.3-2.2">Transport-layer level: RTT, CWND, Error rate.<a href="#section-2.3.3-2.2" class="pilcrow">¶</a>
</li>
          </ul>
</section>
</div>
<div id="initial_path_selected_on_RTT">
<section id="section-2.3.4">
          <h4 id="name-initial-path-selection-use-">
<a href="#section-2.3.4" class="section-number selfRef">2.3.4. </a><a href="#name-initial-path-selection-use-" class="section-name selfRef">Initial Path Selection use local RTT information</a>
          </h4>
<p id="section-2.3.4-1"><a href="#ref_mptcp_robe_ips_rtt" class="xref">Figure 8</a> presents an "Initial Path Selection" logic
based on RTT, e.g. assuming two paths over LTE and WiFi access.
RTT calculation on the transport layer usually
reflects the time when an information is sent and a related acknowledgment
received. For an asymmetric usage (e.g. download only) of a communication
it might happen that recent RTT calculation is only available on sender side
which is possibly not the side which employs the IPS logic. A solution for
this can be found in <a href="#robe_ips_ext" class="xref">Section 3.2</a>. Instead of using the most
recent RTT value of a path a filtered value consisting
of several measured RTTs can be used. A RTT can also be derived from link
layer information but may have a limited meaning only when it does not
represent the end-to-end latency.<a href="#section-2.3.4-1" class="pilcrow">¶</a></p>
<span id="name-initial-path-selection-base"></span><div id="ref_mptcp_robe_ips_rtt">
<figure id="figure-8">
            <div class="artwork art-text alignCenter" id="section-2.3.4-2.1">
<pre>
+-------------------+
|    New Session    |
+-------------------+
          |
          V
+-------------------+ No
|Running Connections|-----------+
|(LTE.RTT&lt;WiFi.RTT) |           |
+-------------------+           |
          |Yes                  |
          V                     V
+-------------------+   +----------------+
|     Set LTE as    |   |   Set WiFi as  |
|    initial path   |   |  initial path  |
+-------------------+   +----------------+
</pre>
</div>
<figcaption><a href="#figure-8" class="selfRef">Figure 8</a>:
<a href="#name-initial-path-selection-base" class="selfRef">Initial-path Selection based on RTT</a>
            </figcaption></figure>
</div>
</section>
</div>
</section>
</div>
<div id="comb_sim_and_ips">
<section id="section-2.4">
        <h3 id="name-combination-of-robe_sim-and">
<a href="#section-2.4" class="section-number selfRef">2.4. </a><a href="#name-combination-of-robe_sim-and" class="section-name selfRef">Combination of RobE_SIM and RobE_IPS</a>
        </h3>
<p id="section-2.4-1">In an implementation, a single solution may not be sufficient to achieve an expected
behavior. Combination of approaches to improve robustness is recommended
therefore. <a href="#ref_mptcp_comb_robe_sim_ips" class="xref">Figure 9</a> shows the combination of
RobE_SIM and RobE_IPS. RobE_SIM can be used at the
very beginning when the sender is without any path information followed by
RobE_IPS for consecutive connections.<a href="#section-2.4-1" class="pilcrow">¶</a></p>
<span id="name-combination-of-robe_sim-and-"></span><div id="ref_mptcp_comb_robe_sim_ips">
<figure id="figure-9">
          <div class="artwork art-text alignCenter" id="section-2.4-2.1">
<pre>
       +--------------+
       |  Application |
       |    Request   |
       +--------------+
               |
               V
       +--------------+
+-----&gt;| Any data for | No
|      | Initial Path |----------+
|      |  Selection?  |          |
|      +--------------+          |
|              |                 |
|              V                 V
|      +--------------+     +--------+
|      | Initial-path |     |RobE_SIM|
|      |  Selection   |&lt;-+  +--------+
|      +--------------+  |       |
|              |         |       |
|              V         |Info   |
|      +---------------+ |       |
|No    |Establish MPTCP|-+       |
+------|  Connection   |&lt;--------+
       +---------------+
               |
               V
 No    +---------------+
&lt;------|  Successful ? |
Network+---------------+
Problem        |Yes
               V
</pre>
</div>
<figcaption><a href="#figure-9" class="selfRef">Figure 9</a>:
<a href="#name-combination-of-robe_sim-and-" class="selfRef">Combination of RobE_SIM and RobE_IPS</a>
          </figcaption></figure>
</div>
</section>
</div>
<div id="comb_timer_and_ips">
<section id="section-2.5">
        <h3 id="name-combination-of-robe_timer-a">
<a href="#section-2.5" class="section-number selfRef">2.5. </a><a href="#name-combination-of-robe_timer-a" class="section-name selfRef">Combination of RobE_TIMER and RobE_IPS</a>
        </h3>
<p id="section-2.5-1">Since RobE_IPS solely does not guarantee that a session can be set up
based on the selection of initial path, it can also be combined with
RobE_TIMER which generates less overhead compared to the combination
with RobE_SIM in <a href="#comb_sim_and_ips" class="xref">Section 2.4</a> and guarantees session setup.
RobE_TIMER can be introduced to optimize the control of path switching
when the initial path selected by RobE_IPS is dysfunctional. When the
system enables RobE_IPS and uses the selected initial path for session
establishment, it sets the timer for path switching. When timer is
expired, the system will change to another path to re-establish
connection according to <a href="#robe_timer" class="xref">Section 2.1</a>.<a href="#section-2.5-1" class="pilcrow">¶</a></p>
<span id="name-combination-of-robe_timer-an"></span><div id="ref_mptcp_comb_robe_timer_ips">
<figure id="figure-10">
          <div class="artwork art-text alignCenter" id="section-2.5-2.1">
<pre>
       +---------------+
       |  Application  |
       |    Request    |
       +---------------+
               |
               V
       +---------------+
       |  Initial Path |
|-----&gt;|   Selection   |
|      | and Set Timer |
|      +---------------+
|              |
|              V
|Yes   +---------------+
+------| Timer is up?  |
       +---------------+
               |No
               V
       +---------------+
       |Establish MPTCP|
       |  Connection   |
       +---------------+
               |
               V
 No    +---------------+
&lt;------|  Successful?  |
Network+---------------+
Problem        |Yes
               V
</pre>
</div>
<figcaption><a href="#figure-10" class="selfRef">Figure 10</a>:
<a href="#name-combination-of-robe_timer-an" class="selfRef">Combination of RobE_Timer and RobE_IPS</a>
          </figcaption></figure>
</div>
</section>
</div>
</section>
</div>
<div id="bi_impl">
<section id="section-3">
      <h2 id="name-implementation-with-bi-dire">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-implementation-with-bi-dire" class="section-name selfRef">Implementation with Bi-directional MPTCP Support</a>
      </h2>
<p id="section-3-1">Solutions which requires bi-directional support between two MPTCP hosts promise
to have better and possibly more features. However, they cannot be defined
without extending current standards in <span>[<a href="#RFC6824" class="xref">RFC6824</a>]</span> and
<span>[<a href="#RFC8684" class="xref">RFC8684</a>]</span>. The RobE_SIM and RobE_IPS approach are
both capable of profiting from an explicit support of the remote end
host and will be defined within this section.<a href="#section-3-1" class="pilcrow">¶</a></p>
<div id="robe_ext">
<section id="section-3.1">
        <h3 id="name-simultaneous-initial-paths-e">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-simultaneous-initial-paths-e" class="section-name selfRef">Simultaneous Initial Paths Extended Version (RobE_eSIM)</a>
        </h3>
<p id="section-3.1-1">RobE_eSIM extends RobE_SIM by reusing the potential initial flows. This
eliminates the overhead from RobE_SIM by introducing a new option
MP_JOIN_CAP and accelerate the transmission speed by early availability
of multiple paths. Further it relaxes the dependency on a reliable third
ACK of the 3-way handshake in <span>[<a href="#RFC8684" class="xref">RFC8684</a>]</span>. Remote endpoint support can
be negotiated in two ways, an implicit one described in
<a href="#robe_esim_implicit" class="xref">Section 3.1.1</a> or an explicit on which is described in <a href="#robe_esim_explicit" class="xref">Section 3.1.2</a>.<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<div id="robe_esim_implicit">
<section id="section-3.1.1">
          <h4 id="name-robe_esim-implicit-negotiat">
<a href="#section-3.1.1" class="section-number selfRef">3.1.1. </a><a href="#name-robe_esim-implicit-negotiat" class="section-name selfRef">RobE_eSIM implicit Negotiation and Procedure</a>
          </h4>
<p id="section-3.1.1-1">Similar to RobE_SIM in <a href="#robe_sim" class="xref">Section 2.2</a>, the establishment process of
<span>[<a href="#RFC6824" class="xref">RFC6824</a>]</span> or <span>[<a href="#RFC8684" class="xref">RFC8684</a>]</span> is applied independently on multiple paths
simultaneously. In <a href="#ref_mptcp_robe_eSIM_implicit_signaling" class="xref">Figure 11</a> this is
shown in SA1 and SA2. The first path which returns a SYN/ACK (e.g. SA3)
is selected as the initial path and proceeds with the traditional
establishment process (SA5). Any other path which has to send the final
ACK of the 3-way handshake includes a new option MP_JOIN_CAP (see
definition in <a href="#mp_join_cap_opt" class="xref">Section 3.1.3.2</a>) instead of an MP_CAPABLE (SA6.2).<a href="#section-3.1.1-1" class="pilcrow">¶</a></p>
<span id="name-mptcp-robe_esim-implicit-co"></span><div id="ref_mptcp_robe_eSIM_implicit_signaling">
<figure id="figure-11">
            <div class="artwork art-text alignCenter" id="section-3.1.1-2.1">
<pre>
                Host A                                  Host B
        ------------------------                       ----------
        Address A1    Address A2                       Address B1
        ----------    ----------                       ----------
            |             |                                |
            |            SYN + MP_CAPABLE(Key-A[*])        |
    (SA1)   |---------------------------------------------&gt;|  (SB1)
            |             |    SYN + MP_CAPABLE(Key-A'[*]) |
    (SA2)   |             |-------------------------------&gt;|  (SB2)
            |             |                                |
    (SA3)   |&lt;---------------------------------------------|  (SB3)
            |          SYN/ACK + MP_CAPABLE(Key-B)         |
    (SA4)   |             |&lt;-------------------------------|  (SB4)
            |             |   SYN/ACK + MP_CAPABLE(Key-B') |
            |             |                                |
            |        ACK + MP_CAPABLE(Key-A, Key-B)        |
    (SA5)   |---------------------------------------------&gt;|  (SB5)
            |             |                                |
    (SA6.2) |             |                                |  (SB6.2)
   RobE EXT |             | ACK + MP_JOIN_CAP(Key-A, HMAC) |
   (+fast)  |             |-------------------------------&gt;|

            [*] Key-A in the first MP-capable is related to
                RFC6824 only and does not exist in RFC8684.
</pre>
</div>
<figcaption><a href="#figure-11" class="selfRef">Figure 11</a>:
<a href="#name-mptcp-robe_esim-implicit-co" class="selfRef">MPTCP RobE_eSIM implicit Connection Setup</a>
            </figcaption></figure>
</div>
<p id="section-3.1.1-3">Following the possible process in
<a href="#ref_mptcp_robe_eSIM_implicit_signaling" class="xref">Figure 11</a>, two further constellations
are imaginable and elaborated below.<a href="#section-3.1.1-3" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-3.1.1-4">
<li id="section-3.1.1-4.1">In the flow diagram <a href="#ref_mptcp_robe_eSIM_implicit_signaling" class="xref">Figure 11</a>,
  A1&lt;-&gt;B1 is assumed to be the initial flow. A2&lt;-&gt;B1 shall be recycled and
  the ACK is sent with MP_JOIN_CAP. Furthermore, the MP_CAPABLE
  arrives first at Host B (SB5) and the MP_JOIN_CAP afterwards
  (SB6.2). When the MP_JOIN_CAP is received, Host B has to iterate
  over the connection list once (like MP_JOIN)
  and check for Key-A availability. If a Key-A connection is found, this one
  is validated against the HMAC value. The validation has two reasons: first,
  several Key-A can exist, because different hosts may choose the same Key-A
  by accident. Furthermore, no one can join a connection by just
  recording/brute-forcing
  Key-A and duplicating the request.<a href="#section-3.1.1-4.1" class="pilcrow">¶</a>
</li>
            <li id="section-3.1.1-4.2">
              <p id="section-3.1.1-4.2.1">Like above, but MP_JOIN_CAP arrives before last MP_CAPABLE at Host B<a href="#section-3.1.1-4.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.1.1-4.2.2.1">
                  <span>[<a href="#RFC8684" class="xref">RFC8684</a>]</span>;
 Based on Key-A, Host B will iterate over the connection list, but it will
 not find a match, because Key-A of the previous selected initial flow (SA3,
 SA5) has not arrived yet. So it will continue with a fast iteration only
 over the connections which are still in establishment phase using the 10
 bit Key-B fast hash (crc16(Key-B) &amp; 0x3FF). If it matches against a (precomputed)
 existing Key-B_fast_hash in the connection list, it will validate the request
 using the HMAC(Key-A+B+B') to ensure legitimation. If successful, both, the
 initial flow and the MP_JOIN_CAP flow, can be immediately established. This
 is true, because without the knowledge of Key-B, Host A could not calculate
 the HMAC. So it is clear, that Host A had received the SYN/ACK (SB3). This
 also mitigates the exchange of a reliable ACK during the handshake process.
 MPTCP sends the Key-A only with the last ACK and therefore prevents subsequent
 flow establishment until successful reception at Host B. Using RobE_EXT,
 the reception of an MP_JOIN_CAP (<span>[<a href="#RFC8684" class="xref">RFC8684</a>]</span>) is
 sufficient to establish both, the path carrying Key-B and Key-B'.<a href="#section-3.1.1-4.2.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-3.1.1-4.2.2.2">
                  <span>[<a href="#RFC6824" class="xref">RFC6824</a>]</span>;
 Can match based on Key-A, same effort as for an MP_JOIN.<a href="#section-3.1.1-4.2.2.2" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li id="section-3.1.1-4.3">A2&lt;-&gt;B1 is selected as initial flow, because the respective SYN/ACK returns
  earlier at Host A. It is the same as above, just the other way round.<a href="#section-3.1.1-4.3" class="pilcrow">¶</a>
</li>
          </ol>
</section>
</div>
<div id="robe_esim_explicit">
<section id="section-3.1.2">
          <h4 id="name-robe_esim-explicit-negotiat">
<a href="#section-3.1.2" class="section-number selfRef">3.1.2. </a><a href="#name-robe_esim-explicit-negotiat" class="section-name selfRef">RobE_eSIM explicit Negotiation and Procedure</a>
          </h4>
<p id="section-3.1.2-1">The process of an explicit negotiation of RobE_eSIM follows
<a href="#ref_mptcp_robe_eSIM_implicit_signaling" class="xref">Figure 11</a> but uses the ROBE_eSIM_EN
option <a href="#ref-robe-ext-en-option" class="xref">Figure 13</a> additionally during the handshake
procedure.<a href="#section-3.1.2-1" class="pilcrow">¶</a></p>
<span id="name-mptcp-robe_esim-explicit-co"></span><div id="ref_mptcp_robe_eSIM_signaling">
<figure id="figure-12">
            <div class="artwork art-text alignCenter" id="section-3.1.2-2.1">
<pre>
         Host A                                        Host B
------------------------                             ----------
Address A1    Address A2                             Address B1
----------    ----------                             ----------
    |             |                                        |
    |      SYN+MP_CAPABLE+ROBE_eSIM_EN(Key-A[*])           |
    |-----------------------------------------------------&gt;|
    |             | SYN+MP_CAPABLE+ROBE_eSIM_EN(Key-A'[*]) |
    |             |---------------------------------------&gt;|
    |      SYN/ACK+MP_CAPABLE+ROBE_eSIM_EN(Key-B)          |
    |&lt;----------------------------------------------------&gt;|
    |             | SYN/ACK+MP_CAPABLE+ROBE_eSIM_EN(Key-B')|
    |             |&lt;---------------------------------------|
    |      ACK+MP_CAPABLE(Key-A,Key-B)                     |
    |-----------------------------------------------------&gt;|
    |             |                                        |
    |             |  ACK+MP_JOIN_CAP(Key-A,HMAC)           |
    |             |---------------------------------------&gt;|
    |             |                                        |

      [*] Key-A in the first MP-capable is related to
          RFC6824 only and does not exist in RFC8684.
</pre>
</div>
<figcaption><a href="#figure-12" class="selfRef">Figure 12</a>:
<a href="#name-mptcp-robe_esim-explicit-co" class="selfRef">MPTCP RobE_eSIM explicit Connection Setup</a>
            </figcaption></figure>
</div>
</section>
</div>
<div id="pro_adpt_1">
<section id="section-3.1.3">
          <h4 id="name-protocol-adaptation">
<a href="#section-3.1.3" class="section-number selfRef">3.1.3. </a><a href="#name-protocol-adaptation" class="section-name selfRef">Protocol Adaptation</a>
          </h4>
<div id="robe_ext_en_opt">
<section id="section-3.1.3.1">
            <h5 id="name-robe_esim_en-option">
<a href="#section-3.1.3.1" class="section-number selfRef">3.1.3.1. </a><a href="#name-robe_esim_en-option" class="section-name selfRef">ROBE_eSIM_EN Option</a>
            </h5>
<span id="name-robe_esim_en_option"></span><div id="ref-robe-ext-en-option">
<figure id="figure-13">
              <div class="artwork art-text alignCenter" id="section-3.1.3.1-1.1">
<pre>
                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+---------------+---------------+-------+-------+---------------+
|     Kind      |    Length     |Subtype|    (reserved)         |
+---------------+---------------+-------+-------+---------------+
</pre>
</div>
<figcaption><a href="#figure-13" class="selfRef">Figure 13</a>:
<a href="#name-robe_esim_en_option" class="selfRef">ROBE_eSIM_EN_OPTION</a>
              </figcaption></figure>
</div>
</section>
</div>
<div id="mp_join_cap_opt">
<section id="section-3.1.3.2">
            <h5 id="name-mp_join_cap-option">
<a href="#section-3.1.3.2" class="section-number selfRef">3.1.3.2. </a><a href="#name-mp_join_cap-option" class="section-name selfRef">MP_JOIN_CAP Option</a>
            </h5>
<span id="name-mp_join_cap"></span><div id="ref-mp-join-cap">
<figure id="figure-14">
              <div class="artwork art-text alignLeft" id="section-3.1.3.2-1.1">
<pre>
                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+---------------+---------------+-------+-------+---------------+
|     Kind      |    Length     |Subtype|       |    ADDR_ID    |
+---------------+---------------+-------+-------+---------------+
|                    Sender's Key-A (64 bits)                   |
|                                                               |
|                                                               |
+---------------------------------------------------------------+
|                        HMAC (&gt;=96 bits)                       |
|                                                               |
|                                                               |
:                                                               :
+---------------------------------------------------------------+
 Key-B_fast_hash = crc16(Key-B) &amp; 0x3FF          -&gt; (10bit)
 HMAC_keys =  HMAC(Key-A+Key-B+Key-B')           -&gt; (&gt;=96bit)
 HMAC =  (HMAC_keys &amp; ~0x3FF) | Key-B_fast_hash  -&gt; (size HMAC_keys)

</pre>
</div>
<figcaption><a href="#figure-14" class="selfRef">Figure 14</a>:
<a href="#name-mp_join_cap" class="selfRef">MP_JOIN_CAP</a>
              </figcaption></figure>
</div>
<p id="section-3.1.3.2-2">Computational effort on receiver side is most often expected to be the same
as with MP_JOIN. Key-A ensures identification of related flows Key-B_fast_hash
enables MP session even when selected initial flow is not fully established
yet (slight computational overhead). HMAC authenticates relationship of initial
and potential initial flows.<a href="#section-3.1.3.2-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="fallback_1">
<section id="section-3.1.4">
          <h4 id="name-fallback-mechanisms">
<a href="#section-3.1.4" class="section-number selfRef">3.1.4. </a><a href="#name-fallback-mechanisms" class="section-name selfRef">Fallback Mechanisms</a>
          </h4>
<div id="robe_fallback_0">
<section id="section-3.1.4.1">
            <h5 id="name-fallback-mechanism-for-impl">
<a href="#section-3.1.4.1" class="section-number selfRef">3.1.4.1. </a><a href="#name-fallback-mechanism-for-impl" class="section-name selfRef">Fallback mechanism for implicit RobE_eSIM</a>
            </h5>
<p id="section-3.1.4.1-1">[TBD]<a href="#section-3.1.4.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="robe_fallback_1">
<section id="section-3.1.4.2">
            <h5 id="name-fallback-mechanism-for-expl">
<a href="#section-3.1.4.2" class="section-number selfRef">3.1.4.2. </a><a href="#name-fallback-mechanism-for-expl" class="section-name selfRef">Fallback mechanism for explicit RobE_eSIM</a>
            </h5>
<p id="section-3.1.4.2-1">This mechanism considers that both sides support MPTCP capability but the
receiver is not equipped with RobE_eSIM. MPTCP session with RobE_eSIM negotiation
will seamlessly fallback to normal MPTCP process.<a href="#section-3.1.4.2-1" class="pilcrow">¶</a></p>
<p id="section-3.1.4.2-2">[Requires further check how an unaware Host B reacts on possible ROBE_eSIM_EN;
Ignore or RST? See also RFC6824 Sec. 3.6 "Should fallback [...] the path
does not support the MPTCP options"]<a href="#section-3.1.4.2-2" class="pilcrow">¶</a></p>
<span id="name-fallback-to-mptcp-when-miss"></span><div id="ref_fallback_1">
<figure id="figure-15">
              <div class="artwork art-text alignCenter" id="section-3.1.4.2-3.1">
<pre>
          Host A                              Host B
------------------------                    ----------
Address A1    Address A2                    Address B1
----------    ----------                    ----------
    |             |                             |
    |      SYN+MP_CAPABLE+ROBE_eSIM_EN          |
    |------------------------------------------&gt;|
    |             | SYN+MP_CAPABLE+ROBE_eSIM_EN |
    |             |----------------------------&gt;|
    |         SYN/ACK+MP_CAPABLE                |
    |&lt;-----------------------------------------&gt;|
    |             |    SYN/ACK+MP_CAPABLE       |
    |             |&lt;----------------------------|
    |       ACK+MP_CAPABLE                      |
    |------------------------------------------&gt;|
    |             |          RST                |
    |             |----------------------------&gt;|
    |             |       SYN+MP_JOIN           |
    |             |----------------------------&gt;|
    |             |     MP_JOIN Process...      |
    |             |                             |
</pre>
</div>
<figcaption><a href="#figure-15" class="selfRef">Figure 15</a>:
<a href="#name-fallback-to-mptcp-when-miss" class="selfRef">Fallback to MPTCP when missing RobE_eSIM support</a>
              </figcaption></figure>
</div>
</section>
</div>
<div id="robe_fallback_2">
<section id="section-3.1.4.3">
            <h5 id="name-fallback-to-regular-tcp-whe">
<a href="#section-3.1.4.3" class="section-number selfRef">3.1.4.3. </a><a href="#name-fallback-to-regular-tcp-whe" class="section-name selfRef">Fallback to regular TCP when missing MPTCP support</a>
            </h5>
<p id="section-3.1.4.3-1">When the receiver is not MPTCP enabled, MPTCP session with RobE_eSIM negotiation
will seamlessly fallback to regular process which is illustrated in this
section.<a href="#section-3.1.4.3-1" class="pilcrow">¶</a></p>
<span id="name-fallback-to-tcp-without-mpt"></span><div id="ref_fallback_2">
<figure id="figure-16">
              <div class="artwork art-text alignCenter" id="section-3.1.4.3-2.1">
<pre>
          Host A                              Host B
------------------------                    ----------
Address A1    Address A2                    Address B1
----------    ----------                    ----------
    |             |                             |
    |      SYN+MP_CAPABLE+ROBE_eSIM_EN          |
    |------------------------------------------&gt;|
    |             | SYN+MP_CAPABLE+ROBE_eSIM_EN |
    |             |----------------------------&gt;|
    |         SYN/ACK                           |
    |&lt;-----------------------------------------&gt;|
    |             |    SYN/ACK                  |
    |             |&lt;----------------------------|
    |           ACK                             |
    |------------------------------------------&gt;|
    |             |          RST                |
    |             |----------------------------&gt;|
    |             |   Regular TCP Process...    |
    |             |                             |
</pre>
</div>
<figcaption><a href="#figure-16" class="selfRef">Figure 16</a>:
<a href="#name-fallback-to-tcp-without-mpt" class="selfRef">Fallback to TCP without MPTCP support</a>
              </figcaption></figure>
</div>
</section>
</div>
</section>
</div>
<div id="comparison-robesim-and-robeesim">
<section id="section-3.1.5">
          <h4 id="name-comparison-robe_sim-and-rob">
<a href="#section-3.1.5" class="section-number selfRef">3.1.5. </a><a href="#name-comparison-robe_sim-and-rob" class="section-name selfRef">Comparison Robe_SIM and RobE_eSIM</a>
          </h4>
<p id="section-3.1.5-1">Potential initial flows in RobE_SIM <a href="#robe_sim" class="xref">Section 2.2</a> and RobE_eSIM
<a href="#robe_ext" class="xref">Section 3.1</a> guarantee MPTCP session establishment if at least one
selected path for session establishment is
functional. <a href="#ref-mptcp-robe-sim-and-robe-ext-signaling" class="xref">Figure 17</a> makes the
differences between both approaches visible and points to the latest
decision possibility during session setup when RobE_SIM or RobE_eSIM
can be selected. Until SA5 in
<a href="#ref-mptcp-robe-sim-and-robe-ext-signaling" class="xref">Figure 17</a> traditional MPTCP
connection setup is independently applied on multiple paths
simultaneously and offers to select the initial flow later (potential
initial flows). The final decision which path is selected as the main
one and the handling of the remaining flow(s) differs in SA6.1 when
RobE_SIM is applied or instead SA6.2 RobE_eSIM.<a href="#section-3.1.5-1" class="pilcrow">¶</a></p>
<span id="name-mptcp-robe_sim-and-robe_esi"></span><div id="ref-mptcp-robe-sim-and-robe-ext-signaling">
<figure id="figure-17">
            <div class="artwork art-text alignLeft" id="section-3.1.5-2.1">
<pre>
             Host A                                  Host B
     ------------------------                       ----------
     Address A1    Address A2                       Address B1
     ----------    ----------                       ----------
         |             |                                |
         |            SYN + MP_CAPABLE(Key-A[*])        |
 (SA1)   |---------------------------------------------&gt;|  (SB1)
         |             |    SYN + MP_CAPABLE(Key-A'[*]) |
 (SA2)   |             |-------------------------------&gt;|  (SB2)
         |             |                                |
 (SA3)   |&lt;---------------------------------------------|  (SB3)
         |          SYN/ACK + MP_CAPABLE(Key-B)         |
 (SA4)   |             |&lt;-------------------------------|  (SB4)
         |             |   SYN/ACK + MP_CAPABLE(Key-B') |
         |             |                                |
         |        ACK + MP_CAPABLE(Key-A, Key-B)        |
 (SA5)   |---------------------------------------------&gt;|  (SB5)
         |             |             RST                |
 (SA6.1) |             |-------------------------------&gt;|  (SB6.1)
RobE SIM |             |                                |
(robust) |             |                                |
-------------------------------------------------------------------
RobE EXT |             |                                |
(+fast)  |             | ACK + MP_JOIN_CAP(Key-A, HMAC) |
 (SA6.2) |             |-------------------------------&gt;|  (SB6.2)

         [*] Key-A in the first MP-capable is related to
             RFC6824 only and does not exist in RFC8684.
</pre>
</div>
<figcaption><a href="#figure-17" class="selfRef">Figure 17</a>:
<a href="#name-mptcp-robe_sim-and-robe_esi" class="selfRef">MPTCP RobE_SIM and RobE_eSIM connection setup</a>
            </figcaption></figure>
</div>
</section>
</div>
<div id="sec_con_1">
<section id="section-3.1.6">
          <h4 id="name-security-consideration">
<a href="#section-3.1.6" class="section-number selfRef">3.1.6. </a><a href="#name-security-consideration" class="section-name selfRef">Security Consideration</a>
          </h4>
<p id="section-3.1.6-1">[Tbd, however no differences to <span>[<a href="#RFC6824" class="xref">RFC6824</a>]</span> and
<span>[<a href="#RFC8684" class="xref">RFC8684</a>]</span> are expected]<a href="#section-3.1.6-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="robe_ips_ext">
<section id="section-3.2">
        <h3 id="name-heuristic-initial-path-selec">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-heuristic-initial-path-selec" class="section-name selfRef">Heuristic Initial Path Selection with remote RTT Measurement</a>
        </h3>
<div id="Des">
<section id="section-3.2.1">
          <h4 id="name-description">
<a href="#section-3.2.1" class="section-number selfRef">3.2.1. </a><a href="#name-description" class="section-name selfRef">Description</a>
          </h4>
<p id="section-3.2.1-1">Usually the path RTT can be determined by a time difference between
sending a package and receiving an ACK and is integrated into the TCP
protocol. For asymmetric transmission, the latest RTT for TCP flows is
calculated by the side which sends data at latest and possible does not
correspond to the site which employs RobE_IPS. This problem is already
elaborated in <a href="#initial_path_selected_on_RTT" class="xref">Section 2.3.4</a> and can be solved by
transmitting the RTT information per subflow. The negotiation procedure
is depicted in <a href="#ref_robe_ips_ext" class="xref">Figure 18</a> and uses the MPTCP option L_RTT_EN
defined in <a href="#pro_adpt_2" class="xref">Section 3.2.2</a>.<a href="#section-3.2.1-1" class="pilcrow">¶</a></p>
<span id="name-negotiation-procedure-for-r"></span><div id="ref_robe_ips_ext">
<figure id="figure-18">
            <div class="artwork art-text alignCenter" id="section-3.2.1-2.1">
<pre>
        Host A                                Host B
------------------------                    ----------
Address A1    Address A2                    Address B1
----------    ----------                    ----------
    |             |                             |
    |           SYN+MP_CAPABLE+L_RTT_EN         |
    |------------------------------------------&gt;|
    |         SYN/ACK+MP_CAPABLE+L_RTT_EN       |
    |&lt;------------------------------------------|
    |               ACK+MP_CAPABLE              |
    |------------------------------------------&gt;|
    |      ACK+DSS+L_RTT_EN(latest RTT)+Data    |
    |&lt;------------------------------------------|
    |             |       SYN+MP_JOIN           |
    |             |----------------------------&gt;|
    |             |     MP_JOIN Process...      |
    |             |                             |
</pre>
</div>
<figcaption><a href="#figure-18" class="selfRef">Figure 18</a>:
<a href="#name-negotiation-procedure-for-r" class="selfRef">Negotiation procedure for RTT exchange</a>
            </figcaption></figure>
</div>
<p id="section-3.2.1-3">A successful negotiation allows the exchange of the measured RTT value from
one subflow of an MPTCP host to another using the "Latest RTT" field within
the L_RTT_EN option.<a href="#section-3.2.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="pro_adpt_2">
<section id="section-3.2.2">
          <h4 id="name-protocol-adaptation-2">
<a href="#section-3.2.2" class="section-number selfRef">3.2.2. </a><a href="#name-protocol-adaptation-2" class="section-name selfRef">Protocol Adaptation</a>
          </h4>
<p id="section-3.2.2-1">Calculating the "Latest RTT" by a remote host in an asymmetry transmission
scenario should be transferred from remote host to the client running RobE_IPS.
So a new MPTCP subtype option named L_RTT_EN is allocated for this function.
During the three-way handshake L_RTT_EN is used for negotiation of remote
RTT measurement capability between client and server (in <a href="#Des" class="xref">Section 3.2.1</a>). When both parts support the usage of remote RTT measurement, the "Latest
RTT" field in L_RTT_EN is applied for carrying the value of latest RTT computed
by the remote host.<a href="#section-3.2.2-1" class="pilcrow">¶</a></p>
<span id="name-robe_l_rtt_en-option"></span><div id="ref-robe-l-rtt-option">
<figure id="figure-19">
            <div class="artwork art-text alignCenter" id="section-3.2.2-2.1">
<pre>
                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+---------------+---------------+-------+-------+---------------+
|     Kind      |    Length     |Subtype|     (reserved)        |
+---------------+---------------+-------+-------+---------------+
|                    Latest RTT (32 bits)                       |
|                                                               |
|                                                               |
+---------------------------------------------------------------+
</pre>
</div>
<figcaption><a href="#figure-19" class="selfRef">Figure 19</a>:
<a href="#name-robe_l_rtt_en-option" class="selfRef">ROBE_L_RTT_EN OPTION</a>
            </figcaption></figure>
</div>
</section>
</div>
<div id="fallback_2">
<section id="section-3.2.3">
          <h4 id="name-fallback-mechanism">
<a href="#section-3.2.3" class="section-number selfRef">3.2.3. </a><a href="#name-fallback-mechanism" class="section-name selfRef">Fallback Mechanism</a>
          </h4>
<p id="section-3.2.3-1">When the receiver is not L_RTT_EN capable, MPTCP session with L_RTT_EN negotiation
will seamlessly fallback to normal MPTCP process.<a href="#section-3.2.3-1" class="pilcrow">¶</a></p>
<p id="section-3.2.3-2">[TBD, Need same checks as <a href="#robe_fallback_1" class="xref">Section 3.1.4.2</a>]<a href="#section-3.2.3-2" class="pilcrow">¶</a></p>
<span id="name-fallback-to-mptcp-without-r"></span><div id="ref_robe_ips_ext_fallback_2">
<figure id="figure-20">
            <div class="artwork art-text alignCenter" id="section-3.2.3-3.1">
<pre>
             Host A                           Host B
------------------------                    ----------
Address A1    Address A2                    Address B1
----------    ----------                    ----------
    |             |                             |
    |        SYN+MP_CAPABLE+L_RTT_EN            |
    |------------------------------------------&gt;|
    |         SYN/ACK+MPTCP_CAPABLE             |
    |&lt;------------------------------------------|
    |           ACK+MPTCP_CAPABLE               |
    |------------------------------------------&gt;|
    |             |         SYN+MP_JOIN         |
    |             |----------------------------&gt;|
    |             |       MP_JOIN Process...    |
    |             |                             |
</pre>
</div>
<figcaption><a href="#figure-20" class="selfRef">Figure 20</a>:
<a href="#name-fallback-to-mptcp-without-r" class="selfRef">Fallback to MPTCP without RobE_IPS</a>
            </figcaption></figure>
</div>
</section>
</div>
<div id="sec_con_2">
<section id="section-3.2.4">
          <h4 id="name-security-consideration-2">
<a href="#section-3.2.4" class="section-number selfRef">3.2.4. </a><a href="#name-security-consideration-2" class="section-name selfRef">Security Consideration</a>
          </h4>
<p id="section-3.2.4-1">[Tbd]<a href="#section-3.2.4-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="iana">
<section id="section-4">
      <h2 id="name-iana-considerations">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-4-1">This document defines three new values to MPTCP Option Subtype as following.<a href="#section-4-1" class="pilcrow">¶</a></p>
<span id="name-robe-option-subtypes"></span><div id="table_robe_options">
<table class="center" id="table-2">
        <caption>
<a href="#table-2" class="selfRef">Table 2</a>:
<a href="#name-robe-option-subtypes" class="selfRef">RobE Option Subtypes</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" rowspan="1" colspan="1">Value</th>
            <th class="text-left" rowspan="1" colspan="1">Symbol</th>
            <th class="text-left" rowspan="1" colspan="1">Name</th>
            <th class="text-left" rowspan="1" colspan="1">Reference</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">TBD</td>
            <td class="text-left" rowspan="1" colspan="1">ROBE_eSIM_EN</td>
            <td class="text-left" rowspan="1" colspan="1">RobE_eSIM enabled</td>
            <td class="text-left" rowspan="1" colspan="1">Section 3.1</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">TBD</td>
            <td class="text-left" rowspan="1" colspan="1">MP_JOIN_CAP</td>
            <td class="text-left" rowspan="1" colspan="1">Join connection directly in RobE_eSIM</td>
            <td class="text-left" rowspan="1" colspan="1">Section 3.1</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">TBD</td>
            <td class="text-left" rowspan="1" colspan="1">L_RTT_EN</td>
            <td class="text-left" rowspan="1" colspan="1">Server RTT enabled</td>
            <td class="text-left" rowspan="1" colspan="1">Section 3.2</td>
          </tr>
        </tbody>
      </table>
</div>
</section>
</div>
<section id="section-5">
      <h2 id="name-references">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-5.1">
        <h3 id="name-normative-references">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC0793">[RFC0793]</dt>
        <dd>
<span class="refAuthor">Postel, J.</span>, <span class="refTitle">"Transmission Control Protocol"</span>, <span class="seriesInfo">STD 7</span>, <span class="seriesInfo">RFC 793</span>, <span class="seriesInfo">DOI 10.17487/RFC0793</span>, <time datetime="1981-09" class="refDate">September 1981</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc793">https://www.rfc-editor.org/info/rfc793</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6824">[RFC6824]</dt>
        <dd>
<span class="refAuthor">Ford, A.</span><span class="refAuthor">, Raiciu, C.</span><span class="refAuthor">, Handley, M.</span><span class="refAuthor">, and O. Bonaventure</span>, <span class="refTitle">"TCP Extensions for Multipath Operation with Multiple Addresses"</span>, <span class="seriesInfo">RFC 6824</span>, <span class="seriesInfo">DOI 10.17487/RFC6824</span>, <time datetime="2013-01" class="refDate">January 2013</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6824">https://www.rfc-editor.org/info/rfc6824</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8684">[RFC8684]</dt>
      <dd>
<span class="refAuthor">Ford, A.</span><span class="refAuthor">, Raiciu, C.</span><span class="refAuthor">, Handley, M.</span><span class="refAuthor">, Bonaventure, O.</span><span class="refAuthor">, and C. Paasch</span>, <span class="refTitle">"TCP Extensions for Multipath Operation with Multiple Addresses"</span>, <span class="seriesInfo">RFC 8684</span>, <span class="seriesInfo">DOI 10.17487/RFC8684</span>, <time datetime="2020-03" class="refDate">March 2020</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8684">https://www.rfc-editor.org/info/rfc8684</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-5.2">
        <h3 id="name-informative-references">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="RobE_paper">[RobE_paper]</dt>
        <dd>
<span class="refAuthor">Amend, M.</span><span class="refAuthor">, Rakocevic, V.</span><span class="refAuthor">, Matz, A.P.</span><span class="refAuthor">, and E. Bogenfeld</span>, <span class="refTitle">"RobE: Robust Connection Establishment for Multipath TCP"</span>, <span class="seriesInfo">ANRW '18 p. 76-82</span>, <time datetime="2018-07-16" class="refDate">16 July 2018</time>, <span>&lt;<a href="http://doi.acm.org/10.1145/3232755.3232762">http://doi.acm.org/10.1145/3232755.3232762</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RobE_slides">[RobE_slides]</dt>
      <dd>
<span class="refAuthor">Amend, M.</span><span class="refAuthor">, Matz, A.P.</span><span class="refAuthor">, and E. Bogenfeld</span>, <span class="refTitle">"A proposal for MPTCP Robust session Establishment (MPTCP RobE)"</span>, <span class="seriesInfo">IETF 99 Multipath TCP WG session</span>, <time datetime="2017-07-18" class="refDate">18 July 2017</time>, <span>&lt;<a href="https://datatracker.ietf.org/meeting/99/materials/slides-99-mptcp-a-proposal-for-mptcp-robust-session-establishment-mptcp-robe-01">https://datatracker.ietf.org/meeting/99/materials/slides-99-mptcp-a-proposal-for-mptcp-robust-session-establishment-mptcp-robe-01</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="authors-addresses">
<section id="section-appendix.a">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Markus Amend</span></div>
<div dir="auto" class="left"><span class="org">Deutsche Telekom</span></div>
<div dir="auto" class="left"><span class="street-address">Deutsche-Telekom-Allee 9</span></div>
<div dir="auto" class="left">
<span class="postal-code">64295</span> <span class="locality">Darmstadt</span>
</div>
<div dir="auto" class="left"><span class="country-name">Germany</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:Markus.Amend@telekom.de" class="email">Markus.Amend@telekom.de</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Jiao Kang</span></div>
<div dir="auto" class="left"><span class="org">Huawei</span></div>
<div dir="auto" class="left"><span class="street-address">D2-03,Huawei Industrial Base</span></div>
<div dir="auto" class="left"><span class="locality">Shenzhen</span></div>
<div dir="auto" class="left">
<span class="region">Guangdong</span>, <span class="postal-code">518129</span>
</div>
<div dir="auto" class="left"><span class="country-name">China</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:kangjiao@huawei.com" class="email">kangjiao@huawei.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
