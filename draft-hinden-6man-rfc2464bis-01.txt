



Network Working Group                                        M. Crawford
Internet-Draft                                                  Fermilab
Obsoletes: 2464 (if approved)                             R. Hinden, Ed.
Intended status: Standards Track                    Check Point Software
Expires: July 13, 2017                                   January 9, 2017


          Transmission of IPv6 Packets over Ethernet Networks
                    draft-hinden-6man-rfc2464bis-01

Abstract

   This document specifies the frame format for transmission of IPv6
   packets and the method of forming IPv6 link-local addresses and
   statelessly autoconfigured addresses on Ethernet networks.  It also
   specifies the content of the Source/Target Link-layer Address option
   used in Router Solicitation, Router Advertisement, Neighbor
   Solicitation, Neighbor Advertisement and Redirect messages when those
   messages are transmitted on an Ethernet.

   This document replaces RFC 2464 "Transmission of IPv6 Packets over
   Ethernet Networks", which will become historic.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on July 13, 2017.

Copyright Notice

   Copyright (c) 2017 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of



Crawford & Hinden         Expires July 13, 2017                 [Page 1]

Internet-Draft         IPv6 Packets over Ethernet           January 2017


   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

   This document may contain material from IETF Documents or IETF
   Contributions published or made publicly available before November
   10, 2008.  The person(s) controlling the copyright in some of this
   material may not have granted the IETF Trust the right to allow
   modifications of such material outside the IETF Standards Process.
   Without obtaining an adequate license from the person(s) controlling
   the copyright in such materials, this document may not be modified
   outside the IETF Standards Process, and derivative works of it may
   not be created outside the IETF Standards Process, except to format
   it for publication as an RFC or to translate it into languages other
   than English.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Maximum Transmission Unit . . . . . . . . . . . . . . . . . .   3
   3.  Frame Format  . . . . . . . . . . . . . . . . . . . . . . . .   3
   4.  Stateless Autoconfiguration . . . . . . . . . . . . . . . . .   4
   5.  Link-Local Addresses  . . . . . . . . . . . . . . . . . . . .   5
   6.  Address Mapping -- Unicast  . . . . . . . . . . . . . . . . .   5
   7.  Address Mapping -- Multicast  . . . . . . . . . . . . . . . .   5
   8.  Differences from RFC 4291 . . . . . . . . . . . . . . . . . .   6
   9.  Differences From RFC 1972 . . . . . . . . . . . . . . . . . .   7
   10. IANA Considerations . . . . . . . . . . . . . . . . . . . . .   7
   11. Security Considerations . . . . . . . . . . . . . . . . . . .   7
   12. References  . . . . . . . . . . . . . . . . . . . . . . . . .   7
     12.1.  Normative References . . . . . . . . . . . . . . . . . .   7
     12.2.  Informative References . . . . . . . . . . . . . . . . .   8
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   8

1.  Introduction

   This document specifies the frame format for transmission of IPv6
   packets and the method of forming IPv6 link-local addresses and
   statelessly autoconfigured addresses on Ethernet networks.  It also
   specifies the content of the Source/Target Link-layer Address option
   used in Router Solicitation, Router Advertisement, Neighbor
   Solicitation, Neighbor Advertisement and Redirect messages when those
   messages are transmitted on an Ethernet.





Crawford & Hinden         Expires July 13, 2017                 [Page 2]

Internet-Draft         IPv6 Packets over Ethernet           January 2017


   This document replaces RFC 2464 "Transmission of IPv6 Packets over
   Ethernet Networks", which will become historic.

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].

2.  Maximum Transmission Unit

   The default MTU size for IPv6 [I-D.ietf-6man-rfc2460bis] packets on
   an Ethernet is 1500 octets.  This size may be reduced by a Router
   Advertisement [DISC] containing an MTU option which specifies a
   smaller MTU, or by manual configuration of each node.  If a Router
   Advertisement received on an Ethernet interface has an MTU option
   specifying an MTU larger than 1500, or larger than a manually
   configured value, that MTU option may be logged to system management
   but must be otherwise ignored.

   For purposes of this document, information received from DHCP is
   considered "manually configured" and the term Ethernet includes CSMA/
   CD and full-duplex subnetworks based on ISO/IEC 8802-3, with various
   data rates.

3.  Frame Format

   IPv6 packets are transmitted in standard Ethernet frames.  The
   Ethernet header contains the Destination and Source Ethernet
   addresses and the Ethernet type code, which must contain the value
   86DD hexadecimal.  The data field contains the IPv6 header followed
   immediately by the payload, and possibly padding octets to meet the
   minimum frame size for the Ethernet link.




















Crawford & Hinden         Expires July 13, 2017                 [Page 3]

Internet-Draft         IPv6 Packets over Ethernet           January 2017


                     0                   1
                     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
                    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                    |          Destination          |
                    +-                             -+
                    |            Ethernet           |
                    +-                             -+
                    |            Address            |
                    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                    |             Source            |
                    +-                             -+
                    |            Ethernet           |
                    +-                             -+
                    |            Address            |
                    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                    |1 0 0 0 0 1 1 0 1 1 0 1 1 1 0 1|
                    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                    |             IPv6              |
                    +-                             -+
                    |            header             |
                    +-                             -+
                    |             and               |
                    +-                             -+
                    /            payload ...        /
                    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                    (Each tic mark represents one bit.)


4.  Stateless Autoconfiguration

   The default approach to create stable Interface Identifiers
   [I-D.ietf-6man-rfc4291bis] for use with SLAAC on an Ethernet
   interface should be based on [RFC7217].

   It is not recommended that Interface Identifiers for an Ethernet
   interface be based on IEEE MAC-layer addresses.  Earlier versions of
   this document described a method of forming interface identifiers
   derived from IEEE MAC-layer addresses called Modified EUI-64 format.
   This is described in Appendix A of [I-D.ietf-6man-rfc4291bis] and is
   no longer recommended.

   An IPv6 address prefix used for stateless autoconfiguration [ACONF]
   of an Ethernet interface must have a length of 64 bits.







Crawford & Hinden         Expires July 13, 2017                 [Page 4]

Internet-Draft         IPv6 Packets over Ethernet           January 2017


5.  Link-Local Addresses

   The IPv6 link-local address [I-D.ietf-6man-rfc4291bis] for an
   Ethernet interface is formed by appending the Interface Identifier,
   as defined above, to the prefix FE80::/64.

       10 bits            54 bits                  64 bits
     +----------+-----------------------+----------------------------+
     |1111111010|         (zeros)       |    Interface Identifier    |
     +----------+-----------------------+----------------------------+

6.  Address Mapping -- Unicast

   The procedure for mapping IPv6 unicast addresses into Ethernet link-
   layer addresses is described in [DISC].  The Source/Target Link-layer
   Address option has the following form when the link layer is
   Ethernet.

                    0                   1
                    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
                   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                   |     Type      |    Length     |
                   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                   |                               |
                   +-          Ethernet           -+
                   |                               |
                   +-           Address           -+
                   |                               |
                   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   Option fields:

   Type                1 for Source Link-layer address.
                       2 for Target Link-layer address.

   Length              1 (in units of 8 octets).

   Ethernet Address    The 48 bit Ethernet IEEE 802 address, in
                       canonical bit order.  This is the address the
                       interface currently responds to, and may be
                       different from the built-in address used to
                       derive the Interface Identifier.

7.  Address Mapping -- Multicast

   An IPv6 packet with a multicast destination address DST, consisting
   of the sixteen octets DST[1] through DST[16], is transmitted to the
   Ethernet multicast address whose first two octets are the value 3333



Crawford & Hinden         Expires July 13, 2017                 [Page 5]

Internet-Draft         IPv6 Packets over Ethernet           January 2017


   hexadecimal and whose last four octets are the last four octets of
   DST.

                  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                  |0 0 1 1 0 0 1 1|0 0 1 1 0 0 1 1|
                  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                  |   DST[13]     |   DST[14]     |
                  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                  |   DST[15]     |   DST[16]     |
                  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   An IPv6 multicast packet may also be mapped to a unicast Ethernet
   Link layer address as defined in Section 6.

   An IPv6 node receiving an IPv6 packet with a multicast destination
   address and an Ethernet link-layer unicast address must not drop the
   packet as a result using of this form of address mapping.

8.  Differences from RFC 4291

   This document has the following changes from RFC2464, "Transmission
   of IPv6 Packets over Ethernet Networks ".  Numbers identify the
   Internet-Draft version that the change was made.:

   Individual Internet Drafts



      01)  Incorporate update from draft-ietf-6man-default-iids
           (currently in RFC Editor queue).  Revised Section 4 to say
           IIDs should be formed based on RFC7217 and that it not
           recommended to use hardware based IIDs.

      01)  Incorporate update from RFC6085.  Added to Section 7 that an
           IPv6 multicast packet may be mapped to a unicast Ethernet
           Link layer address and that nodes receiving packets with this
           address mapping should not drop these packets.

      01)  Updates to resolve the open Errata on RFC2464.  These are:



              Errata ID: 430: Correct reference to EUI-64.  Note, the
              corrected URL specified in the Errata isn't working, the
              reference now points to one that does work.

              Errata ID: 4855: This errata is not correct, and will be
              marked as rejected.  No change is required.  Also, the



Crawford & Hinden         Expires July 13, 2017                 [Page 6]

Internet-Draft         IPv6 Packets over Ethernet           January 2017


              text that this Errata proposed to change was removed when
              the update from draft-ietf-6man-default-iids was
              incorporated.

      01)  Editorial changes.

      00)  Establish a baseline from RFC2464.  The only intended changes
           are formatting (XML is slightly different from .nroff),
           differences between an RFC and Internet Draft, fixing a few
           ID Nits, and updates to the authors information.  There
           should not be any content changes to the specification.

9.  Differences From RFC 1972

   The following are the functional differences between this
   specification and RFC 1972.

      The Address Token, which was a node's 48-bit MAC address, is
      replaced with the Interface Identifier, which is 64 bits in length
      and based on the EUI-64 format [EUI64].  An IEEE-defined mapping
      exists from 48-bit MAC addresses to EUI-64 form.

      A prefix used for stateless autoconfiguration must now be 64 bits
      long rather than 80.  The link-local prefix is also shortened to
      64 bits.

10.  IANA Considerations

   This document does not have any IANA actions.

11.  Security Considerations

   The method of derivation of Interface Identifiers from MAC addresses
   is intended to preserve global uniqueness when possible.  However,
   there is no protection from duplication through accident or forgery.

12.  References

12.1.  Normative References

   [ACONF]    Thomson, S., Narten, T., and T. Jinmei, "IPv6 Stateless
              Address Autoconfiguration", RFC 4862, DOI 10.17487/
              RFC4862, September 2007,
              <http://www.rfc-editor.org/info/rfc4862>.







Crawford & Hinden         Expires July 13, 2017                 [Page 7]

Internet-Draft         IPv6 Packets over Ethernet           January 2017


   [DISC]     Narten, T., Nordmark, E., Simpson, W., and H. Soliman,
              "Neighbor Discovery for IP version 6 (IPv6)", RFC 4861,
              DOI 10.17487/RFC4861, September 2007,
              <http://www.rfc-editor.org/info/rfc4861>.

   [I-D.ietf-6man-rfc2460bis]
              Deering, S. and R. Hinden, "Internet Protocol, Version 6
              (IPv6) Specification", draft-ietf-6man-rfc2460bis-08 (work
              in progress), November 2016.

   [I-D.ietf-6man-rfc4291bis]
              Hinden, R. and S. Deering, "IP Version 6 Addressing
              Architecture", draft-ietf-6man-rfc4291bis-06 (work in
              progress), November 2016.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, DOI 10.17487/
              RFC2119, March 1997,
              <http://www.rfc-editor.org/info/rfc2119>.

   [RFC7217]  Gont, F., "A Method for Generating Semantically Opaque
              Interface Identifiers with IPv6 Stateless Address
              Autoconfiguration (SLAAC)", RFC 7217, DOI 10.17487/
              RFC7217, April 2014,
              <http://www.rfc-editor.org/info/rfc7217>.

12.2.  Informative References

   [EUI64]    "IEEE, "Guidelines for 64-bit Global Identifier (EUI-64)
              Registration Authority"", March 1997,
              <http://standards.ieee.org/develop/regauth/tut/eui64.pdf>.

Authors' Addresses

   Matt Crawford
   Fermilab
   PO Box 500
   Batavia, IL  60510
   USA

   Email: crawdad@fnal.gov










Crawford & Hinden         Expires July 13, 2017                 [Page 8]

Internet-Draft         IPv6 Packets over Ethernet           January 2017


   Robert M. Hinden (editor)
   Check Point Software
   959 Skyway Road
   San Carlos, CA  94070
   USA

   Email: bob.hinden@gmail.com












































Crawford & Hinden         Expires July 13, 2017                 [Page 9]
