



OSPF Working Group                                               H. Chen
Internet-Draft                                                 Futurewei
Intended status: Standards Track                                  M. Toy
Expires: January 11, 2021                                        Verizon
                                                                  X. Liu
                                                          Volta Networks
                                                                  L. Liu
                                                                 Fujitsu
                                                                   Z. Li
                                                            China Mobile
                                                                 Y. Yang
                                                                     IBM
                                                           July 10, 2020


             OSPF Extensions for Broadcast Inter-AS TE Link
                       draft-chen-ospf-ias-lk-05

Abstract

   This document presents extensions to the Open Shortest Path First
   (OSPF) for advertising broadcast inter-AS Traffic Engineering (TE)
   links.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on January 11, 2021.

Copyright Notice

   Copyright (c) 2020 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents



Chen, et al.            Expires January 11, 2021                [Page 1]

Internet-Draft              inter-as-te-link                   July 2020


   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Conventions Used in This Document . . . . . . . . . . . . . .   3
   3.  Information on Inter-AS TE Link . . . . . . . . . . . . . . .   3
   4.  Extensions to OSPF  . . . . . . . . . . . . . . . . . . . . .   3
     4.1.  sub-TLVs  . . . . . . . . . . . . . . . . . . . . . . . .   3
     4.2.  Procedures  . . . . . . . . . . . . . . . . . . . . . . .   4
       4.2.1.  OSPF Router Procedure . . . . . . . . . . . . . . . .   4
       4.2.2.  Super Node Procedure  . . . . . . . . . . . . . . . .   5
   5.  Security Considerations . . . . . . . . . . . . . . . . . . .   5
   6.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   5
   7.  Acknowledgement . . . . . . . . . . . . . . . . . . . . . . .   5
   8.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   6
     8.1.  Normative References  . . . . . . . . . . . . . . . . . .   6
     8.2.  Informative References  . . . . . . . . . . . . . . . . .   6
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   6

1.  Introduction

   Connections among different Autonomous Systems (ASes) may be point-
   to-point (P2P) links and broadcast links.  For a P2P inter-AS TE
   link, RFC 5392 defines a new Opaque LSA, the Inter-AS-TE-v2 LSA, for
   advertising the OSPFv2 link; and a new OSPFv3 LS type, Inter-AS-TE-v3
   LSA, for advertising the OSPFv3 link.

   Both the Inter-AS-TE-v2 LSA and Inter-AS-TE-v3 LSA contain one top
   level TLV:

    2 -   Link TLV

   The Link TLV describes a single link and includes a set of sub-TLVs.

   The Link ID sub-TLV defined in RFC 3630 MUST NOT be used in the Link
   TLV of an Inter-AS-TE-v2 LSA, and the Neighbor ID sub-TLV defined in
   RFC 5329 MUST NOT be used in the Link TLV of an Inter-AS-TE-v3 LSA.

   Instead, the remote ASBR is identified by the inclusion of Remote AS
   Number sub-TLV and IPv4/IPv6 Remote ASBR ID sub-TLV, which is defined
   in RFC 5392.



Chen, et al.            Expires January 11, 2021                [Page 2]

Internet-Draft              inter-as-te-link                   July 2020


   For a P2P inter-AS link, the information about its remote ASBR for
   replacing its link ID may be configured.  For a broadcast inter-AS
   link, its link ID is the interface IP address of the designated
   router (DR) of the link in OSPF.  Since no OSPF runs over any
   broadcast inter-AS link, no DR or backup DR (BDR) is selected.  It is
   hard to configure a replacement for DR and BDR.

   This document presents extensions to OSPF for advertising broadcast
   inter-AS TE links through defining a new sub-TLV for a broadcast link
   without configuring any replacement for DR and BDR on the link.

2.  Conventions Used in This Document

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].

3.  Information on Inter-AS TE Link

   For a broadcast link connecting multiple ASBRs in a number of ASes,
   on each of the ASBRs X, the following information about the link may
   be obtained:

     1)  Link Type: Multi-access
     2)  Local IP address with mask length
     3)  Traffic engineering metric
     4)  Maximum bandwidth
     5)  Maximum reservable bandwidth
     6)  Unreserved bandwidth
     7)  Administrative group
     8)  SRLG


   No remote IP address or link ID (i.e., DR's interface address) may be
   obtained.

4.  Extensions to OSPF

4.1.  sub-TLVs

   Two new sub-TLVs are defined.  One is for local IPv4 address with
   mask length; and the other is for local IPv6 address with mask
   length.

   The format of the sub-TLV for a local IPv4 address with mask length
   is shown as follows.





Chen, et al.            Expires January 11, 2021                [Page 3]

Internet-Draft              inter-as-te-link                   July 2020


      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |         Type (stTBD1)         |             Length            |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                    IPv4 Address (4 bytes)                     |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |  Mask Length  |
     +-+-+-+-+-+-+-+-+


   The IPv4 Address indicates the local IPv4 address of a link.  The
   Mask Length indicates the length of the IPv4 address mask.

   The format of the sub-TLV for a local IPv6 address with mask length
   is illustrated below.

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |        Type (stTBD2)          |             Length            |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                     IPv6 Address (16 bytes)                   |
     ~                                                               ~
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |  Mask Length  |
     +-+-+-+-+-+-+-+-+


   The IPv6 Address indicates the local IPv6 address of a link.  The
   Mask Length indicates the length of the IPv6 address mask.

4.2.  Procedures

4.2.1.  OSPF Router Procedure

   For a broadcast inter-AS link connecting to multiple ASBRs, each of
   the ASBRs as an OSPF router advertises an LSA (Inter-AS-TE-v2 LSA for
   OSPFv2 or Inter-AS-TE-v3 LSA for OSPFv3) with a link TLV containing
   sub-TLVs for the information such as 1) 10 8) on the broadcast link
   described in Section 3.

   When TE is enabled on an inter-AS link and the link is up, the ASBR
   SHOULD advertise this link using the normal procedures for OSPF-TE.
   When either the link is down or TE is disabled on the link, the ASBR
   SHOULD withdraw the advertisement.  When there are changes to the TE
   parameters for the link (for example, when the available bandwidth




Chen, et al.            Expires January 11, 2021                [Page 4]

Internet-Draft              inter-as-te-link                   July 2020


   changes), the ASBR SHOULD re-advertise the link but MUST take
   precautions against excessive re-advertisements.

4.2.2.  Super Node Procedure

   Suppose that there is a super node, which just receives LSAs from
   each of ASes (or domains) through a passive OSPF adjacency between
   the super node and an ASBR or ABR in the AS or domain.

   For a new broadcast link connecting multiple routers with no link ID
   configured, when the super node receives an LSA containing the link
   attached to router X, it stores the link from X into its TED.  It
   finds the link's remote end P using the link's local IP address with
   network mask.  P is a Pseudo node identified by the local IP address
   of the DR selected from the routers connected to the link.  After
   finding P, it associates the link attached to X with P and the link
   connected to P with X.  If P is not found, a new Pseudo node P is
   created.  The super node associates the link attached to X with P and
   the link attached to P with X.  This creates a bidirectional
   connection between X and P.

   The first router and second router from which the super node receives
   an LSA containing the link are selected as the DR and BDR
   respectively.  After the DR is down, the BDR node becomes the DR and
   the router other than the DR with the largest (or smallest) local IP
   address connecting to the link is selected as the BDR.

   When the old DR is down and the BDR becomes the new DR, the super
   node updates its TED through removing the link between each of
   routers X and old P (the Pseudo node corresponding to the old DR) and
   adding a link between each of routers X (still connecting to the
   broadcast link) and new P (the Pseudo node corresponding to the new
   DR).

5.  Security Considerations

   The mechanism described in this document does not raise any new
   security issues for the OSPF protocols.

6.  IANA Considerations

   This section specifies requests for IANA allocation.

7.  Acknowledgement

   The authors would like to thank all for their valuable comments on
   this draft.




Chen, et al.            Expires January 11, 2021                [Page 5]

Internet-Draft              inter-as-te-link                   July 2020


8.  References

8.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC5392]  Chen, M., Zhang, R., and X. Duan, "OSPF Extensions in
              Support of Inter-Autonomous System (AS) MPLS and GMPLS
              Traffic Engineering", RFC 5392, DOI 10.17487/RFC5392,
              January 2009, <https://www.rfc-editor.org/info/rfc5392>.

   [RFC5329]  Ishiguro, K., Manral, V., Davey, A., and A. Lindem, Ed.,
              "Traffic Engineering Extensions to OSPF Version 3",
              RFC 5329, DOI 10.17487/RFC5329, September 2008,
              <https://www.rfc-editor.org/info/rfc5329>.

   [RFC3630]  Katz, D., Kompella, K., and D. Yeung, "Traffic Engineering
              (TE) Extensions to OSPF Version 2", RFC 3630,
              DOI 10.17487/RFC3630, September 2003,
              <https://www.rfc-editor.org/info/rfc3630>.

8.2.  Informative References

   [RFC6805]  King, D., Ed. and A. Farrel, Ed., "The Application of the
              Path Computation Element Architecture to the Determination
              of a Sequence of Domains in MPLS and GMPLS", RFC 6805,
              DOI 10.17487/RFC6805, November 2012,
              <https://www.rfc-editor.org/info/rfc6805>.

Authors' Addresses

   Huaimo Chen
   Futurewei
   Boston, MA
   USA

   EMail: Huaimo.chen@futurewei.com


   Mehmet Toy
   Verizon
   USA

   EMail: mehmet.toy@verizon.com




Chen, et al.            Expires January 11, 2021                [Page 6]

Internet-Draft              inter-as-te-link                   July 2020


   Xufeng Liu
   Volta Networks
   McLean, VA
   USA

   EMail: xufeng.liu.ietf@gmail.com


   Lei Liu
   Fujitsu
   USA

   EMail: liulei.kddi@gmail.com


   Zhenqiang Li
   China Mobile
   No.32 Xuanwumenxi Ave., Xicheng District
   Beijing  100032
   P.R. China

   EMail: li_zhenqiang@hotmail.com


   Yi Yang
   IBM
   NC
   USA

   EMail: yyang1998@gmail.com





















Chen, et al.            Expires January 11, 2021                [Page 7]
