



LPWAN                                                      T. Lagos, Ed.
Internet-Draft                                                D. Dujovne
Intended status: Informational                Universidad Diego Portales
Expires: September 6, 2018                                 March 5, 2018


       LPWAN Static Context Header Compression (SCHC) for ICMPv6
             draft-lagos-lpwan-icmpv6-static-context-hc-01

Abstract

   This document provides the implementation of the LPWAN static context
   header compression (SCHC) for the Internet Control Message Protocol
   version 6 (ICMPv6) on networks with star topology.  SCHC is a header
   compression technique which uses RoHC concepts and the flexibility of
   6LoWPAN to avoid fields that are known by all network devices and
   compress the remaining header fields.  The ICMPv6 messages considered
   in this draft are Echo Request, Echo Reply and Neighbor Discovery.

Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in RFC
   2119 [RFC2119].

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on September 6, 2018.

Copyright Notice

   Copyright (c) 2018 IETF Trust and the persons identified as the
   document authors.  All rights reserved.




Lagos & Dujovne         Expires September 6, 2018               [Page 1]

Internet-Draft        lpwan-icmp-static-context-hc            March 2018


   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  TEMPORARY EDITORIAL NOTES . . . . . . . . . . . . . . . . . .   2
   2.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   3
   3.  LoRa networks using ICMPv6 message  . . . . . . . . . . . . .   3
   4.  SCHC compression over Echo Request - Echo Reply . . . . . . .   4
   5.  Router Solicitation SCHC compression  . . . . . . . . . . . .   4
   6.  Router Advertisement SCHC compression . . . . . . . . . . . .   5
   7.  SCHC compression over Neighbor Solicitation . . . . . . . . .   7
   8.  SCHC compression over Neighbor Advertisement  . . . . . . . .   8
   9.  LoRa Gateway tables . . . . . . . . . . . . . . . . . . . . .   9
   10. Acknowledgments . . . . . . . . . . . . . . . . . . . . . . .   9
   11. References  . . . . . . . . . . . . . . . . . . . . . . . . .   9
     11.1.  Normative References . . . . . . . . . . . . . . . . . .   9
     11.2.  Internet Control Message Protocol (ICMPv6) for the
            Internet Protocol Version 6 (IPv6) Specification . . . .  10
     11.3.  Neighbor Discovery for IP version 6 (IPv6) . . . . . . .  10
     11.4.  LPWAN Static Context Header Compression (SCHC) and
            fragmentation for IPv6 and UDP . . . . . . . . . . . . .  10
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  10

1.  TEMPORARY EDITORIAL NOTES

   This document is an Internet Draft, so it is work-in-progress by
   nature.  It contains the following work-in-progress elements:

   o  "TODO" statements are elements which have not yet been written by
      the authors for some reason (lack of time, ongoing discussions
      with no clear consensus, etc).  The statement does indicate that
      the text will be written at some time.
   o  "TEMPORARY" appendices are there to capture current ongoing
      discussions, or the changelog of the document.  These
      appendiceswill be removed in the final text.
   o  "IANA_" identifiers are placeholders for numbers assigned by IANA.
      These placeholders are to be replaced by the actual values they
      represent after their assignment by IANA.





Lagos & Dujovne         Expires September 6, 2018               [Page 2]

Internet-Draft        lpwan-icmp-static-context-hc            March 2018


   o  The string "REMARK" is put before a remark (questions, suggestion,
      etc) from an author, editor of contributor.  These are on-going
      discussions at the time to writing, NOT part of the final text.
   o  This section will be removed in the final text.

2.  Introduction

   LPWANs are networks where low power consumption, high delay and
   extremely small packets characterize the traffic.  The nodes are
   tipically connected in a star topology, with a central gateway that
   connects the network to the Internet.  Most IP-based networks require
   ICMP services to enable network configuration and testing, such as
   neighbor node detection and round trip time calculation.  Because
   ICMPv6 has redundant information in header fields, SCHC can be
   deployed efficiently, especially for LPWA devices that are
   constrained by a small available bandwidth and power limitations.

   This document describes ICMPv6 message compression using SCHC
   compression defined on [I-D.toutain-lpwan-ipv6-static-context-hc] to
   reduce to the minimum the required LPWAN packet size.

3.  LoRa networks using ICMPv6 message

   High coverage and low power communication technologies - LoRa
   networks - allow the construction of data capture systems with the
   goal of covering a large area with a low bandwidth.  This technology
   is characterized by the transmission of short packets and their
   direct sequence spread spectrum - DSSS.

   To maintain communications between the nodes and the outer is
   necessary the implementation of a neighbor discovery protocol.  The
   internet layer will be composed by the ICMPv6 protocol.

   The use of SCHC in LoRa messages is fundamental in the ICMPv6
   comunication.  This is because the IPv6 header consist in 40 Bytes
   and the ICMPv6 header in the worst esenario can be reach lenght over
   the 36 Bytes.  For a LoRa escenario the field checksum of a ICMPv6
   message will be avoided how is shown in the next chapters.  This is
   because LoRa message posses CRC so it is not necesassary to send it.

   The fields link layer and target address (only link local) in a
   ICMPv6 message are going be sended ones as they will be saved in the
   memory of the LoRa Gateway.  For more datails see Section 9








Lagos & Dujovne         Expires September 6, 2018               [Page 3]

Internet-Draft        lpwan-icmp-static-context-hc            March 2018


4.  SCHC compression over Echo Request - Echo Reply

   Echo Request and Echo Reply are composed by the same fields:

   o  Type: Message type.  In case it is Echo Request the value will be
      0x80.  If it is Echo Reply will be 0x81.
   o  Code: Always 0.
   o  Checksum: This field is composed by 2 Bytes where the values are
      calculated as defined on RFC 4443 [RFC4443].
   o  Identifier: It is the ID of the package.
   o  Sequence: It is the sequence number of the transmitted packet.

   For a SCHC compression it is necessary to identify which fields stay
   static to build the context.

   The fields Code and checksum can be elided because Code is always
   zero and Checksum can be calculated after the decompression of the
   packet.  In the case of Type, this field can be represented in the
   SCHC rule.  The Identifier and Sequence fields will be sent after the
   SCHC rule.

  +------------+----+-----+----------+------------------+---+----------+
  | Field      | FP | DI  | Match    | Comp Decomp      |   | Sent     |
  |            |    |     | Opera.   | Action           |   | [bits]   |
  +------------+----+-----+----------+------------------+---+----------+
  | Type       | 1  | Bi  | equal    | not sent         |   |          |
  |            |    |     |          |                  |   |          |
  | Code       | 1  | Bi  | equal    | not sent         |   |          |
  |            |    |     |          |                  |   |          |
  | Checksum   | 1  | Bi  | ignore   | compute-checksum |   |          |
  |            |    |     |          |                  |   |          |
  | Identifier | 1  | Bi  | equal    | sent             |   | [16]     |
  |            |    |     |          |                  |   |          |
  | Sequence   | 1  | Bi  | ignore   | sent             |   | [16]     |
  +------------+----+-----+----------+------------------+---+----------+

5.  Router Solicitation SCHC compression

   The Router Solicitation packet header is composed by:

   o  Type: Type of message.  Value: 0x85.
   o  Code: Always 0.
   o  Checksum: This field is composed by 2 Bytes where the values are
      caculated as defined on RFC 4443 [RFC4443]
   o  Reserved: These 4 bytes have a 0 value.
   o  Option: This field corresponds to the MAC address.





Lagos & Dujovne         Expires September 6, 2018               [Page 4]

Internet-Draft        lpwan-icmp-static-context-hc            March 2018


   The most significant field is the MAC address of the network host.
   As mentioned on RFC 4861 [RFC4861], Router Solicitation should have a
   Link-Local Source Address and a Router Multicast Address which can be
   integrated after the packet decompression.

  +-------------+----+-----+---------+------------------+---+----------+
  | Field       | FP | DI  | Match   | Comp Decomp      |   | Sent     |
  |             |    |     | Opera.  | Action           |   | [bits]   |
  +-------------+----+-----+---------+------------------+---+----------+
  | Type        | 1  | Bi  | equal   | not sent         |   |          |
  |             |    |     |         |                  |   |          |
  | Code        | 1  | Bi  | equal   | not sent         |   |          |
  |             |    |     |         |                  |   |          |
  | Checksum    | 1  | Bi  | ignore  | compute-checksum |   |          |
  |             |    |     |         |                  |   |          |
  | Reserved    | 1  | Bi  | equal   | not sent         |   |          |
  |             |    |     |         |                  |   |          |
  | Option -    | 1  | Bi  | equal   | not sent         |   |          |
  | type        |    |     |         |                  |   |          |
  |             |    |     |         |                  |   |          |
  | Option -    | 1  | Bi  | ignore  | compute-length   |   |          |
  | length      |    |     |         |                  |   |          |
  |             |    |     |         |                  |   |          |
  | Option -    | 1  | Bi  | ignore  | sent             |   | [48]     |
  | link-layer  |    |     |         |                  |   |          |
  +-------------+----+-----+---------+------------------+---+----------+

6.  Router Advertisement SCHC compression

   The Router Advertisement packet header is composed by:

   o  Type: Type of message.  Value: 0x86.
   o  Code: Always 0.
   o  Checksum: This field is composed by 2 Bytes where they values are
      caculated as it is explained on RFC 4443 [RFC4443].
   o  Current Hop Limit: Because this is a star topology, the value MUST
      be set to 255.
   o  Autoconfig Flags: Depending on the router configuration, it will
      advertise if DHCP is allowed or not.
   o  Router Lifetime: This field indicates the time that the Router
      keeps the condition of default device.
   o  Reachable Time: Indicates to the host how much time a neighbour is
      considered reachable.
   o  Retransmission Timer: Indicates the delay that the host should
      have before transmission.
   o  Options: This field contains the MAC Address, MTU and the IPv6
      Prefix of the network.




Lagos & Dujovne         Expires September 6, 2018               [Page 5]

Internet-Draft        lpwan-icmp-static-context-hc            March 2018


   The SCHC compression for Router Advertisement is designed to send the
   MAC address of the packet.  Like the Echo message, the Type field can
   be represented in the SCHC rule.

   The Current Hop Limit, Autoconfig Flags, Lifetime Router, Reachable
   Time, and Retransmission Timer fields can be deleted if the host
   knows these values.  The MTU of this packet can be elided and the
   IPv6 prefix helps the SCHC compression of the global address,
   omitting the first 8 bytes of the address.

  +----------------+----+----+--------+------------------+---+---------+
  | Field          | FP | DI | Match  | Comp Decomp      |   | Sent    |
  |                |    |    | Opera. | Action           |   | [bits]  |
  +----------------+----+----+--------+------------------+---+---------+
  | Type           | 1  | Bi | equal  | not sent         |   |         |
  |                |    |    |        |                  |   |         |
  | Code           | 1  | Bi | equal  | not sent         |   |         |
  |                |    |    |        |                  |   |         |
  | Checksum       | 1  | Bi | ignore | compute-checksum |   |         |
  |                |    |    |        |                  |   |         |
  | Current Hop    | 1  | Bi | ignore | not sent         |   |         |
  | Limit          |    |    |        |                  |   |         |
  |                |    |    |        |                  |   |         |
  | Autoconfig     | 1  | Bi | ignore | not sent         |   |         |
  | Flags          |    |    |        |                  |   |         |
  |                |    |    |        |                  |   |         |
  | Router         | 1  | Bi | ignore | not sent         |   |         |
  | Lifetime       |    |    |        |                  |   |         |
  |                |    |    |        |                  |   |         |
  | Reachable Time | 1  | Bi | ignore | not sent         |   |         |
  |                |    |    |        |                  |   |         |
  | Retransmission | 1  | Bi | ignore | not sent         |   |         |
  | Timer          |    |    |        |                  |   |         |
  |                |    |    |        |                  |   |         |
  | Option - type  | 1  | Bi | equal  | not sent         |   |         |
  |                |    |    |        |                  |   |         |
  | Option -       | 1  | Bi | ignore | compute-length   |   |         |
  | length         |    |    |        |                  |   |         |
  |                |    |    |        |                  |   |         |
  | Option - link- | 1  | Bi | ignore | sent             |   | [48]    |
  | layer          |    |    |        |                  |   |         |
  |                |    |    |        |                  |   |         |
  | Option - type  | 1  | Bi | equal  | not sent         |   |         |
  |                |    |    |        |                  |   |         |
  | Option -       | 1  | Bi | ignore | not sent         |   |         |
  | length         |    |    |        |                  |   |         |
  |                |    |    |        |                  |   |         |
  | Option -       | 1  | Bi | equal  | not sent         |   |         |



Lagos & Dujovne         Expires September 6, 2018               [Page 6]

Internet-Draft        lpwan-icmp-static-context-hc            March 2018


  | reserved       |    |    |        |                  |   |         |
  |                |    |    |        |                  |   |         |
  | Option - MTU   | 1  | Bi | ignore | not sent         |   |         |
  |                |    |    |        |                  |   |         |
  | Option - type  | 1  | Bi | equal  | not sent         |   |         |
  |                |    |    |        |                  |   |         |
  | Option -       | 1  | Bi | equal  | not sent         |   |         |
  | length         |    |    |        |                  |   |         |
  |                |    |    |        |                  |   |         |
  | Option - Flag  | 1  | Bi | ignore | not sent         |   |         |
  |                |    |    |        |                  |   |         |
  | Option - Valid | 1  | Bi | ignore | not sent         |   |         |
  | lifetime       |    |    |        |                  |   |         |
  |                |    |    |        |                  |   |         |
  | Option -       | 1  | Bi | ignore | not sent         |   |         |
  | Preferred      |    |    |        |                  |   |         |
  | lifetime       |    |    |        |                  |   |         |
  |                |    |    |        |                  |   |         |
  | Option -       | 1  | Bi | equal  | not sent         |   |         |
  | reserved       |    |    |        |                  |   |         |
  |                |    |    |        |                  |   |         |
  | Option -       | 1  | Bi | ignore | not sent         |   |         |
  | prefix         |    |    |        |                  |   |         |
  +----------------+----+----+--------+------------------+---+---------+

7.  SCHC compression over Neighbor Solicitation

   The Neighbor Solicitation packet header is composed by:

   o  Type: Type of message.  Value: 0x87.
   o  Code: Always 0.
   o  Checksum: This field is composed by 2 Bytes where the values are
      caculated as it is specified on RFC 4443 [RFC4443].
   o  Target Address: It contains the address to be resolved.
   o  Options: This field contains the MAC Address from the host.

   For SCHC compression over Neighbor Solicitation, the MAC address and
   the Target Address are the minimal fields for the transmision.  If
   the Target address has a Link-Local value, the last 8 Bytes of the
   address are sent, otherwise, the full 16 Bytes are sent.  The type
   field can be represented in the SCHC rule.










Lagos & Dujovne         Expires September 6, 2018               [Page 7]

Internet-Draft        lpwan-icmp-static-context-hc            March 2018


  +------------+----+----+---------+------------------+---+------------+
  | Field      | FP | DI | Match   | Comp Decomp      |   | Sent       |
  |            |    |    | Opera.  | Action           |   | [bits]     |
  +------------+----+----+---------+------------------+---+------------+
  | Type       | 1  | Bi | equal   | not sent         |   |            |
  |            |    |    |         |                  |   |            |
  | Code       | 1  | Bi | equal   | not sent         |   |            |
  |            |    |    |         |                  |   |            |
  | Checksum   | 1  | Bi | ignore  | compute-checksum |   |            |
  |            |    |    |         |                  |   |            |
  | Target     | 1  | Bi | match-  | sent             |   | link-local |
  | Address    |    |    | mapping |                  |   | [64]       |
  |            |    |    |         |                  |   | global     |
  |            |    |    |         |                  |   | [128]      |
  |            |    |    |         |                  |   |            |
  | Option -   | 1  | Bi | equal   | not sent         |   |            |
  | type       |    |    |         |                  |   |            |
  |            |    |    |         |                  |   |            |
  | Option -   | 1  | Bi | ignore  | compute-length   |   |            |
  | length     |    |    |         |                  |   |            |
  |            |    |    |         |                  |   |            |
  | Option -   | 1  | Bi | ignore  | sent             |   | [48]       |
  | link-layer |    |    |         |                  |   |            |
  +------------+----+----+---------+------------------+---+------------+

8.  SCHC compression over Neighbor Advertisement

   A Neighbor Advertisement is composed by:

   o  Type: Type of message.  Value: 0x88.
   o  Code: Is always 0.
   o  Checksum: This field is composed by 2 Bytes where the values are
      caculated as it is specified on RFC 4443 [RFC4443].
   o  Flags: Describes first if the device sending the packet is a
      router or a node, second if the packet is sent because it is a
      neighbor search response and third, if the receiver has to rewrite
      the host information.
   o  Target Address: If it is a reply of a Neighbor Solicitation
      request, it contains the same Target address, otherwise it will
      contain the address to be resolved.
   o  Options: If the packet source is a Multicast Neighbor Solicitation
      reply, the MAC is sent, otherwise it is elided.

   For the compression of SCHC in Neighbor Advertisement, the MAC
   address is sent if it is a Multicast neighborhood request response.
   If the Target address has a Link-Local value, the last 8 Bytes of the
   address will be sent, otherwise, the full 16 Bytes will be




Lagos & Dujovne         Expires September 6, 2018               [Page 8]

Internet-Draft        lpwan-icmp-static-context-hc            March 2018


   transmitted.  If the Flags field is known by the host, it can be
   deleted.  The Type field can be represented in the SCHC rule.

  +------------+----+----+---------+------------------+---+------------+
  | Field      | FP | DI | Match   | Comp Decomp      |   | Sent       |
  |            |    |    | Opera.  | Action           |   | [bits]     |
  +------------+----+----+---------+------------------+---+------------+
  | Type       | 1  | Bi | equal   | not sent         |   |            |
  |            |    |    |         |                  |   |            |
  | Code       | 1  | Bi | equal   | not sent         |   |            |
  |            |    |    |         |                  |   |            |
  | Checksum   | 1  | Bi | ignore  | compute-checksum |   |            |
  |            |    |    |         |                  |   |            |
  | Flags      | 1  | Bi | equal   | not sent         |   |            |
  |            |    |    |         |                  |   |            |
  | Target     | 1  | Bi | match-  | sent             |   | link-local |
  | Address    |    |    | mapping |                  |   | [64]       |
  |            |    |    |         |                  |   | global     |
  |            |    |    |         |                  |   | [128]      |
  |            |    |    |         |                  |   |            |
  | Option -   | 1  | Bi | equal   | not sent         |   |            |
  | type       |    |    |         |                  |   |            |
  |            |    |    |         |                  |   |            |
  | Option -   | 1  | Bi | ignore  | not sent         |   |            |
  | length     |    |    |         |                  |   |            |
  |            |    |    |         |                  |   |            |
  | Option -   | 1  | Bi | ignore  | not sent         |   |            |
  | link-layer |    |    |         |                  |   |            |
  +------------+----+----+---------+------------------+---+------------+

9.  LoRa Gateway tables

   (TODO)

10.  Acknowledgments

   This work is partially supported by 16STIC-08 STIC-AmSud PEACH
   Research Project.  We would also like to thank the Red Snapper
   project for their support.

11.  References

11.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.



Lagos & Dujovne         Expires September 6, 2018               [Page 9]

Internet-Draft        lpwan-icmp-static-context-hc            March 2018


11.2.  Internet Control Message Protocol (ICMPv6) for the Internet
       Protocol Version 6 (IPv6) Specification

   [RFC4443]  Conta, A., Deering, S., and M. Gupta, Ed., "Internet
              Control Message Protocol (ICMPv6) for the Internet
              Protocol Version 6 (IPv6) Specification", STD 89,
              RFC 4443, DOI 10.17487/RFC4443, March 2006,
              <https://www.rfc-editor.org/info/rfc4443>.

11.3.  Neighbor Discovery for IP version 6 (IPv6)

   [RFC4861]  Narten, T., Nordmark, E., Simpson, W., and H. Soliman,
              "Neighbor Discovery for IP version 6 (IPv6)", RFC 4861,
              DOI 10.17487/RFC4861, September 2007,
              <https://www.rfc-editor.org/info/rfc4861>.

11.4.  LPWAN Static Context Header Compression (SCHC) and fragmentation
       for IPv6 and UDP

   [I-D.toutain-lpwan-ipv6-static-context-hc]
              Minaburo, A. and L. Toutain, "LPWAN Static Context Header
              Compression (SCHC) for IPv6 and UDP", draft-toutain-lpwan-
              ipv6-static-context-hc-00 (work in progress), September
              2016.

Authors' Addresses

   Tomas Lagos (editor)
   Universidad Diego Portales
   Escuela de Informatica y Telecomunicaciones
   Av. Ejercito 441
   Santiago, Region Metropolitana
   Chile

   Phone: +56 (97) 697-6404
   Email: tomas.lagos@mail.udp.cl


   Diego Dujovne
   Universidad Diego Portales
   Escuela de Informatica y Telecomunicaciones
   Av. Ejercito 441
   Santiago, Region Metropolitana
   Chile

   Phone: +56 (2) 676-8121
   Email: diego.dujovne@mail.udp.cl




Lagos & Dujovne         Expires September 6, 2018              [Page 10]
