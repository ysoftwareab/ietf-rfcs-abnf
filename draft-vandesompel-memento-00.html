<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>HTTP framework for time-based access to resource states -- Memento</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="HTTP framework for time-based access to resource states -- Memento">
<meta name="keywords" content="HTTP, content negotiation, datetime negotiation, resource versions, archival resources, Memento">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Internet Engineering Task Force</td><td class="header">H. VandeSompel</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Los Alamos National Laboratory</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">M. Nelson</td></tr>
<tr><td class="header">Expires: May 16, 2011</td><td class="header">Old Dominion University</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">R. Sanderson</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Los Alamos National Laboratory</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">November 12, 2010</td></tr>
</table></td></tr></table>
<h1><br />HTTP framework for time-based access to resource states -- Memento<br />draft-vandesompel-memento-00</h1>

<h3>Abstract</h3>

<p>
  The HTTP-based Memento framework bridges the present and past Web by interlinking current resources with resources 
  that encapsulate their past. It facilitates obtaining representations of prior states of a resource, available from 
  archival resources in Web archives or version resources in content management systems, by leveraging the resource's 
  URI and a preferred datetime. To this end, the framework introduces datetime negotiation (a variation on content negotiation), 
  and new Relation Types for the HTTP Link header aimed at interlinking resources with their archival/version resources. 
  It also introduces an approach to discover and serialize a list of resources known to a server, each of which provides access 
  to a representation of a prior state of a same resource.

</p>
<h3>Status of this Memo</h3>
<p>
By submitting this Internet-Draft,
each author represents that any applicable patent or other IPR claims of which
he or she is aware have been or will be disclosed,
and any of which he or she becomes aware will be disclosed,
in accordance with Section&nbsp;6 of BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on May 16, 2011.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">1.1.</a>&nbsp;
Terminology<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">1.2.</a>&nbsp;
Purpose<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#notation">1.3.</a>&nbsp;
Notational Conventions<br />
<a href="#component 1.1">2.</a>&nbsp;
The Memento Framework, Datetime Negotiation component: HTTP headers, HTTP Link Relation Types<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">2.1.</a>&nbsp;
HTTP Headers<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Accept-Memento-Datetime">2.1.1.</a>&nbsp;
Accept-Datetime, Memento-Datetime<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#accept-datetime">2.1.1.1.</a>&nbsp;
Values for Accept-Datetime<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#memento-datetime">2.1.1.2.</a>&nbsp;
Values for Memento-Datetime<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">2.1.2.</a>&nbsp;
Vary<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">2.1.3.</a>&nbsp;
Location<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">2.1.4.</a>&nbsp;
Link<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Link Header Relation Types">2.2.</a>&nbsp;
Link Header Relation Types<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#memento-rels">2.2.1.</a>&nbsp;
Memento Framework Relation Types<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">2.2.1.1.</a>&nbsp;
Relation Type &quot;original&quot;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">2.2.1.2.</a>&nbsp;
Relation Type &quot;timegate&quot;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">2.2.1.3.</a>&nbsp;
Relation Type &quot;timemap&quot;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#memento-rel">2.2.1.4.</a>&nbsp;
Relation Type &quot;memento&quot;<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#other-rels">2.2.2.</a>&nbsp;
Other Relation Types<br />
<a href="#component 1.2">3.</a>&nbsp;
The Memento Framework, Datetime Negotiation component: HTTP Interactions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#HTTP_OriginalResource">3.1.</a>&nbsp;
Interactions with an Original Resource<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#HTTP_OriginalResource_client">3.1.1.</a>&nbsp;
Step 1: User Agent Requests an Original Resource<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#HTTP_OriginalResource_server">3.1.2.</a>&nbsp;
Step 2: Server Responds to a Request for an Original Resource<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#HTTP_OriginalResource_server_memento">3.1.2.1.</a>&nbsp;
Original Resource is an Appropriate Memento<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#HTTP_OriginalResource_server_404">3.1.2.2.</a>&nbsp;
Server Exists and Original Resource Used to Exist<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#HTTP_OriginalResource_server_xxx">3.1.2.3.</a>&nbsp;
Missing or Inadequate &quot;timegate&quot; Link in Original Server's Response<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#HTTP_TimeGate">3.2.</a>&nbsp;
Interactions with a TimeGate<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#HTTP_TimeGate_client">3.2.1.</a>&nbsp;
Step 3: User Agent Negotiates with a TimeGate<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#HTTP_TimeGate_server">3.2.2.</a>&nbsp;
Step 4: Server Responds to Negotiation with TimeGate<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#HTTP_TimeGate_server_OK">3.2.2.1.</a>&nbsp;
Successful Scenario<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#s_range">3.2.2.2.</a>&nbsp;
Datetime Out of the Server's Range<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#HTTP_TimeGate_server_302">3.2.2.3.</a>&nbsp;
Accept-Datetime Not Provided<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#HTTP_TimeGate_server_300">3.2.2.4.</a>&nbsp;
Multiple Matching Mementos<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ua_range">3.2.2.5.</a>&nbsp;
Datetime Out of the User Agent's Range<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#HTTP_TimeGate_server_400">3.2.2.6.</a>&nbsp;
Accept-Datetime Unparseable<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#HTTP_TimeGate_server_404">3.2.2.7.</a>&nbsp;
TimeGate Does Not Exist<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">3.2.2.8.</a>&nbsp;
HTTP Methods other than HEAD/GET<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#redirect_chains_tg">3.2.3.</a>&nbsp;
Recognizing a TimeGate<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#HTTP_Memento">3.3.</a>&nbsp;
Interactions with a Memento<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#HTTP_Memento_client">3.3.1.</a>&nbsp;
Step 5: User Agent Requests a Memento<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#HTTP_Memento_server">3.3.2.</a>&nbsp;
Step 6: Server Responds to a Request for a Memento<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#HTTP_Memento_server_404">3.3.2.1.</a>&nbsp;
Memento Does not Exist<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#redirect_chains_m">3.3.3.</a>&nbsp;
Recognizing a Memento<br />
<a href="#component 2.1">4.</a>&nbsp;
The Memento Framework, Discovery Component<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#timemap">4.1.</a>&nbsp;
TimeMaps<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">4.2.</a>&nbsp;
Discovery of TimeMaps, TimeGates<br />
<a href="#IANA">5.</a>&nbsp;
IANA Considerations<br />
<a href="#Security">6.</a>&nbsp;
Security Considerations<br />
<a href="#anchor13">7.</a>&nbsp;
Changelog<br />
<a href="#Acknowledgements">8.</a>&nbsp;
Acknowledgements<br />
<a href="#rfc.references1">9.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">9.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">9.2.</a>&nbsp;
Informative References<br />
<a href="#AppendixFlow">Appendix&nbsp;A.</a>&nbsp;
Appendix B: A Sample, Successful Memento Request/Response cycle<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
<a href="#rfc.copyright">&#167;</a>&nbsp;
Intellectual Property and Copyright Statements<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Terminology</h3>

<p>
This specification uses the terms "resource", "request", "response", "entity", "entity-body", "entity-header", "content negotiation", 
"client", "user agent", "server" as described in <a class='info' href='#RFC2616'>RFC 2616<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a> [RFC2616], and it uses the terms "representation" and 
"resource state" as described in <a class='info' href='#W3C.REC-aww-20041215'>W3C.REC-aww-20041215<span> (</span><span class='info'>Jacobs and Walsh, &ldquo;Architecture of the World Wide Web,&rdquo; December&nbsp;2004.</span><span>)</span></a> [W3C.REC&#8209;aww&#8209;20041215].

</p>
<p>
  In addition, the following terms specific to the Memento framework are introduced:

</p>
<p></p>
<ul class="text">
<li>
Original Resource: An Original Resource is a resource that exists or used to exist, and for which access 
to one of its prior states is desired.

</li>
<li>
Memento: A Memento for an Original Resource is a resource that encapsulates a prior state of the Original Resource. 
A Memento for an Original Resource as it existed at time Tj is a resource that encapsulates the state that the Original 
Resource had at time Tj. 

</li>
<li>
TimeGate: A TimeGate for an Original Resource is a resource that supports negotiation to allow selective, datetime-based, 
access to prior states of the Original Resource. 

</li>
<li>
TimeMap: A TimeMap for an Original Resource is a resource from which a list of URIs of Mementos of the Original Resource is available.

</li>
</ul><p> 
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.2"></a><h3>1.2.&nbsp;
Purpose</h3>

<p>
The state of an Original Resource may change over time. Dereferencing its URI at any specific moment in time during its existence 
yields a representation of its then current state. Dereferencing its URI at any time past its existence no longer yields a meaningful 
representation, if any. Still, in both cases, resources may exist that encapsulate prior states of the Original Resource. 
Each such resource, named a Memento, has its own URI that, when dereferenced, returns a representation of a prior state of the Original Resource. 
Mementos may, for example, exist in Web archives, Content Management Systems, or Revision Control Systems.

</p>
<p>Examples are:
</p>
<p>Mementos for Original Resource http://www.ietf.org/ :
</p>
<p></p>
<ul class="text">
<li>http://web.archive.org/web/19970107171109/http://www.ietf.org/
</li>
<li>http://webarchive.nationalarchives.gov.uk/20080906200044/http://www.ietf.org/
</li>
</ul>

<p>Mementos for Original Resource http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol :
</p>
<p></p>
<ul class="text">
<li>http://en.wikipedia.org/w/index.php?title=Hypertext_Transfer_Protocol&amp;oldid=366806574
</li>
<li>http://en.wikipedia.org/w/index.php?title=Hypertext_Transfer_Protocol&amp;oldid=33912
</li>
<li>http://web.archive.org/web/20071011153017/http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol
</li>
</ul>

<p>Mementos for Original Resource http://www.w3.org/TR/webarch/ :
</p>
<p></p>
<ul class="text">
<li>http://www.w3.org/TR/2004/PR-webarch-20041105/
</li>
<li>http://www.w3.org/TR/2002/WD-webarch-20020830/
</li>
<li>http://webarchive.nationalarchives.gov.uk/20100304163140/http://www.w3.org/TR/webarch/
</li>
</ul>

<p>
    In the abstract, Memento introduces a mechanism to access versions of Web resources that:
  
</p>
<p></p>
<ul class="text">
<li>Is fully distributed in the sense that resource versions may reside on multiple hosts, and that any such host 
      is likely only aware of the versions it holds;
</li>
<li>Uses the global notion of datetime as a resource version indicator and access key;
</li>
<li>Leverages the following primitives of <a class='info' href='#W3C.REC-aww-20041215'>W3C.REC-aww-20041215<span> (</span><span class='info'>Jacobs and Walsh, &ldquo;Architecture of the World Wide Web,&rdquo; December&nbsp;2004.</span><span>)</span></a> [W3C.REC&#8209;aww&#8209;20041215]: 
      resource, resource state, representation, content negotiation, 
      and link.
</li>
</ul>

<p>The core components of Memento's mechanism to access resource versions are:
</p>
<p>
      1. The abstract notion of the state of a resource identified by URI-R as it existed at some time Tj. 
      Note the relationship with the ability to identify a the state of a resource at some datetime Tj by means of a URI  
      as intended by the proposed Dated URI scheme <a class='info' href='#I-D.masinter-dated-uri'>I-D.masinter-dated-uri<span> (</span><span class='info'>Masinter, L., &ldquo;The 'tdb' and 'duri' URI schemes, based on dated URIs,&rdquo; October&nbsp;2010.</span><span>)</span></a> [I&#8209;D.masinter&#8209;dated&#8209;uri]. 
    
</p>
<p>
      2. A bridge from the present to the past, consisting of:
    
</p>
<p></p>
<ul class="text">
<li>An appropriately typed link from a resource identified by URI-R to an associated TimeGate identified by URI-G, 
        which is aware of (at least part of the) version history of the resource identified by URI-R;
</li>
<li>The ability to content negotiate in the datetime dimension with the TimeGate identified by URI-G, 
        as a means to obtain a representation of the state that the resource identified by URI-R had at some datetime Tj.
</li>
</ul>

<p>
      3. A bridge from the past to the present, consisting of appropriately typed link from a resource identified by URI-M, 
      which encapsulates the state a resource identified 
      by URI-R had at some dateimte Tj, to the resource identified by URI-R.
    
</p>
<p>
    This document is concerned with specifying an instantiation of these abstractions for resources that are identified by HTTP(S) URIs.
  
</p>
<a name="notation"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.3"></a><h3>1.3.&nbsp;
Notational Conventions</h3>

<p>
The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" 
in this document are to be interpreted as described in <a class='info' href='#RFC2119'>RFC 2119<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> [RFC2119].

</p>
<p>
When needed for extra clarity, the following conventions are used: 

</p>
<p></p>
<ul class="text">
<li>URI-R is used to denote the URI of an Original Resource.
</li>
<li>URI-G is used to denote the URI of a TimeGate.
</li>
<li>URI-M is used to denote the URI of a Memento.
</li>
<li>URI-T is used to denote the URI of a TimeMap.
</li>
<li>When scenarios are described that involve multiple Mementos, URI-M0 denotes the URI of the first Memento known 
      to the responding server, URI-Mn 
     denotes the URI of the most recent known Memento, URI-Mj denotes the URI of the selected Memento, URI-Mi denotes the URI of 
     the Memento that is temporally previous to the selected Memento, and URI-Mk denotes the URI of the Memento that is 
     temporally after the selected Memento. The respective datetimes for these Mementos is T0, Tn, Tj, Ti, and Tk; it holds that 
      T0 &lt;= Ti &lt;= Tj &lt;= Tk &lt;= Tn.
</li>
</ul>

<a name="component 1.1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
The Memento Framework, Datetime Negotiation component: HTTP headers, HTTP Link Relation Types</h3>

<p>
    The Memento framework is concerned with Original Resources, TimeGates, Mementos, and TimeMaps that are identified by HTTP or HTTPS URIs. 
    Details are only provided for resources identified by HTTP URIs but apply similarly to HTTPS resources.
  
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
HTTP Headers</h3>

<p>
The Memento framework operates at the level of HTTP request and response headers. It introduces two new headers 
("Accept-Datetime", "Memento-Datetime"), introduces new values for two existing headers ("Vary", "Link"), 
and uses an existing header ("Location") without modification. All these headers are described below. 
Other HTTP headers are present or absent in Memento response/request cycles as specified by <a class='info' href='#RFC2616'>RFC 2616<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a> [RFC2616].

</p>
<a name="Accept-Memento-Datetime"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1.1"></a><h3>2.1.1.&nbsp;
Accept-Datetime, Memento-Datetime</h3>

<p>
The "Accept-Datetime" request header is used by a user agent to indicate it wants to retrieve a representation of a Memento 
that encapsulates a past state of an Original Resource. To that end, the "Accept-Datetime" header is conveyed in an 
HTTP GET/HEAD request issued against a TimeGate for an Original Resource, and its value indicates the datetime of 
the desired past state of the Original Resource. 
The "Accept-Datetime" request header has no defined meaning for HTTP methods 
other than HEAD and GET.

</p>
<p>
The "Memento-Datetime" response header is used by a server to indicate that the response contains a representation of a Memento, 
and its value expresses the datetime of the state of an Original Resource that is encapsulated in that Memento. 
The URI of that Original Resource is provided in the response, as the Target IRI (see <a class='info' href='#RFC5988'>RFC5988<span> (</span><span class='info'>Nottingham, M., &ldquo;Web Linking,&rdquo; October&nbsp;2010.</span><span>)</span></a> [RFC5988]) 
  of a link provided in the HTTP "Link" header that has a 
Relation Type of "original" (see <a class='info' href='#Link Header Relation Types'>Section&nbsp;2.2<span> (</span><span class='info'>Link Header Relation Types</span><span>)</span></a>).

</p>
<p>
    The presence of a Memento-Datetime header and associated value for a given resource constitutes a promise that the resource 
    is stable and that its state will no longer change. Therefore, the server that originally assigns the header and value, 
    MUST retain the Memento-Datetime header in all responses to HTTP HEAD/GET requests (with or without "Accept-Datetime" header) 
    that occur against the resource after 
    the time of the original assignment of the header, and it MUST NOT change its associated value.
    Similarly, if an application is mirroring the resource at a different URI, it SHOULD retain the resource's Memento-Datetime 
    header and value if mirroring the resource does not include a meaningful change to the resource's state.
    For example, this behavior allows duplicating a Web archive at a new location while preserving the Memento-Datetime values of the 
    archived resources.

</p>
<a name="accept-datetime"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1.1.1"></a><h3>2.1.1.1.&nbsp;
Values for Accept-Datetime</h3>

<p>Values for the "Accept-Datetime" header consist of a MANDATORY datetime expressed according to the 
    <a class='info' href='#RFC1123'>RFC 1123<span> (</span><span class='info'>Braden, R., &ldquo;Requirements for Internet Hosts - Application and Support,&rdquo; October&nbsp;1989.</span><span>)</span></a> [RFC1123] format, which is formalized by the rfc1123-date construction 
    rule of the BNF in <a class='info' href='#datetime-BNF'>Figure&nbsp;1<span> (</span><span class='info'>BNF for the datetime format</span><span>)</span></a>, and an OPTIONAL interval indicator expressed according to 
  the iso8601-interval rule of the BNF in <a class='info' href='#datetime-BNF'>Figure&nbsp;1<span> (</span><span class='info'>BNF for the datetime format</span><span>)</span></a>. The datetime MUST be represented 
  in Greenwich Mean Time (GMT).

</p>
<p>
    Examples of "Accept-Datetime" request headers with and without an interval indicator:
  
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Accept-Datetime: Thu, 31 May 2007 20:35:00 GMT
Accept-Datetime: Thu, 31 May 2007 20:35:00 GMT; -P3DT5H;+P2DT6H
</pre></div>
<p>
  The user agent uses the MANDATORY datetime value 
  to convey its preferred datetime for a Memento; it uses the OPTIONAL interval indicator to convey 
  it is interested in retrieving 
  Mementos that reside within this interval around the preferred datetime, and not interested in Mementos that reside outside of it.
  Not using an interval indicator is 
  equivalent with expressing an infinite interval around the preferred datetime.
  
</p>
<p>
    The interval mechanism can be regarded as an implementation of the functionality intended by 
  the q-value approach that is used in regular content negotiation. The q-value approach is not supported for Memento's 
  datetime negotiation 
  because it is well-suited for negotiation over a discrete space of mostly predictable values, not for negotiation over a continuum of 
  unpredictable datetime values. 
  
</p><br /><hr class="insert" />
<a name="datetime-BNF"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

accept-dt-value = rfc1123-date *SP [ iso8601-interval ]
rfc1123-date = wkday "," SP date1 SP time SP "GMT"
date1        = 2DIGIT SP month SP 4DIGIT
                  ; day month year (e.g., 20 Mar 1957)
time         = 2DIGIT ":" 2DIGIT ":" 2DIGIT
                  ; 00:00:00 - 23:59:59 (e.g., 14:33:22)
wkday        = "Mon" | "Tue" | "Wed" | "Thu" | "Fri" | "Sat" |
               "Sun"
month        = "Jan" | "Feb" | "Mar" | "Apr" | "May" | "Jun" |
               "Jul" | "Aug" | "Sep" | "Oct" | "Nov" | "Dec"
iso8601-interval = ";" *SP "-" duration *SP ";" *SP "+" duration
duration = "P" ( dur-date | dur-week )
dur-date = ( dur-day | dur-month | dur-year ) [ dur-time ]
dur-year = 1*DIGIT "Y" [ dur-month ] [ dur-day ]
dur-month = 1*DIGIT "M" [ dur-day ]
dur-day = 1*DIGIT "D"
dur-time = "T" ( dur-hour | dur-minute | dur-second )
dur-hour = 1*DIGIT "H" [ dur-minute ] [ dur-second ]
dur-minute = 1*DIGIT "M" [ dur-second ]
dur-second = 1*DIGIT "S"
dur-week = 1*DIGIT "W"

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: BNF for the datetime format&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="memento-datetime"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1.1.2"></a><h3>2.1.1.2.&nbsp;
Values for Memento-Datetime</h3>

<p>
      Values for the "Memento-Datetime" headers MUST be datetimes expressed according 
      to the rfc1123-date construction rule of the BNF in <a class='info' href='#datetime-BNF'>Figure&nbsp;1<span> (</span><span class='info'>BNF for the datetime format</span><span>)</span></a>; 
      they MUST be represented in Greenwich Mean Time (GMT).
    
</p>
<p>
      An example "Memento-Datetime" response header:
    
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Memento-Datetime: Wed, 30 May 2007 18:47:52 GMT
</pre></div>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1.2"></a><h3>2.1.2.&nbsp;
Vary</h3>

<p>
The "Vary" response header is used in responses to indicate the dimensions in 
  which content negotiation was successfully applied. This header is used in the Memento framework to indicate both whether datetime  
  negotiation was applied or is supported by the responding server. 

</p>
<p>
For example, this use of the "Vary" header indicates that datetime is the only dimension in which negotiation was applied:

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Vary: negotiate, accept-datetime
</pre></div>
<p>
The use of the "Vary" header in this example shows that both datetime negotiation, and media type content negotiation was applied:

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Vary: negotiate, accept-datetime, accept
</pre></div>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1.3"></a><h3>2.1.3.&nbsp;
Location</h3>

<p>
The "Location" header is used as defined in <a class='info' href='#RFC2616'>RFC 2616<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a> [RFC2616].  
  Examples are given in <a class='info' href='#component 1.2'>Section&nbsp;3<span> (</span><span class='info'>The Memento Framework, Datetime Negotiation component: HTTP Interactions</span><span>)</span></a> below.

</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1.4"></a><h3>2.1.4.&nbsp;
Link</h3>

<p>
      The "Link" response header is specified in <a class='info' href='#RFC5988'>RFC5988<span> (</span><span class='info'>Nottingham, M., &ldquo;Web Linking,&rdquo; October&nbsp;2010.</span><span>)</span></a> [RFC5988]. 
      The Memento framework introduces new Relation Types to convey typed links among Original Resources, TimeGates, Mementos, and TimeMaps.
      Already existing Relation Types, among others, aimed at supporting navigation among a series of ordered resources may also be used 
      in the Memento framework. 
      This is detailed in <a class='info' href='#Link Header Relation Types'>Link Header Relation Types<span> (</span><span class='info'>Link Header Relation Types</span><span>)</span></a>, below.
    
</p>
<a name="Link Header Relation Types"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
Link Header Relation Types</h3>

<p>
The "Link" header specified in <a class='info' href='#RFC5988'>RFC5988<span> (</span><span class='info'>Nottingham, M., &ldquo;Web Linking,&rdquo; October&nbsp;2010.</span><span>)</span></a> [RFC5988] is semantically equivalent 
  to the "&lt;LINK&gt;" element in HTML, 
  as well as the "atom:link" feed-level element in Atom <a class='info' href='#RFC4287'>RFC 4287<span> (</span><span class='info'>Nottingham, M., Ed. and R. Sayre, Ed., &ldquo;The Atom Syndication Format,&rdquo; December&nbsp;2005.</span><span>)</span></a> [RFC4287]. 
  By default, the origin of a link expressed by an entry in a "Link" header 
  (named Context IRI in <a class='info' href='#RFC5988'>RFC5988<span> (</span><span class='info'>Nottingham, M., &ldquo;Web Linking,&rdquo; October&nbsp;2010.</span><span>)</span></a> [RFC5988]) 
  is the IRI of the requested resource. 

</p>
<a name="memento-rels"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.1"></a><h3>2.2.1.&nbsp;
Memento Framework Relation Types</h3>

<p>
The Relation Types used in the Memento framework are listed in the remainder of this section, and their use is summarized in 
  the below table. <a class='info' href='#AppendixFlow'>Appendix&nbsp;A<span> (</span><span class='info'>Appendix B: A Sample, Successful Memento Request/Response cycle</span><span>)</span></a> shows a Memento request/response cycle 
  that uses all the Relation Types that are introduced here.
</p><br /><hr class="insert" />
<a name="Relation Type Table"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="center"><col align="center"><col align="center"><col align="center">
<tr><th align="center">Relation Type</th><th align="center">Original Resource</th><th align="center">TimeGate</th><th align="center">Memento</th></tr>
<tr>
<td align="center">original</td>
<td align="center">NA, except see <a class='info' href='#HTTP_OriginalResource_server_memento'>Section&nbsp;3.1.2.1<span> (</span><span class='info'>Original Resource is an Appropriate Memento</span><span>)</span></a></td>
<td align="center">REQUIRED, 1</td>
<td align="center">REQUIRED, 1</td>
</tr>
<tr>
<td align="center">timegate</td>
<td align="center">RECOMMENDED, 0 or more</td>
<td align="center">NA</td>
<td align="center">RECOMMENDED, 0 or more</td>
</tr>
<tr>
<td align="center">timemap</td>
<td align="center">NA</td>
<td align="center">RECOMMENDED, 0 or 1</td>
<td align="center">RECOMMENDED, 0 or more</td>
</tr>
<tr>
<td align="center">memento</td>
<td align="center">NA, except see <a class='info' href='#HTTP_OriginalResource_server_memento'>Section&nbsp;3.1.2.1<span> (</span><span class='info'>Original Resource is an Appropriate Memento</span><span>)</span></a></td>
<td align="center">REQUIRED, 1 or more</td>
<td align="center">REQUIRED, 1 or more</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 1: The use of Relation Types&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
    For several of the Relation Types introduced in the Memento framework, 
    the use of a "datetime" attribute is REQUIRED. The value for this attribute MUST be a datetime expressed according 
    to the <a class='info' href='#RFC1123'>RFC 1123<span> (</span><span class='info'>Braden, R., &ldquo;Requirements for Internet Hosts - Application and Support,&rdquo; October&nbsp;1989.</span><span>)</span></a> [RFC1123] format, which is formalized by the 
    rfc1123-date construction rule of the BNF in <a class='info' href='#datetime-BNF'>Figure&nbsp;1<span> (</span><span class='info'>BNF for the datetime format</span><span>)</span></a>; 
    it MUST be represented in Greenwich Mean Time (GMT).
  
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.1.1"></a><h3>2.2.1.1.&nbsp;
Relation Type &quot;original&quot;</h3>

<p>
      "original" -- A "Link" header entry with a Relation Type of "original" is used to point from a TimeGate or 
      a Memento to their associated Original Resource. 
      In all cases, an entry with the "original" Relation Type MUST occur exactly once in a Link header. 
      Details for the entry are as follows:
    
</p>
<p></p>
<ul class="text">
<li>Context IRI: URI-G, URI-Mj
</li>
<li>Target IRI: URI-R
</li>
<li>Relation Type: "original"
</li>
<li>Use: REQUIRED
</li>
<li>Cardinality: 1
</li>
</ul>

<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.1.2"></a><h3>2.2.1.2.&nbsp;
Relation Type &quot;timegate&quot;</h3>

<p>
"timegate" -- A "Link" header entry with a Relation Type of "timegate" is used to point both from an Original Resource  
or a Memento to a TimeGate for the Original Resource. In both cases, the use of an entry with the "timegate" 
Relation Type is RECOMMENDED. Since more than one TimeGate can exist for any Original Resource, multiple entries with a "timegate" 
Relation Type MAY occur, each with a distinct Target IRI. 
Details for the entry are as follows:

</p>
<p></p>
<ul class="text">
<li>Context IRI: URI-R or URI-Mj
</li>
<li>Target IRI: URI-G
</li>
<li>Relation Type: "timegate"
</li>
<li>Use: RECOMMENDED
</li>
<li>Cardinality: 0 or more
</li>
</ul>

<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.1.3"></a><h3>2.2.1.3.&nbsp;
Relation Type &quot;timemap&quot;</h3>

<p>
"timemap" -- A "Link" header entry with a Relation Type of "timemap" is used to point from both a TimeGate 
or a Memento to a TimeMap resource from which a list of Mementos known to the responding server is available. 
Use of an entry with the "timemap" Relation Type is RECOMMENDED, and if used it MUST occur exactly once. 
This link MUST include a "type" attribute and its value MUST be "application/link-format", 
referring to the MIME type introduced in <a class='info' href='#I-D.ietf-core-link-format'>I-D.ietf-core-link-format<span> (</span><span class='info'>Shelby, Z., &ldquo;CoRE Link Format,&rdquo; October&nbsp;2010.</span><span>)</span></a> [I&#8209;D.ietf&#8209;core&#8209;link&#8209;format].
Details for the entry are as follows:

</p>
<p></p>
<ul class="text">
<li>Context IRI: URI-G or URI-Mi
</li>
<li>Target IRI: URI-T
</li>
<li>Relation Type: "timemap"
</li>
<li>Target Attribute: "type"
</li>
<li>Use: RECOMMENDED
</li>
<li>Cardinality: 0 or more
</li>
</ul>

<a name="memento-rel"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.1.4"></a><h3>2.2.1.4.&nbsp;
Relation Type &quot;memento&quot;</h3>

<p>
"memento" -- A "Link" header entry with a Relation Type of "memento" is used to point from  
both a TimeGate and a Memento to various Mementos for an Original Resource. 
This link MUST include a "datetime" attribute with a value that matches the Memento-Datetime 
of the Memento that is the target of the link; that is, 
the value of the Memento-Datetime header that is returned when the URI of the linked Memento is dereferenced. 
Use of entries with the "memento" Relation Type is REQUIRED and it MUST be as follows:

</p>
<p>For all responses to HTTP HEAD/GET requests issued against an existing TimeGate or Memento:
</p>
<p></p>
<ul class="text">
<li>One "memento" link MUST be included that has as Target IRI the URI of the temporally first Memento known to the responding server;
</li>
<li>One "memento" link MUST be included that has as Target IRI the URI of the temporally most recent Memento known to the responding server.
</li>
</ul>

<p>For all responses to HTTP HEAD/GET requests issued against a TimeGate or a Memento, in which a Memento is selected or served by the responding server:
</p>
<p></p>
<ul class="text">
<li>One "memento" link MUST be included that has as Target IRI the URI of the Memento that was selected or served;
</li>
<li>One "memento" link SHOULD be included that has as Target IRI the URI of the Memento that is previous to the selected Memento in the temporal 
    series of all Mementos (sorted by ascending Memento-Datetime values) known to the server;
</li>
<li>One "memento" link SHOULD be included that has as Target IRI the URI the Memento that is next to the selected Memento in the temporal series of all Mementos 
    (sorted by ascending Memento-Datetime values) known to the server.
</li>
<li>Other "memento" links MAY only be included if both the previous and next links are provided. Each of these OPTIONAL 
      "memento" links MUST have as Target IRI the URI of a Memento other than the ones listed above.
</li>
</ul>

<p>Note that the Target IRI of some of these links may coincide. For example, if the selected Memento actually is the first 
    Memento known to the server, only three distinct "memento" links may result. The value for the "datetime" attribute of these links would 
    be the datetimes of the first (equal to selected), next, and most recent Memento known to the responding server.
</p>
<p>The summary is as follows:
</p>
<p></p>
<ul class="text">
<li>Context IRI: URI-G, URI-Mj
</li>
<li>Target IRI: URI-M
</li>
<li>Relation Type: "memento"
</li>
<li>Target Attribute: "datetime"
</li>
<li>Use: REQUIRED
</li>
<li>Cardinality: 1 or more
</li>
</ul>

<a name="other-rels"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.2"></a><h3>2.2.2.&nbsp;
Other Relation Types</h3>

<p>Web Linking <a class='info' href='#RFC5988'>RFC5988<span> (</span><span class='info'>Nottingham, M., &ldquo;Web Linking,&rdquo; October&nbsp;2010.</span><span>)</span></a> [RFC5988] allows for the inclusion of links with different Relation Types but 
      the same Target IRI, and hence the Relation Types introduced by the Memento framework MAY be combined with others 
      as deemed necessary. As the "memento" Relation Type focuses on conveying the datetime of a linked Memento, Relation Types 
      that allow navigating among the temporally ordered series of Mementos known to a server are of particular 
      importance. With this regard, the Relation Types listed in the below table SHOULD be considered for 
      combination with the "memento" Relation Type. A distinction is made between responding servers that 
      can be categorized as systems that are the focus of <a class='info' href='#RFC5829'>RFC5829<span> (</span><span class='info'>Brown, A., Clemm, G., and J. Reschke, &ldquo;Link Relation Types for Simple Version Navigation between Web Resources,&rdquo; April&nbsp;2010.</span><span>)</span></a> [RFC5829] 
      (such as version contol systems) 
      and others that can not (such as 
      Web archives). Note that, in terms of <a class='info' href='#RFC5829'>RFC5829<span> (</span><span class='info'>Brown, A., Clemm, G., and J. Reschke, &ldquo;Link Relation Types for Simple Version Navigation between Web Resources,&rdquo; April&nbsp;2010.</span><span>)</span></a> [RFC5829], the last Memento (URI-Mn) is 
      the version prior to the latest (i.e. current) version.
</p><br /><hr class="insert" />
<a name="other-rel-types"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="center"><col align="center"><col align="center">
<tr><th align="center">Memento Type</th><th align="center">RFC5988 system</th><th align="center">non RFC5988 system</th></tr>
<tr>
<td align="center">First Memento (URI-M0)</td>
<td align="center">first</td>
<td align="center">first</td>
</tr>
<tr>
<td align="center">Last Memento (URI-Mn)</td>
<td align="center">last</td>
<td align="center">last</td>
</tr>
<tr>
<td align="center">Selected Memento (URI-Mj)</td>
<td align="center">NA</td>
<td align="center">NA</td>
</tr>
<tr>
<td align="center">Memento prior to selected Memento (URI-Mi)</td>
<td align="center">predecessor-version</td>
<td align="center">prev</td>
</tr>
<tr>
<td align="center">Memento next to selected Memento (URI-Mk)</td>
<td align="center">successor-version</td>
<td align="center">next</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 2: The use of Relation Types&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="component 1.2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
The Memento Framework, Datetime Negotiation component: HTTP Interactions</h3>

<p>This section describes the HTTP interactions of the Memento framework for a variety 
    of scenarios. First, <a class='info' href='#intro-flow'>Figure&nbsp;2<span> (</span><span class='info'>Typical Memento request/response chain</span><span>)</span></a> provides a schematic overview of a successful request/response chain that 
    involves datetime negotiation. Dashed lines depict HTTP transactions between user agent and server. <a class='info' href='#AppendixFlow'>Appendix&nbsp;A<span> (</span><span class='info'>Appendix B: A Sample, Successful Memento Request/Response cycle</span><span>)</span></a> 
    shows these HTTP interactions in detail for the case where the Original Resource resides on one server, 
    whereas both the TimeGate and the Mementos reside on another. Scenarios also exist in which all these resources 
    are on the same server (for example, Content Management Systems) or on different servers (for example, an aggregator of TimeGates). 
    Note that, in Step 2 and Step 6, the HTTP status code of the response is shown as 
    "200 OK", but a series of "206 Partial Content" could be substituted without loss of generality.
  
</p><br /><hr class="insert" />
<a name="intro-flow"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
1: UA --- HTTP GET/HEAD; Accept-Datetime: Tj ---------------&gt; URI-R
2: UA &lt;-- HTTP 200; Link: URI-G ----------------------------- URI-R
3: UA --- HTTP GET/HEAD; Accept-Datetime: Tj ---------------&gt; URI-G
4: UA &lt;-- HTTP 302; Location: URI-Mj; Vary; Link:
      URI-R,URI-T,URI-M0,URI-Mn,URI-Mi,URI-Mj,URI-Mk -------- URI-G
5: UA --- HTTP GET URI-Mj; Accept-Datetime: Tj -------------&gt; URI-Mj
6: UA &lt;-- HTTP 200; Memento-Datetime: Tj; Link:
      URI-R,URI-T,URI-G,URI-M0,URI-Mn,URI-Mi,URI-Mj,URI-Mk -- URI-Mj
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: Typical Memento request/response chain&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p></p>
<ul class="text">
<li>
        Step 1: In order to determine what the URI is of a TimeGate for an Original Resource, 
        the user agent issues an HTTP HEAD/GET request against the URI of the Original Resource (URI-R).
      
</li>
<li>
        Step 2: The entity-header of the response from URI-R includes an HTTP "Link" header 
        with a Relation Type of "timegate" pointing at a TimeGate (URI-G) for the Original Resource.
      
</li>
<li>
        Step 3: The user agent starts the datetime negotiation process with the TimeGate by issuing 
        an HTTP GET request against its URI-G thereby including an "Accept-Datetime" 
        HTTP header with a value of the datetime of the desired prior state of the Original Resource.
      
</li>
<li>
        Step 4: The entity-header of the response from URI-G includes a "Location" header pointing at 
        the URI of a Memento (URI-Mj) for the Original Resource. 
        In addition, the entity-header contains an HTTP "Link" header with a Relation Type of "original" 
        pointing at the Original Resource, and an HTTP "Link" header with a Relation Type 
        of "timemap" pointing at a TimeMap (URI-T). Also HTTP Links pointing at various Mementos are provided using the 
        "memento" Relation Type, as specified in <a class='info' href='#memento-rel'>Section&nbsp;2.2.1.4<span> (</span><span class='info'>Relation Type &quot;memento&quot;</span><span>)</span></a>.
      
</li>
<li>
        Step 5: The user agent issues an HTTP GET request against the URI-Mj of a Memento, obtained in Step 4.
      
</li>
<li>
        Step 6: The entity-header of the response from URI-Mj includes a "Memento-Datetime" HTTP header with a 
        value of the datetime of the Memento.  
        It also contains an HTTP "Link" header with a Relation Type of "original" pointing at the Original Resource, 
        with a Relation Type of "timegate" pointing at a TimeGate 
        associated with the Original Resource, and with a Relation Type of "timemap" pointing at a TimeMap. 
        The state that is expressed by the representation provided in the response is the state the Original 
        Resource had at the datetime expressed in the "Memento-Datetime" header. This response also includes 
        HTTP Links with a "memento" Relation Type pointing at various Mementos, as specified in <a class='info' href='#memento-rel'>Section&nbsp;2.2.1.4<span> (</span><span class='info'>Relation Type &quot;memento&quot;</span><span>)</span></a>.
      
</li>
</ul>

<p>
      The following sections detail the specifics of HTTP interactions with Original Resources, TimeGates and Mementos under various conditions. 
    
</p>
<a name="HTTP_OriginalResource"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Interactions with an Original Resource</h3>

<p>
      This section details HTTP GET/HEAD requests targeted at an Original Resource (URI-R). 
      
</p>
<a name="HTTP_OriginalResource_client"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.1"></a><h3>3.1.1.&nbsp;
Step 1: User Agent Requests an Original Resource</h3>

<p>
        In order to try and discover a TimeGate for the Original Resource, the user agent MAY issue an HTTP HEAD or GET request 
        against the Original Resource's URI.  Use of the "Accept-Datetime" header in the HTTP HEAD/GET request is OPTIONAL.
      
</p>
<p>
        <a class='info' href='#200-step1-http'>Figure&nbsp;3<span> (</span><span class='info'>User Agent Requests Original Resource</span><span>)</span></a> shows the use of HTTP HEAD indicating
        the user agent is not interested in retrieving a representation of the Original Resource, 
        but only in determining a TimeGate for it. 
        It also shows the use of the "Accept-Datetime" header
        anticipating that the user agent will set it for the entire duration of a
        Memento request/response cycle.
      
</p><br /><hr class="insert" />
<a name="200-step1-http"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
HEAD / HTTP/1.1
Host: a.example.org
Accept-Datetime: Tue, 11 Sep 2001 20:35:00 GMT
Connection: close
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3: User Agent Requests Original Resource&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="HTTP_OriginalResource_server"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.2"></a><h3>3.1.2.&nbsp;
Step 2: Server Responds to a Request for an Original Resource</h3>

<p>        
          The response of the Original Resource's server
          to the user agent's HTTP HEAD/GET request of Step 1, for the case where the Original Resource exists,  
          is as it would be in a regular HTTP request/response cycle, but in addition MAY include a HTTP "Link" header 
          with a Relation Type of "timegate" that conveys the URI of the Original Resource's TimeGate as the Target IRI of the Link.
          Multiple HTTP Links with a relation type of "timegate" MAY be provided to accomodate situations in which the server is aware of 
          multiple TimeGates for an Original Resource. The actual Target IRI provided in the "timegate" 
          Link may depend on several factors including 
          the datetime provided in the "Accept-Datetime" header, and the IP address of the user agent. 
          A response for this case is illustrated in <a class='info' href='#200-step2-http'>Figure&nbsp;4<span> (</span><span class='info'>Server of Original Resource Responds</span><span>)</span></a>.
        
</p><br /><hr class="insert" />
<a name="200-step2-http"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
HTTP/1.1 200 OK
Date: Thu, 21 Jan 2010 00:02:12 GMT
Server: Apache
Link: &lt;http://arxiv.example.net/web/timegate/http://a.example.org&gt;
   ; rel="timegate"
Content-Length: 255
Connection: close
Content-Type: text/html; charset=iso-8859-1
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;4: Server of Original Resource Responds&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
          Servers that actively maintain archives of their resources SHOULD include the "timegate" HTTP "Link" header
          because this link is an important way for a user agent to discover TimeGates for those resources. 
          This includes servers such as Content Management Systems, Control Version Systems, 
          and Web servers with associated transactional archives <a class='info' href='#Fitch'>Fitch<span> (</span><span class='info'>Fitch, &ldquo;Web site archiving - an approach to recording every materially different response produced by a website,&rdquo; July&nbsp;2003.</span><span>)</span></a> [Fitch]. 
          Servers that do not actively maintain archives of their resources MAY include the "timegate" HTTP "Link" header 
          as a way to convey a preference for TimeGates for their resources exposed by a third party archive. 
          This includes servers that rely on Web archives such as the Internet Archive to archive their resources.
        
</p>
<p>
          The server of the Original Resource MUST treat requests with and without an "Accept-Datetime" header in the same way:
        
</p>
<p></p>
<ul class="text">
<li>The response MUST either always or never include a HTTP "link" header with an entry that has a "timegate" Relation Type and 
  the URI of a TimeGate as the Target IRI.
</li>
<li>The entity-body of the response MUST be the same, for user agent requests with or without a "Accept-Datetime" header.
</li>
</ul>

<a name="HTTP_OriginalResource_server_memento"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.2.1"></a><h3>3.1.2.1.&nbsp;
Original Resource is an Appropriate Memento</h3>

<p>The "Memento-Datetime" header MAY be applied to an Original Resource directly 
            as both an indication that the state of the Original Resource has not changed since 
            the datetime conveyed in the "Memento-Datetime" header, and as a promise that it will not change 
            anymore beyond it. This may occur, for example, for certain stable media resources 
            on news sites. 
            In case the user agent's preferred datetime is equal to or more recent than the datetime conveyed as the value of 
            Memento-Datetime in the server's response in Step 2, the user agent SHOULD conclude it has located an appropriate Memento, and it 
            SHOULD NOT continue to Step 3.
</p>
<p><a class='info' href='#memento-response-URI-R1'>Figure&nbsp;5<span> (</span><span class='info'>Response to a request for an Original Resource that was created stable</span><span>)</span></a> illustrates such a response to a request 
            for the resource with URI http://a.example.org/pic that has been stable since it was created. Note the use of both 
            the "memento" and "original" Relation Types for links that have as Target IRI the URI of the Original Resource.
          
</p><br /><hr class="insert" />
<a name="memento-response-URI-R1"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
HTTP/1.1 200 OK
Date: Thu, 21 Jan 2010 00:02:12 GMT
Server: Apache
Link:
 &lt;http://a.example.org/pic&gt;
  ; rel="original memento"
  ; datetime="Fri, 20 Mar 2009 11:00:00 GMT"
Memento-Datetime: Fri, 20 Mar 2009 11:00:00 GMT
Content-Length: 255
Connection: close
Content-Type: text/html; charset=iso-8909-1

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;5: Response to a request for an Original Resource that was created stable&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>Cases may also exist in which a resource becomes stable at a certain point in its existence, but changed previously. 
 In such cases, the Original Resource may know about a TimeGate that is aware of its prior history and hence MAY also include 
 a link with a "timegate" Relation Type. This is illustrated in <a class='info' href='#memento-response-URI-R2'>Figure&nbsp;6<span> (</span><span class='info'>Response to a request for an Original Resource that became stable</span><span>)</span></a>, where 
   the "memento" and "original" Relation Types are used as in <a class='info' href='#memento-response-URI-R1'>Figure&nbsp;5<span> (</span><span class='info'>Response to a request for an Original Resource that was created stable</span><span>)</span></a>, and 
   the existence of a TimeGate to negotiate for Mementos with datetimes prior to 
   Fri, 20 Mar 2009 11:00:00 GMT is indicated.
</p><br /><hr class="insert" />
<a name="memento-response-URI-R2"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
HTTP/1.1 200 OK
Date: Thu, 21 Jan 2010 00:02:12 GMT
Server: Apache
Link:
 &lt;http://a.example.org/pic&gt;
  ; rel="original memento"
  ; datetime="Fri, 20 Mar 2009 11:00:00 GMT",
 &lt;http://arxiv.example.net/web/timegate/http://a.example.org/pic&gt;
  ; rel="timegate"
Memento-Datetime: Fri, 20 Mar 2009 11:00:00 GMT
Content-Length: 255
Connection: close
Content-Type: text/html; charset=iso-8909-1
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;6: Response to a request for an Original Resource that became stable&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="HTTP_OriginalResource_server_404"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.2.2"></a><h3>3.1.2.2.&nbsp;
Server Exists and Original Resource Used to Exist</h3>

<p>
Servers SHOULD also provide a "timegate" HTTP "Link" header in responses
to requests for an Original Resource that the server knows used to exist, but no longer does.
This allows the use of an Original Resource's URI as an
entry point to representations of its prior states even if the
resource itself no longer exists. A server's response for this case is illustrated in <a class='info' href='#404-response-URI-R'>Figure&nbsp;7<span> (</span><span class='info'>Response to a request for an Original Resource that not longer exists</span><span>)</span></a>.

</p><br /><hr class="insert" />
<a name="404-response-URI-R"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
HTTP/1.1 404 Not Found
Date: Thu, 21 Jan 2010 00:02:12 GMT
Server: Apache
Link:
 &lt;http://arxiv.example.net/web/timegate/http://a.example.org/gone&gt;
  ; rel="timegate"
Content-Length: 255
Connection: close
Content-Type: text/html; charset=iso-8909-1

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;7: Response to a request for an Original Resource that not longer exists&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>In case the server is not aware of the prior existence of the Original Resource, its response SHOULD NOT include a "timegate" HTTP Link.
    <a class='info' href='#HTTP_OriginalResource_server_xxx'>Section&nbsp;3.1.2.3<span> (</span><span class='info'>Missing or Inadequate &quot;timegate&quot; Link in Original Server's Response</span><span>)</span></a> details what the user agent's behavior should be in such cases.
</p>
<a name="HTTP_OriginalResource_server_xxx"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.2.3"></a><h3>3.1.2.3.&nbsp;
Missing or Inadequate &quot;timegate&quot; Link in Original Server's Response</h3>

<p>
            A user agent MAY ignore the TimeGate returned in Step 2. However, when engaging in a Memento 
            request/response cycle, a user agent SHOULD NOT proceed immediately to Step 3 by using a TimeGate of its own preference but rather 
            SHOULD always start the cycle by issuing an HTTP GET/HEAD against the Original Resource 
            (Step 1, <a class='info' href='#200-step1-http'>Figure&nbsp;3<span> (</span><span class='info'>User Agent Requests Original Resource</span><span>)</span></a>) as it is an important way 
            to learn about dedicated or preferred TimeGates for the Original Resource. Also, cases exist in which the response 
            in Step 2 will not provide a "timegate" link, including:
</p>
<p></p>
<ul class="text">
<li>The Original Resource's server does not support the Memento framework;
</li>
<li>The Original Resource does no longer exist and the responding server is not aware of its prior existence;
</li>
<li>The server that hosted the Original Resource no longer exists;
</li>
</ul>

<p>In all these cases, the user agent SHOULD attempt to determine an appropriate TimeGate for the Original Resource, 
            either automatically or interactively supported by the user.
</p>
<a name="HTTP_TimeGate"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Interactions with a TimeGate</h3>

<p>This section details HTTP GET/HEAD requests targeted at a TimeGate (URI-G).
</p>
<a name="HTTP_TimeGate_client"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.1"></a><h3>3.2.1.&nbsp;
Step 3: User Agent Negotiates with a TimeGate</h3>

<p>
In order to negotiate with a TimeGate, the user agent MUST issue a HTTP HEAD or GET against its URI, 
its request MUST include the "Accept-Datetime" header to express its datetime preference, 
and the use of that header MUST be as described in 
  <a class='info' href='#accept-datetime'>Section&nbsp;2.1.1.1<span> (</span><span class='info'>Values for Accept-Datetime</span><span>)</span></a>. 
The URI of the TimeGate may have been provided as the Target IRI of a "timegate" HTTP "Link" header in the response 
  from the Original Resource (Step 2, <a class='info' href='#200-step2-http'>Figure&nbsp;4<span> (</span><span class='info'>Server of Original Resource Responds</span><span>)</span></a>), or may have resulted from another discovery 
  mechanism, for example, based on the aggregation of TimeMaps (<a class='info' href='#timemap'>Section&nbsp;4.1<span> (</span><span class='info'>TimeMaps</span><span>)</span></a>) or user interaction.
  Such a request is illustrated in <a class='info' href='#200-step3-http'>Figure&nbsp;8<span> (</span><span class='info'>User agent negotiates with TimeGate</span><span>)</span></a>. 

</p><br /><hr class="insert" />
<a name="200-step3-http"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
GET /web/timegate/http://a.example.org HTTP/1.1
Host: arxiv.example.net
Accept-Datetime: Tue, 11 Sep 2001 20:35:00 GMT
Connection: close
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;8: User agent negotiates with TimeGate&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="HTTP_TimeGate_server"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.2"></a><h3>3.2.2.&nbsp;
Step 4: Server Responds to Negotiation with TimeGate</h3>

<p>
  In order to respond to a datetime negotiation request (Step 3, <a class='info' href='#HTTP_TimeGate_client'>Section&nbsp;3.2.1<span> (</span><span class='info'>Step 3: User Agent Negotiates with a TimeGate</span><span>)</span></a>), 
  the server uses an internal algorithm to select the Memento that best meets the user agent's 
  datetime preference, and redirects to it. The exact nature of the selection algorithm is at the server's discretion
  but SHOULD be consistent. A variety of approaches can be used including selecting the Memento 
  that is nearest in time (either past or future) or nearest in the past relative to the requested datetime.
  Special cases for datetime negotiation with a TimeGate exist, 
  and they are addressed in <a class='info' href='#HTTP_TimeGate_server_302'>Section&nbsp;3.2.2.3<span> (</span><span class='info'>Accept-Datetime Not Provided</span><span>)</span></a> through 
  <a class='info' href='#HTTP_TimeGate_server_404'>Section&nbsp;3.2.2.7<span> (</span><span class='info'>TimeGate Does Not Exist</span><span>)</span></a>.
  
</p>
<a name="HTTP_TimeGate_server_OK"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.2.1"></a><h3>3.2.2.1.&nbsp;
Successful Scenario</h3>

<p>
    In cases where the TimeGate exists, and 
    the datetime provided in the user agent's "Accept-Datetime" header can be parsed and is not out of range, 
    the server selects a Memento based 
    on the user agent's datetime preference. The response MUST have a "302 Found" HTTP status code, 
    and the "Location" header MUST be used to convey the URI of the selected Memento.  
    The "Vary" header MUST be provided and it MUST include the "negotiate" and "accept-datetime" values
    to indicate that datetime negotiation has taken place. The "Link" header MUST be provided and contain links with Relation Types 
      subject to the considerations described in <a class='info' href='#Link Header Relation Types'>Section&nbsp;2.2<span> (</span><span class='info'>Link Header Relation Types</span><span>)</span></a>. 
    Such a response is illustrated in <a class='info' href='#200-step4-http'>Figure&nbsp;9<span> (</span><span class='info'>Server of TimeGate responds</span><span>)</span></a>. 
  
</p><br /><hr class="insert" />
<a name="200-step4-http"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
HTTP/1.1 302 Found
Date: Thu, 21 Jan 2010 00:06:50 GMT
Server: Apache
Vary: negotiate, accept-datetime
Location:
 http://arxiv.example.net/web/20010911203610/http://a.example.org
Link: &lt;http://a.example.org&gt;; rel="original",
 &lt;http://arxiv.example.net/web/timemap/http://a.example.org&gt;
   ; rel="timemap"; type="application/link-format",
 &lt;http://arxiv.example.net/web/20000915112826/http://a.example.org&gt;
   ; rel="first memento"; datetime="Tue, 15 Sep 2000 11:28:26 GMT",
 &lt;http://arxiv.example.net/web/20080708093433/http://a.example.org&gt;
   ; rel="last memento"; datetime="Tue, 08 Jul 2008 09:34:33 GMT",
 &lt;http://arxiv.example.net/web/20010911203610/http://a.example.org&gt;
   ; rel="memento"; datetime="Tue, 11 Sep 2001 20:36:10 GMT",
 &lt;http://arxiv.example.net/web/20010911203610/http://a.example.org&gt;
   ; rel="prev memento"; datetime="Tue, 11 Sep 2001 20:30:51 GMT",
 &lt;http://arxiv.example.net/web/20010911203610/http://a.example.org&gt;
   ; rel="next memento"; datetime="Tue, 11 Sep 2001 20:47:33 GMT"
Content-Length: 0
Content-Type: text/plain; charset=UTF-8
Connection: close
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;9: Server of TimeGate responds&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p> 
  Note that the regular content negotiation dimensions (media type, 
  character encoding, language, and compression) remain available. 
  It is the TimeGate server's responsibility to honor (or not) such 
  content negotiation, 
  and in doing so it MUST always first select a Memento that meets the user agent's datetime preference, and then 
  consider honoring regular content negotiation for it.

</p>
<a name="s_range"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.2.2"></a><h3>3.2.2.2.&nbsp;
Datetime Out of the Server's Range</h3>

<p>
            In case, in Step 3, a user agent's "Accept-Datetime" header does not convey an interval indicator, 
            and conveys a datetime that is 
            either earlier than the datetime of the first Memento or later than the datetime of the most recent Memento 
            known to the server, 
            the server's response MUST be as described in <a class='info' href='#HTTP_TimeGate_server_OK'>Section&nbsp;3.2.2.1<span> (</span><span class='info'>Successful Scenario</span><span>)</span></a>, 
            with a selection of the first or most recent Memento, respectively.
          
</p>
<p>
            This is illustrated in <a class='info' href='#406-http-a'>Figure&nbsp;10<span> (</span><span class='info'>A TimeGate's response to a request for a Memento with a datetime earlier than that of the first Memento</span><span>)</span></a> that shows 
            the response from a TimeGate exposed by a MediaWiki server to a request by a user agent that 
            has an "Accept-Datetime: Mon, 31 May 1999 00:00:00 GMT" header. Note that a link is provided with a "successor-version" 
            Relation Type but not with a "predecessor-version" Relation Type.
          
</p><br /><hr class="insert" />
<a name="406-http-a"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
HTTP/1.1 302 Found
Server: Apache
Content-Length: 709
Content-Type: text/html; charset=utf-8
Date: Thu, 21 Jan 2010 00:09:40 GMT
Location:
 http://a.example.org/w/index.php?title=Clock&amp;oldid=1493688
Vary: negotiate, accept-datetime
Link: &lt;http://a.example.org/w/Clock&gt;; rel="original",
 &lt;http://a.example.org/Special:TimeMap/http://a.example.org/w/Clock&gt;
   ; rel="timemap",
 &lt;http://a.example.org/w/index.php?title=Clock&amp;oldid=1493688&gt;
   ; rel="first memento"; datetime="Sun, 28 Sep 2003 01:42:00 GMT",
    &lt;http://a.example.org/w/index.php?title=Clock&amp;oldid=1493854&gt;
   ; rel="successor-version memento"
   ; datetime="Tue, 30 Sep 2003 14:28:00 GMT",
 &lt;http://a.example.org/w/index.php?title=Clock&amp;oldid=337446696&gt;
   ; rel="last memento"; datetime="Tue, 12 Jan 2010 19:55:00 GMT"
Connection: close
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;10: A TimeGate's response to a request for a Memento with a datetime earlier than that of the first Memento&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="HTTP_TimeGate_server_302"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.2.3"></a><h3>3.2.2.3.&nbsp;
Accept-Datetime Not Provided</h3>

<p>
            In case, in Step 3, a user agent issues a request to a TimeGate and fails to include an "Accept-Datetime" request header, 
            the response MUST be handled as in <a class='info' href='#HTTP_TimeGate_server_OK'>Section&nbsp;3.2.2.1<span> (</span><span class='info'>Successful Scenario</span><span>)</span></a>, with a selection of the most recent 
            Memento known to the responding server.
          
</p>
<a name="HTTP_TimeGate_server_300"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.2.4"></a><h3>3.2.2.4.&nbsp;
Multiple Matching Mementos</h3>

<p>
            Because the finest datetime granularity epxressable using the <a class='info' href='#RFC1123'>RFC 1123<span> (</span><span class='info'>Braden, R., &ldquo;Requirements for Internet Hosts - Application and Support,&rdquo; October&nbsp;1989.</span><span>)</span></a> [RFC1123] format used in HTTP 
            is seconds level, 
            cases may occur in which a TimeGate server is aware of multiple Mementos that meet the user agent's datetime preference. 
            This may occur in CMS with very high update rates.  
            The response in this case MUST be handled as in <a class='info' href='#HTTP_TimeGate_server_OK'>Section&nbsp;3.2.2.1<span> (</span><span class='info'>Successful Scenario</span><span>)</span></a>, with the selection of one of the 
            matching Mementos. 
          
</p>
<p>
            As an example, <a class='info' href='#300-http'>Figure&nbsp;11<span> (</span><span class='info'>A TimeGate's response to a request that has multiple Mementos with a matching datetime</span><span>)</span></a> shows a hypothetical response from a 
            TimeGate on a MediaWiki server to a request for a Memento for the Original Resource http://a.example.org/w/Clock  
            for which two Mementos exist for the user agent's preferred datetime.
          
</p><br /><hr class="insert" />
<a name="300-http"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
HTTP/1.1 302 Found
Server: Apache
Content-Length: 705
Content-Type: text/html; charset=utf-8
Date: Thu, 21 Jan 2010 00:09:40 GMT
Vary: negotiate, accept-datetime
Location:
 http://a.example.org/w/index.php?title=Clock&amp;oldid=322586071
Link: &lt;http://a.example.org/w/Clock&gt;; rel="original",
 &lt;http://a.example.org/Special:TimeMap/http://a.example.org/w/Clock&gt;
   ; rel="timemap";type="application/link-format",
 &lt;http://a.example.org/w/index.php?title=Clock&amp;oldid=1493688&gt;
   ; rel="first memento"; datetime="Sun, 28 Sep 2003 01:42:00 GMT",
 &lt;http://a.example.org/w/index.php?title=Clock&amp;oldid=337446696&gt;
   ; rel="last memento"; datetime="Tue, 12 Jan 2010 19:55:00 GMT",
 &lt;http://a.example.org/w/index.php?title=Clock&amp;oldid=322586071&gt;
   ; rel="memento"; datetime="Sun, 31 May 2009 15:43:00 GMT",
 &lt;http://a.example.org/w/index.php?title=Clock&amp;oldid=326164283&gt;
   ; rel="memento successor-version"
   ; datetime="Sun, 31 May 2009 15:43:00 GMT"
 &lt;http://a.example.org/w/index.php?title=Clock&amp;oldid=326164283&gt;
   ; rel="memento predecessor-version"
   ; datetime="Sun, 31 May 2009 15:41:24 GMT"
Connection: close
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;11: A TimeGate's response to a request that has multiple Mementos with a matching datetime&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="ua_range"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.2.5"></a><h3>3.2.2.5.&nbsp;
Datetime Out of the User Agent's Range</h3>

<p>
              In case, in Step 3, a user agent conveys an interval indicator, and the responding server is not aware of any 
              Mementos with datetimes within the expressed interval, the server's response MUST have a "406 Not Acceptable" 
              HTTP status code. The use of the "Vary" header MUST be as described in <a class='info' href='#HTTP_TimeGate_server_OK'>Section&nbsp;3.2.2.1<span> (</span><span class='info'>Successful Scenario</span><span>)</span></a>. 
              The use of the "Link" header MUST be as described in <a class='info' href='#Link Header Relation Types'>Section&nbsp;2.2<span> (</span><span class='info'>Link Header Relation Types</span><span>)</span></a>.
              Specifically, the use of links with a "memento" Relation Type MUST follow the rules  
              for the case where no Memento is selected by the responding server, i.e. only "memento" links to the first and most recent Mementos 
              MUST be provided (<a class='info' href='#memento-rel'>Section&nbsp;2.2.1.4<span> (</span><span class='info'>Relation Type &quot;memento&quot;</span><span>)</span></a>).
            
</p>
<p>
              <a class='info' href='#406-http-req'>Figure&nbsp;12<span> (</span><span class='info'>User agent expresses interval of interest in Accept-Datetime header</span><span>)</span></a> shows a user agent using an "Accept-Datetime" header conveying an interval of interest 
              starting 5 hours before and ending 6 hours after Tue, 11 Sep 2001 20:35:00 GMT. <a class='info' href='#406-http-res'>Figure&nbsp;13<span> (</span><span class='info'>A TimeGate's response indicating it has no Mementos within the interval of interest</span><span>)</span></a> shows the 
              response from the TimeGate.
            
</p><br /><hr class="insert" />
<a name="406-http-req"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
GET /web/timegate/http://a.example.org HTTP/1.1
Host: arxiv.example.net
Accept-Datetime: Tue, 11 Sep 2001 20:35:00 GMT; -P5H;+P6H
Connection: close
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;12: User agent expresses interval of interest in Accept-Datetime header&nbsp;</b></font><br /></td></tr></table><hr class="insert" />
<br /><hr class="insert" />
<a name="406-http-res"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
HTTP/1.1 406 Not Acceptable
Date: Thu, 21 Jan 2010 00:06:50 GMT
Server: Apache
Vary: negotiate, accept-datetime
Link: &lt;http://an.example.org&gt;; rel="original",
 &lt;http://arxiv.example.net/web/timemap/http://a.example.org&gt;
   ; rel="timemap";type="application/link-format",
 &lt;http://arxiv.example.net/web/20000915112826/http://a.example.org&gt;
   ; rel="memento first"; datetime="Tue, 15 Sep 2000 11:28:26 GMT",
 &lt;http://arxiv.example.net/web/20080708093433/http://a.example.org&gt;
   ; rel="memento last"; datetime="Tue, 08 Jul 2008 09:34:33 GMT",
Content-Length: 1732
Connection: close
Content-Type: text/plain; charset=UTF-8
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;13: A TimeGate's response indicating it has no Mementos within the interval of interest&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="HTTP_TimeGate_server_400"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.2.6"></a><h3>3.2.2.6.&nbsp;
Accept-Datetime Unparseable</h3>

<p>
  In case, in Step 3, a user agent conveys a value for the "Accept-Datetime" request header that does 
  not conform to the accept-dt-value construction rule of the BNF in <a class='info' href='#datetime-BNF'>Figure&nbsp;1<span> (</span><span class='info'>BNF for the datetime format</span><span>)</span></a>, 
  the TimeGate server's response 
  MUST have a "400 Bad Request" HTTP status code. With all other respects, responses in this case MUST be handled as
  described in <a class='info' href='#ua_range'>Section&nbsp;3.2.2.5<span> (</span><span class='info'>Datetime Out of the User Agent's Range</span><span>)</span></a>

</p>
<a name="HTTP_TimeGate_server_404"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.2.7"></a><h3>3.2.2.7.&nbsp;
TimeGate Does Not Exist</h3>

<p>
            Cases may occur in which a user agent issues a request against a TimeGate that does not exist. This may, 
            for example, occur when a user agent uses internal knowledge to construct the URI of an assumed, yet non-existent TimeGate.
            In these cases, the response from the target server MUST have a "404 Not Found" HTTP status code, and SHOULD include a 
            "Vary" header that includes the "negotiate" and "accept-datetime" values as an indication that, generally, 
            the server is capable of datetime negotiation. 
            The response MUST NOT include a "Link" header with any of the Relation Types introduced in <a class='info' href='#memento-rels'>Section&nbsp;2.2.1<span> (</span><span class='info'>Memento Framework Relation Types</span><span>)</span></a>.
          
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.2.8"></a><h3>3.2.2.8.&nbsp;
HTTP Methods other than HEAD/GET</h3>

<p>
            In the above, the safe HTTP methods GET and HEAD are described for TimeGates. 
            TimeGates MAY support the safe HTTP methods OPTIONS and TRACE in the way described in <a class='info' href='#RFC2616'>RFC 2616<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a> [RFC2616]. 
            Unsafe HTTP methods 
            (i.e. PUT, POST, DELETE) MUST NOT be supported by a TimeGate. Such requests MUST yield 
            a response with a "405 Method Not Allowed" HTTP status code, and MUST include an "Allow" header to convey that only the
            HEAD and GET (and OPTIONALLY the OPTIONS and TRACE) methods are supported. 
            In addition, the response MUST have a "Vary" header that includes the "negotiate" and "accept-datetime" values  
            to indicate the TimeGate supports datetime negotiation. <a class='info' href='#405-response-URI-G'>Figure&nbsp;14<span> (</span><span class='info'>Response from a TimeGate accessed with HTTP method other than HEAD/GET</span><span>)</span></a> shows such a 
            response.
          
</p><br /><hr class="insert" />
<a name="405-response-URI-G"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
HTTP/1.1 405 Method Not Allowed
Date: Thu, 21 Jan 2010 00:02:12 GMT
Server: Apache
Vary: negotiate, accept-datetime
Allow: HEAD, GET
Content-Length: 255
Connection: close
Content-Type: text/html; charset=iso-8909-1
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;14: Response from a TimeGate accessed with HTTP method other than HEAD/GET&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="redirect_chains_tg"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.3"></a><h3>3.2.3.&nbsp;
Recognizing a TimeGate</h3>

<p>
      When a user agent issues a HTTP HEAD/GET request against a resource of which it found the URI as the Target IRI of an entry in the "Link" 
      header with a "timegate" Relation Type, it SHOULD NOT assume that the targeted resource effectively is a TimeGate and hence will behave 
      as described in <a class='info' href='#HTTP_TimeGate_server'>Section&nbsp;3.2.2<span> (</span><span class='info'>Step 4: Server Responds to Negotiation with TimeGate</span><span>)</span></a>. 
    
</p>
<p>
      A user agent MUST decide it has reached a TimeGate if the response to a HTTP HEAD/GET request against the resource's URI contains 
      a "Vary" header that includes the "negotiate" and "accept-datetime" values. If the response does not, the user agent MUST decide it has 
      not reached a TimeGate and proceed as follows:
    
</p>
<p></p>
<ul class="text">
<li>
        If the response contains a redirection, the user agent SHOULD follow it. Note that even a chain of redirections is possible, e.g. 
        URI-R -> URI-1 -> URI-2 -> ... -> URI-G
      
</li>
<li>
        If the response does not contain a redirection, or if the redirection (chain) does not lead to a TimeGate,
        the user agent SHOULD attempt to determine an appropriate TimeGate for the 
        Original Resource, either automatically or interactively supported by the user.  
      
</li>
</ul>

<p>
    Resources that are not TimeGates (i.e. do not behave as described in <a class='info' href='#HTTP_TimeGate_server'>Section&nbsp;3.2.2<span> (</span><span class='info'>Step 4: Server Responds to Negotiation with TimeGate</span><span>)</span></a>) MUST NOT 
    use a "Vary" header that includes the "accept-datetime" value. 
    
</p>
<a name="HTTP_Memento"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
Interactions with a Memento</h3>

<p>This section details HTTP GET/HEAD requests targeted at a Memento (URI-M).
</p>
<a name="HTTP_Memento_client"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.1"></a><h3>3.3.1.&nbsp;
Step 5: User Agent Requests a Memento</h3>

<p>
In Step 5, the user agent issues a HTTP GET request against the URI of a Memento. 
The user agent MAY include an "Accept-Datetime" header in this request, but 
the existence or absence of this header MUST NOT affect the server's response.
The URI of the Memento may have resulted from a response in Step 4, or the user agent 
may simply have happened upon it.
Such a request is illustrated in <a class='info' href='#200-step5-http'>Figure&nbsp;15<span> (</span><span class='info'>User agent requests Memento</span><span>)</span></a>.

</p><br /><hr class="insert" />
<a name="200-step5-http"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
GET /web/20010911203610/http://a.example.org HTTP/1.1
Host: arxiv.example.net
Accept-Datetime: Tue, 11 Sep 2001 20:35:00 GMT
Connection: close
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;15: User agent requests Memento&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="HTTP_Memento_server"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.2"></a><h3>3.3.2.&nbsp;
Step 6: Server Responds to a Request for a Memento</h3>

<p>
If the Memento requested by the user agent in Step 5 exists, the server's response MUST 
have a "200 OK" HTTP status code (or "206 Partial Content", where appropriate), 
and it MUST include a "Memento-Datetime" header with a value equal to the 
archival datetime of the Memento, that is, the datetime of the state of the Original Resource that is encapsulated 
in the Memento.  
The "Link" header MUST be provided and contain links subject to the considerations described in 
  <a class='info' href='#Link Header Relation Types'>Section&nbsp;2.2<span> (</span><span class='info'>Link Header Relation Types</span><span>)</span></a>.
  The Target IRI and, when applicable, the datetime values in the "Link" 
  header associated with the "memento" Relation Type SHOULD be the same as conveyed in Step 4, in case the TimeGate and the selected 
  Memento reside on the same server. However, they MAY be different in case the TimeGate and the selected Memento reside on different servers.

</p>
<p>
  <a class='info' href='#200-step6-http'>Figure&nbsp;16<span> (</span><span class='info'>Server of Memento responds</span><span>)</span></a> illustrates the server's response to the request issued against a Memento in Step 5  
  (<a class='info' href='#200-step5-http'>Figure&nbsp;15<span> (</span><span class='info'>User agent requests Memento</span><span>)</span></a>).

</p><br /><hr class="insert" />
<a name="200-step6-http"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
HTTP/1.1 200 OK
Date: Thu, 21 Jan 2010 00:09:40 GMT
Server: Apache-Coyote/1.1
Memento-Datetime: Tue, 11 Sep 2001 20:36:10 GMT
Link: &lt;http://a.example.org&gt;; rel="original",
 &lt;http://arxiv.example.net/web/timemap/http://a.example.org&gt;
   ; rel="timemap"; type="application/link-format",
 &lt;http://arxiv.example.net/web/timegate/http://a.example.org&gt;
   ; rel="timegate",
 &lt;http://arxiv.example.net/web/20000915112826/http://a.example.org&gt;
   ; rel="first memento"; datetime="Tue, 15 Sep 2000 11:28:26 GMT",
 &lt;http://arxiv.example.net/web/20080708093433/http://a.example.org&gt;
   ; rel="last memento"; datetime="Tue, 08 Jul 2008 09:34:33 GMT",
 &lt;http://arxiv.example.net/web/20010911203610/http://a.example.org&gt;
   ; rel="memento"; datetime="Tue, 11 Sep 2001 20:36:10 GMT",
 &lt;http://arxiv.example.net/web/20010911203610/http://a.example.org&gt;
   ; rel="prev memento"; datetime="Tue, 11 Sep 2001 20:30:51 GMT",
 &lt;http://arxiv.example.net/web/20010911203610/http://a.example.org&gt;
   ; rel="next memento"; datetime="Tue, 11 Sep 2001 20:47:33 GMT"
Content-Length: 23364
Content-Type: text/html;charset=utf-8
Connection: close
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;16: Server of Memento responds&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
The server's response MUST include the "Memento-Datetime" header regardless whether the user agent's 
request contained an "Accept-Datetime" header or not. This is the way by which resources make explicit that they are 
Mementos. Due to the sparseness of Mementos in most archives, 
the value of the "Memento-Datetime" header returned by a server may differ 
(significantly) from the value conveyed by the user agent in "Accept-Datetime".

</p>
<p>
    Although a Memento encapsulates a prior state of an Original Resource, the entity-body returned in response to an HTTP GET 
    request issued against a Memento may very well not be byte-to-byte the same as an entity-body that was previously returned 
    by that Original Resource. Various reasons exist why there are significant chances these would be different yet do convey 
    substantially the same information. These include format migrations as part of a digital preservation strategy, 
    URI-rewriting as applied by some Web archives, and the addition of banners as a means to brand Web archives. 
  
</p>
<a name="HTTP_Memento_server_404"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.2.1"></a><h3>3.3.2.1.&nbsp;
Memento Does not Exist</h3>

<p>
Cases may occur in which a TimeGate's response (Step 4) points at a Memento that actually does not exist, resulting in a user agent's request 
(Step 5) for a non-existent Memento. In this case, the server's response MUST have the expected "404 Not Found" HTTP Status Code and it MUST NOT 
contain a "Memento-Datetime" header.

</p>
<a name="redirect_chains_m"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.3"></a><h3>3.3.3.&nbsp;
Recognizing a Memento</h3>

<p>
      When following the redirection provided by a confirmed TimeGate (see <a class='info' href='#redirect_chains_tg'>Section&nbsp;3.2.3<span> (</span><span class='info'>Recognizing a TimeGate</span><span>)</span></a>), 
      a user agent SHOULD NOT assume that the targeted resource effectively is a Memento and hence will behave as described in 
      <a class='info' href='#HTTP_Memento_server'>Section&nbsp;3.3.2<span> (</span><span class='info'>Step 6: Server Responds to a Request for a Memento</span><span>)</span></a>.
    
</p>
<p>
      A user agent MUST decide it has reached a Memento if the response to a 
      HTTP HEAD/GET request against the resource's URI contains a "Memento-Datetime" header with a legitimate value. 
      If the response does not, the following applies:
      
</p>
<p></p>
<ul class="text">
<li>
      If the response contains a redirection, the user agent SHOULD follow it. Even a chain of redirections is possible, e.g. 
      URI-G -> URI-X -> URI-Y -> ... -> URI-M.
    
</li>
<li>If the response by a confirmed TimeGate does not contain a redirection, or if the redirection (chain) that started at a 
          confirmed TimeGate does not lead to a 
          resource that provides a "Memento-Datetime" header, the user agent MAY still conclude that it has likely arrived at a Memento. 
          That is because cases exist in which 
      archives and CMS are made compliant with the Memento framework "by proxy". In these cases TimeGates will redirect to Mementos 
      in such systems, but the responses from these Mementos will not (yet) include a "Memento-Datetime" header. 
    
</li>
</ul>

<a name="component 2.1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
The Memento Framework, Discovery Component</h3>

<a name="timemap"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
TimeMaps</h3>

<p>A TimeMap resource is introduced to support retrieving a comprehensive list of all Mementos known to a responding server. 
  The entity-body of a response to an HTTP GET request issued against a TimeMap's URI:
</p>
<p></p>
<ul class="text">
<li>MUST list the URI of the Original Resource that the response lists Mementos for;
</li>
<li>MUST list the URI of one or more TimeGates for the Original Resource;
</li>
<li>MUST list the URI and datetime of each Memento known to the responding server;
    
</li>
<li>SHOULD, for self-containment, list the URI of the TimeMap itself;
</li>
<li>MUST unambiguously type listed resources as being Original Resource, TimeGate, Memento, or TimeMap.
</li>
</ul>

<p>
TimeMaps MAY be serialized in various ways, but the link-value format serialization MUST be supported. 
In this serialization, the entity-body MUST be formatted in the same way as 
the value of a HTTP "Link" header, and hence MUST comply to the "link-value" 
construction rule of "Section 5. The Link Header Field" of <a class='info' href='#RFC5988'>RFC5988<span> (</span><span class='info'>Nottingham, M., &ldquo;Web Linking,&rdquo; October&nbsp;2010.</span><span>)</span></a> [RFC5988]. 
The media type of the entity-body MUST be "application/link-format", and the use of the Relation Types is subject 
to the considerations in <a class='info' href='#Link Header Relation Types'>Section&nbsp;2.2<span> (</span><span class='info'>Link Header Relation Types</span><span>)</span></a> with the following execptions: 

</p>
<p></p>
<ul class="text">
<li>Instead of a Memento selected by the responding server, all Mementos known to the server MUST be listed;
</li>
<li>Since no Memento was selected by the server, the entity-body MUST NOT contain links with "prev", "next", 
    "predecessor-version", "successor-version" Relation Types.
</li>
</ul>

<p>
  In order to retrieve the link-value serialization of a TimeMap, a user agent SHOULD use an "Accept: application/link-format" header. 
  This is shown in <a class='info' href='#TimeMap-request'>Figure&nbsp;17<span> (</span><span class='info'>Request for a TimeMap</span><span>)</span></a>.
  The response from the TimeMap is shown in <a class='info' href='#TimeMap-response'>Figure&nbsp;18<span> (</span><span class='info'>Response from a TimeMap</span><span>)</span></a>; 
  for practical reasons the entity-body in the example has been abbreviated.

</p><br /><hr class="insert" />
<a name="TimeMap-request"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
GET /web/timemap/http://a.example.org HTTP/1.1
Host: arxiv.example.net
Accept: application/link-format;q=1.0
Connection: close
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;17: Request for a TimeMap&nbsp;</b></font><br /></td></tr></table><hr class="insert" />
<br /><hr class="insert" />
<a name="TimeMap-response"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
HTTP/1.1 200 OK
Date: Thu, 21 Jan 2010 00:06:50 GMT
Server: Apache
Connection: close
Content-Type: application/link-format

 &lt;http://a.example.org&gt;;rel="original",
 &lt;http://arxiv.example.net/timemap/http://a.example.org&gt;
   ; rel="timemap";type="application/link-format",
 &lt;http://arxiv.example.net/timegate/http://a.example.org&gt;
   ; rel="timegate",
 &lt;http://arxiv.example.net/web/20000620180259/http://a.example.org&gt;
   ; rel="first memento";datetime="Tue, 20 Jun 2000 18:02:59 GMT",
 &lt;http://arxiv.example.net/web/20091027204954/http://a.example.org&gt;
    ; rel="last memento";datetime="Tue, 27 Oct 2009 20:49:54 GMT",
 &lt;http://arxiv.example.net/web/20000621011731/http://a.example.org&gt;
   ; rel="memento";datetime="Wed, 21 Jun 2000 01:17:31 GMT",
 &lt;http://arxiv.example.net/web/20000621044156/http://a.example.org&gt;
   ; rel="memento";datetime="Wed, 21 Jun 2000 04:41:56 GMT",
 ...
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;18: Response from a TimeMap&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Discovery of TimeMaps, TimeGates</h3>

<p>
      As described in <a class='info' href='#component 1.2'>Section&nbsp;3<span> (</span><span class='info'>The Memento Framework, Datetime Negotiation component: HTTP Interactions</span><span>)</span></a>, TimeMaps and TimeGates can be discovered via HTTP Links with the 
      "timemap" and "timegate" Relation Type, respectively. Additional discovery mechanisms are RECOMMENDED, including:
    
</p>
<p></p>
<ul class="text">
<li>The inclusion of HTML LINK elements with "timegate" and "timemap" rel types in Original Resources that 
        provide an HTML response, e.g. 
        &lt;link href="http://arxiv.example.net/timegate/http://a.example.org" rel="timegate"&gt;
          
        ;
</li>
<li>The implementation of batch discovery mechanisms for TimeMaps using SiteMaps or feed technology.
</li>
</ul>

<a name="IANA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
IANA Considerations</h3>

<p>
      This memo requires IANA to register the "Link" header Relation Types defined in 
      <a class='info' href='#memento-rels'>Section&nbsp;2.2.1<span> (</span><span class='info'>Memento Framework Relation Types</span><span>)</span></a> in the appropriate IANA registry.
    
</p>
<p>
      This memo requires IANA to register the Accept-Datetime and Memento-Datetime HTTP headers defined in 
      <a class='info' href='#Accept-Memento-Datetime'>Section&nbsp;2.1.1<span> (</span><span class='info'>Accept-Datetime, Memento-Datetime</span><span>)</span></a> in the appropriate IANA registry.
    
</p>
<a name="Security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Security Considerations</h3>

<p>Provision of a "timegate" HTTP "Link" header in responses to requests
        for an Original Resource that is protected (e.g., 401 or 403 HTTP
        response codes) is OPTIONAL. The inclusion of this Link when
        requesting authentication is at the server's discretion; cases may
        exist in which a server protects the current state of a resource,
        but supports open access to prior states and thus chooses to
        supply a "timegate" HTTP "Link" header.  Conversely, the server may
        choose to not advertise the TimeGate URIs (e.g., they exist in an
        intranet archive) for unauthenticated requests.
</p>
<p>Authentication, encryption and other security related issues are
        otherwise orthogonal to Memento.
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Changelog</h3>

<p></p>
<ul class="text">
<li>v01 2010-11-11  HVDS MLN RS  First public version
</li>
<li>v00 2010-10-19  HVDS MLN RS Limited circulation version
</li>
<li>2010-07-22  HVDS MLN   First internal version
</li>
</ul>

<a name="Acknowledgements"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Acknowledgements</h3>

<p>The Memento effort is funded by the Library of Congress. 
      Many thanks to Kris Carpenter Negulescu, Michael Hausenblas, Erik Hetzner, Larry Masinter, Gordon Mohr, Mark Nottingham, David Rosenthal, Ed Summers for early feedback.
      Many thanks to Samuel Adams, Scott Ainsworth, Lyudmilla Balakireva, Frank McCown, Harihar Shankar, Brad Tofel for early implementations.
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-core-link-format">[I-D.ietf-core-link-format]</a></td>
<td class="author-text">Shelby, Z., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-core-link-format-01.txt">CoRE Link Format</a>,&rdquo; draft-ietf-core-link-format-01 (work in progress), October&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-core-link-format-01.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2616">[RFC2616]</a></td>
<td class="author-text"><a href="mailto:fielding@ics.uci.edu">Fielding, R.</a>, <a href="mailto:jg@w3.org">Gettys, J.</a>, <a href="mailto:mogul@wrl.dec.com">Mogul, J.</a>, <a href="mailto:frystyk@w3.org">Frystyk, H.</a>, <a href="mailto:masinter@parc.xerox.com">Masinter, L.</a>, <a href="mailto:paulle@microsoft.com">Leach, P.</a>, and <a href="mailto:timbl@w3.org">T. Berners-Lee</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2616">Hypertext Transfer Protocol -- HTTP/1.1</a>,&rdquo; RFC&nbsp;2616, June&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2616.txt">TXT</a>, <a href="http://www.rfc-editor.org/rfc/rfc2616.ps">PS</a>, <a href="http://www.rfc-editor.org/rfc/rfc2616.pdf">PDF</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2616.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2616.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5829">[RFC5829]</a></td>
<td class="author-text">Brown, A., Clemm, G., and J. Reschke, &ldquo;<a href="http://tools.ietf.org/html/rfc5829">Link Relation Types for Simple Version Navigation between Web Resources</a>,&rdquo; RFC&nbsp;5829, April&nbsp;2010 (<a href="http://www.rfc-editor.org/rfc/rfc5829.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5988">[RFC5988]</a></td>
<td class="author-text">Nottingham, M., &ldquo;<a href="http://tools.ietf.org/html/rfc5988">Web Linking</a>,&rdquo; RFC&nbsp;5988, October&nbsp;2010 (<a href="http://www.rfc-editor.org/rfc/rfc5988.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="Fitch">[Fitch]</a></td>
<td class="author-text">Fitch, &ldquo;<a href="http://ausweb.scu.edu.au/aw03/papers/fitch/paper.html">Web site archiving - an approach to recording every materially different response produced by a website</a>,&rdquo; July&nbsp;2003.</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.masinter-dated-uri">[I-D.masinter-dated-uri]</a></td>
<td class="author-text">Masinter, L., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-masinter-dated-uri-07.txt">The 'tdb' and 'duri' URI schemes, based on dated URIs</a>,&rdquo; draft-masinter-dated-uri-07 (work in progress), October&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-masinter-dated-uri-07.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC1123">[RFC1123]</a></td>
<td class="author-text"><a href="mailto:Braden@ISI.EDU">Braden, R.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc1123">Requirements for Internet Hosts - Application and Support</a>,&rdquo; STD&nbsp;3, RFC&nbsp;1123, October&nbsp;1989 (<a href="http://www.rfc-editor.org/rfc/rfc1123.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4287">[RFC4287]</a></td>
<td class="author-text"><a href="mailto:mnot@pobox.com">Nottingham, M., Ed.</a> and <a href="mailto:rfsayre@boswijck.com">R. Sayre, Ed.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc4287">The Atom Syndication Format</a>,&rdquo; RFC&nbsp;4287, December&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4287.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc4287.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc4287.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="W3C.REC-aww-20041215">[W3C.REC-aww-20041215]</a></td>
<td class="author-text">Jacobs and Walsh, &ldquo;<a href="http://www.w3.org/TR/webarch/">Architecture of the World Wide Web</a>,&rdquo; December&nbsp;2004.</td></tr>
</table>

<a name="AppendixFlow"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
Appendix B: A Sample, Successful Memento Request/Response cycle</h3>
<br /><hr class="insert" />
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Step 1 : UA --- HTTP GET/HEAD; Accept-Datetime: Tj ---------&gt; URI-R

HEAD / HTTP/1.1
Host: a.example.org
Accept-Datetime: Tue, 11 Sep 2001 20:35:00 GMT
Connection: close

Step 2 : UA &lt;-- HTTP 200; Link: URI-G ----------------------- URI-R

HTTP/1.1 200 OK
Date: Thu, 21 Jan 2010 00:02:12 GMT
Server: Apache
Link: &lt;http://arxiv.example.net/web/timegate/http://a.example.org&gt;
   ; rel="timegate"
Content-Length: 255
Connection: close
Content-Type: text/html; charset=iso-8859-1

Step 3 : UA --- HTTP GET/HEAD; Accept-Datetime: Tj ---------&gt; URI-G

GET /web/timegate/http://a.example.org
 HTTP/1.1
Host: arxiv.example.net
Accept-Datetime: Tue, 11 Sep 2001 20:35:00 GMT
Connection: close

Step 4 : UA &lt;-- HTTP 302; Location: URI-Mj; Vary; Link:
    URI-R, URI-T, URI-M0, URI-Mn, URI-Mi, URI-Mj, URI-Mk ---- URI-G

HTTP/1.1 302 Found
Date: Thu, 21 Jan 2010 00:06:50 GMT
Server: Apache
Vary: negotiate, accept-datetime
Location:
 http://arxiv.example.net/web/20010911203610/http://a.example.org
Link: &lt;http://a.example.org&gt;; rel="original",
 &lt;http://arxiv.example.net/web/20000915112826/http://a.example.org&gt;
   ; rel="first memento"; datetime="Tue, 15 Sep 2000 11:28:26 GMT",
 &lt;http://arxiv.example.net/web/20080708093433/http://a.example.org&gt;
   ; rel="last memento"; datetime="Tue, 08 Jul 2008 09:34:33 GMT",
 &lt;http://arxiv.example.net/web/timemap/http://a.example.org&gt;
   ; rel="timemap"; type="application/link-format",
 &lt;http://arxiv.example.net/web/20010911203610/http://a.example.org&gt;
   ; rel="memento"; datetime="Tue, 11 Sep 2001 20:36:10 GMT",
 &lt;http://arxiv.example.net/web/20010911203610/http://a.example.org&gt;
   ; rel="prev memento"; datetime="Tue, 11 Sep 2001 20:30:51 GMT",
 &lt;http://arxiv.example.net/web/20010911203610/http://a.example.org&gt;
   ; rel="next memento"; datetime="Tue, 11 Sep 2001 20:47:33 GMT"
Content-Length: 0
Content-Type: text/plain; charset=UTF-8
Connection: close

Step 5 : UA --- HTTP GET URI-Mj; Accept-Datetime: Tj -------&gt; URI-Mj

GET /web/20010911203610/http://a.example.org
 HTTP/1.1
Host: arxiv.example.net
Accept-Datetime: Tue, 11 Sep 2001 20:35:00 GMT
Connection: close

Step 6 : UA &lt;-- HTTP 200; Memento-Datetime: Tj; Link: URI-R,
    URI-T, URI-G, URI-M0, URI-Mn, URI-Mi, URI-Mj, URI-Mk ---- URI-Mj

HTTP/1.1 200 OK
Date: Thu, 21 Jan 2010 00:09:40 GMT
Server: Apache-Coyote/1.1
Memento-Datetime: Tue, 11 Sep 2001 20:36:10 GMT
Link: &lt;http://a.example.org&gt;; rel="original",
 &lt;http://arxiv.example.net/web/20000915112826/http://a.example.org&gt;
   ; rel="first memento"; datetime="Tue, 15 Sep 2000 11:28:26 GMT",
 &lt;http://arxiv.example.net/web/20080708093433/http://a.example.org&gt;
   ; rel="last memento"; datetime="Tue, 08 Jul 2008 09:34:33 GMT",
 &lt;http://arxiv.example.net/web/timemap/http://a.example.org&gt;
   ; rel="timemap"; type="application/link-format",
 &lt;http://arxiv.example.net/web/timegate/http://a.example.org&gt;
   ; rel="timegate",
 &lt;http://arxiv.example.net/web/20010911203610/http://a.example.org&gt;
   ; rel="memento"; datetime="Tue, 11 Sep 2001 20:36:10 GMT",
 &lt;http://arxiv.example.net/web/20010911203610/http://a.example.org&gt;
   ; rel="prev memento"; datetime="Tue, 11 Sep 2001 20:30:51 GMT",
 &lt;http://arxiv.example.net/web/20010911203610/http://a.example.org&gt;
   ; rel="next memento"; datetime="Tue, 11 Sep 2001 20:47:33 GMT"
Content-Length: 23364
Content-Type: text/html;charset=utf-8
Connection: close
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;A successful flow with TimeGate and Mementos on the same server&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Herbert VandeSompel</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Los Alamos National Laboratory</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">PO Box 1663</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Los Alamos, New Mexico  87545</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 505 667 1267</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:hvdsomp@gmail.com">hvdsomp@gmail.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://public.lanl.gov/herbertv/">http://public.lanl.gov/herbertv/</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Michael Nelson</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Old Dominion University</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Norfolk, Virginia  23529</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 757 683 6393</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:mln@cs.odu.edu">mln@cs.odu.edu</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.cs.odu.edu/~mln/">http://www.cs.odu.edu/~mln/</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Robert Sanderson</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Los Alamos National Laboratory</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">PO Box 1663</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Los Alamos, New Mexico  87545</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 505 665 5804</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:azaroth42@gmail.com">azaroth42@gmail.com</a></td></tr>
</table>
<a name="rfc.copyright"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Full Copyright Statement</h3>
<p class='copyright'>
Copyright &copy; The IETF Trust (2010).</p>
<p class='copyright'>
This document is subject to the rights,
licenses and restrictions contained in BCP&nbsp;78,
and except as set forth therein,
the authors retain all their rights.</p>
<p class='copyright'>
This document and the information contained herein are provided
on an &ldquo;AS IS&rdquo; basis and THE CONTRIBUTOR,
THE ORGANIZATION HE/SHE REPRESENTS
OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE.</p>
<h3>Intellectual Property</h3>
<p class='copyright'>
The IETF takes no position regarding the validity or scope of any
Intellectual Property Rights or other rights that might be claimed
to pertain to the implementation or use of the technology
described in this document or the extent to which any license
under such rights might or might not be available; nor does it
represent that it has made any independent effort to identify any
such rights.
Information on the procedures with respect to
rights in RFC documents can be found in BCP&nbsp;78 and BCP&nbsp;79.</p>
<p class='copyright'>
Copies of IPR disclosures made to the IETF Secretariat and any
assurances of licenses to be made available,
or the result of an attempt made to obtain a general license or
permission for the use of such proprietary rights by implementers or
users of this specification can be obtained from the IETF on-line IPR
repository at <a href='http://www.ietf.org/ipr'>http://www.ietf.org/ipr</a>.</p>
<p class='copyright'>
The IETF invites any interested party to bring to its attention
any copyrights,
patents or patent applications,
or other
proprietary rights that may cover technology that may be required
to implement this standard.
Please address the information to the IETF at <a href='mailto:ietf-ipr@ietf.org'>ietf-ipr@ietf.org</a>.</p>
</body></html>
