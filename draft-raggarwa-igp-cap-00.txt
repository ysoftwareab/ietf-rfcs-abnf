




Network Working Group                Acee Lindem    (Redback Networks)
Internet Draft                       Naiming Shen   (Redback Networks)
Expiration Date: November 2002       Rahul Aggarwal (Redback Networks)
                                     Scott Shaffer  (Genuity, Inc.)

                  Extensions to IS-IS and OSPF for Advertising 
                         Optional Router Capabilities

                       draft-raggarwa-igp-cap-00.txt


1. Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026, except that the right to
   produce derivative works is not granted.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups. Note that other
   groups may also distribute working documents as Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time. It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as ``work in progress.''

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.


2. Abstract

   It is useful for routers in a IGP domain to know of the capabilities 
   of their IGP neighbors and/or other routers in the domain. This draft
   proposes extensions to IS-IS and OSPF for advertising optional router
   capabilities. We define an optional Router Capability TLV for IS-IS,
   while for OSPF we define an optional Router Capability Opaque LSA.











draft-raggarwa-igp-cap-00.txt                                   [Page 1]





Internet Draft    draft-raggarwa-igp-cap-00.txt                   May 2002


3. Motivation

   It is useful for routers in a IGP domain to know of the capabilities
   of their IGP neighbors and/or other routers in the domain. A domain 
   refers to the IGP link state packet flooding domain. Hence for OSPF a
   domain implies the same area, while for IS-IS it implies the same 
   level. It gives operators a domain wide view of IGP capabilities on
   different routers in the network. This can be fairly useful for
   network management and troubleshooting. Here IGP domain refers to
   the IGP link state packet flooding domain, 

   The presence of a capability on a given router implies that the 
   software version supports the capability and the router is configured
   to support it. On the other hand the absence of an expected 
   capability on a particular router can imply either mis-configuration
   or an incorrect software version. Hence this capability information
   can be used to track problems resulting from mis-configuration or an
   incorrect software version. 
      
   There is no existing mechanism in IS-IS to advertise optional router
   capabilities. On the other hand OSPF uses the options field in the
   hello packet to advertise optional router capabilities [2]. However
   this attribute is not extensible for advertising optional
   capabilities such as hitless graceful restart. We propose extensions
   to IS-IS and OSPF for advertising these optional capabilities. For
   current IS-IS and OSPF capabilities this advertisement will be used
   primarily for informational purposes. Conceivably, future IS-IS and 
   OSPF capability advertisements could be used for other purposes.


4. IS-IS Router Capability TLV 
   
   IS-IS routers will optionally advertise their optional capabilities 
   in an IS-IS Router Capability TLV of type 242. This optional TLV is
   included in the IS-IS LSP packet [6]. It SHOULD reside in fragment
   zero of the LSPs of each level. If a router does not advertise this
   TLV in any of its LSP packets, it does not imply that the router does
   not support one or more of the defined capabilities. If this TLV is
   included in a LSP, the router SHOULD set all the defined bits
   corresponding to the capabilities which the software supports, unless
   they are explicitly configured off.










draft-raggarwa-igp-cap-00.txt                                   [Page 2]





Internet Draft    draft-raggarwa-igp-cap-00.txt                   May 2002


   The following figure depicts the format of the IS-IS Router 
   Capability TLV.  

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    Type      |      Length     |           Value...           |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


   Type        A 8 bit field set to 242.
   Length      A 8 bit field that indicates the length of the Value 
               portion in bytes. Its set to N x 4 octets. N starts from
               1 and can be increased when there is a need. Each 4
               octets are referred to as a capability flag.
   Value       This comprises one or more capability flags. For each 4 
               octets, the bits are indexed from the most significant to
               the least significant, where each bit represents one 
               router capability. When the first 32 capabilities are
               defined, a new capability flag will be used to
               accommodate the next capability.


4.1 Reserved IS-IS Router Capability Bits

   We have assigned some pre-determined bits to the first capability 
   flag.
     
   Bit           Capabilities
     
   0-3           Reserved
   4             IS-IS hitless graceful restart capable [9]
   5             IS-IS and BGP blackhole avoidance capable [11]
   6             IS-IS wide metric processing capable [8]
   7             IS-IS hmac-md5 authentication capable [10]
   8             IS-IS Traffic Engineering support [8]
   9             IS-IS point-to-point over LAN [12]
   10-31         For future assignments













draft-raggarwa-igp-cap-00.txt                                   [Page 3]





Internet Draft    draft-raggarwa-igp-cap-00.txt                   May 2002


5. OSPF Router Information LSA
     
   OSPF routers will optionally advertise their optional capabilities
   in an area-scoped Opaque-LSA [1]. If a router does not advertise
   this LSA, it does not imply that the router does not support one or
   more of the defined capabilities. For current OSPF capabilities,
   the advertisement will be used solely for information purposes.
   Conceivably, future OSPF capabilities could require other capability
   LSA advertisement. The LSA is area-scoped to be consistent with the
   scope of the OSPF router LSA [2]. The Router Information LSA will
   be originated at startup and re-originated when router capabilities
   change or when periodically refreshed.
    
   The Router Information LSA will have an Opaque type of 4 and Opaque 
   ID of 0.
   
   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |            LS age             |     Options   |       10      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       4       |                    0                          |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                     Advertising Router                        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                     LS sequence number                        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |         LS checksum           |             length            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   +-                            TLVs                             -+
   |                             ...                               |

   
   The format of the TLVs within the body of a Router Information LSA is
   the same as the TLV format used by the Traffic Engineering Extensions
   to OSPF [3]. The TLV header consists of a 16-bit Type field and a 
   16-bit length field, and is followed by zero or more bytes of value.
   The length field indicates the length of the value portion in bytes.
   The value portion is padded to four-octet alignment, but the padding
   is not included in the length field. For example, a one byte value
   would have the length field set to 1, and three bytes of padding
   would be added to the end of the value portion of the TLV.








draft-raggarwa-igp-cap-00.txt                                   [Page 4]





Internet Draft    draft-raggarwa-igp-cap-00.txt                   May 2002

    
   0                   1                   2                   3
   0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |              Type             |             Length            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                            Value...                           |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   
5.1 OSPF Router Capability TLV

   Initially, only a single TLV may appear in the body of a Router 
   Information LSA. This is the Router Capability TLV. It MUST be
   included. A router advertising an optional Router Information LSA
   SHOULD set defined its corresponding to the supported optional
   capabilities, unless they are explicitly configured off, in the
   Router Capability TLV.

   The format of the Router Capability TLV is as follows :

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |              Type             |             Length            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                            Value...                           |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


   Type        A 16 bit field set to 1. 
   Length      A 16 bit field that indicates the length of the Value 
               portion in bytes. Its set to N x 4 octets. N starts from
               1 and can be increased when there is a need. Each 4 octets
               are referred to as a capability flag.
   Value       This comprises one or more capability flags. For each 4 
               octets, the bits are indexed from the most significant to 
               the least significant, where each bit represents one 
               router capability. When the first 32 capabilities are
               defined, a new capability flag will be used to
               accommodate the next capability.












draft-raggarwa-igp-cap-00.txt                                   [Page 5]





Internet Draft    draft-raggarwa-igp-cap-00.txt                   May 2002


5.2 Reserved OSPF Router Capability Bits

   We have assigned some pre-determined bits to the first capability
   flag.
    
   Bit       Capabilities
    
   0-3       Reserved
   4         Hitless graceful restart capable [4]
   5         OSPF hitless graceful restart helper  [4]
   6         Stub Router support [5]
   7         Traffic Engineering support [3]
   8         OSPF point-to-point over LAN [12]
   8-31      Future assignments
    
    
6. Security Consideration

   This document does not introduce new security issues. The security
   considerations pertaining to the original IS-IS and OSPF protocols
   remain relevant.


7. Acknowledgments
   
   The idea for this work grew out of a conversation with Andrew Partan
   and we would like to thank him for his contribution.


8. References

   [1]  Coltun, R., "The OSPF Opaque LSA Option", RFC 2370, July
           1998.

   [2]  Moy, J., "OSPF Version 2", RFC 2328, April 1998.

   [3]  Katz, D., D. Yeung and K. Kompella, "Traffic Engineering
           Extensions to OSPF", Internet Draft, work in progress.

   [4]  Moy, J., "OSPF Hitless OSPF Restart", Internet Draft, work in 
           progress.

   [5]  Retana, A., et al, "OSPF Stub Router Advertisement",
           RFC 3137, June 2001.

   [6]  Callon, R., "OSI IS-IS for IP and Dual Environment," RFC 1195, 
           December 1990. 




draft-raggarwa-igp-cap-00.txt                                   [Page 6]





Internet Draft    draft-raggarwa-igp-cap-00.txt                   May 2002


   [7]  ISO, "Intermediate system to Intermediate system routeing 
           information exchange protocol for use in conjunction with the 
           Protocol for providing the Connectionless-mode Network
           Service (ISO 8473)," ISO/IEC 10589:1992. 

   [8]  Li, T. et al, "IS-IS Extensions for Traffic Engineering",
           Internet Draft, work in Progress.

   [9]  Shand, M., "Restart Signaling for IS-IS", Internet Draft, work
           in Progress.
   
   [10] Li, T., "IS-IS Cryptographic Authentication", Internet Draft,
           work in progress.

   [11] McPherson, D., "IS-IS Transient Blackhole Avoidance", Internet
           Draft, work in progress.
    
   [12] N. Shen, et al, "Point-to-point operation over LAN in 
           link-state-routing protocols", Internet Draft, work in 
           progress.


9. Author Information

Acee Lindem
Redback Networks
350 Holger Way
San Jose, CA 95134
e-mail: acee@redback.com

Naiming Shen
Redback Networks
350 Holger Way
San Jose, CA 95134
e-mail: naiming@redback.com

Rahul Aggarwal
Redback Networks
350 Holger Way
San Jose, CA 95134
e-mail: rahul@redback.com

Scott Shaffer
Genuity, Inc.
3 Van de Graaff Drive
PO Box 3073
Burlington, MA 01803
e-mail: sshaffer@genuity.com



draft-raggarwa-igp-cap-00.txt                                   [Page 7]
