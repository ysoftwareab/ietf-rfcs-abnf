<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>6to4 Qualification</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="6to4 Qualification">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">N. Ward</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Braintrust Ltd.</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">March 03, 2009</td></tr>
<tr><td class="header">Expires: September 4, 2009</td><td class="header">&nbsp;</td></tr>
</table></td></tr></table>
<h1><br />6to4 Qualification<br />draft-nward-6to4-qualification-00</h1>

<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on September 4, 2009.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents in effect on the date of
publication of this document (http://trustee.ietf.org/license-info).
Please review these documents carefully, as they describe your
rights and restrictions with respect to this document.</p>

<h3>Abstract</h3>

<p>A deployment problem exists with existing self-configuring 6to4
      implementations making often incorrect assumptions about the state of
      their IPv4 network connectivity.
</p>
<p>This document describes the problem, and proposes a qualification
      mechanism by which nodes can validate that their connectivity to the
      global IPv6 network is suitable for use with the 6to4 protocol.
</p>
<h3>Requirements Language</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in <a class='info' href='#RFC2119'>RFC 2119<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> [RFC2119].
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#anchor2">2.</a>&nbsp;
Test Nodes<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">2.1.</a>&nbsp;
Symmetric Test Node<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">2.2.</a>&nbsp;
Asymmetric Test Node<br />
<a href="#anchor5">3.</a>&nbsp;
Qualification<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">3.1.</a>&nbsp;
Initial Interface Configuration<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">3.2.</a>&nbsp;
Symmetric Test<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">3.3.</a>&nbsp;
Asymmetric Test<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">3.4.</a>&nbsp;
Full Configuration<br />
<a href="#anchor10">4.</a>&nbsp;
Examples<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">4.1.</a>&nbsp;
Symmetric Test Pass<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">4.2.</a>&nbsp;
Symmetric Test Failure<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">4.3.</a>&nbsp;
Asymmetric Test Pass<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">4.4.</a>&nbsp;
Asymmetric Test Failure<br />
<a href="#IANA">5.</a>&nbsp;
IANA Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">5.1.</a>&nbsp;
Symmetric Test Prefix<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor16">5.2.</a>&nbsp;
Asymmetric Test Prefix<br />
<a href="#Security">6.</a>&nbsp;
Security Considerations<br />
<a href="#rfc.references1">7.</a>&nbsp;
Normative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Author's Address<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>6to4 as described in <a class='info' href='#RFC3056'>RFC3056<span> (</span><span class='info'>Carpenter, B. and K. Moore, &ldquo;Connection of IPv6 Domains via IPv4 Clouds,&rdquo; February&nbsp;2001.</span><span>)</span></a> [RFC3056] and <a class='info' href='#RFC3068'>RFC3068<span> (</span><span class='info'>Huitema, C., &ldquo;An Anycast Prefix for 6to4 Relay Routers,&rdquo; June&nbsp;2001.</span><span>)</span></a> [RFC3068] is a commonly used method for connecting
      IPv6 capable networks without IPv6 transit to the global IPv6 network
      using automatic tunneling over IPv4, and anycasted relay routers. This
      document refers to a 6to4 router without other IPv6 transit as a 6to4
      node.
</p>
<p>Many implementations of 6to4 are automatically configured. The
      assumption is made that if a 6to4 node has a public (i.e. globally
      routable) IPv4 address, it is capable of 6to4, and the 6to4 interface
      and default route via the well known 6to4 relay address is automatically
      configured. Some of these implementations exist in end systems, and some
      implementations exist in mass market CPE devices.
</p>
<p>In reality, however, a public IPv4 address may be subject to IPv4
      NAT, or some kind of firewalling which restricts the ability for a 6to4
      node to exchange 6to4 packets with other 6to4 nodes and 6to4 relay
      routers. In this case, 6to4 should not be used.
</p>
<p>This document defines a mechanism for a 6to4 node to qualify the
      suitability of its IPv4 network connection for use with 6to4.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Test Nodes</h3>

<p>There are two new special nodes that MUST connect to the 6to4
      network, and respond to ICMPv6 echo-request messages in certain ways.
      Anyone MAY run these test nodes, their usage scope MAY be limited by
      filtering advertisements for TBD1 and TBD2.
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Symmetric Test Node</h3>

<p>The symmetric test node is a typical node with a 6to4 interface,
        which MUST have 2002::/16 routed to its 6to4 interface.
</p>
<p>The host MUST have connectivity to the global IPv4 network. The TBD
        prefix MUST be advertised to any networks for which this host is to
        provide a 6to4 qualification symmetric testing service.
</p>
<p>Connectivity to the IPv6 network is not required. Routes to subnets
        of 2002::/16 MUST NOT exist on the host.
</p>
<p>A packet filter MAY be configured to allow only IP protocol 41
        (0x29) to and from TBD1(IPv4). A packet filter MAY be configured to
        prevent any other packets to and from other addresses in the TBD1
        prefix.
</p>
<p>TBD1 SHOULD be routed to the host, and the host MUST null-route
        this prefix if so.
</p>
<p>The host MUST have an IPv4 interface with the address TBD1(IPv4).
        TBD1(IPv4) MUST be routed to the host.
</p>
<p>The host MUST have a 6to4 interface configured with the IPv6
        address TBD1(6to4) and the local IPv4 address TBD1(IPv4).
</p>
<p>The host MUST reply to ICMPv6 echo request messages received on the
        6to4 interface.
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
Asymmetric Test Node</h3>

<p>The asymmetric test node is a typical node with a 6to4 interface,
        which MUST have 2002::/16 routed to its 6to4 interface.
</p>
<p>The host MUST have connectivity to the global IPv4 network, and a
        6to4-capable IPv4 address.
</p>
<p>The host MUST have connectivity to an IPv6 network, including
        typically at least one 6to4 relay. Routes to subnets of 2002::/16 MUST
        NOT exist on the host. TBD2 must be advertised to networks with 6to4
        relays for which this host is to provide a 6to4 qualification
        asymmetric testing service.
</p>
<p>The host MUST have an IPv6 interface configured with the address
        TBD2(1).
</p>
<p>TBD2 SHOULD be routed to the host, and the host MUST null-route
        this prefix if so.
</p>
<p>The host MUST have a 6to4 interface configured with the IPv6
        address corresponding to a locally assigned IPv4 address. The host
        MUST NOT use 192.88.99.1 as the local IPv4 address for the 6to4
        interface.
</p>
<p>The host MUST reply to ICMPv6 echo request messages destined to
        TBD2(1) when the source IPv6 address is in the 2002::/16 prefix.
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Qualification</h3>

<p>Two similar tests are performed by sending ICMPv6 echo request
      message encapsulated in IPv4, and waiting for a response. This can be
      trivially implemented in software on most platforms as a low priority
      process, as it does not require a large amount of processing power.
</p>
<p>Sections 3.1 through 3.4 are the 4 steps in the qualification
      process, and SHALL be performed in order. The qualification process
      SHOULD be run at regular intervals to ensure reliable 6to4
      connectivity.
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Initial Interface Configuration</h3>

<p>When a new IPv4 address becomes available that is suspected of
        being suitable for 6to4 use (candidate IPv4 address), the 6to4
        interface is configured with the appropriate address based on the
        candidate IPv4 address, with a 128-bit prefix length, and the
        following IPv6 routes:
</p><table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left">
<tr><th align="left">Destination</th><th align="left">Next-hop or connected interface</th></tr>
<tr>
<td align="left">2002:C058:6301::/48</td>
<td align="left">Connected via 6to4 interface</td>
</tr>
<tr>
<td align="left">TBD1(6to4)</td>
<td align="left">Connected via 6to4 interface</td>
</tr>
<tr>
<td align="left">TBD2</td>
<td align="left">Next-hop via 2002:C058:6301::</td>
</tr>
</table>
<br clear="all" />

<p>
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Symmetric Test</h3>

<p>The 6to4 node sends an ICMPv6 echo request message to TBD1(6to4)
        from its 6to4 IPv6 address. The 6to4 encapsulation will have an IPv4
        destination address of TBD1(IPv4), and a source address of the
        candidate IPv4 address.
</p>
<p>A symmetric test node responds to this ICMPv6 message normally.
</p>
<p>The 6to4 node receives an ICMPv6 echo response message encapsulated
        in IPv4 with the candidate IPv4 address as the destination, and
        TBD1(IPv4) as the source.
</p>
<p>If the 6to4 node does not receive this message within a timeout the
        candidate IPv4 address SHALL be considered unusable and this test run
        SHALL cease. Failure at this stage MAY mean an IPv4 firewall is in
        place.
</p>
<p>If the 6to4 node receives this message, qualification testing
        SHOULD proceed to the asymmetric test phase.
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
Asymmetric Test</h3>

<p>The 6to4 node sends an ICMPv6 echo request message to TBD2 from its
        6to4 IPv6 address. The 6to4 encapsulation will have an IPv4
        destination address of 192.88.99.1, and a source address of the
        candidate IPv4 address.
</p>
<p>An asymmetric test node responds to this ICMPv6 message
        normally.
</p>
<p>The 6to4 node receives an ICMPv6 echo response message encapsulated
        in IPv4. The encapsulation MUST have the candidate IPv4 address as the
        destination address, and an IPv4 address that is not 192.88.99.1 as
        the source address.
</p>
<p>If the 6to4 node does not receive this message within a timeout the
        candidate IPv4 address SHALL be considered unusable and this test run
        SHALL cease. Failure at this stage MAY mean a stateful IPv4 firewall
        and possibly IPv4 NAT is in place.
</p>
<p>If the 6to4 node receives this message, the candidate IPv4 address
        SHOULD be considered usable, and the interface SHOULD be configured as
        per the Full Configuration section.
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4"></a><h3>3.4.&nbsp;
Full Configuration</h3>

<p>Once a 6to4 node has an IPv4 address suitable for 6to4 use, the
        following routes are installed:
</p><table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left">
<tr><th align="left">Destination</th><th align="left">Next-hop or connected interface</th></tr>
<tr>
<td align="left">2002::/16</td>
<td align="left">Connected via 6to4 interface</td>
</tr>
<tr>
<td align="left">::/0</td>
<td align="left">Next-hop via 2002:C058:6301::</td>
</tr>
</table>
<br clear="all" />

<p>The Symmetric Test and Asymmetric Test phases are performed
        periodically. If either of these tests fail the 2002::/16 route is
        withdrawn.
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Examples</h3>

<p>The following are diagrams of example test scenarios.
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Symmetric Test Pass</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>           2002:C000:0201::/48        TBD1(6to4)
+---------+192.0.2.1                  TBD1(IPv4)+---------+
|6to4 node|-------------------1----------------&gt;|Symmetric|
|         |&lt;------------------2-----------------|Test Node|
+---------+                                     +---------+</pre></div>
<p>1) 6to4 node sends ICMPv6 echo request message to TBD1(6to4).
</p>
<p>2) Symmetric test node responds, and response is received by 6to4
        node.
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Symmetric Test Failure</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>           2002:C000:0201::/48        TBD1(6to4)
+---------+192.0.2.1                  TBD1(IPv4)+---------+
|6to4 node|-------------------1----------------&gt;|Symmetric|
|         |     FIREWALL&lt;-----2-----------------|Test Node|
+---------+                                     +---------+</pre></div>
<p>1) 6to4 node sends ICMPv6 echo request message to TBD1(6to4).
</p>
<p>2) Symmetric test node responds, and response is not received by
        6to4 node because an intermediary firewall restriction.
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
Asymmetric Test Pass</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>           2002:C000:0201::/48
+---------+192.0.2.1                            +---------+
|6to4 node|---------------1--------------------&gt;|6to4     |
|         |&lt;----------------         192.88.99.1|Relay    |
+---------+                 \                   +---------+
                             \                      |
                              \                     |
                               3                    2
                                \                   |
                                 \                  |
                                  \                 v
                                   \            +----------+
                                    ------------|Asymmetric|
                                      Local IPv4|Test Node |
                                            TBD2+----------+</pre></div>
<p>1) 6to4 node sends ICMPv6 echo request message to TBD2 via 6to4
        relay.
</p>
<p>2) 6to4 relay decapsulates IPv6 packet and forwards to closest
        asymetric test node.
</p>
<p>3) Asymmetric test node responds to ICMPv6 message over 6to4 with
        source address of its local IPv4 interface, and response is received
        by 6to4 node.
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4"></a><h3>4.4.&nbsp;
Asymmetric Test Failure</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>           2002:C000:0201::/48
+---------+192.0.2.1                            +---------+
|6to4 node|---------------1--------------------&gt;|6to4     |
|         |     FIREWALL&lt;---         192.88.99.1|Relay    |
+---------+                 \                   +---------+
                             \                      |
                              \                     |
                               3                    2
                                \                   |
                                 \                  |
                                  \                 v
                                   \            +----------+
                                    ------------|Asymmetric|
                                      Local IPv4|Test Node |
                                            TBD2+----------+</pre></div>
<p>1) 6to4 node sends ICMPv6 echo request message to TBD2 via 6to4
        relay.
</p>
<p>2) 6to4 relay decapsulates IPv6 packet and forwards to closest
        asymetric test node.
</p>
<p>3) Asymmetric test node responds to ICMPv6 message over 6to4 with
        source address of its local IPv4 interface. A stateful firewall
        prevents the packet reaching 6to4 node.
</p>
<a name="IANA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
IANA Considerations</h3>

<p>This document requests the assignment of two prefixes:
</p>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Symmetric Test Prefix</h3>

<p>A 24-bit IPv4 prefix, TBD1. Only one IPv4 address is used, however
        24 bits is likely to be widely accepted in BGP peering sessions.
</p>
<p>Note to editor: TBD1 is used in two ways in this document,
        TBD1(IPv4) and TBD1(6to4):
</p>
<p>- TBD1(IPv4) is an IPv4 address in this prefix with 1 in the host
        part, ie AAA.BBB.CCC.1/32
</p>
<p>- TBD1(6to4) is an IPv6 address in the 6to4 prefix corresponding to
        TBD1(6to4) with 1 in the host part, ie. 2002:AABB:CCDD::1
</p>
<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Asymmetric Test Prefix</h3>

<p>A 32-bit IPv6 prefix, TBD2. Only one IPv6 address is used, however
        32 bits is likely to be widely accepted in BGP peering sessions.
</p>
<p>Note to editor: TBD2(1) refers to an address in this prefix with 1
        in the host part, ie. AAAA:BBBB::1.
</p>
<a name="Security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Security Considerations</h3>

<p>Unknown at this time.
</p>
<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>7.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3056">[RFC3056]</a></td>
<td class="author-text">Carpenter, B. and K. Moore, &ldquo;<a href="http://tools.ietf.org/html/rfc3056">Connection of IPv6 Domains via IPv4 Clouds</a>,&rdquo; RFC&nbsp;3056, February&nbsp;2001 (<a href="http://www.rfc-editor.org/rfc/rfc3056.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3068">[RFC3068]</a></td>
<td class="author-text">Huitema, C., &ldquo;<a href="http://tools.ietf.org/html/rfc3068">An Anycast Prefix for 6to4 Relay Routers</a>,&rdquo; RFC&nbsp;3068, June&nbsp;2001 (<a href="http://www.rfc-editor.org/rfc/rfc3068.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Author's Address</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nathan Ward</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Braintrust Ltd.</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Level 1, 206 Symonds St.</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Auckland,   1010</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">NZ</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+64-21-431675</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:nward@braintrust.co.nz">nward@braintrust.co.nz</a></td></tr>
</table>
</body></html>
