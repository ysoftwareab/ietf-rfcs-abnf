





INTERNET DRAFT                                            JinHyeock Choi
Expires: May 2002                                           WooShik Kang
                                                             Samsung AIT
                                                           November 2001


  Localized Mobility Management for Mobile IPv6 in Distributed Manner
                 <draft-jinchoi-mobileip-lmmdv6-01.txt>


Status of this Memo

     This document is an Internet-Draft and is in full conformance with
     all provisions of Section 10 of RFC2026.

     Internet Drafts are working documents of the Internet Engineering
     Task Force (IETF), its areas, and working groups. Note that other
     groups may also distribute working documents as Internet-Drafts.

     Internet-Drafts are draft documents valid for a maximum of six
     months and may be updated, replaced, or obsolete by other documents
     at anytime. It is inappropriate to use Internet Drafts as reference
     material or to cite them other than as "work in progress."

     The list of current Internet-Drafts can be accessed at
     http://www.ietf.org/ietf/1id-abstracts.txt.

     The list of Internet-Draft Shadow Directories can be accessed at
     http://www.ietf.org/shadow.html.


Abstract

     This document presents Localized Mobility Management for Mobile
     IPv6 in Distributed Manner (LMMDv6). Localized Mobility Management,
     in general introduces Local Mobility Agent functionality for
     proxying a Regional care of address that remains the same while the
     mobile node moves within a Local Mobility Domain, which reduces the
     binding update signaling latency and the signaling load outside the
     Local Mobility Domain. We present a new way of forming Local
     Mobility Domains and Local Mobility Agents. In this protocol, Local
     Mobility Agent functionality is distributed across all access
     routers and a Local Mobility Domain is formed dynamically according
     to the mobile node's movement.



Table of Contents:

     1. Introduction
     2. Terminology
     3. Protocol Overview




Choi, Kang                  Expires May 2002                    [Page 1]


INTERNET DRAFT    LMM for MIPv6 in Distributed Manner      November 2001


       3.1 Local Mobility Domain, Local Mobility Agent
           and Local Mobility Domain List
       3.2 Operation Overview
     4. Operation Description
       4.1 Local Mobility Domain
       4.2 Local Mobility Agent
       4.3 Local Mobility Domain List
       4.4 The first arrival at a foreign network
       4.5 Movement to a new access router
         4.5.1 Intra-Domain Movement
         4.5.2 Inter-Domain Movement
     References



1. Introduction

     Localized Mobility Management for Mobile IPv6 in Distributed Manner
     (LMMDv6) introduces a new way of forming Local Mobility Domains and
     Local Mobility Agents. It defines local binding update signaling
     and local-aware data routing through a Local Mobility Agent.

     This protocol re-uses the general idea of [2] and [3] but is a
     different protocol regard to the formation of Local Mobility
     Domains and Local Mobility Agents. Instead of using predetermined
     Local Mobility Domains and Local Mobility Agents, each mobile node
     changes its current Local Mobility Domain and Local Mobility Agent
     dynamically according to its movement.

     This protocol only requires special treatment at the mobile nodes
     and access routers. Home agents are unchanged and this is
     completely transparent to corresponding nodes. The Local Mobility
     Agent is merely a local home agent that maps the mobile node's
     Regional COA to a Local COA.



2. Terminology

     The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
     "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in
     this document are to be interpreted as described in RFC 2119.

          Access Router (AR)
            An Access Network Router residing on the edge of an Access
            Network and offers IP connectivity to mobile nodes

          Current Access Router
            The Access Router currently offering the connectivity to the
            mobile node.

          Local Mobility




Choi, Kang                  Expires May 2002                    [Page 2]


INTERNET DRAFT    LMM for MIPv6 in Distributed Manner      November 2001


            The movement of an IP device without requiring a change to
            its routable IP address seen by the corresponding node or
            Home Agent. Although its point of attachment may change
            during the move, the IP addresses used to reach the device
            (both its home and IP subnet routable IP address) do not
            change.

          Local Mobility Agent (LMA)
            A mobile node uses Local Mobility Agent as a local home
            agent while roaming within a Local Mobility Domain. The
            LMA proxy Regional COA, receives all packets on behalf
            of the mobile node and will encapsulate and forward
            them directly to its current address.

          Local Mobility Domain
            Within the Local Mobility Domain, the globally visible
            routable IP address assigned to a mobile node does not
            change.

          LMD(CR, N)
            The Local Mobility Domain with the center router CR and
            the threshold hop count N. It is the set of all routers
            with the hop counts from CR less than or equal to N.

          Localized Mobility Management
            A method of handling mobility locally, in order to
            restrict the signaling area, thus possibly reducing the
            amount of signaling.

          LMMDv6
            The abbreviation of Localized Mobility Management
            for Mobile IPv6 in Distributed Manner

     For more detailed terminology, refer [7].



3. Protocol Overview


3.1 Local Mobility Domain, Local Mobility Agent and Local Mobility
Domain List

     In this protocol, a Local Mobility Domain is composed of all
     routers that are sufficiently close to a fixed center router. The
     distance is measured by the hop count between two routers.

     For convenience we denote a Local Mobility Domain as LMD(CR, N); CR
     represents the center router. N is the threshold hop count of a
     positive integer. A Local Mobility Domain LMD(CR, N) is the set of
     all routers with the hop count from CR less than equal to N. We use
     the center router CR as the Local Mobility Agent in the Local




Choi, Kang                  Expires May 2002                    [Page 3]


INTERNET DRAFT    LMM for MIPv6 in Distributed Manner      November 2001


     Mobility Domain LMD(CR, N).

     A network administrator determines the threshold hop count N a
     priori. Each router produces the list of all routers with the hop
     count from itself less than equal to N. We assume that all routers
     can execute necessary computations with the information provided
     from routing protocols (OSPF, RIP).



3.2. Operation Overview

     A mobile node uses a Local Mobility Agent as a local home agent
     while roaming within a Local Mobility Domain.

     The mobile node uses two care of addresses: a Regional care of
     address on the Local Mobility Agent's subnet (Regional COA) and an
     on-link one on the subnet of the current access router (Local COA).

     The mobile node registers with its home agent with Regional COA and
     Home Address. If the mobile node changes its current address within
     a Local Mobility Domain, it only needs to register the new address
     with a Local Mobility Agent since the Regional COA doesn't change.
     This reduces the binding update signaling latency and the signaling
     load.

     LMMDv6 distributes the Local Mobility Agent functionality across
     all access routers.

     When a mobile node moves to a foreign network for the first time;
      - The first access router to which it is attached becomes the
        first Local Mobility Agent.
      - The first Local Mobility Domain is formed accordingly. (The
        set of all routers with the hop counts from the first AR less
        than equal to N).
      - The mobile node gets a Regional COA and a Local COA.
      - It registers with the home agent with the binding update that
        specifies binding (Regional COA and Home Address).

     Assume the mobile node move to a new access router.
      - If the new access router belongs to the current Local Mobility
        Domain (the hop count between the current Local Mobility Agent
        and the new access router is less than equal to N), the mobile
        node registers with the current Local Mobility Agent.
      - It sends the binding update to the current LMA specifying
        binding (the current Regional COA, the new Local COA).

     A Local Mobility Agent acts essentially as a local home agent for
     the mobile node. The Local Mobility Agent will receive all packets
     on behalf of the mobile node it is serving and will encapsulate and
     forward them directly to the mobile node's current address, Local
     COA.




Choi, Kang                  Expires May 2002                    [Page 4]


INTERNET DRAFT    LMM for MIPv6 in Distributed Manner      November 2001


     When the mobile node moves outside of the current Local Mobility
     Domain (the hop count between the current Local Mobility Agent and
     the new access router is greater than N);
      - The mobile node behaves as if it arrives at a foreign network
        for the first time.
      - The new access router becomes a new Local Mobility Agent and a
        new Local Mobility Domain is formed accordingly (the set of all
        routers with the hop distance of N or less).



4. Operation Description

4.1. Local Mobility Domain



        ************* LMD(AR1, 2)***********
        *                                  *
        *    _ _ _     _ _ _     _ _ _     *
        *   |     |   |     |   |     |    *
        *   | AR1 |---| AR2 |---| AR3 |    *
        *   |_ _ _|   |_ _ _|   |_ _ _|    *
        *                |         |       *
        *                |    *****|********
        *              _ _ _  *  _ _ _     _ _ _
        *             |     | * |     |   |     |
        *             | AR4 |-*-| AR5 |---| AR6 |
        *             |_ _ _| * |_ _ _|   |_ _ _|
        *                     *
        *                     *
        ***********************

                              **********************
                              *                    *
             _ _ _     _ _ _  *  _ _ _             *
            |     |   |     | * |     |            *
            | AR1 |---| AR2 |-*-| AR3 |            *
            |_ _ _|   |_ _ _| * |_ _ _|            *
                         |    *    |               *
                  *******|*****    |               *
                  *    _ _ _     _ _ _     _ _ _   *
                  *   |     |   |     |   |     |  *
                  *   | AR4 |---| AR5 |---| AR6 |  *
                  *   |_ _ _|   |_ _ _|   |_ _ _|  *
                  *                                *
                  *                                *
                  ********** LMD(AR6, 2)************

                      Figure1: Local Mobility Domains,
                         LMD(AR1, 2) and LMD(AR6, 2)





Choi, Kang                  Expires May 2002                    [Page 5]


INTERNET DRAFT    LMM for MIPv6 in Distributed Manner      November 2001


     In our scheme, Local Mobility Domains are configured dynamically. A
     network administrator only has to choose suitable threshold hop
     count.

     We define the distance between two nodes as the hop counts between
     two nodes.

     A Local Mobility Domain is determined by the center router CR and
     positive integer N. A Local Mobility Domain consists of all routers
     such that the distance from center router CR is less or equal to N.
     A Local Mobility Domain LMD(CR, N) is the set of all routers with
     the hop distance N or less.

     We can vary the size of a Local Mobility Domain by varying
     threshold hop count according to network circumstances. For
     example, a network administrator can set the threshold hop count to
     5. Determining the size of a Local Mobility Domain (the threshold
     hop count) is left to the network administrator's discretion. After
     threshold hop count is fixed, a Local Mobility Domain is entirely
     determined by its center router.

     We can use a different distance metric other than hop count, e.g.
     weighted hop count. LMMDv6 works with any distance satisfying the
     symmetry property (The distance from A to B equals the distance
     from B to A.)



4.2. Local Mobility Agent

     In LMMDv6, the center router becomes the Local Mobility Agent in
     that Local Mobility Domain. In other words, CR is the Local
     Mobility Agent in LMD(CR, N). LMA acts as a local home agent for
     the MNs it serves in a Local Mobility Domain.

     Though there is only one LMA for each Local Mobility Domain, this
     doesn't mean single point of failure because there are many Local
     Mobility Domains. If the current LMA fails, the currently attached
     access router becomes the new LMA in a newly formed Local Mobility
     Domain.


4.3. Local Mobility Domain List

     Each LMMDv6-aware access router has its own Local Mobility Domain
     List. The Local Mobility Domain List is the list of all routers
     such that the hop count from that access router is less than equal
     to N.

     The Local Mobility Domain List of AR is the list of all routers
     belonging to the Local Mobility Domain LMD(AR, N). The Local
     Mobility Domain List varies according to the access router




Choi, Kang                  Expires May 2002                    [Page 6]


INTERNET DRAFT    LMM for MIPv6 in Distributed Manner      November 2001


     producing it and each access router has a different Local Mobility
     Domain List.

     In following example, we present the Local Mobility Domain List of
     each access router in a network described in Figure 2 with
     threshold hop count 2.


             _ _ _     _ _ _     _ _ _
            |     |   |     |   |     |
            | AR1 |---| AR2 |---| AR3 |
            |_ _ _|   |_ _ _|   |_ _ _|
                         |         |
                         |         |
                       _ _ _     _ _ _     _ _ _
                      |     |   |     |   |     |
                      | AR4 |---| AR5 |---| AR6 |
                      |_ _ _|   |_ _ _|   |_ _ _|


      Access Router | AR1 | AR2 | AR3 | AR4 | AR5 | AR6
      --------------------------------------------------
      Local         | AR1 | AR1 | AR1 | AR1 | AR2 | AR3
      Mobility      | AR2 | AR2 | AR2 | AR2 | AR3 | AR4
      Domain        | AR3 | AR3 | AR3 | AR3 | AR4 | AR5
      List          | AR4 | AR4 | AR4 | AR4 | AR5 | AR6
                    |     | AR5 | AR5 | AR5 | AR6 |
                    |     |     | AR6 | AR6 |

                    Figure2: The Local Mobility Domain Lists
                         with threshold hop count 2


     We assume all access routers can compute the distance from the
     other router. The distance can be computed by using the information
     from routing protocol like OSPF, RIP. The detailed mechanism for
     this resolution is outside the scope of this draft.

     A Local Mobility Domain's boundaries are defined by Local Mobility
     Domain List. The Local Mobility Domain List of AR is the list of
     LMD(AR, N). If AR1 belongs to LMD(AR2, N), AR2 also belongs to
     LMD(AR1, N). Hence the Local Mobility Domain List of AR1 contains
     the list all access routers AR such that AR1 belongs LMD(AR, N).

     When a MN moves to a new access router, it can decide whether it
     still is within the same Local Mobility Domain by checking the
     Local Mobility Domain List of the new AR.
      - If the current LMA belongs to the new Local Mobility Domain
        List, the MN still remains at same Local Mobility Domain and
        current LMA continues Localized Mobility Management service.
      - If not, the new AR becomes the new LMA in the new Local
        Mobility Domain.




Choi, Kang                  Expires May 2002                    [Page 7]


INTERNET DRAFT    LMM for MIPv6 in Distributed Manner      November 2001


4.4. The first arrival at a foreign network

     Assume a MN arrives at a foreign network for the first time and is
     attached to an access router.

     First it checks whether the first AR is LMMDv6-aware.
      - If the first AR is not LMMDv6-aware, then the MN using the
        MIPv6 [1] protocol for its mobility management.
      - On the other hand, if the current AR is LMMDv6-aware, the MN
        MAY choose to use its LMMDv6 implementation.
      - This information is stored in the ARs and communicated to the
        MN via Router Advertisements.

     Then the first AR to which MN is currently attached becomes the
     first LMA. And the first Local Mobility Domain consists of all
     routers with hop count less than equal to N from the first AR.


        ************* LMD(AR1, 2)***********
        *                                  *
        *    _ _ _     _ _ _     _ _ _     *
        *   |     |   |     |   |     |    *
        *   | AR1 |---| AR2 |---| AR3 |    *
        *   |_ _ _|   |_ _ _|   |_ _ _|    *
        *      +         |         |       *
        *      +         |    *****|********
        *      +       _ _ _  *  _ _ _     _ _ _
        *     _+_     |     | * |     |   |     |
        *    |   |    | AR4 |-*-| AR5 |---| AR6 |
        *    |MN |    |_ _ _| * |_ _ _|   |_ _ _|
        *    |_ _|            *
        *                     *
        ***********************

              Figure3: The first arrival at a foreign network
                         with threshold hop count 2


     Now in this new Local Mobility Domain, the MN needs to get two COAs
      - a Regional COA on the LMA's subnet (Regional COA) and an
        on-link one on the subnet of the current AR (Local COA).
      - These addresses MAY be formed in a stateless or stateful manner.
      - In this case, Regional COA and Local COA may be the same since
        the current AR is the current LMA.

     After forming the Regional COA and Local COA, the MN sends a BU to
     the LMA (the current AR).
      - The Local COA is used as the source address of the BU.
      - The BU specifies its Regional COA in the Home Address field.
      - This BU will bind the MN's Regional COA (similar to a Home
        Address) to its current Local COA.





Choi, Kang                  Expires May 2002                    [Page 8]


INTERNET DRAFT    LMM for MIPv6 in Distributed Manner      November 2001


     The BU informs the LMA that the MN has formed a Regional COA
     (contained in the BU as a Home Address) and request that a LMA
     performs DAD on its behalf.
      - The LMA (acting as a home agent) will then perform DAD for the
        MN's Regional COA on its subnet.
      - If successful, the LMA will return a Binding Acknowledgement
        (BAck) to the MN indicating a successful registration.
      - Otherwise, the LMA MUST return a BAck with the appropriate
        fault code. No new error codes are introduced for LMMDv6.

     The MN MUST register its new Regional COA with its home agent.
      - It sends a BU that specifies the binding (Regional COA,
        Home Address) as in MIPv6.
      - The Home Address field of the BU is set to the Home Address.
        An COA is set to the Regional COA.

     It can also send a similar BU (i.e. that specifies the binding
     between the Home Address and the Regional COA) to its current CNs.

     Now the LMA acts as a local home agent with Home Address being the
     Regional COA and care of address being the new Local COA. The LMA
     acts as a proxy between the Regional COA and the Local COA. It
     intercepts all the packets addressed to the MN and tunneled them to
     the MN position (Local COA).



4.5. Movement to a new access router

     When the MN moves to another AR, it checks whether new AR is
     LMMDv6-aware in the same way as in 4.4.

     In case the new AR is LMMDv6-aware, The MN checks whether it still
     remains within the current Local Mobility Domain. It sees whether
     the Local Mobility Domain List of the new AR contains the current
     LMA. There are two ways for this.
      - The new AR sends its Local Mobility Domain List in router
        advertisement with option like MAP Option of [2].
      - If there are many entiries in the Local Mobility Domain
        List of the new AR, advertising overhead may be too costly.
        In that case MN sends its current LMA address in router
        solicitation with option like Home Address Option of [1].
        Then a new AR checks its Local Mobility Domain List and
        sends a reply.



4.5.1 Intra-Domain Movement

     If the current LMA belongs to the Local Mobility Domain List of the
     new AR, it means the MN is still within the current Local Mobility
     Domain.




Choi, Kang                  Expires May 2002                    [Page 9]


INTERNET DRAFT    LMM for MIPv6 in Distributed Manner      November 2001


     Since MN has moved to the new AR, it gets a new Local COA on the
     new AR's subnet. This new Local COA MAY be formed in a stateless or
     stateful manner. Since the MN moves within the same Local Mobility
     Domain (i.e. its LMA does not change), the Regional COA stays
     unchanged.


        ************* LMD(AR1, 2)***********
        *                                  *
        *    _ _ _     _ _ _     _ _ _     *
        *   |     |   |     |   |     |    *
        *   | AR1 |---| AR2 |---| AR3 |    *
        *   |_ _ _|   |_ _ _|   |_ _ _|    *
        *                |         |       *
        *                |    *****|********
        *              _ _ _  *  _ _ _     _ _ _
        *             |     | * |     |   |     |
        *             | AR4 |-*-| AR5 |---| AR6 |
        *             |_ _ _| * |_ _ _|   |_ _ _|
        *                +    *
        *                +    *
        **************** + ****
                        _+_
                       |   |
                       |MN |
                       |_ _|

                       Figure4: Intra-Domain movement


     When the MN moves within the same Local Mobility Domain (i.e. its
     LMA does not change), it MUST only register its new Local COA with
     its LMA.
      - The MN registers with the LMA by sending a BU containing its
        Regional COA and on-link address (Local COA).
      - The Local COA is used as the source address of the BU and the
        Regional COA is specified in the Home Address field.
      - The LMA MUST store this information in its binding cache to
        be able to forward packets to their final destination when
        received from the different CNs or home agents.

     The Binding Update signaling latency is reduced by localizing
     binding updates to the Local Mobility Domain and the signaling load
     is reduced by using LMA for a proxy care of address, as seen by
     hosts outside the Local Mobility Domain.

     When a CN sends data packets to a MN to which it does not yet have
     an entry in its binding cache, these packets are intercepted by the
     home agent and encapsulated to the registered care of address, as
     specified in the basic Mobile IPv6. But this care of address is the
     Regional COA.





Choi, Kang                  Expires May 2002                   [Page 10]


INTERNET DRAFT    LMM for MIPv6 in Distributed Manner      November 2001


     The LMA will receive packets addressed to the MN's Regional COA
     (from the home agent or CNs). Packets will be tunneled from the LMA
     to the MN's Local COA. The MN will decapsulate the packets and
     process the packet in the normal manner.

     The added routing state maintenance in the visited domain is
     minimal. It does not involve the routing tables at all; all per-
     mobile state is kept in the Local binding cache. This data
     structure is internal to the LMA and can re-use the existing
     binding cache.


4.5.2 Inter-Domain Movement

     If the current LMA is not included in the new Local Mobility Domain
     List, it means the MN has moved outside of the current Local
     Mobility Domain.


                              **********************
                              *                    *
             _ _ _     _ _ _  *  _ _ _             *
            |     |   |     | * |     |            *
            | AR1 |---| AR2 |-*-| AR3 |            *
            |_ _ _|   |_ _ _| * |_ _ _|            *
                         |    *    |               *
                  *******|*****    |               *
                  *    _ _ _     _ _ _     _ _ _   *
                  *   |     |   |     |   |     |  *
                  *   | AR4 |---| AR5 |---| AR6 |  *
                  *   |_ _ _|   |_ _ _|   |_ _ _|  *
                  *                          +     *
                  *                          +     *
                  ********** LMD(AR6, 2)**** + *****
                                            _+_
                                           |   |
                                           |MN |
                                           |_ _|

                       Figure5: Inter-Domain movement


     In that case, the MN behaves in the similar way as 4.4.
      - The current AR becomes the new LMA and new Local Mobility
        Domain is formed accordingly.
      - After Local Registration and Home Registration, the new LMA
        acts as a local home agent for the MN.



Notice Regarding Intellectual property rights





Choi, Kang                  Expires May 2002                   [Page 11]


INTERNET DRAFT    LMM for MIPv6 in Distributed Manner      November 2001


     Samsung Electronics is pending patent applications that may be
     relevant to this Internet-Draft. If this specification is adopted
     by IETF and any claim of this patent is necessary for practicing
     this standard, any party will be able to obtain a license from
     Samsung Electronics to use any such patent claims under openly
     specified, reasonable, non-discriminatory terms to implement and
     fully comply  with the standard.



References


[1]  D. Johnson and C. Perkins, Mobility Support in IPv6, draft-ietf-
     mobileip-ipv6-14.txt, July 2000

[2]  H. Soliman, C. Castelluccia, Karim El-Malki, L. Ludovic Bellier,
     Hierarchical MIPv6 mobility management, draft-ietf-mobileip-
     hmipv6-03.txt, February 2001

[3]  E. Gustafsson, A. Jonsson, C. Perkins, Mobile IP Regional
     Registration, draft-ietf-mobileip- reg-tunnel-04.txt, March 2001

[4]  C. Williams, Localized Mobility Management Requirements, draft-
     williams-mobileip-lmm- requirements-00.txt, July 2001

[5]  H. Li, Local Mobility Management Framework, draft-li-mobileip-lmm-
     framework-00.txt, July 2001

[6]  G. Tsirtsis, A. Yegin, C. Perkins, G. Dommety, K. El-Malki, M.
     Khalil, Fast Handovers for Mobile IPv6, draft-ietf-mobileip-fast-
     mipv6-01.txt, April 2001

[7]  J. Manner, M. Kojo, C. Perkins, T. Suihko, P. Eardley, D. Wisely,
     R. Hancock, N. Georganopoulos,Mobility Related Terminology, draft-
     manner-seamoby-terms-02.txt, July 2001



Author's Addresses

   JinHyeock Choi
   i-Networking Lab, Samsung AIT (SAIT)
   Phone: +82-31-280-8194
   Email: athene@sait.samgung.co.kr

   WooShik Kang
   i-Networking Lab, Samsung AIT (SAIT)
   Phone: +82-31-280-8190
   Email: wskang@samsung.com






Choi, Kang                  Expires May 2002                   [Page 12]
