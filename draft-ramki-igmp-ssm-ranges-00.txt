



Network Working Group                       R. Chokkanathapuram Sundaram
Internet-Draft                                                 S. Venaas
Intended status: Standards Track                     Cisco Systems, Inc.
Expires: January 9, 2020                                    July 8, 2019


 Source specific multicast range distribution for L2 multicast networks
                     draft-ramki-igmp-ssm-ranges-00

Abstract

   In an IGMP snooping multicast network with version 3 (v3) enabled on
   the routers, when a v2 join/leave is received for a multicast group
   the router operates on V2 compatible mode.  For SSM ranges a (*,G)v2
   or v3 report should be ignored by the router/switch.  The IGMP
   snooping switches may not have knowledge about the user configured
   SSM range in the network to correctly discard/ignore the v2 join/
   leave.  Accepting (*,G) v2 or v3 will cause SSM operations to fail.
   This draft discusses distribution of SSM ranges in the L2 multicast
   network so that L2 snooping switches can learn about the configured
   SSM ranges and discard any (*,G) v2/v3 reports for the said ranges.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on January 9, 2020.

Copyright Notice

   Copyright (c) 2019 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents



Chokkanathapuram SundaramExpiresaJanuary 9, 2020                [Page 1]

Internet-DraSSM range distribution for L2 multicast networks.  July 2019


   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
     1.1.  Conventions Used in This Document . . . . . . . . . . . .   2
     1.2.  Terminology . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  L2 network with a PIM router  . . . . . . . . . . . . . . . .   3
   3.  L2 multicast network with no PIM router . . . . . . . . . . .   3
   4.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   4
   5.  Acknowledgments . . . . . . . . . . . . . . . . . . . . . . .   4
   6.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   4
     6.1.  Normative References  . . . . . . . . . . . . . . . . . .   4
     6.2.  Informative References  . . . . . . . . . . . . . . . . .   5
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   5

1.  Introduction

   IGMP v2 join and leaves and IGMP v3 (*,G) group records should be
   discarded for Source specific multicast group ranges.  The default
   SSM range is 232/8 but changing the range is possible.  In a L2
   multicast network the Snooping switches are unaware of the user
   configured SSM ranges in the network.  Methods are needed to
   distribute user configured SSM ranges so that all snooping switches
   in the L2 domain knows about the same.  Thus the snooping switches
   can discard the Version 2 joins/leaves falling in the SSM range.  If
   the v2 joins/leaves for the SSM ranges are not discarded then the
   router/ querier start operating in v2 mode.  This will result in
   outages.  The same problem is applicable for MLD as well.

1.1.  Conventions Used in This Document

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC2119].

1.2.  Terminology

   DR:  Designated Router

   SSM:  Source Specific Multicast






Chokkanathapuram SundaramExpiresaJanuary 9, 2020                [Page 2]

Internet-DraSSM range distribution for L2 multicast networks.  July 2019


2.  L2 network with a PIM router

   In a LAN if a PIM router is detected the LAN segment should use the
   PIM SSM range configured on the PIM router which is the DR on the
   LAN.  Snooping switches typically process PIM Hello packets already
   to detect routers.  A new PIM Hello Option will carry the current
   (default or configured) SSM group ranges.  The PIM Hello Option can
   be used by the snooping switches to learn the SSM ranges used in the
   network.  Thus an IGMP message for a group in the SSM range in a v3
   enabled network can correctly be discarded/ignored.  Preventing hosts
   (whether by accident or a DoS attack) from disrupting the SSM
   service.  Routers could be statically configured with the SSM group
   range.  In case there are multiple routers on the LAN it is possible
   that routers are configured with different ranges.  In that case,
   switches should use the range announced by the DR.  The option allows
   for detecting configuration mistakes.  A PIM router can log a message
   if it sees a neighbor announcing a different SSM range.  Also,
   switches can log a message if they are statically configured with
   ranges that differ from what what is announced by the DR.  There is
   no hold time for the config.  The config is removed if the router
   sends a hello without the option, or the DR expires.  If a new DR is
   elected, the config will be replaced by what the new DR is
   announcing.

 Figure 1: PIM SSM range hello option.
       0                   1                   2                   3
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |          Type = TBD           |      Length = Variable.       |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |          Group Address 1 (Encoded-Group format)               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |          Group Address N (Encoded-Group format)               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


3.  L2 multicast network with no PIM router

   In a pure L2 only network a new IGMP message is sent from querier to
   learn the SSM ranges.  The SSM range used should be configured on the
   querier and the querier will distribute it with a new message type so
   that all L2 switches can learn about the SSM range.







Chokkanathapuram SundaramExpiresaJanuary 9, 2020                [Page 3]

Internet-DraSSM range distribution for L2 multicast networks.  July 2019


 Figure 2: IGMP SSM range message.
        0                   1                   2                   3
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |  Type = TBD   |    Reserved   |           Checksum            |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |           Reserved            |  Num SSM ranges               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                    SSM range 1                                |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                       ....                                    |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                    SSM range N                                |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

       SSM range is an IP address plus a length octet.
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                   SSM  Prefix address                         |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       | Prefix length |
       +-+-+-+-+-+-+-+-+

4.  IANA Considerations

   This document requires the assignment of a PIM hello option and an
   IGMP message type.

5.  Acknowledgments

6.  References

6.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC3376]  Cain, B., Deering, S., Kouvelas, I., Fenner, B., and A.
              Thyagarajan, "Internet Group Management Protocol, Version
              3", RFC 3376, DOI 10.17487/RFC3376, October 2002,
              <https://www.rfc-editor.org/info/rfc3376>.

   [RFC4604]  Holbrook, H., Cain, B., and B. Haberman, "Using Internet
              Group Management Protocol Version 3 (IGMPv3) and Multicast
              Listener Discovery Protocol Version 2 (MLDv2) for Source-
              Specific Multicast", RFC 4604, DOI 10.17487/RFC4604,
              August 2006, <https://www.rfc-editor.org/info/rfc4604>.



Chokkanathapuram SundaramExpiresaJanuary 9, 2020                [Page 4]

Internet-DraSSM range distribution for L2 multicast networks.  July 2019


   [RFC4607]  Holbrook, H. and B. Cain, "Source-Specific Multicast for
              IP", RFC 4607, DOI 10.17487/RFC4607, August 2006,
              <https://www.rfc-editor.org/info/rfc4607>.

6.2.  Informative References

   [RFC3973]  Adams, A., Nicholas, J., and W. Siadak, "Protocol
              Independent Multicast - Dense Mode (PIM-DM): Protocol
              Specification (Revised)", RFC 3973, DOI 10.17487/RFC3973,
              January 2005, <https://www.rfc-editor.org/info/rfc3973>.

Authors' Addresses

   Ramakrishnan Chokkanathapuram Sundaram
   Cisco Systems, Inc.
   Tasman Drive
   San Jose  CA 95134
   USA

   Email: ramaksun@cisco.com


   Stig Venaas
   Cisco Systems, Inc.
   Tasman Drive
   San Jose  CA 95134
   USA

   Email: stig@cisco.com






















Chokkanathapuram SundaramExpiresaJanuary 9, 2020                [Page 5]
