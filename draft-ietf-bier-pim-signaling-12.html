<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>PIM Signaling Through BIER Core</title>
<meta content="Hooman Bidgoli" name="author">
<meta content="Fengman Xu" name="author">
<meta content="Jayant Kotalwar" name="author">
<meta content="IJsbrand Wijnands" name="author">
<meta content="Mankamana Mishra" name="author">
<meta content="Zhaohui Zhang" name="author">
<meta content="
       Consider large networks deploying traditional PIM multicast service.
      Typically, each portion of these large networks have their own mandates
      and requirements. It might be desirable to deploy BIER technology in
      some part of these networks to replace traditional PIM services. In such
      cases downstream PIM states need to be signaled over the BIER Domain
      toward the source. 
       This draft specifies the procedure to signal PIM join/prune messages
      through a BIER Domain, as such enabling the provisioning of traditional
      PIM services through a BIER Domain. These procedures are valid for
      forwarding PIM join/prune messages to the Source (SSM) or Rendezvous
      Point (ASM). 
    " name="description">
<meta content="xml2rfc 3.9.1" name="generator">
<meta content="draft-ietf-bier-pim-signaling-12" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.9.1
    Python 3.6.12
    appdirs 1.4.4
    ConfigArgParse 1.5.1
    google-i18n-address 2.5.0
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.6.3
    pycountry 20.7.3
    pyflakes 2.3.1
    PyYAML 5.4.1
    requests 2.26.0
    setuptools 57.4.0
    six 1.16.0
-->
<link href="/tmp/draft-ietf-bier-pim-signaling-12-ppb2dux8.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: avoid-page;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">PIM Signaling Through BIER Core</td>
<td class="right">July 2021</td>
</tr></thead>
<tfoot><tr>
<td class="left">Bidgoli, et al.</td>
<td class="center">Expires 26 January 2022</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">Network Working Group</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-ietf-bier-pim-signaling-12</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2021-07-25" class="published">25 July 2021</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2022-01-26">26 January 2022</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">H. Bidgoli, <span class="editor">Ed.</span>
</div>
<div class="org">Nokia</div>
</div>
<div class="author">
      <div class="author-name">F. Xu</div>
<div class="org">Verizon</div>
</div>
<div class="author">
      <div class="author-name">J. Kotalwar</div>
<div class="org">Nokia</div>
</div>
<div class="author">
      <div class="author-name">I. Wijnands</div>
<div class="org">Cisco System</div>
</div>
<div class="author">
      <div class="author-name">M. Mishra</div>
<div class="org">Cisco System</div>
</div>
<div class="author">
      <div class="author-name">Z. Zhang</div>
<div class="org">Juniper Networks</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">PIM Signaling Through BIER Core</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">Consider large networks deploying traditional PIM multicast service.
      Typically, each portion of these large networks have their own mandates
      and requirements. It might be desirable to deploy BIER technology in
      some part of these networks to replace traditional PIM services. In such
      cases downstream PIM states need to be signaled over the BIER Domain
      toward the source.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
<p id="section-abstract-2">This draft specifies the procedure to signal PIM join/prune messages
      through a BIER Domain, as such enabling the provisioning of traditional
      PIM services through a BIER Domain. These procedures are valid for
      forwarding PIM join/prune messages to the Source (SSM) or Rendezvous
      Point (ASM).<a href="#section-abstract-2" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 26 January 2022.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2021 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="ulBare toc compact ulEmpty">
<li class="ulBare toc compact ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a></p>
</li>
          <li class="ulBare toc compact ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="xref">2</a>.  <a href="#name-conventions-used-in-this-do" class="xref">Conventions used in this document</a></p>
<ul class="ulBare ulEmpty toc compact">
<li class="ulBare ulEmpty toc compact" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1" class="keepWithNext"><a href="#section-2.1" class="xref">2.1</a>.  <a href="#name-definitions" class="xref">Definitions</a></p>
</li>
            </ul>
</li>
          <li class="ulBare toc compact ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-pim-signaling-through-bier-" class="xref">PIM Signaling Through BIER domain</a></p>
<ul class="ulBare ulEmpty toc compact">
<li class="ulBare ulEmpty toc compact" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="xref">3.1</a>.  <a href="#name-ingress-bbr-procedure" class="xref">Ingress BBR procedure</a></p>
<ul class="ulBare ulEmpty toc compact">
<li class="ulBare ulEmpty toc compact" id="section-toc.1-1.3.2.1.2.1">
                    <p id="section-toc.1-1.3.2.1.2.1.1"><a href="#section-3.1.1" class="xref">3.1.1</a>.  <a href="#name-new-pim-join-attribute-bier" class="xref">New Pim Join Attribute, BIER Information Vector</a></p>
<ul class="ulBare ulEmpty toc compact">
<li class="ulBare ulEmpty toc compact" id="section-toc.1-1.3.2.1.2.1.2.1">
                        <p id="section-toc.1-1.3.2.1.2.1.2.1.1"><a href="#section-3.1.1.1" class="xref">3.1.1.1</a>.  <a href="#name-bier-packet-construction-at" class="xref">BIER packet construction at the IBBR</a></p>
</li>
                    </ul>
</li>
                </ul>
</li>
              <li class="ulBare ulEmpty toc compact" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="xref">3.2</a>.  <a href="#name-signaling-pim-through-the-b" class="xref">Signaling PIM through the BIER domain procedure</a></p>
</li>
              <li class="ulBare ulEmpty toc compact" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a href="#section-3.3" class="xref">3.3</a>.  <a href="#name-ebbr-procedure" class="xref">EBBR procedure</a></p>
</li>
            </ul>
</li>
          <li class="ulBare toc compact ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-datapath-forwarding" class="xref">Datapath Forwarding</a></p>
<ul class="ulBare ulEmpty toc compact">
<li class="ulBare ulEmpty toc compact" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="xref">4.1</a>.  <a href="#name-datapath-traffic-flow" class="xref">Datapath traffic flow</a></p>
</li>
            </ul>
</li>
          <li class="ulBare toc compact ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-pim-sm-behavior" class="xref">PIM-SM behavior</a></p>
</li>
          <li class="ulBare toc compact ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-applicability-to-mvpn" class="xref">Applicability to MVPN</a></p>
</li>
          <li class="ulBare toc compact ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-iana-considerations" class="xref">IANA Considerations</a></p>
</li>
          <li class="ulBare toc compact ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-security-considerations" class="xref">Security Considerations</a></p>
</li>
          <li class="ulBare toc compact ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-acknowledgments" class="xref">Acknowledgments</a></p>
</li>
          <li class="ulBare toc compact ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="xref">10</a>. <a href="#name-references" class="xref">References</a></p>
<ul class="ulBare ulEmpty toc compact">
<li class="ulBare ulEmpty toc compact" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a href="#section-10.1" class="xref">10.1</a>.  <a href="#name-normative-references" class="xref">Normative References</a></p>
</li>
              <li class="ulBare ulEmpty toc compact" id="section-toc.1-1.10.2.2">
                <p id="section-toc.1-1.10.2.2.1"><a href="#section-10.2" class="xref">10.2</a>.  <a href="#name-informative-references" class="xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="ulBare toc compact ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#appendix-A" class="xref">Appendix A</a>.  <a href="#name-determining-the-ebbr" class="xref">Determining the EBBR</a></p>
<ul class="ulBare ulEmpty toc compact">
<li class="ulBare ulEmpty toc compact" id="section-toc.1-1.11.2.1">
                <p id="section-toc.1-1.11.2.1.1"><a href="#appendix-A.1" class="xref">A.1</a>.  <a href="#name-link-state-protocols" class="xref">Link-State Protocols</a></p>
</li>
              <li class="ulBare ulEmpty toc compact" id="section-toc.1-1.11.2.2">
                <p id="section-toc.1-1.11.2.2.1"><a href="#appendix-A.2" class="xref">A.2</a>.  <a href="#name-indirect-next-hop" class="xref">Indirect next-hop</a></p>
<ul class="ulBare ulEmpty toc compact">
<li class="ulBare ulEmpty toc compact" id="section-toc.1-1.11.2.2.2.1">
                    <p id="section-toc.1-1.11.2.2.2.1.1"><a href="#appendix-A.2.1" class="xref">A.2.1</a>.  <a href="#name-static-route" class="xref">Static Route</a></p>
</li>
                  <li class="ulBare ulEmpty toc compact" id="section-toc.1-1.11.2.2.2.2">
                    <p id="section-toc.1-1.11.2.2.2.2.1"><a href="#appendix-A.2.2" class="xref">A.2.2</a>.  <a href="#name-interior-border-gateway-pro" class="xref">Interior Border Gateway Protocol (iBGP)</a></p>
</li>
                </ul>
</li>
              <li class="ulBare ulEmpty toc compact" id="section-toc.1-1.11.2.3">
                <p id="section-toc.1-1.11.2.3.1"><a href="#appendix-A.3" class="xref">A.3</a>.  <a href="#name-inter-area-support" class="xref">Inter-area support</a></p>
<ul class="ulBare ulEmpty toc compact">
<li class="ulBare ulEmpty toc compact" id="section-toc.1-1.11.2.3.2.1">
                    <p id="section-toc.1-1.11.2.3.2.1.1"><a href="#appendix-A.3.1" class="xref">A.3.1</a>.  <a href="#name-inter-area-route-summarizat" class="xref">Inter-area Route summarization</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="ulBare toc compact ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#appendix-B" class="xref"></a><a href="#name-authors-addresses" class="xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">It might be desirable to simplify/upgrade some part of an existing
      network to BIER technology, removing any legacy multicast protocols like
      PIM. This simplification should be done with minimum interruption or
      disruption to the other parts of the network from singling, services and
      software upgrade point of view. To do so this draft is specifies
      procedures for signaling multicast join and prune messages over the BIER
      domain, this draft is not trying to create FULL PIM adjacency over a
      BIER domain between two PIM nodes. The PIM adjacency is terminated at
      BIER edge routers and only join/prune signaling messages are transported
      over the BIER network. It just so happened that this draft chose
      signaling messages to be in par with PIM join/prune messages. These
      signaling messages are forwarded upstream toward the BIER edge router on
      path to the Source or Rendezvous point. These signaling messages are
      encapsulated in a BIER header.<a href="#section-1-1" class="pilcrow">¶</a></p>
</section>
<section id="section-2">
      <h2 id="name-conventions-used-in-this-do">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-conventions-used-in-this-do" class="section-name selfRef">Conventions used in this document</a>
      </h2>
<p id="section-2-1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
      "OPTIONAL" in this document are to be interpreted as described in BCP 14
      <span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="xref">RFC8174</a>]</span> when, and only when,
      they appear in all capitals, as shown here.<a href="#section-2-1" class="pilcrow">¶</a></p>
<section id="section-2.1">
        <h3 id="name-definitions">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-definitions" class="section-name selfRef">Definitions</a>
        </h3>
<p id="section-2.1-1">An understanding of the BIER architecture <span>[<a href="#RFC8279" class="xref">RFC8279</a>]</span>
        and the related terminology is expected. The following are some of the
        new definitions used in this draft.<a href="#section-2.1-1" class="pilcrow">¶</a></p>
<p id="section-2.1-2">BBR:<a href="#section-2.1-2" class="pilcrow">¶</a></p>
<p id="section-2.1-3">BIER Boundary router. A router between the PIM domain and BIER
        domain. Maintains PIM adjacency for all routers attached to it on the
        PIM domain and terminates the PIM adjacency toward the BIER
        domain.<a href="#section-2.1-3" class="pilcrow">¶</a></p>
<p id="section-2.1-4">IBBR:<a href="#section-2.1-4" class="pilcrow">¶</a></p>
<p id="section-2.1-5">Ingress BIER Boundary Router. An ingress router from signaling
        point of view. It maintains PIM adjacency toward the PIM domain and
        signals join/prune messages across the BIER domain to EBBR as
        needed.<a href="#section-2.1-5" class="pilcrow">¶</a></p>
<p id="section-2.1-6">EBBR:<a href="#section-2.1-6" class="pilcrow">¶</a></p>
<p id="section-2.1-7">Egress BIER Boundary Router. An egress router in BIER domain from
        signaling point of view. It maintains PIM adjacency to all upstream
        PIM routers. It terminates the BIER signaling packets and creates
        necessary PIM join/prune messages into PIM Domain.<a href="#section-2.1-7" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-3">
      <h2 id="name-pim-signaling-through-bier-">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-pim-signaling-through-bier-" class="section-name selfRef">PIM Signaling Through BIER domain</a>
      </h2>
<span id="name-bier-boundary-router"></span><div id="Control-Plane">
<figure id="figure-1">
        <div class="artwork art-text alignCenter" id="section-3-1.1">
<pre>
                   BBR                   BBR
     |--PIM Domain--|-----BIER domain-----|--PIM domain--|
S--( A )----------( B ) ---- ( C ) ---- ( D )----------( E )--h

                  EBBR                  IBBR
Sig  &lt;-----PIM-----|&lt;--BIER Tunneling----|&lt;----PIM------
(new)
                  BFIR                  BFER
     -------------&gt;|--------BIER--------&gt;|-------------&gt; Datapath
                                                      (no change)</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-bier-boundary-router" class="selfRef">BIER boundary router</a>
        </figcaption></figure>
</div>
<p id="section-3-2">Figure 1 illustrates the operation of the BIER Boundary router (BBR).
      BBRs are connected to PIM routers in the PIM domain and BIER routers in
      the BIER domain. PIM routers in PIM domain continue to send PIM state
      messages to the BBR. The BBR will create PIM adjacency between all the
      PIM routers attached to it on the PIM domain. Each BBR determines if a
      BIER Signaling Join or Prune message needs to be transmitted through the
      BIER domain. This draft has chosen these BIER signaling messages to be
      PIM join/prune message, as such an implementation could chose to tunnel
      actual PIM join/prune messages through BIER network. This tunneling is
      only done for signaling purposes and not for creating a PIM adjacency
      between the two disjoint PIM domains through the BIER domain.<a href="#section-3-2" class="pilcrow">¶</a></p>
<p id="section-3-3">The terminology ingress BBR (IBBR) and egress BBR (EBBR) is relative
      only from a signaling point of view.<a href="#section-3-3" class="pilcrow">¶</a></p>
<p id="section-3-4">The egress BBR will determine if the arriving BIER packet is a
      signaling packet and if so it will generate a PIM join/prune packet
      toward its attached PIM domain.<a href="#section-3-4" class="pilcrow">¶</a></p>
<p id="section-3-5">The new procedures in this draft are only applicable to signaling and
      there are no changes from datapath point of view.<a href="#section-3-5" class="pilcrow">¶</a></p>
<section id="section-3.1">
        <h3 id="name-ingress-bbr-procedure">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-ingress-bbr-procedure" class="section-name selfRef">Ingress BBR procedure</a>
        </h3>
<p id="section-3.1-1">The IBBR maintains a PIM adjacency <span>[<a href="#RFC7761" class="xref">RFC7761</a>]</span> with
        any PIM router attached to it on the PIM domain.<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<p id="section-3.1-2">When a PIM Join or Prune message is received, the IBBR determines
        whether the Source or RP is reachable through the BIER domain. The
        EBBR is the BFR through which the Source or RP is reachable. In PIM
        terms <span>[<a href="#RFC7761" class="xref">RFC7761</a>]</span>, the EBBR is the RPF Neighbor, and the
        RPF Interface is the BIER "tunnel" used to reach it. The mechanisms
        used to find the EBBR are outside the scope of this document and there
        can be many mechanism depending on if the source or RP are in same
        area or autonomous system (AS) or in different area or AS -- some
        examples are provided in Appendix A.<a href="#section-3.1-2" class="pilcrow">¶</a></p>
<p id="section-3.1-3">If the lookup for source or rendezvous point results into multiple
        EBBRs, different IBBRs could choose different EBBRs for the same flow.
        As long as a unique IBBR chooses a unique EBBR for the same flow. On
        downstream these EBBRs will send traffic to their corresponding
        IBBRs.<a href="#section-3.1-3" class="pilcrow">¶</a></p>
<p id="section-3.1-4">After discovering the EBBR and its BFR-id, the IBBR MUST use the
        BIER Information Vector (Section 3.1.1) which is a PIM Join Attribute
        type <span>[<a href="#RFC5384" class="xref">RFC5384</a>]</span>. The EBBR uses this attribute to obtain
        the necessary BIER information to build its multicast state. The
        signaling packet, in this case a PIM Join/Prune message, is
        encapsulated in the BIER Header and forwarded through the BIER domain
        to the EBBR. The source address of the PIM packets MUST be set to IBBR
        local BFR-prefix. The destination address MUST be set to
        ALL-PIM-ROUTERS <span>[<a href="#RFC7761" class="xref">RFC7761</a>]</span>.<a href="#section-3.1-4" class="pilcrow">¶</a></p>
<p id="section-3.1-5">The IBBR will track all the PIM interfaces on the attached PIM
        domain which are interested in a certain (S,G). It creates multicast
        states for arriving join messages from PIM domain, with incoming
        interface as BIER "tunnel" interface and outgoing interface as the PIM
        domain interface(s) on which PIM Join(s) were received on.<a href="#section-3.1-5" class="pilcrow">¶</a></p>
<section id="section-3.1.1">
          <h4 id="name-new-pim-join-attribute-bier">
<a href="#section-3.1.1" class="section-number selfRef">3.1.1. </a><a href="#name-new-pim-join-attribute-bier" class="section-name selfRef">New Pim Join Attribute, BIER Information Vector</a>
          </h4>
<p id="section-3.1.1-1">The new PIM Join Attribute " BIER Information Vector" is defined
          as follow based on <span>[<a href="#RFC5384" class="xref">RFC5384</a>]</span><a href="#section-3.1.1-1" class="pilcrow">¶</a></p>
<span id="name-pim-join-attribute"></span><div id="PIM-Join">
<figure id="figure-2">
            <div class="artwork art-text alignCenter" id="section-3.1.1-2.1">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|F|E|Attr_Type  |     Length  |  Addr Family    | BIER info
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-...</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-pim-join-attribute" class="selfRef">PIM Join Attribute</a>
            </figcaption></figure>
</div>
<p id="section-3.1.1-3">F bit: Transitive Attribute, as specified in <span>[<a href="#RFC5384" class="xref">RFC5384</a>]</span>. MUST be set to zero as this attribute is always
          non-transitive. If EBBR receives this attribute type with the F bit
          set it must discard the Attribute.<a href="#section-3.1.1-3" class="pilcrow">¶</a></p>
<p id="section-3.1.1-4">E bit: End of Attributes, as specified in <span>[<a href="#RFC5384" class="xref">RFC5384</a>]</span><a href="#section-3.1.1-4" class="pilcrow">¶</a></p>
<p id="section-3.1.1-5">Attr_Type: TBD assign by IANA.<a href="#section-3.1.1-5" class="pilcrow">¶</a></p>
<p id="section-3.1.1-6">Length: Length of the value field, as specified in <span>[<a href="#RFC5384" class="xref">RFC5384</a>]</span>. MUST be set to the length of the BIER Info field
          + 1. For IPv4 the length is 8, and 20 for IPv6. Incorrect length
          value compare to the Addr Family must be discarded.<a href="#section-3.1.1-6" class="pilcrow">¶</a></p>
<p id="section-3.1.1-7">Addr Family: PIM address family as specified in <span>[<a href="#RFC7761" class="xref">RFC7761</a>]</span>. Unrecognized Address Family must be
          discarded.<a href="#section-3.1.1-7" class="pilcrow">¶</a></p>
<span id="name-pim-join-attribute-detail"></span><div id="PIM-Join-detail">
<figure id="figure-3">
            <div class="artwork art-text alignCenter" id="section-3.1.1-8.1">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
~                 IBBR Prefix IPv4 or IPv6                      ~
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| sub-domain-id |        BFR-id                 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</pre>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
<a href="#name-pim-join-attribute-detail" class="selfRef">PIM Join Attribute detail</a>
            </figcaption></figure>
</div>
<p id="section-3.1.1-9">BIER Info: IBBR's BFR-prefix (IPv4 or IPv6), sub-domain-id,
          BFR-id<a href="#section-3.1.1-9" class="pilcrow">¶</a></p>
<section id="section-3.1.1.1">
            <h5 id="name-bier-packet-construction-at">
<a href="#section-3.1.1.1" class="section-number selfRef">3.1.1.1. </a><a href="#name-bier-packet-construction-at" class="section-name selfRef">BIER packet construction at the IBBR</a>
            </h5>
<p id="section-3.1.1.1-1">The BIER header will be encoded with the BFR-id of the
            IBBR(with appropriate bit set in the BitString) and the PIM
            signaling packet is then encapsulated in the packet.<a href="#section-3.1.1.1-1" class="pilcrow">¶</a></p>
<span id="name-bier-header"></span><div id="bier-header">
<figure id="figure-4">
              <div class="artwork art-text alignCenter" id="section-3.1.1.1-2.1">
<pre>
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|              BIFT-id                  | TC  |S|     TTL       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|Nibble |  Ver  |  BSL  |              Entropy                  |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|OAM|Rsv|    DSCP   |   Proto   |            BFIR-id            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                BitString  (first 32 bits)                     ~
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
~                                                               ~
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
~                BitString  (last 32 bits)                      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</pre>
</div>
<figcaption><a href="#figure-4" class="selfRef">Figure 4</a>:
<a href="#name-bier-header" class="selfRef">BIER header</a>
              </figcaption></figure>
</div>
<p id="section-3.1.1.1-3">BIERHeader.Proto = PIM Addrress Family<a href="#section-3.1.1.1-3" class="pilcrow">¶</a></p>
<p id="section-3.1.1.1-4">BIERHeader.BitString= Bit corresponding to the BFR-id of the
            EBBR<a href="#section-3.1.1.1-4" class="pilcrow">¶</a></p>
<p id="section-3.1.1.1-5">BIERHeader.BFIR-id = BFR-Id of the BBR originating the
            encapsulated signaling packet, i.e. the IBBR.<a href="#section-3.1.1.1-5" class="pilcrow">¶</a></p>
<p id="section-3.1.1.1-6">Rest of the values in the BIER header are determined based on
            the network (MPLS/non-MPLS), capabilities (BSL), and network
            configuration.<a href="#section-3.1.1.1-6" class="pilcrow">¶</a></p>
</section>
</section>
</section>
<section id="section-3.2">
        <h3 id="name-signaling-pim-through-the-b">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-signaling-pim-through-the-b" class="section-name selfRef">Signaling PIM through the BIER domain procedure</a>
        </h3>
<p id="section-3.2-1">Throughout the BIER domain the BIER forwarding procedure is
        according to <span>[<a href="#RFC8279" class="xref">RFC8279</a>]</span>. No BIER router will examine the
        BIER the signaling packet. As such there is no multicast state built
        in the BIER domain.<a href="#section-3.2-1" class="pilcrow">¶</a></p>
<p id="section-3.2-2">The packet will be forwarded through the BIER domain until it
        reaches the EBBR indicated by the BIERHeader.Bitstring. Only this
        targeted EBBR router will remove the BIER header and examine the PIM
        IPv4 or IPv6 signaling packet further as per EBBR Procedure
        section.<a href="#section-3.2-2" class="pilcrow">¶</a></p>
</section>
<section id="section-3.3">
        <h3 id="name-ebbr-procedure">
<a href="#section-3.3" class="section-number selfRef">3.3. </a><a href="#name-ebbr-procedure" class="section-name selfRef">EBBR procedure</a>
        </h3>
<p id="section-3.3-1">EBBR removes the BIER Header and determine this is a signaling
        packet. The Received signaling packet, PIM join/prune message, is
        processed as if it were received from neighbors on a virtual
        interface, (i.e. as if the pim adjacency was present, regardless of
        the fact that there is no adjacency).<a href="#section-3.3-1" class="pilcrow">¶</a></p>
<p id="section-3.3-2">The EBBR will build a forwarding table for the arriving (S,G) using
        the obtained BFIR-id and the Sub-Domain information from BIER Header
        and/or the PIM join Attributes added to the signaling packet. In short
        it tracks all IBBRs interested in this (S,G). For a specific Source
        and Group, EBBR SHOULD track all the interested IBBRs via signaling
        messages arriving from the BIER Domain. BFER builds its (s,g)
        forwarding state with incoming interface (IIF) as the Reverse Path
        Forwarding (RPF) interface (in attached PIM domain) towards the source
        or rendezvous point. The outgoing interfaces include a virtual
        interface that represent BIER forwarding to tracked IBBRs.<a href="#section-3.3-2" class="pilcrow">¶</a></p>
<p id="section-3.3-3">The EBBR maintains a PIM adjacency <span>[<a href="#RFC7761" class="xref">RFC7761</a>]</span> with
        any PIM router attached to it on the PIM domain. At this point the
        end-to-end multicast traffic flow setup is complete.<a href="#section-3.3-3" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-4">
      <h2 id="name-datapath-forwarding">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-datapath-forwarding" class="section-name selfRef">Datapath Forwarding</a>
      </h2>
<section id="section-4.1">
        <h3 id="name-datapath-traffic-flow">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-datapath-traffic-flow" class="section-name selfRef">Datapath traffic flow</a>
        </h3>
<p id="section-4.1-1">When multicast data traffic arrives on the BFIR (EBBR) it forwards
        the traffic, through the BIER domain, to all interested IBBRs
        following the procedures specified in <span>[<a href="#RFC8279" class="xref">RFC8279</a>]</span>. The
        BFER(s) (IBBR(s)) also follow the procedures in <span>[<a href="#RFC8279" class="xref">RFC8279</a>]</span> and forward the multicast packet through its
        outgoing interface(s).<a href="#section-4.1-1" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-5">
      <h2 id="name-pim-sm-behavior">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-pim-sm-behavior" class="section-name selfRef">PIM-SM behavior</a>
      </h2>
<p id="section-5-1">The procedures described in this document can be used with Any-Source
      Mutlicast (ASM) as long as a static Rendezvous Point (RP) or embedded RP
      for IPv6 is used<span>[<a href="#RFC3956" class="xref">RFC3956</a>]</span>.<a href="#section-5-1" class="pilcrow">¶</a></p>
<p id="section-5-2">It should be noted that this draft only signals PIM Joins and Prunes
      through the BIER domain and not any other PIM message types including
      PIM Hellos or Asserts. As such functionality related to these other type
      of massages will not be possible through a BIER domain with this draft
      and future drafts might cover these scenarios. As an example DR
      selection should be done in the PIM domain or if the PIM routers
      attached to IBBRs are performing DR selection there needs to be a
      dedicated PIM interface between these routers. The register messages are
      unicas encapsulatedt from the source to RP as such they are forwarded
      without these procedures.<a href="#section-5-2" class="pilcrow">¶</a></p>
<p id="section-5-3">In case of PIM ASM Static RP or embedded RP for IPv6 the procedure
      for leaves joining RP is the same as above. It should be noted that for
      ASM, the EBBRs are determined with respect to the RP instead of the
      source.<a href="#section-5-3" class="pilcrow">¶</a></p>
</section>
<section id="section-6">
      <h2 id="name-applicability-to-mvpn">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-applicability-to-mvpn" class="section-name selfRef">Applicability to MVPN</a>
      </h2>
<p id="section-6-1">With just minor changes, the above procedures apply to MVPN as well,
      with BFIR/BFER/EBBR/IBBR being VPN PEs. All the PIM related procedures,
      and the determination of EBBR happens in the context of a VRF, following
      procedures for PIM-MVPN.<a href="#section-6-1" class="pilcrow">¶</a></p>
<p id="section-6-2">When a PIM packet arrives from PIM domain attached to the VRF (IBBR),
      and it is determined that the source is reachable via the VRF through
      the BIER domain, a PIM signaling message is sent via BIER to the EBBR.
      In this case usually the PE terminating the PIM-MVPN is the EBBR. A
      label is imposed before the BIER header is imposed, and the "proto"
      field in the BIER header is set to 1 (for "MPLS packet with
      downstream-assigned label at top of stack"). The label is advertised by
      the EBBR/BFIR to associate incoming packets to its correct VRF. In many
      scenarios a label is already bound to the VRF loopback address on the
      EBBR/BFIR and it can be used.<a href="#section-6-2" class="pilcrow">¶</a></p>
<p id="section-6-3">When a multicast data packet is sent via BIER by an EBBR/BFIR, a
      label is imposed before the BIER packet is imposed, and the "proto"
      field in the BIER header is set to 1 (for "MPLS packet with
      downstream-assigned label at top of stack"). The label is assigned to
      the VPN consistently on all VRFs <span>[<a href="#draft-zzhang-bess-mvpn-evpn-aggregation-label-01" class="xref">draft-zzhang-bess-mvpn-evpn-aggregation-label-01</a>]</span>.<a href="#section-6-3" class="pilcrow">¶</a></p>
<p id="section-6-4">If the more complicated label allocation scheme is needed for the
      data packets as specified in <span>[<a href="#draft-zzhang-bess-mvpn-evpn-aggregation-label-01" class="xref">draft-zzhang-bess-mvpn-evpn-aggregation-label-01</a>]</span>, then
      additional PMSI signaling is needed as specified in <span>[<a href="#RFC6513" class="xref">RFC6513</a>]</span>.<a href="#section-6-4" class="pilcrow">¶</a></p>
<p id="section-6-5">To support per-area subdomain in this case, the ABRs would need to
      become VPN PEs and maintain per-VPN state so it is unlikely
      practical.<a href="#section-6-5" class="pilcrow">¶</a></p>
</section>
<section id="section-7">
      <h2 id="name-iana-considerations">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-7-1">IANA is requested to assign a value (TBD) to the BIER Information
      Vector PIM Join Attribute from the PIM Join Attribute Types
      registry.<a href="#section-7-1" class="pilcrow">¶</a></p>
</section>
<section id="section-8">
      <h2 id="name-security-considerations">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-8-1">The procedures of this document do not, in themselves, provide
      privacy, integrity, or authentication for the control plane or the data
      plane. For a discussion of the security considerations regarding the use
      of BIER, please see <span>[<a href="#RFC8279" class="xref">RFC8279</a>]</span> and <span>[<a href="#RFC8296" class="xref">RFC8296</a>]</span>. The security consideration for <span>[<a href="#RFC7761" class="xref">RFC7761</a>]</span> aslso apply.<a href="#section-8-1" class="pilcrow">¶</a></p>
</section>
<section id="section-9">
      <h2 id="name-acknowledgments">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="section-9-1">The authors would like to thank Eric Rosen, Stig Venaas for thier
      reviews and comments.<a href="#section-9-1" class="pilcrow">¶</a></p>
</section>
<section id="section-10">
      <h2 id="name-references">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-10.1">
        <h3 id="name-normative-references">
<a href="#section-10.1" class="section-number selfRef">10.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refTitle">"S. Brandner, "Key words for use in RFCs to Indicate Requirement Levels""</span>, <time datetime="1997-03" class="refDate">March 1997</time>. </dd>
<dd class="break"></dd>
<dt id="RFC5384">[RFC5384]</dt>
        <dd>
<span class="refTitle">"A. Boers, I. Wijnands, E. Rosen, "PIM Join Attribute Format""</span>, <time datetime="2008-11" class="refDate">November 2008</time>. </dd>
<dd class="break"></dd>
<dt id="RFC7761">[RFC7761]</dt>
        <dd>
<span class="refTitle">"B.Fenner, M.Handley, H. Holbrook, I. Kouvelas, R. Parekh, Z.Zhang "PIM Sparse Mode""</span>, <time datetime="2016-03" class="refDate">March 2016</time>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refTitle">"B. Leiba, "ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words""</span>, <time datetime="2017-05" class="refDate">May 2017</time>. </dd>
<dd class="break"></dd>
<dt id="RFC8279">[RFC8279]</dt>
        <dd>
<span class="refTitle">"Wijnands, IJ., Rosen, E., Dolganow, A., Przygienda, T. and S.  Aldrin, "Multicast using Bit Index Explicit Replication""</span>, <time datetime="2016-10" class="refDate">October 2016</time>. </dd>
<dd class="break"></dd>
<dt id="RFC8296">[RFC8296]</dt>
      <dd>
<span class="refTitle">"IJ. Wijnands, E. Rosen, A. Dolganow, J. Yantsura, S. Aldrin, I. Meilik, "Encapsulation for BIER""</span>, <time datetime="2018-01" class="refDate">January 2018</time>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-10.2">
        <h3 id="name-informative-references">
<a href="#section-10.2" class="section-number selfRef">10.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="draft-zzhang-bess-mvpn-evpn-aggregation-label-01">[draft-zzhang-bess-mvpn-evpn-aggregation-label-01]</dt>
        <dd>
<span class="refTitle">"Z. Zhang, E. Rosen, W. Lin, Z. Li, I.Wijnands, "MVPN/EVPN Tunnel Aggregation with Common labels""</span>, <time datetime="2018-04" class="refDate">April 2018</time>. </dd>
<dd class="break"></dd>
<dt id="RFC3956">[RFC3956]</dt>
        <dd>
<span class="refTitle">"P.Savola, B. Haberman "Embedding the Rendezvous Point (RP) Address in an IPv6 Multicast Address""</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6513">[RFC6513]</dt>
      <dd>
<span class="refTitle">"E. Rosen, R. Aggarwal, "Multicast in MPLS/BGP IP VPNs""</span>, <time datetime="2008-11" class="refDate">November 2008</time>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<section id="appendix-A">
      <h2 id="name-determining-the-ebbr">
<a href="#appendix-A" class="section-number selfRef">Appendix A. </a><a href="#name-determining-the-ebbr" class="section-name selfRef">Determining the EBBR</a>
      </h2>
<p id="appendix-A-1">This appendix provides some examples of routing procedures that can
      be used to determine the EBBR at the IBBR.<a href="#appendix-A-1" class="pilcrow">¶</a></p>
<section id="appendix-A.1">
        <h3 id="name-link-state-protocols">
<a href="#appendix-A.1" class="section-number selfRef">A.1. </a><a href="#name-link-state-protocols" class="section-name selfRef">Link-State Protocols</a>
        </h3>
<p id="appendix-A.1-1">On IBBR SPF procedures can be used to find the EBBR closest to the
        source.<a href="#appendix-A.1-1" class="pilcrow">¶</a></p>
<p id="appendix-A.1-2">Assuming the BIER domain consists of all BIER forwarding routers,
        SPF calculation can identify the router advertising the prefix for the
        source. A post process can find the EBBR by walking from the
        advertising router back to the IBBR in the reverse direction of
        shortest path tree branch until the first BFR is encountered.<a href="#appendix-A.1-2" class="pilcrow">¶</a></p>
</section>
<section id="appendix-A.2">
        <h3 id="name-indirect-next-hop">
<a href="#appendix-A.2" class="section-number selfRef">A.2. </a><a href="#name-indirect-next-hop" class="section-name selfRef">Indirect next-hop</a>
        </h3>
<p id="appendix-A.2-1">Alternatively, the route to the source could have an indirect
        next-hop that identifies the EBBR. These methods are explained in the
        following sections.<a href="#appendix-A.2-1" class="pilcrow">¶</a></p>
<section id="appendix-A.2.1">
          <h4 id="name-static-route">
<a href="#appendix-A.2.1" class="section-number selfRef">A.2.1. </a><a href="#name-static-route" class="section-name selfRef">Static Route</a>
          </h4>
<p id="appendix-A.2.1-1">A static route to the source can be configured on the IBBR with
          the next-hop set as the EBBR's BFR-prefix.<a href="#appendix-A.2.1-1" class="pilcrow">¶</a></p>
</section>
<section id="appendix-A.2.2">
          <h4 id="name-interior-border-gateway-pro">
<a href="#appendix-A.2.2" class="section-number selfRef">A.2.2. </a><a href="#name-interior-border-gateway-pro" class="section-name selfRef">Interior Border Gateway Protocol (iBGP)</a>
          </h4>
<p id="appendix-A.2.2-1">Consider the following topology:<a href="#appendix-A.2.2-1" class="pilcrow">¶</a></p>
<span id="name-static-route-2"></span><div id="static-route">
<figure id="figure-5">
            <div class="artwork art-text alignCenter" id="appendix-A.2.2-2.1">
<pre>
                      EBBR                  IBBR
        |--PIM Domain--|-----BIER domain-----|--PIM domain--|
   S--( A )----------( B ) ---- ( C ) ---- ( D )----------( E )--h</pre>
</div>
<figcaption><a href="#figure-5" class="selfRef">Figure 5</a>:
<a href="#name-static-route-2" class="selfRef">Static Route</a>
            </figcaption></figure>
</div>
<p id="appendix-A.2.2-3">Suppose BGP is enable between EBBR (B) and IBBR (D) and the PIM
          Domain routes are redistributed to the BIER domain via BGP,
          performing next-hop-self for these routes. This would include the
          Multicast Source IP address (S). In such case BGP should use the
          same next-hop as the EBBR BIER prefix. This will ensure that all PIM
          domain routes, including the Multicast Source IP address (S) are
          resolve via EBBR's BIER prefix address. When the host (h) triggers a
          PIM join message to IBBR (D), IBBR tries to resolve (S). It resolves
          (S) via BGP installed route and realizes its next-hop is EBBR
          (B).<a href="#appendix-A.2.2-3" class="pilcrow">¶</a></p>
</section>
</section>
<section id="appendix-A.3">
        <h3 id="name-inter-area-support">
<a href="#appendix-A.3" class="section-number selfRef">A.3. </a><a href="#name-inter-area-support" class="section-name selfRef">Inter-area support</a>
        </h3>
<p id="appendix-A.3-1">If each area has its own BIER sub-domain, the above procedure for
        post-SPF could identify one of the ABRs and the EBBR. If a sub-domain
        spans multiple areas, then additional procedures as described in A.2
        is needed.<a href="#appendix-A.3-1" class="pilcrow">¶</a></p>
<section id="appendix-A.3.1">
          <h4 id="name-inter-area-route-summarizat">
<a href="#appendix-A.3.1" class="section-number selfRef">A.3.1. </a><a href="#name-inter-area-route-summarizat" class="section-name selfRef">Inter-area Route summarization</a>
          </h4>
<p id="appendix-A.3.1-1">In a multi-area topology, a BIER sub-domain can span a single
          area. Suppose this single area is constructed entirely of BIER
          capable routers and the ABRs are the BIER Boundary Routers attaching
          the BIER sub-domain in this area to PIM domains in adjacent areas.
          These BBRs can summarize the PIM domain routes via summary routes,
          as an example for OSPF, a type 3 summary LSAs can be used to
          advertise summary routes from a PIM domain area to the BIER area. In
          such scenarios the IBBR can be configured to look up the Source via
          IGP database and use the summary routes and its Advertising Router
          field to resolve the EBBR. The IBBR needs to ensure that the IGP
          summary route is generated by a BFR. This can be achieved by
          ensuring that BIER Sub-TLV exists for this route. If multiple BBRs
          (ABRs) have generated the same summary route the lowest Advertising
          Router IP can be selected or a vendor specific hashing algorithm can
          select the summary route from one of the BBRs.<a href="#appendix-A.3.1-1" class="pilcrow">¶</a></p>
</section>
</section>
</section>
<div id="authors-addresses">
<section id="appendix-B">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Hooman Bidgoli (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">Nokia</span></div>
<div dir="auto" class="left">
<span class="locality">Ottawa</span>  </div>
<div dir="auto" class="left"><span class="country-name">Canada</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:hooman.bidgoli@nokia.com" class="email">hooman.bidgoli@nokia.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Fengman Xu</span></div>
<div dir="auto" class="left"><span class="org">Verizon</span></div>
<div dir="auto" class="left">
<span class="locality">Richardson</span>,  </div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:fengman.xu@verizon.com" class="email">fengman.xu@verizon.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Jayant Kotalwar</span></div>
<div dir="auto" class="left"><span class="org">Nokia</span></div>
<div dir="auto" class="left">
<span class="locality">Montain View</span>,  </div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:jayant.kotalwar@nokia.com" class="email">jayant.kotalwar@nokia.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">IJsbrand Wijnands</span></div>
<div dir="auto" class="left"><span class="org">Cisco System</span></div>
<div dir="auto" class="left"><span class="locality">Diegem</span></div>
<div dir="auto" class="left"><span class="country-name">Belgium</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:ice@cisco.com" class="email">ice@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Mankamana Mishra</span></div>
<div dir="auto" class="left"><span class="org">Cisco System</span></div>
<div dir="auto" class="left">
<span class="locality">Milpitas</span>,  </div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:mankamis@cisco.com" class="email">mankamis@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Zhaohui Zhang</span></div>
<div dir="auto" class="left"><span class="org">Juniper Networks</span></div>
<div dir="auto" class="left">
<span class="locality">Boston</span>,  </div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:zzhang@juniper.com" class="email">zzhang@juniper.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
