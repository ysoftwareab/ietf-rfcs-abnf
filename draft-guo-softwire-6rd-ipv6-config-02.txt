


softwires WG                                                       X. Xu
Internet-Draft                                                    D. Guo
Intended status: Informational                       Huawei Technologies
Expires: September 15, 2011                                     O. Troan
                                                             W. Townsley
                                                                   Cisco
                                                          March 14, 2011


                     IPv6 Host Configuration in 6rd
               draft-guo-softwire-6rd-ipv6-config-02.txt

Abstract

   The 6rd [RFC5969] linktype does not support IPv6 link-local
   addressing, multicast and 6rd nodes are off-link from each other.
   The host configuration protocol DHCPv6 [RFC3315] relies on link-local
   addressing and multicast to function.  This document specifies how
   DHCPv6 can be used across a 6rd link.

Status of this Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on September 15, 2011.

Copyright Notice

   Copyright (c) 2011 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must



Xu, et al.             Expires September 15, 2011               [Page 1]

Internet-Draft       IPv6 Host Configuration in 6rd           March 2011


   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.


1.  Introduction

   IPv6 rapid deployment on IPv4 infrastructures (6rd) [RFC5969] enables
   a service provider to rapidly deploy IPv6 service to residential
   sites via stateless tunneling across its existing IPv4 network.

   With 6rd, a 6rd CE can provide address assignments to hosts on the
   LAN side, but there is no provision for providing other configuration
   information to hosts on the LAN.

   If only DNS configuration is required on IPv6-only hosts, DNS Proxy
   [RFC5625] mechanism implemented on the 6rd CE would be enough.
   Otherwise, stateless DHCPv6 [RFC3736] SHOULD be supported in 6rd for
   IPv6 hosts to obtain other configuration information besides DNS.

   As specified in the DHCPv6 specification [RFC3315], "...The client
   MUST use a link-local address assigned to the interface for which it
   is requesting configuration information as the source address in the
   header of the IP datagram."  A DHCPv6 client uses the
   All_DHCP_Servers_or_Relays IPv6 multicast address as the destination
   address of requests it sends.  Link-local addresses are not supported
   on 6rd links. 6rd as described in [RFC5969] does not support
   multicast.

   This document describes how DHCPv6 service can be provided across a
   6rd link.


2.  Conventions

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC2119].


3.  DHCPv6 over 6rd links

   There are two problems to be solved with regards to providing DHCPv6
   service over a 6rd link:
   o  A DHCPv6 client uses an IPv6 link-local address as the source
      address when requesting configuration information [RFC3315].
      Link-local addressing is not supported on an 6rd link.




Xu, et al.             Expires September 15, 2011               [Page 2]

Internet-Draft       IPv6 Host Configuration in 6rd           March 2011


   o  A DHCPv6 client sends a request to the
      All_DHCP_Relay_Agent_and_Servers multicast address. 6rd as
      specified in [RFC5969] does not support IPv6 multicast.

   The first problem can be solved by changing the DHCPv6 protocol to
   allow for a global address to be used as the source address in
   requests.  Another solution that does not require protocol changes,
   is to send DHCPv6 requests via a local DHCPv6 relay on the 6rd CE.

   The 6rd CE MUST support a local DHCPv6 client and relay.  The DHCPv6
   client running on the 6rd CE's virtual tunnel interface MUST send
   DHCPv6 messages through a local DHCPv6 relay that encapsulates the
   client message and forwards it to a DHCPv6 server or relay using one
   of the 6rd CE's global unicast addresses as the source address.

   The 6rd CE DHCPv6 relay agent SHOULD use the 6rd BR IPv6 anycast
   address as the destination address, section 20 of [RFC3315].  If the
   6rd link supports multicast [I-D.ietf-mboned-auto-multicast] the 6rd
   CE DHCPv6 relay MAY use the All_DHCP_Servers [RFC3315] as the
   destination address of Relay-forward messages.

   The 6rd BRs in the 6rd domain must be configured as DHCPv6 relays or
   servers on their 6rd virtual interfaces.

   The 6rd CE SHOULD behave according to
   [I-D.ietf-v6ops-ipv6-cpe-router].  In particular it operates a DHCPv6
   client on the WAN side (6rd virtual) interface and as a DHCPv6 server
   on the LAN-side interface(s).


4.  IANA Considerations

   This specification does not require any IANA actions.


5.  Security Considerations

   There are no new security considerations pertaining to this document.


6.  Acknowledgements


7.  References







Xu, et al.             Expires September 15, 2011               [Page 3]

Internet-Draft       IPv6 Host Configuration in 6rd           March 2011


7.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC3315]  Droms, R., Bound, J., Volz, B., Lemon, T., Perkins, C.,
              and M. Carney, "Dynamic Host Configuration Protocol for
              IPv6 (DHCPv6)", RFC 3315, July 2003.

   [RFC3736]  Droms, R., "Stateless Dynamic Host Configuration Protocol
              (DHCP) Service for IPv6", RFC 3736, April 2004.

   [RFC5969]  Townsley, W. and O. Troan, "IPv6 Rapid Deployment on IPv4
              Infrastructures (6rd) -- Protocol Specification",
              RFC 5969, August 2010.

7.2.  Informative References

   [I-D.ietf-mboned-auto-multicast]
              Thaler, D., Talwar, M., Aggarwal, A., Vicisano, L., and T.
              Pusateri, "Automatic IP Multicast Without Explicit Tunnels
              (AMT)", draft-ietf-mboned-auto-multicast-10 (work in
              progress), March 2010.

   [I-D.ietf-v6ops-ipv6-cpe-router]
              Singh, H., Beebee, W., Donley, C., Stark, B., and O.
              Troan, "Basic Requirements for IPv6 Customer Edge
              Routers", draft-ietf-v6ops-ipv6-cpe-router-09 (work in
              progress), December 2010.

   [RFC5625]  Bellis, R., "DNS Proxy Implementation Guidelines",
              BCP 152, RFC 5625, August 2009.


Authors' Addresses

   Xiaohu Xu
   Huawei Technologies
   No.3 Xinxi Rd., Shang-Di Information Industry Base
   Beijing, Hai-Dian District  100085
   P.R. China

   Phone: +86 10 82882573
   Email: xuxh@huawei.com







Xu, et al.             Expires September 15, 2011               [Page 4]

Internet-Draft       IPv6 Host Configuration in 6rd           March 2011


   Dayong Guo
   Huawei Technologies
   No.3 Xinxi Rd., Shang-Di Information Industry Base
   Beijing, Hai-Dian District  100085
   P.R. China

   Phone: +86-10-82882578
   Email: guoseu@huawei.com


   Ole Troan
   Cisco
   Oslo,
   Norway

   Email: ot@cisco.com


   Mark Townsley
   Cisco
   Paris,
   France

   Email: mark@townsley.net



























Xu, et al.             Expires September 15, 2011               [Page 5]

