
    
    Internet Draft                                        Diana Rawlins 
    Expiration: January 2002                                   WorldCom 
    File: draft-ietf-rap-feedback-frwk-00.txt             Amol Kulkarni 
                                                                  Intel 
     
     
                Framework of COPS-PR Policy Usage Feedback 
                        Last Updated July 12, 2001 
                                             
Status of this Memo   
     This document is an Internet-Draft and is in full conformance with 
     all provisions of Section 10 of RFC2026. 
      
     Internet-Drafts are working documents of the Internet Engineering 
     Task Force (IETF), its areas, and its working groups. Note that 
     other groups may also distribute working documents as Internet-
     Drafts.  
      
     Internet-Drafts are draft documents valid for a maximum of six 
     months and may be updated, replaced, or obsoleted by other 
     documents at any time.  It is inappropriate to use Internet-Drafts 
     as reference material or to cite them other than as "work in 
     progress."  
          
     The list of current Internet-Drafts can be accessed at 
     http://www.ietf.org/ietf/1id-abstracts.txt  
          
     The list of Internet-Draft Shadow Directories can be accessed at 
     http://www.ietf.org/shadow.html.  
          
Conventions used in this document      
     The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL 
     NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and 
     "OPTIONAL" in this document are to be interpreted as described in 
     [RFC-2119].  
          
Abstract 
     Common Open Policy Services Protocol [COPS], RFC 2748, defined the 
     capability of reporting information to the PDP. The types of 
     report information are success, failure and accounting of an 
     installed state. This document focuses on the accounting report 
     type and the necessary framework for the monitoring and reporting 
     of usage feedback for an installed state. 










 
Rawlins et al.           Expires January 2002                 [Page 1] 

Internet Draft              COPS-FEED-FRWK                   July 2001 
 
Table of Contents 
 
   1 Introduction.....................................................3 
   2 Overview.........................................................3 
   3 Requirements for Normal Operations...............................3 
   4 Periodic Nature of Policy Usage Feedback.........................4 
   4.1 Reporting Intervals............................................4 
   5 Suspension, Resumption and Halting of Usage Monitoring and 
   Reporting..........................................................4 
   6 Solicited Feedback...............................................5 
   7 Context..........................................................5 
   8 Delete Request States............................................5 
   9 Failover.........................................................5 
   10 Security Considerations.........................................6 
   11 Authors' Addresses..............................................6 
   12 References......................................................6 






































  
Rawlins et al.           Expires January 2002                 [Page 2] 

Internet Draft              COPS-FEED-FRWK                   July 2001 
 
 
1 Introduction 
     Policy usage reported by the PEP makes a richer set of information 
     available to the PDP for decision-making. This report accounting 
     information can impact future decisions made by the PDP and the 
     resulting policy installed by the PDP at the PEP. For example, a 
     PDP making policy for a SIP signaled multimedia session may need 
     to base the decision in part on usage information related to 
     previously installed QoS policy decisions. Furthermore, the PDP 
     may coordinate this usage information with other external systems 
     to determine the future policy such as the case with the PDP 
     coordinating multimedia session QoS and clearinghouse 
     authorizations [SIP-AAA-QOS.] 
      
     The scope of this document is to describe the framework for policy 
     usage monitored and reported by the PEP and collected at the PDP. 
     The charging, rating and billing models as well as other 
     accounting or statistics gathering events detectable by the PDP 
     are beyond the scope of this framework. 
 
 
2 Overview 
    
     There are two aspects to defining policies for usage feedback. One 
     aspect is defining what to monitor and the second is defining what 
     to report. The selection criteria policy specifies the conditions 
     for the monitoring and recording of the associated usage policy. 
     The usage criteria policy class defines what metrics are recorded 
     and reported by the PEP to the PDP in the Report message. For 
     example, a usage policy may be defined to provide counts of 
     packets received. The selection criteria policy may identify the 
     filter on which to base the packet counts. A third policy may be 
     used to associated, or link, the selection and usage policies.  
      
3 Requirements for Normal Operations  
      
     Per [COPS], the PDP specifies the minimum feedback interval in the 
     Accounting Timer object that is included in the Client Accept 
     message during connection establishment. This specifies the 
     maximum frequency with which the PEP issues unsolicited accounting 
     type reports. The purpose of this interval is to pace the number 
     of report messages sent to the PDP. It is not the goal of the 
     interval defined by the ACCT Timer value to provide precision 
     synchronization or timing. 
      
     The selection and usage criteria for feedback reporting are 
     defined by the PDP. Feedback policies, which define the necessary 
     selection and usage criteria, are included by the PDP in a 
     Decision message to the PEP. The usage is then periodically 
     reported by the PEP at intervals no more frequently than specified 
     in the Accounting Timer object, except as noted in the following 
     sections. (There are exceptions where reports containing feedback 
     are provided prior the interval in several cases described in 
     sections 5, 7 and 8.) The PDP may also solicit usage feedback 
  
Rawlins et al.           Expires January 2002                 [Page 3] 

Internet Draft              COPS-FEED-FRWK                   July 2001 
 
     which is to be reported back immediately by the PEP. Usage 
     information may be cleared upon reporting.  This is specified in 
     the usage policy criteria.  
      
     The PEP monitors and tracks the usage information. The PDP is the 
     collection point for the policy usage information reported by the 
     PEP clients within the administrative domain. The PDP may also 
     collect other accounting event information that is outside the 
     scope of this document. 
      
4 Periodic Nature of Policy Usage Feedback 
      
     Generally the accounting policy is periodic in nature and the 
     reporting is unsolicited. The unsolicited reports are supplied per 
     the interval defined by the PDP. The periodic unsolicited reports 
     are dictated by timer intervals and use a deterministic amount of 
     network resources.  
      
     The PDP informs the PEP of the minimal feedback interval during 
     client connection establishment with the Accounting Timer object. 
     The PDP may specify feedback intervals in the specific usage 
     policies as well. The unsolicited monitoring and reporting by the 
     PEP may be suspended and resumed at the direction of the PDP.  
      
4.1 Reporting Intervals 
      
     The PEP must provide usage feedback in the report message on an 
     interval basis. The interval is defined in terms of the Accounting 
     Object, ACCT Timer value. A single interval is equal to the number 
     of seconds specified by the ACCT Timer value. The PDP may define a 
     specific number of intervals, which are to pass before the PEP 
     provides the usage feedback for a specific policy in a report. 
     When the ACCT Timer value is equal to zero there is no unsolicited 
     usage feedback provided by the PEP. However, the PEP still 
     monitors and tracks the usage per the PDP policy and reports it 
     when the PDP solicits the feedback.  
      
     The PDP may solicit usage feedback in the middle of an interval. 
     The PEP shall provide the requested usage information and clear 
     the usage information if the usage policy requires that the 
     attribute be cleared after reporting. The PEP should continue to 
     maintain the same interval schedule as defined by the PDP in the 
     Accounting Timer object and established at client connection 
     acceptance. 
      
      
5 Suspension, Resumption and Halting of Usage Monitoring and Reporting 
      
     The PDP may direct the PEP to suspend usage feedback report 
     messages and then at a later time instruct the PEP to resume the 
     reporting of feedback. The PDP may also instruct the PEP to 
     suspend the monitoring and tracking of usage which also results in 
     the suppression of the feedback reports until the PDP later tells 
     the PEP to resume the monitoring (and reporting). When the PDP 
  
Rawlins et al.           Expires January 2002                 [Page 4] 

Internet Draft              COPS-FEED-FRWK                   July 2001 
 
     suspends monitoring or suspends reporting, it also specifies 
     whether the PEP is to provide an unsolicited feedback report of 
     the current monitored usage of the affected usage policy. The PDP 
     may suspend and resume monitoring and reporting for specific usage 
     policies or for all usage policies.  
      
     Halting of usage monitoring and feedback is done by issuing a 
     Decision Remove of the feedback usage policies. The PEP is to stop 
     any monitoring and reporting associated with the policy 
     immediately. 
      
6 Solicited Feedback 
      
     There may be instances when it is useful for the PDP to control 
     the feedback per an on-demand basis rather than a periodic basis. 
     The PDP may solicit the PEP for usage feedback with a Decision. 
     The PDP may solicit usage feedback at any time during the 
     accounting interval defined by the ACCT Timer. The PEP responds 
     immediately and reports the appropriate usage policies and should 
     continue to follow the usage feedback interval schedule 
     established during connection acceptance.  
      
7 Context 
      
     The monitoring and recording of usage policies is subject to 
     context switches in a manner similar to that of the enforcement 
     policy. Usage policy is monitored, recorded and reported while the 
     associated policy information context is active. When the context 
     is deactivated a report containing the usage policies for that 
     context is provided to the PDP. The PEP does not perform any 
     monitoring, tracking or reporting of policy usage for a given 
     context while the context is inactive. 
      
8 Delete Request States 
      
     The PEP must send any outstanding usage data monitored during the 
     feedback interval to the PDP via an unsolicited report immediately 
     prior to issuing a Delete Request State. This is also the case 
     when the PDP initiates the Delete Request State. 
      
9 Failover  
      
     In the event the connection is lost between the PEP and PDP, the 
     PEP continues to track usage information as long as it continues 
     to enforce installed (cached) policy. When the locally installed 
     policy at the PEP expires, the usage policy data also expires and 
     is no longer monitored. 
      
     Upon successful reconnection where the PEP is still caching 
     policy, the PDP indicates deterministically to the PEP that the 
     PEP may resume usage feedback reporting. The PEP reports all 
     cached usage and resumes periodic reporting making any needed 
     adjustment to the interval schedule as specified in the 
     reconnection acceptance ACCT Timer. 
  
Rawlins et al.           Expires January 2002                 [Page 5] 

Internet Draft              COPS-FEED-FRWK                   July 2001 
 
       
10 Security Considerations  
        
     The feedback information is sensitive and requires that authorized 
     messaging occur between the PEP and the PDP. This protection can 
     be accomplished with IPSEC between the PEP and the PDP or using 
     the security mechanisms described in the base COPS protocol. 
      
      
11 Authors' Addresses   
        
      Diana Rawlins  
      WorldCom  
      901 International Parkway  
      Richardson, Texas 75081  
      Phone: 972-729-1044  
      Email: Diana.Rawlins@wcom.com 
        
      Amol Kulkarni  
      JF3-206           
      2111 NE 25th Ave  
      Hillsboro, Oregon 97124  
      Phone: 503-712-1168 
      Email: amol.kulkarni@intel.com  
      
 
      
12 References 
      
      
     [COPS] Boyle, J., Cohen, R., Durham, D., Herzog, S., Rajan, R., 
     and A. Sastry, "The COPS (Common Open Policy Service) Protocol" 
     RFC 2748, January 2000. 
      
     [SIP-AAA-QOS] Gross, G.,Sinnreich, H. Rawlins D., Havinis, T. " QoS 
     and AAA Usage with SIP Based IP Communications" draft-gross-sipaq-
     00.txt, November 2000.  
      
















  
Rawlins et al.           Expires January 2002                 [Page 6] 
