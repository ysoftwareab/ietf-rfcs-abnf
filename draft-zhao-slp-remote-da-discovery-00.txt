





INTERNET DRAFT                                            Weibin Zhao
draft-zhao-slp-remote-da-discovery-00.txt         Henning Schulzrinne
July 13, 2001                                     Columbia University
Expires: January 13, 2002                         Chatschik Bisdikian
                                                       William Jerome
                                                                  IBM


                Remote Directory Agent Discovery in SLP


Status of This Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet- Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

Copyright Notice

   Copyright (C) The Internet Society (2001).  All Rights Reserved.

Abstract

   This document presents a lightweight method for remote Directory
   Agent (DA) discovery in the Service Location Protocol (SLP), which
   enables User Agents (UAs) to discover services in remote domains. A
   UA first makes a DNS query for SRV records of SLP DA service to get a
   list of DAs in a remote domain, then the UA obtains DAAdverts of all
   remote DAs via a single "service:directory-agent:all" Service Request
   (SrvRqst) or via multiple "service:directory-agent" SrvRqsts. Thus,
   the UA can discover remote services by querying remote DAs via
   unicast in the same way as it does in the local domain.




Zhao, et al.            Expires: January 13, 2002               [Page 1]

Internet Draft          SLP Remote DA Discovery            July 13, 2001


1. Introduction

   The Service Location Protocol (SLP [1]) provides a lightweight
   mechanism for service discovery within one administrative domain. A
   User Agent (UA) discovers a desired service by multicasting the
   Service Request (SrvRqst) to Service Agents (SAs) or unicasting the
   SrvRqst to a Directory Agent (DA). The local DA discovery is achieved
   via static configuration, DHCP [2], listening to DAAdvert multicast
   (passive DA discovery), or multicasting the "service:directory-agent"
   SrvRqst (active DA discovery).

   SLP is designed for local service discovery in an intranet - it does
   not aim for being used in the global Internet. However, beyond local
   domain, SLP can also be used for discovering services in a remote
   domain where the key issue is how to discover DAs in a remote domain.
   Currently, the mapping of a domain (such as example.com) to its SLP
   DAs (such as da1.example.com and da2.example.com) has not been
   standardized.

   In this document, we present a lightweight method for remote DA
   discovery in SLP, which enables UAs to discover services in remote
   domains. A UA first makes a DNS query [3] for SRV [4] records of SLP
   DA service to get a list of DAs in a remote domain, then the UA
   obtains DAAdverts of all remote DAs via a single "service:directory-
   agent:all" SrvRqst or via multiple "service:directory-agent"
   SrvRqsts. Thus, the UA can discover remote services by querying
   remote DAs via unicast in the same way as it does in the local
   domain.

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [5].

2. Remote DA Discovery via DNS SRV

   One way to enable remote users to discover DAs in a domain is to
   store DA URLs within the domain using DNS SRV records. The name of
   the DNS SRV record for SLP DA service has the following format:

       _slpda._<protocol>.<domain>

   where <protocol> is either "tcp" or "udp", and <domain> is a domain
   name (such as example.com). Note that "slpda" is the symbolic name
   for SLP DA service in Assigned Numbers [6], as required by [4].

   For instance, if a UA wants to discover remote DAs at example.com,
   the UA makes standard DNS query [3] for SRV records of SLP DA service
   using the name:



Zhao, et al.            Expires: January 13, 2002               [Page 2]

Internet Draft          SLP Remote DA Discovery            July 13, 2001


       _slpda._tcp.example.com

   or
       _slpda._udp.example.com

   then the UA will receive a list of SRV records, which matches the
   query, from a DNS reply, such as:

       _slpda._tcp.example.com  IN  SRV  0 0 427 da1.example.com
       _slpda._tcp.example.com  IN  SRV  0 0 427 da2.example.com

   or

       _slpda._udp.example.com  IN  SRV  0 0 427 da1.example.com
       _slpda._udp.example.com  IN  SRV  0 0 427 da2.example.com

3. Retrieving DAAdverts of All DAs in a Remote Domain

   After a UA gets a list of DAs in a remote domain from DNS, the UA
   needs to obtain DAAdverts of all DAs in the remote domain to get
   their scope and attribute information.

   In SLPv2, the DAAdvert of a DA can be solicited by sending a
   "service:directory-agent" SrvRqst to the DA. Thus, to get all
   DAAdverts, the UA needs to unicast a "service:directory-agent"
   SrvRqst to each DA in the DA list obtained from DNS. This method is
   heavyweight as it needs to put all DA URLs within a domain into DNS
   to enable the DAs being discovered by remote users, and when DA URLs
   are changed, the corresponding DNS entries also need to be updated.

   A more lightweight and efficient way for a UA to obtain DAAdverts of
   all DAs in a remote domain is to use a special service type called
   "service:directory-agent:all" in the SrvRqst message. A
   "service:directory-agent:all" SrvRqst asks the receiving DA to return
   all matched DAAdverts the DA knows, not only the DA its own DAAdvert.

   To support the "service:directory-agent:all" SrvRqst, a DA needs to
   maintain a DAAdvert table for all DAs in its domain. As DAs multicast
   their DAAdverts periodically, a DA can easily get DAAdverts of other
   DAs in its domain. By using DAs that support the "service:directory-
   agent:all" SrvRqst, only a few such DAs (for reliability reason) need
   to be put into DNS.

   In summary, to get DAAdverts of all DAs in a remote domain, a UA
   SHOULD first unicast a "service:directory-agent:all" SrvRqst to any
   DA in the DA list obtained from DNS. If the UA receives an error from
   the DA indicating the "service:directory-agent:all" SrvRqst is not
   supported, then the UA has to use the "service:directory-agent"



Zhao, et al.            Expires: January 13, 2002               [Page 3]

Internet Draft          SLP Remote DA Discovery            July 13, 2001


   SrvRqst to get DAAdvert individually from each DA in the DA list
   obtained from DNS.

4. Example

   Consider the following example. Professor X is planning his first
   visit to University Y, and all services (such as video projectors and
   printers) at University Y are maintained by SLP DAs. If Professor X
   wants to learn the available services at University Y before leaving,
   he needs to first discover DAs at University Y, then query the DAs.

   The steps for Professor X to discover services at University Y (a
   remote domain) are as follows. First, he makes a DNS query for SRV
   records of SLP DA service at University Y, and gets a DA list.
   Second, he contacts one DA in the DA list obtained from DNS by
   issuing a "service:directory-agent:all" SrvRqst. If he succeeds, he
   will get DAAdverts of all DAs at University Y. Otherwise, he has to
   unicast a "service:directory-agent" SrvRqst individually to each DA
   in the DA list obtained from DNS. Third, he queries remote DAs at
   University Y via unicast to discover desired services.

5. Security Considerations

   To enable remote DA discovery and remote service discovery, local
   domain information is exposed to external users. Thus, security
   control is more important to protect valuable service information.
   Standard SLP authentication mechanism SHOULD be used.

   As this document describes a method for remote SLP DA discovery via
   the DNS SRV record, the security considerations for the DNS SRV
   record are inherited by this document.

6. References

   [1] E. Guttman, C. Perkins, J. Veizades and M. Day, "Service location
       protocol, version 2", RFC 2608, June 1999.

   [2] C. Perkins and E. Guttman, "DHCP options for service location
       protocol", RFC 2610, June, 1999.

   [3] P. Mockapetris, "Domain Names - Concepts and Facilities", STD
       13, RFC 1034, November 1987.

   [4] A. Gulbrandsen, P. Vixie and L. Esibov, "A DNS RR for specifying
       the location of services (DNS SRV)", RFC 2782, February 2000.

   [5] S. Bradner, "Key words for use in RFCs to indicate requirement
       levels", BCP 14, RFC 2119, March 1997.



Zhao, et al.            Expires: January 13, 2002               [Page 4]

Internet Draft          SLP Remote DA Discovery            July 13, 2001


   [6] J. Reynolds and J. Postel, "Assigned Numbers", STD 2, RFC 1700,
       October 1994.

7. Authors' Addresses

   Weibin Zhao
   Henning Schulzrinne
   Department of Computer Science
   Columbia University
   1214 Amsterdam Avenue, MC 0401
   New York, NY 10027-7003
   Email: {zwb,hgs}@cs.columbia.edu

   Chatschik Bisdikian
   William F. Jerome
   IBM T. J. Watson Research Center
   P.O.Box 218
   Yorktown Heights, NY 10598-0218
   Email: {bisdik,wfj}@us.ibm.com

8. Full Copyright Statement

   Copyright (C) The Internet Society (2001).  All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works.  However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assigns.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.




Zhao, et al.            Expires: January 13, 2002               [Page 5]
