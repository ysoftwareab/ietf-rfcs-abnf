<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>RTP Payload Format and File Storage Format for Opus Speech and Audio Codec </title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Conventions, Definitions and Acronyms used in this document">
<link href="#rfc.section.3" rel="Chapter" title="3 Opus Codec">
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 Modes">
<link href="#rfc.section.3.1.1" rel="Chapter" title="3.1.1 Audio Mode">
<link href="#rfc.section.3.1.2" rel="Chapter" title="3.1.2 Audio Mode">
<link href="#rfc.section.3.2" rel="Chapter" title="3.2 Network Bandwidth">
<link href="#rfc.section.3.2.1" rel="Chapter" title="3.2.1 Variable versus Constant Bit Rate">
<link href="#rfc.section.3.2.2" rel="Chapter" title="3.2.2 Discontinuous Transmission (DTX)">
<link href="#rfc.section.3.3" rel="Chapter" title="3.3 Complexity">
<link href="#rfc.section.3.4" rel="Chapter" title="3.4 Forward Error Correction (FEC)">
<link href="#rfc.section.3.5" rel="Chapter" title="3.5 Stereo Operation">
<link href="#rfc.section.4" rel="Chapter" title="4 Opus RTP Payload Format">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 RTP Header Usage">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Payload Structure">
<link href="#rfc.section.5" rel="Chapter" title="5 Opus Storage Format">
<link href="#rfc.section.5.1" rel="Chapter" title="5.1 Storage Header Structure">
<link href="#rfc.section.5.2" rel="Chapter" title="5.2 Storage Block Structure">
<link href="#rfc.section.6" rel="Chapter" title="6 Congestion Control">
<link href="#rfc.section.7" rel="Chapter" title="7 IANA Considerations">
<link href="#rfc.section.7.1" rel="Chapter" title="7.1 Opus Media Type Registration">
<link href="#rfc.section.7.2" rel="Chapter" title="7.2 Mapping to SDP Parameters">
<link href="#rfc.section.7.2.1" rel="Chapter" title="7.2.1 Offer-Answer Model Considerations for Opus">
<link href="#rfc.section.7.2.2" rel="Chapter" title="7.2.2 Declarative SDP Considerations for Opus">
<link href="#rfc.section.8" rel="Chapter" title="8 Security Considerations">
<link href="#rfc.section.9" rel="Chapter" title="9 Acknowledgements">
<link href="#rfc.references" rel="Chapter" title="10 References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="This document defines the Real-time Transport Protocol (RTP) payload format and file storage format for packetization of Opus encoded speech and audio data that is essential to integrate the codec in the most compatible way. Further, media type registrations are described for the RTP payload format and the file storage format.  " />
  <meta name="description" content="This document defines the Real-time Transport Protocol (RTP) payload format and file storage format for packetization of Opus encoded speech and audio data that is essential to integrate the codec in the most compatible way. Further, media type registrations are described for the RTP payload format and the file storage format.  " />
  <meta name="keywords" content="" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Network Working Group</td>
<td class="right">J. Spittka</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">K. Vos</td>
</tr>
<tr>
<td class="left">Intended status: Informational</td>
<td class="right">Skype Technologies S.A.</td>
</tr>
<tr>
<td class="left">Expires: January 02, 2012</td>
<td class="right">JM. Valin</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Octasic Inc.</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">July 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">RTP Payload Format and File Storage Format for Opus Speech and Audio Codec <br />
  <span class="filename">draft-spittka-payload-rtp-opus-00.xml</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This document defines the Real-time Transport Protocol (RTP) payload format and file storage format for packetization of Opus encoded speech and audio data that is essential to integrate the codec in the most compatible way. Further, media type registrations are described for the RTP payload format and the file storage format.  </p>
<p>The IETF has been notified of intellectual property rights claimed in regard to some or all of the specification contained in this document.  For more information consult the online list of claimed rights.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on January 02, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Conventions, Definitions and Acronyms used in this document</a>
</li>
<li>3.   <a href="#rfc.section.3">Opus Codec</a>
</li>
<li>3.1.   <a href="#rfc.section.3.1">Modes</a>
</li>
<li>3.1.1.   <a href="#rfc.section.3.1.1">Audio Mode</a>
</li>
<li>3.1.2.   <a href="#rfc.section.3.1.2">Audio Mode</a>
</li>
<li>3.2.   <a href="#rfc.section.3.2">Network Bandwidth</a>
</li>
<li>3.2.1.   <a href="#rfc.section.3.2.1">Variable versus Constant Bit Rate</a>
</li>
<li>3.2.2.   <a href="#rfc.section.3.2.2">Discontinuous Transmission (DTX)</a>
</li>
<li>3.3.   <a href="#rfc.section.3.3">Complexity</a>
</li>
<li>3.4.   <a href="#rfc.section.3.4">Forward Error Correction (FEC)</a>
</li>
<li>3.5.   <a href="#rfc.section.3.5">Stereo Operation</a>
</li>
<li>4.   <a href="#rfc.section.4">Opus RTP Payload Format</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">RTP Header Usage</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">Payload Structure</a>
</li>
<li>5.   <a href="#rfc.section.5">Opus Storage Format</a>
</li>
<li>5.1.   <a href="#rfc.section.5.1">Storage Header Structure</a>
</li>
<li>5.2.   <a href="#rfc.section.5.2">Storage Block Structure</a>
</li>
<li>6.   <a href="#rfc.section.6">Congestion Control</a>
</li>
<li>7.   <a href="#rfc.section.7">IANA Considerations</a>
</li>
<li>7.1.   <a href="#rfc.section.7.1">Opus Media Type Registration</a>
</li>
<li>7.2.   <a href="#rfc.section.7.2">Mapping to SDP Parameters</a>
</li>
<li>7.2.1.   <a href="#rfc.section.7.2.1">Offer-Answer Model Considerations for Opus</a>
</li>
<li>7.2.2.   <a href="#rfc.section.7.2.2">Declarative SDP Considerations for Opus</a>
</li>
<li>8.   <a href="#rfc.section.8">Security Considerations</a>
</li>
<li>9.   <a href="#rfc.section.9">Acknowledgements</a>
</li>
<li>10.   <a href="#rfc.references">References</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">The Opus codec is a speech and audio codec developed within the IETF Internet Wideband Audio Codec working group [codec]. The codec has a very low algorithmic delay and is is highly scalable in terms of audio bandwidth, network bit rate, and complexity. Further, it provides different modes to efficiently encode speech signals as well as music signals, thus, making it the codec of choice for various applications using the Internet or similar networks.  </p>
<p id="rfc.section.1.p.2">This document defines the Real-time Transport Protocol (RTP) <a href="#RFC3550">[RFC3550]</a> payload format and file storage format for packetization of Opus encoded speech and audio data that is essential to integrate the Opus codec in the most compatible way. Further, media type registrations are described for the RTP payload format and the file storage format. More information on the Opus codec can be obtained from the following IETF draft [Opus].  </p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> Conventions, Definitions and Acronyms used in this document</h1>
<p id="rfc.section.2.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">[RFC2119]</a>.</p>
<p></p>

<dl>
<dt>CPU:</dt>
<dd style="margin-left: 8">Central Processing Unit</dd>
<dt>IP:</dt>
<dd style="margin-left: 8">Internet Protocol</dd>
<dt>PSTN:</dt>
<dd style="margin-left: 8">Public Switched Telephone Network</dd>
<dt>samples:</dt>
<dd style="margin-left: 8">Speech or audio samples</dd>
<dt>SDP:</dt>
<dd style="margin-left: 8">Session Description Protocol</dd>
</dl>

<p> </p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> Opus Codec</h1>
<p id="rfc.section.3.p.1">The Opus speech and audio codec has been developed to encode speech signals as well as audio signals. Two different modes, a voice mode or an audio mode, may be chosen to allow the most efficient coding dependent on the type of input signal, the sampling frequency of the input signal, and the specific application.  </p>
<p id="rfc.section.3.p.2">The voice mode allows to efficiently encode voice signals at lower bit rates while the audio mode is optimized for audio signals at medium and higher bit rates.  </p>
<p id="rfc.section.3.p.3">The Opus speech and audio codec is highly scalable in terms of audio bandwidth, network bit rate, and complexity. Further, Opus allows to transmit stereo signals.  </p>
<p id="rfc.section.3.p.4">The Opus speech and audio codec is based on the SILK codec [SILK] and the CELT codec [CELT]. For more detailed information on how Opus operates, also refer to [Opus].  </p>
<h1 id="rfc.section.3.1">
<a href="#rfc.section.3.1">3.1.</a> Modes</h1>
<p id="rfc.section.3.1.p.1">Opus supports five different audio bandwidths, 8000, 12000, 16000, 24000, and 48000 Hz sampling frequency, for the voice mode and four different audio bandwidths, 8000, 16000, 24000, and 48000 Hz sampling frequency, for the audio mode.  </p>
<h1 id="rfc.section.3.1.1">
<a href="#rfc.section.3.1.1">3.1.1.</a> Audio Mode</h1>
<p id="rfc.section.3.1.1.p.1">For low bit rate applications transmitting mostly speech signals the voice mode of Opus SHOULD be used. The voice mode allows to encode voice signals at 8000, 12000, 16000, 24000, and 48000 Hz sampling frequency.  </p>
<p id="rfc.section.3.1.1.p.2">A sampling rate of 8000 Hz SHOULD only be used to interface to PSTN networks or on low end devices that do not support greater than 8000 Hz sampling frequency. A sampling rate of 12000 Hz SHOULD be used for lower end devices that do not support greater than 12000 Hz sampling frequency or are under severe network bandwidth constrains (e.g. wireless devices). A sampling rate of 16000 Hz SHOULD be used for all-IP platforms that do not support greater than 16000 Hz sampling frequency. Higher sampling rates are recommended for all devices that support those high sampling rates and desire full-bandwidth speech at medium bit rates.  </p>
<h1 id="rfc.section.3.1.2">
<a href="#rfc.section.3.1.2">3.1.2.</a> Audio Mode</h1>
<p id="rfc.section.3.1.2.p.1">For applications desiring very low delay speech transmission as well as music transmission in trade off to a higher bit rate, the audio mode SHOULD be used. This mode supports audio sampling rates of 8000, 16000, 24000, and 48000 Hz.  </p>
<h1 id="rfc.section.3.2">
<a href="#rfc.section.3.2">3.2.</a> Network Bandwidth</h1>
<p id="rfc.section.3.2.p.1">The network bit rate is adaptive within the range specified in <a href="#bitrate_by_bandwidth">Table 1</a> for corresponding modes and audio sampling rates. The average target network bit rate can be defined and modified in real-time while the actual bit rate will be dependent on the settings of Opus and the input signal and may change over time.  </p>
<div id="#rfc.table.1"></div>
<div id="#bitrate_by_bandwidth"></div>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="center">Mode</th>
<th class="center">fs (Hz)</th>
<th class="center">BR (kbps)</th>
</tr></thead>
<tbody>
<tr>
<td class="center">voice</td>
<td class="center">8000</td>
<td class="center">6 - 20</td>
</tr>
<tr>
<td class="center">voice</td>
<td class="center">12000</td>
<td class="center">7 - 25</td>
</tr>
<tr>
<td class="center">voice</td>
<td class="center">16000</td>
<td class="center">8 - 30</td>
</tr>
<tr>
<td class="center">voice</td>
<td class="center">24000</td>
<td class="center">18 - 28</td>
</tr>
<tr>
<td class="center">voice</td>
<td class="center">48000</td>
<td class="center">24 - 32</td>
</tr>
<tr>
<td class="center">audio</td>
<td class="center">8000</td>
<td class="center">20 - 28</td>
</tr>
<tr>
<td class="center">audio</td>
<td class="center">16000</td>
<td class="center">24 - 32</td>
</tr>
<tr>
<td class="center">audio</td>
<td class="center">24000</td>
<td class="center">28 - 40</td>
</tr>
<tr>
<td class="center">audio</td>
<td class="center">48000</td>
<td class="center">32 - 128</td>
</tr>
</tbody>
</table>
<p>Mode specifies the Opus mode of operation; fs specifies the audio sampling frequency in Hertz (Hz); BR specifies the network bit rate range in kilobits per second (kbps).  </p>
<h1 id="rfc.section.3.2.1">
<a href="#rfc.section.3.2.1">3.2.1.</a> <a href="#variable-vs-constant-bitrate" id="variable-vs-constant-bitrate">Variable versus Constant Bit Rate</a>
</h1>
<p id="rfc.section.3.2.1.p.1">The voice mode will always use a variable bit rate at audio sampling rates of 8000, 12000, and 16000 Hz. The average target bit rate can be adjusted at any point in time. To avoid congestion of the connection the average target bit rate SHOULD be adjusted to the available network bandwidth. If no target bit rate is specified the average bit rate may go up to the highest bit rate specified in <a href="#bitrate_by_bandwidth">Table 1</a>.  </p>
<p id="rfc.section.3.2.1.p.2">In voice mode at audio sampling rates higher than 16000 Hz, i.e. 24000, and 48000 Hz, and audio mode Opus can be operated in both variable and constant bit rate. The target bit rate can be adjusted at any point in time.  </p>
<h1 id="rfc.section.3.2.2">
<a href="#rfc.section.3.2.2">3.2.2.</a> Discontinuous Transmission (DTX)</h1>
<p id="rfc.section.3.2.2.p.1">The Opus codec may, as described in <a href="#variable-vs-constant-bitrate">Section 3.2.1</a>, be operated with an adaptive bit rate. In that case, the bit rate will automatically be reduced for certain input signals like periods of silence. During continuous transmission the bit rate will be reduced, when the input signal allows to do so, but the transmission to the receiver itself will never be interrupted. Therefore, the received signal will maintain the same high level of quality over the full duration of a transmission while minimizing the average bit rate over time.  </p>
<p id="rfc.section.3.2.2.p.2">In cases where the bit rate of Opus needs to be reduced even further or in cases where only constant bit rate is available, the Opus encoder may be set to use discontinuous transmission (DTX), where parts of the encoded signal that correspond to periods of silence in the input speech or audio signal are not transmitted to the receiver.  </p>
<p id="rfc.section.3.2.2.p.3">On the receiving side, the non-transmitted parts will be handled by a frame loss concealment unit in the Opus decoder which generates a comfort noise signal to replace the non transmitted parts of the speech or audio signal.  </p>
<p id="rfc.section.3.2.2.p.4">The DTX mode of Opus will have a slightly lower speech or audio quality than the continuous mode. Therefore, it is RECOMMENDED to use Opus in the continuous mode unless restraints on network bandwidth are severe. The DTX mode can be engaged for operation in both adaptive or constant bit rate.  </p>
<h1 id="rfc.section.3.3">
<a href="#rfc.section.3.3">3.3.</a> Complexity</h1>
<p id="rfc.section.3.3.p.1">Complexity can be scaled to optimize for CPU resources in real-time, mostly in trade-off to network bit rate. Also, different modes of Opus have different complexity.  </p>
<h1 id="rfc.section.3.4">
<a href="#rfc.section.3.4">3.4.</a> Forward Error Correction (FEC)</h1>
<p id="rfc.section.3.4.p.1">The voice mode of Opus allows for "in-band" forward error correction (FEC) data to be embedded into the bit stream of Opus. This FEC scheme adds redundant information about the previous packet (n-1) to the current output packet n. For each frame, the encoder decides whether to use FEC based on (1) an externally-provided estimate of the channel's packet loss rate; (2) an externally-provided estimate of the channel's capacity; (3) the sensitivity of the audio or speech signal to packet loss; (4) whether the receiving decoder has indicated it can take advantage of "in-band" FEC information. The decision to send "in-band" FEC information is entirely controlled by the encoder and therefore no special precautions for the payload or storage format have to be taken.  </p>
<p id="rfc.section.3.4.p.2">On the receiving side, the decoder can take advantage of this additional information when, in case of a packet loss, the next packet is available.  In order to use the FEC data, the jitter buffer needs to provide access to payloads with the FEC data.  The decoder API function has a flag to indicate that a FEC frame rather than a regular frame should be decoded.  If no FEC data is available for the current frame, the decoder will consider the frame lost and invokes the frame loss concealment.  </p>
<p id="rfc.section.3.4.p.3">If the FEC scheme is not implemented on the receiving side, FEC SHOULD NOT be used, as it leads to an inefficient usage of network bandwidth. Decoder support for FEC SHOULD be indicated at the time a session is set up.  </p>
<h1 id="rfc.section.3.5">
<a href="#rfc.section.3.5">3.5.</a> Stereo Operation</h1>
<p id="rfc.section.3.5.p.1">Opus allows for transmission of stereo audio signals. This operation will be signaled in the Opus payload and no special arrangements have to be made in the payload format. Any implementation of the Opus decoder MUST be capable to receive stereo signals.  </p>
<p id="rfc.section.3.5.p.2">If a decoder can not take advantage of the benefits of a stereo signal this SHOULD be indicated at the time a session is set up. In that case the sending side SHOULD NOT send stereo signals as it leads to an inefficient usage of network bandwidth.  </p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#opus-rtp-payload-format" id="opus-rtp-payload-format">Opus RTP Payload Format</a>
</h1>
<p id="rfc.section.4.p.1">The payload format for Opus consists of the RTP header and Opus payload data.</p>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> RTP Header Usage</h1>
<p id="rfc.section.4.1.p.1">The format of the RTP header is specified in <a href="#RFC3550">[RFC3550]</a>. The Opus payload format uses the fields of the RTP header consistent with this specification.</p>
<p id="rfc.section.4.1.p.2">The payload length of Opus is a multiple number of octets and therefore no padding is required. The payload MAY be padded by an integer number of octets according to <a href="#RFC3550">[RFC3550]</a>.</p>
<p id="rfc.section.4.1.p.3">The marker bit (M) of the RTP header has no function in combination with Opus and MAY be ignored.</p>
<p id="rfc.section.4.1.p.4">The RTP payload type for Opus has not been assigned statically and is expected to be assigned dynamically.</p>
<p id="rfc.section.4.1.p.5">The receiving side MUST be prepared to receive duplicates of RTP packets. Only one of those payloads MUST be provided to the Opus decoder for decoding and others MUST be discarded.</p>
<p id="rfc.section.4.1.p.6">Opus supports 5 different sampling rates which may be adjusted during the duration of a call. The RTP timestamp clock frequency is defined as the highest supported sampling frequency of Opus, i.e. 48000 Hz, for all modes and sampling rates of Opus. The unit for the timestamp is samples. The RTP timestamp corresponds to the sample time of the first encoded sample in the encoded frame. For sampling rates lower than 48000 Hz the number of samples has to be multiplied with a multiplier according to <a href="#fs-upsample-factors">Table 2</a> to determine the RTP timestamp.</p>
<div id="#rfc.table.2"></div>
<div id="#fs-upsample-factors"></div>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="center">fs (Hz)</th>
<th class="center">Multiplier</th>
</tr></thead>
<tbody>
<tr>
<td class="center">8000</td>
<td class="center">6</td>
</tr>
<tr>
<td class="center">12000</td>
<td class="center">4</td>
</tr>
<tr>
<td class="center">16000</td>
<td class="center">3</td>
</tr>
<tr>
<td class="center">24000</td>
<td class="center">2</td>
</tr>
<tr>
<td class="center">48000</td>
<td class="center">1</td>
</tr>
</tbody>
</table>
<p>fs specifies the audio sampling frequency in Hertz (Hz); Multiplier is the value that the number of samples have to be multiplied with to calculate the RTP timestamp.  </p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> Payload Structure</h1>
<p id="rfc.section.4.2.p.1">The Opus encoder can be set to output encoded frames representing 2.5, 5, 10, 20, 40, or 60 ms of speech or audio data. Further, an arbitrary number of frames can be combined into a packet. The maximum packet length is limited to the amount of encoded data representing 120 ms of speech or audio data. The packetization of encoded data is purely done by the Opus encoder and therefore only one packet output from the Opus encoder MUST be used as a payload.  </p>
<p><a href="#payload-structure">Figure 1</a> shows the structure combined with the RTP header.</p>
<div id="#rfc.figure.1"></div>
<div id="#payload-structure"></div>
<pre>
            
+----------+--------------+
|RTP Header| Opus Payload |
+----------+--------------+
           
          </pre>
<p><a href="#opus-packetization">Table 3</a> shows supported frame sizes for different modes and sampling rates of Opus and how the timestamp needs to be incremented for packetization.  </p>
<div id="#rfc.table.3"></div>
<div id="#opus-packetization"></div>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="center">Mode</th>
<th class="center">fs</th>
<th class="center">2.5</th>
<th class="center">5</th>
<th class="center">10</th>
<th class="center">20</th>
<th class="center">40</th>
<th class="center">60</th>
</tr></thead>
<tbody>
<tr>
<td class="center">ts incr</td>
<td class="center">all</td>
<td class="center">120</td>
<td class="center">240</td>
<td class="center">480</td>
<td class="center">960</td>
<td class="center">1920</td>
<td class="center">2880</td>
</tr>
<tr>
<td class="center">voice</td>
<td class="center">8000/12000/16000/24000/48000</td>
<td class="center"></td>
<td class="center"></td>
<td class="center">x</td>
<td class="center">x</td>
<td class="center">x</td>
<td class="center">x</td>
</tr>
<tr>
<td class="center">audio</td>
<td class="center">8000/16000/24000/48000</td>
<td class="center">x</td>
<td class="center">x</td>
<td class="center">x</td>
<td class="center">x</td>
<td class="center"></td>
<td class="center"></td>
</tr>
</tbody>
</table>
<p>Mode specifies the Opus mode of operation; fs specifies the audio sampling frequency in Hertz (Hz); 2.5, 5, 10, 20, 40, and 60 represent the duration of encoded speech or audio data in a packet; ts incr specifies the value the timestamp needs to be incremented for the representing packet size.  For multiple frames in a packet these values have to be multiplied with the respective number of frames.  </p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#opus-storage-format" id="opus-storage-format">Opus Storage Format</a>
</h1>
<p id="rfc.section.5.p.1">The Opus storage format allows to store Opus encoded data into e.g. a file or an email attachment. The storage format consists of a header and a series of blocks containing encoded speech or audio frames. The storage format closely mimics the real-time payload format and allows to easily convert packets, e.g. received by a voicemail system, into a storage format and vice versa and therefore allowing maximum flexibility and low overhead.  Please note that this storage format is not meant to be a robust storage format, nor the most efficient storage format. For a robust storage format that allows advanced functionality like e.g. seeking,  a more advanced container format should be used.</p>
<p><a href="#opus-storage-format-figure">Figure 2</a> shows an example of an Opus encoded file. Note that due to the potentially adaptive bit rate the packet length may be variable and no fixed block size can be defined for blocks containing encoded data.</p>
<div id="#rfc.figure.2"></div>
<div id="#opus-storage-format-figure"></div>
<pre>
+------------------+
| Header           |
+-----------+------+
| block 1   |
+-----------+--+
| block 2      |
+--------------+--+
: ...             :
+--------------+--+
| block n         |
+-----------------+
           </pre>
<h1 id="rfc.section.5.1">
<a href="#rfc.section.5.1">5.1.</a> Storage Header Structure</h1>
<p id="rfc.section.5.1.p.1">An Opus storage header contains the following ASCII character string as a magic number:</p>
<p id="rfc.section.5.1.p.2">"#!opus\n" (hexadecimal: 0x23 0x21 0x6f 0x70 0x75 0x73 0x0A)</p>
<h1 id="rfc.section.5.2">
<a href="#rfc.section.5.2">5.2.</a> Storage Block Structure</h1>
<p id="rfc.section.5.2.p.1">Following the storage header, blocks of encoded data are stored in consecutive order in time according to <a href="#opus-storage-format-figure">Figure 2</a>. Each block contains a block header followed by a payload according to <a href="#storage-block-header">Figure 3</a>.</p>
<p id="rfc.section.5.2.p.2">The block header contains information that, for an RTP-based session, can be derived from the IP and RTP headers: The number of octets contained in the subsequent payload and the RTP timestamp.</p>
<p id="rfc.section.5.2.p.3">The number of octets in the payload is represented by 16 bits and the timestamp is specified by 32 bits. For the first block, the timestamp MAY be a random number. For the following blocks, the timestamp MUST be incremented according to the way timestamps are incremented when Opus payloads are transmitted over RTP.</p>
<div id="#rfc.figure.3"></div>
<div id="#storage-block-header"></div>
<pre>
0                   16                           48
+-------------------+----------------------------+-----------------
|    # of octets    |        Timestamp           |  Payload
+-------------------+----------------------------+-----------------
           </pre>
<p id="rfc.section.5.2.p.4">The payload of each block in <a href="#opus-storage-format-figure">Figure 2</a> represents one packet of Opus encoded data the way as originally encoded by the Opus encoder.  Information about frame size representing the duration of encoded speech or audio data, number of encoded frames, stereo information, and DTX is embedded into the payload of Opus and not subject to the storage format. It can be extracted from the payload during decoding of the encoded data.</p>
<p id="rfc.section.5.2.p.5">During the usage of DTX no blocks are stored when the channel is inactive. Timestamps MUST be used to reassemble the decoded signal in a time-aligned way.</p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> Congestion Control</h1>
<p id="rfc.section.6.p.1">The adaptive nature of the Opus codec allows for an efficient congestion control.</p>
<p id="rfc.section.6.p.2">The voice mode of Opus at audio sampling rates of 8000, 12000, and 16000 always runs with a variable bit rate. The average bit rate in that mode is dependent on the input signal and will especially decrease during silent periods. The voice mode at audio sampling rates of 24000 and 48000 Hz and the audio mode may run at a variable or constant bit rate. In either way, the target bit rate of Opus can be adjusted at any point in time and thus allowing for an efficient congestion control.</p>
<p id="rfc.section.6.p.3">Furthermore, the amount of encoded speech or audio data encoded in a single packet can be used for congestion control since the transmission rate is inversely proportional to these frame sizes. A lower packet transmission rate reduces the amount of header overhead but at the same time increases latency and error sensitivity and should be done with care.</p>
<p id="rfc.section.6.p.4">It is RECOMMENDED that congestion control is applied during the transmission of Opus encoded data.</p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> IANA Considerations</h1>
<p id="rfc.section.7.p.1">One media subtype (audio/opus) has been defined and registered as described in the following section.</p>
<h1 id="rfc.section.7.1">
<a href="#rfc.section.7.1">7.1.</a> Opus Media Type Registration</h1>
<p id="rfc.section.7.1.p.1">Media type registration is done according to <a href="#RFC4288">[RFC4288]</a> and <a href="#RFC4855">[RFC4855]</a>.<br><br></p>
<p id="rfc.section.7.1.p.2">Type name: audio<br><br></p>
<p id="rfc.section.7.1.p.3">Subtype name: opus<br><br></p>
<p id="rfc.section.7.1.p.4">Required parameters:</p>
<p></p>

<dl>
<dt>rate:</dt>
<dd style="margin-left: 8">RTP timestamp clock rate is incremented with 48000 Hz clock rate for all modes of Opus and all sampling frequencies. For audio sampling rates other than 48000 Hz the rate has to be adjusted to 48000 Hz according to <a href="#fs-upsample-factors">Table 2</a>.  </dd>
</dl>
<p id="rfc.section.7.1.p.6">Optional parameters:</p>
<p></p>

<dl>
<dt>maxcodedaudiobandwidth:</dt>
<dd style="margin-left: 8">the decoder's maximum sampling frequency specified in Hertz (Hz) that the application can take advantage of. The decoder MUST be capable to receive any allowed sampling frequency but due to hardware limitations only signals up to the specified sampling frequency can be processed. Sending signals with higher sampling frequency may result in higher than necessary network bandwidth and encoding complexity. Possible values are 8000, 12000, 16000, 24000, 48000.  <br><br> </dd>
<dt>maxptime:</dt>
<dd style="margin-left: 8">the decoder's maximum length of time in milliseconds rounded up to the next full integer value represented by the media in a packet that can be encapsulated in a received packet according to Section 6 of <a href="#RFC4566">[RFC4566]</a>. Possible values are 3, 5, 10, 20, 40, and 60 or an arbitrary multiple of Opus frame sizes rounded up to the next full integer value up to a maximum value of 120 as defined in <a href="#opus-rtp-payload-format">Section 4</a> and <a href="#opus-storage-format">Section 5</a> of this document. If no value is specified, 120 is assumed as default. This value is a recommendation by the decoding side to ensure the best performance for the decoder. The decoder MUST be capable to accept any allowed packet sizes to ensure maximum compatibility.  <br><br>
</dd>
<dt>ptime:</dt>
<dd style="margin-left: 8">the decoder's recommended length of time in milliseconds rounded up to the next full integer value represented by the media in a packet according to Section 6 of <a href="#RFC4566">[RFC4566]</a>. Possible values are 3, 5, 10, 20, 40, or 60 or an arbitrary multiple of Opus frame sizes rounded up to the next full integer value up to a maximum value of 120 as defined in <a href="#opus-rtp-payload-format">Section 4</a> and <a href="#opus-storage-format">Section 5</a> of this document. If no value is specified, 20 is assumed as default. If ptime is greater than maxptime, ptime MUST be ignored. This parameter MAY be changed during a session. This value is a recommendation by the decoding side to ensure the best performance for the decoder. The decoder MUST be capable to accept any allowed packet sizes to ensure maximum compatibility.  <br><br>
</dd>
<dt>minptime:</dt>
<dd style="margin-left: 8">the decoder's minimum length of time in milliseconds rounded up to the next full integer value represented by the media in a packet that SHOULD be encapsulated in a received packet according to Section 6 of <a href="#RFC4566">[RFC4566]</a>. Possible values are 3, 5, 10, 20, 40, and 60 or an arbitrary multiple of Opus frame sizes rounded up to the next full integer value up to a maximum value of 120 as defined in <a href="#opus-rtp-payload-format">Section 4</a> and <a href="#opus-storage-format">Section 5</a> of this document. If no value is specified, 3 is assumed as default. This value is a recommendation by the decoding side to ensure the best performance for the decoder. The decoder MUST be capable to accept any allowed packet sizes to ensure maximum compatibility.  <br><br>
</dd>
<dt>maxaveragebitrate:</dt>
<dd style="margin-left: 8">specifies the maximum average receive bit rate of a session in bits per second (bps). The actual value of the bit rate may vary as it is dependent on the characteristics of the media in a packet. Note that the maximum average bit rate MAY be modified dynamically during a session. Any positive integer is allowed but values outside the range between 6000 and 510000 SHOULD be ignored. If no value is specified, the maximum value specified in <a href="#bitrate_by_bandwidth">Table 1</a> for the corresponding mode of Opus and corresponding clock rate will be the default.<br><br>
</dd>
<dt>stereo:</dt>
<dd style="margin-left: 8">specifies if the decoder prefers to receive stereo signals versus mono signals.  Possible values are 1 and 0 where 1 specifies that stereo signals are preferred and 0 specifies that only mono signals are preferred.  Independent of the stereo parameter every receiver MUST be able to receive and decode stereo signals but sending stereo signals to a receiver that signaled a preference for mono signals may result in higher than necessary network bandwidth and encoding complexity. If no value is specified, stereo is assumed to be 0.<br><br> </dd>
<dt>cbr:</dt>
<dd style="margin-left: 8">specifies if the decoder prefers the use of a constant bit rate versus variable bit rate. Possible values are 1 and 0 where 1 specifies constant bit rate and 0 specifies variable bit rate. If no value is specified, cbr is assumed to be 0. Note that the maximum average bit rate may still be changed, e.g. to adapt to changing network conditions.<br><br> </dd>
<dt>useinbandfec:</dt>
<dd style="margin-left: 8">specifies that Opus in-band FEC is supported by the decoder and MAY be used during a session. Possible values are 1 and 0. It is RECOMMENDED to provide 0 in case FEC is not implemented on the receiving side. If no value is specified, useinbandfec is assumed to be 1.<br><br>
</dd>
<dt>usedtx:</dt>
<dd style="margin-left: 8">specifies if the decoder prefers the use of DTX. Possible values are 1 and 0. If no value is specified, usedtx is assumed to be 0.<br><br>
</dd>
</dl>
<p id="rfc.section.7.1.p.8">Encoding considerations:<br><br></p>
<p></p>

<dl>
<dt></dt>
<dd style="margin-left: 8">Opus media type is framed and consists of binary data according to Section 4.8 in <a href="#RFC4288">[RFC4288]</a>.</dd>
</dl>
<p id="rfc.section.7.1.p.10">Security considerations: </p>
<p></p>

<dl>
<dt></dt>
<dd style="margin-left: 8">See <a href="#security-considerations">Section 8</a> of this document.</dd>
</dl>
<p id="rfc.section.7.1.p.12">Interoperability considerations: none<br><br></p>
<p id="rfc.section.7.1.p.13">Published specification: none<br><br></p>
<p id="rfc.section.7.1.p.14">Applications that use this media type: </p>
<p></p>

<dl>
<dt></dt>
<dd style="margin-left: 8">Any application that requires the transport or storage of speech or audio data may use this media type. Some examples are, but not limited to, audio and video conferencing, Voice over IP, voice recording, media streaming, voice messaging.</dd>
</dl>
<p id="rfc.section.7.1.p.16">Additional information:</p>
<p></p>

<dl>
<dt></dt>
<dd style="margin-left: 8">For storage transfer methods the following applies:<br><br>
</dd>
<dt></dt>
<dd style="margin-left: 8">Magic number:"#!opus\n" (hexadecimal: 0x23 0x21 0x6f 0x70 0x75 0x73 0x0A)<br><br>
</dd>
<dt></dt>
<dd style="margin-left: 8">File extension(s): ops, OPS<br><br>
</dd>
<dt></dt>
<dd style="margin-left: 8">Macintosh file type code(s): "opus"</dd>
</dl>
<p id="rfc.section.7.1.p.18">Person &amp; email address to contact for further information:</p>
<p></p>

<dl>
<dt></dt>
<dd style="margin-left: 8">SILK Support silksupport@skype.net</dd>
<dt></dt>
<dd style="margin-left: 8">Jean-Marc Valin jean-marc.valin@octasic.com</dd>
</dl>
<p id="rfc.section.7.1.p.20">Intended usage: COMMON<br><br></p>
<p id="rfc.section.7.1.p.21">Restrictions on usage:<br><br></p>
<p></p>

<dl>
<dt></dt>
<dd style="margin-left: 8">For transfer over RTP, the RTP payload format (<a href="#opus-rtp-payload-format">Section 4</a> of this document) SHALL be used. For storage usage, the storage format (<a href="#opus-storage-format">Section 5</a> of this document) SHALL be used.</dd>
</dl>
<p id="rfc.section.7.1.p.23">Author:</p>
<p></p>

<dl>
<dt></dt>
<dd style="margin-left: 8">Julian Spittka julian.spittka@skype.net<br><br>
</dd>
<dt></dt>
<dd style="margin-left: 8">Koen Vos koen.vos@skype.net<br><br>
</dd>
<dt></dt>
<dd style="margin-left: 8">Jean-Marc Valin jean-marc.valin@octasic.com<br><br>
</dd>
</dl>
<p id="rfc.section.7.1.p.25">Change controller: TBD</p>
<h1 id="rfc.section.7.2">
<a href="#rfc.section.7.2">7.2.</a> Mapping to SDP Parameters</h1>
<p id="rfc.section.7.2.p.1">The information described in the media type specification has a specific mapping to fields in the Session Description Protocol (SDP) <a href="#RFC4566">[RFC4566]</a>, which is commonly used to describe RTP sessions. When SDP is used to specify sessions employing the Opus codec, the mapping is as follows:</p>
<p></p>

<ul>
<li>The media type ("audio") goes in SDP "m=" as the media name.</li>
<li>The media subtype ("opus") goes in SDP "a=rtpmap" as the encoding name. The RTP clock rate in "a=rtpmap" MUST be mapped to the required media type parameter "rate".</li>
<li>The optional media type parameters "ptime" and "maxptime" are mapped to "a=ptime" and "a=maxptime" attributes, respectively, in the SDP.</li>
<li>All remaining media type parameters are mapped to the "a=fmtp" attribute in the SDP by copying them directly from the media type parameter string as a semicolon-separated list of parameter=value pairs (e.g. maxaveragebitrate=20000).</li>
</ul>

<p> </p>
<p id="rfc.section.7.2.p.3">Below are some examples of SDP session descriptions for Opus:</p>
<p id="rfc.section.7.2.p.4">Example 1: Standard session with 48000 Hz clock rate</p>
<div id="#rfc.figure.4"></div>
<pre>
              
    m=audio 54312 RTP/AVP 101
    a=rtpmap:101 opus/48000
              
            </pre>
<p id="rfc.section.7.2.p.5">Example 2: 16000 Hz clock rate, maximum packet size of 40 ms, recommended packet size of 40 ms, maximum average bit rate of 20000 bps, stereo signals are preferred, FEC is allowed, DTX is not allowed</p>
<div id="#rfc.figure.5"></div>
<pre> 
            
    m=audio 54312 RTP/AVP 101
    a=rtpmap:101 opus/48000
    a=fmtp:101 maxcodedaudiobandwidth=16000; maxaveragebitrate=20000; 
    stereo=1; useinbandfec=1; usedtx=0
    a=ptime:40
    a=maxptime:40
            
          </pre>
<h1 id="rfc.section.7.2.1">
<a href="#rfc.section.7.2.1">7.2.1.</a> Offer-Answer Model Considerations for Opus</h1>
<p id="rfc.section.7.2.1.p.1">When using the offer-answer procedure described in <a href="#RFC3264">[RFC3264]</a> to negotiate the use of Opus, the following considerations apply:</p>
<div id="#rfc.figure.6"></div>
<pre> 
                
        m=audio 54312 RTP/AVP 100
        a=rtpmap:100 opus/48000
                 
              </pre>
<p></p>

<ul>
<li>Opus supports several clock rates. For signaling purposes only the highest, i.e. 48000, is used. The actual clock rate of the corresponding media is signaled inside the payload and is not subject to this payload format description. The decoder MUST be capable to decode every received clock rate. An example is shown below: </li>
<li>The parameters "ptime" and "maxptime" are unidirectional receive-only parameters and typically will not compromise interoperability; however, dependent on the set values of the parameters the performance of the application may suffer.  <a href="#RFC3264">[RFC3264]</a> defines the SDP offer-answer handling of the "ptime" parameter. The "maxptime" parameter MUST be handled in the same way.</li>
<li>The parameter "minptime" is a unidirectional receive-only parameters and typically will not compromise interoperability; however, dependent on the set values of the parameter the performance of the application may suffer and should be set with care.  </li>
<li>The parameter "maxcodedaudiobandwidth" is a unidirectional receive-only parameter that reflects limitations of the local receiver. The sender of the other side SHOULD NOT send with a sampling rate higher than "maxcodedaudiobandwidth" as it represents an inefficient use of network bandwidth resources and CPU cycles on the encoding side. The parameter "maxcodedaudiobandwidth" typically will not compromise interoperability; however, dependent on the set value of the parameter the performance of the application may suffer and should be set with care.  </li>
<li>The parameter "maxaveragebitrate" is a unidirectional receive-only parameter that reflects limitations of the local receiver. The sender of the other side MUST NOT send with an average bit rate higher than "maxaveragebitrate" as it might overload the network and/or receiver. The parameter "maxaveragebitrate" typically will not compromise interoperability; however, dependent on the set value of the parameter the performance of the application may suffer and should be set with care.</li>
<li>If the parameter "maxaveragebitrate" is below the range specified in <a href="#bitrate_by_bandwidth">Table 1</a> the session MUST be rejected.</li>
<li>The parameter "stereo" is a unidirectional receive-only parameter.  </li>
<li>The parameter "cbr" is a unidirectional receive-only parameter.  </li>
<li>The parameter "useinbandfec" is a unidirectional receive-only parameter.</li>
<li>The parameter "usedtx" is a unidirectional receive-only parameter.</li>
<li>Any unknown parameter in an offer MUST be ignored by the receiver and MUST be removed from the answer.</li>
</ul>
<h1 id="rfc.section.7.2.2">
<a href="#rfc.section.7.2.2">7.2.2.</a> Declarative SDP Considerations for Opus</h1>
<p id="rfc.section.7.2.2.p.1">For declarative use of SDP such as in Session Announcement Protocol (SAP), <a href="#RFC2974">[RFC2974]</a>, and RTSP, <a href="#RFC2326">[RFC2326]</a>, for Opus, the following needs to be considered:</p>
<p></p>

<ul>
<li>The values for "maxptime", "ptime", "minptime", "maxcodedaudiobandwidth", and "maxaveragebitrate" should be selected carefully to ensure that a reasonable performance can be achieved for the participants of a session.</li>
<li>The values for "maxptime", "ptime", and "minptime" of the payload format configuration are recommendations by the decoding side to ensure the best performance for the decoder. The decoder MUST be capable to accept any allowed packet sizes to ensure maximum compatibility.  </li>
<li>All other parameters of the payload format configuration are declarative and a participant MUST use the configurations that are provided for the session. More than one configuration may be provided if necessary by declaring multiple RTP payload types; however, the number of types should be kept small.</li>
</ul>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#security-considerations" id="security-considerations">Security Considerations</a>
</h1>
<p id="rfc.section.8.p.1">All RTP packets using the payload format defined in this specification are subject to the general security considerations discussed in the RTP specification <a href="#RFC3550">[RFC3550]</a> and any profile from e.g. <a href="#RFC3711">[RFC3711]</a> or <a href="#RFC3551">[RFC3551]</a>.</p>
<p id="rfc.section.8.p.2">This payload format transports Opus encoded speech or audio data, hence, security issues include confidentiality, integrity protection, and authentication of the speech or audio itself. The Opus payload format does not have any built-in security mechanisms. Any suitable external mechanisms, such as SRTP <a href="#RFC3711">[RFC3711]</a>, MAY be used.</p>
<p id="rfc.section.8.p.3">This payload format and the Opus encoding do not exhibit any significant non-uniformity in the receiver-end computational load and thus are unlikely to pose a denial-of-service threat due to the receipt of pathological datagrams.</p>
<h1 id="rfc.section.9">
<a href="#rfc.section.9">9.</a> Acknowledgements</h1>
<p id="rfc.section.9.p.1">TBD</p>
<h1 id="rfc.references">
<a href="#rfc.references">10.</a> References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3550">[RFC3550]</b></td>
<td class="top">
<a>Schulzrinne, H.</a>, <a>Casner, S.</a>, <a>Frederick, R.</a> and <a>V. Jacobson</a>, "<a href="http://tools.ietf.org/html/rfc3550">RTP: A Transport Protocol for Real-Time Applications</a>", STD 64, RFC 3550, July 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3711">[RFC3711]</b></td>
<td class="top">
<a>Baugher, M.</a>, <a>McGrew, D.</a>, <a>Naslund, M.</a>, <a>Carrara, E.</a> and <a>K. Norrman</a>, "<a href="http://tools.ietf.org/html/rfc3711">The Secure Real-time Transport Protocol (SRTP)</a>", RFC 3711, March 2004.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3551">[RFC3551]</b></td>
<td class="top">
<a>Schulzrinne, H.</a> and <a>S. Casner</a>, "<a href="http://tools.ietf.org/html/rfc3551">RTP Profile for Audio and Video Conferences with Minimal Control</a>", STD 65, RFC 3551, July 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4288">[RFC4288]</b></td>
<td class="top">
<a>Freed, N.</a> and <a>J. Klensin</a>, "<a href="http://tools.ietf.org/html/rfc4288">Media Type Specifications and Registration Procedures</a>", BCP 13, RFC 4288, December 2005.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4855">[RFC4855]</b></td>
<td class="top">
<a>Casner, S.</a>, "<a href="http://tools.ietf.org/html/rfc4855">Media Type Registration of RTP Payload Formats</a>", RFC 4855, February 2007.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4566">[RFC4566]</b></td>
<td class="top">
<a>Handley, M.</a>, <a>Jacobson, V.</a> and <a>C. Perkins</a>, "<a href="http://tools.ietf.org/html/rfc4566">SDP: Session Description Protocol</a>", RFC 4566, July 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3264">[RFC3264]</b></td>
<td class="top">
<a>Rosenberg, J.</a> and <a>H. Schulzrinne</a>, "<a href="http://tools.ietf.org/html/rfc3264">An Offer/Answer Model with Session Description Protocol (SDP)</a>", RFC 3264, June 2002.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2974">[RFC2974]</b></td>
<td class="top">
<a>Handley, M.</a>, <a>Perkins, C.</a> and <a>E. Whelan</a>, "<a href="http://tools.ietf.org/html/rfc2974">Session Announcement Protocol</a>", RFC 2974, October 2000.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2326">[RFC2326]</b></td>
<td class="top">
<a href="mailto:schulzrinne@cs.columbia.edu" title="Columbia University, Dept. of Computer Science">Schulzrinne, H.</a>, <a href="mailto:anup@netscape.com" title="Netscape Communications Corp.">Rao, A.</a> and <a href="mailto:robla@real.com" title="RealNetworks">R. Lanphier</a>, "<a href="http://tools.ietf.org/html/rfc2326">Real Time Streaming Protocol (RTSP)</a>", RFC 2326, April 1998.</td>
</tr>
</tbody></table>
<h1 id="rfc.appendix.Appendix A">
<a href="#rfc.appendix.Appendix%20A">Appendix A.</a> Informational References</h1>
<p></p>

<dl>
<dt></dt>
<dd style="margin-left: 8">[codec]  http://datatracker.ietf.org/wg/codec/</dd>
<dt></dt>
<dd style="margin-left: 8">[SILK]  https://developer.skype.com/silk</dd>
<dt></dt>
<dd style="margin-left: 8">[CELT]  http://www.celt-codec.org/</dd>
<dt></dt>
<dd style="margin-left: 8">[Opus]  http://datatracker.ietf.org/doc/draft-ietf-codec-opus/</dd>
</dl>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Julian Spittka</span> 
	  <span class="n hidden">
		<span class="family-name">Spittka</span>
	  </span>
	</span>
	<span class="org vcardline">Skype Technologies S.A.</span>
	<span class="adr">
	  <span>3210 Porter Drive</span>

	  <span class="vcardline">
		<span class="locality">Palo Alto</span>,  
		<span class="region">CA</span> 
		<span class="code">94304</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:julian.spittka@skype.net">julian.spittka@skype.net</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Koen Vos</span> 
	  <span class="n hidden">
		<span class="family-name">Vos</span>
	  </span>
	</span>
	<span class="org vcardline">Skype Technologies S.A.</span>
	<span class="adr">
	  <span>3210 Porter Drive</span>

	  <span class="vcardline">
		<span class="locality">Palo Alto</span>,  
		<span class="region">CA</span> 
		<span class="code">94304</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:koen.vos@skype.net">koen.vos@skype.net</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Jean-Marc Valin</span> 
	  <span class="n hidden">
		<span class="family-name">Valin</span>
	  </span>
	</span>
	<span class="org vcardline">Octasic Inc.</span>
	<span class="adr">
	  <span>4101 Molson Street</span>

	  <span class="vcardline">
		<span class="locality">Montreal</span>,  
		<span class="region">Quebec</span> 
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline">Canada</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:jean-marc.valin@octasic.com">jean-marc.valin@octasic.com</a></span>

  </address>
</div>

</body>
</html>