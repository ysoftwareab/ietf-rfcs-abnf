



IDR                                                      G. Van de Velde
Internet-Draft                                                  A. Karch
Intended status: Informational                             Cisco Systems
Expires: April 11, 2015                                    W. Henderickx
                                                          Alcatel-Lucent
                                                         October 8, 2014


Dissemination of Flow Specification Rules for IPv6 Implementation Report
               draft-vandevelde-idr-ipv6-flowspec-imp-00

Abstract

   This document is an implementation report for the BGP Flow
   Specification Rules for IPv6 as defined in
   [I-D.ietf-idr-flow-spec-v6].  The respondents are experts with the
   implementations they reported on, and their responses are considered
   authoritative for the implementations for which their responses
   represent.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on April 11, 2015.

Copyright Notice

   Copyright (c) 2014 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must



Van de Velde, et al.     Expires April 11, 2015                 [Page 1]

Internet-Draft                                              October 2014


   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Requirements Language . . . . . . . . . . . . . . . . . . . .   2
   3.  Implementation Forms  . . . . . . . . . . . . . . . . . . . .   3
   4.  NLRI and Extended Community subtypes  . . . . . . . . . . . .   3
   5.  Interoperable Implementations . . . . . . . . . . . . . . . .   6
     5.1.  Alcatel-Lucent - Cisco Systems  . . . . . . . . . . . . .   6
   6.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   8
   7.  Security Considerations . . . . . . . . . . . . . . . . . . .   8
   8.  Privacy Considerations  . . . . . . . . . . . . . . . . . . .   8
   9.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   8
   10. Change Log  . . . . . . . . . . . . . . . . . . . . . . . . .   8
   11. References  . . . . . . . . . . . . . . . . . . . . . . . . .   8
     11.1.  Normative References . . . . . . . . . . . . . . . . . .   8
     11.2.  Informative References . . . . . . . . . . . . . . . . .   8
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   9

1.  Introduction

   In order to share Flow Specification Rules for IPv6 using the BGP
   routing protocol a new BGP Network Layer Reachability Information
   (NLRI) encoding format is required.

   This document provides an implementation report for the BGP
   Dissemination of Flow Specification Rules for IPv6 NLRI Format as
   defined in [I-D.ietf-idr-flow-spec-v6].

   The editors did not verify the accuracy of the information provided
   by respondents or by any alternative means.  The respondents are
   experts with the implementations they reported on, and their
   responses are considered authoritative for the implementations for
   which their responses represent.

2.  Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" are to
   be interpreted as described in [RFC2119] only when they appear in all
   upper case.  They may also appear in lower or mixed case as English
   words, without any normative meaning.






Van de Velde, et al.     Expires April 11, 2015                 [Page 2]

Internet-Draft                                              October 2014


3.  Implementation Forms

   Contact and implementation information for person filling out this
   form:

            Cisco
                Name: Gunter Van de Velde
                Email:gvandeve@cisco.com
                Vendor: Cisco Systems, Inc.
                Release: IOS-XR
                Protocol Role: Sender, Receiver

            Alcatel-Lucent
                Name: Wim Henderickx
                Email: wim.henderickx@alcatel-lucent.com
                Vendor: Alcatel-Lucent, Inc.
                Release: R12R4
                Protocol Role: Sender, Receiver

4.  NLRI and Extended Community subtypes

   Does the implementation support the Network Layer Reachability (NLRI)
   subtypes as described in Section 3 and 4 of
   [I-D.ietf-idr-flow-spec-v6].

   o  N1: Type 1 - Destination IPv6 Prefix

   o  N2: Type 2 - Source IPv6 Prefix

   o  N3: Type 3 - Next Header

   o  N4: Type 4 - Port

   o  N5: Type 5 - Destination port

   o  N6: Type 6 - Source port

   o  N7: Type 7 - ICMP type

   o  N8: Type 8 - ICMP code

   o  N9: Type 9 - TCP flags

   o  N10: Type 10 - Packet length

   o  N11: Type 11 - DSCP (Diffserv Code Point)

   o  N12: Type 12 - Fragment



Van de Velde, et al.     Expires April 11, 2015                 [Page 3]

Internet-Draft                                              October 2014


   o  N13: Type 13 - Flow Label

   o  E1: Extended Community - traffic-rate

   o  E2: Extended Community - traffic-action

   o  E3: Extended Community - redirect

   o  E4: Extended Community - traffic-marking










































Van de Velde, et al.     Expires April 11, 2015                 [Page 4]

Internet-Draft                                              October 2014


                        +--------+--------+-------+-----+
                        |        | Cisco  |  ALU  | TBD |
                        +--------+--------+-------+-----+
                        | Rcv.N1 |   YES  |  YES  | --- |
                        | Snd.N1 |   YES  |  YES  | --- |
                        | Rcv.N2 |   YES  |  YES  | --- |
                        | Snd.N2 |   YES  |  YES  | --- |
                        | Rcv.N3 |   YES  |  YES  | --- |
                        | Snd.N3 |   YES  |  YES  | --- |
                        | Rcv.N4 |   YES  |  YES  | --- |
                        | Snd.N4 |   YES  |  YES  | --- |
                        | Rcv.N5 |   YES  |  YES  | --- |
                        | Snd.N5 |   YES  |  YES  | --- |
                        | Rcv.N6 |   YES  |  YES  | --- |
                        | Snd.N6 |   YES  |  YES  | --- |
                        | Rcv.N7 |   YES  |  YES  | --- |
                        | Snd.N7 |   YES  |  YES  | --- |
                        | Rcv.N8 |   YES  |  YES  | --- |
                        | Snd.N8 |   YES  |  YES  | --- |
                        | Rcv.N9 |   YES  |  YES  | --- |
                        | Snd.N9 |   YES  |  YES  | --- |
                        | Rcv.N10|   YES  |  YES  | --- |
                        | Snd.N10|   YES  |  YES  | --- |
                        | Rcv.N11|   YES  |  YES  | --- |
                        | Snd.N11|   YES  |  YES  | --- |
                        | Rcv.N12|   YES  |  YES  | --- |
                        | Snd.N12|   YES  |  YES  | --- |
                        | Rcv.N13|   YES  |  YES  | --- |
                        | Snd.N13|   YES  |  YES  | --- |
                        | Rcv.E1 |   YES  |  YES  | --- |
                        | Snd.E1 |   YES  |  YES  | --- |
                        | Rcv.E2 |   YES  |  YES  | --- |
                        | Snd.E2 |   YES  |  YES  | --- |
                        | Rcv.E3 |   YES  |  YES  | --- |
                        | Snd.E3 |   YES  |  YES  | --- |
                        | Rcv.E4 |   YES  |  YES  | --- |
                        | Snd.E4 |   YES  |  YES  | --- |
                        +--------+--------+-------+-----+


   Yes

   o  Rcv: BGP speaker can receive the information into the BGP process

   o  Snd: BGP speaker can relay the information from the BGP process

   No




Van de Velde, et al.     Expires April 11, 2015                 [Page 5]

Internet-Draft                                              October 2014


   o  Rcv: BGP speaker can not receive the information into the BGP
      process

   o  Snd: BGP speaker can not relay the information from the BGP
      process

5.  Interoperable Implementations

   Summary of executed Interop tests between different implementations

5.1.  Alcatel-Lucent - Cisco Systems

   This Interop test was between a Cisco IOS-XR router and a Alcatel-
   Lucent Router.  Between the two BGP devices an iBGP session is
   established.

   The following IPv6 Flow Specification NLRI is constructed using the
   Cisco router as IPv6 Flow Specification controller:

            !
            class-map type traffic match-all InteropMatchList
             match destination-address ipv6 2001:2::3/128
             match source-address ipv6 2002:2::3/128
             match destination-port 1-5 7-11 13-18 20-25 27-31
             match source-port 33-37 39-43 45-50 53-58 60-65
             match ipv6 icmp-type 35
             match ipv6 icmp-code 55
             match packet length 120-130 135-140 145-160 165-200 205-225
             match dscp 1-10 11-20 22-30 32-40 52-60
             match tcp-flag 240 any
             match protocol 6-71 73-80 85-90 95-105 110-115
             end-class-map
            !
            policy-map type pbr InteropCiscoAlu
             class type traffic InteropMatchList
              police rate 200 bps
              !
              redirect nexthop 2001::1
              set dscp 45
             !
             class type traffic class-default
             !
             end-policy-map


   This results with the following Flow Specification Extended
   communities and IPv6 Flow Specification NLRI:




Van de Velde, et al.     Expires April 11, 2015                 [Page 6]

Internet-Draft                                              October 2014


             AFI: IPv6
              NLRI (Hex dump) :
             0x018000200100020000000000000000000000030280002002000200000000000
             00000000000030303064547034945500355455a035f4569036ec5730503014505
             0307450b030d451203144519031bc51f06032145250327452b032d45320335453
             a033cc5410781230881370980f00a037845820387458c039145a003a545c803cd
             c5e10b0301450a030b45140316451e032045280334c53c
              Actions       :Traffic-rate: 200 bps DSCP: 45
                Nexthop: 2001::1  (policy.1.test1)

   The above IPv6 Flow Specification rule is correctly received by the
   Alcatel-Lucent BGP speaker and is reflected as follows on the device:

*A:PE26>config>service>vprn>sub-if>grp-if>sap>static-host# show router 117 bgp
routes flow-ipv6
===============================================================================
 BGP Router ID:195.207.5.200    AS:65117       Local AS:65117
===============================================================================
 Legend -
 Status codes  : u - used, s - suppressed, h - history, d - decayed, * - valid
 Origin codes  : i - IGP, e - EGP, ? - incomplete, > - best, b - backup

===============================================================================
BGP FLOW IPV6 Routes
===============================================================================
Flag  Network             Nexthop                 LocalPref       MED
      As-Path
-------------------------------------------------------------------------------
u*>i  --                  2001::1                 100             None
      No As-Path

      Community Action:    ext:800:0
      Community Action:    rate-limit: 65117:110*
      Community Action:    mark-dscp: 45
      NLRI Subcomponents:
      Dest Pref : 2001:2::3/128 offset 0
      Src Pref  : 2002:2::3/128 offset 0
      Ip Proto  : [ >= 6 ] and [ <= 71 ] or [ >= 73 ] and [ <= 80 ] or [ >=
      Dest Port : [ >= 1 ] and [ <= 5 ] or [ >= 7 ] and [ <= 11 ] or [ >= 13
      Src Port  : [ >= 33 ] and [ <= 37 ] or [ >= 39 ] and [ <= 43 ] or [ >=
      ICMP Type : [ == 35 ]
      ICMP Code : [ == 55 ]
      TCP Flags : [ 240 ]
      TCP Flags : [ 240 ]
      DSCP      : [ >= 1 ] and [ <= 10 ] or [ >= 11 ] and [ <= 20 ] or [ >=
-------------------------------------------------------------------------------
Routes : 1




Van de Velde, et al.     Expires April 11, 2015                 [Page 7]

Internet-Draft                                              October 2014


6.  IANA Considerations

   This document makes no request of IANA.

   Note to RFC Editor: The IANA has requested that this section remain
   in the document upon publication as an RFC.  This note to the RFC
   Editor, however, may be removed.

7.  Security Considerations

   No new security issues are introduced to the BGP defined in
   Dissemination of Flow Specification Rules for IPv6
   [I-D.ietf-idr-flow-spec-v6].

8.  Privacy Considerations

   No new privacy issues are introduced to the BGP defined in
   Dissemination of Flow Specification Rules for IPv6
   [I-D.ietf-idr-flow-spec-v6].

9.  Acknowledgements

   The authors would like to thank Nicolas Fevrier, Hyojeong Kim,
   Bertrand Duvivier and Adam Simpson.

10.  Change Log

   Initial Version:  8 October 2014

11.  References

11.1.  Normative References

   [I-D.ietf-idr-flow-spec-v6]
              Raszuk, R., Pithawala, B., McPherson, D., and A. Andy,
              "Dissemination of Flow Specification Rules for IPv6",
              draft-ietf-idr-flow-spec-v6-05 (work in progress), March
              2014.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

11.2.  Informative References

   [RFC4271]  Rekhter, Y., Li, T., and S. Hares, "A Border Gateway
              Protocol 4 (BGP-4)", RFC 4271, January 2006.





Van de Velde, et al.     Expires April 11, 2015                 [Page 8]

Internet-Draft                                              October 2014


Authors' Addresses

   Gunter Van de Velde
   Cisco Systems
   De Kleetlaan 6a
   Diegem  1831
   Belgium

   Phone: +32 2704 5473
   Email: gvandeve@cisco.com


   Andy Karch
   Cisco Systems
   170 W. Tasman Drive
   San Jose, CA 95124  95134
   USA

   Email: akarch@cisco.com


   Wim Henderickx
   Alcatel-Lucent

   Email: wim.henderickx@alcatel-lucent.be


























Van de Velde, et al.     Expires April 11, 2015                 [Page 9]
