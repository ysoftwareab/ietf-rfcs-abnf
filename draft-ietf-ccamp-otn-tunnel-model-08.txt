



CCAMP Working Group                                             H. Zheng
Internet-Draft                                                   I. Busi
Intended status: Standards Track                     Huawei Technologies
Expires: April 25, 2020                                       S. Belotti
                                                                   Nokia
                                                                V. Lopez
                                                              Telefonica
                                                                   Y. Xu
                                                                   CAICT
                                                        October 23, 2019


                         OTN Tunnel YANG Model
                  draft-ietf-ccamp-otn-tunnel-model-08

Abstract

   This document describes the YANG data model for OTN Tunnels.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on April 25, 2020.

Copyright Notice

   Copyright (c) 2019 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of



Zheng, et al.            Expires April 25, 2020                 [Page 1]

Internet-Draft            OTN Tunnel YANG Model             October 2019


   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Terminology and Notations . . . . . . . . . . . . . . . . . .   2
   3.  OTN Tunnel Model Description  . . . . . . . . . . . . . . . .   3
     3.1.  Overview of OTN Tunnel Model  . . . . . . . . . . . . . .   3
     3.2.  OTN-specific Parameters in Tunnel Model . . . . . . . . .   3
     3.3.  OTN Path Compute RPC  . . . . . . . . . . . . . . . . . .   4
   4.  OTN Tunnel YANG Tree  . . . . . . . . . . . . . . . . . . . .   4
   5.  OTN Tunnel YANG Code  . . . . . . . . . . . . . . . . . . . .  13
   6.  Security Considerations . . . . . . . . . . . . . . . . . . .  34
   7.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .  35
   8.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .  36
   9.  Contributors  . . . . . . . . . . . . . . . . . . . . . . . .  36
   10. References  . . . . . . . . . . . . . . . . . . . . . . . . .  37
     10.1.  Normative References . . . . . . . . . . . . . . . . . .  37
     10.2.  Informative References . . . . . . . . . . . . . . . . .  38
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  39

1.  Introduction

   OTN transport networks, specified in [ITU-Tg709], can carry various
   types of client services.  In many cases, the client signal is
   carried over an OTN tunnel across connected domains in a multi-domain
   network.  These OTN services can either be transported or switched in
   the OTN network.  If an OTN tunnel is switched, then additional
   parameters need to be provided to create a Mux OTN service.

   This document provides YANG model for creating OTN tunnel.  The model
   augments the TE Tunnel model.

2.  Terminology and Notations

   A simplified graphical representation of the data model is used in
   this document.  The meaning of the symbols in the YANG data tree
   presented later in this draft is defined in [RFC8340].  They are
   provided below for reference.

   o  Brackets "[" and "]" enclose list keys.

   o  Abbreviations before data node names: "rw" means configuration
      (read-write) and "ro" state data (read-only).

   o  Symbols after data node names: "?" means an optional node, "!"
      means a presence container, and "*" denotes a list and leaf-list.



Zheng, et al.            Expires April 25, 2020                 [Page 2]

Internet-Draft            OTN Tunnel YANG Model             October 2019


   o  Parentheses enclose choice and case nodes, and case nodes are also
      marked with a colon (":").

   o  Ellipsis ("...") stands for contents of subtrees that are not
      shown.

   o  More OTN specific terms can be found in
      [I-D.ietf-ccamp-otn-topo-yang].

3.  OTN Tunnel Model Description

3.1.  Overview of OTN Tunnel Model

   The OTN tunnel model is using TE tunnel [I-D.ietf-teas-yang-te] as a
   basic model and augment to the TE tunnel with OTN-specific
   parameters, including the bandwidth information and label
   information.  It is also worth noting that the OTN tunnel
   provisioning is usually based on the OTN topology.  Therefore the OTN
   tunnel model is usually used together with OTN topology model
   specified in [I-D.ietf-ccamp-otn-topo-yang].  The OTN tunnel model
   also imports a few type modules, including ietf-otn-types, ietf-te-
   types and ietf-inet-types.

   More scenarios and model applications can be found in
   [I-D.ietf-ccamp-transport-nbi-app-statement] and
   [I-D.ietf-teas-actn-yang].  The current model is following the YANG
   language specification as [RFC7950], and the corresponding protocol
   is recommended to be Netconf protocol in [RFC6241] or RESTconf
   protocol in [RFC8040].

   The YANG module ietf-otn-tunnel defined in this document conforms to
   the Network Management Datastore Architecture (NMDA) defined in
   [RFC8342].

3.2.  OTN-specific Parameters in Tunnel Model

   OTN specific parameters have been augmenting to the TE tunnel models.
   The attributes on both of the source and destination need to be
   configured when setting up the tunnel.  Typical parameters, including
   client signal, TPN, TSG and corresponding tributary slot information,
   are required in the OTN tunnel model.  These parameters are
   consistent with the framework in [RFC7062], and the specification in
   [RFC7138] and [RFC7139].

   The OTN bandwidth information has been augmenting to various sections
   of TE tunnel models, including tunnel bandwidth, primary path
   bandwidth and so on.  The OTN label information has been augmenting
   to label hop of a group of routing objects and also LSPs.



Zheng, et al.            Expires April 25, 2020                 [Page 3]

Internet-Draft            OTN Tunnel YANG Model             October 2019


3.3.  OTN Path Compute RPC

   Similarly with TE tunnel, a 'compute-only' mode of OTN tunnel model
   is also supported for stateful path computation.  Given the OTN
   tunnel computed, the client may query and/or subscribe on the tunnel
   to be notified whenever it changes.  In addition, also a stateless
   Remote Procedural Call (RPC) is specified.  On receiving this RPC,
   the provider is expected to compute the available path subject to the
   constraints specified in RPC and feedback to the client without any
   changing of the OTN network or the OTN tunnels.

4.  OTN Tunnel YANG Tree


module: ietf-otn-tunnel
  augment /te:te/te:tunnels/te:tunnel:
    +--rw src-client-signal?   identityref
    +--rw dst-client-signal?   identityref
  augment /te:te/te:globals/te:named-path-constraints
          /te:named-path-constraint/te:te-bandwidth/te:technology:
    +--:(otn)
       +--rw odu-type?   identityref
  augment /te:te/te:tunnels/te:tunnel/te:te-bandwidth/te:technology:
    +--:(otn)
       +--rw odu-type?   identityref
  augment /te:te/te:tunnels/te:tunnel/te:p2p-primary-paths
          /te:p2p-primary-path/te:te-bandwidth/te:technology:
    +--:(otn)
       +--rw odu-type?   identityref
  augment /te:te/te:tunnels/te:tunnel/te:p2p-primary-paths
          /te:p2p-primary-path/te:p2p-primary-reverse-path
                  /te:te-bandwidth/te:technology:
    +--:(otn)
       +--rw odu-type?   identityref
  augment /te:te/te:tunnels/te:tunnel/te:p2p-secondary-paths
          /te:p2p-secondary-path/te:te-bandwidth/te:technology:
    +--:(otn)
       +--rw odu-type?   identityref
  augment /te:te/te:globals/te:named-path-constraints
          /te:named-path-constraint/te:explicit-route-objects-always
                  /te:route-object-exclude-always/te:type/te:label
                  /te:label-hop/te:te-label/te:technology:
    +--:(otn)
       +--rw tpn?       uint16
       +--rw tsg?       identityref
       +--rw ts-list?   string
  augment /te:te/te:globals/te:named-path-constraints
          /te:named-path-constraint/te:explicit-route-objects-always



Zheng, et al.            Expires April 25, 2020                 [Page 4]

Internet-Draft            OTN Tunnel YANG Model             October 2019


                  /te:route-object-include-exclude/te:type/te:label
                  /te:label-hop/te:te-label/te:technology:
    +--:(otn)
       +--rw tpn?       uint16
       +--rw tsg?       identityref
       +--rw ts-list?   string
  augment /te:te/te:globals/te:named-path-constraints
          /te:named-path-constraint/te:path-in-segment
                  /te:label-restrictions/te:label-restriction:
    +--rw range-type?   identityref
    +--rw tsg?          identityref
    +--rw priority?     uint8
  augment /te:te/te:globals/te:named-path-constraints
          /te:named-path-constraint/te:path-in-segment
                  /te:label-restrictions/te:label-restriction
                  /te:label-start/te:te-label/te:technology:
    +--:(otn)
       +--rw (otn-label-type)?
          +--:(tributary-port)
          |  +--rw tpn?   uint16
          +--:(tributary-slot)
             +--rw ts?    uint16
  augment /te:te/te:globals/te:named-path-constraints
          /te:named-path-constraint/te:path-in-segment
                  /te:label-restrictions/te:label-restriction
                  /te:label-end/te:te-label/te:technology:
    +--:(otn)
       +--rw (otn-label-type)?
          +--:(tributary-port)
          |  +--rw tpn?   uint16
          +--:(tributary-slot)
             +--rw ts?    uint16
  augment /te:te/te:globals/te:named-path-constraints
          /te:named-path-constraint/te:path-out-segment
                  /te:label-restrictions/te:label-restriction:
    +--rw range-type?   identityref
    +--rw tsg?          identityref
    +--rw priority?     uint8
  augment /te:te/te:globals/te:named-path-constraints
          /te:named-path-constraint/te:path-out-segment
                  /te:label-restrictions/te:label-restriction
                  /te:label-start/te:te-label/te:technology:
    +--:(otn)
       +--rw (otn-label-type)?
          +--:(tributary-port)
          |  +--rw tpn?   uint16
          +--:(tributary-slot)
             +--rw ts?    uint16



Zheng, et al.            Expires April 25, 2020                 [Page 5]

Internet-Draft            OTN Tunnel YANG Model             October 2019


  augment /te:te/te:globals/te:named-path-constraints
          /te:named-path-constraint/te:path-out-segment
                  /te:label-restrictions/te:label-restriction
                  /te:label-end/te:te-label/te:technology:
    +--:(otn)
       +--rw (otn-label-type)?
          +--:(tributary-port)
          |  +--rw tpn?   uint16
          +--:(tributary-slot)
             +--rw ts?    uint16
  augment /te:te/te:tunnels/te:tunnel/te:p2p-primary-paths
          /te:p2p-primary-path/te:optimizations/te:algorithm
                  /te:metric/te:optimization-metric
                  /te:explicit-route-exclude-objects
                  /te:route-object-exclude-object/te:type/te:label
                  /te:label-hop/te:te-label/te:technology:
    +--:(otn)
       +--rw tpn?       uint16
       +--rw tsg?       identityref
       +--rw ts-list?   string
  augment /te:te/te:tunnels/te:tunnel/te:p2p-primary-paths
          /te:p2p-primary-path/te:optimizations/te:algorithm
                  /te:metric/te:optimization-metric
                  /te:explicit-route-include-objects
                  /te:route-object-include-object/te:type/te:label
                  /te:label-hop/te:te-label/te:technology:
    +--:(otn)
       +--rw tpn?       uint16
       +--rw tsg?       identityref
       +--rw ts-list?   string
  augment /te:te/te:tunnels/te:tunnel/te:p2p-primary-paths
          /te:p2p-primary-path/te:explicit-route-objects-always
                  /te:route-object-exclude-always/te:type/te:label
                  /te:label-hop/te:te-label/te:technology:
    +--:(otn)
       +--rw tpn?       uint16
       +--rw tsg?       identityref
       +--rw ts-list?   string
  augment /te:te/te:tunnels/te:tunnel/te:p2p-primary-paths
          /te:p2p-primary-path/te:explicit-route-objects-always
                  /te:route-object-include-exclude/te:type/te:label
                  /te:label-hop/te:te-label/te:technology:
    +--:(otn)
       +--rw tpn?       uint16
       +--rw tsg?       identityref
       +--rw ts-list?   string
  augment /te:te/te:tunnels/te:tunnel/te:p2p-primary-paths
          /te:p2p-primary-path/te:path-in-segment



Zheng, et al.            Expires April 25, 2020                 [Page 6]

Internet-Draft            OTN Tunnel YANG Model             October 2019


                  /te:label-restrictions/te:label-restriction:
    +--rw range-type?   identityref
    +--rw tsg?          identityref
    +--rw priority?     uint8
  augment /te:te/te:tunnels/te:tunnel/te:p2p-primary-paths
          /te:p2p-primary-path/te:path-in-segment
                  /te:label-restrictions/te:label-restriction
                  /te:label-start/te:te-label/te:technology:
    +--:(otn)
       +--rw (otn-label-type)?
          +--:(tributary-port)
          |  +--rw tpn?   uint16
          +--:(tributary-slot)
             +--rw ts?    uint16
  augment /te:te/te:tunnels/te:tunnel/te:p2p-primary-paths
          /te:p2p-primary-path/te:path-in-segment
                  /te:label-restrictions/te:label-restriction
                  /te:label-end/te:te-label/te:technology:
    +--:(otn)
       +--rw (otn-label-type)?
          +--:(tributary-port)
          |  +--rw tpn?   uint16
          +--:(tributary-slot)
             +--rw ts?    uint16
  augment /te:te/te:tunnels/te:tunnel/te:p2p-primary-paths
          /te:p2p-primary-path/te:path-out-segment
                  /te:label-restrictions/te:label-restriction:
    +--rw range-type?   identityref
    +--rw tsg?          identityref
    +--rw priority?     uint8
  augment /te:te/te:tunnels/te:tunnel/te:p2p-primary-paths
          /te:p2p-primary-path/te:path-out-segment
                  /te:label-restrictions/te:label-restriction
                  /te:label-start/te:te-label/te:technology:
    +--:(otn)
       +--rw (otn-label-type)?
          +--:(tributary-port)
          |  +--rw tpn?   uint16
          +--:(tributary-slot)
             +--rw ts?    uint16
  augment /te:te/te:tunnels/te:tunnel/te:p2p-primary-paths
          /te:p2p-primary-path/te:path-out-segment
                  /te:label-restrictions/te:label-restriction
                  /te:label-end/te:te-label/te:technology:
    +--:(otn)
       +--rw (otn-label-type)?
          +--:(tributary-port)
          |  +--rw tpn?   uint16



Zheng, et al.            Expires April 25, 2020                 [Page 7]

Internet-Draft            OTN Tunnel YANG Model             October 2019


          +--:(tributary-slot)
             +--rw ts?    uint16
  augment /te:te/te:tunnels/te:tunnel/te:p2p-primary-paths
          /te:p2p-primary-path/te:computed-paths-properties
                  /te:computed-path-properties/te:path-properties
                  /te:path-route-objects/te:path-computed-route-object
                  /te:type/te:label/te:label-hop/te:te-label
                  /te:technology:
    +--:(otn)
       +--ro tpn?       uint16
       +--ro tsg?       identityref
       +--ro ts-list?   string
  augment /te:te/te:tunnels/te:tunnel/te:p2p-primary-paths
          /te:p2p-primary-path/te:lsps/te:lsp
                  /te:lsp-record-route-information
                  /te:lsp-record-route-information/te:type/te:label
                  /te:label-hop/te:te-label/te:technology:
    +--:(otn)
       +--ro tpn?       uint16
       +--ro tsg?       identityref
       +--ro ts-list?   string
  augment /te:te/te:tunnels/te:tunnel/te:p2p-primary-paths
          /te:p2p-primary-path/te:lsps/te:lsp/te:path-properties
                  /te:path-route-objects/te:path-computed-route-object
                  /te:type/te:label/te:label-hop/te:te-label
                  /te:technology:
    +--:(otn)
       +--ro tpn?       uint16
       +--ro tsg?       identityref
       +--ro ts-list?   string
  augment /te:te/te:tunnels/te:tunnel/te:p2p-primary-paths
          /te:p2p-primary-path/te:p2p-primary-reverse-path
                  /te:optimizations/te:algorithm/te:metric
                  /te:optimization-metric
                  /te:explicit-route-exclude-objects
                  /te:route-object-exclude-object/te:type/te:label
                  /te:label-hop/te:te-label/te:technology:
    +--:(otn)
       +--rw tpn?       uint16
       +--rw tsg?       identityref
       +--rw ts-list?   string
  augment /te:te/te:tunnels/te:tunnel/te:p2p-primary-paths
          /te:p2p-primary-path/te:p2p-primary-reverse-path
                  /te:optimizations/te:algorithm/te:metric
                  /te:optimization-metric
                  /te:explicit-route-include-objects
                  /te:route-object-include-object/te:type/te:label
                  /te:label-hop/te:te-label/te:technology:



Zheng, et al.            Expires April 25, 2020                 [Page 8]

Internet-Draft            OTN Tunnel YANG Model             October 2019


    +--:(otn)
       +--rw tpn?       uint16
       +--rw tsg?       identityref
       +--rw ts-list?   string
  augment /te:te/te:tunnels/te:tunnel/te:p2p-primary-paths
          /te:p2p-primary-path/te:p2p-primary-reverse-path
                  /te:explicit-route-objects-always
                  /te:route-object-exclude-always/te:type/te:label
                  /te:label-hop/te:te-label/te:technology:
    +--:(otn)
       +--rw tpn?       uint16
       +--rw tsg?       identityref
       +--rw ts-list?   string
  augment /te:te/te:tunnels/te:tunnel/te:p2p-primary-paths
          /te:p2p-primary-path/te:p2p-primary-reverse-path
                  /te:explicit-route-objects-always
                  /te:route-object-include-exclude/te:type/te:label
                  /te:label-hop/te:te-label/te:technology:
    +--:(otn)
       +--rw tpn?       uint16
       +--rw tsg?       identityref
       +--rw ts-list?   string
  augment /te:te/te:tunnels/te:tunnel/te:p2p-primary-paths
          /te:p2p-primary-path/te:p2p-primary-reverse-path
                  /te:path-in-segment/te:label-restrictions
                  /te:label-restriction:
    +--rw range-type?   identityref
    +--rw tsg?          identityref
    +--rw priority?     uint8
  augment /te:te/te:tunnels/te:tunnel/te:p2p-primary-paths
          /te:p2p-primary-path/te:p2p-primary-reverse-path
                  /te:path-in-segment/te:label-restrictions
                  /te:label-restriction/te:label-start/te:te-label
                  /te:technology:
    +--:(otn)
       +--rw (otn-label-type)?
          +--:(tributary-port)
          |  +--rw tpn?   uint16
          +--:(tributary-slot)
             +--rw ts?    uint16
  augment /te:te/te:tunnels/te:tunnel/te:p2p-primary-paths
          /te:p2p-primary-path/te:p2p-primary-reverse-path
                  /te:path-in-segment/te:label-restrictions
                  /te:label-restriction/te:label-end/te:te-label
                  /te:technology:
    +--:(otn)
       +--rw (otn-label-type)?
          +--:(tributary-port)



Zheng, et al.            Expires April 25, 2020                 [Page 9]

Internet-Draft            OTN Tunnel YANG Model             October 2019


          |  +--rw tpn?   uint16
          +--:(tributary-slot)
             +--rw ts?    uint16
  augment /te:te/te:tunnels/te:tunnel/te:p2p-primary-paths
          /te:p2p-primary-path/te:p2p-primary-reverse-path
                  /te:path-out-segment/te:label-restrictions
                  /te:label-restriction:
    +--rw range-type?   identityref
    +--rw tsg?          identityref
    +--rw priority?     uint8
  augment /te:te/te:tunnels/te:tunnel/te:p2p-primary-paths
          /te:p2p-primary-path/te:p2p-primary-reverse-path
                  /te:path-out-segment/te:label-restrictions
                  /te:label-restriction/te:label-start/te:te-label
                  /te:technology:
    +--:(otn)
       +--rw (otn-label-type)?
          +--:(tributary-port)
          |  +--rw tpn?   uint16
          +--:(tributary-slot)
             +--rw ts?    uint16
  augment /te:te/te:tunnels/te:tunnel/te:p2p-primary-paths
          /te:p2p-primary-path/te:p2p-primary-reverse-path
                  /te:path-out-segment/te:label-restrictions
                  /te:label-restriction/te:label-end/te:te-label
                  /te:technology:
    +--:(otn)
       +--rw (otn-label-type)?
          +--:(tributary-port)
          |  +--rw tpn?   uint16
          +--:(tributary-slot)
             +--rw ts?    uint16
  augment /te:te/te:tunnels/te:tunnel/te:p2p-primary-paths
          /te:p2p-primary-path/te:p2p-primary-reverse-path
                  /te:computed-paths-properties
                  /te:computed-path-properties
                  /te:path-properties/te:path-route-objects
                  /te:path-computed-route-object/te:type/te:label
                  /te:label-hop/te:te-label/te:technology:
    +--:(otn)
       +--ro tpn?       uint16
       +--ro tsg?       identityref
       +--ro ts-list?   string
  augment /te:te/te:tunnels/te:tunnel/te:p2p-primary-paths
          /te:p2p-primary-path/te:p2p-primary-reverse-path
                  /te:lsps/te:lsp/te:lsp-record-route-information
                  /te:lsp-record-route-information/te:type/te:label
                  /te:label-hop/te:te-label/te:technology:



Zheng, et al.            Expires April 25, 2020                [Page 10]

Internet-Draft            OTN Tunnel YANG Model             October 2019


    +--:(otn)
       +--ro tpn?       uint16
       +--ro tsg?       identityref
       +--ro ts-list?   string
  augment /te:te/te:tunnels/te:tunnel/te:p2p-primary-paths
          /te:p2p-primary-path/te:p2p-primary-reverse-path
                  /te:lsps/te:lsp/te:path-properties/te:path-route-objects
                  /te:path-computed-route-object/te:type/te:label
                  /te:label-hop/te:te-label/te:technology:
    +--:(otn)
       +--ro tpn?       uint16
       +--ro tsg?       identityref
       +--ro ts-list?   string
  augment /te:te/te:tunnels/te:tunnel/te:p2p-secondary-paths
          /te:p2p-secondary-path/te:optimizations/te:algorithm
                  /te:metric/te:optimization-metric
                  /te:explicit-route-exclude-objects
                  /te:route-object-exclude-object/te:type/te:label
                  /te:label-hop/te:te-label/te:technology:
    +--:(otn)
       +--rw tpn?       uint16
       +--rw tsg?       identityref
       +--rw ts-list?   string
  augment /te:te/te:tunnels/te:tunnel/te:p2p-secondary-paths
          /te:p2p-secondary-path/te:optimizations/te:algorithm
                  /te:metric/te:optimization-metric
                  /te:explicit-route-include-objects
                  /te:route-object-include-object/te:type/te:label
                  /te:label-hop/te:te-label/te:technology:
    +--:(otn)
       +--rw tpn?       uint16
       +--rw tsg?       identityref
       +--rw ts-list?   string
  augment /te:te/te:tunnels/te:tunnel/te:p2p-secondary-paths
          /te:p2p-secondary-path/te:explicit-route-objects-always
                  /te:route-object-exclude-always/te:type/te:label
                  /te:label-hop/te:te-label/te:technology:
    +--:(otn)
       +--rw tpn?       uint16
       +--rw tsg?       identityref
       +--rw ts-list?   string
  augment /te:te/te:tunnels/te:tunnel/te:p2p-secondary-paths
          /te:p2p-secondary-path/te:explicit-route-objects-always
                  /te:route-object-include-exclude/te:type/te:label
                  /te:label-hop/te:te-label/te:technology:
    +--:(otn)
       +--rw tpn?       uint16
       +--rw tsg?       identityref



Zheng, et al.            Expires April 25, 2020                [Page 11]

Internet-Draft            OTN Tunnel YANG Model             October 2019


       +--rw ts-list?   string
  augment /te:te/te:tunnels/te:tunnel/te:p2p-secondary-paths
          /te:p2p-secondary-path/te:path-in-segment
                  /te:label-restrictions/te:label-restriction:
    +--rw range-type?   identityref
    +--rw tsg?          identityref
    +--rw priority?     uint8
  augment /te:te/te:tunnels/te:tunnel/te:p2p-secondary-paths
          /te:p2p-secondary-path/te:path-in-segment
                  /te:label-restrictions/te:label-restriction
                  /te:label-start/te:te-label/te:technology:
    +--:(otn)
       +--rw (otn-label-type)?
          +--:(tributary-port)
          |  +--rw tpn?   uint16
          +--:(tributary-slot)
             +--rw ts?    uint16
  augment /te:te/te:tunnels/te:tunnel/te:p2p-secondary-paths
          /te:p2p-secondary-path/te:path-in-segment
                  /te:label-restrictions/te:label-restriction
                  /te:label-end/te:te-label/te:technology:
    +--:(otn)
       +--rw (otn-label-type)?
          +--:(tributary-port)
          |  +--rw tpn?   uint16
          +--:(tributary-slot)
             +--rw ts?    uint16
  augment /te:te/te:tunnels/te:tunnel/te:p2p-secondary-paths
          /te:p2p-secondary-path/te:path-out-segment
                  /te:label-restrictions/te:label-restriction:
    +--rw range-type?   identityref
    +--rw tsg?          identityref
    +--rw priority?     uint8
  augment /te:te/te:tunnels/te:tunnel/te:p2p-secondary-paths
          /te:p2p-secondary-path/te:path-out-segment
                  /te:label-restrictions/te:label-restriction
                  /te:label-start/te:te-label/te:technology:
    +--:(otn)
       +--rw (otn-label-type)?
          +--:(tributary-port)
          |  +--rw tpn?   uint16
          +--:(tributary-slot)
             +--rw ts?    uint16
  augment /te:te/te:tunnels/te:tunnel/te:p2p-secondary-paths
          /te:p2p-secondary-path/te:path-out-segment
                  /te:label-restrictions/te:label-restriction
                  /te:label-end/te:te-label/te:technology:
    +--:(otn)



Zheng, et al.            Expires April 25, 2020                [Page 12]

Internet-Draft            OTN Tunnel YANG Model             October 2019


       +--rw (otn-label-type)?
          +--:(tributary-port)
          |  +--rw tpn?   uint16
          +--:(tributary-slot)
             +--rw ts?    uint16
  augment /te:te/te:tunnels/te:tunnel/te:p2p-secondary-paths
          /te:p2p-secondary-path/te:computed-paths-properties
                  /te:computed-path-properties/te:path-properties
                  /te:path-route-objects/te:path-computed-route-object
                  /te:type/te:label/te:label-hop/te:te-label/te:technology:
    +--:(otn)
       +--ro tpn?       uint16
       +--ro tsg?       identityref
       +--ro ts-list?   string
  augment /te:te/te:tunnels/te:tunnel/te:p2p-secondary-paths
          /te:p2p-secondary-path/te:lsps/te:lsp
                  /te:lsp-record-route-information
                  /te:lsp-record-route-information/te:type/te:label
                  /te:label-hop/te:te-label/te:technology:
    +--:(otn)
       +--ro tpn?       uint16
       +--ro tsg?       identityref
       +--ro ts-list?   string
  augment /te:te/te:tunnels/te:tunnel/te:p2p-secondary-paths
          /te:p2p-secondary-path/te:lsps/te:lsp/te:path-properties
                  /te:path-route-objects/te:path-computed-route-object
                  /te:type/te:label/te:label-hop/te:te-label/te:technology:
    +--:(otn)
       +--ro tpn?       uint16
       +--ro tsg?       identityref
       +--ro ts-list?   string
  augment /te:te/te:lsps-state/te:lsp
          /te:lsp-record-route-information
                  /te:lsp-record-route-information/te:type/te:label
                  /te:label-hop/te:te-label/te:technology:
    +--:(otn)
       +--ro tpn?       uint16
       +--ro tsg?       identityref
       +--ro ts-list?   string


5.  OTN Tunnel YANG Code


<CODE BEGINS>file "ietf-otn-tunnel@2019-10-23.yang"
module ietf-otn-tunnel {
  yang-version 1.1;
  namespace "urn:ietf:params:xml:ns:yang:ietf-otn-tunnel";



Zheng, et al.            Expires April 25, 2020                [Page 13]

Internet-Draft            OTN Tunnel YANG Model             October 2019


  prefix "otn-tunnel";

  import ietf-te {
    prefix "te";
    reference
    "I-D.ietf-teas-yang-te: A YANG Data Model for Traffic Engineering
    Tunnels and Interfaces. ";
  }

  import ietf-layer1-types {
    prefix "layer1-types";
    reference
    "I-D.ietf-ccamp-layer1-types: A YANG Data Model for Layer 1 Types. ";
  }

  organization
    "IETF CCAMP Working Group";
  contact
    "WG Web: <http://tools.ietf.org/wg/ccamp/>
     WG List: <mailto:ccamp@ietf.org>

     Editor: Haomian Zheng
             <mailto:zhenghaomian@huawei.com>

     Editor: Italo Busi
             <mailto:italo.busi@huawei.com>

     Editor: Sergio Belotti
             <mailto:sergio.belotti@nokia.com>

     Editor: Victor Lopez
             <mailto:victor.lopezalvarez@telefonica.com>

     Editor: Yunbin Xu
             <mailto:xuyunbin@ritt.cn>";

  description
    "This module defines a model for OTN Tunnel Services.

    Copyright (c) 2019 IETF Trust and the persons
          identified as authors of the code.  All rights reserved.

        Redistribution and use in source and binary forms, with or
        without modification, is permitted pursuant to, and subject
        to the license terms contained in, the Simplified BSD License
        set forth in Section 4.c of the IETF Trust's Legal Provisions
        Relating to IETF Documents
        (https://trustee.ietf.org/license-info).";



Zheng, et al.            Expires April 25, 2020                [Page 14]

Internet-Draft            OTN Tunnel YANG Model             October 2019


  revision "2019-10-23" {
    description
      "Initial Revision";
    reference
      "RFC XXXX: OTN Tunnel YANG Model";
    // RFC Ed.: replace XXXX with actual RFC number, update date
    // information and remove this note
  }

 /*
  * Groupings
  */

  grouping otn-tunnel-attributes {
    description "Parameters for OTN tunnel";

    leaf src-client-signal {
      type identityref {
        base layer1-types:client-signal;
      }
      description
        "Client signal at the source endpoint of the tunnel. ";
    }

    leaf dst-client-signal {
      type identityref {
        base layer1-types:client-signal;
      }
      description
        "Client signal at the destination endpoint of the tunnel";
    }

 }

 /*
  * Data nodes
  */

  augment "/te:te/te:tunnels/te:tunnel" {
    description
      "Augment with additional parameters required for OTN service";
    uses otn-tunnel-attributes;
  }

  /*
   * Augment TE bandwidth
   */




Zheng, et al.            Expires April 25, 2020                [Page 15]

Internet-Draft            OTN Tunnel YANG Model             October 2019


         /* Augment bandwidth of named-path-constraints */
  augment "/te:te/te:globals/te:named-path-constraints/"
        + "te:named-path-constraint/"
        + "te:te-bandwidth/te:technology" {
    description "OTN bandwidth.";
    case otn {
      uses layer1-types:otn-path-bandwidth;
    }
  }

  /* Augment bandwdith of tunnel */
  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:te-bandwidth/te:technology" {
    description "OTN bandwidth.";
    case otn {
      uses layer1-types:otn-path-bandwidth;
    }
  }

  /* Augment bandwidth of primary path */
  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-primary-paths/te:p2p-primary-path/"
        + "te:te-bandwidth/te:technology" {
    description "OTN bandwidth.";
    case otn {
      uses layer1-types:otn-path-bandwidth;
    }
  }

  /* Augment bandwidth of reverse primary path */
  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-primary-paths/te:p2p-primary-path/"
        + "te:p2p-primary-reverse-path/"
        + "te:te-bandwidth/te:technology" {
    description "OTN bandwidth.";
    case otn {
      uses layer1-types:otn-path-bandwidth;
    }
  }

  /* Augment bandwidth of secondary path */
  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-secondary-paths/te:p2p-secondary-path/"
        + "te:te-bandwidth/te:technology" {
    description "OTN bandwidth.";
    case otn {
      uses layer1-types:otn-path-bandwidth;
    }



Zheng, et al.            Expires April 25, 2020                [Page 16]

Internet-Draft            OTN Tunnel YANG Model             October 2019


  }

  /*
   * Augment TE label.
   */

  /* Augment label hop of route-object-exclude-always of named-path-constraints */
  augment "/te:te/te:globals/te:named-path-constraints/"
        + "te:named-path-constraint/te:explicit-route-objects-always/"
        + "te:route-object-exclude-always/te:type/te:label/"
        + "te:label-hop/te:te-label/te:technology" {
    description "OTN label.";
    case otn {
      uses layer1-types:otn-path-label;
    }
  }

  /* Augment label hop of route-object-include-exclude of named-path-constraints */
  augment "/te:te/te:globals/te:named-path-constraints/"
        + "te:named-path-constraint/te:explicit-route-objects-always/"
        + "te:route-object-include-exclude/te:type/te:label/"
        + "te:label-hop/te:te-label/te:technology" {
    description "OTN label.";
    case otn {
      uses layer1-types:otn-path-label;
    }
  }

  /* Augment label restrictions for the forwarding direction of path-in-segment of named-path-constraints */
  augment "/te:te/te:globals/te:named-path-constraints/"
        + "te:named-path-constraint/te:path-in-segment/"
        + "te:label-restrictions/te:label-restriction"  {
    description "OTN label.";
    uses layer1-types:otn-label-restriction;
  }

  /* Augment label restrictions start for the forwarding direction of path-in-segment of named-path-constraints */
  augment "/te:te/te:globals/te:named-path-constraints/"
        + "te:named-path-constraint/te:path-in-segment/"
        + "te:label-restrictions/"
        + "te:label-restriction/te:label-start/"
        + "te:te-label/te:technology" {
    description "OTN label.";
    case otn {
      uses layer1-types:otn-link-label;
    }
  }




Zheng, et al.            Expires April 25, 2020                [Page 17]

Internet-Draft            OTN Tunnel YANG Model             October 2019


  /* Augment label restrictions end for the forwarding direction of path-in-segment of named-path-constraints */
  augment "/te:te/te:globals/te:named-path-constraints/"
        + "te:named-path-constraint/te:path-in-segment/"
        + "te:label-restrictions/"
        + "te:label-restriction/te:label-end/"
        + "te:te-label/te:technology" {
    description "OTN label.";
    case otn {
      uses layer1-types:otn-link-label;
    }
  }

  /* Augment label restrictions for the forwarding direction of path-out-segment of named-path-constraints */
  augment "/te:te/te:globals/te:named-path-constraints/"
        + "te:named-path-constraint/te:path-out-segment/"
        + "te:label-restrictions/"
        + "te:label-restriction" {
    description "OTN label.";
    uses layer1-types:otn-label-restriction;
  }
  /* Augment label restrictions start for the forwarding direction of path-out-segment of named-path-constraints */
  augment "/te:te/te:globals/te:named-path-constraints/"
        + "te:named-path-constraint/te:path-out-segment/"
        + "te:label-restrictions/"
        + "te:label-restriction/te:label-start/"
        + "te:te-label/te:technology" {
    description "OTN label.";
    case otn {
      uses layer1-types:otn-link-label;
    }
  }

  /* Augment label restrictions end for the forwarding direction of path-out-segment of named-path-constraints */
  augment "/te:te/te:globals/te:named-path-constraints/"
        + "te:named-path-constraint/te:path-out-segment/"
        + "te:label-restrictions/"
        + "te:label-restriction/te:label-end/"
        + "te:te-label/te:technology" {
    description "OTN label.";
    case otn {
      uses layer1-types:otn-link-label;
    }
  }

  /* Augment label hop of route-exclude of primary path */
  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-primary-paths/te:p2p-primary-path/"
        + "te:optimizations/te:algorithm/te:metric/"



Zheng, et al.            Expires April 25, 2020                [Page 18]

Internet-Draft            OTN Tunnel YANG Model             October 2019


        + "te:optimization-metric/te:explicit-route-exclude-objects/"
        + "te:route-object-exclude-object/te:type/te:label/"
        + "te:label-hop/te:te-label/te:technology" {
    description "OTN label.";
    case otn {
      uses layer1-types:otn-path-label;
    }
  }

  /* Augment label hop of route-include of primary path */
  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-primary-paths/te:p2p-primary-path/"
        + "te:optimizations/te:algorithm/te:metric/"
        + "te:optimization-metric/te:explicit-route-include-objects/"
        + "te:route-object-include-object/te:type/te:label/"
        + "te:label-hop/te:te-label/te:technology" {
    description "OTN label.";
    case otn {
      uses layer1-types:otn-path-label;
    }
  }

  /* Augment label hop of route-object-exclude-always of primary path */
  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-primary-paths/te:p2p-primary-path/"
        + "te:explicit-route-objects-always/"
        + "te:route-object-exclude-always/te:type/te:label/"
        + "te:label-hop/te:te-label/te:technology" {
    description "OTN label.";
    case otn {

      uses layer1-types:otn-path-label;
    }
  }

  /* Augment label hop of route-object-include-exclude of primary path */
  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-primary-paths/te:p2p-primary-path/"
        + "te:explicit-route-objects-always/"
        + "te:route-object-include-exclude/te:type/te:label/"
        + "te:label-hop/te:te-label/te:technology" {
    description "OTN label.";
    case otn {
      uses layer1-types:otn-path-label;
    }
  }

  /* Augment label restrictions for the forwarding direction of path-in-segment of primary path */



Zheng, et al.            Expires April 25, 2020                [Page 19]

Internet-Draft            OTN Tunnel YANG Model             October 2019


  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-primary-paths/te:p2p-primary-path/"
        + "te:path-in-segment/te:label-restrictions/"
        + "te:label-restriction" {
    description "OTN label.";
    uses layer1-types:otn-label-restriction;
  }

  /* Augment label restrictions start for the forwarding direction of path-in-segment of primary path */
  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-primary-paths/te:p2p-primary-path/"
        + "te:path-in-segment/te:label-restrictions/"
        + "te:label-restriction/te:label-start/"
        + "te:te-label/te:technology" {
    description "OTN label.";
    case otn {
      uses layer1-types:otn-link-label;
    }
  }

  /* Augment label restrictions end for the forwarding direction of path-in-segment of primary path */
  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-primary-paths/te:p2p-primary-path/"
        + "te:path-in-segment/te:label-restrictions/"
        + "te:label-restriction/te:label-end/"
        + "te:te-label/te:technology" {
    description "OTN label.";
    case otn {
      uses layer1-types:otn-link-label;
    }
  }

  /* Augment label restrictions for the forwarding direction of path-out-segment of primary path */
  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-primary-paths/te:p2p-primary-path/"
        + "te:path-out-segment/te:label-restrictions/"
        + "te:label-restriction" {
    description "OTN label.";
    uses layer1-types:otn-label-restriction;
  }

  /* Augment label restrictions start for the forwarding direction of path-out-segment of primary path */
  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-primary-paths/te:p2p-primary-path/"
        + "te:path-out-segment/te:label-restrictions/"
        + "te:label-restriction/te:label-start/"
        + "te:te-label/te:technology" {




Zheng, et al.            Expires April 25, 2020                [Page 20]

Internet-Draft            OTN Tunnel YANG Model             October 2019


    description "OTN label.";
    case otn {
      uses layer1-types:otn-link-label;
    }
  }

  /* Augment label restrictions end for the forwarding direction of path-out-segment of primary path */
  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-primary-paths/te:p2p-primary-path/"
        + "te:path-out-segment/te:label-restrictions/"
        + "te:label-restriction/te:label-end/"
        + "te:te-label/te:technology" {
    description "OTN label.";
    case otn {
      uses layer1-types:otn-link-label;
    }
  }

  /* Augment label hop of path-route of primary path */
  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-primary-paths/te:p2p-primary-path/"
        + "te:computed-paths-properties/"
        + "te:computed-path-properties/te:path-properties/"
        + "te:path-route-objects/te:path-computed-route-object/"
        + "te:type/te:label/"
        + "te:label-hop/te:te-label/te:technology" {
    description "OTN label.";
    case otn {
      uses layer1-types:otn-path-label;
    }
  }

  /* Augment label hop of record-route of primary LSP */
  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-primary-paths/te:p2p-primary-path/"
        + "te:lsps/te:lsp/te:lsp-record-route-information/"
        + "te:lsp-record-route-information/te:type/te:label/"
        + "te:label-hop/te:te-label/te:technology" {
    description "OTN label.";
    case otn {
      uses layer1-types:otn-path-label;
    }
  }

  /* Augment label hop of path-route of primary LSP */
  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-primary-paths/te:p2p-primary-path/"
        + "te:lsps/te:lsp/te:path-properties/"



Zheng, et al.            Expires April 25, 2020                [Page 21]

Internet-Draft            OTN Tunnel YANG Model             October 2019


        + "te:path-route-objects/te:path-computed-route-object/"
        + "te:type/te:label/"
        + "te:label-hop/te:te-label/te:technology" {
    description "OTN label.";
    case otn {
      uses layer1-types:otn-path-label;
    }
  }

  /* Augment label hop of route-exclude of reverse primary path */
  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-primary-paths/te:p2p-primary-path/"
        + "te:p2p-primary-reverse-path/"
        + "te:optimizations/te:algorithm/te:metric/"
        + "te:optimization-metric/te:explicit-route-exclude-objects/"
        + "te:route-object-exclude-object/te:type/te:label/"
        + "te:label-hop/te:te-label/te:technology" {
    description "OTN label.";
    case otn {
      uses layer1-types:otn-path-label;
    }
  }

  /* Augment label hop of route-include of reverse primary path */
  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-primary-paths/te:p2p-primary-path/"
        + "te:p2p-primary-reverse-path/"
        + "te:optimizations/te:algorithm/te:metric/"
        + "te:optimization-metric/te:explicit-route-include-objects/"
        + "te:route-object-include-object/te:type/te:label/"
        + "te:label-hop/te:te-label/te:technology" {
    description "OTN label.";
    case otn {
      uses layer1-types:otn-path-label;
    }
  }

  /* Augment label hop of route-object-exclude-always of reverse primary path */
  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-primary-paths/te:p2p-primary-path/"
        + "te:p2p-primary-reverse-path/"
        + "te:explicit-route-objects-always/"
        + "te:route-object-exclude-always/"
        + "te:type/te:label/"
        + "te:label-hop/te:te-label/te:technology" {
    description "OTN label.";
    case otn {
      uses layer1-types:otn-path-label;



Zheng, et al.            Expires April 25, 2020                [Page 22]

Internet-Draft            OTN Tunnel YANG Model             October 2019


    }
  }

  /* Augment label hop of route-object-include-exclude of reverse primary path */
  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-primary-paths/te:p2p-primary-path/"
        + "te:p2p-primary-reverse-path/"
        + "te:explicit-route-objects-always/"
        + "te:route-object-include-exclude/"
        + "te:type/te:label/"
        + "te:label-hop/te:te-label/te:technology" {
    description "OTN label.";
    case otn {
      uses layer1-types:otn-path-label;
    }
  }

  /* Augment label restrictions for the forwarding direction of path-in-segment of reverse primary path */
  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-primary-paths/te:p2p-primary-path/"
        + "te:p2p-primary-reverse-path/"
        + "te:path-in-segment/te:label-restrictions/"
        + "te:label-restriction" {
    description "OTN label.";
    uses layer1-types:otn-label-restriction;
  }

  /* Augment label restrictions start for the forwarding direction of path-in-segment of reverse primary path */
  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-primary-paths/te:p2p-primary-path/"
        + "te:p2p-primary-reverse-path/"
        + "te:path-in-segment/te:label-restrictions/"
        + "te:label-restriction/te:label-start/"
        + "te:te-label/te:technology" {
    description "OTN label.";
    case otn {
      uses layer1-types:otn-link-label;
    }
  }

  /* Augment label restrictions end for the forwarding direction of path-in-segment of reverse primary path */
  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-primary-paths/te:p2p-primary-path/"
        + "te:p2p-primary-reverse-path/"
        + "te:path-in-segment/te:label-restrictions/"
        + "te:label-restriction/te:label-end/"
        + "te:te-label/te:technology" {
    description "OTN label.";



Zheng, et al.            Expires April 25, 2020                [Page 23]

Internet-Draft            OTN Tunnel YANG Model             October 2019


    case otn {
      uses layer1-types:otn-link-label;
    }
  }

  /* Augment label restrictions for the forwarding direction of path-out-segment of reverse primary path */
  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-primary-paths/te:p2p-primary-path/"
        + "te:p2p-primary-reverse-path/"
        + "te:path-out-segment/te:label-restrictions/"
        + "te:label-restriction" {
    description "OTN label.";
    uses layer1-types:otn-label-restriction;
  }

  /* Augment label restrictions start for the forwarding direction of path-out-segment of reverse primary path */
  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-primary-paths/te:p2p-primary-path/"
        + "te:p2p-primary-reverse-path/"
        + "te:path-out-segment/te:label-restrictions/"
        + "te:label-restriction/te:label-start/"
        + "te:te-label/te:technology" {
    description "OTN label.";
    case otn {
      uses layer1-types:otn-link-label;
    }
  }

  /* Augment label restrictions end for the forwarding direction of path-out-segment of reverse primary path */

  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-primary-paths/te:p2p-primary-path/"
        + "te:p2p-primary-reverse-path/"
        + "te:path-out-segment/te:label-restrictions/"
        + "te:label-restriction/te:label-end/"
        + "te:te-label/te:technology" {
    description "OTN label.";
    case otn {
      uses layer1-types:otn-link-label;
    }
  }

  /* Augment label hop of path-route of reverse primary path */
  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-primary-paths/te:p2p-primary-path/"
        + "te:p2p-primary-reverse-path/"
        + "te:computed-paths-properties/te:computed-path-properties/te:path-properties/"
        + "te:path-route-objects/te:path-computed-route-object/"



Zheng, et al.            Expires April 25, 2020                [Page 24]

Internet-Draft            OTN Tunnel YANG Model             October 2019


        + "te:type/te:label/"
        + "te:label-hop/te:te-label/te:technology" {
    description "OTN label.";
    case otn {
      uses layer1-types:otn-path-label;
    }
  }

  /* Augment label hop of record-route of reverse primary LSP */
  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-primary-paths/te:p2p-primary-path/"
        + "te:p2p-primary-reverse-path/"
        + "te:lsps/te:lsp/te:lsp-record-route-information/"
        + "te:lsp-record-route-information/te:type/te:label/"
        + "te:label-hop/te:te-label/te:technology" {
    description "OTN label.";
    case otn {
      uses layer1-types:otn-path-label;
    }
  }

  /* Augment label hop of path-route of reverse primary LSP */
  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-primary-paths/te:p2p-primary-path/"
        + "te:p2p-primary-reverse-path/"
        + "te:lsps/te:lsp/te:path-properties/"
        + "te:path-route-objects/te:path-computed-route-object/"
        + "te:type/te:label/"
        + "te:label-hop/te:te-label/te:technology" {
    description "OTN label.";
    case otn {
      uses layer1-types:otn-path-label;
    }
  }

  /* Augment label hop of route-exclude of secondary path */
  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-secondary-paths/te:p2p-secondary-path/"
        + "te:optimizations/te:algorithm/te:metric/"
        + "te:optimization-metric/te:explicit-route-exclude-objects/"
        + "te:route-object-exclude-object/te:type/te:label/"
        + "te:label-hop/te:te-label/te:technology" {

    description "OTN label.";
    case otn {
      uses layer1-types:otn-path-label;
    }
  }



Zheng, et al.            Expires April 25, 2020                [Page 25]

Internet-Draft            OTN Tunnel YANG Model             October 2019


  /* Augment label hop of route-include of secondary path */
  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-secondary-paths/te:p2p-secondary-path/"
        + "te:optimizations/te:algorithm/te:metric/"
        + "te:optimization-metric/te:explicit-route-include-objects/"
        + "te:route-object-include-object/te:type/te:label/"
        + "te:label-hop/te:te-label/te:technology" {
    description "OTN label.";
    case otn {
      uses layer1-types:otn-path-label;
    }
  }

  /* Augment label hop of route-object-exclude-always of secondary path */
  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-secondary-paths/te:p2p-secondary-path/"
        + "te:explicit-route-objects-always/"
        + "te:route-object-exclude-always/te:type/te:label/"
        + "te:label-hop/te:te-label/te:technology" {
    description "OTN label.";
    case otn {
      uses layer1-types:otn-path-label;
    }
  }

  /* Augment label hop of route-object-include-exclude of secondary path */
  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-secondary-paths/te:p2p-secondary-path/"
        + "te:explicit-route-objects-always/"
        + "te:route-object-include-exclude/te:type/te:label/"
        + "te:label-hop/te:te-label/te:technology" {
    description "OTN label.";
    case otn {
      uses layer1-types:otn-path-label;
    }
  }

  /* Augment label restrictions for the forwarding direction of path-in-segment of secondary path */
  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-secondary-paths/te:p2p-secondary-path/"
        + "te:path-in-segment/te:label-restrictions/"
        + "te:label-restriction" {

    description "OTN label.";
    uses layer1-types:otn-label-restriction;
  }

  /* Augment label restrictions start for the forwarding direction of path-in-segment of secondary path */



Zheng, et al.            Expires April 25, 2020                [Page 26]

Internet-Draft            OTN Tunnel YANG Model             October 2019


  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-secondary-paths/te:p2p-secondary-path/"
        + "te:path-in-segment/te:label-restrictions/"
        + "te:label-restriction/te:label-start/"
        + "te:te-label/te:technology" {
    description "OTN label.";
    case otn {
      uses layer1-types:otn-link-label;
    }
  }

  /* Augment label restrictions end for the forwarding direction of path-in-segment of secondary path */
  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-secondary-paths/te:p2p-secondary-path/"
        + "te:path-in-segment/te:label-restrictions/"
        + "te:label-restriction/te:label-end/"
        + "te:te-label/te:technology" {
    description "OTN label.";
    case otn {
      uses layer1-types:otn-link-label;
    }
  }

  /* Augment label restrictions for the forwarding direction of path-out-segment of secondary path */
  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-secondary-paths/te:p2p-secondary-path/"
        + "te:path-out-segment/te:label-restrictions/"
        + "te:label-restriction" {
    description "OTN label.";
    uses layer1-types:otn-label-restriction;
  }

  /* Augment label restrictions start for the forwarding direction of path-out-segment of secondary path */
  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-secondary-paths/te:p2p-secondary-path/"
        + "te:path-out-segment/te:label-restrictions/"
        + "te:label-restriction/te:label-start/"
        + "te:te-label/te:technology" {
    description "OTN label.";
    case otn {
      uses layer1-types:otn-link-label;
    }
  }

  /* Augment label restrictions end for the forwarding direction of path-out-segment of secondary path */
  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-secondary-paths/te:p2p-secondary-path/"
        + "te:path-out-segment/te:label-restrictions/"



Zheng, et al.            Expires April 25, 2020                [Page 27]

Internet-Draft            OTN Tunnel YANG Model             October 2019


        + "te:label-restriction/te:label-end/"
        + "te:te-label/te:technology" {
    description "OTN label.";
    case otn {
      uses layer1-types:otn-link-label;
    }
  }

  /* Augment label hop of path-route of secondary path */
  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-secondary-paths/te:p2p-secondary-path/"
                + "te:computed-paths-properties/te:computed-path-properties/"
        + "te:path-properties/te:path-route-objects/"
        + "te:path-computed-route-object/te:type/te:label/"
        + "te:label-hop/te:te-label/te:technology" {
    description "OTN label.";
    case otn {
      uses layer1-types:otn-path-label;
    }
  }

  /* Augment label hop of record-route of secondary LSP */
  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-secondary-paths/te:p2p-secondary-path/"
        + "te:lsps/te:lsp/te:lsp-record-route-information/"
        + "te:lsp-record-route-information/te:type/te:label/"
        + "te:label-hop/te:te-label/te:technology" {

    description "OTN label.";
    case otn {
      uses layer1-types:otn-path-label;
    }
  }

  /* Augment label hop of path-route of secondary LSP */
  augment "/te:te/te:tunnels/te:tunnel/"
        + "te:p2p-secondary-paths/te:p2p-secondary-path/"
        + "te:lsps/te:lsp/te:path-properties/"
        + "te:path-route-objects/"
        + "te:path-computed-route-object/te:type/te:label/"
        + "te:label-hop/te:te-label/te:technology" {
    description "OTN label.";
    case otn {
      uses layer1-types:otn-path-label;
    }
  }

  /* Augment label hop of record-route of LSP */



Zheng, et al.            Expires April 25, 2020                [Page 28]

Internet-Draft            OTN Tunnel YANG Model             October 2019


  augment "/te:te/te:lsps-state/"
        + "te:lsp/te:lsp-record-route-information/"
        + "te:lsp-record-route-information/te:type/te:label/"
        + "te:label-hop/te:te-label/te:technology" {
    description "OTN label.";
    case otn {
      uses layer1-types:otn-path-label;
    }
  }
/*
  grouping p2p-path-ero {
    description
      "TE tunnel ERO configuration grouping";

    leaf te-default-metric {
      type uint32;
      description
        "Traffic engineering metric.";
    }
    leaf te-delay-metric {
      type uint32;
      description
        "Traffic engineering delay metric.";
    }
    leaf te-hop-metric {
      type uint32;
      description
        "Traffic engineering hop metric.";

    }
    container explicit-route-objects-always {
      description "Explicit route objects container";
      list route-object-include-exclude {
        key "index";
        description
          "List of explicit route objects";
        leaf explicit-route-usage {
          type identityref {
            base te-types:route-usage-type;
          }
          description "An explicit-route hop action.";
        }
        uses te-types:explicit-route-hop {
                  augment "type/label/label-hop/te-label/technology" {
                    description "OTN label.";
            case otn {
                  uses layer1-types:otn-path-label;
                }



Zheng, et al.            Expires April 25, 2020                [Page 29]

Internet-Draft            OTN Tunnel YANG Model             October 2019


                  }
                }
      }
    }
  }
*/
/*
  rpc otn-te-tunnel-path-compute {
    description "OTN TE tunnel path computation";
    input {
      list request {
        key "id";
        description "A list of path computation requests.";

        leaf id {
          type uint8;
          description
            "Request ID.";
        }
        leaf type {
          type identityref {
            base te-types:te-tunnel-type;
          }
          description "TE tunnel type.";
        }
        leaf source {
          type inet:ip-address;
          description
            "TE tunnel source address.";
        }

        leaf destination {
          type inet:ip-address;
          description
            "TE tunnel destination address";
        }
        leaf src-tp-id {
          type binary;
          description
            "TE tunnel source termination point identifier.";
        }
        leaf dst-tp-id {
          type binary;
          description
            "TE tunnel destination termination point identifier.";
        }
        leaf switching-layer {
          type identityref {



Zheng, et al.            Expires April 25, 2020                [Page 30]

Internet-Draft            OTN Tunnel YANG Model             October 2019


            base te-types:switching-capabilities;
          }
          description
            "Switching layer where the requests are computed.";
        }
        leaf encoding {
          type identityref {
            base te-types:lsp-encoding-types;
          }
          description "LSP encoding type";
        }
        leaf protection-type {
          type identityref {
            base te-types:lsp-protection-type;
          }
          description "LSP protection type";
        }
        leaf restoration-type {
          type identityref {
            base te-types:lsp-restoration-type;
          }
          description "LSP restoration type";
        }
        leaf provider-id {
          type te-types:te-global-id;
          description
            "An identifier to uniquely identify a provider.";
        }
        leaf client-id {
          type te-types:te-global-id;
          description

            "An identifier to uniquely identify a client.";
        }
        leaf te-topology-id {
          type te-types:te-topology-id;
          description
            "It is presumed that a datastore will contain many
             topologies. To distinguish between topologies it is
             vital to have UNIQUE topology identifiers.";
        }
        leaf setup-priority {
          type uint8 {
            range "0..7";
          }
          description
            "TE LSP setup priority";
        }



Zheng, et al.            Expires April 25, 2020                [Page 31]

Internet-Draft            OTN Tunnel YANG Model             October 2019


        leaf hold-priority {
          type uint8 {
            range "0..7";
          }
          description
            "TE LSP hold priority";
        }
        leaf te-path-metric-type {
          type identityref {
            base te-types:path-metric-type;
          }
          default te-types:path-metric-te;
          description
            "The tunnel path metric type.";
        }

        leaf odu-type {
          type identityref{
            base layer1-types:odu-type;
          }
          description "Type of ODU";
        }
        container p2p-primary-paths {
          description "Set of P2P primary paths container";
          list p2p-primary-path {
            key "name";
            description
              "List of primary paths for this tunnel.";
            leaf name {
              type string;
              description "TE path name";
            }

            uses p2p-path-ero;
          }
        }
        container p2p-secondary-paths {
          description "Set of P2P secondary paths container";
          list p2p-secondary-path {
            key "name";
            description
              "List of secondary paths for this tunnel.";
            leaf name {
              type string;
              description "TE path name";
            }
            uses p2p-path-ero;
          }



Zheng, et al.            Expires April 25, 2020                [Page 32]

Internet-Draft            OTN Tunnel YANG Model             October 2019


        }
        uses otn-tunnel-attributes;
      }
    }
    output {
      leaf return-code {
        type enumeration {
          enum success {
            description "success";
          }
          enum aborted {
            description "aborted";
          }
          enum destination-not-found {
            description "destination-not-found";
          }
          enum invalid-argument {
            description "invalid-argument";
          }
          enum no-memory {
            description "no-memory";
          }
          enum no-path-found {
            description "no-path-found";
          }
          enum other-error {
            description "other-error";
          }
          enum some-path-not-found {
            description "some-path-not-found";
          }
          enum source-not-found {
            description "source-not-found";

          }
          enum topology-error {
            description "topology-error";
          }
        }
        description
          "Return code";
      }
      list result {
        key "id";
        description
          "A list of results for all requests.";

        leaf id {



Zheng, et al.            Expires April 25, 2020                [Page 33]

Internet-Draft            OTN Tunnel YANG Model             October 2019


          type uint8;
          description
            "Request ID";
        }
        container p2p-primary-paths {
          description "Set of P2P primary paths container";
          list p2p-primary-path {
            key "name";
            description
              "List of resultant primary paths for this tunnel.";
            leaf name {
              type string;
              description "TE path name";
            }
            uses p2p-path-ero;
          }
        }
        container p2p-secondary-paths {
          description "Set of P2P secondary paths container";
          list p2p-secondary-path {
            key "name";
            description
              "List of resultant secondary paths for this tunnel.";
            leaf name {
              type string;
              description "TE path name";
            }
            uses p2p-path-ero;
          }
        }
      }
    }
  }*/
}

<CODE ENDS>



6.  Security Considerations

   The YANG module specified in this document defines a schema for data
   that is designed to be accessed via network management protocols such
   as NETCONF [RFC6241] or RESTCONF [RFC8040].  The lowest NETCONF layer
   is the secure transport layer, and the mandatory-to-implement secure
   transport is Secure Shell (SSH) [RFC6242].  The lowest RESTCONF layer
   is HTTPS, and the mandatory-to-implement secure transport is TLS
   [RFC8446].



Zheng, et al.            Expires April 25, 2020                [Page 34]

Internet-Draft            OTN Tunnel YANG Model             October 2019


   The NETCONF access control model [RFC8341] provides the means to
   restrict access for particular NETCONF or RESTCONF users to a
   preconfigured subset of all available NETCONF or RESTCONF protocol
   operations and content.

   There are a number of data nodes defined in this YANG module that are
   writable/creatable/deletable (i.e., config true, which is the
   default).  These data nodes may be considered sensitive or vulnerable
   in some network environments.  Write operations (e.g., edit-config)
   to these data nodes without proper protection can have a negative
   effect on network operations.  These are the subtrees and data nodes
   and their sensitivity/vulnerability:

   /te:te/te:tunnels/te:tunnel /te:te/../te:te-bandwidth/te:technology
   /te:te/../te:type/te:label/te:label-hop/te:te-label/te:technology
   /te:te/../te:label-restrictions/te:label-restriction/te:label-start/
   te:te-label/te:technology /te:te/../te:label-restrictions/te:label-
   restriction/te:label-end/te:te-label/te:technology
   /te:te/../te:label-restrictions/te:label-restriction/ Editors note:
   we are using simplified description by folding similar branches to
   avoid repetation.

   Some of the readable data nodes in this YANG module may be considered
   sensitive or vulnerable in some network environments.  It is thus
   important to control read access (e.g., via get, get-config, or
   notification) to these data nodes.  These are the subtrees and data
   nodes and their sensitivity/vulnerability:

   /te:te/../te:type/te:label/te:label-hop/te:te-label/te:technology
   Editors note: we are using simplified description by folding similar
   branches to avoid repetation.

   Some of the RPC operations in this YANG module may be considered
   sensitive or vulnerable in some network environments.  It is thus
   important to control access to these operations.  These are the
   operations and their sensitivity/vulnerability:

   +---x otn-te-tunnel-path-compute This path compute RPC provides a
   mechanism to enable the client to query and/or subscribe on the
   tunnel to be notified whenever it changes.  Thus path computation is
   only for the client reference, with no real deploy or resource
   reservation.

7.  IANA Considerations

   It is proposed that IANA should assign new URIs from the "IETF XML
   Registry" [RFC3688] as follows:




Zheng, et al.            Expires April 25, 2020                [Page 35]

Internet-Draft            OTN Tunnel YANG Model             October 2019


         URI: urn:ietf:params:xml:ns:yang:ietf-otn-tunnel
         Registrant Contact: The IESG
         XML: N/A; the requested URI is an XML namespace.

         URI: urn:ietf:params:xml:ns:yang:ietf-otn-types
         Registrant Contact: The IESG
         XML: N/A; the requested URI is an XML namespace.


   This document registers following YANG modules in the YANG Module
   Names registry [RFC7950].


      name:         ietf-otn-tunnel
      namespace:    urn:ietf:params:xml:ns:yang:ietf-otn-tunnel
      prefix:       otn-tunnel
      reference:    RFC XXXX

      name:         ietf-otn-types
      namespace:    urn:ietf:params:xml:ns:yang:ietf-otn-types
      prefix:       otn-types
      reference:    RFC XXXX


8.  Acknowledgements

   TBD.

9.  Contributors

   Aihua Guo
   Individual
   Email: aihuaguo.ietf@gmail.com

   Anurag Sharma
   Google
   Email: ansha@google.com

   Rajan Rao
   Infinera
   Email: rrao@infinera.com

   Yunbo Li
   China Mobile
   Email: liyunbo@chinamobile.com

   Dieter Beller
   Nokia



Zheng, et al.            Expires April 25, 2020                [Page 36]

Internet-Draft            OTN Tunnel YANG Model             October 2019


   Email: dieter.beller@nokia.com

   Yanlei Zheng
   China Unicom
   Email: zhengyl@dimpt.com

   Xian Zhang
   Huawei Technologies
   Email: zhang.xian@huawei.com

   Lei Wang
   China Mobile
   Email: wangleiyj@chinamobile.com

   Oscar Gonzalez de Dios
   Telefonica
   Email: oscar.gonzalezdedios@telefonica.com

10.  References

10.1.  Normative References

   [I-D.ietf-ccamp-otn-topo-yang]
              Zheng, H., Guo, A., Busi, I., Sharma, A., Liu, X.,
              Belotti, S., Xu, Y., Wang, L., and O. Dios, "A YANG Data
              Model for Optical Transport Network Topology", draft-ietf-
              ccamp-otn-topo-yang-08 (work in progress), September 2019.

   [I-D.ietf-teas-yang-te]
              Saad, T., Gandhi, R., Liu, X., Beeram, V., and I. Bryskin,
              "A YANG Data Model for Traffic Engineering Tunnels and
              Interfaces", draft-ietf-teas-yang-te-21 (work in
              progress), April 2019.

   [ITU-Tg709]
              International Telecommunication Union, "Interfaces for the
              optical transport network", ITU-T G.709, June 2016.

   [RFC3688]  Mealling, M., "The IETF XML Registry", BCP 81, RFC 3688,
              DOI 10.17487/RFC3688, January 2004,
              <https://www.rfc-editor.org/info/rfc3688>.

   [RFC6241]  Enns, R., Ed., Bjorklund, M., Ed., Schoenwaelder, J., Ed.,
              and A. Bierman, Ed., "Network Configuration Protocol
              (NETCONF)", RFC 6241, DOI 10.17487/RFC6241, June 2011,
              <https://www.rfc-editor.org/info/rfc6241>.





Zheng, et al.            Expires April 25, 2020                [Page 37]

Internet-Draft            OTN Tunnel YANG Model             October 2019


   [RFC6242]  Wasserman, M., "Using the NETCONF Protocol over Secure
              Shell (SSH)", RFC 6242, DOI 10.17487/RFC6242, June 2011,
              <https://www.rfc-editor.org/info/rfc6242>.

   [RFC7139]  Zhang, F., Ed., Zhang, G., Belotti, S., Ceccarelli, D.,
              and K. Pithewan, "GMPLS Signaling Extensions for Control
              of Evolving G.709 Optical Transport Networks", RFC 7139,
              DOI 10.17487/RFC7139, March 2014,
              <https://www.rfc-editor.org/info/rfc7139>.

   [RFC7950]  Bjorklund, M., Ed., "The YANG 1.1 Data Modeling Language",
              RFC 7950, DOI 10.17487/RFC7950, August 2016,
              <https://www.rfc-editor.org/info/rfc7950>.

   [RFC8040]  Bierman, A., Bjorklund, M., and K. Watsen, "RESTCONF
              Protocol", RFC 8040, DOI 10.17487/RFC8040, January 2017,
              <https://www.rfc-editor.org/info/rfc8040>.

   [RFC8341]  Bierman, A. and M. Bjorklund, "Network Configuration
              Access Control Model", STD 91, RFC 8341,
              DOI 10.17487/RFC8341, March 2018,
              <https://www.rfc-editor.org/info/rfc8341>.

   [RFC8342]  Bjorklund, M., Schoenwaelder, J., Shafer, P., Watsen, K.,
              and R. Wilton, "Network Management Datastore Architecture
              (NMDA)", RFC 8342, DOI 10.17487/RFC8342, March 2018,
              <https://www.rfc-editor.org/info/rfc8342>.

   [RFC8446]  Rescorla, E., "The Transport Layer Security (TLS) Protocol
              Version 1.3", RFC 8446, DOI 10.17487/RFC8446, August 2018,
              <https://www.rfc-editor.org/info/rfc8446>.

10.2.  Informative References

   [I-D.ietf-ccamp-transport-nbi-app-statement]
              Busi, I., King, D., Zheng, H., and Y. Xu, "Transport
              Northbound Interface Applicability Statement", draft-ietf-
              ccamp-transport-nbi-app-statement-06 (work in progress),
              September 2019.

   [I-D.ietf-teas-actn-yang]
              Lee, Y., Zheng, H., Ceccarelli, D., Yoon, B., Dios, O.,
              Shin, J., and S. Belotti, "Applicability of YANG models
              for Abstraction and Control of Traffic Engineered
              Networks", draft-ietf-teas-actn-yang-04 (work in
              progress), August 2019.





Zheng, et al.            Expires April 25, 2020                [Page 38]

Internet-Draft            OTN Tunnel YANG Model             October 2019


   [RFC7062]  Zhang, F., Ed., Li, D., Li, H., Belotti, S., and D.
              Ceccarelli, "Framework for GMPLS and PCE Control of G.709
              Optical Transport Networks", RFC 7062,
              DOI 10.17487/RFC7062, November 2013,
              <https://www.rfc-editor.org/info/rfc7062>.

   [RFC7138]  Ceccarelli, D., Ed., Zhang, F., Belotti, S., Rao, R., and
              J. Drake, "Traffic Engineering Extensions to OSPF for
              GMPLS Control of Evolving G.709 Optical Transport
              Networks", RFC 7138, DOI 10.17487/RFC7138, March 2014,
              <https://www.rfc-editor.org/info/rfc7138>.

   [RFC8340]  Bjorklund, M. and L. Berger, Ed., "YANG Tree Diagrams",
              BCP 215, RFC 8340, DOI 10.17487/RFC8340, March 2018,
              <https://www.rfc-editor.org/info/rfc8340>.

Authors' Addresses

   Haomian Zheng
   Huawei Technologies
   H1-1-A043S Huawei Industrial Base, Songshanhu
   Dongguan, Guangdong  523808
   China

   Email: zhenghaomian@huawei.com


   Italo Busi
   Huawei Technologies
   HUAWEI TECHNOLOGIES ITALIA Srl Centro Direzionale Milano 2
   Milan, Milan  20090
   Italy

   Email: Italo.Busi@huawei.com


   Sergio Belotti
   Nokia

   Email: sergio.belotti@nokia.com


   Victor Lopez
   Telefonica

   Email: victor.lopezalvarez@telefonica.com





Zheng, et al.            Expires April 25, 2020                [Page 39]

Internet-Draft            OTN Tunnel YANG Model             October 2019


   Yunbin Xu
   CAICT

   Email: xuyunbin@ritt.cn















































Zheng, et al.            Expires April 25, 2020                [Page 40]