<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Mapping Characters in IDNA</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Mapping Characters in IDNA">
<meta name="keywords" content="">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">IDNABIS</td><td class="header">P. Resnick</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Qualcomm Incorporated</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">P. Hoffman</td></tr>
<tr><td class="header">Expires: February 11, 2010</td><td class="header">VPN Consortium</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">August 10, 2009</td></tr>
</table></td></tr></table>
<h1><br />Mapping Characters in IDNA<br />draft-ietf-idnabis-mappings-02</h1>

<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.
This document may contain material from IETF Documents or IETF
Contributions published or made publicly available before November
10, 2008. The person(s) controlling the copyright in some of this
material may not have granted the IETF Trust the right to allow
modifications of such material outside the IETF Standards Process.
Without obtaining an adequate license from the person(s) controlling
the copyright in such materials, this document may not be modified
outside the IETF Standards Process, and derivative works of it may
not be created outside the IETF Standards Process, except to format
it for publication as an RFC or to translate it into languages other
than English.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on February 11, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents in effect on the date of
publication of this document (http://trustee.ietf.org/license-info).
Please review these documents carefully, as they describe your
rights and restrictions with respect to this document.</p>

<h3>Abstract</h3>

<p>In the original version of the Internationalized Domain Names in Applications (IDNA) protocol, any Unicode code points taken from user input were mapped into a set of Unicode code points that "make sense", which were then encoded and passed to the domain name system (DNS). The current version of IDNA presumes that the input to the protocol comes from a set of "permitted" code points, which it then encodes and passes to the DNS, but does not specify what to do with the result of user input. This document describes the actions taken by an implementation between user input and passing permitted code points to the new IDNA protocol.
</p>
<a name="intro"></a><br /><hr />
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>This document describes the operations that can be applied to user input in order to get it into a form acceptable by the Internationalized Domain Names in Applications (IDNA) protocol 
			<a class='info' href='#I-D.ietf-idnabis-protocol'>[I&#8209;D.ietf&#8209;idnabis&#8209;protocol]<span> (</span><span class='info'>Klensin, J., &ldquo;Internationalized Domain Names in Applications (IDNA): Protocol,&rdquo; January&nbsp;2010.</span><span>)</span></a>. The document describes a general implementation procedure for mapping in section 
			<a class='info' href='#procedure'>2<span> (</span><span class='info'>The General Procedure</span><span>)</span></a>.
</p>
<p>It should be noted that this document does not specify the behavior of a protocol that appears "on the wire". It describes an operation that is to be applied to user input in order to prepare that user input for use in an "on the network" protocol. As unusual as this may be for an IETF protocol document, it is a necessary operation to maintain interoperability.
</p>
<a name="procedure"></a><br /><hr />
<a name="rfc.section.2"></a><h3>2.&nbsp;
The General Procedure</h3>

<p>This section defines a general algorithm that applications ought to implement in order to produce Unicode code points that will be valid under the IDNA protocol. An application might implement the full mapping as described below, or can choose a different mapping. In fact, an application might want to implement a full mapping that is substantially compatible with the original IDNA protocol instead of the algorithm given here.
</p>
<p>The general algorithm that an application (or the input method provided by an operating system) ought to use is relatively straightforward:
</p>
<p>
				</p>
<ol class="text">
<li>Upper case characters are mapped to their lower case equivalents by using the algorithm for mapping Unicode characters.
</li>
<li>Full-width and half-width characters (those defined with Decomposition Types &lt;wide&gt; and &lt;narrow&gt;) are mapped to their decomposition mappings as shown in the Unicode character database.
</li>
<li>All characters are mapped using Unicode Normalization Form C (NFC).
</li>
</ol><p>
			
</p>
<p>Definitions for the rules in this algorithm can be found in <a class='info' href='#Unicode51'>[Unicode51]<span> (</span><span class='info'>The Unicode Consortium, &ldquo;The Unicode Standard, Version 5.1.0,&rdquo; 2008.</span><span>)</span></a>. Specifically:
			
			</p>
<ul class="text">
<li>Unicode Normalization Form C can be found in Annex #15 of <a class='info' href='#Unicode51'>[Unicode51]<span> (</span><span class='info'>The Unicode Consortium, &ldquo;The Unicode Standard, Version 5.1.0,&rdquo; 2008.</span><span>)</span></a>.
</li>
<li>In order to map upper case characters to their lower case equivalents (defined in section 3.13 of <a class='info' href='#Unicode51'>[Unicode51]<span> (</span><span class='info'>The Unicode Consortium, &ldquo;The Unicode Standard, Version 5.1.0,&rdquo; 2008.</span><span>)</span></a>), first map characters to the "Lowercase_Mapping" property (the "&lt;lower&gt;" entry in the second column) in <a href='http://www.unicode.org/Public/UNIDATA/SpecialCasing.txt'>http://www.unicode.org/Public/UNIDATA/SpecialCasing.txt</a>, if any. Then, map characters to the "Simple_Lowercase_Mapping" property (the fourteenth column) in <a href='http://www.unicode.org/Public/UNIDATA/UnicodeData.txt'>http://www.unicode.org/Public/UNIDATA/UnicodeData.txt</a>, if any.
</li>
<li>In order to map full-width and half-width characters to their decomposition mappings, map any character whose "Decomposition_Type" (contained in the first part of of the sixth column) in <a href='http://www.unicode.org/Public/UNIDATA/UnicodeData.txt'>http://www.unicode.org/Public/UNIDATA/UnicodeData.txt</a> is either "&lt;wide&gt;" or "&lt;narrow&gt;" to the "Decomposition_Mapping" of that character (contained in the second part of the sixth column) in <a href='http://www.unicode.org/Public/UNIDATA/UnicodeData.txt'>http://www.unicode.org/Public/UNIDATA/UnicodeData.txt</a>.
</li>
<li>The <a href='http://www.unicode.org/Public/UNIDATA/UCD.html'>http://www.unicode.org/Public/UNIDATA/UCD.html</a> web page has useful descriptions of the contents of these files.
</li>
</ul><p>
			
			If this mappings in this document are applied to versions of Unicode later than Unicode 5.1, the later versions of the Unicode Standard should be consulted.
</p>
<p>These are a minimal set of mappings that an application should strongly consider doing. Of course, there are many others that might be done.
</p>
<a name="IANA"></a><br /><hr />
<a name="rfc.section.3"></a><h3>3.&nbsp;
IANA Considerations</h3>

<p>This memo includes no request to IANA.
</p>
<a name="Security"></a><br /><hr />
<a name="rfc.section.4"></a><h3>4.&nbsp;
Security Considerations</h3>

<p>This document suggests creating mappings that might cause confusion for some users while alleviating confusion in other users. Such confusion is not covered in any depth in this document (nor in the other IDNA-related documents).
</p>
<a name="rfc.references1"></a><br /><hr />
<h3>5.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-idnabis-protocol">[I-D.ietf-idnabis-protocol]</a></td>
<td class="author-text">Klensin, J., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-idnabis-protocol-18.txt">Internationalized Domain Names in Applications (IDNA): Protocol</a>,&rdquo; draft-ietf-idnabis-protocol-18 (work in progress), January&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-idnabis-protocol-18.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3490">[RFC3490]</a></td>
<td class="author-text">Faltstrom, P., Hoffman, P., and A. Costello, &ldquo;<a href="http://tools.ietf.org/html/rfc3490">Internationalizing Domain Names in Applications (IDNA)</a>,&rdquo; RFC&nbsp;3490, March&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3490.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3491">[RFC3491]</a></td>
<td class="author-text">Hoffman, P. and M. Blanchet, &ldquo;<a href="http://tools.ietf.org/html/rfc3491">Nameprep: A Stringprep Profile for Internationalized Domain Names (IDN)</a>,&rdquo; RFC&nbsp;3491, March&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3491.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="Unicode51">[Unicode51]</a></td>
<td class="author-text">The Unicode Consortium, &ldquo;The Unicode Standard, Version 5.1.0,&rdquo; 2008.<p>
defined by: The Unicode Standard, Version 5.0, Boston, MA, Addison-Wesley, 2007, ISBN 0-321-48091-0, as amended by Unicode 5.1.0 (<a href='http://www.unicode.org/versions/Unicode5.1.0/'>http://www.unicode.org/versions/Unicode5.1.0/</a>).
</p>
</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Peter W. Resnick</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Qualcomm Incorporated</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">5775 Morehouse Drive</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">San Diego, CA  92121-1714</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">US</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 858 651 4478</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:presnick@qualcomm.com">presnick@qualcomm.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.qualcomm.com/~presnick/">http://www.qualcomm.com/~presnick/</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Paul Hoffman</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">VPN Consortium</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">127 Segre Place</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Santa Cruz, CA  95060</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">US</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">1-831-426-9827</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:paul.hoffman@vpnc.org">paul.hoffman@vpnc.org</a></td></tr>
</table>
</body></html>
