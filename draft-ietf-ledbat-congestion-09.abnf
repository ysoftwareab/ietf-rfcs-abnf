remote_timestamp = data_packet.timestamp
base_delay = +INFINITY

current_delay = acknowledgement.delay
base_delay = min(base_delay, current_delay)
queuing_delay = current_delay - base_delay
off_target = (TARGET - queuing_delay) / TARGET
last_rollover = -INFINITY # More than a minute in the past
flightsize = 0
cwnd = INIT_CWND * MSS
CTO = 1 second

delay = acknowledgement.delay
queuing_delay = FILTER(current_delays) - MIN(base_delays)
off_target = (TARGET - queuing_delay) / TARGET
max_allowed_cwnd = flightsize + ALLOWED_INCREASE * MSS
cwnd = min(cwnd, max_allowed_cwnd)
cwnd = max(cwnd, MIN_CWND * MSS)
flightsize = flightsize - bytes_newly_acked
cwnd = min (cwnd, max (cwnd/2, MIN_CWND * MSS))
flightsize = flightsize - bytes_not_to_be_retransmitted

cwnd = 1 * MSS
CTO = 2 * CTO
last_rollover = now
