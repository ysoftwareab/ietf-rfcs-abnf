<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Uninterruptible Power Supply (UPS) Management Protocol -- Commands and Responses</title>
<meta content="Roger Price" name="author">
<meta content="
       This document describes the command/response protocol currently
used in the management of Uninterruptible Power Supply (UPS) units and
other power devices often deployed in small offices, and in IT
installations subject to an erratic public power supply.  The UPS units typically
interface to an Attachment Daemon in the system they protect.  This
daemon is in turn polled by a Management Daemon which notifies users
and system administrators of power supply incidents, and automates
system shutdown decisions.  The commands and responses described by
this document are exchanged between the UPS Attachment Daemon and the
Management Daemon.  Current practice when this text was written risks
weak security and this is addressed in the Security Considerations
sections of this document.
 
    " name="description">
<meta content="xml2rfc 3.12.0" name="generator">
<meta content="Uninterruptible Power Supply UPS NUT" name="keyword">
<meta content="draft-rprice-ups-management-protocol-06" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.12.0
    Python 3.6.12
    appdirs 1.4.4
    ConfigArgParse 1.5.3
    google-i18n-address 2.5.0
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.7.1
    pycountry 20.7.3
    pyflakes 2.4.0
    PyYAML 6.0
    requests 2.27.1
    setuptools 59.6.0
    six 1.16.0
    WeasyPrint 52.5
-->
<link href="/tmp/draft-rprice-ups-management-protocol-06-28zosje_.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">UPS management protocol</td>
<td class="right">January 2022</td>
</tr></thead>
<tfoot><tr>
<td class="left">Price</td>
<td class="center">Expires 20 July 2022</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">IETF</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-rprice-ups-management-protocol-06</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2022-01-16" class="published">16 January 2022</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Informational</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2022-07-20">20 July 2022</time></dd>
<dt class="label-authors">Author:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">R. Price, <span class="editor">Ed.</span>
</div>
<div class="org">Network UPS Tools Project</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Uninterruptible Power Supply (UPS) Management Protocol -- Commands and Responses</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document describes the command/response protocol currently
used in the management of Uninterruptible Power Supply (UPS) units and
other power devices often deployed in small offices, and in IT
installations subject to an erratic public power supply.  The UPS units typically
interface to an Attachment Daemon in the system they protect.  This
daemon is in turn polled by a Management Daemon which notifies users
and system administrators of power supply incidents, and automates
system shutdown decisions.  The commands and responses described by
this document are exchanged between the UPS Attachment Daemon and the
Management Daemon.  Current practice when this text was written risks
weak security and this is addressed in the Security Considerations
sections of this document.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 20 July 2022.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2022 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="xref">1.1</a>.  <a href="#name-how-to-read-this-document" class="xref">How to Read this Document</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.2">
                <p id="section-toc.1-1.1.2.2.1" class="keepWithNext"><a href="#section-1.2" class="xref">1.2</a>.  <a href="#name-current-practice" class="xref">Current Practice</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.3">
                <p id="section-toc.1-1.1.2.3.1" class="keepWithNext"><a href="#section-1.3" class="xref">1.3</a>.  <a href="#name-requirements-language" class="xref">Requirements Language</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.4">
                <p id="section-toc.1-1.1.2.4.1"><a href="#section-1.4" class="xref">1.4</a>.  <a href="#name-additional-information" class="xref">Additional Information</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="xref">2</a>.  <a href="#name-terminology" class="xref">Terminology</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1"><a href="#section-2.1" class="xref">2.1</a>.  <a href="#name-attachment-daemon" class="xref">Attachment Daemon</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2">
                <p id="section-toc.1-1.2.2.2.1"><a href="#section-2.2" class="xref">2.2</a>.  <a href="#name-administrative-user" class="xref">Administrative User</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.3">
                <p id="section-toc.1-1.2.2.3.1"><a href="#section-2.3" class="xref">2.3</a>.  <a href="#name-driver" class="xref">Driver</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.4">
                <p id="section-toc.1-1.2.2.4.1"><a href="#section-2.4" class="xref">2.4</a>.  <a href="#name-event" class="xref">Event</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.5">
                <p id="section-toc.1-1.2.2.5.1"><a href="#section-2.5" class="xref">2.5</a>.  <a href="#name-instant-command" class="xref">Instant Command</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.6">
                <p id="section-toc.1-1.2.2.6.1"><a href="#section-2.6" class="xref">2.6</a>.  <a href="#name-management-daemon" class="xref">Management Daemon</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.7">
                <p id="section-toc.1-1.2.2.7.1"><a href="#section-2.7" class="xref">2.7</a>.  <a href="#name-nut-network-ups-tools-softw" class="xref">NUT (Network UPS Tools) Software Project</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.8">
                <p id="section-toc.1-1.2.2.8.1"><a href="#section-2.8" class="xref">2.8</a>.  <a href="#name-primary" class="xref">Primary</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.9">
                <p id="section-toc.1-1.2.2.9.1"><a href="#section-2.9" class="xref">2.9</a>.  <a href="#name-secondary" class="xref">Secondary</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.10">
                <p id="section-toc.1-1.2.2.10.1"><a href="#section-2.10" class="xref">2.10</a>. <a href="#name-session" class="xref">Session</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.11">
                <p id="section-toc.1-1.2.2.11.1"><a href="#section-2.11" class="xref">2.11</a>. <a href="#name-ups-status" class="xref">UPS Status</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.12">
                <p id="section-toc.1-1.2.2.12.1"><a href="#section-2.12" class="xref">2.12</a>. <a href="#name-ups-variable" class="xref">UPS Variable</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-protocol-overview" class="xref">Protocol Overview</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-protocol-specification" class="xref">Protocol Specification</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="xref">4.1</a>.  <a href="#name-notation-used-in-this-speci" class="xref">Notation Used in this Specification</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="xref">4.2</a>.  <a href="#name-commands" class="xref">Commands</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.1">
                    <p id="section-toc.1-1.4.2.2.2.1.1"><a href="#section-4.2.1" class="xref">4.2.1</a>.  <a href="#name-attach" class="xref"><code>ATTACH</code></a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.2">
                    <p id="section-toc.1-1.4.2.2.2.2.1"><a href="#section-4.2.2" class="xref">4.2.2</a>.  <a href="#name-detach" class="xref"><code>DETACH</code></a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.3">
                    <p id="section-toc.1-1.4.2.2.2.3.1"><a href="#section-4.2.3" class="xref">4.2.3</a>.  <a href="#name-fsd" class="xref"><code>FSD</code></a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.4">
                    <p id="section-toc.1-1.4.2.2.2.4.1"><a href="#section-4.2.4" class="xref">4.2.4</a>.  <a href="#name-get" class="xref"><code>GET</code></a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.4.2.1">
                        <p id="section-toc.1-1.4.2.2.2.4.2.1.1"><a href="#section-4.2.4.1" class="xref">4.2.4.1</a>.  <a href="#name-get-cmddesc" class="xref"><code>GET CMDDESC</code></a></p>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.4.2.2">
                        <p id="section-toc.1-1.4.2.2.2.4.2.2.1"><a href="#section-4.2.4.2" class="xref">4.2.4.2</a>.  <a href="#name-get-desc" class="xref"><code>GET DESC</code></a></p>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.4.2.3">
                        <p id="section-toc.1-1.4.2.2.2.4.2.3.1"><a href="#section-4.2.4.3" class="xref">4.2.4.3</a>.  <a href="#name-get-numattach" class="xref"><code>GET NUMATTACH</code></a></p>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.4.2.4">
                        <p id="section-toc.1-1.4.2.2.2.4.2.4.1"><a href="#section-4.2.4.4" class="xref">4.2.4.4</a>.  <a href="#name-get-type" class="xref"><code>GET TYPE</code></a></p>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.4.2.5">
                        <p id="section-toc.1-1.4.2.2.2.4.2.5.1"><a href="#section-4.2.4.5" class="xref">4.2.4.5</a>.  <a href="#name-get-upsdesc" class="xref"><code>GET UPSDESC</code></a></p>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.4.2.6">
                        <p id="section-toc.1-1.4.2.2.2.4.2.6.1"><a href="#section-4.2.4.6" class="xref">4.2.4.6</a>.  <a href="#name-get-var" class="xref"><code>GET VAR</code></a></p>
</li>
                    </ul>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.5">
                    <p id="section-toc.1-1.4.2.2.2.5.1"><a href="#section-4.2.5" class="xref">4.2.5</a>.  <a href="#name-help" class="xref"><code>HELP</code></a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.6">
                    <p id="section-toc.1-1.4.2.2.2.6.1"><a href="#section-4.2.6" class="xref">4.2.6</a>.  <a href="#name-instcmd" class="xref"><code>INSTCMD</code></a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.7">
                    <p id="section-toc.1-1.4.2.2.2.7.1"><a href="#section-4.2.7" class="xref">4.2.7</a>.  <a href="#name-list" class="xref"><code>LIST</code></a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.7.2.1">
                        <p id="section-toc.1-1.4.2.2.2.7.2.1.1"><a href="#section-4.2.7.1" class="xref">4.2.7.1</a>.  <a href="#name-list-client" class="xref"><code>LIST CLIENT</code></a></p>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.7.2.2">
                        <p id="section-toc.1-1.4.2.2.2.7.2.2.1"><a href="#section-4.2.7.2" class="xref">4.2.7.2</a>.  <a href="#name-list-cmd" class="xref"><code>LIST CMD</code></a></p>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.7.2.3">
                        <p id="section-toc.1-1.4.2.2.2.7.2.3.1"><a href="#section-4.2.7.3" class="xref">4.2.7.3</a>.  <a href="#name-list-enum" class="xref"><code>LIST ENUM</code></a></p>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.7.2.4">
                        <p id="section-toc.1-1.4.2.2.2.7.2.4.1"><a href="#section-4.2.7.4" class="xref">4.2.7.4</a>.  <a href="#name-list-range" class="xref"><code>LIST RANGE</code></a></p>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.7.2.5">
                        <p id="section-toc.1-1.4.2.2.2.7.2.5.1"><a href="#section-4.2.7.5" class="xref">4.2.7.5</a>.  <a href="#name-list-rw" class="xref"><code>LIST RW</code></a></p>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.7.2.6">
                        <p id="section-toc.1-1.4.2.2.2.7.2.6.1"><a href="#section-4.2.7.6" class="xref">4.2.7.6</a>.  <a href="#name-list-ups" class="xref"><code>LIST UPS</code></a></p>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.7.2.7">
                        <p id="section-toc.1-1.4.2.2.2.7.2.7.1"><a href="#section-4.2.7.7" class="xref">4.2.7.7</a>.  <a href="#name-list-var" class="xref"><code>LIST VAR</code></a></p>
</li>
                    </ul>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.8">
                    <p id="section-toc.1-1.4.2.2.2.8.1"><a href="#section-4.2.8" class="xref">4.2.8</a>.  <a href="#name-password" class="xref"><code>PASSWORD</code></a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.9">
                    <p id="section-toc.1-1.4.2.2.2.9.1"><a href="#section-4.2.9" class="xref">4.2.9</a>.  <a href="#name-primary-2" class="xref"><code>PRIMARY</code></a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.10">
                    <p id="section-toc.1-1.4.2.2.2.10.1"><a href="#section-4.2.10" class="xref">4.2.10</a>. <a href="#name-protver" class="xref"><code>PROTVER</code></a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.11">
                    <p id="section-toc.1-1.4.2.2.2.11.1"><a href="#section-4.2.11" class="xref">4.2.11</a>. <a href="#name-set" class="xref"><code>SET</code></a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.12">
                    <p id="section-toc.1-1.4.2.2.2.12.1"><a href="#section-4.2.12" class="xref">4.2.12</a>. <a href="#name-starttls" class="xref"><code>STARTTLS</code></a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.13">
                    <p id="section-toc.1-1.4.2.2.2.13.1"><a href="#section-4.2.13" class="xref">4.2.13</a>. <a href="#name-username" class="xref"><code>USERNAME</code></a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2.2.14">
                    <p id="section-toc.1-1.4.2.2.2.14.1"><a href="#section-4.2.14" class="xref">4.2.14</a>. <a href="#name-ver" class="xref"><code>VER</code></a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="xref">4.3</a>.  <a href="#name-summary-of-responses" class="xref">Summary of Responses</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3.2.1">
                    <p id="section-toc.1-1.4.2.3.2.1.1"><a href="#section-4.3.1" class="xref">4.3.1</a>.  <a href="#name-response-when-command-succe" class="xref">Response when Command Succeeds</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3.2.2">
                    <p id="section-toc.1-1.4.2.3.2.2.1"><a href="#section-4.3.2" class="xref">4.3.2</a>.  <a href="#name-error-responses" class="xref">Error Responses</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-statuses-and-events" class="xref">Statuses and Events</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="xref">5.1</a>.  <a href="#name-status-symbols" class="xref">Status Symbols</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="xref">5.2</a>.  <a href="#name-events" class="xref">Events</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-security-considerations" class="xref">Security Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a href="#section-6.1" class="xref">6.1</a>.  <a href="#name-agent-verification" class="xref">Agent Verification</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2">
                <p id="section-toc.1-1.6.2.2.1"><a href="#section-6.2" class="xref">6.2</a>.  <a href="#name-current-encryption-practice" class="xref">Current Encryption Practice</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2.2.1">
                    <p id="section-toc.1-1.6.2.2.2.1.1"><a href="#section-6.2.1" class="xref">6.2.1</a>.  <a href="#name-secure-tunnels" class="xref">Secure Tunnels</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.3">
                <p id="section-toc.1-1.6.2.3.1"><a href="#section-6.3" class="xref">6.3</a>.  <a href="#name-current-general-security-pr" class="xref">Current General Security Practice</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.4">
                <p id="section-toc.1-1.6.2.4.1"><a href="#section-6.4" class="xref">6.4</a>.  <a href="#name-security-needs" class="xref">Security Needs</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.4.2.1">
                    <p id="section-toc.1-1.6.2.4.2.1.1"><a href="#section-6.4.1" class="xref">6.4.1</a>.  <a href="#name-shims" class="xref">Shims</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.4.2.1.2.1">
                        <p id="section-toc.1-1.6.2.4.2.1.2.1.1"><a href="#section-6.4.1.1" class="xref">6.4.1.1</a>.  <a href="#name-attachment-daemon-shim" class="xref">Attachment Daemon Shim</a></p>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.4.2.1.2.2">
                        <p id="section-toc.1-1.6.2.4.2.1.2.2.1"><a href="#section-6.4.1.2" class="xref">6.4.1.2</a>.  <a href="#name-management-daemon-shim" class="xref">Management Daemon Shim</a></p>
</li>
                    </ul>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.4.2.2">
                    <p id="section-toc.1-1.6.2.4.2.2.1"><a href="#section-6.4.2" class="xref">6.4.2</a>.  <a href="#name-ssh-tunnels" class="xref">SSH Tunnels</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.4.2.3">
                    <p id="section-toc.1-1.6.2.4.2.3.1"><a href="#section-6.4.3" class="xref">6.4.3</a>.  <a href="#name-vpn" class="xref">VPN</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.4.2.4">
                    <p id="section-toc.1-1.6.2.4.2.4.1"><a href="#section-6.4.4" class="xref">6.4.4</a>.  <a href="#name-vlan" class="xref">VLAN</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.4.2.5">
                    <p id="section-toc.1-1.6.2.4.2.5.1"><a href="#section-6.4.5" class="xref">6.4.5</a>.  <a href="#name-long-term-enforced-secure-c" class="xref">Long Term: Enforced Secure Communication</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.5">
                <p id="section-toc.1-1.6.2.5.1"><a href="#section-6.5" class="xref">6.5</a>.  <a href="#name-administrative-security" class="xref">Administrative Security</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.5.2.1">
                    <p id="section-toc.1-1.6.2.5.2.1.1"><a href="#section-6.5.1" class="xref">6.5.1</a>.  <a href="#name-management-of-administrativ" class="xref">Management of Administrative Users</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.5.2.2">
                    <p id="section-toc.1-1.6.2.5.2.2.1"><a href="#section-6.5.2" class="xref">6.5.2</a>.  <a href="#name-an-administrative-user-of-a" class="xref">An Administrative User of a Client Management Daemon</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.5.2.2.2.1">
                        <p id="section-toc.1-1.6.2.5.2.2.2.1.1"><a href="#section-6.5.2.1" class="xref">6.5.2.1</a>.  <a href="#name-an-administrative-user-logs" class="xref">An Administrative User Logs into a Short Session</a></p>
</li>
                      <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.5.2.2.2.2">
                        <p id="section-toc.1-1.6.2.5.2.2.2.2.1"><a href="#section-6.5.2.2" class="xref">6.5.2.2</a>.  <a href="#name-an-administrative-user-logs-" class="xref">An Administrative User Logs into a Long Session</a></p>
</li>
                    </ul>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-codepoint-management" class="xref">Codepoint Management</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="xref">7.1</a>.  <a href="#name-namespaces-used-by-command-" class="xref">Namespaces used by Command, Responses, Statuses and Variables</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="xref">7.2</a>.  <a href="#name-port-name-and-number-used-t" class="xref">Port Name and Number used to Manage UPS Units</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2.2.1">
                    <p id="section-toc.1-1.7.2.2.2.1.1"><a href="#section-7.2.1" class="xref">7.2.1</a>.  <a href="#name-port-nut-3493" class="xref">Port <code>nut/3493</code></a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2.2.2">
                    <p id="section-toc.1-1.7.2.2.2.2.1"><a href="#section-7.2.2" class="xref">7.2.2</a>.  <a href="#name-port-ups-401" class="xref">Port <code>ups/401</code></a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2.2.3">
                    <p id="section-toc.1-1.7.2.2.2.3.1"><a href="#section-7.2.3" class="xref">7.2.3</a>.  <a href="#name-nut-project-requirement" class="xref">NUT Project Requirement</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-iana-considerations" class="xref">IANA Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="xref">8.1</a>.  <a href="#name-port-name-ups-reference-to-" class="xref">Port Name <code>ups</code>: Reference to this Document</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a href="#section-8.2" class="xref">8.2</a>.  <a href="#name-change-of-registrant" class="xref">Change of Registrant</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-implementation-status" class="xref">Implementation Status</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1">
                <p id="section-toc.1-1.9.2.1.1"><a href="#section-9.1" class="xref">9.1</a>.  <a href="#name-an-implementation-of-the-at" class="xref">An Implementation of the Attachment Daemon</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2">
                <p id="section-toc.1-1.9.2.2.1"><a href="#section-9.2" class="xref">9.2</a>.  <a href="#name-implementations-of-the-mana" class="xref">Implementations of the Management Daemon</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.3">
                <p id="section-toc.1-1.9.2.3.1"><a href="#section-9.3" class="xref">9.3</a>.  <a href="#name-inclusion-in-software-distr" class="xref">Inclusion in Software Distributions</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.4">
                <p id="section-toc.1-1.9.2.4.1"><a href="#section-9.4" class="xref">9.4</a>.  <a href="#name-recommended-minimum-support" class="xref">Recommended Minimum Support</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.4.2.1">
                    <p id="section-toc.1-1.9.2.4.2.1.1"><a href="#section-9.4.1" class="xref">9.4.1</a>.  <a href="#name-desktop-pc-variables" class="xref">Desktop PC Variables</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.4.2.2">
                    <p id="section-toc.1-1.9.2.4.2.2.1"><a href="#section-9.4.2" class="xref">9.4.2</a>.  <a href="#name-unattended-servers-addition" class="xref">Unattended Servers, Additional Variables</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.4.2.3">
                    <p id="section-toc.1-1.9.2.4.2.3.1"><a href="#section-9.4.3" class="xref">9.4.3</a>.  <a href="#name-commands-2" class="xref">Commands</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="xref">10</a>. <a href="#name-acknowledgments" class="xref">Acknowledgments</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-11" class="xref">11</a>. <a href="#name-normative-references" class="xref">Normative References</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#section-12" class="xref">12</a>. <a href="#name-informative-references" class="xref">Informative References</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#appendix-A" class="xref">Appendix A</a>.  <a href="#name-variables" class="xref">Variables</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.1">
                <p id="section-toc.1-1.13.2.1.1"><a href="#appendix-A.1" class="xref">A.1</a>.  <a href="#name-typical-ups-variables" class="xref">Typical UPS Variables</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.2">
                <p id="section-toc.1-1.13.2.2.1"><a href="#appendix-A.2" class="xref">A.2</a>.  <a href="#name-typical-ups-readable-and-wr" class="xref">Typical UPS Readable and Writable Variables</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.3">
                <p id="section-toc.1-1.13.2.3.1"><a href="#appendix-A.3" class="xref">A.3</a>.  <a href="#name-typical-ups-instant-command" class="xref">Typical UPS Instant Commands</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a href="#appendix-B" class="xref">Appendix B</a>.  <a href="#name-the-shutdown-story-for-syst" class="xref">The Shutdown Story for System and UPS</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.15">
            <p id="section-toc.1-1.15.1"><a href="#appendix-C" class="xref">Appendix C</a>.  <a href="#name-technical-terms-historical-" class="xref">Technical Terms: Historical Differences</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16">
            <p id="section-toc.1-1.16.1"><a href="#appendix-D" class="xref">Appendix D</a>.  <a href="#name-change-log" class="xref">Change Log</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16.2.1">
                <p id="section-toc.1-1.16.2.1.1"><a href="#appendix-D.1" class="xref">D.1</a>.  <a href="#name-changes-in-version-01" class="xref">Changes in Version 01</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16.2.2">
                <p id="section-toc.1-1.16.2.2.1"><a href="#appendix-D.2" class="xref">D.2</a>.  <a href="#name-changes-in-version-02" class="xref">Changes in Version 02</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16.2.3">
                <p id="section-toc.1-1.16.2.3.1"><a href="#appendix-D.3" class="xref">D.3</a>.  <a href="#name-changes-in-version-03" class="xref">Changes in Version 03</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16.2.4">
                <p id="section-toc.1-1.16.2.4.1"><a href="#appendix-D.4" class="xref">D.4</a>.  <a href="#name-changes-in-version-04" class="xref">Changes in Version 04</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16.2.5">
                <p id="section-toc.1-1.16.2.5.1"><a href="#appendix-D.5" class="xref">D.5</a>.  <a href="#name-changes-in-version-05" class="xref">Changes in Version 05</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.16.2.6">
                <p id="section-toc.1-1.16.2.6.1"><a href="#appendix-D.6" class="xref">D.6</a>.  <a href="#name-changes-in-version-06" class="xref">Changes in Version 06</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.17">
            <p id="section-toc.1-1.17.1"><a href="#appendix-E" class="xref"></a><a href="#name-authors-address" class="xref">Author's Address</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<section id="section-1.1">
        <h3 id="name-how-to-read-this-document">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-how-to-read-this-document" class="section-name selfRef">How to Read this Document</a>
        </h3>
<div id="HowtoRead">
<p id="section-1.1-1">The editor recommends that you read the HTML
version of this document.  It renders the protocol symbols such as
<code>OL</code> correctly without quotation marks.<a href="#section-1.1-1" class="pilcrow">¶</a></p>
</div>
<p id="section-1.1-2">To lighten the text, the term "UPS" is used when "Managed Power
Device" would be more complete.  The reader should understand the
simple "UPS" to include other managed power devices.<a href="#section-1.1-2" class="pilcrow">¶</a></p>
<p id="section-1.1-3">The statuses and events appearing in this document are named with
short text-form names, some of which are abbreviations.  A full list
of the statuses can be found in section <span><a href="#symbols" class="xref">Status Symbols</a> (<a href="#symbols" class="xref">5.1</a>)</span> while the events are listed in
section <span><a href="#events" class="xref">Events</a> (<a href="#events" class="xref">5.2</a>)</span>.<a href="#section-1.1-3" class="pilcrow">¶</a></p>
<p id="section-1.1-4">This document refers to the "public power supply".  Other texts
frequently refer to "utility power", "input source power" or even
"wall power".<a href="#section-1.1-4" class="pilcrow">¶</a></p>
</section>
<section id="section-1.2">
        <h3 id="name-current-practice">
<a href="#section-1.2" class="section-number selfRef">1.2. </a><a href="#name-current-practice" class="section-name selfRef">Current Practice</a>
        </h3>
<div id="intro">
<p id="section-1.2-1">This document describes UPS management techniques
and current UPS management practice published by the <span><a href="#proj" class="xref">NUT Project</a> (<a href="#proj" class="xref">2.7</a>)</span> which has
been operational since 1998.  Appendix <span><a href="#shutdownstory" class="xref">The Shutdown Story</a> (<a href="#shutdownstory" class="xref">B</a>)</span> describes the current UPS management
practice for performing a managed shutdown of unattended
infrastructure after an unscheduled failure of the public power supply
to minimise the risk of corruption to data processed by this
infrastructure.<a href="#section-1.2-1" class="pilcrow">¶</a></p>
</div>
<p id="section-1.2-2">Since May 2002, the protocol described by this document has been
operating on IANA port nut/3493 running over TCP.<a href="#section-1.2-2" class="pilcrow">¶</a></p>
</section>
<section id="section-1.3">
        <h3 id="name-requirements-language">
<a href="#section-1.3" class="section-number selfRef">1.3. </a><a href="#name-requirements-language" class="section-name selfRef">Requirements Language</a>
        </h3>
<p id="section-1.3-1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
"SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
document are to be interpreted as described
in <span><a href="#RFC2119" class="xref">RFC 2119</a> [<a href="#RFC2119" class="xref">RFC2119</a>]</span>.<a href="#section-1.3-1" class="pilcrow">¶</a></p>
</section>
<section id="section-1.4">
        <h3 id="name-additional-information">
<a href="#section-1.4" class="section-number selfRef">1.4. </a><a href="#name-additional-information" class="section-name selfRef">Additional Information</a>
        </h3>
<div id="AddInf">
<p id="section-1.4-1">Additional information about the <span><a href="#proj" class="xref">NUT Project</a> (<a href="#proj" class="xref">2.7</a>)</span> is
available in the <span><a href="#Documentation" class="xref">project
documentation</a> [<a href="#Documentation" class="xref">Documentation</a>]</span>.  Requests for further information about this
protocol and related technical matters may be addressed to
the <span><a href="#nut-upsuser" class="xref">mailing list</a> [<a href="#nut-upsuser" class="xref">nut-upsuser</a>]</span> of the <span><a href="#proj" class="xref">NUT Project</a> (<a href="#proj" class="xref">2.7</a>)</span>.<a href="#section-1.4-1" class="pilcrow">¶</a></p>
</div>
</section>
</section>
<section id="section-2">
      <h2 id="name-terminology">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-terminology" class="section-name selfRef">Terminology</a>
      </h2>
<div id="Terminology">
<p id="section-2-1">The following technical terms appear in this
document. They are listed in alphabetical order.<a href="#section-2-1" class="pilcrow">¶</a></p>
</div>
<section id="section-2.1">
        <h3 id="name-attachment-daemon">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-attachment-daemon" class="section-name selfRef">Attachment Daemon</a>
        </h3>
<div id="AD">
<p id="section-2.1-1">The Attachment Daemon retrieves status from the UPS and
sends commands to it often through a <span><a href="#Driver" class="xref">Driver</a> (<a href="#Driver" class="xref">2.3</a>)</span> specific to the
hardware model and the connection medium, e.g., USB, serial.  It
maintains an abstracted view of the hardware through the use
of <span><a href="#st" class="xref">hardware statuses</a> (<a href="#st" class="xref">2.11</a>)</span>.  A <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> may
consult the abstracted view using the commands described in this
document.  An Attachment Daemon is launched as system user "root" to
allow direct access to the hardware
(e.g. <code>/proc</code>, <code>/dev</code>).  For better security, the daemon
then drops privilege to run as a detached software service for a
dedicated system user.<a href="#section-2.1-1" class="pilcrow">¶</a></p>
</div>
<p id="section-2.1-2">See <span><a href="#MinSup" class="xref">section</a> (<a href="#MinSup" class="xref">9.4</a>)</span> for details of the
recommended minimum support of variables which calls for Attachment
Daemon support of <span><a href="#st" class="xref">statuses</a> (<a href="#st" class="xref">2.11</a>)</span> <code>OB</code>,
<code>OL</code>, <code>LB</code> and <code>FSD</code>.<a href="#section-2.1-2" class="pilcrow">¶</a></p>
</section>
<section id="section-2.2">
        <h3 id="name-administrative-user">
<a href="#section-2.2" class="section-number selfRef">2.2. </a><a href="#name-administrative-user" class="section-name selfRef">Administrative User</a>
        </h3>
<div id="au">
<p id="section-2.2-1">In current practice, the commands and other functions
offered by the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> to each <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> are made available to a set of
<span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> users which authenticate to the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> with basic credentials
(username and password).  These users are not system users, they are
specific to an <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> and are listed in a text file which is read by
the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> (currently <code>upsd.users</code>) and which assigns to each of
them the password, <span><a href="#IC" class="xref">instant commands</a> (<a href="#IC" class="xref">2.5</a>)</span> and actions which are allowed, together with
the <span><a href="#prim" class="xref">Primary</a> (<a href="#prim" class="xref">2.8</a>)</span> or <span><a href="#sec" class="xref">Secondary</a> (<a href="#sec" class="xref">2.9</a>)</span> status of the <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span>.  For details,
see <span><a href="#adminuser" class="xref">section</a> (<a href="#adminuser" class="xref">6.5.1</a>)</span>.  Typically a
high-level user will be able to send command <span><a href="#FSD" class="xref"><code>FSD</code></a> (<a href="#FSD" class="xref">4.2.3</a>)</span> but a low-level
user might only be allowed to access the test panel.  The security
provisions for administrative users are discussed in
section <a href="#adsec" class="xref">6.5</a>.<a href="#section-2.2-1" class="pilcrow">¶</a></p>
</div>
</section>
<section id="section-2.3">
        <h3 id="name-driver">
<a href="#section-2.3" class="section-number selfRef">2.3. </a><a href="#name-driver" class="section-name selfRef">Driver</a>
        </h3>
<div id="Driver">
<p id="section-2.3-1">A Driver is that part of an Attachment Daemon which
is specific to the UPS hardware, the connection medium and the
connection protocol, e.g., USB, serial.  In current practice the
Attachment Daemon has a driver for each hardware interface type it
supports.  Although this document considers the driver to be part of
the Attachment Daemon, current practice is to see it as a separate
software unit running as a daemon "in front of" the Attachment Daemon.
The protocol for data exchange between the Driver and the Attachment
Daemon is outside the scope of this document.<a href="#section-2.3-1" class="pilcrow">¶</a></p>
</div>
</section>
<section id="section-2.4">
        <h3 id="name-event">
<a href="#section-2.4" class="section-number selfRef">2.4. </a><a href="#name-event" class="section-name selfRef">Event</a>
        </h3>
<p id="section-2.4-1">A UPS Event occurs in the <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> when a change in <span><a href="#st" class="xref">UPS status</a> (<a href="#st" class="xref">2.11</a>)</span> is received
from the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span>.  This event is internal to the <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span>.
See <a href="#events" class="xref">Section 5.2, Paragraph 1</a>.<a href="#section-2.4-1" class="pilcrow">¶</a></p>
</section>
<section id="section-2.5">
        <h3 id="name-instant-command">
<a href="#section-2.5" class="section-number selfRef">2.5. </a><a href="#name-instant-command" class="section-name selfRef">Instant Command</a>
        </h3>
<div id="IC">
<p id="section-2.5-1">A command which when sent to the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> is passed to the
driver and sent to the hardware without any configured delay to
perform a function. For example <code>INSTCMD su700
test.panel.start</code> .  See <span><a href="#instcmd" class="xref"><code>INSTCMD</code></a> (<a href="#instcmd" class="xref">4.2.6</a>)</span>.<a href="#section-2.5-1" class="pilcrow">¶</a></p>
</div>
</section>
<section id="section-2.6">
        <h3 id="name-management-daemon">
<a href="#section-2.6" class="section-number selfRef">2.6. </a><a href="#name-management-daemon" class="section-name selfRef">Management Daemon</a>
        </h3>
<div id="MD">
<p id="section-2.6-1">The Management Daemon is primarily responsible for
managing the hardware and orchestrating system-wide actions after a
power event.  Using commands sent to the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> it follows the status
of the UPS and determines when UPS events occur.  It takes decisions
based on the events, such as calling for
a <span><a href="#shutdownstory" class="xref">system
shutdown</a> (<a href="#shutdownstory" class="xref">B</a>)</span>. Although the term includes the word "daemon" nothing
requires that it be implemented as a detached software service.  The
Management Daemon may also provide administrative functions such as a
graphic interface to view the hardware activity.<a href="#section-2.6-1" class="pilcrow">¶</a></p>
</div>
</section>
<section id="section-2.7">
        <h3 id="name-nut-network-ups-tools-softw">
<a href="#section-2.7" class="section-number selfRef">2.7. </a><a href="#name-nut-network-ups-tools-softw" class="section-name selfRef">NUT (Network UPS Tools) Software Project</a>
        </h3>
<div id="proj">
<p id="section-2.7-1">The primary goal of the <span><a href="#NUT" class="xref">NUT
software project</a> [<a href="#NUT" class="xref">NUT</a>]</span> is to provide support for Power Devices, such
as Uninterruptible Power Supplies.  The Project has been in operation
since 1998 with a major rework in 2003.  It operates through a
user <span><a href="#nut-upsuser" class="xref">mailing list</a> [<a href="#nut-upsuser" class="xref">nut-upsuser</a>]</span>, a
developer <span><a href="#nut-upsdev" class="xref">mailing list</a> [<a href="#nut-upsdev" class="xref">nut-upsdev</a>]</span> and
a <span><a href="#NUT" class="xref">web site</a> [<a href="#NUT" class="xref">NUT</a>]</span>.  See the <span><a href="#History" class="xref">history of the project</a> [<a href="#History" class="xref">History</a>]</span>.<a href="#section-2.7-1" class="pilcrow">¶</a></p>
</div>
</section>
<section id="section-2.8">
        <h3 id="name-primary">
<a href="#section-2.8" class="section-number selfRef">2.8. </a><a href="#name-primary" class="section-name selfRef">Primary</a>
        </h3>
<div id="prim">
<p id="section-2.8-1">When a power device such as a UPS unit supplies power
to more than one system, the computer running the driver is known as
the primary.  The others are secondaries.  See
figure <a href="#fig.oview4" class="xref">4</a>.  Common current
practice for system administrators is to consider the <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> in the
primary to be the Primary Management Daemon which is in charge of the
shutdown of all the systems powered by the UPS.  The Primary
Management Daemon sets status symbol <code>FSD</code> to order the
secondaries to shut down.<a href="#section-2.8-1" class="pilcrow">¶</a></p>
</div>
<p id="section-2.8-2">Note: Historically, the primary was known as the "Master".<a href="#section-2.8-2" class="pilcrow">¶</a></p>
</section>
<section id="section-2.9">
        <h3 id="name-secondary">
<a href="#section-2.9" class="section-number selfRef">2.9. </a><a href="#name-secondary" class="section-name selfRef">Secondary</a>
        </h3>
<div id="sec">
<p id="section-2.9-1">When a hardware device such as a UPS unit supplies
power to more than one system, the system which communicates directly
with the UPS unit e.g. using a USB, RS232, or network connection, is
known as the <span><a href="#prim" class="xref">Primary</a> (<a href="#prim" class="xref">2.8</a>)</span>.  The other are secondaries.  There is no <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span>
in a secondary. See figure <a href="#fig.oview4" class="xref">4</a>.
Common current practice for system administrators is to consider the
<span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> in a secondary to be a Secondary Management Daemon which
understands status symbol <code>FSD</code> as an order to shut down.<a href="#section-2.9-1" class="pilcrow">¶</a></p>
</div>
<p id="section-2.9-2">Note: Historically, the secondary was known as the "Slave".<a href="#section-2.9-2" class="pilcrow">¶</a></p>
</section>
<section id="section-2.10">
        <h3 id="name-session">
<a href="#section-2.10" class="section-number selfRef">2.10. </a><a href="#name-session" class="section-name selfRef">Session</a>
        </h3>
<div id="sess">
<p id="section-2.10-1">The <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> may initiate a TCP session with a specified
device such as a UPS known to the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span>. The session structure
provides for audit and security as well as access to mission critical
UPS functions.  For example good practice requires a password
protection for an <span><a href="#IC" class="xref">instant command</a> (<a href="#IC" class="xref">2.5</a>)</span> which turns off a UPS outlet.  Other than the
commands and responses used, the details of session management are
outside the scope of this document.<a href="#section-2.10-1" class="pilcrow">¶</a></p>
</div>
</section>
<section id="section-2.11">
        <h3 id="name-ups-status">
<a href="#section-2.11" class="section-number selfRef">2.11. </a><a href="#name-ups-status" class="section-name selfRef">UPS Status</a>
        </h3>
<div id="st">
<p id="section-2.11-1">The status of a hardware device such as a UPS unit is a
symbolic description of the state of the unit.  It consists of a space
separated list of symbols from the set {<code>ALARM</code> <code>BOOST</code> <code>BYPASS</code>
          <code>CAL</code> <code>CHRG</code> <code>COMM</code> <code>DISCHRG</code> <code>FSD</code> <code>LB</code> <code>NOCOMM</code> <code>OB</code>
          <code>OFF</code> <code>OL</code> <code>OVER</code> <code>RB</code> <code>TEST</code> <code>TRIM</code>}.  The symbols <code>TICK</code> and
<code>TOCK</code> are experimental additions to the statuses and are not in
common current practice.  See section <span><a href="#symbols" class="xref">Status Symbols</a> (<a href="#symbols" class="xref">5.1</a>)</span> which specifies each of these symbols.<a href="#section-2.11-1" class="pilcrow">¶</a></p>
</div>
<p id="section-2.11-2">See <span><a href="#MinSup" class="xref">section</a> (<a href="#MinSup" class="xref">9.4</a>)</span> for details of the
recommended minimum support of status symbols <code>OB</code>, <code>OL</code>, <code>LB</code>
and <code>FSD</code>.<a href="#section-2.11-2" class="pilcrow">¶</a></p>
</section>
<section id="section-2.12">
        <h3 id="name-ups-variable">
<a href="#section-2.12" class="section-number selfRef">2.12. </a><a href="#name-ups-variable" class="section-name selfRef">UPS Variable</a>
        </h3>
<div id="var">
<p id="section-2.12-1">The metrics and identifiers provided by each UPS are
represented by variables giving the value representing that metric or
identifier, The UPS variable is an abstraction of the UPS hardware
configuration and activity maintained by the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span>.
See <span><a href="#Annex1" class="xref">the appendix</a> (<a href="#Annex1" class="xref">Appendix A, Paragraph 1</a>)</span> which provides examples
of variables.  For example the variable <code>battery.charge</code>
contains the current charge of the UPS battery as a percentage value.<a href="#section-2.12-1" class="pilcrow">¶</a></p>
</div>
<p id="section-2.12-2">Note: Some variables are constants, e.g.  battery type,
manufacturer.<a href="#section-2.12-2" class="pilcrow">¶</a></p>
<p id="section-2.12-3">See <span><a href="#MinSup" class="xref">section</a> (<a href="#MinSup" class="xref">9.4</a>)</span> for details of the
recommended minimum support of variables.  A full list of possible
variables is available in <span><a href="#gitvars" class="xref">source code file
docs/nut-names.txt</a> [<a href="#gitvars" class="xref">gitvars</a>]</span> which serves as the Recording Document.<a href="#section-2.12-3" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-3">
      <h2 id="name-protocol-overview">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-protocol-overview" class="section-name selfRef">Protocol Overview</a>
      </h2>
<div id="overview">
<p id="section-3-1">Figure <a href="#fig.oview" class="xref">1</a>
shows a reference configuration in which the command/response protocol
applies.  The UPS shown is representative of all managed power devices,<a href="#section-3-1" class="pilcrow">¶</a></p>
</div>
<span id="name-reference-configuration"></span><div id="fig.oview">
<figure id="figure-1">
        <div class="alignCenter art-text artwork" id="section-3-2.1">
<pre>                                            "The client"
           ,--------------,               ,--------------,
 ,-----,   |     UPS      | &lt;-Commands    |     UPS      |
 | UPS |---|  Attachment  |---------------|  Management  |
 |     |===|    Daemon    |   Responses-&gt; |    Daemon    |
 /-----\   '--------------'               '--------------'
            UPS Attachment                 UPS Management
                System        Network          System</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-reference-configuration" class="selfRef">Reference Configuration</a>
        </figcaption></figure>
</div>
<p id="section-3-3">The reference configuration in figure <a href="#fig.oview" class="xref">1</a> shows a single UPS unit which has a power supply link
(<code>===</code>) and a data link (<code>---</code>) attached to a system
running an <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span>.  The UPS provides power supply protection to the
system running the Attachment Daemon.<a href="#section-3-3" class="pilcrow">¶</a></p>
<p id="section-3-4">In practice there may be more than one UPS unit, and a unit may
provide power protection to more than one system.  The figure also
shows a single <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span>.  In practice there may be more than one
Management Daemon, and any one Management Daemon may manage more than
one UPS Attachment Daemon.<a href="#section-3-4" class="pilcrow">¶</a></p>
<p id="section-3-5">The protocol applies to connections between the Attachment Daemon
and the Management daemon which act as <strong>server</strong>
and <strong>client</strong> respectively.  The Management daemon sends
commands over TCP to the Attachment Daemon and receives responses over
TCP from that daemon.<a href="#section-3-5" class="pilcrow">¶</a></p>
<p id="section-3-6">The two daemons may run in the same system, or may be connected
through a local or wide area network.  In simple cases, as shown in
figure <a href="#fig.oview2" class="xref">2</a>, the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span>
and the <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> are in the same system, the one protected by the UPS.
The commands and responses are exchanged through an internal loopback
interface.<a href="#section-3-6" class="pilcrow">¶</a></p>
<span id="name-simplified-single-system-co"></span><div id="fig.oview2">
<figure id="figure-2">
        <div class="alignCenter art-text artwork" id="section-3-7.1">
<pre>                                         "The client"
           ,--------------------,---------------------,
 ,-----,   |     UPS       &lt;-Commands        UPS      |
 | UPS |---|  Attachment        |         Management  |
 |     |===|    Daemon       Responses-&gt;    Daemon    |
 /-----\   '--------------------'---------------------'
                             Internal
                             loopback
             UPS Attachment and Management System</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-simplified-single-system-co" class="selfRef">Simplified single-system configuration</a>
        </figcaption></figure>
</div>
<p id="section-3-8">The reference configuration does not require any specific
design. For example figure <a href="#fig.oview3" class="xref">3</a>
shows an arrangement in which the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> is closely associated with, or
even included in the UPS system setup.  This is becoming more
prevalent with the availability of low cost processors able to run the
<span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> thereby effectively creating a network attached UPS running a
published protocol.<a href="#section-3-8" class="pilcrow">¶</a></p>
<span id="name-ups-and-attachment-daemon-i"></span><div id="fig.oview3">
<figure id="figure-3">
        <div class="alignCenter art-text artwork" id="section-3-9.1">
<pre>                                      "The client"
 ,-----,------------,               ,--------------,
 |     |    UPS     | &lt;-Commands    |     UPS      |
 | UPS - Attachment |---------------|  Management  |
 |     |   Daemon   |   Responses-&gt; |    Daemon    |
 /-----'------------\               '--------------'
    UPS Attachment                   UPS Management
        System           Network          System</pre>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
<a href="#name-ups-and-attachment-daemon-i" class="selfRef">UPS and Attachment Daemon integration</a>
        </figcaption></figure>
</div>
<p id="section-3-10">As the power requirements for processors decrease, it is becoming
increasingly common to use a single UPS to protect multiple systems as
shown in figure <a href="#fig.oview4" class="xref">4</a>.  However
there is only one data line (<code>---</code>) from the UPS to the <span><a href="#prim" class="xref">Primary</a> (<a href="#prim" class="xref">2.8</a>)</span>
system.  The others have only power connections (<code>===</code>) to the
UPS, and are known as <span><a href="#sec" class="xref">Secondaries</a> (<a href="#sec" class="xref">2.9</a>)</span>.  A <span><a href="#sec" class="xref">Secondary</a> (<a href="#sec" class="xref">2.9</a>)</span> does not run an <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span>,
it connects over a network to the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> in the
primary. Figure <a href="#fig.oview4" class="xref">4</a> shows the
<span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> and the primary <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> in the same system.  This is common
practice but it is not a technical requirement.<a href="#section-3-10" class="pilcrow">¶</a></p>
<span id="name-ups-protects-multiple-syste"></span><div id="fig.oview4">
<figure id="figure-4">
        <div class="alignCenter art-text artwork" id="section-3-11.1">
<pre>                                      "The client"
           ,--------------------,---------------------,
 ,-----,   |     UPS       &lt;-Commands      Primary    |
 |     |---|  Attachment        |         Management  |   Primary
 |     |===|    Daemon       Responses-&gt;    Daemon    |
 |     |   '--------------------'---------------------'
 | UPS |            ^
 |     |            '&lt;-Commands---Responses-&gt;,
 |     |                                     v
 |     |            ,--------------,-----------------,
 |     |============|              |     Secondary   |
 /-----\            |              |     Management  |   Secondary
                    |              |       Daemon    |
                    '--------------'-----------------'</pre>
</div>
<figcaption><a href="#figure-4" class="selfRef">Figure 4</a>:
<a href="#name-ups-protects-multiple-syste" class="selfRef">UPS protects multiple systems</a>
        </figcaption></figure>
</div>
<aside id="section-3-12">
        <p id="section-3-12.1">Note: Should the Primary fail or go off-line, the fate of
the Secondaries depends on the <span><a href="#st" class="xref">UPS status</a> (<a href="#st" class="xref">2.11</a>)</span> when the Primary failed.  If
the UPS had status <code>OL</code> the Secondary continues operation, but if the
UPS had status <code>OB</code> the Secondary may choose to shut down as a precaution.<a href="#section-3-12.1" class="pilcrow">¶</a></p>
</aside>
</section>
<section id="section-4">
      <h2 id="name-protocol-specification">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-protocol-specification" class="section-name selfRef">Protocol Specification</a>
      </h2>
<p id="section-4-1">This specification includes only the commands and their responses.
An implementation of the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> has an internal state machine, and some
complex implementations of the <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> include an internal state
machine; for example to assist the system shutdown of a complex
installation.  The <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> is required to remember the
previous <code>ups.status</code> value it received from the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> and compare
it with the next.  Other than that the management protocol used
between them is effectively stateless.<a href="#section-4-1" class="pilcrow">¶</a></p>
<p id="section-4-2">See for example <span><a href="#events" class="xref">table</a> (<a href="#events" class="xref">5.2</a>)</span> which
maps the new <code>ups.status</code> response and the
previous <code>ups.status</code> response to an <span><a href="#events" class="xref">Event</a> (<a href="#events" class="xref">5.2</a>)</span> which is taken as
the basis for <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> action.<a href="#section-4-2" class="pilcrow">¶</a></p>
<section id="section-4.1">
        <h3 id="name-notation-used-in-this-speci">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-notation-used-in-this-speci" class="section-name selfRef">Notation Used in this Specification</a>
        </h3>
<div id="Notation">
<p id="section-4.1-1">The character set used for commands and responses
is UTF-8 but current practice is to limit the character set used to
the single byte UTF-8 characters 0-127.<a href="#section-4.1-1" class="pilcrow">¶</a></p>
</div>
<aside id="section-4.1-2">
          <p id="section-4.1-2.1">Historical note: UTF-8 characters 0-127 were originally
known as the American Standard Code for Information Interchange,
US-ASCII, first published in 1963.<a href="#section-4.1-2.1" class="pilcrow">¶</a></p>
</aside>
<p id="section-4.1-3">Multi-word elements are contained within U+0022 QUOTATION MARK
characters for easier parsing. E.g., "UPS on fire". Embedded quotation
marks are escaped with U+005C REVERSE SOLIDUS \ often known as
backslashes. Embedded backslashes are also escaped by representing
them as \\.<a href="#section-4.1-3" class="pilcrow">¶</a></p>
<div id="onenewline">
<p id="section-4.1-4">Commands and responses have no leading or
trailing whitespace, and are terminated with a single new
line character U+000A LINE FEED (LF).<a href="#section-4.1-4" class="pilcrow">¶</a></p>
</div>
<p id="section-4.1-5">White space within commands and responses is reduced to one U+0020
SPACE (SP).<a href="#section-4.1-5" class="pilcrow">¶</a></p>
</section>
<section id="section-4.2">
        <h3 id="name-commands">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-commands" class="section-name selfRef">Commands</a>
        </h3>
<div id="commands">
<p id="section-4.2-1">The commands address the UPS to which they apply
by <code>&lt;upsname&gt;</code> where<a href="#section-4.2-1" class="pilcrow">¶</a></p>
</div>
<ul class="compact">
<li class="compact" id="section-4.2-2.1">
            <code>&lt;upsname&gt;</code>
::= <code>&lt;ups&gt;[@&lt;hostname&gt;[:&lt;port&gt;]]</code><a href="#section-4.2-2.1" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-4.2-2.2">
            <code>&lt;ups&gt;</code> is defined by the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> configuration files.<a href="#section-4.2-2.2" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-4.2-2.3">The default <code>&lt;hostname&gt;</code> is <code>localhost</code><a href="#section-4.2-2.3" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-4.2-2.4">The <code>&lt;port&gt;</code> is the number of the TCP port on which
the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> is listening.  The default is 3493.  This is supported by
all current <span><a href="#MD" class="xref">Management Daemons</a> (<a href="#MD" class="xref">2.6</a>)</span>.<a href="#section-4.2-2.4" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-4.2-3">Examples: <code>myups</code>, <code>UPS-97B@bigserver.example.com</code><a href="#section-4.2-3" class="pilcrow">¶</a></p>
<p id="section-4.2-4">Note: Experimental <span><a href="#MD" class="xref">Management Daemons</a> (<a href="#MD" class="xref">2.6</a>)</span> use an extended form
of <code>&lt;upsname&gt;</code> in configuration files and in program
parameters, where<a href="#section-4.2-4" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-4.2-5.1">
            <code>&lt;upsname&gt;</code> ::= <code>[&lt;group&gt;:]&lt;ups&gt;[@&lt;hostname&gt;[:&lt;port&gt;]]</code><a href="#section-4.2-5.1" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-4.2-5.2">
            <code>&lt;group&gt;</code> is an experimental extension to provide for groups of UPSs.  It is not in common current practice.<a href="#section-4.2-5.2" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-4.2-5.3">
            <code>&lt;ups&gt;</code> is defined by the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> configuration files.<a href="#section-4.2-5.3" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-4.2-5.4">The default <code>&lt;hostname&gt;</code> is <code>localhost</code><a href="#section-4.2-5.4" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-4.2-6">Examples: <code>ups-1@example.com:3493</code>, <code>HB:heartbeat1@example.com:3493</code><a href="#section-4.2-6" class="pilcrow">¶</a></p>
<section id="section-4.2.1">
          <h4 id="name-attach">
<a href="#section-4.2.1" class="section-number selfRef">4.2.1. </a><a href="#name-attach" class="section-name selfRef"><code>ATTACH</code></a>
          </h4>
<div id="attach">
<p id="section-4.2.1-1">In a configuration such
as <a href="#fig.oview4" class="xref">Figure 4</a> in which a UPS protects more than
one system, the <span><a href="#prim" class="xref">Primary</a> (<a href="#prim" class="xref">2.8</a>)</span> <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> needs to know how many <span><a href="#sec" class="xref">Secondaries</a> (<a href="#sec" class="xref">2.9</a>)</span> are
currently "<em>active</em>", i.e., powered by the UPS, either from the
public power supply or from battery power.  The <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> supports this by
keeping a count of all the "<em>active</em>" systems powered by a UPS.
The count is initialised, one secondary at a time by
the <code>ATTACH</code> command, which should be understood as "<em>count
this secondary as active</em>".  <code>ATTACH</code> is one of three
commands for <span><a href="#sec" class="xref">Secondary</a> (<a href="#sec" class="xref">2.9</a>)</span> counting: command <span><a href="#detach" class="xref"><code>DETACH</code></a> (<a href="#detach" class="xref">4.2.2</a>)</span> decrements the count
and a <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> may read the count at any time using command <span><a href="#numattach" class="xref"><code>NUMATTACH</code></a> (<a href="#numattach" class="xref">4.2.4.3</a>)</span>.<a href="#section-4.2.1-1" class="pilcrow">¶</a></p>
</div>
<p id="section-4.2.1-2">The <code>ATTACH</code> command is also sent to the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> for the
primary so during normal, fully protected operation, the count is 1
for the primary + the number of secondaries.  During a full system
shutdown, the count drops as each secondary <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> executes command
<span><a href="#detach" class="xref"><code>DETACH</code></a> (<a href="#detach" class="xref">4.2.2</a>)</span> during its own shutdown.  When the count drops to 1, only
the primary is "<em>active</em>" and it knows that all the secondaries
have shut down.<a href="#section-4.2.1-2" class="pilcrow">¶</a></p>
<p id="section-4.2.1-3">Command: <code>ATTACH &lt;upsname&gt;</code><a href="#section-4.2.1-3" class="pilcrow">¶</a></p>
<p id="section-4.2.1-4">If the command succeeds, the response is <code>OK</code>, otherwise
see the <span><a href="#errorresponses" class="xref">error responses</a> (<a href="#errorresponses" class="xref">4.3.2</a>)</span>.<a href="#section-4.2.1-4" class="pilcrow">¶</a></p>
<p id="section-4.2.1-5">Note: Historically, this command was known as <code>LOGIN</code>.
Since that <code>LOGIN</code> was not the conventional user access to a
shell or program the name was changed to avoid confusion.<a href="#section-4.2.1-5" class="pilcrow">¶</a></p>
</section>
<section id="section-4.2.2">
          <h4 id="name-detach">
<a href="#section-4.2.2" class="section-number selfRef">4.2.2. </a><a href="#name-detach" class="section-name selfRef"><code>DETACH</code></a>
          </h4>
<div id="detach">
<p id="section-4.2.2-1">This companion command to <span><a href="#attach" class="xref"><code>ATTACH</code></a> (<a href="#attach" class="xref">4.2.1</a>)</span> reduces the
count of "active" <span><a href="#sec" class="xref">Secondaries</a> (<a href="#sec" class="xref">2.9</a>)</span>.  It should be understood as "<em>this
secondary is no longer active</em>", and is usually used during system
shutdown to decrement a count of how many <span><a href="#sec" class="xref">Secondaries</a> (<a href="#sec" class="xref">2.9</a>)</span> are still "active".<a href="#section-4.2.2-1" class="pilcrow">¶</a></p>
</div>
<p id="section-4.2.2-2">Command: <code>DETACH</code><a href="#section-4.2.2-2" class="pilcrow">¶</a></p>
<p id="section-4.2.2-3">If the command succeeds, the response is <code>OK Goodbye</code>,
otherwise see the <span><a href="#errorresponses" class="xref">error
responses</a> (<a href="#errorresponses" class="xref">4.3.2</a>)</span>.<a href="#section-4.2.2-3" class="pilcrow">¶</a></p>
<p id="section-4.2.2-4">Note: Historically, this command was known as <code>LOGOUT</code>.<a href="#section-4.2.2-4" class="pilcrow">¶</a></p>
</section>
<section id="section-4.2.3">
          <h4 id="name-fsd">
<a href="#section-4.2.3" class="section-number selfRef">4.2.3. </a><a href="#name-fsd" class="section-name selfRef"><code>FSD</code></a>
          </h4>
<div id="FSD">
<p id="section-4.2.3-1">A <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> which is <span><a href="#prim" class="xref">Primary</a> (<a href="#prim" class="xref">2.8</a>)</span> and has the required
authority, uses this command to set status symbol <code>FSD</code> meaning
"Forced Shutdown" in the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span>.  In current practice the <span><a href="#prim" class="xref">Primary</a> (<a href="#prim" class="xref">2.8</a>)</span> <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span>
uses the symbol to tell the <span><a href="#sec" class="xref">Secondaries</a> (<a href="#sec" class="xref">2.9</a>)</span> to shut down.<a href="#section-4.2.3-1" class="pilcrow">¶</a></p>
</div>
<p id="section-4.2.3-2">Command: <code>FSD &lt;upsname&gt;</code><a href="#section-4.2.3-2" class="pilcrow">¶</a></p>
<p id="section-4.2.3-3">If the command succeeds, the response is <code>OK FSD-SET</code>,
otherwise see the <span><a href="#errorresponses" class="xref">error
responses</a> (<a href="#errorresponses" class="xref">4.3.2</a>)</span>.<a href="#section-4.2.3-3" class="pilcrow">¶</a></p>
<p id="section-4.2.3-4">In current practice, commands such as <code>FSD</code> are made
available only to a privileged <span><a href="#au" class="xref">administrative user</a> (<a href="#au" class="xref">2.2</a>)</span> authorized to send such a mission
critical command.  The security provisions for administrative users
are discussed in section <a href="#adsec" class="xref">6.5</a>.<a href="#section-4.2.3-4" class="pilcrow">¶</a></p>
</section>
<section id="section-4.2.4">
          <h4 id="name-get">
<a href="#section-4.2.4" class="section-number selfRef">4.2.4. </a><a href="#name-get" class="section-name selfRef"><code>GET</code></a>
          </h4>
<div id="get">
<p id="section-4.2.4-1">Retrieve a single response from the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span>. The
possible sub-commands are:<a href="#section-4.2.4-1" class="pilcrow">¶</a></p>
</div>
<section id="section-4.2.4.1">
            <h5 id="name-get-cmddesc">
<a href="#section-4.2.4.1" class="section-number selfRef">4.2.4.1. </a><a href="#name-get-cmddesc" class="section-name selfRef"><code>GET CMDDESC</code></a>
            </h5>
<div id="cmddsc">
<p id="section-4.2.4.1-1">Retrieve a text description of a command.<a href="#section-4.2.4.1-1" class="pilcrow">¶</a></p>
</div>
<p id="section-4.2.4.1-2">Command: <code>GET CMDDESC &lt;upsname&gt; &lt;cmdname&gt;</code><a href="#section-4.2.4.1-2" class="pilcrow">¶</a></p>
<p id="section-4.2.4.1-3">Response:
CMDDESC &lt;upsname&gt; &lt;cmdname&gt; "&lt;description&gt;"<a href="#section-4.2.4.1-3" class="pilcrow">¶</a></p>
<p id="section-4.2.4.1-4">For example: <code>GET CMDDESC su700 load.on</code> and
response <code>CMDDESC su700 load.on "Turn on the load immediately"</code><a href="#section-4.2.4.1-4" class="pilcrow">¶</a></p>
<p id="section-4.2.4.1-5">This is like <span><a href="#desc" class="xref"><code>DESC</code></a> (<a href="#desc" class="xref">4.2.4.2</a>)</span>, but it applies to an <span><a href="#IC" class="xref">instant command</a> (<a href="#IC" class="xref">2.5</a>)</span>.<a href="#section-4.2.4.1-5" class="pilcrow">¶</a></p>
</section>
<section id="section-4.2.4.2">
            <h5 id="name-get-desc">
<a href="#section-4.2.4.2" class="section-number selfRef">4.2.4.2. </a><a href="#name-get-desc" class="section-name selfRef"><code>GET DESC</code></a>
            </h5>
<div id="desc">
<p id="section-4.2.4.2-1">Retrieve a text description of a variable.<a href="#section-4.2.4.2-1" class="pilcrow">¶</a></p>
</div>
<p id="section-4.2.4.2-2">Command: <code>GET DESC &lt;upsname&gt; &lt;varname&gt;</code><a href="#section-4.2.4.2-2" class="pilcrow">¶</a></p>
<p id="section-4.2.4.2-3">Response: <code>DESC &lt;upsname&gt; &lt;varname&gt; "&lt;description&gt;"</code><a href="#section-4.2.4.2-3" class="pilcrow">¶</a></p>
<p id="section-4.2.4.2-4">where &lt;description&gt; is a string that gives a brief
explanation of the named variable.  The <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> may return "Unavailable"
if the file which provides this description is not installed.<a href="#section-4.2.4.2-4" class="pilcrow">¶</a></p>
<p id="section-4.2.4.2-5">For example command <code>GET DESC su700 ups.status</code> and
response <code>DESC su700 ups.status "UPS status"</code><a href="#section-4.2.4.2-5" class="pilcrow">¶</a></p>
</section>
<section id="section-4.2.4.3">
            <h5 id="name-get-numattach">
<a href="#section-4.2.4.3" class="section-number selfRef">4.2.4.3. </a><a href="#name-get-numattach" class="section-name selfRef"><code>GET NUMATTACH</code></a>
            </h5>
<div id="numattach">
<p id="section-4.2.4.3-1">Retrieve the count kept by the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> of all the
"<em>active</em>" systems protected by this UPS.<a href="#section-4.2.4.3-1" class="pilcrow">¶</a></p>
</div>
<p id="section-4.2.4.3-2">Command: <code>GET NUMATTACH &lt;upsname&gt;</code><a href="#section-4.2.4.3-2" class="pilcrow">¶</a></p>
<p id="section-4.2.4.3-3">Response: <code>NUMATTACH &lt;upsname&gt; &lt;value&gt;</code><a href="#section-4.2.4.3-3" class="pilcrow">¶</a></p>
<p id="section-4.2.4.3-4">where &lt;value&gt; is a count of the <span><a href="#prim" class="xref">Primary</a> (<a href="#prim" class="xref">2.8</a>)</span> and the number of
<span><a href="#sec" class="xref">Secondaries</a> (<a href="#sec" class="xref">2.9</a>)</span> currently powered by this UPS.<a href="#section-4.2.4.3-4" class="pilcrow">¶</a></p>
<p id="section-4.2.4.3-5">For example command <code>GET ATTACH su700</code> and
response <code>NUMATTACH su700 1</code><a href="#section-4.2.4.3-5" class="pilcrow">¶</a></p>
<p id="section-4.2.4.3-6">This information is needed by the <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> to determine how many
<span><a href="#sec" class="xref">Secondaries</a> (<a href="#sec" class="xref">2.9</a>)</span> are still connected during the system shutdown process.<a href="#section-4.2.4.3-6" class="pilcrow">¶</a></p>
<p id="section-4.2.4.3-7">Note: Historically, this sub-command was known
as <code>NUMLOGINS</code>.  Since <code>LOGIN</code> was not the conventional
user access to a shell or program the name was changed to avoid
confusion.<a href="#section-4.2.4.3-7" class="pilcrow">¶</a></p>
</section>
<section id="section-4.2.4.4">
            <h5 id="name-get-type">
<a href="#section-4.2.4.4" class="section-number selfRef">4.2.4.4. </a><a href="#name-get-type" class="section-name selfRef"><code>GET TYPE</code></a>
            </h5>
<div id="type">
<p id="section-4.2.4.4-1">Retrieve the type of a <span><a href="#var" class="xref">UPS variable</a> (<a href="#var" class="xref">2.12</a>)</span>.<a href="#section-4.2.4.4-1" class="pilcrow">¶</a></p>
</div>
<p id="section-4.2.4.4-2">Command: <code>GET TYPE &lt;upsname&gt; &lt;varname&gt;</code><a href="#section-4.2.4.4-2" class="pilcrow">¶</a></p>
<p id="section-4.2.4.4-3">Response: <code>TYPE &lt;upsname&gt; &lt;varname&gt; &lt;type&gt;...</code><a href="#section-4.2.4.4-3" class="pilcrow">¶</a></p>
<p id="section-4.2.4.4-4">where &lt;type&gt; can be one or more of the following tokens.
Multiple types may be returned.<a href="#section-4.2.4.4-4" class="pilcrow">¶</a></p>
<p id="section-4.2.4.4-5">For example command <code>GET TYPE su700 input.transfer.low</code> and
response <code>TYPE su700 input.transfer.low ENUM</code><a href="#section-4.2.4.4-5" class="pilcrow">¶</a></p>
<span id="name-variable-types"></span><table class="center" id="table-1">
              <caption>
<a href="#table-1" class="selfRef">Table 1</a>:
<a href="#name-variable-types" class="selfRef">Variable Types</a>
              </caption>
<thead>
                <tr>
                  <th class="text-center" rowspan="1" colspan="1">    Type    
    </th>
                  <th class="text-center" rowspan="1" colspan="1">Meaning
</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td class="text-left" rowspan="1" colspan="1">RW </td>
                  <td class="text-left" rowspan="1" colspan="1">This is a read/write variable.  It may be read with
command <code>GET</code> <span><a href="#getvar" class="xref"><code>VAR</code></a> (<a href="#getvar" class="xref">4.2.4.6</a>)</span> and set to a different value with command
<span><a href="#set" class="xref"><code>SET</code></a> (<a href="#set" class="xref">4.2.11</a>)</span>
                  </td>
                </tr>
                <tr>
                  <td class="text-left" rowspan="1" colspan="1">ENUM </td>
                  <td class="text-left" rowspan="1" colspan="1">An enumerated type, which supports specific
predetermined values
</td>
                </tr>
                <tr>
                  <td class="text-left" rowspan="1" colspan="1">STRING:n </td>
                  <td class="text-left" rowspan="1" colspan="1">This is a string of maximum
length <code>n</code>
                  </td>
                </tr>
                <tr>
                  <td class="text-left" rowspan="1" colspan="1">RANGE </td>
                  <td class="text-left" rowspan="1" colspan="1">
                    <p id="section-4.2.4.4-6.2.4.2.1">This is a number, either integer or
float, comprised in the range which may be seen with the
command <span><a href="#range" class="xref"><code>LIST RANGE</code></a> (<a href="#range" class="xref">4.2.7.4</a>)</span><a href="#section-4.2.4.4-6.2.4.2.1" class="pilcrow">¶</a></p>
</td>
                </tr>
                <tr>
                  <td class="text-left" rowspan="1" colspan="1">NUMBER </td>
                  <td class="text-left" rowspan="1" colspan="1">This is a single numeric value, either
integer or float
</td>
                </tr>
              </tbody>
            </table>
<p id="section-4.2.4.4-7">Notes:<a href="#section-4.2.4.4-7" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.2.4.4-8.1">ENUM, STRING:n and RANGE are usually associated with RW, but
not always. The default &lt;type&gt;, when omitted, is numeric, so
either integer or float. Each <span><a href="#Driver" class="xref">Driver</a> (<a href="#Driver" class="xref">2.3</a>)</span> is then responsible for
handling values as either integer or float.<a href="#section-4.2.4.4-8.1" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-4.2.4.4-8.2">Current practice is to represent floating point values using
locale <code>C.utf8</code> which is a decimal (base 10) US English-based
representation. Hexadecimal, exponents, and comma for thousands
separator are not allowed. For example: "1200.20" is valid, while
"1,200.20" and "1200,20" are not valid.<a href="#section-4.2.4.4-8.2" class="pilcrow">¶</a>
</li>
            </ul>
</section>
<section id="section-4.2.4.5">
            <h5 id="name-get-upsdesc">
<a href="#section-4.2.4.5" class="section-number selfRef">4.2.4.5. </a><a href="#name-get-upsdesc" class="section-name selfRef"><code>GET UPSDESC</code></a>
            </h5>
<div id="upsdesc">
<p id="section-4.2.4.5-1">Retrieve a text description of a UPS.<a href="#section-4.2.4.5-1" class="pilcrow">¶</a></p>
</div>
<p id="section-4.2.4.5-2">Command: <code>GET UPSDESC &lt;upsname&gt;</code><a href="#section-4.2.4.5-2" class="pilcrow">¶</a></p>
<p id="section-4.2.4.5-3">Response: <code>UPSDESC &lt;upsname&gt; "&lt;description&gt;"</code><a href="#section-4.2.4.5-3" class="pilcrow">¶</a></p>
<p id="section-4.2.4.5-4">where &lt;description&gt; is defined by the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> configuration. If
it is not set, current practice is for the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> to return
"Unavailable".<a href="#section-4.2.4.5-4" class="pilcrow">¶</a></p>
<p id="section-4.2.4.5-5">For example command <code>GET UPSDESC su700</code> and response
<code>UPSDESC su700 "Development box"</code><a href="#section-4.2.4.5-5" class="pilcrow">¶</a></p>
<p id="section-4.2.4.5-6">This can be used to provide human-readable descriptions instead of
a cryptic <code>ups@hostname</code> string.<a href="#section-4.2.4.5-6" class="pilcrow">¶</a></p>
</section>
<section id="section-4.2.4.6">
            <h5 id="name-get-var">
<a href="#section-4.2.4.6" class="section-number selfRef">4.2.4.6. </a><a href="#name-get-var" class="section-name selfRef"><code>GET VAR</code></a>
            </h5>
<div id="getvar">
<p id="section-4.2.4.6-1">Retrieve the value of a <span><a href="#var" class="xref">UPS variable</a> (<a href="#var" class="xref">2.12</a>)</span>.<a href="#section-4.2.4.6-1" class="pilcrow">¶</a></p>
</div>
<p id="section-4.2.4.6-2">Command: <code>GET VAR &lt;upsname&gt;
&lt;varname&gt;</code><a href="#section-4.2.4.6-2" class="pilcrow">¶</a></p>
<p id="section-4.2.4.6-3">Response: <code>VAR &lt;upsname&gt; &lt;varname&gt; "&lt;value&gt;"</code><a href="#section-4.2.4.6-3" class="pilcrow">¶</a></p>
<p id="section-4.2.4.6-4">For example command <code>GET VAR su700 ups.status</code> and response
<code>VAR su700 ups.status "OB LB"</code><a href="#section-4.2.4.6-4" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-4.2.5">
          <h4 id="name-help">
<a href="#section-4.2.5" class="section-number selfRef">4.2.5. </a><a href="#name-help" class="section-name selfRef"><code>HELP</code></a>
          </h4>
<div id="help">
<p id="section-4.2.5-1">Return a list of the commands supported by the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span>.
This command is intended for human as well as program use.<a href="#section-4.2.5-1" class="pilcrow">¶</a></p>
</div>
<p id="section-4.2.5-2">Command <code>HELP</code><a href="#section-4.2.5-2" class="pilcrow">¶</a></p>
<p id="section-4.2.5-3">For example, the following command line sequence executed on an
<span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span>:<a href="#section-4.2.5-3" class="pilcrow">¶</a></p>
<div id="section-4.2.5-4">
<pre class="sourcecode">netcat localhost 3493
HELP
Commands: HELP VER GET LIST SET INSTCMD ATTACH DETACH
          USERNAME PASSWORD STARTTLS</pre><a href="#section-4.2.5-4" class="pilcrow">¶</a>
</div>
<p id="section-4.2.5-5">Note:
Historically, this command also
returned <code>LOGIN</code> and <code>LOGOUT</code>.  Since <code>LOGIN</code> was
not the conventional user access to a shell or program, the command
names were changed to <code>ATTACH</code> and <code>DETACH</code> to avoid
confusion.<a href="#section-4.2.5-5" class="pilcrow">¶</a></p>
</section>
<section id="section-4.2.6">
          <h4 id="name-instcmd">
<a href="#section-4.2.6" class="section-number selfRef">4.2.6. </a><a href="#name-instcmd" class="section-name selfRef"><code>INSTCMD</code></a>
          </h4>
<div id="instcmd">
<p id="section-4.2.6-1">Send an <span><a href="#IC" class="xref">instant command</a> (<a href="#IC" class="xref">2.5</a>)</span> to the UPS.<a href="#section-4.2.6-1" class="pilcrow">¶</a></p>
</div>
<p id="section-4.2.6-2">Command: <code>INSTCMD &lt;upsname&gt; &lt;cmdname&gt;</code><a href="#section-4.2.6-2" class="pilcrow">¶</a></p>
<p id="section-4.2.6-3">where <code>&lt;upsname&gt;</code> is the name of the UPS
and <code>&lt;cmdname&gt;</code> is the <span><a href="#IC" class="xref">instant command</a> (<a href="#IC" class="xref">2.5</a>)</span> to be issued to that UPS.<a href="#section-4.2.6-3" class="pilcrow">¶</a></p>
<p id="section-4.2.6-4">If the command succeeds, the response is <code>OK</code>, otherwise
see the <span><a href="#errorresponses" class="xref">error responses</a> (<a href="#errorresponses" class="xref">4.3.2</a>)</span>.<a href="#section-4.2.6-4" class="pilcrow">¶</a></p>
<p id="section-4.2.6-5">For example the command: <code>INSTCMD su700 test.panel.start</code>
and the response <code>OK</code><a href="#section-4.2.6-5" class="pilcrow">¶</a></p>
</section>
<section id="section-4.2.7">
          <h4 id="name-list">
<a href="#section-4.2.7" class="section-number selfRef">4.2.7. </a><a href="#name-list" class="section-name selfRef"><code>LIST</code></a>
          </h4>
<div id="list">
<p id="section-4.2.7-1">The <code>LIST</code> commands all produce a response
with a common format. The response will begin with <code>BEGIN LIST</code>
and then repeat the initial query.  A list then follows, with as many
lines as are necessary.  The response ends with <code>END LIST</code>
followed by the initial query.<a href="#section-4.2.7-1" class="pilcrow">¶</a></p>
</div>
<p id="section-4.2.7-2">The formatting may seem a bit redundant, but it makes a different
form of client possible.  A client can send a <span><a href="#list" class="xref"><code>LIST</code></a> (<a href="#list" class="xref">4.2.7</a>)</span> query and then
wait for the response. When it arrives, the <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> doesn't need a
complicated state machine to remember which list is which.<a href="#section-4.2.7-2" class="pilcrow">¶</a></p>
<p id="section-4.2.7-3">Note: The current <span><a href="#proj" class="xref">NUT Project</a> (<a href="#proj" class="xref">2.7</a>)</span> implementation of the
<span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span>, <code>upsd</code>, sends back the response to a <span><a href="#list" class="xref"><code>LIST</code></a> (<a href="#list" class="xref">4.2.7</a>)</span> command as
a sequence of messages.  The <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> should continue reading these
messages until it receives the line beginning <code>END
LIST</code>.<a href="#section-4.2.7-3" class="pilcrow">¶</a></p>
<p id="section-4.2.7-4">The possible subcommands are:<a href="#section-4.2.7-4" class="pilcrow">¶</a></p>
<section id="section-4.2.7.1">
            <h5 id="name-list-client">
<a href="#section-4.2.7.1" class="section-number selfRef">4.2.7.1. </a><a href="#name-list-client" class="section-name selfRef"><code>LIST CLIENT</code></a>
            </h5>
<div id="client">
<p id="section-4.2.7.1-1">The command calls for the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> to report all the
current <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> clients of a given UPS.<a href="#section-4.2.7.1-1" class="pilcrow">¶</a></p>
</div>
<p id="section-4.2.7.1-2">Command: <code>LIST CLIENT &lt;upsname&gt;</code><a href="#section-4.2.7.1-2" class="pilcrow">¶</a></p>
<p id="section-4.2.7.1-3">The response
is<a href="#section-4.2.7.1-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.2.7.1-4">
<pre>BEGIN LIST CLIENT &lt;upsname&gt;
CLIENT &lt;upsname&gt; &lt;client_IP_address&gt;
...
END LIST CLIENT &lt;upsname&gt;
</pre><a href="#section-4.2.7.1-4" class="pilcrow">¶</a>
</div>
<p id="section-4.2.7.1-5">For example, the command <code>LIST CLIENT ups1</code> and the response:<a href="#section-4.2.7.1-5" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.2.7.1-6">
<pre>BEGIN LIST CLIENT ups1
CLIENT ups1 ::1
CLIENT ups1 198.51.100.2
END LIST CLIENT ups1

</pre><a href="#section-4.2.7.1-6" class="pilcrow">¶</a>
</div>
</section>
<section id="section-4.2.7.2">
            <h5 id="name-list-cmd">
<a href="#section-4.2.7.2" class="section-number selfRef">4.2.7.2. </a><a href="#name-list-cmd" class="section-name selfRef"><code>LIST CMD</code></a>
            </h5>
<div id="cmd">
<p id="section-4.2.7.2-1">The command calls for the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> to report a list of
the <span><a href="#IC" class="xref">instant commands</a> (<a href="#IC" class="xref">2.5</a>)</span> which the <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> may send to the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span>.  This <span><a href="#IC" class="xref">instant command</a> (<a href="#IC" class="xref">2.5</a>)</span> list is
the abstracted view of the UPS hardware capabilities.  An economical
UPS will support few or no <span><a href="#IC" class="xref">instant commands</a> (<a href="#IC" class="xref">2.5</a>)</span> but a professional model should
support more.<a href="#section-4.2.7.2-1" class="pilcrow">¶</a></p>
</div>
<p id="section-4.2.7.2-2">Command: <code>LIST CMD &lt;upsname&gt;</code><a href="#section-4.2.7.2-2" class="pilcrow">¶</a></p>
<p id="section-4.2.7.2-3">The response is:<a href="#section-4.2.7.2-3" class="pilcrow">¶</a></p>
<div id="section-4.2.7.2-4">
<pre class="sourcecode">BEGIN LIST CMD &lt;upsname&gt;
CMD &lt;upsname&gt; &lt;cmdname&gt;
...
END LIST CMD &lt;cmdname&gt;
</pre><a href="#section-4.2.7.2-4" class="pilcrow">¶</a>
</div>
<p id="section-4.2.7.2-5">where <code>&lt;upsname&gt;</code> is the name of the UPS,
and <code>&lt;cmdname&gt;</code> is the name of the command which may be
issued to the UPS.<a href="#section-4.2.7.2-5" class="pilcrow">¶</a></p>
<p id="section-4.2.7.2-6">For example the command: <code>LIST CMD su700</code> and the response:<a href="#section-4.2.7.2-6" class="pilcrow">¶</a></p>
<div id="section-4.2.7.2-7">
<pre class="sourcecode">BEGIN LIST CMD su700
CMD su700 load.on
CMD su700 test.panel.start
...
END LIST CMD su700

</pre><a href="#section-4.2.7.2-7" class="pilcrow">¶</a>
</div>
</section>
<section id="section-4.2.7.3">
            <h5 id="name-list-enum">
<a href="#section-4.2.7.3" class="section-number selfRef">4.2.7.3. </a><a href="#name-list-enum" class="section-name selfRef"><code>LIST ENUM</code></a>
            </h5>
<div id="enum">
<p id="section-4.2.7.3-1">The command calls for the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> to report the set of
possible values of a <span><a href="#var" class="xref">UPS variable</a> (<a href="#var" class="xref">2.12</a>)</span> which has predetermined values.<a href="#section-4.2.7.3-1" class="pilcrow">¶</a></p>
</div>
<p id="section-4.2.7.3-2">Command: <code>LIST ENUM &lt;upsname&gt; &lt;varname&gt;</code><a href="#section-4.2.7.3-2" class="pilcrow">¶</a></p>
<p id="section-4.2.7.3-3">The response
is:<a href="#section-4.2.7.3-3" class="pilcrow">¶</a></p>
<div id="section-4.2.7.3-4">
<pre class="sourcecode">BEGIN LIST ENUM &lt;upsname&gt; &lt;varname&gt;
ENUM &lt;upsname&gt; &lt;varname&gt; "&lt;value&gt;"
...
END LIST ENUM &lt;upsname&gt; &lt;varname&gt;
</pre><a href="#section-4.2.7.3-4" class="pilcrow">¶</a>
</div>
<p id="section-4.2.7.3-5">where <code>&lt;upsname&gt;</code> is the name of the UPS,
<code>&lt;varname&gt;</code> is the <span><a href="#var" class="xref">UPS variable</a> (<a href="#var" class="xref">2.12</a>)</span> and <code>&lt;value&gt;</code> is
one of the possible values of that <span><a href="#var" class="xref">UPS variable</a> (<a href="#var" class="xref">2.12</a>)</span>.  Note that in current
practice the output is an unordered list.  Note also that the U+0022
QUOTATION MARK characters are part of the response.<a href="#section-4.2.7.3-5" class="pilcrow">¶</a></p>
<p id="section-4.2.7.3-6">For example the command: <code>LIST ENUM su700 input.transfer.low</code>
and the
response:<a href="#section-4.2.7.3-6" class="pilcrow">¶</a></p>
<div id="section-4.2.7.3-7">
<pre class="sourcecode">BEGIN LIST ENUM su700 input.transfer.low
ENUM su700 input.transfer.low "103"
ENUM su700 input.transfer.low "100"
...
END LIST ENUM su700 input.transfer.low

</pre><a href="#section-4.2.7.3-7" class="pilcrow">¶</a>
</div>
</section>
<section id="section-4.2.7.4">
            <h5 id="name-list-range">
<a href="#section-4.2.7.4" class="section-number selfRef">4.2.7.4. </a><a href="#name-list-range" class="section-name selfRef"><code>LIST RANGE</code></a>
            </h5>
<div id="range">
<p id="section-4.2.7.4-1">The command calls for the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> to report the
interval in which valid values of <span><a href="#var" class="xref">UPS variable</a> (<a href="#var" class="xref">2.12</a>)</span> lie.<a href="#section-4.2.7.4-1" class="pilcrow">¶</a></p>
</div>
<p id="section-4.2.7.4-2">Command: <code>LIST RANGE &lt;upsname&gt; &lt;varname&gt;</code><a href="#section-4.2.7.4-2" class="pilcrow">¶</a></p>
<p id="section-4.2.7.4-3">The response
is:<a href="#section-4.2.7.4-3" class="pilcrow">¶</a></p>
<div id="section-4.2.7.4-4">
<pre class="sourcecode">BEGIN LIST RANGE &lt;upsname&gt; &lt;varname&gt;
RANGE &lt;upsname&gt; &lt;varname&gt; "&lt;min&gt;" "&lt;max&gt;"
...
END LIST RANGE &lt;upsname&gt; &lt;varname&gt;
</pre><a href="#section-4.2.7.4-4" class="pilcrow">¶</a>
</div>
<p id="section-4.2.7.4-5">where <code>&lt;upsname&gt;</code> is the name of the UPS,
<code>&lt;varname&gt;</code> is the <span><a href="#var" class="xref">UPS variable</a> (<a href="#var" class="xref">2.12</a>)</span> and
{<code>&lt;min&gt;</code>,<code>&lt;max&gt;</code>} is the interval of valid
values of that <span><a href="#var" class="xref">UPS variable</a> (<a href="#var" class="xref">2.12</a>)</span>.  Note that the U+0022 QUOTATION MARK characters
are part of the response.<a href="#section-4.2.7.4-5" class="pilcrow">¶</a></p>
<p id="section-4.2.7.4-6">For example, the command <code>LIST RANGE su700
input.transfer.low</code> and the response:<a href="#section-4.2.7.4-6" class="pilcrow">¶</a></p>
<div id="section-4.2.7.4-7">
<pre class="sourcecode">BEGIN LIST RANGE su700 input.transfer.low
RANGE su700 input.transfer.low "90" "105"
END LIST RANGE su700 input.transfer.low

</pre><a href="#section-4.2.7.4-7" class="pilcrow">¶</a>
</div>
</section>
<section id="section-4.2.7.5">
            <h5 id="name-list-rw">
<a href="#section-4.2.7.5" class="section-number selfRef">4.2.7.5. </a><a href="#name-list-rw" class="section-name selfRef"><code>LIST RW</code></a>
            </h5>
<div id="listrw">
<p id="section-4.2.7.5-1">The command calls for the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> to report a list of
the <span><a href="#var" class="xref">UPS variables</a> (<a href="#var" class="xref">2.12</a>)</span> associated with a given UPS which may be read and written
by the <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span>.  These variables are the abstracted view of the UPS
hardware capabilities.  An economical UPS may support few variables
but a professional model should support at least the variables which
are needed for an <span><a href="#shutdownstory" class="xref">automatic
shutdown and restart</a> (<a href="#shutdownstory" class="xref">B</a>)</span>.  See <span><a href="#MinSup" class="xref">Section</a> (<a href="#MinSup" class="xref">9.4</a>)</span> for details of the recommended minimum support
of variables.  A full list of variables is available
in <span><a href="#gitvars" class="xref">source code file docs/nut-names.txt</a> [<a href="#gitvars" class="xref">gitvars</a>]</span>
which serves as the Recording Document.<a href="#section-4.2.7.5-1" class="pilcrow">¶</a></p>
</div>
<p id="section-4.2.7.5-2">Command: <code>LIST RW &lt;upsname&gt;</code><a href="#section-4.2.7.5-2" class="pilcrow">¶</a></p>
<p id="section-4.2.7.5-3">The response is:<a href="#section-4.2.7.5-3" class="pilcrow">¶</a></p>
<div id="section-4.2.7.5-4">
<pre class="sourcecode">BEGIN LIST RW &lt;upsname&gt;
RW &lt;upsname&gt; &lt;varname&gt; "&lt;value&gt;"
...
END LIST RW &lt;upsname&gt;
</pre><a href="#section-4.2.7.5-4" class="pilcrow">¶</a>
</div>
<p id="section-4.2.7.5-5">where <code>&lt;upsname&gt;</code> is the name of the UPS,
<code>&lt;varname&gt;</code> is the <span><a href="#var" class="xref">UPS variable</a> (<a href="#var" class="xref">2.12</a>)</span> and
<code>&lt;value&gt;</code> is the value of that <span><a href="#var" class="xref">UPS variable</a> (<a href="#var" class="xref">2.12</a>)</span>.  Note that
the U+0022 QUOTATION MARK characters are part of the response.<a href="#section-4.2.7.5-5" class="pilcrow">¶</a></p>
<p id="section-4.2.7.5-6">For example the command: <code>LIST RW su700</code> and the response:<a href="#section-4.2.7.5-6" class="pilcrow">¶</a></p>
<div id="section-4.2.7.5-7">
<pre class="sourcecode">BEGIN LIST RW su700
RW su700 output.voltage.nominal "115"
RW su700 ups.delay.shutdown "020"
...
END LIST RW su700

</pre><a href="#section-4.2.7.5-7" class="pilcrow">¶</a>
</div>
</section>
<section id="section-4.2.7.6">
            <h5 id="name-list-ups">
<a href="#section-4.2.7.6" class="section-number selfRef">4.2.7.6. </a><a href="#name-list-ups" class="section-name selfRef"><code>LIST UPS</code></a>
            </h5>
<div id="ups">
<p id="section-4.2.7.6-1">The command calls for the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> to report a list of
the UPS units to which it is attached.<a href="#section-4.2.7.6-1" class="pilcrow">¶</a></p>
</div>
<p id="section-4.2.7.6-2">Command: <code>LIST UPS</code><a href="#section-4.2.7.6-2" class="pilcrow">¶</a></p>
<p id="section-4.2.7.6-3">The response is:<a href="#section-4.2.7.6-3" class="pilcrow">¶</a></p>
<div id="section-4.2.7.6-4">
<pre class="sourcecode">BEGIN LIST UPS
UPS &lt;upsname&gt; "&lt;description&gt;"
...
END LIST UPS
</pre><a href="#section-4.2.7.6-4" class="pilcrow">¶</a>
</div>
<p id="section-4.2.7.6-5">where &lt;upsname&gt; is the name of a UPS, and &lt;description&gt;
is the description maintained by the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> if available. It is set to
"Unavailable" otherwise.  Note that the U+0022 QUOTATION MARK
characters are part of the response.<a href="#section-4.2.7.6-5" class="pilcrow">¶</a></p>
<p id="section-4.2.7.6-6">This command can also be used to determine what values of
&lt;upsname&gt; are valid before calling other functions on the
server. This is also a good way to handle situations where a single
<span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> supports multiple UPS's.  It is also useful for clients which
perform a UPS discovery process.<a href="#section-4.2.7.6-6" class="pilcrow">¶</a></p>
<p id="section-4.2.7.6-7">For example, the response:<a href="#section-4.2.7.6-7" class="pilcrow">¶</a></p>
<div id="section-4.2.7.6-8">
<pre class="sourcecode">BEGIN LIST UPS
UPS su700 "Development box"
END LIST UPS

</pre><a href="#section-4.2.7.6-8" class="pilcrow">¶</a>
</div>
</section>
<section id="section-4.2.7.7">
            <h5 id="name-list-var">
<a href="#section-4.2.7.7" class="section-number selfRef">4.2.7.7. </a><a href="#name-list-var" class="section-name selfRef"><code>LIST VAR</code></a>
            </h5>
<div id="listvar">
<p id="section-4.2.7.7-1">The command calls for the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> to report a list
of all the <span><a href="#var" class="xref">UPS variables</a> (<a href="#var" class="xref">2.12</a>)</span> which it maintains for a given UPS, and the values
of those variables.<a href="#section-4.2.7.7-1" class="pilcrow">¶</a></p>
</div>
<p id="section-4.2.7.7-2">Command: <code>LIST VAR &lt;upsname&gt;</code><a href="#section-4.2.7.7-2" class="pilcrow">¶</a></p>
<p id="section-4.2.7.7-3">The response is:<a href="#section-4.2.7.7-3" class="pilcrow">¶</a></p>
<div id="section-4.2.7.7-4">
<pre class="sourcecode">BEGIN LIST VAR &lt;upsname&gt;
VAR &lt;upsname&gt; &lt;varname&gt; "&lt;value&gt;"
...
END LIST VAR &lt;upsname&gt;
</pre><a href="#section-4.2.7.7-4" class="pilcrow">¶</a>
</div>
<p id="section-4.2.7.7-5">where <code>&lt;upsname&gt;</code> is the name of the UPS,
<code>&lt;varname&gt;</code> is the <span><a href="#var" class="xref">UPS variable</a> (<a href="#var" class="xref">2.12</a>)</span> and
<code>&lt;value&gt;</code> is the value of that variable.  Note that
the U+0022 QUOTATION MARK characters are part of the response.<a href="#section-4.2.7.7-5" class="pilcrow">¶</a></p>
<p id="section-4.2.7.7-6">The response to this command lists the <span><a href="#var" class="xref">UPS variables</a> (<a href="#var" class="xref">2.12</a>)</span> available for this
UPS and their current values.  For example the command <code>LIST VAR
su700</code> and the response:<a href="#section-4.2.7.7-6" class="pilcrow">¶</a></p>
<div id="section-4.2.7.7-7">
<pre class="sourcecode">BEGIN LIST VAR su700
VAR su700 ups.mfr "Example Mfg"
VAR su700 ups.mfr.date "10/17/96"
...
END LIST VAR su700</pre><a href="#section-4.2.7.7-7" class="pilcrow">¶</a>
</div>
<p id="section-4.2.7.7-8">See
<span><a href="#MinSup" class="xref">Section</a> (<a href="#MinSup" class="xref">9.4</a>)</span> for details of the
recommended minimum support of variables.  A full list of variables is
available in <span><a href="#gitvars" class="xref">source code file
docs/nut-names.txt</a> [<a href="#gitvars" class="xref">gitvars</a>]</span> which serves as the Recording Document.<a href="#section-4.2.7.7-8" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-4.2.8">
          <h4 id="name-password">
<a href="#section-4.2.8" class="section-number selfRef">4.2.8. </a><a href="#name-password" class="section-name selfRef"><code>PASSWORD</code></a>
          </h4>
<div id="password">
<p id="section-4.2.8-1">This command is a companion to <span><a href="#username" class="xref"><code>USERNAME</code></a> (<a href="#username" class="xref">4.2.13</a>)</span>, and is used by a <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> to
specify the password required to enter a <span><a href="#sess" class="xref">Session</a> (<a href="#sess" class="xref">2.10</a>)</span> with the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span>.<a href="#section-4.2.8-1" class="pilcrow">¶</a></p>
</div>
<p id="section-4.2.8-2">Command: <code>PASSWORD &lt;password&gt;</code><a href="#section-4.2.8-2" class="pilcrow">¶</a></p>
<p id="section-4.2.8-3">If the command succeeds, the response is <code>OK</code>, otherwise
see the <span><a href="#errorresponses" class="xref">error responses</a> (<a href="#errorresponses" class="xref">4.3.2</a>)</span>.<a href="#section-4.2.8-3" class="pilcrow">¶</a></p>
<p id="section-4.2.8-4">For examples of the use of commands <span><a href="#username" class="xref"><code>USERNAME</code></a> (<a href="#username" class="xref">4.2.13</a>)</span> and <code>PASSWORD</code> by
<span><a href="#au" class="xref">administrative users</a> (<a href="#au" class="xref">2.2</a>)</span> see <a href="#adsecclient" class="xref">Section 6.5.2, Paragraph 1</a>.<a href="#section-4.2.8-4" class="pilcrow">¶</a></p>
</section>
<section id="section-4.2.9">
          <h4 id="name-primary-2">
<a href="#section-4.2.9" class="section-number selfRef">4.2.9. </a><a href="#name-primary-2" class="section-name selfRef"><code>PRIMARY</code></a>
          </h4>
<div id="primary">
<p id="section-4.2.9-1">In current practice, an <span><a href="#au" class="xref">administrative user</a> (<a href="#au" class="xref">2.2</a>)</span> is recorded by the
<span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> in local file <code>upsd.users</code> as being a <span><a href="#prim" class="xref">Primary</a> (<a href="#prim" class="xref">2.8</a>)</span>.
See <span><a href="#adminuser" class="xref">Management of Administrative
Users</a> (<a href="#adminuser" class="xref">6.5.1</a>)</span> for an example.  When a <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> starts up and opens a
<span><a href="#sess" class="xref">Session</a> (<a href="#sess" class="xref">2.10</a>)</span> with the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span>, it lays claim to being a <span><a href="#prim" class="xref">Primary</a> (<a href="#prim" class="xref">2.8</a>)</span> by sending
command <code>PRIMARY</code> to the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span>, thus claiming that it has the
required authority to perform such critical actions as setting status
symbol <code>FSD</code>.<a href="#section-4.2.9-1" class="pilcrow">¶</a></p>
</div>
<p id="section-4.2.9-2">Command: <code>PRIMARY &lt;upsname&gt;</code><a href="#section-4.2.9-2" class="pilcrow">¶</a></p>
<p id="section-4.2.9-3">where <code>&lt;upsname&gt;</code> is the name of the UPS.<a href="#section-4.2.9-3" class="pilcrow">¶</a></p>
<p id="section-4.2.9-4">If the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> has the authority, the response is <code>OK</code>, otherwise
see the <span><a href="#errorresponses" class="xref">error responses</a> (<a href="#errorresponses" class="xref">4.3.2</a>)</span>.<a href="#section-4.2.9-4" class="pilcrow">¶</a></p>
<p id="section-4.2.9-5">Note: Historically, this command was known as <code>MASTER</code>.<a href="#section-4.2.9-5" class="pilcrow">¶</a></p>
</section>
<section id="section-4.2.10">
          <h4 id="name-protver">
<a href="#section-4.2.10" class="section-number selfRef">4.2.10. </a><a href="#name-protver" class="section-name selfRef"><code>PROTVER</code></a>
          </h4>
<div id="protver">
<p id="section-4.2.10-1">Return the implementation version of the
command/response protocol used by the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span>.  This command is intended
for human as well as program use.<a href="#section-4.2.10-1" class="pilcrow">¶</a></p>
</div>
<p id="section-4.2.10-2">Command <code>PROTVER</code><a href="#section-4.2.10-2" class="pilcrow">¶</a></p>
<p id="section-4.2.10-3">For example, the following command line sequence in the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span>:<a href="#section-4.2.10-3" class="pilcrow">¶</a></p>
<div id="section-4.2.10-4">
<pre class="sourcecode">netcat localhost 3493
PROTVER
1.2</pre><a href="#section-4.2.10-4" class="pilcrow">¶</a>
</div>
<p id="section-4.2.10-5">Notes:<a href="#section-4.2.10-5" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="compact type-1" id="section-4.2.10-6">
<li id="section-4.2.10-6.1">There are no U+0022 QUOTATION MARK characters in the response.<a href="#section-4.2.10-6.1" class="pilcrow">¶</a>
</li>
            <li id="section-4.2.10-6.2">Historically, this command was known as <code>NETVER</code> and
current practice is to use <code>NETVER</code> instead of PROTVER.<a href="#section-4.2.10-6.2" class="pilcrow">¶</a>
</li>
            <li id="section-4.2.10-6.3">The implementation version of the protocol returned by PROTVER is
different to the implementation version of the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> returned by
<span><a href="#ver" class="xref"><code>VER</code></a> (<a href="#ver" class="xref">4.2.14</a>)</span>.<a href="#section-4.2.10-6.3" class="pilcrow">¶</a>
</li>
          </ol>
</section>
<section id="section-4.2.11">
          <h4 id="name-set">
<a href="#section-4.2.11" class="section-number selfRef">4.2.11. </a><a href="#name-set" class="section-name selfRef"><code>SET</code></a>
          </h4>
<div id="set">
<p id="section-4.2.11-1">The command calls for the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> to set a <span><a href="#var" class="xref">UPS variable</a> (<a href="#var" class="xref">2.12</a>)</span> to a
given value.  Whether this has an effect on the UPS hardware is
specific to the <span><a href="#Driver" class="xref">Driver</a> (<a href="#Driver" class="xref">2.3</a>)</span> and the UPS model.  Some variables are
read-only due to the design of the UPS or its driver.<a href="#section-4.2.11-1" class="pilcrow">¶</a></p>
</div>
<p id="section-4.2.11-2">Command: <code>SET VAR &lt;upsname&gt; &lt;varname&gt;
"&lt;value&gt;"</code><a href="#section-4.2.11-2" class="pilcrow">¶</a></p>
<p id="section-4.2.11-3">where <code>&lt;upsname&gt;</code> is the name of the UPS,
<code>&lt;varname&gt;</code> is the <span><a href="#var" class="xref">UPS variable</a> (<a href="#var" class="xref">2.12</a>)</span> and
<code>&lt;value&gt;</code> is the value to be assigned to that variable.
Note that the U+0022 QUOTATION MARK characters are part of the
command.<a href="#section-4.2.11-3" class="pilcrow">¶</a></p>
<p id="section-4.2.11-4">If the command succeeds, the response is <code>OK</code>, otherwise
see the <span><a href="#errorresponses" class="xref">error responses</a> (<a href="#errorresponses" class="xref">4.3.2</a>)</span>.<a href="#section-4.2.11-4" class="pilcrow">¶</a></p>
<p id="section-4.2.11-5">For example the command: <code>SET VAR su700 ups.id "My UPS"</code> and
the response <code>OK</code><a href="#section-4.2.11-5" class="pilcrow">¶</a></p>
</section>
<section id="section-4.2.12">
          <h4 id="name-starttls">
<a href="#section-4.2.12" class="section-number selfRef">4.2.12. </a><a href="#name-starttls" class="section-name selfRef"><code>STARTTLS</code></a>
          </h4>
<div id="starttls">
<p id="section-4.2.12-1">The client tells the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> to switch to TLS
encrypted communication.  When the client receives <code>OK</code> it also
switches to TLS encryption.  The parameters and versions of
cryptographic libraries are those of the Attachment Daemon's
underlying OS and are outside the scope of this document.<a href="#section-4.2.12-1" class="pilcrow">¶</a></p>
</div>
<p id="section-4.2.12-2">Command: <code>STARTTLS</code><a href="#section-4.2.12-2" class="pilcrow">¶</a></p>
<p id="section-4.2.12-3">If the command succeeds, the response is <code>OK STARTTLS</code>, otherwise
see the <span><a href="#errorresponses" class="xref">error responses</a> (<a href="#errorresponses" class="xref">4.3.2</a>)</span>.<a href="#section-4.2.12-3" class="pilcrow">¶</a></p>
<p id="section-4.2.12-4">If the client does not send command STARTTLS to the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span>
communication continues unencrypted, however an <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> may refuse
unencrypted communication.<a href="#section-4.2.12-4" class="pilcrow">¶</a></p>
</section>
<section id="section-4.2.13">
          <h4 id="name-username">
<a href="#section-4.2.13" class="section-number selfRef">4.2.13. </a><a href="#name-username" class="section-name selfRef"><code>USERNAME</code></a>
          </h4>
<div id="username">
<p id="section-4.2.13-1">The <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> limits access to clients whose
credentials match those in the file <code>upsd.users</code>.  There is no
anonymous access.  A <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> program or script uses
command <code>USERNAME</code> and its companion command <span><a href="#password" class="xref"><code>PASSWORD</code></a> (<a href="#password" class="xref">4.2.8</a>)</span> to
open a <span><a href="#sess" class="xref">Session</a> (<a href="#sess" class="xref">2.10</a>)</span> for an <span><a href="#au" class="xref">administrative user</a> (<a href="#au" class="xref">2.2</a>)</span> with the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span>, Note that this command is
for program or script use and is not the familiar login command typed
on a command line to gain access to a shell.<a href="#section-4.2.13-1" class="pilcrow">¶</a></p>
</div>
<p id="section-4.2.13-2">Command: <code>USERNAME &lt;username&gt;</code><a href="#section-4.2.13-2" class="pilcrow">¶</a></p>
<p id="section-4.2.13-3">If the command succeeds, the response is <code>OK</code>, otherwise
see the <span><a href="#errorresponses" class="xref">error responses</a> (<a href="#errorresponses" class="xref">4.3.2</a>)</span>.<a href="#section-4.2.13-3" class="pilcrow">¶</a></p>
<p id="section-4.2.13-4">For examples of the use of commands <code>USERNAME</code> and
<span><a href="#password" class="xref"><code>PASSWORD</code></a> (<a href="#password" class="xref">4.2.8</a>)</span> by <span><a href="#au" class="xref">administrative users</a> (<a href="#au" class="xref">2.2</a>)</span> see <a href="#adsecclient" class="xref">Section 6.5.2, Paragraph 1</a>.<a href="#section-4.2.13-4" class="pilcrow">¶</a></p>
</section>
<section id="section-4.2.14">
          <h4 id="name-ver">
<a href="#section-4.2.14" class="section-number selfRef">4.2.14. </a><a href="#name-ver" class="section-name selfRef"><code>VER</code></a>
          </h4>
<div id="ver">
<p id="section-4.2.14-1">Return the implementation version of the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span>.  This
command is intended for human as well as program use.<a href="#section-4.2.14-1" class="pilcrow">¶</a></p>
</div>
<p id="section-4.2.14-2">Command <code>VER</code><a href="#section-4.2.14-2" class="pilcrow">¶</a></p>
<p id="section-4.2.14-3">For example, the following command line sequence:<a href="#section-4.2.14-3" class="pilcrow">¶</a></p>
<div id="section-4.2.14-4">
<pre class="sourcecode">netcat localhost 3493
VER
Network UPS Tools upsd 2.7.4 - http://www.networkupstools.org/
</pre><a href="#section-4.2.14-4" class="pilcrow">¶</a>
</div>
<p id="section-4.2.14-5">Notes:<a href="#section-4.2.14-5" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="compact type-1" id="section-4.2.14-6">
<li id="section-4.2.14-6.1">There are no U+0022 QUOTATION MARK characters in the response.<a href="#section-4.2.14-6.1" class="pilcrow">¶</a>
</li>
            <li id="section-4.2.14-6.2">The implementation version of the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> returned by VER is
different to the protocol version returned by <span><a href="#protver" class="xref"><code>PROTVER</code></a> (<a href="#protver" class="xref">4.2.10</a>)</span>.<a href="#section-4.2.14-6.2" class="pilcrow">¶</a>
</li>
          </ol>
</section>
</section>
<section id="section-4.3">
        <h3 id="name-summary-of-responses">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-summary-of-responses" class="section-name selfRef">Summary of Responses</a>
        </h3>
<div id="responses">
<p id="section-4.3-1"></p>
</div>
<section id="section-4.3.1">
          <h4 id="name-response-when-command-succe">
<a href="#section-4.3.1" class="section-number selfRef">4.3.1. </a><a href="#name-response-when-command-succe" class="section-name selfRef">Response when Command Succeeds</a>
          </h4>
<div id="success">
<p id="section-4.3.1-1">If the command succeeds, the response has the
following command-dependent form:<a href="#section-4.3.1-1" class="pilcrow">¶</a></p>
</div>
<span id="name-response-if-command-succeed"></span><table class="center" id="table-2">
            <caption>
<a href="#table-2" class="selfRef">Table 2</a>:
<a href="#name-response-if-command-succeed" class="selfRef">Response if command succeeds</a>
            </caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Command     </th>
                <th class="text-left" rowspan="1" colspan="1">Response             </th>
                <th class="text-left" rowspan="1" colspan="1">Note
</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <span><a href="#attach" class="xref"><code>ATTACH</code></a> (<a href="#attach" class="xref">4.2.1</a>)</span>   </td>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>OK</code>          </td>
                <td class="text-left" rowspan="1" colspan="1">Was LOGIN
</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <span><a href="#detach" class="xref"><code>DETACH</code></a> (<a href="#detach" class="xref">4.2.2</a>)</span>   </td>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>OK Goodbye</code>  </td>
                <td class="text-left" rowspan="1" colspan="1">Was LOGOUT
</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <span><a href="#FSD" class="xref"><code>FSD</code></a> (<a href="#FSD" class="xref">4.2.3</a>)</span>      </td>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>OK FSD-SET</code>  </td>
                <td class="text-left" rowspan="1" colspan="1">

</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <span><a href="#get" class="xref"><code>GET</code></a> (<a href="#get" class="xref">4.2.4</a>)</span>      </td>
                <td class="text-left" rowspan="1" colspan="1">Sub command specific </td>
                <td class="text-left" rowspan="1" colspan="1">

</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <span><a href="#help" class="xref"><code>HELP</code></a> (<a href="#help" class="xref">4.2.5</a>)</span>     </td>
                <td class="text-left" rowspan="1" colspan="1">List of commands     </td>
                <td class="text-left" rowspan="1" colspan="1">

</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <span><a href="#instcmd" class="xref"><code>INSTCMD</code></a> (<a href="#instcmd" class="xref">4.2.6</a>)</span>  </td>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>OK </code>         </td>
                <td class="text-left" rowspan="1" colspan="1">

</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <span><a href="#list" class="xref"><code>LIST</code></a> (<a href="#list" class="xref">4.2.7</a>)</span>     </td>
                <td class="text-left" rowspan="1" colspan="1">Sub command specific </td>
                <td class="text-left" rowspan="1" colspan="1">

</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <span><a href="#password" class="xref"><code>PASSWORD</code></a> (<a href="#password" class="xref">4.2.8</a>)</span> </td>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>OK</code>          </td>
                <td class="text-left" rowspan="1" colspan="1">

</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <span><a href="#primary" class="xref"><code>PRIMARY</code></a> (<a href="#primary" class="xref">4.2.9</a>)</span>  </td>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>OK</code>          </td>
                <td class="text-left" rowspan="1" colspan="1">

</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <span><a href="#protver" class="xref"><code>PROTVER</code></a> (<a href="#protver" class="xref">4.2.10</a>)</span>  </td>
                <td class="text-left" rowspan="1" colspan="1">Protocol version     </td>
                <td class="text-left" rowspan="1" colspan="1">Was NETVER
</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <span><a href="#set" class="xref"><code>SET</code></a> (<a href="#set" class="xref">4.2.11</a>)</span>      </td>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>OK</code>          </td>
                <td class="text-left" rowspan="1" colspan="1">

</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <span><a href="#starttls" class="xref"><code>STARTTLS</code></a> (<a href="#starttls" class="xref">4.2.12</a>)</span> </td>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>OK STARTTLS</code> </td>
                <td class="text-left" rowspan="1" colspan="1">

</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <span><a href="#username" class="xref"><code>USERNAME</code></a> (<a href="#username" class="xref">4.2.13</a>)</span> </td>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>OK</code>          </td>
                <td class="text-left" rowspan="1" colspan="1">

</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <span><a href="#ver" class="xref"><code>VER</code></a> (<a href="#ver" class="xref">4.2.14</a>)</span>      </td>
                <td class="text-left" rowspan="1" colspan="1">Program version      </td>
                <td class="text-left" rowspan="1" colspan="1">

</td>
              </tr>
            </tbody>
          </table>
</section>
<section id="section-4.3.2">
          <h4 id="name-error-responses">
<a href="#section-4.3.2" class="section-number selfRef">4.3.2. </a><a href="#name-error-responses" class="section-name selfRef">Error Responses</a>
          </h4>
<div id="errorresponses">
<p id="section-4.3.2-1"></p>
</div>
<p id="section-4.3.2-2">Error responses have the following format:<a href="#section-4.3.2-2" class="pilcrow">¶</a></p>
<div id="section-4.3.2-3">
<pre class="sourcecode">ERR &lt;error-name&gt; [&lt;extra&gt;]
</pre><a href="#section-4.3.2-3" class="pilcrow">¶</a>
</div>
<p id="section-4.3.2-4">where <code>&lt;error-name&gt;</code> is a single word token taken from
the 27 characters A-Z and U+002D HYPHEN-MINUS. Implementations may if
needed add an additional optional <code>&lt;extra&gt;</code>.  Current
practice does not make use of this possibility.<a href="#section-4.3.2-4" class="pilcrow">¶</a></p>
<p id="section-4.3.2-5">The <code>&lt;error-name&gt;</code> may have one of the following
values:<a href="#section-4.3.2-5" class="pilcrow">¶</a></p>
<span id="name-error-responses-2"></span><div id="errors">
<table class="center" id="table-3">
            <caption>
<a href="#table-3" class="selfRef">Table 3</a>:
<a href="#name-error-responses-2" class="selfRef">Error responses</a>
            </caption>
<thead>
              <tr>
                <th class="text-center" rowspan="1" colspan="1">    The error name token    
               <br><code>&lt;error-name&gt;</code>
                </th>
                <th class="text-center" rowspan="1" colspan="1">Meaning
</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>ACCESS-DENIED</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">The client's host and/or
authentication details (username, password) are not sufficient to
execute the requested command.

</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>ALREADY-ATTACHED</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">
                  <p id="section-4.3.2-6.2.2.2.1">The client has already sent a
successful <span><a href="#attach" class="xref"><code>ATTACH</code></a> (<a href="#attach" class="xref">4.2.1</a>)</span> command for a given UPS and can't do it again.<a href="#section-4.3.2-6.2.2.2.1" class="pilcrow">¶</a></p>
<p id="section-4.3.2-6.2.2.2.2">Note: Historically, this error response was <code>ALREADY-LOGGED-IN</code>.<a href="#section-4.3.2-6.2.2.2.2" class="pilcrow">¶</a></p>
</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>ALREADY-SET-PASSWORD</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">The client has already
supplied a PASSWORD and is attempting to repeat the command in the
same <span><a href="#sess" class="xref">Session</a> (<a href="#sess" class="xref">2.10</a>)</span>.

</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>ALREADY-SET-USERNAME</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">The client has already
supplied a USERNAME, and is attempting to repeat the command within
the same <span><a href="#sess" class="xref">Session</a> (<a href="#sess" class="xref">2.10</a>)</span>.

</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>CMD-NOT-SUPPORTED</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">The specified UPS doesn't
support the <span><a href="#IC" class="xref">instant command</a> (<a href="#IC" class="xref">2.5</a>)</span> command.

</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>DATA-STALE</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">
                  <p id="section-4.3.2-6.2.6.2.1">The <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> is connected to the
<span><a href="#Driver" class="xref">Driver</a> (<a href="#Driver" class="xref">2.3</a>)</span> for the UPS, but that driver isn't providing regular updates
or has specifically marked the data as stale.  Current practice is for
the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> to refuse to provide the <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> with variables on stale units
to avoid false readings.<a href="#section-4.3.2-6.2.6.2.1" class="pilcrow">¶</a></p>
<p id="section-4.3.2-6.2.6.2.2">This generally means that the <span><a href="#Driver" class="xref">Driver</a> (<a href="#Driver" class="xref">2.3</a>)</span> is running, but it has lost
communication with the hardware. Check the physical connection to the
equipment.<a href="#section-4.3.2-6.2.6.2.2" class="pilcrow">¶</a></p>
</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>DRIVER-NOT-CONNECTED</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">The <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> can't perform the
requested command, since the <span><a href="#Driver" class="xref">Driver</a> (<a href="#Driver" class="xref">2.3</a>)</span> for that UPS is not
connected. This usually means that the driver is not running, or if it
is, is misconfigured.

</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>FEATURE-NOT-CONFIGURED</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">This instance of the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span>
hasn't been configured properly to allow the requested feature to
operate. In current practice this error response is possible only for
command <span><a href="#starttls" class="xref"><code>STARTTLS</code></a> (<a href="#starttls" class="xref">4.2.12</a>)</span>.

</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>FEATURE-NOT-SUPPORTED</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">This instance of <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> does
not support the requested feature.  In current practice this error
response is possible only for command <span><a href="#starttls" class="xref"><code>STARTTLS</code></a> (<a href="#starttls" class="xref">4.2.12</a>)</span>.

</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>INSTCMD-FAILED</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">The <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> failed to deliver the
<span><a href="#IC" class="xref">instant command</a> (<a href="#IC" class="xref">2.5</a>)</span> request to the <span><a href="#Driver" class="xref">Driver</a> (<a href="#Driver" class="xref">2.3</a>)</span>. No further information is available to
the client. This typically indicates a dead or broken driver.

</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>INVALID-ARGUMENT</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">The client sent an argument to a
command which is not recognized or is otherwise not valid in this
context. This is typically caused by sending a valid command such as
<span><a href="#get" class="xref"><code>GET</code></a> (<a href="#get" class="xref">4.2.4</a>)</span> with a subcommand which is not valid.

</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>INVALID-PASSWORD</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">The client sent a non valid
password.

</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>INVALID-USERNAME</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">The client sent an non valid
username.

</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>INVALID-VALUE</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">The value specified in the request
is not valid. This usually applies to a <span><a href="#set" class="xref"><code>SET</code></a> (<a href="#set" class="xref">4.2.11</a>)</span> of an <span><a href="#enum" class="xref"><code>ENUM</code></a> (<a href="#enum" class="xref">4.2.7.3</a>)</span> type
which is using a value not in the list of allowed values.

</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>PASSWORD-REQUIRED</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">The command requires a password
for authentication, but the client hasn't provided one.

</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>READONLY</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">The requested variable in a <span><a href="#set" class="xref"><code>SET</code></a> (<a href="#set" class="xref">4.2.11</a>)</span>
command is not writable.

</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>SET-FAILED</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">The <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> failed to deliver the set
request to the <span><a href="#Driver" class="xref">Driver</a> (<a href="#Driver" class="xref">2.3</a>)</span>. This is similar to <code>INSTCMD-FAILED</code>.

</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>TLS-ALREADY-ENABLED</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">
                  <p id="section-4.3.2-6.2.18.2.1">TLS mode is already enabled
on this connection, so the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> can't start it again.<a href="#section-4.3.2-6.2.18.2.1" class="pilcrow">¶</a></p>
<p id="section-4.3.2-6.2.18.2.2">Note: Historically, this message was <code>ALREADY-SSL-MODE.</code><a href="#section-4.3.2-6.2.18.2.2" class="pilcrow">¶</a></p>
</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>TLS-NOT-ENABLED</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">
                  <p id="section-4.3.2-6.2.19.2.1">TLS mode is required but has
not yet been enabled on this connection, so the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> can't send
commands.<a href="#section-4.3.2-6.2.19.2.1" class="pilcrow">¶</a></p>
<p id="section-4.3.2-6.2.19.2.2">Note: This message is experimental and not in current common
use.<a href="#section-4.3.2-6.2.19.2.2" class="pilcrow">¶</a></p>
</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>TOO-LONG</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">The requested value in a <span><a href="#set" class="xref"><code>SET</code></a> (<a href="#set" class="xref">4.2.11</a>)</span> command
is too long.

</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>UNKNOWN-COMMAND</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">The <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> doesn't recognize the
command.

</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>UNKNOWN-UPS</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">The UPS specified in the request is
not known to the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span>. This usually means that it didn't match
anything in the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> configuration.

</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>USERNAME-REQUIRED</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">The command requires a username
for authentication, but the client hasn't provided one.

</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>VAR-NOT-SUPPORTED</code>
</td>
                <td class="text-left" rowspan="1" colspan="1">The specified UPS doesn't
support the <span><a href="#var" class="xref">UPS variable</a> (<a href="#var" class="xref">2.12</a>)</span> in the command.
</td>
              </tr>
            </tbody>
          </table>
</div>
</section>
</section>
</section>
<section id="section-5">
      <h2 id="name-statuses-and-events">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-statuses-and-events" class="section-name selfRef">Statuses and Events</a>
      </h2>
<section id="section-5.1">
        <h3 id="name-status-symbols">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-status-symbols" class="section-name selfRef">Status Symbols</a>
        </h3>
<div id="symbols">
<p id="section-5.1-1">These symbols resume the abstracted view of the
UPS hardware maintained by the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span>.  The
variable <code>ups.status</code> contains one or more space-separated
status symbols which together describe the UPS state at that instant.
In current practice the <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> will poll variable <code>ups.status</code>
every 5 seconds with a command such as <code>GET VAR su700
ups.status</code> and response <code>VAR su700 ups.status "OB LB"</code> to
discover changes in the UPS status.  These changes will indicate UPS
events.<a href="#section-5.1-1" class="pilcrow">¶</a></p>
</div>
<span id="name-ups-status-symbols"></span><table class="center" id="table-4">
          <caption>
<a href="#table-4" class="selfRef">Table 4</a>:
<a href="#name-ups-status-symbols" class="selfRef">UPS Status Symbols</a>
          </caption>
<thead>
            <tr>
              <th class="text-center" rowspan="1" colspan="1">Status Symbol </th>
              <th class="text-center" rowspan="1" colspan="1">Meaning
</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>ALARM</code>
              </td>
              <td class="text-left" rowspan="1" colspan="1">The UPS reports that it requires intervention.

</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>BOOST</code>
              </td>
              <td class="text-left" rowspan="1" colspan="1">The UPS has determined that the voltage level of the public power supply is
too low, and is boosting it to the required level.  The UPS continues
to supply the protected system from the public power supply.

</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>BYPASS</code>
              </td>
              <td class="text-left" rowspan="1" colspan="1">The UPS is feeding current directly from the public power supply to the
protected system.  The backup facilities are disconnected.  This state
allows maintenance personnel to change the batteries without
interrupting the protected system.

</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>CAL</code>
              </td>
              <td class="text-left" rowspan="1" colspan="1">The UPS is calibrating itself, for example to determine at what
charge the <code>LB</code> status is raised or lowered.

</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>CHRG</code>
              </td>
              <td class="text-left" rowspan="1" colspan="1">
                <p id="section-5.1-2.2.5.2.1">The UPS battery is charging.  This usually implies that the UPS
also has status <code>OL</code>, but may not be the case if the UPS also has
status <code>OFF</code>.<a href="#section-5.1-2.2.5.2.1" class="pilcrow">¶</a></p>
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>COMM</code>
              </td>
              <td class="text-left" rowspan="1" colspan="1">The <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> has effective contact with the UPS.

</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>DISCHRG</code>
              </td>
              <td class="text-left" rowspan="1" colspan="1">
                <p id="section-5.1-2.2.7.2.1">The UPS battery is discharging.  This usually implies that the UPS
also has status <code>OB</code>, but may not be the case if the UPS also has
status <code>OFF</code>.<a href="#section-5.1-2.2.7.2.1" class="pilcrow">¶</a></p>
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>FSD</code>
              </td>
              <td class="text-left" rowspan="1" colspan="1">This "Forced Shutdown" status signals that the final shutdown
sequence has begun.

</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>LB</code>
              </td>
              <td class="text-left" rowspan="1" colspan="1">Low Battery. The battery level of the UPS is below a chosen limit.
The UPS may be in status <code>OL</code> or <code>OB</code>.

</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>NOCOMM</code>
              </td>
              <td class="text-left" rowspan="1" colspan="1">The <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> has no effective contact with the UPS.

</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>OB</code>
              </td>
              <td class="text-left" rowspan="1" colspan="1">On Battery. The UPS is taking energy from it's battery.
The battery is discharging.  A UPS must have status <code>OB</code> or <code>OL</code>,
otherwise it is deemed dead.

</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>OFF</code>
              </td>
              <td class="text-left" rowspan="1" colspan="1">The UPS is in state "Off".  It does not react to failure in the
public power supply.  The exact meaning depends on the model.

</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>OL</code>
              </td>
              <td class="text-left" rowspan="1" colspan="1">Online. The UPS is online, receiving energy from the public power supply.  The
battery is charging.  A UPS must have status <code>OB</code> or <code>OL</code>, otherwise
it is deemed dead.

</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>OVER</code>
              </td>
              <td class="text-left" rowspan="1" colspan="1">Overloaded. The UPS reports that the load on it is beyond it's
normal operating maximum.

</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>RB</code>
              </td>
              <td class="text-left" rowspan="1" colspan="1">Replace battery. The UPS reports that it's battery/batteries should
be replaced.

</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>TEST</code>
              </td>
              <td class="text-left" rowspan="1" colspan="1">Under test. The UPS is currently undergoing a test, which may have
been called for manually or internally.

</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>TICK</code>
              </td>
              <td class="text-left" rowspan="1" colspan="1">Heartbeat. A software UPS in the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> provides a regular signal
monitored by the <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> as a way of verifying effective end-to-end
management. <code>TICK</code> and <code>TOCK</code> are companions, they are considered
experimental.

</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>TOCK</code>
              </td>
              <td class="text-left" rowspan="1" colspan="1">Heartbeat. See <code>TICK</code>
              </td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>TRIM</code>
              </td>
              <td class="text-left" rowspan="1" colspan="1">The UPS has determined that the voltage level of the public power supply is
too high, and is reducing it to the required level.  The UPS continues
to supply the protected system from the public power supply.
</td>
            </tr>
          </tbody>
        </table>
</section>
<section id="section-5.2">
        <h3 id="name-events">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-events" class="section-name selfRef">Events</a>
        </h3>
<div id="events">
<p id="section-5.2-1">A <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> detects the occurrence of a UPS Event from a
change in the <span><a href="#st" class="xref">UPS status</a> (<a href="#st" class="xref">2.11</a>)</span> received from the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span>.  The following table
summarizes the process. A status of "none" means that the status
symbol is not present in the variable <code>ups.status</code>.<a href="#section-5.2-1" class="pilcrow">¶</a></p>
</div>
<p id="section-5.2-2">The <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> should retrieve the variable <code>ups.status</code> from the
<span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> at regular intervals.  If the interval is too short, compute and
network resources will be wasted, but if the interval is too large,
the <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> risks missing short-lived changes in the UPS status.<a href="#section-5.2-2" class="pilcrow">¶</a></p>
<p id="section-5.2-3">A default value of 5 seconds is recommended, but an implementation
may make this value configurable.  By default the "old" status is
therefore the previous value retrieved 5 seconds ago.<a href="#section-5.2-3" class="pilcrow">¶</a></p>
<p id="section-5.2-4">Current practice is for the <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> to assign names to certain
events.  These is shown in the table in parentheses.<a href="#section-5.2-4" class="pilcrow">¶</a></p>
<span id="name-event-deduction-from-status"></span><table class="center" id="table-5">
          <caption>
<a href="#table-5" class="selfRef">Table 5</a>:
<a href="#name-event-deduction-from-status" class="selfRef">Event deduction from status changes</a>
          </caption>
<thead>
            <tr>
              <th class="text-left" rowspan="1" colspan="1">Old status  </th>
              <th class="text-left" rowspan="1" colspan="1">New status  </th>
              <th class="text-left" rowspan="1" colspan="1">Event                    </th>
              <th class="text-left" rowspan="1" colspan="1">    
    </th>
              <th class="text-left" rowspan="1" colspan="1">Old status  </th>
              <th class="text-left" rowspan="1" colspan="1">New status  </th>
              <th class="text-left" rowspan="1" colspan="1">Event
</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">none        </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>ALARM</code>    </td>
              <td class="text-left" rowspan="1" colspan="1">Alarm on                 </td>
              <td class="text-left" rowspan="1" colspan="1">    
    </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>ALARM</code>    </td>
              <td class="text-left" rowspan="1" colspan="1">none        </td>
              <td class="text-left" rowspan="1" colspan="1">Alarm off
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">none        </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>BOOST</code>    </td>
              <td class="text-left" rowspan="1" colspan="1">Boosting voltage         </td>
              <td class="text-left" rowspan="1" colspan="1">    
    </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>BOOST</code>    </td>
              <td class="text-left" rowspan="1" colspan="1">none        </td>
              <td class="text-left" rowspan="1" colspan="1">Not boosting
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">none        </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>BYPASS</code>   </td>
              <td class="text-left" rowspan="1" colspan="1">Bypass on                </td>
              <td class="text-left" rowspan="1" colspan="1">    
    </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>BYPASS</code>   </td>
              <td class="text-left" rowspan="1" colspan="1">none        </td>
              <td class="text-left" rowspan="1" colspan="1">Bypass off
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">none        </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>CAL</code>      </td>
              <td class="text-left" rowspan="1" colspan="1">Calibrating              </td>
              <td class="text-left" rowspan="1" colspan="1">    
    </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>CAL</code>      </td>
              <td class="text-left" rowspan="1" colspan="1">none        </td>
              <td class="text-left" rowspan="1" colspan="1">Not calibrating
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">none        </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>CHRG</code>     </td>
              <td class="text-left" rowspan="1" colspan="1">Charging                 </td>
              <td class="text-left" rowspan="1" colspan="1">    
    </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>CHRG</code>     </td>
              <td class="text-left" rowspan="1" colspan="1">none        </td>
              <td class="text-left" rowspan="1" colspan="1">Not charging
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">none        </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>COMM</code>     </td>
              <td class="text-left" rowspan="1" colspan="1">UPS communicating<br>(<code>COMMOK</code>)     </td>
              <td class="text-left" rowspan="1" colspan="1">    
    </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>COMM</code>     </td>
              <td class="text-left" rowspan="1" colspan="1">none        </td>
              <td class="text-left" rowspan="1" colspan="1">See note <a href="#DDD" class="xref">4</a>
              </td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">none        </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>DISCHRG</code>  </td>
              <td class="text-left" rowspan="1" colspan="1">Discharging              </td>
              <td class="text-left" rowspan="1" colspan="1">    
    </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>DISCHRG</code>  </td>
              <td class="text-left" rowspan="1" colspan="1">none        </td>
              <td class="text-left" rowspan="1" colspan="1">Not discharging
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">none        </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>FSD</code> </td>
              <td class="text-left" rowspan="1" colspan="1">System shutdown<br>(<code>FSD</code>) (<code>SHUTDOWN</code>)      </td>
              <td class="text-left" rowspan="1" colspan="1">    
    </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>FSD</code> </td>
              <td class="text-left" rowspan="1" colspan="1">none       </td>
              <td class="text-left" rowspan="1" colspan="1">Shutdown abandoned.  See note <a href="#AAA" class="xref">1</a>
              </td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">none        </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>LB</code>       </td>
              <td class="text-left" rowspan="1" colspan="1">Low battery.  See note <a href="#BBB" class="xref">2</a> <br>(<code>LOWBATT</code>) </td>
              <td class="text-left" rowspan="1" colspan="1">    
    </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>LB</code>       </td>
              <td class="text-left" rowspan="1" colspan="1">none        </td>
              <td class="text-left" rowspan="1" colspan="1">Battery not low
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">none        </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>NOCOMM</code>   </td>
              <td class="text-left" rowspan="1" colspan="1">UPS dead?  See note <a href="#DDD" class="xref">4</a><br>(<code>COMMBAD</code>) (<code>NOCOMM</code>) </td>
              <td class="text-left" rowspan="1" colspan="1">    
    </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>NOCOMM</code>   </td>
              <td class="text-left" rowspan="1" colspan="1">none        </td>
              <td class="text-left" rowspan="1" colspan="1">See note <a href="#DDD" class="xref">4</a>
              </td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">none        </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>OFF</code>      </td>
              <td class="text-left" rowspan="1" colspan="1">UPS turned off           </td>
              <td class="text-left" rowspan="1" colspan="1">    
    </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>OFF</code>      </td>
              <td class="text-left" rowspan="1" colspan="1">none        </td>
              <td class="text-left" rowspan="1" colspan="1">UPS not turned off
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>OB</code>       </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>OL</code>       </td>
              <td class="text-left" rowspan="1" colspan="1">Receiving power<br>(<code>ONLINE</code>)  </td>
              <td class="text-left" rowspan="1" colspan="1">    
    </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>OL</code>       </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>OB</code>       </td>
              <td class="text-left" rowspan="1" colspan="1">Power lost<br>(<code>ONBATT</code>)
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">none        </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>OVER</code>     </td>
              <td class="text-left" rowspan="1" colspan="1">UPS overloaded           </td>
              <td class="text-left" rowspan="1" colspan="1">    
    </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>OVER</code>     </td>
              <td class="text-left" rowspan="1" colspan="1">none        </td>
              <td class="text-left" rowspan="1" colspan="1">Overload gone
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">none        </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>RB</code>       </td>
              <td class="text-left" rowspan="1" colspan="1">Replace battery<br>(<code>REPLBATT</code>)     </td>
              <td class="text-left" rowspan="1" colspan="1">    
    </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>RB</code>       </td>
              <td class="text-left" rowspan="1" colspan="1">none        </td>
              <td class="text-left" rowspan="1" colspan="1">Replacement canceled
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">none        </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>TEST</code>     </td>
              <td class="text-left" rowspan="1" colspan="1">Test starts              </td>
              <td class="text-left" rowspan="1" colspan="1">    
    </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>TEST</code>     </td>
              <td class="text-left" rowspan="1" colspan="1">none        </td>
              <td class="text-left" rowspan="1" colspan="1">Test finished
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">none        </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>TICK</code>     </td>
              <td class="text-left" rowspan="1" colspan="1">Heartbeat event.  See note <a href="#CCC" class="xref">3</a> </td>
              <td class="text-left" rowspan="1" colspan="1">    
    </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>TICK</code>     </td>
              <td class="text-left" rowspan="1" colspan="1">none        </td>
              <td class="text-left" rowspan="1" colspan="1">No heartbeat.   See note <a href="#CCC" class="xref">3</a>
              </td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">none        </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>TOCK</code>     </td>
              <td class="text-left" rowspan="1" colspan="1">Heartbeat event.  See note <a href="#CCC" class="xref">3</a> </td>
              <td class="text-left" rowspan="1" colspan="1">    
    </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>TOCK</code>     </td>
              <td class="text-left" rowspan="1" colspan="1">none        </td>
              <td class="text-left" rowspan="1" colspan="1">No heartbeat.  See note <a href="#CCC" class="xref">3</a>
              </td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">none        </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>TRIM</code>     </td>
              <td class="text-left" rowspan="1" colspan="1">Trimming voltage         </td>
              <td class="text-left" rowspan="1" colspan="1">    
    </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>TRIM</code>     </td>
              <td class="text-left" rowspan="1" colspan="1">none        </td>
              <td class="text-left" rowspan="1" colspan="1">Not trimming
</td>
            </tr>
          </tbody>
        </table>
<p id="section-5.2-6">Notes<a href="#section-5.2-6" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="compact type-1" id="section-5.2-7">
<li id="section-5.2-7.1">
<div id="AAA">Current practice does not include this event.<a href="#AAA" class="pilcrow">¶</a>
</div>
          </li>
<li id="section-5.2-7.2">
<div id="BBB">If the status <code>OB</code> is present, current practice
takes <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> reception of <code>LB</code> as an order to perform an emergency
system shutdown.<a href="#BBB" class="pilcrow">¶</a>
</div>
          </li>
<li id="section-5.2-7.3">
<div id="CCC">The use of a software defined UPS to provide a
heartbeat is experimental and is not part of common current practice.<a href="#CCC" class="pilcrow">¶</a>
</div>
          </li>
<li id="section-5.2-7.4">
<div id="DDD">Current practice is: if the UPS has not responded for 15 seconds,
the <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> assumes that the UPS is "<em>dead</em>" (<code>NOCOMM</code>), and if
the last known <code>OL</code>/<code>OB</code> status was <code>OB</code> a system shutdown
(<code>FSD</code>) is called for.<a href="#DDD" class="pilcrow">¶</a>
</div>
        </li>
</ol>
</section>
</section>
<section id="section-6">
      <h2 id="name-security-considerations">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<div id="Sec">
<p id="section-6-1">The security issues raised by UPS management are those
of the power industry in general: they are addressed in detail in
<span><a href="#IEC62351-1" class="xref">Technical Specification IEC 62351-1</a> [<a href="#IEC62351-1" class="xref">IEC62351-1</a>]</span>.
In addition to equipment security, cyber security is now an essential
consideration.<a href="#section-6-1" class="pilcrow">¶</a></p>
</div>
<p id="section-6-2">Quoting from <span><a href="#IEC62351-1" class="xref">IEC 62351-1 clause
5.2.3.5</a> [<a href="#IEC62351-1" class="xref">IEC62351-1</a>]</span>:<a href="#section-6-2" class="pilcrow">¶</a></p>
<blockquote id="section-6-3"> With the computer systems for power operations presumably
kept isolated from the Internet, many utility personnel do not see any
reason for adding security measures to these systems.  However, as
clearly seen from these Subclauses, this may not be true anymore as
networking becomes more prevalent and additional information access
requirements grow.<a href="#section-6-3" class="pilcrow">¶</a>
</blockquote>
<p id="section-6-4"><span><a href="#IEC62351-1" class="xref">Clause 5.3.5</a> [<a href="#IEC62351-1" class="xref">IEC62351-1</a>]</span> lists the typical
security attacks:<a href="#section-6-4" class="pilcrow">¶</a></p>
<blockquote id="section-6-5">Eavesdropping, Masquerade, Man-in-the-Middle, Replay,
Resource Exhaustion<a href="#section-6-5" class="pilcrow">¶</a>
</blockquote>
<p id="section-6-6">Additionally the UPS management protocol provides means for a <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span>
to shut down a working system and it's power supply as described
in <span><a href="#shutdownstory" class="xref">The Shutdown Story</a> (<a href="#shutdownstory" class="xref">B</a>)</span>.  A
malicious client acting as a <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> could turn off the UPS power
outlets causing the system to fail.<a href="#section-6-6" class="pilcrow">¶</a></p>
<p id="section-6-7">Most of these issues are well known IT issues concerning system
protection and disaster recovery, and are beyond the scope of this
document, however the protocol itself has security considerations:<a href="#section-6-7" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="compact type-1" id="section-6-8">
<li id="section-6-8.1">It should not be possible for non-authorized agents to open
sessions and send mission-critical commands such as
<span><a href="#FSD" class="xref"><code>FSD</code></a> (<a href="#FSD" class="xref">4.2.3</a>)</span> to the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span>.<a href="#section-6-8.1" class="pilcrow">¶</a>
</li>
        <li id="section-6-8.2">It should not be possible to intercept the traffic between the
<span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> and the <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span>.<a href="#section-6-8.2" class="pilcrow">¶</a>
</li>
      </ol>
<p id="section-6-9">Let's look more closely at these requirements.<a href="#section-6-9" class="pilcrow">¶</a></p>
<section id="section-6.1">
        <h3 id="name-agent-verification">
<a href="#section-6.1" class="section-number selfRef">6.1. </a><a href="#name-agent-verification" class="section-name selfRef">Agent Verification</a>
        </h3>
<div id="agentverif">
<p id="section-6.1-1">The protocol provides commands <span><a href="#username" class="xref"><code>USERNAME</code></a> (<a href="#username" class="xref">4.2.13</a>)</span> and
<span><a href="#password" class="xref"><code>PASSWORD</code></a> (<a href="#password" class="xref">4.2.8</a>)</span> which allow an <span><a href="#au" class="xref">administrative user</a> (<a href="#au" class="xref">2.2</a>)</span> in a <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> to authenticate itself to
the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span>.  The <span><a href="#au" class="xref">administrative user</a> (<a href="#au" class="xref">2.2</a>)</span> name and password need protection from sniffing:
this is done by encrypting the traffic.<a href="#section-6.1-1" class="pilcrow">¶</a></p>
</div>
</section>
<section id="section-6.2">
        <h3 id="name-current-encryption-practice">
<a href="#section-6.2" class="section-number selfRef">6.2. </a><a href="#name-current-encryption-practice" class="section-name selfRef">Current Encryption Practice</a>
        </h3>
<div id="TLS">
<p id="section-6.2-1">The protocol provides command <span><a href="#starttls" class="xref"><code>STARTTLS</code></a> (<a href="#starttls" class="xref">4.2.12</a>)</span> which calls
on the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> to support TLS encryption of the communication.  If this
command is accepted, the <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> also encrypts.<a href="#section-6.2-1" class="pilcrow">¶</a></p>
</div>
<p id="section-6.2-2">At present the command <span><a href="#starttls" class="xref"><code>STARTTLS</code></a> (<a href="#starttls" class="xref">4.2.12</a>)</span> is too frequently refused, and
traffic proceeds unencrypted, with plain text transmission of
passwords and status values.<a href="#section-6.2-2" class="pilcrow">¶</a></p>
<p id="section-6.2-3">In current <span><a href="#proj" class="xref">NUT Project</a> (<a href="#proj" class="xref">2.7</a>)</span> practice, the use of TLS is optional, however a
<span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> may refuse to accept unencrypted communication.  This is done by
setting declarations <code>FORCESSL</code> to 1 and <code>CERTVERIFY</code> to
1 in the <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> configuration file.<a href="#section-6.2-3" class="pilcrow">¶</a></p>
<p id="section-6.2-4">A further weakness is that the <code>FORCESSL</code>
and <code>CERTVERIFY</code> declarations are in the <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> configuration
file and not in the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span>.  Secure practice requires enforcement by
the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> rather than a possibly rogue <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> out on the Internet.<a href="#section-6.2-4" class="pilcrow">¶</a></p>
<section id="section-6.2.1">
          <h4 id="name-secure-tunnels">
<a href="#section-6.2.1" class="section-number selfRef">6.2.1. </a><a href="#name-secure-tunnels" class="section-name selfRef">Secure Tunnels</a>
          </h4>
<p id="section-6.2.1-1">Some system administrators currently use techniques such
as <span><a href="#stunnel" class="xref">stunnel</a> [<a href="#stunnel" class="xref">stunnel</a>]</span> to encrypt the commands and
responses, but the <span><a href="#proj" class="xref">NUT Project</a> (<a href="#proj" class="xref">2.7</a>)</span> has no procedure to enforce this on sites.<a href="#section-6.2.1-1" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-6.3">
        <h3 id="name-current-general-security-pr">
<a href="#section-6.3" class="section-number selfRef">6.3. </a><a href="#name-current-general-security-pr" class="section-name selfRef">Current General Security Practice</a>
        </h3>
<div id="weak">
<p id="section-6.3-1">Experience over the last 20 years shows that new UPS
management software releases are not frequent, and when installed,
stay unmodified for some years.  This is probably because UPS
management is a mature hardware dependent activity.  A limited number
of system administrators have access to the UPS hardware and software
and tend to assume a certain "security by obscurity" since many
installations have a configuration as shown in
figure <a href="#fig.weak" class="xref">5</a> which uses port
nut/3493 between the two daemons running in the same system.  The
traffic is often not encrypted, and when encrypted uses deprecated
early versions of SSL/TLS.<a href="#section-6.3-1" class="pilcrow">¶</a></p>
</div>
<span id="name-common-single-system-config"></span><div id="fig.weak">
<figure id="figure-5">
          <div class="alignCenter art-text artwork" id="section-6.3-2.1">
<pre> ,-----,   ,--------------------,---------------------,
 | UPS |---|  Attachment   &lt;-Commands     Management  |
 |     |===|    Daemon       Responses-&gt;    Daemon    |
 /-----\   '--------------------'---------------------'
              Listens on
             port nut/3493
             for localhost</pre>
</div>
<figcaption><a href="#figure-5" class="selfRef">Figure 5</a>:
<a href="#name-common-single-system-config" class="selfRef">Common single-system configuration</a>
          </figcaption></figure>
</div>
<p id="section-6.3-3">This situation is now changing as low cost processors become
available, costing significantly less than a UPS unit.  This evolution
makes it interesting to shift to a configuration as shown in
figure <a href="#fig.weaker" class="xref">6</a>, but it also
exacerbates the security weakness of figure <a href="#fig.weak" class="xref">5</a> since the traffic between the daemons is now over an
exposed network.<a href="#section-6.3-3" class="pilcrow">¶</a></p>
<span id="name-integration-of-ups-and-atta"></span><div id="fig.weaker">
<figure id="figure-6">
          <div class="alignCenter art-text artwork" id="section-6.3-4.1">
<pre> ,-----,------------,               ,--------------,
 | UPS - Attachment | &lt;-Commands    |  Management  |
 |     |   Daemon   |   Responses-&gt; |    Daemon    |
 /-----'------------\               '--------------'
         Listens on
        port nut/3493</pre>
</div>
<figcaption><a href="#figure-6" class="selfRef">Figure 6</a>:
<a href="#name-integration-of-ups-and-atta" class="selfRef">Integration of UPS and Attachment Daemon</a>
          </figcaption></figure>
</div>
</section>
<section id="section-6.4">
        <h3 id="name-security-needs">
<a href="#section-6.4" class="section-number selfRef">6.4. </a><a href="#name-security-needs" class="section-name selfRef">Security Needs</a>
        </h3>
<div id="need">
<p id="section-6.4-1">UPS management needs to move to a more secure
practice in which all traffic is encrypted, but this cannot be imposed
by a wave of the hand: it cannot be implemented quickly and without
impact to many deployed systems.  The ideal would be an easy-to-follow
migration plan which provides the required encryption but tolerates
the slow moving updates of the UPS software.<a href="#section-6.4-1" class="pilcrow">¶</a></p>
</div>
<p id="section-6.4-2">Here are four examples of possible temporary solutions.<a href="#section-6.4-2" class="pilcrow">¶</a></p>
<section id="section-6.4.1">
          <h4 id="name-shims">
<a href="#section-6.4.1" class="section-number selfRef">6.4.1. </a><a href="#name-shims" class="section-name selfRef">Shims</a>
          </h4>
<p id="section-6.4.1-1">A possible technique introduces shims between the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> and the
network, and between the network and the <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> as shown in
figure <a href="#fig.shim" class="xref">7</a>.  These shims
provide <span><a href="#RFC8446" class="xref">TLS support</a> [<a href="#RFC8446" class="xref">RFC8446</a>]</span>, allowing the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span>
and <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> to continue temporarily without native TLS.  The technique
has been successfully tested, but the principal difficulty is that the
shims make use of a second port which is not currently available.<a href="#section-6.4.1-1" class="pilcrow">¶</a></p>
<span id="name-shims-provide-tls-support-d"></span><div id="fig.shim">
<figure id="figure-7">
            <div class="alignCenter art-text artwork" id="section-6.4.1-2.1">
<pre>              TLS shim listens     TLS shim listens
                 on port TBD1        on port 3493
 ,-----,------------,----,               ,----,--------------,
 | UPS - Attachment |TLS | &lt;-STARTTLS    | TLS|  Management  |
 |     |   Daemon   |shim|         OK--&gt; |shim|    Daemon    |
 /-----'------------'----\               '----'--------------'
         Listens on
       port nut/3493</pre>
</div>
<figcaption><a href="#figure-7" class="selfRef">Figure 7</a>:
<a href="#name-shims-provide-tls-support-d" class="selfRef">Shims provide TLS support during migration</a>
            </figcaption></figure>
</div>
<section id="section-6.4.1.1">
            <h5 id="name-attachment-daemon-shim">
<a href="#section-6.4.1.1" class="section-number selfRef">6.4.1.1. </a><a href="#name-attachment-daemon-shim" class="section-name selfRef">Attachment Daemon Shim</a>
            </h5>
<p id="section-6.4.1.1-1">The shim in front of the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> listens to incoming traffic on a
port to be specified.  When it receives the command <span><a href="#starttls" class="xref"><code>STARTTLS</code></a> (<a href="#starttls" class="xref">4.2.12</a>)</span> it<a href="#section-6.4.1.1-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="compact type-1" id="section-6.4.1.1-2">
<li id="section-6.4.1.1-2.1">Returns <code>OK</code> to the client and sets up TLS encapsulation.<a href="#section-6.4.1.1-2.1" class="pilcrow">¶</a>
</li>
              <li id="section-6.4.1.1-2.2">Does not send <span><a href="#starttls" class="xref"><code>STARTTLS</code></a> (<a href="#starttls" class="xref">4.2.12</a>)</span> to the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> port nut/3493.<a href="#section-6.4.1.1-2.2" class="pilcrow">¶</a>
</li>
            </ol>
<p id="section-6.4.1.1-3">All other commands and responses are passed through.<a href="#section-6.4.1.1-3" class="pilcrow">¶</a></p>
</section>
<section id="section-6.4.1.2">
            <h5 id="name-management-daemon-shim">
<a href="#section-6.4.1.2" class="section-number selfRef">6.4.1.2. </a><a href="#name-management-daemon-shim" class="section-name selfRef">Management Daemon Shim</a>
            </h5>
<p id="section-6.4.1.2-1">The shim in front of the <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> listens for incoming traffic on port
nut/3493.  When it receives the command <span><a href="#starttls" class="xref"><code>STARTTLS</code></a> (<a href="#starttls" class="xref">4.2.12</a>)</span> it<a href="#section-6.4.1.2-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="compact type-1" id="section-6.4.1.2-2">
<li id="section-6.4.1.2-2.1">Returns <code>FEATURE-NOT-CONFIGURED</code> to the client.<a href="#section-6.4.1.2-2.1" class="pilcrow">¶</a>
</li>
              <li id="section-6.4.1.2-2.2">Sends <span><a href="#starttls" class="xref"><code>STARTTLS</code></a> (<a href="#starttls" class="xref">4.2.12</a>)</span> to the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> on a port to be specified.<a href="#section-6.4.1.2-2.2" class="pilcrow">¶</a>
</li>
            </ol>
<p id="section-6.4.1.2-3">All other commands and responses are passed through.<a href="#section-6.4.1.2-3" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-6.4.2">
          <h4 id="name-ssh-tunnels">
<a href="#section-6.4.2" class="section-number selfRef">6.4.2. </a><a href="#name-ssh-tunnels" class="section-name selfRef">SSH Tunnels</a>
          </h4>
<p id="section-6.4.2-1">Another possible technique is the use of SSH tunnels, using a
software such as stunnel <span>[<a href="#stunnel" class="xref">stunnel</a>]</span> which adds
OpenSSL-based TLS support without modifying the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> or <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span>.<a href="#section-6.4.2-1" class="pilcrow">¶</a></p>
</section>
<section id="section-6.4.3">
          <h4 id="name-vpn">
<a href="#section-6.4.3" class="section-number selfRef">6.4.3. </a><a href="#name-vpn" class="section-name selfRef">VPN</a>
          </h4>
<div id="VPN">
<p id="section-6.4.3-1">A further option to secure communications is very
similar to SSH tunnelling and consists of routing the NUT traffic
through a VPN.<a href="#section-6.4.3-1" class="pilcrow">¶</a></p>
</div>
<aside id="section-6.4.3-2">
            <p id="section-6.4.3-2.1">Since NUT uses the TCP protocol exclusively, this VPN can
use ISO network layer three TUN devices and does not require layer two
TAP devices.<a href="#section-6.4.3-2.1" class="pilcrow">¶</a></p>
</aside>
</section>
<section id="section-6.4.4">
          <h4 id="name-vlan">
<a href="#section-6.4.4" class="section-number selfRef">6.4.4. </a><a href="#name-vlan" class="section-name selfRef">VLAN</a>
          </h4>
<div id="VLAN">
<p id="section-6.4.4-1">A fourth option is to isolate the UPS management
traffic at the network switching level using a VLAN technique.<a href="#section-6.4.4-1" class="pilcrow">¶</a></p>
</div>
<span id="name-ups-management-protocol-run"></span><div id="fig.VLAN">
<figure id="figure-8">
            <div class="alignCenter art-text artwork" id="section-6.4.4-2.1">
<pre>          ,-------------,               ,-------------,
,-----,   | Attachment  |               | Management  |
| UPS |---|   Daemon    |               |   Daemon    |
|     |   |-------------|      UPS      |-------------|
|     |===|             |   Management  |    UPS      |
/-----\   | Protected   |---------------| Management  |
          |  Server     |     VLAN      |   Client    |
          |             |               '-------------'
          '-------------'
      Production | VLAN
             ,---|-------,
            ,-----------,|
           ,-----------,|'
           |  Clients  |'
           '-----------'</pre>
</div>
<figcaption><a href="#figure-8" class="selfRef">Figure 8</a>:
<a href="#name-ups-management-protocol-run" class="selfRef">UPS Management Protocol runs over its own VLAN</a>
            </figcaption></figure>
</div>
<p id="section-6.4.4-3">In <span><a href="#fig.VLAN" class="xref">figure</a> (<a href="#fig.VLAN" class="xref">8</a>)</span> there are two
VLANS: The main traffic between the protected server and its clients
uses the production VLAN. The UPS management traffic between the
attachment and management daemons uses the UPS management VLAN.<a href="#section-6.4.4-3" class="pilcrow">¶</a></p>
</section>
<section id="section-6.4.5">
          <h4 id="name-long-term-enforced-secure-c">
<a href="#section-6.4.5" class="section-number selfRef">6.4.5. </a><a href="#name-long-term-enforced-secure-c" class="section-name selfRef">Long Term: Enforced Secure Communication</a>
          </h4>
<p id="section-6.4.5-1">In the long term, enforcing secure communication requires
tightening up the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> to require the use of command <span><a href="#starttls" class="xref"><code>STARTTLS</code></a> (<a href="#starttls" class="xref">4.2.12</a>)</span> for
commands sent over the global Internet.  In such a situation an <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span>
listening for traffic other than from the <code>localhost</code>:<a href="#section-6.4.5-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-6.4.5-2">
<li id="section-6.4.5-2.1">
<div id="should">SHOULD require and accept command <span><a href="#starttls" class="xref"><code>STARTTLS</code></a> (<a href="#starttls" class="xref">4.2.12</a>)</span>,<a href="#should" class="pilcrow">¶</a>
</div>
            </li>
<li id="section-6.4.5-2.2">
<div id="must">MUST encrypt all communication with a <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span>,<a href="#must" class="pilcrow">¶</a>
</div>
            </li>
<li id="section-6.4.5-2.3">
<div id="shall">SHALL refuse all non-encrypted commands except an initial
<span><a href="#starttls" class="xref"><code>STARTTLS</code></a> (<a href="#starttls" class="xref">4.2.12</a>)</span>.<a href="#shall" class="pilcrow">¶</a>
</div>
          </li>
</ol>
<p id="section-6.4.5-3">Notes:<a href="#section-6.4.5-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.4.5-4.1">The "SHOULD" rather than "MUST" in <a href="#should" class="xref">1</a> above allows system administrators to enforce secure
communication using other techniques which do not involve the
<span><a href="#starttls" class="xref"><code>STARTTLS</code></a> (<a href="#starttls" class="xref">4.2.12</a>)</span> command.<a href="#section-6.4.5-4.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-6.4.5-4.2">If an <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> requires that all commands be encrypted as required by
the "MUST" in <a href="#must" class="xref">2</a> above, then
automatically each <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> must encrypt as well, since it has to do so in
order to gain access.<a href="#section-6.4.5-4.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-6.4.5-4.3">The "SHALL" in <a href="#shall" class="xref">3</a> above applies to
traffic from the global Internet.  An <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> MAY accept unencrypted
commands from <code>localhost</code> if the local installation's security
practices allow it, for example in a dedicated appliance.<a href="#section-6.4.5-4.3" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-6.4.5-4.4">Note that the separate management of strongly secure traffic from
the global Internet and weakly secure traffic from <code>localhost</code>
can be achieved by using two ports: <code>nut/3493</code> for the current
weakly secure traffic from <code>localhost</code>, and some other port,
perhaps <code>ups/TBD1</code>, for enforced secure communication, much in
the manner of <code>http</code> and <code>https</code>.<a href="#section-6.4.5-4.4" class="pilcrow">¶</a>
</li>
          </ul>
</section>
</section>
<section id="section-6.5">
        <h3 id="name-administrative-security">
<a href="#section-6.5" class="section-number selfRef">6.5. </a><a href="#name-administrative-security" class="section-name selfRef">Administrative Security</a>
        </h3>
<div id="adsec">
<p id="section-6.5-1">Administrative commands such as <span><a href="#FSD" class="xref"><code>FSD</code></a> (<a href="#FSD" class="xref">4.2.3</a>)</span>, <span><a href="#instcmd" class="xref"><code>INSTCMD</code></a> (<a href="#instcmd" class="xref">4.2.6</a>)</span>
and <span><a href="#set" class="xref"><code>SET</code></a> (<a href="#set" class="xref">4.2.11</a>)</span> are powerful and can have a deep effect on system
integrity, For example, the command <span><a href="#FSD" class="xref"><code>FSD</code></a> (<a href="#FSD" class="xref">4.2.3</a>)</span> is involved in mission
critical system shutdown decisions.  Access to them needs to be
managed and restricted.  This clause presents the current practice.<a href="#section-6.5-1" class="pilcrow">¶</a></p>
</div>
<section id="section-6.5.1">
          <h4 id="name-management-of-administrativ">
<a href="#section-6.5.1" class="section-number selfRef">6.5.1. </a><a href="#name-management-of-administrativ" class="section-name selfRef">Management of Administrative Users</a>
          </h4>
<div id="adminuser">
<p id="section-6.5.1-1"> The <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> maintains a file
(currently <code>upsd.users</code>) defining each <span><a href="#au" class="xref">administrative user</a> (<a href="#au" class="xref">2.2</a>)</span>.  Note that these
users are independent of those recorded in file <code>/etc/passwd</code>.
Each administrative user gets its own section in
file <code>upsd.users</code>. The declarations in that section set the
parameters which define that user's privileges. The section begins
with the name of the user enclosed in square brackets, U+005B LEFT
SQUARE BRACKET [ and U+005D RIGHT SQUARE BRACKET ], and continues
until the next user name in brackets or EOF.<a href="#section-6.5.1-1" class="pilcrow">¶</a></p>
</div>
<p id="section-6.5.1-2">For example the following file declares two <span><a href="#au" class="xref">administrative users</a> (<a href="#au" class="xref">2.2</a>)</span> <code>admin</code>
and <code>pfy</code>:<a href="#section-6.5.1-2" class="pilcrow">¶</a></p>
<div id="section-6.5.1-3">
<pre class="sourcecode">   [admin]
       password = sekret
       upsmon master
       actions = SET
       instcmds = ALL
   [pfy]
       password = sekret
       instcmds = test.panel.start
       instcmds = test.panel.stop
</pre><a href="#section-6.5.1-3" class="pilcrow">¶</a>
</div>
<p id="section-6.5.1-4">Within each section the <span><a href="#au" class="xref">administrative user</a> (<a href="#au" class="xref">2.2</a>)</span> declarations are:<a href="#section-6.5.1-4" class="pilcrow">¶</a></p>
<span id="name-administrative-user-declara"></span><table class="center" id="table-6">
            <caption>
<a href="#table-6" class="selfRef">Table 6</a>:
<a href="#name-administrative-user-declara" class="selfRef">Administrative user declarations</a>
            </caption>
<thead>
              <tr>
                <th class="text-center" rowspan="1" colspan="1">Declaration </th>
                <th class="text-center" rowspan="1" colspan="1">Meaning
</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>actions</code>
                </td>
                <td class="text-left" rowspan="1" colspan="1">
                  <p id="section-6.5.1-5.2.1.2.1">Allow the user to do certain things in the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span>. To
        specify multiple actions, use multiple instances of the
        declaration. Valid actions are:<a href="#section-6.5.1-5.2.1.2.1" class="pilcrow">¶</a></p>
<ul class="normal text-left">
<li class="normal text-left" id="section-6.5.1-5.2.1.2.2.1">
                      <code>FSD</code> Set the "Forced Shutdown" flag for this UPS.
                  See <span><a href="#FSD" class="xref"><code>FSD</code></a> (<a href="#FSD" class="xref">4.2.3</a>)</span>.<a href="#section-6.5.1-5.2.1.2.2.1" class="pilcrow">¶</a>
</li>
                    <li class="normal text-left" id="section-6.5.1-5.2.1.2.2.2">
                      <code>SET</code> Change the value of a <span><a href="#var" class="xref">UPS variable</a> (<a href="#var" class="xref">2.12</a>)</span>.  See <span><a href="#set" class="xref"><code>SET</code></a> (<a href="#set" class="xref">4.2.11</a>)</span>.<a href="#section-6.5.1-5.2.1.2.2.2" class="pilcrow">¶</a>
</li>
                  </ul>
</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>instcmds</code>
                </td>
                <td class="text-left" rowspan="1" colspan="1">Let a user initiate specific instant commands. See section
        <span><a href="#instcmd" class="xref"><code>INSTCMD</code></a> (<a href="#instcmd" class="xref">4.2.6</a>)</span>.  Use value <code>ALL</code> to grant all commands
        automatically. To specify multiple commands, use multiple
        instances of the instcmds field. For the full list of what a
        given UPS supports, use client <code>upscmd -l</code> supplied by
        the <span><a href="#proj" class="xref">NUT Project</a> (<a href="#proj" class="xref">2.7</a>)</span>.

</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>password</code>
                </td>
                <td class="text-left" rowspan="1" colspan="1">Set the password for this user.  <em>Your password should be
    more secure than the examples shown.</em>
                </td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">
                  <code>upsmon</code>
                </td>
                <td class="text-left" rowspan="1" colspan="1">Add the necessary actions for a <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> to process a system
    shutdown. In current practice the value is still <code>master</code>
    or <code>slave</code>.  Note that there is no U+003D EQUALS SIGN =.
</td>
              </tr>
            </tbody>
          </table>
</section>
<section id="section-6.5.2">
          <h4 id="name-an-administrative-user-of-a">
<a href="#section-6.5.2" class="section-number selfRef">6.5.2. </a><a href="#name-an-administrative-user-of-a" class="section-name selfRef">An Administrative User of a Client Management Daemon</a>
          </h4>
<div id="adsecclient">
<p id="section-6.5.2-1">The following examples show the current
security practices for <span><a href="#au" class="xref">administrative users</a> (<a href="#au" class="xref">2.2</a>)</span> of a client <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> They also illustrate
the command pair <span><a href="#username" class="xref"><code>USERNAME</code></a> (<a href="#username" class="xref">4.2.13</a>)</span> and <span><a href="#password" class="xref"><code>PASSWORD</code></a> (<a href="#password" class="xref">4.2.8</a>)</span>.<a href="#section-6.5.2-1" class="pilcrow">¶</a></p>
</div>
<section id="section-6.5.2.1">
            <h5 id="name-an-administrative-user-logs">
<a href="#section-6.5.2.1" class="section-number selfRef">6.5.2.1. </a><a href="#name-an-administrative-user-logs" class="section-name selfRef">An Administrative User Logs into a Short Session</a>
            </h5>
<p id="section-6.5.2.1-1">In this simple example of current practice, the system
administrator sets the battery level at which an <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> will raise the
status <code>LB</code>, represented by variable <code>battery.charge.low</code>, to
35% of full charge.  A system administrator types the following command
to call the client <code>upsrw</code> supplied by the
<span><a href="#proj" class="xref">NUT Project</a> (<a href="#proj" class="xref">2.7</a>)</span>.<a href="#section-6.5.2.1-1" class="pilcrow">¶</a></p>
<div id="section-6.5.2.1-2">
<pre class="sourcecode">upsrw -s battery.charge.low=35 -u admin -p sekret UPS-1@example.com
</pre><a href="#section-6.5.2.1-2" class="pilcrow">¶</a>
</div>
<p id="section-6.5.2.1-3">The <span><a href="#username" class="xref"><code>USERNAME</code></a> (<a href="#username" class="xref">4.2.13</a>)</span> and <span><a href="#password" class="xref"><code>PASSWORD</code></a> (<a href="#password" class="xref">4.2.8</a>)</span> commands are issued within the
client <code>upsrw</code> and the <span><a href="#sess" class="xref">Session</a> (<a href="#sess" class="xref">2.10</a>)</span> is of short duration.<a href="#section-6.5.2.1-3" class="pilcrow">¶</a></p>
</section>
<section id="section-6.5.2.2">
            <h5 id="name-an-administrative-user-logs-">
<a href="#section-6.5.2.2" class="section-number selfRef">6.5.2.2. </a><a href="#name-an-administrative-user-logs-" class="section-name selfRef">An Administrative User Logs into a Long Session</a>
            </h5>
<div id="longsess">
<p id="section-6.5.2.2-1">In this second example of current practice, the
long-running <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> <code>upsmon</code> which is responsible for initiating
system shutdowns and which is provided by the <span><a href="#proj" class="xref">NUT Project</a> (<a href="#proj" class="xref">2.7</a>)</span> issues commands
<span><a href="#username" class="xref"><code>USERNAME</code></a> (<a href="#username" class="xref">4.2.13</a>)</span> and <span><a href="#password" class="xref"><code>PASSWORD</code></a> (<a href="#password" class="xref">4.2.8</a>)</span> when it starts up. The data needed for the
<span><a href="#username" class="xref"><code>USERNAME</code></a> (<a href="#username" class="xref">4.2.13</a>)</span> and <span><a href="#password" class="xref"><code>PASSWORD</code></a> (<a href="#password" class="xref">4.2.8</a>)</span> is provided by a configuration
file <code>upsmon.conf</code> which contains the line<a href="#section-6.5.2.2-1" class="pilcrow">¶</a></p>
</div>
<div id="section-6.5.2.2-2">
<pre class="sourcecode">MONITOR
UPS-1@example.com 1 admin secret master
</pre><a href="#section-6.5.2.2-2" class="pilcrow">¶</a>
</div>
<p id="section-6.5.2.2-3"> This says that the UPS to be monitored
is <code>UPS-1@example.com</code>, it provides 1 single power supply, the
<span><a href="#au" class="xref">administrative user</a> (<a href="#au" class="xref">2.2</a>)</span> is <code>admin</code> with password <code>secret</code>. The <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> acts
as a <span><a href="#prim" class="xref">Primary</a> (<a href="#prim" class="xref">2.8</a>)</span>, although current practice uses the term <code>master</code>.<a href="#section-6.5.2.2-3" class="pilcrow">¶</a></p>
<p id="section-6.5.2.2-4">The <span><a href="#username" class="xref"><code>USERNAME</code></a> (<a href="#username" class="xref">4.2.13</a>)</span> and <span><a href="#password" class="xref"><code>PASSWORD</code></a> (<a href="#password" class="xref">4.2.8</a>)</span> commands are contained within the
client <code>upsmon</code> and the <span><a href="#sess" class="xref">Session</a> (<a href="#sess" class="xref">2.10</a>)</span> is of long duration.<a href="#section-6.5.2.2-4" class="pilcrow">¶</a></p>
</section>
</section>
</section>
</section>
<section id="section-7">
      <h2 id="name-codepoint-management">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-codepoint-management" class="section-name selfRef">Codepoint Management</a>
      </h2>
<div id="Codepoint">
<p id="section-7-1">This document raises five matters of codepoint management:<a href="#section-7-1" class="pilcrow">¶</a></p>
</div>
<ol start="1" type="1" class="normal type-1" id="section-7-2">
<li id="section-7-2.1">The namespaces occupied by the <span><a href="#commands" class="xref">protocol commands</a> (<a href="#commands" class="xref">4.2</a>)</span> described in this document.<a href="#section-7-2.1" class="pilcrow">¶</a>
</li>
        <li id="section-7-2.2">The namespaces occupied by the <span><a href="#errorresponses" class="xref">protocol responses</a> (<a href="#errorresponses" class="xref">4.3.2</a>)</span> described in this document.<a href="#section-7-2.2" class="pilcrow">¶</a>
</li>
        <li id="section-7-2.3">The namespace occupied by <span><a href="#st" class="xref">UPS status</a> (<a href="#st" class="xref">2.11</a>)</span> names,<a href="#section-7-2.3" class="pilcrow">¶</a>
</li>
        <li id="section-7-2.4">The namespace occupied by <span><a href="#var" class="xref">UPS variable</a> (<a href="#var" class="xref">2.12</a>)</span> names,<a href="#section-7-2.4" class="pilcrow">¶</a>
</li>
        <li id="section-7-2.5">The port name and port number used to manage UPS units.<a href="#section-7-2.5" class="pilcrow">¶</a>
</li>
      </ol>
<section id="section-7.1">
        <h3 id="name-namespaces-used-by-command-">
<a href="#section-7.1" class="section-number selfRef">7.1. </a><a href="#name-namespaces-used-by-command-" class="section-name selfRef">Namespaces used by Command, Responses, Statuses and Variables</a>
        </h3>
<p id="section-7.1-1">Current <span><a href="#proj" class="xref">NUT Project</a> (<a href="#proj" class="xref">2.7</a>)</span> experience after more than 20 years is that the UPS
management area advances slowly, and that there are few requests to
modify or extend the Commands, Responses, Statuses and Variables.  When
this does occur, the <span><a href="#proj" class="xref">NUT Project</a> (<a href="#proj" class="xref">2.7</a>)</span> has been able to settle the matter
without difficulty in the project mailing list.  It is therefore
proposed to not burden IANA with this namespace management and to
continue with the current process in which the project in its mailing
list acts as a Working Group.<a href="#section-7.1-1" class="pilcrow">¶</a></p>
<p id="section-7.1-2">The Commands, Responses, Statuses and Variables are currently
recorded as follows:<a href="#section-7.1-2" class="pilcrow">¶</a></p>
<span id="name-project-records-of-namespac"></span><div id="record">
<table class="center" id="table-7">
          <caption>
<a href="#table-7" class="selfRef">Table 7</a>:
<a href="#name-project-records-of-namespac" class="selfRef">Project records of namespace allocation</a>
          </caption>
<thead>
            <tr>
              <th class="text-center" rowspan="1" colspan="1">Namespace </th>
              <th class="text-center" rowspan="1" colspan="1">Recording document </th>
              <th class="text-center" rowspan="1" colspan="1">Reference
</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Commands and Responses
    </td>
              <td class="text-left" rowspan="1" colspan="1">This document
    </td>
              <td class="text-left" rowspan="1" colspan="1">
                <span><a href="#commands" class="xref">Commands</a> (<a href="#commands" class="xref">4.2</a>)</span>,
        <span><a href="#responses" class="xref">Responses</a> (<a href="#responses" class="xref">4.3</a>)</span>
              </td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">(Idem, historical record)
    </td>
              <td class="text-left" rowspan="1" colspan="1">Project Developer Guide Ch 9
    </td>
              <td class="text-left" rowspan="1" colspan="1">
                <span><a href="#devguide" class="xref">Developer Guide</a> [<a href="#devguide" class="xref">devguide</a>]</span>
              </td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Statuses
    </td>
              <td class="text-left" rowspan="1" colspan="1">This document
    </td>
              <td class="text-left" rowspan="1" colspan="1">
                <span><a href="#symbols" class="xref">Statuses</a> (<a href="#symbols" class="xref">5.1</a>)</span>
              </td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">(Idem, historical record)
    </td>
              <td class="text-left" rowspan="1" colspan="1">Source code <code>clients/status.h</code>
              </td>
              <td class="text-left" rowspan="1" colspan="1">
                <span><a href="#gitstats" class="xref">GitHub repository</a> [<a href="#gitstats" class="xref">gitstats</a>]</span>
              </td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Variables
    </td>
              <td class="text-left" rowspan="1" colspan="1">Source code file <code>docs/nut-names.txt</code>
              </td>
              <td class="text-left" rowspan="1" colspan="1">
                <span><a href="#gitvars" class="xref">GitHub repository</a> [<a href="#gitvars" class="xref">gitvars</a>]</span>
              </td>
            </tr>
          </tbody>
        </table>
</div>
</section>
<section id="section-7.2">
        <h3 id="name-port-name-and-number-used-t">
<a href="#section-7.2" class="section-number selfRef">7.2. </a><a href="#name-port-name-and-number-used-t" class="section-name selfRef">Port Name and Number used to Manage UPS Units</a>
        </h3>
<p id="section-7.2-1">See the <span><a href="#Registry" class="xref">IANA Registry</a> [<a href="#Registry" class="xref">Registry</a>]</span> for the latest
situation.<a href="#section-7.2-1" class="pilcrow">¶</a></p>
<section id="section-7.2.1">
          <h4 id="name-port-nut-3493">
<a href="#section-7.2.1" class="section-number selfRef">7.2.1. </a><a href="#name-port-nut-3493" class="section-name selfRef">Port <code>nut/3493</code></a>
          </h4>
<p id="section-7.2.1-1">In 2002 IANA assigned port nut/3493 to project lead Russell Kroll,
and updated the assignment to the <span><a href="#proj" class="xref">NUT Project</a> (<a href="#proj" class="xref">2.7</a>)</span> itself in 2020.<a href="#section-7.2.1-1" class="pilcrow">¶</a></p>
</section>
<section id="section-7.2.2">
          <h4 id="name-port-ups-401">
<a href="#section-7.2.2" class="section-number selfRef">7.2.2. </a><a href="#name-port-ups-401" class="section-name selfRef">Port <code>ups/401</code></a>
          </h4>
<div id="ups401">
<p id="section-7.2.2-1">In 2008 IANA assigned <code>ups/401</code>
"Uninterruptible Power Supply" to Mr.  Charles Bennett as both
assignee and contact.  We have been unable to find any protocol
document or other published activity report for this port other than
the One Windows Trojan.  Mr. Bennett himself died in 2015,
see <span><a href="#Bennett" class="xref">obituary</a> [<a href="#Bennett" class="xref">Bennett</a>]</span>.  Since his email address
was registered by IANA as <code>bennettc@ohio.edu</code> it is possible
that the University of Ohio is a successor in interest.  The editor
tried to contact the IT support department of the university by email
and telephone but was rejected.
<span class="cref">Ed: My non-contact was Mr. Keith Brock, IT Support Senior
Specialist, brock@ohio.edu +1 740 597 2136</span><a href="#section-7.2.2-1" class="pilcrow">¶</a></p>
</div>
</section>
<section id="section-7.2.3">
          <h4 id="name-nut-project-requirement">
<a href="#section-7.2.3" class="section-number selfRef">7.2.3. </a><a href="#name-nut-project-requirement" class="section-name selfRef">NUT Project Requirement</a>
          </h4>
<div id="projreq">
<p id="section-7.2.3-1">The <span><a href="#proj" class="xref">NUT Project</a> (<a href="#proj" class="xref">2.7</a>)</span> needs to address
the <span><a href="#weak" class="xref">current weak security</a> (<a href="#weak" class="xref">6.3</a>)</span> of UPS
management deployments, for example<a href="#section-7.2.3-1" class="pilcrow">¶</a></p>
</div>
<ul class="normal">
<li class="normal" id="section-7.2.3-2.1">by implementing the <span><a href="#fig.shim" class="xref">"shim"
technique</a> (<a href="#fig.shim" class="xref">Figure 7</a>)</span> in <span><a href="#need" class="xref">section</a> (<a href="#need" class="xref">6.4</a>)</span> for
providing secure access to the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span>,<a href="#section-7.2.3-2.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-7.2.3-2.2">or by providing a choice of ports through which an <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> may
receive commands: one for "legacy" traffic, the other for fully
secured traffic.<a href="#section-7.2.3-2.2" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-7.2.3-3">The project needs a second registered port.  Since ports are a
limited resource, it would be better to re-use an existing port rather
than request a new one, and the project is interested in using
existing port <code>ups/TBD1</code>.  Let's look more closely at this:<a href="#section-7.2.3-3" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-7.2.3-4.1">The port name "ups" satisfies the Principle of Least Surprise.  It
is not surprising for a port called "ups" to be used to manage UPSs.
It is unlikely to be used for anything else.<a href="#section-7.2.3-4.1" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-7.2.3-4.2">There are no other known users of this port and no other published
protocols or usage reports.<a href="#section-7.2.3-4.2" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-7.2.3-4.3">
              <p id="section-7.2.3-4.3.1">The currently assigned port number 401 is for a system port.
The project has no imperative need for such a port; a user port, TBD1,
would be sufficient.  The <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> is a system activity, but it can be
launched by root and dropped to a non-privileged user perfectly well
on a user port.<a href="#section-7.2.3-4.3.1" class="pilcrow">¶</a></p>
<p id="section-7.2.3-4.3.2">Note: In Unix-like systems a port with a number below 1024 is
privileged and requires elevated permissions to manage.<a href="#section-7.2.3-4.3.2" class="pilcrow">¶</a></p>
</li>
            <li class="compact" id="section-7.2.3-4.4">System ports are more likely to attract malicious scans than user
ports.<a href="#section-7.2.3-4.4" class="pilcrow">¶</a>
</li>
            <li class="compact" id="section-7.2.3-4.5">The project does not need to be assigned this port.  The need is
to be able to use port "ups".<a href="#section-7.2.3-4.5" class="pilcrow">¶</a>
</li>
          </ul>
</section>
</section>
</section>
<section id="section-8">
      <h2 id="name-iana-considerations">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<section id="section-8.1">
        <h3 id="name-port-name-ups-reference-to-">
<a href="#section-8.1" class="section-number selfRef">8.1. </a><a href="#name-port-name-ups-reference-to-" class="section-name selfRef">Port Name <code>ups</code>: Reference to this Document</a>
        </h3>
<div id="IANA">
<p id="section-8.1-1">The <span><a href="#proj" class="xref">NUT Project</a> (<a href="#proj" class="xref">2.7</a>)</span> has a <span><a href="#projreq" class="xref">requirement to use a second port</a> (<a href="#projreq" class="xref">7.2.3</a>)</span>, and would like to use port
name <code>ups</code> as well as port <code>nut</code>.  The project requests
that IANA authorise such use, perhaps by updating
the <span><a href="#Registry" class="xref">Service Name and Transport Protocol Port
Number Registry</a> [<a href="#Registry" class="xref">Registry</a>]</span> for ports
<code>ups</code> and <code>nut/3493</code> to include a reference to this
document.<a href="#section-8.1-1" class="pilcrow">¶</a></p>
</div>
<p id="section-8.1-2">UPS management <span><a href="#projreq" class="xref">does not need a
system port</a> (<a href="#projreq" class="xref">7.2.3</a>)</span>.  If port number 401 were freed and the
name <code>ups</code> assigned to user port TBD1, that would be equally
effective.<a href="#section-8.1-2" class="pilcrow">¶</a></p>
<p id="section-8.1-3"><span class="cref">The document shepherd is requested to replace the port number
TBD1 by any number that IANA assigns to port name
<code>ups</code>.</span><a href="#section-8.1-3" class="pilcrow">¶</a></p>
</section>
<section id="section-8.2">
        <h3 id="name-change-of-registrant">
<a href="#section-8.2" class="section-number selfRef">8.2. </a><a href="#name-change-of-registrant" class="section-name selfRef">Change of Registrant</a>
        </h3>
<div id="ChangeReg">
<p id="section-8.2-1">The <span><a href="#proj" class="xref">NUT Project</a> (<a href="#proj" class="xref">2.7</a>)</span> advises IANA that port <code>ups/401</code>
has <span><a href="#ups401" class="xref">no effective registrant</a> (<a href="#ups401" class="xref">7.2.2</a>)</span>.  The
project does not have an imperative need to be the registrant but
will accept to become the registrant if IANA deems such change desirable.
Such a change in registrant could be accompanied by an allocation of a
user port number TBD1.<a href="#section-8.2-1" class="pilcrow">¶</a></p>
</div>
</section>
</section>
<section id="section-9">
      <h2 id="name-implementation-status">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-implementation-status" class="section-name selfRef">Implementation Status</a>
      </h2>
<p id="section-9-1">This section presents a very short report on the status of the
Network UPS tools project<a href="#section-9-1" class="pilcrow">¶</a></p>
<ul class="compact">
<li class="compact" id="section-9-2.1">May 1996: The first hack as a cron job.<a href="#section-9-2.1" class="pilcrow">¶</a>
</li>
        <li class="compact" id="section-9-2.2">September 1997: The first server-client code.<a href="#section-9-2.2" class="pilcrow">¶</a>
</li>
        <li class="compact" id="section-9-2.3">March 1998: First public release.<a href="#section-9-2.3" class="pilcrow">¶</a>
</li>
        <li class="compact" id="section-9-2.4">June 1999: Code rewrite with a UPS driver <code>smartups</code>, an
<span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> <code>upsd</code> and a simple <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span>.<a href="#section-9-2.4" class="pilcrow">¶</a>
</li>
        <li class="compact" id="section-9-2.5">September 1999: The project became "Network UPS Tools".  The
<span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> <code>upsmon</code> supported primary/secondary configurations.<a href="#section-9-2.5" class="pilcrow">¶</a>
</li>
        <li class="compact" id="section-9-2.6">June 2001: Common core for multiple drivers.  Arnaud Quette took
over the project lead from Russell Kroll.<a href="#section-9-2.6" class="pilcrow">¶</a>
</li>
        <li class="compact" id="section-9-2.7">May 2002: IANA granted port nut/3493. August: release
1.0.0. November: OpenSSL support.<a href="#section-9-2.7" class="pilcrow">¶</a>
</li>
        <li class="compact" id="section-9-2.8">April 2003: The initial set of command and variable names was
designed.<a href="#section-9-2.8" class="pilcrow">¶</a>
</li>
        <li class="compact" id="section-9-2.9">March 2016: Version 2.7.4 released, supported over 100 device
manufacturers and hundreds of UPS models.<a href="#section-9-2.9" class="pilcrow">¶</a>
</li>
        <li class="compact" id="section-9-2.10">November 2020: Evgeny "Jim" Klimov took over project lead from
Arnaud Quette.<a href="#section-9-2.10" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-9-3">For a much more detailed history of the <span><a href="#proj" class="xref">NUT Project</a> (<a href="#proj" class="xref">2.7</a>)</span> see
the <span><a href="#History" class="xref">User Manual, Appendix J</a> [<a href="#History" class="xref">History</a>]</span><a href="#section-9-3" class="pilcrow">¶</a></p>
<section id="section-9.1">
        <h3 id="name-an-implementation-of-the-at">
<a href="#section-9.1" class="section-number selfRef">9.1. </a><a href="#name-an-implementation-of-the-at" class="section-name selfRef">An Implementation of the Attachment Daemon</a>
        </h3>
<p id="section-9.1-1">

The <span><a href="#proj" class="xref">NUT Project</a> (<a href="#proj" class="xref">2.7</a>)</span> implemented an <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> as program <code>upsd</code> and a set of
hardware specific drivers, all written in K&amp;R C.  <code>upsd</code>
supported all of the protocol commands and responses defined by this
document.<a href="#section-9.1-1" class="pilcrow">¶</a></p>
<p id="section-9.1-2">

An experimental program written in Python3 provided
a <span><a href="#RFC8446" class="xref">TLS 1.3</a> [<a href="#RFC8446" class="xref">RFC8446</a>]</span> shim daemon as shown
in <span><a href="#fig.shim" class="xref">figure</a> (<a href="#fig.shim" class="xref">7</a>)</span> which ran in front
of <code>upsd</code>, making it appear that <code>upsd</code> supported TLS
1.3.<a href="#section-9.1-2" class="pilcrow">¶</a></p>
</section>
<section id="section-9.2">
        <h3 id="name-implementations-of-the-mana">
<a href="#section-9.2" class="section-number selfRef">9.2. </a><a href="#name-implementations-of-the-mana" class="section-name selfRef">Implementations of the Management Daemon</a>
        </h3>
<p id="section-9.2-1">There are several examples of a <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span>: the <span><a href="#proj" class="xref">NUT Project</a> (<a href="#proj" class="xref">2.7</a>)</span>
provided <code>upsmon</code> which takes the system shutdown decision when
the public power supply fails.  Further configuration options such as timers were
provided by helper program <code>upssched</code>.<a href="#section-9.2-1" class="pilcrow">¶</a></p>
<div id="util">
<p id="section-9.2-2">Other programs representing the <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span>:<a href="#section-9.2-2" class="pilcrow">¶</a></p>
</div>
<ul class="compact">
<li class="compact" id="section-9.2-3.1">
            <code>upsc</code> reported the values of the <span><a href="#typvar" class="xref">variables</a> (<a href="#typvar" class="xref">8</a>)</span> defined for a given UPS.<a href="#section-9.2-3.1" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-9.2-3.2">
            <code>upsrw</code> reported on and changed the values of the
<span><a href="#rw" class="xref">readable and writable configuration
variables</a> (<a href="#rw" class="xref">A.2</a>)</span> defined for a given UPS.<a href="#section-9.2-3.2" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-9.2-3.3">
            <code>upscmd</code> reported on and executed
the <span><a href="#instcmd" class="xref">instant action commands</a> (<a href="#instcmd" class="xref">4.2.6</a>)</span>
defined for a given UPS.<a href="#section-9.2-3.3" class="pilcrow">¶</a>
</li>
          <li class="compact" id="section-9.2-3.4">
            <code>UPSmon.py</code> was an experimental Python3 rewrite
of <code>upsmon</code> and <code>upssched</code> which included support
for <span><a href="#RFC8446" class="xref">TLS 1.3</a> [<a href="#RFC8446" class="xref">RFC8446</a>]</span>.<a href="#section-9.2-3.4" class="pilcrow">¶</a>
</li>
        </ul>
</section>
<section id="section-9.3">
        <h3 id="name-inclusion-in-software-distr">
<a href="#section-9.3" class="section-number selfRef">9.3. </a><a href="#name-inclusion-in-software-distr" class="section-name selfRef">Inclusion in Software Distributions</a>
        </h3>
<p id="section-9.3-1">The programs <code>upsd</code>, <code>upsmon</code>, <code>upssched</code>,
<code>upsc</code>, <code>upscmd</code> and <code>upsrw</code> have been included
in the package known as "nut" in the package systems of many
distributions: all the major Linux distributions, and Unix
distributions such as OpenBSD and OpenSolaris.  A Microsoft Windows
version has been developed but was not maintained.<a href="#section-9.3-1" class="pilcrow">¶</a></p>
</section>
<section id="section-9.4">
        <h3 id="name-recommended-minimum-support">
<a href="#section-9.4" class="section-number selfRef">9.4. </a><a href="#name-recommended-minimum-support" class="section-name selfRef">Recommended Minimum Support</a>
        </h3>
<div id="MinSup">
<p id="section-9.4-1">The features provided by current UPS units vary
widely.  However experience shows that a minimum feature set is needed
for satisfactory use of the NUT Project software.  A full list of
variables is available in <span><a href="#gitvars" class="xref">source code file
docs/nut-names.txt</a> [<a href="#gitvars" class="xref">gitvars</a>]</span> which serves as the Recording Document.<a href="#section-9.4-1" class="pilcrow">¶</a></p>
</div>
<section id="section-9.4.1">
          <h4 id="name-desktop-pc-variables">
<a href="#section-9.4.1" class="section-number selfRef">9.4.1. </a><a href="#name-desktop-pc-variables" class="section-name selfRef">Desktop PC Variables</a>
          </h4>
<div id="MinSupPC">
<p id="section-9.4.1-1">

The following variables form a minimum set suitable for Desktop PC.
It is expected that on public power supply failure, the PC will be halted.  It
will not restart automatically when power returns.<a href="#section-9.4.1-1" class="pilcrow">¶</a></p>
</div>
<ul class="normal">
<li class="normal" id="section-9.4.1-2.1">
              <code>battery.charge</code><a href="#section-9.4.1-2.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-9.4.1-2.2">
              <code>battery.charge.low</code><a href="#section-9.4.1-2.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-9.4.1-2.3">
              <code>device.mfr</code><a href="#section-9.4.1-2.3" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-9.4.1-2.4">
              <code>device.model</code><a href="#section-9.4.1-2.4" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-9.4.1-2.5">
              <code>ups.status</code> with the minimum <span><a href="#symbols" class="xref">status symbol</a> (<a href="#symbols" class="xref">5.1</a>)</span> set <code>OL</code> <code>OB</code> <code>LB</code> <code>FSD</code><a href="#section-9.4.1-2.5" class="pilcrow">¶</a>
</li>
          </ul>
</section>
<section id="section-9.4.2">
          <h4 id="name-unattended-servers-addition">
<a href="#section-9.4.2" class="section-number selfRef">9.4.2. </a><a href="#name-unattended-servers-addition" class="section-name selfRef">Unattended Servers, Additional Variables</a>
          </h4>
<div id="MinSupServer">
<p id="section-9.4.2-1">

The following additional variables are needed in a minimum set
suitable for an unattended server.  It is expected that on public power supply
failure, the server will be halted.  It will restart automatically
when power returns.<a href="#section-9.4.2-1" class="pilcrow">¶</a></p>
</div>
<ul class="normal">
<li class="normal" id="section-9.4.2-2.1">
              <code>battery.date</code><a href="#section-9.4.2-2.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-9.4.2-2.2">
              <code>device.serial</code><a href="#section-9.4.2-2.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-9.4.2-2.3">
              <code>ups.delay.shutdown</code><a href="#section-9.4.2-2.3" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-9.4.2-2.4">
              <code>ups.delay.start</code><a href="#section-9.4.2-2.4" class="pilcrow">¶</a>
</li>
          </ul>
</section>
<section id="section-9.4.3">
          <h4 id="name-commands-2">
<a href="#section-9.4.3" class="section-number selfRef">9.4.3. </a><a href="#name-commands-2" class="section-name selfRef">Commands</a>
          </h4>
<div id="MinSupCommands">
<p id="section-9.4.3-1">Satisfactory use of the NUT Project
software requires support for all commands.<a href="#section-9.4.3-1" class="pilcrow">¶</a></p>
</div>
</section>
</section>
</section>
<section id="section-10">
      <h2 id="name-acknowledgments">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<div id="Ack">
<p id="section-10-1">

This document is based on the
<span><a href="#proj" class="xref">NUT Project</a> (<a href="#proj" class="xref">2.7</a>)</span> <span><a href="#devguide" class="xref">documentation</a> [<a href="#devguide" class="xref">devguide</a>]</span>. The editor
acknowledges the work of Charles Lepple, Arjen de Korte, Arnaud
Quette, Jim Klimov, Russell Kroll, Manuel Wolfshant, Mark Hansen and
many others who contribute to
the <span><a href="#nut-upsuser" class="xref">nut-upsuser</a> [<a href="#nut-upsuser" class="xref">nut-upsuser</a>]</span>.
and <span><a href="#nut-upsdev" class="xref">nut-upsdev</a> [<a href="#nut-upsdev" class="xref">nut-upsdev</a>]</span> mailing lists.<a href="#section-10-1" class="pilcrow">¶</a></p>
</div>
<p id="section-10-2">The source for this document is marked up using
an <span><a href="#SGML" class="xref">SGML DTD</a> [<a href="#SGML" class="xref">SGML</a>]</span> and an XML meta-DTD as defined
by
<span><a href="#HyTimeA" class="xref">HyTime Annex A</a> [<a href="#HyTimeA" class="xref">HyTimeA</a>]</span>.
The <span><a href="#sgmlnorm" class="xref"><code>sgmlnorm</code></a> [<a href="#sgmlnorm" class="xref">sgmlnorm</a>]</span> program generates
XML which program <span><a href="#RFC7991" class="xref"><code>xml2rfc</code></a> [<a href="#RFC7991" class="xref">RFC7991</a>]</span> uses
to prepare the HTML and text renderings.  The editor acknowledges the
help received from Carsten Bormann and Julian Reschke in the xml2rfc
mailing list.<a href="#section-10-2" class="pilcrow">¶</a></p>
<p id="section-10-3">The editor thanks Adrian Farrel for advice received during the
preparation of this document.  Many helpful comments were received
from Bart Smit, David Zomaya, Joyce Norris and Ted Mittelstaedt.<a href="#section-10-3" class="pilcrow">¶</a></p>
</section>
<section id="section-11">
      <h2 id="name-normative-references">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
      </h2>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
    <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-12">
      <h2 id="name-informative-references">
<a href="#section-12" class="section-number selfRef">12. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
      </h2>
<dl class="references">
<dt id="Bennett">[Bennett]</dt>
      <dd>
<span class="refTitle">"Charles Bennett Obituary"</span>, <span class="seriesInfo">Publisher: Jagers and Sons Funeral Home, 24 Morris Ave., Athens OH</span>, <span>&lt;<a href="https://www.legacy.com/obituaries/name/charles-bennett-obituary?pid=174356861">https://www.legacy.com/obituaries/name/charles-bennett-obituary?pid=174356861</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="devguide">[devguide]</dt>
      <dd>
<span class="refTitle">"Network UPS Tools (NUT) Project Developer Guide"</span>, <span>&lt;<a href="https://networkupstools.org/docs/developer-guide.chunked/ar01s09.html">https://networkupstools.org/docs/developer-guide.chunked/ar01s09.html</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="Documentation">[Documentation]</dt>
      <dd>
<span class="refTitle">"Network UPS Tools Documentation"</span>, <span>&lt;<a href="https://networkupstools.org/documentation.html">https://networkupstools.org/documentation.html</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="gitstats">[gitstats]</dt>
      <dd>
<span class="refTitle">"GitHub Network UPS Tools code repository, status names"</span>, <span>&lt;<a href="https://github.com/networkupstools/nut/blob/master/clients/status.h">https://github.com/networkupstools/nut/blob/master/clients/status.h</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="gitvars">[gitvars]</dt>
      <dd>
<span class="refTitle">"GitHub Network UPS Tools code repository, variable names"</span>, <span>&lt;<a href="https://github.com/networkupstools/nut/blob/master/docs/nut-names.txt">https://github.com/networkupstools/nut/blob/master/docs/nut-names.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="History">[History]</dt>
      <dd>
<span class="refTitle">"Network UPS Tools User Manual, Appendix J Project history"</span>, <span>&lt;<a href="https://networkupstools.org/docs/user-manual.pdf">https://networkupstools.org/docs/user-manual.pdf</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="HyTimeA">[HyTimeA]</dt>
      <dd>
<span class="refTitle">"International Standard ISO/IEC 10744 -- Hypermedia/Time-based Structuring Language, Annex A, SGML Extended Facilities"</span>, <span class="seriesInfo">ISO/IEC JTC 1/SC 34  Document description and processing languages</span>, <time datetime="1997" class="refDate">1997</time>. </dd>
<dd class="break"></dd>
<dt id="IEC62351-1">[IEC62351-1]</dt>
      <dd>
<span class="refTitle">"IEC TS 62351-1 Power systems management and associated information exchange -- Data and communications security.  Part 1: Communication network and system security -- Introduction to security issues"</span>, <span class="seriesInfo">IEC Technical Specification Reference number IEC/TS 62351-1:2007(E), 35 pages</span>, <span class="seriesInfo">CHF 205</span>, <span class="seriesInfo">Technical Committee TC 57 - Power systems management and associated information exchange</span>, <time datetime="2007-05-15" class="refDate">15 May 2007</time>, <span>&lt;<a href="https://nanopdf.com/download/technical-iec-specification-ts-62351-1_pdf">https://nanopdf.com/download/technical-iec-specification-ts-62351-1_pdf</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="Library">[Library]</dt>
      <dd>
<span class="refTitle">"GitHub Network UPS Tools, Devices Dumps Library"</span>, <span>&lt;<a href="https://networkupstools.org/ddl/">https://networkupstools.org/ddl/</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="NUT">[NUT]</dt>
      <dd>
<span class="refTitle">"Network UPS Tools (NUT) Project"</span>, <span>&lt;<a href="https://www.networkupstools.org">https://www.networkupstools.org</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="nut-upsdev">[nut-upsdev]</dt>
      <dd>
<span class="refTitle">"Network UPS Tools (NUT) Project Mailing List for developers"</span>, <span>&lt;<a href="https://alioth-lists.debian.net/cgi-bin/mailman/listinfo/nut-upsdev">https://alioth-lists.debian.net/cgi-bin/mailman/listinfo/nut-upsdev</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="nut-upsuser">[nut-upsuser]</dt>
      <dd>
<span class="refTitle">"Network UPS Tools (NUT) Project Mailing List for users"</span>, <span>&lt;<a href="https://alioth-lists.debian.net/cgi-bin/mailman/listinfo/nut-upsuser">https://alioth-lists.debian.net/cgi-bin/mailman/listinfo/nut-upsuser</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="Registry">[Registry]</dt>
      <dd>
<span class="refTitle">"Service Name and Transport Protocol Port Number Registry"</span>, <span class="seriesInfo">Publisher: IANA</span>, <span>&lt;<a href="https://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.xhtml">https://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.xhtml</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7942">[RFC7942]</dt>
      <dd>
<span class="refAuthor">Sheffer, Y.</span> and <span class="refAuthor">A. Farrel</span>, <span class="refTitle">"Improving Awareness of Running Code: The Implementation Status Section"</span>, <span class="seriesInfo">BCP 205</span>, <span class="seriesInfo">RFC 7942</span>, <span class="seriesInfo">DOI 10.17487/RFC7942</span>, <time datetime="2016-07" class="refDate">July 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7942">https://www.rfc-editor.org/info/rfc7942</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7991">[RFC7991]</dt>
      <dd>
<span class="refAuthor">Hoffman, P.</span>, <span class="refTitle">"The "xml2rfc" Version 3 Vocabulary"</span>, <span class="seriesInfo">RFC 7991</span>, <time datetime="2016-12" class="refDate">December 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7991">https://www.rfc-editor.org/info/rfc7991</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8446">[RFC8446]</dt>
      <dd>
<span class="refAuthor">Rescorla, E.</span>, <span class="refTitle">"The Transport Layer Security (TLS) Protocol Version 1.3"</span>, <span class="seriesInfo">RFC 8446</span>, <span class="seriesInfo">DOI 10.17487/RFC8446</span>, <time datetime="2018-08" class="refDate">August 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8446">https://www.rfc-editor.org/info/rfc8446</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="SGML">[SGML]</dt>
      <dd>
<span class="refAuthor">Goldfarb, Charles F.</span>, <span class="refTitle">"The SGML Handbook"</span>, <span class="seriesInfo">ISBN 0-19-853737-9</span>, <time datetime="1990" class="refDate">1990</time>. </dd>
<dd class="break"></dd>
<dt id="sgmlnorm">[sgmlnorm]</dt>
      <dd>
<span class="refAuthor">Clark, James.</span>, <span class="refTitle">"SGMLNORM An SGML System Conforming to International Standard ISO 8879 -- Standard Generalized Markup Language"</span>, <span>&lt;<a href="http://www.jclark.com/sp/sgmlnorm.htm">http://www.jclark.com/sp/sgmlnorm.htm</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="stunnel">[stunnel]</dt>
    <dd>
<span class="refAuthor">Trojnara, Michal.</span>, <span class="refTitle">"Stunnel proxy adds TLS encryption functionality to existing clients and servers"</span>, <span>&lt;<a href="https://www.stunnel.org/">https://www.stunnel.org/</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="appendix-A">
      <h2 id="name-variables">
<a href="#appendix-A" class="section-number selfRef">Appendix A. </a><a href="#name-variables" class="section-name selfRef">Variables</a>
      </h2>
<div id="Annex1">
<p id="appendix-A-1">

The <span><a href="#var" class="xref">UPS variables</a> (<a href="#var" class="xref">2.12</a>)</span> represent the abstracted state of the UPS unit.  Certain
variables represent not only the state of some hardware feature, but
also provide tunable values and <span><a href="#IC" class="xref">instant
commands</a> (<a href="#IC" class="xref">2.5</a>)</span>.  The full set of variables is recorded in
the <span><a href="#gitvars" class="xref">reference document for variable
names</a> [<a href="#gitvars" class="xref">gitvars</a>]</span>.<a href="#appendix-A-1" class="pilcrow">¶</a></p>
</div>
<p id="appendix-A-2">The number of variables used in a given deployment depends on the
sophistication of the UPS product: this annex shows a typical example
of the subset of variables used for a reasonably complete "consumer
grade" UPS.  The <span><a href="#proj" class="xref">NUT Project</a> (<a href="#proj" class="xref">2.7</a>)</span> maintains a <span><a href="#Library" class="xref">large
library of the variable subsets</a> [<a href="#Library" class="xref">Library</a>]</span> used by different UPS models.<a href="#appendix-A-2" class="pilcrow">¶</a></p>
<p id="appendix-A-3">Note that successive versions of a given product may add or delete
features causing a change in the subset of variables used.  An example
is the removal of <code>ups.delay.start</code> from a "consumer grade"
UPS.  The manufacturer reserves the feature for the "professional"
product.<a href="#appendix-A-3" class="pilcrow">¶</a></p>
<p id="appendix-A-4">An implementation of a <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> acting as a utility program may
provide a listing of the variables available for a given product, for
example utility program <code>upsc</code> <span><a href="#util" class="xref">as
included in the NUT package</a> (<a href="#util" class="xref">9.2</a>)</span>.<a href="#appendix-A-4" class="pilcrow">¶</a></p>
<p id="appendix-A-5">The following sections illustrate the use of variables by taking
the values associated with a typical product example of a 1600Va 1000W
UPS.<a href="#appendix-A-5" class="pilcrow">¶</a></p>
<section id="appendix-A.1">
        <h3 id="name-typical-ups-variables">
<a href="#appendix-A.1" class="section-number selfRef">A.1. </a><a href="#name-typical-ups-variables" class="section-name selfRef">Typical UPS Variables</a>
        </h3>
<span id="name-typical-ups-variables-2"></span><div id="typvar">
<table class="center" id="table-8">
          <caption>
<a href="#table-8" class="selfRef">Table 8</a>:
<a href="#name-typical-ups-variables-2" class="selfRef">Typical UPS Variables</a>
          </caption>
<thead>
            <tr>
              <th class="text-center" rowspan="1" colspan="1">Variable </th>
              <th class="text-center" rowspan="1" colspan="1">Typical value </th>
              <th class="text-center" rowspan="1" colspan="1">Default description
</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>battery.charge</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>100</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"Battery charge (percent of full)"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>battery.charge.low</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>20</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"Remaining battery level when UPS switches to LB (percent)"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>battery.runtime</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>1481</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"Battery runtime (seconds)"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>battery.type</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>PbAc</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"Battery chemistry"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>device.mfr</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>Example Mfg</code> </td>
              <td class="text-left" rowspan="1" colspan="1">""
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>device.model</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>Economy 1600</code> </td>
              <td class="text-left" rowspan="1" colspan="1">""
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>device.serial</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>1234567890</code> </td>
              <td class="text-left" rowspan="1" colspan="1">""
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>device.type</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>ups</code> </td>
              <td class="text-left" rowspan="1" colspan="1">""
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>driver.name</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>usbhid-ups</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"Driver name"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>driver.parameter.lowbatt</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>37</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"Driver parameter: &lt;name&gt;"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>driver.parameter.offdelay</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>30</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"Driver parameter: &lt;name&gt;"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>driver.parameter.ondelay</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>40</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"Driver parameter: &lt;name&gt;"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>driver.parameter.pollfreq</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>30</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"Driver parameter: &lt;name&gt;"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>driver.parameter.pollinterval</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>2</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"Driver parameter: &lt;name&gt;"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>driver.parameter.port</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>auto</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"Driver parameter: &lt;name&gt;"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>driver.parameter.synchronous</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>no</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"Driver parameter: &lt;name&gt;"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>driver.parameter.vendorid</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>0999</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"Driver parameter: &lt;name&gt;"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>driver.version</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>2.7.4</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"Driver version - NUT release"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>driver.version.data</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>HID 1.39</code> </td>
              <td class="text-left" rowspan="1" colspan="1">""
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>driver.version.internal</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>0.41</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"Internal driver version"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>input.transfer.high</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>264</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"High voltage transfer point (V)"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>input.transfer.low</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>184</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"Low voltage transfer point (V)"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>outlet.1.desc</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>PowerShare Outlet 1</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"Outlet description"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>outlet.1.id</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>2</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"Outlet system identifier"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>outlet.1.status</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>on</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"Outlet switch status"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>outlet.1.switchable</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>no</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"Outlet switch ability"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>outlet.2.desc</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>PowerShare Outlet 2</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"Outlet description"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>outlet.2.id</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>3</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"Outlet system identifier"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>outlet.2.status</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>on</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"Outlet switch status"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>outlet.2.switchable</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>no</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"Outlet switch ability"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>outlet.desc</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>Main Outlet</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"Outlet description"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>outlet.id</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>1</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"Outlet system identifier"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>outlet.power</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>25</code> </td>
              <td class="text-left" rowspan="1" colspan="1">""
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>outlet.switchable</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>no</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"Outlet switch ability"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>output.frequency.nominal</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>50</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"Nominal output frequency (Hz)"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>output.voltage</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>230.0</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"Output voltage (V)"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>output.voltage.nominal</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>230</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"Nominal output voltage (V)"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>ups.beeper.status</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>enabled</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"UPS beeper status"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>ups.delay.shutdown</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>20</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"Interval to wait after shutdown with delay command (seconds)"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>ups.delay.start</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>30</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"Interval to wait before (re)starting the load (seconds)"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>ups.firmware</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>02</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"UPS firmware"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>ups.load</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>20</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"Load on UPS (percent of full)"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>ups.mfr</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>Example Mfg</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"UPS manufacturer"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>ups.model</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>Economy 1600</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"UPS model"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>ups.power.nominal</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>1600</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"UPS power rating (VA)"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>ups.productid</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>ffff</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"Product ID for USB devices"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>ups.serial</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>000000000</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"UPS serial number"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>ups.status</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>OL</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"UPS status"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>ups.timer.shutdown</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>0</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"Time before the load will be shutdown (seconds)"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>ups.timer.start</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>0</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"Time before the load will be started (seconds)"
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>ups.vendorid</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>0999</code> </td>
              <td class="text-left" rowspan="1" colspan="1">"Vendor ID for USB devices"
</td>
            </tr>
          </tbody>
        </table>
</div>
</section>
<section id="appendix-A.2">
        <h3 id="name-typical-ups-readable-and-wr">
<a href="#appendix-A.2" class="section-number selfRef">A.2. </a><a href="#name-typical-ups-readable-and-wr" class="section-name selfRef">Typical UPS Readable and Writable Variables</a>
        </h3>
<div id="rw">
<p id="appendix-A.2-1">Some of the features of a UPS are represented by
variables which may be tuned by the user.  The following variables are
typical of such tunable features.  The precise list depends on the
model of UPS.  An implementation of a <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> acting as a utility
program may provide a listing of the variables available, as well as
acting on them, for example utility
program <code>upsrw</code> <span><a href="#util" class="xref">as included in the
NUT package</a> (<a href="#util" class="xref">9.2</a>)</span>.<a href="#appendix-A.2-1" class="pilcrow">¶</a></p>
</div>
<span id="name-typical-readable-and-writab"></span><table class="center" id="table-9">
          <caption>
<a href="#table-9" class="selfRef">Table 9</a>:
<a href="#name-typical-readable-and-writab" class="selfRef">Typical readable and writable UPS Variables</a>
          </caption>
<thead>
            <tr>
              <th class="text-center" rowspan="1" colspan="1">Variable </th>
              <th class="text-center" rowspan="1" colspan="1">Typical value
    </th>
              <th class="text-center" rowspan="1" colspan="1">Default description provided as response to the command <code>GET DESC</code>
              </th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>battery.charge.low</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>20</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>"Remaining battery level when UPS switches to LB (percent)"</code>
              </td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>input.transfer.high</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>264</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>"High voltage transfer point (V)"</code>
              </td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>input.transfer.low</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>184</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>"Low voltage transfer point (V)"</code>
              </td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>outlet.1.desc</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>PowerShare Outlet 1</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>"Outlet description"</code>
              </td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>outlet.2.desc</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>PowerShare Outlet 2</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>"Outlet description"</code>
              </td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>outlet.2.switchable</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>no</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>"Outlet switch ability"</code>
              </td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>outlet.desc</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>Main Outlet</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>"Outlet description"</code>
              </td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>outlet.power</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>25</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>"Description unavailable"</code>
              </td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>output.voltage.nominal</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>230</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>"Nominal output voltage (V)"</code>
              </td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>ups.delay.shutdown</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>20</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>"Interval to wait after shutdown with delay command (seconds)"</code>
              </td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>ups.delay.start</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>30</code> </td>
              <td class="text-left" rowspan="1" colspan="1">
                <code>"Interval to wait before (re)starting the load (seconds)"</code>
              </td>
            </tr>
          </tbody>
        </table>
</section>
<section id="appendix-A.3">
        <h3 id="name-typical-ups-instant-command">
<a href="#appendix-A.3" class="section-number selfRef">A.3. </a><a href="#name-typical-ups-instant-command" class="section-name selfRef">Typical UPS Instant Commands</a>
        </h3>
<div id="instcmdexamples">
<p id="appendix-A.3-1">Some of the features of a UPS are actions known
as <span><a href="#IC" class="xref">instant commands</a> (<a href="#IC" class="xref">2.5</a>)</span> which may be
ordered by the user.  The following variables represent such instant
commands.  The precise list depends on the model of UPS.  An
implementation of a <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> acting as a utility program may provide a
listing of the variables available, as well as acting on them, for
example utility program <code>upscmd</code> <span><a href="#util" class="xref">as
included in the NUT package</a> (<a href="#util" class="xref">9.2</a>)</span>.<a href="#appendix-A.3-1" class="pilcrow">¶</a></p>
</div>
<span id="name-typical-instant-commands"></span><table class="center" id="table-10">
          <caption>
<a href="#table-10" class="selfRef">Table 10</a>:
<a href="#name-typical-instant-commands" class="selfRef">Typical Instant Commands</a>
          </caption>
<thead>
            <tr>
              <th class="text-center" rowspan="1" colspan="1">Command </th>
              <th class="text-center" rowspan="1" colspan="1">Meaning
</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>beeper.disable</code> </td>
              <td class="text-left" rowspan="1" colspan="1">Disable the UPS beeper
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>beeper.enable</code> </td>
              <td class="text-left" rowspan="1" colspan="1">Enable the UPS beeper
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>beeper.mute</code> </td>
              <td class="text-left" rowspan="1" colspan="1">Temporarily mute the UPS beeper
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>load.off</code> </td>
              <td class="text-left" rowspan="1" colspan="1">Turn off the load immediately
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>load.off.delay</code> </td>
              <td class="text-left" rowspan="1" colspan="1">Turn off the load with a delay (seconds)
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>load.on</code> </td>
              <td class="text-left" rowspan="1" colspan="1">Turn on the load immediately
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>load.on.delay</code> </td>
              <td class="text-left" rowspan="1" colspan="1">Turn on the load with a delay (seconds)
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>shutdown.return</code> </td>
              <td class="text-left" rowspan="1" colspan="1">Turn off the load and return when power is back
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>shutdown.stayoff</code> </td>
              <td class="text-left" rowspan="1" colspan="1">Turn off the load and remain off
</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">
                <code>shutdown.stop</code> </td>
              <td class="text-left" rowspan="1" colspan="1">Stop a shutdown in progress
</td>
            </tr>
          </tbody>
        </table>
</section>
</section>
<section id="appendix-B">
      <h2 id="name-the-shutdown-story-for-syst">
<a href="#appendix-B" class="section-number selfRef">Appendix B. </a><a href="#name-the-shutdown-story-for-syst" class="section-name selfRef">The Shutdown Story for System and UPS</a>
      </h2>
<div id="shutdownstory">
<p id="appendix-B-1">This appendix provides background material
helpful for a general understanding of the relation between system and
UPS.  It does not define any feature of the command-response protocol.<a href="#appendix-B-1" class="pilcrow">¶</a></p>
</div>
<p id="appendix-B-2">We consider the steps involved in the shutdown and restart of a
long-running unattended server protected by a single UPS.  The <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span>
runs in the server as shown in
figure <a href="#fig.story" class="xref">Figure 9</a>.<a href="#appendix-B-2" class="pilcrow">¶</a></p>
<span id="name-long-running-unattended-ser"></span><div id="fig.story">
<figure id="figure-9">
        <div class="alignCenter art-text artwork" id="appendix-B-3.1">
<pre>           ,------------------SERVER------------------,
           |                    |                     |
 ,-----,   |     UPS       &lt;-Commands        UPS      |
 | UPS |---|  Attachment        |         Management  |
 |     |===|    Daemon       Responses-&gt;    Daemon    |
 /-----\   '--------------------'---------------------'
                             Internal
                             loopback</pre>
</div>
<figcaption><a href="#figure-9" class="selfRef">Figure 9</a>:
<a href="#name-long-running-unattended-ser" class="selfRef">Long-running unattended server</a>
        </figcaption></figure>
</div>
<ol start="1" type="1" class="normal type-1" id="appendix-B-4">
<li id="appendix-B-4.1">
<div id="start">
          <em>The public power supply is on</em> -- The system runs
normally. Every 5 seconds, variable <code>ups.status</code> reports
<code>OL</code>. -- <em>Days, weeks, months go by...</em><a href="#start" class="pilcrow">¶</a>
</div>
        </li>
<li id="appendix-B-4.2">
          <em>Winter storm. Tree falls on power lines. The public power supply fails</em>
-- The server remains operational running on the UPS battery. The
<span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> polls the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span>, and detects status change <code>OL</code>-&gt;<code>OB</code>.<a href="#appendix-B-4.2" class="pilcrow">¶</a>
</li>
        <li id="appendix-B-4.3">The <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> logs warning messages. The server is still operational
running on the UPS battery. -- <em>Minutes go by...</em><a href="#appendix-B-4.3" class="pilcrow">¶</a>
</li>
        <li id="appendix-B-4.4">The battery discharges below the level specified by variable
<code>battery.charge.low</code>. The server remains operational, but the
UPS battery will not last much longer.  The <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> polls the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span>, and
detects status change <code>OB</code>-&gt;<code>OB</code>+<code>LB</code>.<a href="#appendix-B-4.4" class="pilcrow">¶</a>
</li>
        <li id="appendix-B-4.5">The <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> logs the low battery event.<a href="#appendix-B-4.5" class="pilcrow">¶</a>
</li>
        <li id="appendix-B-4.6">
<div id="setFSD">The <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> decides to call for a system shutdown.
It sets status <code>FSD</code> in the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> to call on any secondaries to
shut down and waits for command <span><a href="#get" class="xref"><code>GET</code></a> (<a href="#get" class="xref">4.2.4</a>)</span> <span><a href="#numattach" class="xref"><code>NUMATTACH</code></a> (<a href="#numattach" class="xref">4.2.4.3</a>)</span> to report one
single attachment, i.e. the primary itself. The <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> then issues the
system shutdown command for itself.<a href="#setFSD" class="pilcrow">¶</a>
</div>
        </li>
<li id="appendix-B-4.7">
<div id="upsdrvctl">The operating system's shutdown process takes
over. During the system shutdown, a <span><a href="#proj" class="xref">NUT Project</a> (<a href="#proj" class="xref">2.7</a>)</span> specific script or an
equivalent systemd service unit runs the command <code>upsdrvctl
shutdown</code>. This tells the UPS that it is to shut down N seconds
later where the default is N=20.
Note that the "shutdown" of a UPS removes power
from the outlet sockets, but may not turn the UPS off completely.
A delayed shutdown is sometimes audible, and the characteristic
beeping of the UPS stops.<a href="#upsdrvctl" class="pilcrow">¶</a>
</div>
        </li>
<li id="appendix-B-4.8">The system shuts down and powers down, hopefully before the N=20
seconds have passed.<a href="#appendix-B-4.8" class="pilcrow">¶</a>
</li>
        <li id="appendix-B-4.9">
          <em>N seconds after item <a href="#upsdrvctl" class="xref">7</a></em> -- The UPS shuts down, i.e., it turns off its
outlet sockets when N=20 seconds have passed. With some UPS units,
there is an audible "clunk". The absence of AC power to the protected
system for a sufficient time has the effect of resetting the server's
BIOS options, and in particular the option "Restore power on AC
return". This BIOS option will be needed to restart the box.  How long
is a sufficient time for the BIOS to reset? This depends very much on
the box.  Some need more than 10 seconds. What if the public power supply returns
before the "sufficient time" has elapsed? The UPS unit should be able
to wait a configurable time with default 30 seconds.  These two timers
start from the moment the UPS receives the
<code>upsdrvctl shutdown</code> command. -- <em>Minutes, hours, days go
by...</em><a href="#appendix-B-4.9" class="pilcrow">¶</a>
</li>
        <li id="appendix-B-4.10">
          <em>Some time later, maybe much later, the public power supply returns</em> --
The UPS reconnects it's outlets to send power to the protected system.<a href="#appendix-B-4.10" class="pilcrow">¶</a>
</li>
        <li id="appendix-B-4.11">The system BIOS option "Restore power on AC return" has hopefully
been selected and the system powers up. The bootstrap process of the
operating system begins.<a href="#appendix-B-4.11" class="pilcrow">¶</a>
</li>
        <li id="appendix-B-4.12">The operating system starts the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> and the <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span>. The <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span>
starts the <span><a href="#Driver" class="xref">Driver</a> (<a href="#Driver" class="xref">2.3</a>)</span> and scans the UPS. The UPS status becomes
<code>OL</code>+<code>LB</code>.<a href="#appendix-B-4.12" class="pilcrow">¶</a>
</li>
        <li id="appendix-B-4.13">After some time, the battery charges above
the <code>battery.charge.low</code> threshold and the <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> declares the
status change <code>OL</code>+<code>LB</code>-&gt;<code>OL</code>. We are now back in the same
situation as <a href="#start" class="xref">1</a> above.<a href="#appendix-B-4.13" class="pilcrow">¶</a>
</li>
      </ol>
</section>
<section id="appendix-C">
      <h2 id="name-technical-terms-historical-">
<a href="#appendix-C" class="section-number selfRef">Appendix C. </a><a href="#name-technical-terms-historical-" class="section-name selfRef">Technical Terms: Historical Differences</a>
      </h2>
<div id="differences">
<p id="appendix-C-1">This appendix lists the major differences
between the technical terms used in this document and those used in
version 2.7.4 of the <span><a href="#proj" class="xref">NUT Project</a> (<a href="#proj" class="xref">2.7</a>)</span>.<a href="#appendix-C-1" class="pilcrow">¶</a></p>
</div>
<table class="center" id="table-11">
        <caption><a href="#table-11" class="selfRef">Table 11</a></caption>
<thead>
          <tr>
            <th class="text-left" rowspan="1" colspan="1">Term in NUT 2.7.4   </th>
            <th class="text-left" rowspan="1" colspan="1">Term in this document
</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">ALREADY-LOGGED-IN   </td>
            <td class="text-left" rowspan="1" colspan="1">
              <span><a href="#errors" class="xref">ALREADY-ATTACHED</a> (<a href="#errors" class="xref">Table 3</a>)</span>
            </td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">ALREADY-SSL-MODE    </td>
            <td class="text-left" rowspan="1" colspan="1">
              <span><a href="#errors" class="xref">TLS-ALREADY-ENABLED</a> (<a href="#errors" class="xref">Table 3</a>)</span>
            </td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">LOGIN               </td>
            <td class="text-left" rowspan="1" colspan="1">
              <span><a href="#attach" class="xref"><code>ATTACH</code></a> (<a href="#attach" class="xref">4.2.1</a>)</span>
            </td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">LOGOUT              </td>
            <td class="text-left" rowspan="1" colspan="1">
              <span><a href="#detach" class="xref"><code>DETACH</code></a> (<a href="#detach" class="xref">4.2.2</a>)</span>
            </td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Master              </td>
            <td class="text-left" rowspan="1" colspan="1">
              <span><a href="#prim" class="xref">Primary</a> (<a href="#prim" class="xref">2.8</a>)</span>
            </td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">NETVER              </td>
            <td class="text-left" rowspan="1" colspan="1">
              <span><a href="#protver" class="xref"><code>PROTVER</code></a> (<a href="#protver" class="xref">4.2.10</a>)</span>
            </td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">NUMLOGINS           </td>
            <td class="text-left" rowspan="1" colspan="1">
              <span><a href="#numattach" class="xref"><code>NUMATTACH</code></a> (<a href="#numattach" class="xref">4.2.4.3</a>)</span>
            </td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Slave               </td>
            <td class="text-left" rowspan="1" colspan="1">
              <span><a href="#sec" class="xref">Secondary</a> (<a href="#sec" class="xref">2.9</a>)</span>
            </td>
          </tr>
        </tbody>
      </table>
</section>
<section id="appendix-D">
      <h2 id="name-change-log">
<a href="#appendix-D" class="section-number selfRef">Appendix D. </a><a href="#name-change-log" class="section-name selfRef">Change Log</a>
      </h2>
<p id="appendix-D-1">This section is to be removed before publishing as an RFC.<a href="#appendix-D-1" class="pilcrow">¶</a></p>
<p id="appendix-D-2"><span class="cref">Ed: To be removed on publication.</span><a href="#appendix-D-2" class="pilcrow">¶</a></p>
<section id="appendix-D.1">
        <h3 id="name-changes-in-version-01">
<a href="#appendix-D.1" class="section-number selfRef">D.1. </a><a href="#name-changes-in-version-01" class="section-name selfRef">Changes in Version 01</a>
        </h3>
<ol start="1" type="1" class="compact type-1" id="appendix-D.1-1">
<li id="appendix-D.1-1.1">There is exactly <span><a href="#onenewline" class="xref">one
newline</a> (<a href="#onenewline" class="xref">4.1</a>)</span> at the end of commands and responses.<a href="#appendix-D.1-1.1" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.1-1.2">Added descriptions to variables in <span><a href="#Annex1" class="xref">Annex</a> (<a href="#Annex1" class="xref">A</a>)</span>.<a href="#appendix-D.1-1.2" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.1-1.3">Added clause <span><a href="#events" class="xref">Events</a> (<a href="#events" class="xref">5.2</a>)</span>.<a href="#appendix-D.1-1.3" class="pilcrow">¶</a>
</li>
        </ol>
</section>
<section id="appendix-D.2">
        <h3 id="name-changes-in-version-02">
<a href="#appendix-D.2" class="section-number selfRef">D.2. </a><a href="#name-changes-in-version-02" class="section-name selfRef">Changes in Version 02</a>
        </h3>
<ol start="1" type="1" class="compact type-1" id="appendix-D.2-1">
<li id="appendix-D.2-1.1">Extended acknowledgments.<a href="#appendix-D.2-1.1" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.2-1.2">Added reference to possible use of RFC1628 between driver and <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span>.<a href="#appendix-D.2-1.2" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.2-1.3">Clarified response to command <code>LIST CLIENT</code>.<a href="#appendix-D.2-1.3" class="pilcrow">¶</a>
</li>
        </ol>
</section>
<section id="appendix-D.3">
        <h3 id="name-changes-in-version-03">
<a href="#appendix-D.3" class="section-number selfRef">D.3. </a><a href="#name-changes-in-version-03" class="section-name selfRef">Changes in Version 03</a>
        </h3>
<ol start="1" type="1" class="compact type-1" id="appendix-D.3-1">
<li id="appendix-D.3-1.1">Clarified description of <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span>.<a href="#appendix-D.3-1.1" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.3-1.2">Added Implementation status section as recommended
by <span><a href="#RFC7942" class="xref">RFC 7942</a> [<a href="#RFC7942" class="xref">RFC7942</a>]</span>.<a href="#appendix-D.3-1.2" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.3-1.3">Rewrote <a href="#projreq" class="xref">Section 7.2.3, Paragraph 1</a>.<a href="#appendix-D.3-1.3" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.3-1.4">Clarified <a href="#Annex1" class="xref">Appendix A, Paragraph 1</a> as being merely an example
of variables used for a specific UPS product.<a href="#appendix-D.3-1.4" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.3-1.5">Added definition of <code>&lt;upsname&gt;</code>
in <a href="#commands" class="xref">Section 4.2, Paragraph 1</a>.<a href="#appendix-D.3-1.5" class="pilcrow">¶</a>
</li>
        </ol>
</section>
<section id="appendix-D.4">
        <h3 id="name-changes-in-version-04">
<a href="#appendix-D.4" class="section-number selfRef">D.4. </a><a href="#name-changes-in-version-04" class="section-name selfRef">Changes in Version 04</a>
        </h3>
<p id="appendix-D.4-1">There are many changes in this version following the ISE review.
See reply to ISE review: <code>http://rogerprice.org/NUT/ISE-comments-2021-06-14.reply.html</code> Among other changes are:<a href="#appendix-D.4-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="compact type-1" id="appendix-D.4-2">
<li id="appendix-D.4-2.1">
            <span><a href="#Codepoint" class="xref">Section</a> (<a href="#Codepoint" class="xref">7</a>)</span> becomes "Codepoint Management".<a href="#appendix-D.4-2.1" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.4-2.2">Editorial cleanup. All <code>&lt;aside&gt;</code> elements labelled as notes.<a href="#appendix-D.4-2.2" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.4-2.3">Added implementation note to <a href="#list" class="xref">Section 4.2.7, Paragraph 1</a>.<a href="#appendix-D.4-2.3" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.4-2.4">Error message <code>ALREADY-SSL-MODE</code> becomes <code>ALREADY-TSL-ENABLED</code>.<a href="#appendix-D.4-2.4" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.4-2.5">Added error message  <code>TSL-NOT-ENABLED</code>.<a href="#appendix-D.4-2.5" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.4-2.6">Typo in clause <span><a href="#st" class="xref">UPS status</a> (<a href="#st" class="xref">Section 2.11, Paragraph 1</a>)</span>.<a href="#appendix-D.4-2.6" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.4-2.7">Removed all reference to use of RFC1628 between driver and <span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span>.<a href="#appendix-D.4-2.7" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.4-2.8">In <a href="#commands" class="xref">Section 4.2, Paragraph 1</a> field [:&lt;port&gt;] is always
available in &lt;upsname&gt;<a href="#appendix-D.4-2.8" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.4-2.9">Added technical term <span><a href="#au" class="xref">administrative user</a> (<a href="#au" class="xref">2.2</a>)</span>.<a href="#appendix-D.4-2.9" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.4-2.10">Added appendix <span><a href="#differences" class="xref">Technical terms:
Historical differences</a> (<a href="#differences" class="xref">C</a>)</span><a href="#appendix-D.4-2.10" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.4-2.11">Added table of "successful" responses: <span><a href="#success" class="xref">Response when command succeeds</a> (<a href="#success" class="xref">4.3.1</a>)</span><a href="#appendix-D.4-2.11" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.4-2.12">Three commands change name <code>LOGIN</code> -&gt;
<span><a href="#attach" class="xref"><code>ATTACH</code></a> (<a href="#attach" class="xref">4.2.1</a>)</span>, <code>LOGOUT</code> -&gt; <span><a href="#detach" class="xref"><code>DETACH</code></a> (<a href="#detach" class="xref">4.2.2</a>)</span> and <code>NUMLOGINS</code> -&gt;
<span><a href="#numattach" class="xref"><code>NUMATTACH</code></a> (<a href="#numattach" class="xref">4.2.4.3</a>)</span>.<a href="#appendix-D.4-2.12" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.4-2.13">Error message <code>ALREADY-LOGGED-IN</code> becomes <code>ALREADY-ATTACHED</code>.<a href="#appendix-D.4-2.13" class="pilcrow">¶</a>
</li>
        </ol>
</section>
<section id="appendix-D.5">
        <h3 id="name-changes-in-version-05">
<a href="#appendix-D.5" class="section-number selfRef">D.5. </a><a href="#name-changes-in-version-05" class="section-name selfRef">Changes in Version 05</a>
        </h3>
<p id="appendix-D.5-1">This version includes changes made following comments by the reviewers.<a href="#appendix-D.5-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="compact type-1" id="appendix-D.5-2">
<li id="appendix-D.5-2.1">Abstract: Change "takes" -&gt; "automates".<a href="#appendix-D.5-2.1" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.2">Abstract: Change "Current practice" -&gt; "Current practice when this
text was written".<a href="#appendix-D.5-2.2" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.3">Abstract: Change "leads to" -&gt; "risks".<a href="#appendix-D.5-2.3" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.4">
            <span><a href="#HowtoRead" class="xref">Section</a> (<a href="#HowtoRead" class="xref">1.1</a>)</span>, Added sentence on
use of "public power supply".<a href="#appendix-D.5-2.4" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.5">
            <span><a href="#intro" class="xref">Section</a> (<a href="#intro" class="xref">1.2</a>)</span>, Change "shutting
down..."  -&gt; "performing a managed shutdown of unattended..."<a href="#appendix-D.5-2.5" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.6">
            <span><a href="#AddInf" class="xref">Section</a> (<a href="#AddInf" class="xref">1.4</a>)</span> added link to NUT
documentation.<a href="#appendix-D.5-2.6" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.7">
            <span><a href="#Terminology" class="xref">Section</a> (<a href="#Terminology" class="xref">2</a>)</span> added "They
are listed in alphabetical order."<a href="#appendix-D.5-2.7" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.8">
            <span><a href="#AD" class="xref">Section</a> (<a href="#AD" class="xref">2.1</a>)</span> Change "talks to the
UPS" -&gt; "retrieves status from the UPS and sends commands to it".<a href="#appendix-D.5-2.8" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.9">
            <span><a href="#AD" class="xref">Section</a> (<a href="#AD" class="xref">2.1</a>)</span> Change "... launched
as system user root and drops privilege ..."  -&gt; "... launched as
system user root to allow direct access to the hardware
(e.g. <code>/proc</code>, <code>/dev</code>).  For better security, the daemon
then drops privilege ..."<a href="#appendix-D.5-2.9" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.10">
            <span><a href="#au" class="xref">Section</a> (<a href="#au" class="xref">2.2</a>)</span> Change "<span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> users."
-&gt; "<span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> users which authenticate to the attachment daemon with
basic credentials (username and password)."<a href="#appendix-D.5-2.10" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.11">
            <span><a href="#au" class="xref">Section</a> (<a href="#au" class="xref">2.2</a>)</span> Change "... and are
defined by a file in the ..." -&gt; "... and are listed in a text file
which is read by the ...".<a href="#appendix-D.5-2.11" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.12">
            <span><a href="#au" class="xref">Section</a> (<a href="#au" class="xref">2.2</a>)</span> Added link
to <a href="#adminuser" class="xref">Section 6.5.1, Paragraph 1</a>.<a href="#appendix-D.5-2.12" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.13">
            <span><a href="#Driver" class="xref">Section</a> (<a href="#Driver" class="xref">2.3</a>)</span> Change "specific to
the hardware" -&gt; "specific to the UPS hardware"<a href="#appendix-D.5-2.13" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.14">
            <span><a href="#IC" class="xref">Section</a> (<a href="#IC" class="xref">2.5</a>)</span> Change "causes the
hardware" -&gt; "is passed to the driver and sent to the hardware".<a href="#appendix-D.5-2.14" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.15">
            <span><a href="#IC" class="xref">Section</a> (<a href="#IC" class="xref">2.5</a>)</span> Change "to
immediately" -&gt; "without any configured delay to".<a href="#appendix-D.5-2.15" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.16">
            <span><a href="#MD" class="xref">Section</a> (<a href="#MD" class="xref">2.6</a>)</span> Change "the system
reaction to power loss." -&gt; "orchestrating system-wide actions
after a power event."<a href="#appendix-D.5-2.16" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.17">
            <span><a href="#proj" class="xref">Section</a> (<a href="#proj" class="xref">2.7</a>)</span> Title "NUT Project"
-&gt; "NUT Software Project".<a href="#appendix-D.5-2.17" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.18">
            <span><a href="#prim" class="xref">Section</a> (<a href="#prim" class="xref">2.8</a>)</span> Change "the system to
which the data lead is connected" -&gt; "the computer running the
driver".<a href="#appendix-D.5-2.18" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.19">
            <span><a href="#sec" class="xref">Section</a> (<a href="#sec" class="xref">2.9</a>)</span> Replaced and clarified
"data lead" not present with secondaries.<a href="#appendix-D.5-2.19" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.20">
            <span><a href="#sess" class="xref">Section</a> (<a href="#sess" class="xref">2.10</a>)</span> Change "may open a
session" -&gt; "may initiate a TCP session".<a href="#appendix-D.5-2.20" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.21">
            <span><a href="#st" class="xref">Section</a> (<a href="#st" class="xref">2.11</a>)</span> Change "are considered
fundamental and are" -&gt; "MUST be".<a href="#appendix-D.5-2.21" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.22">
            <span><a href="#st" class="xref">Section</a> (<a href="#st" class="xref">2.11</a>)</span> Change "other statuses
depend" -&gt; "other statuses are OPTIONAL and depend".<a href="#appendix-D.5-2.22" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.23">
            <span><a href="#var" class="xref">Section</a> (<a href="#var" class="xref">2.12</a>)</span> Change "The features"
-&gt; "The metrics and identifiers".<a href="#appendix-D.5-2.23" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.24">
            <span><a href="#var" class="xref">Section</a> (<a href="#var" class="xref">2.12</a>)</span> Change "current value
attached to that feature" -&gt; "value representing that metric or
identifier".<a href="#appendix-D.5-2.24" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.25">
            <span><a href="#var" class="xref">Section</a> (<a href="#var" class="xref">2.12</a>)</span> Added a note: "Note:
Some variables are constants, e.g.  battery type, manufacturer."<a href="#appendix-D.5-2.25" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.26">
            <span><a href="#overview" class="xref">Section</a> (<a href="#overview" class="xref">3</a>)</span> Rewrote
paragraph to clarify "the Attachment Daemon and the Management daemon
which act as <strong>server</strong> and <strong>client</strong>
respectively."<a href="#appendix-D.5-2.26" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.27">
            <span><a href="#overview" class="xref">Section</a> (<a href="#overview" class="xref">3</a>)</span> Change "run the
Attachment Daemon (2.1)." -&gt; "run the Attachment Daemon (2.1), thereby
effectively creating a network attached UPS running a standard
protocol."<a href="#appendix-D.5-2.27" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.28">
            <span><a href="#fig.oview4" class="xref">Figure</a> (<a href="#fig.oview4" class="xref">4</a>)</span> In the note:
replaced "but if the UPS had status OB the Secondary shuts down."  by
"but if the UPS had status <code>OB</code> the Secondary may choose to shut down
as a precaution."<a href="#appendix-D.5-2.28" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.29">
            <span><a href="#Notation" class="xref">Section</a> (<a href="#Notation" class="xref">4.1</a>)</span> Added scholarly
historical note.<a href="#appendix-D.5-2.29" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.30">
            <span><a href="#commands" class="xref">Section</a> (<a href="#commands" class="xref">4.2</a>)</span>

Change "of the port" -&gt; "of the TCP port".<a href="#appendix-D.5-2.30" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.31">
            <span><a href="#attach" class="xref">Section</a> (<a href="#attach" class="xref">4.2.1</a>)</span> Change "the count is
1 (the Primary (2.8)) + the number of Secondaries (2.9)" -&gt; "the count
is 1 for the primary + the number of secondaries".  Change "a trio of"
to "three".<a href="#appendix-D.5-2.31" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.32">
            <span><a href="#FSD" class="xref">Section</a> (<a href="#FSD" class="xref">4.2.3</a>)</span> Clarify that "FSD" means
"Forced Shutdown".<a href="#appendix-D.5-2.32" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.33">
            <span><a href="#FSD" class="xref">Section</a> (<a href="#FSD" class="xref">4.2.3</a>)</span> Change "only to a
high-level" -&gt; "only to a privileged".<a href="#appendix-D.5-2.33" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.34">
            <span><a href="#get" class="xref">Section</a> (<a href="#get" class="xref">4.2.4</a>)</span> Added prefix GET to
all the subcommands.<a href="#appendix-D.5-2.34" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.35">
            <span><a href="#list" class="xref">Section</a> (<a href="#list" class="xref">4.2.7</a>)</span> Added prefix LIST to
all the subcommands.<a href="#appendix-D.5-2.35" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.36">
            <span><a href="#list" class="xref">Section</a> (<a href="#list" class="xref">4.2.7</a>)</span> Change "common
container" -&gt; "common".<a href="#appendix-D.5-2.36" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.37">
            <span><a href="#list" class="xref">Section</a> (<a href="#list" class="xref">4.2.7</a>)</span>
Change "then go off and wait for the response" to "wait".<a href="#appendix-D.5-2.37" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.38">
            <span><a href="#protver" class="xref">Section</a> (<a href="#protver" class="xref">4.2.10</a>)</span> Added note
differentiating <span><a href="#protver" class="xref"><code>PROTVER</code></a> (<a href="#protver" class="xref">4.2.10</a>)</span> and <span><a href="#ver" class="xref"><code>VER</code></a> (<a href="#ver" class="xref">4.2.14</a>)</span>.<a href="#appendix-D.5-2.38" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.39">
            <span><a href="#set" class="xref">Section</a> (<a href="#set" class="xref">4.2.11</a>)</span> Changed "and the UPS
model." -&gt; "and the UPS model. Some variables are read-only due to the
design of the UPS or its driver."<a href="#appendix-D.5-2.39" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.40">
            <span><a href="#starttls" class="xref">Section</a> (<a href="#starttls" class="xref">4.2.12</a>)</span> Changed "The choice
of TLS version is a matter for site security policy and is not
specified in this document." -&gt; "The parameters and versions of
cryptographic libraries are those of the Attachment Daemon's
underlying OS and are outside the scope of this document."<a href="#appendix-D.5-2.40" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.41">
            <span><a href="#username" class="xref">Section</a> (<a href="#username" class="xref">4.2.13</a>)</span> Change "provides
facilities to limit access to the UPS unit(s) to which it is
attached." -&gt; "limits access to clients whose credentials match those
in the file <code>upsd.users</code>.  There is no anonymous access."<a href="#appendix-D.5-2.41" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.42">
            <span><a href="#ver" class="xref">Section</a> (<a href="#ver" class="xref">4.2.14</a>)</span> Added note
differentiating <span><a href="#ver" class="xref"><code>VER</code></a> (<a href="#ver" class="xref">4.2.14</a>)</span> and <span><a href="#protver" class="xref"><code>PROTVER</code></a> (<a href="#protver" class="xref">4.2.10</a>)</span>.<a href="#appendix-D.5-2.42" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.43">
            <span><a href="#symbols" class="xref">Section</a> (<a href="#symbols" class="xref">5.1</a>)</span> Change "public
supply", "wall power" and "input supply" -&gt; "input power supply", nine
places.<a href="#appendix-D.5-2.43" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.44">
            <span><a href="#symbols" class="xref">Section</a> (<a href="#symbols" class="xref">5.1</a>)</span> Remove notes from
CHRG and DISCHARG.<a href="#appendix-D.5-2.44" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.45">
            <span><a href="#symbols" class="xref">Section</a> (<a href="#symbols" class="xref">5.1</a>)</span> OB: Removed "offline".<a href="#appendix-D.5-2.45" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.46">
            <span><a href="#events" class="xref">Section</a> (<a href="#events" class="xref">5.2</a>)</span> Change "deduces" -&gt;
"detects".<a href="#appendix-D.5-2.46" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.47">
            <span><a href="#events" class="xref">Section</a> (<a href="#events" class="xref">5.2</a>)</span> Change "valuable
resources" -&gt; "compute and network resources" .<a href="#appendix-D.5-2.47" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.48">
            <span><a href="#events" class="xref">Section</a> (<a href="#events" class="xref">5.2</a>)</span> Change "will not have
up-to-date information about the UPS status" -&gt; "risks missing
short-lived changes in the UPS status"<a href="#appendix-D.5-2.48" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.49">
            <span><a href="#need" class="xref">Section</a> (<a href="#need" class="xref">6.4</a>)</span> After "imposed by a
wave of the hand" added "it cannot be implemented quickly and without
impact to many deployed systems".<a href="#appendix-D.5-2.49" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.50">
            <span><a href="#VPN" class="xref">Section</a> (<a href="#VPN" class="xref">6.4.3</a>)</span> Added section.<a href="#appendix-D.5-2.50" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.51">
            <span><a href="#VLAN" class="xref">Section</a> (<a href="#VLAN" class="xref">6.4.4</a>)</span> Added section with
figure.<a href="#appendix-D.5-2.51" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.52">
            <span><a href="#projreq" class="xref">Section</a> (<a href="#projreq" class="xref">7.2.3</a>)</span> Added "Note: In
Unix-like systems a port with a number below 1024 is privileged and
requires elevated permissions to manage."<a href="#appendix-D.5-2.52" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.53">
            <span><a href="#ChangeReg" class="xref">Section</a> (<a href="#ChangeReg" class="xref">8.2</a>)</span> Change "but
accepts" -&gt; "but will accept".<a href="#appendix-D.5-2.53" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.54">
            <span><a href="#Annex1" class="xref">Appendix</a> (<a href="#Annex1" class="xref">A</a>)</span> Change "domestic" -&gt;
"consumer grade".<a href="#appendix-D.5-2.54" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.5-2.55">
            <span><a href="#shutdownstory" class="xref">Appendix</a> (<a href="#shutdownstory" class="xref">B</a>)</span> <span><a href="#upsdrvctl" class="xref">item</a> (<a href="#upsdrvctl" class="xref">7</a>)</span>
Change <em>Note that the "shut down" of a UPS does not turn the UPS
off completely.  It disconnects the outlet sockets.  Such a delayed
shutdown is audible since the characteristic beeping of a UPS
stops.</em> -&gt; <em>Note that the "shutdown" of a UPS removes power
from the outlet sockets, but may not turn the UPS off completely.
A delayed shutdown is sometimes audible, and the characteristic
beeping of the UPS stops.</em><a href="#appendix-D.5-2.55" class="pilcrow">¶</a>
</li>
        </ol>
</section>
<section id="appendix-D.6">
        <h3 id="name-changes-in-version-06">
<a href="#appendix-D.6" class="section-number selfRef">D.6. </a><a href="#name-changes-in-version-06" class="section-name selfRef">Changes in Version 06</a>
        </h3>
<p id="appendix-D.6-1">This version includes changes made following comments by the reviewers.<a href="#appendix-D.6-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="compact type-1" id="appendix-D.6-2">
<li id="appendix-D.6-2.1">
            <span><a href="#starttls" class="xref">Section</a> (<a href="#starttls" class="xref">4.2.12</a>)</span> Added sentence to
permit unencrypted communication.<a href="#appendix-D.6-2.1" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.6-2.2">Added <span><a href="#MinSup" class="xref">Section</a> (<a href="#MinSup" class="xref">9.4</a>)</span> Recommended
Minimum Support<a href="#appendix-D.6-2.2" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.6-2.3">
            <a href="#longsess" class="xref">Section 6.5.2.2, Paragraph 1</a> Changed "long-running
<span><a href="#AD" class="xref">Attachment Daemon</a> (<a href="#AD" class="xref">2.1</a>)</span> <code>upsmon</code>" -&gt; "long-running <span><a href="#MD" class="xref">Management Daemon</a> (<a href="#MD" class="xref">2.6</a>)</span> <code>upsmon</code>".<a href="#appendix-D.6-2.3" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.6-2.4">
            <span><a href="#shutdownstory" class="xref">Appendix</a> (<a href="#shutdownstory" class="xref">B</a>)</span>
            <span><a href="#setFSD" class="xref">item</a> (<a href="#setFSD" class="xref">6</a>)</span>.  Added clarification
of the use of status symbol <code>FSD</code> and command <span><a href="#set" class="xref"><code>SET</code></a> (<a href="#set" class="xref">4.2.11</a>)</span>
            <span><a href="#numattach" class="xref"><code>NUMATTACH</code></a> (<a href="#numattach" class="xref">4.2.4.3</a>)</span>.<a href="#appendix-D.6-2.4" class="pilcrow">¶</a>
</li>
          <li id="appendix-D.6-2.5">
            <span><a href="#overview" class="xref">Section</a> (<a href="#overview" class="xref">3</a>)</span> <a href="#fig.oview2" class="xref">Figure 2</a> Changed "a
standard protocol" -&gt; "a published protocol".<a href="#appendix-D.6-2.5" class="pilcrow">¶</a>
</li>
        </ol>
</section>
</section>
<div id="authors-addresses">
<section id="appendix-E">
      <h2 id="name-authors-address">
<a href="#name-authors-address" class="section-name selfRef">Author's Address</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Roger Price (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">Network UPS Tools Project</span></div>
<div dir="auto" class="left"><span class="country-name">France</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:ietf@rogerprice.org" class="email">ietf@rogerprice.org</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
