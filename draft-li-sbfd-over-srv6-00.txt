



Network Working Group                                              Z. Li
Internet-Draft                                                    T. Sun
Intended status: Informational                              China Mobile
Expires: January 9, 2022                                        W. Cheng
                                                                 J. Wang
                                                                  Centec
                                                            July 8, 2021


                            S-BFD over SRv6
                       draft-li-sbfd-over-srv6-00

Abstract

   Bidirectional Forwarding Detection (BFD) can be used to monitor paths
   between node.  Seamless BFD (S-BFD) provides a simplified mechanism
   which is suitable for monitoring of paths that are setup dynamically
   and on a large scale network.  This draft describes a method to
   simplify the implementation of S-BFD over SRv6 by using SRH.flag to
   instruct the S-BFD peer node to do reverse operation of SRv6 SID
   list.

Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in .

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on January 9, 2022.







Li, et al.               Expires January 9, 2022                [Page 1]

Internet-Draft                SPRING Group                     July 2021


Copyright Notice

   Copyright (c) 2021 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Motiviation for Proposing S-BFD over SRv6 . . . . . . . . . .   2
   3.  The benefits of S-BFD over SRv6 . . . . . . . . . . . . . . .   4
   4.  Future Considerations and Enhancements of S-BFD over SRv6 . .   5
   5.  Security Considerations . . . . . . . . . . . . . . . . . . .   5
   6.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   5
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   5

1.  Introduction

   With the increasing adoption of segment routing (SR) technology, ISPs
   have upgraded their networks seamlessly from MPLS to SR MPLS, and
   their next goal might be the overall upgrading of the IPv6 underlay
   network forwarding plane.

   We hope to implement BFD over SRv6 while retaining the bidirectional
   detection capabilities of traditional BFD, rather than using
   asymmetrical path detection only.  Another problem relates to the
   bidirectional detection mechanism in BFD over SRv6, Using SR Policy
   or using TLV to carry the return path brings extra load to the
   message parsing depth on existing SRv6 device.

   In order to accelerate applying BFD in SRv6 networks, this paper
   proposed a S-BFD over SRv6 implementation solution.

2.  Motiviation for Proposing S-BFD over SRv6

   As shown in the figure below, the BFD initiator is A and the peer
   node is D, while bfd packets forwarding from A to D via the path:
   A->B->C->D, and return via the path: D->C->B->A.




Li, et al.               Expires January 9, 2022                [Page 2]

Internet-Draft                SPRING Group                     July 2021


               +-----B-------C-----+
              /                     \
             A-----------E-----------D
              \                     /
               +-----F-------G-----+

               Forward Paths: A-B-C-D
               Return Paths: D-C-B-A

                    Traditional BFD in SRv6 Data Plane

   SRv6 SID operations on the initial node A: The SRv6 SID list {A, B,
   C, D} is pushed into Node A.

   SRv6 SID operations on the terminal node D: The SRv6 SID list {A, B,
   C, D} is swapped in Node D, and the updated SRv6 SID list is : {D, C,
   B, A}, and the Last Entry, Segment Left, and other fields are
   updated.Return Path: D->C->B->A.

   As shown in the figure below, the length of the flags field in the
   SRH header is 8-bit.  This draft uses the left third bit
   (0|0|R|0|0|0|0|0) to represent the reverse operation of the SRv6 SID
   list.




























Li, et al.               Expires January 9, 2022                [Page 3]

Internet-Draft                SPRING Group                     July 2021


        0                   1                   2                   3
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       | Next Hdr=144  |  Hdr Ext Len  | Routing Type  | Segments Left |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |  Last Entry   |     Flags     |              Tag              |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                                                               |
       |            Segment List[0] (128-bit IPv6 address)             |
       |                                                               |
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                                                               |
       |                                                               |
                                     ...
       |                                                               |
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                                                               |
       |            Segment List[n] (128-bit IPv6 address)             |
       |                                                               |
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                                                               |
       |            SRv6 SPAN Header                                   |
       |                                                               |
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |           Origin  Packet                                      |
       |                                                               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

               The reverse operations for S-BFD of SRv6 Flag

   BFD peer node D check if SRH.Flags[5] == 1, it means that this device
   requires the reverse operation of the SRv6 SID list.

3.  The benefits of S-BFD over SRv6

   This solution does not need to use the SRv6 Policy to add length of
   the SID list or to carry the SID list of the return path by TLV.  It
   only needs to support reverse SRv6 SID in the reflector node to solve
   the issue of S-BFD over SRv6 described in the previous.








Li, et al.               Expires January 9, 2022                [Page 4]

Internet-Draft                SPRING Group                     July 2021


4.  Future Considerations and Enhancements of S-BFD over SRv6

   In future versions of this paper, we will also consider the
   compatibility of using compressed IDs in SRv6, such as seamlessly
   merging S-BFD over G-SRv6.  Furthermore, there will be no effect on
   intermediate nodes within the SRv6 network and it only requires S-BFD
   reflector support the SID reverse operation.

5.  Security Considerations

   TBD.

6.  IANA Considerations

   TBD.

Authors' Addresses

   Zhiqiang Li
   China Mobile
   Beijing  100053
   China

   Email: lizhiqiangyjy@chinamobile.com


   Tao Sun
   China Mobile
   Beijing  100053
   China

   Email: suntao@chinamobile.com


   Wei Cheng
   Centec
   Suzhou  215000
   China

   Email: chengw@centecnetworks.com


   Junjie Wang
   Centec
   Suzhou  21500
   China

   Email: wangjj@centecnetworks.com



Li, et al.               Expires January 9, 2022                [Page 5]
