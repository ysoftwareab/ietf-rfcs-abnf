autoconf Working Group                                    Jaehwoon Lee 
Internet Draft                                      Dongguk University 
Expires: April 29, 2009                                   Sanghynn Ahn
                                                   University of Seoul
                                                          Younghan Kim
                                                   Soongsil University
                                                            Yuseon Kim
                                                           Sangeon Kim
                                                                    KT
                                                      October 30, 2008
                                   
                                       
        Scope-Extended Router Advertisement for Connected MANETs 
                   draft-jaehwoon-autoconf-sera-01.txt 


Status of this Memo 

   By submitting this Internet-Draft, each author represents that       
   any applicable patent or other IPR claims of which he or she is       
   aware have been or will be disclosed, and any of which he or she       
   becomes aware will be disclosed, in accordance with Section 6 of       
   BCP 79. 

   Internet-Drafts are working documents of the Internet Engineering 
   Task Force (IETF), its areas, and its working groups.  Note that 
   other groups may also distribute working documents as Internet-Drafts. 

   Internet-Drafts are draft documents valid for a maximum of six months 
   and may be updated, replaced, or obsoleted by other documents at any 
   time.  It is inappropriate to use Internet-Drafts as reference 
   material or to cite them other than as "work in progress." 

   The list of current Internet-Drafts can be accessed at 
        http://www.ietf.org/ietf/1id-abstracts.txt 

   The list of Internet-Draft Shadow Directories can be accessed at 
        http://www.ietf.org/shadow.html 

   This Internet-Draft will expire on April 29, 2009. 

Copyright Notice

   Copyright (C) The IETF Trust (2008).






Jaehwoon Lee, et al.         Expires April 29, 2009            [Page 1]

Internet-Draft     Scope-Extended Router Advertisement     Oct. 30, 2008


Abstract 

   In the connected MANET, the MANET Border Router (MBR) is used to
   connect the MANET with the external network and MANET nodes are 
   required to know the MBR address to communicate with hosts in the 
   external network. One way of acquiring the MBR address is to use the 
   Router Advertisement (RA) and the Router Solicitation (RS) messages.
   In order to allow RA/RS messages to be delivered in the multi-hop
   MANET, the modified RA/RS message has been defined [4]. However, 
   this approach may incur the duplicate packet reception problem due 
   to rebroadcasting of received RA/RS messages to its neighbors.
   In this draft, we define the scope-extended Router Advertisement/
   Solicitation message for announcing/solicitating the MBR address in
   the connected MANET. In the scope-extended RA/RS message, a new 
   message field, the sequence number field, is defined so that 
   duplicate RA/RS messages can be detected based on the sequence 
   number and the MBR address included in the message.



Table of Contents 

    
   1. Introduction..................................................3 
   2. Terminology...................................................3 
   3. Message Format................................................4
      3.1 IPv4......................................................4
          3.1.1 ICMP Scope-Extended Router Solicitation Message.....4
          3.1.2 ICMP Scope-Extended Router Advertisement Message....5
      3.2 IPv6......................................................6
          3.2.1 ICMP Scope-Extended Router Solicitation Message.....6
          3.2.2 ICMP Scope-Extended Router Advertisement Message....8
      3.3 Source Manet Address Option...............................9
   4. Security Considerations.......................................9 
   5. IANA Considerations...........................................10 
   References.......................................................10 
   Author's Addresses...............................................10 
   Intellectual Property and Copyright Statements ..................12 








Jaehwoon Lee, et al.         Expires April 29, 2009            [Page 2]

Internet-Draft     Scope-Extended Router Advertisement     Oct. 30, 2008


1. Introduction 

   The mobile ad hoc network (MANET) enabls mobile nodes to communicate
   cia multiple wireless hops without the need of any wired 
   infrastructure[1]. in a MANET, two nodes not within their
   transmission range have to deliver data to each other through other
   intermediate nodes. For forwarding packets destined to other nodes,
   each node mush have the routing capability, i.e., the mechanism for
   establishing data delivery routes between any pair of source and
   destination nodes, as well as acting as a source and/or a destination
   node(s). In addition to that, the IP address auto-configuration
   mechanism suitable for the MANET environment is required.
   
   The MANET ca be classified into the autonomous MANET and the
   subordinate MANET. For the subordinate MANET, the MANET Border Router
   (MBR) which acts as the gateway connecting the MANET with the
   Internet has been defined. Through the MBR, MANET nodes can 
   communicate with hosts located in the Internet. Therefore, MANET
   nodes have to know the MBR address. Moreover IP address assigned to
   the MANET node should be suitable to the Internet topology.
   In other words, nodes within the MANET should have the IP address
   with the same network prefix.
   
   One way of obtaing the MBR address and network prefix is to use the
   Router Advertisement (RA) and Router Solicitation (RS) messages[2-3].
   However, there RA and RS messages are delivered only upto 1 hop, so
   can not be used in a multi-hop wireless networks such as the MANET.
   In order to overcome this limitation, the modified RA message has
   been defined for the multi-hop wireless MANET[4]. However, in this
   approach, the duplicate packet reception problem can occur since,
   if a node broadcasts a RA/RS message, it can receive the same RA/RS
   message which was re-broadcasted by one of its neighbors.

   In this draft, we define the scope-extended Router Advertisement/
   Solicitation message for announcing/solicitating the MBR address in 
   the connected MANET. In the scope-extended RA/RS message, a new 
   message field, the sequence number field, is defined so that 
   duplicate RA/RS messages can be detected based on the sequence 
   number and the IP address included in the message.


2. Terminology

   No new terminology is defined in this draft.


Jaehwoon Lee, et al.         Expires April 29, 2009            [Page 3]

Internet-Draft     Scope-Extended Router Advertisement     Oct. 30, 2008


3. Message Format

3.1 IPv4

   In IPv4, the scope-extended router solicitation/advertisement 
   information is included in the ICMP message [2].
	
3.1.1 ICMP Scope-Extended Router Solicitation Message

	
       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |     Type      |     Code      |           Checksum            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |Sequence Number| Cur hop limit |         Reserved              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                        Originator Address                     |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


   IP Fields:

      Source Address        The IP address configured at the MANET
			                      interface of the MANET router (MR) sending 
			                      this message.
			    
      Destination Address   224.0.0.1 or 255.255.255.255

      Time-to-Live          1


   ICMP Fields:

      Type                  TBD

      Code                  0

      Sequence Number	      This number is increased by 1 whenever the 
                            originating MR sends a scope-extended RS 
                            message. The sequence number and the 
                            originator address (see below) are used for 
                            the message duplication check.



Jaehwoon Lee, et al.         Expires April 29, 2009            [Page 4]

Internet-Draft     Scope-Extended Router Advertisement     Oct. 30, 2008


      Cur Hop Limit		      Initially set to 255. An intermediate route 
                            reduces this value by 1 before 
                            rebroadcasting it. If the reduced value is 
                            0, this message is silently discarded.

      Reserved              Sent as 0; ignored on reception.
	
      Originator Address    The IP address assigned to the MANET
			                      interface of the MR that originates the
			                      message.

3.1.2 ICMP Scope-Extended Router Advertisement Message

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |     Type      |     Code      |           Checksum            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |Sequence Number| Cur Hop Limit | Prefix Length |   Reserved    |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |   Reserved                    |           Lifetime            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                          MBR Address                          |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


   IP Fields:

      Source Address        The IP address configured at the MANET 
                            interface of the MR sending this message.
			                      If this message is sent as a reply to a 
			                      scope-extended RS message, this field has
			                      the IP address configured at the MANET 
			                      interface of the MBR originating this 
			                      scope-extended RA message. If it is a 
			                      proactively sent message, this field has the 
			                      IP address configured at the MANET interface 
			                      of the MR sending this message.
			    
      Destination Address   The IP address of the MANET interface of the 
                            MR originating the scope-extended RS message,
                            if this scope-extended RA message is sent as 
                            a reply to the scope-extended RS message. 
                            Otherwise, set to the broadcast address.


Jaehwoon Lee, et al.         Expires April 29, 2009            [Page 5]

Internet-Draft     Scope-Extended Router Advertisement     Oct. 30, 2008


      Time-to-Live          1 if the Destination Address is the 
                            broadcast address; at least 1, otherwise.


   ICMP Fields:

      Type                  TBD

      Code                  0

      Sequence Number	      If this message is sent as a reply to a
                            scope-extended RS message, this field is
                            set to the Sequence Number in the scope-
                            extended RS message. Otherwise, i.e., if
                            this message is sent proactively, the value
                            of this field is increased by 1 by the MBR.
                            The sequence number and the MBR address are
                            used for the message duplication check.

      Cur hop limit		      Initially set to 255. An intermediate route
                            reduces this value by 1 before 
                            rebroadcasting it. If the reduced value is 
                            0, this message is silently discarded. 

      Prefix Length	        The prefix length of the IPv4 address 
                            assigned to the MANET interface of the MBR.


      MBR Address           The IP address assigned to the MANET inter-
                            face of the MBR originating this message.
 
3.2 IPv6

   In IPv6, the scope-extended router solicitation/advertisement 
   information is defined as a part of the neighbor discovery in [3].


3.2.1 ICMP Scope-Extended Router Solicitation Message








Jaehwoon Lee, et al.         Expires April 29, 2009            [Page 6]

Internet-Draft     Scope-Extended Router Advertisement     Oct. 30, 2008


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |     Type      |     Code      |           Checksum            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |Sequence Number| Cur Hop Limit |         Reserved              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                                                               |
      |                    Originator Address                         |
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   IP Fields:

      Source Address        The IP address configured at the MANET
			                      interface of the MR sending this message.

      Destination Address   The all-routers multicast address or the 
                            all-nodes multicast address.

      Time-to-Live          1


   ICMP Fields:

      Type                  TBD

      Code                  0

      Sequence Number	      This number is increased by 1 whenever the
                            originating MR sends a RS message. The 
                            sequence number and the originator address 
                            are used for the message duplication check.

      Cur Hop Limit		      Initially set to 255. An intermediate route 
                            reduces this value by 1 before 
                            rebroadcasting it. If the reduced value is 
                            0, this message is silently discarded.

      Originator Address    The IP address assigned to the MANET
                            interface of the MR originating the message.


3.2.2 ICMP Scope-Extended Router Advertisement Message


Jaehwoon Lee, et al.         Expires April 29, 2009            [Page 7]

Internet-Draft     Scope-Extended Router Advertisement     Oct. 30, 2008


      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |     Type      |     Code      |          Checksum             |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |Sequence Number| Prefix Length |          Reserved             |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     | Cur Hop Limit |M|O| Reserved  |       Router Lifetime         |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                         Reachable Time                        |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                          Retrans Timer                        |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                                                               |
     |                          MBR Address                          |
     |                                                               |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   IP Fields:

      Source Address        If this message is sent as a reply to a 
                            scope-extended RS message, this field has	
                            the IP address configured at the MANET 
                            interface of the MBR originating this 
                            message. If this messages is a proactively 
                            sent message, this field has the IP address 
                            configured at the MANET interface of the MR 
                            sending this message.

      Destination Address   Typically the Source Address of the invoking
                            scope-extended Router Solicitation or the 
                            all-nodes multicast address.

      Hop Limit      1      if the Destination Address is the 
                            all-routers multicast address or the 
                            all-nodes multicast address; 
                            at least 1, otherwise.


   ICMP Fields:

      Type           TBD

      Code           0


Jaehwoon Lee, et al.         Expires April 29, 2009            [Page 8]

Internet-Draft     Scope-Extended Router Advertisement     Oct. 30, 2008


      Sequence Number	      If this message is sent as a reply to a
                            scope-extended RS message, this field is
                            set to the Sequence Number in the scope-
                            extended RS message. Otherwise, i.e., if
                            this message is sent proactively, the value
                            of this field is increased by 1 by the MBR.
                            The sequence number and the MBR address are
                            used for the message duplication check.

      Prefix Length	        The prefix length of the IPv6 address 
                            assigned to the MANET interface of the MBR.

      Cur Hop Limit		      Initially set to 255. An intermediate route 
                            reduces this value by 1 before 
                            rebroadcasting it. If the reduced value is 
                            0, this message is silently discarded.

      MBR Address           The IPv6 address configured at the MANET 
                            interface of the MBR originating this 
                            message.



4. Security Consideration

   There is no special security considerations in this draft.


5. IANA Considerations

   This draft document defines a new type in the ICMP message. An Type
   value for the scope-extended Router Discovery message for MANET must 
   be assigned by IANA.

   
References

   [1] E. Baccelli, "Address Autoconfiguration for MANET: Terminology
       and Problem Statement", draft-ietf-autoconf-statement-04,
       Work in progress, Feb. 2008.
         
   [2] S. Deering, "ICMP Router Discovery Messages", RFC 1256, 
       Sep. 1991.



Jaehwoon Lee, et al.         Expires April 29, 2009            [Page 9]

Internet-Draft     Scope-Extended Router Advertisement     Oct. 30, 2008

   
   [3] T. Narten, E. Nordmark, W. Simpson and H. Soliman, "Neighbor
       Discovery for IP version 6 (IPv6)", RFC 3861, Sep. 2007.
   
   [4] R. Wakikawa, J. Malinen, C. Perkins, A. NIlsson and A. Tuominen,
       Global connectivity for IPv6 Mobile Ad Hoc Networks", Work in
       progress, Oct. 2003.


Author's Addresses

   Jaehwoon Lee 
   Dongguk University
   26, 3-ga Pil-dong, Chung-gu
   Seoul 100-715, KOREA  
   Email: jaehwoon@dongguk.edu

   Sanghyun Ahn
   University of Seoul
   90, Cheonnong-dong, Tongdaemun-gu
   Seoul 130-743, KOREA
   Email: ahn@uos.ac.kr

   Younghan Kim
   Soongsil University
   11F Hyungnam Engineering Bldg. 317, Sangdo-Dong,
   Dongjak-Gu, Seoul 156-743 Korea
   E-main: yhkim@dcn.ssu.ac.kr   

   Yuseon Kim 
   KT
   17 Woomyeon-dong, Seocho-gu
   Seoul 137-792, KOREA  
   Email: yseonkim@kt.co.kr

   Sangeon Kim 
   KT
   17 Woomyeon-dong, Seocho-gu
   Seoul 137-792, KOREA  
   Email: sekim@kt.co.kr







Jaehwoon Lee, et al.         Expires April 29, 2009            [Page 10]

Internet-Draft     Scope-Extended Router Advertisement     Oct. 30, 2008


Full Copyright Statement

   Copyright (C) The IETF Trust (2008).

   This document is subject to the rights, licenses and restrictions
   contained in BCP 78, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND
   THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS
   OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF
   THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in BCP 78 and BCP 79.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   http://www.ietf.org/ipr.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.

Acknowledgment

   Funding for the RFC Editor function is provided by the IETF
   Administrative Support Activity (IASA).

Jaehwoon Lee, et al.         Expires Jan. 4, 2009            [Page 11]
