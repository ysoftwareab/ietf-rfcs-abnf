<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>HTTP/1.1, part 4: Conditional Requests</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.1.1" rel="Chapter" title="1.1 Requirements">
<link href="#rfc.section.1.2" rel="Chapter" title="1.2 Syntax Notation">
<link href="#rfc.section.2" rel="Chapter" title="2 Resource State Metadata (Validators)">
<link href="#rfc.section.2.1" rel="Chapter" title="2.1 Last-Modified">
<link href="#rfc.section.2.1.1" rel="Chapter" title="2.1.1 Generation">
<link href="#rfc.section.2.1.2" rel="Chapter" title="2.1.2 Comparison">
<link href="#rfc.section.2.2" rel="Chapter" title="2.2 ETag">
<link href="#rfc.section.2.2.1" rel="Chapter" title="2.2.1 Generation">
<link href="#rfc.section.2.2.2" rel="Chapter" title="2.2.2 Weak versus Strong">
<link href="#rfc.section.2.2.3" rel="Chapter" title="2.2.3 Comparison">
<link href="#rfc.section.2.2.4" rel="Chapter" title="2.2.4 Rules for When to Use Entity-tags and Last-Modified Dates">
<link href="#rfc.section.2.2.5" rel="Chapter" title="2.2.5 Example: Entity-tags varying on Content-Negotiated Resources">
<link href="#rfc.section.3" rel="Chapter" title="3 Precondition Header Fields">
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 If-Match">
<link href="#rfc.section.3.2" rel="Chapter" title="3.2 If-None-Match">
<link href="#rfc.section.3.3" rel="Chapter" title="3.3 If-Modified-Since">
<link href="#rfc.section.3.4" rel="Chapter" title="3.4 If-Unmodified-Since">
<link href="#rfc.section.3.5" rel="Chapter" title="3.5 If-Range">
<link href="#rfc.section.4" rel="Chapter" title="4 Status Code Definitions">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 304 Not Modified">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 412 Precondition Failed">
<link href="#rfc.section.5" rel="Chapter" title="5 IANA Considerations">
<link href="#rfc.section.5.1" rel="Chapter" title="5.1 Status Code Registration">
<link href="#rfc.section.5.2" rel="Chapter" title="5.2 Header Field Registration">
<link href="#rfc.section.6" rel="Chapter" title="6 Security Considerations">
<link href="#rfc.section.7" rel="Chapter" title="7 Acknowledgments">
<link href="#rfc.references" rel="Chapter" title="8 References">
<link href="#rfc.references.1" rel="Chapter" title="8.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="8.2 Informative References">
<link href="#rfc.appendix.Appendix%20A" rel="Chapter" title="Appendix A Changes from RFC 2616">
<link href="#rfc.appendix.Appendix%20B" rel="Chapter" title="Appendix B Collected ABNF">
<link href="#rfc.appendix.Appendix%20C" rel="Chapter" title="Appendix C Change Log (to be removed by RFC Editor before publication)">
<link href="#rfc.appendix.Appendix%20C.1" rel="Chapter" title="Appendix C.1 Since RFC 2616">
<link href="#rfc.appendix.Appendix%20C.2" rel="Chapter" title="Appendix C.2 Since draft-ietf-httpbis-p4-conditional-00">
<link href="#rfc.appendix.Appendix%20C.3" rel="Chapter" title="Appendix C.3 Since draft-ietf-httpbis-p4-conditional-01">
<link href="#rfc.appendix.Appendix%20C.4" rel="Chapter" title="Appendix C.4 Since draft-ietf-httpbis-p4-conditional-02">
<link href="#rfc.appendix.Appendix%20C.5" rel="Chapter" title="Appendix C.5 Since draft-ietf-httpbis-p4-conditional-03">
<link href="#rfc.appendix.Appendix%20C.6" rel="Chapter" title="Appendix C.6 Since draft-ietf-httpbis-p4-conditional-04">
<link href="#rfc.appendix.Appendix%20C.7" rel="Chapter" title="Appendix C.7 Since draft-ietf-httpbis-p4-conditional-05">
<link href="#rfc.appendix.Appendix%20C.8" rel="Chapter" title="Appendix C.8 Since draft-ietf-httpbis-p4-conditional-06">
<link href="#rfc.appendix.Appendix%20C.9" rel="Chapter" title="Appendix C.9 Since draft-ietf-httpbis-p4-conditional-07">
<link href="#rfc.appendix.Appendix%20C.10" rel="Chapter" title="Appendix C.10 Since draft-ietf-httpbis-p4-conditional-08">
<link href="#rfc.appendix.Appendix%20C.11" rel="Chapter" title="Appendix C.11 Since draft-ietf-httpbis-p4-conditional-09">
<link href="#rfc.appendix.Appendix%20C.12" rel="Chapter" title="Appendix C.12 Since draft-ietf-httpbis-p4-conditional-10">
<link href="#rfc.appendix.Appendix%20C.13" rel="Chapter" title="Appendix C.13 Since draft-ietf-httpbis-p4-conditional-11">
<link href="#rfc.appendix.Appendix%20C.14" rel="Chapter" title="Appendix C.14 Since draft-ietf-httpbis-p4-conditional-12">
<link href="#rfc.appendix.Appendix%20C.15" rel="Chapter" title="Appendix C.15 Since draft-ietf-httpbis-p4-conditional-13">
<link href="#rfc.index" rel="Chapter">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="The Hypertext Transfer Protocol (HTTP) is an application-level protocol for distributed, collaborative, hypermedia information systems. HTTP has been in use by the World Wide Web global information initiative since 1990. This document is Part 4 of the seven-part specification that defines the protocol referred to as "HTTP/1.1" and, taken together, obsoletes RFC 2616.  Part 4 defines request header fields for indicating conditional requests and the rules for constructing responses to those requests.  " />
  <meta name="description" content="The Hypertext Transfer Protocol (HTTP) is an application-level protocol for distributed, collaborative, hypermedia information systems. HTTP has been in use by the World Wide Web global information initiative since 1990. This document is Part 4 of the seven-part specification that defines the protocol referred to as "HTTP/1.1" and, taken together, obsoletes RFC 2616.  Part 4 defines request header fields for indicating conditional requests and the rules for constructing responses to those requests.  " />
  <meta name="keywords" content="" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">HTTPbis Working Group</td>
<td class="right">R. Fielding, Ed.</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">Adobe</td>
</tr>
<tr>
<td class="left">Obsoletes: 2616 (if approved)</td>
<td class="right">J. Gettys</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">Alcatel-Lucent</td>
</tr>
<tr>
<td class="left">Expires: October 20, 2011</td>
<td class="right">J. Mogul</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">HP</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">H. Frystyk</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Microsoft</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">L. Masinter</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Adobe</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">P. Leach</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Microsoft</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">T. Berners-Lee</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">W3C/MIT</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Y. Lafon, Ed.</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">W3C</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">J. F. Reschke, Ed.</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">greenbytes</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">April 18, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">HTTP/1.1, part 4: Conditional Requests<br />
  <span class="filename">draft-ietf-httpbis-p4-conditional-14</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>The Hypertext Transfer Protocol (HTTP) is an application-level protocol for distributed, collaborative, hypermedia information systems. HTTP has been in use by the World Wide Web global information initiative since 1990. This document is Part 4 of the seven-part specification that defines the protocol referred to as "HTTP/1.1" and, taken together, obsoletes RFC 2616.  Part 4 defines request header fields for indicating conditional requests and the rules for constructing responses to those requests.  </p>
<h1><a>Editorial Note (To be removed by RFC Editor)</a></h1>
<p>Discussion of this draft should take place on the HTTPBIS working group mailing list (ietf-http-wg@w3.org), which is archived at <a href="http://lists.w3.org/Archives/Public/ietf-http-wg/">http://lists.w3.org/Archives/Public/ietf-http-wg/</a>.  </p>
<p>The current issues list is at <a href="http://tools.ietf.org/wg/httpbis/trac/report/3">http://tools.ietf.org/wg/httpbis/trac/report/3</a> and related documents (including fancy diffs) can be found at <a href="http://tools.ietf.org/wg/httpbis/">http://tools.ietf.org/wg/httpbis/</a>.  </p>
<p>The changes in this draft are summarized in <a href="#changes.since.13">Appendix Appendix C.15</a>.  </p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on October 20, 2011.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>
<p>This document may contain material from IETF Documents or IETF Contributions published or made publicly available before November 10, 2008.  The person(s) controlling the copyright in some of this material may not have granted the IETF Trust the right to allow modifications of such material outside the IETF Standards Process. Without obtaining an adequate license from the person(s) controlling the copyright in such materials, this document may not be modified outside the IETF Standards Process, and derivative works of it may not be created outside the IETF Standards Process, except to format it for publication as an RFC or to translate it into languages other than English.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>1.1.   <a href="#rfc.section.1.1">Requirements</a>
</li>
<li>1.2.   <a href="#rfc.section.1.2">Syntax Notation</a>
</li>
<li>2.   <a href="#rfc.section.2">Resource State Metadata (Validators)</a>
</li>
<li>2.1.   <a href="#rfc.section.2.1">Last-Modified</a>
</li>
<li>2.1.1.   <a href="#rfc.section.2.1.1">Generation</a>
</li>
<li>2.1.2.   <a href="#rfc.section.2.1.2">Comparison</a>
</li>
<li>2.2.   <a href="#rfc.section.2.2">ETag</a>
</li>
<li>2.2.1.   <a href="#rfc.section.2.2.1">Generation</a>
</li>
<li>2.2.2.   <a href="#rfc.section.2.2.2">Weak versus Strong</a>
</li>
<li>2.2.3.   <a href="#rfc.section.2.2.3">Comparison</a>
</li>
<li>2.2.4.   <a href="#rfc.section.2.2.4">Rules for When to Use Entity-tags and Last-Modified Dates</a>
</li>
<li>2.2.5.   <a href="#rfc.section.2.2.5">Example: Entity-tags varying on Content-Negotiated Resources</a>
</li>
<li>3.   <a href="#rfc.section.3">Precondition Header Fields</a>
</li>
<li>3.1.   <a href="#rfc.section.3.1">If-Match</a>
</li>
<li>3.2.   <a href="#rfc.section.3.2">If-None-Match</a>
</li>
<li>3.3.   <a href="#rfc.section.3.3">If-Modified-Since</a>
</li>
<li>3.4.   <a href="#rfc.section.3.4">If-Unmodified-Since</a>
</li>
<li>3.5.   <a href="#rfc.section.3.5">If-Range</a>
</li>
<li>4.   <a href="#rfc.section.4">Status Code Definitions</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">304 Not Modified</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">412 Precondition Failed</a>
</li>
<li>5.   <a href="#rfc.section.5">IANA Considerations</a>
</li>
<li>5.1.   <a href="#rfc.section.5.1">Status Code Registration</a>
</li>
<li>5.2.   <a href="#rfc.section.5.2">Header Field Registration</a>
</li>
<li>6.   <a href="#rfc.section.6">Security Considerations</a>
</li>
<li>7.   <a href="#rfc.section.7">Acknowledgments</a>
</li>
<li>8.   <a href="#rfc.references">References</a>
</li>
<li>8.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>8.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li>Appendix A.   <a href="#rfc.appendix.Appendix%20A">Changes from RFC 2616</a>
</li>
<li>Appendix B.   <a href="#rfc.appendix.Appendix%20B">Collected ABNF</a>
</li>
<li>Appendix C.   <a href="#rfc.appendix.Appendix%20C">Change Log (to be removed by RFC Editor before publication)</a>
</li>
<li>Appendix C.1.   <a href="#rfc.appendix.Appendix%20C.1">Since RFC 2616</a>
</li>
<li>Appendix C.2.   <a href="#rfc.appendix.Appendix%20C.2">Since draft-ietf-httpbis-p4-conditional-00</a>
</li>
<li>Appendix C.3.   <a href="#rfc.appendix.Appendix%20C.3">Since draft-ietf-httpbis-p4-conditional-01</a>
</li>
<li>Appendix C.4.   <a href="#rfc.appendix.Appendix%20C.4">Since draft-ietf-httpbis-p4-conditional-02</a>
</li>
<li>Appendix C.5.   <a href="#rfc.appendix.Appendix%20C.5">Since draft-ietf-httpbis-p4-conditional-03</a>
</li>
<li>Appendix C.6.   <a href="#rfc.appendix.Appendix%20C.6">Since draft-ietf-httpbis-p4-conditional-04</a>
</li>
<li>Appendix C.7.   <a href="#rfc.appendix.Appendix%20C.7">Since draft-ietf-httpbis-p4-conditional-05</a>
</li>
<li>Appendix C.8.   <a href="#rfc.appendix.Appendix%20C.8">Since draft-ietf-httpbis-p4-conditional-06</a>
</li>
<li>Appendix C.9.   <a href="#rfc.appendix.Appendix%20C.9">Since draft-ietf-httpbis-p4-conditional-07</a>
</li>
<li>Appendix C.10.   <a href="#rfc.appendix.Appendix%20C.10">Since draft-ietf-httpbis-p4-conditional-08</a>
</li>
<li>Appendix C.11.   <a href="#rfc.appendix.Appendix%20C.11">Since draft-ietf-httpbis-p4-conditional-09</a>
</li>
<li>Appendix C.12.   <a href="#rfc.appendix.Appendix%20C.12">Since draft-ietf-httpbis-p4-conditional-10</a>
</li>
<li>Appendix C.13.   <a href="#rfc.appendix.Appendix%20C.13">Since draft-ietf-httpbis-p4-conditional-11</a>
</li>
<li>Appendix C.14.   <a href="#rfc.appendix.Appendix%20C.14">Since draft-ietf-httpbis-p4-conditional-12</a>
</li>
<li>Appendix C.15.   <a href="#rfc.appendix.Appendix%20C.15">Since draft-ietf-httpbis-p4-conditional-13</a>
</li>
<li><a href="#rfc.index">Index</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> <a href="#introduction" id="introduction">Introduction</a>
</h1>
<p id="rfc.section.1.p.1">This document defines the HTTP/1.1 conditional request mechanisms, including both response metadata that can be used to indicate or observe changes to resource state and request header fields that specify preconditions to be checked before performing the action given by the request method.  Conditional GET requests are the most efficient mechanism for HTTP cache updates <a href="#Part6">[Part6]</a>.  Conditionals can also be applied to state-changing methods, such as PUT and DELETE, to prevent the "lost update" problem: one client accidentally overwriting the work of another client that has been acting in parallel.  </p>
<p id="rfc.section.1.p.2">Conditional request preconditions are based on the state of the target resource as a whole (its current value set) or the state as observed in a previously obtained representation (one value in that set).  A resource might have multiple current representations, each with its own observable state.  The conditional request mechanisms assume that the mapping of requests to corresponding representations will be consistent over time if the server intends to take advantage of conditionals.  Regardless, if the mapping is inconsistent and the server is unable to select the appropriate representation, then no harm will result when the precondition evaluates to false.  </p>
<p><a name="index.selected%20representation"></a> We use the term "selected representation" to refer to the current representation of the target resource that would have been selected in a successful response if the same request had used the method GET and had excluded all of the conditional request header fields.  The conditional request preconditions are evaluated by comparing the values provided in the request header fields to the current metadata for the selected representation.  </p>
<h1 id="rfc.section.1.1">
<a href="#rfc.section.1.1">1.1.</a> <a href="#intro.requirements" id="intro.requirements">Requirements</a>
</h1>
<p id="rfc.section.1.1.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">[RFC2119]</a>.  </p>
<p id="rfc.section.1.1.p.2">An implementation is not compliant if it fails to satisfy one or more of the "MUST" or "REQUIRED" level requirements for the protocols it implements. An implementation that satisfies all the "MUST" or "REQUIRED" level and all the "SHOULD" level requirements for its protocols is said to be "unconditionally compliant"; one that satisfies all the "MUST" level requirements but not all the "SHOULD" level requirements for its protocols is said to be "conditionally compliant".  </p>
<h1 id="rfc.section.1.2">
<a href="#rfc.section.1.2">1.2.</a> <a href="#notation" id="notation">Syntax Notation</a>
</h1>
<p id="rfc.section.1.2.p.1">This specification uses the ABNF syntax defined in Section 1.2 of <a href="#Part1">[Part1]</a> (which extends the syntax defined in <a href="#RFC5234">[RFC5234]</a> with a list rule).  <a href="#collected.abnf">Appendix Appendix B</a> shows the collected ABNF, with the list rule expanded.  </p>
<p id="rfc.section.1.2.p.2">The following core rules are included by reference, as defined in <a href="#RFC5234">[RFC5234]</a>, Appendix B.1: ALPHA (letters), CR (carriage return), CRLF (CR LF), CTL (controls), DIGIT (decimal 0-9), DQUOTE (double quote), HEXDIG (hexadecimal 0-9/A-F/a-f), LF (line feed), OCTET (any 8-bit sequence of data), SP (space), VCHAR (any visible USASCII character), and WSP (whitespace).  </p>
<p id="rfc.section.1.2.p.3">The ABNF rules below are defined in other parts: </p>
<div id="#rfc.figure.1"></div>
<pre>
  quoted-string = &lt;quoted-string, defined in [Part1], Section 1.2.2&gt;
  OWS           = &lt;OWS, defined in [Part1], Section 1.2.2&gt;
  HTTP-date     = &lt;HTTP-date, defined in [Part1], Section 6.1&gt;
</pre>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> <a href="#resource.metadata" id="resource.metadata">Resource State Metadata (Validators)</a>
</h1>
<p id="rfc.section.2.p.1">This specification defines two forms of metadata that are commonly used to observe resource state and test for preconditions: modification dates and opaque entity tags.  Additional metadata that reflects resource state has been defined by various extensions of HTTP, such as WebDAV <a href="#RFC4918">[RFC4918]</a>, that are beyond the scope of this specification.  A resource metadata value is referred to as a "validator" when it is used within a precondition.  </p>
<h1 id="rfc.section.2.1">
<a href="#rfc.section.2.1">2.1.</a> <a href="#header.last-modified" id="header.last-modified">Last-Modified</a>
</h1>
<p id="rfc.section.2.1.p.1">The "Last-Modified" header field indicates the date and time at which the origin server believes the selected representation was last modified.  </p>
<div id="#rfc.figure.2"></div>
<pre>
  Last-Modified = HTTP-date
</pre>
<p id="rfc.section.2.1.p.2">An example of its use is </p>
<div id="#rfc.figure.3"></div>
<pre>
  Last-Modified: Tue, 15 Nov 1994 12:45:26 GMT
</pre>
<h1 id="rfc.section.2.1.1">
<a href="#rfc.section.2.1.1">2.1.1.</a> <a href="#lastmod.generation" id="lastmod.generation">Generation</a>
</h1>
<p id="rfc.section.2.1.1.p.1">Origin servers SHOULD send Last-Modified for any selected representation for which a last modification date can be reasonably and consistently determined, since its use in conditional requests and evaluating cache freshness (<a href="#Part6">[Part6]</a>) results in a substantial reduction of HTTP traffic on the Internet and can be a significant factor in improving service scalability and reliability.  </p>
<p id="rfc.section.2.1.1.p.2">A representation is typically the sum of many parts behind the resource interface.  The last-modified time would usually be the most recent time that any of those parts were changed.  How that value is determined for any given resource is an implementation detail beyond the scope of this specification.  What matters to HTTP is how recipients of the Last-Modified header field can use its value to make conditional requests and test the validity of locally cached responses.  </p>
<p id="rfc.section.2.1.1.p.3">An origin server SHOULD obtain the Last-Modified value of the representation as close as possible to the time that it generates the Date field-value for its response. This allows a recipient to make an accurate assessment of the representation's modification time, especially if the representation changes near the time that the response is generated.  </p>
<p id="rfc.section.2.1.1.p.4">An origin server with a clock MUST NOT send a Last-Modified date that is later than the server's time of message origination (Date).  If the last modification time is derived from implementation-specific metadata that evaluates to some time in the future, according to the origin server's clock, then the origin server MUST replace that value with the message origination date. This prevents a future modification date from having an adverse impact on cache validation.  </p>
<h1 id="rfc.section.2.1.2">
<a href="#rfc.section.2.1.2">2.1.2.</a> <a href="#lastmod.comparison" id="lastmod.comparison">Comparison</a>
</h1>
<p id="rfc.section.2.1.2.p.1">A Last-Modified time, when used as a validator in a request, is implicitly weak unless it is possible to deduce that it is strong, using the following rules: </p>

<ul>
<li>The validator is being compared by an origin server to the actual current validator for the representation and,</li>
<li>That origin server reliably knows that the associated representation did not change twice during the second covered by the presented validator.</li>
</ul>

<p> </p>
<p id="rfc.section.2.1.2.p.2">or </p>

<ul>
<li>The validator is about to be used by a client in an If-Modified-Since or If-Unmodified-Since header field, because the client has a cache entry for the associated representation, and</li>
<li>That cache entry includes a Date value, which gives the time when the origin server sent the original response, and</li>
<li>The presented Last-Modified time is at least 60 seconds before the Date value.</li>
</ul>

<p> </p>
<p id="rfc.section.2.1.2.p.3">or </p>

<ul>
<li>The validator is being compared by an intermediate cache to the validator stored in its cache entry for the representation, and</li>
<li>That cache entry includes a Date value, which gives the time when the origin server sent the original response, and</li>
<li>The presented Last-Modified time is at least 60 seconds before the Date value.</li>
</ul>

<p> </p>
<p id="rfc.section.2.1.2.p.4">This method relies on the fact that if two different responses were sent by the origin server during the same second, but both had the same Last-Modified time, then at least one of those responses would have a Date value equal to its Last-Modified time. The arbitrary 60-second limit guards against the possibility that the Date and Last-Modified values are generated from different clocks, or at somewhat different times during the preparation of the response. An implementation MAY use a value larger than 60 seconds, if it is believed that 60 seconds is too short.  </p>
<h1 id="rfc.section.2.2">
<a href="#rfc.section.2.2">2.2.</a> <a href="#header.etag" id="header.etag">ETag</a>
</h1>
<p id="rfc.section.2.2.p.1">The ETag header field provides the current entity-tag for the selected representation.  An entity-tag is an opaque validator for differentiating between multiple representations of the same resource, regardless of whether those multiple representations are due to resource state changes over time, content negotiation resulting in multiple representations being valid at the same time, or both. An entity-tag consists of an opaque quoted string, possibly prefixed by a weakness indicator.  </p>
<div id="#rfc.figure.4"></div>
<pre>
  ETag       = entity-tag

  entity-tag = [ weak ] opaque-tag
  weak       = %x57.2F ; "W/", case-sensitive
  opaque-tag = quoted-string
</pre>
<p id="rfc.section.2.2.p.2">An entity-tag can be more reliable for validation than a modification date in situations where it is inconvenient to store modification dates, where the one-second resolution of HTTP date values is not sufficient, or where modification dates are not consistently maintained.  </p>
<div id="#rfc.figure.5"></div>
<p>Examples: </p>
<pre>
  ETag: "xyzzy"
  ETag: W/"xyzzy"
  ETag: ""
</pre>
<h1 id="rfc.section.2.2.1">
<a href="#rfc.section.2.2.1">2.2.1.</a> <a href="#entity.tag.generation" id="entity.tag.generation">Generation</a>
</h1>
<p id="rfc.section.2.2.1.p.1">The principle behind entity-tags is that only the service author knows the implementation of a resource well enough to select the most accurate and efficient validation mechanism for that resource, and that any such mechanism can be mapped to a simple sequence of octets for easy comparison.  Since the value is opaque, there is no need for the client to be aware of how each entity-tag is constructed.  </p>
<p id="rfc.section.2.2.1.p.2">For example, a resource that has implementation-specific versioning applied to all changes might use an internal revision number, perhaps combined with a variance identifier for content negotiation, to accurately differentiate between representations.  Other implementations might use a stored hash of representation content, a combination of various filesystem attributes, or a modification timestamp that has sub-second resolution.  </p>
<p id="rfc.section.2.2.1.p.3">Origin servers SHOULD send ETag for any selected representation for which detection of changes can be reasonably and consistently determined, since the entity-tag's use in conditional requests and evaluating cache freshness (<a href="#Part6">[Part6]</a>) can result in a substantial reduction of HTTP network traffic and can be a significant factor in improving service scalability and reliability.  </p>
<h1 id="rfc.section.2.2.2">
<a href="#rfc.section.2.2.2">2.2.2.</a> <a href="#weak.and.strong.validators" id="weak.and.strong.validators">Weak versus Strong</a>
</h1>
<p id="rfc.section.2.2.2.p.1">Since both origin servers and caches will compare two validators to decide if they indicate the same or different representations, one normally would expect that if the representation (including both representation header fields and representation body) changes in any way, then the associated validator would change as well. If this is true, then we call that validator a "strong validator".  One example of a strong validator is an integer that is incremented in stable storage every time a representation is changed.  </p>
<p id="rfc.section.2.2.2.p.2">However, there might be cases when a server prefers to change the validator only when it desires cached representations to be invalidated.  For example, the representation of a weather report that changes in content every second, based on dynamic measurements, might be grouped into sets of equivalent representations (from the origin server's perspective) in order to allow cached representations to be valid for a reasonable period of time (perhaps adjusted dynamically based on server load or weather quality).  A validator that does not always change when the representation changes is a "weak validator".  </p>
<p id="rfc.section.2.2.2.p.3">One can think of a strong validator as part of an identifier for a specific representation, whereas a weak validator is part of an identifier for a set of equivalent representations (where this notion of equivalence is entirely governed by the origin server and beyond the scope of this specification).  </p>
<p id="rfc.section.2.2.2.p.4">An entity-tag is normally a strong validator, but the protocol provides a mechanism to tag an entity-tag as "weak".  </p>

<ul class="empty">
<li>A representation's modification time, if defined with only one-second resolution, could be a weak validator, since it is possible that the representation might be modified twice during a single second.  </li>
<li>Support for weak validators is optional. However, weak validators allow for more efficient caching of equivalent objects; for example, a hit counter on a site is probably good enough if it is updated every few days or weeks, and any value during that period is likely "good enough" to be equivalent.  </li>
</ul>

<p> </p>
<p id="rfc.section.2.2.2.p.5">A strong entity-tag MUST change whenever the associated representation changes in any way. A weak entity-tag SHOULD change whenever the origin server considers prior representations to be unacceptable as a substitute for the current representation. In other words, a weak entity tag SHOULD change whenever the origin server wants caches to invalidate old responses.  </p>
<p id="rfc.section.2.2.2.p.6">A "strong entity-tag" MAY be shared by two representations of a resource only if they are equivalent by octet equality.  </p>
<p id="rfc.section.2.2.2.p.7">A "weak entity-tag", indicated by the "W/" prefix, MAY be shared by two representations of a resource. A weak entity-tag can only be used for weak comparison.  </p>
<p id="rfc.section.2.2.2.p.8">Cache entries might persist for arbitrarily long periods, regardless of expiration times.  Thus, a cache might attempt to validate an entry using a validator that it obtained in the distant past.  A strong entity-tag MUST be unique across all versions of all representations associated with a particular resource over time.  However, there is no implication of uniqueness across entity-tags of different resources (i.e., the same entity-tag value might be in use for representations of multiple resources at the same time and does not imply that those representations are equivalent).  </p>
<h1 id="rfc.section.2.2.3">
<a href="#rfc.section.2.2.3">2.2.3.</a> <a href="#entity.tag.comparison" id="entity.tag.comparison">Comparison</a>
</h1>
<p id="rfc.section.2.2.3.p.1">There are two entity-tag comparison functions, depending on whether the comparison context allows the use of weak validators or not: </p>

<ul>
<li>The strong comparison function: in order to be considered equal, both opaque-tags MUST be identical character-by-character, and both MUST NOT be weak.</li>
<li>The weak comparison function: in order to be considered equal, both opaque-tags MUST be identical character-by-character, but either or both of them MAY be tagged as "weak" without affecting the result.</li>
</ul>

<p> </p>
<p id="rfc.section.2.2.3.p.2">A "use" of a validator is either when a client generates a request and includes the validator in a precondition, or when a server compares two validators.  </p>
<p id="rfc.section.2.2.3.p.3">Strong validators are usable in any context. Weak validators are only usable in contexts that do not depend on exact equality of a representation.  For example, either kind is usable for a normal conditional GET.  </p>
<p id="rfc.section.2.2.3.p.4">The example below shows the results for a set of entity-tag pairs, and both the weak and strong comparison function results: </p>
<div id="#rfc.table.1"></div>
<table cellpadding="3" cellspacing="0" class="tt full left">
<thead><tr>
<th class="left">ETag 1</th>
<th class="left">ETag 2</th>
<th class="left">Strong Comparison</th>
<th class="left">Weak Comparison</th>
</tr></thead>
<tbody>
<tr>
<td class="left">W/"1"</td>
<td class="left">W/"1"</td>
<td class="left">no match</td>
<td class="left">match</td>
</tr>
<tr>
<td class="left">W/"1"</td>
<td class="left">W/"2"</td>
<td class="left">no match</td>
<td class="left">no match</td>
</tr>
<tr>
<td class="left">W/"1"</td>
<td class="left">"1"</td>
<td class="left">no match</td>
<td class="left">match</td>
</tr>
<tr>
<td class="left">"1"</td>
<td class="left">"1"</td>
<td class="left">match</td>
<td class="left">match</td>
</tr>
</tbody>
</table>
<p id="rfc.section.2.2.3.p.5">An entity-tag is strong unless it is explicitly tagged as weak.  </p>
<h1 id="rfc.section.2.2.4">
<a href="#rfc.section.2.2.4">2.2.4.</a> <a href="#rules.for.when.to.use.entity.tags.and.last-modified.dates" id="rules.for.when.to.use.entity.tags.and.last-modified.dates">Rules for When to Use Entity-tags and Last-Modified Dates</a>
</h1>
<p id="rfc.section.2.2.4.p.1">We adopt a set of rules and recommendations for origin servers, clients, and caches regarding when various validator types ought to be used, and for what purposes.  </p>
<p id="rfc.section.2.2.4.p.2">HTTP/1.1 origin servers: </p>

<ul>
<li>SHOULD send an entity-tag validator unless it is not feasible to generate one.</li>
<li>MAY send a weak entity-tag instead of a strong entity-tag, if performance considerations support the use of weak entity-tags, or if it is unfeasible to send a strong entity-tag.</li>
<li>SHOULD send a Last-Modified value if it is feasible to send one.</li>
</ul>

<p> </p>
<p id="rfc.section.2.2.4.p.3">In other words, the preferred behavior for an HTTP/1.1 origin server is to send both a strong entity-tag and a Last-Modified value.  </p>
<p id="rfc.section.2.2.4.p.4">HTTP/1.1 clients: </p>

<ul>
<li>MUST use that entity-tag in any cache-conditional request (using If-Match or If-None-Match) if an entity-tag has been provided by the origin server.</li>
<li>SHOULD use the Last-Modified value in non-subrange cache-conditional requests (using If-Modified-Since) if only a Last-Modified value has been provided by the origin server. </li>
<li>MAY use the Last-Modified value in subrange cache-conditional requests (using If-Unmodified-Since) if only a Last-Modified value has been provided by an HTTP/1.0 origin server. The user agent SHOULD provide a way to disable this, in case of difficulty.</li>
<li>SHOULD use both validators in cache-conditional requests if both an entity-tag and a Last-Modified value have been provided by the origin server. This allows both HTTP/1.0 and HTTP/1.1 caches to respond appropriately.</li>
</ul>

<p> </p>
<p id="rfc.section.2.2.4.p.5">An HTTP/1.1 origin server, upon receiving a conditional request that includes both a Last-Modified date (e.g., in an If-Modified-Since or If-Unmodified-Since header field) and one or more entity-tags (e.g., in an If-Match, If-None-Match, or If-Range header field) as cache validators, MUST NOT return a response status code of 304 (Not Modified) unless doing so is consistent with all of the conditional header fields in the request.  </p>
<p id="rfc.section.2.2.4.p.6">An HTTP/1.1 caching proxy, upon receiving a conditional request that includes both a Last-Modified date and one or more entity-tags as cache validators, MUST NOT return a locally cached response to the client unless that cached response is consistent with all of the conditional header fields in the request.  </p>

<ul class="empty">
<li>Note: The general principle behind these rules is that HTTP/1.1 servers and clients ought to transmit as much non-redundant information as is available in their responses and requests.  HTTP/1.1 systems receiving this information will make the most conservative assumptions about the validators they receive.  </li>
<li>HTTP/1.0 clients and caches might ignore entity-tags. Generally, last-modified values received or used by these systems will support transparent and efficient caching, and so HTTP/1.1 origin servers should provide Last-Modified values. In those rare cases where the use of a Last-Modified value as a validator by an HTTP/1.0 system could result in a serious problem, then HTTP/1.1 origin servers should not provide one.  </li>
</ul>

<p> </p>
<h1 id="rfc.section.2.2.5">
<a href="#rfc.section.2.2.5">2.2.5.</a> <a href="#example.entity.tag.vs.conneg" id="example.entity.tag.vs.conneg">Example: Entity-tags varying on Content-Negotiated Resources</a>
</h1>
<p id="rfc.section.2.2.5.p.1">Consider a resource that is subject to content negotiation (Section 5 of <a href="#Part3">[Part3]</a>), and where the representations returned upon a GET request vary based on the Accept-Encoding request header field (Section 6.3 of <a href="#Part3">[Part3]</a>): </p>
<div id="#rfc.figure.6"></div>
<p>&gt;&gt; Request:</p>
<pre>
  GET /index HTTP/1.1
  Host: www.example.com
  Accept-Encoding: gzip
  
  </pre>
<p id="rfc.section.2.2.5.p.2">In this case, the response might or might not use the gzip content coding.  If it does not, the response might look like: </p>
<div id="#rfc.figure.7"></div>
<p>&gt;&gt; Response:</p>
<pre>
  HTTP/1.1 200 OK
  Date: Thu, 26 Mar 2010 00:05:00 GMT
  ETag: "123-a"
  Content-Length: 70
  Vary: Accept-Encoding
  Content-Type: text/plain
  
  Hello World!
  Hello World!
  Hello World!
  Hello World!
  Hello World!
  </pre>
<p id="rfc.section.2.2.5.p.3">An alternative representation that does use gzip content coding would be: </p>
<div id="#rfc.figure.8"></div>
<p>&gt;&gt; Response:</p>
<pre>
  HTTP/1.1 200 OK
  Date: Thu, 26 Mar 2010 00:05:00 GMT
  ETag: "123-b"
  Content-Length: 43
  Vary: Accept-Encoding
  Content-Type: text/plain
  Content-Encoding: gzip
  
  ...binary data...</pre>
<p></p>

<ul class="empty"><li>Note: Content codings are a property of the representation, so therefore an entity-tag of an encoded representation must be distinct from an unencoded representation to prevent conflicts during cache updates and range requests.  In contrast, transfer codings (Section 6.2 of <a href="#Part1">[Part1]</a>) apply only during message transfer and do not require distinct entity-tags.  </li></ul>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> <a href="#header.fields" id="header.fields">Precondition Header Fields</a>
</h1>
<p id="rfc.section.3.p.1">This section defines the syntax and semantics of HTTP/1.1 header fields for applying preconditions on requests.  </p>
<h1 id="rfc.section.3.1">
<a href="#rfc.section.3.1">3.1.</a> <a href="#header.if-match" id="header.if-match">If-Match</a>
</h1>
<p id="rfc.section.3.1.p.1">The "If-Match" header field MAY be used to make a request method conditional on the current existence or value of an entity-tag for one or more representations of the target resource.  If-Match is generally useful for resource update requests, such as PUT requests, as a means for protecting against accidental overwrites when multiple clients are acting in parallel on the same resource (i.e., the "lost update" problem).  An If-Match field-value of "*" places the precondition on the existence of any current representation for the target resource.  </p>
<div id="#rfc.figure.9"></div>
<pre>
  If-Match = "*" / 1#entity-tag
</pre>
<p id="rfc.section.3.1.p.2">If any of the entity-tags listed in the If-Match field value match (as per <a href="#entity.tag.comparison">Section 2.2.3</a>) the entity-tag of the selected representation for the target resource, or if "*" is given and any current representation exists for the target resource, then the server MAY perform the request method as if the If-Match header field was not present.  </p>
<p id="rfc.section.3.1.p.3">If none of the entity-tags match, or if "*" is given and no current representation exists, the server MUST NOT perform the requested method.  Instead, the server MUST respond with the 412 (Precondition Failed) status code.  </p>
<p id="rfc.section.3.1.p.4">If the request would, without the If-Match header field, result in anything other than a 2xx or 412 status code, then the If-Match header field MUST be ignored.  </p>
<p id="rfc.section.3.1.p.5">Examples: </p>
<div id="#rfc.figure.10"></div>
<pre>
  If-Match: "xyzzy"
  If-Match: "xyzzy", "r2d2xxxx", "c3piozzzz"
  If-Match: *
</pre>
<p id="rfc.section.3.1.p.6">The result of a request having both an If-Match header field and either an If-None-Match or an If-Modified-Since header fields is undefined by this specification.  </p>
<h1 id="rfc.section.3.2">
<a href="#rfc.section.3.2">3.2.</a> <a href="#header.if-none-match" id="header.if-none-match">If-None-Match</a>
</h1>
<p id="rfc.section.3.2.p.1">The "If-None-Match" header field MAY be used to make a request method conditional on not matching any of the current entity-tag values for representations of the target resource.  If-None-Match is primarily used in conditional GET requests to enable efficient updates of cached information with a minimum amount of transaction overhead.  A client that has one or more representations previously obtained from the target resource can send If-None-Match with a list of the associated entity-tags in the hope of receiving a 304 response if at least one of those representations matches the selected representation.  </p>
<p id="rfc.section.3.2.p.2">If-None-Match MAY also be used with a value of "*" to prevent an unsafe request method (e.g., PUT) from inadvertently modifying an existing representation of the target resource when the client believes that the resource does not have a current representation.  This is a variation on the "lost update" problem that might arise if more than one client attempts to create an initial representation for the target resource.  </p>
<div id="#rfc.figure.11"></div>
<pre>
  If-None-Match = "*" / 1#entity-tag
</pre>
<p id="rfc.section.3.2.p.3">If any of the entity-tags listed in the If-None-Match field-value match (as per <a href="#entity.tag.comparison">Section 2.2.3</a>) the entity-tag of the selected representation, or if "*" is given and any current representation exists for that resource, then the server MUST NOT perform the requested method.  Instead, if the request method was GET or HEAD, the server SHOULD respond with a 304 (Not Modified) status code, including the cache-related header fields (particularly ETag) of the selected representation that has a matching entity-tag.  For all other request methods, the server MUST respond with a 412 (Precondition Failed) status code.  </p>
<p id="rfc.section.3.2.p.4">If none of the entity-tags match, then the server MAY perform the requested method as if the If-None-Match header field did not exist, but MUST also ignore any If-Modified-Since header field(s) in the request. That is, if no entity-tags match, then the server MUST NOT return a 304 (Not Modified) response.  </p>
<p id="rfc.section.3.2.p.5">If the request would, without the If-None-Match header field, result in anything other than a 2xx or 304 status code, then the If-None-Match header field MUST be ignored. (See <a href="#rules.for.when.to.use.entity.tags.and.last-modified.dates">Section 2.2.4</a> for a discussion of server behavior when both If-Modified-Since and If-None-Match appear in the same request.) </p>
<p id="rfc.section.3.2.p.6">Examples: </p>
<div id="#rfc.figure.12"></div>
<pre>
  If-None-Match: "xyzzy"
  If-None-Match: W/"xyzzy"
  If-None-Match: "xyzzy", "r2d2xxxx", "c3piozzzz"
  If-None-Match: W/"xyzzy", W/"r2d2xxxx", W/"c3piozzzz"
  If-None-Match: *
</pre>
<p id="rfc.section.3.2.p.7">The result of a request having both an If-None-Match header field and either an If-Match or an If-Unmodified-Since header fields is undefined by this specification.  </p>
<h1 id="rfc.section.3.3">
<a href="#rfc.section.3.3">3.3.</a> <a href="#header.if-modified-since" id="header.if-modified-since">If-Modified-Since</a>
</h1>
<p id="rfc.section.3.3.p.1">The "If-Modified-Since" header field MAY be used to make a request method conditional by modification date: if the selected representation has not been modified since the time specified in this field, then do not perform the request method; instead, respond as detailed below.  </p>
<div id="#rfc.figure.13"></div>
<pre>
  If-Modified-Since = HTTP-date
</pre>
<p id="rfc.section.3.3.p.2">An example of the field is: </p>
<div id="#rfc.figure.14"></div>
<pre>
  If-Modified-Since: Sat, 29 Oct 1994 19:43:31 GMT
</pre>
<p id="rfc.section.3.3.p.3">A GET method with an If-Modified-Since header field and no Range header field requests that the selected representation be transferred only if it has been modified since the date given by the If-Modified-Since header field.  The algorithm for determining this includes the following cases: </p>

<ol>
<li>If the request would normally result in anything other than a 200 (OK) status code, or if the passed If-Modified-Since date is invalid, the response is exactly the same as for a normal GET.  A date which is later than the server's current time is invalid.</li>
<li>If the selected representation has been modified since the If-Modified-Since date, the response is exactly the same as for a normal GET.</li>
<li>If the selected representation has not been modified since a valid If-Modified-Since date, the server SHOULD return a 304 (Not Modified) response.</li>
</ol>

<p> </p>
<p id="rfc.section.3.3.p.4">The purpose of this feature is to allow efficient updates of cached information with a minimum amount of transaction overhead.  </p>

<ul class="empty">
<li>Note: The Range header field modifies the meaning of If-Modified-Since; see Section 5.4 of <a href="#Part5">[Part5]</a> for full details.  </li>
<li>Note: If-Modified-Since times are interpreted by the server, whose clock might not be synchronized with the client.  </li>
<li>Note: When handling an If-Modified-Since header field, some servers will use an exact date comparison function, rather than a less-than function, for deciding whether to send a 304 (Not Modified) response. To get best results when sending an If-Modified-Since header field for cache validation, clients are advised to use the exact date string received in a previous Last-Modified header field whenever possible.  </li>
<li>Note: If a client uses an arbitrary date in the If-Modified-Since header field instead of a date taken from the Last-Modified header field for the same request, the client needs to be aware that this date is interpreted in the server's understanding of time.  Unsynchronized clocks and rounding problems, due to the different encodings of time between the client and server, are concerns.  This includes the possibility of race conditions if the document has changed between the time it was first requested and the If-Modified-Since date of a subsequent request, and the possibility of clock-skew-related problems if the If-Modified-Since date is derived from the client's clock without correction to the server's clock. Corrections for different time bases between client and server are at best approximate due to network latency.  </li>
</ul>

<p> </p>
<p id="rfc.section.3.3.p.5">The result of a request having both an If-Modified-Since header field and either an If-Match or an If-Unmodified-Since header fields is undefined by this specification.  </p>
<h1 id="rfc.section.3.4">
<a href="#rfc.section.3.4">3.4.</a> <a href="#header.if-unmodified-since" id="header.if-unmodified-since">If-Unmodified-Since</a>
</h1>
<p id="rfc.section.3.4.p.1">The "If-Unmodified-Since" header field MAY be used to make a request method conditional by modification date: if the selected representation has been modified since the time specified in this field, then the server MUST NOT perform the requested operation and MUST instead respond with the 412 (Precondition Failed) status code.  If the selected representation has not been modified since the time specified in this field, the server SHOULD perform the request method as if the If-Unmodified-Since header field were not present.  </p>
<div id="#rfc.figure.15"></div>
<pre>
  If-Unmodified-Since = HTTP-date
</pre>
<p id="rfc.section.3.4.p.2">An example of the field is: </p>
<div id="#rfc.figure.16"></div>
<pre>
  If-Unmodified-Since: Sat, 29 Oct 1994 19:43:31 GMT
</pre>
<p id="rfc.section.3.4.p.3">If the request normally (i.e., without the If-Unmodified-Since header field) would result in anything other than a 2xx or 412 status code, the If-Unmodified-Since header field SHOULD be ignored.  </p>
<p id="rfc.section.3.4.p.4">If the specified date is invalid, the header field MUST be ignored.  </p>
<p id="rfc.section.3.4.p.5">The result of a request having both an If-Unmodified-Since header field and either an If-None-Match or an If-Modified-Since header fields is undefined by this specification.  </p>
<h1 id="rfc.section.3.5">
<a href="#rfc.section.3.5">3.5.</a> <a href="#header.if-range" id="header.if-range">If-Range</a>
</h1>
<p id="rfc.section.3.5.p.1">The If-Range header field provides a special conditional request mechanism that is similar to If-Match and If-Unmodified-Since but specific to HTTP range requests. If-Range is defined in Section 5.3 of <a href="#Part5">[Part5]</a>.  </p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#status.code.definitions" id="status.code.definitions">Status Code Definitions</a>
</h1>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> <a href="#status.304" id="status.304">304 Not Modified</a>
</h1>
<p id="rfc.section.4.1.p.1">The 304 status code indicates that a conditional GET request has been received and would have resulted in a 200 (OK) response if it were not for the fact that the condition has evaluated to false.  In other words, there is no need for the server to transfer a representation of the target resource because the client's request indicates that it already has a valid representation, as indicated by the 304 response header fields, and is therefore redirecting the client to make use of that stored representation as if it were the payload of a 200 response.  The 304 response MUST NOT contain a message-body, and thus is always terminated by the first empty line after the header fields.  </p>
<p id="rfc.section.4.1.p.2">A 304 response MUST include a Date header field (Section 9.3 of <a href="#Part1">[Part1]</a>) unless its omission is required by Section 9.3.1 of <a href="#Part1">[Part1]</a>.  If a 200 response to the same request would have included any of the header fields Cache-Control, Content-Location, ETag, Expires, Last-Modified, or Vary, then those same header fields MUST be sent in a 304 response.  </p>
<p id="rfc.section.4.1.p.3">Since the goal of a 304 response is to minimize information transfer when the recipient already has one or more cached representations, the response SHOULD NOT include representation metadata other than the above listed fields unless said metadata exists for the purpose of guiding cache updates (e.g., future HTTP extensions).  </p>
<p id="rfc.section.4.1.p.4">If the recipient of a 304 response does not have a cached representation corresponding to the entity-tag indicated by the 304 response, then the recipient MUST NOT use the 304 to update its own cache.  If this conditional request originated with an outbound client, such as a user agent with its own cache sending a conditional GET to a shared proxy, then the 304 response MAY be forwarded to the outbound client.  Otherwise, the recipient MUST disregard the 304 response and repeat the request without any preconditions.  </p>
<p id="rfc.section.4.1.p.5">If a cache uses a received 304 response to update a cache entry, the cache MUST update the entry to reflect any new field values given in the response.  </p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> <a href="#status.412" id="status.412">412 Precondition Failed</a>
</h1>
<p id="rfc.section.4.2.p.1">The 412 status code indicates that one or more preconditions given in the request header fields evaluated to false when tested on the server.  This response code allows the client to place preconditions on the current resource state (its current representations and metadata) and thus prevent the request method from being applied if the target resource is in an unexpected state.  </p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#IANA.considerations" id="IANA.considerations">IANA Considerations</a>
</h1>
<h1 id="rfc.section.5.1">
<a href="#rfc.section.5.1">5.1.</a> <a href="#status.code.registration" id="status.code.registration">Status Code Registration</a>
</h1>
<p id="rfc.section.5.1.p.1">The HTTP Status Code Registry located at <a href="http://www.iana.org/assignments/http-status-codes">http://www.iana.org/assignments/http-status-codes</a> shall be updated with the registrations below: </p>
<div id="#rfc.table.2"></div>
<div id="#iana.status.code.registration.table"></div>
<table cellpadding="3" cellspacing="0" class="tt full left">
<thead><tr>
<th class="left">Value</th>
<th class="left">Description</th>
<th class="left">Reference</th>
</tr></thead>
<tbody>
<tr>
<td class="left">304</td>
<td class="left">Not Modified</td>
<td class="left">
<a href="#status.304">Section 4.1</a> </td>
</tr>
<tr>
<td class="left">412</td>
<td class="left">Precondition Failed</td>
<td class="left">
<a href="#status.412">Section 4.2</a> </td>
</tr>
</tbody>
</table>
<h1 id="rfc.section.5.2">
<a href="#rfc.section.5.2">5.2.</a> <a href="#header.field.registration" id="header.field.registration">Header Field Registration</a>
</h1>
<p id="rfc.section.5.2.p.1">The Message Header Field Registry located at <a href="http://www.iana.org/assignments/message-headers/message-header-index.html">http://www.iana.org/assignments/message-headers/message-header-index.html</a> shall be updated with the permanent registrations below (see <a href="#RFC3864">[RFC3864]</a>): </p>
<div id="#rfc.table.3"></div>
<div id="#iana.header.registration.table"></div>
<table cellpadding="3" cellspacing="0" class="tt full left">
<thead><tr>
<th class="left">Header Field Name</th>
<th class="left">Protocol</th>
<th class="left">Status</th>
<th class="left">Reference</th>
</tr></thead>
<tbody>
<tr>
<td class="left">ETag</td>
<td class="left">http</td>
<td class="left">standard</td>
<td class="left">
<a href="#header.etag">Section 2.2</a> </td>
</tr>
<tr>
<td class="left">If-Match</td>
<td class="left">http</td>
<td class="left">standard</td>
<td class="left">
<a href="#header.if-match">Section 3.1</a> </td>
</tr>
<tr>
<td class="left">If-Modified-Since</td>
<td class="left">http</td>
<td class="left">standard</td>
<td class="left">
<a href="#header.if-modified-since">Section 3.3</a> </td>
</tr>
<tr>
<td class="left">If-None-Match</td>
<td class="left">http</td>
<td class="left">standard</td>
<td class="left">
<a href="#header.if-none-match">Section 3.2</a> </td>
</tr>
<tr>
<td class="left">If-Unmodified-Since</td>
<td class="left">http</td>
<td class="left">standard</td>
<td class="left">
<a href="#header.if-unmodified-since">Section 3.4</a> </td>
</tr>
<tr>
<td class="left">Last-Modified</td>
<td class="left">http</td>
<td class="left">standard</td>
<td class="left">
<a href="#header.last-modified">Section 2.1</a> </td>
</tr>
</tbody>
</table>
<p id="rfc.section.5.2.p.2">The change controller is: "IETF (iesg@ietf.org) - Internet Engineering Task Force".  </p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#security.considerations" id="security.considerations">Security Considerations</a>
</h1>
<p id="rfc.section.6.p.1">No additional security considerations have been identified beyond those applicable to HTTP in general <a href="#Part1">[Part1]</a>.  </p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#ack" id="ack">Acknowledgments</a>
</h1>
<h1 id="rfc.references">
<a href="#rfc.references">8.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">8.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="Part1">[Part1]</b></td>
<td class="top">
<a title="Adobe Systems Incorporated">Fielding, R.</a>, <a title="Alcatel-Lucent Bell Labs">Gettys, J.</a>, <a title="Hewlett-Packard Company">Mogul, J.</a>, <a title="Microsoft Corporation">Frystyk, H.</a>, <a title="Adobe Systems Incorporated">Masinter, L.</a>, <a title="Microsoft Corporation">Leach, P.</a>, <a title="World Wide Web Consortium">Berners-Lee, T.</a>, <a title="World Wide Web Consortium">Lafon, Y.</a> and <a title="greenbytes GmbH">J. F. Reschke</a>, "<a href="http://tools.ietf.org/html/draft-ietf-httpbis-p1-messaging-14">HTTP/1.1, part 1: URIs, Connections, and Message Parsing</a>", Internet-Draft draft-ietf-httpbis-p1-messaging-14, April 2011.</td>
</tr>
<tr>
<td class="reference"><b id="Part3">[Part3]</b></td>
<td class="top">
<a title="Adobe Systems Incorporated">Fielding, R.</a>, <a title="Alcatel-Lucent Bell Labs">Gettys, J.</a>, <a title="Hewlett-Packard Company">Mogul, J.</a>, <a title="Microsoft Corporation">Frystyk, H.</a>, <a title="Adobe Systems Incorporated">Masinter, L.</a>, <a title="Microsoft Corporation">Leach, P.</a>, <a title="World Wide Web Consortium">Berners-Lee, T.</a>, <a title="World Wide Web Consortium">Lafon, Y.</a> and <a title="greenbytes GmbH">J. F. Reschke</a>, "<a href="http://tools.ietf.org/html/draft-ietf-httpbis-p3-payload-14">HTTP/1.1, part 3: Message Payload and Content Negotiation</a>", Internet-Draft draft-ietf-httpbis-p3-payload-14, April 2011.</td>
</tr>
<tr>
<td class="reference"><b id="Part5">[Part5]</b></td>
<td class="top">
<a title="Adobe Systems Incorporated">Fielding, R.</a>, <a title="Alcatel-Lucent Bell Labs">Gettys, J.</a>, <a title="Hewlett-Packard Company">Mogul, J.</a>, <a title="Microsoft Corporation">Frystyk, H.</a>, <a title="Adobe Systems Incorporated">Masinter, L.</a>, <a title="Microsoft Corporation">Leach, P.</a>, <a title="World Wide Web Consortium">Berners-Lee, T.</a>, <a title="World Wide Web Consortium">Lafon, Y.</a> and <a title="greenbytes GmbH">J. F. Reschke</a>, "<a href="http://tools.ietf.org/html/draft-ietf-httpbis-p5-range-14">HTTP/1.1, part 5: Range Requests and Partial Responses</a>", Internet-Draft draft-ietf-httpbis-p5-range-14, April 2011.</td>
</tr>
<tr>
<td class="reference"><b id="Part6">[Part6]</b></td>
<td class="top">
<a title="Adobe Systems Incorporated">Fielding, R.</a>, <a title="Alcatel-Lucent Bell Labs">Gettys, J.</a>, <a title="Hewlett-Packard Company">Mogul, J.</a>, <a title="Microsoft Corporation">Frystyk, H.</a>, <a title="Adobe Systems Incorporated">Masinter, L.</a>, <a title="Microsoft Corporation">Leach, P.</a>, <a title="World Wide Web Consortium">Berners-Lee, T.</a>, <a title="World Wide Web Consortium">Lafon, Y.</a>, <a>Nottingham, M.</a> and <a title="greenbytes GmbH">J. F. Reschke</a>, "<a href="http://tools.ietf.org/html/draft-ietf-httpbis-p6-cache-14">HTTP/1.1, part 6: Caching</a>", Internet-Draft draft-ietf-httpbis-p6-cache-14, April 2011.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5234">[RFC5234]</b></td>
<td class="top">
<a title="Brandenburg InternetWorking">Crocker, D.</a> and <a title="THUS plc.">P. Overell</a>, "<a href="http://tools.ietf.org/html/rfc5234">Augmented BNF for Syntax Specifications: ABNF</a>", STD 68, RFC 5234, January 2008.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">8.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2616">[RFC2616]</b></td>
<td class="top">
<a title="University of California, Irvine">Fielding, R.</a>, <a title="W3C">Gettys, J.</a>, <a title="Compaq Computer Corporation">Mogul, J.</a>, <a title="MIT Laboratory for Computer Science">Frystyk, H.</a>, <a title="Xerox Corporation">Masinter, L.</a>, <a title="Microsoft Corporation">Leach, P.</a> and <a title="W3C">T. Berners-Lee</a>, "<a href="http://tools.ietf.org/html/rfc2616">Hypertext Transfer Protocol -- HTTP/1.1</a>", RFC 2616, June 1999.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3864">[RFC3864]</b></td>
<td class="top">
<a title="Nine by Nine">Klyne, G.</a>, <a title="BEA Systems">Nottingham, M.</a> and <a title="HP Labs">J. Mogul</a>, "<a href="http://tools.ietf.org/html/rfc3864">Registration Procedures for Message Header Fields</a>", BCP 90, RFC 3864, September 2004.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4918">[RFC4918]</b></td>
<td class="top">
<a title="CommerceNet">Dusseault, L.M.</a>, "<a href="http://tools.ietf.org/html/rfc4918">HTTP Extensions for Web Distributed Authoring and Versioning (WebDAV)</a>", RFC 4918, June 2007.</td>
</tr>
</tbody></table>
<h1 id="rfc.appendix.Appendix A">
<a href="#rfc.appendix.Appendix%20A">Appendix A.</a> <a href="#changes.from.rfc.2616" id="changes.from.rfc.2616">Changes from RFC 2616</a>
</h1>
<p id="rfc.section.Appendix A.p.1">Allow weak entity-tags in all requests except range requests (Sections <a href="#weak.and.strong.validators">2.2.2</a> and <a href="#header.if-none-match">3.2</a>).  </p>
<p id="rfc.section.Appendix A.p.2">Change ABNF productions for header fields to only define the field value.  (<a href="#header.fields">Section 3</a>) </p>
<h1 id="rfc.appendix.Appendix B">
<a href="#rfc.appendix.Appendix%20B">Appendix B.</a> <a href="#collected.abnf" id="collected.abnf">Collected ABNF</a>
</h1>
<div id="#rfc.figure.17"></div>
<pre>
ETag = entity-tag

HTTP-date = &lt;HTTP-date, defined in [Part1], Section 6.1&gt;

If-Match = "*" / ( *( "," OWS ) entity-tag *( OWS "," [ OWS
 entity-tag ] ) )
If-Modified-Since = HTTP-date
If-None-Match = "*" / ( *( "," OWS ) entity-tag *( OWS "," [ OWS
 entity-tag ] ) )
If-Unmodified-Since = HTTP-date

Last-Modified = HTTP-date

OWS = &lt;OWS, defined in [Part1], Section 1.2.2&gt;

entity-tag = [ weak ] opaque-tag

opaque-tag = quoted-string

quoted-string = &lt;quoted-string, defined in [Part1], Section 1.2.2&gt;

weak = %x57.2F ; W/
</pre>
<div id="#rfc.figure.18"></div>
<p>ABNF diagnostics:</p>
<pre>
; ETag defined but not used
; If-Match defined but not used
; If-Modified-Since defined but not used
; If-None-Match defined but not used
; If-Unmodified-Since defined but not used
; Last-Modified defined but not used
</pre>
<h1 id="rfc.appendix.Appendix C">
<a href="#rfc.appendix.Appendix%20C">Appendix C.</a> <a href="#change.log" id="change.log">Change Log (to be removed by RFC Editor before publication)</a>
</h1>
<h1 id="rfc.appendix.Appendix C.1">
<a href="#rfc.appendix.Appendix%20C.1">Appendix C.1.</a> Since RFC 2616</h1>
<p id="rfc.section.Appendix C.1.p.1">Extracted relevant partitions from <a href="#RFC2616">[RFC2616]</a>.  </p>
<h1 id="rfc.appendix.Appendix C.2">
<a href="#rfc.appendix.Appendix%20C.2">Appendix C.2.</a> Since draft-ietf-httpbis-p4-conditional-00</h1>
<p id="rfc.section.Appendix C.2.p.1">Closed issues: </p>

<ul><li>
<a href="http://tools.ietf.org/wg/httpbis/trac/ticket/35">http://tools.ietf.org/wg/httpbis/trac/ticket/35</a>: "Normative and Informative references" </li></ul>

<p> </p>
<p id="rfc.section.Appendix C.2.p.2">Other changes: </p>

<ul><li>Move definitions of 304 and 412 condition codes from Part2.  </li></ul>

<p> </p>
<h1 id="rfc.appendix.Appendix C.3">
<a href="#rfc.appendix.Appendix%20C.3">Appendix C.3.</a> Since draft-ietf-httpbis-p4-conditional-01</h1>
<p id="rfc.section.Appendix C.3.p.1">Ongoing work on ABNF conversion (<a href="http://tools.ietf.org/wg/httpbis/trac/ticket/36">http://tools.ietf.org/wg/httpbis/trac/ticket/36</a>): </p>

<ul><li>Add explicit references to BNF syntax and rules imported from other parts of the specification.  </li></ul>

<p> </p>
<h1 id="rfc.appendix.Appendix C.4">
<a href="#rfc.appendix.Appendix%20C.4">Appendix C.4.</a> <a href="#changes.since.02" id="changes.since.02">Since draft-ietf-httpbis-p4-conditional-02</a>
</h1>
<p id="rfc.section.Appendix C.4.p.1">Closed issues: </p>

<ul><li>
<a href="http://tools.ietf.org/wg/httpbis/trac/ticket/116">http://tools.ietf.org/wg/httpbis/trac/ticket/116</a>: "Weak ETags on non-GET requests" </li></ul>

<p> </p>
<p id="rfc.section.Appendix C.4.p.2">Ongoing work on IANA Message Header Field Registration (<a href="http://tools.ietf.org/wg/httpbis/trac/ticket/40">http://tools.ietf.org/wg/httpbis/trac/ticket/40</a>): </p>

<ul><li>Reference RFC 3984, and update header field registrations for header fields defined in this document.  </li></ul>

<p> </p>
<h1 id="rfc.appendix.Appendix C.5">
<a href="#rfc.appendix.Appendix%20C.5">Appendix C.5.</a> <a href="#changes.since.03" id="changes.since.03">Since draft-ietf-httpbis-p4-conditional-03</a>
</h1>
<p id="rfc.section.Appendix C.5.p.1">Closed issues: </p>

<ul>
<li>
<a href="http://tools.ietf.org/wg/httpbis/trac/ticket/71">http://tools.ietf.org/wg/httpbis/trac/ticket/71</a>: "Examples for ETag matching" </li>
<li>
<a href="http://tools.ietf.org/wg/httpbis/trac/ticket/124">http://tools.ietf.org/wg/httpbis/trac/ticket/124</a>: "'entity value' undefined" </li>
<li>
<a href="http://tools.ietf.org/wg/httpbis/trac/ticket/126">http://tools.ietf.org/wg/httpbis/trac/ticket/126</a>: "bogus 2068 Date header reference" </li>
</ul>

<p> </p>
<h1 id="rfc.appendix.Appendix C.6">
<a href="#rfc.appendix.Appendix%20C.6">Appendix C.6.</a> <a href="#changes.since.04" id="changes.since.04">Since draft-ietf-httpbis-p4-conditional-04</a>
</h1>
<p id="rfc.section.Appendix C.6.p.1">Ongoing work on ABNF conversion (<a href="http://tools.ietf.org/wg/httpbis/trac/ticket/36">http://tools.ietf.org/wg/httpbis/trac/ticket/36</a>): </p>

<ul>
<li>Use "/" instead of "|" for alternatives.  </li>
<li>Introduce new ABNF rules for "bad" whitespace ("BWS"), optional whitespace ("OWS") and required whitespace ("RWS").  </li>
<li>Rewrite ABNFs to spell out whitespace rules, factor out header field value format definitions.  </li>
</ul>

<p> </p>
<h1 id="rfc.appendix.Appendix C.7">
<a href="#rfc.appendix.Appendix%20C.7">Appendix C.7.</a> <a href="#changes.since.05" id="changes.since.05">Since draft-ietf-httpbis-p4-conditional-05</a>
</h1>
<p id="rfc.section.Appendix C.7.p.1">Final work on ABNF conversion (<a href="http://tools.ietf.org/wg/httpbis/trac/ticket/36">http://tools.ietf.org/wg/httpbis/trac/ticket/36</a>): </p>

<ul><li>Add appendix containing collected and expanded ABNF, reorganize ABNF introduction.  </li></ul>

<p> </p>
<h1 id="rfc.appendix.Appendix C.8">
<a href="#rfc.appendix.Appendix%20C.8">Appendix C.8.</a> <a href="#changes.since.06" id="changes.since.06">Since draft-ietf-httpbis-p4-conditional-06</a>
</h1>
<p id="rfc.section.Appendix C.8.p.1">Closed issues: </p>

<ul><li>
<a href="http://tools.ietf.org/wg/httpbis/trac/ticket/153">http://tools.ietf.org/wg/httpbis/trac/ticket/153</a>: "case-sensitivity of etag weakness indicator" </li></ul>

<p> </p>
<h1 id="rfc.appendix.Appendix C.9">
<a href="#rfc.appendix.Appendix%20C.9">Appendix C.9.</a> <a href="#changes.since.07" id="changes.since.07">Since draft-ietf-httpbis-p4-conditional-07</a>
</h1>
<p id="rfc.section.Appendix C.9.p.1">Closed issues: </p>

<ul>
<li>
<a href="http://tools.ietf.org/wg/httpbis/trac/ticket/116">http://tools.ietf.org/wg/httpbis/trac/ticket/116</a>: "Weak ETags on non-GET requests" (If-Match still was defined to require strong matching) </li>
<li>
<a href="http://tools.ietf.org/wg/httpbis/trac/ticket/198">http://tools.ietf.org/wg/httpbis/trac/ticket/198</a>: "move IANA registrations for optional status codes" </li>
</ul>

<p> </p>
<h1 id="rfc.appendix.Appendix C.10">
<a href="#rfc.appendix.Appendix%20C.10">Appendix C.10.</a> <a href="#changes.since.08" id="changes.since.08">Since draft-ietf-httpbis-p4-conditional-08</a>
</h1>
<p id="rfc.section.Appendix C.10.p.1">No significant changes.  </p>
<h1 id="rfc.appendix.Appendix C.11">
<a href="#rfc.appendix.Appendix%20C.11">Appendix C.11.</a> <a href="#changes.since.09" id="changes.since.09">Since draft-ietf-httpbis-p4-conditional-09</a>
</h1>
<p id="rfc.section.Appendix C.11.p.1">No significant changes.  </p>
<h1 id="rfc.appendix.Appendix C.12">
<a href="#rfc.appendix.Appendix%20C.12">Appendix C.12.</a> <a href="#changes.since.10" id="changes.since.10">Since draft-ietf-httpbis-p4-conditional-10</a>
</h1>
<p id="rfc.section.Appendix C.12.p.1">Closed issues: </p>

<ul>
<li>
<a href="http://tools.ietf.org/wg/httpbis/trac/ticket/69">http://tools.ietf.org/wg/httpbis/trac/ticket/69</a>: "Clarify 'Requested Variant'" </li>
<li>
<a href="http://tools.ietf.org/wg/httpbis/trac/ticket/109">http://tools.ietf.org/wg/httpbis/trac/ticket/109</a>: "Clarify entity / representation / variant terminology" </li>
<li>
<a href="http://tools.ietf.org/wg/httpbis/trac/ticket/220">http://tools.ietf.org/wg/httpbis/trac/ticket/220</a>: "consider removing the 'changes from 2068' sections" </li>
</ul>

<p> </p>
<h1 id="rfc.appendix.Appendix C.13">
<a href="#rfc.appendix.Appendix%20C.13">Appendix C.13.</a> <a href="#changes.since.11" id="changes.since.11">Since draft-ietf-httpbis-p4-conditional-11</a>
</h1>
<p id="rfc.section.Appendix C.13.p.1">None.  </p>
<h1 id="rfc.appendix.Appendix C.14">
<a href="#rfc.appendix.Appendix%20C.14">Appendix C.14.</a> <a href="#changes.since.12" id="changes.since.12">Since draft-ietf-httpbis-p4-conditional-12</a>
</h1>
<p id="rfc.section.Appendix C.14.p.1">Closed issues: </p>

<ul><li>
<a href="http://tools.ietf.org/wg/httpbis/trac/ticket/224">http://tools.ietf.org/wg/httpbis/trac/ticket/224</a>: "Header Classification" </li></ul>

<p> </p>
<h1 id="rfc.appendix.Appendix C.15">
<a href="#rfc.appendix.Appendix%20C.15">Appendix C.15.</a> <a href="#changes.since.13" id="changes.since.13">Since draft-ietf-httpbis-p4-conditional-13</a>
</h1>
<p id="rfc.section.Appendix C.15.p.1">Closed issues: </p>

<ul>
<li>
<a href="http://tools.ietf.org/wg/httpbis/trac/ticket/89">http://tools.ietf.org/wg/httpbis/trac/ticket/89</a>: "If-* and entities" </li>
<li>
<a href="http://tools.ietf.org/wg/httpbis/trac/ticket/101">http://tools.ietf.org/wg/httpbis/trac/ticket/101</a>: "Definition of validator weakness" </li>
<li>
<a href="http://tools.ietf.org/wg/httpbis/trac/ticket/276">http://tools.ietf.org/wg/httpbis/trac/ticket/276</a>: "untangle ABNFs for header fields" </li>
<li>
<a href="http://tools.ietf.org/wg/httpbis/trac/ticket/269">http://tools.ietf.org/wg/httpbis/trac/ticket/269</a>: "ETags and Quotes" </li>
</ul>

<p> </p>
<h1 id="rfc.index"><a href="#rfc.index">Index</a></h1>
<table>
<tr><td><strong>S</strong></td></tr>
<tr>
<td> </td>
<td><a href="#index.selected%20representation">selected representation</a></td>
</tr>
</table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Roy T. Fielding</span> editor
	  <span class="n hidden">
		<span class="family-name">Fielding</span>
	  </span>
	</span>
	<span class="org vcardline">Adobe Systems Incorporated</span>
	<span class="adr">
	  <span>345 Park Ave</span>

	  <span class="vcardline">
		<span class="locality">San Jose</span>,  
		<span class="region">CA</span> 
		<span class="code">95110</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">EMail: fielding@gbiv.com</span>

<span class="vcardline">URI: <a href="http://roy.gbiv.com/">http://roy.gbiv.com/</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Jim Gettys</span> 
	  <span class="n hidden">
		<span class="family-name">Gettys</span>
	  </span>
	</span>
	<span class="org vcardline">Alcatel-Lucent Bell Labs</span>
	<span class="adr">
	  <span>21 Oak Knoll Road</span>

	  <span class="vcardline">
		<span class="locality">Carlisle</span>,  
		<span class="region">MA</span> 
		<span class="code">01741</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">EMail: jg@freedesktop.org</span>

<span class="vcardline">URI: <a href="http://gettys.wordpress.com/">http://gettys.wordpress.com/</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Jeffrey C. Mogul</span> 
	  <span class="n hidden">
		<span class="family-name">Mogul</span>
	  </span>
	</span>
	<span class="org vcardline">Hewlett-Packard Company</span>
	<span class="adr">
	  <span>HP Labs, Large Scale Systems Group</span>
<span>1501 Page Mill Road, MS 1177</span>

	  <span class="vcardline">
		<span class="locality">Palo Alto</span>,  
		<span class="region">CA</span> 
		<span class="code">94304</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">EMail: JeffMogul@acm.org</span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Henrik Frystyk Nielsen</span> 
	  <span class="n hidden">
		<span class="family-name">Frystyk</span>
	  </span>
	</span>
	<span class="org vcardline">Microsoft Corporation</span>
	<span class="adr">
	  <span>1 Microsoft Way</span>

	  <span class="vcardline">
		<span class="locality">Redmond</span>,  
		<span class="region">WA</span> 
		<span class="code">98052</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">EMail: henrikn@microsoft.com</span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Larry Masinter</span> 
	  <span class="n hidden">
		<span class="family-name">Masinter</span>
	  </span>
	</span>
	<span class="org vcardline">Adobe Systems Incorporated</span>
	<span class="adr">
	  <span>345 Park Ave</span>

	  <span class="vcardline">
		<span class="locality">San Jose</span>,  
		<span class="region">CA</span> 
		<span class="code">95110</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">EMail: LMM@acm.org</span>

<span class="vcardline">URI: <a href="http://larry.masinter.net/">http://larry.masinter.net/</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Paul J. Leach</span> 
	  <span class="n hidden">
		<span class="family-name">Leach</span>
	  </span>
	</span>
	<span class="org vcardline">Microsoft Corporation</span>
	<span class="adr">
	  <span>1 Microsoft Way</span>

	  <span class="vcardline">
		<span class="locality">Redmond</span>,  
		<span class="region">WA</span> 
		<span class="code">98052</span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: paulle@microsoft.com</span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Tim Berners-Lee</span> 
	  <span class="n hidden">
		<span class="family-name">Berners-Lee</span>
	  </span>
	</span>
	<span class="org vcardline">World Wide Web Consortium</span>
	<span class="adr">
	  <span>MIT Computer Science and Artificial Intelligence Laboratory</span>
<span>The Stata Center, Building 32</span>
<span>32 Vassar Street</span>

	  <span class="vcardline">
		<span class="locality">Cambridge</span>,  
		<span class="region">MA</span> 
		<span class="code">02139</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">EMail: timbl@w3.org</span>

<span class="vcardline">URI: <a href="http://www.w3.org/People/Berners-Lee/">http://www.w3.org/People/Berners-Lee/</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Yves Lafon</span> editor
	  <span class="n hidden">
		<span class="family-name">Lafon</span>
	  </span>
	</span>
	<span class="org vcardline">World Wide Web Consortium</span>
	<span class="adr">
	  <span>W3C / ERCIM</span>
<span>2004, rte des Lucioles</span>

	  <span class="vcardline">
		<span class="locality">Sophia-Antipolis</span>,  
		<span class="region">AM</span> 
		<span class="code">06902</span>
	  </span>
	  <span class="country-name vcardline">France</span>
	</span>
	<span class="vcardline">EMail: ylafon@w3.org</span>

<span class="vcardline">URI: <a href="http://www.raubacapeu.net/people/yves/">http://www.raubacapeu.net/people/yves/</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Julian F. Reschke</span> editor
	  <span class="n hidden">
		<span class="family-name">Reschke</span>
	  </span>
	</span>
	<span class="org vcardline">greenbytes GmbH</span>
	<span class="adr">
	  <span>Hafenweg 16</span>

	  <span class="vcardline">
		<span class="locality">Muenster</span>,  
		<span class="region">NW</span> 
		<span class="code">48155</span>
	  </span>
	  <span class="country-name vcardline">Germany</span>
	</span>
	<span class="vcardline">Phone: +49 251 2807760</span>

<span class="vcardline">EMail: julian.reschke@greenbytes.de</span>

<span class="vcardline">URI: <a href="http://greenbytes.de/tech/webdav/">http://greenbytes.de/tech/webdav/</a></span>

  </address>
</div>

</body>
</html>