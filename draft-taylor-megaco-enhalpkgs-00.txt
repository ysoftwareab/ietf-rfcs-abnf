

Internet Engineering Task Force                           Martin Taylor
Internet Draft                                                CopperCom
Document: draft-taylor-megaco-enhalpkgs-00.txt         C. Michael Brown
Category: Standards Track                               Nortel Networks
                                                             April 2001
 
 
               Megaco/H.248 Enhanced Analog Line Packages 
 
 
Status of this Memo 
 
   This document is an Internet-Draft and is in full conformance with 
   all provisions of Section 10 of RFC2026 [1].  
 
   Internet-Drafts are working documents of the Internet Engineering 
   Task Force (IETF), its areas, and its working groups. Note that 
   other groups may also distribute working documents as Internet-
   Drafts. Internet-Drafts are draft documents valid for a maximum of 
   six months and may be updated, replaced, or obsoleted by other 
   documents at any time. It is inappropriate to use Internet- Drafts 
   as reference material or to cite them other than as "work in 
   progress."  
   The list of current Internet-Drafts can be accessed at 
   http://www.ietf.org/ietf/1id-abstracts.txt  
   The list of Internet-Draft Shadow Directories can be accessed at 
   http://www.ietf.org/shadow.html. 
    
1. Abstract 
    
   This document provides proposed definitions for two supplemental 
   packages for Megaco/H.248.  These packages address support of 
   functionality for standard and enhanced telephony services delivered 
   over analog line terminations, including line-side answer 
   supervision and the delivery of call metering pulses. 
    
    
2. Conventions used in this document 
    
   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", 
   "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and "OPTIONAL" in 
   this document are to be interpreted as described in RFC2119 [2]. 
    
    
3. Document Organization 
    
   The subsequent text in this document is organized into the following 
   major sections: 
    
   * Introduction 
   * Description of the Extended Analog Line Supervision Package 
   * Description of the Automatic Metering Package 
   * References 
  
Taylor & Brown    Standards Track _ Expires Oct 2001                 1 
              Megaco/H.248 Enhanced Analog Line Packages    April 2001 
 
 
   * Author's addresses 
    
    
4. Introduction 
    
   The Analog Line Supervision Package defined in Annex E of RFC3015 
   [3] supports basic telephony services, using on-hook and off-hook 
   events, and a ringing signal.  Some telephony services delivered 
   over analog line terminations have additional supervisory signaling 
   requirements that are not met by this package.  The packages defined 
   in this document are intended to meet the needs of the following 
   supervisory signaling functions: 
    
   Line-side answer supervision _ this function provides a positive 
   notification to a calling line that the called line has answered.  
   This notification may be used by customer premises equipment, for 
   example, to begin timing the call for local billing or charging 
   purposes. 
    
   Network disconnect _ many switching systems provide this signal 
   following the termination of an active call if a party remains off-
   hook for some period of time following the other party going on-
   hook.  The network disconnect notification may be used by customer 
   premises equipment to release resources associated with the call. 
    
   Metering pulses _ metering services provide subscribers with real-
   time information about charging of calls in progress.  These 
   services make use of customer premises equipment that shows a count 
   of "units" consumed by chargeable calls, where each unit has a fixed 
   monetary value.  To increment the counter in the metering equipment, 
   the switching system sends certain kinds of pulses over the line, 
   either during the call or immediately following termination of the 
   call.  These pulses typically consist of short bursts of 12 kHz or 
   16 kHz tones, although other types of metering pulse such as brief 
   periods of polarity reversal or 50 Hz tones are also seen. 
    
   To meet these needs, two supplemental packages are proposed. 
    
   The Extended Analog Line Supervision package is defined as an 
   extension of the Basic Analog Line Supervision package, and includes 
   two new signals: Line-Side Answer Supervision and Network 
   Disconnect.  This package provides support for all the Loop-Start 
   supervisory signaling requirements identified by GR-506 [4]. 
 
   The Automatic Metering Package provides a means to apply metering 
   pulses on an analog line termination.  The package includes signals 
   requesting the automatic application of pulses at fixed intervals as 
   well as the application of pulse bursts, properties that may be used 
   to track the actual number of pulses applied, and an event that may 
   be used to trigger periodic reporting of the count of pulses 
   applied. 
    
  
Taylor & Brown    Standards Track _ Expires Oct 2001                 2 
              Megaco/H.248 Enhanced Analog Line Packages    April 2001 
 
 
    
    
    
5. Extended Analog Line Supervision Package 
    
   PackageID: xal (0x????) 
   Version: 1 
   Extends: al 
    
   This package defines events and signals necessary to support analog 
   telephony services where line-side answer supervision and/or network 
   disconnect capabilities are required. 
    
   5.1 Properties 
    
   None. 
    
   5.2 Events 
    
   None. 
    
   5.3 Signals 
    
   Line-side Answer Supervision 
    
      SignalID: las (0x????) 
       
      Indicates that the called party has answered.  The signal that is 
      sent on the line is provisioned in the MG.  Typically this signal 
      involves a reversal of polarity of the current feed on the line. 
       
      Signal Type: OnOff 
      Additional Parameters: None 
       
   Network Disconnect 
    
      SignalID: nd (0x????) 
       
      Indicates that the far-end party has disconnected.  The signal 
      that is sent on the line is provisioned in the MG.  Typically 
      this signal involves a brief removal of the dc voltage on the 
      line. 
       
      Signal Type: Brief 
      Duration: Provisioned 
      Additional Parameters: None 
       
   5.4 Statistics 
    
   None. 
    
   5.5 Procedures 
  
Taylor & Brown    Standards Track _ Expires Oct 2001                 3 
              Megaco/H.248 Enhanced Analog Line Packages    April 2001 
 
 
    
   The Network Disconnect signal is typically used when a called or 
   calling party remains off-hook after the other party has hung up.  
   In these circumstances, some telephony services provide dial tone to 
   the off-hook phone after a period of several seconds has elapsed.  
   The Network Disconnect signal would normally be applied just prior 
   to the re-application of dial tone on the line. 
    
 
6. Automatic Metering Package 
    
   PackageID: amet (0x????) 
   Version: 1 
   Extends: None 
    
   This package supports the automated application of repetitive 
   metering pulses to an analog line termination.  It provides a 
   facility whereby the actual number of metering pulses applied to the 
   termination can be periodically reported to the MGC for verification 
   purposes. 
    
   6.1 Properties 
    
   Current Pulse Count 
    
      PropertyID: cpc (0x????) 
      Type: Integer 
      Possible values: zero or positive number 
      Defined in: TerminationState 
      Characteristics: Read/Write 
       
      This property represents the total number of metering pulses that 
      have been applied on an analog line termination since the last 
      time its value was reset to zero by means of the "enable 
      metering" signal defined in this package. 
    
   Pulse Count Since Last Report 
    
      PropertyID: pcslr (0x????) 
      Type: Integer 
      Possible values: zero or positive number 
      Defined in: TerminationState 
      Characteristics: Read/Write 
       
      This property represents the number of metering pulses that have 
      been applied on an analog line termination since the last meter 
      report event, or since the last time its value was reset to zero 
      by means of the "enable metering" signal defined in this package.  
      The recognition of the periodic report event and generation of a 
      corresponding notification resets the value of this property to 
      zero. 
    
  
Taylor & Brown    Standards Track _ Expires Oct 2001                 4 
              Megaco/H.248 Enhanced Analog Line Packages    April 2001 
 
 
   6.2 Events 
    
   Periodic report 
       
      EventID: pr (0x????) 
    
      This event is used in conjunction with the "enable metering" and 
      "metering pulse burst" signals defined in this package.  It is 
      detected when the value of the "pulse count since last report" 
      property reaches the value specified in the "report period" 
      parameter. 
       
      This event does not have any parameters for the observed event 
      descriptor since it will be reported only when the pulse count 
      since last report reaches the report period, which is a value 
      already known to the MGC. 
       
      This event is not detected when the application of signals is 
      stopped due to an MG failure, a customer line state event (e.g. 
      on-hook), or by an explicit command from the MGC.  The MGC needs 
      to read the value of the property "pulse count since last report" 
      in those cases, using an AuditValue command. 
    
      EventsDescriptor parameters: 
       
         Report Period 
         
            ParameterID: rp (0x????) 
            Type: Integer 
             
            This parameter specifies the period of metering reports in 
            terms of pulse counts.  There is no default value for this 
            parameter, and it must be specified with a non-zero value. 
             
      ObservedEventsDescriptor parameters: 
       
         None. 
          
   6.3 Signals 
    
   Enable Metering 
    
      SignalID: em (0x????) 
       
      This signal starts the automatic generation of metering pulses on 
      the termination.  The type and duration of the pulses to be 
      applied are provisioned in the MG. 
       
      Signal Type: OnOff 
      Duration: Variable 
      Additional Parameters: 
       
  
Taylor & Brown    Standards Track _ Expires Oct 2001                 5 
              Megaco/H.248 Enhanced Analog Line Packages    April 2001 
 
 
         Pulse Count 
          
            ParameterID: pc (0x????) 
            Type: Integer 
             
            This parameter specifies the number of metering pulses to 
            be applied to the termination.  If the value of this 
            parameter is zero, or if no value is supplied for this 
            parameter, then the repetitive application of metering 
            pulses shall continue until stopped by other mechanisms 
            (for example, the detection of an event, or the replacement 
            of the Signals Descriptor). 
             
        Pulse Repetition Interval 
         
            ParameterID: pri (0x????) 
            Type: Integer 
             
            This parameter specifies the interval between repetitions 
            of metering pulses on the line, in milliseconds.  It 
            represents the time that should elapse between the leading 
            edge of a pulse and the leading edge of the succeeding 
            pulse.  There is no default value for this parameter, and 
            the MGC should always provide a positive non-zero value. 
             
   Metering Pulse Burst 
    
      SignalID: mpb (0x????) 
       
      This signal causes a burst of metering pulses to be applied to 
      the termination. 
       
      Signal Type: Brief 
      Duration: Variable 
      Additional Parameters: 
       
         Burst Pulse Count 
          
            ParameterID: bpc (0x????) 
            Type: Integer 
             
            This parameter specifies the number of metering pulses to 
            be applied as a burst on the line.  The type, duration and 
            pulse repetition interval for the metering pulses 
            comprising the burst are provisioned in the MG. The default 
            value of this parameter, which shall apply if the parameter 
            is omitted from the SignalsDescriptor, is 1. 
 
   6.4 Statistics 
    
   None. 
    
  
Taylor & Brown    Standards Track _ Expires Oct 2001                 6 
              Megaco/H.248 Enhanced Analog Line Packages    April 2001 
 
 
   6.5 Procedures 
    
   When the MGC starts automatic metering for a given call, it should 
   initialize the pulse count properties cpc and pcslr by setting their 
   values to zero. 
    
   On receiving a SignalsDescriptor containing the signal em, an MG 
   shall apply the first metering pulse to the termination immediately, 
   and then apply subsequent metering pulses at intervals as specified 
   by the value of the pulse repetition interval parameter pri. 
    
   The MG shall increment by one the values of the pulse count 
   properties cpc and pcslr for each metering pulse that is applied to 
   the termination, regardless of whether the pulse was generated as a 
   result of the em signal or as a result of the mpb signal. 
    
   If the value of the parameter pc associated with the signal em is 
   non-zero, then the repetitive application of metering pulses should 
   be continued until the value of the property cpc is equal to the 
   value of the parameter pc. In this case, the MGC should include a 
   SignalType parameter in the Signals Descriptor, specifying the 
   signal type Brief, to override the OnOff signal type for the signal 
   em. 
    
   If the value of the parameter pc is zero or if this parameter is not 
   supplied by the MGC, then the repetitive application of metering 
   pulses should continue until either an event (other than pr) is 
   detected, or until the SignalsDescriptor is replaced with a new 
   SignalsDescriptor that does not include the signal em.   
    
   If, following the application of any metering pulse (regardless of 
   whether it was generated as a result of the signal em or as a result 
   of the signal mbp), the EventsDescriptor contains the event pr, and 
   if the value of pcslr is equal to the value of the EventsDescriptor 
   parameter rp, then the pr event shall be notified, and the value of 
   the property pcslr shall be reset to zero.  The detection of the 
   event pr shall not cause the termination of the signal em or the 
   signal mbp, even if the KeepActive flag is not set for the pr event. 
    
   The repetition rate for the application of metering pulses to the 
   termination may be changed during a call by writing a new 
   SignalsDescriptor containing the signal em, specifying a new value 
   of the pulse repetition interval parameter pri.  In this case, the 
   SignalsDescriptor should contain a KeepActive flag for the signal 
   em, and the MG should transition to the new pulse repetition 
   interval after the next metering pulse has been applied. 
    
   A metering pulse burst may be applied while a metered call is in 
   progress, for example to take account of a chargeable mid-call 
   action by the subscriber.  In this case, the MGC should send a new 
   SignalsDescriptor that contains the em signal with a KeepActive 
   flag, together with the mpb signal.  The MG should continue to apply 
  
Taylor & Brown    Standards Track _ Expires Oct 2001                 7 
              Megaco/H.248 Enhanced Analog Line Packages    April 2001 
 
 
   metering pulses at the repetition interval specified by the pri 
   parameter of the em signal, while in addition applying the metering 
   pulse burst.  The MG should ensure that the pulses comprising the 
   pulse burst are applied in such a manner as not to interfere with 
   the pulses comprising the repetitive background metering, respecting 
   any minimum inter-pulse interval that may be needed to ensure proper 
   recognition of pulses by customer premises equipment. 
    
   The detection of an event such as on-hook while a metering pulse is 
   being applied to a termination should not cause truncation of the 
   pulse.  Once a pulse has started to be applied, the application of 
   the pulse should continue for the full duration provisioned in the 
   MG. 
    
 
8. Formal Syntax 
    
   Not applicable. 
    
    
9. Security Considerations 
 
   Not applicable. 
    
    
10. References 
 
   1  Bradner, S., "The Internet Standards Process -- Revision 3", BCP 
      9, RFC 2026, October 1996. 
    
   2  Bradner, S., "Key words for use in RFCs to Indicate Requirement 
      Levels", BCP 14, RFC 2119, March 1997 
    
   3  Cuervo, et al., "Megaco Protocol Version 1.0", RFC 3015, November 
      2000 
    
   4  Telcordia, "Local Switching System Generic Requirements _ 
      Signaling for Analog Interfaces", GR-506-CORE, June 1996 
    
    
11. Acknowledgments 
    
   None. 
    
    
12. Author's Addresses 
    
   Martin Taylor 
   CopperCom 
   3651 FAU Boulevard, Suite 300 
   Boca Raton, FL 33431 
   Phone: (561) 239 6694 
  
Taylor & Brown    Standards Track _ Expires Oct 2001                 8 
              Megaco/H.248 Enhanced Analog Line Packages    April 2001 
 
 
   Email: mtaylor@coppercom.com 
 
   C. Michael Brown 
   Nortel Networks 
   4008 Chapel Hill Road 
   Research Triangle Park, NC USA 27709 
   Phone: (919) 991-7767 
   Email: C.Michael.Brown@nortelnetworks.com 












































  
Taylor & Brown    Standards Track _ Expires Oct 2001                 9 
              Megaco/H.248 Enhanced Analog Line Packages    April 2001 
 
 
    
 Full Copyright Statement 

   "Copyright (C) The Internet Society (date). All Rights Reserved. 
   This document and translations of it may be copied and furnished to 
   others, and derivative works that comment on or otherwise explain it 
   or assist in its implmentation may be prepared, copied, published 
   and distributed, in whole or in part, without restriction of any 
   kind, provided that the above copyright notice and this paragraph 
   are included on all such copies and derivative works. However, this 
   document itself may not be modified in any way, such as by removing 
   the copyright notice or references to the Internet Society or other 
   Internet organizations, except as needed for the purpose of 
   developing Internet standards in which case the procedures for 
   copyrights defined in the Internet Standards process must be 
   followed, or as required to translate it into it into languages 
   other than English. 
    
   The limited permissions granted above are perpetual and will not be 
   revoked by the Internet Society or its successors or assigns. 
    
   This document and the information contained herein is provided on an 
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING 
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING 
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION 
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF 
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE." 
    
    























  
Taylor & Brown    Standards Track _ Expires Oct 2001                10 
