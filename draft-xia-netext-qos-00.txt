


Network Working Group                                             F. Xia
Internet-Draft                                               B. Sarikaya
Expires: January 1, 2010                                      Huawei USA
                                                           June 30, 2009


         Differentiated Services Support for Proxy Mobile IPv6
                      draft-xia-netext-qos-00.txt

Status of this Memo

   This Internet-Draft is submitted to IETF in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on January 1, 2010.

Copyright Notice

   Copyright (c) 2009 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents in effect on the date of
   publication of this document (http://trustee.ietf.org/license-info).
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.









Xia & Sarikaya           Expires January 1, 2010                [Page 1]

Internet-Draft            DS support for PMIPv6                June 2009


Abstract

   This document describes Quality of Service (QoS) provisioning in a
   Proxy Mobile IPv6 domain through enabling differentiated services.
   When a packet is encapsulated in a mobile access gateway (or a local
   mobility anchor), the differentiated services codepoint (DSCP) field
   in the outer header is mapped to the priority of a mobile node, or
   the precedence of an application of the mobile node.  Intermediary
   routers between the mobile access gateway and the local mobility
   anchor, which forward the packet based on the outer header of the
   packet, prioritize the packet according to the DSCP value of the
   outer header.


Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . . . 3
   2.  Terminology . . . . . . . . . . . . . . . . . . . . . . . . . . 4
   3.  IPv4 TOS/IPv6 Traffic Class Overview  . . . . . . . . . . . . . 4
   4.  Operations  . . . . . . . . . . . . . . . . . . . . . . . . . . 5
     4.1.  Priority Download from AAA  . . . . . . . . . . . . . . . . 5
     4.2.  PHP Mapping . . . . . . . . . . . . . . . . . . . . . . . . 5
     4.3.  Encapsulation and Forwarding  . . . . . . . . . . . . . . . 5
   5.  Security Considerations . . . . . . . . . . . . . . . . . . . . 6
   6.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . . . 6
   7.  References  . . . . . . . . . . . . . . . . . . . . . . . . . . 6
     7.1.  Normative References  . . . . . . . . . . . . . . . . . . . 6
     7.2.  Informative References  . . . . . . . . . . . . . . . . . . 7
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . . . 8






















Xia & Sarikaya           Expires January 1, 2010                [Page 2]

Internet-Draft            DS support for PMIPv6                June 2009


1.  Introduction

   Proxy Mobile IPv6 protocol [RFC5213] specifies network-based IP
   mobility management support to a mobile node, without requiring the
   participation of the mobile node in any IP mobility related
   signaling.  The core functional entities for proxy mobile IPv6 are
   the Local Mobility Anchor (LMA) and the Mobile Access Gateway (MAG).
   After signalling exchanges between the LMA and the MAG, a bi-
   directional tunnel is established.

   The local mobility anchor, being the topological anchor point for the
   mobile node's home network prefix(es), receives any packets that are
   sent to the mobile node by any node in or outside the Proxy Mobile
   IPv6 domain.  The local mobility anchor forwards these received
   packets to the mobile access gateway through the bi-directional
   tunnel.  The mobile access gateway on other end of the tunnel, after
   receiving the packet, removes the outer header and forwards the
   packet on the access link to the mobile node.

   The mobile access gateway acts as the default router on the point-to-
   point link shared with the mobile node.  Any packet that the mobile
   node sends to any correspondent node will be received by the mobile
   access gateway and will be sent to its local mobility anchor through
   the bi-directional tunnel.  The local mobility anchor on the other
   end of the tunnel, after receiving the packet, removes the outer
   header and routes the packet to the destination.

   The following is the supported packet encapsulation modes that can be
   used by the mobile access gateway and the local mobility anchor for
   tunneling mobile node's IPv6 datagrams and for supporting IPv4
   transport.

   o  IPv6-In-IPv6 - IPv6 datagram encapsulated in an IPv6 packet

   o  IPv6-In-IPv4 - IPv6 datagram encapsulation in an IPv4 packet

   o  IPv6-In-IPv4-UDP - IPv6 datagram encapsulation in an IPv4 UDP
      packet

   o  IPv6-In-IPv4-UDP-TLV - IPv6 datagram encapsulation in an IPv4 UDP
      packet with a TLV header.

   [RFC5213] and its companion document
   [I-D.ietf-netlmm-pmip6-ipv4-support] details the above
   encapsulations.  IPv6-In-IPv6 is taken as an instance in this
   document, IPv4 encapsulation is also applicable.

   [RFC5213] only describes how the ECN (Explicit Congestion



Xia & Sarikaya           Expires January 1, 2010                [Page 3]

Internet-Draft            DS support for PMIPv6                June 2009


   Notification) part of IPv6 Traffic Class field being handled at the
   tunnel entry and exit points, and there is no special consideration
   on DSCP part of the field.  This document describes Quality of
   Service (QoS) provisioning in a Proxy Mobile IPv6 domain through
   enabling differentiated services.  When a packet is encapsulated in a
   mobile access gateway (or a local mobility anchor), the DSCP
   (differentiated services codepoint) field in the outer header is
   mapped to the priority of a mobile node, or the precedence of an
   application of the mobile node.  Intermediary routers between the
   mobile access gateway and the local mobility anchor, which forward
   traffic based on outer headers of the packets, prioritize the packets
   according to the DSCP values of the outer headers.


2.  Terminology

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].  The
   terminology in this document is based on the definitions in [RFC5213]


3.  IPv4 TOS/IPv6 Traffic Class Overview

   Traffic Class field in the IPv6 header [RFC2460] and Type of Service
   field in the IPv4 header [RFC0791] serve the same function which is
   available for use by originating nodes and/or forwarding routers to
   identify and distinguish between different classes or priorities of
   IPv6/IPv4 packets.  [RFC2474] and [RFC3168] further detail Traffic
   Class/ Type of Service field by defining DSCP and ECN field as
   following.


               0     1     2     3     4     5     6     7
         +-----+-----+-----+-----+-----+-----+-----+-----+
         |          DS FIELD, DSCP           | ECN FIELD |
         +-----+-----+-----+-----+-----+-----+-----+-----+

           DSCP: differentiated services codepoint
           ECN:  Explicit Congestion Notification


   Regarding how to make use of DSCP field, [RFC2475] defines an
   architecture for implementing scalable service differentiation in the
   Internet.  At the same time, [RFC2597] specifies a general use
   differentiated services Per-Hop-Behavior (PHB) Group called Assured
   Forwarding (AF), while [RFC2598] describes a PHB called Expedited
   Forwarding.



Xia & Sarikaya           Expires January 1, 2010                [Page 4]

Internet-Draft            DS support for PMIPv6                June 2009


   [RFC5213] only describes how the ECN information being handled at the
   tunnel entry and exit points, and there is no special consideration
   on DSCP.


4.  Operations

4.1.  Priority Download from AAA

   The priority of subscribers MAY be stored in the mobile node's policy
   profile which is downloaded from an AAA server to the mobile access
   gateway once the mobile node attaches to a Proxy Mobile IPv6 Domain
   and performs access authentication.  During the binding update
   exchange between the mobile access gateway and the local mobility
   anchor, the local mobility anchor MAY interact with the AAA server in
   order to access the mobile node's profile and update the remote
   policy store with the mobility session related information.

4.2.  PHP Mapping

   To differientiate subscribers' packets forwarded between the mobile
   access gateway and the local mobility anchor, the priority of
   subscribers MUST be mapped to standard Per-Hop-Behavior.  Different
   operators MAY have different mapping, and the following is just as an
   example.


     +--------------+-----------------------+
     | Priority     |       PHP             |
     |--------------|-----------------------|
     | Platinum     |       EF              |
     | Golden       |       AF4             |
     | Silver       |       AF1             |
     | Other        |       BE              |
     +--------------+-----------------------+


   Further, packets MAY even be differentiated by application types, for
   example, VoIP service of Golden subscribers takes priority of web
   surfing service of Platinum subscribers.

4.3.  Encapsulation and Forwarding

   On receiving a packet from a correspondent node with the destination
   address matching a mobile node's home network prefix(es), the local
   mobility anchor then





Xia & Sarikaya           Expires January 1, 2010                [Page 5]

Internet-Draft            DS support for PMIPv6                June 2009


   o  decides the priority based on the mobile node's profile and/or
      application type,
   o  maps the priority to a pre-defined Per-Hop-Behavior,
   o  and fills the DSCP field of outer IP header when forwarding the
      packet through the bi-directional tunnel.  Intermediary routers
      between the mobile access gateway and the local mobility anchor,
      which forward traffic based on the outer header of the packet,
      prioritize the packet according to the DSCP value of the outer
      header.

   A similar processing as above applies when the mobile access gateway
   forwards upstream packets of the mobile node.


5.  Security Considerations

   Security consideration of [RFC5213] applies, and this document does
   not introduce extra security threats.


6.  Acknowledgements

   TBD.


7.  References

7.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC5213]  Gundavelli, S., Leung, K., Devarapalli, V., Chowdhury, K.,
              and B. Patil, "Proxy Mobile IPv6", RFC 5213, August 2008.

   [RFC2474]  Nichols, K., Blake, S., Baker, F., and D. Black,
              "Definition of the Differentiated Services Field (DS
              Field) in the IPv4 and IPv6 Headers", RFC 2474,
              December 1998.

   [RFC3168]  Ramakrishnan, K., Floyd, S., and D. Black, "The Addition
              of Explicit Congestion Notification (ECN) to IP",
              RFC 3168, September 2001.

   [RFC2460]  Deering, S. and R. Hinden, "Internet Protocol, Version 6
              (IPv6) Specification", RFC 2460, December 1998.

   [RFC0791]  Postel, J., "Internet Protocol", STD 5, RFC 791,



Xia & Sarikaya           Expires January 1, 2010                [Page 6]

Internet-Draft            DS support for PMIPv6                June 2009


              September 1981.

   [RFC2475]  Blake, S., Black, D., Carlson, M., Davies, E., Wang, Z.,
              and W. Weiss, "An Architecture for Differentiated
              Services", RFC 2475, December 1998.

   [RFC2597]  Heinanen, J., Baker, F., Weiss, W., and J. Wroclawski,
              "Assured Forwarding PHB Group", RFC 2597, June 1999.

   [RFC2598]  Jacobson, V., Nichols, K., and K. Poduri, "An Expedited
              Forwarding PHB", RFC 2598, June 1999.

7.2.  Informative References

   [I-D.ietf-netlmm-pmip6-ipv4-support]
              Wakikawa, R. and S. Gundavelli, "IPv4 Support for Proxy
              Mobile IPv6", draft-ietf-netlmm-pmip6-ipv4-support-12
              (work in progress), April 2009.

































Xia & Sarikaya           Expires January 1, 2010                [Page 7]

Internet-Draft            DS support for PMIPv6                June 2009


Authors' Addresses

   Frank Xia
   Huawei USA
   1700 Alma Dr. Suite 500
   Plano, TX  75075

   Phone: +1 972-509-5599
   Email: xiayangsong@huawei.com


   Behcet Sarikaya
   Huawei USA
   1700 Alma Dr. Suite 500
   Plano, TX  75075

   Phone: +1 972-509-5599
   Email: sarikaya@ieee.org

































Xia & Sarikaya           Expires January 1, 2010                [Page 8]


