



PCE WG                                                           R. Chen
Internet-Draft                                                     B. Xu
Intended status: Standards Track                                 ch. Zhu
Expires: March 28, 2021                                  ZTE Corporation
                                                      September 24, 2020


   PCEP Procedures and Protocol Extensions for Using PCE as a Central
                     Controller (PCECC) of BIER-TE
                  draft-chen-pce-controller-bier-te-00

Abstract

   This document specifies extensions to PCEP protocol when a PCE-based
   controller is also responsible for configuring the forwarding actions
   on the routers, in addition to computing the paths for packet flows
   in a BIER-TE network and telling the edge routers what instructions
   to attach to packets as they enter the network.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on March 28, 2021.

Copyright Notice

   Copyright (c) 2020 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of



Chen, et al.             Expires March 28, 2021                 [Page 1]

Internet-Draft                PCECC BIER-TE               September 2020


   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Conventions used in this document . . . . . . . . . . . . . .   3
   3.  PCECC BIER-TE Requirements  . . . . . . . . . . . . . . . . .   3
   4.  Procedures for Using the PCE as the Central Controller
       (PCECC) in BIER . . . . . . . . . . . . . . . . . . . . . . .   4
     4.1.  Stateful PCE Model  . . . . . . . . . . . . . . . . . . .   4
     4.2.  New Functions . . . . . . . . . . . . . . . . . . . . . .   4
     4.3.  PCECC Capability Advertisement  . . . . . . . . . . . . .   4
     4.4.  BIER Path Operations  . . . . . . . . . . . . . . . . . .   4
       4.4.1.  PCECC Bit Index Explicit Replication (BIER)-TE  . . .   5
         4.4.1.1.  PCECC BIER-TE information allocation  . . . . . .   5
         4.4.1.2.  Redundant PCEs  . . . . . . . . . . . . . . . . .   5
         4.4.1.3.  Re Delegation and Cleanup . . . . . . . . . . . .   5
         4.4.1.4.  Synchronization of BIER information Allocations .   5
     4.5.  PCEP messages . . . . . . . . . . . . . . . . . . . . . .   5
       4.5.1.  The OPEN Object . . . . . . . . . . . . . . . . . . .   6
         4.5.1.1.  PCECC Capability sub-TLV  . . . . . . . . . . . .   6
       4.5.2.  PATH-SETUP-TYPE TLV . . . . . . . . . . . . . . . . .   6
       4.5.3.  CCI object  . . . . . . . . . . . . . . . . . . . . .   6
         4.5.3.1.  BIER Encapsulation Sub-TLV  . . . . . . . . . . .   8
         4.5.3.2.  Address TLVs  . . . . . . . . . . . . . . . . . .   8
         4.5.3.3.  ROUTE-DISTINGUISHER TLV . . . . . . . . . . . . .   9
         4.5.3.4.  FEC object  . . . . . . . . . . . . . . . . . . .   9
   5.  Security Considerations . . . . . . . . . . . . . . . . . . .   9
   6.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   9
   7.  Contributors  . . . . . . . . . . . . . . . . . . . . . . . .   9
   8.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   9
   9.  Normative References  . . . . . . . . . . . . . . . . . . . .  10
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  11

1.  Introduction

   [RFC8283]introduces the architecture for PCE as a central controller
   as an extension of the architecture described in[RFC4655] and assumes
   the continued use of PCEP as the protocol used between PCE and PCC.
   [RFC8283]further examines the motivations and applicability for PCEP
   as a Southbound Interface (SBI), and introduces the implications for
   the protocol.

   [I-D.ietf-pce-pcep-extension-for-pce-controller]specify the
   procedures and PCEP protocol extensions for using the PCE as the
   central controller for static LSPs, where LSPs can be provisioned as
   explicit label instructions at each hop on the end-to-end path.  Each



Chen, et al.             Expires March 28, 2021                 [Page 2]

Internet-Draft                PCECC BIER-TE               September 2020


   router along the path must be told what label-forwarding instructions
   to program and what resources to reserve.  The PCE-based controller
   keeps a view of the network and determines the paths of the end-to-
   end LSPs, and the controller uses PCEP to communicate with each
   router along the path of the end-to-end LSP.

   Bit Index Explicit Replication (BIER)-TE shares architecture and
   packet formats with BIER as described in [RFC8279].  BIER-TE forwards
   and replicates packets based on a BitString in the packet header, but
   every BitPosition of the BitString of a BIER-TE packet indicates one
   or more adjacencies as described in [I-D.ietf-bier-te-arch].

   This document extends
   [I-D.ietf-pce-pcep-extension-for-pce-controller] to specify the
   procedures and PCEP protocol extensions for using the PCE as the
   central controller for BIER-TE.

2.  Conventions used in this document

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC2119.

3.  PCECC BIER-TE Requirements

   Following key requirements for PCECC BIER-TE should be considered
   when`designing the PCECC based solution:

   o  PCEP speaker supporting this draft needs to have the capability to
      advertise its PCECC BIER-TE capability to its peers.

   o  PCEP speaker not supporting this draft needs to be able to reject
      PCECC BIER-TE related message with a reason code that indicates no
      support for PCECC.

   o  PCEP procedures needs to provide a means to update (or cleanup)
      the BIER-TE related informations (BIER subdomain-id, adjacencies
      BitPosition(s), and Adjacency Types etc) to the PCC.

   o  PCEP procedures needs to provide a means to synchronize the BIER-
      TE related informations(BIER subdomain-id, adjacencies
      BitPosition(s), and Adjacency Types etc) between PCE to PCC in the
      PCEP messages.








Chen, et al.             Expires March 28, 2021                 [Page 3]

Internet-Draft                PCECC BIER-TE               September 2020


4.  Procedures for Using the PCE as the Central Controller (PCECC) in
    BIER

4.1.  Stateful PCE Model

   Active stateful PCE is described in [RFC8231].  PCE as a central
   controller (PCECC) reuses existing Active stateful PCE mechanism as
   much as possible to control the LSP.

4.2.  New Functions

   This document uses the same PCEP messages and its extensions which
   are described in [I-D.ietf-pce-pcep-extension-for-pce-controller]for
   PCECC BIER-TE as well.

   PCEP messages PCRpt, PCInitiate, PCUpd are also used to send LSP
   Reports, LSP setup and LSP update respectively.  The extended
   PCInitiate message described in
   [I-D.ietf-pce-pcep-extension-for-pce-controller] is used to download
   or cleanup central controller's instructions (CCIs) (BIER-TE related
   informations in scope of this document).  The extended PCRpt message
   described in [I-D.ietf-pce-pcep-extension-for-pce-controller] is also
   used to report the CCIs (BIER-TE related informations) from PCC to
   PCE.

   [I-D.ietf-pce-pcep-extension-for-pce-controller]specify an object
   called CCI for the encoding of central controller's instructions.This
   document extends the CCI by defining another object-type for BIER-TE.

4.3.  PCECC Capability Advertisement

   During PCEP Initialization Phase, PCEP Speakers (PCE or PCC)
   advertise their support of PCECC extensions.  A PCEP Speaker includes
   the "PCECC Capability" sub-TLV, described in
   [I-D.ietf-pce-pcep-extension-for-pce-controller].

   This document adds T-bit in PCECC-CAPABILITY sub-TLV for BIER-TE.

4.4.  BIER Path Operations

   The PCEP messages pertaining to PCECC BIER-TE MUST include PATH-
   SETUP-TYPE TLV [RFC8408] with PST=TBD in the SRP object to clearly
   identify the PCECC BIER-TE LSP is intended.








Chen, et al.             Expires March 28, 2021                 [Page 4]

Internet-Draft                PCECC BIER-TE               September 2020


4.4.1.  PCECC Bit Index Explicit Replication (BIER)-TE

   Bit Index Explicit Replication (BIER)-TE shares architecture and
   packet formats with BIER as described in [RFC8279].  BIER-TE forwards
   and replicates packets based on a BitString in the packet header, but
   every BitPosition of the BitString of a BIER-TE packet indicates one
   or more adjacencies as described in [I-D.ietf-bier-te-arch].

   This document proposes a new mechanism where PCE allocates centrally
   and uses PCEP to advertise the BIER-TE information(BIER subdomain-id,
   adjacencies BitPosition(s), and Adjacency Types etc).

4.4.1.1.  PCECC BIER-TE information allocation

   Each node (PCC) is allocated a node BIER-TE information by the PCECC.
   The PCECC sends PCInitiate message to update the BIFT table of each
   node.The BIER-TE information mainly includes BIER subdomain-id,
   adjacencies BitPosition(s), and Adjacency Types etc.  On receiving
   the BIER-TE information allocation, each node (PCC) download the
   forwarding instructions accordingly.

4.4.1.2.  Redundant PCEs

   [I-D.litkowski-pce-state-sync] describes synchronization mechanism
   between the stateful PCEs.  The BIER-TE informations allocated by a
   PCE MUST also be synchronized among PCEs for PCECC BIER-TE state
   synchronization.

4.4.1.3.  Re Delegation and Cleanup

   [I-D.ietf-pce-pcep-extension-for-pce-controller] describes the action
   needed for CCIs for the Basic PCECC LSP on this terminated
   session.Similarly actions should be applied for the BIER-TE
   information as well.

4.4.1.4.  Synchronization of BIER information Allocations

   [I-D.ietf-pce-pcep-extension-for-pce-controller]describes the
   synchronization of Central Controller's Instructions (CCI) via LSP
   state synchronization as described in [RFC8231] and [RFC8232].Same
   procedures should be applied for BIER-TE information as well.

4.5.  PCEP messages








Chen, et al.             Expires March 28, 2021                 [Page 5]

Internet-Draft                PCECC BIER-TE               September 2020


4.5.1.  The OPEN Object

4.5.1.1.  PCECC Capability sub-TLV

   [I-D.ietf-pce-pcep-extension-for-pce-controller] defined the
   PCECCCAPABILITY TLV.  A new T-bit is defined in PCECC-CAPABILITY sub-
   TLV for PCECC BIER-TE:


     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |     Type=TBD                  |               Length          |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                Flags                                    |T|I|S|
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                                 Figure 1

   T (PCECC BIER-TE CAPABILITY - 1 bit): If set to 1 by a PCEP speaker,
   it indicates that the PCEP speaker is capable for PCECC BIER-TE
   capability and PCE would allocate BIER-TE information on this
   session.

4.5.2.  PATH-SETUP-TYPE TLV

   The PATH-SETUP-TYPE TLV is defined in [RFC8408].  PST = TBD is used
   when Path is setup via PCECC BIER-TE mode.On a PCRpt/PCUpd/PCInitiate
   message, the PST=TBD indicates that this path was setup via a PCECC
   BIER-TE based mechanism where either the BIER-TE informations were
   allocated/instructed by PCE via PCECC mechanism.

4.5.3.  CCI object

   The Central Control Instructions (CCI) Object is used by the PCE to
   specify the forwarding instructions is defined in
   [I-D.ietf-pce-pcep-extension-for-pce-controller].  This document
   defines another object-type for BIER-TE purpose.

   CCI Object-Type is TBD for BIER-TE as below











Chen, et al.             Expires March 28, 2021                 [Page 6]

Internet-Draft                PCECC BIER-TE               September 2020


     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                                CC-ID                          |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     | subdomain-ID  |     BSL       |           Flags               |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |      SI       |adj-t|           BitPosition         | Reserved|
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                                                               |
     //                       Optional TLV                          //
     |                                                               |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                                 Figure 2

   The field CC-ID is as described in
   [I-D.ietf-pce-pcep-extension-for-pce-controller].

   BIER subdomain-ID: Unique value identifying the BIER subdomain. (as
   defined in [RFC8401].

   BSL: A 1 octet field encodes the length in bits of the BitString as
   per [RFC8296], the maximum length of the BitString is 5,it indicates
   the length of BitString is 1024.It is used to refer to the number of
   bits in the BitString.

   SI: Set Identifier (Section 1 of [RFC8279] used in the encapsulation
   for this BIER subdomain for this BitString length, 1 octet.

   BitPositions: BitPositions indicate adjacencies,16bit.

   The "Reserved" (1 octets) fields are currently unused, and MUST be
   set to zero on transmission and ignored on reception.

   Adjacency Types:There are three types in this document.

   o  0b000:Forward Connected

   o  0b001:Forward Routed

   o  0b010: Local Decap

   o  ECMP will discuss in next version.

   Optional TLV: There are three optional TLV are defined/reused in this
   draft.




Chen, et al.             Expires March 28, 2021                 [Page 7]

Internet-Draft                PCECC BIER-TE               September 2020


4.5.3.1.  BIER Encapsulation Sub-TLV


      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |             Type              |             Length            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |         Flage             | ET|             Reserved          |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |   Max SI      |BS Len |                  BIFT-id              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                                 Figure 3

   The code point for the TLV type is to be defined by IANA.

   Length:4

   ET-Flag:ET(Encapsulation type) Flag,There are two Encapsulation
   Types:

   o  0b00-MPLS encapsulation.

   o  0b01-Non-MPLS encapsulation.

   Max SI: A 1 octet field encoding the Maximum Set Identifier(Section 1
   of [RFC8279] ) used in the encapsulation for this BIER subdomain for
   this BitString length.

   Local BitString Length (BS Len): Encoded BitString length as per
   [RFC8296].

   BIFT-id: A 20 bit field encoding the first BIFT-id of the BIFT-id
   range.

4.5.3.2.  Address TLVs

   When the adjacency type is 0b000:Forward Connected, the BFR address
   information (BFR out-interface and nexthop informations) should be
   carried in the CCI Object.

   Address TLVs defined in
   [I-D.ietf-pce-pcep-extension-for-pce-controller] are used to
   associate the next-hop information, so we Reuse ADDRESS TLV to carry
   the BFR out-interface and nexthop informations.





Chen, et al.             Expires March 28, 2021                 [Page 8]

Internet-Draft                PCECC BIER-TE               September 2020


4.5.3.3.  ROUTE-DISTINGUISHER TLV

   When the adjacency type is 0b001: Forward Routed, a VRF and the next-
   hop informations should be carried in the CCI Object, so we reuse the
   ROUTE-DISTINGUISHER TLV defined in [I-D.ietf-pce-pcep-flowspec] and
   Address TLVs defined in
   [I-D.ietf-pce-pcep-extension-for-pce-controller] to carry the next
   hop is associated with a specific VPN identified by the RD.

   When the adjacency type is 0b010: Local Decap, only a VRF should be
   carried in the CCI Object.  Reuse the ROUTE-DISTINGUISHER TLV which
   is defined in [I-D.ietf-pce-pcep-flowspec] carries an RD value, used
   to identify a VRF.

4.5.3.4.  FEC object

   BIER-TE information is always associated with adjacency, so we reuse
   FEC Object 1'IPv4 Node ID' and FEC Object-Type 2 'IPv6 Node ID'
   defined in [I-D.zhao-pce-pcep-extension-pce-controller-sr] to clearly
   identify the adjacency for which a SI: BitPosition is being
   allocated.

5.  Security Considerations

   TBD.

6.  IANA Considerations

   TBD.

7.  Contributors

   The following author contributed significantly to this document:

      Dhruv Dhody

      Huawei

      rdhruv.ietf@gmail.com

8.  Acknowledgements

   TBD.








Chen, et al.             Expires March 28, 2021                 [Page 9]

Internet-Draft                PCECC BIER-TE               September 2020


9.  Normative References

   [I-D.ietf-bier-te-arch]
              Eckert, T., Cauchie, G., and M. Menth, "Tree Engineering
              for Bit Index Explicit Replication (BIER-TE)", draft-ietf-
              bier-te-arch-08 (work in progress), July 2020.

   [I-D.ietf-pce-pcep-extension-for-pce-controller]
              Li, Z., Peng, S., Negi, M., Zhao, Q., and C. Zhou, "PCEP
              Procedures and Protocol Extensions for Using PCE as a
              Central Controller (PCECC) of LSPs", draft-ietf-pce-pcep-
              extension-for-pce-controller-07 (work in progress),
              September 2020.

   [I-D.ietf-pce-pcep-flowspec]
              Dhody, D., Farrel, A., and Z. Li, "PCEP Extension for Flow
              Specification", draft-ietf-pce-pcep-flowspec-10 (work in
              progress), August 2020.

   [I-D.litkowski-pce-state-sync]
              Litkowski, S., Sivabalan, S., Li, C., and H. Zheng, "Inter
              Stateful Path Computation Element (PCE) Communication
              Procedures.", draft-litkowski-pce-state-sync-08 (work in
              progress), July 2020.

   [I-D.zhao-pce-pcep-extension-pce-controller-sr]
              Li, Z., Peng, S., Negi, M., Zhao, Q., and C. Zhou, "PCEP
              Procedures and Protocol Extensions for Using PCE as a
              Central Controller (PCECC) of SR-LSPs", draft-zhao-pce-
              pcep-extension-pce-controller-sr-07 (work in progress),
              July 2020.

   [RFC4655]  Farrel, A., Vasseur, J., and J. Ash, "A Path Computation
              Element (PCE)-Based Architecture", RFC 4655,
              DOI 10.17487/RFC4655, August 2006,
              <https://www.rfc-editor.org/info/rfc4655>.

   [RFC8231]  Crabbe, E., Minei, I., Medved, J., and R. Varga, "Path
              Computation Element Communication Protocol (PCEP)
              Extensions for Stateful PCE", RFC 8231,
              DOI 10.17487/RFC8231, September 2017,
              <https://www.rfc-editor.org/info/rfc8231>.

   [RFC8232]  Crabbe, E., Minei, I., Medved, J., Varga, R., Zhang, X.,
              and D. Dhody, "Optimizations of Label Switched Path State
              Synchronization Procedures for a Stateful PCE", RFC 8232,
              DOI 10.17487/RFC8232, September 2017,
              <https://www.rfc-editor.org/info/rfc8232>.



Chen, et al.             Expires March 28, 2021                [Page 10]

Internet-Draft                PCECC BIER-TE               September 2020


   [RFC8279]  Wijnands, IJ., Ed., Rosen, E., Ed., Dolganow, A.,
              Przygienda, T., and S. Aldrin, "Multicast Using Bit Index
              Explicit Replication (BIER)", RFC 8279,
              DOI 10.17487/RFC8279, November 2017,
              <https://www.rfc-editor.org/info/rfc8279>.

   [RFC8283]  Farrel, A., Ed., Zhao, Q., Ed., Li, Z., and C. Zhou, "An
              Architecture for Use of PCE and the PCE Communication
              Protocol (PCEP) in a Network with Central Control",
              RFC 8283, DOI 10.17487/RFC8283, December 2017,
              <https://www.rfc-editor.org/info/rfc8283>.

   [RFC8296]  Wijnands, IJ., Ed., Rosen, E., Ed., Dolganow, A.,
              Tantsura, J., Aldrin, S., and I. Meilik, "Encapsulation
              for Bit Index Explicit Replication (BIER) in MPLS and Non-
              MPLS Networks", RFC 8296, DOI 10.17487/RFC8296, January
              2018, <https://www.rfc-editor.org/info/rfc8296>.

   [RFC8401]  Ginsberg, L., Ed., Przygienda, T., Aldrin, S., and Z.
              Zhang, "Bit Index Explicit Replication (BIER) Support via
              IS-IS", RFC 8401, DOI 10.17487/RFC8401, June 2018,
              <https://www.rfc-editor.org/info/rfc8401>.

   [RFC8408]  Sivabalan, S., Tantsura, J., Minei, I., Varga, R., and J.
              Hardwick, "Conveying Path Setup Type in PCE Communication
              Protocol (PCEP) Messages", RFC 8408, DOI 10.17487/RFC8408,
              July 2018, <https://www.rfc-editor.org/info/rfc8408>.

Authors' Addresses

   Ran Chen
   ZTE Corporation

   Email: chen.ran@zte.com.cn


   BenChong Xu
   ZTE Corporation

   Email: xu.benchong@zte.com.cn


   Chun Zhu
   ZTE Corporation

   Email: zhu.chun@zte.com.cn





Chen, et al.             Expires March 28, 2021                [Page 11]
