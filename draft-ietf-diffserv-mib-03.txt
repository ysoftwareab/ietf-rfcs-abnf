Internet Engineering Task Force                                 F. Baker
Diffserv Working Group                                     Cisco Systems
INTERNET-DRAFT                                                   K. Chan
Expires November 2000                                     Nortel Networks
draft-ietf-diffserv-mib-03.txt                                  A. Smith
                                                        Extreme Networks
                                                                May 2000
                  Management Information Base for the
                  Differentiated Services Architecture


Status of this Memo

This document is an Internet-Draft and is in full conformance with all
provisions of Section 10 of RFC 2026. Internet-Drafts are working
documents of the Internet Engineering Task Force (IETF), its areas, and
its working groups. Note that other groups may also distribute working
documents as Internet-Drafts.

Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any
time. It is inappropriate to use Internet Drafts as reference material
or to cite them other than as "work in progress."

The list of current Internet-Drafts can be accessed at
http://www.ietf.org/ietf/1id-abstracts.txt.  The list of Internet-Draft
Shadow Directories can be accessed at http://www.ietf.org/shadow.html.

This document is a product of the IETF's Differentiated Services Working
Group. Comments should be addressed to WG's mailing list at
diffserv@ietf.org. The charter for Differentiated Services may be found
at http://www.ietf.org/html.charters/diffserv-charter.html

Copyright (C) The Internet Society (2000). All Rights Reserved.
Distribution of this memo is unlimited.


Abstract

This memo describes a SMIv2 MIB for a device implementing the
Differentiated Services Architecture [DSARCH], described in detail by
the Differentiated Services Router Conceptual Model [MODEL].










Baker, Chan, Smith        Expires November 2000         [Page 1]

Internet Draft         Differentiated Services MIB              May 2000


1.  The SNMP Management Framework

The SNMP Management Framework presently consists of five major
components:

    o   An overall architecture, described in RFC 2571 [1].

    o   Mechanisms for describing and naming objects and events for the
        purpose of management. The first version of this Structure of
        Management Information (SMI) is called SMIv1 and described in
        RFC 1155 [2], RFC 1212 [3] and RFC 1215 [4]. The second version,
        called SMIv2, is described in RFC 2578 [5], RFC 2579 [6] and RFC
        2580 [7].

    o   Message protocols for transferring management information. The
        first version of the SNMP message protocol is called SNMPv1 and
        described in RFC 1157 [8]. A second version of the SNMP message
        protocol, which is not an Internet standards track protocol, is
        called SNMPv2c and described in RFC 1901 [9] and RFC 1906 [10].
        The third version of the message protocol is called SNMPv3 and
        described in RFC 1906 [10], RFC 2572 [11] and RFC 2574 [12].

    o   Protocol operations for accessing management information. The
        first set of protocol operations and associated PDU formats is
        described in RFC 1157 [8]. A second set of protocol operations
        and associated PDU formats is described in RFC 1905 [13].

    o   A set of fundamental applications described in RFC 2573 [14] and
        the view-based access control mechanism described in RFC 2575
        [15].

A more detailed introduction to the current SNMP Management Framework
can be found in RFC 2570 [16].

Managed objects are accessed via a virtual information store, termed the
Management Information Base or MIB. Objects in the MIB are defined using
the mechanisms defined in the SMI.

This memo specifies a MIB module that is compliant to the SMIv2. A MIB
conforming to the SMIv1 can be produced through the appropriate
translations. The resulting translated MIB must be semantically
equivalent, except where objects or events are omitted because no
translation is possible (use of Counter64). Some machine-readable
information in SMIv2 will be converted into textual descriptions in
SMIv1 during the translation process. However, this loss of machine
readable information is not considered to change the semantics of the
MIB.





Baker, Chan, Smith        Expires November 2000         [Page 2]

Internet Draft         Differentiated Services MIB              May 2000


2.  Structure of this MIB

This MIB is designed according to the Differentiated Services
implementation conceptual model documented in [MODEL].

2.1.  Overview

The conceptual model [MODEL] discusses the way we model the ingress and
egress interfaces of an 'n'-port router. In this MIB, we model these
identically, making the distinction between them an index variable.
Each interface then performs some or all of the following high-level
functions:

o    Classify each packet according to some set of rules

o    Determine whether the data stream the packet is part of is within
     or outside its rate

o    Perform a set of resulting actions, possibly including counting the
     traffic, application of an appropriate drop policy and marking of
     the traffic with a Differentiated Services Code Point (DSCP) as
     defined in [DSFIELD].

o    Enqueue the traffic for output in the appropriate queue, whose
     scheduler may shape the traffic or simply forward it with some
     minimum rate or maximum latency.

The MIB therefore contains the following elements:

Classifier and Filter Tables
     A general extensible framework and one example (an IP Six-Tuple
     Multi-Field Classification Table).

Meter Tables
     A general extensible framework and one example (an exponential
     weighted moving average meter).

Action Tables
     Absolute Drop, Mark and Count actions. The "multiplexer",
     "replicator" and "null" actions described in [MODEL] are
     accomplished implicitly by means of the RowPointer structures of
     the other elements.

Queue, Scheduler and Algorithmic Dropper Tables
     Queue, Scheduler and Algorithmic Dropper Tables.







Baker, Chan, Smith        Expires November 2000         [Page 3]

Internet Draft         Differentiated Services MIB              May 2000


2.2.  Classifiers

The classifier and filter tables determine how traffic is sorted out.
They identify separable classes of traffic, by reference to an
appropriate filter, which may select anything from an individual micro-
flow to aggregates identified by DSCP.

The classification is used to send these separate streams to appropriate
meters or action elements. For example, to indicate a multi-stage meter,
sub-classes of traffic may be sent to different meter stages: e.g. in an
implementation of the Assured Forwarding (AF) PHB [AF-PHB], AF11 traffic
might be sent to the first meter, AF12 traffic might be sent to the
second and AF13 traffic sent to the second meter stage's out-of-profile
action.

2.2.1.  Classifier Table

The structure of the classifier table, as described in [MODEL], is a
sequence of unambiguous tests. Within each stage in the sequence, it
must not be important in which order the tests are made. This is to
facilitate optimized implementations such as index trees. Order is
present only to resolve ambiguity: for that reason the stage in the
sequence is referred to here and in [MODEL] as the "precedence" of the
classifier stage: stages with higher values of precedence are compared
first; the order of tests for entries of the same precedence is
unimportant.

An important form of classifier is "everything else": the final stage of
the classifier i.e. the one with the lowest precedence, must be
"complete" since the result of an incomplete classifier is not
necessarily deterministic - see [MODEL] section 4.1.2.

The definition of the actual filter to be used by the classifier is
referenced via a RowPointer: this enables the use of any sort of filter
table that one might wish to design, standard or proprietary. The filter
table may be, but does not need to be, defined in this MIB module.

The classifiers specified here are at the interface level i.e. they are
indexed by ifIndex: they may be derived from some more general policies
e.g. something based on interface roles, but such discussion is outside
the scope of this document. See e.g. [POLTERM] section 4 for a
discussion of Roles.

2.2.2.  IP Six-Tuple Classifier Table

This MIB includes a definition for an IP Six-Tuple Classifier, used for
IP traffic classification. Entries in this filter table are referenced





Baker, Chan, Smith        Expires November 2000         [Page 4]

Internet Draft         Differentiated Services MIB              May 2000


from the RowPointer diffServClassifierPattern attributes of classifier
table entries.

A Behavior Aggregate (BA) Classifier, acting only on DSCPs, is a simple
form of the IP Six-Tuple Classifier. It is represented by having the
diffServSixTupleClfrDscp attribute set to the desired DSCP and all other
classification attributes set to match-all, their default settings. The
alternative approach of providing a specific definition in this MIB for
a BA Classifier was discussed and rejected.

Each entry in the IP Six-Tuple Classifier Table defines a single filter.
The textual convention of InetAddress [INETADDR] is used for both IPv4
and IPv6 addressing.  The use of IP Six-Tuple Classifiers is discussed
in [DSARCH] and abstract examples of how they might be configured are
provided in [MODEL].

2.3.  Meters

A meter, according to [MODEL] section 5, measures the rate at which
packets making up a stream of traffic pass it, compares this rate to
some set of thresholds and produces some number (two or more) of
potential results. A given packet is said to "conform" to the meter if,
at the time that the packet is being looked at, the stream appears to be
within the meter's profile. MIB syntax makes it easiest to define this
as a sequence of one or more cascaded pass/fail tests, modeled here as
if-then-else constructs.

It is important to understand that this way of modelling does not imply
anything about the implementation being "sequential": multi-rate/multi-
profile meters e.g. those designed to support [SRTCM] or [TRTCM], can
still be modelled this way even if they, of necessity, share information
between the stages: the stages are introduced merely as a notational
convenience in order to simplify the MIB structure.

2.3.1.  Meter Table

The generic meter table is used as a base for all more specific forms of
meter.  The definition of the specific parameters of the meter to be
used is referenced via a RowPointer: this enables the use of any sort of
specific meter table that one might wish to design, standard or
proprietary. The specific meter table may be, but does not need to be,
defined in this MIB module.

2.3.2.  Token-Bucket Meter Table

This is included as an example of a common type of meter.  Entries in
this table are referenced from the RowPointer diffServMeterSpecific





Baker, Chan, Smith        Expires November 2000         [Page 5]

Internet Draft         Differentiated Services MIB              May 2000


attributes of meter table entries.  The parameters are represented by a
rate diffServTBMeterRate and a burst size diffServTBMeterBurstSize.


2.4.  Actions

Actions include "no action", "mark the traffic with a DSCP", "drop the
traffic" or "count it". Other tasks such as "shape the traffic" or "drop
based on some algorithm" are handled elsewhere as queueing mechanisms,
rather than actions, consistent with [MODEL].  The "multiplexer",
"replicator" and "null" actions described in [MODEL] are accomplished
implicitly by means of the RowPointer structures of the other elements.

This MIB uses the Action Table diffServActionTable to organize one
Action's relationship with the element(s) before and after it. It allows
Actions to be cascaded to enable multiple Actions be applied to a single
traffic stream by using each entry's diffServActionNext attribute.  The
last entry's diffServActionNext attribute may point to the next TCB
element, normally a Queueing element.

The parameters needed for each Action element will depend on the type of
Action to be taken. Hence there are specific Action Tables for all the
different Action types.  This flexibility allows additional Actions be
specified in future revisions of this MIB, or in other MIBs and also
allows for the use of proprietary Actions without impact on those
defined here.

2.4.1.  DSCP Mark Action Table

This Action is applied to traffic in order to mark it with a Diffserv
Codepoint (DSCP) value, specified in the diffServDscpMarkActTable.
Other marking actions might be specified elsewhere - these are outside
the scope of this MIB.

2.4.2.  Count Action Table

Count Actions are used to count the traffic passing along a particular
path through the model. If specified, they are likely to be placed
first, before other types of Action. For example, when both a Count and
an Absolute Dropper Action are specified, the Count Action needs to
count the traffic stream before any traffic gets dropped.  Note that
there are counters contained directly in Algorithmic Dropper elements to
indicate the amount of traffic dropped by those elements.

Counters are arranged in a single table but with separate conformance
statements for low-speed and high-speed interfaces, consistent with
[IFMIB].





Baker, Chan, Smith        Expires November 2000         [Page 6]

Internet Draft         Differentiated Services MIB              May 2000


2.4.3.  Absolute Drop Action

This action just silently discards all traffic presented to it, without
counting it. This action has no additional parameters and so is
represented only as a diffServActionType of dropAlways without any
specific parameters (diffServActionSpecific value will be null).

2.5.  Queueing Elements

These include Algorithmic Droppers, Queues and Schedulers.

2.5.1.  Algorithmic Dropper Table

Algorithmic Droppers have a close relationship with queueing: they are
represented in this MIB by entries in an Algorithmic Dropper Table.
Entries contain a "next" attribute which indicates to which queue they
sink their traffic. They may also contain a pointer to specific detail
of the drop algorithm. This MIB only defines the detail for one drop
algorithm, Tail Drop; other algorithms are outside the scope of this MIB
but the general framework is intended to allow for their inclusion in
other modules.

One generally-applicable parameter of a dropper is the specification of
a queue-depth threshold at which some drop action is to start. This is
represented in this MIB, as a base attribute of the Algorithmic Dropper
entry, by pointing to the queue for which depth is to be compared and
the threshold, in bytes, to compare against.

<ed: is we need to represent a dropper as depending on multiple queues
then this single-queue pointer and threshold is not adequate: should we
leave them here or not? they will be useful for many, but not all,
dropper algorithms.>

o    A Tail Dropper requires the specification of a maximum queue depth
     threshold: when the queue pointed at by diffServAlgDropQMeasure
     reaches that depth threshold, diffServAlgDropQThresh, any new
     traffic arriving at the dropper is discarded.

o    Random Droppers require more detailed specification of the
     characteristics of their drop functions. Representations of these
     functions are outside the scope of this MIB although they should
     use the available diffServAlgDropQMeasure and
     diffServAlgDropQThresh parameters where possible.

<ed: should we keep this example (next 3 paragraphs) or not? It is not
supported by the current MIB.>






Baker, Chan, Smith        Expires November 2000         [Page 7]

Internet Draft         Differentiated Services MIB              May 2000


     As an example of a random dropper, RED-like droppers often have the
     function described as a plot of drop probability (P) against
     averaged queue length (Q).  (Qmin,Pmin) defines the start of the
     characteristic plot.  Normally Pmin=0, meaning with average queue
     length below Qmin, there will be no drops.  (Qmax,Pmax) defines a
     "knee" on the plot, after which point the drop probability become
     more progressive (greater slope).  (Qclip,1) defines the queue
     length at which all packets will be dropped. Notice this is
     different from Tail Drop because this uses an averaged queue
     length.  It is possible for Qclip = Qmax.

     The calculation of the averaged queue length may also have an
     important bearing on the behaviour of the dropper: parameters may
     include the sampling interval and the weight of each sample. The
     performance may be very sensitive to the values of these parameters
     and a wide range of possible values may be required due to a wide
     range of link speeds. There is ongoing research on this topic, see
     e.g. [ACTQMGMT].

     Deterministic Droppers can be viewed as a special case of Random
     Droppers with the drop probability restricted to 0 and 1. Hence
     Deterministic Droppers might be described by a Random Dropper with
     Pmin = 0, Pmax = 1, Qmin = Qmax = Qclip, the averaged queue length
     at which dropping occurs.

Each dropper specification is associated with a queue. This allows
multiple drop processes (of same or different types) be associated with
the same queue, as different PHB implementations may require.  This also
allows for sequences of multiple droppers if necessary.

2.5.2.  Queues and Schedulers

The Queue Table models simple FIFO queues, as described in [MODEL]
section 7.1.1.  The Scheduler Table allows flexibility in constructing
both simple and somewhat more complex queueing hierarchies from those
queues.  Of course, since TCBs can be cascaded multiple times on an
interface, even more complex hierarchies can be constructed that way
also.

The entries in the Queue Table have attributes which include a
specification of the scheduler which services the queue. They are
pointed at by the "next" attributes of the upstream elements e.g.
diffServMeterSucceedNext.  Note that multiple upstream elements may
direct their traffic to the same Queue Table entry. For example, the
Assured Forwarding PHB suggests that all traffic marked AF11, AF12 or
AF13 be placed in the same queue, after metering, without reordering.
This would be represented by having the diffServMeterSucceedNext of each





Baker, Chan, Smith        Expires November 2000         [Page 8]

Internet Draft         Differentiated Services MIB              May 2000


upstream meter point at the same entry in the Queue Table.

The Scheduler Table represented in this MIB module contains entries,
each of which represents the algorithm in use for servicing the one or
more queues that feed it. The [MODEL] section 7.1.2 describes a
scheduler with multiple inputs: this is represented in the MIB by
including the scheduling parameters associated with a scheduler input in
the Queue Table entry that feeds it and having that point at one
particular Scheduler Table entry. In this way, sets of Queues can be
grouped together as inputs to the same Scheduler.  This table serves to
represent the example scheduler described in the [MODEL]: other more
complex representations might be created outside of this MIB.

Each scheduler input, as represented by a Queue Table entry, is assigned
a priority with respect to all the other inputs feeding the same
scheduler.  A higher-priority input will be serviced first over a lower-
priority input, assuming that all guarantees have already been met.
This priority parameter, used on its own with default values for the
other parameters, serves to allow representation of a Strict Priority
scheduler.

For Weighted Queueing algorithms e.g. WFQ, WRR, the "weight" of a given
scheduler input is represented with a Minimum Service Rate leaky-bucket
profile which provides guaranteed bandwidth to that input, if required.
This is represented, as were token-bucket meters, by a rate
diffServQueueMinRateAbs and a burst size diffServQueueMinBurstSize. The
rate may, alternatively, be represented by a relative value, as a
fraction of the interface's current line rate, diffServQueueMinRateRel
to assist in cases where line rates are variable or where a higher-level
policy might be expressed in terms of fractions of network resources.
The two rate parameters are inter-related and changes in one may be
reflected in the other.

An input may also be capable of acting as a non-work-conserving [MODEL]
traffic shaper: this is done by defining a Maximum Service Rate leaky-
bucket profile in order to limit the scheduler bandwidth available to
that input.  This is represented, similarly to the minimum rate, by a
rate diffServQueueMaxRateAbs and a burst size diffServQueueMaxBurstSize.
The rate may, alternatively, be represented by a relative value, as a
fraction of the interface's current line rate, diffServQueueMaxRateRel.

2.5.3.  Example of Algorithmic Droppers, Queues and Schedulers

As an example, the hypothetical queue/scheduler configuration shown in
[MODEL] section 8.1 is shown in Table 1.







Baker, Chan, Smith        Expires November 2000         [Page 9]

Internet Draft         Differentiated Services MIB              May 2000



  QId MinRate           MaxRate           Priority   Scheduler
  --- ----------------  ----------------  --------   ---------
  1   100kbps/20kbyte   none/none           20       Scheduler.1
  2   none/none         100kbps/100kbyte    40       Scheduler.1
  3   200kbps/20kbyte   none/none           20       Scheduler.1
  4   none/none         none/none           10       Scheduler.1

  SchedId   Type
  -------   ------------------
  1         weightedRoundRobin

      Table 1: Example Queue and Scheduler Parameters

Queues 1 and 3 are serviced for long enough to give them their promised
bandwidths and burst sizes, if they need them.  Queue 2 is then serviced
up to its maximum limit profile.  Only then does Queue 4 get an
opportunity to send its traffic.  As an example of the use of the MIB
structures, Figure 1 shows how the example would be represented.

2.5.4.  Example of extending this MIB

     <ed: is it worth having this example here?>

One way to extend this MIB structure to accomodate a more complex
dropping algorithm might be to define a specific dropper table in
another MIB module, pointed at by diffServAlgDropSpecific, containing
its own parameters, as shown in figure 2. This algorithm might depend
for its operation e.g. on feedback of a queue's depth but pre-processed
by some type of smoothing function with its own parameters. The extended
table could still use some of the fields of the standard Algorithmic
Dropper Table, if relevant, although any divergent uses would have to be
well-documented in the extended MIB.

2.6.  The use of RowPointer

RowPointer is a textual convention used to identify a conceptual row in
an SNMP Table by pointing to one of its objects. In this MIB, it is used
in two ways: to indicate indirection and to indicate succession.

When used for indirection, as in the diffServClassifierTable, the idea
is to allow other MIBs, including proprietary ones, to identify new and
arcane classifiers - MAC headers, IP4 and IP6 headers, BGP Communities
and all sorts of other things.

When used for succession, it answers the question "what happens next?".
Rather than presume that the next table must be as specified in the





Baker, Chan, Smith        Expires November 2000        [Page 10]

Internet Draft         Differentiated Services MIB              May 2000



                          +-----------+
  ----------------------->| Next    -----+
                          | Min=Profl4|  |
                          | Max=none  |  |
                          | Pri=20    |  |
                          | Type=fifo |  |
                          +-----------+  |
                         Queue.ifIndex.1 |
                                         |
      +-----------+       +-----------+  |
  --->| Next    -----+--->| Next   ------+
      | Thresh=1k |  |    | Min=none  |  |
      | Measure -----+    | Max=Profl5|  |
      | Type=Tail |       | Pri=40    |  |
      | Spec=none |       | Type=fifo |  |    +----------+
      +-----------+       +-----------+  +--->| Next   -----> 0.0
        Dropper.1        Queue.ifIndex.2 |    | Algrm=wrr|  or next TCB
                                         |    +----------+
      +-----------+       +-----------+  |   Scheduler.ifIndex.1
  --->| Next    -----+--->| Next    -----+
      | Thresh=2k |  |    | Min=Profl3|  |
      | Measure -----+    | Max=none  |  |
      | Type=Tail |       | Pri=20    |  |
      | Spec=none |       | Type=fifo |  |
      +-----------+       +-----------+  |
        Dropper.2        Queue.ifIndex.3 |
                                         |
      +-----------+       +-----------+  |
  --->| Next   ------+--->| Next    -----+
      | Thresh=4k |  |    | Min=none  |
      | Measure -----+    | Max=none  |
      | Type=Tail |       | Pri=10    |
      | Spec=none |       | Type=fifo |
      +-----------+       +-----------+
        Dropper.3        Queue.ifIndex.4

      Figure 1: Example of the use of Queueing elements














Baker, Chan, Smith        Expires November 2000        [Page 11]

Internet Draft         Differentiated Services MIB              May 2000


      +-----------+       +-----------+
  --->| Next   ------+--->| Next    ---------> to Scheduler
      | Thresh=X  |  |    | Min=none  |
      | Measure -----+    | Max=none  |
      | Type=Ext  |       | Pri=10    |
      | Spec    -----+    | Type=fifo |
      +-----------+  |    +-----------+
        Dropper.3    |   Queue.ifIndex.4
                     |
                     |    +-------------+
                     +--->|Smooth1=10   |
                          |Smooth2=2000 |
                          | <etc.>      |
                          +-------------+
                           DropperExt.3

  Figure 2: Example of extending the MIB for more complex droppers

conceptual model [MODEL] and providing its index, the RowPointer takes
you to the MIB row representing that thing. In the diffServMeterTable,
for example, the diffServMeterFailNext RowPointer might take you to
another meter, while the diffServMeterSucceedNext RowPointer would take
you to an action.

The RowPointer construct is used to build the TCBs described in [MODEL]:
this MIB does not model TCBs directly - it operates at a lower level of
abstraction using only individual elements, connected in succession by
RowPointers. Therefore, the concept of TCBs enclosed in other more
functional TCBs is not applicable to this MIB, although such a concept
may be employed by management tools that use this MIB.






















Baker, Chan, Smith        Expires November 2000        [Page 12]

Internet Draft         Differentiated Services MIB              May 2000


3.  Editorial information

<this section will be removed before publication>

3.1.  Open Issues resolved in this draft

(0)  Terminology is more in line with [MODEL], [POLTERM] and [DSTERM].
     Discarder -> "Algorithmic Dropper", "Monitor" -> "Counter"
     "Classifier element" -> "Filter"

(1)  Cascaded token-buckets is not equivalent to multi-rate token-
     bucket: do we need to fix this by allowing a multi-rate TB in the
     MIB? Or, by defining cascaded buckets to mean "multi-rate". (assume
     the latter - see text in 2.3)

(2)  Markers: model only describes DSCP-markers: do we need to be able
     to extend this to other sorts (e.g. 802.1p), even if we do not
     represent them in this MIB today? (yes). No MIB changes, just
     words.

(3)  Counters: should specific blocks include their own or is a "counter
     action", as described in the Model, sufficient to count all paths
     through a device? (as appropriate). Per-queue counters are
     derivable from "action" ones.  Per-classifier counters: may feed
     through from clasifiers to distinct counter actions.

(4)  Queue Sets: are these generally applicable? (no). The example in
     section 2.5.1 is hard to follow: we should describe this example in
     [MODEL] and then show how it maps to MIB in the MIB draft. - DONE

(5)  Do we need scheduling units of "packets"? (NO) Should we use "kbps"
     or just "bps" for rates? DONE - all rates are in kbps.

(6)  Are "absolute" rates sufficient or should we include "relative to
     line speed" ones as well? (yes) - DONE - explained that these are
     interrelated.

(7)  Scheduler weights vs. rates vs. priorities: this is confusing -
     suggest we stick to rates and priorities (see Model draft 7.1.2) -
     DONE.

(8)  Queue Measure table:

o    This allows for RIO - multiple averaging functions for the same
     queue: is this needed? OUT OF SCOPE.







Baker, Chan, Smith        Expires November 2000        [Page 13]

Internet Draft         Differentiated Services MIB              May 2000


o    mixes config with status objects - split these? N/A.

o    do we need floating-point representation for "weight"? N/A.

o    do we need MIB visibility for average queue depth? N/A.

o    do we need MIB-configurable averaging functions (sample
     weight/interval)?  (maybe just "sample weight") - NO: averaging
     functions will be left out although framework allows for their
     inclusion separately.

(9)  Counter compliance: paste text from IF-MIB re line-speeds. Do you
     still have to do the low-speed counters for fast interfaces? YES.
     DONE.

(10) Meters: are these mandatory for compliance? NO

(11) Discussion material: move most of this to Model draft e.g. most of
     3.1, 3.3, "Dropper/discarder" part of 3.4, nearly all of 3.5. Just
     leave the "how does the MIB map from the Model" parts in the MIB
     draft, no general discussion. DONE.

(12) Counters: merged in 32-bit and 64-bit counters - conformance
     statements sort out which ones must be implemented. This is
     consistent with [IFMIB]. DONE.

(13) Droppers: we used to have a common "dropper" table that represented
     all of: dropAlways, randomDrop, tailDrop with just some parameters
     valid for the simpler ones. A simpler representation is to define
     specific dropper tables for each type (e.g. a single OID to point
     at for dropAlways since it is always the last action in a chain)
     but this would mean a larger number of (simpler) MIB objects.
     CHANGES: dropAlways is still an Action but the others are moved to
     a diffServAlgDropTable. This table can handle tail/head drop. Other
     algorithms, specifically RED, are out of scope for now but can be
     added using the framework defined here.

(14) Should TBMeterTable just AUGMENT the MeterTable, should it use same
     indices or are separate structures linked by RowPointers
     preferable? SAME INDICES - DONE.

(15) Do we need to model multiple queues feeding back into a single
     dropper algorithm? (yes).  If so, the current single-queue pointer
     and threshold will not be adequate - should we leave them in? They
     will be useful for many, but not all, dropper algorithms. (yes)







Baker, Chan, Smith        Expires November 2000        [Page 14]

Internet Draft         Differentiated Services MIB              May 2000


(17) We have concepts of "inbound" and "outbound" directions: but if we
     have a series of multiple TCBs on a given interface for the same
     direction (allowed by the model) then we do not have a way to
     indicate "this is the 1st one". Moreover, it is a somewhat
     convoluted process to then find the 2nd, 3rd etc. ones - you would
     have to follow the RowPointers to get there: should we explicitly
     have an index to enable/help these lookup operations? Note: this is
     not the same issue as needing a "precedence" for each filter entry
     of a classifier (yes) - added another index to classifiers to
     represent what "level" they operate at for a given
     interface/direction.

3.2.  Still Open Issues

(16) How should the creation of counter actions be under the control of
     manager or agent: should a diffServActionEntry and
     diffServCountActEntry appear by magic (the device surely knows what
     counters it can and cannot maintain on a given interface)? (assume
     no) If not, should diffServCountActEntry appear magically when a
     diffServAction element is created which points at the
     diffServCountActTable (then would be no need for
     diffServCountActStatus)? (assume no)

(18) Should manager be allowed to create Queue elements or should agent
     be in control of this? (the former)

(19) Should manager be allowed to create Scheduler elements or should
     agent be in control of this? (the former)

(20) Related to (17) above, do we also need a "level" index for elements
     other than classifiers? (no)

(21) Do we need diffServAlgDropType of both "headDrop" and "tailDrop" or
     should we just represent the tail dropper by placing a dropper
     after the queue instead of before the queue, as linked by the
     diffServQNext and diffServAlgDropNext RowPointers? (the former).

(22) Do we need to support RED algorithms for algorithm parameter
     configuration and monitoring?  If so, what variables are needed?













Baker, Chan, Smith        Expires November 2000        [Page 15]

Internet Draft         Differentiated Services MIB              May 2000


4.  MIB Definition


DIFF-SERV-MIB DEFINITIONS ::= BEGIN

    IMPORTS
    Unsigned32, Counter32, Counter64, OBJECT-TYPE,
    MODULE-IDENTITY, OBJECT-IDENTITY, zeroDotZero, mib-2
         FROM SNMPv2-SMI
    TEXTUAL-CONVENTION, RowStatus, RowPointer, TestAndIncr
         FROM SNMPv2-TC
    MODULE-COMPLIANCE, OBJECT-GROUP
         FROM SNMPv2-CONF
    ifIndex
        FROM IF-MIB
    InetAddressType, InetAddress
        FROM INET-ADDRESS-MIB
    BurstSize
        FROM INTEGRATED-SERVICES-MIB;

diffServMib MODULE-IDENTITY
    LAST-UPDATED "200005110000Z"
    ORGANIZATION "IETF Diffserv WG"
    CONTACT-INFO
       "       Brian Carpenter (co-chair of Diffserv WG)
               c/o iCAIR
               1890 Maple Ave, #150
               Evanston, IL 60201, USA
       Phone:  +1 847 467 7811
       E-mail: brian@icair.org

               Kathie Nichols (co-chair of Diffserv WG)
               Cisco Systems
               170 W. Tasman Drive
               San Jose, CA 95134-1706, USA
       Phone:  +1 408 525 4857
       E-mail: kmn@cisco.com

               Fred Baker (author)
               Cisco Systems
               519 Lado Drive
               Santa Barbara, CA 93111, USA
       E-mail: fred@cisco.com

               Kwok Ho Chan (author)
               Nortel Networks
               600 Technology Park Drive





Baker, Chan, Smith        Expires November 2000        [Page 16]

Internet Draft         Differentiated Services MIB              May 2000


               Billerica, MA 01821, USA
       E-mail: khchan@nortelnetworks.com

               Andrew Smith (author)
               Extreme Networks
               3585 Monroe St.
               Santa Clara, CA 95051, USA
       E-mail: andrew@extremenetworks.com"
    DESCRIPTION
       "This MIB defines the objects necessary to manage a device that
       uses the Differentiated Services Architecture described in RFC
       2475 and the Conceptual Model for DiffServ Routers in draft-ietf-
       diffserv-model-03.txt."
    REVISION "200005110000Z"
    DESCRIPTION
       "Initial version, published as RFC xxxx."
    ::= { mib-2 12345 }  -- anybody who uses this unassigned
                         -- number deserves the wrath of IANA

diffServObjects        OBJECT IDENTIFIER ::= { diffServMib 1 }
diffServTables         OBJECT IDENTIFIER ::= { diffServMib 2 }
diffServMIBConformance OBJECT IDENTIFIER ::= { diffServMib 3 }


-- These textual conventions have no effect on either the syntax
-- nor the semantics of any managed object.  Objects defined
-- using this convention are always encoded by means of the
-- rules that define their primitive type.

Dscp ::= TEXTUAL-CONVENTION
    DISPLAY-HINT "d"
    STATUS   current
    DESCRIPTION
       "The IP header Diffserv Code-Point that may be used for
       discriminating or marking a traffic stream.  The value -1 is used
       to indicate a wildcard i.e. any value."
    SYNTAX   INTEGER (-1 | 0..63)

SixTupleClfrL4Port ::= TEXTUAL-CONVENTION
    DISPLAY-HINT "d"
    STATUS   current
    DESCRIPTION
       "A value indicating a Layer-4 protocol port number."
    SYNTAX   INTEGER (0..65535)

IfDirection ::= TEXTUAL-CONVENTION
    STATUS current





Baker, Chan, Smith        Expires November 2000        [Page 17]

Internet Draft         Differentiated Services MIB              May 2000


    DESCRIPTION
       "Specifies a direction of data travel on an interface. 'inbound'
       traffic is operated on during reception from the interface, while
       'outbound' traffic is operated on prior to transmission on the
       interface."
    SYNTAX  INTEGER {
                inbound(1),     -- ingress interface
                outbound(2)     -- egress interface
            }











































Baker, Chan, Smith        Expires November 2000        [Page 18]

Internet Draft         Differentiated Services MIB              May 2000


--
-- Classifiers
--

--
-- Classifier Table
--

-- The Classifier Table allows us to enumerate the relationship
-- between arbitrary classifiers and the subsequent downstream
-- Diffserv elements.

diffServClassifierTable OBJECT-TYPE
    SYNTAX       SEQUENCE OF DiffServClassifierEntry
    MAX-ACCESS   not-accessible
    STATUS       current
    DESCRIPTION
       "The classifier table defines the classifiers that a system
       applies to incoming traffic.  Specific classifiers are defined by
       RowPointers in the entries of this table which identify entries
       in filter tables of specific types, e.g.  Multi-Field Classifiers
       (MFCs) for IP are defined in the diffServSixTupleClfrTable. Other
       classifier types may be defined elsewhere."
    REFERENCE
        "[MODEL] section 4.1"
    ::= { diffServTables 1 }

diffServClassifierEntry OBJECT-TYPE
    SYNTAX       DiffServClassifierEntry
    MAX-ACCESS   not-accessible
    STATUS       current
    DESCRIPTION
       "An entry in the classifier table describes a single element of
       the classifier."
    INDEX { ifIndex, diffServClassifierIfDirection,
            diffServClassifierLevel, diffServClassifierId }
    ::= { diffServClassifierTable 1 }

DiffServClassifierEntry ::= SEQUENCE  {
    diffServClassifierIfDirection  IfDirection,
    diffServClassifierLevel        Unsigned32,
    diffServClassifierId           INTEGER,
    diffServClassifierFilter       RowPointer,
    diffServClassifierNext         RowPointer,
    diffServClassifierPrecedence   Unsigned32,
    diffServClassifierStatus       RowStatus
}





Baker, Chan, Smith        Expires November 2000        [Page 19]

Internet Draft         Differentiated Services MIB              May 2000


diffServClassifierIfDirection OBJECT-TYPE
    SYNTAX  IfDirection
    MAX-ACCESS   not-accessible
    STATUS       current
    DESCRIPTION
       "Specifies the direction for this classifier entry on the
       interface."
    ::= { diffServClassifierEntry 1 }

diffServClassifierLevel OBJECT-TYPE
    SYNTAX       Unsigned32
    MAX-ACCESS   not-accessible
    STATUS       current
    DESCRIPTION
       "Specifies the level of the TCB of which this classifier element
       is a part. Lower numbers indicate an element that belongs to a
       classifier that is part of a TCB that is applied to traffic
       before those with higher numbers."
    ::= { diffServClassifierEntry 2 }

diffServClassifierId OBJECT-TYPE
    SYNTAX       INTEGER (0..2147483647)
    MAX-ACCESS   not-accessible
    STATUS       current
    DESCRIPTION
       "A classifier ID that enumerates the classifier elements. The set
       of such identifiers spans the whole agent - managers should
       obtain new values for row creation in this table by using
       diffServClassifierUnique."
    ::= { diffServClassifierEntry 3 }

diffServClassifierFilter OBJECT-TYPE
    SYNTAX       RowPointer
    MAX-ACCESS   read-create
    STATUS       current
    DESCRIPTION
       "A pointer to a valid entry in another table that describes the
       applicable classification filter, e.g. an entry in
       diffServSixTupleClfrTable.  If the row pointed to does not exist,
       the classifier is ignored.

       The value zeroDotZero is interpreted to match anything not
       matched by another classifier - only one such entry may exist in
       this table."
    DEFVAL { zeroDotZero }
    ::= { diffServClassifierEntry 4 }






Baker, Chan, Smith        Expires November 2000        [Page 20]

Internet Draft         Differentiated Services MIB              May 2000


diffServClassifierNext OBJECT-TYPE
    SYNTAX       RowPointer
    MAX-ACCESS   read-create
    STATUS       current
    DESCRIPTION
       "This selects the next datapath element to handle packets
       matching the filter pattern. For example, this can point to an
       entry in a meter or action table."
    ::= { diffServClassifierEntry 5 }

diffServClassifierPrecedence OBJECT-TYPE
    SYNTAX       Unsigned32
    MAX-ACCESS   read-create
    STATUS       current
    DESCRIPTION
       "The relative precedence in which classifiers are applied: higher
       numbers represent classifiers with higher precedence.
       Classifiers with the same precedence must be unambiguous i.e.
       they must define non-overlapping patterns.  Classifiers with
       different precedence may overlap in their filters: the classifier
       with the highest precedence that matches is taken.

       On a given interface, there must be a complete classifier in
       place at all times. This means that there must be always be one
       or more filters that match every possible pattern that could be
       presented in an inclming packet."
    DEFVAL { 0 }
    ::= { diffServClassifierEntry 6 }

diffServClassifierStatus OBJECT-TYPE
    SYNTAX       RowStatus
    MAX-ACCESS   read-create
    STATUS       current
    DESCRIPTION
       "The RowStatus variable controls the activation, deactivation, or
       deletion of a classifier. Any writable variable may be modified
       whether the row is active or notInService."
    ::= { diffServClassifierEntry 7 }

diffServClassifierUnique OBJECT-TYPE
    SYNTAX       TestAndIncr
    MAX-ACCESS   read-write
    STATUS       current
    DESCRIPTION
       "The diffServClassifierUnique object yields a unique new value
       for diffServClassifierId when read and subsequently set. This
       value must be tested for uniqueness and can be used by a





Baker, Chan, Smith        Expires November 2000        [Page 21]

Internet Draft         Differentiated Services MIB              May 2000


       configuring system to obtain a unique value for
       diffServClassifierId for purposes of row creation in the
       diffServClassifierTable."
    ::= { diffServObjects 1 }

--
-- IP Six-Tuple Classification Table
--
-- Classification based on 6 different fields in the IP
-- header. This is intended to be IP-version-independent.
--

diffServSixTupleClfrTable OBJECT-TYPE
    SYNTAX      SEQUENCE OF DiffServSixTupleClfrEntry
    MAX-ACCESS   not-accessible
    STATUS      current
    DESCRIPTION
       "A table of IP Six-Tuple Classifier filter entries that a system
       may use to identify IP traffic."
    REFERENCE
        "[MODEL] section 4.2.2"
    ::= { diffServTables 2 }

diffServSixTupleClfrEntry OBJECT-TYPE
    SYNTAX       DiffServSixTupleClfrEntry
    MAX-ACCESS   not-accessible
    STATUS      current
    DESCRIPTION
       "An IP Six-Tuple Classifier entry describes a single filter."
    INDEX { diffServSixTupleClfrId }
    ::= { diffServSixTupleClfrTable 1 }

DiffServSixTupleClfrEntry ::= SEQUENCE {
    diffServSixTupleClfrId           INTEGER,
    diffServSixTupleClfrDstAddrType  InetAddressType,
    diffServSixTupleClfrDstAddr      InetAddress,
    diffServSixTupleClfrDstAddrMask  Unsigned32,
    diffServSixTupleClfrSrcAddrType  InetAddressType,
    diffServSixTupleClfrSrcAddr      InetAddress,
    diffServSixTupleClfrSrcAddrMask  Unsigned32,
    diffServSixTupleClfrDscp         Dscp,
    diffServSixTupleClfrProtocol     INTEGER,
    diffServSixTupleClfrDstL4PortMin SixTupleClfrL4Port,
    diffServSixTupleClfrDstL4PortMax SixTupleClfrL4Port,
    diffServSixTupleClfrSrcL4PortMin SixTupleClfrL4Port,
    diffServSixTupleClfrSrcL4PortMax SixTupleClfrL4Port,
    diffServSixTupleClfrStatus       RowStatus





Baker, Chan, Smith        Expires November 2000        [Page 22]

Internet Draft         Differentiated Services MIB              May 2000


}

diffServSixTupleClfrId OBJECT-TYPE
    SYNTAX         INTEGER (0..2147483647)
    MAX-ACCESS     not-accessible
    STATUS        current
    DESCRIPTION
       "A unique id for the filter. Filters may be shared by multiple
       interfaces in the same system."
    ::= { diffServSixTupleClfrEntry 1 }

diffServSixTupleClfrDstAddrType OBJECT-TYPE
    SYNTAX         InetAddressType
    MAX-ACCESS     read-create
    STATUS         current
    DESCRIPTION
       "The type of IP destination address used by this classifier
       entry."
    ::= { diffServSixTupleClfrEntry 2 }

diffServSixTupleClfrDstAddr OBJECT-TYPE
    SYNTAX         InetAddress
    MAX-ACCESS     read-create
    STATUS         current
    DESCRIPTION
       "The IP address to match against the packet's destination IP
       address."
    ::= { diffServSixTupleClfrEntry 3 }

diffServSixTupleClfrDstAddrMask OBJECT-TYPE
    SYNTAX         Unsigned32
    MAX-ACCESS     read-create
    STATUS         current
    DESCRIPTION
       "The length of a mask for the matching of the destination IP
       address.  Masks are constructed by setting bits in sequence from
       the most-significant bit downwards for
       diffServSixTupleClfrDstAddrMask bits length. All other bits in
       the mask, up to the number needed to fill the length of the
       address diffServSixTupleClfrDstAddr are cleared to zero.  A zero
       bit in the mask then means that the corresponding bit in the
       address always matches."
    DEFVAL         {0}
    ::= { diffServSixTupleClfrEntry 4 }

diffServSixTupleClfrSrcAddrType OBJECT-TYPE
    SYNTAX         InetAddressType





Baker, Chan, Smith        Expires November 2000        [Page 23]

Internet Draft         Differentiated Services MIB              May 2000


    MAX-ACCESS     read-create
    STATUS         current
    DESCRIPTION
       "The type of IP source address used by this classifier entry."
    ::= { diffServSixTupleClfrEntry 5 }

diffServSixTupleClfrSrcAddr OBJECT-TYPE
    SYNTAX         InetAddress
    MAX-ACCESS     read-create
    STATUS         current
    DESCRIPTION
       "The IP address to match against the source IP address of each
       packet."
    ::= { diffServSixTupleClfrEntry 6 }

diffServSixTupleClfrSrcAddrMask OBJECT-TYPE
    SYNTAX         Unsigned32
    MAX-ACCESS     read-create
    STATUS         current
    DESCRIPTION
       "The length of a mask for the matching of the source IP address.
       Masks are constructed by setting bits in sequence from the most-
       significant bit downwards for diffServSixTupleClfrSrcAddrMask
       bits length. All other bits in the mask, up to the number needed
       to fill the length of the address diffServSixTupleClfrSrcAddr are
       cleared to zero.  A zero bit in the mask then means that the
       corresponding bit in the address always matches."
    DEFVAL         {0}
    ::= { diffServSixTupleClfrEntry 7 }

diffServSixTupleClfrDscp OBJECT-TYPE
    SYNTAX         Dscp
    MAX-ACCESS     read-create
    STATUS         current
    DESCRIPTION
       "The value that the DSCP in the packet must have to match this
       entry. A value of -1 indicates that a specific DSCP value has not
       been defined and thus all DSCP values are considered a match."
    DEFVAL         {-1}
    ::= { diffServSixTupleClfrEntry 8 }

diffServSixTupleClfrProtocol OBJECT-TYPE
    SYNTAX         INTEGER (0..255)
    MAX-ACCESS     read-create
    STATUS         current
    DESCRIPTION
       "The IP protocol to match against the IPv4 protocol number in the





Baker, Chan, Smith        Expires November 2000        [Page 24]

Internet Draft         Differentiated Services MIB              May 2000


       packet. A value of zero means match all."
    DEFVAL         {0}
    ::= { diffServSixTupleClfrEntry 9 }

diffServSixTupleClfrDstL4PortMin OBJECT-TYPE
    SYNTAX         SixTupleClfrL4Port
    MAX-ACCESS     read-create
    STATUS         current
    DESCRIPTION
       "The minimum value that the layer-4 destination port number in
       the packet must have in order to match this classifier entry."
    DEFVAL         {0}
    ::= { diffServSixTupleClfrEntry 10 }

diffServSixTupleClfrDstL4PortMax OBJECT-TYPE
    SYNTAX         SixTupleClfrL4Port
    MAX-ACCESS     read-create
    STATUS         current
    DESCRIPTION
       "The maximum value that the layer-4 destination port number in
       the packet must have in order to match this classifier entry.
       This value must be equal to or greater that the value specified
       for this entry in diffServSixTupleClfrDstL4PortMin."
    DEFVAL         {65535}
    ::= { diffServSixTupleClfrEntry 11 }

diffServSixTupleClfrSrcL4PortMin OBJECT-TYPE
    SYNTAX         SixTupleClfrL4Port
    MAX-ACCESS     read-create
    STATUS         current
    DESCRIPTION
       "The minimum value that the layer-4 source port number in the
       packet must have in order to match this classifier entry."
    DEFVAL         {0}
    ::= { diffServSixTupleClfrEntry 12 }

diffServSixTupleClfrSrcL4PortMax OBJECT-TYPE
    SYNTAX         SixTupleClfrL4Port
    MAX-ACCESS     read-create
    STATUS         current
    DESCRIPTION
       "The maximum value that the layer-4 source port number in the
       packet must have in oder to match this classifier entry.  This
       value must be equal to or greater that the value specified for
       this entry in dsSixTupleIpSrcL4PortMin."
    DEFVAL         {65535}
    ::= { diffServSixTupleClfrEntry 13 }





Baker, Chan, Smith        Expires November 2000        [Page 25]

Internet Draft         Differentiated Services MIB              May 2000


diffServSixTupleClfrStatus OBJECT-TYPE
    SYNTAX      RowStatus
    MAX-ACCESS  read-create
    STATUS     current
    DESCRIPTION
       "The RowStatus variable controls the activation, deactivation, or
       deletion of a classifier. Any writable variable may be modified
       whether the row is active or notInService."
    ::= { diffServSixTupleClfrEntry 14 }

diffServSixTupleClfrUnique OBJECT-TYPE
    SYNTAX       TestAndIncr
    MAX-ACCESS   read-write
    STATUS       current
    DESCRIPTION
       "The diffServSixTupleClfrUnique object yields a unique new
       value for diffServSixTupleClfrId when read and subsequently
       set. This value must be tested for uniqueness and can
       be used by a configuring system to obtain a
       unique value for diffServSixTupleClfrId for purposes of
       row creation in the diffServSixTupleClfrTable."
    ::= { diffServObjects 2 }






























Baker, Chan, Smith        Expires November 2000        [Page 26]

Internet Draft         Differentiated Services MIB              May 2000


--
-- Meters
--
-- This MIB includes definitions for a generic Meter
-- Table as well as specific definitions for Token-
-- Bucket Meters, as one example of possible meters.
--

diffServMeterTable OBJECT-TYPE
    SYNTAX       SEQUENCE OF DiffServMeterEntry
    MAX-ACCESS   not-accessible
    STATUS       current
    DESCRIPTION
       "This table enumerates generic meters that a system may use to
       police a stream of classified traffic.  The traffic stream to be
       metered is determined by the classifier upstream of the meter
       i.e. by the object(s) that point to each entry in this table
       using a RowPointer. This may include all traffic on an interface.

       Specific meter details are to be found in diffServMeterSpecific."
           REFERENCE
               "[MODEL] section 5.1"
    ::= { diffServTables 3 }

diffServMeterEntry OBJECT-TYPE
    SYNTAX       DiffServMeterEntry
    MAX-ACCESS   not-accessible
    STATUS       current
    DESCRIPTION
       "An entry in the meter table describing a single meter."
    INDEX { ifIndex, diffServMeterIfDirection,
            diffServMeterId  }
    ::= { diffServMeterTable 1 }

DiffServMeterEntry ::= SEQUENCE  {
    diffServMeterIfDirection       IfDirection,
    diffServMeterId                INTEGER,
    diffServMeterSucceedNext       RowPointer,
    diffServMeterFailNext          RowPointer,
    diffServMeterSpecific          OBJECT IDENTIFIER,
    diffServMeterStatus            RowStatus
}

diffServMeterIfDirection OBJECT-TYPE
    SYNTAX       IfDirection
    MAX-ACCESS   not-accessible
    STATUS       current





Baker, Chan, Smith        Expires November 2000        [Page 27]

Internet Draft         Differentiated Services MIB              May 2000


    DESCRIPTION
       "Specifies the direction for this meter entry on the interface."
    ::= { diffServMeterEntry 1 }

diffServMeterId OBJECT-TYPE
    SYNTAX       INTEGER (0..2147483647)
    MAX-ACCESS   not-accessible
    STATUS       current
    DESCRIPTION
       "This identifies a meter entry."
    ::= { diffServMeterEntry 2 }

diffServMeterSucceedNext OBJECT-TYPE
    SYNTAX       RowPointer
    MAX-ACCESS   read-create
    STATUS       current
    DESCRIPTION
       "If the traffic does conform to the meter, this indicates the
       next datapath element to handle the traffic e.g. an Action or
       another Meter datapath element.  The value zeroDotZero in this
       variable indicates no further Diffserv treatment is performed on
       this traffic by the current interface for this interface
       direction."
    DEFVAL      { zeroDotZero }
    ::= { diffServMeterEntry 3 }

diffServMeterFailNext OBJECT-TYPE
    SYNTAX       RowPointer
    MAX-ACCESS   read-create
    STATUS       current
    DESCRIPTION
       "If the traffic does not conform to the meter, this indicates the
       next datapath element to handle the traffic e.g. an Action or
       Meter datapath element.  The value zeroDotZero in this variable
       indicates no further Diffserv treatment is performed on this
       traffic by the current interface for this interface direction."
    DEFVAL      { zeroDotZero }
    ::= { diffServMeterEntry 4 }

diffServMeterSpecific OBJECT-TYPE
    SYNTAX       OBJECT IDENTIFIER
    MAX-ACCESS   read-create
    STATUS       current
    DESCRIPTION
       "This indicates the behaviour of the meter by pointing to an
       object containing detailed parameters. One example of a valid
       object would be diffServTBMeterTable, whose entries are indexed





Baker, Chan, Smith        Expires November 2000        [Page 28]

Internet Draft         Differentiated Services MIB              May 2000


       by the same variables as this table, for describing an instance
       of a token-bucket meter."
    ::= { diffServMeterEntry 5 }

diffServMeterStatus OBJECT-TYPE
    SYNTAX       RowStatus
    MAX-ACCESS   read-create
    STATUS       current
    DESCRIPTION
       "The RowStatus variable controls the activation, deactivation, or
       deletion of a meter. Any writable variable may be modified
       whether the row is active or notInService."
    ::= { diffServMeterEntry 6 }

diffServMeterUnique OBJECT-TYPE
    SYNTAX       TestAndIncr
    MAX-ACCESS   read-write
    STATUS       current
    DESCRIPTION
       "The diffServMeterUnique object yields a unique new value for
       diffServMeterId when read and subsequently set.  This value must
       be tested for uniqueness and can be used by a configuring system
       to obtain a unique value for diffServMeterId for purposes of row
       creation in the diffServMeterTable."
    ::= { diffServObjects 3 }

--
-- Token-Bucket Meter Table
--

diffServTBMeterTable OBJECT-TYPE
    SYNTAX       SEQUENCE OF DiffServTBMeterEntry
    MAX-ACCESS   not-accessible
    STATUS       current
    DESCRIPTION
       "This table enumerates specific token-bucket meters that a system
       may use to police a stream of traffic.  Such meters are modelled
       here as having a single rate and a burst size.

       Multiple meter elements may be logically cascaded if a multi-rate
       token bucket is needed for a given Per-Hop Behavior. One example
       of such a PHB might be for an AF implementation.  This is not
       meant to imply that cascading of such elements is functionally
       equivalent to a multi-rate meter, it is merely a convenience for
       this MIB representation.

       Entries in this table share indexing with those in the base





Baker, Chan, Smith        Expires November 2000        [Page 29]

Internet Draft         Differentiated Services MIB              May 2000


       diffServTBMeterTable: they appear in and are deleted from this
       table whenever they "
    REFERENCE
        "[MODEL] section 5.1.3"
    ::= { diffServTables 4 }

diffServTBMeterEntry OBJECT-TYPE
    SYNTAX       DiffServTBMeterEntry
    MAX-ACCESS   not-accessible
    STATUS       current
    DESCRIPTION
       "An entry that describes a single token-bucket meter, indexed by
       the same variables as a diffServMeterEntry."
    INDEX { ifIndex, diffServMeterIfDirection,
            diffServMeterId  }
    ::= { diffServTBMeterTable 1 }

DiffServTBMeterEntry ::= SEQUENCE  {
    diffServTBMeterRate              Unsigned32,
    diffServTBMeterBurstSize         BurstSize,
    diffServTBMeterStatus            RowStatus
}

diffServTBMeterRate OBJECT-TYPE
    SYNTAX       Unsigned32
    UNITS        "kilobits per second"
    MAX-ACCESS   read-create
    STATUS       current
    DESCRIPTION
       "The token-bucket rate, in kilobits per second (kbps)."
    ::= { diffServTBMeterEntry 1 }

diffServTBMeterBurstSize OBJECT-TYPE
    SYNTAX       BurstSize
    UNITS        "Bytes"
    MAX-ACCESS   read-create
    STATUS       current
    DESCRIPTION
       "The maximum number of bytes in a single transmission burst.  The
       interval over which the burst is to be measured can be derived as
       diffServTBMeterBurstSize*8*1000/diffServTBMeterRate."
    ::= { diffServTBMeterEntry 2 }

diffServTBMeterStatus OBJECT-TYPE
    SYNTAX       RowStatus
    MAX-ACCESS   read-create
    STATUS       current





Baker, Chan, Smith        Expires November 2000        [Page 30]

Internet Draft         Differentiated Services MIB              May 2000


    DESCRIPTION
       "The RowStatus variable controls the activation, deactivation, or
       deletion of a meter. Any writable variable may be modified
       whether the row is active or notInService."
    ::= { diffServTBMeterEntry 3 }















































Baker, Chan, Smith        Expires November 2000        [Page 31]

Internet Draft         Differentiated Services MIB              May 2000


--
-- Actions
--

--
-- The Action Table allows enumeration of the different
-- types of actions to be applied to a traffic flow.
--

diffServActionTable OBJECT-TYPE
    SYNTAX       SEQUENCE OF DiffServActionEntry
    MAX-ACCESS   not-accessible
    STATUS       current
    DESCRIPTION
       "The Action Table enumerates actions that can be performed to a
       stream of traffic. Multiple actions can be concatenated.  For
       example, after marking a stream of traffic exiting from a meter,
       a device can then perform a count action of the conforming or
       non-conforming traffic.

       Specific actions are indicated by diffServActionSpecific which
       points to another object which describes the action in further
       detail."
    REFERENCE
        "[MODEL] section 6."
    ::= { diffServTables 5 }

diffServActionEntry OBJECT-TYPE
    SYNTAX       DiffServActionEntry
    MAX-ACCESS   not-accessible
    STATUS       current
    DESCRIPTION
       "An entry in the action table describing the actions applied to
       traffic arriving at its input."
    INDEX { ifIndex, diffServActionIfDirection,
            diffServActionId }
    ::= { diffServActionTable 1 }

DiffServActionEntry ::= SEQUENCE  {
    diffServActionIfDirection       IfDirection,
    diffServActionId                INTEGER,
    diffServActionNext              RowPointer,
    diffServActionSpecific          RowPointer,
    diffServActionStatus            RowStatus
}

diffServActionIfDirection OBJECT-TYPE





Baker, Chan, Smith        Expires November 2000        [Page 32]

Internet Draft         Differentiated Services MIB              May 2000


    SYNTAX       IfDirection
    MAX-ACCESS   not-accessible
    STATUS       current
    DESCRIPTION
       "Specifies the direction for this action entry on the interface."
    ::= { diffServActionEntry 1 }

diffServActionId OBJECT-TYPE
    SYNTAX       INTEGER (0..2147483647)
    MAX-ACCESS   not-accessible
    STATUS       current
    DESCRIPTION
       "Action Id enumerates the Action entry."
    ::= { diffServActionEntry 2 }

diffServActionNext OBJECT-TYPE
    SYNTAX       RowPointer
    MAX-ACCESS   read-create
    STATUS       current
    DESCRIPTION
       "The Next pointer indicates the next datapath element to handle
       the traffic.  For example, a queue datapath element.  The value
       zeroDotZero in this variable indicates no further DiffServ
       treatment is performed on this flow by the current interface for
       this interface direction."
    DEFVAL      { zeroDotZero }
    ::= { diffServActionEntry 3 }

diffServActionSpecific OBJECT-TYPE
    SYNTAX       RowPointer
    MAX-ACCESS   read-create
    STATUS       current
    DESCRIPTION
       "Pointer to a MIB table providing additional information for the
       type of action indicated by this action table entry.

       For the standard actions defined by this MIB module, this should
       point to an entry in one of the diffServDscpMarkActTable,
       diffServCountActTable tables or to the diffServAbsoluteDropAction
       OID.  For other actions, it may point to a table defined in some
       other MIB."
    ::= { diffServActionEntry 4 }

diffServActionStatus OBJECT-TYPE
    SYNTAX       RowStatus
    MAX-ACCESS   read-create
    STATUS       current





Baker, Chan, Smith        Expires November 2000        [Page 33]

Internet Draft         Differentiated Services MIB              May 2000


    DESCRIPTION
       "The RowStatus variable controls the activation, deactivation, or
       deletion of a meter. Any writable variable may be modified
       whether the row is active or notInService."
    ::= { diffServActionEntry 5 }

diffServActionUnique OBJECT-TYPE
    SYNTAX       TestAndIncr
    MAX-ACCESS   read-write
    STATUS       current
    DESCRIPTION
       "The diffServActionUnique object yields a unique new value for
       diffServActionId when read and subsequently set.  This value must
       be tested for uniqueness.  This object allows a configuring
       system to obtain a unique value for diffServActionId for purposes
       of row creation."
    ::= { diffServObjects 4 }


-- DSCP Mark Action Table
--
-- Rows of this table are pointed to by diffServAction to
-- provide detailed parameters specific to the DSCP
-- Mark action.

diffServDscpMarkActTable OBJECT-TYPE
    SYNTAX       SEQUENCE OF DiffServDscpMarkActEntry
    MAX-ACCESS   not-accessible
    STATUS       current
    DESCRIPTION
       "This table enumerates specific DSCPs used for marking or
       remarking the DSCP field of IP packets.  The entries of this
       table may be referenced by a diffServActionSpecific attribute
       that points to diffServDscpMarkActTable."
    REFERENCE
        "[MODEL] section 6.1"
    ::= { diffServTables 6 }

diffServDscpMarkActEntry OBJECT-TYPE
    SYNTAX       DiffServDscpMarkActEntry
    MAX-ACCESS   not-accessible
    STATUS       current
    DESCRIPTION
       "An entry in the DSCP mark action table describes a single DSCP
       used for marking."
    INDEX { diffServDscpMarkActDscp }
    ::= { diffServDscpMarkActTable 1 }





Baker, Chan, Smith        Expires November 2000        [Page 34]

Internet Draft         Differentiated Services MIB              May 2000


DiffServDscpMarkActEntry ::= SEQUENCE  {
    diffServDscpMarkActDscp          Dscp
}

diffServDscpMarkActDscp OBJECT-TYPE
    SYNTAX       Dscp
    MAX-ACCESS   read-only
    STATUS       current
    DESCRIPTION
       "The DSCP that this Action uses for marking/remarking traffic.
       Note that it is quite possible that the only packets subject to
       this Action are already marked with this DSCP.

       Diffserv may result in packet remarking both on ingress to a
       network and on egress and it is quite possible that ingress and
       egress would occur in the same router."
    ::= { diffServDscpMarkActEntry 1 }


--
-- Count Action Table
--

diffServCountActTable OBJECT-TYPE
    SYNTAX       SEQUENCE OF DiffServCountActEntry
    MAX-ACCESS   not-accessible
    STATUS       current
    DESCRIPTION
       "This table contains counters for all the traffic passing through
       an action element."
    REFERENCE
        "[MODEL] section 6.5"
    ::= { diffServTables 7 }

diffServCountActEntry OBJECT-TYPE
    SYNTAX       DiffServCountActEntry
    MAX-ACCESS   not-accessible
    STATUS       current
    DESCRIPTION
       "An entry in the count action table describes a single set of
       traffic counters. This entry is indexed in the same way as a
       diffServActionEntry.  An entry should exist in this table for
       every diffServActionEntry that has a diffServActionSpecific
       pointing to this table."
    INDEX { ifIndex, diffServActionIfDirection,
            diffServActionId }
    ::= { diffServCountActTable 1 }





Baker, Chan, Smith        Expires November 2000        [Page 35]

Internet Draft         Differentiated Services MIB              May 2000


DiffServCountActEntry ::= SEQUENCE  {
    diffServCountActOctets       Counter32,
    diffServCountActHCOctets     Counter64,
    diffServCountActPkts         Counter32,
    diffServCountActHCPkts       Counter64,
    diffServCountActStatus       RowStatus
}

diffServCountActOctets OBJECT-TYPE
    SYNTAX       Counter32
    MAX-ACCESS   read-only
    STATUS       current
    DESCRIPTION
       "The number of octets at the Action datapath element.  On high
       speed devices, this object implements the least significant 32
       bits of diffServcountActHCOctets.

       Discontinuities in the value of this counter can occur at re-
       initialization of the management system and at other times as
       indicated by the value of ifCounterDiscontinuityTime appropriate
       to this interface."
    ::= { diffServCountActEntry 1 }

diffServCountActHCOctets OBJECT-TYPE
    SYNTAX       Counter64
    MAX-ACCESS   read-only
    STATUS       current
    DESCRIPTION
       "The number of octets at the Action datapath element.  This
       object should be used on high speed interfaces.

       Discontinuities in the value of this counter can occur at re-
       initialization of the management system and at other times as
       indicated by the value of ifCounterDiscontinuityTime appropriate
       to this interface."
    ::= { diffServCountActEntry 2 }

diffServCountActPkts OBJECT-TYPE
    SYNTAX       Counter32
    MAX-ACCESS   read-only
    STATUS       current
    DESCRIPTION
       "The number of packets at the Action datapath element.  On high
       speed devices, this object implements the least significant 32
       bits of diffServcountActHCPkts.

       Discontinuities in the value of this counter can occur at re-





Baker, Chan, Smith        Expires November 2000        [Page 36]

Internet Draft         Differentiated Services MIB              May 2000


       initialization of the management system and at other times as
       indicated by the value of ifCounterDiscontinuityTime appropriate
       to this interface."
    ::= { diffServCountActEntry 3 }

diffServCountActHCPkts OBJECT-TYPE
    SYNTAX       Counter64
    MAX-ACCESS   read-only
    STATUS       current
    DESCRIPTION
       "The number of packets at the Action datapath element.  This
       object should be used on high speed interfaces.

       Discontinuities in the value of this counter can occur at re-
       initialization of the management system and at other times as
       indicated by the value of ifCounterDiscontinuityTime appropriate
       to this interface."
    ::= { diffServCountActEntry 4 }

diffServCountActStatus OBJECT-TYPE
    SYNTAX       RowStatus
    MAX-ACCESS   read-create
    STATUS       current
    DESCRIPTION
       "The RowStatus variable controls the activation, deactivation, or
       deletion of this entry. Any writable variable may be modified
       whether the row is active or notInService."
    ::= { diffServCountActEntry 5 }

diffServAbsoluteDropAction OBJECT-IDENTITY
    STATUS       current
    DESCRIPTION
       "This object identifier may be used as the value of a
       diffServActionSpecific pointer in order to indicate that all
       packets following this path are to be dropped unconditionally at
       this point. It is likely, but not required, that this action will
       be preceded by a counter action."
    ::= { diffServObjects 6 }














Baker, Chan, Smith        Expires November 2000        [Page 37]

Internet Draft         Differentiated Services MIB              May 2000


--
-- Algorithmic Drop Table
--

diffServAlgDropTable OBJECT-TYPE
    SYNTAX       SEQUENCE OF DiffServAlgDropEntry
    MAX-ACCESS   not-accessible
    STATUS       current
    DESCRIPTION
       "The algorithmic drop table contains entries describing a process
       that drops packets according to some algorithm."
    REFERENCE
        "[MODEL] section 7.1.3"
    ::= { diffServTables 8 }

diffServAlgDropEntry OBJECT-TYPE
    SYNTAX       DiffServAlgDropEntry
    MAX-ACCESS   not-accessible
    STATUS       current
    DESCRIPTION
       "An entry describes a process that drops packets according to
       some algorithm.  Algorithms described here include: tailDrop(2),
       headDrop(3) and other(1).

       Specifically, Random Drop algorithms are not directly represented
       in this MIB but can be indicated by an entry in this table with
       diffServAlgDropType of other(1) and extensions, pointed to by
       diffServAlgDropSpecific, in some other MIB module that parallels
       entries in this table e.g. by using the same index attribute(s)."
    INDEX { ifIndex, diffServAlgDropIfDirection,
            diffServAlgDropId }
    ::= { diffServAlgDropTable 1 }

DiffServAlgDropEntry ::= SEQUENCE  {
    diffServAlgDropIfDirection      IfDirection,
    diffServAlgDropId               INTEGER,
    diffServAlgDropType             INTEGER,
    diffServAlgDropNext             RowPointer,
    diffServAlgDropQMeasure         RowPointer,
    diffServAlgDropQThreshold       Unsigned32,
    diffServAlgDropSpecific         OBJECT IDENTIFIER,
    diffServAlgDropOctets           Counter32,
    diffServAlgDropHCOctets         Counter64,
    diffServAlgDropPkts             Counter32,
    diffServAlgDropHCPkts           Counter64,
    diffServAlgDropStatus           RowStatus
}





Baker, Chan, Smith        Expires November 2000        [Page 38]

Internet Draft         Differentiated Services MIB              May 2000


diffServAlgDropIfDirection OBJECT-TYPE
    SYNTAX       IfDirection
    MAX-ACCESS   not-accessible
    STATUS       current
    DESCRIPTION
       "Specifies the direction for this algorithmic dropper entry on
       the interface."
    ::= { diffServAlgDropEntry 1 }

diffServAlgDropId OBJECT-TYPE
    SYNTAX       INTEGER (0..2147483647)
    MAX-ACCESS   not-accessible
    STATUS       current
    DESCRIPTION
       "Drop Action Id enumerates the Drop Action entry."
    ::= { diffServAlgDropEntry 2 }

diffServAlgDropType OBJECT-TYPE
    SYNTAX       INTEGER { other(1), tailDrop(2), headDrop(3) }
    MAX-ACCESS   read-create
    STATUS       current
    DESCRIPTION
       "The type of algorithm used by this dropper. A value of
       tailDrop(2) or headDrop(3) represents an algorithm that is
       completely specified by this MIB.  A value of other(1) requires
       further specification in some other MIB module.

       The tailDrop(2) algorithm is described as follows:
       diffServAlgDropQThreshold represents the depth of the queue
       diffServAlgDropQMeasure at which all newly arriving packets will
       be dropped.

       The headDrop(3) algorithm is described as follows: if a packet
       arrives when the current depth of the queue
       diffServAlgDropQMeasure is at diffServAlgDropQThreshold, the
       packet currently at the head of the queue is dropped and the new
       packet is enqueued at the tail of the queue."
    ::= { diffServAlgDropEntry 3 }

diffServAlgDropNext OBJECT-TYPE
    SYNTAX       RowPointer
    MAX-ACCESS   read-create
    STATUS       current
    DESCRIPTION
       "The Next pointer indicates the next datapath element to handle
       the traffic e.g. a queue datapath element.  The value zeroDotZero
       in this variable indicates no further DiffServ treatment is





Baker, Chan, Smith        Expires November 2000        [Page 39]

Internet Draft         Differentiated Services MIB              May 2000


       performed on this flow by the current interface for this
       interface direction."
    ::= { diffServAlgDropEntry 4 }

diffServAlgDropQMeasure OBJECT-TYPE
    SYNTAX       RowPointer
    MAX-ACCESS   read-create
    STATUS       current
    DESCRIPTION
       "Points to an entry in the diffServQueueTable to indicate the
       queue that a drop algorithm is to monitor when deciding whether
       to drop a packet."
    ::= { diffServAlgDropEntry 5 }

diffServAlgDropQThreshold OBJECT-TYPE
    SYNTAX       Unsigned32
    MAX-ACCESS   read-create
    STATUS       current
    DESCRIPTION
       "A threshold on the depth of the queue being measured at which a
       trigger is generated to the dropping algorithm.

       For the tailDrop(2) or headDrop(3) algorithms, this represents
       the depth of the queue diffServAlgDropQMeasure at which the drop
       action will take place. Other algorithms will need to define
       their own semantics for this threshold."
    ::= { diffServAlgDropEntry 6 }

diffServAlgDropSpecific OBJECT-TYPE
    SYNTAX       OBJECT IDENTIFIER
    MAX-ACCESS   read-create
    STATUS       current
    DESCRIPTION
       "Points to a table (not an entry in the table) defined elsewhere
       that provides further detail regarding a drop algorithm described
       as diffServAlgDropType other(1). entries in such a table are to
       be indexed by the same variables as this diffServAlgDropEntry.

       For algorithms specified fully in this MIB module, this should
       take the value zeroDotzero."
    ::= { diffServAlgDropEntry 7 }

diffServAlgDropOctets OBJECT-TYPE
    SYNTAX       Counter32
    MAX-ACCESS   read-only
    STATUS       current
    DESCRIPTION





Baker, Chan, Smith        Expires November 2000        [Page 40]

Internet Draft         Differentiated Services MIB              May 2000


       "The number of octets that have been dropped by this drop
       process.  On high speed devices, this object implements the least
       significant 32 bits of diffServAlgDropHCOctets.

       Discontinuities in the value of this counter can occur at re-
       initialization of the management system and at other times as
       indicated by the value of ifCounterDiscontinuityTime appropriate
       to this interface."
    ::= { diffServAlgDropEntry 8 }

diffServAlgDropHCOctets OBJECT-TYPE
    SYNTAX       Counter64
    MAX-ACCESS   read-only
    STATUS       current
    DESCRIPTION
       "The number of octets that have been dropped by this drop
       process.  This object should be used on high speed interfaces.

       Discontinuities in the value of this counter can occur at re-
       initialization of the management system and at other times as
       indicated by the value of ifCounterDiscontinuityTime appropriate
       to this interface."
    ::= { diffServAlgDropEntry 9 }

diffServAlgDropPkts OBJECT-TYPE
    SYNTAX       Counter32
    MAX-ACCESS   read-only
    STATUS       current
    DESCRIPTION
       "The number of packets that have been dropped by this drop
       process.  On high speed devices, this object implements the least
       significant 32 bits of diffServAlgDropHCPkts.

       Discontinuities in the value of this counter can occur at re-
       initialization of the management system and at other times as
       indicated by the value of ifCounterDiscontinuityTime appropriate
       to this interface."
    ::= { diffServAlgDropEntry 10 }

diffServAlgDropHCPkts OBJECT-TYPE
    SYNTAX       Counter64
    MAX-ACCESS   read-only
    STATUS       current
    DESCRIPTION
       "The number of packets that have been dropped by this drop
       process.  This object should be used on high speed interfaces.






Baker, Chan, Smith        Expires November 2000        [Page 41]

Internet Draft         Differentiated Services MIB              May 2000


       Discontinuities in the value of this counter can occur at re-
       initialization of the management system and at other times as
       indicated by the value of ifCounterDiscontinuityTime appropriate
       to this interface."
    ::= { diffServAlgDropEntry 11 }

diffServAlgDropStatus OBJECT-TYPE
    SYNTAX       RowStatus
    MAX-ACCESS   read-create
    STATUS       current
    DESCRIPTION
       "The RowStatus variable controls the activation, deactivation, or
       deletion of this entry. Any writable variable may be modified
       whether the row is active or notInService."
    ::= { diffServAlgDropEntry 12 }

-- This object allows a configuring system to obtain a
-- unique value for diffServAlgDropId for purposes of
-- configuration.

diffServAlgDropUnique OBJECT-TYPE
    SYNTAX       TestAndIncr
    MAX-ACCESS   read-write
    STATUS       current
    DESCRIPTION
       "This object yields a unique new
       value for diffServAlgDropId when read and subsequently
       set. This value must be tested for uniqueness and can
       be used by a configuring system to obtain a
       unique value for diffServAlgDropId for purposes of
       row creation in the diffServAlgDropTable."
    ::= { diffServObjects 7 }




















Baker, Chan, Smith        Expires November 2000        [Page 42]

Internet Draft         Differentiated Services MIB              May 2000


--
-- Queue Table
--

diffServQTable OBJECT-TYPE
    SYNTAX       SEQUENCE OF DiffServQEntry
    MAX-ACCESS   not-accessible
    STATUS       current
    DESCRIPTION
       "The Queue Table enumerates the individual queues on an
       interface."
    ::= { diffServTables 9 }

diffServQEntry OBJECT-TYPE
    SYNTAX       DiffServQEntry
    MAX-ACCESS   not-accessible
    STATUS       current
    DESCRIPTION
       "An entry in the Queue Table describes a single queue in one
       direction on an interface."
    INDEX { ifIndex, diffServQIfDirection, diffServQId }
    ::= { diffServQTable 1 }

DiffServQEntry ::= SEQUENCE  {
    diffServQIfDirection             IfDirection,
    diffServQId                      INTEGER,
    diffServQNext                    RowPointer,
    diffServQPriority                Unsigned32,
    diffServQMinRateAbs              Unsigned32,
    diffServQMinRateRel              Unsigned32,
    diffServQMaxRateAbs              Unsigned32,
    diffServQMaxRateRel              Unsigned32,
    diffServQStatus                  RowStatus
}

diffServQIfDirection OBJECT-TYPE
    SYNTAX  IfDirection
    MAX-ACCESS   not-accessible
    STATUS       current
    DESCRIPTION
       "Specifies the direction for this queue entry on the interface."
    ::= { diffServQEntry 1 }

diffServQId OBJECT-TYPE
    SYNTAX       INTEGER (0..2147483647)
    MAX-ACCESS   not-accessible
    STATUS       current





Baker, Chan, Smith        Expires November 2000        [Page 43]

Internet Draft         Differentiated Services MIB              May 2000


    DESCRIPTION
       "The Queue Id enumerates the Queue entry."
    ::= { diffServQEntry 2 }

diffServQNext OBJECT-TYPE
    SYNTAX       RowPointer
    MAX-ACCESS   read-create
    STATUS       current
    DESCRIPTION
       "The Next pointer indicates the next datapath element to handle
       the traffic e.g. a scheduler datapath element."
    ::= { diffServQEntry 3 }

diffServQPriority OBJECT-TYPE
    SYNTAX       Unsigned32
    MAX-ACCESS   read-create
    STATUS       current
    DESCRIPTION
       "The priority of this queue, to be used as a parameter to the
       next scheduler element downstream from this one."
    ::= { diffServQEntry 4 }

diffServQMinRateAbs OBJECT-TYPE
    SYNTAX       Unsigned32
    UNITS        "kilobits per second"
    MAX-ACCESS   read-create
    STATUS       current
    DESCRIPTION
       "The minimum absolute rate, in kilobits/sec, that a downstream
       scheduler element should allocate to this queue.  If the value is
       zero, then there is effectively no minimum rate guarantee.  If
       the value is non-zero, the scheduler will assure the servicing of
       this queue to at least this rate.

       Note that this attribute's value is coupled to that of
       diffServQMinRateRel: changes to one will affect the value of the
       other. They are linked by the following equation:

         diffServQMinRateRel = diffServQMinRateAbs * 10,000,000/ifSpeed

       or, if appropriate:

         diffServQMinRateRel = diffServQMinRateAbs * 10 / ifHighSpeed"
    REFERENCE
        "ifSpeed, ifHighSpeed from [IFMIB]"
    ::= { diffServQEntry 5 }






Baker, Chan, Smith        Expires November 2000        [Page 44]

Internet Draft         Differentiated Services MIB              May 2000


diffServQMinRateRel OBJECT-TYPE
    SYNTAX       Unsigned32
    MAX-ACCESS   read-create
    STATUS       current
    DESCRIPTION
       "The minimum rate that a downstream scheduler element should
       allocate to this queue, relative to the maximum rate of the
       interface as reported by ifSpeed or ifHighSpeed, in units of
       1/10,000 of 1.  If the value is zero, then there is effectively
       no minimum rate guarantee.  If the value is non-zero, the
       scheduler will assure the servicing of this queue to at least
       this rate.

       Note that this attribute's value is coupled to that of
       diffServQMinRateAbs: changes to one will affect the value of the
       other. They are linked by the following equation:

         diffServQMinRateAbs = ifSpeed * diffServQMinRateRel/10,000,000

       or, if appropriate:

         diffServQMinRateAbs = ifHighSpeed * diffServQMinRateRel / 10"
    REFERENCE
        "ifSpeed, ifHighSpeed from [IFMIB]"
    ::= { diffServQEntry 6 }

diffServQMaxRateAbs OBJECT-TYPE
    SYNTAX       Unsigned32
    UNITS        "kilobits per second"
    MAX-ACCESS   read-create
    STATUS       current
    DESCRIPTION
       "The maximum rate in kilobits/sec that a downstream scheduler
       element should allocate to this queue. If the value is zero, then
       there is effectively no maximum rate limit and that the scheduler
       should attempt to be work-conserving for this queue.  If the
       value is non-zero, the scheduler will limit the servicing of this
       queue to, at most, this rate in a non-work-conserving manner.

       Note that this attribute's value is coupled to that of
       diffServQMaxRateRel: changes to one will affect the value of the
       other. They are linked by the following equation:

         diffServQMaxRateRel = diffServQMaxRateAbs * 10,000,000/ifSpeed

       or, if appropriate:






Baker, Chan, Smith        Expires November 2000        [Page 45]

Internet Draft         Differentiated Services MIB              May 2000


         diffServQMaxRateRel = diffServQMaxRateAbs * 10 / ifHighSpeed"
    REFERENCE
        "ifSpeed, ifHighSpeed from [IFMIB]"
    ::= { diffServQEntry 7 }

diffServQMaxRateRel OBJECT-TYPE
    SYNTAX       Unsigned32
    MAX-ACCESS   read-create
    STATUS       current
    DESCRIPTION
       "The maximum rate that a downstream scheduler element should
       allocate to this queue, relative to the maximum rate of the
       interface as reported by ifSpeed or ifHighSpeed, in units of
       1/10,000 of 1.  If the value is zero, then there is effectively
       no maximum rate limit and the scheduler should attempt to be
       work-conserving for this queue.  If the value is non-zero, the
       scheduler will limit the servicing of this queue to, at most,
       this rate in a non-work-conserving manner.

       Note that this attribute's value is coupled to that of
       diffServQMaxRateAbs: changes to one will affect the value of the
       other. They are linked by the following equation:

         diffServQMaxRateAbs = ifSpeed * diffServQMaxRateRel/10,000,000

       or, if appropriate:

         diffServQMaxRateAbs = ifHighSpeed * diffServQMaxRateRel / 10"
    REFERENCE
        "ifSpeed, ifHighSpeed from [IFMIB]"
    ::= { diffServQEntry 8 }

diffServQStatus OBJECT-TYPE
    SYNTAX       RowStatus
    MAX-ACCESS   read-create
    STATUS       current
    DESCRIPTION
       "The RowStatus variable controls the activation, deactivation, or
       deletion of a queue.  Any writable variable may be modified
       whether the row is active or notInService."
    ::= { diffServQEntry 9 }

diffServQUnique OBJECT-TYPE
    SYNTAX       TestAndIncr
    MAX-ACCESS   read-write
    STATUS       current
    DESCRIPTION





Baker, Chan, Smith        Expires November 2000        [Page 46]

Internet Draft         Differentiated Services MIB              May 2000


       "The diffServQUnique object yields a unique new value for
       diffServQId when read and subsequently set.  This value must be
       tested for uniqueness and can be used by a configuring system to
       obtain a unique value for diffServQId for purposes of row
       creation in the diffServQTable."
    ::= { diffServObjects 8 }


--
-- Scheduler Table
--
-- The Scheduler Table is used for representing packet schedulers:
-- it provides flexibility for multiple scheduling algorithms, each
-- servicing multiple queues, to be used on the same logical/physical
-- interface.

diffServSchedulerTable OBJECT-TYPE
    SYNTAX       SEQUENCE OF DiffServSchedulerEntry
    MAX-ACCESS   not-accessible
    STATUS       current
    DESCRIPTION
       "The Scheduler Table enumerates packet schedulers.  Multiple
       scheduling algorithms can be used on a given interface, with each
       algorithm described by one diffServSchedulerEntry."
    REFERENCE
        "[MODEL] section 7.1.2"
    ::= { diffServTables 10 }

diffServSchedulerEntry OBJECT-TYPE
    SYNTAX       DiffServSchedulerEntry
    MAX-ACCESS   not-accessible
    STATUS       current
    DESCRIPTION
       "An entry in the Scheduler Table describing a single instance of
       a scheduling algorithm."
    INDEX { ifIndex, diffServSchedulerIfDirection,
            diffServSchedulerId }
    ::= { diffServSchedulerTable 1 }

DiffServSchedulerEntry ::= SEQUENCE  {
    diffServSchedulerIfDirection          IfDirection,
    diffServSchedulerId                   INTEGER,
    diffServSchedulerMethod               INTEGER,
    diffServSchedulerNext                 RowPointer,
    diffServSchedulerStatus               RowStatus
}






Baker, Chan, Smith        Expires November 2000        [Page 47]

Internet Draft         Differentiated Services MIB              May 2000


diffServSchedulerIfDirection OBJECT-TYPE
    SYNTAX  IfDirection
    MAX-ACCESS   not-accessible
    STATUS       current
    DESCRIPTION
       "Specifies the direction for this scheduler entry on the
       interface."
    ::= { diffServSchedulerEntry 1 }

diffServSchedulerId OBJECT-TYPE
    SYNTAX       INTEGER (0..2147483647)
    MAX-ACCESS   not-accessible
    STATUS       current
    DESCRIPTION
       "The Scheduler Id enumerates the Scheduler entry."
    ::= { diffServSchedulerEntry 2 }

diffServSchedulerMethod OBJECT-TYPE
    SYNTAX       INTEGER {
                     other(1),        -- not listed here
                     priorityq(2),    -- Priority Queueing
                     wrr(3)           -- Weighed Round Robin
                 }
    MAX-ACCESS   read-create
    STATUS       current
    DESCRIPTION
       "The scheduling algorithm used by this Scheduler.

        A value of priorityq(2) is used to indicate strict priority
       queueing: only the diffServQPriority attributes of the queues
       feeding this scheduler are used when determining the next packet
       to schedule.

       A value of wrr(3) indicates weighted round-robin scheduling.
       Packets are scheduled from each of the queues feeding this
       scheduler according to all of the parameters of the diffServQueue
       entry."
    REFERENCE
        "[MODEL] section 7.1.2"
    ::= { diffServSchedulerEntry 3 }

diffServSchedulerNext OBJECT-TYPE
    SYNTAX       RowPointer
    MAX-ACCESS   read-create
    STATUS       current
    DESCRIPTION
       "Selects the next data path component, which can be another





Baker, Chan, Smith        Expires November 2000        [Page 48]

Internet Draft         Differentiated Services MIB              May 2000


       Scheduler or other TC elements. One usage of multiple serial
       Schedulers is for Class Base Queueing (CBQ).

       The value zeroDotZero in this variable indicates no further
       DiffServ treatment is performed on this flow by the current
       interface for this interface direction.  For example, for an
       inbound interface the value zeroDotZero indicates that the packet
       flow has now completed inbound DiffServ treatment and should be
       forwarded on to the appropriate outbound interface."
    DEFVAL       { zeroDotZero }
    ::= { diffServSchedulerEntry 4 }

diffServSchedulerStatus OBJECT-TYPE
    SYNTAX       RowStatus
    MAX-ACCESS   read-create
    STATUS       current
    DESCRIPTION
       "The RowStatus variable controls the activation, deactivation, or
       deletion of a queue.  Any writable variable may be modified
       whether the row is active or notInService."
    ::= { diffServSchedulerEntry 5 }

diffServSchedulerUnique OBJECT-TYPE
    SYNTAX       TestAndIncr
    MAX-ACCESS   read-write
    STATUS       current
    DESCRIPTION
       "The diffServSchedulerUnique object yields a unique new value for
       diffServSchedulerId when read and subsequently set.  This value
       must be tested for uniqueness and can be used by a configuring
       system to obtain a unique value for diffServSchedulerId for
       purposes of row creation in the diffServSchedulerTable."
    ::= { diffServObjects 9 }



















Baker, Chan, Smith        Expires November 2000        [Page 49]

Internet Draft         Differentiated Services MIB              May 2000


--
-- MIB Compliance statements.
--

diffServMIBCompliances OBJECT IDENTIFIER ::= { diffServMIBConformance 1 }
diffServMIBGroups      OBJECT IDENTIFIER ::= { diffServMIBConformance 2 }

diffServMIBCompliance MODULE-COMPLIANCE
    STATUS current
    DESCRIPTION
       "This MIB may be implemented as a read-only or as a read-create
       MIB. As a result, it may be used for monitoring or for
       configuration."
    MODULE -- This Module
    MANDATORY-GROUPS {
        diffServMIBClassifierGroup, diffServMIBSixTupleClfrGroup,
        diffServMIBActionGroup, diffServMIBAlgDropGroup,
        diffServMIBQueueGroup, diffServMIBSchedulerGroup }

-- The groups:
--        diffServMIBCounterGroup
--        diffServMIBHCCounterGroup
--        diffServMIBVHCCounterGroup
--
-- are mutually exclusive; at most one of these groups is implemented
-- for a particular interface.  When any of these groups is implemented
-- for a particular interface, then ifCounterDiscontinuityGroup from
-- [IFMIB]  must also be implemented for that interface.

-- note that the diffServMIBStaticGroup is
-- mandatory for implementations that implement a
-- read-write or read-create mode.

    GROUP diffServMIBCounterGroup
    DESCRIPTION
       "This group is mandatory for table objects indexed by ifIndex for
       which the value of the corresponding instance of ifSpeed is less
       than or equal to 20,000,000 bits/second."

    GROUP diffServMIBHCCounterGroup
    DESCRIPTION
       "This group is mandatory for table objects indexed by ifIndex for
       which the value of the corresponding instance of ifSpeed is
       greater than 20,000,000 bits/second."

    GROUP diffServMIBVHCCounterGroup
    DESCRIPTION





Baker, Chan, Smith        Expires November 2000        [Page 50]

Internet Draft         Differentiated Services MIB              May 2000


       "This group is mandatory for table objects indexed by ifIndex for
       which the value of the corresponding instance of ifSpeed is
       greater than 650,000,000 bits/second."

    GROUP diffServMIBMeterGroup
    DESCRIPTION
       "This group is mandatory for devices that implement metering
       functions."

    GROUP diffServMIBTokenBucketMeterGroup
    DESCRIPTION
       "This group is mandatory for devices that implement token-bucket
       metering functions."

    GROUP diffServMIBDscpMarkActionGroup
    DESCRIPTION
       "This group is mandatory for devices that implement DSCP-Marking
       functions."

    GROUP diffServMIBStaticGroup
    DESCRIPTION
       "This group is mandatory for devices that allow creation of rows
       in any of the writable tables of this MIB."

    OBJECT diffServClassifierFilter
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."

    OBJECT diffServClassifierNext
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."

    OBJECT diffServClassifierPrecedence
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."

    OBJECT diffServClassifierStatus
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."

    OBJECT diffServSixTupleClfrDstAddrType
    MIN-ACCESS read-only
    DESCRIPTION





Baker, Chan, Smith        Expires November 2000        [Page 51]

Internet Draft         Differentiated Services MIB              May 2000


       "Write access is not required."

    OBJECT diffServSixTupleClfrDstAddr
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."

    OBJECT diffServSixTupleClfrDstAddrMask
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."

    OBJECT diffServSixTupleClfrSrcAddrType
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."

    OBJECT diffServSixTupleClfrSrcAddr
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."

    OBJECT diffServSixTupleClfrSrcAddrMask
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."

    OBJECT diffServSixTupleClfrDscp
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."

    OBJECT diffServSixTupleClfrProtocol
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."

    OBJECT diffServSixTupleClfrSrcL4PortMin
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."

    OBJECT diffServSixTupleClfrSrcL4PortMax
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."






Baker, Chan, Smith        Expires November 2000        [Page 52]

Internet Draft         Differentiated Services MIB              May 2000


    OBJECT diffServSixTupleClfrDstL4PortMin
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."

    OBJECT diffServSixTupleClfrDstL4PortMax
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."

    OBJECT diffServSixTupleClfrStatus
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."

    OBJECT diffServMeterSucceedNext
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."

    OBJECT diffServMeterFailNext
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."

    OBJECT diffServMeterSpecific
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."

    OBJECT diffServMeterStatus
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."

    OBJECT diffServTBMeterRate
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."

    OBJECT diffServTBMeterBurstSize
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."

    OBJECT diffServTBMeterStatus
    MIN-ACCESS read-only





Baker, Chan, Smith        Expires November 2000        [Page 53]

Internet Draft         Differentiated Services MIB              May 2000


    DESCRIPTION
       "Write access is not required."

    OBJECT diffServActionNext
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."

    OBJECT diffServActionSpecific
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."

    OBJECT diffServActionStatus
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."

    OBJECT diffServCountActStatus
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."

    OBJECT diffServAlgDropType
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."

    OBJECT diffServAlgDropNext
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."

    OBJECT diffServAlgDropQMeasure
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."

    OBJECT diffServAlgDropQThreshold
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."

    OBJECT diffServAlgDropSpecific
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."





Baker, Chan, Smith        Expires November 2000        [Page 54]

Internet Draft         Differentiated Services MIB              May 2000


    OBJECT diffServAlgDropStatus
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."

    OBJECT diffServQNext
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."

    OBJECT diffServQPriority
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."

    OBJECT diffServQMinRateAbs
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."

    OBJECT diffServQMinRateRel
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."

    OBJECT diffServQMaxRateAbs
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."

    OBJECT diffServQMaxRateRel
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."

    OBJECT diffServQueueStatus
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."

    OBJECT diffServSchedulerMethod
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."

    OBJECT diffServSchedulerNext
    MIN-ACCESS read-only





Baker, Chan, Smith        Expires November 2000        [Page 55]

Internet Draft         Differentiated Services MIB              May 2000


    DESCRIPTION
       "Write access is not required."

    OBJECT diffServSchedulerStatus
    MIN-ACCESS read-only
    DESCRIPTION
       "Write access is not required."

    ::= { diffServMIBCompliances 1 }











































Baker, Chan, Smith        Expires November 2000        [Page 56]

Internet Draft         Differentiated Services MIB              May 2000


diffServMIBClassifierGroup OBJECT-GROUP
    OBJECTS {
        diffServClassifierFilter, diffServClassifierNext,
        diffServClassifierPrecedence, diffServClassifierStatus
    }
    STATUS current
    DESCRIPTION
       "The Classifier Group defines the MIB Objects that describe a
       generic classifier element."
    ::= { diffServMIBGroups 1 }

diffServMIBSixTupleClfrGroup OBJECT-GROUP
    OBJECTS {
        diffServSixTupleClfrDstAddrType, diffServSixTupleClfrDstAddr,
        diffServSixTupleClfrDstAddrMask, diffServSixTupleClfrDstAddrType,
        diffServSixTupleClfrSrcAddrType, diffServSixTupleClfrSrcAddrMask,
        diffServSixTupleClfrDscp, diffServSixTupleClfrProtocol,
        diffServSixTupleClfrDstL4PortMin,
        diffServSixTupleClfrDstL4PortMax,
        diffServSixTupleClfrSrcL4PortMin,
        diffServSixTupleClfrSrcL4PortMax, diffServSixTupleClfrStatus
    }
    STATUS current
    DESCRIPTION
       "The Six-tuple Classifier Group defines the MIB Objects that
       describe a classifier element for matching on 6 fields of an IP
       and upper-layer protocol header."
    ::= { diffServMIBGroups 2 }

diffServMIBMeterGroup OBJECT-GROUP
    OBJECTS {
        diffServMeterSucceedNext, diffServMeterFailNext,
        diffServMeterSpecific, diffServMeterStatus
    }
    STATUS current
    DESCRIPTION
       "The Meter Group defines the objects used in describing a generic
       meter element."
    ::= { diffServMIBGroups 3 }

diffServMIBTokenBucketMeterGroup OBJECT-GROUP
    OBJECTS {
        diffServTBMeterRate, diffServTBMeterBurstSize,
        diffServTBMeterStatus
    }
    STATUS current
    DESCRIPTION





Baker, Chan, Smith        Expires November 2000        [Page 57]

Internet Draft         Differentiated Services MIB              May 2000


       "The Token-Bucket Meter Group defines the objects used in
       describing a single-rate token bucket meter element."
    ::= { diffServMIBGroups 4 }

diffServMIBActionGroup OBJECT-GROUP
    OBJECTS {
        diffServActionNext, diffServActionSpecific,
        diffServActionStatus
    }
    STATUS current
    DESCRIPTION
       "The Action Group defines the objects used in describing a
       generic action element."
    ::= { diffServMIBGroups 5 }

diffServMIBDscpMarkActionGroup OBJECT-GROUP
    OBJECTS {
        diffServDscpMarkActDscp
    }
    STATUS current
    DESCRIPTION
       "The DSCP Mark Action Group defines the objects used in
       describing a DSCP Marking Action element."
    ::= { diffServMIBGroups 6 }

diffServMIBCounterGroup OBJECT-GROUP
    OBJECTS {
        diffServCountActOctets, diffServCountActPkts,
        diffServCountActStatus,
        diffServAlgDropOctets, diffServAlgDropPkts
    }
    STATUS current
    DESCRIPTION
       "A collection of objects providing information specific to non-
       high speed (non-high speed interfaces transmit and receive at
       speeds less than or equal to 20,000,000 bits/second) packet-
       oriented network interfaces."
    ::= { diffServMIBGroups 7 }

diffServMIBHCCounterGroup OBJECT-GROUP
    OBJECTS {
        diffServCountActOctets, diffServCountActHCOctets,
        diffServCountActPkts, diffServCountActStatus,
        diffServAlgDropOctets, diffServAlgDropHCOctets,
        diffServAlgDropPkts
    }
    STATUS current





Baker, Chan, Smith        Expires November 2000        [Page 58]

Internet Draft         Differentiated Services MIB              May 2000


    DESCRIPTION
       "A collection of objects providing information specific to non-
       high speed (non-high speed interfaces transmit and receive at
       speeds less than or equal to 20,000,000 bits/second) packet-
       oriented network interfaces."
    ::= { diffServMIBGroups 8 }

diffServMIBVHCCounterGroup OBJECT-GROUP
    OBJECTS {
        diffServCountActOctets, diffServCountActHCOctets,
        diffServCountActPkts, diffServCountActHCPkts,
        diffServCountActStatus, diffServAlgDropOctets,
        diffServAlgDropHCOctets, diffServAlgDropPkts,
        diffServAlgDropHCPkts
    }
    STATUS current
    DESCRIPTION
       "A collection of objects providing information specific to non-
       high speed (non-high speed interfaces transmit and receive at
       speeds less than or equal to 20,000,000 bits/second) packet-
       oriented network interfaces."
    ::= { diffServMIBGroups 9 }

diffServMIBAlgDropGroup OBJECT-GROUP
    OBJECTS {
        diffServAlgDropType, diffServAlgDropNext,
        diffServAlgDropQMeasure, diffServAlgDropQThreshold,
        diffServAlgDropSpecific, diffServAlgDropStatus
    }
    STATUS current
    DESCRIPTION
       "The Algorithmic Drop Group contains the objects that describe
       algorithmic dropper operation and configuration."
    ::= { diffServMIBGroups 10 }

diffServMIBQueueGroup OBJECT-GROUP
    OBJECTS {
        diffServQPriority, diffServQNext, diffServQMinRateAbs,
        diffServQMinRateRel, diffServQMaxRateAbs,
        diffServQMaxRateRel, diffServQStatus
    }
    STATUS current
    DESCRIPTION
       "The Queue Group contains the objects that describe an
       interface's queues."
    ::= { diffServMIBGroups 11 }






Baker, Chan, Smith        Expires November 2000        [Page 59]

Internet Draft         Differentiated Services MIB              May 2000


diffServMIBSchedulerGroup OBJECT-GROUP
    OBJECTS {
        diffServSchedulerMethod, diffServSchedulerNext,
        diffServSchedulerStatus
    }
    STATUS current
    DESCRIPTION
       "The Scheduler Group contains the objects that describe packet
       schedulers on interfaces."
    ::= { diffServMIBGroups 12 }

diffServMIBStaticGroup OBJECT-GROUP
    OBJECTS {
        diffServClassifierUnique, diffServSixTupleClfrUnique,
        diffServMeterUnique, diffServActionUnique,
        diffServAlgDropUnique, diffServQUnique, diffServSchedulerUnique
    }
    STATUS current
    DESCRIPTION
       "The Static Group contains scalar objects used in creating unique
       enumerations for classifiers, meters, actions and queues. These
       are required whenever row creation operations on such tables are
       supported."
    ::= { diffServMIBGroups 13 }
END



























Baker, Chan, Smith        Expires November 2000        [Page 60]

Internet Draft         Differentiated Services MIB              May 2000


5.  Acknowledgments

This MIB builds on all the work that has gone into the conceptual model
for diffserv routers. It has been developed with the active involvement
of many people, but most notably Yoram Bernet, Steve Blake, Brian
Carpenter, Dave Durham, Jeremy Greene, Roch Guerin, Scott Hahn, Keith
McCloghrie, Kathleen Nichols, Ping Pan and Bert Wijnen.


6.  Security Considerations

It is clear that this MIB is potentially useful for configuration, and
anything that can be configured can be misconfigured, with potentially
disastrous effect.

At this writing, no security holes have been identified beyond those
that SNMP Security is itself intended to address. These relate primarily
to controlled access to sensitive information and the ability to
configure a device - or which might result from operator error, which is
beyond the scope of any security architecture.

There are a number of management objects defined in this MIB that have a
MAX-ACCESS clause of read-write and/or read-create. Such objects may be
considered sensitive or vulnerable in some network environments.  The
support for SET operations in a non-secure environment without proper
protection can have a negative effect on network operations. The use of
SNMP Version 3 is recommended over prior versions for configuration
control as its security model is improved.

There are a number of managed objects in this MIB that may contain
information that may be sensitive from a business perspective, in that
they may represent a customer's service contract or the filters that the
service provider chooses to apply to a customer's ingress or egress
traffic. There are no objects which are sensitive in their own right,
such as passwords or monetary amounts.

It may be important to control even GET access to these objects and
possibly to even encrypt the values of these object when sending them
over the network via SNMP. Not all versions of SNMP provide features for
such a secure environment.

SNMPv1 by itself is not a secure environment. Even if the network itself
is secure (for example by using IPSec), even then, there is no control
as to who on the secure network is allowed to access and GET/SET
(read/change/create/delete) the objects in this MIB.







Baker, Chan, Smith        Expires November 2000        [Page 61]

Internet Draft         Differentiated Services MIB              May 2000


It is recommended that the implementers consider the security features
as provided by the SNMPv3 framework. Specifically, the use of the User-
based Security Model [12] and the View-based Access Control Model [15]
is recommended.

It is then a customer/user responsibility to ensure that the SNMP entity
giving access to an instance of this MIB, is properly configured to give
access to the objects only to those principals (users) that have
legitimate rights to indeed GET or SET (change/create/delete) them.


7.  References

[1]  Harrington, D., Presuhn, R., and B. Wijnen, "An Architecture for
     Describing SNMP Management Frameworks", RFC 2571, Cabletron
     Systems, Inc., BMC Software, Inc., IBM T. J. Watson Research, April
     1999

[2]  Rose, M., and K. McCloghrie, "Structure and Identification of
     Management Information for TCP/IP-based Internets", RFC 1155, STD
     16, Performance Systems International, Hughes LAN Systems, May 1990

[3]  Rose, M., and K. McCloghrie, "Concise MIB Definitions", RFC 1212,
     STD 16, Performance Systems International, Hughes LAN Systems,
     March 1991

[4]  M. Rose, "A Convention for Defining Traps for use with the SNMP",
     RFC 1215, Performance Systems International, March 1991

[5]  McCloghrie, K., Perkins, D., Schoenwaelder, J., Case, J., Rose, M.,
     and S. Waldbusser, "Structure of Management Information Version 2
     (SMIv2)", RFC 2578, STD 58, Cisco Systems, SNMPinfo, TU
     Braunschweig, SNMP Research, First Virtual Holdings, International
     Network Services, April 1999

[6]  McCloghrie, K., Perkins, D., Schoenwaelder, J., Case, J., Rose, M.,
     and S. Waldbusser, "Textual Conventions for SMIv2", RFC 2579, STD
     58, Cisco Systems, SNMPinfo, TU Braunschweig, SNMP Research, First
     Virtual Holdings, International Network Services, April 1999

[7]  McCloghrie, K., Perkins, D., Schoenwaelder, J., Case, J., Rose, M.,
     and S. Waldbusser, "Conformance Statements for SMIv2", RFC 2580,
     STD 58, Cisco Systems, SNMPinfo, TU Braunschweig, SNMP Research,
     First Virtual Holdings, International Network Services, April 1999

[8]  Case, J., Fedor, M., Schoffstall, M., and J. Davin, "Simple Network
     Management Protocol", RFC 1157, STD 15, SNMP Research, Performance





Baker, Chan, Smith        Expires November 2000        [Page 62]

Internet Draft         Differentiated Services MIB              May 2000


     Systems International, Performance Systems International, MIT
     Laboratory for Computer Science, May 1990.

[9]  Case, J., McCloghrie, K., Rose, M., and S. Waldbusser,
     "Introduction to Community-based SNMPv2", RFC 1901, SNMP Research,
     Inc., Cisco Systems, Inc., Dover Beach Consulting, Inc.,
     International Network Services, January 1996.

[10] Case, J., McCloghrie, K., Rose, M., and S. Waldbusser, "Transport
     Mappings for Version 2 of the Simple Network Management Protocol
     (SNMPv2)", RFC 1906, SNMP Research, Inc., Cisco Systems, Inc.,
     Dover Beach Consulting, Inc., International Network Services,
     January 1996.

[11] Case, J., Harrington D., Presuhn R., and B. Wijnen, "Message
     Processing and Dispatching for the Simple Network Management
     Protocol (SNMP)", RFC 2572, SNMP Research, Inc., Cabletron Systems,
     Inc., BMC Software, Inc., IBM T. J. Watson Research, April 1999

[12] Blumenthal, U., and B. Wijnen, "User-based Security Model (USM) for
     version 3 of the Simple Network Management Protocol (SNMPv3)", RFC
     2574, IBM T. J. Watson Research, April 1999

[13] Case, J., McCloghrie, K., Rose, M., and S. Waldbusser, "Protocol
     Operations for Version 2 of the Simple Network Management Protocol
     (SNMPv2)", RFC 1905, SNMP Research, Inc., Cisco Systems, Inc.,
     Dover Beach Consulting, Inc., International Network Services,
     January 1996.

[14] Levi, D., Meyer, P., and B. Stewart, "SNMPv3 Applications", RFC
     2573, SNMP Research, Inc., Secure Computing Corporation, Cisco
     Systems, April 1999

[15] Wijnen, B., Presuhn, R., and K. McCloghrie, "View-based Access
     Control Model (VACM) for the Simple Network Management Protocol
     (SNMP)", RFC 2575, IBM T. J. Watson Research, BMC Software, Inc.,
     Cisco Systems, Inc., April 1999

[16] Case, J., Mundy, R., Partain, D., and B. Stewart, "Introduction to
     Version 3 of the Internet-standard Network Management Framework",
     RFC 2570, SNMP Research, Inc., TIS Labs at Network Associates,
     Inc., Ericsson, Cisco Systems, April 1999

[ACTQMGMT]
     V. Firoiu, M. Borden "A Study of Active Queue Management for
     Congestion Control", March 2000, In IEEE Infocom 2000,
     http://www.ieee-infocom.org/2000/papers/405.pdf





Baker, Chan, Smith        Expires November 2000        [Page 63]

Internet Draft         Differentiated Services MIB              May 2000


[AF-PHB]
     J. Heinanen, F. Baker, W. Weiss, J. Wroclawski, "Assured Forwarding
     PHB Group.", RFC 2597, June 1999.

[DSARCH]
     S. Blake, D. Black, M. Carlson, E. Davies, Z. Wang, W. Weiss, "An
     Architecture for Differentiated Service", RFC 2475, December 1998.

[DSFIELD]
     K. Nichols, S. Blake, F. Baker, D. Black, "Definition of the
     Differentiated Services Field (DS Field) in the IPv4 and IPv6
     Headers", RFC 2474, December 1998.

[DSPIB]
     M. Fine, K. McCloghrie, J. Seligson, K. Chan, S. Hahn, A. Smith,
     "Differentiated Services Policy Information Base", March 2000,
     draft-ietf-diffserv-pib-00.txt

[DSTERMS]
     D. Grossman, "New Terminology for Diffserv", Internet Draft <draft-
     ietf-diffserv-new-terms-02.txt>, November 1999.

[EF-PHB]
     V. Jacobson, K. Nichols, K. Poduri, "An Expedited Forwarding PHB."
     RFC 2598, June 1999.

[IFMIB]
     K. McCloghrie, F. Kastenholz, "The Interfaces Group MIB using
     SMIv2", RFC 2233, November 1997.

[INETADDRESS]
     Daniele, M., Haberman, B., Routhier, S., Schoenwaelder, J.,
     "Textual Conventions for Internet Network Addresses.", Internet
     Draft <draft-ops-endpoint-mib-08.txt>, April 2000.

[INTSERVMIB]
     F. Baker, J. Krawczyk, A. Sastry, "Integrated Services Management
     Information Base using SMIv2", RFC 2213, September 1997.

[MODEL]
     Y. Bernet, S. Blake, A. Smith, D. Grossman, "A Conceptual Model for
     Diffserv Routers", Internet Draft <draft-ietf-diffserv-
     model-03.txt>, May 2000.

[POLTERM]
     F. Reichmeyer,  D. Grossman, J. Strassner, M. Condell, "A Common
     Terminology for Policy Management", Internet Draft <draft-





Baker, Chan, Smith        Expires November 2000        [Page 64]

Internet Draft         Differentiated Services MIB              May 2000


     reichmeyer-polterm-terminology-00.txt>, March 2000



8.  Authors' Addresses

     Fred Baker
     Cisco Systems
     519 Lado Drive
     Santa Barbara, California 93111
     fred@cisco.com

     Kwok Ho Chan
     Nortel Networks
     600 Technology Park Drive
     Billerica, MA 01821
     khchan@nortelnetworks.com

     Andrew Smith
     Extreme Networks
     3585 Monroe Street
     Santa Clara, CA 95051
     USA
     andrew@extremenetworks.com



Table of Contents

1 The SNMP Management Framework ...................................    2
2 Structure of this MIB ...........................................    3
2.1 Overview ......................................................    3
2.2 Classifiers ...................................................    4
2.2.1 Classifier Table ............................................    4
2.2.2 IP Six-Tuple Classifier Table ...............................    4
2.3 Meters ........................................................    5
2.3.1 Meter Table .................................................    5
2.3.2 Token-Bucket Meter Table ....................................    5
2.4 Actions .......................................................    6
2.4.1 DSCP Mark Action Table ......................................    6
2.4.2 Count Action Table ..........................................    6
2.4.3 Absolute Drop Action ........................................    7
2.5 Queueing Elements .............................................    7
2.5.1 Algorithmic Dropper Table ...................................    7
2.5.2 Queues and Schedulers .......................................    8
2.5.3 Example of Algorithmic Droppers, Queues and Schedulers ......    9
2.5.4 Example of extending this MIB ...............................   10





Baker, Chan, Smith        Expires November 2000        [Page 65]

Internet Draft         Differentiated Services MIB              May 2000


2.6 The use of RowPointer .........................................   10
3 Editorial information ...........................................   13
3.1 Open Issues resolved in this draft ............................   13
3.2 Still Open Issues .............................................   15
4 MIB Definition ..................................................   16
5 Acknowledgments .................................................   61
6 Security Considerations .........................................   61
7 References ......................................................   62
8 Authors' Addresses ..............................................   65











































Baker, Chan, Smith        Expires November 2000        [Page 66]

Internet Draft         Differentiated Services MIB              May 2000


9.  Full Copyright

   Copyright (C) The Internet Society (2000). All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implmentation may be prepared, copied, published and
   distributed, in whole or in part, without restriction of any kind,
   provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works. However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assigns.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

























Baker, Chan, Smith        Expires November 2000        [Page 67]

