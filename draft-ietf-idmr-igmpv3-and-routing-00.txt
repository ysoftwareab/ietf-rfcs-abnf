

   IDMR Working Group                                          B. Haberman 
   Internet Draft                                                J. Martin 
   draft-ietf-idmr-igmpv3-and-routing-00.txt               Nortel Networks 
   February 2001                                                           
   Expires August 2001                                                     
 
 
           IGMPv3 and Multicast Routing Protocol Interaction 
 
    
Status of this Memo 
    
   This document is an Internet-Draft and is in full conformance with 
   all provisions of Section 10 of RFC2026 [RFC 2026].  
    
   Internet-Drafts are working documents of the Internet Engineering 
   Task Force (IETF), its areas, and its working groups. Note that 
   other groups may also distribute working documents as Internet-
   Drafts. Internet-Drafts are draft documents valid for a maximum of 
   six months and may be updated, replaced, or obsoleted by other 
   documents at any time. It is inappropriate to use Internet-Drafts as 
   reference material or to cite them other than as "work in progress."  
    
   The list of current Internet-Drafts can be accessed at 
   http://www.ietf.org/ietf/1id-abstracts.txt.  
     
   The list of Internet-Draft Shadow Directories can be accessed at 
   http://www.ietf.org/shadow.html. 
     
     
Abstract 
    
   The definition of IGMPv3 requires new behavior within the multicast 
   routing protocols.  The additional source information contained in 
   IGMPv3 messages necessitates that multicast routing protocols manage 
   and utilize the information.  This document will describe how IGMPv3 
   and multicast routing protocols interact. 
 
1. Introduction 
    
   The definition of IGMPv3[IGMP3] requires new behavior within the 
   multicast routing protocols.  The additional source information 
   contained in IGMPv3 messages necessitates that multicast routing 
   protocols manage and utilize the information.  This document will 
   describe how IGMPv3 and multicast routing protocols interact. 
    
   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", 
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this 
   document are to be interpreted as described in RFC 2119. 
 
2. Multicast Forwarding State 
   Existing multicast routing protocols utilize the IGMP database in 
   determining if local members exist for a particular group.  In the 

  
Haberman, Martin                                                     1 
 

 
Internet Draft      IGMPv3 and Multicast Protocols       February 2001 
    
   case of IGMPv3, these routing protocols must now build multicast 
   forwarding state based on the source filter information available 
   for each multicast group that has local membership. 
    
   The source filter state available in the IGMPv3 database should be 
   utilized when generating forwarding state for a multicast group.  If 
   the source address in the multicast packet is included in the IGMPv3 
   database for the specified multicast group, the multicast routing 
   protocol should add the interface to the list of downstream 
   interfaces, otherwise it should not be added based on local group 
   membership. 
    
3. DVMRP/IGMPv3 Interaction 
   The DVMRP protocol[DVMRP] interaction with IGMPv3 is important in 
   two areas: multicast distribution tree pruning and multicast 
   distribution tree grafting.  The following sections will describe 
   the behavior needed in DVMRP to interoperate with IGMPv3. 
 
  3.1  DVMRP Prunes 
   DVMRP prune messages are generated when a router determines that 
   there are no longer any interested downstream listeners.  The DVMRP 
   protocol builds prune information that contains both destination 
   group address and source network information. 
    
   When DVMRP routers implement IGMPv3, the source filter information 
   in the IGMPv3 database must be used in the creation of DVMRP prune 
   messages.  When IGMPv3 state changes (e.g. Report message received 
   with EXCLUDE state) and forwarding state exists for a particular 
   (S,G), DVMRP will create a prune containing the specified group and 
   source information. 
    
  3.2  DVMRP Grafts 
   DVMRP graft messages are generated when local group membership state 
   changes and a DVMRP prune is in place for the requested group 
   address.  The graft message overrides the prune state and should 
   result in the resumption of multicast flow for the requested group. 
    
   When DVMRP routers implement IGMPv3, the source filter information 
   in the IGMPv3 database must be used in the creation of DVMRP graft 
   messages.  State changes in the IGMPv3 database that renders 
   existing prune state obsolete (e.g. Report message received with 
   INCLUDE state) must result in the creation of a DVMRP graft message.  
 
4. MOSPF/IGMPv3 Interaction 
   In MOSPF[MOSPF], the consideration of IGMPv3 source filter 
   information is limited to the building of forwarding state 
   (discussed above).  This is due to the flooding of group-membership-
   LSAs within MOSPF. 
 
5. PIM-DM/IGMPv3 Interaction 



  
Haberman, Martin                                                     2 
    

 
Internet Draft      IGMPv3 and Multicast Protocols       February 2001 
    
   Like DVMRP, PIM-DM[PIMDM] must utilize the IGMPv3 source filter 
   information when generating Prune and Graft messages.  The following 
   sections describe the creation of these message types. 
    
  5.1  PIM-DM Prunes 
   PIM-DM prune messages are initiated when a PIM-DM router determines 
   that there are no entities interested in the data flowing on the 
   (S,G) forwarding state.  If the multicast router is running IGMPv3, 
   this is determined by the source S being EXCLUDED in the source 
   filter for the destination G or all interest in G being terminated 
   after several queries have expired without response. 
    
  5.2  PIM-DM Grafts 
   PIM-DM graft messages are sent in order to override an existing PIM-
   DM prune.  In the case of IGMPv3, this occurs when prune state 
   exists for (S,G) and an IGMPv3 state change occurs in which the 
   source filter state for S changes to INCLUDE for the specified G. 
 
6. PIM-SM/IGMPv3 Interaction 
   The interaction between PIM-SM and IGMPv3 is well defined in 
   [PIMSM]. 
 
7. Outstanding Issues 
   The following is a list of open issues that need to be addressed: 
           - More detailed protocol descriptions 
           - SSM behavior in DVMRP, MOSPF, and PIM-DM? 
           - Security issues 
 
8. Security Considerations 
   TBD. 
    
9. Authors' Addresses 
    
   Brian Haberman 
   Nortel Networks 
   4309 Emperor Blvd. 
   Suite 200 
   Durham, NC  27703 
   1-919-992-4439 
   haberman@nortelnetworks.com 
    
   Jim Martin 
   Nortel Networks 
   4401 Great America Parkway 
   Santa Clara, CA  95054 
   1-408-495-3792 
   jrm@nortelnetworks.com






  
Haberman, Martin                                                     3 
    

 
Internet Draft      IGMPv3 and Multicast Protocols       February 2001 
    
    
10. References 
 
 

   [IGMP3] B. Cain, et al, "Internet Group Management Protocol, Version 
           3", work in progress, January 2001. 
    
   [DVMRP] T. Pusateri, "Distance Vector Multicast Routing Protocol", 
           work in progress, August 2000. 
    
   [MOSPF] J. Moy, "Multicast Extensions to OSPF", RFC 1584, March 
           1994. 
    
   [PIMDM] S. Deering, et al, "Protocol Independent Multicast - Dense 
           Mode Specification", work in progress, ???. 
    
   [PIMSM] B. Fenner, et al, "Protocol Independent Multicast - Sparse 
           Mode Protocol Specification (Revised)", work in progress, 
           November 2000. 


































  
Haberman, Martin                                                     4 
    
