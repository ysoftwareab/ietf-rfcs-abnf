<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>EVPN Support for L3 Fast Convergence and Aliasing/Backup Path</title>
<meta content="A. Sajassi" name="author">
<meta content="G. Badoni" name="author">
<meta content="P. Warade" name="author">
<meta content="S. Pasupula" name="author">
<meta content="L. Krattiger" name="author">
<meta content="J. Drake" name="author">
<meta content="J. Rabadan" name="author">
<meta content="
       This document proposes an EVPN extension to allow several of its
      multihoming functions, fast convergence and aliasing/backup path, to be
      used in conjunction with inter-subnet forwarding. 
    " name="description">
<meta content="xml2rfc 3.12.3" name="generator">
<meta content="draft-sajassi-bess-evpn-ip-aliasing-04" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.12.3
    Python 3.6.12
    appdirs 1.4.4
    ConfigArgParse 1.5.3
    google-i18n-address 2.5.0
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.8.0
    MarkupSafe 2.0.1
    pycountry 22.1.10
    pyflakes 2.4.0
    PyYAML 6.0
    requests 2.27.1
    setuptools 59.6.0
    six 1.16.0
    WeasyPrint 52.5
-->
<link href="/tmp/draft-sajassi-bess-evpn-ip-aliasing-04-wdtr1ui_.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">IP Aliasing Support for EVPN</td>
<td class="right">March 2022</td>
</tr></thead>
<tfoot><tr>
<td class="left">Sajassi, et al.</td>
<td class="center">Expires 8 September 2022</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">Network Working Group</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-sajassi-bess-evpn-ip-aliasing-04</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2022-03-07" class="published">7 March 2022</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2022-09-08">8 September 2022</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">A. Sajassi, <span class="editor">Ed.</span>
</div>
<div class="org">Cisco Systems</div>
</div>
<div class="author">
      <div class="author-name">G. Badoni</div>
<div class="org">Cisco Systems</div>
</div>
<div class="author">
      <div class="author-name">P. Warade</div>
<div class="org">Cisco Systems</div>
</div>
<div class="author">
      <div class="author-name">S. Pasupula</div>
<div class="org">Cisco Systems</div>
</div>
<div class="author">
      <div class="author-name">L. Krattiger</div>
<div class="org">Cisco Systems</div>
</div>
<div class="author">
      <div class="author-name">J. Drake, <span class="editor">Ed.</span>
</div>
<div class="org">Juniper</div>
</div>
<div class="author">
      <div class="author-name">J. Rabadan, <span class="editor">Ed.</span>
</div>
<div class="org">Nokia</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">EVPN Support for L3 Fast Convergence and Aliasing/Backup Path</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document proposes an EVPN extension to allow several of its
      multihoming functions, fast convergence and aliasing/backup path, to be
      used in conjunction with inter-subnet forwarding.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo-6">
<a href="#name-status-of-this-memo-6" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 8 September 2022.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice-6">
<a href="#name-copyright-notice-6" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2022 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents-6">
<a href="#name-table-of-contents-6" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction-6" class="xref">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="xref">1.1</a>.  <a href="#name-ethernet-segments-for-host-" class="xref">Ethernet Segments for Host Routes in Symmetric IRB</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.2">
                <p id="section-toc.1-1.1.2.2.1" class="keepWithNext"><a href="#section-1.2" class="xref">1.2</a>.  <a href="#name-inter-subnet-forwarding-for" class="xref">Inter-subnet Forwarding for Prefix Routes in the Interface-less IP-VRF-to-IP-VRF Model</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.3">
                <p id="section-toc.1-1.1.2.3.1"><a href="#section-1.3" class="xref">1.3</a>.  <a href="#name-ethernet-segments-for-prefi" class="xref">Ethernet Segments for Prefix routes in IP-VRF-to-IP-VRF use-cases</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.3.2.1">
                    <p id="section-toc.1-1.1.2.3.2.1.1" class="keepWithNext"><a href="#section-1.3.1" class="xref">1.3.1</a>.  <a href="#name-ip-aliasing-for-evpn-ip-pre" class="xref">IP Aliasing for EVPN IP Prefix routes</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.3.2.2">
                    <p id="section-toc.1-1.1.2.3.2.2.1"><a href="#section-1.3.2" class="xref">1.3.2</a>.  <a href="#name-centralized-routing-model" class="xref">Centralized Routing Model</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.4">
                <p id="section-toc.1-1.1.2.4.1"><a href="#section-1.4" class="xref">1.4</a>.  <a href="#name-terminology-and-conventions" class="xref">Terminology and Conventions</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="xref">2</a>.  <a href="#name-ethernet-segments-for-l3-al" class="xref">Ethernet Segments for L3 Aliasing/Backup Path and Fast Convergence</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-ip-aliasing-and-backup-path" class="xref">IP Aliasing and Backup Path</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="xref">3.1</a>.  <a href="#name-constructing-the-ip-a-d-per" class="xref">Constructing the IP A-D per EVI Route</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-fast-convergence-for-routed" class="xref">Fast Convergence for Routed Traffic</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="xref">4.1</a>.  <a href="#name-constructing-ip-a-d-per-eth" class="xref">Constructing IP A-D per Ethernet Segment Route</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1.2.1">
                    <p id="section-toc.1-1.4.2.1.2.1.1"><a href="#section-4.1.1" class="xref">4.1.1</a>.  <a href="#name-ip-a-d-per-es-route-targets" class="xref">IP A-D per ES Route Targets</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="xref">4.2</a>.  <a href="#name-avoiding-convergence-issues" class="xref">Avoiding convergence issues by synchronizing IP prefixes</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="xref">4.3</a>.  <a href="#name-handling-silent-host-mac-ip" class="xref">Handling Silent Host MAC/IP route for IP Aliasing</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.4">
                <p id="section-toc.1-1.4.2.4.1"><a href="#section-4.4" class="xref">4.4</a>.  <a href="#name-mac-aging" class="xref">MAC Aging</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-determining-reachability-to" class="xref">Determining Reachability to Unicast IP Addresses</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="xref">5.1</a>.  <a href="#name-local-learning" class="xref">Local Learning</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="xref">5.2</a>.  <a href="#name-remote-learning" class="xref">Remote Learning</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a href="#section-5.3" class="xref">5.3</a>.  <a href="#name-constructing-the-evpn-ip-ro" class="xref">Constructing the EVPN IP Routes</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3.2.1">
                    <p id="section-toc.1-1.5.2.3.2.1.1"><a href="#section-5.3.1" class="xref">5.3.1</a>.  <a href="#name-route-resolution" class="xref">Route Resolution</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-forwarding-unicast-packets" class="xref">Forwarding Unicast Packets</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-load-balancing-of-unicast-p" class="xref">Load Balancing of Unicast Packets</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-ip-aliasing-and-unequal-ecm" class="xref">IP Aliasing and Unequal ECMP for IP Prefix Routes</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-security-considerations-6" class="xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="xref">10</a>. <a href="#name-iana-considerations-6" class="xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-11" class="xref">11</a>. <a href="#name-contributors-3" class="xref">Contributors</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#section-12" class="xref">12</a>. <a href="#name-acknowledgments-4" class="xref">Acknowledgments</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#section-13" class="xref">13</a>. <a href="#name-references-6" class="xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.1">
                <p id="section-toc.1-1.13.2.1.1"><a href="#section-13.1" class="xref">13.1</a>.  <a href="#name-normative-references-6" class="xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13.2.2">
                <p id="section-toc.1-1.13.2.2.1"><a href="#section-13.2" class="xref">13.2</a>.  <a href="#name-informative-references-6" class="xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a href="#appendix-A" class="xref"></a><a href="#name-authors-addresses-6" class="xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="sect-1">
<section id="section-1">
      <h2 id="name-introduction-6">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction-6" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">This document proposes an EVPN extension to allow several of its
      multihoming functions, fast convergence and aliasing/backup path, to be
      used in conjunction with inter-subnet forwarding. It re-uses the
      existing EVPN routes, the Ethernet A-D per ES and the Ethernet A-D per
      EVI routes, which are used for these multihoming functions. In
      particular, there are three use-cases that could benefit from the use of
      these multihoming functions:<a href="#section-1-1" class="pilcrow">¶</a></p>
<ol start="1" type="a" class="normal type-a" id="section-1-2">
<li id="section-1-2.1">Inter-subnet forwarding for host routes in symmetric IRB <span>[<a href="#RFC9135" class="xref">RFC9135</a>]</span>.<a href="#section-1-2.1" class="pilcrow">¶</a>
</li>
        <li id="section-1-2.2">Inter-subnet forwarding for prefix routes in the interface-less
          IP-VRF-to-IP-VRF model <span>[<a href="#RFC9136" class="xref">RFC9136</a>]</span>.<a href="#section-1-2.2" class="pilcrow">¶</a>
</li>
        <li id="section-1-2.3">Inter-subnet forwarding for prefix routes when the ESI is used
          exclusively as an L3 construct <span>[<a href="#RFC9136" class="xref">RFC9136</a>]</span>.<a href="#section-1-2.3" class="pilcrow">¶</a>
</li>
      </ol>
<div id="sect-1.1">
<section id="section-1.1">
        <h3 id="name-ethernet-segments-for-host-">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-ethernet-segments-for-host-" class="section-name selfRef">Ethernet Segments for Host Routes in Symmetric IRB</a>
        </h3>
<p id="section-1.1-1">Consider a pair of multi-homing PEs, PE1 and PE2, as illustrated in
        <a href="#Figure1" class="xref">Figure 1</a>. Let there be a host H1 attached to them.
        Consider PE3 and a host H3 attached to it.<a href="#section-1.1-1" class="pilcrow">¶</a></p>
<span id="name-inter-subnet-traffic-betwee"></span><div id="Figure1">
<figure id="figure-1">
          <div class="alignLeft art-text artwork" id="section-1.1-2.1">
<pre>
                               +----------------+
                               |     EVPN       |
                            +------+            |
                            | PE1  | +---&gt;      |
                     +------+      | RT-2       |
                     |      |      | IP1     +--+---+
              +---+  | ES1  +------+ ESI1    | PE3  |
         H1+--+CE1+--+         |             |      +-+H3
              +---+  |      +------+         |      |
                     |      | PE2  |         +--+---+
                     +------+      |            |
                            |      |            |
                            +------+            |
                               |                |
                               +----------------+


</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-inter-subnet-traffic-betwee" class="selfRef">Inter-subnet traffic between Multihoming PEs and Remote PE</a>
          </figcaption></figure>
</div>
<p id="section-1.1-3">With Asymmetric IRB <span>[<a href="#RFC9135" class="xref">RFC9135</a>]</span>, if H3 sends
        inter-subnet traffic to H1, routing will happen at PE3. PE3 will be
        attached to the destination IRB interface and will trigger ARP/ND
        requests if it does not have an ARP/ND adjacency to H1. A subsequent
        routing lookup will resolve the destination MAC to H1's MAC address.
        Furthermore, H1's MAC will point to an ECMP EVPN destination on PE1
        and PE2, either due to host route advertisement from both PE1 and PE2,
        or due to Ethernet Segment MAC Aliasing as detailed in <span>[<a href="#RFC7432" class="xref">RFC7432</a>]</span>.<a href="#section-1.1-3" class="pilcrow">¶</a></p>
<p id="section-1.1-4">With Symmetric IRB <span>[<a href="#RFC9135" class="xref">RFC9135</a>]</span>, if H3 sends
        inter-subnet traffic to H1, a routing lookup will happen at PE3's
        IP-VRF and this routing lookup will not yield the destination IRB
        interface and therefore MAC Aliasing is not possible. In order to have
        per-flow load balancing for H3's routed traffic to H1, an IP ECMP list
        (to PE1/PE2) needs to be associated to H1's host route in the IP-VRF
        route-table. If H1 is locally learned only at one of the multi-homing
        PEs, PE1 or PE2, due to LAG hashing, PE3 will not be able to build an
        IP ECMP list for the H1 host route.<a href="#section-1.1-4" class="pilcrow">¶</a></p>
<p id="section-1.1-5">With the extension described in this document, PE3's IP-VRF becomes
        Ethernet-Segment-aware and builds an IP ECMP list for H1 based on the
        advertisement of ES1 along with H1 in a MAC/IP route and the
        availability of ES1 on PE1 and PE2.<a href="#section-1.1-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-1.2">
<section id="section-1.2">
        <h3 id="name-inter-subnet-forwarding-for">
<a href="#section-1.2" class="section-number selfRef">1.2. </a><a href="#name-inter-subnet-forwarding-for" class="section-name selfRef">Inter-subnet Forwarding for Prefix Routes in the Interface-less IP-VRF-to-IP-VRF Model</a>
        </h3>
<p id="section-1.2-1">In the Interface-less IP-VRF-to-IP-VRF model described in <span>[<a href="#RFC9136" class="xref">RFC9136</a>]</span> there is no Overlay Index and hence no recursive
        resolution of the IP Prefix route to either a MAC/IP Advertisement or
        an Ethernet A-D per ES/EVI route, which means that the fast
        convergence and aliasing/backup path functions are disabled. The
        recursive resolution of an IP Prefix route to an Ethernet A-D per
        ES/EVI route is already described in <span>[<a href="#RFC9136" class="xref">RFC9136</a>]</span>.<a href="#section-1.2-1" class="pilcrow">¶</a></p>
<p id="section-1.2-2">The scenario illustrated in <a href="#Figure2" class="xref">Figure 2</a> will be used
        to explain the procedures.<a href="#section-1.2-2" class="pilcrow">¶</a></p>
<span id="name-inter-subnet-example-with-i"></span><div id="Figure2">
<figure id="figure-2">
          <div class="alignLeft art-text artwork" id="section-1.2-3.1">
<pre>
                               +----------------+
                               |     EVPN       |
                            +------+            |
                            | PE1  | +---&gt;      |
                     +------+      | RT-5       |
                     |      |      | IP1/32  +--+---+
              +---+  | ES1  +------+ ESI1    | PE3  |
         H1+--+CE1+--+         |             |      +-+H3
              +---+  |      +------+         |      |
                     |      | PE2  |         +--+---+
                     +------+      |            |
                            |      |            |
                            +------+            |
                               |                |
                               +----------------+

</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-inter-subnet-example-with-i" class="selfRef">Inter-subnet example with IP Prefix routes</a>
          </figcaption></figure>
</div>
<p id="section-1.2-4">Consider PE1 and PE2 are multi-homed to CE1 (in an All-Active
        Ethernet Segment ES1), and PE1, PE2 and PE3 are attached to an IP-VRF
        of the same tenant. Suppose H1's host route is learned (via ARP or ND
        snooping) on PE1 only, and PE1 advertises an EVPN IP Prefix route for
        H1's host route. If H3 sends inter-subnet traffic to H1, a routing
        lookup on PE3 would normally yield a single next-hop, i.e., PE1.<a href="#section-1.2-4" class="pilcrow">¶</a></p>
<p id="section-1.2-5">This document proposes the use of the ESI in the IP Prefix route
        and the recursive resolution to A-D per ES/EVI routes advertised from
        PE1 and PE2, so that H1's host route in PE3 can be associated to an IP
        ECMP list (to PE1/PE2) for aliasing purposes.<a href="#section-1.2-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-1.3">
<section id="section-1.3">
        <h3 id="name-ethernet-segments-for-prefi">
<a href="#section-1.3" class="section-number selfRef">1.3. </a><a href="#name-ethernet-segments-for-prefi" class="section-name selfRef">Ethernet Segments for Prefix routes in IP-VRF-to-IP-VRF use-cases</a>
        </h3>
<p id="section-1.3-1">This document also enables fast convergence and aliasing/backup
        path to be used even when the ESI is used exclusively as an L3
        construct, in an Interface-less IP-VRF-to-IP-VRF scenario <span>[<a href="#RFC9136" class="xref">RFC9136</a>]</span>. There are two use cases analyzed and supported by
        this document:<a href="#section-1.3-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1.3-2.1">IP Aliasing for EVPN IP Prefix routes<a href="#section-1.3-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.3-2.2">Centralized Routing Model<a href="#section-1.3-2.2" class="pilcrow">¶</a>
</li>
        </ul>
<div id="sect-1.3.1">
<section id="section-1.3.1">
          <h4 id="name-ip-aliasing-for-evpn-ip-pre">
<a href="#section-1.3.1" class="section-number selfRef">1.3.1. </a><a href="#name-ip-aliasing-for-evpn-ip-pre" class="section-name selfRef">IP Aliasing for EVPN IP Prefix routes</a>
          </h4>
<p id="section-1.3.1-1">As an example, consider the scenario in <a href="#Figure3" class="xref">Figure 3</a>
          in which PE1 and PE2 are multi-homed to CE1. However, and contrary
          to CE1 in <a href="#Figure2" class="xref">Figure 2</a>, in this case the links between
          CE1 and PE1/PE2 are used exclusively for L3 protocols and L3
          forwarding in different BDs, and a BGP session established between
          CE1's loopback address and PE1's IRB address.<a href="#section-1.3.1-1" class="pilcrow">¶</a></p>
<span id="name-layer-3-multihoming-pes"></span><div id="Figure3">
<figure id="figure-3">
            <div class="alignLeft art-text artwork" id="section-1.3.1-2.1">
<pre>
                                      +-----------------------+
                                      |        EVPN           |
                        PE1           |                       |
                       +-------------------+                  |
                       |       IRB1        |                  |
                       |  +---+   +------+ | -------&gt;         |
              +-----------|BD1|---|IPVRF1| | RT-5             |
      eBGP    |        |  +---+   |      | | 50.0/24          | PE3
   +------------------------&gt;10.1 +------+ | ESI1  +----------------+
   |          |        +-------------------+       | +------+       |
  +-----+10.2 |                       |   ^        | |IPVRF1| +---+ |
  | CE1 |-----+    ES1                |   |        | |      |-|BD3| |
  |     |-----+                       |   +--------| +------+ +---+ |
  +-----+20.2 |         PE2           |        +---|            |   |
  lo1         |        +--------------+----+   |   +------------|---+
  1.1.1.1     |        |       IRB2        |   |              | |
  Prefixes:   |        |  +---+   +------+ |   |              | H4
  50.0/24     +-----------|BD2|---|IPVRF1| |&lt;--+              |
  60.0/24              |  +---+   |      | |                  |
                       |     20.1 +------+ |                  |
                       +-------------------+                  |
                                      |                       |
                                      +-----------------------+

  Note:
    IP addresses expanded by adding 0s
    E.g., 50.0 expands to 50.0.0.0</pre>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
<a href="#name-layer-3-multihoming-pes" class="selfRef">Layer-3 Multihoming PEs</a>
            </figcaption></figure>
</div>
<p id="section-1.3.1-3">In these use-cases, sometimes the CE supports a single BGP
          session to one of the PEs (through which it advertises a number of
          IP Prefixes seating behind itself) and yet, it is desired that
          remote PEs can build an IP ECMP list or backup IP list including all
          the PEs multi-homed to the same CE. For example, in <a href="#Figure3" class="xref">Figure 3</a>, CE1 has a single eBGP neighbor, i.e., PE1.
          Load-balancing for traffic from CE1 to H4 can be accomplished by a
          default route with next-hops PE1 and PE2, however, load-balancing
          from H4 to any of the prefixes attached to CE1 would not be possible
          since only PE1 would advertise EVPN IP Prefix routes for CE1's
          prefixes. This document provides a solution so that PE3 considers
          PE2 as a next-hop in the IP ECMP list for CE1's prefixes, even if
          PE2 did not advertise the IP Prefix routes for those prefixes in the
          first place.<a href="#section-1.3.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-1.3.2">
<section id="section-1.3.2">
          <h4 id="name-centralized-routing-model">
<a href="#section-1.3.2" class="section-number selfRef">1.3.2. </a><a href="#name-centralized-routing-model" class="section-name selfRef">Centralized Routing Model</a>
          </h4>
<p id="section-1.3.2-1"><a href="#Centralized" class="xref">Figure 4</a> illustrates a model in which
          multiple CEs establish an eBGP PE-CE session with a Centralized PE.<a href="#section-1.3.2-1" class="pilcrow">¶</a></p>
<span id="name-centralized-routing-model-2"></span><div id="Centralized">
<figure id="figure-4">
            <div class="alignLeft art-text artwork" id="section-1.3.2-2.1">
<pre>                 +-------------------------------+
                 | PE1       EVPN                |
            +----------+                         |
            |  +------+|                         |
            |  |IP-VRF||                         |
     10.1 --------------------+                  |
   +---+    |+--+     ||      |eBGP              |
   |CE1|----||BD|-----+|      |PE-CE             |
   |   |-+  |+--+      |      |50.0/24           | PE3
   +---+ |  +----------+      |NH 10.1      +----------+
Prefixes:|       |            |             |+------+  |
50.0/24  |       |            |             ||IP-VRF|  |
60.0/24  |       | PE2        |   +---------&gt;|    +--+ |
         |  +----------+      |   |         |+----|BD| |
         |  |  +------+|      |   |         |     +--+ |
         |  |  |IP-VRF||      |   |         +----------+
         |  |  |      ||      |   |              |  |
         |  |+--+     ||      |   |RT-5          |  |
         +--||BD|-----+|      |   |50.0/24       | H4
            |+--+      |      |   |ESI1          |
            +----------+      |   |NH PEC        |
                 |            |   |              |
                 |        30.1|   | PEC          |
                 |         +--V---|-+            |
                 |         |+------+|            |
                 +---------||IP-VRF||------------+
                           |+------+|
                           +--------+
  Note:
    IP addresses expanded by adding 0s
    E.g., 50.0 expands to 50.0.0.0</pre>
</div>
<figcaption><a href="#figure-4" class="selfRef">Figure 4</a>:
<a href="#name-centralized-routing-model-2" class="selfRef">Centralized Routing Model</a>
            </figcaption></figure>
</div>
<p id="section-1.3.2-3">The CEs in this case are usually VNFs (Virtual Network Function
          entities) or CNFs (Containerized Network Function entities) and by
          provisioning the same network parameters on all of them, the
          operation gets significantly simplified. The configuration on the
          PEs also gets simplified, since the PE-CE eBGP sessions to the CEs
          are only configured on a centralized PE. In the diagram, CE1 is one
          of these VNF/CNFs that sets up a multi-hop eBGP session to the
          centralized PEC. As an example, CE1 advertises prefix 50.0.0.0/24
          with Next Hop 10.0.0.1 (to PEC) via the multi-hop eBGP session. PEC
          then exports the prefix into a RT-5 route, following the
          Interface-less IP-VRF-to-IP-VRF model <span>[<a href="#RFC9136" class="xref">RFC9136</a>]</span>, with
          Next Hop PEC. When H4 sends traffic to an IP address of the subnet
          50.0.0.0/24, the traffic will be forwarded to PEC first, and PEC
          will then forward to PE1 (or PE2). In other words, this model
          simplifies the configuration and operation of the CEs, however, it
          introduces an inefficiency since traffic needs to go through the
          Centralized PE (PEC) instead of going directly to the PE(s) attached
          to the destination CE. The IP Aliasing solution specified in this
          document overcomes this inefficiency and allows traffic from PE3 to
          be forwarded directly to PE1 or PE2, without going through PEC.<a href="#section-1.3.2-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sect-1.4">
<section id="section-1.4">
        <h3 id="name-terminology-and-conventions">
<a href="#section-1.4" class="section-number selfRef">1.4. </a><a href="#name-terminology-and-conventions" class="section-name selfRef">Terminology and Conventions</a>
        </h3>
<p id="section-1.4-1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
        "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
        "OPTIONAL" in this document are to be interpreted as described in BCP
        14 <span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="xref">RFC8174</a>]</span> when, and only
        when, they appear in all capitals, as shown here.<a href="#section-1.4-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-1.4-2.1">IRB: Integrated Routing and Bridging<a href="#section-1.4-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.4-2.2">IRB Interface: Integrated Bridging and Routing Interface. A
            virtual interface that connects the Bridge Table and the IP-VRF on
            an NVE.<a href="#section-1.4-2.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.4-2.3">BD: Broadcast Domain. An EVI may be comprised of one BD
            (VLAN-based or VLAN Bundle services) or multiple BDs (VLAN-aware
            Bundle services).<a href="#section-1.4-2.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.4-2.4">Bridge Table: An instantiation of a broadcast domain on a
            MAC-VRF.<a href="#section-1.4-2.4" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.4-2.5">CE: Customer Edge device, e.g., a host, router, or switch.s<a href="#section-1.4-2.5" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.4-2.6">EVI: An EVPN instance spanning the Provider Edge (PE) devices
            participating in that EVPN.<a href="#section-1.4-2.6" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.4-2.7">MAC-VRF: A Virtual Routing and Forwarding table for Media
            Access Control (MAC) addresses on a PE.<a href="#section-1.4-2.7" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.4-2.8">Ethernet Segment (ES): When a customer site (device or network)
            is connected to one or more PEs via a set of Ethernet links, then
            that set of links is referred to as an 'Ethernet segment'.<a href="#section-1.4-2.8" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.4-2.9">Ethernet Segment Identifier (ESI): A unique non-zero identifier
            that identifies an Ethernet segment is called an 'Ethernet Segment
            Identifier'.<a href="#section-1.4-2.9" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.4-2.10">IP-VRF: A VPN Routing and Forwarding table for IP routes on an
            NVE/PE. The IP routes could be populated by any routing protocol,
            E.g., EVPN, IP-VPN and BGP PE-CE IP address families. An IP-VRF is
            also an instantiation of a layer 3 VPN in an NVE/PE.<a href="#section-1.4-2.10" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.4-2.11">EVPN IP route: An EVPN IP Prefix route or an EVPN MAC/IP
            Advertisement route.<a href="#section-1.4-2.11" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.4-2.12">LACP: Link Aggregation Control Protocol.<a href="#section-1.4-2.12" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.4-2.13">PE: Provider Edge device.<a href="#section-1.4-2.13" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.4-2.14">Single-Active Redundancy Mode: When only a single PE, among all
            the PEs attached to an Ethernet segment, is allowed to forward
            traffic to/from that Ethernet segment for a given VLAN, then the
            Ethernet segment is defined to be operating in Single-Active
            redundancy mode.<a href="#section-1.4-2.14" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.4-2.15">All-Active Redundancy Mode: When all PEs attached to an
            Ethernet segment are allowed to forward known unicast traffic
            to/from that Ethernet segment for a given VLAN, then the Ethernet
            segment is defined to be operating in All-Active redundancy
            mode.<a href="#section-1.4-2.15" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.4-2.16">RT-2: EVPN MAC/IP Advertisement route, as specified in <span>[<a href="#RFC7432" class="xref">RFC7432</a>]</span>.<a href="#section-1.4-2.16" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.4-2.17">RT-4: EVPN Ethernet Segment route, as specified in <span>[<a href="#RFC7432" class="xref">RFC7432</a>]</span>.<a href="#section-1.4-2.17" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-1.4-2.18">RT-5: EVPN IP Prefix route, as specified in <span>[<a href="#RFC9136" class="xref">RFC9136</a>]</span>.<a href="#section-1.4-2.18" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
</section>
</div>
<div id="sect-2">
<section id="section-2">
      <h2 id="name-ethernet-segments-for-l3-al">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-ethernet-segments-for-l3-al" class="section-name selfRef">Ethernet Segments for L3 Aliasing/Backup Path and Fast Convergence</a>
      </h2>
<p id="section-2-1">The first two use cases described in <a href="#sect-1" class="xref">Section 1</a> do not
      require any extensions to the Ethernet Segment definition and both cases
      support Ethernet Segments as a set of Ethernet links and specified in
      <span>[<a href="#RFC7432" class="xref">RFC7432</a>]</span>, or virtual Ethernet Segments as a set of
      logical links specified in <span>[<a href="#I-D.ietf-bess-evpn-virtual-eth-segment" class="xref">I-D.ietf-bess-evpn-virtual-eth-segment</a>]</span>.<a href="#section-2-1" class="pilcrow">¶</a></p>
<p id="section-2-2">The third use case in <a href="#sect-1" class="xref">Section 1</a> requires an extension
      to the way Ethernet Segments are defined and associated. In this case,
      the Ethernet Segment is a Layer-3 construct characterized as
      follows:<a href="#section-2-2" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-2-3">
<li id="section-2-3.1">The ES is defined as a set of Layer-3 links to the multi-homed CE
          and its state MUST be linked to the layer-3 reachability from each
          multi-homed PE to the CE's loopback address via a non-EVPN route in
          the PE's IP-VRF.<a href="#section-2-3.1" class="pilcrow">¶</a>
</li>
        <li id="section-2-3.2">The ESI SHOULD be of type 4 <span>[<a href="#RFC7432" class="xref">RFC7432</a>]</span> and set to
          the router ID of the multi-homed CE.<a href="#section-2-3.2" class="pilcrow">¶</a>
</li>
        <li id="section-2-3.3">All-active or single-active multi-homing redundancy modes are
          supported, however, the redundancy mode only affects the procedures
          in <a href="#sect-3" class="xref">Section 3</a>.<a href="#section-2-3.3" class="pilcrow">¶</a>
</li>
        <li id="section-2-3.4">PEs attached to the same Layer-3 ES discover each other through
          the exchange of RT-4 routes (Ethernet Segment routes). DF Election
          procedures <span>[<a href="#RFC8584" class="xref">RFC8584</a>]</span> MAY be used for single-active
          multi-homing mode.<a href="#section-2-3.4" class="pilcrow">¶</a>
</li>
        <li id="section-2-3.5">The routes advertised from the multi-homed CE's and installed in
          the PE's IP-VRF table with the CE's loopback as the next-hop MUST be
          re-advertised by the PE in EVPN IP Prefix routes with the ESI of the
          CE. The rest of the EVPN IP Prefix routes fields are set as per the
          Interface-less model in <span>[<a href="#RFC9136" class="xref">RFC9136</a>]</span>. Note that the BGP
          PE-CE routes advertised by the multi-homed CE are installed in the
          IP-VRF normally irrespective of the Next Hop being resolved to an
          EVPN or a non-EVPN route, and they are exported as a RT-5 with the
          ESI.<a href="#section-2-3.5" class="pilcrow">¶</a>
</li>
      </ol>
<p id="section-2-4">In the example depicted in <a href="#Figure3" class="xref">Figure 3</a>, ES1 is
      defined as the set of layer-3 links that connects PE1 and PE2 to CE1.
      Its ESI, e.g., ESI-1, is derived as a type 4 ESI using the CE's router
      ID. ES-1 will be operationally up in the PE as long as CE1's loopback
      route is installed in the PE's IP-VRF and learned via any routing
      protocol except for an EVPN route. E.g., an active static route to
      1.1.1.1 via next-hop 10.0.0.2 would make the ES operationally up in PE1,
      and the eBGP routes received from CE1 with next-hop 1.1.1.1 will be
      re-advertised as RT-5 routes with ESI-1.<a href="#section-2-4" class="pilcrow">¶</a></p>
<p id="section-2-5">In the example illustrated in <a href="#Centralized" class="xref">Figure 4</a>, ES1 is a
      set of layer-3 links connecting PE1, PE2 and PEC to CE1. ESI-1 is
      derived as a type 4 ESI using the CE's router ID, as in the previous
      example. CE1's loopback route (which is associated to ES1) is installed
      in PE1 and PE2 via non-EVPN route, hence ES1 is operationally up in PE1
      and PE2. On PE-C though, CE1's loopback is installed via EVPN IP Prefix
      route, therefore, as per point 1 in the current section, ES1 is
      operationally down in PEC. As per point 5, this does not prevent PEC
      from exporting CE1's prefixes into RT-5 routes with ESI-1. However,
      since ES-1 is operationally down in PEC, no IP A-D per EVI routes (<a href="#sect-3" class="xref">Section 3</a>) and no IP A-D per ES routes <a href="#sect-4" class="xref">Section 4</a>
      for ESI-1 will be advertised from PEC, preventing PEC from attracting
      traffic destined to CE1.<a href="#section-2-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-3">
<section id="section-3">
      <h2 id="name-ip-aliasing-and-backup-path">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-ip-aliasing-and-backup-path" class="section-name selfRef">IP Aliasing and Backup Path</a>
      </h2>
<p id="section-3-1">In order to address the use-cases described in <a href="#sect-1" class="xref">Section 1</a>, above, this document proposes that:<a href="#section-3-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-3-2">
<li id="section-3-2.1">
          <p id="section-3-2.1.1">A PE that is attached to a given ES will advertise a set of one
          or more Ethernet A-D per ES routes for that ES. Each is termed an
          'IP A-D per ES' route and is tagged with the route
          targets (RTs) for one or more of the IP-VRFs defined on it for that
          ES; the complete set of IP A-D per ES routes contains the RTs for
          all of the IP-VRFs defined on it for that ES.<a href="#section-3-2.1.1" class="pilcrow">¶</a></p>
<p id="section-3-2.1.2">A remote PE imports an IP A-D per ES route into the
          IP-VRFs corresponding to the RTs with which the route is tagged.
          When the complete set of IP A-D per ES routes has been processed, a
          remote PE will have imported an IP A-D per ES route into each of the
          IP-VRFs defined on it for that ES; this enables fast convergence for
          each of these IP-VRFs.<a href="#section-3-2.1.2" class="pilcrow">¶</a></p>
</li>
        <li id="section-3-2.2">
          <p id="section-3-2.2.1">A PE advertises for this ES, an Ethernet A-D Per EVI route for
          each of the IP-VRFs defined on it. Each is termed an 'IP A-D
          per EVI' route and is tagged with the RT for a given IP-VRF,
          and conveys a label that identifies that IP-VRF.<a href="#section-3-2.2.1" class="pilcrow">¶</a></p>
<p id="section-3-2.2.2">A remote PE imports an IP A-D per EVI route into the
          IP-VRF corresponding to the RT with which the route is tagged. The
          label contained in the route enables aliasing/backup path for the
          routes in that IP-VRF.<a href="#section-3-2.2.2" class="pilcrow">¶</a></p>
</li>
      </ol>
<p id="section-3-3">To address the third use-case described in <a href="#sect-1" class="xref">Section 1</a>,
      where the links between a CE and its multihomed PEs are used exclusively
      for L3 protocols and L3 forwarding, a PE uses the procedures described
      in 1) and 2), above.<a href="#section-3-3" class="pilcrow">¶</a></p>
<p id="section-3-4">The processing of the IP A-D per ES and the IP A-D per EVI routes is
      as defined in <span>[<a href="#RFC7432" class="xref">RFC7432</a>]</span> and <span>[<a href="#RFC8365" class="xref">RFC8365</a>]</span>
      except that the fast convergence and aliasing/backup path functions
      apply to the routes contained in an IP-VRF. In particular, a remote PE
      that receives an EVPN MAC/IP Advertisement route or an IP Prefix route
      with a non-reserved ESI and the RT of a particular IP-VRF SHOULD
      consider it reachable by every PE that has advertised an IP A-D per ES
      and IP A-D per EVI route for that ESI and IP-VRF.<a href="#section-3-4" class="pilcrow">¶</a></p>
<div id="sect-3.1">
<section id="section-3.1">
        <h3 id="name-constructing-the-ip-a-d-per">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-constructing-the-ip-a-d-per" class="section-name selfRef">Constructing the IP A-D per EVI Route</a>
        </h3>
<p id="section-3.1-1">The construction of the IP A-D per EVI route is the same as that of
        the Ethernet A-D per EVI route, as described in <span>[<a href="#RFC7432" class="xref">RFC7432</a>]</span>, with the following exceptions:<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.1-2.1">The Route-Distinguisher is for the corresponding IP-VRF.<a href="#section-3.1-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-3.1-2.2">The Ethernet Tag should be set to 0.<a href="#section-3.1-2.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-3.1-2.3">The route SHOULD carry the Route Target of the corresponding
            IP-VRF.<a href="#section-3.1-2.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-3.1-2.4">The route MUST carry the MPLS label, VNI (VXLAN Network
            Identifier <span>[<a href="#RFC8365" class="xref">RFC8365</a>]</span>) or Segment Routing IPv6 SID
            (Segment Identifier <span>[<a href="#I-D.ietf-bess-srv6-services" class="xref">I-D.ietf-bess-srv6-services</a>]</span>)
            that identifies the corresponding IP-VRF.<a href="#section-3.1-2.4" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-3.1-2.5">The route MUST carry the PE's MAC Extended Community if
            the encapsulation used between the PEs for inter-subnet forwarding
            is an Ethernet NVO tunnel <span>[<a href="#RFC9136" class="xref">RFC9136</a>]</span>.<a href="#section-3.1-2.5" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-3.1-2.6">
            <p id="section-3.1-2.6.1">The route SHOULD carry the EVPN Layer 2 Extended Community
            <span>[<a href="#I-D.ietf-bess-rfc7432bis" class="xref">I-D.ietf-bess-rfc7432bis</a>]</span>. For all-active
            multihoming, all PEs attached to the specified ES will advertise
            P=1. For backup path, the Primary PE will advertise P=1 and the
            Backup PE will advertise P=0, B=1.<a href="#section-3.1-2.6.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.1-2.6.2.1">The Primary PE SHOULD be a PE with a routing adjacency to
                the attached CE.<a href="#section-3.1-2.6.2.1" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-3.1-2.6.2.2">The Primary PE MAY be determined by policy or MAY be
                elected by a DF Election as in <span>[<a href="#RFC8584" class="xref">RFC8584</a>]</span> as
                described in <a href="#sect-2" class="xref">Section 2</a>.<a href="#section-3.1-2.6.2.2" class="pilcrow">¶</a>
</li>
            </ul>
</li>
        </ul>
</section>
</div>
</section>
</div>
<div id="sect-4">
<section id="section-4">
      <h2 id="name-fast-convergence-for-routed">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-fast-convergence-for-routed" class="section-name selfRef">Fast Convergence for Routed Traffic</a>
      </h2>
<p id="section-4-1">Host or Prefix reachability is learned via the BGP-EVPN control plane
      over the MPLS/NVO network. EVPN IP routes for a given ES are advertised
      by one or more of the PEs attached to that ES. When one of these PEs
      fails, a remote PE needs to quickly invalidate the EVPN IP routes
      received from it.<a href="#section-4-1" class="pilcrow">¶</a></p>
<p id="section-4-2">To accomplish this, EVPN defined the fast convergence function
      specified in <span>[<a href="#RFC7432" class="xref">RFC7432</a>]</span>. This document extends fast
      convergence to inter-subnet forwarding by having each PE advertise a set
      of one or more IP A-D per ES routes for each locally attached Ethernet
      segment (refer to <a href="#sect-4.1" class="xref">Section 4.1</a> below for details on how
      these routes are constructed). A PE may need to advertise more than one
      IP A-D per ES route for a given ES because the ES may be in a
      multiplicity of IP-VRFs and the Route Targets for all of these IP-VRFs
      may not fit into a single route. Advertising a set of IP A-D per ES
      routes for the ES allows each route to contain a subset of the complete
      set of Route Targets. Each IP A-D per ES route is differentiated from
      the other routes in the set by a different Route Distinguisher (RD).<a href="#section-4-2" class="pilcrow">¶</a></p>
<p id="section-4-3">Upon failure in connectivity to the attached ES, the PE withdraws the
      corresponding set of IP A-D per ES routes. This triggers all PEs that
      receive the withdrawal to update their next-hop adjacencies for all IP
      addresses associated with the Ethernet Segment in question, across
      IP-VRFs. If no other PE has advertised an IP A-D per ES route for the
      same Ethernet Segment, then the PE that received the withdrawal simply
      invalidates the IP entries for that segment. Otherwise, the PE updates
      its next-hop adjacencies accordingly.<a href="#section-4-3" class="pilcrow">¶</a></p>
<p id="section-4-4">These routes should be processed with higher priority than EVPN IP
      route withdrawals upon failure. Similar priority processing is needed
      even on the intermediate Route Reflectors.<a href="#section-4-4" class="pilcrow">¶</a></p>
<div id="sect-4.1">
<section id="section-4.1">
        <h3 id="name-constructing-ip-a-d-per-eth">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-constructing-ip-a-d-per-eth" class="section-name selfRef">Constructing IP A-D per Ethernet Segment Route</a>
        </h3>
<p id="section-4.1-1">This section describes the procedures used to construct the IP A-D
        per ES route, which is used for fast convergence (as discussed in
        <a href="#sect-4" class="xref">Section 4</a>). The usage/construction of this route remains
        similar to that described in section 8.2.1. of <span>[<a href="#RFC7432" class="xref">RFC7432</a>]</span> with a few notable exceptions as explained in
        following sections.<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<div id="sect-4.1.1">
<section id="section-4.1.1">
          <h4 id="name-ip-a-d-per-es-route-targets">
<a href="#section-4.1.1" class="section-number selfRef">4.1.1. </a><a href="#name-ip-a-d-per-es-route-targets" class="section-name selfRef">IP A-D per ES Route Targets</a>
          </h4>
<p id="section-4.1.1-1">Each IP A-D per ES route MUST carry one or more Route Targets.
          The set of IP A-D per ES routes MUST carry the entire set of IP-VRF
          Route Targets for all the IP-VRFs defined on that ES.<a href="#section-4.1.1-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sect-4.2">
<section id="section-4.2">
        <h3 id="name-avoiding-convergence-issues">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-avoiding-convergence-issues" class="section-name selfRef">Avoiding convergence issues by synchronizing IP prefixes</a>
        </h3>
<p id="section-4.2-1">Consider a pair of multi-homing PEs, PE1 and PE2. Let there be a
        host H1 attached to them. Consider PE3 and a host H3 attached to
        it.<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<p id="section-4.2-2">If the host H1 is learned on both the PEs, the ECMP path list is
        formed on PE3 pointing to (PE1/PE2). Traffic from H3 to H1 is not
        impacted even if one of the PEs fails as the path list gets corrected
        upon receiving the withdrawal of the fast convergence route(s) (IP A-D
        per ES routes).<a href="#section-4.2-2" class="pilcrow">¶</a></p>
<p id="section-4.2-3">In a case where H1 is locally learned only on PE1 due to LAG
        hashing or a single routing protocol adjacency to PE1, at PE3, H1 has
        ECMP path list (PE1/PE2) using Aliasing as described in this document.
        Traffic from H3 can reach H1 via either PE1 or PE2.<a href="#section-4.2-3" class="pilcrow">¶</a></p>
<p id="section-4.2-4">PE2 should install local forwarding state for EVPN IP routes
        advertised by other PEs attached to the same ES (i.e., PE1) but not
        advertise them as local routes. When the traffic from H3 reaches PE2,
        PE2 will be able forward the traffic to H1 without any convergence
        delay (caused by triggering ARP/ND to H1 or to the next-hop to reach
        H1). The synchronization of the EVPN IP routes across all PEs of the
        same Ethernet Segment is important to solve convergence issues.<a href="#section-4.2-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-4.3">
<section id="section-4.3">
        <h3 id="name-handling-silent-host-mac-ip">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-handling-silent-host-mac-ip" class="section-name selfRef">Handling Silent Host MAC/IP route for IP Aliasing</a>
        </h3>
<p id="section-4.3-1">Consider the example of <a href="#Figure1" class="xref">Figure 1</a> for IP aliasing.
        If PE1 fails, PE3 will receive the withdrawal of the fast convergence
        route(s) and update the ECMP list for H1 to be just PE2. When the EVPN
        IP route for H1 is also withdrawn, neither PE2 nor PE3 will have a
        route to H1, and traffic from H3 to H1 is blackholed until PE2 learns
        H1 and advertises an EVPN IP route for it.<a href="#section-4.3-1" class="pilcrow">¶</a></p>
<p id="section-4.3-2">This blackholing can be much worse if the H1 behaves like a silent
        host. IP address of H1 will not be re-learned on PE2 till H1 ARP/ND
        messages or some traffic triggers ARP/ND for H1.<a href="#section-4.3-2" class="pilcrow">¶</a></p>
<p id="section-4.3-3">PE2 can detect the failure of PE1's reachability in different
        ways:<a href="#section-4.3-3" class="pilcrow">¶</a></p>
<ol start="1" type="a" class="normal type-a" id="section-4.3-4">
<li id="section-4.3-4.1">When PE1 fails, the next hop tracking to PE1 in the underlay
            routing protocols can help detect the failure.<a href="#section-4.3-4.1" class="pilcrow">¶</a>
</li>
          <li id="section-4.3-4.2">Upon the failure of its link to CE1, PE1 will withdraw its IP
            A-D route(s) and PE2 can use this as a trigger to detect
            failure.<a href="#section-4.3-4.2" class="pilcrow">¶</a>
</li>
        </ol>
<p id="section-4.3-5">Thus to avoid blackholing, when PE2 detects loss of
        reachability to PE1, it should trigger ARP/ND requests for all remote
        IP prefixes received from PE1 across all affected IP-VRFs. This will
        force host H1 to reply to the solicited ARP/ND messages from PE2 and
        refresh both MAC and IP for the corresponding host in its tables.<a href="#section-4.3-5" class="pilcrow">¶</a></p>
<p id="section-4.3-6">Even in core failure scenario on PE1, PE1 must withdraw all its
        local layer-2 connectivity, as Layer-2 traffic should not be received
        by PE1. So when ARP/ND is triggered from PE2 the replies from host H1
        can only be received by PE2. Thus H1 will be learned as local route
        and also advertised from PE2.<a href="#section-4.3-6" class="pilcrow">¶</a></p>
<p id="section-4.3-7">It is recommended to have a staggered or delayed deletion of the
        EVPN IP routes from PE1, so that ARP/ND refresh can happen on PE2
        before the deletion.<a href="#section-4.3-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-4.4">
<section id="section-4.4">
        <h3 id="name-mac-aging">
<a href="#section-4.4" class="section-number selfRef">4.4. </a><a href="#name-mac-aging" class="section-name selfRef">MAC Aging</a>
        </h3>
<p id="section-4.4-1">In the same example as in <a href="#sect-4.3" class="xref">Section 4.3</a>, PE1 would do
        ARP/ND refresh for H1 before it ages out. During this process, H1 can
        age out genuinely or due to the ARP/ND reply landing on PE2. PE1 must
        withdraw the local entry from BGP when H1 entry ages out. PE1 deletes
        the entry from the local forwarding only when there are no remote
        synced entries.<a href="#section-4.4-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sect-5">
<section id="section-5">
      <h2 id="name-determining-reachability-to">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-determining-reachability-to" class="section-name selfRef">Determining Reachability to Unicast IP Addresses</a>
      </h2>
<section id="section-5.1">
        <h3 id="name-local-learning">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-local-learning" class="section-name selfRef">Local Learning</a>
        </h3>
<p id="section-5.1-1">The procedures for local learning do not change from <span>[<a href="#RFC7432" class="xref">RFC7432</a>]</span> or <span>[<a href="#RFC9136" class="xref">RFC9136</a>]</span>.<a href="#section-5.1-1" class="pilcrow">¶</a></p>
</section>
<div id="sect-5.2">
<section id="section-5.2">
        <h3 id="name-remote-learning">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-remote-learning" class="section-name selfRef">Remote Learning</a>
        </h3>
<p id="section-5.2-1">The procedures for remote learning do not change from <span>[<a href="#RFC7432" class="xref">RFC7432</a>]</span> or <span>[<a href="#RFC9136" class="xref">RFC9136</a>]</span>.<a href="#section-5.2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-5.3">
<section id="section-5.3">
        <h3 id="name-constructing-the-evpn-ip-ro">
<a href="#section-5.3" class="section-number selfRef">5.3. </a><a href="#name-constructing-the-evpn-ip-ro" class="section-name selfRef">Constructing the EVPN IP Routes</a>
        </h3>
<p id="section-5.3-1">The procedures for constructing MAC/IP Address or IP Prefix
        Advertisements do not change from <span>[<a href="#RFC7432" class="xref">RFC7432</a>]</span> or <span>[<a href="#RFC9136" class="xref">RFC9136</a>]</span>.<a href="#section-5.3-1" class="pilcrow">¶</a></p>
<div id="sect-5.3.1">
<section id="section-5.3.1">
          <h4 id="name-route-resolution">
<a href="#section-5.3.1" class="section-number selfRef">5.3.1. </a><a href="#name-route-resolution" class="section-name selfRef">Route Resolution</a>
          </h4>
<p id="section-5.3.1-1">If the ESI field is set to reserved values of 0 or MAX-ESI, the
          EVPN IP route resolution MUST be based on the EVPN IP route
          alone.<a href="#section-5.3.1-1" class="pilcrow">¶</a></p>
<p id="section-5.3.1-2">If the ESI field is set to a non-reserved ESI, the EVPN IP route
          resolution MUST happen only when both the EVPN IP route and the
          associated set of IP A-D per ES routes have been received. To
          illustrate this with an example, consider a pair of multi-homed PEs,
          PE1 and PE2, connected to an all-active Ethernet Segment. A given
          host with IP address H1 is learned by PE1 but not by PE2. When the
          EVPN IP route from PE1 and a set of IP A-D per ES and IP A-D per EVI
          routes from PE1 and PE2 are received, then (1) PE3 can forward
          traffic destined to H1 to both PE1 and PE2.<a href="#section-5.3.1-2" class="pilcrow">¶</a></p>
<p id="section-5.3.1-3">If after (1) PE1 withdraws the IP A-D per ES route, then PE3 will
          forward the traffic to PE2 only.<a href="#section-5.3.1-3" class="pilcrow">¶</a></p>
<p id="section-5.3.1-4">If after (1) PE2 withdraws the IP A-D per ES route, then PE3 will
          forward the traffic to PE1 only.<a href="#section-5.3.1-4" class="pilcrow">¶</a></p>
<p id="section-5.3.1-5">If after (1) PE1 withdraws the EVPN IP route, then PE3 will do
          delayed deletion of H1, as described in <a href="#sect-4.3" class="xref">Section 4.3</a>.<a href="#section-5.3.1-5" class="pilcrow">¶</a></p>
<p id="section-5.3.1-6">If after (1) PE2 advertised the EVPN IP route, but PE1 withdraws
          it, PE3 will continue forwarding to both PE1 and PE2 as long as it
          has the IP A-D per ES and the IP A-D per EVI route from both.<a href="#section-5.3.1-6" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="sect-6">
<section id="section-6">
      <h2 id="name-forwarding-unicast-packets">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-forwarding-unicast-packets" class="section-name selfRef">Forwarding Unicast Packets</a>
      </h2>
<p id="section-6-1">Refer to Section 5 in <span>[<a href="#RFC9135" class="xref">RFC9135</a>]</span> and <span>[<a href="#RFC9136" class="xref">RFC9136</a>]</span>.<a href="#section-6-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-7">
<section id="section-7">
      <h2 id="name-load-balancing-of-unicast-p">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-load-balancing-of-unicast-p" class="section-name selfRef">Load Balancing of Unicast Packets</a>
      </h2>
<p id="section-7-1">The procedures for load balancing of Unicast Packets do not change
      from <span>[<a href="#RFC7432" class="xref">RFC7432</a>]</span><a href="#section-7-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-8">
<section id="section-8">
      <h2 id="name-ip-aliasing-and-unequal-ecm">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-ip-aliasing-and-unequal-ecm" class="section-name selfRef">IP Aliasing and Unequal ECMP for IP Prefix Routes</a>
      </h2>
<p id="section-8-1"><span>[<a href="#I-D.ietf-bess-evpn-unequal-lb" class="xref">I-D.ietf-bess-evpn-unequal-lb</a>]</span> specifies the use of
      the EVPN Link bandwidth extended community to achieve weighted load
      balancing to an ES or Virtual ES for unicast traffic. The procedures in
      <span>[<a href="#I-D.ietf-bess-evpn-unequal-lb" class="xref">I-D.ietf-bess-evpn-unequal-lb</a>]</span> MAY be used along with
      the procedures described in this document for any of the three cases
      described in <a href="#sect-1" class="xref">Section 1</a>, with the following
      considerations:<a href="#section-8-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-8-2.1">The ES weight is signaled by the multi-homed PEs in the IP A-D
          per ES routes.<a href="#section-8-2.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-8-2.2">The remote ingress PE learning an EVPN IP Route to prefix/host P
          that is associated to a weighted load balancing ES, will follow the
          procedures in <span>[<a href="#I-D.ietf-bess-evpn-unequal-lb" class="xref">I-D.ietf-bess-evpn-unequal-lb</a>]</span> to
          influence the load balancing for traffic to P.<a href="#section-8-2.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-8-2.3">
          <p id="section-8-2.3.1"><span>[<a href="#I-D.ietf-bess-evpn-unequal-lb" class="xref">I-D.ietf-bess-evpn-unequal-lb</a>]</span> also allows the
          use of the EVPN Link Bandwidth Extended Community along with RT-5s.
          If the ingress PE learns a prefix P via a non-reserved ESI RT-5
          route with a weight (for which IP A-D per ES routes also signal a
          weight) and a zero ESI RT-5 that includes a weight, the ingress PE
          will consider all the PEs attached to the ES as a single PE when
          normalizing weights.<a href="#section-8-2.3.1" class="pilcrow">¶</a></p>
<p id="section-8-2.3.2">As an example, consider
          PE1 and PE2 are attached to ES-1 and PE1 advertises an RT-5 for
          prefix P with ESI-1 (and EVPN Link Bandwidth of 1). Consider PE3
          advertises an RT-5 for P with ESI=0 and EVPN Link Bandwidth of 2. If
          PE1 and PE2 advertise an EVPN Link Bandwidth of 1 and 2,
          respectively, in the IP A-D per ES routes for ES-1, an ingress PE4
          SHOULD assign a normalized weight of 1 to ES-1 and a normalized
          weight of 2 to PE3. When PE4 sprays the flows to P, it will send
          twice as many flows to PE3. For the flows sent to ES-1, the
          individual PE EVPN Link Bandwidths advertised in the IP A-D per ES
          routes will be considered.<a href="#section-8-2.3.2" class="pilcrow">¶</a></p>
</li>
      </ul>
</section>
</div>
<div id="sect-9">
<section id="section-9">
      <h2 id="name-security-considerations-6">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-security-considerations-6" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-9-1">The mechanisms in this document use EVPN control plane as defined in
      <span>[<a href="#RFC7432" class="xref">RFC7432</a>]</span>. Security considerations described in <span>[<a href="#RFC7432" class="xref">RFC7432</a>]</span> are equally applicable. This document uses MPLS and
      IP-based tunnel technologies to support data plane transport. Security
      considerations described in <span>[<a href="#RFC7432" class="xref">RFC7432</a>]</span> and in <span>[<a href="#RFC8365" class="xref">RFC8365</a>]</span> are equally applicable.<a href="#section-9-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sect-10">
<section id="section-10">
      <h2 id="name-iana-considerations-6">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-iana-considerations-6" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-10-1">No IANA considerations.<a href="#section-10-1" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-11">
      <h2 id="name-contributors-3">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-contributors-3" class="section-name selfRef">Contributors</a>
      </h2>
<p id="section-11-1"></p>
</section>
<section id="section-12">
      <h2 id="name-acknowledgments-4">
<a href="#section-12" class="section-number selfRef">12. </a><a href="#name-acknowledgments-4" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="section-12-1"></p>
</section>
<section id="section-13">
      <h2 id="name-references-6">
<a href="#section-13" class="section-number selfRef">13. </a><a href="#name-references-6" class="section-name selfRef">References</a>
      </h2>
<section id="section-13.1">
        <h3 id="name-normative-references-6">
<a href="#section-13.1" class="section-number selfRef">13.1. </a><a href="#name-normative-references-6" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC7432">[RFC7432]</dt>
        <dd>
<span class="refAuthor">Sajassi, A., Ed.</span>, <span class="refAuthor">Aggarwal, R.</span>, <span class="refAuthor">Bitar, N.</span>, <span class="refAuthor">Isaac, A.</span>, <span class="refAuthor">Uttaro, J.</span>, <span class="refAuthor">Drake, J.</span>, and <span class="refAuthor">W. Henderickx</span>, <span class="refTitle">"BGP MPLS-Based Ethernet VPN"</span>, <span class="seriesInfo">RFC 7432</span>, <span class="seriesInfo">DOI 10.17487/RFC7432</span>, <time datetime="2015-02" class="refDate">February 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7432">https://www.rfc-editor.org/info/rfc7432</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8365">[RFC8365]</dt>
        <dd>
<span class="refAuthor">Sajassi, A., Ed.</span>, <span class="refAuthor">Drake, J., Ed.</span>, <span class="refAuthor">Bitar, N.</span>, <span class="refAuthor">Shekhar, R.</span>, <span class="refAuthor">Uttaro, J.</span>, and <span class="refAuthor">W. Henderickx</span>, <span class="refTitle">"A Network Virtualization Overlay Solution Using Ethernet VPN (EVPN)"</span>, <span class="seriesInfo">RFC 8365</span>, <span class="seriesInfo">DOI 10.17487/RFC8365</span>, <time datetime="2018-03" class="refDate">March 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8365">https://www.rfc-editor.org/info/rfc8365</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8584">[RFC8584]</dt>
        <dd>
<span class="refAuthor">Rabadan, J., Ed.</span>, <span class="refAuthor">Mohanty, S., Ed.</span>, <span class="refAuthor">Sajassi, A.</span>, <span class="refAuthor">Drake, J.</span>, <span class="refAuthor">Nagaraj, K.</span>, and <span class="refAuthor">S. Sathappan</span>, <span class="refTitle">"Framework for Ethernet VPN Designated Forwarder Election Extensibility"</span>, <span class="seriesInfo">RFC 8584</span>, <span class="seriesInfo">DOI 10.17487/RFC8584</span>, <time datetime="2019-04" class="refDate">April 2019</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8584">https://www.rfc-editor.org/info/rfc8584</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9135">[RFC9135]</dt>
        <dd>
<span class="refAuthor">Sajassi, A.</span>, <span class="refAuthor">Salam, S.</span>, <span class="refAuthor">Thoria, S.</span>, <span class="refAuthor">Drake, J.</span>, and <span class="refAuthor">J. Rabadan</span>, <span class="refTitle">"Integrated Routing and Bridging in Ethernet VPN (EVPN)"</span>, <span class="seriesInfo">RFC 9135</span>, <span class="seriesInfo">DOI 10.17487/RFC9135</span>, <time datetime="2021-10" class="refDate">October 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9135">https://www.rfc-editor.org/info/rfc9135</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9136">[RFC9136]</dt>
        <dd>
<span class="refAuthor">Rabadan, J., Ed.</span>, <span class="refAuthor">Henderickx, W.</span>, <span class="refAuthor">Drake, J.</span>, <span class="refAuthor">Lin, W.</span>, and <span class="refAuthor">A. Sajassi</span>, <span class="refTitle">"IP Prefix Advertisement in Ethernet VPN (EVPN)"</span>, <span class="seriesInfo">RFC 9136</span>, <span class="seriesInfo">DOI 10.17487/RFC9136</span>, <time datetime="2021-10" class="refDate">October 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9136">https://www.rfc-editor.org/info/rfc9136</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-bess-rfc7432bis">[I-D.ietf-bess-rfc7432bis]</dt>
      <dd>
<span class="refAuthor">Sajassi, A.</span>, <span class="refAuthor">Burdet, L. A.</span>, <span class="refAuthor">Drake, J.</span>, and <span class="refAuthor">J. Rabadan</span>, <span class="refTitle">"BGP MPLS-Based Ethernet VPN"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-bess-rfc7432bis-03</span>, <time datetime="2022-02-28" class="refDate">28 February 2022</time>, <span>&lt;<a href="https://www.ietf.org/archive/id/draft-ietf-bess-rfc7432bis-03.txt">https://www.ietf.org/archive/id/draft-ietf-bess-rfc7432bis-03.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-13.2">
        <h3 id="name-informative-references-6">
<a href="#section-13.2" class="section-number selfRef">13.2. </a><a href="#name-informative-references-6" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="I-D.ietf-bess-evpn-virtual-eth-segment">[I-D.ietf-bess-evpn-virtual-eth-segment]</dt>
        <dd>
<span class="refAuthor">Sajassi, A.</span>, <span class="refAuthor">Brissette, P.</span>, <span class="refAuthor">Schell, R.</span>, <span class="refAuthor">Drake, J. E.</span>, and <span class="refAuthor">J. Rabadan</span>, <span class="refTitle">"EVPN Virtual Ethernet Segment"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-bess-evpn-virtual-eth-segment-07</span>, <time datetime="2021-07-06" class="refDate">6 July 2021</time>, <span>&lt;<a href="https://www.ietf.org/archive/id/draft-ietf-bess-evpn-virtual-eth-segment-07.txt">https://www.ietf.org/archive/id/draft-ietf-bess-evpn-virtual-eth-segment-07.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-bess-evpn-unequal-lb">[I-D.ietf-bess-evpn-unequal-lb]</dt>
        <dd>
<span class="refAuthor">Malhotra, N.</span>, <span class="refAuthor">Sajassi, A.</span>, <span class="refAuthor">Rabadan, J.</span>, <span class="refAuthor">Drake, J.</span>, <span class="refAuthor">Lingala, A.</span>, and <span class="refAuthor">S. Thoria</span>, <span class="refTitle">"Weighted Multi-Path Procedures for EVPN Multi-Homing"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-bess-evpn-unequal-lb-15</span>, <time datetime="2021-11-17" class="refDate">17 November 2021</time>, <span>&lt;<a href="https://www.ietf.org/archive/id/draft-ietf-bess-evpn-unequal-lb-15.txt">https://www.ietf.org/archive/id/draft-ietf-bess-evpn-unequal-lb-15.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-bess-srv6-services">[I-D.ietf-bess-srv6-services]</dt>
      <dd>
<span class="refAuthor">Dawra, G.</span>, <span class="refAuthor">Filsfils, C.</span>, <span class="refAuthor">Talaulikar, K.</span>, <span class="refAuthor">Raszuk, R.</span>, <span class="refAuthor">Decraene, B.</span>, <span class="refAuthor">Zhuang, S.</span>, and <span class="refAuthor">J. Rabadan</span>, <span class="refTitle">"SRv6 BGP based Overlay Services"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-bess-srv6-services-12</span>, <time datetime="2022-03-05" class="refDate">5 March 2022</time>, <span>&lt;<a href="https://www.ietf.org/archive/id/draft-ietf-bess-srv6-services-12.txt">https://www.ietf.org/archive/id/draft-ietf-bess-srv6-services-12.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="authors-addresses">
<section id="appendix-A">
      <h2 id="name-authors-addresses-6">
<a href="#name-authors-addresses-6" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">A. Sajassi (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">Cisco Systems</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:sajassi@cisco.com" class="email">sajassi@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">G. Badoni</span></div>
<div dir="auto" class="left"><span class="org">Cisco Systems</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:gbadoni@cisco.com" class="email">gbadoni@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">P. Warade</span></div>
<div dir="auto" class="left"><span class="org">Cisco Systems</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:pwarade@cisco.com" class="email">pwarade@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">S. Pasupula</span></div>
<div dir="auto" class="left"><span class="org">Cisco Systems</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:surpasup@cisco.com" class="email">surpasup@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">L. Krattiger</span></div>
<div dir="auto" class="left"><span class="org">Cisco Systems</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:lkrattig@cisco.com" class="email">lkrattig@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">J. Drake (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">Juniper</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:jdrake@juniper.net" class="email">jdrake@juniper.net</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">J. Rabadan (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">Nokia</span></div>
<div dir="auto" class="left"><span class="street-address">520 Almanor Avenue</span></div>
<div dir="auto" class="left">
<span class="locality">Sunnyvale</span>, <span class="region">CA</span> <span class="postal-code">94085</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:jorge.rabadan@nokia.com" class="email">jorge.rabadan@nokia.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
