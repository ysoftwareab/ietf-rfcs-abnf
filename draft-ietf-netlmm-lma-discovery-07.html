<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>LMA Discovery for Proxy Mobile IPv6</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="LMA Discovery for Proxy Mobile IPv6">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network-based Localized Mobility</td><td class="header">J. Korhonen</td></tr>
<tr><td class="header">Management (NetLMM)</td><td class="header">Nokia Siemens Networks</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">V. Devarapalli</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">Vasona Networks</td></tr>
<tr><td class="header">Expires: April 15, 2011</td><td class="header">October 12, 2010</td></tr>
</table></td></tr></table>
<h1><br />LMA Discovery for Proxy Mobile IPv6<br />draft-ietf-netlmm-lma-discovery-07.txt</h1>

<h3>Abstract</h3>

<p>Large Proxy Mobile IPv6 deployments would benefit from a
           functionality, where a Mobile Access Gateway could
           dynamically discover a Local Mobility Anchor for a Mobile
           Node attaching to a Proxy Mobile IPv6 domain. The purpose
           of the dynamic discovery functionality is to reduce the
           amount of static configuration in the Mobile Access
           Gateway. This document describes several possible
           dynamic Local Mobility Anchor discovery solutions.
        
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on April 15, 2011.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#aaasol">2.</a>&nbsp;
AAA-based Discovery Solutions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#aaalma">2.1.</a>&nbsp;
Receiving LMA Address during the Network
           Access Authentication<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#dnsaaalma">2.2.</a>&nbsp;
Receiving LMA FQDN during the Network
           Access Authentication<br />
<a href="#lowsol">3.</a>&nbsp;
Discovery Solutions based on Data from Lower Layers<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#lowid">3.1.</a>&nbsp;
Constructing the LMA FQDN from a Mobile Node Identity<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">3.2.</a>&nbsp;
Receiving LMA FQDN or IP Address from Lower Layers <br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">3.3.</a>&nbsp;
Constructing the LMA FQDN from a Service Name<br />
<a href="#hocon">4.</a>&nbsp;
Handover Considerations<br />
<a href="#anchor4">5.</a>&nbsp;
Recommendations<br />
<a href="#anchor5">6.</a>&nbsp;
Security Considerations<br />
<a href="#anchor6">7.</a>&nbsp;
IANA Considerations<br />
<a href="#anchor7">8.</a>&nbsp;
Acknowledgements<br />
<a href="#rfc.references1">9.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">9.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">9.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>A Proxy Mobile IPv6 (PMIPv6) <a class='info' href='#RFC5213'>[RFC5213]<span> (</span><span class='info'>Gundavelli, S., Leung, K., Devarapalli, V., Chowdhury, K., and B. Patil, &ldquo;Proxy Mobile IPv6,&rdquo; August&nbsp;2008.</span><span>)</span></a>
            deployment would benefit from a functionality, where a
            Mobile Access Gateway (MAG) can dynamically discover a
            Local Mobility Anchor (LMA) for a Mobile Node (MN)
            attaching to a PMIPv6 domain. The purpose of
            the dynamic discovery functionality is to reduce the
            amount of static configuration in the MAG. Other drivers for the
            dynamic discovery of a LMA include LMA load balancing solutions and
            selecting a LMA based on desired services (i.e. allowing service-specific routing of traffic) <a class='info' href='#RFC5149'>[RFC5149]<span> (</span><span class='info'>Korhonen, J., Nilsson, U., and V. Devarapalli, &ldquo;Service Selection for Mobile IPv6,&rdquo; February&nbsp;2008.</span><span>)</span></a>. This
            document describes several possible dynamic LMA
            discovery approaches and makes a recommendation of the preferred one.
         
</p>
<p>The following list briefly
            introduces solution approaches that will be discussed in this
            document: 
            <br />
<br />


         </p>
<blockquote class="text"><dl>
<dt>o</dt>
<dd>LMA Address is retrieved from the Authentication,
              Authorization and Accounting (AAA) infrastructure during the network access authentication procedure when the MN attaches to the MAG.
              <br />

</dd>
<dt>o</dt>
<dd>LMA Fully Qualified Domain Name (FQDN) is retrieved 
              from the AAA infrastructure during the network access
              authentication, followed by a Domain Name System (DNS) 
              lookup.
              <br />

</dd>
<dt>o</dt>
<dd>LMA FQDN is derived from the MN
              identity received from the lower layers during the
              network attachment, followed by a DNS lookup.
              <br />

           
</dd>
<dt>o</dt>
<dd>LMA FQDN or IP address is received from the lower
              layers during the network attachment. The reception of an FQDN
              from the lower layers is followed by a DNS lookup.
              <br />

           
</dd>
<dt>o</dt>
<dd>LMA FQDN is derived from the service selection
              indication received from lower layers during the network 
              attachment, followed by a DNS lookup.
           
</dd>
</dl></blockquote><p>
         
</p>
<p>When a MN performs a handover from one MAG to
            another, the new MAG must use the same LMA that the old
            MAG was using. This is required for session
            continuity. The LMA discovery mechanism in the new
            MAG should be able to return the information of the
            same LMA that was being used by the old MAG. This document
            also discusses solutions for LMA discovery during a
            handover.
         
</p>
<a name="aaasol"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
AAA-based Discovery Solutions</h3>

<p>This section presents a LMA discovery solution that
            requires a MAG to be connected to an AAA
            infrastructure for instance as described in <a class='info' href='#RFC5779'>[RFC5779]<span> (</span><span class='info'>Korhonen, J., Bournelle, J., Chowdhury, K., Muhanna, A., and U. Meyer, &ldquo;Diameter Proxy Mobile IPv6: Mobile Access Gateway and Local Mobility Anchor Interaction with Diameter Server,&rdquo; February&nbsp;2010.</span><span>)</span></a>. The AAA infrastructure is also assumed to be aware of PMIPv6. A MN
            attaching to a PMIPv6 domain is typically required to provide
            authentication for network access and to be authorized for
            mobility services before the MN is allowed to 
            send or receive any IP packets or even complete its IP level
            configuration.  
         
</p>
<p>The AAA-based LMA discovery solution hooks into the
            network access authentication and authorization
            process. The MAG has also the role of a Network Access
            Server (NAS) at this step.  While the MN is
            attaching to the network, the PMIPv6 related parameters
            are bootstrapped in parallel with authentication for the network
            access and authorization for the mobility services. The
            PMIPv6 parameters bootstrapping involves the 
            Policy Profile download over the AAA infrastructure to the
            MAG (see Appendix A of <a class='info' href='#RFC5213'>[RFC5213]<span> (</span><span class='info'>Gundavelli, S., Leung, K., Devarapalli, V., Chowdhury, K., and B. Patil, &ldquo;Proxy Mobile IPv6,&rdquo; August&nbsp;2008.</span><span>)</span></a>).
         
</p>
<a name="aaalma"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Receiving LMA Address during the Network
           Access Authentication</h3>

<p>After the MN has successfully authenticated for the
              network access and authorized for the mobility 
              service, the MAG receives the LMA IP address from
              the AAA server over the AAA infrastructure. The LMA IP
              address information would be part of the AAA message
              that ends the successful authentication and
              authorization AAA exchange.
           
</p>
<p>Once the MAG receives the LMA IP address, it sends
              Proxy Binding Update (PBU) message for the newly
              authenticated and authorized MN. The MAG expects
              that the LMA returned by the AAA server is able to
              provide mobility session continuity for the MN,
              i.e. after a handover the LMA would be the same one the
              MN already has a mobility session set up with.
           
</p>
<a name="dnsaaalma"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
Receiving LMA FQDN during the Network
           Access Authentication</h3>

<p>This solution is similar to the procedure described in
              <a class='info' href='#aaalma'>Section&nbsp;2.1<span> (</span><span class='info'>Receiving LMA Address during the Network            Access Authentication</span><span>)</span></a>. The difference is that the MAG
              receives an FQDN of the LMA
              instead of the IP address(es). The MAG has to query the
              DNS infrastructure in order to resolve the FQDN to the
              LMA IP address(es).
           
</p>
<p>The LMA FQDN might be a generic name for a PMIPv6 domain
              that resolves to one or more LMAs in the PMIPv6 domain.
              Alternatively the LMA FQDN might be resolved to
              exactly one LMA within the PMIPv6 domain. The latter
              approach would obviously be useful if a new target MAG
              after a handover should resolve the LMA FQDN to the LMA
              IP address where the MN mobility session is already
              located.
           
</p>
<p>The procedures described in this section and in <a class='info' href='#aaalma'>Section&nbsp;2.1<span> (</span><span class='info'>Receiving LMA Address during the Network            Access Authentication</span><span>)</span></a> may also be used together. For
              example, the AAA server might return a generic LMA FQDN
              during the MN initial attach and once the LMA
              gets selected, return the LMA IP address during the
              subsequent attachments to other MAGs in the PMIPv6 domain.
              In order for this to work, the resolved and selected LMA IP address
              must be updated to the remote Policy Store. For example, the LMA
              could perform the Policy Store update using the AAA infrastructure
              once it receives the initial PBU from the MAG for the new mobility
              session.
           
</p>
<a name="lowsol"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Discovery Solutions based on Data from Lower Layers</h3>

<p>The following section discusses solutions, where a MAG
            acquires information from layers below the IP layer.
            Based on this information, the MAG is able to determine which LMA
            to contact when the MN attaches to the MAG.
            The lower layers discussed here are not explicitly defined but
            include different radio access technologies and
            tunneling solutions such as IKEv2 <a class='info' href='#RFC5996'>[RFC5996]<span> (</span><span class='info'>Kaufman, C., Hoffman, P., Nir, Y., and P. Eronen, &ldquo;Internet Key Exchange Protocol Version 2 (IKEv2),&rdquo; September&nbsp;2010.</span><span>)</span></a>
            IPsec tunnel <a class='info' href='#RFC4303'>[RFC4303]<span> (</span><span class='info'>Kent, S., &ldquo;IP Encapsulating Security Payload (ESP),&rdquo; December&nbsp;2005.</span><span>)</span></a>.
         
</p>
<a name="lowid"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Constructing the LMA FQDN from a Mobile Node Identity</h3>

<p>A MAG acquires a MN identity from lower layers. The
              MAG can use the information embedded in the identity to
              construct a generic LMA FQDN (based on some
              pre-configured formatting rules) and then proceed to
              resolve the LMA IP address(es) using the DNS. Obviously,
              the MN identity must embed information
              that can be used to uniquely identify
              the entity hosting and operating the LMA for the MN.
              Examples of such MN identities are the
              International Mobile Subscriber Identity (IMSI) and
              Globally Unique Temporary User Equipment Identity (GUTI) <a class='info' href='#3GPP.23.003'>[3GPP.23.003]<span> (</span><span class='info'>3GPP, &ldquo;Numbering, addressing and identification,&rdquo; September&nbsp;2008.</span><span>)</span></a>. These MN identities contain
              information that can uniquely identify the operator where the
              subscription belongs to.
           
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Receiving LMA FQDN or IP Address from Lower Layers </h3>

<p>The solution described here is similar to the solution
              discussed in <a class='info' href='#lowid'>Section&nbsp;3.1<span> (</span><span class='info'>Constructing the LMA FQDN from a Mobile Node Identity</span><span>)</span></a>.
              A MAG receives a LMA FQDN or an
              IP address from lower layers, for example, as a part
              of the normal lower layer signaling when the MN attaches to the
              network. IKEv2 could be existing example of such lower layer signaling
              where IPsec is the "lower layer" for the MN <a class='info' href='#3GPP.24.302'>[3GPP.24.302]<span> (</span><span class='info'>3GPP, &ldquo;Access to the 3GPP Evolved Packet Core (EPC) via non-3GPP access networks,&rdquo; June&nbsp;2010.</span><span>)</span></a>.
              IKEv2 has an
              IKEv2 IDr payload, which is used by the IKEv2 initiator (i.e. the
              MN in this case) to specify which of the responder's identities (i.e.
              the LMA in this case) it wants to talk to. And here the responder
              identity could be an FQDN or an IP address of the LMA (as the
              IKEv2 identification payload can be an IP address or an FQDN).
              Another existing example is the Access Point Name Information
              Element (APN IE) in 3GPP radio's network access signaling 
              capable of carrying a FQDN <a class='info' href='#3GPP.24.008'>[3GPP.24.008]<span> (</span><span class='info'>3GPP, &ldquo;Mobile radio interface Layer 3 specification,&rdquo; June&nbsp;2009.</span><span>)</span></a>. 
              However, in general this means the MN is also the originator of the
              LMA information. The LMA information content as such can
              be transparent to the MN, meaning the MN does not associate the
              information with any LMA function.
           
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
Constructing the LMA FQDN from a Service Name</h3>

<p>
              Some network access technologies (including tunneling
              solutions) allow the MN to signal the service
              name that identifies a particular service or the
              external network it wants to access <a class='info' href='#3GPP.24.302'>[3GPP.24.302]<span> (</span><span class='info'>3GPP, &ldquo;Access to the 3GPP Evolved Packet Core (EPC) via non-3GPP access networks,&rdquo; June&nbsp;2010.</span><span>)</span></a>
              <a class='info' href='#RFC5996'>[RFC5996]<span> (</span><span class='info'>Kaufman, C., Hoffman, P., Nir, Y., and P. Eronen, &ldquo;Internet Key Exchange Protocol Version 2 (IKEv2),&rdquo; September&nbsp;2010.</span><span>)</span></a>. If the MN originated service name
              also embeds the information
              of the entity hosting the service or the hosting information can
              be derived from other information available at the same time
              (e.g., see <a class='info' href='#lowid'>Section&nbsp;3.1<span> (</span><span class='info'>Constructing the LMA FQDN from a Mobile Node Identity</span><span>)</span></a>), then the MAG can construct a
              generic LMA FQDN (e.g., based on some pre-defined formatting rules)
              providing an access to the service or the external
              network. The pre-defined formatting rules <a class='info' href='#3GPP.23.003'>[3GPP.23.003]<span> (</span><span class='info'>3GPP, &ldquo;Numbering, addressing and identification,&rdquo; September&nbsp;2008.</span><span>)</span></a>
              are usually agreed on
              among operators that belong to the same inter-operator roaming
              consortium or by network infrastructure vendors defining an open
              networking system architecture.
           
</p>
<p>Once the MAG has the FQDN it can proceed to
              resolve the LMA IP address(es) using the DNS. An example
              of such service or external network name is the Access
              Point Name (APN) <a class='info' href='#3GPP.23.003'>[3GPP.23.003]<span> (</span><span class='info'>3GPP, &ldquo;Numbering, addressing and identification,&rdquo; September&nbsp;2008.</span><span>)</span></a> that
              contain information of the operator providing the access
              to the given service or the external network. For example, an
              FQDN for an "ims" APN could be "ims.apn.epc.mnc015.mcc234.3gppnetwork.org".
           
</p>
<a name="hocon"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Handover Considerations</h3>

<p>
         Whenever a MN moves and attaches to a new MAG in a
         PMIPv6 domain, all the MAGs that the MN attaches to,
         should use the same LMA. If there is only one LMA per PMIPv6
         domain, then there is no issue. If there is a context
         transfer mechanism available between the MAGs, then the new
         MAG knows the LMA information from the old MAG. Such a
         mechanism is described in <a class='info' href='#RFC5949'>[RFC5949]<span> (</span><span class='info'>Yokota, H., Chowdhury, K., Koodli, R., Patil, B., and F. Xia, &ldquo;Fast Handovers for Proxy Mobile IPv6,&rdquo; September&nbsp;2010.</span><span>)</span></a>. If the MN
         related context is not transferred between the MAGs, then a
         mechanism to deliver the current LMA information to the new
         MAG is required.
         
</p>
<p>Relying on DNS during handovers
         is not generally a working solution if the PMIPv6 domain has more than
         one LMA, unless the DNS consistently assigns a specific LMA for
         each given MN. In most cases described in <a class='info' href='#lowsol'>Section&nbsp;3<span> (</span><span class='info'>Discovery Solutions based on Data from Lower Layers</span><span>)</span></a>,
         where the MAG derives the LMA FQDN,
         there is no prior knowledge whether the LMA FQDN resolves to
         one or more LMA IP address(es) in the PMIPv6 domain. However, 
         depending on the deployment and deployment related regulation 
         (such as inter-operator roaming consortium agreements) the situation
         might not be this desperate. For example, a MAG might be able to
         synthesize a LMA specific FQDN (e.g. out
         of MN identity or some other service specific parameters). 
         Alternatively, the MAG could use (for example), a MN identity as an input to an
         algorithm that deterministically assigns the same LMA out of a pool of
         LMAs (assuming the MAG has e.g. learned a group of LMA FQDNs via
         SRV <a class='info' href='#RFC2782'>[RFC2782]<span> (</span><span class='info'>Gulbrandsen, A., Vixie, P., and L. Esibov, &ldquo;A DNS RR for specifying the location of services (DNS SRV),&rdquo; February&nbsp;2000.</span><span>)</span></a> query). These approaches would
         guarantee that DNS returns always the same LMA Address to the MAG.
         
</p>
<p>
         Once the MN completes its initial attachment to a
         PMIPv6 domain, the information about the LMA that is selected
         to serve the MN is stored in the Policy Store (or
         the AAA server).  The LMA information is conveyed to the
         policy store by the LMA after the initial attachment is
         completed <a class='info' href='#RFC5779'>[RFC5779]<span> (</span><span class='info'>Korhonen, J., Bournelle, J., Chowdhury, K., Muhanna, A., and U. Meyer, &ldquo;Diameter Proxy Mobile IPv6: Mobile Access Gateway and Local Mobility Anchor Interaction with Diameter Server,&rdquo; February&nbsp;2010.</span><span>)</span></a>. Typically
         AAA infrastructure is used for exchanging information between the
         LMA and the Policy Store.
         
</p>
<p>
         When the MN moves and attaches to another MAG in the
         PMIPv6 domain, then the AAA servers delivers the existing LMA
         information to the new MAG as part of the authentication and
         authorization procedure as described in <a class='info' href='#aaalma'>Section&nbsp;2.1<span> (</span><span class='info'>Receiving LMA Address during the Network            Access Authentication</span><span>)</span></a>
         
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Recommendations</h3>

<p>This document discussed several solution approaches for a dynamic LMA
       discovery. All discussed solution approaches actually require additional
       functionality or infrastructure support that the base PMIPv6
        <a class='info' href='#RFC5213'>[RFC5213]<span> (</span><span class='info'>Gundavelli, S., Leung, K., Devarapalli, V., Chowdhury, K., and B. Patil, &ldquo;Proxy Mobile IPv6,&rdquo; August&nbsp;2008.</span><span>)</span></a> does not require.
       
</p>
<p>Solutions in <a class='info' href='#lowsol'>Section&nbsp;3<span> (</span><span class='info'>Discovery Solutions based on Data from Lower Layers</span><span>)</span></a> all depend on lower layers being
       able to provide information that a MAG can then use to query DNS and
       discover a suitable LMA.  The capabilities of the lower layers and
       the interactions with them are generally out of scope of IETF, and
       specific to a certain system and architecture.
       
</p>
<p>
       Solutions in  <a class='info' href='#aaasol'>Section&nbsp;2<span> (</span><span class='info'>AAA-based Discovery Solutions</span><span>)</span></a> depend on the existence of an AAA
       infrastructure, which is able to provide a MAG either a LMA IP
       address or a LMA FQDN.  While there can be system and architecture
       specific details regarding the AAA interactions and the use of DNS,
       the dynamic LMA discovery can be implemented in an access and
       technology agnostic manner, and work in the same way across
       heterogeneous environments. Therefore, using AAA based LMA
       discovery solutions are recommended by this document.
       
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Security Considerations</h3>

<p>
            The use of DNS for obtaining the IP address of a mobility
            agent carries certain security risks. These are explained
            in detail in Section 9.1 of <a class='info' href='#RFC5026'>[RFC5026]<span> (</span><span class='info'>Giaretta, G., Kempf, J., and V. Devarapalli, &ldquo;Mobile IPv6 Bootstrapping in Split Scenario,&rdquo; October&nbsp;2007.</span><span>)</span></a>. However,
            the risks described in <a class='info' href='#RFC5026'>[RFC5026]<span> (</span><span class='info'>Giaretta, G., Kempf, J., and V. Devarapalli, &ldquo;Mobile IPv6 Bootstrapping in Split Scenario,&rdquo; October&nbsp;2007.</span><span>)</span></a>
            are mitigated to a large extent in this document,
            since the MAG and the LMA belong to the same PMIPv6
            domain. The DNS server that the MAG queries is
            also part of the same PMIPv6 domain. Even if
            the MAG obtains the IP address of a bogus LMA from a bogus
            DNS server, further harm is prevented since the MAG and
            the LMA should authenticate each other before exchanging
            PMIPv6 signaling messages.  <a class='info' href='#RFC5213'>[RFC5213]<span> (</span><span class='info'>Gundavelli, S., Leung, K., Devarapalli, V., Chowdhury, K., and B. Patil, &ldquo;Proxy Mobile IPv6,&rdquo; August&nbsp;2008.</span><span>)</span></a> specifies the
            use of IKEv2 between the
            MAG and the LMA to authenticate each other and setup IPsec
            security associations for protecting the PMIPv6
            signaling messages.
         
</p>
<p>
            The AAA infrastructure may be used to transport the LMA
            discovery related information between the MAG and the AAA
            server via one or more AAA brokers and/or AAA proxies.
            In this case the MAG to the AAA server
            communication relies on the security properties of the
            intermediate AAA brokers and AAA proxies.
          
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
IANA Considerations</h3>

<p>This document has no actions for IANA.
           
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Acknowledgements</h3>

<p>The authors would like to thank Julien Laganier, Christian Vogt,
           Ryuji Wakikawa, Frank Xia, Behcet Sarikaya, Charlie Perkins, Qin
           Wu, Jari Arkko and Xiangsong Cui for their comments, extensive discussions and
           suggestions on this document.
        
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC5213">[RFC5213]</a></td>
<td class="author-text">Gundavelli, S., Leung, K., Devarapalli, V., Chowdhury, K., and B. Patil, &ldquo;<a href="http://tools.ietf.org/html/rfc5213">Proxy Mobile IPv6</a>,&rdquo; RFC&nbsp;5213, August&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5213.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="3GPP.23.003">[3GPP.23.003]</a></td>
<td class="author-text">3GPP, &ldquo;<a href="http://www.3gpp.org/ftp/Specs/html-info/23003.htm">Numbering, addressing and identification</a>,&rdquo; 3GPP TS&nbsp;23.003 8.2.0, September&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="3GPP.24.008">[3GPP.24.008]</a></td>
<td class="author-text">3GPP, &ldquo;<a href="http://www.3gpp.org/ftp/Specs/html-info/24008.htm">Mobile radio interface Layer 3 specification</a>,&rdquo; 3GPP TS&nbsp;24.008 8.6.0, June&nbsp;2009.</td></tr>
<tr><td class="author-text" valign="top"><a name="3GPP.24.302">[3GPP.24.302]</a></td>
<td class="author-text">3GPP, &ldquo;<a href="http://www.3gpp.org/ftp/Specs/html-info/24302.htm">Access to the 3GPP Evolved Packet Core (EPC) via non-3GPP access networks</a>,&rdquo; 3GPP TS&nbsp;24.302 10.0.0, June&nbsp;2010.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2782">[RFC2782]</a></td>
<td class="author-text"><a href="mailto:arnt@troll.no">Gulbrandsen, A.</a>, Vixie, P., and <a href="mailto:levone@microsoft.com">L. Esibov</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2782">A DNS RR for specifying the location of services (DNS SRV)</a>,&rdquo; RFC&nbsp;2782, February&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc2782.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4303">[RFC4303]</a></td>
<td class="author-text">Kent, S., &ldquo;<a href="http://tools.ietf.org/html/rfc4303">IP Encapsulating Security Payload (ESP)</a>,&rdquo; RFC&nbsp;4303, December&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4303.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5026">[RFC5026]</a></td>
<td class="author-text">Giaretta, G., Kempf, J., and V. Devarapalli, &ldquo;<a href="http://tools.ietf.org/html/rfc5026">Mobile IPv6 Bootstrapping in Split Scenario</a>,&rdquo; RFC&nbsp;5026, October&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc5026.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5149">[RFC5149]</a></td>
<td class="author-text">Korhonen, J., Nilsson, U., and V. Devarapalli, &ldquo;<a href="http://tools.ietf.org/html/rfc5149">Service Selection for Mobile IPv6</a>,&rdquo; RFC&nbsp;5149, February&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5149.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5779">[RFC5779]</a></td>
<td class="author-text">Korhonen, J., Bournelle, J., Chowdhury, K., Muhanna, A., and U. Meyer, &ldquo;<a href="http://tools.ietf.org/html/rfc5779">Diameter Proxy Mobile IPv6: Mobile Access Gateway and Local Mobility Anchor Interaction with Diameter Server</a>,&rdquo; RFC&nbsp;5779, February&nbsp;2010 (<a href="http://www.rfc-editor.org/rfc/rfc5779.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5949">[RFC5949]</a></td>
<td class="author-text">Yokota, H., Chowdhury, K., Koodli, R., Patil, B., and F. Xia, &ldquo;<a href="http://tools.ietf.org/html/rfc5949">Fast Handovers for Proxy Mobile IPv6</a>,&rdquo; RFC&nbsp;5949, September&nbsp;2010 (<a href="http://www.rfc-editor.org/rfc/rfc5949.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5996">[RFC5996]</a></td>
<td class="author-text">Kaufman, C., Hoffman, P., Nir, Y., and P. Eronen, &ldquo;<a href="http://tools.ietf.org/html/rfc5996">Internet Key Exchange Protocol Version 2 (IKEv2)</a>,&rdquo; RFC&nbsp;5996, September&nbsp;2010 (<a href="http://www.rfc-editor.org/rfc/rfc5996.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Jouni Korhonen</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia Siemens Networks</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Linnoitustie 6</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">FIN-02600 Espoo</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:jouni.nospam@gmail.com">jouni.nospam@gmail.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Vijay Devarapalli</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Vasona Networks</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:dvijay@gmail.com">dvijay@gmail.com</a></td></tr>
</table>
</body></html>
