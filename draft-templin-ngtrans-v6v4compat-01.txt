





INTERNET-DRAFT                                           Fred L. Templin
                                                       SRI International
                                                       22 September 2000

         An IPv6-IPv4 Compatibility Aggregatable Global Unicast
        Address Format for Incremental Deployment of IPv6 Nodes
               Within Predominantly IPv4-based Intranets


                            Copyright Notice

                    Placeholder for ISOC copyright.

                draft-templin-ngtrans-v6v4compat-01.txt

Abstract

   This document specifies an IPv6-IPv4 compatibility aggregatable
   global unicast address format and its application for incremental
   IPv6 deployment for hosts and routers within predominantly IPv4-based
   Intranets. This document assumes that, during the IPv4 to IPv6 co-
   existence and transition phase, many sites will deploy IPv6
   incrementally (not all at once) on hosts and routers within their
   pre-existing IPv4 interior routing domains; especially those sites
   which have large and complex pre-existing IPv4 infrastructures. In
   such cases, the address format and methods described in this document
   will enable IPv6 deployment for hosts and routers which do not share
   a common multiple access datalink with their default IPv6 gateways.

   While other works in progress in the NGTRANS working group propose
   mechanisms for assigning globally-unique IPv6 address prefixes to
   sites and methods for inter-domain routing between such sites, the
   approach outlined in this memo enables large-scale incremental
   deployment of IPv6 hosts and routers within an individual site's
   pre-existing IPv4 infrastructure without incurring aggregation
   scaling issues at the border gateways nor requiring site-wide
   deployment of special IPv4 services such as multicast. The approach
   proposed by this document supports IPv6 routing within both the
   site-local and global IPv6 routing domains as well as automatic IPv6
   in IPv4 tunneling across portions of a site's IPv4 network which have
   no native IPv6 support. Moreover, this approach supports automatic
   tunneling within sites which use non globally-unique IPv4 address
   assignments, such as when Network Address Translation [NAT] is used.

Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.



Templin                           Expires 22 March 2001         [Page 1]

INTERNET-DRAFT      IPv6-IPv4 Unicast Address Format   22 September 2000


   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet- Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.


1.  Introduction

   The global Internet infrastructure is composed of communications
   entities (hosts and routers) that exchange messages using the Inter-
   net Protocol [IPV4]. The IPv4 architecture specifies a 32-bit address
   format; thus, the number of unique IPv4 addresses is limited to 2^32.
   (In practice, the actual number of unique addresses is considerably
   less due to other architectural constraints.) To eliminate the IPv4
   address limitation issue, the IPNG working group of the Internet
   Engineering Task Force (IETF) has specified a next-generation Inter-
   net Protocol [IPV6] to succeed IPv4. The IPv6 protocol specifies a
   128-bit address format [ADDR] which expand the number of uniquely
   addressable entities by staggering orders of magnitude over IPv4.
   IPv6 also includes numerous additional architectural improvements
   over IPv4, such as address autoconfiguration, neighbor discovery, and
   router discovery [AUTO][DISC]. But, the IPv4 protocol is so well
   understood and so deeply entrenched in the existing Internet infras-
   tructure that migration to IPv6 will require a transition period dur-
   ing which IPv6 will initially coexist with then gradually begin to
   supplant the existing IPv4 installed base.

   Due to these considerations, the IETF NGTRANS working group antici-
   pates an heterogeneous IPv4/IPv6 infrastructure for the near future
   and thus is chartered to develop methodologies to support IPv4/IPv6
   coexistence and transition. For the most part, existing NGTRANS pro-
   posals focus on inter-domain routing between IPv6 "islands" using the
   existing global IPv4 backbone as transit. But, these islands may
   themselves consist of complex heterogeneous IPv4/IPv6 networks (e.g.
   large academic or commercial campus "intranets") that require intra-
   domain IPv4 to IPv6 transition mechanisms and strategies as well. In
   order to address this requirement, this document presents a simple



Templin                           Expires 22 March 2001         [Page 2]

INTERNET-DRAFT      IPv6-IPv4 Unicast Address Format   22 September 2000


   and scalable approach that enables incremental intra-domain deploy-
   ment of IPv6 nodes within predominantly IPv4-based intranets.

   The approach outlined in this document is based on a new aggregatable
   global unicast address format that carries a standard 64-bit IPv6
   address prefix [ADDR][AGGR] with a specially-constructed 64-bit EUI-
   64 Interface Identifier [EUI64]. The 64-bit address prefix used by
   this format is fully compatible with all existing and emerging prefix
   assignment and inter-domain routing practices (e.g. [6to4],[6BONE]).
   But, the interface identifier employs a special construction using
   the IEEE Organizationally Unique Identifier (OUI) reserved by the
   Internet Assigned Numbers Authority [IANA] along with a "type" field
   to indicate that the identifier encapsulates an IPv4 address suitable
   for automatic intra-domain IPv6-in-IPv4 tunneling.  As such, the
   embedded IPv4 address NEED NOT be globally unique; rather, it need
   only be topologically correct for (and unique within) the context of
   that site.

   This approach allows a dual-stack node that does not share a common
   multiple access datalink with an IPv6 gateway for its site to join
   the global IPv6 network by automatically tunneling IPv6 messages
   through the intra-site IPv4 routing infrastructure (*). This method
   further allows large-scale deployment of such nodes without incurring
   aggregation scaling issues at border gateways, since unique IPv4
   addresses are embedded in the IPv6 address interface identifier while
   only a single IPv6 address prefix is used for the entire site.
   Finally, the method specified in this document supports intranets
   which use non-globally unique IPv4 addresses, such as when private
   address allocations [PRIVATE] and/or Network Address Translation
   [NAT] are used - even when multiple levels of NAT are used within a
   given site.

     (*) Since no router advertisements are available when a node does
     not share a common multiple access datalink with an IPv6 gateway,
     such a node requires two pieces of static configuration informa-
     tion: the 64-bit IPv6 network prefix for the site and the IPv4
     address of a (dual-stack) IPv6 gateway servicing the site.  Other-
     wise, no pre-configured tunnel state information is required.

   In the following sections, we present our proposed IPv6-IPv4 compati-
   bility address format in detail. We further discuss technical con-
   siderations for the application of IPv6-IPv4 compatibility addresses
   to facilitate incremental deployment of IPv6 within predominantly
   IPv4-based Intranets.







Templin                           Expires 22 March 2001         [Page 3]

INTERNET-DRAFT      IPv6-IPv4 Unicast Address Format   22 September 2000


2.  IPv6-IPv4 Compatibility Address Format

   In sections 2.1 and 2.2, we will motivate our proposed extensions of
   the existing IEEE OUI reserved by IANA to support IEEE EUI-64 format
   addresses.  While these proposed extensions are necessary to support
   our IPv6-IPv4 compatibility address format, they also provide a flex-
   ible framework for future IANA use. Therefore, we believe the exten-
   sions proposed in sections 2.1 and 2.2 may provide beneficial future
   use to the IANA beyond the scope of IPv6-IPv4 compatibility
   addresses. We present our IPv6-IPv4 compatibility address format pro-
   posal in sections 2.3 and 2.4.


   2.1.  IEEE EUI-64 Interface Identifiers in IPv6 Addresses

   IPv6 aggregatable global and local-use unicast addresses [ADDR]
   include a 64-bit interface identifier in IEEE EUI-64 format [EUI64],
   which is specified as the concatenation of a 24-bit company_id value
   (also known as the OUI) assigned by the IEEE Registration Authority
   (IEEE/RAC) and a 40-bit extension identifier assigned by the organi-
   zation owning that OUI.  IEEE EUI-64 interface identifiers are for-
   matted as follows:

    |0              1|1              3|3              4|4              6|
    |0              5|6              1|2              7|8              3|
    +----------------+----------------+----------------+----------------+
    |ccccccugcccccccc|ccccccccmmmmmmmm|mmmmmmmmmmmmmmmm|mmmmmmmmmmmmmmmm|
    +----------------+----------------+----------------+----------------+

   Where 'c' are the company-specific bits of the OUI, 'u' is the
   universal/local bit, 'g' is the individual/group bit and 'm' are the
   extension identifier bits. (NOTE: [ADDR] specifies that the 'u' bit
   is inverted from its normal sense in the IEEE context; therefore u=1
   indicates global scope and u=0 indicates local scope).

   In order to support encapsulation of legacy IEEE EUI-48 (24-bit)
   extension identifier values, [EUI64] specifies that the first two
   octets of the EUI-64 40-bit extension identifier (bits 24 through 39
   of the EUI-64 address itself) SHALL BE 0xFFFE if the extension iden-
   tifier encapsulates an EUI-48 value. [EUI64] further specifies that
   the first two octets of the extension identifier SHALL NOT be 0xFFFF,
   as this value is reserved by the IEEE/RAC. However, all other 40-bit
   extension identifier values are available for assignment by the
   addressing authority responsible for a given OUI.







Templin                           Expires 22 March 2001         [Page 4]

INTERNET-DRAFT      IPv6-IPv4 Unicast Address Format   22 September 2000


   2.2.  An EUI-64 Interface Identifier Format for IANA

   The IANA owns IEEE OUI: 0x00005E (also written as: 00-00-5E), and
   [IANA] specifies EUI-48 format (24-bit) interface identifier assign-
   ments within that OUI. But, [IANA] does not specify how these legacy
   EUI-48 assignments will be written in EUI-64 format, nor does it
   specify a format for future 40-bit extension identifier assignments.
   We propose the following format for EUI-64 addresses within IANA's
   OUI reservation:


    |0                      2|2      3|3      3|4                      6|
    |0                      3|4      1|2      9|0                      3|
    +------------------------+--------+--------+------------------------+
    |  OUI ("00-00-5E"+u+g)  |  TYPE  |  TSE   |          TSD           |
    +------------------------+--------+--------+------------------------+

   Where the fields are:

      OUI     IANA's OUI: 00-00-5E with 'u' and 'g' bits (3 octets)

      TYPE    Type field; indicates how (TSE, TSD) are interpreted (1 octet)

      TSE     Type-Specific Extension (1 octet)

      TSD     Type-Specific Data (3 octets)


   And the following interpretations are defined based on TYPE:

      TYPE         (TSE, TSD) Interpretation
      ----         -------------------------
      0x00-0xFD    RESERVED for future IANA use
      0xFE         (TSE, TSD) together contain an embedded IPv4 address
      0xFF         TSD is interpreted based on TSE as follows:

                   TSE          TSD Interpretation
                   ---          ------------------
                   0x00-0xFD    RESERVED for future IANA use
                   0xFE         TSD contains 24-bit EUI-48 intf identif-
   ier
                   0xFF         RESERVED by IEEE/RAC

   Essentially, if TYPE=0xFE, TSE is treated as an extension of TSD. If
   TYPE=0xFF, TSE is treated as an extension of TYPE. Other values for
   TYPE (and hence, other interpretations of TSE, TSD) are reserved for
   future IANA use. This format conforms to all requirements specified
   in [EUI64] and supports encapsulation of EUI-48 interface identifiers



Templin                           Expires 22 March 2001         [Page 5]

INTERNET-DRAFT      IPv6-IPv4 Unicast Address Format   22 September 2000


   in the manner described by that document. For example, an existing
   IANA EUI-48 format multicast address such as:

       01-00-5E-01-02-03

   would be written in the IANA EUI-64 format as:

       01-00-5E-FF-FE-01-02-03

   But, this proposed format also provides a special TYPE (0xFE) for
   embedding IPv4 addresses within the IANA 40-bit extension identifier.
   This special TYPE forms the basis for our IPv6-IPv4 compatibility
   aggregatable global unicast address format proposal as described in
   the following sections.


   2.3.  IPv6-IPv4 Compatibility Address Construction

   Using the proposed IANA-specific method for interface identifier con-
   struction discussed in sections 2.1 and 2.2 (with TYPE=0xFE), and
   with reference to [ADDR], we can construct IPv6-IPv4 compatibility
   aggregatable global unicast addresses. Using this methodology, we
   propose an IPv6 address format with embedded IPv4 address in the
   EUI-64 interface identifier. The following diagram shows the con-
   struction:

    | 3|  13 | 8 |   24   |   16   | 8 | 8 | 8 | 8 |    32 bits     |
    +--+-----+---+--------+--------+---+---+---+---+---+---+---+----+
    |FP| TLA |RES|  NLA   |  SLA   | 0x| 0x| 0x| 0x|  IPv4 Address  |
    |  | ID  |   |  ID    |  ID    | 02| 00| 5E| FE|   of Endpoint  |
    +--+-----+---+--------+--------+--------------------------------+

   (NOTE: the least significant octet of the OUI in the interface iden-
   tifier is 0x02 instead of 0x00 since u=1 for global scope.)

   By way of example, an existing node with IPv4 address 140.173.129.8
   might be assigned an IPv6 64-bit prefix of 3FFE:1a05:510:200::/64. We
   can then construct an IPv6-IPv4 compatibility aggregatable global
   unicast address for this node as:

      3FFE:1a05:510:200:0200:5EFE:8CAD:8108

   or (perhaps more appropriately) written as the alternative form for
   an IPv6 address with embedded IPv4 address found in [ADDR]:

      3FFE:1a05:510:200:0200:5EFE:140.173.129.8

   Similarly, we can construct the link-local and site-local variants



Templin                           Expires 22 March 2001         [Page 6]

INTERNET-DRAFT      IPv6-IPv4 Unicast Address Format   22 September 2000


   (respectively) of the IPv6-IPv4 compatibility address as:

      FE80::0200:5EFE:140.173.129.8
      FEC0::200:0200:5EFE:140.173.129.8


   2.4.  Advantages

   By embedding an IPv4 address in the interface identifier portion of
   an IPv6 address as described in section 2.3, we can construct aggre-
   gatable global unicast IPv6 addresses that can either be routed glo-
   bally via the IPv6 infrastructure or automatically tunneled locally
   across portions of a site's IPv4 infrastructure which have no native
   IPv6 routing support.  Thus the addressing scheme would support
   heterogeneous IPv6/IPv4 infrastructures in transition with incremen-
   tal deployment of IPv6 at the site level. Additionally, a node with
   such an IPv6-IPv4 compatibility address could act as a router for
   nodes with native IPv6 addresses connected to the same link, since it
   could automatically tunnel messages across a site's IPv4 domain to
   reach a border IPv6 gateway for the site on behalf of such native
   IPv6 nodes. An example would be deployment of IPv6 on some subset of
   the hosts attached to a workgroup's Ethernet LAN. In this case, one
   host would receive an IPv6-IPv4 compatibility address and act as a
   router for the other hosts which receive native IPv6 addresses.

   An additional advantage for our proposed method of embedding an IPv4
   address in the interface identifier portion of an IPv6 address not
   found in other approaches such as [6TO4] is that large numbers of
   IPv6-IPv4 compatibility addresses could be assigned within a common
   IPv6 routing prefix, thus providing maximal aggregation at the border
   gateways. For example, the single 64-bit IPv6 prefix:

       3FFE:1a05:510:2412::/64

   could include literally millions of nodes with IPv6-IPv4 compatibil-
   ity addresses. This feature would allow a "sparse mode" IPv6 deploy-
   ment such as the deployment of sparse populations of IPv6 hosts on
   large numbers of independent links throughout a large corporate
   Intranet.

   A final important advantage is that this method supports both sites
   that use globally unique IPv4 address assignments and those that use
   non-globally unique IPv4 addresses, such as when private address
   assignments and/or Network Address Translation are used. By way of
   analogy to the US Postal system, inter-domain transition approaches
   such as [6TO4] provide means for routing messages "cross-country" to
   the "street address" of a distant site while the approach outlined in
   this document provides localized routing information to reach a



Templin                           Expires 22 March 2001         [Page 7]

INTERNET-DRAFT      IPv6-IPv4 Unicast Address Format   22 September 2000


   specific (mailstop, apartment number, post office box, etc) WITHIN
   that site.  Thus, the site-level routing information need not have
   relevance outside the scope of that site.


3.  Deployment Considerations

   IPv6-IPv4 compatibility addresses should only be used by hosts or
   routers which do not share a common multiple access datalink with an
   IPv6 router for their site. But, there are numerous cases in which
   this situation may occur within an heterogeneous IPv6/IPv4 Intranet.
   Two such examples are:

     - A researcher wishes to configure IPv6 on his existing IPv4-based
     workstation, but the network administrators for his site have not
     yet configured an IPv6 router for his workstation's LAN. The
     researcher is aware of a dual-stack IPv6 router elsewhere within
     his site (which may be several IPv4 router hops away from his
     workstation's LAN) and sets the 64-bit IPv6 address prefix and IPv4
     address of the router as configuration information on his worksta-
     tion (**). The researcher's workstation can now access the global
     IPv6 Internet by first tunneling messages through the site-local
     IPv4 routing domain to the IPv6 router, which will in turn route
     the IPv6 messages. No static configuration information is needed on
     the IPv6 router on behalf of the researcher's workstation.

       (**) This configuration information is used to construct TWO
       IPv6-IPv4 compatibility addresses: the concatenation of the IPv6
       prefix and the IPv4 address of the router construct the IPv6-IPv4
       compatibility address for the router, which the researcher's
       workstation uses as its default IPv6 gateway address. The con-
       catenation of the IPv6 prefix and the IPv4 address of the
       researcher's workstation construct the IPv6-IPv4 compatibility
       address which the workstation uses as its own IPv6 source
       address.

     - An network administrative authority wishes to configure IPv6 on
     the existing IPv4 subnets under their jurisdiction, but these sub-
     nets are separated from the IPv6 border gateway for the site by
     other IPv4 subnets which are not ready for IPv6 deployment. The
     administrator configures a dual-stack IPv6 router (or routers) for
     his administrative domain by arranging for SLA-based subnet
     allocation(s) from the owner of the IPv6 border gateway for the
     site. The administrator further sets the 64-bit IPv6 address prefix
     and IPv4 address of the border gateway as configuration information
     on his router. The router(s) for the administrative domain can now
     access the global IPv6 Internet by first tunneling messages through
     the site-local IPv4 routing domain to the IPv6 border gateway for



Templin                           Expires 22 March 2001         [Page 8]

INTERNET-DRAFT      IPv6-IPv4 Unicast Address Format   22 September 2000


     the site. Hosts and/or other IPv6 routers which share a common mul-
     tiple access datalink with the router receive router advertisements
     from which they can construct native IPv6 addresses with
     topologically-correct 64-bit prefixes and interface identifiers via
     address autoconfiguration. The IPv6 border gateway for the site
     need only have routing information which points to the router(s)
     for the SLA-based subnet allocations.

   As seen in the above examples, the IPv6-IPv4 compatibility address
   format enables incremental IPv6 deployment for hosts and routers
   within sites which have incomplete (or, "sparse") IPv6 coverage at
   the network infrastructure level. But, as native IPv6 services become
   more widely deployed throughout the site, IPv6-IPv4 compatibility
   addresses will begin to outlive their usefulness. In fact, the fol-
   lowing simple and automatic deprecation rule for hosts and routers
   using IPv6-IPv4 compatible addresses is possible:

     "While no IPv6 router advertisements are received, continue to use
     the IPv6-IPv4 compatibility address. If router advertisements
     ensue, discontinue use of the IPv6-IPv4 compatibility address and
     construct a native IPv6 address based on prefix information carried
     in the router advertisements."

   See section 6 for more details on automatic deprecation of IPv6-IPv4
   compatibility addresses.


4.  Sending Rules and Routing Considerations

   The sending rule for a host or router that sends an IPv6 packet to an
   IPv6-IPv4 compatibility destination address is simple and direct:

     "If the 64-bit IPv6 prefix of the IPv6-IPv4 compatibility destina-
     tion address matches the 64-bit IPv6 prefix of one of my network
     interfaces, tunnel the packet through IPv4 - else, route the packet
     through IPv6."

   From the above rule, a sender that does NOT have an interface which
   shares a common 64-bit routing prefix with the packet's IPv6-IPv4
   compatibility destination address simply sends the packet to the
   next-hop gateway determined by an ordinary IPv6 routing table lookup.
   In short, when a sending node does not have an interface which shares
   a common 64-bit (site-level) routing prefix with an IPv6-IPv4 compa-
   tibility destination address, the sending rule is identical to that
   for a native IPv6 destination address. This decision is independent
   of whether the sender has an IPv6-IPv4 compatibility address itself,
   or whether the sender even comprises a dual-stack configuration.
   Indeed, the sender can simply be a native IPv6 node with no legacy



Templin                           Expires 22 March 2001         [Page 9]

INTERNET-DRAFT      IPv6-IPv4 Unicast Address Format   22 September 2000


   IPv4 support.

   When a sender has an interface which shares a common 64-bit routing
   prefix with an IPv6-IPv4 compatibility destination address, however,
   the sender must assume that the destination is NOT directly reachable
   at the datalink level - even though the shared site-level routing
   prefix implies otherwise. Instead, if the sender comprises a dual-
   stack configuration, it should automatically tunnel the IPv6 packet
   (via IPv6-in-IPv4 tunneling as described in [MECH]) to the IPv4
   address embedded within the IPv6-IPv4 compatibility destination
   address' interface identifier. If the sender is an IPv6-only node
   that DOES NOT comprise a dual-stack configuration, however, it has no
   means for automatically tunneling the packet via IPv4. In this case:

  - If the sender is the host that originates the packet, it should send
  the packet to a router that lists the 64-bit prefix in its router
  advertisements. If no such router exists, the sender should drop the
  packet and return a "No route to host" error indication to the ori-
  ginating application.

  - If the sender is a router that forwards the packet, it should drop
  the packet and send an ICMPv6 "Destination Unreachable" message to the
  source

By implication, the scheme breaks down if a packet with an IPv6-IPv4
compatibility destination address reaches an IPv6-only router that has
an interface which shares a common 64-bit routing prefix with the desti-
nation address. Additional mechanisms to address this issue might be
possible, such as allowing dual-stack routers to advertise 96-bit pre-
fixes which incorporate the special 32-bit EUI-64 interface identifier
prefix: 0200:5EFE. A sender could then interpret such an advertisement
to mean that the advertising router comprises a dual stack and is capa-
ble of intra-site IPv6-in-IPv4 tunneling. But a reasonable argument
could be made to the effect that:

  "By the time IPv6-only routers begin to proliferate throughout a site,
  nodes within the site should no longer be using IPv6-IPv4 compatibil-
  ity addresses."

In fact, the advent of IPv6-only routers within a site would serve as a
strong indication that the site is no longer a predominantly IPv4-based
infrastructure in transition, but rather that the transition is either
complete or nearly complete. Therefore, IPv6-IPv4 compatibility
addresses should no longer be used.







Templin                          Expires 22 March 2001         [Page 10]

INTERNET-DRAFT      IPv6-IPv4 Unicast Address Format   22 September 2000


5.  Address Selection

   Other works in progress ([6TO4] and [SELECT]) have begun to explore
   the subject of address selection when multiple IPv6 destination
   address alternatives are available. These address selection policies
   deal with the 64-bit IPv6 routing prefix and thus can be applied
   independently of whether/not the destination address alternatives are
   constructed as described in this document. However, in order to
   ensure efficient routing within the destination's site, we propose
   the following simple "second-tier" address selection policy for deal-
   ing with IPv6-IPv4 compatibility addresses:

     "If multiple alternatives remain after address selection has been
     applied on the 64-bit routing prefixes, and if at least one of the
     remaining alternatives is constructed with a native IPv6 interface
     identifier (one that does NOT contain an embedded IPv4 address as
     described in this document), select a native IPv6 address.  Other-
     wise, select an IPv6-IPv4 compatible address."

   This policy decision is in keeping with the concept that NGTRANS
   transition mechanisms should remain in place ONLY as long as needed
   and should be disabled as soon as native IPv6 mechanisms become
   available.


6.  Automatic Deprecation

   IPv6-IPv4 compatibility addresses constructed in the manner described
   in this document are intended for use only by nodes which do not
   receive router advertisements due to not sharing a common multiple
   access datalink with an IPv6 router. When router advertisements
   become available (such as when an IPv6 router is deployed on a common
   multiple access datalink shared by the node), the node should discon-
   tinue use of its IPv6-IPv4 compatibility address and adopt a normal
   aggregatable global IPv4 unicast address using address auto-
   configuration [AUTO] for a prefix discovered through normal router
   discovery [DISC] means. In this way, IPv6-IPv4 compatibility
   addresses will gradually (and automatically) disappear as IPv6
   routers become widely deployed within a site.


7.  Multicast Considerations

   Other works in progress are currently investigating IPv4-mapped mul-
   ticast addressing issues. The address format discussed in this docu-
   ment is expected to be compatible with those emerging approaches.





Templin                          Expires 22 March 2001         [Page 11]

INTERNET-DRAFT      IPv6-IPv4 Unicast Address Format   22 September 2000


8.  Relation to other works in progress

   The IPv6-IPv4 compatibility address format and routing policy deci-
   sions presented in this draft evolved from SRI contractual works out-
   side the scope of the NGTRANS working group. Additionally, the
   mechanisms presented in this draft were developed by the author with
   no prior knowledge of the activities in NGTRANS. The author recog-
   nizes that other works in progress seek to address very similar
   IPv4-IPv6 transition issues as those targeted by this draft. However,
   the approach described in this draft presents a number of unique
   advantages for NGTRANS that supplement the other works in progress.
   (Most specifically, advantages for incremental deployment of IPv6
   nodes at the intra-domain level.)


9.  IANA considerations

   In order support the EUI-64 address form described in this document,
   we propose that IANA adopt the EUI-64 Interface Identifier format
   specified in section 2.2 for the existing 00-00-5E OUI owned by IANA.
   No other actions are required by the IANA.


10.  Security considerations

   If the administrative authority for a wishes to enforce a policy of
   not exposing internal IPv4 addresses outside of the site, the site's
   router could perform a sort of "reverse network address translation"
   to transform the IPv6-IPv4 compatibility address interface identifier
   (with embedded IPv4 address) into an anonymous ID for inter-domain
   routing outside the site. The fully-qualified IPv6-IPv4 compatibility
   address interface identifier must be used inside the site to enable
   automatic IPv6-in-IPv4 tunneling, however.

   Additional security issues are called out in [6TO4] and probably
   apply here as well.


11.  Implementation status

   The author has implemented the mechanisms described in this draft
   through modifications to the FreeBSD 3.2-RELEASE [FBSD] operating
   system with the INRIA [INRIA] IPv6 distribution. These modifications
   implement the sending rules and routing considerations as described
   in section 3. The source code is not yet ready for public distribu-
   tion, but the author would be happy to discuss details with
   interested parties.




Templin                          Expires 22 March 2001         [Page 12]

INTERNET-DRAFT      IPv6-IPv4 Unicast Address Format   22 September 2000


Acknowledgements

   The ideas presented here were derived from SRI contractual work in
   which the author developed these new mechanisms based on principles
   which emerged through ad-hoc extensions to the FreeBSD 3.2-RELEASE
   operating system and INRIA IPv6 implementation. The author recognizes
   that ideas similar to those presented in this document may have
   already been presented by other authors in NGTRANS (or other forums)
   and wishes to acknowledge any other such authors. The author also
   wishes to acknowledge the SRI and government contract administrators
   who sponsored the projects from which these works derived. The author
   additionally wishes to specifically acknowledge SRI colleagues with
   whom he has discussed and reviewed this work, including Dr. Mike
   Frankel, J. Peter Marcotullio, Lou Rodriguez, and Dr. Ambatipudi Sas-
   try.

   The author further acknowledges discussions with Alain Durand and
   Keith Moore during the IETF 48 conference in Pittsburgh, PA. which
   helped motivate ideas on restructuring this document from the first
   version.

References

   [AGGR]     Hinden., R, O'Dell, M., and Deering, S., "An IPv6
              Aggregatable Global Unicast Address Format",
              RFC 2374, July 1998.

   [ADDR]     Hinden, R., and S. Deering, "IP Version 6 Addressing
              Architecture", RFC 2373, July 1998.

   [AUTO]     Thomson, S., and T. Narten, "IPv6 Stateless Address
              Autoconfiguration", RFC 2462, December 1998.

   [DISC]     Narten, T., Nordmark, E., and W. Simpson, "Neighbor
              Discovery for IP Version 6 (IPv6)", RFC 2461,
              December 1998.

   [EUI64]    IEEE, "Guidelines for 64-bit Global Identifier (EUI-64)
              Registration Authority",
              http://standards.ieee.org/regauth/oui/tutorials/EUI64.html,
              March 1997

   [IANA]     Reynolds, J., and J. Postel, "Assigned Numbers", STD 2,
              USC/Information Sciences Institute, October 1994.

   [IPV4]     Postel, J., "Internet Protocol", RFC 791

   [IPV6]     Deering, S., and R. Hinden, "Internet Protocol, Version 6



Templin                          Expires 22 March 2001         [Page 13]

INTERNET-DRAFT      IPv6-IPv4 Unicast Address Format   22 September 2000


              (IPv6) Specification", RFC 2460

   [6TO4]     Carpenter, B., and K. Moore, "Connection of IPv6 Domains
              via IPv4 Clouds without Explicit Tunnels",
              draft-ietf-ngtrans-6to4-04.txt (work in progress).

   [MECH]     Gilligan, R., and E. Nordmark, "Transition Mechanisms for
              IPv6 Hosts and Routers", draft-ietf-ngtrans-mech-04.txt
              (work in progress).

   [SELECT]   Draves, R., Default Address Selection for IPv6, draft-
   ietf-
              ipngwg-default-addr-select-00.txt (work in progress)

   [FBSD]     http://www.freebsd.org

   [INRIA]    ftp://ftp.inria.fr/network/ipv6/

   [6BONE]    Rockell, R., and R. Fink, RFC 2772, February 2000.

   [PRIVATE]  Rekhter, Y., Moskowitz, B., Karrenberg, D., de Groot, G.
   J.,
              and E. Lear, "Address Allocation for Private Internets",
              RFC 1918, February 1996.

   [NAT]      Egevang, K., and P. Francis, "The IP Network Address
              Translator (NAT)", RFC 1631, May 1994.


Authors Addresses

      Fred L. Templin
      SRI International
      333 Ravenswood Ave.
      Menlo Park, CA 94025, USA

      Email: templin@erg.sri.com

Intellectual Property

   PLACEHOLDER for full IETF IPR Statement if needed.

Full Copyright Statement

   PLACEHOLDER for full ISOC copyright Statement if needed.






Templin                          Expires 22 March 2001         [Page 14]

