




Internet Engineering Task Force                              Rohit Goyal
INTERNET DRAFT                                                  Raj Jain
File: draft-goyal-tcpsat-tcpatm-00.txt                    November, 1998
                                                 Expires:      May, 1999

               Optimizing TCP over Satellite ATM Networks

Status of this Memo

   This document is an Internet-Draft.  Internet-Drafts are working
   documents of the Internet Engineering Task Force (IETF), its areas,
   and its working groups.  Note that other groups may also distribute
   working documents as Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as ``work in progress.''

   To learn the current status of any Internet-Draft, please check the
   ``1id-abstracts.txt'' listing contained in the Internet- Drafts
   Shadow Directories on ftp.is.co.za (Africa), nic.nordu.net (Europe),
   munnari.oz.au (Pacific Rim), ftp.ietf.org (US East Coast), or
   ftp.isi.edu (US West Coast).

NOTE

   This document is not to be taken as a finished product.  Some of the
   sections are rough and are included in order to obtain comments from
   the community that will benefit future iterations of this document.
   This is simply a step in the ongoing conversation about this
   document.  Finally, all the authors of this draft do not necessarily
   agree with and/or advocate all the mechanisms outlined in this
   document.

Abstract

   This document discusses techniques to improve the performance of TCP
   over satellite-ATM networks. ATM provides the ABR, UBR and GFR
   service categories for data traffic. TCP experiences poor performance
   over UBR due to bursty packet losses during congestion.  Buffer
   management and guaranteed rate techniques to improve TCP performance
   over UBR are presented. The performance of TCP over ABR and the
   interaction of ABR congestion control mechanisms with TCP congestion
   control mechanisms are also described.  This document is intended to
   be in informational document for the efficient transport of TCP over
   satellite-ATM networks.




Goyal & Jain                                                    [Page 1]

draft-goyal-tcpsat-tcpatm-00.txt  - 2 -                   November, 1998


1. Introduction

   Several issues arise in optimizing the performance of TCP when ATM is
   deployed over satellite links.  This document emphasizes that both
   TCP mechanisms as well as ATM mechanisms should be used to improve
   TCP performance over long-delay ATM networks.

   ATM technology provides at least 3 service categories for data: UBR,
   ABR, and GFR [ATMF]. Each of these categories can be improved by a
   number of mechanisms.  Some examples of these categories and
   improvements are:

    - Unspecified Bit Rate (UBR) with tail drop,
    - UBR with intelligent buffer management,
    - UBR with guaranteed rate,
    - Available Bit Rate (ABR) with network feedback, and
    - ABR with virtual source/virtual destination (VS/VD).
    - Guaranteed Frame Rate (GFR),

   In addition, TCP provides several congestion control mechanisms
   including:

    - Vanilla TCP with slow start and congestion avoidance,
    - TCP Reno with fast retransmit and recovery,
    - TCP New Reno
    - TCP with selective acknowledgements (SACK)

   Satellite-ATM network designers as well as service providers must
   choose the optimal ATM services for efficient TCP transport. In the
   presence of TCP performance enhancing proxies at the edges of the
   satellite-ATM network, the service providers also have the ability to
   control TCP mechanisms so as to provide good performance. This
   document describes the design choices and performance analysis
   results of various options available to TCP over satellite-ATM
   networks.


2. Techniques for Improving TCP Performance over ATM

   It has been shown [LI96] that vanilla TCP over the UBR service
   category achieves low throughput and high unfairness over satellite
   networks. This is because during packet loss, TCP loses time waiting
   for its coarse granularity retransmission timeout.

   In the presence of bursty packet losses, fast retransmit and recovery
   (FRR) (without SACK) further hurts TCP performance over UBR for long
   delay-bandwidth product networks. This is because after two fast
   retransmissions, the congestion window is too small to send out new



Goyal & Jain                                                    [Page 2]

draft-goyal-tcpsat-tcpatm-00.txt  - 3 -                   November, 1998


   packets that trigger duplicate acks. In the absence of duplicate
   acks, the third lost packet is not retransmitted, and a timeout
   occurs at a small window. This results in congestion avoidance with a
   small window, which is very slow for long delay networks.

   There are four ways to significantly improve the TCP throughput over
   UBR:

    - frame-level discard policies,
    - intelligent buffer management policies,
    - TCP New Reno,
    - TCP SACK, and
    - guaranteed rates.

   Frame level discard policies such as early packet discard (EPD)
   improve the throughput significantly over cell-level discard
   policies. However, the fairness is not guaranteed unless intelligent
   buffer management using per-VC accounting is used [GOYAL97b].

   Throughput increases further with more aggressive New Reno and SACK
   [SACK]. SACK gives the best performance in terms of throughput.  It
   has been found that for long delay paths, the throughput improvement
   due to SACK is more than that from discard policies and buffer
   management [GOYAL97b].  When several TCP flows are multiplexed on to
   a few VCs, fairness among the TCP flows can be provided by the
   routers at the edges of the ATM network, while VC level fairness must
   be provided by the ATM network using either buffer management or per-
   VC queuing.

   The fourth method of improving the UBR performance is the so called
   "guaranteed rate" (GR) in which  a small fraction of the bandwidth is
   reserved in the switches for the UBR service. This bandwidth is
   shared by all UBR VCs.  Using guaranteed rates helps in the presence
   of a high load of higher priority traffic such as Constant Bit Rate
   (CBR) or Variable Bit Rate (VBR) traffic.  It has been found that
   reserving just a small fraction, say 10%, of the bandwidth for UBR
   significantly improves TCP performance [GOYAL97a].  This is because
   the reserved bandwidth ensures that the flow of TCP packets and
   acknowledgements is continuous and prevents TCP timeouts due to
   temporary bandwidth starvation of UBR. Note that this mechanism is
   different from the GFR service category where each VC (rather than
   the entire UBR class) has a minimum rate guarantee.

   For TCP over ABR, in addition to the four methods discussed above,
   there are two more ways to improve the performance:

    - ABR with virtual source/virtual destination (VS/VD), and
    - ack regulation.



Goyal & Jain                                                    [Page 3]

draft-goyal-tcpsat-tcpatm-00.txt  - 4 -                   November, 1998


   Studies [GOYAL98] have indicated that VS/VD can be used to isolate
   long-delay segments from terrestrial segments. This helps in
   efficiently sizing buffers in routers and ATM switches. As a result,
   terrestrial switches only need to have buffers proportional to the
   bandwidth-delay products of the terrestrial segment of the TCP path.
   Switches connected to the satellite VS/VD loops must have buffers
   proportional to the satellite delay-bandwidth products.

   Ack regulation techniques require routers to control the flow of TCP
   acknowledgements based on ABR feedback [SHIV98].  These techniques
   can be applied in ATM edge devices or in Internet routers.  These
   techniques can considerably improve fairness, throughput and end-to-
   end delay properties of TCP applications.


3. Summary

   In this document, we have briefly described TCP mechanisms and ATM
   policies to improve TCP performance over satellite-ATM networks.  The
   TCP enhancements such as SACK and large windows require changes to
   the TCP stack. The ATM mechanisms such as buffer management, ABR
   feedback controls, guaranteed rates, and VS/VD do not require any
   changes to the TCP stack.

4. References

   [ATMF] The ATM Forum Technical Committee, "Traffic Management
   Specification Version 4.0," April 1996,
   ftp://ftp.atmforum.com/pub/approved-specs/af-tm-0056.000.pdf

   [LI96] H. Li, K.Y. Siu, H.T. Tzeng, C. Ikeda and H. Suzuki, "TCP over
   ABR and UBR Services in ATM,'' Proc. IPCCC'96, March 1996.

   [GOYAL97a] Rohit Goyal, Raj Jain, Shiv Kalyanaraman, Sonia Fahmy,
   Bobby Vandalore, Xiangrong Cai, Seong-Cheol Kim, Sastri Kota,
   "Guaranteed Rate for Improving TCP Performance on UBR+ over
   Terrestrial and Satellite Networks," ATM Forum/97-0424, April 1997,
   http://www.cis.ohio-state.edu/~jain/atmf/a97-0424.htm

   [GOYAL97b] Rohit Goyal, Raj Jain, Shivkumar Kalyanaraman, Sonia
   Fahmy, Bobby Vandalore, Sastri Kota, "TCP Selective Acknowledgments
   and UBR Drop Policies to Improve ATM-UBR Performance over Terrestrial
   and Satellite Networks", Proc. ICCCN97, Las Vegas, September 1997,
   pp17-27.  http://www.cis.ohio-state.edu/~jain/papers/ic3n97.htm

   [GOYAL98] Rohit Goyal, Xiangrong Cai, Raj Jain, Sonia Fahmy, Bobby
   Vandalore " Per-VC Rate Allocation Techniques for ATM-ABR Virtual
   Source Virtual Destination Networks," Proceedings of Globecom'98,



Goyal & Jain                                                    [Page 4]

draft-goyal-tcpsat-tcpatm-00.txt  - 5 -                   November, 1998


   November 1998, http://www.cis.ohio-
   state.edu/~jain/papers/globecom98.htm

   [SACK] Sally Floyd, "Issues of TCP with SACK" Lawerence Berkeley
   Laboratory, Technical Report, December 1995.

   [SHIV98] Ramakrishna Satyavolu, Ketan Duvedi, Shivkumar Kalyanaraman,
   "Explicit rate control of TCP applications," ATM_Forum/98-0152R1,
   February 1998.


Author's address

   Rohit Goyal
   Department of Computer and Information Science
   The Ohio State University
   2015 Neil Ave, DL395
   Columbus, OH 43210
   Phone: +1 614-688-4482
   Email: goyal@cis.ohio-state.edu

   Raj Jain
   Department of Computer and Information Science
   The Ohio State University
   2015 Neil Ave, DL395
   Columbus, OH 43210
   Phone: +1 614-292-3989
   Email: jain@cis.ohio-state.edu


                                                    Expires:      May, 1999




















Goyal & Jain                                                    [Page 5]

