



SFC                                                          Y. Wei, Ed.
Internet-Draft                                           ZTE Corporation
Intended status: Standards Track                                P. Quinn
Expires: June 15, 2020                               Cisco Systems, Inc.
                                                                U. Elzur
                                                                   Intel
                                                                S. Majee
                                                                      F5
                                                       December 13, 2019


                      Network Service Header TLVs
                       draft-ietf-sfc-nsh-tlv-01

Abstract

   This draft describes Network Service Header (NSH) MD-Type 2 metadata
   TLVs that can be used within a service function path.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on June 15, 2020.

Copyright Notice

   Copyright (c) 2019 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of



Wei, et al.               Expires June 15, 2020                 [Page 1]

Internet-Draft         Network Service Header TLVs         December 2019


   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Conventions used in this document . . . . . . . . . . . . . .   3
     2.1.  Requirements Language . . . . . . . . . . . . . . . . . .   3
   3.  NSH Type 2 Format . . . . . . . . . . . . . . . . . . . . . .   3
   4.  NSH Type 2 TLVs . . . . . . . . . . . . . . . . . . . . . . .   3
     4.1.  Forwarding Context  . . . . . . . . . . . . . . . . . . .   4
     4.2.  Tenant  . . . . . . . . . . . . . . . . . . . . . . . . .   4
     4.3.  Content Type  . . . . . . . . . . . . . . . . . . . . . .   5
     4.4.  Ingress Network Information . . . . . . . . . . . . . . .   5
     4.5.  Flow ID . . . . . . . . . . . . . . . . . . . . . . . . .   6
     4.6.  Source and/or Destination Groups  . . . . . . . . . . . .   6
     4.7.  Universal Resource Identifier (URI) . . . . . . . . . . .   6
     4.8.  Policy Identifier (POLICY_ID) . . . . . . . . . . . . . .   7
   5.  Security Considerations . . . . . . . . . . . . . . . . . . .   7
   6.  Acknowledgments . . . . . . . . . . . . . . . . . . . . . . .   7
   7.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   7
   8.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   7
     8.1.  Normative References  . . . . . . . . . . . . . . . . . .   8
     8.2.  Informative References  . . . . . . . . . . . . . . . . .   8
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   8

1.  Introduction

   Network Service Header [RFC8300] is the SFC encapsulation protocol
   used to create Service Function Chains.  As such, NSH provides two
   key elements:

   1.  Service Function Path identification

   2.  Metadata

   NSH further defines two metadata formats (MD Types): 1 and 2.  MD
   Type 1 defines fixed length, 16 byte metadata, whereas MD Type 2
   defines a variable-length TLV format for metadata.  This draft
   defines some common TLVs for use with NSH MD Type 2.

   This draft does not address metadata usage, updating/chaining of
   metadata or other SFP functions.  Those topics are described in NSH.








Wei, et al.               Expires June 15, 2020                 [Page 2]

Internet-Draft         Network Service Header TLVs         December 2019


2.  Conventions used in this document

2.1.  Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in BCP
   14 [RFC2119] [RFC8174] when, and only when, they appear in all
   capitals, as shown here.

3.  NSH Type 2 Format

   A NSH is composed of a 4-byte Base Header, a 4-byte Service Path
   Header and Context Headers.  The Base Header identifies the MD-Type
   in use:

       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |Ver|O|C|R|R|R|R|R|R|   Length  |    MD Type    | Next Protocol |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                         Figure 1: NSH Base Header

   Please refer to NSH [RFC8300] for a detailed header description.

   When the base header specifies MD Type= 0x2, zero or more Variable
   Length Context Headers MAY be added, immediately following the
   Service Path Header.  Therefore, Length = 0x2, indicates that only
   the Base Header followed by the Service Path Header are present.  The
   number, indicated in the length field, of optional Variable Length
   Context Headers MUST be of an integer indicating length in 4-bytes
   words Figure 2 below depicts the format the context header.

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |          TLV Class            |C|    Type     |R|R|R|   Len   |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                      Variable Metadata                        |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                         Figure 2: NSH TLV Format

4.  NSH Type 2 TLVs

   As per NSH, TLV Class 0-7 are reserved for standards use.  In this
   draft we use TLV Class 0 for the following Types:




Wei, et al.               Expires June 15, 2020                 [Page 3]

Internet-Draft         Network Service Header TLVs         December 2019


      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |         TLV Class = 0x0       |C|    Type     |R|R|R|   Len   |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                      Variable Metadata                        |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                        Figure 3: NSH TLV Class=0x0

4.1.  Forwarding Context

   This TLV carries network-centric forwarding context, used for
   segregation and forwarding scope.  Forwarding context can take
   several forms depending on the network environment.  Commonly used
   data includes VXLAN/VXLAN- GPE VNID, VRF identification or VLAN.

      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |         TLV Class = 0x0       |C|    Type=0x1 |R|R|R|  L=0x2  |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |CT  (4)|             Reserved                                  |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                     Tentant ID                                |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                       Figure 4: Forwarding Context

   Context Type (CT), 4 bits:

   0x0: 24 bit VXLAN/LISP virtual network identifier (VNI)

   0x1: 32 bit MPLS VPN label

   0x2: VLAN

4.2.  Tenant

   Tenant identification is often used for segregation within a multi-
   tenant environment.  Orchestration system generated tenant IDs are an
   example of such data.













Wei, et al.               Expires June 15, 2020                 [Page 4]

Internet-Draft         Network Service Header TLVs         December 2019


      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |         TLV Class = 0x0       |C|    Type=0x4 |R|R|R|  L=0x3  |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |TT  (4)|             Reserved                                  |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                         Tenant ID                             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                         Tenant ID                             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                        Figure 5: Tenant Identifier

   Tenant Type (TT), 4 bits:

   0x0: 32 bit

   0x1: 64 bit

4.3.  Content Type

   Provides explicit information about the content being carried, for
   example, type of video or content value for billing purposes.

      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |         TLV Class = 0x0       |C|    Type=0x6 |R|R|R|   L=0x1 |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                     Content Type                              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                          Figure 6: Content Type

4.4.  Ingress Network Information

   This data identifies ingress network node, and, if required, ingress
   interface.

      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |         TLV Class = 0x0       |C|    Type=0x7 |R|R|R|   L=0x2 |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                        Node ID                                |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                     Source Interface/Port                     |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                      Figure 7: Ingress Network Info






Wei, et al.               Expires June 15, 2020                 [Page 5]

Internet-Draft         Network Service Header TLVs         December 2019


4.5.  Flow ID

   Flow ID provides a representation of flow.  Akin, but not identical
   to the usage described in [RFC6437].

      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |         TLV Class = 0x0       |C|    Type=0x8 |R|R|R|   L=0x1 |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                     Flow ID                                   |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                             Figure 8: Flow ID

4.6.  Source and/or Destination Groups

   Intent-based systems can use this data to express the logical
   grouping of source and/or destination objects.  [GROUPBASEDPOLICY]
   and [GROUPPOLICY] provide examples of such a system.

      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |         TLV Class = 0x0       |C|    Type=0x9 |R|R|R|   L=0x3 |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |GT(4)  |                Reserved                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                        Source Group                           |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                        Dest Group                             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


                         Figure 9: End Point Group

   Group type (4):

   0x1: Group Based Policy (GBP) end point group (EPG)

4.7.  Universal Resource Identifier (URI)

      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |         TLV Class = 0x0       |C|    Type=0xA |R|R|R|   L=var |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |UT(4)  |                URI                                    |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      ~                        URI                                    ~
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                 Figure 10: Universal Resource Identifier




Wei, et al.               Expires June 15, 2020                 [Page 6]

Internet-Draft         Network Service Header TLVs         December 2019


      URI type (4):

      0x1: URI in standard string format as defined in [RFC3986].

      0x2: URI represented in a compacted hash format.

4.8.  Policy Identifier (POLICY_ID)

   Policy is often referred by a system generated identifier which is
   then used by the devices to lookup the content of the policy locally.
   For example this identifier could be an index to an array, a lookup
   key, a database Id.  The identifier allows enforcement agents or
   services to lookup up the content of their part of the policy quite
   efficiently.

      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |         TLV Class = 0x0       |C|    Type=0xB |R|R|R|   L=0x2 |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                     POLICY_ID                                 |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      ~                     POLICY_ID                                 ~
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                           Figure 11: POLICY_ID

5.  Security Considerations

   [RFC8300] describes the requisite security considerations for
   protecting NSH metadata.

6.  Acknowledgments

   The authors would like to thank Behcet Sarikaya, Dirk von Hugo and
   Mohamed Boucadair for their work regarding usage of subscriber and
   host information TLVs.

7.  IANA Considerations

   IANA is requested to create a new "Network Service Header (NSH) TLV
   Type" registry.  TLV types 0-127 are specified in this document.  New
   values are assigned via Standards Action [RFC8126].

8.  References








Wei, et al.               Expires June 15, 2020                 [Page 7]

Internet-Draft         Network Service Header TLVs         December 2019


8.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC3986]  Berners-Lee, T., Fielding, R., and L. Masinter, "Uniform
              Resource Identifier (URI): Generic Syntax", STD 66,
              RFC 3986, DOI 10.17487/RFC3986, January 2005,
              <https://www.rfc-editor.org/info/rfc3986>.

   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC
              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,
              May 2017, <https://www.rfc-editor.org/info/rfc8174>.

   [RFC8300]  Quinn, P., Ed., Elzur, U., Ed., and C. Pignataro, Ed.,
              "Network Service Header (NSH)", RFC 8300,
              DOI 10.17487/RFC8300, January 2018,
              <https://www.rfc-editor.org/info/rfc8300>.

8.2.  Informative References

   [GROUPBASEDPOLICY]
              OpenStack, "Group Based Policy", 2014.

   [GROUPPOLICY]
              OpenDaylight, "Group Policy", 2014.

   [RFC6437]  Amante, S., Carpenter, B., Jiang, S., and J. Rajahalme,
              "IPv6 Flow Label Specification", RFC 6437,
              DOI 10.17487/RFC6437, November 2011,
              <https://www.rfc-editor.org/info/rfc6437>.

   [RFC8126]  Cotton, M., Leiba, B., and T. Narten, "Guidelines for
              Writing an IANA Considerations Section in RFCs", BCP 26,
              RFC 8126, DOI 10.17487/RFC8126, June 2017,
              <https://www.rfc-editor.org/info/rfc8126>.

Authors' Addresses

   Yuehua (Corona) Wei (editor)
   ZTE Corporation
   No.50, Software Avenue
   Nanjing  210012
   P. R. China

   Email: wei.yuehua@zte.com.cn



Wei, et al.               Expires June 15, 2020                 [Page 8]

Internet-Draft         Network Service Header TLVs         December 2019


   Paul Quinn
   Cisco Systems, Inc.

   Email: paulq@cisco.com


   Uri Elzur
   Intel

   Email: uri.elzur@intel.com


   Sumandra Majee
   F5

   Email: S.Majee@F5.com



































Wei, et al.               Expires June 15, 2020                 [Page 9]
