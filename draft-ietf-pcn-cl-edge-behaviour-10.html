<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>PCN Boundary Node Behaviour for the Controlled Load (CL) Mode of Operation</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.1.1" rel="Chapter" title="1.1 Terminology">
<link href="#rfc.section.2" rel="Chapter" title="2 [CL-Specific] Assumed Core Network Behaviour for CL">
<link href="#rfc.section.3" rel="Chapter" title="3 Node Behaviours">
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 Overview">
<link href="#rfc.section.3.2" rel="Chapter" title="3.2 Behaviour of the PCN-Egress-Node">
<link href="#rfc.section.3.2.1" rel="Chapter" title="3.2.1 Data Collection">
<link href="#rfc.section.3.2.2" rel="Chapter" title="3.2.2 Reporting the PCN Data">
<link href="#rfc.section.3.2.3" rel="Chapter" title="3.2.3 Optional Report Suppression">
<link href="#rfc.section.3.3" rel="Chapter" title="3.3 Behaviour at the Decision Point">
<link href="#rfc.section.3.3.1" rel="Chapter" title="3.3.1 Flow Admission">
<link href="#rfc.section.3.3.2" rel="Chapter" title="3.3.2 Flow Termination">
<link href="#rfc.section.3.3.3" rel="Chapter" title="3.3.3 Decision Point Action For Missing PCN-Boundary-Node Reports">
<link href="#rfc.section.3.4" rel="Chapter" title="3.4 Behaviour of the Ingress Node">
<link href="#rfc.section.3.5" rel="Chapter" title="3.5 Summary of Timers and Associated Configurable Durations">
<link href="#rfc.section.3.5.1" rel="Chapter" title="3.5.1 Recommended Values For the Configurable Durations">
<link href="#rfc.section.4" rel="Chapter" title="4 Specification of Diffserv Per-Domain Behaviour">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 Applicability">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Technical Specification">
<link href="#rfc.section.4.2.1" rel="Chapter" title="4.2.1 Classification and Traffic Conditioning">
<link href="#rfc.section.4.2.2" rel="Chapter" title="4.2.2 PHB Configuration">
<link href="#rfc.section.4.3" rel="Chapter" title="4.3 Attributes">
<link href="#rfc.section.4.4" rel="Chapter" title="4.4 Parameters">
<link href="#rfc.section.4.5" rel="Chapter" title="4.5 Assumptions">
<link href="#rfc.section.4.6" rel="Chapter" title="4.6 Example Uses">
<link href="#rfc.section.4.7" rel="Chapter" title="4.7 Environmental Concerns">
<link href="#rfc.section.4.8" rel="Chapter" title="4.8 Security Considerations">
<link href="#rfc.section.5" rel="Chapter" title="5 Operational and Management Considerations">
<link href="#rfc.section.5.1" rel="Chapter" title="5.1 Deployment of the CL Edge Behaviour">
<link href="#rfc.section.5.1.1" rel="Chapter" title="5.1.1 Selection of Deployment Options and Global Parameters">
<link href="#rfc.section.5.1.2" rel="Chapter" title="5.1.2 Specification of Node- and Link-Specific Parameters">
<link href="#rfc.section.5.1.3" rel="Chapter" title="5.1.3 Installation of Parameters and Policies">
<link href="#rfc.section.5.1.4" rel="Chapter" title="5.1.4 Activation and Verification of All Behaviours">
<link href="#rfc.section.5.2" rel="Chapter" title="5.2 Management Considerations">
<link href="#rfc.section.5.2.1" rel="Chapter" title="5.2.1 Event Logging In the PCN Domain">
<link href="#rfc.section.5.2.1.1" rel="Chapter" title="5.2.1.1 Logging Loss and Restoration of Contact">
<link href="#rfc.section.5.2.1.2" rel="Chapter" title="5.2.1.2 Logging Flow Termination Events">
<link href="#rfc.section.5.2.2" rel="Chapter" title="5.2.2 Provision and Use of Counters">
<link href="#rfc.section.6" rel="Chapter" title="6 Security Considerations">
<link href="#rfc.section.7" rel="Chapter" title="7 IANA Considerations">
<link href="#rfc.section.8" rel="Chapter" title="8 Acknowledgements">
<link href="#rfc.references" rel="Chapter" title="9 References">
<link href="#rfc.references.1" rel="Chapter" title="9.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="9.2 Informative References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="Pre-congestion notification (PCN) is a means for protecting the quality of service for inelastic traffic admitted to a Diffserv domain. The overall PCN architecture is described in RFC 5559. This memo is one of a series describing possible boundary node behaviours for a PCN-domain. The behaviour described here is that for a form of measurement-based load control using three PCN marking states, not-marked, threshold-marked, and excess-traffic-marked. This behaviour is known informally as the Controlled Load (CL) PCN-boundary-node behaviour. " />
  <meta name="description" content="Pre-congestion notification (PCN) is a means for protecting the quality of service for inelastic traffic admitted to a Diffserv domain. The overall PCN architecture is described in RFC 5559. This memo is one of a series describing possible boundary node behaviours for a PCN-domain. The behaviour described here is that for a form of measurement-based load control using three PCN marking states, not-marked, threshold-marked, and excess-traffic-marked. This behaviour is known informally as the Controlled Load (CL) PCN-boundary-node behaviour. " />
  <meta name="keywords" content="PCN, controlled load, CL, boundary node behaviour" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Internet Engineering Task Force</td>
<td class="right">A. Charny</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">Cisco Systems</td>
</tr>
<tr>
<td class="left">Intended status: Experimental Protocol</td>
<td class="right">F.Q. Huang</td>
</tr>
<tr>
<td class="left">Expires: April 25, 2012</td>
<td class="right">Huawei Technologies</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">G. Karagiannis</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">U. Twente</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">M. Menth</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">University of Tuebingen</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">T. Taylor, Ed.</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Huawei Technologies</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">October 23, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">PCN Boundary Node Behaviour for the Controlled Load (CL) Mode of Operation<br />
  <span class="filename">draft-ietf-pcn-cl-edge-behaviour-10</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>Pre-congestion notification (PCN) is a means for protecting the quality of service for inelastic traffic admitted to a Diffserv domain. The overall PCN architecture is described in RFC 5559. This memo is one of a series describing possible boundary node behaviours for a PCN-domain. The behaviour described here is that for a form of measurement-based load control using three PCN marking states, not-marked, threshold-marked, and excess-traffic-marked. This behaviour is known informally as the Controlled Load (CL) PCN-boundary-node behaviour. </p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on April 25, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>1.1.   <a href="#rfc.section.1.1">Terminology</a>
</li>
<li>2.   <a href="#rfc.section.2">[CL-Specific] Assumed Core Network Behaviour for CL</a>
</li>
<li>3.   <a href="#rfc.section.3">Node Behaviours</a>
</li>
<li>3.1.   <a href="#rfc.section.3.1">Overview</a>
</li>
<li>3.2.   <a href="#rfc.section.3.2">Behaviour of the PCN-Egress-Node</a>
</li>
<li>3.2.1.   <a href="#rfc.section.3.2.1">Data Collection</a>
</li>
<li>3.2.2.   <a href="#rfc.section.3.2.2">Reporting the PCN Data</a>
</li>
<li>3.2.3.   <a href="#rfc.section.3.2.3">Optional Report Suppression</a>
</li>
<li>3.3.   <a href="#rfc.section.3.3">Behaviour at the Decision Point</a>
</li>
<li>3.3.1.   <a href="#rfc.section.3.3.1">Flow Admission</a>
</li>
<li>3.3.2.   <a href="#rfc.section.3.3.2">Flow Termination</a>
</li>
<li>3.3.3.   <a href="#rfc.section.3.3.3">Decision Point Action For Missing PCN-Boundary-Node Reports</a>
</li>
<li>3.4.   <a href="#rfc.section.3.4">Behaviour of the Ingress Node</a>
</li>
<li>3.5.   <a href="#rfc.section.3.5">Summary of Timers and Associated Configurable Durations</a>
</li>
<li>3.5.1.   <a href="#rfc.section.3.5.1">Recommended Values For the Configurable Durations</a>
</li>
<li>4.   <a href="#rfc.section.4">Specification of Diffserv Per-Domain Behaviour</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">Applicability</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">Technical Specification</a>
</li>
<li>4.2.1.   <a href="#rfc.section.4.2.1">Classification and Traffic Conditioning</a>
</li>
<li>4.2.2.   <a href="#rfc.section.4.2.2">PHB Configuration</a>
</li>
<li>4.3.   <a href="#rfc.section.4.3">Attributes</a>
</li>
<li>4.4.   <a href="#rfc.section.4.4">Parameters</a>
</li>
<li>4.5.   <a href="#rfc.section.4.5">Assumptions</a>
</li>
<li>4.6.   <a href="#rfc.section.4.6">Example Uses</a>
</li>
<li>4.7.   <a href="#rfc.section.4.7">Environmental Concerns</a>
</li>
<li>4.8.   <a href="#rfc.section.4.8">Security Considerations</a>
</li>
<li>5.   <a href="#rfc.section.5">Operational and Management Considerations</a>
</li>
<li>5.1.   <a href="#rfc.section.5.1">Deployment of the CL Edge Behaviour</a>
</li>
<li>5.1.1.   <a href="#rfc.section.5.1.1">Selection of Deployment Options and Global Parameters</a>
</li>
<li>5.1.2.   <a href="#rfc.section.5.1.2">Specification of Node- and Link-Specific Parameters</a>
</li>
<li>5.1.3.   <a href="#rfc.section.5.1.3">Installation of Parameters and Policies</a>
</li>
<li>5.1.4.   <a href="#rfc.section.5.1.4">Activation and Verification of All Behaviours</a>
</li>
<li>5.2.   <a href="#rfc.section.5.2">Management Considerations</a>
</li>
<li>5.2.1.   <a href="#rfc.section.5.2.1">Event Logging In the PCN Domain</a>
</li>
<li>5.2.1.1.   <a href="#rfc.section.5.2.1.1">Logging Loss and Restoration of Contact</a>
</li>
<li>5.2.1.2.   <a href="#rfc.section.5.2.1.2">Logging Flow Termination Events</a>
</li>
<li>5.2.2.   <a href="#rfc.section.5.2.2">Provision and Use of Counters</a>
</li>
<li>6.   <a href="#rfc.section.6">Security Considerations</a>
</li>
<li>7.   <a href="#rfc.section.7">IANA Considerations</a>
</li>
<li>8.   <a href="#rfc.section.8">Acknowledgements</a>
</li>
<li>9.   <a href="#rfc.references">References</a>
</li>
<li>9.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>9.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> <a href="#intro" id="intro">Introduction</a>
</h1>
<p id="rfc.section.1.p.1">The objective of Pre-Congestion Notification (PCN) is to protect the quality of service (QoS) of inelastic flows within a Diffserv domain, in a simple, scalable, and robust fashion.  Two mechanisms are used: admission control, to decide whether to admit or block a new flow request, and (in abnormal circumstances) flow termination to decide whether to terminate some of the existing flows. To achieve this, the overall rate of PCN-traffic is metered on every link in the PCN-domain, and PCN-packets are appropriately marked when certain configured rates are exceeded.  These configured rates are below the rate of the link thus providing notification to PCN-boundary-nodes about incipient overloads before any congestion occurs (hence the "pre" part of "pre-congestion notification").  The level of marking allows decisions to be made about whether to admit or terminate PCN-flows. For more details see <a href="#RFC5559">[RFC5559]</a>. </p>
<p><a href="#behaviours">Section 3</a> of this document specifies a detailed set of algorithms and procedures used to implement the PCN mechanisms for the CL mode of operation. Since the algorithms depend on specific metering and marking behaviour at the interior nodes, it is also necessary to specify the assumptions made about PCN-interior-node behaviour (<a href="#coreAssum">Section 2</a>). Finally, because PCN uses DSCP values to carry its markings, a specification of PCN-boundary-node behaviour MUST include the per domain behaviour (PDB) template specified in <a href="#RFC3086">[RFC3086]</a>, filled out with the appropriate content (<a href="#PDBSpec">Section 4</a>). </p>
<p id="rfc.section.1.p.3">[RFC EDITOR'S NOTE: you may choose to delete the following paragraph and the "[CL-specific]" tags throughout this document when publishing it, since they are present primarily to aid reviewers. RFCyyyy is the published version of draft-ietf-pcn-sm-edge-behaviour.]</p>
<p id="rfc.section.1.p.4">A companion document <a href="#RFCyyyy">[RFCyyyy]</a> specifies the Single Marking (SM) PCN-boundary-node behaviour. This document and <a href="#RFCyyyy">[RFCyyyy]</a> have a great deal of text in common. To simplify the task of the reader, the text in the present document that is specific to the CL PCN-boundary-node behaviour is preceded by the phrase: "[CL-specific]". A similar distinction for SM-specific text is made in <a href="#RFCyyyy">[RFCyyyy]</a>.</p>
<h1 id="rfc.section.1.1">
<a href="#rfc.section.1.1">1.1.</a> <a href="#terms" id="terms">Terminology</a>
</h1>
<p id="rfc.section.1.1.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">[RFC2119]</a>.</p>
<p id="rfc.section.1.1.p.2">This document uses the following terms defined in Section 2 of <a href="#RFC5559">[RFC5559]</a>: </p>

<ul>
<li>PCN-domain;</li>
<li>PCN-ingress-node;</li>
<li>PCN-egress-node;</li>
<li>PCN-interior-node;</li>
<li>PCN-boundary-node;</li>
<li>PCN-flow;</li>
<li>ingress-egress-aggregate (IEA);</li>
<li>[CL-specific] PCN-threshold-rate;</li>
<li>PCN-excess-rate;</li>
<li>PCN-admissible-rate;</li>
<li>PCN-supportable-rate;</li>
<li>PCN-marked;</li>
<li>[CL-specific] threshold-marked;</li>
<li>excess-traffic-marked.</li>
</ul>

<p> </p>
<p id="rfc.section.1.1.p.3">It also uses the terms PCN-traffic and PCN-packet, for which the definition is repeated from  <a href="#RFC5559">[RFC5559]</a> because of their importance to the understanding of the text that follows: </p>

<dl>
<dt>PCN-traffic, PCN-packets, PCN-BA</dt>
<dd style="margin-left: 3">
<br> A PCN-domain carries traffic of different Diffserv behaviour aggregates (BAs) [RFC2474].  The PCN-BA uses the PCN mechanisms to carry PCN-traffic, and the corresponding packets are PCN-packets.  The same network will carry traffic of other Diffserv BAs.  The PCN-BA is distinguished by a combination of the Diffserv codepoint and the ECN field.</dd>
</dl>

<p> </p>
<p id="rfc.section.1.1.p.4">This document uses the following terms from <a href="#RFC5670">[RFC5670]</a>: </p>

<ul>
<li>[CL-specific] threshold-meter;</li>
<li>excess-traffic-meter.</li>
</ul>

<p> </p>
<p id="rfc.section.1.1.p.5">To complete the list of borrowed terms, this document reuses the following terms and abbreviations defined in Section 3 of <a href="#RFC5696">[RFC5696]</a>: </p>

<ul>
<li>not-PCN codepoint;</li>
<li>Not-marked (NM) codepoint;</li>
<li>PCN-marked (PM) codepoint;</li>
<li>[CL-specific] Experimental (EXP) codepoint.</li>
</ul>

<p> </p>
<p id="rfc.section.1.1.p.6">This document defines the following additional terms: </p>

<dl>
<dt>Decision Point</dt>
<dd style="margin-left: 3">
<br> The node that makes the decision about which flows to admit and to terminate. In a given network deployment, this can be the PCN-ingress-node or a centralized control node.  In either case, the PCN-ingress-node is the point where the decisions are enforced.</dd>
<dt>NM-rate</dt>
<dd style="margin-left: 3">
<br> The rate of not-marked PCN-traffic received at a PCN-egress-node for a given ingress-egress-aggregate in octets per second. For further details see <a href="#egrColl">Section 3.2.1</a>.</dd>
<dt>[CL-specific] ThM-rate</dt>
<dd style="margin-left: 3">
<br> The rate of threshold-marked PCN-traffic received at a PCN-egress-node for a given ingress-egress-aggregate in octets per second. For further details see <a href="#egrColl">Section 3.2.1</a>.</dd>
<dt>ETM-rate</dt>
<dd style="margin-left: 3">
<br> The rate of excess-traffic-marked PCN-traffic received at a PCN-egress-node for a given ingress-egress-aggregate in octets per second. For further details see <a href="#egrColl">Section 3.2.1</a>.</dd>
<dt>PCN-sent-rate</dt>
<dd style="margin-left: 3">
<br> The rate of PCN-traffic received at a PCN-ingress-node and destined for a given ingress-egress-aggregate in octets per second. For further details see <a href="#ingrBehav">Section 3.4</a>.</dd>
<dt>Congestion level estimate (CLE)</dt>
<dd style="margin-left: 3">
<br> The ratio of PCN-marked to total PCN-traffic (measured in octets) received for a given ingress-egress-aggregate during a given measurement period. The CLE is used to derive the PCN-admission-state (<a href="#decisAdmit">Section 3.3.1</a>) and is also used by the report suppression procedure (<a href="#repSuppress">Section 3.2.3</a>) if report suppression is activated.</dd>
<dt>PCN-admission-state</dt>
<dd style="margin-left: 3">
<br> The state ("admit" or "block") derived by the Decision Point for a given ingress-egress-aggregate based on PCN packet marking statistics. The Decision Point decides to admit or block new flows offered to the aggregate based on the current value of the PCN-admission-state. For further details see <a href="#decisAdmit">Section 3.3.1</a>.</dd>
<dt>Sustainable aggregate rate (SAR)</dt>
<dd style="margin-left: 3">
<br> The estimated maximum rate of PCN-traffic that can be carried in a given ingress-egress-aggregate at a given moment without risking degradation of quality of service for the admitted flows. The intention is that if the PCN-sent-rate of every ingress-egress-aggregate passing through a given link is limited to its sustainable aggregate rate, the total rate of PCN-traffic flowing through the link will be limited to the PCN-supportable-rate for that link. An estimate of the sustainable aggregate rate for a given ingress-egress-aggregate is derived as part of the flow termination procedure, and is used to determine how much PCN-traffic needs to be terminated. For further details see <a href="#decisTerm">Section 3.3.2</a>.</dd>
<dt>CLE-reporting-threshold</dt>
<dd style="margin-left: 3">
<br> A configurable value against which the CLE is compared as part of the report suppression procedure. For further details, see <a href="#repSuppress">Section 3.2.3</a>.</dd>
<dt>CLE-limit</dt>
<dd style="margin-left: 3">
<br> A configurable value against which the CLE is compared to determine the PCN-admission-state for a given ingress-egress-aggregate.  For further details, see <a href="#decisAdmit">Section 3.3.1</a>.</dd>
<dt>T-meas</dt>
<dd style="margin-left: 3">
<br> A configurable time interval that defines the measurement period over which the PCN-egress-node collects statistics relating to PCN-traffic marking. At the end of the interval the PCN-egress-node calculates the values NM-rate, [CL-specific] ThM-rate, and ETM-rate as defined above and sends a report to the Decision Point, subject to the operation of the report suppression feature. For further details see <a href="#egressBehav">Section 3.2</a>.</dd>
<dt>T-maxsuppress</dt>
<dd style="margin-left: 3">
<br> A configurable time interval after which the PCN-egress-node MUST send a report to the Decision Point for a given ingress-egress-aggregate regardless of the most recent values of the CLE. This mechanism provides the Decision Point with a periodic confirmation of liveness when report suppression is activated. For further details, see <a href="#repSuppress">Section 3.2.3</a>.</dd>
<dt>T-fail</dt>
<dd style="margin-left: 3">
<br> An interval after which the Decision Point concludes that communication from a given PCN-egress-node has failed if it has received no reports from the PCN-egress-node during that interval.  For further details see <a href="#decisSig">Section 3.3.3</a>.</dd>
<dt>T-crit</dt>
<dd style="margin-left: 3">
<br> A configurable interval used in the calculation of T-fail.  For further details see <a href="#decisSig">Section 3.3.3</a>.</dd>
</dl>

<p> </p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> <a href="#coreAssum" id="coreAssum">[CL-Specific] Assumed Core Network Behaviour for CL</a>
</h1>
<p id="rfc.section.2.p.1">This section describes the assumed behaviour for PCN-interior-nodes in the PCN-domain. The CL mode of operation assumes that: </p>

<ul>
<li>PCN-interior-nodes perform both threshold-marking and excess-traffic-marking of PCN-packets, according to the rules specified in <a href="#RFC5670">[RFC5670]</a>; </li>
<li>excess-traffic-marking of PCN-packets uses the PCN-Marked (PM) codepoint defined in <a href="#RFC5696">[RFC5696]</a>;</li>
<li>threshold-marking of PCN-packets uses the EXP codepoint defined in <a href="#RFC5696">[RFC5696]</a>;</li>
<li>the PCN-domain satisfies the conditions specified in <a href="#RFC5696">[RFC5696]</a>; </li>
<li>on each link the reference rate for the threshold-meter is configured to be equal to the PCN-admissible-rate for the link; </li>
<li>on each link the reference rate for the excess-traffic-meter is configured to be equal to the PCN-supportable-rate for the link; </li>
<li>the set of valid codepoint transitions is as shown in Section 4.2 of <a href="#RFC5696">[RFC5696]</a>.</li>
</ul>

<p> </p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> <a href="#behaviours" id="behaviours">Node Behaviours</a>
</h1>
<h1 id="rfc.section.3.1">
<a href="#rfc.section.3.1">3.1.</a> <a href="#overBehav" id="overBehav">Overview</a>
</h1>
<p id="rfc.section.3.1.p.1">This section describes the behaviour of the PCN-ingress-node, PCN-egress-node, and the Decision Point (which MAY be collocated with the PCN-ingress-node). </p>
<p id="rfc.section.3.1.p.2">The PCN-egress-node collects the rates of not-marked, [CL-specific] threshold-marked, and excess-traffic-marked PCN-traffic for each ingress-egress-aggregate and reports them to the Decision Point.  [CL-specific] It MAY also identify and report PCN-flows that have experienced excess-traffic-marking. For a detailed description, see <a href="#egressBehav">Section 3.2</a>.</p>
<p id="rfc.section.3.1.p.3">The PCN-ingress-node enforces flow admission and termination decisions.  It also reports the rate of PCN-traffic sent to a given ingress-egress-aggregate when requested by the Decision Point. For details, see <a href="#ingrBehav">Section 3.4</a>.</p>
<p id="rfc.section.3.1.p.4">Finally, the Decision Point makes flow admission decisions and selects flows to terminate based on the information provided by the PCN-ingress-node and PCN-egress-node for a given ingress-egress-aggregate. For details, see <a href="#decisBehav">Section 3.3</a>.</p>
<h1 id="rfc.section.3.2">
<a href="#rfc.section.3.2">3.2.</a> <a href="#egressBehav" id="egressBehav">Behaviour of the PCN-Egress-Node</a>
</h1>
<h1 id="rfc.section.3.2.1">
<a href="#rfc.section.3.2.1">3.2.1.</a> <a href="#egrColl" id="egrColl">Data Collection</a>
</h1>
<p id="rfc.section.3.2.1.p.1">The PCN-egress-node MUST meter the PCN-traffic it receives in order to calculate the following rates for each ingress-egress-aggregate passing through it. These rates SHOULD be calculated at the end of each measurement period based on the PCN-traffic observed during that measurement period. The duration of a measurement period is equal to the configurable value T-meas.  </p>

<ul>
<li>NM-rate: octets per second of PCN-traffic in PCN-packets that are not-marked (i.e., marked with the NM codepoint);</li>
<li>[CL-specific] ThM-rate: octets per second of PCN-traffic in PCN-packets that are threshold-marked (i.e., marked with the EXP codepoint);</li>
<li>ETM-rate: octets per second of PCN-traffic in PCN-packets that are excess-traffic-marked (i.e., marked with the PM codepoint).</li>
</ul>

<p> </p>
<p id="rfc.section.3.2.1.p.2">Informative note: metering the PCN-traffic continuously and using equal-length measurement intervals minimizes the statistical variance introduced by the measurement process itself. On the other hand, the operation of PCN is not affected if the starting and ending times of the measurement intervals for different ingress-egress-aggregates are different.</p>
<p id="rfc.section.3.2.1.p.3">[CL-specific] As a configurable option, the PCN-egress-node MAY record flow identifiers of the PCN-flows for which excess-traffic-marked packets have been observed during this measurement interval. If this set is large (e.g., more than 20 flows), the PCN-egress-node MAY record only the most recently excess-traffic-marked PCN-flow identifiers rather than the complete set.  </p>

<ul class="empty"><li>These can be used by the Decision Point when it selects flows for termination. In networks using multipath routing it is possible that congestion is not occurring on all paths carrying a given ingress-egress-aggregate. Assuming that specific PCN-flows are routed via specific paths, identifying the PCN-flows that are experiencing excess-traffic-marking helps to avoid termination of PCN-flows not contributing to congestion.</li></ul>

<p> </p>
<h1 id="rfc.section.3.2.2">
<a href="#rfc.section.3.2.2">3.2.2.</a> <a href="#egrSig" id="egrSig">Reporting the PCN Data</a>
</h1>
<p id="rfc.section.3.2.2.p.1">Unless the report suppression option described in <a href="#repSuppress">Section 3.2.3</a> is activated, the PCN-egress-node MUST report the latest values of NM-rate, [CL-specific] ThM-rate, and ETM-rate to the Decision Point each time that it calculates them.</p>
<p id="rfc.section.3.2.2.p.2">[CL-specific] If the PCN-egress-node recorded a set of flow identifiers of PCN-flows for which excess-traffic-marking was observed in the most recent measurement interval, then it MUST also include these identifiers in the report. </p>
<h1 id="rfc.section.3.2.3">
<a href="#rfc.section.3.2.3">3.2.3.</a> <a href="#repSuppress" id="repSuppress">Optional Report Suppression</a>
</h1>
<p id="rfc.section.3.2.3.p.1">Report suppression MUST be provided as a configurable option, along with two configurable parameters, the CLE-reporting-threshold and the maximum report suppression interval T-maxsuppress. The default value of the CLE-reporting-threshold is zero. The CLE-reporting-threshold MUST NOT exceed the CLE-limit configured at the Decision Point. For further information on T-maxsuppress see <a href="#timers">Section 3.5</a>.</p>
<p id="rfc.section.3.2.3.p.2">If the report suppression option is enabled, the PCN-egress-node MUST apply the following procedure to decide whether to send a report to the Decision Point, rather than sending a report automatically at the end of each measurement interval.  </p>

<ol>
<li>As well as the quantities NM-rate, [CLE-specific] ThM-rate, and ETM-rate, the PCN-egress-node MUST calculate the congestion level estimate (CLE) for each measurement interval. The CLE is computed as: <ul class="empty"><li>[CL-specific] <br> CLE = (ThM-rate + ETM-rate) / (NM-rate + ThM-rate + ETM-rate)</li></ul>
<p> if any PCN-traffic was observed, or CLE = 0 if all the rates are zero.  </p>
</li>
<li>If the CLE calculated for the latest measurement interval is greater than the CLE-reporting-threshold and/or the CLE calculated for the immediately previous interval was greater than the CLE-reporting-threshold, then the PCN-egress-node MUST send a report to the Decision Point. The contents of the report are described below.  <ul class="empty"><li>The reason for taking into account the CLE of the previous interval is to ensure that the Decision Point gets immediate feedback if the CLE has dropped below CLE-reporting-threshold. This is essential if the Decision Point is running the flow termination procedure and observing whether (further) flow termination is needed.  See <a href="#decisTerm">Section 3.3.2</a>.</li></ul>
<p> </p>
</li>
<li>If an interval T-maxsuppress has elapsed since the last report was sent to the Decision Point, then the PCN-egress-node MUST send a report to the Decision Point regardless of the CLE value. </li>
<li>If neither of the preceding conditions holds, the PCN-egress-node MUST NOT send a report for the latest measurement interval.</li>
</ol>

<p> </p>
<p id="rfc.section.3.2.3.p.3">Each report sent to the Decision Point when report suppression has been activated MUST contain the values of NM-rate, [CL-specific] ThM-rate, ETM-rate, and CLE that were calculated for the most recent measurement interval. [CL-specific] If the PCN-egress-node recorded a set of flow identifiers of PCN-flows for which excess-traffic-marking was observed in the most recent measurement interval, then it MUST also include these identifiers in the report.</p>
<p id="rfc.section.3.2.3.p.4">The above procedure ensures that at least one report is sent per interval (T-maxsuppress + T-meas). This demonstrates to the Decision Point that both the PCN-egress-node and the communication path between that node and the Decision Point are in operation.</p>
<h1 id="rfc.section.3.3">
<a href="#rfc.section.3.3">3.3.</a> <a href="#decisBehav" id="decisBehav">Behaviour at the Decision Point</a>
</h1>
<p id="rfc.section.3.3.p.1">Operators can choose to use PCN procedures just for flow admission, or just for flow termination, or for both. A compliant Decision Point MUST implement both mechanisms, but configurable options MUST be provided to activate or deactivate PCN-based flow admission and flow termination independently of each other at a given Decision Point.</p>
<p id="rfc.section.3.3.p.2">If PCN-based flow termination is enabled but PCN-based flow admission is not, flow termination operates as specified in this document.  </p>

<ul class="empty"><li>Logically, some other system of flow admission control is in operation, but the description of such a system is out of scope of this document and depends on local arrangements.</li></ul>

<p> </p>
<h1 id="rfc.section.3.3.1">
<a href="#rfc.section.3.3.1">3.3.1.</a> <a href="#decisAdmit" id="decisAdmit">Flow Admission</a>
</h1>
<p id="rfc.section.3.3.1.p.1">The Decision Point determines the PCN-admission-state for a given ingress-egress-aggregate each time it receives a report from the egress node.  It makes this determination on the basis of the congestion level estimate (CLE). If the CLE is provided in the egress node report, the Decision Point SHOULD use the reported value. If the CLE was not provided in the report, the Decision Point MUST calculate it based on the other values provided in the report, using the formula: </p>

<ul class="empty"><li>[CL-specific] <br> CLE = (ThM-rate + ETM-rate) / (NM-rate + ThM-rate + ETM-rate)</li></ul>

<p> if any PCN-traffic was observed, or CLE = 0 if all the rates are zero.</p>
<p id="rfc.section.3.3.1.p.2">The Decision Point MUST compare the reported or calculated CLE to a configurable value, the CLE-limit. If the CLE is less than the CLE-limit, the PCN-admission-state for that aggregate MUST be set to "admit"; otherwise it MUST be set to "block".  </p>
<p id="rfc.section.3.3.1.p.3">If the PCN-admission-state for a given ingress-egress-aggregate is "admit", the Decision Point SHOULD allow new flows to be admitted to that aggregate.  If the PCN-admission-state for a given ingress-egress-aggregate is "block", the Decision Point SHOULD NOT allow new flows to be admitted to that aggregate. These actions MAY be modified by policy in specific cases, but such policy intervention risks defeating the purpose of using PCN. </p>
<h1 id="rfc.section.3.3.2">
<a href="#rfc.section.3.3.2">3.3.2.</a> <a href="#decisTerm" id="decisTerm">Flow Termination</a>
</h1>
<p id="rfc.section.3.3.2.p.1">[CL-specific] When the report from the PCN-egress-node includes a non-zero value of the ETM-rate for some ingress-egress-aggregate, the Decision Point MUST request the PCN-ingress-node to provide an estimate of the rate (PCN-sent-rate) at which the PCN-ingress-node is receiving PCN-traffic that is destined for the given ingress-egress-aggregate.  <a href="#decisSig">Section 3.3.3</a> for a discussion of appropriate actions if the Decision Point fails to receive a timely response to its request for the PCN-sent-rate.  </p>

<ul class="empty"><li>If the Decision Point is collocated with the PCN-ingress-node, the request and response are internal operations.</li></ul>

<p> The Decision Point MUST then wait, for both the requested rate from the PCN-ingress-node and the next report from the PCN-egress-node for the ingress-egress-aggregate concerned. If this next egress node report also includes a non-zero value for the ETM-rate, the Decision Point MUST determine the amount of PCN-traffic to terminate using the following steps: </p>

<ol>
<li>[CL-specific] The sustainable aggregate rate (SAR) for the given ingress-egress-aggregate is estimated by the sum: <ul class="empty"><li>SAR = NM-rate + ThM-rate</li></ul>
<p> for the latest reported interval.</p>
</li>
<li>The amount of traffic to be terminated is the difference: <ul class="empty"><li>PCN-sent-rate - SAR,</li></ul>
<p> where PCN-sent-rate is the value provided by the PCN-ingress-node.  </p>
</li>
</ol>

<p> See </p>
<p id="rfc.section.3.3.2.p.2">If the difference calculated in the second step is positive, the Decision Point SHOULD select PCN-flows to terminate, until it determines that the PCN-traffic admission rate will no longer be greater than the estimated sustainable aggregate rate. If the Decision Point knows the bandwidth required by individual PCN-flows (e.g., from resource signalling used to establish the flows), it MAY choose to complete its selection of PCN-flows to terminate in a single round of decisions.</p>
<p id="rfc.section.3.3.2.p.3">Alternatively, the Decision Point MAY spread flow termination over multiple rounds to avoid over-termination.  If this is done, it is RECOMMENDED that enough time elapse between successive rounds of termination to allow the effects of previous rounds to be reflected in the measurements upon which the termination decisions are based. (See <a href="#IEEE-Satoh">[IEEE-Satoh]</a> and sections 4.2 and 4.3 of <a href="#MeLe10">[MeLe10]</a>.)</p>
<p id="rfc.section.3.3.2.p.4">In general, the selection of flows for termination MAY be guided by policy. [CL-specific] If the egress node has supplied a list of identifiers of PCN-flows that experienced excess-traffic-marking (<a href="#egressBehav">Section 3.2</a>), the Decision Point SHOULD first consider terminating PCN-flows in that list.</p>
<h1 id="rfc.section.3.3.3">
<a href="#rfc.section.3.3.3">3.3.3.</a> <a href="#decisSig" id="decisSig">Decision Point Action For Missing PCN-Boundary-Node Reports</a>
</h1>
<p id="rfc.section.3.3.3.p.1">The Decision Point SHOULD start a timer t-recvFail when it receives a report from the PCN-egress-node. t-recvFail is reset each time a new report is received from the PCN-egress-node. t-recvFail expires if it reaches the value T-fail. T-fail is calculated according to the following logic: </p>

<ol style="list-style-type: lower-alpha">
<li>T-fail = the configurable duration T-crit, if report suppression is not deployed;</li>
<li>T-fail = T-crit also if report suppression is deployed and the last report received from the PCN-egress-node contained a CLE value greater than CLE-reporting-threshold (<a href="#repSuppress">Section 3.2.3</a>);</li>
<li>T-fail = 3 * T-maxsuppress (<a href="#repSuppress">Section 3.2.3</a>) if report suppression is deployed and the last report received from the PCN-egress-node contained a CLE value less than or equal to CLE-reporting-threshold.</li>
</ol>

<p> </p>
<p id="rfc.section.3.3.3.p.2">If timer t-recvFail expires for a given PCN-egress-node, the Decision Point SHOULD notify management. A Decision Point collocated with a PCN-ingress-node SHOULD cease to admit PCN-flows to the ingress-egress-aggregate associated with the given PCN-egress-node, until it again receives a report from that node. A centralized Decision Point MAY cease to admit PCN-flows to all ingress-egress-aggregates destined to the PCN-egress-node concerned, until it again receives a report from that node.</p>
<p id="rfc.section.3.3.3.p.3">A centralized Decision Point SHOULD start a timer t-sndFail when it sends a request for the estimated value of PCN-sent-rate to a given PCN-ingress-node. If the Decision Point fails to receive a response from the PCN-ingress-node before t-sndFail reaches the configurable value T-crit, the Decision Point SHOULD repeat the request but MAY also use ETM-rate as an estimate of the amount of traffic to be terminated in place of the quantity <a href="#decisTerm">Section 3.3.2</a>. Because this will over-estimate the amount of traffic to be terminated due to dropping of PCN-packets by interior nodes, the Decision Point SHOULD use multiple rounds of termination under these circumstances. If the second request to the PCN-ingress-node also fails, the Decision Point SHOULD notify management.  </p>

<ul class="empty"><li>PCN-sent-rate - SAR</li></ul>

<p> specified in </p>

<ul class="empty"><li>The use of T-crit is an approximation. A more precise limit would be of the order of two round-trip times, plus an allowance for processing at each end, plus an allowance for variance in these values.</li></ul>

<p> </p>
<p id="rfc.section.3.3.3.p.4">See <a href="#timers">Section 3.5</a> for suggested values of the configurable durations T-crit and T-maxsuppress.</p>
<h1 id="rfc.section.3.4">
<a href="#rfc.section.3.4">3.4.</a> <a href="#ingrBehav" id="ingrBehav">Behaviour of the Ingress Node</a>
</h1>
<p id="rfc.section.3.4.p.1">The PCN-ingress-node MUST provide the estimated current rate of PCN-traffic received at that node and destined for a given ingress-egress-aggregate in octets per second (the PCN-sent-rate) when the Decision Point requests it.  The way this rate estimate is derived is a matter of implementation.  </p>

<ul class="empty"><li>For example, the rate that the PCN-ingress-node supplies MAY be based on a quick sample taken at the time the information is required. </li></ul>

<p> </p>
<h1 id="rfc.section.3.5">
<a href="#rfc.section.3.5">3.5.</a> <a href="#timers" id="timers">Summary of Timers and Associated Configurable Durations</a>
</h1>
<p id="rfc.section.3.5.p.1">Here is a summary of the timers used in the procedures just described: </p>

<dl>
<dt>t-meas</dt>
<dd style="margin-left: 8">
<br> <ul class="empty">
<li>Where used: PCN-egress-node.</li>
<li>Used in procedure: data collection (<a href="#egrColl">Section 3.2.1</a>).</li>
<li>Incidence: one per ingress-egress-aggregate.</li>
<li>Reset: immediately on expiry.</li>
<li>Expiry: when it reaches the configurable duration T-meas.</li>
<li>Action on expiry: calculate NM-rate, [CL-specific] ThM-rate, and ETM-rate and proceed to the applicable reporting procedure (<a href="#egrSig">Section 3.2.2</a> or <a href="#repSuppress">Section 3.2.3</a>).</li>
</ul>
<p> </p>
</dd>
<dt>t-maxsuppress</dt>
<dd style="margin-left: 8">
<br> <ul class="empty">
<li>Where used: PCN-egress-node.</li>
<li>Used in procedure: report suppression (<a href="#repSuppress">Section 3.2.3</a>).</li>
<li>Incidence: one per ingress-egress-aggregate.</li>
<li>Reset: when the next report is sent, either after expiry or because the CLE has exceeded the reporting threshold.</li>
<li>Expiry: when it reaches the configurable duration T-maxsuppress.</li>
<li>Action on expiry: send a report to the Decision Point the next time the reporting procedure (<a href="#repSuppress">Section 3.2.3</a>) is invoked, regardless of the value of CLE.</li>
</ul>
<p> </p>
</dd>
<dt>t-recvFail</dt>
<dd style="margin-left: 8">
<br> <ul class="empty">
<li>Where used: Decision Point.</li>
<li>Used in procedure: failure detection (<a href="#decisSig">Section 3.3.3</a>).</li>
<li>Incidence: one per ingress-egress-aggregate.</li>
<li>Reset: when a report is received for the ingress-egress-aggregate.</li>
<li>Expiry: when it reaches the calculated duration T-fail. As described in <a href="#decisSig">Section 3.3.3</a>, T-fail is equal either to the configured duration T-crit or to the calculated value 3 * T-maxsuppress, where T-maxsuppress is a configured duration.</li>
<li>Action on expiry: notify management, and possibly other actions.</li>
</ul>
<p> </p>
</dd>
<dt>t-sndFail</dt>
<dd style="margin-left: 8">
<br> <ul class="empty">
<li>Where used: centralized Decision Point.</li>
<li>Used in procedure: failure detection (<a href="#decisSig">Section 3.3.3</a>).</li>
<li>Incidence: only as required, one per outstanding request to a PCN-ingress-node.</li>
<li>Started: when a request for the value of PCN-sent-traffic for a given ingress-egress-aggregate is sent to the PCN-ingress-node.</li>
<li>Terminated without action: when a response is received before expiry.</li>
<li>Expiry: when it reaches the configured duration T-crit.</li>
<li>Action on expiry: repeat the request, but use an approximation for the estimate of amount of traffic to terminate. After two failures, notify management and stop repeating the request.</li>
</ul>
<p> </p>
</dd>
</dl>

<p> </p>
<h1 id="rfc.section.3.5.1">
<a href="#rfc.section.3.5.1">3.5.1.</a> <a href="#duratVal" id="duratVal">Recommended Values For the Configurable Durations</a>
</h1>
<p id="rfc.section.3.5.1.p.1">The timers just described depend on three configurable durations, T-meas, T-maxsuppress, and T-crit. The recommendations given below for the values of these durations are all related to the intended PCN reaction time of 1 to 3 seconds. However, they are based on judgement rather than operational experience or mathematical derivation.</p>
<p id="rfc.section.3.5.1.p.2">The value of T-meas is RECOMMENDED to be of the order of 100 to 500 ms to provide a reasonable tradeoff between demands on network resources (PCN-egress-node and Decision Point processing, network bandwidth) and the time taken to react to impending congestion.</p>
<p id="rfc.section.3.5.1.p.3">The value of T-maxsuppress is RECOMMENDED to be on the order of 3 to 6 seconds, for similar reasons to those for the choice of T-meas.</p>
<p id="rfc.section.3.5.1.p.4">The value of T-crit SHOULD NOT be less than 3 * T-meas. Otherwise it could cause too many management notifications due to transient conditions in the PCN-egress-node or along the signalling path. A reasonable upper bound on T-crit is in the order of 3 seconds.</p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#PDBSpec" id="PDBSpec">Specification of Diffserv Per-Domain Behaviour</a>
</h1>
<p id="rfc.section.4.p.1">This section provides the specification required by <a href="#RFC3086">[RFC3086]</a> for a per-domain behaviour.</p>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> <a href="#PDBApplic" id="PDBApplic">Applicability</a>
</h1>
<p id="rfc.section.4.1.p.1">This section quotes <a href="#RFC5559">[RFC5559]</a>.  </p>
<p id="rfc.section.4.1.p.2">The PCN CL boundary node behaviour specified in this document is applicable to inelastic traffic (particularly video and voice) where quality of service for admitted flows is protected primarily by admission control at the ingress to the domain. </p>
<p id="rfc.section.4.1.p.3">In exceptional circumstances (e.g., due to rerouting as a result of network failures) already-admitted flows MAY be terminated to protect the quality of service of the remaining flows. [CL-specific] The performance results in, e.g., <a href="#MeLe10">[MeLe10]</a>, indicate that the CL boundary node behaviour provides better service outcomes under such circumstances than the SM boundary node behaviour described in [RFCyyyy], because CL is less likely to terminate PCN-flows unnecessarily.</p>
<p id="rfc.section.4.1.p.4">[RFC EDITOR'S NOTE: please replace RFCyyyy above by the reference to the published version of draft-ietf-pcn-sm-edge-behaviour.]</p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> <a href="#PDBTechSpec" id="PDBTechSpec">Technical Specification</a>
</h1>
<h1 id="rfc.section.4.2.1">
<a href="#rfc.section.4.2.1">4.2.1.</a> <a href="#PDBclas" id="PDBclas">Classification and Traffic Conditioning</a>
</h1>
<p id="rfc.section.4.2.1.p.1">This section paraphrases the applicable portions of Sections 3.6 and 4.2 of <a href="#RFC5559">[RFC5559]</a>.</p>
<p id="rfc.section.4.2.1.p.2">Packets at the ingress to the domain are classified as either PCN or non-PCN. Non-PCN packets MAY share the network with PCN packets within the domain. Because the encoding specified in [RFC5696] and used in this document requires the use of the ECN fields, PCN-ingress-nodes MUST prevent ECN-capable traffic that uses the same DSCP as PCN from entering the PCN-domain directly.  The PCN-ingress-node can accomplish this in three ways. The choice between these depends on local policy.  </p>

<ul>
<li>ECN-capable traffic MAY be dropped. This policy is NOT RECOMMENDED, since it prevents the proper operation of end-to-end ECN as a means of controlling congestion.</li>
<li>ECN-capable traffic MAY be assigned a different DSCP from PCN traffic.  This could mean that it is relegated to a lower-priority behaviour aggregate.</li>
<li>ECN-capable traffic MAY be tunneled across the PCN-domain. If this is done, the PCN-ingress-node MUST mark packets as either not-PCN or PCN-not-marked only after the encapsulation of the packet, including any initial setting of the ECN field, has been completed.</li>
</ul>

<p> </p>
<p id="rfc.section.4.2.1.p.3">PCN packets are further classified as belonging or not belonging to an admitted flow. PCN packets not belonging to an admitted flow are dropped. Packets belonging to an admitted flow are policed to ensure that they adhere to the rate or flowspec that was negotiated during flow admission.</p>
<h1 id="rfc.section.4.2.2">
<a href="#rfc.section.4.2.2">4.2.2.</a> <a href="#PDBPHB" id="PDBPHB">PHB Configuration</a>
</h1>
<p id="rfc.section.4.2.2.p.1">The PCN CL boundary node behaviour is a metering and marking behaviour rather than a scheduling behaviour. As a result, while the encoding uses a single DSCP value, that value MAY vary from one deployment to another.  The PCN working group suggests using admission control for the following service classes (defined in <a href="#RFC4594">[RFC4594]</a>): <a href="#RFC5696">[RFC5696]</a>.</p>

<ul>
<li>Telephony (EF)</li>
<li>Real-time interactive (CS4)</li>
<li>Broadcast Video (CS3)</li>
<li>Multimedia Conferencing (AF4)</li>
</ul>

<p> For a fuller discussion, see Section A.1 of Appendix A of </p>
<h1 id="rfc.section.4.3">
<a href="#rfc.section.4.3">4.3.</a> <a href="#PDBAttrib" id="PDBAttrib">Attributes</a>
</h1>
<p id="rfc.section.4.3.p.1">The purpose of this per-domain behaviour is to achieve low loss and jitter for the target class of traffic. The design requirement for PCN was that recovery from overloads through the use of flow termination SHOULD happen within 1-3 seconds. PCN probably performs better than that.</p>
<h1 id="rfc.section.4.4">
<a href="#rfc.section.4.4">4.4.</a> <a href="#PDBParms" id="PDBParms">Parameters</a>
</h1>
<p id="rfc.section.4.4.p.1">The set of parameters that needs to be configured at each PCN-node and at the Decision Point is described in <a href="#deploy">Section 5.1</a>.</p>
<h1 id="rfc.section.4.5">
<a href="#rfc.section.4.5">4.5.</a> <a href="#PDBAssum" id="PDBAssum">Assumptions</a>
</h1>
<p id="rfc.section.4.5.p.1">It is assumed that a specific portion of link capacity has been reserved for PCN-traffic.</p>
<h1 id="rfc.section.4.6">
<a href="#rfc.section.4.6">4.6.</a> <a href="#PDBExamp" id="PDBExamp">Example Uses</a>
</h1>
<p id="rfc.section.4.6.p.1">The PCN CL behaviour MAY be used to carry real-time traffic, particularly voice and video.</p>
<h1 id="rfc.section.4.7">
<a href="#rfc.section.4.7">4.7.</a> <a href="#PDBEnv" id="PDBEnv">Environmental Concerns</a>
</h1>
<p id="rfc.section.4.7.p.1">The PCN CL per-domain behaviour can interfere with the use of end-to-end ECN due to reuse of ECN bits for PCN marking. See Appendix B of <a href="#RFC5696">[RFC5696]</a> for details.</p>
<h1 id="rfc.section.4.8">
<a href="#rfc.section.4.8">4.8.</a> <a href="#PDBSec" id="PDBSec">Security Considerations</a>
</h1>
<p id="rfc.section.4.8.p.1">Please see the security considerations in <a href="#RFC5559">[RFC5559]</a> as well as those in <a href="#RFC2474">[RFC2474]</a> and <a href="#RFC2475">[RFC2475]</a>.</p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#opsConsid" id="opsConsid">Operational and Management Considerations</a>
</h1>
<h1 id="rfc.section.5.1">
<a href="#rfc.section.5.1">5.1.</a> <a href="#deploy" id="deploy">Deployment of the CL Edge Behaviour</a>
</h1>
<p id="rfc.section.5.1.p.1">Deployment of the PCN Controlled Load edge behaviour requires the following steps: </p>

<ul>
<li>selection of deployment options and global parameter values;</li>
<li>derivation of per-node and per-link information; </li>
<li>installation, but not activation, of parameters and policies at all of the nodes in the PCN domain;</li>
<li>activation and verification of all behaviours.</li>
</ul>

<p> </p>
<h1 id="rfc.section.5.1.1">
<a href="#rfc.section.5.1.1">5.1.1.</a> <a href="#globSel" id="globSel">Selection of Deployment Options and Global Parameters</a>
</h1>
<p id="rfc.section.5.1.1.p.1">The first set of decisions affects the operation of the network as a whole.  To begin with, the operator needs to make basic design decisions such as whether the Decision Point is centralized or collocated with the PCN-ingress-nodes, and whether per-flow and aggregate resource signalling as described in <a href="#I-D.tsvwg-rsvp-pcn">[I-D.tsvwg-rsvp-pcn]</a> is deployed in the network. After that, the operator needs to decide: </p>

<ul>
<li>whether PCN packets will be forwarded unencapsulated or in tunnels between the PCN-ingress-node and the PCN-egress-node. Encapsulation preserves incoming ECN settings and simplifies the PCN-egress-node's job when it comes to relating incoming packets to specific ingress-egress-aggregates, but lowers the path MTU and imposes the extra labour of encapsulation/decapsulation on the PCN-edge-nodes.  </li>
<li>which service classes will be subject to PCN control and what Diffserv code point (DSCP) will be used for each. (See <a href="#RFC5696">[RFC5696]</a> Appendix A.1 for advice on this topic.)</li>
<li>the markings to be used at all nodes in the PCN domain to indicate Not-Marked (NM), [CL-specific] Threshold-Marked (ThM), and Excess-Traffic-Marked (ETM) PCN packets;</li>
<li>The marking rules for re-marking PCN-traffic leaving the PCN domain;</li>
<li>whether PCN-based flow admission is enabled;</li>
<li>whether PCN-based flow termination is enabled.</li>
</ul>

<p> </p>
<p id="rfc.section.5.1.1.p.2">The following parameters affect the operation of PCN itself. The operator needs to choose: </p>

<ul>
<li>the value of CLE-limit if PCN-based flow admission is enabled.  [CL-specific] The operation of flow admission is not very sensitive to the value of the CLE-limit in practice, because when threshold-marking occurs it tends to persist long enough that threshold-marked traffic becomes a large proportion of the received traffic in a given interval. </li>
<li>the value of the collection interval T-meas. For a recommended range of values see <a href="#duratVal">Section 3.5.1</a> above.</li>
<li>whether report suppression is to be enabled at the PCN-egress-nodes and if so, the values of CLE-reporting-threshold and T-maxsuppress. It is reasonable to leave CLE-reporting-threshold at its default value (zero, as specified in <a href="#repSuppress">Section 3.2.3</a>).  For a recommended range of values of T-maxsuppress see <a href="#duratVal">Section 3.5.1</a> above.</li>
<li>the value of the duration T-crit, which the Decision Point uses in deciding whether communications with a given PCN-edge-node have failed.  For a recommended range of values of T-crit see <a href="#duratVal">Section 3.5.1</a> above.</li>
<li>[CL-specific] Activation/deactivation of recording of individual flow identifiers when excess-traffic-marked PCN-traffic is observed. Reporting these identifiers has value only if PCN-based flow termination is activated and Equal Cost Multi-Path (ECMP) routing is enabled in the PCN-domain.</li>
</ul>

<p> </p>
<h1 id="rfc.section.5.1.2">
<a href="#rfc.section.5.1.2">5.1.2.</a> <a href="#specSel" id="specSel">Specification of Node- and Link-Specific Parameters</a>
</h1>
<p id="rfc.section.5.1.2.p.1">Each PCN-ingress-node needs filters to classify incoming PCN packets according to ingress-egress-aggregate, both to satisfy Decision Point requests for sent traffic rates and, if applicable, to support encapsulation. If PCN packets are being tunneled to the PCN-egress-nodes (encapsulation), the PCN-ingress-node also needs the address of the PCN-egress-node for each ingress-egress-aggregate.</p>
<p id="rfc.section.5.1.2.p.2">Each PCN-egress-node needs filters to classify incoming PCN packets by ingress-egress-aggregate, in order to gather measurements on a per-aggregate basis. The PCN-egress-node also needs to know the address of the Decision Point to which it sends reports for each ingress-egress-aggregate. </p>
<p id="rfc.section.5.1.2.p.3">If <a href="#I-D.tsvwg-rsvp-pcn">[I-D.tsvwg-rsvp-pcn]</a> is deployed and the Decision Points are collocated with the PCN-ingress-nodes, this information can be built up dynamically from the contents of the end-to-end RSVP signalling and does not have to be pre-configured. Otherwise the filters have to be derived from the routing tables in use in the domain, and the address of the peer at the other end of each ingress-egress-aggregate has to be tabulated for each PCN-edge-node. </p>
<p id="rfc.section.5.1.2.p.4">A centralized Decision Point needs to have the address of the PCN-ingress-node corresponding to each ingress-egress-aggregate. Security considerations require that information also be prepared for a centralized Decision Point and each PCN-edge-node to allow them to authenticate each other. </p>
<p id="rfc.section.5.1.2.p.5">Turning to link-specific parameters, the operator needs to derive values for the PCN-supportable-rate and [CL-specific] PCN-admissible-rate on each link in the network. The first two paragraphs of Section 5.2.2 of <a href="#RFC5559">[RFC5559]</a> discuss how these values may be derived. (For "PCN-excess-rate" in <a href="#RFC5559">[RFC5559]</a> read "PCN-supportable-rate", and [CL-specific] for "PCN-threshold-rate" read "PCN-admissible-rate".)</p>
<h1 id="rfc.section.5.1.3">
<a href="#rfc.section.5.1.3">5.1.3.</a> <a href="#config" id="config">Installation of Parameters and Policies</a>
</h1>
<p id="rfc.section.5.1.3.p.1">As discussed in the previous two sections, every PCN node needs to be provisioned with a number of parameters and policies relating to its behaviour in processing incoming packets. The Diffserv MIB <a href="#RFC3289">[RFC3289]</a> can be useful for this purpose, although it needs to be extended in some cases. This MIB covers packet classification, metering, counting, policing and dropping, and marking.  The required extensions specifically include objects for re-marking the ECN field at the PCN-ingress-node and an extension to the classifiers to include the ECN field at PCN-interior and PCN-egress-nodes. In addition, the MIB has to be extended to include a potential encapsulation action following re-classification by ingress-egress-aggregate. Finally, new metering algorithms may need to be defined at the PCN-interior-nodes to handle threshold-marking and packet-size-independent excess-traffic-marking.</p>
<p id="rfc.section.5.1.3.p.2">Values for the PCN-supportable-rate and [CL-specific] PCN-admissible-rate on each link on a node appear as metering parameters. Operators should take note of the need to deploy meters of a given type (threshold or excess-traffic) either on the ingress side or the egress of each interior link, but not both (Appendix B.2 of <a href="#RFC5670">[RFC5670]</a>.  </p>
<p id="rfc.section.5.1.3.p.3">The following additional information has to be configured by other means (e.g., additional MIBs, NETCONF models).</p>
<p id="rfc.section.5.1.3.p.4">At the PCN-egress-node: </p>

<ul>
<li>the measurement interval T-meas (units of ms, range 50 to 1000);</li>
<li>whether specific flow identifiers must be captured when excess-traffic-marked packets are observed;</li>
<li>whether report suppression is to be applied;</li>
<li>if so, the interval T-maxsuppress (units of 100 ms, range 1 to 100) and the CLE-reporting-threshold (units of tenths of one percent, range 0 to 1000, default value 0);</li>
<li>the address of the PCN-ingress-node for each ingress-egress-aggregate, if the Decision Point is collocated with the PCN-ingress-node and <a href="#I-D.tsvwg-rsvp-pcn">[I-D.tsvwg-rsvp-pcn]</a> is not deployed.</li>
<li>the address of the centralized Decision Point to which it sends its reports, if there is one.</li>
</ul>

<p> </p>
<p id="rfc.section.5.1.3.p.5">At the Decision Point: </p>

<ul>
<li>whether PCN-based flow admission is enabled;</li>
<li>whether PCN-based flow termination is enabled.</li>
<li>the value of CLE-limit (units of tenths of one percent, range 0 to 1000);</li>
<li>the value of the interval T-crit (units of 100 ms, range 1 to 100);</li>
<li>whether report suppression is to be applied;</li>
<li>if so, the interval T-maxsuppress (units of 100 ms, range 1 to 100) and the CLE-reporting-threshold (units of tenths of one percent, range 0 to 1000, default value 0). These MUST be the same values that are provisioned in the PCN-egress-nodes;</li>
<li>if the Decision Point is centralized, the address of the PCN-ingress-node (and any other information needed to establish a security association) for each ingress-egress-aggregate.</li>
</ul>

<p> </p>
<p id="rfc.section.5.1.3.p.6">Depending on the testing strategy, it may be necessary to install the new configuration data in stages. This is discussed further below.</p>
<h1 id="rfc.section.5.1.4">
<a href="#rfc.section.5.1.4">5.1.4.</a> <a href="#testing" id="testing">Activation and Verification of All Behaviours</a>
</h1>
<p id="rfc.section.5.1.4.p.1">It is certainly not within the scope of this document to advise on testing strategy, which operators undoubtedly have well in hand. Quite possibly an operator will prefer an incremental approach to activation and testing. Implementing the PCN marking scheme at PCN-ingress-nodes, corresponding scheduling behaviour in downstream nodes, and re-marking at the PCN-egress-nodes is a large enough step in itself to require thorough testing before going further. </p>
<p id="rfc.section.5.1.4.p.2">Testing will probably involve the injection of packets at individual nodes and tracking of how the node processes them. This work can make use of the counter capabilities included in the Diffserv MIB. The application of these capabilities to the management of PCN is discussed in the next section.</p>
<h1 id="rfc.section.5.2">
<a href="#rfc.section.5.2">5.2.</a> <a href="#mgmt" id="mgmt">Management Considerations</a>
</h1>
<p id="rfc.section.5.2.p.1">This section focuses on the use of event logging and the use of counters supported by the Diffserv MIB <a href="#RFC3289">[RFC3289]</a> for the various monitoring tasks involved in management of a PCN network.</p>
<h1 id="rfc.section.5.2.1">
<a href="#rfc.section.5.2.1">5.2.1.</a> <a href="#evLogs" id="evLogs">Event Logging In the PCN Domain</a>
</h1>
<p id="rfc.section.5.2.1.p.1">It is anticipated that event logging using SYSLOG <a href="#RFC5424">[RFC5424]</a> will be needed for fault management and potentially for capacity management.  Implementations MUST be capable of generating logs for the following events: </p>

<ul>
<li>detection of loss of contact between a Decision Point and a PCN-edge-node, as described in <a href="#decisSig">Section 3.3.3</a>;</li>
<li>successful receipt of a report from a PCN-egress-node, following detection of loss of contact with that node;</li>
<li>flow termination events.</li>
</ul>

<p> All of these logs are generated by the Decision Point. There is a strong likelihood in the first and third cases that the events are correlated with network failures at a lower level. This has implications for how often specific event types should be reported, so as not to contribute unnecessarily to log buffer overflow. Recommendations on this topic follow for each event report type.  </p>
<h1 id="rfc.section.5.2.1.1">
<a href="#rfc.section.5.2.1.1">5.2.1.1.</a> <a href="#contactLog" id="contactLog">Logging Loss and Restoration of Contact</a>
</h1>
<p><a href="#decisSig">Section 3.3.3</a> describes the circumstances under which the Decision Point may determine that it has lost contact, either with a PCN-ingress-node or a PCN-egress-node, due to failure to receive an expected report. Loss of contact with a PCN-ingress-node is a case primarily applicable when the Decision Point is in a separate node. However, implementations MAY implement logging in the collocated case if the implementation is such that non-response to a request from the Decision Point function can occasionally occur due to processor load or other reasons.</p>
<p id="rfc.section.5.2.1.1.p.2">The log reporting the loss of contact with a PCN-egress-node MUST include the following content: </p>

<ul>
<li>The HOSTNAME field MUST identify the Decision Point issuing the log.</li>
<li>A STRUCTURED-DATA element MUST be present, containing parameters identifying the node for which an expected report has not been received and the type of report lost (ingress or egress). It is RECOMMENDED that the SD-ID for the STRUCTURED-DATA element have the form "PCNnode@nnn" (without the quotes, where nnn is the operator enterprise number as described in Section 6.3.2 of <a href="#RFC5424">[RFC5424]</a>). The node identifier PARAM-NAME is RECOMMENDED to be "ID" (without the quotes).  The identifier itself is subject to the preferences expressed in Section 6.2.4 of <a href="#RFC5424">[RFC5424]</a> for the HOSTNAME field. The report type PARAM-NAME is RECOMMENDED to be "RTyp" (without the quotes). The PARAM-VALUE for the RTyp field MUST be either "ingr" or "egr".</li>
</ul>

<p> </p>
<p id="rfc.section.5.2.1.1.p.3">The following values are also RECOMMENDED for the indicated fields in this log, subject to local practice: </p>

<ul>
<li>PRI initially set to 115, representing a Facility value of "log alert" and a Severity level of "Error Condition". Note that loss of contact with a PCN-egress-node implies that no new flows will be admitted to one or more ingress-egress-aggregates until contact is restored. The reason a higher severity level (lower value) is not proposed for the initial log is because any corrective action would probably be based on alerts at a lower subsystem level.</li>
<li>APPNAME set to "PCN" (without the quotes).</li>
<li>MSGID set to "LOST" (without the quotes).</li>
</ul>

<p> </p>
<p id="rfc.section.5.2.1.1.p.4">If contact is not regained with a PCN-egress-node in a reasonable period of time (say, one minute), the log SHOULD be repeated, this time with a PRI value of 113, implying a Severity value of "Alert: action must be taken immediately". The reasoning is that by this time, any more general conditions should have been cleared, and the problem lies specifically with the PCN-egress-node concerned and the PCN application in particular.</p>
<p id="rfc.section.5.2.1.1.p.5">Whenever a loss-of-contact log is generated for a PCN-egress-node, a log indicating recovery SHOULD be generated when the Decision Point next receives a report from the node concerned. The log SHOULD have the same content as just described for the loss-of-contact log, with the following differences: </p>

<ul>
<li>PRI changes to 117, indicating a Severity of "Notice: normal but significant condition".</li>
<li>MSGID changes to "RECVD" (without the quotes).</li>
</ul>

<p> </p>
<h1 id="rfc.section.5.2.1.2">
<a href="#rfc.section.5.2.1.2">5.2.1.2.</a> <a href="#termLog" id="termLog">Logging Flow Termination Events</a>
</h1>
<p><a href="#decisTerm">Section 3.3.2</a> describes the process whereby the Decision Point decides that flow termination is required for a given ingress-egress-aggregate, calculates how much flow to terminate, and selects flows for termination. This section describes a log that SHOULD be generated each time such an event occurs. (In the case where termination occurs in multiple rounds, one log SHOULD be generated per round.) The log may be useful in fault management, to indicate the service impact of a fault occuring in a lower-level subsystem. In the absence of network failures, it may also be used as an indication of an urgent need to review capacity utilization along the path of the ingress-egress-aggregate concerned.</p>
<p id="rfc.section.5.2.1.2.p.2">The log reporting a flow termination event MUST include the following content: </p>

<ul>
<li>The HOSTNAME field MUST identify the Decision Point issuing the log.</li>
<li>A STRUCTURED-DATA element MUST be present, containing parameters identifying the ingress and egress nodes for the ingress-egress-aggregate concerned, indicating the total amount of flow being terminated, and giving the number of flows terminated to achieve that objective.  [***PTT***: identifying the flows could be helpful for complaint follow-up, but I'm worried about the size of the resulting log.] <br><br> It is RECOMMENDED that the SD-ID for the STRUCTURED-DATA element have the form: "PCNterm@nnn" (without the quotes, where nnn is the operator enterprise number as described in Section 6.3.2 of <a href="#RFC5424">[RFC5424]</a>).  The parameter identifying the ingress node for the ingress-egress-aggregate is RECOMMENDED to have PARAM-NAME "IngrID" (without the quotes). This parameter MAY be omitted if the Decision Point is collocated with that PCN-ingress-node. The parameter identifying the egress node for the ingress-egress-aggregate is RECOMMENDED to have PARAM-NAME "EgrID" (without the quotes). Both identifiers are subject to the preferences expressed in Section 6.2.4 of <a href="#RFC5424">[RFC5424]</a> for the HOSTNAME field.  <br><br> The parameter giving the total amount of flow being terminated is RECOMMENDED to have PARAM-NAME "TermRate" (without the quotes). The PARAM-VALUE MUST be the target rate as calculated according to the procedures of <a href="#decisTerm">Section 3.3.2</a>, as an integer value in millions of octets per second. The parameter giving the number of flows selected for termination is RECOMMENDED to have PARAM-NAME "FCnt" (without the quotes). The PARAM-VALUE for this parameter MUST be an integer, the number of flows selected.  </li>
</ul>

<p> </p>
<p id="rfc.section.5.2.1.2.p.3">The following values are also RECOMMENDED for the indicated fields in this log, subject to local practice: </p>

<ul>
<li>PRI initially set to 116, representing a Facility value of "log alert" and a Severity level of "Warning: warning conditions". </li>
<li>APPNAME set to "PCN" (without the quotes).</li>
<li>MSGID set to "TERM" (without the quotes).</li>
</ul>

<p> </p>
<h1 id="rfc.section.5.2.2">
<a href="#rfc.section.5.2.2">5.2.2.</a> <a href="#counters" id="counters">Provision and Use of Counters</a>
</h1>
<p id="rfc.section.5.2.2.p.1">The Diffserv MIB <a href="#RFC3289">[RFC3289]</a> allows for the provision of counters along the various possible processing paths associated with an interface and flow direction. It is RECOMMENDED that the PCN-nodes be instrumented as described below. It is assumed that the cumulative counts so obtained will be collected periodically for use in debugging, fault management, and capacity management. </p>
<p id="rfc.section.5.2.2.p.2">PCN-ingress-nodes SHOULD provide the following counts for each ingress-egress-aggregate. Since the Diffserv MIB installs counters by interface and direction, aggregation of counts over multiple interfaces may be necessary to obtain total counts by ingress-egress-aggregate. It is expected that such aggregation will be performed by a central system rather than at the PCN-ingress-node.  </p>

<ul>
<li>total PCN packets and octets received for that ingress-egress-aggregate but dropped;</li>
<li>total PCN packets and octets admitted to that aggregate.</li>
</ul>

<p> </p>
<p id="rfc.section.5.2.2.p.3">PCN-interior-nodes SHOULD provide the following counts for each interface, noting that a given packet MUST NOT be counted more than once as it passes through the node: </p>

<ul>
<li>total PCN packets and octets dropped;</li>
<li>total PCN packets and octets forwarded without re-marking;</li>
<li>[CL-specific] total PCN packets and octets re-marked to Threshold-Marked;</li>
<li>total PCN packets and octets re-marked to Excess-Traffic-Marked.</li>
</ul>

<p> </p>
<p id="rfc.section.5.2.2.p.4">PCN-egress-nodes SHOULD provide the following counts for each ingress-egress-aggregate. As with the PCN-ingress-node, so with the PCN-egress-node it is expected that any necessary aggregation over multiple interfaces will be done by a central system.  </p>

<ul>
<li>total Not-Marked PCN packets and octets received;</li>
<li>[CL-specific] total Threshold-Marked PCN packets and octets received;</li>
<li>total Excess-Traffic-Marked PCN packets and octets received.</li>
</ul>

<p> </p>
<p id="rfc.section.5.2.2.p.5">The following continuously cumulative counters SHOULD be provided as indicated, but require new MIBs to be defined. If the Decision Point is not collocated with the PCN-ingress-node, the latter SHOULD provide a count of the number of requests for PCN-sent-rate received from the Decision Point and the number of responses returned to the Decision Point. The PCN-egress-node SHOULD provide a count of the number of reports sent to each Decision Point. Each Decision Point SHOULD provide the following: </p>

<ul>
<li>total number of requests for PCN-sent-rate sent to each PCN-ingress-node with which it is not collocated;</li>
<li>total number of reports received from each PCN-egress-node;</li>
<li>total number of loss-of-contact events detected for each PCN-boundary-node;</li>
<li>total cumulative duration of "block" state in hundreds of milliseconds for each ingress-egress-aggregate;</li>
<li>total number of rounds of flow termination exercised for each ingress-egress-aggregate.</li>
</ul>

<p> </p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#secur" id="secur">Security Considerations</a>
</h1>
<p><a href="#RFC5559">[RFC5559]</a> provides a general description of the security considerations for PCN. This memo introduces no new considerations.</p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#iana" id="iana">IANA Considerations</a>
</h1>
<p id="rfc.section.7.p.1">This memo includes no request to IANA.</p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#Acknowledgements" id="Acknowledgements">Acknowledgements</a>
</h1>
<p id="rfc.section.8.p.1">The content of this memo bears a family resemblance to <a href="#ID.briscoe-CL">[ID.briscoe-CL]</a>. The authors of that document were Bob Briscoe, Philip Eardley, and Dave Songhurst of BT, Anna Charny and Francois Le Faucheur of Cisco, Jozef Babiarz, Kwok Ho Chan, and Stephen Dudley of Nortel, Giorgios Karagiannis of U. Twente and Ericsson, and Attila Bader and Lars Westberg of Ericsson.</p>
<p id="rfc.section.8.p.2">Ruediger Geib, Philip Eardley, and Bob Briscoe have helped to shape the present document with their comments. Toby Moncaster gave a careful review to get it into shape for Working Group Last Call.</p>
<p id="rfc.section.8.p.3">Amongst the authors, Michael Menth deserves special mention for his constant and careful attention to both the technical content of this document and the manner in which it was expressed.</p>
<p id="rfc.section.8.p.4">Finally, David Harrington's careful AD review resulted not only in necessary changes throughout the document, but also the addition of the operations and management considerations (<a href="#opsConsid">Section 5</a>).</p>
<h1 id="rfc.references">
<a href="#rfc.references">9.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">9.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2474">[RFC2474]</b></td>
<td class="top">
<a href="mailto:kmn@cisco.com" title="Cisco Systems">Nichols, K.</a>, <a href="mailto:slblake@torrentnet.com" title="Torrent Networking Technologies">Blake, S.</a>, <a href="mailto:fred@cisco.com" title="Cisco Systems">Baker, F.</a> and <a href="mailto:black_david@emc.com" title="EMC Corporation">D.L. Black</a>, "<a href="http://tools.ietf.org/html/rfc2474">Definition of the Differentiated Services Field (DS Field) in the IPv4 and IPv6 Headers</a>", RFC 2474, December 1998.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2475">[RFC2475]</b></td>
<td class="top">
<a href="mailto:slblake@torrentnet.com" title="Torrent Networking Technologies">Blake, S.</a>, <a href="mailto:black_david@emc.com" title="EMC Corporation">Black, D.L.</a>, <a href="mailto:mark.carlson@sun.com" title="Sun Microsystems, Inc.">Carlson, M.A.</a>, <a href="mailto:elwynd@nortel.co.uk" title="Nortel UK">Davies, E.</a>, <a href="mailto:zhwang@bell-labs.com" title="Bell Labs Lucent Technologies">Wang, Z.</a> and <a href="mailto:wweiss@lucent.com" title="Lucent Technologies">W. Weiss</a>, "<a href="http://tools.ietf.org/html/rfc2475">An Architecture for Differentiated Services</a>", RFC 2475, December 1998.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3086">[RFC3086]</b></td>
<td class="top">
<a>Nichols, K.</a> and <a>B. Carpenter</a>, "<a href="http://tools.ietf.org/html/rfc3086">Definition of Differentiated Services Per Domain Behaviors and Rules for their Specification</a>", RFC 3086, April 2001.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3289">[RFC3289]</b></td>
<td class="top">
<a>Baker, F.</a>, <a>Chan, K.</a> and <a>A. Smith</a>, "<a href="http://tools.ietf.org/html/rfc3289">Management Information Base for the Differentiated Services Architecture</a>", RFC 3289, May 2002.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5424">[RFC5424]</b></td>
<td class="top">
<a>Gerhards, R.</a>, "<a href="http://tools.ietf.org/html/rfc5424">The Syslog Protocol</a>", RFC 5424, March 2009.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5559">[RFC5559]</b></td>
<td class="top">
<a>Eardley, P.</a>, "<a href="http://tools.ietf.org/html/rfc5559">Pre-Congestion Notification (PCN) Architecture</a>", RFC 5559, June 2009.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5670">[RFC5670]</b></td>
<td class="top">
<a>Eardley, P.</a>, "<a href="http://tools.ietf.org/html/rfc5670">Metering and Marking Behaviour of PCN-Nodes</a>", RFC 5670, November 2009.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5696">[RFC5696]</b></td>
<td class="top">
<a>Moncaster, T.</a>, <a>Briscoe, B.</a> and <a>M. Menth</a>, "<a href="http://tools.ietf.org/html/rfc5696">Baseline Encoding and Transport of Pre-Congestion Information</a>", RFC 5696, November 2009.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">9.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC4594">[RFC4594]</b></td>
<td class="top">
<a>Babiarz, J.</a>, <a>Chan, K.</a> and <a>F. Baker</a>, "<a href="http://tools.ietf.org/html/rfc4594">Configuration Guidelines for DiffServ Service Classes</a>", RFC 4594, August 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC6040">[RFC6040]</b></td>
<td class="top">
<a>Briscoe, B.</a>, "<a href="http://tools.ietf.org/html/rfc6040">Tunnelling of Explicit Congestion Notification</a>", RFC 6040, November 2010.</td>
</tr>
<tr>
<td class="reference"><b id="ID.briscoe-CL">[ID.briscoe-CL]</b></td>
<td class="top">
<a title="BT &amp; UCL">Briscoe, B.</a>, "<a>An edge-to-edge Deployment Model for Pre-Congestion Notification: Admission Control over a DiffServ Region (expired Internet Draft)</a>", 2006.</td>
</tr>
<tr>
<td class="reference"><b id="MeLe10">[MeLe10]</b></td>
<td class="top">
<a title="U. Tuebingen">Menth, M.</a> and <a title="U. Wuerzburg">F. Lehrieder</a>, "<a>PCN-Based Measured Rate Termination</a>", Computer Networks Journal (Elsevier) vol. 54, no. 13, pages 2099 - 2116, September 2010.</td>
</tr>
<tr>
<td class="reference"><b id="RFCyyyy">[RFCyyyy]</b></td>
<td class="top">
<a title="Cisco">Charny, A.</a>, <a title="Cisco">Zhang, J.</a>, <a title="U. Twente">Karagiannis, G.</a>, <a title="U. Wuerzburg">Menth, M.</a> and <a title="Huawei Technologies">T. Taylor</a>, "<a>PCN Boundary Node Behaviour for the Single Marking (SM) Mode of Operation (Work in progress)</a>", December 2010.</td>
</tr>
<tr>
<td class="reference"><b id="IEEE-Satoh">[IEEE-Satoh]</b></td>
<td class="top">
<a title="NTT-AT">Satoh, D.</a> and <a title="NTT-AT">H. Ueno</a>, "<a>"Cause and Countermeasure of Overtermination for PCN-Based Flow Termination", Proceedings of IEEE Symposium on Computers and Communications (ISCC '10), pp. 155-161, Riccione, Italy</a>", June 2010.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.tsvwg-rsvp-pcn">[I-D.tsvwg-rsvp-pcn]</b></td>
<td class="top">
<a title="University of Twente">Karagiannis, G.</a> and <a title="Cisco Systems, Inc.">A. Bhargava</a>, "<a>Generic Aggregation of Resource ReSerVation Protocol (RSVP) for IPv4 And IPv6 Reservations over PCN domains</a>", July 2011.</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Anna Charny</span> 
	  <span class="n hidden">
		<span class="family-name">Charny</span>
	  </span>
	</span>
	<span class="org vcardline">Cisco Systems</span>
	<span class="adr">
	  <span>300 Apollo Drive</span>

	  <span class="vcardline">
		<span class="locality">Chelmsford</span>,  
		<span class="region">MA</span> 
		<span class="code">01824</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:acharny@cisco.com">acharny@cisco.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Fortune Huang</span> 
	  <span class="n hidden">
		<span class="family-name">Huang</span>
	  </span>
	</span>
	<span class="org vcardline">Huawei Technologies</span>
	<span class="adr">
	  <span>Section F, Huawei Industrial Base, </span>

	  <span class="vcardline">
		<span class="locality">Bantian Longgang</span>,  
		<span class="region">Shenzhen</span> 
		<span class="code">518129</span>
	  </span>
	  <span class="country-name vcardline">P.R. China</span>
	</span>
	<span class="vcardline">Phone: +86 15013838060</span>

<span class="vcardline">EMail: <a href="mailto:fqhuang@huawei.com">fqhuang@huawei.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Georgios Karagiannis</span> 
	  <span class="n hidden">
		<span class="family-name">Karagiannis</span>
	  </span>
	</span>
	<span class="org vcardline">U. Twente</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:karagian@cs.utwente.nl">karagian@cs.utwente.nl</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Michael Menth</span> 
	  <span class="n hidden">
		<span class="family-name">Menth</span>
	  </span>
	</span>
	<span class="org vcardline">University of Tuebingen</span>
	<span class="adr">
	  <span>Sand 13</span>

	  <span class="vcardline">
		<span class="locality">Tuebingen</span>,  
		<span class="region"></span>
		<span class="code">D-72076</span>
	  </span>
	  <span class="country-name vcardline">Germany</span>
	</span>
	<span class="vcardline">Phone: +49-7071-2970505</span>

<span class="vcardline">EMail: <a href="mailto:menth@informatik.uni-tuebingen.de">menth@informatik.uni-tuebingen.de</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Tom Taylor</span> editor
	  <span class="n hidden">
		<span class="family-name">Taylor</span>
	  </span>
	</span>
	<span class="org vcardline">Huawei Technologies</span>
	<span class="adr">
	  <span>1852 Lorraine Ave</span>

	  <span class="vcardline">
		<span class="locality">Ottawa</span>,  
		<span class="region">Ontario</span> 
		<span class="code">K1H 6Z8</span>
	  </span>
	  <span class="country-name vcardline">Canada</span>
	</span>
	<span class="vcardline">Phone: +1 613 680 2675</span>

<span class="vcardline">EMail: <a href="mailto:tom111.taylor@bell.net">tom111.taylor@bell.net</a></span>

  </address>
</div>

</body>
</html>