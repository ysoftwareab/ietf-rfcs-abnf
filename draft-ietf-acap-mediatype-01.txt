

Network Working Group                                          C. Newman
Internet-Draft                                          Sun Microsystems
Expires: June 24, 2003                                       A. Melnikov
                                           ACI Worldwide/MessagingDirect
                                                       December 24, 2002


                     ACAP Media Type Dataset Class
                    draft-ietf-acap-mediatype-01.txt

Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as
   Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at http://
   www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on June 24, 2003.

Copyright Notice

   Copyright (C) The Internet Society (2002).  All Rights Reserved.

Abstract

   With the definition of standardized media types in MIME it has become
   necessary to keep mapping tables which translate between the standard
   media type names, commonly used file name extensions, any platform
   specific typing mechanism, and helper applications to view, compose,
   edit or print media types.  Supplying a set of site defaults is
   useful so that users won't have to configure well-known types.  The
   mailcap mechanism provides some of this functionality in a
   homogeneous environment with a shared file system, and both the
   Macintosh program "Internet Config" and the Windows Registry have had
   some success in consolidating these tables for multiple applications



Newman & Melnikov        Expires June 24, 2003                  [Page 1]

Internet-Draft       ACAP Media Type Dataset Class         December 2002


   on a single machine.  But neither of these addresses the problems of
   multi-platform users or a heterogeneous environment.

   Application Configuration Access Protocol (ACAP) provides appropriate
   facilities for this need.  ACAP's dataset structure is extensible and
   ACAP's inheritance feature provides for enterprise default settings
   with per-user customization.  This memo defines an ACAP dataset class
   for media type mapping tables.

Table of Contents

   1.    Conventions used in this document  . . . . . . . . . . . . .  3
   2.    Introduction . . . . . . . . . . . . . . . . . . . . . . . .  3
   3.    ACAP Media Type Dataset Class  . . . . . . . . . . . . . . .  3
   3.1   ACAP Media Type Dataset Class Prefix . . . . . . . . . . . .  3
   3.2   ACAP Media Type Dataset Hierarchy  . . . . . . . . . . . . .  3
   4.    Recommended ACAP Media Type Attributes . . . . . . . . . . .  3
   4.1   Basic Attributes . . . . . . . . . . . . . . . . . . . . . .  4
   4.2   System Independent Attributes  . . . . . . . . . . . . . . .  4
   4.3   MacOS Attributes . . . . . . . . . . . . . . . . . . . . . .  7
   4.4   Unix Attributes  . . . . . . . . . . . . . . . . . . . . . .  9
   4.5   Microsoft Windows Attributes . . . . . . . . . . . . . . . . 12
   4.5.1 Mapping MediaTypes to Windows Registry . . . . . . . . . . . 15
   5.    Usage Procedures . . . . . . . . . . . . . . . . . . . . . . 15
   6.    Examples . . . . . . . . . . . . . . . . . . . . . . . . . . 17
   7.    Security Considerations  . . . . . . . . . . . . . . . . . . 17
   8.    IANA Considerations  . . . . . . . . . . . . . . . . . . . . 18
         Normative References . . . . . . . . . . . . . . . . . . . . 18
         Informative References . . . . . . . . . . . . . . . . . . . 19
         Authors' Addresses . . . . . . . . . . . . . . . . . . . . . 19
         Index  . . . . . . . . . . . . . . . . . . . . . . . . . . . 20
         Intellectual Property and Copyright Statements . . . . . . . 22



















Newman & Melnikov        Expires June 24, 2003                  [Page 2]

Internet-Draft       ACAP Media Type Dataset Class         December 2002


1. Conventions used in this document

   The key words "MUST", "MUST NOT", "SHOULD", "SHOULD NOT", and "MAY"
   in this document are to be interpreted as defined in "Key words for
   use in RFCs to Indicate Requirement Levels" [3].

   The attribute syntax specifications use the Augmented Backus-Naur
   Form (ABNF) [5] notation including rules from ACAP [6].

2. Introduction

   With the definition of standardized media types in MIME [2] it has
   become necessary to keep mapping tables which translate between the
   standard media type names, commonly used file name extensions, any
   platform specific typing mechanism, and helper applications to view,
   compose, edit or print media types.  Supplying a set of site defaults
   is useful so that users won't have to configure well-known types.
   The mailcap [8] mechanism provides some of this functionality in a
   homogeneous environment with a shared file system, and both the
   Macintosh program "Internet Config" and the Windows Registry have had
   some success in consolidating these tables for multiple applications
   on a single machine.  But neither of these addresses the problems of
   multi-platform users or a heterogeneous environment.

   ACAP [6] provides appropriate facilities for this need.  ACAP's
   dataset structure is extensible and ACAP's inheritance feature
   provides for enterprise default settings with per-user customization.

3. ACAP Media Type Dataset Class

3.1 ACAP Media Type Dataset Class Prefix

   Datasets whose names begin with "/mediatype" are assumed to contain
   mediatype entries as defined in this specification.

3.2 ACAP Media Type Dataset Hierarchy

   Each user may have a set of named media type profiles for use on
   different hosts.  The default is "default" and is referenced with the
   path "/mediatype/user/<username>/default/".  Inheritance is likely to
   be useful both for inheriting site or group defaults as well as for
   inheriting the default configuration when using different hosts.

4. Recommended ACAP Media Type Attributes

   A mediatype entry MUST have an "entry" attribute.  All other
   attributes are OPTIONAL.




Newman & Melnikov        Expires June 24, 2003                  [Page 3]

Internet-Draft       ACAP Media Type Dataset Class         December 2002


   The ABNF defines the content of the attribute values prior to their
   encoding as an ACAP string.  Clients MUST conform to the syntax when
   generating these attributes, but MUST NOT assume that the attribute
   values will conform to this syntax on access.  Servers SHOULD NOT
   enforce the syntax.

   The OS-specific entries define a number of basic actions which may be
   performed on a media type.  The intention is that additional actions
   may be added in the future following the same template as the
   existing actions.

4.1 Basic Attributes

   These attributes are defined in ACAP [6] and have meaning in all
   dataset classes.  This section describes how they are used in a
   mediatype dataset.

   entry

      The "entry" attribute is used to hold a short descriptive name of
      the media type.  This name is used for inheritance, so when
      customizing a media type which has an entry in an inherited
      dataset, the entry name needs to remain the same.

   subdataset

      The "subdataset" attribute indicates there is another media type
      dataset underneath this entry.


4.2 System Independent Attributes

   These attributes are likely to have meaning for all ACAP clients.

   mediatype.common.type

      This contains the MIME media type [2] of the entry.  New MIME
      media types are registered according to the MIME registration
      procedures [11].

      The ABNF terminals type and subtype are defined in MIME Internet
      Message Bodies [1].  Free insertion of linear-white-space is not
      permitted in this grammar.








Newman & Melnikov        Expires June 24, 2003                  [Page 4]

Internet-Draft       ACAP Media Type Dataset Class         December 2002


      A subtype of "*" indicates a catch-all entry for a type.  Clients
      SHOULD check for a catch-all entry after checking for a regular
      entry.  Catch-all entries are used only for locating a helper
      application, so the extension attributes SHOULD be NIL.

      mtype-typenam  = type "/" mtype-subtype

      mtype-subtype  = subtype / "*"

   mediatype.common.param.<MIME-attribute>

      This contains a MIME parameter for the entry.  For example, there
      might be multiple entries for text media types with different
      charset parameters.  The <MIME-attribute> portion of the attribute
      name matches the ABNF for the "attribute" rule in [1] but MUST be
      all lower case.  MIME parameter value encodings [4] SHOULD be
      decoded prior to use of these attributes.

      mtype-param    = *UTF8-CHAR

   mediatype.common.extension

      This contains the primary file name extension used with this media
      type.  Extensions should be converted to lower case to simplify
      searching.  The leading "." before an extension is not included in
      this attribute value.

      mtype-ext      = 1*ATOM-CHAR

   mediatype.common.extensionOther

      This is a multi-valued attribute which contains additional file
      name extension(s) that are commonly associated with this media
      type.  For example, with JPEG files (image/jpeg), a number of
      extensions have been observed: "jpg", "jpeg", "jfif", "jpe" and
      "jfi".  Extensions should be converted to lower case to simplify
      searching.

      mtype-extother = 1*ATOM-CHAR

   mediatype.common.magicNumber.bin

      This contains the magic number(s) of the media type.  A magic
      number is a set of octets at the beginning of the file which are
      always the same for that media type.  For example, all image/gif
      objects begin with the four-octet sequence (71, 73, 70, 56 or
      "GIF8").  As this is a binary field, it may contain any octet
      value including 0.  This can be used to attempt to locate a type



Newman & Melnikov        Expires June 24, 2003                  [Page 5]

Internet-Draft       ACAP Media Type Dataset Class         December 2002


      for an untyped file.

      mtype-magic    = 1*OCTET

   mediatype.common.textualNewlines

      If this is "1" it indicates that the media type is line oriented
      and subject to newline canonicalization.  If this is "0" it
      indicates newlines should be preserved.  If NIL, the client should
      default this to "0" for non-text types and "1" for text types.

      mtype-text     = "0" / "1"

   mediatype.common.description

      This is a longer textual description of the mediatype.  Newlines
      are represented by a CRLF sequence.

      mtype-desc     = *UTF8-CHAR

   mediatype.common.suppressWarning

      If this is "1" then no security warnings will be issued to the
      user on any platform.  Values other than "1" SHOULD be treated as
      equivalent to NIL.

      mtype-suppress = "0" / "1"

   mediatype.common.preferred

      If this is "1" it indicates that this is the preferred entry for a
      media type with multiple entries.  If this is "0", it indicates
      this is not the preferred entry.  NIL indicates an unspecified
      preference.  For example, the "text/plain" media type may be used
      to represent multiple file types including plain text and C source
      files.  Thus there can be multiple text/plain entries in the
      mediatypes list and this attribute is used to identify which one
      to use by preference when a single choice must be made.  As ACAP
      does not enforce uniqueness of this attribute, software which uses
      this attribute needs a strategy to deal with multiple preferred
      types, such as choosing the type whose "entry" appears first using
      the client's comparator preference.

      mtype-preferred = "0" / "1"







Newman & Melnikov        Expires June 24, 2003                  [Page 6]

Internet-Draft       ACAP Media Type Dataset Class         December 2002


   mediatype.common.MIME

      If this is a "1" it indicates the type is represented as a MIME
      entity (including headers) rather than as a MIME body.  If this is
      "0", it indicates the type is represented only as a MIME body.  If
      this is NIL, the client should treat it as  "0" for non-multipart
      types and "1" for multipart types.  Action-specific ".MIME"
      attributes take precedence over this when they are non-NIL.

      mtype-mime      = "0" / "1"


4.3 MacOS Attributes

   These are attributes which apply to MacOS systems.

   mediatype.macOS.type.bin

      This contains the 4-octet MacOS type code for this media type.

      mtype-mactype   = 4OCTET

   mediatype.macOS.creator.bin

      This contains the 4-octet MacOS creator code which the user
      prefers for use with documents of this type.

      mtype-maccreat  = 4OCTET

   mediatype.macOS.creator.name

      This contains the name of the application whose creator code is
      stored in mediatype.macOS.creator.bin.  This value MUST be UTF-8
      and not in another MacOS script or character set.

      mtype-maccname  = 1*UTF8-CHAR

   mediatype.macOS.creator.suppressWarning

      If this is "1", it indicates a preference to suppress any security
      warnings for this media type when launching the application
      referenced by the creator code.  Values other than "1" SHOULD be
      treated as equivalent to NIL.

      mtype-maccsuppress = "0" / "1"






Newman & Melnikov        Expires June 24, 2003                  [Page 7]

Internet-Draft       ACAP Media Type Dataset Class         December 2002


   mediatype.macOS.action.postProcess.bin

      This contains the 4-octet MacOS creator code of an application
      which the user wishes to use when post-processing documents of
      this type.  If NIL, then no post-processing is required.  This is
      primarily used for encapsulating formats such as application/
      applefile.

      mtype-macpost   = 4OCTET

   mediatype.macOS.action.postProcess.name

      This contains the filename of the application whose creator code
      is stored in mediatype.macOS.postProcess.bin.  This value MUST be
      UTF-8 and not in another MacOS script or character set.

      mtype-macpname  = 1*UTF8-CHAR

   mediatype.macOS.action.postProcess.MIME

      If this is "1", it indicates that the post processor takes a MIME
      entity (with MIME headers) as input, rather than just a body part.

      mtype-macmime   = "0" / "1"

   mediatype.macOS.action.edit.bin

      This contains the 4-octet MacOS creator code of an application
      which the user wishes to use when editing documents of this type.
      If NIL, then the application referenced by the creator code is
      used.

      mtype-macpost   = 4OCTET

   mediatype.macOS.action.edit.name

      This contains the filename of the application whose creator code
      is stored in mediatype.macOS.edit.bin.  This value MUST be UTF-8
      and not in another MacOS script or character set.

      mtype-macpname  = 1*UTF8-CHAR

   mediatype.macOS.action.edit.MIME

      If this is "1", it indicates that the editor takes a MIME entity
      (with MIME headers) as input, rather than just a body part.

      mtype-macemime  = "0" / "1"



Newman & Melnikov        Expires June 24, 2003                  [Page 8]

Internet-Draft       ACAP Media Type Dataset Class         December 2002


   mediatype.macOS.action.edit.suppressWarning

      If this is "1", it indicates a preference to suppress any security
      warnings for this media type when launching the application
      referenced by the mediatype.macOS.action.edit attribute.  Values
      other than "1" SHOULD be treated as equivalent to NIL.

      mtype-maccsuppress = "0" / "1"

   mediatype.macOS.action.edit.alwaysUseHelper

      If this is "1", it states a user preference to use the specified
      helper application rather than any internal viewer contained in
      the dispatching application.

      mtype-macalways = "0" / "1"

   mediatype.macOS.stripResource

      If this is "1", it indicates a preference to strip the resource
      fork from this media type prior to transmission.

      mtype-macstripres = "0" / "1"


4.4 Unix Attributes

   These attributes are used to launch Unix helper applications similar
   to the mailcap [8] mechanism.

   When a client executes a Unix command line helper it runs under the
   Bourne shell (usually by using the system() function call).  Prior to
   execution, the client SHOULD perform the following substitutions into
   the command line: the string "%s" is replaced by a temporary file
   name for the body part or MIME part (if %s is absent, the body part
   or MIME part is passed through standard input).  The string "%t" is
   replaced by the media type and subtype, the string "%{<param>}" is
   replaced by the media type parameter with name <param>.  The
   character "%" is quoted with "\%".  By default, multi-part types are
   left intact with MIME headers prior to dispatching.  A dispatching
   application MAY support the %n and %F options of mailcap [8] for
   backwards compatibility.

   mediatype.unix.action.view

      This contains a command to execute a viewer for the media type.

      mtype-unixview  = *UTF8-CHAR



Newman & Melnikov        Expires June 24, 2003                  [Page 9]

Internet-Draft       ACAP Media Type Dataset Class         December 2002


   mediatype.unix.action.view.MIME

      If this is non-NIL it indicates that the viewer uses MIME entities
      (with complete headers) rather than body parts.

      mtype-unixvmime = "0" / "1"

   mediatype.unix.action.view.suppressWarning

      If this is "1", it indicates a preference to suppress any security
      warnings for this media type when launching the viewer.  Values
      other than "1" SHOULD be treated as equivalent to NIL.

      mtype-unixvsuppress = "0" / "1"

   mediatype.unix.action.view.output

      This indicates any output assistance which the viewer command
      needs.  The "terminal" option indicates an interactive terminal is
      needed and the dispatcher should create a terminal window or the
      equivalent.  The "pager" option indicates the output may be more
      than 24 lines and the viewer does not have a built-in pager.

      mtype-unixout   = "terminal" / "pager"

   mediatype.unix.action.compose

      This contains a command to execute a program to compose a new body
      part of the specified media type.  If not set, it is assumed to be
      the same as mediatype.unix.editor.

      mtype-unixcomp  = *UTF8-CHAR

   mediatype.unix.action.compose.MIME

      If this is non-NIL it indicates that the composer uses MIME
      entities (with complete headers) rather than body parts.

      mtype-unixcmime = "0" / "1"

   mediatype.unix.action.edit

      This contains a command to execute a program to edit body parts of
      the specified media type.  If not set, it is assumed to be the
      same as mediatype.unix.view.

      mtype-unixedit  = *UTF8-CHAR




Newman & Melnikov        Expires June 24, 2003                 [Page 10]

Internet-Draft       ACAP Media Type Dataset Class         December 2002


   mediatype.unix.action.edit.MIME

      If this is non-NIL it indicates that the editor uses MIME entities
      (with complete headers) rather than body parts.

      mtype-unixemime = "0" / "1"

   mediatype.unix.action.edit.suppressWarning

      If this is "1", it indicates a preference to suppress any security
      warnings for this media type when launching the viewer.  Values
      other than "1" SHOULD be treated as equivalent to NIL.

      mtype-unixesuppress = "0" / "1"

   mediatype.unix.action.print

      This contains a command to print a body part of the specified
      type.

      mtype-unixprint = *UTF8-CHAR

   mediatype.unix.action.print.MIME

      If this is non-NIL it indicates that the print command uses MIME
      entities (with complete headers) rather than body parts.

      mtype-unixpmime = "0" / "1"

   mediatype.unix.action.print.suppressWarning

      If this is "1", it indicates a preference to suppress any security
      warnings for this media type when launching the viewer.  Values
      other than "1" SHOULD be treated as equivalent to NIL.

      mtype-unixpsuppress = "0" / "1"

   mediatype.unix.alwaysUseHelper

      If this is non-NIL, it states a user preference to use the
      specified helper application rather than any internal viewer
      contained in the dispatching application.

      mtype-unixalways = "0" / "1"







Newman & Melnikov        Expires June 24, 2003                 [Page 11]

Internet-Draft       ACAP Media Type Dataset Class         December 2002


4.5 Microsoft Windows Attributes

   These attributes are used to launch Windows helper applications.

   Prior to execution of the action attributes, the client MUST perform
   the following substitutions into the command line:

   The strings "%r" and "%p" are replaced by the Windows System
   Directory and the Program Files Directory respectively (The Program
   Files Directory name can be obtained from the registry key
   "HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion"
   attribute "ProgramFilesDir").

   The string "%s" is replaced by a temporary file name for the body
   part or MIME part (if %s is absent, the body part or MIME part is
   passed through standard input).

   The string "%t" is replaced by the media type and subtype, the string
   "%{<param>}" is replaced by the media type parameter with name
   <param>.  The character "%" is quoted with "\%".  By default,
   multi-part types are left intact with MIME headers prior to
   dispatching.

   In order to simplify configuration of multiple PCs %r and %p are used
   instead of explicit directory names, because different PCs may store
   the Windows System Directory on different drives.

   For example it is better to use "%r\system32\notepad.exe" instead of
   "E:\WinNT\system32\notepad.exe", where %r is equal to "E:\WinNT" on a
   specific PC.

   mediatype.win32.action.view

      This contains a command to execute a viewer for the media type.

      mtype-win32view = *UTF8-CHAR

   mediatype.win32.action.view.suppressWarning

      If this is "1", it indicates a preference to suppress any security
      warnings for this media type when launching the viewer.  Values
      other than "1" SHOULD be treated as equivalent to NIL.

      mtype-win32vsuppress = "0" / "1"







Newman & Melnikov        Expires June 24, 2003                 [Page 12]

Internet-Draft       ACAP Media Type Dataset Class         December 2002


   mediatype.win32.action.view.MIME

      If this is "1" then it indicates that the viewer uses MIME
      entities (with complete headers) rather than body parts.

      mtype-win32vmime = "0" / "1"

   mediatype.win32.action.compose

      This contains a command to execute a program to compose a new body
      part of the specified media type.  If not set, it is assumed to be
      the same as mediatype.win32.action.edit.

      mtype-win32comp = *UTF8-CHAR

   mediatype.win32.action.compose.MIME

      This contains a command to execute a program to compose a new body
      part of the specified media type.  If not set, it is assumed to be
      the same as mediatype.win32.editor.

      mtype-win32cmime = "0" / "1"

   mediatype.win32.action.edit

      This contains a command to execute a program to edit body parts of
      the specified media type.  If not set, it is assumed to be the
      same as mediatype.win32.action.view.

      mtype-win32edit = *UTF8-CHAR

   mediatype.win32.action.edit.suppressWarning

      If this is "1", it indicates a preference to suppress any security
      warnings for this media type when editing the media type.  Values
      other than "1" SHOULD be treated as equivalent to NIL.

      mtype-win32editSup = "0" / "1"

   mediatype.win32.action.edit.MIME

      If this is "1" then the data will be sent as a MIME entity
      (including the MIME headers) rather than as just the body part.

      mtype-win32editMIME = "0" / "1"






Newman & Melnikov        Expires June 24, 2003                 [Page 13]

Internet-Draft       ACAP Media Type Dataset Class         December 2002


   mediatype.win32.action.print

      This contains a command to print a body part of the specified
      media type.

      mtype-win32print = *UTF8-CHAR

   mediatype.win32.action.print.suppressWarning

      If this is "1", it indicates a preference to suppress any security
      warnings for this media type when printing the media type.  Values
      other than "1" SHOULD be treated as equivalent to NIL.

      mtype-win32printSup = "0" / "1"

   mediatype.win32.action.print.MIME

      If this is "1" then the data will be sent as a MIME entity
      (including the MIME headers) rather than as just the body part.

      mtype-win32printMIME = "0" / "1"

   mediatype.win32.alwaysUseHelper

      If this is non-NIL, it states a user preference to use the
      specified helper application rather than any internal viewer
      contained in the dispatching application.

      mtype-win32always   = "0" / "1"

   mediatype.win32.icon

      If this is non-NIL, it contains a path and index to an icon
      representing the media type.  An ACAP client MAY use local
      information in preference to this attribute.

      mtype-win32icon     = *UTF8-CHAR "," number
                   ; file name and zero based index of icon in this file













Newman & Melnikov        Expires June 24, 2003                 [Page 14]

Internet-Draft       ACAP Media Type Dataset Class         December 2002


4.5.1 Mapping MediaTypes to Windows Registry

   Many of the attributes in this dataset class correspond closely to
   attributes in the Windows registry.  The following list describes how
   this mapping aligns.

   entry:
     Key       HKEY_CLASSES_ROOT\<extension>
     Attribute ""
   mediatype.common.type:
     Key       HKEY_CLASSES_ROOT\<extension>
     Attribute "Content Type"
   mediatype.common.description
     Key       HKEY_CLASSES_ROOT\<mtype>
     Attribute ""
   mediatype.win32.action.view:
     Key       HKEY_CLASSES_ROOT\<mtype>\shell\open\command
     Attribute ""
   mediatype.win32.action.compose:
     Key       HKEY_CLASSES_ROOT\<mtype>\shell\new\command
     Attribute ""
   mediatype.win32.action.edit:
     Key       HKEY_CLASSES_ROOT\<mtype>\shell\edit\command
     Attribute ""
   mediatype.win32.action.print:
     Key       HKEY_CLASSES_ROOT\<mtype>\shell\print\command
     Attribute ""
   mediatype.win32.icon:
     Key       HKEY_CLASSES_ROOT\<mtype>\DefaultIcon
     Attribute ""
   mediatype.common.extension:
     Key       HKEY_CLASSES_ROOT\MIME\Database\
                  Content Type\<content_type>
     Attribute "Extension"

   Where <extension> is a file extension (with leading dot), and <mtype>
   is the value of the key HKEY_CLASSES_ROOT\<extension>, attribute "".

5. Usage Procedures

   In order to locate the entry to use with a MIME entity, the following
   procedure is taken; stopping whenever a single entry remains in the
   list after a step.

   1.  If the media type is application/octet-stream and there is a
       filename with extension present, search for entries with a
       matching extension or extensionOther field and skip to step 5.




Newman & Melnikov        Expires June 24, 2003                 [Page 15]

Internet-Draft       ACAP Media Type Dataset Class         December 2002


   2.  Search for entries with a mediatype.common.type of "<type>/
       <subtype>".  Exclude any entries where the parameter on the media
       type doesn't match the parameters in mediatype.common.param.*
       attributes.  For example, a "text/plain; charset=iso-2022-jp"
       media type does not match an entry with a
       "mediatype.common.param.charset" value of "utf-8".

   3.  If no matching entries result, look for a mediatype.common.type
       of "<type>/*" and repeat step 1.

   4.  If there is a filename with extension present, use the extension
       to reduce the number of matches.

   5.  If any entry has a mediatype.common.preferred value other than
       "0", then exclude all entries with a mediatype.common.preferred
       value of "0".

   6.  If any entry has a mediatype.common.preferred attribute of "1"
       exclude all entries which have a NIL mediatype.common.preferred
       attribute.

   7.  If multiple matching entries remain, pick one at random or prompt
       the user.

   When launching the appropriate helper application, a security warning
   SHOULD be issued if the MIME entity arrived from an external source
   and the appropriate suppressWarning attribute is not "1".  A security
   warning MAY be issued under any circumstances.























Newman & Melnikov        Expires June 24, 2003                 [Page 16]

Internet-Draft       ACAP Media Type Dataset Class         December 2002


6. Examples

   Here is an example mediatype entry.  Multi-valued attributes are
   represented with parenthesis around the multiple values.

   attribute                            value
   ---------                            -----
   entry                                JPEG image
   mediatype.common.type                image/jpeg
   mediatype.common.extension           jpg
   mediatype.common.extensionOther      (jpeg jpe jfif jfi)
   mediatype.common.description         JPEG is an image format most
                                        suitable for compressing
                                        photographs
   mediatype.common.suppressWarning     1
   mediatype.macOS.type.bin             JPEG
   mediatype.macOS.creator.bin          JVWR
   mediatype.macOS.creator.name         JPEG View
   mediatype.macOS.action.edit.bin      8BIM
   mediatype.macOS.action.edit.name     Adobe Photoshop
   mediatype.unix.action.view           xv

   Here is an example use of ACAP to fetch information about a media
   type by name:

   C: A047 SEARCH "/mediatype/~/default/" RETURN ("*")
      EQUAL "entry" "i;octet" "WinZip File"
   S: A047 ENTRY "WinZip File" (("modtime" "19980309102226")
      ("mediatype.common.extension" ("zip"))
      ("mediatype.common.type" ("application/x-zip-compressed"))
      ("mediatype.common.description" ("Zip archive file")
      ("mediatype.common.textualNewlines" "0")
      ("mediatype.win32.action.view" "%r\WinZip\winzip32.exe")
      ("mediatype.win32.icon" "%r\WinZip\winzip32.exe,0")
      ("mediatype.win32.alwaysUseHelper" "1"))
   S: A047 MODTIME "19980309105258"
   S: A047 OK "SEARCH completed"


7. Security Considerations

   This dataset provides the ability to identify a helper application to
   process a media type.  Such helper applications may be subject to
   serious security considerations related to active content as
   discussed in MIME [2].  It is expected that programs which launch
   helper applications will display a security warning to the user
   unless the media type is known to be safe or the appropriate
   suppressWarning attribute is set.



Newman & Melnikov        Expires June 24, 2003                 [Page 17]

Internet-Draft       ACAP Media Type Dataset Class         December 2002


   The suppressWarning attributes express security policy.  The Unix and
   win32 action attributes are extremely security sensitive as they
   contain active content.  These attributes are subject to a variety of
   active attacks.  The CRAM-MD5 [12] authentication mechanism used by
   ACAP is inadequate both because it fails to authenticate the server
   and fails to provide integrity protection.  This dataset class SHOULD
   only be used with a security layer such as STARTTLS [13] or
   DIGEST-MD5 [14].

8. IANA Considerations

   This document constitutes the registration for the "mediatype"
   dataset class per section 7.3 of [6].

   Dataset class name/attribute prefix: mediatype

   Purpose: Media Type Mappings

   Published Specification(s): This specification

   Person and email address to contact for further information:

   See Authors' Addresses section of this specification.

Normative References

   [1]  Freed, N. and N. Borenstein, "Multipurpose Internet Mail
        Extensions (MIME) Part One: Format of Internet Message Bodies",
        RFC 2045, November 1996.

   [2]  Freed, N. and N. Borenstein, "Multipurpose Internet Mail
        Extensions (MIME) Part Two: Media Types", RFC 2046, November
        1996.

   [3]  Bradner, S., "Key words for use in RFCs to Indicate Requirement
        Levels", BCP 14, RFC 2119, March 1997.

   [4]  Freed, N. and K. Moore, "MIME Parameter Value and Encoded Word
        Extensions: Character Sets, Languages, and Continuations", RFC
        2231, November 1997.

   [5]  Crocker, D. and P. Overell, "Augmented BNF for Syntax
        Specifications: ABNF", RFC 2234, November 1997.

   [6]  Newman, C. and J. Myers, "ACAP -- Application Configuration
        Access Protocol", RFC 2244, November 1997.

   [7]  Yergeau, F., "UTF-8, a transformation format of ISO 10646", RFC



Newman & Melnikov        Expires June 24, 2003                 [Page 18]

Internet-Draft       ACAP Media Type Dataset Class         December 2002


        2279, January 1998.

Informative References

   [8]   Borenstein, N., "A User Agent Configuration Mechanism For
         Multimedia Mail Format Information", RFC 1524, September 1993.

   [9]   Bradner, S., "The Internet Standards Process -- Revision 3",
         BCP 9, RFC 2026, October 1996.

   [10]  Hovey, R. and S. Bradner, "The Organizations Involved in the
         IETF Standards Process", BCP 11, RFC 2028, October 1996.

   [11]  Freed, N., Klensin, J. and J. Postel, "Multipurpose Internet
         Mail Extensions (MIME) Part Four: Registration Procedures", BCP
         13, RFC 2048, November 1996.

   [12]  Klensin, J., Catoe, R. and P. Krumviede, "IMAP/POP AUTHorize
         Extension for Simple Challenge/Response", RFC 2195, September
         1997.

   [13]  Newman, C., "Using TLS with IMAP, POP3 and ACAP", RFC 2595,
         June 1999.

   [14]  Leach, P. and C. Newman, "Using Digest Authentication as a SASL
         Mechanism", RFC 2831, May 2000.


Authors' Addresses

   Chris Newman
   Sun Microsystems
   1050 Lakes Drive
   West Covina, CA  91790
   US

   EMail: chris.newman@sun.com


   Alexey Melnikov
   ACI Worldwide/MessagingDirect
   59 Clarendon Road
   Watford, Hertfordshire  WD17 1FQ
   United Kingdom

   Phone: +44 1923 81 2877
   EMail: mel@messagingdirect.com




Newman & Melnikov        Expires June 24, 2003                 [Page 19]

Internet-Draft       ACAP Media Type Dataset Class         December 2002


Index

E
   entry  4

M
   mediatype.common.description  6
   mediatype.common.extension  5
   mediatype.common.extensionOther  5
   mediatype.common.magicNumber.bin  5
   mediatype.common.MIME  6
   mediatype.common.param.<MIME-attribute>  5
   mediatype.common.preferred  6
   mediatype.common.suppressWarning  6
   mediatype.common.textualNewlines  6
   mediatype.common.type  4
   mediatype.macOS.action.edit.alwaysUseHelper  9
   mediatype.macOS.action.edit.bin  8
   mediatype.macOS.action.edit.MIME  8
   mediatype.macOS.action.edit.name  8
   mediatype.macOS.action.edit.suppressWarning  9
   mediatype.macOS.action.postProcess.bin  7
   mediatype.macOS.action.postProcess.MIME  8
   mediatype.macOS.action.postProcess.name  8
   mediatype.macOS.creator.bin  7
   mediatype.macOS.creator.name  7
   mediatype.macOS.creator.suppressWarning  7
   mediatype.macOS.stripResource  9
   mediatype.macOS.type.bin  7
   mediatype.unix.action.compose  10
   mediatype.unix.action.compose.MIME  10
   mediatype.unix.action.edit  10
   mediatype.unix.action.edit.MIME  11
   mediatype.unix.action.edit.suppressWarning  11
   mediatype.unix.action.print  11
   mediatype.unix.action.print.MIME  11
   mediatype.unix.action.print.suppressWarning  11
   mediatype.unix.action.view  9
   mediatype.unix.action.view.MIME  10
   mediatype.unix.action.view.output  10
   mediatype.unix.action.view.suppressWarning  10
   mediatype.unix.alwaysUseHelper  11
   mediatype.win32.action.compose  13
   mediatype.win32.action.compose.MIME  13
   mediatype.win32.action.edit  13
   mediatype.win32.action.edit.MIME  13
   mediatype.win32.action.edit.suppressWarning  13
   mediatype.win32.action.print  13



Newman & Melnikov        Expires June 24, 2003                 [Page 20]

Internet-Draft       ACAP Media Type Dataset Class         December 2002


   mediatype.win32.action.print.MIME  14
   mediatype.win32.action.print.suppressWarning  14
   mediatype.win32.action.view  12
   mediatype.win32.action.view.MIME  12
   mediatype.win32.action.view.suppressWarning  12
   mediatype.win32.alwaysUseHelper  14
   mediatype.win32.icon  14












































Newman & Melnikov        Expires June 24, 2003                 [Page 21]

Internet-Draft       ACAP Media Type Dataset Class         December 2002


Intellectual Property Statement

   The IETF takes no position regarding the validity or scope of any
   intellectual property or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; neither does it represent that it
   has made any effort to identify any such rights.  Information on the
   IETF's procedures with respect to rights in standards-track and
   standards-related documentation can be found in BCP-11.  Copies of
   claims of rights made available for publication and any assurances of
   licenses to be made available, or the result of an attempt made to
   obtain a general license or permission for the use of such
   proprietary rights by implementors or users of this specification can
   be obtained from the IETF Secretariat.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights which may cover technology that may be required to practice
   this standard.  Please address the information to the IETF Executive
   Director.


Full Copyright Statement

   Copyright (C) The Internet Society (2002).  All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works.  However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assignees.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION



Newman & Melnikov        Expires June 24, 2003                 [Page 22]

Internet-Draft       ACAP Media Type Dataset Class         December 2002


   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.











































Newman & Melnikov        Expires June 24, 2003                 [Page 23]

