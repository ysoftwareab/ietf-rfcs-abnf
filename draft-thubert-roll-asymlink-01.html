<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>RPL adaptation for asymmetrical links</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Terminology">
<link href="#rfc.section.3" rel="Chapter" title="3 The asymmetrical link problem">
<link href="#rfc.section.4" rel="Chapter" title="4 Solution Overview">
<link href="#rfc.section.5" rel="Chapter" title="5 Modified DODAG Information Object (DIO)">
<link href="#rfc.section.6" rel="Chapter" title="6 Operations">
<link href="#rfc.section.7" rel="Chapter" title="7 Backward compatibility">
<link href="#rfc.section.8" rel="Chapter" title="8 IANA Considerations">
<link href="#rfc.section.9" rel="Chapter" title="9 Security Considerations">
<link href="#rfc.section.10" rel="Chapter" title="10 Acknowledgements">
<link href="#rfc.references" rel="Chapter" title="11 References">
<link href="#rfc.references.1" rel="Chapter" title="11.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="11.2 Informative References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="The Routing Protocol for Low Power and Lossy Networks defines a generic Distance Vector protocol for Low Power and Lossy Networks, many of which exhibit strongly asymmetrical characteristics. This draft proposes an extension for that optimizes RPL operations whereby upwards and downwards direction-optimized RPL instances are associated.  " />
  <meta name="description" content="The Routing Protocol for Low Power and Lossy Networks defines a generic Distance Vector protocol for Low Power and Lossy Networks, many of which exhibit strongly asymmetrical characteristics. This draft proposes an extension for that optimizes RPL operations whereby upwards and downwards direction-optimized RPL instances are associated.  " />
  <meta name="keywords" content="Draft" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">ROLL</td>
<td class="right">P. Thubert, Ed.</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">Cisco Systems</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">November 16, 2011</td>
</tr>
<tr>
<td class="left">Expires: May 19, 2012</td>
<td class="right"></td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">RPL adaptation for asymmetrical links<br />
  <span class="filename">draft-thubert-roll-asymlink-01</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>The Routing Protocol for Low Power and Lossy Networks defines a generic Distance Vector protocol for Low Power and Lossy Networks, many of which exhibit strongly asymmetrical characteristics. This draft proposes an extension for that optimizes RPL operations whereby upwards and downwards direction-optimized RPL instances are associated.  </p>
<h1><a>Requirements Language</a></h1>
<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">RFC 2119</a> <cite title="NONE">[RFC2119]</cite>.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on May 19, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Terminology</a>
</li>
<li>3.   <a href="#rfc.section.3">The asymmetrical link problem</a>
</li>
<li>4.   <a href="#rfc.section.4">Solution Overview</a>
</li>
<li>5.   <a href="#rfc.section.5">Modified DODAG Information Object (DIO)</a>
</li>
<li>6.   <a href="#rfc.section.6">Operations</a>
</li>
<li>7.   <a href="#rfc.section.7">Backward compatibility</a>
</li>
<li>8.   <a href="#rfc.section.8">IANA Considerations</a>
</li>
<li>9.   <a href="#rfc.section.9">Security Considerations</a>
</li>
<li>10.   <a href="#rfc.section.10">Acknowledgements</a>
</li>
<li>11.   <a href="#rfc.references">References</a>
</li>
<li>11.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>11.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li><a href="#rfc.authors">Author's Address</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">The IETF ROLL Working Group has defined application-specific routing requirements for a Low Power and Lossy Network (LLN) routing protocol, specified in <a href="#RFC5548">[RFC5548]</a>, <a href="#RFC5673">[RFC5673]</a>, <a href="#RFC5826">[RFC5826]</a>, and <a href="#RFC5867">[RFC5867]</a>, many of which explicitly or implicitly refer to links with asymmetrical properties.  </p>
<p id="rfc.section.1.p.2">Upon those requirements, the <a href="#I-D.ietf-roll-rpl">Routing Protocol for Low Power and Lossy Network</a> <cite title="NONE">[I-D.ietf-roll-rpl]</cite> was designed as a platform that can be extended by further specifications or guidances, by adding new metrics, Objective Functions, or additional options.</p>
<p id="rfc.section.1.p.3">RPL forms Destination Oriented Directed Acyclic Graphs (DODAGs) within instances of the protocol. Each instance is associated with an Objective Function that is designed to solve the problem that is addressed by that instance.</p>
<p id="rfc.section.1.p.4">In one hand, RPL requires bi-directional links for the control, but on the other, there is no requirement that the properties of a link are the same in both directions.  In fact, a perfect symmetry is rarely present in Low Power and Lossy Networks (LLNs), whether links are based on radios or power-line.</p>
<p id="rfc.section.1.p.5">Some initial implementations require that the quality of both directions of a link is evaluated as very good so that the link can be used for control and data in both directions. This eliminates asymmetrical links that are very good in one direction, but only good enough for scarce activity in the other direction.</p>
<p id="rfc.section.1.p.6">In practice, a DAG that is built to optimize upwards traffic is generally not congruent with a DAG that is built to optimize downwards traffic. This is why this specification is designed to enable asymmetrical routing DAGs that are bound together to get the maximum benefits of all types of bi-directional links.</p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> <a href="#Terminology" id="Terminology">Terminology</a>
</h1>
<p id="rfc.section.2.p.1">The terminology used in this document is consistent with and incorporates that described in `Terminology in Low power And Lossy Networks' <a href="#I-D.ietf-roll-terminology">[I-D.ietf-roll-terminology]</a> and <a href="#I-D.ietf-roll-rpl">[I-D.ietf-roll-rpl]</a>.</p>
<p id="rfc.section.2.p.2">The term upwards qualifies a link, a DODAG or an instance that is optimal for sending traffic in the general direction of the root, though may be usable but suboptimal for traffic coming form the direction of the root. The term downwards qualifies the same words for the opposite direction.</p>
<p id="rfc.section.2.p.3">The term parenting applied to instances refers to the directional association of two instances. The meta graph formed by parented instances must be a DAG. Traffic may be transferred from an instance onto a parent instance under specified circumstances.  </p>
<p id="rfc.section.2.p.4">The draft also uses the following terminology: </p>

<dl>
<dt>bi-directional:</dt>
<dd style="margin-left: 8">A link is bi-directional when traffic confirmed possible in both direction, in a fashion that is sufficient to operate RPL control.  </dd>
<dt>asymmetric:</dt>
<dd style="margin-left: 8">A link is assymetric if it is bi-directional, but exhibits important differences in link characteristics for both directions.  </dd>
</dl>

<p> </p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> The asymmetrical link problem</h1>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> Solution Overview</h1>
<p id="rfc.section.4.p.1">With the core RPL specification, <a href="#I-D.ietf-roll-rpl">[I-D.ietf-roll-rpl]</a> each instance is a separate routing topology, and packets must be forwarded within the same topology / same instance.  One direct consequence of that design choice is that a topology must be very good for both upwards and downwards traffic; otherwise, traffic between two nodes in the instance may suffer.  </p>
<p id="rfc.section.4.p.2">RPL is designed to operate on bi-directional links. When the link properties do not widely differ between the upwards and the downwards directions, a single DAG is adequate as the routing topology for both upwards and downwards traffic. In that case, an asymmetrical link, that can only be used for traffic in one direction, can not participate to the routing topology. This results in an unoptimized use of bandwidth and/or a reduction of the possible path diversity.  </p>
<p id="rfc.section.4.p.3">This issue can be addressed with <a href="#I-D.ietf-roll-rpl">[I-D.ietf-roll-rpl]</a>, by constructing two DAGs, one that is used for upwards traffic and one that is used for downwards traffic. This solves the issue for all traffic that transits through the root of the DODAG, whether it is originated in the DODAG going out or is injected into the DODAG from the outside, since in both cases a packet will mostly use the asymmetric links in the appropriate direction.  </p>
<p id="rfc.section.4.p.4">OTOH, with RPL as it is specified, a packet follows the topology that is generated for its instance all the way through a DAG, and transferring a packet from an instance to another is not permitted.  As a result, the 2 DAGs solution would penalize Peer to peer traffic that would have to go through the root in order to leave the upward instance and then reenter at the root in order to join the downwards instance.  This is not an issue in non-storing mode since the 	packet has to go through the root to load the routing header downwards anyway, but going through the root stretches the path in storing mode.  </p>
<p id="rfc.section.4.p.5">In order to benefit from both instances and yet avoid extra stretch through the root in storing mode, it is required to extend RPL rules so as to allow traffic to be transferred from one instance to the next before reaching the root on the way up.  This document specifies conditions under which 2 instances can be bound together so that a node may transfer traffic from an instance onto another.  </p>
<p id="rfc.section.4.p.6">It can be noted at this point that with <a href="#I-D.ietf-roll-rpl">[I-D.ietf-roll-rpl]</a>, traffic that goes down does not generally go back up again, whereas P2P traffic within a DODAG might go up to a common parent and then down to the destination. In terms of instance relationship, this means that when an upwards and a downwards instances are bound together, traffic from the former may be transferred to the latter, but not the other way around.  In other words, there is an order, a parent-child relationship, between the two instances.  </p>
<p id="rfc.section.4.p.7">Additionally, if there is no next-hop for a packet going down within the instance, then with <a href="#I-D.ietf-roll-rpl">[I-D.ietf-roll-rpl]</a> the packet will be dropped or sent back with an error along the wrong direction of an asymmetric link. In order to avoid those unwanted behaviors, it is tempting though inefficient to lower the constraints that are applied to build the topology. It can be more efficient to actually keep the constraints as they should be, but, instead, enable a less constrained, more spanning, fall-back topology into which traffic can be transferred.  </p>
<p id="rfc.section.4.p.8">For that reason, this solution allows for more complex instance relationships than plain child-parent associations.  In order to avoids loops which could be created when transferring packets from one instance to the next, this solution requires that the instances be themselves organized as a Directed Acyclic Graph, and enforce that inter-DAG transfers occur only within that meta DAG.  </p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#DAGInformationObject" id="DAGInformationObject">Modified DODAG Information Object (DIO)</a>
</h1>
<p id="rfc.section.5.p.1">The DODAG Information Object  <a href="#I-D.ietf-roll-rpl">[I-D.ietf-roll-rpl]</a> carries information that allows a node to discover a RPL Instance, learn its configuration parameters, select a DODAG parent set, and maintain the DODAG. This specification defines a new flag bit to indicate that the DAG is directional.</p>
<div id="#rfc.figure.1"></div>
<div id="#DIObase"></div>
<pre>
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | RPLInstanceID |Version Number |             Rank              |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |G|D| MOP | Prf |     DTSN      |     Flags     |   Reserved    |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                               |
    +                                                               +
    |                                                               |
    +                            DODAGID                            +
    |                                                               |
    +                                                               +
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |   Option(s)...
    +-+-+-+-+-+-+-+-+
</pre>
<p></p>
<p></p>

<dl>
<dt>Directional (D):</dt>
<dd style="margin-left: 6">The Directional (D) flag is set to indicate that the instance is intended for directional operation, and reset otherwise. When it is set, a MOP of 0 indicates the upwards direction whereas any other value specified in <a href="#I-D.ietf-roll-rpl">[I-D.ietf-roll-rpl]</a> indicates downwards.  All other values of MOP will be considered downwards unless explicitly specified otherwise.</dd>
</dl>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> Operations</h1>
<p id="rfc.section.6.p.1">This specification allows an organization of Instances as follows: </p>

<ul class="empty">
<li>Instances MUST be organized as a Directed Acyclic Graph. This information MUST be commissioned into the devices so they know both which instances they should participate in, and which  direction of transfer is allowed between instances.</li>
<li>A spanning instance using OF0 <a href="#I-D.ietf-roll-of0">[I-D.ietf-roll-of0]</a> MAY be used as root in that instance DAG.</li>
</ul>

<p> </p>
<p id="rfc.section.6.p.2">This specification defines a new bit in the <a href="#I-D.ietf-roll-rpl">RPL</a> <cite title="NONE">[I-D.ietf-roll-rpl]</cite> DODAG Information Object (DIO) with the Directional (D) flag that indicates a directional operation for a given instance.  An implementation that does not support that new bit will not be able to propagate it. </p>
<p id="rfc.section.6.p.3">In case of a directional operation, </p>

<ul class="empty">
<li>The direction is indicated by the MOP field, a MOP of 0 means upwards and otherwise is downwards.</li>
<li>Links are still REQUIRED to allow bidirectional operations</li>
<li>Only the metrics that correspond to the DAG direction are used for the parent selection. </li>
<li>An upward instance SHOULD install routes that lead to the root and beyond - typically the default route. </li>
<li>A downwards instance MAY ONLY install more specific routes that are injected by nodes in the DODAG through the DAO process.</li>
<li>P2P operations are achieved by associating a child upwards instance with a parent downwards instance.</li>
<li>A packet MUST NOT be transferred from a parent instance to a child instance. </li>
<li>A packet MAY be transferred from a child instance to its parent instance if and only if the child instance does not provide a route to the destination, or the parent instance provides a more specific route (longer match) to the destination.  </li>
<li>Transferring from an upwards instance to a downwards instance if generally desirable. Other forms of transfers are generally not desirable. Policies MAY be put in place to ovreride that general guidance.  </li>
</ul>

<p> </p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#back" id="back">Backward compatibility</a>
</h1>
<p id="rfc.section.7.p.1">An OF is generally designed to compute a Rank of a directional link in a fashion that is diffent from a bidirectional link, and in particular will not use the same metrics and thusobtain different ranks for a same situation. For that reason, it is important that the OF is aware that an instance is supposed to define a directional DODAG, and it is RECOMMENDED that only devices that support directional DODAGs are allowed in a directional instance. </p>
<p id="rfc.section.7.p.2">It might happen that for some purposes like higher availability, an implementation that does not support directional links is administratively allowed to join a directional DODAG. In that case, the extension of the DODAG that starts at that device will not be directional, but the instance will still be functional. </p>
<p id="rfc.section.7.p.3">In that case, it might also happen that a device that supports directional DODAGs per this specification sees candidate neighbors that expose the Directional flag and some others that do not. An OF that supports directional links SHOULD favor directional links over non directional links, in a fashion that is to be specified with the OF. In the case of <a href="#I-D.ietf-roll-of0">OF0 </a> <cite title="NONE">[I-D.ietf-roll-of0]</cite>, the 'D' flag should be accounted for before the computation of item 8 in the "Selection Of The Preferred Parent" section 4.2.1., that is before Ranks and be calculated and compared.  </p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#IANA" id="IANA">IANA Considerations</a>
</h1>
<p id="rfc.section.8.p.1">This specification requires that a bit in DIO be assigned to indicate directional link operations as specified in section </p>
<h1 id="rfc.section.9">
<a href="#rfc.section.9">9.</a> <a href="#Sec" id="Sec">Security Considerations</a>
</h1>
<p id="rfc.section.9.p.1">Security Considerations for this proposal are to be developed in accordance with recommendations laid out in, for example, <a href="#I-D.tsao-roll-security-framework">[I-D.tsao-roll-security-framework]</a>.</p>
<h1 id="rfc.section.10">
<a href="#rfc.section.10">10.</a> <a href="#Acknowledgements" id="Acknowledgements">Acknowledgements</a>
</h1>
<p id="rfc.section.10.p.1">The author wishes to recognize Richard Kelsey, JP Vasseur, Tom Phinney, Robert Assimiti, Don Sturek, Thomas Clausen and Yoav Ben-Yehezkel for their various contributions.</p>
<h1 id="rfc.references">
<a href="#rfc.references">11.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">11.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-roll-rpl">[I-D.ietf-roll-rpl]</b></td>
<td class="top">
<a>Winter, T</a>, <a>Thubert, P</a>, <a>Brandt, A</a>, <a>Clausen, T</a>, <a>Hui, J</a>, <a>Kelsey, R</a>, <a>Levis, P</a>, <a>Pister, K</a>, <a>Struik, R</a> and <a>J Vasseur</a>, "<a href="http://tools.ietf.org/html/draft-ietf-roll-rpl-19">RPL: IPv6 Routing Protocol for Low power and Lossy Networks</a>", Internet-Draft draft-ietf-roll-rpl-19, March 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-roll-terminology">[I-D.ietf-roll-terminology]</b></td>
<td class="top">
<a>Vasseur, J</a>, "<a href="http://tools.ietf.org/html/draft-ietf-roll-terminology-06">Terminology in Low power And Lossy Networks</a>", Internet-Draft draft-ietf-roll-terminology-06, September 2011.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">11.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="I-D.ietf-roll-of0">[I-D.ietf-roll-of0]</b></td>
<td class="top">
<a>Thubert, P</a>, "<a href="http://tools.ietf.org/html/draft-ietf-roll-of0-20">RPL Objective Function Zero</a>", Internet-Draft draft-ietf-roll-of0-20, September 2011.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5548">[RFC5548]</b></td>
<td class="top">
<a>Dohler, M.</a>, <a>Watteyne, T.</a>, <a>Winter, T.</a> and <a>D. Barthel</a>, "<a href="http://tools.ietf.org/html/rfc5548">Routing Requirements for Urban Low-Power and Lossy Networks</a>", RFC 5548, May 2009.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5673">[RFC5673]</b></td>
<td class="top">
<a>Pister, K.</a>, <a>Thubert, P.</a>, <a>Dwars, S.</a> and <a>T. Phinney</a>, "<a href="http://tools.ietf.org/html/rfc5673">Industrial Routing Requirements in Low-Power and Lossy Networks</a>", RFC 5673, October 2009.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5826">[RFC5826]</b></td>
<td class="top">
<a>Brandt, A.</a>, <a>Buron, J.</a> and <a>G. Porcu</a>, "<a href="http://tools.ietf.org/html/rfc5826">Home Automation Routing Requirements in Low-Power and Lossy Networks</a>", RFC 5826, April 2010.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5867">[RFC5867]</b></td>
<td class="top">
<a>Martocci, J.</a>, <a>De Mil, P.</a>, <a>Riou, N.</a> and <a>W. Vermeylen</a>, "<a href="http://tools.ietf.org/html/rfc5867">Building Automation Routing Requirements in Low-Power and Lossy Networks</a>", RFC 5867, June 2010.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.tsao-roll-security-framework">[I-D.tsao-roll-security-framework]</b></td>
<td class="top">
<a>Tsao, T</a>, <a>Alexander, R</a>, <a>Daza, V</a> and <a>A Lozano</a>, "<a href="http://tools.ietf.org/html/draft-tsao-roll-security-framework-02">A Security Framework for Routing over Low Power and Lossy Networks</a>", Internet-Draft draft-tsao-roll-security-framework-02, March 2010.</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Author's Address</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Pascal Thubert</span> editor
	  <span class="n hidden">
		<span class="family-name">Thubert</span>
	  </span>
	</span>
	<span class="org vcardline">Cisco Systems</span>
	<span class="adr">
	  <span>Village d'Entreprises Green Side</span>
<span>400, Avenue de Roumanille</span>
<span>Batiment T3</span>

	  <span class="vcardline">
		<span class="locality">Biot - Sophia Antipolis</span>,  
		<span class="region"></span>
		<span class="code">06410</span>
	  </span>
	  <span class="country-name vcardline">FRANCE</span>
	</span>
	<span class="vcardline">Phone: +33 497 23 26 34</span>

<span class="vcardline">EMail: <a href="mailto:pthubert@cisco.com">pthubert@cisco.com</a></span>

  </address>
</div>

</body>
</html>