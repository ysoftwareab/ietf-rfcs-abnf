<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Indication of features supported by proxy </title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.1.1" rel="Chapter" title="1.1 Use-case: IMS Service Continuity, handover of session in alerting state">
<link href="#rfc.section.1.2" rel="Chapter" title="1.2 Use-case: IMS Enhanced Service Continuity">
<link href="#rfc.section.1.2.1" rel="Chapter" title="1.2.1 Use-case: IMS Enhanced Service Continuity, ATCF discovery">
<link href="#rfc.section.1.2.2" rel="Chapter" title="1.2.2 Use-case: IMS Enhanced Service Continuity, identifying sessions subject to handover">
<link href="#rfc.section.1.3" rel="Chapter" title="1.3 Use-case: IMS Inter-UE Transfer">
<link href="#rfc.section.2" rel="Chapter" title="2 Conventions">
<link href="#rfc.section.3" rel="Chapter" title="3 Definitions">
<link href="#rfc.section.4" rel="Chapter" title="4 Requirements">
<link href="#rfc.section.5" rel="Chapter" title="5 User Agent behavior">
<link href="#rfc.section.6" rel="Chapter" title="6 Proxy behavior">
<link href="#rfc.section.7" rel="Chapter" title="7 Feature tag semantics">
<link href="#rfc.section.8" rel="Chapter" title="8 Direction">
<link href="#rfc.section.9" rel="Chapter" title="9 Examples">
<link href="#rfc.section.9.1" rel="Chapter" title="9.1 Example: IMS Service Continuity, handover session in alerting state">
<link href="#rfc.section.9.2" rel="Chapter" title="9.2 Example: IMS Enhanced Service Continuity, ATCF discovery">
<link href="#rfc.section.9.3" rel="Chapter" title="9.3 Example: IMS Enhanced Service Continuity, identifying sessions subject to handover">
<link href="#rfc.section.9.4" rel="Chapter" title="9.4 Example: IMS Inter-UE Transfer">
<link href="#rfc.section.10" rel="Chapter" title="10 IANA Considerations">
<link href="#rfc.section.11" rel="Chapter" title="11 Security Considerations">
<link href="#rfc.section.12" rel="Chapter" title="12 Acknowledgements">
<link href="#rfc.section.13" rel="Chapter" title="13 Change Log">
<link href="#rfc.references" rel="Chapter" title="14 References">
<link href="#rfc.references.1" rel="Chapter" title="14.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="14.2 Informative References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="The Session Initiation Protocol (SIP) "Caller Preferences" extension defined in RFC 3840 provides a mechanism that allows a SIP message to convey information relating to the originator's capabilities.  This document makes it possible for SIP proxies to convey similar information, by extending the rr-param rule defined in RFC 3261, so that the header field parameter can be used to convey feature tags that indicate features supported by the proxy.  " />
  <meta name="description" content="The Session Initiation Protocol (SIP) "Caller Preferences" extension defined in RFC 3840 provides a mechanism that allows a SIP message to convey information relating to the originator's capabilities.  This document makes it possible for SIP proxies to convey similar information, by extending the rr-param rule defined in RFC 3261, so that the header field parameter can be used to convey feature tags that indicate features supported by the proxy.  " />
  <meta name="keywords" content="SIP, proxy, feature, feature-tag, capabiltiy" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">SIPCORE Working Group</td>
<td class="right">C.H. Holmberg</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">I.S. Sedlacek</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">Ericsson</td>
</tr>
<tr>
<td class="left">Expires: December 11, 2011</td>
<td class="right">June 09, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Indication of features supported by proxy <br />
  <span class="filename">draft-holmberg-sipcore-proxy-feature-02.txt</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>The Session Initiation Protocol (SIP) "Caller Preferences" extension defined in RFC 3840 provides a mechanism that allows a SIP message to convey information relating to the originator's capabilities.  This document makes it possible for SIP proxies to convey similar information, by extending the rr-param rule defined in RFC 3261, so that the header field parameter can be used to convey feature tags that indicate features supported by the proxy.  </p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted to IETF in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on December 11, 2011.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>1.1.   <a href="#rfc.section.1.1">Use-case: IMS Service Continuity, handover of session in alerting state</a>
</li>
<li>1.2.   <a href="#rfc.section.1.2">Use-case: IMS Enhanced Service Continuity</a>
</li>
<li>1.2.1.   <a href="#rfc.section.1.2.1">Use-case: IMS Enhanced Service Continuity, ATCF discovery</a>
</li>
<li>1.2.2.   <a href="#rfc.section.1.2.2">Use-case: IMS Enhanced Service Continuity, identifying sessions subject to handover</a>
</li>
<li>1.3.   <a href="#rfc.section.1.3">Use-case: IMS Inter-UE Transfer</a>
</li>
<li>2.   <a href="#rfc.section.2">Conventions</a>
</li>
<li>3.   <a href="#rfc.section.3">Definitions</a>
</li>
<li>4.   <a href="#rfc.section.4">Requirements</a>
</li>
<li>5.   <a href="#rfc.section.5">User Agent behavior</a>
</li>
<li>6.   <a href="#rfc.section.6">Proxy behavior</a>
</li>
<li>7.   <a href="#rfc.section.7">Feature tag semantics</a>
</li>
<li>8.   <a href="#rfc.section.8">Direction</a>
</li>
<li>9.   <a href="#rfc.section.9">Examples</a>
</li>
<li>9.1.   <a href="#rfc.section.9.1">Example: IMS Service Continuity, handover session in alerting state</a>
</li>
<li>9.2.   <a href="#rfc.section.9.2">Example: IMS Enhanced Service Continuity, ATCF discovery</a>
</li>
<li>9.3.   <a href="#rfc.section.9.3">Example: IMS Enhanced Service Continuity, identifying sessions subject to handover</a>
</li>
<li>9.4.   <a href="#rfc.section.9.4">Example: IMS Inter-UE Transfer</a>
</li>
<li>10.   <a href="#rfc.section.10">IANA Considerations</a>
</li>
<li>11.   <a href="#rfc.section.11">Security Considerations</a>
</li>
<li>12.   <a href="#rfc.section.12">Acknowledgements</a>
</li>
<li>13.   <a href="#rfc.section.13">Change Log</a>
</li>
<li>14.   <a href="#rfc.references">References</a>
</li>
<li>14.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>14.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">The SIP "Caller Preferences" extension defined in RFC 3840 <a href="#RFC3840">[RFC3840]</a> provides a mechanism that allows a SIP message to convey information, using feature tags, relating to the originator's capabilities.  </p>
<p id="rfc.section.1.p.2">Feature information can be useful for other SIP entities, that might trigger actions and enable functions based on features supported by other SIP entities.  </p>
<p id="rfc.section.1.p.3">This document extends the rr-param rule defined in RFC 3261 <a href="#RFC3261">[RFC3261]</a>, so that it can be used to convey feature tags indicating support of features in SIP proxies. The rr-param rule is used in the SIP Path, Route, Record-Route and Service-Route header fields.  </p>
<h1 id="rfc.section.1.1">
<a href="#rfc.section.1.1">1.1.</a> Use-case: IMS Service Continuity, handover of session in alerting state</h1>
<p id="rfc.section.1.1.p.1">The 3rd Generation Partnership Project (3GPP) defines a IP Multimedia Subsystem (IMS) Service Continuity mechanism <a href="#3GPP.23.237">[3GPP.23.237]</a> for handover of Packet Switched (PS) sessions to Circuit Switched (CS) calls.  </p>
<p id="rfc.section.1.1.p.2">The handover is controlled by a Service Centralization and Continuity Application Server (SCC AS). When a session is established the User Equipment (UE) needs to determine whether SCC AS in signalling path of the session supports handover of session in alerting state (i.e. 180 Ringing response has already been sent or received but the dialog is not confirmed dialog yet) or not.  </p>
<p id="rfc.section.1.1.p.3">When handover occurs and a session in alerting state exists and both UE and SCC AS indicated support of the handover of session in alerting state, then the UE and SCC AS perform handover for the session in alerting state.  </p>
<p id="rfc.section.1.1.p.4">NOTE: The UE indicates the support of the handover of session in alerting state by the feature tag included in Contact header field.  </p>
<p><a href="#ex-scc">Section 9.1</a> shows an example flow for this use-case.  </p>
<h1 id="rfc.section.1.2">
<a href="#rfc.section.1.2">1.2.</a> Use-case: IMS Enhanced Service Continuity</h1>
<p id="rfc.section.1.2.p.1">The 3rd Generation Partnership Project (3GPP) defines a IP Multimedia Subsystem (IMS) Service Continuity mechanism <a href="#3GPP.23.237">[3GPP.23.237]</a> for handover of Packet Switched (PS) sessions to Circuit Switched (CS) calls. The handover can be performed by a Service Centralization and Continuity Application Server (SCC AS), or by a SCC AS together with an Access Transfer Control Function (ATCF), that acts as a SIP proxy. Delegating part of the session handover functionality to an ATCF provides advantages related to voice interruption during session handover etc, since it is located in the same network as the user.  </p>
<h1 id="rfc.section.1.2.1">
<a href="#rfc.section.1.2.1">1.2.1.</a> Use-case: IMS Enhanced Service Continuity, ATCF discovery</h1>
<p id="rfc.section.1.2.1.p.1">In order for a SCC AS to delegate part of the session handover functionality to an ATCF, when it receives a SIP REGISTER request, it needs to be informed whether there is a proxy that provides ATCF functionality in the registration path.  </p>
<p><a href="#ex-escc">Section 9.2</a> shows an example flow for this use-case.  </p>
<h1 id="rfc.section.1.2.2">
<a href="#rfc.section.1.2.2">1.2.2.</a> Use-case: IMS Enhanced Service Continuity, identifying sessions subject to handover</h1>
<p id="rfc.section.1.2.2.p.1">In order for ATCF to perform the delegated part of the session handover functionality, ATCF needs to know which sessions are subject to handover as decided by SCC AS.  </p>
<p><a href="#ex-escc-session">Section 9.3</a> shows an example flow for this use-case.  </p>
<h1 id="rfc.section.1.3">
<a href="#rfc.section.1.3">1.3.</a> Use-case: IMS Inter-UE Transfer</h1>
<p id="rfc.section.1.3.p.1">The 3rd Generation Partnership Project (3GPP) defines inter-UE transfer enhancements <a href="#3GPP.24.837">[3GPP.24.837]</a> which enhance delivery of media of a session to several User Equipments (UE).  </p>
<p id="rfc.section.1.3.p.2">The Service Centralization and Continuity Application Server (SCC AS) serving one of the UEs acts as local hub for the session. The UE controls the media of the session and is called controller UE.  </p>
<p id="rfc.section.1.3.p.3">Triggered by requests from the controller UE, the SCC AS serving the controller UE transfers media of the session to other UEs, called controlee UEs, by sending INVITE request offering the media to be transferred.  </p>
<p id="rfc.section.1.3.p.4">When an INVITE request is routed to the UE, the SCC AS serving the UE needs to determine whether another SCC AS (i.e. SCC AS of the controller UE) is already in the signalling path.  </p>
<p id="rfc.section.1.3.p.5">If so, the SCC AS proxies the signalling without further handling as there is already an existing local hub for the session.  </p>
<p id="rfc.section.1.3.p.6">If not, the SCC AS acts as local hub for the session.  </p>
<p><a href="#ex-iut">Section 9.4</a> shows an example flow for this use-case.  </p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> Conventions</h1>
<p id="rfc.section.2.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in BCP 14, RFC 2119 <a href="#RFC2119">[RFC2119]</a>.  </p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> Definitions</h1>
<p id="rfc.section.3.p.1">The rr-param rule defined in RFC 3261 <a href="#RFC3261">[RFC3261]</a>: </p>
<p id="rfc.section.3.p.2">rr-param = generic-param </p>
<p id="rfc.section.3.p.3">is extended to: </p>
<p id="rfc.section.3.p.4">rr-param = generic-param / feature-param </p>
<p id="rfc.section.3.p.5">where feature-param is defined in Section 9 of RFC 3840 <a href="#RFC3840">[RFC3840]</a>.  </p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> Requirements</h1>
<p id="rfc.section.4.p.1">1. It SHALL be possible for a SIP intermediary to indicate, in a SIP routing header field (e.g Record-Route, Service-Route, Path), support (for a session or registration) for a particular feature/capability.  </p>
<p id="rfc.section.4.p.2">2. It SHALL be possible to indicate whether indicated support of a feature/capability is only applicable in a certain direction of the signalling path associated with the SIP routing header field, in which the feature/capability support is indicated.  </p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#sec-ua" id="sec-ua">User Agent behavior</a>
</h1>
<p id="rfc.section.5.p.1">This specification does not specify any new User Agent behavior.  </p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#sec-proxy" id="sec-proxy">Proxy behavior</a>
</h1>
<p id="rfc.section.6.p.1">When a proxy inserts a Path header field (during registration), a Service-Route header field (during registration) or a Record-Route header field (during a dialog establishment), it MAY insert a feature tag in the header field.  </p>
<p id="rfc.section.6.p.2">If a feature tag is inserted in a Path or Service-Route header field during registration, the resource identified by the URI in the header field MUST provide support for the associated feature for all dialogs associated with the registration, until the registration is terminated or re-freshed.  </p>
<p id="rfc.section.6.p.3">If a feature tag is inserted in a Record-Route header field during a dialog establishment, the resource identified by the URI in the header field MUST provide support for the associated feature until the dialog is terminated.  </p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#sec-semant" id="sec-semant">Feature tag semantics</a>
</h1>
<p id="rfc.section.7.p.1">The feature tag in a header field constructed using rr-param rule indicates support of the feature in the resource identified by the URI in the header field.  </p>
<p id="rfc.section.7.p.2">In order to insert a feature tag in a SIP header field constructed by using rr-param rule, the feature specification MUST specify the semantics of the feature tag when inserted in that specific header field. Unless the feature specification defines such semantics, a the feature tag MUST NOT be included in that specific header field.  </p>
<p id="rfc.section.7.p.3">NOTE: If a route set is built using Path, Record-Route or Service-Route header fields, any inserted feature tag will be copied into the associated Route header fields, together with other header field parameters. This specification does not define any specific meaning of the feature tags present in Route header fields in such cases.  </p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#sec-dir" id="sec-dir">Direction</a>
</h1>
<p id="rfc.section.8.p.1">When a proxy inserts a feature tag in order to indicate support of a capability, the indicated capability might be indicated both towards downstream and upstream SIP entities.  </p>
<p id="rfc.section.8.p.2">In order to indicate a capability only towards SIP entities in one direction, either the feature tag semantics need to be defined in a way so that SIP entities know whether the indicated capability applies to them or not, or alternatively, the SIP entity that inserts the feature tag needs to ensure that the feature tag is only sent towards the direction for which the capability applies.  </p>
<h1 id="rfc.section.9">
<a href="#rfc.section.9">9.</a> Examples</h1>
<h1 id="rfc.section.9.1">
<a href="#rfc.section.9.1">9.1.</a> <a href="#ex-scc" id="ex-scc">Example: IMS Service Continuity, handover session in alerting state</a>
</h1>
<p id="rfc.section.9.1.p.1">Based on the presence of g.3gpp.srvcc-alerting feature tag in a Record-Route header field Alice determines that SCC AS serving Alice in signalling path of the session supports the handover of session in alerting state and when hand over occurs and session in alerting state exists, this specific session can be handed over.  </p>
<p id="rfc.section.9.1.p.2">NOTE: As P1 only wants to indicate the capability towards Alice, it only inserts the feature tag in the Record-Route header field of the response sent towards Alice.  </p>
<p id="rfc.section.9.1.p.3">NOTE: The Contact header field of the 200 OK response to the INVITE request contains the GRUU of Bob, so it would be inappropriate to indicate the SCC AS support of handover feature in the Contact header field.  </p>
<div id="#rfc.figure.1"></div>
<div id="#fig-arch-scc"></div>
<pre> 
     Alice                    P1 (SCC AS                      Bob
                                of Alice)
       |                           |                           |
       |--- INVITE----------------&gt;|                           |
       |                           |                           |
       |                           |--- INVITE----------------&gt;|
       |                           |    Record-Route: P1       |
       |                           |                           |
       |                           |                           |
       |                           |&lt;-- 200 OK ----------------|
       |                           |    Record-Route: P1       |
       |                           |                           |
       |&lt;-- 200 OK ----------------|                           |
       |    Record-Route: P1;g.3gpp.srvcc-alerting             |
       |                           |                           |

					</pre>
<h1 id="rfc.section.9.2">
<a href="#rfc.section.9.2">9.2.</a> <a href="#ex-escc" id="ex-escc">Example: IMS Enhanced Service Continuity, ATCF discovery</a>
</h1>
<p id="rfc.section.9.2.p.1">Based on the presence of g.3gpp.atcf feature tag in a Path header field the REGISTRAR (and SCC AS invoked by REGISTRAR) determines that ATCF is in the path for terminating requests sent to Alice.  </p>
<p id="rfc.section.9.2.p.2">NOTE: The Contact header field of the REGISTER request contains a URI at which Alice can be directly reached, so it would be inappropriate to indicate the ATCF support of handover feature in the Contact header field.  </p>
<div id="#rfc.figure.2"></div>
<div id="#fig-arch-escc-a"></div>
<pre> 
     Alice                        P1 (ATCF)                REGISTRAR
       |                           |                           |
       |--- REGISTER--------------&gt;|                           |
       |                           |                           |
       |                           |--- REGISTER--------------&gt;|
       |                           |    Path: P1;+g.3gpp.atcf  |
       |                           |                           |
       |                           |                           |
       |                           |&lt;-- 200 OK ----------------|
       |                           |    Path: P1;+g.3gpp.atcf  |
       |                           |    Service-Route: REG     |
       |&lt;-- 200 OK ----------------|                           |
       |    Path: P1;+g.3gpp.atcf  |                           |
       |    Service-Route: REG     |                           |
       |                           |                           |

					</pre>
<h1 id="rfc.section.9.3">
<a href="#rfc.section.9.3">9.3.</a> <a href="#ex-escc-session" id="ex-escc-session">Example: IMS Enhanced Service Continuity, identifying sessions subject to handover</a>
</h1>
<p id="rfc.section.9.3.p.1">Based on the presence of g.3gpp.srvcc feature tag in a Record-Route header field the ATCF determines that the session is subject to the handover.  </p>
<div id="#rfc.figure.3"></div>
<div id="#fig-arch-escc"></div>
<pre> 
     Alice      P2 (ATCF)      P1 (SCC AS                      Bob
                                of Alice)
       |            |               |                           |
       |--- INVITE-&gt;|               |                           |
       |            |--- INVITE----&gt;|                           |
       |            |    Record-Route: P2                       |
       |            |               |--- INVITE----------------&gt;|
       |            |               |    Record-Route: P1, P2   |
       |            |               |                           |
       |            |               |                           |
       |            |               |&lt;-- 200 OK ----------------|
       |            |               |    Record-Route: P1, P2   |
       |            |               |                           |
       |            |&lt;--- 200 OK----|                           |
       |            |     Record-Route: P1;g.3gpp.srvcc, P2     |
       |&lt;-- 200 OK--|               |                           |
       |    Record-Route: P1;g.3gpp.srvcc, P2                   |
       |            |               |                           |

					</pre>
<h1 id="rfc.section.9.4">
<a href="#rfc.section.9.4">9.4.</a> <a href="#ex-iut" id="ex-iut">Example: IMS Inter-UE Transfer</a>
</h1>
<p id="rfc.section.9.4.p.1">Based on the presence of g.3gpp.iut-focus feature tag in a Record-Route header field the SCC AS serving Cecil determines that the session already has a local hub.  </p>
<p id="rfc.section.9.4.p.2">NOTE: The Contact header field of the INVITE request contains the GRUU of Bob, so it would be inappropriate to indicate the SCC AS support of the handover feature in the Contact header field.  </p>
<div id="#rfc.figure.4"></div>
<div id="#fig-arch-iut"></div>
<pre> 
     Alice Cecil          P1 (SCC AS    P2 (SCC AS               Bob
                           of Alice)     of Cecil)
       |     |                 |             |                    |
       | Session of audio and video between Alice and Bob where   |
       | SCC AS of Alice is in signalling path                    |
       |&lt;======================+=================================&gt;|
       |     |                 |             |                    |
       |--move audio to Cecil-&gt;|             |                    |
       |     |                 |             |                    |
       |     |                 |-INVITE----&gt; |                    |
       |     |                 | Record-Route: P1;g.3gpp.iut-focus
       |     |                 |             |                    |
       |     |                 |             |                    |
       |     |                 |             |                    |
       |     |&lt;-INVITE-----------------------|                    |
       |     |  Record-Route: P2             |                    |
       |     |  Record-Route: P1;g.3gpp.iut-focus                 |
       |     |                 |             |                    |
       |     |                 |             |                    |
       |     |                 |             |                    |
       |     |                 |             |                    |
       |     |                 |             |                    |
       |     |                 |             |                    |
       |     |                 |             |                    |

					</pre>
<h1 id="rfc.section.10">
<a href="#rfc.section.10">10.</a> IANA Considerations</h1>
<p id="rfc.section.10.p.1">TBD </p>
<h1 id="rfc.section.11">
<a href="#rfc.section.11">11.</a> <a href="#sec-security" id="sec-security">Security Considerations</a>
</h1>
<p id="rfc.section.11.p.1">Feature tags can provide sensitive information about a SIP entity.  RFC 3840 cautions against providing sensitive information to another party. Once this information is given out, any use may be made of it.  </p>
<h1 id="rfc.section.12">
<a href="#rfc.section.12">12.</a> <a href="#sec-acks" id="sec-acks">Acknowledgements</a>
</h1>
<p id="rfc.section.12.p.1">Thanks to Paul Kyzivat for his comments and guidance on the mailing list.  </p>
<h1 id="rfc.section.13">
<a href="#rfc.section.13">13.</a> Change Log</h1>
<p id="rfc.section.13.p.1">[RFC EDITOR NOTE: Please remove this section when publishing]</p>
<p id="rfc.section.13.p.2">Changes from draft-holmberg-sipcore-proxy-feature-01 </p>

<ul>
<li>Requirement section added</li>
<li>Use-cases and examples updated based on work in 3GPP</li>
</ul>

<p> </p>
<p id="rfc.section.13.p.3">Changes from draft-holmberg-sipcore-proxy-feature-00 </p>

<ul>
<li>Additional use-cases added</li>
<li>Direction section added</li>
</ul>

<p> </p>
<h1 id="rfc.references">
<a href="#rfc.references">14.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">14.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3261">[RFC3261]</b></td>
<td class="top">
<a>Rosenberg, J.</a>, <a>Schulzrinne, H.</a>, <a>Camarillo, G.</a>, <a>Johnston, A.</a>, <a>Peterson, J.</a>, <a>Sparks, R.</a>, <a>Handley, M.</a> and <a>E. Schooler</a>, "<a href="http://tools.ietf.org/html/rfc3261">SIP: Session Initiation Protocol</a>", RFC 3261, June 2002.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3840">[RFC3840]</b></td>
<td class="top">
<a>Rosenberg, J.</a>, <a>Schulzrinne, H.</a> and <a>P. Kyzivat</a>, "<a href="http://tools.ietf.org/html/rfc3840">Indicating User Agent Capabilities in the Session Initiation Protocol (SIP)</a>", RFC 3840, August 2004.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">14.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="3GPP.23.237">[3GPP.23.237]</b></td>
<td class="top">
<a>3GPP</a>, "<a>IP Multimedia Subsystem (IMS) Service Continuity; Stage 2</a>", 3GPP TS 23.237 10.7.0, September 2011.</td>
</tr>
<tr>
<td class="reference"><b id="3GPP.24.837">[3GPP.24.837]</b></td>
<td class="top">
<a>3GPP</a>, "<a>IP Multimedia (IM) Core Network (CN) subsystem inter-UE transfer enhancements; Stage 3</a>", 3GPP TR 24.837 10.0.0, April 2011.</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Christer Holmberg</span> 
	  <span class="n hidden">
		<span class="family-name">Holmberg</span>
	  </span>
	</span>
	<span class="org vcardline">Ericsson</span>
	<span class="adr">
	  <span>Hirsalantie 11</span>

	  <span class="vcardline">
		<span class="locality">Jorvas</span>,  
		<span class="region"></span>
		<span class="code">02420</span>
	  </span>
	  <span class="country-name vcardline">Finland</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:christer.holmberg@ericsson.com">christer.holmberg@ericsson.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Ivo Sedlacek</span> 
	  <span class="n hidden">
		<span class="family-name">Sedlacek</span>
	  </span>
	</span>
	<span class="org vcardline">Ericsson</span>
	<span class="adr">
	  <span>Scheelev&#228;gen 19C</span>

	  <span class="vcardline">
		<span class="locality">Lund</span>,  
		<span class="region"></span>
		<span class="code">22363</span>
	  </span>
	  <span class="country-name vcardline">Sweden</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:ivo.sedlacek@ericsson.com">ivo.sedlacek@ericsson.com</a></span>

  </address>
</div>

</body>
</html>