



Network Working Group                                             Y. Zhu
Internet-Draft                                                   H. Chen
Intended status: Standards Track                           China Telecom
Expires: January 4, 2018                                           Z. Du
                                                                 M. Chen
                                                                  Huawei
                                                            July 3, 2017


                 ISIS Extensions for Flexible Ethernet
                   draft-zcdc-isis-flexe-extention-01

Abstract

   This document specifies the extensions to the IS-IS routing protocol
   to carry and flood Flex Ethernet (FlexE) link state information.  The
   FlexE link state information is necessary for a node or a controller
   to compute a path that is required to over FlexE links.

Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC2119].

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on January 4, 2018.

Copyright Notice

   Copyright (c) 2017 IETF Trust and the persons identified as the
   document authors.  All rights reserved.





Zhu, et al.              Expires January 4, 2018                [Page 1]

Internet-Draft               ISIS for FlexE                    July 2017


   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  FlexE Link Advertisement  . . . . . . . . . . . . . . . . . .   3
   3.  FlexE Sub-link Advertisement  . . . . . . . . . . . . . . . .   6
   4.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   6
     4.1.  FlexE Switching Type  . . . . . . . . . . . . . . . . . .   6
     4.2.  FlexE LSP Encoding Type . . . . . . . . . . . . . . . . .   6
     4.3.  FlexE Interface Sub-TLV . . . . . . . . . . . . . . . . .   7
   5.  Security Consideration  . . . . . . . . . . . . . . . . . . .   7
   6.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   7
   7.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   7
     7.1.  Normative References  . . . . . . . . . . . . . . . . . .   7
     7.2.  Informative References  . . . . . . . . . . . . . . . . .   7
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   8

1.  Introduction

   Flex Ethernet (FlexE) [I-D.izh-ccamp-flexe-fwk] provides a generic
   mechanism for supporting a variety of Ethernet MAC rates that may or
   may not correspond to any existing Ethernet PHY rate.  This includes
   MAC rates that are both greater than (through bonding) and less than
   (through sub-rate and channelization) the Ethernet PHY rates used to
   carry Ethernet traffic.

   FlexE supports interface bonding, a bonded interface is consisted of
   from 1 to n 100GBASE-R PHYs (other types of PHY will be supported in
   the future), the bonded interface is called FlexE interface in this
   document.  FlexE also supports interface channelization, a FlexE
   interface can be channelized into multiple sub-interfaces, the sub-
   interface is called FlexE sub-interface in the rest of this document.

   The FlexE mechanism operates using a calendar which assigns 66B block
   positions on sub-calendars on each PHY of a FlexE interface to each
   of the FlexE flows.  The calendar has a granularity of 5G, and has a
   length of 20 slots for a 100G interface.  Currently, only 100GBASE-R
   PHY and 5G granularity are supported in FlexE implementation




Zhu, et al.              Expires January 4, 2018                [Page 2]

Internet-Draft               ISIS for FlexE                    July 2017


   agreement version 1.0 [FlexE], other types (e.g., 200G, 400G) of PHY
   and granularities (e.g., 25G) will be supported in the future.

   A FlexE interface has a number of time slots resource.  These time
   slots can be transparent to the up layer application, the up layer
   application (e.g., RSVP-TE) can just treat the FlexE interface as a
   normal Ethernet interface, or the time slots can be allocated to a
   FlexE LSP though RSVP-TE signaling, or the time slots can be
   allocated to form a FlexE sub-interface though configuration or some
   dynamic protocols.  How to signal the FlexE LSP or configure the
   FlexE sub-interface is out of the scope of this document.

   The logical link that connects two FlexE interfaces residing in two
   adjacent nodes is called FlexE link, and the logical link that
   connects two FlexE sub-interfaces residing in two adjacent nodes is
   call FlexE sub-link.

   More details about FlexE can be found in FlexE framework document
   [I-D.izh-ccamp-flexe-fwk].

   This document defines extensions to ISIS protocol to advertise the
   FlexE TE link and sub-link state information.

2.  FlexE Link Advertisement

   This document re-uses the Interface Switching Capability Descriptor
   (ISCD) sub-TLV for the advertisement of FlexE link state information.
   The ISCD is a sub-TLV of the extended IS reachability TLV [RFC5307],
   it is defined to describes the switching capability of an interface.
   The following figure (Figure 1) illustrates encoding of the Value
   field of the ISCD sub-TLV.




















Zhu, et al.              Expires January 4, 2018                [Page 3]

Internet-Draft               ISIS for FlexE                    July 2017


        0                   1                   2                   3
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       | Switching Cap |   Encoding    |           Reserved            |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                  Max LSP Bandwidth at priority 0              |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                  Max LSP Bandwidth at priority 1              |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                  Max LSP Bandwidth at priority 2              |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                  Max LSP Bandwidth at priority 3              |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                  Max LSP Bandwidth at priority 4              |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                  Max LSP Bandwidth at priority 5              |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                  Max LSP Bandwidth at priority 6              |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                  Max LSP Bandwidth at priority 7              |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |           Switching Capability-specific information           |
       |                     (variable)                                |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                         Figure 1: ISCD sub-TLV

   To support FlexE link advertisement, new "Switching Cap" and
   "Encoding" are defined as follows:

   The Switching Capability (Switching Cap) for FlexE interface is as
   below:

   Value    Name
   -----    --------------
   TBD1     FlexE-Switching

   The Encoding Type for FlexE:

   Value    Name
   -----    --------------
   TBD2     FlexE

   The "Switching Capability-specific information" field for FlexE
   interface is defined as below.  It is referred to as FlexE Interface
   sub-TLV in this document.





Zhu, et al.              Expires January 4, 2018                [Page 4]

Internet-Draft               ISIS for FlexE                    July 2017


        0                   1                   2                   3
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |         Type = TBD3           |          Length               |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |   Granularity |                   Reserved                    |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                  Available Slots at priority 0                |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                  Available Slots at priority 1                |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                  Available Slots at priority 2                |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                  Available Slots at priority 3                |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                  Available Slots at priority 4                |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                  Available Slots at priority 5                |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                  Available Slots at priority 6                |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                  Available Slots at priority 7                |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                      Figure 2: FlexE Interface sub-TLV


   The Type field is 2 octets in length and the value is TBD3.

   The Length field is 2 octets in length that indicates the total
   length of the TLV in octet.

   The Granularity is 1 octet in length and its value identifies the
   granularity of the FlexE time slots of a FlexE interface.  Current
   OIF agreement only allows the "5G" granularity, other granularities
   may be defined in the future.

   Value    Granularity
   -----    --------------
   0        Reserved
   1        5G
   2-254    Unassigned
   255      Reserved

   For each PHY of a FlexE interface, there are two calendars, one is
   called Active calendar and the other is called Backup calendar.  The
   two calendars are used to facilitate reconfiguration, for example,




Zhu, et al.              Expires January 4, 2018                [Page 5]

Internet-Draft               ISIS for FlexE                    July 2017


   FlexE flow resizing can be achieved through calendar updates.  More
   detail about FlexE calendar can be found [FlexE].

   Each Available Slots at priority n is 4-octet in length that
   indicates the maximum number of slots available at priority 'n' on
   active calendar of the FlexE interface.

   For a FlexE interface, as said above, 5G granularity is only
   supported for now, but multiple granularities may be supported in the
   future.  To support this, FlexE Interface sub-TLV can occur multiple
   times in a ISCD sub-TLV, but for each granularity, only one FlexE
   Interface sub-TLV can be included and it carries the available time
   slots of the granularity of the FlexE interface.  When multiple FlexE
   Interface sub-TLVs for the same granularity occur, only the first
   FlexE Interface sub-TLV is considered to be valid, the rests MUST be
   ignored.

3.  FlexE Sub-link Advertisement

   Through FlexE channelization, a FlexE Link can be sliced into a
   number of FlexE sub-links, each FlexE sub-link has dedicated
   bandwidth and is isolated from other FlexE sub-links.  A set of FlexE
   sub-links can be allocated to a specific application/user to form a
   sliced network.  From link characteristic point of view, a FlexE sub-
   link is same as a real point-2-point link, it can be advertised and
   used as a normal point-2-point link.

4.  IANA Considerations

4.1.  FlexE Switching Type

   IANA is requested to allocate a new switching type from the
   "Switching Types" registry of "Generalized Multi-Protocol Label
   Switching (GMPLS) Signaling Parameters" registry.

   Value  Name             Reference
   -----  ---------------  -------------
   TBD1   FlexE-Switching  This document

4.2.  FlexE LSP Encoding Type

   IANA is requested to allocate a new LSP encoding type from the "LSP
   Encoding Types" registry of "Generalized Multi-Protocol Label
   Switching (GMPLS) Signaling Parameters" registry.

   Value  Name     Reference
   -----  -------  -------------
   TBD2   FlexE    This document



Zhu, et al.              Expires January 4, 2018                [Page 6]

Internet-Draft               ISIS for FlexE                    July 2017


4.3.  FlexE Interface Sub-TLV

   IANA is requested to create and maintain a new sub-registry, the
   "Types for sub-TLVs of FlexE Switching Capability Specific
   Information" registry under the "IS-IS TLV Codepoints" registry.

   Value  sub-TLV Name      Reference
   -----  ---------------   -------------
   TBD3   FlexE Interface   This document

5.  Security Consideration

   This document describes a mechanism for advertising FlexE link state
   information through IS-IS LSPs and does not introduce any new
   security issues.

6.  Acknowledgements

7.  References

7.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <http://www.rfc-editor.org/info/rfc2119>.

   [RFC5029]  Vasseur, JP. and S. Previdi, "Definition of an IS-IS Link
              Attribute Sub-TLV", RFC 5029, DOI 10.17487/RFC5029,
              September 2007, <http://www.rfc-editor.org/info/rfc5029>.

   [RFC5307]  Kompella, K., Ed. and Y. Rekhter, Ed., "IS-IS Extensions
              in Support of Generalized Multi-Protocol Label Switching
              (GMPLS)", RFC 5307, DOI 10.17487/RFC5307, October 2008,
              <http://www.rfc-editor.org/info/rfc5307>.

7.2.  Informative References

   [FlexE]    OIF, "Flex Ethernet Implementation Agreement Version 1.0
              (OIF-FLEXE-01.0)", March 2016.

   [I-D.izh-ccamp-flexe-fwk]
              Hussain, I., Valiveti, R., Wang, Q., Andersson, L., Chen,
              M., and z. zhenghaomian@huawei.com, "GMPLS Routing and
              Signaling Framework for Flexible Ethernet (FlexE)", draft-
              izh-ccamp-flexe-fwk-03 (work in progress), June 2017.





Zhu, et al.              Expires January 4, 2018                [Page 7]

Internet-Draft               ISIS for FlexE                    July 2017


Authors' Addresses

   Yongqing Zhu
   China Telecom
   109, West Zhongshan Road, Tianhe District, Guangzhou,China

   Email: zhuyq@gsta.com


   Huanan Chen
   China Telecom
   109, West Zhongshan Road, Tianhe District, Guangzhou,China

   Email: chenhuanan@gsta.com


   Zongpeng Du
   Huawei

   Email: duzongpeng@huawei.com


   Mach(Guoyi) Chen
   Huawei

   Email: mach.chen@huawei.com

























Zhu, et al.              Expires January 4, 2018                [Page 8]
