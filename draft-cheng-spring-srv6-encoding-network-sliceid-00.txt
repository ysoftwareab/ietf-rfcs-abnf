SPRING WG                                                        W. Cheng
Internet-Draft                                                   L. Gong
Intended status: Standards Track                             China Mobile                                                            
Expires: January 12, 2022                                  Changwang. Lin 
                                                          H3C Corporation 
                                                             July 12, 2021
                                             
                                                                        
                                                                        
            Encoding Network Slice Identification for SRv6              
         draft-cheng-spring-srv6-encoding-network-sliceid-00            

Abstract
   
   This document describe a method to encode network slicing identifier
   within SRv6 domain.
   
Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on January 12, 2022.
   
Copyright Notice

   Copyright (c) 2021 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.
   
Cheng, et al.           Expires January 12, 2022                  [Page 1]

Internet-Draft     Encoding Network Slice Identification      July 2021

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
     1.1.  Requirements Language . . . . . . . . . . . . . . . . . .   2
   2.  Slice Identifier  . . . . . . . . . . . . . . . . . . . . . .   2
   3.  SLID Assignment . . . . . . . . . . . . . . . . . . . . . . .   2
   4.  Per-Slice Forwarding  . . . . . . . . . . . . . . . . . . . .   3
   5.  Backward Compatibility  . . . . . . . . . . . . . . . . . . .   3
   6.  Acknowledgments . . . . . . . . . . . . . . . . . . . . . . .   4
   7.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   4
     7.1.  Normative References  . . . . . . . . . . . . . . . . . .   4
     7.2.  Informative References  . . . . . . . . . . . . . . . . .   4
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   4

1.  Introduction

   SRv6 Network Programming[RFC8986] enables the creation of overlays 
   with underlay optimization to be deployed in an SR domain[RFC8402].

   As defined in [RFC8754], all inter-domain packets are encapsulated
   for the part of the packet journey that is within the SR domain. The
   outer IPv6 header [RFC8200] is originated by a node of the SR domain
   and is destined to a node of the SR domain.

   This document describes a novelty method to encode slice identifier   
   in the outer IPv6 header of an SR domain. Unlike other proposed 
   methods before, which will bring side effects on existed functions,
   by encoding network slicing identifier in the source IPv6 address of 
   the outer header, this method avoids the drawbacks which previous 
   proposals incur. 
   
1.1.  Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC2119].   
   
2.  Slice Identifier

   Slice identifier (SLID) is a 16-bit Identifier which uniquely define 
   a slicing of the network in the specified SR domain.

3.  SLID Assignment

   When SR domain enables network slicing, the ingress PE should reserve
   16 least significant bits in its locater for slicing use.  When a 
   packet enters the SR domain from an ingress PE, the ingress PE
   encapsulates the packet in an outer IPv6 header and optional SRH as
   defined in [RFC8754].  The ingress PE MAY also classify the packet
   into a slice and set the slice identifier as follows:

Cheng, et al.           Expires January 12, 2022                  [Page 2]

Internet-Draft     Encoding Network Slice Identification      July 2021
   
   o  Set the SPI bit (SLID Presence Indicator) in the Traffic Class
      field of the outer IPv6 header.
   
   o  Write this SLID in the 16 least significant bits of source address
      of the outer IPv6 header. 
   
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |Version|   SPI Bit     |           Flow Label                  |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |         Payload Length        |  Next Header  |   Hop Limit   |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   +                                                               +
   |                                                               |
   +                         Source Address                        +
   |                                                               |
   +                               +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                               |             SLID              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   +                                                               +
   |                                                               |
   +                      Destination Address                      +
   |                                                               |
   +                                                               +
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   
   The choice of the SPI bit from within the IPv6 Traffic Class field is
   a domain-wide configuration and is outside the scope of this 
   document.
   
4.  Per-Slice Forwarding

   Any router within the SR domain that forwards a packet with SPI bit
   set uses the SLID to select a slice and apply per-slice policies.
   
5.  Backward Compatibility

   PE routers that do not set the SPI bit do not enable the SLID
   semantic of the IPv6 source address bits.  Hence, SLID-aware routers 
   would not attempt to classify these packets into a slice.
   
   Any router that does not process the SPI nor the SLID forwards
   packets as usual.

Cheng, et al.           Expires January 12, 2022                  [Page 3]

Internet-Draft     Encoding Network Slice Identification      July 2021   

6.  Acknowledgements

   The authors would like to thank AAAA, BBBB and CCCC for their 
   insightful feedback on this document.

7.  References

7.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC8986]  Filsfils, C., Camarillo, P., Leddy, J., Voyer, D.,
              Matsushima, S., and Z. Li,  
              Segment Routing over IPv6 (SRv6) Network Programming, 
              RFC 8986, DOI 10.17487/RFC8986, February 2021, 
              <https://www.rfc-editor.org/info/rfc8986>.

   [RFC8402]  Filsfils, C., Ed., Previdi, S., Ed., Ginsberg, L.,
              Decraene, B., Litkowski, S., and R. Shakir, "Segment
              Routing Architecture", RFC 8402, DOI 10.17487/RFC8402,
              July 2018, <https://www.rfc-editor.org/info/rfc8402>.

   [RFC8754]  Filsfils, C., Ed., Dukes, D., Ed., Previdi, S., Leddy, J.,
              Matsushima, S., and D. Voyer, "IPv6 Segment Routing Header
              (SRH)", RFC 8754, DOI 10.17487/RFC8754, March 2020,
              <https://www.rfc-editor.org/info/rfc8754>.

7.2.  Informative References

   [RFC8200]  Deering, S., and Hinden, D., "Internet Protocol, Version 6
              (IPv6) Specification", RFC 8200, DOI 10.17487/RFC8200, 
              July 2017, <https://www.rfc-editor.org/info/rfc8200>.

Authors' Addresses


   Weiqiang Cheng
   China Mobile
   Beijing
   China

   Email: chengweiqiang@chinamobile.com
 
   Liyan Gong
   China Mobile
   Beijing
   China

   Email: gongliyan@chinamobile.com 
   
   Changwang Lin
   H3C Corporation
   Beijing
   China

   Email: linchangwang.04414@h3c.com

   
Cheng, et al.           Expires January 12, 2022                  [Page 4]

Internet-Draft     Encoding Network Slice Identification      July 2021
