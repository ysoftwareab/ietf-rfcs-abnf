


Network Working Group                                           J. Snell
Internet-Draft                                         February 27, 2006
Expires: August 31, 2006


               Atom Syndication Format Revision Tracking
                  draft-snell-atompub-revision-00.txt

Status of this Memo

   By submitting this Internet-Draft, each author represents that any
   applicable patent or other IPR claims of which he or she is aware
   have been or will be disclosed, and any of which he or she becomes
   aware will be disclosed, in accordance with Section 6 of BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on August 31, 2006.

Copyright Notice

   Copyright (C) The Internet Society (2006).

Abstract

   This specification defines metadata extensions for use with the Atom
   Syndication Format to track revisions of entries.










Snell                    Expires August 31, 2006                [Page 1]

Internet-Draft               Atom Revisions                February 2006


Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3
   2.  Notational Conventions . . . . . . . . . . . . . . . . . . . .  3
   3.  The 'revision' element . . . . . . . . . . . . . . . . . . . .  3
   4.  The 'host' Element . . . . . . . . . . . . . . . . . . . . . .  5
   5.  The 'comment' Element  . . . . . . . . . . . . . . . . . . . .  6
   6.  The 'deleted-entry' element  . . . . . . . . . . . . . . . . .  7
   7.  The 'history' Link Relation  . . . . . . . . . . . . . . . . .  8
   8.  The 'diff' Link Relation . . . . . . . . . . . . . . . . . . .  9
   9.  The 'initial-revision' Link Relation . . . . . . . . . . . . . 10
   10. The 'current-revision' Link Relation . . . . . . . . . . . . . 10
   11. The 'this-revision' Link Relation  . . . . . . . . . . . . . . 10
   12. The 'prior-revision' Link Relation . . . . . . . . . . . . . . 11
   13. The 'next-revision' Link Relation  . . . . . . . . . . . . . . 11
   14. Security Considerations  . . . . . . . . . . . . . . . . . . . 12
   15. IANA Considerations  . . . . . . . . . . . . . . . . . . . . . 12
   16. Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . 13
   17. References . . . . . . . . . . . . . . . . . . . . . . . . . . 14
   Author's Address . . . . . . . . . . . . . . . . . . . . . . . . . 15
   Intellectual Property and Copyright Statements . . . . . . . . . . 16






























Snell                    Expires August 31, 2006                [Page 2]

Internet-Draft               Atom Revisions                February 2006


1.  Introduction

   This specification defines metadata extensions for use with the Atom
   Syndication Format [RFC4287] to track revisions of entries.  The
   extensions include versioning of entries, links to change summaries
   and histories, and indicators as to the relative importance, or
   significance of the revision.


2.  Notational Conventions

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in BCP 14, [RFC2119]

   This specification uses XML Namespaces [W3C.REC-xml-names-19990114]
   to uniquely identify XML element names.  It uses the following
   namespace prefix for the indicated namespace URI;

   {Ed.  Note: this namespace MUST be changed to a proper IETF namespace
   scheme prior to publication}

    "ar": "http://purl.org/atompub/revision/1.0"


3.  The 'revision' element

   The 'revision' element MAY appear as a child of an atom:entry element
   to identify a "revision number" for the entry.

     revision = element ar:revision {
       atomCommonAttributes,
       attribute number { text },
       attribute scheme { atomIRI }?,
       attribute label { text }?,
       attribute when { date-time }?,
       attribute initial { 'yes' | 'no' }?,
       attribute final { 'yes' | 'no' }?,
       attribute significant { 'yes' | 'no' }?,
       ( atomTextConstruct )
     }

   The 'revision' element is an extension of the Atom Text Construct
   that is used to identify a "revision number" for an entry.  The
   revision element MUST contain a 'number' attribute whose value
   identifies the revision number of the entry.  The text value of the
   element MAY be used to provide a summary of the revision.  Within the
   number attribute, escaped versions of characters such as "&" and ">"



Snell                    Expires August 31, 2006                [Page 3]

Internet-Draft               Atom Revisions                February 2006


   represent those characters, not markup.

   The 'scheme' attribute MAY be used to provide an IRI identifying the
   scheme used to produce the revision number specified by the 'number'
   attribute.  If the scheme attribute is not specified, the value of
   the 'number' attribute MUST be a non-negative numeric value.

   The 'label' attribute MAY be used to associate a simple human
   readable text label with the revision.  Within the value, escaped
   versions of characters such as "&" and ">" represent those
   characters, not markup.

   The 'when' attribute MAY be used to provide an RFC3339 date-time
   specifying the date and time that the revision was performed.  An
   uppercase "T" character MUST be used to separate date and time, and
   an uppercase "Z" character MUST be present in the absence of a
   numeric time zone offset.

   The 'initial' attribute indicates whether or not this revision
   represents the initial version of an entry.  The value is either
   "yes" or "no".  When missing, the value is considered to be "no".

   The 'final' attribute indicates whether or not this revision
   represents the final version of an entry.  The value is either "yes"
   or "no".  Feed publishers SHOULD NOT continue to update atom:entry's
   that have been marked as "final" revisions.  Atom processors MAY
   ignore atom:entry elements with revision element values and atom:
   updated values greater than those specified in a "final" revision.
   When missing, the value is considered to be "no".

   The 'significant' attribute indicates whether or not the revision
   should be considered to be "significant" or not.  The value is either
   "yes" or "no".  Atom processors MAY choose to process or present
   significant revisions differently than non-significant revisions.
   When missing, the value is considered to be "no".
















Snell                    Expires August 31, 2006                [Page 4]

Internet-Draft               Atom Revisions                February 2006


   For example,

     <feed xmlns="http://www.w3.org/2005/Atom">
       ...
       <entry>
         ...
         <ar:revision
           number="0.1"
           when="2006-02-21T00:00:00Z"
           initial="yes"
           final="no"
           significant="yes"
           type="text">
             Fixed typographical and factual errors
         </ar:revision>
         ...
       </entry>
     </feed>

   An Atom entry is a revision of a prior entry only if the two entries
   share the same atom:id value and the revision number attribute and
   atom:updated element values are both greater than the previous
   version of the entry.


4.  The 'host' Element

   Atom Person Constructs contained within an atom entry MAY contain a
   'host' element whose value is either the IP Address or Domain host
   name from which the person created or modified the entry.

   Within value of the 'host' element, the escaped versions of
   characters such as "&" and ">" represent those characters, not
   markup.

     host = element ar:host { text }















Snell                    Expires August 31, 2006                [Page 5]

Internet-Draft               Atom Revisions                February 2006


   For example,

     <feed xmlns="http://www.w3.org/2005/Atom">
       ...
       <entry>
         ...
         <author>
           <name>James</name>
           <ar:host>192.168.1.106</ar:host>
         </author>
         ...
       </entry>
     </feed>


5.  The 'comment' Element

   Atom entry and feed elements MAY contain zero or more 'comment'
   elements that provide the equivalent to editorial notes.

     comment = element ar:comment {
       atomCommonAttributes,
       (atomAuthor?,
        atomUpdated,
        atomSummary,
        undefinedContent)
     }

   The 'comment' element SHOULD contain an atom:author element
   identifying the person or entity that created the comment.

   The 'comment' element MUST contain one atom:updated element that
   specifies the date and time that the comment was created and added to
   the entry or feed.

   The 'comment' element MUST contain one atom:summary element that
   contains containing the text of the comment.














Snell                    Expires August 31, 2006                [Page 6]

Internet-Draft               Atom Revisions                February 2006


   For example,

     <feed xmlns="http://www.w3.org/2005/Atom">
       ...
       <entry>
         ...
         <ar:comment>
           <author><name>James</name></author>
           <updated>2006-02-21T00:00:00Z</updated>
           <summary>
             We still need to fix the factual errors in this entry
           </summary>
         </ar:comment>
         ...
       </entry>
     </feed>


6.  The 'deleted-entry' element

   The 'deleted-entry' element MAY appear as a child of atom:feed to
   represent an Atom Entry that has been removed from the feed.

     deletedEntry = element at:deleted-entry {
       atomCommonAttributes,
       ( & atomID,
         & revision?,
         & when,
         & by?,
         & undefinedContent )
     }

     when = element at:when { atomDateConstruct }
     by = element at:by { atomPersonConstruct }


   The 'deleted-entry' element MUST contain one 'atom:id' element whose
   value specifies the atom:id of the deleted entry.

   The 'deleted-entry' MAY contain one revision element.

   One 'when' element MUST be provided specifying the instant the entry
   was deleted.  The 'when' element is an Atom Date Construct as defined
   by [RFC4287].

   One 'by' element MAY by provided to identify the person or entity
   that removed the entry from the feed.  The 'by' element is an Atom
   Person Construct as defined by [RFC4287].



Snell                    Expires August 31, 2006                [Page 7]

Internet-Draft               Atom Revisions                February 2006


   Atom Feed Documents MAY contain any number of 'deleted-entry'
   elements.

     <feed xmlns="http://www.w3.org/2005/Atom">
        ...
        <ar:deleted-entry>
          <id>tag:example.org,2005:/entries/1</id>
          <ar:revision
            number="3">Removed comment spam</ar:revision>
          <ar:when>2005-11-29T12:12:12Z</ar:when>
          <ar:by>
            <name>John Doe</name>
            <email>jdoe@example.org</email>
            <ar:host>192.168.1.106</ar:host>
          </ar:by>
        </ar:deleted-entry>
        ...
     </feed>

   An Atom feed MAY contain atom:entry elements and 'deleted-entry'
   elements sharing the same atom:id value.  Atom processors MUST ignore
   any 'deleted-entry' elements sharing an atom:id value with an atom:
   entry whose 'updated' element specifies a date and time more recent
   than the 'deleted-entry' element's 'when' value.


7.  The 'history' Link Relation

   Atom entry elements MAY contain an atom:link element with a rel
   attribute value of 'history' whose href attribute identifies a
   resource describing the revision history of the entry.  If the
   history link points to an Atom Feed Document, the referenced feed
   MUST contain one or more atom:entry or 'deleted-entry' elements, each
   of which represents one revision of the entry.  The entry and
   deleted-entry elements MUST have the same atom:id value and MUST have
   different 'revision', atom:updated or when values.

     <feed xmlns="http://www.w3.org/2005/Atom">
       ...
       <entry>
         ...
         <link rel="history" type="application/atom+xml"
           href="http://example.org/entry/1/history" />
         ...
       </entry>
     </feed>





Snell                    Expires August 31, 2006                [Page 8]

Internet-Draft               Atom Revisions                February 2006


   An example History Feed

     <feed xmlns="http://www.w3.org/2005/Atom">
       ...
       <ar:deleted-entry>
         <id>tag:example.org,2006:entries/1</id>
         <ar:revision
           number="3"
           final="yes"
           significant="yes" />
         <ar:when>2006-02-27T00:00:00Z</ar:when>
       </ar:deleted-entry>
       <entry>
         <id>tag:example.org,2006:entries/1</id>
         <updated>2006-02-26T00:00:00Z</updated>
         <ar:revision
           number="2"
           significant="no">Fixed typos</ar:revision>
         ...
       </entry>
       <entry>
         <id>tag:example.org,2006:entries/1</id>
         <updated>2006-02-25T00:00:00Z</updated>
         <ar:revision
           number="1"
           initial="yes"
           significant="yes" />
         ...
       </entry>
     </feed>


8.  The 'diff' Link Relation

   Atom entry elements MAY contain an atom:link element with a rel
   attribute value of 'diff' whose href attribute identifies a resource
   describing the deltas between this revision of the entry and the
   previous revision.

     <feed xmlns="http://www.w3.org/2005/Atom">
       ...
       <entry>
         ...
         <link rel="diff"
           href="http://example.org/entry/1/diff" />
         ...
       </entry>
     </feed>



Snell                    Expires August 31, 2006                [Page 9]

Internet-Draft               Atom Revisions                February 2006


9.  The 'initial-revision' Link Relation

   Atom entry elements MAY contain an atom:link element with a rel
   attribute value of 'initial-revision' whose href attribute specifies
   the URI of an Atom Entry Document representing the initial version of
   the entry.

     <feed xmlns="http://www.w3.org/2005/Atom">
       ...
       <entry>
         ...
         <ar:revision number="0.2" />
         <link rel="initial-revision" type="application/atom+xml"
           href="http://example.org/entry/1?revision=0.1" />
         ...
       </entry>
     </feed>


10.  The 'current-revision' Link Relation

   Atom entry elements MAY contain an atom:link element with a rel
   attribute value of 'current-revision' whose href attribute specifies
   the URI of an Atom Entry Document representing the current version of
   the entry.

     <feed xmlns="http://www.w3.org/2005/Atom">
       ...
       <entry>
         ...
         <ar:revision number="0.2" />
         <link rel="current-revision" type="application/atom+xml"
           href="http://example.org/entry/1" />
         ...
       </entry>
     </feed>


11.  The 'this-revision' Link Relation

   Atom entry elements MAY contain an atom:link element with a rel
   attribute value of 'this-revision' whose href attribute specifies the
   URI of an Atom Entry Document representing the this version of the
   entry.







Snell                    Expires August 31, 2006               [Page 10]

Internet-Draft               Atom Revisions                February 2006


     <feed xmlns="http://www.w3.org/2005/Atom">
       ...
       <entry>
         ...
         <ar:revision number="0.2" />
         <link rel="this-revision" type="application/atom+xml"
           href="http://example.org/entry/1?revision=0.2" />
         ...
       </entry>
     </feed>


12.  The 'prior-revision' Link Relation

   Atom entry elements MAY contain an atom:link element with a rel
   attribute value of 'prior-revision' whose href attribute specifies
   the URI of an Atom Entry Document representing the previous version
   of the entry.

     <feed xmlns="http://www.w3.org/2005/Atom">
       ...
       <entry>
         ...
         <ar:revision number="0.2" />
         <link rel="prior-revision" type="application/atom+xml"
           href="http://example.org/entry/1?revision=0.1" />
         ...
       </entry>
     </feed>


13.  The 'next-revision' Link Relation

   Atom entry elements MAY contain an atom:link element with a rel
   attribute value of 'next-revision' whose href attribute specifies the
   URI of an Atom Entry Document representing the subsequent version of
   the entry.

     <feed xmlns="http://www.w3.org/2005/Atom">
       ...
       <entry>
         ...
         <ar:revision number="0.2" />
         <link rel="next-revision" type="application/atom+xml"
           href="http://example.org/entry/1?revision=0.3" />
         ...
       </entry>
     </feed>



Snell                    Expires August 31, 2006               [Page 11]

Internet-Draft               Atom Revisions                February 2006


14.  Security Considerations

   The extensions defined in this specification are subject to the same
   security considerations as discussed in [RFC4287].


15.  IANA Considerations

   This specification defines seven new link relations for the IANA
   Registry of Link Relations as defined by [RFC4287].









































Snell                    Expires August 31, 2006               [Page 12]

Internet-Draft               Atom Revisions                February 2006


     Attribute Value: history
     Description: identifies a resource describing the
                  revision history of an atom:entry
     Display characteristics: None
     Security considerations: Same as <xref target="RFC4287" />

     Attribute Value: diff
     Description: identifies a resource describing the
                  deltas between the current revision of
                  an atom:entry and its prior version.
     Display characteristics: None
     Security considerations: Same as <xref target="RFC4287" />

     Attribute Value: initial-revision
     Description: identifies an Atom Entry Document describing the
                  initial version of a resource
     Display characteristics: None
     Security considerations: Same as <xref target="RFC4287" />

     Attribute Value: current-revision
     Description: identifies an Atom Entry Document describing the
                  current version of a resource
     Display characteristics: None
     Security considerations: Same as <xref target="RFC4287" />

     Attribute Value: this-revision
     Description: identifies an Atom Entry Document describing the
                  version of the resource containing the this-revision
                  link.
     Display characteristics: None
     Security considerations: Same as <xref target="RFC4287" />

     Attribute Value: prior-revision
     Description: identifies an Atom Entry Document describing the
                  previous version of a resource
     Display characteristics: None
     Security considerations: Same as <xref target="RFC4287" />

     Attribute Value: next-revision
     Description: identifies an Atom Entry Document describing the
                  next version of a resource
     Display characteristics: None
     Security considerations: Same as <xref target="RFC4287" />


16.  Acknowledgements

   The author gratefully acknowledges the feedback from the members of



Snell                    Expires August 31, 2006               [Page 13]

Internet-Draft               Atom Revisions                February 2006


   the Atom Publishing Format and Protocol working group during the
   development of this specification.  Some of the language included in
   this draft has been adapted directly from the Atom Syndication Format
   [RFC4287] in order to maintain a stylistic and technical alignment to
   that specification.

17.  References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC3339]  Klyne, G. and C. Newman, "Date and Time on the Internet:
              Timestamps", RFC 3339, July 2002.

   [RFC4287]  Nottingham, M. and R. Sayre, "The Atom Syndication
              Format", RFC 4287, December 2005.

   [W3C.REC-xml-names-19990114]
              Hollander, D., Bray, T., and A. Layman, "Namespaces in
              XML", W3C REC REC-xml-names-19990114, January 1999.































Snell                    Expires August 31, 2006               [Page 14]

Internet-Draft               Atom Revisions                February 2006


Author's Address

   James M Snell


   Phone:
   Email: jasnell@gmail.com
   URI:   http://snellspace.com











































Snell                    Expires August 31, 2006               [Page 15]

Internet-Draft               Atom Revisions                February 2006


Intellectual Property Statement

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in BCP 78 and BCP 79.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   http://www.ietf.org/ipr.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.


Disclaimer of Validity

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET
   ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Copyright Statement

   Copyright (C) The Internet Society (2006).  This document is subject
   to the rights, licenses and restrictions contained in BCP 78, and
   except as set forth therein, the authors retain all their rights.


Acknowledgment

   Funding for the RFC Editor function is currently provided by the
   Internet Society.




Snell                    Expires August 31, 2006               [Page 16]

