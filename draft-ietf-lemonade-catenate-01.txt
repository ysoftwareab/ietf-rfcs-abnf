


LEMONADE                                                      P. Resnick
Internet-Draft                                     QUALCOMM Incorporated
Expires: June 29, 2004                                 December 30, 2003


       Internet Message Access Protocol (IMAP) CATENATE Extension
                    draft-ietf-lemonade-catenate-01

Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups. Note that other
   groups may also distribute working documents as Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time. It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at http://
   www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on June 29, 2004.

Copyright Notice

   Copyright (C) The Internet Society (2003). All Rights Reserved.

Abstract

   The CATENATE extension to the Internet Message Access Protocol (IMAP)
   allows clients to create messages on the IMAP server which may
   contain a combination of new data along with parts of (or entire)
   messages already on the server. Using this extension, the client can
   catenate parts of an already existing message on to a new message
   without having to first download the data and then upload it back to
   the server.









Resnick                  Expires June 29, 2004                  [Page 1]

Internet-Draft          IMAP CATENATE Extension            December 2003


1. Introduction

   The CATENATE extension to the Internet Message Access Protocol (IMAP)
   [1] allows the client to create a message on the server which can
   include the text of messages (or parts of messages) that already
   exist on the server without having to FETCH them and APPEND them back
   to the server. The CATENATE command works much like the APPEND
   command except that, instead of a single message literal, the command
   can take as arguments any combination of message literals (as
   described in IMAP [1]) and message URLs (as described in the IMAP URL
   Scheme [2] specification). The server takes all of the pieces and
   catenates them into the output message.

   There are some obvious uses for the CATENATE command. The motivating
   use case for this command was to provide a way for a
   resource-constrained client to compose a message for future delivery
   which contains data that already exists in that client's IMAP store.
   Because the client does not have to download and re-upload
   potentially large message parts, bandwidth and processing limitations
   do not have as much impact. (Mechanisms for sending the message are
   outside of the scope of this document.)

   CATENATE can also be used to copy parts of a message to another
   mailbox for archival purposes while getting rid of undesired parts.
   In environments where server storage is limited, a client could get
   rid of large message parts by copying over only the necessary parts
   and then deleting the original message. CATENATE could also be used
   to add data to a message such as prepending message header fields or
   including other data by making a copy of the original and catenating
   the new data.





















Resnick                  Expires June 29, 2004                  [Page 2]

Internet-Draft          IMAP CATENATE Extension            December 2003


2. The CATENATE Capability

   A server which supports this extension returns "CATENATE" as one of
   the responses to the CAPABILITY command.















































Resnick                  Expires June 29, 2004                  [Page 3]

Internet-Draft          IMAP CATENATE Extension            December 2003


3. The CATENATE command

   Arguments:     mailbox name

                  OPTIONAL flag parenthesized list

                  OPTIONAL date/time string

                  one or more message parts to catenate, specified as:

                                 message literal

                                                or

                                 message (or message part) URL

   Responses:     no specific responses for this command

   Result:

                  OK -  catenate completed

                  NO -  catenate error: can't append to that mailbox,
                        error in flags or date/time or message text, or
                        can't fetch that data

                  BAD - command unknown or arguments invalid

   The CATENATE command concatenates all of the message parts and
   appends them as a new message to the end of the specified mailbox.
   The optional flag parenthesized list and date/time string are used
   just as they are in the APPEND command, setting the flags and the
   internal date, respectively. The subsequent parameters specify the
   message parts that are appended sequentially to the output message.

   If a message literal is specified (indicated by the octet count
   enclosed in braces), the octets following the count are appended just
   as they would be with the APPEND command. If a message URL is
   specified, the octets of that body part are appended, as if the
   literal returned in a FETCH BODY response were put in place of the
   message part specifier. The CATENATE command does not cause the \Seen
   flag to be set for any catenated body part.

      Note: This document only describes the behavior of the CATENATE
      command using a message URL (as defined by [2]) which refers to a
      specific message or message part in the currently selected mailbox
      on the current IMAP server. (Because of that, the CATENATE command
      is valid in the selected state for purposes of this



Resnick                  Expires June 29, 2004                  [Page 4]

Internet-Draft          IMAP CATENATE Extension            December 2003


      specification.) Use of a URL that refers to anything other than a
      message or message part from the currently selected mailbox on the
      current IMAP server is outside of the scope of this document,
      would require an extension to this specification, and a server
      implementing only this specification would return NO to such a
      request.

   The client is responsible for making sure that the catenated message
   is in the format of an RFC 2822 [3] message. This includes inserting
   appropriate MIME [4] boundaries between body parts if necessary.

   Responses behave just as the APPEND command. If the server implements
   the IMAP UIDPLUS extension [5], it will also return an APPENDUID
   response code in the tagged OK response.





































Resnick                  Expires June 29, 2004                  [Page 5]

Internet-Draft          IMAP CATENATE Extension            December 2003


4. Formal Syntax

   The following syntax specification uses the Augmented Backus-Naur
   Form (ABNF) [6] notation. Undefined elements are defined in the
   formal syntax of the ABNF [6], IMAP [1], and IMAP URL [2]
   specifications.

       catenate    = "CATENATE" SP mailbox [SP flag-list] [SP date-time]
                     1*(SP (literal / imapurl))


                                Figure 1







































Resnick                  Expires June 29, 2004                  [Page 6]

Internet-Draft          IMAP CATENATE Extension            December 2003


5. Security Considerations

   The CATENATE extension does not raise any security considerations
   that are not present for the base protocol or in the use of IMAP
   URLs, and these issues are discussed in the IMAP [1] and IMAP URL [2]
   documents.













































Resnick                  Expires June 29, 2004                  [Page 7]

Internet-Draft          IMAP CATENATE Extension            December 2003


Normative References

   [1]  Crispin, M., "INTERNET MESSAGE ACCESS PROTOCOL - VERSION 4rev1",
        RFC 3501, March 2003.

   [2]  Newman, C., "IMAP URL Scheme", RFC 2192, September 1997.

   [3]  Resnick, P., "Internet Message Format", RFC 2822, April 2001.

   [4]  Freed, N. and N. Borenstein, "Multipurpose Internet Mail
        Extensions (MIME) Part One: Format of Internet Message Bodies",
        RFC 2045, November 1996.

   [5]  Myers, J., "IMAP4 UIDPLUS extension", RFC 2359, June 1998.

   [6]  Crocker, D. and P. Overell, "Augmented BNF for Syntax
        Specifications: ABNF", RFC 2234, November 1997.


Author's Address

   Peter W. Resnick
   QUALCOMM Incorporated
   5775 Morehouse Drive
   San Diego, CA  92121-1714
   US

   Phone: +1 858 651 4478
   EMail: presnick@qualcomm.com
   URI:   http://www.qualcomm.com/~presnick/





















Resnick                  Expires June 29, 2004                  [Page 8]

Internet-Draft          IMAP CATENATE Extension            December 2003


Intellectual Property Statement

   The IETF takes no position regarding the validity or scope of any
   intellectual property or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; neither does it represent that it
   has made any effort to identify any such rights. Information on the
   IETF's procedures with respect to rights in standards-track and
   standards-related documentation can be found in BCP-11. Copies of
   claims of rights made available for publication and any assurances of
   licenses to be made available, or the result of an attempt made to
   obtain a general license or permission for the use of such
   proprietary rights by implementors or users of this specification can
   be obtained from the IETF Secretariat.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights which may cover technology that may be required to practice
   this standard. Please address the information to the IETF Executive
   Director.


Full Copyright Statement

   Copyright (C) The Internet Society (2003). All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works. However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assignees.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION



Resnick                  Expires June 29, 2004                  [Page 9]

Internet-Draft          IMAP CATENATE Extension            December 2003


   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Acknowledgment

   Funding for the RFC Editor function is currently provided by the
   Internet Society.











































Resnick                  Expires June 29, 2004                 [Page 10]


