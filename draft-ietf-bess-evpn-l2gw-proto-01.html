<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>EVPN Multi-Homing Mechanism for Layer-2 Gateway Protocols</title>
<meta content="Patrice Brissette" name="author">
<meta content="Ali Sajassi" name="author">
<meta content="Luc Andre Burdet" name="author">
<meta content="Daniel Voyer" name="author">
<meta content="
        The existing EVPN multi-homing load-balancing modes defined are
     Single-Active and All-Active. Neither of these multi-homing mechanisms
     adequately represent ethernet-segments facing access networks with Layer-2 Gateway protocols
     such as G.8032, (M)STP, REP, MPLS-TP, etc. These loop-preventing Layer-2 protocols
     require a new multi-homing mechanism defined in this draft. 
    " name="description">
<meta content="xml2rfc 3.12.3" name="generator">
<meta content="L2-GW Protocols" name="keyword">
<meta content="EVPN" name="keyword">
<meta content="Multi-homing" name="keyword">
<meta content="draft-ietf-bess-evpn-l2gw-proto-01" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.12.3
    Python 3.6.12
    appdirs 1.4.4
    ConfigArgParse 1.5.3
    google-i18n-address 2.5.0
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.8.0
    MarkupSafe 2.0.1
    pycountry 22.1.10
    pyflakes 2.4.0
    PyYAML 6.0
    requests 2.27.1
    setuptools 59.6.0
    six 1.16.0
    WeasyPrint 52.5
-->
<link href="/tmp/draft-ietf-bess-evpn-l2gw-proto-01-wvae85hj.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">EVPN MH for L2-GW Protocols</td>
<td class="right">March 2022</td>
</tr></thead>
<tfoot><tr>
<td class="left">Brissette, et al.</td>
<td class="center">Expires 8 September 2022</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">BESS Working Group</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-ietf-bess-evpn-l2gw-proto-01</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2022-03-07" class="published">7 March 2022</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2022-09-08">8 September 2022</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">P. Brissette</div>
<div class="org">Cisco Systems</div>
</div>
<div class="author">
      <div class="author-name">A. Sajassi</div>
<div class="org">Cisco Systems</div>
</div>
<div class="author">
      <div class="author-name">LA. Burdet, <span class="editor">Ed.</span>
</div>
<div class="org">Cisco Systems</div>
</div>
<div class="author">
      <div class="author-name">D. Voyer</div>
<div class="org">Bell Canada</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">EVPN Multi-Homing Mechanism for Layer-2 Gateway Protocols</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1"> The existing EVPN multi-homing load-balancing modes defined are
     Single-Active and All-Active. Neither of these multi-homing mechanisms
     adequately represent ethernet-segments facing access networks with Layer-2 Gateway protocols
     such as G.8032, (M)STP, REP, MPLS-TP, etc. These loop-preventing Layer-2 protocols
     require a new multi-homing mechanism defined in this draft.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo-4">
<a href="#name-status-of-this-memo-4" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 8 September 2022.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice-4">
<a href="#name-copyright-notice-4" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2022 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents-4">
<a href="#name-table-of-contents-4" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction-4" class="xref">Introduction</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1" class="keepWithNext"><a href="#section-1.1" class="xref">1.1</a>.  <a href="#name-requirements-language-2" class="xref">Requirements Language</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1.2.2">
                <p id="section-toc.1-1.1.2.2.1" class="keepWithNext"><a href="#section-1.2" class="xref">1.2</a>.  <a href="#name-terms-and-abbreviations" class="xref">Terms and Abbreviations</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="xref">2</a>.  <a href="#name-requirements" class="xref">Requirements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-solution" class="xref">Solution</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="xref">3.1</a>.  <a href="#name-single-flow-active-redundan" class="xref">Single-Flow-Active redundancy mode</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="xref">3.2</a>.  <a href="#name-fast-convergence" class="xref">Fast-Convergence</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2.2.1">
                    <p id="section-toc.1-1.3.2.2.2.1.1"><a href="#section-3.2.1" class="xref">3.2.1</a>.  <a href="#name-handling-of-topology-change" class="xref">Handling of Topology Change Notification (TCN)</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2.2.2">
                    <p id="section-toc.1-1.3.2.2.2.2.1"><a href="#section-3.2.2" class="xref">3.2.2</a>.  <a href="#name-propagating-l2gw-protocol-e" class="xref">Propagating L2GW Protocol Events</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2.2.3">
                    <p id="section-toc.1-1.3.2.2.2.3.1"><a href="#section-3.2.3" class="xref">3.2.3</a>.  <a href="#name-mac-flush-and-invalidation-" class="xref">MAC Flush and Invalidation Procedure</a></p>
</li>
                </ul>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a href="#section-3.3" class="xref">3.3</a>.  <a href="#name-backwards-compatibility" class="xref">Backwards compatibility</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3.2.1">
                    <p id="section-toc.1-1.3.2.3.2.1.1"><a href="#section-3.3.1" class="xref">3.3.1</a>.  <a href="#name-the-two-esi-solution" class="xref">The two-ESI solution</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3.2.2">
                    <p id="section-toc.1-1.3.2.3.2.2.1"><a href="#section-3.3.2" class="xref">3.3.2</a>.  <a href="#name-rfc7432-remote-pe" class="xref">RFC7432 Remote PE</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-multihomed-site-redundancy-" class="xref">Multihomed site redundancy mode</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-evpn-inter-subnet-forwardin" class="xref">EVPN Inter-subnet Forwarding</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-conclusion" class="xref">Conclusion</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-security-considerations-4" class="xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-acknowledgements-3" class="xref">Acknowledgements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-iana-considerations-4" class="xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="xref">10</a>. <a href="#name-references-3" class="xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a href="#section-10.1" class="xref">10.1</a>.  <a href="#name-normative-references-3" class="xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.2">
                <p id="section-toc.1-1.10.2.2.1"><a href="#section-10.2" class="xref">10.2</a>.  <a href="#name-informative-references-4" class="xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#appendix-A" class="xref"></a><a href="#name-authors-addresses-4" class="xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<section id="section-1">
      <h2 id="name-introduction-4">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction-4" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">Existing EVPN Single-Active and All-Active multi-homing mechanisms
     do not address the additional requirements of loop-preventing Layer-2 gateway protocols
     such as G.8032, (M)STP, REP, MPLS-TP, etc.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">These Layer-2 Gateway protocols require that a given L2 flow of a VLAN
     be only active on one of the PEs
    in the multi-homing group, while another L2 flow may be active on the other PE.
    This is in contrast with Single-Active redundancy
    mode where all flows of a VLAN are active on a single multi-homing PEs and it
    is also in contrast with All-Active redundancy mode where all flows
    of a VLAN are active on all PEs in the redundancy group.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">This draft defines a new multi-homing mechanism "Single-Flow-Active"
    specifying that a VLAN can be active on all PEs in the redundancy group
    but each unique L2 flow of that VLAN can be active on only one of the PEs
    in the redundancy group at a time. In fact, the Designated Forwarder
    election algorithm for these L2 Gateway protocols, is not per VLAN but
    rather for a given L2 flow. A selected PE in the redundancy group must be the only
    Designated Forwarder for a specific L2 flow, but the decision is not taken by the PE.
    The loop-prevention blocking scheme occurs in the access network, by the Layer-2 protocol.<a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4">EVPN multi-homing procedures need to be enhanced to support Designated
    Forwarder election for all traffic (both known unicast and BUM) on a per
    L2 flow basis. The Single-Flow-Active multi-homing mechanism also requires new EVPN
    considerations for aliasing, mass-withdraw, fast-switchover and <span>[<a href="#RFC9135" class="xref">RFC9135</a>]</span>
    as described in the solution section.<a href="#section-1-4" class="pilcrow">¶</a></p>
<section id="section-1.1">
        <h3 id="name-requirements-language-2">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-requirements-language-2" class="section-name selfRef">Requirements Language</a>
        </h3>
<p id="section-1.1-1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
       "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
       document are to be interpreted as described in <span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span>.<a href="#section-1.1-1" class="pilcrow">¶</a></p>
</section>
<section id="section-1.2">
        <h3 id="name-terms-and-abbreviations">
<a href="#section-1.2" class="section-number selfRef">1.2. </a><a href="#name-terms-and-abbreviations" class="section-name selfRef">Terms and Abbreviations</a>
        </h3>
<span class="break"></span><dl class="dlParallel" id="section-1.2-1">
          <dt id="section-1.2-1.1">AC:</dt>
          <dd style="margin-left: 5.0em" id="section-1.2-1.2">Attachment Circuit<a href="#section-1.2-1.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-1.3">BUM:</dt>
          <dd style="margin-left: 5.0em" id="section-1.2-1.4">Broadcast, Unknown unicast, Multicast<a href="#section-1.2-1.4" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-1.5">DF:</dt>
          <dd style="margin-left: 5.0em" id="section-1.2-1.6">Designated Forwarder<a href="#section-1.2-1.6" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-1.7">GW:</dt>
          <dd style="margin-left: 5.0em" id="section-1.2-1.8">Gateway<a href="#section-1.2-1.8" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-1.9">L2 Flow:</dt>
          <dd style="margin-left: 5.0em" id="section-1.2-1.10">A given flow of a VLAN, represented by (MAC-SA, MAC-DA)<a href="#section-1.2-1.10" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-1.11">L2GW:</dt>
          <dd style="margin-left: 5.0em" id="section-1.2-1.12">Layer-2 Gateway<a href="#section-1.2-1.12" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-1.13">MAC-IP:</dt>
          <dd style="margin-left: 5.0em" id="section-1.2-1.14">EVPN Route-Type 2 with non-zero IP field<a href="#section-1.2-1.14" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-1.15">G.8032:</dt>
          <dd style="margin-left: 5.0em" id="section-1.2-1.16">Ethernet Ring Protection<a href="#section-1.2-1.16" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-1.17">(M)STP:</dt>
          <dd style="margin-left: 5.0em" id="section-1.2-1.18">Multi-Spanning Tree Protocol<a href="#section-1.2-1.18" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-1.19">REP:</dt>
          <dd style="margin-left: 5.0em" id="section-1.2-1.20">Resilient Ethernet Protocol<a href="#section-1.2-1.20" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-1.2-1.21">TCN:</dt>
          <dd style="margin-left: 5.0em" id="section-1.2-1.22">Topology Change Notification<a href="#section-1.2-1.22" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</section>
<div id="requirements">
<section id="section-2">
      <h2 id="name-requirements">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-requirements" class="section-name selfRef">Requirements</a>
      </h2>
<p id="section-2-1">The EVPN L2GW framework for L2GW protocols in Access-Gateway mode, consists of the following rules:<a href="#section-2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2-2.1">Peering PEs MUST share the same ESI.<a href="#section-2-2.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-2.2"> The Ethernet-Segment DF election MUST NOT be performed and forwarding
    state MUST be dictated by the L2GW protocol. In gateway mode, both
    PEs are usually in forwarding state. In fact, the access protocol is responsible
    for operationally setting the forwarding state for each VLAN.<a href="#section-2-2.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-2.3">Split-horizon filtering is NOT needed because L2GW protocol ensures there
    will never be a loop in the access network. The forwarding between peering PEs
    MUST also be preserved. In <a href="#Topology" class="xref">Figure 1</a>, CE1/CE4 device may need reachability with
    CE2 device.  ESI-filtering capability MUST be disabled.
    The ESI label extended comunity advertised to other peering PEs in the redundancy group
    MUST NOT be applied it if received.<a href="#section-2-2.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-2.4">ESI label BGP Extended Community MUST support a new multi-homing mode named
    "Single-Flow-Active" corresponding largely to the single-active behaviour of <span>[<a href="#RFC7432" class="xref">RFC7432</a>]</span>,
    applied per L2 flow rather than per VLAN.<a href="#section-2-2.4" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-2.5">
          <p id="section-2-2.5.1">Upon receiving ESI label BGP Extended Community with the single-flow-active load-balancing mode,
    remote PE MUST:<a href="#section-2-2.5.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2-2.5.2.1">Disable ESI label processing<a href="#section-2-2.5.2.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-2-2.5.2.2">Disable aliasing (at Layer-2 and Layer-3 <span>[<a href="#RFC9135" class="xref">RFC9135</a>]</span>)<a href="#section-2-2.5.2.2" class="pilcrow">¶</a>
</li>
          </ul>
</li>
        <li class="normal" id="section-2-2.6">The Ethernet-Segment procedures in the EVPN core such as Ethernet A-D per ES
    and per Ethernet A-D per EVI routes advertisement/withdraw, as well as MAC and
    MAC+IP advertisement, remains as explained in <span>[<a href="#RFC7432" class="xref">RFC7432</a>]</span> and
    <span>[<a href="#RFC9135" class="xref">RFC9135</a>]</span>.<a href="#section-2-2.6" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-2.7">
          <p id="section-2-2.7.1">For fast-convergence, remote PE3 SHOULD set up two distinct backup paths on a per-flow basis:<a href="#section-2-2.7.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2-2.7.2.1">{ PE1 active, PE2 backup }<a href="#section-2-2.7.2.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-2-2.7.2.2">{ PE2 active, PE1 backup }<a href="#section-2-2.7.2.2" class="pilcrow">¶</a>
</li>
          </ul>
<p id="section-2-2.7.3">The backup paths so created, operate as in <span><a href="https://rfc-editor.org/rfc/rfc7432#section-8.4" class="relref">Section 8.4</a> of [<a href="#RFC7432" class="xref">RFC7432</a>]</span> where the
    backup PE of the redundancy group MAY immediately be selected for forwarding upon
    detection of a specific subset of failures: Ethernet A-D per ES route withdraw,
    Active PE loss of reachability (via IGP detection).
    An Ethernet A-D per EVI withdraw MUST NOT result in automatic switching to the backup
    PE as only a subset of the hosts may be changing reachability to the Backup PE,
    and the remote cannot determine which.<a href="#section-2-2.7.3" class="pilcrow">¶</a></p>
</li>
        <li class="normal" id="section-2-2.8">MAC mobility procedures SHALL have precedence over backup path procedure
    in Single-Flow-Active for tracking host reachability.<a href="#section-2-2.8" class="pilcrow">¶</a>
</li>
      </ul>
</section>
</div>
<section id="section-3">
      <h2 id="name-solution">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-solution" class="section-name selfRef">Solution</a>
      </h2>
<span id="name-evpn-network-with-l2-access"></span><div id="Topology">
<figure id="figure-1">
        <div class="alignLeft art-text artwork" id="section-3-1.1">
<pre>
                    +---+
                    |CE3|
                    +---+
                      |
                      |
                   +-----+
             +-----| PE3 |-----+
             |     +-----+     |
             |                 |
             |     MPLS/IP     |
             |      CORE       |
             |                 |
          +-----+           +-----+
          | PE1 |-----------| PE2 |
          +-----+           +-----+
          AC1|                 |AC2
             |                 |
           +---+             +---+
           |CE1|             |CE2|
           +---+             +---+
             |                 |
             |    +---+        |
             +----|CE4|---/ /--+
                  +---+
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-evpn-network-with-l2-access" class="selfRef">EVPN network with L2 access GW protocols</a>
        </figcaption></figure>
</div>
<p id="section-3-2"><a href="#Topology" class="xref">Figure 1</a> shows a typical EVPN network with an access network running
    a L2GW protocol, typically one of the following: G.8032, (M)STP, REP, MPLS‑TP (<span>[<a href="#RFC6378" class="xref">RFC6378</a>]</span>), etc.
    The L2GW protocol usually starts from AC1 (on PE1) up to AC2
    (on PE2) in an open "ring" manner. AC1 and AC2 interfaces of PE1 and
    PE2 are participants in the access protocol.<a href="#section-3-2" class="pilcrow">¶</a></p>
<p id="section-3-3">The L2GW protocol is used for loop avoidance. In above example,
    the loop is broken on the right side of CE4.<a href="#section-3-3" class="pilcrow">¶</a></p>
<section id="section-3.1">
        <h3 id="name-single-flow-active-redundan">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-single-flow-active-redundan" class="section-name selfRef">Single-Flow-Active redundancy mode</a>
        </h3>
<p id="section-3.1-1">PE1 and PE2 are peering PEs in a redundancy group, and sharing a same ESI.
        In the proposed Single-Flow-Active mode, load-balancing at PE1 and PE2
        shares similarities with singular aspects of both Single-Active and All-Active.
        Designated Forwarder election must not compete with the L2GW protocol and must not 
        result in blocked ports or portions of the access may become isolated. 
        Additionally, the reachability between CE1/CE4 and CE2 is achieved with the forwarding
        path through the EVPN MPLS/IP core side. Thus, the ESI-Label filtering of <span>[<a href="#RFC7432" class="xref">RFC7432</a>]</span>
        is disabled for Single-Flow-Active Ethernet segments.<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<p id="section-3.1-2">Finally, PE3 behaves according to EVPN <span>[<a href="#RFC7432" class="xref">RFC7432</a>]</span> rules for traffic to/from PE1/PE2.
        Peering PE, selected per L2 flow, is chosen by the L2GW protocol in the access, and is out of EVPN control.<a href="#section-3.1-2" class="pilcrow">¶</a></p>
<p id="section-3.1-3">From PE3 point of view, the L2 flows from PE3 destined to CE1/CE4 transit via
        edge node PE1 and the L2 flows destined to CE2 transit via edge node PE2.
        A specific unicast L2 flow never goes to both peering PEs. Therefore,
        aliasing of <span>[<a href="#RFC7432" class="xref">RFC7432</a>]</span> Section 8.4 cannot be performed by PE3.
        That node operates in a single-active fashion for each of the unicast L2 flows.<a href="#section-3.1-3" class="pilcrow">¶</a></p>
<p id="section-3.1-4">The backup path of <span>[<a href="#RFC7432" class="xref">RFC7432</a>]</span> Section 8.4 which is also setup
        for single-active rapid convergence on a per-VLAN basis, is not applicable here. 
        For example, in <a href="#Topology" class="xref">Figure 1</a>, if a failure happens between CE1 and CE4 the loop-prevention at the right
        of CE4 is released and:<a href="#section-3.1-4" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.1-5.1">L2 flows coming from CE3 behind PE3 destined to CE1 still transit through
            edge device PE1, and shall not switch to PE2 as a backup path.<a href="#section-3.1-5.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-3.1-5.2">L2 flows destined to CE4 on the other hand, may be backup switched to PE2 transit node.<a href="#section-3.1-5.2" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-3.1-6">
        On PE3, there is no way to know which L2 flow specifically is affected. During the transition time,
        PE3 may flood until unicast traffic recovers properly.<a href="#section-3.1-6" class="pilcrow">¶</a></p>
</section>
<section id="section-3.2">
        <h3 id="name-fast-convergence">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-fast-convergence" class="section-name selfRef">Fast-Convergence</a>
        </h3>
<section id="section-3.2.1">
          <h4 id="name-handling-of-topology-change">
<a href="#section-3.2.1" class="section-number selfRef">3.2.1. </a><a href="#name-handling-of-topology-change" class="section-name selfRef">Handling of Topology Change Notification (TCN)</a>
          </h4>
<p id="section-3.2.1-1">In order to address rapid Layer-2 convergence requirement, topology change
        notification received from the L2GW protocols must be sent across the EVPN network
        to perform the equivalent of legacy L2VPN remote MAC flush.<a href="#section-3.2.1-1" class="pilcrow">¶</a></p>
<p id="section-3.2.1-2">The generation of TCN is done differently based on the access protocol.
        In the case of REP and G.8032, TCN gets generated in both directions and thus
        both of the dual-homing PEs receive it. However, with (M)STP, TCN gets generated
        only in one direction and thus only a single PE can receive it. That TCN is propagated
        to the other peering PE for local MAC flushing, and relaying back into the access.<a href="#section-3.2.1-2" class="pilcrow">¶</a></p>
<p id="section-3.2.1-3">In fact, PEs have no direct visibility on failures happening in the access network
        nor on the impact of those failures over the connectivity between CE devices.
        Hence, both peering PEs require to perform a local MAC flush on corresponding interfaces.<a href="#section-3.2.1-3" class="pilcrow">¶</a></p>
<p id="section-3.2.1-4">There are two options to relay the access protocol's TCN to the peering PE: in-band
        or out-of-band messaging. The first method is better for rapid convergence, and requires
        a dedicated channel between peering PEs. An EVPN-VPWS connection MAY be dedicated for
        that purpose, connecting the Untagged ACs of both PEs. The latter choice relies on the
        MAC Mobility BGP Extended Community applied to the Ethernet A-D per EVI route, detailed below.
        It is a slower method but has the advantage of avoiding a dedicated channel between peering PEs.<a href="#section-3.2.1-4" class="pilcrow">¶</a></p>
</section>
<section id="section-3.2.2">
          <h4 id="name-propagating-l2gw-protocol-e">
<a href="#section-3.2.2" class="section-number selfRef">3.2.2. </a><a href="#name-propagating-l2gw-protocol-e" class="section-name selfRef">Propagating L2GW Protocol Events</a>
          </h4>
<p id="section-3.2.2-1">Peering PE in Single Flow Active mode, upon receiving notification of a 
    protocol convergence-event from access (such as TCN), MUST:<a href="#section-3.2.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2.2-2.1">As per legacy VPLS, perform a local MAC flush on the access-facing interfaces.
      An ARP probe is also sent for all hosts previously locally-attached.<a href="#section-3.2.2-2.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.2.2-2.2">Advertise Ethernet A-D per EVI route along with the MAC Mobility BGP Extended Community,
      with incremented sequence number if previously advertised, 
      in order to perform a remote MAC flush and steer L2 traffic to proper peering PE.
      The sequence number is incremented by one as a flushing indication to remote PEs.<a href="#section-3.2.2-2.2" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.2.2-2.3">Ensure MAC and MAC+IP route re-advertisement, with incremented sequence
      number when host reachability is NOT moving to peering PE. This is to ensure
      a re-advertisement of current MAC and MAC-IP which may have been flushed remotely
      upon MAC Mobility Extended Community reception. In theory, it should happen automatically
      since peering PE, receiving TCN from the access, performs local MAC flush on
      corresponding interface and will re-learn that local MAC or MAC+IP.<a href="#section-3.2.2-2.3" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-3.2.2-2.4">Where an access protocol relies on TCN BPDU propagation to all participant nodes,
      a dedicated EVPN-VPWS connection MAY be used as an in-band channel to relay
      TCN between peering PEs. That connection may be auto-generated or can simply
      be configured by user.<a href="#section-3.2.2-2.4" class="pilcrow">¶</a>
</li>
          </ul>
</section>
<div id="MACFlush">
<section id="section-3.2.3">
          <h4 id="name-mac-flush-and-invalidation-">
<a href="#section-3.2.3" class="section-number selfRef">3.2.3. </a><a href="#name-mac-flush-and-invalidation-" class="section-name selfRef">MAC Flush and Invalidation Procedure</a>
          </h4>
<p id="section-3.2.3-1">The MAC-Flush procedure described in <span>[<a href="#RFC7623" class="xref">RFC7623</a>]</span> is borrowed,
        and the MAC mobility BGP Extended community is signaled along with the
        Ethernet A-D per EVI route from a PE in Single-Flow-Active mode.<a href="#section-3.2.3-1" class="pilcrow">¶</a></p>
<p id="section-3.2.3-2">When MAC Mobility BGP Extended Community is received on the Ethernet A-D per EVI route, 
        it indicates to all remote PEs that all MAC addresses associated with that EVI/ESI are "flushed"
        i.e. must be unresolved.<a href="#section-3.2.3-2" class="pilcrow">¶</a></p>
<p id="section-3.2.3-3">Remote PEs, having previously received Ethernet A-D per ES with Single Flow Active
        indication from an originating PE, treat the MAC Mobility indication to simply invalidate the MAC entries
        for that originating PE on an EVI/ESI basis, 
        similar to <span>[<a href="#RFC7432" class="xref">RFC7432</a>]</span>'s mass-withdraw mechanism.<a href="#section-3.2.3-3" class="pilcrow">¶</a></p>
<p id="section-3.2.3-4">They remain unresolved until the remote PE receives
        a route update (or withdraw) for those MAC addresses.
        Note: the MAC may be re-advertised by the same PE, but also some are expected to have
        moved to a multi-homing peer, within the same ESI, due to the L2 protocol's action.<a href="#section-3.2.3-4" class="pilcrow">¶</a></p>
<p id="section-3.2.3-5">The sequence number of the MAC Mobility extended community is
        of local significance from the originating PE, and is not used
        for comparison between peering PEs.
        Rather, it is used to signal via BGP successive MAC Flush requests 
        from a given PE per EVI/ESI.<a href="#section-3.2.3-5" class="pilcrow">¶</a></p>
</section>
</div>
</section>
<section id="section-3.3">
        <h3 id="name-backwards-compatibility">
<a href="#section-3.3" class="section-number selfRef">3.3. </a><a href="#name-backwards-compatibility" class="section-name selfRef">Backwards compatibility</a>
        </h3>
<div id="two_esi">
<section id="section-3.3.1">
          <h4 id="name-the-two-esi-solution">
<a href="#section-3.3.1" class="section-number selfRef">3.3.1. </a><a href="#name-the-two-esi-solution" class="section-name selfRef">The two-ESI solution</a>
          </h4>
<p id="section-3.3.1-1">As a reference, an alternative solution which achieves some, but not all,
            of the requirements exists:<a href="#section-3.3.1-1" class="pilcrow">¶</a></p>
<p id="section-3.3.1-2">On the PE1 and PE2,<a href="#section-3.3.1-2" class="pilcrow">¶</a></p>
<ol start="1" type="a" class="normal type-a" id="section-3.3.1-3">
            <li id="section-3.3.1-3.1">A single-homed (different) non-zero ESI, or zero-ESI, is used for each PE;<a href="#section-3.3.1-3.1" class="pilcrow">¶</a>
</li>
            <li id="section-3.3.1-3.2">With no remote Ethernet-Segment routes received matching local ESI,
                each PE will be designated forwarder for all the local VLANs;<a href="#section-3.3.1-3.2" class="pilcrow">¶</a>
</li>
            <li id="section-3.3.1-3.3">Each L2GW PE will send Ethernet A-D per ES and per EVI routes for its ESI if non-zero; and<a href="#section-3.3.1-3.3" class="pilcrow">¶</a>
</li>
            <li id="section-3.3.1-3.4">When the L2GW PEs receive a MAC-Flush notification (STP TCN, G.8032 mac-flush,
                LDP MAC withdrawal etc.), they send an update of the Ethernet A-D per EVI
                route with the MAC Mobility extended community
                and a higher sequence number, using the procedure
                outlined in <a href="#MACFlush" class="xref">Section 3.2.3</a>.<a href="#section-3.3.1-3.4" class="pilcrow">¶</a>
</li>
          </ol>
<p id="section-3.3.1-4">While this solution is feasible, it is considered to fall short of the requirements
      listed in <a href="#requirements" class="xref">Section 2</a>, namely for all aspects meant to achieve
      fast-convergence.<a href="#section-3.3.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-3.3.2">
          <h4 id="name-rfc7432-remote-pe">
<a href="#section-3.3.2" class="section-number selfRef">3.3.2. </a><a href="#name-rfc7432-remote-pe" class="section-name selfRef">RFC7432 Remote PE</a>
          </h4>
<p id="section-3.3.2-1">A PE which receives an Ethernet A-D per ES route with the Single-Flow-Active bit
        set in the ESI-flags, and which does not support/understand this bit, SHALL discard
        the bit and continue operating per <span>[<a href="#RFC7432" class="xref">RFC7432</a>]</span> (All-Active).
        The operator should understand the usage of single-flow-active load-balancing mode else it is
        highly recommended to use the two-ESI approach as described in <a href="#two_esi" class="xref">Section 3.3.1</a><a href="#section-3.3.2-1" class="pilcrow">¶</a></p>
<p id="section-3.3.2-2">The remote PE3 which does not support Single-Flow-Active redundancy mode as described,
        will ECMP traffic to peering PE1 and PE2 in the example topology above (<a href="#Topology" class="xref">Figure 1</a>),
        per <span>[<a href="#RFC7432" class="xref">RFC7432</a>]</span>, Section 8.4 aliasing and load-balancing rules.
        PE1 and PE2, which support the Single-Flow-Active redundancy mode MUST setup 
        redirections towards the PE at which the flow is currently active
        (sub-optimal Layer-2 forwarding and sub-optimal Layer-3 routing).<a href="#section-3.3.2-2" class="pilcrow">¶</a></p>
<p id="section-3.3.2-3">Thus, while PE3 will ECMP (on average) 50% of the traffic to the incorrect
        PE using <span>[<a href="#RFC7432" class="xref">RFC7432</a>]</span> operation, PE1 and PE2 will handle this gracefully
        in Single-Flow-Active mode and redirect across peering pair of PEs appropriately.<a href="#section-3.3.2-3" class="pilcrow">¶</a></p>
<p id="section-3.3.2-4">No extra route or information is required for this. The <span>[<a href="#RFC7432" class="xref">RFC7432</a>]</span>
        and <span>[<a href="#RFC9135" class="xref">RFC9135</a>]</span> route advertisements are sufficient.<a href="#section-3.3.2-4" class="pilcrow">¶</a></p>
</section>
</section>
</section>
<section id="section-4">
      <h2 id="name-multihomed-site-redundancy-">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-multihomed-site-redundancy-" class="section-name selfRef">Multihomed site redundancy mode</a>
      </h2>
<p id="section-4-1">In order to signal the new EVPN load-balancing mode (single-flow-active),
    this document claims the following value from the "EVPN ESI Multihoming Attributes" registry's
    RED field setup by <span><a href="https://datatracker.ietf.org/doc/html/draft-ietf-bess-rfc7432bis-03#section-7.5" class="relref">Section 7.5</a> of [<a href="#I-D.ietf-bess-rfc7432bis" class="xref">I-D.ietf-bess-rfc7432bis</a>]</span>.<a href="#section-4-1" class="pilcrow">¶</a></p>
<p id="section-4-2">
    Multihomed site redundancy mode:<a href="#section-4-2" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-4-3">
        <dt id="section-4-3.1">RED = 10:</dt>
        <dd style="margin-left: 5.5em" id="section-4-3.2">A value of 10 means that the multihomed site is operating
            in Single-Flow-Active redundancy mode.<a href="#section-4-3.2" class="pilcrow">¶</a>
</dd>
      <dd class="break"></dd>
</dl>
</section>
<section id="section-5">
      <h2 id="name-evpn-inter-subnet-forwardin">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-evpn-inter-subnet-forwardin" class="section-name selfRef">EVPN Inter-subnet Forwarding</a>
      </h2>
<p id="section-5-1">EVPN Inter-subnet forwarding procedures in <span>[<a href="#RFC9135" class="xref">RFC9135</a>]</span>
    works with
    the current proposal and does not require any extension. Host routes
    continue to be installed at PE3 with a single remote nexthop, no
    aliasing.<a href="#section-5-1" class="pilcrow">¶</a></p>
<p id="section-5-2">However, leveraging the same-ESI on both L2GW PEs enables ARP/ND
    synchronization procedures which are defined for All-Active
    redundancy in <span>[<a href="#RFC9135" class="xref">RFC9135</a>]</span>. In steady-state, on PE2 where a host is not
    locally-reachable the routing table will reflect PE1 as the
    destination. However, with ARP/ND synchronization based on a common
    ESI, the ARP/ND cache may be pre-populated with the local AC as
    destination for the host, should an AC failure occur on PE1. This
    achieves fast-convergence.<a href="#section-5-2" class="pilcrow">¶</a></p>
<p id="section-5-3">When a host moves to PE2 from the PE1 L2GW peer, the MAC mobility
    sequence number is incremented to signal to remote peers that a
    'move' has occurred and the routing tables must be updated to PE2.
    This is required when an Access Protocol is running where the loop is
    broken between two CEs in the access and the L2GWs, and the host is
    no longer reachable from the PE1-side but now from the PE2-side of
    the access network.<a href="#section-5-3" class="pilcrow">¶</a></p>
</section>
<section id="section-6">
      <h2 id="name-conclusion">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-conclusion" class="section-name selfRef">Conclusion</a>
      </h2>
<p id="section-6-1">EVPN Multi-Homing Mechanism for Layer-2 Gateway Protocols solves a
    true problem due to the wide legacy deployment of these access L2GW
    protocols in Service Provider networks. The current draft has the
    main advantage to be fully compliant with <span>[<a href="#RFC7432" class="xref">RFC7432</a>]</span> and
    <span>[<a href="#RFC9135" class="xref">RFC9135</a>]</span>.<a href="#section-6-1" class="pilcrow">¶</a></p>
</section>
<section id="section-7">
      <h2 id="name-security-considerations-4">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-security-considerations-4" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-7-1">The same Security Considerations described in <span>[<a href="#RFC7432" class="xref">RFC7432</a>]</span> and
    <span>[<a href="#RFC9135" class="xref">RFC9135</a>]</span> remain valid for this document.<a href="#section-7-1" class="pilcrow">¶</a></p>
</section>
<div id="acknowledgements">
<section id="section-8">
      <h2 id="name-acknowledgements-3">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-acknowledgements-3" class="section-name selfRef">Acknowledgements</a>
      </h2>
<p id="section-8-1">Authors would like to thank Thierry Couture for valuable review and
     inputs with respect to access protocol deployments related to procedures
     proposed in this document.<a href="#section-8-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="iana">
<section id="section-9">
      <h2 id="name-iana-considerations-4">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-iana-considerations-4" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-9-1">This document solicits the allocation of the following values from the
       "EVPN ESI Multihoming Attributes" registry setup in <span>[<a href="#I-D.ietf-bess-rfc7432bis" class="xref">I-D.ietf-bess-rfc7432bis</a>]</span>, and updates the listing of
       redundancy modes values:<a href="#section-9-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-9-2">
<pre>

              RED   Multihomed site redundancy mode
                       00 = All-Active
                       01 = Single-Active
                       10 = Single-Flow-Active

</pre><a href="#section-9-2" class="pilcrow">¶</a>
</div>
</section>
</div>
<section id="section-10">
      <h2 id="name-references-3">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-references-3" class="section-name selfRef">References</a>
      </h2>
<section id="section-10.1">
        <h3 id="name-normative-references-3">
<a href="#section-10.1" class="section-number selfRef">10.1. </a><a href="#name-normative-references-3" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="I-D.ietf-bess-rfc7432bis">[I-D.ietf-bess-rfc7432bis]</dt>
        <dd>
<span class="refAuthor">Sajassi, A.</span>, <span class="refAuthor">Burdet, L. A.</span>, <span class="refAuthor">Drake, J.</span>, and <span class="refAuthor">J. Rabadan</span>, <span class="refTitle">"BGP MPLS-Based Ethernet VPN"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-bess-rfc7432bis-03</span>, <time datetime="2022-02-28" class="refDate">28 February 2022</time>, <span>&lt;<a href="https://datatracker.ietf.org/doc/html/draft-ietf-bess-rfc7432bis-03">https://datatracker.ietf.org/doc/html/draft-ietf-bess-rfc7432bis-03</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7432">[RFC7432]</dt>
        <dd>
<span class="refAuthor">Sajassi, A., Ed.</span>, <span class="refAuthor">Aggarwal, R.</span>, <span class="refAuthor">Bitar, N.</span>, <span class="refAuthor">Isaac, A.</span>, <span class="refAuthor">Uttaro, J.</span>, <span class="refAuthor">Drake, J.</span>, and <span class="refAuthor">W. Henderickx</span>, <span class="refTitle">"BGP MPLS-Based Ethernet VPN"</span>, <span class="seriesInfo">RFC 7432</span>, <span class="seriesInfo">DOI 10.17487/RFC7432</span>, <time datetime="2015-02" class="refDate">February 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7432">https://www.rfc-editor.org/info/rfc7432</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7623">[RFC7623]</dt>
        <dd>
<span class="refAuthor">Sajassi, A., Ed.</span>, <span class="refAuthor">Salam, S.</span>, <span class="refAuthor">Bitar, N.</span>, <span class="refAuthor">Isaac, A.</span>, and <span class="refAuthor">W. Henderickx</span>, <span class="refTitle">"Provider Backbone Bridging Combined with Ethernet VPN (PBB-EVPN)"</span>, <span class="seriesInfo">RFC 7623</span>, <span class="seriesInfo">DOI 10.17487/RFC7623</span>, <time datetime="2015-09" class="refDate">September 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7623">https://www.rfc-editor.org/info/rfc7623</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9135">[RFC9135]</dt>
      <dd>
<span class="refAuthor">Sajassi, A.</span>, <span class="refAuthor">Salam, S.</span>, <span class="refAuthor">Thoria, S.</span>, <span class="refAuthor">Drake, J.</span>, and <span class="refAuthor">J. Rabadan</span>, <span class="refTitle">"Integrated Routing and Bridging in Ethernet VPN (EVPN)"</span>, <span class="seriesInfo">RFC 9135</span>, <span class="seriesInfo">DOI 10.17487/RFC9135</span>, <time datetime="2021-10" class="refDate">October 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9135">https://www.rfc-editor.org/info/rfc9135</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-10.2">
        <h3 id="name-informative-references-4">
<a href="#section-10.2" class="section-number selfRef">10.2. </a><a href="#name-informative-references-4" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="RFC6378">[RFC6378]</dt>
      <dd>
<span class="refAuthor">Weingarten, Y., Ed.</span>, <span class="refAuthor">Bryant, S.</span>, <span class="refAuthor">Osborne, E.</span>, <span class="refAuthor">Sprecher, N.</span>, and <span class="refAuthor">A. Fulignoli, Ed.</span>, <span class="refTitle">"MPLS Transport Profile (MPLS-TP) Linear Protection"</span>, <span class="seriesInfo">RFC 6378</span>, <span class="seriesInfo">DOI 10.17487/RFC6378</span>, <time datetime="2011-10" class="refDate">October 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6378">https://www.rfc-editor.org/info/rfc6378</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="authors-addresses">
<section id="appendix-A">
      <h2 id="name-authors-addresses-4">
<a href="#name-authors-addresses-4" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Patrice Brissette</span></div>
<div dir="auto" class="left"><span class="org">Cisco Systems</span></div>
<div dir="auto" class="left">
<span class="locality">Ottawa</span> <span class="region">ON</span> </div>
<div dir="auto" class="left"><span class="country-name">Canada</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:pbrisset@cisco.com" class="email">pbrisset@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Ali Sajassi</span></div>
<div dir="auto" class="left"><span class="org">Cisco Systems</span></div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:sajassi@cisco.com" class="email">sajassi@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Luc Andre Burdet (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">Cisco Systems</span></div>
<div dir="auto" class="left">
<span class="locality">Ottawa</span> <span class="region">ON</span> </div>
<div dir="auto" class="left"><span class="country-name">Canada</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:lburdet@cisco.com" class="email">lburdet@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Daniel Voyer</span></div>
<div dir="auto" class="left"><span class="org">Bell Canada</span></div>
<div dir="auto" class="left">
<span class="locality">Montreal</span> <span class="region">QC</span> </div>
<div dir="auto" class="left"><span class="country-name">Canada</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:daniel.voyer@bell.ca" class="email">daniel.voyer@bell.ca</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
