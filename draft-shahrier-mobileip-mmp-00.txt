
   Internet Draft                                        S. M. Shahrier 
   Document: draft-shahrier-mobileip-mmp-00.txt            InterDigital 
   Expires: 2001                                               May 2001 
 
 
          A Low-Overhead Mobility Management Protocol in IP Layer  
 
Status of this Memo 
 
   This document is an Internet-Draft and is in full conformance 
   with all provisions of Section 10 of RFC2026. 
    
    
   Internet-Drafts are working documents of the Internet Engineering 
   Task Force (IETF), its areas, and its working groups.  Note that      
   other groups may also distribute working documents as Internet-
   Drafts. 
    
Internet-Drafts are draft documents valid for a maximum of six months 
and may be updated, replaced, or obsolete by other documents at any 
time.  It is inappropriate to use Internet-Drafts as reference material 
or to cite them other than as "work in progress." 
    
   The list of current Internet-Drafts can be accessed at 
        http://www.ietf.org/ietf/1id-abstracts.txt 
   The list of Internet-Draft Shadow Directories can be accessed at 
        http://www.ietf.org/shadow.html. 
    
Conventions used in this document 
    
   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", 
   "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and "OPTIONAL" in 
   this document are to be interpreted as described in RFC-2119 [1]. 
 
Abstract 
 
   The Future Mobile Internet has to support many types of traffic  
   flows, including both real-time and non real-time 
   services.   In addition, the network has to keep account of the 
   location of each mobile node (MN) as it moves around the network. 
   This   draft proposes a novel protocol that combines mobility 
   management with optimal routing for use over the mobile air 
   interface. Its advantages is that it eliminates the need for IP-in-
   IP encapsulation from CN to MN, and still including the identity of 
   the original CN in the IP datagram; eliminating any form of 
   tunneling of packets to the MN by the CN, while the MN is away from 
   its home. The elimination of these two overheads make it amenable 
   for over the air interface communication in 3G Mobile IP networks. 
     
1. Introduction 
    
   The Mobile Internet of the future are expected to be capable of a 
   high rate of data transmission. The traffic services 
     
   Shahrier       Standard Track - Expires July 2001                 1 
                A Optimal Mobility Management Protocol   May 2001 
                    for 3G Wireless Internet 
    
   supported include real-time such as video and voice and non real-
   time such as data. Each service will have different QoS require-
   ments, delay and throughput guarantees and bit-error rates (BER).  
    
   In a mobile network, each mobile node (MN) is in communication with 
   a single access point(AP). This situation represents a single point 
   of attachment of the MN to the internet, This draft proposes a 
   method of managing the mobility of a MN within multiple 
   administrative domains. In the past, mobility management schemes 
   within the IP-layer used a two-level hierarchical approach; Mobile 
   IP [2] was generally used for managing mobility across different 
   sub-networks; authors have proposed different solutions for managing 
   micro-mobility within a single sub-network [3,4,5]. In this draft, 
   we propose a scheme by which to manage the mobility of a MN across 
   all administrative domains. The protocol also supports optimal 
   routing using OSPF. 
 
2. Improvements 
    
   The new protocol proposes some improvements over existing mobility 
   management protocols, in particular Mobile IP [1]. 
    
        - It eliminates the need for Ip-in-IP encapsulation from CN to 
          MN, and still including the identity of the original CN in 
          the IP datagram. 
    
        - Optimizes routing from sender to receiver, using OSPF, i.e. 
          No need to tunnel via the HA as in Mobile IP. 
           
   Although this protocol is proposed for both wireless and wireline 
   networks, the elimination of these two overheads make it amenable 
   for over the air interface communication in 3G Mobile IP networks. 
 
           
3. Reference Architecture 
    
   Fig. 1. depicts the architecture and topology of a typical mobile                 
   network. This architecture has been adapted from [2]. Associated 
   with the diagram are terminology and definitions. 
    
    Mobile Node (MN) 
        An IP mobile terminal capable of changing its point of 
        attachment to the internet. 
 
    Access Point (AP) 
        Access point offering a wireless air-interface connection to 
        the MN.  
 
    Access Router (AR) 
        IP router connected to one or more AP's. Each AP represents a                 
        single IP address. 
    
     
   Shahrier       Standard Track - Expires July 2001                 2 
    
                A Optimal Mobility Management Protocol   May 2001 
                    for 3G Wireless Internet 
    
    Access Network Gateway (ANG) 
        An IP gateway that connects the sub-networks to the internet 
        backbone. A combination of ARs connected to the same ANG belong 
        to the same sub-network. Conversely, ARs connected to different 
        ANG∆s are part of different sub-networks. 
    
 
                                                      INTERNET 
                                                      BACKBONE 
                                                         | 
                                                         | 
            ---       ---             ---                | 
           |   |     |   |           |   |               | 
           | MN|-----| AP|-----------| AR|--             | 
            ---       ---             ---   |            |   
                                            |   ---      | 
                                             --|   |     | 
                                             --|ANG|-----| 
                                            |   ---      | 
                                            |            | 
            ---       ---             ---   |            | 
           |   |     |   |           |   |--             | 
           | MN|+++++| AP|-----------| AR|               | 
            ---   +   ---             ---                | 
                  +                                      | 
                  +                                      | 
            ---   +                                      | 
           |   |++                                       | 
           | MN|                                         | 
            ---                                          | 
                                                         |  
                                                         | 
                                                         | 
                                                         | 
            ---         ---            ---       ---     | 
           |   |       |   |          |   |     |   |    | 
           | MN|+++++++| AP|----------| AR|-----|ANG|----| 
            ---    +    ---            ---       ---     | 
                   +                                     | 
                   +                                     | 
                   +                                     | 
            ---    +                                     | 
           |   |+++                                      | 
           | MN|                                         | 
            ---                                          | 
                        +++ air-interface connection.    | 
                        --- wireline-link connection.    | 
    
    
   Fig. 1. Architecture of a Mobile IP Core Network. 
    
     
   Shahrier       Standard Track - Expires July 2001                 3 
    
                A Optimal Mobility Management Protocol   May 2001 
                    for 3G Wireless Internet 
    
     
   Each MN is pre-designated to a single sub-network called its ``home 
   network''. Each home network is identified by an identifier called 
   the home network identifier (HNI). Within its home network, the MN 
   is connected to an access point called ``home AP∆∆, which in turn is 
   connected to a router called ``home AR∆∆. Every AR has a unique IP 
   address, so that the link between a MN and its home AR represents a 
   single connection point to the internet. Every MN in the network is 
   assigned a fixed value called its host-name, and it does not change 
   as the MN moves around the MCN. In particular, whenever any MN 
   connected to the AR queries the DNS server with its <HNI,host-name> 
   pair, the DNS returns with the IP address of the home AR.  
    
   Sending TCP/IP packets accomplishes the transmission of data packets 
   from source to target. The DESTINATION IP ADDRESS in the IP header 
   is used to route the packet to the target AR. The AR then broadcasts 
   it to all the AP∆s attached to it. The TCP ``destination port 
   number∆∆ field contains the host-name of the target MN. Each AP 
   registers the host-names of the MNs that are currently attached to 
   it. Thus, if it receives a packet whose port number (host-name) 
   matches one of its registered host-names, then the packet is 
   transmitted through the air-interface to that MN; otherwise the 
   packet is silently discarded. 
     
4. Protocol Description 
    
   This section describes our proposed mobility management protocol for 
   mobile nodes migrating around a mobile core network. This protocol 
   is suitable for MNs moving within a single sub-network or across 
   multiple sub-networks. The description of the protocol is as 
   follows. 
    
   Our protocol is fundamentally different from [2] in that instead of 
   forwarding IP datagrams from one peer to another peer via a foreign 
   agent (FA), the source is advised of the target's new location, 
   everytime it moves to a new AR. If the mobile moves to a new AP, but 
   it is still attached to the same BR, it means that the IP address of 
   the attached BR has not changed. Conversely, if MH becomes attached 
   to a different BR, the IP address had changed to indicate a new 
   route.  
 
4.1 Locating Target MN 
 
   During the normal course of operation, mobile nodes may move 
   throughout the mobile core network. Thus, to assist with locating 
   the MN at any instant of time, each AR maintains a directory, called 
   the ``Node Location Table'' (NLT). The NLT  contains a listing of 
   the node-names of all the MNs for which this AR is a home AR, and 
   their current locations. If the MN is at its home AR, then the IP 
   address is that of its home AR. However, if the mobile has moved 
   away from its home AR, then the IP address is that of a foreign AR.  
    
     
   Shahrier       Standard Track - Expires July 2001                 4 
    
                A Optimal Mobility Management Protocol   May 2001 
                    for 3G Wireless Internet 
    
                       --------------------------- 
                      | node-name-1  |  ip-addr-1 | 
                       --------------------------- 
                      | node-name-2  |  ip-addr-2 | 
                       --------------------------- 
                      | node-name-3  |  ip-addr-3 | 
                       --------------------------- 
                      |   ‡‡‡‡‡‡‡‡   |  ‡‡‡‡‡‡‡‡  | 
                       --------------------------- 
    
   Before IP datagrams can be sent to the target MN, a TCP connection 
   has to be established between the AR of the corresponding node (CN) 
   and the AR of the target. Before such an event, the source has to 
   ascertain itself of the target mobile's current location. This can
   be accomplished by exchanging a pair of ICMP messages between the 
   peers.  
    
       1. The CN indexes into the NLT using the node-name of the target, 
         and retrieves its current ip-addr. This is the DESTINATION IP 
         ADDRESS. 
        
       2. The CN constructs an ICMP node location query message, with 
         the following field settings: 
    
          TYPE       = 20.              Node location query. 
          IDENTIFIER = node-name.       Node-name of target MN. 
       3. The rest of the fields are filled in and the resulting ICMP 
         message is placed in the DATA_AREA of the IP datagram frame. 
                         
       4. In the IP header, SOURCE IP ADDRESS and DESTINATION IP ADDRESS 
         are placed into their respective fields.  
    
       5. The resulting IP datagram is sent to the target∆s home AR. 
    
       6. Target AR uses the node-name, indexes into the NLT, and 
         retrieves MN∆s current IP address. 
    
       7. The AR constructs a new ICMP message and sends it back to the 
         CN. This message is called a node query reply message. 
    
          TYPE          = 21.             Node location query reply. 
          OPTIONAL DATA = ip-addr.        IP address of home/foreign AR. 
    
        8.The rest of the fields are filled in and the resulting ICMP  
          message is placed in the DATA AREA of the IP datagram frame. 
    
        9.The SOURCE IP ADDRESS and DESTINATION IP ADDRESS fields are 
          reversed, and placed into their respective fields. 
        
        10. The resulting IP datagram is sent to the CN∆s home AR.      
    
     
   Shahrier       Standard Track - Expires July 2001                 5 
    
                A Optimal Mobility Management Protocol   May 2001 
                    for 3G Wireless Internet 
    
   The message format of the ICMP header is as follows: 
 
    0                   1                   2                   3 
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
   |TYPE(20 or 21) |     CODE      |           CHECKSUM            |    
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
   |          IDENTIFIER           |       SEQUENCE NUMBER         |        
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+    
   |                        OPTIONAL DATA                          | 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+  
   |                                                               |  
  
 
   The exchange of control messages between the CN and the home BR, and 
   the transmission of data from source to target are indicated in the 
   following signaling diagram. 
 
                        SENDER       RECEIVER 
                           |            | 
                           |  ICMP<req> | 
                           |----------->| 
                           |            | 
                           | ICMP<rply> | 
                           |<-----------|                 
                           |            | 
                           |  IP<dat>   | 
                           |----------->| 
                           |            | 
                           |  IP<dat>   | 
                           |----------->| 
                           |            | 
                           |  IP<dat>   | 
                           |----------->| 
                           |            | 
    
   The process initiated by the sender and receiver peers exchanging a 
   pair of ICMP messages to determine the IP address of the AR 
   associated with the MN. Once the IP address is known a TCP 
   connection is established between the sender and receiver and the 
   data transfer takes place. 
    
4.2  Locating Target MN After Handoff 
    
     Next, we consider what happens if a receiver MN handoffs to a new 
     AP, while it is still communicating with the CN. The CN will have 
     to be notified of the new location of the MN, so that it can still 
     continue to receive data seamlessly. If, after the handover, the 
     new AP is still connected to the same AR, i.e. the IP address 
     hasn∆t changed; then the connection can continue to proceed as 
     normal. If, on the other hand, the MN moves to a different AR, 
     i.e. the IP address has changed; the CN will need to be notified 
     
   Shahrier       Standard Track - Expires July 2001                 6 
    
                A Optimal Mobility Management Protocol   May 2001 
                    for 3G Wireless Internet 
    
     of the new IP address. Thereafter, these aforementioned sources 
     must re-direct their traffic flows. The MN sends the following UDP 
     message back to the CN and the home BR. The home BR updates its 
     HLR accordingly: 
    
     1. In the UDP header, the SOURCE PORT and the DESTINATION PORT 
        fields are replaced by the host-name of the MN and the target 
        respectively.  
      
     2. The new IP address is placed in the data section of the UDP  
        header. The UDP MESSAGE LENGTH is set to 12 bytes because it is  
        3 words long. 
      
     3. The entire UDP packet is encapsulated into an IP datagram. The 
        SOURCE IP ADDRESS and DESTINATION IP ADDRESS are placed into   
        their respective fields in the IP header. These IP addresses  
        are obtained from the DNS using the respective <HNI,host-name> 
        pairs. 
      
     4. The IP datagram is sent back to the target, either being the CN  
        or the home BR. 
         
   The format of the UDP packet is as follows: 
 
    0                   1                   2                   3 
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
   |       SOURCE HOST-NAME        |     DESTINATION HOST-NAME     |    
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
   |      UDP MESSAGE LENGTH(12)   |          UDP CHECKSUM         |        
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+    
   |                       TARGET IP ADDRESS                       | 
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+  
   |                                                               |  
 
  5. References 
    
  [1] C. Perkins et. al.,ˆIP Mobility Supportˆ, FC 2002. 
 
  [2] Design Team ˆProblem Statement: Reasons for Doing Context Transfers         
      Between Mobile Nodes in IP Mobile Networksˆ, Internet-Draft. 
 
    
 
Author's Addresses 
    
   Sharif M. Shahrier 
   InterDigital  
   781 Third Ave.               Phone: 1-610-337-4343 
   King of Prussia, PA. USA     Email: sharif.shahrier@interdigital.com 
     
   Shahrier       Standard Track - Expires July 2001                 7 
    