<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>The Evaluation of Different Network Addres Translator (NAT) Traversal Techniques for Media Controlled by Real-time Streaming Protocol (RTSP)</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.1.1" rel="Chapter" title="1.1 Network Address Translators">
<link href="#rfc.section.1.2" rel="Chapter" title="1.2 Firewalls">
<link href="#rfc.section.1.3" rel="Chapter" title="1.3 Glossary">
<link href="#rfc.section.1.4" rel="Chapter" title="1.4 Definitions">
<link href="#rfc.section.2" rel="Chapter" title="2 Detecting the loss of NAT mappings">
<link href="#rfc.section.3" rel="Chapter" title="3 Requirements on NAT-Traversal">
<link href="#rfc.section.4" rel="Chapter" title="4 NAT Traversal Techniques">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 STUN">
<link href="#rfc.section.4.1.1" rel="Chapter" title="4.1.1 Introduction">
<link href="#rfc.section.4.1.2" rel="Chapter" title="4.1.2 Using STUN to traverse NAT without server modifications">
<link href="#rfc.section.4.1.3" rel="Chapter" title="4.1.3 Embedding STUN in RTSP">
<link href="#rfc.section.4.1.4" rel="Chapter" title="4.1.4 Discussion On Co-located STUN Server">
<link href="#rfc.section.4.1.5" rel="Chapter" title="4.1.5 ALG considerations">
<link href="#rfc.section.4.1.6" rel="Chapter" title="4.1.6 Deployment Considerations">
<link href="#rfc.section.4.1.7" rel="Chapter" title="4.1.7 Security Considerations">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 ICE">
<link href="#rfc.section.4.2.1" rel="Chapter" title="4.2.1 Introduction">
<link href="#rfc.section.4.2.2" rel="Chapter" title="4.2.2 Using ICE in RTSP">
<link href="#rfc.section.4.2.3" rel="Chapter" title="4.2.3 Implementation burden of ICE">
<link href="#rfc.section.4.2.4" rel="Chapter" title="4.2.4 Deployment Considerations">
<link href="#rfc.section.4.2.5" rel="Chapter" title="4.2.5 Security Consideration">
<link href="#rfc.section.4.3" rel="Chapter" title="4.3 Symmetric RTP">
<link href="#rfc.section.4.3.1" rel="Chapter" title="4.3.1 Introduction">
<link href="#rfc.section.4.3.2" rel="Chapter" title="4.3.2 Necessary RTSP extensions">
<link href="#rfc.section.4.3.3" rel="Chapter" title="4.3.3 Deployment Considerations">
<link href="#rfc.section.4.3.4" rel="Chapter" title="4.3.4 Security Consideration">
<link href="#rfc.section.4.3.5" rel="Chapter" title="4.3.5 A Variation to Symmetric RTP">
<link href="#rfc.section.4.4" rel="Chapter" title="4.4 Application Level Gateways">
<link href="#rfc.section.4.4.1" rel="Chapter" title="4.4.1 Introduction">
<link href="#rfc.section.4.4.2" rel="Chapter" title="4.4.2 Outline On how ALGs for RTSP work">
<link href="#rfc.section.4.4.3" rel="Chapter" title="4.4.3 Deployment Considerations">
<link href="#rfc.section.4.4.4" rel="Chapter" title="4.4.4 Security Considerations">
<link href="#rfc.section.4.5" rel="Chapter" title="4.5 TCP Tunneling">
<link href="#rfc.section.4.5.1" rel="Chapter" title="4.5.1 Introduction">
<link href="#rfc.section.4.5.2" rel="Chapter" title="4.5.2 Usage of TCP tunneling in RTSP">
<link href="#rfc.section.4.5.3" rel="Chapter" title="4.5.3 Deployment Considerations">
<link href="#rfc.section.4.5.4" rel="Chapter" title="4.5.4 Security Considerations">
<link href="#rfc.section.4.6" rel="Chapter" title="4.6 TURN (Traversal Using Relay NAT)">
<link href="#rfc.section.4.6.1" rel="Chapter" title="4.6.1 Introduction">
<link href="#rfc.section.4.6.2" rel="Chapter" title="4.6.2 Usage of TURN with RTSP">
<link href="#rfc.section.4.6.3" rel="Chapter" title="4.6.3 Deployment Considerations">
<link href="#rfc.section.4.6.4" rel="Chapter" title="4.6.4 Security Considerations">
<link href="#rfc.section.5" rel="Chapter" title="5 Firewalls">
<link href="#rfc.section.6" rel="Chapter" title="6 Comparision of NAT traversal techniques">
<link href="#rfc.section.7" rel="Chapter" title="7 IANA Considerations">
<link href="#rfc.section.8" rel="Chapter" title="8 Security Considerations">
<link href="#rfc.section.9" rel="Chapter" title="9 Acknowledgements">
<link href="#rfc.references" rel="Chapter" title="10 References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="This document describes several Network Address Translator (NAT) traversal techniques that was considered to be used by Real-time Streaming Protocol (RTSP). Each technique includes a description on how it would be used, the security implications of using it and any other deployment considerations it has. There are also disussions on how NAT traversal techniques relates to firewalls and how each technique can be applied in different use cases. These findings where used when selecting the NAT traversal for RTSP 2.0 standardized in the MMUSIC WG." />
  <meta name="description" content="This document describes several Network Address Translator (NAT) traversal techniques that was considered to be used by Real-time Streaming Protocol (RTSP). Each technique includes a description on how it would be used, the security implications of using it and any other deployment considerations it has. There are also disussions on how NAT traversal techniques relates to firewalls and how each technique can be applied in different use cases. These findings where used when selecting the NAT traversal for RTSP 2.0 standardized in the MMUSIC WG." />
  <meta name="keywords" content="" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Network Working Group</td>
<td class="right">M. Westerlund</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">Ericsson</td>
</tr>
<tr>
<td class="left">Intended status: Informational</td>
<td class="right">T. Zeng</td>
</tr>
<tr>
<td class="left">Expires: September 15, 2011</td>
<td class="right">March 14, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">The Evaluation of Different Network Addres Translator (NAT) Traversal Techniques for Media Controlled by Real-time Streaming Protocol (RTSP)<br />
  <span class="filename">draft-ietf-mmusic-rtsp-nat-evaluation-03</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This document describes several Network Address Translator (NAT) traversal techniques that was considered to be used by Real-time Streaming Protocol (RTSP). Each technique includes a description on how it would be used, the security implications of using it and any other deployment considerations it has. There are also disussions on how NAT traversal techniques relates to firewalls and how each technique can be applied in different use cases. These findings where used when selecting the NAT traversal for RTSP 2.0 standardized in the MMUSIC WG.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on September 15, 2011.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>
<p>This document may contain material from IETF Documents or IETF Contributions published or made publicly available before November 10, 2008.  The person(s) controlling the copyright in some of this material may not have granted the IETF Trust the right to allow modifications of such material outside the IETF Standards Process. Without obtaining an adequate license from the person(s) controlling the copyright in such materials, this document may not be modified outside the IETF Standards Process, and derivative works of it may not be created outside the IETF Standards Process, except to format it for publication as an RFC or to translate it into languages other than English.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>1.1.   <a href="#rfc.section.1.1">Network Address Translators</a>
</li>
<li>1.2.   <a href="#rfc.section.1.2">Firewalls</a>
</li>
<li>1.3.   <a href="#rfc.section.1.3">Glossary</a>
</li>
<li>1.4.   <a href="#rfc.section.1.4">Definitions</a>
</li>
<li>2.   <a href="#rfc.section.2">Detecting the loss of NAT mappings</a>
</li>
<li>3.   <a href="#rfc.section.3">Requirements on NAT-Traversal</a>
</li>
<li>4.   <a href="#rfc.section.4">NAT Traversal Techniques</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">STUN</a>
</li>
<li>4.1.1.   <a href="#rfc.section.4.1.1">Introduction</a>
</li>
<li>4.1.2.   <a href="#rfc.section.4.1.2">Using STUN to traverse NAT without server modifications</a>
</li>
<li>4.1.3.   <a href="#rfc.section.4.1.3">Embedding STUN in RTSP</a>
</li>
<li>4.1.4.   <a href="#rfc.section.4.1.4">Discussion On Co-located STUN Server</a>
</li>
<li>4.1.5.   <a href="#rfc.section.4.1.5">ALG considerations</a>
</li>
<li>4.1.6.   <a href="#rfc.section.4.1.6">Deployment Considerations</a>
</li>
<li>4.1.7.   <a href="#rfc.section.4.1.7">Security Considerations</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">ICE</a>
</li>
<li>4.2.1.   <a href="#rfc.section.4.2.1">Introduction</a>
</li>
<li>4.2.2.   <a href="#rfc.section.4.2.2">Using ICE in RTSP</a>
</li>
<li>4.2.3.   <a href="#rfc.section.4.2.3">Implementation burden of ICE</a>
</li>
<li>4.2.4.   <a href="#rfc.section.4.2.4">Deployment Considerations</a>
</li>
<li>4.2.5.   <a href="#rfc.section.4.2.5">Security Consideration</a>
</li>
<li>4.3.   <a href="#rfc.section.4.3">Symmetric RTP</a>
</li>
<li>4.3.1.   <a href="#rfc.section.4.3.1">Introduction</a>
</li>
<li>4.3.2.   <a href="#rfc.section.4.3.2">Necessary RTSP extensions</a>
</li>
<li>4.3.3.   <a href="#rfc.section.4.3.3">Deployment Considerations</a>
</li>
<li>4.3.4.   <a href="#rfc.section.4.3.4">Security Consideration</a>
</li>
<li>4.3.5.   <a href="#rfc.section.4.3.5">A Variation to Symmetric RTP</a>
</li>
<li>4.4.   <a href="#rfc.section.4.4">Application Level Gateways</a>
</li>
<li>4.4.1.   <a href="#rfc.section.4.4.1">Introduction</a>
</li>
<li>4.4.2.   <a href="#rfc.section.4.4.2">Outline On how ALGs for RTSP work</a>
</li>
<li>4.4.3.   <a href="#rfc.section.4.4.3">Deployment Considerations</a>
</li>
<li>4.4.4.   <a href="#rfc.section.4.4.4">Security Considerations</a>
</li>
<li>4.5.   <a href="#rfc.section.4.5">TCP Tunneling</a>
</li>
<li>4.5.1.   <a href="#rfc.section.4.5.1">Introduction</a>
</li>
<li>4.5.2.   <a href="#rfc.section.4.5.2">Usage of TCP tunneling in RTSP</a>
</li>
<li>4.5.3.   <a href="#rfc.section.4.5.3">Deployment Considerations</a>
</li>
<li>4.5.4.   <a href="#rfc.section.4.5.4">Security Considerations</a>
</li>
<li>4.6.   <a href="#rfc.section.4.6">TURN (Traversal Using Relay NAT)</a>
</li>
<li>4.6.1.   <a href="#rfc.section.4.6.1">Introduction</a>
</li>
<li>4.6.2.   <a href="#rfc.section.4.6.2">Usage of TURN with RTSP</a>
</li>
<li>4.6.3.   <a href="#rfc.section.4.6.3">Deployment Considerations</a>
</li>
<li>4.6.4.   <a href="#rfc.section.4.6.4">Security Considerations</a>
</li>
<li>5.   <a href="#rfc.section.5">Firewalls</a>
</li>
<li>6.   <a href="#rfc.section.6">Comparision of NAT traversal techniques</a>
</li>
<li>7.   <a href="#rfc.section.7">IANA Considerations</a>
</li>
<li>8.   <a href="#rfc.section.8">Security Considerations</a>
</li>
<li>9.   <a href="#rfc.section.9">Acknowledgements</a>
</li>
<li>10.   <a href="#rfc.references">References</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">Today there is a proliferate deployment of different flavors of Network Address Translator (NAT) boxes that in many cases only loosely follows <a href="#RFC3022">standards</a> <cite title="NONE">[RFC3022]</cite><a href="#RFC2663">[RFC2663]</a><a href="#RFC3424">[RFC3424]</a>]. NATs cause discontinuity in <a href="#RFC3424">address realms</a> <cite title="NONE">[RFC3424]</cite>, therefore an application protocol, such as <a href="#RFC2326">Real-time Streaming Protocol (RTSP)</a> <cite title="NONE">[RFC2326]</cite><a href="#I-D.ietf-mmusic-rfc2326bis">[I-D.ietf-mmusic-rfc2326bis]</a>, needs to deal with such discontinuities caused by NATs. The problem is that, being a media control protocol managing one or more media streams, RTSP carries network address and port information within its protocol messages.  Because of this, even if RTSP itself, when carried over <a href="#RFC0793">Transmission Control Protocol (TCP)</a> <cite title="NONE">[RFC0793]</cite> for example, may not be blocked by NATs, its media streams may be blocked by NATs.  This will occur unless special protocol provisions are added to support NAT-traversal.</p>
<p id="rfc.section.1.p.2">Like NATs, firewalls (FWs) are also middle boxes that need to be considered. Firewalls helps prevent unwanted traffic from getting in or out of the protected network. RTSP is designed such that a firewall can be configured to let RTSP controlled media streams to go through with minimal implementation effort. The minimal effort is to implement an Application Level Gateway (ALG) to interpret RTSP parameters. There is also a large class of firewalls, commonly home firewalls, that uses a similar filtering behavior to what NAT has. This type of firewalls can be handled using the same solution as employed for NAT traversal instead of relying on ALGs.</p>
<p id="rfc.section.1.p.3">This document describes several NAT-traversal mechanisms for RTSP controlled media streaming. These NAT solutions fall into the category of "UNilateral Self-Address Fixing (UNSAF)" as defined in <a href="#RFC3424">[RFC3424]</a> and quoted below:</p>
<p id="rfc.section.1.p.4">"UNSAF is a process whereby some originating process attempts to determine or fix the address (and port) by which it is known - e.g. to be able to use address data in the protocol exchange, or to advertise a public address from which it will receive connections."</p>
<p id="rfc.section.1.p.5">Following the guidelines spelled out in RFC 3424, we describe the required RTSP protocol extensions for each method, transition strategies, and security concerns.</p>
<p id="rfc.section.1.p.6">This document is capturing the evaluation done in the process to recommend FW/NAT traversal methods for RTSP streaming servers based on <a href="#RFC2326">RFC 2326</a> <cite title="NONE">[RFC2326]</cite> as well as the <a href="#I-D.ietf-mmusic-rfc2326bis">RTSP 2.0 core spec</a> <cite title="NONE">[I-D.ietf-mmusic-rfc2326bis]</cite>. The evaluation is focused on NAT traversal for the media streams carried over <a href="#RFC0768">User Datagram Protocol (UDP)</a> <cite title="NONE">[RFC0768]</cite>. Where <a href="#RFC3550">Real-time Transport Protocol (RTP)</a> <cite title="NONE">[RFC3550]</cite> over UDP being the main case for such usage. The findings should be applicable to other protocols as long as they have similar properties.</p>
<p></p>
<h1 id="rfc.section.1.1">
<a href="#rfc.section.1.1">1.1.</a> <a href="#sec-nat-intro" id="sec-nat-intro">Network Address Translators</a>
</h1>
<p id="rfc.section.1.1.p.1">Readers are urged to refer to <a href="#RFC2663">"IP Network Address Translator (NAT) Terminology and Considerations"</a> <cite title="NONE">[RFC2663]</cite> for information on NAT taxonomy and terminology. Traditional NAT is the most common type of NAT device deployed. Readers may refer to <a href="#RFC3022">"Traditional IP Network Address Translator (Traditional NAT)"</a> <cite title="NONE">[RFC3022]</cite> for detailed information on traditional NAT.  Traditional NAT has two main varieties -- Basic NAT and Network Address/Port Translator (NAPT).</p>
<p id="rfc.section.1.1.p.2">NAPT is by far the most commonly deployed NAT device. NAPT allows multiple internal hosts to share a single public IP address simultaneously. When an internal host opens an outgoing TCP or UDP session through a NAPT, the NAPT assigns the session a public IP address and port number, so that subsequent response packets from the external endpoint can be received by the NAPT, translated, and forwarded to the internal host. The effect is that the NAPT establishes a NAT mapping to translate the (private IP address, private port number) tuple to a (public IP address, public port number) tuple, and vice versa, for the duration of the session. An issue of relevance to peer-to-peer applications is how the NAT behaves when an internal host initiates multiple simultaneous sessions from a single (private IP, private port) endpoint to multiple distinct endpoints on the external network. In this specification, the term "NAT" refers to both "Basic NAT" and "Network Address/Port Translator (NAPT)".</p>
<p id="rfc.section.1.1.p.3">This document uses the term "address and port mapping" as the translation between an external address and port and an internal address and port. Note that this is not the same as an "address binding" as defined in RFC 2663. There exist a number of address and port mapping behaviors described in more detail in Section 4.1 of <a href="#RFC4787">"Network Address Translation (NAT) Behavioral Requirements for Unicast UDP"</a> <cite title="NONE">[RFC4787]</cite>.</p>
<p id="rfc.section.1.1.p.4">NATs also have a filtering behavior on traffic arriving on the external side. Such behavior effects how well different methods for NAT traversal works through these NATs. See Section 5 of <a href="#RFC4787">"Network Address Translation (NAT) Behavioral Requirements for Unicast UDP"</a> <cite title="NONE">[RFC4787]</cite> for more information on the different types of filtering that have been identified.</p>
<h1 id="rfc.section.1.2">
<a href="#rfc.section.1.2">1.2.</a> Firewalls</h1>
<p id="rfc.section.1.2.p.1">A firewall (FW) is a security gateway that enforces certain access control policies between two network administrative domains: a private domain (intranet) and a external domain, e.g. public Internet. Many organizations use firewalls to prevent privacy intrusions and malicious attacks to corporate computing resources in the private intranet <a href="#RFC2588">[RFC2588]</a>.</p>
<p id="rfc.section.1.2.p.2">A comparison between NAT and FW is given below:</p>
<p></p>

<ol>
<li>A firewall must sit between two network administrative domains, while NAT does not have to sit between two domains.</li>
<li>NAT does not in itself provide security, although some access control policies can be implemented using address translation schemes. The inherent filtering behaviours are commonly mistaken for real security policies.</li>
</ol>
<p id="rfc.section.1.2.p.4">It should be noted that many NAT devices intended for small office/home office (SOHO) include both NATs and firewall functionality.</p>
<p id="rfc.section.1.2.p.5">In the rest of this memo we use the phrase "NAT traversal" interchangeably with "FW traversal", "NAT/FW traversal" and "NAT/Firewall traversal".</p>
<h1 id="rfc.section.1.3">
<a href="#rfc.section.1.3">1.3.</a> Glossary</h1>
<p></p>

<dl>
<dt>ALG:</dt>
<dd style="margin-left: 6">Application Level Gateway, an entity that can be embedded in a NAT or other middlebox to perform the application layer functions required for a particular protocol to traverse the NAT/middlebox.</dd>
<dt>ICE:</dt>
<dd style="margin-left: 6">Interactive Connectivity Establishment, see <a href="#RFC5245">[RFC5245]</a>.</dd>
<dt>DNS:</dt>
<dd style="margin-left: 6">Domain Name Service</dd>
<dt>DDOS:</dt>
<dd style="margin-left: 6">Distributed Denial Of Service attacks</dd>
<dt>NAT:</dt>
<dd style="margin-left: 6">Network Address Translator, see <a href="#RFC3022">[RFC3022]</a>.</dd>
<dt>NAPT:</dt>
<dd style="margin-left: 6">Network Address/Port Translator, see <a href="#RFC3022">[RFC3022]</a>.</dd>
<dt>RTP:</dt>
<dd style="margin-left: 6">Real-time Transport Protocol, see <a href="#RFC3550">[RFC3550]</a>.</dd>
<dt>RTSP:</dt>
<dd style="margin-left: 6">Real-Time Streaming Protocol, see <a href="#RFC2326">[RFC2326]</a> and <a href="#I-D.ietf-mmusic-rfc2326bis">[I-D.ietf-mmusic-rfc2326bis]</a>.</dd>
<dt>SDP:</dt>
<dd style="margin-left: 6">Session Description Protocol, see <a href="#RFC4566">[RFC4566]</a>.</dd>
<dt>SSRC:</dt>
<dd style="margin-left: 6">Synchronization source in RTP, see <a href="#RFC3550">[RFC3550]</a>.</dd>
</dl>
<h1 id="rfc.section.1.4">
<a href="#rfc.section.1.4">1.4.</a> Definitions</h1>
<p id="rfc.section.1.4.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">RFC 2119</a> <cite title="NONE">[RFC2119]</cite>.</p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> Detecting the loss of NAT mappings</h1>
<p id="rfc.section.2.p.1">Several NAT traversal techniques in the next chapter make use of the fact that the NAT UDP mapping's external address and port can be discovered. This information is then utilized to traverse the NAT box.  However any such information is only good while the mapping is still valid. As the IAB's UNSAF document <a href="#RFC3424">[RFC3424]</a> points out, the mapping can either timeout or change its properties. It is therefore important for the NAT traversal solutions to handle the loss or change of NAT mappings, according to RFC3424.</p>
<p id="rfc.section.2.p.2">First, since NATs may also dynamically reclaim or readjust address/port translations, "keep-alive" and periodic re-polling may be required according to RFC 3424. Secondly, it is possible to detect and recover from the situation where the mapping has been changed or removed. The loss of a mapping can be detected when no traffic arrives for a while. Below we will give some recommendation on how to detect loss of NAT mappings when using RTP/RTCP under RTSP control.</p>
<p id="rfc.section.2.p.3">A RTP session normally has both RTP and RTCP streams. The loss of a RTP mapping can only be detected when expected traffic does not arrive.  If a client does not receive data within a few seconds after having received the "200 OK" response to a PLAY request, there are likely some middleboxes blocking the traffic. However, for a receiver to be more certain to detect the case where no RTP traffic was delivered due to NAT trouble, one should monitor the RTCP Sender reports. The sender report carries a field telling how many packets the server has sent. If that has increased and no RTP packets has arrived for a few seconds it is likely the RTP mapping has been removed.</p>
<p id="rfc.section.2.p.4">The loss of mapping for RTCP is simpler to detect. RTCP is normally sent periodically in each direction, even during the RTSP ready state.  If RTCP packets are missing for several RTCP intervals, the mapping is likely to be lost. Note that if neither RTCP packets nor RTSP messages are received by the RTSP server for a while, the RTSP server has the option to delete the corresponding RTP session, SSRC and RTSP session ID, because either the client can not get through a middle box NAT/FW, or that the client is mal-functioning.</p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> <a href="#req-section" id="req-section">Requirements on NAT-Traversal</a>
</h1>
<p id="rfc.section.3.p.1">This section considers the set of requirements for the evaulation of RTSP NAT traversal solutions.</p>
<p id="rfc.section.3.p.2">RTSP is a client-server protocol. Typically services providers deploy RTSP servers in the public address realm. However, there are use cases where the reverse is true: RTSP clients are connecting from public address realm to RTSP servers behind home NATs. This is the case for instance when home surveillance cameras running as RTSP servers intend to stream video to cell phone users in the public address realm through a home NAT. In terms of requirements, the first requirement should be to solve the RTSP NAT traversal problem for RTSP servers deployed in a public network, i.e. no NAT at the server side.</p>
<p id="rfc.section.3.p.3">The list of feature requirements for RTSP NAT solutions are given below:</p>
<p></p>

<ol>
<li>MUST work for all flavors of NATs, including NATs with address and port restricted filtering.</li>
<li>MUST work for firewalls (subject to pertinent firewall administrative policies), including those with ALGs.</li>
<li>SHOULD have minimal impact on clients in the open and not dual-hosted. RTSP dual-hosting means that RTSP protocol and the media protocol (e.g. RTP) are implemented on different computers with different IP addresses.<ul><li>For instance, no extra delay from RTSP connection till arrival of media</li></ul>
</li>
<li>SHOULD be simple to use/implement/administer that people actually turn them on<ul>
<li>Otherwise people will resort to TCP tunneling through NATs</li>
<li>Address discovery for NAT traversal should take place behind the scene, if possible</li>
</ul>
</li>
<li>SHOULD authenticate dual-hosted client transport handler to prevent DDOS attacks.</li>
</ol>

<p>The last requirement addresses the Distributed Denial-Of-Service (DDOS) threat, which relates to NAT traversal as explained below.</p>
<p id="rfc.section.3.p.5">During NAT traversal, when the RTSP server determines the media destination (Address and port) for client, the result may be that the public IP address of the RTP receiver host is different than the public IP address of the RTSP client host. This posts a DDOS threat that has significant amplification potentials because the RTP media streams in general consist of large number of IP packets. DDOS attacks occur if the attacker fakes the messages in the NAT traversal mechanism to trick the RTSP server into believing that the client's RTP receiver is located in a separate host. For example, user A may use his RTSP client to direct the RTSP server to send video RTP streams to target.example.com in order to degrade the services provided by target.example.com. Note a simple preventative measure is for the RTSP server to disallow the cases where the client's RTP receiver has a different public IP address than that of the RTSP client. However, in some applications (e.g., centralized conferencing), dual-hosted RTSP/RTP clients have valid use cases. The key is how to authenticate the messages exchanged during the NAT traversal process. Message authentication is a big challenge in the current wired and wireless networking environment. It may be necessary in the immediate future to deploy NAT traversal solutions that do not have full message authentication, but provide upgrade path to add authentication features in the future.</p>
<p></p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#NAT-trav-tech" id="NAT-trav-tech">NAT Traversal Techniques</a>
</h1>
<p id="rfc.section.4.p.1">There exist a number of potential NAT traversal techniques that can be used to allow RTSP to traverse NATs. They have different features and are applicable to different topologies; their cost is also different.  They also vary in security levels. In the following sections, each technique is outlined in details with discussions on the corresponding advantages and disadvantages.</p>
<p id="rfc.section.4.p.2">This section includes NAT traversal techniques that have not been formally specified anywhere else. The overview section of this document may be the only publicly available specification of some of the NAT traversal techniques. However that is no real barrier against doing an evaluation of the NAT traversal technique. Some other techniques are currently (at the time of writing) in a state of flux due to ongoing standardization work on these techniques, e.g. RTP No-Op <a href="#I-D.ietf-avt-rtp-no-op">[I-D.ietf-avt-rtp-no-op]</a>.</p>
<p></p>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> STUN</h1>
<p></p>
<p></p>
<h1 id="rfc.section.4.1.1">
<a href="#rfc.section.4.1.1">4.1.1.</a> Introduction</h1>
<p id="rfc.section.4.1.1.p.1">STUN - "Simple Traversal of UDP Through Network Address Translators" <a href="#RFC3489">[RFC3489]</a><a href="#RFC5389">[RFC5389]</a> is a standardized protocol that allows a client to use secure means to discover the presence of a NAT between himself and the STUN server. The client uses the STUN server to discover the address mappings assigned by the NAT. STUN is a client-server protocol. STUN client sends a request to a STUN server and the server returns a response. There are two types of STUN requests - Binding Requests, sent over UDP, and Shared Secret Requests, sent over TLS over TCP. </p>
<p id="rfc.section.4.1.1.p.2">The first version of <a href="#RFC3489">STUN</a> <cite title="NONE">[RFC3489]</cite> included categorization and parameterization of NATs. This was abandoned in the updated version due to it being unreliable. </p>
<h1 id="rfc.section.4.1.2">
<a href="#rfc.section.4.1.2">4.1.2.</a> Using STUN to traverse NAT without server modifications</h1>
<p id="rfc.section.4.1.2.p.1">This section describes how a client can use STUN to traverse NATs to RTSP servers without requiring server modifications. Note that this method has limited applicability and requires the server to be available in the external/public address realm in regards to the client located behind a NAT(s).</p>
<p id="rfc.section.4.1.2.p.2">Limitations:</p>
<p></p>

<ul>
<li>The server must be located in either a public address realm or the next hop external address realm in regards to the client.</li>
<li>The client may only be located behind NATs that performing Endpoint Independent or Address Dependent Mappings. Clients behind NATs that do Address and Port Dependent Mappings cannot use this method.</li>
</ul>

<p>Method:</p>
<p id="rfc.section.4.1.2.p.4">A RTSP client using RTP transport over UDP can use STUN to traverse a NAT(s) in the following way:</p>
<p></p>

<ol>
<li>Use STUN to try to discover the type of NAT, and the timeout period for any UDP mapping on the NAT. This is RECOMMENDED to be performed in the background as soon as IP connectivity is established. If this is performed prior to establishing a streaming session the delays in the session establishment will be reduced. If no NAT is detected, normal SETUP SHOULD be used.</li>
<li>The RTSP client determines the number of UDP ports needed by counting the number of needed media transport protocols sessions in the multi-media presentation. This information is available in the media description protocol, e.g. SDP <a href="#RFC4566">[RFC4566]</a>. For example, each RTP session will in general require two UDP ports, one for RTP, and one for RTCP.</li>
<li>For each UDP port required, establish a mapping and discover the public/external IP address and port number with the help of the STUN server. A successful mapping looks like: client's local address/port &lt;-&gt; public address/port.</li>
<li>Perform the RTSP SETUP for each media. In the transport header the following parameter SHOULD be included with the given values: <a href="#I-D.ietf-mmusic-rfc2326bis">"dest_addr"</a> <cite title="NONE">[I-D.ietf-mmusic-rfc2326bis]</cite> or "destination" + <a href="#RFC2326">"client_port"</a> <cite title="NONE">[RFC2326]</cite> with the public/external IP address and port pair for both RTP and RTCP. To be certain that this works servers must allow a client to setup the RTP stream on any port, not only even ports and with non-continuous port numbers for RTP and RTCP. This requires the new feature provided in the <a href="#I-D.ietf-mmusic-rfc2326bis">update to RFC2326</a> <cite title="NONE">[I-D.ietf-mmusic-rfc2326bis]</cite>.  The server should respond with a transport header containing an "src_addr" or "source parameter" + "server_port" with the RTP and RTCP source IP address and port of the media stream.</li>
<li>To keep the mappings alive, the client SHOULD periodically send UDP traffic over all mappings needed for the session. For the mapping carrying RTCP traffic the periodic RTCP traffic may be enough. For mappings carrying RTP traffic and for mappings carrying RTCP packets at too low a frequency, keep-alive messages SHOULD be sent. As keep alive messages, one could use the <a href="#I-D.ietf-avt-rtp-no-op">RTP No-Op packet</a> <cite title="NONE">[I-D.ietf-avt-rtp-no-op]</cite> to the streaming server's discard port (port number 9). The drawback of using RTP No-Op is that the payload type number must be dynamically assigned through RTSP first.  Otherwise STUN could be used for the keep-alive as well as empty UDP packets.</li>
</ol>

<p>If a UDP mapping is lost, the above discovery process must be repeated. The media stream also needs to be SETUP again to change the transport parameters to the new ones. This will cause a glitch in media playback.</p>
<p id="rfc.section.4.1.2.p.6">To allow UDP packets to arrive from the server to a client behind a "Address Dependent" filtering NAT, the client must first send a UDP packet to establish filtering state in the NAT. The client, before sending a RTSP PLAY request, must send a so called FW packet (such as a RTP No-Op packet) on each mapping, to the IP address given as the servers source address. To create minimum problems for the server these UDP packets SHOULD be sent to the server's discard port (port number 9). Since UDP packets are inherently unreliable, to ensure that at least one UDP message passes the NAT, FW packets should be retransmitted a reasonable number of times.</p>
<p id="rfc.section.4.1.2.p.7">For a "Address and Port Dependent" filtering NAT the client must send messages to the exact ports used by the server to send UDP packets before sending a RTSP PLAY request. This makes it possible to use the above described process with the following additional restrictions: for each port mapping, FW packets need to be sent first to the server's source address/port. To minimize potential effects on the server from these messages the following type of FW packets MUST be sent. RTP: an empty or less than 12 bytes UDP packet. RTCP: A correctly formatted RTCP RR or SR message. The above described adaptations for restricted NATs will not work unless the server includes the "src_addr" in the "Transport" header (which is the "source" transport parameter in RFC2326).</p>
<p id="rfc.section.4.1.2.p.8">This method is also brittle because it relies on that one can use STUN to classify the NAT behavior. If the NAT changes the properties of the existing mapping and filtering state for example due to load, then the methods will fail. </p>
<h1 id="rfc.section.4.1.3">
<a href="#rfc.section.4.1.3">4.1.3.</a> Embedding STUN in RTSP</h1>
<p id="rfc.section.4.1.3.p.1">This section outlines the adaptation and embedding of STUN within RTSP. This enables STUN to be used to traverse any type of NAT, including symmetric NATs. This would require protocol changes. </p>
<p id="rfc.section.4.1.3.p.2">This NAT traversal solution has limitations:</p>
<p></p>

<ol>
<li>It does not work if both RTSP client and RTSP server are behind separate NATs.</li>
<li>The RTSP server may, for security reasons, refuse to send media streams to an IP different from the IP in the client RTSP requests.</li>
</ol>
<p id="rfc.section.4.1.3.p.4">Deviations from STUN as defined in RFC 3489:</p>
<p></p>

<ol>
<li>We allow RTSP applications to have the option to perform STUN "Shared Secret Request" through RTSP, via extension to RTSP;</li>
<li>We require STUN server to be co-located on RTSP server's media output ports.</li>
</ol>

<p>In order to allow binding discovery without authentication, the STUN server embedded in RTSP application must ignore authentication tag, and the STUN client embedded in RTSP application must use dummy authentication tag.</p>
<p id="rfc.section.4.1.3.p.6">If STUN server is co-located with RTSP server's media output port, an RTSP client using RTP transport over UDP can use STUN to traverse ALL types of NATs. In the case of port and address dependent mapping NATs, the party inside the NAT must initiate UDP traffic. The STUN Bind Request, being a UDP packet itself, can serve as the traffic initiating packet. Subsequently, both the STUN Binding Response packets and the RTP/RTCP packets can traverse the NAT, regardless of whether the RTSP server or the RTSP client is behind NAT.</p>
<p id="rfc.section.4.1.3.p.7">Likewise, if an RTSP server is behind a NAT, then an embedded STUN server must co-locate on the RTSP client's RTCP port. Also it will become the client that needs to disclose his destination address rather than the server so that the server correctly can determine its NAT external source address for the media streams. In this case, we assume that the client has some means of establishing TCP connection to the RTSP server behind NAT so as to exchange RTSP messages with the RTSP server.</p>
<p id="rfc.section.4.1.3.p.8">To minimize delay, we require that the RTSP server supporting this option must inform its client the RTP and RTCP ports from where the server intend to send out RTP and RTCP packets, respectively.  This can be done by using the "server_port" parameter in RFC2326, and the "src_addr" parameter in <a href="#I-D.ietf-mmusic-rfc2326bis">[I-D.ietf-mmusic-rfc2326bis]</a>. Both are in the RTSP Transport header. But in general this strategy will require that one first do one SETUP request per media to learn the server ports, then perform the STUN checks, followed by a subsequent SETUP to change the client port and destination address to what was learned during the STUN checks.</p>
<p id="rfc.section.4.1.3.p.9">To be certain that RTCP works correctly the RTSP end-point (server or client) will be required to send and receive RTCP packets from the same port.</p>
<h1 id="rfc.section.4.1.4">
<a href="#rfc.section.4.1.4">4.1.4.</a> Discussion On Co-located STUN Server</h1>
<p id="rfc.section.4.1.4.p.1">In order to use STUN to traverse "address and port dependent" filtering or mapping NATs the STUN server needs to be co-located with the streaming server media output ports. This creates a de-multiplexing problem: we must be able to differentiate a STUN packet from a media packet. This will be done based on heuristics. A common heuristics is the first byte in the packet, which works fine between STUN and RTP or RTCP where the first byte happens to be different, but may not work as well with other media transport protocols.</p>
<h1 id="rfc.section.4.1.5">
<a href="#rfc.section.4.1.5">4.1.5.</a> ALG considerations</h1>
<p id="rfc.section.4.1.5.p.1">If a NAT supports RTSP ALG (Application Level Gateway) and is not aware of the STUN traversal option, service failure may happen, because a client discovers its public IP address and port numbers, and inserts them in its SETUP requests, when the RTSP ALG processes the SETUP request it may change the destination and port number, resulting in unpredictable behavior. An ALG should not update address fields which contains addresses other than the NATs internal address domain. In cases where the ALG modifies fields unnecessary two alternatives exist:</p>

<ol>
<li>The usage of TLS to encrypt the RTSP TCP connection to prevent the ALG from reading and modifying the RTSP messages.</li>
<li>To turn off the STUN based NAT traversal mechanism</li>
</ol>

<p>As it may be difficult to determine why the failure occurs, the usage of TLS protected RTSP message exchange at all times would avoid this issue.</p>
<h1 id="rfc.section.4.1.6">
<a href="#rfc.section.4.1.6">4.1.6.</a> Deployment Considerations</h1>
<p id="rfc.section.4.1.6.p.1">For the non-embedded usage of STUN the following applies:</p>
<p id="rfc.section.4.1.6.p.2">Advantages:</p>
<p></p>

<ul>
<li>STUN is a solution first used by SIP applications. As shown above, with little or no changes, RTSP application can re-use STUN as a NAT traversal solution, avoiding the pit-fall of solving a problem twice.</li>
<li>Using STUN does not require RTSP server modifications; it only affects the client implementation.</li>
</ul>

<p>Disadvantages:</p>
<p></p>

<ul>
<li>Requires a STUN server deployed in the public address space.</li>
<li>Only works with NATs that perform endpoint independent and address dependent mappings. Port and address dependent filtering NATs create some issues.</li>
<li>Brittle to NATs changing the properties of the NAT mapping and filtering.</li>
<li>Does not work with port and address dependent mapping NATs without server modifications.</li>
<li>Will mostly not work if a NAT uses multiple IP addresses, since RTSP server generally requires all media streams to use the same IP as used in the RTSP connection to prevent becoming a DDOS tool.</li>
<li>Interaction problems exist when a RTSP-aware ALG interferes with the use of STUN for NAT traversal unless TLS secured RTSP message exchange is used.</li>
<li>Using STUN requires that RTSP servers and clients support the updated RTSP specification, because it is no longer possible to guarantee that RTP and RTCP ports are adjacent to each other, as required by the "client_port" and "server_port" parameters in RFC2326.</li>
</ul>

<p>Transition:</p>
<p id="rfc.section.4.1.6.p.5">The usage of STUN can be phased out gradually as the first step of a STUN capable server or client should be to check the presence of NATs. The removal of STUN capability in the client implementations will have to wait until there is absolutely no need to use STUN.</p>
<p id="rfc.section.4.1.6.p.6">For the "Embedded STUN" method the following applies:</p>
<p id="rfc.section.4.1.6.p.7">Advantages:</p>
<p></p>

<ul>
<li>STUN is a solution first used by SIP applications. As shown above, with little or no changes, RTSP application can re-use STUN as a NAT traversal solution, avoiding the pit-fall of solving a problem twice.</li>
<li>STUN has built-in message authentication features, which makes it more secure. See next section for an in-depth security discussion.</li>
<li>This solution works as long as there is only one RTSP end point in the private address realm, regardless of the NAT's type. There may even be multiple NATs (see figure 1 in RFC3489).</li>
<li>Compares to other UDP based NAT traversal methods in this document, STUN requires little new protocol development (since STUN is already a IETF standard), and most likely less implementation effort, since open source STUN server and client have become available <a href="#STUN-IMPL">[STUN-IMPL]</a>. There is the need to embed STUN in RTSP server and client, which require a de-multiplexer between STUN packets and RTP/RTCP packets.  There is also a need to register the proper feature tags.</li>
</ul>

<p>Disadvantages:</p>
<p></p>

<ul>
<li>Some extensions to the RTSP core protocol, signaled by RTSP feature tags, must be introduced.</li>
<li>Requires an embedded STUN server to co-locate on each of RTSP server's media protocol's ports (e.g. RTP and RTCP ports), which means more processing is required to de-multiplex STUN packets from media packets. For example, the de-multiplexer must be able to differentiate a RTCP RR packet from a STUN packet, and forward the former to the streaming server, the later to STUN server.</li>
<li>Does not support use cases that requires the RTSP connection and the media reception to happen at different addresses, unless the servers sequrity policy is relaxed.</li>
<li>Interaction problems exist when a RTSP ALG is not aware of STUN unless TLS is used to protect the RTSP messages.</li>
<li>Using STUN requires that RTSP servers and clients support the updated RTSP specification, and they both agree to support the NAT traversal feature.</li>
<li>Increases the setup delay with at least the amount of time it takes to perform STUN message exchanges. Most likely an extra SETUP sequence will be required.</li>
</ul>

<p>Transition:</p>
<p id="rfc.section.4.1.6.p.10">The usage of STUN can be phased out gradually as the first step of a STUN capable machine can be to check the presence of NATs for the presently used network connection. The removal of STUN capability in the client implementations will have to wait until there is absolutely no need to use STUN.</p>
<p></p>
<h1 id="rfc.section.4.1.7">
<a href="#rfc.section.4.1.7">4.1.7.</a> Security Considerations</h1>
<p id="rfc.section.4.1.7.p.1">To prevent RTSP server being used as Denial of Service (DoS) attack tools the RTSP Transport header parameter "destination" and "dest_addr" are generally not allowed to point to any IP address other than the one that RTSP message originates from. The RTSP server is only prepared to make an exception of this rule when the client is trusted (e.g., through the use of a secure authentication process, or through some secure method of challenging the destination to verify its willingness to accept the RTP traffic).  Such restriction means that STUN does not work for use cases where RTSP and media transport goes to different address. </p>
<p id="rfc.section.4.1.7.p.2">In terms of security property, STUN combined with destination address restricted RTSP has the same security properties as the core RTSP. It is protected from being used as a DoS attack tool unless the attacker has ability the to spoof the TCP connection carrying RTSP messages.</p>
<p id="rfc.section.4.1.7.p.3">Using STUN's support for message authentication and secure transport of RTSP messages, attackers cannot modify STUN responses or RTSP messages to change media destination. This protects against hijacking, however as a client can be the initiator of an attack, these mechanisms cannot securely prevent RTSP servers being used as DoS attack tools.</p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> ICE</h1>
<p></p>
<h1 id="rfc.section.4.2.1">
<a href="#rfc.section.4.2.1">4.2.1.</a> Introduction</h1>
<p><a href="#RFC5245">ICE (Interactive Connectivity Establishment)</a> <cite title="NONE">[RFC5245]</cite> is a methodology for NAT traversal that has been developed for SIP using SDP offer/answer. The basic idea is to try, in a parallel fashion, all possible connection addresses that an end point may have. This allows the end-point to use the best available UDP "connection" (meaning two UDP end-points capable of reaching each other). The methodology has very nice properties in that basically all NAT topologies are possible to traverse.</p>
<p id="rfc.section.4.2.1.p.2">Here is how ICE works on a high level. End point A collects all possible address that can be used, including local IP addresses, STUN derived addresses, TURN addresses, etc. On each local port that any of these address and port pairs leads to, a STUN server is installed. This STUN server only accepts STUN requests using the correct authentication through the use of username and password.</p>
<p id="rfc.section.4.2.1.p.3">End-point A then sends a request to establish connectivity with end-point B, which includes all possible destinations to get the media through too A. Note that each of A's published address/port pairs has a STUN server co-located. B, in its turn provides A with all its possible destinations for the different media streams. A and B then uses a STUN client to try to reach all the address and port pairs specified by A from its corresponding destination ports. The destinations for which the STUN requests have successfully completed are then indicated and selected.</p>
<p id="rfc.section.4.2.1.p.4">If B fails to get any STUN response from A, all hope is not lost.  Certain NAT topologies require multiple tries from both ends before successful connectivity is accomplished and therefore requests are retransmitted multiple times. The STUN requests may also result in that more connectivity alternatives are discovered and conveyed in the STUN responses.</p>
<h1 id="rfc.section.4.2.2">
<a href="#rfc.section.4.2.2">4.2.2.</a> Using ICE in RTSP</h1>
<p id="rfc.section.4.2.2.p.1">The usage of ICE for RTSP requires that both client and server be updated to include the ICE functionality. If both parties implement the necessary functionality the following steps could provide ICE support for RTSP.</p>
<p id="rfc.section.4.2.2.p.2">This assumes that it is possible to establish a TCP connection for the RTSP messages between the client and the server. This is not trivial in scenarios where the server is located behind a NAT, and may require some TCP ports been opened, or the deployment of proxies, etc.</p>
<p id="rfc.section.4.2.2.p.3">The negotiation of ICE in RTSP of necessity will work different than in SIP with SDP offer/answer. The protocol interactions are different and thus the possibilities for transfer of states are also somewhat different. The goal is also to avoid introducing extra delay in the setup process at least for when the server is using a public address and the client is either having a public address or is behind NAT(s). This process is only intended to support PLAY mode, i.e. media traffic flows from server to client.</p>
<p></p>

<ol>
<li>The ICE usage begins in the SDP. The SDP for the service indicates that ICE is supported at the server. No candidates can be given here as that would not work with the on demand, DNS load balancing, etc., that make a SDP indicate a resource on a server park rather than a specific machine.</li>
<li>The client gathers addresses and puts together its candidate for each media stream indicated in the session description.</li>
<li>In each SETUP request the client includes its candidates, promoting one for primary usage. This indicates for the server the ICE support by the client. One candidate is the primary candidate and here the prioritization for this address should be somewhat different compared to SIP. High performance rather than always successful is to recommended as it is most likely to be a server in the public.</li>
<li>The server responds to the SETUP (200 OK) for each media stream with its candidates. A server with a public address usually only provides a single ICE candidate. Also here one candidate is the server primary address.</li>
<li>The connectivity checks are performed. For the server the connectivity checks from the server to the clients have an additional usage. They verify that there is someone willingly to receive the media, thus protecting itself from performing unknowingly an DoS attack.</li>
<li>Connectivity checks from the client's primary to the server's primary was successful. Thus no further SETUP requests are necessary and processing can proceed with step 7. If another address than the primary has been verified by the client to work, that address may then be promoted for usage in a SETUP request (Goto 7). If the checks for the availble candidates failed and If further candidates have been derived during the connectivity checks, then those can be signalled in new candidate lines in SETUP request updating the list (Goto 5).</li>
<li>Client issues PLAY request. If the server also has completed its connectivity checks for this primary addresses (based on username as it may be derived addresses if the client was behind NAT) then it can directly answer 200 OK (Goto 8). If the connectivity check has not yet completed it responds with a 1xx code to indicate that it is verifying the connectivity. If that fails within the set timeout an error is reported back. Client needs to go back to 6.</li>
<li>Process completed media can be delivered. ICE testing ports may be released.</li>
</ol>
<p id="rfc.section.4.2.2.p.5">To keep media paths alive the client needs to periodically send data to the server. This could be realized with either STUN or <a href="#I-D.ietf-avt-rtp-no-op">RTP No-op</a> <cite title="NONE">[I-D.ietf-avt-rtp-no-op]</cite> packets. RTCP sent by client should be able to keep RTCP open.</p>
<h1 id="rfc.section.4.2.3">
<a href="#rfc.section.4.2.3">4.2.3.</a> Implementation burden of ICE</h1>
<p id="rfc.section.4.2.3.p.1">The usage of ICE will require that a number of new protocols and new RTSP/SDP features be implemented. This makes ICE the solution that has the largest impact on client and server implementations amongst all the NAT/FW traversal methods in this document.</p>
<p id="rfc.section.4.2.3.p.2">RTSP server implementation requirements are:</p>
<p></p>

<ul>
<li>STUN server features</li>
<li>limited STUN client features</li>
<li>SDP generation with more parameters.</li>
<li>RTSP error code for ICE extension</li>
</ul>

<p>RTSP client implantation requirements are:</p>
<p></p>

<ul>
<li>Limited STUN server features</li>
<li>Limited STUN client features</li>
<li>RTSP error code and ICE extension</li>
</ul>
<h1 id="rfc.section.4.2.4">
<a href="#rfc.section.4.2.4">4.2.4.</a> Deployment Considerations</h1>
<p id="rfc.section.4.2.4.p.1">Advantages:</p>
<p></p>

<ul>
<li>Solves NAT connectivity discovery for basically all cases as long as a TCP connection between them can be established. This includes servers behind NATs. (Note that a proxy between address domains may be required to get TCP through).</li>
<li>Improves defenses against DDOS attacks, as media receiving client requires authentications, via STUN on its media reception ports.</li>
</ul>

<p>Disadvantages:</p>
<p></p>

<ul>
<li>Increases the setup delay with at least the amount of time it takes for the server to perform its STUN requests.</li>
<li>Assumes that it is possible to de-multiplex between media packets and STUN packets.</li>
<li>Has fairly high implementation burden put on both RTSP server and client.</li>
</ul>
<h1 id="rfc.section.4.2.5">
<a href="#rfc.section.4.2.5">4.2.5.</a> Security Consideration</h1>
<p id="rfc.section.4.2.5.p.1">One should review the security consideration section of ICE and STUN to understand that ICE is contains some potential issues.  However these can be avoided by a correctly utilizing ICE in RTSP.  In fact ICE do help avoid the DDoS issue with RTSP substantially as it reduces the possibility for a DDoS using RTSP servers to attackers that are on-path between the RTSP server and the target and capable of intercepting the STUN connectivity check packets and correctly send a response to the server.</p>
<h1 id="rfc.section.4.3">
<a href="#rfc.section.4.3">4.3.</a> Symmetric RTP</h1>
<p></p>
<h1 id="rfc.section.4.3.1">
<a href="#rfc.section.4.3.1">4.3.1.</a> Introduction</h1>
<p id="rfc.section.4.3.1.p.1">Symmetric RTP is a NAT traversal solution that is based on requiring RTSP clients to send UDP packets to the server's media output ports. Conventionally, RTSP servers send RTP packets in one direction: from server to client. Symmetric RTP is similar to connection-oriented traffic, where one side (e.g., the RTSP client) first "connects" by sending a RTP packet to the other side's RTP port, the recipient then replies to the originating IP and port.</p>
<p id="rfc.section.4.3.1.p.2">Specifically, when the RTSP server receives the "connect" RTP packet (a.k.a. FW packet, since it is used to punch a hole in the FW/NAT and to aid the server for port binding and address mapping) from its client, it copies the source IP and Port number and uses them as delivery address for media packets. By having the server send media traffic back the same way as the client's packet are sent to the server, address mappings will be honored. Therefore this technique works for all types of NATs. However, it does require server modifications. Unless there is built-in protection mechanism, symmetric RTP is very vulnerable to DDOS attacks, because attackers can simply forge the source IP &amp; Port of the binding packet.  Using the rule for restriciting IP address to that one of the signalling connection will need to be applied here also.</p>
<h1 id="rfc.section.4.3.2">
<a href="#rfc.section.4.3.2">4.3.2.</a> Necessary RTSP extensions</h1>
<p id="rfc.section.4.3.2.p.1">To support symmetric RTP the RTSP signaling must be extended to allow the RTSP client to indicate that it will use symmetric RTP.  The client also needs to be able to signal its RTP SSRC to the server in its SETUP request. The RTP SSRC is used to establish some basic level of security against hijacking attacks. Care must be taken in choosing client's RTP SSRC. First, it must be unique within all the RTP sessions belonging to the same RTSP session. Secondly, if the RTSP server is sending out media packets to multiple clients from the same send port, the RTP SSRC needs to be unique amongst those clients' RTP sessions. Recognizing that there is a potential that RTP SSRC collision may occur, the RTSP server must be able to signal to client that a collision has occurred and that it wants the client to use a different RTP SSRC carried in the SETUP response or use unique ports per RTSP session. Using unique ports limits an RTSP server in the number of session it can simultaneously handle per interface IP addresses.</p>
<h1 id="rfc.section.4.3.3">
<a href="#rfc.section.4.3.3">4.3.3.</a> Deployment Considerations</h1>
<p id="rfc.section.4.3.3.p.1">Advantages:</p>
<p></p>

<ul>
<li>Works for all types of NATs, including those using multiple IP addresses. (Requirement 1 in <a href="#req-section">Section 3</a>).</li>
<li>Have no interaction problems with any RTSP ALG changing the client's information in the transport header.</li>
</ul>

<p>Disadvantages:</p>
<p></p>

<ul>
<li>Requires modifications to both RTSP server and client.</li>
<li>Limited to work with servers that have an public IP address.</li>
<li>The format of the RTP packet for "connection setup" (a.k.a FW packet) is yet to be defined. One possibility is to use RTP No-Op packet format in <a href="#I-D.ietf-avt-rtp-no-op">[I-D.ietf-avt-rtp-no-op]</a>.</li>
<li>Has the same security situation as STUN and will need to use address restrictions.</li>
</ul>
<h1 id="rfc.section.4.3.4">
<a href="#rfc.section.4.3.4">4.3.4.</a> Security Consideration</h1>
<p id="rfc.section.4.3.4.p.1">Symmetric RTP's major security issue is that RTP streams can be hijacked and directed towards any target that the attacker desires unless address restricitons are used. </p>
<p id="rfc.section.4.3.4.p.2">The most serious security problem is the deliberate attack with the use of a RTSP client and symmetric RTP. The attacker uses RTSP to setup a media session. Then it uses symmetric RTP with a spoofed source address of the intended target of the attack. There is no defense against this attack other than restricting the possible bind address to be the same as the RTSP connection arrived on. This prevents symmetric RTP to be used in use cases that require differet addresses for media destination and signalling.</p>
<p id="rfc.section.4.3.4.p.3">A hijack attack can also be performed in various ways. The basic attack is based on the ability to read the RTSP signaling packets in order to learn the address and port the server will send from and also the SSRC the client will use. Having this information the attacker can send its own NAT-traversal RTP packets containing the correct RTP SSRC to the correct address and port on the server. The destination of the packets is set as the source IP and port in these RTP packets.</p>
<p id="rfc.section.4.3.4.p.4">Another variation of this attack is for a man in the middle to modify the RTP binding packet being sent by a client to the server by simply changing the source IP to the target one desires to attack.</p>
<p id="rfc.section.4.3.4.p.5">One can fend off the first attack by applying encryption to the RTSP signaling transport. However, the second variation is impossible to defend against. As a NAT re-writes the source IP and port this cannot be authenticated, but authentication is required in order to protect against this type of DOS attack.</p>
<p id="rfc.section.4.3.4.p.6">Yet another issues is that these attacks also can be used to deny the client the service he desire from the RTSP server completely.  For a man in the middle capable of reading the signalling traffic or intercepting the binding packets can completely deny the client service by modifying or originating binding packets of itself.</p>
<p id="rfc.section.4.3.4.p.7">The random nonce used in the binding packet determines how well symmetric RTP can fend off stream-hijacking performed by parties that are not "man-in-the-middle". This proposal uses the 32-bit RTP SSRC field to this effect. Therefore it is important that this field is derived with a non-predictable randomizer. It should not be possible by knowing the algorithm used and a couple of basic facts, to derive what random number a certain client will use.</p>
<p id="rfc.section.4.3.4.p.8">An attacker not knowing the SSRC but aware of which port numbers that a server sends from can deploy a brute force attack on the server by testing a lot of different SSRCs until it finds a matching one. Therefore a server SHOULD implement functionality that blocks ports that receive multiple FW packets (i.e. the packet that is sent to the server for FW traversal) with different invalid SSRCs, especially when they are coming from the same IP/Port.</p>
<p id="rfc.section.4.3.4.p.9">To improve the security against attackers the random tag's length could be increased. To achieve a longer random tag while still using RTP and RTCP, it will be necessary to develop RTP and RTCP payload formats for carrying the random tag.</p>
<h1 id="rfc.section.4.3.5">
<a href="#rfc.section.4.3.5">4.3.5.</a> <a href="#sym-rtp-var" id="sym-rtp-var">A Variation to Symmetric RTP</a>
</h1>
<p id="rfc.section.4.3.5.p.1">Symmetric RTP requires a valid RTP format in the FW packet, which is the first packet that the client sends to the server to set up virtual RTP connection. There is currently no appropriate RTP packet format for this purpose, although the No-Op format is a proposal to fix the problem <a href="#I-D.ietf-avt-rtp-no-op">[I-D.ietf-avt-rtp-no-op]</a>. There exist a document that discusses the implication of different type of packets as keep-alives for RTP <a href="#I-D.ietf-avt-app-rtp-keepalive">[I-D.ietf-avt-app-rtp-keepalive]</a> and its findings are very relevant to the FW packet.</p>
<p id="rfc.section.4.3.5.p.2">Meanwhile, there has been FW traversal techniques deployed in the wireless streaming market place that use non-RTP messages as FW packets. This section attempts to summarize a subset of those solutions that happens to use a variation to the standard symmetric RTP solution.</p>
<p id="rfc.section.4.3.5.p.3">In this variation of symmetric RTP, the FW packet is a small UDP packet that does not contain RTP header. Hence the solution can no longer be called symmetric RTP, yet it employs the same technique for FW traversal. In response to client's FW packet, RTSP server sends back a similar FW packet as a confirmation so that the client can stop the so called "connection phase" of this NAT traversal technique. Afterwards, the client only has to periodically send FW packets as keep-alive messages for the NAT mappings.</p>
<p id="rfc.section.4.3.5.p.4">The server listens on its RTP-media output port, and tries to decode any received UDP packet as FW packet. This is valid since an RTSP server is not expecting RTP traffic from the RTSP client. Then, it can correlate the FW packet with the RTSP client's session ID or the client's SSRC, and record the NAT bindings accordingly. The server then sends a FW packet as the response to the client.</p>
<p id="rfc.section.4.3.5.p.5">The FW packet can contain the SSRC to identify the RTP stream, and can be made no bigger than 12 bytes, making it distinctively different from RTP packets, whose header size is 12 bytes.</p>
<p id="rfc.section.4.3.5.p.6">RTSP signaling can be added to do the following:</p>
<p></p>

<ol>
<li>Enables or disables such FW message exchanges. When the FW/NAT has an RTSP-aware ALG, it is possible to disable FW message exchange and let ALG works out the address and port mappings.</li>
<li>Configures the number of re-tries and the re-try interval of the FW message exchanges.</li>
</ol>

<p>Such FW packets may also contain digital signatures to support three-way handshake based receiver authentications, so as to prevent DDoS attacks described before.</p>
<p id="rfc.section.4.3.5.p.8">This approach has the following advantages when compared with the symmetric RTP approach:</p>
<p></p>

<ol>
<li>There is no need to define RTP payload format for FW traversal, therefore it is simple to use, implement and administer (Requirement 4 in <a href="#req-section">Section 3</a>), although a binding protocol must be defined.</li>
<li>When properly defined, this kind of FW message exchange can also authenticate RTP receivers, so as to prevent DDoS attacks for dual-hosted RTSP client. By dual-hosted RTSP client we mean the kind that uses one "perceived" IP address for RTSP message exchange, and a different "perceived" IP address for RTP reception. (Requirement 5 in <a href="#req-section">Section 3</a>).</li>
</ol>

<p>This approach has the following disadvantages when compared with the symmetric RTP approach:</p>
<p></p>

<ol>
<li>RTP traffic is normally accompanied by RTCP traffic. This approach needs to rely on RTCP RRs and SRs to enable NAT traversal for RTCP endpoints, or use the same type of FW messages also for RTCP endpoints.</li>
<li>The server's sender SSRC for the RTP stream must be signaled in RTSP's SETUP response, in the Transport header of the RTSP SETUP response.</li>
</ol>

<p>A solution with a 3-way handshaking and its own FW packets can be compared with ICE and have the following differencies:</p>
<p></p>

<ul>
<li>Only works for servers with public IP addresses compared to any type of server</li>
<li>Is somewhat simpler to implement due to the avoidance of the ICE prioritization and checkboard mechanisms.</li>
</ul>

<p>However, a 3-way binding protocol is very similar to using STUN in both directions as binding protocol. Using STUN would remove the need for implementing a new protocol.</p>
<h1 id="rfc.section.4.4">
<a href="#rfc.section.4.4">4.4.</a> Application Level Gateways</h1>
<p></p>
<h1 id="rfc.section.4.4.1">
<a href="#rfc.section.4.4.1">4.4.1.</a> Introduction</h1>
<p id="rfc.section.4.4.1.p.1">An Application Level Gateway (ALG) reads the application level messages and performs necessary changes to allow the protocol to work through the middle box. However this behavior has some problems in regards to RTSP:</p>
<p></p>

<ol>
<li>It does not work when the RTSP protocol is used with end-to-end security. As the ALG can't inspect and change the application level messages the protocol will fail due to the middle box.</li>
<li>ALGs need to be updated if extensions to the protocol are added. Due to deployment issues with changing ALGs this may also break the end-to-end functionality of RTSP.</li>
</ol>

<p>Due to the above reasons it is NOT RECOMMENDED to use an RTSP ALG in NATs. This is especially important for NATs targeted to home users and small office environments, since it is very hard to upgrade NATs deployed in home or SOHO (small office/home office) environment.</p>
<h1 id="rfc.section.4.4.2">
<a href="#rfc.section.4.4.2">4.4.2.</a> Outline On how ALGs for RTSP work</h1>
<p id="rfc.section.4.4.2.p.1">In this section, we provide a step-by-step outline on how one should go about writing an ALG to enable RTSP to traverse a NAT.</p>
<p></p>

<ol>
<li>Detect any SETUP request.</li>
<li>Try to detect the usage of any of the NAT traversal methods that replace the address and port of the Transport header parameters "destination" or "dest_addr". If any of these methods are used, the ALG SHOULD NOT change the address. Ways to detect that these methods are used are:<ul>
<li>For embedded STUN, it would be watch for a feature tag, like "nat.stun". If any of those exists in the "supported", "proxy-require", or "require" headers of the RTSP exchange.</li>
<li>For non-embedded STUN and TURN based solutions: This can in some case be detected by inspecting the "destination" or "dest_addr" parameter. If it contains either one of the NAT's external IP addresses or a public IP address. However if multiple NATs are used this detection may fail. Remapping should only be done for addresses belonging to the NATs own private address space.</li>
</ul>
<p>Otherwise continue to the next step.</p>
</li>
<li>Create UDP mappings (client given IP/port &lt;-&gt; external IP/port) where needed for all possible transport specification in the transport header of the request found in (1). Enter the public address and port(s) of these mappings in transport header. Mappings SHALL be created with consecutive public port number starting on an even number for RTP for each media stream.  Mappings SHOULD also be given a long timeout period, at least 5 minutes.</li>
<li>When the SETUP response is received from the server the ALG MAY remove the unused UDP mappings, i.e. the ones not present in the transport header. The session ID SHOULD also be bound to the UDP mappings part of that session.</li>
<li>If SETUP response settles on RTP over TCP or RTP over RTSP as lower transport, do nothing: let TCP tunneling to take care of NAT traversal. Otherwise go to next step.</li>
<li>The ALG SHOULD keep alive the UDP mappings belonging to the an RTSP session as long as: RTSP messages with the session's ID has been sent in the last timeout interval, or UDP messages are sent on any of the UDP mappings during the last timeout interval.</li>
<li>The ALG MAY remove a mapping as soon a TEARDOWN response has been received for that media stream.</li>
</ol>
<h1 id="rfc.section.4.4.3">
<a href="#rfc.section.4.4.3">4.4.3.</a> Deployment Considerations</h1>
<p id="rfc.section.4.4.3.p.1">Advantage:</p>
<p></p>

<ul>
<li>No impact on either client or server</li>
<li>Can work for any type of NATs</li>
</ul>

<p>Disadvantage:</p>
<p></p>

<ul>
<li>When deployed they are hard to update to reflect protocol modifications and extensions. If not updated they will break the functionality.</li>
<li>When end-to-end security is used the ALG functionality will fail.</li>
<li>Can interfere with other type of traversal mechanisms, such as STUN.</li>
</ul>

<p>Transition:</p>
<p id="rfc.section.4.4.3.p.4">An RTSP ALG will not be phased out in any automatically way. It must be removed, probably through the removal of the NAT it is associated with.</p>
<h1 id="rfc.section.4.4.4">
<a href="#rfc.section.4.4.4">4.4.4.</a> Security Considerations</h1>
<p id="rfc.section.4.4.4.p.1">An ALG will not work when deployment of end-to-end RTSP signaling security. Therefore deployment of ALG will likely result in that clients located behind NATs will not use end-to-end security.</p>
<h1 id="rfc.section.4.5">
<a href="#rfc.section.4.5">4.5.</a> TCP Tunneling</h1>
<p></p>
<h1 id="rfc.section.4.5.1">
<a href="#rfc.section.4.5.1">4.5.1.</a> Introduction</h1>
<p id="rfc.section.4.5.1.p.1">Using a TCP connection that is established from the client to the server ensures that the server can send data to the client. The connection opened from the private domain ensures that the server can send data back to the client. To send data originally intended to be transported over UDP requires the TCP connection to support some type of framing of the media data packets. Using TCP also results in that the client has to accept that real-time performance may no longer be possible. TCP's problem of ensuring timely deliver was the reasons why RTP was developed. Problems that arise with TCP are: head-of-line blocking, delay introduced by retransmissions, highly varying rate due to the congestion control algorithm.</p>
<h1 id="rfc.section.4.5.2">
<a href="#rfc.section.4.5.2">4.5.2.</a> Usage of TCP tunneling in RTSP</h1>
<p id="rfc.section.4.5.2.p.1">The RTSP core specification <a href="#I-D.ietf-mmusic-rfc2326bis">[I-D.ietf-mmusic-rfc2326bis]</a> supports interleaving of media data on the TCP connection that carries RTSP signaling. See section 14 in <a href="#I-D.ietf-mmusic-rfc2326bis">[I-D.ietf-mmusic-rfc2326bis]</a> for how to perform this type of TCP tunneling. There also exist another way of transporting RTP over TCP defined in Appendix C.2. For signaling and rules on how to establish the TCP connection in lieu of UDP, see appendix C.2 in <a href="#I-D.ietf-mmusic-rfc2326bis">[I-D.ietf-mmusic-rfc2326bis]</a>. This is based on the framing of RTP over the TCP connection as described in <a href="#RFC4571">RFC 4571</a> <cite title="NONE">[RFC4571]</cite>.</p>
<h1 id="rfc.section.4.5.3">
<a href="#rfc.section.4.5.3">4.5.3.</a> Deployment Considerations</h1>
<p id="rfc.section.4.5.3.p.1">Advantage: </p>

<ul><li>Works through all types of NATs where server is in the open.</li></ul>
<p id="rfc.section.4.5.3.p.2">Disadvantage: </p>

<ul>
<li>Functionality needs to be implemented on both server and client.</li>
<li>Will not always meet multimedia stream's real-time requirements.</li>
</ul>

<p>Transition:</p>
<p id="rfc.section.4.5.3.p.3">The tunneling over RTSP's TCP connection is not planned to be phased-out. It is intended to be a fallback mechanism and for usage when total media reliability is desired, even at the price of loss of real-time properties.</p>
<h1 id="rfc.section.4.5.4">
<a href="#rfc.section.4.5.4">4.5.4.</a> Security Considerations</h1>
<p id="rfc.section.4.5.4.p.1">The TCP tunneling of RTP has no known security problem besides those already presented in the RTSP specification. It is not possible to get any amplification effect that is desired for denial of service attacks due to TCP's flow control. A possible security consideration, when session media data is interleaved with RTSP, would be the performance bottleneck when RTSP encryption is applied, since all session media data also needs to be encrypted.</p>
<h1 id="rfc.section.4.6">
<a href="#rfc.section.4.6">4.6.</a> TURN (Traversal Using Relay NAT)</h1>
<p></p>
<h1 id="rfc.section.4.6.1">
<a href="#rfc.section.4.6.1">4.6.1.</a> Introduction</h1>
<p><a href="#RFC5766">Traversal Using Relay NAT (TURN)</a> <cite title="NONE">[RFC5766]</cite> is a protocol for setting up traffic relays that allows clients behind NATs and firewalls to receive incoming traffic for both UDP and TCP.  These relays are controlled and have limited resources. They need to be allocated before usage. TURN allows a client to temporarily bind an address/port pair on the relay (TURN server) to its local source address/port pair, which is used to contact the TURN server. The TURN server will then forward packets between the two sides of the relay. To prevent DOS attacks on either recipient, the packets forwarded are restricted to the specific source address. On the client side it is restricted to the source setting up the mapping.  On the external side this is limited to the source address/port pair of the first packet arriving on the binding. After the first packet has arrived the mapping is "locked down" to that address. Packets from any other source on this address will be discarded. Using a TURN server makes it possible for a RTSP client to receive media streams from even an unmodified RTSP server. However the problem is those RTSP servers most likely restrict media destinations to no other IP address than the one RTSP message arrives. This means that TURN could only be used if the server knows and accepts that the IP belongs to a TURN server and the TURN server can't be targeted at an unknown address or also the RTSP connection is relayed through the same TURN server. </p>
<h1 id="rfc.section.4.6.2">
<a href="#rfc.section.4.6.2">4.6.2.</a> <a href="#use-turn-rtsp" id="use-turn-rtsp">Usage of TURN with RTSP</a>
</h1>
<p id="rfc.section.4.6.2.p.1">To use a TURN server for NAT traversal, the following steps should be performed. </p>

<ol>
<li>The RTSP client connects with RTSP server. The client retrieves the session description to determine the number of media streams. To avoid the issue with having RTSP connection and media traffic from different addresses also the TCP connection must be done through the same TURN server as the one in the next step. This will require the usage of <a href="#RFC6062">TURN for TCP</a> <cite title="NONE">[RFC6062]</cite>.</li>
<li>The client establishes the necessary bindings on the TURN server. It must choose the local RTP and RTCP ports that it desires to receive media packets. TURN supports requesting bindings of even port numbers and continuous ranges.</li>
<li>The RTSP client uses the acquired address and port mappings in the RTSP SETUP request using the destination header. Note that the server is required to have a mechanism to verify that it is allowed to send media traffic to the given address. The server SHOULD include its RTP SSRC in the SETUP response.</li>
<li>Client requests that the Server starts playing. The server starts sending media packet to the given destination address and ports.</li>
<li>The first media packet to arrive at the TURN server on the external port causes "lock down"; then TURN server forwards the media packets to the RTSP client.</li>
<li>When media arrives at the client, the client should try to verify that the media packets are from the correct RTSP server, by matching the RTP SSRC of the packet. Source IP address of this packet will be that of the TURN server and can therefore not be used to verify that the correct source has caused lock down.</li>
<li>If the client notices that some other source has caused lock down on the TURN server, the client should create new bindings and change the session transport parameters to reflect the new bindings.</li>
<li>If the client pauses and media are not sent for about 75% of the mapping timeout the client should use TURN to refresh the bindings.</li>
</ol>
<h1 id="rfc.section.4.6.3">
<a href="#rfc.section.4.6.3">4.6.3.</a> Deployment Considerations</h1>
<p id="rfc.section.4.6.3.p.1">Advantages: </p>

<ul>
<li>Does not require any server modifications.</li>
<li>Works for any types of NAT as long as the server has public reachable IP address.</li>
</ul>
<p id="rfc.section.4.6.3.p.2">Disadvantage:</p>

<ul>
<li>Requires another network element, namely the TURN server.</li>
<li>A TURN server for RTSP is may not scale since the number of sessions it must forward is proportional to the number of client media sessions.</li>
<li>TURN server becomes a single point of failure.</li>
<li>Since TURN forwards media packets, it necessarily introduces delay.</li>
<li>An RTSP ALG MAY change the necessary destinations parameter.  This will cause the media traffic to be sent to the wrong address.</li>
</ul>

<p> Transition:</p>
<p id="rfc.section.4.6.3.p.3">TURN is not intended to be phase-out completely, see chapter 11.2 of <a href="#RFC5766">[RFC5766]</a>. However the usage of TURN could be reduced when the demand for having NAT traversal is reduced.</p>
<h1 id="rfc.section.4.6.4">
<a href="#rfc.section.4.6.4">4.6.4.</a> Security Considerations</h1>
<p id="rfc.section.4.6.4.p.1">An eavesdropper of RTSP messages between the RTSP client and RTSP server will be able to do a simple denial of service attack on the media streams by sending messages to the destination address and port present in the RTSP SETUP messages. If the attacker's message can reach the TURN server before the RTSP server's message, the lock down can be accomplished towards some other address. This will result in that the TURN server will drop all the media server's packets when they arrive. This can be accomplished with little risk for the attacker of being caught, as it can be performed with a spoofed source IP. The client may detect this attack when it receives the lock down packet sent by the attacker as being mal-formatted and not corresponding to the expected context. It will also notice the lack of incoming packets. See bullet 7 in Section <a href="#use-turn-rtsp">4.6.2</a>.</p>
<p id="rfc.section.4.6.4.p.2">The TURN server can also become part of a denial of service attack towards any victim. To perform this attack the attacker must be able to eavesdrop on the packets from the TURN server towards a target for the DOS attack. The attacker uses the TURN server to setup a RTSP session with media flows going through the TURN server.  The attacker is in fact creating TURN mappings towards a target by spoofing the source address of TURN requests. As the attacker will need the address of these mappings he must be able to eavesdrop or intercept the TURN responses going from the TURN server to the target. Having these addresses, he can set up a RTSP session and starts delivery of the media. The attacker must be able to create these mappings. The attacker in this case may be traced by the TURN username in the mapping requests.</p>
<p id="rfc.section.4.6.4.p.3">The first attack can be made very hard by applying transport security for the RTSP messages, which will hide the TURN servers address and port numbers from any eavesdropper.</p>
<p id="rfc.section.4.6.4.p.4">The second attack requires that the attacker have access to a user account on the TURN server to be able set up the TURN mappings.  To prevent this attack the server shall verify that the target destination accept this media stream.</p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> Firewalls</h1>
<p id="rfc.section.5.p.1">Firewalls exist for the purpose of protecting a network from traffic not desired by the firewall owner. Therefore it is a policy decision if a firewall will let RTSP and its media streams through or not. RTSP is designed to be firewall friendly in that it should be easy to design firewall policies to permit passage of RTSP traffic and its media streams.</p>
<p id="rfc.section.5.p.2">The firewall will need to allow the media streams associated with a RTSP session pass through it. Therefore the firewall will need an ALG that reads RTSP SETUP and TEARDOWN messages. By reading the SETUP message the firewall can determine what type of transport and from where the media streams will use. Commonly there will be the need to open UDP ports for RTP/RTCP. By looking at the source and destination addresses and ports the opening in the firewall can be minimized to the least necessary. The opening in the firewall can be closed after a TEARDOWN message for that session or the session itself times out.</p>
<p id="rfc.section.5.p.3">Simpler firewalls do allow a client to receive media as long as it has sent packets to the target. Depending on the security level this can have the same behavior as a NAT. The only difference is that no address translation is done. To be able to use such a firewall a client would need to implement one of the above described NAT traversal methods that include sending packets to the server to open up the mappings.</p>
<p></p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> Comparision of NAT traversal techniques</h1>
<p id="rfc.section.6.p.1">This section evaluates the techniques described above against the requirements listed in section <a href="#req-section">Section 3</a>.</p>
<p id="rfc.section.6.p.2">In the following table, the columns correspond to the numbered requirements. For instance, the column under R1 corresponds to the first requirement in section <a href="#req-section">Section 3</a>: MUST work for all flavors of NATs. The rows represent the different FW traversal techniques. SymRTP is short for symmetric RTP, "V.SymRTP" is short for "variation of symmetric RTP" as described in section <a href="#sym-rtp-var">Section 4.3.5</a>.</p>
<p id="rfc.section.6.p.3">A Summary of the requirements are:</p>
<p></p>

<dl>
<dt>R1</dt>
<dd style="margin-left: 8">Work for all flavors of NATs</dd>
<dt>R2</dt>
<dd style="margin-left: 8">Most work with Firewalls, including them with ALGs</dd>
<dt>R3</dt>
<dd style="margin-left: 8">Should have minimal impact on clients not behind NATs</dd>
<dt>R4</dt>
<dd style="margin-left: 8">Should be simple to use, Implement and administrate.</dd>
<dt>R5</dt>
<dd style="margin-left: 8">Should provide a mitigation against DDoS attacks</dd>
</dl>
<div id="#rfc.figure.1"></div>
<p></p>

<p></p>
<pre>-----------------------------------------------+
            |  R1  |  R2  |  R3  |  R4  |  R5  |
------------+------+------+------+------+------+
 STUN       | Yes  | Yes  |  No  | Maybe|  No  |    
------------+------+------+------+------+------+
 ICE        | Yes  | Yes  |  No  |  No  | Yes  |
------------+------+------+------+------+------+
 SymRTP     | Yes  | Yes  | Yes  |Maybe |  No  |
------------+------+------+------+------+------+
 V. SymRTP  | Yes  | Yes  | Yes  | Yes  |future|
------------+------+------+------+------+------+
 3-W SymRTP | Yes  | Yes  | Yes  | Maybe| Yes  |
------------+------+------+------+------+------+
 TURN       | Yes  | Yes  | No   | No   | Yes  |
------------------------------------------------
 </pre>
<p></p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#IANA" id="IANA">IANA Considerations</a>
</h1>
<p id="rfc.section.7.p.1">This document makes no request of IANA.</p>
<p id="rfc.section.7.p.2">Note to RFC Editor: this section may be removed on publication as an RFC.</p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#Security" id="Security">Security Considerations</a>
</h1>
<p id="rfc.section.8.p.1">In preceding sessions we have discussed security merits of each and every NAT/FW traversal methods for RTSP discussed here. In summary, the presence of NAT(s) is a security risk, as a client cannot perform source authentication of its IP address. This prevents the deployment of any future RTSP extensions providing security against hijacking of sessions by a man-in-the-middle.</p>
<p id="rfc.section.8.p.2">Each of the proposed solutions has security implications. Using STUN will provide the same level of security as RTSP with out transport level security and source authentications; as long as the server does not grant a client request to send media to different IP addresses. Using symmetric RTP will have a higher risk of session hijacking or denial of service than normal RTSP. The reason is that there exists a probability that an attacker is able to guess the random tag that the client uses to prove its identity when creating the address bindings. This can be solved in the variation of symmetric RTP (section 6.3.5) with authentication features. The usage of an RTSP ALG does not increase in itself the risk for session hijacking. However the deployment of ALGs as sole mechanism for RTSP NAT traversal will prevent deployment of encrypted end-to-end RTSP signaling. The usage of TCP tunneling has no known security problems. However it might provide a bottleneck when it comes to end-to-end RTSP signaling security if TCP tunneling is used on an interleaved RTSP signaling connection. The usage of TURN has severe risk of denial of service attacks against a client. The TURN server can also be used as a redirect point in a DDOS attack unless the server has strict enough rules for who may create bindings.</p>
<h1 id="rfc.section.9">
<a href="#rfc.section.9">9.</a> <a href="#Acknowledgements" id="Acknowledgements">Acknowledgements</a>
</h1>
<p id="rfc.section.9.p.1">The author would also like to thank all persons on the MMUSIC working group's mailing list that has commented on this document. Persons having contributed in such way in no special order to this protocol are: Jonathan Rosenberg, Philippe Gentric, Tom Marshall, David Yon, Amir Wolf, Anders Klemets, and Colin Perkins. Thomas Zeng would also like to give special thanks to Greg Sherwood of PacketVideo for his input into this memo.</p>
<p id="rfc.section.9.p.2">Section <a href="#sec-nat-intro">Section 1.1</a> contains text originally written for RFC 4787 by Francois Audet and Cullen Jennings.</p>
<h1 id="rfc.references">
<a href="#rfc.references">10.</a> References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC0768">[RFC0768]</b></td>
<td class="top">
<a title="University of Southern California (USC)/Information Sciences Institute">Postel, J.</a>, "<a href="http://tools.ietf.org/html/rfc768">User Datagram Protocol</a>", STD 6, RFC 768, August 1980.</td>
</tr>
<tr>
<td class="reference"><b id="RFC0793">[RFC0793]</b></td>
<td class="top">
<a title="University of Southern California (USC)/Information Sciences Institute">Postel, J.</a>, "<a href="http://tools.ietf.org/html/rfc793">Transmission Control Protocol</a>", STD 7, RFC 793, September 1981.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2326">[RFC2326]</b></td>
<td class="top">
<a href="mailto:schulzrinne@cs.columbia.edu" title="Columbia University, Dept. of Computer Science">Schulzrinne, H.</a>, <a href="mailto:anup@netscape.com" title="Netscape Communications Corp.">Rao, A.</a> and <a href="mailto:robla@real.com" title="RealNetworks">R. Lanphier</a>, "<a href="http://tools.ietf.org/html/rfc2326">Real Time Streaming Protocol (RTSP)</a>", RFC 2326, April 1998.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3550">[RFC3550]</b></td>
<td class="top">
<a>Schulzrinne, H.</a>, <a>Casner, S.</a>, <a>Frederick, R.</a> and <a>V. Jacobson</a>, "<a href="http://tools.ietf.org/html/rfc3550">RTP: A Transport Protocol for Real-Time Applications</a>", STD 64, RFC 3550, July 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3489">[RFC3489]</b></td>
<td class="top">
<a>Rosenberg, J.</a>, <a>Weinberger, J.</a>, <a>Huitema, C.</a> and <a>R. Mahy</a>, "<a href="http://tools.ietf.org/html/rfc3489">STUN - Simple Traversal of User Datagram Protocol (UDP) Through Network Address Translators (NATs)</a>", RFC 3489, March 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3022">[RFC3022]</b></td>
<td class="top">
<a>Srisuresh, P.</a> and <a>K. Egevang</a>, "<a href="http://tools.ietf.org/html/rfc3022">Traditional IP Network Address Translator (Traditional NAT)</a>", RFC 3022, January 2001.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3424">[RFC3424]</b></td>
<td class="top">
<a>Daigle, L.</a>, <a>IAB</a>, "<a href="http://tools.ietf.org/html/rfc3424">IAB Considerations for UNilateral Self-Address Fixing (UNSAF) Across Network Address Translation</a>", RFC 3424, November 2002.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2588">[RFC2588]</b></td>
<td class="top">
<a href="mailto:finlayson@live.com" title="Live Networks, Inc. (LIVE.COM)">Finlayson, R.</a>, "<a href="http://tools.ietf.org/html/rfc2588">IP Multicast and Firewalls</a>", RFC 2588, May 1999.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2663">[RFC2663]</b></td>
<td class="top">
<a href="mailto:srisuresh@lucent.com" title="Lucent Technologies">Srisuresh, P.</a> and <a href="mailto:holdrege@lucent.com" title="Lucent Technologiesv">M. Holdrege</a>, "<a href="http://tools.ietf.org/html/rfc2663">IP Network Address Translator (NAT) Terminology and Considerations</a>", RFC 2663, August 1999.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4787">[RFC4787]</b></td>
<td class="top">
<a>Audet, F.</a> and <a>C. Jennings</a>, "<a href="http://tools.ietf.org/html/rfc4787">Network Address Translation (NAT) Behavioral Requirements for Unicast UDP</a>", BCP 127, RFC 4787, January 2007.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4566">[RFC4566]</b></td>
<td class="top">
<a>Handley, M.</a>, <a>Jacobson, V.</a> and <a>C. Perkins</a>, "<a href="http://tools.ietf.org/html/rfc4566">SDP: Session Description Protocol</a>", RFC 4566, July 2006.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-mmusic-rfc2326bis">[I-D.ietf-mmusic-rfc2326bis]</b></td>
<td class="top">
<a>Schulzrinne, H</a>, <a>Rao, A</a>, <a>Lanphier, R</a>, <a>Westerlund, M</a> and <a>M Stiemerling</a>, "<a href="http://tools.ietf.org/html/draft-ietf-mmusic-rfc2326bis-28">Real Time Streaming Protocol 2.0 (RTSP)</a>", Internet-Draft draft-ietf-mmusic-rfc2326bis-28, October 2011.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5766">[RFC5766]</b></td>
<td class="top">
<a>Mahy, R.</a>, <a>Matthews, P.</a> and <a>J. Rosenberg</a>, "<a href="http://tools.ietf.org/html/rfc5766">Traversal Using Relays around NAT (TURN): Relay Extensions to Session Traversal Utilities for NAT (STUN)</a>", RFC 5766, April 2010.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4571">[RFC4571]</b></td>
<td class="top">
<a>Lazzaro, J.</a>, "<a href="http://tools.ietf.org/html/rfc4571">Framing Real-time Transport Protocol (RTP) and RTP Control Protocol (RTCP) Packets over Connection-Oriented Transport</a>", RFC 4571, July 2006.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-avt-rtp-no-op">[I-D.ietf-avt-rtp-no-op]</b></td>
<td class="top">
<a>Andreasen, F</a>, "<a href="http://tools.ietf.org/html/draft-ietf-avt-rtp-no-op-04">A No-Op Payload Format for RTP</a>", Internet-Draft draft-ietf-avt-rtp-no-op-04, May 2007.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5389">[RFC5389]</b></td>
<td class="top">
<a>Rosenberg, J.</a>, <a>Mahy, R.</a>, <a>Matthews, P.</a> and <a>D. Wing</a>, "<a href="http://tools.ietf.org/html/rfc5389">Session Traversal Utilities for NAT (STUN)</a>", RFC 5389, October 2008.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5245">[RFC5245]</b></td>
<td class="top">
<a>Rosenberg, J.</a>, "<a href="http://tools.ietf.org/html/rfc5245">Interactive Connectivity Establishment (ICE): A Protocol for Network Address Translator (NAT) Traversal for Offer/Answer Protocols</a>", RFC 5245, April 2010.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-avt-app-rtp-keepalive">[I-D.ietf-avt-app-rtp-keepalive]</b></td>
<td class="top">
<a>Marjou, X</a> and <a>A Sollaud</a>, "<a href="http://tools.ietf.org/html/draft-ietf-avt-app-rtp-keepalive-10">Application Mechanism for keeping alive the Network Address Translator (NAT) mappings associated to RTP/RTCP flows.</a>", Internet-Draft draft-ietf-avt-app-rtp-keepalive-10, March 2011.</td>
</tr>
<tr>
<td class="reference"><b id="RFC6062">[RFC6062]</b></td>
<td class="top">
<a>Perreault, S.</a> and <a>J. Rosenberg</a>, "<a href="http://tools.ietf.org/html/rfc6062">Traversal Using Relays around NAT (TURN) Extensions for TCP Allocations</a>", RFC 6062, November 2010.</td>
</tr>
<tr>
<td class="reference"><b id="STUN-IMPL">[STUN-IMPL]</b></td>
<td class="top">
<a>Open Source STUN Server and Client, http://www.vovida.org/applications/downloads/stun/index.html</a>", June 2007.</td>, "</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Magnus Westerlund</span> 
	  <span class="n hidden">
		<span class="family-name">Westerlund</span>
	  </span>
	</span>
	<span class="org vcardline">Ericsson</span>
	<span class="adr">
	  <span>Farogatan 6</span>

	  <span class="vcardline">
		<span class="locality">Stockholm</span>,  
		<span class="region"></span>
		<span class="code">SE-164 80</span>
	  </span>
	  <span class="country-name vcardline">Sweden</span>
	</span>
	<span class="vcardline">Phone: +46 8 719 0000</span>

<span class="vcardline">EMail: <a href="mailto:magnus.westerlund@ericsson.com">magnus.westerlund@ericsson.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Thomas Zeng</span> 
	  <span class="n hidden">
		<span class="family-name">Zeng</span>
	  </span>
	</span>
	<span class="org vcardline"></span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:thomas.zeng@gmail.com">thomas.zeng@gmail.com</a></span>

  </address>
</div>

</body>
</html>