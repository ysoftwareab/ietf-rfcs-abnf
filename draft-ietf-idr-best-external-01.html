<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Advertisement of the best external route in BGP</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Advertisement of the best external route in BGP">
<meta name="keywords" content="template">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">P. Marques</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">R. Fernando</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">E. Chen</td></tr>
<tr><td class="header">Expires: August 8, 2010</td><td class="header">P. Mohapatra</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Cisco Systems</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">February 04, 2010</td></tr>
</table></td></tr></table>
<h1><br />Advertisement of the best external route in BGP<br />draft-ietf-idr-best-external-01.txt</h1>

<h3>Abstract</h3>

<p>
   The base BGP specifications prevent a BGP speaker from
   advertising any route that is not the best route for a BGP
   destination. This document specifies a modification of
   this rule. Routes are divided into two categories, "external"
   and "internal". A specification is provided for choosing a
   "best external route" (for a particular value of the Network
   Layer Reachability Information). A BGP speaker is then allowed
   to advertise its "best external route" to its
   internal BGP peers, even if that is not the best route for
   the destination. The document explains why advertising
   the best external route can improve convergence time without
   causing routing loops. Additional benefits include reduction of
   inter-domain churn and avoidance of permanent route oscillation.
   The document also generalizes the notions of "internal" and 
   "external" so that they can be applied to Route Reflector Clusters 
   and Autonomous System Confederations.

</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on August 8, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the BSD License.</p>
<p>
This document may contain material from IETF Documents or IETF
Contributions published or made publicly available before November
10, 2008.  The person(s) controlling the copyright in some of this
material may not have granted the IETF Trust the right to allow
modifications of such material outside the IETF Standards Process.
Without obtaining an adequate license from the person(s) controlling
the copyright in such materials, this document may not be modified
outside the IETF Standards Process, and derivative works of it may
not be created outside the IETF Standards Process, except to format
it for publication as an RFC or to translate it into languages other
than English.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">1.1.</a>&nbsp;
Requirements Language<br />
<a href="#best_external_selection">2.</a>&nbsp;
Algorithm for selection of best external route<br />
<a href="#anchor3">3.</a>&nbsp;
Advertisement Rules<br />
<a href="#routing_consistency">4.</a>&nbsp;
Consistency between routing and forwarding<br />
<a href="#anchor4">5.</a>&nbsp;
Applications<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">5.1.</a>&nbsp;
Fast Connectivity Restoration<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">5.2.</a>&nbsp;
Inter-Domain Churn Reduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">5.3.</a>&nbsp;
Reducing Persistent IBGP oscillation<br />
<a href="#anchor8">6.</a>&nbsp;
Acknowledgments<br />
<a href="#IANA">7.</a>&nbsp;
IANA Considerations<br />
<a href="#Security">8.</a>&nbsp;
Security Considerations<br />
<a href="#rfc.references1">9.</a>&nbsp;
Normative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
   The base BGP specifications prevent a BGP speaker from
   advertising any route that is not the best route for a BGP
   destination. This document specifies a modification of
   this rule. Routes are divided into two categories, "external"
   and "internal". A specification is provided for choosing a
   "best external route" (for a particular value of the Network
   Layer Reachability Information). A BGP speaker is then allowed
   to advertise its "best external route" to its
   internal BGP peers, even if that is not the best route for
   the destination. The document explains why advertising
   the best external route can improve convergence time without
   causing routing loops. Additional benefits include reduction of
   inter-domain churn and avoidance of permanent route oscillation.

</p>
<p>
   The document also generalizes the notions of "internal" and 
   "external" so that they can be applied to Route Reflector Clusters
   <a class='info' href='#RFC4456'>[RFC4456]<span> (</span><span class='info'>Bates, T., Chen, E., and R. Chandra, &ldquo;BGP Route Reflection: An Alternative to Full Mesh Internal BGP (IBGP),&rdquo; April&nbsp;2006.</span><span>)</span></a> and Autonomous System Confederations
   <a class='info' href='#RFC5065'>[RFC5065]<span> (</span><span class='info'>Traina, P., McPherson, D., and J. Scudder, &ldquo;Autonomous System Confederations for BGP,&rdquo; August&nbsp;2007.</span><span>)</span></a>. More specifically, two
   routers in the same route reflector cluster having an IBGP session 
   between them are defined to be "internal" peers, whereas two 
   routers in different clusters having an IBGP session are defined to
   be "external" peers. Similarly, two routers in the same member
   AS of a confederation having an IBGP session between them are
   "internal" peers, whereas two routers in different member
   ASs of a confederation having a confed EBGP session between them
   are defined to be "external" peers. The definition of "best
   external route" ensues from this definition in that it is the
   most preferred route among those received from the "external"
   neighbors.

</p>
<p>
Advertising the best external route, when different from the best route,
presents additional information into an IBGP mesh which may be of value
for several purposes including:

</p>
<ul class="text">
<li>
      Faster restoration of connectivity, by providing additional
      paths, that may be used to fail over in case the primary path
      becomes invalid or is withdrawn.

</li>
<li>
      Reducing inter-domain churn and traffic blackholing due to the
      readily available alternate path.

</li>
<li>
      Reducing the potential for situations of permanent IBGP route
      oscillation, as discussed in some scenarios <a class='info' href='#RFC3345'>[RFC3345]<span> (</span><span class='info'>McPherson, D., Gill, V., Walton, D., and A. Retana, &ldquo;Border Gateway Protocol (BGP) Persistent Route Oscillation Condition,&rdquo; August&nbsp;2002.</span><span>)</span></a>.

</li>
<li>
      Improving selection of lower MED routes from the same
      neighboring AS.

</li>
</ul><p>

</p>
<p>
This document defines procedures to select the best external route for
each destination. It also describes how above benefits are realized
with best external route announcement with the help of certain scenarios.

</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Requirements Language</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL",
        "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", 
        and "OPTIONAL" in this
        document are to be interpreted as described in <a class='info' href='#RFC2119'>RFC 2119<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> [RFC2119].
</p>
<a name="best_external_selection"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Algorithm for selection of best external route</h3>

<p>
   Given that the intent in advertising an external route, when the
   best route for the same destination is an internal route, is to
   provide additional information into the IBGP mesh into which a route
   is participating, it is desirable to take into account the routes
   received from internal neighbors in the selection process.

</p>
<p>
   We propose a route selection algorithm that selects a total order
   between routes and which selects the same best route as the
   one currently specified <a class='info' href='#RFC4271'>[RFC4271]<span> (</span><span class='info'>Rekhter, Y., Li, T., and S. Hares, &ldquo;A Border Gateway Protocol 4 (BGP-4),&rdquo; January&nbsp;2006.</span><span>)</span></a>.

</p>
<p>
   In order to achieve this, we need to introduce the concept of route
   group. For a given NLRI, suppose the BGP decision process has run
   through all the steps prior to the MED comparison step (as defined
   in section 9.1.2.2 of <a class='info' href='#RFC4271'>[RFC4271]<span> (</span><span class='info'>Rekhter, Y., Li, T., and S. Hares, &ldquo;A Border Gateway Protocol 4 (BGP-4),&rdquo; January&nbsp;2006.</span><span>)</span></a>. Look at the
   set of routes that are still under consideration at that time. Now
   partition this set into a number of disjoint route groups, where
   two routes are in the same group if and only if the neighbor AS of
   each route is the same.

</p>
<p>
   Routes are ordered within a group via MED or subsequent route
   selection rules.

</p>
<p>
   The order of all routes for the same destination is determined by the
   order of the best route in each group.

</p>
<p>
   As an example, the following set of received routes:

      <br /><hr class="insert" />
<a name="pa_table"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

                  Path    AS    MED   rtr_id
                  a       1      10       10
                  b       2       5        1
                  c       1       5        5
                  d       2      20       20
                  e       2      30       30
                  f       3      10       20

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: Path Attribute Table&nbsp;</b></font><br /></td></tr></table><hr class="insert" />


</p>
<p>
   Would yield the following order (from the most to the least
   preferred):

</p>
<p>
      b < d < e < c < a < f

</p>
<p>
   In this example, comparison of the best route within each group
   provides the sequence (b < c < f). The remaining routes are ordered
   in relation to their respective group best.

</p>
<p>
   The first route in the above ordering is indeed the best route for
   a given destination. Eliminating the best route and executing the
   above steps leads us to a new total order of the routes.
   The route to be advertised to a particular domain
   is selected by choosing the most preferred route that is external
   to that particular domain in the above order. Note that whenever the
   overall best route is external it will automatically be selected by
   this algorithm.

</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Advertisement Rules</h3>

<p>
</p>
<ol class="text">
<li>
In an AS domain, if a router has installed an internal route as best, it
should advertise its "best external route" (as defined  in the draft) to
its internal neighbors.

</li>
<li>
In a Cluster domain, if a router (route reflector) has installed an 
external route as best, it should advertise its "best internal route" 
to its external neighbors. (Advertising to internal neighbors is 
unchanged.)

Similarly, if the route reflector has installed an internal route as
best, it should advertise its "best external route" to its internal 
(client) peers. In order for the reflector to be able to advertise
the best external route into the cluster, it is necessary that client-to-client 
reflection be disabled, since its advertisement may otherwise
contain the best route within the cluster domain.

</li>
<li>
In a Confederation Member domain, if a router (confederation border
router) has installed an internal route as best, it advertises its
best external route to its internal neighbors. However, if it has 
installed an external route as best, it
advertises its best internal route to its external neighbors.

</li>
</ol><p>

</p>
<a name="routing_consistency"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Consistency between routing and forwarding</h3>

<p>
   The BGP protocol, as defined in <a class='info' href='#RFC1771'>[RFC1771]<span> (</span><span class='info'>Rekhter, Y. and T. Li, &ldquo;A Border Gateway Protocol 4 (BGP-4),&rdquo; March&nbsp;1995.</span><span>)</span></a>,
   specifies that a BGP speaker shall advertise to its internal peers
   the route with the highest degree of preference among routes to the
   same destination received from external neighbors.

</p>
<p>
   This section discusses problems present with the approach described
   in <a class='info' href='#RFC1771'>[RFC1771]<span> (</span><span class='info'>Rekhter, Y. and T. Li, &ldquo;A Border Gateway Protocol 4 (BGP-4),&rdquo; March&nbsp;1995.</span><span>)</span></a> and the next section offers an
   alternative algorithm to select a best external route which can be
   advertised to an IBGP mesh.

</p>
<p>
   The internal update advertisement rules contained in the original
   BGP-4 specification <a class='info' href='#RFC1771'>[RFC1771]<span> (</span><span class='info'>Rekhter, Y. and T. Li, &ldquo;A Border Gateway Protocol 4 (BGP-4),&rdquo; March&nbsp;1995.</span><span>)</span></a> can lead to
   situations where traffic is forwarded through a route other than
   the route advertised by BGP.

</p>
<p>
   Inconsistencies between forwarding and routing are highly
   undesirable. Service providers use BGP with the dual objective of
   learning reachability information and expressing policy over
   network resources. The latter assumes that forwarding follows
   routing information.

</p>
<p>
   Consider the Autonomous system presented in figure 1, where r1 ... r4
   are members of a single IBGP mesh and routes a, b, and c are received
   from external peers.

</p><br /><hr class="insert" />
<a name="full_mesh_topology"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

                           AS 1 (c)
                             |
                           +----+           +----+
                           | r1 |...........| r2 |
                           +----+           +----+
                             .
                             .
                             .
                             .
                             .
                             .
                           +----+           +----+
                           | r3 |...........| r4 | --- ebgp --- AS X
                           +----+           +----+
                          /      \
                         /        \
                      AS 1 (a)  AS 2 (b)


</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: Inconsistency in Routing&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>

      <br /><hr class="insert" />
<a name="selection_table"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

                       Path    AS    MED   rtr_id
                       a       1      10        1
                       b       2       5       10
                       c       1       5        5
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3: Path Attribute Table - 2&nbsp;</b></font><br /></td></tr></table><hr class="insert" />


</p>
<p>

   Following the rules as specified in <a class='info' href='#RFC1771'>[RFC1771]<span> (</span><span class='info'>Rekhter, Y. and T. Li, &ldquo;A Border Gateway Protocol 4 (BGP-4),&rdquo; March&nbsp;1995.</span><span>)</span></a>,
   router r3 will select path (b) received from AS 2 as its overall
   best to install in the Loc-Rib, since path (b) is preferable to
   path (c), the lowest MED route from AS 1.  However for the purposes
   of Internal Update route selection, it will ignore the presence of
   path (c), and elect (a) as its advertisement, via the router-id
   tie-breaking rule.


</p>
<p>
   In this scenario, router r4 will receive (c) from r1 and (a) from
   r3.  It will pick the lowest MED route (c) and advertise it out via
   ebgp to AS X. However at this point routing is inconsistent with
   forwarding as traffic received from AS X will be forwarded towards
   AS 2, while the ebgp advertisement is being made for an AS 1 path.

</p>
<p>
   Routing policies are typically specified in terms of neighboring
   ASes. In the situation above, assuming that AS 1 is network for
   which this AS provides transit services while AS 2 and AS X are
   peer networks, one can easily see how the inconsistency between
   routing and forwarding would lead to transit being inadvertently
   provided between AS X and AS 2. This could lead to persistent
   forwarding loops.

</p>
<p>
   Inconsistency between routing and forwarding may happen, whenever a
   bgp speaker chooses to advertise an external route into IBGP that is
   different from the overall best route and its overall best is
   external.

</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Applications</h3>

<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Fast Connectivity Restoration</h3>

<p>
   When two exits are available to reach a particular destination and
   one is preferred over the other, the availability of an alternate
   path provides fast connectivity restoration when the primary path
   fails.

</p>
<p>
   Restoration can be quick since the alternate path is already at
   hand. The border router could precompute the backup route and
   preinstall it in FIB ready to be switched when the primary goes
   away. Note that this requires the border router that's the backup
   to also preinstall the secondary path and switch to it on failure.

</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Inter-Domain Churn Reduction</h3>

<p>
   Within an AS, the non availability of backup best leads to a border
   router sending a withdraw upstream when the primary fails. This
   leads to inter-domain churn and packet loss for the time the
   network takes to converge to the alternate path. Having the
   alternate path will reduces the churn and eliminates packet loss.

</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
Reducing Persistent IBGP oscillation</h3>

<p>
   Advertising the best external route, according to the algorithm
   described in this document will reduce the possibility of route
   oscillation by introducing additional information into the IBGP
   system.

</p>
<p>
   For a permanent oscillation condition to occur, it is necessary that
   a circular dependency between paths occurs such that the selection of
   a new best path by a router, in response to a received IBGP
   advertisement, causes the withdrawal of information that another
   router depends on in order to generate the original event.

</p>
<p>
   In vanilla BGP, when only the best overall route is advertised, as in
   most implementations, oscillation can occur whenever there are 2 or
   clusters/sub-ASes such that at least one cluster has more than one
   path that can potentially contribute to the dependency.

</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Acknowledgments</h3>

<p>
   This document greatly benefits from the comments of Yakov Rekhter,
   John Scudder, Eric Rosen, and Jenny Yuan.

</p>
<a name="IANA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
IANA Considerations</h3>

<p> 
This document has no actions for IANA.

</p>
<a name="Security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Security Considerations</h3>

<p> 
There are no additional security risks introduced by this design.

</p>
<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC1771">[RFC1771]</a></td>
<td class="author-text"><a href="mailto:yakov@watson.ibm.com">Rekhter, Y.</a> and <a href="mailto:tli@cisco.com">T. Li</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc1771">A Border Gateway Protocol 4 (BGP-4)</a>,&rdquo; RFC&nbsp;1771, March&nbsp;1995 (<a href="http://www.rfc-editor.org/rfc/rfc1771.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3345">[RFC3345]</a></td>
<td class="author-text">McPherson, D., Gill, V., Walton, D., and A. Retana, &ldquo;<a href="http://tools.ietf.org/html/rfc3345">Border Gateway Protocol (BGP) Persistent Route Oscillation Condition</a>,&rdquo; RFC&nbsp;3345, August&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3345.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4271">[RFC4271]</a></td>
<td class="author-text">Rekhter, Y., Li, T., and S. Hares, &ldquo;<a href="http://tools.ietf.org/html/rfc4271">A Border Gateway Protocol 4 (BGP-4)</a>,&rdquo; RFC&nbsp;4271, January&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4271.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4456">[RFC4456]</a></td>
<td class="author-text">Bates, T., Chen, E., and R. Chandra, &ldquo;<a href="http://tools.ietf.org/html/rfc4456">BGP Route Reflection: An Alternative to Full Mesh Internal BGP (IBGP)</a>,&rdquo; RFC&nbsp;4456, April&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4456.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5065">[RFC5065]</a></td>
<td class="author-text">Traina, P., McPherson, D., and J. Scudder, &ldquo;<a href="http://tools.ietf.org/html/rfc5065">Autonomous System Confederations for BGP</a>,&rdquo; RFC&nbsp;5065, August&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc5065.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Pedro Marques</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cisco Systems</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">170 W. Tasman Drive</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">San Jose, CA  95134</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text"></td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:roque@cisco.com">roque@cisco.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Rex Fernando</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cisco Systems</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">170 W. Tasman Drive</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">San Jose, CA  95134</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text"></td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:rex@cisco.com">rex@cisco.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Enke Chen</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cisco Systems</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">170 W. Tasman Drive</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">San Jose, CA  95134</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text"></td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:enkechen@cisco.com">enkechen@cisco.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Pradosh Mohapatra</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cisco Systems</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">170 W. Tasman Drive</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">San Jose, CA  95134</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text"></td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:pmohapat@cisco.com">pmohapat@cisco.com</a></td></tr>
</table>
</body></html>
