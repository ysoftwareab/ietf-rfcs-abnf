
Applications Area                                               Dan Wing
Internet Draft                                             Cisco Systems
November 19, 1997
Expires May 1998
draft-ietf-fax-dsn-extensions-00.txt


          Extensions to Delivery Status Notifications for Fax


Status of this memo

   This document is an Internet-Draft. Internet-Drafts are working
   documents of the Internet Engineering Task Force (IETF), its areas,
   and its working groups.  Note that other groups may also distribute
   working documents as Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   To learn the current status of any Internet-Draft, please check the
   "1id-abstracts.txt" listing contained in the Internet-Drafts Shadow
   Directories on ftp.is.co.za (Africa), ftp.nordu.net (Europe),
   munnari.oz.au (Pacific Rim), ds.internic.net (US East Coast), or
   ftp.isi.edu (US West Coast).


Copyright Notice

   Copyright (C) The Internet Society (1997).  All Rights Reserved.


1.  Abstract

   This document describes new per-recipient Delivery Status
   Notification fields [DSN] useful for billing fax PSTN calls, and
   describes how to use existing Enhanced Mail System Status Codes
   [ENH-CODES] for fax, and describes new Enhanced Mail System Status
   Codes specifically for fax.


2.  Introduction

   The fax specification [FAX-SPEC] describes the behavior of SMTP
   servers, fax onramps, and fax offramps.




Wing                        Expires May 1998                   [Page 1]

Internet Draft           DSN Extensions for Fax            November 1997


   [FAX-REQ] and [FAX-SCEN] should be consulted for detailed background
   information (XXX - text from [FAX-REQ, FAX-SCEN] should be included
   here).


2.1.  Extensions to Delivery Status Notifications

   SMTP does not provide a mechanism to indicate the 'cost' associated
   with a message.  Although a large message can cost more (network
   bandwidth, transmission time, disk storage, processing time to
   encode/ decode), there typically isn't a direct cost attributable to
   an email message.

   Fax messages are simply encoded as a MIME type [TIFF] and sent as
   normal email messages.  However, a fax offramp functions as a gateway
   between SMTP and the PSTN.  Costs are always associated with PSTN
   calls.  These costs range from (at the lowest cost) a business
   telephone line itself with free local calls to (at the highest cost)
   a business telephone line making international telephone calls.
   These costs must be billed.

   It is desirable for users to audit the charges that are made to their
   bills, and a Delivery Status Notification that is sent to them (and
   possibly used by the billing system itself) provides a convenient
   method of verifying the accuracy of a bill.


2.2.  Enhanced Mail System Status Codes

   While Enhanced Mail System Status Codes [ENH-CODES] is quite complete
   in its description of events specific to email, it does not provide
   error codes which map directly to all the error codes necessary for
   other services that are proposed to run over SMTP, such as VPIM
   [VPIM] or FPIM [FAX-SPEC].

   This document describes how existing codes from [ENH-CODES] can be
   used with a fax offramp, and documents new codes that are necessary
   to support fax offramps.


2.3.  Definitions

   This document uses several terms which aren't in common use.

   onramp:  A device which receives an incoming fax call, translates the
        fax image to [TIFF], and can send the message to an SMTP server.
        An onramp can be diskless and have limited memory capacity.




Wing                        Expires May 1998                   [Page 2]

Internet Draft           DSN Extensions for Fax            November 1997


   offramp:  A device which receives an SMTP message in [TIFF] format
        and calls a fax machine, translates the [TIFF] message to a fax
        image, and transmits the fax image to the remote fax machine.
        An offramp can be diskless and have limited memory capacity.

   PSTN:  Public Switched Telephone Network.

2.4.  Discussion of this Draft

   This draft is being discussed on the "ietf-fax" mailing list.  To
   subscribe, send a message to:
        ietf-fax-request@imc.org
   with the line:
        subscribe
   in the body of the message.  Archives are available from
   http://www.imc.org/ietf-fax.


3.  New Per-recipient DSN Extension Codes

   Two new per-recipient extension fields, as described in [DSN], are
   defined using the format described in [ABNF]:

        extension-field = call-length / call-type

        call-length  = "Call-Length" ":" call-seconds
        call-seconds = 1*DIGIT

        call-type    = "Call-Type" ":" billing-rate
        billing-rate = "LD" / "local" / "international" / billing-ext
        billing-ext  = "X-" vendorname "-" *ALPHA / *DIGIT
        vendorname   = *ALPHA

   XXX - needs significantly more work


4.  Enhanced Mail System Status Codes

   [ENH-CODES] allows new codes to be defined.  The following table maps
   fax-specific codes to [ENH-CODES] codes where possible, and defines
   new fax-specific codes if [ENH-CODES] doesn't already have a suitable
   mapping.

4.1.  Use of Existing Enhanced Mail System Status Codes by Fax

   Many of the codes described in [ENH-CODES] map perfectly to fax
   offramp failure and success codes.




Wing                        Expires May 1998                   [Page 3]

Internet Draft           DSN Extensions for Fax            November 1997


   XXX - do we want to overload these at all??

      no such telephone number = 5.1.1 (Bad destination mailbox address)
           The mailbox specified in the address does not exist.  For
           Internet mail names, this means the address portion to the
           left of the "@" sign is invalid.  This code is only useful
           for permanent failures.

      unable to parse telephone number = 5.1.3 (Bad destination mailbox
      address syntax)
           The destination address was syntactically invalid.  This can
           apply to any field in the address.  This code is only useful
           for permanent failures.

      busy = X.4.1 (No answer from host)
           The outbound connection attempt was not answered, either
           because the remote system was busy, or otherwise unable to
           take a call.  This is useful only as a persistent transient
           error.

      no answer = X.3.2 (System not accepting network messages)
           The host on which the mailbox is resident is not accepting
           messages.  Examples of such conditions include an immanent
           shutdown, excessive load, or system maintenance.  This is
           useful for both permanent and permanent transient errors.


4.2.  New Enhanced Mail System Status Codes for Fax

   [ENH-CODES] describes that status codes have the following format:

        status-code = class "." subject "." detail
        class = "2"/"4"/"5"
        subject = 1*3digit
        detail = 1*3digit

   Fax-specific codes will have a subject of 8.

   XXX -- it would probably be better to more carefully specify these to
   correspond with the "subject"s that already exist (and define new
   detail codes) instead of a new "subject".

     X.8.X  Fax Offramp Status

        The fax offramp status codes refer to events that are specific
        to a device dialing a remote phone number.

   The new fax-specific codes are:



Wing                        Expires May 1998                   [Page 4]

Internet Draft           DSN Extensions for Fax            November 1997


      no carrier = X.X.X
           XXX - description

      unable to train = X.X.X
           XXX - description

      no confirmation received from remote machine = X.X.X
           XXX - description


5.  Security Considerations

   Security considerations are not (yet) described in this memo.


6.  Acknowledgments

   XXX


7.  References

   [ABNF] D. Crocker, P. Overell, "Augmented BNF for Syntax
        Specifications:  ABNF", RFC 2234, November 1997.

   [DSN] K. Moore, "SMTP Service Extension for Delivery Status
        Notifications", RFC 1891, January 1996.

   [ENH-CODES] G. Vaudreuil, "Enhanced Mail System Status Codes", RFC
        1893, January 1996.

   [FAX-REQ] L. Masinter, "Requirements for Internet FAX", Internet
        Draft, Work in Progress, draft-ietf-fax-requirements-XX.txt.

   [FAX-SCEN] D. Wing, "Scenarios for Delivery of FAX messages over
        SMTP", Internet Draft, Work in Progress, draft-ietf-fax-
        scenarios-XX.txt.

   [FAX-SPEC] L. Masinter, D.Wing, "Fax Profile for Internet Mail",
        Internet Draft, Work in Progress, draft-ietf-fax-spec-XX.txt

   [ITU-FAX] D. Crocker, "PROCEDURES FOR THE TRANSFER OF FACSIMILE DATA
        VIA INTERNET MAIL", Internet Draft, Work in Progress, draft-
        ietf-fax-itudc-XX.txt.

   [TIFF] L. McIntyre, S. Zilles, R. Buckley, D. Venable, "File Format
        for Internet Fax", Internet Draft, Work in Progress, draft-
        ietf-fax-tiffplus-XX.txt.



Wing                        Expires May 1998                   [Page 5]

Internet Draft           DSN Extensions for Fax            November 1997


   [VPIM] G. Vaudreuil, G. Parsons, "Voice Profile for Internet Mail -
        version 2", Internet Draft, Work in Progress, draft-ema-vpim-
        XX.txt.


9.  Copyright

   Copyright (C) The Internet Society 1997.  All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implmentation may be prepared, copied, published and
   distributed, in whole or in part, without restriction of any kind,
   provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works.  However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the  purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assigns.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


10.  Author's Address

   Dan Wing
   Cisco Systems, Inc.
   101 Cooper Street
   Santa Cruz, CA 95060  USA

   Phone: +1 408 457 5200
   Fax:   +1 408 457 5208
   EMail: dwing@cisco.com







Wing                        Expires May 1998                   [Page 6]

