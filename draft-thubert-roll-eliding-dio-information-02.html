<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Eliding and Querying RPL Information</title>
<meta content="Pascal Thubert" name="author">
<meta content="Rahul Arvind Jadhav" name="author">
<meta content="Li Zhao" name="author">
<meta content="Dominique Barthel" name="author">
<meta content="
       This document presents a method to safely elide a group of RPL options in a DIO message by synchonizing the state associated with each of these options between parent and child using a new sequence counter in DIO or DAO messages.  A child that missed a DIO message with an update of any of those protected options detects it by the change of sequence counter and queries the update with a DIS Message. The draft also provides a method to fully elide the options in a DAO message.   
    " name="description">
<meta content="xml2rfc 2.34.0" name="generator">
<meta content="Draft" name="keyword">
<meta content="draft-thubert-roll-eliding-dio-information-02" name="ietf.draft">
<link href="/tmp/draft-thubert-eliding-dio-information-02-Bz_0W4.xml" type="application/rfc+xml" rel="alternate">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Avoid wrapping of URLs in references */
@media screen {
  .references a {
    white-space: nowrap;
  }
}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin: 0 0 0.25em 0;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
</style>
<link href="rfc-local.css" type="text/css" rel="stylesheet">
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">Eliding RPL Info</td>
<td class="right">October 2019</td>
</tr></thead>
<tfoot><tr>
<td class="left">Thubert, et al.</td>
<td class="center">Expires 27 April 2020</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">ROLL</dd>
<dt class="label-updates">Updates:</dt>
<dd class="updates">
<a href="https://www.rfc-editor.org/rfc/rfc6550" class="eref">6550</a> (if approved)</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2019-10-25" class="published">25 October 2019</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2020-04-27">27 April 2020</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">P. Thubert, <span class="editor">Ed.</span>
</div>
<div class="org">Cisco Systems</div>
</div>
<div class="author">
      <div class="author-name">R.A. Jadhav</div>
<div class="org">Huawei Tech</div>
</div>
<div class="author">
      <div class="author-name">L. Zhao</div>
<div class="org">Cisco Systems</div>
</div>
<div class="author">
      <div class="author-name">D. Barthel</div>
<div class="org">Orange Labs</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Eliding and Querying RPL Information</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document presents a method to safely elide a group of RPL options in a DIO message by synchonizing the state associated with each of these options between parent and child using a new sequence counter in DIO or DAO messages.  A child that missed a DIO message with an update of any of those protected options detects it by the change of sequence counter and queries the update with a DIS Message. The draft also provides a method to fully elide the options in a DAO message.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 27 April 2020.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2019 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-boilerplate.3">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-boilerplate.3-1.1">
            <p id="section-boilerplate.3-1.1.1"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a><a href="#section-boilerplate.3-1.1.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-boilerplate.3-1.2">
            <p id="section-boilerplate.3-1.2.1"><a href="#section-2" class="xref">2</a>.  <a href="#name-terminology" class="xref">Terminology</a><a href="#section-boilerplate.3-1.2.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-boilerplate.3-1.2.2.1">
                <p id="section-boilerplate.3-1.2.2.1.1"><a href="#section-2.1" class="xref">2.1</a>.  <a href="#name-bcp-14" class="xref">BCP 14</a><a href="#section-boilerplate.3-1.2.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-boilerplate.3-1.2.2.2">
                <p id="section-boilerplate.3-1.2.2.2.1"><a href="#section-2.2" class="xref">2.2</a>.  <a href="#name-references" class="xref">References</a><a href="#section-boilerplate.3-1.2.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-boilerplate.3-1.2.2.3">
                <p id="section-boilerplate.3-1.2.2.3.1"><a href="#section-2.3" class="xref">2.3</a>.  <a href="#name-glossary" class="xref">Glossary</a><a href="#section-boilerplate.3-1.2.2.3.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty" id="section-boilerplate.3-1.3">
            <p id="section-boilerplate.3-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-updating-rfc-6550" class="xref">Updating RFC 6550</a><a href="#section-boilerplate.3-1.3.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-boilerplate.3-1.4">
            <p id="section-boilerplate.3-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-message-formats" class="xref">Message Formats</a><a href="#section-boilerplate.3-1.4.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-boilerplate.3-1.4.2.1">
                <p id="section-boilerplate.3-1.4.2.1.1"><a href="#section-4.1" class="xref">4.1</a>.  <a href="#name-updated-dio-base-object" class="xref">Updated DIO Base Object</a><a href="#section-boilerplate.3-1.4.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-boilerplate.3-1.4.2.2">
                <p id="section-boilerplate.3-1.4.2.2.1"><a href="#section-4.2" class="xref">4.2</a>.  <a href="#name-updated-dis-base-object" class="xref">Updated DIS Base Object</a><a href="#section-boilerplate.3-1.4.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-boilerplate.3-1.4.2.3">
                <p id="section-boilerplate.3-1.4.2.3.1"><a href="#section-4.3" class="xref">4.3</a>.  <a href="#name-new-abbreviated-option-opti" class="xref">New Abbreviated Option Option</a><a href="#section-boilerplate.3-1.4.2.3.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-boilerplate.3-1.4.2.4">
                <p id="section-boilerplate.3-1.4.2.4.1"><a href="#section-4.4" class="xref">4.4</a>.  <a href="#name-updated-dao-base-object" class="xref">Updated DAO Base Object</a><a href="#section-boilerplate.3-1.4.2.4.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty" id="section-boilerplate.3-1.5">
            <p id="section-boilerplate.3-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-rcss-operation" class="xref">RCSS Operation</a><a href="#section-boilerplate.3-1.5.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-boilerplate.3-1.5.2.1">
                <p id="section-boilerplate.3-1.5.2.1.1"><a href="#section-5.1" class="xref">5.1</a>.  <a href="#name-updating-the-rcss" class="xref">Updating the RCSS</a><a href="#section-boilerplate.3-1.5.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-boilerplate.3-1.5.2.2">
                <p id="section-boilerplate.3-1.5.2.2.1"><a href="#section-5.2" class="xref">5.2</a>.  <a href="#name-rcss-freshness-and-parent-s" class="xref">RCSS Freshness and Parent selection</a><a href="#section-boilerplate.3-1.5.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-boilerplate.3-1.5.2.3">
                <p id="section-boilerplate.3-1.5.2.3.1"><a href="#section-5.3" class="xref">5.3</a>.  <a href="#name-rcss-of-an-option" class="xref">RCSS of an Option</a><a href="#section-boilerplate.3-1.5.2.3.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty" id="section-boilerplate.3-1.6">
            <p id="section-boilerplate.3-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-synchronizing-options" class="xref">Synchronizing Options</a><a href="#section-boilerplate.3-1.6.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-boilerplate.3-1.7">
            <p id="section-boilerplate.3-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-abbreviating-the-dao-messag" class="xref">Abbreviating the DAO Message</a><a href="#section-boilerplate.3-1.7.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-boilerplate.3-1.8">
            <p id="section-boilerplate.3-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-security-considerations" class="xref">Security Considerations</a><a href="#section-boilerplate.3-1.8.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-boilerplate.3-1.9">
            <p id="section-boilerplate.3-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-iana-considerations" class="xref">IANA Considerations</a><a href="#section-boilerplate.3-1.9.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-boilerplate.3-1.9.2.1">
                <p id="section-boilerplate.3-1.9.2.1.1"><a href="#section-9.1" class="xref">9.1</a>.  <a href="#name-new-dodag-information-solic" class="xref">New DODAG Information Solicitation Flags</a><a href="#section-boilerplate.3-1.9.2.1.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-boilerplate.3-1.9.2.2">
                <p id="section-boilerplate.3-1.9.2.2.1"><a href="#section-9.2" class="xref">9.2</a>.  <a href="#name-new-dodag-advertisement-obj" class="xref">New DODAG Advertisement Object Flag</a><a href="#section-boilerplate.3-1.9.2.2.1" class="pilcrow">¶</a></p>
</li>
              <li class="toc ulEmpty" id="section-boilerplate.3-1.9.2.3">
                <p id="section-boilerplate.3-1.9.2.3.1"><a href="#section-9.3" class="xref">9.3</a>.  <a href="#name-new-rpl-control-message-opt" class="xref">New RPL Control Message Option</a><a href="#section-boilerplate.3-1.9.2.3.1" class="pilcrow">¶</a></p>
</li>
            </ul>
</li>
          <li class="toc ulEmpty" id="section-boilerplate.3-1.10">
            <p id="section-boilerplate.3-1.10.1"><a href="#section-10" class="xref">10</a>. <a href="#name-acknowledgments" class="xref">Acknowledgments</a><a href="#section-boilerplate.3-1.10.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-boilerplate.3-1.11">
            <p id="section-boilerplate.3-1.11.1"><a href="#section-11" class="xref">11</a>. <a href="#name-normative-references" class="xref">Normative References</a><a href="#section-boilerplate.3-1.11.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-boilerplate.3-1.12">
            <p id="section-boilerplate.3-1.12.1"><a href="#section-12" class="xref">12</a>. <a href="#name-informative-references" class="xref">Informative References</a><a href="#section-boilerplate.3-1.12.1" class="pilcrow">¶</a></p>
</li>
          <li class="toc ulEmpty" id="section-boilerplate.3-1.13">
            <p id="section-boilerplate.3-1.13.1"><a href="#section-appendix.a" class="xref"></a><a href="#name-authors-addresses" class="xref">Authors' Addresses</a><a href="#section-boilerplate.3-1.13.1" class="pilcrow">¶</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">Classical Link State protocol synchronize their Link State Database (LSDB) by sequencing every change. Each interested node maintains the last sequence of the LSDB it is synchronizing with. If the last known sequence number is older than the current, the node needs to learn one by one all the state changes between the last known and the current state.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2"><span>[<a href="#RFC6550" class="xref">RPL</a>]</span> does not operate that way. With RPL, the routing information is repeated over and over in DODAG Information Object (DIO) and Destination Advertisement Object (DAO) messages. There is no concept of synchronization. The most recent information overrides a previous one and a stale state eventually times out.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">The RPL way was designed to enable routing from most nodes to most nodes most of the time in a Low-Power Lossy Network (LLN) where the quality of the links and the cost of communications does not permit to maintain a permanent synchronization.<a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4">This principle was applied to both the routing and non-routing information such as configuration settings, prefix information, and node capabilities.<a href="#section-1-4" class="pilcrow">¶</a></p>
<p id="section-1-5">This non-routing state is carried in RPL Messages as options. Some of the DIO options may be needed to decide whether a node can join a network as a leaf or as a router, and may affect the parent selection or the address selection.  It is thus critical that each node maintains its state to the freshest and selects parents that are also synchronized to the freshest.<a href="#section-1-5" class="pilcrow">¶</a></p>
<p id="section-1-6"><span>[<a href="#RFC6550" class="xref">RPL</a>]</span> allows a parent to elide options in the DIO messages that it sends repeatedly, to conserve battery and save bandwidth. When it does so, a newcomer child that missed DIOs that contained the configuration option may operate on default or partial information. If it is pessimistic, it may query all possible the information even when it is not needed.  Conversely, a node that slept may have missed a DIO with a change in some critical information and may not be even aware of it, so it may fail to query for the update and operate on deprecated parameters.<a href="#section-1-6" class="pilcrow">¶</a></p>
<p id="section-1-7">This document uses a new sequence counter called RCSS to synchronize the state in a child node with that of its parent, and recursively with that of the whole network, to the latest setting from the Root.<a href="#section-1-7" class="pilcrow">¶</a></p>
<p id="section-1-8">The protected options are:<a href="#section-1-8" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal" id="section-1-9">
        <li id="section-1-9.1">The Route Information Option (RIO) defined in section 6.7.5 of <span>[<a href="#RFC6550" class="xref">RPL</a>]</span><a href="#section-1-9.1" class="pilcrow">¶</a>
</li>
        <li id="section-1-9.2">The DODAG Configuration Option (DCO) defined in section 6.7.6 of <span>[<a href="#RFC6550" class="xref">RPL</a>]</span><a href="#section-1-9.2" class="pilcrow">¶</a>
</li>
        <li id="section-1-9.3">The Prefix Information Option (PIO) defined in section 6.7.10 of <span>[<a href="#RFC6550" class="xref">RPL</a>]</span><a href="#section-1-9.3" class="pilcrow">¶</a>
</li>
        <li id="section-1-9.4">The Extended MOP Option (MOPex) defined in <span>[<a href="#I-D.ietf-roll-mopex-cap" class="xref">MOPEX-CAP</a>]</span><a href="#section-1-9.4" class="pilcrow">¶</a>
</li>
        <li id="section-1-9.5">The Global Capabilities Option (GCO) defined in <span>[<a href="#I-D.ietf-roll-mopex-cap" class="xref">MOPEX-CAP</a>]</span><a href="#section-1-9.5" class="pilcrow">¶</a>
</li>
      </ol>
<p id="section-1-10">Any change in those options causes an increment of the RCSS and enables a network-wide synchronization to the new state. If the change impacts the routing substantially, the Root should decide to increment the Version Number at the same time to fully rebuild the DODAG with the new settings of the options. It must be noted that the operation of the Version Number in itself provides no guarantee that the non-routing state is fully resynchronized everywhere unless all the options are present in all the DIO messages.<a href="#section-1-10" class="pilcrow">¶</a></p>
</section>
<section id="section-2">
      <h2 id="name-terminology">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-terminology" class="section-name selfRef">Terminology</a>
      </h2>
<div id="bcp">
<section id="section-2.1">
        <h3 id="name-bcp-14">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-bcp-14" class="section-name selfRef">BCP 14</a>
        </h3>
<p id="section-2.1-1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in BCP 14 <span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span><span>[<a href="#RFC8174" class="xref">RFC8174</a>]</span> when, and only when, they appear in all capitals, as shown here.<a href="#section-2.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="lo">
<section id="section-2.2">
        <h3 id="name-references">
<a href="#section-2.2" class="section-number selfRef">2.2. </a><a href="#name-references" class="section-name selfRef">References</a>
        </h3>
<p id="section-2.2-1">The Terminology used in this document is consistent with and incorporates that described in <span><a href="#RFC7102" class="xref">Terms Used in Routing for Low-Power and Lossy Networks</a> [<a href="#RFC7102" class="xref">RFC7102</a>]</span>.<a href="#section-2.2-1" class="pilcrow">¶</a></p>
<p id="section-2.2-2">Other terms in use in LLNs are found in <span><a href="#RFC7228" class="xref">Terminology for Constrained-Node Networks</a> [<a href="#RFC7228" class="xref">RFC7228</a>]</span>.<a href="#section-2.2-2" class="pilcrow">¶</a></p>
<p id="section-2.2-3">A glossary of classical RPL acronyms is given in <a href="#gloss" class="xref">Section 2.3</a>.<a href="#section-2.2-3" class="pilcrow">¶</a></p>
<p id="section-2.2-4">The term "byte" is used in its now customary sense as a synonym for "octet".<a href="#section-2.2-4" class="pilcrow">¶</a></p>
<p id="section-2.2-5">"RPL", "RPL Packet Information" (RPI) and "RPL Instance", DIO, DAO and DIS messages are defined in the <span><a href="#RFC6550" class="xref">"RPL: IPv6 Routing Protocol for Low-Power and Lossy Networks"</a> [<a href="#RFC6550" class="xref">RPL</a>]</span> specification.<a href="#section-2.2-5" class="pilcrow">¶</a></p>
<p id="section-2.2-6">This document uses the terms RPL-Unaware Leaf (RUL) and RPL Aware Leaf (RAL) consistently with <span>[<a href="#I-D.ietf-roll-useofrplinfo" class="xref">USE_OF_RPL_INFO</a>]</span>.<a href="#section-2.2-6" class="pilcrow">¶</a></p>
<p id="section-2.2-7">The term RPL-Unaware Leaf (RUL) is used to refer to a node that uses a RPL router (without necessarily knowing it) as 6LR and depends on that router to obtain reachability for its addresses inside the RPL domain.  On the contrary, the term RPL-Aware Node (RAN) is used to refer to a RAL or a RPL router that participates to RPL and advertises its addresses of prefixes by itself.<a href="#section-2.2-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="gloss">
<section id="section-2.3">
        <h3 id="name-glossary">
<a href="#section-2.3" class="section-number selfRef">2.3. </a><a href="#name-glossary" class="section-name selfRef">Glossary</a>
        </h3>
<p id="section-2.3-1">This document often uses the following acronyms:<a href="#section-2.3-1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2.3-2">
          <dt id="section-2.3-2.1">DODAG</dt>
          <dd id="section-2.3-2.2">Destination-Oriented Directed Acyclic Graph<a href="#section-2.3-2.2" class="pilcrow">¶</a>
</dd>
<dt id="section-2.3-2.3">LLN</dt>
          <dd id="section-2.3-2.4">Low-Power and Lossy Network<a href="#section-2.3-2.4" class="pilcrow">¶</a>
</dd>
<dt id="section-2.3-2.5">RPI</dt>
          <dd id="section-2.3-2.6">RPL Packet Information (an Option in the Hop-By_Hop Header)<a href="#section-2.3-2.6" class="pilcrow">¶</a>
</dd>
<dt id="section-2.3-2.7">RAL</dt>
          <dd id="section-2.3-2.8">RPL-Aware Leaf<a href="#section-2.3-2.8" class="pilcrow">¶</a>
</dd>
<dt id="section-2.3-2.9">RAN</dt>
          <dd id="section-2.3-2.10">RPL-Aware Node, a RPL router or a RPL-Aware Leaf<a href="#section-2.3-2.10" class="pilcrow">¶</a>
</dd>
<dt id="section-2.3-2.11">RS</dt>
          <dd id="section-2.3-2.12">Router Solicitation<a href="#section-2.3-2.12" class="pilcrow">¶</a>
</dd>
<dt id="section-2.3-2.13">RCSS</dt>
          <dd id="section-2.3-2.14">RPL Configuration State Sequence<a href="#section-2.3-2.14" class="pilcrow">¶</a>
</dd>
<dt id="section-2.3-2.15">RPL</dt>
          <dd id="section-2.3-2.16">IPv6 Routing Protocol for LLNs (pronounced ripple)<a href="#section-2.3-2.16" class="pilcrow">¶</a>
</dd>
<dt id="section-2.3-2.17">RUL</dt>
          <dd id="section-2.3-2.18">RPL-Unaware Leaf<a href="#section-2.3-2.18" class="pilcrow">¶</a>
</dd>
</dl>
</section>
</div>
</section>
<section id="section-3">
      <h2 id="name-updating-rfc-6550">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-updating-rfc-6550" class="section-name selfRef">Updating RFC 6550</a>
      </h2>
<p id="section-3-1">This document adds a new field called RCSS to the DIO message. The RCSS is a sequence counter set by the Root and operated as specified in Section 7 of <span>[<a href="#RFC6550" class="xref">RPL</a>]</span>, more in <a href="#rcss" class="xref">Section 5</a>.<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">This document also introduces a new RPL Control Message Option called the Abbreviated Option Option (AOO). The AOO is the compressed replacement of a protected option that indicates the RCSS of the last change of that option, but elides its content, more in <a href="#syopts" class="xref">Section 4.3</a>.<a href="#section-3-2" class="pilcrow">¶</a></p>
<p id="section-3-3">This document modifies the DIS Base Object to enable the individual query of the protected options by a node that missed a change, more in <a href="#udis" class="xref">Section 4.2</a>.<a href="#section-3-3" class="pilcrow">¶</a></p>
<p id="section-3-4">This document also enables to abbreviate a full DAO message when all the options are unchanged from the previous DAO message that was positively acknowledged. In that case the DAO is resent with the same DAOSequence and all the options are elided. A new flag in the DAO Base Object indicates that this is an abbreviated DAO message, more in <a href="#elidingDAO" class="xref">Section 7</a>.<a href="#section-3-4" class="pilcrow">¶</a></p>
</section>
<div id="form">
<section id="section-4">
      <h2 id="name-message-formats">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-message-formats" class="section-name selfRef">Message Formats</a>
      </h2>
<div id="udio">
<section id="section-4.1">
        <h3 id="name-updated-dio-base-object">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-updated-dio-base-object" class="section-name selfRef">Updated DIO Base Object</a>
        </h3>
<p id="section-4.1-1">The format of the DIO Base Object is defined in section 6.3.1 of <span>[<a href="#RFC6550" class="xref">RPL</a>]</span>. This specification uses a 8th octet that was reserved in <span>[<a href="#RFC6550" class="xref">RPL</a>]</span> to transport the RCSS.<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<span id="name-updated-dio-base-object-2"></span><div id="FigDIO">
<figure id="figure-1">
          <div class="artwork art-text alignCenter" id="section-4.1-2.1">
<pre>
  0                   1                   2                   3
  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 | RPLInstanceID |Version Number |             Rank              |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |G|0| MOP | Prf |     DTSN      |     Flags     |      RCSS     |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |                                                               |
 +                                                               +
 |                                                               |
 +                            DODAGID                            +
 |                                                               |
 +                                                               +
 |                                                               |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |   Option(s)...
 +-+-+-+-+-+-+-+-+
       </pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-updated-dio-base-object-2" class="selfRef">Updated DIO Base Object</a>
          </figcaption></figure>
</div>
<p id="section-4.1-3">Updated fields:<a href="#section-4.1-3" class="pilcrow">¶</a></p>
<dl class="dlNewline" id="section-4.1-4">
          <dt id="section-4.1-4.1">RCSS</dt>
          <dd style="margin-left: 1.5em" id="section-4.1-4.2">One Byte, the RPL Configuration State Sequence<a href="#section-4.1-4.2" class="pilcrow">¶</a>
</dd>
</dl>
</section>
</div>
<div id="udis">
<section id="section-4.2">
        <h3 id="name-updated-dis-base-object">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-updated-dis-base-object" class="section-name selfRef">Updated DIS Base Object</a>
        </h3>
<p id="section-4.2-1">The DIS Base Object is use by a child to query from a parent the most recent changes in protected options. This specification adds flags to indicate which options are requested and the freshest RCSS to which the querying node was synchronized.<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<span id="name-updated-dis-base-object-2"></span><div id="FigDIS">
<figure id="figure-2">
          <div class="artwork art-text alignCenter" id="section-4.2-2.1">
<pre>
  0                   1                   2
  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |R|D|P[M|O| Flg | LastSync RCSS |   Option(s)...
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   </pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-updated-dis-base-object-2" class="selfRef">Updated DIS Base Object</a>
          </figcaption></figure>
</div>
<p id="section-4.2-3">Updated fields:<a href="#section-4.2-3" class="pilcrow">¶</a></p>
<dl class="dlNewline" id="section-4.2-4">
          <dt id="section-4.2-4.1">R</dt>
          <dd style="margin-left: 1.5em" id="section-4.2-4.2">One Bit, indicates that the RIO is requested<a href="#section-4.2-4.2" class="pilcrow">¶</a>
</dd>
<dt id="section-4.2-4.3">D</dt>
          <dd style="margin-left: 1.5em" id="section-4.2-4.4">One Bit, indicates that the DCO is requested<a href="#section-4.2-4.4" class="pilcrow">¶</a>
</dd>
<dt id="section-4.2-4.5">P</dt>
          <dd style="margin-left: 1.5em" id="section-4.2-4.6">One Bit, indicates that the PIO(s) is(are) requested<a href="#section-4.2-4.6" class="pilcrow">¶</a>
</dd>
<dt id="section-4.2-4.7">M</dt>
          <dd style="margin-left: 1.5em" id="section-4.2-4.8">One Bit, indicates that the MOPex is requested<a href="#section-4.2-4.8" class="pilcrow">¶</a>
</dd>
<dt id="section-4.2-4.9">O</dt>
          <dd style="margin-left: 1.5em" id="section-4.2-4.10">One Bit, indicates that the GCO is requested<a href="#section-4.2-4.10" class="pilcrow">¶</a>
</dd>
<dt id="section-4.2-4.11">Last Synchronized RCSS</dt>
          <dd style="margin-left: 1.5em" id="section-4.2-4.12">One Byte, indicates the freshest RCSS to which the querier was synchronized<a href="#section-4.2-4.12" class="pilcrow">¶</a>
</dd>
</dl>
</section>
</div>
<div id="syopts">
<section id="section-4.3">
        <h3 id="name-new-abbreviated-option-opti">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-new-abbreviated-option-opti" class="section-name selfRef">New Abbreviated Option Option</a>
        </h3>
<p id="section-4.3-1">The abbreviated version of an option is a replacement for any option. It does not advertise the content of the option but indicates the sender's value for the RCSS of that option. It is transported in a 4-bytes long Abbreviated Option Option (AOO) with a format as below:<a href="#section-4.3-1" class="pilcrow">¶</a></p>
<span id="name-abbreviated-option-option-f"></span><div id="FigABB">
<figure id="figure-3">
          <div class="artwork art-text alignCenter" id="section-4.3-2.1">
<pre>
  0                   1                   2                   3
  0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
 |  Option Type  | Option Length | Abbrev. opt.  | Last Mod RCSS |
 +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       </pre>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
<a href="#name-abbreviated-option-option-f" class="selfRef">Abbreviated Option Option Format</a>
          </figcaption></figure>
</div>
<p id="section-4.3-3">Option fields:<a href="#section-4.3-3" class="pilcrow">¶</a></p>
<dl class="dlNewline" id="section-4.3-4">
          <dt id="section-4.3-4.1">Option Type</dt>
          <dd style="margin-left: 1.5em" id="section-4.3-4.2">One byte indicating "Abbreviated Option", see <a href="#ianaopttypetbl" class="xref">Table 3</a> in <a href="#ianaopttype" class="xref">Section 9.3</a><a href="#section-4.3-4.2" class="pilcrow">¶</a>
</dd>
<dt id="section-4.3-4.3">Option Length</dt>
          <dd style="margin-left: 1.5em" id="section-4.3-4.4">MUST be set to 2 indicating Option data of 2 bytes<a href="#section-4.3-4.4" class="pilcrow">¶</a>
</dd>
<dt id="section-4.3-4.5">Abbreviated Option</dt>
          <dd style="margin-left: 1.5em" id="section-4.3-4.6">The Option Type of the option being abbreviated<a href="#section-4.3-4.6" class="pilcrow">¶</a>
</dd>
<dt id="section-4.3-4.7">Last Modification RCSS</dt>
          <dd style="margin-left: 1.5em" id="section-4.3-4.8">The RCSS at which the option was last modified<a href="#section-4.3-4.8" class="pilcrow">¶</a>
</dd>
</dl>
</section>
</div>
<div id="udao">
<section id="section-4.4">
        <h3 id="name-updated-dao-base-object">
<a href="#section-4.4" class="section-number selfRef">4.4. </a><a href="#name-updated-dao-base-object" class="section-name selfRef">Updated DAO Base Object</a>
        </h3>
<p id="section-4.4-1">The format of the DAO Base Object is defined in section 6.4.1 of <span>[<a href="#RFC6550" class="xref">RPL</a>]</span>. This specification adds a 'A' flag in to indicate the DAO options eliding.<a href="#section-4.4-1" class="pilcrow">¶</a></p>
<span id="name-updated-dao-base-object-2"></span><div id="FigDAO">
<figure id="figure-4">
          <div class="artwork art-text alignCenter" id="section-4.4-2.1">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| RPLInstanceID |K|D|A| Flags   |   Reserved    | DAOSequence   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
+                                                               +
|                                                               |
+                            DODAGID*                           +
|                                                               |
+                                                               +
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Option(s)...
+-+-+-+-+-+-+-+-+
       </pre>
</div>
<figcaption><a href="#figure-4" class="selfRef">Figure 4</a>:
<a href="#name-updated-dao-base-object-2" class="selfRef">Updated DAO Base Object</a>
          </figcaption></figure>
</div>
<p id="section-4.4-3">Updated fields:<a href="#section-4.4-3" class="pilcrow">¶</a></p>
<dl class="dlNewline" id="section-4.4-4">
          <dt id="section-4.4-4.1">A</dt>
          <dd style="margin-left: 1.5em" id="section-4.4-4.2">One Bit, indicates DAO in abbreviated version<a href="#section-4.4-4.2" class="pilcrow">¶</a>
</dd>
</dl>
</section>
</div>
</section>
</div>
<div id="rcss">
<section id="section-5">
      <h2 id="name-rcss-operation">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-rcss-operation" class="section-name selfRef">RCSS Operation</a>
      </h2>
<p id="section-5-1">Settings and updates to network-wide parameters are initiated by the Root and propagated down the DODAG in RPL Control Message Options in DIO messages. The DIO messages arrive asynchronously via different parents and may confuse a child. The RCSS allows the child to keep synchronized to the latest settings network-wide parameters that are propagated in protected options.<a href="#section-5-1" class="pilcrow">¶</a></p>
<p id="section-5-2">The RCSS is a sequence number that is operated as specified in section 7.2 of <span>[<a href="#RFC6550" class="xref">RPL</a>]</span>. The scope of an RCSS is one DODAG within one RPL Instance. The RCSS applies to a DIO Message and a same value of the RCSS can be used in DIO messages that are sent consecutively with no change in the protected options.<a href="#section-5-2" class="pilcrow">¶</a></p>
<p id="section-5-3">The Root of the DODAG is autoritative to set and update the RCSS and the options that it protects. The RCSS and the protected options are propagated together down the DODAG without a change, more in <a href="#updcss" class="xref">Section 5.1</a>.<a href="#section-5-3" class="pilcrow">¶</a></p>
<p id="section-5-4">The RCSS allows a child node to recognize the fresher DIO Message(s) as received from one or more advertising parents and to use only parents with a consistent state of network-wide parameters, more in <a href="#freshrcss" class="xref">Section 5.2</a>.<a href="#section-5-4" class="pilcrow">¶</a></p>
<p id="section-5-5">By extension, the RCSS is also defined for each protected option. A child associates an option with the values of the RCSS indicated in DIO Messages in which the option is advertised and uses it to assess the relative freshness of different versions of an option, more in <a href="#optrcss" class="xref">Section 5.3</a>.<a href="#section-5-5" class="pilcrow">¶</a></p>
<p id="section-5-6">Unchanged options may be sent in full, elided, or in the abbreviated form specified in <a href="#syopts" class="xref">Section 4.3</a>. Which form to use depends on the RCSS, more in <a href="#optrcss" class="xref">Section 5.3</a><a href="#section-5-6" class="pilcrow">¶</a></p>
<p id="section-5-7">If the link MTU does not permit to send a single DIO message with all the options packaged then the options may be spread over multiple consecutive DIO messages with the same RCSS that are sent in a rapid sequence.<a href="#section-5-7" class="pilcrow">¶</a></p>
<div id="updcss">
<section id="section-5.1">
        <h3 id="name-updating-the-rcss">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-updating-the-rcss" class="section-name selfRef">Updating the RCSS</a>
        </h3>
<p id="section-5.1-1">The RCSS is incremented by the Root using a lollipop technique as specified in section 7.2 of <span>[<a href="#RFC6550" class="xref">RPL</a>]</span>. RCSS values are comparable if they are within a window of comparison of SEQUENCE_WINDOW increments or one indicates a reboot.<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<p id="section-5.1-2">A reboot of the Root is detected when the RCSS moves from the circular to the straight part of the lollipop. In order to maximize the chances of detection, the straight part should be kept very short with a RECOMMENDED initialization at 252 or above.<a href="#section-5.1-2" class="pilcrow">¶</a></p>
<p id="section-5.1-3">During the straight part of the lollipop, a second reboot of the Root might not be recognized and a same value of the RCSS may reappear with different settings in the protected options. For that reason the protected options MUST be provided in full with each increment on the RCSS during the straight part of the lollipop.<a href="#section-5.1-3" class="pilcrow">¶</a></p>
<p id="section-5.1-4">When a field is modified in one of the protected options, the Root MUST send a DIO with an incremented RCSS and the modified protected option(s) in full.  The Root MAY also update the Version Number to form a new DODAG altogether.<a href="#section-5.1-4" class="pilcrow">¶</a></p>
<p id="section-5.1-5">The Root SHOULD jump rapidly away from the straight part once the network has sufficiently settled by resetting the RCSS to 0, which places the RCSS in the circular region of the lollipop, where the protected options MAY be elided or abbreviated.<a href="#section-5.1-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="freshrcss">
<section id="section-5.2">
        <h3 id="name-rcss-freshness-and-parent-s">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-rcss-freshness-and-parent-s" class="section-name selfRef">RCSS Freshness and Parent selection</a>
        </h3>
<p id="section-5.2-1">A child node maintains the freshest RCSS received from its parents in each of the RPL Instances that it participates to, and uses that RCSS for its own DIO messages once it has all the protected options synchronized to it.<a href="#section-5.2-1" class="pilcrow">¶</a></p>
<p id="section-5.2-2">A child and a candidate parent are out-of-sync when the RCSS values that they maintain for a RPL Instance are not comparable. A child MUST NOT use a parent that is out-of-sync unless no other parent is available, in which case it MAY align its RCSS and resynchronize to that parent.<a href="#section-5.2-2" class="pilcrow">¶</a></p>
<p id="section-5.2-3">When a child receives from a candidate parent a DIO with an RCSS that is fresher than the one it is using, the child MUST synchronize the state relative to the protected options with that parent. The child node MUST refrain from using that parent and the new state including the RCSS, until it has synchronized all of the protected options to that RCSS. When it is fully synchronized, the child may then use that parent and the new RCSS.<a href="#section-5.2-3" class="pilcrow">¶</a></p>
<p id="section-5.2-4">Using a back-level parent may cause packets to be dropped, misunderstood or misrouted. The child SHOULD refrain from using a parent that exposes an older RCSS if the change causes an incompatibility issue.<a href="#section-5.2-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="optrcss">
<section id="section-5.3">
        <h3 id="name-rcss-of-an-option">
<a href="#section-5.3" class="section-number selfRef">5.3. </a><a href="#name-rcss-of-an-option" class="section-name selfRef">RCSS of an Option</a>
        </h3>
<p id="section-5.3-1">By extension, the RCSS of an option is maintained by all nodes and is defined for all but the root as the freshest RCSS indicated by a DIO message from a candidate parent in which the option was present, in the abbreviated form or in full. A child maintains a state for the RCSS of each of the protected options and synchronizes its state for the options by comparing that RCSS with the one found in new DIO messages for the option.<a href="#section-5.3-1" class="pilcrow">¶</a></p>
<p id="section-5.3-2">Protected options may be sent in full, elided, or in the abbreviated form.  Which form to use depends on the RCSS of the option that a parent maintains:<a href="#section-5.3-2" class="pilcrow">¶</a></p>
<ul>
<li id="section-5.3-3.1">A parent MAY use either form when the RCSS is not changed from a previous DIO; eliding options is PREFERRED in stable conditions to save resources.<a href="#section-5.3-3.1" class="pilcrow">¶</a>
</li>
          <li id="section-5.3-3.2">When a protected option is updated, the RCSS is mechanically incremented, and the new option MUST be sent in full on the first DIO that advertises that new RCSS and the corresponding AOO SHOULD NOT be added.<a href="#section-5.3-3.2" class="pilcrow">¶</a>
</li>
          <li id="section-5.3-3.3">When the RCSS is updated but a protected option is unchanged, the parent SHOULD NOT fully elide the option as it may cause multiple children to resynchronize it to no avail. The use of AOO is RECOMMENDED unless it may cause a desynchronization for that option, in which case the option SHOULD be placed in full more in <a href="#optrcss" class="xref">Section 5.3</a>.<a href="#section-5.3-3.3" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-5.3-4">When a child receives a DIO from a candidate parent, for each option:<a href="#section-5.3-4" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-5.3-5">
          <dt id="section-5.3-5.1">If the Option is advertised in the abbreviated form</dt>
          <dd id="section-5.3-5.2">then the RCSS that the DIO advertises for the option is the Last Modification RCSS of the AOO, else<a href="#section-5.3-5.2" class="pilcrow">¶</a>
</dd>
<dt id="section-5.3-5.3">If the Option is advertised in full</dt>
          <dd id="section-5.3-5.4">then the RCSS that the DIO advertises for the option is the RCSS of the DIO, else<a href="#section-5.3-5.4" class="pilcrow">¶</a>
</dd>
<dt id="section-5.3-5.5">If the Option is elided</dt>
          <dd id="section-5.3-5.6">then the RCSS is unspecified but it is at most as fresh as the RCSS of the DIO, and the RCSS of the DIO is assumed for the comparison<a href="#section-5.3-5.6" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-5.3-6">This means that if an Option is advertised in both the abbreviated form and in full in a same DIO message then the RCSS in the AOO has precedence.<a href="#section-5.3-6" class="pilcrow">¶</a></p>
<p id="section-5.3-7">To keep the RCSS comparable for each option, the RCSS of an option must lazily progress along with the global RCSS even if there was no change in the options. Each parent including the Root MUST advertise a new RCSS for each of the protected options at least once within a sliding window of SEQUENCE_WINDOW increments.<a href="#section-5.3-7" class="pilcrow">¶</a></p>
<p id="section-5.3-8">When an option was not changed for a new RCSS, one parent may advertise it in the abbreviated form while another sends the option in full only, e.g., in response to a DIS message. A fresher RCSS indicates that the option is either the same or carries a more recent update than the one with an older RCSS.<a href="#section-5.3-8" class="pilcrow">¶</a></p>
<p id="section-5.3-9">The RCSS of an option may be obtained from a DIO message that carries the option in full even if the RCSS of the DIO is not the freshest across parents, as long as the RCSS of the DIO is fresher than the current one for that option.<a href="#section-5.3-9" class="pilcrow">¶</a></p>
<p id="section-5.3-10">If the current value of the maintained RCSS for a given option is not fresher or as fresh as that advertised in a DIO message, then the child MUST update its state for that option as specified in <a href="#sync" class="xref">Section 6</a>.<a href="#section-5.3-10" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sync">
<section id="section-6">
      <h2 id="name-synchronizing-options">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-synchronizing-options" class="section-name selfRef">Synchronizing Options</a>
      </h2>
<p id="section-6-1">As the value of the RCSS progresses, it is NOT RECOMMENDED for a child to attempt to resynchronize to an intermediate value of a RCSS with a parent that is already back level vs. the lastest known RCSS or the RCSS that this child is currently using, or a parent that is out-of-sync with self. The child MAY only do so if it lost reachability to all the candidate parents that advertise a fresher and not out-of-sync value of RCSS.<a href="#section-6-1" class="pilcrow">¶</a></p>
<p id="section-6-2">A child can resynchronize any of the protected options to the latest RCSS by sending a DIS Message to a candidate parent that advertises that RCSS in DIO messages. The child MUST set the desired combination of 'R', 'D', 'P', 'M' and 'O' flags to indicate the option(s) that it needs updated. The child MUST signal in the Last Synchronized RCSS field of the DIS the freshest value of RCSS for which it was fully synchronized, or a conventional value of OUT-OF-SYNC-RCSS of 129 if it was never synchronized or is out-of-sync with the parent.<a href="#section-6-2" class="pilcrow">¶</a></p>
<p id="section-6-3">The DIO message that is sent in response MUST contain in full all the options that are requested and that were updated since the Last Synchronized RCSS in the DIS Message. This means all of the protected options of the child was never synchronized or is out-of-sync with the parent. The other options MUST be added in the abbreviated form. The options MAY be spread over more than one DIO message sent in a quick sequence. It is possible that the DIS is not received by the parent or that a DIO that carries all or subset of the requested options is lost in return. In that case the child MUST resend a DIS with the bits associated to the options that are still missing after a reasonable technology-dependent time before it retries the request. The child MAY use any parent that advertises the RCSS to get any of the options up to that level.<a href="#section-6-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="elidingDAO">
<section id="section-7">
      <h2 id="name-abbreviating-the-dao-messag">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-abbreviating-the-dao-messag" class="section-name selfRef">Abbreviating the DAO Message</a>
      </h2>
<p id="section-7-1">When a node receives a positive DAO-ACK upon a DAO message for a given DAOSequence, The DAO-ACK indicates that the DAO was fully processed by its destination (parent or Root). Until there's a change in one of the DAO options since that DAOSequence, the next DAO messages merely refresh the lifetime of the routes. In that case, increasing the DAOSequence creates undesirable churn up the DODAG for no added value.<a href="#section-7-1" class="pilcrow">¶</a></p>
<p id="section-7-2">This specification enables a node to refresh the state in a destination that is associated to one or more DAO message(s) that were acknowledged by that destination without resending the DAO message(s) in full. Instead, the node MAY use a single abbreviated DAO message that is sent to the same destination and with the same DAOSequence as the DAO message(s) that it refreshes, and with the 'A' flag set (see <a href="#udao" class="xref">Section 4.4</a>) to signal it is an abbreviated DAO.<a href="#section-7-2" class="pilcrow">¶</a></p>
<p id="section-7-3">This can be more than one message if the node could not package all its state in a single message, e.g., due to MTU restrictions. In that case the DAO state that is refreshed is the aggregation of the DAO messages that were acknowledged for the provided DAOSequence by that destination.<a href="#section-7-3" class="pilcrow">¶</a></p>
<p id="section-7-4">Upon the abbreviated DAO, the destination refreshes the state associated to the original DAO message(s) received with that DAOSequence, typically by extending the lifetimes of the routes that were advertised with the same duration.<a href="#section-7-4" class="pilcrow">¶</a></p>
<p id="section-7-5">A node MAY also unset 'K' flag in the abbreviated DAP message and not expect a DAO-ACK, if the node can assume the risk that the DAO is lost, e.g., if the routes will be refreshed again before the lifetime expires.<a href="#section-7-5" class="pilcrow">¶</a></p>
<p id="section-7-6">Only the DAO message(s) with the last (freshest) DAOSequence can be a abbreviated. A nod MUST NOT use an abbreviated DAO with a DAOSequence that is not the freshest and it MUST NOT use the abbreviated form of the DAO until the destination has acknowledged all state associated with that DAOSequence.  If a destination receives an abbreviated DAO with a DAOSequence that is not the freshest from that node, or the destination does not have a state for that node, then MUST send a DAO-ACK with a DAO Status indicating an error.  The destination MAY use a new Status of 'Out-of-Sync' in which case the node MUST resent the DAO Message(s) in full with its freshest DAOSequence and the destination resynchronizes to that level.<a href="#section-7-6" class="pilcrow">¶</a></p>
<p id="section-7-7">It is RECOMMENDED to use an abbreviated DAO messages whenever possible, because a smaller DAO message consumes less energy and  bandwidth and has better chances of delivery. In Non-Storing Mode the benefits increases with the number of hops to the Root, and in Storing Mode with the amount of state that is implicitely refreshed.<a href="#section-7-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="SecurityConsiderations">
<section id="section-8">
      <h2 id="name-security-considerations">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-8-1">TBD<a href="#section-8-1" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-9">
      <h2 id="name-iana-considerations">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<div id="ianadisflags">
<section id="section-9.1">
        <h3 id="name-new-dodag-information-solic">
<a href="#section-9.1" class="section-number selfRef">9.1. </a><a href="#name-new-dodag-information-solic" class="section-name selfRef">New DODAG Information Solicitation Flags</a>
        </h3>
<p id="section-9.1-1">5 new bits are allocated in the Registry for the DODAG Information Solicitation (DIS) Flags defined for <span>[<a href="#RFC6550" class="xref">RPL</a>]</span>.<a href="#section-9.1-1" class="pilcrow">¶</a></p>
<span id="name-new-dis-flags"></span><div id="ianadisflagstbl">
<table class="center" id="table-1">
          <caption>
<a href="#table-1" class="selfRef">Table 1</a>:
<a href="#name-new-dis-flags" class="selfRef">New DIS Flags</a>
          </caption>
<thead>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Bit Number</td>
              <td class="text-left" rowspan="1" colspan="1">Capability description</td>
              <td class="text-left" rowspan="1" colspan="1">Defining RFC</td>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">0</td>
              <td class="text-left" rowspan="1" colspan="1">'R' bit "RIO requested"</td>
              <td class="text-left" rowspan="1" colspan="1">THIS RFC</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">1</td>
              <td class="text-left" rowspan="1" colspan="1">'D' bit "DCO requested"</td>
              <td class="text-left" rowspan="1" colspan="1">THIS RFC</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">2</td>
              <td class="text-left" rowspan="1" colspan="1">'P' bit "PIO(s) requested"</td>
              <td class="text-left" rowspan="1" colspan="1">THIS RFC</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">3</td>
              <td class="text-left" rowspan="1" colspan="1">'M' bit "MOPex requested"</td>
              <td class="text-left" rowspan="1" colspan="1">THIS RFC</td>
            </tr>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">4</td>
              <td class="text-left" rowspan="1" colspan="1">'O' bit "GCO irequested"</td>
              <td class="text-left" rowspan="1" colspan="1">THIS RFC</td>
            </tr>
          </tbody>
        </table>
</div>
</section>
</div>
<div id="ianadaoflags">
<section id="section-9.2">
        <h3 id="name-new-dodag-advertisement-obj">
<a href="#section-9.2" class="section-number selfRef">9.2. </a><a href="#name-new-dodag-advertisement-obj" class="section-name selfRef">New DODAG Advertisement Object Flag</a>
        </h3>
<p id="section-9.2-1">1 new bit is allocated in the Registry for the Destination Advertisement Object(DAO) Flags defined for<span>[<a href="#RFC6550" class="xref">RPL</a>]</span>.<a href="#section-9.2-1" class="pilcrow">¶</a></p>
<span id="name-new-dao-flag"></span><div id="ianadaoflagstbl">
<table class="center" id="table-2">
          <caption>
<a href="#table-2" class="selfRef">Table 2</a>:
<a href="#name-new-dao-flag" class="selfRef">New DAO Flag</a>
          </caption>
<thead>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Bit Number</td>
              <td class="text-left" rowspan="1" colspan="1">Capability description</td>
              <td class="text-left" rowspan="1" colspan="1">Defining RFC</td>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">2</td>
              <td class="text-left" rowspan="1" colspan="1">'A' bit "DAO abbreviated"</td>
              <td class="text-left" rowspan="1" colspan="1">THIS RFC</td>
            </tr>
          </tbody>
        </table>
</div>
</section>
</div>
<div id="ianaopttype">
<section id="section-9.3">
        <h3 id="name-new-rpl-control-message-opt">
<a href="#section-9.3" class="section-number selfRef">9.3. </a><a href="#name-new-rpl-control-message-opt" class="section-name selfRef">New RPL Control Message Option</a>
        </h3>
<p id="section-9.3-1">A new entry is required for the new option of type "Abbreviated Option", from the "RPL Control Message Options" space defined for <span>[<a href="#RFC6550" class="xref">RPL</a>]</span>.<a href="#section-9.3-1" class="pilcrow">¶</a></p>
<span id="name-new-option-type"></span><div id="ianaopttypetbl">
<table class="center" id="table-3">
          <caption>
<a href="#table-3" class="selfRef">Table 3</a>:
<a href="#name-new-option-type" class="selfRef">New Option Type</a>
          </caption>
<thead>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">Code</td>
              <td class="text-left" rowspan="1" colspan="1">Description</td>
              <td class="text-left" rowspan="1" colspan="1">Defining RFC</td>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td class="text-left" rowspan="1" colspan="1">TBD IANA</td>
              <td class="text-left" rowspan="1" colspan="1">Abbreviated Option</td>
              <td class="text-left" rowspan="1" colspan="1">THIS RFC</td>
            </tr>
          </tbody>
        </table>
</div>
</section>
</div>
</section>
<section id="section-10">
      <h2 id="name-acknowledgments">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="section-10-1"><a href="#section-10-1" class="pilcrow">¶</a></p>
</section>
<section id="section-11">
      <h2 id="name-normative-references">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
      </h2>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
      <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dt id="RFC8174">[RFC8174]</dt>
      <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dt id="RFC6550">[RPL]</dt>
      <dd>
<span class="refAuthor">Winter, T., Ed.</span><span class="refAuthor">, Thubert, P., Ed.</span><span class="refAuthor">, Brandt, A.</span><span class="refAuthor">, Hui, J.</span><span class="refAuthor">, Kelsey, R.</span><span class="refAuthor">, Levis, P.</span><span class="refAuthor">, Pister, K.</span><span class="refAuthor">, Struik, R.</span><span class="refAuthor">, Vasseur, JP.</span><span class="refAuthor">, and R. Alexander</span>, <span class="refTitle">"RPL: IPv6 Routing Protocol for Low-Power and Lossy Networks"</span>, <span class="seriesInfo">RFC 6550</span>, <span class="seriesInfo">DOI 10.17487/RFC6550</span>, <time datetime="2012-03">March 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6550">https://www.rfc-editor.org/info/rfc6550</a>&gt;</span>. </dd>
<dt id="RFC7228">[RFC7228]</dt>
      <dd>
<span class="refAuthor">Bormann, C.</span><span class="refAuthor">, Ersue, M.</span><span class="refAuthor">, and A. Keranen</span>, <span class="refTitle">"Terminology for Constrained-Node Networks"</span>, <span class="seriesInfo">RFC 7228</span>, <span class="seriesInfo">DOI 10.17487/RFC7228</span>, <time datetime="2014-05">May 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7228">https://www.rfc-editor.org/info/rfc7228</a>&gt;</span>. </dd>
<dt id="RFC7102">[RFC7102]</dt>
      <dd>
<span class="refAuthor">Vasseur, JP.</span>, <span class="refTitle">"Terms Used in Routing for Low-Power and Lossy Networks"</span>, <span class="seriesInfo">RFC 7102</span>, <span class="seriesInfo">DOI 10.17487/RFC7102</span>, <time datetime="2014-01">January 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7102">https://www.rfc-editor.org/info/rfc7102</a>&gt;</span>. </dd>
<dt id="I-D.ietf-roll-mopex-cap">[MOPEX-CAP]</dt>
      <dd>
<span class="refAuthor">Jadhav, R.</span><span class="refAuthor"> and P. Thubert</span>, <span class="refTitle">"Mode of Operation extension and Capabilities"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-roll-mopex-cap-00</span>, <time datetime="2019-08-09">9 August 2019</time>, <span>&lt;<a href="https://tools.ietf.org/html/draft-ietf-roll-mopex-cap-00">https://tools.ietf.org/html/draft-ietf-roll-mopex-cap-00</a>&gt;</span>. </dd>
<dt id="I-D.ietf-roll-useofrplinfo">[USE_OF_RPL_INFO]</dt>
    <dd>
<span class="refAuthor">Robles, I.</span><span class="refAuthor">, Richardson, M.</span><span class="refAuthor">, and P. Thubert</span>, <span class="refTitle">"Using RPL Option Type, Routing Header for Source Routes and IPv6-in-IPv6 encapsulation in the RPL Data Plane"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-roll-useofrplinfo-31</span>, <time datetime="2019-08-07">7 August 2019</time>, <span>&lt;<a href="https://tools.ietf.org/html/draft-ietf-roll-useofrplinfo-31">https://tools.ietf.org/html/draft-ietf-roll-useofrplinfo-31</a>&gt;</span>. </dd>
</dl>
</section>
<section id="section-12">
      <h2 id="name-informative-references">
<a href="#section-12" class="section-number selfRef">12. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
    </h2>
</section>
<div id="authors-addresses">
<section id="section-appendix.a">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Pascal Thubert (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">Cisco Systems, Inc</span></div>
<div dir="auto" class="left"><span class="street-address">Building D, 45 Allee des Ormes - BP1200</span></div>
<div dir="auto" class="left">
<span class="postal-code">06254</span> <span class="locality">Mougins - Sophia Antipolis</span>
</div>
<div dir="auto" class="left"><span class="country-name">France</span></div>
<div class="tel">
<span>Phone:</span>
<a href="tel:+33%20497%2023%2026%2034" class="tel">+33 497 23 26 34</a>
</div>
<div class="email">
<span>Email:</span>
<a href="mailto:pthubert@cisco.com" class="email">pthubert@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Rahul Arvind Jadhav</span></div>
<div dir="auto" class="left"><span class="org">Huawei Tech</span></div>
<div dir="auto" class="left"><span class="street-address">Kundalahalli Village, Whitefield,</span></div>
<div dir="auto" class="left">
<span class="locality">Bangalore</span> <span class="postal-code">560037</span>
</div>
<div dir="auto" class="left"><span class="region">Karnataka</span></div>
<div dir="auto" class="left"><span class="country-name">India</span></div>
<div class="tel">
<span>Phone:</span>
<a href="tel:+91-080-49160700" class="tel">+91-080-49160700</a>
</div>
<div class="email">
<span>Email:</span>
<a href="mailto:rahul.ietf@gmail.com" class="email">rahul.ietf@gmail.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Li Zhao</span></div>
<div dir="auto" class="left"><span class="country-name">China</span></div>
<div dir="auto" class="left"><span class="postal-code">200233</span></div>
<div dir="auto" class="left"> <span class="locality">SHANGHAI </span> </div>
<div dir="auto" class="left"><span class="street-address">Xinsi Building, No. 926 Yi Shan Rd</span></div>
<div dir="auto" class="left"><span class="org">Cisco Systems, Inc</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:liz3@cisco.com" class="email">liz3@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Dominique Barthel</span></div>
<div dir="auto" class="left"><span class="org">Orange Labs</span></div>
<div dir="auto" class="left"><span class="street-address">28 chemin du Vieux Chêne</span></div>
<div dir="auto" class="left">
<span class="postal-code">38243</span> <span class="locality">Meylan</span>
</div>
<div dir="auto" class="left"><span class="country-name">France</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:dominique.barthel@orange.com" class="email">dominique.barthel@orange.com</a>
</div>
</address>
</section>
</div>
<script>var toc = document.getElementById("toc");
var tocToggle = toc.querySelector("h2");
var tocNav = toc.querySelector("nav");

// mobile menu toggle
tocToggle.onclick = function(event) {
    if (window.innerWidth < 1024) {
 var tocNavDisplay = tocNav.currentStyle ? tocNav.currentStyle.display : getComputedStyle(tocNav, null).display;
 if (tocNavDisplay == "none") {
     tocNav.style.display = "block";
 } else {
     tocNav.style.display = "none";
 }
    }
}

// toc anchor scroll to anchor
tocNav.addEventListener("click", function (event) {
    event.preventDefault();
    if (event.target.nodeName == 'A') {
 if (window.innerWidth < 1024) {
     tocNav.style.display = "none";
 }
 var href = event.target.getAttribute("href");
 var anchorId = href.substr(1);
 var anchor =  document.getElementById(anchorId);
 anchor.scrollIntoView(true);
 window.history.pushState("","",href);
    }
});

// switch toc mode when window resized
window.onresize = function () {
    if (window.innerWidth < 1024) {
 tocNav.style.display = "none";
    } else {
 tocNav.style.display = "block";
    }
}
</script>
</body>
</html>
