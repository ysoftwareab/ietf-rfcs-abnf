
Network Working Group                                         F. Templin
Internet-Draft                                                     Nokia
Expires: May 25, 2004                                  November 25, 2003


                    Applicability of ISATAP for NOID
                      draft-templin-isnoid-00.txt

Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups. Note that other
   groups may also distribute working documents as Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time. It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at http://
   www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on May 25, 2004.

Copyright Notice

   Copyright (C) The Internet Society (2003). All Rights Reserved.

Abstract

   This document describes the operation of the NOID multihoming
   proposal on nodes with ISATAP interfaces. It uses the global DNS as
   an extension of the ISATAP Potential Router List (PRL) and ISATAP
   link-local addresses as next-hop addresses for IPv6 routes.

1. Introduction

   This document describes the operation of the NOID multihoming
   proposal [NOID] on nodes with ISATAP interfaces [ISATAP]. It uses the
   global DNS as an extension of the ISATAP Potential Router List (PRL)
   ([ISATAP], section 6.1) and ISATAP link-local addresses as next-hop
   addresses for IPv6 routes.




Templin                   Expires May 25, 2004                  [Page 1]

Internet-Draft    Applicability of ISATAP for NOID Multihoming      November 2003


   In particular, any peer node that has a Fully-Qualified Domain Name
   (FQDN) in the global DNS that resolves to a list of both AAAA and A
   records (and indicates participation in the NOID protocol) is
   considered a Potential Router for ISATAP. The question of whether the
   node is an actual router is determined by sending IPv6 Router
   Solicitation messages and getting an IPv6 Router Advertisement back
   [RFC2461].

2. Assumptions

   This document makes the same assumptions as stated in ([NOID],
   section 1.2:

   "The main technical assumptions this proposal makes it that the DNS
   infrastructure can be used for verification of the relationship
   between locators on both the initiator of communication and the
   responding peer. In particular, it assumes that getting DNS reverse
   maps (ip6.arpa) populated for the hosts that wish to take advantage
   of multihoming will not be a significant problem."

   In addition, this document assumes that nodes with advertising ISATAP
   interfaces will arrange to have both AAAA and A records added to the
   DNS for their FQDNs.

3. Terminology

   The terminology of [RFC1122],[RFC2461], [NOID], and [ISATAP] applies
   to this document.

4. NOID Context Establishment Using ISATAP

   As described in ([NOID], section 3) it is assumed that the DNS
   maintains consistent forward and reverse maps for hosts that support
   the protocol. The following specific actions are taken by initiating
   and responding NOID peers with ISATAP interfaces during context
   establishment:

   When a host initiates a connection, it first looks up the FQDN of the
   target peer in the DNS. If the DNS returns both AAAA and A records,
   and an indication that the NOID protocol is supported, the initiator
   assumes that the target peer is a dual-stack (IPv6/IPv4) router that
   supports both the NOID protocol and ISATAP. In this sense, the
   initiator assumes that the target peer is a member of the ISATAP
   Potential Router List (PRL).

   Next, if default or more-specific routes for the IPv6 addresses
   returned by the DNS do not exist, the initiator uses the IPv4
   addresses from the A records to construct ISATAP link-local addresses



Templin                   Expires May 25, 2004                  [Page 2]

Internet-Draft    Applicability of ISATAP for NOID Multihoming      November 2003


   ([ISATAP], section 4.1) for use as the IPv6 next-hop toward the IPv6
   addresses. Assuming the initiator has an enabled ISATAP interface, it
   next sends one or more "modified" IPv6 Router Solicitation messages
   to one of the peer's ISATAP link-local unicast addresses as described
   in ([RFC2461], section 6.3.7). The Router Solicitations are
   "modified" in the sense that they carry a special code (TBD) to
   indicate that ONLY Route Information Options ([RPREF], section 2.3)
   are desired in returned Router Advertisements.

   If the initiator receives an IPv6 Router Advertisement from the peer,
   it verifies that the prefixes advertised in Route Information Options
   match the IPv6 addresses that were discovered from the DNS FQDN
   lookup. If the set of prefixes in the Router Advertisement exactly
   match the addresses discovered from the DNS, the initiator deems the
   peer an authentic ISATAP router and adds host routes to its IPv6
   routing table for each of the IPv6 addresses, using the ISATAP
   link-local address as the next-hop address. Otherwise, the peer is
   deemed untrustworthy.

   Next, the initiator performs a 3-way state creation exchange with the
   responder as specified in [NOID], section 4.1). (Note that this
   process MAY carry ULP packets as piggybacked messages.) At some time
   during or after this context creation 3-way handshake, the responding
   peer will perform a reverse-DNS lookup on one of the initiator's IPv6
   addresses in the ip6.arpa domain, i.e., as an inverse operation of
   the DNS lookup originally performed by the initiator. The responder
   uses the information returned by the DNS to validate the locators
   used by the initiating host and optionally authenticate the initiator
   by performing a Router Solicitation/Router Advertisement exchange as
   described above.

5. Other Considerations

   All other protocol specifications in [NOID] and [ISATAP] are followed
   exactly. Additionally, first-pass path MTU discovery can be
   piggybacked onto the Router Solicitation/Router Advertisement
   process.

6. IANA Considerations

   Future versions of this document will instruct the IANA to either
   allocate a new IPv6 Neighbor Discovery option type or to allocate
   bits in the existing IPv6 Router Solicitation format to signify the
   type of information being solicited.

7. Security considerations

   Security considerations are discussed in the normative references.



Templin                   Expires May 25, 2004                  [Page 3]

Internet-Draft    Applicability of ISATAP for NOID Multihoming      November 2003


8. Acknowledgements

   TBD

Normative References

   [ISATAP]   Templin, F., Gleeson, T., Talwar, M. and D. Thaler,
              "Intra-Site Automatic Tunnel Addressing Protocol",
              draft-ietf-ngtrans-isatap (work in progress), October
              2003.

   [NOID]     Nordmark, E., "Multihoming without IP Identifiers",
              draft-nordmark-multi6-noid (work in progress), October
              2003.

   [RFC1122]  Braden, R., "Requirements for Internet Hosts -
              Communication Layers", STD 3, RFC 1122, October 1989.

   [RFC2461]  Narten, T., Nordmark, E. and W. Simpson, "Neighbor
              Discovery for IP Version 6 (IPv6)", RFC 2461, December
              1998.

   [RPREF]    Draves, R. and R. Hinden, "Default Router Preferences,
              More-Specific Routes, and Load Sharing",
              draft-ietf-ipv6-router-selection (work in progress), June
              2002.


Author's Address

   Fred L. Templin
   Nokia
   313 Fairchild Drive
   Mountain View, CA  94110
   US

   Phone: +1 650 625 2331
   EMail: ftemplin@iprg.nokia.com













Templin                   Expires May 25, 2004                  [Page 4]

Internet-Draft    Applicability of ISATAP for NOID Multihoming      November 2003


Intellectual Property Statement

   The IETF takes no position regarding the validity or scope of any
   intellectual property or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; neither does it represent that it
   has made any effort to identify any such rights. Information on the
   IETF's procedures with respect to rights in standards-track and
   standards-related documentation can be found in BCP-11. Copies of
   claims of rights made available for publication and any assurances of
   licenses to be made available, or the result of an attempt made to
   obtain a general license or permission for the use of such
   proprietary rights by implementors or users of this specification can
   be obtained from the IETF Secretariat.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights which may cover technology that may be required to practice
   this standard. Please address the information to the IETF Executive
   Director.


Full Copyright Statement

   Copyright (C) The Internet Society (2003). All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works. However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assignees.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION



Templin                   Expires May 25, 2004                  [Page 5]

Internet-Draft    Applicability of ISATAP for NOID Multihoming      November 2003


   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Acknowledgment

   Funding for the RFC Editor function is currently provided by the
   Internet Society.











































Templin                   Expires May 25, 2004                  [Page 6]


