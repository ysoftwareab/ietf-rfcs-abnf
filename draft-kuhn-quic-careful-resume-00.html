<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Carefully Resume QUIC Session</title>
<meta content="Nicolas Kuhn" name="author">
<meta content="Emile Stephan" name="author">
<meta content="Godred Fairhurst" name="author">
<meta content="Tom Jones" name="author">
<meta content="Christian Huitema" name="author">
<meta content="
       This document provides a method to allow a QUIC session to carefully
      resume using a previously utilised Internet path.  
       The method uses a set of computed congestion control parameters that
      are based on the previously observed path characteristics, such as the
      bottleneck bandwidth, available capacity, or the RTT. These parameters
      are stored and can then used to modify the congestion control behaviour
      of a subsequent connection. The draft discusses assumptions around how a
      server ought to utilise the parameters to provide opportunities for a
      new flow to more quickly get up to speed (i.e. utilise available
      capacity). It discusses how these changes impact the capacity at a
      shared network bottleneck and the response that is needed after any
      indication that the new rate is inappropriate. 
    " name="description">
<meta content="xml2rfc 3.12.3" name="generator">
<meta content="QUIC, 0-RTT" name="keyword">
<meta content="draft-kuhn-quic-careful-resume-00" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.12.3
    Python 3.6.12
    appdirs 1.4.4
    ConfigArgParse 1.5.3
    google-i18n-address 2.5.0
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.8.0
    MarkupSafe 2.0.1
    pycountry 22.1.10
    pyflakes 2.4.0
    PyYAML 6.0
    requests 2.27.1
    setuptools 59.6.0
    six 1.16.0
    WeasyPrint 52.5
-->
<link href="/tmp/draft-kuhn-quic-careful-resume-00-egqyw0b1.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">Carefully Resume QUIC Session</td>
<td class="right">March 2022</td>
</tr></thead>
<tfoot><tr>
<td class="left">Kuhn, et al.</td>
<td class="center">Expires 6 September 2022</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">Internet Engineering Task Force</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-kuhn-quic-careful-resume-00</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2022-03-05" class="published">5 March 2022</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Informational</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2022-09-06">6 September 2022</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">N. Kuhn</div>
</div>
<div class="author">
      <div class="author-name">E. Stephan</div>
<div class="org">Orange</div>
</div>
<div class="author">
      <div class="author-name">G. Fairhurst</div>
<div class="org">University of Aberdeen</div>
</div>
<div class="author">
      <div class="author-name">T. Jones</div>
<div class="org">University of Aberdeen</div>
</div>
<div class="author">
      <div class="author-name">C. Huitema</div>
<div class="org">Private Octopus Inc.</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Carefully Resume QUIC Session</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document provides a method to allow a QUIC session to carefully
      resume using a previously utilised Internet path.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
<p id="section-abstract-2">The method uses a set of computed congestion control parameters that
      are based on the previously observed path characteristics, such as the
      bottleneck bandwidth, available capacity, or the RTT. These parameters
      are stored and can then used to modify the congestion control behaviour
      of a subsequent connection. The draft discusses assumptions around how a
      server ought to utilise the parameters to provide opportunities for a
      new flow to more quickly get up to speed (i.e. utilise available
      capacity). It discusses how these changes impact the capacity at a
      shared network bottleneck and the response that is needed after any
      indication that the new rate is inappropriate.<a href="#section-abstract-2" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 6 September 2022.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2022 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="xref">2</a>.  <a href="#name-language-notations-and-term" class="xref">Language, notations and terms</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1" class="keepWithNext"><a href="#section-2.1" class="xref">2.1</a>.  <a href="#name-requirements-language" class="xref">Requirements Language</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2">
                <p id="section-toc.1-1.2.2.2.1" class="keepWithNext"><a href="#section-2.2" class="xref">2.2</a>.  <a href="#name-notations-and-terms" class="xref">Notations and Terms</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-scenarios-of-interest" class="xref">Scenarios of Interest</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="xref">3.1</a>.  <a href="#name-large-bdp-scenarios" class="xref">Large BDP Scenarios</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="xref">3.2</a>.  <a href="#name-accomodating-from-a-known-r" class="xref">Accomodating from a Known Reduction in Capacity</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a href="#section-3.3" class="xref">3.3</a>.  <a href="#name-optimizing-client-requests" class="xref">Optimizing Client Requests</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.4">
                <p id="section-toc.1-1.3.2.4.1"><a href="#section-3.4" class="xref">3.4</a>.  <a href="#name-sharing-transport-informati" class="xref">Sharing Transport Information across Multiple Connections</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.5">
                <p id="section-toc.1-1.3.2.5.1"><a href="#section-3.5" class="xref">3.5</a>.  <a href="#name-connection-establishment-cl" class="xref">Connection Establishment, Client and Server</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-the-phases-of-cc" class="xref">The Phases of CC</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-safe-jump" class="xref">Safe Jump</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="xref">5.1</a>.  <a href="#name-rationale-behind-the-safety" class="xref">Rationale behind the Safety Guidelines</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="xref">5.2</a>.  <a href="#name-rationale-1-variable-networ" class="xref">Rationale #1: Variable Network Conditions</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a href="#section-5.3" class="xref">5.3</a>.  <a href="#name-rationale-2-malicious-clien" class="xref">Rationale #2: Malicious clients</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.4">
                <p id="section-toc.1-1.5.2.4.1"><a href="#section-5.4" class="xref">5.4</a>.  <a href="#name-trade-off-between-the-diffe" class="xref">Trade-off between the different solutions</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.4.2.1">
                    <p id="section-toc.1-1.5.2.4.2.1.1"><a href="#section-5.4.1" class="xref">5.4.1</a>.  <a href="#name-interoperability-and-use-ca" class="xref">Interoperability and Use Cases</a></p>
</li>
                  <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.4.2.2">
                    <p id="section-toc.1-1.5.2.4.2.2.1"><a href="#section-5.4.2" class="xref">5.4.2</a>.  <a href="#name-summary" class="xref">Summary</a></p>
</li>
                </ul>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-safety-guidelines" class="xref">Safety Guidelines</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-acknowledgments" class="xref">Acknowledgments</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-iana-considerations" class="xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-security-considerations" class="xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="xref">10</a>. <a href="#name-references" class="xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a href="#section-10.1" class="xref">10.1</a>.  <a href="#name-normative-references" class="xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.2">
                <p id="section-toc.1-1.10.2.2.1"><a href="#section-10.2" class="xref">10.2</a>.  <a href="#name-informative-references" class="xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#appendix-A" class="xref">Appendix A</a>.  <a href="#name-implementation-consideratio" class="xref">Implementation Considerations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.1">
                <p id="section-toc.1-1.11.2.1.1"><a href="#appendix-A.1" class="xref">A.1</a>.  <a href="#name-rationale-behind-the-differ" class="xref">Rationale behind the different implementation options</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.2">
                <p id="section-toc.1-1.11.2.2.1"><a href="#appendix-A.2" class="xref">A.2</a>.  <a href="#name-independent-local-storage-o" class="xref">Independent Local Storage of Values</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.3">
                <p id="section-toc.1-1.11.2.3.1"><a href="#appendix-A.3" class="xref">A.3</a>.  <a href="#name-using-new_token-frames" class="xref">Using NEW_TOKEN frames</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11.2.4">
                <p id="section-toc.1-1.11.2.4.1"><a href="#appendix-A.4" class="xref">A.4</a>.  <a href="#name-bdp-frame" class="xref">BDP Frame</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#appendix-B" class="xref"></a><a href="#name-authors-addresses" class="xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="sec_introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">The specification for the QUIC transport protocol <span>[<a href="#RFC9000" class="xref">RFC9000</a>]</span> notes "Generally, implementations are advised
      to be cautious when using previous values on a new path." The method
      uses a set of computed Congestion Control (CC) parameters that are based
      on the previously observed path characteristics, such as the bottleneck
      bandwidth, available capacity, or the Round Trip Time (RTT). These
      parameters are stored and can then used to modify the congestion control
      behaviour of a subsequent connection.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">All Internet transports are required to use a CC method. In 2010, RFC
      5783 provided a survey of alternative CC methods, and noted that there
      are challenges when a CC operates across paths with a high and/or
      variable bandwidth-delay product (BDP) <span>[<a href="#RFC5783" class="xref">RFC5783</a>]</span>.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">A CC algorithm typically takes time to ramp-up the packet rate,
      called the "slow-start phase", informally known as the time to "Get up
      to speed". The slow start phase is a period in which a sender
      intentionally uses less capacity than might be available with the
      intention to avoid overshooting the actual capacity at a bottleneck,
      which would result in increased queueing (latency/jitter) and/or
      congestion packet loss. An overshoot in the capacity can also have a
      detrimental effect on other flows sharing a common bottleneck. In the
      extreme case, persistent congestion can result in unwanted starvation of
      other flows <span>[<a href="#RFC8867" class="xref">RFC8867</a>]</span> (i.e. Preventing other flows
      from successfully sharing a common bottleneck).<a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4">In Reno, the slow-start phase consists of a sequence of increases in
      the congestion window (cwnd) starting from the Initial Window (IW). Each
      step lasts approximately one path RTT, until the sender estimate that
      the capacity has reached (or is nearing) the capacity at the bottleneck
      for the path).<a href="#section-1-4" class="pilcrow">¶</a></p>
<p id="section-1-5">To fully-utilise the capacity along a path with a certain path RTT,
      the transport needs to determine an appropriate volume of bytes in
      flight, based on the product of the available capacity and the RTT.
      <span>[<a href="#RFC6349" class="xref">RFC6349</a>]</span> defines the BDP as follows: "Derived from
      Round-Trip Time (RTT) and network Bottleneck Bandwidth (BB), the
      Bandwidth-Delay Product (BDP) determines the Send and Received Socket
      buffer sizes required to achieve the maximum TCP Throughput." The BDP
      estimated by a server includes all buffering experienced along a network
      path. Various approaches are possible to determine the BDP, based on
      measurements of the path characteristics. <span>[<a href="#RFC6349" class="xref">RFC6349</a>]</span>
      specifies one procedure for TCP. CC for QUIC is specified in <span>[<a href="#RFC9002" class="xref">RFC9002</a>]</span> and does not specify a required method to
      measure the BDP, allowing the sender to implement an appropriate
      method.<a href="#section-1-5" class="pilcrow">¶</a></p>
<p id="section-1-6">This document specifies a method for QUIC that can improve traffic
      delivery (e.g. throughput) by allowing a QUIC connection to reduce the
      total duration of the slow start phase under specific conditions. This
      introduces an alternative way to discover initial key path parameters,
      including a way to more rapidly and safely grow the cwnd.<a href="#section-1-6" class="pilcrow">¶</a></p>
<p id="section-1-7">There are scenarios where sharing previously computed parameters
      relating to path characteristics, such as the bottleneck bandwidth or
      RTT, can help to save round-trip times at the start of a new connection.
      For example:<a href="#section-1-7" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-1-8">
<li id="section-1-8.1">To optimize sessions that use a series of short flows over the
          same path, each of which needs to individually learn the available
          capacity/rtt (e.g., a client using Dynamic Adaptive Streaming over
          HTTPS, DASH);<a href="#section-1-8.1" class="pilcrow">¶</a>
</li>
        <li id="section-1-8.2">After a pause in transmission (e.g., when a user uses a path,
          pauses a session, and then wishes to resume the session over the
          same path;<a href="#section-1-8.2" class="pilcrow">¶</a>
</li>
        <li id="section-1-8.3">To resume a session after a service disruption (e.g., where the
          network service temporarily reduced due to a link propagation
          impairment, or where a user on a train journey travels through
          different areas of connectivity with a temporary change in path
          characteristics before the user returns to the original path
          characteristics).<a href="#section-1-8.3" class="pilcrow">¶</a>
</li>
      </ol>
<p id="section-1-9">In all of these cases, specific characteristics of the path may have
      been learned, including CC information, such as the available capacity
      and RTT. This CC information might be expected to be similar when a new
      connection is made between the same local and remote endpoints.<a href="#section-1-9" class="pilcrow">¶</a></p>
<p id="section-1-10">There are also cases where using the parameters of a previous
      connection are not appropriate, and a need to evaluate the potential
      malicious use of the method.<a href="#section-1-10" class="pilcrow">¶</a></p>
<p id="section-1-11">The remainder of this document:<a href="#section-1-11" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-1-12">
<li id="section-1-12.1">discusses use-cases where carefully resuming QUIC sessions is
          expected to have benefit;<a href="#section-1-12.1" class="pilcrow">¶</a>
</li>
        <li id="section-1-12.2">proposes guidelines for how to carefully utilise the previously
          stored CC information;<a href="#section-1-12.2" class="pilcrow">¶</a>
</li>
        <li id="section-1-12.3">describes implementation considerations for the proposed method
          using QUIC;<a href="#section-1-12.3" class="pilcrow">¶</a>
</li>
        <li id="section-1-12.4">discusses the trade-offs associated with the different
          implementation solutions.<a href="#section-1-12.4" class="pilcrow">¶</a>
</li>
      </ol>
</section>
</div>
<div id="notation">
<section id="section-2">
      <h2 id="name-language-notations-and-term">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-language-notations-and-term" class="section-name selfRef">Language, notations and terms</a>
      </h2>
<p id="section-2-1">This section provides a brief summary of key terms and the
      requirements language that is used. The document uses language drawn
      from a range of IETF RFCs.<a href="#section-2-1" class="pilcrow">¶</a></p>
<div id="sec_req_language">
<section id="section-2.1">
        <h3 id="name-requirements-language">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-requirements-language" class="section-name selfRef">Requirements Language</a>
        </h3>
<p id="section-2.1-1">The keywords "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
        "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
        "OPTIONAL" in this document are to be interpreted as described in BCP
        14 <span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="xref">RFC8174</a>]</span> when,
        and only when, they appear in all capitals, as shown here.<a href="#section-2.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec-terms_def">
<section id="section-2.2">
        <h3 id="name-notations-and-terms">
<a href="#section-2.2" class="section-number selfRef">2.2. </a><a href="#name-notations-and-terms" class="section-name selfRef">Notations and Terms</a>
        </h3>
<p id="section-2.2-1">This document defines current, and saved values for a set of CC
        parameters:<a href="#section-2.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2.2-2.1">IW: Initial Window <span>[<a href="#RFC9002" class="xref">RFC9002</a>]</span>;<a href="#section-2.2-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.2-2.2">current_iw: Current IW;<a href="#section-2.2-2.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.2-2.3">recom_iw: Recommended IW;<a href="#section-2.2-2.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.2-2.4">current_bb : Current estimated bottleneck bandwidth;<a href="#section-2.2-2.4" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.2-2.5">saved_bb: Estimated bottleneck bandwidth preserved from a
            previous connection;<a href="#section-2.2-2.5" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.2-2.6">current_rtt: Current RTT;<a href="#section-2.2-2.6" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.2-2.7">saved_rtt: RTT measure RTT preserved from a previous
            connection;<a href="#section-2.2-2.7" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.2-2.8">client_ip : IP address of the client;<a href="#section-2.2-2.8" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.2-2.9">current_client_ip : Current IP address of the client;<a href="#section-2.2-2.9" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.2-2.10">saved_client_ip : IP address of a previous connection by the
            client;<a href="#section-2.2-2.10" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-2.2-2.11">remembered BDP parameters: a combination of saved_rtt and
            saved_bb<a href="#section-2.2-2.11" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-2.2-3">Congestion controllers, such as CUBIC or RENO, could estimate the
        saved_bb and current_bb values by utilizing a combination of the
        cwnd/flight_size and the minimum RTT. A different method could be used
        to estimate the same values when using a rate-based congestion
        controller, such as BBR  <span>[<a href="#I-D.cardwell-iccrg-bbr-congestion-control" class="xref">I-D.cardwell-iccrg-bbr-congestion-control</a>]</span>. It is important to
        consider whether the methods could result in over-estimating the
        bottleneck bandwidth, and the preserved values there ought to be used
        with caution.<a href="#section-2.2-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sec-use_case">
<section id="section-3">
      <h2 id="name-scenarios-of-interest">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-scenarios-of-interest" class="section-name selfRef">Scenarios of Interest</a>
      </h2>
<div id="subsec_rationale_satcom">
<section id="section-3.1">
        <h3 id="name-large-bdp-scenarios">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-large-bdp-scenarios" class="section-name selfRef">Large BDP Scenarios</a>
        </h3>
<p id="section-3.1-1">QUIC introduces the concept of transport parameters (section 4 of
        <span>[<a href="#RFC9000" class="xref">RFC9000</a>]</span>). This document notes that a new
        connection can utilise a set of key transport parameters from a
        previous connection to reduce the completion time for a transfer of
        size much larger than the IW over paths where the available capacity
        is also significantly larger than the IW. This benefit is particularly
        evident for a path where the RTT is much larger than a typical
        Internet RTT.<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<p id="section-3.1-2">For example, a satellite access network, a 5.3 MB transfer takes up
        to 9 seconds using standard congestion control, whereas using the
        specified method this could reduce to 4 seconds <span>[<a href="#IJSCN" class="xref">IJSCN</a>]</span>; and the time to complete a 1 MB transfer could
        be reduced by 62 % <span>[<a href="#MAPRG111" class="xref">MAPRG111</a>]</span>. Benefits is also
        expected for other sizes of transfer and for different path
        characteristics that also result in a higher BDP.<a href="#section-3.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="subsec_rationale_drops">
<section id="section-3.2">
        <h3 id="name-accomodating-from-a-known-r">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-accomodating-from-a-known-r" class="section-name selfRef">Accomodating from a Known Reduction in Capacity</a>
        </h3>
<p id="section-3.2-1">A transport protocol is not able to assume that the path
        characteristics it experiences remain the same. Variation can arise
        from a combination of various factors:<a href="#section-3.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-3.2-2.1">Competing network traffic sharing a common bottleneck can
            result in short or long term variation;<a href="#section-3.2-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-3.2-2.2">Changes in forward path can change the set of links/routers
            over which the flow is forwarded (from routing/mobility/circuit
            restoration/interface change), result in a change in the bandwidth
            and the other traffic that shares all/part of the path;<a href="#section-3.2-2.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-3.2-2.3">Link conditions can result in a change of the total bandwidth
            (e.g., as a result of changes in propagation conditions or sharing
            of a medium);<a href="#section-3.2-2.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-3.2-2.4">Application/endpoint Behavior can change the capacity available
            to a flow.<a href="#section-3.2-2.4" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-3.2-3">The characteristics of an Internet path therefore need to be
        measured by the transport protocol, and may not reflect the actual
        path used by a new connection. Older measurements, or cases where
        measurements are known to vary significantly are more likely to be
        invalid.<a href="#section-3.2-3" class="pilcrow">¶</a></p>
<p id="section-3.2-4">In some cases (e.g., after a change in the interface used by the
        local endpoint), a client may be aware of such a change, and might be
        able to infer that a previously available path has again become
        available. However, to utilise the previous information, the client
        would need assurance that the path was to the same endpoint, and that
        the characteristics have not significantly changed from those
        previously measured. When the path is expected to be the same, there
        is then an opportunity to save time (eliminate RTTs consumed by slow
        start) by utilising saved CC information for the path.<a href="#section-3.2-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="subsec_rationale_client">
<section id="section-3.3">
        <h3 id="name-optimizing-client-requests">
<a href="#section-3.3" class="section-number selfRef">3.3. </a><a href="#name-optimizing-client-requests" class="section-name selfRef">Optimizing Client Requests</a>
        </h3>
<p id="section-3.3-1">Some styles of usage do not use long-lasting connections at the
        transport layer. Instead, they use a series of shorter connections.
        For example, a client using Dynamic Adaptive Streaming over HTTPS
        (DASH). Such a client might be unable to reach the video playback
        quality that is supported by the path, because for each video chunk,
        the transport protocol needs to independently determine the path
        capacity. The lower transfer rate is safe, but can also lead to an
        overly conservative requested rate by the client, because clients
        often adapt their application-layer requests based on the transport
        performance (i.e., the client could fail to increase the requested
        quality of video chunks, or to fill buffers to avoid stalling playback
        or to send high quality advertisements).<a href="#section-3.3-1" class="pilcrow">¶</a></p>
<p id="section-3.3-2">There are other cases where applications could provide additional
        services if a client knew the path characteristics.<a href="#section-3.3-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="subsec_rationale_sharing">
<section id="section-3.4">
        <h3 id="name-sharing-transport-informati">
<a href="#section-3.4" class="section-number selfRef">3.4. </a><a href="#name-sharing-transport-informati" class="section-name selfRef">Sharing Transport Information across Multiple Connections</a>
        </h3>
<p id="section-3.4-1">There can be benefit in sharing transport information across
        multiple concurrent connections. <span>[<a href="#RFC9040" class="xref">RFC9040</a>]</span>
        considers the sharing of transport parameters between TCP connections
        that originate from the same host. The proposal in this document has
        the advantage of storing server-generated information at the client
        and not requiring the server to retain additional state for each
        client.<a href="#section-3.4-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="subsec_client_server">
<section id="section-3.5">
        <h3 id="name-connection-establishment-cl">
<a href="#section-3.5" class="section-number selfRef">3.5. </a><a href="#name-connection-establishment-cl" class="section-name selfRef">Connection Establishment, Client and Server</a>
        </h3>
<p id="section-3.5-1">In the previously detailed scenarios, the application data transfer
        was unidirectional towards the client, i.e., the main flow of data was
        from a server to a client (e.g., downloading a file or web page). This
        is the focus of the current version of the document.<a href="#section-3.5-1" class="pilcrow">¶</a></p>
<p id="section-3.5-2">In a different example, the application data transfer can still be
        unidirectional, but towards the server, e.g., uploading an image/video
        is a server.<a href="#section-3.5-2" class="pilcrow">¶</a></p>
<p id="section-3.5-3">There are also use cases where a client initiates a connection for
        a bidirectional service where both endpoints send appreciable data to
        each other, such as to support a remote executing application, or a
        video conference call.<a href="#section-3.5-3" class="pilcrow">¶</a></p>
<p id="section-3.5-4">In general, the guidelines proposed in this document apply when a
        congestion controller is sending data to a remote peer and that remote
        endpoint resumes the session. Both endpoints can assume the role of a
        client or a server.<a href="#section-3.5-4" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sec-phase">
<section id="section-4">
      <h2 id="name-the-phases-of-cc">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-the-phases-of-cc" class="section-name selfRef">The Phases of CC</a>
      </h2>
<p id="section-4-1">This document defines a series of different phases through which the
      CC algorithm moves as a connection gets up to speed. The phases are
      labelled as follows:<a href="#section-4-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-4-2">
<li id="section-4-2.1">Observe: During a previous connection, the current RTT
          (current_rtt), bottleneck bandwidth (current_bb) and current client
          IP (current_client_ip) are stored as saved_rtt, saved_bb and
          saved_client_ip;<a href="#section-4-2.1" class="pilcrow">¶</a>
</li>
        <li id="section-4-2.2">Reconnaissance: When resuming a session between the same pair of
          IP addresses, the server measures the path characteristics of a new
          connection to confirm the path appears the same as observed
          previously (e.g., path with similar RTT). The server also seeks
          assurance that initial data is not lost, to avoid resuming under
          congested conditions.<a href="#section-4-2.2" class="pilcrow">¶</a>
</li>
        <li id="section-4-2.3">
          <p id="section-4-2.3.1">Unvalidated: Utilise the saved path characteristics to send at a
          rate higher than allowed by slow start. The convergence towards the
          previous rate is expected be quicker than when using traditional
          slow-start mechanisms, but should not be instantaneous, to avoid
          adding congestion to a congested bottleneck.<a href="#section-4-2.3.1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-4-2.3.2">
<li id="section-4-2.3.2.1">If the unvalidated rate was used without inducing noticeable
              congestion to the path, the server is permitted to continue
              sending at this rate in the 'Normal' phase.<a href="#section-4-2.3.2.1" class="pilcrow">¶</a>
</li>
            <li id="section-4-2.3.2.2">If the validation phase determines that previous parameters
              are not valid (due to a change) or congestion was experienced,
              the sender must withdraw rapidly to a safe rate, before it
              enters the 'Normal' phase.<a href="#section-4-2.3.2.2" class="pilcrow">¶</a>
</li>
          </ol>
</li>
        <li id="section-4-2.4">Normal: Resume using the normal CC method.<a href="#section-4-2.4" class="pilcrow">¶</a>
</li>
      </ol>
</section>
</div>
<div id="sec-rationale">
<section id="section-5">
      <h2 id="name-safe-jump">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-safe-jump" class="section-name selfRef">Safe Jump</a>
      </h2>
<section id="section-5.1">
        <h3 id="name-rationale-behind-the-safety">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-rationale-behind-the-safety" class="section-name selfRef">Rationale behind the Safety Guidelines</a>
        </h3>
<p id="section-5.1-1">NOTE: The sender ought not to re-utilise all capacity it previously
        used, to avoiding starving flows that started after the measurement.
        How strong should this be stated: ... MUST or SHOULD ... What safety
        factor is appropriate for the resuming sender? If using slow-start it
        would anyway double the rate on the next RTT, so is capacity/2
        appropriate to initially try?<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<p id="section-5.1-2">A connection MUST NOT use the previously measured saved_rtt and
        saved_bb to simply initialise a new flow to resume sending at the same
        rate.<a href="#section-5.1-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.1-3.1">Rationale #1: Bottleneck bandwidth and network traffic can
            change at any time. An Internet method needs to be robust to
            network conditions that can differ from one session to the next,
            due to variations in the forwarding path, reconfiguration of
            equipment or changes in the link conditions. An Internet method
            needs to be robust to changes in network traffic, including the
            arrival of new traffic flows that compete for the bottleneck
            capacity. Behaviours need to be designed that avoid sending
            excessive data into a congestion bottleneck because this can have
            a material impact on any flows using that bottleneck, and the
            ability of those flows to control their own sending rate.<a href="#section-5.1-3.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.1-3.2">Rationale #2: Information sent by a malicious client is not
            relevant. A client could request a server to use a cwnd higher
            than appropriate, to gain an unfair share of capacity for itself
            or to induce congestion for other flows. A server might anyway
            decide whether to fully use the new allowed rate.<a href="#section-5.1-3.2" class="pilcrow">¶</a>
</li>
        </ul>
</section>
<section id="section-5.2">
        <h3 id="name-rationale-1-variable-networ">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-rationale-1-variable-networ" class="section-name selfRef">Rationale #1: Variable Network Conditions</a>
        </h3>
<p id="section-5.2-1">The server MUST check the validity of any received saved_rtt and
        saved_bb parameters, whether these are sent by a client or are stored
        at the server. The following events indicates cases where the use of
        these parameters is inappropriate:<a href="#section-5.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.2-2.1">IP address change: If the client changes its local IP address
            (i.e., the saved_client_ip is different from the
            current_client_ip), the different source address is a assumed an
            indication of a different network path. This new path does not
            necessarily exhibit the same characteristics as the old one. If
            the server changes its IP address after a migration, it would not
            be safe to exploit previously estimated parameters.<a href="#section-5.2-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.2-2.2">RTT change: A significant change in RTT might be an indication
            that the network conditions have changed. Since the CC information
            is directly impacted by the RTT, a significant change in the RTT
            is a strong indication that the previously estimated BDP
            parameters are likely to not be valid for the current path. NOTE:
            This document needs to define a significant change.<a href="#section-5.2-2.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.2-2.3">Lifetime of the information: The CC information is temporal.
            Frequent connections to the same IP address are likely to track
            changes, but long-term use of previous values is not appropriate.
            NOTE: This document needs to define how long.<a href="#section-5.2-2.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.2-2.4">BB over-estimation: There are cases where using a measured cwnd
            would inflate the bottleneck bandwidth. At the end of the CC slow
            start phase, the value of cwnd can be significantly larger than
            the minimum value needed to utilise the path (i.e., cwnd
            overshoot). In most case, the cwnd finally converges to a stable
            value after a few more RTTs. It would be inappropriate to use an
            overshoot in the cwnd as a basis for estimating the bottleneck
            bandwidth. NOTE: One mitigation could be to further restrict to
            only a fraction (e.g., 1/2) of the previously used cwnd; another
            mitigation might be to calculate the bottleneck bandwidth based on
            the flight_size or an averaged cwnd.<a href="#section-5.2-2.4" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.2-2.5">Preventing Starvation of New Flows: It would not be appropriate
            to fully use a bottleneck bandwidth estimate based on a previous
            measurement of capacity, because new flows might have started
            using the available capacity since that measurement was made. The
            mitigation could be to restrict to only a fraction (e.g., 1/2) of
            the previously used cwnd.<a href="#section-5.2-2.5" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-5.2-3">There are several solutions to mitigate the impact of changes in
        network conditions:<a href="#section-5.2-3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.2-4.1">Rationale #1 - Solution #1 : When resuming a session, restore
            the current_bb and current_rtt from the saved_bb and saved_rtt
            parameters estimated from a previous connection.<a href="#section-5.2-4.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.2-4.2">Rationale #1 - Solution #2 : When resuming a session, implement
            a safety check to measure avoid using the saved_bb and saved_rtt
            parameters to cause congestion over the path. In this case, the
            current_bb and current_rtt might not be set directly to the
            saved_bb and saved_rtt: the server might wait for the completion
            of the safety check before this is done.<a href="#section-5.2-4.2" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-5.2-5"><a href="#sec-safety_guide" class="xref">Section 6</a> describes various
        approaches for Rationale #1 - Solution #2.<a href="#section-5.2-5" class="pilcrow">¶</a></p>
</section>
<section id="section-5.3">
        <h3 id="name-rationale-2-malicious-clien">
<a href="#section-5.3" class="section-number selfRef">5.3. </a><a href="#name-rationale-2-malicious-clien" class="section-name selfRef">Rationale #2: Malicious clients</a>
        </h3>
<p id="section-5.3-1">The server MUST check the integrity of the saved_rtt and saved_bb
        parameters received from a client.<a href="#section-5.3-1" class="pilcrow">¶</a></p>
<p id="section-5.3-2">There are several solutions to avoid attacks by malicious clients:<a href="#section-5.3-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.3-3.1">Rationale #2 - Solution #1 : The server stores a local estimate
            of the bottleneck bandwidth and RTT parameters as the saved_bb and
            saved_rtt.<a href="#section-5.3-3.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.3-3.2">Rationale #2 - Solution #2 : The server sends the estimate of
            the bottleneck bandwidth and RTT parameters to the client as the
            saved_bb and saved_rtt in a block of information that is
            authenticated. This information also could be encrypted by the
            server. The client resends the same information when resuming a
            connection. The server can use its local key information to
            authenticate the information, without needing to keep a local
            copy.<a href="#section-5.3-3.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-5.3-3.3">Rationale #2 - Solution #3 : This approach is the same as
            above, except that the server sends an estimate of the saved_rtt
            and saved_bb parameters in a form that may be read by the client.
            The information might not be encrypted, or the information might
            be duplicated outside of the encrypted block. This allows a client
            to read, but not modify, the saved_rtt and saved_bb parameters and
            could enable a client to decide whether it thinks the new
            parameters are appropriate, based on client-side information about
            the network conditions, connectivity, or needs of the session
            using the connection.<a href="#section-5.3-3.3" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-5.3-4"><a href="#sec-implem" class="xref">Appendix A</a> describes various implementation
        approaches for each of these solutions using local storage ( <a href="#sec-local_storage" class="xref">Appendix A.2</a> for Rationale #2 - Solution #1),
        NEW_TOKEN Frame ( <a href="#sec-using_new_token" class="xref">Appendix A.3</a> for
        Rationale #2 - Solution #2), BDP extension Frame ( <a href="#sec-bdp_frame_section" class="xref">Appendix A.4</a> for Rationale #2 - Solution
        #3).<a href="#section-5.3-4" class="pilcrow">¶</a></p>
</section>
<div id="sec_discuss_bdp_default">
<section id="section-5.4">
        <h3 id="name-trade-off-between-the-diffe">
<a href="#section-5.4" class="section-number selfRef">5.4. </a><a href="#name-trade-off-between-the-diffe" class="section-name selfRef">Trade-off between the different solutions</a>
        </h3>
<p id="section-5.4-1">This section provides a description of several implementation
        options and discusses their respective advantages and drawbacks.<a href="#section-5.4-1" class="pilcrow">¶</a></p>
<p id="section-5.4-2">While there are some discussions for the solutions regarding
        Rationale #2, the server MUST consider Rationale #1 - Solution #2 and
        avoid Rationale #1 - Solution #1: the server MUST implement a safety
        check to measure whether the saved BDP parameters (i.e. saved_rtt and
        saved_bb) are relevant or check that their usage would not cause
        excessive congestion over the path.<a href="#section-5.4-2" class="pilcrow">¶</a></p>
<p id="section-5.4-3">Security consideration are discussed in <a href="#sec-security" class="xref">Section 9</a> .<a href="#section-5.4-3" class="pilcrow">¶</a></p>
<section id="section-5.4.1">
          <h4 id="name-interoperability-and-use-ca">
<a href="#section-5.4.1" class="section-number selfRef">5.4.1. </a><a href="#name-interoperability-and-use-ca" class="section-name selfRef">Interoperability and Use Cases</a>
          </h4>
<p id="section-5.4.1-1">A server that stores a resumption ticket for each client to
          protect against replay on a third party IP, it could also store the
          IP address (i.e., saved_client_ip) and BDP parameters (i.e.,
          saved_rtt and saved_bb) of the previous session of the client.<a href="#section-5.4.1-1" class="pilcrow">¶</a></p>
<p id="section-5.4.1-2">When the BDP Frame extension is used, locally stored BDP
          parameters at the server can provide a cross-check of the BDP
          parameters sent by a client. The server can anyway enable a safe
          jump, but without the BDP Frame extension. However, using the
          parameters enables a client to choose whether to request this or
          not, enabling it to utilize local knowledge of the network
          conditions, connectivity, or session requirements.<a href="#section-5.4.1-2" class="pilcrow">¶</a></p>
<p id="section-5.4.1-3">XXX-Editor-note: Text to be improved: Storing local values
          related to the BDP would help improve the ingress for 0-RTT
          connections, however, not using a BDP Frame extension could reduce
          the interest of the approach where (1) the client knows the BDP
          estimation at the server, (2) the client decides to accept or reject
          ingress optimization, (3) the client tunes application level
          requests.<a href="#section-5.4.1-3" class="pilcrow">¶</a></p>
</section>
<section id="section-5.4.2">
          <h4 id="name-summary">
<a href="#section-5.4.2" class="section-number selfRef">5.4.2. </a><a href="#name-summary" class="section-name selfRef">Summary</a>
          </h4>
<p id="section-5.4.2-1"> Local storage of values can be secure and the BDP Frame
          extension provides more information to the client and more
          interoperability. The <a href="#fig-summary" class="xref">Figure 1</a> provides a
          summary of the advantages and drawbacks of each approach.<a href="#section-5.4.2-1" class="pilcrow">¶</a></p>
<span id="name-comparing-solutions"></span><div id="fig-summary">
<figure id="figure-1">
            <div class="alignLeft art-text artwork" id="section-5.4.2-2.1">
<pre>
+---------+-----------+----------------+---------------+-----------+
|Rationale| Solution  |    Advantage   |    Drawback   |  Comment  |
+---------+-----------+----------------+---------------+-----------+
|#1       |#1         |                |               |           |
|Variable |set        |Ingress optim.  |Risk of adding |MUST NOT   |
|Network  |current_*  |                | congestion    |implement  |
|         |to saved_* |                |               |           |
|         +-----------+----------------+---------------+-----------+
|         |#2         |                |               |           |
|         |Implement  |Reduce risk of  |Negative impact|MUST       |
|         |safety     | adding         | on ingress    |implement  |
|         |check      | congestion     | optim.        |Section 3  |
+---------+-----------+----------------+---------------+-----------+
|#2       |#1         |                |               |           |
|Malicious|Local      |Enforced        |Client unable  |           |
|client   |storage    | security       | to decide to  |           |
|         |           |                | reject        |           |
|         |           |                |Malicious      |           |
|         |           |                | server could  |           |
|         |           |                | fill client's |           |
|         |           |                | buffer        |           |
|         |           |                |Limited        |           |
|         |           |                | use-cases     |Section 4.2|
|         +-----------+----------------+---------------+-----------+
|         |#2         |                |               |           |
|         |NEW_TOKEN  |Save resource   |Malicious      |           |
|         |           | at server      | client could  |           |
|         |           |Opaque token    | change token  |           |
|         |           | protected      | even if       |           |
|         |           |                | protected     |           |
|         |           |                |Malicious      |           |
|         |           |                | server could  |           |
|         |           |                | fill client's |           |
|         |           |                | buffer        |           |
|         |           |                |Server may not |           |
|         |           |                | trust client  |Section 4.3|
|         +-----------+----------------+---------------+-----------+
|         |#3         |                |               |           |
|         |BDP        |Extended        |Malicious      |           |
|         |extension  | use-cases      | client could  |           |
|         |           |Save resource   | change BDP    |           |
|         |           | at server      | even if       |           |
|         |           |Client can      | protected     |           |
|         |           | read and decide|Server may not |           |
|         |           | to reject      | trust client  |           |
|         |           |BDP extension   |               |           |
|         |           | protected      |               |           |
|         |           |                |               |Section 4.4|
+---------+-----------+----------------+---------------+-----------+

XXX-Editor-Note: Need to clarify the text around changing
the authenticated token.

</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-comparing-solutions" class="selfRef">Comparing solutions</a>
            </figcaption></figure>
</div>
</section>
</section>
</div>
</section>
</div>
<div id="sec-safety_guide">
<section id="section-6">
      <h2 id="name-safety-guidelines">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-safety-guidelines" class="section-name selfRef">Safety Guidelines</a>
      </h2>
<p id="section-6-1">The following safety guidelines refer to the labelling defined in
      <a href="#sec-phase" class="xref">Section 4</a>.<a href="#section-6-1" class="pilcrow">¶</a></p>
<p id="section-6-2">The safety guidelines are designed to mitigate the risk that a server
      adds excessive congestion to an already congested path. The following
      mechanisms help in fulfilling this objective:<a href="#section-6-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6-3.1">(observation phase) The server SHOULD NOT store and/or send
          information related to a previously estimated bottleneck bandwidth
          (saved_bb) (see <a href="#sec-terms_def" class="xref">Section 2.2</a> for more
          details on bottleneck bandwidth definition), if the cwnd is not at
          least four times larger than the IW.<a href="#section-6-3.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-6-3.2">(reconnaissance phase) The server MUST NOT send more than the
          recommended maximum IW (recom_iw) in the first RTT of transmitting
          data <span>[<a href="#RFC9000" class="xref">RFC9000</a>]</span>. (When used in a controlled
          network, additional information about local path characteristics
          could be known that might be used to configure a non-standard
          IW).<a href="#section-6-3.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-6-3.3">(reconnaissance phase) The server MUST compare the measured
          transport parameters (in particular current_rtt) of the 0-RTT
          connection with those of the 1-RTT connection (in particular
          saved_rtt). The method MUST NOT be used when the path fails to be
          validated;<a href="#section-6-3.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-6-3.4">(unvalidated phase) The server MUST NOT use the parameters unless
          the first IW packets when packets are detected as lost or
          acknowledgements indicate the packets were ECN CE-marked. These are
          indication of potential congestion and therefore the method MUST NOT
          be used;<a href="#section-6-3.4" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-6-3.5">(unvalidated phase) The server MUST implement the retreat method
          when packets are detected as lost or acknowledgements indicate the
          packets were ECN CE-marked. These are indication of potential
          congestion and therefore the method MUST NOT be used.<a href="#section-6-3.5" class="pilcrow">¶</a>
</li>
      </ul>
<p id="section-6-4">The proposed mechanisms SHOULD be limited by any rate-limitation
      mechanisms of QUIC, such as flow control mechanisms or amplification
      attack prevention. In particular, it may be necessary to issue proactive
      MAX_DATA frames to increase the flow control limits of a connection. In
      particular, the maximum number of packets that can be sent without
      acknowledgements needs to be chosen to avoid the creation and the
      increase of congestion for the path.<a href="#section-6-4" class="pilcrow">¶</a></p>
<p id="section-6-5">This extension MUST NOT provide an opportunity for the current
      connection to be a vector of an amplification attack. The address
      validation process, used to prevent amplification attacks, SHOULD be
      performed <span>[<a href="#RFC9000" class="xref">RFC9000</a>]</span>.<a href="#section-6-5" class="pilcrow">¶</a></p>
<p id="section-6-6">XXX-Editor-note: This probbaly should be a range rather than an
      inequality (current_rtt &lt; 1.2*saved_rtt).<a href="#section-6-6" class="pilcrow">¶</a></p>
<p id="section-6-7">The following mechanisms could be implemented:<a href="#section-6-7" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6-8.1">
          <p id="section-6-8.1.1">Exploit a standard IW:<a href="#section-6-8.1.1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-6-8.1.2">
<li id="section-6-8.1.2.1">The server sends the first data packet using the IW - this is
              a safe starting point for any path where there is no path
              information or congestion control information. This avoids
              adding excessive congestion to a path;<a href="#section-6-8.1.2.1" class="pilcrow">¶</a>
</li>
            <li id="section-6-8.1.2.2">The sender monitors the reception of the IW data. If the path
              characteristics resemble those of a recent previous session from
              to the same server (i.e., current_rtt &lt; 1.2*saved_rtt) and
              all data was acknowledged without reported congestion), the
              method permits the sender to utilise the saved_bb as an input to
              adapt current_bb to rapidly determine a new safe rate;<a href="#section-6-8.1.2.2" class="pilcrow">¶</a>
</li>
            <li id="section-6-8.1.2.3">The sender needs to avoid a burst of packets resulting from a
              step-increase in the congestion window <span>[<a href="#RFC9000" class="xref">RFC9000</a>]</span>. Pacing the packets as a function of
              the current_rtt can provide this additional safety during the
              period in which the CWND is increased by the method.<a href="#section-6-8.1.2.3" class="pilcrow">¶</a>
</li>
          </ol>
</li>
        <li class="normal" id="section-6-8.2">
          <p id="section-6-8.2.1">Identify a relevant pacing rhythm:<a href="#section-6-8.2.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6-8.2.2.1">
              <p id="section-6-8.2.2.1.1">The server estimates the pacing rhythm using saved_rtt and
              saved_bb. The Inter-packet Transmission Time (ITT) is determined
              by the ratio between the current Maximum Message Size (MMS) and
              the ratio between the saved_bb and saved_rtt. A tunable safety
              margin can avoid sending more than a recommended maximum IW
              (recom_iw):<a href="#section-6-8.2.2.1.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6-8.2.2.1.2.1">current_iw = min(recom_iw,saved_bb)<a href="#section-6-8.2.2.1.2.1" class="pilcrow">¶</a>
</li>
                <li class="normal" id="section-6-8.2.2.1.2.2">ITT = MSS/(current_iw/saved_rtt)<a href="#section-6-8.2.2.1.2.2" class="pilcrow">¶</a>
</li>
              </ul>
</li>
            <li class="normal" id="section-6-8.2.2.2">When the successful receipt of the IW data is acknowledged,
              the server returns to a standard slow-start mechanism.<a href="#section-6-8.2.2.2" class="pilcrow">¶</a>
</li>
          </ul>
</li>
        <li class="normal" id="section-6-8.3">
          <p id="section-6-8.3.1">Tune slow-start mechanisms: After transport parameters are set to
          a previously estimated bottleneck bandwidth, if the slow-start
          mechanisms continue, the sender can then overshoot the bottleneck
          capacity. This can occur even when using the safety check described
          in this section.<a href="#section-6-8.3.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6-8.3.2.1">For NewReno and CUBIC, it is recommended to exit slow-start
              and enter the congestion avoidance phase.<a href="#section-6-8.3.2.1" class="pilcrow">¶</a>
</li>
            <li class="normal" id="section-6-8.3.2.2">For BBR, it is recommended to enter the "probe bandwidth"
              state.<a href="#section-6-8.3.2.2" class="pilcrow">¶</a>
</li>
          </ul>
</li>
      </ul>
<p id="section-6-9">This follows the idea presented in <span>[<a href="#RFC4782" class="xref">RFC4782</a>]</span>,
      <span>[<a href="#I-D.irtf-iccrg-sallantin-initial-spreading" class="xref">I-D.irtf-iccrg-sallantin-initial-spreading</a>]</span> and
      <span>[<a href="#CONEXT15" class="xref">CONEXT15</a>]</span>.<a href="#section-6-9" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec-acknowledgments">
<section id="section-7">
      <h2 id="name-acknowledgments">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="section-7-1">The authors would like to thank Gabriel Montenegro, Patrick McManus,
      Ian Swett, Igor Lubashev, Robin Marx, Roland Bless and Franklin Simo for
      their fruitful comments on earlier versions of this document.<a href="#section-7-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec-IANA">
<section id="section-8">
      <h2 id="name-iana-considerations">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-8-1">TBD: Text is required to register the BDP Frame and the enable_bdp
      transport parameter. Parameters are registered using the procedure
      defined in <span>[<a href="#RFC9000" class="xref">RFC9000</a>]</span>.<a href="#section-8-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec-security">
<section id="section-9">
      <h2 id="name-security-considerations">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-9-1">Security considerations for QUIC are discussed in <a href="#sec-safety_guide" class="xref">Section 6</a><a href="#section-9-1" class="pilcrow">¶</a></p>
<p id="section-9-2">The client can send information related to the saved_rtt and saved_bb
      to the server with the BDP Frame extension using either Rationale #2 -
      Solution #2 or Rationale #2 - Solution #3. However, the server SHOULD
      NOT trust the client. Indeed, even if 0-RTT packets containing the BDP
      Frame are encrypted, a client could modify the values within the
      extension and encrypt the 0-RTT packet. Authentication mechanisms might
      not guarantee that the values are safe. It is not an easy operation for
      a client to modify authenticated or encrypted data without this being
      detected by a server. Modification could be realized by malicious
      clients. One way to avoid this is for a server to also store the
      saved_rtt and saved_bb parameters.<a href="#section-9-2" class="pilcrow">¶</a></p>
<p id="section-9-3">A malicious client might modify the saved_bb parameter to convince
      the server to use a larger CWND than appropriate. Using the algorithms
      proposed in <a href="#sec-safety_guide" class="xref">Section 6</a>, the server may
      reduce any intended harm and can check that part of the information
      provided by the client are valid.<a href="#section-9-3" class="pilcrow">¶</a></p>
<p id="section-9-4">Storing the BDP parameters locally at the server reduces the
      associated risks by allowing the client to transmit information related
      to the BDP of the path in the case of a malicious client trying to break
      the encryption mechanism that it had received.<a href="#section-9-4" class="pilcrow">¶</a></p>
<p id="section-9-5"></p>
</section>
</div>
<section id="section-10">
      <h2 id="name-references">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-10.1">
        <h3 id="name-normative-references">
<a href="#section-10.1" class="section-number selfRef">10.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4782">[RFC4782]</dt>
        <dd>
<span class="refAuthor">Floyd, S.</span>, <span class="refAuthor">Allman, M.</span>, <span class="refAuthor">Jain, A.</span>, and <span class="refAuthor">P. Sarolahti</span>, <span class="refTitle">"Quick-Start for TCP and IP"</span>, <span class="seriesInfo">RFC 4782</span>, <span class="seriesInfo">DOI 10.17487/RFC4782</span>, <time datetime="2007-01" class="refDate">January 2007</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4782">https://www.rfc-editor.org/info/rfc4782</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC6349">[RFC6349]</dt>
        <dd>
<span class="refAuthor">Constantine, B.</span>, <span class="refAuthor">Forget, G.</span>, <span class="refAuthor">Geib, R.</span>, and <span class="refAuthor">R. Schrage</span>, <span class="refTitle">"Framework for TCP Throughput Testing"</span>, <span class="seriesInfo">RFC 6349</span>, <span class="seriesInfo">DOI 10.17487/RFC6349</span>, <time datetime="2011-08" class="refDate">August 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6349">https://www.rfc-editor.org/info/rfc6349</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8446">[RFC8446]</dt>
        <dd>
<span class="refAuthor">Rescorla, E.</span>, <span class="refTitle">"The Transport Layer Security (TLS) Protocol Version 1.3"</span>, <span class="seriesInfo">RFC 8446</span>, <span class="seriesInfo">DOI 10.17487/RFC8446</span>, <time datetime="2018-08" class="refDate">August 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8446">https://www.rfc-editor.org/info/rfc8446</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9000">[RFC9000]</dt>
        <dd>
<span class="refAuthor">Iyengar, J., Ed.</span> and <span class="refAuthor">M. Thomson, Ed.</span>, <span class="refTitle">"QUIC: A UDP-Based Multiplexed and Secure Transport"</span>, <span class="seriesInfo">RFC 9000</span>, <span class="seriesInfo">DOI 10.17487/RFC9000</span>, <time datetime="2021-05" class="refDate">May 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9000">https://www.rfc-editor.org/info/rfc9000</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9002">[RFC9002]</dt>
      <dd>
<span class="refAuthor">Iyengar, J., Ed.</span> and <span class="refAuthor">I. Swett, Ed.</span>, <span class="refTitle">"QUIC Loss Detection and Congestion Control"</span>, <span class="seriesInfo">RFC 9002</span>, <span class="seriesInfo">DOI 10.17487/RFC9002</span>, <time datetime="2021-05" class="refDate">May 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9002">https://www.rfc-editor.org/info/rfc9002</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-10.2">
        <h3 id="name-informative-references">
<a href="#section-10.2" class="section-number selfRef">10.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="CONEXT15">[CONEXT15]</dt>
        <dd>
<span class="refAuthor">Li, Q.</span>, <span class="refAuthor">Dong, M.</span>, and <span class="refAuthor">P B. Godfrey</span>, <span class="refTitle">"Halfback: Running Short Flows Quickly and Safely"</span>, <span class="seriesInfo">ACM CoNEXT </span>, <time datetime="2015" class="refDate">2015</time>. </dd>
<dd class="break"></dd>
<dt id="I-D.cardwell-iccrg-bbr-congestion-control">[I-D.cardwell-iccrg-bbr-congestion-control]</dt>
        <dd>
<span class="refAuthor">Cardwell, N.</span>, <span class="refAuthor">Cheng, Y.</span>, <span class="refAuthor">Yeganeh, S. H.</span>, <span class="refAuthor">Swett, I.</span>, and <span class="refAuthor">V. Jacobson</span>, <span class="refTitle">"BBR Congestion Control"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-cardwell-iccrg-bbr-congestion-control-01</span>, <time datetime="2021-11-07" class="refDate">7 November 2021</time>, <span>&lt;<a href="https://www.ietf.org/archive/id/draft-cardwell-iccrg-bbr-congestion-control-01.txt">https://www.ietf.org/archive/id/draft-cardwell-iccrg-bbr-congestion-control-01.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.irtf-iccrg-sallantin-initial-spreading">[I-D.irtf-iccrg-sallantin-initial-spreading]</dt>
        <dd>
<span class="refAuthor">Sallantin, R.</span>, <span class="refAuthor">Baudoin, C.</span>, <span class="refAuthor">Arnal, F.</span>, <span class="refAuthor">Dubois, E.</span>, <span class="refAuthor">Chaput, E.</span>, and <span class="refAuthor">A. Beylot</span>, <span class="refTitle">"Safe increase of the TCP's Initial Window Using Initial Spreading"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-irtf-iccrg-sallantin-initial-spreading-00</span>, <time datetime="2014-01-15" class="refDate">15 January 2014</time>, <span>&lt;<a href="https://www.ietf.org/archive/id/draft-irtf-iccrg-sallantin-initial-spreading-00.txt">https://www.ietf.org/archive/id/draft-irtf-iccrg-sallantin-initial-spreading-00.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="IJSCN">[IJSCN]</dt>
        <dd>
<span class="refAuthor">Thomas, L.</span>, <span class="refAuthor">Dubois, E.</span>, <span class="refAuthor">Kuhn, N.</span>, and <span class="refAuthor">E. Lochin</span>, <span class="refTitle">"Google QUIC performance over a public SATCOM access"</span>, <span class="seriesInfo">International Journal of Satellite Communications and Networking 10.1002/sat.1301</span>, <time datetime="2019" class="refDate">2019</time>. </dd>
<dd class="break"></dd>
<dt id="MAPRG111">[MAPRG111]</dt>
        <dd>
<span class="refAuthor">Kuhn, N.</span>, <span class="refAuthor">Stephan, E.</span>, <span class="refAuthor">Fairhurst, G.</span>, <span class="refAuthor">Jones, T.</span>, and <span class="refAuthor">C. Huitema</span>, <span class="refTitle">"Feedback from using QUIC's 0-RTT-BDP extension over SATCOM public access"</span>, <span class="seriesInfo">IETF 111 - MAPRG meeting </span>, <time datetime="2022" class="refDate">2022</time>. </dd>
<dd class="break"></dd>
<dt id="RFC5783">[RFC5783]</dt>
        <dd>
<span class="refAuthor">Welzl, M.</span> and <span class="refAuthor">W. Eddy</span>, <span class="refTitle">"Congestion Control in the RFC Series"</span>, <span class="seriesInfo">RFC 5783</span>, <span class="seriesInfo">DOI 10.17487/RFC5783</span>, <time datetime="2010-02" class="refDate">February 2010</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5783">https://www.rfc-editor.org/info/rfc5783</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8867">[RFC8867]</dt>
        <dd>
<span class="refAuthor">Sarker, Z.</span>, <span class="refAuthor">Singh, V.</span>, <span class="refAuthor">Zhu, X.</span>, and <span class="refAuthor">M. Ramalho</span>, <span class="refTitle">"Test Cases for Evaluating Congestion Control for Interactive Real-Time Media"</span>, <span class="seriesInfo">RFC 8867</span>, <span class="seriesInfo">DOI 10.17487/RFC8867</span>, <time datetime="2021-01" class="refDate">January 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8867">https://www.rfc-editor.org/info/rfc8867</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC9040">[RFC9040]</dt>
      <dd>
<span class="refAuthor">Touch, J.</span>, <span class="refAuthor">Welzl, M.</span>, and <span class="refAuthor">S. Islam</span>, <span class="refTitle">"TCP Control Block Interdependence"</span>, <span class="seriesInfo">RFC 9040</span>, <span class="seriesInfo">DOI 10.17487/RFC9040</span>, <time datetime="2021-07" class="refDate">July 2021</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc9040">https://www.rfc-editor.org/info/rfc9040</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="sec-implem">
<section id="appendix-A">
      <h2 id="name-implementation-consideratio">
<a href="#appendix-A" class="section-number selfRef">Appendix A. </a><a href="#name-implementation-consideratio" class="section-name selfRef">Implementation Considerations</a>
      </h2>
<div id="sec-bdp_frame">
<section id="appendix-A.1">
        <h3 id="name-rationale-behind-the-differ">
<a href="#appendix-A.1" class="section-number selfRef">A.1. </a><a href="#name-rationale-behind-the-differ" class="section-name selfRef">Rationale behind the different implementation options</a>
        </h3>
<p id="appendix-A.1-1">The NewSessionTickets message of TLS can offer a solution. The
        proposal is to add a 'bdp_metada' field in the NewSessionTickets,
        which the client is able to read. The only extension currently defined
        in TLS1.3 that can be seen by the client is max_early_data_size (see
        Section 4.6.1 of <span>[<a href="#RFC8446" class="xref">RFC8446</a>]</span>). However, in the
        general design of QUIC, TLS sessions are managed by a TLS stack.<a href="#appendix-A.1-1" class="pilcrow">¶</a></p>
<p id="appendix-A.1-2">Three distinct approaches are presented: sending an opaque blob to
        the client that the client may return to the server when establishing
        a future new connection (see <a href="#sec-using_new_token" class="xref">Appendix A.3</a>), enabling local storage of the
        BDP infromation (see <a href="#sec-local_storage" class="xref">Appendix A.2</a>) and a
        BDP Frame extension (see <a href="#sec-bdp_frame_section" class="xref">Appendix A.4</a>).<a href="#appendix-A.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec-local_storage">
<section id="appendix-A.2">
        <h3 id="name-independent-local-storage-o">
<a href="#appendix-A.2" class="section-number selfRef">A.2. </a><a href="#name-independent-local-storage-o" class="section-name selfRef">Independent Local Storage of Values</a>
        </h3>
<p id="appendix-A.2-1">This approach independently lets both a client and a server store
        their BDP parameters:<a href="#appendix-A.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A.2-2.1">During a 1-RTT session, the endpoint stores the RTT (as the
            saved_rtt) and bottleneck bandwidth (as the saved_bb) together in
            the session resume ticket. The client can also store the IP
            address of the server;<a href="#appendix-A.2-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="appendix-A.2-2.2">The server maintains a table of previously issued tickets,
            indexed by the random ticket identifier that is used to guarantee
            uniqueness of the Authenticated Encryption with Associated Data
            (AEAD) encryption. Old tokens are removed from the table using the
            Least Recently Used (LRU) logic. For each ticket identifier, the
            table holds the RTT and bottleneck bandwidth (i.e. saved_rtt and
            saved_bb), and also the IP address of the client (i.e.
            saved_client_ip).<a href="#appendix-A.2-2.2" class="pilcrow">¶</a>
</li>
        </ul>
<p id="appendix-A.2-3">During the 0-RTT session, the local endpoint waits for the first
        RTT measurement from the remote endpoint IP address. This is used to
        verify that the current_rtt has not significantly changed from the
        saved_rtt (used as an indication that the BDP information is
        appropriate for the current path).<a href="#appendix-A.2-3" class="pilcrow">¶</a></p>
<p id="appendix-A.2-4">If this RTT is confirmed, the endpoint also verifies that an IW of
        data has been acknowledged without requiring retransmission or
        resulting in an ECN CE-mark. This second check detects whether a path
        is experiencing significant congestion (i.e., where it would not be
        safe to update the cwnd based on the saved_bb). In practice, this
        could be realized by a proportional increase in the cwnd, where the
        increase is (saved_bb/IW)*proportion_of_IW_currently-ACKed.<a href="#appendix-A.2-4" class="pilcrow">¶</a></p>
<p id="appendix-A.2-5">This solution does not allow a client to request the server not to
        use the BDP parameters. If the server does not want to store the
        metrics from previous connections, an equivalent of the
        tcp_no_metrics_save for QUIC may be necessary. This option could be
        negotiated that allows a client to choose whether to use the saved
        information.<a href="#appendix-A.2-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec-using_new_token">
<section id="appendix-A.3">
        <h3 id="name-using-new_token-frames">
<a href="#appendix-A.3" class="section-number selfRef">A.3. </a><a href="#name-using-new_token-frames" class="section-name selfRef">Using NEW_TOKEN frames</a>
        </h3>
<p id="appendix-A.3-1">A server can send a NEW_TOKEN Frame to the client. The token is an
        opaque (encrypyted) blob and the client can not read its content (see
        section 19.7 of <span>[<a href="#RFC9000" class="xref">RFC9000</a>]</span>). The client sends the
        received token in the header of an Initial packet of a later
        connection.<a href="#appendix-A.3-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec-bdp_frame_section">
<section id="appendix-A.4">
        <h3 id="name-bdp-frame">
<a href="#appendix-A.4" class="section-number selfRef">A.4. </a><a href="#name-bdp-frame" class="section-name selfRef">BDP Frame</a>
        </h3>
<p id="appendix-A.4-1">Using BDP Frames, the server could send information relating to the
        path characteristics to the client. The use of the BDP Frame is
        negotiated with the client. The client can read its content. If the
        client agrees with the usage of previous session parameters, it can
        send the BDP Frame back to the server in an Initial packet of a later
        connection.<a href="#appendix-A.4-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="authors-addresses">
<section id="appendix-B">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Nicolas Kuhn</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:nicolas.kuhn.ietf@gmail.com" class="email">nicolas.kuhn.ietf@gmail.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Emile Stephan</span></div>
<div dir="auto" class="left"><span class="org">Orange</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:emile.stephan@orange.com" class="email">emile.stephan@orange.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Godred Fairhurst</span></div>
<div dir="auto" class="left"><span class="org">University of Aberdeen</span></div>
<div dir="auto" class="left"><span class="street-address">Department of Engineering<br>Fraser Noble Building</span></div>
<div dir="auto" class="left"><span class="locality">Aberdeen</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:gorry@erg.abdn.ac.uk" class="email">gorry@erg.abdn.ac.uk</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Tom Jones</span></div>
<div dir="auto" class="left"><span class="org">University of Aberdeen</span></div>
<div dir="auto" class="left"><span class="street-address">Department of Engineering<br>Fraser Noble Building</span></div>
<div dir="auto" class="left"><span class="locality">Aberdeen</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:tom@erg.abdn.ac.uk" class="email">tom@erg.abdn.ac.uk</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Christian Huitema</span></div>
<div dir="auto" class="left"><span class="org">Private Octopus Inc.</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:huitema@huitema.net" class="email">huitema@huitema.net</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
