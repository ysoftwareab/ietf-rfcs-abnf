<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>RTCP XR Report Block for Burst/Gap Discard metric Reporting</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="RTCP XR Report Block for Burst/Gap Discard metric Reporting">
<meta name="keywords" content="RFC, Request for Comments, I-D, Internet-Draft, Real Time Control Protocol">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Audio/Video Transport Working</td><td class="header">G. Hunt</td></tr>
<tr><td class="header">Group</td><td class="header">BT</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">A. Clark</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">Telchemy</td></tr>
<tr><td class="header">Expires: November 16, 2009</td><td class="header">May 15, 2009</td></tr>
</table></td></tr></table>
<h1><br />RTCP XR Report Block for Burst/Gap Discard metric Reporting<br />draft-ietf-avt-rtcp-xr-burst-gap-discard-02.txt</h1>

<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on November 16, 2009.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents in effect on the date of
publication of this document (http://trustee.ietf.org/license-info).
Please review these documents carefully, as they describe your
rights and restrictions with respect to this document.</p>

<h3>Abstract</h3>

<p>
   This document defines an RTCP XR Report Block that allows the
   reporting of Burst and Gap Discard metrics for use in a range of RTP applications.
        
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#intro">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#intro1">1.1.</a>&nbsp;
Burst and Gap Discard Report Block<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#intro2">1.2.</a>&nbsp;
RTCP and RTCP XR Reports<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#intro3">1.3.</a>&nbsp;
Performance Metrics Framework<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#intro4">1.4.</a>&nbsp;
Applicability<br />
<a href="#definitions">2.</a>&nbsp;
Definitions<br />
<a href="#blockdef">3.</a>&nbsp;
Burst/Gap Discard Block<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#blockdef1">3.1.</a>&nbsp;
Report Block Structure<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#blockdef2">3.2.</a>&nbsp;
Definition of Fields in Burst/Gap Discard Report Block<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#calcs">3.3.</a>&nbsp;
Derived metrics based on reported metrics<br />
<a href="#anchor1">4.</a>&nbsp;
Considerations for Voice-over-IP applications<br />
<a href="#sdp">5.</a>&nbsp;
SDP Signaling<br />
<a href="#anchor2">6.</a>&nbsp;
IANA Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">6.1.</a>&nbsp;
New RTCP XR Block Type value<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">6.2.</a>&nbsp;
New RTCP XR SDP Parameter<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">6.3.</a>&nbsp;
Contact information for registrations<br />
<a href="#anchor6">7.</a>&nbsp;
Security Considerations<br />
<a href="#anchor7">8.</a>&nbsp;
Contributors<br />
<a href="#anchor8">9.</a>&nbsp;
Changes from previous version<br />
<a href="#rfc.references1">10.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">10.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">10.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="intro"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<a name="intro1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Burst and Gap Discard Report Block</h3>

<p>
   This draft defines a new block type to augment those defined
   in <a class='info' href='#RFC3611'>[RFC3611]<span> (</span><span class='info'>Friedman, T., &ldquo;RTP Control Protocol Extended Reports (RTCP XR),&rdquo; November&nbsp;2003.</span><span>)</span></a> for use in a range of RTP applications.
   The new block type supports the reporting of the proportion of packets discarded by the receiver 
due to jitter. The 
discards during discard bursts are reported, together with the number of bursts and additional data allowing 
the calculation of statistical parameters (mean and variance) of the distribution of burst lengths. This block is 
intended to be used in conjunction with <a class='info' href='#DISCARD'>[DISCARD]<span> (</span><span class='info'>Hunt, G., &ldquo;RTCP XR Report Block for Discard metric Reporting,&rdquo; May&nbsp;2009.</span><span>)</span></a> which provides the total packets discarded, and 
on which this block therefore depends. However the metric in <a class='info' href='#DISCARD'>[DISCARD]<span> (</span><span class='info'>Hunt, G., &ldquo;RTCP XR Report Block for Discard metric Reporting,&rdquo; May&nbsp;2009.</span><span>)</span></a> may be used independently of the
metrics in this block.

</p>
<p>
   This block provides information on transient IP problems.
   Burst/Gap metrics are typically used in Cumulative reports however
   MAY be used in Interval reports.
The burstiness of packet discard affects user
experience, may influence any sender strategies to mitigate the problem, and may also have diagnostic value.

</p>
<p>
The metric belongs to the class of transport-related terminal metrics defined in [MONARCH] (work in progress).

</p>
<p>
   The definitions of Burst, Gap, Loss and Discard are consistent with definitions in
   <a class='info' href='#RFC3611'>[RFC3611]<span> (</span><span class='info'>Friedman, T., &ldquo;RTP Control Protocol Extended Reports (RTCP XR),&rdquo; November&nbsp;2003.</span><span>)</span></a>, with the clarification that Loss
   and Discard are defined in terms of frames.  To accomodate the range of jitter buffer
   algorithms and packet discard logic that may be used by implementors,
   the method used to distinguish between bursts and gaps may be an
   equivalent method to that defined in <a class='info' href='#RFC3611'>[RFC3611]<span> (</span><span class='info'>Friedman, T., &ldquo;RTP Control Protocol Extended Reports (RTCP XR),&rdquo; November&nbsp;2003.</span><span>)</span></a>.

</p>
<p>
Instances of this Metrics Block refer by tag to the separate auxiliary Measurement Identity block 
<a class='info' href='#MEASIDENT'>[MEASIDENT]<span> (</span><span class='info'>Hunt, G., &ldquo;RTCP XR Measurement Identifier Block,&rdquo; May&nbsp;2009.</span><span>)</span></a> which contains information 
such as the SSRC of the measured stream, and RTP sequence numbers and time intervals indicating the span of the report.

</p>
<a name="intro2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.2"></a><h3>1.2.&nbsp;
RTCP and RTCP XR Reports</h3>

<p>
   The use of RTCP for reporting is defined in <a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a>. 
   <a class='info' href='#RFC3611'>[RFC3611]<span> (</span><span class='info'>Friedman, T., &ldquo;RTP Control Protocol Extended Reports (RTCP XR),&rdquo; November&nbsp;2003.</span><span>)</span></a> defined an extensible structure for reporting using
   an RTCP Extended Report (XR).  This draft defines
   a new Extended Report block that MUST be used as defined in
   <a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a> and <a class='info' href='#RFC3611'>[RFC3611]<span> (</span><span class='info'>Friedman, T., &ldquo;RTP Control Protocol Extended Reports (RTCP XR),&rdquo; November&nbsp;2003.</span><span>)</span></a>.

</p>
<a name="intro3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.3"></a><h3>1.3.&nbsp;
Performance Metrics Framework</h3>

<p>
   The Performance Metrics Framework <a class='info' href='#PMOLFRAME'>[PMOLFRAME]<span> (</span><span class='info'>Clark, A., &ldquo;Framework for Performance Metric Development,&rdquo; March&nbsp;2009.</span><span>)</span></a> provides guidance on the
   definition and specification of performance metrics.  Metrics
   described in this draft either reference external definitions
   or define metrics generally in accordance with the guidelines
   in <a class='info' href='#PMOLFRAME'>[PMOLFRAME]<span> (</span><span class='info'>Clark, A., &ldquo;Framework for Performance Metric Development,&rdquo; March&nbsp;2009.</span><span>)</span></a>.

</p>
<a name="intro4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.4"></a><h3>1.4.&nbsp;
Applicability</h3>

<p>
This metric is believed to be applicable to the large class of RTP applications which contain jitter buffers.

</p>
<a name="definitions"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Definitions</h3>

<p>Received, Lost and Discarded
</p>
<p></p>
<blockquote class="text">
<p>
   A packet shall be regarded as lost if it fails to arrive within an
   implementation-specific time window.  A packet that arrives within
   this time window but is too early or late to be played out shall be
   regarded as discarded.  A packet shall be classified as one of
   received (or OK), discarded or lost.

</p>
</blockquote>

<p>Bursts and Gaps
</p>
<p></p>
<blockquote class="text">
<p>
   The terms Burst and Gap are used in a manner consistent with that of
   RTCP XR <a class='info' href='#RFC3611'>[RFC3611]<span> (</span><span class='info'>Friedman, T., &ldquo;RTP Control Protocol Extended Reports (RTCP XR),&rdquo; November&nbsp;2003.</span><span>)</span></a>.  

</p>
</blockquote><p>

</p>
<a name="blockdef"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Burst/Gap Discard Block</h3>

<a name="blockdef1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Report Block Structure</h3>
<br /><hr class="insert" />
<a name="blockdata"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
    0               1               2               3
    0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    BT=NBGD    |I| tag | resv  |      block length = 4         |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | Threshold     |         Sum of Burst Durations (ms)           |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |       Packets Discarded in Bursts             |    Total...   |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | ...Packets expected in bursts |    Number of bursts   | Sum of|
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                ...Squares of Burst Durations (ms-squared)     |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: Report Block Structure&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="blockdef2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Definition of Fields in Burst/Gap Discard Report Block</h3>

<p>
   block type (BT): 8 bits

</p>
<p>
</p>
<blockquote class="text">
<p>
         A Burst/Gap Discard Report Block is identified by the constant 
         NBGD. 

</p>
</blockquote><p>

</p>
<p>
[Note to RFC Editor: please replace NBGD with the
         IANA provided RTCP XR block type for this block.]

</p>
<p>
   Interval Metric flag (I): 1 bit

</p>
<p>
</p>
<blockquote class="text">
<p>
This field is used to indicate whether the Burst/Gap Discard metric is an Interval or a Cumulative metric, 
that is, whether the reported value applies to the most 
recent measurement interval duration between successive metrics reports (I=1) (the Interval Duration) or to the accumulation period 
characteristic of cumulative 
measurements (I=0) (the Cumulative Duration). Numerical values for both these intervals are provided in the Measurement Identifier block 
referenced by the tag field below.

</p>
</blockquote><p>

</p>
<p>
   Measurement Identifier association (tag): 3 bits

</p>
<p>
</p>
<blockquote class="text">
<p>
This field is used to identify the Measurement Identifier block <a class='info' href='#MEASIDENT'>[MEASIDENT]<span> (</span><span class='info'>Hunt, G., &ldquo;RTCP XR Measurement Identifier Block,&rdquo; May&nbsp;2009.</span><span>)</span></a> which describes this measurement. The relevant 
Measurement Identifier block has the same tag value as the Burst/Gap Discard block. Note that there may be 
more than one Measurement Identifier block per RTCP packet.

</p>
</blockquote><p>

</p>
<p>
   Reserved (resv): 4 bits

</p>
<p>
</p>
<blockquote class="text">
<p>
These bits are reserved. They SHOULD be set to zero by senders and MUST be ignored by receivers.

</p>
</blockquote><p>

</p>
<p>
   block length: 16 bits

</p>
<p>
</p>
<blockquote class="text">
<p>
The length of this report block in 32-bit words, minus one. For the Burst/Gap Discard block, the block length 
is equal to 4.

</p>
</blockquote><p>

</p>
<p>
Threshold: 8 bits

</p>
<p>
</p>
<blockquote class="text">
<p>
   The Threshold is equivalent to Gmin in <a class='info' href='#RFC3611'>[RFC3611]<span> (</span><span class='info'>Friedman, T., &ldquo;RTP Control Protocol Extended Reports (RTCP XR),&rdquo; November&nbsp;2003.</span><span>)</span></a>, i.e. the number of
   successive frames that must not be discarded prior to
   and following a discarded frame in order for this 
   discarded frame to be regarded as part of a gap.

</p>
</blockquote><p>

</p>
<p>
Sum of Burst Durations (ms): 24 bits

</p>
<p>
</p>
<blockquote class="text">
<p>
   The total duration of bursts of discarded frames in the period of the report (Interval or Cumulative).

</p>
<p>
   If the measured value exceeds 0xFFFFFD, the value 0xFFFFFE SHOULD be
   reported to indicate an over-range measurement.  If the measurement
   is unavailable, the value 0xFFFFFF SHOULD be reported.

</p>
</blockquote><p>

</p>
<p>
Packets discarded in bursts: 24 bits

</p>
<p>
</p>
<blockquote class="text">
<p>
   The total number of packets discarded during discard bursts.

</p>
<p>
   If the measured value exceeds 0xFFFFFD, the value 0xFFFFFE SHOULD
   be reported to indicate an over-range measurement.  If the
   measurement is unavailable, the value 0xFFFFFF SHOULD be reported.

</p>
</blockquote><p>

</p>
<p>
Total packets expected in bursts: 24 bits

</p>
<p>
</p>
<blockquote class="text">
<p>
   The total number of packets expected during discard bursts (that is, the sum of received packets and lost packets).

</p>
<p>
   If the measured value exceeds 0xFFFFFD, the value 0xFFFFFE SHOULD
   be reported to indicate an over-range measurement.  If the
   measurement is unavailable, the value 0xFFFFFF SHOULD be reported.

</p>
</blockquote><p>

</p>
<p>
Number of bursts: 16 bits

</p>
<p>
</p>
<blockquote class="text">
<p>
The number of bursts in the period of the report (Interval or Cumulative).

</p>
<p>
   If the measured value exceeds 0xFFFD, the value 0xFFFE SHOULD be
   reported to indicate an over-range measurement.  If the measurement
   is unavailable, the value 0xFFFF SHOULD be reported.

</p>
</blockquote><p>

</p>
<p>
Sum of Squares of Burst Durations (ms-squared): 36 bits

</p>
<p>
</p>
<blockquote class="text">
<p>
The sum of the squares of burst durations (where individual burst durations are expressed in ms) over in the period of the 
report (Interval or Cumulative). The units for this quantity are milliseconds-squared.

</p>
<p>
   If the measured value exceeds 0xFFFFFFFFD, the value 0xFFFFFFFFE SHOULD be
   reported to indicate an over-range measurement.  If the measurement
   is unavailable, the value 0xFFFFFFFFF SHOULD be reported.

</p>
</blockquote><p>

</p>
<a name="calcs"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
Derived metrics based on reported metrics</h3>

<p>
The metrics described here are intended to be used as described in this section, in conjunction with information from the Measurement 
Identity block 
(which MUST be present in the same RTCP packet as the Burst/Gap Discard block) and also with the metric 
"number of packets discarded" provided in the RTCP XR Discard Block <a class='info' href='#DISCARD'>[DISCARD]<span> (</span><span class='info'>Hunt, G., &ldquo;RTCP XR Report Block for Discard metric Reporting,&rdquo; May&nbsp;2009.</span><span>)</span></a>. The RTCP XR Discard Block 
SHOULD be sent if the Burst/Gap Discard block is sent, but the converse does not apply.

</p>
<p>
The fraction of packets discarded during bursts is the quotient:
Packets Discarded in Bursts / Total Packets expected in Bursts

</p>
<p>
The fraction of packets discarded during gaps is the quotient:
(number of packets discarded - Packets Discarded in Bursts) / (Packets Expected - Total Packets expected in Bursts)

</p>
<p>
where "number of packets discarded" is obtained from the RTCP XR Discard Block <a class='info' href='#DISCARD'>[DISCARD]<span> (</span><span class='info'>Hunt, G., &ldquo;RTCP XR Report Block for Discard metric Reporting,&rdquo; May&nbsp;2009.</span><span>)</span></a> and Packets Expected 
is calculated as the difference between "extended last sequence number" and "extended first sequence number" (Interval or 
Cumulative) provided in the Measurement Identity block <a class='info' href='#MEASIDENT'>[MEASIDENT]<span> (</span><span class='info'>Hunt, G., &ldquo;RTCP XR Measurement Identifier Block,&rdquo; May&nbsp;2009.</span><span>)</span></a> associated with this Burst/Gap Discard block. 

</p>
<p>
The mean burst duration is obtained as the quotient:

</p>
<p>
mean = Sum of Burst Durations / Number of Bursts

</p>
<p>
The variance of the burst duration is obtained using the standard result:

</p>
<p>
var = ( Sum of Squares of Burst Durations - Number of Bursts * mean^2 ) / (Number of Bursts - 1)

</p>
<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Considerations for Voice-over-IP applications</h3>

<p>
This metric block is applicable to a broad range of RTP applications. Where the metric is used with a Voice-overIP (VoIP)
application, the following considerations apply.

</p>
<p>
   RTCP XR views a call as being divided into
   bursts, which are periods during which the 
   discard rate is high enough to cause noticeable call quality
   degradation (generally over 5 percent discard rate), and gaps,
   which are periods during which discarded packets are
   infrequent and hence call quality is generally acceptable.

</p>
<p>
   If Voice Activity Detection is 
used the Burst and Gap Duration shall
   be determined as if silence frames had been sent, i.e. a period of
   silence in excess of Gmin frames MUST terminate a burst condition.

</p>
<p>
   The recommended value 
for the threshold Gmin in <a class='info' href='#RFC3611'>[RFC3611]<span> (</span><span class='info'>Friedman, T., &ldquo;RTP Control Protocol Extended Reports (RTCP XR),&rdquo; November&nbsp;2003.</span><span>)</span></a> results in a Burst being
   a period of time during which the call quality is degraded to a
   similar extent to a typical PCM Severely Errored Second.

</p>
<a name="sdp"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
SDP Signaling</h3>

<p>
   <a class='info' href='#RFC3611'>[RFC3611]<span> (</span><span class='info'>Friedman, T., &ldquo;RTP Control Protocol Extended Reports (RTCP XR),&rdquo; November&nbsp;2003.</span><span>)</span></a> defines the use of SDP (Session Description Protocol) 
   <a class='info' href='#RFC4566'>[RFC4566]<span> (</span><span class='info'>Handley, M., &ldquo;SDP: Session Description Protocol,&rdquo; July&nbsp;2006.</span><span>)</span></a> for signaling the use of XR blocks.  XR blocks MAY be used without
   prior signaling.

</p>
<p>
   This section augments the SDP <a class='info' href='#RFC4566'>[RFC4566]<span> (</span><span class='info'>Handley, M., &ldquo;SDP: Session Description Protocol,&rdquo; July&nbsp;2006.</span><span>)</span></a> attribute "rtcp-xr" defined in 
   <a class='info' href='#RFC3611'>[RFC3611]<span> (</span><span class='info'>Friedman, T., &ldquo;RTP Control Protocol Extended Reports (RTCP XR),&rdquo; November&nbsp;2003.</span><span>)</span></a> by providing an additional value of "xr-format" to signal the use of the report
   block defined in this document. 

</p>
<p>
     rtcp-xr-attrib = "a=" "rtcp-xr" ":" [xr-format *(SP xr-format)] CRLF

</p>
<p>
     (defined in <a class='info' href='#RFC3611'>[RFC3611]<span> (</span><span class='info'>Friedman, T., &ldquo;RTP Control Protocol Extended Reports (RTCP XR),&rdquo; November&nbsp;2003.</span><span>)</span></a>)

</p>
<p>
     xr-format =/ xr-bgd-block

</p>
<p>
     xr-bgd-block   = "brst-gap-dscrd"

</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
IANA Considerations</h3>

<p>
   New block types for RTCP XR are subject to IANA registration.  For
   general guidelines on IANA considerations for RTCP XR, refer to
   [RFC3611].

</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
New RTCP XR Block Type value</h3>

<p>   
   This document assigns the block type value NBGD in the IANA "RTCP XR Block
   Type Registry" to the "Concealed Seconds Metrics Block".

</p>
<p>
[Note to RFC Editor: please replace NBGD with the
         IANA provided RTCP XR block type for this block.]

</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2"></a><h3>6.2.&nbsp;
New RTCP XR SDP Parameter</h3>

<p>
This document also registers a new
   parameter "brst-gap-dscrd" in the "RTCP XR SDP Parameters Registry".

</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.3"></a><h3>6.3.&nbsp;
Contact information for registrations</h3>

<p>
   The contact information for the registrations is:

</p>
<p>
   Geoff Hunt (geoff.hunt@bt.com)

</p>
<p>
   Orion 2 PP3, Adastral Park, Martlesham Heath, Ipswich IP5 3RE, United Kingdom

</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Security Considerations</h3>

<p>
   It is believed that this proposed RTCP XR report block introduces no
   new security considerations beyond those described in <a class='info' href='#RFC3611'>[RFC3611]<span> (</span><span class='info'>Friedman, T., &ldquo;RTP Control Protocol Extended Reports (RTCP XR),&rdquo; November&nbsp;2003.</span><span>)</span></a>.  This block does not provide 
   per-packet statistics so the risk
   to confidentiality documented in Section 7, paragraph 3 of <a class='info' href='#RFC3611'>[RFC3611]<span> (</span><span class='info'>Friedman, T., &ldquo;RTP Control Protocol Extended Reports (RTCP XR),&rdquo; November&nbsp;2003.</span><span>)</span></a> does
   not apply.

</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Contributors</h3>

<p>
   The authors gratefully acknowledge the comments and contributions
   made by Bruce Adams, Philip Arden, Amit Arora, Bob Biskner, Kevin Connor, Claus Dahm, Randy Ethier, 
   Roni Even, Jim Frauenthal, Albert Higashi, Tom Hock, 
   Shane Holthaus, Paul Jones, Rajesh Kumar, Keith Lantz, Mohamed Mostafa, Amy Pendleton, 
   Colin Perkins, Mike Ramalho, 
   Ravi Raviraj,
   Albrecht Schwarz, Tom Taylor, and Hideaki Yamada.

</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Changes from previous version</h3>

<p>
Changed BNF for SDP following Christian Groves' and Tom Taylor's comments (4th and 5th May 2009), now aligned with RFC 5234 section 3.3
"Incremental Alternatives".

</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>10.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="MEASIDENT">[MEASIDENT]</a></td>
<td class="author-text">Hunt, G., &ldquo;RTCP XR Measurement Identifier Block,&rdquo; ID&nbsp;draft-ietf-avt-rtcp-xr-meas-identity-02, May&nbsp;2009.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text">Bradner, S., &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; RFC&nbsp;2119, BCP&nbsp;14, March&nbsp;1997.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3550">[RFC3550]</a></td>
<td class="author-text">Schulzrinne, H., &ldquo;<a href="http://tools.ietf.org/html/rfc3550">RTP: A Transport Protocol for Real-Time Applications</a>,&rdquo; RFC&nbsp;3550, July&nbsp;2003.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3611">[RFC3611]</a></td>
<td class="author-text">Friedman, T., &ldquo;<a href="http://tools.ietf.org/html/rfc3611">RTP Control Protocol Extended Reports (RTCP XR)</a>,&rdquo; RFC&nbsp;3611, November&nbsp;2003.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4566">[RFC4566]</a></td>
<td class="author-text">Handley, M., &ldquo;<a href="http://tools.ietf.org/html/rfc4566">SDP: Session Description Protocol</a>,&rdquo; RFC&nbsp;4566, July&nbsp;2006.</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>10.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="DISCARD">[DISCARD]</a></td>
<td class="author-text">Hunt, G., &ldquo;RTCP XR Report Block for Discard metric Reporting,&rdquo; ID&nbsp;draft-ietf-rtcp-xr-discard-02, May&nbsp;2009.</td></tr>
<tr><td class="author-text" valign="top"><a name="MONARCH">[MONARCH]</a></td>
<td class="author-text">Hunt, G., &ldquo;Monitoring Architectures for RTP,&rdquo; ID&nbsp;draft-hunt-avt-monarch-01, August&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="PMOLFRAME">[PMOLFRAME]</a></td>
<td class="author-text">Clark, A., &ldquo;Framework for Performance Metric Development,&rdquo; ID&nbsp;draft-ietf-pmol-metrics-framework-02, March&nbsp;2009.</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Geoff Hunt</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">BT</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Orion 2 PP3</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Adastral Park</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Martlesham Heath</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Ipswich, Suffolk  IP5 3RE</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">United Kingdom</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+44 1473 651704</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:geoff.hunt@bt.com">geoff.hunt@bt.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Alan Clark</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Telchemy Incorporated</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">2905 Premiere Parkway, Suite 280</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Duluth, GA  30097</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:alan.d.clark@telchemy.com">alan.d.clark@telchemy.com</a></td></tr>
</table>
</body></html>
