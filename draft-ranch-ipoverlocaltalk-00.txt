





Internet Area                                          Christopher Ranch
Internet Draft                                              Novell, Inc.
                                                               July 1992


            Transmitting IP Traffic over LocalTalk Networks


Status of this Memo


     This document is an Internet Draft.  Internet Drafts are working
     documents of the Internet Engineering Task Force (IETF), its Areas,
     and its Working Groups.  Note that other groups may also distribute
     working documents as Internet Drafts.

     Internet Drafts are draft documents valid for a maximum of six
     months.  Internet Drafts may be updated, replaced, or obsoleted by
     other documents at any time.  It is not appropriate to use Internet
     Drafts as reference material or to cite them other than as a
     ``working draft'' or ``work in progress.''  Please check the 1id-
     abstracts.txt listing contained in the internet-drafts Shadow
     Directories on nic.ddn.mil, nnsc.nsf.net, nic.nordu.net,
     ftp.nisc.sri.com, or munnari.oz.au to learn the current status of
     any Internet Draft.

     The expiration date of this draft is [six month + 5 days after
     submission].


1.  Introduction


     This draft document specifies a method of encapsulating Internet
     Protocol (IP) [1] and Address Resolution Protocol (ARP) [2]
     datagrams for transmission across LocalTalk [3].

     It is intended to supplement existing technology for enabling Apple
     Macintoshes with built-in LocalTalk network media to communicate
     with other IP hosts in a TCP/IP internet.


2.  LocalTalk Packet Format


     In 1984, Apple Computers released a network media that came to be
     known as LocalTalk.  It is defined in "Inside AppleTalk, Second
     Edition" [3].  We'll begin with a brief description of that media



Ranch                                                           [Page 1]

Internet draft              IP on LocalTalk                    July 1992


     and associated protocols.


2.1.  LocalTalk Framing


     LocalTalk is a CSMA/CD 230.4 Kbps. SDLC, FM-0 encoded, passive
     media with 8 bit addresses.  Please refer to [3] for a discussion
     of its electrical characteristics and its bit encoding, flags, and
     its method for address acquisition and exchanging data frames.

     LocalTalk supports a total frame length of 603 bytes; 3 bytes
     header, and 600 bytes of data.  No datalink fragmentation is
     supported.  Thus the maximum supportable Maximum Transmission Unit
     (MTU) is 600 octets.

     LocalTalk has an extensible LLAP type space.  $00 is invalid, and
     $01-$0F are reserved by Apple Computer.  IP, ARP, and RARP use LLAP
     types $10, $11, and $12, respectively.  All numbers are in
     hexadecimal.

     The frame format for LocalTalk is shown here.  Except as noted,
     each block represents one octet.


       LocalTalk Frame
      +---------------+
      |    source     |
      +---------------+
      |  destination  |
      +---------------+
      |  LLAP type    |
      +---------------+
      .   data field  .
      .               .
      .   (0 to 600   .
      .     octets)   .
      +---------------+


3.  Transmitting IP, ARP, and RARP Datagrams


     IP, ARP, and RRP datagrams are carried in the client data area of
     LocalTalk packets.  Datalink support places each datagram in an
     appropriate size LocalTalk frame.  IP datagrams larger than 576
     octets, the MTU for LocalTalk, MUST be fragmented. [6]




Ranch                                                           [Page 2]

Internet draft              IP on LocalTalk                    July 1992


     The frame formats for IP, ARP, and RARP in LocalTalk are shown
     here.  Except as noted, each block represents one octet.

     [Shold we align these puppies to even boundries?]


      IP over LocalTalk    ARP over LocalTalk    RARP over LocalTalk
      +---------------+     +---------------+     +---------------+
      |    source     |     |    source     |     |    source     |
      +---------------+     +---------------+     +---------------+
      |  destination  |     |  destination  |     |  destination  |
      +---------------+     +---------------+     +---------------+
      |  type = $10   |     |  type = $11   |     |  type = $12   |
      +---------------+     +---------------+     +---------------+
      .   IP header   .     .  ARP packet   .     .  RARP packet  .
      .   and data    .     .               .     .               .
      .  (MTU = 576   .     . ( 18 octets ) .     . ( 18 octets ) .
      .    octets)    .     .               .     .               .
      +---------------+     +---------------+     +---------------+



4.  IP Address Mappings


     This section explains how each of the three basic 32-bit internet
     address types are mapped to 8-bit LocalTalk addresses.


4.1.  Unicast Addresses


     A unicast IP address is mapped to an 8-bit LocalTalk address using
     ARP as specified in [2].  A later section covers the specific
     values which should be used in ARP packets sent on LocalTalk
     networks.


4.2.  Broadcast Addresses


     All IP broadcast addresses must be mapped to the LocalTalk
     broadcast address of $FF.


4.3.  Multicast Addresses





Ranch                                                           [Page 3]

Internet draft              IP on LocalTalk                    July 1992


     Since LocalTalk provides no support for multicasts, all IP
     multicast addresses must be mapped to the LocalTalk broadcast
     address of $FF.


5.  ARP


     The hardware address length is 1 octet for ARP packets sent over
     LocalTalk networks.  The ARP hardware type for LocalTalk is [z].
     ARP request packets are broadcast by directing them to LocalTalk
     broadcast address, which is $FF.


6.  RARP


     Reverse Address Resolution Protocol [4] packets can also be
     transmitted over LocalTalk.  For the purposes of datalink
     transmission and reception, RARP is identical to ARP and can be
     handled the same way.  There are a few differences to notice,
     however, between RARP when running over LocalTalk, which has a one
     octet hardware address, and Ethernet, which has a six octet
     hardware address.

     First, there are only 255 different hardware addresses for any
     given LocalTalk, while there's an very large number of possible
     Ethernet addresses.  Second, LocalTalk hardware addresses are more
     likely to be duplicated on different LocalTalk networks; Ethernet
     hardware addresses will normally be globally unique.  Third, a
     LocalTalk hardware address is not as constant as an Ethernet
     address: LocalTalk hardware addresses are acquired dynamically, not
     fixed in ROM as they are on Ethernet.


7.  Maximum Transmission Unit


     The maximum IP packet length possible is 600 bytes.  Since 576 is
     the minimum MTU for IP, we will select it to the MTU value, as this
     is commonly implelemted. [6]

     Data that the IP process receives from one of its clients for
     transmission MUST fragment the IP datagram.







Ranch                                                           [Page 4]

Internet draft              IP on LocalTalk                    July 1992


8.  Assigned Numbers


     Apple Computer assigns LocalTalk protocol IDs to identify different
     protocols running on the same LocalTalk medium.  For
     implementations of this draft, you MUST use $10, $11, and $12
     hexadecimal for IP, ARP, and RARP, respectively.

     [What do we need to do to make this a reality?]

     The Internet Assigned Numbers Authority assigns ARP hardware type
     values.  [I hope] It has assigned LocalTalk the ARP hardware type
     of [z]. [7]


9.  Acknowledgements


     This document was mostly lifted from Don Provan's RFC 1201,
     "Transmitting IP Traffic over ARCNET Networks".


10.  References


[1]  Postel, J., "Internet Protocol", RFC-791, Network Information
     Center, SRI, September 1981.

[2]  Plummer, D., "An Ethernet Address Resolution Protocol", RFC-826,
     Network Interformation Center, SRI, November 1982.

[3]  Sidhu, Andrews, and Oppenheimer, "Inside AppleTalk, Second
     Edition", Addison Wesley, May 1990.

[4]  Finlayson, R., et al, "A Reverse Address Resolution Protocol",
     RFC-903,  Network Interformation Center, SRI, June 1984.

[5]  Postel, J., "Transmission Control Protocol", RFC-793, Network
     Information Center, SRI, September 1981.

[6]  Mogul, J., et al, "IP MTU Discovery Options", RFC-1063,  Network
     Interformation Center, SRI, July 1988.

[7]  Reynolds, J., and J. Postel, "Assigned Numbers", RFC-1060, Network
     Information Center, SRI, March 1990.






Ranch                                                           [Page 5]

Internet draft              IP on LocalTalk                    July 1992


11.  Security Considerations


     Security issues are not discussed in this memo.


12.  Expiration Date


     This document will expire on [6 months + 5 days after submission].


13.  Author's Address

     Christopher Ranch
     Novell, Inc.
     2180 Fortune Drive
     San Jose, California, 95131

     Phone: (408)473-8667

     EMail: cranch@novell.com





























Ranch                                                           [Page 6]


