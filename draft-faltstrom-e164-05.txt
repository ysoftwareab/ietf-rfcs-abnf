
Network Working Group                                        P Faltstrom
Internet-Draft                                                     Tele2
Expires: July 25, 2000                                  January 25, 2000


                          E.164 number and DNS
                        draft-faltstrom-e164-05.txt

Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups. Note that
   other groups may also distribute working documents as
   Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six
   months and may be updated, replaced, or obsoleted by other documents
   at any time. It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

     The list of current Internet-Drafts can be accessed at
     http://www.ietf.org/ietf/1id-abstracts.txt

     The list of Internet-Draft Shadow Directories can be accessed at
     http://www.ietf.org/shadow.html.


   This Internet-Draft will expire on July 25, 2000.

Copyright Notice

   Copyright (C) The Internet Society (2000). All Rights Reserved.

Abstract

   This document discusses the use of DNS for storage of E.164 numbers.
   More specifically, how DNS can be used for identifying available
   services connected to one E.164 number. Routing of the actual
   connection using the service selected using these methods is not
   discussed.

   Discussion on this Internet-Draft is to be held on the mailing list
   ietf-e164-dns@imc.org, which is hosted by the Internet Mail
   Consortium. To subscribe, send an email to
   ietf-e164-dns-request@imc.org, with the text "subscribe" as the only
   word in the body of the mail. There is an archive of the mailing
   list at <http://www.imc.org/ietf-e164-dns/>. 






Faltstrom                Expires July 25, 2000                  [Page 1]

Internet-Draft            E.164 number and DNS              January 2000


1. Introduction

   The NAPTR[1] records in DNS[3] can be used for looking up what
   services are available for a specific domainname. This technology is
   used for finding what services exists given an E.164 number. 

1.1 Terminology

   "Must" or "Shall" - Software that does not behave in the manner that
      this document says it must is not conformant to this document. 

   "Should" - Software that does not follow the behavior that this
      document says it should may still be conformant, but is probably
      broken in some fundamental way. 

   "May" - Implementations may or may not provide the described
      behavior, while still remaining conformant to this document. 


































Faltstrom                Expires July 25, 2000                  [Page 2]

Internet-Draft            E.164 number and DNS              January 2000


2. E.164 numbers and DNS

   The domain "e164.int." is being populated in order to provide the
   infrastructure in DNS for storage of E.164 numbers. In order to
   facilitate distributed operations, this domain is divided into
   subdomains. Holders of E.164 numbers which want to be listed in DNS
   should contact the appropriate zone administrator in order to be
   listed, by examining the SOA resource record associated with the
   zone, just like in normal DNS operations. 

   To find the DNS names for a specific E.164 number, the following
   procedure is to be followed: 

   1.  See that the E.164 number is written in its full form, including
       the countrycode IDDD. Example: +46-8-56264000. 

   2.  Remove all characters part from the digits. Example: 46856264000 

   3.  Put dots (".") between each digit. Example:
       4.6.8.5.6.2.6.4.0.0.0 

   4.  Change the order of the digits. Example: 0.0.0.4.6.2.6.5.8.6.4 

   5.  Append the domain "e164.int" to the end. Example:
       0.0.0.4.6.2.6.5.8.6.4.e164.int 


























Faltstrom                Expires July 25, 2000                  [Page 3]

Internet-Draft            E.164 number and DNS              January 2000


3. Identifying available services

   For a record in DNS, the NAPTR record is used for identifying
   available ways of contacting a specific node identified by that
   name. Specifically it can be used for knowing what services exists
   for a specific domainname, including phone numbers by the use of the
   e164.int domain as described above. 

   The identification is using the NAPTR resource record defined for
   use in the URN resolution process, but it can be generalized in a
   way that suits the needs specified in this document. 

3.1 The NAPTR record

   The key fields in the NAPTR RR are order, preference, service,
   flags, regexp, and replacement. For a detailed description, see: 

   o  The order field specifies the order in which records MUST be
      processed when multiple NAPTR records are returned in response to
      a single query. 

   o  The preference field specifies the order in which records SHOULD
      be processed when multiple NAPTR records have the same value of
      "order". 

   o  The service field specifies the resolution protocol and
      resolution service(s) that will be available if the rewrite
      specified by the regexp or replacement fields is applied. 

   o  The flags field contains modifiers that affect what happens in
      the next DNS lookup, typically for optimizing the process. 

   o  The regexp field is one of two fields used for the rewrite rules,
      and is the core concept of the NAPTR record. 

   o  The replacement field is the other field that may be used for the
      rewrite rule. 

   Note that the client applies all the substitutions and performs all
   lookups, they are not performed in the DNS servers. Note also that
   it is the belief that regexps should rarely be used. The replacement
   field seems adequate for the vast majority of situations. 

3.1.1 Specific use of some fields in the NAPTR record

   The flags can be "s" or "a" for the next step in the resolution
   process described in this document. "s" flag means that the next
   lookup should be for SRV records, and "a" that the result of the
   rewrite is a URI. Other flags are the "a" and the "p" flags. 


Faltstrom                Expires July 25, 2000                  [Page 4]

Internet-Draft            E.164 number and DNS              January 2000


   The service supported for a call must be N2R. 

3.1.2 Example of use

   tele2.se.
   ;;        ord pr fl  service            re replacement
    IN NAPTR 100 10 "a" "sip+N2R"      "" "sip:information@tele2.se"
    IN NAPTR 102 10 "a" "smtp+N2R"     "" "mailto:information@tele2.se"

   This describes that the domain tele2.se is preferrable contacted via
   the SIP protocol, secondly via SMTP (for VPIM voicemail over SMTP
   for example). 

   In both cases, the next step in the resolution process is to use the
   resolution mechanism for each of the protocols, (SIP and SMTP) to
   know what node to contact for each. 

3.1.3 When the virtual address is a phone number

   When the target address is a phone number, it is first translated
   into a RR name in the e164.int domain according to the method
   described above. 

   Example: 

   2.8.0.4.6.2.6.5.8.6.4.e164.int.
    IN NAPTR  10 10 "a" "sip+N2R"      "" "sip:paf@swip.net".
    IN NAPTR 102 10 "s" "potscall+N2R" "" _potscall._tcp.paf.swip.net.
    IN NAPTR 102 10 "a" "smtp+N2R"     "" "mailto:paf@swip.net".

   Note that the prefered method is to use the SIP protocol, but the
   result of the rewrite of the NAPTR record is a URI (the "a" flag in
   the NAPTR record). In the case of the protocol SIP, the URI might be
   a SIP URI, which is resolved as described in RFC 2543[4]. 

   The rest of the resolution of the routing is done as described
   above. 

3.1.4 The potscall protocol name

   The potscall protocol name is just a placeholder so one knows that
   the protocol to use is plain old telephony. Because the protocol is
   not run on top of IP, the address to use when addressing the endnode
   has to be a phone number. This address is given back when looking up
   the SRV record for the _potscall._tcp service in the given domain. 

   Example: 

   _potscall._tcp.paf.swip.net.


Faltstrom                Expires July 25, 2000                  [Page 5]

Internet-Draft            E.164 number and DNS              January 2000


    IN SRV  10 10 2.8.0.4.6.2.6.5.8.6.4.e164.int.
    IN SRV  20 10 0.0.0.4.6.2.6.5.8.6.4.e164.int.

















































Faltstrom                Expires July 25, 2000                  [Page 6]

Internet-Draft            E.164 number and DNS              January 2000


4. IANA Considerations

   IANA is to allocate the protocol name "potscall" as a placeholder
   for a protocol name in the SRV record type. No portnumber have to be
   allocated for this protocol name. 














































Faltstrom                Expires July 25, 2000                  [Page 7]

Internet-Draft            E.164 number and DNS              January 2000


5. Security Considerations

   As this system is built on top of DNS, one can not be sure that the
   information one get back from DNS is more secure than any DNS query.
   To solve that, the use of DNSSEC for securing and verifying zones is
   to be recommended. 

   The caching in DNS can make the propagation time for a change take
   the same amount of time as the time to live for the NAPTR and SRV
   records in the zone that is changed. The TTL should because of that
   be kept to a minimum. The use of this in an environment where
   IP-addresses are for hire (i.e. DHCP) must therefore be done very
   carefully. 






































Faltstrom                Expires July 25, 2000                  [Page 8]

Internet-Draft            E.164 number and DNS              January 2000


6. Acknowledgement

   I thank the people at Ericsson, especially Bjorn Larsson, for
   support and ideas, and especially the group which implemented this
   scheme in their lab to see that it worked. I also thank the people
   of ITU-T SG2, Working Party 1/2 (Numbering, Routing, Global Mobility
   and Service Definition) for comments, and Leif Sunnegardh at Tele2
   for information about how SS7 really works. 











































Faltstrom                Expires July 25, 2000                  [Page 9]

Internet-Draft            E.164 number and DNS              January 2000


References

   [1]  Mealling, M and R Daniel, "The Naming Authority Pointer (NAPTR)
        DNS Resource Record", Internet-Draft
        draft-ietf-urn-naptr-rr-03.txt, June 1998.

   [2]  Gulbrandsen, A and R Daniel, "A DNS RR for specifying the
        location of services (DNS SRV)", Internet-Draft
        draft-ietf-urn-naptr-rr-03.txt, June 1998.

   [3]  Mockapetris, P, "Domain names - Implementation and
        Specification", RFC 1035, November 1987.

   [4]  Handley, M, Schulzrinne, H, Schooler, E and J Rosenberg, "SIP:
        Session Initiation Protocol", RFC 2543, March 1999.

Author's Address

   Patrik Faltstrom
   Tele2
   Borgarfjordsgatan 16
   127 61 Kista
   Sweden

   EMail: paf@swip.net
   URI:   http://www.tele2.se

























Faltstrom                Expires July 25, 2000                 [Page 10]

Internet-Draft            E.164 number and DNS              January 2000


Appendix A. Example SIP

   Caller (A) uses a phone, connected to the PSTN network, on number
   +46-8-7525252. 

   Callee (B) is buying a service by provider X, which is telephony
   over the Internet via the use of SIP. 

   Callee want to get reached on the message number +46-76-11223344,
   which is in this example supposed to be directed to the correct SIP
   URI. 

   On the buissness card, the callee have printed the number
   +46-76-11223344 (and probably the SIP URI
   "sip:foobar@x.example.net". 

   Caller reads the buissness card, lifts the handle, and punches the
   number +46-76-11223344. 

   The SCP looks up the NAPTR record in DNS for
   4.4.3.3.2.2.1.1.6.7.6.4.e164.int. The DNS server for Number Inc. has
   the following information in its DNS: 


   4.4.3.3.2.2.1.1.6.7.6.4.e164.int. IN SOA ....
    IN NS ....
    IN NAPTR 100 10 "a" "sip+N2R" ""sip:foobar@x.example.net".

   This shows to the switch that the only way B can be contacted is via
   the SIP protocol, using the URI "sip:foobar@x.example.net". 

   The resolution of the SIP URI, using SRV records etc, is described
   in appendix D of RFC 2543. 


















Faltstrom                Expires July 25, 2000                 [Page 11]

Internet-Draft            E.164 number and DNS              January 2000


Full Copyright Statement

   Copyright (C) The Internet Society (2000). All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implmentation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph
   are included on all such copies and derivative works. However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assigns.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Acknowledgement

   Funding for the RFC editor function is currently provided by the
   Internet Society.



















Faltstrom                Expires July 25, 2000                 [Page 12]

