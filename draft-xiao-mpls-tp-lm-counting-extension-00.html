<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Extension to Packet Loss Measurement for Counting Activation and Deactivation</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Extension to Packet Loss Measurement for Counting Activation and Deactivation">
<meta name="keywords" content="Request for Comments, RFC, Internet Draft, I-D">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">MPLS Working Group</td><td class="header">M. Xiao</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">J. Yang</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">B. Wu</td></tr>
<tr><td class="header">Expires: January 6, 2011</td><td class="header">ZTE Corporation</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">July 5, 2010</td></tr>
</table></td></tr></table>
<h1><br />Extension to Packet Loss Measurement for Counting Activation and Deactivation<br />draft-xiao-mpls-tp-lm-counting-extension-00</h1>

<h3>Abstract</h3>

<p>Packet loss measurement for MPLS Transport Profile (MPLS-TP) PseudoWires, Label Switched Paths, and Sections, is an important Operation, Administration and Maintenance (OAM) function of the MPLS-TP. When this OAM function is performed, counting the transmitted and received packets at both the source MEP and the sink MEP needs to be activated at first. This document specifies OAM packets and protocol mechanism to facilitate the counting activation and deactivation at the sink MEP, and leave out the unnecessary management configuration at the sink MEP when the MPLS-TP connection is bidirectional or there exists an out-of-band return path.
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on January 6, 2011.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">1.1.</a>&nbsp;
Conventions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">1.2.</a>&nbsp;
Abbreviations<br />
<a href="#anchor4">2.</a>&nbsp;
Counting Activation/Deactivation Packet Format<br />
<a href="#anchor5">3.</a>&nbsp;
Counting Activation Operations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">3.1.</a>&nbsp;
Transmitting a Counting Activation Request<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">3.2.</a>&nbsp;
Receiving a Counting Activation Request<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">3.3.</a>&nbsp;
Transmitting a Counting Activation Reply<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">3.4.</a>&nbsp;
Receiving a Counting Activation Reply<br />
<a href="#anchor10">4.</a>&nbsp;
Counting Deactivation Operations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">4.1.</a>&nbsp;
Transmitting a Counting Deactivation Request<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">4.2.</a>&nbsp;
Receiving a Counting Deactivation Request<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">4.3.</a>&nbsp;
Transmitting a Counting Deactivation Reply<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">4.4.</a>&nbsp;
Receiving a Counting Deactivation Reply<br />
<a href="#anchor15">5.</a>&nbsp;
Considerations for Control Plane<br />
<a href="#anchor16">6.</a>&nbsp;
IANA Considerations<br />
<a href="#anchor17">7.</a>&nbsp;
Security Considerations<br />
<a href="#anchor18">8.</a>&nbsp;
Acknowledgements<br />
<a href="#rfc.references1">9.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">9.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">9.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>As defined in MPLS-TP OAM requirements <a class='info' href='#RFC5860'>[RFC5860]<span> (</span><span class='info'>Vigoureux, M., Ward, D., and M. Betts, &ldquo;Requirements for Operations, Administration, and Maintenance (OAM) in MPLS Transport Networks,&rdquo; May&nbsp;2010.</span><span>)</span></a>, "the MPLS-TP OAM toolset MUST provide a function to enable the quantification of packet loss ratio over a PW, LSP, or Section, this function MAY either be performed proactively or on-demand, this function SHOULD be performed between End Points of PWs, LSPs, and Sections and it SHOULD be possible to rely on user traffic to perform this functionality".
</p>
<p>To fulfill the above MPLS-TP OAM requirements with respect to packet loss measurement, the coherent general OAM procedures including configuration considerations, and specific function implementation including OAM packets format are specified in <a class='info' href='#I-D.ietf-mpls-tp-oam-framework'>[I&#8209;D.ietf&#8209;mpls&#8209;tp&#8209;oam&#8209;framework]<span> (</span><span class='info'>Allan, D., Busi, I., Niven-Jenkins, B., Fulignoli, A., Hernandez-Valencia, E., Levrau, L., Mohan, D., Sestito, V., Sprecher, N., Helvoort, H., Vigoureux, M., Weingarten, Y., and R. Winter, &ldquo;MPLS-TP OAM Framework,&rdquo; April&nbsp;2010.</span><span>)</span></a> and <a class='info' href='#I-D.frost-mpls-tp-loss-delay'>[I&#8209;D.frost&#8209;mpls&#8209;tp&#8209;loss&#8209;delay]<span> (</span><span class='info'>Frost, D. and S. Bryant, &ldquo;Packet Loss and Delay Measurement for the MPLS Transport Profile,&rdquo; June&nbsp;2010.</span><span>)</span></a> respectively. From the two documents it can be inferred that when packet loss measurement is performed, counting the transmitted and received packets at both the source MEP and the sink MEP needs to be activated at first, and furthermore the counting should rely on user traffic packets with specific configured PHB. Also note that in this context the source MEP specifies the MEP which will transmit Loss Measurement Query message and the sink MEP specifies the MEP which will reply Loss Measurement Response message.
</p>
<p>This document specifies OAM packets and protocol mechanism to facilitate the counting activation and deactivation at the sink MEP, and leave out the unnecessary management configuration at the sink MEP when the MPLS-TP connection is bidirectional or there exists an out-of-band return path.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Conventions</h3>

<p> The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in RFC 2119 <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.2"></a><h3>1.2.&nbsp;
Abbreviations</h3>

<p> ACH: Associated Channel Header
</p>
<p> G-ACh: Generic Associated Channel
</p>
<p> ICC: ITU Carrier Code
</p>
<p> LM: Loss Measurement
</p>
<p> LSP: Label Switched Path
</p>
<p> MEP: Maintenance Entity Group End Point
</p>
<p> MPLS-TP: MPLS Transport Profile
</p>
<p> OAM: Operations, Administration and Maintenance
</p>
<p> PHB: Per-hop Behavior
</p>
<p> PM: Performance Monitoring
</p>
<p> PW: PseudoWire
</p>
<p> RSVP-TE: Resource Reservation Protocol-Traffic Engineering
</p>
<p> TLV: Type Length Value
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Counting Activation/Deactivation Packet Format</h3>

<p>Just like other MPLS-TP OAM packets, the counting activation/deactivation packets will flow over the Generic Associated Channel (G-ACh) <a class='info' href='#RFC5586'>[RFC5586]<span> (</span><span class='info'>Bocci, M., Vigoureux, M., and S. Bryant, &ldquo;MPLS Generic Associated Channel,&rdquo; June&nbsp;2009.</span><span>)</span></a> of an MPLS-TP connection. The counting activation/deactivation packets are used to perform signaling between the source MEP and the sink MEP of packet loss measurement.
</p>
<p>The format of a counting activation/deactivation packet is shown below.
</p><br /><hr class="insert" />
<a name="Figure_1"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |0 0 0 1|Version|   Reserved    | 0xHH (Packet Loss Measurement)|
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                         ACH TLV Header                        |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                                                               ~
     ~                      Zero or more ACH TLVs                    ~
     ~                                                               |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                                                               ~
     ~            Counting Activation/Deactivation Message           ~
     ~                                                               |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: Counting Activation/Deactivation Packet&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>The Version and Reserved field are always set to 0.
</p>
<p>The Packet Loss Measurement Channel Type is 0xHH (to be assigned by IANA).
</p>
<p>The ACH TLVs may include (but are not limited to) the IF_ID, Global-ID, ICC, and Authentication TLVs.
</p>
<p>The format of a counting activation/deactivation message is shown below.
</p><br /><hr class="insert" />
<a name="Figure_2"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |Version|R| A/D |  Control Code |         Reserved        | PHB |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: Counting Activation/Deactivation Message&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>Version
</p>
<p>&nbsp;&nbsp;&nbsp;The Version Number is currently set to 0.
</p>
<p>R flag
</p>
<blockquote class="text"><dl>
<dt></dt>
<dd>The R flag represents the Request/Reply type. Set to 0 for a Request message; Set to 1 for a Reply message.
</dd>
</dl></blockquote>
<p>A/D
</p>
<blockquote class="text"><dl>
<dt></dt>
<dd>The A/D field represents the Activation/Deactivation type. Set to 0x100 for an Activation message; Set to 0x010 for a Deactivation message; other values are reserved for future use.
</dd>
</dl></blockquote>
<p>Control Code
</p>
<blockquote class="text"><dl>
<dt></dt>
<dd>According to the value of R flag, the Control Code is set as follow.
</dd>
<dt></dt>
<dd>For a Request:
</dd>
</dl></blockquote>
<blockquote class="text"><dl>
<dt></dt>
<dd>0x0: Request (in-band reply requested).  Indicates that this request has been sent over a bidirectional connection and the reply is expected over the same connection.
</dd>
<dt></dt>
<dd>0x1: Request (out-of-band reply requested).  Indicates that the reply is expected over an out-of-band path.
</dd>
</dl></blockquote>
<blockquote class="text"><dl>
<dt></dt>
<dd>For a Reply:
</dd>
</dl></blockquote>
<blockquote class="text"><dl>
<dt></dt>
<dd>0x0: Success.  Indicates that the operation succeeded.
</dd>
<dt></dt>
<dd>0x1: Error.  Indicates that the operation failed.
</dd>
</dl></blockquote>
<p>Reserved
</p>
<blockquote class="text"><dl>
<dt></dt>
<dd>The Reserved bits are for future use and always set to 0.
</dd>
</dl></blockquote>
<p>PHB
</p>
<blockquote class="text"><dl>
<dt></dt>
<dd>The PHB is set to the PHB value provisioned at the source MEP.
</dd>
</dl></blockquote>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Counting Activation Operations</h3>

<p>As specified in <a class='info' href='#I-D.ietf-mpls-tp-oam-framework'>[I&#8209;D.ietf&#8209;mpls&#8209;tp&#8209;oam&#8209;framework]<span> (</span><span class='info'>Allan, D., Busi, I., Niven-Jenkins, B., Fulignoli, A., Hernandez-Valencia, E., Levrau, L., Mohan, D., Sestito, V., Sprecher, N., Helvoort, H., Vigoureux, M., Weingarten, Y., and R. Winter, &ldquo;MPLS-TP OAM Framework,&rdquo; April&nbsp;2010.</span><span>)</span></a>, before packet loss measurement is initiated, whether the operational mode is proactive monitoring or on-demand monitoring, the measurement parameters need to be provisioned at the source MEP. The provisioned measurement parameters for proactive monitoring include measurement interval and PHB value which identifies the per-hop behavior of packets with loss information, and further include measurement times for on-demand monitoring. Also note that after these packet loss measurement parameters are provisioned and this function is enabled at the source MEP, counting the transmitted and received packets with the provisioned PHB at the source MEP will be activated automatically.
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Transmitting a Counting Activation Request</h3>

<p>After initiating a packet loss measurement operation, whether the operational mode is proactive monitoring or on-demand monitoring, the source MEP (i.e. the initiator MEP) will at first transmit a Counting Activation Request to the sink MEP (i.e. the peer MEP). This message is intended to trigger the sink MEP to start counting the transmitted and received packets with the specified PHB.
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Receiving a Counting Activation Request</h3>

<p>Upon the reception of a Counting Activation Request, the sink MEP must inspect this message at first, and if no unexpected field or value is found then the sink MEP should start counting the transmitted and received packets with the received PHB, otherwise specific error should be returned at the sink MEP.
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
Transmitting a Counting Activation Reply</h3>

<p>When a Counting Activation Request is received, the sink MEP must transmit a Counting Activation Reply to the source MEP. The Control Code in Counting Activation Reply Message should be set to 0x0 to reflect the successful operation (i.e. activate counting successfully) at the sink MEP, or on the contrary set to 0x1 to reflect the failed operation (i.e. activate counting unsuccessfully) at the sink MEP. The received PHB value should be copied to the same PHB field in the Counting Activation Reply message.
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4"></a><h3>3.4.&nbsp;
Receiving a Counting Activation Reply</h3>

<p>Upon the reception of a Counting Activation Reply, the source MEP must inspect this message at first, if no unexpected field or value is found and the received Control Code indicates successful operation at the sink MEP, then the source MEP should start transmitting Loss Measurement Query to commence the procedures defined in <a class='info' href='#I-D.frost-mpls-tp-loss-delay'>[I&#8209;D.frost&#8209;mpls&#8209;tp&#8209;loss&#8209;delay]<span> (</span><span class='info'>Frost, D. and S. Bryant, &ldquo;Packet Loss and Delay Measurement for the MPLS Transport Profile,&rdquo; June&nbsp;2010.</span><span>)</span></a>, otherwise specific error should be returned at the source MEP. If there is no any Counting Activation Reply received after a while (such as 1 second), then specific error should be returned at the source MEP.
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Counting Deactivation Operations</h3>

<p>As indicated above, before packet loss measurement is initiated, the measurement parameters need to be provisioned at the source MEP, and after this function is enabled, counting the transmitted and received packets with the provisioned PHB at the source MEP will be activated automatically. Similarly with that after the packet loss measurement function is disabled at the source MEP, counting the transmitted and received packets with the provisioned PHB at the source MEP will be deactivated automatically.
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Transmitting a Counting Deactivation Request</h3>

<p>After stopping a packet loss measurement operation, the source MEP (i.e. the initiator MEP) will stop transmitting Loss Measurement Query, and then transmit a Counting Deactivation Request to the sink MEP (i.e. the peer MEP). This message is intended to trigger the sink MEP to stop counting the transmitted and received packets with the specified PHB.
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Receiving a Counting Deactivation Request</h3>

<p>Upon the reception of a Counting Deactivation Request, the sink MEP must inspect this message at first, and if no unexpected field or value is found then the sink MEP should stop counting the transmitted and received packets with the received PHB, otherwise specific error should be returned at the sink MEP.
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
Transmitting a Counting Deactivation Reply</h3>

<p>When a Counting Deactivation Request is received, the sink MEP must transmit a Counting Deactivation Reply to the source MEP. The Control Code in Counting Deactivation Reply Message should be set to 0x0 to reflect the successful operation (i.e. deactivate counting successfully) at the sink MEP, or on the contrary set to 0x1 to reflect the failed operation (i.e. deactivate counting unsuccessfully) at the sink MEP. The received PHB value should be copied to the same PHB field in the Counting Deactivation Reply message.
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4"></a><h3>4.4.&nbsp;
Receiving a Counting Deactivation Reply</h3>

<p>Upon the reception of a Counting Deactivation Reply, the source MEP must inspect this message at first, if no unexpected field or value is found and the received Control Code indicates successful operation at the sink MEP, then there is no action at the source MEP, otherwise specific error should be returned at the source MEP. If there is no any Counting Deactivation Reply received after a while (such as 1 second), then specific error should be returned at the source MEP.
</p>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Considerations for Control Plane</h3>

<p>When the packet loss measurement is employed in operational mode of proactive monitoring, the configured measurement parameters can be transferred from the source MEP to the sink MEP through the control plane by extending RSVP-TE <a class='info' href='#RFC3209'>[RFC3209]<span> (</span><span class='info'>Awduche, D., Berger, L., Gan, D., Li, T., Srinivasan, V., and G. Swallow, &ldquo;RSVP-TE: Extensions to RSVP for LSP Tunnels,&rdquo; December&nbsp;2001.</span><span>)</span></a>, as specified in <a class='info' href='#I-D.ietf-ccamp-rsvp-te-mpls-tp-oam-ext'>[I&#8209;D.ietf&#8209;ccamp&#8209;rsvp&#8209;te&#8209;mpls&#8209;tp&#8209;oam&#8209;ext]<span> (</span><span class='info'>Bellagamba, E., Andersson, L., Skoldstrom, P., and D. Ward, &ldquo;Configuration of pro-active MPLS-TP Operations, Administration, and Maintenance (OAM) Functions Using RSVP-TE or LSP Ping,&rdquo; March&nbsp;2010.</span><span>)</span></a>. But in that draft, the sink MEP of one LM session is configured as a source MEP of another LM session, with all the same parameters such as measurement interval and PHB value. Actually there is another option which will distinguish the sink MEP function from the source MEP function when configuring proactive packet loss measurement at an MEP, which means that at the sink MEP only the function of counting the transmitted and received packets with specified PHB will be activated, in other words the sink MEP won't act as a source MEP of another LM session and won't transmit LM message initiatively. The option dictated above help to increase operation flexibility when performing proactive packet loss measurement, and decrease the bandwidth taken up by OAM messages due to that in this case only one LM session is needed. If this option is adopted when configuring parameters of proactive packet loss measurement by control plane, then the "MPLS OAM PM Loss TLV" defined in <a class='info' href='#I-D.ietf-ccamp-rsvp-te-mpls-tp-oam-ext'>[I&#8209;D.ietf&#8209;ccamp&#8209;rsvp&#8209;te&#8209;mpls&#8209;tp&#8209;oam&#8209;ext]<span> (</span><span class='info'>Bellagamba, E., Andersson, L., Skoldstrom, P., and D. Ward, &ldquo;Configuration of pro-active MPLS-TP Operations, Administration, and Maintenance (OAM) Functions Using RSVP-TE or LSP Ping,&rdquo; March&nbsp;2010.</span><span>)</span></a> can be simplified and the MEP which receives this TLV can trigger only the sink MEP function.
</p>
<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
IANA Considerations</h3>

<p>To be added in a later version of this document.
</p>
<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Security Considerations</h3>

<p>To be added in a later version of this document.
</p>
<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Acknowledgements</h3>

<p>To be added in a later version of this document.
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.frost-mpls-tp-loss-delay">[I-D.frost-mpls-tp-loss-delay]</a></td>
<td class="author-text">Frost, D. and S. Bryant, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-frost-mpls-tp-loss-delay-02.txt">Packet Loss and Delay Measurement for the MPLS Transport Profile</a>,&rdquo; draft-frost-mpls-tp-loss-delay-02 (work in progress), June&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-frost-mpls-tp-loss-delay-02.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-ccamp-rsvp-te-mpls-tp-oam-ext">[I-D.ietf-ccamp-rsvp-te-mpls-tp-oam-ext]</a></td>
<td class="author-text">Bellagamba, E., Andersson, L., Skoldstrom, P., and D. Ward, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-ccamp-rsvp-te-mpls-tp-oam-ext-01.txt">Configuration of pro-active MPLS-TP Operations, Administration, and Maintenance (OAM) Functions Using RSVP-TE or LSP Ping</a>,&rdquo; draft-ietf-ccamp-rsvp-te-mpls-tp-oam-ext-01 (work in progress), March&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-ccamp-rsvp-te-mpls-tp-oam-ext-01.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3209">[RFC3209]</a></td>
<td class="author-text">Awduche, D., Berger, L., Gan, D., Li, T., Srinivasan, V., and G. Swallow, &ldquo;<a href="http://tools.ietf.org/html/rfc3209">RSVP-TE: Extensions to RSVP for LSP Tunnels</a>,&rdquo; RFC&nbsp;3209, December&nbsp;2001 (<a href="http://www.rfc-editor.org/rfc/rfc3209.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5586">[RFC5586]</a></td>
<td class="author-text">Bocci, M., Vigoureux, M., and S. Bryant, &ldquo;<a href="http://tools.ietf.org/html/rfc5586">MPLS Generic Associated Channel</a>,&rdquo; RFC&nbsp;5586, June&nbsp;2009 (<a href="http://www.rfc-editor.org/rfc/rfc5586.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5860">[RFC5860]</a></td>
<td class="author-text">Vigoureux, M., Ward, D., and M. Betts, &ldquo;<a href="http://tools.ietf.org/html/rfc5860">Requirements for Operations, Administration, and Maintenance (OAM) in MPLS Transport Networks</a>,&rdquo; RFC&nbsp;5860, May&nbsp;2010 (<a href="http://www.rfc-editor.org/rfc/rfc5860.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-mpls-tp-oam-framework">[I-D.ietf-mpls-tp-oam-framework]</a></td>
<td class="author-text">Allan, D., Busi, I., Niven-Jenkins, B., Fulignoli, A., Hernandez-Valencia, E., Levrau, L., Mohan, D., Sestito, V., Sprecher, N., Helvoort, H., Vigoureux, M., Weingarten, Y., and R. Winter, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-mpls-tp-oam-framework-06.txt">MPLS-TP OAM Framework</a>,&rdquo; draft-ietf-mpls-tp-oam-framework-06 (work in progress), April&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-mpls-tp-oam-framework-06.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Min Xiao</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">ZTE Corporation</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:xiao.min2@zte.com.cn">xiao.min2@zte.com.cn</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Jian Yang</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">ZTE Corporation</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:yang_jian@zte.com.cn">yang_jian@zte.com.cn</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Bo Wu</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">ZTE Corporation</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:wu.bo@zte.com.cn">wu.bo@zte.com.cn</a></td></tr>
</table>
</body></html>
