<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Media Control Channel Framework (SCFW) Call Flow Examples</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Media Control Channel Framework (SCFW) Call Flow Examples">
<meta name="keywords" content="MediaCtrl, Media Server Control, Media Control Channel Framework">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">A. Amirante</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">T. Castaldi</td></tr>
<tr><td class="header">Expires: September 12, 2008</td><td class="header">L. Miniero</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">S P. Romano</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">University of Napoli</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">March 11, 2008</td></tr>
</table></td></tr></table>
<h1><br />Media Control Channel Framework (SCFW) Call Flow Examples<br />draft-miniero-mediactrl-escs-01.txt</h1>

<h3>Status of this Memo</h3>
<p>
By submitting this Internet-Draft,
each author represents that any applicable patent or other IPR claims of which
he or she is aware have been or will be disclosed,
and any of which he or she becomes aware will be disclosed,
in accordance with Section&nbsp;6 of BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on September 12, 2008.</p>

<h3>Abstract</h3>

<p>
			This document provides with a list of more or less detailed
			Media Control Channel Framework
			<a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; October&nbsp;2009.</span><span>)</span></a> call flows.
			It aims at being a simple guide throughout the use of the interface
			between Application Servers and MEDIACTRL-based Media Servers,
			as well as a hopefully helpful base reference documentation for both
			implementors and protocol researchers.
		
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#sec-intro">1.</a>&nbsp;
Introduction<br />
<a href="#sec-conv">2.</a>&nbsp;
Conventions<br />
<a href="#sec-teminology">3.</a>&nbsp;
Terminology<br />
<a href="#sec-overview">4.</a>&nbsp;
Overview<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-overview-implementation">4.1.</a>&nbsp;
A Practical Approach<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-overview-state">4.1.1.</a>&nbsp;
State Diagrams<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-overview-choices">4.1.2.</a>&nbsp;
Implementation<br />
<a href="#sec-comedia">5.</a>&nbsp;
Control Channel Establishment<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-comedia-neg">5.1.</a>&nbsp;
COMEDIA Negotiation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-comedia-synch">5.2.</a>&nbsp;
SYNCH<br />
<a href="#sec-examples">6.</a>&nbsp;
Use-case scenarios and examples<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-echo">6.1.</a>&nbsp;
Echo Test<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-echo-direct">6.1.1.</a>&nbsp;
Direct Echo Test<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-echo-recording">6.1.2.</a>&nbsp;
Echo Test based on Recording<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-call">6.2.</a>&nbsp;
Phone Call<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-call-direct">6.2.1.</a>&nbsp;
Direct Connection<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-call-conf">6.2.2.</a>&nbsp;
Conference-based Approach<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-voicemail">6.3.</a>&nbsp;
Voice Mail<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-conference">6.4.</a>&nbsp;
Conferencing<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-conf-bridge">6.4.1.</a>&nbsp;
Simple Bridging<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-conf-complex">6.4.2.</a>&nbsp;
Rich Conference Scenario<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-conf-bfcp">6.4.3.</a>&nbsp;
Conferencing with Floor Control<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-conf-coaching">6.4.4.</a>&nbsp;
Coaching Scenario<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-conf-sidebars">6.4.5.</a>&nbsp;
Sidebars<br />
<a href="#sec-security">7.</a>&nbsp;
Security Considerations<br />
<a href="#sec-changes">8.</a>&nbsp;
Change Summary<br />
<a href="#sec-acks">9.</a>&nbsp;
Acknowledgements<br />
<a href="#rfc.references1">10.</a>&nbsp;
References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
<a href="#rfc.copyright">&#167;</a>&nbsp;
Intellectual Property and Copyright Statements<br />
</p>
<br clear="all" />

<a name="sec-intro"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
			TBD. Discussion upon SIP/MEDIACTRL and separation of responsibilities
			between Application Servers (application logic) and Media Servers
			(media management and manipulation).
		
</p>
<p>
			Requirements -&gt; Architecture -&gt; Framework (Control Packages)
		
</p>
<a name="sec-conv"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Conventions</h3>

<p>
			In this document, the key words "MUST", "MUST NOT", "REQUIRED",
			"SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT
			RECOMMENDED", "MAY", and "OPTIONAL" are to be interpreted as
			described in BCP 14, RFC 2119 <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> and
			indicate requirement levels for compliant implementations.
		
</p>
<p>
			Besides, note that due to RFC formatting conventions, this document often splits
			SIP/SDP and SCFW across lines whose content would exceed 72 characters.
			A backslash character marks where this line folding has taken place.  This
			backslash and its trailing CRLF and whitespace would not appear in the actual
			protocol contents.
		
</p>
<a name="sec-teminology"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Terminology</h3>

<p>
			This document pretty much makes use of the same terminology as
			the one that can be found in the referenced documents. The following
			terms are only a summarization of the most commonly used ones in this
			context, mostly derived from the terminology
			used in the related documents:
		
</p>
<p>
			</p>
<blockquote class="text"><dl>
<dt>Application Server:</dt>
<dd>
					an entity that requests media processing and
					manipulation from a Media Server; typical examples
					are Back to Back User Agents (B2BUA) and
					endpoints requesting manipulation of a
					third-party's media stream.
				
</dd><br />

<dt>Media Server:</dt>
<dd>
					an entity that performs a service, such as media
					processing, on behalf of an Application Server;
					typical provided functionality are mixing,
					announcement, tone detection and generation,
					and play and record services.
				
</dd><br />

<dt>Control Channel:</dt>
<dd>
					a reliable connection between an Application
					Server and a Media Server that is used to
					exchange Framework messages.
				
</dd>
</dl></blockquote><p>
		
</p>
<a name="sec-overview"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Overview</h3>

<p>
			This document provides with a list of more or less detailed MEDIACTRL
			Media Control Channel Framework
			<a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; October&nbsp;2009.</span><span>)</span></a> call flows.
			The motivation for this comes from our implementation experience
			with the framework and its protocol. This drove us to writing what
			could be both a simple guide throughout the use of the several interfaces
			between Application Servers and MEDIACTRL-based Media Servers (and the
			related correlations between them) and a hopefully helpful base reference
			documentation for other implementors and protocol researchers.
		
</p>
<p>
			Following this spirit, this document covers several aspects of the
			interaction between Application Servers and Media Servers. However, in the
			context of this document, the call flows almost always depict the interaction
			between a single Application Server (which, for the sake of conciseness,
			is called AS from now on) and a single Media Server (MS). To ease up the understanding
			of all the flows (for what concerns both SIP dialogs and SCFW transactions),
			the domains hosting the AS and the MS in all the scenarios are called,
			respectively, as.com and ms.org.
		
</p>
<p>
			In the next paragraphs a small overview of our implementation approaches
			and choices is described, with particular focus upon the protocol-related
			aspects. This involves state diagrams for what concerns both the client side
			(the AS) and the server side (the MS). Of course, this section is not at all to be
			considered a mandatory approach to the implementation of the framework. It
			is only meant to ease up the understanding of how the framework works from
			a practical point of view, and of the following examples.
		
</p>
<p>
			Once done with this preliminary considerations, in the subsequent sections
			real-life scenarios are faced. In this context, first of all, the establishment
			of the Control Channel is dealt with: after that, some typical use case
			scenarios, involving the most typical multimedia applications, are depicted
			and described.
		
</p>
<a name="sec-overview-implementation"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
A Practical Approach</h3>

<p>
				TBD.
			
</p>
<a name="sec-overview-state"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.1"></a><h3>4.1.1.&nbsp;
State Diagrams</h3>

<p>
					TBD. (talk about both diagrams; update both diagrams reflecting
					the use of the new MS-generated CONTROL event for notifications)
				
</p>
<p>
					<br /><hr class="insert" />
<a name="fig-state-ms"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

+------------------+  CONTROL/-  +------------------+ API 202/202
| Idle/'terminate' |------------&gt;| CONTROL received |------------+
+------------------+             +------------------+            |
  ^          ^   ^   API 200/200    |     |                      |
  |          |   |                  |     |                      v
  |          |   +------------------+     |          +-----------------+
  | 200/-    |      API Error/Error       |          | CONTROL pending |
  |          +----------------------------+          +-----------------+
  |                                                           |
  |                                                           |
  |                                              API pending/ |
+-------------+                                REPORT pending |
| Waiting for |                                               v
|  last 200   |&lt;------------------------+             +----------------+
+-------------+                         |             | 'pending' sent |
     ^                                  |             +----------------+
     |                                  |                     |
     |                                  |                     |
     | API terminate/                   | API terminate/      |
     | REPORT terminate                 | REPORT termnate     | 200/-
     |                                  |                     v
   +--------------------+               |        +---------------------+
   | 'update' confirmed |------+        +--------| 'pending' confirmed |
   +--------------------+      |                 +---------------------+
             ^                 | API update/            |
             |                 | REPORT update          |
             |                 v                        |
             |   200/-      +---------------+           | API update/
             +--------------| 'update' sent |&lt;----------+ REPORT update
                            +---------------+

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: Media Server SCFW State Diagram&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

				
</p>
<p>
					<br /><hr class="insert" />
<a name="fig-state-as"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

                 +--------------+   202/-   +--------------+
             +--&gt;| CONTROL sent |----------&gt;| 202 received |
             |   +--------------+           +--------------+
             |        |       |                   |
             |        |       |                   |
API CONTROL/ |        | 200/- |                   | REPORT 'pending'/
send CONTROL |        |       |                   v send 200
             |        |       | Error/       +-----------+
+------------------+  |       | Error        | 'pending' |
| Idle/'terminate' |&lt;-+       |              +-----------+
+------------------+&lt;---------+                 |     |
    ^          ^                                |     |
    |          |            REPORT 'terminate'/ |     |
    |          |                       send 200 |     |
    |          +--------------------------------+     | REPORT 'update'/
    |                                                 | send 200
    | REPORT 'terminate'/                             |
    | send 200                                        |
    |                     +-----------+               |
    +---------------------| 'update ' |&lt;--------------+
                          +-----------+
                            ^      |
                            |      | REPORT 'update'/
                            +------+ send 200

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: Application Server SCFW State Diagram&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

				
</p>
<a name="sec-overview-choices"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1.2"></a><h3>4.1.2.&nbsp;
Implementation</h3>

<p>
					TBD. (media- and macro-connections, conferences, plugins)
				
</p>
<a name="sec-comedia"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Control Channel Establishment</h3>

<p>
			As specified in <a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; October&nbsp;2009.</span><span>)</span></a>,
			the preliminary step to any interaction between
			an AS and a MS is the establishment of a control
			channel between the two. As explained in the next
			subsection, this is accomplished by
			means of a so-called COMEDIA <a class='info' href='#RFC4145'>[RFC4145]<span> (</span><span class='info'>Yon, D. and G. Camarillo, &ldquo;TCP-Based Media Transport in the Session Description Protocol (SDP),&rdquo; September&nbsp;2005.</span><span>)</span></a>
			negotiation. This negotiation allows for a TCP
			connection to be created between the AS and the MS:
			once they have connected, a SYNCH message sent
			by the AS to the MS consolidates the control channel.
		
</p>
<p>
		<br /><hr class="insert" />
<a name="fig-ctrlchan"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

          AS                              MS
          |                               |
          | INVITE (COMEDIA)              |
          |------------------------------&gt;|
          |                  100 (Trying) |
          |&lt;------------------------------|
          |              200 OK (COMEDIA) |
          |&lt;------------------------------|
          | ACK                           |
          |------------------------------&gt;|
          |                               |
          |==============================&gt;|
          | TCP CONNECT (CTRL CHANNEL)    |
          |==============================&gt;|
          |                               |
          | SYNCH (Dialog-ID, etc.)       |
          |+++++++++++++++++++++++++++++&gt;&gt;|
          |                               |--+
          |                               |  | Check SYNCH
          |                               |&lt;-+
          |                        200 OK |
          |&lt;&lt;+++++++++++++++++++++++++++++|
          |                               |
          .                               .
          .                               .

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3: Control Channel Establishment&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

		
</p>
<a name="sec-comedia-neg"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
COMEDIA Negotiation</h3>

<p>
				As a first step, the AS and the MS establish a
				Control SIP dialog. This is usually originated
				by the AS itself. The AS generates a SIP
				INVITE message containing in its SDP body
				information about the TCP connection it wants
				to establish with the MS. In the provided
				example (see <a class='info' href='#fig-comedia'>Figure&nbsp;4<span> (</span><span class='info'>COMEDIA Negotiation: Sequence Diagram</span><span>)</span></a>
				and the attached call flow), the AS wants
				to actively open a new TCP connection, which
				on his side will be bound to port 5757.
				If the request is fine, the MS answers
				with its own offer, by communicating to the
				AS the transport address to connect to in
				order to establish the TCP connection.
				In the provided example, the MS will listen
				on the port 7575. Once this negotiation
				is over, the AS can effectively connect
				to the MS.
			
</p>
<p>
				Note that the provided example also includes
				the indication, from both the AS and the MS,
				of the supported control packages. This is
				achieved by means of a series of 'ctrl-package'
				attributes as specified in
				<a class='info' href='#I-D.boulton-mmusic-sdp-control-package-attribute'>[I&#8209;D.boulton&#8209;mmusic&#8209;sdp&#8209;control&#8209;package&#8209;attribute]<span> (</span><span class='info'>Boulton, C., &ldquo;A Session Description Protocol (SDP) Control Package Attribute,&rdquo; March&nbsp;2009.</span><span>)</span></a>.
				In the example, the AS supports (or is only
				interested to) two packages: the Basic IVR and
				the Audio Conferencing. The MS replies with
				the list of packages it supports, by adding
				the VoiceXML IVR package to the list provided
				by the AS. It is worth noting that this exchange
				of information is not meant as a strictly containing
				negotiation of packages: in case the AS gets to
				know that one or more packages it needs are not
				supported according to the indications sent by
				the MS, it MAY choose not to open a control channel
				with the MS at all, if its application logic leads
				to such a decision. The actual negotiation of control
				packages is done subsequenty through the use of
				the framework SYNCH transaction.
			
</p>
<p>
				<br /><hr class="insert" />
<a name="fig-comedia"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

                  AS                              MS
                  |                               |
                  | 1. INVITE (COMEDIA)           |
                  |------------------------------&gt;|
                  |               2. 100 (Trying) |
                  |&lt;------------------------------|
                  |           3. 200 OK (COMEDIA) |
                  |&lt;------------------------------|
                  | 4. ACK                        |
                  |------------------------------&gt;|
                  |                               |
                  |==============================&gt;|
                  | TCP CONNECT (CTRL CHANNEL)    |
                  |==============================&gt;|
                  |                               |
                  .                               .
                  .                               .

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;4: COMEDIA Negotiation: Sequence Diagram&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

			
</p>
<p>
				</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

1. AS -&gt; MS (SIP INVITE)
------------------------
	INVITE sip:MediaServer@ms.org:5060 SIP/2.0
	Via: SIP/2.0/UDP as.com:5060;branch=z9hG4bK-3724-1-0
	From: ApplicationServer \
	      &lt;sip:ApplicationServer@as.com:5060&gt;;tag=3724Pp001
	To: MediaServer &lt;sip:MediaServer@ms.org:5060&gt;
	Call-ID: 1-3724@as.com
	Cseq: 1 INVITE
	Contact: sip:ApplicationServer@as.com:5060
	Max-Forwards: 70
	Content-Type: application/sdp
	Content-Length: 227

	v=0
	o=- 53655765 2353687637 IN IP4 as.com
	s=-
	c=IN IP4 as.com
	t=0 0
	m=application 5757 TCP/SCFW
	a=setup:active
	a=connection:new
	a=ctrl-package:msc-ivr-basic/1.0
	a=ctrl-package:msc-conf-audio/1.0



2. AS &lt;- MS (SIP 100 Trying)
----------------------------
	SIP/2.0 100 Trying
	Via: SIP/2.0/UDP as.com:5060;branch=z9hG4bK-3724-1-0
	To: "MediaServer"&lt;sip:MediaServer@ms.org:5060&gt;;tag=07fa6e5b
	From: "ApplicationServer" \
	      &lt;sip:ApplicationServer@as.com:5060&gt;;tag=3724Pp001
	Call-ID: 1-3724@as.com
	CSeq: 1 INVITE
	Content-Length: 0


3. AS &lt;- MS (SIP 200 OK)
------------------------
	SIP/2.0 200 OK
	Via: SIP/2.0/UDP as.com:5060;branch=z9hG4bK-3724-1-0
	Contact: &lt;sip:MediaServer@ms.org:5060&gt;
	To: "MediaServer"&lt;sip:MediaServer@ms.org:5060&gt;;tag=07fa6e5b
	From: "ApplicationServer" \
	      &lt;sip:ApplicationServer@as.com:5060&gt;;tag=3724Pp001
	Call-ID: 1-3724@as.com
	CSeq: 1 INVITE
	Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, INVITE
	Content-Type: application/sdp
	Content-Length: 267

	v=0
	o=- 53655765 2353687638 IN IP4 ms.org
	s=MediaCtrl
	c=IN IP4 ms.org
	t=0 0
	m=application 7575 TCP/SCFW *
	a=connection:new
	a=setup:passive
	a=ctrl-package:msc-ivr-basic/1.0
	a=ctrl-package:msc-conf-audio/1.0
	a=ctrl-package:msc-ivr-vxml/1.0


4. AS -&gt; MS (SIP ACK)
---------------------
	ACK sip:MediaServer@ms.org:5060 SIP/2.0
	Via: SIP/2.0/UDP as.com:5060;branch=z9hG4bK-3724-1-6
	From: ApplicationServer \
	      &lt;sip:ApplicationServer@as.com:5060&gt;;tag=3724Pp001
	To: MediaServer &lt;sip:MediaServer@ms.org:5060&gt;;tag=07fa6e5b
	Call-ID: 1-3724@as.com
	Cseq: 1 ACK
	Contact: sip:ApplicationServer@as.com:5060
	Max-Forwards: 70
	Content-Length: 0

</pre></div><p>

			
</p>
<a name="sec-comedia-synch"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
SYNCH</h3>

<p>
				Once the AS and the MS have successfully
				established a TCP connection, an additional
				step is needed before the control channel
				can be used. In fact, as seen in the previous
				subsection, the first interaction between
				the AS and the MS happens by means of a
				SIP dialog, which in turns allows for the
				creation of the TCP connection. This
				introduces the need for a proper correlation
				between the above mentioned SIP dialog and
				TCP connection, so that the MS can be sure
				the connection came from the AS which
				requested it. This is accomplished by
				means of a dedicated framework message
				called SYNCH. This SYNCH message makes
				use of a properly constructed
				Dialog-ID (a composition of the Call-ID and
				the From and To tags extracted by the SIP
				dialog) to validate the
				control channel. Besides, it offers an
				additional negotiation mechanism.
				In fact, the AS uses the SYNCH not only
				to properly correlate as explained before,
				but also to negotiate with the MS the
				control packages it is interested to,
				as well as to agree on a Keep-Alive timer
				needed by both the AS and the MS to
				understand if problems on the connection
				occur. In the provided example (see
				<a class='info' href='#fig-comedia'>Figure&nbsp;4<span> (</span><span class='info'>COMEDIA Negotiation: Sequence Diagram</span><span>)</span></a> and the related
				call flow), the AS sends a SYNCH with a
				Dialog-ID constructed as needed (check the
				Call-ID and the two tags from the SIP dialog)
				and requests access to two control packages,
				specifically the Basic IVR and the Audio Conferencing
				package (These are the same packages the AS previously
				indicated in its SDP as specified in
				<a class='info' href='#I-D.boulton-mmusic-sdp-control-package-attribute'>[I&#8209;D.boulton&#8209;mmusic&#8209;sdp&#8209;control&#8209;package&#8209;attribute]<span> (</span><span class='info'>Boulton, C., &ldquo;A Session Description Protocol (SDP) Control Package Attribute,&rdquo; March&nbsp;2009.</span><span>)</span></a>,
				with the difference that this time they are
				reported in the context of a binding negotiation).
				Besides, it instructs the MS that a 100 seconds timeout
				is to be used for Keep-Alive. The MS
				validates the request by matching the
				received Dialog-ID with the SIP dialog
				values and, assuming it supports the
				control packages the AS requested access to
				(and for the sake of this document we assume
				it does), it answers with a 200 message.
				Additionally, the MS provides the AS with
				a list of other unrequested packages it supports (in this
				case the VoiceXML IVR package).
			
</p>
<p>
				<br /><hr class="insert" />
<a name="fig-synch"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

          AS                              MS
          .                               .
          .                               .
          |                               |
          | 1. SYNCH (Dialog-ID, etc.)    |
          |+++++++++++++++++++++++++++++&gt;&gt;|
          |                               |--+
          |                               |  | Check SYNCH
          |                               |&lt;-+
          |                     2. 200 OK |
          |&lt;&lt;+++++++++++++++++++++++++++++|
          |                               |
          .                               .
          .                               .

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;5: SYNCH: Sequence Diagram&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

			
</p>
<p>
				</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

1. AS -&gt; MS (SCFW SYNCH)
------------------------
	SCFW 6b8b4567327b SYNCH
	Dialog-ID: 3724Pp001~1-3724@as.com~07fa6e5b
	K-alive: 100
	Packages: msc-ivr-basic/1.0,msc-conf-audio/1.0


2. AS &lt;- MS (SCFW 200)
----------------------
	SCFW 6b8b4567327b 200
	K-alive: 100
	Packages: msc-ivr-basic/1.0,msc-conf-audio/1.0
	Supported: msc-ivr-vxml/1.0

</pre></div><p>

			
</p>
<p>
				At this step, the control channel is finally
				established, and can be used by the AS to
				request services from the MS.
				
			
</p>
<a name="sec-examples"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Use-case scenarios and examples</h3>

<p>
			The following scenarios have been chosen for their common
			presence in many rich real-time multimedia applications.
			Each scenario is depicted as a set of call flows, involving
			both the SIP/SDP signaling (UACs&lt;-&gt;AS&lt;-&gt;MS) and
			the Control Channel communication (AS&lt;-&gt;MS).
		
</p>
<p>
			All the examples assume that a Control Channel has already been
			correctly established and SYNCHed between the reference AS and
			MS. Besides, unless stated otherwise, the same UAC session is
			referenced in all the above mentioned examples. The UAC session
			is considered to have been created as the
			<a class='info' href='#fig-uac2as2ms'>Figure&nbsp;6<span> (</span><span class='info'>3PCC Sequence Diagram</span><span>)</span></a> describes:
		
</p>
<p>
			<br /><hr class="insert" />
<a name="fig-uac2as2ms"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

UAC                  AS                          MS
 |                   |                           |
 | INVITE (X)        |                           |
 |------------------&gt;|                           |
 |     180 (Ringing) |                           |
 |&lt;------------------|                           |
 |                   |--+                        |
 |                   |  | Handle app(X)          |
 |                   |&lt;-+                        |
 |                   | INVITE (X) as 3PCC        |
 |                   |--------------------------&gt;|
 |                   |              100 (Trying) |
 |                   |&lt;--------------------------|
 |                   |                           |--+ Negotiate media
 |                   |                           |  | with UAC and map
 |                   |                           |&lt;-+ tags and labels
 |                   |                    200 OK |
 |                   |&lt;--------------------------|
 |            200 OK |                           |
 |&lt;------------------|                           |
 | ACK               |                           |
 |------------------&gt;|                           |
 |                   | ACK                       |
 |                   |--------------------------&gt;|
 |                   |                           |
 |&lt;&lt;###########################################&gt;&gt;|
 |         RTP Media Stream(s) flowing           |
 |&lt;&lt;###########################################&gt;&gt;|
 |                   |                           |
 .                   .                           .
 .                   .                           .

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;6: 3PCC Sequence Diagram&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

		
</p>
<p>
			The UAC first places a call to a SIP URI the AS is responsible of.
			The specific URI is not relevant to the examples, since the application
			logic behind the mapping between a URI and the service it provides
			is a matter that is important only to the AS: so, a generic
			&#039;sip:example@as.com&#039; is used in all the examples, whereas
			the service this URI is associated with in the AS logic is mapped
			scenario by scenario to the case under exam. The UAC INVITE is treated
			as envisaged in <a class='info' href='#I-D.ietf-mediactrl-architecture'>[I&#8209;D.ietf&#8209;mediactrl&#8209;architecture]<span> (</span><span class='info'>Melanchuk, T., &ldquo;An Architectural Framework for Media Server Control,&rdquo; November&nbsp;2008.</span><span>)</span></a>: the
			INVITE is forwarded by the AS to the MS in a 3PCC fashion, without the SDP
			provided by the UAC being touched, thus to have the session fully negotiated
			by the MS for what concerns its description. The MS matches the UAC's offer
			with its own capabilities and provides its answer in a 200 OK. This answer
			is then forwarded, again without the SDP contents being touched, by the
			AS to the UAC it is intended for. This way, while the SIP signaling from
			the UAC is terminated to the AS, all the media would start directly flowing
			between the UAC and the MS.
		
</p>
<p>
			As a consequence of this negotiation, one or more media connections are
			created between the MS and the UAC. They are then addressed, when needed,
			by the AS and the MS by means of the tags concatenation as specified in
			<a class='info' href='#I-D.ietf-mediactrl-sip-control-framework'>[I&#8209;D.ietf&#8209;mediactrl&#8209;sip&#8209;control&#8209;framework]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;Media Control Channel Framework,&rdquo; October&nbsp;2009.</span><span>)</span></a>.
		
</p>
<p>
			TBD. SIP negotiation -&gt; tags and labels.
		
</p>
<p>
			<br /><hr class="insert" />
<a name="fig-uac2as2ms-sip"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

			(Figure not available yet).

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;7: 3PCC SIP Signaling&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

		
</p>
<p>
			As a result of the 3PCC negotiation, the following relevant information
			is retrieved:
		
</p>
<p>
			</p>
<ol class="text">
<li>
					The &#039;From&#039; and &#039;To&#039; tags (1536067209 and
					913cd14c respectively);
				
</li>
<li>
					the label associated with the only negotiated media connection,
					in this case an audio media stream (25547c8).
				
</li>
</ol><p>
		
</p>
<p>
			These three identifiers allow the AS and MS to univocally and unambiguously
			address to each other the connections associated with the related UAC, specifically:
		
</p>
<p>
			</p>
<ol class="text">
<li>
					1536067209~913cd14c, the concatenation of the &#039;From&#039;
					and &#039;To&#039; tags, addresses all the media connections
					between the MS and the UAC;
				
</li>
<li>
					1536067209~913cd14c~25547c8, the concatenation of the previous
					value with the label attribute, addresses only one of the media
					connections of the UAC session (in this case, the only avaliable
					media stream).
				
</li>
</ol><p>
		
</p>
<p>
			The mapping the AS makes between the UACs&lt;-&gt;AS and the AS&lt;-&gt;MS
			SIP dialogs is instead out of scope for this document: we just assume that the AS
			knows how to address the right connection according to the related session it has
			with a UAC (e.g. to play an announcement to a specific UAC).
			
		
</p>
<a name="sec-echo"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
Echo Test</h3>

<p>
				The echo test is the simpliest example scenario that can be achieved
				by means of a Media Server. It basically consists of a UAC directly or
				indirectly &quot;talking&quot; to itself. A media perspective of such
				a scenario is depicted in <a class='info' href='#fig-echo-rtp'>Figure&nbsp;8<span> (</span><span class='info'>Echo Test: Media Perspective</span><span>)</span></a>.
			
</p>
<p>
				<br /><hr class="insert" />
<a name="fig-echo-rtp"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

           +-------+  A (RTP)                 +--------+
           |  UAC  |=========================&gt;| Media  |
           |   A   |&lt;=========================| Server |
           +-------+                 A (RTP)  +--------+

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;8: Echo Test: Media Perspective&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

			
</p>
<p>
				From the framework point of view, when the UAC's leg is not attached to
				anything yet, what appears is described in <a class='info' href='#fig-echo-noconn'>Figure&nbsp;9<span> (</span><span class='info'>Echo Test: UAC Media Leg not attached</span><span>)</span></a>:
				since there's no connection involving the UAC yet, the frames it might be
				sending are discarded, and nothing is sent to it (except for silence, if it
				is requested to be transmitted).
			
</p>
<p>
				<br /><hr class="insert" />
<a name="fig-echo-noconn"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

                                        MS
                                     +------+
                        UAC          |      |
                         o-----&gt;&gt;-------x   |
                         o.....&lt;&lt;.......x   |
                                     |      |
                                     +------+

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;9: Echo Test: UAC Media Leg not attached&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

			
</p>
<p>
				Starting from these considerations, two different approaches to the Echo Test
				scenario are explored in this document in the following paragraphes:
			
</p>
<p>
				</p>
<ol class="text">
<li>a Direct Echo Test approach, where the UAC directly talks to itself;
</li>
<li>a Recording-based Echo Test approach, where the UAC indirectly talks to itself.
</li>
</ol><p>
			
</p>
<a name="sec-echo-direct"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1.1"></a><h3>6.1.1.&nbsp;
Direct Echo Test</h3>

<p>
					In the Direct Echo Test approach, the UAC is directly connected to itself.
					This means that, as depicted in <a class='info' href='#fig-echo-direct'>Figure&nbsp;10<span> (</span><span class='info'>Echo Test: Direct Echo (self connection)</span><span>)</span></a>, each frame
					the MS receives from the UAC is sent back to it in real-time.
				
</p>
<p>
					<br /><hr class="insert" />
<a name="fig-echo-direct"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

                                        MS
                                     +------+
                        UAC          |      |
                         o-----&gt;&gt;-------@   |
                         o-----&lt;&lt;-------@   |
                                     |      |
                                     +------+

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;10: Echo Test: Direct Echo (self connection)&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

				
</p>
<p>
					In the framework this can be achieved by means of the conference control package,
					which is in charge of the task of joining connections and conferences.
				
</p>
<p>
					A sequence diagram of a potential transaction is depicted in
					<a class='info' href='#fig-echo-direct-scfw'>Figure&nbsp;11<span> (</span><span class='info'>Self Connection: Framework Transaction</span><span>)</span></a>:
				
</p>
<p>
					<br /><hr class="insert" />
<a name="fig-echo-direct-scfw"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

   UAC                      AS                                 MS
    |                       |                                  |
    |                       | 1. CONTROL (join UAC to itself)  |
    |                       |++++++++++++++++++++++++++++++++&gt;&gt;|
    |                       |                                  |--+ self
    |                       |                                  |  | join
    |                       |                        2. 200 OK |&lt;-+ UAC
    |                       |&lt;&lt;++++++++++++++++++++++++++++++++|
    |                       |                                  |
    |&lt;&lt;######################################################&gt;&gt;|
    |           Now the UAC is echoed back everything          |
    |&lt;&lt;######################################################&gt;&gt;|
    |                       |                                  |
    .                       .                                  .
    .                       .                                  .

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;11: Self Connection: Framework Transaction&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

				
</p>
<p>
					All the transaction steps have been numbered to ease up the understanding
					and the following of the subsequent explaination lines:
				
</p>
<p>
					</p>
<ul class="text">
<li>The AS requests the joining of the connection to itself
						by sending a CONTROL request (1), specifically meant for
						the conferencing control package (msc-conf-audio/1.0),
						to the MS: since the connection must be attached to
						itself, the id1 and id2 attributes are set to the same
						value, i.e. the connectionid;
</li>
<li>The MS, having checked the validity of the request,
						enforces the joining of the connection to itself; this means that
						all the frames sent by the UAC are sent back to it; to report
						the success of the operation, the MS sends a 200 OK (2) in reply
						to the MS, thus ending the transaction.
</li>
</ul><p>
				
</p>
<p>
					The complete transaction, that is the full bodies of the exchanged messages,
					is provided in the following lines:
				
</p>
<p>
					</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

1. AS -&gt; MS (SCFW CONTROL)
--------------------------
	SCFW 74b0dc511949 CONTROL
	Control-Package: msc-conf-audio/1.0
	Content-Type: text/xml
	Content-Length: 87

	&lt;?xml version="1.0"?&gt;
	&lt;join id1="1536067209~913cd14c" \
	      id2="1536067209~913cd14c"&gt;
	&lt;/join&gt;


2. AS &lt;- MS (SCFW 200 OK)
-----------------------------------
	SCFW 74b0dc511949 200
	Content-Type: text/xml
	Content-Length: 70

	&lt;?xml version="1.0"?&gt;
	&lt;response status="200" reason="Join successful"/&gt;

</pre></div><p>

				
</p>
<a name="sec-echo-recording"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1.2"></a><h3>6.1.2.&nbsp;
Echo Test based on Recording</h3>

<p>
					In the Recording-based Echo Test approach, instead, the UAC is NOT
					directly connected to itself, but indirectly. This means that, as
					depicted in <a class='info' href='#fig-echo-record'>Figure&nbsp;12<span> (</span><span class='info'>Echo Test: Recording involved</span><span>)</span></a>, each frame
					the MS receives from the UAC is first recorded: then, when the
					recording process is ended, the whole recorded frames are played
					back to the UAC as an announcement.
				
</p>
<p>
					<br /><hr class="insert" />
<a name="fig-echo-record"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

                             MS
                          +------+
             UAC          |      |
              o-----&gt;&gt;-------+~~~~~&gt; (recording.wav) ~~+
              o-----&lt;&lt;-------+   |                     |
                          |  ^   |                     v
                          +--|---+                     |
                             +~~~~~~~~~~~&lt;&lt;~~~~~~~~~~~~+

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;12: Echo Test: Recording involved&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

				
</p>
<p>
					In the framework this can be achieved by means of the basic IVR control package,
					which is in charge of the task of recording and playout. However, the whole
					scenario cannot be accomplished in a single transaction; at least two steps, in
					fact, need to be followed:
				
</p>
<p>
					</p>
<ol class="text">
<li>first, a recording (preceded by an announcement, if requested) must
						take place;
</li>
<li>then, a playout of the previously recorded media must occur.
</li>
</ol><p>
				
</p>
<p>
					This means that two separate transactions need to be invoked.
					A sequence diagram of a potential multiple transaction is depicted in
					<a class='info' href='#fig-echo-record-scfw'>Figure&nbsp;13<span> (</span><span class='info'>Recording-based Echo: Two Framework Transactions</span><span>)</span></a>:
				
</p>
<p>
					<br /><hr class="insert" />
<a name="fig-echo-record-scfw"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

 UAC                      AS                                 MS
  |                       |                                  |
  |                       | A1. CONTROL (record for 10s)     |
  |                       |++++++++++++++++++++++++++++++++&gt;&gt;|
  |                       |                          A2. 202 |
  |                       |&lt;&lt;++++++++++++++++++++++++++++++++|
  |                       |             A3. REPORT (pending) |
  |                       |&lt;&lt;++++++++++++++++++++++++++++++++| prepare &amp;
  |                       | A4. 200 OK                       |--+ start
  |                       |++++++++++++++++++++++++++++++++&gt;&gt;|  | the
  |                       |           A5. REPORT (terminate) |&lt;-+ dialog
  |                       |&lt;&lt;++++++++++++++++++++++++++++++++|
  |                       | A6. 200 OK                       |
  |                       |++++++++++++++++++++++++++++++++&gt;&gt;|
  |                       |                                  |
  |&lt;&lt;########################################################|
  |           "This is an echo test: tell something"         |
  |&lt;&lt;########################################################|
  |                       |                                  |
  |########################################################&gt;&gt;|
  |           10s of audio from the UAC is recorded          |--+ save
  |########################################################&gt;&gt;|  | in a
  |                       |                                  |&lt;-+ file
  |                       |       B1. CONTROL (&lt;recordinfo&gt;) |
  |                       |&lt;&lt;++++++++++++++++++++++++++++++++|
  |       Use recorded +--| B2. 200 OK                       |
  |       file to play |  |++++++++++++++++++++++++++++++++&gt;&gt;|
  |       announcement +-&gt;|                                  |
  |                       | C1. CONTROL (play recorded)      |
  |                       |++++++++++++++++++++++++++++++++&gt;&gt;|
  |                       |                          C2. 202 |
  |                       |&lt;&lt;++++++++++++++++++++++++++++++++|
  |                       |             C3. REPORT (pending) |
  |                       |&lt;&lt;++++++++++++++++++++++++++++++++| prepare &amp;
  |                       | C4. 200 OK                       |--+ start
  |                       |++++++++++++++++++++++++++++++++&gt;&gt;|  | the
  |                       |           C5. REPORT (terminate) |&lt;-+ dialog
  |                       |&lt;&lt;++++++++++++++++++++++++++++++++|
  |                       | C6. 200 OK                       |
  |                       |++++++++++++++++++++++++++++++++&gt;&gt;|
  |                       |                                  |
  |&lt;&lt;########################################################|
  |         "Can you hear me? It's me, UAC, talking"         |
  |&lt;&lt;########################################################|
  |                       |                                  |
  |                       |       D1. CONTROL (&lt;promptinfo&gt;) |
  |                       |&lt;&lt;++++++++++++++++++++++++++++++++|
  |                       | D2. 200 OK                       |
  |                       |++++++++++++++++++++++++++++++++&gt;&gt;|
  |                       |                                  |
  .                       .                                  .
  .                       .                                  .

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;13: Recording-based Echo: Two Framework Transactions&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

				
</p>
<p>
					Notice how the
					AS-originated CONTROL transactions are terminated as soon as the requested dialogs
					start: as specified in <a class='info' href='#I-D.boulton-ivr-control-package'>[I&#8209;D.boulton&#8209;ivr&#8209;control&#8209;package]<span> (</span><span class='info'>Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;A Basic Interactive Voice Response (IVR) Control Package for the Media  Control Channel Framework,&rdquo; February&nbsp;2008.</span><span>)</span></a>,
					the MS makes use of a framework CONTROL message to report the result of the dialog
					and how it has proceeded. The two transactions (the AS-generated CONTROL request and
					the MS-generated CONTROL event) are correlated by means of the associated dialog
					identifier, as it will be clearer from the following lines.
					As before, all the transaction steps have been numbered to ease up the understanding
					and the following of the subsequent explaination lines. Besides, the two transactions
					are distinguished by the preceding letter (A,B=recording, C,D=playout).
				
</p>
<p>
					</p>
<ul class="text">
<li>The AS, as a first transaction, invokes a recording on the UAC
						connection by means of a CONTROL request (A1); the body is for the IVR
						package (msc-ivr-basic/1.0), and requests the start (dialogstart) of
						a new recording context (&lt;record&gt;); the recording
						must be preceded by an announcement (&lt;prompt&gt;), must not last longer
						than 10s (maxtime), and cannot be interrupted by a DTMF tone (dtmfterm=false);
						this has only to be done once (iterations), which means that if the recording
						does not succeed the first time, the transaction must fail;
						a beep has to be played (beep) right before the recording starts to
						notify the UAC;
</li>
<li>As seen before, the first responses to the request start flowing: the
						provisional 202 (A2), the subsequent REPORT pending (A3), and its ack (A4)
						from the AS;
</li>
<li>In the meanwhile, the MS prepares the dialog (e.g. by retrieving the
						announcement file, for which a HTTP URL is provided, and by checking that
						the request is well formed) and if all is fine it starts it, notifying the
						AS about it with a new REPORT (A5) with a terminated status: the connection
						is then passed to the IVR package, which first plays the announcement on the
						connection, followed by a beep, and then records all the incoming frames to
						a buffer;
</li>
<li>The AS acks the latest REPORT (A6), thus terminating this transaction,
						waiting for the result to come;
</li>
<li>Once the recording is over, the MS prepares a notification CONTROL (B1) which
						contains in its body (&lt;recordinfo&gt;) the path to the recorded file (in this case, a
						HTTP URL) which can be used by the AS for whatever it needs to;
</li>
<li>The AS concludes this first recording transaction by acking the
						CONTROL event (B2).
</li>
</ul><p>
				
</p>
<p>
					Now that the first transaction has ended, the AS has the 10s recording of
					the UAC talking. It can let the UAC hear it by having the MS play it to the
					MS as an announcement:
				
</p>
<p>
					</p>
<ul class="text">
<li>The AS, as a second transaction, invokes a playout on the UAC
							connection by means of a new CONTROL request (C1); the body is once againg
							for the IVR package (msc-ivr-basic/1.0), but this time it
							requests the start (dialogstart) of a new announcement context
							(&lt;prompt&gt;); the file to be played is the one
							recorded before (prompts), and has only to be played once (iterations);
</li>
<li>Again, the usual provisional 202 (C2), the subsequent REPORT pending (C3),
							and its ack (C4) from the AS take place;
</li>
<li>In the meanwhile, the MS prepares the new dialog and starts it, notifying the
							AS about it with a new REPORT (C5) with a terminated status: the connection
							is then passed to the IVR package, which plays the file on it;
</li>
<li>The AS acks the terminating REPORT (C6), now waiting for the announcement to end;
</li>
<li>Once the playout is over, the MS sends a CONTROL event (D1) which
							contains in its body (&lt;promptinfo&gt;) information about
							the just concluded announcement;
</li>
<li>The AS concludes this second and last transaction by acking the
							CONTROL event (D2).
</li>
</ul><p>
				
</p>
<p>
					As in the previous paragraph, the whole SCFW interaction is provided for a
					more in depth evaluation of the protocol interaction.
				
</p>
<p>
					</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

A1. AS -&gt; MS (SCFW CONTROL, record)
-----------------------------------
	SCFW 74b0dc511949 CONTROL
	Control-Package: msc-ivr-basic/1.0
	Content-Type: text/xml
	Content-Length: 354

	&lt;?xml version="1.0"?&gt;
	&lt;dialogstart connectionid="1536067209~913cd14c"&gt;
	  &lt;basicivr&gt;
	    &lt;prompt iterations="1"&gt;
	      &lt;media src="http://www.ms.org/prompts/connected.wav" \
		     type="audio/wav"/&gt;
	    &lt;/prompt&gt;
	    &lt;record maxtime="10s" dtmfterm="false" beep="true"/&gt;
	  &lt;/basicivr&gt;
	&lt;/dialogstart&gt;


A2. AS &lt;- MS (SCFW 202)
-----------------------
	SCFW 74b0dc511949 202


A3. AS &lt;- MS (SCFW REPORT pending)
----------------------------------
	SCFW 74b0dc511949 REPORT
	Seq: 1
	Status: pending
	Timeout: 10


A4. AS -&gt; MS (SCFW 200, ACK to 'REPORT pending')
------------------------------------------------
	SCFW 74b0dc511949 200
	Seq: 1


A5. AS &lt;- MS (SCFW REPORT terminate)
------------------------------------
	SCFW 74b0dc511949 REPORT
	Seq: 2
	Status: terminate
	Timeout: 10
	Content-Type: text/xml
	Content-Length: 88

	&lt;?xml version="1.0"?&gt;
	&lt;response status="200" \
		  reason="Dialog started" dialogid="05ded7b"/&gt;


A6. AS -&gt; MS (SCFW 200, ACK to 'REPORT terminate')
--------------------------------------------------
	SCFW 74b0dc511949 200
	Seq: 2


B1. AS &lt;- MS (SCFW REPORT terminate)
------------------------------------
	SCFW 4rgth45632d1 CONTROL
	Control-Package: msc-ivr-basic/1.0
	Content-Type: text/xml
	Content-Length: 197

	&lt;?xml version="1.0"?&gt;
	&lt;event dialogid="05ded7b"&gt;
	  &lt;dialogexit status="1"&gt;
	    &lt;recordinfo termmode="maxtime" duration="10000" \
			size="161644" type="audio/wav" \
		recording="http://www.ms.org/recording-05ded7b.wav"/&gt;
	  &lt;/dialogexit&gt;
	&lt;/event&gt;


B2. AS -&gt; MS (SCFW 200, ACK to 'CONTROL event')
-----------------------------------------------
	SCFW 4rgth45632d1 200


C1. AS -&gt; MS (SCFW CONTROL, play)
---------------------------------
	SCFW 238e1f2946e8 CONTROL
	Control-Package: msc-ivr-basic/1.0
	Content-Type: text/xml
	Content-Length: 319

	&lt;?xml version="1.0"?&gt;
	&lt;dialogstart connectionid="1536067209~913cd14c"&gt;
	  &lt;basicivr&gt;
	    &lt;prompt iterations="1"&gt;
	      &lt;media src="http://www.ms.org/recording-05ded7b.wav" \
		     type="audio/wav"/&gt;
	    &lt;/prompt&gt;
	  &lt;/basicivr&gt;
	&lt;/dialogstart&gt;


C2. AS &lt;- MS (SCFW 202)
-----------------------
	SCFW 238e1f2946e8 202


C3. AS &lt;- MS (SCFW REPORT pending)
----------------------------------
	SCFW 238e1f2946e8 REPORT
	Seq: 1
	Status: pending
	Timeout: 10


C4. AS -&gt; MS (SCFW 200, ACK to 'REPORT pending')
------------------------------------------------
	SCFW 238e1f2946e8 200
	Seq: 1


C5. AS &lt;- MS (SCFW REPORT terminate)
------------------------------------
	SCFW 238e1f2946e8 REPORT
	Seq: 2
	Status: terminate
	Timeout: 10
	Content-Type: text/xml
	Content-Length: 88

	&lt;?xml version="1.0"?&gt;
	&lt;response status="200" \
		  reason="Dialog started" dialogid="6faf4e0"/&gt;


C6. AS -&gt; MS (SCFW 200, ACK to 'REPORT terminate')
--------------------------------------------------
	SCFW 238e1f2946e8 200
	Seq: 2


D1. AS &lt;- MS (SCFW CONTROL event)
---------------------------------
	SCFW g56dhg73g8r5 CONTROL
	Control-Package: msc-ivr-basic/1.0
	Content-Type: text/xml
	Content-Length: 165

	&lt;?xml version="1.0"?&gt;
	&lt;event dialogid="6faf4e0"&gt;
	  &lt;dialogexit status="1"&gt;
	    &lt;promptinfo termmode="completed" \
			duration="10000" iterations="1"/&gt;
	  &lt;/dialogexit&gt;
	&lt;/event&gt;


D2. AS -&gt; MS (SCFW 200, ACK to 'CONTROL event')
-----------------------------------------------
	SCFW g56dhg73g8r5 200

</pre></div><p>

				
</p>
<a name="sec-call"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2"></a><h3>6.2.&nbsp;
Phone Call</h3>

<p>
				Another scenario that might involve the interaction between an AS and a MS
				is the classic phone call between two UACs. In fact, even though the most
				straightforward way to achieve this would be to let the UACs negotiate
				the session and the media to make use of between themselves, there are
				cases when the services provided by a MS might come in handy for phone
				calls as well.
			
</p>
<p>
				One of these cases is when the two UACs have no common supported codecs:
				having the two UACs directly negotiate the session would result in a
				session with no available media. Involving the MS as a transcoder would
				instead allow the two UACs to communicate anyway. Another interesting
				case is when the AS (or any other entity the AS is working in behalf of)
				is interested in manipulating or monitoring the media session between
				the UACs, e.g. to record the conversation: a similar scenario will be
				dealt with in <a class='info' href='#sec-call-conf'>Section&nbsp;6.2.2<span> (</span><span class='info'>Conference-based Approach</span><span>)</span></a>.
			
</p>
<p>
				Before proceeding in looking at how such a scenario might be accomplished
				by means of the Media Control Channel Framework, it is worth spending a couple of
				words upon how the SIP signaling involving all the interested parties
				might look like. In fact in such a scenario a 3PCC approach is absolutely
				needed. An example is provided in <a class='info' href='#fig-call-3pcc'>Figure&nbsp;14<span> (</span><span class='info'>Phone Call: Example of 3PCC</span><span>)</span></a>,
				and takes into account the recommendations provided in <a class='info' href='#RFC3725'>[RFC3725]<span> (</span><span class='info'>Rosenberg, J., Peterson, J., Schulzrinne, H., and G. Camarillo, &ldquo;Best Current Practices for Third Party Call Control (3pcc) in the Session Initiation Protocol (SIP),&rdquo; April&nbsp;2004.</span><span>)</span></a>.
				Only an explainatory sequence diagram is provided, without delving into the
				details of the exchanged SIP messages.
			
</p>
<p>
				<br /><hr class="insert" />
<a name="fig-call-3pcc"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

UAC(1)        UAC(2)                  AS                          MS
  |             |                     |                           |
  | INVITE (offer A)                  |                           |
  |----------------------------------&gt;|                           |
  |             |          100 Trying |                           |
  |&lt;----------------------------------|                           |
  |             |   INVITE (no offer) |                           |
  |             |&lt;--------------------|                           |
  |             | 180 Ringing         |                           |
  |             |--------------------&gt;|                           |
  |             |         180 Ringing |                           |
  |&lt;----------------------------------| INVITE (offer A)          |
  |             |                     |--------------------------&gt;|
  |             |                     |         200 OK (offer A') |
  |             |                     |&lt;--------------------------|
  |             |                     | ACK                       |
  |             |                     |--------------------------&gt;|
  |             | 200 OK (offer B)    |                           |
  |             |--------------------&gt;| INVITE (offer B)          |
  |             |                     |--------------------------&gt;|
  |             |                     |         200 OK (offer B') |
  |             |                     |&lt;--------------------------|
  |             |                     | ACK                       |
  |             |      ACK (offer B') |--------------------------&gt;|
  |             |&lt;--------------------|                           |
  |             |   200 OK (offer A') |                           |
  |&lt;----------------------------------|                           |
  | ACK         |                     |                           |
  |----------------------------------&gt;|                           |
  |             |                     |                           |
  .             .                     .                           .
  .             .                     .                           .

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;14: Phone Call: Example of 3PCC&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

			
</p>
<p>
				In the example, the UAC1 wants to place a phone call to UAC2. To do so,
				it sends an INVITE to the AS with its offer A. The AS sends an offerless
				INVITE to UAC2. When the UAC2 responds with a 180, the same message is
				forwarded by the AS to the UAC1 to notify it the callee is ringing. In
				the meanwhile, the AS also adds a leg to the MS for UAC1, as explained
				in the previous sections: to do so it of course makes use of the offer A
				the UAC1 made. Once the UAC2 accepts the call, by providing its own offer
				B in the 200, the AS adds a leg for it too to the MS. At this point,
				the negotiation can be completed by providing the two UACs with the
				SDP answer negotiated by the MS with them (A' and B' respectively).
			
</p>
<p>
				This is only one way to deal with the signaling, and shall not absolutely
				be considered as a mandatory approach of course.
			
</p>
<p>
				Once the negotiation is over, the two UACs are not in communication yet.
				In fact, it's up to the AS now to actively trigger the MS into attaching
				their media streams to each other someway, by referring to the connection
				identifiers associated with the UACs as explained previously. This document
				presents two different approaches that might be followed, according to what
				needs to be accomplished. A generic media perspective of the phone call
				scenario is depicted in <a class='info' href='#fig-call-rtp'>Figure&nbsp;15<span> (</span><span class='info'>Phone Call: Media Perspective</span><span>)</span></a>: the MS is
				basically in the media path between the two UACs.
			
</p>
<p>
				<br /><hr class="insert" />
<a name="fig-call-rtp"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

+-------+  A (RTP)           +--------+  A (RTP)           +-------+
|  UAC  |===================&gt;| Media  |===================&gt;|  UAC  |
|   A   |&lt;===================| Server |&lt;===================|   B   |
+-------+           B (RTP)  +--------+           B (RTP)  +-------+

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;15: Phone Call: Media Perspective&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

			
</p>
<p>
				From the framework point of view, when the UACs' leg are not attached to
				anything yet, what appears is described in <a class='info' href='#fig-call-noconn'>Figure&nbsp;16<span> (</span><span class='info'>Phone Call: UAC Media Leg not attached</span><span>)</span></a>:
				since there are no connections involving the UACs yet, the frames they might be
				sending are discarded, and nothing is sent to them (except for silence, if it
				is requested to be transmitted).
			
</p>
<p>
				<br /><hr class="insert" />
<a name="fig-call-noconn"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

                                  MS
                           +--------------+
             UAC A         |              |         UAC B
               o-----&gt;&gt;-------x        x.......&gt;&gt;.....o
               o.....&lt;&lt;.......x        x-------&lt;&lt;-----o
                           |              |
                           +--------------+

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;16: Phone Call: UAC Media Leg not attached&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

			
</p>
<a name="sec-call-direct"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2.1"></a><h3>6.2.1.&nbsp;
Direct Connection</h3>

<p>
					The Direct Connection is the easiest and more straightforward approach to
					get the phone call between the two UACs to work. The idea is basically
					the same as the one in the Direct Echo approach: a &lt;join&gt; directive
					is used to directly attach one UAC to the other, by leaving the MS to only
					deal with the transcoding/adaption of the flowing frames, if needed.
				
</p>
<p>
					This approach is depicted in <a class='info' href='#fig-call-direct'>Figure&nbsp;17<span> (</span><span class='info'>Phone Call: Direct Connection</span><span>)</span></a>.
				
</p>
<p>
					<br /><hr class="insert" />
<a name="fig-call-direct"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

                                  MS
                           +--------------+
             UAC A         |              |         UAC B
               o-----&gt;&gt;-------+~~~&gt;&gt;~~~+-------&gt;&gt;-----o
               o-----&lt;&lt;-------+~~~&lt;&lt;~~~+-------&lt;&lt;-----o
                           |              |
                           +--------------+

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;17: Phone Call: Direct Connection&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

				
</p>
<p>
					<br /><hr class="insert" />
<a name="fig-call-direct-scfw"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

 UAC1       UAC2         AS                                   MS
  |           |          |                                    |
  |           |          | 1. CONTROL (join UAC1 to UAC2)     |
  |           |          |++++++++++++++++++++++++++++++++++&gt;&gt;|
  |           |          |                                    |--+ join
  |           |          |                                    |  | UAC1
  |           |          |                          2. 200 OK |&lt;-+ UAC2
  |           |          |&lt;&lt;++++++++++++++++++++++++++++++++++|
  |           |          |                                    |
  |&lt;&lt;#######################################################&gt;&gt;|
  |                UAC1 can hear UAC2 talking                 |
  |&lt;&lt;#######################################################&gt;&gt;|
  |           |          |                                    |
  |           |&lt;&lt;###########################################&gt;&gt;|
  |           |          UAC2 can hear UAC1 talking           |
  |           |&lt;&lt;###########################################&gt;&gt;|
  |           |          |                                    |
  |&lt;*talking*&gt;|          |                                    |
  .           .          .                                    .
  .           .          .                                    .

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;18: Direct Connection: Framework Transactions&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

				
</p>
<p>
					TBD. Describe the framework transaction steps.
				
</p>
<p>
					</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

1. AS -&gt; MS (SCFW CONTROL)
--------------------------
	SCFW 3fg58dd12s49 CONTROL
	Control-Package: msc-conf-audio/1.0
	Content-Type: text/xml
	Content-Length: 89

	&lt;?xml version="1.0"?&gt;
	&lt;join id1="1536067209~913cd14c" \
	      id2="00c09fc35b07~d5d85047"&gt;
	&lt;/join&gt;


2. AS &lt;- MS (SCFW 200 OK)
-----------------------------------
	SCFW 3fg58dd12s49 200
	Content-Type: text/xml
	Content-Length: 70

	&lt;?xml version="1.0"?&gt;
	&lt;response status="200" reason="Join successful"/&gt;

</pre></div><p>

				
</p>
<a name="sec-call-conf"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2.2"></a><h3>6.2.2.&nbsp;
Conference-based Approach</h3>

<p>
					The approach described in <a class='info' href='#sec-call-direct'>Section&nbsp;6.2.1<span> (</span><span class='info'>Direct Connection</span><span>)</span></a> surely works for
					a basic phone call, but has drawbacks when some more advanced features are needed.
					For intance, you can't record the whole conversation, only the single connections, since
					no mixing is involved. In more advanced cases a different approach might be
					taken, like the conference-based approach described in this section.
				
</p>
<p>
					The idea is to make use of a mixing entity in the MS that acts as a bridge between
					the two UACs: the presence of this entity allows for more
					customization on what needs to be done on the conversation, like the recording
					of the conversation that has been provided as example. The approach is
					depicted in <a class='info' href='#fig-call-conf'>Figure&nbsp;19<span> (</span><span class='info'>Phone Call: Conference-based Approach</span><span>)</span></a>. The mixing functionality in the MS
					will be described in more detail in the following section (which deals with many
					conference-related scenarios), so only some hints will be provided here for
					a basic comprehension of the approach.
				
</p>
<p>
					<br /><hr class="insert" />
<a name="fig-call-conf"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

                                   MS
                           +---------------+
             UAC A         |               |         UAC B
               o-----&gt;&gt;-------+~~&gt;{#}::&gt;+:::::::&gt;&gt;:::::o
               o:::::&lt;&lt;:::::::+&lt;::{#}&lt;~~+-------&lt;&lt;-----o
                           |       :       |
                           |       :       |
                           +-------:-------+
                                   :
                                   +::::&gt; (conversation.wav)

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;19: Phone Call: Conference-based Approach&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

				
</p>
<p>
					To identify a single sample scenario, let's consider a phone call the AS wants
					to be recorded.
				
</p>
<p>
					<a class='info' href='#fig-call-conf-scfw'>Figure&nbsp;20<span> (</span><span class='info'>Conference-based Approach: Framework Transactions</span><span>)</span></a> shows how this could be accomplished in the Media
					Control Channel Framework: the example, as usual, hides the previous interaction between the
					UACs and the AS, and instead focuses on the control channel operations and what follows.
				
</p>
<p>
					<br /><hr class="insert" />
<a name="fig-call-conf-scfw"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

 UAC1        UAC2       AS                                 MS
  |           |         |                                  |
  |           |         | A1. CONTROL (create conference)  |
  |           |         |++++++++++++++++++++++++++++++++&gt;&gt;|
  |           |         |                                  |--+ create
  |           |         |                                  |  | conf and
  |           |         |      A2. 200 OK (conferenceid=Y) |&lt;-+ its ID
  |           |         |&lt;&lt;++++++++++++++++++++++++++++++++|
  |           |         |                                  |
  |           |         | B1. CONTROL (record for 10s)     |
  |           |         |++++++++++++++++++++++++++++++++&gt;&gt;|
  |           |         |                          B2. 202 |
  |           |         |&lt;&lt;++++++++++++++++++++++++++++++++|
  |           |         |             B3. REPORT (pending) |
  |           |         |&lt;&lt;++++++++++++++++++++++++++++++++|
  |           |         | B4. 200 OK                       |--+ start
  |           |         |++++++++++++++++++++++++++++++++&gt;&gt;|  | the
  |           |         |           B5. REPORT (terminate) |&lt;-+ dialog
  |           |         |&lt;&lt;++++++++++++++++++++++++++++++++|
  |        Recording +--| B6. 200 OK                       |
  |       of the mix |  |++++++++++++++++++++++++++++++++&gt;&gt;|
  |      has started +-&gt;|                                  |
  |           |         | C1. CONTROL (join UAC1&lt;-&gt;confY)  |
  |           |         |++++++++++++++++++++++++++++++++&gt;&gt;|
  |           |         |                                  |--+  join
  |           |         |                                  |  | UAC1 &amp;
  |           |         |                       C2. 200 OK |&lt;-+ conf Y
  |           |         |&lt;&lt;++++++++++++++++++++++++++++++++|
  |           |         |                                  |
  |&lt;&lt;####################################################&gt;&gt;|
  |        Now the UAC1 is mixed in the conference         |
  |&lt;&lt;####################################################&gt;&gt;|
  |           |         |                                  |
  |           |         | D1. CONTROL (join UAC2&lt;-&gt;confY)  |
  |           |         |++++++++++++++++++++++++++++++++&gt;&gt;|
  |           |         |                                  |--+  join
  |           |         |                                  |  | UAC2 &amp;
  |           |         |                       D2. 200 OK |&lt;-+ conf Y
  |           |         |&lt;&lt;++++++++++++++++++++++++++++++++|
  |           |         |                                  |
  |           |&lt;&lt;########################################&gt;&gt;|
  |           |         Now the UAC2 is mixed too          |
  |           |&lt;#########################################&gt;&gt;|
  |           |         |                                  |
  |&lt;*talking*&gt;|         |                                  |
  |           |         |                                  |
  .           .         .                                  .
  .           .         .                                  .

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;20: Conference-based Approach: Framework Transactions&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

				
</p>
<p>
					TBD. Describe the framework transaction steps.
				
</p>
<p>
					</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

		(Framework transactions not available yet).

</pre></div><p>

				
</p>
<a name="sec-voicemail"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.3"></a><h3>6.3.&nbsp;
Voice Mail</h3>

<p>
				Another application that typically makes use of the
				services a MS can provide is Voice Mail. In fact, while
				it is clear that many of its features are part of the
				application logic (e.g. the mapping of a URI with a
				specific user's voice mailbox, the list of messages
				and their properties, and so on), the actual media
				work is accomplished through the MS. Features needed
				by a VoiceMail application include the ability to
				record a stream and play it back anytime later,
				give verbose announcements regarding the status
				of the application, controlling the playout of
				recorded messages by means of VCR controls and so
				on, all features which are supported by the MS
				through the Basic IVR package.
			
</p>
<p>
				Without delving into the details of a full VoiceMail
				application and all its possible use cases, this section
				will cover a specific scenario, trying to deal with
				as many as possible interactions that may happen
				between the AS and the MS in such a context. The
				covered scenario, depicted as a sequence diagram
				in <a class='info' href='#fig-voicemail-scfw'>Figure&nbsp;21<span> (</span><span class='info'>Voice Mail: Framework Transactions</span><span>)</span></a>, will be the following:
			
</p>
<p>
				</p>
<ol class="text">
<li>The UAC INVITEs a URI associated with his mailbox, and the AS follows
						the already explained procedure to have the UAC negotiate a new
						media session with the MS;
</li>
<li>The UAC is first prompted an announcement giving him a count of the
						available new messages in the mailbox, and the date and time
						the last message has been received;
</li>
<li>The UAC is then presented with a VCR controlled announcement, in which
						the latest received mail is played back to him; VCR controls allow
						him to navigate through the prompt.
</li>
</ol><p>
			
</p>
<p>This is a quite oversimplified scenario, considering it doesn't even allow the UAC
				to choose which received message to play. Nevertheless, it gives us the chance
				to deal with variable announcements and VCR controls, two typical features a
				Voice Mail application would almost always take advantage of. Besides, other
				features a Voice Mail application would rely upon (e.g. recording streams,
				event driven IVR menus and so on) have aready been introduced in previous
				sections, and so representing them would be redundant.
			
</p>
<p>
				<br /><hr class="insert" />
<a name="fig-voicemail-scfw"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

 UAC                      AS                                 MS
  |                       |                                  |
  |                       | A1. CONTROL (play variables)     |
  |                       |++++++++++++++++++++++++++++++++&gt;&gt;|
  |                       |                          A2. 202 |
  |                       |&lt;&lt;++++++++++++++++++++++++++++++++|
  |                       |             A3. REPORT (pending) |
  |                       |&lt;&lt;++++++++++++++++++++++++++++++++| prepare &amp;
  |                       | A4. 200 OK                       |--+ start
  |                       |++++++++++++++++++++++++++++++++&gt;&gt;|  | the
  |                       |           A5. REPORT (terminate) |&lt;-+ dialog
  |                       |&lt;&lt;++++++++++++++++++++++++++++++++|
  |                       | A6. 200 OK                       |
  |                       |++++++++++++++++++++++++++++++++&gt;&gt;|
  |                       |                                  |
  |&lt;&lt;########################################################|
  |             "5 mails, latest received on ..."            |
  |&lt;&lt;########################################################|
  |                       |                                  |
  |                       |       B1. CONTROL (&lt;promptinfo&gt;) |
  |                       |&lt;&lt;++++++++++++++++++++++++++++++++|
  |                       | B2. 200 OK                       |
  |                       |++++++++++++++++++++++++++++++++&gt;&gt;|
  |                       |                                  |
  |                       | C1. CONTROL (play and VCR)       |
  |                       |++++++++++++++++++++++++++++++++&gt;&gt;|
  |                       |                          C2. 202 |
  |                       |&lt;&lt;++++++++++++++++++++++++++++++++|
  |                       |             C3. REPORT (pending) |
  |                       |&lt;&lt;++++++++++++++++++++++++++++++++| prepare &amp;
  |                       | C4. 200 OK                       |--+ start
  |                       |++++++++++++++++++++++++++++++++&gt;&gt;|  | the
  |                       |           C5. REPORT (terminate) |&lt;-+ dialog
  |                       |&lt;&lt;++++++++++++++++++++++++++++++++|
  |                       | C6. 200 OK                       |
  |                       |++++++++++++++++++++++++++++++++&gt;&gt;|
  |                       |                                  |
  |&lt;&lt;########################################################|
  |          "Hi there, I tried to call you but..."          |--+
  |&lt;&lt;########################################################|  | handle
  |                       |                                  |  | VCR
  |########################################################&gt;&gt;|  | driven
  |        The UAC controls the playout using DTMF           |  | (DTMF)
  |########################################################&gt;&gt;|  | playout
  |                       |                                  |&lt;-+
  |                       |      D1. CONTROL (&lt;collectinfo&gt;) |
  |                       |&lt;&lt;++++++++++++++++++++++++++++++++|
  |                       | D2. 200 OK                       |
  |                       |++++++++++++++++++++++++++++++++&gt;&gt;|
  |                       |                                  |
  .                       .                                  .
  .                       .                                  .

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;21: Voice Mail: Framework Transactions&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

			
</p>
<p>
				TBD. Describe the framework transaction steps.
			
</p>
<p>
				</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

A1. AS -&gt; MS (SCFW CONTROL, play)
---------------------------------
	SCFW 1gffh68hydx0 CONTROL
	Control-Package: msc-ivr-basic
	Content-Type: text/xml
	Content-Length: 271

	&lt;?xml version="1.0"?&gt;
	&lt;dialogstart conferenceid="1cc1a27"&gt;
	   &lt;basicivr&gt;
	      &lt;prompt bargein=false" maxduration="15s"&gt;
	         &lt;media src="http://www.ms.org/prompts/youhave.wav"
			type="audio/wav"/&gt;
		 &lt;variable value="5" type="digits"/&gt;
	         &lt;media src="http://www.ms.org/prompts/mails.wav"
			type="audio/wav"/&gt;
		 &lt;media src="http://www.ms.org/prompts/lastreceived.wav"
			type="audio/wav"/&gt;
		 &lt;variable value="2008-03-07" type="date" format="ymd"/&gt;
		 &lt;variable value="11:09" type="time" format="t24"/&gt;
	      &lt;/prompt&gt;
	   &lt;/basicivr&gt;
	&lt;/dialogstart&gt;


A2. AS &lt;- MS (SCFW 202)
-----------------------
	SCFW 1gffh68hydx0 202


A3. AS &lt;- MS (SCFW REPORT pending)
----------------------------------
	SCFW 1gffh68hydx0 REPORT
	Seq: 1
	Status: pending
	Timeout: 10


A4. AS -&gt; MS (SCFW 200, ACK to 'REPORT pending')
------------------------------------------------
	SCFW 1gffh68hydx0 200
	Seq: 1


A5. AS &lt;- MS (SCFW REPORT terminate)
------------------------------------
	SCFW 1gffh68hydx0 REPORT
	Seq: 2
	Status: terminate
	Timeout: 15
	Content-Type: text/xml
	Content-Length: 88

	&lt;?xml version="1.0"?&gt;
	&lt;response status="200" reason="Dialog started" \
		  dialogid="6jwwf5r"/&gt;


A6. AS -&gt; MS (SCFW 200, ACK to 'REPORT terminate')
--------------------------------------------------
	SCFW 1gffh68hydx0 200
	Seq: 2


B1. AS &lt;- MS (SCFW CONTROL event)
---------------------------------
	SCFW hf47fg474fge CONTROL
	Control-Package: msc-ivr-basic/1.0
	Content-Type: text/xml
	Content-Length: 126

	&lt;?xml version="1.0"?&gt;
	&lt;event dialogid="6jwwf5r"&gt;
	   &lt;dialogexit status="1"&gt;
	      &lt;promptinfo duration="12300" termmode="completed"/&gt;
	   &lt;dialogexit/&gt;
	&lt;/event&gt;


B2. AS -&gt; MS (SCFW 200, ACK to 'CONTROL event')
-----------------------------------------------
	SCFW hf47fg474fge 200


C1. AS -&gt; MS (SCFW CONTROL, VCR)
--------------------------------
	SCFW p0ofgh35vzx1 CONTROL
	Control-Package: msc-ivr-basic
	Content-Type: text/xml
	Content-Length: 271

	&lt;?xml version="1.0"?&gt;
	&lt;dialogstart conferenceid="1cc1a27"&gt;
	   &lt;basicivr&gt;
	      &lt;prompt maxduration="300s"&gt;
	         &lt;media src="http://www.ms.org/recordings/recording-54fcb22.wav"
			type="audio/wav"/&gt;
	      &lt;/prompt&gt;
	      &lt;collect ffkey="6" rwkey="4" pausekey="7" resumekey="9"/&gt;
	   &lt;/basicivr&gt;
	&lt;/dialogstart&gt;


C2. AS &lt;- MS (SCFW 202)
-----------------------
	SCFW p0ofgh35vzx1 202


C3. AS &lt;- MS (SCFW REPORT pending)
----------------------------------
	SCFW p0ofgh35vzx1 REPORT
	Seq: 1
	Status: pending
	Timeout: 10


C4. AS -&gt; MS (SCFW 200, ACK to 'REPORT pending')
------------------------------------------------
	SCFW p0ofgh35vzx1 200
	Seq: 1


C5. AS &lt;- MS (SCFW REPORT terminate)
------------------------------------
	SCFW p0ofgh35vzx1 REPORT
	Seq: 2
	Status: terminate
	Timeout: 15
	Content-Type: text/xml
	Content-Length: 88

	&lt;?xml version="1.0"?&gt;
	&lt;response status="200" reason="Dialog started" \
		  dialogid="1aa30g5"/&gt;


C6. AS -&gt; MS (SCFW 200, ACK to 'REPORT terminate')
--------------------------------------------------
	SCFW p0ofgh35vzx1 200
	Seq: 2


D1. AS &lt;- MS (SCFW CONTROL event)
---------------------------------
	SCFW 4rfg34fg21ge CONTROL
	Control-Package: msc-ivr-basic/1.0
	Content-Type: text/xml
	Content-Length: 126

	&lt;?xml version="1.0"?&gt;
	&lt;event dialogid="1aa30g5"&gt;
	   &lt;dialogexit status="1"&gt;
	      &lt;collectinfo dtmf="46679" termmode="match"/&gt;
	   &lt;dialogexit/&gt;
	&lt;/event&gt;


D2. AS -&gt; MS (SCFW 200, ACK to 'CONTROL event')
-----------------------------------------------
	SCFW 4rfg34fg21ge 200

</pre></div><p>

			
</p>
<a name="sec-conference"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.4"></a><h3>6.4.&nbsp;
Conferencing</h3>

<p>
				One of the most important services the MS must be able to provide is mixing. This
				involves mixing media streams from different sources, and delivering the resulting
				mix(es) to each interested party, often according to per-user policies, settings
				and encoding. A typical scenario involving mixing is of course media conferencing.
				In such a scenario, the media sent by each participant is mixed, and each participant
				typically receives the overall mix excluding its own contribtion and encoded in
				the format it negotiated. This example points out in a quite clear way how mixing
				must take care of the profile of each involved entity.
			
</p>
<p>
				A media perspective of such a scenario is depicted in <a class='info' href='#fig-conf-rtp'>Figure&nbsp;22<span> (</span><span class='info'>Conference: Media Perspective</span><span>)</span></a>.
			
</p>
<p>
				<br /><hr class="insert" />
<a name="fig-conf-rtp"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

                             +-------+
                             |  UAC  |
                             |   C   |
                             +-------+
                                " ^
                        C (RTP) " "
                                " "
                                " " A+B (RTP)
                                v "
+-------+  A (RTP)           +--------+  A+C (RTP)         +-------+
|  UAC  |===================&gt;| Media  |===================&gt;|  UAC  |
|   A   |&lt;===================| Server |&lt;===================|   B   |
+-------+         B+C (RTP)  +--------+           B (RTP)  +-------+

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;22: Conference: Media Perspective&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

			
</p>
<p>
				From the framework point of view, when the UACs' legs are not attached to
				anything yet, what appears is described in <a class='info' href='#fig-conf-noconn'>Figure&nbsp;23<span> (</span><span class='info'>Conference: UAC Legs not attached</span><span>)</span></a>:
				since there are no connections involving the UACs yet, the frames they might be
				sending are discarded, and nothing is sent back to them either (except for silence,
				if it is requested to be transmitted).
			
</p>
<p>
				<br /><hr class="insert" />
<a name="fig-conf-noconn"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

                                  MS
                          +----------------+
            UAC A         |                |         UAC B
              o-----&gt;&gt;-------x          x.......&gt;&gt;.....o
              o.....&lt;&lt;.......x          x-------&lt;&lt;-----o
                          |                |
                          |                |
                          |       xx       |
                          |       |.       |
                          +-------|.-------+
                                  |.
                                  ^v
                                  ^v
                                  |.
                                  oo
                                UAC C

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;23: Conference: UAC Legs not attached&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

			
</p>
<p>
				The next subsections will cover several typical scenarios involving mixing and
				conferencing as a whole, specifically:
			
</p>
<p>
				</p>
<ol class="text">
<li>Simple Bridging, where the scenario will be a very basic (i.e. no &quot;special effects&quot;,
						just mixing involved) conference between two and more participants;
</li>
<li>Rich Conference Scenario, which enriches the Simple Bridging scenario by adding additional
						features typically found in conferencing systems (e.g. DTMF collection for PIN-based conference
						access, private and global announcements, recordings and so on);
</li>
<li>Coaching Scenario, a more complex scenario which involves per-user mixing (cusomers, agents
						and coaches don't get all the same mixes);
</li>
<li>Sidebars Scenario, which adds more complexity to the previous conferencing scenarios by
						involving sidebars (i.e. separate conference instances that only exist within the
						context of a parent conference instance) and the custom media delivery that follows.
</li>
</ol><p>
			
</p>
<p>
				All the above mentioned scenarios depend on the availability of a mixing entity. Such an
				entity is provided in the Media Control Channel Framework by the conferencing package. This package
				in fact, besides allowing for the joining of media sources between each other as seen in the
				Direct Echo Test section, enables the creation of abstract connections that can be joined to
				multiple connections: these abstract connections, called conferences, mix the contribution
				of each attached connection and feed them accordingly (e.g. a connection with 'sendrecv' property
				would be able to contribute to the mix and to listen to it, while a connection with a
				'recvonly' property would only be able to listen to the overall mix but not to actively
				contribute to it).
			
</p>
<p>
				That said, each of the above mentioned scenarios will start more or less in the same way: by the
				creation of a conference connection (or more than one, as needed in some cases) to be
				subsequently referred to when it comes to mixing. A typical framework transaction to
				crete a new conference instance in the Media Control Channel Framework is depicted in
				<a class='info' href='#fig-conf-common-scfw'>Figure&nbsp;24<span> (</span><span class='info'>Conference: Framework Transactions</span><span>)</span></a>:
			
</p>
<p>
				<br /><hr class="insert" />
<a name="fig-conf-common-scfw"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

                 AS                                 MS
                 |                                  |
                 | 1. CONTROL (create conference)   |
                 |++++++++++++++++++++++++++++++++&gt;&gt;|
                 |                                  |--+ create
                 |                                  |  | conf and
                 |       2. 200 OK (conferenceid=Y) |&lt;-+ its ID
                 |&lt;&lt;++++++++++++++++++++++++++++++++|
      map URI +--|                                  |
       X with |  |                                  |
       conf Y +-&gt;|                                  |
                 |                                  |
                 .                                  .
                 .                                  .

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;24: Conference: Framework Transactions&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

			
</p>
<p>
				The call flow is quite straightforward, and can typically be summarized in the following steps:
			
</p>
<p>
				</p>
<ul class="text">
<li>The AS invokes the creation of a new conference instance by means of a CONTROL
					request (1); this request is addressed to the conferencing package (msc-conf-audio/1.0)
					and contains in the body the directive (createconference) with all the desired
					settings for it; in the example, the mixing policy is to mix the five (reserved-talkers)
					loudest speakers (nbest), while ten listeners at max are allowed; finally, the AS also
					subscribes to the &quot;active-talkers&quot; event, which means it wants to be informed
					(at a rate of 3 seconds) whenever an active participant is speaking;
</li>
<li>The MS creates the conference instance assigning a unique identifier to it
						(1cc1a27), and completes the transaction with a 200 response (2);
</li>
<li>At this point, the requested conference instance is active and ready to be used
						by the AS; it is then up to the AS to integrate the use of this identifier
						in its application logic.
</li>
</ul><p>
			
</p>
<p>
				</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

1. AS -&gt; MS (SCFW CONTROL)
------------------------
	SCFW 238e1f2946e8 CONTROL
	Control-Package: msc-conf-audio/1.0
	Content-Type: text/xml
	Content-Length: 311

	&lt;?xml version="1.0"?&gt;
	&lt;createconference&gt;
	   &lt;audio-mixing mix-type="nbest"/&gt;
	   &lt;reserved-talkers&gt;5&lt;/reserved-talkers&gt;
	   &lt;subscribe&gt;
	      &lt;notify name="active-talkers"&gt;
	         &lt;data&gt;
	            &lt;item name="interval" value="3s"/&gt;
	         &lt;/data&gt;
	      &lt;/notify&gt;
	   &lt;/subscribe&gt;
	   &lt;reserved-listeners&gt;10&lt;/reserved-listeners&gt;
	&lt;/createconference&gt;

2. AS &lt;- MS (SCFW 200)
----------------------
	SCFW 238e1f2946e8 200
	Content-Type: text/xml
	Content-Length: 91

	&lt;?xml version="1.0"?&gt;
	&lt;response status="200" reason="Conference created" \
		  conferenceid="1cc1a27"/&gt;

</pre></div><p>

			
</p>
<a name="sec-conf-bridge"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.4.1"></a><h3>6.4.1.&nbsp;
Simple Bridging</h3>

<p>
					As already introduced before, the simplest use an AS can make of a
					conference instance is simple bridging. In this scenario, the conference
					instance just acts as a bridge for all the participants that are attached
					to it. The bridge takes care of transcoding, if needed (in general,
					different participants may make use of different codecs for their streams),
					echo cancellation (each participant will receive the overall mix excluding
					their own contribution) and per-participant mixing (each participant may
					receive different mixed streams, according to what it needs/is allowed to
					send/receive). This assumes of course that each interested participant
					must be joined somehow to the bridge in order to indirectly communicate
					with the other paricipants. From the media perspective, the scenario
					can be seen as depicted in <a class='info' href='#fig-conf-simple'>Figure&nbsp;25<span> (</span><span class='info'>Conference: Simple Bridging</span><span>)</span></a>.
				
</p>
<p>
					<br /><hr class="insert" />
<a name="fig-conf-simple"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

                                   MS
                          +-----------------+
            UAC A         |                 |         UAC B
              o-----&gt;&gt;-------+~~~&gt;{##}:::&gt;+:::::::&gt;&gt;:::::o
              o:::::&lt;&lt;:::::::+&lt;:::{##}&lt;~~~+-------&lt;&lt;-----o
                          |        ^:       |
                          |        |v       |
                          |        ++       |
                          |        |:       |
                          +--------|:-------+
                                   |:
                                   ^v
                                   ^v
                                   |:
                                   oo
                                 UAC C

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;25: Conference: Simple Bridging&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

				
</p>
<p>
					In the framework, the first step is obviously to create a new conference
					instance as seen in the introductory section (<a class='info' href='#fig-conf-common-scfw'>Figure&nbsp;24<span> (</span><span class='info'>Conference: Framework Transactions</span><span>)</span></a>).
					Assuming a conference instance has already been created, bridging participants to
					it is quite straightforward, and can be accomplished as already seen in the
					Direct Echo Test Scenario: the only difference here is that each participant
					is not directly connected to itself (Direct Echo) or another UAC (Direct Connection)
					but to the bridge instead. <a class='info' href='#fig-conf-simple1-scfw'>Figure&nbsp;26<span> (</span><span class='info'>Simple Bridging: Framework Transactions (1)</span><span>)</span></a> shows the
					example of two different UACs joining the same conference: the example, as usual, hides the
					previous interaction between each of the two UACs and the AS, and instead focuses
					on what the AS does to actually join the participants to the bridge so that
					they can interact in a conference.
				
</p>
<p>
					<br /><hr class="insert" />
<a name="fig-conf-simple1-scfw"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

 UAC1      UAC2         AS                                   MS
  |          |          |                                    |
  |          |          | A1. CONTROL (join UAC1 and confY)  |
  |          |          |++++++++++++++++++++++++++++++++++&gt;&gt;|
  |          |          |                                    |--+  join
  |          |          |                                    |  | UAC1 &amp;
  |          |          |                         A2. 200 OK |&lt;-+ conf Y
  |          |          |&lt;&lt;++++++++++++++++++++++++++++++++++|
  |          |          |                                    |
  |&lt;&lt;######################################################&gt;&gt;|
  |          Now the UAC1 is mixed in the conference         |
  |&lt;&lt;######################################################&gt;&gt;|
  |          |          |                                    |
  |          |          | B1. CONTROL (join UAC2 and confY)  |
  |          |          |++++++++++++++++++++++++++++++++++&gt;&gt;|
  |          |          |                                    |--+  join
  |          |          |                                    |  | UAC2 &amp;
  |          |          |                         B2. 200 OK |&lt;-+ conf Y
  |          |          |&lt;&lt;++++++++++++++++++++++++++++++++++|
  |          |          |                                    |
  |          |&lt;&lt;###########################################&gt;&gt;|
  |          |  Now the UAC2 too is mixed in the conference  |
  |          |&lt;&lt;###########################################&gt;&gt;|
  |          |          |                                    |
  .          .          .                                    .
  .          .          .                                    .

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;26: Simple Bridging: Framework Transactions (1)&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

				
</p>
<p>
					TBD. Describe the framework transaction steps.
				
</p>
<p>
					</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

A1. AS -&gt; MS (SCFW CONTROL)
--------------------------
	SCFW 3fg58dd12s49 CONTROL
	Control-Package: msc-conf-audio/1.0
	Content-Type: text/xml
	Content-Length: 75

	&lt;?xml version="1.0"?&gt;
	&lt;join id1="1536067209~913cd14c" \
	      id2="1cc1a27"&gt;
	&lt;/join&gt;


A2. AS &lt;- MS (SCFW 200 OK)
-----------------------------------
	SCFW 3fg58dd12s49 200
	Content-Type: text/xml
	Content-Length: 70

	&lt;?xml version="1.0"?&gt;
	&lt;response status="200" reason="Join successful"/&gt;


B1. AS -&gt; MS (SCFW CONTROL)
--------------------------
	SCFW 6fg25gds2451 CONTROL
	Control-Package: msc-conf-audio/1.0
	Content-Type: text/xml
	Content-Length: 77

	&lt;?xml version="1.0"?&gt;
	&lt;join id1="00c09fc35b07~d5d85047" \
	      id2="1cc1a27"&gt;
	&lt;/join&gt;


B2. AS &lt;- MS (SCFW 200 OK)
-----------------------------------
	SCFW 6fg25gds2451 200
	Content-Type: text/xml
	Content-Length: 70

	&lt;?xml version="1.0"?&gt;
	&lt;response status="200" reason="Join successful"/&gt;

</pre></div><p>

				
</p>
<p>
					Once one or more participants have been attached to the bridge, their
					connections and how their media are handled by the bridge can be dynamically
					manipulated by means of another directive, called &lt;modifyjoin&gt;: a typical
					use case for this directive is the change of direction of an existing media
					(e.g. a previously speaking participant is muted, which means its media
					direction changes from 'sendrecv' to 'recvonly'). <a class='info' href='#fig-conf-simple2-scfw'>Figure&nbsp;27<span> (</span><span class='info'>Simple Bridging: Framework Transactions (2)</span><span>)</span></a>
					shows how a framework transaction requesting such a directive might appear.
				
</p>
<p>
					<br /><hr class="insert" />
<a name="fig-conf-simple2-scfw"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

 UAC1      UAC2         AS                                 MS
  |          |          |                                  |
  |          |          | 1. CONTROL (modifyjoin UAC1)     |
  |          |          |++++++++++++++++++++++++++++++++&gt;&gt;|
  |          |          |                                  |--+ modify
  |          |          |                                  |  | join
  |          |          |                        2. 200 OK |&lt;-+ settings
  |          |          |&lt;&lt;++++++++++++++++++++++++++++++++|
  |          |          |                                  |
  |&lt;&lt;######################################################|
  |    Now the UAC1 can receive but not send (recvonly)    |
  |&lt;&lt;######################################################|
  |          |          |                                  |
  .          .          .                                  .
  .          .          .                                  .

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;27: Simple Bridging: Framework Transactions (2)&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

				
</p>
<p>
					TBD. Describe the framework transaction steps.
				
</p>
<p>
					</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

1. AS -&gt; MS (SCFW CONTROL)
--------------------------
	SCFW 2fdgrt46az11 CONTROL
	Control-Package: msc-conf-audio/1.0
	Content-Type: text/xml
	Content-Length: 133

	&lt;?xml version="1.0"?&gt;
	&lt;modifyjoin id1="1536067209~913cd14c" \
		    id2="1cc1a27"&gt;
		&lt;stream media="audio" label="25547c8" \
			direction="recvonly"/&gt;
	&lt;/modifyjoin&gt;


2. AS &lt;- MS (SCFW 200 OK)
-----------------------------------
	SCFW 2fdgrt46az11 200
	Content-Type: text/xml
	Content-Length: 76

	&lt;?xml version="1.0"?&gt;
	&lt;response status="200" reason="Modifyjoin successful"/&gt;

</pre></div><p>

				
</p>
<a name="sec-conf-complex"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.4.2"></a><h3>6.4.2.&nbsp;
Rich Conference Scenario</h3>

<p>
					The previous scenario can be enriched with additional features often
					found in existing conferencing systems. Typical examples include IVR-based
					menus (e.g. the DTMF collection for PIN-based conference access), partial and
					complete recordings in the conference (e.g. for the "state your name" functionality
					and recording of the whole conference), private and global announcements and so
					on. All of this can be achieved by means of the functionality provided by the MS.
					In fact, even if the conferencing and IVR features come from different packages,
					the AS can interact with both of them and achieve complex results by
					correlating the results of different transactions in its application logic.
				
</p>
<p>
					From the media and framework perspective, a typical rich conferencing scenario
					can be seen as it is depicted in <a class='info' href='#fig-conf-rich'>Figure&nbsp;28<span> (</span><span class='info'>Conference: Rich Conference Scenario</span><span>)</span></a>.
				
</p>
<p>
					<br /><hr class="insert" />
<a name="fig-conf-rich"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

                                   MS
                                    +-------- (announcement.wav)
  (conference_recording.wav) &lt;:::::+|
                                   :|
                          +--------:|--------+
            UAC A         |        :v        |         UAC B
              o-----&gt;&gt;-------+~~~&gt;{##}:::&gt;+:::::::&gt;&gt;:::::o
              o:::::&lt;&lt;:::::::+&lt;:::{##}&lt;~~~+-------&lt;&lt;-----o
                          |        ^:     |  |
                          |        |v     v  |
                          |        ++     * (collect DTMF, get name)
                          |        |:        |
                          +--------|:--------+
                                   |:
                                   ^v
                                   ^v
                                   |:
                                   oo
                                 UAC C

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;28: Conference: Rich Conference Scenario&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

				
</p>
<p>
					To identify a single sample scenario, let's consider this sequence for a participant
					joining a conference (which again we assume has already been created):
				
</p>
<p>
					</p>
<ol class="text">
<li>The UAC as usual INVITEs a URI associated with a conference, and the AS follows the already explained procedure to have the UAC negotiate a new media session with the MS;
</li>
<li>The UAC is presented with an IVR menu, in which it is requested to digit a PIN code to access the conference;
</li>
<li>If the PIN is correct, the UAC is asked to state its name so that it can be recorded;
</li>
<li>The UAC is attached to the conference, and the previously recorded name is announced globally to the conference to announce its arrival.
</li>
</ol><p>
				
</p>
<p>
					<a class='info' href='#fig-conf-rich-scfw'>Figure&nbsp;29<span> (</span><span class='info'>Rich Conference Scenario: Framework Transactions</span><span>)</span></a> shows a single UAC joining a conference:
					the example, as usual, hides the previous interaction between the UAC and the AS, and
					instead focuses on what the AS does to actually interact with the participant and join
					it to the conference bridge.
				
</p>
<p>
					<br /><hr class="insert" />
<a name="fig-conf-rich-scfw"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

 UAC                      AS                                 MS
  |                       |                                  |
  |                       | A1. CONTROL (request DTMF PIN)   |
  |                       |++++++++++++++++++++++++++++++++&gt;&gt;|
  |                       |                          A2. 202 |
  |                       |&lt;&lt;++++++++++++++++++++++++++++++++|
  |                       |             A3. REPORT (pending) |
  |                       |&lt;&lt;++++++++++++++++++++++++++++++++|
  |                       | A4. 200 OK                       |--+ start
  |                       |++++++++++++++++++++++++++++++++&gt;&gt;|  | the
  |                       |           A5. REPORT (terminate) |&lt;-+ dialog
  |                       |&lt;&lt;++++++++++++++++++++++++++++++++|
  |                       | A6. 200 OK                       |
  |                       |++++++++++++++++++++++++++++++++&gt;&gt;|
  |                       |                                  |
  |&lt;&lt;########################################################|
  |   "Please digit the PIN number to join the conference"   |
  |&lt;&lt;########################################################|
  |                       |                                  |
  |########################################################&gt;&gt;|
  |                   DTMF digits are collected              |--+ get
  |########################################################&gt;&gt;|  | DTMF
  |                       |                                  |&lt;-+ digits
  |                       |      B1. CONTROL (&lt;collectinfo&gt;) |
  |                       |&lt;&lt;++++++++++++++++++++++++++++++++|
  |       Compare DTMF +--| B2. 200 OK                       |
  |        digits with |  |++++++++++++++++++++++++++++++++&gt;&gt;|
  |     the PIN number +-&gt;|                                  |
  |                       | C1. CONTROL (record name)        |
  |                       |++++++++++++++++++++++++++++++++&gt;&gt;|
  |                       |                          C2. 202 |
  |                       |&lt;&lt;++++++++++++++++++++++++++++++++|
  |                       |             C3. REPORT (pending) |
  |                       |&lt;&lt;++++++++++++++++++++++++++++++++|
  |                       | C4. 200 OK                       |--+ start
  |                       |++++++++++++++++++++++++++++++++&gt;&gt;|  | the
  |                       |           C5. REPORT (terminate) |&lt;-+ dialog
  |                       |&lt;&lt;++++++++++++++++++++++++++++++++|
  |                       | C6. 200 OK                       |
  |                       |++++++++++++++++++++++++++++++++&gt;&gt;|
  |                       |                                  |
  |&lt;&lt;########################################################|
  |          "Please state your name after the beep"         |
  |&lt;&lt;########################################################|
  |                       |                                  |
  |########################################################&gt;&gt;|
  |  Audio from the UAC is recorded (until timeout or DTMF)  |--+ save
  |########################################################&gt;&gt;|  | in a
  |                       |                                  |&lt;-+ file
  |                       |       D1. CONTROL (&lt;recordinfo&gt;) |
  |                       |&lt;&lt;++++++++++++++++++++++++++++++++|
  |     Store recorded +--| D2. 200 OK                       |
  |       file to play |  |++++++++++++++++++++++++++++++++&gt;&gt;|
  |    announcement in +-&gt;|                                  |
  |   conference later    |                                  |
  |                       | E1. CONTROL (join UAC &amp; confY)   |
  |                       |++++++++++++++++++++++++++++++++&gt;&gt;|
  |                       |                                  |--+ join
  |                       |                                  |  | UAC &amp;
  |                       |                       E2. 200 OK |&lt;-+ conf Y
  |                       |&lt;+++++++++++++++++++++++++++++++++|
  |                       |                                  |
  |&lt;&lt;######################################################&gt;&gt;|
  |     UAC is now included in the mix of the conference     |
  |&lt;&lt;######################################################&gt;&gt;|
  |                       |                                  |
  |                       | F1. CONTROL (play name on confY) |
  |                       |++++++++++++++++++++++++++++++++&gt;&gt;|
  |                       |                          F2. 202 |
  |                       |&lt;&lt;++++++++++++++++++++++++++++++++|
  |                       |             F3. REPORT (pending) |
  |                       |&lt;&lt;++++++++++++++++++++++++++++++++|
  |                       | F4. 200 OK                       |--+ start
  |                       |++++++++++++++++++++++++++++++++&gt;&gt;|  | the
  |                       |           F5. REPORT (terminate) |&lt;-+ dialog
  |                       |&lt;&lt;++++++++++++++++++++++++++++++++|
  |                       | F6. 200 OK                       |
  |                       |++++++++++++++++++++++++++++++++&gt;&gt;|
  |                       |                                  |
  |&lt;&lt;########################################################|
  |  Global announcement: "Simon has joined the conference"  |
  |&lt;&lt;########################################################|
  |                       |                                  |
  |                       |       G1. CONTROL (&lt;promptinfo&gt;) |
  |                       |&lt;&lt;++++++++++++++++++++++++++++++++|
  |                       | G2. 200 OK                       |
  |                       |++++++++++++++++++++++++++++++++&gt;&gt;|
  |                       |                                  |
  .                       .                                  .
  .                       .                                  .

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;29: Rich Conference Scenario: Framework Transactions&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

				
</p>
<p>
					TBD. Describe the framework transaction steps.
				
</p>
<p>
					</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

A1. AS -&gt; MS (SCFW CONTROL, collect)
------------------------------------
	SCFW 238e1f2946e8 CONTROL
	Control-Package: msc-ivr-basic
	Content-Type: text/xml
	Content-Length: 260

	&lt;?xml version="1.0"?&gt;
	&lt;dialogstart connectionid="1536067209~913cd14c"&gt;
	   &lt;basicivr&gt;
	      &lt;prompt bargein="false"&gt;
	         &lt;media src="http://www.ms.org/prompts/getpin.wav"
			type="audio/wav"/&gt;
	      &lt;/prompt&gt;
	      &lt;collect maxdigits="4" escapekey="*"/&gt;
	   &lt;/basicivr&gt;
	&lt;/dialogstart&gt;


A2. AS &lt;- MS (SCFW 202)
-----------------------
	SCFW 238e1f2946e8 202


A3. AS &lt;- MS (SCFW REPORT pending)
----------------------------------
	SCFW 238e1f2946e8 REPORT
	Seq: 1
	Status: pending
	Timeout: 10


A4. AS -&gt; MS (SCFW 200, ACK to 'REPORT pending')
------------------------------------------------
	SCFW 238e1f2946e8 200
	Seq: 1


A5. AS &lt;- MS (SCFW REPORT terminate)
------------------------------------
	SCFW 238e1f2946e8 REPORT
	Seq: 2
	Status: terminate
	Timeout: 15
	Content-Type: text/xml
	Content-Length: 88

	&lt;?xml version="1.0"?&gt;
	&lt;response status="200" reason="Dialog started" \
		  dialogid="2fe9bf0"/&gt;


A6. AS -&gt; MS (SCFW 200, ACK to 'REPORT terminate')
--------------------------------------------------
	SCFW 238e1f2946e8 200
	Seq: 2


B1. AS &lt;- MS (SCFW CONTROL event)
---------------------------------
	SCFW 734227ed7ce9 CONTROL
	Control-Package: msc-ivr-basic/1.0
	Content-Type: text/xml
	Content-Length: 126

	&lt;?xml version="1.0"?&gt;
	&lt;event dialogid="2fe9bf0"&gt;
	   &lt;dialogexit status="1"&gt;
	      &lt;collectinfo dtmf="1234" termmode="match"/&gt;
	   &lt;dialogexit/&gt;
	&lt;/event&gt;


B2. AS -&gt; MS (SCFW 200, ACK to 'CONTROL event')
-----------------------------------------------
	SCFW 734227ed7ce9 200


C1. AS -&gt; MS (SCFW CONTROL, record)
-----------------------------------
	SCFW 2eb141f241b7 CONTROL
	Control-Package: msc-ivr-basic
	Content-Type: text/xml
	Content-Length: 257

	&lt;?xml version="1.0"?&gt;
	&lt;dialogstart connectionid="1536067209~913cd14c"&gt;
	   &lt;basicivr&gt;
	      &lt;prompt&gt;
	         &lt;media src="http://www.ms.org/prompts/rec-name.wav"
			type="audio/wav"/&gt;
	      &lt;/prompt&gt;
	      &lt;record beep="true" maxtime="5s"/&gt;
	   &lt;/basicivr&gt;
	&lt;/dialogstart&gt;


C2. AS &lt;- MS (SCFW 202)
-----------------------
	SCFW 2eb141f241b7 202


C3. AS &lt;- MS (SCFW REPORT pending)
----------------------------------
	SCFW 2eb141f241b7 REPORT
	Seq: 1
	Status: pending
	Timeout: 10


C4. AS -&gt; MS (SCFW 200, ACK to 'REPORT pending')
------------------------------------------------
	SCFW 2eb141f241b7 200
	Seq: 1


C5. AS &lt;- MS (SCFW REPORT terminate)
------------------------------------
	SCFW 2eb141f241b7 REPORT
	Seq: 2
	Status: terminate
	Timeout: 15
	Content-Type: text/xml
	Content-Length: 88

	&lt;?xml version="1.0"?&gt;
	&lt;response status="200" reason="Dialog started" \
		  dialogid="15b3128"/&gt;


C6. AS -&gt; MS (SCFW 200, ACK to 'REPORT terminate')
--------------------------------------------------
	SCFW 2eb141f241b7 200
	Seq: 2


D1. AS &lt;- MS (SCFW CONTROL event)
---------------------------------
	SCFW 63300e4f3df1 CONTROL
	Control-Package: msc-ivr-basic/1.0
	Content-Type: text/xml
	Content-Length: 231

	&lt;?xml version="1.0"?&gt;
	&lt;event dialogid="15b3128"&gt;
	   &lt;dialogexit status="1"&gt;
	      &lt;recordinfo type="audio/wav" duration="3500" \
			  size="67500" termmode="dtmf" \
recording="http://www.ms.org/recordings/recording-15b3128.wav"/&gt;

	   &lt;dialogexit/&gt;
	&lt;/event&gt;


D2. AS -&gt; MS (SCFW 200, ACK to 'CONTROL event')
-----------------------------------------------
	SCFW 63300e4f3df1 200


E1. AS -&gt; MS (SCFW CONTROL, join)
---------------------------------
	SCFW 3fg58dd12s49 CONTROL
	Control-Package: msc-conf-audio/1.0
	Content-Type: text/xml
	Content-Length: 75

	&lt;?xml version="1.0"?&gt;
	&lt;join id1="1536067209~913cd14c" \
	      id2="1cc1a27"&gt;
	&lt;/join&gt;


E2. AS &lt;- MS (SCFW 200 OK)
--------------------------
	SCFW 3fg58dd12s49 200
	Content-Type: text/xml
	Content-Length: 70

	&lt;?xml version="1.0"?&gt;
	&lt;response status="200" reason="Join successful"/&gt;


F1. AS -&gt; MS (SCFW CONTROL, play)
---------------------------------
	SCFW 515f007c5bd0 CONTROL
	Control-Package: msc-ivr-basic
	Content-Type: text/xml
	Content-Length: 271

	&lt;?xml version="1.0"?&gt;
	&lt;dialogstart conferenceid="1cc1a27"&gt;
	   &lt;basicivr&gt;
	      &lt;prompt&gt;
	         &lt;media src="http://www.ms.org/recordings/recording-15b3128.wav"
			type="audio/wav"/&gt;
	         &lt;media src="http://www.ms.org/prompts/hasjoined.wav"
			type="audio/wav"/&gt;
	      &lt;/prompt&gt;
	   &lt;/basicivr&gt;
	&lt;/dialogstart&gt;


F2. AS &lt;- MS (SCFW 202)
-----------------------
	SCFW 515f007c5bd0 202


F3. AS &lt;- MS (SCFW REPORT pending)
----------------------------------
	SCFW 515f007c5bd0 REPORT
	Seq: 1
	Status: pending
	Timeout: 10


F4. AS -&gt; MS (SCFW 200, ACK to 'REPORT pending')
------------------------------------------------
	SCFW 515f007c5bd0 200
	Seq: 1


F5. AS &lt;- MS (SCFW REPORT terminate)
------------------------------------
	SCFW 515f007c5bd0 REPORT
	Seq: 2
	Status: terminate
	Timeout: 15
	Content-Type: text/xml
	Content-Length: 88

	&lt;?xml version="1.0"?&gt;
	&lt;response status="200" reason="Dialog started" \
		  dialogid="0aa23bc"/&gt;


F6. AS -&gt; MS (SCFW 200, ACK to 'REPORT terminate')
--------------------------------------------------
	SCFW 515f007c5bd0 200
	Seq: 2


G1. AS &lt;- MS (SCFW CONTROL event)
---------------------------------
	SCFW h345fgt264f9 CONTROL
	Control-Package: msc-ivr-basic/1.0
	Content-Type: text/xml
	Content-Length: 126

	&lt;?xml version="1.0"?&gt;
	&lt;event dialogid="0aa23bc"&gt;
	   &lt;dialogexit status="1"&gt;
	      &lt;promptinfo duration="3500" termmode="completed"/&gt;
	   &lt;dialogexit/&gt;
	&lt;/event&gt;


G2. AS -&gt; MS (SCFW 200, ACK to 'CONTROL event')
-----------------------------------------------
	SCFW h345fgt264f9 200

</pre></div><p>

				
</p>
<a name="sec-conf-bfcp"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.4.3"></a><h3>6.4.3.&nbsp;
Conferencing with Floor Control</h3>

<p>
					TBD. (Add sequence diagrams and signaling issues; reference
					draft <a class='info' href='#I-D.miniero-bfcp-control-package'>[I&#8209;D.miniero&#8209;bfcp&#8209;control&#8209;package]<span> (</span><span class='info'>Miniero, L., Romano, S., Even, R., and S. McGlashan, &ldquo;A Binary Floor Control Protocol (BFCP) Control Package for the Media Control  Channel Framework,&rdquo; July&nbsp;2008.</span><span>)</span></a>)
				
</p>
<p>
					<br /><hr class="insert" />
<a name="fig-bfcp-rtp"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

			(Figure not available yet.)

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;30: Floor Control: Media Perspective&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

				
</p>
<p>
					<br /><hr class="insert" />
<a name="fig-bfcp-noconn"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

			(Figure not available yet.)

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;31: Floor Control: UAC Legs not attached&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

				
</p>
<p>
					<br /><hr class="insert" />
<a name="fig-bfcp"></a>

<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

			(Figure not available yet.)

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;32: Floor Control: UAC Legs mixed and attached&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

				

<p>
					<br /><hr class="insert" />
<a name="fig-bfcp-scfw"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

			(Figure not available yet.)

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;33: Floor Control: Framework Transactions&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

				
</p>
<a name="sec-conf-coaching"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.4.4"></a><h3>6.4.4.&nbsp;
Coaching Scenario</h3>

<p>
					TBD. (Reference RFC4579 <a class='info' href='#RFC4579'>[RFC4579]<span> (</span><span class='info'>Johnston, A. and O. Levin, &ldquo;Session Initiation Protocol (SIP) Call Control - Conferencing for User Agents,&rdquo; August&nbsp;2006.</span><span>)</span></a> and conference control package, which both use this
					scenario as conferencing example; focus on per-user policies for media mixing
					and delivery, e.g. who can hear what; use of multiple conferences and
					connections to achieve the scenario, as suggested in JSR309 as well; etc...).
				
</p>
<p>
					<br /><hr class="insert" />
<a name="fig-coach-rtp"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

 **************              +-------+
 * A=Customer *              |  UAC  |
 * B=Agent    *              |   C   |
 * C=Coach    *              +-------+
 **************                 " ^
                        C (RTP) " "
                                " "
                                " " A+B (RTP)
                                v "
+-------+  A (RTP)           +--------+  A+C (RTP)         +-------+
|  UAC  |===================&gt;| Media  |===================&gt;|  UAC  |
|   A   |&lt;===================| Server |&lt;===================|   B   |
+-------+           B (RTP)  +--------+           B (RTP)  +-------+

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;34: Coaching Scenario: Media Perspective&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

				
</p>
<p>
					<br /><hr class="insert" />
<a name="fig-coach-noconn"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

                                 MS
                   +---------------------------+
                   |                           |
     UAC A         |                           |         UAC B
       o.....&lt;&lt;.......x                     x-------&lt;&lt;-----o
       o-----&gt;&gt;-------x                     x.......&gt;&gt;.....o
                   |                           |
                   |                           |
                   |                           |
                   |                           |
                   |            xx             |
                   |            .|             +
                   +------------v^-------------+
                                v^
                                .|
                                .|
                                oo
                               UAC C

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;35: Coaching Scenario: UAC Legs not attached&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

				
</p>
<p>
					<br /><hr class="insert" />
<a name="fig-coach"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

                                 MS
                   +---------------------------+
                   |  +~~~~~~~~~~+             |
     UAC A         |  v          |             |         UAC B
       o-----&lt;&lt;-------+        +~+~~~~~&lt;~~~~+-------&lt;&lt;-----o
       o-----&gt;&gt;-------+~~&gt;[#]&lt;~+            +-------&gt;&gt;-----o
                   |  |    :                ^  |
                   |  +~~~~:~~~&gt;[#]:::::::::+  |
                   |       v     ^             |
                   |       :     |             |
                   |       ::&gt;::++             |
                   |            :|             +
                   +------------v^-------------+
                                v^
                                :|
                                :|
                                oo
                               UAC C

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;36: Coaching Scenario: UAC Legs mixed and attached&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

				
</p>
<p>
					<br /><hr class="insert" />
<a name="fig-coach-scfw"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

			(Figure not available yet).

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;37: Coaching Scenario: Framework Transactions&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

				
</p>
<p>
					</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

		(Framework transactions not available yet).

</pre></div><p>

				
</p>
<a name="sec-conf-sidebars"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.4.5"></a><h3>6.4.5.&nbsp;
Sidebars</h3>

<p>
					TBD. (Even more issues than in coaching scenario; of greater interest for
					conferencing, expecially XCON; as before, focus on per-user and per-conference
					settings; potential issues and how to deal with them; etc...).
				
</p>
<p>
					<br /><hr class="insert" />
<a name="fig-sidebar-rtp"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

			(Figure not available yet.)

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;38: Sidebars: Media Perspective&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

				
</p>
<p>
					<br /><hr class="insert" />
<a name="fig-sidebar-noconn"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

			(Figure not available yet.)

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;39: Sidebars: UAC Legs not attached&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

				
</p>
<p>
					<br /><hr class="insert" />
<a name="fig-sidebar"></a>

<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

			(Figure not available yet.)

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;40: Sidebars: UAC Legs mixed and attached&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

				

<p>
					<br /><hr class="insert" />
<a name="fig-sidebar-scfw"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

			(Figure not available yet).

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;41: Sidebars: Framework Transactions&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

				
</p>
<a name="sec-security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Security Considerations</h3>

<p>
			TBD. (None, since this is informational?)
		
</p>
<a name="sec-changes"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Change Summary</h3>

<p>
			The following are the major changes between the
			00 and the 01 versions of the draft:
		
</p>
<p>
			</p>
<ul class="text">
<li>changed the title of the draft to
					reflect the current specification of the
					framework;
</li>
<li>added some definitions to the Terminology
					section;
</li><br />
<br />

<li>added State Diagrams from both the
					AS and MS perspective;
</li><br />
<br />

<li>added text to the Control Channel
					Establishment section;
</li><br />
<br />

<li>added sequence diagrams and text to the Phone Call section;
</li><br />
<br />

<li>added sequence diagrams and text to the Simple Bridging
					section;
</li><br />
<br />

<li>added sequence diagrams and text to the Rich Conference
					Scenario section;
</li><br />
<br />

<li>added documented section for Voice Mail;
</li><br />
<br />

<li>added placeholder section for BFCP-moderated Conferencing;
</li><br />
<br />

<li>references updated (RFC3264 <a class='info' href='#RFC3264'>[RFC3264]<span> (</span><span class='info'>Rosenberg, J. and H. Schulzrinne, &ldquo;An Offer/Answer Model with Session Description Protocol (SDP),&rdquo; June&nbsp;2002.</span><span>)</span></a>,
					RFC4145 <a class='info' href='#RFC4145'>[RFC4145]<span> (</span><span class='info'>Yon, D. and G. Camarillo, &ldquo;TCP-Based Media Transport in the Session Description Protocol (SDP),&rdquo; September&nbsp;2005.</span><span>)</span></a> and
					RFC4579 <a class='info' href='#RFC4579'>[RFC4579]<span> (</span><span class='info'>Johnston, A. and O. Levin, &ldquo;Session Initiation Protocol (SIP) Call Control - Conferencing for User Agents,&rdquo; August&nbsp;2006.</span><span>)</span></a>).
</li>
</ul><p>
		
</p>
<a name="sec-acks"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Acknowledgements</h3>

<p>
			TBD.
		
</p>
<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>10.&nbsp;References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2234">[RFC2234]</a></td>
<td class="author-text"><a href="mailto:dcrocker@imc.org">Crocker, D., Ed.</a> and <a href="mailto:paulo@turnpike.com">P. Overell</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2234">Augmented BNF for Syntax Specifications: ABNF</a>,&rdquo; RFC&nbsp;2234, November&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2234.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2234.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2234.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2434">[RFC2434]</a></td>
<td class="author-text"><a href="mailto:narten@raleigh.ibm.com">Narten, T.</a> and <a href="mailto:Harald@Alvestrand.no">H. Alvestrand</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2434">Guidelines for Writing an IANA Considerations Section in RFCs</a>,&rdquo; BCP&nbsp;26, RFC&nbsp;2434, October&nbsp;1998 (<a href="http://www.rfc-editor.org/rfc/rfc2434.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2434.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2434.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3261">[RFC3261]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;<a href="http://tools.ietf.org/html/rfc3261">SIP: Session Initiation Protocol</a>,&rdquo; RFC&nbsp;3261, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3261.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3264">[RFC3264]</a></td>
<td class="author-text">Rosenberg, J. and H. Schulzrinne, &ldquo;<a href="http://tools.ietf.org/html/rfc3264">An Offer/Answer Model with Session Description Protocol (SDP)</a>,&rdquo; RFC&nbsp;3264, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3264.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3725">[RFC3725]</a></td>
<td class="author-text">Rosenberg, J., Peterson, J., Schulzrinne, H., and G. Camarillo, &ldquo;<a href="http://tools.ietf.org/html/rfc3725">Best Current Practices for Third Party Call Control (3pcc) in the Session Initiation Protocol (SIP)</a>,&rdquo; BCP&nbsp;85, RFC&nbsp;3725, April&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3725.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3550">[RFC3550]</a></td>
<td class="author-text">Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson, &ldquo;<a href="http://tools.ietf.org/html/rfc3550">RTP: A Transport Protocol for Real-Time Applications</a>,&rdquo; STD&nbsp;64, RFC&nbsp;3550, July&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3550.txt">TXT</a>, <a href="http://www.rfc-editor.org/rfc/rfc3550.ps">PS</a>, <a href="http://www.rfc-editor.org/rfc/rfc3550.pdf">PDF</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4574">[RFC4574]</a></td>
<td class="author-text">Levin, O. and G. Camarillo, &ldquo;<a href="http://tools.ietf.org/html/rfc4574">The Session Description Protocol (SDP) Label Attribute</a>,&rdquo; RFC&nbsp;4574, August&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4574.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4145">[RFC4145]</a></td>
<td class="author-text">Yon, D. and G. Camarillo, &ldquo;<a href="http://tools.ietf.org/html/rfc4145">TCP-Based Media Transport in the Session Description Protocol (SDP)</a>,&rdquo; RFC&nbsp;4145, September&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4145.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4579">[RFC4579]</a></td>
<td class="author-text">Johnston, A. and O. Levin, &ldquo;<a href="http://tools.ietf.org/html/rfc4579">Session Initiation Protocol (SIP) Call Control - Conferencing for User Agents</a>,&rdquo; BCP&nbsp;119, RFC&nbsp;4579, August&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4579.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-mediactrl-requirements">[I-D.ietf-mediactrl-requirements]</a></td>
<td class="author-text">Dolly, M. and R. Even, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-mediactrl-requirements-04.txt">Media Server Control Protocol Requirements</a>,&rdquo; draft-ietf-mediactrl-requirements-04 (work in progress), February&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-mediactrl-requirements-04.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-mediactrl-architecture">[I-D.ietf-mediactrl-architecture]</a></td>
<td class="author-text">Melanchuk, T., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-mediactrl-architecture-04.txt">An Architectural Framework for Media Server Control</a>,&rdquo; draft-ietf-mediactrl-architecture-04 (work in progress), November&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-mediactrl-architecture-04.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-mediactrl-sip-control-framework">[I-D.ietf-mediactrl-sip-control-framework]</a></td>
<td class="author-text">Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-mediactrl-sip-control-framework-11.txt">Media Control Channel Framework</a>,&rdquo; draft-ietf-mediactrl-sip-control-framework-11 (work in progress), October&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-mediactrl-sip-control-framework-11.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.boulton-mmusic-sdp-control-package-attribute">[I-D.boulton-mmusic-sdp-control-package-attribute]</a></td>
<td class="author-text">Boulton, C., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-boulton-mmusic-sdp-control-package-attribute-04.txt">A Session Description Protocol (SDP) Control Package Attribute</a>,&rdquo; draft-boulton-mmusic-sdp-control-package-attribute-04 (work in progress), March&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-boulton-mmusic-sdp-control-package-attribute-04.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.boulton-ivr-control-package">[I-D.boulton-ivr-control-package]</a></td>
<td class="author-text">Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-boulton-ivr-control-package-06.txt">A Basic Interactive Voice Response (IVR) Control Package for the Media  Control Channel Framework</a>,&rdquo; draft-boulton-ivr-control-package-06 (work in progress), February&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-boulton-ivr-control-package-06.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.boulton-conference-control-package">[I-D.boulton-conference-control-package]</a></td>
<td class="author-text">Boulton, C., Melanchuk, T., McGlashan, S., and A. Shiratzky, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-boulton-conference-control-package-04.txt">A Conference Control Package for the Media Control Channel Framework</a>,&rdquo; draft-boulton-conference-control-package-04 (work in progress), February&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-boulton-conference-control-package-04.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.boulton-ivr-vxml-control-package">[I-D.boulton-ivr-vxml-control-package]</a></td>
<td class="author-text">Boulton, C., Melanchuk, T., and S. McGlashan, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-boulton-ivr-vxml-control-package-04.txt">A VoiceXML Control Package for the Media Control Channel Framework</a>,&rdquo; draft-boulton-ivr-vxml-control-package-04 (work in progress), February&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-boulton-ivr-vxml-control-package-04.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.miniero-bfcp-control-package">[I-D.miniero-bfcp-control-package]</a></td>
<td class="author-text">Miniero, L., Romano, S., Even, R., and S. McGlashan, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-miniero-bfcp-control-package-01.txt">A Binary Floor Control Protocol (BFCP) Control Package for the Media Control  Channel Framework</a>,&rdquo; draft-miniero-bfcp-control-package-01 (work in progress), July&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-miniero-bfcp-control-package-01.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Alessandro Amirante</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">University of Napoli</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Via Claudio 21</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Napoli  80125</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Italy</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:alessandro.amirante@unina.it">alessandro.amirante@unina.it</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Tobia Castaldi</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">University of Napoli</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Via Claudio 21</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Napoli  80125</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Italy</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:tobia.castaldi@unina.it">tobia.castaldi@unina.it</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Lorenzo Miniero</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">University of Napoli</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Via Claudio 21</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Napoli  80125</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Italy</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:lorenzo.miniero@unina.it">lorenzo.miniero@unina.it</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Simon Pietro Romano</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">University of Napoli</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Via Claudio 21</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Napoli  80125</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Italy</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:spromano@unina.it">spromano@unina.it</a></td></tr>
</table>
<a name="rfc.copyright"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Full Copyright Statement</h3>
<p class='copyright'>
Copyright &copy; The IETF Trust (2008).</p>
<p class='copyright'>
This document is subject to the rights,
licenses and restrictions contained in BCP&nbsp;78,
and except as set forth therein,
the authors retain all their rights.</p>
<p class='copyright'>
This document and the information contained herein are provided
on an &ldquo;AS IS&rdquo; basis and THE CONTRIBUTOR,
THE ORGANIZATION HE/SHE REPRESENTS
OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE.</p>
<h3>Intellectual Property</h3>
<p class='copyright'>
The IETF takes no position regarding the validity or scope of any
Intellectual Property Rights or other rights that might be claimed
to pertain to the implementation or use of the technology
described in this document or the extent to which any license
under such rights might or might not be available; nor does it
represent that it has made any independent effort to identify any
such rights.
Information on the procedures with respect to
rights in RFC documents can be found in BCP&nbsp;78 and BCP&nbsp;79.</p>
<p class='copyright'>
Copies of IPR disclosures made to the IETF Secretariat and any
assurances of licenses to be made available,
or the result of an attempt made to obtain a general license or
permission for the use of such proprietary rights by implementers or
users of this specification can be obtained from the IETF on-line IPR
repository at <a href='http://www.ietf.org/ipr'>http://www.ietf.org/ipr</a>.</p>
<p class='copyright'>
The IETF invites any interested party to bring to its attention
any copyrights,
patents or patent applications,
or other
proprietary rights that may cover technology that may be required
to implement this standard.
Please address the information to the IETF at <a href='mailto:ietf-ipr@ietf.org'>ietf-ipr@ietf.org</a>.</p>
</body></html>
