<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Support for multiple clock rates in an RTP session</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Support for multiple clock rates in an RTP session">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">M. Petit-Huguenin</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">(Unaffiliated)</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">September 30, 2009</td></tr>
<tr><td class="header">Expires: April 3, 2010</td><td class="header">&nbsp;</td></tr>
</table></td></tr></table>
<h1><br />Support for multiple clock rates in an RTP session<br />draft-petithuguenin-avt-multiple-clock-rates-00</h1>

<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on April 3, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents in effect on the date of
publication of this document (http://trustee.ietf.org/license-info).
Please review these documents carefully, as they describe your
rights and restrictions with respect to this document.</p>

<h3>Abstract</h3>

<p>
				The usage of multiple clock rates in an RTP session is currently underspecified.
				This document lists multiple ways to fix this problem and is meant as a support for discussion.
			
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#anchor2">2.</a>&nbsp;
Terminology<br />
<a href="#anchor3">3.</a>&nbsp;
RTP Sender behavior<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">3.1.</a>&nbsp;
Use the current clock rate<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">3.2.</a>&nbsp;
Use a fixed clock rate<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">3.3.</a>&nbsp;
Use a different SSRC<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">3.4.</a>&nbsp;
Preferred RTP Sender behavior<br />
<a href="#anchor8">4.</a>&nbsp;
Receiver Behavior<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">4.1.</a>&nbsp;
Use the current RTP clock rate<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">4.2.</a>&nbsp;
Guessing the clock rate<br />
<a href="#anchor11">5.</a>&nbsp;
Security Considerations<br />
<a href="#anchor12">6.</a>&nbsp;
IANA Considerations<br />
<a href="#anchor13">7.</a>&nbsp;
Acknowledgements<br />
<a href="#rfc.references1">8.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">8.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">8.2.</a>&nbsp;
Informative References<br />
<a href="#anchor16">Appendix&nbsp;A.</a>&nbsp;
Release notes<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor17">A.1.</a>&nbsp;
Design Notes<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor18">A.2.</a>&nbsp;
TODO List<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Author's Address<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
				The clock rate is a parameter of the payload format.
				It is often defined as been the same as the sampling rate, but it is not always the case (see e.g. the G722 and MPA audio codecs in <a class='info' href='#RFC3551'>[RFC3551]<span> (</span><span class='info'>Schulzrinne, H. and S. Casner, &ldquo;RTP Profile for Audio and Video Conferences with Minimal Control,&rdquo; July&nbsp;2003.</span><span>)</span></a>).
			
</p>
<p>
				An RTP sender can switch between different payloads during the lifetime of an RTP session and because clock rates are defined by payload types, it is possible that the clock rate also varies during an RTP session.
			
</p>
<p>
				Changing the clock rate during an RTP session is not a problem for the RTP receiver, as it always knows the clock rate associated with a specific RTP packet.
				The RTP receiver also has no problem calculating a clock rate independent interarrival jitter.
			
</p>
<p>
				The problem is with reports carried in RTCP packets that contain fields using units based on the clock rate.
				Because the RTCP packets do not contain a field for the payload type, it is difficult for a sender to choose or for a receiver to guess which clock rate to use for this fields.
			
</p>
<p>
				For example, lip synchronization can be incorrect if the RTP timestamp in the RTCP SR packet use a different clock rate than expected by the receiver.
			
</p>
<p><a class='info' href='#fields'>Table&nbsp;1</a> contains a non-exhaustive list of fields in RTCP packets that use a clock rate:
</p><br /><hr class="insert" />
<a name="fields"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left"><col align="left">
<tr><th align="left">Field name</th><th align="left">RTCP packet type</th><th align="left">Reference</th></tr>
<tr>
<td align="left">RTP timestamp</td>
<td align="left">SR</td>
<td align="left"><a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson, &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">Interarrival jitter</td>
<td align="left">RR</td>
<td align="left"><a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson, &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">min_jitter</td>
<td align="left">XR Summary Block</td>
<td align="left"><a class='info' href='#RFC3611'>[RFC3611]<span> (</span><span class='info'>Friedman, T., Caceres, R., and A. Clark, &ldquo;RTP Control Protocol Extended Reports (RTCP XR),&rdquo; November&nbsp;2003.</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">max_jitter</td>
<td align="left">XR Summary Block</td>
<td align="left"><a class='info' href='#RFC3611'>[RFC3611]<span> (</span><span class='info'>Friedman, T., Caceres, R., and A. Clark, &ldquo;RTP Control Protocol Extended Reports (RTCP XR),&rdquo; November&nbsp;2003.</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">mean_jitter</td>
<td align="left">XR Summary Block</td>
<td align="left"><a class='info' href='#RFC3611'>[RFC3611]<span> (</span><span class='info'>Friedman, T., Caceres, R., and A. Clark, &ldquo;RTP Control Protocol Extended Reports (RTCP XR),&rdquo; November&nbsp;2003.</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">dev_jitter</td>
<td align="left">XR Summary Block</td>
<td align="left"><a class='info' href='#RFC3611'>[RFC3611]<span> (</span><span class='info'>Friedman, T., Caceres, R., and A. Clark, &ldquo;RTP Control Protocol Extended Reports (RTCP XR),&rdquo; November&nbsp;2003.</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">Interarrival jitter</td>
<td align="left">IJ</td>
<td align="left"><a class='info' href='#RFC5450'>[RFC5450]<span> (</span><span class='info'>Singer, D. and H. Desineni, &ldquo;Transmission Time Offsets in RTP Streams,&rdquo; March&nbsp;2009.</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">RTP timestamp</td>
<td align="left">SMPTETC</td>
<td align="left"><a class='info' href='#RFC5484'>[RFC5484]<span> (</span><span class='info'>Singer, D., &ldquo;Associating Time-Codes with RTP Streams,&rdquo; March&nbsp;2009.</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">Jitter</td>
<td align="left">RSI Jitter Block</td>
<td align="left"><a class='info' href='#I-D.ietf-avt-rtcpssm'>[I&#8209;D.ietf&#8209;avt&#8209;rtcpssm]<span> (</span><span class='info'>Schooler, E., Ott, J., and J. Chesterfield, &ldquo;RTCP Extensions for Single-Source Multicast Sessions with Unicast Feedback,&rdquo; March&nbsp;2009.</span><span>)</span></a></td>
</tr>
<tr>
<td align="left">Median jitter</td>
<td align="left">RSI Stats Block</td>
<td align="left"><a class='info' href='#I-D.ietf-avt-rtcpssm'>[I&#8209;D.ietf&#8209;avt&#8209;rtcpssm]<span> (</span><span class='info'>Schooler, E., Ott, J., and J. Chesterfield, &ldquo;RTCP Extensions for Single-Source Multicast Sessions with Unicast Feedback,&rdquo; March&nbsp;2009.</span><span>)</span></a></td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 1&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Terminology</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
</p>
<p>
				</p>
<blockquote class="text"><dl>
<dt>Clock rate:</dt>
<dd>
						The multiplier used to convert from a wallclock value in seconds to an equivalent RTP timestamp value (without the fixed random offset).
						Note that <a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson, &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a> uses various terms like "clock frequency", "media clock rate", "timestamp unit", "timestamp frequency" and "RTP timestamp clock rate" as synonymous to clock rate.
					
</dd>
<dt>RTP Sender:</dt>
<dd>
						A logical network element that sends RTP packets and sends and receives RTCP packets.
					
</dd>
<dt>RTP Receiver:</dt>
<dd>
						A logical network element that receives RTP packets and sends and receives RTCP packets.
					
</dd>
</dl></blockquote><p>
			
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
RTP Sender behavior</h3>

<p>
				An RTP sender can choose to implement a change in clock rate in various ways.
			
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Use the current clock rate</h3>

<p>
					A RTP sender can switch between payload types set with different clock rates on the same SSRC.
					The RTP sender uses the current clock rate as the unit for the fields in the RTCP packets sent.
				
</p>
<p>
					</p>
<blockquote class="text"><dl>
<dt>Pros:</dt>
<dd>
							
<ul class="text">
<li>It is probably the simplest behavior to implement and various implementations already follow this behavior.
</li>
</ul>
						
</dd>
<dt>Cons:</dt>
<dd>
							
<ul class="text">
<li>This behavior seems to contradict <a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson, &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a> section 5.2.
</li>
<li>It is difficult for an RTCP receiver to guess the clock rate used in the RTCP packets.
</li>
</ul>
						
</dd>
</dl></blockquote><p>
				
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Use a fixed clock rate</h3>

<p>
					As in the previous section, the RTP sender switches between different clock rates on the same SSRC, but it always uses the same clock rate as the unit for the fields in the RTCP packets sent.
				
</p>
<p>There is different possible ways to choose this fixed clock rate:
					</p>
<ul class="text">
<li>The first clock rate used on the RTP session.
</li>
<li>The highest clock rate that can be used on the RTP session.
</li>
<li>A unified clok rate, as defined in <a class='info' href='#I-D.ietf-avt-variable-rate-audio'>uRTR<span> (</span><span class='info'>Wenger, S. and C. Perkins, &ldquo;RTP Timestamp Frequency for Variable Rate Audio Codecs,&rdquo; October&nbsp;2004.</span><span>)</span></a> [I&#8209;D.ietf&#8209;avt&#8209;variable&#8209;rate&#8209;audio].
</li>
</ul><p>
				
</p>
<p>
					</p>
<blockquote class="text"><dl>
<dt>Pros:</dt>
<dd>
							
<ul class="text">
<li>It is simple to implement.
</li>
</ul>
						
</dd>
<dt>Cons:</dt>
<dd>
							
<ul class="text">
<li>There is obvious compatibility issues with implementations using a different behavior.
</li>
<li>The fixed clock rate must be an integer multiple of the possible clock rates.
</li>
<li>uRTR was rejected at IETF 61.
</li>
</ul>
						
</dd>
</dl></blockquote><p>
				
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
Use a different SSRC</h3>

<p>
					Instead of using various clock rates in the same SSRC, an RTP sender can use a different SSRC for each clock rate.
				
</p>
<p>
					</p>
<blockquote class="text"><dl>
<dt>Pros:</dt>
<dd>
							
<ul class="text">
<li>It is compliant with <a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson, &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a> section 5.2.
</li>
<li>As there can be be only one possible clock rate on a specific SSRC, there is no ambiguity in the clock rate used in the RTCP packets.
</li>
</ul>
						
</dd>
<dt>Cons:</dt>
<dd>
							
<ul class="text">
<li>Changing the SSRC can be a problem for some implementations designed to work only with unicast IP addresses, where having multiple SSRCs is considered a corner case.
</li>
<li>
									Lip synchronization can be a problem in the interval between the beginning of the new stream and the first RTCP SR packet.
									This is not different than what happen at the beginning of the RTP session but it can be more annoying for the end-user.
									The RTP extension defined in <a class='info' href='#I-D.ietf-avt-rapid-rtp-sync'>[I&#8209;D.ietf&#8209;avt&#8209;rapid&#8209;rtp&#8209;sync]<span> (</span><span class='info'>Perkins, C. and T. Schierl, &ldquo;Rapid Synchronisation of RTP Flows,&rdquo; July&nbsp;2009.</span><span>)</span></a> can be used to accelerate the synchronization.
								
</li>
</ul>
						
</dd>
</dl></blockquote><p>
				
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4"></a><h3>3.4.&nbsp;
Preferred RTP Sender behavior</h3>

<p>TBD
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Receiver Behavior</h3>

<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Use the current RTP clock rate</h3>

<p>
					An RTP Receiver can use the clock rate associated with the current payload received in the RTP packets.  There is a race condition between the RTP and the RTCP packets that can create transient problems.
					Also this method does not work for an RTCP monitor (i.e. an RTCP receiver that does not receive the RTP packets). 
					This method will not work either if a fixed clock rate is used.
				
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Guessing the clock rate</h3>

<p>
					Instead of using the current RTP clock rate, an RTP receiver can use the information in two consecutive SR packets to calculate the clock rate used,  i.e. if Ni is the NTP timestamp for the SR packet i, Ri the RTP timestamp for the SR packet i and Nj and Rj the NTP timestamp and RTP timestamp for the previous SR packet j, then the clock rate can be guessed as the closest to (Ri - Rj) / (Ni - Nj).
				
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Security Considerations</h3>

<p>TBD
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
IANA Considerations</h3>

<p>TBD
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Acknowledgements</h3>

<p>This document was written with the xml2rfc tool described in <a class='info' href='#RFC2629'>[RFC2629]<span> (</span><span class='info'>Rose, M., &ldquo;Writing I-Ds and RFCs using XML,&rdquo; June&nbsp;1999.</span><span>)</span></a>.
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="ftp://ftp.isi.edu/in-notes/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3550">[RFC3550]</a></td>
<td class="author-text">Schulzrinne, H., Casner, S., Frederick, R., and V. Jacobson, &ldquo;<a href="http://tools.ietf.org/html/rfc3550">RTP: A Transport Protocol for Real-Time Applications</a>,&rdquo; STD&nbsp;64, RFC&nbsp;3550, July&nbsp;2003 (<a href="ftp://ftp.isi.edu/in-notes/rfc3550.txt">TXT</a>, <a href="ftp://ftp.isi.edu/in-notes/rfc3550.ps">PS</a>, <a href="ftp://ftp.isi.edu/in-notes/rfc3550.pdf">PDF</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2629">[RFC2629]</a></td>
<td class="author-text"><a href="mailto:mrose@not.invisible.net">Rose, M.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2629">Writing I-Ds and RFCs using XML</a>,&rdquo; RFC&nbsp;2629, June&nbsp;1999 (<a href="ftp://ftp.isi.edu/in-notes/rfc2629.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2629.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2629.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3551">[RFC3551]</a></td>
<td class="author-text">Schulzrinne, H. and S. Casner, &ldquo;<a href="http://tools.ietf.org/html/rfc3551">RTP Profile for Audio and Video Conferences with Minimal Control</a>,&rdquo; STD&nbsp;65, RFC&nbsp;3551, July&nbsp;2003 (<a href="ftp://ftp.isi.edu/in-notes/rfc3551.txt">TXT</a>, <a href="ftp://ftp.isi.edu/in-notes/rfc3551.ps">PS</a>, <a href="ftp://ftp.isi.edu/in-notes/rfc3551.pdf">PDF</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3611">[RFC3611]</a></td>
<td class="author-text">Friedman, T., Caceres, R., and A. Clark, &ldquo;<a href="http://tools.ietf.org/html/rfc3611">RTP Control Protocol Extended Reports (RTCP XR)</a>,&rdquo; RFC&nbsp;3611, November&nbsp;2003 (<a href="ftp://ftp.isi.edu/in-notes/rfc3611.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5450">[RFC5450]</a></td>
<td class="author-text">Singer, D. and H. Desineni, &ldquo;<a href="http://tools.ietf.org/html/rfc5450">Transmission Time Offsets in RTP Streams</a>,&rdquo; RFC&nbsp;5450, March&nbsp;2009 (<a href="ftp://ftp.isi.edu/in-notes/rfc5450.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5484">[RFC5484]</a></td>
<td class="author-text">Singer, D., &ldquo;<a href="http://tools.ietf.org/html/rfc5484">Associating Time-Codes with RTP Streams</a>,&rdquo; RFC&nbsp;5484, March&nbsp;2009 (<a href="ftp://ftp.isi.edu/in-notes/rfc5484.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-avt-rapid-rtp-sync">[I-D.ietf-avt-rapid-rtp-sync]</a></td>
<td class="author-text">Perkins, C. and T. Schierl, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-avt-rapid-rtp-sync-05.txt">Rapid Synchronisation of RTP Flows</a>,&rdquo; draft-ietf-avt-rapid-rtp-sync-05 (work in progress), July&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-avt-rapid-rtp-sync-05.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-avt-rtcpssm">[I-D.ietf-avt-rtcpssm]</a></td>
<td class="author-text">Schooler, E., Ott, J., and J. Chesterfield, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-avt-rtcpssm-18.txt">RTCP Extensions for Single-Source Multicast Sessions with Unicast Feedback</a>,&rdquo; draft-ietf-avt-rtcpssm-18 (work in progress), March&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-avt-rtcpssm-18.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-avt-variable-rate-audio">[I-D.ietf-avt-variable-rate-audio]</a></td>
<td class="author-text">Wenger, S. and C. Perkins, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-avt-variable-rate-audio-00.txt">RTP Timestamp Frequency for Variable Rate Audio Codecs</a>,&rdquo; draft-ietf-avt-variable-rate-audio-00 (work in progress), October&nbsp;2004.</td></tr>
</table>

<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
Release notes</h3>

<p>This section must be removed before publication as an RFC.
</p>
<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.1"></a><h3>A.1.&nbsp;
Design Notes</h3>

<p>(Empty)
					
				
</p>
<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.2"></a><h3>A.2.&nbsp;
TODO List</h3>

<p>
					</p>
<ul class="text">
<li>Is it possible to guess the clock rate used in consecutive jitter values?
</li>
</ul><p>
				
</p>
<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Author's Address</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Marc Petit-Huguenin</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">(Unaffiliated)</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:petithug@acm.org">petithug@acm.org</a></td></tr>
</table>
</body></html>
