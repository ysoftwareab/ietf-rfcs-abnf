Network Working Group                  Dan  Guo,   James Fu, 
Internet Draft                         Leah Zhang, Nasir Ghani
Expiration Date: June 2001                Sorrento Networks		      

        Hybrid Mesh-Ring Optical Networks and Their Routing 
	     Information Distribution Using Opaque LSA

		 draft-guo-optical-mesh-ring-00.txt

1. Status of this Memo 
    
   This document is an Internet-Draft and is in full conformance with 
   all provisions of Section 10 of RFC 2026 [1]. 
    
   Internet-Drafts are working documents of the Internet Engineering 
   Task Force (IETF), its areas, and its working groups. Note that 
   other groups may also distribute working documents as Internet-Drafts. 
    
   Internet-Drafts are draft documents valid for a maximum of six 
   months and may be updated, replaced, or made obsolete by other 
   documents at any time. It is inappropriate to use Internet- Drafts 
   as reference material or to cite them other than as "work in progress." 
    
   The list of current Internet-Drafts can be accessed at 
   http://www.ietf.org/ietf/1id-abstracts.txt 
   The list of Internet-Draft Shadow Directories can be accessed at 
   http://www.ietf.org/shadow.html. 
    
2. Abstract 
    
   Optical rings provide a simplified and robust mechanism for failure
   protection and are extensively used in current tranport networks.
   Recently, efforts are under the way to build optical mesh networks 
   due to the latter's connection flexibility and better network capa-
   city utilization. We advocate an optical network topology of mixing 
   rings together with meshes, either by embedding rings into meshes or 
   by connecting rings with meshes. A mesh-ring network provides both 
   connection flexibility and robust failure protection. 

   This draft first briefly discusses the unique architecture of mesh-
   ring networks. We then focus on defining new attributes and methods 
   for mesh-ring's topology discovery and routing information distribu-
   tion. We utilize the IS-IS/OSPF Opaque LSA mechanism, defined in RFC 
   2370. Finally, we discuss our work in the context of MPLS traffic 
   engineering and network service restoration (failure protection). 


Guo et al.  	      draft-guo-optical-mesh-ring-00.txt        [Page 1]

   
3. Introduction

   In the past several years, a large number of optical rings are deployed
   by telecomm operators. One of advantages for using optical rings is 
   their simplified and robust mechanism for failure protection. We see 
   rings will be extensively used in the future due to their protection
   support and "self-healing" property.

   Ring topology has some drawbacks, which motivates the emergence of 
   optical mesh networks. Optical meshes provide better connection flexi-
   bility and network resource utilization. The management complexities 
   for meshed networks however are higher. 

   We foresee that the networks consisting of hybrid rings and meshes, 
   called mesh-rings, are of particular importance. This is because the 
   migration from rings to meshes will be a gradual process. Furthermore, 
   the merit debates between rings and meshes are not expected to be 
   conclusive. 

   Mesh-ring networks can be formed by either embedding rings into meshes 
   or by connecting rings with meshes. A mesh-ring network provides both 
   connection flexibility and robust failure protection. In particular, we 
   can leverage the rings' protection schemes, which have been standardized 
   and widely deployed. 

   It is anticipated that the hybrid mesh-ring network topology becomes 
   popular among service providers for the following reasons:

     - Traditional SONET ring network operators like to start with the same 
       ring topology with the new devices.  They want the optical rings to 
       preserve the SONET ring's reliabilty, i.e., UPSR and BLSR protection 
       mechanism.

     - As new services emerge, the ring operators want to add some meshed 
       connections to offer new services. One economic way to do that is 
       to add additional ports in the ring nodes to form meshed connections
       among the ring nodes. The network ends up with a hybrid ring and 
       mesh topology.
	  	              	
   A hybrid mesh-ring topology network has some unique issues for network
   control, provisioning, resources discovery and protection.
      
   This draft first briefly discusses the unique architecture of mesh-ring 
   networks. We then focus on defining new attributes and methods for mesh-
   ring's topology discovery and routing information distribution. Of 
   particular importance is the identifer for rings (ring ID). Different 
   type of rings are also introduced. We utilize the IS-IS/OSPF Opaque LSA 
   mechanism, defined in RFC 2370. Those new attributes will be used by the 
   routing algorithms for mesh-ring networks.

   
Guo et al.  	      draft-guo-optical-mesh-ring-00.txt          [Page 2]


   We also briefly discuss our work in the context of MPLS traffic 
   engineering and network service restoration (failure protection). 

4. Mesh-Ring Networks Architecture

4.1 Network Architecture Descriptions

   A mesh-ring network is loosely defined as a network mixing rings with 
   meshes. There are many ways to form a hybrid mesh-ring network:

      a. Mesh links are added to an optical ring. For example, in Fig. 
         1.a, the network operator decides to add a mesh link between 
	 node W and node Y;

      b. Multiple optical rings are connected by a mesh (see Fig. 1.b). 
         For example, two mesh links are added to connect ring R1 and 
	 ring R2;

      c. In a network with a mesh topology, we embed one or more rings. 
         For example, in  Fig 1.c, we define two rings (A-B-C-D-I-H-A) 
	 and (I-D-E-F-I). These embedded rings can be considered "virtual 
	 rings." The links on rings are also part of the mesh network.
                               
      __ +-+__            __+-+_______________+-+__         +-+  +-+  +-+ 
     /   |X|  \          /  |X|___         ___|B|  \        |A|--|B|--|C|          
    /    +-+   \        /   +-+    \      /   +-+   \       +-+  +-+  +-+ 		
   +-+         +-+    +-+         +-+   +-+         +-+      |         |  		
   |W|-------- |Y|    |W|   R1    |Y|   |A|   R2    |C|     +-+  +-+  +-+ 		
   +-+         +-+    +-+         +-+   +-+         +-+     |H|--|I|--|D| 		
    \           /      \           /     \           /      +-+  +-+  +-+ 		
     \   +-+   /        \   +-+___/       \___+-+   /        |    |    |  		
      -- |Z|--/          -- |Z|---------------|D|--/        +-+  +-+  +-+ 		
         +-+                +-+               +-+           |G|--|F|--|E| 		
  					                    +-+  +-+  +-+ 

      Fig 1.a.                   Fig. 1. b.                    Fig. 1.c
   
    Each of the optical rings in a mesh-ring network is considered as a 
    routing entity, with a unique ring identifier (Ring ID). For the 
    protection purpose, we need classify rings into different types - 
    bidirectional wavelength path switched ring (BWPSR), uni-directional 
    path-switched rings (UPSR) or bi-directional line-switched rings (BLSR).
    More types will be introduced in the future (see [GHANI] for details).


Guo et al.  	      draft-guo-optical-mesh-ring-00.txt         [Page 3]



4.2 Routing Considerations in the hybrid mesh-ring networks

    The hybrid mesh-ring topology has unique constraints and requirement
    for resource discovery and maintenance as well as for lightpath 
    routing and signalling.

    - We need differentiate links in a ring from links in a mesh. Certain 
      traffic such as voice traffic may desire to travel along the ring 
      topology due to its better protection capability;

    - We need an automatic and efficient way to manage and provision 
      traffic across multiple rings.   

5. Opaque LSA for Mesh-Ring Optical Networks

   In this section, we describe the enhancements to IS-IS/OSPF in 
   support of hybrid mesh-ring networks. These are in addition to 
   the previous extensions:

   - for supporting the MPLS traffic engineering ([OSPF-TE], [ISIS-TE]);
   - for supporting MPL(ambda)S & optical routing ([KOMPELLA], [WANG]).

   In particular, our LSA format follows closely the description in 
   [OSPF-TE], a de-facto standard. 

5.1 LSA Type

    This draft makes use of the Opaque LSA [OSPF-Opaque] (RFC2370). 
    Opaque LSAs are introduced as a means of distributing additional 
    OSPF routing information. Three types of Opaque LSA exist:

       Type 9: link-local scope
       Type 10: area-local scope
       Type 11: Autonomous System (AS) scope

    We use only Type 10 LSAs for area flooding scope. 

5.2 LSA Header

    In Opaque LSAs, the payload of the LSA could contain information that
    has meaning only within a certain application and will be ignored 
    otherwise. The type of the application is identified by the Opaque 
    Type, contained in the LSA ID. 

Guo et al.  	      draft-guo-optical-mesh-ring-00.txt         [Page 4]


    The LSA ID of an Opaque LSA is defined as having eight bits of opaque
    type and 24 bits of type-specific data. The new Opaque type number for
    mesh-rings is TDB. The remaining 24 bits are broken up into eight bits 
    of reserved space (which must be zero) and sixteen bits of instance. A 
    maximum of 65536 LSAs may be sourced by a single node. 

    The new LSA for mesh-ring optical networks starts with the LSA header:

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |            LS age             |    Options    |      10       |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |      TBD      |    Reserved   |           Instance            |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                     Advertising Node ID                       |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                     LS sequence number                        |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |         LS checksum           |             length            |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

5.3 New Opaque LSA Payload

    The LSA payload consists of one or more nested Type/Length/Value
    (TLV) triplets for extensibility.  They are used in path computation 
    algorithm to compute optical paths in the mesh-ring optical networks. 
    The format of each TLV is:

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |              Type             |             Length            |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                            Value...                           |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

    The new opaque LSA describe the nodes and links in a mesh-ring 
    networks. We define two top-level TLVs: Optical Node TLV and Link TLV.

5.3.1 Optical Node TLV

    The optical node TLV specifies a stable IP address of the advertising 
    node that is always reachable if there is any connectivity to it. This
    is typically implemented as a "loopback address." The optical node TLV
    also indicates the wavelength conversion capability and regeneration 
    capability of node. 


Guo et al.  	      draft-guo-optical-mesh-ring-00.txt          [Page 5]


    The node TLV is type 1, and the length is variable. 

    The following sub-TLVs are defined:
	1 - IP address (4 octets) (mandatory)
	2 - Wavelength conversion capability (1 octet) (mandatory)
	    
5.3.1.1 Wavelength Conversion Capability

    The wavelength conversion capability sub-TLV indicates whether the node
    is wavelength conversion capable: no wavelength conversion, full 
    wavelength conversion, or partial wavelength conversion (indicates 
    percentage).

    The wavelength conversion capability sub-TLV is TLV type 2, and is one 
    octet long. It is mandatory.

        00000000  no wavelength conversion
	01100100  full wavelength conversion (100 percent)
        00011001  partial wavelength conversion (25 percent)

5.3.2 Link TLV

    Link TLV describes a single unidirectional link. The link TLV is type 2,
    the length is variable. It is constructed as a set of sub-TLVs. There 
    are no ordering requirements for the sub-TLVs. 

    The following sub-TLVs are defined:
 	1 - Link type (1 octet)
	2 - Link ID (4 octets)
	3 - Local interface IP address (4 octets) 
	4 - Remote interface IP address (4 octets)
	5 - Available link resource information 
	6 - Ring type and ID (4 octets) 
        7 - Shared Link Risk Group ID (4 octets)

    In [OSPF-TE] and [WANG], many sub-TLVs are described. Here, we put our
    emphasis on new sub-TLVs unique to the hybrid mesh-ring optical networks.

5.3.2.1 Link Type

    Link type sub-TLV defines the type of the link (as describe in [WANG]):

	3 - Service transparent (a point to point physical optical link)
	4 - Service aware (a point to point logical optical link)


Guo et al.  	      draft-guo-optical-mesh-ring-00.txt       [Page 6]

 
    By using this link type, we can represent both physical and logical 
    link  and their connection type in optical domain.

5.3.2.2 Link ID

    The Link ID sub-TLV identifies the optical link exactly as the 
    point to point case in [OSPF-TE].

5.3.2.3 Local and Remote Interface IP Addresses

    The local interface IP address sub-TLV specifies the IP address of 
    the interface corresponding to this link. The remote interface IP 
    address sub-TLV specifies the IP address of the neighbor's interface 
    corresponding to this link. This and the local address are used to 
    discern multiple parallel links between two nodes.

5.3.2.4 Available Link Resource Information

    Refer to [WANG] for descriptions. 

5.3.2.5 Ring type and ID:

    When a link belongs to a ring, a Ring sub-TLV is added. The Ring sub-TLV
    is TLV type 6, and has four octets in length.

    The first 8 bits represents the ring type (eg. BWPSR, BLSR, UPSR, etc). 
    The other 24 bits identifies a ring. This field is called Ring ID that 
    is unique within an IGP domain. 

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |  Type         |             Ring ID                           |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

    Ring sub-TLV is optional. For a link not belonging to a ring, it is 
    omitted. A link may belong to multiple rings, in which cases multiple 
    ring sub-TLVs are included.

5.3.2.6 Shared Link Risk Group

    The shared link risk group sub-TLV specifies group membership for
    "shared risk link group" (SRLG). A set of links may constitute a "shared 
    risk link group" if they share a resource whose failure may affect all 
    links in the set. An example would be two fibers in the same conduit. 
    Also, a link may be part of more than one SRLG. Refer to [KOMPELLA] for 
    more descriptions.


Guo et al.  	      draft-guo-optical-mesh-ring-00.txt         [Page 7]


6. Routing and Signaling Requirement for Mesh-Ring Networks

   New opaque LSAs are subsequently used by the constrainted shortest path 
   first (CSPF) algorithm. It may be desireable for network operators to
   specify the type of light path from a source to a destination:

     - Path P passes a BWPSR ring, or
     - Path P passes a BLSR ring, or
     - Path P passes a UPSR ring;
    
   Exactly how the CSPF algorithm incorporates the information contained in 
   new opaque LSAs is proprietary in nature and beyond this document. 

   After obtaining an explicit lightpath from a source to a destination, we
   use GMPLS [GMPLS] to provision this lightpath. When setting up a light 
   path in RSVP-TE or CR-LDP, we may treat a ring as an abstract node. More 
   treatments will follow in this area. 

7. Failure Protection for Mesh-Ring Networks
   
   There are clearly advantages in supporting failure protection by 
   identifying the rings in a hybrid mesh-ring network. A ring can provide 
   fast re-route with little signalling overheads. Existing SONET protection 
   schemes can be extended for this purpose [SONET-APS] and more details 
   can be found in [GHANI]. This topic deserves more detailed treatment, due
   to its primary importance. 

8. Security Considerations

   There is no known security problem caused by this draft.

9. Acknowledgements

   We would like to thank Yangguang Xu of Lucent Technology for the 
   insightful discussion and John Moy of Sycamore Networks for his 
   comments and encouragement. We are also grateful to Frank Barnes 
   for the careful review.

10. References

   [OSPF] J. Moy, OSPF Version 2. (RFC 2328) 

   [OSPF-Opaque] R. Coltun, The OSPF Opaque LSA Option. (RFC 2370)

   [GMPLS] Ashwood-Smith, P. et al, "Generalized MPLS -
        Signaling Functional Description", Internet Draft,
        draft-ietf-mpls-generalized-signaling-01.txt,
        November 2000.

Guo et al.  	      draft-guo-optical-mesh-ring-00.txt     [Page 8]


   [GHANI] N. Ghani, J. Fu, Z. Zhang, X. Liu, D. Guo, "Optical Rings," 
        work in progress (draft to be submitted), December 2000.

   [TE-REQ] Awduche, D., Malcolm, J., Agogbua, J., O'Dell, M., and J.
       McManus, "Requirements for Traffic Engineering Over MPLS", RFC
       2702, September 1999.

   [ISIS-TE] Smit, H., Li, T., "IS-IS extensions for Traffic
       Engineering", draft-ietf-isis-traffic-01.txt (work in progress)

   [OSPF-TE] Katz, D., Yeung, D., "Traffic Engineering Extensions to
       OSPF", draft-katz-yeung-ospf-traffic-01.txt (work in progress)

   [SONET-APS] Gorshe, S., Revised Draft T105.01 SONET Automatic 
       Protection Switching Standard, April 1999. 

   [KOMPELLA] Kompella, K., et al, Extensions to IS-IS/OSPF and RSVP in 
       support of MPL(ambda)S, draft-kompella-mpls-optical-00.txt, August 
       2000.
   [MCADAMS] McAdams, L. and Yates, J., Lightpath attributes and related 
       service definitionsdraft-mcadams-lightpath-attributes-00.txt,
       September, 2000.

   [WANG] Wang, G., et al., "Extensions to OSPF/IS-IS for Optical Routing", 
       Internet Draft, draft-wang-ospf-isis-lambda-te-routing-00.txt, 
       Work in Progress, March 2000.

11. Authors' Addresses

   Dan Guo                            James Fu                         
   Sorrento Networks, Inc.            Sorrento Networks, Inc.          
   9990 Mesa Rim	              9990 Mesa Rim                     
   San Diego, CA 92121	              San Diego, CA 92121               
   Email: dguo@sorrentonet.com        Email: jfu@sorrentonet.com        
			       
   Leah Zhang                         Nasir Ghani
   Sorrento Networks, Inc.            Sorrento Networks, Inc.
   9990 Mesa Rim	              9990 Mesa Rim
   San Diego, CA 92121	              San Diego, CA 92121
   Email: leahz@sorrentonet.com       Email: nghani@sorrentonet.com


Guo et al.  	      draft-guo-optical-mesh-ring-00.txt     [Page 9]

