Network Working Group                          Senthil Venkatachalam
Internet Draft                                 Alcatel
Expiration Date: July 2001                     Ben Abarbanel 
                                               IP Optical

     OSPF Extensions to Support Inter-Area Traffic Engineering

           draft-venkatachalam-ospf-traffic-01.txt

Status

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet- Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

Abstract

   This document describes the OSPF "Traffic Engineering Summary LSA"
   and its support to enable traffic engineering across area boundaries.
   
1. Introduction
   
   Currently, there is no way to support traffic engineering across 
   areas using the OSPF protocol [1]. Previous work on traffic 
   engineering support [2] using the OSPF protocol has restricted the 
   focus to within an OSPF area. This draft proposes a new opaque 
   LSA [3] called the "Traffic Engineering Summary LSA" that helps 
   propagate the traffic engineering metric information across areas.

Senthil Venkatachalam, B. Abarbanel  Expires July 2001          [Page 1]

Internet Draft    draft-venkatachalam-ospf-traffic-01.txt       Jan 2001

2. Traffic Engineering Summary LSA

   The traffic engineering (TE) summary LSA will be originated by the 
   Area Border Router (ABR) into an area. This summary LSA is a type-10 
   opaque LSA, that will be flooded within the area. The functionality 
   of the TE summary LSA is similar to that of the summary LSA of 
   standard OSPF, but in addition it carries the traffic engineering 
   metrics to the remote destination (IP network or ASBR).

3. Traffic Engineering Attributes

   The various traffic engineering attributes that are used to describe
   the destination (either a network or an ASBR) in the TE summary LSA 
   are:
   1 - Traffic engineering metric
   2 - Hops
   3 - Maximum bandwidth
   4 - Unreserved bandwidth
   5 - Delay
   6 - Color

   One or more of these attributes need to be used in the metrics 
   portion of the TE summary LSA. 

   The traffic engineering and hop metrics are additive metrics similar 
   to the ospf metric, but need not be the same. The traffic engineering
   and hop metrics advertised by the router for the given summary 
   destination will have been computed in a manner similar to the 
   dijkstra computation for the ospf metric.

   The maximum bandwidth to the summary destination is the largest of 
   all path-capacities, each associated with a possible path to the 
   destination. The path-capacity is the smallest link capacity of all 
   the links in the path. Hence, the maximum bandwidth is the maximum 
   amount of traffic that can be sent to that destination, when there 
   is no other traffic on the links.

   The unreserved bandwidth to the summary destination is the largest 
   of all path-unreserved bandwidths, each associated with a possible 
   path to the destination. The path-unreserved bandwidth is the 
   smallest unreserved bandwidth of all the links in the path. Hence, 
   the unreserved bandwidth is the maximum amount of traffic that can 
   currently be sent to that destination, the other traffic on the 
   links being steady.

Senthil Venkatachalam, B. Abarbanel  Expires July 2001          [Page 2]

Internet Draft    draft-venkatachalam-ospf-traffic-01.txt       Jan 2001

   The delay is an additive metric. The value of the delay attribute 
   for a summary destination will have been determined through a 
   dijkstra computation based on the delay.
   
   The value of the color attribute to the summary destination is some
   combination of the path-colors, each associated with a possible path 
   to the destination. The path-color is a combination of the colors of 
   the links in the path. Usually, this combination is a "logical and" 
   of the colors.

   Once these attributes are determined for the destination networks 
   and ASBRs, the advertising ABR then creates the TE summary LSA to be 
   flooded out of its interfaces into the area. The ABR should generate 
   a new TE summary LSA when the attributes change, or other normal 
   OSPF behavior require it.

4. The TE Summary LSA Format

   The TE summary LSA has the basic LSA structure with a modified 
   opaque LSA header called the TE summary LSA header. The TE summary 
   LSA contents include a destination field, network mask, and 
   TLV-tuples describing the traffic engineering attributes.

4.1 TE Summary LSA Header

   The TE summary LSA's header is derived from the standard and opaque 
   LSA headers. The LS type field is assigned the value 10 to denote 
   that this is an opaque LSA of type-10 or area-local scope. 
   
   The Link State ID field of the standard LSA header is replaced by 
   the Opaque Type (1 octet), TE-LS Type (1 octet) and the TE-summary 
   LSA ID (2 octets).  The value of the opaque type field for the 
   TE-summary LSA is TBD. The TE-LS Type can take values 3 or 4,
   depending on whether the destination being described in the LSA is
   an IP network or an ASBR respectively. The TE-summary LSA ID is a 
   unique 16-bit number that helps identify the TE Summary LSA. 
   A total of 65536 TE summary LSAs can be originated by an ABR.

Senthil Venkatachalam, B. Abarbanel  Expires July 2001          [Page 3]

Internet Draft    draft-venkatachalam-ospf-traffic-01.txt       Jan 2001

   The format of the TE summary LSA header is as follows:

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |            LS age             |     Options   |      10       |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |Opaq. Type(TBD)|TE LS Type=3/4 |      TE Summary LSA ID        |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                      Advertising Router                       |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                      LS Sequence Number                       |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |         LS checksum           |           Length              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

4.2 TE Summary LSA Contents

   The summary LSA consists of:
   o The Destination ID, which is:
	 o The IP address of the described network (if TE LS Type = 3),
           or
	 o The Router ID of the described ASBR (if TE LS Type = 4).
     (The functionality of the destination ID field is the same as the 
     LS ID field in the standard summary LSA header). This field is 
     4 octets in length.

   o The Network Mask, which holds the mask of the network described in 
     the summary. If the summary is for an ASBR, this field is set to 0.
     (The functionality is the same as in the standard summary LSA). 
     This field is 4 octets in length. It is followed by:

   o One or more TLV-tuples that describe the traffic engineering 
     metrics to reach the network or the ASBR defined in the TE summary 
     LSA. These TLV-tuples have a constant "type" and "length" 
     field-lengths of 2 octets each, and a variable length "value" 
     field. The length field specifies the length of the value field in 
     bytes. The TLV is padded to the standard 4-byte alignment.

Senthil Venkatachalam, B. Abarbanel  Expires July 2001          [Page 4]

Internet Draft    draft-venkatachalam-ospf-traffic-01.txt       Jan 2001

   The contents of the TE summary LSA is then of the following format:

     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                         Destination ID                        |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                          Network Mask                         |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |              Type             |             length            |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                   Value (4x octets, x >= 0)                   |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |              Type             |             length            |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                            Value                              |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                              ...                              |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

4.3 The Traffic Engineering Attributes

   The following traffic engineering attributes are defined:
   1 - Traffic engineering metric (4 octets)
   2 - Hops (4 octets)
   3 - Maximum bandwidth (4 octets)
   4 - Unreserved bandwidth (4 octets)
   5 - Delay (4 octets)
   6 - Resource class/color (4 octets)

   Some of these traffic engineering attributes have sizes the same as 
   in [2] but others (notably the bandwidths) are not. The bandwidths 
   have been kept to just 4 octets to restrict the size of the TLV.

   Each of these attributes (and the value associated with it) is 
   represented as a TLV-tuple. Each such attribute may occur at most 
   once (none or once) in an LSA. In addition, new traffic engineering 
   attributes may be defined in the future.

   The TLV attributes are as follows (see Section 3 for the definition):

4.3.1 Traffic Engineering Metric

   The traffic engineering metric represents the traffic engineering 
   cost of reaching the destination network or ASBR from the 
   advertising ABR. The TLV-type is 1, and the length of this 
   attribute is 4 octets.

Senthil Venkatachalam, B. Abarbanel  Expires July 2001          [Page 5]

Internet Draft    draft-venkatachalam-ospf-traffic-01.txt       Jan 2001

4.3.2 Hops

   The hops TLV is the cost in hops, of reaching the destination 
   network or ASBR from the advertising ABR. The TLV-type is 2, and the 
   length is 4 octets.

4.3.3 Maximum Bandwidth
   
   The maximum bandwidth to the destination is described in bytes/second
   as an IEEE floating point number. The TLV-type is 3, and the length 
   is 4 octets.

4.3.4 Unreserved Bandwidth
   
   The unreserved bandwidth to the destination is described in 
   bytes/second as an IEEE floating point number. The TLV-type is 4, 
   and the length is 4 octets.

4.3.5 Delay

   The delay attribute is the delay cost to reach the destination 
   network (or ASBR), in milliseconds, represented as an unsigned 
   (4-byte) long integer. The TLV-type is 5, and the length is 4 octets.

4.3.6 Resource Class/Color

   The resource class or color of the destination network (or ASBR) is a
   combination of the colors for the various paths to the network 
   (or ASBR). The TLV-type of the resource class/color attribute is 6, 
   and the length is 4 octets.

5. Use of the Traffic Engineering Summary LSA

   The TE summary LSA provides the traffic engineering information 
   regarding remote destinations (networks or ASBRs) in other areas. 
   This information is valuable in order to make accurate routing 
   decisions based on attributes such as bandwidth, delay, metrics and 
   colors. The TE summary LSAs along with the TE LSAs [2] provide a 
   comprehensive traffic topology of the OSPF domain. Using this 
   traffic topology database, routing calculations can be performed 
   based on a variety of criteria which could be combinations of 
   constraints [4] on one or more traffic engineering attributes.

Senthil Venkatachalam, B. Abarbanel  Expires July 2001          [Page 6]

Internet Draft    draft-venkatachalam-ospf-traffic-01.txt       Jan 2001

   Such a traffic topology database can be used:
   1. to effect QoS routing, by precomputing routes to remote 
      destinations based on a fixed combination of traffic engineering 
      constraints, 
   2. to calculate a route to a remote destination based on traffic 
      engineering constraints, on an as-needed basis,
   3. to determine the traffic engineering "distance" from an ASBR to 
      the various networks and other ASBRs in the domain, so that this 
      information can be redistributed into BGP, and be propagated 
      outside of the domain[5]. This setup can help in the distribution 
      of traffic engineering information across ASs.

6. Compatibility Issues

   Three different cases are possible with respect to an ABR's support 
   of the TE summary LSA: 
   1. The ABR doesn't support opaque LSAs, in which case the opaque LSAs
      received by it are simply ignored, and none are generated or 
      forwarded.

   2. The ABR supports opaque LSAs, but not the TE summary LSA, in which
      case it floods out any TE summary LSA received from one of its 
      interfaces out of other interfaces in the same area. However, no 
      TE summary LSAs are generated into an area.

   3. The ABR supports the TE summary LSA. In this case, the TE summary 
      LSA is generated for each area and flooded out the interfaces of 
      that area.
   
   If a router interior to an area doesn't support TE summary LSAs, it 
   will not be able to take advantage of the traffic engineering 
   attributes of remote destinations outside the area, and hence will 
   not be able to calculate remote routes based on these attributes. 
   
   If a router interior to an area doesn't support TE LSAs from [2], 
   the TE summary LSAs generated by the ABR of the area will describe 
   a traffic topology that is smaller than the underlying network 
   topology. Hence if all the routes of the underlying network topology 
   need to be represented in the traffic topology, all routers in the 
   area must support the TE LSAs.

Senthil Venkatachalam, B. Abarbanel  Expires July 2001          [Page 7]

Internet Draft    draft-venkatachalam-ospf-traffic-01.txt       Jan 2001

7. Security Considerations

   There are no new security considerations necessary beyond that of[1].

8. References

   [1] Moy, J., "OSPF Version 2", RFC 2328, April 1998.

   [2] Katz, D. and Yeung D., "Traffic Engineering Extensions to OSPF",
       Internet Draft <draft-katz-yeung-ospf-traffic-00.txt>

   [3] Coltun, R., "The OSPF Opaque LSA Option," RFC 2370, July 1998.

   [4] Awduche, D. et al "Extensions to RSVP for LSP Tunnels", Work in
       Progress, Internet Draft <draft-ietf-mpls-rsvp-lsp-tunnel-04.txt,
       September 1999.

   [5] Abarbanel, B. and Venkatachalam, Senthil, "BGP-4 support for 
       Traffic Engineering", Internet Draft 
       <draft-abarbanel-idr-bgp4-te-00.txt>

9. Authors' Addresses

   Senthil Venkatachalam
   Alcatel USA
   15036 Conference Center Drive
   Chantilly, VA 20151
   email: senthil.venkatachalam@usa.alcatel.com
   Phone: (703)679-6435
    
   Ben Abarbanel
   IPOptical, Inc.
   11480 Sunset Hills Rd, Suite 200E
   Reston, VA 20190
   email: ben.abarbanel@ipoptical.com




Senthil Venkatachalam, B. Abarbanel  Expires July 2001          [Page 7]
