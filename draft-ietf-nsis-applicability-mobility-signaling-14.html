<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Applicability Statement of NSIS
    Protocols in Mobile Environments</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Applicability Statement of NSIS
    Protocols in Mobile Environments">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Next Steps in Signaling (nsis)</td><td class="header">T. Sanda (Ed.)</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Panasonic</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">X. Fu</td></tr>
<tr><td class="header">Expires: July 29, 2010</td><td class="header">University of Goettingen</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">S. Jeong</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">HUFS</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">J. Manner</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">TKK</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">H. Tschofenig</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Nokia Siemens Networks</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">January 25, 2010</td></tr>
</table></td></tr></table>
<h1><br />Applicability Statement of NSIS
    Protocols in Mobile Environments<br />draft-ietf-nsis-applicability-mobility-signaling-14.txt</h1>

<h3>Abstract</h3>

<p>Mobility of an IP-based node affects routing paths, and as a result,
      can have a significant effect on the protocol operation and state
      management. This draft discusses the effects mobility can cause to the
      NSIS protocol suite, and how the protocols operate in different
      scenarios, with mobility management protocols.
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on July 29, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the BSD License.</p>
<p>
This document may contain material from IETF Documents or IETF
Contributions published or made publicly available before November
10, 2008.  The person(s) controlling the copyright in some of this
material may not have granted the IETF Trust the right to allow
modifications of such material outside the IETF Standards Process.
Without obtaining an adequate license from the person(s) controlling
the copyright in such materials, this document may not be modified
outside the IETF Standards Process, and derivative works of it may
not be created outside the IETF Standards Process, except to format
it for publication as an RFC or to translate it into languages other
than English.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#Terminology">2.</a>&nbsp;
Requirements Notation and Terminology<br />
<a href="#Problem.Statement">3.</a>&nbsp;
Challenges with Mobility<br />
<a href="#Basic.OP">4.</a>&nbsp;
Basic Operations for Mobility Support<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">4.1.</a>&nbsp;
General functionality<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Basic.OP.example">4.2.</a>&nbsp;
QoS NSLP<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">4.3.</a>&nbsp;
NATFW NSLP<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Localized.signaling.scenario">4.4.</a>&nbsp;
Localized signaling in mobile scenarios<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#CRN.discovery">4.4.1.</a>&nbsp;
CRN Discovery<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#State.setup.and.update">4.4.2.</a>&nbsp;
Localized State Update<br />
<a href="#Int.with.mip4.mip6">5.</a>&nbsp;
Interaction with Mobile IPv4/v6<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Int.with.MIP4">5.1.</a>&nbsp;
Interaction with Mobile IPv4<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Int.with.MIP6">5.2.</a>&nbsp;
Interaction with Mobile IPv6<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Int.with.MIPtunnel">5.3.</a>&nbsp;
Interaction with Mobile IP tunneling<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Int.with.MIPtunnel.SI">5.3.1.</a>&nbsp;
Sender-Initiated Reservation with Mobile IP tunnel<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Int.with.MIPtunnel.RI">5.3.2.</a>&nbsp;
Receiver-Initiated Reservation with Mobile IP tunnel<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">5.3.3.</a>&nbsp;
CRN discovery and State Update with Mobile IP tunneling<br />
<a href="#Further.Studies">6.</a>&nbsp;
Further Studies<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">6.1.</a>&nbsp;
NSIS Operation in the multihomed mobile environment<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">6.1.1.</a>&nbsp;
Selecting the best interface(s)/CoA(s)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">6.1.2.</a>&nbsp;
Differentiation of two types of CRNs<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">6.2.</a>&nbsp;
Interworking with other mobility protocols<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">6.3.</a>&nbsp;
Intermediate node becomes a dead peer<br />
<a href="#Security.Considerations">7.</a>&nbsp;
Security Considerations<br />
<a href="#anchor10">8.</a>&nbsp;
Change History<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">8.1.</a>&nbsp;
Changes from -00 version<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">8.2.</a>&nbsp;
Changes from -01 version<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">8.3.</a>&nbsp;
Changes from -02 version<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">8.4.</a>&nbsp;
Changes from -03 version<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">8.5.</a>&nbsp;
Changes from -04 version<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor16">8.6.</a>&nbsp;
Changes from -05 version<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor17">8.7.</a>&nbsp;
Changes from -06 version<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor18">8.8.</a>&nbsp;
Changes from -07 version<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor19">8.9.</a>&nbsp;
Changes from -08 version<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor20">8.10.</a>&nbsp;
Changes from -09 version<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor21">8.11.</a>&nbsp;
Changes from -10 version<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor22">8.12.</a>&nbsp;
Changes from -11 version<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor23">8.13.</a>&nbsp;
Changes from -12 version<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor24">8.14.</a>&nbsp;
Changes from -13 version<br />
<a href="#anchor25">9.</a>&nbsp;
Contributors<br />
<a href="#anchor26">10.</a>&nbsp;
Acknowledgements<br />
<a href="#rfc.references1">11.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">11.1.</a>&nbsp;
Normative Reference<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">11.2.</a>&nbsp;
Informative References<br />
<a href="#Appendix.A">Appendix&nbsp;A.</a>&nbsp;
<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>Mobility of IP-based nodes incurs route changes, usually at the edge
      of the network. Since IP addresses are usually part of flow identifiers,
      the change of IP addresses implies the change of flow identifiers (i.e.,
      the GIST message routing information or MRI <a class='info' href='#1'>[1]<span> (</span><span class='info'>Schulzrinne, H., &ldquo;GIST: General Internet Signaling Transport,&rdquo; June&nbsp;2009.</span><span>)</span></a>). Local mobility usually does not cause the
      change of the global IP addresses, but affects the routing paths within
      the local access network
</p>
<p>The NSIS protocol suite consists of two layers: NSIS Transport Layer
      Protocol (NTLP) and the NSIS Signaling Layer Protocol (NSLP). The
      General Internet Signaling Transport (GIST) <a class='info' href='#1'>[1]<span> (</span><span class='info'>Schulzrinne, H., &ldquo;GIST: General Internet Signaling Transport,&rdquo; June&nbsp;2009.</span><span>)</span></a> implements the NTLP, which is a signaling
      application independent protocol and transports service-related
      information between neighboring GIST nodes. Each specific service has
      its own NSLP protocol; currently there two standardized NSLP protocols,
      the QoS NSLP <a class='info' href='#2'>[2]<span> (</span><span class='info'>Manner, J., &ldquo;NSLP for Quality-of-Service Signaling,&rdquo; October&nbsp;2009.</span><span>)</span></a>, and the NAT/Firewall
      NSLP <a class='info' href='#3'>[3]<span> (</span><span class='info'>Stiemerling, M., &ldquo;NAT/Firewall NSIS Signaling Layer Protocol (NSLP),&rdquo; November&nbsp;2008.</span><span>)</span></a>
</p>
<p>The goals of this draft are to present the effects of mobility on the
      NTLP/NSLPs and to provide guides on how such NSIS protocols work in
      basic mobility scenarios, including support for Mobile IPv4 and Mobile
      IPv6 scenarios. We also show how these protocols fulfil the requirements
      regarding mobility set forth in <a class='info' href='#8'>[8]<span> (</span><span class='info'>Brunner, (Ed), M., &ldquo;Requirements for Signaling Protocols,&rdquo; June&nbsp;2004.</span><span>)</span></a>.
      In general, the NSIS protocols work well in mobile environments. The
      efficiency of NSIS signaling is primarily an issue of software
      engineering, e.g., which way an implementer chooses when implementing
      the protocol functions, and how the coupling of the mobility management
      protocols and the NSIS stack is implemented.
</p>
<p>The Session ID (SID) used in NSIS signaling enables the separation of
      the signaling state and the IP addresses of the communicating hosts.
      This makes it possible to directly update a signaling state in the
      network due to mobility without being forced to first remove the old
      state and then re-establish a new one. This is the fundamental reason
      why NSIS signaling works well in mobile environments.
</p>
<p>A further important issue is that NSLPs must be aware of mobility,
      i.e., routing and IP address changes. GIST has no semantics of an
      end-to-end signaling session, only NSLPs have. Moreover, the Session ID
      is effectively an NSLP layer concept.
</p>
<p>This draft focuses on basic mobility scenarios. Key management
      related to handovers, multihoming and interactions between NSIS and
      other mobility management protocols than Mobile IP are out of scope of
      this document. Also, practical implementations typically need various
      APIs across components within a node. API issues, e.g., APIs from GIST
      to the various mobility and routing schemes, are also out of scope of
      this work. The generic GIST API towards NSLP is flexible enough to
      fulfill most mobility-related needs of the NSLP layer.
</p>
<a name="Terminology"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Requirements Notation and Terminology</h3>

<p>The terminology in this draft is based on <a class='info' href='#1'>[1]<span> (</span><span class='info'>Schulzrinne, H., &ldquo;GIST: General Internet Signaling Transport,&rdquo; June&nbsp;2009.</span><span>)</span></a> and <a class='info' href='#9'>[9]<span> (</span><span class='info'>Manner, J., &ldquo;Mobility Related Terminology,&rdquo; June&nbsp;2004.</span><span>)</span></a>.
      In addition, the following terms are used. Note that in this draft, a
      generic route change caused by regular IP routing is referred to as a
      'route change', and the route change caused by mobility is referred to
      as 'mobility'.
</p>
<p>(1) Downstream
</p>
<p>The direction from a data sender towards the data receiver.
</p>
<p>(2) Upstream
</p>
<p>The direction from a data receiver towards the data sender.
</p>
<p>(3) Crossover Node (CRN)
</p>
<p>A Crossover Node is a node that for a given function is a merging
      point of two or more paths belong to flows of the same session along
      which states are installed.
</p>
<p>In the mobility scenarios, there are two different types of merging
      points in the network according to the direction of signaling flows
      followed by data flows, where we assume that the
      MN is the data sender. </p>
<blockquote class="text">
<p>Upstream CRN (UCRN): the node closest to the data sender from
          which the state information in the direction from data receiver to
          data sender begins to diverge after a handover.
</p>
<p>Downstream CRN (DCRN): the node closest to the data sender from
          which the state information in the direction from the data sender to
          the data receiver begins to converge after a handover.
</p>
</blockquote>

<p>In general, the DCRN and the UCRN may be different due to the
      asymmetric characteristics of routing although the data receiver is the
      same.
</p>
<p>(4) State Update
</p>
<p>State Update is the procedure for the re-establishment of NSIS state
      on the new path, the teardown of NSIS state on the old path, and the
      update of NSIS state on the common path due to the mobility. The State
      Update procedure is used to address mobility for the affected flows.
      </p>
<blockquote class="text">
<p>Upstream State Update: State Update for the upstream signaling
          flow.
</p>
<p>Downstream State Update: State Update for the downstream
          signaling flow.
</p>
</blockquote>

<a name="Problem.Statement"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Challenges with Mobility</h3>

<p>IP mobility in its simplest form only includes route changes. This
      section identifies problems caused by mobility, which affect the
      operations of NSIS protocol suite.
</p>
<p>1. Change of route and possibly change of the MN's IP address
</p>
<p>Topology changes or network reconfiguration might lead to path
      changes for data packets sent to or from the MN and can cause an IP
      address change of the MN. Traditional route changes usually do not cause address changes
 of the flow endpoints. When an IP address changes due to mobility,
      information within the path-coupled MRI is affected (the source or
      destination address). Consequently, this concerns GIST as well as NSLPs,
      e.g., the packet classifier in QoS NSLP or some rules carried in NAT/FW
      NSLP. So already installed firewall rules, NAT bindings, and QoS
      reservations may become invalid, because the installed states refer to a
      non-existent flow. If the affected nodes are also on the new path, this
      information must be updated accordingly.
</p>
<p>2. Double state problem
</p>
<p>After a handover, packets may end up getting delivered through a new
      path. Since the state on the old path still remains as it was after
      re-establishing the state along the new path, we have two separate
      states for the same signaling session. Although the state on the old
      path will be deleted automatically based on the soft state timeout, the
      state timer value may be quite long (e.g., 90s as a default value). With
      the QoS NSLP, this problem might result in the waste of resources and
      lead to failure of admitting new reservations (due to lack of
      resources). With the NAT/FW NSLP, it is still possible to re-use this
      installed state although an MN roams to a new location; this means that
      another host can send data through a firewall without any prior NAT/FW
      NSLP signaling because the previous state did not yet expire.
</p>
<p>3. End-to-end signaling and frequency of route changes
</p>
<p>The change of route and IP addresses in mobile environments is
      typically much faster and more frequent than traditional route changes
      caused by node or link failure. This may result in a need to speed up
      the update procedure of NSLP states.
</p>
<p>4. Identification of the crossover node
</p>
<p>When a handover at the edge of a network has happened, in the typical
      case, only some parts of the end-to-end path used by the data packets
      changes. In this situation, the cross-over node (CRN) plays a central
      role in managing the establishment of the new signaling application
      state, and removing any useless state, while localizing the signaling to
      only the affect part of the network.
</p>
<p>5. Upstream State Update vs. Downstream State Update
</p>
<p>Due to the asymmetric nature of Internet routing, the upstream and
      downstream paths are likely not to be exactly the same. Therefore, 
      state update needs to be handled independently for upstream and 
      downstream paths.
</p>
<p>6. Upstream signaling
</p>
<p>If the MN is receiver and moves to a new point of attachment,
it is difficult to signal upstream towards the CN.
New signaling states have to be established along the new
path, but for a path-coupled MRM this has to be initiated
in downstream direction. So NTLP signaling state in upstream
direction cannot be initiated by the MN, i.e., GIST cannot
easily send a Query in upstream direction (there is an
upstream Q-mode, but this is only applicable in a limited
scope). The use of additional other protocols such as
application level signaling (e.g, SIP) or mobility
management signaling (e.g., Mobile IP) may help to trigger
NSLP and NTLP signaling from the CN side in downstream
direction though.
</p>
<p>7. Authorization Issues
</p>
<p>The procedure of State Update may be initiated by the MN, the CN, or
      even nodes within the network (e.g., crossover node, MAP in HMIP). This
      State Update on behalf of the MN raises authorization issues about the
      entity that is allowed to make these state modifications.
</p>
<p>8. Dead peer and invalid NR problem
</p>
<p>When the MN is on the path of a signaling exchange, after handover
      the old AR can not forward NSLP messages any further to the MN. In this
      case, the old AR's mobility or routing protocol, or even the NSLP may
      trigger an error message to indicate that the last node fails or is
      truncated. This error message is forwarded and may mistakenly cause the
      removal of the state on the existing common path, if the state is not
      updated before the error message is propagated through the signaling
      peers. This is called the 'invalid NR problem'.
</p>
<p>9. IP-in-IP Encapsulation
</p>
<p>Mobility protocols may use IP-in-IP encapsulation on the segment of
      the end-to-end path for routing traffic from the CN to the MN, and vice
      versa. Encapsulation harms any attempt to identify and filter data
      traffic belonging to, for example, a QoS reservation. Moreover,
      encapsulation of data traffic may lead to changes in the routing paths
      since the source and the destination IP addresses of the inner header
      differ from those of the outer header. Mobile IP uses tunneling
      mechanisms to forward data packets among end hosts. Traversing over the
      tunnel, NSIS signaling messages are transparent on the tunneling path
      due to the change of flow's addresses. In case of interworking with
      Mobile IP-tunneling, CRNs can be discovered on the tunneling path. It
      enables NSIS protocols to perform State Update procedure over the
      IP-tunnel. In this case, GIST needs to cope with the change of Message
      Routing Information (MRI) for the CRN discovery on the tunnel. Also,
      NSLP signaling needs to determine when to remove the tunneling segment
      on the signaling path and/or how to tear down the old state via
      interworking with the IP-tunneling operation. Furthermore, tunneling adds additional IP header as
overhead that must be taken into account by QoS NSLP
for example, when resources must be reserved accordingly.
So an NSLP must usually be aware whether tunneling or
route optimization is actually used for a flow.
</p>
<a name="Basic.OP"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Basic Operations for Mobility Support</h3>

<p>This section presents the basic operations of the NSIS protocol suite
      after mobility related route changes. Detailed discussion of the
      operation of Mobile IP with respect to NSIS protocols are discussed in
      the subsequent section.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
General functionality</h3>

<p>The NSIS protocol suite decouples state and flow identification. A
        state is stored and referred by the Session ID (SID). Flows associated
        with a given NSLP state are defined by the Message Routing Information
        (MRI). GIST notices when a routing path associated with a SID changes,
        and provides a notification to the NSLP. It is then up to the NSLP to
        update the state information in the network. Thus, the effect is an
        update to the states, not a full new request. This decoupling
        effectively solves also a typical problem with certain signaling
        protocols, where protocol state is identified by flow endpoints, and
        when flow endpoint addresses change, the whole session state becomes
        invalid.
</p>
<p>A further benefit of the decoupling is that if the MRI, i.e., the
        IP addresses associated with the data flow, remain the same after
        movement, the NSIS signaling will repair only the affected path of the
        end-to-end session. Thus, updating the session information in the
        network will be localized, and no end-to-end signaling will be needed.
        If the MRI changes, end-to-end signaling usually can not be avoided since new
        information for proper data flow identification must be provided all
        the way between the data sender and receiver, e.g.,
   in order to update filters, QoS profiles, or other flow related
   session data.
</p>
<p>GIST provides NSLPs with an identifier of the next signaling peer,
        the SII Handle. When this SII Handle changes, the NSLP knows a routing
        change has happened. Yet, the NSLP can also figure out whether it is
        also the crossover node for the session. Thus, CRN discovery is always
        done at the NSLP layer because only NSLPs have a notion of end-to-end
        signaling.
</p>
<p>When a path changes, the session information on the old path needs
        to be removed. After a routing change, the NSLP running on the
        end-host or the CRN, depending on the direction of the session, can
        use the SII Handle (provided by GIST) to remove states on the old
        path; new session information is simultaneously set up on the new
        path. Both current NSLPs use sequence numbers to identify the order of
        messages, and this information can be used by the protocols to recover
        from a routing change.
</p>
<p>Since NSIS operates on a hop-by-hop basis, any peer can perform
        state updates. This is possible because a chain-of-trust is expected
        between NSIS nodes. If this weren't the case, e.g., true resource
        reservations would not be possible; one misbehaving or compromised
        node would effectively break everything. Thus, currently the NSIS
        protocols do not limit the roles of each NSIS signaling peer on a
        path, and any node can make updates. Yet, some updates are reflected
        back to the signaling end points, and they can decide whether the
        signaling actually succeeded, or not.
</p>
<p>If the signaling packets are encapsulated in a tunnel, it is
        necessary to perform a separate signaling exchange for the tunneled
        region. Furthermore, a binding is needed to tie the end-to-end and
        tunneled session together.
</p>
<p>Furthermore, in some cases the NSLP must be aware whether tunneling
   is used, since additional tunneling overhead must be taken into
   account, e.g., for resource reservations etc.
</p>
<a name="Basic.OP.example"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
QoS NSLP</h3>

<p>The following figure illustrates an example of QoS NSLP signaling
        in a Mobile IPv6 route optimization case, for a data flow from the MN
        to the CN, where sender-initiated reservation is used. Once a handover
        event is detected in the MN, the MN must get to know the new
        care-of-address and update the path coupled MRI accordingly. Then the
        MN issues a QoS NSLP RESERVE message towards the CN, that carries the
        unique session ID and other identification information for the
        session, as well as the reservation requirements. Upon receipt of the
        RESERVE message, the QoS NSLP nodes (which will be discovered by the
        underlying NTLP) establish the corresponding QoS NSLP state, and
        forward the message towards the CN. When there is already an existing
        NSLP state with the same session ID, the state will be updated. If all
        the QoS NSLP nodes along the path support the required QoS, the CN in
        turn responds with a RESPONSE message, to confirm the reservation.
</p>
<p>In a bi-directional tunneling case, the only difference is that the
        RESERVE message should be sent to the HA instead of the CN, and the
        node which responds with a RESPONSE should be the HA instead of the CN
        too. More details are discussed in <a class='info' href='#Int.with.mip4.mip6'>Section&nbsp;5<span> (</span><span class='info'>Interaction with Mobile IPv4/v6</span><span>)</span></a>
</p>
<p>Therefore, for the basic operation there is no fundamental
        difference among different operation modes of Mobile IP, and the main
        issue of mobility support in NSIS is to trigger NSLP signaling
        appropriately when a handover event is detected, and the destination
        of the NSLP signaling shall follow the Mobile IP data path as being
        path-coupled signaling.
</p>
<p>In this process, the obsoleted state in the old path is not
        explicitly released. To speed up the process, it may be possible to
        localize the signaling. When the RESERVE message
        reaches a node, depicted as CRN in this document, where a state is
        determined for the first time to reflect the same session, the node
        may issue a NOTIFY message towards the MN's old CoA. The QNE adjacent
        to MN's old position stops the NOTIFY message, and sends RESERVE
        message (with Teardown bit set) towards the CN, to release the
        obsoleted state. This RESERVE with tear message is stopped by the CRN.
        The RSN used in the messages is used to distinguish the order of the
        signaling. More details are described in <a class='info' href='#Localized.signaling.scenario'>Section&nbsp;4.4<span> (</span><span class='info'>Localized signaling in mobile scenarios</span><span>)</span></a>
</p><br /><hr class="insert" />
<a name="fig.Basic.OP.example"></a>

<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


   MN   QNE1 MN       QNE2       QNE3     QNE4     CN
 (CoA1)  | (CoA2)      |        (CRN)      |        |
   |     |    |        |          |        |        |
   |     |    |        |          |        |        |
   |     |    |RESERVE |          |        |        |
   |     |    |-------&gt;|          |        |        |
   |     |    | (1)    |RESERVE   |        |        |
   |     |    |        |---------&gt;|        |        |
   |     |    |        | (2)      |RESERVE |        |
   |     |    |        |          |-------&gt;|        |
   |     |    |        |          |  (3)   |RESERVE |
   |     |    |        |          |        |-------&gt;|
   |     |    |        |    NOTIFY|        |  (4)   |
   |     |    |        |&lt;---------|        |        |
   |     |    |  NOTIFY|    (9)   |        |        |
   |     |&lt;------------|          |        |        |
   |     |    |  (10)  |          |        |        |
   |     |RESERVE(T)   |          |        |        |
   |     |------------&gt;|          |        |        |
   |     |    |  (11)  |RESERVE(T)|        |        |
   |     |    |        |---------&gt;|        |        |
   |     |    |        |   (12)   |        |RESPONSE|
   |     |    |        |          |        |&lt;-------|
   |     |    |        |          |RESPONSE|   (5)  |
   |     |    |        |  RESPONSE|&lt;-------|        |
   |     |    |RESPONSE|&lt;---------|  (6)   |        |
   |     |    |&lt;------ |    (7)   |        |        |
   |     |    |  (8)   |          |        |        |
   |     |    |        |          |        |        |
   |     |    |        |          |        |        |


</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: Basic operation example&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>Further cases to consider are:</p>
<blockquote class="text">
<p>* receiver-initiated reservation if MN is sender
</p>
<p>* sender-initiated reservation if MN is receiver
</p>
<p>* receiver-initiated reservation if MN is receiver
</p>
</blockquote>

<p>In the first case, the MN can easily initiate a new QUERY
along the new path after movement, thereby installing signaling
state and eventually eliciting a new RESERVE from the CN in upstream
direction. Similarly, the second and third cases require
the CN to initiate a RESERVE or QUERY message respectively.
The difficulty in both cases is, however, to let the CN know
that the MN has moved. Because the MN is the receiver it cannot
simply use an NSLP message to do so, because upstream signaling
is not possible in this case (cf. Sec. 3, Upstream Signaling).
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
NATFW NSLP</h3>

<p>The following figure illustrates an example of NATFW NSLP signaling
        in a Mobile IPv6 route optimization case, for a data flow from the MN
        to the CN. The difference to the QoS NSLP is that for the NATFW NSLP
        only the NSIS initiator (NI) can update the signalling session, in any
        case. Once a handover event is detected in the MN, the MN must get to
        know the new care-of- address and update the path coupled MRI
        accordingly. Then the MN issues a NATFW NSLP CREATE message towards
        the CN, that carries the unique session ID and other identification
        information for the session. Upon receipt of the CREATE message, the
        NATFW NSLP nodes (which will be discovered by the underlying NTLP)
        establish the corresponding NATFW NSLP state, and forward the message
        towards the CN. When there is already an existing NSLP state with the
        same session ID, the state will be updated. If all the NATFW NSLP
        nodes along the path accept the required NAT/firewall configuration,
        the CN in turn responds with a RESPONSE message, to confirm the
        configuration.
</p>
<p>In a bi-directional tunneling case, the only difference is that the
        CREATE message should be sent to the HA instead of the CN, and the
        node which responds with a RESPONSE should be the HA instead of the CN
        too.
</p>
<p>Therefore, for the basic operation there is no fundamental
        difference among different operation modes of Mobile IP, and the main
        issue of mobility support in NSIS is to trigger NSLP signaling
        appropriately when a handover event is detected, and the destination
        of the NSLP signaling shall follow the Mobile IP data path as being
        path-coupled signaling.
</p>
<p>In this process, the obsoleted state in the old path is not
        explicitly released. When the CREATE message reaches a node, depicted
        as CRN in this document, where a state is determined for the first
        time to reflect the same session, the node may issue a NOTIFY message
        towards the MN's old CoA.
</p>
<p><br /><hr class="insert" />
<a name="fig.Basic.OP.exampleNATFW"></a>

<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>      MN    NI MN         NF1       NF2       NF3     CN
    (CoA1)  | (CoA2)      |        (CRN)      |        |
      |     |    |        |          |        |        |
      |     |    |        |          |        |        |
      |     |    |CREATE  |          |        |        |
      |     |    |-------&gt;|          |        |        |
      |     |    | (1)    |CREATE    |        |        |
      |     |    |        |---------&gt;|        |        |
      |     |    |        | (2)      |CREATE  |        |
      |     |    |        |          |-------&gt;|        |
      |     |    |        |          |  (3)   |CREATE  |
      |     |    |        |          |        |-------&gt;|
      |     |    |        |    NOTIFY|        |  (4)   |
      |     |    |        |&lt;---------|        |        |
      |     |    |  NOTIFY|    (9)   |        |        |
      |     |&lt;------------|          |        |        |
      |     |    |  (10)  |          |        |        |
      |     |CREATE(CoA2) |          |        |        |
      |     |------------&gt;|          |        |        |
      |     |    |  (11)  |CREATE(CoA2)       |        |
      |     |    |        |---------&gt;|        |        |
      |     |    |        |   (12)   |        |RESPONSE|
      |     |    |        |          |        |&lt;-------|
      |     |    |        |          |RESPONSE|   (5)  |
      |     |    |        |  RESPONSE|&lt;-------|        |
      |     |    |RESPONSE|&lt;---------|  (6)   |        |
      |     |    |&lt;------ |    (7)   |        |        |
      |     |    |  (8)   |          |        |        |
      |     |    |        |          |        |        |
      |     |    |        |          |        |        |

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: NATFW NSLP operation example&nbsp;</b></font><br /></td></tr></table><hr class="insert" />


<a name="Localized.signaling.scenario"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4"></a><h3>4.4.&nbsp;
Localized signaling in mobile scenarios</h3>

<p>As shown in <a class='info' href='#fig.Top.NSIS.sig.caused.mob'>Figure&nbsp;3<span> (</span><span class='info'>The topology for NSIS signaling caused by mobility</span><span>)</span></a>,
	 mobility generally causes signaling path to either converge or diverge
        depending on the direction of each signaling flow.
</p><br /><hr class="insert" />
<a name="fig.Top.NSIS.sig.caused.mob"></a>

<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

                              Old path
              +--+        +-----+
    original  |MN|&lt;------ |OAR  | ---------^
    address   |  |        |NSLP1|          ^
              +--+        +-----+          ^   common path
               |             C            +-----+   +-----+    +--+
               |                          |     |&lt;--|NSLP1|----|CN|
               |                          |NSLP2|   |NSLP2|    |  |
               v                New path  +-----+   +-----+    +--+
              +--+        +-----+          V B        A
     New CoA  |MN|&lt;------ |NAR  |----------V      &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
              |  |        |NSLP1|                  ^
              +--+        +-----+                  ^
                             D                     ^
       &lt;=====(upstream signaling followed by data flows) =====

   (a) The topology for upstream NSIS signaling flow due to
      mobility (in case the MN is a data sender)

                                Old path
              +--+        +-----+
    original  |MN|------&gt; |OAR  | ----------V
              |  |        |NSLP1|
    address   +--+        +-----+           V   common path
               |             K            +-----+   +-----+    +--+
               |                          |     |---|NSLP1|---&gt;|CN|
               |                          |NSLP2|   |NSLP2|    |  |
               v                New path  +-----+   +-----+    +--+
              +--+        +-----+           ^ M        N
     New CoA  |MN|------&gt; |NAR  |-----------^      &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;
              |  |        |NSLP1|                  ^
              +--+        +-----+                  ^
                             L                     ^
     ====(downstream signaling followed by data flows) ======&gt;

   (b) The topology for downstream NSIS signaling flow due to
      mobility (in case the MN is a data sender)

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3: The topology for NSIS signaling caused by mobility&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>These topological changes due to mobility cause the NSIS state
        established in the old path to be useless. Such state may be removed
        as soon as possible. In addition, NSIS state needs to be established
        along the new path and be updated along the common path. The
        re-establishment of NSIS signaling may be localized when route changes
        (including mobility) occur to minimize the impact on the service and
        to avoid unnecessary signaling overhead. This localized signaling
        procedure is referred to as State Update (refer to the terminology
        section). In mobile environments, for example, the NSLP/ NTLP needs to
        limit the scope of signaling information only to the affected portion
        of the signaling path because the signaling path in the wireless
        access network usually changes only partially.
</p>
<a name="CRN.discovery"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4.1"></a><h3>4.4.1.&nbsp;
CRN Discovery</h3>

<p>The CRN is discovered at the NSLP layer. In case of QoS NSLP,
          when a RESERVE message with an existing SESSION_ID is received and
          its Source Identification Information (SII) and MRI are changed, the
          QNE knows its upstream or downstream peer has changed by the
          handover, for sender-oriented and receiver-oriented reservations,
          respectively. And realizes it is implicitly the CRN.
</p>
<a name="State.setup.and.update"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4.2"></a><h3>4.4.2.&nbsp;
Localized State Update</h3>

<p>In the downstream State Update, the MN initiates the RESERVE with
          a new RSN for state setup toward a CN and also the implicit DCRN
          discovery is performed by the procedure of signaling as described in
          <a class='info' href='#CRN.discovery'>Section&nbsp;4.4.1<span> (</span><span class='info'>CRN Discovery</span><span>)</span></a>. The MRI from the DCRN to the
          CN (i.e., common path) is updated by the RESERVE message. DCRN may
          also send NOTIFY with "Route change (0x02)" to previous upstream
          peer. The NOTIFY is forwarded hop-by-hop and reaches the edge QNE
          (i.e., QNE1 in <a class='info' href='#fig.Basic.OP.example'>Figure&nbsp;1<span> (</span><span class='info'>Basic operation example</span><span>)</span></a>). After
          the QNE is aware that the MN as QNI has disappeard (how this is can
          be noticed is out of scope of NSIS, yet, e.g., GIST will eventually
          no this through undelivered messages), the QNE sends a tearing
          RESERVE towards downstream. When the tearing RESERVE reaches the
          DCRN, it stops forwarding and drops it. Note that, however, it is
          not necessary for GIST state to be explicitly removed because of the
          inexpensiveness of the state maintenance at the GIST layer <a class='info' href='#1'>[1]<span> (</span><span class='info'>Schulzrinne, H., &ldquo;GIST: General Internet Signaling Transport,&rdquo; June&nbsp;2009.</span><span>)</span></a>. Note that, the sender-initiated approach
          leads to faster setup than the receiver-initiated approach as in
          RSVP <a class='info' href='#5'>[5]<span> (</span><span class='info'>Braden, B., &ldquo;Resource ReSerVation Protocol (RSVP) -- Version 1 Functional           Specification,&rdquo; September&nbsp;1997.</span><span>)</span></a>.
</p>
<p>In the scenario of an upstream State Update, there are two
          possible methods for state update. One is the CN (or a HA/ a GFA/ a
          MAP) sends the refreshing RESERVE message toward the MN to perform
          State Update upon receiving trigger (e.g., MIP binding update). UCRN
          is discovered implicitly by the CN-initiated signaling along the
          common path as described in <a class='info' href='#CRN.discovery'>Section&nbsp;4.4.1<span> (</span><span class='info'>CRN Discovery</span><span>)</span></a>.
          When the refreshing RESERVE reaches to the adjacent QNE of UCRN, the
          QNE sends back a RESPONSE saying "full QSPEC required". Then the
          UCRN sends the RESERVE with full QSPEC towards the MN to set up a
          new reservation. The UCRN may also send tearing RESERVE to previous
          downstream peer. The tearing RESERVE is forwarded hop-by-hop and
          reaches to the edge QNE. After the QNE is aware that the MN as QNI
          has disappeard, the QNE drops the tearing peer. Another method is,
          if GIST hop is already established on the new path (e.g. by QUERY
          from the CN, or the HA/GFA/ MAP) when MN gets a hint from GIST that
          routing has changed, the MN sends a NOTIFY towards upstream saying
          "Route Change" 0x02. When the NOTIFY hits UCRN, the UCRN is aware
          that the NOTIFY is for a known session comes from a new SII-Handle.
          Then the UCRN sends a RESERVE with a new RSN and an RII towards the
          MN. By receiving the RESERVE, the MN replies RESPONSE. The UCRN may
          also send tearing RESERVE to previous downstream peer. The tearing
          RESERVE is forwarded hop-by-hop and reaches to the edge QNE. After
          the QNE is aware that the MN as QNI is disappeared, the QNE drops
          the tearing peer.
</p>
<p>The State Update on the common path to reflect the changed MRI
          brings issues on the end-to-end signaling addressed in <a class='info' href='#Problem.Statement'>Section&nbsp;3<span> (</span><span class='info'>Challenges with Mobility</span><span>)</span></a>. Although the State Update over
          the common path does not give rise to re-processing of AAA and
          admission control, it may lead to the increased signaling overhead
          and latency.
</p>
<p>One of the goals of the State Update is to avoid the double
          reservation on the common path as described in <a class='info' href='#Problem.Statement'>Section&nbsp;3<span> (</span><span class='info'>Challenges with Mobility</span><span>)</span></a>. The double reservation problem
          on the common path can be solved by establishing a signaling
          association using a unique SID and by updating packet
          classifier/MRI. In this case, even though the flows on the common
          path have different MRIs, it refers to the same NSLP state.
</p>
<a name="Int.with.mip4.mip6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Interaction with Mobile IPv4/v6</h3>

<p>Mobility management solutions like Mobile IP try to hide mobility
      effects from applications by providing stable addresses and avoiding
      address changes. On the other hand, the PC-MRI contains flow addresses
      and will change if the CoA changes. This makes impact on some NSLPs such
      as QoS NSLP and NAT/FW NSLP.
</p>
<p>QoS NSLP must be mobility-aware because it needs to care about the
      resources on the actual current path, and sending a new RESERVE or QUERY
      for the new path. Applications on top of Mobile IP communicate along
      logical flows that use home addresses, whereas QoS NSLP has to be aware
      of the actual flow path, e.g., whether the flow is currently tunneled or
      route-optimized etc. QoS NSLP may have to obtain current link
      properties, esp. additional overhead due to mobility header extensions
      that must be taken into account in QSPEC (e.g., the m parameter in the
      TMOD). Therefore, NSLPs must interact with mobility management
      implementations in order to request information about the current flow
      address (CoAs), source addresses, tunneling, or, overhead. Furthermore,
      an implementation must select proper interface addresses in the NLI in
      order to ensure that a corresponding Messaging Association is
      established along the same path as the flow in the MRI. Moreover, the
      home agent needs to perform additional actions (e.g., reservations) for
      the tunnel. If the home agent lacks support of a mobility-aware QoS NSLP
      a missing tunnel reservation is usually the result. Practical problems
      may occur in situations where a home agent needs to send a GIST query
      (with S-flag=1) towards the MN's Home Address and the query is not
      tunneled due to route optimization between HA and MN: the query will be
      wrongly intercepted by QNEs within the tunnel.
</p>
<p>NAT/FW box needs to be configured before MIP signaling, hence NAT/FW
      signaling will have to be performed, to allow RRT and BU/BA messages to
      traverse the NAT/FWs in the path. After that the NAT/FW procedure more
      likes QoS NSLP (perform another NAT/FW signaling after BU). Optimized
      version can include a combined NAT/FW message to cover both RTT and
      BU/BA messages pattern. However this may require NAT/FW NSLP to do a
      slight update to support carrying multiple NAT/FW rules in one signaling
      round trip.
</p>
<p>This section analyzes NSIS operation with tunneled route case
      especially for QoS NSLP.
</p>
<a name="Int.with.MIP4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Interaction with Mobile IPv4</h3>

<p>In Mobile IPv4 <a class='info' href='#6'>[6]<span> (</span><span class='info'>Perkins, C., &ldquo;IP Mobility Support for IPv4,&rdquo; August&nbsp;2002.</span><span>)</span></a>, the data flows
        are forwarded based on triangular routing, and an MN retains a new CoA
        from the FA (or an external method such as DHCP) in the visited access
        network. When the MN acts as a data sender, the data and signaling
        flows sent from the MN are directly transferred to the CN not
        necessarily through the HA or indirectly through the HA using the
        reverse tunneling. On the other hand, when the MN act as a data
        receiver, the data and signaling flows sent from the CN are routed
        through the IP tunneling between the HA and the FA (or the HA and the
        MN in case of the Co-located CoA). With this approach, routing is
        dependent on the HA, and therefore the NSIS protocols interact with
        the IP tunneling procedure of Mobile IP for signaling.
</p>
<p>The <a class='info' href='#fig.mip4'>Figure&nbsp;4<span> (</span><span class='info'>NSIS signaling flows under different Mobile IPv4 scenarios</span><span>)</span></a> (a) to (e) show the NSIS
        signaling flows depending on the direction of the data flows and the
        routing methods.
</p><br /><hr class="insert" />
<a name="fig.mip4"></a>

<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>



         MN        FA (or FL)                            CN
         |             |                                  |
         | IPv4-based Standard IP routing                 |
         |------------ |---------------------------------&gt;|
         |             |                                  |

        (a) MIPv4: MN--&gt;CN, no reverse tunnel

         MN              FA               HA             CN
         | IPv4 (normal)  |                |              |
         |---------------&gt;| IPv4(tunnel)   |              |
         |                |---------------&gt;| IPv4 (normal)|
         |                |                |-------------&gt;|

        (b) MIPv4: MN--&gt;CN, the reverse tunnel with FA CoA

         MN             (FL)               HA            CN
         |               |                |               |
         |        IPv4(tunnel)            |               |
         |-------------------------------&gt;|IPv4 (normal)  |
         |               |                |--------------&gt;|

        (c) MIPv4: MN--&gt;CN, the reverse tunnel with Co-located CoA

         CN              HA                FA             MN
         |IPv4 (normal)  |                 |              |
         |--------------&gt;|                 |              |
         |               |  MIPv4 (tunnel) |              |
         |               |----------------&gt;| IPv4 (normal)|
         |               |                 |-------------&gt;|

        (d) MIPv4: CN--&gt;MN, Foreign agent Care-of-address

         CN              HA                (FL)           MN
         |IPv4(normal )  |                 |              |
         |--------------&gt;|                 |              |
         |               | MIPv4 (tunnel)  |              |
         |               |-------------------------------&gt;|
         |               |                 |              |

        (e) MIPv4: CN--&gt;MN with Co-located Care-of-address


</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;4: NSIS signaling flows under different Mobile IPv4 scenarios&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>When an MN (as a signaling sender) arrives at a new FA and the
        corresponding binding process is completed (<a class='info' href='#fig.mip4'>Figure&nbsp;4<span> (</span><span class='info'>NSIS signaling flows under different Mobile IPv4 scenarios</span><span>)</span></a> (a), (b) and (c)), the MN performs the CRN
        discovery (DCRN) and the State Update toward the CN (as described in
        <a class='info' href='#Basic.OP'>Section&nbsp;4<span> (</span><span class='info'>Basic Operations for Mobility Support</span><span>)</span></a>) to establish the NSIS state along the
        new path between the MN and the CN. In case reverse tunnel is not used
        (<a class='info' href='#fig.mip4'>Figure&nbsp;4<span> (</span><span class='info'>NSIS signaling flows under different Mobile IPv4 scenarios</span><span>)</span></a> (a)), a new NSIS state is established
        on direct path from the MN to the CN. If the reverse tunnel and FA CoA
        are used (<a class='info' href='#fig.mip4'>Figure&nbsp;4<span> (</span><span class='info'>NSIS signaling flows under different Mobile IPv4 scenarios</span><span>)</span></a> (b)), a new NSIS state is
        established along a tunneling path from the FA to the HA separately
        from end-to-end path. CRN discovery and State Update in tunneling path
        is also separately performed if necessary. If the reverse tunnel and
        co-located CoA are used (<a class='info' href='#fig.mip4'>Figure&nbsp;4<span> (</span><span class='info'>NSIS signaling flows under different Mobile IPv4 scenarios</span><span>)</span></a> (c)) the NSIS
        signaling for the DCRN discovery and the State Update is the same as
        the case of using FA CoA above except for the use of the reverse
        tunneling path from the MN to the HA. That is, in this case, one of
        tunnel end points is the MN, not the FA.
</p>
<p>When an MN (as a signaling receiver) arrives at a new FA and the
        corresponding binding process is completed (<a class='info' href='#fig.mip4'>Figure&nbsp;4<span> (</span><span class='info'>NSIS signaling flows under different Mobile IPv4 scenarios</span><span>)</span></a> (d) and (e)), the MN sends NOFITY message to
        the signaling sender, i.e., the CN. In case FA CoA is used (<a class='info' href='#fig.mip4'>Figure&nbsp;4<span> (</span><span class='info'>NSIS signaling flows under different Mobile IPv4 scenarios</span><span>)</span></a> (d)), the CN initiates a NSIS signaling to
        update an existing state between the CN and the HA, and afterwards the
        NSIS signaling messages are forwarded to the FA and reaches to the MN.
        A new NSIS state is established along the tunneling path from the HA
        to the FA separately from end-to-end path. During this operation, a
        UCRN is discovered on the tunneling path, and a new MRI for the State
        Update on the tunnel may need to be created. CRN discovery and State
        Update in tunneling path is also separately performed if necessary. In
        case collocated CoA is used (<a class='info' href='#fig.mip4'>Figure&nbsp;4<span> (</span><span class='info'>NSIS signaling flows under different Mobile IPv4 scenarios</span><span>)</span></a> (d)) the
        NSIS signaling for the UCRN discovery and the State Update is also the
        same as the case of using FA CoA above except for the end point of
        tunneling path from the HA to the MN.
</p>
<p>Note that Mobile IPv4 optionally supports route optimization. In
        the case route optimization is supported, the signaling operation will
        be the same as Mobile IPv6 route optimization.
</p>
<a name="Int.with.MIP6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Interaction with Mobile IPv6</h3>

<p>Unlike Mobile IPv4, with Mobile IPv6 <a class='info' href='#7'>[7]<span> (</span><span class='info'>Johnson, D., &ldquo;Mobility Support in IPv6,&rdquo; June&nbsp;2004.</span><span>)</span></a>, the FA is not required on the data
        path. If an MN moves to visited network, a CoA at the network is
        allocated like co-located CoA in Mobile IPv4. In addition, the route
        optimization process between the MN and CN can be used to avoid the
        triangular routing in the Mobile IPv4 scenarios.
</p>
<p>If the route optimization is not used, data flow routing and NSIS
        signaling procedures (including the CRN discovery and the State
        Update) will be similar to the case of using the Mobile IPv4 with
        co-located CoA. However, if Route Optimization is used, signaling
        messages are sent directly from the MN to the CN, or from the CN to
        the MN. Therefore, route change procedures described in <a class='info' href='#Basic.OP'>Section&nbsp;4<span> (</span><span class='info'>Basic Operations for Mobility Support</span><span>)</span></a> are applicable to this case.
</p>
<a name="Int.with.MIPtunnel"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
Interaction with Mobile IP tunneling</h3>

<p>In this section, we assume that MN acts as an NI and CN acts as an
        NR in interworking between Mobile IP and NSIS signaling.
</p>
<p>Scenarios for interaction with Mobile IP tunneling vary depending
        on: </p>
<blockquote class="text">
<p>- Whether a tunneling entry point (Tentry) is an MN or other
            node. In case Mobile IPv4 co-located CoA or Mobile IPv6, Tentry is
            an MN. In case Mobile IPv4 FA CoA case, Tentry is a FA. In both
            case, a HA is tunneling exit point (Texit).
</p>
<p>- Whether the mode of QoS-NSLP signaling is sender-initiated or
            receiver initiated.
</p>
<p>- Whether the signaling mode over tunnel is sequential mode or
            parallel mode. In sequential mode, end-to-end signaling pauses
            when it is waiting for results of tunnel signaling, and resumes
            upon receipt of the tunnel signaling outcome. In parallel mode,
            end-to-end signaling continues outside the tunnel while tunnel
            signaling is still in process and its outcome is unknown <a class='info' href='#4'>[4]<span> (</span><span class='info'>Shen, C., &ldquo;NSIS Operation Over IP Tunnels,&rdquo; December&nbsp;2009.</span><span>)</span></a>.
</p>
</blockquote>

<p>The following subsection describes sender-initiated and
        receiver-initiated reservation with Mobile IP tunneling and CRN
        discovery and State Update with Mobile IP tunneling.
</p>
<a name="Int.with.MIPtunnel.SI"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3.1"></a><h3>5.3.1.&nbsp;
Sender-Initiated Reservation with Mobile IP tunnel</h3>

<p>The following scenario assumes that a FA is a Tentry. However the
          procedure is the same for the case an MN is a Tentry if it is
          considered that the MN and the FA are the same node. </p>
<blockquote class="text">
<p>- When an MN moves into a new network attachment point, QoS-
              NSLP in the MN initiates RESERVE (end-to-end) message to start
              the State Update procedure. The GIST below the QoS-NSLP adds
              GIST header and then sends the encapsulated RESERVE message to
              peer GIST node with corresponding QoS-NSLP for DCRN discovery.
              In this case, the peer GIST node is a FA if the FA is an
              NSIS-aware node. The FA is one of the endpoints of Mobile IP
              tunneling: Tentry. In case of interaction with tunnel signaling
              originated from the FA, there can be two scenarios depending on
              whether NSIS signaling interacts with the Mobile IP tunneling.
              The first scenario is that the NSIS signaling is discerned on
              the tunneling path between the FA and corresponding HA, and then
              the tunneling path becomes an NSIS-aware cloud. The second one
              is otherwise, and here the tunneling path is transparent as a
              logical link to NSIS signaling <a class='info' href='#4'>[4]<span> (</span><span class='info'>Shen, C., &ldquo;NSIS Operation Over IP Tunnels,&rdquo; December&nbsp;2009.</span><span>)</span></a>.
</p>
<p>- In the NSIS-aware tunneling scenarios, as shown in <a class='info' href='#fig.miptunnel.SI.SE'>Figure&nbsp;5<span> (</span><span class='info'>Sender-Initiated QoS-NSLP over Tunnel - Sequential Mode</span><span>)</span></a> and <a class='info' href='#fig.miptunnel.SI.PA'>Figure&nbsp;6<span> (</span><span class='info'>Sender-Initiated QoS NSLP over Tunnel - Parallel Mode</span><span>)</span></a>, upon receiving the RESERVE
              message from the MN, the QoS-NSLP of FA explicitly creates a new
              RESERVE-t (tunnel) message, which keeps the existing
              (end-to-end) Session ID and includes a new (tunneling) MRI
              different from the (end-to-end) MRI, to distinguish the NSIS
              signaling messages over the Mobile IPv4 tunneling path. The
              RESERVE-t message is forwarded toward HA, another end point of
              Mobile IPv4 tunneling. Also, after receiving the RESERVE-t
              message from the FA, the HA should decide whether it needs to
              initiate a RESPONSE-t (tunnel) message toward FA for responding
              to the RESERVE-t message, or make the RESPONSE-t message wait
              until a RSESPONSE message, which is created to react the RESERVE
              message, arrives from the CN.
</p>
<p>- In this procedure of NSIS-tunnel signaling, again, two
              categories of tunnel signaling mode are taken into
              consideration, i.e., either sequential or parallel mode.
</p>
<p>- Provided that the tunnel signaling mode is sequential as
              shown in <a class='info' href='#fig.miptunnel.SI.SE'>Figure&nbsp;5<span> (</span><span class='info'>Sender-Initiated QoS-NSLP over Tunnel - Sequential Mode</span><span>)</span></a>, the RESERVE
              signaling toward the HA resumes after confirming completeness of
              NSIS tunnel signaling through the RESERVE-t and the RESPONSE-t
              messages. Arriving at HA, the RESERVE message is forwarded to CN
              to update or refresh the existing NSIS states (QoS-NSLP and
              GIST) on the common path. The CN initiates a RESPONSE message,
              responding to the RESERVE message, toward the HA as its
              destination. The HA forwards the RESPONSE message to the FA
              after encapsulating the message. Finally, the RESPONSE message
              is sent to MN after being decapsulated at the FA. Note that both
              end-to-end signaling messages, the RESPONSE and the RESERVE
              messages, are not discernible on the tunneling path, like a
              logical link, and those messages just play a role of NSIS
              signaling for establishing end-to-end state.
</p>
<p>- Provided that the tunnel signaling mode is parallel as
              shown in <a class='info' href='#fig.miptunnel.SI.PA'>Figure&nbsp;6<span> (</span><span class='info'>Sender-Initiated QoS NSLP over Tunnel - Parallel Mode</span><span>)</span></a>, upon
              receiving the RESERVE message from the MN, the FA forwards it to
              the HA immediately. Also, arriving at the HA from the CN, the
              RESPONSE message is again forwarded from the HA to the FA
              regardless of the delivery of RESPONSE-t message. Since in this
              parallel mode the end-to-end signaling messages do not reconcile
              with both NSIS-tunnel signaling messages, the RESERVE-t and
              RESPONSE-t messages, the tunneling path operates like a logical
              link and thus NON-QoS-HOP flag is set within the RESERVE message
              although NSIS-tunnel signaling messages are available on the
              tunnel path.
</p>
</blockquote>
<br /><hr class="insert" />
<a name="fig.miptunnel.SI.SE"></a>

<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


    MN (Sender)  FA (Tentry) Tnode    HA (Texit)   CN (Receiver)

          |          |          |          |          |
          | RESERVE  |          |          |          |
          +---------&gt;|          |          |          |
          |          |RESERVE-t |          |          |
          |          +=========&gt;|          |          |
          |          |          |RESERVE-t |          |
          |          |          +=========&gt;|          |
          |          |          |RESPONSE-t|          |
          |          |          |&lt;=========+          |
          |          |RESPONSE-t|          |          |
          |          |&lt;=========+          |          |
          |          |       RESERVE       |          |
          |          +--------------------&gt;|          |
          |          |          |          | RESERVE  |
          |          |          |          +---------&gt;|
          |          |          |          | RESPONSE |
          |          |          |          |&lt;---------+
          |          |       RESPONSE      |          |
          |          |&lt;--------------------+          |
          | RESPONSE |          |          |          |
          |&lt;---------+          |          |          |
          |          |          |          |          |


</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;5: Sender-Initiated QoS-NSLP over Tunnel - Sequential Mode&nbsp;</b></font><br /></td></tr></table><hr class="insert" />
<br /><hr class="insert" />
<a name="fig.miptunnel.SI.PA"></a>

<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


       MN (Sender)  FA (Tentry) Tnode    HA (Texit)   CN (Receiver)

          |          |          |          |          |
          | RESERVE  |          |          |          |
          +---------&gt;|          |          |          |
          |          |RESERVE-t |          |          |
          |          +=========&gt;|          |          |
          |          |          |RESERVE-t |          |
          |          |          +=========&gt;|          |
          |          |       RESERVE       |          |
          |          +--------------------&gt;|          |
          |          |          |          | RESERVE  |
          |          |          |          +---------&gt;|
          |          |          |          | RESPONSE |
          |          |          |          |&lt;---------+
          |          |          |RESPONSE-t|          |
          |          |          |&lt;=========+          |
          |          |RESPONSE-t|          |          |
          |          |&lt;=========+          |          |
          |          |       RESPONSE      |          |
          |          |&lt;--------------------+          |
          | RESPONSE |          |          |          |
          |&lt;---------+          |          |          |
          |          |          |          |          |



</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;6: Sender-Initiated QoS NSLP over Tunnel - Parallel Mode&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="Int.with.MIPtunnel.RI"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3.2"></a><h3>5.3.2.&nbsp;
Receiver-Initiated Reservation with Mobile IP tunnel</h3>

<p><a class='info' href='#fig.miptunnel.RI.SE'>Figure&nbsp;7<span> (</span><span class='info'>Receiver-Initiated QoS NSLP over Tunnel - Sequential Mode</span><span>)</span></a> and <a class='info' href='#fig.miptunnel.RI.PA'>Figure&nbsp;8<span> (</span><span class='info'>Receiver-Initiated QoS NSLP over Tunnel - Parallel Mode</span><span>)</span></a> show examples of
          receiver-initiated operation with Mobile IP tunnel for Sequential
          and Parallel modes, respectively. Basic Operation is the same as
          sender-initiated case.
</p><br /><hr class="insert" />
<a name="fig.miptunnel.RI.SE"></a>

<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


       MN (Sender)  FA (Tentry) Tnode    HA (Texit)   CN (Receiver)
          |          |          |          |          |
          |QUERY     |          |          |          |
          +---------&gt;|       QUERY         |          |
          |          +--------------------&gt;|  QUERY   |
          |          |          |          +---------&gt;|
          |          |          |          | RESERVE  |
          |          |     RESERVE         |&lt;---------+
          |          |&lt;--------------------+          |
          |          |  QUERY-t |          |          |
          |          +=========&gt;| QUERY-t  |          |
          |          |          +=========&gt;|          |
          |          |          |RESERVE-t |          |
          |          |RESERVE-t |&lt;=========+          |
          |          |&lt;=========+          |          |
          |          |RESPONSE-t|          |          |
          | RESERVE  +=========&gt;|RESPONSE-t|          |
          |&lt;---------|          +=========&gt;|          |
          | RESPONSE |          |          |          |
          +---------&gt;|       RESPONSE      |          |
          |          +--------------------&gt;| RESPONSE |
          |          |          |          +---------&gt;|
          |          |          |          |          |



</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;7: Receiver-Initiated QoS NSLP over Tunnel - Sequential Mode&nbsp;</b></font><br /></td></tr></table><hr class="insert" />
<br /><hr class="insert" />
<a name="fig.miptunnel.RI.PA"></a>

<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


   MN (Sender)  FA (Tentry) Tnode    HA (Texit)   CN (Receiver)

          |          |          |          |          |
          |QUERY     |          |          |          |
          +---------&gt;|       QUERY         |          |
          |          +--------------------&gt;|  QUERY   |
          |          |          |          +---------&gt;|
          |          |          |          | RESERVE  |
          |          |     RESERVE         |&lt;---------+
          | RESERVE  |&lt;--------------------+          |
          |&lt;---------+          |          |          |
          |          |  QUERY-t |          |          |
          |          +=========&gt;| QUERY-t  |          |
          |          |          +=========&gt;|          |
          |          |          |RESERVE-t |          |
          |          |RESERVE-t |&lt;=========+          |
          |          |&lt;=========+          |          |
          |          |RESPONSE-t|          |          |
          |          +=========&gt;|RESPONSE-t|          |
          |          |          +=========&gt;|          |
          | RESPONSE |          |          |          |
          +---------&gt;|       RESPONSE      |          |
          |          +--------------------&gt;| RESPONSE |
          |          |          |          +---------&gt;|
          |          |          |          |          |


</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;8: Receiver-Initiated QoS NSLP over Tunnel - Parallel Mode&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3.3"></a><h3>5.3.3.&nbsp;
CRN discovery and State Update with Mobile IP tunneling</h3>

<p>Interaction with Mobile IP tunneling scenario can define two
          types of CRNs, i.e., a CRN on end-to-end path and a CRN on tunneling
          path. CRN discovery and State Update for these two paths are
          operated independently.
</p>
<p>CRN discovery for end-to-end path is initiated by the MN by
          sending RESERVE (sender-initiated case) or QUERY (receiver-initiated
          case) message. As MN uses HoA as source address even after handover,
          a CRN is found by normal route change process (i.e., the same SID
          and FID, but different SII handle). If a HA is QoS-NSLP aware, the
          HA is found as the CRN. The CRN initiate tearing process on the old
          path as described in <a class='info' href='#2'>[2]<span> (</span><span class='info'>Manner, J., &ldquo;NSLP for Quality-of-Service Signaling,&rdquo; October&nbsp;2009.</span><span>)</span></a>
</p>
<p>CRN discovery for tunneling path is initiated by Tentry by
          sending RESERVE-t (sender-initiated case) or QUERY-t
          (receiver-initiated case) message. The route change procedures
          described in <a class='info' href='#Basic.OP'>Section&nbsp;4<span> (</span><span class='info'>Basic Operations for Mobility Support</span><span>)</span></a> are applicable to this
          case.
</p>
<a name="Further.Studies"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Further Studies</h3>

<p>All sections above dealt with basic issues on NSIS mobility support.
      This section introduces potential issues and possible approaches for
      complicated scenarios in the mobile environment, i.e., peer failure
      scenarios, multihomed scenarios, and interworking with other mobility
      protocols, which may need to be resolved in the future. Topics in this
      section are out-of-scope of this document, and detailed operations are
      not described.
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
NSIS Operation in the multihomed mobile environment</h3>

<p>In multihomed mobile environments, multiple interfaces and
        addresses (i.e., CoAs and HoAs) are available. This case, two major
        issues can be considered. One is how to select or acquire the most
        appropriate interface(s) and/or address(es) from end-to-end QoS point
        of view. The other is, when multiple paths are simultaneously used for
        load- balancing purpose, how to differentiate and manage two types of
        CRNs, i.e., CRN between two on-going Paths (LB-CRN: Load Balancing
        CRN) and CRN between the old and new paths caused by MN's handover
        (HO-CRN: Handover CRN). This section introduces possible approaches
        for these issues.
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1.1"></a><h3>6.1.1.&nbsp;
Selecting the best interface(s)/CoA(s)</h3>

<p>In MIPv6 route optimization case, if multiple CoAs registration
          is provided <a class='info' href='#10'>[10]<span> (</span><span class='info'>Wakikawa, R., &ldquo;Multiple Care-of-Address Registration,&rdquo; October&nbsp;2009.</span><span>)</span></a>, the contents of
          QUERYs sent by candidate CoAs can be used to select the best
          interface(s)/CoA(s).
</p>
<p>Assume that an MN is a data sender and has multiple interfaces.
          Now the MN moves to a new location and acquires CoA(s) for multiple
          interfaces. After the MN performs the BU/BA procedure, it sends
          QUERY messages toward the CN through the interface(s) associated
          with the CoA(s). On receiving the QUERY messages, the CN or Gateway,
          determines the best (primary) CoA(s) by checking 'QoS available'
          field in the QUERY messages. Then a RESERVE message is sent toward
          the MN to reserve resources along the path the primary CoA takes. If
          the reservation is not successful, the CN transmits another RESERVE
          message using the CoA with the next highest priority. The CRN may
          initiate a teardown (RESERVE with the TEAR flag set) message toward
          old access router (OAR) to release the reserved resources on the old
          path.
</p>
<p>In case of sender-initiated reservation, a similar approach is
          possible. That is, the QUERY and RESERVE messages are initiated by
          an MN, and the MN selects the Primary CoA based on the information
          delivered by the QUERY message.
</p><br /><hr class="insert" />

<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


         |--Handover--&gt;|
  MN    OAR    AR1    AR2    AR3     CRN     CRN     CRN     CN
                                 (OAR/AR1)(OAR/AR2)(OAR/AR3)
  |      |      |      |      |       |       |       |       |
  |---QUERY(1)-&gt;|--------------------&gt;|----------------------&gt;|
  |      |      |      |      |       |       |       |       |
  |---QUERY(2)--------&gt;|---------------------&gt;|--------------&gt;|
  |      |      |      |      |       |       |       |       |
  |---QUERY(3)---------------&gt;|----------------------&gt;|------&gt;|
  |      |      |      |      |       |       |       |       |
  |      |      |      |      |       |       |       | Primary CoA
  |      |      |      |      |       |       |       | Selection(4)
  |      |      |      |      |       |       |       |       |
  |      |      |      |      |       |       |&lt;--RESERVE(5)--|
  |      |      |      |&lt;------RESERVE(6)-----|     (MRI      |
  |      |      |      | (Actual reservation) |    Update)    |
  |&lt;----RESERVE(7)-----|      |       |       |       |       |
  |      |      |      |      |       |       |       |       |
  |      |&lt;-----------teardown(8)-------------|       |       |
  |      |      |      |      |       |       |       |       |
  |      |      |      |  Multimedia Traffic  |       |       |
  |&lt;=================-&gt;|&lt;===================-&gt;|&lt;=============&gt;|
  |      |      |      |      |       |       |       |       |


</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Receiver-initiated reservation in the multihomed environment&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1.2"></a><h3>6.1.2.&nbsp;
Differentiation of two types of CRNs</h3>

<p>When multiple interfaces of the MN are simultaneously used for
          load-balancing purpose, a possible approach for distinguishing
          LB-CRN and HO-CRN will introduce an identifier to determine the
          relationship between interfaces and paths.
</p>
<p>An MN uses interface 1 and interface 2 for the same session,
          where the paths (say path 1 and path 2) have the same SID but
          different FIDs as shown in (a) of <a class='info' href='#fig.pathtype'>Figure&nbsp;9<span> (</span><span class='info'>The topology for NSIS signaling in multihomed mobile environments</span><span>)</span></a>. Now one of the interfaces of MN
          performs a handover and obtains a new CoA, the MN will try to
          establish a new path (say Path 3) with the new FID, as shown in (b)
          of <a class='info' href='#fig.pathtype'>Figure&nbsp;9<span> (</span><span class='info'>The topology for NSIS signaling in multihomed mobile environments</span><span>)</span></a>. In this case the CRN between
          path 2 and path 3 cannot determine if it is LB-CRN or HO-CRN since
          for both cases, SID is the same but FIDs are different. Hence the
          CRN will not know if State Update is required. One possible solution
          to solve this issue will introduce path classification identifier
          which shows the relationship between interfaces and paths. For
          example, signaling messages and QNEs belong to paths from interface
          1 and interface 2 carry the identifier '00' and '02', respectively.
          By having this identifier, the CRN between path 2 and path 3 will be
          able to determine whether it is LB-CRN or HO-CRN. For example, if
          path 3 carries '00', the CRN is LB-CRN, and if '01', the CRN is
          HO-CRN.
</p><br /><hr class="insert" />
<a name="fig.pathtype"></a>

<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


   +--+      Path 1          +---+             +--+
   |  |IF1 &lt;-----------------|LB | common path |  |
   |MN|                      |CRN|-------------|CN|
   |  |      Path 2          |   |             |  |
   |  |IF2 &lt;-----------------|   |             |  |
   |  |                      +---+             +--+
   |  |
   +--+
   (a) NSIS Path classification in multihomed environments

   +--+      Path 1          +---+             +--+
   |  |IF1 &lt;-----------------|?? | common path |  |
   |MN|                      |CRN|-------------|CN|
   |  |     Path 2          -|   |             |  |
   |  |IF2 &lt;---  +------+  | |   |             |  |
   |  |        \_|??-CRN|--v +---+             +--+
   |  |        / +------+
   +--+IF? &lt;---
            Path 3

   (b) NSIS Path classification after handover


</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;9: The topology for NSIS signaling in multihomed mobile environments&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2"></a><h3>6.2.&nbsp;
Interworking with other mobility protocols</h3>

<p>Unlike the generic route changes, in mobility scenarios, the
        end-to-end signaling problem by the State Update gives rise to the
        degradation of network performance, e.g., increased signaling
        overhead, service blackout, and so on. To reduce signaling latency in
        the Mobile IP-based scenarios, the NSIS protocol suite may need to
        interwork with localized mobility management (LMM). If the GIST/NSLP
        (QoS-NSLP or NAT/FW-NSLP) protocols interact with Hierarchical Mobile
        IPv6 and the CRN is discovered between an MN and an MAP, the State
        Update can be localized by address mapping. However, how the State
        Update is performed with scoped signaling messages within the access
        network under the MAP is for future study.
</p>
<p>In the inter-domain handover, a possible way to mitigate the
        latency penalty is to use the multi-homed MN. It is also possible to
        allow the NSIS protocols to interact with mobility protocols such as
        Seamoby protocols (e.g., CARD [RFC4066] and CXTP [RFC4067]) and FMIP.
        Another scenario is to use peering agreement which allows aggregation
        authorization to be performed for aggregate reservation on an inter-
        domain link without authorizing each individual session. How these
        approaches can be used in NSIS signaling is for further study.
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.3"></a><h3>6.3.&nbsp;
Intermediate node becomes a dead peer</h3>

<p>The failure of a (potential) NSIS CRN may result in incomplete
        state re-establishment on the new path and incomplete teardown on the
        old path after handover. In this case, a new CRN should be
        re-discovered immediately by the CRN discovery procedure.
</p>
<p>The failure of an AR may make the interactions with Seamoby
        protocols (such as CARD and CXTP) impossible. In this case, the
        neighboring peer closest to the dead AR may need to interact with such
        protocols. A more detailed analysis of interactions with Seamoby
        protocols is left for future work.
</p>
<p>In Mobile IP-based scenarios, the failures of NSIS functions at an
        FA and an HA may result in incomplete interaction with IP-tunneling.
        In this case, recovery for NSIS functions needs to be performed
        immediately. In addtion, a more detailed analysis of interactions with
        IP-tunneling is left for future work.
</p>
<a name="Security.Considerations"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Security Considerations</h3>

<p>This document does not introduce new security concerns. The security
      considerations pertaining to the standard NSIS protocol specifications
      [gist, qos-nslp, natfw-nslp] remain relevant. When deployed in service
      provider networks, it is mandatory to ensure that only authorized
      entities are permitted to initiate re-establishment and removal of NSIS
      states in mobile environments, including the use of NSIS proxies.
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Change History</h3>

<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.1"></a><h3>8.1.&nbsp;
Changes from -00 version</h3>

<p>The major change made to the initial (-00) version of the draft is
        to re-arrange the issues addressed in the draft in order to clearly
        identify general issues caused by mobility itself and NSIS protocols-
        specific issues. The generic route changes-related text in Section 4
        was moved into Appendix to make this draft more mobility-specific.
</p>
<p>Specifically, the following changes have been made: </p>
<ol class="text">
<li>Removed the terminologies, 'uplink' and 'downlink' in Section
            2.
</li>
<li>Removed the terminology, 'local repair' in Sections 2 and
            4.
</li>
<li>Re-arranged all problems in Section 3 by merging the
            'mobility-related issues with NSIS protocols' section and the
            'problem statement and general considerations' section.
</li>
<li>Removed the general considerations section in Section 3.
</li>
<li>Modified the problem statement section and moved it into the
            general problem section in Section 3.1.
</li>
<li>Added more problems including 'Identification of the crossover
            node', 'Key exchanges', and 'AA-related Issues' to Section 3.1
</li>
<li>Added the 'Multihoming-related issues' to Section 3.2.4
</li>
<li>Removed the issues on 'how to immediately delete the state on
            the old path' in Section 3.2.
</li>
<li>Moved the generic route changes-related text in Section 4.1
            into Appendix.
</li>
<li>Removed the figure describing "NSIS signaling topology for
            downstream signaling flow after the route changes in the middle of
            the network" in Figure 2.
</li>
<li>Added 'NSLP_IDs' to each node in Figure 1.
</li>
<li>Removed the 'use cases of identifiers' section, and instead,
            added the 'support for ping-pong type handover' section to
            Section5.
</li>
<li>Added this change history.
</li>
</ol>

<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.2"></a><h3>8.2.&nbsp;
Changes from -01 version</h3>

<p>Version -02 includes mainly a number of clarifications on the
        issues raised in this draft and more details in some specific areas.
        Specifically, the following changes have been made: </p>
<ol class="text">
<li>Defined the terminologies, 'route change' and 'mobility' in
            Section 2.
</li>
<li>Clarified the terminology, 'Crossover node (CRN)' in Section
            2.
</li>
<li>Removed the terminology, 'mobility CRN' in Section 2.
</li>
<li>The issue, 'Priority of signaling messages' in Section 3.2.2
            was closed, and thus removed it.
</li>
<li>Clarified the issue, 'CRN discovery and State Update on the
            IP-tunneling path in Section 3.2.4.
</li>
<li>Added the pros and cons of two mechanisms on CRN discovery
            dependent on NSIS layers to Section 4.2.1.
</li>
<li>Clarified the identifier, NSLP_Br_ID for CRN discovery in
            Section 4.2.2.
</li>
<li>Added the scenario on interaction between NSIS and Mobile IP to
            Section 5.1.
</li>
<li>Clarified interaction issues with IP-tunneling according to
            reservation initiation type (receiver-initiated or
            sender-initiated) in Mobile IPv4-based scenarios and added those
            to Section 5.1.1.1.
</li>
<li>1Clarified interaction issues between NSIS protocols and
            IP-tunneling in Mobile IPv6 and added those to Section
            5.1.1.2.
</li>
<li>Clarified the multihoming-related issues in Section 5.2.
</li>
<li>Added the issues on usage of 'hint' information to trigger NSIS
            signaling in mobility to Section 5.5.
</li>
<li>Identified the dead peer-related issues in Mobile IP-based
            scenario in Section 5.5.
</li>
</ol>

<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.3"></a><h3>8.3.&nbsp;
Changes from -02 version</h3>

<p>In version -03, tunneling-related and multihoming-related scenarios
        were newly added in Sections 5.1.3 and 5.2, respectively. Also, the
        terminology, 'Path Update' is changed into 'State Update' in Section
        3.2.4.
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.4"></a><h3>8.4.&nbsp;
Changes from -03 version</h3>

<p>Version -04 includes mainly a number of clarifications on the
        issues raised in this draft and more details in some specific areas.
        Specifically, the following changes have been made: </p>
<ol class="text">
<li>The issue, 'Peering agreement issue' in Section 3.2.2 was
            closed, and thus removed it.
</li>
<li>Clarified the issue, 'Interfaces between Mobile IP and NSIS
            protocols' in Section 3.2.1.
</li>
<li>Clarified the issue, 'Authorization-related issues with
            teardown' in Section 3.2.2.
</li>
<li>Clarified the issue, 'Dead peer discovery' in Section
            3.2.2.
</li>
<li>Clarified the issue, 'Invalid NR problem' in Section 3.2.2.
</li>
<li>Clarified the issue, 'CRN discovery and State Update on the
            IP-tunneling path' in Section 3.2.4.
</li>
<li>Clarified the issue, 'Multihoming-related issues' in Section
            3.2.4.
</li>
<li>Changed Figure 1 (a) into (b) in Section 4.1.
</li>
<li>Changed Figure 1 (b) into (a) in Section 4.1.
</li>
<li>Clarified the identifier, NSLP_Br_ID for CRN discovery in
            Section 4.2.2.
</li>
<li>Clarified the identifier, Mobility identifier for CRN discovery
            in Section 4.2.2.
</li>
<li>Added the text on 'CRN_DISCOVERY flag bit' in Section 4.2.3,
            and clarified the role of 'CD flag bit' in Section 4.3.1.
</li>
<li>Clarified the issues on 'interaction with Mobile IP tunneling'
            and added those to Section 5.1.4.
</li>
<li>Clarified the issues on 'load balancing in multihomed mobile
            environments' and added those to Section 5.2.5.
</li>
<li>Changed Problems of the heading name in Section 3.2 into
            Challenges.
</li>
</ol>

<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.5"></a><h3>8.5.&nbsp;
Changes from -04 version</h3>

<p>Version -05 includes mainly a number of clarifications on the
        issues raised in this draft and more details in some specific areas.
        Specifically, the following changes have been made: </p>
<ol class="text">
<li>'Explicit routes' in Section 3.1 (3) was removed.
</li>
<li>Clarified the problem, 'Double reservation problem' in Section
            3.1 (7).
</li>
<li>Clarified the issue, 'CRN discovery-related issues' in Section
            3.2.4 (1).
</li>
<li>Clarified the issue, 'Issues on API between NTLP and NSLP' in
            Section 3.2.4 (3).
</li>
<li>Clarified the issue, 'approaches for CRN discovery' in Section
            4.2.1.
</li>
<li>Changed NSLP_Br_ID (of identifiers for CRN discovery) into
            State_Br_ID in Section 4.2.2 for clarification.
</li>
<li>Clarified the issue, 'double reservation problem on the common
            path' in Section 4.3.1.
</li>
<li>Clarified the issue, 'Interfaces between Mobile IP and NSIS' in
            Section 5.1.1.
</li>
<li>Removed the sencond paragraph on the issue, 'Explicit routes'
            in Section 4.1.
</li>
<li>Clarified the issue, 'refresh timer value in mobility
            scenarios' in Section 5.3.
</li>
<li>Removed the third paragraph on the issue, 'usage of Reservation
            Sequence Number (RSN) to support ping-pong type hanover' in
            Section 5.4.
</li>
<li>Clarified the issues on 'peer failure' in Section 5.5.
</li>
<li>Removed Figure 3 'Sender- vs. Receiver-initiated reservation'
            in Section 4.3.1.
</li>
</ol>

<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.6"></a><h3>8.6.&nbsp;
Changes from -05 version</h3>

<p>In Version -06, contents of this draft were re-selected and
        re-structured: </p>
<ol class="text">
<li>Section 4 and 5 of -05 were divided into two parts: 
<ol class="text">
<li>'Main' part, which is focusing on examples and describing
                how mobility is handled by the NSIS protocols. Topics here
                will be route change handling and NSIS interwork with MIP
                v4/v6 (<a class='info' href='#Basic.OP'>Section&nbsp;4<span> (</span><span class='info'>Basic Operations for Mobility Support</span><span>)</span></a> and <a class='info' href='#Int.with.mip4.mip6'>Section&nbsp;5<span> (</span><span class='info'>Interaction with Mobile IPv4/v6</span><span>)</span></a> in -06)
</li>
<li>'Further Study' part, which introduces summary of potential
                issues and possible approaches for other topics. These topics
                are out-of-scope for discussing details (<a class='info' href='#Further.Studies'>Section&nbsp;6<span> (</span><span class='info'>Further Studies</span><span>)</span></a> in -06)
</li>
</ol>
</li>
<li>Specific parameters and terms were removed from 'Main' part
</li>
<li>Showing similar detailed operations were avoided in
            'Interaction with MIP tunneling section (<a class='info' href='#Int.with.MIPtunnel'>Section&nbsp;5.3<span> (</span><span class='info'>Interaction with Mobile IP tunneling</span><span>)</span></a>)'
</li>
<li>In Further Study section <a class='info' href='#Further.Studies'>Section&nbsp;6<span> (</span><span class='info'>Further Studies</span><span>)</span></a>: 
<ol class="text">
<li>Detailed operations were removed
</li>
<li>Ping-pong issue was removed
</li>
</ol>
</li>
<li>Problem Statement (<a class='info' href='#Problem.Statement'>Section&nbsp;3<span> (</span><span class='info'>Challenges with Mobility</span><span>)</span></a>)
            was cleaned up
</li>
</ol>

<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.7"></a><h3>8.7.&nbsp;
Changes from -06 version</h3>

<p>Changes in Version -07 are: </p>
<ol class="text">
<li>'Invalid NR problem' are moved from Further Study section
</li>
<li>Figure 7 (Receiver-Initiated QoS NSLP over Tunnel -Parallel
            Mode) are changed
</li>
<li>Terminologies 'NSLP CRN', 'NTLP CRN' 'NSIS CRN'
            'Divergent-convergent UCRN' and 'Divergent-convergent DCRN' are
            removed from Terminology section.
</li>
<li>'Open Issues' section is added
</li>
</ol>

<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.8"></a><h3>8.8.&nbsp;
Changes from -07 version</h3>

<p>Changes in Version -08 are: </p>
<ol class="text">
<li>Figure 1 was updated (NOTIFY message from CRN is added)
</li>
<li>Section 4.2.1 (CRN discovery) was updated to be synchronized
            with QoS-NSLP draft
</li>
<li>Title of Section 4.2.2 was changed from "State setup and
            update" to "Localized State Update"
</li>
<li>Section 4.2.2 (Localized State Update) was updated to be
            synchronized with QoS-NSLP draft
</li>
<li>Section 4.2.3 (State teardown) was deleted because the issues
            was already solved
</li>
<li>Title of Section 4.2.3 was changed to "State teardown
            consideration"
</li>
</ol>

<a name="anchor19"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.9"></a><h3>8.9.&nbsp;
Changes from -08 version</h3>

<p>Changes in Version -09 are: </p>
<ol class="text">
<li>Security Consideration Section (Section 7) was cleaned up.
</li>
<li>Security Consideration issue was removed from Open Issue
            section (Section 8).
</li>
<li>NAT traversal issues were removed from Open Issue section
            (Section 8).
</li>
</ol>

<a name="anchor20"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.10"></a><h3>8.10.&nbsp;
Changes from -09 version</h3>

<p>Changes in Version -10 are: </p>
<ol class="text">
<li>Introduction was updated accordingly.
</li>
<li>Definition of RFC2119 terms were removed from Section 2
</li>
<li>Definition of Upstream/Downstream State Update were cleaned
            up
</li>
<li>Title of Section 3 was changed from "Problem Statement" to
            "Challenges with Mobility"
</li>
<li>NSIS solutions are removed from Section 3
</li>
<li>Section 4 was cleaned up
</li>
<li>More detailed description was added to Section 5
</li>
</ol>

<a name="anchor21"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.11"></a><h3>8.11.&nbsp;
Changes from -10 version</h3>

<p>Change in Version -11 is: </p>
<ol class="text">
<li>Introduction part of Section 5 was updated.
</li>
</ol>

<a name="anchor22"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.12"></a><h3>8.12.&nbsp;
Changes from -11 version</h3>

<p>Change in Version -12 are: </p>
<ol class="text">
<li>Section 4.3 (NATFW section) was added.
</li>
<li>Open Issue section was closed.
</li>
</ol>

<a name="anchor23"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.13"></a><h3>8.13.&nbsp;
Changes from -12 version</h3>

<p>Changes in Version -13 are: </p>
<ol class="text">
<li>"Upstream signaling" was added to Section 3
</li>
<li>Three more cases were discussed in Section 4.2
</li>
<li>Definition of Upstream/Downstream State Update were cleaned
            up
</li>
<li>Figure 3 was removed because it was't really necessary for the discussion.
</li>
</ol>

<a name="anchor24"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.14"></a><h3>8.14.&nbsp;
Changes from -13 version</h3>

<p>Changes in Version -14 are: </p>
<ol class="text">
<li>Figure 3 was re-added with appropriate changes.
</li>
</ol>

<a name="anchor25"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Contributors</h3>

<p>Sung-Hyuck Lee was the first editor of the draft. Since version 06 of
      the draft, Takako Sanda has taken the editorship.
</p>
<p>Many individuals have contributed to this draft. Since it was not
      possible to list them all in the authors section, this section was
      created to have a sincere respect for other authors, Paulo Mendes,
      Robert Hancock, Roland Bless, Shivanajay Marwaha and Martin Stiemerling. 
      Separating authors into two groups was done without treating any one of 
      them better (or worse) than others.
</p>
<a name="anchor26"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
Acknowledgements</h3>

<p>The authors would like to thank Byoung-Joon Lee, Charles Q. Shen,
      Cornelia Kappler, Henning Schulzrinne, and Jongho Bang for significant
      contributions in four earlier drafts and the previous draft. The authors
      would also like to thank Robert Hancock, Andrew Mcdonald, John Loughney,
      Rudiger Geib, Cheng Hong, Elena Scialpi, Pratic Bose, Martin Stiemerling
      and Luis Cordeiro for their useful comments and suggestions.
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11"></a><h3>11.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>11.1.&nbsp;Normative Reference</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="1">[1]</a></td>
<td class="author-text">Schulzrinne, H., &ldquo;GIST: General Internet Signaling Transport,&rdquo; Internet Draft&nbsp;draft-ietf-nsis-ntlp-20, Work in progress&nbsp;, June&nbsp;2009.</td></tr>
<tr><td class="author-text" valign="top"><a name="2">[2]</a></td>
<td class="author-text">Manner, J., &ldquo;NSLP for Quality-of-Service Signaling,&rdquo; Internet Draft&nbsp;draft-ietf-nsis-qos-nslp-17, Work in progress&nbsp;, October&nbsp;2009.</td></tr>
<tr><td class="author-text" valign="top"><a name="3">[3]</a></td>
<td class="author-text">Stiemerling, M., &ldquo;NAT/Firewall NSIS Signaling Layer Protocol (NSLP),&rdquo; Internet Draft&nbsp;draft-ietf-nsis-nslp-natfw-20, Work in progress&nbsp;, November&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="4">[4]</a></td>
<td class="author-text">Shen, C., &ldquo;NSIS Operation Over IP Tunnels,&rdquo; Internet Draft&nbsp;draft-ietf-nsis-tunnel-07, Work in Progress&nbsp;, December&nbsp;2009.</td></tr>
<tr><td class="author-text" valign="top"><a name="5">[5]</a></td>
<td class="author-text">Braden, B., &ldquo;Resource ReSerVation Protocol (RSVP) -- Version 1 Functional
          Specification,&rdquo; RFC2205&nbsp;, September&nbsp;1997.</td></tr>
<tr><td class="author-text" valign="top"><a name="6">[6]</a></td>
<td class="author-text">Perkins, C., &ldquo;IP Mobility Support for IPv4,&rdquo; RFC3344&nbsp;, August&nbsp;2002.</td></tr>
<tr><td class="author-text" valign="top"><a name="7">[7]</a></td>
<td class="author-text">Johnson, D., &ldquo;Mobility Support in IPv6,&rdquo; RFC3775&nbsp;, June&nbsp;2004.</td></tr>
<tr><td class="author-text" valign="top"><a name="8">[8]</a></td>
<td class="author-text">Brunner, (Ed), M., &ldquo;Requirements for Signaling Protocols,&rdquo; RFC3726&nbsp;, June&nbsp;2004.</td></tr>
<tr><td class="author-text" valign="top"><a name="9">[9]</a></td>
<td class="author-text">Manner, J., &ldquo;Mobility Related Terminology,&rdquo; RFC3753&nbsp;, June&nbsp;2004.</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>11.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="10">[10]</a></td>
<td class="author-text">Wakikawa, R., &ldquo;Multiple Care-of-Address Registration,&rdquo; RFC5648&nbsp;, October&nbsp;2009.</td></tr>
</table>

<a name="Appendix.A"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
</h3>

<p>The mobility occurs due to the change of the network attachment
      point, but the generic route changes is associated with load sharing,
      load balancing, or a link (or node) failure. These cause divergence (or
      convergence) between the old path along which state has already been
      installed and the new path along which data forwarding will actually
      happen.
</p>
<p>The route changes brings on the change of signaling topology and it
      results in difference according to the types of route changes (e.g., the
      route changes or mobility). The route changes generally forms two common
      paths, an old path, and a new path, where the old path and the new path
      begin to diverge from one common path and afterward to converge to
      another common path for each direction of signaling flows (e.g.,
      downstream or upstream flows) as shown in <a class='info' href='#fig.DCRN.UCRN'>Figure&nbsp;10<span> (</span><span class='info'>The topology for NSIS signaling in case of the route changes</span><span>)</span></a>
</p><br /><hr class="insert" />
<a name="fig.DCRN.UCRN"></a>

<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

                          Old path
                       +---+      +---+
                 ^ ---&gt;|NE | ...  |NE | ------V
     common path ^     +---+      +---+       V   common path
    +--+       +----+                      +----+          +--+
    |S |-----&gt; |DCRN|                      |DCRN| -------&gt; |R |
    |  |       |    |                      |    |          |  |
    +--+       +----+       New path       +----+          +--+
                 V     +---+      +---+       ^
                 V ---&gt;|NE | ...  |NAR| ------^
                       +---+      +---+

   =======(downstream signaling followed by data flows) ======&gt;

   (a) The topology for downstream NSIS signaling flow after
      route changes

                            Old path
                       +---+      +---+
                 v &lt;---|NE | ...  |NE | ----- ^
     common path v     +---+      +---+       ^  common path
    +--+       +----+                      +----+          +--+
    |S |&lt;----- |UCRN|                      |UCRN| &lt;------- |R |
    |  |       |    |                      |    |          |  |
    +--+       +----+       New path       +----+          +--+
                 ^     +---+      +---+       v
                 ^ &lt;---|NE | ...  |NAR| ----- v
                       +---+      +---+

    &lt;=====(upstream signaling followed by data flows) ======

   (b) The topology for upstream NSIS signaling flow after
      route changes

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;10: The topology for NSIS signaling in case of the route changes&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Takako Sanda</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Panasonic Corporation</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">600 Saedo-cho, Tsuzuki-ku, Yokohama</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Kanagawa  224-8539</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Japan</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+81 45 938 3056</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:sanda.takako@jp.panasonic.com">sanda.takako@jp.panasonic.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Xiaoming Fu</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Computer Networks Group,
      University of Goettingen</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Lotzestr. 16-18</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Goettingen  37083</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Germany</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:fu@cs.uni-goettingen.de">fu@cs.uni-goettingen.de</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Seong-Ho Jeong</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Hankuk University of FS</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">89 Wangsan Mohyun</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Yongin-si, Gyeonggi-do  449-791</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Korea</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+82 31 330 4642</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:shjeong@hufs.ac.kr">shjeong@hufs.ac.kr</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Jukka Manner</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Helsinki University of Technology</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">P.O. Box 3000</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Espoo  FIN-02015</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+358 9 451 2481</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:jukka.manner@tkk.fi">jukka.manner@tkk.fi</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Hannes Tschofenig</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia Siemens
      Networks</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Linnoitustie 6</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Espoo</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">02600</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+358 50 4871445</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:Hannes.Tschofenig@nsn.com">Hannes.Tschofenig@nsn.com</a></td></tr>
</table>
</body></html>
