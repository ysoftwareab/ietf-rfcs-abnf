





INTERNET-DRAFT                                                  X. Zhang
                                                          J. Castellanos
                                                             A. Campbell
                                                     Columbia University
                                                               K. Sawada
                                                  Fujitsu Limited, Japan
                                                                M. Barry
                                                          Broadcom, Eire
                                                               July 2000


             P-MIP: Minimal Paging Extensions for Mobile IP
                        draft-zhang-pmip-00.txt

Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet- Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
      http://www.ietf.org/ietf/1id-abstracts.txt

   The list of Internet-Draft Shadow Directories can be accessed at
      http://www.ietf.org/shadow.html.

Abstract

   As the number of Mobile IP users grow so will the signaling overhead
   on the core IP network in support of mobility management. In cellular
   networks registration and paging techniques are used to minimize the
   signaling overhead and optimize the mobility management performance.
   Currently, Mobile IP supports registration but not paging. We believe
   that Mobile IP support for paging is important to improve the
   scalability of Mobile IP networks. Recently, a number of micro-
   mobility protocols [8] have been proposed that have built-in paging
   functions. These micro-mobility protocols are independent of the base
   Mobile IP protocol and interwork with Mobile IP [2] through mobile
   gateways. We take a different approach and propose a minimal set of
   paging extensions to the base Mobile IP called P-MIP. P-MIP is
   designed to reduce signaling load in the core Internet and power
   consumption of mobile nodes. In this draft, P-MIP, which assumes the
   use of foreign agents, is described and the construction of paging
   areas, movement detection, registration, paging and data handling are
   presented.



Zhang, Sawada, Castellanos, Campbell, Barry                     [Page 1]





INTERNET-DRAFT                   P-MIP                         July 2000


Table of Contents

 1. Introduction                                                       2
     1.1 Goals. . . . . . . . . . . . . . . . . . . . . . . . . . .    3
     1.2 Assumption . . . . . . . . . . . . . . . . . . . . . . . .    3
     1.3 Terminology. . . . . . . . . . . . . . . . . . . . . . . .    3
     1.4 Protocol Overview. . . . . . . . . . . . . . . . . . . . .    4
     1.5 Message Format and Protocol Extensibility. . . . . . . . .    5
          1.5.1 New ICMP Router Discovery Message Extension . . . .    5
          1.5.2 New Control Messages. . . . . . . . . . . . . . . .    5
          1.5.3 New Extension in Mobile IP Control Message. . . . .    6
          1.5.4 Modification to Registration Request Message in MIP    7
 2. Protocol Description                                               7
     2.1 Paging Areas . . . . . . . . . . . . . . . . . . . . . . .    7
     2.2 Movement Detection . . . . . . . . . . . . . . . . . . . .   10
           2.2.1 Movement Detection in within a Paging Area . . . .   10
           2.2.2 Movemnet between paging Areas. . . . . . . . . . .   10
     2.3 Registration . . . . . . . . . . . . . . . . . . . . . . .   11
     2.4 Paging . . . . . . . . . . . . . . . . . . . . . . . . . .   12
     2.5 Data Handling. . . . . . . . . . . . . . . . . . . . . . .   13
          2.5.1 Incoming Data . . . . . . . . . . . . . . . . . . .   13
          2.5.2 Outgoing Data . . . . . . . . . . . . . . . . . . .   14
 3. Security Considerations . . . . . . . . . . . . . . . . . . . .   14
 4. References  . . . . . . . . . . . . . . . . . . . . . . . . . .   14
 Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . . .   15


1. Introduction

   We envision a wireless Internet with many hundreds of millions of
   wireless subscribers. As the number of mobile subscribers grows so
   does the need to provide efficient location tracking that limits the
   signaling load introduced in the core IP network. The vast majority
   of wireless IP subscribers will not be actively communicating most of
   the time. Rather, mobile nodes will be in an idle state but passively
   connected to the network infrastructure. As a result, it will be
   sufficient for the wireless Internet only to know the approximate
   location of its population of idle users. The exact location of idle
   mobile nodes only becomes important when data needs to be forwarded
   to them in which case the network protocols need to be able to
   efficiently search and find these users in a scalable and timely
   manner. This process is called paging. While paging minimizes the
   need for mobiles to register their exact location it introduces
   paging overhead in terms of new signaling and delays. It is therefore
   important to balance paging and registration in order to optimize
   system performance. In this draft we provide an overview of P-MIP and
   discuss its implementation. For more details, see [1].










Zhang, Sawada, Castellanos, Campbell, Barry                     [Page 2]





INTERNET-DRAFT                   P-MIP                         July 2000


1.1 Goals

   Reducing the signaling load in the core IP network and the power
   consumption of mobile nodes through the introduction a minimal set of
   paging extensions to the base Mobile IP protocol [2].

1.2 Assumption

   Foreign agents are present on foreign networks and mobile nodes
   register through foreign agents.

1.3 Terminology

   Active Mode
      A mobile node is in active mode if it has recently sent or
      received data. A mobile node is considered to be active for an
      active time period starting from the instance the node sends or
      receives data.

   Active Mobile Node
      The mobile node in active mode.

   Active Time Period
      The number of seconds a mobile node is considered as active. It is
      implementation dependent.

   Active Timer
      The timer used to record the time when a mobile node is in active
      mode. Each time the mobile node sends or receives data the timer
      is reset. When the timer expires the mobile node enters idle
      state.

   Care of Address (CoA)
      As defined in [2].

   Current Foreign Agent
      The foreign agent of the network which a mobile node is currently
      visiting.

   Foreign Agent
      As defined in [2].

   Foreign Network
      As defined in [2].

   Home Address
      As defined in [2].

   Home Agent
      As defined in [2].

   Home Network
      As defined in [2].




Zhang, Sawada, Castellanos, Campbell, Barry                     [Page 3]





INTERNET-DRAFT                   P-MIP                         July 2000


   Idle Mode
      A mobile node is in idle mode if it has not recently sent or
      received data.

   Idle Mobile Node
      A mobile node in idle mode. Whenever an idle node sends or
      receives data, its mode is changed to active and its active timer
      started. In this case an idle mobile node becomes an active mobile
      node.

   Mobile Node State
      Mobile node state consists of a per-node tuple (operational mode,
      active timer). Operational mode can be active mode or idle mode.
      Mobile node state is kept in both mobile nodes and registered
      foreign agents.

   Mobility Binding
      As defined in [2].

   Paging Area (PA)
      The area on which a registered foreign agent conducts paging. A PA
      consists of two or more networks. When an idle mobile node moves
      within a paging area, it does not register.

   Paging Request Message
      A message sent by a registered foreign agent in order to locate an
      idle mobile node.

   Paging Reply Message
      A message sent by a paged mobile node to the registered foreign
      agent to inform it of the paged mobile node's current location.

   Registered Foreign Agent
      The foreign agent of the network through which a mobile node has
      registered just before the mobile node receives a Paging Request.
      That is, the foreign agent through which a mobile node made its
      latest registeration with its home agent. Thus, the mobile node's
      care-of-address in its home agent's mobility binding is provided
      by the registered foreign agent. Note, a mobile node and its
      registered foreign agent may be in different networks.

   Security Parameter Index (SPI)
      As defined in [2].


1.4 Protocol Overview

   An active mobile node behaves in exactly the same manner as in Mobile
   IP [2]. When it changes its point of attachment, it registers. For an
   idle mobile, when it moves within a paging area, it does not
   register. However, when an idle mobile node moves to a different
   paging area, it registers.

   When there are packets destined to a mobile node, its home agent



Zhang, Sawada, Castellanos, Campbell, Barry                     [Page 4]





INTERNET-DRAFT                   P-MIP                         July 2000


   forwards data to its registered foreign agent.  The registered
   foreign agent first checks if it has the mobile node's information on
   record. If it has a record, then it checks if the mobile node
   supports paging or not. If the mobile node supports paging, then the
   registered foreign agent checks the mobile node's state. If the
   mobile node is in active mode, the registered foreign agent
   decapsulates packets and sends them to the mobile node, just as in
   the case of Mobile IP [2]. If the mobile node is in idle mode, the
   registered foreign agent sends a Paging Request message to other
   foreign agents in the same paging area as well as to its own network.

   When the mobile node receives a Paging Request message, it registers
   through the current foreign agent to its home agent. After receiving
   a Registration Reply message, the mobile node sends a Paging Reply
   message back to its registered foreign agent through its current
   foreign agent to inform the registerd foreign agent of its current
   location.

   When the registered foreign agent receives a Paging Reply message, it
   forwards buffered packets to the mobile node through its current
   foreign agent.

1.5 Message Format and Protocol Extensibility

1.5.1 New ICMP Router Discovery Message Extension

   Paging area ID (PAI) extension:

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |     Type      |    Length     |        PAI                    |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   This PAI extension  is used in non-overlapping paging area
   construction (see Section 2.1). It should be added in agent
   advertisement message and periocally broadcast on the network.

1.5.2 The New Control Messages

   Paging Request:

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |     Type      |  length       |          reserved             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |    the home address of paged mobile node 1                    |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |    the home address of paged mobile node 2                    |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                              ...                              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | Extensions ...



Zhang, Sawada, Castellanos, Campbell, Barry                     [Page 5]





INTERNET-DRAFT                   P-MIP                         July 2000


      +-+-+-+-+-+-+-+-+-+

      length = 2 + 4 * N (bytes), where N is the number of mobile nodes
   paged. length does not cover the type, length and extensions fields.

   Paging response:

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |     Type      |  length       |         reserved              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |    the home address of paged mobile node 1                    |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |    the care-of address of paged mobile node 1                 |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | Extensions...
      +-+-+-+-+-+-+-+-

      length = 2 + 8 * N (bytes), where N is the number of responding
   mobile nodes. length does not cover the type, length, and extensions
   fields.

1.5.3 New Extension in Mobile IP Control Message

   Foreign-Foreign Authentication Extension:

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |     Type      |      length   |      SPI...
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
         ... SPI (cont.)              |  Authenticator ...
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


   Paging Area ID Extension:

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |     Type      |  length       |         reserved              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |    IP address of FA1                                          |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |    IP address of FA2                                          |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |    IP address of FA3                                          |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |
      +-+-+-+-+-+-+-+-

   Paging Area ID extension is used for overlapping paging area
   construction. This extension represents a list of foreign agent IP



Zhang, Sawada, Castellanos, Campbell, Barry                     [Page 6]





INTERNET-DRAFT                   P-MIP                         July 2000


   addresses in the same paging area. It should be inserted in the
   Registration Reply message.

1.5.4 Modification to Registration Request Message in Mobile IP

                           the modified bit
                                   |
       0                   1       V           2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |     Type      |S|B|D|M|G|V|P|r|          Lifetime             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                          Home Address                         |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                           Home Agent                          |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                        Care-of Address                        |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                                                               |
      +                         Identification                        +
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | Extensions ...
      +-+-+-+-+-+-+-+-

   Change one of the reserved bits in the Registration Request message
   used in Mobile IP to the P bit which indicates if the mobile node
   supports the paging function or not. A P bit of '1' means that the
   mobile node supports paging and a P bit of '0' means that the mobile
   node does not support paging.

2. Protocol Description

2.1 Paging Areas

   A paging area consists of two or more networks and has a unique
   paging area ID (PAI). Paging areas can be configured based on a
   number of criteria (e.g., node mobility, traffic patterns, mobile
   density, etc.) so that most mobile nodes move within the same paging
   area. Paging areas can be configured manually by administrators
   setting parameters at each foreign agent or more automatically by
   having foreign agents interact with paging servers. The benefit of
   paging servers is that the administrator only needs to configure the
   server. In this case, each foreign agent acquires its paging area
   information directly orom the server. Foreign agents and mobile nodes
   are aware of their paging area based on the PAI.

   There are two types of paging area construction in P-MIP called non-
   overlapping and overlapping paging areas.  In the case of non-
   overlapping paging areas, a network can only be associated with one
   paging area, as shown Figure 1.






Zhang, Sawada, Castellanos, Campbell, Barry                     [Page 7]





INTERNET-DRAFT                   P-MIP                         July 2000


                             Internet

                  |         |         |         |
            + --- | ------- | --+ +-- | ------- | ---+
            |     |         |   | |   |         |    |
            |  +--+--+   +--+--+| |+--+--+   +--+--+ |
            |  | FA1 |   | FA2 || || FA3 |   | FA4 | |
            |  +-----+   +-----+| |+-----+   +-----+ |
            |                   | |                  |
            +-------- PA1 ------+ +------ PA2 -------+

           Figure 1: Non-overlapping Pagin Areas


   In the non-overlapping scheme, each paging area has a unique paging
   area ID. Paging area IDs can be reused in the same sense as spatial
   reuse, with adjacent paging areas having different IDs. Paging area
   ID assignment could follow the same lines as IP addresses, with
   authorized organizations managing their allocation and assignment.

   A paging table is maintained by each foreign agent and can be
   manually set or configured by a paging server or an administrator. In
   P-MIP, the agent advertisement message is extended to carry the
   paging area ID, as shown in the Section 1.5. The agent advertisement
   message must be broadcast periodically so that the paging area ID can
   be periodically distributed. Paging tables for the non-overlapping
   scheme have the following format:

          -------------------------
           PAI |  xxxx xxxx
          -----+-------------------
           FA1 |  FA1's IP address
           FA2 |  FA2's IP address
           FA3 |  FA3's IP address
           .   |  .
           .   |  .
           .   |  .

   In the case of non-overlapping paging only the PAI value (0000-FFFFH)
   is transmitted in agent advertisement messages and not the list of FA
   IP addresses.

   In the case of overlapping paging areas, the paging area ID is made
   up of the entire list of foreign agent IP addresses in a paging area.
   This is different to the PAI for non-overlapping paging area where
   PAI is a two-byte value. The paging area ID in the overlapping scheme
   does not need to be broadcast periodically as is the case in non-
   overlapping paging IDs. Rather, the paging area ID is sent to mobile
   nodes using an extended registration reply message, as shown in
   Section 1.5. Each foreign agent maintains a paging table which is
   also the paging area ID in the case of the overlapping scheme. A
   paging table in the overlapping scheme can be manually configured and
   has the following format:




Zhang, Sawada, Castellanos, Campbell, Barry                     [Page 8]





INTERNET-DRAFT                   P-MIP                         July 2000


          -------------------------
           FA1 |  FA1's IP address
           FA2 |  FA2's IP address
           FA3 |  FA3's IP address
           .   |  .
           .   |  .
           .   |  .

   Each paging scheme has a number of advantages and disadvantages. In
   the case of non-overlapping paging areas, a paging ID (i.e. two-
   octets value) is much shorter than overlapping paging IDs (i.e.
   multiple IP addresses). Therefore, the bandwidth and power consumed
   to manage paging IDs will be more efficient in the case of non-
   overlapping areas. However, this scheme can not take advantage of
   overlapping paging areas. As a result, there will be a
   disproportionate amount of registration traffic generated at paging
   area borders. With overlapping paging areas, the paging area ID could
   be rather large when there is a large number of foreign agents in a
   paging area. In this case, each mobile node must be aware of all the
   foreign agent IP addresses in the paging area. Mobile nodes need to
   be capable of maintaining this state information in order to detect
   if they have moved to a different paging area. Overlapping paging
   area information is not transmitted periodically so that the impact
   on radio resources and mobile node resources is limited.

   The maximum benefit of the overlapping scheme is achieved when each
   foreign agent is located at the center of its paging area. As shown
   in Figure 2, foreign agent FA2 is located at the center of paging
   area PA2, FA3 is located at the center of PA3, and so on. Whenever a
   mobile node registers, it will get a new paging area ID (i.e., the
   list of foreign agent IP addresses in the paging area). This allows
   the mobile node to position itself at the center of the new paging
   area when it has to register. In this case, registration initiated by
   crossing new paging area borders is reduced and it allows for an even
   distribution of registration traffic. This approach would further
   reduce the signaling associated with mobile nodes that move around
   paging area borders particularly in the case of non-overlapped paging
   areas.


                             Internet

                  |         |         |         |
                  |    +--- | ------- | ------- | ---+
            + --- | ---|--- | ------- | -- +    |    |
            |     |    |    |         |    |    |    |
            |  +--+--+ | +--+--+   +--+--+ | +--+--+ |
            |  | FA1 | | | FA2 |   | FA3 | | | FA4 | |
            |  +-----+ | +-----+   +-----+ | +-----+ |
            |          |                   |         |
            +----------|---PA2-------------+         |
                       +-------------PA3-------------+

           Figure 2: Overlapping Paging Areas



Zhang, Sawada, Castellanos, Campbell, Barry                     [Page 9]





INTERNET-DRAFT                   P-MIP                         July 2000


   Based on the paging area scheme selected, P-MIP operates differently
   such as in the case of movement detection.  In this draft, we
   highlight these operational differences by referring to the two
   paging schemes discussed above.

2.2 Movement Detection

2.2.1 Movement within a Paging Area

   The algorithms used to detect if a mobile node has moved to a
   different network are the same for P-MIP as Mobile IP [2]. Two
   algorithms are used for movement detection in Mobile IP.

   In the first approach, mobile nodes detect movement using agent
   advertisement messages and the advertisement lifetime. When a mobile
   node receives an agent advertisement the lifetime of the
   advertisement is included in the message. If a mobile node does not
   receive another advertisement before the advertisement lifetime
   expires then the mobile node assumes that it has moved to a different
   network. In the second approach, a mobile node compares the network
   prefix obtained from newly received agent advertisement message with
   the current CoA. If they are different, the mobile will assume it has
   moved to a different network.

   If a mobile node is in active mode when it detects it has moved then
   a handoff is initiated which invokes the registration procedure. In
   this case, the mobile node's location will be updated at both the
   foreign and home agents. In contrast, if a mobile nodes is in idle
   state and it detects it has moved to a new network within the same
   paging area then no registration is necessary. However, if an idle
   mobile node does not have a valid foreign agent on record then it
   should locate one for further movement detection and registration.

2.2.2 Movement between Paging Areas

   The algorithms used to detect movement between paging areas are
   different based on the paging area scheme.

   In the case of non-overlapping paging areas, a mobile node records
   the lifetime received in agent advertisements until the lifetime
   expires. If a mobile node fails to receive another advertisement from
   the same agent within the specified lifetime then the mobile node
   assumes that is has lost contact with the foreign agent. If the
   mobile node has previously received an agent advertisement from
   another foreign agent for which the lifetime field has not yet
   expired then the mobile node should check if the paging area ID from
   the new agent is the same as its current paging ID. If the IDs are
   the same then the mobile node will do nothing except keep tracking
   the foreign agents identified in the advertisements. If the paging
   IDs are different then idle mobile nodes should immediately register
   with the new foreign agent. If the mobile node is not in contact with
   any foreign agent then it should send out an agent solicitation
   message. Upon reception of an agent advertisement message, the mobile
   node should check if the new paging area ID is the same as the old



Zhang, Sawada, Castellanos, Campbell, Barry                    [Page 10]





INTERNET-DRAFT                   P-MIP                         July 2000


   one. It uses this test to determine whether it has moved to a
   different paging area.

   In the case of overlapping paging areas, a mobile node should record
   the lifetime received in agent advertisements until that lifetime
   expires. If a mobile node fails to receive another advertisement from
   the same agent within the specified lifetime then the mobile node
   assumes that it has lost contact with the agent. If the mobile node
   has previously received an agent advertisement from another foreign
   agent for which the lifetime field has not yet expired then the
   mobile node should check if the source IP address of the agent
   advertisement sent by the new foreign agent is in the current paging
   ID's foreign agent list. The current foreign agent list is obtained
   in the registration reply message. If the new foreign agent's IP
   address is not in the current foreign agent list then idle mobile
   node registers with the new foreign agent. If the mobile node is not
   in contact with a foreign agent then it should send out an agent
   solicitation message. Upon reception of a advertisement message, the
   mobile node should check if the new foreign agent's IP address is in
   the current foreign agent list or not. It uses this test to determine
   whether it has moved to a new paging area or not.

2.3 Registration

   Registration follows the same procedure as Mobile IP [2]. However,
   after receiving a registration reply message both the foreign agent
   and the mobile node update the mobile node state by setting the the
   operational mode to active state and starting the active timer. In
   the case of the overlapping paging areas scheme, the registration
   reply message includes the paging area ID. The mobile node records
   the paging area ID. The list of foreign agents in the paging area
   that represents the paging ID is inserted by the foreign agent in the
   registration reply message returned to the mobile node.

   An important performance difference between Mobile IP and P-MIP
   relates to the number of registration generated. P-MIP reduces
   signaling in comparison to the base Mobile IP protocol because idle
   mobile nodes do not register when moving between networks in the same
   paging area. For an evaluation Of P-MIP see [1].

   In Mobile IP, a mobile node registers when:

   o   a mobile node changes its point of attachment;
   o   a mobile node's registration lifetime is near expiration (we call this
       registration refresh); and
   o    a mobile node detects that its current foreign agent has rebooted.


   In P-MIP, a mobile node registers when:

   o   a mobile detects it has moved to a new paging area;
   o   a mobile node's registration lifetime is near expiration;
   o   a mobile nodes detects that its current foreign agent has rebooted;
   o   a mobile node is paged and is not on the same network as the paging



Zhang, Sawada, Castellanos, Campbell, Barry                    [Page 11]





INTERNET-DRAFT                   P-MIP                         July 2000


       foreign agent; and
   o   an idle mobile node is about to transmit data.

2.4 Paging

   When a foreign agent needs to locate an idle mobile node, it
   broadcasts a paging request message in its network, and at the same
   time, unicasts the message to all other foreign agents in its paging
   area. These foreign agents then broadcast the page within their own
   wireless networks. The paging request message lists the home
   addresses of all paged mobile nodes, as shown in the Section 1.5. P-
   MIP supports the optimization that a foreign agent may have a number
   of paging request to make at any one moment. In this case P-MIP can
   aggregate all mobile nodes paging requests into a single paging
   request message. This helps to minimize the paging overhead as the
   number of paged mobile nodes grow.

   When a foreign agent receives a paging request, it first conducts an
   authentication check if the foreign agents share a mobility security
   association. If authentication is passed, the foreign agent
   broadcasts the paging message on its own network. When a mobile node
   finds its home address in the paging request and the message is
   directly from its registered foreign agent then the mobile node is
   still located in the same network.  In this case, the mobile node
   sends a paging reply back to its registered foreign agent without
   registering, and then sets its operational mode to active and
   restarts its active timer. Otherwise, the mobile node will first
   start the registration procedure to make sure that the binding
   between its home address and new CoA from its current foreign agent
   is valid. Following this the mobile node responds to the paging
   request by sending a paging reply. The mobile node will insert its
   CoA in the paging reply. To avoid potential collisions between
   signaling messages (i.e., registrations and paging reply messages)
   from multiple paged mobiles in the same network, the transmission
   time for each registration and paging reply (to a foreign agent) is
   randomized.

   A foreign agent conducts authentication checks on paging reply
   messages received from paged mobile nodes if the foreign agent and
   the mobile nodes share a secure association. If a foreign agent is
   not the registered foreign agent, then it will forward the paging
   reply message to the registered foreign agent which initiated paging.
   It does this after appending the foreign agent to foreign agent
   authentication extension in the message. If the foreign agent is the
   mobile node's registered foreign agent, then it updates the mobile
   node state by setting the operational mode to active and starting the
   active timer.

   The registered foreign agent originating paging removes the mobile
   node ``record'' associated with all paged mobile nodes that are not
   located in its network after receiving a paging reply. The registered
   foreign agent takes this action because it assumes that these mobile
   nodes have initiated new registrations. The term ``record'' used in
   this draft refers to Mobile IP mobility management related



Zhang, Sawada, Castellanos, Campbell, Barry                    [Page 12]





INTERNET-DRAFT                   P-MIP                         July 2000


   information maintained by a home agent, foreign agent and mobile
   node. A record comprises transient state information that includes
   the mobile nodes home address, home agent address, CoA and various
   timer related information associated with control messages (e.g.,
   registration lifetime, etc.).

   The registered foreign agent will retransmit the paging request after
   a paging period if no response is received to an earlier paging
   request. The paging period is implementation dependent. If a mobile
   node's registration lifetime expires during paging then the
   registered foreign agent stops paging the mobile node. Each
   successive paging period should be at least twice the previous
   duration. After sending three successive paging request the foreign
   agent assumes that the mobile is not in the paging area and removes
   the record associated with this mobile.

   Once a paging reply is received by the registered foreign agent then
   any buffered data for the paged mobile node is forwarded toward the
   mobile node.

2.5 Data Handling

   When a mobile node is on a foreign network incoming and outgoing data
   to and from the mobile, respectively, are handled as follows.

2.5.1 Incoming Data

   When there are incoming packets destined to a mobile node, the mobile
   node's home agent forwards data to its CoA which belongs to the
   mobile node's registered foreign agent. When the registered foreign
   agent receives the data, it first determines whether it has a record
   for the mobile node. If it has a record, then it checks if the mobile
   node supports a paging function which is determined based on the P
   bit in Registration Request message (see Section 1.5). If P bit is
   set to '1', then it means the mobile node supports paging function.
   In contrast, if the P bit is set to '0', then it means the mobile
   node does not support a paging function or does not need a paging
   function (e.g., when the mobile node stays in a network for a long
   period of time). If the mobile node supports paging then the
   registered foreign agent checks the mobile node state.

   If the mobile node is in an active state then it is likely that the
   mobile node is located on the same network. In this case, the foreign
   agent decapsulates packets and forwards them to the mobile node. As
   discussed above, the originating foreign agent sends a paging request
   if the mobile node is in idle state, and at the same time, buffers
   the data for the mobile node. When the originating foreign agent
   receives a paging reply it forwards any buffered data to the mobile
   node. If the mobile node is not in the registered foreign agent's
   network any more then the registered foreign agent removes the mobile
   node's record.

   In the case that a mobile node does not respond to multiple page
   requests the registered foreign agent removes the mobile node's



Zhang, Sawada, Castellanos, Campbell, Barry                    [Page 13]





INTERNET-DRAFT                   P-MIP                         July 2000


   record and send an ICMP message ``node not found'' to the home agent.

2.5.2 Outgoing Data

   In active mode a mobile node can simply send data. If the mobile node
   is idle it first determines if it is still located on the same
   network where it is currently registered by checking agent
   advertisement lifetime or by sending an agent solicitation message.
   If the mobile node resides on the same network then it sets the
   operational mode to active and starts the active timer before
   transmitting data. If a mobile node is on a different network then it
   initiates a registration procedure to update its location record in
   its home agent and foreign agent. It is very likely that a mobile
   that is sending out going data will also receive data in return.
   Therefore, the home agent and foreign agent bindings need to be
   updated to facilitate the delivery of incoming data to the mobile
   node.

   In order for a foreign agent to track a mobile node's operational
   state, both outgoing and incoming data should be routed through the
   current foreign agent. Therefore, the foreign agent should act as a
   routing point for outgoing data as well as decapsulating and
   forwarding incoming data.

3. Security Considerations

   The authentication method used in P-MIP is the same as in Mobile IP
   [2]. If a mobility security associations exist among foreign agents
   in a paging area then the foreign agent to foreign agent
   authentication extension should be attached at the end of the paging
   request and reply messages. If a mobility security association exists
   between a foreign agent and a mobile node then the mobile node to
   foreign agent authentication extension should be attached at the end
   of the paging request and reply messages.

4. References

   [1]   X. Zhang, K. Sawada, J. Castellanos, A. Campbell, "P-MIP:
         Minimal Paging Extensions for Mobile IP," In submission to
         WMCSA 2000 - Third IEEE workshop on Mobile Computing Systems
         and Application, June, 2000.  http://comet.columbia.edu/pmip.

   [2]   C. Perkins, "IP Mobility Support," RFC 2002, IETF, Oct. 1996.

   [3]   A. Campbell, J. Gomez, C-Y. Wan, Z. Turanyi, and A. Valko,
         "Cellular IP," Internet Draft, IETF, 1999.

   [4]   R. Ramjee, T. La Porta, S. Thuel, K. Varadhan, and L.
         Salgarelli, "IP Micro-mobility support using HAWAII," Internet
         Draft, IETF, Dec. 1999.

   [5]   R. Ramjee, T. La Porta, and L. Li, "Paging support for IP
         mobility using HAWAII," Internet Draft, IETF, Mar. 2000.




Zhang, Sawada, Castellanos, Campbell, Barry                    [Page 14]





INTERNET-DRAFT                   P-MIP                         July 2000


   [6]   E. Gustafsson, A. Jonsson, and C. Perkins, "Mobile IP Regional
         Registration," Internet Draft, IETF, Mar. 2000

   [7]   C. Castelluccia, "Extending Mobile IP with Adaptive Individual
         Paging:  A Performance Analysis," INRIA, Nov. 1999.
         http://www.inrialpes.fr/planete/people/ccastel/Welcome.html#PUB

   [8]   A. Campbell, J. Gomez, S. Kim, C-Y Wan, Z. Turanyi, and A.
         Valko, "Comparison of Micro-mobility Protocols," Internet
         Draft, IETF, July 2000.

Authors' Addresses

   Xiaowei Zhang, Javier Castellanos, Andrew Campbell,
   Kentaro Sawada, Micheal Barry
   Department of Electrical Engineering, Columbia University
   Rm. 807 Schapiro Research Building
   530 W. 120th Street, New York, NY 10027
   Phone: (212) 939-7157
   email: {xzhang, sawaken, javierg, campbell}@comet.columbia.edU





































Zhang, Sawada, Castellanos, Campbell, Barry                    [Page 15]


