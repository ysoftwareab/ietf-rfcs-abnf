<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Mobile Multicast Sender Support in PMIPv6 Domains with Base Multicast Deployment</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Terminology">
<link href="#rfc.section.3" rel="Chapter" title="3 Overview">
<link href="#rfc.section.4" rel="Chapter" title="4 Source Mobility Details">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 Operations of the Mobile Node">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Operations of the Mobile Access Gateway">
<link href="#rfc.section.4.3" rel="Chapter" title="4.3 Operations of the Local Mobility Anchor">
<link href="#rfc.section.4.3.1" rel="Chapter" title="4.3.1 Local Mobility Anchors Operating PIM">
<link href="#rfc.section.4.4" rel="Chapter" title="4.4 IPv4 Support">
<link href="#rfc.section.4.5" rel="Chapter" title="4.5 Efficiency of the Distribution System">
<link href="#rfc.section.4.6" rel="Chapter" title="4.6 Multicast Availability throughout the Access Network">
<link href="#rfc.section.5" rel="Chapter" title="5 IANA Considerations">
<link href="#rfc.section.6" rel="Chapter" title="6 Security Considerations">
<link href="#rfc.section.7" rel="Chapter" title="7 Acknowledgements">
<link href="#rfc.references" rel="Chapter" title="8 References">
<link href="#rfc.references.1" rel="Chapter" title="8.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="8.2 Informative References">
<link href="#rfc.appendix.Appendix%20A" rel="Chapter" title="Appendix A Evaluation of Traffic Flows">
<link href="#rfc.appendix.Appendix%20B" rel="Chapter" title="Appendix B Change Log ">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="Multicast communication can be enabled in Proxy Mobile IPv6 domains by deploying MLD Proxy functions at Mobile Access Gateways, and multicast routing functions at Local Mobility Anchors. This document describes the support of mobile multicast senders in Proxy Mobile IPv6 domains that is provided by this base deployment scenario. Mobile sources remain agnostic of multicast mobility operations." />
  <meta name="description" content="Multicast communication can be enabled in Proxy Mobile IPv6 domains by deploying MLD Proxy functions at Mobile Access Gateways, and multicast routing functions at Local Mobility Anchors. This document describes the support of mobile multicast senders in Proxy Mobile IPv6 domains that is provided by this base deployment scenario. Mobile sources remain agnostic of multicast mobility operations." />
  <meta name="keywords" content="" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">MULTIMOB Group</td>
<td class="right">T C. Schmidt</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">HAW Hamburg</td>
</tr>
<tr>
<td class="left">Intended status: Informational</td>
<td class="right">M. Waehlisch</td>
</tr>
<tr>
<td class="left">Expires: May 03, 2012</td>
<td class="right">link-lab &amp; FU Berlin</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">M. Farooq</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">HAW Hamburg</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">October 31, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Mobile Multicast Sender Support in PMIPv6 Domains with Base Multicast Deployment<br />
  <span class="filename">draft-schmidt-multimob-pmipv6-base-source-01</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>Multicast communication can be enabled in Proxy Mobile IPv6 domains by deploying MLD Proxy functions at Mobile Access Gateways, and multicast routing functions at Local Mobility Anchors. This document describes the support of mobile multicast senders in Proxy Mobile IPv6 domains that is provided by this base deployment scenario. Mobile sources remain agnostic of multicast mobility operations.</p>
<h1><a>Requirements Language</a></h1>
<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">RFC 2119</a> <cite title="NONE">[RFC2119]</cite>.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on May 03, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Terminology</a>
</li>
<li>3.   <a href="#rfc.section.3">Overview</a>
</li>
<li>4.   <a href="#rfc.section.4">Source Mobility Details</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">Operations of the Mobile Node</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">Operations of the Mobile Access Gateway</a>
</li>
<li>4.3.   <a href="#rfc.section.4.3">Operations of the Local Mobility Anchor</a>
</li>
<li>4.3.1.   <a href="#rfc.section.4.3.1">Local Mobility Anchors Operating PIM</a>
</li>
<li>4.4.   <a href="#rfc.section.4.4">IPv4 Support</a>
</li>
<li>4.5.   <a href="#rfc.section.4.5">Efficiency of the Distribution System</a>
</li>
<li>4.6.   <a href="#rfc.section.4.6">Multicast Availability throughout the Access Network</a>
</li>
<li>5.   <a href="#rfc.section.5">IANA Considerations</a>
</li>
<li>6.   <a href="#rfc.section.6">Security Considerations</a>
</li>
<li>7.   <a href="#rfc.section.7">Acknowledgements</a>
</li>
<li>8.   <a href="#rfc.references">References</a>
</li>
<li>8.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>8.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li>Appendix A.   <a href="#rfc.appendix.Appendix%20A">Evaluation of Traffic Flows</a>
</li>
<li>Appendix B.   <a href="#rfc.appendix.Appendix%20B">Change Log </a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">Proxy Mobile IPv6 (PMIPv6) <a href="#RFC5213">[RFC5213]</a> extends Mobile IPv6 (MIPv6) <a href="#RFC3775">[RFC3775]</a> by network-based management functions that enable IP mobility for a host without requiring its participation in any mobility-related signaling.  Additional network entities called the Local Mobility Anchor (LMA), and Mobile Access Gateways (MAGs), are responsible for managing IP mobility on behalf of the mobile node (MN). An MN connected to a PMIPv6 domain, which only operates according to the base specifications of <a href="#RFC5213">[RFC5213]</a>, cannot participate in multicast communication, as MAGs will discard group packets.</p>
<p id="rfc.section.1.p.2">Multicast support for mobile listeners can be enabled within a PMIPv6 domain by deploying MLD Proxy functions at Mobile Access Gateways, and multicast routing functions at Local Mobility Anchors <a href="#RFC6224">[RFC6224]</a>. This base deployment option is the simplest way to PMIPv6 multicast extensions in the sense that it neither requires new protocol operations nor additional infrastructure entities. Standard software functions need to be activated on PMIPv6 entities, only, on the price of possibly non-optimal multicast routing.</p>
<p id="rfc.section.1.p.3">This document describes the support of mobile multicast senders in Proxy Mobile IPv6 domains as it is provided by the base deployment scenario <a href="#RFC6224">[RFC6224]</a>. Mobile Nodes in this setting remain agnostic of multicast mobility operations. This document discusses implications on multicast routing, but does not address specific optimizations and efficiency improvements of multicast routing for network-based mobility as discussed in <a href="#RFC5757">[RFC5757]</a>.</p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> Terminology</h1>
<p id="rfc.section.2.p.1">This document uses the terminology as defined for the mobility protocols <a href="#RFC3775">[RFC3775]</a>, <a href="#RFC5213">[RFC5213]</a> and <a href="#RFC5844">[RFC5844]</a>, as well as the multicast edge related protocols <a href="#RFC3376">[RFC3376]</a>, <a href="#RFC3810">[RFC3810]</a> and <a href="#RFC4605">[RFC4605]</a>.</p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> Overview</h1>
<p id="rfc.section.3.p.1">The reference scenario for multicast deployment in Proxy Mobile IPv6 domains is illustrated in <a href="#fig1">Figure 1</a>.</p>
<div id="#rfc.figure.1"></div>
<div id="#fig1"></div>
<pre>                       +-------------+
                       | Multicast   |
                       | Listeners   |
                       +-------------+
                              |
                     ***  ***  ***  ***
                    *   **   **   **   *
                   *                    *
                    *  Fixed Internet  *
                   *                    *
                    *   **   **   **   *
                     ***  ***  ***  ***
                      /            \
                  +----+         +----+
                  |LMA1|         |LMA2|                 Multicast Anchor
                  +----+         +----+
             LMAA1  |              |  LMAA2
                    |              |
                    \\           //\\
                     \\         //  \\
                      \\       //    \\                 Unicast Tunnel
                       \\     //      \\ 
                        \\   //        \\
                         \\ //          \\
               Proxy-CoA1 ||            ||  Proxy-CoA2
                       +----+          +----+
                       |MAG1|          |MAG2|           MLD Proxy
                       +----+          +----+
                        |  |             |
                MN-HNP1 |  | MN-HNP2     | MN-HNP3
                       MN1 MN2          MN3
                 Multicast Sender + Listener(s)
      </pre>
<p id="rfc.section.3.p.2">An MN in a PMIPv6 domain will decide on multicast data transmission completely independent of its current mobility conditions. It will send packets as initiated by applications, using its source address with Home Network Prefix (HNP) and a multicast destination addresses chosen by application needs. Multicast packets will arrive at the currently active MAG via one of its downstream local (wireless) links. A multicast unaware MAG would simply discard these packets in the absence of a multicast forwarding information base (MFIB).</p>
<p id="rfc.section.3.p.3">An MN can successfully distribute multicast data in PMIPv6, if MLD proxy functions are deployed at the MAG as described in <a href="#RFC6224">[RFC6224]</a>. In this set-up, the MLD proxy instance serving a mobile multicast source has configured its upstream interface at the tunnel towards MN's corresponding LMA. For each LMA, there will be a separate instance of an MLD proxy.</p>
<p id="rfc.section.3.p.4">According to the specifications given in <a href="#RFC4605">[RFC4605]</a>, multicast data arriving from a downstream interface of an MLD proxy will be forwarded to the upstream interface and to all but the incoming downstream interfaces with appropriate forwarding states for this group. Thus multicast streams originating from an MN will arrive at the corresponding LMA and directly at all mobile receivers co-located at the same MAG. Serving as the designated multicast router or an additional MLD proxy, the LMA forwards data to the fixed Internet, if forwarding states are maintained through multicast routing. If the LMA is acting as another MLD proxy, it will forward the multicast data to its upstream interface, and based upon the downstream interfaces' subscriptions accordingly.</p>
<p id="rfc.section.3.p.5">In case of a handover, the MN (unaware of IP mobility) can continue to send multicast packets as soon as network connectivity is reconfigured. At this time, the MAG has determined the corresponding LMA, and IPv6 unicast address configuration with PMIPv6 bindings have been performed. Multicast packets arriving at the MAG are discarded until the MAG has completed the following steps.</p>
<p><a href="#fig-callflow">Figure 2</a>). In this way, multicast source mobility is transparently enabled in PMIPv6 domains that deploy the base scenario for multicast.</p>

<ol>
<li>The MAG SHOULD determine whether the MN is admissible to multicast services, and stop here otherwise.</li>
<li>The MAG adds the new downstream link to the MLD proxy instance with up-link to the corresponding LMA.</li>
</ol>

<p>As soon as the MN's uplink is associated with the corresponding MLD proxy instance, multicast packets are forwarded again to the LMA and eventually to receivers within the PMIP domain (see the call flow in </p>
<div id="#rfc.figure.2"></div>
<div id="#fig-callflow"></div>
<pre>MN1             MAG1             MN2             MAG2             LMA
|                |                |               |                |
|                | Mcast Data     |               |                |
|                |&lt;---------------+               |                |
|                |     Mcast Data |               |                |
|  Join(G)       +================================================&gt;|
+--------------&gt; |                |               |                |
| Mcast Data     |                |               |                |
|&lt;---------------+                |               |                |
|                |                |               |                |
|           &lt;  Movement of MN 2 to MAG2  &amp;  PMIP Binding Update  &gt; |
|                |                |               |                |
|                |                |--- Rtr Sol --&gt;|                |
|                |                |&lt;-- Rtr Adv ---|                |
|                |                |               |                |
|                |                |   &lt; MLD Proxy Configuration &gt;  |
|                |                |               |                |
|                |                |   MLD Query   |                |
|                |                |&lt;--------------+                |
|                |                |  Mcast Data   |                |
|                |                +--------------&gt;|                |
|                |                |               | Mcast Data     |   
|                |                |               +===============&gt;|
|                |                |               |                |
|                |   Mcast Data   |               |                |
|                |&lt;================================================+
|  Mcast Data    |                |               |                |
|&lt;---------------+                |               |                |
|                |                |               |                |
</pre>
<p></p>
<p id="rfc.section.3.p.8">These multicast deployment considerations likewise apply for mobile nodes that operate with their IPv4 stack enabled in a PMIPv6 domain.  PMIPv6 can provide IPv4 home address mobility support <a href="#RFC5844">[RFC5844]</a>. IPv4 multicast is handled by an IGMP proxy function at the MAG in an analogous way.</p>
<p id="rfc.section.3.p.9">Following these deployment steps, multicast traffic distribution transparently inter-operates with PMIPv6. It is worth noting that a MN - while being attached to the same MAG as the mobile source, but associated with a different LMA, cannot receive multicast traffic on a shortest path. Instead, multicast streams flow up to the LMA of the mobile source, are transferred to the LMA of the mobile listener and tunneled downwards to the MAG again (see <a href="#A-Eval">Appendix Appendix A</a> for further considerations).</p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> Source Mobility Details</h1>
<p id="rfc.section.4.p.1">Incorporating multicast source mobility in PMIPv6 requires to deploy general multicast functions at PMIPv6 routers and to define their interaction with the PMIPv6 protocol in the following way.</p>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> Operations of the Mobile Node</h1>
<p id="rfc.section.4.1.p.1">A Mobile Node willing to send multicast data will proceed as if attached to the fixed Internet. No specific mobility or other multicast related functionalities are required at the MN.</p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> Operations of the Mobile Access Gateway</h1>
<p id="rfc.section.4.2.p.1">A Mobile Access Gateway is required to have MLD proxy instances deployed corresponding to each LMA, taking the corresponding tunnel as its unique upstream link, cf., <a href="#RFC6224">[RFC6224]</a>. On the arrival of a MN, the MAG decides on the mapping of downstream links to a proxy instance and the upstream link to the LMA based on the regular Binding Update List as maintained by PMIPv6 standard operations. When multicast data is received from the MN, the MAG MUST identify the corresponding proxy instance from the incoming interface and forwards multicast data upstream according to <a href="#RFC4605">[RFC4605]</a>.</p>
<p id="rfc.section.4.2.p.2">The MAG MAY apply special admission control to enable multicast data transition from a MN. It is advisable to take special care that MLD proxy implementations do not redistribute multicast data to downstream interfaces without appropriate subscriptions in place.</p>
<h1 id="rfc.section.4.3">
<a href="#rfc.section.4.3">4.3.</a> Operations of the Local Mobility Anchor</h1>
<p id="rfc.section.4.3.p.1">For any MN, the Local Mobility Anchor acts as the persistent Home Agent and at the same time as the default multicast upstream for the corresponding MAG. It will manage and maintain a multicast forwarding information base for all group traffic arriving from its mobile sources. It SHOULD participate in multicast routing functions that enable traffic redistribution to all adjacent LMAs within the PMIPv6 domain and thereby ensure a continuous receptivity while the source is in motion.</p>
<h1 id="rfc.section.4.3.1">
<a href="#rfc.section.4.3.1">4.3.1.</a> Local Mobility Anchors Operating PIM</h1>
<p id="rfc.section.4.3.1.p.1">Local Mobility Anchors that operate the PIM routing protocol <a href="#RFC4601">[RFC4601]</a> will require sources to be directly connected for sending PIM registers to the RP. This does not hold in a PMIPv6 domain, as MAGs are routers intermediate to MN and the LMA.  In this sense, MNs are multicast sources external to the PIM-SM domain.</p>
<p id="rfc.section.4.3.1.p.2">To cure this defect common to all set-ups of subsidiary domains not running PIM, the LMA should act as a PIM Border Router and activate the Border-bit. In this case, the DirectlyConnected(S) is treated as being TRUE for mobile sources and the PIM-SM forwarding rule "iif == RPF_interface(S)" is relaxed to be TRUE, as the incoming tunnel interface from MAG to LMA is considered as not part of the PIM-SM component of the LMA (see A.1 of <a href="#RFC4601">[RFC4601]</a> ). </p>
<h1 id="rfc.section.4.4">
<a href="#rfc.section.4.4">4.4.</a> IPv4 Support</h1>
<p id="rfc.section.4.4.p.1">An MN in a PMIPv6 domain may use an IPv4 address transparently for communication as specified in <a href="#RFC5844">[RFC5844]</a>. For this purpose, LMAs can register IPv4-Proxy-CoAs in its Binding Caches and MAGs can provide IPv4 support in access networks. Correspondingly, multicast membership management will be performed by the MN using IGMP. For multicast support on the network side, an IGMP proxy function needs to be deployed at MAGs in exactly the same way as for IPv6. <a href="#RFC4605">[RFC4605]</a> defines IGMP proxy behaviour in full agreement with IPv6/MLD. Thus IPv4 support can be transparently provided following the obvious deployment analogy.</p>
<p id="rfc.section.4.4.p.2">For a dual-stack IPv4/IPv6 access network, the MAG proxy instances SHOULD choose multicast signaling according to address configurations on the link, but MAY submit IGMP and MLD queries in parallel, if needed. It should further be noted that the infrastructure cannot identify two data streams as identical when distributed via an IPv4 and IPv6 multicast group. Thus duplicate data may be forwarded on a heterogeneous network layer.</p>
<p id="rfc.section.4.4.p.3">A particular note is worth giving the scenario of <a href="#RFC5845">[RFC5845]</a> in which overlapping private address spaces of different operators can be hosted in a PMIP domain by using GRE encapsulation with key identification. This scenario implies that unicast communication in the MAG-LMA tunnel can be individually identified per MN by the GRE keys. This scenario still does not impose any special treatment of multicast communication for the following reasons.</p>
<p id="rfc.section.4.4.p.4">Multicast streams from and to MNs arrive at a MAG on point-to-point links (identical to unicast). between the routers and independent of any individual MN. So the MAG-proxy and the LMA SHOULD NOT use GRE key identifiers, but plain GRE encapsulation in multicast communication (including MLD queries and reports). Multicast traffic sent upstream and downstream of MAG-to-LMA tunnels proceeds as router-to-router forwarding according to the multicast forwarding information base (MFIB) of the MAG or LMA and independent of MN's unicast addresses, while the MAG proxy instance re-distributes multicast data down the point-to-point links (interfaces) according to its own MFIB, independent of MN's IP addresses.</p>
<h1 id="rfc.section.4.5">
<a href="#rfc.section.4.5">4.5.</a> Efficiency of the Distribution System</h1>
<p id="rfc.section.4.5.p.1">In the following efficiency-related issues are enumerated.</p>
<p></p>

<dl>
<dt>Multicast reception at LMA</dt>
<dd style="margin-left: 8">In the current deployment scenario, the LMA will receive all multicast traffic originating from its associated MNs. There is no mechanism to suppress upstream forwarding in the absence of receivers.</dd>
<dt>MNs on the same MAG using different LMAs</dt>
<dd style="margin-left: 8">For a mobile receiver and a source that use different LMAs, the traffic has to go up to one LMA, cross over to the other LMA, and then be tunneled back to the same MAG, causing redundant flows in the access network and at the MAG.</dd>
</dl>
<h1 id="rfc.section.4.6">
<a href="#rfc.section.4.6">4.6.</a> Multicast Availability throughout the Access Network</h1>
<p id="rfc.section.4.6.p.1">There may be deployment scenarios, where multicast services are available throughout the access network independent of the PMIPv6 infrastructure. Direct multicast access at MAGs may be supported through native multicast routing within a flat access network that includes a multicast router, via dedicated (tunnel or VPN) links between MAGs and designated multicast routers.</p>
<p id="rfc.section.4.6.p.2">Multicast traffic distribution can be simplified in these scenarios. A single proxy instance at MAGs with up-link into the multicast cloud will serve as a first hop gateway into the multicast routing domain and avoid traffic duplication or detour routing.  However, mobility of the multicast source in this scenario will require some multicast routing protocols to rebuild distribution trees. This can cause significant service disruptions or delays (see <a href="#RFC5757">[RFC5757]</a> for further details).</p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#IANA" id="IANA">IANA Considerations</a>
</h1>
<p id="rfc.section.5.p.1">This document makes no request of IANA.</p>
<p id="rfc.section.5.p.2">Note to RFC Editor: this section may be removed on publication as an RFC.</p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#Security" id="Security">Security Considerations</a>
</h1>
<p id="rfc.section.6.p.1">This draft does not introduce additional messages or novel protocol operations. Consequently, no new threats are introduced by this document in addition to those identified as security concerns of <a href="#RFC3810">[RFC3810]</a>, <a href="#RFC4605">[RFC4605]</a>, <a href="#RFC5213">[RFC5213]</a>, and <a href="#RFC5844">[RFC5844]</a>.</p>
<p id="rfc.section.6.p.2">However, particular attention should be paid to implications of combining multicast and mobility management at network entities. As this specification allows mobile nodes to initiate the creation of multicast forwarding states at MAGs and LMAs while changing attachments, threats of resource exhaustion at PMIP routers and access networks arrive from rapid state changes, as well as from high volume data streams routed into access networks of limited capacities. In addition to proper authorization checks of MNs, rate controls at replicators MAY be required to protect the agents and the downstream networks. In particular, MLD proxy implementations at MAGs SHOULD carefully procure for automatic multicast state extinction on the departure of MNs, as mobile multicast listeners in the PMIPv6 domain will not actively terminate group membership prior to departure.</p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#Acknowledgements" id="Acknowledgements">Acknowledgements</a>
</h1>
<p id="rfc.section.7.p.1">The authors would like to thank (in alphabetical order) Jouni Korhonen and Stig Venaas for advice, help and reviews of the document.  Funding by the German Federal Ministry of Education and Research within the G-LAB Initiative is gratefully acknowledged.</p>
<p></p>
<h1 id="rfc.references">
<a href="#rfc.references">8.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">8.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3775">[RFC3775]</b></td>
<td class="top">
<a>Johnson, D.</a>, <a>Perkins, C.</a> and <a>J. Arkko</a>, "<a href="http://tools.ietf.org/html/rfc3775">Mobility Support in IPv6</a>", RFC 3775, June 2004.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5213">[RFC5213]</b></td>
<td class="top">
<a>Gundavelli, S.</a>, <a>Leung, K.</a>, <a>Devarapalli, V.</a>, <a>Chowdhury, K.</a> and <a>B. Patil</a>, "<a href="http://tools.ietf.org/html/rfc5213">Proxy Mobile IPv6</a>", RFC 5213, August 2008.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3810">[RFC3810]</b></td>
<td class="top">
<a>Vida, R.</a> and <a>L. Costa</a>, "<a href="http://tools.ietf.org/html/rfc3810">Multicast Listener Discovery Version 2 (MLDv2) for IPv6</a>", RFC 3810, June 2004.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4601">[RFC4601]</b></td>
<td class="top">
<a>Fenner, B.</a>, <a>Handley, M.</a>, <a>Holbrook, H.</a> and <a>I. Kouvelas</a>, "<a href="http://tools.ietf.org/html/rfc4601">Protocol Independent Multicast - Sparse Mode (PIM-SM): Protocol Specification (Revised)</a>", RFC 4601, August 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4605">[RFC4605]</b></td>
<td class="top">
<a>Fenner, B.</a>, <a>He, H.</a>, <a>Haberman, B.</a> and <a>H. Sandick</a>, "<a href="http://tools.ietf.org/html/rfc4605">Internet Group Management Protocol (IGMP) / Multicast Listener Discovery (MLD)-Based Multicast Forwarding ("IGMP/MLD Proxying")</a>", RFC 4605, August 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2710">[RFC2710]</b></td>
<td class="top">
<a href="mailto:deering@cisco.com" title="Cisco Systems, Inc.">Deering, S.</a>, <a href="mailto:fenner@research.att.com" title="AT &amp; T Research">Fenner, W.</a> and <a href="mailto:haberman@raleigh.ibm.com" title="IBM Corporation">B. Haberman</a>, "<a href="http://tools.ietf.org/html/rfc2710">Multicast Listener Discovery (MLD) for IPv6</a>", RFC 2710, October 1999.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5844">[RFC5844]</b></td>
<td class="top">
<a>Wakikawa, R.</a> and <a>S. Gundavelli</a>, "<a href="http://tools.ietf.org/html/rfc5844">IPv4 Support for Proxy Mobile IPv6</a>", RFC 5844, May 2010.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3376">[RFC3376]</b></td>
<td class="top">
<a>Cain, B.</a>, <a>Deering, S.</a>, <a>Kouvelas, I.</a>, <a>Fenner, B.</a> and <a>A. Thyagarajan</a>, "<a href="http://tools.ietf.org/html/rfc3376">Internet Group Management Protocol, Version 3</a>", RFC 3376, October 2002.</td>
</tr>
<tr>
<td class="reference"><b id="RFC6224">[RFC6224]</b></td>
<td class="top">
<a>Schmidt, T.</a>, <a>Waehlisch, M.</a> and <a>S. Krishnan</a>, "<a href="http://tools.ietf.org/html/rfc6224">Base Deployment for Multicast Listener Support in Proxy Mobile IPv6 (PMIPv6) Domains</a>", RFC 6224, April 2011.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">8.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC5757">[RFC5757]</b></td>
<td class="top">
<a>Schmidt, T.</a>, <a>Waehlisch, M.</a> and <a>G. Fairhurst</a>, "<a href="http://tools.ietf.org/html/rfc5757">Multicast Mobility in Mobile IP Version 6 (MIPv6): Problem Statement and Brief Survey</a>", RFC 5757, February 2010.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5845">[RFC5845]</b></td>
<td class="top">
<a>Muhanna, A.</a>, <a>Khalil, M.</a>, <a>Gundavelli, S.</a> and <a>K. Leung</a>, "<a href="http://tools.ietf.org/html/rfc5845">Generic Routing Encapsulation (GRE) Key Option for Proxy Mobile IPv6</a>", RFC 5845, June 2010.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2236">[RFC2236]</b></td>
<td class="top">
<a href="mailto:fenner@parc.xerox.com" title="Xerox PARC">Fenner, W.C.</a>, "<a href="http://tools.ietf.org/html/rfc2236">Internet Group Management Protocol, Version 2</a>", RFC 2236, November 1997.</td>
</tr>
</tbody></table>
<h1 id="rfc.appendix.Appendix A">
<a href="#rfc.appendix.Appendix%20A">Appendix A.</a> <a href="#A-Eval" id="A-Eval">Evaluation of Traffic Flows</a>
</h1>
<p id="rfc.section.Appendix A.p.1">TODO</p>
<h1 id="rfc.appendix.Appendix B">
<a href="#rfc.appendix.Appendix%20B">Appendix B.</a> Change Log </h1>
<p id="rfc.section.Appendix B.p.1">The following changes have been made from version draft-schmidt-multimob-pmipv6-base-source-00: </p>

<ol>
<li>Added specifics of PIM directly connected neighbor requirements for sources </li>
<li>Updated references</li>
<li>Editorial improvements</li>
</ol>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Thomas C. Schmidt</span> 
	  <span class="n hidden">
		<span class="family-name">Schmidt</span>
	  </span>
	</span>
	<span class="org vcardline">HAW Hamburg</span>
	<span class="adr">
	  <span>Berliner Tor 7</span>

	  <span class="vcardline">
		<span class="locality">Hamburg</span>,  
		<span class="region"></span>
		<span class="code">20099</span>
	  </span>
	  <span class="country-name vcardline">Germany</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:schmidt@informatik.haw-hamburg.de">schmidt@informatik.haw-hamburg.de</a></span>

<span class="vcardline">URI: <a href="http://inet.cpt.haw-hamburg.de/members/schmidt">http://inet.cpt.haw-hamburg.de/members/schmidt</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Matthias Waehlisch</span> 
	  <span class="n hidden">
		<span class="family-name">Waehlisch</span>
	  </span>
	</span>
	<span class="org vcardline">link-lab & FU Berlin</span>
	<span class="adr">
	  <span>Hoenower Str. 35</span>

	  <span class="vcardline">
		<span class="locality">Berlin</span>,  
		<span class="region"></span>
		<span class="code">10318</span>
	  </span>
	  <span class="country-name vcardline">Germany</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:mw@link-lab.net">mw@link-lab.net</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Muhamma Omer Farooq</span> 
	  <span class="n hidden">
		<span class="family-name">Farooq</span>
	  </span>
	</span>
	<span class="org vcardline">HAW Hamburg</span>
	<span class="adr">
	  <span>Berliner Tor 7</span>

	  <span class="vcardline">
		<span class="locality">Hamburg</span>,  
		<span class="region"></span>
		<span class="code">20099</span>
	  </span>
	  <span class="country-name vcardline">Germany</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:omer.farooq@ymail.com">omer.farooq@ymail.com</a></span>

  </address>
</div>

</body>
</html>