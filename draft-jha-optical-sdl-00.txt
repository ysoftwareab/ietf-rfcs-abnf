
  Internet Draft                                   Pankaj K. Jha 
  draft-jha-optical-sdl-00.txt             Cypress Semiconductor 
  Expiration Date: April, 2002                    November, 2001 
   
   
  Payload-independent Delineation for Simple Data Link (SDL) Framing 
   
   
  1.   Status of this Memo 
   
  This document is an Internet-Draft and is in full conformance with 
  all provisions of Section 10 of RFC2026 [1]. 
   
  Internet drafts are working documents of the Internet Engineering 
  Task Force (IETF), its areas, and its working groups. Note that other 
  groups may also distribute working documents as Internet-Drafts. 
  Internet drafts are draft documents valid for a maximum of six months 
  and may be updated, replaced, or obsoleted by other documents at any 
  time. It is inappropriate to use Internet-Drafts as reference 
  material or to cite them other than as "work in progress". 
   
  The list of current Internet-Drafts can be accessed at 
  http://www.ietf.org/ietf/1id-abstracts.txt.  
   
  The list of Internet-Draft Shadow Directories can be accessed at 
  http://www.ietf.org/shadow.html. 
   
  2.   Abstract 
   
  Simple Data Link (SDL) framing specification (rfc2823) defines a 
  [length, length CRC] based construct with a tail-end payload CRC for 
  delineating frames over digital links. Many protocols, however, 
  already have built-in CRC mechanisms, and a tail-end CRC is not 
  always needed. This draft proposes a modification to allow SDL 
  receivers to delineate all types of payload without having to analyze 
  payload protocol header to determine presence of CRC. 
   
  3.   Conventions used in this document 
   
  The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", 
  "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and "OPTIONAL" in this 
  document are to be interpreted as described in RFC-2119 [2]. 
   
   
  TABLE OF CONTENTS 
   
  1.  Status of this Memo ............................................1 
  2.  Abstract .......................................................1 
  3.  Conventions used in this document ..............................1 
  4.  Introduction ...................................................2 

  5.  Organization of this Draft .....................................2 
   
   Jha                      Expires April, 2002                 [Page 1] 
   

   
  INTERNET-DRAFT          Payload-independent SDL        November, 2001 
   
   
  6.  An Overview of Frame Delineation Methods .......................3 
    6.1  HDLC .........................................................3 
    6.2  SDL (Simple Data Link, rfc2823) ..............................3 
     6.2.1  Length (LHdr) ............................................4 
     6.2.2  Length HEC (LHEC) ........................................4 
     6.2.3  Payload CRC (pCRC) .......................................4 

  7.  SDL for a single Service Transport .............................5 
  8.  SDL for a Multiservice Transport ...............................5 
  9.  SDL Engine Limitations .........................................5 
  10.   Proposal for Length Field Modification .......................5 
  11.   Intellectual Property Considerations .........................6 
  12.   Author's Address .............................................6 
  13.   Full Copyright Statement .....................................6 
  14.   References ...................................................7 

   
   
  4.   Introduction 
   
  Simple Data Link (SDL) framing specification (rfc2823) defines a 
  [length, length CRC] construct for delineating frames over digital 
  links. Current SDL protocol specifies a payload CRC at the end for 
  all types of payloads. Many protocols, however, already have built-in 
  CRC mechanisms, and a tail end CRC is not always needed. 
  Consequently, with the current SDL specification a frame delineation 
  engine on the receive must include logic to process payload protocol 
  fields. This draft proposes a modification to so it can delineate all 
  types of payload data without having to depend on the type of payload 
  being carried. 
   
  The SDL-style delineation scheme is superior to an HDLC frame, with 
  length field indicating number of bytes in the payload. 
   
  Current scheme would require complex SDL delineation engines that 
  must also analyze a multiservice transport header to determine if a 
  tail end CRC is present. A 4-byte CRC field that an SDL delineation 
  engine skips before restarting hunt for next frame follows payload. 
  Those payloads that don't have a tail end CRC or have a built-in CRC 
  don't work well this mechanism. 
   
  5.   Organization of this Draft 
   
  As a backgrounder, this draft first presents an overview of SDL, with 
  a brief comparative analysis of HDLC (High-level Data Link Control) 
  protocol for frame delineation. 
   

    
   
  Jha                       Expires April, 2002                 [Page 2] 
   

   
  INTERNET-DRAFT          Payload-independent SDL        November, 2001 
   
   
  This is followed by an analysis of SDL operation with current 
  specification and with suggested modification to the protocol. 
   
   
  6. An Overview of Frame Delineation Methods 
   
  6.1 HDLC 
   
  HDLC-based delineation is currently the most popular method for 
  sending frames on serial links, optical fiber, and over optical fiber 
  using SONET/SDH (HDLC-based delineation over SONET/SDH is described 
  in Packet-over-SONET (POS) as defined in rfc2615 [4]).  
   
  +====+---------+---------+-----------------+------+====+  
  | 7E | Address | Control | ....Payload.... | pCRC | 7E |  
  +====+---------+---------+-----------------+------+====+  
    1       1         1                         4     1  (bytes) 
  Figure 1: HDLC Framing Delineation 

   
  Data is framed using a 0x7E pattern at both ends. Conflicting control 
  bytes in payload are byte-stuffed to avoid hitting a 0x7E or any of 
  the control characters within the frame. 
   
  With increasing speeds and larger frame sizes, limitations of HDLC 
  are becoming apparent, making it less favorable for optical networks. 
  Some of the issues with HDLC are as follows:  
   
  o  During transmission, every outgoing byte must be monitored, and 
     byte-by-byte stuffing decision needs to be made to prevent flag 
     emulation by data bytes. And the receiver needs to monitor every 
     incoming byte to perform the de-stuffing. Processing every byte at 
     speeds of OC-48/192/768 requires high-speed hardware logic for 
     every channel. 
  o  Malicious long packets (killer packets) can defeat scrambling, 
     causing loss of synchronization. This is more likely now with 
     large packet sizes. 
  o  No advance knowledge of length prevents efficient use of variable-
     size queues for handling packets on incoming ports. Length of HDLC 
     frame can only be determined when terminating 0x7E is encountered. 
     Since nodes have no knowledge of frame length a priori, they must 
     allocate buffer with the highest size for every incoming frame. 
  o  HDLC implicitly is bandwidth-inefficient as byte stuffing causes 
     the number of bytes transmitted to be much larger than the actual 
     number of bytes in the packet. 
   
  6.2   SDL (Simple Data Link, rfc2823) 
   
    
   
  Jha                       Expires April, 2002                 [Page 3] 
   

   
  INTERNET-DRAFT          Payload-independent SDL        November, 2001 
   
   
  SDL framing delineation protocol (rfc2823, [1]) prefixes a payload 
  with a 32-bit header. First 16 bits of this word (LHdr) hold the 
  length of the payload and the other 16 bits (LHEC) contain CRC-16 
  (Cyclic Redundancy Check) calculated on the 16-bit length field, as 
  shown below.  
   
     +--------->------>---------------+                              
     |                                |                                             
  +=====+======+-----------+------++=====+======+-----------+------+ 
  |LHdr | LHEC | .Payload. | pCRC ||LHdr | LHEC | .Payload. | pCRC | 
  +=====+======+-----------+------++=====+======+-----------+------+ 
    2      2        N         4       2     2        N         4     
  Figure 2: SDL Framing Delineation 

   
  SDL provides a robust CRC-16 based framed boundary delineation 
  mechanism that solves all current HDLC issues like robustness in bad 
  BER conditions, variable packet size expansion, and malicious long 
  packet scrambler manipulation. 
   
  Frames are located by hunting for a length/CRC match, much the same 
  way as ATM cells are located by HEC synchronization. Next frame is 
  located by jumping length bytes in the frame, skipping next four 
  bytes (payload CRC is computed and verified by SDL engine) and again 
  looking for a length/CRC match at the following byte location. 
   
  Since there is no manipulation to the header bytes, link bandwidth is 
  optimally utilized for sending frames using SDL. 
   
  In case of data corruption at the location of a length CRC field, the 
  hardware begins a byte-by-byte hunting for the length/CRC construct 
  until a match is found. 
   
  6.2.1   Length (LHdr) 
   
  The current specification the length field to include all bytes 
  following the LHEC (length CRC) field up to the end of payload but 
  not including pCRC. 
   
  6.2.2   Length HEC (LHEC) 
   
  This field is 16 bits, and it contains ITU-T CRC-16 calculated on the 
  16-bit LHdr field. 
   
  6.2.3   Payload CRC (pCRC) 
   

    
   
  Jha                       Expires April, 2002                 [Page 4] 
   

   
  INTERNET-DRAFT          Payload-independent SDL        November, 2001 
   
   
  The payload CRC is an OPTIONAL field. When present it MUST be an ITU-
  T CRC-32. The SDL specification mandates an advance negotiation or 
  provisioning for presence or absence of pCRC in all frames.  
   
  7.   SDL for a single Service Transport 
   
  The current SDL specification for payload CRC scheme is sufficient 
  for sending a single type of data. If the service being carried 
  doesn't have a built-in CRC mechanism, an SDL engine can provide a 
  payload CRC on transmission and check for a valid CRC on reception.  
   
  For other protocols, such as Ethernet, the external CRC is omitted. 
  In this case, the SDL receive engine performs the length/length-CRC 
  hunting and passes the payload to an Ethernet MAC that checks the CRC 
  embedded in the Ethernet frame. 
   
  8.   SDL for a Multiservice Transport 
   
  In a multiservice transport, however, some data types may not have an 
  explicit CRC field present at the end of the payload. Examples of 
  such data types are _ ATM cell(s), SONET/SDH frame(s), T1/T3/NxDS0 
  frames, etc. In addition, in many systems a frame delineation engine 
  is always separate from a CRC computation/verification logic block. 
   
  Multiservice transport framing protocols, such as Generic Framing 
  Procedure (GFP, [6]) and Hybrid Data Transport (HDT, [3]), feature a 
  bit in their header fields to indicate presence of a payload CRC. 
  These framing protocols understand when to include or exclude payload 
  CRC during transmit/receive 
   
  9.   SDL Engine Limitations 
   
  Dependence on payload protocol structure complicates design of SDL 
  transmit/receive engines. For multiservice transport, devices must 
  contain logic blocks that understand details of protocol that are 
  carried inside the SDL payload area, and the engines must be able to 
  process them for sending and receiving payload data with/without a 
  CRC.  
   
  Scalability of such SDL engines will be quite limited, especially in 
  multi-channel environments where multiple instances of SDL engines 
  need to run. Worse yet, each time a new multiservice transport 
  protocol is to be transported, each of the engines need to modified, 
  forcing a re-design of hardware device. 
   
  10.  Proposal for Length Field Modification 
   

    
   
  Jha                       Expires April, 2002                 [Page 5] 
   

   
  INTERNET-DRAFT          Payload-independent SDL        November, 2001 
   
   
  To de-couple frame delineation from payload CRC dependence, this 
  draft proposes that the LHdr length value MUST include payload plus 
  any payload CRC field, if present. With this scheme, a frame 
  delineation mechanism becomes simpler - to get to the next frame, the 
  delineation logic simply skips the number of bytes given by the 
  length field (LHdr).  
   
  On reception, the entire payload (including any payload CRC) is given 
  to a payload-processing logic block. The payload-processing block is 
  responsible for any generation and processing of payload CRC. During 
  transmission, the payload-processing block sends payload and any 
  payload CRC to the SDL framing logic. This logic simply adds a 4-byte 
  header consisting of a 2-byte length field for payload and any CRC, 
  and a 2-byte CRC for the length field. 
   
  With this proposed change, an SDL delineating device becomes very 
  efficient and highly scalable with increasing speed and density, as 
  it only deals with inserting or removing the 4-byte header for all 
  types of payload data. 
   
  11.  Intellectual Property Considerations 
   
  Cypress Semiconductor Corporation may own intellectual property on 
  some of the technologies disclosed in this document. In the event 
  that Cypress obtains such patent rights, Cypress intends to license 
  them on reasonable and non-discriminatory terms in accordance with 
  the intellectual property rights procedures of the IETF standards 
  process. 
   
  Lucent Technologies Inc. may own intellectual property on some of the 
  technologies discussed and used in this document. 
   
  12.  Author's Address 
   
  Pankaj K Jha 
  Cypress Semiconductor 
  3901 N First Street 
  San Jose, CA 95134 
  USA 
   
  Phone: 408 432 7091 
  Fax:   408 943 2949 
  Email: pkj@cypress.com  
   
   
  13.  Full Copyright Statement 
   

    
   
  Jha                       Expires April, 2002                 [Page 6] 
   

   
  INTERNET-DRAFT          Payload-independent SDL        November, 2001 
   
   
  "Copyright (C) The Internet Society. All Rights Reserved. This 
  document and translations of it may be copied and furnished to 
  others, and derivative works that comment on or otherwise explain it 
  or assist in its implementation may be prepared, copied, published 
  and distributed, in whole or in part, without restriction of any 
  kind, provided that the above copyright notice and this paragraph are 
  included on all such copies and derivative works. However, this 
  document itself may not be modified in any way, such as by removing 
  the copyright notice or references to the Internet Society or other 
  Internet organizations, except as needed for the purpose of 
  developing Internet standards in which case the procedures for 
  copyrights defined in the Internet Standards process must be 
  followed, or as required to translate it into languages other than 
  English. 
   
  The limited permissions granted above are perpetual and will not be 
  revoked by the Internet Society or its successors or assigns. 
   
  This document and the information contained herein is provided on an   
  "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING 
  TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING 
  BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION 
  HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF 
  MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. 
   
  14.  References 
   
  1.   Carlson, J., Langner, P., Hernandez-Valencia, E.J., Manchester, 
       J., PPP over Simple Data Link (SDL) using SONET/SDH with ATM-
       like framing, rfc2823.txt, May 2000. 
  2.   Doshi, B., Dravida, S., Hernandez-Valencia, E., Matragi, W., 
       Qureshi, M., Anderson, J., Manchester, J.,"A Simple Data Link 
       Protocol for High Speed Packet Networks", Bell Labs Technical 
       Journal, pp. 85-104, Vol.4 No.1, January-March 1999. 
  3.   Jha, P., A Hybrid Data Transport Protocol for Optical Networks, 
       IETF Draft (http://www.ietf.org), draft-jha-optical-hdt-01.txt, 
       November 2001 
  4.   Malis, A., Simpson, W., PPP over SONET/SDH, rfc2615, June 1999. 
  5.   Anderson, J., Manchester, J., Rodriguez-Moral, A., 
       Veeraraghavan, M.,"Protocols and Architectures for IP Optical 
       Networking", Bell Labs Technical Journal, pp. 105-124, Vol.4 
       No.1, January - March 1999. 
  6.   Generic Framing Procedure, Revision 4, ANSI, http://www.t1.org, 
       1x150244.pdf 
   
   
   

    
   
  Jha                       Expires April, 2002                 [Page 7] 
   
