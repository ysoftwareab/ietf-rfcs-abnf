



SPRING                                                        Quan Xiong
Internet-Draft                                               Greg Mirsky
Intended status: Standards Track                         ZTE Corporation
Expires: April 19, 2020                                   Weiqiang Cheng
                                                            China Mobile
                                                        October 17, 2019


          The Use of Path Segment in SR Inter-domain Scenarios
           draft-xiong-spring-path-segment-sr-inter-domain-01

Abstract

   This document discusses the inter-domain scenarios for SR-MPLS
   networks and proposes the solution with the use of path segments.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on April 19, 2020.

Copyright Notice

   Copyright (c) 2019 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.




Quan Xiong, et al.       Expires April 19, 2020                 [Page 1]

Internet-DrafThe Use of Path Segment in SR Inter-domain Sce October 2019


Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Conventions used in this document . . . . . . . . . . . . . .   3
     2.1.  Terminology . . . . . . . . . . . . . . . . . . . . . . .   3
     2.2.  Requirements Language . . . . . . . . . . . . . . . . . .   4
   3.  Path Segment for SR-MPLS Inter-domain . . . . . . . . . . . .   4
     3.1.  Inter-domain Path Segment . . . . . . . . . . . . . . . .   4
     3.2.  End-to-end Path Segment . . . . . . . . . . . . . . . . .   4
   4.  SR-MPLS Inter-domain Scenarios  . . . . . . . . . . . . . . .   5
     4.1.  Stitching Inter-domain with i-Path  . . . . . . . . . . .   5
     4.2.  Nesting Inter-domain with e-Path  . . . . . . . . . . . .   6
   5.  Security Considerations . . . . . . . . . . . . . . . . . . .   7
   6.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   7
   7.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   8
   8.  Normative References  . . . . . . . . . . . . . . . . . . . .   8
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   8

1.  Introduction

   Segment Routing (SR) leverages the source routing paradigm.  A node
   steers a packet through an SR Policy instantiated as an ordered list
   of instructions called "segments".  A segment can represent any
   instruction, topological or service based.  A segment can have a
   semantic local to an SR node or global within an SR domain.  SR
   supports per-flow explicit routing while maintaining per-flow state
   only at the ingress nodes of the SR domain.  Segment Routing can be
   instantiated on MPLS data plane which is referred to as SR-MPLS
   [I-D.ietf-spring-segment-routing-mpls].  SR-MPLS leverages the MPLS
   label stack to construct the SR path.

   [I-D.ietf-spring-mpls-path-segment] defines a path segment identifier
   to support bidirectional path correlation for transport network.  In
   the multi-domain scenarios, the SR bidirectional end-to-end tunnel
   MAY be established with the use of path segments.  The SR-MPLS inter-
   domain models include the stitching and nesting inter-domain models.
   Path segment MAY be used to indicate the inter-domain path or the
   end-to-end path and correlate the inter-domain paths or end-to-end
   unidirectional paths to achieve the path monitoring.

   As defined in [RFC8402], the headend of an SR Policy binds a Binding
   Segment ID(BSID) to its policy.  The BSID could be bound to a SID
   List or selected path and used to stitch the service across multiple
   domains.  For example, as discussed in Section 3
   [I-D.ietf-spring-mpls-path-segment], the BSID can be used to identify
   a sub-path and stitched them to an end-to-end SR path in the nesting
   model.  The BSID and path segment can be combined to achieve the
   inter-domain path monitoring.  But the solution is not appropriate



Quan Xiong, et al.       Expires April 19, 2020                 [Page 2]

Internet-DrafThe Use of Path Segment in SR Inter-domain Sce October 2019


   for the stitching model.  The policy MUST be instantiated before the
   end-to-end service and it can not deploy domains incrementally.
   Moreover, all of the BSIDs MUST be pushed onto the label stack at the
   headend but not all of them are popped at an edge nodes.  The edge
   node pops one BSID and bound it to a SID List.  That can not meet the
   independence requirement in the stitching model especially when the
   domains belong to different operators.

   This document discusses the inter-domain scenarios for SR-MPLS
   networks and proposes the solution with the use of path segments for
   end-to-end bidirectional SR path.

2.  Conventions used in this document

2.1.  Terminology

   ABR: Area Border Routers.  Routers used to connect two IGP areas
   (areas in OSPF or levels in IS-IS).

   A->B SID list: The SID List from SR node A to SR node B.

   AS: Autonomous System.  An Autonomous System is composed by one or
   more IGP areas.

   ASBR: Autonomous System Border Router.  A router used to connect
   together ASes of the same or different service providers via one or
   more inter-AS links.

   BSID: Binding Segment ID.

   Domains:Autonomous System (AS) or IGP Area.  An Autonomous System is
   composed by one or more IGP areas.

   e-Path: End-to-end Path Segment.

   s-Path: Sub-path Path Segment.

   Inter-Area: Two IGP areas interconnects with an ABR in an AS.

   Inter-AS: Two ASes interconnects with an ASBR.

   IGP: Interior Gateway Protocol.

   i-Path/i-PSID: Inter-domain Path Segment.

   SR: Segment Routing.

   SR-MPLS: Segment Routing with MPLS data plane.



Quan Xiong, et al.       Expires April 19, 2020                 [Page 3]

Internet-DrafThe Use of Path Segment in SR Inter-domain Sce October 2019


2.2.  Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in BCP
   14 [RFC2119] [RFC8174] when, and only when, they appear in all
   capitals, as shown here.

3.  Path Segment for SR-MPLS Inter-domain

3.1.  Inter-domain Path Segment

   In the stitching inter-domain model, the end-to-end SR path is split
   into multiple segments.  And each segment can be identified by an
   inter-domain path segment (i-Path or i-PSID).  The correlation of
   path segments can stitch the inter-domain paths and bind
   unidirectional paths.  The i-Paths are valid in the corresponding
   domain and the border nodes maintain the forwarding entries of that
   i-Path segment, which binding with the next i-Path and SID list.  At
   the headend node, the i-Path can correlate the inter-domain path of
   reverse direction and bind the two unidirectional paths.  The border
   nodes should install the following MPLS data entries for path
   segments:

     incoming label: i-Path
        outgoing label: the SID list of the next domain or link + next i-Path

   Taking Figure 1 as an example, the border node X installs the MPLS
   data entries:

        incoming label: i-Path(A->X)
           outgoing label: X->Y SID list + i-Path(X->Y)

   The i-Path can be a locally unique label and assigned from the
   Segment Routing Local Block (SRLB).  It is required that the
   controller(e.g., PCE) assigns the label to ensure the ingress and the
   egress node can recognize it and it also can be assigned from egress
   node of each domain.  PCEP based i-Path allocation and procedure is
   defined in [I-D.xiong-pce-stateful-pce-sr-inter-domain].

3.2.  End-to-end Path Segment

   The nesting inter-domain model is described in
   [I-D.ietf-spring-mpls-path-segment], an end-to-end path segment, also
   referred to as e-Path, is used to indicate the end-to-end path, and
   an s-Path is used to indicate the intra-domain path.  The e-Path is
   encapsulated at the ingress nodes and decapsulated at the egress
   nodes.  The transit nodes, even the border nodes of domains, are not



Quan Xiong, et al.       Expires April 19, 2020                 [Page 4]

Internet-DrafThe Use of Path Segment in SR Inter-domain Sce October 2019


   aware of the e-Path segment.  The s-Path can be used as stitching
   label to correlate the two domains.  The use of the binding SID
   [RFC8402] is also recommended to reduce the size of label stack
   section 4.2.

   The e-Path can be a globally unique or local label.  If the e-Path is
   globally unique, it MUST be assigned from the SRGB block of each
   domain.  If the e-Path is a local label, it is required that the
   controller(e.g., PCE) or a super controller (e.g., hierarchical PCE)
   assigns the label to ensure the ingress(A) and the egress node(Z) can
   recognize it and there is no SID collision in the ingress and egress
   domains.

4.  SR-MPLS Inter-domain Scenarios

   The domains of the networks may be IGP Areas or ASes and the inter-
   domain scenario may be inter-Area or inter-AS.  The multiple SR-MPLS
   domains may be interconnected with a ABR within areas or inter-link
   between ASes.  This document takes IGP Areas domains for example.
   SR-MPLS domains can be deployed as Figure 1 shown.


                  +                    +                    +
               +     +              +     +              +     +
            +           +         +          +         +          +
         +                 +    +              +    +                +
      A        SR-MPLS       X       SR-MPLS      Y       SR-MPLS      Z
         +      IGP 1      +    +     IGP 2    +    +      IGP 3     +
            +           +         +          +        +            +
               +     +              +     +              +      +
                  +                    +                     +

            Figure 1: SR-MPLS and MPLS-TP interworking Scenario

   Two SR-MPLS inter-domain models are discussed in this document
   including the stitching and nesting inter-domain model which are
   described in Section 4.1 and Section 4.2 respectively.

4.1.  Stitching Inter-domain with i-Path

   The Figure 1 displays the border node inter-domain scenario.  SR node
   X and SR node Y are the border nodes of two different domains.  The
   i-Paths from A->X, X->Y, and Y->Z are used for the inter-domain path
   segment.  The ingress SR node A encapsulates the data packet with
   i-Path (A->X) and A->X SID list.  The data packet is forwarded to SR
   node X according to the A->X SID list.  Node X pushes the i-Path
   (X->Y) and X->Y SID list based on the above mentioned forwarding
   entry.  The data packet is forwarded to node Y and then to the SR



Quan Xiong, et al.       Expires April 19, 2020                 [Page 5]

Internet-DrafThe Use of Path Segment in SR Inter-domain Sce October 2019


   node Z based on the same forwarding procedure.  In node Z, the i-Path
   (Y->Z) can be mapped to the path from Z to Y of reverse direction and
   correlates the two unidirectional paths.  The packet transmission of
   the reverse direction is the same with the forwarding direction with
   different i-Paths.  The stitching of path segments can achieve the
   inter-domain stitching and path monitoring


      ..................   .................   ....................
      .                .   .               .   .                  .
  +-----+             +-----+             +-----+              +-----+
  |  A  |             |  X  |             |  Y  |              |  Z  |
  +-----+             +-----+             +-----+              +-----+
      .  SR Domain 1   .   .  SR Domain 2  .   .   SR Domain 3    .
      ..................   .................   ....................

   |<------------------>|<------------------>|<--------------->|
        i-Path(A->X)         i-Path(X->Y)         i-Path(Y->Z)

    Node A               Node X             Node Y             Node Z
+-------------+     +-------------+     +-------------+
|A->X SID list|     |X->Y SID list|     |Y->Z SID list|
+-------------+     +-------------+     +-------------+    +--------------+
|i-Path(A->X) |---->|i-Path(X->Y) |---->|i-Path(Y->Z) |--->|   Payload    |
+-------------+     +-------------+     +-------------+    +--------------+
|  Payload    |     |   Payload   |     |  Payload    |
+-------------+     +-------------+     +-------------+



           Figure 2: Stitching Border Node Inter-Domain Scenario

4.2.  Nesting Inter-domain with e-Path

   Figure 3 shows the SR-MPLS nesting inter-domain scenario.  The
   e-Path(A->Z) is used to indicate the end-to-end path.  The s-Path is
   used to identify the domain's sub-path.  The e-Path, s-Path and SR
   list are pushed by the ingress node.  The e-Path is used to correlate
   the two unidirectional SR paths to an SR bidirectional path.  The
   s-Path can be used as stitching label to correlate the two inter-
   domain sub-paths.

   The use of the binding SID [RFC8402] is also recommended to replace
   the SR list of each domain.  As shown in Figure 3, the B-SID(X->Y) is
   used to replace the X->Y SID list.  Ingress node A pushes
   e-Path(A->Z), B-SID(Y->Z), B-SID(X-Y), s-Path(A->X) and A->X SID list
   in turn.  When the packet is received at node X, the s-Path(A-X) and
   X->Y SID list are popped, and the new s-Path(X->Y) is pushed.  Also,



Quan Xiong, et al.       Expires April 19, 2020                 [Page 6]

Internet-DrafThe Use of Path Segment in SR Inter-domain Sce October 2019


   X->Y SID list replaces B-SID(X->Y) to indicate that packet to be
   forwarded from node X to node Y.  The data packet reaches the SR node
   Z according to the same forwarding procedure.  In SR node Z, the
   e-Path (A->Z) is used to correlate the two unidirectional end-to-end
   paths.


      ..................   .................   ....................
      .                .   .               .   .                  .
  +-----+             +-----+             +-----+              +-----+
  |  A  |             |  X  |             |  Y  |              |  Z  |
  +-----+             +-----+             +-----+              +-----+
      .  SR Domain 1   .   .  SR Domain 2  .   .   SR Domain 3    .
      ..................   .................   ....................

    |<------------------>|<------------------>|<--------------->|
           s-Path(A->X)         s-Path(X->Y)       s-Path(Y->Z)
    |<--------------------------------------------------------->|
                           e-Path(A->Z)
    Node A
+-------------+
|A->X SID list|         Node X
+-------------+     +-------------+
|s-Path(A->X) |     |X->Y SID list|         Node Y
+-------------+     +-------------+     +-------------+
|B-SID(X->Y)  | --> |s-Path(X->Y) |     |Y->Z SID list|
+-------------+     +-------------+     +-------------+
|B-SID(Y->Z)  |     |B-SID(Y->Z)  | --> |s-Path(Y->Z) |        Node Z
+-------------+     +-------------+     +-------------+     +-------------+
|e-Path(A->Z) |     |e-Path(A->Z) |     |e-Path(A->Z) | --> |e-Path(A->Z) |
+-------------+     +-------------+     +-------------+     +-------------+
|  Payload    |     |   Payload   |     |  Payload    |     |  Payload    |
+-------------+     +-------------+     +-------------+     +-------------+


                  Figure 3: Nesting Inter-Domain Scenario

5.  Security Considerations

   TBA

6.  Acknowledgements

   TBA







Quan Xiong, et al.       Expires April 19, 2020                 [Page 7]

Internet-DrafThe Use of Path Segment in SR Inter-domain Sce October 2019


7.  IANA Considerations

   TBA

8.  Normative References

   [I-D.ietf-spring-mpls-path-segment]
              Cheng, W., Li, H., Chen, M., Gandhi, R., and R. Zigler,
              "Path Segment in MPLS Based Segment Routing Network",
              draft-ietf-spring-mpls-path-segment-01 (work in progress),
              September 2019.

   [I-D.ietf-spring-segment-routing-mpls]
              Bashandy, A., Filsfils, C., Previdi, S., Decraene, B.,
              Litkowski, S., and R. Shakir, "Segment Routing with MPLS
              data plane", draft-ietf-spring-segment-routing-mpls-22
              (work in progress), May 2019.

   [I-D.xiong-pce-stateful-pce-sr-inter-domain]
              Xiong, Q., hu, f., Mirsky, G., and W. Cheng, "Stateful PCE
              for SR-MPLS Inter-domain", draft-xiong-pce-stateful-pce-
              sr-inter-domain-01 (work in progress), July 2019.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC
              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,
              May 2017, <https://www.rfc-editor.org/info/rfc8174>.

   [RFC8402]  Filsfils, C., Ed., Previdi, S., Ed., Ginsberg, L.,
              Decraene, B., Litkowski, S., and R. Shakir, "Segment
              Routing Architecture", RFC 8402, DOI 10.17487/RFC8402,
              July 2018, <https://www.rfc-editor.org/info/rfc8402>.

Authors' Addresses

   Quan Xiong
   ZTE Corporation
   No.6 Huashi Park Rd
   Wuhan, Hubei  430223
   China

   Phone: +86 27 83531060
   Email: xiong.quan@zte.com.cn




Quan Xiong, et al.       Expires April 19, 2020                 [Page 8]

Internet-DrafThe Use of Path Segment in SR Inter-domain Sce October 2019


   Greg Mirsky
   ZTE Corporation
   USA

   Email: gregimirsky@gmail.com


   Weiqiang Cheng
   China Mobile
   Beijing
   China

   Email: chengweiqiang@chinamobile.com






































Quan Xiong, et al.       Expires April 19, 2020                 [Page 9]
