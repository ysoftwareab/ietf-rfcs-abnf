





Network Working Group                                   Jin Lizhong (ED)
Internet Draft                                                  Feng Jun
Expiration Date: Septembet 2007                          ZTE Corporation
                                                      
                                                              March 2007






                        Inter-AS Pseudo Wire Extention


                     draft-jin-pwe3-pw-inter-as-ext-00.txt

Status of this Memo

   By submitting this Internet-Draft, each author represents that any
   applicable patent or other IPR claims of which he or she is aware
   have been or will be disclosed, and any of which he or she becomes
   aware will be disclosed, in accordance with Section 6 of BCP 79.


   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups. Note that other
   groups may also distribute working documents as Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time. It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.


Abstract

   This document describes another way to set up a PW between two ASs 
   in the scenario of directly connected ASBR between the two ASs. 
   The Single-Segment PW or PW Segment of a MS-PW setup between two 
   directly connected ASBRs dose not need PSN tunnel, so as to provide
   a more simple way to set up inter-as PW. In the scenario described 


    
Jin, et al.                                                     [Page 1]

Internet Draft   draft-jin-pwe3-pw-inter-as-ext-00.txt        March 2007


   in this draft, MP-EBGP can also be used to signal the mapping of PW,
   then no other protocols are existed between the two ASBRs.
   
1. Specification of Requirements

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].
    
    
2. Introduction

   In many network topology, the ASBRs between two different ASs are 
   directly connected. The new way to set up inter-as PW described in 
   this draft bases on this scenario. Figure 1 shows the scenario. 
   
   In the MS-PW draft [I-D.draft-ietf-pwe3-segmented-pw-04] and [I-D.
   draft-ietf-pwe3-dynamic-ms-pw-02], if we want to set up a MS-PW 
   across two different AS, then a PSN tunnel is needed between the two
   ASs or ASBRs according [RFC4447], whatever the ASBRs are directly
   connected.
   
                           \ / 
                       AS1 | | AS2 
   ST-PE----S-PE1(ASBR1)---------S-PE2(ASBR2)----TT-PE 
                           | |
                           / \ 
                Figure 1: Inter-AS scenario
   
   The two S-PEs are at the same time ASBRs in Figure 1. ST-PE needs 
   to set up a MS-PW to TT-PE, then a segment PW between S-PE1 and 
   S-PE2 needs an PSN tunnel according the PW setup mechanism. An 
   inter-as MPLS tunnel is needed according [RFC4447], maybe it is 
   RSVP-TE tunnel or LDP tunnel. As we know, it is a little difficult
   to provide such a tunnel between two ASs, for the PE devices in the
   two ASs may not support the same type of inter-as tunnel. If the two
   S-PEs are not ASBRs or not directly connected, then an inter-as 
   tunnel is a MUST; but if they are also ASBRs and directly connected,
   then the inter-as tunnel is not needed. It is more simple of not 
   providing a PSN tunnel between the two ASBRs and no additional 
   requirements are needed for the ASBRs.
        
        
3. PW without PSN tunnel

   If a Single-Segment PW or PW Segment of a MS-PW is setup between 
   two directly connected ASBRs, then the PSN tunnel is not needed. 
   In the MPLS label based network, the ASBR received PW packets from 
 
      
   
Jin, et al.                                                     [Page 2]

Internet Draft   draft-jin-pwe3-pw-inter-as-ext-00.txt        March 2007


   intra-as MPLS tunnel, pops the external label if PHP is disabled or
   explicit label is used, switches the PW label with the one sent by 
   peer ASBR, then sends the packets to peer ASBR. The peer ASBR 
   switches the PW label with the one sent by peer PE, pushes the 
   external label if necessary, then sends the packets to the peer PE 
   through a new intra-as MPLS tunnel. PW packets switched between the
   two ASBRs will not have PSN tunnel label, only PW label is switched.
   But the packets switched in the same AS still need two-label stack 
   switching. The LDP Target session is still set up between the two 
   ASBRs using the same address with BGP.
   
   The method described above can be a complement for both [I-D.
   draft-ietf-pwe3-segmented-pw-04] and [I-D.draft-ietf-pwe3-dynamic-ms-
   pw-02].


4. MS-PW without LDP signaling between two ASBRs

   For the dynamic MS-PW described in [I-D.draft-ietf-pwe3-dynamic-ms-
   pw-02], MP-BGP is already used to exchanged the MS-PW path 
   information. In the above scenario, LDP Target session is still
   needed and exists between two ASBRs. This results LDP protocol
   enabled between the two ASBRs. We can use MP-EBGP to signal the
   mapping of PW instead of LDP session between the two ASBRs. A new
   type of NLRI with AFI and SAFI should be assigned by IANA. MP-EBGP
   UPDATA packet needs to contain the PWid FEC or Generalized PWid FEC
   element and Generic Label TLV, see figure 2. The PWid FEC/Generalized
   PWid FEC and Generic Label are encoded in NLRI. The encoding method
   is the same with that defined in [RFC3107]. The processing of
   reachable NLRI is the same with that of LDP mapping message that
   described in [RFC 4447], while processing of unreachable NLRI is the
   same with that of LDP withdraw message described in [RFC 4447]. 
   
         +---------------------------+ 
         |   Length (1 octet)        | 
         +---------------------------+ 
         |   Label (3 octets)        | 
         +---------------------------+ 
         |   PWid FEC (variable)     | 
         +---------------------------+ 
      Figure 2: Encoding of NRLI for PW
   
   In this case, there is only BGP Protocol existed between the two 
   ASBRs, LDP and other protocols are not needed. Then a very clear 
   protocol border exists between the two ASs. In this draft, using of
   MP-EBGP to signal the mapping of dynamic Multi-Segment PW is 
   suggested, since MP-BGP has now been used to exchange MS-PW path 
   information.
   
   
   
Jin, et al.                                                     [Page 3]

Internet Draft   draft-jin-pwe3-pw-inter-as-ext-00.txt        March 2007

   
   The method described above can be a complement for [I-D.
   draft-ietf-pwe3-dynamic-ms-pw-02].


6. Applicability

   In the scenario of setting up a PW between two different ASs, and 
   the two ASs support different kind of PSN tunnel, or Service 
   Provider does not want to enable any PSN tunnel between two ASs or
   ASBRs, then a MS-PW can be set up with one PW Segment between two 
   ASBRs that are directly connected. PSN tunnel between the two ASBRs
   is not needed. 
   
   In the scenario that the Service Provider neither wants to 
   distribute any loopback address to other AS, nor enable any other 
   protocols except BGP between the two ASBRs, so as to ensure a clear 
   border between two ASs, then MP-EBGP can be used to signal the 
   mapping of PW and exchange MS-PW path information.
        
        
7. QoS considerations

   When the label is switched between the two ASBRs, the processing 
   method of EXP is the same with before.
    
    
8. Intellectual Property Statement

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in BCP 78 and BCP 79.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   http://www.ietf.org/ipr.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at ietf-



Jin, et al.                                                     [Page 4]

Internet Draft   draft-jin-pwe3-pw-inter-as-ext-00.txt        March 2007


   ipr@ietf.org.    
    
9. Full Copyright Statement

   Copyright (C) The IETF Trust (2007).

   This document is subject to the rights, licenses and restrictions
   contained in BCP 78, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND
   THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS
   OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF
   THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

10. Acknowledgments

   The authors wish to acknowledge the contributions of the authors 
   [RFC 4447], [I-D.draft-ietf-pwe3-segmented-pw-04] and [I-D.draft-ietf
   -pwe3-dynamic-ms-pw-02].


11. Normative References

   [RFC3107] "Carrying Label Information in BGP-4", Y. Rekhter., et al.,
            rfc 3107 May 2001
            
   [RFC4447] "Pseudowire Setup and Maintenance Using the Label 
            Distribution Protocol (LDP)", Martini, L., et al., rfc4447
            April 2006.
    
12. Informative References

   [I-D.draft-ietf-pwe3-segmented-pw-04] Martini et.al. "Segmented 
            Pseudo Wire", draft-ietf-pwe3-segmented-pw-04.txt, IETF Work
            in Progress, February 2007

   [I-D.draft-ietf-pwe3-dynamic-ms-pw-02] Martini et.al. "Dynamic 
            Placement of Multi Segment Pseudo Wires", draft-ietf-pwe3-
            dynamic-ms-pw-02.txt, IETF Work in Progress, October 2006
    
13. Author Information






Jin, et al.                                                     [Page 5]

Internet Draft   draft-jin-pwe3-pw-inter-as-ext-00.txt        March 2007


   Jin Lizhong
   ZTE Corporation
   No.68 Zijinghua Rd,Yuhuatai District,
   Nanjing. P.R.China.
   e-mail: jin.lizhong@zte.com.cn

   Feng Jun
   ZTE Corporation
   No.68 Zijinghua Rd,Yuhuatai District,
   Nanjing. P.R.China.
   e-mail: feng.jun99@zte.com.cn

   Liu Kebo
   ZTE Corporation
   No.68 Zijinghua Rd,Yuhuatai District,
   Nanjing. P.R.China.
   e-mail: liu.kebo@zte.com.cn

   Hu Kan
   ZTE Corporation
   No.68 Zijinghua Rd,Yuhuatai District,
   Nanjing. P.R.China.
   e-mail: hu.kan@zte.com.cn

   Wang Liangjun
   ZTE Corporation
   No.68 Zijinghua Rd,Yuhuatai District,
   Nanjing. P.R.China.
   e-mail: wang.liangjun@zte.com.cn






















Jin, et al.                                                     [Page 6]

Internet Draft   draft-jin-pwe3-pw-inter-as-ext-00.txt        March 2007