
   Internet Engineering Task Force                  Flemming Andreasen 
   MMUSIC Working Group                                     David Oran 
   INTERNET-DRAFT                                             Dan Wing 
   Expires: August 2004                                  Cisco Systems 
                                                        February, 2004 
    
                       RTP No-Op Payload Format  
                   <draft-wing-avt-rtp-noop-00.txt> 
 
 
Status of this memo 
    
   This document is an Internet-Draft and is in full conformance with 
   all provisions of Section 10 of RFC2026. 
    
   Internet-Drafts are working documents of the Internet Engineering 
   Task Force (IETF), its areas, and its working groups. Note that 
   other groups may also distribute working documents as Internet-
   Drafts. 
    
   Internet-Drafts are draft documents valid for a maximum of six 
   months and may be updated, replaced, or obsoleted by other documents 
   at any time. It is inappropriate to use Internet-Drafts as reference 
   material or cite them other than as "work in progress". 
    
   The list of current Internet-Drafts can be accessed at 
   http://www.ietf.org/ietf/lid-abstracts.txt 
    
   The list of Internet-Draft Shadow Directories can be accessed at 
   http://www.ietf.org/shadow.html 
    
Copyright Notice 
    
   Copyright (C) The Internet Society (2004).  All Rights Reserved. 
    
Abstract 
    
   This document defines an no-op payload format for the Real-time 
   Transport Protocol (RTP), and a mechanism to request an immediate 
   RTCP report.  This can be used to verify RTP connectivity and to 
   keep Network Address Translator (NAT) bindings and Firewall pinholes 
   open.  
    
 
 
INTERNET-DRAFT             RTP No-Op Payload            February 2004 
 
 
   TABLE OF CONTENTS 
    
1.   Introduction.....................................................2 
1.1 Notational Conventions............................................2 
2. RTP Payload Format for No-Op.......................................3 
2.2 Registration......................................................3 
2.3 Use of RTP Header Fields..........................................3 
2.4 Payload Format....................................................3 
2.5 Sender Operation..................................................4 
2.6 Mixer, Translator Operation.......................................4 
2.7 Receiver Operation................................................4 
2.8 Indication of No-OP Capability using SDP..........................5 
3. MIME Registration..................................................5 
3.1. audio/no-op......................................................5 
4. Security Considerations............................................6 
5. Acknowledgements...................................................6 
6. Authors' Addresses.................................................6 
7. Normative References...............................................6 
8. Informative References.............................................6 
Intellectual Property Statement.......................................7 
Full Copyright Statement..............................................7 
Acknowledgement.......................................................8 
      
1. Introduction 
    
   This memo defines a new RTP payload format called "no-op".  This 
   payload behaves like a normal RTP payload, except that it isn't 
   played by the receiver. 
    
   This new payload format is useful for: 
    
     *  bearer continuity testing, such as at the beginning of a call; 
    
     *  keepalives to keep NAT bindings open when RTP media traffic is 
        not otherwise being transmitted; 
      
   For testing the RTP path, an RTP sender may transmit several No-Op 
   payload packets with the Request Immediate RTCP bit set to 0, 
   followed by one No-Op payload packet with the Request Immediate RTCP 
   bit set to 1.  This would cause the RTP receiver to send an RTCP 
   report indicating the quality of the RTP path.  The RTP sender could 
   then decide to continue with call setup, abort the session, or 
   perform some other action. 
    
1.1 Notational Conventions 
    
   The key words "MUST", "MUST NOT", "REQUIRED", "MUST", "MUST NOT", 
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this 
   document are to be interpreted as described in [RFC2119].   
    
 
 
 
Andreasen, Oran, Wing                                         [Page 2] 
INTERNET-DRAFT             RTP No-Op Payload            February 2004 
 
 
2. RTP Payload Format for No-Op 
    
   The no-op payload format is carried as part of the RTP stream, and 
   MUST use the same sequence number space, SSRC, and timestamp base as 
   the regular media.  
    
2.2 Registration 
    
   The RTP payload format is designated as "no-op" and the MIME type as 
   "audio/no-op".  The default clock rate is 8000 Hz, but other rates 
   MAY be used.  In accordance with current practice, this payload 
   format does not have a static payload type number, but uses a RTP 
   payload type number established dynamically and out-of-band. 
    
2.3 Use of RTP Header Fields 
    
        Timestamp:  The RTP timestamp reflects the measurement point 
                    for the current packet. The receiver calculates 
                    jitter for RTCP receiver reports based on all 
                    packets with a given timestamp. Note: The jitter 
                    value should primarily be used as a means for 
                    comparing the reception quality between two users 
                    or two time-periods, not as an absolute measure. 
    
       Marker bit: The RTP marker bit has no special significance for 
                    this payload type. 
    
2.4 Payload Format 
    
   The payload format is shown in Figure 1. 
    
       0                   1                   2                   3 
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
      |R|                         reserved                            | 
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
      |                      padding (OPTIONAL)                       | 
      |                             ....                              | 
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+ 
    
   The payload contains at least 4 bytes.  The first 32 bits are 
   defined as follows: 
    
     bit 0:      "R", "Request immediate RTCP", is used to request 
                 transmission of an immediate RTCP report (see section 
                 2.7). 
      
     bits 1-31:  Reserved, and all bits MUST be 0. 
    
   Additional padding bytes MAY be appended up to the negotiated ptime 
   value in SDP (see section 2.6).  These bytes MUST contain all 0 
 
 
 
Andreasen, Oran, Wing                                         [Page 3] 
INTERNET-DRAFT             RTP No-Op Payload            February 2004 
 
 
   bits.  Padding may be useful to generate RTP packets that are the 
   same size as another payload (such as a normal voice payload). 
    
2.5 Sender Operation 
    
   A source MAY send normal RTP audio and the no-op payload format for 
   the same time instants (but with different sequence numbers of 
   course).  This might be done in conjunction with this payload 
   format's "Request Immediate RTCP" opcode. 
    
2.6 Mixer, Translator Operation 
    
   An RTP mixer or unicast-to-unicast RTP translator SHOULD forward RTP 
   No-Op payload packets normally.  A unicast-to-multicast RTP 
   translator SHOULD replicate RTP No-Op payload packets normally. 
 
   A multicast-to-unicast RTP translator SHOULD NOT replicate an RTP 
   No-Op packet with the Request Immediate RTCP bit set, because the 
   receivers won't be able to prevent flooding of the multicast RTP 
   sender. 
    
2.7 Receiver Operation 
    
   Upon receipt of an RTP packet with the No-Op payload format and the 
   Send Immediate RTCP Report bit set to 0, the receiver performs 
   normal RTP receive operations on it -- incrementing the RTP receive 
   counter, calculating jitter, and so on.  The receiver then discards 
   the packet -- it is not used to play out data.   
    
   Upon receipt of an RTP packet with the No-Op payload format and the 
   Send Immediate RTCP Report bit set to 1, the receiver performs the 
   steps above and: 
    
     *  if listening on a multicast IP address, the receiver MUST not 
        send an immediate RTCP report, and the receiver MUST follow the 
        normal RTCP transmission rules [RFC3550, sections 6.2 and 6.3]. 
    
     * if listening on a unicast IP address and sending RTP traffic, 
       the receiver prepares to send an RTCP sender report, and 
        
     * if listening on a unicast IP address and receiving RTP traffic, 
       the receiver prepares to send an RTCP receiver report. 
      
   In all cases, before actually sending its RTCP report, the RTCP 
   bandwidth limits and randomization interval MUST be observed 
   [RFC3550, sections 6.2 and 6.3], most especially when multiple SSRCs 
   are in the same session. 
    
 
 
 
Andreasen, Oran, Wing                                         [Page 4] 
INTERNET-DRAFT             RTP No-Op Payload            February 2004 
 
 
2.8 Indication of No-OP Capability using SDP 
    
   Senders and receivers may indicate support for the No-Op payload 
   format, for example, by using the Session Description Protocol 
   ([SDP]). 
    
   If successful completion of RTP No-Op is required before completing 
   call establishment -- such as to verify the existence or quality of 
   the bearer path -- No-Op preconditions can be used [Andreasen]. 
    
   The default packetization interval for this payload type is 20ms 
   (ptime:20) but alternate values can be advertised in SDP using the 
   ptime attribute value [SDP]. 
    
3. MIME Registration 
    
3.1. audio/no-op 
    
         MIME media type name: audio 
    
         MIME subtype name: no-op 
    
         Required parameters: none 
 
         Optional parameters: none 
    
         Encoding considerations: This type is only defined for 
              transfer via RTP [1]. 
    
         Security considerations: See the "Security Considerations" 
              section in this document. 
    
         Interoperability considerations: none 
    
         Published specification: This document. 
    
         Applications which use this media: The "no-op" audio subtype 
               is used to maintain network state or verify network 
               connectivity, when a more traditional RTP payload type 
               cannot be used. 
 
         Additional information: 
    
              1. Magic number(s): N/A 
    
              2. File extension(s): N/A 
    
              3. Macintosh file type code: N/A 
    
 
 
 
Andreasen, Oran, Wing                                         [Page 5] 
INTERNET-DRAFT             RTP No-Op Payload            February 2004 
 
 
4. Security Considerations 
 
   Without security of the RTP stream (via SRTP [SRTP], IPsec, or other 
   means), it is possible for an attacker to spoof RTP packets, 
   including this new packet type.  As this new RTP payload type 
   includes a method to request immediate transmission of RTCP, this 
   could be used to cause endpoints to flood the network with RTCP 
   reports.  Thus, the RTCP transmissions MUST NOT exceed the bandwidth 
   recommendations described in section 6.3 of [RFC3550]. 
    
5. Acknowledgements 
    
   Thanks to Henning Schulzrinne for suggesting using RTCP as a 
   feedback mechanism. 
    
6. Authors' Addresses 
    
   Flemming Andreasen 
   Cisco Systems, Inc. 
   499 Thornall Street, 8th Floor 
   Edison, NJ 08837  USA 
    
   EMail: fandreas@cisco.com 
    
    
   David Oran 
   Cisco Systems, Inc. 
   7 Ladyslipper Lane 
   Acton, MA 01720  USA 
    
   EMail: oran@cisco.com 
 
 
   Dan Wing 
   Cisco Systems, Inc. 
   170 West Tasman Drive 
   San Jose, CA 95134  USA 
    
   EMail: dwing@cisco.com 
 
 
7. Normative References 
     
   [RFC3550] H. Schulzrinne, S. Casner, R. Frederick, V. Jacobson, 
   "RTP: A Transport Protocol for Real-Time Applications", 
   http://www.ietf.org/rfc/rfc3550.txt.  
    
8. Informative References 
    
   [Andreasen] F. Andreasen, "No-Op Preconditions", Work In Progress. 
    
 
 
 
Andreasen, Oran, Wing                                         [Page 6] 
INTERNET-DRAFT             RTP No-Op Payload            February 2004 
 
 
   [RFC3407] F. Andreasen, "Session Description Protocol (SDP) Simple 
   Capability Declaration", October 2002, 
   http://www.ietf.org/rfc/rfc3407.txt 
    
   [SDP] M. Handley and V. Jacobson, "SDP: Session Description 
   Protocol", April 1998, http://www.ietf.org/rfc/rfc2327.txt. 
 
Intellectual Property Statement 
    
   The IETF takes no position regarding the validity or scope of any 
   intellectual property or other rights that might be claimed to  
   pertain to the implementation or use of the technology described in 
   this document or the extent to which any license under such rights 
   might or might not be available; neither does it represent that it 
   has made any effort to identify any such rights.  Information on the 
   IETF's procedures with respect to rights in standards-track and 
   standards-related documentation can be found in BCP-11.  Copies of 
   claims of rights made available for publication and any assurances 
   of licenses to be made available, or the result of an attempt made 
   to obtain a general license or permission for the use of such 
   proprietary rights by implementors or users of this specification 
   can be obtained from the IETF Secretariat. 
    
   The IETF invites any interested party to bring to its attention any 
   copyrights, patents or patent applications, or other proprietary 
   rights which may cover technology that may be required to practice 
   this standard.  Please address the information to the IETF Executive 
   Director. 
    
Full Copyright Statement 
    
   Copyright(C) The Internet Society 2004.  All Rights Reserved. 
    
   This document and translations of it may be copied and furnished to 
   others, and derivative works that comment on or otherwise explain it 
   or assist in its implementation may be prepared, copied, published 
   and distributed, in whole or in part, without restriction of any 
   kind, provided that the above copyright notice and this paragraph 
   are included on all such copies and derivative works.  However, this 
   document itself may not be modified in any way, such as by removing 
   the copyright notice or references to the Internet Society or other 
   Internet organizations, except as needed for the purpose of 
   developing Internet standards in which case the procedures for 
   copyrights defined in the Internet Standards process must be 
   followed, or as required to translate it into languages other than 
   English.   
    
   The limited permissions granted above are perpetual and will not be 
   revoked by the Internet Society or its successors or assigns. 
    
 
 
 
Andreasen, Oran, Wing                                         [Page 7] 
INTERNET-DRAFT             RTP No-Op Payload            February 2004 
 
 
   This document and the information contained herein is provided on an 
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING 
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING 
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION 
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF 
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. 
    
Acknowledgement 
    
   Funding for the RFC Editor function is currently provided by the 
   Internet Society. 
    
 
 
 
Andreasen, Oran, Wing                                         [Page 8] 
