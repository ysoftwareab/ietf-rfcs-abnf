<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>DS-Lite Intra-Domain Automatic Tunnel </title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Requirements Language">
<link href="#rfc.section.3" rel="Chapter" title="3 Terminology">
<link href="#rfc.section.4" rel="Chapter" title="4 Configuration">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 CPE Configuration">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 CGN Configuration">
<link href="#rfc.section.5" rel="Chapter" title="5 Algorithmic Mapping Rules">
<link href="#rfc.section.5.1" rel="Chapter" title="5.1 From a CPE tunnel address to a Domain IPv6 prefix">
<link href="#rfc.section.5.2" rel="Chapter" title="5.2 From a CPE tunnel address to a Domain IPv4 prefix">
<link href="#rfc.section.5.3" rel="Chapter" title="5.3 From a CPE tunnel address to a CPE IPv4 prefix">
<link href="#rfc.section.5.4" rel="Chapter" title="5.4 From an IPv4 address to a CPE tunnel address">
<link href="#rfc.section.6" rel="Chapter" title="6 CPE and CGN behaviors">
<link href="#rfc.section.6.1" rel="Chapter" title="6.1 CPE reception of an IPv4 packet">
<link href="#rfc.section.6.2" rel="Chapter" title="6.2 CPE reception of an IPv6 packet">
<link href="#rfc.section.6.3" rel="Chapter" title="6.3 CGN reception of an IPv4 packet">
<link href="#rfc.section.6.4" rel="Chapter" title="6.4 CGN reception of an IPv6 packet">
<link href="#rfc.section.7" rel="Chapter" title="7 Security Considerations">
<link href="#rfc.section.8" rel="Chapter" title="8 IANA Considerations">
<link href="#rfc.references" rel="Chapter" title="9 References">
<link href="#rfc.references.1" rel="Chapter" title="9.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="9.2 Informative References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="This document specifies an automatic tunneling mechanism for providing IPv4 connectivity service to IPv6 end users in the same DS-Lite domain. Key aspects include stateless operation and algorithmic mapping between IPv4 addresses and IPv6 tunnel endpoints.  " />
  <meta name="description" content="This document specifies an automatic tunneling mechanism for providing IPv4 connectivity service to IPv6 end users in the same DS-Lite domain. Key aspects include stateless operation and algorithmic mapping between IPv4 addresses and IPv6 tunnel endpoints.  " />
  <meta name="keywords" content="" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">softwire</td>
<td class="right">Z. Li</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">China Mobile</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">Q. Zhao</td>
</tr>
<tr>
<td class="left">Expires: April 26, 2012</td>
<td class="right">X. Huang</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Y. Ma</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Beijing University of Posts and Telecommunications</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">October 24, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">DS-Lite Intra-Domain Automatic Tunnel <br />
  <span class="filename">draft-li-softwire-dslite-intra-domain-00</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This document specifies an automatic tunneling mechanism for providing IPv4 connectivity service to IPv6 end users in the same DS-Lite domain. Key aspects include stateless operation and algorithmic mapping between IPv4 addresses and IPv6 tunnel endpoints.  </p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on April 26, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Requirements Language</a>
</li>
<li>3.   <a href="#rfc.section.3">Terminology</a>
</li>
<li>4.   <a href="#rfc.section.4">Configuration</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">CPE Configuration</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">CGN Configuration</a>
</li>
<li>5.   <a href="#rfc.section.5">Algorithmic Mapping Rules</a>
</li>
<li>5.1.   <a href="#rfc.section.5.1">From a CPE tunnel address to a Domain IPv6 prefix</a>
</li>
<li>5.2.   <a href="#rfc.section.5.2">From a CPE tunnel address to a Domain IPv4 prefix</a>
</li>
<li>5.3.   <a href="#rfc.section.5.3">From a CPE tunnel address to a CPE IPv4 prefix</a>
</li>
<li>5.4.   <a href="#rfc.section.5.4">From an IPv4 address to a CPE tunnel address</a>
</li>
<li>6.   <a href="#rfc.section.6">CPE and CGN behaviors</a>
</li>
<li>6.1.   <a href="#rfc.section.6.1">CPE reception of an IPv4 packet</a>
</li>
<li>6.2.   <a href="#rfc.section.6.2">CPE reception of an IPv6 packet</a>
</li>
<li>6.3.   <a href="#rfc.section.6.3">CGN reception of an IPv4 packet</a>
</li>
<li>6.4.   <a href="#rfc.section.6.4">CGN reception of an IPv6 packet</a>
</li>
<li>7.   <a href="#rfc.section.7">Security Considerations</a>
</li>
<li>8.   <a href="#rfc.section.8">IANA Considerations</a>
</li>
<li>9.   <a href="#rfc.references">References</a>
</li>
<li>9.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>9.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> <a href="#intro" id="intro">Introduction</a>
</h1>
<p id="rfc.section.1.p.1">DS-Lite <a href="#RFC6333">[RFC6333]</a> technology is used to deploy IPv6 following IPv4 exhaustion in service provider networks. It enables a broadband service provider to share IPv4 addresses among customers by combining IPv4-in-IPv6 tunnel and NAT44 translation.  </p>
<p id="rfc.section.1.p.2">From the view of network topology, DS-Lite is a good solution to "Hubs and Spokes" problem <a href="#RFC4925">[RFC4925]</a> since all the IPv4 traffic from B4 will be concentrated at AFTR even if all the IPv4 traffic are between two adjacent B4 devices. But, there are huge IPv4 traffic demands among end users. Many applications such as Instant Messenger are providing directly end-to-end highspeed transport when they find corresponding users are adjacent, instead of relaying the traffic by remote server.  </p>
<p id="rfc.section.1.p.3">Current DS-Lite technology concentrates all end users' IPv4 traffic in IPv4-in-IPv6 tunnels at AFTR and AFTR relays IPv4 traffic among different tunnels. It delays packet delivery among adjacent users, aggravates additional workload on AFTR or CGN and involves redundant forwarding path.  </p>
<p id="rfc.section.1.p.4">This document introduces the concept of domain to DS-Lite technology. A DS-Lite domain consists of many home gateways or CPEs with B4 function and one CGN with AFTR function. IPv4 packets encapsulated by DS-Lite follow the IPv6 routing topology within the SP network between CPEs or between CPE and CGN. From the view of network topology, CPE-to-CPE IPv4 traffic in an IPv6 domain is a "Mesh" problem <a href="#RFC4925">[RFC4925]</a>. This document introduces intra-domain automatic tunnel technology to solve it.  </p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> Requirements Language</h1>
<p id="rfc.section.2.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">[RFC2119]</a>.  </p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> Terminology</h1>
<p id="rfc.section.3.p.1">DS-Lite domain (Domain): A set of DS-Lite CPEs and CGN connected to the same virtual DS-Lite link. An SP may deploy DS-Lite within a single DS-Lite domain or across multiple DS-Lite domains.  </p>
<p id="rfc.section.3.p.2">DS-Lite CPE (CPE): The home gateway with B4 function.  </p>
<p id="rfc.section.3.p.3">DS-Lite CGN (CGN): The tunnel concentrate points with AFTR funtion.  </p>
<p id="rfc.section.3.p.4">CPE IPv4 prefix: The IPv4 prefix of the CPE. It is derived from the CPE tunnel address. CPE IPv4 prefix is the subset of Domain IPv4 prefix and can be assigned to LAN side.  </p>
<p id="rfc.section.3.p.5">CPE tunnel address: The IPv6 address on the B4 interface of CPE. It is combined by Domain IPv6 prefix and CPE IPv4 prefix.  </p>
<p id="rfc.section.3.p.6">CGN tunnel address: The IPv6 address on the AFTR interface of CGN. It may be any global IPv6 address.  </p>
<p id="rfc.section.3.p.7">Domain IPv4 prefix: A part of or all of IPv4 private address space shared among different service providers. It is non-overlapping in a DS-Lite Domain.  </p>
<p id="rfc.section.3.p.8">Domain IPv6 prefix: A part of global IPv6 address space. It differs among different DS-Lite Domains and keeps the same within a DS-Lite Domain.  </p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> Configuration</h1>
<p id="rfc.section.4.p.1">For a given DS-Lite domain, the CPE and CGN MUST be configured with a set of mapping rules and tunnel addresses. The configuration MUST be consistent for all CPEs and CGN within a given DS-Lite domain.  </p>
<p id="rfc.section.4.p.2">A mapping rules consists of the following elements: a CPE tunnel address, a Domain IPv6 prefix length, a Domain IPv4 prefix length, a CPE IPv4 prefix length. See section 5 for detailed description of mapping rules.  </p>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> CPE Configuration</h1>
<p id="rfc.section.4.1.p.1">The CPE can obtain necessary parameters via DHCPv6  <a href="#RFC3315">[RFC3315]</a> protocols with new options. Generally, CPE needs an independent IPv6 address via DHCPv6 to access native IPv6 Internet. Besides, CPE needs mapping rules and CGN tunnel address from DHCPv6 options to access IPv4 Internet. Also, these parameters can be manually configured on CPE.  </p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> CGN Configuration</h1>
<p id="rfc.section.4.2.p.1">The CGN should be configured with CGN tunnel address at least.  </p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> Algorithmic Mapping Rules</h1>
<h1 id="rfc.section.5.1">
<a href="#rfc.section.5.1">5.1.</a> From a CPE tunnel address to a Domain IPv6 prefix</h1>
<p id="rfc.section.5.1.p.1">When a mapping rule is received, CPE will extract necessary parameters from it. Domain IPv6 prefix is calculated by CPE tunnel address and Domain IPv6 prefix length.  </p>
<div id="#rfc.figure.1"></div>
<div id="#Fig1"></div>
<pre>
&lt;----------------     CPE tunnel address (128)     ----------------&gt;
+------------------------------+--------------------+--------+-----+
|      Domain IPv6 Prefix      | Domain IPv4 Prefix | CPE ID |  0  |
+------------------------------+--------------------+--------+-----+
&lt;- Domain IPv6 Prefix length -&gt;
            </pre>
<h1 id="rfc.section.5.2">
<a href="#rfc.section.5.2">5.2.</a> From a CPE tunnel address to a Domain IPv4 prefix</h1>
<p id="rfc.section.5.2.p.1">When a mapping rule is received, CPE will extract necessary parameters from it. Domain IPv4 prefix is calculated by CPE tunnel address and Domain IPv4 prefix length.  </p>
<div id="#rfc.figure.2"></div>
<div id="#Fig2"></div>
<pre>
&lt;----------------     CPE tunnel address (128)     ----------------&gt;
+--------------------+------------------------------+--------+-----+
| Domain IPv6 Prefix |      Domain IPv4 Prefix      | CPE ID |  0  |
+--------------------+------------------------------+--------+-----+
                     &lt;- Domain IPv4 Prefix length -&gt;
            </pre>
<h1 id="rfc.section.5.3">
<a href="#rfc.section.5.3">5.3.</a> From a CPE tunnel address to a CPE IPv4 prefix</h1>
<p id="rfc.section.5.3.p.1">When a mapping rule is received, CPE will extract necessary parameters from it. CPE IPv4 prefix is calculated by CPE tunnel address and CPE IPv4 prefix length.  </p>
<div id="#rfc.figure.3"></div>
<div id="#Fig3"></div>
<pre>
&lt;----------------     CPE tunnel address (128)     ----------------&gt;
+------------------------+------------------------+----------+-----+
|   Domain IPv6 Prefix   |   Domain IPv4 Prefix   |  CPE ID  |  0  |
+------------------------+------------------------+----------+-----+
                         &lt;-     CPE IPv4 Prefix length     -&gt;
            </pre>
<h1 id="rfc.section.5.4">
<a href="#rfc.section.5.4">5.4.</a> From an IPv4 address to a CPE tunnel address</h1>
<p id="rfc.section.5.4.p.1">When a packet destined for hosts intra-domain is received, the destination IPv4 address will be mapped to the CPE tunnel address of destination host. The Domain IPv6 Prefix has been calculated out from mapping rule during initialization. The CPE IPv4 Prefix length keeps the same in a DS-Lite domain. The CPE IPv4 Prefix can be calculated by destination IPv4 address and CPE IPv4 Prefix length.  </p>
<div id="#rfc.figure.4"></div>
<div id="#Fig4"></div>
<pre>
                         &lt;-     CPE IPv4 Prefix length     -&gt;
+------------------------+-----------------------------------+-----+
|   Domain IPv6 Prefix   |          CPE IPv4 Prefix          |  0  |
+------------------------+-----------------------------------+-----+
&lt;----------------     CPE tunnel address (128)     ----------------&gt;
            </pre>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> CPE and CGN behaviors</h1>
<h1 id="rfc.section.6.1">
<a href="#rfc.section.6.1">6.1.</a> CPE reception of an IPv4 packet</h1>
<p id="rfc.section.6.1.p.1">Step 1: </p>
<p id="rfc.section.6.1.p.2">CPE calculates destination CPE IPv4 prefix by CPE IPv4 Prefix length and the IPv4 destination address in the received IPv4 packet. Then CPE compares it with the Domain IPv4 prefix.</p>
<p id="rfc.section.6.1.p.3">If the destination CPE IPv4 prefix is a part of Domain IPv4 prefix, the IPv4 packet will be encapsulated in intra-domain automatic IPv4-in-IPv6 tunnel. The source IPv6 address is source CPE tunnel address and the destination IPv6 address is calculated as descibed in section 5.4. An automatic tunnel will be established between source CPE and destination CPE bypassing CGN.</p>
<p id="rfc.section.6.1.p.4">If the destination CPE IPv4 prefix is out of Domain IPv4 prefix, CPE proceeds to step2.</p>
<p id="rfc.section.6.1.p.5">Step 2: </p>
<p id="rfc.section.6.1.p.6">The IPv4 packet will be encapsulated in primitive DS-Lite IPv4-in-IPv6 tunnel. The source IPv6 address is source CPE tunnel address and the destination IPv6 address is the CGN tunnel address.</p>
<h1 id="rfc.section.6.2">
<a href="#rfc.section.6.2">6.2.</a> CPE reception of an IPv6 packet</h1>
<p id="rfc.section.6.2.p.1">Step 1: </p>
<p id="rfc.section.6.2.p.2">CPE decapsulates the IPv6 packet and forwards the IPv4 packets to destination host.</p>
<h1 id="rfc.section.6.3">
<a href="#rfc.section.6.3">6.3.</a> CGN reception of an IPv4 packet</h1>
<p id="rfc.section.6.3.p.1">The same with existing AFTR mechanisms.</p>
<h1 id="rfc.section.6.4">
<a href="#rfc.section.6.4">6.4.</a> CGN reception of an IPv6 packet</h1>
<p id="rfc.section.6.4.p.1">The same with existing AFTR mechanisms.</p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#security" id="security">Security Considerations</a>
</h1>
<p id="rfc.section.7.p.1">TBD.  </p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> IANA Considerations</h1>
<p id="rfc.section.8.p.1">This document makes no request of IANA.  </p>
<p id="rfc.section.8.p.2">Note to RFC Editor: this section may be removed on publication as an RFC.  </p>
<h1 id="rfc.references">
<a href="#rfc.references">9.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">9.1.</a> Normative References</h1>
<table><tbody><tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr></tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">9.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC6333">[RFC6333]</b></td>
<td class="top">
<a>Durand, A.</a>, <a>Droms, R.</a>, <a>Woodyatt, J.</a> and <a>Y. Lee</a>, "<a href="http://tools.ietf.org/html/rfc6333">Dual-Stack Lite Broadband Deployments Following IPv4 Exhaustion</a>", RFC 6333, August 2011.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4925">[RFC4925]</b></td>
<td class="top">
<a>Li, X.</a>, <a>Dawkins, S.</a>, <a>Ward, D.</a> and <a>A. Durand</a>, "<a href="http://tools.ietf.org/html/rfc4925">Softwire Problem Statement</a>", RFC 4925, July 2007.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3315">[RFC3315]</b></td>
<td class="top">
<a>Droms, R.</a>, <a>Bound, J.</a>, <a>Volz, B.</a>, <a>Lemon, T.</a>, <a>Perkins, C.</a> and <a>M. Carney</a>, "<a href="http://tools.ietf.org/html/rfc3315">Dynamic Host Configuration Protocol for IPv6 (DHCPv6)</a>", RFC 3315, July 2003.</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Zhenqiang Li</span> 
	  <span class="n hidden">
		<span class="family-name">Li</span>
	  </span>
	</span>
	<span class="org vcardline">China Mobile</span>
	<span class="adr">
	  <span>Unit2, Dacheng Plaza, No. 28 Xuanwumenxi Ave, Xicheng District </span>

	  <span class="vcardline">
		<span class="locality">Beijing</span>,  
		<span class="region"></span>
		<span class="code">100053</span>
	  </span>
	  <span class="country-name vcardline">P.R. China</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:lizhenqiang@chinamobile.com">lizhenqiang@chinamobile.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Qin Zhao</span> 
	  <span class="n hidden">
		<span class="family-name">Zhao</span>
	  </span>
	</span>
	<span class="org vcardline">Beijing University of Posts and Telecommunications</span>
	<span class="adr">
	  <span>Information Network Center, No. 10 Xitucheng Road, Haidian District </span>

	  <span class="vcardline">
		<span class="locality">Beijing</span>,  
		<span class="region"></span>
		<span class="code">100876</span>
	  </span>
	  <span class="country-name vcardline">P.R. China</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:zhaoqin@bupt.edu.cn">zhaoqin@bupt.edu.cn</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Xiaohong Huang</span> 
	  <span class="n hidden">
		<span class="family-name">Huang</span>
	  </span>
	</span>
	<span class="org vcardline">Beijing University of Posts and Telecommunications</span>
	<span class="adr">
	  <span>Information Network Center, No. 10 Xitucheng Road, Haidian District </span>

	  <span class="vcardline">
		<span class="locality">Beijing</span>,  
		<span class="region"></span>
		<span class="code">100876</span>
	  </span>
	  <span class="country-name vcardline">P.R. China</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:huangxh@bupt.edu.cn">huangxh@bupt.edu.cn</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Yan Ma</span> 
	  <span class="n hidden">
		<span class="family-name">Ma</span>
	  </span>
	</span>
	<span class="org vcardline">Beijing University of Posts and Telecommunications</span>
	<span class="adr">
	  <span>Information Network Center, No. 10 Xitucheng Road, Haidian District </span>

	  <span class="vcardline">
		<span class="locality">Beijing</span>,  
		<span class="region"></span>
		<span class="code">100876</span>
	  </span>
	  <span class="country-name vcardline">P.R. China</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:mayan@bupt.edu.cn">mayan@bupt.edu.cn</a></span>

  </address>
</div>

</body>
</html>