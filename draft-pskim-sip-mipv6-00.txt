Network Working Group                                             P. Kim
Internet-Draft                              Korea Polytechnic University             
Expires: December 31, 2005                                 June 29, 2005
                                                          


               A New Mechanism for SIP over Mobile IPv6
                     draft-pskim-sip-mipv6-00.txt

Status of this Memo

   By submitting this Internet-Draft, each author represents that any
   applicable patent or other IPR claims of which he or she is aware
   have been or will be disclosed, and any of which he or she becomes
   aware will be disclosed, in accordance with Section 6 of BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on December 31, 2005.

Copyright Notice

   Copyright (C) The Internet Society (2005).


Abstract

   This draft proposes a new mechanism for Session Initiation Protocol 
   (SIP) over Mobile IPv6. In this mechanism, a home agent (HA) on home
   subnet acts as a redirect server and a registrar for SIP as well as 
   a home router for Mobile IPv6. Thus, a binding cache in the HA 
   contains location information for SIP as well as home registration 
   entries for Mobile IPv6. An access router on foreign subnet acts as
   only a router that offers a domain name. To implement the proposed 
   mechanism, some messages used in network layer are newly defined, 
   such as a router advertisement, a router solicitation and a binding
   update. In the proposed mechanism, a mobile node doesn't require 
   dynamic host configuration protocol (DHCP) and thus both home and 
   foreign subnets don't need DHCP servers, unlike existing mechanisms
   on Mobile IPv4.




Kim          A New Mechanism for SIP over Mobile IPv6           [Page 1]

Internet-Draft   A New Mechanism for SIP over Mobile IPv6     July 2005


Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  2
   2.  Requirements . . . . . . . . . . . . . . . . . . . . . . . . .  3
   3.  Network Architecture for Proposed Mechanism  . . . . . . . . .  3
   4.  New Messages for Proposed Mechanism. . . . . . . . . . . . . .  4
   4.1   New Router Advertisement Message . . . . . . . . . . . . . .  4
   4.2   New Router Advertisement Message . . . . . . . . . . . . . .  5 
   4.3   New Binding Update Message . . . . . . . . . . . . . . . . .  5  
   5.  Basic Operation Procedure of Proposed Mechanism  . . . . . . .  6
   6.  References . . . . . . . . . . . . . . . . . . . . . . . . . .  8
       Authors' Addresses . . . . . . . . . . . . . . . . . . . . . .  8
       Intellectual Property and Copyright Statements . . . . . . . .  9

1.  Introduction

   Over the past few years, an important trend is the emergence of voice
   over IP (VoIP) services and its rapid growth. For VoIP services, the 
   Session Initiation Protocol (SIP) has been standardized by IETF 
   [RFC3261]. SIP is an application layer protocol used for establishing
   and tearing down multimedia sessions.Meanwhile, mobility support is 
   also becoming important because of the recent blossoming of mobile 
   appliances, such as mobile phone, handheld PC, laptop computer, and 
   the high desire to have seamless network connectivity. To support 
   mobility for IPv4, Mobile IPv4 [RFC2002] was designed by IETF. In 
   addition, in recent, to solve the address exhaustion problem and the 
   routing optimization problem with Mobile IPv4, Mobile IPv6 has been 
   standardized by IETF [RFC3775] for IPv6 [RFC2461].

   Even though the original SIP and its applications did not consider 
   the mobility of the end nodes, there have been ongoing research 
   efforts to support mobility in the current SIP [Moh1999], 
   [Seol2002], [Kwon2002]. These works have been researched on Mobile
   IPv4 because Mobile IPv6 was not well established until recent. To 
   authors' knowledge, there seems to be no well established result for
   SIP over Mobile IPv6. However, as mentioned before, there are the 
   address exhaustion problem and the routing optimization problem in
   Mobile IPv4. Therefore, mechanisms for SIP over Mobile IPv6 might be
   required for wireless and mobile communication environments.

   In this draft, a new mechanism for SIP over Mobile IPv6 is proposed.
   In this mechanism, a home agent (HA) on home subnet acts as a 
   redirect server and a registrar for SIP as well as a home router for
   Mobile IPv6. That is, the HA provides its inherent functions of 
   Mobile IPv6, such as a router advertisement and a home registration 
   for a mobile node (MN). In addition, for SIP, the HA accepts a 
   location registration request of the MN, places the information it 
   receives in this request into a location database, and returns the 
   location information of the MN to a correspondent node (CN). Thus, a 
   binding cache in the HA contains location information for SIP as well
   as home registration entries for Mobile IPv6. On the other side, an 
   access router on foreign subnet, which will be called a foreign 
   router (FR) hereafter, provides only a router advertisement for the 
   MN.

Kim          A New Mechanism for SIP over Mobile IPv6           [Page 2]

Internet-Draft   A New Mechanism for SIP over Mobile IPv6     July 2005


   To implement the proposed mechanism, in this draft, some new messages
   used in network layer are defined by adding some fields to existing 
   messages in [RFC3775]. Firstly, in order that HA and FR offer a 
   subnet prefix and a domain name for the MN, a router advertisement 
   (RA) message is newly defined. Using this RA message, the MN can make
   a new Uniform Resource Identifier (URI) as well as a home address 
   (HoA) or a care-of address (CoA). Secondly, in order that the MN 
   solicits the HA or FR for the RA with a domain name as well as a 
   subnet prefix, a router solicitation (RS) message is newly defined.
   
   Lastly, when the MN changes its subnet and thus makes the CoA and 
   the new URI, to do simultaneously both location registration for SIP 
   and home registration for Mobile IPv6 with the HA, a binding update 
   (BU) message is newly defined.

   In the proposed mechanism, the MN doesn't require dynamic host 
   configuration protocol (DHCP) [RFC1541] and thus both home and 
   foreign subnets don't need DHCP servers. On the other hand, existing
   mechanisms on Mobile IPv4 required DHCP for the MN, and used DHCP 
   servers for the MN to get the HoA or CoA and the new URI, as shown in 
   existing works. In addition, the proposed mechanism provides the 
   efficient optimized routing where speech packets sent by the CN are 
   routed directly to the MN, whereas existing mechanisms could not due 
   to the triangle routing.

2.  Requirements

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].


3.  Network Architecture for Proposed Mechanism

   In this draft, a new mechanism for SIP over Mobile IPv6 is proposed
   for a wireless mobile network. The network considered for the 
   proposed mechanism consists of a mobile node (MN), a correspondent 
   node (CN), a home agent (HA), and a foreign router (FR).

   The MN acts as a user agent (UA) for SIP as well as a mobile host for
   Mobile IPv6. That is, in addition to its inherent functions for 
   Mobile IPv6, the MN creates a new SIP request and generates a 
   response to a SIP request. The CN also acts as a user agent (UA) for 
   SIP as well as a peer node with which a mobile node is communicating 
   for Mobile IPv6.

   The HA on home subnet acts as a redirect server and a registrar for 
   SIP as well as a home router for Mobile IPv6. That is, the HA 
   provides its inherent functions of Mobile IPv6, such as a router 
   advertisement and a home registration for a mobile node (MN). In 
   addition, for SIP, the HA accepts a location registration request of
   the MN, places the information it receives in this request into
   a location database, and returns the location information of the MN 
   to the CN. Thus, the binding cache in the HA contains location 
      
Kim          A New Mechanism for SIP over Mobile IPv6           [Page 3]

Internet-Draft   A New Mechanism for SIP over Mobile IPv6     July 2005  


   information for SIP as well as home registration entries for Mobile 
   IPv6. On the other side, the FR provides only a router advertisement
   for the MN.


4.  New Messages for Proposed Mechanism

   In this section, to implement the proposed mechanism, some messages
   used in network layer are  newly defined by adding some fields to 
   existing messages in [RFC3775], such as a router advertisement, a 
   router solicitation and a binding update.

4.1  New Router Advertisement Message

   In order that HA and FR offer a subnet prefix and a domain name for
   the MN, a router advertisement (RA) message is newly defined by 
   adding some fields to existing message in [RFC3775]. Using this RA 
   message, the MN can make a new Uniform Resource Identifier (URI)
   as well as a home address (HoA) or a care-of address (CoA).

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |     Type      |     Code      |          Checksum             |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     | Cur Hop Limit |M|O|H|D|Reserv |       Router Lifetime         |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                         Reachable Time                        |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                          Retrans Timer                        |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                                                               |
     +                                                               +
     |                                                               |
     +                        Domain Information                     +
     |              (ex: kpu.ac.kr or ssslab.kpu.ac.kr)              |
     +                                                               +
     |                                                               |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+    

                Fig.1 New Router Advertisement Message

   o Domain Name Flag (D) :  This bit is set in a RA to indicate that 
   the router sending this RA also include a domain name of current 
   subnet.

   o Reserved : Reduced from a 5-bit field to a 4-bit field to account
   for the addition of the above bit.

   o Domain Name : The domain name of current subnet where the MN is 
   attached. The data in the domain name should be encoded according to
   DNS encoding rules. For example, kpu.ac.kr or ssslab.kpu.ac.kr. 

   
Kim          A New Mechanism for SIP over Mobile IPv6           [Page 4]

Internet-Draft   A New Mechanism for SIP over Mobile IPv6     July 2005     
   

   o Subtype: Subtype field defines the link type of the mobile node
   included in the Link Characteristic Information field.

   o Other fields : See [RFC3775]

   The source address field in the IP header carrying this message is 
   the link-local address assigned to the interface from which this 
   message is sent. The destination address field in the IP header 
   carrying this message is typically the source address of an invoking
   router solicitation or the all-nodes multicast address.

4.2 New Router Solicitation Message

   In order that the MN solicits the HA or FR for a router advertisement
   with a domain name as well as a subnet prefix, a router solicitation 
   (RS) message is newly defined by adding some fields to existing 
   message in [RFC3775].


      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |     Type      |     Code      |          Checksum             |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |D|                         Reserved                            |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                            Options                            |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

               Fig.2 New Router Solicitation Message
               
                             
   o Domain Name Request Flag (D) :  This bit is set in a RS to 
   indicate that the MN requests a domain name of current subnet.

   o Reserved : Reduced from a 32-bit field to a 31-bit field to account
   for the addition of the above bit.

   o Other fields : See [RFC3775]

   The source address field in the IP header carrying this message is 
   the IP address of MN. The destination address field in the IP header 
   carrying this message is typically the all-routers multicast address.

4.3  New Binding Update Message

   When the MN changes its subnet and thus makes the CoA and the new 
   URI, to do simultaneously both location registration for SIP and home 
   registration for Mobile IPv6 with the HA, a new binding update (BU) 
   message is newly defined by adding some fields to existing message 
   in [RFC3775].   



Kim          A New Mechanism for SIP over Mobile IPv6           [Page 5]

Internet-Draft   A New Mechanism for SIP over Mobile IPv6     July 2005   



    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
                                    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                                    |          Sequence #           |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |A|H|L|K|       Reserved        |           Lifetime            |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | Next Header | Header Ext Len  |  Option Type  | Option Length |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                               |
    +                                                               +
    |                                                               |
    +                              HoA                              +
    |                                                               |
    +                                                               +
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                               |
    +                                                               +
    |                                                               |
    +                           New URI                             +
    |        (ex: pskim@kpu.ac.kr or pskim@ssslab.kpu.ac.kr)        |
    +                                                               +
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                  Fig.3 New Binding Update Message


   o Option Type : 10 (or any available value)

   o New URI : The new URI of the MN. For example, pskim@kpu.ac.kr or
   pskim@ssslab.kpu.ac.kr

   o Other fields : See [RFC3775]

   The source address field in the IP header carrying this message is 
   the CoA of the MN. The destination address field in the IP header 
   carrying this message is the IP address of the HA. This BU message 
   contains the Home Address destination option that has the HoA of 
   the MN.

5.  Basic Operation Procedure of Proposed Mechanism

   In this section, the basic operation of the proposed mechanism is 
   explained in detail. The MN is assumed to be the callee and the CN is
   assumed to be the caller. It is also assumed that the MN's HoA is 
   3ffe:2e01:2a:100::10 and URI is pskim@kpu.ac.kr in a home subnet.
   The CN's URI is assumed to be peter@mipv6.com.

   When the MN changes its subnet and thus attaches to a foreign subnet,
   it will receive solicited RA or unsolicited RA from the FR. To 
   receive the solicited RA, the MN sends the RS with setting Domain     

Kim          A New Mechanism for SIP over Mobile IPv6           [Page 6]

Internet-Draft   A New Mechanism for SIP over Mobile IPv6     July 2005      


   Name Request Flag (D) to the FR as shown in Fig. 2. Note that this 
   RS would be optional. The RA in Fig. 1 contains the subnet prefix for
   the MN's CoA configuration and the domain name for the MN's new URI 
   configuration. In foreign subnet, the address prefix is 
   3ffe:2e01:2a:200::/64 and the domain name is ssslab.kpu.ac.kr. Then, 
   the MN makes the CoA as 3ffe:2e01:2a:200::10 and the new URI as 
   pskim@ssslab.kpu.ac.kr.

   To do simultaneously both location registration for SIP and home 
   registration for Mobile IPv6 with the HA, the MN sends the BU with 
   both CoA and new URI to the HA, using the newly defined message in
   Fig. 3. If the HA accepts the BU, it update its binding cache entry
   for the MN. If the URI is not changed, the only CoA is updated in the
   binding cache. This binding cache is an effective database containing
   mappings among the original URI, the current URI, the HoA and the 
   CoA.

   The CN with peter@mipv6.com wants to invite the MN with 
   pskim@kpu.ac.kr The CN translates the domain name kpu.ac.kr to a 
   numeric IP address, by a DNS lookup, where the HA may be found. An 
   INVITE request is generated and sent to this HA. Note that the HA 
   does not issue any SIP requests of its own. After receiving a request
   other than CANCEL, the HA either refuses the request or gathers the 
   MN's current location information from the binding cache and returns 
   a final response of class 3xx. For well-formed CANCEL requests, it 
   returns a 2xx response. Then, when the HA accepts the invitation, 
   it gathers the MN's current location information, such as the HoA 
   3ffe:2e01:2a:100::10, the CoA 3ffe:2e01:2a:200::10 and the new URI 
   pskim@ssslab.kpu.ac.kr,  from the binding cache. Thus, the HA 
   returns a 302 response (Moved Temporarily) with MN's current location
   information. The CN acknowledges the response with an ACK request to 
   the HA. Then, the CN issues a new INVITE request based on the MN's 
   current URI pskim@ssslab.kpu.ac.kr. This request is sent to the MN's 
   CoA 3ffe:2e01:2a:200::10. In this case, the call succeeds and a 
   response indicating this is sent to the CN. The signaling is 
   completed with an ACK from the CN to the MN. After this call setup, 
   the real speech communication is going on. 
   
   In the proposed mechanism, the MN doesn' require dynamic host 
   configuration protocol (DHCP) and thus both home and foreign subnets
   don't need DHCP servers. On the other hand, existing mechanisms on 
   Mobile IPv4 required DHCP for the MN, and used DHCP servers for the
   MN to get the HoA or CoA and the new URI, as shown in existing 
   mechanisms. In addition, the proposed mechanism uses the optimized 
   routing between the MN and the CN. That is, speech packets sent by 
   the caller are routed directly to the callee. On the other hand, in 
   existing mechanisms, speech packets that are sent by the caller to 
   the callee connected to a foreign subnet are routed first to the 
   callee's HA and then tunneled to the callee's CoA. Therefore, the 
   proposed mechanism might be more efficient in terms of speech delay
   and resource consumption than existing mechanisms, because, in 
   general, the speech packets will have to traverse fewer subnets on 
   their way to their destination.


Kim          A New Mechanism for SIP over Mobile IPv6           [Page 7]

Internet-Draft   A New Mechanism for SIP over Mobile IPv6     July 2005      



6.  References


   [RFC3261] Rosenberg, J. et al, "SIP: Session Initiation Protocol", 
             RFC 3261, June 2002.
              
   [RFC2002] Perkins, C., "IP Mobility Support", RFC 2002, October 1996
   
   [RFC3775] Johnson, D. B., "Mobility Support in IPv6", RFC 3775,
             June 2004
              
   [RFC1541] Droms, R., "Dynamic Host Configuration Protocol", RFC 1541, 
             October 1993                         

   [Moh1999] Moh, M. et al, "Mobile IP telephony: mobility support 
             of SIP", Proc. Int. Conf. on Computer Communications and
             Networks, pp. 554-559, 1999

   [Seol2002] Seol, S. et al, "Experiments and analysis of voice over 
              Mobile IP", Proc. IEEE Int. Symposium on Personal, Indoor
              and Mobile Radio Communications, pp. 997-981, 2002

   [Kwon2002] Kwon, T. et al, "Mobility management for VoIP service: 
              Mobile IP vs. SIP", IEEE Wireless Communications, Vol.9,
              No. 5, pp 66-75, 2002
   

              

Authors' Addresses

   Pyung-Soo Kim
   Department of Electronics Engineering,
   Korea Polytechnic University,
   2121 Jungwang-Dong, Shiheung City,
   Gyeonggi-Do  429-793
   KOREA

   Phone: +82 31 496 8413
   EMail: pskim@kpu.ac.kr













Kim          A New Mechanism for SIP over Mobile IPv6           [Page 8]

Internet-Draft   A New Mechanism for SIP over Mobile IPv6     July 2005      


Intellectual Property Statement

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in BCP 78 and BCP 79.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   http://www.ietf.org/ipr.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.


Disclaimer of Validity

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET
   ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Copyright Statement

   Copyright (C) The Internet Society (2005).  This document is subject
   to the rights, licenses and restrictions contained in BCP 78, and
   except as set forth therein, the authors retain all their rights.


Acknowledgment

   Funding for the RFC Editor function is currently provided by the
   Internet Society.







Kim          A New Mechanism for SIP over Mobile IPv6           [Page 9]