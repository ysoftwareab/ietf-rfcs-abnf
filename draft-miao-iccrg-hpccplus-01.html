<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>HPCC++: Enhanced High Precision Congestion Control</title>
<meta content="Rui Miao" name="author">
<meta content="Hongqiang H. Liu" name="author">
<meta content="Rong Pan" name="author">
<meta content="Jeongkeun Lee" name="author">
<meta content="Changhoon Kim" name="author">
<meta content="Barak Gafni" name="author">
<meta content="Yuval Shpigelman" name="author">
<meta content="Jeff Tantsura" name="author">
<meta content="
       Congestion control (CC) is the key to achieving ultra-low latency,
high bandwidth and network stability in high-speed networks. 
However, the existing high-speed CC schemes have inherent limitations for reaching these goals. 
       In this document, we describe
HPCC++ (High Precision Congestion Control), a new high-speed CC
mechanism which achieves the three goals simultaneously. HPCC++
leverages inband telemetry to obtain precise link load
information and controls traffic precisely. By addressing challenges
such as delayed signaling during congestion and overreaction to the congestion signaling using inband and granular telemetry, HPCC++ can quickly 
converge to utilize all the available bandwidth while avoiding congestion, and can maintain near-zero
in-network queues for ultra-low latency. HPCC++ is also fair and
easy to deploy in hardware, implementable with commodity NICs and switches. 
    " name="description">
<meta content="xml2rfc 3.11.1" name="generator">
<meta content="Data Center Networking" name="keyword">
<meta content="Congestion Control" name="keyword">
<meta content="draft-miao-iccrg-hpccplus-01" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.11.1
    Python 3.6.12
    appdirs 1.4.4
    ConfigArgParse 1.5.3
    google-i18n-address 2.5.0
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.6.4
    pycountry 20.7.3
    pyflakes 2.4.0
    PyYAML 6.0
    requests 2.26.0
    setuptools 59.1.1
    six 1.16.0
-->
<link href="/tmp/draft-miao-iccrg-hpccplus-rg4ruq9p.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">HPCC++</td>
<td class="right">December 2021</td>
</tr></thead>
<tfoot><tr>
<td class="left">Miao, et al.</td>
<td class="center">Expires 10 June 2022</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">Network Working Group</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-miao-iccrg-hpccplus-01</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2021-12-07" class="published">7 December 2021</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Experimental</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2022-06-10">10 June 2022</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">R. Miao</div>
<div class="org">Alibaba Group</div>
</div>
<div class="author">
      <div class="author-name">H. Liu</div>
<div class="org">Alibaba Group</div>
</div>
<div class="author">
      <div class="author-name">R. Pan</div>
<div class="org">Intel Corporation</div>
</div>
<div class="author">
      <div class="author-name">J. Lee</div>
<div class="org">Intel Corporation</div>
</div>
<div class="author">
      <div class="author-name">C. Kim</div>
<div class="org">Intel Corporation</div>
</div>
<div class="author">
      <div class="author-name">B. Gafni</div>
<div class="org">Mellanox Technologies, Inc.</div>
</div>
<div class="author">
      <div class="author-name">Y. Shpigelman</div>
<div class="org">Mellanox Technologies, Inc.</div>
</div>
<div class="author">
      <div class="author-name">J. Tantsura</div>
<div class="org">Microsoft Corporation</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">HPCC++: Enhanced High Precision Congestion Control</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">Congestion control (CC) is the key to achieving ultra-low latency,
high bandwidth and network stability in high-speed networks. 
However, the existing high-speed CC schemes have inherent limitations for reaching these goals.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
<p id="section-abstract-2">In this document, we describe
HPCC++ (High Precision Congestion Control), a new high-speed CC
mechanism which achieves the three goals simultaneously. HPCC++
leverages inband telemetry to obtain precise link load
information and controls traffic precisely. By addressing challenges
such as delayed signaling during congestion and overreaction to the congestion signaling using inband and granular telemetry, HPCC++ can quickly 
converge to utilize all the available bandwidth while avoiding congestion, and can maintain near-zero
in-network queues for ultra-low latency. HPCC++ is also fair and
easy to deploy in hardware, implementable with commodity NICs and switches.<a href="#section-abstract-2" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 10 June 2022.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2021 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="xref">2</a>.  <a href="#name-terminology" class="xref">Terminology</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1" class="keepWithNext"><a href="#section-3" class="xref">3</a>.  <a href="#name-system-overview" class="xref">System Overview</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-hpcc-algorithm" class="xref">HPCC++ Algorithm</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="xref">4.1</a>.  <a href="#name-notations" class="xref">Notations</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="xref">4.2</a>.  <a href="#name-design-functions-and-proced" class="xref">Design Functions and Procedures</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-configuration-parameters" class="xref">Configuration Parameters</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-design-enhancement-and-impl" class="xref">Design Enhancement and Implementation</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a href="#section-6.1" class="xref">6.1</a>.  <a href="#name-hpcc-guidelines" class="xref">HPCC++ Guidelines</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2">
                <p id="section-toc.1-1.6.2.2.1"><a href="#section-6.2" class="xref">6.2</a>.  <a href="#name-receiver-based-hpcc" class="xref">Receiver-based HPCC</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-reference-implementations" class="xref">Reference Implementations</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="xref">7.1</a>.  <a href="#name-inband-telemetry-padding-at" class="xref">Inband telemetry padding at the network elements</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="xref">7.2</a>.  <a href="#name-congestion-control-at-nics" class="xref">Congestion control at NICs</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-iana-considerations" class="xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-discussion" class="xref">Discussion</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.1">
                <p id="section-toc.1-1.9.2.1.1"><a href="#section-9.1" class="xref">9.1</a>.  <a href="#name-internet-deployment" class="xref">Internet Deployment</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.2">
                <p id="section-toc.1-1.9.2.2.1"><a href="#section-9.2" class="xref">9.2</a>.  <a href="#name-switch-assisted-congestion-" class="xref">Switch-assisted congestion control</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.3">
                <p id="section-toc.1-1.9.2.3.1"><a href="#section-9.3" class="xref">9.3</a>.  <a href="#name-work-with-transport-protoco" class="xref">Work with transport protocols</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9.2.4">
                <p id="section-toc.1-1.9.2.4.1"><a href="#section-9.4" class="xref">9.4</a>.  <a href="#name-work-with-qos-queuing" class="xref">Work with QoS queuing</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="xref">10</a>. <a href="#name-acknowledgments" class="xref">Acknowledgments</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-11" class="xref">11</a>. <a href="#name-contributors" class="xref">Contributors</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#section-12" class="xref">12</a>. <a href="#name-references" class="xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.1">
                <p id="section-toc.1-1.12.2.1.1"><a href="#section-12.1" class="xref">12.1</a>.  <a href="#name-normative-references" class="xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.12.2.2">
                <p id="section-toc.1-1.12.2.2.1"><a href="#section-12.2" class="xref">12.2</a>.  <a href="#name-informative-references" class="xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#appendix-A" class="xref"></a><a href="#name-authors-addresses" class="xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="sec-intro">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">The link speed in data center networks has grown from 1Gbps to
      100Gbps in the past decade, and this growth is continuing. Ultralow 
      latency and high bandwidth, which are demanded by more
      and more applications, are two critical requirements in today's and
      future high-speed networks.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">Given that traditional software-based network stacks in hosts
      can no longer sustain the critical latency and bandwidth requirements as described in <span>[<a href="#Zhu-SIGCOMM2015" class="xref">Zhu-SIGCOMM2015</a>]</span>, 
      offloading network stacks into hardware is an inevitable
      direction in high-speed networks. 
      As an example, large-scale networks with RDMA (remote direct memory access)
      often uses hardware-offloading solutions.
      In some cases, the RDMA networks still face fundamental challenges
      to reconcile low latency, high bandwidth utilization, and high stability.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">This document describes a new congestion control mechanism, HPCC++ (Enhanced High Precision Congestion Control), 
      for large-scale, high-speed networks. The key idea behind HPCC++ is to leverage the precise link load 
      information from signaled through inband telemetry to compute accurate flow rate updates. Unlike
      existing approaches that often require a large number of iterations
      to find the proper flow rates, HPCC++ requires only one rate update
      step in most cases. Using precise information from inband telemetry enables
      HPCC++ to address the limitations in current congestion control schemes. First,
      HPCC++ senders can quickly ramp up flow rates for high utilization
      and ramp down flow rates for congestion avoidance. Second, HPCC++
      senders can quickly adjust the flow rates to keep each link's output rate slightly lower than 
      the link's capacity, preventing queues from being built-up as well as preserving 
      high link utilization. Finally, since sending rates are computed precisely based on direct
      measurements at switches, HPCC++ requires merely three independent
      parameters that are used to tune fairness and efficiency.<a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4">The base form of HPCC++ is the original HPCC algorithm and its full description can be found 
      in <span>[<a href="#SIGCOMM-HPCC" class="xref">SIGCOMM-HPCC</a>]</span>. While the original design lays the foundation 
      for inband telemetry based precision congestion control, 
      HPCC++ is an enhanced version which takes into account system constraints and aims to reduce the design 
      overhead and further improves the performance. <a href="#sec-implementation" class="xref">Section 6</a> describes these
      detailed proposed design enhancements and guidelines.<a href="#section-1-4" class="pilcrow">¶</a></p>
<p id="section-1-5">This document describes the architecture changes in switches 
      and end-hosts to support the needed tranmission of inband telemetry and its consumption, 
      that imporves the efficiency in handling network congestion.<a href="#section-1-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec-term">
<section id="section-2">
      <h2 id="name-terminology">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-terminology" class="section-name selfRef">Terminology</a>
      </h2>
<p id="section-2-1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in
   BCP 14 <span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="xref">RFC8174</a>]</span>
   when, and only when, they appear in all capitals, as shown here.<a href="#section-2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec-system-overview">
<section id="section-3">
      <h2 id="name-system-overview">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-system-overview" class="section-name selfRef">System Overview</a>
      </h2>
<p id="section-3-1"><a href="#fig-system-overview" class="xref">Figure 1</a> shows the end-to-end
      system that HPCC++ operates in. During
      the traverse of the packet from the sender to the receiver, each
      switch along the path inserts inband telemetry that reports the current state of the
      packet's egress port, including timestamp (ts), queue length (qLen),
      transmitted bytes (txBytes), and the link bandwidth capacity (B), 
      together with switch_ID and port_ID.
      When the receiver gets the packet, it may copy all the inband telemetry
      recorded from the network to the ACK message it sends back to the
      sender, and then the sender decides how to adjust its flow rate each time it
      receives an ACK with network load information. Alternatively, the receiver
      may calculate the flow rate based on the inband telemetry information and 
      feedback the calculated rate back to the sender. The notification packets would 
      include delayed ack information as well.<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2"> Note that
    there also exist network nodes along the reverse (potentially uncongested)
    path that the RTCP feedback reports traverse. Those network nodes are not
    shown in the figure for sake of brevity.<a href="#section-3-2" class="pilcrow">¶</a></p>
<span id="name-system-overview-tlminband-t"></span><div id="fig-system-overview">
<figure id="figure-1">
        <div class="alignLeft art-text artwork" id="section-3-3.1">
<pre>


  +---------+  pkt    +-------+ pkt+tlm +-------+ pkt+tlm +----------+
  |  Data   |--------&gt;|       |--------&gt;|       |--------&gt;| Data     |
  |  Sender |=========|Switch1|=========|Switch2|=========| Receiver |
  +---------+ Link-0  +-------+  Link-1 +-------+  Link-2 +----------+
      /|\                                                        |
       |                                                         |
       +---------------------------------------------------------+
                       Notification Packets/ACKs
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-system-overview-tlminband-t" class="selfRef">System Overview (tlm=inband telemtry)</a>
        </figcaption></figure>
</div>
<ul class="normal">
<li class="normal" id="section-3-4.1">Data sender: responsible for controlling inflight bytes. HPCC++ is a window-based congestion control scheme that 
        controls the number of inflight bytes. The inflight bytes mean the amount 
       of data that have been sent, but not acknowledged by the sender yet.
        Controlling inflight bytes has an important advantage compared
        to controlling rates. In the absence of congestion, the inflight bytes
        and rate are interchangeable with equation inflight = rate * T
        where T is the base propagation RTT. The rate can be calculated locally 
       or obtained from the notification packet. 
        The sender may further use the data pacing mechanism, potentially implemented in hardware, to limit the rate accordingly.<a href="#section-3-4.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-4.2"> Network nodes: responsible of inserting the inband telemetry information 
        to the data packet. The inband telemetry information reports the current load of the
        packet's egress port, including timestamp (ts), queue length (qLen),
       transmitted bytes (txBytes), and link bandwidth capacity (B).
        Besides, the inband telemetry contains switch_ID and port_ID to identify a link.<a href="#section-3-4.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-3-4.3"> Data receiver: responsible for either reflecting back the inband telemetry information 
     in the data packet or calculating the proper flow
      rate based on network congestion information in inband telemetry and sending notification packets
      back to the sender.<a href="#section-3-4.3" class="pilcrow">¶</a>
</li>
      </ul>
</section>
</div>
<div id="subsec-receiver-algorithm">
<section id="section-4">
      <h2 id="name-hpcc-algorithm">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-hpcc-algorithm" class="section-name selfRef">HPCC++ Algorithm</a>
      </h2>
<p id="section-4-1">HPCC++ is a window-based congestion
  control algorithm. The key design choice of HPCC++ is to rely on network nodes to provide
fine-grained load information, such as queue size and accumulated
tx/rx traffic to compute precise flow rates. This has two major
benefits: (i) HPCC++ can quickly converge to proper flow rates to 
highly utilize bandwidth while avoiding congestion; and (ii) HPCC++
can consistently maintain a close-to-zero queue for low latency.<a href="#section-4-1" class="pilcrow">¶</a></p>
<p id="section-4-2">This section introduces the list of notations and
  describes the core congestion control algorithm.<a href="#section-4-2" class="pilcrow">¶</a></p>
<div id="subsec-notation">
<section id="section-4.1">
        <h3 id="name-notations">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-notations" class="section-name selfRef">Notations</a>
        </h3>
<p id="section-4.1-1">This section summarizes the list of variables and parameters
used in the HPCC++ algorithm. <a href="#tab-parameters" class="xref">Figure 3</a>
also includes the default values for choosing the algorithm
parameters either to represent a typical setting in practical
applications or based on theoretical and simulation studies.<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<span id="name-list-of-variables"></span><div id="tab-variables">
<figure id="figure-2">
          <div class="alignLeft art-text artwork" id="section-4.1-2.1">
<pre>
  +--------------+-------------------------------------------------+
  | Notation     | Variable Name                                   |
  +--------------+-------------------------------------------------+
  | W_i          | Window for flow i                               |
  | Wc_i         | Reference window for flow i                     |
  | B_j          | Bandwidth for Link j                            |
  | I_j          | Estimated inflight bytes for Link j             |
  | U_j          | Normalized inflight bytes for Link j            |
  | qlen         | Telemetry info: link j queue length             |
  | txRate       | Telemetry info: link j output rate              |
  | ts           | Telemetry info: timestamp                       |
  | txBytes      | Telemetry info: link j total transmitted bytes  |
  |              |                  associated with timestamp ts   |
  +--------------+-------------------------------------------------+
</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-list-of-variables" class="selfRef">List of variables.</a>
          </figcaption></figure>
</div>
<span id="name-list-of-algorithm-parameter"></span><div id="tab-parameters">
<figure id="figure-3">
          <div class="alignLeft art-text artwork" id="section-4.1-3.1">
<pre>
   +--------------+----------------------------------+----------------+
   | Notation     | Parameter Name                   | Default Value  |
   +--------------+----------------------------------+----------------+
   | T            | Known baseline RTT               |    5us         |
   | eta          | Target link utilization          |    95%         |
   | maxStage     | Maximum stages for additive      |                |
   |              | increases                        |    5           |
   | N            | Maximum number of flows          |    ...         |
   | W_ai         | Additive increase amount         |    ...         |
   +--------------+----------------------------------+----------------+
</pre>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
<a href="#name-list-of-algorithm-parameter" class="selfRef">List of algorithm parameters and their default values.</a>
          </figcaption></figure>
</div>
</section>
</div>
<div id="subsec-hpcc-algorithm">
<section id="section-4.2">
        <h3 id="name-design-functions-and-proced">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-design-functions-and-proced" class="section-name selfRef">Design Functions and Procedures</a>
        </h3>
<p id="section-4.2-1">The HPCC++ algorithm can be outlined as below:<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-4.2-2">
<pre>
1: Function MeasureInflight(ack)
2:    u = 0;
3:    for each link i on the path do
4:                  ack.L[i].txBytes-L[i].txBytes
          txRate =  ----------------------------- ;
                         ack.L[i].ts-L[i].ts
5:               min(ack.L[i].qlen,L[i].qlen)      txRate
           u' = ----------------------------- +  ---------- ;
                     ack.L[i].B*T                ack.L[i].B
6:         if u' &gt; u then
7:             u = u'; tau = ack.L[i].ts -  L[i].ts;
8:     tau = min(tau, T);
9:     U = (1 - tau/T)*U + tau/T*u;
10:    return U;
</pre><a href="#section-4.2-2" class="pilcrow">¶</a>
</div>
<div class="alignLeft art-text artwork" id="section-4.2-3">
<pre>
11: Function ComputeWind(U, updateWc)
12:    if U &gt;= eta or incStage &gt;= maxStagee then
13:             Wc
           W = ----- + W_ai;
               U/eta
14:        if updateWc then
15:            incStagee = 0; Wc = W ;
16:    else
17:        W = Wc + W_ai ;
18:        if updateWc then
19:            incStage++; Wc = W ;
20:    return W
</pre><a href="#section-4.2-3" class="pilcrow">¶</a>
</div>
<div class="alignLeft art-text artwork" id="section-4.2-4">
<pre>
21: Procedure NewAck(ack)
22:    if ack.seq &gt; lastUpdateSeq then
23:        W = ComputeWind(MeasureInflight(ack), True);
24:        lastUpdateSeq = snd_nxt;
25:    else
26:        W = ComputeWind(MeasureInflight(ack), False);
27:    R = W/T; L = ack.L;
</pre><a href="#section-4.2-4" class="pilcrow">¶</a>
</div>
<p id="section-4.2-5">The above illustrates the overall process of CC at the sender side for
a single flow. Each newly received ACK message triggers the procedure NewACK at Line 21. At Line 22, the variable lastUpdateSeq
is used to remember the first packet sent with a new W c
, and
the sequence number in the incoming ACK should be larger than
lastUpdateSeq to trigger a new sync betweenW c
andW (Line 14-15
and 18-19). The sender also remembers the pacing rate and current
inband telemetry information at Line 27. The sender computes a new window
size W at Line 23 or Line 26, depending on whether to update W c
,
with function MeasureInflight and ComputeWind.
Function MeasureInflight estimates normalized inflight bytes
with Eqn (2) at Line 5. First, it computes txRate of each link from
the current and last accumulated transferred bytes txBytes and
timestamp ts (Line 4). It also uses the minimum of the current and
last qlen to filter out noises in qlen (Line 5). The loop from Line 3 to 7
selects maxi(Ui) in Eqn. (3). Instead of directly using maxi(Ui), we
use an EWMA (Exponentially Weighted Moving Average) to filter
the noises from timer inaccuracy and transient queues. (Line 9).
Function ComputeWind combines multiplicative increase/
decrease (MI/MD) and additive increase (AI) to balance the reaction
speed and fairness. If a sender finds it should increase the window
size, it first tries AI for maxStage times with the stepWAI (Line 17).
If it still finds room to increase after maxStage times of AI or the
normalized inflight bytes is above, it calls Eqn (4) once to quickly
ramp up or ramp down the window size (Line 12-13).<a href="#section-4.2-5" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sec-parameters">
<section id="section-5">
      <h2 id="name-configuration-parameters">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-configuration-parameters" class="section-name selfRef">Configuration Parameters</a>
      </h2>
<p id="section-5-1">
HPCC++ has three easy-to-set parameters: eta, maxStagee, and W_ai. eta
controls a simple tradeoff between utilization and transient queue
length (due to the temporary collision of packets caused by their
random arrivals, so we set it to 95% by default,
which only loses 5% bandwidth but achieves almost zero queue.
maxStage controls a simple tradeoff between steady state stability
and the speed to reclaim free bandwidth. We find maxStage = 5 is
conservatively large for stability, while the speed of reclaiming free
bandwidth is still much faster than traditional additive increase,
especially in high bandwidth networks. W_ai controls the tradeoff
between the maximum number of concurrent flows on a link that
can sustain near-zero queues and the speed of convergence to fairness. 
Note that none of the three
parameters are reliability-critical.<a href="#section-5-1" class="pilcrow">¶</a></p>
<p id="section-5-2">
HPCC++'s design brings advantages to short-lived flows, by allowing 
flows starting at line-rate and the separation of utilization convergence and fairness convergence. HPCC++ 
achieves fast utilization convergence to mitigate congestion in almost
one round-trip time, while allows flows to gradually converge to fairness. 
This design feature of HPCC++ is especially helpful for the workload
 of datacenter applications, where flows are usually short and latency-sensitive.

Normally we set a very small W_ai to support
a large number of concurrent flows on a link, because slower fairness 
is not critical. A rule of thumb is to set W_ai =
W_init*(1-eta) / N where N is the expected or receiver reported 
maximum number of concurrent flows on a link. The intuition is that 
the total additive increase every round
(N*W_ai ) should not exceed the bandwidth headroom, and thus
no queue forms. Even if the actual number of concurrent flows on
a link exceeds N, the CC is still stable and achieves full utilization,
but just cannot maintain zero queues.<a href="#section-5-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec-implementation">
<section id="section-6">
      <h2 id="name-design-enhancement-and-impl">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-design-enhancement-and-impl" class="section-name selfRef">Design Enhancement and Implementation</a>
      </h2>
<p id="section-6-1">
The basic design of HPCC++, i.e. HPCC, as described above is to add inband telemetry information
into every data packet to react to congestion as soon as the very first packet
observing the network congestion. This is especially helpful to reduce the risk
of severe congestion in incast scenarios at the first round-trip time. In addition, 
original HPCC's algorithm introduction of Wc is for the purpose of solving 
the over-reaction issue from using this per-packet response.<a href="#section-6-1" class="pilcrow">¶</a></p>
<p id="section-6-2">Alternatively, the inband telemetry information needs not to be added to every data packet to reduce
the overhead. Switches can attach inband telemetry less frequently, e.g., once per RTT or upon 
congestion occurance.<a href="#section-6-2" class="pilcrow">¶</a></p>
<div id="sec-guideline">
<section id="section-6.1">
        <h3 id="name-hpcc-guidelines">
<a href="#section-6.1" class="section-number selfRef">6.1. </a><a href="#name-hpcc-guidelines" class="section-name selfRef">HPCC++ Guidelines</a>
        </h3>
<p id="section-6.1-1">
To ensure network stability, HPCC++ establishes a few
guidelines for different implementations:<a href="#section-6.1-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-6.1-2.1">The algorithm should commit the window/rate update at most once per round-trip time, 
     similar to the procedure of updating Wc.<a href="#section-6.1-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-6.1-2.2">To support different workloads and to properly set W_ai, HPCC++ allows the option to 
     incorporate mechanisms to speed up the fairness convergence.<a href="#section-6.1-2.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-6.1-2.3">The switch should capture inband telemetry information that includes link load (txBytes, qlen, ts) and 
     link spec (switch_ID, port_ID, B) at the egress port.
     Note, each switch should record all those information at the single snapshot to achieve a precise link load
     estimate.<a href="#section-6.1-2.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-6.1-2.4"> HPCC++ can use a probe packet to query the inband telemetry information. Thereby, the probe packets should take the same routing path and QoS queueing with the data packets.<a href="#section-6.1-2.4" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-6.1-3"> As long the above guidelines are met, this document does not
   mandate a particular inband telemetry header format or encapsulation,
   which are orthogonal to the HPCC++ algorithm
   described in this document. The algorithm can be implemented with a choice
   of inband telemetry protocols, such as in-band network telemetry <span>[<a href="#P4-INT" class="xref">P4-INT</a>]</span>, IOAM <span>[<a href="#I-D.ietf-ippm-ioam-data" class="xref">I-D.ietf-ippm-ioam-data</a>]</span>,
  IFA <span>[<a href="#I-D.ietf-kumar-ippm-ifa" class="xref">I-D.ietf-kumar-ippm-ifa</a>]</span> and others. 
  In fact, the emerging inband telemetry protocols can inform the evolution for a broader range of protocols and network functions, 
  where this document leverages the trend to propose the architecture change to support HPCC++ algorithm.<a href="#section-6.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="subsec-rxhpcc">
<section id="section-6.2">
        <h3 id="name-receiver-based-hpcc">
<a href="#section-6.2" class="section-number selfRef">6.2. </a><a href="#name-receiver-based-hpcc" class="section-name selfRef">Receiver-based HPCC</a>
        </h3>
<p id="section-6.2-1">
Note that the window/rate calculation can be implemented at
either the data sender or the data receiver. 
If the ACK packets already 
exist for reliability purpose, the inband telemetry information can be echoed back to
the sender via ACK self-clocking. Not all ACK packets need to carry the inband telemetry information. 
To reduce the Packet Per Second (PPS) overhead,
the receiver may examine the inband telemetry information and adopt the technique of 
delayed ACKs that only sends out an ACK for a few of received packets. 
In order to reduce PPS even further, one may implement the algorithm at the receiver and
feedback the calculated window in the ACK packet once every RTT.<a href="#section-6.2-1" class="pilcrow">¶</a></p>
<p id="section-6.2-2">
The receiver-based algorithm, Rx-HPCC, 
is based on int.L, which is the inband telemetry information in the packet header. The receiver
performs the same functions except using int.L instead of ack.L. The new function NewINT(int.L)
is to replace NewACK(int.L)<a href="#section-6.2-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-6.2-3">
<pre>
28:   Procedure NewINT(int.L)
29:   if now &gt; (lastUpdateTime + T) then
30:      W = ComputeWind(MeasureInflight(int), True);
31:      send_ack(W)
32:      lastUpdateTime = now;
33:   else
34:      W = ComputeWind(MeasureInflight(int), False);
</pre><a href="#section-6.2-3" class="pilcrow">¶</a>
</div>
<p id="section-6.2-4">
Here, since the receiver does not know the starting sequence number of a burst, 
it simply records the lastUpdateTime. If time T has passed since lastUpdateTime, 
the algorithm would recalcuate Wc as in Line 30 and send out the ACK packet which
would include W information. Otherwise, it would just update W information locally.
This would reduce the amount of traffic that needs to be feedback to the data sender.<a href="#section-6.2-4" class="pilcrow">¶</a></p>
<p id="section-6.2-5">
Note that the receiver can also measure the number of outstanding flows, N, 
if the last hop is the congestion point and use this information
to dynamically adjust W_ai to achieve better fairness. 
The improvement would allow flows to quickly converge to fairness without causing large swings 
under heavy load.<a href="#section-6.2-5" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sec-implementations">
<section id="section-7">
      <h2 id="name-reference-implementations">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-reference-implementations" class="section-name selfRef">Reference Implementations</a>
      </h2>
<p id="section-7-1">A prototype of HPCC++ is implemented in NICs to realize the
   congestion control algorithm and in switches to realize the inband telemetry feature.<a href="#section-7-1" class="pilcrow">¶</a></p>
<div id="sec-implementation-telemery">
<section id="section-7.1">
        <h3 id="name-inband-telemetry-padding-at">
<a href="#section-7.1" class="section-number selfRef">7.1. </a><a href="#name-inband-telemetry-padding-at" class="section-name selfRef">Inband telemetry padding at the network elements</a>
        </h3>
<p id="section-7.1-1">HPCC++ only relies on packets to share information across senders,
   receivers, and switches. HPCC++ is open to a variety of inband telemetry format standards.
   Inside a data center, the path length is often no more than 5 hops. 
   The overhead of the inband telemetry padding for HPCC++ is considered to be low.<a href="#section-7.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec-implementation-cc">
<section id="section-7.2">
        <h3 id="name-congestion-control-at-nics">
<a href="#section-7.2" class="section-number selfRef">7.2. </a><a href="#name-congestion-control-at-nics" class="section-name selfRef">Congestion control at NICs</a>
        </h3>
<p id="section-7.2-1"><a href="#fig-nic" class="xref">Figure 4</a> shows HPCC++ implementation on a NIC.
   The NIC provides an HPCC++ module that resides on the
   data path of the NIC, HPCC++ modules realize both sender and receiver roles.<a href="#section-7.2-1" class="pilcrow">¶</a></p>
<span id="name-overview-of-nic-implementat"></span><div id="fig-nic">
<figure id="figure-4">
          <div class="alignLeft art-text artwork" id="section-7.2-2.1">
<pre>

  +------------------------------------------------------------------+
  |  +---------+ window update +-----------+ PktSend +-----------+   |
  |  |         |--------------&gt;| Scheduler |-------&gt; |Tx pipeline|---+-&gt;
  |  |         | rate update   +-----------+         +-----------+   |
  |  |  HPCC++ |                                           ^         |
  |  |         |                           inband telemetry|         |
  |  |  module |                                           |         |
  |  |         |                                     +-----+-----+   |
  |  |         |&lt;----------------------------------- |Rx pipeline| &lt;-+--
  |  +---------+      telemetry response event       +-----------+   |
  +------------------------------------------------------------------+

</pre>
</div>
<figcaption><a href="#figure-4" class="selfRef">Figure 4</a>:
<a href="#name-overview-of-nic-implementat" class="selfRef">Overview of NIC Implementation</a>
          </figcaption></figure>
</div>
<p id="section-7.2-3">1. Sender side flow<a href="#section-7.2-3" class="pilcrow">¶</a></p>
<p id="section-7.2-4">The HPCC++ module running the HPCC CC algorithm in the sender side for every flow in the NIC. 
   Flow can be defined by some transport parameters including 5-tuples, destination QP (queue pair), etc.
   It receives inband telemetry response events per flow which are generated from the RX pipeline, 
   adjusts the sending window and rate, and update the scheduler on the rate and window of the flow.<a href="#section-7.2-4" class="pilcrow">¶</a></p>
<p id="section-7.2-5">The scheduler contains a pacing mechanism that determine the flow rate by the value it got from the algorithm. 
   It also maintains the current sending window size for active flows.  
   If the pacing mechanism and the flow's sending window permits, the 
   scheduler invokes for the flow a PktSend command to TX pipeline.<a href="#section-7.2-5" class="pilcrow">¶</a></p>
<p id="section-7.2-6">The TX pipeline implements packet processing.
   Once it receives the PktSend event with flow ID from the scheduler, 
   it generates the corresponding packet and delivers to the Network.
   If a sent packet should collect telemetry on its way the TX pipeline may add 
   indications/headers that triggers the network elements to add telemetry data according to the inband telemetry protocol in use.
   The telemetry can be collected by the data packet or by dedicated prob packets generated in the TX pipeline.<a href="#section-7.2-6" class="pilcrow">¶</a></p>
<p id="section-7.2-7">The RX pipe parses the incoming packets from the network and
   identifies whether telemetry is embedded in the parsed packet. On receiving a telemetry response packet, the RX pipeline extracts the network 
   status from the packet and passes it to the HPCC++ module for processing.
   A telemetry response packet can be an ACK containing inband telemetry, or a dedicated telemetry response prob packet.<a href="#section-7.2-7" class="pilcrow">¶</a></p>
<p id="section-7.2-8">2. Receiver side flow<a href="#section-7.2-8" class="pilcrow">¶</a></p>
<p id="section-7.2-9">On receiving a packet containing inband telemetry, the RX pipeline extracts the network status, and the flow parameters from the packet
   and passes it to the TX pipeline. The packet can be a data packet containing inband telemetry, or a dedicated telemetry request prob packet.
   The Tx pipeline may process and edit the telemetry data, and then sends back to the sender the data using either an ACK packet of the flow or a dedicated telemetry response packet.<a href="#section-7.2-9" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sec-iana">
<section id="section-8">
      <h2 id="name-iana-considerations">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-8-1">This document makes no request of IANA.<a href="#section-8-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec-discussion">
<section id="section-9">
      <h2 id="name-discussion">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-discussion" class="section-name selfRef">Discussion</a>
      </h2>
<div id="sec-Internet">
<section id="section-9.1">
        <h3 id="name-internet-deployment">
<a href="#section-9.1" class="section-number selfRef">9.1. </a><a href="#name-internet-deployment" class="section-name selfRef">Internet Deployment</a>
        </h3>
<p id="section-9.1-1">Although the discussion above mainly focuses on the data center environment, HPCC++ can be adopted at Internet at large.
  There are several security considerations one should be aware of.<a href="#section-9.1-1" class="pilcrow">¶</a></p>
<p id="section-9.1-2">There may rise privacy concern when the telemetry information is conveyed across Autonomous Systems (ASes) and back to end-users.
    The link load information captured in telemetry can potentially reveal the provider's network capacity, route utilization, 
    scheduling policy, etc. Those usually are considered to be sensitive data of the network providers. Hence, certain action may take to 
    anonymize the telemetry data and only convey the relative ratio in rate adaptation across ASes without revealing the actual network load.<a href="#section-9.1-2" class="pilcrow">¶</a></p>
<p id="section-9.1-3">Another consideration is the security of receiving telemetry information.
    The rate adaptation mechanism in HPCC++ relies on feedback
    from the network. As such, it is vulnerable to attacks where
    feedback messages are hijacked, replaced, or intentionally
    injected with misleading information resulting in denial of
    service, similar to those that can affect TCP. It is therefore
    RECOMMENDED that the notification feedback message is at least integrity
    checked. In addition, <span>[<a href="#I-D.ietf-avtcore-cc-feedback-message" class="xref">I-D.ietf-avtcore-cc-feedback-message</a>]</span>
    discusses the potential risk of a receiver providing misleading
    congestion feedback information and the mechanisms for mitigating
    such risks.<a href="#section-9.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec-assisted">
<section id="section-9.2">
        <h3 id="name-switch-assisted-congestion-">
<a href="#section-9.2" class="section-number selfRef">9.2. </a><a href="#name-switch-assisted-congestion-" class="section-name selfRef">Switch-assisted congestion control</a>
        </h3>
<p id="section-9.2-1">HPCC++ falls in the general category of switch-assisted congestion control.
  However, HPCC++ includes a few unique design choices that are different from other switch-assisted approaches.<a href="#section-9.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-9.2-2.1">First, HPCC++ implements a primal-mode algorithm that requires only the ``write-to-packet'' operation from switches, 
  which has already been supported by telemetry protocols like INT <span>[<a href="#P4-INT" class="xref">P4-INT</a>]</span> or IOAM <span>[<a href="#I-D.ietf-ippm-ioam-data" class="xref">I-D.ietf-ippm-ioam-data</a>]</span>. 
  Please note that this is very different from dual-mode algorithms such as XCP <span>[<a href="#Katabi-SIGCOMM2002" class="xref">Katabi-SIGCOMM2002</a>]</span> 
  and RCP <span>[<a href="#Dukkipati-RCP" class="xref">Dukkipati-RCP</a>]</span>, where switches take an actively role in determining flows' rates.<a href="#section-9.2-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-9.2-2.2">Second, HPCC++ achieves a fast utilization convergence by decoupling it from fairness convergence, which is inspired by XCP.<a href="#section-9.2-2.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-9.2-2.3">Third, HPCC++ enables the switch-guided multiplicative increase (MI) by defining the ``inflight byte'' 
  to quantify the link load. The inflight byte tells both the underload and overload of the link precisely
  and thus it allows the flow to increase/decrease the rate multiplicatively and safely.
  By contrast, traditional approaches of using the queue length or RTT as the feedback cannot guide the rate increase 
  and instead have to rely on additive increase (AI) with heuristics.
  As the link speed contines to grow, this becomes increasingly slow in reclaiming the unused bandwidth.
  Besides, queue-based feedback mechanisms subject to latency inflation.<a href="#section-9.2-2.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-9.2-2.4">Last, HPCC++ uses TX rate instead of RX rate used by XCP and RCP. 
  As detailed in <span>[<a href="#SIGCOMM-HPCC" class="xref">SIGCOMM-HPCC</a>]</span>, we view the TX rate is more precise 
  because RX rate and queue length are overlapped and thus it causes oscillation.<a href="#section-9.2-2.4" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</div>
<div id="sec-transport">
<section id="section-9.3">
        <h3 id="name-work-with-transport-protoco">
<a href="#section-9.3" class="section-number selfRef">9.3. </a><a href="#name-work-with-transport-protoco" class="section-name selfRef">Work with transport protocols</a>
        </h3>
<p id="section-9.3-1">
      HPCC++ can be adopted as the CC algorithm by a wide range of transport protocols such as TCP and UDP, 
      as well as others that may run on top of them, such as iWARP, RoCE etc. 
      It requires to have the window limit and congestion feedback through ACK self-clocking, which naturally conforms to 
      the paradigm of TCP design. 
      With that, HPCC++ introduces a scheme to measure the total inflight bytes for 
      more precise congestion control. To run in UDP, some modifications need to be done to enforce the window limit 
      and collect congestion feedback via probing packets, 
      which is incremental.<a href="#section-9.3-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec-QoS">
<section id="section-9.4">
        <h3 id="name-work-with-qos-queuing">
<a href="#section-9.4" class="section-number selfRef">9.4. </a><a href="#name-work-with-qos-queuing" class="section-name selfRef">Work with QoS queuing</a>
        </h3>
<p id="section-9.4-1">Under the use of QoS (Quality of service) priority queuing in switches,
    the length of flow's own queue cannot tell the actual queuing time and the exact extent of congestion.

    Although general approaches for running congestion control with QoS queuing are out of the scope of this document,
    we provide a few hints for HPCC++ running friendly with QoS queuing.
    In this case, HPCC++ can leverage the packet sojourn time 
    (the egress timestamp minus the ingress timestamp) instead of the queue length to quantify the packet's actual queuing delay.
    In addition, the operators typically use the Deficit Weighted Round Robin (DWRR) instead of the strict priority (SP) 
    as their QoS scheduling to prevent traffic starvation.
    DWRR provides a minimum bandwdith guarantee for each queue so that HPCC++ can leverage it for precise rate update to avoid congestion.<a href="#section-9.4-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="sec-acknowledgments">
<section id="section-10">
      <h2 id="name-acknowledgments">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-acknowledgments" class="section-name selfRef">Acknowledgments</a>
      </h2>
<p id="section-10-1">
The authors would like to thank ICCRG members for their valuable review
comments and helpful input to this specification.<a href="#section-10-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="sec-contributors">
<section id="section-11">
      <h2 id="name-contributors">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-contributors" class="section-name selfRef">Contributors</a>
      </h2>
<p id="section-11-1">The following individuals have contributed to the implementation
  and evaluation of the proposed scheme, and therefore have helped
  to validate and substantially improve this specification:
  Pedro Y. Segura, Roberto P. Cebrian, Robert Southworth and Malek Musleh.<a href="#section-11-1" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-12">
      <h2 id="name-references">
<a href="#section-12" class="section-number selfRef">12. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-12.1">
        <h3 id="name-normative-references">
<a href="#section-12.1" class="section-number selfRef">12.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd><dt id="RFC8174">[RFC8174]</dt>
        <dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05" class="refDate">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
<dd class="break"></dd></dl>
</section>
<section id="section-12.2">
        <h3 id="name-informative-references">
<a href="#section-12.2" class="section-number selfRef">12.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="I-D.ietf-avtcore-cc-feedback-message">[I-D.ietf-avtcore-cc-feedback-message]</dt>
        <dd>
<span class="refAuthor">Sarker, Z.</span>, <span class="refAuthor">Perkins, C.</span>, <span class="refAuthor">Singh, V.</span>, and <span class="refAuthor">M. A. Ramalho</span>, <span class="refTitle">"RTP Control Protocol (RTCP) Feedback for Congestion Control"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-avtcore-cc-feedback-message-09</span>, <time datetime="2020-11-02" class="refDate">2 November 2020</time>, <span>&lt;<a href="https://www.ietf.org/archive/id/draft-ietf-avtcore-cc-feedback-message-09.txt">https://www.ietf.org/archive/id/draft-ietf-avtcore-cc-feedback-message-09.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="Katabi-SIGCOMM2002">[Katabi-SIGCOMM2002]</dt>
        <dd>
<span class="refAuthor">Katabi, D.</span>, <span class="refAuthor">Handley, M.</span>, and <span class="refAuthor">C. Rohrs</span>, <span class="refTitle">"Congestion Control for High Bandwidth-Delay Product Networks"</span>, <span class="seriesInfo">ACM SIGCOMM Pittsburgh, Pennsylvania, USA</span>, <time datetime="2002-10" class="refDate">October 2002</time>. </dd>
<dd class="break"></dd>
<dt id="Zhu-SIGCOMM2015">[Zhu-SIGCOMM2015]</dt>
        <dd>
<span class="refAuthor">Zhu, Y.</span>, <span class="refAuthor">Eran, H.</span>, <span class="refAuthor">Firestone, D.</span>, <span class="refAuthor">Guo, C.</span>, <span class="refAuthor">Lipshteyn, M.</span>, <span class="refAuthor">Liron, Y.</span>, <span class="refAuthor">Padhye, J.</span>, <span class="refAuthor">Raindel, S.</span>, <span class="refAuthor">Yahia, M. H.</span>, and <span class="refAuthor">M. Zhang</span>, <span class="refTitle">"Congestion Control for Large-Scale RDMA Deployments"</span>, <span class="seriesInfo">ACM SIGCOMM London, United Kingdom</span>, <time datetime="2015-08" class="refDate">August 2015</time>. </dd>
<dd class="break"></dd>
<dt id="P4-INT">[P4-INT]</dt>
        <dd>
<span class="refTitle">"In-band Network Telemetry (INT) Dataplane Specification, v2.0"</span>, <time datetime="2020-02" class="refDate">February 2020</time>, <span>&lt;<a href="https://github.com/p4lang/p4-applications/blob/master/docs/INT_v2_0.pdf">https://github.com/p4lang/p4-applications/blob/master/docs/INT_v2_0.pdf</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-ippm-ioam-data">[I-D.ietf-ippm-ioam-data]</dt>
        <dd>
<span class="refTitle">"Data Fields for In-situ OAM"</span>, <time datetime="2020-03" class="refDate">March 2020</time>, <span>&lt;<a href="https://tools.ietf.org/html/draft-ietf-ippm-ioam-data-09">https://tools.ietf.org/html/draft-ietf-ippm-ioam-data-09</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-kumar-ippm-ifa">[I-D.ietf-kumar-ippm-ifa]</dt>
        <dd>
<span class="refTitle">"Inband Flow Analyzer"</span>, <time datetime="2019-02" class="refDate">February 2019</time>, <span>&lt;<a href="https://tools.ietf.org/html/draft-kumar-ippm-ifa-01">https://tools.ietf.org/html/draft-kumar-ippm-ifa-01</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="SIGCOMM-HPCC">[SIGCOMM-HPCC]</dt>
        <dd>
<span class="refAuthor">Li, Y.</span>, <span class="refAuthor">Miao, R.</span>, <span class="refAuthor">Liu, H.</span>, <span class="refAuthor">Zhuang, Y.</span>, <span class="refAuthor">Fei Feng, F.</span>, <span class="refAuthor">Tang, L.</span>, <span class="refAuthor">Cao, Z.</span>, <span class="refAuthor">Zhang, M.</span>, <span class="refAuthor">Kelly, F.</span>, <span class="refAuthor">Alizadeh, M.</span>, and <span class="refAuthor">M. Yu</span>, <span class="refTitle">"HPCC: High Precision Congestion Control"</span>, <span class="seriesInfo">ACM SIGCOMM Beijing, China</span>, <time datetime="2019-08" class="refDate">August 2019</time>. </dd>
<dd class="break"></dd>
<dt id="Dukkipati-RCP">[Dukkipati-RCP]</dt>
      <dd>
<span class="refAuthor">Dukkipati, N.</span>, <span class="refTitle">"Rate Control Protocol (RCP): Congestion control to make flows complete quickly."</span>, <span class="seriesInfo">Stanford University </span>, <time datetime="2008" class="refDate">2008</time>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="authors-addresses">
<section id="appendix-A">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Rui Miao</span></div>
<div dir="auto" class="left"><span class="org">Alibaba Group</span></div>
<div dir="auto" class="left"><span class="street-address">525 Almanor Ave, 4th Floor</span></div>
<div dir="auto" class="left">
<span class="locality">Sunnyvale</span>, <span class="region">CA</span> <span class="postal-code">94085</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:miao.rui@alibaba-inc.com" class="email">miao.rui@alibaba-inc.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Hongqiang H. Liu</span></div>
<div dir="auto" class="left"><span class="org">Alibaba Group</span></div>
<div dir="auto" class="left"><span class="street-address">108th Ave NE, Suite 800</span></div>
<div dir="auto" class="left">
<span class="locality">Bellevue</span>, <span class="region">WA</span> <span class="postal-code">98004</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:hongqiang.liu@alibaba-inc.com" class="email">hongqiang.liu@alibaba-inc.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Rong Pan</span></div>
<div dir="auto" class="left"><span class="org">Intel, Corp.</span></div>
<div dir="auto" class="left"><span class="street-address">2200 Mission College Blvd.</span></div>
<div dir="auto" class="left">
<span class="locality">Santa Clara</span>, <span class="region">CA</span> <span class="postal-code">95054</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:rong.pan@intel.com" class="email">rong.pan@intel.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Jeongkeun Lee</span></div>
<div dir="auto" class="left"><span class="org">Intel, Corp.</span></div>
<div dir="auto" class="left"><span class="street-address">4750 Patrick Henry Dr.</span></div>
<div dir="auto" class="left">
<span class="locality">Santa Clara</span>, <span class="region">CA</span> <span class="postal-code">95054</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:jk.lee@intel.com" class="email">jk.lee@intel.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Changhoon Kim</span></div>
<div dir="auto" class="left"><span class="org">Intel Corporation</span></div>
<div dir="auto" class="left"><span class="street-address">4750 Patrick Henry Dr.</span></div>
<div dir="auto" class="left">
<span class="locality">Santa Clara</span>, <span class="region">CA</span> <span class="postal-code">95054</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:chang.kim@intel.com" class="email">chang.kim@intel.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Barak Gafni</span></div>
<div dir="auto" class="left"><span class="org">Mellanox Technologies, Inc.</span></div>
<div dir="auto" class="left"><span class="street-address">350 Oakmead Parkway, Suite 100</span></div>
<div dir="auto" class="left">
<span class="locality">Sunnyvale</span>, <span class="region">CA</span> <span class="postal-code">94085</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:gbarak@mellanox.com" class="email">gbarak@mellanox.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Yuval Shpigelman</span></div>
<div dir="auto" class="left"><span class="org">Mellanox Technologies, Inc.</span></div>
<div dir="auto" class="left"><span class="street-address">Haim Hazaz 3A</span></div>
<div dir="auto" class="left">
<span class="locality">Netanya</span> <span class="postal-code">4247417</span>
</div>
<div dir="auto" class="left"><span class="country-name">Israel</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:yuvals@nvidia.com" class="email">yuvals@nvidia.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Jeff Tantsura</span></div>
<div dir="auto" class="left"><span class="org">Microsoft Corporation</span></div>
<div dir="auto" class="left"><span class="street-address">One Microsoft Way</span></div>
<div dir="auto" class="left">
<span class="locality">Redmond</span>, <span class="region">Washington</span> <span class="postal-code">98052-6399</span>
</div>
<div dir="auto" class="left"><span class="country-name">United States of America</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:jefftantsura@microsoft.com" class="email">jefftantsura@microsoft.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
