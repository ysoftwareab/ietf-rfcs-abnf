<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>ForCES Implementation Experience Draft</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="ForCES Implementation Experience Draft">
<meta name="keywords" content="ForCES, Interoperability, Implementation, Experience">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Internet Engineering Task Force</td><td class="header">E. Haleplidis</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">O. Koufopavlou</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">S. Denazis</td></tr>
<tr><td class="header">Expires: November 13, 2010</td><td class="header">University of Patras</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">May 12, 2010</td></tr>
</table></td></tr></table>
<h1><br />ForCES Implementation Experience Draft<br />draft-haleplidis-forces-implementation-experience-00</h1>

<h3>Abstract</h3>

<p>The forwarding and Control Element Separation (ForCES) protocol 
   defines a standard communication and control mechanism through which 
   a Control Element (CE) can control the behavior of a Forwarding 
   Element (FE). This document captures the experience of implementing the ForCES
   protocol and model. It's aim is to help others by providing examples and possible strategies
   for implementing the ForCES protocol.
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on November 13, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Terminology and Conventions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">1.1.</a>&nbsp;
Requirements Language<br />
<a href="#anchor3">2.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">2.1.</a>&nbsp;
Document Goal<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">2.2.</a>&nbsp;
Definitions<br />
<a href="#anchor6">3.</a>&nbsp;
ForCES Architecture<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">3.1.</a>&nbsp;
Pre-association setup - Initial Configuration<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">3.2.</a>&nbsp;
TML<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">3.3.</a>&nbsp;
Model<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">3.3.1.</a>&nbsp;
Components<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">3.3.2.</a>&nbsp;
LFBs<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">3.4.</a>&nbsp;
Protocol<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">3.4.1.</a>&nbsp;
TLVs<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">3.4.2.</a>&nbsp;
Message Deserialization<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">3.4.2.1.</a>&nbsp;
Config or Query<br />
<a href="#anchor16">4.</a>&nbsp;
Developement Platforms<br />
<a href="#Acknowledgements">5.</a>&nbsp;
Acknowledgements<br />
<a href="#IANA">6.</a>&nbsp;
IANA Considerations<br />
<a href="#Security">7.</a>&nbsp;
Security Considerations<br />
<a href="#rfc.references1">8.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">8.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">8.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Terminology and Conventions</h3>

<p>The terminology that is used is the same as in the <a class='info' href='#RFC5810'>FE-protocol<span> (</span><span class='info'>Doria, A., Hadi Salim, J., Haas, R., Khosravi, H., Wang, W., Dong, L., Gopal, R., and J. Halpern, &ldquo;Forwarding and Control Element Separation (ForCES) Protocol Specification,&rdquo; March&nbsp;2010.</span><span>)</span></a> [RFC5810] and is not copied in this document.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Requirements Language</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
        "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
        document are to be interpreted as described in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Introduction</h3>

<p> Forwarding and Control Element Separation (ForCES) defines an
   architectural framework and associated protocols to standardize
   information exchange between the control plane and the forwarding
   plane in a ForCES Network Element (ForCES NE).  <a class='info' href='#RFC3654'>[RFC3654]<span> (</span><span class='info'>Khosravi, H. and T. Anderson, &ldquo;Requirements for Separation of IP Control and Forwarding,&rdquo; November&nbsp;2003.</span><span>)</span></a> has defined
   the ForCES requirements, and <a class='info' href='#RFC3746'>[RFC3746]<span> (</span><span class='info'>Yang, L., Dantu, R., Anderson, T., and R. Gopal, &ldquo;Forwarding and Control Element Separation (ForCES) Framework,&rdquo; April&nbsp;2004.</span><span>)</span></a>  has defined the ForCES
   framework.
</p>
<p>The ForCES protocol works in a master-slave mode in which FEs are slaves and CEs
   are masters.  The protocol includes commands for transport of Logical Function Block (LFB) configuration information, association setup,
   status, and event notifications, etc. The reader is encouraged to read <a class='info' href='#RFC5810'>FE-protocol<span> (</span><span class='info'>Doria, A., Hadi Salim, J., Haas, R., Khosravi, H., Wang, W., Dong, L., Gopal, R., and J. Halpern, &ldquo;Forwarding and Control Element Separation (ForCES) Protocol Specification,&rdquo; March&nbsp;2010.</span><span>)</span></a> [RFC5810] for further
   information.
</p>
<p>The <a class='info' href='#RFC5812'>FE-MODEL<span> (</span><span class='info'>Halpern, J. and J. Hadi Salim, &ldquo;Forwarding and Control Element Separation (ForCES) Forwarding Element Model,&rdquo; March&nbsp;2010.</span><span>)</span></a> [RFC5812] presents a formal way to define FE
   Logical Function Blocks (LFBs) using XML.  LFB configuration
   components, capabilities, and associated events are defined when the
   LFB is formally created.  The LFBs within the FE are accordingly
   controlled in a standardized way by the ForCES protocol.
</p>
<p>The TML transports the PL messages.  The TML is where the issues of
   how to achieve transport level reliability, congestion control,
   multicast, ordering, etc. are handled.  It is expected that more than
   one TML will be standardized.  The various possible TMLs could vary
   their implementations based on the capabilities of underlying media
   and transport.  However, since each TML is standardized,
   interoperability is guaranteed as long as both endpoints support the
   same TML.  All ForCES Protocol Layer implementations MUST be portable
  across all TMLs.  Although more than one TML may be standardized
  for the ForCES Protocol, all ForCES implementations MUST implement the
   <a class='info' href='#RFC5811'>SCTP-TML<span> (</span><span class='info'>Hadi Salim, J. and K. Ogawa, &ldquo;SCTP-Based Transport Mapping Layer (TML) for the Forwarding and Control Element Separation (ForCES) Protocol,&rdquo; March&nbsp;2010.</span><span>)</span></a> [RFC5811].
</p>
<p>The <a class='info' href='#I-D.ietf-forces-applicability'>Applicability Statement<span> (</span><span class='info'>Crouch, A., Khosravi, H., Doria, A., Wang, X., and K. Ogawa, &ldquo;ForCES Applicability Statement,&rdquo; February&nbsp;2010.</span><span>)</span></a> [I&#8209;D.ietf&#8209;forces&#8209;applicability] captures the applicable areas in which ForCES may be used.
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Document Goal</h3>

<p>This document captures the experience of implementing the ForCES protocol and model 
      and it's main goal is not to tell others how to implement, but to provide alternatives, ideas and proposals
      as how it can be implemented.
</p>
<p>Also, this document mentions possible problems and potential choices that can be made,
       in an attempt to help implementors develop their own products.
</p>
<p>Additionally this document takes into account that the reader has become familiar with 
      the three main ForCES RFCs, the <a class='info' href='#RFC5810'>FE-protocol<span> (</span><span class='info'>Doria, A., Hadi Salim, J., Haas, R., Khosravi, H., Wang, W., Dong, L., Gopal, R., and J. Halpern, &ldquo;Forwarding and Control Element Separation (ForCES) Protocol Specification,&rdquo; March&nbsp;2010.</span><span>)</span></a> [RFC5810], the <a class='info' href='#RFC5812'>FE-MODEL<span> (</span><span class='info'>Halpern, J. and J. Hadi Salim, &ldquo;Forwarding and Control Element Separation (ForCES) Forwarding Element Model,&rdquo; March&nbsp;2010.</span><span>)</span></a> [RFC5812] and the <a class='info' href='#RFC5811'>SCTP-TML<span> (</span><span class='info'>Hadi Salim, J. and K. Ogawa, &ldquo;SCTP-Based Transport Mapping Layer (TML) for the Forwarding and Control Element Separation (ForCES) Protocol,&rdquo; March&nbsp;2010.</span><span>)</span></a> [RFC5811].
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
Definitions</h3>

<p> This document follows the terminology defined by the ForCES
   Requirements in <a class='info' href='#RFC3654'>[RFC3654]<span> (</span><span class='info'>Khosravi, H. and T. Anderson, &ldquo;Requirements for Separation of IP Control and Forwarding,&rdquo; November&nbsp;2003.</span><span>)</span></a> and by the ForCES framework in <a class='info' href='#RFC3746'>[RFC3746]<span> (</span><span class='info'>Yang, L., Dantu, R., Anderson, T., and R. Gopal, &ldquo;Forwarding and Control Element Separation (ForCES) Framework,&rdquo; April&nbsp;2004.</span><span>)</span></a>.
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
ForCES Architecture</h3>

<p>This section discusses the ForCES architecture, difficulties and how to overcome them.
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Pre-association setup - Initial Configuration</h3>

<p>The initial configuration of the FE and the CE respectively is done by the FE Manager and the CE Manager.
  These entities has not as yet been standardized and anyone can build their own. It is expected that somehow 
  they will talk to each other and exchange details regarding the upcoming associations. Any developer can create
  any Manager, but at least they should be able to exchange the following details:
</p>
<p>From the FE side:
</p>
<p></p>
<ol class="text">
<li>FEID
</li>
<li>FE IP, if your FE and CE will be communicating via network.
</li>
<li>TML. The TML that you will be using. If you skip this, then SCTP MUST be chosen as default from the CE side.
</li>
<li>Priority ports. If you also skip this, then the CE MUST use the default ones from the respective TML RFC.
</li>
</ol>

<p>From the CE side:
</p>
<p></p>
<ol class="text">
<li>CEID
</li>
<li>CE IP, if your FE and CE will be communicating via network.
</li>
<li>TML. The TML that you will be using. If you skip this, then SCTP MUST be chosen as default from the FE side.
</li>
<li>Priority ports. If you also skip this, then the FE MUST use the default ones from the respective TML RFC.
</li>
</ol>

<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
TML</h3>

<p>All ForCES implementations MUST support the SCTP as TML. Even if another TML will be chosen by the developer, SCTP
  is mandatory and MUST be supported.
</p>
<p>There are several issues that should concern a developer for the TML.
</p>
<p></p>
<ol class="text">
<li>Security. TML must be secure according to the respective RFC. For SCTP you have to use IPSec.
</li>
<li>NAT issues. ForCES can be deployed everywhere and can run over SCTP/IP. If you are behind a NAT, you must forward the
    TML priority ports to your CE who listens at these ports. The issue is what happens to the ports that the FE uses.
    Unless you bind the same port numbers to the FE, your FE would have a random port number. This means that port forwarding
    to the FE must include all sctp ports. The CE can be easily behind a NAT since it will bind the specific sctp ports. 
    In order for the FE to work, it must either have a global IP, or it must bind specific ports that are forwarded to it
    unless all sctp ports are forwarded to the FE.
</li>
</ol>

<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
Model</h3>

<p>The model is very dynamic and can be used to model anything. Using the basic atomic values that
  are defined, new datatypes can be built using atomic (single valued) and/or compound (structures and arrays).
</p>
<p>The difficulty is to create something that is completely scalable so a develeper doesn't need to write the same
  code for new LFBs, or for new components etc. Just create code for the defined atomic values
  and then new components can be built based on already written code.
</p>
<p>The model itself provides the key which is inheritance.
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.1"></a><h3>3.3.1.&nbsp;
Components</h3>

<p>First, a basic component needs to be created as the mother of all the components with the basic parameters of all the
  components:
</p>
<p></p>
<ul class="text">
<li>The ID of the component.
</li>
<li>The access rights of that component.
</li>
<li>If it is of variable length.
</li>
<li>If it is an optional component.
</li>
<li>The size of its data.
</li>
</ul>

<p>Next, some basic functions are in order:
</p>
<p></p>
<ul class="text">
<li>A common constructor.
</li>
<li>A common deconstructor.
</li>
<li>Retrieve Component ID.
</li>
<li>Retrieve access right property.
</li>
<li>Query if it is an optional component.
</li>
<li>Get Full Data.
</li>
<li>Set Full Data.
</li>
<li>Get Sparse Data.
</li>
<li>Set Sparse Data.
</li>
<li>Del Full Data.
</li>
<li>Del Sparse Data.
</li>
<li>Get Hardware Value.
</li>
<li>Set Hardware Value.
</li>
<li>Del Hardware Value.
</li>
<li>Get Data.
</li>
<li>Clone component.
</li>
</ul>

<p>While almost all functions are logical, the last function seems out of place. That function MUST return a new 
  component that has the exact same values and attributes. This function is especially useful in array components.
</p>
<p>Now any atomic datatype can be built as a child of that basic component which will inherit all the functions and 
  if necessary override the mother's functions.
</p>
<p>Next struct components can be built. A struct component is a component itself, but contains an array of basic
  components. The ID of the component is the array index. The Clone function must create and return a similar struct 
  component.
</p>
<p>The most difficult component to be built is the array. The difficulty lie in the actual benefit of the model. You have
  absolute freedom over what you build. An array is an array of components. In all rows you have the exact same type of 
  component either a single component or a specific struct. The struct can have multiple basic components, or a combination of
  basic components, structs and arrays and so on. So, the difficulty lies in how do to create a new row since the array is
  very dynamic. This is where the clone function is very useful. For the array you need a mother component. Once a set
  command is received, the mother component can spawn a new component and adds them into the array, and with the set 
  fulldata the value is set in the recently spawned component, as the spawned component knows how the data is created.
</p>
<p>Once the basic constructors of all possible components are created, then a developer only has to create his LFB 
  components or datatypes as a child of one of the already created components and the only thing the developer really 
  needs to add, is the three functions of Get/Set/Del hardware value of each component. The rest is the same.
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.2"></a><h3>3.3.2.&nbsp;
LFBs</h3>

<p>The same architecture in the components can be used for the LFBs. The parent LFB has some basic attributes:
</p>
<p></p>
<ul class="text">
<li>The LFB Class ID.
</li>
<li>The LFB Instance ID.
</li>
<li>An Array of Components.
</li>
</ul>

<p>Then some common functions:
</p>
<p></p>
<blockquote class="text">
<p>Handle Configuration Command.
</p>
<p>Handle Query Command.
</p>
<p>Get Class ID.
</p>
<p>Get Instance ID.
</p>
</blockquote>

<p>Once these are created each LFB can inherit all these from the parent and the only thing it has to do is to add
  the components that have already been created.
</p>
<p>An example of this is the following. The code next creates a part of FEProtocolLFB:
</p><div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
//FEID
cui = new Component_uInt(FEPO_FEID, ACCESS_READ_ONLY, FE_id);
Components[cui-&gt;get_ComponentId()]=cui; //Add component

//Current FEHB Policy Value
cub = new Component_uByte(FEPO_FEHBPolicy, ACCESS_READ_WRITE, 0);
Components[cub-&gt;get_ComponentId()]=cub; //Add component

//FEIDs for BackupCEs Array
cui = new Component_uInt(0, ACCESS_READ_WRITE, 0);
ca = new Component_Array(FEPO_BackupCEs, ACCESS_READ_WRITE);
ca-&gt;AddRow(cui, 1);
ca-&gt;AddMotherComponent(cui);
Components[ca-&gt;get_ComponentId()]=ca; //Add BackupCEs Array component
</pre></div>
<p>Then all it is required is an LFBHandler that will have an array of all the LFBs:
</p>
<p>LFBs[ClassID][InstanceID][LFB].
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4"></a><h3>3.4.&nbsp;
Protocol</h3>

<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4.1"></a><h3>3.4.1.&nbsp;
TLVs</h3>

<p>Since the model is so free to create anything the developer needs, the protocol itself has been created thus to provide
  the user the freedom to manipulate any component. This creates some difficulties in developing a scalable architecture
  for handling the protocol messages.
</p>
<p>Another difficulty arises from the batching capabilities of the protocol. You can have multiple Operations within a 
  message, you can select more than one LFB to command, and more than one component to manipulate.
</p>
<p>A possible solution is again provided by inheritance. There are two basic components in a protocol message.
</p>
<p></p>
<ol class="text">
<li>A main header.
</li>
<li>The rest of the packet.
</li>
</ol>

<p>The rest of the packet is divided in Type-Length-Value (TLV) packets, and in one case Index-Length-Value (ILV)
  packets.
</p>
<p>The possible TLVs and ILVs the are described in detail in the forces protocol RFC.
</p>
<p>A TLV's main attributes are:
</p>
<p></p>
<ul class="text">
<li>Type
</li>
<li>Length
</li>
<li>Data
</li>
<li>An array of TLVs.
</li>
</ul>

<p>The array of TLVs is the next level of TLVs for this TLV.
</p>
<p>A TLVs common function could be:
</p>
<p></p>
<ul class="text">
<li>A basic constructor.
</li>
<li>A constructor using data from the wire.
</li>
<li>Add a new TLV for next level.
</li>
<li>Get the next TLV of next level.
</li>
<li>Get a specific TLV of next level.
</li>
<li>Replace a TLV of next level.
</li>
<li>Get the Data.
</li>
<li>Get the Length.
</li>
<li>Set the Data.
</li>
<li>Set the Length.
</li>
<li>Set the Type.
</li>
<li>Serialize the header.
</li>
<li>Serialize the TLV to be written on the wire.
</li>
</ul>

<p>Next all TLVs can inherit all these functions and attributes and either override them or create some new functions for 
  each.
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4.2"></a><h3>3.4.2.&nbsp;
Message Deserialization</h3>

<p>What follows is a the algorithm for deserializing any protocol message:
</p>
<p></p>
<ol class="text">
<li>Get the message header.
</li>
<li>Read the length.
</li>
<li>Check the message type to understand what kind of packet this is.
</li>
<li>If the length is larger than the message header then there is data for this packet.
</li>
<li>A check can be made here regarding the message type and the length of the packet
</li>
</ol>

<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4.2.1"></a><h3>3.4.2.1.&nbsp;
Config or Query</h3>

<p>If the packet is a Query or Config type then for this level there are LFBSelector TLVs:
</p>
<p></p>
<ol class="text">
<li>Read the next 2 shorts(type-length). If the type==LFBSelector then the message is valid.
</li>
<li>Read the necessary length for this LFBSelector and create the LFBSelector from the data of the wire.
</li>
<li>Add this LFBSelector to the mainheader array of LFBSelectors
</li>
<li>Do this until the rest of the packet has finished.
</li>
</ol>

<p>The next level of TLVs are Operation TLVs
</p>
<p></p>
<ol class="text">
<li>Read the next 2 shorts(type-length). If the type==OperationTLV then the message is valid.
</li>
<li>Read the necessary length for this OperationTLV and create the OperationTLV from the data of the wire.
</li>
<li>Add this OperationTLV to the LFBSelector array of TLVs.
</li>
<li>Do this until the rest of the LFBSelector's Packet has finished.
</li>
</ol>

<p></p>
<ol class="text">
<li>Read the next 2 shorts(type-length). If the type==PathData then the message is valid.
</li>
<li>Read the necessary length for this PathDataTLV and create the PathDataTLV from the data of the wire.
</li>
<li>Add this PathData TLV to the Operation TLV's array of TLVs.
</li>
<li>Do this until the rest of the OperationTLV's Packet has finished.
</li>
</ol>

<p>Here it gets interesting, as the next level of PathDataTLVs can be either:
</p>
<p></p>
<ul class="text">
<li>PathData TLVs.
</li>
<li>FullData TLV.
</li>
<li>SparseData TLV.
</li>
<li>Result TLVs
</li>
</ul>

<p>The solution to this difficulty is recursion. If the next TLV is PathData then the PathData that is created uses the
  same kind of deserialisation etc. until it reaches a FullData or SparseData. There can be only one FullDataTLV or 
  SparseData within a PathData.
</p>
<p></p>
<ol class="text">
<li>Read the next 2 shorts(type-length).
</li>
<li>If the Type==PathDataTLV then do again the previous algorithm but add the PathDataTLV to this PathDataTLV's array
    of TLVs.
</li>
<li>Do this until the rest of the PathData's Packet has finished.
</li>
<li>If the Type==FullDataTLV create the FullData TLV from the packet and add this to the PathData's array of TLVs
</li>
<li>If the Type==SparseDataTLV create the SparseData TLV from the packet and add this to the PathData's array of TLVs
</li>
<li>If the Type==ResultTLV create the Result TLV from the packet and add this to the PathData's array of TLVs
</li>
</ol>

<p>If the message is a Query it MUST not have any kind of data inside the PathData.
</p>
<p>If the message is a Query Response then it MUST either have a ResultTLV or a FullData TLV.
</p>
<p>If the message is a Config it MUST have inside either a FullDataTLV or a SparseData TLV.
</p>
<p>If the message is a Config Reponse, it MUST have inside a ResultTLV
</p>
<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Developement Platforms</h3>

<p>Any Developmens platfor that can support the SCTP TML and the TML of the developer's choosing is available for use.
</p>
<p>The next table provides an initial survey of sctp support for C/C++ and Java.
</p><div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
/-------------+-------------+-------------+-------------\
|\ Platform   |             |             |             |
| ----------\ |   Windows   |    Linux    |   Solaris   |
|  Language  \|             |             |             |
+-------------+-------------+-------------+-------------+
|             |             |             |             |
|    C/C++    |  Supported  |  Supported  |  Supported  |
|             |             |             |             |
+-------------+-------------+-------------+-------------+
|             |   Limited   |             |             |
|    Java     | Third Party |  Supported  |  Supported  |
|             | Not from SUN|             |             |
\-------------+-------------+-------------+-------------/
</pre></div>
<p>A developer should keep some limitations regarding Java.
</p>
<p>Java inherently does not support unsigned types. A workaround this can be found in the creation of classes that do the
  translation of unsigned to java types. The problem is that the unsigned long cannot be used as it is in the Java platform.
  <a class='info' href='#Java Unsigned Types'>The proposed set of classes can be found in<span> (</span><span class='info'>, &ldquo;Classes that support unsigned primitive types for Java. All except the unsigned long,&rdquo; .</span><span>)</span></a> [Java Unsigned Types].
</p>
<a name="Acknowledgements"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Acknowledgements</h3>

<p>TBA
</p>
<a name="IANA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
IANA Considerations</h3>

<p>This memo includes no request to IANA.
</p>
<a name="Security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Security Considerations</h3>

<p>The security considerations of the ForCES framework in <a class='info' href='#RFC3746'>[RFC3746]<span> (</span><span class='info'>Yang, L., Dantu, R., Anderson, T., and R. Gopal, &ldquo;Forwarding and Control Element Separation (ForCES) Framework,&rdquo; April&nbsp;2004.</span><span>)</span></a> and <a class='info' href='#RFC5810'>FE-protocol<span> (</span><span class='info'>Doria, A., Hadi Salim, J., Haas, R., Khosravi, H., Wang, W., Dong, L., Gopal, R., and J. Halpern, &ldquo;Forwarding and Control Element Separation (ForCES) Protocol Specification,&rdquo; March&nbsp;2010.</span><span>)</span></a> [RFC5810] are applicable
   in this document.  Implementers or users of ForCES
   FEs and CEs should take these considerations into account.
</p>
<p>Also, as specified in the security considerations section of 
     the <a class='info' href='#RFC5811'>SCTP-TML RFC<span> (</span><span class='info'>Hadi Salim, J. and K. Ogawa, &ldquo;SCTP-Based Transport Mapping Layer (TML) for the Forwarding and Control Element Separation (ForCES) Protocol,&rdquo; March&nbsp;2010.</span><span>)</span></a> [RFC5811]
   the transport-level security, has to be ensured by TLS (Transport
   Layer Security).
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-forces-applicability">[I-D.ietf-forces-applicability]</a></td>
<td class="author-text">Crouch, A., Khosravi, H., Doria, A., Wang, X., and K. Ogawa, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-forces-applicability-08.txt">ForCES Applicability Statement</a>,&rdquo; draft-ietf-forces-applicability-08 (work in progress), February&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-forces-applicability-08.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5810">[RFC5810]</a></td>
<td class="author-text">Doria, A., Hadi Salim, J., Haas, R., Khosravi, H., Wang, W., Dong, L., Gopal, R., and J. Halpern, &ldquo;<a href="http://tools.ietf.org/html/rfc5810">Forwarding and Control Element Separation (ForCES) Protocol Specification</a>,&rdquo; RFC&nbsp;5810, March&nbsp;2010 (<a href="http://www.rfc-editor.org/rfc/rfc5810.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5811">[RFC5811]</a></td>
<td class="author-text">Hadi Salim, J. and K. Ogawa, &ldquo;<a href="http://tools.ietf.org/html/rfc5811">SCTP-Based Transport Mapping Layer (TML) for the Forwarding and Control Element Separation (ForCES) Protocol</a>,&rdquo; RFC&nbsp;5811, March&nbsp;2010 (<a href="http://www.rfc-editor.org/rfc/rfc5811.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5812">[RFC5812]</a></td>
<td class="author-text">Halpern, J. and J. Hadi Salim, &ldquo;<a href="http://tools.ietf.org/html/rfc5812">Forwarding and Control Element Separation (ForCES) Forwarding Element Model</a>,&rdquo; RFC&nbsp;5812, March&nbsp;2010 (<a href="http://www.rfc-editor.org/rfc/rfc5812.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="Java Unsigned Types">[Java Unsigned Types]</a></td>
<td class="author-text">&ldquo;<a href="http://darksleep.com/player/JavaAndUnsignedTypes.html">Classes that support unsigned primitive types for Java. All except the unsigned long</a>.&rdquo;</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2629">[RFC2629]</a></td>
<td class="author-text"><a href="mailto:mrose@not.invisible.net">Rose, M.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2629">Writing I-Ds and RFCs using XML</a>,&rdquo; RFC&nbsp;2629, June&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2629.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2629.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2629.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3552">[RFC3552]</a></td>
<td class="author-text">Rescorla, E. and B. Korver, &ldquo;<a href="http://tools.ietf.org/html/rfc3552">Guidelines for Writing RFC Text on Security Considerations</a>,&rdquo; BCP&nbsp;72, RFC&nbsp;3552, July&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3552.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3654">[RFC3654]</a></td>
<td class="author-text">Khosravi, H. and T. Anderson, &ldquo;<a href="http://tools.ietf.org/html/rfc3654">Requirements for Separation of IP Control and Forwarding</a>,&rdquo; RFC&nbsp;3654, November&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3654.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3746">[RFC3746]</a></td>
<td class="author-text">Yang, L., Dantu, R., Anderson, T., and R. Gopal, &ldquo;<a href="http://tools.ietf.org/html/rfc3746">Forwarding and Control Element Separation (ForCES) Framework</a>,&rdquo; RFC&nbsp;3746, April&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3746.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5226">[RFC5226]</a></td>
<td class="author-text">Narten, T. and H. Alvestrand, &ldquo;<a href="http://tools.ietf.org/html/rfc5226">Guidelines for Writing an IANA Considerations Section in RFCs</a>,&rdquo; BCP&nbsp;26, RFC&nbsp;5226, May&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5226.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Evangelos Haleplidis</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">University of Patras</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Patras,   </td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Greece</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:ehalep@ece.upatras.gr">ehalep@ece.upatras.gr</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Odysseas Koufopavlou</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">University of Patras</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Patras,   </td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Greece</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:odysseas@ece.upatras.gr">odysseas@ece.upatras.gr</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Spyros Denazis</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">University of Patras</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Patras,   </td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Greece</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:sdena@upatras.gr">sdena@upatras.gr</a></td></tr>
</table>
</body></html>
