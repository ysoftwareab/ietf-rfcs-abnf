



LSR Working Group                                         P. Psenak, Ed.
Internet-Draft                                       Cisco Systems, Inc.
Intended status: Standards Track                               A. Lindem
Expires: December 17, 2018                                   L. Ginsberg
                                                           Cisco Systems
                                                           W. Henderickx
                                                                   Nokia
                                                             J. Tantsura
                                                          Nuage Networks
                                                              H. Gredler
                                                            RtBrick Inc.
                                                                J. Drake
                                                        Juniper Networks
                                                           June 15, 2018


           OSPF Link Traffic Engineering (TE) Attribute Reuse
               draft-ietf-ospf-te-link-attr-reuse-04.txt

Abstract

   Various link attributes have been defined in OSPF in the context of
   the MPLS Traffic Engineering (TE) and GMPLS.  Many of these link
   attributes can be used for applications other than MPLS Traffic
   Engineering or GMPLS.  This document defines how to distribute such
   attributes in OSPFv2 and OSPFv3 for applications other than MPLS
   Traffic Engineering or GMPLS.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on December 17, 2018.







Psenak, et al.          Expires December 17, 2018               [Page 1]

Internet-Draft        OSPF Link TE Attributes Reuse            June 2018


Copyright Notice

   Copyright (c) 2018 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

   This document may contain material from IETF Documents or IETF
   Contributions published or made publicly available before November
   10, 2008.  The person(s) controlling the copyright in some of this
   material may not have granted the IETF Trust the right to allow
   modifications of such material outside the IETF Standards Process.
   Without obtaining an adequate license from the person(s) controlling
   the copyright in such materials, this document may not be modified
   outside the IETF Standards Process, and derivative works of it may
   not be created outside the IETF Standards Process, except to format
   it for publication as an RFC or to translate it into languages other
   than English.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   3
     1.1.  Requirements notation . . . . . . . . . . . . . . . . . .   3
   2.  Link attributes examples  . . . . . . . . . . . . . . . . . .   4
   3.  Advertising Link Attributes . . . . . . . . . . . . . . . . .   4
     3.1.  OSPFv2 TE Opaque LSA and OSPFv3 Intra-Area-TE-LSA . . . .   4
     3.2.  OSPFv2 Extended Link Opaque LSA and OSPFv3 E-Router-LSA .   5
     3.3.  Selected Approach . . . . . . . . . . . . . . . . . . . .   6
   4.  Reused TE link attributes . . . . . . . . . . . . . . . . . .   6
     4.1.  Shared Risk Link Group (SRLG) . . . . . . . . . . . . . .   6
     4.2.  Extended Metrics  . . . . . . . . . . . . . . . . . . . .   7
     4.3.  Administrative Group  . . . . . . . . . . . . . . . . . .   8
   5.  Advertisement of Application Specific Values  . . . . . . . .   8
   6.  Maximum Link Bandwidth  . . . . . . . . . . . . . . . . . . .  11
   7.  Local Interface IPv6 Address Sub-TLV  . . . . . . . . . . . .  11
   8.  Remote Interface IPv6 Address Sub-TLV . . . . . . . . . . . .  12
   9.  Deployment Considerations . . . . . . . . . . . . . . . . . .  12
   10. Attribute Advertisements and Enablement . . . . . . . . . . .  12
   11. Backward Compatibility  . . . . . . . . . . . . . . . . . . .  13
   12. Security Considerations . . . . . . . . . . . . . . . . . . .  14



Psenak, et al.          Expires December 17, 2018               [Page 2]

Internet-Draft        OSPF Link TE Attributes Reuse            June 2018


   13. IANA Considerations . . . . . . . . . . . . . . . . . . . . .  14
     13.1.  OSPFv2 . . . . . . . . . . . . . . . . . . . . . . . . .  14
     13.2.  OSPFv3 . . . . . . . . . . . . . . . . . . . . . . . . .  14
   14. Acknowledgments . . . . . . . . . . . . . . . . . . . . . . .  15
   15. References  . . . . . . . . . . . . . . . . . . . . . . . . .  15
     15.1.  Normative References . . . . . . . . . . . . . . . . . .  15
     15.2.  Informative References . . . . . . . . . . . . . . . . .  16
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  18

1.  Introduction

   Various link attributes have been defined in OSPFv2 [RFC2328]  and
   OSPFv3 [RFC5340] in the context of the MPLS traffic engineering and
   GMPLS.  All these attributes are distributed by OSPFv2 as sub-TLVs of
   the Link-TLV advertised in the OSPFv2 TE Opaque LSA [RFC3630].  In
   OSPFv3, they are distributed as sub-TLVs of the Link-TLV advertised
   in the OSPFv3 Intra-Area-TE-LSA as defined in [RFC5329].

   Many of these link attributes are useful outside of traditional MPLS
   Traffic Engineering or GMPLS.  This brings its own set of problems,
   in particular how to distribute these link attributes in OSPFv2 and
   OSPFv3 when MPLS TE and GMPLS are not deployed or are deployed in
   parallel with other applications that use these link attributes.

   [RFC7855] discusses use cases/requirements for SR.  Included among
   these use cases is SRTE.  If both RSVP-TE and SRTE are deployed in a
   network, link attribute advertisements can be used by one or both of
   these applications.  As there is no requirement for the link
   attributes advertised on a given link used by SRTE to be identical to
   the link attributes advertised on that same link used by RSVP-TE,
   there is a clear requirement to indicate independently which link
   attribute advertisements are to be used by each application.

   As the number of applications which may wish to utilize link
   attributes may grow in the future, an additional requirement is that
   the extensions defined allow the association of additional
   applications to link attributes without altering the format of the
   advertisements or introducing new backwards compatibility issues.

   Finally, there may still be many cases where a single attribute value
   can be shared among multiple applications, so the solution should
   minimize advertising duplicate link/attribute when possible.

1.1.  Requirements notation

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].



Psenak, et al.          Expires December 17, 2018               [Page 3]

Internet-Draft        OSPF Link TE Attributes Reuse            June 2018


2.  Link attributes examples

   This section lists some of the link attributes originally defined for
   MPLS Traffic Engineering that can be used for other applications in
   OSPFv2 and OSPFv3.  The list doesn't necessarily contain all the
   required attributes.

   1.  Remote Interface IP address [RFC3630] - OSPFv2 currently cannot
       distinguish between parallel links between two OSPFv2 routers.
       As a result, the two-way connectivity check performed during SPF
       may succeed when the two routers disagree on which of the links
       to use for data traffic.

   2.  Link Local/Remote Identifiers - [RFC4203] - Used for the two-way
       connectivity check for parallel unnumbered links.  Also used for
       identifying adjacencies for unnumbered links in Segment Routing
       traffic engineering.

   3.  Shared Risk Link Group (SRLG) [RFC4203]  - In IPFRR, the SRLG is
       used to compute diverse backup paths [RFC5714].

   4.  Unidirectional Link Delay/Loss Metrics [RFC7471] - Could be used
       for the shortest path first (SPF) computation using alternate
       metrics within an OSPF area.

3.  Advertising Link Attributes

   This section outlines possible approaches for advertising link
   attributes originally defined for MPLS Traffic Engineering or GMPLS
   when they are used for other applications.

3.1.  OSPFv2 TE Opaque LSA and OSPFv3 Intra-Area-TE-LSA

   One approach for advertising link attributes is to continue to use
   the OSPFv2 TE Opaque LSA [RFC3630] or the OSPFv3 Intra-Area-TE-LSA
   [RFC5329].  There are several problems with this approach:

   1.  Whenever the link is advertised in an OSPFv2 TE Opaque LSA or in
       an OSPFv3 Intra-Area-TE-LSA, the link becomes a part of the TE
       topology, which may not match IP routed topology.  By making the
       link part of the TE topology, remote nodes may mistakenly believe
       that the link is available for MPLS TE or GMPLS, when, in fact,
       MPLS is not enabled on the link.

   2.  The OSPFv2 TE Opaque LSA and OSPFv3 Intra-Area-TE-LSA advertise
       link attributes that are not used or required by MPLS TE or
       GMPLS.  There is no mechanism in these TE LSAs to indicate which




Psenak, et al.          Expires December 17, 2018               [Page 4]

Internet-Draft        OSPF Link TE Attributes Reuse            June 2018


       of the link attributes are passed to the MPLS TE application and
       which are used by other applications including OSPF itself.

   3.  Link attributes used for non-TE applications are partitioned
       across multiple LSAs - the TE Opaque LSA and the Extended Link
       Opaque LSA in OSPFv2 and the OSPFv3 Intra-Area-TE-LSA and OSPFv3
       Extended LSA Router-Link TLV [RFC8362] in OSPFv3.  This
       partitioning will require implementations to lookup multiple LSAs
       to extract link attributes for a single link, bringing needless
       complexity to OSPF implementations.

   The advantage of this approach is that there is no additional
   standardization requirement to advertise the TE/GMPL attributes for
   other applications.  Additionally, link attributes are only
   advertised once when both OSPF TE and other applications are deployed
   on the same link.  This is not expected to be a common deployment
   scenario.

3.2.  OSPFv2 Extended Link Opaque LSA and OSPFv3 E-Router-LSA

   An alternative approach for advertising link attributes is to use
   Extended Link Opaque LSAs as defined in [RFC7684] for OSPFv2 and
   Extended Router-LSAs [RFC8362] for OSPFv3.  These LSAs were defined
   as a generic containers for distribution of the extended link
   attributes.  There are several advantages in using them:

   1.  Advertisement of the link attributes does not make the link part
       of the TE topology.  It avoids any conflicts and is fully
       compatible with the [RFC3630] and [RFC5329].

   2.  The OSPFv2 TE Opaque LSA and OSPFv3 Intra-Area-TE-LSA remains
       truly opaque to OSPFv2 and OSPFv3 as originally defined in
       [RFC3630] and [RFC5329] respectively.  Their contents are not
       inspected by OSPF, that act as a pure transport.

   3.  There is clear distinction between link attributes used by TE and
       link attributes used by other OSPFv2 or OSPFv3 applications.

   4.  All link attributes that are used by other applications are
       advertised in a single LSA, the Extended Link Opaque LSA in
       OSPFv2 or the OSPFv3 E-Router-LSA [RFC8362] in OSPFv3.

   The disadvantage of this approach is that in rare cases, the same
   link attribute is advertised in both the TE Opaque and Extended Link
   Attribute LSAs in OSPFv2 or the Intra-Area-TE-LSA and E-Router-LSA in
   OSPFv3.  Additionally, there will be additional standardization
   effort.  However, this could also be viewed as an advantage as the




Psenak, et al.          Expires December 17, 2018               [Page 5]

Internet-Draft        OSPF Link TE Attributes Reuse            June 2018


   non-TE use cases for the TE link attributes are documented and
   validated by the LSR working group.

3.3.  Selected Approach

   It is RECOMMENDED to use the Extended Link Opaque LSA [RFC7684] and
   E-Router-LSA [RFC8362] to advertise any link attributes used for non-
   TE applications in OSPFv2 or OSPFv3 respectively, including those
   that have been originally defined for TE applications.

   It is also RECOMMENDED that TE link attributes used for RSVP-TE/GMPLS
   continue to use OSPFv2 TE Opaque LSA [RFC3630] and OSPFv3 Intra-Area-
   TE-LSA [RFC5329].

   It is also RECOMMENDED to keep the format of the link attribute TLVs
   that have been defined for TE applications unchanged even when they
   are used for non-TE applications.

   Finally, it is RECOMMENDED to allocate unique code points for these
   TE link attribute TLVs in the OSPFv2 Extended Link TLV Sub-TLV
   Registry [RFC7684] and in the OSPFv3 Extended LSA Sub-TLV Registry
   [RFC8362].  For each reused TLV, the code point will be defined in an
   IETF document along with the expected use-case(s).

4.  Reused TE link attributes

   This section defines the use case and code points for the OSPFv2
   Extended Link TLV Sub-TLV Registry and OSPFv3 Extended LSA Sub-TLV
   Registry for some of the link attributes that have been originally
   defined for TE or GMPLS.

   Remote interface IP address and Link Local/Remote Identifiers have
   been added as sub-TLVs of OSPFv2 Extended Link TLV by [RFC8379].
   Link Local/Remote Identifiers are already included in the OSPFv3
   Router-Link TLV [RFC8362].

4.1.  Shared Risk Link Group (SRLG)

   The SRLG of a link can be used in IPFRR to compute a backup path that
   does not share any SRLG group with the protected link.

   To advertise the SRLG of the link in the OSPFv2 Extended Link TLV,
   the same format for the sub-TLV defined in section 1.3 of [RFC4203]
   is used and TLV type TBD1 is used.  Similarly, for OSPFv3 to
   advertise the SRLG in the OSPFv3 Router-Link TLV, TLV type TBD2 is
   used.





Psenak, et al.          Expires December 17, 2018               [Page 6]

Internet-Draft        OSPF Link TE Attributes Reuse            June 2018


4.2.  Extended Metrics

   [RFC3630] defines several link bandwidth types.  [RFC7471] defines
   extended link metrics that are based on link bandwidth, delay and
   loss characteristics.  All these can be used to compute best paths
   within an OSPF area to satisfy requirements for bandwidth, delay
   (nominal or worst case) or loss.

   To advertise extended link metrics in the OSPFv2 Extended Link TLV,
   the same format for the sub-TLVs defined in [RFC7471] is used with
   the following TLV types:

      TBD3 - Unidirectional Link Delay

      TBD4 - Min/Max Unidirectional Link Delay

      TBD5 - Unidirectional Delay Variation

      TBD6 - Unidirectional Link Loss

      TBD7 - Unidirectional Residual Bandwidth

      TBD8 - Unidirectional Available Bandwidth

      TBD9 - Unidirectional Utilized Bandwidth

   To advertise extended link metrics in the OSPFv3 Extended LSA Router-
   Link TLV, the same format for the sub-TLVs defined in [RFC7471] is
   used with the following TLV types:

      TBD10 - Unidirectional Link Delay

      TBD11 - Min/Max Unidirectional Link Delay

      TBD12 - Unidirectional Delay Variation

      TBD13 - Unidirectional Link Loss

      TBD14 - Unidirectional Residual Bandwidth

      TBD15 - Unidirectional Available Bandwidth

      TBD16 - Unidirectional Utilized Bandwidth








Psenak, et al.          Expires December 17, 2018               [Page 7]

Internet-Draft        OSPF Link TE Attributes Reuse            June 2018


4.3.  Administrative Group

   [RFC3630] and [RFC7308] define the Administrative Group and Extended
   Administrative Group sub-TLVs respectively.

   One use case where advertisement of the Extended Administrative
   Group(s) for a link is required is described in
   [I-D.ietf-lsr-flex-algo].

   To advertise the Administrative Group and Extended Administrative
   Group in the OSPFv2 Extended Link TLV, the same format for the sub-
   TLVs defined in [RFC3630] and [RFC7308] is used with the following
   TLV types:

      TBD17 - Administrative Group

      TBD18 - Extended Administrative Group

   To advertise Administrative Group and Extended Administrative Group
   in the OSPFv3 Router-Link TLV, the same format for the sub-TLVs
   defined in [RFC3630] and [RFC7308] is used with the following TLV
   types:

      TBD19 - Administrative Group

      TBD20 - Extended Administrative Group

5.  Advertisement of Application Specific Values

   Multiple applications can utilize link attributes that are advertised
   by OSPF.  Some examples of applications using the link attributes are
   Segment Routing Traffic Engineering and LFA [RFC5286].

   In some cases the link attribute MAY have different values for
   different applications.  An example could be SRLG [Section 4.1],
   where values used by LFA could be different then the values used by
   Segment Routing Traffic Engineering.

   To allow advertisement of the application specific values of the link
   attribute, a new Application Specific Link Attributes (ASLA) sub-TLV
   is defined.  The ASLA sub-TLV is a sub-TLV of the OSPFv2 Extended
   Link TLV [RFC7471] and OSPFv3 Router-Link TLV [RFC8362].  The ASLA
   sub-TLV is an optional sub-TLV and can appear multiple times in the
   OSPFv2 Extended Link TLV and OSPFv3 Router-Link TLV.  It has the
   following format:






Psenak, et al.          Expires December 17, 2018               [Page 8]

Internet-Draft        OSPF Link TE Attributes Reuse            June 2018


    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |              Type             |             Length            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |     SABML     |     UDABML    |            Reserved           |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                Standard Application Bit-Mask                  |
   +-                                                             -+
   |                            ...                                |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                User Defined Application Bit-Mask              |
   +-                                                             -+
   |                            ...                                |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                      Link Attribute sub-sub-TLVs              |
   +-                                                             -+
   |                            ...                                |

   where:

      Type: TBD21 (OSPFv2), TBD22 (OSPFv3)

      Length: variable

      SABML: Standard Application Bit-Mask Length.  If the Standard
      Application Bit-Mask is not present, the Standard Application Bit-
      Mask Length MUST be set to 0.

      UDABML: User Defined Application Bit-Mask Length.  If the User
      Defined Application Bit-Mask is not present, the User Defined
      Application Bit-Mask Length MUST be set to 0.

      Standard Application Bit-Mask: Optional set of bits, where each
      bit represents a single standard application.  The following bits
      are defined by this document:

         Bit-0: RSVP Traffic Engineering

         Bit-1: Segment Routing Traffic Engineering

         Bit-2: Loop Free Alternate (LFA).  Includes all LFA types.

         Bit-3: Flexible Algorithm as described in
         [I-D.ietf-lsr-flex-algo].

      User Defined Application Bit-Mask: Optional set of bits, where
      each bit represents a single user defined application.



Psenak, et al.          Expires December 17, 2018               [Page 9]

Internet-Draft        OSPF Link TE Attributes Reuse            June 2018


   Standard Application Bits are defined/sent starting with Bit 0.
   Additional bit definitions that are defined in the future SHOULD be
   assigned in ascending bit order so as to minimize the number of
   octets that will need to be transmitted.

   User Defined Application bits have no relationship to Standard
   Application bits and are NOT managed by IANA or any other standards
   body.  It is recommended that bits are used starting with Bit 0 so as
   to minimize the number of octets required to advertise all of them.

   Undefined bits in both Bit-Masks MUST be transmitted as 0 and MUST be
   ignored on receipt.  Bits that are NOT transmitted MUST be treated as
   if they are set to 0 on receipt.

   If the link attribute advertisement is limited to be used by a
   specific set of applications, corresponding Bit-Masks MUST be present
   and application specific bit(s) MUST be set for all applications that
   use the link attributes advertised in the ASLA sub-TLV.

   Application Bit-Masks apply to all link attributes that support
   application specific values and are advertised in the ASLA sub-TLV.

   The advantage of not making the Application Bit-Masks part of the
   attribute advertisement itself is that we can keep the format of the
   link attributes that have been defined previously and reuse the same
   format when advertising them in the ASLA sub-TLV.

   When neither the Standard Application Bits nor the User Defined
   Application bits are set (i.e., both SABML and UDABML are 0) in the
   ASLA sub-TLV, then the link attributes included in it MUST be
   considered as being applicable to all applications.

   If, however, another advertisement of the same link attribute
   includes any Application Bit-Mask in the ASLA sub-TLV, applications
   that are listed in the Application Bit-Masks of such ASLA sub-TLV
   SHOULD use the attribute advertisement which has the application
   specific bit set in the Application Bit-Masks.

   If the same application is listed in the Application Bit-Masks of
   more then one ASLA sub-TLV, the application SHOULD use the first
   advertisement and ignore any subsequent advertisements of the same
   attribute.  This situation SHOULD be logged as an error.

   This document defines the initial set of link attributes that MUST
   use ASLA sub-TLV if advertised in the OSPFv2 Extended Link TLV or in
   the OSPFv3 Router-Link TLV.  If the ASLA sub-TLV includes any link
   attribute(s) NOT listed below, they MUST be ignored.  Documents which
   define new link attributes MUST state whether the new attributes



Psenak, et al.          Expires December 17, 2018              [Page 10]

Internet-Draft        OSPF Link TE Attributes Reuse            June 2018


   support application specific values and as such MUST be advertised in
   an ASLA sub-TLV.  The link attributes that MUST be advertised in ASLA
   sub-TLVs are:

      - Shared Risk Link Group

      - Unidirectional Link Delay

      - Min/Max Unidirectional Link Delay

      - Unidirectional Delay Variation

      - Unidirectional Link Loss

      - Unidirectional Residual Bandwidth

      - Unidirectional Available Bandwidth

      - Unidirectional Utilized Bandwidth

      - Administrative Group

      - Extended Administrative Group

6.  Maximum Link Bandwidth

   Maximum link bandwidth is an application independent attribute of the
   link that is defined in [RFC3630].  Because it is an application
   independent attribute, it MUST NOT be advertised in ASLA sub-TLV.
   Instead, it MAY be advertised as a sub-TLV of the Extended Link
   Opaque LSA Extended Link TLV in OSPFv2 [RFC7684] or sub-TLV of OSPFv3
   E-Router-LSA Router-Link TLV in OSPFv3 [RFC8362].

   To advertise the Maximum link bandwidth in the OSPFv2 Extended Link
   TLV, the same format for sub-TLV defined in [RFC3630] is used with
   TLV type TBD23.

   To advertise the Maximum link bandwidth in the OSPFv3 Router-Link
   TLV, the same format for sub-TLV defined in [RFC3630] is used with
   TLV type TBD24.

7.  Local Interface IPv6 Address Sub-TLV

   The Local Interface IPv6 Address Sub-TLV is an application
   independent attribute of the link that is defined in [RFC5329].
   Because it is an application independent attribute, it MUST NOT be
   advertised in the ASLA sub-TLV.  Instead, it MAY be advertised as a
   sub-TLV of the OSPFv3 E-Router-LSA Router-Link TLV [RFC8362].



Psenak, et al.          Expires December 17, 2018              [Page 11]

Internet-Draft        OSPF Link TE Attributes Reuse            June 2018


   To advertise the Local Interface IPv6 Address Sub-TLV in the OSPFv3
   Router-Link TLV, the same format for sub-TLV defined in [RFC5329] is
   used with TLV type TBD25.

8.  Remote Interface IPv6 Address Sub-TLV

   The Remote Interface IPv6 Address Sub-TLV is an application
   independent attribute of the link that is defined in [RFC5329].
   Because it is an application independent attribute, it MUST NOT be
   advertised in the ASLA sub-TLV.  Instead, it MAY be advertised as a
   sub-TLV of the OSPFv3 E-Router-LSA Router-Link TLV [RFC8362].

   To advertise the Remote Interface IPv6 Address Sub-TLV in the OSPFv3
   Router-Link TLV, the same format for sub-TLV defined in [RFC5329] is
   used with TLV type TBD26.

9.  Deployment Considerations

   If link attributes are advertised associated with zero length
   application bit masks for both standard applications and user defined
   applications, then that set of link attributes MAY be used by any
   application.  If support for a new application is introduced on any
   node in a network in the presence of such advertisements, these
   advertisements MAY be used by the new application.  If this is not
   what is intended, then existing advertisements MUST be readvertised
   with an explicit set of applications specified before a new
   application is introduced.

10.  Attribute Advertisements and Enablement

   This document defines extensions to support the advertisement of
   application specific link attributes.

   Whether the presence of link attribute advertisements for a given
   application indicates that the application is enabled on that link
   depends upon the application.  Similarly, whether the absence of link
   attribute advertisements indicates that the application is not
   enabled depends upon the application.

   In the case of RSVP-TE, the advertisement of application specific
   link attributes implies that RSVP is enabled on that link.

   In the case of SRTE, advertisement of application specific link
   attributes does NOT indicate enablement of SRTE.  The advertisements
   are only used to support constraints which may be applied when
   specifying an explicit path.  SRTE is implicitly enabled on all links
   which are part of the Segment Routing enabled topology independent of
   the existence of link attribute advertisements.



Psenak, et al.          Expires December 17, 2018              [Page 12]

Internet-Draft        OSPF Link TE Attributes Reuse            June 2018


   In the case of LFA, advertisement of application specific link
   attributes does NOT indicate enablement of LFA on that link.
   Enablement is controlled by local configuration.

   In the case of Flexible Algorithm, advertisement of application
   specific link attributes does NOT indicate enablement of Flexible
   Algorithm on that link.  Rather the attributes are used to determine
   what links are included/excluded in the algorithm specific
   constrained SPF.  This is fully specified in
   [I-D.ietf-lsr-flex-algo].

   If, in the future, additional standard applications are defined to
   use this mechanism, the specification defining this use MUST define
   the relationship between application specific link attribute
   advertisements and enablement for that application.

   This document allows the advertisement of application specific link
   attributes with no application identifiers i.e., both the Standard
   Application Bit Mask and the User Defined Application Bit Mask are
   not present Section 5.  This supports the use of the link attribute
   by any application.  In the presence of an application where the
   advertisement of link attribute advertisements is used to infer the
   enablement of an application on that link (e.g., RSVP-TE), the
   absence of the application identifier leaves ambiguous whether that
   application is enabled on such a link.  This needs to be considered
   when making use of the "any application" encoding.

11.  Backward Compatibility

   Link attributes may be concurrently advertised in both the TE Opaque
   LSA and the Extended Link Opaque LSA in OSPFv2 and the OSPFv3 Intra-
   Area-TE-LSA and OSPFv3 Extended LSA Router-Link TLV in OSPFv3.

   In fact, there is at least one OSPF implementation that utilizes the
   link attributes advertised in TE Opaque LSAs [RFC3630] for Non-RSVP
   TE applications.  For example, this implementation of LFA and remote
   LFA utilizes links attributes such as Shared Risk Link Groups (SRLG)
   [RFC4203] and Admin Group [[RFC3630] advertised in TE Opaque LSAs.
   These applications are described in [RFC5286], [RFC7490], [RFC7916]
   and [RFC8102].

   When an OSPF routing domain includes routers using link attributes
   from the OSPFv2 TE Opaque LSAs or the OSPFv3 Intra-Area-TE-LSA for
   Non-RSVP TE applications such as LFA, OSPF routers in that domain
   SHOULD continue to advertise such OSPFv2 TE Opaque LSAs or the OSPFv3
   Intra-Area-TE-LSA.  If there are also OSPF routers using the link
   attributes described herein for any other application, OSPF routers
   in the routing domain will also need to advertise these attributes in



Psenak, et al.          Expires December 17, 2018              [Page 13]

Internet-Draft        OSPF Link TE Attributes Reuse            June 2018


   OSPFv2 Extended Link Attributes LSAs or OSPFv3 E-Router-LSA.  In such
   a deployment, the advertised attributes SHOULD be the same and Non-
   RSVP application access to link attributes is a matter of local
   policy.

12.  Security Considerations

   Implementations must assure that malformed TLV and Sub-TLV
   permutations do not result in errors that cause hard OSPF failures.

13.  IANA Considerations

13.1.  OSPFv2

   OSPFv2 Extended Link TLV Sub-TLVs registry [RFC7684] defines sub-TLVs
   at any level of nesting for OSPFv2 Extended Link TLVs.  This
   specification updates OSPFv2 Extended Link TLV sub-TLVs registry with
   the following TLV types:

      TBD21 (10 Recommended) - Application Specific Link Attributes

      TBD1 (11 Recommended) - Shared Risk Link Group

      TBD3 (12 Recommended) - Unidirectional Link Delay

      TBD4 (13 Recommended) - Min/Max Unidirectional Link Delay

      TBD5 (14 Recommended) - Unidirectional Delay Variation

      TBD6 (15 Recommended) - Unidirectional Link Loss

      TBD7 (16 Recommended) - Unidirectional Residual Bandwidth

      TBD8 (17 Recommended) - Unidirectional Available Bandwidth

      TBD9 (18 Recommended) - Unidirectional Utilized Bandwidth

      TBD9 (19 Recommended) - Administrative Group

      TBD17 (20 Recommended) - Extended Administrative Group

      TBD23 (21 Recommended) - Maximum Link Bandwidth

13.2.  OSPFv3

   OSPFv3 Extended LSA Sub-TLV Registry [RFC8362] defines sub-TLVs at
   any level of nesting for OSPFv3 Extended LSAs.  This specification




Psenak, et al.          Expires December 17, 2018              [Page 14]

Internet-Draft        OSPF Link TE Attributes Reuse            June 2018


   updates OSPFv3 Extended LSA Sub-TLV Registry with the following TLV
   types:

      TBD22 (9 Recommended) - Application Specific Link Attributes

      TBD2 (10 Recommended) - Shared Risk Link Group

      TBD10 (11 Recommended) - Unidirectional Link Delay

      TBD11 (12 Recommended) - Min/Max Unidirectional Link Delay

      TBD12 (13 Recommended) - Unidirectional Delay Variation

      TBD13 (14 Recommended) - Unidirectional Link Loss

      TBD14 (15 Recommended) - Unidirectional Residual Bandwidth

      TBD15 (16 Recommended) - Unidirectional Available Bandwidth

      TBD16 (17 Recommended) - Unidirectional Utilized Bandwidth

      TBD19 (18 Recommended) - Administrative Group

      TBD20 (19 Recommended) - Extended Administrative Group

      TBD24 (20 Recommended) - Maximum Link Bandwidth

      TBD25 (21 Recommended) - Local Interface IPv6 Address Sub-TLV

      TBD26 (22 Recommended) - Local Interface IPv6 Address Sub-TLV

14.  Acknowledgments

   Thanks to Chris Bowers for his review and comments.

15.  References

15.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC3630]  Katz, D., Kompella, K., and D. Yeung, "Traffic Engineering
              (TE) Extensions to OSPF Version 2", RFC 3630,
              DOI 10.17487/RFC3630, September 2003,
              <https://www.rfc-editor.org/info/rfc3630>.



Psenak, et al.          Expires December 17, 2018              [Page 15]

Internet-Draft        OSPF Link TE Attributes Reuse            June 2018


   [RFC5329]  Ishiguro, K., Manral, V., Davey, A., and A. Lindem, Ed.,
              "Traffic Engineering Extensions to OSPF Version 3",
              RFC 5329, DOI 10.17487/RFC5329, September 2008,
              <https://www.rfc-editor.org/info/rfc5329>.

   [RFC5340]  Coltun, R., Ferguson, D., Moy, J., and A. Lindem, "OSPF
              for IPv6", RFC 5340, DOI 10.17487/RFC5340, July 2008,
              <https://www.rfc-editor.org/info/rfc5340>.

   [RFC5714]  Shand, M. and S. Bryant, "IP Fast Reroute Framework",
              RFC 5714, DOI 10.17487/RFC5714, January 2010,
              <https://www.rfc-editor.org/info/rfc5714>.

   [RFC7308]  Osborne, E., "Extended Administrative Groups in MPLS
              Traffic Engineering (MPLS-TE)", RFC 7308,
              DOI 10.17487/RFC7308, July 2014,
              <https://www.rfc-editor.org/info/rfc7308>.

   [RFC7684]  Psenak, P., Gredler, H., Shakir, R., Henderickx, W.,
              Tantsura, J., and A. Lindem, "OSPFv2 Prefix/Link Attribute
              Advertisement", RFC 7684, DOI 10.17487/RFC7684, November
              2015, <https://www.rfc-editor.org/info/rfc7684>.

   [RFC8362]  Lindem, A., Roy, A., Goethals, D., Reddy Vallem, V., and
              F. Baker, "OSPFv3 Link State Advertisement (LSA)
              Extensibility", RFC 8362, DOI 10.17487/RFC8362, April
              2018, <https://www.rfc-editor.org/info/rfc8362>.

15.2.  Informative References

   [I-D.ietf-idr-ls-distribution]
              Gredler, H., Medved, J., Previdi, S., Farrel, A., and S.
              Ray, "North-Bound Distribution of Link-State and TE
              Information using BGP", draft-ietf-idr-ls-distribution-13
              (work in progress), October 2015.

   [I-D.ietf-lsr-flex-algo]
              Psenak, P., Hegde, S., Filsfils, C., Talaulikar, K., and
              A. Gulko, "IGP Flexible Algorithm", draft-ietf-lsr-flex-
              algo-00 (work in progress), May 2018.

   [I-D.ietf-ospf-segment-routing-extensions]
              Psenak, P., Previdi, S., Filsfils, C., Gredler, H.,
              Shakir, R., Henderickx, W., and J. Tantsura, "OSPF
              Extensions for Segment Routing", draft-ietf-ospf-segment-
              routing-extensions-25 (work in progress), April 2018.





Psenak, et al.          Expires December 17, 2018              [Page 16]

Internet-Draft        OSPF Link TE Attributes Reuse            June 2018


   [RFC2328]  Moy, J., "OSPF Version 2", STD 54, RFC 2328,
              DOI 10.17487/RFC2328, April 1998,
              <https://www.rfc-editor.org/info/rfc2328>.

   [RFC4203]  Kompella, K., Ed. and Y. Rekhter, Ed., "OSPF Extensions in
              Support of Generalized Multi-Protocol Label Switching
              (GMPLS)", RFC 4203, DOI 10.17487/RFC4203, October 2005,
              <https://www.rfc-editor.org/info/rfc4203>.

   [RFC5286]  Atlas, A., Ed. and A. Zinin, Ed., "Basic Specification for
              IP Fast Reroute: Loop-Free Alternates", RFC 5286,
              DOI 10.17487/RFC5286, September 2008,
              <https://www.rfc-editor.org/info/rfc5286>.

   [RFC7471]  Giacalone, S., Ward, D., Drake, J., Atlas, A., and S.
              Previdi, "OSPF Traffic Engineering (TE) Metric
              Extensions", RFC 7471, DOI 10.17487/RFC7471, March 2015,
              <https://www.rfc-editor.org/info/rfc7471>.

   [RFC7490]  Bryant, S., Filsfils, C., Previdi, S., Shand, M., and N.
              So, "Remote Loop-Free Alternate (LFA) Fast Reroute (FRR)",
              RFC 7490, DOI 10.17487/RFC7490, April 2015,
              <https://www.rfc-editor.org/info/rfc7490>.

   [RFC7855]  Previdi, S., Ed., Filsfils, C., Ed., Decraene, B.,
              Litkowski, S., Horneffer, M., and R. Shakir, "Source
              Packet Routing in Networking (SPRING) Problem Statement
              and Requirements", RFC 7855, DOI 10.17487/RFC7855, May
              2016, <https://www.rfc-editor.org/info/rfc7855>.

   [RFC7916]  Litkowski, S., Ed., Decraene, B., Filsfils, C., Raza, K.,
              Horneffer, M., and P. Sarkar, "Operational Management of
              Loop-Free Alternates", RFC 7916, DOI 10.17487/RFC7916,
              July 2016, <https://www.rfc-editor.org/info/rfc7916>.

   [RFC8102]  Sarkar, P., Ed., Hegde, S., Bowers, C., Gredler, H., and
              S. Litkowski, "Remote-LFA Node Protection and
              Manageability", RFC 8102, DOI 10.17487/RFC8102, March
              2017, <https://www.rfc-editor.org/info/rfc8102>.

   [RFC8379]  Hegde, S., Sarkar, P., Gredler, H., Nanduri, M., and L.
              Jalil, "OSPF Graceful Link Shutdown", RFC 8379,
              DOI 10.17487/RFC8379, May 2018,
              <https://www.rfc-editor.org/info/rfc8379>.







Psenak, et al.          Expires December 17, 2018              [Page 17]

Internet-Draft        OSPF Link TE Attributes Reuse            June 2018


Authors' Addresses

   Peter Psenak (editor)
   Cisco Systems, Inc.
   Eurovea Centre, Central 3
   Pribinova Street 10
   Bratislava  81109
   Slovakia

   Email: ppsenak@cisco.com


   Acee Lindem
   Cisco Systems
   301 Midenhall Way
   Cary, NC  27513
   USA

   Email: acee@cisco.com


   Les Ginsberg
   Cisco Systems
   821 Alder Drive
   MILPITAS, CA  95035
   USA

   Email: ginsberg@cisco.com


   Wim Henderickx
   Nokia
   Copernicuslaan 50
   Antwerp, 2018  94089
   Belgium

   Email: wim.henderickx@nokia.com


   Jeff Tantsura
   Nuage Networks
   US

   Email: jefftant.ietf@gmail.com







Psenak, et al.          Expires December 17, 2018              [Page 18]

Internet-Draft        OSPF Link TE Attributes Reuse            June 2018


   Hannes Gredler
   RtBrick Inc.

   Email: hannes@rtbrick.com


   John Drake
   Juniper Networks

   Email: jdrake@juniper.net









































Psenak, et al.          Expires December 17, 2018              [Page 19]
