



I2RS working group                                              S. Hares
Internet-Draft                                                   L. Wang
Intended status: Standards Track                                  Huawei
Expires: May 14, 2015                                  November 10, 2014


                 Comparison Between 2 OSPF Yang Drafts
                 draft-hares-i2rs-ospf-compare-yang-00

Abstract

   This document contains a comparison of two OSPF yang models: draft-
   yeung-netmod-ospf-02 and draft-wang-i2rs-ospf-dm.  The yang model in
   draft-yeung-netmod-ospf-02 is model focused on configuration.  The
   yang model in draft-wang-i2rs-ospf-dm-00 is focused on the status and
   ephemeral state changes needed for the I2RS interface.  The
   conclusion of comparison is that there little overlap except the
   definitions of common ospf structures.  The draft-wang-i2rs-ospf-
   dm-00 is necessary to fulfil a majority of the requirement drawn from
   the IGP use cases in the I2RS use cases.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on May 14, 2015.

Copyright Notice

   Copyright (c) 2014 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect



Hares & Wang              Expires May 14, 2015                  [Page 1]

Internet-Draft         ospf yang i2rs-cfg Compare          November 2014


   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Definitions and Acronyms  . . . . . . . . . . . . . . . . . .   3
   3.  Comparison of draft-yeung-netmod-ospf-01 with draft-wang-
       ospf-dm-00  . . . . . . . . . . . . . . . . . . . . . . . . .   3
   4.  Comparison of draft-yeung-netmod-ospf-02 with draft-wang-
       ospf-dm-00  . . . . . . . . . . . . . . . . . . . . . . . . .   4
   5.  Differences between the drafts  . . . . . . . . . . . . . . .   4
   6.  Unique features for I2RS IGP Requirements . . . . . . . . . .   4
     6.1.  mt-rib  . . . . . . . . . . . . . . . . . . . . . . . . .   5
     6.2.  nbr-list  . . . . . . . . . . . . . . . . . . . . . . . .   5
     6.3.  router-number . . . . . . . . . . . . . . . . . . . . . .   6
     6.4.  route-info-list . . . . . . . . . . . . . . . . . . . . .   7
     6.5.  ospf route status information . . . . . . . . . . . . . .   7
   7.  Merge Suggestions . . . . . . . . . . . . . . . . . . . . . .   8
   8.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   8
   9.  Security Considerations . . . . . . . . . . . . . . . . . . .   8
   10. Informative References  . . . . . . . . . . . . . . . . . . .   8
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   9

1.  Introduction

   The Interface to the Routing System (I2RS) provides read and write
   access to the information and state within the routing process within
   routing elements.  The I2RS client interacts with one or more I2RS
   agents to collect information from network routing systems.  The
   processing of collecting information at the I2RS agent may require
   the I2RS Agent to filter certain information, group pieces of
   information, or perform actions on the I2rs collected information
   based on specific I2rs policies.

   This draft is a comparison of the following two OSPF yang models:
   [I-D.yeung-netmod-ospf], and [I-D.wang-i2rs-ospf-dm].  The comparison
   provides an overview of the differences, overlaps, and unique
   features of each yang model.  The analysis also evaluates whether
   both models or a single model is necessary to satisfy the
   requirements for the IGP use cases found in the
   [I-D.ietf-i2rs-usecase-reqs-summary].  Additional explanatory
   information on the [I-D.wang-i2rs-ospf-dm] is available in the
   [I-D.wu-i2rs-ospf-info-model].





Hares & Wang              Expires May 14, 2015                  [Page 2]

Internet-Draft         ospf yang i2rs-cfg Compare          November 2014


   At this time the I2RS chairs have determined that the IGP use cases
   found in the [I-D.ietf-i2rs-usecase-reqs-summary] are out of scope.

   The rest of this draft is the details so those who desire "sounds
   bytes" level reading may stop reading now.

2.  Definitions and Acronyms

      BGP - Border Gateway Protocol version 4

      CLI: Command Line Interface

      IGP: Interior Gateway Protocol

      I2RS: Interface to (2) Routing system.

      Information Model: An abstract model of a conceptual domain,
      independent of a specific implementations or data representation

      INSTANCE: Routing Code often has the ability to spin up multiple
      copies of itself into virtual machines.  Each Routing code
      instance or each protocol instance is denoted as Foo_INSTANCE in
      the text below.

      NETCONF: The Network Configuration Protocol

      RESTCONF: The RESTCONF Protocol

3.  Comparison of draft-yeung-netmod-ospf-01 with draft-wang-ospf-dm-00

   The draft-yeung-netmod-ospf-01 has substantial differences with
   [I-D.wang-i2rs-ospf-dm].  However, these differences are most mostly
   configuration, in which the configurations utilize different views:
   ospf-view (protocol), ospf-area-view, and ospf-interface-view.
   [I-D.wang-i2rs-ospf-dm] has a similar structure for the following
   group and type definitions: ospf ,ospf-area, ospf interface and TE
   information.  In the draft [I-D.wang-i2rs-ospf-dm] this information
   is just for the definitions in order to attach the necessary status
   status.  The draft [I-D.wang-i2rs-ospf-dm] does not provide any
   configuration.  The real-time status information provided by
   [I-D.wang-i2rs-ospf-dm] includes: ospf-mt, ospf-rib, ospf-neighbor,
   ospf-lsa-database, ospf state, and ospf status and state information
   which is not included in draft-yeung-netmod-ospf-01.

   The difference to these two documents is appropriate for the
   configuration versus I2RS split.





Hares & Wang              Expires May 14, 2015                  [Page 3]

Internet-Draft         ospf yang i2rs-cfg Compare          November 2014


4.  Comparison of draft-yeung-netmod-ospf-02 with draft-wang-ospf-dm-00

   [I-D.yeung-netmod-ospf] was released on October 14, 2014.  This draft
   more closely aligns with [I-D.wang-i2rs-ospf-dm].
   [I-D.yeung-netmod-ospf]  adds ospf-mt, ospf lsa database, ospf-TE,
   and ospf status and state information which was included in
   [I-D.wang-i2rs-ospf-dm].  The [I-D.yeung-netmod-ospf] has the
   following three parts:

   o  configuration with the multi-topology view (write/read)

   o  protocol state and ospf-lsa-database (read only)

   o  notification on events (read-only)

   Parts 2 and 3 of [I-D.yeung-netmod-ospf] to and provide more
   comprehensive support for status information.  The authors of
   [I-D.wang-i2rs-ospf-dm] support these additions since this draft
   brings the definitions of OSPF config and OSPF I2RS closer.

5.  Differences between the drafts

   the remaining difference are the following:

   o  The nodes of [I-D.wang-i2rs-ospf-dm] are mostly read/write.  This
      includes the ospf-ls-database and the ospf-neighbor.  In
      [I-D.yeung-netmod-ospf] nodes are only readable.

   o  [I-D.wang-i2rs-ospf-dm] contains the ospf-rib which
      [I-D.yeung-netmod-ospf] does not have.

   o  [I-D.wang-i2rs-ospf-dm] has special nodes for I2RS OSPF use cases
      which draft-yeung-netmod-ospf-02 do not have.  These nodes are:
      router-number and route-info-list.

6.  Unique features for I2RS IGP Requirements

   The following are unique features for I2RS IGP requirements:

   o  mt-rib - which is used for transient loop avoidance.

   o  nbr-list - to aid fast route convergence in the event of the loss
      of a neighbor

   o  router-number - which is used for router number monitoring

   o  route-info-list - which is used for router-ID conflict recovery




Hares & Wang              Expires May 14, 2015                  [Page 4]

Internet-Draft         ospf yang i2rs-cfg Compare          November 2014


   o  route state information for subscribing for notification of route
      changes and neighbor changes

   These I2RS features in [I-D.wang-i2rs-ospf-dm] are described in the
   sections below.

6.1.  mt-rib

   Link-state protocols may need to reconverge when the network topology
   changes.  During this phase packet loss and transient loops are
   frequently observed since inconsistent RIBs exist, even the
   reachability of the destinations is not compromised after the
   topology change.  [IGP-REQ-02] in [I-D.ietf-i2rs-usecase-reqs-
   summary] suggests that the there should be rapid cycle of querying
   and configuration change.  Monitoring via the mechanisms in [IGP-REQ-
   04] and [IGP-REQ-05], [IGP-REQ-06], [IGP-REQ-07], and [IGP-REQ-08] in
   [I-D.ietf-i2rs-usecase-reqs-summary] may aid in detecting the
   condition.

    |        +--rw mt-rib
    |        |  +--rw route* [prefix]
    |        |     +--rw prefix              inet:ipv4-prefix
    |        |     +--rw nexthop-list
    |        |     |  +--rw nexthop* [ospf-nexthop]
    |        |     |     +--rw ospf-nexthop    inet:ipv4-prefix
    |        |     +--rw back-nexthop?       inet:ipv4-prefix
    |        |     +--rw metric?             uint32
    |        |     +--rw type?               ospf-route-type-def
    |        |     +--rw route-state-info
    |        |        +--rw metric?                 uint32
    |        |        +--rw route-current-state?    ospf-route-state-def
    |        |        +--rw route-previous-state?   ospf-route-state-def
    |        |        +--rw route-chg-reason?       route-chg-reason-def
    |        |        +--rw lsid?                   inet:ip-address
    |        |        +--rw lsa-type?               lsa-type-def
    |        |        +--rw advertiser?             inet:ip-address


            Figure 1: draft-i2rs-wang-ospf-dm-00 mt-rib structure

6.2.  nbr-list

   The ospf yang structure nbr-list supports fast convergence during
   loss of an ospf neighbor.

   IGP Hello packet is used to discover and maintain adjacencies among
   different ospf nodes.  Without the deployment of fast detection
   techniques, one node has to wait for several seconds before it



Hares & Wang              Expires May 14, 2015                  [Page 5]

Internet-Draft         ospf yang i2rs-cfg Compare          November 2014


   realized the adjacency had broken.  This kind of issue can cause one
   device is cut off from its network and lose connectivity completely.
   No matter planned or accidentally it may cause traffic blackhole
   before damage can be controlled.  [IGP-REQ-01] and [IGP-REQ-02] plus
   the monitoring requirements in [IGP-REQ-04] and [IGP-REQ-05], [IGP-
   REQ-06], [IGP-REQ-07], and [IGP-REQ-08] in
   [I-D.ietf-i2rs-usecase-reqs-summary] may aid in detecting the
   condition

   Under the scenario of I2RS and IGP information model deployed, it is
   RECOMMENDED that the adjacency data of the other end side can be
   removed simultaneously or LSP can be updated directly by I2RS Agent
   when IS-IS is disabled or detached on one side.  The configuration of
   [IGP-REQ-02] can aid in configuring.  The authors suggest this as a
   beginning step, but there are additional steps to support fast-
   convergence when neighbor's change.


   |              |     +--rw nbr-list
   |              |        +--rw nbr* [router-id]
   |              |           +--rw router-id              inet:ip-address
   |              |           +--rw interface-index?       uint64
   |              |           +--rw interface-name?        string
   |              |           +--rw nbr-status?            nbr-status-def
   |              |           +--rw nbr-previous-status?   nbr-status-def
   |              |           +--rw nbr-down-reason?       nbr-down-reason-def
   |              |           +--rw nbr-address?           inet:ipv4-address
   |              |           +--rw ip-address?            inet:ipv4-address

        Figure 2 draft-i2rs-wang-ospf-dm-00 ospf-nbr-list structure

6.3.  router-number

   Customers complain regarding the limits on the number of routers
   routers should be deployed in one area.  The answer for this question
   is not clear in vendor's guide since the product specification
   provide limits that guarantee operations.  For operations people
   looking to see the real limits, the field engineers use words like
   "usually", "roughly" or "most of the time".  As the consequence, the
   customers may simply deploy all routers in one OSPF area, and deal
   with the scaling issues after the network grows.

   With the help of OSPF information model and I2RS interfaces, it is
   possible to give such deployment warnings when the limits will be hit
   in the real-time manner.  Based on the statistics of router number
   and system resource consuming, plus the ratio relationship between
   them, one notification or warning can be sent to I2RS Client.  From




Hares & Wang              Expires May 14, 2015                  [Page 6]

Internet-Draft         ospf yang i2rs-cfg Compare          November 2014


   there decision can be made to expand safely or have to shrink for
   precaution.

       +--rw area-list
       |           +--rw area* [area-id]
       |              +--rw area-id            uint16
       |              +--rw router-number?     uint32

          Figure 3 draft-i2rs-wang-bgp-dm-00 router-id

6.4.  route-info-list

   It is become more common that networks have router-ID conflict in
   networks both intra and inter area, especially after different area
   have merged.  It is time-consuming and troublesome to detect the
   places where this trouble happened.  The frequently used solution is
   to rename one of the conflicted router-ID to a new one then reboot
   the involved OSPF instance to force all adjacencies to rebuild and
   re-synchronize the LSDB.

   It MAY be possible to alleviate this issue with the help of OSPF
   information model and programmatic I2RS interfaces.  With the help of
   the router-info-list, this conflict can be detected automatically.
   When one substantial conflict is on the horizon, no need to wait for
   mutual re-origination happened, ID conflict can be found in router-
   info-list with help of their coordinate information, no matter the
   conflict routers come from the same area or not.  What is more,
   through I2RS interfaces and Agent, it is possible to rewrite one of
   the conflicted router-ID into a new one then reboot the routing-
   protocol.

           +--rw route-info-list* [route-info-index]
           |  +--rw route-info-index    uint32
           |  +--rw router-id           inet:ipv4-address
           |  +--rw ip-address-list* [ip-address]
           |  |  +--rw ip-address    inet:ipv4-address

             Figure 4 - OSPF route information

6.5.  ospf route status information

   The following yang top-level diagram shows additional status for each
   ospf route:








Hares & Wang              Expires May 14, 2015                  [Page 7]

Internet-Draft         ospf yang i2rs-cfg Compare          November 2014


   |        +--rw mt-rib
   |        |     +--rw route-state-info
   |        |        +--rw metric?                 uint32
   |        |        +--rw route-current-state?    ospf-route-state-def
   |        |        +--rw route-previous-state?   ospf-route-state-def
   |        |        +--rw route-chg-reason?       route-chg-reason-def
   |        |     +--rw nbr-list
   |        |        +--rw nbr* [router-id]
   |        |           +--rw router-id              inet:ip-address
   |        |           +--rw interface-index?       uint64
   |        |           +--rw interface-name?        string
   |        |           +--rw nbr-status?            nbr-status-def
   |        |           +--rw nbr-previous-status?   nbr-status-def
   |        |           +--rw nbr-down-reason?       nbr-down-reason-def

           Figure 5 ospf route and neighbor additions.

7.  Merge Suggestions

   [I-D.yeung-netmod-ospf] and [I-D.wang-i2rs-ospf-dm] cover two
   separate areas: configuration and ephemeral state.  These two drafts
   need to align the definitional part of the drafts (groupings,
   typedefs, etc.)to allow implementations to choose configuration or
   configuration plus I2RS

8.  IANA Considerations

   This draft includes no request to IANA.

9.  Security Considerations

   None since this is just an analysis draft

10.  Informative References

   [I-D.ietf-i2rs-architecture]
              Atlas, A., Halpern, J., Hares, S., Ward, D., and T.
              Nadeau, "An Architecture for the Interface to the Routing
              System", draft-ietf-i2rs-architecture-05 (work in
              progress), July 2014.

   [I-D.ietf-i2rs-rib-info-model]
              Bahadur, N., Folkes, R., Kini, S., and J. Medved, "Routing
              Information Base Info Model", draft-ietf-i2rs-rib-info-
              model-03 (work in progress), May 2014.






Hares & Wang              Expires May 14, 2015                  [Page 8]

Internet-Draft         ospf yang i2rs-cfg Compare          November 2014


   [I-D.ietf-i2rs-usecase-reqs-summary]
              Hares, S. and M. Chen, "Summary of I2RS Use Case
              Requirements", draft-ietf-i2rs-usecase-reqs-summary-00
              (work in progress), November 2014.

   [I-D.wang-i2rs-ospf-dm]
              Wang, L., Hares, S., and N. Wu, "Yang Data model for I2RS
              interface to the OSPF protocol", draft-wang-i2rs-ospf-
              dm-00 (work in progress), September 2014.

   [I-D.wu-i2rs-ospf-info-model]
              Wu, N., Wang, L., and S. Hares, "I2RS Information Model
              for OSPF protocol", draft-wu-i2rs-ospf-info-model-00 (work
              in progress), September 2014.

   [I-D.yeung-netmod-ospf]
              Yeung, D., Qu, Y., Zhang, J., Bogdanovic, D., and K.
              Sreenivasa, "Yang Data Model for OSPF Protocol", draft-
              yeung-netmod-ospf-02 (work in progress), October 2014.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC3060]  Moore, B., Ellesson, E., Strassner, J., and A. Westerinen,
              "Policy Core Information Model -- Version 1
              Specification", RFC 3060, February 2001.

   [RFC3460]  Moore, B., "Policy Core Information Model (PCIM)
              Extensions", RFC 3460, January 2003.

   [RFC3644]  Snir, Y., Ramberg, Y., Strassner, J., Cohen, R., and B.
              Moore, "Policy Quality of Service (QoS) Information
              Model", RFC 3644, November 2003.

Authors' Addresses

   Susan Hares
   Huawei
   7453 Hickory Hill
   Saline, MI  48176
   USA

   Email: shares@ndzh.com








Hares & Wang              Expires May 14, 2015                  [Page 9]

Internet-Draft         ospf yang i2rs-cfg Compare          November 2014


   Lixing Wang
   Huawei
   Huawei Bld., No.156 Beiqing Rd.
   Beijing  10095
   China

   Email: wanglixing@huawei.com












































Hares & Wang              Expires May 14, 2015                 [Page 10]
