<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>DCCP Simultaneous-Open
    Technique to Facilitate NAT/Middlebox Traversal</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="DCCP Simultaneous-Open
    Technique to Facilitate NAT/Middlebox Traversal">
<meta name="keywords" content="DCCP, NAT traversal, Middlebox Issues, Internet-Draft">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">DCCP Working Group</td><td class="header">G. Fairhurst</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">University of Aberdeen</td></tr>
<tr><td class="header">Updates: <a href='http://tools.ietf.org/html/rfc4340'>4340</a> (if&nbsp;approved)</td><td class="header">May 02, 2009</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">&nbsp;</td></tr>
<tr><td class="header">Expires: November 3, 2009</td><td class="header">&nbsp;</td></tr>
</table></td></tr></table>
<h1><br />DCCP Simultaneous-Open
    Technique to Facilitate NAT/Middlebox Traversal<br />draft-ietf-dccp-simul-open-08</h1>

<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on November 3, 2009.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents in effect on the date of
publication of this document (http://trustee.ietf.org/license-info).
Please review these documents carefully, as they describe your
rights and restrictions with respect to this document.</p>

<h3>Abstract</h3>

<p>This document specifies an update to the Datagram Congestion Control
      Protocol (DCCP), a connection-oriented and datagram-based transport
      protocol. The update adds support for the DCCP-Listen packet. This
      assists DCCP applications to communicate through middleboxes (e.g. a
      DCCP server behind a firewall, or a Network Address Port Translator),
      where peering endpoints need to initiate communication in a
      near-simultaneous manner to establish necessary middlebox state.
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#intro">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#intro1">1.1.</a>&nbsp;
Scope of this Document<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor1">1.2.</a>&nbsp;
DCCP NAT Traversal<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#intro3">1.3.</a>&nbsp;
Structure of this Document<br />
<a href="#SPEC">2.</a>&nbsp;
Procedure for Near-Simultaneous Open<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">2.1.</a>&nbsp;
Conventions and Terminology<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#protocol_method">2.2.</a>&nbsp;
Protocol Method<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#listen_packet">2.2.1.</a>&nbsp;
DCCP-Listen Packet Format<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">2.2.2.</a>&nbsp;
Protocol Method for DCCP Server Endpoints<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">2.2.3.</a>&nbsp;
Protocol Method for DCCP Client Endpoints<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">2.2.4.</a>&nbsp;
Processing by Routers and Middleboxes<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">2.3.</a>&nbsp;
Examples of Use<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">2.3.1.</a>&nbsp;
Repetition of DCCP-Listen<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">2.3.2.</a>&nbsp;
Optional Triggered Retransmission of DCCP-Request<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">2.4.</a>&nbsp;
Backwards Compatibility with RFC 4340<br />
<a href="#rationale">3.</a>&nbsp;
Discussion of Design Decisions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">3.1.</a>&nbsp;
Rationale for a New Packet Type<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">3.1.1.</a>&nbsp;
Use of sequence numbers<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">3.2.</a>&nbsp;
Generation of Listen Packets<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#listen_repeats">3.3.</a>&nbsp;
Repetition of DCCP-Listen Packets<br />
<a href="#SECURITY">4.</a>&nbsp;
Security Considerations<br />
<a href="#IANA">5.</a>&nbsp;
IANA Considerations<br />
<a href="#anchor14">6.</a>&nbsp;
Disclaimer<br />
<a href="#rfc.references1">7.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">7.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">7.2.</a>&nbsp;
Informative References<br />
<a href="#BGND">Appendix&nbsp;A.</a>&nbsp;
Discussion of Existing NAT Traversal Techniques<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor17">A.1.</a>&nbsp;
NAT traversal Based on a Simultaneous-Request<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor18">A.2.</a>&nbsp;
Role Reversal<br />
<a href="#anchor19">Appendix&nbsp;B.</a>&nbsp;
Change Log - to be removed by RFC-Ed<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Author's Address<br />
</p>
<br clear="all" />

<a name="intro"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>The Datagram Congestion Control Protocol (DCCP) <a class='info' href='#RFC4340'>[RFC4340]<span> (</span><span class='info'>Kohler, E., Handley, M., and S. Floyd, &ldquo;Datagram Congestion Control Protocol (DCCP),&rdquo; March&nbsp;2006.</span><span>)</span></a> is both datagram-based and connection-oriented.
      According to RFC 4340, DCCP servers establish connections by passively
      listening for incoming connection requests that are actively transmitted
      by DCCP clients. These asymmetric roles can cause problems when the
      server is 'inside' a middlebox, such as a Network Address and Port
      Translator (NAPT) that only allows connection requests to be initiated
      from inside (e.g. due to port overloading) <a class='info' href='#ID-BEHAVE-DCCP'>[ID&#8209;BEHAVE&#8209;DCCP]<span> (</span><span class='info'>, &ldquo;Network Address Translation (NAT) Behavioral Requirements for           DCCP,&rdquo; 2008.</span><span>)</span></a>. Host-based and network firewalls can
      also implement policies that lead to similar problems. This behaviour is
      currently the default for many firewalls.
</p>
<p>UDP can support middlebox traversal using various techniques <a class='info' href='#RFC4787'>[RFC4787]<span> (</span><span class='info'>, &ldquo;Network Address Translation (NAT) Behavioral Requirements for           Unicast UDP,&rdquo; January&nbsp;2007.</span><span>)</span></a> that leverage the connectionless nature of UDP
      and are therefore not suitable for DCCP. TCP supports middlebox
      traversal through the use of its simultaneous open procedure <a class='info' href='#RFC5382'>[RFC5382]<span> (</span><span class='info'>Guha, S., Biswas, K., Ford, B., Sivakumar, S., and P. Srisuresh, &ldquo;NAT Behavioral Requirements for TCP,&rdquo; April&nbsp;2007.</span><span>)</span></a>. The concepts of the TCP solution are
      applicable to DCCP, but DCCP can not simply reuse the same methods (see
      Appendix A).
</p>
<p>After discussing the problem space for DCCP, this document specifies
      an update to the DCCP state machine to offer native support to allow a
      DCCP client to establish a connection to a DCCP server that is inside
      one or more middleboxes. This reduces dependence on external aids such
      as data relay servers <a class='info' href='#ID-BEHAVE-TURN'>[ID&#8209;BEHAVE&#8209;TURN]<span> (</span><span class='info'>Rosenberg, J., Mahy, R., and P. Matthews, &ldquo;Traversal Using Relays around NAT (TURN): Relay Extensions to           Session Traversal Utilities for NAT (STUN),&rdquo; February&nbsp;2008.</span><span>)</span></a> by
      explicitly supporting a widely used principle known as 'hole
      punching'.
</p>
<p>The method requires only a minor change to the standard DCCP
      operational procedure. The use of a dedicated DCCP packet type ties
      usage to a specific condition, ensuring the method is inter-operable
      with hosts that do not implement this update, or choose to disable it
      (see Section 4).
</p>
<a name="intro1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Scope of this Document</h3>

<p>This method is useful in scenarios when a DCCP server is located
        inside the perimeter controlled by a middlebox. It is relevant to both
        client/server and peer-to-peer applications, such as VoIP, file
        sharing, or online gaming and assists connections that utilise prior
        out-of-band signaling (e.g. via a well-known rendezvous server (<a class='info' href='#RFC3261'>[RFC3261]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a>, <a class='info' href='#H.323'>[H.323]<span> (</span><span class='info'>ITU-T, &ldquo;Packet-based Multimedia Communications Systems,&rdquo; July&nbsp;2003.</span><span>)</span></a>)) to notify
        both endpoints of the connection parameters (<a class='info' href='#RFC3235'>[RFC3235]<span> (</span><span class='info'>Senie, D., &ldquo;Network Address Translator (NAT)-Friendly Application Design           Guidelines,&rdquo; January&nbsp;2002.</span><span>)</span></a>, <a class='info' href='#NAT-APP'>[NAT&#8209;APP]<span> (</span><span class='info'>Ford, B., Srisuresh, P., and D. Kegel, &ldquo;Application Design Guidelines for Traversal through Network           Address Translators,&rdquo; March&nbsp;2007.</span><span>)</span></a>).
</p>
<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.2"></a><h3>1.2.&nbsp;
DCCP NAT Traversal</h3>

<p>The behavioural requirements for NAT devices supporting DCCP are
        described in <a class='info' href='#ID-BEHAVE-DCCP'>[ID&#8209;BEHAVE&#8209;DCCP]<span> (</span><span class='info'>, &ldquo;Network Address Translation (NAT) Behavioral Requirements for           DCCP,&rdquo; 2008.</span><span>)</span></a>. A "traditional
        NAT" <a class='info' href='#RFC3022'>[RFC3022]<span> (</span><span class='info'>Srisuresh, P. and K. Egevang, &ldquo;Traditional IP Network Address Translator (Traditional           NAT),&rdquo; January&nbsp;2001.</span><span>)</span></a>, that directly maps an IP address
        to a different IP address does not require the simultaneous open
        method described in this document.
</p>
<p>The method is required when the DCCP server is positioned behind
        one or more NAPT devices in the path (hierarchies of nested NAPT
        devices are possible). This document refers to DCCP hosts located
        inside the perimeter controlled by one or more NAPT devices as having
        "private" addresses, and to DCCP hosts located in the global address
        realm as having "public" addresses.
</p>
<p>DCCP NAT traversal is considered for the following scenarios:
</p>
<p></p>
<ol class="text">
<li>Private client connects to public server.
</li>
<li>Public client connects to private server.
</li>
<li>Private client connects to private server.
</li>
</ol>

<p>A defining characteristic of traditional NAT devices <a class='info' href='#RFC3022'>[RFC3022]<span> (</span><span class='info'>Srisuresh, P. and K. Egevang, &ldquo;Traditional IP Network Address Translator (Traditional           NAT),&rdquo; January&nbsp;2001.</span><span>)</span></a> is that private hosts can connect to external
        hosts, but not vice versa. Hence the case (1) is possible using the
        protocol defined in <a class='info' href='#RFC4340'>[RFC4340]<span> (</span><span class='info'>Kohler, E., Handley, M., and S. Floyd, &ldquo;Datagram Congestion Control Protocol (DCCP),&rdquo; March&nbsp;2006.</span><span>)</span></a>. A pre-configured,
        static NAT address map would allow outside hosts to connections in
        cases (2) and (3).
</p>
<p>A DCCP implementation conforming to <a class='info' href='#RFC4340'>[RFC4340]<span> (</span><span class='info'>Kohler, E., Handley, M., and S. Floyd, &ldquo;Datagram Congestion Control Protocol (DCCP),&rdquo; March&nbsp;2006.</span><span>)</span></a>
        and a NAT device conforming to <a class='info' href='#ID-BEHAVE-DCCP'>[ID&#8209;BEHAVE&#8209;DCCP]<span> (</span><span class='info'>, &ldquo;Network Address Translation (NAT) Behavioral Requirements for           DCCP,&rdquo; 2008.</span><span>)</span></a>
        would require a DCCP relay server to perform NAT traversal for cases
        (2) and (3).
</p>
<p>This document describes a method to support cases (2) and (3)
        without the aid of a DCCP relay server. This method updates RFC 4340
        and requires the DCCP server to discover the IP address and the DCCP
        port that correspond to the DCCP client. Such signalling may be
        performed out-of-band (e.g. using SDP <a class='info' href='#RFC4566'>[RFC4566]<span> (</span><span class='info'>, &ldquo;SDP: Session Description Protocol,&rdquo; July&nbsp;2006.</span><span>)</span></a>).
</p>
<a name="intro3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.3"></a><h3>1.3.&nbsp;
Structure of this Document</h3>

<p>For background information on existing NAT traversal techniques,
        please consult <a class='info' href='#BGND'>Appendix&nbsp;A<span> (</span><span class='info'>Discussion of Existing NAT Traversal Techniques</span><span>)</span></a>.
</p>
<p>The normative specification of the update is presented in <a class='info' href='#SPEC'>Section&nbsp;2<span> (</span><span class='info'>Procedure for Near-Simultaneous Open</span><span>)</span></a>. An informative discussion of underlying design
        decisions then follows, in <a class='info' href='#rationale'>Section&nbsp;3<span> (</span><span class='info'>Discussion of Design Decisions</span><span>)</span></a>. Security
        considerations are provided in <a class='info' href='#SECURITY'>Section&nbsp;4<span> (</span><span class='info'>Security Considerations</span><span>)</span></a> and
        IANA considerations in the concluding <a class='info' href='#IANA'>Section&nbsp;5<span> (</span><span class='info'>IANA Considerations</span><span>)</span></a>.
</p>
<a name="SPEC"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Procedure for Near-Simultaneous Open</h3>

<p>This section is normative and specifies the simultaneous-open
      technique for DCCP. It updates the connection-establishment procedures
      of <a class='info' href='#RFC4340'>[RFC4340]<span> (</span><span class='info'>Kohler, E., Handley, M., and S. Floyd, &ldquo;Datagram Congestion Control Protocol (DCCP),&rdquo; March&nbsp;2006.</span><span>)</span></a>.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Conventions and Terminology</h3>

<p>The document uses the terms and definitions provided in <a class='info' href='#RFC4340'>[RFC4340]<span> (</span><span class='info'>Kohler, E., Handley, M., and S. Floyd, &ldquo;Datagram Congestion Control Protocol (DCCP),&rdquo; March&nbsp;2006.</span><span>)</span></a>. Familiarity with this specification is
        assumed. In particular, the following convention from (<a class='info' href='#RFC4340'>[RFC4340]<span> (</span><span class='info'>Kohler, E., Handley, M., and S. Floyd, &ldquo;Datagram Congestion Control Protocol (DCCP),&rdquo; March&nbsp;2006.</span><span>)</span></a>, 3.2) is used: </p>
<blockquote class="text">
<p>"Each DCCP connection runs between two hosts, which we often
            name DCCP A and DCCP B. Each connection is actively initiated by
            one of the hosts, which we call the client; the other, initially
            passive host is called the server."
</p>
</blockquote>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
        "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
        document are to be interpreted as described in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement           Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
</p>
<a name="protocol_method"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
Protocol Method</h3>

<p>The term "session" is used as defined in (<a class='info' href='#RFC2663'>[RFC2663]<span> (</span><span class='info'>Srisuresh, P. and M. Holdrege, &ldquo;IP Network Address Translator (NAT) Terminology and           Considerations,&rdquo; August&nbsp;1999.</span><span>)</span></a>, 2.3): DCCP sessions are uniquely identified
        by the tuple of &lt;source IP-address, source port, target IP-address,
        target port&gt;.
</p>
<p>DCCP, in addition, introduces Service Codes, which can be used to
        identify different services available via the same port <a class='info' href='#ID-DCCP-SC'>[ID&#8209;DCCP&#8209;SC]<span> (</span><span class='info'>Fairhurst, G., &ldquo;The DCCP Service Code,&rdquo; June&nbsp;2008.</span><span>)</span></a>.
</p>
<a name="listen_packet"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.1"></a><h3>2.2.1.&nbsp;
DCCP-Listen Packet Format</h3>

<p>This document adds a new DCCP packet type, DCCP-Listen, whose
          format is shown below.
</p><br /><hr class="insert" />
<a name="listen_packet_format"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|          Source Port          |           Dest Port           |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  Data Offset  | CCVal | CsCov |           Checksum            |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| Res | Type  |X|   Reserved    |  Sequence Number High Bits    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                    Sequence Number Low Bits                   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                         Service Code                          |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: Format of a DCCP-Listen Packet&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
            </p>
<ul class="text">
<li>The Source Port is the port on which the DCCP server is
              listening for a connection from the IP address that appears as
              the destination IP address in the packet.
</li>
<li>The Destination Port is the port selected by a DCCP client to
              identify a connection by the DCCP client. In this technique,
              this value must be communicated out-of-band to the server.
</li>
<li>The value of X MUST be set to 1. A DCCP-Listen packet is sent
              before a connection is established, therefore there is no way to
              negotiate use of short sequence numbers (<a class='info' href='#RFC4340'>[RFC4340]<span> (</span><span class='info'>Kohler, E., Handley, M., and S. Floyd, &ldquo;Datagram Congestion Control Protocol (DCCP),&rdquo; March&nbsp;2006.</span><span>)</span></a>, 5.1).
</li>
<li>The value of the sequence number field in a DCCP-Listen
              packet is not related to the DCCP sequence number used in normal
              DCCP messages (see <a class='info' href='#rationale'>Section&nbsp;3<span> (</span><span class='info'>Discussion of Design Decisions</span><span>)</span></a> for a description
              of the use of the DCCP sequence number). Thus, for DCCP-Listen
              packets:
<ul class="text">
<li>A DCCP server SHOULD set the high and low bits of the
                  Sequence Number field to 0.
</li>
<li>A DCCP client MUST ignore the value of the Sequence
                  Number field.
</li>
<li>Middleboxes MUST NOT interpret sequence numbers on
                  DCCP-Listen packets.
</li>
</ul>
</li>
<li>The Service Code field contains the Service Code value for
              which the server is listening for a connection (<a class='info' href='#RFC4340'>[RFC4340]<span> (</span><span class='info'>Kohler, E., Handley, M., and S. Floyd, &ldquo;Datagram Congestion Control Protocol (DCCP),&rdquo; March&nbsp;2006.</span><span>)</span></a>, 8.1.2, <a class='info' href='#ID-DCCP-SC'>[ID&#8209;DCCP&#8209;SC]<span> (</span><span class='info'>Fairhurst, G., &ldquo;The DCCP Service Code,&rdquo; June&nbsp;2008.</span><span>)</span></a>). This
              value MUST correspond to a Service Code that the server is
              actually offering for a connection identified by the same source
              IP address and the same Source Port as that of the DCCP-Listen
              packet. Since the server may use multiple Service Codes, the
              specific value of the Service Code field needs to be
              communicated out-of-band, from client to server, prior to
              sending the DCCP-Listen packet, e.g. described using the Session
              Description Protocol, SDP <a class='info' href='#RFC4566'>[RFC4566]<span> (</span><span class='info'>, &ldquo;SDP: Session Description Protocol,&rdquo; July&nbsp;2006.</span><span>)</span></a>.
</li>
<li>At the time of writing, there are no known uses of header
              options (<a class='info' href='#RFC4340'>[RFC4340]<span> (</span><span class='info'>Kohler, E., Handley, M., and S. Floyd, &ldquo;Datagram Congestion Control Protocol (DCCP),&rdquo; March&nbsp;2006.</span><span>)</span></a> , sec. 5.8) with a
              DCCP-Listen packet. Clients MUST ignore all options in received
              DCCP-Listen packets. Therefore, feature values can not be
              negotiated using a DCCP-Listen packet.
</li>
<li>At the time of writing, there are no known uses of payload
              data with a DCCP-Listen packet. Since DCCP-Listen packets are
              issued before an actual connection is established, endpoints
              MUST ignore any payload data encountered in DCCP-Listen
              packets.
</li>
<li>The following protocol fields are required to have specific
              values:
<ul class="text">
<li>Data Offset MUST have a value of five or more (i.e. at
                  least 20 bytes).
</li>
<li>CCVal MUST be zero (a connection has not been
                  established).
</li>
<li>CsCov MUST be zero (use of the CsCov feature can not be
                  negotiated).
</li>
<li>Type has the value 10, assigned by IANA to denote a
                  DCCP-Listen packet.
</li>
<li>X MUST be 1 (the Generic header must be used).
</li>
</ul>
</li>
</ul><p>
          
</p>
<p>The remaining fields, including the "Res" and "Reserved" fields
          are specified by <a class='info' href='#RFC4340'>[RFC4340]<span> (</span><span class='info'>Kohler, E., Handley, M., and S. Floyd, &ldquo;Datagram Congestion Control Protocol (DCCP),&rdquo; March&nbsp;2006.</span><span>)</span></a> and its successors. The
          interpretation of these fields is not modified by this document.
</p>
<h3>Note to the RFC Editor:</h3>

<p>This value assigned to the DCCP-Listen packet needs to be
            confirmed by IANA when this document is published. Please then
            remove this note.
</p>
<p>==&gt; End of note to the RFC Editor. &lt;==
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.2"></a><h3>2.2.2.&nbsp;
Protocol Method for DCCP Server Endpoints</h3>

<p>This document updates section 8.1 of <a class='info' href='#RFC4340'>[RFC4340]<span> (</span><span class='info'>Kohler, E., Handley, M., and S. Floyd, &ldquo;Datagram Congestion Control Protocol (DCCP),&rdquo; March&nbsp;2006.</span><span>)</span></a> for the case of a fully specified DCCP
          server endpoint. The update modifies the way the server performs a
          passive-open.
</p>
<p>Prior to connection setup, it is common for a DCCP server
          endpoint to not be fully specified: before the connection is
          established, a server usually specifies only the destination port,
          and Service Code. (Sometimes the destination address is also
          specified.) This leaves the source address and source port
          unspecified. The endpoint only becomes fully specified after
          performing the handshake for an incoming connection. For such cases,
          this document does not update <a class='info' href='#RFC4340'>[RFC4340]<span> (</span><span class='info'>Kohler, E., Handley, M., and S. Floyd, &ldquo;Datagram Congestion Control Protocol (DCCP),&rdquo; March&nbsp;2006.</span><span>)</span></a>, i.e.
          the server adheres to the existing state transitions in the left
          half of <a class='info' href='#state_diagram'>Figure&nbsp;2<span> (</span><span class='info'>Updated state transition diagram for DCCP-Listen</span><span>)</span></a> (CLOSED =&gt; LISTEN
          =&gt; RESPOND).
</p>
<p>A fully specified DCCP server endpoint permits exactly one
          client, identified by source IP-address:port, destination
          IP-address:port, plus a single Service Code, to set up the
          connection. Such a server SHOULD perform the actions and state
          transitions shown in the right half of <a class='info' href='#state_diagram'>Figure&nbsp;2<span> (</span><span class='info'>Updated state transition diagram for DCCP-Listen</span><span>)</span></a> in section 8.4, and specified
          below.
</p><br /><hr class="insert" />
<a name="state_diagram"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
        unspecified remote   +--------+   fully specified remote
       +---------------------| CLOSED |---------------------+
       |                     +--------+   send DCCP-Listen  |
       |                                                    |
       v                                                    v
  +--------+                                  timeout  +---------+
  | LISTEN |                           +---+-----------| INVITED |
  +--------+                           |   |           +---------+
       |                               |   |  1st / 2nd  ^  |
       |                 more than 2   |   |  retransm.  |  | receive
       |               retransmissions |   +-------------+  | Request
       |                               |    resend Listen   v
       |                               |               +---------+
       |                               +--------------&gt;| LISTEN1 |
       |                                               +---------+
       |                                                    |
       |  receive Request   +---------+    receive Request* |
       +-------------------&gt;| RESPOND |&lt;--------------------+
          send Response     +---------+    send Response

* Note: A server that responds a DCCP-Request in the INVITED state,
transitions to the LISTEN1 state and then immediately transitions
to the RESPOND state. This does not require reception of an
additional DCCP-Request packet.

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: Updated state transition diagram for DCCP-Listen&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>This diagram introduces two additional DCCP server states in
          addition to those listed in section 4.3 of <a class='info' href='#RFC4340'>[RFC4340]<span> (</span><span class='info'>Kohler, E., Handley, M., and S. Floyd, &ldquo;Datagram Congestion Control Protocol (DCCP),&rdquo; March&nbsp;2006.</span><span>)</span></a>:
</p>
<p></p>
<ul class="text">
<li>INVITED The INVITED state is associated with a specific DCCP
              connection and represents a fully-specified server socket in the
              listening state that is generating DCCP-Listen packets towards
              the client.
</li>
<li>LISTEN1 The LISTEN1 state is associated with a specific DCCP
              connection and represents a fully-specified server socket in the
              passive listening state that will not generate further
              DCCP-Listen packets towards the client.
</li>
</ul>

<p>A fully specified server endpoint performs a passive-open from
          the CLOSED state by inviting the remote client to connect. This is
          performed by sending a single DCCP-Listen packet to the specified
          remote IP-address:port, using the format specified in <a class='info' href='#listen_packet'>Section&nbsp;2.2.1<span> (</span><span class='info'>DCCP-Listen Packet Format</span><span>)</span></a>. The figure below provides pseudocode
          describing the packet processing in the INVITED state. This
          processing step follows Step 2 in section 8,5 of <a class='info' href='#RFC4340'>[RFC4340]<span> (</span><span class='info'>Kohler, E., Handley, M., and S. Floyd, &ldquo;Datagram Congestion Control Protocol (DCCP),&rdquo; March&nbsp;2006.</span><span>)</span></a>).
</p>
<p>The INVITED state is, like LISTEN, a passive state, characterised
          by waiting in the absence of an established connection. If the
          server endpoint in the INVITED state receives a DCCP-Request that
          matches the set of bound ports and addresses, it transitions to the
          LISTEN' state and then immediately transitions to the RESPOND state,
          where further processing resumes as specified in <a class='info' href='#RFC4340'>[RFC4340]<span> (</span><span class='info'>Kohler, E., Handley, M., and S. Floyd, &ldquo;Datagram Congestion Control Protocol (DCCP),&rdquo; March&nbsp;2006.</span><span>)</span></a>.
</p>
<p>The server SHOULD repeat sending a DCCP-Listen packet while in
          the INVITED state, at a 200 millisecond interval with up to at most
          2 repetitions (<a class='info' href='#rationale'>Section&nbsp;3<span> (</span><span class='info'>Discussion of Design Decisions</span><span>)</span></a> discusses this
          choice of time interval). If the server is still in the INVITED
          state after a further period of 200ms following transmission of the
          third DCCP-Listen packet, it SHOULD progress to the
          LISTEN1state.
</p>
<p>Fully specified server endpoints SHOULD treat ICMP error messages
          received in response to a DCCP-Listen packet as "soft errors" that
          do not cause a state transition. Reception of an ICMP error message
          as a result of sending a DCCP-Listen packet does not necessarily
          indicate a failure of the following connection request, and
          therefore should not result in a server state change. This reaction
          to soft errors exploits the valuable feature of the Internet that
          for many network failures, the network can be dynamically
          reconstructed without any disruption of the endpoints.
</p>
<p>Server endpoints SHOULD ignore any incoming DCCP-Listen packets.
          A DCCP server in the LISTEN, INVITED, or LISTEN1states MAY generate
          a DCCP-Reset packet (Code 7, "Connection Refused") in response to a
          received DCCP-Listen packet. This DCCP-Reset packet is an indication
          that two servers are simultaneously awaiting connections on the same
          port.
</p>
<p>Further details on the design rationale are discussed in <a class='info' href='#rationale'>Section&nbsp;3<span> (</span><span class='info'>Discussion of Design Decisions</span><span>)</span></a>.
</p>
<p>The figure below provides pseudocode describing the packet
          processing in the INVITED state. This processing step follows Step 2
          in section 8.5 of RFC 4340 <a class='info' href='#RFC4340'>[RFC4340]<span> (</span><span class='info'>Kohler, E., Handley, M., and S. Floyd, &ldquo;Datagram Congestion Control Protocol (DCCP),&rdquo; March&nbsp;2006.</span><span>)</span></a>
</p><br /><hr class="insert" />
<a name="pseudocode"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
 Step 2a: Process INVITED state
   If S.state == INVITED,
       /* State only entered for fully-specified server endpoints */
       /* on entry S will have been set to a socket */
       If P.type == Request
          /* Exit INVITED state and continue to process the packet */
          S.state = LISTEN1
          Continue with S.state := LISTEN1
       Otherwise,
          If P.type == Listen
             /* The following line is optional */
             Generate Reset(Connection Refused)
             /* otherwise Drop packet and return */
          Otherwise,
             Generate Reset(No Connection) unless P.type == Reset

 Step 2b: Process LISTEN1 state
   If S.state == LISTEN1,
       /* State only entered for fully-specified server endpoints */
       /* Follows receipt of a Response packet */
       /* or sending third Listen packet (after timer expiry) */
       If P.type == Request,
          S.state = RESPOND
          Choose S.ISS (initial seqno) or set from Init Cookies
          Initialize S.GAR := S.ISS
          Set S.ISR, S.GSR, S.SWL, S.SWH from packet or Init Cookies
          Continue with S.state == RESPOND
          /* A Response packet will be generated in Step 11 */
       Otherwise,
          If P.type == Listen
             /* The following line is optional */
             Generate Reset(Connection Refused)
             /* otherwise Drop packet and return */
          Otherwise,
             Generate Reset(No Connection) unless P.type == Reset
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3: Updated DCCP pseudocode for INVITED and LISTEN' states&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.3"></a><h3>2.2.3.&nbsp;
Protocol Method for DCCP Client Endpoints</h3>

<p>This document updates section 8.1.1 of <a class='info' href='#RFC4340'>[RFC4340]<span> (</span><span class='info'>Kohler, E., Handley, M., and S. Floyd, &ldquo;Datagram Congestion Control Protocol (DCCP),&rdquo; March&nbsp;2006.</span><span>)</span></a>, by adding the following rule for the
          reception of DCCP-Listen packets by clients:
</p>
<p>A client in any state MUST silently discard any received
          DCCP-Listen packet, unless it implements the optional procedure
          defined in the following section.
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.3.1"></a><h3>2.2.3.1.&nbsp;
Optional generation of Triggered Requests</h3>

<p>This section describes an optional optimisation at the client
            that can avoid clients having to wait for a timeout following a
            dropped DCCP-Request. The operation requires clients to respond to
            reception of DCCP-Listen packets when received in the REQUEST
            state. DCCP-Listen packets MUST be silently discarded in all other
            states.
</p>
<p>A client implementing this optmisation MAY immediately perform
            a retransmission of a DCCP-Request following the reception of the
            first DCCP-Listen packet. The retransmission is performed in the
            same manner as a timeout in the REQUEST state <a class='info' href='#RFC4340'>[RFC4340]<span> (</span><span class='info'>Kohler, E., Handley, M., and S. Floyd, &ldquo;Datagram Congestion Control Protocol (DCCP),&rdquo; March&nbsp;2006.</span><span>)</span></a>. A triggered retransmission SHOULD result
            in the client increasing the exponential-backoff timer
            interval.
</p>
<p>Note that a path delay greater than 200ms will result in
            multiple DCCP-Listen packets arriving at the client before a
            DCCP-Response is received. Clients MUST therefore perform only one
            such retransmission for each DCCP connection. This requires
            maintaining local state (e.g. one flag per connection)
</p>
<p>Implementors and users of this optional method need to be aware
            that host timing or path reordering can result in a server
            receiving two DCCP-Requests (i.e., the server sending one
            unnecessary packet). This would, in turn, trigger a client to send
            a second corresponding DCCP-Response (also unnecessary). These
            additional packets are not expected to modify or delay the DCCP
            open procedure <a class='info' href='#RFC4340'>[RFC4340]<span> (</span><span class='info'>Kohler, E., Handley, M., and S. Floyd, &ldquo;Datagram Congestion Control Protocol (DCCP),&rdquo; March&nbsp;2006.</span><span>)</span></a>.
</p>
<p>Section 2.3.2 provides examples of the use of triggered
            retransmission.
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.4"></a><h3>2.2.4.&nbsp;
Processing by Routers and Middleboxes</h3>

<p>DCCP-Listen packets do not require special treatment and should
          thus be forwarded end-to-end across Internet paths, by routers and
          middleboxes alike.
</p>
<p>Middleboxes may utilise the connection information (address,
          port, Service Code) to establish local forwarding state. The
          DCCP-Listen packet carries the necessary information to uniquely
          identify a DCCP session in combination with the source and
          destination addresses (found in the enclosing IP-header), including
          the DCCP Service Code value <a class='info' href='#ID-DCCP-SC'>[ID&#8209;DCCP&#8209;SC]<span> (</span><span class='info'>Fairhurst, G., &ldquo;The DCCP Service Code,&rdquo; June&nbsp;2008.</span><span>)</span></a>. The
          processing of the DCCP-Listen packet by NAT devices is specified in
          <a class='info' href='#ID-BEHAVE-DCCP'>[ID&#8209;BEHAVE&#8209;DCCP]<span> (</span><span class='info'>, &ldquo;Network Address Translation (NAT) Behavioral Requirements for           DCCP,&rdquo; 2008.</span><span>)</span></a>.
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3"></a><h3>2.3.&nbsp;
Examples of Use</h3>

<p>In the examples below, DCCP A is the client and DCCP B is the
        server. A middlebox device (NAT/Firewall), NA is placed before DCCP A,
        and another middlebox, NB, is placed before DCCP B. Both NA and NB use
        a policy that permits DCCP packets to traverse the device for outgoing
        links, but only permit incoming DCCP packets when a previous packet
        has been sent out for the same connection.
</p>
<p>In the figure below, DCCP A and DCCP B decide to communicate using
        an out-of-band mechanism (in this case labelled SDP), whereupon the
        client and server are started. DCCP B actively indicates its listening
        state by sending a DCCP-Listen message. This fulfils the requirement
        of punching a hole in NB (also creating the binding to the external
        address and port). This message is dropped by NA since no hole exists
        there yet. DCCP A initiates a connection by entering the REQUEST state
        and sending a DCCP-Request. (It is assumed that if NA were a NAT
        device, then this would also result in a binding that maps the pinhole
        to the external address and port.) The DCCP-Request is received by
        DCCP B, via the binding at NB. DCCP B transmits the DCCP-Response and
        connects through the bindings now in place at NA and NB.
</p><br /><hr class="insert" />
<a name="server_before_client"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
 DCCP A                                        DCCP B
 ------               NA      NB               ------
 +-----------------+  +-+    +-+  +-----------------+
 |                 |  | |    | |  |                 | State = CLOSED
 | SDP --&gt;         |--+-+----+-+-&gt;|                 | State = INVITED
 |                 |  | |X---+-+--|&lt;-- DCCP-Listen  |
 |(State=REQUEST)  |  | |    | |  |                 |
 |DCCP-Request --&gt; |--+-+----+-+-&gt;|                 |
 |(State=PARTOPEN) | &lt;+-+----+-+--|&lt;-- DCCP-Response| State = RESPOND
 |DCCP-Ack --&gt;     |--+-+----+-+&gt; |                 |
 |                 |  | |    | |  |                 |
 |                 |  | |    | |  |                 |
 |DCCP-Data --&gt;    |--+-+----+-+-&gt;|                 | State = OPEN
 +-----------------+  +-+    +-+  +-----------------+
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;4: Event sequence when the server is started before the client&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3.1"></a><h3>2.3.1.&nbsp;
Repetition of DCCP-Listen</h3>

<p>This section examines the effect of not receiving the
          DCCP-Request.
</p>
<p>The figure below shows the sequence of packets where the DCCP
          server enters the INVITED state after reception of out-of-band
          signaling (e.g. SDP). The key timer operations at the client and
          server are respectively shown on the left and right of the diagram.
          It considers the case when the server does not receive a
          DCCP-Request within the first 600 ms (often the request would be
          received within this interval).
</p>
<p>The repetition of DCCP-Listen packets may be implemented using a
          timer. The timer is restarted with an interval of 200ms when sending
          each DCCP-Listen packet. It is cancelled when the server leaves the
          INVITED state. If the timer expires after the first and second
          transmission, it triggers a transmission of another DCCP-Listen
          Packet. If it expires after sending the third DCCP-Listen packet,
          the server leaves the INVITED state, to enter the LISTEN1state
          (where it passively waits for a DCCP-Request).
</p><br /><hr class="insert" />
<a name="retx"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
             DCCP A                           DCCP B
             ------  NA      NB               ------
             +----+  +-+    +-+  +-----------------+
             |    |  | |    | |  |                 | State = CLOSED
             | --&gt;|--+-+----+-+--|--&gt; SDP          |
             |    |  | |    | |  |                 | State = INVITED
             |    |  | |    | |  |                 |
             |    |  | |X---+-+--|&lt;-- DCCP-Listen  | Timer Starts
             |    |  | |    | |  |                 |      |
DCCP-Request | --&gt;|---&gt;+--X | |  |   (dropped)     |      |
Timer Starts |    |  | |    | |  |                 |      |
      |      |    |  | |    | |  |                 | 1st Timer Expiry
      |      |    |&lt;-+-+----+++--|&lt;-- DCCP-Listen  |
      |      |    |  | |    | |  |                 | Timer Starts
      |      |    |  | |    | |  |                 |       |
      |      |    |  | |    | |  |                 | 2nd Timer Expiry
      |      |    |  | |    | |  |                 |
      |      |    |&lt;-+-+----+-+--|&lt;-- DCCP-Listen  | Timer Starts
      |      |    |  | |    | |  |                 |       |
      |      |    |  | |    | |  |                 | 3rd Timer Expiry
      |      |    |  | |    | |  |                 |
      |      |    |  | |    | |  |                 | State = LISTEN1
      |      ~    ~  ~ ~    ~ ~  ~                 ~
      |      |    |  | |    | |  |                 |
Timer Expiry | --&gt;|--+-+----+-+--|--&gt; DCCP-Request |
             |    |  | |    | |  |                 | State = RESPOND
             | &lt;--|--+-+----+-+--|&lt;-- DCCP-Response|
             +----+  +-+    +-+  +-----------------+
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;5: Repetition of the DCCP-Listen Packet&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3.2"></a><h3>2.3.2.&nbsp;
Optional Triggered Retransmission of DCCP-Request</h3>

<p>The following figure illustrates a triggered retransmission. In
          this figure, the first DCCP-Listen is assumed to be lost in the
          network (e.g. does not open a pin-hole at NB). A later DCCP-Request
          is also not received (perhaps as a side-effect of the first loss).
          After 200ms, the DCCP-Listen packet is retransmitted and correctly
          received. This triggers the retransmission of the DCCP-Request,
          which, when received, results in a corresponding DCCP-Response.
</p>
<p><br /><hr class="insert" />
<a name="triggered"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
DCCP A                                         DCCP B
------               NA      NB               ------
+-----------------+  +-+    +-+  +-----------------+
|                 |  | |    | |  |                 | State = CLOSED
|SDP              |--+-+----+-+-&gt;|                 | State = INVITED
|(State= REQUEST) |  | |    | |  |                 |
|                 |  | |    | |X-|&lt;-- DCCP-Listen  |
|DCCP-Request --&gt; |--+-+---X| |  |                 |
|                 | &lt;+-+----+-+--|&lt;-- DCCP-Listen  |(retransmit)
|                 |  | |    | |  |                 |
|DCCP-Request --&gt; |--+-+----+-+-&gt;|                 | State = RESPOND
|  (Triggered)    |  | |    | |  |                 |
|                 |&lt;-+-+----+-+--|&lt;-- DCCP-Response|
|(State= PARTOPEN)|  | |    | |  |                 |
|DCCP-Ack --&gt;     |--+-+----+-+-&gt;|                 | State = OPEN
+-----------------+  +-+    +-+  +-----------------+
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;6: Example showing a triggered DCCP-Request&nbsp;</b></font><br /></td></tr></table><hr class="insert" />
The figure below illustrates the sequence of packets
          exchanged when a DCCP-Listen and DCCP-Request are processed out of
          order. Reception of the DCCP-Listen packet by the client triggers
          retransmission of the DCCP-Request. The server responds to the first
          DCCP-Request, and enters the RESPOND state. The server subsequently
          responds to the second DCCP-Request with another DCCP-Response,
          which is ignored by the client (already in the PARTOPEN
          state).<br /><hr class="insert" />
<a name="triggered2"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
DCCP A                                        DCCP B
------                NA     NB              ------
+-----------------+  +-+    +-+  +-----------------+
|                 |  | |    | |  |                 | State = CLOSED
|SDP              |--+-+----+-+-&gt;|                 | State = INVITED
|(State = REQUEST)|  | |    | |  |                 |
|DCCP-Request --&gt; |--+-+-  -+-+--|&lt;-- DCCP-Listen  |
|                 |  | | \/ | |  |                 |
|                 |  | | /\ | |  |                 |
|                 |&lt;-+-+-  -+-+-&gt;|                 |
|DCCP-Request --&gt; |--+-+-  -+-+--|&lt;-- DCCP-Response| State = RESPOND
|  (Triggered)    |  | | \/ | |  |                 |
|                 |  | | /\ | |  |                 |
|                 |&lt;-+-+-  -+-+-&gt;|                 |
|(State= PARTOPEN)|  | |    | |  |                 |
|DCCP-Ack     --&gt; |--+-+-  -+-+--|&lt;-- DCCP-Response|
|  (Triggered)    |  | | \/ | |  |                 |
|                 |  | | /\ | |  |                 |
|  (Ignored)      |&lt;-+-+-  -+-+-&gt;|                 | State = OPEN
|                 |  | |    | |  |                 |
+-----------------+  +-+    +-+  +-----------------+
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;7: Example showing an unnecessary triggered DCCP-Request&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.4"></a><h3>2.4.&nbsp;
Backwards Compatibility with RFC 4340</h3>

<p>No changes are required if a DCCP client conforming to this
        document communicates with a DCCP server conforming to <a class='info' href='#RFC4340'>[RFC4340]<span> (</span><span class='info'>Kohler, E., Handley, M., and S. Floyd, &ldquo;Datagram Congestion Control Protocol (DCCP),&rdquo; March&nbsp;2006.</span><span>)</span></a>.
</p>
<p>If a client implements only <a class='info' href='#RFC4340'>[RFC4340]<span> (</span><span class='info'>Kohler, E., Handley, M., and S. Floyd, &ldquo;Datagram Congestion Control Protocol (DCCP),&rdquo; March&nbsp;2006.</span><span>)</span></a>, an
        incoming DCCP-Listen packet would be ignored due to step 1 in <a class='info' href='#RFC4340'>[RFC4340]<span> (</span><span class='info'>Kohler, E., Handley, M., and S. Floyd, &ldquo;Datagram Congestion Control Protocol (DCCP),&rdquo; March&nbsp;2006.</span><span>)</span></a>, 8.1, which at the same time also conforms to
        the behaviour specified by this document.
</p>
<p>This document further does not modify communication for any DCCP
        server that implements a passive-open without fully binding the
        addresses, ports and Service Codes to be used. The authors therefore
        do not expect practical deployment problems with existing conformant
        DCCP implementations.
</p>
<a name="rationale"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Discussion of Design Decisions</h3>

<p>This is an informative section that reviews the rationale for the
      design of this method.
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Rationale for a New Packet Type</h3>

<p>The DCCP-Listen packet specified in <a class='info' href='#listen_packet'>Section&nbsp;2.2.1<span> (</span><span class='info'>DCCP-Listen Packet Format</span><span>)</span></a> has the same format as the DCCP-Request
        packet (<a class='info' href='#RFC4340'>[RFC4340]<span> (</span><span class='info'>Kohler, E., Handley, M., and S. Floyd, &ldquo;Datagram Congestion Control Protocol (DCCP),&rdquo; March&nbsp;2006.</span><span>)</span></a>, 5.1), the only difference is
        in the value of the Type field. The usage, however, differs. The
        DCCP-Listen packet serves as an advisory message, not as part of the
        actual connection setup: sequence numbers have no meaning, and no
        payload can be communicated.
</p>
<p>A DCCP-Request packet could in theory also have been used for the
        same purpose. The following arguments were against this:
</p>
<p>The first problem was that of semantic overloading: the
        DCCP-Request defined in <a class='info' href='#RFC4340'>[RFC4340]<span> (</span><span class='info'>Kohler, E., Handley, M., and S. Floyd, &ldquo;Datagram Congestion Control Protocol (DCCP),&rdquo; March&nbsp;2006.</span><span>)</span></a> serves a
        well-defined purpose, being the initial packet of the 3-way handshake.
        Additional use in the manner of a DCCP-Listen packet would have
        required DCCP processors to have had two different processing paths:
        one where a DCCP-Request was interpreted as part of the initial
        handshake, and another where the same packet was interpreted as an
        indicator message. This would complicate packet processing in hosts
        and in particular stateful middleboxes (which may have restricted
        computational resources).
</p>
<p>The second problem is that a client receiving a DCCP-Request from a
        server could generate a DCCP-Reset packet if it had not yet entered
        the REQUEST state (step 7 in <a class='info' href='#RFC4340'>[RFC4340]<span> (</span><span class='info'>Kohler, E., Handley, M., and S. Floyd, &ldquo;Datagram Congestion Control Protocol (DCCP),&rdquo; March&nbsp;2006.</span><span>)</span></a>, 8.5). The
        method specified in this document lets client endpoints ignore
        DCCP-Listen packets. Adding a similar rule for the DCCP-Request packet
        would have been cumbersome: clients would not have been able to
        distinguish between a Request meant to be an indicator message and a
        genuinely erratic connection initiation.
</p>
<p>The third problem is similar, and refers to a client receiving the
        indication after having itself sent a (connection-initiation)
        DCCP-Request. Step 7 in section 8.5 of <a class='info' href='#RFC4340'>[RFC4340]<span> (</span><span class='info'>Kohler, E., Handley, M., and S. Floyd, &ldquo;Datagram Congestion Control Protocol (DCCP),&rdquo; March&nbsp;2006.</span><span>)</span></a>
        requires the client to reply to an "indicator message" Request from
        the server with a DCCP-Sync. Since sequence numbers are ignored for
        this type of message, additional and complex processing would become
        necessary: either to ask the client not to respond to a DCCP-Request
        when the request is of type "indicator message"; or ask middleboxes
        and servers to ignore Sync packets generated in response to "indicator
        message" DCCP-Requests. Furthermore, since no initial sequence numbers
        have been negotiated at this stage, sending a DCCP-SyncAck would not
        be meaningful.
</p>
<p>The use of a separate packet type therefore allows simpler and
        clearer processing.
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.1"></a><h3>3.1.1.&nbsp;
Use of sequence numbers</h3>

<p>Although the DCCP-Listen sequence number fields are ignored, they
          have been retained in the DCCP-Listen packet header to reuse the
          generic header format from section 5.1 of <a class='info' href='#RFC4340'>[RFC4340]<span> (</span><span class='info'>Kohler, E., Handley, M., and S. Floyd, &ldquo;Datagram Congestion Control Protocol (DCCP),&rdquo; March&nbsp;2006.</span><span>)</span></a>.
</p>
<p>DCCP assigns a random initial value to the sequence number when a
          DCCP connection is established <a class='info' href='#RFC4340'>[RFC4340]<span> (</span><span class='info'>Kohler, E., Handley, M., and S. Floyd, &ldquo;Datagram Congestion Control Protocol (DCCP),&rdquo; March&nbsp;2006.</span><span>)</span></a>.
          However, a sender is required to set this value to zero for a
          DCCP-Listen packet. Both clients and middleboxes are also required
          to ignore this value.
</p>
<p>The rationale for ignoring the sequence number fields of
          DCCP-Listen packets is that at the time the DCCP-Listen is
          exchanged, the endpoints have not yet entered connection setup: the
          DCCP-Listen packet is sent while the server is still in the
          passive-open (INVITED) state, i.e. it has not yet allocated state,
          other than binding to the client's IP-address:port and Service
          Code.
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Generation of Listen Packets</h3>

<p>A DCCP server SHOULD by default permit generation of DCCP-Listen
        packets. Since DCCP-Listen packets solve a particular problem with NAT
        and/or firewall traversal, the generation of DCCP-Listen packets on
        passive sockets is tied to a condition (binding to an a priori known
        remote address and Service Code) to ensure this does not interfere
        with the general case of "normal" DCCP connections (where client
        addresses are generally not known in advance).
</p>
<p>In the TCP world, the analogue is a transition from LISTEN to
        SYN_SENT by virtue of sending data: "A fully specified passive call
        can be made active by the subsequent execution of a SEND" (<a class='info' href='#RFC0793'>[RFC0793]<span> (</span><span class='info'>Postel, J., &ldquo;Transmission Control Protocol,&rdquo; September&nbsp;1981.</span><span>)</span></a>, 3.8). Unlike TCP, this update does not
        perform a role-change from passive to active. Like TCP, DCCP-Listen
        packets are only sent by a DCCP-server when the endpoint is fully
        specified (<a class='info' href='#protocol_method'>Section&nbsp;2.2<span> (</span><span class='info'>Protocol Method</span><span>)</span></a>).
</p>
<a name="listen_repeats"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
Repetition of DCCP-Listen Packets</h3>

<p>Repetition is a necessary requirement, to increase robustness and
        the chance of successful connection establishment when a DCCP-Listen
        packet is lost due to congestion, link loss, or some other reason.
</p>
<p>The decision to recommend a maximum number of 3 timeouts (2
        repeated copies of the original DCCP-Listen packet) results from the
        following considerations: The repeated copies need to be spaced
        sufficiently far apart in time to avoid suffering from correlated
        loss. The interval of 200 ms was chosen to accommodate a wide range of
        wireless and wired network paths.
</p>
<p>Another constraint is given by the retransmission interval for the
        DCCP-Request (<a class='info' href='#RFC4340'>[RFC4340]<span> (</span><span class='info'>Kohler, E., Handley, M., and S. Floyd, &ldquo;Datagram Congestion Control Protocol (DCCP),&rdquo; March&nbsp;2006.</span><span>)</span></a>, 8.1.1). To establish
        state, intermediate systems need to receive a (retransmitted)
        DCCP-Listen packet before the DCCP-Request times out (1 second). With
        three timeouts, each spaced 200 milliseconds apart, the overall time
        is still below one second. On the other hand, the sum of 600
        milliseconds is sufficiently large to provide for longer one-way
        delays, such as e.g. found on some wireless links.
</p>
<p>The rationale behind transitioning to the LISTEN1 state after two
        repetitions is that other problems, independent of establishing
        middlebox state, may occur (such as delay or loss of the initial
        DCCP-Request). Any late or retransmitted DCCP-Request packets will
        then still reach the server allowing connection establishment to
        successfully complete.
</p>
<a name="SECURITY"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Security Considerations</h3>

<p>General security considerations for DCCP are described in <a class='info' href='#RFC4340'>[RFC4340]<span> (</span><span class='info'>Kohler, E., Handley, M., and S. Floyd, &ldquo;Datagram Congestion Control Protocol (DCCP),&rdquo; March&nbsp;2006.</span><span>)</span></a>. Security considerations for Service Codes are
      further described in <a class='info' href='#ID-DCCP-SC'>[ID&#8209;DCCP&#8209;SC]<span> (</span><span class='info'>Fairhurst, G., &ldquo;The DCCP Service Code,&rdquo; June&nbsp;2008.</span><span>)</span></a>.
</p>
<p>The method specified in this document generates a DCCP-Listen packet
      addressed to a specific DCCP client. This exposes the state of a DCCP
      server that is in a passive listening state (i.e. waiting to accept a
      connection from a known client).
</p>
<p>The exposed information is not encrypted and therefore could be seen
      on the network path to the DCCP client. An attacker on this return path
      could observe a DCCP-Listen packet and then exploit this by spoofing a
      packet (e.g. DCCP-Request, DCCP-Reset) with the IP addresses, DCCP
      ports, and Service Code that correspond to the values to be used for the
      connection. As in other on-path attacks, this could be used to inject
      data into a connection or to deny a connection request. A similar
      on-path attack is also possible for any DCCP connection, once the
      session is initiated by the client (<a class='info' href='#RFC4340'>[RFC4340]<span> (</span><span class='info'>Kohler, E., Handley, M., and S. Floyd, &ldquo;Datagram Congestion Control Protocol (DCCP),&rdquo; March&nbsp;2006.</span><span>)</span></a>,
      Section 18).
</p>
<p>The DCCP-Listen packet is only sent in response to explicit prior
      out-of-band signaling from a DCCP client to the DCCP server (e.g. SDP
      <a class='info' href='#RFC4566'>[RFC4566]<span> (</span><span class='info'>, &ldquo;SDP: Session Description Protocol,&rdquo; July&nbsp;2006.</span><span>)</span></a>) information communicated via the Session
      Initiation Protocol <a class='info' href='#RFC3261'>[RFC3261]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a>), and will normally
      directly precede a DCCP-Request sent by the client (which carries the
      same information).
</p>
<p>This update does not significantly increase the complexity or
      vulnerability of a DCCP implementation that conforms to <a class='info' href='#RFC4340'>[RFC4340]<span> (</span><span class='info'>Kohler, E., Handley, M., and S. Floyd, &ldquo;Datagram Congestion Control Protocol (DCCP),&rdquo; March&nbsp;2006.</span><span>)</span></a>. A DCCP server should therefore by default
      permit generation of DCCP-Listen packets. A server that wishes to
      prevent disclosing this information MAY refrain from generating
      DCCP-Listen packets, without impacting subsequent DCCP state
      transitions, but possibly inhibiting middlebox traversal.
</p>
<p>The DCCP base specification in RFC 4340 defines an Init Cookie
      option, which lets a DCCP server avoid having to hold any state until
      the three-way connection setup handshake has completed. This
      specification enables an out-of-band mechanism that forces the server to
      hold state for a connection that has not yet been established. This is a
      change in the security profile of DCCP, although the impact is expected
      to be minimal and depends on the security features of the out-of-band
      mechanism (SIP SDP is one such mechanism that provides sufficient
      security features).
</p>
<p>The method creates a new way for a client to set up a DCCP connection
      to a server using out-of-band data, transported over a signaling
      connection. If the signaling connection is not encrypted, an
      eavesdropper could see the client IP address and the port for the
      to-be-established DCCP connection and generate a DCCP-Listen packet
      towards the client using its own server-IP address and port. However, a
      client will only respond to a received DCCP-Listen packet if the
      server-IP address and port match an existing DCCP connection that is in
      the REQUEST state (section 2.3.2). The method therefore cannot be used
      to redirect the connection to a different server IP address.
</p>
<a name="IANA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
IANA Considerations</h3>

<p>The IANA should register a new Packet Type, "DCCP-Listen", in the
      IANA DCCP Packet Types Registry. The decimal value 10 has been assigned
      to this type. This registry entry must reference this document.
</p>
<p>
</p>
<h3>Note to the RFC Editor:</h3>

<p>This value of 10 must be confirmed by IANA in the registry when
        this document is published, please then remove this note.
</p>
<h3>Acknowledgement</h3>

<p>This update was originally co-authored by Dr Gerrit Renker,
        University of Aberdeen, and the present author acknowledges his
        insight in design of the protocol mechanism and in careful review of
        the early revisions of the document text. Dan Wing assisted on issues
        relating to the use of NAT and NAPT.
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Disclaimer</h3>

<p>This document may contain material from IETF Documents or IETF
      Contributions published or made publicly available before November 10,
      2008. The person(s) controlling the copyright in some of this material
      may not have granted the IETF Trust the right to allow modifications of
      such material outside the IETF Standards Process. Without obtaining an
      adequate license from the person(s) controlling the copyright in such
      materials, this document may not be modified outside the IETF Standards
      Process, and derivative works of it may not be created outside the IETF
      Standards Process, except to format it for publication as an RFC or to
      translate it into languages other than English.
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>7.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="ID-DCCP-SC">[ID-DCCP-SC]</a></td>
<td class="author-text">Fairhurst, G., &ldquo;The DCCP Service Code,&rdquo; Work In Progress,&nbsp;draft-ietf-dccp-serv-codes-09, June&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text">Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement
          Levels,&rdquo; March&nbsp;1997.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4340">[RFC4340]</a></td>
<td class="author-text">Kohler, E., Handley, M., and S. Floyd, &ldquo;Datagram Congestion Control Protocol (DCCP),&rdquo; March&nbsp;2006.</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>7.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="Epp05">[Epp05]</a></td>
<td class="author-text">Eppinger, J-L., &ldquo;TCP Connections for P2P Apps: A Software Approach to Solving
          the NAT Problem,&rdquo; Carnegie Mellon University/ISRI Technical Report&nbsp;CMU-ISRI-05-104, January&nbsp;2005.</td></tr>
<tr><td class="author-text" valign="top"><a name="FSK05">[FSK05]</a></td>
<td class="author-text">Ford, B., Srisuresh, P., and D. Kegel, &ldquo;Peer-to-Peer Communication Across Network Address
          Translators,&rdquo; Proceedings of USENIX-05,&nbsp;pages 179-192, 2005.</td></tr>
<tr><td class="author-text" valign="top"><a name="GF05">[GF05]</a></td>
<td class="author-text">Guha, S. and P. Francis, &ldquo;Characterization and Measurement of TCP Traversal through
          NATs and Firewalls,&rdquo; Proceedings of Internet Measurement Conference (IMC-05),&nbsp;pages 199-211, 2005.</td></tr>
<tr><td class="author-text" valign="top"><a name="GTF04">[GTF04]</a></td>
<td class="author-text">Guha, S., Takeda, Y., and P. Francis, &ldquo;NUTSS: A SIP based approach to UDP and TCP
          connectivity,&rdquo; Proceedings of SIGCOMM-04 Workshops, Portland, OR,&nbsp;pages 43-48, 2004.</td></tr>
<tr><td class="author-text" valign="top"><a name="H.323">[H.323]</a></td>
<td class="author-text">ITU-T, &ldquo;Packet-based Multimedia Communications Systems,&rdquo; Recommendation&nbsp;H.323, July&nbsp;2003.</td></tr>
<tr><td class="author-text" valign="top"><a name="ID-BEHAVE-DCCP">[ID-BEHAVE-DCCP]</a></td>
<td class="author-text">&ldquo;Network Address Translation (NAT) Behavioral Requirements for
          DCCP,&rdquo; Work in Progress&nbsp;draft-ietf-behave-dccp-05.txt, 2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="ID-BEHAVE-TURN">[ID-BEHAVE-TURN]</a></td>
<td class="author-text">Rosenberg, J., Mahy, R., and P. Matthews, &ldquo;Traversal Using Relays around NAT (TURN): Relay Extensions to
          Session Traversal Utilities for NAT (STUN),&rdquo; Work In Progress,&nbsp;draft-ietf-behave-turn-14, February&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="ID-MMUSIC-ICE">[ID-MMUSIC-ICE]</a></td>
<td class="author-text">Rosenberg, J., &ldquo;TCP Candidates with Interactive Connectivity Establishment
          (ICE),&rdquo; Work In Progress,&nbsp;draft-ietf-mmusic-ice-tcp-07, February&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="NAT-APP">[NAT-APP]</a></td>
<td class="author-text">Ford, B., Srisuresh, P., and D. Kegel, &ldquo;Application Design Guidelines for Traversal through Network
          Address Translators,&rdquo; Work In Progress,&nbsp;draft-ford-behave-app-05, March&nbsp;2007.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC0793">[RFC0793]</a></td>
<td class="author-text">Postel, J., &ldquo;Transmission Control Protocol,&rdquo; September&nbsp;1981.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2663">[RFC2663]</a></td>
<td class="author-text">Srisuresh, P. and M. Holdrege, &ldquo;IP Network Address Translator (NAT) Terminology and
          Considerations,&rdquo; August&nbsp;1999.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3022">[RFC3022]</a></td>
<td class="author-text">Srisuresh, P. and K. Egevang, &ldquo;Traditional IP Network Address Translator (Traditional
          NAT),&rdquo; January&nbsp;2001.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3235">[RFC3235]</a></td>
<td class="author-text">Senie, D., &ldquo;Network Address Translator (NAT)-Friendly Application Design
          Guidelines,&rdquo; January&nbsp;2002.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3261">[RFC3261]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4566">[RFC4566]</a></td>
<td class="author-text">&ldquo;SDP: Session Description Protocol,&rdquo; July&nbsp;2006.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4787">[RFC4787]</a></td>
<td class="author-text">&ldquo;Network Address Translation (NAT) Behavioral Requirements for
          Unicast UDP,&rdquo; January&nbsp;2007.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5382">[RFC5382]</a></td>
<td class="author-text">Guha, S., Biswas, K., Ford, B., Sivakumar, S., and P. Srisuresh, &ldquo;NAT Behavioral Requirements for TCP,&rdquo; &nbsp;RFC5382, April&nbsp;2007.</td></tr>
</table>

<a name="BGND"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
Discussion of Existing NAT Traversal Techniques</h3>

<p>This appendix provides a brief review of existing techniques to
      establish connectivity across NAT devices, with the aim of providing
      background information. This first considers TCP NAT traversal based on
      simultaneous-open, and then discuss a second technique based on role
      reversal. Further information can be found in <a class='info' href='#GTF04'>[GTF04]<span> (</span><span class='info'>Guha, S., Takeda, Y., and P. Francis, &ldquo;NUTSS: A SIP based approach to UDP and TCP           connectivity,&rdquo; 2004.</span><span>)</span></a> and <a class='info' href='#GF05'>[GF05]<span> (</span><span class='info'>Guha, S. and P. Francis, &ldquo;Characterization and Measurement of TCP Traversal through           NATs and Firewalls,&rdquo; 2005.</span><span>)</span></a>.
</p>
<p>A central idea shared by these techniques is to make peer-to-peer
      sessions look like "outbound" sessions on each NAT device. Often a
      rendezvous server, located in the public address realm, is used to
      enable clients to discover their NAT topology and the addresses of
      peers.
</p>
<p>The term 'hole punching' was coined in <a class='info' href='#FSK05'>[FSK05]<span> (</span><span class='info'>Ford, B., Srisuresh, P., and D. Kegel, &ldquo;Peer-to-Peer Communication Across Network Address           Translators,&rdquo; 2005.</span><span>)</span></a>
      and refers to creating soft state in a traditional NAT device, by
      initiating an outbound connection. A well-behaved NAT can subsequently
      exploit this to allow a reverse connection back to the host in the
      private address realm.
</p>
<p>UDP and TCP hole punching use nearly the same technique <a class='info' href='#RFC4787'>[RFC4787]<span> (</span><span class='info'>, &ldquo;Network Address Translation (NAT) Behavioral Requirements for           Unicast UDP,&rdquo; January&nbsp;2007.</span><span>)</span></a>. The adaptation of the basic UDP hole punching
      principle to TCP NAT traversal <a class='info' href='#RFC5382'>[RFC5382]<span> (</span><span class='info'>Guha, S., Biswas, K., Ford, B., Sivakumar, S., and P. Srisuresh, &ldquo;NAT Behavioral Requirements for TCP,&rdquo; April&nbsp;2007.</span><span>)</span></a> was
      introduced in section 4 of <a class='info' href='#FSK05'>[FSK05]<span> (</span><span class='info'>Ford, B., Srisuresh, P., and D. Kegel, &ldquo;Peer-to-Peer Communication Across Network Address           Translators,&rdquo; 2005.</span><span>)</span></a> and relies on
      the simultaneous-open feature of TCP <a class='info' href='#RFC0793'>[RFC0793]<span> (</span><span class='info'>Postel, J., &ldquo;Transmission Control Protocol,&rdquo; September&nbsp;1981.</span><span>)</span></a>. A
      further difference between UDP and TCP lies in the way the clients
      perform connectivity checks, after obtaining suitable address pairs for
      connection establishment. Whereas in UDP a single socket is sufficient,
      TCP clients require several sockets for the same address and port tuple:
      </p>
<ul class="text">
<li>a passive socket to listen for connectivity tests from peers
          and
</li>
<li>multiple active connections from the same address to test
          reachability of other peers.
</li>
</ul>

<p>The SYN sent out by client A to its peer B creates soft state in A's
      NAT. At the same time, B tries to connect to A: </p>
<ul class="text">
<li>if the SYN from B has left B's NAT before the arrival of A's SYN,
          both endpoints perform simultaneous-open (4-way handshake of
          SYN/SYNACK);
</li>
<li>otherwise A's SYN may not enter B's NAT, which leads to B
          performing a normal open (SYN_SENT =&gt; ESTABLISHED) and A
          performing a simultaneous-open (SYN_SENT =&gt; SYN_RCVD =&gt;
          ESTABLISHED).
</li>
</ul>

<p>In the latter case, it is necessary that the NAT does not interfere
      with a RST segment (REQ-4 in <a class='info' href='#RFC5382'>[RFC5382]<span> (</span><span class='info'>Guha, S., Biswas, K., Ford, B., Sivakumar, S., and P. Srisuresh, &ldquo;NAT Behavioral Requirements for TCP,&rdquo; April&nbsp;2007.</span><span>)</span></a>). The
      simultaneous-open solution is convenient due to its simplicity, and is
      thus a preferred mode of operation in the TCP extension for ICE (<a class='info' href='#ID-MMUSIC-ICE'>[ID&#8209;MMUSIC&#8209;ICE]<span> (</span><span class='info'>Rosenberg, J., &ldquo;TCP Candidates with Interactive Connectivity Establishment           (ICE),&rdquo; February&nbsp;2008.</span><span>)</span></a>, sec. 2).
</p>
<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.1"></a><h3>A.1.&nbsp;
NAT traversal Based on a Simultaneous-Request</h3>

<p>Among the various TCP NAT traversal approaches, the one using a TCP
        simultaneous-open suggests itself as a candidate for DCCP due to its
        simplicity <a class='info' href='#GF05'>[GF05]<span> (</span><span class='info'>Guha, S. and P. Francis, &ldquo;Characterization and Measurement of TCP Traversal through           NATs and Firewalls,&rdquo; 2005.</span><span>)</span></a>, <a class='info' href='#NAT-APP'>[NAT&#8209;APP]<span> (</span><span class='info'>Ford, B., Srisuresh, P., and D. Kegel, &ldquo;Application Design Guidelines for Traversal through Network           Address Translators,&rdquo; March&nbsp;2007.</span><span>)</span></a>.
</p>
<p>A characteristic of TCP simultaneous-open is that this erases the
        clear distinction between client and server: both sides enter through
        active (SYN_SENT) as well as passive (SYN_RCVD) states. This
        characteristic conflicts with the DCCP design decision to provide a
        clear separation between client and server functions (<a class='info' href='#RFC4340'>[RFC4340]<span> (</span><span class='info'>Kohler, E., Handley, M., and S. Floyd, &ldquo;Datagram Congestion Control Protocol (DCCP),&rdquo; March&nbsp;2006.</span><span>)</span></a>, 4.6).
</p>
<p>In DCCP several mechanisms implicitly rely on clearly-defined
        client/server roles:
</p>
<p></p>
<ul class="text">
<li>Feature Negotiation: with few exceptions, almost all of DCCP's
            negotiable features use the "server-priority" reconciliation rule
            (<a class='info' href='#RFC4340'>[RFC4340]<span> (</span><span class='info'>Kohler, E., Handley, M., and S. Floyd, &ldquo;Datagram Congestion Control Protocol (DCCP),&rdquo; March&nbsp;2006.</span><span>)</span></a>, 6.3.1), whereby a peer exchanges
            its preference lists of feature values, and the server decides the
            outcome.
</li>
<li>Closing States: only a server may generate DCCP-CloseReq
            packets (asking the peer to hold timewait state), while a client
            is only permitted to send DCCP-Close or DCCP-Reset packets to
            terminate a connection (<a class='info' href='#RFC4340'>[RFC4340]<span> (</span><span class='info'>Kohler, E., Handley, M., and S. Floyd, &ldquo;Datagram Congestion Control Protocol (DCCP),&rdquo; March&nbsp;2006.</span><span>)</span></a>, 8.3).
</li>
<li>Service Codes <a class='info' href='#ID-DCCP-SC'>[ID&#8209;DCCP&#8209;SC]<span> (</span><span class='info'>Fairhurst, G., &ldquo;The DCCP Service Code,&rdquo; June&nbsp;2008.</span><span>)</span></a>: a server may
            be associated with multiple Service Codes, while a client must be
            associated with exactly one (<a class='info' href='#RFC4340'>[RFC4340]<span> (</span><span class='info'>Kohler, E., Handley, M., and S. Floyd, &ldquo;Datagram Congestion Control Protocol (DCCP),&rdquo; March&nbsp;2006.</span><span>)</span></a>,
            8.1.2).
</li>
<li>Init Cookies: may only be used by a server and on DCCP-Response
            packets (<a class='info' href='#RFC4340'>[RFC4340]<span> (</span><span class='info'>Kohler, E., Handley, M., and S. Floyd, &ldquo;Datagram Congestion Control Protocol (DCCP),&rdquo; March&nbsp;2006.</span><span>)</span></a>, 8.1.4).
</li>
</ul>

<p>The latter two points are not obstacles per se, but would have
        hindered the transition from a passive to an active socket. In DCCP, a
        DCCP-Request is only generated by a client. The assumption that "all
        DCCP hosts may be clients", was dismissed, since it would require
        undersirable changes to the state machine and would limit application
        programming. As a consequence, the retro-fitting a TCP-style
        simultaneous-open into DCCP to allow simulatenous exchange of
        DCCP-Connect packets was not recommended.
</p>
<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.2"></a><h3>A.2.&nbsp;
Role Reversal</h3>

<p>Another simple TCP NAT traversal scheme uses role traversal (<a class='info' href='#Epp05'>[Epp05]<span> (</span><span class='info'>Eppinger, J-L., &ldquo;TCP Connections for P2P Apps: A Software Approach to Solving           the NAT Problem,&rdquo; January&nbsp;2005.</span><span>)</span></a> and <a class='info' href='#GTF04'>[GTF04]<span> (</span><span class='info'>Guha, S., Takeda, Y., and P. Francis, &ldquo;NUTSS: A SIP based approach to UDP and TCP           connectivity,&rdquo; 2004.</span><span>)</span></a>), where a peer
        first opens an active connection for the single purpose of punching a
        hole in the firewall; and then reverts to a listening socket,
        accepting connections arriving via the new path.
</p>
<p>This solution would have had several disadvantages if used with
        DCCP. First, a DCCP server would be required to change its role to
        temporarily become a 'client'. This would have required modification
        to the state machine, in particular the treatment of Service Codes and
        perhaps Init Cookies. Further, the method must follow feature
        negotiation, since an endpoint's choice of initial options can rely on
        its role (i.e. if an endpoint knows it is the server, it can make a
        priori assumptions about the preference lists of features it is
        negotiating with the client, thereby enforcing a particular policy).
        Finally, the server would have needed additional processing to ensure
        that the connection arriving at the listening socket matches the
        previously opened active connection.
</p>
<p>This approach was therefore not recommend for DCCP.
</p>
<a name="anchor19"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B"></a><h3>Appendix B.&nbsp;
Change Log - to be removed by RFC-Ed</h3>

<p>Revision 00 was based on a previous individual submission
      draft-fairhurst-dccp-behave-update-01 by the same authors.
</p>
<p>Revision 01:
</p>
<p></p>
<ul class="text">
<li>introduced many format changes to improve readability
</li>
<li>migrated background information into the Appendix
</li>
<li>added <a class='info' href='#intro3'>Section&nbsp;1.3<span> (</span><span class='info'>Structure of this Document</span><span>)</span></a> to summarize the document
          structure
</li>
<li>updated introductory paragraph of <a class='info' href='#SPEC'>Section&nbsp;2<span> (</span><span class='info'>Procedure for Near-Simultaneous Open</span><span>)</span></a> to
          account for new structure
</li>
<li>added captions to all figures
</li>
<li>updated the specification in <a class='info' href='#SPEC'>Section&nbsp;2<span> (</span><span class='info'>Procedure for Near-Simultaneous Open</span><span>)</span></a> to (i)
          permit on DCCP-Listen packets; (ii) explain why the presence of
          payload data is not useful; (iii) clarify that middleboxes must not
          interpret sequence numbers on DCCP-Listen packets
</li>
<li>clarified that the default value of the Allow Short Seqno feature
          is to be used
</li>
<li>added references to the Service Code draft <a class='info' href='#ID-DCCP-SC'>[ID&#8209;DCCP&#8209;SC]<span> (</span><span class='info'>Fairhurst, G., &ldquo;The DCCP Service Code,&rdquo; June&nbsp;2008.</span><span>)</span></a>
</li>
<li>clarified the processing of DCCP-Listen packets by server
          endpoints
</li>
<li>corrected the reaction of a client implementing <a class='info' href='#RFC4340'>[RFC4340]<span> (</span><span class='info'>Kohler, E., Handley, M., and S. Floyd, &ldquo;Datagram Congestion Control Protocol (DCCP),&rdquo; March&nbsp;2006.</span><span>)</span></a> only - DCCP-Listen packets are treated as
          unknown and hence do not generate a DCCP-Reset
</li>
<li>swapped order of IANA / Security-Considerations sections
</li>
<li>added a note in the Security Considerations section that servers
          may refrain from generating DCCP-Listen packets
</li>
</ul>

<p>Revision 02:</p>
<ul class="text">
<li>minor edits following WG feedback at IETF meeting
</li>
<li>updated to reflect ID.Behave-DCCP
</li>
<li>update to reflect comments from Colin Perkins
</li>
<li>added a tentative IANA code point (as suggested at IETF-73)
</li>
</ul>

<p></p>
<ul class="text">
<li>DRAFT -02
</li>
<li>Edits following editorial corrections and suggestions from Tom
          Phelan
</li>
<li>Edits following comments from Dan Wing on role of NAT,
          retransmission, and other issues.
</li>
<li>Revised authors list
</li>
<li>Reworded abstract, reworded appendices to clarify what was not
          done
</li>
<li>Checked spelling
</li>
<li>Although this version includes significant changes to format and
          text it does not seek to modify the intended procedure for a
          server.
</li>
<li>
</li>
<li>DRAFT - 03
</li>
<li>Comments by Dan Wing
</li>
</ul>
<ul class="text">
<li><p>DRAFT -04
</li>
<li>Corrections by Dan Wing, and new diagram <a class='info' href='#retx'>Figure&nbsp;5<span> (</span><span class='info'>Repetition of the DCCP-Listen Packet</span><span>)</span></a> to and text to clarify the retransmission
          algorithm.
</li>
</ul></p>
<ul class="text">
<li><p>DRAFT -05
</li>
<li>Sections re-ordered to bring the packet type definition to the
          front, and to correct a section mis-order in draft-04. References
          linked to IETF WGs and updated to satisfy IDNiTs.
</li>
<li>A number of Typos were fixed.
</li>
</ul></p>
<ul class="text">
<li><p>DRAFT -06
</li>
<li>This draft follows a completed WGLC.
</li>
<li>It includes responses to comments from Eddie Kohler, during
          WGLC.
</li>
<li>Magnus Westerlund requested two updates:
</li>
<li>A triggered join, based on reception of a DCCP-Listen causing a
          retransmission of a DCCP-Request.
</li>
<li>Updated figure 5.
</li>
<li>Updated language to differentiate the loss-prevention DCCP-Listen
          repetition being confused with the DCCP-Request retransmission.
</li>
<li>Added pseudocode and redrew state diagram, to match the
          pseudocode, including a transitory state transition to the
          LISTEN1state to process the received DCCP-Request. This is intended
          to be the same processing as in draft -05, even though the diagram
          now looks less pretty, and another state was created.
</li>
<li>This version circulated in draft form to WG on 29/11/08 - no
          additional comments received.
</li>
<li>Updated references.
</li>
<li>
</li>
</ul></p>
<ul class="text">
<li><p>DRAFT -07
</li>
<li>Fixed Section heading (missing in rev -06)
</li>
<li>Updated figure with a note to clarify the Response (from Magnus
          Westerlund).
</li>
<li>Editorial corrections proposed by T.Phelan.
</li>
<li>
</li>
</ul></p>
<ul class="text">
<li><p>DRAFT -08
</li>
<li>Fixed text in response to Sec-Dir review (Chris Newman) and
          GEN-ART review (Miguel A. Garcia)
</li>
<li>SC draft made normative (draft currently with IESG)
</li>
<li>Listen' changed to LISTEN1 in all places - to make this label
          clearer in the text
</li>
<li>Security considerations updated
</li>
<li>Addressed editorial comments received during LC.
</li>
</ul>
</p>
<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Author's Address</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Godred Fairhurst</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">University of Aberdeen</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">School of Engineering</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Fraser Noble Building</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Aberdeen  AB24 3UE</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Scotland</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:gorry@erg.abdn.ac.uk">gorry@erg.abdn.ac.uk</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.erg.abdn.ac.uk">http://www.erg.abdn.ac.uk</a></td></tr>
</table>
</body></html>
