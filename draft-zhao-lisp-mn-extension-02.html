<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>LISP Mobile Node extension</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 new section">
<link href="#rfc.section.3" rel="Chapter" title="3 Terminology">
<link href="#rfc.section.4" rel="Chapter" title="4 LISP Extension Operation">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1  EID-to-RLOC Mapping Update Operation">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Map-Unregister Operation">
<link href="#rfc.section.5" rel="Chapter" title="5 LISP Extension Message">
<link href="#rfc.section.5.1" rel="Chapter" title="5.1 LISP Packet Type Allocations">
<link href="#rfc.section.5.2" rel="Chapter" title="5.2 Map-Update Message Format">
<link href="#rfc.section.5.3" rel="Chapter" title="5.3 Map-Unregister Message Format">
<link href="#rfc.section.6" rel="Chapter" title="6 Security Considerations">
<link href="#rfc.section.7" rel="Chapter" title="7 IANA Considerations">
<link href="#rfc.section.8" rel="Chapter" title="8 Acknowledgments">
<link href="#rfc.references" rel="Chapter" title="9 References">
<link href="#rfc.references.1" rel="Chapter" title="9.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="9.2 Informative References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="LISP describes a network-based protocol that enables separation of IP addresses into two new numbering spaces: Endpoint Identifiers (EIDs) and Routing Locators (RLOCs). No changes are required to either host protocol stacks or to the "core" of the Internet infrastructure. The LISP Mobile Node extension design described in this document uses standard LISP functionality to provide scalable mobility for LISP mobile nodes." />
  <meta name="description" content="LISP describes a network-based protocol that enables separation of IP addresses into two new numbering spaces: Endpoint Identifiers (EIDs) and Routing Locators (RLOCs). No changes are required to either host protocol stacks or to the "core" of the Internet infrastructure. The LISP Mobile Node extension design described in this document uses standard LISP functionality to provide scalable mobility for LISP mobile nodes." />
  <meta name="keywords" content="Internet Draft, I-D" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">PPSP Working Group</td>
<td class="right">Ningxia. Zhao</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">Jiong. Shen</td>
</tr>
<tr>
<td class="left">Intended status: Informational</td>
<td class="right">Mo. Sun</td>
</tr>
<tr>
<td class="left">Expires: May 03, 2012</td>
<td class="right">ZTE Corporation</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">October 31, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">LISP Mobile Node extension<br />
  <span class="filename">draft-zhao-lisp-mn-extension-02</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>LISP describes a network-based protocol that enables separation of IP addresses into two new numbering spaces: Endpoint Identifiers (EIDs) and Routing Locators (RLOCs). No changes are required to either host protocol stacks or to the "core" of the Internet infrastructure. The LISP Mobile Node extension design described in this document uses standard LISP functionality to provide scalable mobility for LISP mobile nodes.</p>
<p>This document extends the lisp, it introduces some contents that lisp does not include but the author think it is important and recommendation them to be considered in the lisp.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on May 03, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">new section</a>
</li>
<li>3.   <a href="#rfc.section.3">Terminology</a>
</li>
<li>4.   <a href="#rfc.section.4">LISP Extension Operation</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1"> EID-to-RLOC Mapping Update Operation</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">Map-Unregister Operation</a>
</li>
<li>5.   <a href="#rfc.section.5">LISP Extension Message</a>
</li>
<li>5.1.   <a href="#rfc.section.5.1">LISP Packet Type Allocations</a>
</li>
<li>5.2.   <a href="#rfc.section.5.2">Map-Update Message Format</a>
</li>
<li>5.3.   <a href="#rfc.section.5.3">Map-Unregister Message Format</a>
</li>
<li>6.   <a href="#rfc.section.6">Security Considerations</a>
</li>
<li>7.   <a href="#rfc.section.7">IANA Considerations</a>
</li>
<li>8.   <a href="#rfc.section.8">Acknowledgments</a>
</li>
<li>9.   <a href="#rfc.references">References</a>
</li>
<li>9.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>9.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">LISP defines protocol mechanisms for mapping from EIDs to RLOCs, the lisp-MN specifies the behavior of the LISP Mobile Node, it has introduced some aspects of lisp-MN, but there are some other important areas have not considered.</p>
<p id="rfc.section.1.p.2">The LISP Mobile Node extension design described in this document uses standard LISP functionality to provide scalable mobility for the mobile node in the LISP site.</p>
<p></p>

<ul>
<li>The EID-to-RLOC mapping update operation has not be considered.  When a MN in the LISP site roams onto a new network, it receives a new RLOC, the lisp-MN Map-Registers it's new RLOC to its configured Map-Server, then the lisp-MN sends packet to its peer side by the new RLOC. But before the peer side receives the packet the lisp-MN sent, the peer side will send packet to lisp-MN by the old RLOC or the peer side must query the MS to obtain the lisp-MN's RLOC and then the peer side updates its cache of the EID-to-RLOC mapping and send packet by the new RLOC, this will cause a problem, the packet the lisp-MN to receive from its peer side will be missed or delayed when the LISP-MN roams onto a new network. So how to update the previous EID-to-RLOC mapping cached in the lisp-MN's peer side must be considered.</li>
<li>The deregister has not be considered. When a MN in the lisp site is shutdown or the user initiates to interrupt the network connection or the contract is limited, the lisp-MN needn't continue attach to the network, the lisp-MN or the network will initiate the process of the Map-Unregister.</li>
</ul>
<p id="rfc.section.1.p.4">This document specifies the LISP-MN extension operation, which includes two aspects, the EID-to-RLOC Mapping Update Operation and the Map-Unregister Operation.</p>
<p id="rfc.section.1.p.5">Design goals for the LISP-MN extension design include:</p>
<p></p>

<ul>
<li>The LISP-MN extension design described in this document based on the Lisp, this document does not change any contents of the LISP.</li>
<li>The LISP-MN extension design described in this document uses standard LISP functionality.</li>
<li>This document only do some extension of the lisp and only introduces the contents the author think must be supplemented to the lisp .</li>
<li>The LISP-MN extension design is built from the existing LISP components: the MN in lisp site, its corresponding side in communication , the existing Map-Server [LISP-MS] and the Interworking <a href="#LISP-INTERWORK">[LISP-INTERWORK]</a> infrastructures.</li>
</ul>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> new section</h1>
<p></p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> Terminology</h1>
<p id="rfc.section.3.p.1">This section defines the terms used in this document.</p>
<p id="rfc.section.3.p.2">LISP Mobile Node (LISP-MN): A LISP capable fast roaming mobile hand-set.</p>
<p id="rfc.section.3.p.3">Endpoint ID (EID): This is the traditional LISP EID [LISP], and is the address that a LISP mobile node uses as its address for transport connections. A LISP mobile node never changes its EID, which is typically a /32 or /128 prefix and is assigned to a loopback interface.  Note that the mobile node can have multiple EIDs, and these EIDs can be from different address families.</p>
<p id="rfc.section.3.p.4">Routing Locator (RLOC): This is the traditional LISP RLOC, and is in general a routable address that can be used to reach a mobile node. Note that there are cases in which an mobile node may receive an address that it thinks is an RLOC (perhaps via DHCP) which is either an EID or an RFC 1918 address <a href="#RFC1918">[RFC1918]</a>[RFC1918]. This could happen if, for example, if the mobile node roams into a LISP domain or a domain behind a Network Address Translator (NAT).</p>
<p id="rfc.section.3.p.5">Map-cache: A data structure which contains an EID-prefix, its associated RLOCs, and the associated policy. Map-caches are typically found in ITRs and PITRs.</p>
<p id="rfc.section.3.p.6">Map Update: A Map update is the lisp-MN notifies the correspondent to change the EID-to-RLOC mapping when the lisp-MN move to another location in the communication process.</p>
<p id="rfc.section.3.p.7">Map Unregister: A Map Unregister is the lisp-MN notifies the MS<a href="#LISP-Map-Server">[LISP-Map-Server]</a> to unbind the EID-to-RLOC mapping when the lisp-MN needn&#8217;t to attached to the network.</p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> LISP Extension Operation</h1>
<p id="rfc.section.4.p.1">The LISP Extension Operation described in this document uses the ETR/ITR or theLISP-MN to provide scalable fast mobility and the Map-Unregister operation.</p>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a>  EID-to-RLOC Mapping Update Operation</h1>
<p id="rfc.section.4.1.p.1">This section provides the EID-to-RLOC mapping update operation.</p>
<p id="rfc.section.4.1.p.2">After a roaming event, a LISP-MN must immediately register its new EID-to-RLOC mapping with its configured Map-Server(s). In addition, the Lisp-MN sends the EID-to-RLOC mapping update request to its peer side to inform the peer side the LISP-MN which is ongoing communication has moved to a new location and the Lisp-MN has received a new RLOC, the EID-to-RLOC mapping update request message carries the EID and the new RLOC of the Lisp-MN. After received the EID-to-RLOC mapping update request, the peer side updates the EID-to-RLOC mapping cached in its local, that is in the local cache use the new RLOC instead of the old RLOC in the EID-to-RLOC mapping, then the peer side returns he EID-to-RLOC mapping update response (Update Response) message to the lisp-MN. The EID-to-RLOC mapping update operation improves the efficiency of data transmission and decreases the occurrence of packet latency and packet loss when a roaming event occurs in communication .</p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> Map-Unregister Operation</h1>
<p id="rfc.section.4.2.p.1">When the MN in a lisp site is shutdown or the user initiates to interrupt the network connection, the MN needn't continue register to the network, the lisp-MN will initiate the process of the Map-Unregister.</p>
<p id="rfc.section.4.2.p.2">The lisp-MN sends a map-unregister to its configured Map-Server(s) to delete the EID-to-RLOC mapping stored in this MS.</p>
<p id="rfc.section.4.2.p.3">After received the Map-Unregister Request, the MS removes the EID-to-RLOC mapping stored in it and sends the Map-Unregister response to the lisp-MN, the message in this process carries the instructions indicates the success or failure of the Map-Unregister operation. The Map-Unregister process is completed.</p>
<p id="rfc.section.4.2.p.4">The Map-Unregister Operation also inclueds another scenario, when the lisp network detects the contact of the host is limited (how does the network detect the contact of the host is limited is out of this scope), the network will initiate the process of the Map-Unregister.</p>
<p id="rfc.section.4.2.p.5">When the lisp network detects the contact of the host is limited, the network side informs the MS the host be listed in the black. Then the MS removes the EID-to-RLOC mapping stored in it and sends a map-unregister to the ETR and the ITR which communications with the host&#65292; The MS can inform the ITR based on which has queried the MS for the EID-to-RLOC mapping of the host and TTL has not expired.</p>
<p id="rfc.section.4.2.p.6">After received the Map-Unregister Request, the ITR removes the EID-to-RLOC mapping stored in its cache and sends the Map-Unregister response to the MS, the ETR sets rules to prevent the flow to and from the black host according to EID of the black host and sends the Map-Unregister response to the MS.The Map-Unregister process is completed.</p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> LISP Extension Message</h1>
<p></p>
<h1 id="rfc.section.5.1">
<a href="#rfc.section.5.1">5.1.</a> LISP Packet Type Allocations</h1>
<p id="rfc.section.5.1.p.1">This section will be the authoritative source for allocating LISP Type values. Current allocations are:</p>
<p></p>

<ul>
<li>LISP Map-Update: 5 b'0101'</li>
<li>LISP Map-Unregister: 6 b'0110'</li>
</ul>
<h1 id="rfc.section.5.2">
<a href="#rfc.section.5.2">5.2.</a> Map-Update Message Format</h1>
<p id="rfc.section.5.2.p.1">The Map-Update message format is:</p>
<div id="#rfc.figure.1"></div>
<div id="#service-discovery"></div>
<pre> 
        0                   1                   2                   3
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |Type=5 |P|              Reserved               | Record Count  |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                         Nonce . . .                           |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                         . . . Nonce                           |
   +-&gt; +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |   |                          Record  TTL                          |
   |   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   R   | Locator Count | EID mask-len  | ACT |A|      Reserved         |
   e   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   c   | Rsvd  |  Map-Version Number   |       EID-prefix-AFI          |
   o   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   r   |                          EID-prefix                           |
   d   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |  /|    Priority   |    Weight     |  M Priority   |   M Weight    |
   | L +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | o |        Unused Flags     |L|p|R|           Loc-AFI             |
   | c +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |  \|                             Locator                           |
   +-&gt; +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                     Mapping Protocol Data                     |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


</pre>
<p id="rfc.section.5.2.p.2">Packet field descriptions:</p>
<p id="rfc.section.5.2.p.3">Type: 5 (Map-Update)</p>
<p id="rfc.section.5.2.p.4">The Map-Update message has the same contents as a Map-Register message. See Map-Register section in LISP <a href="#LISP">[LISP]</a>for field descriptions.</p>
<h1 id="rfc.section.5.3">
<a href="#rfc.section.5.3">5.3.</a> Map-Unregister Message Format</h1>
<p id="rfc.section.5.3.p.1">The Map-Unregister message format is:</p>
<div id="#rfc.figure.2"></div>
<pre>
        0                   1                   2                   3
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |Type=6 |P|              Reserved               | Record Count  |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                         Nonce . . .                           |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                         . . . Nonce                           |
   +-&gt; +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |   |                          Record  TTL                          |
   |   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   R   | Locator Count | EID mask-len  | ACT |A|      Reserved         |
   e   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   c   | Rsvd  |  Map-Version Number   |       EID-prefix-AFI          |
   o   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   r   |                          EID-prefix                           |
   d   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |  /|    Priority   |    Weight     |  M Priority   |   M Weight    |
   | L +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   | o |        Unused Flags     |L|p|R|           Loc-AFI             |
   | c +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |  \|                             Locator                           |
   +-&gt; +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                     Mapping Protocol Data                     |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

</pre>
<p></p>
<p id="rfc.section.5.3.p.3">Type: 6 (Map-Unregister)</p>
<p id="rfc.section.5.3.p.4">The EID-prefix in this message including the length is zero and the length in non-zero, when the length is zero, the EID-prefix just equal to the EID.</p>
<p id="rfc.section.5.3.p.5">Because one EID maybe mapping to multiple RLOCs, so the Map-Unregister operation including two cases. One case is to remove all the RLOC mapping to the EID when the Map-Unregister occurs, this time the Map-Unregister Message Format does not contain the field of the Locator. The second case is only remove one specific RLOC mapping to the EID when the Map-Unregister occurs, this time the Map-Unregister Message Format just contains the field of the Locator which must be canceled.</p>
<p id="rfc.section.5.3.p.6">The other field of the Map-Unregister message just has the same contents as a Map-Register message. See Map-Register section in LISP <a href="#LISP">[LISP]</a> for field descriptions.</p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> Security Considerations</h1>
<p id="rfc.section.6.p.1">Security for the LISP-MN design builds upon the security fundamentals found in LISP [LISP] for data-plane security and the LISP Map Server [LISP-MS] registration security. Security issues unique to the LISP-MN design are considered below.</p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> IANA Considerations</h1>
<p id="rfc.section.7.p.1">This document creates no new requirements on IANA namespaces .<a href="#RFC5226">[RFC5226]</a></p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> Acknowledgments</h1>
<p id="rfc.section.8.p.1">TBD</p>
<p></p>
<h1 id="rfc.references">
<a href="#rfc.references">9.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">9.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC1918">[RFC1918]</b></td>
<td class="top">
<a>Rekhter, Y.</a> and <a>R. Moskowitz</a>, "<a>Address Allocation for Private Internets</a>", 1996.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5226">[RFC5226]</b></td>
<td class="top">
<a>Narten, T.</a> and <a>H. Alvestrand</a>, "<a>Guidelines for Writing an IANA Considerations Section in RFCs</a>", May 2008.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">9.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="LISP-Map-Server">[LISP-Map-Server]</b></td>
<td class="top">
<a>Farinacci, D.</a> and <a>V. Fuller</a>, "<a>LISP Map Server</a>", draft-ietf-lisp-ms-08 work in progress, June 2011.</td>
</tr>
<tr>
<td class="reference"><b id="LISP-INTERWORK">[LISP-INTERWORK]</b></td>
<td class="top">
<a>Lewis, D.</a>, <a>Meyer, D.</a>, <a>Farinacci, D.</a> and <a>V. Fuller</a>, "<a>Interworking LISP with IPv4 and IPv6</a>", March 2011.</td>
</tr>
<tr>
<td class="reference"><b id="LISP">[LISP]</b></td>
<td class="top">
<a>Farinacci, D.</a>, <a>Fuller, V.</a>, <a>Meyer, D.</a> and <a>D. Lewis</a>, "<a>Locator/ID Separation Protocol (LISP)</a>", April 2011.</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Ningxia Zhao</span> 
	  <span class="n hidden">
		<span class="family-name">Zhao</span>
	  </span>
	</span>
	<span class="org vcardline">ZTE Corporation</span>
	<span class="adr">
	  <span>4F,RD Building 2,Zijinghua Road No.68</span>

	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region">Yuhuatai District,Nanjing 210012</span> 
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline">P.R.China</span>
	</span>
	<span class="vcardline">Phone: +86-025-5287-7612</span>

<span class="vcardline">EMail: <a href="mailto:zhao.ningxia@zte.com.cn">zhao.ningxia@zte.com.cn</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Jiong Shen</span> 
	  <span class="n hidden">
		<span class="family-name">Shen</span>
	  </span>
	</span>
	<span class="org vcardline">ZTE Corporation</span>
	<span class="adr">
	  <span>4F,RD Building 2,Zijinghua Road No.68</span>

	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region">Yuhuatai District,Nanjing 210012</span> 
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline">P.R.China</span>
	</span>
	<span class="vcardline">Phone: +86-025-5287-7612</span>

<span class="vcardline">EMail: <a href="mailto:wang.jun17@zte.com.cn">wang.jun17@zte.com.cn</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Mo Sun</span> 
	  <span class="n hidden">
		<span class="family-name">Sun</span>
	  </span>
	</span>
	<span class="org vcardline">ZTE Corporation</span>
	<span class="adr">
	  <span>C1-04,RD Building 1,Zijinghua Road No.68</span>

	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region">Yuhuatai District,Nanjing 210012</span> 
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline">P.R.China</span>
	</span>
	<span class="vcardline">Phone: +86-025-5287-2045</span>

<span class="vcardline">EMail: <a href="mailto:meng.yu@zte.com.cn">meng.yu@zte.com.cn</a></span>

  </address>
</div>

</body>
</html>