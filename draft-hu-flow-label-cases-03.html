<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Survey of proposed use cases for the IPv6 flow label</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.1.1" rel="Chapter" title="1.1 A brief history of the flow label">
<link href="#rfc.section.1.2" rel="Chapter" title="1.2 The flow label and quality of service">
<link href="#rfc.section.2" rel="Chapter" title="2 Flow label definition and issues">
<link href="#rfc.section.2.1" rel="Chapter" title="2.1 Flow label properties">
<link href="#rfc.section.2.2" rel="Chapter" title="2.2 Dependency prohibition">
<link href="#rfc.section.2.3" rel="Chapter" title="2.3 Other issues">
<link href="#rfc.section.3" rel="Chapter" title="3 Documented proposals for the flow label">
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 Specify the flow label as a pseudo-random value">
<link href="#rfc.section.3.1.1" rel="Chapter" title="3.1.1 End-to-End QoS Provisioning">
<link href="#rfc.section.3.1.2" rel="Chapter" title="3.1.2 Load balancing">
<link href="#rfc.section.3.1.3" rel="Chapter" title="3.1.3 Security nonce">
<link href="#rfc.section.3.2" rel="Chapter" title="3.2 Specify QoS parameters in the flow label">
<link href="#rfc.section.3.3" rel="Chapter" title="3.3 Use flow label hop-by-hop to control switching">
<link href="#rfc.section.3.4" rel="Chapter" title="3.4 Diffserv use of IPv6 flow label">
<link href="#rfc.section.3.5" rel="Chapter" title="3.5 Other uses">
<link href="#rfc.section.4" rel="Chapter" title="4 Conclusion">
<link href="#rfc.section.5" rel="Chapter" title="5 Security Considerations">
<link href="#rfc.section.6" rel="Chapter" title="6 IANA Considerations">
<link href="#rfc.section.7" rel="Chapter" title="7 Acknowledgements">
<link href="#rfc.section.8" rel="Chapter" title="8 Change log">
<link href="#rfc.references" rel="Chapter" title="9 References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="The IPv6 protocol includes a flow label in every packet header, but this field is not used in practice. This paper describes the flow label standard and discusses the implementation issues that it raises. It then describes various published proposals for using the flow label, and shows that most of them are inconsistent with the standard. Methods to address this problem are briefly reviewed. We also question whether the standard should be revised." />
  <meta name="description" content="The IPv6 protocol includes a flow label in every packet header, but this field is not used in practice. This paper describes the flow label standard and discusses the implementation issues that it raises. It then describes various published proposals for using the flow label, and shows that most of them are inconsistent with the standard. Methods to address this problem are briefly reviewed. We also question whether the standard should be revised." />
  <meta name="keywords" content="" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Independent Submission</td>
<td class="right">Q. Hu</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">B. E. Carpenter</td>
</tr>
<tr>
<td class="left">Intended status: Informational</td>
<td class="right">Univ. of Auckland</td>
</tr>
<tr>
<td class="left">Expires: August 27, 2011</td>
<td class="right">February 23, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Survey of proposed use cases for the IPv6 flow label<br />
  <span class="filename">draft-hu-flow-label-cases-03</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>The IPv6 protocol includes a flow label in every packet header, but this field is not used in practice. This paper describes the flow label standard and discusses the implementation issues that it raises. It then describes various published proposals for using the flow label, and shows that most of them are inconsistent with the standard. Methods to address this problem are briefly reviewed. We also question whether the standard should be revised.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on August 27, 2011.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>1.1.   <a href="#rfc.section.1.1">A brief history of the flow label</a>
</li>
<li>1.2.   <a href="#rfc.section.1.2">The flow label and quality of service</a>
</li>
<li>2.   <a href="#rfc.section.2">Flow label definition and issues</a>
</li>
<li>2.1.   <a href="#rfc.section.2.1">Flow label properties</a>
</li>
<li>2.2.   <a href="#rfc.section.2.2">Dependency prohibition</a>
</li>
<li>2.3.   <a href="#rfc.section.2.3">Other issues</a>
</li>
<li>3.   <a href="#rfc.section.3">Documented proposals for the flow label</a>
</li>
<li>3.1.   <a href="#rfc.section.3.1">Specify the flow label as a pseudo-random value</a>
</li>
<li>3.1.1.   <a href="#rfc.section.3.1.1">End-to-End QoS Provisioning</a>
</li>
<li>3.1.2.   <a href="#rfc.section.3.1.2">Load balancing</a>
</li>
<li>3.1.3.   <a href="#rfc.section.3.1.3">Security nonce</a>
</li>
<li>3.2.   <a href="#rfc.section.3.2">Specify QoS parameters in the flow label</a>
</li>
<li>3.3.   <a href="#rfc.section.3.3">Use flow label hop-by-hop to control switching</a>
</li>
<li>3.4.   <a href="#rfc.section.3.4">Diffserv use of IPv6 flow label</a>
</li>
<li>3.5.   <a href="#rfc.section.3.5">Other uses</a>
</li>
<li>4.   <a href="#rfc.section.4">Conclusion</a>
</li>
<li>5.   <a href="#rfc.section.5">Security Considerations</a>
</li>
<li>6.   <a href="#rfc.section.6">IANA Considerations</a>
</li>
<li>7.   <a href="#rfc.section.7">Acknowledgements</a>
</li>
<li>8.   <a href="#rfc.section.8">Change log</a>
</li>
<li>9.   <a href="#rfc.references">References</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> <a href="#intro" id="intro">Introduction</a>
</h1>
<p id="rfc.section.1.p.1">IPv6 is being introduced to overcome the address shortage of the current IPv4 protocol, but it also offers a new feature, i.e., the flow label field in the IPv6 packet header. The flow label is not encrypted by IPsec, and is present in all fragments. However, it is very little used in practice, for reasons discussed below and in <a href="#I-D.ietf-6man-flow-update">[I-D.ietf-6man-flow-update]</a>. After a short introduction, this document summarizes the current specification of the IPv6 flow label and some open issues about its use in <a href="#def">Section 2</a>, and then <a href="#prop">Section 3</a> describes and analyses various proposals that have been made for its use. Finally, <a href="#concl">Section 4</a> discusses the implications and attempts to draw conclusions.  </p>
<h1 id="rfc.section.1.1">
<a href="#rfc.section.1.1">1.1.</a> A brief history of the flow label</h1>
<p id="rfc.section.1.1.p.1">The original proposal for a flow label has been attributed to Dave Clark <a href="#Deering93">[Deering93]</a>, who proposed that it should contain a pseudo-random value.  A flow label field was included in the packet header during the preliminary design of IPv6, which followed an intense period of debate about several competing proposals.  The final choice was made in 1994 <a href="#RFC1752">[RFC1752]</a>. In particular, the IETF rejected a proposal known as CATNIP <a href="#RFC1707">[RFC1707]</a>, which included so-called 'cache handles' to identify the next hop in high performance routers. Thus CATNIP introduced the notion of a header field that would be shared by all packets belonging to a flow, to control packet forwarding on a hop-by-hop basis. We recognize this today as a precursor of the MPLS label <a href="#RFC3031">[RFC3031]</a>.  </p>
<p id="rfc.section.1.1.p.2">The IETF decided instead to develop a proposal known as SIPP into IP version 6. SIPP included "labeling of packets belonging to particular traffic 'flows' for which the sender requests special handling, such as non-default quality of service or 'real-time' service" <a href="#RFC1710">[RFC1710]</a>.  In 1994, this used a 28-bit flow label field. In 1995 it was down to 24 bits <a href="#RFC1883">[RFC1883]</a> and it was finally reduced to 20 bits <a href="#RFC2460">[RFC2460]</a> to accommodate the IPv6 Traffic Class, which is fully compatible with the IPv4 Type of Service byte.  </p>
<p id="rfc.section.1.1.p.3">There was considerable debate in the IETF about the very purpose of the flow label.  Was it to be a handle for fast switching, as in CATNIP, or was it to be meaningful to applications and used to specify quality of service? Must it be set by the sending host, or could it be set by routers? Could it be modified en route, or must it be delivered with no change? </p>
<p id="rfc.section.1.1.p.4">Because of these uncertainties, and more urgent work, the flow label was consistently ignored by implementors, and today is set to zero in almost every IPv6 packet.  In fact, <a href="#RFC2460">[RFC2460]</a> defined it as "experimental and subject to change." There was considerable preliminary work such as <a href="#Metzler00">[Metzler00]</a>, <a href="#Conta01a">[Conta01a]</a>, <a href="#I-D.conta-diffserv-ipv6-fl-classifier">[I-D.conta-diffserv-ipv6-fl-classifier]</a> and <a href="#Hagino01">[Hagino01]</a>.  The ensuing proposed standard "IPv6 Flow Label Specification" (RFC 3697) <a href="#RFC3697">[RFC3697]</a> intended to clarify this situation by providing precise boundary conditions for use of the flow label. However, this has not proved successful in promoting use of the flow label in practice, as a result of which 20 bits are unused in every IPv6 packet header.  </p>
<h1 id="rfc.section.1.2">
<a href="#rfc.section.1.2">1.2.</a> The flow label and quality of service</h1>
<p id="rfc.section.1.2.p.1">Developments in high speed switch design, and the success of MPLS, have largely obviated consideration of the flow label for high-speed switching. Thus, although various use cases for the flow label have been proposed, most of them assume that it should be used principally to support the provision of quality of service (QoS). For many years it has been recognized that real-time Internet traffic requires a different QoS from general data traffic, and this remains true in the era of network neutrality. Thus an alternative to uniform best-effort service is needed, requiring packets to be classified as belonging to a particular class of service or flow. Currently, this leads to a layer violation problem, since a 5-tuple is often used to classify each packet. The 5-tuple includes source and destination addresses, port numbers, and the transport protocol type, so when we want to forward or process packets, we need to extract information from the layer above IP. This may be impossible when packets are encrypted such that port numbers are hidden, or when packets are fragmented, so the layer violation is not an academic concern. The flow label, being exempt from IPsec encryption and being replicated in packet fragments, avoids this difficulty. It has therefore attracted attention from the designers of new approaches to QoS.  </p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> <a href="#def" id="def">Flow label definition and issues</a>
</h1>
<h1 id="rfc.section.2.1">
<a href="#rfc.section.2.1">2.1.</a> Flow label properties</h1>
<p id="rfc.section.2.1.p.1">RFC 3697 <a href="#RFC3697">[RFC3697]</a> standardizes properties of the flow label, including:</p>
<p id="rfc.section.2.1.p.2">One effect of the second of these rules is to avoid the layer violation problem mentioned in <a href="#intro">Section 1</a>. By using the 3-tuple, we only use the IP layer to classify packets, without needing any transport layer information. This may reduce the lookup time if flow-based treatment is required, and will work even with IPsec encryption and fragmentation. Therefore, for traffic needing other than best-effort service, such as real-time applications, the flow label can be set to different values to represent different flows, and each node forwarding or receiving the packets may provide different flow-specific treatments by looking at the flow label value. This is more fine-grained than differentiated services (Diffserv) <a href="#Carpenter02">[Carpenter02]</a>, <a href="#RFC2474">[RFC2474]</a> but need not be less efficient.  </p>
<h1 id="rfc.section.2.2">
<a href="#rfc.section.2.2">2.2.</a> Dependency prohibition</h1>
<p id="rfc.section.2.2.p.1">An additional important rule in the standard <a href="#RFC3697">[RFC3697]</a> effectively forbids any encoding of meaning in the bits of the flow label. To be exact, the standard states that "IPv6 nodes MUST NOT assume any mathematical or other properties of the flow Label values assigned by source nodes." This rule is aimed at the case where a packet from a source using a particular encoding scheme for the flow label reaches a node that is using a different scheme. If by chance the bit pattern in the flow label is meaningful in both schemes, the receiver would misinterpret the flow label. Therefore, in the absence of other information, the receiver must not assume anything about the meaning of the value of the flow label.  </p>
<p id="rfc.section.2.2.p.2">The standard <a href="#RFC3697">[RFC3697]</a> also states "Router performance SHOULD NOT be dependent on the distribution of the Flow Label values. Especially, the Flow Label bits alone make poor material for a hash key." The problem this rule is intended to avoid is that if a source uses one method of choosing flow labels (e.g., counting up from 1), any router that assumes another method (e.g., pseudo-randomness) may not perform as intended.  </p>
<p id="rfc.section.2.2.p.3">Note that there is no easy escape from the combination of these two prohibitions, which we will call the dependency prohibition. Unlike Diffserv code points, flow labels are not locally significant within a single administrative domain; they must be preserved end-to-end. In general, a router cannot know whether a particular packet originated in a host supporting a specific usage of the flow label.  Therefore, any method that breaks one or both of these rules will only work if there is some way for a router to determine which sources use the same scheme as itself.  </p>
<p id="rfc.section.2.2.p.4">The interpretation of the dependency rule can be subtle and is not spelled out in <a href="#RFC3697">[RFC3697]</a>.  A node must not assume properties of the flow label - but it may know them by construction or by signaling. The bits of the flow label alone are poor material for a hash key - but they may be combined with bits from other sources, to provide uniformly distributed hash outputs.  </p>
<h1 id="rfc.section.2.3">
<a href="#rfc.section.2.3">2.3.</a> Other issues</h1>
<p><a href="#RFC3697">[RFC3697]</a> does not discuss how to use flow label most effectively. This remains the major open issue, but some authors propose that the label should be used with reserved bandwidth to achieve customized QoS provision.  Coupled with admission control at the edge router, this could limit congestion. However, as we will see below, this is not the only proposed use.  </p>
<p id="rfc.section.2.3.p.2">We now introduce some other open issues.  </p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> <a href="#prop" id="prop">Documented proposals for the flow label</a>
</h1>
<p id="rfc.section.3.p.1">In the following, we do not intend to recommend or criticise various proposals. This section shows the variety of proposals that have been published, and whether they are compatible with the existing standard.  These proposals almost all assume that the flow label's main purpose is to support QoS, and their flow label mechanisms are entangled with QoS mechanisms.  We describe the proposals in five broad, and somewhat overlapping, categories, i.e.,</p>
<p id="rfc.section.3.p.2">Among the proposals described in the following five sections, various methods are proposed to set up the flow label value. It should be noted that some of these proposals embody novel and perhaps controversial approaches to QoS provision, and these cannot readily be separated from their use of the flow label. We give a reasonable amount of technical detail for some of the proposals, to show the extent to which they propose detailed semantics for the flow label value. </p>
<h1 id="rfc.section.3.1">
<a href="#rfc.section.3.1">3.1.</a> Specify the flow label as a pseudo-random value</h1>
<h1 id="rfc.section.3.1.1">
<a href="#rfc.section.3.1.1">3.1.1.</a> End-to-End QoS Provisioning</h1>
<p id="rfc.section.3.1.1.p.1">As our first example, <a href="#Lin06">[Lin06]</a> specifies a 17-bit pseudo-random value. The figure below shows the proposed flow label structure. </p>
<p><a href="#Lin06">[Lin06]</a> also describes a signalling process between source, routing and destination nodes based on this label structure and on the IPv6 Traffic Class byte, in order to reserve and release router resources for a given flow within a given class of traffic.  The pseudo-random LN value is used to uniquely identify a given flow.  </p>
<div id="#rfc.figure.1"></div>
<p></p>

<p>Flow Label Specification (figure simplified from <a href="#Lin06">[Lin06]</a>)</p>
<pre>
      +--+----+-----------------------------+
      | 1| 2  |              17 bits        |
      +--+----+-----------------------------+
      |LF| LT |              LN             |
      +--+----+-----------------------------+ 

LF   0  Disable
     1  Enable
LT  00  Flow label requested by source
    01  Flow label returned by destination
    10  Flow label for data delivery
    11  Flow label terminates connection
LN      Random number created by source

</pre>
<h1 id="rfc.section.3.1.2">
<a href="#rfc.section.3.1.2">3.1.2.</a> Load balancing</h1>
<p id="rfc.section.3.1.2.p.1">There have been numerous informal discussions of using pseudo-random flow labels to allow load-balancing or at least load-sharing.  This would be achieved by including the flow label value among the fields in each packet header used as input to a modulo(N) hash used to select among N alternative paths.  However, concerns about the interpretation of the dependency prohibition have generally prevented such proposals from being written up until recently <a href="#I-D.ietf-6man-flow-ecmp">[I-D.ietf-6man-flow-ecmp]</a>.  </p>
<h1 id="rfc.section.3.1.3">
<a href="#rfc.section.3.1.3">3.1.3.</a> Security nonce</h1>
<p id="rfc.section.3.1.3.p.1">Another proposal for a pseudo-random flow label value is <a href="#I-D.blake-ipv6-flow-label-nonce">[I-D.blake-ipv6-flow-label-nonce]</a>.  This states that off-path spoofing attacks have become a big issue for TCP and other transport-layer applications, and proposes that in IPv6 we should set a random value in the flow label to make the packet header more complex and less easy for the attacker to guess.  The two ends of the session will agree on flow label values during the SYN/ACK exchange, but off-path attackers will be unlikely to guess the agreed value. Naturally, on-path attackers who can observe the flow labels in use can trivially defeat this protection. This proposal does not involve using the flow label value to retrieve routing state.  </p>
<h1 id="rfc.section.3.2">
<a href="#rfc.section.3.2">3.2.</a> Specify QoS parameters in the flow label</h1>
<p><a href="#Prakash04">[Prakash04]</a> proposes to utilize the flow label to indicate required QoS parameters in detail. It uses the first few bits of the flow label field as codes to support different approaches, as summarized in  following table. Again, this is incompatible with the dependency prohibition in <a href="#RFC3697">[RFC3697]</a>, since a source that does not use this method may also set the first two bits to non-zero.  </p>
<div id="#rfc.figure.2"></div>
<p>Classification for various approaches (from <a href="#Prakash04">[Prakash04]</a>)</p>
<pre>
  Bit Pattern   Approach
  ------------------------------------------------------------------
  00            No QoS requirement (Default QoS value)
  01            Pseudo-Random value used for the value of Flow-Label
  10            Support for Direct Parametric Representation
  1100          Support for the DiffServ Model
  1101          Reserved for future use
  111           Reserved for future use
</pre>
<p id="rfc.section.3.2.p.2">This method allows a pseudo-random option, but also adds options for a direct QoS request and for Diffserv.  In the direct QoS parameters approach, 18 bits are used to encode requirements for one way delay, IP delay variation, bandwidth and one way packet loss. The proposal appears to assume that RSVP <a href="#RFC2205">[RFC2205]</a>  mechanisms are used to actually implement these QoS parameters.  </p>
<p id="rfc.section.3.2.p.3">This proposal allows use of flow label for various important QoS models, so the end user and service provider can choose the most suitable model for their situation; <a href="#Prakash04">[Prakash04]</a> claims that "this proposal is simple, scalable, modular and generic implementation to provide for QoS using the IPv6 flow label field".  </p>
<p id="rfc.section.3.2.p.4">Similarly, <a href="#Lee04">[Lee04]</a> defines the flow label field in five parts, with the first 3 bits used as an approach type. The authors define two approaches: a "random" scheme and a "hybrid" scheme.  If the first 3 bits equal "001", the flow label will be used as the random identifier of the flow, but if they equal "101", the remaining bits will include a hybrid QoS requirement for this packet, subdivided into traffic type (stringent or best effort), bandwidth, buffer, and delay requirements.  Once again the dependency prohibition in <a href="#RFC3697">[RFC3697]</a> is broken. This proposal also includes throughput monitoring and dynamic capacity allocation. Effectively this proposal uses the flow label both to signal Intserv-like QoS requirements and to classify traffic into Diffserv-like virtual label-switched paths. Packets with a "random" flow label are mapped into a generic (best effort) virtual path.  </p>
<h1 id="rfc.section.3.3">
<a href="#rfc.section.3.3">3.3.</a> Use flow label hop-by-hop to control switching</h1>
<p><a href="#I-D.chakravorty-6lsa">[I-D.chakravorty-6lsa]</a> and <a href="#Chakravorty08a">[Chakravorty08a]</a> describe an architectural framework called "IPv6 Label Switching Architecture" (6LSA). In 6LSA, network components identify a flow by looking at the flow label field in the IPv6 packet header; all packets with the same flow label must receive the same treatment and be sent to the same next hop. However, 6LSA resembles MPLS by considering that a label only has meaning between 6LSA routers, and setting the flow label at each hop. If the original source sets a non-zero flow label, there is no mechanism to restore it before delivery, a fundamental breach of <a href="#RFC3697">[RFC3697]</a>. The authors of <a href="#I-D.chakravorty-6lsa">[I-D.chakravorty-6lsa]</a> did at one stage discuss using an IPv6 hop-by-hop option to correct this problem, but this has not been documented. This is a more serious incompatibility than simply breaking the dependency prohibition </p>
<p id="rfc.section.3.3.p.2">Unlike traditional routing algorithms, but like MPLS, 6LSA packets are classified into a Forwarding Equivalence Class (FEC), and routers forward packets on different paths by looking at the FEC. Like previous solutions, the authors divide the flow label field into three parts. The first 3 bits identify the FEC, which will help the router or 6LSA nodes to group the IP packets that receive the same forwarding treatment and forwarding them on the same virtual path. The following 4 bits describe the application type, and the final 13 bits (defined by each node or a group of nodes) specify the hop-specific label. From the table below, we can see the FEC has 6 major categories, each with up to 16 subcategories.  </p>
<div id="#rfc.figure.3"></div>
<p>Flow Label Specification (shortened from <a href="#I-D.chakravorty-6lsa">[I-D.chakravorty-6lsa]</a>)</p>
<pre>
   +--------------------------+-------------+--------------------------+
   | FEC (First 3 Bits)       | Next 4 Bits | Purpose                  |
   +--------------------------+-------------+--------------------------+
   | No FEC (000)             | 0000        |                          |
   | Domain Specific (000)    | 0001 - 1111 |                          |
   | ------------------------ |             |                          |
   | VPN (001)                | 0001        | (IPSec - Tunnel Mode)    |
   |                          | 0010        | (IPSec - Transport Mode) |
   |                          | 0011        | (Special Encryption)     |
   |                          | 0100        | (VRF)                    |
   |                          | 0101        | (End Network Specific)   |
   |                          | 0110 - 1111 | (Reserved)               |
   | ------------------------ |             |                          |
   | TE Subset/               | 0001        | (DiffServ)               |
   | QoS Enhancement (010)    | 0010        | (RSVP)                   |
   . . .
   |                          | 1111        | (Reserved)               |
   | ------------------------ |             |                          |
   | Encapsulation (011)      | 0001        | (IPv6 in IPv6)           |
   |                          | 0010        | (IPv4 in IPv6)           |
   |                          | 0011        | (Other in IPv6)          |
   |                          | 0100        | (Enterprise Specific)    |
   |                          | 0101 - 1111 | (Reserved)               |
   | ------------------------ |             |                          |
   | Enterprise Specific(111) | 0000 - 1111 | (Reserved)               |
   +--------------------------+-------------+--------------------------+
</pre>
<p id="rfc.section.3.3.p.3">The authors claim that fast switching using 20-bit labels instead of 128-bit IPv6 addresses will provide memory and processing savings, as well as network management advantages.  "It also allows a network management entity updating available label tables, across the network to reduce man-in-the-middle attacks [sic]" <a href="#I-D.chakravorty-6lsa">[I-D.chakravorty-6lsa]</a>.  </p>
<p id="rfc.section.3.3.p.4">We note that a similar proposal for QoS-based switching of IPv6 packets <a href="#I-D.roberts-inband-qos-ipv6">[I-D.roberts-inband-qos-ipv6]</a> is designed to use a hop-by-hop option, which has not so far been allocated by the IETF. Proposals related to this have been discussed by the Telecommunications Industry Association and the ITU-T <a href="#I-D.adams-tsvwg-flow-signalling-codepoint">[I-D.adams-tsvwg-flow-signalling-codepoint]</a>.  </p>
<p id="rfc.section.3.3.p.5">We also note that router lookup efficiency was a major concern at the time when Clark first proposed a flow label <a href="#Deering93">[Deering93]</a>, but with the advent of very large scale integrated circuits capable of rapid lookup in a routing table, most vendors no longer express such concern.  </p>
<h1 id="rfc.section.3.4">
<a href="#rfc.section.3.4">3.4.</a> Diffserv use of IPv6 flow label</h1>
<p><a href="#I-D.banerjee-flowlabel-ipv6-qos">[I-D.banerjee-flowlabel-ipv6-qos]</a> uses the flow label field as a replacement for the IPv6 Traffic Class field; this proposal suggests the incoming flow label can indicate the QoS requirement by matching a Diffserv classifier. The authors have used the first three bits to indicate this, and the following 16 bits to indicate a Differentiated Services Per-Hop Behavior Identification code (Diffserv PHB-ID) <a href="#RFC3140">[RFC3140]</a>; the last bit is reserved for future use.  This method too breaks the dependency prohibition in <a href="#RFC3697">[RFC3697]</a>.  </p>
<p><a href="#I-D.martinbeckman-ietf-ipv6-fls-ipv6flowswitching">[I-D.martinbeckman-ietf-ipv6-fls-ipv6flowswitching]</a> blends the flow label as an MPLS-like switching tag with Diffserv. Unlike 6LSA, the method attempts to bypass the dependency prohibition by using one bit in the Diffserv Code Point <a href="#RFC2474">[RFC2474]</a> to indicate that the flow label is a switching tag. In this way, a router can determine whether the flow label conforms to <a href="#RFC3697">[RFC3697]</a> or to <a href="#I-D.martinbeckman-ietf-ipv6-fls-ipv6flowswitching">[I-D.martinbeckman-ietf-ipv6-fls-ipv6flowswitching]</a>.  In <a href="#I-D.martinbeckman-ietf-ipv6-amp-ipv6hcamp">[I-D.martinbeckman-ietf-ipv6-amp-ipv6hcamp]</a>, the same author proposes using the flow label as a way of compressing IPv6 headers by hashing the addresses into the flow label, again using the Diffserv Code Point to mark the packets accordingly.  </p>
<h1 id="rfc.section.3.5">
<a href="#rfc.section.3.5">3.5.</a> Other uses</h1>
<p id="rfc.section.3.5.p.1">The Integrated Services QoS architecture <a href="#RFC1633">[RFC1633]</a> specifies that the flow label may be used as a packet filter <a href="#RFC2205">[RFC2205]</a>. At least one implementation supported this <a href="#Braden10">[Braden10]</a>.  </p>
<p id="rfc.section.3.5.p.2">We are not aware of any proposals combining the flow label with the Next Steps in Signaling (NSIS) <a href="#RFC4080">[RFC4080]</a> architecture.  </p>
<p><a href="#I-D.donley-softwire-dslite-flowlabel">[I-D.donley-softwire-dslite-flowlabel]</a> proposes a use case whereby certain flows encapsulated in a particular type of IPv4-in-IPv6 tunnel would be distinguished at the remote end of the tunnel by a specific flow label value. This would allow a service provider to deliver a tailored quality of service. This usage appears to be completely compatible with <a href="#RFC3697">[RFC3697]</a>.  </p>
<p id="rfc.section.3.5.p.4">There has been some discussion of possible flow label use in both the ROLL (Routing Over Low power and Lossy networks) <a href="#RPL-07">[RPL-07]</a> and MEXT (Mobility EXTensions for IPv6) working groups of the IETF. Such uses tend to encode specific local meanings or routing-related tags in the label, so they appear to infringe the dependency prohibition or the immutability of the flow label field. The ROLL group has indeed most recently opted not to use the flow label field for these reasons, despite having to add the undesirable overhead of an IPv6 hop-by-hop option instead <a href="#I-D.ietf-roll-rpl">[I-D.ietf-roll-rpl]</a>.  Similarly, MEXT has defined a new mobility option to support flow bindings <a href="#I-D.ietf-mext-flow-binding">[I-D.ietf-mext-flow-binding]</a>, rather than using the IPv6 flow label field.  </p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#concl" id="concl">Conclusion</a>
</h1>
<p id="rfc.section.4.p.1">Three aspects of the current standard <a href="#RFC3697">[RFC3697]</a> have caused problems to many designers:</p>
<p id="rfc.section.4.p.2">Taken together, these rules essentially forbid any encoding of the semantics of a flow, or of any information about its path, in the flow label. This was intentional, in accordance with the stateless nature of the Internet architecture and with the end-to-end principle <a href="#Saltzer84">[Saltzer84]</a>, <a href="#RFC3724">[RFC3724]</a>. It was also felt that QoS encoding via Diffserv was sufficient, and that the requirement for high-speed switching could be met by MPLS. But this means that the majority of the proposals described above breach the standard and the intent of the standard. The authors often appear to be using the flow label either as an MPLS-like switching handle, or as an encoded QoS signal. </p>
<p id="rfc.section.4.p.3">In contrast, a few documents metioned above do appear to respect the rules of RFC 3697. These are <a href="#I-D.blake-ipv6-flow-label-nonce">[I-D.blake-ipv6-flow-label-nonce]</a>, <a href="#I-D.donley-softwire-dslite-flowlabel">[I-D.donley-softwire-dslite-flowlabel]</a>, <a href="#I-D.ietf-6man-flow-ecmp">[I-D.ietf-6man-flow-ecmp]</a>, <a href="#I-D.martinbeckman-ietf-ipv6-fls-ipv6flowswitching">[I-D.martinbeckman-ietf-ipv6-fls-ipv6flowswitching]</a> and <a href="#I-D.martinbeckman-ietf-ipv6-amp-ipv6hcamp">[I-D.martinbeckman-ietf-ipv6-amp-ipv6hcamp]</a>.  Additionally, <a href="#Lin06">[Lin06]</a> would have joined this list if it had not assigned three flag bits in the flow label field.  Although predating RFC 3697, the Integrated Services usage <a href="#RFC2205">[RFC2205]</a> also seems to be compatible.  </p>
<p id="rfc.section.4.p.4">What would other designers need to do, if they wish to respect RFC 3697? There appear to be two choices.  One is to simply accept the existing rules at face value, as in the proposals just listed. This limits the application of the flow label. It can, for example, be used as a nonce or as part of the material for a hash used to share load among alternate paths. It cannot be the only material for such a hash, because of the dependency prohibition. The flow label could also be used consistently with RFC 3697, if an application designer so chose, as a way to associate all packets belonging to a given application session between two hosts, across multiple transport sessions. This, however, would presumably exclude using the flow label to govern routing decisions in any way, and would have widespread implications that have never been explored.  </p>
<p id="rfc.section.4.p.5">The other choice, for designers who wish to use the flow label to control switching or QoS directly, is to bypass the rules within a given domain (a set of cooperating nodes) in a way that nodes outside the domain cannot detect. In this case, any deviation from RFC 3697 has no possible effect outside the domain in question.  </p>
<p id="rfc.section.4.p.6">An example scheme to emulate the immutability of labels is as follows. Within the domain, all hosts set the label to zero, the routers set and interpret the label in any way they wish, and the last hop router always sets the label back to zero. If a packet arrives from outside the domain with a non-zero label, there is a method (such as a special Diffserv code point) to mark this packet so that its label would be ignored and delivered unchanged. An alternative approach would be to define a hop-by-hop option to carry the original flow label across the domain, so that it could be changed within the domain but restored before forwarding the packet beyond the domain.  </p>
<p id="rfc.section.4.p.7">If a domain allows mutable labels in such a way, it may safely ignore the dependency prohibition, and it may set the bits in the label according to locally defined rules. Within the domain, the label could be used as desired, and most of the proposed designs discussed above could be "rescued." </p>
<p id="rfc.section.4.p.8">However, given the considerable number of designers who have proposed solutions incompatible with RFC 3697, the relatively few designs using the standard rules, and the failure of designs such as ROLL and MEXT to make use of the flow label, it seems reasonable to ask whether the RFC 3697 standard has value.  </p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#security" id="security">Security Considerations</a>
</h1>
<p id="rfc.section.5.p.1">The flow label is not protected in any way and can be forged by an on-path attacker. Off-path attackers may be able to guess a valid flow label unless a pseudo-random value is used. Specific usage models for the flow label need to allow for these exposures. For further discussion, see <a href="#RFC3697">[RFC3697]</a>.  </p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#iana" id="iana">IANA Considerations</a>
</h1>
<p id="rfc.section.6.p.1">This document requests no action by IANA. </p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#ack" id="ack">Acknowledgements</a>
</h1>
<p id="rfc.section.7.p.1">An invaluable review of this document was performed by Bob Braden. Helpful comments were made by Sheng Jiang.</p>
<p id="rfc.section.7.p.2">This document was produced using the xml2rfc tool <a href="#RFC2629">[RFC2629]</a>.</p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#changes" id="changes">Change log</a>
</h1>
<p id="rfc.section.8.p.1">draft-hu-flow-label-cases-00: first I-D version, 2010-04-19</p>
<p id="rfc.section.8.p.2">draft-hu-flow-label-cases-01: updated following review comments, 2010-08-18</p>
<p id="rfc.section.8.p.3">draft-hu-flow-label-cases-02: updated following more review comments, 2010-09-30</p>
<p id="rfc.section.8.p.4">draft-hu-flow-label-cases-03: updated following more review comments, 2011-02-23</p>
<h1 id="rfc.references">
<a href="#rfc.references">9.</a> References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC1752">[RFC1752]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a> and <a href="mailto:mankin@isi.edu" title="USC/Information Sciences Institute">A. Mankin</a>, "<a href="http://tools.ietf.org/html/rfc1752">The Recommendation for the IP Next Generation Protocol</a>", RFC 1752, January 1995.</td>
</tr>
<tr>
<td class="reference"><b id="RFC1883">[RFC1883]</b></td>
<td class="top">
<a href="mailto:deering@parc.xerox.com" title="Xerox Palo Alto Research Center">Deering, S.E.</a> and <a href="mailto:hinden@ipsilon.com" title="Ipsilon Networks, Inc.">R.M. Hinden</a>, "<a href="http://tools.ietf.org/html/rfc1883">Internet Protocol, Version 6 (IPv6) Specification</a>", RFC 1883, December 1995.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2460">[RFC2460]</b></td>
<td class="top">
<a href="mailto:deering@cisco.com" title="Cisco Systems, Inc.">Deering, S.E.</a> and <a href="mailto:hinden@iprg.nokia.com" title="Nokia">R.M. Hinden</a>, "<a href="http://tools.ietf.org/html/rfc2460">Internet Protocol, Version 6 (IPv6) Specification</a>", RFC 2460, December 1998.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4080">[RFC4080]</b></td>
<td class="top">
<a>Hancock, R.</a>, <a>Karagiannis, G.</a>, <a>Loughney, J.</a> and <a>S. Van den Bosch</a>, "<a href="http://tools.ietf.org/html/rfc4080">Next Steps in Signaling (NSIS): Framework</a>", RFC 4080, June 2005.</td>
</tr>
<tr>
<td class="reference"><b id="RFC1710">[RFC1710]</b></td>
<td class="top">
<a href="mailto:hinden@eng.sun.com" title="Sun Microsystems, Inc.">Hinden, R.</a>, "<a href="http://tools.ietf.org/html/rfc1710">Simple Internet Protocol Plus White Paper</a>", RFC 1710, October 1994.</td>
</tr>
<tr>
<td class="reference"><b id="RFC1707">[RFC1707]</b></td>
<td class="top">
<a href="mailto:scrivner@world.std.com" title="Sunspot Graphics">McGovern, M.</a> and <a href="mailto:rullmann@crd.lotus.com" title="Lotus Development Corporation">R. Ullmann</a>, "<a href="http://tools.ietf.org/html/rfc1707">CATNIP: Common Architecture for the Internet</a>", RFC 1707, October 1994.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2474">[RFC2474]</b></td>
<td class="top">
<a href="mailto:kmn@cisco.com" title="Cisco Systems">Nichols, K.</a>, <a href="mailto:slblake@torrentnet.com" title="Torrent Networking Technologies">Blake, S.</a>, <a href="mailto:fred@cisco.com" title="Cisco Systems">Baker, F.</a> and <a href="mailto:black_david@emc.com" title="EMC Corporation">D.L. Black</a>, "<a href="http://tools.ietf.org/html/rfc2474">Definition of the Differentiated Services Field (DS Field) in the IPv4 and IPv6 Headers</a>", RFC 2474, December 1998.</td>
</tr>
<tr>
<td class="reference"><b id="RFC1809">[RFC1809]</b></td>
<td class="top">
<a href="mailto:craig@aland.bbn.com" title="BBN Systems and Technologies">Partridge, C.</a>, "<a href="http://tools.ietf.org/html/rfc1809">Using the Flow Label Field in IPv6</a>", RFC 1809, June 1995.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3697">[RFC3697]</b></td>
<td class="top">
<a>Rajahalme, J.</a>, <a>Conta, A.</a>, <a>Carpenter, B.</a> and <a>S. Deering</a>, "<a href="http://tools.ietf.org/html/rfc3697">IPv6 Flow Label Specification</a>", RFC 3697, March 2004.</td>
</tr>
<tr>
<td class="reference"><b id="RFC1633">[RFC1633]</b></td>
<td class="top">
<a href="mailto:Braden@ISI.EDU" title="University of Southern California (USC), Information Sciences Institute (ISI)">Braden, B.</a>, <a href="mailto:ddc@LCS.MIT.EDU" title="MIT Laboratory for Computer Science">Clark, D.</a> and <a href="mailto:Shenker@PARC.XEROX.COM" title="Xerox Palo Alto Research Center">S. Shenker</a>, "<a href="http://tools.ietf.org/html/rfc1633">Integrated Services in the Internet Architecture: an Overview</a>", RFC 1633, June 1994.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3140">[RFC3140]</b></td>
<td class="top">
<a>Black, D.</a>, <a>Brim, S.</a>, <a>Carpenter, B.</a> and <a>F. Le Faucheur</a>, "<a href="http://tools.ietf.org/html/rfc3140">Per Hop Behavior Identification Codes</a>", RFC 3140, June 2001.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2629">[RFC2629]</b></td>
<td class="top">
<a href="mailto:mrose@not.invisible.net" title="Invisible Worlds, Inc.">Rose, M.T.</a>, "<a href="http://tools.ietf.org/html/rfc2629">Writing I-Ds and RFCs using XML</a>", RFC 2629, June 1999.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2205">[RFC2205]</b></td>
<td class="top">
<a href="mailto:Braden@ISI.EDU" title="USC Information Sciences Institute">Braden, B.</a>, <a href="mailto:lixia@cs.ucla.edu" title="UCLA Computer Science Department">Zhang, L.</a>, <a href="mailto:Berson@ISI.EDU" title="USC Information Sciences Institute">Berson, S.</a>, <a href="mailto:Herzog@WATSON.IBM.COM" title="IBM T. J. Watson Research Center">Herzog, S.</a> and <a href="mailto:jamin@EECS.UMICH.EDU" title="University of Michigan">S. Jamin</a>, "<a href="http://tools.ietf.org/html/rfc2205">Resource ReSerVation Protocol (RSVP) -- Version 1 Functional Specification</a>", RFC 2205, September 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3724">[RFC3724]</b></td>
<td class="top">
<a>Kempf, J.</a>, <a>Austein, R.</a>, <a>IAB</a>, "<a href="http://tools.ietf.org/html/rfc3724">The Rise of the Middle and the Future of End-to-End: Reflections on the Evolution of the Internet Architecture</a>", RFC 3724, March 2004.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3031">[RFC3031]</b></td>
<td class="top">
<a>Rosen, E.</a>, <a>Viswanathan, A.</a> and <a>R. Callon</a>, "<a href="http://tools.ietf.org/html/rfc3031">Multiprotocol Label Switching Architecture</a>", RFC 3031, January 2001.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.conta-diffserv-ipv6-fl-classifier">[I-D.conta-diffserv-ipv6-fl-classifier]</b></td>
<td class="top">
<a>Conta, A</a> and <a>J Rajahalme</a>, "<a href="http://tools.ietf.org/html/draft-conta-diffserv-ipv6-fl-classifier-01">Amodel for Diffserv use of the IPv6 Flow Label Specification</a>", Internet-Draft draft-conta-diffserv-ipv6-fl-classifier-01, November 2001.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.chakravorty-6lsa">[I-D.chakravorty-6lsa]</b></td>
<td class="top">
<a>Chakravorty, S</a>, <a>Bush, J</a> and <a>J Bound</a>, "<a href="http://tools.ietf.org/html/draft-chakravorty-6lsa-03">IPv6 Label Switching Architecture</a>", Internet-Draft draft-chakravorty-6lsa-03, July 2008.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.banerjee-flowlabel-ipv6-qos">[I-D.banerjee-flowlabel-ipv6-qos]</b></td>
<td class="top">
<a>Banerjee, R</a>, "<a href="http://tools.ietf.org/html/draft-banerjee-flowlabel-ipv6-qos-03">A Modified Specification for use of the IPv6 Flow Label for providing An  efficient Quality of Service using hybrid approach</a>", Internet-Draft draft-banerjee-flowlabel-ipv6-qos-03, April 2002.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.roberts-inband-qos-ipv6">[I-D.roberts-inband-qos-ipv6]</b></td>
<td class="top">
<a>Roberts, L</a> and <a>J Harford</a>, "<a href="http://tools.ietf.org/html/draft-roberts-inband-qos-ipv6-00">In-Band QoS Signaling for IPv6</a>", Internet-Draft draft-roberts-inband-qos-ipv6-00, July 2005.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.blake-ipv6-flow-label-nonce">[I-D.blake-ipv6-flow-label-nonce]</b></td>
<td class="top">
<a>Blake, S</a>, "<a href="http://tools.ietf.org/html/draft-blake-ipv6-flow-label-nonce-02">Use of the IPv6 Flow Label as a Transport-Layer Nonce to Defend Against Off-Path Spoofing Attacks</a>", Internet-Draft draft-blake-ipv6-flow-label-nonce-02, October 2009.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-6man-flow-ecmp">[I-D.ietf-6man-flow-ecmp]</b></td>
<td class="top">
<a>Carpenter, B</a> and <a>S Amante</a>, "<a href="http://tools.ietf.org/html/draft-ietf-6man-flow-ecmp-05">Using the IPv6 flow label for equal cost multipath routing and link aggregation in tunnels</a>", Internet-Draft draft-ietf-6man-flow-ecmp-05, July 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-6man-flow-update">[I-D.ietf-6man-flow-update]</b></td>
<td class="top">
<a>Amante, S</a>, <a>Carpenter, B</a> and <a>S Jiang</a>, "<a href="http://tools.ietf.org/html/draft-ietf-6man-flow-update-07">Rationale for update to the IPv6 flow label specification</a>", Internet-Draft draft-ietf-6man-flow-update-07, July 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.adams-tsvwg-flow-signalling-codepoint">[I-D.adams-tsvwg-flow-signalling-codepoint]</b></td>
<td class="top">
<a>song, j</a>, <a>Adams, J</a> and <a>J Joung</a>, "<a href="http://tools.ietf.org/html/draft-adams-tsvwg-flow-signalling-codepoint-00">Progress and future development of Flow State Aware standards, and a  proposal for alerting nodes or end-systems on data related to a flow</a>", Internet-Draft draft-adams-tsvwg-flow-signalling-codepoint-00, June 2008.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.donley-softwire-dslite-flowlabel">[I-D.donley-softwire-dslite-flowlabel]</b></td>
<td class="top">
<a>Donley, C</a> and <a>K Erichsen</a>, "<a href="http://tools.ietf.org/html/draft-donley-softwire-dslite-flowlabel-02">Using the Flow Label with Dual-Stack Lite</a>", Internet-Draft draft-donley-softwire-dslite-flowlabel-02, July 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-mext-flow-binding">[I-D.ietf-mext-flow-binding]</b></td>
<td class="top">
<a>Tsirtsis, G</a>, <a>Soliman, H</a>, <a>Montavont, N</a>, <a>Giaretta, G</a> and <a>K Kuladinithi</a>, "<a href="http://tools.ietf.org/html/draft-ietf-mext-flow-binding-11">Flow Bindings in Mobile IPv6 and NEMO Basic Support</a>", Internet-Draft draft-ietf-mext-flow-binding-11, October 2010.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-roll-rpl">[I-D.ietf-roll-rpl]</b></td>
<td class="top">
<a>Winter, T</a>, <a>Thubert, P</a>, <a>Brandt, A</a>, <a>Clausen, T</a>, <a>Hui, J</a>, <a>Kelsey, R</a>, <a>Levis, P</a>, <a>Pister, K</a>, <a>Struik, R</a> and <a>J Vasseur</a>, "<a href="http://tools.ietf.org/html/draft-ietf-roll-rpl-19">RPL: IPv6 Routing Protocol for Low power and Lossy Networks</a>", Internet-Draft draft-ietf-roll-rpl-19, March 2011.</td>
</tr>
<tr>
<td class="reference"><b id="RPL-07">[RPL-07]</b></td>
<td class="top">
<a>Winter, T.</a> and <a>P. Thubert</a>, "<a href="http://tools.ietf.org/html/draft-ietf-roll-rpl-07">RPL: IPv6 Routing Protocol for Low power and Lossy Networks</a>", Internet-Draft draft-ietf-roll-rpl-07, March 2010.</td>
</tr>
<tr>
<td class="reference"><b id="Metzler00">[Metzler00]</b></td>
<td class="top">
<a>Metzler, J.</a> and <a>S. Hauth</a>, "<a href="http://tools.ietf.org/html/draft-metzler-ipv6-flowlabel-00">An end-to-end usage of the IPv6 flow label</a>", Internet-Draft draft-metzler-ipv6-flowlabel-00, November 2000.</td>
</tr>
<tr>
<td class="reference"><b id="Conta01a">[Conta01a]</b></td>
<td class="top">
<a>Conta, A. </a> and <a>B. Carpenter</a>, "<a href="http://tools.ietf.org/html/draft-conta-ipv6-flow-label-02">A proposal for the IPv6 Flow Label Specification</a>", Internet-Draft draft-conta-ipv6-flow-label-02, July 2001.</td>
</tr>
<tr>
<td class="reference"><b id="Hagino01">[Hagino01]</b></td>
<td class="top">
<a>Hagino, J. </a>, "<a href="http://tools.ietf.org/html/draft-itojun-ipv6-flowlabel-api-01">Socket API for IPv6 flow label field</a>", Internet-Draft draft-itojun-ipv6-flowlabel-api-01, April 2001.</td>
</tr>
<tr>
<td class="reference"><b id="Deering93">[Deering93]</b></td>
<td class="top">
<a>Deering, S.</a>, "<a>SIPP Overview and Issues</a>", Minutes of the Joint Sessions of the SIP and PIP Working Groups , November 1993.</td>
</tr>
<tr>
<td class="reference"><b id="Braden10">[Braden10]</b></td>
<td class="top">
<a>Braden, R.</a>, "<a>Private Communication</a>", 2010.</td>
</tr>
<tr>
<td class="reference"><b id="Lee04">[Lee04]</b></td>
<td class="top">
<a>Lee, I. H.</a> and <a>S. J. Kim</a>, "<a>A QoS Improvement Scheme for Real-Time Traffic Using IPv6 Flow Labels</a>", Lecture Notes in Computer Science Vol. 3043, 2004.</td>
</tr>
<tr>
<td class="reference"><b id="Lin06">[Lin06]</b></td>
<td class="top">
<a>Lin, C. N.</a>, <a>Tseng, P. C.</a> and <a>W. S. Hwang</a>, "<a>End-to-End QoS Provisioning by Flow Label in IPv6</a>", JCIS , 2006.</td>
</tr>
<tr>
<td class="reference"><b id="Prakash04">[Prakash04]</b></td>
<td class="top">
<a>Prakash, B.</a>, "<a>Using the 20 bit flow label field in the IPv6 header to indicate desirable quality of service on the internet</a>", University of Colorado (M.Sc. Thesis), 2004.</td>
</tr>
<tr>
<td class="reference"><b id="Chakravorty08a">[Chakravorty08a]</b></td>
<td class="top">
<a>Chakravorty, S.</a>, "<a>Challenges of IPv6 Flow Label implementation</a>", Proc IEEE MILCOM2008 , 2008.</td>
</tr>
<tr>
<td class="reference"><b id="Carpenter02">[Carpenter02]</b></td>
<td class="top">
<a>Carpenter, B.</a> and <a>K. Nichols</a>, "<a>Differentiated Services in the Internet</a>", Proc IEEE 90 (9) 1479-1494, 2002.</td>
</tr>
<tr>
<td class="reference"><b id="Saltzer84">[Saltzer84]</b></td>
<td class="top">
<a>Saltzer, J.H. </a>, <a>Reed, D.P.</a> and <a>D.D. Clark</a>, "<a>End-To-End Arguments in System Design</a>", ACM TOCS 2 (4) 277-288, 1984.</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Qinwen Hu</span> 
	  <span class="n hidden">
		<span class="family-name">Hu</span>
	  </span>
	</span>
	<span class="org vcardline"></span>
	<span class="adr">
	  <span>Department of Computer Science</span>
<span>University of Auckland</span>
<span>PB 92019</span>

	  <span class="vcardline">
		<span class="locality">Auckland</span>,  
		<span class="region"></span>
		<span class="code">1142</span>
	  </span>
	  <span class="country-name vcardline">New Zealand</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:qhu009@aucklanduni.ac.nz">qhu009@aucklanduni.ac.nz</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Brian Carpenter</span> 
	  <span class="n hidden">
		<span class="family-name">Carpenter</span>
	  </span>
	</span>
	<span class="org vcardline"></span>
	<span class="adr">
	  <span>Department of Computer Science</span>
<span>University of Auckland</span>
<span>PB 92019</span>

	  <span class="vcardline">
		<span class="locality">Auckland</span>,  
		<span class="region"></span>
		<span class="code">1142</span>
	  </span>
	  <span class="country-name vcardline">New Zealand</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:brian.e.carpenter@gmail.com">brian.e.carpenter@gmail.com</a></span>

  </address>
</div>

</body>
</html>