INTERNET DRAFT                                             Pat R. Calhoun
Category: Standards Track                              Charles E. Perkins
Title: draft-ietf-mobileip-home-addr-alloc-00.txt  Sun Laboratories, Inc.
Date: November 1998



          Mobile IP Dynamic Home Address Allocation Extensions



Status of this Memo

   This document is a submission by the Mobile IP Working Group of the
   Internet Engineering Task Force (IETF).  Comments should be submitted
   to the mobile-ip@smallworks.com mailing list.

   Distribution of this memo is unlimited.

   This document is an Internet-Draft.  Internet-Drafts are working
   documents of the Internet Engineering Task Force (IETF), its areas,
   and its working groups.  Note that other groups may also distribute
   working documents as Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet- Drafts as reference
   material or to cite them other than as ``work in progress.''

   To view the entire list of current Internet-Drafts, please check the
   ``1id-abstracts.txt'' listing contained in the Internet-Drafts Shadow
   Directories on ftp.is.co.za (Africa), ftp.nordu.net (Northern
   Europe), ftp.nis.garr.it (Southern Europe), munnari.oz.au (Pacific
   Rim), ftp.ietf.org (US East Coast), or ftp.isi.edu (US West Coast).


Abstract

   RFC2002 defines a method for a Mobile Node to be assigned a Home
   Agent dynamically through the use of a limited broadcast message.
   However, most corporate networks do not allow such packets to
   traverse through their firewall, which renders this feature difficult
   to use. This draft introduces new entity named the Home Domain
   Allocation Agency (HDAA) that can dynamically assign a Home Address
   to the Mobile Node. This draft also proposes a method for the HDAA to
   assign a dynamic Home Agent to the Mobile Node.

Table of Contents

      1.0  Introduction
      2.0  Mobile IP Registration Extensions
            2.1  Mobile-Node-NAI Extension
      3.0  Security Analysis
      4.0  References
      5.0  Acknowledgements
      6.0  Chairs' Addresses
      7.0  Author's Address



1.0 Introduction

   RFC2002 defines a method for a Mobile Node to be assigned a Home
   Agent dynamically through the use of a limited broadcast message.
   However, most corporate networks do not allow such packets to
   traverse their firewall.  The use of the limited broadcast ensured
   that the Home Agent assigned to the Mobile Node resided on a specific
   subnet, therefore it was not necessary to assign a dynamic IP Address
   to the Mobile Node.

   This draft introduces the Mobile-Node-NAI extension to the
   Registration Request message from a Mobile Node. A message that
   includes the Network Access identifier (NAI) [4] MAY have the Home
   Address field in the Registration Request set to zero (0) to request
   that one be assigned. The message MAY also have the Home Agent field
   set to either zero (0) or -1 to request that one be dynamically
   assigned. The Home Agent field set to 0.0.0.0 indicates that the
   Mobile Node wishes to have a Home Agent assigned either within the
   foreign or the home domain. A Home Agent field set to 255.255.255.255
   indicates that the Mobile Node wishes to have a Home Agent assigned
   only within its home domain. Upon receipt of this message, the
   Foreign Agent must forward the request to the HDAA, which is able to
   assign the Home Address. The domain portion of the NAI is used to
   identify the Mobile Node's Home Domain, and thus to identify where
   the Registration Request should be forwarded. The DIAMETER Mobile IP
   extension [6] defines a method of resolving the Home Address
   allocator, but this document will refer to a generic method for full
   generality.

   In the following figure, we introduce the Home Domain Allocation
   Agency (HDAA), which assigns a Home Address, and possibly a Home
   Agent, within the Home Domain. The HDAA does not perform any
   processing on the Registration Request, but simply forwards the
   request along with the newly allocated IP address to a Home Agent
   within the network that is able to handle the request.

                                                     +------+
                                                     |      |
                                                 +---+ HA-1 |
        +------+       +------+       +------+   |   |      |
        |      |       |      |       |      |   |   +------+
        |  MN  |-------|  FA  |-------| HDAA +---+     ...
        |      |       |      |       |      |   |   +------+
        +------+       +------+       +------+   |   |      |
                                                 +---+ HA-n |
                                                     |      |
                                                     +------+


   Upon receipt of the Registration Request, the Foreign Agent extracts
   the Mobile Node's NAI and finds the domain name associated with it.
   The Foreign Agentor its proxy, then finds the HDAA that handles
   requests for the Mobile Node's domain. The selection of HDAAis
   outside of the scope of this specification, but is typically set up
   by service agreements between the foreign and the home domain.

   The Registration Reply from the Home Agent MUST include the Mobile-
   Node-NAI for identification at the Foreign Agent. The reply would
   also include any assigned Home Agent or Home Address.


2.0  Mobile IP Registration Extensions

   This section will define new Mobile IP Registration Extensions that
   must be used in order to use the functionality described in this
   document.


2.1  Mobile-Node-NAI Extension

   The Mobile-Node-NAI Extension contains the user or host name
   following the format defined in [4]. This extension is used to
   identify a user or host's and can be used to find a Home Agent within
   the requestor's home network.

   Since the foreign agent may not be able to use the Home Address in
   the reply to identify the Mobile Node, it MAY use the NAI in this
   extension instead.

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |     Type      |    Length     |           MN-NAI..
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   Type

      TDB

   Length

      Must be at least 3

   Mobile-Node-NAI

      Contains the username or host name in the format defined in [4].


3.0 Security Considerations

   This document assumes that the Mobile IP messages are authenticated
   using a method defined by the Mobile IP protocol. This proposal does
   require that the Mobile Node's NAI be sent in the clear over the
   network and may be a security issue.


4.0 References

   [1] P. Calhoun, G. Montenegro, C. Perkins, "Tunnel Establishment
       Protocol", draft-ietf-mobileip-calhoun-tep-01.txt,
       Work in Progress, March 1998.

   [2] C. Perkins, Editor.  IP Mobility Support.  RFC 2002, October
       1996.

   [3] P. R. Calhoun, A. Rubens, "DIAMETER Base Protocol",
       draft-calhoun-diameter-07.txt, Work in Progress, November 1998.

   [4] B. Aboba. "The Network Access Identifier." Internet-Draft,
       Work in Progress, August 1997.

   [5] P. Calhoun, G. Zorn, P. Pan, "DIAMETER Framework",
       draft-calhoun-diameter-framework-01.txt, Work in Progress,
       August 1998.

   [6] P. Calhoun, C. Perkins, "DIAMETER Mobile IP Extension",
       draft-calhoun-diameter-mobileip-01.txt, Work in Progress,
       November 1998.


5.0  Acknowledgements

The author would like to thanks Gabriel Montenegro and Vipul Gupta for
their useful discussions.


6.0  Chairs' Addresses

   The working group can be contacted via the current chairs:

      Jim Solomon
      RedBack Networks
      1389 Moffett Park Drive
      Sunnyvale, CA  94089-1134
      USA

      Phone:  +1 408 548-3583
      Fax:    +1 408 548-3599
      E-mail: solomon@rback.com

      Erik Nordmark
      Sun Microsystems, Inc.
      901 San Antonio Road
      Mailstop UMPK17-202
      Mountain View, California 94303

       Phone:  +1 650 786-5166
         Fax:  +1 650 786-5896
       E-Mail:  erik.nordmark@eng.sun.com


7.0 Author's Address

   Questions about this memo can be directed to:

      Pat R. Calhoun
      Technology Development
      Sun Microsystems, Inc.
      15 Network Circle
      Menlo Park, California, 94025
      USA

       Phone:  1-650-786-7733
         Fax:  1-650-786-6445
      E-mail:  pat.calhoun@eng.sun.com

      Charles E. Perkins
      Technology Development
      Sun Microsystems, Inc.
      15 Network Circle
      Menlo Park, California, 94025
      USA

       Phone:  1-650-786-6464
         Fax:  1-650-786-6445
      E-mail:  charles.perkins@eng.sun.com






















































