

Network Working Group                             Albert J. Tian
Internet Draft
Expiration Date: Aug 2006                         Redback Networks
                                                  Feb 2006

                         Generation ID for LDP

                      draft-tian-ldp-gen-id-00.txt

Status of this Memo

   By submitting this Internet-Draft, each author represents that any
   applicable patent or other IPR claims of which he or she is aware
   have been or will be disclosed, and any of which he or she becomes
   aware will be disclosed, in accordance with Section 6 of BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.



Abstract

   This document proposed two optional Generation ID TLVs in LDP Hello
   messages and in LDP Initialization messages to speed up LDP
   convergence in certain scenarios.












Tian                                                            [Page 1]

Internet Draft        draft-tian-ldp-gen-id-00.txt              Feb 2006


1. Introduction

   Consider two LSRs, LSRa and LSRb, that have an LDP session
   established between them. LSRa is playing an active role in the LDP
   session establishment, while LSRb is playing a passive role.  For
   certain LDP implementations, it is possible for the passive LSR LSRb
   to fail and recover before the Hello Hold Time expires on its LDP
   neighbor LSRa.  It is also possible for LSRb to fail in a way that it
   could not properly shutdown the TCP connections.

   In this scenario, the only way for the active LDP neighbor LSRa to
   detect the failure of LSRb would be for the KeepAlive Time to expire
   on LSRa. In normal LDP configurations, the KeepAlive Time is usually
   configured on the order of minutes. Before the KeepAlive Time
   expires, proper LDP convergence can not be initiated.


2. LDP Extension

   To solve this problem, we propose two new optional TLVs, Hello
   Generation ID TLV in LDP Hello messages, and Session Generation
   Generation ID TLV in Initialization Messages. Both two TLVs have the
   same format but with different types:

   Optional Parameter         Type     Length  Value

   Hello Generation ID        TBD        4      See below
   Session Generation ID      TBD        4      See below

   Hello Generation ID TLV and Session Generation ID TLV specify a 4
   octet unsigned generation ID that identifies an LDP instance.


3. Operation


3.1. Sending Generation ID

   For each LSR, when its LDP instance is initialized, a 4 octet
   Generation ID should be generated. The Generation ID should remain
   the same for the life time of the LDP instance.

   Whenever the LSR needs to send out LDP Hello messages, it should
   include the Generation ID value in the Hello Generation TLV in the
   Hello messages; whenever the LSR needs to send out LDP Initialization
   messages, it should include the Generation ID value in the Session
   Generation TLV in the Initialization messages.




Tian                                                            [Page 2]

Internet Draft        draft-tian-ldp-gen-id-00.txt              Feb 2006


3.2. Receiving Generation ID

   Whenever an LSR receives LDP Initialization message from another LSR
   with optional Session Generation ID TLV, it may remember the
   Generation ID for the neighbor.

   Whenever an LSR receives an LDP Hello message from an LDP neighbor
   with a Hello Generation ID that is different from the remembered
   Session Generation ID received from the same neighbor, then the LSR
   may choose to terminate the LDP session to that neighbor. A
   Notification message may be generated before the termination of the
   session with error code TBD that indicates a Generation ID mismatch.


4. Security Considerations

   This document does not introduce any new security issues.


5. IANA Considerations

   This document proposes two new optional TLVs in LDP Hello messages
   and LDP Initialization messages. The types of the two TLVs need to be
   assigned by IANA. The document also proposes a new LDP Notification
   error code for Generation ID mismatch. The new error code also needs
   to be assigned by IANA.


6. Acknowledgments

   The author would like to thank Venkatesan Pradeep for his help.


7. References

    [RFC3036] L. Andersson, P. Doolan, N. Feldman, A. Fredette, and B.
    Thomas, "LDP Specification", RFC 3036, January 2001.














Tian                                                            [Page 3]

Internet Draft        draft-tian-ldp-gen-id-00.txt              Feb 2006


8. Author Information


   Albert J. Tian
   Redback Networks, Inc.
   350 Holger Way
   San Jose, CA 95134
   Email: tian@redback.com




Copyright Statement

   Copyright (C) The Internet Society (2006).  This document is subject
   to the rights, licenses and restrictions contained in BCP 78, and
   except as set forth therein, the authors retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET
   ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


























Tian                                                            [Page 4]



