



Network Working Group                                              Z. Du
Internet-Draft                                                    P. Liu
Intended status: Standards Track                                 L. Geng
Expires: September 10, 2020                                 China Mobile
                                                           March 9, 2020


    Micro-burst Decreasing in Layer3 Network for Low-Latency Traffic
                 draft-du-detnet-layer3-low-latency-00

Abstract

   This document introduces a method to decrease the micro-bursts in
   Layer3 network for low-latency traffic.

Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC2119].

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on September 10, 2020.

Copyright Notice

   Copyright (c) 2020 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect



Du, et al.             Expires September 10, 2020               [Page 1]

Internet-Draft           L3 Low-latency Traffic               March 2020


   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Problem Statement . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Mechanism to Decrease Micro-bursts  . . . . . . . . . . . . .   3
     2.1.  Process of Edge Node  . . . . . . . . . . . . . . . . . .   3
     2.2.  Process of Forwarding Node  . . . . . . . . . . . . . . .   4
   3.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   4
   4.  Security Considerations . . . . . . . . . . . . . . . . . . .   4
   5.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   4
   6.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   5
     6.1.  Normative References  . . . . . . . . . . . . . . . . . .   5
     6.2.  Informative References  . . . . . . . . . . . . . . . . .   5
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   5

1.  Problem Statement

   Currently, the DetNet architecture in RFC 8655 [RFC8655] is supposed
   to work in campus-wide networks and private WANs, and hasn't covered
   the large-scale ISP network scenario.  However, the low-latency
   requirement exists in both L2 and L3 networks, and in both small and
   large networks.

   As talked in [I-D.qiang-detnet-large-scale-detnet], deploying
   deterministic services in a large-scale network brings a lot of new
   challenges.  A novel method called LDN is introduced in
   [I-D.qiang-detnet-large-scale-detnet], which explores the
   deterministic forwarding over a large-scale network.

   According to RFC 8655 [RFC8655], DetNet operates at the IP layer and
   delivers service over lower-layer technologies such as MPLS and IEEE
   802.1 Time-Sensitive Networking (TSN).  However, the TSN mechanisms
   are designed for L2 network originally, and cannot be directly used
   in the large-scale layer 3 network because of various reasons.  For
   example, some TSN mechanisms need synchronization of the network
   equipments, which is easier in a small network, but hard in a large
   network; some mechanisms need a per-flow state in the forwarding
   plane, which is un-scalable; and some TSN mechanisms need a constant
   and forecastable traffic characteristics, which is more complicated
   in a large network where much more flows exist and the traffic
   characteristics is more dynamic.

   The current forwarding mechanism in an IP router is based on
   statistical multiplexing, and cannot provide the deterministic



Du, et al.             Expires September 10, 2020               [Page 2]

Internet-Draft           L3 Low-latency Traffic               March 2020


   service because of various reasons.  Even be given a high priority, a
   deterministic packet can experience a long congestion delay or be
   lost in a relatively light-loaded network, which is called micro-
   burst in the network.

   Figure 1 show the problem of the current scheduling mechanism of an
   IP network.  Before the scheduling in an IP network, the critical
   packets are well paced, but after the scheduling, the packets will be
   gathered even the total traffic rate is unchanged.  When an IP
   outgoing interface receives multiple critical flows from several
   incoming interfaces, the situation becomes more serious.  However, an
   IP router will try to send them as soon as possible, so occasionally,
   in some later hops, micro-bursts will emerge.

       _     _     _     _     _     _     _     _     _     _     _
      | |   | |   | |   | |   | |   | |   | |   | |   | |   | |   | |
   ---------------------------------------------------------------------
                      Before scheduling in an IP network

       _  _  _  _  _  _                 _  _  _  _  _
      | || || || || || |               | || || || || |
   ---------------------------------------------------------------------
                      After scheduling in an IP network

      Figure 1: Change of the traffic characteristics in an IP network


   This document proposes a method to support the low latency traffic
   bearing in an IP network by avoiding micro-bursts in the network as
   much as possible.

2.  Mechanism to Decrease Micro-bursts

   The mechanism needs the cooperation of the edge node and the
   forwarding node in an IP network.

2.1.  Process of Edge Node

   The edge node of the IP network can recognize each critical flows
   just as in the TSN network, and then give them individually a good
   shaping.  In fact, in TSN mechanisms, no micro-busrt will emerge for
   critical traffic, and each TSN mechanism is proved to be effective
   under some conditions.

   This document suggests the edge node to shape the critical traffic by
   using the CBS method in IEEE 802.1Qav, or the shaping methods in IEEE
   802.1Qcr.  They can generate a paced traffic for each critical flow.




Du, et al.             Expires September 10, 2020               [Page 3]

Internet-Draft           L3 Low-latency Traffic               March 2020


   The parameters of the shaper, such as the sending rate, can be
   configured for each flow by some means.

2.2.  Process of Forwarding Node

   For the forwarding node, it is uneasy to recognize each critical flow
   because of the high pressure of forwarding.  It is suggested that no
   per-flow state is maintained in the forwarding node.  Hence, the
   forwarding node needs to aggregate the critical flows and handle them
   together.

   This document suggests that the forwarding node can deploy a specific
   queue at each outgoing interface.  The queue will buffer all critical
   traffic that need to go out through that interface, and will pace
   them by using methods mentioned in Section 2.1.

   The shaping method in TSN is used here instead of the original
   forwarding method in an IP router, which can make the critical
   traffic be forwarded orderly instead of as soon as possible.
   Therefore, micro-bursts can be decreased in the network.

   If all the forwarding nodes can do their jobs properly, i.e., they
   can well pace the critical traffic, no or rare micro-bursts for the
   critical traffic will emerge.  In this way, the critical traffic will
   have a relatively low average latency in the IP network.

   As no per-flow state is maintained in the forwarding node, the
   sending rate of the shaper is hard to decide.  In this document, the
   sending rate is suggested to be generated referring to the incoming
   rate of the queue.  The purpose is to maintain a proper buffer depth
   for the queue.

3.  IANA Considerations

   TBD.

4.  Security Considerations

   TBD.

5.  Acknowledgements

   TBD.








Du, et al.             Expires September 10, 2020               [Page 4]

Internet-Draft           L3 Low-latency Traffic               March 2020


6.  References

6.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

6.2.  Informative References

   [I-D.qiang-detnet-large-scale-detnet]
              Qiang, L., Geng, X., Liu, B., Eckert, T., Geng, L., and G.
              Li, "Large-Scale Deterministic IP Network", draft-qiang-
              detnet-large-scale-detnet-05 (work in progress), September
              2019.

   [RFC8655]  Finn, N., Thubert, P., Varga, B., and J. Farkas,
              "Deterministic Networking Architecture", RFC 8655,
              DOI 10.17487/RFC8655, October 2019,
              <https://www.rfc-editor.org/info/rfc8655>.

Authors' Addresses

   Zongpeng Du
   China Mobile
   No.32 XuanWuMen West Street
   Beijing  100053
   China

   Email: duzongpeng@foxmail.com


   Peng Liu
   China Mobile
   No.32 XuanWuMen West Street
   Beijing  100053
   China

   Email: liupengyjy@chinamobile.com











Du, et al.             Expires September 10, 2020               [Page 5]

Internet-Draft           L3 Low-latency Traffic               March 2020


   Liang Geng
   China Mobile
   No.32 XuanWuMen West Street
   Beijing  100053
   China

   Email: gengliang@chinamobile.com












































Du, et al.             Expires September 10, 2020               [Page 6]
