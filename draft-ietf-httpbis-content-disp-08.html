<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Use of the Content-Disposition Header Field in the Hypertext Transfer Protocol (HTTP)</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Notational Conventions">
<link href="#rfc.section.3" rel="Chapter" title="3 Conformance and Error Handling">
<link href="#rfc.section.4" rel="Chapter" title="4 Header Field Definition">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 Grammar">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Disposition Type">
<link href="#rfc.section.4.3" rel="Chapter" title="4.3 Disposition Parameter: 'Filename'">
<link href="#rfc.section.4.4" rel="Chapter" title="4.4 Disposition Parameter: Extensions">
<link href="#rfc.section.4.5" rel="Chapter" title="4.5 Extensibility">
<link href="#rfc.section.5" rel="Chapter" title="5 Examples">
<link href="#rfc.section.6" rel="Chapter" title="6 Internationalization Considerations">
<link href="#rfc.section.7" rel="Chapter" title="7 Security Considerations">
<link href="#rfc.section.8" rel="Chapter" title="8 IANA Considerations">
<link href="#rfc.section.8.1" rel="Chapter" title="8.1 Registry for Disposition Values and Parameter">
<link href="#rfc.section.8.2" rel="Chapter" title="8.2 Header Field Registration">
<link href="#rfc.section.9" rel="Chapter" title="9 Acknowledgements">
<link href="#rfc.references" rel="Chapter" title="10 References">
<link href="#rfc.references.1" rel="Chapter" title="10.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="10.2 Informative References">
<link href="#rfc.appendix.Appendix%20A" rel="Chapter" title="Appendix A Changes from the RFC 2616 Definition">
<link href="#rfc.appendix.Appendix%20B" rel="Chapter" title="Appendix B Differences compared to RFC 2183">
<link href="#rfc.appendix.Appendix%20C" rel="Chapter" title="Appendix C Alternative Approaches to Internationalization">
<link href="#rfc.appendix.Appendix%20C.1" rel="Chapter" title="Appendix C.1 RFC 2047 Encoding">
<link href="#rfc.appendix.Appendix%20C.2" rel="Chapter" title="Appendix C.2 Percent Encoding">
<link href="#rfc.appendix.Appendix%20C.3" rel="Chapter" title="Appendix C.3 Encoding Sniffing">
<link href="#rfc.appendix.Appendix%20C.4" rel="Chapter" title="Appendix C.4 Implementations (to be removed by RFC Editor before publication)">
<link href="#rfc.appendix.Appendix%20D" rel="Chapter" title="Appendix D Advice on Generating Content-Disposition Header Fields">
<link href="#rfc.appendix.Appendix%20E" rel="Chapter" title="Appendix E Change Log (to be removed by RFC Editor before publication)">
<link href="#rfc.appendix.Appendix%20E.1" rel="Chapter" title="Appendix E.1 Since draft-reschke-rfc2183-in-http-00">
<link href="#rfc.appendix.Appendix%20E.2" rel="Chapter" title="Appendix E.2 Since draft-reschke-rfc2183-in-http-01">
<link href="#rfc.appendix.Appendix%20E.3" rel="Chapter" title="Appendix E.3 Since draft-reschke-rfc2183-in-http-02">
<link href="#rfc.appendix.Appendix%20E.4" rel="Chapter" title="Appendix E.4 Since draft-reschke-rfc2183-in-http-03">
<link href="#rfc.appendix.Appendix%20E.5" rel="Chapter" title="Appendix E.5 Since draft-ietf-httpbis-content-disp-00">
<link href="#rfc.appendix.Appendix%20E.6" rel="Chapter" title="Appendix E.6 Since draft-ietf-httpbis-content-disp-01">
<link href="#rfc.appendix.Appendix%20E.7" rel="Chapter" title="Appendix E.7 Since draft-ietf-httpbis-content-disp-02">
<link href="#rfc.appendix.Appendix%20E.8" rel="Chapter" title="Appendix E.8 Since draft-ietf-httpbis-content-disp-03">
<link href="#rfc.appendix.Appendix%20E.9" rel="Chapter" title="Appendix E.9 Since draft-ietf-httpbis-content-disp-04">
<link href="#rfc.appendix.Appendix%20E.10" rel="Chapter" title="Appendix E.10 Since draft-ietf-httpbis-content-disp-05">
<link href="#rfc.appendix.Appendix%20E.11" rel="Chapter" title="Appendix E.11 Since draft-ietf-httpbis-content-disp-06">
<link href="#rfc.appendix.Appendix%20E.12" rel="Chapter" title="Appendix E.12 Since draft-ietf-httpbis-content-disp-07">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="RFC 2616 defines the Content-Disposition response header field, but points out that it is not part of the HTTP/1.1 Standard.  This specification takes over the definition and registration of Content-Disposition, as used in HTTP, and clarifies internationalization aspects.  " />
  <meta name="description" content="RFC 2616 defines the Content-Disposition response header field, but points out that it is not part of the HTTP/1.1 Standard.  This specification takes over the definition and registration of Content-Disposition, as used in HTTP, and clarifies internationalization aspects.  " />
  <meta name="keywords" content="" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">HTTPbis Working Group</td>
<td class="right">J. F. Reschke</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">greenbytes</td>
</tr>
<tr>
<td class="left">Updates: 2616 (if approved)</td>
<td class="right">March 14, 2011</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right"></td>
</tr>
<tr>
<td class="left">Expires: September 15, 2011</td>
<td class="right"></td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Use of the Content-Disposition Header Field in the Hypertext Transfer Protocol (HTTP)<br />
  <span class="filename">draft-ietf-httpbis-content-disp-08</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>RFC 2616 defines the Content-Disposition response header field, but points out that it is not part of the HTTP/1.1 Standard.  This specification takes over the definition and registration of Content-Disposition, as used in HTTP, and clarifies internationalization aspects.  </p>
<h1><a>Editorial Note (To be removed by RFC Editor before publication)</a></h1>
<p>This specification is expected to replace the definition of Content-Disposition in the HTTP/1.1 specification, as currently revised by the IETF HTTPbis working group. See also <a href="http://trac.tools.ietf.org/wg/httpbis/trac/ticket/123">http://trac.tools.ietf.org/wg/httpbis/trac/ticket/123</a>.  </p>
<p>Discussion of this draft should take place on the HTTPBIS working group mailing list (ietf-http-wg@w3.org). The current issues list is at <a href="http://trac.tools.ietf.org/wg/httpbis/trac/query?component=content-disp">http://trac.tools.ietf.org/wg/httpbis/trac/query?component=content-disp</a> and related documents (including fancy diffs) can be found at <a href="http://tools.ietf.org/wg/httpbis/">http://tools.ietf.org/wg/httpbis/</a>.  </p>
<p>The changes in this draft are summarized in <a href="#changes.since.07">Appendix Appendix E.12</a>.  </p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on September 15, 2011.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Notational Conventions</a>
</li>
<li>3.   <a href="#rfc.section.3">Conformance and Error Handling</a>
</li>
<li>4.   <a href="#rfc.section.4">Header Field Definition</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">Grammar</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">Disposition Type</a>
</li>
<li>4.3.   <a href="#rfc.section.4.3">Disposition Parameter: 'Filename'</a>
</li>
<li>4.4.   <a href="#rfc.section.4.4">Disposition Parameter: Extensions</a>
</li>
<li>4.5.   <a href="#rfc.section.4.5">Extensibility</a>
</li>
<li>5.   <a href="#rfc.section.5">Examples</a>
</li>
<li>6.   <a href="#rfc.section.6">Internationalization Considerations</a>
</li>
<li>7.   <a href="#rfc.section.7">Security Considerations</a>
</li>
<li>8.   <a href="#rfc.section.8">IANA Considerations</a>
</li>
<li>8.1.   <a href="#rfc.section.8.1">Registry for Disposition Values and Parameter</a>
</li>
<li>8.2.   <a href="#rfc.section.8.2">Header Field Registration</a>
</li>
<li>9.   <a href="#rfc.section.9">Acknowledgements</a>
</li>
<li>10.   <a href="#rfc.references">References</a>
</li>
<li>10.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>10.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li>Appendix A.   <a href="#rfc.appendix.Appendix%20A">Changes from the RFC 2616 Definition</a>
</li>
<li>Appendix B.   <a href="#rfc.appendix.Appendix%20B">Differences compared to RFC 2183</a>
</li>
<li>Appendix C.   <a href="#rfc.appendix.Appendix%20C">Alternative Approaches to Internationalization</a>
</li>
<li>Appendix C.1.   <a href="#rfc.appendix.Appendix%20C.1">RFC 2047 Encoding</a>
</li>
<li>Appendix C.2.   <a href="#rfc.appendix.Appendix%20C.2">Percent Encoding</a>
</li>
<li>Appendix C.3.   <a href="#rfc.appendix.Appendix%20C.3">Encoding Sniffing</a>
</li>
<li>Appendix C.4.   <a href="#rfc.appendix.Appendix%20C.4">Implementations (to be removed by RFC Editor before publication)</a>
</li>
<li>Appendix D.   <a href="#rfc.appendix.Appendix%20D">Advice on Generating Content-Disposition Header Fields</a>
</li>
<li>Appendix E.   <a href="#rfc.appendix.Appendix%20E">Change Log (to be removed by RFC Editor before publication)</a>
</li>
<li>Appendix E.1.   <a href="#rfc.appendix.Appendix%20E.1">Since draft-reschke-rfc2183-in-http-00</a>
</li>
<li>Appendix E.2.   <a href="#rfc.appendix.Appendix%20E.2">Since draft-reschke-rfc2183-in-http-01</a>
</li>
<li>Appendix E.3.   <a href="#rfc.appendix.Appendix%20E.3">Since draft-reschke-rfc2183-in-http-02</a>
</li>
<li>Appendix E.4.   <a href="#rfc.appendix.Appendix%20E.4">Since draft-reschke-rfc2183-in-http-03</a>
</li>
<li>Appendix E.5.   <a href="#rfc.appendix.Appendix%20E.5">Since draft-ietf-httpbis-content-disp-00</a>
</li>
<li>Appendix E.6.   <a href="#rfc.appendix.Appendix%20E.6">Since draft-ietf-httpbis-content-disp-01</a>
</li>
<li>Appendix E.7.   <a href="#rfc.appendix.Appendix%20E.7">Since draft-ietf-httpbis-content-disp-02</a>
</li>
<li>Appendix E.8.   <a href="#rfc.appendix.Appendix%20E.8">Since draft-ietf-httpbis-content-disp-03</a>
</li>
<li>Appendix E.9.   <a href="#rfc.appendix.Appendix%20E.9">Since draft-ietf-httpbis-content-disp-04</a>
</li>
<li>Appendix E.10.   <a href="#rfc.appendix.Appendix%20E.10">Since draft-ietf-httpbis-content-disp-05</a>
</li>
<li>Appendix E.11.   <a href="#rfc.appendix.Appendix%20E.11">Since draft-ietf-httpbis-content-disp-06</a>
</li>
<li>Appendix E.12.   <a href="#rfc.appendix.Appendix%20E.12">Since draft-ietf-httpbis-content-disp-07</a>
</li>
<li><a href="#rfc.authors">Author's Address</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> <a href="#introduction" id="introduction">Introduction</a>
</h1>
<p id="rfc.section.1.p.1">RFC 2616 defines the Content-Disposition response header field in Section 19.5.1 of <a href="#RFC2616">[RFC2616]</a>, but points out that it is not part of the HTTP/1.1 Standard (Section 15.5): </p>
<p></p>

<ul class="empty"><li>Content-Disposition is not part of the HTTP standard, but since it is widely implemented, we are documenting its use and risks for implementers.  </li></ul>
<p id="rfc.section.1.p.3">This specification takes over the definition and registration of Content-Disposition, as used in HTTP.  Based on interoperability testing with existing User Agents, it fully defines a profile of the features defined in the Multipurpose Internet Mail Extensions (MIME) variant (<a href="#RFC2183">[RFC2183]</a>) of the header field, and also clarifies internationalization aspects.  </p>
<p></p>

<ul class="empty"><li>Note: this document does not apply to Content-Disposition header fields appearing in payload bodies transmitted over HTTP, such as when using the media type "multipart/form-data" (<a href="#RFC2388">[RFC2388]</a>).  </li></ul>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> <a href="#notational.conventions" id="notational.conventions">Notational Conventions</a>
</h1>
<p id="rfc.section.2.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">[RFC2119]</a>.  </p>
<p id="rfc.section.2.p.2">This specification uses the augmented BNF notation defined in Section 2.1 of <a href="#RFC2616">[RFC2616]</a>, including its rules for implied linear whitespace (LWS).  </p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> <a href="#conformance.and.error.handling" id="conformance.and.error.handling">Conformance and Error Handling</a>
</h1>
<p id="rfc.section.3.p.1">This specification defines conformance criteria for both senders (usually, HTTP origin servers) and recipients (usually, HTTP user agents) of the Content-Disposition header field. An implementation is considered conformant if it complies with all of the requirements associated with its role.  </p>
<p id="rfc.section.3.p.2">This specification also defines certain forms of the header field-value to be invalid, using both ABNF and prose requirements (<a href="#header.field.definition">Section 4</a>), but it does not define special handling of these invalid field-values.  </p>
<p id="rfc.section.3.p.3">Senders MUST NOT generate Content-Disposition header fields that are invalid.  </p>
<p id="rfc.section.3.p.4">Recipients MAY take steps to recover a usable field-value from an invalid header field, but SHOULD NOT reject the message outright, unless this is explicitly desirable behaviour (e.g., the implementation is a validator). As such, the default handling of invalid fields is to ignore them.  </p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#header.field.definition" id="header.field.definition">Header Field Definition</a>
</h1>
<p id="rfc.section.4.p.1">The Content-Disposition response header field is used to convey additional information about how to process the response payload, and also can be used to attach additional metadata, such as the filename to use when saving the response payload locally.  </p>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> Grammar</h1>
<div id="#rfc.figure.1"></div>
<pre>
  content-disposition = "Content-Disposition" ":"
                         disposition-type *( ";" disposition-parm )

  disposition-type    = "inline" | "attachment" | disp-ext-type
                      ; case-insensitive
  disp-ext-type       = token

  disposition-parm    = filename-parm | disp-ext-parm

  filename-parm       = "filename" "=" value
                      | "filename*" "=" ext-value
  
  disp-ext-parm       = token "=" value
                      | ext-token "=" ext-value
  ext-token           = &lt;the characters in token, followed by "*"&gt;
</pre>
<div id="#rfc.figure.2"></div>
<p>Defined in <a href="#RFC2616">[RFC2616]</a>:</p>
<pre>
  token         = &lt;token, defined in [RFC2616], Section 2.2&gt;
  quoted-string = &lt;quoted-string, defined in [RFC2616], Section 2.2&gt;
  value         = &lt;value, defined in [RFC2616], Section 3.6&gt;
                ; token | quoted-string
              
</pre>
<div id="#rfc.figure.3"></div>
<p>Defined in <a href="#RFC5987">[RFC5987]</a>:</p>
<pre>
  ext-value   = &lt;ext-value, defined in [RFC5987], Section 3.2&gt;
</pre>
<p id="rfc.section.4.1.p.1">Header field values with multiple instances of the same parameter name are invalid.  </p>
<p id="rfc.section.4.1.p.2">Note that due to the rules for implied linear whitespace (Section 2.1 of <a href="#RFC2616">[RFC2616]</a>), OPTIONAL whitespace can appear between words (token or quoted-string) and separator characters.  </p>
<p id="rfc.section.4.1.p.3">Furthermore note that the format used for ext-value allows specifying a natural language; this is of limited use for filenames and is likely to be ignored by recipients.  </p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> <a href="#disposition.type" id="disposition.type">Disposition Type</a>
</h1>
<p id="rfc.section.4.2.p.1">If the disposition type matches "attachment" (case-insensitively), this indicates that the recipient should prompt the user to save the response locally, rather than process it normally (as per its media type).  </p>
<p id="rfc.section.4.2.p.2">On the other hand, if it matches "inline" (case-insensitively), this implies default processing. Therefore, the disposition type "inline" is only useful when it is augmented with additional parameters, such as the filename (see below).  </p>
<p id="rfc.section.4.2.p.3">Unknown or unhandled disposition types SHOULD be handled by recipients the same way as "attachment" (see also <a href="#RFC2183">[RFC2183]</a>, Section 2.8).  </p>
<h1 id="rfc.section.4.3">
<a href="#rfc.section.4.3">4.3.</a> <a href="#disposition.parameter.filename" id="disposition.parameter.filename">Disposition Parameter: 'Filename'</a>
</h1>
<p id="rfc.section.4.3.p.1">The parameters "filename" and "filename*", to be matched case-insensitively, provide information on how to construct a filename for storing the message payload.  </p>
<p id="rfc.section.4.3.p.2">Depending on the disposition type, this information might be used right away (in the "save as..." interaction caused for the "attachment" disposition type), or later on (for instance, when the user decides to save the contents of the current page being displayed).  </p>
<p id="rfc.section.4.3.p.3">The parameters "filename" and "filename*" differ only in that "filename*" uses the encoding defined in <a href="#RFC5987">[RFC5987]</a>, allowing the use of characters not present in the ISO-8859-1 character set (<a href="#ISO-8859-1">[ISO-8859-1]</a>).  </p>
<p id="rfc.section.4.3.p.4">Many user agent implementations predating this specification do not understand the "filename*" parameter. Therefore, when both "filename" and "filename*" are present in a single header field value, recipients SHOULD pick "filename*" and ignore "filename". This way, senders can avoid special-casing specific user agents by sending both the more expressive "filename*" parameter, and the "filename" parameter as fallback for legacy recipients (see <a href="#examples">Section 5</a> for an example).  </p>
<p id="rfc.section.4.3.p.5">It is essential that recipients treat the specified filename as advisory only, thus be very careful in extracting the desired information.  In particular: </p>

<ul>
<li>Recipients MUST NOT be able to write into any location other than one to which they are specifically entitled. To illustrate the problem consider the consequences of being able to overwrite well-known system locations (such as "/etc/passwd"). One strategy to achieve this is to never trust folder name information in the filename parameter, for instance by stripping all but the last path segment and only consider the actual filename (where 'path segment' are the components of the field value delimited by the path separator characters "\" and "/").  </li>
<li>Many platforms do not use Internet Media Types (<a href="#RFC2046">[RFC2046]</a>) to hold type information in the file system, but rely on filename extensions instead. Trusting the server-provided file extension could introduce a privilege escalation when the saved file is later opened (consider ".exe"). Thus, recipients SHOULD ensure that a file extension is used that is safe, optimally matching the media type of the received payload.  </li>
<li>Recipients SHOULD strip or replace character sequences that are known to cause confusion both in user interfaces and in filenames, such as control characters and leading and trailing whitespace.  </li>
<li>Other aspects recipients need to be aware of are names that have a special meaning in the file system or in shell commands, such as "." and "..", "~", "|", and also device names. Recipients SHOULD ignore or substitute names like these.  </li>
</ul>

<p> </p>
<p></p>

<ul class="empty"><li>Note: Many user agents do not properly handle the escape character "\" when using the quoted-string form. Furthermore, some user agents erroneously try to perform unescaping of "percent" escapes (see <a href="#alternatives.percent">Appendix Appendix C.2</a>), and thus might misinterpret filenames containing the percent character followed by two hex digits.  </li></ul>
<h1 id="rfc.section.4.4">
<a href="#rfc.section.4.4">4.4.</a> <a href="#disposition.parameter.extensions" id="disposition.parameter.extensions">Disposition Parameter: Extensions</a>
</h1>
<p id="rfc.section.4.4.p.1">To enable future extensions, recipients SHOULD ignore unrecognized parameters (see also <a href="#RFC2183">[RFC2183]</a>, Section 2.8).  </p>
<h1 id="rfc.section.4.5">
<a href="#rfc.section.4.5">4.5.</a> <a href="#extensibility" id="extensibility">Extensibility</a>
</h1>
<p id="rfc.section.4.5.p.1">Note that Section 9 of <a href="#RFC2183">[RFC2183]</a> defines IANA registries both for disposition types and disposition parameters. This registry is shared by different protocols using Content-Disposition, such as MIME and HTTP.  Therefore, not all registered values may make sense in the context of HTTP.  </p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#examples" id="examples">Examples</a>
</h1>
<div id="#rfc.figure.4"></div>
<p>Direct UA to show "save as" dialog, with a filename of "example.html": </p>
<pre>
Content-Disposition: Attachment; filename=example.html
</pre>
<div id="#rfc.figure.5"></div>
<p>Direct UA to behave as if the Content-Disposition header field wasn't present, but to remember the filename "an example.html" for a subsequent save operation: </p>
<pre>
  Content-Disposition: INLINE; FILENAME= "an example.html"
  </pre>
<p>Note: this uses the quoted-string form so that the space character can be included.  </p>
<div id="#rfc.figure.6"></div>
<p>Direct UA to show "save as" dialog, with a filename containing the Unicode character  U+20AC (EURO SIGN): </p>
<pre>
  Content-Disposition: attachment; 
                       filename*= UTF-8''%e2%82%ac%20rates
  </pre>
<p>Here, the encoding defined in <a href="#RFC5987">[RFC5987]</a> is also used to encode the non-ISO-8859-1 character.  </p>
<div id="#rfc.figure.7"></div>
<p>Same as above, but adding the "filename" parameter for compatibility with user agents not implementing RFC 5987: </p>
<pre>
  Content-Disposition: attachment;
                       filename="EURO rates";
                       filename*=utf-8''%e2%82%ac%20rates
  </pre>
<p>Note: those user agents that do not support the RFC 5987 encoding ignore "filename*" when it occurs after "filename".  </p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#i18n" id="i18n">Internationalization Considerations</a>
</h1>
<p id="rfc.section.6.p.1">The "filename*" parameter (<a href="#disposition.parameter.filename">Section 4.3</a>), using the encoding defined in <a href="#RFC5987">[RFC5987]</a>, allows the server to transmit characters outside the ISO-8859-1 character set, and also to optionally specify the language in use.  </p>
<p id="rfc.section.6.p.2">Future parameters might also require internationalization, in which case the same encoding can be used.  </p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#security.considerations" id="security.considerations">Security Considerations</a>
</h1>
<p id="rfc.section.7.p.1">Using server-supplied information for constructing local filenames introduces many risks. These are summarized in <a href="#disposition.parameter.filename">Section 4.3</a>.  </p>
<p id="rfc.section.7.p.2">Furthermore, implementers also ought to be aware of the Security Considerations applying to HTTP (see Section 15 of <a href="#RFC2616">[RFC2616]</a>), and also the parameter encoding defined in <a href="#RFC5987">[RFC5987]</a> (see Section 5).  </p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#iana.considerations" id="iana.considerations">IANA Considerations</a>
</h1>
<h1 id="rfc.section.8.1">
<a href="#rfc.section.8.1">8.1.</a> <a href="#registry" id="registry">Registry for Disposition Values and Parameter</a>
</h1>
<p id="rfc.section.8.1.p.1">This specification does not introduce any changes to the registration procedures for disposition values and parameters that are defined in Section 9 of <a href="#RFC2183">[RFC2183]</a>.  </p>
<h1 id="rfc.section.8.2">
<a href="#rfc.section.8.2">8.2.</a> <a href="#header.field.registration" id="header.field.registration">Header Field Registration</a>
</h1>
<p id="rfc.section.8.2.p.1">This document updates the definition of the Content-Disposition HTTP header field in the permanent HTTP header field registry (see <a href="#RFC3864">[RFC3864]</a>).  </p>
<p></p>

<dl>
<dt>Header field name:</dt>
<dd style="margin-left: 8">Content-Disposition</dd>
<dt>Applicable protocol:</dt>
<dd style="margin-left: 8">http</dd>
<dt>Status:</dt>
<dd style="margin-left: 8">standard</dd>
<dt>Author/Change controller:</dt>
<dd style="margin-left: 8">IETF</dd>
<dt>Specification document:</dt>
<dd style="margin-left: 8">this specification (<a href="#header.field.definition">Section 4</a>)</dd>
</dl>

<p> </p>
<h1 id="rfc.section.9">
<a href="#rfc.section.9">9.</a> Acknowledgements</h1>
<p id="rfc.section.9.p.1">Thanks to Adam Barth, Rolf Eike Beer, Stewart Bryant, Bjoern Hoehrmann, Alfred Hoenes, Roar Lauritzsen, Alexey Melnikov, Henrik Nordstrom, and Mark Nottingham for their valuable feedback.  </p>
<h1 id="rfc.references">
<a href="#rfc.references">10.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">10.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2616">[RFC2616]</b></td>
<td class="top">
<a href="mailto:fielding@ics.uci.edu" title="University of California, Irvine">Fielding, R.</a>, <a href="mailto:jg@w3.org" title="W3C">Gettys, J.</a>, <a href="mailto:mogul@wrl.dec.com" title="Compaq Computer Corporation">Mogul, J.</a>, <a href="mailto:frystyk@w3.org" title="MIT Laboratory for Computer Science">Frystyk, H.</a>, <a href="mailto:masinter@parc.xerox.com" title="Xerox Corporation">Masinter, L.</a>, <a href="mailto:paulle@microsoft.com" title="Microsoft Corporation">Leach, P.</a> and <a href="mailto:timbl@w3.org" title="W3C">T. Berners-Lee</a>, "<a href="http://tools.ietf.org/html/rfc2616">Hypertext Transfer Protocol -- HTTP/1.1</a>", RFC 2616, June 1999.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5987">[RFC5987]</b></td>
<td class="top">
<a href="mailto:julian.reschke@greenbytes.de" title="greenbytes GmbH">Reschke, J. F.</a>, "<a href="http://tools.ietf.org/html/rfc5987">Character Set and Language Encoding for Hypertext Transfer Protocol (HTTP) Header Field Parameters</a>", RFC 5987, August 2010.</td>
</tr>
<tr>
<td class="reference"><b id="ISO-8859-1">[ISO-8859-1]</b></td>
<td class="top">
<a>International Organization for Standardization</a>, "<a>Information technology -- 8-bit single-byte coded graphic character sets -- Part 1: Latin alphabet No. 1</a>", ISO/IEC 8859-1:1998, 1998.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">10.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2046">[RFC2046]</b></td>
<td class="top">
<a href="mailto:ned@innosoft.com" title="Innosoft International, Inc.">Freed, N.</a> and <a href="mailto:nsb@nsb.fv.com" title="First Virtual Holdings">N. Borenstein</a>, "<a href="http://tools.ietf.org/html/rfc2046">Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types</a>", RFC 2046, November 1996.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2047">[RFC2047]</b></td>
<td class="top">
<a href="mailto:moore@cs.utk.edu" title="University of Tennessee">Moore, K.</a>, "<a href="http://tools.ietf.org/html/rfc2047">MIME (Multipurpose Internet Mail Extensions) Part Three: Message Header Extensions for Non-ASCII Text</a>", RFC 2047, November 1996.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2183">[RFC2183]</b></td>
<td class="top">
<a href="mailto:rens@century.com" title="New Century Systems">Troost, R.</a>, <a href="mailto:sdorner@qualcomm.com" title="QUALCOMM Incorporated">Dorner, S.</a> and <a href="mailto:moore@cs.utk.edu" title="Department of Computer Science">K. Moore</a>, "<a href="http://tools.ietf.org/html/rfc2183">Communicating Presentation Information in Internet Messages: The Content-Disposition Header Field</a>", RFC 2183, August 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2231">[RFC2231]</b></td>
<td class="top">
<a href="mailto:ned.freed@innosoft.com" title="Innosoft International, Inc.">Freed, N.</a> and <a href="mailto:moore@cs.utk.edu" title="University of Tennessee">K. Moore</a>, "<a href="http://tools.ietf.org/html/rfc2231">MIME Parameter Value and Encoded Word Extensions: Character Sets, Languages, and Continuations</a>", RFC 2231, November 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2388">[RFC2388]</b></td>
<td class="top">
<a href="mailto:masinter@parc.xerox.com" title="Xerox Palo Alto Research Center">Masinter, L.</a>, "<a href="http://tools.ietf.org/html/rfc2388">Returning Values from Forms: multipart/form-data</a>", RFC 2388, August 1998.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3864">[RFC3864]</b></td>
<td class="top">
<a href="mailto:GK-IETF@ninebynine.org" title="Nine by Nine">Klyne, G.</a>, <a href="mailto:mnot@pobox.com" title="BEA Systems">Nottingham, M.</a> and <a href="mailto:JeffMogul@acm.org" title="HP Labs">J. Mogul</a>, "<a href="http://tools.ietf.org/html/rfc3864">Registration Procedures for Message Header Fields</a>", BCP 90, RFC 3864, September 2004.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3986">[RFC3986]</b></td>
<td class="top">
<a href="mailto:timbl@w3.org" title="World Wide Web Consortium">Berners-Lee, T.</a>, <a href="mailto:fielding@gbiv.com" title="Day Software">Fielding, R.</a> and <a href="mailto:LMM@acm.org" title="Adobe Systems Incorporated">L. Masinter</a>, "<a href="http://tools.ietf.org/html/rfc3986">Uniform Resource Identifier (URI): Generic Syntax</a>", STD 66, RFC 3986, January 2005.</td>
</tr>
</tbody></table>
<h1 id="rfc.appendix.Appendix A">
<a href="#rfc.appendix.Appendix%20A">Appendix A.</a> <a href="#changes.from.rfc2616" id="changes.from.rfc2616">Changes from the RFC 2616 Definition</a>
</h1>
<p id="rfc.section.Appendix A.p.1">Compared to Section 19.5.1 of <a href="#RFC2616">[RFC2616]</a>, the following normative changes reflecting actual implementations have been made: </p>

<ul>
<li>According to RFC 2616, the disposition type "attachment" only applies to content of type "application/octet-stream". This restriction has been removed, because recipients in practice do not check the content type, and it also discourages properly declaring the media type.  </li>
<li>RFC 2616 only allows "quoted-string" for the filename parameter. This would be an exceptional parameter syntax, and also doesn't reflect actual use.  </li>
<li>The definition for the disposition type "inline" (<a href="#RFC2183">[RFC2183]</a>, Section 2.1) has been re-added with a suggestion for its processing.  </li>
<li>This specification requires support for the extended parameter encoding defined in <a href="#RFC5987">[RFC5987]</a>.  </li>
</ul>

<p> </p>
<h1 id="rfc.appendix.Appendix B">
<a href="#rfc.appendix.Appendix%20B">Appendix B.</a> <a href="#diffs.compared.to.rfc2183" id="diffs.compared.to.rfc2183">Differences compared to RFC 2183</a>
</h1>
<p id="rfc.section.Appendix B.p.1">Section 2 of <a href="#RFC2183">[RFC2183]</a> defines several additional disposition parameters: "creation-date", "modification-date", "quoted-date-time", and "size". The majority of user agents does not implement these, thus they have been omitted from this specification.  </p>
<h1 id="rfc.appendix.Appendix C">
<a href="#rfc.appendix.Appendix%20C">Appendix C.</a> <a href="#alternatives" id="alternatives">Alternative Approaches to Internationalization</a>
</h1>
<p id="rfc.section.Appendix C.p.1">By default, HTTP header field parameters cannot carry characters outside the ISO-8859-1 (<a href="#ISO-8859-1">[ISO-8859-1]</a>) character encoding (see <a href="#RFC2616">[RFC2616]</a>, Section 2.2). For the "filename" parameter, this of course is an unacceptable restriction.  </p>
<p id="rfc.section.Appendix C.p.2">Unfortunately, user agent implementers have not managed to come up with an interoperable approach, although the IETF Standards Track specifies exactly one solution (<a href="#RFC2231">[RFC2231]</a>, clarified and profiled for HTTP in <a href="#RFC5987">[RFC5987]</a>).  </p>
<p id="rfc.section.Appendix C.p.3">For completeness, the sections below describe the various approaches that have been tried, and explains how they are inferior to the RFC 5987 encoding used in this specification.  </p>
<h1 id="rfc.appendix.Appendix C.1">
<a href="#rfc.appendix.Appendix%20C.1">Appendix C.1.</a> <a href="#alternatives.rfc2047" id="alternatives.rfc2047">RFC 2047 Encoding</a>
</h1>
<p id="rfc.section.Appendix C.1.p.1">RFC 2047 defines an encoding mechanism for header fields, but this encoding is not supposed to be used for header field parameters - see Section 5 of <a href="#RFC2047">[RFC2047]</a>: </p>
<p></p>

<ul class="empty">
<li>An 'encoded-word' MUST NOT appear within a 'quoted-string'.  </li>
<li>...  </li>
<li>An 'encoded-word' MUST NOT be used in parameter of a MIME Content-Type or Content-Disposition field, or in any structured field body except within a 'comment' or 'phrase'.  </li>
</ul>
<p id="rfc.section.Appendix C.1.p.3">In practice, some user agents implement the encoding, some do not (exposing the encoded string to the user), and some get confused by it.  </p>
<h1 id="rfc.appendix.Appendix C.2">
<a href="#rfc.appendix.Appendix%20C.2">Appendix C.2.</a> <a href="#alternatives.percent" id="alternatives.percent">Percent Encoding</a>
</h1>
<p id="rfc.section.Appendix C.2.p.1">Some user agents accept percent encoded (<a href="#RFC3986">[RFC3986]</a>, Section 2.1) sequences of characters. The character encoding being used for decoding depends on various factors, including the encoding of the referring page, the user agent's locale, its configuration, and also the actual value of the parameter.  </p>
<p id="rfc.section.Appendix C.2.p.2">In practice, this is hard to use because those user agents that do not support it will display the escaped character sequence to the user. For those user agents that do implement this it is difficult to predict what character encoding they actually expect.  </p>
<h1 id="rfc.appendix.Appendix C.3">
<a href="#rfc.appendix.Appendix%20C.3">Appendix C.3.</a> <a href="#alternatives.sniff" id="alternatives.sniff">Encoding Sniffing</a>
</h1>
<p id="rfc.section.Appendix C.3.p.1">Some user agents inspect the value (which defaults to ISO-8859-1 for the quoted-string form) and switch to UTF-8 when it seems to be more likely to be the correct interpretation.  </p>
<p id="rfc.section.Appendix C.3.p.2">As with the approaches above, this is not interoperable and furthermore risks misinterpreting the actual value.  </p>
<h1 id="rfc.appendix.Appendix C.4">
<a href="#rfc.appendix.Appendix%20C.4">Appendix C.4.</a> <a href="#alternatives.implementations" id="alternatives.implementations">Implementations (to be removed by RFC Editor before publication)</a>
</h1>
<p id="rfc.section.Appendix C.4.p.1">Unfortunately, as of March 2011, neither the encoding defined in RFCs 2231 and 5987, nor any of the alternate approaches discussed above was implemented interoperably. Thus, this specification recommends the approach defined in RFC 5987, which at least has the advantage of actually being specified properly.  </p>
<p id="rfc.section.Appendix C.4.p.2">The table below shows the implementation support for the various approaches: </p>
<div id="#rfc.table.1"></div>
<table cellpadding="3" cellspacing="0" class="tt full left">
<thead><tr>
<th class="left">User Agent</th>
<th class="left">RFC 2231/5987</th>
<th class="left">RFC 2047</th>
<th class="left">Percent Encoding</th>
<th class="left">Encoding Sniffing</th>
</tr></thead>
<tbody>
<tr>
<td class="left">Chrome</td>
<td class="left">yes</td>
<td class="left">yes</td>
<td class="left">yes</td>
<td class="left">yes</td>
</tr>
<tr>
<td class="left">Firefox</td>
<td class="left">yes (*)</td>
<td class="left">yes</td>
<td class="left">no</td>
<td class="left">yes</td>
</tr>
<tr>
<td class="left">Internet Explorer</td>
<td class="left">yes (**)</td>
<td class="left">no</td>
<td class="left">yes</td>
<td class="left">no</td>
</tr>
<tr>
<td class="left">Konqueror</td>
<td class="left">yes</td>
<td class="left">no</td>
<td class="left">no</td>
<td class="left">no</td>
</tr>
<tr>
<td class="left">Opera</td>
<td class="left">yes</td>
<td class="left">no</td>
<td class="left">no</td>
<td class="left">no</td>
</tr>
<tr>
<td class="left">Safari</td>
<td class="left">no</td>
<td class="left">no</td>
<td class="left">no</td>
<td class="left">yes</td>
</tr>
</tbody>
</table>
<p id="rfc.section.Appendix C.4.p.3">(*) Does not implement the fallback behavior to "filename" described in <a href="#disposition.parameter.filename">Section 4.3</a>; a fix is planned for Firefox 5.  </p>
<p id="rfc.section.Appendix C.4.p.4">(**) Starting with IE9RC, but only implements UTF-8.  </p>
<h1 id="rfc.appendix.Appendix D">
<a href="#rfc.appendix.Appendix%20D">Appendix D.</a> <a href="#advice.generating" id="advice.generating">Advice on Generating Content-Disposition Header Fields</a>
</h1>
<p id="rfc.section.Appendix D.p.1">To successfully interoperate with existing and future user agents, senders of the Content-Disposition header field are advised to: </p>
<p></p>

<ul>
<li>Include a "filename" parameter when US-ASCII is sufficiently expressive.</li>
<li>Use the 'token' form of the filename parameter only when it does not contain disallowed characters (e.g., spaces); in such cases, the quoted-string form should be used.</li>
<li>Avoid including the percent character followed by two hexadecimal characters (e.g., %A9) in the filename parameter, since some existing implementations consider it to be an escape character, while others will pass it through unchanged.</li>
<li>Avoid including the "\" character in the quoted-string form of the filename parameter, as escaping is not implemented by some user agents, and can be considered as an illegal path character.</li>
<li>Avoid using non-ASCII characters in the filename parameter. Although most existing implementations will decode them as ISO-8859-1, some will apply heuristics to detect UTF-8, and thus might fail on certain names.</li>
<li>Include a "filename*" parameter where the desired filename cannot be expressed faithfully using the "filename" form. Note that legacy user agents will not process this, and will fall back to using the "filename" parameter's content.  </li>
<li>When a "filename*" parameter is sent, to also generate a "filename" parameter as a fallback for user agents that do not support the "filename*" form, if possible. This can be done by substituting characters with US-ASCII sequences (e.g., Unicode character point U+00E4 (LATIN SMALL LETTER A WITH DIARESIS) by "ae"). Note that this may not be possible in some locales.  </li>
<li>When a "filename" parameter is included as a fallback (as per above), "filename" should occur first, due to parsing problems in some existing implementations.  </li>
<li>Use UTF-8 as the encoding of the "filename*" parameter, when present, because at least one existing implementation only implements that encoding.</li>
</ul>

<p> </p>
<p id="rfc.section.Appendix D.p.3">Note that this advice is based upon UA behaviour at the time of writing, and might be superseded. At the time of publication of this document, <a href="http://purl.org/NET/http/content-disposition-tests">http://purl.org/NET/http/content-disposition-tests</a> provides an overview of current levels of support in various implementations.  </p>
<h1 id="rfc.appendix.Appendix E">
<a href="#rfc.appendix.Appendix%20E">Appendix E.</a> <a href="#change.log" id="change.log">Change Log (to be removed by RFC Editor before publication)</a>
</h1>
<p id="rfc.section.Appendix E.p.1">Note: the issues names in the change log entries for draft-reschke-rfc2183-in-http refer to <a href="http://greenbytes.de/tech/webdav/draft-reschke-rfc2183-in-http-issues.html">http://greenbytes.de/tech/webdav/draft-reschke-rfc2183-in-http-issues.html</a>.  </p>
<h1 id="rfc.appendix.Appendix E.1">
<a href="#rfc.appendix.Appendix%20E.1">Appendix E.1.</a> Since draft-reschke-rfc2183-in-http-00</h1>
<p id="rfc.section.Appendix E.1.p.1">Adjust terminology ("header" -&gt; "header field").  Update rfc2231-in-http reference.  </p>
<h1 id="rfc.appendix.Appendix E.2">
<a href="#rfc.appendix.Appendix%20E.2">Appendix E.2.</a> Since draft-reschke-rfc2183-in-http-01</h1>
<p id="rfc.section.Appendix E.2.p.1">Update rfc2231-in-http reference. Actually define the "filename" parameter. Add internationalization considerations.  Add examples using the RFC 5987 encoding.  Add overview over other approaches, plus a table reporting implementation status.  Add and resolve issue "nodep2183".  Add issues "asciivsiso", "deplboth", "quoted", and "registry".  </p>
<h1 id="rfc.appendix.Appendix E.3">
<a href="#rfc.appendix.Appendix%20E.3">Appendix E.3.</a> Since draft-reschke-rfc2183-in-http-02</h1>
<p id="rfc.section.Appendix E.3.p.1">Add and close issue "docfallback".  Close issues "asciivsiso", "deplboth", "quoted", and "registry".  </p>
<h1 id="rfc.appendix.Appendix E.4">
<a href="#rfc.appendix.Appendix%20E.4">Appendix E.4.</a> Since draft-reschke-rfc2183-in-http-03</h1>
<p id="rfc.section.Appendix E.4.p.1">Updated to be a Working Draft of the IETF HTTPbis Working Group.  </p>
<h1 id="rfc.appendix.Appendix E.5">
<a href="#rfc.appendix.Appendix%20E.5">Appendix E.5.</a> <a href="#changes.since.00" id="changes.since.00">Since draft-ietf-httpbis-content-disp-00</a>
</h1>
<p id="rfc.section.Appendix E.5.p.1">Closed issues: </p>

<ul><li>
<a href="http://tools.ietf.org/wg/httpbis/trac/ticket/242">http://tools.ietf.org/wg/httpbis/trac/ticket/242</a>: "handling of unknown disposition types" </li></ul>

<p> </p>
<p id="rfc.section.Appendix E.5.p.2">Slightly updated the notes about the proposed fallback behavior.  </p>
<h1 id="rfc.appendix.Appendix E.6">
<a href="#rfc.appendix.Appendix%20E.6">Appendix E.6.</a> <a href="#changes.since.01" id="changes.since.01">Since draft-ietf-httpbis-content-disp-01</a>
</h1>
<p id="rfc.section.Appendix E.6.p.1">Various editorial improvements.  </p>
<h1 id="rfc.appendix.Appendix E.7">
<a href="#rfc.appendix.Appendix%20E.7">Appendix E.7.</a> <a href="#changes.since.02" id="changes.since.02">Since draft-ietf-httpbis-content-disp-02</a>
</h1>
<p id="rfc.section.Appendix E.7.p.1">Closed issues: </p>

<ul>
<li>
<a href="http://tools.ietf.org/wg/httpbis/trac/ticket/244">http://tools.ietf.org/wg/httpbis/trac/ticket/244</a>: "state that repeating parameters are invalid" </li>
<li>
<a href="http://tools.ietf.org/wg/httpbis/trac/ticket/245">http://tools.ietf.org/wg/httpbis/trac/ticket/245</a>: "warn about %xx in filenames being misinterpreted" </li>
<li>
<a href="http://tools.ietf.org/wg/httpbis/trac/ticket/246">http://tools.ietf.org/wg/httpbis/trac/ticket/246</a>: "mention control chars when talking about postprecessing the filename parameter" </li>
</ul>

<p> </p>
<p id="rfc.section.Appendix E.7.p.2">Update <a href="#alternatives.implementations">Appendix Appendix C.4</a>; Opera 10.63 RC implements the recommended fallback behavior.  </p>
<h1 id="rfc.appendix.Appendix E.8">
<a href="#rfc.appendix.Appendix%20E.8">Appendix E.8.</a> <a href="#changes.since.03" id="changes.since.03">Since draft-ietf-httpbis-content-disp-03</a>
</h1>
<p id="rfc.section.Appendix E.8.p.1">Closed issues: </p>

<ul>
<li>
<a href="http://tools.ietf.org/wg/httpbis/trac/ticket/252">http://tools.ietf.org/wg/httpbis/trac/ticket/252</a>: "'modification-date' *is* implemented in Konq 4.5" </li>
<li>
<a href="http://tools.ietf.org/wg/httpbis/trac/ticket/253">http://tools.ietf.org/wg/httpbis/trac/ticket/253</a>: "clarify what LWS means for the Content-Disp grammar" </li>
<li>
<a href="http://tools.ietf.org/wg/httpbis/trac/ticket/258">http://tools.ietf.org/wg/httpbis/trac/ticket/258</a>: "Avoid passive voice in message requirements" </li>
<li>
<a href="http://tools.ietf.org/wg/httpbis/trac/ticket/263">http://tools.ietf.org/wg/httpbis/trac/ticket/263</a>: "text about historical percent-decoding unclear" </li>
<li>
<a href="http://tools.ietf.org/wg/httpbis/trac/ticket/264">http://tools.ietf.org/wg/httpbis/trac/ticket/264</a>: "add explanation of language tagging" </li>
<li>
<a href="http://tools.ietf.org/wg/httpbis/trac/ticket/265">http://tools.ietf.org/wg/httpbis/trac/ticket/265</a>: "Clarify that C-D spec does not apply to multipart upload" </li>
</ul>

<p> </p>
<h1 id="rfc.appendix.Appendix E.9">
<a href="#rfc.appendix.Appendix%20E.9">Appendix E.9.</a> <a href="#changes.since.04" id="changes.since.04">Since draft-ietf-httpbis-content-disp-04</a>
</h1>
<p id="rfc.section.Appendix E.9.p.1">Updated implementation information (Chrome 9 implements RFC 5987, IE 9 RC implements it for UTF-8 only).  </p>
<p id="rfc.section.Appendix E.9.p.2">Clarify who requirements are on, add a section discussing conformance and handling of invalid field values in general.  </p>
<p id="rfc.section.Appendix E.9.p.3">Closed issues: </p>

<ul>
<li>
<a href="http://trac.tools.ietf.org/wg/httpbis/trac/ticket/243">http://trac.tools.ietf.org/wg/httpbis/trac/ticket/243</a>: "avoid stating ISO-8859-1 default for header param" (the default is still mentioned, but it was clarified what it applies to).  </li>
<li>
<a href="http://tools.ietf.org/wg/httpbis/trac/ticket/272">http://tools.ietf.org/wg/httpbis/trac/ticket/272</a>: "Path Separator Characters" </li>
</ul>

<p> </p>
<h1 id="rfc.appendix.Appendix E.10">
<a href="#rfc.appendix.Appendix%20E.10">Appendix E.10.</a> <a href="#changes.since.05" id="changes.since.05">Since draft-ietf-httpbis-content-disp-05</a>
</h1>
<p id="rfc.section.Appendix E.10.p.1">Editorial changes: Fixed two typos where the new Conformance section said "Content-Location" instead of "Content-Disposition". Cleaned up terminology ("user agent", "recipient", "sender", "message body", ...). Stated what the escape character for quoted-string is. Explained a use case for "inline" disposition type. Updated implementation notes with respect to the fallback behavior.  </p>
<p id="rfc.section.Appendix E.10.p.2">Added appendix "Advice on Generating Content-Disposition Header Fields".  </p>
<h1 id="rfc.appendix.Appendix E.11">
<a href="#rfc.appendix.Appendix%20E.11">Appendix E.11.</a> <a href="#changes.since.06" id="changes.since.06">Since draft-ietf-httpbis-content-disp-06</a>
</h1>
<p id="rfc.section.Appendix E.11.p.1">Closed issues: </p>

<ul><li>
<a href="http://trac.tools.ietf.org/wg/httpbis/trac/ticket/278">http://trac.tools.ietf.org/wg/httpbis/trac/ticket/278</a>: "conformance language" </li></ul>

<p> </p>
<h1 id="rfc.appendix.Appendix E.12">
<a href="#rfc.appendix.Appendix%20E.12">Appendix E.12.</a> <a href="#changes.since.07" id="changes.since.07">Since draft-ietf-httpbis-content-disp-07</a>
</h1>
<p id="rfc.section.Appendix E.12.p.1">Rephrase the requirement about well-known file system locations, and also clarify that by "last path segment" we mean the actual filename.  Added a forward reference from "invalid" to the section that defines a valid header field.  </p>
<h1 id="rfc.authors"><a href="#rfc.authors">Author's Address</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Julian F. Reschke</span> 
	  <span class="n hidden">
		<span class="family-name">Reschke</span>
	  </span>
	</span>
	<span class="org vcardline">greenbytes GmbH</span>
	<span class="adr">
	  <span>Hafenweg 16</span>

	  <span class="vcardline">
		<span class="locality">Muenster</span>,  
		<span class="region">NW</span> 
		<span class="code">48155</span>
	  </span>
	  <span class="country-name vcardline">Germany</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:julian.reschke@greenbytes.de">julian.reschke@greenbytes.de</a></span>

<span class="vcardline">URI: <a href="http://greenbytes.de/tech/webdav/">http://greenbytes.de/tech/webdav/</a></span>

  </address>
</div>

</body>
</html>