Internet Engineering Task Force                            Juha Heinanen
INTERNET DRAFT                                             Telia Finland
Expires December 1999                                         June, 1999

                Differentiated Services in MPLS Networks
                 <draft-heinanen-diffserv-mpls-00.txt>

Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   Distribution of this memo is unlimited.

Abstract

   This document discusses how Differentiated Services can be provided
   in MPLS networks according to diffserv's native per-hop model, where
   aggregate forwarding resources are allocated in each LSRs for each
   supported diffserv forwarding class.

1. Introduction

   Differentiated Services are based on a per-hop model where aggregate
   forwarding resources (buffer space, bandwidth, scheduling policy) are
   allocated in each LSR for each diffserv forwarding class (for example
   AFi or EF).  This is in contrast with the traditional circuit
   switching model, where resources are allocated individually for each
   circuit on an end-to-end basis.

Heinanen        Differentiated Services in MPLS Networks        [Page 1]

INTERNET DRAFT                                                June, 1999

   In order to support the per-hop model, an MPLS network operator needs
   to allocate a set of aggregate forwarding resources for each
   supported diffserv forwarding class in each LSR.  In addition, the
   LSP setup message needs to indicate which diffserv forwarding
   class(es) an LSP belongs to.  This information can be is used as a
   constraint in the LSP route selection process and also in verifying
   that packets sent along an LSP belong to correct forwarding classes.

2. Single or Multi-Class LSPs

   If all MPLS packets that are sent along an LSP always belong to a
   single diffserv forwarding class, the LSP is a Single-Class LSP.  In
   this case there is no need to indicate in the Exp field of the MPLS
   packet header the forwarding class of each packet, because it can be
   derived from the label information.  The MPLS packet header may,
   however, indicate the drop precedence (if any) of the packet.  All
   packets of such a Single-Class LSP are at each hop assigned
   forwarding resources from the aggregate allocated to that particular
   forwarding class.

   If MPLS packets that are sent along an LSP may belong to more than
   one diffserv forwarding class, the LSP is a Multi-Class LSP.  In this
   case the service class of each packet (along with the possible drop
   precedence) needs to be indicated in the Exp field of the MPLS packet
   header.  Each MPLS packet of such a Multi-Class LSP is at each hop
   assigned forwarding resources from the aggregate that corresponds to
   the service class information in the MPLS packet header.  If the
   forwarding class of an MPLS packet is not among those listed in the
   corresponding LSP setup message, the packet is discarded.

   Each MPLS network decides which diffserv forwarding classes it wants
   to support and to how many forwarding classes a single LSP may belong
   to.  It may be possible to map at an MPLS network or at an underlying
   subnetwork boundary a Multi-Class LSP to more than one Single or
   Multi- -Class LSP and vice versa, but details of such mappings are
   outside the scope of this document.

3. Mapping MPLS Packets to Forwarding Classes

   When an LSR receives an MPLS packet, it needs to be able to associate
   the packet with a particular diffserv forwarding class and/or drop
   precedence.  For that purpose, each LSR needs to be configured for
   each LSP with a list of supported

      Exp field value => (FCI value, DPI value)

   mappings, where the FCI (Forwarding Class Indicator) value indicates
   a diffserv forwarding class and the DPI (Drop Precedence Indicator)

Heinanen        Differentiated Services in MPLS Networks        [Page 2]

INTERNET DRAFT                                                June, 1999

   value indicates a level of drop precedence.  The Exp field values are
   likely to be MPLS network specific, whereas the FCI and DPI values
   could be either globally unique or MPLS network specific.

4. Signaling Requirements

   As indicated above, signaling support for Multi-Class LSPs requires
   that LSP setup messages contain a list of diffserv FCIs.  If the FCI
   values are MPLS network specific, they need to be mapped at MPLS
   network boundaries.

5. Security Concerns

   Security concerns are not discussed in this version of the document.

6. Author Addresses

   Juha Heinanen
   Telia Finland, Inc.
   Myyrmaentie 2
   01600 Vantaa, Finland
   Email: jh@telia.fi

Heinanen        Differentiated Services in MPLS Networks        [Page 3]
