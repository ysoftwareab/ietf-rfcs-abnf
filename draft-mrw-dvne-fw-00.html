<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Dynamic Virtual Network Engine 
(DVNE) Framwork</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Dynamic Virtual Network Engine 
(DVNE) Framwork">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">M. Wasserman</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Painless Security</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">P. Nallur</td></tr>
<tr><td class="header">Expires: April 21, 2011</td><td class="header">Futurewei Technologies</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">October 18, 2010</td></tr>
</table></td></tr></table>
<h1><br />Dynamic Virtual Network Engine 
(DVNE) Framwork<br />draft-mrw-dvne-fw-00.txt</h1>

<h3>Abstract</h3>

<p>
This document discusses the management and configuration requirements
for large Virtual Networks (VNs). VNs are private networks that employ
tunneling technologies to overlay private network links over physical IP
networks.
      
</p>
<p>
As VNs grow, the amount of administrative effort required to manually
configure virtual nodes and to set up the required tunnels becomes
prohibitive.  The DVNE protocol automates this process, elminating
much of the administrative work involved in setting up a virtual
network.
       
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on April 21, 2011.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#anchor2">2.</a>&nbsp;
Applicability<br />
<a href="#anchor3">3.</a>&nbsp;
Problem Statement<br />
<a href="#anchor4">4.</a>&nbsp;
Terminology<br />
<a href="#anchor5">5.</a>&nbsp;
DVNE Model<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">5.1.</a>&nbsp;
Mediator<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">5.2.</a>&nbsp;
VN Nodes<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">5.3.</a>&nbsp;
Using DVNE Service<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">5.4.</a>&nbsp;
VN Address Assignment<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">5.5.</a>&nbsp;
Tunnel Establishment<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">5.6.</a>&nbsp;
Next Hop Determination<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">5.7.</a>&nbsp;
Interaction Between DVNE Entities<br />
<a href="#anchor13">6.</a>&nbsp;
Security Considerations<br />
<a href="#anchor14">7.</a>&nbsp;
IANA Considerations<br />
<a href="#anchor15">8.</a>&nbsp;
Acknowledgements<br />
<a href="#rfc.references1">9.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">9.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">9.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
This document discusses the management and configuration requirements
for large Virtual Networks (VNs). VNs are private networks that employ
tunneling technologies to overlay private network links over physical
IP networks.
      
</p>
<p>
As VNs grow, the amount of administrative effort required to manually
configure virtual nodes, and to set up the required tunnels, becomes
prohibitive.  The DVNE protocol automates this process, eliminating
much of the administrative work involved in setting up a virtual
network.
       
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Applicability</h3>

<p>
IPsec <a class='info' href='#RFC4301'>[RFC4301]<span> (</span><span class='info'>Kent, S. and K. Seo, &ldquo;Security Architecture for the Internet Protocol,&rdquo; December&nbsp;2005.</span><span>)</span></a> site-to-site VPNs
<a class='info' href='#RFC3809'>[RFC3809]<span> (</span><span class='info'>Nagarajan, A., &ldquo;Generic Requirements for Provider Provisioned Virtual Private Networks (PPVPN),&rdquo; June&nbsp;2004.</span><span>)</span></a> are widely deployed in enterprise
networks. IPsec gateways located anywhere on the Internet are virtual
network nodes which are responsible for initiating/terminating IPsec
tunnels and encapsulating/decapsulating IPsec packets. Every IPsec
gateway should be configured with the addresses of the gateway(s) to
be tunneled to and the parameters pertaining to the tunnel. It might
be configured with the routing protocol(s) to be used after the tunnel
has been established and any other configuration needed for virtual
network connectivity. As the number of such gateways increases, the
scalability issues would arise. When an IPsec gateway join or leave,
the configuration of each gateway would be updated.
      
</p>
<p>
Some people and companies have very dynamic networking needs. Small or
medium size companies might find the IT costs of deploying a complete
VPN infrastructure could not be justified. They may have their access
device(s) connected to the Internet via xDSL or the ISP deploys CGN
[I-D. nishitani-cgn] in its networks. It is challenging to manually
configure these access devices as virtual network nodes to construct a
virtual network, since they have dynamic addresses and imposed on some
communication constraints (by CGN). Such dynamic nature might also
apply to an individual person or a family. A person might like to
access his home network which might locate behind NAT devices from
anywhere over the Internet by auto-configuring his home gateway and
handset for media sharing.
      
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Problem Statement</h3>

<p>
Constructing a virtual network traversing physical IP networks
encounters 2 major problems:
        </p>
<ul class="text">
<li>
When the size of virtual networks grows, the configuration and
management burden is overwhelming. For example, when a virtual network
node joins a virtual network, the needed parameters should be
provisioned to the new comer, and changes would be propagated to the
existing virtual network nodes.
           
</li>
<li>
The dynamic natural of virtual networks, such as addresses assigned
dynamically to virtual network nodes for the Internet connection,
would make static configuration and manual configuration impossible.
           
</li>
</ul><p>
      
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Terminology</h3>

<p>
          </p>
<ul class="text">
<li>
Virtual Network (VN): an overlay network connecting VN nodes based on
physical networks along with the edge networks to which VN nodes
attach.
            
</li>
<li> 
DVNE: An approach to configure and manage virtual networks
based on the provision of dedicated servers, called Mediators.
            
</li>
<li>
Mediator: Functional element of DVNE. Servers for configuring and
managing VNs. The administrator(s) can configure with the Mediator VN
construction policy and the Mediator in turn configure with the
designated or qualified VN nodes.
            
</li>
<li>
VN node: Functional element of DVNE. The node connected to the Internet
which is responsible for initialing/terminating tunnels or
encapsulating/decapsulating encapsulated packets. All VN nodes
belonging to the same VN form an overlay network. VN node can connect
to edge networks to the overlay network.
            
</li>
</ul><p>
        
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
DVNE Model</h3>

<p>
DVNE Mediators are configuration managers that help configure virtual
network connectivity to virtual network nodes already connected to the
Internet. The Mediator may be a server or a cluster. For discovery
purpose, the DNS names or addresses of the Mediator could be
pre-configured, referenced on web pages, provisioned via DHCP
<a class='info' href='#RFC2131'>[RFC2131]<span> (</span><span class='info'>Droms, R., &ldquo;Dynamic Host Configuration Protocol,&rdquo; March&nbsp;1997.</span><span>)</span></a><a class='info' href='#RFC3315'>[RFC3315]<span> (</span><span class='info'>Droms, R., Bound, J., Volz, B., Lemon, T., Perkins, C., and M. Carney, &ldquo;Dynamic Host Configuration Protocol for IPv6 (DHCPv6),&rdquo; July&nbsp;2003.</span><span>)</span></a> or DNS lookup.
        
</p>
<p>
The DVNE model is based on the set of functional elements depicted in
figure 1.
        
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


                      +----------+
                      | Mediator |
                      +----------+
                        /      \
                       /        \
                      /          \
            +---------+          +---------+
            | VN Node |&lt;========&gt;| VN Node |
            +---------+          +---------+
                 |
            ------------
           /            \
          | Edge Network |
           \            /
            ------------

              Figure 1: Simple DVNE configuration


</pre></div>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Mediator</h3>

<p>
The Mediator is the place where the VN nodes connect to register and
activate their presence in the virtual network. The mediator
configures with VN nodes the necessary parameters for creating,
modifying or deleting a virtual network either automatically or by
request.
        
</p>
<p>
A Mediator must be IPv4 addressable. It must be reached by all VN
nodes (i.e., without NAT traversal needed).
        
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
VN Nodes</h3>

<p>
VN nodes function in the virtual network as routers or hosts. If a VN
node is a VN router, it is followed by an edge network consisting of
one or more physical hosts. After the configuration order is received
from the Mediator, the VN node set up tunnels, exchange routing
information and data forwarding, etc. accordingly.
        
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
Using DVNE Service</h3>

<p>
Administrators configure parameters for VN construction with the
Mediator instead of going to every single VN node. The configuration
between the admin and the Mediator can be achieved by interactive
commands, Web pages or any other alternative means. The configuration
parameters may contain the topology of the overlay network (i.e.,
hub-and-spokes or hub), the function type of specific VN nodes (i.e.,
router or host), the tunneling method (e.g., IPsec), the routing
protocols (e.g., OSPF) or routing lookup method (e.g., via DNS
lookup), etc. The Mediator will configure each VN node accordingly
when the VN node registers. We called this process as administrative
configuration.
        
</p>
<p>
Approaching the Mediator, the VN node should be asked first of all to
provide its identity and credentials so that proper user
authentication, authorization and accounting can be carried out (e.g.,
relying on existing AAA facilities such as RADIUS). This means the VN
node and the Mediator have to share a pre-configured or automatically
established security association to be used to prevent unauthorized
use of the service. With this respect the Mediator can be seen as an
access-control server for VN nodes.
        
</p>
<p>
After successful authentication, the VN node may register further
information with the Mediator such as the IP address to which it is
attaching and/or request such as function type it would like (i.e.,
router or host), etc. In response, the Mediator configures the VN node
according to administrative configuration and the request if
exists. The configuration may contain the addresses of any other VN
nodes (which might be registered by the corresponding VN nodes in
advance), the tunneling method (e.g., IPsec), the routing protocols
used upon established tunnels or routing lookup method (e.g., name
service lookup) used for next-hop determination, etc.
        
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.4"></a><h3>5.4.&nbsp;
VN Address Assignment</h3>

<p>
IP address should be assigned to the VN nodes and any edge network
they connect. Automatic addressing, e.g., DHCP is recommended in this
case not only because it is automatic but also it helps avoid
addressing conflict if used well. Besides, the address allocation
record can be used for next-hop determination when routing protocol is
not used.
        
</p>
<p>
The lifetime of these dynamically assigned VN addresses should be
relatively long and potentially longer than the lifetime of the
connection of the VN nodes to the Mediator. This is to allow the VN
node to get semipermanent VN addresses even though it gets dynamically
assigned IPv4 addresses through DHCP for access to the Internet.
        
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.5"></a><h3>5.5.&nbsp;
Tunnel Establishment</h3>

<p>
The Mediator configures a VN node with adequate information to create
tunnels. E.g., it may provide a VN node the address of another VN node
it attempts to tunnel to, the tunneling method (and encapsulation
options). The Mediator may provide extra information in aid of tunnel
setup authentication. E.g., it may relay fingerprint of certificates
for each other <a class='info' href='#RFC4572'>[RFC4572]<span> (</span><span class='info'>Lennox, J., &ldquo;Connection-Oriented Media Transport over the Transport Layer Security (TLS) Protocol in the Session Description Protocol (SDP),&rdquo; July&nbsp;2006.</span><span>)</span></a>.
        
</p>
<p>
DVNE at this stage only considers the case where all VN nodes attach
to the same virtual link, i.e., a VN node can reach each other VN node
in the virtual network in one-hop. There are two major topologies to
consider for overlay networks. In the hub-and-spokes case, the spoke
nodes should be configured with hub nodes’ address. In the mesh case,
each node should be configured with other nodes’ address.
        
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


                      +-----------+
                      | Mediator  |
                      +-----------+
                       |    |    |
                  -----+    |    +-----
                 /          |          \
        +---------+    +---------+    +---------+
        | VN Node |&lt;==&gt;| VN Node |&lt;==&gt;| VN Node |
        +---------+    +---------+    +---------+
             |
       ------------
      /            \
     | Edge Network |
      \            /
       ------------

              Figure 2: Hub and Spoke Topology


                      +-----------+
                      | Mediator  |
                      +-----------+
                       |    |    |
                -------+    |    +-------
               /            |            \
              /        +---------+        \
             |    ===&gt; | VN Node |&lt;===     |
             |  //     +---------+    \\   |
             |  V                      V   |
       +---------+                    +---------+
       | VN Node |&lt;==================&gt;| VN Node |
       +---------+                    +---------+
             |
       ------------
      /            \
     | Edge Network |
      \            /
       ------------

              Figure 3: Mesh Topology


</pre></div>
<p>
Things get complicated if one or both VN nodes are behind NAT
devices. The registered address when a VN node logs in may be
meaningless for other VN nodes if the VN node is behind NAT devices
whatever the VN node wants to connect to or connected by another VN
node. In that case, the Mediator may configure STUN and/or TURN
servers’ addresses to a VN node and coordinate with ICE to work out
the effective or efficient address pairs for
connectivity. [I-D. saito-mmusic-sdp-ike] presents an alternative
approach for IKE/IPsec tunnels establishment with NAT traversal using
SIP/SDP model.
        
</p>
<p>
Tunneling configuration adjust to NAT traversal. E.g., when NAT
devices comes in between, UDP encapsulation of IPsec tunneling
<a class='info' href='#RFC3948'>[RFC3948]<span> (</span><span class='info'>Huttunen, A., Swander, B., Volpe, V., DiBurro, L., and M. Stenberg, &ldquo;UDP Encapsulation of IPsec ESP Packets,&rdquo; January&nbsp;2005.</span><span>)</span></a> is preferred whereas TLS tunneling is
preferred without the presence of NAT.
        
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.6"></a><h3>5.6.&nbsp;
Next Hop Determination</h3>

<p>
Routing protocols could be used for the virtual network routing after
tunnels have been established. When routing protocols are not
available or too costly, other alternatives should be considered. In
hub-and-spokes case, the Mediator would configure the spokes nodes
with a default route to the hub node. In mesh case, the Mediator would
configure each node with routes to other nodes and update the routes
over time. Instead, VN nodes can request routes from the Mediator or
DNS name servers when they are ready to forward VN packets (in which
case, the address of these DNS servers should be configured in
advance). The tunnels can be established as described above before or
after the routes have been configured.
        
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.7"></a><h3>5.7.&nbsp;
Interaction Between DVNE Entities</h3>

<p>
The definition of a specific set of protocols and procedures to be
used for the communication among the various entities in the DVNE
architecture is outside of the scope of the present framework
document. Nevertheless, in the reminder of this section some viable
technical alternatives to support admin-Mediator, Mediator-node, and
node-node interaction are briefly described in order to help future
implementation efforts or standardization initiatives.
        
</p>
<p>
The administrator could configure parameters for VN construction with
the Mediator via SSH, HTTP, SNMP, NETCONF or any other alternate
methods. All the se methods are secure.
        
</p>
<p>
A VN node should register some information (e.g., its addresses)
and/or request configuration to the Mediator. In response, the
Mediator should configure the VN node with addressing, routing,
tunneling, etc. The Mediator may configure the VN node with STUN/TURN
server’s address if the VN node is behind NAT device(s). In that case,
both VN nodes and the Mediator may be integrated with ICE mechanism to
achieve NAT traversal. Other than the VN related configuration and
policies, the Mediator may relay referrals to two VN nodes that are
willing to setup tunnels with each other for better
connectivity. [I-D. carpenter-behave-referral-object] tries to
standardize a generic referral objects and GROBJ BoF at this writing
time is undertaking related tasks.
        
</p>
<p>
When two VN nodes choose a pair of addresses for connectivity, one
node can initiate a tunnel to the other node according to the
administrative configuration or request. DVNE assumes the tunnel
method is IPsec All the interaction between the functional elements of
the proposed architecture need to be secured:
      </p>
<ul class="text">
<li>
The interaction between the Mediator and the administrator; 
        
</li>
<li>
The interaction between a VN node and the Mediator;
        
</li>
<li>
The interaction between VN nodes.
        
</li>
</ul><p>
      
</p>
<p>
The Mediator should impose a strong method to authenticate the
administrator, for example, using X.509 certificate issued by a
trusted Certification Authority. The configuration data between the
Mediator and the administrator usually exchange in an interactive
mode, SSH, TLS or any other alternative means can protect the
integrity and confidentiality of the configuration data.
      
</p>
<p>
The Mediator should impose a strong or moderate method to authenticate
the VN node and let the authorized VN node join the VN. A moderate
method could be using TLS as secure tunnel and using username/password
method to do actual authentication since X.509 certificate might be
costly in some circumstances. The integrity and confidentiality can be
achieved by using TLS or any other alternative means to protect the
data.
      
</p>
<p>
The VN nodes use tunneling technologies which are out of the scope of
this document should accommodate NAT traversal. For example, UDP
encapsulation of ESP would be used for IPsec works in the presence of
NAT. for tunneling authentication, the Mediator can act as a proxy to
relay the authentication credentials or share pre-secret or distribute
session key for tunneled data encap/decap. The security for tunneled
data is dependent on which tunnel technology you used. Security issues
for tunnels are addressed in specific tunneling specification or
relevant documents and out of the scope of this doc.
      
</p>
<p>
Finally, the Mediator must implement protections against denial of
service attacks which may occur whenever a malicious user exhausts all
the resources available on the Mediator. A possible protection against
this attack could be achieved by administratively limiting the VN
scale and the number of VNs supported simultaneously.tunnel and IPsec
tunnel over UDP (when NAT traversal is needed). Other alternatives
like SSL, L2TP, GRE should be considered later.
      
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Security Considerations</h3>

<p>
All the interaction between the functional elements of the proposed architecture need to be secured:
        </p>
<ul class="text">
<li>
The interaction between the Mediator and the administrator;
          
</li>
<li>
The interaction between a VN node and the Mediator;
          
</li>
<li>
The interaction between VN nodes.
          
</li>
</ul><p>
      
</p>
<p>
The Mediator should impose a strong method to authenticate the
administrator, for example, using X.509 certificate issued by a
trusted Certification Authority. The configuration data between the
Mediator and the administrator usually exchange in an interactive
mode, SSH, TLS or any other alternative means can protect the
integrity and confidentiality of the configuration data.
      
</p>
<p>
The Mediator should impose a strong or moderate method to authenticate
the VN node and let the authorized VN node join the VN. A moderate
method could be using TLS as secure tunnel and using username/password
method to do actual authentication since X.509 certificate might be
costly in some circumstances. The integrity and confidentiality can be
achieved by using TLS or any other alternative means to protect the
data.
      
</p>
<p>
The VN nodes use tunneling technologies which are out of the scope of
this document should accommodate NAT traversal. For example, UDP
encapsulation of ESP would be used for IPsec works in the presence of
NAT. for tunneling authentication, the Mediator can act as a proxy to
relay the authentication credentials or share pre-secret or distribute
session key for tunneled data encap/decap. The security for tunneled
data is dependent on which tunnel technology you used. Security issues
for tunnels are addressed in specific tunneling specification or
relevant documents and out of the scope of this doc.
      
</p>
<p>
Finally, the Mediator must implement protections against denial of
service attacks which may occur whenever a malicious user exhausts all
the resources available on the Mediator. A possible protection against
this attack could be achieved by administratively limiting the VN
scale and the number of VNs supported simultaneously.
      
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
IANA Considerations</h3>

<p>
There are no IANA considerations for this document.
      
</p>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Acknowledgements</h3>

<p>
This document was written using the xml2rfc tool described in RFC 2629
<a class='info' href='#RFC2629'>[RFC2629]<span> (</span><span class='info'>Rose, M., &ldquo;Writing I-Ds and RFCs using XML,&rdquo; June&nbsp;1999.</span><span>)</span></a>.
      
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2131">[RFC2131]</a></td>
<td class="author-text"><a href="mailto:droms@bucknell.edu">Droms, R.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2131">Dynamic Host Configuration Protocol</a>,&rdquo; RFC&nbsp;2131, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2131.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2131.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2131.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3315">[RFC3315]</a></td>
<td class="author-text">Droms, R., Bound, J., Volz, B., Lemon, T., Perkins, C., and M. Carney, &ldquo;<a href="http://tools.ietf.org/html/rfc3315">Dynamic Host Configuration Protocol for IPv6 (DHCPv6)</a>,&rdquo; RFC&nbsp;3315, July&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3315.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3809">[RFC3809]</a></td>
<td class="author-text">Nagarajan, A., &ldquo;<a href="http://tools.ietf.org/html/rfc3809">Generic Requirements for Provider Provisioned Virtual Private Networks (PPVPN)</a>,&rdquo; RFC&nbsp;3809, June&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3809.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3948">[RFC3948]</a></td>
<td class="author-text">Huttunen, A., Swander, B., Volpe, V., DiBurro, L., and M. Stenberg, &ldquo;<a href="http://tools.ietf.org/html/rfc3948">UDP Encapsulation of IPsec ESP Packets</a>,&rdquo; RFC&nbsp;3948, January&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc3948.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4301">[RFC4301]</a></td>
<td class="author-text">Kent, S. and K. Seo, &ldquo;<a href="http://tools.ietf.org/html/rfc4301">Security Architecture for the Internet Protocol</a>,&rdquo; RFC&nbsp;4301, December&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4301.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4572">[RFC4572]</a></td>
<td class="author-text">Lennox, J., &ldquo;<a href="http://tools.ietf.org/html/rfc4572">Connection-Oriented Media Transport over the Transport Layer Security (TLS) Protocol in the Session Description Protocol (SDP)</a>,&rdquo; RFC&nbsp;4572, July&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4572.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2629">[RFC2629]</a></td>
<td class="author-text"><a href="mailto:mrose@not.invisible.net">Rose, M.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2629">Writing I-Ds and RFCs using XML</a>,&rdquo; RFC&nbsp;2629, June&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2629.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2629.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2629.xml">XML</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Margaret Wasserman</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Painless Security</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">356 Abbott Street</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">North Andover, MA  01845</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 781 405 7464</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:mrw@painless-security.com">mrw@painless-security.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.painless-security.com">http://www.painless-security.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Padmanabha Nallur</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Futurewei Technologies</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">3255-4, Scott Blvd</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Santa Clara, California</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:pnallur@huawei.com">pnallur@huawei.com</a></td></tr>
</table>
</body></html>
