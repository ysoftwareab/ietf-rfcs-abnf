

NEMO Working Group                                                H. Cho
Internet-Draft                                                E. K. Paik
Expires: July 13, 2004                         Seoul National University
                                                        January 13, 2004


  Hierarchical Mobile Router Advertisement for nested mobile networks
                      <draft-cho-nemo-hmra-00.txt>


Status of this Memo

     This document is an Internet-Draft and is in full conformance with
     all provisions of Section 10 of RFC2026.

     Internet-Drafts are working documents of the Internet Engineering
     Task Force (IETF), its areas, and its working groups. Note that
     other groups may also distribute working documents as Internet-
     Drafts.

     Internet-Drafts are draft documents valid for a maximum of six
     months and may be updated, replaced, or obsoleted by other
     documents at any time. It is inappropriate to use Internet-Drafts
     as reference material or to cite them other than as "work in
     progress."

     The list of current Internet-Drafts can be accessed at
     http://www.ietf.org/ietf/1id-abstracts.txt

     The list of Internet-Draft Shadow Directories can be accessed at
     http://www.ietf.org/shadow.html.


Copyright Notice

     Copyright (C) The Internet Society (2003). All Rights Reserved.



Abstract

     This document describes needs for hierarchical mobile router
     advertisement for nested mobile networks. When ingress and egress
     interfaces of a Mobile Router are both wireless, the MR cannot
     distinguish the Router Advertisement of the parent MR from the RA
     of the child MR. To maintain hierarchical information of wireless
     nested mobile networks, RA message needs to be extended to deliver
     additional information for hierarchy.








Cho, Paik                     July 13, 2004                    [Page 1]

INTERNET-DRAFT  Hierarchical Mobile Router Advertisement   Jan. 13, 2004


Table of Contents

     1. Introduction . . . . . . . . . . . . . . . . . . . . . . . . 2

     2. Terms and Abbreviations. . . . . . . . . . . . . . . . . . . 3

     3. Router Advertisement (RA) Confliction problem .br
          in nested mobile networks. . . . . . . . . . . . . . . . . 3

     4. Hierarchical Mobile Router Advertisement (HMRA). . . . . . . 4
     4.1. Router Advertisement Message Format. . . . . . . . . . . . 4
     4.2. Hierarchy management . . . . . . . . . . . . . . . . . . . 5

     5. Security Considerations. . . . . . . . . . . . . . . . . . . 6

     6. Acknowledgements . . . . . . . . . . . . . . . . . . . . . . 6

     References. . . . . . . . . . . . . . . . . . . . . . . . . . . 6

     Authors' Addresses. . . . . . . . . . . . . . . . . . . . . . . 7



1. Introduction

     This document proposes the Router Advertisement mechanism called
     Hierarchical Mobile Router Advertisement (HMRA) for nested mobile
     networks.  Mobile network is a network that the entire network
     moves as a single unit and includes one or more mobile routers
     (MRs) that connect it to the global Internet [1].  Mobile routers
     use Mobile IPv6 protocol to broadcast Router Advertisement message.
     Mobile Network Nodes (MNNs) under an MR can configure their address
     and know the connectivity to the MR by listening the RA. Personal
     Area Network (PAN) and Vehicle Area Network (VAN) connected to the
     Internet are examples of mobile network.  Furthermore, PANs in a
     vehicle are also possible and this situation is referred to as a
     nested mobile network.

     Nested mobile networks contain MRs that are not directly attached
     to the Internet (i.e. connected to the Internet via another MR). In
     the case of nested mobile network, MRs also use Mobile IPv6 RA
     mechanism. MRs have ingress and egress interfaces, and each
     interface can be wired or wireless. If an MR uses wired ingress
     interface, the RA of the MR is delivered to only nodes connected by
     wire.  But if an MR uses wireless ingress interfaces, all nodes in
     its coverage receive the RA of the MR.  So when a parent MR has
     wireless egress interface and a child MR has wireless egress
     interface, the parent MR can listen to the RA of the child MR. This
     situation is called "RA Confliction".







Cho, Paik                     July 13, 2004                    [Page 2]

INTERNET-DRAFT  Hierarchical Mobile Router Advertisement   Jan. 13, 2004


2. Terms and Abbreviations

     Age
         Age is defined as decreasing value by the distance from AR.

     Visiting Mobile Node (VMN)
         A mobile node (MN), either a host or a router who can move
         topologically with respect to the MR and whose home link
         doesn't belong to the mobile network. A VMN that gets
         attached to a foreign link within the mobile network
         obtains an address on that link. [2]



3. Router Advertisement (RA) Confliction problem

     When egress and ingress interfaces of an MR are both wireless,
     nested mobile networks have Router Advertisement (RA) confliction
     problem.  When MRs form nested mobile networks, an MR receives RA
     of the child MR as well as the parent MR for the open
     characteristics of wireless interface.  But the MR cannot
     distinguish which MR is its parent.  Figure 1 shows the RA
     confliction problem. With existing RA scheme [3], MR2 receives both
     RAs of MR1 and MR3. So MR2 may think it is under MR3.  And in this
     situation if MR2 wants to send data to the outside of mobile
     network, the packets cannot be routed correctly.





       +-----+
       | AR  |    Age = max_age      max_age      max_age      max_age
       +-----+
          |
       +-----+
       | MR1 |    Age = 0            max_age-1    max_age-1    max_age-1
       +-----+
         |
       +-----+
       | MR2 |    Age = 0            0            max_age-2    max_age-2
       +-----+
            |
       +-----+
       | MR3 |    Age = 0            0            0            max_age-3
       +-----+

       Figure 1. RA Confliction problem

     RA confliction problem occurs since MRs and ARs broadcast RA
     messages simultaneously.  Thus, additional information is needed in
     RA message for the management of hierarchy between MRs.




Cho, Paik                     July 13, 2004                    [Page 3]

INTERNET-DRAFT  Hierarchical Mobile Router Advertisement   Jan. 13, 2004


4. Hierarchical Mobile Router Advertisement (HMRA)


     To solve the RA confliction problem of nested mobile networks this
     document proposes hierarchical architecture of RA, HMRA.  HMRA is
     based on the information of hierarchy.  For the purpose of
     hierarchical management, we employ a field for age in the RA
     message.  Initially Access Router (AR) has age of maximum value and
     MRs have age of zero.  The maximum value of age means the maximum
     depth of hierarchy.

     When an MR receives an RA with an age value, the MR compares
     received age with its own age.  So if the received age is less than
     or equal to its own age, the MR just ignores the RA.  And if
     received age is bigger than its own age, the MR sets its own age to
     smaller age than the received age by one. So each MR can construct
     the parent-child relationship by using this age information. When
     an MR moved to other network, we can know the movement by the
     change of Care-of Address (CoA). So whenever an MR changes its
     point of attachment, the MR re-initializes its age to zero and re-
     calculates its age again using new RA.


4.1. Router Advertisement Message Format


     Figure 2 shows the RA message format with age field.

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |     Type      |     Code      |          Checksum             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | Cur Hop Limit |M|O| Age |Rsvd |       Router Lifetime         |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                         Reachable Time                        |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                          Retrans Timer                        |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |   Options ...
      +-+-+-+-+-+-+-+-+-+-+-+-

         Figure 2. Router Advertisement message with "Age" field

     ICMP Fields:

     Type           134

     Code           0

     Checksum       The ICMP checksum.  See [4].





Cho, Paik                     July 13, 2004                    [Page 4]

INTERNET-DRAFT  Hierarchical Mobile Router Advertisement   Jan. 13, 2004


     Cur Hop Limit  8-bit unsigned integer.  The default value that
                    should be placed in the Hop Count field of the IP
                    header for outgoing IP packets.  A value of zero
                    means unspecified (by this router).

     M              1-bit "Managed address configuration" flag.  When
                    set, hosts use the administered (stateful) protocol
                    for address autoconfiguration in addition to any
                    addresses autoconfigured using stateless address
                    autoconfiguration.  The use of this flag is
                    described in [5].

     O              1-bit "Other stateful configuration" flag.  When
                    set, hosts use the administered (stateful) protocol
                    for autoconfiguration of other (non-address)
                    information.  The use of this flag is described in
                    [5].

     Age            3-bit "Age" field for HMRA. Initially Access Router
                    has age of maximum value and MRs have age of zero.

     Rsvd           A 3-bit unused field. It MUST be initialized
                    to zero by the sender and MUST be ignored by the
                    receiver.

     Router Lifetime
                    16-bit unsigned integer.  The lifetime associated
                    with the default router in units of seconds.  The
                    maximum value corresponds to 18.2 hours.  A
                    Lifetime of 0 indicates that the router is not a
                    default router and SHOULD NOT appear on the default
                    router list.

     Reachable Time 32-bit unsigned integer.  The time, in
                    milliseconds, that a node assumes a neighbor is
                    reachable after having received a reachability
                    confirmation. A value of zero means unspecified
                    (by this router).

     Retrans Timer  32-bit unsigned integer.  The time, in
                    milliseconds, between retransmitted Neighbor
                    Solicitation messages. A value of zero means
                    unspecified (by this router).




4.2. Hierarchy management


     When an MR moves to the same level of other nested mobile network,
     the MR sets its age to zero and listens RA from neighbor MRs.  If




Cho, Paik                     July 13, 2004                    [Page 5]

INTERNET-DRAFT  Hierarchical Mobile Router Advertisement   Jan. 13, 2004


     the MR receives RA from the child MR before it receives from the
     parent MR, the MR thinks that the child MR is the parent. But after
     the MR receives RA of the parent MR, the MR corrects its age.  When
     an N-level MR moves to an (N-1)-level mobile network, the MR
     receives bigger or the same age of RA from neighbor MRs. In this
     case re-initializing of age is not necessary.  The MR just ignores
     the RA of the same age and accepts the RA of bigger age and set its
     age to smaller age than received age by one.  When an N-level MR
     moves to an (N+1)-level mobile network, the MR sets its age to zero
     and listens to RA from the neighbor MRs.  The next procedures are
     the same as the two cases above.



5. Security Considerations

     When a malicious MR broadcast RA with the maximum age, hierarchy of
     nested mobile network can be confused.



6. Acknowledgements

     This work was supported in part by the Brain Korea 21 project of
     the Ministry of Education, and in part by the National Research
     Laboratory project of the Ministry of Science and Technology,
     Korea.

     The authors would like to thank people who have given valuable
     comments on various nested mobile network issues on the mailing
     list.


References

     [1]   Vijay Devarapalli, Ryuji Wakikawa, Alexandru Petrescu,
           and Pascal Thubert, "Nemo Basic Support Protocol",
           draft-ietf-nemo-basic-support-01.txt, September 2003,
           work in progress.

     [2]   Thierry Ernst, and Hong-Yon Lach,
           "Network Mobility Support Terminology",
           draft-ietf-nemo-terminology-00.txt, May 2003,
           work in progress.

     [3]   T. Narten, E. Nordmark, and W. Simpson,
           "Neighbor Discovery for IP Version 6", RFC2461,
           December 1998.

     [4]   Conta, A. and S. Deering,
           "Internet Control Message Protocol (ICMPv6)
           for the Internet Protocol Version 6 (IPv6) Specification",




Cho, Paik                     July 13, 2004                    [Page 6]

INTERNET-DRAFT  Hierarchical Mobile Router Advertisement   Jan. 13, 2004


           RFC 2463, December 1998.

     [5]   Thomson, S. and T. Narten, "IPv6 Address Autoconfiguration",
           RFC 2462, December 1998.



Authors' Addresses

  Hosik Cho
  Multimedia and Computer Communications Lab.
  Seoul National University
  ENG4190, School of Electronic Engineering and Computer Science
  Seoul National University
  Seoul 151-744, Korea

  Phone: +82 2 880 1832
  Fax: +82 2 872 2045
  EMail: hscho@mmlab.snu.ac.kr

  Eun Kyoung Paik
  Multimedia and Computer Communications Lab.
  Seoul National University
  ENG4190, School of Electronic Engineering and Computer Science
  Seoul National University
  Seoul 151-744, Korea

  Phone: +82 2 880 1832
  Fax: +82 2 872 2045
  EMail: eun@mmlab.snu.ac.kr


























Cho, Paik                     July 13, 2004                    [Page 7]


