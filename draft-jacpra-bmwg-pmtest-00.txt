


Network Working Group                       Sudhin Jacob 
Internet Draft                              Praveen Ananthasankaran
Intended Status: Informational              Juniper Networks  
Expires: July 22, 2016                       January 29,2016
                                                  

          Benchmarking Performance Monitoring on a DUT
       	draft-jacpra-bmwg-pmtest-00   
				

				
Abstract

This draft is proposed for benchmarking the Y1731  performance
monitoring on DUT in various scenarios.



Status of This Memo

 This Internet-Draft is submitted in full conformance with the
provisions of BCP 78 and BCP 79.

Internet-Drafts are working documents of the Internet Engineering Task
Force (IETF), its areas, and its working groups.  Note that other
groups may also distribute working documents as Internet-Drafts.     


Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at
any time.  It is inappropriate to use Internet-Drafts as
reference material or to cite them other than as "work in
progress."

The list of current Internet-Drafts can be accessed at
http://www.ietf.org/1id-abstracts.html

The list of Internet-Draft Shadow Directories can be accessed at
http://www.ietf.org/shadow.html

This Internet-Draft will expire on July 22, 2016.


Copyright Notice

Copyright (c) 2016 IETF Trust and the persons identified as the
document authors. All rights reserved.

IETF Trust Legal Provisions of 28-dec-2009, Section 6.b(ii), paragraph 3:
This document is subject to BCP 78 and the IETF Trust's Legal Provisions
Relating to IETF Documents (http://trustee.ietf.org/license-info)
in effect on the date of publication of this document.  Please
review these documents carefully, as they describe your rights
 and restrictions with respect to this document.
 
 Relating to IETF Documents (http://trustee.ietf.org/license-info)
in effect on the date of publication of this document. Please
review these documents carefully, as they describe your rights
and restrictions with respect to this document. Code Components
extracted from this document must include Simplified BSD License
text as described in Section 4.e of the Trust Legal Provisions
and are provided without warranty as described in the Simplified 
BSD License.




Expires July 22,2016                               [Page 1]


















Table of Contents

1.    Introduction....................................................3

2.    Test Setup......................................................4

2.1.      Test Topology...............................................4
  
2.2.      Network.....................................................4
  
3.    Test Procedure..................................................5

4.    Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . 12

5.    IANA Considerations . . . . . . . . . . . . . . . . . . . . . .15

6.    Security Considerations . . . . . . . . . . . . . . . . . . . .15

7.    References . . . . . . . . . . . . . . . . . . . . . . . . . . 15

7.1.    Normative References . . . . . . . . . . . . . . . . . . . ..15

8.   Authors' Address ...............................................15









		Expires July 22,2016                               [Page 2]


























1.   Introduction

Performance monitoring explained in ITU Y1731  for measuring the
loss and delay over different layer 2 services.This document
defines the methodologies for benchmarking performance loss and
delay over the layer 2 point to point services running on a router.
Hence,the authors have taken the approach of considering PM as a black
box, defining the methodology to benchmark the PM feature using various
testing methodologies










 Expires July 22,2016                               [Page 3]




1.1   Terminologies

PM   Performance monitoring

In-profile  CIR termed as green packets.

Out-profile EIR Yellow/Amber packet.

LMM  Loss Measurement Message

LMR  Loss Measurement Reply

DMM   Delay Measurement Message

DMR  Delay MEasurement Reply

P Router  Provider Router.

PE Router  Provider Edge Router

CE Router  customer Edge  Router

DUT  Device under Test.





Expires July 22,2016                               [Page 4]
 



2.1   Test Topology


	 | Traffic Generator
+----------+
|          |
|  PE2     |
|          |
+----------+
    |
    |
+----------+
|          |
|  Core    |
|  router  |
+----------+
   |                     
   |                     
+----------+       
|          |       
|   DUT    |       
|    PE1   |       
+----------+       
     |                  
     |--- Traffic Generator




2.2   Network

The network consists of 3 routers and 2 traffic generator ports.DUT
is acting as one of  PE to CE. The core router is acting as P router.
There is layer 2(point to point) services running from PE1 to PE2.
On the top of that performance monitoring loss and delay measurements
are running.PE1 is acting as DUT.






3.   Test Procedure

The test defined to measure the performance of DUT near end and far end
loss, the packets transferred over a period of time. Measuring single class
Colored, colorless loss measurement, multiclass colored and colorless
loss measurement. Average delay, best case and worst case delay.



 Expires July 22,2016                               [Page 5]
 

3.1   Basic Testing

3.1.1 Check the near end and far end loss for single class colorless
loss measurement in DUT.

Objective

Check the near end and far end loss over layer 2 point to point service 
running in DUT.The loss will be measured on single class colorless that
means all the in profile and out profile.


Procedure

Configure layer 2 point to point service between PE1 and PE2.Configure 
Y1731 single class loss measurement over this service. Configure a 
profile to mark the packet in profile and out of profile. Send 1000 pps
with different color from both traffic generator towards this service in
DUT,some in In-profile and some in out profile. Then send this traffic for 
1 min and then stop.

Measurement

The loss measurement must show in DUT 60,000 pps as near end and far end
CIR.There should not be any loss shown in the output.



3.1.2 Check the near end and far end loss for single class colorless
loss measurement by dropping the LMR packet.

Objective

Check the near end and far end loss over layer 2 point to point service
in a DUT.The loss will be measured on single class colorless that means
all the in profile and out profile packets must be counted.

Procedure

Configure layer 2 point to point service between PE1 and PE2.Configure 
Y1731 single class loss measurement over this service in DUT. Configure a 
profile to mark the packet in profile and out of profile. Send 1000 pps
with different color from both traffic generator towards this service,
some in In-profile and some in out profile. Then send this traffic for 
1 min and then stop.During the traffic flow drop 2 or 3 LMR packet. 

Measurement

The loss measurement must show 60,000 pps in DUT as near end and far end
CIR.There should not be any loss shown in the output.



3.1.3 Check the near end and far end loss for single class colorless
loss measurement over a period of time in DUT.

Objective

Check the near end and far end loss over layer 2 point to point service
in DUT.The loss will be measured on single class colorless that means all
the in profile and out profile packets must be counted.

Procedure

Configure layer 2 point to point service between PE1 and PE2.Configure 
Y1731 single class loss measurement over this service in DUT. Configure a 
profile to mark the packet in profile and out of profile. Send 1000 pps
with different color from both traffic generator towards this service,
some in In-profile and some in out profile. Then send this traffic for 
1 hr and then stop.

Measurement

The loss measurement must show 36,00,000 pps in DUT as near end and 
far end CIR.There should not be any loss shown in the output.



3.1.4 Check the near end and far end loss for single class colorless
loss measurement by dropping packets.

Objective

Check the near end and far end loss over layer 2 point to point service
in DUT.The loss will be measured on single class colorless that means
all the in profile and out profile packets must be counted.

Procedure

Configure layer 2 point to point service between PE1 and PE2.Configure 
Y1731 single class loss measurement over this service in DUT. Configure a 
profile to mark the packet in profile and out of profile. Send 1000 pps
with different color from both traffic generator towards this service,
some in In-profile and some in out profile. Then send this traffic for 
1 min during that time frame drop 100 packets from the core router in
both direction.

Measurement

The loss measurement must show near end and far end loss 100 in DUT.



3.1.5 Check the near end and far end loss for multi class colorless
loss measurement in DUT.

Objective

Check the near end and far end loss over layer 2 point to point service
in DUT.The loss will be measured on multi class colorless that means all
the in profile and out profile packets must be counted.

Procedure

Configure layer 2 point to point service between PE1 and PE2.Configure 
Y1731 multi class loss measurement over this service in DUT. Configure a 
profile to mark the packet in profile and out of profile. Send 1000 pps
with different color from both traffic generator towards this service
in different classes.some in In-profile and some in out profile.
Then send this traffic for 1 min and then stop.

Measurement

The loss measurement must show 60,000 pps as near end and far end CIR in DUT
for each class configured in the router.There should not be any loss shown
in the output.



3.1.6 Check the near end and far end loss for multi class colorless
loss measurement by dropping the LMR packet.

Objective

Check the near end and far end loss over layer 2 point to point service
in DUT.The loss will be measured on multi class colorless that means all the 
in profile and out profile packets must be counted.

Procedure

Configure layer 2 point to point service between PE1 and PE2.Configure 
Y1731 multi class loss measurement over this service. Configure a 
profile to mark the packet in profile and out of profile. Send 1000 pps
with different color from both traffic generator towards this service
in different classes.Some in In-profile and some in out profile.
Then send this traffic for 1 min and then stop.During the traffic
flow drop 2 or 3 LMR packet. 

Measurement

The loss measurement must show 60,000 pps as near end and far end CIR
in each class configured in DUT.There should not be any loss shown
in the output.




3.1.7 Check the near end and far end loss for multi class colorless
loss measurement over a period of time in DUT.

Objective

Check the near end and far end loss over layer 2 point to point service
in DUT.The loss will be measured on multi class colorless that means all
the in profile and out profile packets must be counted.


Procedure

Configure layer 2 point to point service between PE1 and PE2.Configure 
Y1731 multi class loss measurement over this service. Configure a 
profile to mark the packet in profile and out of profile. Send 1000 pps
with different color from both traffic generator towards this service
in different classes.Some in In-profile and some in out profile.
Then send this traffic for 1 hr and then stop.

Measurement

The loss measurement must show 36,00,000 pps as near end and far end CIR
in each class configured in DUT.There should not be any loss shown in
the output.



3.1.8 Check the near end and far end loss for multi class colorless
loss measurement by dropping packets.

Objective

Check the near end and far end loss over layer 2 point to point service
in DUT The loss will be measured on multi class colorless that means all
the in profile and out profile packets must be counted.

Procedure

Configure layer 2 point to point service between PE1 and PE2.Configure 
Y1731 multi class loss measurement over this service. Configure a 
profile to mark the packet in profile and out of profile. Send 1000 pps
with different color from both traffic generator towards this service
in different classes.Some in In-profile and some in out profile.
Then send this traffic for 1 min during that time frame drop 100
packets from the core router in both direction.



Measurement

The loss measurement must show near end and far end loss in DUT,
100 packets for each class



3.1.9 Check the near end and far end loss for single class colored
loss measurement in DUT.

Objective

Check the near end and far end loss over layer 2 point to point service
in DUT.The loss will be measured on single class colored that means all
the in profile packets must be counted.Out profile packets must not.


Procedure

Configure layer 2 point to point service between PE1 and PE2.Configure 
Y1731 single class loss measurement over this service. Configure a 
profile to mark the packet in profile and out of profile. Send 1000 pps
with different color from both traffic generator towards this service,
for example 500 pps as out profile and 500 pps as green from the 
traffic generator. Then send this traffic for 1 min and then stop.


Measurement

The loss measurement must measure only in profile packet.There should
not be any traffic drop.The Loss measurement output taken in DUT will
show as 30,000 pps as near end CIR and far end CIR.


3.1.10 Check the near end and far end loss for single class colored
loss measurement by dropping the LMR packet.

Objective

Check the near end and far end loss over layer 2 point to point service
in DUT.The loss will be measured on single class colored that means all
the in profile packets must be counted.Out profile packets must not.


Procedure

Configure layer 2 point to point service between PE1 and PE2.Configure 
Y1731 single class loss measurement over this service. Configure a 
profile to mark the packet in profile and out of profile. Send 500 pps
with in profile and 500 pps with out profile from both traffic 
generator towards this service.Then send this traffic for 
1 min and then stop.During the traffic flow drop 2 or 3 LMR packet. 

Measurement

The loss measurement must measure only in profile packet.There should
not be any traffic drop.Only pps count will show in DUT near end far
end CIR as 30,000 pps. The packets which are out of profile will not
be counted.




3.1.11 Check the near end and far end loss for single class colored
loss measurement over a period of time in DUT.

Objective

Check the near end and far end loss over layer 2 point to point service
in DUT.The loss will be measured on single class colored that means all
the in profile packets must be counted.Out profile must not.


Procedure

Configure layer 2 point to point service between PE1 and PE2.Configure 
Y1731 single class loss measurement over this service. Configure a 
profile to mark the packet in profile and out of profile. Send 500 pps
as in profile and 500 pps as out profile from both traffic generator
towards this service,some in In-profile and some in out profile.
Then send this traffic for 1 hr and then stop.


Measurement

The loss measurement must count only in profile packet. The output taken
taken in DUT will show 18,00,000 pps as near end and far end CIR.




3.1.12 Check the near end and far end loss for single class colored
loss measurement by dropping packets.

Objective

Check the near end and far end loss over layer 2 point to point service
in DUT.The loss will be measured on single class colored that means all
the in profile packets must be counted.


Procedure

Configure layer 2 point to point service between PE1 and PE2.Configure 
Y1731 single class loss measurement over this service. Configure a 
profile to mark the packet in profile and out of profile. Send 1000 pps
with color for in profile from both traffic generator towards this service,
Then send this traffic for 1 min during that time frame drop 100 packets
which are in profile from the core router in both direction.



Measurement

The loss measurement must show near end and far end loss 100 in DUT.




3.1.13 Check the near end and far end loss for multi class colored
loss measurement in DUT.

Objective

Check the near end and far end loss over layer 2 point to point service
in DUT.The loss will be measured on multi class colored that means all
the in profile and out profile packets must be counted.



Procedure

Configure layer 2 point to point service between PE1 and PE2.Configure 
Y1731 multi class loss measurement over this service. Configure a 
profile to mark the packet in profile and out of profile. Send 500 pps
with in profile and 500 pps with out profile from both traffic generator
towards this service in each class.Then send this traffic for 
1 min and then stop.



Measurement

The loss measurement must show only in profile packets as near end and far
end CIR for each class configured in the router.There should not be any loss
shown in the output.The output must show  30,000 pps in each class
taken in DUT.




3.1.14 Check the near end and far end loss for multi class colored
loss measurement by dropping the LMR packet.

Objective

Check the near end and far end loss over layer 2 point to point service
in DUT.The loss will be measured on multi class colored that means all
the in profile packets must be counted.Out profile packets are not counted.


Procedure

Configure layer 2 point to point service between PE1 and PE2.Configure 
Y1731 multi class loss measurement over this service. Configure a 
profile to mark the packet in profile and out of profile. Send 500 pps
as in profile and 500 pps as out profile from both traffic generator
towards this service in different classes.
Then send this traffic for 1 min and then stop.During the traffic
flow drop 2 or 3 LMR packet. 

Measurement

The loss measurement must show only in profile packets as near end and far
end CIR for each class configured in the router.There should not be any loss
shown in the output.The output must show 30,000 pps in each class
taken in DUT.





3.1.15 Check the near end and far end loss for multi class colored
loss measurement over a period of time in DUT.

Objective

Check the near end and far end loss over layer 2 point to point service
in DUT The loss will be measured on multi class colored that means all 
the in profile and out profile packets must be counted.


Procedure

Configure layer 2 point to point service between PE1 and PE2.Configure 
Y1731 multi class loss measurement over this service. Configure a 
profile to mark the packet in profile and out of profile. Send 500 pps
as in profile and 500 pps as out profile from both traffic generator
towards this service in different classes.
Then send this traffic for 1 hr and then stop.


Measurement

The loss measurement must show only in profile packets as near end and far
end CIR for each class configured in the router.There should not be any loss
shown in the output.The output must show less 18,00,000 pps as near end and 
far end CIR in each class taken in DUT.




3.1.16 Check the near end and far end loss for multi class colored
loss measurement in DUT by dropping packets.

Objective

Check the near end and far end loss over layer 2 point to point service
in DUT.The loss will be measured on multi class colored that means all
the in profile packets must be counted.Out profile packets are not.


Procedure

Configure layer 2 point to point service between PE1 and PE2.Configure 
Y1731 multi class loss measurement over this service. Configure a 
profile to mark the packet in profile and out of profile. Send 1000 pps
with different color from both traffic generator towards this service
in different classes.Some in In-profile and some in out profile.
Then send this traffic for 1 min during that time frame drop 100 in profile
packets from the core router in both direction.



Measurement

The loss measurement must show near end and far end loss 100 in
each class taken in DUT.





3.2.17 Check the delay in point to point service and point to
multi point service in DUT


Objective

Check the two way delay measurement in point to point service and
point to multi point service using Y1731 Delay measurement in DUT.


Procedure

Configure layer 2 point to point service between PE1 and PE2.Configure 
point to multi point service between PE1 and PE2. configure Y1731 delay
measurement over these service. Take the delay measurement(2 way) over
the service running in DUT for a period of time with out traffic.
This can be taken at 5 mins interval over a period of two hours.

Measurement

The two way delay values taken from DUT should not show drastic variation.
it must be consistent over a period of 2hrs.




3.2.18 Check the delay in point to point service and point to
multi point service running in DUT by dropping a couple of DMR
packet.


Objective

Check the two way delay measurement in point to point service and point
to multi point service using Y1731 Delay measurement in DUT.

Procedure

Configure layer 2 point to point service between PE1 and PE2.Configure 
point to multi point service between PE1 and PE2. configure Y1731 delay
measurement over these service. Take the delay measurement(2 way) over
the service for a period of time with out traffic in DUT.This can be taken
at 5 mins interval over a period of two hours. During this time use 
firewall or impairment device to drop DMR 2 to 3 packets.

Measurement

The two way delay values taken in DUT should not show drastic variation.
it must be consistent over a period of 2hrs.




3.2.19 Check the delay in point to point service and point to
multi point service with traffic up to max bandwidth provisioned
for the services in DUT.


Objective

Check the two way delay measurement in point to point service and 
point to multi point service in DUT using Y1731 Delay measurement
with traffic

Procedure

Configure layer 2 point to point service between PE1 and PE2.Configure 
point to multi point service between PE1 and PE2. configure Y1731 delay
measurement over these service running in DUT the two way delay outputs
can be taken at 5 mins interval over a period of two hours with traffic
send with max bandwidth of the interface.

Measurement

The two way delay values should not show drastic variation.it must be
consistent over a period of 2hrs and measure the difference of delay 
with traffic and without traffic.









3.3   Realiblity


3.3.1 To Check the PM statistics are stored during routing engine
switch over in DUT..

Objective

Send 1,00,000 frames from CE to DUT from traffic generator with different
SA and DA.Send 1,00,000 frames from traffic generator to R1 with different
SA and DA so that 2,00,000 mac address will be learned in DUT. There is
a bi directional traffic flow with 1,00,000 pps in each direction.
Then do a routing engine failover in DUT.

Procedure

Configure EVPN EVI in R1,MHPE2,DUT.All 4 routers except CE are running
mpls,bgp,RR is acting as route reflector to R1,MHPE2 and DUT.Once the
bgp comes up check the DUT evpn table.For MH PE ESI must be configured
per IFD/Interface.Using RT(traffic generator) to send the traffic to
the routers.

Measurement


There should not be any traffic loss, the loss and delay measurement taken
in DUT after switch over,the counters of loss and delay should not reset.










4.  Acknowledgements

We would like to thank Bhuvaneswaran Vengainathan of Veryx Technologies 
and Al Morton of (AT&T) for their support and encouragements.



5.  IANA Considerations

No IANA Action is requested at this time.


6.  Security Considerations

There is no additional consideration from RFC6192.

7.   References

7.1. Normative References

[ITU-Y1731] OAM functions and mechanisms for Ethernet based networks









8.  Authors  Addresses


Praveen Ananthasankaran
Juniper Networks
1133 Innovation Way
Sunnyvale, California 94089 USA
Email: panantha@juniper.net


Sudhin Jacob
Juniper Networks
1133 Innovation Way
Sunnyvale, California 94089 USA
Email: sjacob@juniper.net
       sudhinjacob@rediffmail.com
				