


Network Working Group                                           J. Snell
Internet-Draft                                               August 2005
Expires: February 2, 2006


 Atom Entry Expiration: Specifying Expiration Timestamps for Atom Entry
                                metadata
                draft-snell-atompub-feed-expires-01.txt

Status of this Memo

   By submitting this Internet-Draft, each author represents that any
   applicable patent or other IPR claims of which he or she is aware
   have been or will be disclosed, and any of which he or she becomes
   aware will be disclosed, in accordance with Section 6 of BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on February 2, 2006.

Copyright Notice

   Copyright (C) The Internet Society (2005).

Abstract

   This memo presents a mechanism that allows feed publishers to express
   maximum age and expiration properties for information content within
   an Atom entry.








Snell                   Expires February 2, 2006                [Page 1]

Internet-Draft                 Feed Thread                   August 2005


Table of Contents

   1.   Introduction . . . . . . . . . . . . . . . . . . . . . . . . . 3
   2.   Notational Conventions . . . . . . . . . . . . . . . . . . . . 3
   3.   The 'expires' extension element  . . . . . . . . . . . . . . . 4
   4.   The 'max-age' extension element  . . . . . . . . . . . . . . . 5
   5.   Security Considerations  . . . . . . . . . . . . . . . . . . . 6
   6.   IANA Considerations  . . . . . . . . . . . . . . . . . . . . . 6
   7.   References . . . . . . . . . . . . . . . . . . . . . . . . . . 6
        Author's Address . . . . . . . . . . . . . . . . . . . . . . . 7
   A.   Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . 7
        Intellectual Property and Copyright Statements . . . . . . . . 8







































Snell                   Expires February 2, 2006                [Page 2]

Internet-Draft                 Feed Thread                   August 2005


1.  Introduction

   This document specifies a mechanism that allows the expression of
   expiration timestamps and maximum age properties for information
   content within the Atom Syndication Format ([I-D.ietf-atompub-
   format]).  The mechanism defines two mutually exclusive extension
   elements that may be used to specify either an exact instant that the
   information content of an atom:entry expires, or a maximum age from
   the moment specified by an entries atom:updated element.

   When an atom:feed, atom:entry or atom:source contains an 'expires' or
   'max-age' extension element, the information content of the contained
   element is considered to be 'time constrained'.  Time constrainted
   information content is considered to be either 'active' or 'expired'.
   The default state is 'active'.  When the age (calculated in
   miliseconds from the moment specified by the atom:updated element)
   exceeds the value specified by the 'max-age' extension, or when the
   moment specified by the 'expires' extension elements passes, the
   state of the time constrained information content MUST be considered
   to be 'expired' and no longer valid.  It is strongly recommended that
   implementations either discard 'expired' information content or
   otherwise warn users that the information content has expired.

   The mechanism defined herein MUST NOT be used to support the caching
   of Atom documents and MUST NOT be used to schedule when a client
   should revisit/refresh local copies of Atom documents.  Specifically,
   the 'expires' and 'max-age' extension elements are relevant only to
   the informational content within an atom:entry and are not relevant
   to the Atom Feed and Entry Documents in which they happen to appear.

   The presence of an 'expires' or 'max-age' extension within an atom:
   feed element is relevant only to the informational content of the
   containing element and not to any contained atom:entry elements.
   Likewise, the presence of an 'expires' or 'max-age' extension within
   an atom:source element is relevant only to the informational content
   of the containing atom:source element and not to the atom:entry that
   contains the atom:source.

2.  Notational Conventions

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in BCP 14, [RFC2119], as
   scoped to those conformance targets.

   In this specification, "entry" refers to an atom:entry element.

   In this specification, "feed" refers to an Atom Feed Document.



Snell                   Expires February 2, 2006                [Page 3]

Internet-Draft                 Feed Thread                   August 2005


   In this specification, "head section" refers to the children of a
   feed's document-wide metadata container; e.g., the child elements of
   the atom:feed element in an Atom Feed Document.

   In this specification, the term "extension element" refers to a
   structured extension element as described in [I-D.ietf-atompub-
   format].

   In this specification, the term "information content" refers to the
   collection of metadata relevant to an atom:entry element.

   This specification uses XML Namespaces [W3C.REC-xml-names-19990114]
   to uniquely identify XML element names.  It uses the following
   namespace prefix for the indicated namespace URI;
     "age": "http://purl.org/atompub/age/1.0"

   This specification uses terms from the XML Infoset [W3C.REC-xml-
   infoset-20040204].  However, this specification uses a shorthand; the
   phrase "Information Item" is omitted when naming Element Information
   Items.  Therefore, when this specification uses the term "element,"
   it is referring to an Element Information Item in Infoset terms.

   This specification defines the notion of a Non-Negative Integer
   Construct whose value MUST conform to the canonical representation of
   the "nonNegativeInteger" construction defined by [W3C.REC-xmlschema-
   2-20041028].  The value of the Non-Negative Integer Construct MUST
   NOT contain any leading or trailing whitespace.
     nonNegativeIntegerConstruct =
         atomCommonAttributes,
         xsd:nonNegativeInteger

   Example Non-Negative Integer Constructs
     <age:max-age>0</age:max-age>
     <age:max-age>1000000</age:max-age>

3.  The 'expires' extension element

   The 'expires' extension element conforms to the Atom Date Construct
   and is used to indicate a precise moment in time (inclusive) when the
   information content of an entry expires.
     expiresElement = element age:expires { atomDateConstruct }

   o  atom:entry elements MAY contain exactly one 'expires' extension
      element.
   o  atom:feed elements MAY contain exactly one 'expires' extension
      element.





Snell                   Expires February 2, 2006                [Page 4]

Internet-Draft                 Feed Thread                   August 2005


   o  atom:source elements MAY contain exactly one 'expires' extension
      element.
   o  An atom:entry that contains an 'expires' extension element MUST
      NOT contain a 'max-age' extension element.
   o  An atom:feed that contains an 'expires' extension element MUST NOT
      contain a 'max-age' extension element.
   o  An atom:source that contains an 'expires' extension element MUST
      NOT contain a 'max-age' extension element.

   For example
     <feed xmlns="http://www.w3.org/2005/Atom"
       xmlns:age="http://purl.org/atompub/age/1.0">
       <id>http://www.example.com/myfeed</id>
       <title>My Example Feed</title>
       <updated>2005-07-28T12:00:00Z</updated>
       <link href="http://www.example.com/myfeed" />
       <author><name>James</name></author>
       <entry>
         <id>tag:entries.com,2005:1</td>
         <title>An entry with an expiration timestamp</title>
         <link href="http://www.example.com/entries/1/1" />
         <age:expires>2005-12-12T12:00:00Z</age:expires>
         <summary>An entry with an expiration</summary>
       </entry>
     </feed>

4.  The 'max-age' extension element

   The 'max-age' extension element is used to indicate the maximum age
   of the information content in miliseconds from the moment specified
   by the atom:updated element.  The value is specified as a non-
   negative integer conforming to the nonNegativeIntegerConstruct.
     maxAgeElement = element age:max-age { nonNegativeIntegerConstruct }

   o  atom:entry elements MAY contain exactly one 'max-age' extension
      element.
   o  atom:feed elements MAY contain exactly one 'max-age' extension
      element.
   o  atom:source elements MAY contain exactly one 'max-age' extension
      element.
   o  An atom:entry that contains a 'max-age' extension element MUST NOT
      contain an 'expires' extension element.
   o  An atom:feed that contains a 'max-age' extension element MUST NOT
      contain an 'expires' extension element.
   o  An atom:source that contains a 'max-age' extension element MUST
      NOT contain an 'expires' extension element.





Snell                   Expires February 2, 2006                [Page 5]

Internet-Draft                 Feed Thread                   August 2005


   For example
     <feed xmlns="http://www.w3.org/2005/Atom"
            xmlns:age="http://purl.org/atompub/age/1.0">
       <id>http://www.example.com/myfeed</id>
       <title>My Example Feed</title>
       <updated>2005-07-28T12:00:00Z</updated>
       <link href="http://www.example.com/myfeed" />
       <author><name>James</name></author>
       <entry>
         <id>tag:entries.com,2005:1</td>
         <title>An entry with a maximum age of 20 seconds</title>
         <link href="http://www.example.com/entries/1/1" />
         <age:max-age>20000</age:max-age>
         <summary>expire after a mere 20 seconds</summary>
       </entry>
     </feed>

5.  Security Considerations

   It is possible for malicious intermediaries to alter the expiration
   metadata in an Atom document.  This risk can be mitigated by
   digitally signing the elements in which the 'expires' or 'max-age'
   extension elements appear.  It is strongly recommended that
   implementations discard expired information content or otherwise warn
   users that the information content has expired.

6.  IANA Considerations

   There are no IANA considerations introduced by this specification.

7.  References

   [I-D.ietf-atompub-format]
              Sayre, R. and M. Nottingham, "The Atom Syndication
              Format", draft-ietf-atompub-format-11 (work in progress),
              August 2005.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [W3C.REC-xml-infoset-20040204]
              Tobin, R. and J. Cowan, "XML Information Set (Second
              Edition)", W3C REC REC-xml-infoset-20040204,
              February 2004.

   [W3C.REC-xml-names-19990114]
              Hollander, D., Bray, T., and A. Layman, "Namespaces in
              XML", W3C REC REC-xml-names-19990114, January 1999.



Snell                   Expires February 2, 2006                [Page 6]

Internet-Draft                 Feed Thread                   August 2005


   [W3C.REC-xmlschema-2-20041028]
              Malhotra, A. and P. Biron, "XML Schema Part 2: Datatypes
              Second Edition", W3C REC REC-xmlschema-2-20041028,
              October 2004.


Author's Address

   James M Snell


   Phone:
   Email: jasnell@gmail.com
   URI:   http://snellspace.com

Appendix A.  Acknowledgements

   The author gratefully acknowledges the feedback from Eric Scheid,
   Walter Underwood, Henry Story and the other members of Atom
   Publishing Format and Protocol working group during the development
   of this specification.






























Snell                   Expires February 2, 2006                [Page 7]

Internet-Draft                 Feed Thread                   August 2005


Intellectual Property Statement

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in BCP 78 and BCP 79.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   http://www.ietf.org/ipr.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.


Disclaimer of Validity

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET
   ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Copyright Statement

   Copyright (C) The Internet Society (2005).  This document is subject
   to the rights, licenses and restrictions contained in BCP 78, and
   except as set forth therein, the authors retain all their rights.


Acknowledgment

   Funding for the RFC Editor function is currently provided by the
   Internet Society.




Snell                   Expires February 2, 2006                [Page 8]

