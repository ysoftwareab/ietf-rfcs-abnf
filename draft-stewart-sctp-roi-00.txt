
      Network Working Group                                  R. Stewart  
      Internet Draft                                      Cisco Systems  
      Category: Internet Draft                                
                                                              
                                                         March 27, 2002  

                             SCTP DDP Adaptation 
                        draft-stewart-sctp-roi-00.txt 
       
      Status of this Memo  
       
    This document is an internet-draft and is in full conformance with
    all provisions of Section 10 of [RFC2026].
       
    Internet-Drafts are working documents of the Internet Engineering
    Task Force (IETF), its areas, and its working groups.  Note that
    other groups may also distribute working documents as Internet-
    Drafts.  Internet-Drafts are draft documents valid for a maximum of
    six months and may be updated, replaced, or obsoleted by other The
    list of Internet-Draft Shadow Directories can be accessed at
    http://www.ietf.org/shadow.html.
       
    Abstract

    This document describes a method to adapt DDP to SCTP using a
    generic DDP description found in [DDP-DRAFT].  This adaption
    provides a method for two peers to know that each side is performing
    direct placement thus enabling hardware acceleration if available.
       
    Table of Content 
    1 Introduction.................................................1
    1.1 Conventions ...............................................2
    1.1 Terms .....................................................2
    2 Adaptation Layer Formats.....................................2
    2.1 Adaptation Layer Indicator ................................2
    3 Procedures...................................................2
    3.1 Association Initialization ................................2
    3.2 DDP Placement behavior with SCTP...........................3
    4 IANA considerations..........................................3
    5 Security Considerations......................................3
    6 Acknowledgments..............................................3
    7 Authors' Addresses...........................................3
    8 References...................................................4
       
       
    1 Introduction 

    This document describes a method to adapt DDP to SCTP using a
    generic DDP description found in [DDP-DRAFT].  This adaption
    provides a method for two peers to know that each side is performing
    direct placement thus enabling hardware acceleration if available.
       
    Some implementations may include this adaptation layer within their
    SCTP implementations to obtain maximum performance but the behavior
    of SCTP will be unaffected.  In order to accomplish this we specify

Stewart                                                         [Page 1]

Internet Draft               SCTP DDP Adaption                March 2002

    the use of the new adaptation layer indication as defined in
    [STEWa].
       
    1.1 Conventions 
       
    The keywords MUST, MUST NOT, REQUIRED, SHALL, SHALL NOT, SHOULD,
    SHOULD NOT, RECOMMENDED, NOT RECOMMENDED, MAY, and OPTIONAL, when
    they appear in this document, are to be interpreted as described in
    [RFC2119].
   
    1.2 Terms

       DDP -   is an acronym meaning Direct Data Placement. 
       
    2 Adaptation Layer Formats 
     
    2.1 Adaptation Layer Indicator 
     
    We define a adaption indication which MUST appear in the INIT or 
    INIT-ACK with the following format as defined in [STEWa]. 
       
     0                   1                   2                   3 
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |        Type =0xC006           |    Length = Variable          | 
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                    Adaptation Indication                      | 
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

    Adaptation Indication: 
     
    The following value is defined for DDP in this document: 

         DDP                         - 0x00000001
       
       
    3 Procedures 
       
    3.1 Association Initialization 
       
    At the startup of an association, an endpoint wishing to perform DDP
    placement MUST include an adaptation layer indication in its INIT or
    INIT-ACK (as defined in 2.1).  After the exchange of the first two
    messages (INIT and INIT-ACK), an endpoint MUST verify that the peer
    supports the mode by confirmation that the peer included  the DDP
    adaptation indication.  If both peer DID specify a DDP adaptation
    then:
 
      - Each endpoint MUST enable their DDP engine formating
        each message as defined in [DDP-DRAFT].

      - Each endpoint MUST enable the SCTP_DISABLE_FRAGMENTS 
        option as defined in [STEWb]. 


Stewart                                                         [Page 2]

Internet Draft               SCTP DDP Adaption                March 2002

    If the peer endpoint did NOT specify a DDP placement adaptation then
    the local endpoint MUST disable DDP adaptation and it MUST NOT send
    DATA chunks with the format described in [DDP-DRAFT].
       
    3.2 DDP Placement behavior with SCTP

    When DDP is used in combination with SCTP no further procedures are
    needed other than both endpoints knowing that DDP is
    occurring. SCTP, once the SCTP_DISABLE_FRAGMENTS option is set, will
    always assure that EACH send message fits in one complete SCTP
    chunk. The receiver will NOT need to be concerned with message
    boundaries and loss events since each SCTP DATA chunk will always
    have the BE bits set. The placement algorithm will only need to look
    into the bytes described in [DDP-DRAFT] and place the data into the
    user buffers.
 
    [Editors note: Instead of disabling fragments we may want to
     consider setting the fragment size to a known value. This would
     then make it predictable as to where to place fragments. Not
     sure though what one would do if the FIRST piece of a message
     is missing. It may be better to have the DDP info on each
     inbound chunk... we need to consider both alternatives though].

    If the sender specifies Unordered delivery (by setting the U bit)
    the receiver, after placement, MAY notify the receiving application
    that the data has arrived. In cases where Unordered delivery is NOT
    specified then the receiving SCTP MUST follow all normal reordering
    procedures as specified in [RFC2960].
       
    4 IANA considerations 
       
    This document defines one new Adaptation Layer Indications as
    specified within section 2.1.

    5 Security Considerations 
       
    Any direct placement of memory poses a significant security risk,
    these threats should be addressed in [DDP-Draft]. This document
    does not add any additional security risks over those found in
    [RFC2960].
       
    6 Acknowledgments 
       
    The author would like to thank the following people that have
    provided comments and input Stephen Bailey, Douglas Otis, and Allyn
    Romanow.
       
   7 Authors' Addresses 
       
    Randall R. Stewart  
    24 Burning Bush Trail.
    Crystal Lake, IL 60012  
    USA  
       

Stewart                                                         [Page 3]

Internet Draft               SCTP DDP Adaption                March 2002

    EMail: rrs@cisco.com  
       
    8 References        


    [RFC1982]  Elz, R. and R. Bush, "Serial Number Arithmetic", RFC 1982,
               August 1996.

    [RFC2026]  Bradner, S., "The Internet Standards Process -- 
    Revision 3", BCP 9, RFC 2026, October 1996. 
       
    [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate 
    Requirement Levels", BCP 14, RFC 2119, March 1997. 
       
    [RFC2960] R. R. Stewart, Q. Xie, K. Morneault, C. Sharp, H. J. 
    Schwarzbauer, T. Taylor, I. Rytina, M. Kalla, L. Zhang, and, V. 
    Paxson, "Stream Control Transmission Protocol," RFC 2960, October 
    2000. 
       
    [STEWa] - Stewart, Ramalho, Xie, Tuexen, Rytina, Conrad, "SCTP 
    Extensions for Dynamic Reconfiguration of IP Addresses", November 
    2001, draft-ietf-tsvwg-addip-sctp-03.txt, work-in-progress. 
     
    [STEWb] - Stewart, Xie, Yarroll, Wood, Poon, Fujita, "Sockets
    API Extensions for SCTP", January 2002, 
    draft-ietf-tsvwg-sctpsocket-03.txt, work-in-progress.
       
    [DDP-DRAFT] - The universal DDP placement format draft?
       
    Full Copyright Statement  
       
    Copyright (C) The Internet Society (2002).  All Rights Reserved.
    This document and translations of it may be copied and furnished to
    others, and derivative works that comment on or otherwise explain it
    or assist in its implementation may be prepared, copied, published
    and distributed, in whole or in part, without restriction of any
    kind, provided that the above copyright notice and this paragraph
    are included on all such copies and derivative works.  However, this
    document itself may not be modified in any way, such as by removing
    the copyright notice or references to the Internet Society or other
    Internet organizations, except as needed for the purpose of
    developing Internet standards in which case the procedures for
    copyrights defined in the Internet Standards process must be
    followed, or as required to translate it into languages other than
    English.
      
    The limited permissions granted above are perpetual and will not be
    revoked by the Internet Society or its successors or assigns.
       
    This document and the information contained herein is provided on an
    "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
    TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
    BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
    HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF

Stewart                                                         [Page 4]

Internet Draft               SCTP DDP Adaption                March 2002

    MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.
       
    Funding for the RFC Editor function is currently provided by the
    Internet Society.
    


















































Stewart                                                         [Page 5]

