Network Working Group                                       Amit Bhagat     
Internet-Draft                                            July 04, 2016
Intended status: Standards Track                         
Expires: January 04, 2017                                 
                                                        
		BGP Overload
		draft-bhagat-bgp-overload-00

Abstract

   This document will present a new feature in BGP that allows a 
   BGP speaker to participate in prefix distribution without carrying 
   transit traffic. 

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on January 04, 2017.

Copyright Notice

   Copyright (c) 2016 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

1. Introduction

   In ISIS, the Overload-bit is present in Link-State PDU (LSP) 
   header. In OSPFv2, H-bit in Router-LSA is defined in the 
   specification [H-BIT].
 
   In Data Center networks where CLOS fabrics are built solely using 
   BGP, the operators drain transit traffic from the router by either
   increasing MED or prepending AS-PATH or manipulating other BGP 
   attributes. The point being that the operator always needs to be 
   wary of the topology. This document presents a feature similar to 
   ISIS's Overload-bit and (to an extent) OSPFv2's H-bit.

   The primary use-case is to drain transit traffic from a BGP router.

2. Specification of Requirements

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].

3. Capability Support

   A new Capability Optional parameter will be communicated in BGP Open 
   message. A BGP speaker SHOULD use Capability Advertisement 
   procedure [BGP-CAP] to announce the support. The Capability Code 
   is to be assigned by IANA. 

   Capability Code:
    TBA by IANA

   Capability Length:
    Variable length.

   Capability Value:
    Specifies all AFI/SAFI configured on the BGP Speaker that will 
    support the feature.

    +---------------------------+
    | AFI                       |
    +---------------------------+
    | SAFI                      |
    +---------------------------+


4. Multiprotocol BGP Extensions

   BGP Overload is advertised in BGP UPDATE message using
   MP_REACH_NLRI and MP_UNREACH_NLRI attributes. The [AFI,SAFI] value 
   pair used to identify this NLRI is -
   AFI = 1 or 2 (1 for IPv4, 2 for IPv6) and 
   SAFI = To be assigned by IANA.

5. NLRI Encoding

   The NLRI field in the MP_REACH_NLRI and MP_UNREACH_NLRI attributes
   is encoded as defined in section 4 of [MP-BGP]. The structure of
   prefix is defined as follows:

   +---------------------------+
   | Origin AS (4-octets)      |
   +---------------------------+
   | Flags (2-octets)          |
   +---------------------------+
   | AFI (2-octets)            |
   +---------------------------+
   | SAFI (1-octet)            |
   +---------------------------+

   Origin AS: 
    The BGP AS of the BGP speaker sending the UPDATE message.

   Flags:
    Currently, only a single Flag is defined for "Maintenance".
    So, the value of this field is set to 1. However, if the BGP router
    is constantly low in memory, for example, it can utilize the 
    feature and advertise BGP UPDATE messages by setting a FLAG-bit
    accordingly.

    AFI:
     Address-Family Identifier

    SAFI:
     Subsequent Address-Family Identifier

    The [AFI/SAFI] pair identify which prefix types will be affected.
    If multiple AFI/SAFI pairs supported are affected, they are all 
    listed in the encoding.

6. Operation

   When a BGP speaker is required to drain traffic, the operator will 
   configure BGP Overload. This will trigger the BGP speaker to 
   advertise a BGP UPDATE message to all its peers that support 
   the feature. The advertising BGP speaker will follow-up with an
   End-Of-RIB marker to hint the end of update.

   Upon receiving the BGP UPDATE message with Overload NLRI, the 
   receiving BGP speaker should examine the ADJ-RIB-IN table for the 
   advertising BGP speaker. It should re-evaluate the prefixes that 
   the "overloaded" BGP speaker advertised and run a BGP best-path 
   selection process for all AFI/SAFI that the overloaded BGP speaker 
   announced in the UPDATE message and NOT utilize any prefixes for 
   which the advertising BGP speaker is in the transit. The selection 
   process, however, should still utilize the advertising BGP speaker 
   for all prefixes it is the originator for. The way to determine 
   this is by checking Originator_ID attribute (when Route-Reflectors 
   are present) and AS_PATH attribute. The receiving BGP speaker may 
   send further BGP UPDATE messages downstream to announce/withdraw
   prefixes that were impacted by the overloaded BGP speaker.
   
   A "global" configuration of BGP overload should affect all AFI/SAFI
   for which the BGP speaker advertised the capability.

6. IANA Considerations

   As specified in the document, the IANA will assign a new 
   Capability Code. The IANA will also assign a new SAFI value for
   MP_REACH_NLRI and MP_UNREACH_NLRI attributes.


7. Security Considerations

   This document introduces no new security concerns to BGP or other 
   specifications referenced in this document.


8. References

   [BGP-CAP]	Chandra, R. and J. Scudder, "Capabilities Advertisement 
                with BGP-4", RFC 2842, May 2000.
 
   [H-BIT]	Patel, K. et al, "H-bit Support for OSPFv2", 
                draft-ietf-ospf-ospfv2-hbit-00, October 2015.

   [MP-BGP]	Bates, T. et al, "Multiprotocol Extensions for BGP-4",
		RFC 2858, June 2000.

9. Author's Address
 
   Amit Bhagat
   Email: scet.amit@gmail.com
