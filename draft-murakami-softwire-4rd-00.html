<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>IPv4 Residual Deployment on IPv6 infrastructure - protocol specification</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Requirements Language">
<link href="#rfc.section.3" rel="Chapter" title="3 Terminology">
<link href="#rfc.section.4" rel="Chapter" title="4 4rd Configuration">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 Customer Edge Configuration">
<link href="#rfc.section.5" rel="Chapter" title="5 Algorithmic mapping">
<link href="#rfc.section.5.1" rel="Chapter" title="5.1 Mapping Rules">
<link href="#rfc.section.5.1.1" rel="Chapter" title="5.1.1 From a CE IPv6 Prefix to a CE 4rd Prefix">
<link href="#rfc.section.5.1.2" rel="Chapter" title="5.1.2 From a CE 4rd Prefix to a Port-set ID">
<link href="#rfc.section.5.1.3" rel="Chapter" title="5.1.3 From a Port-Set ID to a Port Set">
<link href="#rfc.section.5.1.4" rel="Chapter" title="5.1.4 From an IPv4 Address or IPv4 Address + Port to a CE IPv6 Address">
<link href="#rfc.section.6" rel="Chapter" title="6 Encapsulation and Fragmentation Consideration">
<link href="#rfc.section.7" rel="Chapter" title="7 BR and CE behaviors">
<link href="#rfc.section.8" rel="Chapter" title="8 NAT considerations">
<link href="#rfc.section.9" rel="Chapter" title="9 ICMP">
<link href="#rfc.section.10" rel="Chapter" title="10 Security Considerations">
<link href="#rfc.section.11" rel="Chapter" title="11 IANA Consideration">
<link href="#rfc.section.12" rel="Chapter" title="12 Acknowledgements">
<link href="#rfc.references" rel="Chapter" title="13 References">
<link href="#rfc.references.1" rel="Chapter" title="13.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="13.2 Informative References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="This document specifies an automatic tunneling mechanism for providing IPv4 connectivity service to end users over a service provider's IPv6 network. Key aspects include stateless operation, sharing of IPv4 addresses, and an algorithmic mapping between IPv4 addresses and IPv6 tunnel endpoints." />
  <meta name="description" content="This document specifies an automatic tunneling mechanism for providing IPv4 connectivity service to end users over a service provider's IPv6 network. Key aspects include stateless operation, sharing of IPv4 addresses, and an algorithmic mapping between IPv4 addresses and IPv6 tunnel endpoints." />
  <meta name="keywords" content="" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Internet Engineering Task Force</td>
<td class="right">T. Murakami</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">IP Infusion</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">O. Troan</td>
</tr>
<tr>
<td class="left">Expires: January 05, 2012</td>
<td class="right">cisco</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">July 04, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">IPv4 Residual Deployment on IPv6 infrastructure - protocol specification<br />
  <span class="filename">draft-murakami-softwire-4rd-00</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This document specifies an automatic tunneling mechanism for providing IPv4 connectivity service to end users over a service provider's IPv6 network. Key aspects include stateless operation, sharing of IPv4 addresses, and an algorithmic mapping between IPv4 addresses and IPv6 tunnel endpoints.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on January 05, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Requirements Language</a>
</li>
<li>3.   <a href="#rfc.section.3">Terminology</a>
</li>
<li>4.   <a href="#rfc.section.4">4rd Configuration</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">Customer Edge Configuration</a>
</li>
<li>5.   <a href="#rfc.section.5">Algorithmic mapping</a>
</li>
<li>5.1.   <a href="#rfc.section.5.1">Mapping Rules</a>
</li>
<li>5.1.1.   <a href="#rfc.section.5.1.1">From a CE IPv6 Prefix to a CE 4rd Prefix</a>
</li>
<li>5.1.2.   <a href="#rfc.section.5.1.2">From a CE 4rd Prefix to a Port-set ID</a>
</li>
<li>5.1.3.   <a href="#rfc.section.5.1.3">From a Port-Set ID to a Port Set</a>
</li>
<li>5.1.4.   <a href="#rfc.section.5.1.4">From an IPv4 Address or IPv4 Address + Port to a CE IPv6 Address</a>
</li>
<li>6.   <a href="#rfc.section.6">Encapsulation and Fragmentation Consideration</a>
</li>
<li>7.   <a href="#rfc.section.7">BR and CE behaviors</a>
</li>
<li>8.   <a href="#rfc.section.8">NAT considerations</a>
</li>
<li>9.   <a href="#rfc.section.9">ICMP</a>
</li>
<li>10.   <a href="#rfc.section.10">Security Considerations</a>
</li>
<li>11.   <a href="#rfc.section.11">IANA Consideration</a>
</li>
<li>12.   <a href="#rfc.section.12">Acknowledgements</a>
</li>
<li>13.   <a href="#rfc.references">References</a>
</li>
<li>13.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>13.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">4rd is a protocol mechanism to deploy IPv4 to sites via a service provider's (SP's) IPv6 network.  Similar to Dual-Stack Lite <a href="#I-D.ietf-softwire-dual-stack-lite">[I-D.ietf-softwire-dual-stack-lite]</a>, 4rd is designed to allow IPv4 traffic to be delivered over an IPv6 network without the direct provisioning of IPv4 addresses. 4rd can provide an IPv4 prefix, an IPv4 address or a shared IPv4 address. Like 6rd <a href="#RFC5969">[RFC5969]</a>, 4rd is operated in a fully stateless manner within the SP network. The motivation for a stateless alternative to Dual-Stack Lite is described in "Motivations for Stateless IPv4 over IPv6 Migration Solutions" <a href="#I-D.operators-softwire-stateless-4v6-motivation">[I-D.operators-softwire-stateless-4v6-motivation]</a>.  </p>
<p id="rfc.section.1.p.2">4rd relies on IPv6 and is designed to deliver production-quality dual-stack service while allowing IPv4 to be phased out within the SP network. The phasing out of IPv4 within the SP network is independent of whether the end user disables IPv4 service or not.  Further, "Greenfield" IPv6-only networks may use 4rd in order to deliver IPv4 to sites via the IPv6 network in a way that does not require protocol translation between IPv4 and IPv6.</p>
<p id="rfc.section.1.p.3">4rd utilizes an algorithmic mapping between the IPv6 and IPv4 addresses that are assigned for use within the SP network. This mapping provides automatic determination of IPv6 tunnel endpoints from IPv4 destination addresses, allowing the stateless operation of 4rd. 4rd views the IPv6 network as a link layer for IPv4 and supports an automatic tunneling abstraction similar to the Non-Broadcast Multiple Access (NBMA) <a href="#RFC2491">[RFC2491]</a> model.</p>
<p id="rfc.section.1.p.4">The 4rd algorithmic mapping is also used to automatically provision IPv4 addresses and allocating a set of non-overlapping ports for each 4rd CE.  The "SP-facing" (i.e., "WAN") side of the 4rd CE, operate as native IPv6 interface with no need for IPv4 operation or support. On the "end-user-facing" (i.e., "LAN") side of a CE, IPv6 and IPv4 are implemented as for any native dual-stack service delivered by the SP.</p>
<p id="rfc.section.1.p.5">A 4rd domain consists of 4rd Customer Edge (CE) routers and one or more 4rd Border Relays (BRs). IPv4 packets encapsulated by 4rd follow the IPv6 routing topology within the SP network between CEs and among CEs and BRs. CE to CE traffic is direct, while BRs are traversed only for IPv4 packets that are destined to or are arriving from outside a given 4rd domain. As 4rd is stateless, BRs may be reached using anycast for failover and resiliency.</p>
<p id="rfc.section.1.p.6">4rd does not require any stateful NAPT <a href="#RFC3022">[RFC3022]</a> functions at the BRs or elsewhere within the SP network. Instead, 4rd allows for sharing of IPv4 addresses among multiple sites by automatically allocating a set of non-overlapping ports for each CE as part of the stateless mapping function. It is expected that the CE will, in turn, perform local IPv4 Network Address and Port Translation (NAPT) <a href="#RFC3022">[RFC3022]</a> functions for the site as is commonly performed today, except avoiding ports outside of the allocated port set. Although 4rd is designed primarily to support IPv4 deployment to a customer site (such as a residential home network) by an SP, it can equally be applied to an individual host acting as a CE router.</p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> Requirements Language</h1>
<p id="rfc.section.2.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">RFC 2119</a> <cite title="NONE">[RFC2119]</cite>.</p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> Terminology</h1>
<p></p>

<dl>
<dt>4rd domain (Domain):</dt>
<dd style="margin-left: 22">A set of 4rd CEs and BRs connected to the same virtual 4rd link. A service provider may deploy 4rd with a single 4rd domain, or may utilize multiple 4rd domains. Each domain requires a separate 4rd prefix.</dd>
<dt>4rd Border Relay (BR):</dt>
<dd style="margin-left: 22">A 4rd-enabled router managed by the service provider at the edge of a 4rd domain.  A Border Relay router has at least one of each of the following: an IPv6-enabled interface, a 4rd virtual interface acting as an endpoint for the 4rd IPv4 in IPv6 tunnel, and an IPv4 interface connected to the native IPv4 network. A 4rd BR may also be referred to simply as a "BR" within the context of 4rd.</dd>
<dt>4rd Customer Edge (CE):</dt>
<dd style="margin-left: 22">A device functioning as a Customer Edge router in a 4rd deployment. In a residential broadband deployment, this type of device is sometimes referred to as a "Residential Gateway" (RG) or "Customer Premises Equipment" (CPE). A typical 4rd CE serving a residential site has one WAN side interface, one or more LAN side interfaces, and a 4rd virtual interface. A 4rd CE may also be referred to simply as a "CE" within the context of 4rd.</dd>
<dt>CE IPv6 prefix:</dt>
<dd style="margin-left: 22">The IPv6 prefix assigned to a CE by other means than 4rd itself, and used by 4rd to derive a CE 4rd prefix.</dd>
<dt>CE IPv6 address:</dt>
<dd style="margin-left: 22">The IPv6 address given to the CE as part of normal IPv6 Internet access. This address is used by a 4rd CE to create the 4rd prefix as well as to send and receive IPv6-encapsulated IPv4 packets.</dd>
<dt>CE 4rd prefix:</dt>
<dd style="margin-left: 22">The 4rd prefix of the CE. It is derived from the CE IPv6 prefix by a mapping rule according to <a href="#mapping-rules">Section 5.1</a>. Depending on its length, it is an IPv4 prefix, an IPv4 address, or a shared IPv4 address followed by a Port-set ID (<a href="#port-set-id">Section 5.1.2</a>).</dd>
<dt>Port-set ID:</dt>
<dd style="margin-left: 22">In a CE 4rd prefix longer than 32 bits, bits that follow the first 32.  It algorithmically identifies a set of ports exclusively assigned to the CE. As specified in Section <a href="#port-set-id">Section 5.1.2</a>, the set can comprise up to 4 disjoint port ranges.</dd>
<dt>Domain IPv6 prefix:</dt>
<dd style="margin-left: 22">An IPv6 prefix assigned by an ISP to a 4rd domain.</dd>
<dt>Domain IPv4 prefix:</dt>
<dd style="margin-left: 22">A 4rd prefix assigned by an ISP to the 4rd domain.</dd>
<dt>IPv4 Embedded Address (EA) bits:</dt>
<dd style="margin-left: 22">The IPv4 EA-bits in the IPv6 address identify an IPv4 prefix, IPv4 address or part of IPv4 address and port set.</dd>
<dt>Shared IPv4 address:</dt>
<dd style="margin-left: 22">An IPv4 address that is shared among multiple nodes. Each node has a separate part of the transport layer port space.</dd>
</dl>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> 4rd Configuration</h1>
<p id="rfc.section.4.p.1">The IPv4 prefix, IPv4 address or shared IPv4 address for use at a customer site is created by extracting the IPv4 embedded address (EA-bits) from the IPv6 prefix delegated to the site. Combined with the 4rd IPv4 prefix, the IPv4 prefix, IPv4 address or shared IPv4 address is automatically created by the CE for the customer site when IPv6 service is obtained.</p>
<p id="rfc.section.4.p.2">For a given 4rd domain, the BR and CE MUST be configured with a set of mapping rules and BR IPv6 addresses. The configured values for these elements MUST be identical for all CEs and BRs within a given 4rd domain.</p>
<p id="rfc.section.4.p.3">A mapping rule consist of the following elements: a Domain IPv6 prefix and prefix length, a Domain 4rd prefix and prefix length, CE IPv6 Prefix length, and a Domain IPv6 suffix and length.  See <a href="#mapping-rules">section</a> <cite title="NONE">[mapping-rules]</cite> for a detailed description of mapping rules.</p>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> Customer Edge Configuration</h1>
<p id="rfc.section.4.1.p.1">The 4rd configuration elements are set to values that are the same across all CEs within a 4rd domain. The values may be configured in a variety of manners, including provisioning methods such as the Broadband Forum's "TR-69" [TR069] Residential Gateway management interface, an XML-based object retrieved after IPv6 connectivity is established, a DNS record, an SMIv2 MIB [RFC2578], or manual configuration by an administrator. A companion document <a href="#I-D.mrugalski-dhc-dhcpv6-4rd">[I-D.mrugalski-dhc-dhcpv6-4rd]</a>describes how to configure the necessary parameters via IPv6 DHCP. A CE that allows IPv6 configuration by IPv6 DHCP SHOULD implement this option. Other configuration and management methods may use the format described by this option for consistency and convenience of implementation on CEs that support multiple configuration methods.</p>
<p id="rfc.section.4.1.p.2">The only remaining provisioning information the CE requires in order to calculate the 4rd address and enable IPv6 connectivity is an IPv6 prefix for the CE. This CE IPv6 prefix is configured as part of obtaining IPv6 Internet access (i.e., configured via SLAAC, DHCPv6, DHCPv6 PD, or otherwise).</p>
<p id="rfc.section.4.1.p.3">A single 4rd CE MAY be connected to more than one 4rd domain. Each domain a given CE operates within would require its own set of 4rd configuration elements and would generate its own 4rd address.</p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#mapping-rule-parameters" id="mapping-rule-parameters">Algorithmic mapping</a>
</h1>
<h1 id="rfc.section.5.1">
<a href="#rfc.section.5.1">5.1.</a> <a href="#mapping-rules" id="mapping-rules">Mapping Rules</a>
</h1>
<h1 id="rfc.section.5.1.1">
<a href="#rfc.section.5.1.1">5.1.1.</a> <a href="#mapping-prefix" id="mapping-prefix">From a CE IPv6 Prefix to a CE 4rd Prefix</a>
</h1>
<p id="rfc.section.5.1.1.p.1">A 4rd mapping rule establishes a 1:1 mapping between CE IPv6 prefixes and CE 4rd prefixes.</p>
<div id="#rfc.figure.1"></div>
<div id="#prefix-fig"></div>
<p></p>
<pre>
&lt;---------------- CE IPv6 prefix (max 128) --------------&gt;
+-------------------------------+------------------------+
|      Domain IPv6 prefix       |        EA-bits         |
+-------------------------------+------------------------+
&lt;-- Domain IPv6 Prefix length -&gt;:&lt;--  EA-bits length  --&gt;:
                                :                        :
                                :         ||             :
                                :         \/             :
                                :                        :
                                :&lt;--  EA-bits length  --&gt;:
            +-------------------+------------------------+
            | Domain 4rd prefix |        EA-bits         |
            +-------------------+------------------------+
            &lt;----------- CE 4rd prefix (max 47) ---------&gt;
            </pre>
<p id="rfc.section.5.1.1.p.2">A CE derives its CE 4rd prefix from the CE IPv6 prefix, using parameters of the applicable mapping rule. If the domain has several mapping rules, the rule that applies is that whose Domain IPv6 prefix has the longest match with the CE IPv6 prefix. As shown in Figure 1, the CE 4rd prefix is created by concatenating the Domain 4rd prefix with the IPv4 EA-bits, where the IPv4 EA-bits is the remainder of the CE IPv6 prefix after the Domain IPv6 prefix (the length of the Domain IPv6 prefix is defined by the mapping rule).</p>
<h1 id="rfc.section.5.1.2">
<a href="#rfc.section.5.1.2">5.1.2.</a> <a href="#port-set-id" id="port-set-id">From a CE 4rd Prefix to a Port-set ID</a>
</h1>
<p id="rfc.section.5.1.2.p.1">Depending on its length, a CE 4rd prefix is either an IPv4 prefix, a full IPv4 address, or a shared IPv4 address followed by a Port-set ID (<a href="#port-set-id-fig">Figure 2</a>). If it includes a port set ID, this ID specifies which ports are assigned to the the CE for its exclusive use (<a href="#port-set">Section 5.1.3</a>).</p>
<div id="#rfc.figure.2"></div>
<div id="#port-set-id-fig"></div>
<p></p>
<pre>
                     &lt;-- CE 4rd prefix length --&gt;
                     +--------------------------+- - -+
Shorter than 32 bits |       IPv4 prefix        | ... |
                     + -------------------------+- - -+
                     &lt;--------------- 32 -------------&gt;


                     &lt;----- CE 4rd prefix length -----&gt;
                     +--------------------------------+
      32 bits        |          IPv4 address          |
                     +--------------------------------+
                     &lt;--------------- 32 -------------&gt;


                     &lt;----------- CE 4rd prefix length ----------&gt;
                     +-------------------------------+-----------+
    33 to 47 bits    |      IPv4 shared address      |Port-set ID|
                     +-------------------------------+-----------+
                     &lt;--------------- 32 -----------&gt;&lt;- max 15 --&gt;
            </pre>
<h1 id="rfc.section.5.1.3">
<a href="#rfc.section.5.1.3">5.1.3.</a> <a href="#port-set" id="port-set">From a Port-Set ID to a Port Set</a>
</h1>
<p id="rfc.section.5.1.3.p.1">The value of a Port-set ID specifies which ports can be used by a transport layer protocol (UDP, TCP, SCTP etc). Design constraint of the algorithm are the following:</p>
<p></p>

<dl>
<dt>Fairness with respect to special-value ports:</dt>
<dd style="margin-left: 22">No port-set must contain any well-known ports [IANA reference].</dd>
<dt>Fairness with respect to the number of ports</dt>
<dd style="margin-left: 22">For a Port-set-ID's having the same length, all sets must have the same number of ports.</dd>
<dt>Exhaustiveness</dt>
<dd style="margin-left: 22">For any Port-set-ID length, the aggregate of port sets assigned for all values must include all ordinary-value ports.</dd>
</dl>
<p id="rfc.section.5.1.3.p.3">If the Port-set ID has 1 to 12 bits, the set comprises 4 port ranges.  As shown in Figure 3, each port range is defined by its port prefix, made of a range-specific "head" followed by the Port-set ID.  Head values are in binary 1, 01, 001, and 0001.  They are chosen to exclude ports 0-4095 and only them.</p>
<div id="#rfc.figure.3"></div>
<div id="#port-range-fig"></div>
<p></p>
<pre>
                &lt;------- Port (16 bits) --------&gt;
                +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
Port-range a    |1|x x x x x x x x|             |  0xF780 - 0xF7FF
 (head = 1)     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                   \               \
                +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
Port-range b    |0 1|x x x x x x x x|           |  0x7BC0 - 0x7BFF
 (head = 01)    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                     \               \
                +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
Port-range c    |0 0 1|x x x x x x x x|         |  0x3DE0 - 0x3DFF
 (head = 001)   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                       \               \
                +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
Port-range d    |0 0 0 1|x x x x x x x x|       |  0x1EF0 - 0x1EFF
 (head = 0001)  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                &lt;- head-&gt;&lt;--Port-set ID-&gt;                 /\
                &lt;-- Port-range prefix --&gt;&lt;-tail-&gt;         ||
                                                          ||
                                             Example of Port-ranges
                                           if the Port-set ID is 0xEF
            </pre>
<p id="rfc.section.5.1.3.p.4">In the Port-set ID has 13 bits, only the 3 port ranges are assigned, having heads 1, 01, and 001.  If it has 14 bits, only the 2 port ranges having heads 1 and 01 are assigned. If it has 15 bits, only the port range having head 1 is assigned. (In these three cases, the smallest port range has only one element).</p>
<h1 id="rfc.section.5.1.4">
<a href="#rfc.section.5.1.4">5.1.4.</a> <a href="#address-mapping" id="address-mapping">From an IPv4 Address or IPv4 Address + Port to a CE IPv6 Address</a>
</h1>
<div id="#rfc.figure.4"></div>
<div id="#address-mapping-fig"></div>
<p></p>
<pre>
                    Port-set ID
                         |
   &lt;--- CE 4rd prefix ---|-&gt;
   +---------------+---+-|--+
   |IPv4 shared address| '  |
   +---------------+---+----+
                   &lt;--------&gt;
                  EA-bit length
                   :        :
                   :   ||   :
                   :   ||   :
                   :   \/   : Domain IPv6 suffix
                   :        :  |
+------------------+--------+--|-+----------------------------------+
|Domain IPv6 prefix| EA-bits|  ' |                  0               |
+------------------+--------+----+----------------------------------+
&lt;------------ max 64 ------------&gt;
&lt;---------------------- CE IPv6 address (128) ---------------------&gt;
            </pre>
<p id="rfc.section.5.1.4.p.1">In order to find whether a CE IPv6 address can be derived from an IPv4 address, or an IPv4 address + a port, a mapping rule has to be found that matches the IPv4 information:</p>
<p></p>

<ul>
<li>If a mapping rule has a length L of CE IPv4 prefixes which does not exceed 32 bits, there is a match if the IPv4 address starts with the Domain 4rd prefix. The CE 4rd prefix is then the first L bits of the IPv4 address.</li>
<li>If a mapping rule has a length L of CE IPv4 prefixes which exceeds 32 bits, the match can only be found with the IPv4 address and the port. For this, the port is examined to determine which port- range head it starts with: 1, 01,001, or 0001. The N bits that follow this head are taken as Port-set ID, where N is the length of Port set ID of the mapping rule. The CE 4rd prefix is then made of the IPv4 address followed by the Port-set ID.</li>
</ul>
<p id="rfc.section.5.1.4.p.3">If a match has been found, the CE IPv6 prefix is then made of the Domain IPv6 prefix followed by bits of the CE 4rd prefix that follow the Domain 4rd prefix, followed by the Domain IPv6 prefix of the mapping rule if there is one, and followed by 0's up to 128 bits to make a complete IPv6 address (<a href="#RFC4291">[RFC4291]</a>.  <a href="#address-mapping-fig">Figure 4</a> illustrates this process in the case of a shared IPv4 address.</p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#fragmentation" id="fragmentation">Encapsulation and Fragmentation Consideration</a>
</h1>
<p id="rfc.section.6.p.1">Maximum transmission unit (MTU) and fragmentation issues for IPv4 in IPv6 tunneling are discussed in detail in Section 7.2 of <a href="#RFC2473">[RFC2473]</a>. 4rd's scope is limited to a service provider network. IPv6 Path MTU discovery MAY be used to adjust the MTU of the tunnel as described in Section 7.2 of <a href="#RFC2473">[RFC2473]</a>, or the 4rd Tunnel MTU might be explicitly configured.</p>
<p id="rfc.section.6.p.2">The use of an anycast source address could lead to any ICMP error message generated on the path being sent to a different BR. Therefore, using dynamic tunnel MTU Section 7.2 of <a href="#RFC2473">[RFC2473]</a> is subject to IPv6 Path MTU blackholes.</p>
<p id="rfc.section.6.p.3">Multiple BRs using the same anycast source address could send fragmented packets to the same 4rd CE at the same time.  If the fragmented packets from different BRs happen to use the same fragment ID, incorrect reassembly might occur. For this reason, a BR using an anycast source address MUST NOT fragment the IPv6 encapsulated packet.</p>
<p id="rfc.section.6.p.4">If the MTU is well-managed such that the IPv6 MTU on the CE WAN side interface is set so that no fragmentation occurs within the boundary of the SP, then the 4rd Tunnel MTU should be set to the known IPv6 MTU minus the size of the encapsulating IPv6 header (40 bytes). For example, if the IPv6 MTU is known to be 1500 bytes, the 4rd Tunnel MTU might be set to 1460 bytes.  Absent more specific information, the 4rd Tunnel MTU SHOULD default to 1280 bytes.</p>
<p id="rfc.section.6.p.5">For 4rd domain traversal, IPv4 packets are encapsulated in IPv6 packets whose Next header is set to 4 (i.e.  IPv4). If fragmentation of IPv6 packets is needed, it is performed according to <a href="#RFC2460">[RFC2460]</a>. Absent more specific information, the path MTU of a 4rd Domain has to be set to 1280 <a href="#RFC2460">[RFC2460]</a>.</p>
<p id="rfc.section.6.p.6">In domains where IPv4 addresses are not shared, IPv6 destinations are derived from IPv4 addresses alone. Thus, each IPv4 packet can be encapsulated and decapsulated independently of each other. 4rd processing is completely stateless.</p>
<p id="rfc.section.6.p.7">On the other hand, in domains where IPv4 addresses are shared, BR's and CE's can have to encapsulate IPv4 packets whose IPv6 destinations depend on destination ports. Precautions are needed, due to the fact that the destination port of a fragmented datagram is available only in its first fragment. A sufficient precaution consists in reassembling each datagram received in multiple packets, and to treat it as though it would have been received in single packet. This function is such that 4rd is in this case stateful at the IP layer.  (This is common with DS-lite and NAT64/DNS64 which, in addition, are stateful at the transport layer.)  At Domain entrance, this ensures that all pieces of all received IPv4 datagrams go to the right IPv6 destinations.</p>
<p id="rfc.section.6.p.8">Another peculiarity of shared IPv4 addresses is that, without precaution, a destination could simultaneously receive from different sources fragmented datagrams that have the same Datagram ID (the Identification field of <a href="#RFC0791">[RFC0791]</a>.  This would disturb the reassembly process. To eliminate this risk, CE MUST rewrite the datagram ID to an unique value among CEs having same shared IPv4 address upon sending the packets over 4rd tunnel.  This value SHOULD be generated locally within the port-range assigned to a given CE. Note that replacing a Datagram ID in an IPv4 header implies an update of its Header-checksum fieald, by adding to it the one's complement difference between the old and the new values.</p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#behavior" id="behavior">BR and CE behaviors</a>
</h1>
<p id="rfc.section.7.p.1">(a) BR reception of an IPv4 packet</p>
<p></p>

<dl>
<dt>Step 1</dt>
<dd style="margin-left: 22">BR looks up an appropriate mapping rule with a specific Domain 4rd prefix which has the longest match with an IPv4 destination address in the received IPv4 packet. If the mapping rule is not found, the received packet should be discarded. If the length of CE 4rd prefix associated with the mapping rule does not exceed 32 bits, BR proceeds to step 2. If the length of CE 4rd prefix exceeds 32 bits, BR checks that the received packet contains a complete IPv4 datagram. If the packet is fragmented, BR should reassemble the packet. Once BR can obtain the complete IPv4 datagram, BR proceeds to step 2 as though the datagram has been received in a single packet.</dd>
<dt>Step 2</dt>
<dd style="margin-left: 22">BR generates a CE IPv6 address from the IPv4 destination address or the IPv4 destination address and the destination port based on the mapping rule found in step 1. If the CE IPv6 address can be successfully generated, BR encapsulates the IPv4 packet in IPv6 and forwards the IPv6 packet via the IPv6 interface. If the length of the IPv6 encapsulated packet exceeds the MTU of the IPv6 interface, the fragmentation should be done in IPv6.</dd>
</dl>
<p id="rfc.section.7.p.3">(b) BR reception of an IPv6 packet</p>
<p></p>

<dl>
<dt>Step 1</dt>
<dd style="margin-left: 22">If the received IPv6 packet is fragmented, the reassembly should be done in IPv6 at first. Once BR obtains a complete IPv6 packet, BR looks up an appropriate mapping rule with a specific Domain 4rd prefix which has the longest match with an IPv4 source address in the encapsulated IPv4 packet. If the mapping rule is not found, the received IPv6 packet should be discarded. BR derives a CE IPv6 address from the IPv4 source address or the IPv4 source address and the source port in the encapsulated IPv4 packet based on the mapping rule. If the CE IPv6 address is eqaul to the IPv6 source address in the received IPv6 packet, BR decapsulates the IPv4 packet and then forward it via the IPv4 interface.</dd>
</dl>
<p id="rfc.section.7.p.5">(c) CE reception of an IPv4 packet</p>
<p></p>

<dl>
<dt>Step 1</dt>
<dd style="margin-left: 22">CE looks up an appropriate mapping rule with a specific Doamin 4rd prefix which has the longest match with an IPv4 destination address in the received IPv4 packet. If the mapping rule is found, the CE 4rd prefix must be checked. If the length does not exceeds 32 bits, CE proceeds to step 2. If the length exceeds 32 bits, CE checks that the received IPv4 packet contains a complete IPv4 datagram. If the packet is fragmented, CE should reassemble the packet. Once CE can obtain the complete IPv4 datagram, CE proceeds to step 2 as though the datagram has been received in a single packet.  If the mapping rule is not found, CE proceeds to step 2.</dd>
<dt>Step 2</dt>
<dd style="margin-left: 22">If the mapping rule is found in step 1, CE derives a IPv6 destination address from the IPv4 destination address or the IPv4 destination address and the destination port based on the mapping rule.  If the IPv6 destination address can be derived successfully, CE encapsulates the IPv4 packet in IPv6 whose destination address is set to the derived IPv6 address. If the mapping rule is not found in step 1, CE encapsulates the IPv4 packet in IPv6 whose destination address is set to BR IPv6 address.  Then CE forwards the IPv6 packet via IPv6 interface. If the length of the IPv6 packet exceeds the MTU of the IPv6 interface, the fragmentation should be done in IPv6. Moreover, if using IPv4 shared address, a Datagram ID in the received IPv4 header must be over-written before encapsulating the IPv4 packet in IPv6. In case of shared IPv4 address, the Datagram ID must be unique among CEs sharing the same IPv4 address. Hence, CE should assign the unique value and set this value to the datagram ID in IPv4 header.  This value may be generated from the port-range assigned to the CE to keep the uniqueness among CEs sharing same IPv4 address.</dd>
</dl>
<p id="rfc.section.7.p.7">(d) CE reception of an IPv6 packet</p>
<p></p>

<dl>
<dt>Step 1</dt>
<dd style="margin-left: 22">If the received IPv6 packet is fragmented, the reassembly should be done in IPv6 at first. Once CE obtains a complete IPv6 packet, CE looks up an appropriate mapping rule with s specific Domain 4rd prefix which has the longest match with an IPv4 source address in the encapsulated IPv4 packet. If the mapping rule is found, CE derives a CE IPv6 address from the IPv4 source address or the IPv4 source address and the source port based on the mapping rule and then checks that the IPv6 source address of the received IPv6 packet is matched to it. If the mapping rule is not found, CE checks that the IPv6 source address is matched to BR IPv6 address. In case of success, CE decapsulates the IPv4 packet and forward it via the IPv4 interface.</dd>
</dl>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> NAT considerations</h1>
<p id="rfc.section.8.p.1">NAT44 should be implemented in CPE which has 4rd CE function. The NAT44 must conform that best current practice documented in <a href="#RFC4787">[RFC4787]</a>, <a href="#RFC5508">[RFC5508]</a> and <a href="#RFC5382">[RFC5382]</a>. When there are restricted available port numbers in a given 4rd CE described in <a href="#port-set">Section 5.1.3</a>, the NAT44 must restrict mapping ports within the port-set.</p>
<h1 id="rfc.section.9">
<a href="#rfc.section.9">9.</a> ICMP</h1>
<p id="rfc.section.9.p.1">ICMP message should be supported in 4rd domain. Hence, the NAT44 in 4rd CE must implement the behavior for ICMP message conforming to the best current practice documented in <a href="#RFC5508">[RFC5508]</a>.</p>
<p id="rfc.section.9.p.2">If a 4rd CE receives an ICMP message having ICMP identifier field in ICMP header, NAT44 in the 4rd CE must rewrite this field to a specific value assigned from the port-set described in <a href="#port-set">Section 5.1.3</a>. BR and other CEs must handle this field similar to the port number in tcp/udp header upon receiving the ICMP message with ICMP identifier field.</p>
<p id="rfc.section.9.p.3">If a 4rd BR and CE receives an ICMP error message without ICMP identifier field for some errors that is detected inside a IPv6 tunnel, a 4rd BR and CE should replay the ICMP error message to the original source. This behavior should be implemented conforming to the section 8 of <a href="#RFC2473">[RFC2473]</a>. The 4rd BR and CE obtain the origianl IPv6 tunnel packet storing in ICMP payload and then decapsulate IPv4 packet. Finally the 4rd BR and CE generate a new ICMP error message from the decapsulated IPv4 packet and then forward it.</p>
<p id="rfc.section.9.p.4">If a 4rd BR receives an ICMP error message on its IPv4 interface, the 4rd BR should replay the ICMP message to an appropriate 4rd CE. If IPv4 address is not shared, the 4rd BR generates a CE IPv6 address from the IPv4 destination address in the ICMP error message and encapsulates the ICMP message in IPv6. If IPv4 address is shared, the 4rd BR derives an original IPv4 packet from the ICMP payload and generates a CE IPv6 address from the source address and the source port in the original IPv4 packet. If the 4rd BR can generate the CE IPv6 address, the 4rd BR encapsulates the ICMP error message in IPv6 and then forward it to its IPv6 interface.</p>
<h1 id="rfc.section.10">
<a href="#rfc.section.10">10.</a> <a href="#security" id="security">Security Considerations</a>
</h1>
<p></p>

<dl>
<dt>Spoofing attacks:</dt>
<dd style="margin-left: 22">With consistency checks between IPv4 and IPv6 sources that are performed on IPv4/IPv6 packets received by BR's and CE's (<a href="#behavior">Section 7</a>), 4rd does not introduce any opportunity for spoofing attack that would not pre-exist in IPv6.</dd>
<dt>Denial-of-service attacks:</dt>
<dd style="margin-left: 22">In 4rd domains where IPv4 addresses are shared, the fact that IPv4 datagram reassembly may be necessary introduces an opportunity for DOS attacks (Section 4.4).  This is inherent to address sharing, and is common with other address sharing approaches such as DS- lite and NAT64/DNS64. The best protection against such attacks is to accelerate IPv6 enablement in both clients and servers so that, where 4rd is supported, it is less and less used.</dd>
<dt>Routing-loop attacks:</dt>
<dd style="margin-left: 22">This attack may exist in some automatic-tunneling scenarios are documented in <a href="#I-D.ietf-v6ops-tunnel-loops">[I-D.ietf-v6ops-tunnel-loops]</a>. They cannot exist with 4rd because each BRs checks that the IPv6 source address of a received IPv6 packet is a CE address <a href="#mapping-rules">Section 5.1</a>.</dd>
<dt>Attacks facilitated by restricted port set:</dt>
<dd style="margin-left: 22">From hosts that are not subject to ingress filtering of <a href="#RFC2827">[RFC2827]</a>, some attacks are possible by intervening with faked packets during ongoing transport connections (<a href="#RFC4953">[RFC4953]</a>, <a href="#RFC5961">[RFC5961]</a>, <a href="#RFC6056">[RFC6056]</a>. The attacks depend on guessing which ports are currently used by target hosts. Using unrestricted port set which mean that are IPv6 is exactly preferable. To avoid this attacks using restricted port set, NAT44 filtering behavior must be "Address-Dependent Filtering".</dd>
</dl>
<h1 id="rfc.section.11">
<a href="#rfc.section.11">11.</a> <a href="#iana" id="iana">IANA Consideration</a>
</h1>
<p id="rfc.section.11.p.1">This document makes no request of IANA.</p>
<h1 id="rfc.section.12">
<a href="#rfc.section.12">12.</a> <a href="#acknowledgements" id="acknowledgements">Acknowledgements</a>
</h1>
<p id="rfc.section.12.p.1">This draft is based on original idea described in <a href="#I-D.despres-softwire-sam">[I-D.despres-softwire-sam]</a>. The authors would like to thank Remi Despres, Mark Townsley, Wojciech Dec, Olivier Vautrin and Satoru Matsushima.</p>
<h1 id="rfc.references">
<a href="#rfc.references">13.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">13.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC0791">[RFC0791]</b></td>
<td class="top">
<a title="University of Southern California (USC)/Information Sciences Institute">Postel, J.</a>, "<a href="http://tools.ietf.org/html/rfc791">Internet Protocol</a>", STD 5, RFC 791, September 1981.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2460">[RFC2460]</b></td>
<td class="top">
<a href="mailto:deering@cisco.com" title="Cisco Systems, Inc.">Deering, S.E.</a> and <a href="mailto:hinden@iprg.nokia.com" title="Nokia">R.M. Hinden</a>, "<a href="http://tools.ietf.org/html/rfc2460">Internet Protocol, Version 6 (IPv6) Specification</a>", RFC 2460, December 1998.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3315">[RFC3315]</b></td>
<td class="top">
<a>Droms, R.</a>, <a>Bound, J.</a>, <a>Volz, B.</a>, <a>Lemon, T.</a>, <a>Perkins, C.</a> and <a>M. Carney</a>, "<a href="http://tools.ietf.org/html/rfc3315">Dynamic Host Configuration Protocol for IPv6 (DHCPv6)</a>", RFC 3315, July 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4291">[RFC4291]</b></td>
<td class="top">
<a>Hinden, R.</a> and <a>S. Deering</a>, "<a href="http://tools.ietf.org/html/rfc4291">IP Version 6 Addressing Architecture</a>", RFC 4291, February 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2491">[RFC2491]</b></td>
<td class="top">
<a href="mailto:gja@lucent.com" title="Bell Laboratories, Lucent Technologies">Armitage, G.</a>, <a href="mailto:paschulter@acm.org" title="Bright Tiger Technologies">Schulter, P.</a>, <a href="mailto:jork@kar.dec.com" title="European Applied Research Center">Jork, M.</a> and <a href="mailto:harter@zk3.dec.com" title="Digital UNIX Networking">G. Harter</a>, "<a href="http://tools.ietf.org/html/rfc2491">IPv6 over Non-Broadcast Multiple Access (NBMA) networks</a>", RFC 2491, January 1999.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">13.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="I-D.despres-softwire-sam">[I-D.despres-softwire-sam]</b></td>
<td class="top">
<a>Despres, R</a>, "<a href="http://tools.ietf.org/html/draft-despres-softwire-sam-01">Stateless Address Mapping (SAM) - a Simplified Mesh-Softwire Model</a>", Internet-Draft draft-despres-softwire-sam-01, July 2010.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-softwire-dual-stack-lite">[I-D.ietf-softwire-dual-stack-lite]</b></td>
<td class="top">
<a>Durand, A</a>, <a>Droms, R</a>, <a>Woodyatt, J</a> and <a>Y Lee</a>, "<a href="http://tools.ietf.org/html/draft-ietf-softwire-dual-stack-lite-11">Dual-Stack Lite Broadband Deployments Following IPv4 Exhaustion</a>", Internet-Draft draft-ietf-softwire-dual-stack-lite-11, May 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-v6ops-tunnel-loops">[I-D.ietf-v6ops-tunnel-loops]</b></td>
<td class="top">
<a>Nakibly, G</a> and <a>F Templin</a>, "<a href="http://tools.ietf.org/html/draft-ietf-v6ops-tunnel-loops-07">Routing Loop Attack using IPv6 Automatic Tunnels: Problem Statement and Proposed Mitigations</a>", Internet-Draft draft-ietf-v6ops-tunnel-loops-07, May 2011.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2473">[RFC2473]</b></td>
<td class="top">
<a href="mailto:aconta@lucent.com" title="Lucent Technologies Inc.">Conta, A.</a> and <a href="mailto:deering@cisco.com" title="Cisco Systems">S. Deering</a>, "<a href="http://tools.ietf.org/html/rfc2473">Generic Packet Tunneling in IPv6 Specification</a>", RFC 2473, December 1998.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2827">[RFC2827]</b></td>
<td class="top">
<a>Ferguson, P.</a> and <a>D. Senie</a>, "<a href="http://tools.ietf.org/html/rfc2827">Network Ingress Filtering: Defeating Denial of Service Attacks which employ IP Source Address Spoofing</a>", BCP 38, RFC 2827, May 2000.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3022">[RFC3022]</b></td>
<td class="top">
<a>Srisuresh, P.</a> and <a>K. Egevang</a>, "<a href="http://tools.ietf.org/html/rfc3022">Traditional IP Network Address Translator (Traditional NAT)</a>", RFC 3022, January 2001.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4787">[RFC4787]</b></td>
<td class="top">
<a>Audet, F.</a> and <a>C. Jennings</a>, "<a href="http://tools.ietf.org/html/rfc4787">Network Address Translation (NAT) Behavioral Requirements for Unicast UDP</a>", BCP 127, RFC 4787, January 2007.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4953">[RFC4953]</b></td>
<td class="top">
<a>Touch, J.</a>, "<a href="http://tools.ietf.org/html/rfc4953">Defending TCP Against Spoofing Attacks</a>", RFC 4953, July 2007.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5382">[RFC5382]</b></td>
<td class="top">
<a>Guha, S.</a>, <a>Biswas, K.</a>, <a>Ford, B.</a>, <a>Sivakumar, S.</a> and <a>P. Srisuresh</a>, "<a href="http://tools.ietf.org/html/rfc5382">NAT Behavioral Requirements for TCP</a>", BCP 142, RFC 5382, October 2008.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5508">[RFC5508]</b></td>
<td class="top">
<a>Srisuresh, P.</a>, <a>Ford, B.</a>, <a>Sivakumar, S.</a> and <a>S. Guha</a>, "<a href="http://tools.ietf.org/html/rfc5508">NAT Behavioral Requirements for ICMP</a>", BCP 148, RFC 5508, April 2009.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5961">[RFC5961]</b></td>
<td class="top">
<a>Ramaiah, A.</a>, <a>Stewart, R.</a> and <a>M. Dalal</a>, "<a href="http://tools.ietf.org/html/rfc5961">Improving TCP's Robustness to Blind In-Window Attacks</a>", RFC 5961, August 2010.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5969">[RFC5969]</b></td>
<td class="top">
<a>Townsley, W.</a> and <a>O. Troan</a>, "<a href="http://tools.ietf.org/html/rfc5969">IPv6 Rapid Deployment on IPv4 Infrastructures (6rd) -- Protocol Specification</a>", RFC 5969, August 2010.</td>
</tr>
<tr>
<td class="reference"><b id="RFC6056">[RFC6056]</b></td>
<td class="top">
<a>Larsen, M.</a> and <a>F. Gont</a>, "<a href="http://tools.ietf.org/html/rfc6056">Recommendations for Transport-Protocol Port Randomization</a>", BCP 156, RFC 6056, January 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.operators-softwire-stateless-4v6-motivation">[I-D.operators-softwire-stateless-4v6-motivation]</b></td>
<td class="top">
<a>Boucadair, M</a>, <a>Matsushima, S</a>, <a>Lee, Y</a>, <a>Bonness, O</a>, <a>Borges, I</a> and <a>G Chen</a>, "<a href="http://tools.ietf.org/html/draft-operators-softwire-stateless-4v6-motivation-02">Motivations for Stateless IPv4 over IPv6 Migration Solutions</a>", Internet-Draft draft-operators-softwire-stateless-4v6-motivation-02, June 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.mrugalski-dhc-dhcpv6-4rd">[I-D.mrugalski-dhc-dhcpv6-4rd]</b></td>
<td class="top">
<a>Mrugalski, T</a>, "<a href="http://tools.ietf.org/html/draft-mrugalski-dhc-dhcpv6-4rd-00">DHCPv6 Options for IPv4 Residual Deployment (4rd)</a>", Internet-Draft draft-mrugalski-dhc-dhcpv6-4rd-00, July 2011.</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Tetsuya Murakami</span> 
	  <span class="n hidden">
		<span class="family-name">Murakami</span>
	  </span>
	</span>
	<span class="org vcardline">IP Infusion</span>
	<span class="adr">
	  <span>1188 East Arques Avenue</span>

	  <span class="vcardline">
		<span class="locality">Sunnyvale</span>,  
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:tetsuya@ipinfusion.com">tetsuya@ipinfusion.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Ole Troan</span> 
	  <span class="n hidden">
		<span class="family-name">Troan</span>
	  </span>
	</span>
	<span class="org vcardline">cisco</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality">Oslo</span>,  
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline">Norway</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:ot@cisco.com">ot@cisco.com</a></span>

  </address>
</div>

</body>
</html>