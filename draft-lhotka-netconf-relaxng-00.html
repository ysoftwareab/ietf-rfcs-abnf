<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Modular RELAX NG Schema of
  NETCONF RPC and Protocol Operations</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Modular RELAX NG Schema of
  NETCONF RPC and Protocol Operations">
<meta name="keywords" content="NETCONF, RELAX NG, XML schema">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">NETCONF</td><td class="header">L. Lhotka</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">CESNET</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">March 02, 2009</td></tr>
<tr><td class="header">Expires: September 3, 2009</td><td class="header">&nbsp;</td></tr>
</table></td></tr></table>
<h1><br />Modular RELAX NG Schema of
  NETCONF RPC and Protocol Operations<br />draft-lhotka-netconf-relaxng-00</h1>

<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on September 3, 2009.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents in effect on the date of
publication of this document (http://trustee.ietf.org/license-info).
Please review these documents carefully, as they describe your
rights and restrictions with respect to this document.</p>

<h3>Abstract</h3>

<p>This memo presents a schema for NETCONF RPC and protocol
    operations expressed in RELAX NG (compact syntax). The schema is
    modular and cleanly separates the server and client part of the
    NETCONF vocabulary and also the schema extensions provided by
    optional capabilities. The modular structure improves readability
    but also enables selecting certain modules and assembling them into
    a grammar that can be used for validation of NETCONF protocol data
    units.
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#sec-intro">1.</a>&nbsp;
Introduction<br />
<a href="#sec-xsd">2.</a>&nbsp;
Problems of the NETCONF XSD Schema<br />
<a href="#sec-desc">3.</a>&nbsp;
Description of the RELAX NG Schemas<br />
<a href="#sec-use">4.</a>&nbsp;
Assembling the Modules into Validation Schemas<br />
<a href="#sec-conc">5.</a>&nbsp;
Conclusions<br />
<a href="#rfc.references1">6.</a>&nbsp;
References<br />
<a href="#app-schema">Appendix&nbsp;A.</a>&nbsp;
RELAX NG Schema Modules<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#base-common">A.1.</a>&nbsp;
Common patterns<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#base-client">A.2.</a>&nbsp;
Base Client Schema<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#base-server">A.3.</a>&nbsp;
Base Server Schema<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#writable-running">A.4.</a>&nbsp;
Capability :writable-running<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#candidate">A.5.</a>&nbsp;
Capability :candidate<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#confirmed-commit">A.6.</a>&nbsp;
Capability :confirmed-commit<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rollback-on-error">A.7.</a>&nbsp;
Capability :rollback-on-error<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#validate">A.8.</a>&nbsp;
Capability :validate<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#startup">A.9.</a>&nbsp;
Capability :startup<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#url">A.10.</a>&nbsp;
Capability :url<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#xpath">A.11.</a>&nbsp;
Capability :xpath<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Author's Address<br />
</p>
<br clear="all" />

<a name="sec-intro"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>Specification of the NETCONF protocol <a class='info' href='#RFC4741'>[1]<span> (</span><span class='info'>Enns, R., Ed., &ldquo;NETCONF Configuration Protocol,&rdquo; December&nbsp;2006.</span><span>)</span></a>
    contains in its Appendix B a formal definition of the vocabulary
    of RPC and protocol operations expressed using the W3C XML Schema
    language (<a class='info' href='#XSD1'>[2]<span> (</span><span class='info'>Thompson, H., Ed., Beech, D., Ed., Maloney, M., Ed., and N. Mendelsohn, Ed., &ldquo;XML Schema Part 1: Structures, Second Edition,&rdquo; October&nbsp;2004.</span><span>)</span></a>, <a class='info' href='#XSD2'>[3]<span> (</span><span class='info'>Biron, P., Ed. and A. Malhotra, Ed., &ldquo;XML Schema Part 2: Datatypes, Second Edition,&rdquo; October&nbsp;2004.</span><span>)</span></a> -
    henceforth referred to as "XSD").
</p>
<p>However, the NETCONF protocol vocabulary actually consists of
    two distinct parts - one for the NETCONF client and the other for
    the NETCONF server - that can never appear together in the same
    NETCONF PDU. The overlap of these two parts is small and even if
    the same element, such as &lt;hello&gt;, is allowed in both, the
    content model of each version may differ. Moreover, the PDU
    contents in every particular case depend on the capabilities
    supported by the server and negotiated in the &lt;hello&gt;
    messages. The all-encompassing approach of the NETCONF XSD schema
    cannot take these differences into account and the grammar is thus
    in many places too liberal. As a result, the XSD schema can hardly
    be used for serious validation of NETCONF PDUs.
</p>
<p>This report introduces a new modular schema for the same
    NETCONF protocol vocabulary expressed in RELAX NG <a class='info' href='#RNG'>[4]<span> (</span><span class='info'>ISO/IEC, &ldquo;Document Schema Definition Languages (DSDL) - Part 2: 	Regular Grammar-Based Validation - RELAX NG,&rdquo; December&nbsp;2002.</span><span>)</span></a>, a simple but powerful schema language that became
    Part 2 of the international standard ISO/IEC 19757 <a class='info' href='#DSDL'>[5]<span> (</span><span class='info'>ISO/IEC, &ldquo;Document Schema Definition Languages (DSDL) - Part 1:         Overview,&rdquo; 11&nbsp;2004.</span><span>)</span></a>. RELAX NG has two official syntaxes, XML and
    compact, the latter, being designed primarily for human readers
    without special training, is considerably more suitable for
    inclusion in standardization documents such as RFCs than XML-based
    syntaxes.
</p>
<p>The goal of this work is twofold:
    </p>
<ol class="text">
<li>Demonstrate that RELAX NG is a sound alternative to XSD for
      the given purpose in that it is able to express the same (or
      even more detailed) grammar and data-typing rules as the
      existing NETCONF XSD schema and do it in a way that is
      considerably more human-readable.
</li>
<li>Use the extensibility framework of RELAX NG for dividing the
      schema into smaller modules according to the logic of the
      NETCONF protocol. Such a decomposition will not only further aid
      readability and make the parts of the schema easier to maintain,
      but also allow for using the modules directly for NETCONF PDU
      validation.
</li>
</ol>

<p>The report is organized as follows: In the <a class='info' href='#sec-xsd'>Section&nbsp;2<span> (</span><span class='info'>Problems of the NETCONF XSD Schema</span><span>)</span></a> we summarize the problems of the NETCONF XSD
    schema, <a class='info' href='#sec-desc'>Section&nbsp;3<span> (</span><span class='info'>Description of the RELAX NG Schemas</span><span>)</span></a> describes the structure and main
    design features of the modular RELAX NG schema, <a class='info' href='#sec-use'>Section&nbsp;4<span> (</span><span class='info'>Assembling the Modules into Validation Schemas</span><span>)</span></a> shows how to use the modules for effective
    validation of NETCONF PDUs in specific contexts and finally <a class='info' href='#sec-conc'>Section&nbsp;5<span> (</span><span class='info'>Conclusions</span><span>)</span></a> concludes the reports. <a class='info' href='#app-schema'>Appendix&nbsp;A<span> (</span><span class='info'>RELAX NG Schema Modules</span><span>)</span></a> contains full listing of the RELAX NG
    modules in the compact syntax.
</p>
<a name="sec-xsd"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Problems of the NETCONF XSD Schema</h3>

<p>The NETCONF XSD schema in Appendix B of <a class='info' href='#RFC4741'>[1]<span> (</span><span class='info'>Enns, R., Ed., &ldquo;NETCONF Configuration Protocol,&rdquo; December&nbsp;2006.</span><span>)</span></a> can serve well as a set of formalized
    guidelines for implementers of the NETCONF protocol, especially
    the RPC layer. However, this schema is much less useful for the
    second major purpose of XML schemas, namely for validating
    documents, in our case NETCONF PDUs. The reason for this
    deficiency is that many of the constraints in the schema are
    rather lax or even logically inconsistent. The latter problem is
    manifested, for example, in the &lt;session-id&gt; parameter of
    the &lt;hello&gt; element: the schema declares it as optional
    (minOccurs="0") but, in fact, this content model is appropriate
    neither for server's nor for client's version of &lt;hello&gt; -
    it is mandatory in the former but not allowed at all in the
    latter.
</p>
<p>Similarly, the borderline case of a &lt;rpc-reply&gt; to an
    invalid &lt;rpc&gt; lacking the "message-id" parameter led the
    schema designers to declaring this parameter as optional. As an
    unfortunate result, any &lt;rpc-reply&gt; with "message-id"
    missing will be found valid.
</p>
<p>Strict validation of NETCONF PDUs in a particular context must
    also take into account the set of capabilities supported by the
    concrete server. The XSD schema is not designed to allow such
    specialization.
</p>
<p>Finally, Appendix A of <a class='info' href='#RFC4741'>[1]<span> (</span><span class='info'>Enns, R., Ed., &ldquo;NETCONF Configuration Protocol,&rdquo; December&nbsp;2006.</span><span>)</span></a> defines the
    standard NETCONF errors and specifies constraints on their
    contents. For example, some combinations or "error-tag" and
    "error-type" parameters are not permitted, some errors have
    prescribed content of "error-info" while others cannot have this
    parameter, and all these standard errors have severity
    "error". Again, the XSD schema doesn't take these constraints into
    account and allows all possible combinations of error
    parameters.
</p>
<a name="sec-desc"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Description of the RELAX NG Schemas</h3>

<p>Modular RELAX NG schema is designed for much stricter
    validation of NETCONF PDUs than the XSD schema. This is achieved by
    utilizing auxiliary information that is typically available, such
    as the originator of the PDU - server or client - and list of
    capabilities supported by the server.
</p>
<p>The RELAX NG schema is divided into 11 modules, each of them
    stored in a separate file:
    </p>
<ul class="text">
<li><a class='info' href='#base-common'>nc-base-common<span> (</span><span class='info'>Common patterns</span><span>)</span></a>
</li>
<li><a class='info' href='#base-client'>nc-base-client<span> (</span><span class='info'>Base Client Schema</span><span>)</span></a>
</li>
<li><a class='info' href='#base-server'>nc-base-server<span> (</span><span class='info'>Base Server Schema</span><span>)</span></a>
</li>
<li><a class='info' href='#writable-running'>nc-writable-running-client<span> (</span><span class='info'>Capability :writable-running</span><span>)</span></a>
</li>
<li><a class='info' href='#candidate'>nc-candidate-client<span> (</span><span class='info'>Capability :candidate</span><span>)</span></a>
</li>
<li><a class='info' href='#confirmed-commit'>nc-confirmed-commit-client<span> (</span><span class='info'>Capability :confirmed-commit</span><span>)</span></a>
</li>
<li><a class='info' href='#rollback-on-error'>nc-rollback-on-error-client<span> (</span><span class='info'>Capability :rollback-on-error</span><span>)</span></a>
</li>
<li><a class='info' href='#validate'>nc-validate-client<span> (</span><span class='info'>Capability :validate</span><span>)</span></a>
</li>
<li><a class='info' href='#startup'>nc-startup-client<span> (</span><span class='info'>Capability :startup</span><span>)</span></a>
</li>
<li><a class='info' href='#url'>nc-url-client<span> (</span><span class='info'>Capability :url</span><span>)</span></a>
</li>
<li><a class='info' href='#xpath'>nc-xpath-client<span> (</span><span class='info'>Capability :xpath</span><span>)</span></a>
</li>
</ul>

<p>The file names are composed of the module name and the
    appropriate extension - either ".rng" or ".rnc", depending on
    whether the file contains RELAX NG in the XML or compact syntax.
</p>
<p>The main division line in the schema goes between the client
    and server part. Hence, modules "nc-base-client" and
    "nc-base-server" contain the client and server vocabulary,
    respectively. However, this is only the bare-bones NETCONF,
    without any optional capabilities. Few parameters and RELAX NG
    patterns are common to both the client and server schemas and
    these are contained in the "nc-base-common" module.
</p>
<p>Further, extensions to the schema provided by optional
    capabilities are defined in separate modules. In general, there
    would be two modules per capability - one with the server and the
    other with the client extensions. However, all the standard
    extensions defined in <a class='info' href='#RFC4741'>[1]<span> (</span><span class='info'>Enns, R., Ed., &ldquo;NETCONF Configuration Protocol,&rdquo; December&nbsp;2006.</span><span>)</span></a> only affect the
    client vocabulary, so the server module is not
    needed. Nevertheless, other capabilities may extend or change the
    server vocabulary, too, for example by introducing new error
    types.
</p>
<p>The schema modules are designed for maximum
    extensibility. Therefore, their RELAX NG patterns mainly use the
    "content-oriented" style that allows new content to be easily
    added without redefining entire patterns. Due to this design, the
    capability modules can be generally very short and easy to
    understand. However, taking the content-oriented design to the
    extreme would make the schemas unwieldy, so we use it only in
    places where extensions are likely.
</p>
<a name="sec-use"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Assembling the Modules into Validation Schemas</h3>

<p>Two of the RELAX NG modules - "nc-base-client" and
    "nc-base-server" - are full-fledged grammars that can be readily
    used for validating NETCONF PDUs generated by the client and
    server, respectively. So the following PDU (taken from <a class='info' href='#RFC4741'>[1]<span> (</span><span class='info'>Enns, R., Ed., &ldquo;NETCONF Configuration Protocol,&rdquo; December&nbsp;2006.</span><span>)</span></a>) will successfully validate against the
    "nc-base-client" schema:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>&lt;rpc xmlns="urn:ietf:params:xml:ns:netconf:base:1.0"
     message-id="101"&gt;
  &lt;get-config&gt;
    &lt;source&gt;
      &lt;running/&gt;
    &lt;/source&gt;
  &lt;/get-config&gt;
&lt;/rpc&gt;
</pre></div>
<p>However, if we replace the &lt;running/&gt; element in the
    "source" parameter with &lt;startup/&gt;, the validation fails
    since the optional capabilities such as :startup are not supported
    by the "nc-base-client" schema. We can allow &lt;startup/&gt; as
    the value of the "source" parameter simply by using the following
    schema:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
include "nc-base-client.rnc"
include "nc-startup-client.rnc"
</pre></div>
<p>In the same way, we can include any combination of capabilities
    as long as they are not mutually exclusive.
</p>
<p>For the server PDUs the procedure is analogical but generally
    simpler since none of the standard capabilities defined in <a class='info' href='#RFC4741'>[1]<span> (</span><span class='info'>Enns, R., Ed., &ldquo;NETCONF Configuration Protocol,&rdquo; December&nbsp;2006.</span><span>)</span></a> affects the server schema, so the
    "nc-base-server" schema is sufficient for validating server
    PDUs.
</p>
<a name="sec-conc"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Conclusions</h3>

<p>The set of RELAX NG schemas presented in this report provide a
    modular grammar that can be used as a formal definition and
    documentation of the NETCONF vocabulary, but also for validating
    NETCONF PDUs. As a validation vehicle, though, these schemas are
    considerably stricter than the W3C XML Schema from <a class='info' href='#RFC4741'>[1]<span> (</span><span class='info'>Enns, R., Ed., &ldquo;NETCONF Configuration Protocol,&rdquo; December&nbsp;2006.</span><span>)</span></a>. This is mainly due to the fact that each of
    the RELAX NG schema modules deals with a certain specific part of
    the vocabulary - client or server side of a NETCONF channel, or
    individual capabilities. The modules can be assembled in many
    different ways into validation schemas that may be used for
    effective NETCONF PDU validation.
</p>
<p>The fact that the modular RELAX NG schema is stricter and more
    validation-oriented than its XSD counterpart doesn't mean that it
    is less readable. On the contrary, separating the server and
    client vocabularies and factoring out the optional capabilities
    resulted in base server and client schemas that are simple and
    easy to comprehend. Likewise, most capability schemas are almost
    trivial but still show quite precisely where and how each
    capability extends the vocabulary.
</p>
<p>The simplicity and limited scope of the schema modules also
    enables their inclusion in larger validation frameworks such as
    DSDL <a class='info' href='#DSDL'>[5]<span> (</span><span class='info'>ISO/IEC, &ldquo;Document Schema Definition Languages (DSDL) - Part 1:         Overview,&rdquo; 11&nbsp;2004.</span><span>)</span></a> and/or combination with a NETCONF
    concrete data model expressed in RELAX NG or a different data
    modelling language.
</p>
<p>As a matter of fact, most improvements described in this report
    could, and probably should, be applied to the NETCONF XSD schema
    in <a class='info' href='#RFC4741'>[1]<span> (</span><span class='info'>Enns, R., Ed., &ldquo;NETCONF Configuration Protocol,&rdquo; December&nbsp;2006.</span><span>)</span></a>, too. The only notable exception is
    the compact syntax, which is special to RELAX NG.
</p>
<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>6.&nbsp;References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC4741">[1]</a></td>
<td class="author-text">Enns, R., Ed., &ldquo;<a href="http://tools.ietf.org/html/rfc4741">NETCONF Configuration Protocol</a>,&rdquo; RFC&nbsp;4741, December&nbsp;2006.</td></tr>
<tr><td class="author-text" valign="top"><a name="XSD1">[2]</a></td>
<td class="author-text">Thompson, H., Ed., Beech, D., Ed., Maloney, M., Ed., and N. Mendelsohn, Ed., &ldquo;XML Schema Part 1: Structures, Second Edition,&rdquo; October&nbsp;2004.</td></tr>
<tr><td class="author-text" valign="top"><a name="XSD2">[3]</a></td>
<td class="author-text">Biron, P., Ed. and A. Malhotra, Ed., &ldquo;XML Schema Part 2: Datatypes, Second Edition,&rdquo; October&nbsp;2004.</td></tr>
<tr><td class="author-text" valign="top"><a name="RNG">[4]</a></td>
<td class="author-text">ISO/IEC, &ldquo;Document Schema Definition Languages (DSDL) - Part 2:
	Regular Grammar-Based Validation - RELAX NG,&rdquo; ISO/IEC&nbsp;19757-2, December&nbsp;2002.</td></tr>
<tr><td class="author-text" valign="top"><a name="DSDL">[5]</a></td>
<td class="author-text">ISO/IEC, &ldquo;Document Schema Definition Languages (DSDL) - Part 1:
        Overview,&rdquo; ISO/IEC&nbsp;19757-1, 11&nbsp;2004.</td></tr>
</table>

<a name="app-schema"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
RELAX NG Schema Modules</h3>

<p>This appendix contains listings of the RELAX NG modules in the
    compact syntax. The modules cover the NETCONF client and server
    vocabularies including all optional capabilities described in RFC
    4741 <a class='info' href='#RFC4741'>[1]<span> (</span><span class='info'>Enns, R., Ed., &ldquo;NETCONF Configuration Protocol,&rdquo; December&nbsp;2006.</span><span>)</span></a>.
</p>
<a name="base-common"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.1"></a><h3>A.1.&nbsp;
Common patterns</h3>

<p>This module defines several parameters patterns that are
      referenced in both the client and server schemas.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>BEGIN

# source file: nc-base-common.rng

default namespace = "urn:ietf:params:xml:ns:netconf:base:1.0"
namespace a = "http://relaxng.org/ns/compatibility/annotations/1.0"

## This pattern specifies the URI for the base NETCONF capability.
## See RFC 4741, sec. 10.1.
base-capability-uri = "urn:ietf:params:netconf:base:1.0"

hello-element = element hello { hello-content }

## Common part of the "hello" element. See RFC 4741, sec. 8.1.
hello-content =
  element capabilities {
    element capability { base-capability-uri }
    &amp;amp; element capability { extra-capability-choice }*
  }

## URNs of additional known capabilities
extra-capability-choice =
  "urn:ietf:params:netconf:capability:writable-running:1.0"
  | "urn:ietf:params:netconf:capability:candidate:1.0"
  | "urn:ietf:params:netconf:capability:confirmed-commit:1.0"
  | "urn:ietf:params:netconf:capability:rollback-on-error:1.0"
  | "urn:ietf:params:netconf:capability:validate:1.0"
  | "urn:ietf:params:netconf:capability:startup:1.0"
  | xsd:anyURI {
      pattern =
        "urn:ietf:params:netconf:capability:url:1\.0" ~
        "[?]scheme=(http|ftp|file)"
    }
  | "urn:ietf:params:netconf:capability:xpath:1.0"

## Attribute "message-id" is mandatory in both "rpc" and "rpc-reply".
## See RFC 4741, sec. 4.1.
message-id-attribute =
  attribute message-id {
    xsd:string { maxLength = "4095" }
  }

## The "session-id" parameter identifies a NETCONF session.
session-id-element = element session-id { xsd:positiveInteger }

## This pattern allows arbitrary content.
arbitrary-content =
  (element * { arbitrary-content }
   | attribute * { text }
   | text)*

## This pattern allows arbitrary content wrapped in an element.
wrapped-arbitrary-content = element * { arbitrary-content }

END
</pre></div>
<a name="base-client"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.2"></a><h3>A.2.&nbsp;
Base Client Schema</h3>

<p>This module specifies the NETCONF client vocabulary without
      any optional capabilities.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>BEGIN

# source file: nc-base-client.rng

default namespace = "urn:ietf:params:xml:ns:netconf:base:1.0"
namespace a = "http://relaxng.org/ns/compatibility/annotations/1.0"

include "nc-base-common.rnc"

## Client messages may have either "hello" or "rpc" as the document
## element. "hello" is reused from netconf-common without change.
start = hello-element | rpc-element

## This element is a wrapper for all RPC requests.
## See RFC 4741, Sec. 4.1.
rpc-element =
  element rpc {
    message-id-attribute,
    attribute * { text }*,
    rpc-operation-choice
  }

## Selection of RPC operations. See RFC 4741, Sec. 7.
## Capabilities may extend this pattern.
rpc-operation-choice =
  element get-config { get-config-content }
  | element edit-config { edit-config-content }
  | element copy-config { copy-config-content }
  | element delete-config { delete-config-content }
  | element lock { lock-content }
  | element unlock { unlock-content }
  | element get { get-content }
  | element close-session { close-session-content }
  | element kill-session { kill-session-content }

## See RFC 4741, Sec. 7.1.
get-config-content =
  element source { source-choice }
  &amp;amp; element filter { filter-content-choice }?

## This element represents the "running" datastore.
running-element = element running { empty }

## Available repositories. Capabilities may extend this pattern.
source-choice = running-element | extra-datastore-choice

## No additional datastores are present in base NETCONF.
## Capabilities may extend this pattern. See RFC 4741, Sec. 5.1.
extra-datastore-choice = empty

## Base NETCONF only supports subtree filters.
## Capabilities may extend this pattern.
filter-content-choice =
  attribute type { "subtree" }?,
  subtree-filter-content

## Content of a subtree filter depends on the data model so
## we have to allow everything here.
subtree-filter-content = wrapped-arbitrary-content

## See RFC 4741, Sec. 7.2.
edit-config-content =
  element target { target-choice }
  &amp;amp; element default-operation { default-operation-choice }?
  &amp;amp; element error-option { error-option-choice }?
  &amp;amp; config-data-spec

## The "operation" attribute may be used inside the "config" parameter
## of edit-config. This pattern may be combined with particular data
## models into a schema validating entire "edit-config" PDUs.
edit-config-operation-attribute =
  attribute operation { "merge" | "replace" | "create" | "delete" }

## Writable repositories (in base NETCONF there are none).
## Capabilities may extend this pattern.
target-choice = extra-datastore-choice

## Possible values for "default-operation" parameter in "edit-config".
## Default is "merge".
default-operation-choice = "merge" | "replace" | "none"

## Possible values for "error-option" parameter in "edit-config".
## Default is "stop-on-error".
error-option-choice = "stop-on-error" | "ignore-error"

## This pattern gives possible options for specifying configuration
## data. In base NETCONF, only inline tree is allowed.
## Capabilities may extend this pattern.
config-data-spec = element config { wrapped-arbitrary-content }

## See RFC 4741, Sec. 7.3.
copy-config-content =
  element source { source-choice }
  &amp;amp; element target { target-choice }

## See RFC 4741, Sec. 7.4.
delete-config-content = element target { extra-datastore-choice }

## See RFC 4741, Sec. 7.5.
lock-content = element target { target-choice }

## See RFC 4741, Sec. 7.6.
unlock-content = element target { target-choice }

## See RFC 4741, Sec. 7.7.
get-content = element filter { filter-content-choice }?

## See RFC 4741, Sec. 7.8.
close-session-content = empty

## See RFC 4741, Sec. 7.9.
kill-session-content = session-id-element

END
</pre></div>
<a name="base-server"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.3"></a><h3>A.3.&nbsp;
Base Server Schema</h3>

<p>This module specifies the NETCONF server vocabulary without
      any optional capabilities.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>BEGIN

# source file: nc-base-server.rng

default namespace = "urn:ietf:params:xml:ns:netconf:base:1.0"
namespace a = "http://relaxng.org/ns/compatibility/annotations/1.0"

include "nc-base-common.rnc"

## Server messages may have either "hello" or "rpc-reply" as
## the document element.
start = hello-element | rpc-reply-element

## Server's "hello" message must include "session-id".
## See RFC 4741, Sec. 8.1.
hello-content &amp;amp;= session-id-element

## This element is a wrapper for all RPC replies.
## See RFC 4741, Sec. 4.2.
rpc-reply-element =
  element rpc-reply {
    attribute * { text }*,
    ((# Positive response
      message-id-attribute,
      element rpc-reply { rpc-reply-choice })
     | (# error reply to a rpc without message-id is special
        missing-message-id-error
        | (# Negative response
           message-id-attribute,
           element rpc-error { rpc-error-choice }+)))
  }

## Specific error reply to an "rpc" without message-id.
## Only in this case can "message-id" be missing in an "rpc-reply".
missing-message-id-error =
  element rpc-error {
    element error-tag { "missing-attribute" }
    &amp;amp; element error-type { "rpc" }
    &amp;amp; element error-severity { "error" }
    &amp;amp; element error-info {
        element bad-attribute { "message-id" }
        &amp;amp; element bad-element { "rpc" }
      }
    &amp;amp; optional-error-content
  }

## Possible RPC replies. See RFC 4741, Sec. 4.2.
## Capabilities may extend this pattern.
rpc-reply-choice = ok-element | data-element

## See RFC 4741, Sec. 4.4.
ok-element = element ok { empty }

## Content depends on data model. Here we have to allow everything.
data-element = element data { wrapped-arbitrary-content }

## These errors are defined in RFC 4741, Appendix A.
rpc-error-choice =
  in-use-error-content
  | too-big-error-content
  | missing-attribute-error-content
  | bad-attribute-error-content
  | bad-attribute-error-content
  | unknown-attribute-error-content
  | missing-element-error-content
  | bad-element-error-content
  | unknown-element-error-content
  | unknown-namespace-error-content
  | access-denied-error-content
  | lock-denied-error-content
  | resource-denied-error-content
  | rollback-failed-error-content
  | data-exists-error-content
  | data-missing-error-content
  | operation-not-supported-error-content
  | operation-failed-error-content
  | partial-operation-error-content
error-types-pa = "protocol" | "application"
error-types-rpa = error-types-pa | "rpc"
error-types-all = error-types-rpa | "transport"
optional-error-content =
  element error-app-tag { xsd:string }?
  &amp;amp; element error-path { xsd:string }?
  &amp;amp; element error-message {
      attribute xml:lang { xsd:token }?,
      xsd:string
    }?
element-error-info = element bad-element { xsd:QName }
attribute-error-info =
  element bad-attribute { xsd:QName }
  &amp;amp; element-error-info

## Resource in use
in-use-error-content =
  element error-tag { "in-use" }
  &amp;amp; element error-type { error-types-pa }
  &amp;amp; element error-severity { "error" }
  &amp;amp; optional-error-content

## Response would be too large for the implementation
too-big-error-content =
  element error-tag { "too-big" }
  &amp;amp; element error-type { error-types-all }
  &amp;amp; element error-severity { "error" }
  &amp;amp; optional-error-content

## A required attribute is missing
missing-attribute-error-content =
  element error-tag { "missing-attribute" }
  &amp;amp; element error-type { error-types-rpa }
  &amp;amp; element error-severity { "error" }
  &amp;amp; element error-info { attribute-error-info }
  &amp;amp; optional-error-content

## Incorrect attribute value
bad-attribute-error-content =
  element error-tag { "bad-attribute" }
  &amp;amp; element error-type { error-types-rpa }
  &amp;amp; element error-severity { "error" }
  &amp;amp; element error-info { attribute-error-info }
  &amp;amp; optional-error-content

## An unexpected attribute is present
unknown-attribute-error-content =
  element error-tag { "unknown-attribute" }
  &amp;amp; element error-type { error-types-rpa }
  &amp;amp; element error-severity { "error" }
  &amp;amp; element error-info { attribute-error-info }
  &amp;amp; optional-error-content

## A required element is missing
missing-element-error-content =
  element error-tag { "missing-element" }
  &amp;amp; element error-type { error-types-rpa }
  &amp;amp; element error-severity { "error" }
  &amp;amp; element error-info { element-error-info }
  &amp;amp; optional-error-content

## Incorrect element value
bad-element-error-content =
  element error-tag { "bad-element" }
  &amp;amp; element error-type { error-types-rpa }
  &amp;amp; element error-severity { "error" }
  &amp;amp; element error-info { element-error-info }
  &amp;amp; optional-error-content

## An unexpected element is present
unknown-element-error-content =
  element error-tag { "unknown-element" }
  &amp;amp; element error-type { error-types-rpa }
  &amp;amp; element error-severity { "error" }
  &amp;amp; element error-info { element-error-info }
  &amp;amp; optional-error-content

## An unknown namespace is used
unknown-namespace-error-content =
  element error-tag { "unknown-element" }
  &amp;amp; element error-type { error-types-rpa }
  &amp;amp; element error-severity { "error" }
  &amp;amp; element error-info {
      element-error-info
      &amp;amp; element bad-namespace { xsd:Name }
    }
  &amp;amp; optional-error-content

## Access denied due to authorization failure
access-denied-error-content =
  element error-tag { "access-denied" }
  &amp;amp; element error-type { error-types-rpa }
  &amp;amp; element error-severity { "error" }
  &amp;amp; optional-error-content

## Access to the requested lock is denied
lock-denied-error-content =
  element error-tag { "lock-denied" }
  &amp;amp; element error-type { "protocol" }
  &amp;amp; element error-severity { "error" }
  &amp;amp; element error-info {
      element session-id { xsd:nonNegativeInteger }
    }
  &amp;amp; optional-error-content

## Insufficient resources
resource-denied-error-content =
  element error-tag { "resource-denied" }
  &amp;amp; element error-type { error-types-all }
  &amp;amp; element error-severity { "error" }
  &amp;amp; optional-error-content

## Rollback not completed.
## Requires either :rollback-on-error or :candidate capability.
rollback-failed-error-content =
  element error-tag { "rollback-failed" }
  &amp;amp; element error-type { error-types-pa }
  &amp;amp; element error-severity { "error" }
  &amp;amp; optional-error-content

## Relevant data already exists
data-exists-error-content =
  element error-tag { "data-exists" }
  &amp;amp; element error-type { "application" }
  &amp;amp; element error-severity { "error" }
  &amp;amp; optional-error-content

## Relevant data missing
data-missing-error-content =
  element error-tag { "data-missing" }
  &amp;amp; element error-type { "application" }
  &amp;amp; element error-severity { "error" }
  &amp;amp; optional-error-content

## Operation not supported by the implementation
operation-not-supported-error-content =
  element error-tag { "operation-not-supported" }
  &amp;amp; element error-type { error-types-rpa }
  &amp;amp; element error-severity { "error" }
  &amp;amp; optional-error-content

## Requested operation failed for some reason
operation-failed-error-content =
  element error-tag { "operation-failed" }
  &amp;amp; element error-type { error-types-rpa }
  &amp;amp; element error-severity { "error" }
  &amp;amp; optional-error-content

## Part of the operation failed or was not attempted
partial-operation-error-content =
  element error-tag { "partial-operation" }
  &amp;amp; element error-type { "application" }
  &amp;amp; element error-severity { "error" }
  &amp;amp; element error-info {
      element ok-element { xsd:QName }*
      &amp;amp; element err-element { xsd:QName }*
      &amp;amp; element noop-element { xsd:QName }*
    }
  &amp;amp; optional-error-content

END
</pre></div>
<a name="writable-running"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.4"></a><h3>A.4.&nbsp;
Capability :writable-running</h3>

<p>This module specifies the extensions to the client schema
      provided by the :writable-running capability. The server
      schema is unchanged. See RFC 4741 <a class='info' href='#RFC4741'>[1]<span> (</span><span class='info'>Enns, R., Ed., &ldquo;NETCONF Configuration Protocol,&rdquo; December&nbsp;2006.</span><span>)</span></a>,
      Sec. 8.2.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>BEGIN

# source file: nc-writable-running-client.rng

default namespace = "urn:ietf:params:xml:ns:netconf:base:1.0"
namespace a = "http://relaxng.org/ns/compatibility/annotations/1.0"

## This adds "running" as an option for the "target" parameter
## of NETCONF operations.
target-choice |= running-element

END
</pre></div>
<a name="candidate"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.5"></a><h3>A.5.&nbsp;
Capability :candidate</h3>

<p>This module specifies the extensions to the client schema
      provided by the :candidate capability. The server schema is
      unchanged. See RFC 4741 <a class='info' href='#RFC4741'>[1]<span> (</span><span class='info'>Enns, R., Ed., &ldquo;NETCONF Configuration Protocol,&rdquo; December&nbsp;2006.</span><span>)</span></a>, Sec. 8.3.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>BEGIN

# source file: nc-candidate-client.rng

default namespace = "urn:ietf:params:xml:ns:netconf:base:1.0"
namespace a = "http://relaxng.org/ns/compatibility/annotations/1.0"

## This adds "candidate" as an option for both "source" and "target"
## parameter of NETCONF operations.
extra-datastore-choice |= element candidate { empty }

## Two new RPC operations are added.
rpc-operation-choice |=
  element commit { commit-content }
  | element discard-changes { discard-changes-content }

## See RFC 4741, Sec. 8.3.4.1.
commit-content = empty

## See RFC 4741, Sec. 8.3.4.2.
discard-changes-content = empty

END
</pre></div>
<a name="confirmed-commit"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.6"></a><h3>A.6.&nbsp;
Capability :confirmed-commit</h3>

<p>This module specifies the extensions to the client schema
      provided by the :confirmed-commit capability. The server
      schema is unchanged. See RFC 4741 <a class='info' href='#RFC4741'>[1]<span> (</span><span class='info'>Enns, R., Ed., &ldquo;NETCONF Configuration Protocol,&rdquo; December&nbsp;2006.</span><span>)</span></a>,
      Sec. 8.4.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>BEGIN

# source file: nc-confirmed-commit-client.rng

default namespace = "urn:ietf:params:xml:ns:netconf:base:1.0"
namespace a = "http://relaxng.org/ns/compatibility/annotations/1.0"

## The "confirm-timeout" parameter is given in seconds.
## The default is 600. See RFC 4741, Sec. 8.4.5.1.
commit-content &amp;amp;=
  (element confirmed { empty }
   &amp;amp; element confirm-timeout { xsd:positiveInteger }?)?

END
</pre></div>
<a name="rollback-on-error"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.7"></a><h3>A.7.&nbsp;
Capability :rollback-on-error</h3>

<p>This module specifies the extensions to the client schema
      provided by the :rollback-on-error capability. The server
      schema is unchanged. See RFC 4741 <a class='info' href='#RFC4741'>[1]<span> (</span><span class='info'>Enns, R., Ed., &ldquo;NETCONF Configuration Protocol,&rdquo; December&nbsp;2006.</span><span>)</span></a>,
      Sec. 8.5.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>BEGIN

# source file: nc-rollback-on-error-client.rng

default namespace = "urn:ietf:params:xml:ns:netconf:base:1.0"
namespace a = "http://relaxng.org/ns/compatibility/annotations/1.0"

error-option-choice |= "rollback-on-error"

END
</pre></div>
<a name="validate"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.8"></a><h3>A.8.&nbsp;
Capability :validate</h3>

<p>This module specifies the extensions to the client schema
      provided by the :validate capability. The server schema is
      unchanged. See RFC 4741 <a class='info' href='#RFC4741'>[1]<span> (</span><span class='info'>Enns, R., Ed., &ldquo;NETCONF Configuration Protocol,&rdquo; December&nbsp;2006.</span><span>)</span></a>, Sec. 8.6.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>BEGIN

# source file: nc-validate-client.rng

default namespace = "urn:ietf:params:xml:ns:netconf:base:1.0"
namespace a = "http://relaxng.org/ns/compatibility/annotations/1.0"

rpc-operation-choice |= element validate { validate-content }

## See RFC 4741, Sec. 8.6.4.1.
validate-content = element source { source-choice | config-data-spec }

END
</pre></div>
<a name="startup"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.9"></a><h3>A.9.&nbsp;
Capability :startup</h3>

<p>This module specifies the extensions to the client schema
      provided by the :startup capability. The server schema is
      unchanged. See RFC 4741 <a class='info' href='#RFC4741'>[1]<span> (</span><span class='info'>Enns, R., Ed., &ldquo;NETCONF Configuration Protocol,&rdquo; December&nbsp;2006.</span><span>)</span></a>, Sec. 8.7.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>BEGIN

# source file: nc-startup-client.rng

default namespace = "urn:ietf:params:xml:ns:netconf:base:1.0"
namespace a = "http://relaxng.org/ns/compatibility/annotations/1.0"

## This adds "startup" as an option for both "source" and "target"
## parameter of NETCONF operations.
extra-datastore-choice |= element startup { empty }

END
</pre></div>
<a name="url"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.10"></a><h3>A.10.&nbsp;
Capability :url</h3>

<p>This module specifies the extensions to the client schema
      provided by the :url capability. The server schema is
      unchanged. See RFC 4741 <a class='info' href='#RFC4741'>[1]<span> (</span><span class='info'>Enns, R., Ed., &ldquo;NETCONF Configuration Protocol,&rdquo; December&nbsp;2006.</span><span>)</span></a>, Sec. 8.8.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>BEGIN

# source file: nc-url-client.rng

default namespace = "urn:ietf:params:xml:ns:netconf:base:1.0"
namespace a = "http://relaxng.org/ns/compatibility/annotations/1.0"

source-choice |= element url { xsd:anyURI }
target-choice |= element url { xsd:anyURI }

END
</pre></div>
<a name="xpath"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.11"></a><h3>A.11.&nbsp;
Capability :xpath</h3>

<p>This module specifies the extensions to the client schema
      provided by the :xpath capability. The server schema is
      unchanged. See RFC 4741 <a class='info' href='#RFC4741'>[1]<span> (</span><span class='info'>Enns, R., Ed., &ldquo;NETCONF Configuration Protocol,&rdquo; December&nbsp;2006.</span><span>)</span></a>, Sec. 8.9.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>BEGIN

# source file: nc-xpath-client.rng

default namespace = "urn:ietf:params:xml:ns:netconf:base:1.0"
namespace a = "http://relaxng.org/ns/compatibility/annotations/1.0"

filter-content-choice |=
  attribute type { "xpath" },
  attribute select { xsd:string }

END
</pre></div>
<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Author's Address</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Ladislav Lhotka</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">CESNET</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Zikova 4</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Praha 6  160 00</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">CZ</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:lhotka@cesnet.cz">lhotka@cesnet.cz</a></td></tr>
</table>
</body></html>
