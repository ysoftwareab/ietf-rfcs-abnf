<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Problem Statement and Requirements for Transporting User to User Call Control Information in SIP</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Problem Statement and Requirements for Transporting User to User Call Control Information in SIP">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">CUSS WG</td><td class="header">A. Johnston, Ed.</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Avaya</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">J. McMillen</td></tr>
<tr><td class="header">Expires: March 19, 2011</td><td class="header">Unaffiliated</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">L. Liess</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Deutsche Telekom AG</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">September 15, 2010</td></tr>
</table></td></tr></table>
<h1><br />Problem Statement and Requirements for Transporting User to User Call Control Information in SIP<br />draft-johnston-cuss-sip-uui-reqs-00</h1>

<h3>Abstract</h3>

<p>
This document introduces the transport of call control related User to User Information (UUI) in the Session Initiation Protocol (SIP), and develops several requirements for a new SIP mechanism. Some SIP sessions are established by or related to a non-SIP application.  This application may have information that needs to be transported between the SIP User Agents during session establishment.  A common example in another protocol is the ITU-T Q.931 User to User Information  Service.   As networks move to SIP it is important that applications requiring this data can continue to function in SIP networks as well as the ability to interwork with this ISDN service for end-to-end transparency. This document discusses requirements and approaches.  This extension will also be used for native SIP endpoints implementing similar services and interworking with ISDN services. Example use cases include an exchange between two user agents, retargeting by a proxy, and redirection.  An example application is an Automatic Call Distributor (ACD) in a contact center. 
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on March 19, 2011.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Overview<br />
<a href="#anchor2">2.</a>&nbsp;
Terminology<br />
<a href="#anchor3">3.</a>&nbsp;
Use Cases<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">3.1.</a>&nbsp;
User Agent to User Agent<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">3.2.</a>&nbsp;
Proxy Retargeting<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">3.3.</a>&nbsp;
Redirection<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">3.4.</a>&nbsp;
Referral<br />
<a href="#anchor8">4.</a>&nbsp;
Requirements<br />
<a href="#anchor9">5.</a>&nbsp;
Security Considerations<br />
<a href="#anchor10">6.</a>&nbsp;
Acknowledgements<br />
<a href="#rfc.references1">7.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Overview</h3>

<p>  
This document describes the transport of User to User Information (UUI) during session setup.  This section will introduce UUI and explain how it relates to SIP.

</p>
<p>
We define SIP UUI information as application-specific information that is related to a session being established using SIP.  It is assumed that the applicaiton is running in both the originator of the session and the terminator of the session.  That is, the application interacts with the User Agent Client (UAC) and User Agent Server (UAS).  In order to function, the application needs the UUI to be transported at the time of session establishment.  This information is essentially opaque data to SIP - it is unrelated to SIP routing, authentication, or any other SIP function.  This application can be considered to be operating at a higher layer on the protocol stack.  As a result, SIP should not interpret, understand, or perform any operations on the UUI.  Should this not be the case, then the information being transported is not considered UUI, and another SIP mechanism will be needed to transport the information (such as a new header field).

</p>
<p>
UUI is defined this way for two reasons.  Firstly, this supports a strict layering of protocols and data.  Providing information and understanding of the UUI to the transport layer would not provide any benefits and instead could create cross layer coupling.  Secondly, it is neither feasible nor desirable for a SIP User Agent to understand the information but instead the goal is for the User Agent to pass the information as efficiently as possible to an application which does understand the information.  

</p>
<p>
An important application is the interworking with User to User Information (UUI) in ISDN, specifically, the transport of call control related ITU-T Q.931 User to User 
Information  Element (UU IE) <a class='info' href='#Q931'>[Q931]<span> (</span><span class='info'>, &ldquo;ITU-T Q.931 User to User Information  Element (UU IE),&rdquo; .</span><span>)</span></a> and ITU-T Q.763 User to User 
Information Parameter <a class='info' href='#Q763'>[Q763]<span> (</span><span class='info'>, &ldquo;ITU-T Q.763 Signaling System No. 7 - ISDN user part formats and codes,&rdquo; .</span><span>)</span></a> data in SIP. ISDN UUI is widely used in 
the PSTN today in contact centers and call centers.  These applications are currently transitioning away 
from using ISDN for session establishment to using SIP.  Native SIP endpoints will need to implement a
similar service and be able to interwork with this ISDN service. 


</p>
<p>
In the rest of this document, the requirements are discussed with use cases. Five different use case call flows are then discussed.   


</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Terminology</h3>

<p>
The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in BCP 14, RFC 2119 <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.

</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Use Cases</h3>

<p>
This section discusses four use cases for the transport of call control related user to user information.  What is not discussed here is the transport of non-call control UUI which can be done using the SIP INFO method.  These use cases will help motivate the requirements for SIP call control UUI. 

</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
User Agent to User Agent</h3>

<p>
In this scenario, the originator UA includes UUI in the INVITE sent through a proxy to the terminating UA.  The terminator can use the UUI in any way.  If it is an ISDN gateway, it could map the UUI into the appropriate Q.931 or Q.763 element.  Alternatively, the using application might render the information to the user, or use it during alerting or as a lookup for a screen pop.    In this case, the proxy does not need to understand the UUI mechanism, but normal proxy rules should result in the UUI being forwarded without modification.  This call flow is shown in Figure 1.

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
           Originator              Proxy             Terminator
                |                    |                    |
                |   INVITE (UUI) F1  |                    |
                |-------------------&gt;|   INVITE (UUI) F2  |
                |      100 Trying F3 |-------------------&gt;|
                |&lt;-------------------|         200 OK F4  |
                |          200 OK F5 |&lt;-------------------|
                |&lt;-------------------|                    |
                |  ACK F6            |                    |
                |-------------------&gt;|            ACK F7  |
                |                    |-------------------&gt;|
</pre></div>
<p>
  Figure 1. Call flow with UUI exchanged between Originator and Terminator. 
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Proxy Retargeting</h3>

<p>
In this scenario, the originator UA includes UUI in the INVITE sent through a proxy to the terminating UA.  The proxy retargets the INVITE, sending it to a different termination UA.  The UUI information is then received and processed by the terminating UA.  This call flow is shown in Figure 2.

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
           Originator              Proxy            Terminator 2
                |                    |                    |
                |   INVITE (UUI) F1  |                    |
                |-------------------&gt;|   INVITE (UUI) F2  |
                |      100 Trying F3 |-------------------&gt;|
                |&lt;-------------------|         200 OK F4  |
                |          200 OK F5 |&lt;-------------------|
                |&lt;-------------------|                    |
                |  ACK F6            |                    |
                |-------------------&gt;|            ACK F7  |
                |                    |-------------------&gt;|
</pre></div>
<p>
  Figure 2. Call flow with Proxy Retargeting.
</p>
<p>
The UUI in the INVITE needs to be passed unchanged through this proxy retargeting operation.

</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
Redirection</h3>

<p>
In this scenario, UUI is inserted by an application which utilizes a SIP redirect server.  The UUI is then included in the INVITE sent by the Originator to the Terminator.  In this case, the Originator does not necessarily need to support the UUI mechanism but does need to support the SIP redirection mechanism used to include the UUI information. Two examples of UUI with redirection (transfer and diversion) are defined in <a class='info' href='#ANSII'>[ANSII]<span> (</span><span class='info'>, &ldquo;ANSI T1.643-1995, Telecommunications-Integrated Services Digital Network (ISDN)-Explicit Call Transfer Supplementary Service,&rdquo; .</span><span>)</span></a> and <a class='info' href='#ETSI'>[ETSI]<span> (</span><span class='info'>, &ldquo;ETSI ETS 300 207-1 Ed.1 (1994), Integrated Services Digital Network (ISDN); Diversion supplementary services,&rdquo; .</span><span>)</span></a>.

</p>
<p>
Note that this case may not precisely map to an equivalent ISDN service use case.  This is because there is no one-to-one mapping between elements in a SIP network and elements in an ISDN network.  Also, there is not an exact one-to-one mapping between SIP call control and ISDN call control.

</p>
<p>
In redirection scenarios, if the Redirect Server is not in the same administrative domain as the Terminator, the Redirect Server must not remove or replace any UUI in the initial INVITE.  In Figure 3, this means that if F1 included UUI, the Redirect Server could not modify or replace the UUI in F2.  However, if the Redirect Server and the Terminator are part of the same administrative domain, they may have a policy allowing the Redirect Server to modify or rewrite UUI information.  In fact, many UUI uses within an Enterprise rely on this feature to work today in ISDN. 

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
           Originator          Redirect Server        Terminator
                |                    |                    |
                |          INVITE F1 |                    |
                |-------------------&gt;|                    |
                | 302 Moved (UUI) F2 |                    |
                |&lt;-------------------|                    |
                |            ACK F3  |                    |
                |-------------------&gt;|                    |
                |  INVITE (UUI) F4   |                    |
                |----------------------------------------&gt;|
                |  200 OK F5                              |
                |&lt;----------------------------------------|
                |  ACK F6                                 |
                |----------------------------------------&gt;|
</pre></div>
<p>
  Figure 3. Call flow with UUI exchanged between Redirect Server and Terminator
</p>
<p>
A common application of this call flow is an Automatic Call Distributer (ACD) in a PSTN contact center.  The originator would be a PSTN gateway.  The ACD would act as a Redirect Server, inserting UUI based on called number, calling number, time of day, and other information.  The resulting UUI would be passed to the agent's handset which acts as the Terminator.  The UUI could be used to lookup information rendered to the agent at the time of call answering.

</p>
<p>
This redirection scenario, and the referral scenario in the next section are the most important scenarios for contact center applications.  Incoming calls to a contact center almost always are redirected or referred to a final destination, sometimes multiple times, based on collected information and business logic.  The ability to maintain UUI in these scenarios is critical.

</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4"></a><h3>3.4.&nbsp;
Referral</h3>

<p>
In this scenario, application uses a UA initiate a referral, which causes an INVITE to be generated between the Originator and Terminator with UUI information inserted by the Referrer UA.  Note that this REFER <a class='info' href='#RFC3515'>[RFC3515]<span> (</span><span class='info'>Sparks, R., &ldquo;The Session Initiation Protocol (SIP) Refer Method,&rdquo; April&nbsp;2003.</span><span>)</span></a> could be part of a transfer operation or it might be unrelated to an existing call, such as out-of-dialog REFER call control.  In some cases, this call flow is used in place of the redirection call flow, but where immediately upon answer, the REFER is sent.  This scenario is shown in Figure 4.

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
           Originator           Referrer             Terminator
                |                    |                    |
                |  REFER (UUI) F1    |                    |
                |&lt;-------------------|                    |
                |  202 Accepted F2   |                    |
                |-------------------&gt;|                    |
                | NOTIFY (100 Trying) F3                  |
                |-------------------&gt;|                    |
                |         200 OK F4  |                    |
                |&lt;-------------------|                    |
                |  INVITE (UUI) F5   |                    |
                |----------------------------------------&gt;|
                |  200 OK F6                              |
                |&lt;----------------------------------------|
                |  ACK F7                                 |
                |----------------------------------------&gt;|
                | NOTIFY (200 OK) F8 |                    |
                |-------------------&gt;|                    |
                |        200 OK F9   |                    |
                |&lt;-------------------|                    |
</pre></div>
<p>Figure 4. Call flow with transfer after answer.
</p>
<p>
Some scenarios involving referral have been proposed to use a REFER sent during an early dialog.  This NOT RECOMMENDED call flow is shown in Figure 5.  This flow is not recommended due to the number of messages exchanged (due to the REFER, CANCEL, and 487 responses) and the sending of the REFER in the early dialog.  Also, there are race conditions that can occur if a 200 OK to the INVITE is received by the Originator while the REFER is in progress. 

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
           Originator            Referrer            Terminator
                |                    |                    |
                |          INVITE F1 |                    |
                |-------------------&gt;|                    |
                |     180 Ringing F2 |                    |
                |&lt;-------------------|                    |
                |  REFER (UUI) F3    |                    |
                |&lt;-------------------|                    |
                |  202 Accepted F4   |                    |
                |-------------------&gt;|                    |
                | NOTIFY (100 Trying) F5                  |
                |-------------------&gt;|                    |
                |         200 OK F6  |                    |
                |&lt;-------------------|                    |
                |  INVITE (UUI) F7   |                    |
                |----------------------------------------&gt;|
                |  200 OK F8                              |
                |&lt;----------------------------------------|
                |  ACK F9                                 |
                |----------------------------------------&gt;|
                | NOTIFY (200 OK) F10|                    |
                |-------------------&gt;|                    |
                |        200 OK F11  |                    |
                |&lt;-------------------|                    |
                | CANCEL F12         |                    |
                |-------------------&gt;|                    |
                |  200 OK F13        |                    |
                |&lt;-------------------|                    |
                | 487 Request Terminated  F14             |
                |&lt;-------------------|                    |
                | ACK F15            |                    |
                |-------------------&gt;|                    |
</pre></div>
<p>Figure 5. NOT RECOMMENDED call flow showing REFER prior to answer. 
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Requirements</h3>

<p>
This section discusses the requirements for the transport of call control related user to user information (UUI).  We define call control UUI as information that is generated, transported, and consumed at the time of call setup (i.e. during a pending INVITE transaction).  The information can be used for call routing, alerting, call distribution, or simply rendering.  The exact usage and semantics of call control UUI is out of scope - SIP is simply providing the transport function for this, in the same manner as the ISDN service provides in the PSTN.  Non-call control UUI can be sent using the INFO method, and is outside the scope of this work.

</p>
<p>
REQ-1:  The mechanism will allow user agents (UAs) to insert and receive UUI data in SIP call setup requests and responses.

</p>
<p></p>
<blockquote class="text">
<p>
SIP messages covered by this include INVITE requests and end-to-end responses to the INVITE, which includes 18x and 200 responses.

</p>
</blockquote>

<p>
REQ-2:  The mechanism will allow UAs to insert and receive UUI data in SIP call teardown requests and responses.

</p>
<p></p>
<blockquote class="text">
<p>
Q.931 UUI supports inclusion in release and release completion messages.  SIP messages covered by this include BYE and 200 OK responses to a BYE.

</p>
</blockquote>

<p>
REQ-3:  The mechanism will allow UUI to be inserted and retrieved in SIP redirects to INVITEs.

</p>
<p></p>
<blockquote class="text">
<p>
SIP messages covered by this include 3xx responses to INVITE and REFER requests.

</p>
</blockquote>

<p>
REQ-4:  The mechanism will allow UUI to be able to survive proxy retargeting.

</p>
<p></p>
<blockquote class="text">
<p>
Retargeting is a common method of call routing in SIP, and must not result in the loss of user to user information.

</p>
</blockquote>

<p>
REQ-5:  The mechanism should not require processing entities to dereference a URL to retrieve the UUI information.

</p>
<p></p>
<blockquote class="text">
<p>
Passing a pointer or link to the UUI information will not meet the real-time processing considerations and will complicate interworking with the PSTN.

</p>
</blockquote>

<p>
REQ-6:  The mechanism will minimize reliance on SIP extensions or uncommon SIP behavior.

</p>
<p>
REQ-7:  The mechanism will support interworking with call control related ITU-T Q.931 User to User 
Information  Element (UU IE) <a class='info' href='#Q931'>[Q931]<span> (</span><span class='info'>, &ldquo;ITU-T Q.931 User to User Information  Element (UU IE),&rdquo; .</span><span>)</span></a> and ITU-T Q.763 User to User 
Information Parameter <a class='info' href='#Q763'>[Q763]<span> (</span><span class='info'>, &ldquo;ITU-T Q.763 Signaling System No. 7 - ISDN user part formats and codes,&rdquo; .</span><span>)</span></a>. 

</p>
<p>
REQ-8:  The mechanism will allow the inserter of UUI to be sure that the recipient understands the call control UUI mechanism.

</p>
<p></p>
<blockquote class="text">
<p>
Understanding the mechanism means that the UAS will extract and utilize the UUI information transported.  Understanding the protocol, format, and nature of the actual UUI data is not covered by this requirement.  Note that this requirement is not strictly needed to implement the UUS 1 implicit service, but maps more accurately to the UUS 1 explicit service.  However, having an option tag is good design for high reliability systems, and the dynamic and heterogeneous nature of SIP interconnection (as opposed to the PSTN's static trunking) makes this option tag much more important and hence relevant to even the UUS 1 implicit service.

</p>
</blockquote>

<p>
REQ-9:  The mechanism will allow proxies to remove a particular type of UUI information from a request or response, or to block requests based on the presence of a particular type of UUI.

</p>
<p></p>
<blockquote class="text">
<p>
This is a common security function provided by border elements to header fields such as Alert-Info or Call-Info URIs.

</p>
</blockquote>

<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Security Considerations</h3>

<p>
User to user information can be exchanged over SIP on a hop-by-hop or end-to-end basis. In some cases, UUI may carry privacy information that would require confidentiality and message integrity.  Standard SIP security mechanisms, viz., based on TLS, offer these properties per-hop. To preserve multi-hop or
end-end confidentiality and integrity, an S/MIME profile MUST be utilized.  Since the security requirements and key management of the UUI information are likely to be quite different from the SIP signaling transport, another approach would be for the UUI information to be encrypted before being passed to SIP for transport.

</p>
<p>
Received User-to-User information should only be trusted if it is authenticated or if it is received within a trust domain.  For example, Spec-T, defined in <a class='info' href='#RFC3324'>[RFC3324]<span> (</span><span class='info'>Watson, M., &ldquo;Short Term Requirements for Network Asserted Identity,&rdquo; November&nbsp;2002.</span><span>)</span></a> could be used to define a trust domain.  When utilized by a gateway to map information to or from ISDN Q.931 and ISUP Q.763, appropriate policy should be applied based on the PSTN trust domain.

</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Acknowledgements</h3>

<p>
Thanks to Spencer Dawkins, Keith Drage, and Vijay Gurbani for their review of earlier versions of this document.  The authors wish to thank Francois Audet, Denis Alexeitsev, Paul Kyzivat, Cullen Jennings, and Mahalingam Mani for their comments on this topic.

</p>
<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>7.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC3261">[RFC3261]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;<a href="http://tools.ietf.org/html/rfc3261">SIP: Session Initiation Protocol</a>,&rdquo; RFC&nbsp;3261, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3261.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="Q931">[Q931]</a></td>
<td class="author-text">&ldquo;<a href="http://www.itu.int/rec/T-REC-Q.931-199805-I/en">ITU-T Q.931 User to User Information  Element (UU IE)</a>,&rdquo; http://www.itu.int/rec/T-REC-Q.931-199805-I/en&nbsp;.</td></tr>
<tr><td class="author-text" valign="top"><a name="Q763">[Q763]</a></td>
<td class="author-text">&ldquo;<a href="http://www.itu.int/rec/T-REC-Q.763-199912-I/en">ITU-T Q.763 Signaling System No. 7 - ISDN user part formats and codes</a>,&rdquo; http://www.itu.int/rec/T-REC-Q.931-199805-I/en&nbsp;.</td></tr>
<tr><td class="author-text" valign="top"><a name="ANSII">[ANSII]</a></td>
<td class="author-text">&ldquo;ANSI T1.643-1995, Telecommunications-Integrated Services Digital Network (ISDN)-Explicit Call Transfer Supplementary Service.&rdquo;</td></tr>
<tr><td class="author-text" valign="top"><a name="ETSI">[ETSI]</a></td>
<td class="author-text">&ldquo;ETSI ETS 300 207-1 Ed.1 (1994), Integrated Services Digital Network (ISDN); Diversion supplementary services.&rdquo;</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3372">[RFC3372]</a></td>
<td class="author-text">Vemuri, A. and J. Peterson, &ldquo;<a href="http://tools.ietf.org/html/rfc3372">Session Initiation Protocol for Telephones (SIP-T): Context and Architectures</a>,&rdquo; BCP&nbsp;63, RFC&nbsp;3372, September&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3372.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2976">[RFC2976]</a></td>
<td class="author-text">Donovan, S., &ldquo;<a href="http://tools.ietf.org/html/rfc2976">The SIP INFO Method</a>,&rdquo; RFC&nbsp;2976, October&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc2976.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3515">[RFC3515]</a></td>
<td class="author-text">Sparks, R., &ldquo;<a href="http://tools.ietf.org/html/rfc3515">The Session Initiation Protocol (SIP) Refer Method</a>,&rdquo; RFC&nbsp;3515, April&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3515.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3324">[RFC3324]</a></td>
<td class="author-text">Watson, M., &ldquo;<a href="http://tools.ietf.org/html/rfc3324">Short Term Requirements for Network Asserted Identity</a>,&rdquo; RFC&nbsp;3324, November&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3324.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Alan Johnston (editor)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Avaya</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">St. Louis, MO  63124</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:alan.b.johnston@gmail.com">alan.b.johnston@gmail.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Joanne McMillen</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Unaffiliated</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:c.joanne.mcmillen@gmail.com">c.joanne.mcmillen@gmail.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Laura Liess</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Deutsche Telekom AG</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:laura.liess.dt@gmail.com">laura.liess.dt@gmail.com</a></td></tr>
</table>
</body></html>
