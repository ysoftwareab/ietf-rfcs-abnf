Internet Engineering Task Force                             Alain Durand
INTERNET-DRAFT                                           SUN Microsystem
November 14, 2000                                      Christian Huitema
Expires May 13, 2001                                           Microsoft


       The High Density ratio for address assignment efficiency
                    An update on the H ratio

          <draft-durand-huitema-high-density-ratio-00.txt>




Status of this memo

   This memo provides information to the Internet community.
   It does no specify an Internet standard of any kind.
   This memo is in full conformance with all provisions
   of Section 10 of RFC2026


     The list of current Internet-Drafts can be accessed at
     http://www.ietf.org/ietf/1id-abstracts.txt

     The list of Internet-Draft Shadow Directories can be accessed at
     http://www.ietf.org/shadow.html.





Abstract

   This document provide some update on the "H ratio" defined
   in RFC1715. It defines a new ratio which the authors claim
   is easier to understand



1. Background

   A substantive part of the debate around the choice of IPv6
   was about the address size. The consensus was to choose
   128 bit fixed length addresses. In the discussion on
   address architecture and the address allocation with
   the different registries, the "H ratio" defined in RFC1715
   was used to analyze various policies. However, this
   "H ratio" provides values that are in the range of
   0 to 0.3, with typical values ranging from 0.20 to 0.26.
   Those values are somehow difficult to interpret and the
   authors introduce in this document a new formula that
   provides results that are easier to understand. 



2. The high density ratio


2.1 Definition of the HD ratio

   When considering an addressing plan to allocate objects,
   the high density ratio HD is defined as follow:
  
            Ln(number of allocated objects)
   HD = -----------------------------------------
        Ln(maximum number of allocatable objects)

   This ratio is defined for any number of allocated objects
   greater than 1 and lower or equal to the maximum number
   of allocatable objects.

   Ln is the natural logarithm function, also known as neperian
   logarithm.


2.2 Variation of the HD ratio

   The theoretical minimum value for the HD ratio is:

                             Ln( 1 )
   HDmin =  ----------------------------------------- = 0
            Ln(maximum number allocatable of objects)

   The theoretical maximum value for D is obtained when the
   number of allocated objects is equal to the maximum
   number of allocatable objects. Thus:

            Ln(maximum number allocatable of objects)
   HDmax =  ----------------------------------------- = 1
            Ln(maximum number allocatable of objects)


   So, the ratio HD varies in the interval [0..1], which
   make it simple to interpret.


2.3 calculation examples

   In 1994, the estimated number of node in the IPv4 Internet
   was 3.5 millions. 32 bits of address space covers 2^32 nodes,
   so:

                          Ln(3 500 000)
   HD(1994InternetIPv4) = ------------- = 0.6793
                            Ln(2^32)

   In 2000, an estimate of the number of allocated IPv4 addresses
   is 200 millions.

                          Ln(200 000 000)
   HD(2000InternetIPv4) = --------------- = 0.8617
                             Ln(2^32)    



3. Justification of the HD ratio


3.1 Issues with a linear ratio

   Address assignment are most of the time done in a hierarchical
   way. This hierarchy introduce important waste, and the theoretical
   maximum of items to be addressed can never be achieved.

   A linear ratio L can be defined as:

           number of addressed objects
   L = -------------------------------------
       maximum number of addressable objects
   

   Using a linear scale to measure address efficiency,
   typically provides results around or below 1%
   and are difficult to interpret.

   Computing the linear ratio L on the above examples, we get:

                         3 500 000
   L(1994InternetIPv4) = --------- = .0008 = 0.08 %
                           2^32 

                         200 000 000
   L(2000InternetIPv4) = ----------- = .0465 = 4.65 %
                            2^32 
   
   
3.2 Issues with the H ratio

   RFC1715 introduce the H ratio, a logarithmic scale, where

       log10(number of objects) 
   H = ------------------------
            available bits

   The "available bits" are in fact:

     log2(maximum number of addressable items ) 

   so:

       log10(number of allocated objects )
   H = -------------------------------------------
       log2(maximum number of allocatable objects)


                                     log10(X)
   But as, for all X > 0,  log2(X) = --------
                                     log10(2)

       log10(number of allocated objects ) x log10(2)
   H = ----------------------------------------------
       log10(maximum number of allocatable objects)

                                     Ln(X)
   and as, for all X > 0, log10(X) = ------, we also have:
                                     Ln(10)

       Ln(number of allocated objects ) x log10(2)
   H = -------------------------------------------
       Ln(maximum number of allocatable objects)


   Thus, H = HD x log10(2)

   As HD varies in the interval [0..1], 
      H varies in the interval [0..log10(2)].

   So we have:

      Hmin = 0
      Hmax = log10(2) = 0.3010

   This makes the H ratio somehow difficult to interpret.


   Using the H ratio on the previous examples, we have:
   
                         log10(3 500 000)
   H(1994InternetIPv4) = ---------------- = 0.2045
                               32

                         log10(200 000 000)
   H(2000InternetIPv4) = ------------------ = 0.2594
                                32



4. Using the HD ratio to evaluate addressing plan

   Directly using the HD ratio makes it easy to evaluate
   the density of allocated objects.
   However, when one want to evaluate how well an
   addressing plan will scale, one has to do a reverse
   calculation, that is, set a density he is comfortable
   with, then compute how many object he could then address.


   number allocatable of objects
      = exp( HD x Ln(maximum number allocatable of objects))

      = (maximum number allocatable of objects)^HD
   
   One can then trace this function by varying HD
   in the rage [0..1] on a semi-logarithm scale
   and would plot a straight line.




5. Security considerations

   Security issues are not discussed in this memo.




6. Year 2000 compliance

   The computation of logarithms are not affected by the Y2K problem.



7. Author address

   Alain Durand
   SUN Microsystems, Inc
   901 San Antonio Road
   MPK17-202
   Palo Alto, CA 94303-4900
   USA
   Tel: +1 650 786 7503
   Mail: Alain.Durand@sun.com

   Christian Huitema
   Microsoft Corporation
   One Microsoft Way
   Redmond, WA 98052-6399
   USA
   Mail: huitema@microsoft.com


8. Acknowledgment

   The authors would like to thank Jean Daniau of Poitiers for
   his kind support during the elaboration of those formula.




9. References

   RFC1715, The H Ratio for Address Assignment Efficiency,
   Christian Huitema, 1994
