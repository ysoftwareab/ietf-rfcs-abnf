<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Miscellaneous additions to CoAP</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Miscellaneous additions to CoAP">
<meta name="keywords" content="Internet-Draft">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">CoRE Working Group</td><td class="header">C. Bormann</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">K. Hartke</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">Universit√§t Bremen TZI</td></tr>
<tr><td class="header">Expires: January 2, 2011</td><td class="header">July 01, 2010</td></tr>
</table></td></tr></table>
<h1><br />Miscellaneous additions to CoAP<br />draft-bormann-coap-misc-03</h1>

<h3>Abstract</h3>

<p>
        This short I-D makes a number of partially interrelated
        proposals how to solve certain problems in the CoRE WG's main
        protocol, CoAP.
      
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on January 2, 2011.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#problems">1.</a>&nbsp;
Introduction<br />
<a href="#accept">2.</a>&nbsp;
A Compact Accept Option<br />
<a href="#duration">3.</a>&nbsp;
Representing Durations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#pseudo-fp">3.1.</a>&nbsp;
Pseudo-Floating Point<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#duration-type">3.2.</a>&nbsp;
A Duration Type for CoAP<br />
<a href="#uri-encoding">4.</a>&nbsp;
URI encoding<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#stateless">4.1.</a>&nbsp;
An efficient stateless URI encoding<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#stateful">4.2.</a>&nbsp;
Stateful URI compression<br />
<a href="#block-wise-transfers">5.</a>&nbsp;
Block-wise transfers<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#the-block-option">5.1.</a>&nbsp;
The Block Option<br />
<a href="#option-encoding">6.</a>&nbsp;
Option Encoding<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#a-more-efficient-option-encoding">6.1.</a>&nbsp;
A More Efficient Option Encoding<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#critical">6.2.</a>&nbsp;
Critical Options<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#payload-length-option">6.3.</a>&nbsp;
Payload-Length Option<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#problems-with-specific-options">6.4.</a>&nbsp;
Problems with specific options<br />
<a href="#experimental-options">7.</a>&nbsp;
Experimental Options<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#options-indicating-absolute-time">7.1.</a>&nbsp;
Options indicating absolute time<br />
<a href="#iana-considerations">8.</a>&nbsp;
IANA Considerations<br />
<a href="#security-considerations">9.</a>&nbsp;
Security Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#amplification-attacks">9.1.</a>&nbsp;
Amplification Attacks<br />
<a href="#rfc.references1">10.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">10.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">10.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="problems"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>The CoRE WG is tasked with standardizing an
Application Protocol for Constrained Networks/Nodes, CoAP.
This protocol is intended to provide RESTful <a class='info' href='#REST'>[REST]<span> (</span><span class='info'>Fielding, R., &ldquo;Architectural Styles and the Design of Network-based Software Architectures,&rdquo; 2000.</span><span>)</span></a> services not
unlike HTTP <a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a>,
while reducing the complexity of implementation as well as the size of
packets exchanged in order to make these services useful in a highly
constrained network of themselves highly constrained nodes.
</p>
<p>This objective requires restraint in a number of sometimes conflicting ways:
</p>
<p></p>
<ul class="text">
<li>reducing implementation complexity in order to minimize code size,
</li>
<li>reducing message sizes in order to minimize the number of fragments
needed for each message (in turn to maximize the probability of
delivery of the message), the amount of transmission power needed
and the loading of the limited-bandwidth channel,
</li>
<li>reducing requirements on the environment such as stable storage,
good sources of randomness or user interaction capabilities.
</li>
</ul>

<p>This draft attempts to address a number of problems not yet adequately
solved in <a class='info' href='#I-D.ietf-core-coap'>[I&#8209;D.ietf&#8209;core&#8209;coap]<span> (</span><span class='info'>Shelby, Z., Frank, B., and D. Sturek, &ldquo;Constrained Application Protocol (CoAP),&rdquo; June&nbsp;2010.</span><span>)</span></a>.  The solutions proposed to these
problems are somewhat interrelated and are therefore presented in one
draft.
</p>
<p>In this document, the key words ‚ÄúMUST‚Äù, ‚ÄúMUST NOT‚Äù, ‚ÄúREQUIRED‚Äù,
‚ÄúSHALL‚Äù, ‚ÄúSHALL NOT‚Äù, ‚ÄúSHOULD‚Äù, ‚ÄúSHOULD NOT‚Äù, ‚ÄúRECOMMENDED‚Äù, ‚ÄúMAY‚Äù,
and ‚ÄúOPTIONAL‚Äù are to be interpreted as described in BCP 14
<a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> and indicate requirement levels for compliant CoAP
implementations.
</p>
<a name="accept"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
A Compact Accept Option</h3>

<p>A resource may be available in a number of representations.
Without some information from the client, a server has no easy way to
decide which of these would be best served.
HTTP has an Accept: request header that a client can use to indicate
the media types supported, allowing the server to decide.  This header
is somewhat unpopular as, for a web browser, there are too many media
types to choose from, so ‚Äî even with wildcards ‚Äî there is no
meaningful information to put there.  (This has changed a bit for AJAX
calls, which may indeed have a specific media type preference.)
It is unlikely that machine-to-machine communication would have the
same problem.
</p>
<p>A similar function to the HTTP Accept: header could be added to CoAP
as an option in a much simpler way.  The CoAP Accept option would
simple carry a value that is a sequence of octets, each of which is an
acceptable media type for the client, in the order of preference (see
<a class='info' href='#acceptheader'>Figure&nbsp;1<span> (</span><span class='info'>Accept option value: A sequence of media types</span><span>)</span></a>).  If no Accept option is given, the client does not
express a preference.
</p><br /><hr class="insert" />
<a name="acceptheader"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
        0
        0 1 2 3 4 5 6 7
       +-+-+-+-+-+-+-+-+
       |   mediatype   |
       +-+-+-+-+-+-+-+-+

        0                   1
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |   mediatype1  |   mediatype2  |    etc.
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: Accept option value: A sequence of media types&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>Accept also has to be given an option type code, e.g. 7, in Table 2 of
<a class='info' href='#I-D.ietf-core-coap'>[I&#8209;D.ietf&#8209;core&#8209;coap]<span> (</span><span class='info'>Shelby, Z., Frank, B., and D. Sturek, &ldquo;Constrained Application Protocol (CoAP),&rdquo; June&nbsp;2010.</span><span>)</span></a>.
</p>
<p>The other addition that would be required is an error code that
mirrors HTTP‚Äôs ‚Äú415 Unsupported Media Type‚Äù.  This is indeed already
listed as CoAP Code 35 in Table 3 of <a class='info' href='#I-D.ietf-core-coap'>[I&#8209;D.ietf&#8209;core&#8209;coap]<span> (</span><span class='info'>Shelby, Z., Frank, B., and D. Sturek, &ldquo;Constrained Application Protocol (CoAP),&rdquo; June&nbsp;2010.</span><span>)</span></a>.
</p>
<p></p>
<blockquote class="text"><dl>
<dt>Proposal:</dt>
<dd>
  Add an Accept Option.
</dd>
<dt>Benefits:</dt>
<dd>
  A Server does not need to specify one URI each for every possible
media type that it wants to serve a resource under.
</dd>
<dt>Open Issues:</dt>
<dd>
  For coap-00, this would have needed a way to handle two-byte media
types (easiest if these can be made self-describing, at the cost of
about 3 bits in the sub-type field; <a class='info' href='#mediatypes'>Figure&nbsp;2<span> (</span><span class='info'>A self-describing media type representation</span><span>)</span></a>).
</dd>
</dl></blockquote>

<p>An self-describing representation for long mediatypes could look like this:
</p><br /><hr class="insert" />
<a name="mediatypes"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
        0
        0 1 2 3 4 5 6 7
       +-+-+-+-+-+-+-+-+
       | top |   sub   |  (1-byte: unchanged)
       +-+-+-+-+-+-+-+-+

        0                   1
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       | 000 | top |       sub         |  (2-byte)
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: A self-describing media type representation&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="duration"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Representing Durations</h3>

<p>Various message types used in CoAP need the representation of
<strong>durations</strong>, i.e. of the length of a timespan.
In SI units, these are measured in seconds.
Where CPU power and memory is abundant, a duration can almost always
be adequately represented by a non-negative floating-point number
representing that number of seconds.
Historically, many APIs have also used an integer representation,
which limits both the resolution (e.g., if the integer represents the
duration in seconds) and often the range (integer machine types
have range limits that may become relevant).
UNIX‚Äôs <tt>time_t</tt>  (which is used for both absolute time and durations)
originally was a signed 32-bit value of seconds, but
was later complemented by an additional integer to add microsecond
(<tt>struct timeval</tt>) and then later nanosecond (<tt>struct timespec</tt>)
resolution.
</p>
<p>Three decisions need to be made for each application of the concept of
duration:
</p>
<p></p>
<ul class="text">
<li>the <strong>resolution</strong>.  What rounding error is acceptable?
</li>
<li>the <strong>range</strong>.  What is the maximum duration that needs to be represented?
</li>
<li>the <strong>number of bits</strong> that can be expended.
</li>
</ul>

<p>Obviously, these decisions are interrelated.  Typically, a large range
needs a large number of bits, unless resolution is traded.  For most
applications, the actual requirement for resolution are limited for
longer durations, but can be more acute for shorter durations.
</p>
<a name="pseudo-fp"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Pseudo-Floating Point</h3>

<p>Constrained systems typically avoid the use of floating-point (FP)
values, as
</p>
<p></p>
<ul class="text">
<li>simple CPUs often don‚Äôt have support for floating-point datatypes
</li>
<li>software floating-point libraries are expensive in code size and slow.
</li>
</ul>

<p>In addition, floating-point datatypes used to be a significant element
of market differentiation in CPU design; it has taken the industry a
long time to agree on a standard floating point representation.
</p>
<p>These issues have led to protocols that try to constrain themselves to
integer representation even where the ability of a floating point
representation to trade range for resolution would be beneficial.
</p>
<p>The idea of introducing <em>pseudo-FP</em> is to obtain the increased range
provided by embedding an exponent, without necessarily getting stuck with hardware
datatypes or inefficient software floating-point libraries.
</p>
<p>For the purposes of this draft, we define an (n,e)-pseudo-FP as a
fixed-length value of n bits, e of which may be used for an exponent.
<a class='info' href='#pseudofp'>Figure&nbsp;3<span> (</span><span class='info'>An (8,4) pseudo-FP representation</span><span>)</span></a> illustrates an (8,4)-pseudo-FP value.
</p><br /><hr class="insert" />
<a name="pseudofp"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  0   1   2   3   4   5   6   7
+---+---+---+---+---+---+---+---+
| 0...          value           |
+---+---+---+---+---+---+---+---+

+---+---+---+---+---+---+---+---+
| 1... mantissa |    exponent   |
+---+---+---+---+---+---+---+---+

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3: An (8,4) pseudo-FP representation&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>If the high bit is clear, the entire n-bit value (including the high
bit) is the decoded value.  If the high bit is set, the mantissa
(including the high bit, but with the exponent field cleared out) is
shifted left by the exponent to yield the decoded value.
</p>
<p>The (n,e)-pseudo-FP format can be decoded with a single line of code
(plus a couple of constant definition), as demonstrated in
<a class='info' href='#pseudofp-decode'>Figure&nbsp;4<span> (</span><span class='info'>Decoding an (8,4) pseudo-FP value</span><span>)</span></a>.
</p><br /><hr class="insert" />
<a name="pseudofp-decode"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
#define N 8
#define E 4
#define HIBIT (1 &lt;&lt; (N - 1))
#define EMASK ((1 &lt;&lt; E) - 1)
#define MMASK ((1 &lt;&lt; N) - 1 - EMASK)

#define DECODE_8_4(r) (r &lt; HIBIT ? r : (r &amp; MMASK) &lt;&lt; (r &amp; EMASK))

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;4: Decoding an (8,4) pseudo-FP value&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>Only non-negative numbers can be represented by this format.
It is designed to provide full integer resolution for values
from 0 to 2^(n-1)-1, i.e., 0 to 127 in the (8,4) case, and a mantissa
of n-e bits from 2^(n-1) to (2^n-2^e)*2^(2^e-1), i.e., 128 to
7864320 in the (8,4) case.  By choosing e carefully, resolution can be
traded against range.
</p>
<p>Note that a pseudo-FP encoder needs to consider rounding; different
applications of durations may favor rounding up or rounding down the
value encoded in the message.  This requires a little more than a
single line of code (which is left as an exercise to the reader, as
the most efficient expression depends on hardware details).
</p>
<a name="duration-type"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
A Duration Type for CoAP</h3>

<p>CoAP needs durations in a number of places.  In
<a class='info' href='#I-D.ietf-core-coap'>[I&#8209;D.ietf&#8209;core&#8209;coap]<span> (</span><span class='info'>Shelby, Z., Frank, B., and D. Sturek, &ldquo;Constrained Application Protocol (CoAP),&rdquo; June&nbsp;2010.</span><span>)</span></a>, durations occur in the option
<tt>Subscription-lifetime</tt> as well as in the option <tt>Max-age</tt>.
(Note that the option <tt>Date</tt> is not a duration, but a point in time.)
Other durations of this kind may be added later.
</p>
<p>Most durations relevant to CoAP are best expressed with a minimum
resolution of one second.  More detailed resolutions are unlikely to
provide much benefit.
</p>
<p>The range of lifetimes and caching ages are probably best kept below
the order of magnitude of months.
An (8,4)-pseudo-FP has the maximum value of 7864320, which is about 91
days; this appears to be adequate for a subscription lifetime and
probably even for a maximum cache age.
(If a larger range for the latter is indeed desired, an
(8,5)-pseudo-FP could be used; this would last 15 milleniums, at the
cost of having only 3 bits of accuracy for values larger than 127
seconds.)
</p>
<p></p>
<blockquote class="text"><dl>
<dt>Proposal:</dt>
<dd>
  A single duration type is used throughout CoAP, based on an
(8,4)-pseudo-FP giving a duration in seconds.
</dd>
<dt>Benefits:</dt>
<dd>
  Implementations can use a single piece of code for managing all
CoAP-related durations.
</dd>
<dt></dt>
<dd>In addition, length information never needs to be managed for
durations that are embedded in other data structures: All durations
are expressed by a single byte.
</dd>
<dt>Open Issues:</dt>
<dd>
  It might be worthwhile to reserve one duration value, e.g. 0xFF, for
an indefinite duration.
</dd>
</dl></blockquote>

<a name="uri-encoding"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
URI encoding</h3>

<p>In HTTP-based systems, URIs can reach significant lengths.
While CoAP-based systems may be able to sidestep the most egregious
excesses (mostly by simply applying REST principles), a URI such as
</p>
<p></p>
<blockquote class="text">
<p>/.well-known/resources
</p>
</blockquote>

<p>can use up one third of the available payload in a CoAP message
transported in a single 6LoWPAN packet.
Is there a way to encode these URIs in a more efficient way?
</p>
<p>Several proposals have been made on the CoRE mailing list, e.g. applying
the principle of base64-encoding <a class='info' href='#RFC4648'>[RFC4648]<span> (</span><span class='info'>Josefsson, S., &ldquo;The Base16, Base32, and Base64 Data Encodings,&rdquo; October&nbsp;2006.</span><span>)</span></a> in reverse and using only
6 bits per character.  However, due to rounding errors and occasional
characters that are not in the 64-character subset chosen to be efficiently
encodable, the actual gains are limited.  Similarly, using 7 bits per
character (assuming URIs contain only ASCII characters) only gives a
best-case gain of 12.5 %, and that only in the case the URI is a multiple
of 8 characters long.  On the other hand, the complexity (and danger
of subtle interoperability problems) is not entirely trivial.
</p>
<p>We will proceed by first proposing an URI encoding that is slightly
more efficient than the abovementioned ones, then rejecting even that
for its unconvincing cost-benefit ratio, and finally taking up Henning
Schulzrinne‚Äôs proposal to add state.
</p>
<a name="stateless"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
An efficient stateless URI encoding</h3>

<p>There is very little redundancy by repetition in a typical URI,
rendering popular compression methods such as LZ77 (as implemented in
in the widely used DEFLATE algorithm <a class='info' href='#RFC1951'>[RFC1951]<span> (</span><span class='info'>Deutsch, P., &ldquo;DEFLATE Compressed Data Format Specification version 1.3,&rdquo; May&nbsp;1996.</span><span>)</span></a>) rather ineffective.
</p>
<p>For the short, non-repetitive data structures that URIs tend to be, efficient
stateless compression is pretty much confined to Huffman (or, for even
more complexity, arithmetic) coding.  The complexity can be reduced
significantly by moving to n-ary Huffman coding, i.e., optimizing not
to the bit level, but to a larger level of granularity.  Informal
experiments by the author show that a 16ary Huffman coding is close to
optimal for reasonable URI lengths.  In other words, basing the
encoding on nibbles (4-bit half-bytes) is both nearly optimal and
relatively inexpensive to implement.
</p>
<p>The actual letter frequencies that will occur in CoAP URIs are hard to
predict.  As a stopgap, the author has analyzed an HTTP-based URI
corpus and found the following characters to occur with high
frequency:
</p>
<p></p>
<blockquote class="text">
<p>%.aeinorst
</p>
</blockquote>

<p>In the encoding proposed, each of these ten highly-compressed
characters is represented by a
single 4-bit nibble.  As the % character is used for hexadecimal encoding in
URIs, two additional nibbles are used to provide the numeric value of
the two hexadecimal
numbers following the % character (the original URI will only be
properly reconstituted if these
are upper-case as they should be according to section 2.1 of the URI
specification <a class='info' href='#RFC3986'>[RFC3986]<span> (</span><span class='info'>Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;Uniform Resource Identifier (URI): Generic Syntax,&rdquo; January&nbsp;2005.</span><span>)</span></a>; the encoder can choose to send all three
characters in dual-nibble format if that matters).  An encoder could also map non-ASCII
characters to this three-nibble form, even though they are not allowed
in URIs.  This gives compatibility with the %-encoding required by
<a class='info' href='#RFC3986'>[RFC3986]<span> (</span><span class='info'>Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;Uniform Resource Identifier (URI): Generic Syntax,&rdquo; January&nbsp;2005.</span><span>)</span></a>.
</p>
<p>All other characters are represented by both of their nibbles.  The
resulting sequence of nibbles is reconstituted into a sequence of
bytes in most-significant-nibble-first order.  Any unused nibble in
the last byte of an encoding is set to 0.  (Upon decoding, this
padding can be readily distinguished from another % combination as
this would require another byte after the last byte.)  The encoding is
summarized in <a class='info' href='#nibbles'>Figure&nbsp;5<span> (</span><span class='info'>A nibble-based URI encoding</span><span>)</span></a>.
</p><br /><hr class="insert" />
<a name="nibbles"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  0                                       1
  0   1   2   3   4   5   6   7   8   9   0   1
+---+---+---+---+
|    1, 8-F     |   .aeinorst
+---+---+---+---+   189ABCDEF

+---+---+---+---+---+---+---+---+
|      2-7      |      0-F      |   other ASCII
+---+---+---+---+---+---+---+---+

+---+---+---+---+---+---+---+---+---+---+---+---+
|       0       |      0-F      |      0-F      |   %HH
+---+---+---+---+---+---+---+---+---+---+---+---+

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;5: A nibble-based URI encoding&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>An example encoding for <tt>/.well-known/resources</tt> (where the initial
slash is left out, as proposed for abs-path URIs) is given in
<a class='info' href='#nibble-example'>Figure&nbsp;6<span> (</span><span class='info'>Nibble-based URI encoding: 21 -&gt; 15 bytes</span><span>)</span></a>.  While the more than 28 % savings in this example
may seem just an accident, the HTTP-based corpus indeed
shows an average savings of about 21.8 %, i.e. the sum of the lengths
of the encoded version of all URIs in the corpus is about 78.2 % of
the sum of the length of all URIs.  (The savings should be noticeably
higher with a more RESTful selection of URIs than was available for
this experiment.)
</p><br /><hr class="insert" />
<a name="nibble-example"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
     0                          1                             2
     1  2  3  4  5  6  7  8  9  0  1  2  3  4  5  6  7  8  9  0  1
  /  .  w  e  l  l  -  k  n  o  w  n  /  r  e  s  o  u  r  c  e  s

    2e 77 65 6c 6c 2d 6b 6e 6f 77 6e 2f 72 65 73 6f 75 72 63 65 73
-&gt;
    1  77 9  6c 6c 2d 6b b  c  77 b  2f d  9  e  c  75 d  63 9  e
  = 17 79 6c 6c 2d 6b bc 77 b2 fd 9e c7 5d 63 9e
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;6: Nibble-based URI encoding: 21 -&gt; 15 bytes&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="stateful"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Stateful URI compression</h3>

<p>Is the approximately 25 % average saving achievable with Huffman-based
URI compression schemes worth the complexity?
Probably not, because much higher average savings can be achieved by
introducing state.
</p>
<p>Henning Schulzrinne has proposed for a server to be able to supply a
shortened URI once a resource has been requested using the full-length
URI.
Let‚Äôs call such a shortened referent a <em>Temporary Resource
Identifier</em>, <em>TeRI</em> for short.
This could be expressed by a response option as shown in <a class='info' href='#teri-offer'>Figure&nbsp;7<span> (</span><span class='info'>Option for offering a TeRI in a response</span><span>)</span></a>.
</p><br /><hr class="insert" />
<a name="teri-offer"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
        0
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |    duration   |    TeRI...
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;7: Option for offering a TeRI in a response&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>The TeRI offer option indicates that the server promises to offer this
resources under the TeRI given for at least the time given as the duration.
Another TeRI offer can be made later to extend the duration.
</p>
<p>Once a TeRI for a URI is known (and still within its lifetime), the
client can supply a TeRI instead of a URI in its requests.
The same option format as an offer could be used to allow the client
to indicate how long it believes the TeRI will still be valid (so that
the server can decide when to update the lifetime duration).
TeRIs in requests could be distinguished from URIs e.g. by using a
different option number.
</p>
<p></p>
<blockquote class="text"><dl>
<dt>Proposal:</dt>
<dd>
  Add a TeRI option (e.g., number 2) that can be used in CoAP requests
and responses.
</dd>
<dt></dt>
<dd>Add a way to indicate a TeRI and its duration in a link-value.
</dd>
<dt></dt>
<dd>Do not add any form of stateless URI encoding.
</dd>
<dt>Benefits:</dt>
<dd>
  Much higher reduction of message size than any stateless URI encoding
could achieve.
</dd>
<dt></dt>
<dd>As the use of TeRIs is entirely optional, minimal complexity nodes
can get by without implementing them.
</dd>
</dl></blockquote>

<a name="block-wise-transfers"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Block-wise transfers</h3>

<p>Not all resource representations will fit into a single link layer
packet of a constrained network.  Using fragmentation (either at the
adaptation layer or at the IP layer) to enable the transport of larger
representations is possible up to the maximum size of a UDP datagram,
but the fragmentation/reassembly process loads the lower layers
with conversation state that is better managed in the application
layer.
</p>
<p>This section proposes options to enable <em>block-wise</em> access to
resource representations.  The overriding objective is to avoid
creating conversation state at the server for block-wise GET requests.
(It is impossible to fully avoid creating conversation state for
POST/PUT, if the creation/replacement of resources is to be atomic;
where that property is not needed, there is no need to create server
conversation state in this case, either.)  Also, implementation of
these options is intended to be optional. (The details of which parts
of the behavior need to be mandatory to enable that optionality still
are TBD, see below.)
</p>
<p>The size of the blocks should not be fixed by the protocol.  On the
other hand, implementation should be as simple as possible.  We
therefore propose a small range of power-of-two block sizes, from 2^4
(16) to 2^11 (2048) bytes.  One of these eight values can be encoded
in three bits (0 for 2^4 to 7 for 2^11 bytes), the <tt>szx</tt> (size
exponent); the actual block size is then <tt>1 &lt;&lt; (szx + 4)</tt>.
</p>
<a name="the-block-option"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
The Block Option</h3>

<p>When a representation is larger than can be comfortably transferred in
a single UDP datagram, the Block option can be used to indicate a
block-wise transfer.  Block is a 1-, 2- or 3-byte integer, the four least
significant bits of which indicate the size and whether the current
block-wise transfer is the last block being transferred (M or ‚Äúmore‚Äù
bit).  The value divided by sixteen is the number of the block
currently being transferred, starting from zero, i.e., the current
transfer is about the <tt>size</tt> bytes starting at <tt>blocknr &lt;&lt; (szx +
4)</tt>.  The default value of
the Block option is zero, indicating that the current block is the first
(block number 0) and only (M bit not set) block of the transfer;
however, there is no explicit size implied by this default value.
</p><br /><hr class="insert" />
<a name="block"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
        0
        0 1 2 3 4 5 6 7
       +-+-+-+-+-+-+-+-+
       |blocknr|M| szx |
       +-+-+-+-+-+-+-+-+

        0                   1
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |        block nr       |M| szx |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

        0                   1                   2
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                block nr               |M| szx |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;8: Block option&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>(Note that the option with the last 4 bits masked out, shifted to the
left by the value of szx, gives the byte position of the block.  The
author is not too sure whether that particularly is a feature.)
</p>
<p>The block option is used in one of three roles:
</p>
<p></p>
<ul class="text">
<li>In the request for a GET, it gives the block number requested and
suggests a block size (block number 0) or echoes the block size of
previous blocks received (block numbers other than 0).
</li>
<li>In the response for a GET or in the request for a PUT or POST, it
describes what block number is contained in the payload, and whether
further blocks are part of that body (M bit).  If the M bit is set,
the size of the payload body in bytes MUST indeed be the power of
two given by the block size.  All blocks for a transaction MUST use
the same block size, except for the last block (M bit not set).
</li>
<li>In the response for a PUT or POST, it indicates what block number is
being acknowledged.  In this case, the M bit is set to indicate that
this response does not carry the final response to the request; this
can occur when the M bit was set in the request and the server
implements PUT/POST atomically (only with the receptin of the last
block).
</li>
</ul>

<p>In all cases, the block number logically extends the transaction ID,
i.e. the same transaction ID can be used for all exchanges for a
block-wise transfer.  (For GET, and for PUT/POST where atomic
semantics are not needed, the requester is free to use different
transactions IDs for each block if desired.)
</p>
<p>When a GET is answered with a response carrying a Block option with
the M bit set, the requestor may retrieve additional blocks by sending
requests with a Block option giving the block number desired.  In such
a Block option, the M bit MUST be sent as zero and ignored on
reception.
</p>
<p>To influence the block size used in response to a GET request, the
requestor uses the Block option, giving the desired size, a block
number of zero and an M bit of zero.  A server SHOULD use the block
size indicated or a smaller size.  Any further block-wise requests for
blocks beyond the first one MUST indicate the block size used in the
response for the first one.
</p>
<p>If the Block option is used by the requestor, all GET requests in a
single transaction MUST use the same size.  The server SHOULD use the
block size indicated in the request option, but the requestor MUST
take note of the actual block size used in the response; the server
MUST ensure that it uses the same block size for all responses in a
transaction (except for the last one with the M bit not set).  [TBD:
decide whether the Block option can only be used in a response if a
Block option was in the request.  Such a minimal block option could be
of length zero, i.e., would occupy just one byte for the type/length
information, but is a bit redundant, so it would
be nice to leave this requirement out, but then every GET requestor has the
burden of having to cope with receiving Block options.]
</p>
<p>Block-wise transfers SHOULD be used in conjunction with the Etag option,
unless the representation being exchanged is entirely static (not
changing over time at all, such as in a schema describing a device).
When reassembling the representation from the blocks being exchanged,
the reassembler MUST compare Etag options.  If the Etag options do not
match in a GET transfer, the requestor has the option of attempting to
retrieve fresh values for the blocks it retrieved first.  To minimize
the resulting inefficiency, the server MAY cache the current value of
a representation for an ongoing transaction, but there is no
requirement for the server to establish any state.  The server may
offer a TeRI with the initial block to reduce the size of further
block-wise GET requests; this TeRI MAY be short-lived and specific to
the version of the representation being retrieved (which would in
effect freeze the representation of the resource specifically for the
purposes of this block-wise transfer).
</p>
<p>In a PUT or POST transfer, the block option refers to the body in the
request, i.e., there is no way to perform a block-wise retrieval of
the body of the response.  Servers that do need to supply large bodies
in response to PUT/POST SHOULD therefore be employing redirects,
possibly offering a TeRI.
</p>
<p>In a PUT or POST transfer that is intended to be implemented in an
atomic fashion at the server, the actual creation/replacement takes
place at the time a block with the M bit unset is received.  If not
all previous blocks are available at the server at this time, the
transfer fails and error code 4__ (TBD) MUST be returned.  The error
code 4__ can also be returned at any time by a server that does not
currently have the resources to store blocks for a block-wise PUT or
POST transfer that it would intend to implement in an atomic fashion.
[TBD: a way for a server to derive the equivalent of an Etag for the
request body, so that when these do not match in a PUT or POST
transfer, the reassembler MUST discard older blocks.  For now, the
transaction ID will have to suffice.]
</p>
<p></p>
<blockquote class="text"><dl>
<dt>Proposal:</dt>
<dd>
  Add a Block option (e.g., number 8) that can be used for block-wise transfers.
</dd>
<dt>Benefits:</dt>
<dd>
  Transfers larger than can be accommodated in constrained-network
link-layer packets can be performed in smaller blocks.
</dd>
<dt></dt>
<dd>No hard-to-manage conversation state is created at the adaptation
layer or IP layer for fragmentation.
</dd>
<dt></dt>
<dd>The transfer of each block is acknowledged, enabling retransmission
if required.
</dd>
<dt></dt>
<dd>Both sides have a say in the block size that actually will be used.
</dd>
</dl></blockquote>

<a name="option-encoding"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Option Encoding</h3>

<p>The option encoding in <a class='info' href='#I-D.ietf-core-coap'>[I&#8209;D.ietf&#8209;core&#8209;coap]<span> (</span><span class='info'>Shelby, Z., Frank, B., and D. Sturek, &ldquo;Constrained Application Protocol (CoAP),&rdquo; June&nbsp;2010.</span><span>)</span></a> is neither particularly
flexible nor particularly efficient.  One important, easily overlooked
disadvantage of the encoding is the large number of ways in which the
same information can be encoded.  This unneeded variability causes
problems in interoperability and increases both coding and testing
efforts required.
</p>
<a name="a-more-efficient-option-encoding"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
A More Efficient Option Encoding</h3>

<p>The basic idea of the proposed encoding is to reduce the number of
ways the same information can be encoded as far as possible (but not
further).  This both simplifies decoding (e.g., an implementation that
only ever uses short URIs never has to implement long options, because
these can only be used with long lengths) and interoperability testing
(there is only one way to say a specific thing, so there aren‚Äôt
multiple ways that need testing).
</p>
<p>One of the undesired variations in packets is the ordering of the
options.  In this draft, we therefore mandate a total ordering of
options, ordered by the option number.
</p>
<p>As an interesting consequence, the option numbers can now be expressed
in delta coding, in turn requiring fewer bits to encode the option
number.  This frees a number of bits for the length, making the
likelihood of actually needing the two-byte form of the option header
much smaller.
</p>
<p>To further reduce variation, the length of the value (as always, not
including the option header) is now encoded in such a way that there
is only one way to express a given length: The short form (one-byte
option tag) can express length values from 0 to 14, and the long form
is used for values of 15 to 15+255=270, inclusively
(<a class='info' href='#delta-options15'>Figure&nbsp;9<span> (</span><span class='info'>Option delta/length representation with small range</span><span>)</span></a>).
</p><br /><hr class="insert" />
<a name="delta-options15"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      0   1   2   3   4   5   6   7
    +---+---+---+---+---+---+---+---+
    | option delta  |    length     | for 0..14
    +---+---+---+---+---+---+---+---+
                                               for 15..270:
    +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
    | option delta  | 1   1   1   1 |          length - 15          |
    +---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;9: Option delta/length representation with small range&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>The small option delta of 0..15 in this encoding limits the difference
in option value between two adjacent options (or the value of the
option number of the first option).  While realistic sequences of
options rarely will have a problem here, option numbers 14, 28,
‚Ä¶ are reserved for no-op options with no body (implementations will
automatically ignore these with zero additional code; see <a class='info' href='#critical'>Section&nbsp;6.2<span> (</span><span class='info'>Critical Options</span><span>)</span></a>
why the reserved values are not 15, 30, ‚Ä¶).  Note that the resulting
delta that reaches the interim nop option may have any number, e.g.,
for including option 2 and 27 in one message, the sequence would be:
</p>
<p></p>
<ul class="text">
<li>delta = 2  (option 2, body)
</li>
<li>delta = 12 (option 14 = no-op, no body)
</li>
<li>delta = 13 (option 27, body)
</li>
</ul>

<p>In the unlikely case that only option 40 is needed, the sequence would
be:
</p>
<p></p>
<ul class="text">
<li>delta = 14 (option 14 = no-op, no body)
</li>
<li>delta = 14 (option 28 = no-op, bo body)
</li>
<li>delta = 12 (option 40, body)
</li>
</ul>

<a name="critical"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2"></a><h3>6.2.&nbsp;
Critical Options</h3>

<p>CoAP is designed to enable the definition of additional options by
later extensions.  Typically, new options are designed in such a way
that they can simply be ignored if not understood, i.e. new options
are <em>elective</em>.  However, some new options may be <em>critical</em>, i.e., there
is no good way to process the message if the option is not understood.
(Actually, half of the options currently on the table are critical in nature.)
</p>
<p>In the option encoding proposed, odd-numbered options indicate a
critical option; even-numbered options indicate elective options.
(Note that, again, the even/odd distinction is on the option number
resulting from the decoding, not the delta value actually embedded in
the packet.)
</p>
<p>Implementing this proposal requires some renumbering of options from
<a class='info' href='#I-D.ietf-core-coap'>[I&#8209;D.ietf&#8209;core&#8209;coap]<span> (</span><span class='info'>Shelby, Z., Frank, B., and D. Sturek, &ldquo;Constrained Application Protocol (CoAP),&rdquo; June&nbsp;2010.</span><span>)</span></a>.
</p>
<a name="payload-length-option"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.3"></a><h3>6.3.&nbsp;
Payload-Length Option</h3>

<p>Not all transport mappings may provide an unambiguous length of the
CoAP message.  For UDP, it may also be desirable to pack more than one
CoAP message into one UDP payload (aggregation); in that case, for all
but the last message there needs to be a way to delimit the payload of
that message.
</p>
<p>We propose a new option, the Payload-Length option.  If this option is
present, the value of this option is an unsigned integer giving the
length of the payload of the message (note that this integer can be
zero for a zero-length payload, which can in turn be represented by a zero-length option value).
(In the UDP aggregation case, what would have been in the payload of this
message after <tt>payload-length</tt> bytes is then actually one or more
additional messages.)
</p>
<a name="problems-with-specific-options"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.4"></a><h3>6.4.&nbsp;
Problems with specific options</h3>

<p></p>
<blockquote class="text"><dl>
<dt>Problem:</dt>
<dd>
  The Uri option currently does not provide a way to distinguish an
<tt>absolute-URI</tt> from an <tt>absolute-path</tt> <a class='info' href='#RFC3986'>[RFC3986]<span> (</span><span class='info'>Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;Uniform Resource Identifier (URI): Generic Syntax,&rdquo; January&nbsp;2005.</span><span>)</span></a>, as the leading slash is
omitted from the latter. (Ticket #12.)
</dd>
<dt>Proposal:</dt>
<dd>
  Split the option into two variants: <tt>Uri-Full</tt> and <tt>Uri-Path</tt>.
None (= <tt>Uri-Path</tt> with option value ‚Äò‚Äô), one of these, but never
both can be present.
</dd>
</dl></blockquote>

<a name="experimental-options"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Experimental Options</h3>

<a name="options-indicating-absolute-time"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1"></a><h3>7.1.&nbsp;
Options indicating absolute time</h3>

<p>HTTP has a number of headers that may indicate absolute time:
</p>
<p></p>
<ul class="text">
<li><tt>Date</tt>, defined in Section 14.18 in <a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a> (Section 9.3 in
<a class='info' href='#I-D.ietf-httpbis-p1-messaging'>[I&#8209;D.ietf&#8209;httpbis&#8209;p1&#8209;messaging]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Nielsen, H., Masinter, L., Leach, P., Berners-Lee, T., and J. Reschke, &ldquo;HTTP/1.1, part 1: URIs, Connections, and Message Parsing,&rdquo; March&nbsp;2010.</span><span>)</span></a>), giving the absolute time
a response was generated;
</li>
<li><tt>Last-Modified</tt>, defined in Section 14.29 in <a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a>, (Section
6.6 in <a class='info' href='#I-D.ietf-httpbis-p4-conditional'>[I&#8209;D.ietf&#8209;httpbis&#8209;p4&#8209;conditional]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Nielsen, H., Masinter, L., Leach, P., Berners-Lee, T., and J. Reschke, &ldquo;HTTP/1.1, part 4: Conditional Requests,&rdquo; March&nbsp;2010.</span><span>)</span></a>, giving the absolute time of
when the origin server believes the resource representation was last
modified;
</li>
<li><tt>If-Modified-Since</tt>, defined in Section 14.25 in <a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a>,
<tt>If-Unmodified-Since</tt>, defined in Section 14.28 in <a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a>, and
<tt>If-Range</tt>, defined in Section 14.27 in <a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a> can be used to
supply absolute time to gate a conditional request;
</li>
<li><tt>Expires</tt>, defined in Section 14.21 in <a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a> (Section 3.3 in
<a class='info' href='#I-D.ietf-httpbis-p6-cache'>[I&#8209;D.ietf&#8209;httpbis&#8209;p6&#8209;cache]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Nielsen, H., Masinter, L., Leach, P., Berners-Lee, T., and J. Reschke, &ldquo;HTTP/1.1, part 6: Caching,&rdquo; March&nbsp;2010.</span><span>)</span></a>), giving the absolute time
after which a response is considered stale.
</li>
<li>The more obscure headers <tt>Retry-After</tt>, defined in Section 14.37 in
<a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a>, and <tt>Warning</tt>, defined in section 14.46 in <a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a>,
also may employ absolute time.
</li>
</ul>

<p><a class='info' href='#I-D.ietf-core-coap'>[I&#8209;D.ietf&#8209;core&#8209;coap]<span> (</span><span class='info'>Shelby, Z., Frank, B., and D. Sturek, &ldquo;Constrained Application Protocol (CoAP),&rdquo; June&nbsp;2010.</span><span>)</span></a> defines a single <tt>Date</tt> option, which however
‚Äúindicates the creation time and date of a given resource
representation‚Äù, i.e., is closer to a ‚ÄúLast-Modified‚Äù HTTP header.
HTTP‚Äôs caching rules <a class='info' href='#I-D.ietf-httpbis-p6-cache'>[I&#8209;D.ietf&#8209;httpbis&#8209;p6&#8209;cache]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Nielsen, H., Masinter, L., Leach, P., Berners-Lee, T., and J. Reschke, &ldquo;HTTP/1.1, part 6: Caching,&rdquo; March&nbsp;2010.</span><span>)</span></a> make use of both <tt>Date</tt>
and <tt>Last-Modified</tt>, combined with <tt>Expires</tt>.
The specific semantics required for CoAP needs further consideration.
</p>
<p>In addition to the definition of the semantics, an encoding for
absolute times needs to be specified.
</p>
<p>In UNIX-related systems, it is customary to indicate absolute time as
an integer number of seconds, after midnight UTC, January 1, 1970.
Unless negative numbers are employed, this time format cannot
represent time values prior to January 1, 1970, which probably is not
required for the uses ob absolute time in CoAP.
</p>
<p>If a 32-bit integer is used and allowance is made for a sign-bit in a
local implementation, the latest UTC time value that can be
represented by the resulting 31 bit integer value is 03:14:07 on
January 19, 2038.  If the 32-bit integer is used as an unsigned value,
the last date is 2106-02-07, 06:28:15.
</p>
<p>The reach can be extended by:
- moving the epoch forward, e.g. by 40 years (= 1262304000 seconds) to
  2010-01-01.  This makes it impossible to represent Last-Modified
  times in that past (such as could be gatewayed in from HTTP).
- extending the number of bits, e.g. by one more byte, either always
  or as one of two formats, keeping the 32-bit variant as well.
</p>
<p>Also, the resolution can be extended by expressing time in
milliseconds etc., requiring even more bits (e.g., a 48-bit unsigned
integer of milliseconds would last well after year 9999.)
</p>
<p>For experiments, an experimental <tt>Date</tt> option is defined with the
semantics of HTTP‚Äôs <tt>Last-Modified</tt>. It can carry an unsigned integer
of 32, 40, or 48 bits; 32- and 40-bit integers indicate the absolute
time in seconds since 1970-01-01 00:00 UTC, while 48-bit integers
indicate the absolute time in milliseconds since 1970-01-01 00:00 UTC.
</p>
<a name="iana-considerations"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
IANA Considerations</h3>

<p>This draft adds the following option numbers to Table 2 of
<a class='info' href='#I-D.ietf-core-coap'>[I&#8209;D.ietf&#8209;core&#8209;coap]<span> (</span><span class='info'>Shelby, Z., Frank, B., and D. Sturek, &ldquo;Constrained Application Protocol (CoAP),&rdquo; June&nbsp;2010.</span><span>)</span></a>:
</p><table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="right"><col align="left"><col align="left"><col align="left"><col align="left"><col align="left">
<tr><th align="right">Type</th><th align="left">C/E</th><th align="left">Name</th><th align="left">Data type</th><th align="left">Length</th><th align="left">Rules</th></tr>
<tr>
<td align="right">2</td>
<td align="left">E</td>
<td align="left">TeRI</td>
<td align="left">Duration + Sequence of Bytes</td>
<td align="left">2-n B</td>
<td align="left">&#160;</td>
</tr>
<tr>
<td align="right">7</td>
<td align="left">E</td>
<td align="left">Accept</td>
<td align="left">Sequence of bytes</td>
<td align="left">1-n B</td>
<td align="left">&#160;</td>
</tr>
<tr>
<td align="right">8</td>
<td align="left">C</td>
<td align="left">Block</td>
<td align="left">Unsigned Integer</td>
<td align="left">1-3 B</td>
<td align="left">&#160;</td>
</tr>
</table>
<br clear="all" />

<p>With the new option encoding and the proposal for essential options,
the total list becomes:
</p><table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="right"><col align="left"><col align="left"><col align="left"><col align="left"><col align="left">
<tr><th align="right">Type</th><th align="left">C/E</th><th align="left">Name</th><th align="left">Data type</th><th align="left">Length</th><th align="left">Rules</th></tr>
<tr>
<td align="right">0</td>
<td align="left">E</td>
<td align="left">TeRI</td>
<td align="left">Duration + Sequence of Bytes</td>
<td align="left">2-n B</td>
<td align="left">&#160;</td>
</tr>
<tr>
<td align="right">1</td>
<td align="left">C</td>
<td align="left">Uri-Path</td>
<td align="left">String</td>
<td align="left">1-n B</td>
<td align="left">&#160;</td>
</tr>
<tr>
<td align="right">2</td>
<td align="left">E</td>
<td align="left">Accept</td>
<td align="left">Sequence of Bytes</td>
<td align="left">1-n B</td>
<td align="left">&#160;</td>
</tr>
<tr>
<td align="right">3</td>
<td align="left">C</td>
<td align="left">Uri-Full</td>
<td align="left">String</td>
<td align="left">1-n B</td>
<td align="left">&#160;</td>
</tr>
<tr>
<td align="right">4</td>
<td align="left">E</td>
<td align="left">Max-age</td>
<td align="left">Duration</td>
<td align="left">1 B</td>
<td align="left">&#160;</td>
</tr>
<tr>
<td align="right">5</td>
<td align="left">C</td>
<td align="left">Content-type</td>
<td align="left">Unsigned Integer</td>
<td align="left">1-2 B</td>
<td align="left">&#160;</td>
</tr>
<tr>
<td align="right">6</td>
<td align="left">E</td>
<td align="left">Etag</td>
<td align="left">Sequence of Bytes</td>
<td align="left">1-4 B</td>
<td align="left">&#160;</td>
</tr>
<tr>
<td align="right">8</td>
<td align="left">E</td>
<td align="left">Date</td>
<td align="left">Unsigned Integer (?)</td>
<td align="left">4-6 B</td>
<td align="left">(with body)</td>
</tr>
<tr>
<td align="right">13</td>
<td align="left">C</td>
<td align="left">Block</td>
<td align="left">Unsigned Integer</td>
<td align="left">1-3 B</td>
<td align="left">&#160;</td>
</tr>
<tr>
<td align="right">14..</td>
<td align="left">E</td>
<td align="left">Nop</td>
<td align="left">None</td>
<td align="left">0 B</td>
<td align="left">&#160;</td>
</tr>
<tr>
<td align="right">15</td>
<td align="left">C</td>
<td align="left">Payload-length</td>
<td align="left">Unsigned Integer</td>
<td align="left">0-2 B</td>
<td align="left">&#160;</td>
</tr>
</table>
<br clear="all" />

<p>(The upper limit of <tt>n</tt> indicates that the size is limited only by the
options encoding.)
Odd option numbers indicate critical options, even option numbers
indicate elective options.
Option numbers 14, 28, 42, ‚Ä¶ (any number divisible by 14) are
reserved (they are elective and therefore ignored by all implementations).
</p>
<p>(Subscription-related options are discussed in
<a class='info' href='#I-D.hartke-coap-observe'>[I&#8209;D.hartke&#8209;coap&#8209;observe]<span> (</span><span class='info'>Hartke, K. and C. Bormann, &ldquo;Observing Resources in CoAP,&rdquo; June&nbsp;2010.</span><span>)</span></a>, so the following option from
<a class='info' href='#I-D.ietf-core-coap'>[I&#8209;D.ietf&#8209;core&#8209;coap]<span> (</span><span class='info'>Shelby, Z., Frank, B., and D. Sturek, &ldquo;Constrained Application Protocol (CoAP),&rdquo; June&nbsp;2010.</span><span>)</span></a> is not further discussed here:
</p><table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="right"><col align="left"><col align="left"><col align="left"><col align="left"><col align="left">
<tr><th align="right">Type</th><th align="left">C/E</th><th align="left">Name</th><th align="left">Data type</th><th align="left">Length</th><th align="left">Rules</th></tr>
<tr>
<td align="right">6</td>
<td align="left">E</td>
<td align="left">Subscription-lifetime</td>
<td align="left">Duration</td>
<td align="left">1 B</td>
<td align="left">With SUBSCRIBE or its response</td>
</tr>
</table>
<br clear="all" />

<a name="security-considerations"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Security Considerations</h3>

<p>TBD.
(Weigh the security implications of application layer block-wise
transfer against those of adaptation-layer or IP-layer fragmentation.
Discuss the implications of TeRIs.
Also: Discuss nodes without clocks.)
</p>
<a name="amplification-attacks"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.1"></a><h3>9.1.&nbsp;
Amplification Attacks</h3>

<p>TBD.
(This section discusses how CoAP nodes could become implicated in DoS
attacks by using the amplifying properties of the protocol, as well as
mitigations for this threat.)
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>10.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.hartke-coap-observe">[I-D.hartke-coap-observe]</a></td>
<td class="author-text">Hartke, K. and C. Bormann, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-hartke-coap-observe-00.txt">Observing Resources in CoAP</a>,&rdquo; draft-hartke-coap-observe-00 (work in progress), June&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-hartke-coap-observe-00.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-core-coap">[I-D.ietf-core-coap]</a></td>
<td class="author-text">Shelby, Z., Frank, B., and D. Sturek, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-core-coap-00.txt">Constrained Application Protocol (CoAP)</a>,&rdquo; draft-ietf-core-coap-00 (work in progress), June&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-core-coap-00.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-httpbis-p1-messaging">[I-D.ietf-httpbis-p1-messaging]</a></td>
<td class="author-text">Fielding, R., Gettys, J., Mogul, J., Nielsen, H., Masinter, L., Leach, P., Berners-Lee, T., and J. Reschke, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-httpbis-p1-messaging-09.txt">HTTP/1.1, part 1: URIs, Connections, and Message Parsing</a>,&rdquo; draft-ietf-httpbis-p1-messaging-09 (work in progress), March&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-httpbis-p1-messaging-09.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-httpbis-p4-conditional">[I-D.ietf-httpbis-p4-conditional]</a></td>
<td class="author-text">Fielding, R., Gettys, J., Mogul, J., Nielsen, H., Masinter, L., Leach, P., Berners-Lee, T., and J. Reschke, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-httpbis-p4-conditional-09.txt">HTTP/1.1, part 4: Conditional Requests</a>,&rdquo; draft-ietf-httpbis-p4-conditional-09 (work in progress), March&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-httpbis-p4-conditional-09.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-httpbis-p6-cache">[I-D.ietf-httpbis-p6-cache]</a></td>
<td class="author-text">Fielding, R., Gettys, J., Mogul, J., Nielsen, H., Masinter, L., Leach, P., Berners-Lee, T., and J. Reschke, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-httpbis-p6-cache-09.txt">HTTP/1.1, part 6: Caching</a>,&rdquo; draft-ietf-httpbis-p6-cache-09 (work in progress), March&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-httpbis-p6-cache-09.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2616">[RFC2616]</a></td>
<td class="author-text"><a href="mailto:fielding@ics.uci.edu">Fielding, R.</a>, <a href="mailto:jg@w3.org">Gettys, J.</a>, <a href="mailto:mogul@wrl.dec.com">Mogul, J.</a>, <a href="mailto:frystyk@w3.org">Frystyk, H.</a>, <a href="mailto:masinter@parc.xerox.com">Masinter, L.</a>, <a href="mailto:paulle@microsoft.com">Leach, P.</a>, and <a href="mailto:timbl@w3.org">T. Berners-Lee</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2616">Hypertext Transfer Protocol -- HTTP/1.1</a>,&rdquo; RFC&nbsp;2616, June&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2616.txt">TXT</a>, <a href="http://www.rfc-editor.org/rfc/rfc2616.ps">PS</a>, <a href="http://www.rfc-editor.org/rfc/rfc2616.pdf">PDF</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2616.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2616.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3986">[RFC3986]</a></td>
<td class="author-text"><a href="mailto:timbl@w3.org">Berners-Lee, T.</a>, <a href="mailto:fielding@gbiv.com">Fielding, R.</a>, and <a href="mailto:LMM@acm.org">L. Masinter</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc3986">Uniform Resource Identifier (URI): Generic Syntax</a>,&rdquo; STD&nbsp;66, RFC&nbsp;3986, January&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc3986.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc3986.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc3986.xml">XML</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>10.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="REST">[REST]</a></td>
<td class="author-text">Fielding, R., &ldquo;Architectural Styles and the Design of Network-based Software Architectures,&rdquo; 2000.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC1951">[RFC1951]</a></td>
<td class="author-text"><a href="mailto:ghost@aladdin.com">Deutsch, P.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc1951">DEFLATE Compressed Data Format Specification version 1.3</a>,&rdquo; RFC&nbsp;1951, May&nbsp;1996 (<a href="http://www.rfc-editor.org/rfc/rfc1951.txt">TXT</a>, <a href="http://www.rfc-editor.org/rfc/rfc1951.ps">PS</a>, <a href="http://www.rfc-editor.org/rfc/rfc1951.pdf">PDF</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4648">[RFC4648]</a></td>
<td class="author-text">Josefsson, S., &ldquo;<a href="http://tools.ietf.org/html/rfc4648">The Base16, Base32, and Base64 Data Encodings</a>,&rdquo; RFC&nbsp;4648, October&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4648.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Carsten Bormann</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Universit√§t Bremen TZI</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Postfach 330440</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Bremen  D-28359</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Germany</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+49-421-218-63921</td></tr>
<tr><td class="author" align="right">Fax:&nbsp;</td>
<td class="author-text">+49-421-218-7000</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:cabo@tzi.org">cabo@tzi.org</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Klaus Hartke</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Universit√§t Bremen TZI</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Postfach 330440</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Bremen  D-28359</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Germany</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+49-421-218-63908</td></tr>
<tr><td class="author" align="right">Fax:&nbsp;</td>
<td class="author-text">+49-421-218-7000</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:hartke@tzi.org">hartke@tzi.org</a></td></tr>
</table>
</body></html>
