


Network Working Group                                           T. Melia
Internet-Draft                                       B. Mongazon-Cazavet
Intended status: Experimental                   Alcatel-Lucent Bell Labs
Expires: January 6, 2010                                   July 05, 2009


              Multihoming extensions for Proxy Mobile IPv6
                  draft-melia-netext-muho-solution-00

Status of this Memo

   This Internet-Draft is submitted to IETF in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on January 6, 2010.

Copyright Notice

   Copyright (c) 2009 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents in effect on the date of
   publication of this document (http://trustee.ietf.org/license-info).
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.

Abstract

   This document provides extensions to Proxy Mobile IPv6 in order to
   support multihomed mobile nodes (MN).  These extensions are intended
   to permit such mobile nodes to send and receive IP packets on



Melia & Mongazon-Cazavet  Expires January 6, 2010               [Page 1]

Internet-Draft             PMIPv6 multihoming                  July 2009


   multiple interfaces in a simultaneous and possibly discriminated
   manner when attached to a PMIPv6 domain.  A typical usage of these
   extensions is to perform downlink flow discrimination through
   multiple interfaces based on filtering rules (i.e. dedicate one MN
   interface to VOIP traffic and another MN interface to HTTP traffic).

   The proposed extensions to PMIPv6 attempt to increment in a backward
   compatible manner the current PMIPv6 specification.  In addition
   these extensions use, when possible, existing specifications related
   to multihoming support at IETF and conform to the problem statement
   of Netext Working Group.

Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC2119].RFC
   (e&"

































Melia & Mongazon-Cazavet  Expires January 6, 2010               [Page 2]

Internet-Draft             PMIPv6 multihoming                  July 2009


Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  4
   2.  Overview . . . . . . . . . . . . . . . . . . . . . . . . . . .  6
   3.  Detailed flow charts . . . . . . . . . . . . . . . . . . . . .  8
     3.1.  Initial multihoming setup  . . . . . . . . . . . . . . . .  8
     3.2.  Multihoming renewal  . . . . . . . . . . . . . . . . . . .  8
     3.3.  Multihoming filters modification . . . . . . . . . . . . .  9
     3.4.  Multihoming interface removal  . . . . . . . . . . . . . . 10
     3.5.  Multihoming interface addition . . . . . . . . . . . . . . 10
   4.  Protocol Extensions  . . . . . . . . . . . . . . . . . . . . . 11
     4.1.  Multihoming Option . . . . . . . . . . . . . . . . . . . . 11
     4.2.  Flow Identifier Option . . . . . . . . . . . . . . . . . . 13
   5.  MAG behavior . . . . . . . . . . . . . . . . . . . . . . . . . 14
   6.  LMA behavior . . . . . . . . . . . . . . . . . . . . . . . . . 14
     6.1.  BCE modifications  . . . . . . . . . . . . . . . . . . . . 15
   7.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . . 15
   8.  Security Considerations  . . . . . . . . . . . . . . . . . . . 15
   9.  Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . 15
   10. References . . . . . . . . . . . . . . . . . . . . . . . . . . 16
     10.1. Normative References . . . . . . . . . . . . . . . . . . . 16
     10.2. Informative References . . . . . . . . . . . . . . . . . . 16
   Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . . . 16




























Melia & Mongazon-Cazavet  Expires January 6, 2010               [Page 3]

Internet-Draft             PMIPv6 multihoming                  July 2009


1.  Introduction

   Proxy Mobile IPv6 (PMIPv6), specified in [RFC5213], provides network
   based mobility management to hosts connecting to a PMIPv6 domain.
   PMIPv6 introduces two functional entities, the Local Mobility Anchor
   (LMA) and the Mobility Access Gateway (MAG).  The MAG is the first
   layer-three hop detecting MN attachment and providing IP
   connectivity.  The LMA is the entity assigning one or more HNP to the
   MN and is the topological anchor for all traffic from/to the MN.

   PMIPv6 allows a MN to connect to the same PMIPv6 domain through
   multiple interfaces.  However in such a case, PMIPv6 requires each
   interface to be assigned a distinct IPv6 address and thus prevents
   from multihoming capabilities.[NETEXT] studies how to support
   multihoming in PMIPv6 and identifies three possible models regarding
   IPv6 address management:

   o  unique prefix per interface

   o  unique address per interface

   o  shared address across interfaces

   [NETEXT] further describes topics associated with each model, in
   particular handover behavior and security aspects.

   In the present version, this document solely focuses on the shared
   address across interfaces model.  The focus is intended to match the
   case where a multihomed MN is known by its Internet peers under the
   same address while the PMIPv6 domain it is attached to can perform,
   on its own criteria, packets delivery through the suited MN
   interface.  As a major consequence of this limited focus, only a
   single Home Network Prefix (HNP) can be associated to a multihomed MN
   in a PMIPv6 domain.  The current focus can be extended in further
   releases of this document.

   This document does not re-use the interface "handover" or "mobility"
   terminology that can be perceived as confusing in the multihoming
   context (where MN interfaces are used simultaneously).  Instead, the
   document introduces the concept of multihoming group (a logical set
   of interfaces of a MN) and provides the support of elementary
   operations (addition, modification, removal) on a group entity for a
   MN.  This terminology is expected to be more suited to the general
   multihoming paradigm.  In a first step, a default multihoming group
   (id=0) is defined to represent all interfaces of a given MN.

   The functional usage of multihoming MN capabilities in a PMIPv6
   domain is defined by the present specification in a flexible and



Melia & Mongazon-Cazavet  Expires January 6, 2010               [Page 4]

Internet-Draft             PMIPv6 multihoming                  July 2009


   multi-purpose manner.  This allows for various traffic processing in
   a PMIPv6 domain with multihomed MN such as (not limited to): traffic
   blocking, traffic load-balancing or traffic dissemination.  To
   achieve this flexibility, this document uses the concept of "filter"
   to denote a unitary criteria that can be managed between a MAG and a
   LMA in relationship with a MN interface.  Unitary filters can be
   added, deleted and modified on a per multihoming group basis.
   Flexibility is achieved by allowing an arbitrary filter syntax (or
   grammar) as proposed in [MEXT].  The filter syntax is a matter of
   agreement between MAG and LMA entities.  For the sake of
   understanding, the "flow" and "filter" terminology shall be
   considered equivalent.

   The following figureFigure 1 depicts the general principles of PMIPv6
   extensions for multihoming support as proposed by the present
   document.

                                             LMA State
                                +----+       ---------
                                |LMA |       (addr, pCoA1, flow1, mhgid)
                                +----+       (addr, pCoA2, flow2, mhgid)
                                 //\\
                      +---------//--\\-------------+
                     (         //    \\             ) PMIPv6 domain
                     (        //      \\            )
                      +------//--------\\----------+
                            //          \\
                    pCoA1  //            \\ pCoA2
                        +----+           +----+
           if1 -> mhgid |MAG1|           |MAG2| if2 -> mhgid
                        +----+           +----+
                          |                |
                          |                |
                          | if1        if2 |
                          +------[MN]------+
                                 addr


              Figure 1: Multihomed MN with PMIPv6 extensions

   When MN activates if1, MAG1selects the default multihoming group and
   perform proxy registration toward the LMA.  MAG1 provides filters
   (flow1) during registration.  LMA accepts proxy registration from
   MAG1 and allocates MN addr according to the shared address model.
   Since proxy registration is requesting multihoming support, LMA
   stores MAG1 filters that come along with delivery to pCoA1.

   When MN activates if2, MAG2 selects the default multihoming group and



Melia & Mongazon-Cazavet  Expires January 6, 2010               [Page 5]

Internet-Draft             PMIPv6 multihoming                  July 2009


   perform proxy registration toward the LMA.  MAG2 provides filters
   (flow2) during registration.  LMA accepts proxy registration from
   MAG2 and allocates MN addr according to the shared address model.
   LMA stores MAG2 filters that come along with delivery to pCoA2.

   Later on, LMA receive IP packets destinated to MN addr.  The LMA
   attempts to match each IP packet against filters (flow1, flow2)
   stored for the MN addr.  When a filter match (flow1 or flow2), the
   LMA perform the action for the IP packet in the context of the
   matching flow.  In particular if the IP packet is to be delivered,
   the LMA performs delivery using the pCoA associated to the filter
   (pCoA1 on flow1 or pCoA2 on flow2).

   LMA behavior is extended to allow simultaneous transmission of
   downlink (DL) packets to the mobile node across multiple interfaces.
   No assumption is done on how the MN performs uplink (UL) packets
   transmission.  The MN might either use a single interface for UL or
   select an interface according to existing or new mechanisms such as
   the ones being defined by the IETF MIF working group.  The UL
   transmission of packets from multihomed MN is outside the scope of
   this specification.

   Both LMA and MAG behaviors are extended to provide enhanced Proxy
   Binding management for multihomed MN.  LMA shall support Binding
   Control Entries (BCE) of multihomed type.  This includes the
   capability to refer to a multihoming group id (mhgid) and a set of
   filters in a BCE.  This also includes mechanism to allocate a unique
   HNP per MN when multihoming is used.  LMA shall support or delegate
   the downlink packet processing and delivery according to flow
   specifications.  Both MAG and LMA shall be able to manage flows on a
   per multihomed MN basis.  Downlink flows are created/deleted/modified
   at LMA level on MAG request using PBU/PBA exchanges.  LMA does not
   operate flows on its own (unless it has been instructed by MAG) for
   the current release of the document.


2.  Overview

   This specification proposes to extend PMIPv6 to support multiple
   proxy CoAs per mobility session possibly associated with downlink
   transmission criteria using the flow concept.

   Upon MN attachment the MAG determines if the MN should be provided
   with multihoming service and, if so, selects the flow configuration
   that should be put in place for delivery through itself.  The MAG can
   learn this information through a policy store or using attachment-
   specific signalling.  Any of the methods used by the MAG is however
   out of scope of this document.  If the MAG determines that the MN can



Melia & Mongazon-Cazavet  Expires January 6, 2010               [Page 6]

Internet-Draft             PMIPv6 multihoming                  July 2009


   use the multihoming service it forms a PBU as per [RFC5213] and adds
   a Multihoming Option (newly defined by this document) and possibly
   one or several Flow Identifier option(s) as defined in [MEXT].  The
   Multihoming option aims at identifying (MHGID) and parameterize the
   multihoming group to be created/updated/deleted by the LMA on MAG
   demand.  The choice of identification of the multihoming group
   follows the following rule:

   All PBUs with the same HNP and MHGID values belong to the same
   mobility session from the LMA perspective.

   In the current revision of the document, only the default multihoming
   group is supported (id=0).  In addition, multihoming group parameters
   are left for further study.


        Mobility Session 1                    Mobility Session 1
      +----------------------+              +---------------------+
      | HNP1   PCoA1 MHGID0  |   ========>  | HNP1   PCoA1 MHGID0 |
      +----------------------+              | HNP1   PCoA2 MHGID0 |
                                            +---------------------+



            Figure 2: Mobility session extended for multihoming

   Figure 2 shows how the mobility session is extended to span the same
   HNP across multiple interfaces.  This updates the text in [RFC5213]
   where each single interface is managed under a different mobility
   session.  The MHGID, selected by MAG1 (corresponding to PCoA1) upon
   MN attachment, is stored at the LMA.  When the MN attaches to MAG2
   (corresponding to PCoA2) MAG2 selects its MHGID value.  If both MAG1
   and MAG2 MGHID and HNP values match then the LMA adds PCoA2 -- MHGID0
   to the already existing mobility session.

   The MAG treats the indication of multihoming as an explicit
   indication of adding flows to the PBU if any.  Such flows can be
   learned for instance during MN access to the network.

   Upon reception of a PBU containing indication for multihoming the LMA
   should perform a binding cache lookup and append the information to
   the found BCE.  Filters, if present, are extracted from the PBU and
   processed by the LMA.  The result of Filters processing is returned
   in the PBA by the LMA on an individual basis.

   This is considered to be out of scope how the MN handles
   configuration of the same address on different interfaces.




Melia & Mongazon-Cazavet  Expires January 6, 2010               [Page 7]

Internet-Draft             PMIPv6 multihoming                  July 2009


3.  Detailed flow charts

   This section introduces detailed flow charts for multihoming setup,
   renewal, filters modifications and interface removal/addition.

3.1.  Initial multihoming setup

   Figure 3 shows the attachment of IF1 and subsequently the attachment
   of IF2.  IF1 and IF2 belongs to the same multihoming group ID (i.e.
   the default multihoming group id 0).


   +-----+       +------+ +------+               +-----+
   | MN  |       | MAG1 | | MAG2 |               | LMA |
   +-----+       +--|---+ +------+               +-----+
      |             |        |       MN_ID, PCoA1,  |
 MN[IF1] Attached MAG1       |       MHGID0, HI=1,  |
      |             |        |       Filters_1 RQ   |
      |             |------------ PBU ------------->|
      |             |        |                      |MN_ID, HNP1, PCoA1,
      |             |<------------- PBA ------------|MHGID0, HI=1,
      |---RtSol---->|        |                      |Filters_1 RP
      |             |==== Bi-Dir Tunnel ============|
      |<--Rtr Adv --|        |                      |
      |             |        |                      |
   IP Address                |                      |
  Configuration              |MN_ID, PCoA2,         |
      |                      |MGHID0, HI=1,         |
      |MN[IF2] Attached MAG2 |Filters_2 RQ          |
      |                      |------------ PBU ---->|
      |                      |                      |MN_ID, HNP1, PCoA2,
      |                      |<---- PBA ------------|MHGID0, HI=1,
      |---RtSol------------->|                      |Filters_2 RP
      |                      |                      |
      |<-----------Rtr Adv --|                      |
   IP Address                |                      |
  Configuration              |                      |
      |                      |                      |



                    Figure 3: Initial multihoming setup

3.2.  Multihoming renewal

   Figure 4 shows how binding renewal upon lifetime expiration is done.





Melia & Mongazon-Cazavet  Expires January 6, 2010               [Page 8]

Internet-Draft             PMIPv6 multihoming                  July 2009


       +-----+       +------+ +------+               +-----+
       | MN  |       | MAG1 | | MAG2 |               | LMA |
       +-----+       +--|---+ +------+               +-----+
          |             |        |                      |
     MN[IF1] Attached MAG1       |        HNP1, PCoA1,  |
     Lifetime expires   |        |        MGHID0, HI=5  |
          |             |------------ PBU ------------->|
          |             |        |                      |HNP1, PCoA1,
          |             |<------------- PBA ------------|MGHID0, HI=5
          |                      |                      |
          |                      |                      |
     MN[IF2] Attached MAG1       |                      |
     Lifetime expires            |                      |
          |                      |                      |
          |                      |                      |
          |                      |HNP1, PCoA2,          |
          |                      |MGHID0, HI=5          |
          |                      |------------ PBU ---->|
          |                      |                      |HNP1, PCoA2,
          |                      |<---- PBA ------------|MGHID0, HI=5
          |                      |                      |
          |                      |                      |



                       Figure 4: Multihoming renewal

3.3.  Multihoming filters modification

   Filters can also be modified upon reception of an internal or
   external MAG trigger Figure 5.  From the PMIPv6 point of view,
   filters modification is carried by binding renewal semantics (HI=5).
   The target multihoming group is set by the MAG in the multihoming
   option (MHGID field).  This allows MAG to modify at any time the
   downlink filters it is responsible for.


      +-----+       +------+ +------+               +-----+
      | MN  |       | MAG1 | | MAG2 |               | LMA |
      +-----+       +--|---+ +------+               +-----+
         |             |        |        HNP1, PCoA1,  |
    MN[IF1] Attached MAG1       |        MHGID0, HI=5  |
     MAG triggers flow modif    |        Filters_1_modifs RQ
         |             |------------ PBU ------------->|
         |             |        |                      |HNP1, PCoA1,
         |             |<------------- PBA ------------|MGHID0, HI=5
         |                      |                    Filters_1_modifs RP
         |                      |                      |



Melia & Mongazon-Cazavet  Expires January 6, 2010               [Page 9]

Internet-Draft             PMIPv6 multihoming                  July 2009


                Figure 5: Multihoming filters modification

3.4.  Multihoming interface removal

   Figure 6 shows how to remove an interface from a multihoming group
   managed by a MAG for a given MN.  The target multihoming group is set
   by the MAG in the multihoming option (MHGID field).


        +-----+       +------+ +------+               +-----+
        | MN  |       | MAG1 | | MAG2 |               | LMA |
        +-----+       +--|---+ +------+               +-----+
           |             |        |        HNP1, PCoA1,  |
      MN[IF1] Attached MAG1       |        MHGID0, HI=4  |
       LINK going down   |        |        LIFETIME = 0  |
           |             |------------ PBU ------------->|
           |             |        |                      |HNP1, PCoA1,
           |             |<------------- PBA ------------|MHGID0, HI=4
           |                      |                      |



                  Figure 6: Multihoming interface removal

3.5.  Multihoming interface addition

   Figure 7 addresses the case where the MN adds a third interface to
   the same multihoming group for a given MN.  The target multihoming
   group is set by the MAG in the multihoming option (MHGID field).


                     (------)
       +-----+       ( MAG1 ) +------+               +-----+
       | MN  |       ( MAG2 ) | MAG3 |               | LMA |
       +-----+       (------) +------+               +-----+
          |                      |        MN_ID, PCoA3, |
      MN[IF1] and MNF[IF2]       |        MHGID0, HI=1, |
      attached to MAG1 and MAG2  |        Filtrers_3 RQ |
          |                      |--- PBU ------------->|
          |                      |                      | HNP1, PCoA3,
          |                      |<---- PBA ------------| MHGID0, HI=1,
          |                      |                      | Filtrers_3 RP
          |                      |== Bi-Dir Tunnel =====|
          |                      |                      |
          |---RtSol------------->|                      |
          |                      |                      |
          |<-------Rtr Adv-------|                      |
          |                      |                      |



Melia & Mongazon-Cazavet  Expires January 6, 2010              [Page 10]

Internet-Draft             PMIPv6 multihoming                  July 2009


                 Figure 7: Multihoming interface addition


4.  Protocol Extensions

   We provide in the following extensions to the protocol options as
   defined in [RFC5213].

4.1.  Multihoming Option

   Figure 8 shows the Multihoming option.








































Melia & Mongazon-Cazavet  Expires January 6, 2010              [Page 11]

Internet-Draft             PMIPv6 multihoming                  July 2009


    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |      Type     |    Length     |     MHGID     | ACT |   RFU   |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

    Type
        TBA

    Length

        8-bit unsigned integer indicating the length of the option
        in octets, excluding the type and length fields.  This field
        MUST be set to 2.

    MHGID
        This 8 bit field identifies the multihoming group the PBU/PBA refer to.
        The value 0 is reserved to the default multihoming group which includes
        all interfaces of a MN. Only value 0 is currently supported.

    ACT

        This 3-bit field is used to provide optional action to be
        performed by LMA upon removal of an interface from a multihoming
        group. The field shall only be set by the MAG when HI value in
        PBU is set to 4, otherwise the field shall be set to 0.
        The following bit values are currently defined:

         000: Reserved
         001: Remove filters
         010: Keep filters

    RFU (Reserved for Future Use)

        This 5-bit field is unused for now.  The value MUST be
        initialized to 0 by the sender and MUST be ignored by the
        receiver.

                       Figure 8: Multihoming option

   The following considerations on the ACT field apply.  If 001 (Remove
   filters) is set on interface removal, the LMA shall remove all
   filters currently configured.  This might result in downlink traffic
   disruption.  If 010 (Keep filters) is set on interface removal, the
   LMA shall arrange to re-instantiate filters configured on the removed
   interface to existing filters (if any) of other interfaces of the
   multihoming group if any.  This allows to avoid downlink traffic
   disruption.  The implementation of this action at LMA level is not



Melia & Mongazon-Cazavet  Expires January 6, 2010              [Page 12]

Internet-Draft             PMIPv6 multihoming                  July 2009


   specified by the present document.  However, a filter that has been
   re-instantiated on a interface should be advertised by the LMA with a
   specific status of Flow identifier option whenever a MAG perform a
   filter operation the interface.

4.2.  Flow Identifier Option

   The FID option defined in ID [MEXT] is used in the current
   specification to manage downlink packet delivery across interfaces of
   a multihomed MN.  The option might be used by a MAG to create/modify/
   delete filter(s) on the LMA for a particular multihoming group of a
   MN.  Upon successful processing and installation of filter(s) at LMA
   level an individual status (Status field) shall be returned to the
   MAG by the LMA.  The LMA should later evaluate packets destinated to
   a MN through filters installed by MAG(s) that are proxying the MN
   under the same mobility session.  The LMA must perform the action(s)
   associated to the matching filter(s).

   In case, the LMA re-instantiates flows on a multihoming interface
   group toward a MAG for a given MN, the LMA shall perform the
   following processing:

   o  Allocate a unique FID to the re-instantiated filter within the
      context of existing filters for the multihoming group of the MN
      toward the target LMA

   o  Set the PRO field to a new reserved value (2: flow binding re-
      instantiated by LMA) of [MEXT] as proposed by the current
      specification

   o  Copy FID-PRI and Action fields from the original filter into the
      re-instantiated filter

   Since no notification mechanism is currently defined between MAG and
   LMA in [RFC5213], re-instantiated filter(s) will be returned by LMA
   only on MAG demand.  This might happen when MAG renews PBU or create/
   modify/delete its own filters.

   The format of the option is briefly recalled hereafter.  The present
   specification proposes to extend the PRO field value in order to add
   the (2: flow binding re-instantiated by LMA) predefined value.  The
   full specification of the option can be found in [MEXT]









Melia & Mongazon-Cazavet  Expires January 6, 2010              [Page 13]

Internet-Draft             PMIPv6 multihoming                  July 2009


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       | Option Type   |  Option Len   |              FID              |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |   FID-PRI     |   Action      |  Rsvd |  PRO  |     Status    |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+




                    Figure 9: FID Option Action values


5.  MAG behavior

   The MAG upon MN attachment performs all the steps as per [RFC5213].
   In addition to this it MUST perform the following checks.

   The MAG learns if the MN is requesting a HNP as part of a new
   mobility session or if it is requesting to attach a new interface as
   part of an already existing mobility session.  The MAG retrieves the
   MHGID from e.g.  MN's profile as well as filters.  The MAG can learn
   filters in an access-specific manner or alternatively via other
   infrastructure support.  This is however out of scope of this
   document.  In any case the MAG MUST encode the PBU including at least
   the Multihoming option as specified before and possibly one or more
   FID option(s).

   The MAG can modify or delete filters attached to a multihoming group
   by sending a PBU carrying the filter operation(s) to be performed.
   It shall analyze individual results according to what is returned by
   the LMA.  In addition, MAG should be prepared to handle filters that
   has been re-instantiated by LMA when MN has disconnected an interface
   belonging to the same multihoming group.

   When MAG proxying a MN detects the MN has detached the related
   interface, MAG stops proxying the MN by sending a PBU with lifetime
   set to 0 and includes the multihoming option that identifies the
   target multihoming group of the detached interface as well as removal
   behavior regarding filters.  MAG waits for successful PBA to release
   the MN access.


6.  LMA behavior

   The LMA should be modified in the BCE and conceptual data structures.




Melia & Mongazon-Cazavet  Expires January 6, 2010              [Page 14]

Internet-Draft             PMIPv6 multihoming                  July 2009


6.1.  BCE modifications

   The LMA binding cache lookup method should be extended to accommodate
   multihoming support.  In case the LMA processes the Multihoming
   Option it SHOULD update existing mobility session as defined in
   [RFC5213].  In addition to this it MUST perform the following checks.

   If the Multihoming option is present in the PBU, the LMA must
   allocate/update/delete the mobility session and the multihoming group
   ID it refers to.  Flow filters received in the PBU shall be created/
   modified/deleted for the target Multihoming group ID and a result
   shall be return on an individual filter basis.

   In addition, the LMA shall handle removal of interfaces from
   multihoming group according to MAG instructions.  In particular, if a
   MAG instructs a LMA to remove an interface from a multihoming group
   but to keep filters, the LMA should re-instantiate filters on
   existing interface(s) of the multihoming group according to its own
   mechanisms.

   If a LMA does not support multihoming extension (as a whole) or
   specific multihoming option, as proposed by the present document, it
   shall return a status code in PBA as defined in [RFC5213].  The later
   specification might be extended to include multi-homing specific
   statuses, such as:

   MH_NOT_SUPPORTED_BY_LMA

   MH_FILTERS_REINSTANCIATION_NOT_SUPPORTED_BY_LMA


7.  IANA Considerations

   This document makes no request of IANA.


8.  Security Considerations

   This document only extends existing options, no security issues are
   introduced.


9.  Acknowledgements


10.  References





Melia & Mongazon-Cazavet  Expires January 6, 2010              [Page 15]

Internet-Draft             PMIPv6 multihoming                  July 2009


10.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC5213]  Gundavelli, S., Leung, K., Devarapalli, V., Chowdhury, K.,
              and B. Patil, "Proxy Mobile IPv6", RFC 5213, August 2008.

10.2.  Informative References

   [MEXT]     IETF MEXT Working Group, "Flow Bindings in Mobile IPv6 and
              Nemo Basic Support", April 2009.

   [NETEXT]   IETF NETEXT Working Group, "Multiple Interface Support
              with Proxy Mobile IPv6", March 2009.

   [RFC5149]  Korhonen, J., Nilsson, U., and V. Devarapalli, "Service
              Selection for Mobile IPv6", RFC 5149, February 2008.


Authors' Addresses

   Telemaco Melia
   Alcatel-Lucent Bell Labs

   Email: telemaco.melia@alcatel-lucent.com


   Bruno Mongazon-Cazavet
   Alcatel-Lucent Bell Labs

   Email: Bruno.Mongazon-Cazavet@alcatel-lucent.com



















Melia & Mongazon-Cazavet  Expires January 6, 2010              [Page 16]


