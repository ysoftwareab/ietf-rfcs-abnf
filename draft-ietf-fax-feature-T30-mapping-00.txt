

Fax working group                                       Lloyd McIntyre
INTERNET-DRAFT                                       Xerox Corporation
Category: Work-in-progress                                Graham Klyne
                                            5GM/Content Technology Ltd
                                                        September 1998
                                                   Expires: March 1999


                  Internet fax T.30 Feature Mapping
             <draft-ietf-fax-feature-T30-mapping-00.txt>


Status of this memo

  This document is an Internet-Draft.  Internet-Drafts are working
  documents of the Internet Engineering Task Force (IETF), its areas,
  and its working groups.  Note that other groups may also distribute
  working documents as Internet-Drafts.

  Internet-Drafts are draft documents valid for a maximum of six
  months and may be updated, replaced, or obsoleted by other
  documents at any time.  It is inappropriate to use Internet-Drafts
  as reference material or to cite them other than as ``work in
  progress''.

  To view the entire list of current Internet-Drafts, please check
  the "1id-abstracts.txt" listing contained in the Internet-Drafts
  Shadow Directories on ftp.is.co.za (Africa), ftp.nordu.net
  (Northern Europe), ftp.nis.garr.it (Southern Europe), munnari.oz.au
  (Pacific Rim), ftp.ietf.org (US East Coast), or ftp.isi.edu (US
  West Coast).

  [[INTENDED STATUS: This memo provides information for the Internet
  community.  It does not specify an Internet standard of any kind.
  Distribution of this memo is unlimited.]]

Copyright Notice

  Copyright (C) The Internet Society 1998.  All Rights Reserved.

Abstract

  This document describes how to map Group 3 fax capability
  identification bits, described in ITU-T.30 [6], into the Internet
  fax feature schema described in "Content feature schema for
  Internet fax" [4].

  This is a companion to the fax feature schema document [4], which
  itself defines a profile of the media feature registration
  mechanisms [1,2,3], for use in performing capability identification
  between extended Internet fax systems [5].


McIntyre/Klyne             Work-in-progress                   [Page 1]

RFC nnnn          Internet fax T.30 Feature Mapping     September 1998


Table of contents

  1. Introduction ............................................3
     1.1 Organization of this document                        3
     1.2 Terminology and document conventions                 3
     1.3 Revision history                                     4
     1.4 Unfinished business                                  4
  2. Combining feature tags ..................................4
     2.1 Relationship to Group 3 fax                          4
     2.2 Feature set descriptions                             5
     2.3 Examples                                             5
       2.3.1 Data resource example                            5
       2.3.2 Recipient capabilities example                   6
  3. Survey of media-related T.30 capability bits ............6
     3.1 DIS/DTC bit 15 (resolution)                          6
     3.2 DIS/DTC bit 16 (MR coding)                           6
     3.3 DIS/DTC bits 17,18 (width)                           7
     3.4 DIS/DTC bits 19,20 (length)                          7
     3.5 DIS/DTC bit 31 (MMR coding)                          7
     3.6 DIS/DTC bit 36 (JBIG multi-level coding)             7
     3.7 DIS/DTC bit 37 (plane interleave)                    7
     3.8 DIS/DTC bits 41,42,43 (resolution)                   8
     3.9 DIS/DTC bits 44,45 (preferred units)                 8
     3.10 DIS/DTC bit 68 (JPEG)                               9
     3.11 DIS/DTC bit 69 (colour)                             9
     3.12 DIS/DTC bit 71 (bits/pixel)                         9
     3.13 DIS/DTC bit 73 (no subsampling)                     9
     3.14 DIS/DTC bit 74 (custom illuminant)                  9
     3.15 DIS/DTC bit 75 (custom gamut)                       10
     3.16 DIS/DTC bits 76,77 (paper size)                     10
     3.17 DIS/DTC bits 78,79 (JBIG bi-level coding)           10
     3.18 DIS/DTC bit 92,93,94 (MRC level)                    10
     3.19 DIS/DTC bit 95 (MRC strip size)                     11
     3.20 DIS/DTC bit 97 (resolution)                         11
     3.21 DIS/DTC bit 98 (resolution)                         11
  4. Summary of T.30 capability dependencies .................11
     4.1 Image coding                                         11
       4.1.1 Bi-level coding                                  12
       4.1.2 Multi-level coding                               12
       4.1.3 MRC coding                                       13
     4.2 Resolution and units                                 13
     4.3 Colour capabilities                                  15
     4.4 Document size                                        15
  5. Mapping T.30 capabilities to fax feature schema .........16
  6. Example .................................................16
  7. Security considerations .................................16
  8. Full copyright statement ................................16
  9. Acknowledgements ........................................17
  10. References .............................................17
  11. Authors' addresses .....................................18



McIntyre/Klyne             Work-in-progress                   [Page 2]

RFC nnnn          Internet fax T.30 Feature Mapping     September 1998


1. Introduction

  This document describes how to map Group 3 fax capability
  identification bits, described in ITU-T.30 [6], into the Internet
  fax feature schema described in "Content feature schema for
  Internet fax" [4].

  This is a companion to the fax feature schema document [4], which
  itself defines a profile of the media feature registration
  mechanisms [1,2,3], for use in performing capability identification
  between extended Internet fax systems [5].

1.1 Organization of this document

  Section 2 introduces the mechanisms that combine feature tag
  constraints to describe complex recipient capabilities.

  Section 3 surveys Group 3 fax (T.30) capability bits that relate to
  media handling capabilities, and indicates corresponding feature
  tags used to describe equivalent capabilities of an eifax system.

  Setion 4 describes the dependencies between Group 3 fax (T.30)
  capability bits.  These are presented in a decision table format
  [16] with descriptive text in place of the action bodies.

  Section 5 describes a formal mechanism for converting Group 3 fax
  (T.30) capability masks to fax feature schema statements.  The
  conversion process is driven by the decision tables introduced
  previously, using fax feature feature schema statements and
  combining rules in the action bodies.

  Section 6 presents a fairly complex example of a Group 3 fax (T.30)
  capability mask, and uses the formal mechanism described previously
  to convert that into a corresponding fax feature schema statement.

1.2 Terminology and document conventions

  eifax system
            is used to describe any software, device or combination
            of these that conforms to the specification "Extended
            Facsimile Using Internet Mail" [5].

  Feature   is used as defined in [15].  (See also section 2 of this
            memo.)

  Feature tag
            is used as defined in [15].  (See also section 2.)

  Feature collection
            is used as defined in [2].  (See also section 2.)



McIntyre/Klyne             Work-in-progress                   [Page 3]

RFC nnnn          Internet fax T.30 Feature Mapping     September 1998


  Feature set
            is used as defined in [2].  (See also section 2.)

1.3 Revision history

  00a  29-Sep-1998  Initial draft.

1.4 Unfinished business

  .  Section 5: T.30 to fax schema conversion

  .  Section 6: example

  .  Update references when available:
     Complete G3fax references

2. Combining feature tags

  A fax document can be described by media features.  Any single
  media feature value can be thought of as just one component of a
  feature collection that describes some instance of a document (e.g.
  a printed fax, a displayed image, etc.).  Such a feature collection
  consists of a number of media feature tags (each per [1]) and
  associated feature values.

  A feature set contains a number of feature collections.  Thus, a
  feature set can describe a number of different fax document
  instances.  These can correspond to different treatments of a
  single document (e.g. different resolutions used for printing a
  given fax), a number of different documents subjected to a common
  treatment (e.g. the range of different images that can be rendered
  on a given display), or some combination of these (see examples
  below).

  Thus, a description of a feature set can describe the rendering
  requirements of a fax document or the capabilities of a receiving
  eifax system.

2.1 Relationship to Group 3 fax

  A "feature tag" can be compared with a single bit in a T.30 DCS
  frame, describing a specific attribute of a specific fax document.

  A "feature collection" corresponds to a complete T.30 DCS frame,
  describing a range of attributes of a specific fax document.

  A "feature set" corresponds to a DIS or DTC frame, describing the
  range of document attributes that can be accepted by a given fax
  machine.




McIntyre/Klyne             Work-in-progress                   [Page 4]

RFC nnnn          Internet fax T.30 Feature Mapping     September 1998


  Within T.30 DIS/DTC frames, dependencies between the various
  capabilities are implicit in the definitions of the capabilities.
  E.g. multi-level coding (DIS/DTC bit 68) requires support for
  200*200dpi resolution (DIS/DTC bit 15).  In the feature set
  description framework used by eifax systems [1,2,3,4] such
  dependencies between different features are expressed explicitly.
  Later sections of this memo describe how the implicit dependencies
  of T.30 are expressed using the media feature set notation.

2.2 Feature set descriptions

  The general approach to describing feature sets, described more
  fully in [2], is use functions ("predicates") that, when applied to
  a feature collection value, yield a Boolean value that is TRUE if
  the feature collection describes an acceptable fax document
  instance, otherwise FALSE.

                     P(F)
       P(F) = TRUE <- : -> P(F) = FALSE
                      :
           +----------:----------+  This box represents some
           |          :          |  universe of fax documents (F)
           | Included : Excluded |  from which some acceptable subset
           |          :          |  is selected by the predicate P.
           +----------:----------+
                      :

2.3 Examples

  In the examples below the following notation is used:

     (x ? y)             tests feature tag 'x' for some relationship
                         with value 'y'.

     (| p1 p2 ... pn )   represents the logical-OR of predicates 'p1',
                         'p2' up to 'pn'.

     (& p1 p2 ... pn )   represents the logical-AND of predicates
                         'p1', 'p2' up to 'pn'.

2.3.1 Data resource example

  The following expression uses the syntax of [x] to describe a data
  resource that can be displayed either:
  (a)  as a 750x500 pixel image using 15 colours, or
  (b)  at 150dpi on an A4 page.

     (| (& (pix-x=750) (pix-y=500) (color=15) )
        (& (dpi>=150) (papersize=iso-A4) ) )




McIntyre/Klyne             Work-in-progress                   [Page 5]

RFC nnnn          Internet fax T.30 Feature Mapping     September 1998


2.3.2 Recipient capabilities example

  The following expression describes a receiving system that has:
  (a)  a screen capable of displaying 640*480 pixels and 16 million
       colours (24 bits per pixel), 800*600 pixels and 64 thousand
       colours (16 bits per pixel) or 1024*768 pixels and 256 colours
       (8 bits per pixel), or
  (b)  a printer capable of rendering 300dpi on A4 paper.

     (| (& (| (& (pix-x<=640)  (pix-y<=480) (color<=16777216) )
              (& (pix-x<=800)  (pix-y<=600) (color<=65535) )
              (& (pix-x<=1024) (pix-y<=768) (color<=256) ) )
           (media=screen) )
        (& (dpi=300)
           (media=stationery) (papersize=iso-A4) ) )

3. Survey of media-related T.30 capability bits

  The following sections refer to T.30 DIS/DTC bits identified and
  described in Table 2/T.30 and accompanying notes.  Bit numbers that
  are not referenced below are considered to be not related to media
  features, hence not relevant to the Internet fax feature schema.

       NOTE: some of the DIS/DTC bits identified below are
       documented in revisions of the T.30 specification that
       are not yet publicly available from the ITU.

3.1 DIS/DTC bit 15 (resolution)

  All Group 3 fax systems are required to support a basic resolution
  of 200*100dpi (dots per inch) or 8*3.85dpmm (dots per millimetre).

  Setting this bit indicates additional support for 200*200dpi or
  8*7.7dpmm.

  See also: bits 44,45.

3.2 DIS/DTC bit 16 (MR coding)

  All Group 3 fax systems are required to support Modified Huffman
  (MH) 1-dimensional coding for bi-level images.  (A bi-level image
  is one with just two pixel states such as black and white, as
  opposed to a grey-scale or colour image.)

  Setting this bit indicates additional support for Modified Read
  (MR) 2-dimensional coding for bi-level images.

  Both MH and MR coding are described in ITU T.4 [7].

  See also: bits 31,78,79.



McIntyre/Klyne             Work-in-progress                   [Page 6]

RFC nnnn          Internet fax T.30 Feature Mapping     September 1998


3.3 DIS/DTC bits 17,18 (width)

  All Group 3 fax systems are required to support 215mm paper width.
  These bits can be set to indicate additional support for 255mm and
  303mm paper widths.

  See also: bits 76,77.

3.4 DIS/DTC bits 19,20 (length)

  All Group 3 fax systems are required to support 297mm paper length.
  These bits can be set to indicate additional support for 364mm and
  unlimited paper lengths.

  See also: bits 76,77.

3.5 DIS/DTC bit 31 (MMR coding)

  Setting this bit indicates support for Modified Read (MR) 2-
  dimensional coding for bi-level images, in addition to the required
  support for MH coding.

  MMR coding is described in ITU T.6 [8].

  See also: bits 6,78,79.

3.6 DIS/DTC bit 36 (JBIG multi-level coding)

  Setting this bit indicates support for JBIG lossless coding for
  multi-level images.

  JBIG coding for multi-level images is described in ITU T.43 [10].

  See also: bits 68,69.

3.7 DIS/DTC bit 37 (plane interleave)

  Setting this bit indicates support for plane interleave for JBIG-
  coded multi-level images, in addition to stripe interleave coding.

  JBIG coding for multi-level images is described in ITU T.43 [10].

  [[[Is this reference appropriate?]]]

  See also: bit 36.








McIntyre/Klyne             Work-in-progress                   [Page 7]

RFC nnnn          Internet fax T.30 Feature Mapping     September 1998


3.8 DIS/DTC bits 41,42,43 (resolution)

  Setting these bits indicates support for resolutions in addition to
  100*200dpi and 200*200dpi, or 8*3.85dpmm and 8*7.7dpmm.

  Bit 41 indicates support for 8*15.4dpmm bi-level images
  (independently of the settings of bits 44 and 45).

  Bit 42 indicates support for 300*300dpi bi-level images
  (independently of the settings of bits 44 and 45).

       [[[Also applies to multi-level images or MRC mask if bit
       97 is set???]]]

  Bit 43 indicates support for 400*400dpi and/or 16*15.4dpmm bi-level
  images, depending uppon the settings of bits 44 and 45.

       [[[Also applies to multi-level images or MRC mask if bit
       97 is set???]]]

  See also: bits 44,45,97.

3.9 DIS/DTC bits 44,45 (preferred units)

  These bits are used to indicate the preferred resolution units for
  received images.  Because the exact resolution and x/y pixel
  density measures in dpi or dpmm are slightly different, some image
  size and aspect ratio distortion may occur if the sender and
  receiver use different units.

  Even when sender and recipient have different preferred units,
  image transfer must be accomplished.  For most fax uses, the dpi
  and dpmm measurements are sufficiently close to each other that the
  difference is not noticed.

  The preferred units setting affects the interpretation of the
  following resolutions:

               dpi       dpmm
               ---       ----
     Base      200*100   8*3.85
     Bit 15    200*200   8*7.7
     Bit 43    400*400   16*15.4

  See also: bits 15, 43








McIntyre/Klyne             Work-in-progress                   [Page 8]

RFC nnnn          Internet fax T.30 Feature Mapping     September 1998


3.10 DIS/DTC bit 68 (JPEG)

  This bit indicates support for JPEG coding of multi-level images.

  JPEG coding for multi-level images is described in ITU T.81 [12].

  See also: bits 15,36,69,73

3.11 DIS/DTC bit 69 (colour)

  This bit indicates support for multi-level colour images, as
  opposed to just grey-scale.

  See also: bits 36,68,73.

3.12 DIS/DTC bit 71 (bits/pixel)

  Standard support for multi-level images uses 8 bits per pixel.
  Setting this bit indicates additional support for 12 bits per
  pixel.

  See also: bit 68.

3.13 DIS/DTC bit 73 (no subsampling)

  Standard support for multi-level images uses 4:1:1 chrominance
  subsampling.  That is, for each 4 luminance samples in the image
  description there is a single chrominance sample.

  Setting this bit indicates that colour images without subsampling
  can also be supported.

  See also: bits 36,68,69.

3.14 DIS/DTC bit 74 (custom illuminant)

  Setting this bit indicates that a custom illuminant can be
  supported for multi-level images.

  [[[Including grey-scale?]]]

  Use of a custom illuminant with multi-level images is described in
  ITU T.42 [9].

  See also: bit 68.








McIntyre/Klyne             Work-in-progress                   [Page 9]

RFC nnnn          Internet fax T.30 Feature Mapping     September 1998


3.15 DIS/DTC bit 75 (custom gamut)

  Setting this bit indicates that a custom gamut can be supported for
  multi-level images.

  [[[Including grey-scale?]]]

  Use of a custom gamut with multi-level images is described in ITU
  T.42 [9].

  See also: bit 68.

3.16 DIS/DTC bits 76,77 (paper size)

  All Group 3 faxes are required to support A4 paper size.  These
  bits can be set to indicate additional support for North American
  letter and legal paper sizes.

  See also: bits 17,18,19,20.

3.17 DIS/DTC bits 78,79 (JBIG bi-level coding)

  Setting bit 78 indicates support for JBIG coding of bi-level
  images, in addition to the required support for MH coding.

  Setting bits 78 and 79 indicates additional support for using
  optional 'LO' with JBIG coded bi-level images.  Basic bi-level JBIG
  coding uses 128 lines per stripe;  the 'LO' option allows other
  values to be used.

  JBIG coding of bi-level images is described in ITU-T.85 [14].

  See also: bits 16,31.

3.18 DIS/DTC bit 92,93,94 (MRC level)

  If these bits are all zero, then Mixed Raster Content (MRC) coding
  is not supported.  Otherwise, they represent a number in the range
  1-7 that indicates an MRC capability level.

  MRC coding of images is described in ITU-T.44 [11].

  See also: bit 95.










McIntyre/Klyne             Work-in-progress                  [Page 10]

RFC nnnn          Internet fax T.30 Feature Mapping     September 1998


3.19 DIS/DTC bit 95 (MRC strip size)

  If bits 92-94 inducate an MRC coding capability, then this bit
  indicates the maximum strip size.  If zero, the maximum strip size
  is 256 lines, otherwise the maximum strip size is a full page.

  MRC coding of images is described in ITU-T.44 [11].

  See also: bits 92,93,94.

3.20 DIS/DTC bit 97 (resolution)

  Setting this bit indicates that the additional resolutions
  indicated by bits 42 and 43 may be used for multi-level images and
  any MRC mask layer.

  See also: bits 42,43,68.

3.21 DIS/DTC bit 98 (resolution)

  Setting this bit indicates that the additional resolution
  100*100dpi may be used for multi-level images and any MRC mask
  layer.

  See also: bit 68.

4. Summary of T.30 capability dependencies

  This section contains a number of decision tables that indicate the
  allowable combinations of T.30 DIS/DTC mask bits.

  Within the decision table bodies, the following symbols are use to
  indicate values of T.30 DIS/DTC bits:

     0  = bit set to '0'
     1  = bit set to '1'
     x  = don't care bit value: may be '0' or '1'
     *0 = bit must be '0' ('1' is invalid in given combination)
     *1 = bit must be '1' ('0' is invalid in given combination)
     #  = bits in row combined to form a numeric value

4.1 Image coding

  MH coding is required as a minimum for Group 3 fax operation.









McIntyre/Klyne             Work-in-progress                  [Page 11]

RFC nnnn          Internet fax T.30 Feature Mapping     September 1998


4.1.1 Bi-level coding

<------- T.30 bits --------->
15|16|31|36|37|68|69|73|78|79||Description
--+--+--+--+--+--+--+--+--+--++---------------------------------------
 x| 0| 0|  |  |  |  |  | 0| 0||Compression = [MH]
 x| 1| 0|  |  |  |  |  | 0| 0||Compression = [MH,MR]
 x| 0| 1|  |  |  |  |  | 0| 0||Compression = [MH,MMR]
 x| 1| 1|  |  |  |  |  | 0| 0||Compression = [MH,MR,MMR]
 x| 0| 0|  |  |  |  |  | 1| 0||Compression = [MH,T.85]
 x| 1| 0|  |  |  |  |  | 1| 0||Compression = [MH,MR,T.85]
 x| 0| 1|  |  |  |  |  | 1| 0||Compression = [MH,MMR,T.85]
 x| 1| 1|  |  |  |  |  | 1| 0||Compression = [MH,MR,MMR,T.85]
 x| 0| 0|  |  |  |  |  |*1| 1||Compression = [MH,T.85,T.85LO]
 x| 1| 0|  |  |  |  |  |*1| 1||Compression = [MH,MR,T.85,T.85LO]
 x| 0| 1|  |  |  |  |  |*1| 1||Compression = [MH,MMR,T.85,T.85LO]
 x| 1| 1|  |  |  |  |  |*1| 1||Compression = [MH,MR,MMR,T.85,T.85LO]
  |  |  |  |  |  |  |  |  |  ||MH     = 1-D per T.4
  |  |  |  |  |  |  |  |  |  ||MR     = 2-D per T.4
  |  |  |  |  |  |  |  |  |  ||MMR    = 2-D per T.6
  |  |  |  |  |  |  |  |  |  ||T.85   = Basic JBIG per T.85
  |  |  |  |  |  |  |  |  |  ||T.85LO = Optional LO with T.85/JBIG
--+--+--+--+--+--+--+--+--+--++---------------------------------------

4.1.2 Multi-level coding

  Note: When 37, 69, 73, 79 and 95 are set to "1", the feature
  represented by "0" is also available.  Example: If plane interleave
  is available then stripe interleave is also available.

<------- T.30 bits --------->
15|16|31|36|37|68|69|73|78|79||Description
--+--+--+--+--+--+--+--+--+--++---------------------------------------
 x|  |  |*0| x| 0| x| x|  |  ||No grey or colour (no T.43 or JPEG)
*1|  |  | 0| x| 1| 0| x|  |  ||JPEG, grey scale only
*1|  |  | 0| x| 1| 1| 0|  |  ||JPEG, full colour, subsampling
*1|  |  | 0| x| 1| 1| 1|  |  ||JPEG, full colour, no subsampling
*1|  |  | 1| 0| 1| 0| x|  |  ||T.43, JPEG, grey only, stripe i/l
*1|  |  | 1| 1| 1| 0| x|  |  ||T.43, JPEG, grey only, plane i/l
*1|  |  | 1| 0| 1| 1| 0|  |  ||T.43, JPEG, colour, stripe i/l, s/s
*1|  |  | 1| 0| 1| 1| 1|  |  ||T.43, JPEG, colour, stripe i/l, no s/s
*1|  |  | 1| 1| 1| 1| 0|  |  ||T.43, JPEG, colour, plane i/l, s/s
*1|  |  | 1| 1| 1| 1| 1|  |  ||T.43, JPEG, colour, plane i/l, no s/s
  |  |  |  |  |  |  |  |  |  ||'s/s'    is 4:1:1 L*:a*:b* subsampling
  |  |  |  |  |  |  |  |  |  ||'No s/s' is 1:1:1 L*:a*:b* subsampling
  |  |  |  |  |  |  |  |  |  ||'stripe i/l' is stripe interleave
  |  |  |  |  |  |  |  |  |  ||'plane i/l'  is full-plane interleave
--+--+--+--+--+--+--+--+--+--++---------------------------------------





McIntyre/Klyne             Work-in-progress                  [Page 12]

RFC nnnn          Internet fax T.30 Feature Mapping     September 1998


4.1.3 MRC coding

  Multi-level coders, as indicated above, are used within an MRC-
  coded image.

<---- T.30 bits ------>
15|92|93|94|95|  |  |  ||Description
--+--+--+--+--+--+--+--++---------------------------------------
 x| 0| 0| 0| x|  |  |  ||MRC not accepted
*1| #| #| #| 0|  |  |  ||MRC level, max strip 256 lines
*1| #| #| #| 1|  |  |  ||MRC level, max strip full page
  |  |  |  |  |  |  |  ||### is MRC performance level (1-7, per T.44)
--+--+--+--+--+--+--+--++---------------------------------------

4.2 Resolution and units

  Support for bi-level coding at least one of 200*100dpi or
  8*3.85dpmm is required in all cases for Group 3 fax conformance.
  For multi-level coders (colour/grey) the base resolution is
  200*200dpi (i.e. bit 15 must be set).

  When multi-level coders (JPEG or T.43) are used, only inch-based
  square resolutions are available.  However, the base non-square
  resolution (i.e. 200x100dpi or 8x3.85dpmm) must still be available
  as a capability for use with the mandatory bi-level coder (MH).
  Hence, any references to metric and non-square resolutions in the
  table below apply only to bi-level coders.

  In the following table:
     dpi  = dots per inch
     dpmm = dots per millimetre






















McIntyre/Klyne             Work-in-progress                  [Page 13]

RFC nnnn          Internet fax T.30 Feature Mapping     September 1998


<------- T.30 bits ------>
15|41|42|43|44|45|68|97|98||Description
--+--+--+--+--+--+--+--+--++-----------------------------------------
 0|  |  | 0| x| x|  |  |  ||Resolution = base only
  |  |  |  |  |  |  |  |  ||
 1|  |  | 0| 0| 0|  |  |  ||Invalid
 1|  |  | 0| 0| 1|  |  |  ||Resolution = 8*3.85dpmm or 8*7.7dpmm
 1|  |  | 0| 1| 0|  |  |  ||Resolution = 200*100dpi or 200*200dpi
 1|  |  | 0| 1| 1|  |  |  ||Resolution = 8*3.85dpmm or 8*7.7dpmm
  |  |  |  |  |  |  |  |  ||        or   200*100dpi or 200*200dpi
  |  |  |  |  |  |  |  |  ||
 0|  |  | 1| 0| 0|  |  |  ||Invalid
 0|  |  | 1| 0| 1|  |  |  ||Resolution = 8*3.85dpmm or 16*15.4dpmm
 0|  |  | 1| 1| 0|  |  |  ||Resolution = 200*100dpi or 400*400dpi
 0|  |  | 1| 1| 1|  |  |  ||Resolution = 8*3.85dpmm or 16*15.4dpmm
  |  |  |  |  |  |  |  |  ||        or   200*100dpi or 400*400dpi
  |  |  |  |  |  |  |  |  ||
 1|  |  | 1| 0| 0|  |  |  ||Invalid
 1|  |  | 1| 0| 1|  |  |  ||Resolution = 8*3.85dpmm or 8*7.7dpmm
  |  |  |  |  |  |  |  |  ||        or   16*15.4dpmm
 1|  |  | 1| 1| 0|  |  |  ||Resolution = 200*100dpi or 200*200dpi
  |  |  |  |  |  |  |  |  ||        or   400*400dpi
 1|  |  | 1| 1| 1|  |  |  ||Resolution = 8*7.7dpmm  or 8*7.7dpmm
  |  |  |  |  |  |  |  |  ||        or   16*15.4dpmm
  |  |  |  |  |  |  |  |  ||        or   200*100dpi or 200*200dpi
  |  |  |  |  |  |  |  |  ||        or   400*400dpi
--+--+--+--+--+--+--+--+--++-----------------------------------------
  | 0|  |  |  |  |  |  |  ||Resolutions as above
  | 1|  |  | x| x|  |  |  ||Also supports 8*15.4dpmm (bi-level only)
  |  |  |  |  |  |  |  |  ||Independent of bits 44,45
--+--+--+--+--+--+--+--+--++-----------------------------------------
  |  | 0|  |  |  |  |  |  ||Resolutions as above
  |  | 1|  | x| x|  |  |  ||Also supports 300*300dpi
  |  |  |  |  |  |  |  |  ||Independent of bits 44,45
--+--+--+--+--+--+--+--+--++-----------------------------------------
  |  |  |  |  |  | x| 0|  ||Resolutions as above
  |  |  |  |  |  |*1| 1|  ||Also 300*300dpi or 400*400dpi (see below)
  |  |  |  |  |  |  |  |  ||(Applies colour, grey-scale or MRC mask)
  |  |  |  |  |  |  |  |  ||(Valid only when bit 42 or 43 is set.)
  |  |  |  |  |  |  |  |  ||(42 => 300dpi, 43=>400dpi)
--+--+--+--+--+--+--+--+--++-----------------------------------------
  |  |  |  |  |  | x|  | 0||Resolutions as above
  |  |  |  | x| x|*1|  | 1||Also 100*100dpi
  |  |  |  |  |  |  |  |  ||(Applies colour, grey-scale or MRC only)
  |  |  |  |  |  |  |  |  ||Independent of bits 44,45
--+--+--+--+--+--+--+--+--++-----------------------------------------







McIntyre/Klyne             Work-in-progress                  [Page 14]

RFC nnnn          Internet fax T.30 Feature Mapping     September 1998


4.3 Colour capabilities

  Bit 68 (JPEG) is required for any colour/grey scale mode, and bit
  36 indicates additional T.43 capability.

<------- T.30 bits --->
36|68|69|71|74|75|  |  ||Description
--+--+--+--+--+--+--+--++-----------------------------------------
 0| 0| x| x| x| x|  |  ||No grey scale or colour
 x| 1| 0|  |  |  |  |  ||Grey scale only
 0| 1| 1|  |  |  |  |  ||Full colour capability (CIE L*a*b*)
 1| 1| 1|  |  |  |  |  ||Full colour capability:
  |  |  |  |  |  |  |  || (CIE L*a*b*, palette, RGB 1 bit/colour
  |  |  |  |  |  |  |  ||  and CMY(K)1 bit/colour)
--+--+--+--+--+--+--+--++-----------------------------------------
 x| 1|  | 0|  |  |  |  ||8 bits/pixel
 x| 1|  | 1|  |  |  |  ||8 or 12 bits/pixel
--+--+--+--+--+--+--+--++-----------------------------------------
 x| 1|  |  | 0|  |  |  ||CIE standard illuminant D50 (per T.42)
 x| 1|  |  | 1|  |  |  ||Custom illuminants (definition provided)
--+--+--+--+--+--+--+--++-----------------------------------------
 x| 1|  |  |  | 0|  |  ||Default gamut (per T.42)
 x| 1|  |  |  | 1|  |  ||Custom gamuts (definition provided)
--+--+--+--+--+--+--+--++-----------------------------------------

4.4 Document size

  A4 width (215mm) is required as a minimum for Group 3 fax
  conformance.  A Group 3 fax machine must always be able to receive
  an A4 image.

<---- T.30 bits ------>
17|18|19|20|76|77|  |  ||Description (later to be media features)
--+--+--+--+--+--+--+--++-----------------------------------------
 0| 0|  |  |  |  |  |  ||Width = 215mm
 1| 0|  |  |  |  |  |  ||Width = 215mm or 255mm
 0| 1|  |  |  |  |  |  ||Width = 215mm, 255mm or 303mm
 1| 1|  |  |  |  |  |  ||Invalid - interpret as (17=0,18=1)
  |  |  |  |  |  |  |  ||(measurements described as scan line length)
  |  |  |  |  |  |  |  ||(corresp. inch measurements: T.4 sect 2.2)
--+--+--+--+--+--+--+--++-----------------------------------------
  |  | 0| 0|  |  |  |  ||Length = 297mm (A4)
  |  | 1| 0|  |  |  |  ||Length = 297mm (A4) or 364mm (B4)
  |  | 0| 1|  |  |  |  ||Length = unlimited
  |  | 1| 1|  |  |  |  ||Invalid
--+--+--+--+--+--+--+--++-----------------------------------------
  |  |  |  | 0| 0|  |  ||Papersize = A4
  |  |  |  | 1| 0|  |  ||Papersize = A4 or NA-Letter
  |  |  |  | 0| 1|  |  ||Papersize = A4 or NA-Legal
  |  |  |  | 1| 1|  |  ||Papersize = A4 or NA-Letter or NA-Legal
--+--+--+--+--+--+--+--++-----------------------------------------


McIntyre/Klyne             Work-in-progress                  [Page 15]

RFC nnnn          Internet fax T.30 Feature Mapping     September 1998


5. Mapping T.30 capabilities to fax feature schema

  [[[This would be a more formal treatment of the material in section
  4, describing how to map various combinations of T.30 bits into the
  fax feature schema using a number of decision tables containing fax
  feature schema statements, and some formal combining rules using
  the conneg -algebra- format.]]]



6. Example

  [[[I am proposing a single example that starts with a fairly
  complex T.30 capability mask, and maps that into the corresponding
  fax-schema feature set expression]]]





7. Security considerations

  Security considerations are discussed in the fax feature schema
  description [4].  This memo is not believed to introduce any
  additional security concerns.

8. Full copyright statement

  Copyright (C) The Internet Society 1998.  All Rights Reserved.

  This document and translations of it may be copied and furnished to
  others, and derivative works that comment on or otherwise explain
  it or assist in its implementation may be prepared, copied,
  published and distributed, in whole or in part, without restriction
  of any kind, provided that the above copyright notice and this
  paragraph are included on all such copies and derivative works.
  However, this document itself may not be modified in any way, such
  as by removing the copyright notice or references to the Internet
  Society or other Internet organizations, except as needed for the
  purpose of developing Internet standards in which case the
  procedures for copyrights defined in the Internet Standards process
  must be followed, or as required to translate it into languages
  other than English.

  The limited permissions granted above are perpetual and will not be
  revoked by the Internet Society or its successors or assigns.







McIntyre/Klyne             Work-in-progress                  [Page 16]

RFC nnnn          Internet fax T.30 Feature Mapping     September 1998


  This document and the information contained herein is provided on
  an "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET
  ENGINEERING TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF
  THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
  WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

9. Acknowledgements

  The authors gratefully ackowledge the following persons who made
  comments on earlier versions of this memo:  Mr. Hiroshi Tamura,
  [[...]].

10. References

[1]  "Media Feature Tag Registration Procedure"
     Koen Holtman, TUE
     Andrew Mutz, Hewlett-Packard
     Ted Hardie, NASA
     Internet draft: <draft-ietf-conneg-feature-reg-03.txt>
     Work in progress, July 1998.

[2]  "A syntax for describing media feature sets"
     Graham Klyne, 5GM/Content Technologies
     Internet draft: <draft-ietf-conneg-feature-syntax-00.txt>"
     Work in progress, September 1998.

[3]  "Media Features for Display, Print, and Fax"
     Larry Masinter, Xerox PARC
     Koen Holtman, TUE
     Andrew Mutz, Hewlett-Packard
     Dan Wing, Cisco Systems
     Internet draft: <draft-ietf-conneg-media-features-02.txt>
     Work in progress, September 1998.

[4]  "Content feature schema for Internet fax"
     Lloyd McIntyre, Xerox Corporation
     Graham Klyne, 5GM/Content Technologies
     Internet draft: <draft-ietf-fax-feature-schema-00.txt>
     Work in progress, August 1998.

[5]  "Extended Facsimile Using Internet Mail
     Larry Masinter, Xerox Corporation
     Dan Wing, Cisco Systems
     Internet draft: <draft-ietf-fax-eifax-04.txt>
     Work in progress, September 1998.







McIntyre/Klyne             Work-in-progress                  [Page 17]

RFC nnnn          Internet fax T.30 Feature Mapping     September 1998


[6]  "Procedures for document facsimile transmission in the general
     switched telephone network"
     ITU-T Recommendation T.30
     International Telecommunications Union
     July 1996

[7]  T.4 (basic fax coding formats: MH, MR)

[8]  T.6 (extended 2-D fax coding format: MMR)

[9]  T.42 (custom illuminant, gamut)

[10] T.43 (JBIG for colour/grey)

[11] T.44 (MRC)

[12] T.81 (JPEG)

[13] T.82 (JBIG?????????)

[14] T.85 (bi-level JBIG)

[15] "Requirements for protocol-independent content negotiation"
     G. Klyne, Integralis Ltd.
     Internet draft: <draft-ietf-conneg-requirements-00.txt>
     Work in progress, March 1998.

[16] "Programs from Decision Tables"
     E. Humbey
     Macdonald/American Elsevier computer monographs (19), 1973
     ISBN 0-444-19569-6/0-356-04126-3

     (This is an old title, and may not be still in print.  It
     contains a number of references to decision table articles
     published in Communications of the ACM:  August 1967, September
     1970, January 1966, November 1966, October 1968, January 1965,
     February 1964, June 1970, November 1965, June 1965, February
     1971.)

11. Authors' addresses

  Lloyd McIntyre
  Xerox Corporation
  Mailstop PAHV-305
  3400 Hillview Ave.
  Palo Alto, CA 94304 USA
  Telephone: +1-650-813-6762
  Facsimile: +1-650-845-2340
  E-mail: Lloyd.McIntyre@pahv.xerox.com




McIntyre/Klyne             Work-in-progress                  [Page 18]

RFC nnnn          Internet fax T.30 Feature Mapping     September 1998


  Graham Klyne
  5th Generation Messaging Ltd.    Content Technologies Ltd.
  5 Watlington Street              Forum 1, Station Road
  Nettlebed                        Theale
  Henley-on-Thames, RG9 5AB        Reading, RG7 4RA
  United Kingdom                   United Kingdom.
  Telephone: +44 1491 641 641      +44 118 930 1300
  Facsimile: +44 1491 641 611      +44 118 930 1301
  E-mail: GK@ACM.ORG












































McIntyre/Klyne             Work-in-progress                  [Page 19]

