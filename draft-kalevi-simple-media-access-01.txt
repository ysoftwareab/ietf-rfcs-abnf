Network Working group                             K. Kilkki
<draft-kalevi-simple-media-access-01.txt>         Nokia Research Center
Internet-Draft                                    June 1997
Expire in 19 December 1997


Simple Integrated Media Access (SIMA)


Status of this Memo

This document is an Internet-Draft. Internet-Drafts are working
documents of the Internet Engineering Task Force (IETF), its areas, and
its working groups.  Note that other groups may also distribute working
documents as Internet-Drafts.

Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any
time. It is inappropriate to use Internet-Drafts as reference material
or to cite them other than as "work in progress."

To learn the current status of any Internet-Draft, please check the
"1id-abstracts.txt" listing contained in the Internet-Drafts Shadow
Directories on ftp.is.co.za (Africa), ftp.nordu.net (Europe),
munnari.oz.au (Pacific Rim), ds.internic.net (US East Coast),
orftp.isi.edu (US West Coast).

Distribution of this memo is unlimited.
Please send comments to kalevi.kilkki@research.nokia.com


Abstract

The basic objectives of future Internet are to increase the network
capacity, to offer a practical real-time service, and to develop a
feasible charging scheme. These objectives introduce very strict
requirements for the traffic control system. This document presents a
new simple approach for traffic management: Simple Integrated Media
Access (SIMA) service. According to the SIMA concept each customer shall
define only two issues before a connection establishment: a nominal bit
rate (NBR) and the selection between real-time and non-real-time service
classes. NBR has two purposes: it forms the basis of charging, and it
defines how the network capacity is divided among different connections
during overload situations. Simplicity means that, on the one hand, the
network operator does not guarantee the continuous availability of
nominal bit rate, and on the other hand, the user is allowed to send
data with any bit rate independently of the NBR. However, the bit rate
of transmission defines the cell loss probability in the case of network
congestion. In this way a simple, but effective, self-regulation of
traffic can be realized. The strength of SIMA lies in its wide area of
applications. There is no need to build complex systems with several
service classes each appropriate to only certain applications.


Kilkki                                                        [Page 1]

Internet-Draft     Simple Integrated Media Access            June 1997

Table of Contents

Abstract                                                           1
1. Introduction                                                    2
2. End-to-End Behavior                                             3
 2.1  Nominal Bit Rate                                             4
 2.2  Real-time and non-real-time services                         4
 2.3  Quality of the SIMA service                                  5
 2.4  SIMA service chain                                           7
3.  Motivation                                                     9
 3.1  Current services                                             9
 3.2  Service comparison                                          11
 3.3  Management comparison                                       13
 3.4  Performance comparison                                      15
4.  Network Element Data Handling Requirements                    15
 4.1 Access Node                                                  16
 4.2 Scheduling and buffering in core network                     17
5.  Invocation Information                                        18
6.  Exported Information                                          19
7.  Policing                                                      19
8.  Ordering and Merging                                          19
9.  Guidelines for Implementors                                    19
 9.1  Actual bit rate measurement                                 19
9.2  Implementation of scheduling algorithm                       21
9.3  ATM implementation                                           21
9.4  The location of priority bits                                22
10.  Evaluation Criteria                                           22
11.  Examples of Implementation                                    23
12.  Examples of Use                                               23
13.  Security Considerations                                       24
Author's address                                                  24
Expiration                                                        24


1. Introduction

The Internet is at a phase of great changes. There are several stringent
new requirements for the network because of two reasons: the invasion of
new users, and the rapid development of new applications. These
requirements mean that network capacity must rapidly be increased, real-
time service has to be fundamentally improved, and a feasible charging
scheme must be introduced.

The current Internet approach for meeting these requirements consists of
several service  specifications, Resource Reservation Protocol, QoS
routing, etc. We can make an interpretation on the basis of the service
specifications that the basic philosophy of Internet development is to
define different services for different basic communication needs. There
seems to be demand for three elementary services: first one for very



Kilkki                                                        [Page 2]

Internet-Draft     Simple Integrated Media Access            June 1997


reliable and high quality connections, second for connections with less
stringent quality requirements, and third one for data connections which
can smoothly adapt their bit rate. As the requirements of these
elementary classes differ significantly, an obvious approach is to have
different service specifications like the guaranteed service,
controlled-load service and best effort service specified in IETF drafts
(note that this approach has been used in the case of ATM as well).

The supposed advantage of this approach is that by dividing the service
specification task into several smaller parts the specifications process
is easier than if the all the service types were included in the one
specification. However, this advantage is somewhat questionable because
the whole service concept (with all the different service types) is what
the network operator should manage and sell to customers and what the
customer should buy and use. In particular, most Internet customers will
be reluctant to learn several complicated services which may even have
very different structures, traffic parameters, charging schemes, etc.
For real marketing purposes, the Internet service package must be
simple, much simpler than what the current service models directly make
possible. There are two main approaches to meet this requirement: to
hide the complexity of network service from the end-user or to design an
entirely new integrated service which is able to satisfy all the primary
customer needs. The approach used in this document belongs to the later
category.

2. End-to-End Behavior

The primary idea of the SIMA service is to maximize the exploitation of
network resources with a simple control scheme while keeping the ratios
of QoS levels offered to different flows unchanged under changeable
traffic conditions. The maximization is based on three key properties of
traffic control: all flows with different QoS requirements share the
total capacity of every link, the network attempts to avoid any
unnecessary packet discarding, and flow (or call) level blocking can be
avoided. The approximate constancy of QoS ratios and simplicity are
achieved by using 8 priority levels which make possible a fair packet
discarding scheme inside the network without keeping track on the
traffic of every flow.

The SIMA specification covers the whole Internet service including
charging, QoS and performance aspects, and traffic control functions in
the network. As opposed to most service specifications, charging is the
starting point of the SIMA concept. The prevalent charging scheme
applied by Internet operators is a flat rate one with a constant monthly
fee. Although this scheme is most reasonable when the network service is
based on the best-effort principle, many network operators may still be
willing to apply this scheme even with more complicated service models.
The SIMA service model is able to meet this demand.



Kilkki                                                        [Page 3]

Internet-Draft     Simple Integrated Media Access            June 1997


2.1 Nominal Bit Rate

Shortly, with the SIMA service scheme, first a customer pays for some
Nominal Bit Rate (NBR, kbit/s) and then he/she can trade the speed for
QoS. Let us assume that a user pays $X/month. This charge is translated
to a Nominal Bit Rate using an arbitrary function. The function NBR =
F(X) could be linear, but there is no reason to specify the relationship
between NBR and charging. If NBR is permanent, it can be related to an
interface (we may assume the same organization that owns the right to
use a network interface buys the NBR). The next level of NBR is the NBR
assigned to a user (or IP-address). The bottom level is the NBR of a
flow (determined for instance by a pair of IP address and port number).

Depending on the available information and the network capabilities,
there are three basic approaches to manage NBRs. The simplest approach
is to assign the NBR only to an interface, which means that the network
measures the whole traffic going through the interface and handles this
traffic as an indivisible entity. The users and flows that share the NBR
obtain approximately the same QoS. In the second approach each user
(identified by an IP address) has his/her own NBR. Now the network
measures the total traffic generated by a user, and different flows
compete with each other on a best-effort basis.

Both these approaches have the serious drawback that they do not
separate different applications properly: a high-speed file transfer may
disturb other flows, e.g., real time video connections, although the
user may consider the file transfer as a background process which uses
only the capacity left by other more demanding applications. Therefore,
as regards the performance and QoS of the SIMA service the most useful
approach is the one where every flow has its own NBR. Later in this
draft we suppose that the network is capable to identify and measure
every flow, and that every flow has its own NBR. The question how these
NBRs are determined and managed can be left for network operators, and
is, therefore, out of the scope of this draft.

2.2 Real-time and non-real-time services

The other part of the SIMA service concept is the possibility to request
a real-time service. The user is entitled to him/herself determine
whether the flow is a real-time (rt) or non-real-time (nrt) one. In
practice, this decision can be made usually at the application level: a
real-time service is usually requested only for interactive audio or
video applications. If a real-time service is requested, the SIMA
network attempts to offer as short delay and small delay variation as
possible. The expense of this choice is that, if there are traffic
variations of time scale from 0.1 ms to 10 ms, small real-time buffers
cannot filter these variations. Therefore, the measurement for the
priority determination shall be more sensible as regards the traffic



Kilkki                                                        [Page 4]

Internet-Draft     Simple Integrated Media Access            June 1997


variations in case of real-time service than with non-real-time service
(see illustration in Fig. 1).

If the user changes a VBR connection from nrt-service to rt-service
without changing NBR or traffic process, the delay will decrease, but
the cell loss ratio may increase because the real-time measurement gives
worse priorities during peak rates. If the user wants to obtain the same
quality, this impairment of loss ratio should be compensated by
increasing NBR. Real-time-service could, in this respect, be more
expensive than non-real-time service although there is no difference in
the tariffs.

In consequence, if the application is a real-time one, it is
advantageous for the user to select the real-time class, because it is
the only way to attain small delay and delay variation. Furthermore, if
the traffic variations are small enough, the user may always select a
real-time service, because there is no difference in cell loss ratio
between rt and nrt-services. In contrast, if there are significant
traffic variations as with typical data applications, the non-real-time
service gives better quality, that is, smaller packet loss ratio.


|                                * = actual bit rate               |
|                                o = real-time measured bit rate   |
|******o*o*o*o*                  x = nrt measured bit rate         |
|    oo                                                            |
|   o                                                              |
|  o                                                               |
| o            o                      ****o*o*o*o*o*o*o*o*o        |
|                                       oo                         |
|               o                      o                           |
|o         xxxxxxoxxxxxxx             o       xxxxxxxxxxxxxxxxx    |
|       xxx       oo     xxxxxxxxxxxxxxxxxxxxx             o   xxxx|
|    xxx       ******o*o*o*o*o*o*o*o*o                      oo     |
|  xx                                                      ***o*o*o|
|xx                                                                |
o-------------------------------------------------------------------

Fig. 1. The difference between actual bit rate, measured bit rate for a   
real-time flow and measured bit rate for a non-real-time flow.

2.3 Quality of the SIMA service

The total SIMA service requested by a user consists of a nominal bit
rate and of a possible real-time service request. This half of the
service is clear and reasonable. The other half of the service is the
expected QoS of the flow, or actually, the expected QoS of the
application that the customer uses over the SIMA network. An essential



Kilkki                                                        [Page 5]

Internet-Draft     Simple Integrated Media Access            June 1997


issue for the success of the SIMA service is how reasonable and
acceptable this part of the service concept will be.


Most customers have experience of circuit switched networks (like
telephone networks) and packet networks with best-effort service (like
the current Internet). In a circuit switched network a busy period means
that the call blocking probability increases, which means that the
quality perceived by some customers drop occasionally to zero. In packet
networks the packet loss ratio increases during busy periods, and
effectively, the available capacity for a flow decreases if a TCP/IP
type of protocol is used. In a SIMA environment, when a user buys a NBR
for a flow and then sends traffic into a SIMA network, there is usually
no flow level blocking (although it is possible to protect the SIMA
network from excessive overloads by restricting the total sum of NBRs).
The quality of the flow depends on two issues: the NBR to actual bit rat
ratio, and total load in the network.

Therefore, a potential difficulty with the SIMA service is that the
customer cannot precisely know what the QoS of a flow will be because
rapid traffic variations may bring about unexpected changes of QoS.
However, even in the case of services using resource reservation the
actual quality of flows using certain quality class may vary
significantly, because the quality can only be determined by using
statistical parameters. Furthermore, as the resource reservation
principle may result in flow level blocking, a high quality connection
cannot be guaranteed during overload situations.

Because the quality of existing flows is not in the same way predictable
as with services using a complicated resource reservation mechanism, the
SIMA network shall be implemented in a way that the users can rely on
the fairness of the service. The fairness of the SIMA service is based
on the fact that all flows with the same actual bit rate to NBR ratio
perceives similar QoS. Thus, a home user with 10 Kbit/s NBR receives the
same QoS as a large company with NBR of 100 Mbit/s provided that both
are transmitting at their own NBR. The SIMA service can offer this
fairness feature during a short interval. In contrast, during long
period, like a month, fairness is not as clear if flat rate scheme is
applied, because the amount of transferred information depends
essentially on total length of active periods, whereas the charging does
not depend on the activity of customer. This fairness problem common to
any service with flat-rate charging can be solved, if needed, by using a
time dependent charging scheme.

Another aspect of fairness is the possibility to obtain more quality
with higher price or lower price with less quality by changing the
actual bit rate or NBR. This means that each customer is entitled to
change the NBR to actual bit rate ratio (b) and by that means to



Kilkki                                                        [Page 6]

Internet-Draft     Simple Integrated Media Access            June 1997

optimize his/her quality to charge ratio. If the ratio increases, the
quality of the flow is enhanced. If the user sends traffic by using a
constant bit rate, the SIMA service offers 7 different quality levels
(for variable bit rate traffic the levels are more distinct but
basically the same). Although the absolute quality of each class depends
on the network dimensioning and on actual traffic process, the quality
levels can be described approximately as follows:


7 = reserved for non-SIMA services with resource reservation
6 = excellent quality: negligible packet loss ratio
5 = high quality: packet losses only during exceptional traffic peaks
4 = good quality: small packet loss ratio even during busy hour
3 = moderate quality: usually small packet loss ratio except during busy
    hours
2 = satisfactory quality: from time to time very high packet loss ratio
1 = suitable for best-effort traffic during busy hour
0 = unusable during busy hour, but suitable for best-effort traffic
    during non-busy hours

The charge of priority level j will be X*2^(j-4), if the charge of level
4 is X, and if the charging is proportional to NBR. However, quality
level 0 can be in practice obtained free of charge. The network operator
may try to dimension the network in a way that the traffic of 3 lowest
levels is able to fill the network capacity left by the higher priority
levels during busy hour. As the charge of level 6 service is 16 times
higher than that of level 2, we can assume that there will be much more
traffic offered to the lowest levels. For instance, there could be 10
times more traffic on the lowest levels and still the incomes from level
6 traffic is higher than those of levels 0, 1, and 2 together.
Therefore, the traffic load of level 6 could be increased by several
hundreds percents before there is any packet loss. Note that even very
high load of the low quality levels has no significant effect on the
packet loss ratio of the higher levels. It is reasonable to assume that
the most intense traffic variations occur at the lowest quality levels,
whereas the charging may dampen the variations at the highest quality
levels. Thus, for most of the time higher priority levels can be
considered as insulated from the lower levels having varying packet loss
ratio.

2.4 SIMA service chain

As a conclusion the SIMA service chain can be outlined as in Fig 2. The
user input to the SIMA network consists of charge (C -> X $), actual
traffic sent into the network (T), and rt/nrt selection (the only
traffic or quality parameter). The network may inform the user of the
offered service tariffs by announcing the NBR (or as the user is able to
know the charging function, he may select directly a proper NBR). The
main output of the network is the actual QoS of the flow, which depends



Kilkki                                                        [Page 7]

Internet-Draft     Simple Integrated Media Access            June 1997


directly on the network performance. Note that there is a (one-way)
connection from the charge of the flow to the actual QoS of the flow via
NBR, the SIMA control and network performance. Therefore, although there
is no pre-defined exact relation between charging and QoS, the user may
optimize the charging of the flow by trying firstly a low charge, and
then doubling the charge until the quality level is sufficient (or when
only flat rate charging is used, the user may change the actual bit rate
of the flow).

Another important feature is that the traffic control information is
conveyed purely by the SIMA packets (or cells), which means that there
is no need to have any separate control information transported between
different network nodes. Finally, as there is no packet or cell
discarding based on a separate traffic flow, packets or cells are
discarded only if the total load exceeds the networks capacity. In this
way the total capacity of the network can be exploited very efficiently

User  charging    input to       traffic               performance
                  network        control
   

C --> X $
       +
      tariff
      function => NBR for the flow
I <- - - - - - -/  +
T --------------> actual offered
                  traffic of
                  the flow
                   +
P --------------> rt/nrt     =>  SIMA packets
                                  +
                                 SIMA traffic control
                                  +
                                 aggregate traffic
                                 process
                                  +
                                 network capacity    => network
Q <---------------------------------------------------- performance

Fig. 2. Service chain of SIMA. C is the user's readiness to pay, I is
information given by the network, T is actual traffic sent into the
network,
 P is the parameters needed to control the flow, and
Q is the quality experienced by the user.







Kilkki                                                        [Page 8]

Internet-Draft     Simple Integrated Media Access            June 1997


3. Motivation

3.1 Current services

The SIMA service is intended to give a reasonable service concept for
ordinary Internet users while offering quality and fairness. The main
motivation of the SIMA service concept is the apparent unsuitability of
current Internet service concepts to entirely meet these requirements.
The starting point of the development of Internet services is the best-
effort service. The best-effort service chain is presented in Fig. 3.

The well-known problems of best-effort service are that there is no
relation between quality and charging, and that there is no way to offer
high quality (small packet loss or small delay) for those flows that
need these features. The prevalent approach to solve this problem is to
design guaranteed service classes, each of which has certain quality
features. A simplified service chain of this approach is presented in
Fig. 4.


User                   traffic          performance
                       control

C <--- charging X $
=====================================

T -------------------> offered
                       traffic
                        +
                       aggregate
                       traffic process
                        +
                       FIFO buffers
                        +
                       network
                       capacity      => network
Q <------------------------------------ performance

Fig. 3. Service chain of a best-effort service



The user input to a network with a guaranteed service consists of
requested traffic and quality parameters (P), and actual traffic sent
into the network (T). Actually, this is a significant difference between
SIMA and guaranteed service. With SIMA a customer mainly informs how
much he/she is willing to pay. With guaranteed service the customer must
first predict the parameters of his/her flow, something that is not easy



Kilkki                                                        [Page 9]

Internet-Draft     Simple Integrated Media Access            June 1997


even for an expert. The network informs users of the charge of the flow
by using a complicated tariff table including all possible combinations
of traffic and quality parameters. Because there will always be a lot of
customers that are not willing to make familiar with these parameters,
there must be some means to hide the complexity of the service.




User  input to                        traffic            performance
      network                         control

C <--------------------------------
                                  |
I <- - - - - - - - - - -          |
                        |         |
P --> requested  | +  tariff => charging X $
      traffic    |    table
       +         |
      quality    |
      parameters | => service class
                       +
                      traffic
                      descript. =>  "flow    +   other control
                                    control"     functions
                                     +            +
T --------------------------------> offered  =>  accepted
                                    traffic      traffic
                                       |          +
                                       V         aggregate
                                    discarded    traffic
Q1 <------------------------------- traffic      process
                                                  +
                                                 network
                                                 capacity    => network
Q2 <-----------------------------------------------------------   
performance

Fig. 4. Service chain of a guaranteed service


The guaranteed service approach means that the network attempts to give
a statistical prediction of the actual quality of the flow: certain
service class will generate certain average quality (it is assumed that
each user is willing and able to understand the meaning of the quality
parameters). However, because of the variations in aggregate traffic
process the actual quality can sometimes be worse than predicted, but in
great majority of cases if will be much better. Therefore, the



Kilkki                                                        [Page 10]

Internet-Draft     Simple Integrated Media Access            June 1997


connection between requested quality and actual quality is more
complicated than can be concluded directly from the service
specifications.

The output of the network is the actual QoS of the flow, but in this
case the quality (or rather, quality impairments) consists of two parts.
First one containing the possible packet loss ratio due to the control
of each flow ("flow control" in Fig. 4, UPC in ATM networks), and the
other one containing the effects of control functions directed to the
aggregate traffic load. In order to be able to respond properly in a
case of insufficient quality, these effects have to be discerned since
either the traffic parameters or service class should be changed.
Therefore, although the user can be able to optimize the quality to
charge ratio by changing traffic and/or quality parameters, this
optimization needs quite profound understanding of the properties of
services, network and traffic (or a very intelligent application to
perform the task).

3.2 Service comparison

A serious difficulty of most services with guaranteed quality is how to
build a reasonable service package offered to ordinary customers not
familiar with technical details. When comparing the SIMA service with
other possible integrated service concepts, the principal question is
whether the SIMA service can in this respect be better than the other
approaches. It is important to note that it is not reasonable to only
compare individual services realized by SIMA, or some other service
models, but the whole service package offered to customers.

Table 1 provides a brief summary for the comparison. The prevalent
approaches are service specifications developed at IETF's Integrated
Service working group (IntServ), and ATM specifications. We may assume
that most future Internet customers have different service requirements.
The two main services needed are a real-time service with high quality,
and a file transfer service with loose requirements for packet loss
ratio and delay. In addition, some customers may benefit from a service
which guarantees a small packet loss ratio but does not provide small
delay. If the network operator attempts to satisfy all these
requirements by using the current specifications, he must implement
several services. Possible combinations are: guaranteed service,
controlled load service and best-effort service if IETF's specifications
are used, and CBR+rt-VBR, ABR and UBR if ATM is used.

For ordinary customers charging has to be understandable, acceptable,
reliable, believable, etc. These properties cannot be attained if the
charging structure is too complicated. One of the main problems with the
current approaches is that the whole service offered to customers
consists of several services which may, and likely will, have different



Kilkki                                                        [Page 11]

Internet-Draft     Simple Integrated Media Access            June 1997


charging principles. The charging of any service based on resource
reservations is likely to be based on the traffic and QoS parameters
used at the reservation phase. Best-effort service cannot apply the same
scheme as there is no reservation, instead, flat rate or usage based
charging schemes are usable. The charging of controlled load services
may combine these two schemes (and be quite complicated). In total, if
we take into account the need of different charging levels for busy and
idle hours, the charging structure tends to be very complicated due to
the large amount of parameters. On the contrary, the charging of the
SIMA service can be based purely on one parameter, NBR.

When a customer requests a service she/he shall inform the network what
kind of service is needed. This information consists usually of some
traffic parameters (like peak cell rate) and quality parameters
(parameters (cell loss ratio, maximum delay), and service class. In
order to successfully use a service, the customer shall understand the
meaning of these parameters (if they cannot be totally hidden from end-
users), and even to make proper guess for the values of every parameter.
Taking into account the reluctance of many Internet users to learn
technical details, the current service concepts seem to be
unsatisfactory in this respect. With SIMA there is only NBR and the
selection between real-time and non-real-time service, and moreover, the
latter selection can be left usually to the application.

The next question is whether a SIMA network can offer all the necessary
service types. SIMA can provide efficient real-time service (i.e., as
small delay as possible), different packet loss ratios from negligible
to high, and a free combination of these two categories (delay, packet
loss ratio). The most unclear service class is the controlled load
service with small packet loss ratio. However, it should be stressed
that a small packet loss ratio can be always attained by using efficient
upper layer protocols if there is no strict delay requirement.
Therefore, in an environment where most customers are able to use TCP/IP
or similar protocol, there is no urgent need for a controlled load
service as a service offered to customers, rather the objective of
controlled load service is to optimize the use of network resources. A
SIMA network offers good possibilities for an application using TCP/IP
or similar protocols, as the packet loss ratio always decreases rapidly
when the transmission rate goes down enough (say, to a level of
2.5*NBR). In this respect SIMA service is essentially better than a pure
best-effort service.

As a conclusion, SIMA is able to offer simple, feasible solution for all
the service needs while traditional approaches call for three quite
complex services. Moreover, as the basic idea of SIMA is quite close to
the philosophy of the current Internet, SIMA is a natural way to
implement new services in Internet.



Kilkki                                                        [Page 12]

Internet-Draft     Simple Integrated Media Access            June 1997





Table 1. Comparison of network services, user related aspects
 ------------------------------------------------------------------------
|           |       IntServ        |         ATM           |   SIMA    |
|           | guaran. contr. best- |  CBR+     ABR     UBR |           |
|           | serv.   load  effort | rt-VBR                |           |
|-----------+----------------------+-----------------------+-----------|
| Charging  |  ?       ?     flat  | based on   ?     flat | based on  |
|           |                rate  | traffic, QoS     rate | NBR       |
|           |                      | parameters    (+usage)|           |
|           |                      |                       |           |
| Traffic   |     bucket rate, -   | PCR,     (about   -   |           |
| parameters|     bucket size,     | SCR, BT    20)        |           |
|           |     peak rate,       |                       |  (NBR)    |
|           |     min. policed     |                       |           |
|           |     unit, max        |                       |           |
|           |     packet size      |                       |           |
|           |                      |                       |           |
|QoS paramet|  yes     yes    no   | yes       yes    no   |    no     |
|           |                      |                       |           |
|Serv.classe|                      |                       |           |
|small delay|  yes     no     no   | yes       no     no   |  yes/no   |
|loss ratio |  small   small  high | small     small  high | small-high|
|controlled |  no      yes    no   | no        yes    no   | possible  |
| service   |                      |                       |           |
 ------------------------------------------------------------------------



3.3 Management comparison

The other important aspect necessary to evaluate is how well the SIMA
concept can meet the requirements of network operators (see table 2).
The main objective of a network operator is to offer those services that
most customers need by a competitive price. Because traffic and network
management is one of major costs of telecommunication network, it is
very important to keep management functions as simple and efficient as
possible. Best-effort service is simple to manage but it does not
provide all the needed features, whereas with guaranteed services it i
possible to offer all kind of services at the expense of increased
complexity. The realization of a guaranteed service requires traffic
parameters for every flow, controlling of these parameters, resource
reservation at every network node, complicated signaling for the
transfer of parameters, capacity planning for every service class,
dimensioning of complicated buffer and switching structures, etc. It
will be very difficult to implement and manage this type of network.



Kilkki                                                        [Page 13]

Internet-Draft     Simple Integrated Media Access            June 1997



The SIMA service makes possible a very simple management. Simple traffic
management means that the operator offers in principle only one service
with two components: a real-time service class and a non-real-time
service class. Notwithstanding the simplicity, this one basic service is
able to offer different quality levels with an automatic charging
structure.

The technical basis of the SIMA service lays on principles of best-
effort service: on the one hand, users do not inform in advance the
network on the needed bit rate or any other traffic parameters, and on
the other hand, the network operator does not give any precise
guarantees of the available bit rates or QoS (Quality of Service). The
best-effort principle with the aid of priorities makes possible a simple
network structure and management and, at the same time, it results in
good fairness among different connections and efficient statistical
multiplexing. The basic version of the SIMA service works without such
ordinary management functions as Traffic Descriptor, QoS parameters,
Service Classes, Connection Admission Control (CAC), or Usage Parameter
Control (UPC). All these functions are replaced by two autonomous units:
the measuring unit at access nodes and the scheduling and buffering unit
(SBU).

Table 2. Comparison of network services, network related aspects
 ------------------------------------------------------------------------
|          |       IntServ         |         ATM           |   SIMA    |
|          | guaran. contr.  best- |  CBR+     ABR     UBR |           |
|          | serv.   load   effort | rt-VBR                |           |
|----------+-----------------------+-----------------------+-----------|
| traffic  |  yes             no   | yes       yes     no  |    no     |
| control  |                       |        (difficult)    |           |
| per flow |                       |                       |           |
|          |                       |                       |           |
|resource  |  yes             no   | yes      for MBR  no  |  no (or   |
|allocation|                       |(difficult)            | NBR-based)|
|          |                       |                       |           |
|buffers   |  from 3 to thousands  |  from 3 to thousands  |    two    |
|per link  |                       |                       |           |
|          |                       |                       |           |
|network   |     complicated       |    complicated        |  simple   |
|management|                       |                       |           |
 ------------------------------------------------------------------------









Kilkki                                                        [Page 14]

Internet-Draft     Simple Integrated Media Access            June 1997



3.4 Performance comparison

The SIMA service is able to meet the simplicity requirement essentially
better than a network with several service classes, and it can satisfy
the basic service needs of most customers. The remaining questions are
related to the performance of SIMA networks: is the throughput
sufficient without a complicated control system, and could customers
rely on the quality of the network without guaranteed services.

As to the throughput, the main advantage of SIMA is that there is no
need to fragment the network capacity, instead, all services and all
flows divide the whole capacity of every link. In this respect SIMA is
very efficient. The possible problems are related to the fact that some
packet could be lost near the receiver and, therefore, the capacity that
these packets have exploited in the previous links will be wasted. The
best solution to this problem is the proper network dimensioning.
Another problematic issue could be partly transmitted packets, if ATM or
similar technology is used as at the transmission level. If this problem
turns out be a major problem, a packet based discarding scheme can be
implemented throughout the network, but at the expense of keeping track
on every flow in every network node.
   

The most difficult and crucial issue with the traffic management of the
SIMA service is the dimensioning of the network because it is the best
and only available tool to keep customers satisfied with the service.
One possible approach is that the operator attempts to offer
satisfactory QoS to nominal connections (i.e., to those connections in
which actual bit rate is equal to NBR). In practice, this may mean that
the operator measures the average cell loss ratio of cells with priority
level 4. This ratio should remain on a reasonable level, for instance
less than 1E-7. If this cell loss ratio is exceeded continuously, the
operator shall firstly identify the bottlenecks in the network and then
increase the network capacity in those points. It should be noted that
this capacity increase is a quite straightforward task because there is
no need to make any new plans concerning switching structure, the
capacity division between service classes or virtual paths, etc. The
network operator simply throws bandwidth, and the SIMA service manages
QoS. This network dimensioning scheme provided by SIMA is a natural
extension of the prevalent way of managing Internet.

4. Network Element Data Handling Requirements

There are two main alternatives for the realization of the SIMA service:
the first one based purely on packet network and the second one based on
the use of ATM for the switching and transportation. As the basic
implementation of these two alternatives does not considerable differ
from each other, in the following both versions are presented in



Kilkki                                                        [Page 15]

Internet-Draft     Simple Integrated Media Access            June 1997


parallel. The main difference is that the ATM makes possible to realize
more easily a satisfactory real-time service. This question is addressed
further in chapter 9.3.

The implementation of the SIMA service consists of two main parts:
access nodes and core network nodes presented in Fig. 5. There is a
fundamental difference between these node types: the traffic measurement
of every flow is performed at access nodes whereas at the core network
nodes the traffic control functions do not need to know anything about
the properties of separate flows.

                        C -------- C --------
                       /                     \
 +-----+   +----+     /                       \       +----+     +-----+
 | CE1 |---| A1 |--- C --------- C ----------- C -----| A2 | ----| CE2 |
 +-----+   +----+     \         /             /       +----+     +-----+
                       C------ C -------------
   

Fig. 5. Customer equipment (CE1) connected to an other customer
equipment (CE2) through a SIMA network with access nodes (A) and core
nodes (C).

4.1. Access Node

Let us suppose that there is an IP flow (i) at an access node. A nominal
bit rate, NBR(i), is associated to the flow and the user is transmitting
IP packets (which may be converted into ATM cells) into the network
according to an arbitrary traffic process. At the user/network interface
there is a measuring device which measures the momentary bit rate of the
connection at the arrival of the j:th packet (or cell). This rate is
denoted by MBR(i,j). The device gives every packet (or cell) a priority,
PL(i,j), based on the MBR(i,j) to NBR(i) ratio:

    
 x = 4.5 - ln(MBR(i,j)/NBR(i))/ln(2)   

 PL(i,j) = 6      if x >= 6
         = Int(x) if 0 < x < 6                                  (1)
         = 0      if x <= 0

where Int(x) is the integer part of x.

Consequently, if MBR(i,j) = NBR(i) the packet (or cell) gets priority 4,
if  MBR(i,j) > 5.66 NBR(i) the packet (or cell) gets the lowest priority
(0), and if MBR(i,j) < 0.17 NBR(i) the packet (or cell) gets the highest
NBR-priority (6). Priority 7 is reserved for those connections that use
a network service with guaranteed bandwidth and quality. The accepting
and discarding of packets (or cells) inside a SIMA network is entirely



Kilkki                                                        [Page 16]

Internet-Draft     Simple Integrated Media Access            June 1997


based on these priorities.

This priority scheme makes it possible to offer different QoS levels as
regards the packet loss probability. The other needed QoS distinction is
related to the delay and delay variation requirements: the network shall
be able to guarantee small delay for real-time flows. The user shall
determine for every flow whether a real-time service is required. In the
SIMA service this selection can be left freely to the user and there is
no need to take it into account when determining the charge of the
connection. For the realization of real-time service every network node
(and every separate switching element in a network node) shall have two
parallel buffers: one for real-time flows and another for non-real-time
flows. All packets or cells belonging to a real-time flow go through the
real-time buffer and all other packets use the non-real-time buffer.

4.2 Scheduling and buffering in core network

In core network, the key issue in the implementation of the SIMA service
is the packet or cell discarding system before the actual buffering
shown in Fig. 6. At any instant there is an accepted level of priority
(PL_a): if an incoming packet or cell has the same or higher priority,
it is accepted, otherwise it is discarded. The calculation of PL_a is
based on the buffer occupancy levels of the real-time buffer (M_rt) and
non-real-time buffer (M_nrt).

All the packets or cells which have been accepted in the scheduling unit
are situated either in the real-time or non-real-time buffer (the
scheduling algorithm can guarantee that there is no cell loss in actual
buffers). Both buffers may apply the First In First Out (FIFO)
principle. In order to obtain a small delay and delay variation, the
real-time buffer should be relatively small (e.g., 10 Kbytes). All
packets (or cells) in the real-time buffer shall be transmitted before
any packet (or cell) in the non-real-time buffer. It should be
emphasized that the delay priority of real-time flows has no effect on
the packet loss ratios. The non-real-time buffer should be much larger
(e.g., 1 Mbyte) because of the packet scale fluctuations in typical non-
real-time traffic processes. Moreover, large buffers make it possible to
offer reasonable service for those flows that are capable of adjusting
their bit rate.

It should be emphasized that the function of each scheduling and
buffering unit (SBU) is independent of all other SBU's; all the tasks of
SBU are performed based on the information of incoming packets (or
cells), and moreover, all the necessary function for the implementation
are described in Fig. 6. Thus, due to the autonomous property of
switching units and the unnecessity of resource reservation, the
management of the SIMA network is very straightforward.




Kilkki                                                        [Page 17]

Internet-Draft     Simple Integrated Media Access            June 1997


  -----------------------
  |                     |
  | PL_a = F(M_rt,M_nrt)| <- -  - - - - - - - -
  |                     | <- - - - - - -       |
  -----------------------               |
           |                                  M_rt            packet
           |PL_a        real time       |   ----+--           or
           |           -------------------->    XX|----+-X--> cells
 packet    V           |                |   -------    |      out
 or cells / \         / \                              |
 in      /   \  yes  /   \              |              |
 -X---> /PL>= \---->/ rt/ \                            |
        \PL_a /     \ nrt /             |              |
         \   /       \   /                             |
          \ /         \ /             M_nrt            |
           |           | nrt     -------+---------     |
           |           ---------->      XXXXXXXXX|--/---
           | no                  -----------------  open only if
           | (discard packet or cell)               M_rt = 0
           V

Fig. 6. A packet (or cell) scheduling and buffering unit (SBU) for a
SIMA network node

Only additional information that has to transmitted through the SIMA
network is the NBR for each flow. The basic principle of SIMA is that
the charge of the flow specifies the obtained NBR and the network has to
be able to transmit NBR information between access nodes (from A1 to A2
or vice versa in Fig. 5). We may assume that the customer is entitled to
divide freely the available NBR between the two directions. With certain
services (e.g., radio broadcast) pre-defined NBR can be included in the
total service fee.

5. Invocation Information

At the access node, the SIMA service is invoked by specifying the NBR
for the data flow, and by selecting either the real-time or non-real-
time service. If a pure flat rate charging scheme is used, the NBR can
be assigned to the interface not to any individual flow, as described in
chapter 2.1.

The value of NBR is measured in bits of IP datagrams (or ATM cells) per
second. Value of this parameter may range from 8 to 320 Terabits per
second. The selection between real-time or non-real-time has to be
always determined.






Kilkki                                                        [Page 18]

Internet-Draft     Simple Integrated Media Access            June 1997


6. Exported Information

The SIMA service has no required characterization parameters. Individual
implementations may export appropriate implementation-specific
measurement and monitoring information.

7. Policing

There is no actual policing mechanism needed with SIMA service. The
policing is replaced by the traffic measurement of each flow and by the
priority of every packet or cell. This mechanism forms a similar traffic
control as UPC and the CLP (Cell Loss Priority) bit in ATM network,
where the network may change the CLP bit if the connection exceeds its
sustained cell rate. The measuring and priority determination have been
presented in chapter 4.1.

8. Ordering and Merging

With the SIMA service there is no specific problems with ordering or
merging as the priority of each packet or cell determines automatically
the treatment of the packet or cell without any additional control
function.

9. Guidelines for Implementors

9.1 Actual bit rate measurement

Since the bit rate of every connection may change significantly in
several time scales, the network operator must apply an averaging
measuring principle to determine the instantaneous cell rate of each
connection. The time scale of the measurement shall depend on the
service class (real-time or non-real-time) because the non-real-time
buffer capacity can be 100 times larger than the real-time one. The
approach presented in this chapter is applicable, but any measuring
scheme which gives a feasible approximation of the instantaneous bit
rate can be used, provided that it can be adjusted to the needed
measuring period.

This measuring approach is based on the well-known principle of
exponential moving average. In this chapter we assume that ATM is used
as transport technology. However, a similar measuring principle can be
applied with variable size packets as well.

If we suppose that the moving average is calculated at every time slot
in the access node, the measured load generated by a connection (i) at
the instant of transmission of j:th cell is:





Kilkki                                                        [Page 19]

Internet-Draft     Simple Integrated Media Access            June 1997



   rho(i,j)=alpha + rho(i,j-1)(1-alpha)^N(i,j)                  (2)

where N(i,j) is the distant between j:th and (j-1):th cells in time
slots and alpha is a parameter which defines the time scale of
measurement. Here the notation a^b means a to the power of b. Formula
(2)is obtained by assuming that the estimation for the instantaneous
load is updated at every time slot, but all calculations are performed
only at the arrival instant of a cell. The following starting values can
be used: rho(i,0) = 0 and N(i,1)=C/NBR_i, where NBR_i is  the nominal
bit rate assigned to connection i.

In order to obtain an exact steady state value for constant bit rate
connections the following conversion between load (rho(i,j)) and
measured bit rate (MBR(i,j)) shall be applied:

   MBR(i,j) = C ln(1-alpha)/ln(1-(alpha/rho(i,j)))              (3)

where C is the link capacity [bit/s] at the user/network interface. For
numerical reasons (2) and (3) shall be replaced by

   MBR(i,j) = C/N(i,j)
 
if N(i,j) > 10/alpha.

It should be noted that because alpha is usually a constant, formula (3)
can be replaced by a table with a proper granularity. For the same
reason, at least the term (1-alpha)^N(i,j) in (2) can be tabulated.

The proper value for parameter alpha depends on the buffer capacity
reserved for the service class used by the connection. With real-time
services (with small delay variation) the buffer shall be small, and
thus the value of alpha must be quite high. On the contrary, when using
a non-real-time service the user may want to send bursts of cells
without high cell loss ratio. As a consequence alpha must be much
smaller (or the averaging period should be much longer). As an interim
approach the following approximation might be applicable:

   alpha = 5/K_n                                                (4)

where K_n is the buffer capacity in cells reserved for the service class
n.









Kilkki                                                        [Page 20]

Internet-Draft     Simple Integrated Media Access            June 1997


9.2 Implementation of scheduling algorithm

The key point of the SIMA service lies in the function of the scheduling
algorithm. The decision of the acceptance is based on two parameters:
the priority level of the cell and the occupancy level of the two
buffers. Let us use the following notations:

   M_rt  = the number of cells in the rt-buffer
   K_rt  = the number of buffer places in the rt-buffer
   M_nrt = the number of cells in the nrt-buffer
   K_nrt = the number of buffer places in the nrt-buffer

The average occupancy level of the total buffering system (x) might be
determined in several ways, for instance:

   x = (x_rt + x_nrt)           (a)
   x = sqrt(x_rt^2 + x_nrt^2)   (b)                             (5)
   x = max(x_rt, x_nrt)         (c)
where:
   x_rt = M_rt/K_rt
   x_nrt = M_nrt/K_nrt

Above sqrt(y) stands for taking squareroot from y and max(y,z) stands
for taking the maximum of y and z.

The cell is accepted if the following relation is valid

    PL < a - b*x                                                (6)

In reality formulae (5) and (6) can be implemented by using pre-
calculated tables.

9.3 ATM implementation
   

One of the main question related with the implementation is whether ATM
is used as the transmission technology. The main advantage of using ATM
in a SIMA network is that it makes possible a real-time service with
small delay variation. There are some drawbacks if ATM is not used.

Firstly, if a pure packet based approach is applied, the delay variation
of real-time connections will be much larger because of transmission of
long non-real-time packets. One solution to this problem could be to
interrupt the transmission of non-real-time packet if needed (something
similar to ATM). This problem is significant especially with low link
speeds.

Secondly, the function of the network shall be realized in a way that
either there cannot be long non-real-time packets, or long real-time
packets must always be assigned with the lowest priority. The reason to
this requirement is that even a couple of long non-real-time packets


Kilkki                                                        [Page 21]

Internet-Draft     Simple Integrated Media Access            June 1997


could increase the buffer occupancy level of real-time buffer, and by
that means change very rapidly the allowed priority level.

9.4 The location of priority bits

SIMA needs at most 4 bits in every packet in pure IP networks or in
every cell if ATM is used. In IP packets it may be possible to use the
type of service (TOS) field or priority field if IP-version 6 is used.

In ATM the cell header is small and there is only one bit for priority
marking (CLP bit). There are at least three different approaches to
situate the needed bits in ATM cells.

Firstly, it could be possible to use the Generic Flow Control (GFC)
field in the beginning of the cell. It should be noted that this field
is actually available only in UNI-interface, as in the NNI-interface the
first 4 bits belongs to the VPI-field. However, the first 4 bits are not
widely used in real implementations.

Secondly, it could be possible to reserve an own VP for each of the
possible 16 service types: 8 priority levels for real-time connections
and 8 priority levels for non-real-time connections. The advantage of
this scheme is that it has a good interoperability with current
networks, as it does not change the cell structure at all. The main
disadvantage is that it reduces the number of available VP for other
purposes. However, if SIMA is widely applied there is not so much need
for using separate VPs for different types of services, rather the VPs
can be used only for routing purposes.

Thirdly, if it is not possible to use the header of the ATM cells, the
bits should be situated in the information field. However, this is not a
desirable approach, because it is very difficult to find any place
suitable to all ATM adaptation layers (AAL).

10. Evaluation Criteria

The evaluation of SIMA service consists of three main parts: functions
related to priority determination, scheduling functions, and the
performance of real-time service.

The assumption of this document is that the measuring principle will not
be standardized, although one possible implementation has been presented
in chapter 9.1. However, it can assumed that all measuring
implementations shall produce the same result for constant bit rate
(CBR) connections with certain accuracy. That means that for certain
constant bit rate, the priority shall be within certain limits. If this
priority determination is accurate, it makes possible for the user to
optimize the bit rate he/she is using. Therefore, the main requirement



Kilkki                                                        [Page 22]

Internet-Draft     Simple Integrated Media Access            June 1997


for an realization of the priority determination of CBR stream is that
it should not give worse priority than what the formula (1) gives.
Because the SIMA service is to certain extent indefinite, there is no
need to define any stringent limit for the underestimation of the actual
bit rate, but, for instance, 1 percent accuracy can be sufficient.

The implementation of scheduling function does not need to be
standardized (some  examples are presented in chapter 9.2). The operator
is allowed to optimize the network performance by changing the
scheduling function.

All real-time connections or flows shall have as small delay variation
as possible. However, as the actual delay variation depends essentially
on the underlying technology used, it is not feasible to define any
numerical requirements for the delay variation (see chapter 9.3). The
only requirement is that if there is any real-time packet or cell in the
buffer, it shall be transmitted before all the packets or cells in the
non-real-time buffer.

11. Examples of Implementation

The basic implementation approach for an Internet Service providers is
based on the flat rate charging scheme. This implementation of Internet
service is very straightforward expansion of the current Internet
service.
   

Every customer has certain permanent NBR which has direct relation to
the monthly charge of the customer. All the traffic sent by the customer
to the network is measured at access node of the network. If the access
is based on IP, the node gives every packet a priority based on the
measurement result and the NBR of the customer, as presented in chapter
4.1.  Correspondingly, if the access is based on ATM, the node gives
priority for every cell. Priorities from 0 to 6 are used for SIMA
customer. Priority 7 can be used by customer which needs reserved
connections, and which are ready to pay more than the SIMA customers.
The lowest charging category with minimal NBR could be very inexpensive,
as those customers always get priority 0, and therefore, cannot disturb
the traffic of other customers.

12. Examples of Use

The main advantage of SIMA as an Internet service is that it provides a
uniform service concept for different needs from file transfer
applications using TCP/IP protocol without loose delay and packet loss
requirements to real-time applications with very strict quality and
availability requirements. Thus SIMA can be used as a complete Internet
service for all customers.




Kilkki                                                        [Page 23]

Internet-Draft     Simple Integrated Media Access            June 1997



13. Security Considerations

Security considerations are not discussed in this memo.


Author's address
Kalevi Kilkki
Nokia Research Center
P.O.Box 422
FIN-00045 NOKIA GROUP
Finland
E-mail: kalevi.kilkki@research.nokia.com
Tel. + 358 9 4376 6817
Fax. + 358 9 4376 6851
Information about SIMA is available from http://www-nrc.nokia.com/sima/
Expiration
This document will expire in 19 December 1997.

































Kilkki                                                        [Page 24]



