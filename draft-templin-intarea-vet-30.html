<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Virtual Enterprise Traversal (VET)</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Terminology">
<link href="#rfc.section.3" rel="Chapter" title="3 Enterprise Network Characteristics">
<link href="#rfc.section.4" rel="Chapter" title="4 Autoconfiguration">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 Enterprise Router (ER) Autoconfiguration">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 VET Border Router (VBR) Autoconfiguration">
<link href="#rfc.section.4.2.1" rel="Chapter" title="4.2.1 VET Interface Initialization">
<link href="#rfc.section.4.2.2" rel="Chapter" title="4.2.2 Potential Router List (PRL) Discovery">
<link href="#rfc.section.4.2.3" rel="Chapter" title="4.2.3 Provider-Aggregated (PA) EID Prefix Autoconfiguration">
<link href="#rfc.section.4.2.3.1" rel="Chapter" title="4.2.3.1 Stateful Prefix Delegation">
<link href="#rfc.section.4.2.3.2" rel="Chapter" title="4.2.3.2 Stateless Prefix Delegation">
<link href="#rfc.section.4.2.4" rel="Chapter" title="4.2.4 ISP-Independent EID Prefix Autoconfiguration">
<link href="#rfc.section.4.3" rel="Chapter" title="4.3 VET Border Gateway (VBG) Autoconfiguration">
<link href="#rfc.section.4.4" rel="Chapter" title="4.4 VET Host Autoconfiguration">
<link href="#rfc.section.5" rel="Chapter" title="5 Internetworking Operation">
<link href="#rfc.section.5.1" rel="Chapter" title="5.1 Routing Protocol Participation">
<link href="#rfc.section.5.1.1" rel="Chapter" title="5.1.1 PI Prefix Routing Considerations">
<link href="#rfc.section.5.1.2" rel="Chapter" title="5.1.2 Client Prefix (CP) Routing Considerations">
<link href="#rfc.section.5.2" rel="Chapter" title="5.2 Default Route Configuration and Selection">
<link href="#rfc.section.5.3" rel="Chapter" title="5.3 Address Selection">
<link href="#rfc.section.5.4" rel="Chapter" title="5.4 Next Hop Determination">
<link href="#rfc.section.5.5" rel="Chapter" title="5.5 VET Interface Encapsulation/Decapsulation">
<link href="#rfc.section.5.5.1" rel="Chapter" title="5.5.1 Inner Network Layer Protocol">
<link href="#rfc.section.5.5.2" rel="Chapter" title="5.5.2 SEAL Encapsulation">
<link href="#rfc.section.5.5.3" rel="Chapter" title="5.5.3 Outer Transport-Layer Header Encapsulation">
<link href="#rfc.section.5.5.4" rel="Chapter" title="5.5.4 Outer IP Header Encapsulation">
<link href="#rfc.section.5.5.5" rel="Chapter" title="5.5.5 Decapsulation and Re-Encapsulation">
<link href="#rfc.section.5.6" rel="Chapter" title="5.6 Neighbor Coordination on VET Interfaces that use SEAL">
<link href="#rfc.section.5.6.1" rel="Chapter" title="5.6.1 Router Discovery">
<link href="#rfc.section.5.6.2" rel="Chapter" title="5.6.2 Neighbor Unreachability Detection">
<link href="#rfc.section.5.6.3" rel="Chapter" title="5.6.3 Redirection">
<link href="#rfc.section.5.6.4" rel="Chapter" title="5.6.4 Bidirectional Neighbor Synchronization">
<link href="#rfc.section.5.7" rel="Chapter" title="5.7 Neighbor Coordination on VET Interfaces using IPsec">
<link href="#rfc.section.5.8" rel="Chapter" title="5.8 Mobility and Multihoming Considerations">
<link href="#rfc.section.5.9" rel="Chapter" title="5.9 Multicast ">
<link href="#rfc.section.5.9.1" rel="Chapter" title="5.9.1 Multicast over (Non)Multicast Enterprise Networks">
<link href="#rfc.section.5.9.2" rel="Chapter" title="5.9.2 Multicast Over Multicast-Capable Enterprise Networks">
<link href="#rfc.section.5.10" rel="Chapter" title="5.10 Service Discovery">
<link href="#rfc.section.5.11" rel="Chapter" title="5.11 VET Link Partitioning">
<link href="#rfc.section.5.12" rel="Chapter" title="5.12 VBG Prefix State Recovery">
<link href="#rfc.section.5.13" rel="Chapter" title="5.13 Legacy ISATAP Services">
<link href="#rfc.section.6" rel="Chapter" title="6 IANA Considerations">
<link href="#rfc.section.7" rel="Chapter" title="7 Security Considerations">
<link href="#rfc.section.8" rel="Chapter" title="8 Related Work">
<link href="#rfc.section.9" rel="Chapter" title="9 Acknowledgements">
<link href="#rfc.section.10" rel="Chapter" title="10 Contributors">
<link href="#rfc.references" rel="Chapter" title="11 References">
<link href="#rfc.references.1" rel="Chapter" title="11.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="11.2 Informative References">
<link href="#rfc.appendix.Appendix%20A" rel="Chapter" title="Appendix A Duplicate Address Detection (DAD) Considerations">
<link href="#rfc.appendix.Appendix%20B" rel="Chapter" title="Appendix B Anycast Services">
<link href="#rfc.appendix.Appendix%20C" rel="Chapter" title="Appendix C Change Log">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="Enterprise networks connect hosts and routers over various link types, and often also connect to provider networks and/or the global Internet. Enterprise network nodes require a means to automatically provision addresses/prefixes and support internetworking operation in a wide variety of use cases including Small Office, Home Office (SOHO) networks, Mobile Ad hoc Networks (MANETs), ISP networks, multi-organizational corporate networks and the interdomain core of the global Internet itself. This document specifies a Virtual Enterprise Traversal (VET) abstraction for autoconfiguration and operation of nodes in enterprise networks." />
  <meta name="description" content="Enterprise networks connect hosts and routers over various link types, and often also connect to provider networks and/or the global Internet. Enterprise network nodes require a means to automatically provision addresses/prefixes and support internetworking operation in a wide variety of use cases including Small Office, Home Office (SOHO) networks, Mobile Ad hoc Networks (MANETs), ISP networks, multi-organizational corporate networks and the interdomain core of the global Internet itself. This document specifies a Virtual Enterprise Traversal (VET) abstraction for autoconfiguration and operation of nodes in enterprise networks." />
  <meta name="keywords" content="I-D, Internet-Draft" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Network Working Group</td>
<td class="right">F. Templin, Ed.</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">Boeing Research &amp; Technology</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">November 18, 2011</td>
</tr>
<tr>
<td class="left">Expires: May 21, 2012</td>
<td class="right"></td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Virtual Enterprise Traversal (VET)<br />
  <span class="filename">draft-templin-intarea-vet-30.txt</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>Enterprise networks connect hosts and routers over various link types, and often also connect to provider networks and/or the global Internet. Enterprise network nodes require a means to automatically provision addresses/prefixes and support internetworking operation in a wide variety of use cases including Small Office, Home Office (SOHO) networks, Mobile Ad hoc Networks (MANETs), ISP networks, multi-organizational corporate networks and the interdomain core of the global Internet itself. This document specifies a Virtual Enterprise Traversal (VET) abstraction for autoconfiguration and operation of nodes in enterprise networks.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on May 21, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Terminology</a>
</li>
<li>3.   <a href="#rfc.section.3">Enterprise Network Characteristics</a>
</li>
<li>4.   <a href="#rfc.section.4">Autoconfiguration</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">Enterprise Router (ER) Autoconfiguration</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">VET Border Router (VBR) Autoconfiguration</a>
</li>
<li>4.2.1.   <a href="#rfc.section.4.2.1">VET Interface Initialization</a>
</li>
<li>4.2.2.   <a href="#rfc.section.4.2.2">Potential Router List (PRL) Discovery</a>
</li>
<li>4.2.3.   <a href="#rfc.section.4.2.3">Provider-Aggregated (PA) EID Prefix Autoconfiguration</a>
</li>
<li>4.2.3.1.   <a href="#rfc.section.4.2.3.1">Stateful Prefix Delegation</a>
</li>
<li>4.2.3.2.   <a href="#rfc.section.4.2.3.2">Stateless Prefix Delegation</a>
</li>
<li>4.2.4.   <a href="#rfc.section.4.2.4">ISP-Independent EID Prefix Autoconfiguration</a>
</li>
<li>4.3.   <a href="#rfc.section.4.3">VET Border Gateway (VBG) Autoconfiguration</a>
</li>
<li>4.4.   <a href="#rfc.section.4.4">VET Host Autoconfiguration</a>
</li>
<li>5.   <a href="#rfc.section.5">Internetworking Operation</a>
</li>
<li>5.1.   <a href="#rfc.section.5.1">Routing Protocol Participation</a>
</li>
<li>5.1.1.   <a href="#rfc.section.5.1.1">PI Prefix Routing Considerations</a>
</li>
<li>5.1.2.   <a href="#rfc.section.5.1.2">Client Prefix (CP) Routing Considerations</a>
</li>
<li>5.2.   <a href="#rfc.section.5.2">Default Route Configuration and Selection</a>
</li>
<li>5.3.   <a href="#rfc.section.5.3">Address Selection</a>
</li>
<li>5.4.   <a href="#rfc.section.5.4">Next Hop Determination</a>
</li>
<li>5.5.   <a href="#rfc.section.5.5">VET Interface Encapsulation/Decapsulation</a>
</li>
<li>5.5.1.   <a href="#rfc.section.5.5.1">Inner Network Layer Protocol</a>
</li>
<li>5.5.2.   <a href="#rfc.section.5.5.2">SEAL Encapsulation</a>
</li>
<li>5.5.3.   <a href="#rfc.section.5.5.3">Outer Transport-Layer Header Encapsulation</a>
</li>
<li>5.5.4.   <a href="#rfc.section.5.5.4">Outer IP Header Encapsulation</a>
</li>
<li>5.5.5.   <a href="#rfc.section.5.5.5">Decapsulation and Re-Encapsulation</a>
</li>
<li>5.6.   <a href="#rfc.section.5.6">Neighbor Coordination on VET Interfaces that use SEAL</a>
</li>
<li>5.6.1.   <a href="#rfc.section.5.6.1">Router Discovery</a>
</li>
<li>5.6.2.   <a href="#rfc.section.5.6.2">Neighbor Unreachability Detection</a>
</li>
<li>5.6.3.   <a href="#rfc.section.5.6.3">Redirection</a>
</li>
<li>5.6.4.   <a href="#rfc.section.5.6.4">Bidirectional Neighbor Synchronization</a>
</li>
<li>5.7.   <a href="#rfc.section.5.7">Neighbor Coordination on VET Interfaces using IPsec</a>
</li>
<li>5.8.   <a href="#rfc.section.5.8">Mobility and Multihoming Considerations</a>
</li>
<li>5.9.   <a href="#rfc.section.5.9">Multicast </a>
</li>
<li>5.9.1.   <a href="#rfc.section.5.9.1">Multicast over (Non)Multicast Enterprise Networks</a>
</li>
<li>5.9.2.   <a href="#rfc.section.5.9.2">Multicast Over Multicast-Capable Enterprise Networks</a>
</li>
<li>5.10.   <a href="#rfc.section.5.10">Service Discovery</a>
</li>
<li>5.11.   <a href="#rfc.section.5.11">VET Link Partitioning</a>
</li>
<li>5.12.   <a href="#rfc.section.5.12">VBG Prefix State Recovery</a>
</li>
<li>5.13.   <a href="#rfc.section.5.13">Legacy ISATAP Services</a>
</li>
<li>6.   <a href="#rfc.section.6">IANA Considerations</a>
</li>
<li>7.   <a href="#rfc.section.7">Security Considerations</a>
</li>
<li>8.   <a href="#rfc.section.8">Related Work</a>
</li>
<li>9.   <a href="#rfc.section.9">Acknowledgements</a>
</li>
<li>10.   <a href="#rfc.section.10">Contributors</a>
</li>
<li>11.   <a href="#rfc.references">References</a>
</li>
<li>11.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>11.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li>Appendix A.   <a href="#rfc.appendix.Appendix%20A">Duplicate Address Detection (DAD) Considerations</a>
</li>
<li>Appendix B.   <a href="#rfc.appendix.Appendix%20B">Anycast Services</a>
</li>
<li>Appendix C.   <a href="#rfc.appendix.Appendix%20C">Change Log</a>
</li>
<li><a href="#rfc.authors">Author's Address</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> <a href="#intro" id="intro">Introduction</a>
</h1>
<p id="rfc.section.1.p.1">Enterprise networks <a href="#RFC4852">[RFC4852]</a> connect hosts and routers over various link types (see <a href="#RFC4861">[RFC4861]</a>, Section 2.2). The term "enterprise network" in this context extends to a wide variety of use cases and deployment scenarios. For example, an "enterprise" can be as small as a Small Office, Home Office (SOHO) network, as complex as a multi-organizational corporation, or as large as the global Internet itself. Internet Service Provider (ISP) networks are another example use case that fits well with the VET enterprise network model. Mobile Ad hoc Networks (MANETs) <a href="#RFC2501">[RFC2501]</a> can also be considered as a challenging example of an enterprise network, in that their topologies may change dynamically over time and that they may employ little/no active management by a centralized network administrative authority. These specialized characteristics for MANETs require careful consideration, but the same principles apply equally to other enterprise network scenarios.</p>
<p id="rfc.section.1.p.2">This document specifies a Virtual Enterprise Traversal (VET) abstraction for autoconfiguration and internetworking operation, where addresses of different scopes may be assigned on various types of interfaces with diverse properties. Both IPv4/ICMPv4 <a href="#RFC0791">[RFC0791]</a><a href="#RFC0792">[RFC0792]</a> and IPv6/ICMPv6 <a href="#RFC2460">[RFC2460]</a><a href="#RFC4443">[RFC4443]</a> are discussed within this context (other network layer protocols are also considered). The use of standard DHCP <a href="#RFC2131">[RFC2131]</a> <a href="#RFC3315">[RFC3315]</a> is assumed unless otherwise specified.</p>
<div id="#rfc.figure.1"></div>
<div id="#era"></div>
<pre>                          Provider-Edge Interfaces
                               x   x        x
                               |   |        |
          +--------------------+---+--------+----------+    E
          |                    |   |        |          |    n
          |    I               |   |  ....  |          |    t
          |    n           +---+---+--------+---+      |    e
          |    t           |   +--------+      /|      |    r
          |    e  I   x----+   |  Host  |   I /*+------+--&lt; p  I
          |    r  n        |   |Function|   n|**|      |    r  n
          |    n  t        |   +--------+   t|**|      |    i  t
          |    a  e   x----+              V e|**+------+--&lt; s  e
          |    l  r      . |              E r|**|  .   |    e  r
          |       f      . |              T f|**|  .   |       f
          |    V  a      . |   +--------+   a|**|  .   |    I  a
          |    i  c      . |   | Router |   c|**|  .   |    n  c
          |    r  e   x----+   |Function|   e \*+------+--&lt; t  e
          |    t  s        |   +--------+      \|      |    e  s
          |    u           +---+---+--------+---+      |    r
          |    a               |   |  ....  |          |    i
          |    l               |   |        |          |    o
          +--------------------+---+--------+----------+    r
                               |   |        |
                               x   x        x
                        Enterprise-Edge Interfaces</pre>
<p></p>
<p><a href="#era">Figure 1</a> above depicts the architectural model for an Enterprise Router (ER). As shown in the figure, an ER may have a variety of interface types including enterprise-edge, enterprise-interior, provider-edge, internal-virtual, as well as VET interfaces used for encapsulating inner network layer protocol packets for transmission over outer IPv4 or IPv6 networks. The different types of interfaces are defined, and the autoconfiguration mechanisms used for each type are specified. This architecture applies equally for MANET routers, in which enterprise-interior interfaces typically correspond to the wireless multihop radio interfaces associated with MANETs. Out of scope for this document is the autoconfiguration of provider interfaces, which must be coordinated in a manner specific to the service provider's network.</p>
<p id="rfc.section.1.p.5">The VET framework builds on a Non-Broadcast Multiple Access (NBMA) <a href="#RFC2491">[RFC2491]</a> virtual interface model in a manner similar to other automatic tunneling technologies <a href="#RFC2529">[RFC2529]</a><a href="#RFC5214">[RFC5214]</a>. VET interfaces support the encapsulation of inner network layer protocol packets over IP networks (i.e., either IPv4 or IPv6), and provide an NBMA interface abstraction for coordination between tunnel endpoint "neighbors". VET is also compatible with mid-layer encapsulation technologies including IPsec <a href="#RFC4301">[RFC4301]</a>, and supports both stateful and stateless prefix delegation.</p>
<p id="rfc.section.1.p.6">VET and its associated technologies (including the Subnetwork Encapsulation and Adaptation Layer (SEAL) <a href="#I-D.templin-intarea-seal">[I-D.templin-intarea-seal]</a> and Asymmetric Extended Route Optimization (AERO) <a href="#I-D.templin-aero">[I-D.templin-aero]</a>) are functional building blocks for a new Internetworking architecture known as the Internet Routing Overlay Network (IRON) <a href="#I-D.templin-ironbis">[I-D.templin-ironbis]</a> and Routing and Addressing in Networks with Global Enterprise Recursion (RANGER) <a href="#RFC5720">[RFC5720]</a><a href="#RFC6139">[RFC6139]</a>. Many of the VET principles can be traced to the deliberations of the ROAD group in January 1992, and also to still earlier initiatives including NIMROD <a href="#RFC1753">[RFC1753]</a> and the Catenet model for internetworking <a href="#CATENET">[CATENET]</a> <a href="#IEN48">[IEN48]</a> <a href="#RFC2775">[RFC2775]</a>. The high-level architectural aspects of the ROAD group deliberations are captured in a "New Scheme for Internet Routing and Addressing (ENCAPS) for IPNG" <a href="#RFC1955">[RFC1955]</a>.</p>
<p id="rfc.section.1.p.7">VET is related to the present-day activities of the IETF INTAREA, AUTOCONF, DHC, IPv6, MANET, RENUM and V6OPS working groups, as well as the IRTF RRG working group.</p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> <a href="#terminology" id="terminology">Terminology</a>
</h1>
<p id="rfc.section.2.p.1">The mechanisms within this document build upon the fundamental principles of IP encapsulation. The term "inner" refers to the innermost {address, protocol, header, packet, etc.} *before* encapsulation, and the term "outer" refers to the outermost {address, protocol, header, packet, etc.} *after* encapsulation. VET also accommodates "mid-layer" encapsulations including SEAL <a href="#I-D.templin-intarea-seal">[I-D.templin-intarea-seal]</a>, IPsec <a href="#RFC4301">[RFC4301]</a>, etc.</p>
<p id="rfc.section.2.p.2">The terminology in the normative references apply; the following terms are defined within the scope of this document:</p>
<p></p>

<dl>
<dt>Virtual Enterprise Traversal (VET)</dt>
<dd style="margin-left: 8">
<br>an abstraction that uses encapsulation to create virtual overlays for transporting inner network layer packets over outer IPv4 and IPv6 enterprise networks.</dd>
<dt>enterprise network</dt>
<dd style="margin-left: 8">
<br>the same as defined in <a href="#RFC4852">[RFC4852]</a>. An enterprise network is further understood to refer to a cooperative networked collective of devices within a structured IP routing and addressing plan and with a commonality of business, social, political, etc., interests.  Minimally, the only commonality of interest in some enterprise network scenarios may be the cooperative provisioning of connectivity itself.</dd>
<dt>subnetwork</dt>
<dd style="margin-left: 8">
<br>the same as defined in <a href="#RFC3819">[RFC3819]</a>.</dd>
<dt>site</dt>
<dd style="margin-left: 8">
<br>a logical and/or physical grouping of interfaces that connect a topological area less than or equal to an enterprise network in scope. From a network organizational standpoint, a site within an enterprise network can be considered as an enterprise network unto itself.</dd>
<dt>Mobile Ad hoc Network (MANET)</dt>
<dd style="margin-left: 8">
<br>a connected topology of mobile or fixed routers that maintain a routing structure among themselves over links that often have dynamic connectivity properties. The characteristics of MANETs are described in <a href="#RFC2501">[RFC2501]</a>, Section 3, and a wide variety of MANETs share common properties with enterprise networks.</dd>
<dt>enterprise/site/MANET</dt>
<dd style="margin-left: 8">
<br>throughout the remainder of this document, the term "enterprise network" is used to collectively refer to any of {enterprise, site, MANET}, i.e., the VET mechanisms and operational principles can be applied to enterprises, sites, and MANETs of any size or shape.</dd>
<dt>VET link</dt>
<dd style="margin-left: 8">
<br>a virtual link that uses automatic tunneling to create an overlay network that spans an enterprise network routing region. VET links can be segmented (e.g., by filtering gateways) into multiple distinct segments that can be joined together by bridges or IP routers the same as for any link.  Bridging would view the multiple (bridged) segments as a single VET link, whereas IP routing would view the multiple segments as multiple distinct VET links. VET links can further be partitioned into multiple logical areas, where each area is identified by a distinct set of border nodes.</dd>
<dt></dt>
<dd style="margin-left: 8">VET links configured over non-multicast enterprise networks support only Non-Broadcast, Multiple Access (NBMA) services; VET links configured over enterprise networks that support multicast can support both NBMA and native multicast services. All nodes connected to the same VET link appear as neighbors from the standpoint of the inner network layer.</dd>
<dt>Enterprise Router (ER)</dt>
<dd style="margin-left: 8">
<br>As depicted in <a href="#era">Figure 1</a>, an Enterprise Router (ER) is a fixed or mobile router that comprises a router function, a host function, one or more enterprise-interior interfaces, and zero or more internal virtual, enterprise-edge, provider-edge, and VET interfaces. At a minimum, an ER forwards outer IP packets over one or more sets of enterprise-interior interfaces, where each set connects to a distinct enterprise network.</dd>
<dt>VET Border Router (VBR)</dt>
<dd style="margin-left: 8">
<br>an ER that connects end user networks (EUNs) to VET links and/or connects multiple VET links together. A VBR is a tunnel endpoint router, and it configures a separate VET interface for each distinct VET link. All VBRs are also ERs.</dd>
<dt>VET Border Gateway (VBG)</dt>
<dd style="margin-left: 8">
<br>a VBR that connects VET links to provider networks. A VBG may alternately act as a "half-gateway", and forward the packets it receives from neighbors on the VET link to another VBG on the same VET link. All VBGs are also VBRs.</dd>
<dt>VET host</dt>
<dd style="margin-left: 8">any node (host or router) that configures a VET interface for host-operation only. Note that a node may configure some of its VET interfaces as host interfaces and others as router interfaces.</dd>
<dt>VET node</dt>
<dd style="margin-left: 8">
<br>any node (host or router) that configures and uses a VET interface.</dd>
<dt>enterprise-interior interface</dt>
<dd style="margin-left: 8">
<br>an ER's attachment to a link within an enterprise network. Packets sent over enterprise-interior interfaces may be forwarded over multiple additional enterprise-interior interfaces before they reach either their final destination or a border router/gateway.  Enterprise-interior interfaces connect laterally within the IP network hierarchy.</dd>
<dt>enterprise-edge interface</dt>
<dd style="margin-left: 8">
<br>a VBR's attachment to a link (e.g., an Ethernet, a wireless personal area network, etc.) on an arbitrarily complex EUN that the VBR connects to a VET link and/or a provider network. Enterprise-edge interfaces connect to lower levels within the IP network hierarchy.</dd>
<dt>provider-edge interface</dt>
<dd style="margin-left: 8">
<br>a VBR's attachment to the Internet or to a provider network via which the Internet can be reached. Provider-edge interfaces connect to higher levels within the IP network hierarchy.</dd>
<dt>internal-virtual interface</dt>
<dd style="margin-left: 8">
<br>an interface that is internal to a VET node and does not in itself directly attach to a tangible link, e.g., a loopback interface.</dd>
<dt>VET interface</dt>
<dd style="margin-left: 8">
<br>a VET node's attachment to a VET link. VET nodes configure each VET interface over a set of underlying enterprise-interior interfaces that connect to a routing region spanned by a single VET link. When there are multiple distinct VET links (each with their own distinct set of underlying interfaces), the VET node configures a separate VET interface for each link.</dd>
<dt></dt>
<dd style="margin-left: 8">The VET interface encapsulates each inner packet in any mid-layer headers followed by an outer IP header, then forwards the packet on an underlying interface such that the Time to Live (TTL) - Hop Limit in the inner header is not decremented as the packet traverses the link. The VET interface therefore presents an automatic tunneling abstraction that represents the VET link as a single hop to the inner network layer.</dd>
<dt>Provider Aggregated (PA) prefix</dt>
<dd style="margin-left: 8">
<br>a network layer protocol prefix that is delegated to a VET node by a provider network.</dd>
<dt>Provider Independent (PI) prefix</dt>
<dd style="margin-left: 8">
<br>a network layer protocol prefix that is delegated to a VET node by an independent registration authority. The VET node then becomes solely responsible for representing the PI prefix into the global Internet routing system on its own behalf.</dd>
<dt>Client Prefix (CP)</dt>
<dd style="margin-left: 8">
<br>a network layer protocol prefix that is delegated to a VET node by a Virtual Service Provider (VSP) that may operate independently of the node's provider networks. The term "Client Prefix (CP)" is the same as used in IRON <a href="#I-D.templin-ironbis">[I-D.templin-ironbis]</a>.</dd>
<dt>Routing Locator (RLOC)</dt>
<dd style="margin-left: 8">
<br>a public-scope or enterprise-local-scope IP address that can appear in enterprise-interior and/or interdomain routing tables. Public-scope RLOCs are delegated to specific enterprise networks and routable within both the enterprise-interior and interdomain routing regions.  Enterprise-local-scope RLOCs (e.g., IPv6 Unique Local Addresses <a href="#RFC4193">[RFC4193]</a>, IPv4 privacy addresses <a href="#RFC1918">[RFC1918]</a>, etc.) are self-generated by individual enterprise networks and routable only within the enterprise-interior routing region.</dd>
<dt></dt>
<dd style="margin-left: 8">ERs use RLOCs for operating the enterprise-interior routing protocol and for next-hop determination in forwarding packets addressed to other RLOCs. End systems can use RLOCs as addresses for end-to-end communications between peers within the same enterprise network. VET interfaces treat RLOCs as *outer* IP addresses during encapsulation.</dd>
<dt>Endpoint Interface iDentifier (EID)</dt>
<dd style="margin-left: 8">
<br>a public-scope network layer address that is routable within enterprise-edge and/or VET overlay networks. In a pure mapping system, EID prefixes are not routable within the interdomain routing system. In a hybrid routing/mapping system, EID prefixes may be represented within the same interdomain routing instances that distribute RLOC prefixes. In either case, EID prefixes are separate and distinct from any RLOC prefix space, but they are mapped to RLOC addresses to support packet forwarding over VET interfaces.</dd>
<dt></dt>
<dd style="margin-left: 8">VBRs participate in any EID-based routing instances and use EID addresses for next-hop determination. End systems can use EIDs as addresses for end-to-end communications between peers either within the same enterprise network or within different enterprise networks.  VET interfaces treat EIDs as *inner* network layer addresses during encapsulation.</dd>
<dt></dt>
<dd style="margin-left: 8">Note that an EID can also be used as an *outer* network layer address if there are nested encapsulations. In that case, the EID would appear as an RLOC to the innermost encapsulation.</dd>
</dl>
<p id="rfc.section.2.p.4">The following additional acronyms are used throughout the document:</p>
<p id="rfc.section.2.p.5">CGA - Cryptographically Generated Address<br> DHCP(v4, v6) - Dynamic Host Configuration Protocol<br> ECMP - Equal Cost Multi Path<br> EUN - End User Network<br> FIB - Forwarding Information Base<br> ICMP - either ICMPv4 or ICMPv6<br> IP - either IPv4 or IPv6<br> ISATAP - Intra-Site Automatic Tunnel Addressing Protocol<br> NBMA - Non-Broadcast, Multiple Access<br> ND - Neighbor Discovery<br> PIO - Prefix Information Option<br> PRL - Potential Router List<br> PRLNAME - Identifying name for the PRL<br> RIB - Routing Information Base<br> RIO - Route Information Option<br> SCMP - SEAL Control Message Protocol<br> SEAL - Subnetwork Encapsulation and Adaptation Layer<br> SLAAC - IPv6 StateLess Address AutoConfiguration<br> SNS/SNA - SCMP Neighbor Solicitation/Advertisement<br> SRD - SCMP Redirect<br> SRS/SRA - SCMP Router Solicitation/Advertisement</p>
<p id="rfc.section.2.p.6">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">[RFC2119]</a>. When used in lower case (e.g., must, must not, etc.), these words MUST NOT be interpreted as described in <a href="#RFC2119">[RFC2119]</a>, but are rather interpreted as they would be in common English.</p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> <a href="#discuss" id="discuss">Enterprise Network Characteristics</a>
</h1>
<p id="rfc.section.3.p.1">Enterprise networks consist of links that are connected by Enterprise Routers (ERs) as depicted in <a href="#era">Figure 1</a>. ERs typically participate in a routing protocol over enterprise-interior interfaces to discover routes that may include multiple Layer 2 or Layer 3 forwarding hops. VET Border Routers (VBRs) are ERs that connect End User Networks (EUNs) to VET links that span enterprise networks. VET Border Gateways (VBGs) are VBRs that connect VET links to provider networks.</p>
<p id="rfc.section.3.p.2">Conceptually, an ER embodies both a host function and router function, and supports communications according to the weak end-system model <a href="#RFC1122">[RFC1122]</a>. The router function engages in the enterprise-interior routing protocol on its enterprise-interior interfaces, connects any of the ER's EUNs to its VET links, and may also connect the VET links to provider networks (see <a href="#era">Figure 1</a>). The host function typically supports network management applications, but may also support diverse applications typically associated with general-purpose computing platforms.</p>
<p id="rfc.section.3.p.3">An enterprise network may be as simple as a small collection of ERs and their attached EUNs; an enterprise network may also contain other enterprise networks and/or be a subnetwork of a larger enterprise network. An enterprise network may further encompass a set of branch offices and/or nomadic hosts connected to a home office over one or several service providers, e.g., through Virtual Private Network (VPN) tunnels. Finally, an enterprise network may contain many internal partitions that are logical or physical groupings of nodes for the purpose of load balancing, organizational separation, etc. In that case, each internal partition resembles an individual segment of a bridged LAN.</p>
<p id="rfc.section.3.p.4">Enterprise networks that comprise link types with sufficiently similar properties (e.g., Layer 2 (L2) address formats, maximum transmission units (MTUs), etc.) can configure a subnetwork routing service such that the network layer sees the underlying network as an ordinary shared link the same as for a (bridged) campus LAN (this is often the case with large cellular operator networks). In that case, a single network layer hop is sufficient to traverse the underlying network. Enterprise networks that comprise link types with diverse properties and/or configure multiple IP subnets must also provide an enterprise-interior routing service that operates as an IP layer mechanism. In that case, multiple network layer hops may be necessary to traverse the underlying network.</p>
<p id="rfc.section.3.p.5">In addition to other interface types, VET nodes configure VET interfaces that view all other nodes on the VET link as neighbors on a virtual NBMA link. VET nodes configure a separate VET interface for each distinct VET link to which they connect, and discover neighbors on the link that can be used for forwarding packets to off-link destinations.  VET interface neighbor relationships may be either unidirectional or bidirectional.</p>
<p id="rfc.section.3.p.6">A unidirectional neighbor relationship is typically established and maintained as a result of network layer control protocol messaging in a manner that parallels IPv6 neighbor discovery <a href="#RFC4861">[RFC4861]</a>. A bidirectional neighbor relationship is typically established and maintained as result of a short transaction between the neighbors (see: <a href="#tesync">Section 5.6.4</a>).</p>
<p id="rfc.section.3.p.7">For each distinct VET link , a trust basis must be established and consistently applied. For example, for VET links configured over enterprise networks in which VBRs establish symmetric security associations, mechanisms such as IPsec <a href="#RFC4301">[RFC4301]</a> can be used to assure authentication and confidentiality. In other enterprise network scenarios, VET links may require asymmetric securing mechanisms such as SEcure Neighbor Discovery (SEND) <a href="#RFC3971">[RFC3971]</a>. VET links configured over still other enterprise networks may find it sufficient to employ ancillary encapsulations (e.g., SEAL <a href="#I-D.templin-intarea-seal">[I-D.templin-intarea-seal]</a>) that provide minimal authentication services such as source address validation <a href="#I-D.ietf-savi-framework">[I-D.ietf-savi-framework]</a>.</p>
<p id="rfc.section.3.p.8">Finally, for VET links configured over enterprise networks with a centralized management structure (e.g., a corporate campus network, an ISP network, etc.), a hybrid routing/mapping service can be deployed using a synchronized set of VBGs. In that case, the VBGs can provide a "default mapper" <a href="#I-D.jen-apt">[I-D.jen-apt]</a> service used for short-term packet forwarding until route-optimized paths can be established. For VET links configured over enterprise networks with a distributed management structure (e.g., disconnected MANETs), peer-to-peer coordination between the VET nodes themselves without the assistance of VBGs may be required. Recognizing that various use cases may entail a continuum between a fully centralized and fully distributed approach, the following sections present the mechanisms of Virtual Enterprise Traversal as they apply to a wide variety of scenarios.</p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#spec" id="spec">Autoconfiguration</a>
</h1>
<p id="rfc.section.4.p.1">ERs, VBRs, VBGs, and VET hosts configure themselves for operation as specified in the following subsections.</p>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> <a href="#eir" id="eir">Enterprise Router (ER) Autoconfiguration</a>
</h1>
<p id="rfc.section.4.1.p.1">ERs configure enterprise-interior interfaces and engage in any routing protocols over those interfaces.</p>
<p id="rfc.section.4.1.p.2">When an ER joins an enterprise network, it first configures an IPv6 link-local address on each enterprise-interior interface that requires an IPv6 link-local capability and configures an IPv4 link-local address on each enterprise-interior interface that requires an IPv4 link-local capability. IPv6 link-local address generation mechanisms include Cryptographically Generated Addresses (CGAs) <a href="#RFC3972">[RFC3972]</a>, IPv6 Privacy Addresses <a href="#RFC4941">[RFC4941]</a>, StateLess Address AutoConfiguration (SLAAC) using EUI-64 interface identifiers <a href="#RFC4291">[RFC4291]</a> <a href="#RFC4862">[RFC4862]</a>, etc. The mechanisms specified in <a href="#RFC3927">[RFC3927]</a> provide an IPv4 link-local address generation capability.</p>
<p id="rfc.section.4.1.p.3">Next, the ER configures one or more RLOCs and engages in any routing protocols on its enterprise-interior interfaces. The ER can configure RLOCs via administrative configuration, pseudo-random self-generation from a suitably large address pool, SLAAC, DHCP autoconfiguration, or through an alternate autoconfiguration mechanism.</p>
<p id="rfc.section.4.1.p.4">Pseudo-random self-generation of IPv6 RLOCs can be from a large public or local-use IPv6 address range (e.g., IPv6 Unique Local Addresses <a href="#RFC4193">[RFC4193]</a>). Pseudo-random self-generation of IPv4 RLOCs can be from a large public or local-use IPv4 address range (e.g., <a href="#RFC1918">[RFC1918]</a>). When self-generation is used alone, the ER continuously monitors the RLOCs for uniqueness, e.g., by monitoring the enterprise-interior routing protocol. (Note however that anycast RLOCs may be assigned to multiple enterprise-interior interfaces; hence, monitoring for uniqueness applies only to RLOCs that are provisioned as unicast.)</p>
<p id="rfc.section.4.1.p.5">SLAAC autoconfiguration of RLOCs can be through the receipt of IPv6 Router Advertisements (RAs) followed by the stateless configuration of addresses based on any included Prefix Information Options (PIOs) <a href="#RFC4861">[RFC4861]</a><a href="#RFC4862">[RFC4862]</a>.</p>
<p id="rfc.section.4.1.p.6">DHCP autoconfiguration of RLOCs uses standard DHCP procedures, however ERs acting as DHCP clients SHOULD also use DHCP Authentication <a href="#RFC3118">[RFC3118]</a> <a href="#RFC3315">[RFC3315]</a> as discussed further below. In typical enterprise network scenarios (i.e., those with stable links), it may be sufficient to configure one or a few DHCP relays on each link that does not include a DHCP server.  In more extreme scenarios (e.g., MANETs that include links with dynamic connectivity properties), DHCP operation may require any ERs that have already configured RLOCs to act as DHCP relays to ensure that client DHCP requests eventually reach a DHCP server. This may result in considerable DHCP message relaying until a server is located, but the DHCP Authentication Replay Detection vector provides relays with a means for avoiding message duplication.</p>
<p id="rfc.section.4.1.p.7">In all enterprise network scenarios, the amount of DHCP relaying required can be significantly reduced if each relay has a way of contacting a DHCP server directly. In particular, if the relay can discover the unicast addresses for one or more servers (e.g., by discovering the unicast RLOC addresses of VBGs as described in <a href="#ebr1.5">Section 4.2.2</a>) it can forward DHCP requests directly to the unicast address(es) of the server(s). If the relay does not know the unicast address of a server, it can forward DHCP requests to a site-scoped DHCP server multicast address if the enterprise network supports site-scoped multicast services. For DHCPv6, relays can forward requests to the site-scoped IPv6 multicast group address 'All_DHCP_Servers' <a href="#RFC3315">[RFC3315]</a>. For DHCPv4, relays can forward requests to the site-scoped IPv4 multicast group address 'All_DHCPv4_Servers', which SHOULD be set to 239.255.2.1 unless an alternate multicast group for the enterprise network is known. DHCPv4 servers that delegate RLOCs SHOULD therefore join the 'All_DHCPv4_Servers' multicast group and service any DHCPv4 messages received for that group.</p>
<p id="rfc.section.4.1.p.8">A combined approach using both DHCP and self-generation is also possible when the ER configures both a DHCP client and relay that are connected, e.g., via a pair of back-to-back connected Ethernet interfaces, a tun/tap interface, a loopback interface, inter-process communication, etc. The ER first self-generates an RLOC taken from a temporary addressing range used only for the bootstrapping purpose of procuring an actual RLOC taken from a delegated addressing range. The ER then engages in the enterprise-interior routing protocol and performs a DHCP exchange as above using the temporary RLOC as the address of its relay function. When the DHCP server delegates an actual RLOC address/prefix, the ER abandons the temporary RLOC and re-engages in the enterprise-interior routing protocol using an RLOC taken from the delegation.</p>
<p id="rfc.section.4.1.p.9">Alternatively (or in addition to the above), the ER can request RLOC prefix delegations via an automated prefix delegation exchange over an enterprise-interior interface and can assign the prefix(es) on enterprise-edge interfaces. Note that in some cases, the same enterprise-edge interfaces may assign both RLOC and EID addresses if there is a means for source address selection. In other cases (e.g., for separation of security domains), RLOCs and EIDs are assigned on separate sets of enterprise-edge interfaces.</p>
<p id="rfc.section.4.1.p.10">In some enterprise network scenarios (e.g., MANETs that include links with dynamic connectivity properties), assignment of RLOCs on enterprise-interior interfaces as singleton addresses (i.e., as addresses with /32 prefix lengths for IPv4, or as addresses with /128 prefix lengths for IPv6) MAY be necessary to avoid multi-link subnet issues <a href="#RFC4903">[RFC4903]</a>.</p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> <a href="#ebr" id="ebr">VET Border Router (VBR) Autoconfiguration</a>
</h1>
<p id="rfc.section.4.2.p.1">VBRs are ERs that configure and use one or more VET interfaces. In addition to the ER autoconfiguration procedures specified in <a href="#eir">Section 4.1</a>, VBRs perform the following autoconfiguration operations.</p>
<h1 id="rfc.section.4.2.1">
<a href="#rfc.section.4.2.1">4.2.1.</a> <a href="#ebr1" id="ebr1">VET Interface Initialization</a>
</h1>
<p id="rfc.section.4.2.1.p.1">VBRs configure a separate VET interface for each VET link, where each VET link spans a distinct sets of underlying links belonging to the same enterprise network. All nodes on the VET link appear as single-hop neighbors from the standpoint of the inner network layer protocol through the use of encapsulation.</p>
<p id="rfc.section.4.2.1.p.2">The VBR binds each VET interface to one or more underlying interfaces, and uses the underlying interface addresses as RLOCs to serve as the outer source addresses for encapsulated packets. The VBR then assigns a link-local address to each VET interface if necessary. When IPv6 and IPv4 are used as the inner/outer protocols (respectively), the VBR can autoconfigure an IPv6 link-local address on the VET interface using a modified EUI-64 interface identifier based on an IPv4 RLOC address (see Section 2.2.1 of <a href="#RFC5342">[RFC5342]</a>). Link-local address configuration for other inner/outer protocol combinations is through administrative configuration, random self-generation (e.g., <a href="#RFC4941">[RFC4941]</a>, etc.) or through an unspecified alternate method.</p>
<h1 id="rfc.section.4.2.2">
<a href="#rfc.section.4.2.2">4.2.2.</a> <a href="#ebr1.5" id="ebr1.5">Potential Router List (PRL) Discovery</a>
</h1>
<p id="rfc.section.4.2.2.p.1">After initializing the VET interface, the VBR next discovers a Potential Router List (PRL) for the VET link that includes the RLOC addresses of VBGs. The PRL can be discovered through administrative configuration, information conveyed in the enterprise-interior routing protocol, an anycast VBG discovery message exchange, a DHCP option, etc. In multicast-capable enterprise networks, VBRs can also listen for advertisements on the 'rasadv' <a href="#RASADV">[RASADV]</a> multicast group address.</p>
<p id="rfc.section.4.2.2.p.2">When no other information is available, the VBR can resolve an identifying name for the PRL ('PRLNAME') formed as 'hostname.domainname', where 'hostname' is an enterprise-specific name string and 'domainname' is an enterprise-specific Domain Name System (DNS) suffix <a href="#RFC1035">[RFC1035]</a>. The VBR discovers 'PRLNAME' through administrative configuration, the DHCP Domain Name option <a href="#RFC2132">[RFC2132]</a>, 'rasadv' protocol advertisements, link-layer information (e.g., an IEEE 802.11 Service Set Identifier (SSID)), or through some other means specific to the enterprise network. The VBR can also obtain 'PRLNAME' as part of an arrangement with a private-sector Virtual Service Provider (VSP) (see: <a href="#ebr4">Section 4.2.4</a>).</p>
<p id="rfc.section.4.2.2.p.3">In the absence of other information, the VBR sets the 'hostname' component of 'PRLNAME' to "isatapv2" and sets the 'domainname' component to an enterprise-specific DNS suffix (e.g., "example.com"). Isolated enterprise networks that do not connect to the outside world may have no enterprise-specific DNS suffix, in which case the 'PRLNAME' consists only of the 'hostname' component.  (Note that the default hostname "isatapv2" is intentionally distinct from the convention specified in <a href="#RFC5214">[RFC5214]</a>.)</p>
<p id="rfc.section.4.2.2.p.4">After discovering 'PRLNAME', the VBR resolves the name into a list of RLOC addresses through a name service lookup. For centrally managed enterprise networks, the VBR resolves 'PRLNAME' using an enterprise-local name service (e.g., the DNS). For enterprises with no centralized management structure, the VBR resolves 'PRLNAME' using a distributed name service query such as Link-Local Multicast Name Resolution (LLMNR) <a href="#RFC4795">[RFC4795]</a> over the VET interface. In that case, all VBGs in the PRL respond to the query, and the VBR accepts the union of all responses.</p>
<h1 id="rfc.section.4.2.3">
<a href="#rfc.section.4.2.3">4.2.3.</a> <a href="#ebr3" id="ebr3">Provider-Aggregated (PA) EID Prefix Autoconfiguration</a>
</h1>
<p id="rfc.section.4.2.3.p.1">VBRs that connect their enterprise networks to a provider network can obtain Provider-Aggregated (PA) EID prefixes through stateful and/or stateless autoconfiguration mechanisms. The stateful and stateless approaches are discussed in the following subsections.</p>
<h1 id="rfc.section.4.2.3.1">
<a href="#rfc.section.4.2.3.1">4.2.3.1.</a> Stateful Prefix Delegation</h1>
<p id="rfc.section.4.2.3.1.p.1">For IPv4, VBRs acquire IPv4 PA EID prefixes through administrative configuration, an automated IPv4 prefix delegation exchange, etc.</p>
<p id="rfc.section.4.2.3.1.p.2">For IPv6, VBRs acquire IPv6 PA EID prefixes through administrative configuration or through DHCPv6 Prefix Delegation exchanges with a VBG acting as a DHCP relay/server. In particular, the VBR (acting as a requesting router) can use DHCPv6 prefix delegation <a href="#RFC3633">[RFC3633]</a> over the VET interface to obtain prefixes from the VBG (acting as a delegating router).  The VBR obtains prefixes using either a 2-message or 4-message DHCPv6 exchange <a href="#RFC3315">[RFC3315]</a>. When the VBR acts as a DHCPv6 client, it maps the IPv6 "All_DHCP_Relay_Agents_and_Servers" link- scoped multicast address to the VBG's outer RLOC address.</p>
<p id="rfc.section.4.2.3.1.p.3">To perform the 2-message exchange, the VBR's DHCPv6 client function can send a Solicit message with an IA_PD option either directly or via the VBR's own DHCPv6 relay function (see <a href="#eir">Section 4.1</a>). The VBR's VET interface then forwards the message using VET encapsulation (see: Section 5.4) to a VBG which either services the request or relays it further. The forwarded Solicit message will elicit a Reply message from the server containing prefix delegations. The VBR can also propose a specific prefix to the DHCPv6 server per Section 7 of <a href="#RFC3633">[RFC3633]</a>. The server will check the proposed prefix for consistency and uniqueness, then return it in the Reply message if it was able to perform the delegation.</p>
<p id="rfc.section.4.2.3.1.p.4">After the VBR receives IPv4 and/or IPv6 prefix delegations, it can provision the prefixes on enterprise-edge interfaces as well as on other VET interfaces configured over child enterprise networks for which it acts as a VBG. The VBR can also provision the prefixes on enterprise-interior interfaces to service directly-attached hosts on the enterprise-interior link.</p>
<p id="rfc.section.4.2.3.1.p.5">The prefix delegations remain active as long as the VBR continues to renew them via the delegating VBG before lease lifetimes expire. The lease lifetime also keeps the delegation state active even if communications between the VBR and delegating VBG are disrupted for a period of time (e.g., due to an enterprise network partition, power failure, etc.). Note however that if the VBR abandons or otherwise loses continuity with the prefixes, it may be obliged to perform network-wide renumbering if it subsequently receives a new and different set of prefixes.</p>
<p id="rfc.section.4.2.3.1.p.6">Stateful prefix delegation for non-IP protocols is out of scope.</p>
<h1 id="rfc.section.4.2.3.2">
<a href="#rfc.section.4.2.3.2">4.2.3.2.</a> <a href="#stateless" id="stateless">Stateless Prefix Delegation</a>
</h1>
<p id="rfc.section.4.2.3.2.p.1">When IPv6 and IPv4 are used as the inner and outer protocols, respectively, a stateless IPv6 PA prefix delegation capability is available using the mechanisms specified in <a href="#RFC5214">[RFC5214]</a><a href="#RFC5569">[RFC5569]</a><a href="#RFC5969">[RFC5969]</a>. VBRs can use these mechanisms to statelessly configure IPv6 PA prefixes that embed one of the VBR's IPv4 RLOCs.</p>
<p id="rfc.section.4.2.3.2.p.2">Using this stateless prefix delegation, if the IPv4 RLOC changes the IPv6 prefix also changes and the VBR is obliged to renumber any interfaces on which sub-prefixes from the delegated prefix are assigned. This method may therefore be most suitable for enterprise networks in which IPv4 RLOC assignments rarely change, or in enterprise networks in which only services that do not depend on a long-term stable IPv6 prefix (e.g., client-side web browsing) are used.</p>
<p id="rfc.section.4.2.3.2.p.3">Stateless prefix delegation for other protocol combinations is out of scope.</p>
<h1 id="rfc.section.4.2.4">
<a href="#rfc.section.4.2.4">4.2.4.</a> <a href="#ebr4" id="ebr4">ISP-Independent EID Prefix Autoconfiguration</a>
</h1>
<p id="rfc.section.4.2.4.p.1">VBRs can acquire ISP-independent prefixes to facilitate multihoming, mobility and traffic engineering without requiring site-wide renumbering events due to a change in ISP connections.</p>
<p id="rfc.section.4.2.4.p.2">VBRs that connect major enterprise networks (e.g., large corporations, academic campuses, ISP networks, etc.) to the global Internet can acquire short Provider-Independent (PI) prefixes (e.g., an IPv6 ::/32, an IPv4 /16, etc.) through a registration authority such as the Internet Assigned Numbers Authority (IANA) or a major regional Internet registry. The VBR then advertises the PI prefixes into the global Internet on the behalf of its enterprise network without the assistance of an ISP.</p>
<p id="rfc.section.4.2.4.p.3">VBRs that connect enterprise networks to a provider network can acquire longer Client Prefixes (CPs) (e.g., an IPv6 ::/56, an IPv4 /24, etc.) through arrangements with a Virtual Service Provider (VSP) that may or may not be associated with a specific ISP. The VBR then coordinates its CPs with a VSP independently of any of its directly attached ISPs. (In many cases, the "VSP" may in fact be a major enterprise network that delegates CPs from its PI prefixes.)</p>
<p id="rfc.section.4.2.4.p.4">After a VBR receives prefix delegations, it can sub-delegate portions of the prefixes on enterprise-edge interfaces, on child VET interfaces for which it is configured as a VBG and on enterprise-interior interfaces to service directly-attached hosts on the enterprise-interior link. The VBR can also sub-delegate portions of its prefixes to requesting routers connected to child enterprise networks. These requesting routers consider their sub-delegated prefixes as PA, and consider the delegating routers as their points of connection to a provider network.</p>
<h1 id="rfc.section.4.3">
<a href="#rfc.section.4.3">4.3.</a> <a href="#ebg" id="ebg">VET Border Gateway (VBG) Autoconfiguration</a>
</h1>
<p id="rfc.section.4.3.p.1">VBGs are VBRs that connect VET links configured over child enterprise networks to provider networks via provider-edge interfaces and/or via VET links configured over parent enterprise networks. A VBG may also act as a "half-gateway", in that it may need to forward the packets it receives from neighbors on the VET link via another VBG associated with the same VET link. This arrangement is seen in the IRON <a href="#I-D.templin-ironbis">[I-D.templin-ironbis]</a> Client/Server/Relay architecture, in which a Server "half-gateway" is a VBG that forwards packets with enterprise-external destinations via a Relay "half-gateway" that connects the VET link to the provider network.</p>
<p id="rfc.section.4.3.p.2">VBGs autoconfigure their provider-edge interfaces in a manner that is specific to the provider connections, and they autoconfigure their VET interfaces that were configured over parent VET links using the VBR autoconfiguration procedures specified in <a href="#ebr">Section 4.2</a>. For each of its VET interfaces connected to child VET links, the VBG initializes the interface the same as for an ordinary VBR (see <a href="#ebr1">Section 4.2.1</a>). It then arranges to add one or more of its RLOCs associated with the child VET link to the PRL.</p>
<p id="rfc.section.4.3.p.3">VBGs configure a DHCP relay/server on VET interfaces connected to child VET links that require DHCP services. VBGs may also engage in an unspecified anycast VBG discovery message exchange if they are configured to do so. Finally, VBGs respond to distributed name service queries for 'PRLNAME' on VET interfaces connected to VET links that span child enterprise networks with a distributed management structure.</p>
<h1 id="rfc.section.4.4">
<a href="#rfc.section.4.4">4.4.</a> <a href="#host" id="host">VET Host Autoconfiguration</a>
</h1>
<p id="rfc.section.4.4.p.1">Nodes that cannot be attached via a VBR's enterprise-edge interface (e.g., nomadic laptops that connect to a home office via a Virtual Private Network (VPN)) can instead be configured for operation as a simple host on the VET link. Each VET host performs the same enterprise interior interface RLOC configuration procedures as specified for ERs in <a href="#eir">Section 4.1</a>. The VET host next performs the same VET interface initialization and PRL discovery procedures as specified for VBRs in <a href="#ebr">Section 4.2</a>, except that it configures its VET interfaces as host interfaces (and not router interfaces). Note also that a node may be configured as a host on some VET interfaces and as a VBR/VBG on other VET interfaces.</p>
<p id="rfc.section.4.4.p.2">A VET host may receive non-link-local addresses and/or prefixes to assign to the VET interface via DHCP exchanges and/or through SLAAC information conveyed in RAs. If prefixes are provided, however, there must be assurance that either 1) the VET link will not partition, or 2) that each VET host interface connected to the VET link will configure a unique set of prefixes. VET hosts therefore depend on DHCP and/or RA exchanges to provide only addresses/prefixes that are appropriate for assignment to the VET interface according to these specific cases, and depend on the VBGs within the enterprise keeping track of which addresses/prefixes were assigned to which hosts.</p>
<p id="rfc.section.4.4.p.3">When the VET host solicits a DHCP-assigned EID address/prefix over a (non-multicast) VET interface, it maps the DHCP relay/server multicast inner destination address to the outer RLOC address of a VBG that it has selected as a default router. The VET host then assigns any resulting DHCP-delegated addresses/prefixes to the VET interface for use as the source address of inner packets. The host will subsequently send all packets destined to EID correspondents via a default router on the VET link, and may discover more-specific routes based on any redirect messages it receives.</p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> Internetworking Operation</h1>
<p id="rfc.section.5.p.1">Following the autoconfiguration procedures specified in <a href="#spec">Section 4</a>, ERs, VBRs, VBGs, and VET hosts engage in normal internetworking operations as discussed in the following sections.</p>
<h1 id="rfc.section.5.1">
<a href="#rfc.section.5.1">5.1.</a> <a href="#mnr7.5" id="mnr7.5">Routing Protocol Participation</a>
</h1>
<p id="rfc.section.5.1.p.1">ERs engage in any RLOC-based routing protocols over enterprise-interior interfaces to exchange routing information for forwarding IP packets with RLOC addresses. VBRs and VBGs can additionally engage in any EID-based routing protocols over VET, enterprise-edge and provider-edge interfaces to exchange routing information for forwarding inner network layer packets with EID addresses. Note that any EID-based routing instances are separate and distinct from any RLOC-based routing instances.</p>
<p id="rfc.section.5.1.p.2">VBR/VBG routing protocol participation on non-multicast VET interfaces uses the NBMA interface model, e.g., in the same manner as for OSPF over NBMA interfaces <a href="#RFC5340">[RFC5340]</a>. (VBR/VBG routing protocol participation on multicast-capable VET interfaces can alternatively use the standard multicast interface model, but this may result in excessive multicast control message overhead.)</p>
<p id="rfc.section.5.1.p.3">VBRs can use the list of VBGs in the PRL (see: <a href="#ebr1">Section 4.2.1</a>) as an initial list of neighbors for EID-based routing protocol participation. VBRs can alternatively use the list of VBGs as potential default routers instead of engaging in an EID-based routing protocol instance. In that case, when the VBR forwards a packet via a VBG it may receive a redirect message indicating a different VET node as a better next hop.</p>
<h1 id="rfc.section.5.1.1">
<a href="#rfc.section.5.1.1">5.1.1.</a> <a href="#mnr7.75" id="mnr7.75">PI Prefix Routing Considerations</a>
</h1>
<p id="rfc.section.5.1.1.p.1">VBRs that connect large enterprise networks to the global Internet advertise their EID PI prefixes directly into the Internet default-free RIB via the Border Gateway Protocol (BGP) <a href="#RFC4271">[RFC4271]</a> on their own behalf the same as for a major service provider network. VBRs that connect large enterprise networks to provider networks can instead advertise their EID PI prefixes into their providers' routing system(s) if the provider networks are configured to accept them.</p>
<h1 id="rfc.section.5.1.2">
<a href="#rfc.section.5.1.2">5.1.2.</a> <a href="#mnr7.8" id="mnr7.8">Client Prefix (CP) Routing Considerations</a>
</h1>
<p id="rfc.section.5.1.2.p.1">VBRs that obtain CPs from a VSP can register them with a serving VBG in the VSP's network (e.g., through a vendor-specific short TCP transaction). The VSP network then acts as a virtual "home" enterprise network that connects its customer enterprise networks to the Internet routing system. The customer enterprise networks in turn appear as mobile components of the VSP's network, while the customer network uses its ISP connections solely as transits. (In many cases, the "VSP" may itself be a major enterprise network that delegates CPs from its PI prefixes to child enterprise networks.)</p>
<h1 id="rfc.section.5.2">
<a href="#rfc.section.5.2">5.2.</a> <a href="#defrte" id="defrte">Default Route Configuration and Selection</a>
</h1>
<p id="rfc.section.5.2.p.1">Configuration of default routes in the presence of VET interfaces must be carefully coordinated according to the inner and outer network protocols. If the inner and outer protocols are different (e.g., IPv6 within IPv4) then default routes of the inner protocol version can be configured with next-hops corresponding to default routers on a VET interface while default routes of the outer protocol version can be configured with next-hops corresponding to default routers on an underlying interface.</p>
<p id="rfc.section.5.2.p.2">If the inner and outer protocols are the same (e.g., IPv4 within IPv4), care must be taken in setting the default route to avoid ambiguity. For example, if default routes are configured on the VET interface then more-specific routes could be configured on underlying interfaces to avoid looping. Alternatively, multiple default routes can be configured with some having next-hops corresponding to (EID-based) default routers on VET interfaces and others having next-hops corresponding to (RLOC-based) default routers on underlying interfaces. In that case, special next-hop determination rules must be used (see: Section 5.4).</p>
<h1 id="rfc.section.5.3">
<a href="#rfc.section.5.3">5.3.</a> Address Selection</h1>
<p id="rfc.section.5.3.p.1">When permitted by policy and supported by enterprise-interior routing, VET nodes can avoid encapsulation through communications that directly invoke the outer IP protocol using RLOC addresses instead of EID addresses for end-to-end communications. For example, an enterprise network that provides native IPv4 intra-enterprise services can provide continued support for native IPv4 communications even when encapsulated IPv6 services are available for inter-enterprise communications.</p>
<p id="rfc.section.5.3.p.2">In other enterprise network scenarios, the use of EID-based communications (i.e., instead of RLOC-based communications) may be necessary and/or beneficial to support address scaling, transparent Network Address Translator (NAT) traversal, security domain separation, site multihoming, traffic engineering, etc. .</p>
<p id="rfc.section.5.3.p.3">VET nodes can use source address selection rules (e.g., based on name service information) to determine whether to use EID-based or RLOC-based addressing. The remainder of this section discusses internetworking operation for EID-based communications using the VET interface abstraction.</p>
<h1 id="rfc.section.5.4">
<a href="#rfc.section.5.4">5.4.</a> <a href="#nexthop" id="nexthop">Next Hop Determination</a>
</h1>
<p id="rfc.section.5.4.p.1">VET nodes perform normal next-hop determination via longest prefix match, and send packets according to the most-specific matching entry in the FIB. If the FIB entry has multiple next-hop addresses, the VET node selects the next-hop with the best metric value. If multiple next hops have the same metric value, the VET node can use Equal Cost Multi Path (ECMP) to forward different flows via different next-hop addresses, where flows are determined, e.g., by computing a hash of the inner packet's source address, destination address and flow label fields.</p>
<p id="rfc.section.5.4.p.2">If the VET node has multiple default routes of the same inner and outer protocol versions, with some corresponding to EID-based default routers and others corresponding to RLOC-based default routers, it must perform source address based selection of a default route. In particular, if the packet's source address is taken from an EID prefix the VET node selects a default route configured over the VET interface; otherwise, it selects a default route configured over an underlying interface.</p>
<p id="rfc.section.5.4.p.3">As a last resort when there is no matching entry in the FIB (i.e., not even default), VET nodes can discover neighbors within the enterprise network through on-demand name service queries for the packet's destination address (or, by some other inner address to outer address mapping distribution system). For example, for the IPv6 destination address '2001:DB8:1:2::1' and 'PRLNAME' "isatapv2.example.com" the VET node can perform a name service lookup for the domain name:<br> '1.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.2.0.0.0.1.0.0.0.8.b.d.0.1.0.0.2.ip6.isatapv2.example.com'.</p>
<p id="rfc.section.5.4.p.4">The name service can employ wildcard matching (e.g., <a href="#RFC4592">[RFC4592]</a>) to determine the most-specific matching entry. For example, if the most-specific prefix that covers the IPv6 destination address is '2001:DB8:1::/48' the matching entry is:</p>
<p id="rfc.section.5.4.p.5">'*.1.0.0.0.8.b.d.0.1.0.0.2.ip6.isatapv2.example.com'.</p>
<p id="rfc.section.5.4.p.6">If the name-service lookup succeeds, it will return RLOC addresses (e.g., in DNS A records) that correspond to neighbors to which the VET node can forward packets.</p>
<p id="rfc.section.5.4.p.7">Name-service lookups in enterprise networks with a centralized management structure use an infrastructure-based service, e.g., an enterprise-local DNS. Name-service lookups in enterprise networks with a distributed management structure and/or that lack an infrastructure-based name service instead use a distributed name service such as LLMNR over the VET interface. When a distributed name service is used, the VBR that performs the lookup sends a multicast query and accepts the union of all replies it receives from neighbors on the VET interface. When a VET node receives the query, it responds IFF it aggregates an IP prefix that covers the prefix in the query.</p>
<h1 id="rfc.section.5.5">
<a href="#rfc.section.5.5">5.5.</a> <a href="#operation" id="operation">VET Interface Encapsulation/Decapsulation</a>
</h1>
<p id="rfc.section.5.5.p.1">VET interfaces encapsulate inner network layer packets in any necessary mid-layer headers and trailers (e.g., IPsec, SEAL, etc.) followed by an outer transport-layer header such as UDP (if necessary) followed by an outer IP header. Following all encapsulations, the VET interface submits the encapsulated packet to the outer IP forwarding engine for transmission on an underlying interface. The following sections provide further details on encapsulation:</p>
<h1 id="rfc.section.5.5.1">
<a href="#rfc.section.5.5.1">5.5.1.</a> <a href="#osi" id="osi">Inner Network Layer Protocol</a>
</h1>
<p id="rfc.section.5.5.1.p.1">The inner network layer protocol sees the VET interface as an ordinary network interface, and views the outer network layer protocol as an ordinary L2 transport. The inner- and outer network layer protocol types are mutually independent and can be used in any combination. Inner network layer protocol types include IPv6 <a href="#RFC2460">[RFC2460]</a> and IPv4 <a href="#RFC0791">[RFC0791]</a>, but they may also include non-IP protocols such as OSI/CLNP <a href="#RFC0994">[RFC0994]</a><a href="#RFC1070">[RFC1070]</a><a href="#RFC4548">[RFC4548]</a>.</p>
<h1 id="rfc.section.5.5.2">
<a href="#rfc.section.5.5.2">5.5.2.</a> <a href="#seal" id="seal">SEAL Encapsulation</a>
</h1>
<p id="rfc.section.5.5.2.p.1">VET interfaces that use SEAL encapsulate the inner packet in a SEAL header/trailer as specified in <a href="#I-D.templin-intarea-seal">[I-D.templin-intarea-seal]</a>. SEAL encapsulation must be applied uniformly between all neighbors on the VET link. Note that when a VET node sends a SEAL-encapsulated packet to a neighbor that does not use SEAL encapsulation, it may receive an ICMP "port unreachable" or "protocol unreachable" message.</p>
<p id="rfc.section.5.5.2.p.2">VET interfaces use SEAL encapsulation on VET links that require path MTU mitigations due to encapsulation overhead and/or mechanisms for VET interface neighbor coordination and error message handling.  When SEAL encapsulation is used, the VET interface sets the 'NEXTHDR' value in the SEAL header to the IP protocol number associated with the protocol number of the inner network layer. The VET interface sets the other fields in the SEAL header as specified in <a href="#I-D.templin-intarea-seal">[I-D.templin-intarea-seal]</a>.</p>
<h1 id="rfc.section.5.5.3">
<a href="#rfc.section.5.5.3">5.5.3.</a> <a href="#UDP" id="UDP">Outer Transport-Layer Header Encapsulation</a>
</h1>
<p id="rfc.section.5.5.3.p.1">Following SEAL encapsulation, VET interfaces that use a transport layer encapsulation such as UDP add an outer transport layer header.  Inclusion of an outer UDP header must be applied uniformly between all neighbors on the VET link. Note that when a VET node sends a UDP-encapsulated packet to a neighbor that does not recognize the UDP port number, it may receive an ICMP "port unreachable" message.</p>
<p id="rfc.section.5.5.3.p.2">VET interfaces use UDP encapsulation on VET links that may traverse NATs and/or traffic conditioning network gear (e.g., Equal Cost MultiPath (ECMP) routers, Link Aggregation Gateways (LAGs), etc.) that only recognize well-known network layer protocols. When UDP encapsulation is used, the VET interface encapsulates the mid-layer packet in an outer UDP header then sets the UDP port numbers as specified for the outermost mid-layer protocol (e.g., IPsec <a href="#RFC3947">[RFC3947]</a><a href="#RFC3948">[RFC3948]</a>, etc.).</p>
<p id="rfc.section.5.5.3.p.3">When SEAL encapsulation <a href="#I-D.templin-intarea-seal">[I-D.templin-intarea-seal]</a> is also used, the VET interface maintains per-neighbor local and remote UDP port numbers.  For bidirectional neighbors, the VET interface sets the local UDP port number to the value reserved for SEAL and sets the remote UDP port number to the observed UDP source port number in packets that it receives from the neighbor. In cases in which one of the bidirectional neighbors is behind a NAT, this implies that the one behind the NAT initiates the neighbor relationship. If both neighbors have a way of knowing that there are no NATs in the path, then they may select and set port numbers as for unidirectional neighbors.</p>
<p id="rfc.section.5.5.3.p.4">For unidirectional neighbors, the VET interface sets both the local and remote UDP port numbers to the value reserved for SEAL, and additionally selects a small set of dynamic port number values for use as additional local UDP port numbers. The VET interface then selects one of this set of local port numbers for the UDP source port for each inner packet it sends, where the port number can be determined e.g., by a hash calculated over the inner network layer addresses and inner transport layer port numbers. The VET interface uses a hash function of its own choosing when selecting a dynamic port number value, but it should choose a function that provides uniform distribution between the set of values, and it should be consistent in the manner in which the hash is applied.</p>
<p id="rfc.section.5.5.3.p.5">Finally, for VET links configured over IPv4 enterprise networks, the TE sets the UDP checksum field to zero. For VET links configured over IPv6 enterprise networks, considerations for setting the UDP checksum are discussed in <a href="#I-D.ietf-6man-udpzero">[I-D.ietf-6man-udpzero]</a>. If SEAL encapsulation is used, the TE sets the UDP checksum field to zero regardless of the IP protocol version, since SEAL provides an integrity check vector that covers the leading 128 bytes of the packet beginning with the UDP header.</p>
<h1 id="rfc.section.5.5.4">
<a href="#rfc.section.5.5.4">5.5.4.</a> <a href="#encaps" id="encaps">Outer IP Header Encapsulation</a>
</h1>
<p id="rfc.section.5.5.4.p.1">Following any mid-layer and/or UDP encapsulations, the VET interface adds an outer IP header. Outer IP header construction is the same as specified for ordinary IP encapsulation (e.g., <a href="#RFC1070">[RFC1070]</a><a href="#RFC2003">[RFC2003]</a><a href="#RFC2473">,</a> <cite title="NONE">[RFC2473]</cite><a href="#RFC4213">, </a> <cite title="NONE">[RFC4213]</cite>, etc.) except that the "TTL/Hop Limit", "Type of Service/Traffic Class" and "Congestion Experienced" values in the inner network layer header are copied into the corresponding fields in the outer IP header. The VET interface also sets the IP protocol number to the appropriate value for the first protocol layer within the encapsulation (e.g., UDP, SEAL, IPsec, etc.). When IPv6 is used as the outer IP protocol, the VET interface sets the flow label value in the outer IPv6 header the same as described in <a href="#I-D.carpenter-flow-ecmp">[I-D.carpenter-flow-ecmp]</a>.</p>
<h1 id="rfc.section.5.5.5">
<a href="#rfc.section.5.5.5">5.5.5.</a> <a href="#decaps" id="decaps">Decapsulation and Re-Encapsulation</a>
</h1>
<p id="rfc.section.5.5.5.p.1">When a VET node receives an encapsulated packet, it retains the outer headers, processes the SEAL header (if present) as specified in <a href="#I-D.templin-intarea-seal">[I-D.templin-intarea-seal]</a>, then performs next hop determination on the packet's inner destination address. If the inner packet will be forwarded out a different interface than it arrived on, the VET node copies the "Congestion Experienced" value in the outer IP header into the corresponding field in the inner network layer header. The VET node then forwards the packet to the next inner network layer hop, or delivers the packet locally if the inner packet is addressed to itself.</p>
<p id="rfc.section.5.5.5.p.2">If the inner packet will be forwarded out the same VET interface that it arrived on, however, the VET node copies the "TTL/Hop Limit", "Type of Service/Traffic Class" and "Congestion Experienced" values in the outer IP header of the received packet into the corresponding fields in the outer IP header of the packet to be forwarded (i.e., the values are transferred between outer headers and *not* copied from the inner network layer header). This is true even if the outer IP protocol version of the received packet is different than the outer IP protocol version of the packet to be forwarded, i.e., the same as for bridging dissimilar L2 media segments. This re-encapsulation procedure is necessary to support diagnostic functions (e.g., 'traceroute'), and to ensure that the TTL/Hop Limit eventually decrements to 0 in case of transient routing loops.</p>
<h1 id="rfc.section.5.6">
<a href="#rfc.section.5.6">5.6.</a> <a href="#v6brdisc" id="v6brdisc">Neighbor Coordination on VET Interfaces that use SEAL</a>
</h1>
<p id="rfc.section.5.6.p.1">VET interfaces that use SEAL use the SEAL Control Message Protocol (SCMP) as specified in Section 4.6 of <a href="#I-D.templin-intarea-seal">[I-D.templin-intarea-seal]</a> to coordinate reachability, routing information, and mappings between the inner and outer network layer protocols. SCMP parallels the IPv6 Neighbor Discovery (ND) <a href="#RFC4861">[RFC4861]</a> and ICMPv6 <a href="#RFC4443">[RFC4443]</a> protocols, but operates from within the tunnel and supports operation for any combinations of inner and outer network layer protocols.</p>
<p id="rfc.section.5.6.p.2">When a VET interface that uses SEAL prepares a neighbor coordination SCMP message, the message is formatted the same as described for the corresponding IPv6 ND message, except that the message is preceded by a SEAL header the same as for SCMP error messages. The interface sets the SEAL header flags to (C=1; P=1; R=0; T=0; U=0; Z=0). The interface then sets the NEXTHDR field to 0 the same as for SEAL error messages, sets the LINK_ID and PKT_ID values to values appropriate for the neighbor, sets LEVEL to an appropriate maximum nesting level value, and sets PREFLEN to the length of the prefix that appears in the PREFIX field.</p>
<p id="rfc.section.5.6.p.3">The VET interface next writes an inner network layer prefix into the PREFIX field. The PREFIX is used to identify the source VET node when the target VET node cannot unambiguously identify the source by its outer network layer addresses (e.g., when the source VET node is behind a NAT, when the source is mobile, etc.).</p>
<p id="rfc.section.5.6.p.4">The VET interface next fills out the SCMP message header fields the same as for SCMP error messages, calculates the SCMP message Checksum, encapsulates the message in the requisite outer heders, then calculates the SEAL header Integrity Check Vector (ICV1) value. The VET interface finally sends the message to the neighbor.</p>
<p id="rfc.section.5.6.p.5">VET and SEAL are specifically designed for encapsulation of inner network layer payloads over outer IPv4 and IPv6 networks as a link layer. VET interfaces that use SCMP therefore require a new Source/Target Link-Layer Address Option (S/TLLAO) format that encapsulates IPv4 addresses as shown in <a href="#v4llao">Figure 2</a> and IPv6 addresses as shown in <a href="#v6llao">Figure 3</a>:</p>
<div id="#rfc.figure.2"></div>
<div id="#v4llao"></div>
<pre> 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    Type = 2   |   Length = 1  |          Reserved             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                  IPv4 address (bytes 0 thru 3)                |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</pre>
<p></p>
<div id="#rfc.figure.3"></div>
<div id="#v6llao"></div>
<pre> 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    Type = 2   |   Length = 3  |          Reserved             |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                            Reserved                           |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|               IPv6 address (bytes 0 thru 3)                   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|               IPv6 address (bytes 4 thru 7)                   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|               IPv6 address (bytes 8 thru 11)                  |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|               IPv6 address (bytes 12 thru 15)                 |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+</pre>
<p></p>
<p id="rfc.section.5.6.p.8">The following subsections discuss VET interface neighbor coordination using SCMP:</p>
<h1 id="rfc.section.5.6.1">
<a href="#rfc.section.5.6.1">5.6.1.</a> <a href="#ebgdisc" id="ebgdisc">Router Discovery</a>
</h1>
<p id="rfc.section.5.6.1.p.1">VET hosts and VBRs can send SCMP Router Solicitation (SRS) messages to one or more VBGs in the PRL to receive solicited SCMP Router Advertisements (SRAs).</p>
<p id="rfc.section.5.6.1.p.2">When a VBG receives an SRS message on a VET interface, it prepares a solicited SRA message. The SRA includes Router Lifetimes, Default Router Preferences, PIOs and any other options/parameters that the VBG is configured to include.</p>
<p id="rfc.section.5.6.1.p.3">The VBG finally includes one or more SLLAOs formatted as specified above that encode the IPv6 and/or IPv4 RLOC unicast addresses of its own enterprise-interior interfaces or the enterprise-interior interfaces of other nearby VBGs.</p>
<h1 id="rfc.section.5.6.2">
<a href="#rfc.section.5.6.2">5.6.2.</a> Neighbor Unreachability Detection</h1>
<p id="rfc.section.5.6.2.p.1">VET nodes perform Neighbor Unreachability Detection (NUD) by monitoring hints of forward progress. The VET node can periodically set the 'A' bit in the header of SEAL data packets to elicit SCMP responses from the neighbor. The VET node can also send SCMP Neighbor Solicitation (SNS) messages to the neighbor to elicit SCMP Neighbor Advertisement (SNA) messages.</p>
<p id="rfc.section.5.6.2.p.2">Responsiveness to routing changes is directly related to the delay in detecting that a neighbor has gone unreachable. In order to provide responsiveness comparable to dynamic routing protocols, a reasonably short neighbor reachable time (e.g., 5sec) SHOULD be used.</p>
<p id="rfc.section.5.6.2.p.3">Additionally, a VET node may receive outer IP ICMP "Destination Unreachable; net / host unreachable" messages from an ER on the path indicating that the path to a neighbor may be failing. The VET node SHOULD first check the packet-in-error to obtain reasonable assurance that the ICMP message is authentic. If the node receives excessive ICMP unreachable errors through multiple RLOCs associated with the same FIB entry, it SHOULD delete the FIB entry and allow subsequent packets to flow through a different route (e.g., a default route with a VBG as the next hop).</p>
<h1 id="rfc.section.5.6.3">
<a href="#rfc.section.5.6.3">5.6.3.</a> <a href="#ebrdisc" id="ebrdisc">Redirection</a>
</h1>
<p id="rfc.section.5.6.3.p.1">The VET node connected to the source EUN (i.e., the source VET node) can set R=1 in the SEAL header of a data packet to be forwarded as a "predirect" indication that SCMP Redirect (SRD) messages will be accepted from the VET node connected to the destination EUN (i.e., the target VET node). Each VBG on the VET interface chain to the target preserves the state of the R bit when it re-encapsulates and forwards the packet.</p>
<p id="rfc.section.5.6.3.p.2">When the target VET node receives the predirect indication, it returns an SRD message similar to the manner described in AERO <a href="#I-D.templin-aero">[I-D.templin-aero]</a>. The SRD message is formatted the same as for an ICMPv6 Redirect message as shown in Section 4.5 of<a href="#RFC4861">[RFC4861]</a>. The target includes Target Link Layer Address Options (TLLAOs) formatted as specified above, then adds a Redirected Header Option (RHO) that includes the leading portion of the SEAL data packet that triggered the redirection event beginning immediately following the SEAL header.</p>
<p id="rfc.section.5.6.3.p.3">The target VET node then creates a 128-bit secret key value (T_Key) that it will use to validate the SEAL header ICV in future packets it will receive from the (redirected) source VET node. The target encrypts T_Key with the secret key it uses to validate the ICV in SEAL packets received from the previous VET interface hop (P_Key(N)). It then writes the encrypted value in the "Target" field of the SRD message, i.e., instead of an IPv6 address.</p>
<p id="rfc.section.5.6.3.p.4">The target VET node then encapsulates the SRD message in a SEAL header as specified above, except that it sets P=0 and does not include a PREFIX field. The target also writes the prefix length associated with the inner destination address of the SEAL data packet that triggered the redirection event in the PREFLEN field of the SEAL header. For example, if the destination address is 2001:db8::1 and the destination prefix is 2001:db8::/48, the target sets the PREFLEN field to the value 48. The target then calculates the SEAL ICVs and returns the message to the previous hop VBG on the chain toward the source.</p>
<p id="rfc.section.5.6.3.p.5">When the target returns the SRD message, each intermediate VBG in the chain toward the source relays the message by examining the source address of the inner packet within the RHO to determine the previous hop toward the source. Each intermediate VBG in the chain verifies the SRD message SEAL ICVs and decrypts the T_Key value in the SRD message "Target" field using its own secret key (P_Key(i)).  The VBG then re-encrypts T_Key using the key corresponding to the next hop toward the source (P_Key(i-1)), then re-calculates the SEAL ICVs and sends the SRD message to the previous hop. This relaying process is the same as for SCMP error message relaying specified in Section 4.6 of <a href="#I-D.templin-intarea-seal">[I-D.templin-intarea-seal]</a>.</p>
<p id="rfc.section.5.6.3.p.6">When the source VET node receives the SRD message, it discovers both the PREFLEN and candidate link layer addresses for this new (unidirectional) target VET node. The source node also caches the T_Key value, and uses it to calculate the ICVs it will include in the SEAL header/trailer of subsequent packets it sends to the target.</p>
<p id="rfc.section.5.6.3.p.7">The source then applies the PREFLEN to the inner destination address of the packet that triggered the redirection event, then installs the resulting prefix in a forwarding table entry with the target as the next hop.</p>
<p id="rfc.section.5.6.3.p.8">The source can subsequently send packets destined to an address covered by the destination prefix using SEAL encapsulation via the target as the next hop. The target can then use the ICVs in the SEAL data packets for inner source address validation <a href="#I-D.ietf-savi-framework">[I-D.ietf-savi-framework]</a>, but it need not also check the outer source addresses/port numbers of the packets. Therefore, the outer addresses may change over time even if the inner source address stays the same.</p>
<p id="rfc.section.5.6.3.p.9">Following redirection, if the source is subsequently unable to reach the target via the route-optimized path, it deletes the destination prefix forwarding table entry and installs a new forwarding table entry for the destination prefix with a default router as the next hop. The source VET node thereafter sets R=0 in the SEAL headers of data packets that it sends toward the destination prefix, but it may attempt redirection again at a later time by again setting R=1.</p>
<p id="rfc.section.5.6.3.p.10">Finally, the source and target VET nodes should set an expiration timer on the destination forwarding table entry so that stale entries are deleted in a timely fashion.</p>
<h1 id="rfc.section.5.6.4">
<a href="#rfc.section.5.6.4">5.6.4.</a> <a href="#tesync" id="tesync">Bidirectional Neighbor Synchronization</a>
</h1>
<p id="rfc.section.5.6.4.p.1">The tunnel neighbor relationship between a pair of VET interface tunnel neighbors can be either unidirectional or bidirectional. A unidirectional relationship (see: <a href="#ebrdisc">Section 5.6.3</a>) can be established when the source VET node 'A' will tunnel data packets directly to a target VET node 'B', but 'B' will not tunnel data packets directly to 'A'. A bidirectional relationship is necessary when a Client VET node establishes a connection to a Serving VBG .</p>
<p id="rfc.section.5.6.4.p.2">In order to establish a bidirectional tunnel neighbor relationship, the Client (call it "A") performs a reliable exchange (e.g., a short TCP transaction, a DHCP client/server exchange, etc.) with the Server (call it "B"). The application layer details of the transaction are out of scope for this document, and indeed need not be standardized as long as both the Client and Server observe the same specifications. Note that a short transaction instead of a persistent connection is advised if the outer network layer protocol addresses may change, e.g., due to a mobility event, due to loss of state in network middleboxes, etc. If there is assurance that the outer network layer protocol addresses will not change, then a persistent connection may be used.</p>
<p id="rfc.section.5.6.4.p.3">During the transaction, "A" and "B" first authenticate themselves to each other, then exchange information regarding the inner network layer prefixes that will be used for conveying inner packets that will be forwarded over the tunnel. In this process, the Client registers one or more link identifiers (LINK_IDs) with the Server to provide "handles" for the Client's outer IP connection addresses.  This implies that, while the Client may be either behind a NAT or mobile (or both), the Server must be stable and publicly addressable.</p>
<p id="rfc.section.5.6.4.p.4">Following this bidirectional tunnel neighbor establishment, the neighbors monitor the soft state for liveness, e.g., using Neighbor Unreachability Detection hints of forward progress. When one of the neighbors wishes to terminate the relationship, it performs another short transaction to request the termination, then both neighbors delete their respective tunnel soft state.</p>
<h1 id="rfc.section.5.7">
<a href="#rfc.section.5.7">5.7.</a> <a href="#ipsec_nc" id="ipsec_nc">Neighbor Coordination on VET Interfaces using IPsec</a>
</h1>
<p id="rfc.section.5.7.p.1">VET interfaces that use IPsec encapsulation <a href="#RFC4301">[RFC4301]</a> use the Internet Key Exchange protocol, version 2 (IKEv2) <a href="#RFC4306">[RFC4306]</a> to manage security association setup and maintenance. IKEv2 provides a logical equivalent of the SCMP in terms of VET interface neighbor coordinations; for example, IKEv2 also provides mechanisms for redirection <a href="#RFC5685">[RFC5685]</a> and mobility <a href="#RFC4555">[RFC4555]</a>.</p>
<p id="rfc.section.5.7.p.2">IPsec additionally provides an extended Identification field and ICV; these features allow IPsec to utilize outer IP fragmentation and reassembly with less risk of exposure to data corruption due to reassembly misassociations.</p>
<h1 id="rfc.section.5.8">
<a href="#rfc.section.5.8">5.8.</a> <a href="#mob" id="mob">Mobility and Multihoming Considerations</a>
</h1>
<p id="rfc.section.5.8.p.1">VBRs that travel between distinct enterprise networks must either abandon their PA prefixes that are relative to the "old" network and obtain PA prefixes relative to the "new" network, or somehow coordinate with a "home" network to retain ownership of the prefixes.  In the first instance, the VBR would be required to coordinate a network renumbering event on its attached networks using the new PA prefixes <a href="#RFC4192">[RFC4192]</a><a href="#RFC5887">[RFC5887]</a>.  In the second instance, an adjunct mobility management mechanism is required.</p>
<p id="rfc.section.5.8.p.2">VBRs can retain their CPs as they travel between distinct network points of attachment as long as they continue to refresh their CP-to-RLOC address mappings with their serving VBG as described in <a href="#I-D.templin-ironbis">[I-D.templin-ironbis]</a>. (When the VBR moves far from its serving VBG, it can also select a new VBG in order to maintain optimal routing.) In this way, VBRs can update their CP-to-RLOC mappings in real time and without requiring an adjunct mobility management mechanism.</p>
<p id="rfc.section.5.8.p.3">VBRs that have true PI prefixes can withdraw the prefixes from former Internet points of attachment and re-advertise them at new points of attachment as they move. However, this method has been shown to produce excessive routing churn in the global internet BGP tables, and should be avoided for any mobility scenarios that may occur along short timescales. The alternative is to employ a system in which the true PI prefixes are not injected into the Internet routing system, but rather managed through some separate global mapping database. This latter method is employed by the LISP proposal <a href="#I-D.ietf-lisp">[I-D.ietf-lisp]</a>.</p>
<p id="rfc.section.5.8.p.4">The VBGs of a multihomed enterprise network participate in a private inner network layer routing protocol instance (e.g., via an interior BGP instance) to accommodate network partitions/merges as well as intra-enterprise mobility events.</p>
<h1 id="rfc.section.5.9">
<a href="#rfc.section.5.9">5.9.</a> <a href="#smf" id="smf">Multicast </a>
</h1>
<h1 id="rfc.section.5.9.1">
<a href="#rfc.section.5.9.1">5.9.1.</a> <a href="#smf2" id="smf2">Multicast over (Non)Multicast Enterprise Networks</a>
</h1>
<p id="rfc.section.5.9.1.p.1">Whether or not the underlying enterprise network supports a native multicasting service, the VET node can act as an inner network layer IGMP/MLD proxy <a href="#RFC4605">[RFC4605]</a> on behalf of its attached EUNs and convey its multicast group memberships over the VET interface to a VBG acting as a multicast router. Its inner network layer multicast transmissions will therefore be encapsulated in outer headers with the unicast address of the VBG as the destination.</p>
<h1 id="rfc.section.5.9.2">
<a href="#rfc.section.5.9.2">5.9.2.</a> <a href="#smf1" id="smf1">Multicast Over Multicast-Capable Enterprise Networks</a>
</h1>
<p id="rfc.section.5.9.2.p.1">In multicast-capable enterprise networks, ERs provide an enterprise-wide multicasting service (e.g., Simplified Multicast Forwarding (SMF) <a href="#I-D.ietf-manet-smf">[I-D.ietf-manet-smf]</a>, Protocol Independent Multicast (PIM) routing, Distance Vector Multicast Routing Protocol (DVMRP) routing, etc.) over their enterprise-interior interfaces such that outer IP multicast messages of site-scope or greater scope will be propagated across the enterprise network. For such deployments, VET nodes can optionally provide a native inner multicast/broadcast capability over their VET interfaces through mapping of the inner multicast address space to the outer multicast address space. In that case, operation of link-or greater-scoped inner multicasting services (e.g., a link-scoped neighbor discovery protocol) over the VET interface is available, but SHOULD be used sparingly to minimize enterprise-wide flooding.</p>
<p id="rfc.section.5.9.2.p.2">VET nodes encapsulate inner multicast messages sent over the VET interface in any mid-layer headers (e.g., UDP, SEAL, IPsec, etc.) followed by an outer IP header with a site-scoped outer IP multicast address as the destination. For the case of IPv6 and IPv4 as the inner/outer protocols (respectively), <a href="#RFC2529">[RFC2529]</a> provides mappings from the IPv6 multicast address space to a site-scoped IPv4 multicast address space (for other encapsulations, mappings are established through administrative configuration or through an unspecified alternate static mapping).</p>
<p id="rfc.section.5.9.2.p.3">Multicast mapping for inner multicast groups over outer IP multicast groups can be accommodated, e.g., through VET interface snooping of inner multicast group membership and routing protocol control messages. To support inner-to-outer multicast address mapping, the VET interface acts as a virtual outer IP multicast host connected to its underlying interfaces. When the VET interface detects that an inner multicast group joins or leaves, it forwards corresponding outer IP multicast group membership reports on an underlying interface over which the VET interface is configured. If the VET node is configured as an outer IP multicast router on the underlying interfaces, the VET interface forwards locally looped-back group membership reports to the outer IP multicast routing process. If the VET node is configured as a simple outer IP multicast host, the VET interface instead forwards actual group membership reports (e.g., IGMP messages) directly over an underlying interface.</p>
<p id="rfc.section.5.9.2.p.4">Since inner multicast groups are mapped to site-scoped outer IP multicast groups, the VET node MUST ensure that the site-scoped outer IP multicast messages received on the underlying interfaces for one VET interface do not "leak out" to the underlying interfaces of another VET interface. This is accommodated through normal site-scoped outer IP multicast group filtering at enterprise network boundaries.</p>
<h1 id="rfc.section.5.10">
<a href="#rfc.section.5.10">5.10.</a> <a href="#service" id="service">Service Discovery</a>
</h1>
<p id="rfc.section.5.10.p.1">VET nodes can perform enterprise-wide service discovery using a suitable name-to-address resolution service. Examples of flooding-based services include the use of LLMNR <a href="#RFC4795">[RFC4795]</a> over the VET interface or multicast DNS (mDNS) <a href="#I-D.cheshire-dnsext-multicastdns">[I-D.cheshire-dnsext-multicastdns]</a> over an underlying interface. More scalable and efficient service discovery mechanisms (e.g., anycast) are for further study.</p>
<h1 id="rfc.section.5.11">
<a href="#rfc.section.5.11">5.11.</a> <a href="#part" id="part">VET Link Partitioning</a>
</h1>
<p id="rfc.section.5.11.p.1">A VET link can be partitioned into multiple distinct logical groupings. In that case, each partition configures its own distinct 'PRLNAME' (e.g., 'isatapv2.zone1.example.com', 'isatapv2.zone2.example.com', etc.).</p>
<p id="rfc.section.5.11.p.2">VBGs can further create multiple IP subnets within a partition, e.g., by sending SRAs with PIOs containing different IP prefixes to different groups of VET hosts. VBGs can identify subnets, e.g., by examining RLOC prefixes, observing the enterprise-interior interfaces over which SRSs are received, etc.</p>
<p id="rfc.section.5.11.p.3">In the limiting case, VBGs can advertise a unique set of IP prefixes to each VET host such that each host belongs to a different subnet (or set of subnets) on the VET interface.</p>
<h1 id="rfc.section.5.12">
<a href="#rfc.section.5.12">5.12.</a> <a href="#state" id="state">VBG Prefix State Recovery</a>
</h1>
<p id="rfc.section.5.12.p.1">VBGs retain explicit state that tracks the inner network layer prefixes delegated to VBRs connected to the VET link, e.g., so that packets are delivered to the correct VBRs. When a VBG loses some or all of its state (e.g., due to a power failure), client VBRs must refresh the VBG's state so that packets can be forwarded over correct routes.</p>
<h1 id="rfc.section.5.13">
<a href="#rfc.section.5.13">5.13.</a> <a href="#isatap" id="isatap">Legacy ISATAP Services</a>
</h1>
<p id="rfc.section.5.13.p.1">VBGs can support legacy ISATAP services according to the specifications in <a href="#RFC5214">[RFC5214]</a>. In particular, VBGs can configure legacy ISATAP interfaces and VET interfaces over the same sets of underlying interfaces as long as the PRLs and IPv6 prefixes associated with the ISATAP/VET interfaces are distinct.</p>
<p id="rfc.section.5.13.p.2">Legacy ISATAP hosts acquire addresses and/or prefixes in the same manner and using the same mechanisms as described for VET hosts in Section 4.4 above.</p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#iana" id="iana">IANA Considerations</a>
</h1>
<p id="rfc.section.6.p.1">There are no IANA considerations for this document.</p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#secure" id="secure">Security Considerations</a>
</h1>
<p id="rfc.section.7.p.1">Security considerations for MANETs are found in <a href="#RFC2501">[RFC2501]</a>.</p>
<p id="rfc.section.7.p.2">The security considerations found in <a href="#RFC2529">[RFC2529]</a><a href="#RFC5214">[RFC5214]</a><a href="#RFC6324">[RFC6324]</a> also apply to VET.</p>
<p id="rfc.section.7.p.3">SEND <a href="#RFC3971">[RFC3971]</a> and/or IPsec <a href="#RFC4301">[RFC4301]</a> can be used in environments where attacks on the neighbor coordination protocol are possible. SEAL <a href="#I-D.templin-intarea-seal">[I-D.templin-intarea-seal]</a> supports path MTU discovery, and provides per-packet authenticating information for data origin authentication, anti-replay and message header integrity.</p>
<p id="rfc.section.7.p.4">Rogue neighbor coordination messages with spoofed RLOC source addresses can consume network resources and cause VET nodes to perform extra work. Nonetheless, VET nodes SHOULD NOT "blacklist" such RLOCs, as that may result in a denial of service to the RLOCs' legitimate owners.</p>
<p id="rfc.section.7.p.5">VBRs and VBGs observe the recommendations for network ingress filtering <a href="#RFC2827">[RFC2827]</a>.</p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> Related Work</h1>
<p id="rfc.section.8.p.1">Brian Carpenter and Cyndi Jung introduced the concept of intra-site automatic tunneling in <a href="#RFC2529">[RFC2529]</a>; this concept was later called: "Virtual Ethernet" and investigated by Quang Nguyen under the guidance of Dr. Lixia Zhang. Subsequent works by these authors and their colleagues have motivated a number of foundational concepts on which this work is based.</p>
<p id="rfc.section.8.p.2">Telcordia has proposed DHCP-related solutions for MANETs through the CECOM MOSAIC program.</p>
<p id="rfc.section.8.p.3">The Naval Research Lab (NRL) Information Technology Division uses DHCP in their MANET research testbeds.</p>
<p id="rfc.section.8.p.4">Security concerns pertaining to tunneling mechanisms are discussed in <a href="#I-D.ietf-v6ops-tunnel-security-concerns">[I-D.ietf-v6ops-tunnel-security-concerns]</a>.</p>
<p id="rfc.section.8.p.5">Default router and prefix information options for DHCPv6 are discussed in <a href="#I-D.droms-dhc-dhcpv6-default-router">[I-D.droms-dhc-dhcpv6-default-router]</a>.</p>
<p id="rfc.section.8.p.6">An automated IPv4 prefix delegation mechanism is proposed in <a href="#I-D.ietf-dhc-subnet-alloc">[I-D.ietf-dhc-subnet-alloc]</a>.</p>
<p id="rfc.section.8.p.7">RLOC prefix delegation for enterprise-edge interfaces is discussed in <a href="#I-D.clausen-manet-autoconf-recommendations">[I-D.clausen-manet-autoconf-recommendations]</a>.</p>
<p id="rfc.section.8.p.8">MANET link types are discussed in <a href="#I-D.clausen-manet-linktype">[I-D.clausen-manet-linktype]</a>.</p>
<p id="rfc.section.8.p.9">The LISP proposal <a href="#I-D.ietf-lisp">[I-D.ietf-lisp]</a> examines encapsulation/decapsulation issues and other aspects of tunneling.</p>
<p id="rfc.section.8.p.10">Various proposals within the IETF have suggested similar mechanisms.</p>
<h1 id="rfc.section.9">
<a href="#rfc.section.9">9.</a> <a href="#ack" id="ack">Acknowledgements</a>
</h1>
<p id="rfc.section.9.p.1">The following individuals gave direct and/or indirect input that was essential to the work: Jari Arkko, Teco Boot, Emmanuel Bacelli, Fred Baker, James Bound, Scott Brim, Brian Carpenter, Thomas Clausen, Claudiu Danilov, Chris Dearlove, Remi Despres, Gert Doering, Ralph Droms, Washam Fan, Dino Farinacci, Vince Fuller, Thomas Goff, David Green, Joel Halpern, Bob Hinden, Sascha Hlusiak, Sapumal Jayatissa, Dan Jen, Darrel Lewis, Tony Li, Joe Macker, David Meyer, Gabi Nakibly, Thomas Narten, Pekka Nikander, Dave Oran, Alexandru Petrescu, Mark Smith, John Spence, Jinmei Tatuya, Dave Thaler, Mark Townsley, Ole Troan, Michaela Vanderveen, Robin Whittle, James Woodyatt, Lixia Zhang, and others in the IETF AUTOCONF and MANET working groups. Many others have provided guidance over the course of many years.</p>
<p id="rfc.section.9.p.2">Discussions with colleagues following the publication of RFC5558 have provided useful insights that have resulted in significant improvements to this, the Second Edition of VET.</p>
<h1 id="rfc.section.10">
<a href="#rfc.section.10">10.</a> Contributors</h1>
<p id="rfc.section.10.p.1">The following individuals have contributed to this document:</p>
<p id="rfc.section.10.p.2">Eric Fleischman (eric.fleischman@boeing.com)<br> Thomas Henderson (thomas.r.henderson@boeing.com)<br> Steven Russert (steven.w.russert@boeing.com)<br> Seung Yi (seung.yi@boeing.com)</p>
<p id="rfc.section.10.p.3">Ian Chakeres (ian.chakeres@gmail.com) contributed to earlier versions of the document.</p>
<p id="rfc.section.10.p.4">Jim Bound's foundational work on enterprise networks provided significant guidance for this effort. We mourn his loss and honor his contributions.</p>
<h1 id="rfc.references">
<a href="#rfc.references">11.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">11.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC0791">[RFC0791]</b></td>
<td class="top">
<a title="University of Southern California (USC)/Information Sciences Institute">Postel, J.</a>, "<a href="http://tools.ietf.org/html/rfc791">Internet Protocol</a>", STD 5, RFC 791, September 1981.</td>
</tr>
<tr>
<td class="reference"><b id="RFC0792">[RFC0792]</b></td>
<td class="top">
<a title="University of Southern California (USC)/Information Sciences Institute">Postel, J.</a>, "<a href="http://tools.ietf.org/html/rfc792">Internet Control Message Protocol</a>", STD 5, RFC 792, September 1981.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2131">[RFC2131]</b></td>
<td class="top">
<a href="mailto:droms@bucknell.edu" title="Computer Science Department">Droms, R.</a>, "<a href="http://tools.ietf.org/html/rfc2131">Dynamic Host Configuration Protocol</a>", RFC 2131, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2460">[RFC2460]</b></td>
<td class="top">
<a href="mailto:deering@cisco.com" title="Cisco Systems, Inc.">Deering, S.E.</a> and <a href="mailto:hinden@iprg.nokia.com" title="Nokia">R.M. Hinden</a>, "<a href="http://tools.ietf.org/html/rfc2460">Internet Protocol, Version 6 (IPv6) Specification</a>", RFC 2460, December 1998.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4861">[RFC4861]</b></td>
<td class="top">
<a>Narten, T.</a>, <a>Nordmark, E.</a>, <a>Simpson, W.</a> and <a>H. Soliman</a>, "<a href="http://tools.ietf.org/html/rfc4861">Neighbor Discovery for IP version 6 (IPv6)</a>", RFC 4861, September 2007.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4862">[RFC4862]</b></td>
<td class="top">
<a>Thomson, S.</a>, <a>Narten, T.</a> and <a>T. Jinmei</a>, "<a href="http://tools.ietf.org/html/rfc4862">IPv6 Stateless Address Autoconfiguration</a>", RFC 4862, September 2007.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3315">[RFC3315]</b></td>
<td class="top">
<a>Droms, R.</a>, <a>Bound, J.</a>, <a>Volz, B.</a>, <a>Lemon, T.</a>, <a>Perkins, C.</a> and <a>M. Carney</a>, "<a href="http://tools.ietf.org/html/rfc3315">Dynamic Host Configuration Protocol for IPv6 (DHCPv6)</a>", RFC 3315, July 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3118">[RFC3118]</b></td>
<td class="top">
<a>Droms, R.</a> and <a>W. Arbaugh</a>, "<a href="http://tools.ietf.org/html/rfc3118">Authentication for DHCP Messages</a>", RFC 3118, June 2001.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3633">[RFC3633]</b></td>
<td class="top">
<a>Troan, O.</a> and <a>R. Droms</a>, "<a href="http://tools.ietf.org/html/rfc3633">IPv6 Prefix Options for Dynamic Host Configuration Protocol (DHCP) version 6</a>", RFC 3633, December 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4291">[RFC4291]</b></td>
<td class="top">
<a>Hinden, R.</a> and <a>S. Deering</a>, "<a href="http://tools.ietf.org/html/rfc4291">IP Version 6 Addressing Architecture</a>", RFC 4291, February 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5342">[RFC5342]</b></td>
<td class="top">
<a>Eastlake, D.</a>, "<a href="http://tools.ietf.org/html/rfc5342">IANA Considerations and IETF Protocol Usage for IEEE 802 Parameters</a>", BCP 141, RFC 5342, September 2008.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3971">[RFC3971]</b></td>
<td class="top">
<a>Arkko, J.</a>, <a>Kempf, J.</a>, <a>Zill, B.</a> and <a>P. Nikander</a>, "<a href="http://tools.ietf.org/html/rfc3971">SEcure Neighbor Discovery (SEND)</a>", RFC 3971, March 2005.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3972">[RFC3972]</b></td>
<td class="top">
<a>Aura, T.</a>, "<a href="http://tools.ietf.org/html/rfc3972">Cryptographically Generated Addresses (CGA)</a>", RFC 3972, March 2005.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4443">[RFC4443]</b></td>
<td class="top">
<a>Conta, A.</a>, <a>Deering, S.</a> and <a>M. Gupta</a>, "<a href="http://tools.ietf.org/html/rfc4443">Internet Control Message Protocol (ICMPv6) for the Internet Protocol Version 6 (IPv6) Specification</a>", RFC 4443, March 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2827">[RFC2827]</b></td>
<td class="top">
<a>Ferguson, P.</a> and <a>D. Senie</a>, "<a href="http://tools.ietf.org/html/rfc2827">Network Ingress Filtering: Defeating Denial of Service Attacks which employ IP Source Address Spoofing</a>", BCP 38, RFC 2827, May 2000.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.templin-intarea-seal">[I-D.templin-intarea-seal]</b></td>
<td class="top">
<a>Templin, F</a>, "<a href="http://tools.ietf.org/html/draft-templin-intarea-seal-39">The Subnetwork Encapsulation and Adaptation Layer (SEAL)</a>", Internet-Draft draft-templin-intarea-seal-39, November 2011.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">11.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC1122">[RFC1122]</b></td>
<td class="top">
<a href="mailto:Braden@ISI.EDU" title="University of Southern California (USC)/ Information Sciences Institute (ISI)">Braden, R.</a>, "<a href="http://tools.ietf.org/html/rfc1122">Requirements for Internet Hosts - Communication Layers</a>", STD 3, RFC 1122, October 1989.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3819">[RFC3819]</b></td>
<td class="top">
<a>Karn, P.</a>, <a>Bormann, C.</a>, <a>Fairhurst, G.</a>, <a>Grossman, D.</a>, <a>Ludwig, R.</a>, <a>Mahdavi, J.</a>, <a>Montenegro, G.</a>, <a>Touch, J.</a> and <a>L. Wood</a>, "<a href="http://tools.ietf.org/html/rfc3819">Advice for Internet Subnetwork Designers</a>", BCP 89, RFC 3819, July 2004.</td>
</tr>
<tr>
<td class="reference"><b id="RFC1955">[RFC1955]</b></td>
<td class="top">
<a href="mailto:hinden@ipsilon.com" title="Ipsilon Networks, Inc.">Hinden, R.</a>, "<a href="http://tools.ietf.org/html/rfc1955">New Scheme for Internet Routing and Addressing (ENCAPS) for IPNG</a>", RFC 1955, June 1996.</td>
</tr>
<tr>
<td class="reference"><b id="RFC1753">[RFC1753]</b></td>
<td class="top">
<a href="mailto:jnc@lcs.mit.edu">Chiappa, J.</a>, "<a href="http://tools.ietf.org/html/rfc1753">IPng Technical Requirements Of the Nimrod Routing and Addressing Architecture</a>", RFC 1753, December 1994.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2003">[RFC2003]</b></td>
<td class="top">
<a href="mailto:perk@watson.ibm.com" title="Room H3-D34">Perkins, C.</a>, "<a href="http://tools.ietf.org/html/rfc2003">IP Encapsulation within IP</a>", RFC 2003, October 1996.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2132">[RFC2132]</b></td>
<td class="top">
<a href="mailto:sca@engr.sgi.com" title="Silicon Graphics, Inc.">Alexander, S.</a> and <a href="mailto:droms@bucknell.edu" title="Bucknell University">R. Droms</a>, "<a href="http://tools.ietf.org/html/rfc2132">DHCP Options and BOOTP Vendor Extensions</a>", RFC 2132, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2473">[RFC2473]</b></td>
<td class="top">
<a href="mailto:aconta@lucent.com" title="Lucent Technologies Inc.">Conta, A.</a> and <a href="mailto:deering@cisco.com" title="Cisco Systems">S. Deering</a>, "<a href="http://tools.ietf.org/html/rfc2473">Generic Packet Tunneling in IPv6 Specification</a>", RFC 2473, December 1998.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2775">[RFC2775]</b></td>
<td class="top">
<a href="mailto:brian@icair.org" title="IBM c/o iCAIR">Carpenter, B.E.</a>, "<a href="http://tools.ietf.org/html/rfc2775">Internet Transparency</a>", RFC 2775, February 2000.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2501">[RFC2501]</b></td>
<td class="top">
<a href="mailto:corson@isr.umd.edu" title="Institute for Systems Research">Corson, M.S.</a> and <a href="mailto:macker@itd.nrl.navy.mil" title="Information Technology Division">J. Macker</a>, "<a href="http://tools.ietf.org/html/rfc2501">Mobile Ad hoc Networking (MANET): Routing Protocol Performance Issues and Evaluation Considerations</a>", RFC 2501, January 1999.</td>
</tr>
<tr>
<td class="reference"><b id="RFC1918">[RFC1918]</b></td>
<td class="top">
<a href="mailto:yakov@cisco.com" title="Cisco systems">Rekhter, Y.</a>, <a href="mailto:rgm3@is.chrysler.com" title="Chrysler Corporation">Moskowitz, R.</a>, <a href="mailto:Daniel.Karrenberg@ripe.net" title="RIPE Network Coordination Centre">Karrenberg, D.</a>, <a href="mailto:GeertJan.deGroot@ripe.net" title="RIPE Network Coordination Centre">Groot, G.</a> and <a href="mailto:lear@sgi.com" title="Silicon Graphics, Inc.">E. Lear</a>, "<a href="http://tools.ietf.org/html/rfc1918">Address Allocation for Private Internets</a>", BCP 5, RFC 1918, February 1996.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4852">[RFC4852]</b></td>
<td class="top">
<a>Bound, J.</a>, <a>Pouffary, Y.</a>, <a>Klynsma, S.</a>, <a>Chown, T.</a> and <a>D. Green</a>, "<a href="http://tools.ietf.org/html/rfc4852">IPv6 Enterprise Network Analysis - IP Layer 3 Focus</a>", RFC 4852, April 2007.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2529">[RFC2529]</b></td>
<td class="top">
<a href="mailto:brian@hursley.ibm.com" title="IBM United Kingdom Laboratories">Carpenter, B.</a> and <a href="mailto:cmj@3Com.com" title="3Com Corporation">C. Jung</a>, "<a href="http://tools.ietf.org/html/rfc2529">Transmission of IPv6 over IPv4 Domains without Explicit Tunnels</a>", RFC 2529, March 1999.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4192">[RFC4192]</b></td>
<td class="top">
<a>Baker, F.</a>, <a>Lear, E.</a> and <a>R. Droms</a>, "<a href="http://tools.ietf.org/html/rfc4192">Procedures for Renumbering an IPv6 Network without a Flag Day</a>", RFC 4192, September 2005.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4193">[RFC4193]</b></td>
<td class="top">
<a>Hinden, R.</a> and <a>B. Haberman</a>, "<a href="http://tools.ietf.org/html/rfc4193">Unique Local IPv6 Unicast Addresses</a>", RFC 4193, October 2005.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4213">[RFC4213]</b></td>
<td class="top">
<a>Nordmark, E.</a> and <a>R. Gilligan</a>, "<a href="http://tools.ietf.org/html/rfc4213">Basic Transition Mechanisms for IPv6 Hosts and Routers</a>", RFC 4213, October 2005.</td>
</tr>
<tr>
<td class="reference"><b id="RFC1035">[RFC1035]</b></td>
<td class="top">
<a title="USC/ISI">Mockapetris, P.</a>, "<a href="http://tools.ietf.org/html/rfc1035">Domain names - implementation and specification</a>", STD 13, RFC 1035, November 1987.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3927">[RFC3927]</b></td>
<td class="top">
<a>Cheshire, S.</a>, <a>Aboba, B.</a> and <a>E. Guttman</a>, "<a href="http://tools.ietf.org/html/rfc3927">Dynamic Configuration of IPv4 Link-Local Addresses</a>", RFC 3927, May 2005.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4271">[RFC4271]</b></td>
<td class="top">
<a>Rekhter, Y.</a>, <a>Li, T.</a> and <a>S. Hares</a>, "<a href="http://tools.ietf.org/html/rfc4271">A Border Gateway Protocol 4 (BGP-4)</a>", RFC 4271, January 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4301">[RFC4301]</b></td>
<td class="top">
<a>Kent, S.</a> and <a>K. Seo</a>, "<a href="http://tools.ietf.org/html/rfc4301">Security Architecture for the Internet Protocol</a>", RFC 4301, December 2005.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4795">[RFC4795]</b></td>
<td class="top">
<a>Aboba, B.</a>, <a>Thaler, D.</a> and <a>L. Esibov</a>, "<a href="http://tools.ietf.org/html/rfc4795">Link-local Multicast Name Resolution (LLMNR)</a>", RFC 4795, January 2007.</td>
</tr>
<tr>
<td class="reference"><b id="RFC1070">[RFC1070]</b></td>
<td class="top">
<a href="mailto:hagens@cs.wisc.edu" title="University of Wisconsin, Madison, Computer Sciences Department">Hagens, R.</a>, <a href="mailto:nhall@cs.wisc.edu" title="University of Wisconsin, Madison, Computer Sciences Department">Hall, N.</a> and <a href="mailto:mrose@twg.com" title="The Wollongong Group">M. Rose</a>, "<a href="http://tools.ietf.org/html/rfc1070">Use of the Internet as a subnetwork for experimentation with the OSI network layer</a>", RFC 1070, February 1989.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4903">[RFC4903]</b></td>
<td class="top">
<a>Thaler, D.</a>, "<a href="http://tools.ietf.org/html/rfc4903">Multi-Link Subnet Issues</a>", RFC 4903, June 2007.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2491">[RFC2491]</b></td>
<td class="top">
<a href="mailto:gja@lucent.com" title="Bell Laboratories, Lucent Technologies">Armitage, G.</a>, <a href="mailto:paschulter@acm.org" title="Bright Tiger Technologies">Schulter, P.</a>, <a href="mailto:jork@kar.dec.com" title="European Applied Research Center">Jork, M.</a> and <a href="mailto:harter@zk3.dec.com" title="Digital UNIX Networking">G. Harter</a>, "<a href="http://tools.ietf.org/html/rfc2491">IPv6 over Non-Broadcast Multiple Access (NBMA) networks</a>", RFC 2491, January 1999.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5340">[RFC5340]</b></td>
<td class="top">
<a>Coltun, R.</a>, <a>Ferguson, D.</a>, <a>Moy, J.</a> and <a>A. Lindem</a>, "<a href="http://tools.ietf.org/html/rfc5340">OSPF for IPv6</a>", RFC 5340, July 2008.</td>
</tr>
<tr>
<td class="reference"><b id="RFC0994">[RFC0994]</b></td>
<td class="top">
<a>International Organization for Standardization (ISO)</a><a>American National Standards Institute (ANSI)</a>, "<a href="http://tools.ietf.org/html/rfc994">Final text of DIS 8473, Protocol for Providing the Connectionless-mode Network Service</a>", RFC 994, March 1986.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3947">[RFC3947]</b></td>
<td class="top">
<a>Kivinen, T.</a>, <a>Swander, B.</a>, <a>Huttunen, A.</a> and <a>V. Volpe</a>, "<a href="http://tools.ietf.org/html/rfc3947">Negotiation of NAT-Traversal in the IKE</a>", RFC 3947, January 2005.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3948">[RFC3948]</b></td>
<td class="top">
<a>Huttunen, A.</a>, <a>Swander, B.</a>, <a>Volpe, V.</a>, <a>DiBurro, L.</a> and <a>M. Stenberg</a>, "<a href="http://tools.ietf.org/html/rfc3948">UDP Encapsulation of IPsec ESP Packets</a>", RFC 3948, January 2005.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5214">[RFC5214]</b></td>
<td class="top">
<a>Templin, F.</a>, <a>Gleeson, T.</a> and <a>D. Thaler</a>, "<a href="http://tools.ietf.org/html/rfc5214">Intra-Site Automatic Tunnel Addressing Protocol (ISATAP)</a>", RFC 5214, March 2008.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5569">[RFC5569]</b></td>
<td class="top">
<a>Despres, R.</a>, "<a href="http://tools.ietf.org/html/rfc5569">IPv6 Rapid Deployment on IPv4 Infrastructures (6rd)</a>", RFC 5569, January 2010.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4306">[RFC4306]</b></td>
<td class="top">
<a>Kaufman, C.</a>, "<a href="http://tools.ietf.org/html/rfc4306">Internet Key Exchange (IKEv2) Protocol</a>", RFC 4306, December 2005.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4555">[RFC4555]</b></td>
<td class="top">
<a>Eronen, P.</a>, "<a href="http://tools.ietf.org/html/rfc4555">IKEv2 Mobility and Multihoming Protocol (MOBIKE)</a>", RFC 4555, June 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4592">[RFC4592]</b></td>
<td class="top">
<a>Lewis, E.</a>, "<a href="http://tools.ietf.org/html/rfc4592">The Role of Wildcards in the Domain Name System</a>", RFC 4592, July 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5685">[RFC5685]</b></td>
<td class="top">
<a>Devarapalli, V.</a> and <a>K. Weniger</a>, "<a href="http://tools.ietf.org/html/rfc5685">Redirect Mechanism for the Internet Key Exchange Protocol Version 2 (IKEv2)</a>", RFC 5685, November 2009.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4548">[RFC4548]</b></td>
<td class="top">
<a>Gray, E.</a>, <a>Rutemiller, J.</a> and <a>G. Swallow</a>, "<a href="http://tools.ietf.org/html/rfc4548">Internet Code Point (ICP) Assignments for NSAP Addresses</a>", RFC 4548, May 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4605">[RFC4605]</b></td>
<td class="top">
<a>Fenner, B.</a>, <a>He, H.</a>, <a>Haberman, B.</a> and <a>H. Sandick</a>, "<a href="http://tools.ietf.org/html/rfc4605">Internet Group Management Protocol (IGMP) / Multicast Listener Discovery (MLD)-Based Multicast Forwarding ("IGMP/MLD Proxying")</a>", RFC 4605, August 2006.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-manet-smf">[I-D.ietf-manet-smf]</b></td>
<td class="top">
<a>Macker, J</a>, "<a href="http://tools.ietf.org/html/draft-ietf-manet-smf-12">Simplified Multicast Forwarding</a>", Internet-Draft draft-ietf-manet-smf-12, July 2011.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4941">[RFC4941]</b></td>
<td class="top">
<a>Narten, T.</a>, <a>Draves, R.</a> and <a>S. Krishnan</a>, "<a href="http://tools.ietf.org/html/rfc4941">Privacy Extensions for Stateless Address Autoconfiguration in IPv6</a>", RFC 4941, September 2007.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5887">[RFC5887]</b></td>
<td class="top">
<a>Carpenter, B.</a>, <a>Atkinson, R.</a> and <a>H. Flinck</a>, "<a href="http://tools.ietf.org/html/rfc5887">Renumbering Still Needs Work</a>", RFC 5887, May 2010.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-savi-framework">[I-D.ietf-savi-framework]</b></td>
<td class="top">
<a>Wu, J</a>, <a>Bi, J</a>, <a>Bagnulo, M</a>, <a>Baker, F</a> and <a>C Vogt</a>, "<a href="http://tools.ietf.org/html/draft-ietf-savi-framework-05">Source Address Validation Improvement Framework</a>", Internet-Draft draft-ietf-savi-framework-05, July 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.cheshire-dnsext-multicastdns">[I-D.cheshire-dnsext-multicastdns]</b></td>
<td class="top">
<a>Cheshire, S</a> and <a>M Krochmal</a>, "<a href="http://tools.ietf.org/html/draft-cheshire-dnsext-multicastdns-14">Multicast DNS</a>", Internet-Draft draft-cheshire-dnsext-multicastdns-14, February 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-dhc-subnet-alloc">[I-D.ietf-dhc-subnet-alloc]</b></td>
<td class="top">
<a>Johnson, R</a>, <a>Kumarasamy, J</a>, <a>Kinnear, K</a> and <a>M Stapp</a>, "<a href="http://tools.ietf.org/html/draft-ietf-dhc-subnet-alloc-12">Subnet Allocation Option</a>", Internet-Draft draft-ietf-dhc-subnet-alloc-12, June 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-v6ops-tunnel-security-concerns">[I-D.ietf-v6ops-tunnel-security-concerns]</b></td>
<td class="top">
<a>Krishnan, S</a>, <a>Thaler, D</a> and <a>J Hoagland</a>, "<a href="http://tools.ietf.org/html/draft-ietf-v6ops-tunnel-security-concerns-04">Security Concerns With IP Tunneling</a>", Internet-Draft draft-ietf-v6ops-tunnel-security-concerns-04, October 2010.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.clausen-manet-linktype">[I-D.clausen-manet-linktype]</b></td>
<td class="top">
<a>Clausen, T</a>, "<a href="http://tools.ietf.org/html/draft-clausen-manet-linktype-00">The MANET Link Type</a>", Internet-Draft draft-clausen-manet-linktype-00, October 2008.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-6man-udpzero">[I-D.ietf-6man-udpzero]</b></td>
<td class="top">
<a>Fairhurst, G</a> and <a>M Westerlund</a>, "<a href="http://tools.ietf.org/html/draft-ietf-6man-udpzero-04">IPv6 UDP Checksum Considerations</a>", Internet-Draft draft-ietf-6man-udpzero-04, October 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.clausen-manet-autoconf-recommendations">[I-D.clausen-manet-autoconf-recommendations]</b></td>
<td class="top">
<a>Clausen, T</a> and <a>U Herberg</a>, "<a href="http://tools.ietf.org/html/draft-clausen-manet-autoconf-recommendations-00">MANET Router Configuration Recommendations</a>", Internet-Draft draft-clausen-manet-autoconf-recommendations-00, February 2009.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.droms-dhc-dhcpv6-default-router">[I-D.droms-dhc-dhcpv6-default-router]</b></td>
<td class="top">
<a>Droms, R</a> and <a>T Narten</a>, "<a href="http://tools.ietf.org/html/draft-droms-dhc-dhcpv6-default-router-00">Default Router and Prefix Advertisement Options for DHCPv6</a>", Internet-Draft draft-droms-dhc-dhcpv6-default-router-00, March 2009.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5720">[RFC5720]</b></td>
<td class="top">
<a>Templin, F.</a>, "<a href="http://tools.ietf.org/html/rfc5720">Routing and Addressing in Networks with Global Enterprise Recursion (RANGER)</a>", RFC 5720, February 2010.</td>
</tr>
<tr>
<td class="reference"><b id="RFC6139">[RFC6139]</b></td>
<td class="top">
<a>Russert, S.</a>, <a>Fleischman, E.</a> and <a>F. Templin</a>, "<a href="http://tools.ietf.org/html/rfc6139">Routing and Addressing in Networks with Global Enterprise Recursion (RANGER) Scenarios</a>", RFC 6139, February 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.jen-apt">[I-D.jen-apt]</b></td>
<td class="top">
<a>Jen, D</a>, <a>Meisel, M</a>, <a>Massey, D</a>, <a>Wang, L</a>, <a>Zhang, B</a> and <a>L Zhang</a>, "<a href="http://tools.ietf.org/html/draft-jen-apt-01">APT: A Practical Transit Mapping Service</a>", Internet-Draft draft-jen-apt-01, November 2007.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.templin-aero">[I-D.templin-aero]</b></td>
<td class="top">
<a>Templin, F</a>, "<a href="http://tools.ietf.org/html/draft-templin-aero-04">Asymmetric Extended Route Optimization (AERO)</a>", Internet-Draft draft-templin-aero-04, October 2011.</td>
</tr>
<tr>
<td class="reference"><b id="RFC6324">[RFC6324]</b></td>
<td class="top">
<a>Nakibly, G.</a> and <a>F. Templin</a>, "<a href="http://tools.ietf.org/html/rfc6324">Routing Loop Attack Using IPv6 Automatic Tunnels: Problem Statement and Proposed Mitigations</a>", RFC 6324, August 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-lisp">[I-D.ietf-lisp]</b></td>
<td class="top">
<a>Farinacci, D</a>, <a>Fuller, V</a>, <a>Meyer, D</a> and <a>D Lewis</a>, "<a href="http://tools.ietf.org/html/draft-ietf-lisp-16">Locator/ID Separation Protocol (LISP)</a>", Internet-Draft draft-ietf-lisp-16, November 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-grow-va">[I-D.ietf-grow-va]</b></td>
<td class="top">
<a>Francis, P</a>, <a>Xu, X</a>, <a>Ballani, H</a>, <a>Jen, D</a>, <a>Raszuk, R</a> and <a>L Zhang</a>, "<a href="http://tools.ietf.org/html/draft-ietf-grow-va-05">FIB Suppression with Virtual Aggregation</a>", Internet-Draft draft-ietf-grow-va-05, June 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.templin-ironbis">[I-D.templin-ironbis]</b></td>
<td class="top">
<a>Templin, F</a>, "<a href="http://tools.ietf.org/html/draft-templin-ironbis-08">The Internet Routing Overlay Network (IRON)</a>", Internet-Draft draft-templin-ironbis-08, November 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.carpenter-flow-ecmp">[I-D.carpenter-flow-ecmp]</b></td>
<td class="top">
<a>Carpenter, B</a> and <a>S Amante</a>, "<a href="http://tools.ietf.org/html/draft-carpenter-flow-ecmp-03">Using the IPv6 flow label for equal cost multipath routing and link aggregation in tunnels</a>", Internet-Draft draft-carpenter-flow-ecmp-03, October 2010.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5969">[RFC5969]</b></td>
<td class="top">
<a>Townsley, W.</a> and <a>O. Troan</a>, "<a href="http://tools.ietf.org/html/rfc5969">IPv6 Rapid Deployment on IPv4 Infrastructures (6rd) -- Protocol Specification</a>", RFC 5969, August 2010.</td>
</tr>
<tr>
<td class="reference"><b id="IEN48">[IEN48]</b></td>
<td class="top">
<a>Cerf, V</a>, "<a>The Catenet Model for Internetworking</a>", July 1978.</td>
</tr>
<tr>
<td class="reference"><b id="CATENET">[CATENET]</b></td>
<td class="top">
<a>Pouzin, L.</a>, "<a>A Proposal for Interconnecting Packet Switching Networks</a>", May 1974.</td>
</tr>
<tr>
<td class="reference"><b id="RASADV">[RASADV]</b></td>
<td class="top">
<a>Microsoft, </a>, "<a>Remote Access Server Advertisement (RASADV) Protocol Specification</a>", October 2008.</td>
</tr>
</tbody></table>
<h1 id="rfc.appendix.Appendix A">
<a href="#rfc.appendix.Appendix%20A">Appendix A.</a> Duplicate Address Detection (DAD) Considerations</h1>
<p id="rfc.section.Appendix A.p.1">A priori uniqueness determination (also known as "pre-service DAD") for an RLOC assigned on an enterprise-interior interface would require either flooding the entire enterprise network or somehow discovering a link in the network on which a node that configures a duplicate address is attached and performing a localized DAD exchange on that link. But, the control message overhead for such an enterprise-wide DAD would be substantial and prone to false-negatives due to packet loss and intermittent connectivity. An alternative to pre-service DAD is to autoconfigure pseudo-random RLOCs on enterprise-interior interfaces and employ a passive in-service DAD (e.g., one that monitors routing protocol messages for duplicate assignments).</p>
<p id="rfc.section.Appendix A.p.2">Pseudo-random IPv6 RLOCs can be generated with mechanisms such as CGAs, IPv6 privacy addresses, etc. with very small probability of collision. Pseudo-random IPv4 RLOCs can be generated through random assignment from a suitably large IPv4 prefix space.</p>
<p id="rfc.section.Appendix A.p.3">Consistent operational practices can assure uniqueness for VBG-aggregated addresses/prefixes, while statistical properties for pseudo-random address self-generation can assure uniqueness for the RLOCs assigned on an ER's enterprise-interior interfaces. Still, an RLOC delegation authority should be used when available, while a passive in-service DAD mechanism should be used to detect RLOC duplications when there is no RLOC delegation authority.</p>
<h1 id="rfc.appendix.Appendix B">
<a href="#rfc.appendix.Appendix%20B">Appendix B.</a> Anycast Services</h1>
<p id="rfc.section.Appendix B.p.1">Some of the IPv4 addresses that appear in the Potential Router List may be anycast addresses, i.e., they may be configured on the VET interfaces of multiple VBRs/VBGs. In that case, each VET router interface that configures the same anycast address must exhibit equivalent outward behavior.</p>
<p id="rfc.section.Appendix B.p.2">Use of an anycast address as the IP destination address of tunneled packets can have subtle interactions with tunnel path MTU and neighbor discovery. For example, if the initial fragments of a fragmented tunneled packet with an anycast IP destination address are routed to different egress tunnel endpoints than the remaining fragments, the multiple endpoints will be left with incomplete reassembly buffers. This issue can be mitigated by ensuring that each egress tunnel endpoint implements a proactive reassembly buffer garbage collection strategy.  Additionally, ingress tunnel endpoints that send packets with an anycast IP destination address must use the minimum path MTU for all egress tunnel endpoints that configure the same anycast address as the tunnel MTU. Finally, ingress tunnel endpoints should treat ICMP unreachable messages from a router within the tunnel as at most a weak indication of neighbor unreachability, since the failures may only be transient and a different path to an alternate anycast router quickly selected through reconvergence of the underlying routing protocol.</p>
<p id="rfc.section.Appendix B.p.3">Use of an anycast address as the IP source address of tunneled packets can lead to more serious issues. For example, when the IP source address of a tunneled packet is anycast, ICMP messages produced by routers within the tunnel might be delivered to different ingress tunnel endpoints than the ones that produced the packets. In that case, functions such as path MTU discovery and neighbor unreachability detection may experience non-deterministic behavior that can lead to communications failures. Additionally, the fragments of multiple tunneled packets produced by multiple ingress tunnel endpoints may be delivered to the same reassembly buffer at a single egress tunnel endpoint. In that case, data corruption may result due to fragment misassociation during reassembly.</p>
<p id="rfc.section.Appendix B.p.4">In view of these considerations, VBGs that configure an anycast address should also configure one or more unicast addresses from the Potential Router List; they should further accept tunneled packets destined to any of their anycast or unicast addresses, but should send tunneled packets using a unicast address as the source address.</p>
<h1 id="rfc.appendix.Appendix C">
<a href="#rfc.appendix.Appendix%20C">Appendix C.</a> Change Log</h1>
<p id="rfc.section.Appendix C.p.1">(Note to RFC editor - this section to be removed before publication as an RFC.)</p>
<p id="rfc.section.Appendix C.p.2">Changes from -14 to -15:</p>
<p></p>

<ul><li>new insights into default route configuration and next-hop determination</li></ul>
<p id="rfc.section.Appendix C.p.4">Changes from -13 to -14:</p>
<p></p>

<ul><li>fixed Idnits</li></ul>
<p id="rfc.section.Appendix C.p.6">Changes from -12 to -13:</p>
<p></p>

<ul>
<li>Changed "VGL" *back* to "PRL"</li>
<li>More changes for multi-protocol support</li>
<li>Changes to Redirect function</li>
</ul>
<p id="rfc.section.Appendix C.p.8">Changes from -11 to -12:</p>
<p></p>

<ul>
<li>Major section rearrangement</li>
<li>Changed "PRL" to "VGL"</li>
<li>Brought back text that was lost in the -10 to -11 transition</li>
</ul>
<p id="rfc.section.Appendix C.p.10">Changes from -10 to -11:</p>
<p></p>

<ul>
<li>Major changes with significant simplifications</li>
<li>Now support stateless PD using 6rd mechanisms</li>
<li>SEAL Control Message Protocol (SCMP) used instead of ICMPv6</li>
<li>Multi-protocol support including IPv6, IPv4, OSI/CLNP, etc.</li>
</ul>
<p id="rfc.section.Appendix C.p.12">Changes from -09 to -10:</p>
<p></p>

<ul>
<li>Changed "enterprise" to "enterprise network" throughout</li>
<li>dropped "inner IP", since inner layer may be non-IP</li>
<li>TODO - convert "IPv6 ND" to SEAL SCMP messages so that control messages remain *within* the tunnel interface instead of being exposed to the inner network layer protocol engine.</li>
</ul>
<p id="rfc.section.Appendix C.p.14">Changes from -08 to -09:</p>
<p></p>

<ul>
<li>Expanded discussion of encapsulation/decapsulation procedures</li>
<li>cited IRON</li>
</ul>
<p id="rfc.section.Appendix C.p.16">Changes from -07 to -08:</p>
<p></p>

<ul><li>Specified the approach to global mapping using virtual aggregation and BGP</li></ul>
<p id="rfc.section.Appendix C.p.18">Changes from -06 to -07:</p>
<p></p>

<ul>
<li>reworked redirect function</li>
<li>created new section on VET interface encapsulation</li>
<li>clarifications on nexthop selection</li>
<li>fixed several bugs</li>
</ul>
<p id="rfc.section.Appendix C.p.20">Changed from -05 to -06:</p>
<p></p>

<ul>
<li>reworked VET interface ND</li>
<li>anycast clarifications</li>
</ul>
<p id="rfc.section.Appendix C.p.22">Changes from -03 to -04:</p>
<p></p>

<ul><li>security consideration clarifications</li></ul>
<p id="rfc.section.Appendix C.p.24">Changes from -02 to -03:</p>
<p></p>

<ul>
<li>security consideration clarifications</li>
<li>new PRLNAME for VET is "isatav2.example.com"</li>
<li>VET now uses SEAL natively</li>
<li>EBGs can support both legacy ISATAP and VET over the same underlying interfaces.</li>
</ul>
<p id="rfc.section.Appendix C.p.26">Changes from -01 to -02:</p>
<p></p>

<ul>
<li>Defined CGA and privacy address configuration on VET interfaces</li>
<li>Interface identifiers added to routing protocol control messages for link-layer multiplexing</li>
</ul>

<p>Changes from -00 to -01:</p>
<p></p>

<ul>
<li>Section 4.1 clarifications on link-local assignment and RLOC autoconfiguration.</li>
<li>Appendix B clarifications on Weak End System Model</li>
</ul>
<p id="rfc.section.Appendix C.p.29">Changes from RFC5558 to -00:</p>
<p></p>

<ul><li>New appendix on RLOC configuration on VET interfaces.</li></ul>
<h1 id="rfc.authors"><a href="#rfc.authors">Author's Address</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Fred L. Templin</span> editor
	  <span class="n hidden">
		<span class="family-name">Templin</span>
	  </span>
	</span>
	<span class="org vcardline">Boeing Research & Technology</span>
	<span class="adr">
	  <span>P.O. Box 3707 MC 7L-49</span>

	  <span class="vcardline">
		<span class="locality">Seattle</span>,  
		<span class="region">WA</span> 
		<span class="code">98124</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:fltemplin@acm.org">fltemplin@acm.org</a></span>

  </address>
</div>

</body>
</html>