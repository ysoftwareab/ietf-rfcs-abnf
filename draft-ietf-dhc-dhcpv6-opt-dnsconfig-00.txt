

Network Working Group                                           J. Bound
Internet-Draft                               Compaq Computer Corporation
Expires: July 2, 2002                                          M. Carney
                                                  Sun Microsystems, Inc.
                                                              C. Perkins
                                                   Nokia Research Center
                                                                T. Lemon
                                                                 Nominum
                                                                 B. Volz
                                                                Ericsson
                                                                R. Droms
                                                           Cisco Systems
                                                                Jan 2002


                  DNS Configuration Options for DHCPv6
               draft-ietf-dhc-dhcpv6-opt-dnsconfig-00.txt

Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on July 2, 2002.

Copyright Notice

   Copyright (C) The Internet Society (2002).  All Rights Reserved.

Abstract

   This document describes three options for DNS-related configuration
   information in DHCPv6: DNS Servers, Domain Name, Domain Search list.



Bound, et al.             Expires July 2, 2002                  [Page 1]

Internet-Draft    DNS Configuration Options for DHCPv6          Jan 2002


1. Introduction

   This document describes three options for configuration information
   related to Domain Name Service (DNS) [1, 2] in DHCPv6 [5].

2. Requirements

   The keywords MUST, MUST NOT, REQUIRED, SHALL, SHALL NOT, SHOULD,
   SHOULD NOT, RECOMMENDED, MAY, and OPTIONAL, when they appear in this
   document, are to be interpreted as described in RFC 2119 [1]

3. Terminology

   This document uses terminology specific to IPv6 and DHCPv6 as defined
   in section "Terminology" of the DHCP specification.

4. Domain Name Server option

   The Domain Name Server option provides a list of one or more IP
   addresses of DNS servers to which a client's DNS resolver MAY send
   DNS queries [3].  The DNS servers SHOULD be listed in the order of
   preference for use by the client resolver.

   The format of the Domain Name Server option is:


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |      OPTION_DNS_SERVERS       |         option-len            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                                                               |
      |                   DNS server (IP address)                     |
      |                                                               |
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                                                               |
      |                   DNS server (IP address)                     |
      |                                                               |
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                              ...                              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


   option-code:   OPTION_DNS_SERVERS

   option-length: Length of the 'options' field in octets; must be a



Bound, et al.             Expires July 2, 2002                  [Page 2]

Internet-Draft    DNS Configuration Options for DHCPv6          Jan 2002


      multiple of 16

   DNS server:    IP address of DNS server


5. Domain Name option

   The Domain Name option is used by the server to inform the client of
   the domain name the client should append to its host name to form the
   client's fully qualified domain name (FQDN).

   The format of the Domain Name option is:


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |      OPTION_DOMAIN_NAME       |         option-len            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                          domain-name                          |
      |                              ...                              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


   option-code:   OPTION_DOMAIN_NAME (tbd)

   option-length: Length of the 'domain-name' field in octets

   domain-name:   Domain name for client

   The 'domain-name' MUST be encoded as specified in section
   "Representation and use of domain names" of the DHCPv6 specification
   [5].

   Local client policy MAY choose to override the domain-name supplied
   in the Domain-Name option with a locally configured value.

6. Domain Search List option

   In some circumstances, it is useful for the DHCP client to be
   configured with list of domain names to be appended to a host name
   when resolving DNS name.  This document defines a new DHCP option
   which is passed from the DHCP server to the DHCP client to specify
   the domain search list used when resolving hostnames with DNS.  This
   option does not apply to other name resolution mechanisms.






Bound, et al.             Expires July 2, 2002                  [Page 3]

Internet-Draft    DNS Configuration Options for DHCPv6          Jan 2002


   The format of the Domain Search option is:


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |      OPTION_DOMAIN_LIST       |         option-len            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                         searchstring                          |
      |                              ...                              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


   option-code:   OPTION_DOMAIN_LIST (tbd)

   option-length: Length of the 'searchstring' field in octets

   searchstring:  The specification of the list of domain names in the
      Domain Search List

   The list of domain names in the 'searchstring' MUST be encoded as
   specified in section "Representation and use of domain names" of the
   DHCPv6 specification [5].

   Local client policy MAY choose to override the domain search list
   supplied in the Domain Search List option with a locally configured
   value.

7. Appearance of these option

   The Domain Name Server option MUST appear only in the following
   messages: Solicit, Advertise, Request, Confirm, Renew, Rebind,
   Information-Request, Reply.

   The Domain Name option MUST appear only in the following messages:
   Solicit, Advertise, Request, Confirm, Renew, Rebind, Information-
   Request, Reply.

   The Domain Search List option MUST appear only in the following
   messages: Solicit, Advertise, Request, Confirm, Renew, Rebind,
   Information-Request, Reply.  Note that the Domain Search List option
   will only appear in a Solicit message if the client has a preferred
   search list that it is supplying to the server as a hint.

8. Security Considerations

   The Domain Name Server option may be used by an intruder DHCP server
   to cause DHCP clients to send DNS queries to an intruder DNS server.



Bound, et al.             Expires July 2, 2002                  [Page 4]

Internet-Draft    DNS Configuration Options for DHCPv6          Jan 2002


   The results of these misdirected DNS queries may be used to spoof DNS
   names.

   The Domain Name option may be used by an intruder DHCP server to
   configure a DHCP client with an invalid domain name, which could be
   used as a denial of service attack.

   The Domain Search List option may be used by an intruder DHCP server
   to cause DHCP clients to search through invalid domains for
   incompletely specified domain names.  The results of these
   misdirected searches may be used to spoof DNS names.

   To avoid attacks through the Domain Name Server option and the Domain
   Name option, the DHCP client SHOULD use authenticated DHCP (see
   section "Authentication of DHCP messages" in the DHCPv6 specification
   [5].

   Because the Domain Search List option may be used to spoof DNS name
   resolution in a way that cannot be detected by DNS security
   mechanisms like DNSSEC [4], DHCP clients and servers MUST use
   authenticated DHCP when a Domain Search List option is included in a
   DHCP message.

9. IANA Considerations

   IANA is requested to assign an option code to these options from the
   option-code space defined in section "DHCPv6 Options" of the DHCPv6
   specification [5].

References

   [1]  Bradner, S., "Key words for use in RFCs to Indicate Requirement
        Levels", BCP 14, RFC 2119, March 1997.

   [2]  Mockapetris, P., "Domain names - concepts and facilities", STD
        13, RFC 1034, November 1987.

   [3]  Mockapetris, P., "Domain names - implementation and
        specification", STD 13, RFC 1035, November 1987.

   [4]  Eastlake, D., "Domain Name System Security Extensions", RFC
        2535, March 1999.

   [5]  Bound, J., Carney, M., Perkins, C., Lemon, T., Volz, B. and R.
        Droms (ed.), "Dynamic Host Configuration Protocol for IPv6
        (DHCPv6)", draft-ietf-dhc-dhcpv6-23 (work in progress), February
        2002.




Bound, et al.             Expires July 2, 2002                  [Page 5]

Internet-Draft    DNS Configuration Options for DHCPv6          Jan 2002


Authors' Addresses

   Jim Bound
   Compaq Computer Corporation
   ZK3-3/W20
   110 Spit Brook Road
   Nashua, NH  03062-2698
   USA

   Phone: +1 603 884 0062
   EMail: Jim.Bound@compaq.com


   Mike Carney
   Sun Microsystems, Inc.
   Mail Stop: UMPK17-202
   901 San Antonio Road
   Palo Alto, CA  94303-4900
   USA>

   Phone: +1 650 786 4171
   EMail: mwc@eng.sun.com


   Charlie Perkins
   Nokia Research Center
   Communications Systems Lab
   313 Fairchild Drive
   Mountain View, CA  94043
   USA

   Phone: +1 650 625 2503
   EMail: charliep@iprg.nokia.com


   Nominum

   EMail: mellon@nominum.com


   Bernie Volz
   Ericsson
   959 Concord Street
   Framingham, MA  01701
   USA

   Phone: +1 508 875 3162
   EMail: bernie.volz@ericsson.com



Bound, et al.             Expires July 2, 2002                  [Page 6]

Internet-Draft    DNS Configuration Options for DHCPv6          Jan 2002


   Ralph Droms
   Cisco Systems
   250 Apollo Drive
   Chelmsford, MA  01824
   USA

   Phone: +1 978 497 4733
   EMail: rdroms@cisco.com











































Bound, et al.             Expires July 2, 2002                  [Page 7]

Internet-Draft    DNS Configuration Options for DHCPv6          Jan 2002


Full Copyright Statement

   Copyright (C) The Internet Society (2002).  All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works.  However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assigns.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.



















Bound, et al.             Expires July 2, 2002                  [Page 8]

