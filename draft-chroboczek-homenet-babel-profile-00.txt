



Network Working Group                                      J. Chroboczek
Internet-Draft                          PPS, University of Paris-Diderot
Intended status: Experimental                             March 21, 2016
Expires: September 22, 2016


             Homenet profile of the Babel routing protocol
               draft-chroboczek-homenet-babel-profile-00

Abstract

   This document defines the subset of the Babel routing protocol
   [RFC6126] and its extensions that a Homenet router must implement.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on September 22, 2016.

Copyright Notice

   Copyright (c) 2016 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.






Chroboczek             Expires September 22, 2016               [Page 1]

Internet-Draft          Babel Extension Mechanism             March 2016


Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
     1.1.  Background  . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  The Homenet profile of Babel  . . . . . . . . . . . . . . . .   3
     2.1.  Requirements  . . . . . . . . . . . . . . . . . . . . . .   3
     2.2.  Non-requirements  . . . . . . . . . . . . . . . . . . . .   5
   3.  Acknowledgments . . . . . . . . . . . . . . . . . . . . . . .   6
   4.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   6
     4.1.  Normative References  . . . . . . . . . . . . . . . . . .   6
     4.2.  Informative References  . . . . . . . . . . . . . . . . .   6
   Author's Address  . . . . . . . . . . . . . . . . . . . . . . . .   6

1.  Introduction

   The core of the Homenet protocol suite consists of HNCP [HNCP], a
   protocol used for flooding configuration information and assigning
   prefixes to links, combined with the Babel routing protocol
   [RFC6126].  Babel is an extensible, flexible and modular protocol:
   minimal implementations of Babel have been demonstrated that consist
   of a few hundred of lines of code, while the "large" implementation
   includes support for a number of extensions and consists of over ten
   thousand lines of C code.

   This document defines the exact subset of the Babel protocol and its
   extensions that is required by a conformant implementation of the
   Homenet protocol suite.

1.1.  Background

   The Babel routing protocol and its extensions are defined in a number
   of documents:

   o  The body of RFC 6126 [RFC6126] defines the core, unextended
      protocol.  It allows Babel's control data to be carried over
      either link-local IPv6 or IPv4, and in either case allows
      announcing both IPv4 and IPv6 routes.  It leaves link cost
      estimation, metric computation and route selection to the
      implementation.  Distinct implementations of core RFC 6126 Babel
      will interoperate and maintain a set of loop-free forwarding
      paths, but given conflicting metrics or route selection policies
      may give rise to persistent oscillations.

   o  The informative Appendix A of RFC 6126 suggests a simple and easy
      to implement algorithm for cost and metric computation that has
      been found to work satisfactorily in a wide range of topologies.





Chroboczek             Expires September 22, 2016               [Page 2]

Internet-Draft          Babel Extension Mechanism             March 2016


   o  While RFC 6126 does not provide an algorithm for route selection,
      its Section 3.6 suggests selecting the route with smallest metric
      with some hysteresis applied.  An algorithm that has been found to
      work well in practice is described in Section III.E of
      [DELAY-BASED].

   o  The extension mechanism for Babel is defined in RFC 7557
      [RFC7557].

   o  Four RFCs and Internet-Drafts define optional extensions to Babel:
      HMAC-based authentication [RFC7298], source-specific routing
      [BABEL-SS], radio interference aware routing [BABEL-Z], and delay-
      based routing [BABEL-RTT].  All of these extensions interoperate
      with the core protocol as well as with each other.

2.  The Homenet profile of Babel

2.1.  Requirements

      [Sentences within square brackets are editorial notes and are not
      intended for publication.]

   REQ1: a Homenet implementation of Babel MUST encapsulate Babel
   control traffic in IPv6 packets sent to the IANA-assigned port 6696
   and either the IANA-assigned multicast group ff02::1:6 or to a link-
   local unicast address.

      Rationale: since Babel is able to carry both IPv4 and IPv6 routes
      over either IPv4 or IPv6, choosing the protocol used for carrying
      control traffic is a matter of preference.  Since IPv6 has some
      features that make implementations somewhat simpler and more
      reliable (notably link-local addresses), we require carrying
      control data over IPv6.

   REQ2: a Homenet implementation of Babel MUST implement the IPv6
   subset of the protocol defined in the body of RFC 6126.

      Rationale: support for IPv6 routing is an essential component of
      the Homenet architecture.

   REQ3: a Homenet implementation of Babel SHOULD implement the IPv4
   subset of the protocol defined in the body of RFC 6126.  Use of other
   techniques for acquiring IPv4 connectivity (such as multiple layers
   of NAT) is strongly discouraged.

      Rationale: support for IPv4 will remain necessary for years to
      come, and even in pure IPv6 deployments, including code for
      supporting IPv4 has very little cost.  Since HNCP makes it easy to



Chroboczek             Expires September 22, 2016               [Page 3]

Internet-Draft          Babel Extension Mechanism             March 2016


      assign distinct IPv4 prefixes to the links in a network, it is not
      necessary to resort to multiple layers of NAT, with all of its
      problems.

      [BS suggest that this should be a MUST.]

   REQ4: a Homenet implementation of Babel MUST implement source-
   specific routing for IPv6, as defined in draft-boutier-babel-source-
   specific [BABEL-SS].  This implies that it MUST implement the
   extension mechanism defined in RFC 7557.

      Rationale: source-specific routing is an essential component of
      the Homenet architecture.  The extension mechanism is required by
      source-specific routing.  Source-specific routing for IPv4 is not
      required, since HNCP arranges things so that a single non-specific
      IPv4 default route is announced (Section 6.5 of [HNCP]).

   REQ5: a Homenet implementation of Babel MUST implement HMAC-based
   authentication, as defined in RFC 7298, MUST implement the two
   mandatory-to-implement algorithms defined in RFC 7298, and MUST
   enable and require authentication when instructed to do so by HNCP.

      Rationale: some home networks include "guest" links that can be
      used by third parties that are not necessarily fully trusted.  In
      such networks, it is essential that either the routing protocol is
      secured or the guest links are carefully firewalled.

      Generic mechanisms such as DTLS and dynamically keyed IPsec are
      not able to protect multicast traffic, and are therefore difficult
      to use with Babel.  Statically keyed IPsec, perhaps with keys
      rotated by HNCP, is vulnerable to replay attacks and would
      therefore require the addition of a nonce mechanism to Babel.

      [There is no consensus about this requirement.  A simpler solution
      is to disable Babel on guest interfaces.  MS suggests this might
      be a SHOULD.]

      [This needs expanding with an explanation of how HNCP is supposed
      to signal the use of authentication.]

   REQ6: a Homenet implementation of Babel MUST use metrics that are of
   a similar magnitude to the values suggested in Appendix A of
   RFC 6126.  In particular, it SHOULD assign costs that are no less
   than 256 to wireless links, and SHOULD assign costs between 32 and
   196 to lossless wired links.






Chroboczek             Expires September 22, 2016               [Page 4]

Internet-Draft          Babel Extension Mechanism             March 2016


      Rationale: if two implementations of Babel choose very different
      values for link costs, combining routers from different vendors
      will lead to sub-optimal routing.

   REQ7: a Homenet implementation of Babel SHOULD distinguish between
   wired and wireless links; if it is unable to determine whether a link
   is wired or wireless, it SHOULD make the worst-case hypothesis that
   the link is wireless.  It SHOULD dynamically probe the quality of
   wireless links and derive a suitable metric from its quality
   estimation.  The algorithm described in Appendix A of RFC 6126 MAY be
   used.

      Rationale: support for wireless transit links is a "killer
      feature" of Homenet, something that is requested by our users and
      easy to explain to our bosses.  In the absence of dynamically
      computed metrics, the routing protocol attempts to minimise the
      number of links crossed by a route, and therefore prefers long,
      lossy links to shorter, lossless ones.  In wireless networks,
      "hop-count routing is worst-path routing".

      [This should probably be MUST, but it might be difficult or even
      impossible to implement in some environments, especially in the
      presence of wired-to-wireless bridges.]

2.2.  Non-requirements

   NR1: a Homenet implementation of Babel MAY perform route selection by
   applying hysteresis to route metrics, as suggested in Section 3.6 of
   RFC 6126 and described in detail in Section III.E of [BABEL-RTT].
   However, it MAY simply pick the route with the smallest metric.

      Rationale: hysteresis is only useful in congested and highly
      dynamic networks.  In a typical home network, stable and
      uncongested, the feedback loop that hysteresis compensates for
      does not occur.

   NR2: a Homenet implementation of Babel MAY include support for other
   extensions to the protocol, as long as they are known to interoperate
   with both the core protocol and source-specific routing.

      Rationale: delay-based routing is useful in redundant meshes of
      tunnels, which do not occur in typical home networks (which
      typically use at most one VPN link).  Interference-aware routing,
      on the other hand, is likely to be useful in home networks, but
      the extension requires further evaluation before it can be
      recommended for widespread deployment.





Chroboczek             Expires September 22, 2016               [Page 5]

Internet-Draft          Babel Extension Mechanism             March 2016


3.  Acknowledgments

4.  References

4.1.  Normative References

   [BABEL-SS]
              Boutier, M. and J. Chroboczek, "Source-Specific Routing in
              Babel", draft-boutier-babel-source-specific-01 (work in
              progress), January 2015.

   [RFC6126]  Chroboczek, J., "The Babel Routing Protocol", RFC 6126,
              February 2011.

   [RFC7298]  Ovsienko, D., "Babel Hashed Message Authentication Code
              (HMAC) Cryptographic Authentication", RFC 7298, July 2014.

   [RFC7557]  Chroboczek, J., "Extension Mechanism for the Babel Routing
              Protocol", RFC 7557, May 2015.

4.2.  Informative References

   [BABEL-RTT]
              Jonglez, B. and J. Chroboczek, "Delay-based Metric
              Extension for the Babel Routing Protocol", draft-jonglez-
              babel-rtt-extension-01 (work in progress), May 2015.

   [BABEL-Z]  Chroboczek, J., "Diversity Routing for the Babel Routing
              Protocol", draft-chroboczek-babel-diversity-routing-00
              (work in progress), July 2014.

   [DELAY-BASED]
              Jonglez, B. and J. Chroboczek, "A delay-based routing
              metric", March 2014.

              Available online from http://arxiv.org/abs/1403.3488

   [HNCP]     Stenberg, M., Barth, S., and P. Pfister, "Home Networking
              Control Protocol", draft-ietf-homenet-hncp-09 (work in
              progress), August 2015.

Author's Address









Chroboczek             Expires September 22, 2016               [Page 6]

Internet-Draft          Babel Extension Mechanism             March 2016


   Juliusz Chroboczek
   PPS, University of Paris-Diderot
   Case 7014
   75205 Paris Cedex 13
   France

   Email: jch@pps.univ-paris-diderot.fr












































Chroboczek             Expires September 22, 2016               [Page 7]
