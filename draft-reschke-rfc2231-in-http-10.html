<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Application of RFC 2231
    Encoding to Hypertext Transfer Protocol (HTTP) Header Fields</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Application of RFC 2231
    Encoding to Hypertext Transfer Protocol (HTTP) Header Fields">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">J. Reschke</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">greenbytes</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">February 21, 2010</td></tr>
<tr><td class="header">Expires: August 25, 2010</td><td class="header">&nbsp;</td></tr>
</table></td></tr></table>
<h1><br />Application of RFC 2231
    Encoding to Hypertext Transfer Protocol (HTTP) Header Fields<br />draft-reschke-rfc2231-in-http-10</h1>

<h3>Abstract</h3>

<p>
      By default, message header field parameters in Hypertext Transfer Protocol (HTTP) messages
      can not carry characters outside the ISO-8859-1 character set. RFC 2231
      defines an escaping mechanism for use in Multipurpose Internet Mail Extensions
      (MIME) headers. This document specifies a profile of that encoding
      suitable for use in HTTP header fields.
    
</p>
<h3>Editorial Note (To be removed by RFC Editor before publication)</h3>

<p>
      There are multiple HTTP header fields that already use RFC 2231 encoding
      in practice (Content-Disposition) or might use it in the future
      (Link). The purpose of this document is to provide a single place where
      the generic aspects of RFC 2231 encoding in HTTP header fields are defined.
    
</p>
<p>
      Distribution of this document is unlimited. Although this is not a work
      item of the HTTPbis Working Group, comments should be sent to the 
      Hypertext Transfer Protocol (HTTP) mailing list at <a href='mailto:ietf-http-wg@w3.org'>ietf-http-wg@w3.org</a>,
      which may be joined by sending a message with subject 
      "subscribe" to <a href='mailto:ietf-http-wg-request@w3.org?subject=subscribe'>ietf-http-wg-request@w3.org</a>.
    
</p>
<p>
      Discussions of the HTTPbis Working Group are archived at
      <a href='http://lists.w3.org/Archives/Public/ietf-http-wg/'>http://lists.w3.org/Archives/Public/ietf-http-wg/</a>.               
    
</p>
<p>
      XML versions, latest edits and the issues list for this document
      are available from <a href='http://greenbytes.de/tech/webdav/#draft-reschke-rfc2231-in-http'>http://greenbytes.de/tech/webdav/#draft-reschke-rfc2231-in-http</a>.
      A collection of test cases is available at <a href='http://greenbytes.de/tech/tc2231/'>http://greenbytes.de/tech/tc2231/</a>.
    
</p>
<p></p>
<blockquote class="text">
<p>
        Note: as of January 2010, there were at least three independent
        implementations of the encoding defined in <a class='info' href='#character.set.and.language.information'>Section&nbsp;3.2<span> (</span><span class='info'>Parameter Value Character Set and Language Information</span><span>)</span></a>:
        Konqueror (trunk), Mozilla Firefox, and Opera.
      
</p>
</blockquote>

<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on August 25, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#introduction">1.</a>&nbsp;
Introduction<br />
<a href="#anchor1">2.</a>&nbsp;
Notational Conventions<br />
<a href="#anchor2">3.</a>&nbsp;
A Profile of RFC 2231 for Use in HTTP<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#parameter.continuations">3.1.</a>&nbsp;
Parameter Continuations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#character.set.and.language.information">3.2.</a>&nbsp;
Parameter Value Character Set and Language Information<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#examples">3.2.1.</a>&nbsp;
Examples<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#language.specification.in.encoded.words">3.3.</a>&nbsp;
Language specification in Encoded Words<br />
<a href="#usage.guidelines">4.</a>&nbsp;
Guidelines for Usage in HTTP Header Field Definitions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">4.1.</a>&nbsp;
When to Use the Extension<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">4.2.</a>&nbsp;
Error Handling<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">4.3.</a>&nbsp;
Using Multiple Instances for Internationalization<br />
<a href="#security.considerations">5.</a>&nbsp;
Security Considerations<br />
<a href="#iana.considerations">6.</a>&nbsp;
IANA Considerations<br />
<a href="#anchor6">7.</a>&nbsp;
Acknowledgements<br />
<a href="#rfc.references1">8.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">8.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">8.2.</a>&nbsp;
Informative References<br />
<a href="#history">Appendix&nbsp;A.</a>&nbsp;
Document History and Future Plans (to be removed by RFC Editor before publication)<br />
<a href="#change.log">Appendix&nbsp;B.</a>&nbsp;
Change Log (to be removed by RFC Editor before publication)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">B.1.</a>&nbsp;
Since draft-reschke-rfc2231-in-http-00<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">B.2.</a>&nbsp;
Since draft-reschke-rfc2231-in-http-01<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">B.3.</a>&nbsp;
Since draft-reschke-rfc2231-in-http-02<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">B.4.</a>&nbsp;
Since draft-reschke-rfc2231-in-http-03<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">B.5.</a>&nbsp;
Since draft-reschke-rfc2231-in-http-04<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">B.6.</a>&nbsp;
Since draft-reschke-rfc2231-in-http-05<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">B.7.</a>&nbsp;
Since draft-reschke-rfc2231-in-http-06<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor16">B.8.</a>&nbsp;
Since draft-reschke-rfc2231-in-http-07<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor17">B.9.</a>&nbsp;
Since draft-reschke-rfc2231-in-http-08<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor18">B.10.</a>&nbsp;
Since draft-reschke-rfc2231-in-http-09<br />
<a href="#anchor19">Appendix&nbsp;C.</a>&nbsp;
Resolved issues (to be removed by RFC Editor before publication)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor20">C.1.</a>&nbsp;
rfc2978-normative<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor21">C.2.</a>&nbsp;
rfc3986-normative<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor22">C.3.</a>&nbsp;
usascii-normative<br />
<a href="#anchor23">Appendix&nbsp;D.</a>&nbsp;
Open issues (to be removed by RFC Editor prior to publication)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor24">D.1.</a>&nbsp;
edit<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor25">D.2.</a>&nbsp;
parameter-abnf<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor26">D.3.</a>&nbsp;
iso8859<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor27">D.4.</a>&nbsp;
when-ext-value<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor28">D.5.</a>&nbsp;
i18n-spoofing<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Author's Address<br />
</p>
<br clear="all" />

<a name="introduction"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
  By default, message header field parameters in HTTP (<a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a>) messages
  can not carry characters outside the ISO-8859-1 character set (<a class='info' href='#ISO-8859-1'>[ISO&#8209;8859&#8209;1]<span> (</span><span class='info'>International Organization for Standardization, &ldquo;Information technology -- 8-bit single-byte coded graphic character sets -- Part 1: Latin alphabet No. 1,&rdquo; 1998.</span><span>)</span></a>). RFC 2231
  (Appendix  of <a class='info' href='#RFC2231'>[RFC2231]<span> (</span><span class='info'>Freed, N. and K. Moore, &ldquo;MIME Parameter Value and Encoded Word Extensions: Character Sets, Languages, and Continuations,&rdquo; November&nbsp;1997.</span><span>)</span></a>) defines an escaping mechanism for use in MIME headers.
  This document specifies a profile of that encoding for use in HTTP header fields.

</p>
<p></p>
<blockquote class="text">
<p>
    Note: this profile does not apply to message payloads
    transmitted over HTTP, such as when using the media type "multipart/form-data"
    (<a class='info' href='#RFC2388'>[RFC2388]<span> (</span><span class='info'>Masinter, L., &ldquo;Returning Values from Forms:  multipart/form-data,&rdquo; August&nbsp;1998.</span><span>)</span></a>).
  
</p>
</blockquote>

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Notational Conventions</h3>

<p>
  The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
  "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document
  are to be interpreted as described in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.

</p>
<p>
  This specification uses the ABNF (Augmented Backus-Naur Form) notation defined in
  <a class='info' href='#RFC5234'>[RFC5234]<span> (</span><span class='info'>Crocker, D., Ed. and P. Overell, &ldquo;Augmented BNF for Syntax Specifications: ABNF,&rdquo; January&nbsp;2008.</span><span>)</span></a>. The following core rules are included by
  reference, as defined in <a class='info' href='#RFC5234'>[RFC5234]<span> (</span><span class='info'>Crocker, D., Ed. and P. Overell, &ldquo;Augmented BNF for Syntax Specifications: ABNF,&rdquo; January&nbsp;2008.</span><span>)</span></a>, Appendix B.1:
  ALPHA (letters), DIGIT (decimal 0-9), HEXDIG (hexadecimal 0-9/A-F/a-f) and
  LWSP (linear white space).

</p>
<p>
  Note that this specification uses the term "character set" for consistency
  with other IETF specifications such as RFC 2277 (see <a class='info' href='#RFC2277'>[RFC2277]<span> (</span><span class='info'>Alvestrand, H., &ldquo;IETF Policy on Character Sets and Languages,&rdquo; January&nbsp;1998.</span><span>)</span></a>, Section 3). A more accurate term would be "character
  encoding" (a mapping of code points to octet sequences).

</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
A Profile of RFC 2231 for Use in HTTP</h3>

<p>
  RFC 2231 defines several extensions to MIME. The sections below discuss
  if and how they apply to HTTP.

</p>
<p>
  In short:
  </p>
<ul class="text">
<li>Parameter Continuations aren't needed (<a class='info' href='#parameter.continuations'>Section&nbsp;3.1<span> (</span><span class='info'>Parameter Continuations</span><span>)</span></a>),
</li>
<li>Character Set and Language Information are useful, therefore a simple subset
    is specified (<a class='info' href='#character.set.and.language.information'>Section&nbsp;3.2<span> (</span><span class='info'>Parameter Value Character Set and Language Information</span><span>)</span></a>), and
</li>
<li>Language Specifications in Encoded Words aren't needed (<a class='info' href='#language.specification.in.encoded.words'>Section&nbsp;3.3<span> (</span><span class='info'>Language specification in Encoded Words</span><span>)</span></a>).
</li>
</ul><p>

</p>
<a name="parameter.continuations"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Parameter Continuations</h3>

<p>
  Section 3 of <a class='info' href='#RFC2231'>[RFC2231]<span> (</span><span class='info'>Freed, N. and K. Moore, &ldquo;MIME Parameter Value and Encoded Word Extensions: Character Sets, Languages, and Continuations,&rdquo; November&nbsp;1997.</span><span>)</span></a> defines a mechanism that
  deals with the length limitations that apply to MIME headers. These
  limitations do not apply to HTTP (<a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a>, Section 19.4.7). 

</p>
<p>
  Thus in HTTP, senders MUST NOT use parameter continuations, and 
  therefore recipients do not need to support them.

</p>
<a name="character.set.and.language.information"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Parameter Value Character Set and Language Information</h3>

<p>
  Section 4 of <a class='info' href='#RFC2231'>[RFC2231]<span> (</span><span class='info'>Freed, N. and K. Moore, &ldquo;MIME Parameter Value and Encoded Word Extensions: Character Sets, Languages, and Continuations,&rdquo; November&nbsp;1997.</span><span>)</span></a> specifies how to embed
  language information into parameter values, and also how to encode
  non-ASCII characters, dealing with restrictions both in MIME and HTTP
  header parameters.

</p>
<p>
  However, RFC 2231 does not specify a mandatory-to-implement character set,
  making it hard for senders to decide which character set to use.
  Thus, recipients implementing this specification MUST support the
  character sets "ISO-8859-1" <a class='info' href='#ISO-8859-1'>[ISO&#8209;8859&#8209;1]<span> (</span><span class='info'>International Organization for Standardization, &ldquo;Information technology -- 8-bit single-byte coded graphic character sets -- Part 1: Latin alphabet No. 1,&rdquo; 1998.</span><span>)</span></a> and "UTF-8"
  <a class='info' href='#RFC3629'>[RFC3629]<span> (</span><span class='info'>Yergeau, F., &ldquo;UTF-8, a transformation format of ISO 10646,&rdquo; November&nbsp;2003.</span><span>)</span></a>.

</p>
<p>
  Furthermore, RFC 2231 allows leaving out the character set information.
  The profile defined by this specification does not allow that.

</p>
<p>
  The syntax for parameters is defined in Section 3.6 of <a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a>
  (with RFC 2616 implied LWS translated to RFC 5234 LWSP):

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  parameter     = attribute LWSP "=" LWSP value
</pre></div><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>  <dfn>attribute</dfn>     = <cite class='id'>token</cite>
  <dfn>value</dfn>         = <cite class='id'>token</cite> / <cite class='id'>quoted-string</cite>

  <dfn>quoted-string</dfn> = &lt;<span class='str'>quoted-string, defined in [RFC2616], Section 2.2</span>&gt;
  <dfn>token</dfn>         = &lt;<span class='str'>token, defined in [RFC2616], Section 2.2</span>&gt;
</pre></div>
<p>
  
  This specification extends the grammar to:

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  <dfn>parameter</dfn>     = <cite class='id'>reg-parameter</cite> / <cite class='id'>ext-parameter</cite>

  <dfn>reg-parameter</dfn> = <cite class='id'>attribute</cite> <cite class='key'>LWSP</cite> "<span class='str'>=</span>" <cite class='key'>LWSP</cite> <cite class='id'>value</cite>

  <dfn>ext-parameter</dfn> = <cite class='id'>attribute</cite> "<span class='str'>*</span>" <cite class='key'>LWSP</cite> "<span class='str'>=</span>" <cite class='key'>LWSP</cite> <cite class='id'>ext-value</cite>

  <dfn>ext-value</dfn>     = <cite class='id'>charset</cite>  "<span class='str'>'</span>" [ <cite class='id'>language</cite> ] "<span class='str'>'</span>" <cite class='id'>value-chars</cite>
                <em>; extended-initial-value,</em>
                <em>; defined in [RFC2231], Section 7</em>

  <dfn>charset</dfn>       = "<span class='str'>UTF-8</span>" / "<span class='str'>ISO-8859-1</span>" / <cite class='id'>mime-charset</cite>

  <dfn>mime-charset</dfn>  = <span class='rep'>1*</span><cite class='id'>mime-charsetc</cite>
  <dfn>mime-charsetc</dfn> = <cite class='key'>ALPHA</cite> / <cite class='key'>DIGIT</cite>
                / "<span class='str'>!</span>" / "<span class='str'>#</span>" / "<span class='str'>$</span>" / "<span class='str'>%</span>" / "<span class='str'>&amp;</span>"
                / "<span class='str'>+</span>" / "<span class='str'>-</span>" / "<span class='str'>^</span>" / "<span class='str'>_</span>" / "<span class='str'>`</span>"
                / "<span class='str'>{</span>" / "<span class='str'>}</span>" / "<span class='str'>~</span>"
                <em>; as &lt;mime-charset&gt; in Section 2.3 of [RFC2978]</em>
                <em>; except that the single quote is not included</em>

  <dfn>language</dfn>      = &lt;<span class='str'>Language-Tag, defined in [RFC5646], Section 2.1</span>&gt;

  <dfn>value-chars</dfn>   = <span class='rep'>*</span>( <cite class='id'>pct-encoded</cite> / <cite class='id'>attr-char</cite> )

  <dfn>pct-encoded</dfn>   = "<span class='str'>%</span>" <cite class='key'>HEXDIG</cite> <cite class='key'>HEXDIG</cite>
                <em>; see [RFC3986], Section 2.1</em>

  <dfn>attr-char</dfn>     = <cite class='key'>ALPHA</cite> / <cite class='key'>DIGIT</cite>
                / "<span class='str'>!</span>" / "<span class='str'>#</span>" / "<span class='str'>$</span>" / "<span class='str'>&amp;</span>" / "<span class='str'>+</span>" / "<span class='str'>-</span>" / "<span class='str'>.</span>"
                / "<span class='str'>^</span>" / "<span class='str'>_</span>" / "<span class='str'>`</span>" / "<span class='str'>|</span>" / "<span class='str'>~</span>"
                <em>; token except ( "*" / "'" / "%" )</em>
</pre></div>
<p>
  Thus, a parameter is either regular parameter (reg-parameter), as previously
  defined in Section 3.6 of <a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a>, or an extended
  parameter (ext-parameter).

</p>
<p>
  Extended parameters are those where the left hand side of the assignment
  ends with an asterisk character.

</p>
<p>
  The value part of an extended parameter (ext-value) is a token that consists
  of three parts: the REQUIRED character set name (charset), the OPTIONAL
  language information (language), and a character sequence representing the
  actual value (value-chars), separated by single quote
  characters. Note that both character set names and
  language tags are restricted to the US-ASCII character set, and are matched
  case-insensitively (see <a class='info' href='#RFC2978'>[RFC2978]<span> (</span><span class='info'>Freed, N. and J. Postel, &ldquo;IANA Charset Registration Procedures,&rdquo; October&nbsp;2000.</span><span>)</span></a>, Section 2.3 and
  <a class='info' href='#RFC5646'>[RFC5646]<span> (</span><span class='info'>Phillips, A., Ed. and M. Davis, Ed., &ldquo;Tags for Identifying Languages,&rdquo; September&nbsp;2009.</span><span>)</span></a>, Section 2.1.1).

</p>
<p>
  Inside the value part, characters not contained in attr-char are
  encoded into an octet sequence using the specified character set. That octet
  sequence then is percent-encoded as specified in Section 2.1 of <a class='info' href='#RFC3986'>[RFC3986]<span> (</span><span class='info'>Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;Uniform Resource Identifier (URI): Generic Syntax,&rdquo; January&nbsp;2005.</span><span>)</span></a>.

</p>
<p>
  Producers MUST NOT use character sets other than "UTF-8" (<a class='info' href='#RFC3629'>[RFC3629]<span> (</span><span class='info'>Yergeau, F., &ldquo;UTF-8, a transformation format of ISO 10646,&rdquo; November&nbsp;2003.</span><span>)</span></a>)
  or "ISO-8859-1" (<a class='info' href='#ISO-8859-1'>[ISO&#8209;8859&#8209;1]<span> (</span><span class='info'>International Organization for Standardization, &ldquo;Information technology -- 8-bit single-byte coded graphic character sets -- Part 1: Latin alphabet No. 1,&rdquo; 1998.</span><span>)</span></a>). 
  Extension character sets (ext-charset) are reserved for future use.

</p>
<p></p>
<blockquote class="text">
<p>
    Note: recipients should be prepared to handle encoding
    errors, such as malformed or incomplete percent escape sequences, or
    non-decodable octet sequences, in a robust manner. This specification
    does not mandate any specific behavior, for instance the following
    strategies are all acceptable:
    </p>
<ul class="text">
<li>ignoring the parameter,
</li>
<li>stripping a non-decodable octet sequence,
</li>
<li>substituting a non-decodable octet sequence by a replacement
      character, such as the Unicode character U+FFFD (Replacement Character).
</li>
</ul>
  

</blockquote>

<p></p>
<blockquote class="text">
<p>
    Note: the RFC 2616 token production (<a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a>, Section 2.2)
    differs from the production used in RFC 2231 (imported from Section 5.1 of <a class='info' href='#RFC2045'>[RFC2045]<span> (</span><span class='info'>Freed, N. and N. Borenstein, &ldquo;Multipurpose Internet Mail Extensions (MIME) Part One: Format of Internet Message Bodies,&rdquo; November&nbsp;1996.</span><span>)</span></a>)
    in that curly braces ("{" and "}") are excluded. Thus, these two
    characters are excluded from the attr-char production as well.     
  
</p>
</blockquote>

<p></p>
<blockquote class="text">
<p>
    Note:  the &lt;mime-charset&gt; ABNF defined here differs from
    the one in Section 2.3 of <a class='info' href='#RFC2978'>[RFC2978]<span> (</span><span class='info'>Freed, N. and J. Postel, &ldquo;IANA Charset Registration Procedures,&rdquo; October&nbsp;2000.</span><span>)</span></a> in that it does
    not allow the single quote character (see also <a href='http://www.rfc-editor.org/errata_search.php?eid=1912'>RFC Editor Errata ID 1912</a>). In practice, no character set names
    using that character have been registered at the time of this writing.
  
</p>
</blockquote>

<a name="examples"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.1"></a><h3>3.2.1.&nbsp;
Examples</h3>

<p>
  Non-extended notation, using "token":

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  foo: bar; title=Economy
</pre></div>
<p>
  Non-extended notation, using "quoted-string":

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  foo: bar; title="US-$ rates"
</pre></div>
<p>
  Extended notation, using the unicode character U+00A3 (POUND SIGN):

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  foo: bar; title*=iso-8859-1'en'%A3%20rates
</pre></div>
<p>
  Note: the Unicode pound sign character U+00A3 was encoded using
  ISO-8859-1 into the single octet A3, then percent-encoded. Also note
  that the space character was encoded as %20, as it is not contained in
  attr-char.

</p>
<p>
  Extended notation, using the unicode characters U+00A3 (POUND SIGN)
  and U+20AC (EURO SIGN):

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  foo: bar; title*=UTF-8''%c2%a3%20and%20%e2%82%ac%20rates
</pre></div>
<p>
  Note: the unicode pound sign character U+00A3 was encoded using
  UTF-8 into the octet sequence C2 A3, then percent-encoded. Likewise,
  the unicode euro sign character U+20AC was encoded into the octet
  sequence E2 82 AC, then percent-encoded. Also note that HEXDIG allows
  both lower-case and upper-case character, so recipients must understand
  both, and that the language information is optional, while the character
  set is not.

</p>
<a name="language.specification.in.encoded.words"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
Language specification in Encoded Words</h3>

<p>
  Section 5 of <a class='info' href='#RFC2231'>[RFC2231]<span> (</span><span class='info'>Freed, N. and K. Moore, &ldquo;MIME Parameter Value and Encoded Word Extensions: Character Sets, Languages, and Continuations,&rdquo; November&nbsp;1997.</span><span>)</span></a> extends the encoding
  defined in <a class='info' href='#RFC2047'>[RFC2047]<span> (</span><span class='info'>Moore, K., &ldquo;MIME (Multipurpose Internet Mail Extensions) Part Three: Message Header Extensions for Non-ASCII Text,&rdquo; November&nbsp;1996.</span><span>)</span></a> to also support language specification
  in encoded words. Although the HTTP/1.1 specification does refer to RFC 2047
  (<a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a>, Section 2.2),
  it's not clear to which header field exactly it applies, and whether it is
  implemented in practice (see <a href='http://tools.ietf.org/wg/httpbis/trac/ticket/111'>http://tools.ietf.org/wg/httpbis/trac/ticket/111</a>
  for details).

</p>
<p>
  Thus, the RFC 2231 profile defined by this specification does not include
  this feature.

</p>
<a name="usage.guidelines"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Guidelines for Usage in HTTP Header Field Definitions</h3>

<p>
  Specifications of HTTP header fields that use the extensions defined
  in <a class='info' href='#character.set.and.language.information'>Section&nbsp;3.2<span> (</span><span class='info'>Parameter Value Character Set and Language Information</span><span>)</span></a> should clearly
  state that. A simple way to achieve this is to normatively reference
  this specification, and to include the <a class='info' href='#bnf'>ext-value</a>
  production into the ABNF for that header field.

</p>
<p>For instance:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  foo-header  = "foo" LWSP ":" LWSP token ";" LWSP title-param
  title-param = "title" LWSP "=" LWSP value
              / "title*" LWSP "=" LWSP ext-value
  ext-value   = &lt;see RFCxxxx, Section 3.2&gt;
</pre></div>
<p>
  <a class='info' href='#comment.rfcno'>[rfcno]<span> (</span><span class='info'>Note to RFC Editor: in the figure above, please replace &quot;xxxx&quot; by the RFC number assigned to this specification.</span><span>)</span></a><a name='rfcno'></a>

</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
When to Use the Extension</h3>

<p>
  Section 4.2 of <a class='info' href='#RFC2277'>[RFC2277]<span> (</span><span class='info'>Alvestrand, H., &ldquo;IETF Policy on Character Sets and Languages,&rdquo; January&nbsp;1998.</span><span>)</span></a> requires that protocol
  elements containing text are able to carry language information. Thus, the <a class='info' href='#bnf'>ext-value</a>
  production should always be used when the parameter value is of textual
  nature.

</p>
<p>
  Furthermore, the extension should also be used whenever the parameter value
  needs to carry characters not present in the US-ASCII (<a class='info' href='#USASCII'>[USASCII]<span> (</span><span class='info'>American National Standards Institute, &ldquo;Coded Character Set -- 7-bit American Standard Code for Information Interchange,&rdquo; 1986.</span><span>)</span></a>)
  character set (note that it would be unacceptable to define a new parameter that
  would be restricted to a subset of the Unicode character set).

</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Error Handling</h3>

<p>
  Header specifications that include parameters should also specify whether
  same-named parameters can occur multiple times. If repetitions are not
  allowed (and this is believed to be the common case), the specification
  should state whether regular or the extended syntax takes precedence.
  In the latter case, this could be used by producers to use both formats
  without breaking recipients that do not understand the syntax.

</p>
<p>Example:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  foo: bar; title="EURO exchange rates";
            title*=utf-8''%e2%82%ac%20exchange%20rates
</pre></div>
<p>In this case, the sender provides an ASCII version of the title
  for legacy recipients, but also includes an internationalized version for
  recipients understanding this specification -- the latter obviously 
  should prefer the new syntax over the old one.
</p>
<p></p>
<blockquote class="text">
<p>
    Note: at the time of this writing, many implementations failed
    to ignore the form they do not understand, or prioritize the ASCII form
    although the extended syntax was present.
  
</p>
</blockquote>

<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
Using Multiple Instances for Internationalization</h3>

<p>
  It is expected that in many cases, internationalization of parameters in response headers
  is implemented using server driven content negotiation (<a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a>, Section 12.1)
  using the Accept-Language header (<a class='info' href='#RFC2616'>[RFC2616]<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a>, Section 14.4).
  However, the format described in this specification also allows using
  multiple instances providing multiple languages in a single header.
  Specifications that want to take advantage of this should clearly specify
  the expected processing by the recipient.

</p>
<p>Example:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  foo: bar; title*=utf-8'en'Document%20Title;
            title*=utf-8'de'Titel%20des%20Dokuments
</pre></div>
<a name="security.considerations"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Security Considerations</h3>

<p>
  This document does not discuss security issues and is not believed to raise
  any security issues not already endemic in HTTP.

</p>
<a name="iana.considerations"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
IANA Considerations</h3>

<p>
  There are no IANA Considerations related to this specification.

</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Acknowledgements</h3>

<p>
  Thanks to Martin Duerst and Frank Ellermann for help figuring out ABNF details,
  to Graham Klyne and Alexey Melnikov for general review, and to
  Benjamin Carlyle and Roar Lauritzsen for implementer's feedback.

</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="ISO-8859-1">[ISO-8859-1]</a></td>
<td class="author-text">International Organization for Standardization, &ldquo;Information technology -- 8-bit single-byte coded graphic character sets -- Part 1: Latin alphabet No. 1,&rdquo; ISO/IEC&nbsp;8859-1:1998, 1998.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2616">[RFC2616]</a></td>
<td class="author-text"><a href="mailto:fielding@ics.uci.edu">Fielding, R.</a>, <a href="mailto:jg@w3.org">Gettys, J.</a>, <a href="mailto:mogul@wrl.dec.com">Mogul, J.</a>, <a href="mailto:frystyk@w3.org">Frystyk, H.</a>, <a href="mailto:masinter@parc.xerox.com">Masinter, L.</a>, <a href="mailto:paulle@microsoft.com">Leach, P.</a>, and <a href="mailto:timbl@w3.org">T. Berners-Lee</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2616">Hypertext Transfer Protocol -- HTTP/1.1</a>,&rdquo; RFC&nbsp;2616, June&nbsp;1999.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2978">[RFC2978]</a></td>
<td class="author-text">Freed, N. and J. Postel, &ldquo;<a href="http://tools.ietf.org/html/rfc2978">IANA Charset Registration Procedures</a>,&rdquo; BCP&nbsp;19, RFC&nbsp;2978, October&nbsp;2000.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3629">[RFC3629]</a></td>
<td class="author-text"><a href="mailto:fyergeau@alis.com">Yergeau, F.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc3629">UTF-8, a transformation format of ISO 10646</a>,&rdquo; RFC&nbsp;3629, STD&nbsp;63, November&nbsp;2003.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3986">[RFC3986]</a></td>
<td class="author-text"><a href="mailto:timbl@w3.org">Berners-Lee, T.</a>, <a href="mailto:fielding@gbiv.com">Fielding, R.</a>, and <a href="mailto:LMM@acm.org">L. Masinter</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc3986">Uniform Resource Identifier (URI): Generic Syntax</a>,&rdquo; RFC&nbsp;3986, STD&nbsp;66, January&nbsp;2005.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5234">[RFC5234]</a></td>
<td class="author-text"><a href="mailto:dcrocker@bbiw.net">Crocker, D., Ed.</a> and <a href="mailto:paul.overell@thus.net">P. Overell</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc5234">Augmented BNF for Syntax Specifications: ABNF</a>,&rdquo; STD&nbsp;68, RFC&nbsp;5234, January&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5646">[RFC5646]</a></td>
<td class="author-text"><a href="mailto:addison@inter-locale.com">Phillips, A., Ed.</a> and <a href="mailto:mark.davis@google.com">M. Davis, Ed.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc5646">Tags for Identifying Languages</a>,&rdquo; BCP&nbsp;47, RFC&nbsp;5646, September&nbsp;2009.</td></tr>
<tr><td class="author-text" valign="top"><a name="USASCII">[USASCII]</a></td>
<td class="author-text">American National Standards Institute, &ldquo;Coded Character Set -- 7-bit American Standard Code for Information Interchange,&rdquo; ANSI&nbsp;X3.4, 1986.</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2045">[RFC2045]</a></td>
<td class="author-text"><a href="mailto:ned@innosoft.com">Freed, N.</a> and <a href="mailto:nsb@nsb.fv.com">N. Borenstein</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2045">Multipurpose Internet Mail Extensions (MIME) Part One: Format of Internet Message Bodies</a>,&rdquo; RFC&nbsp;2045, November&nbsp;1996.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2047">[RFC2047]</a></td>
<td class="author-text"><a href="mailto:moore@cs.utk.edu">Moore, K.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2047">MIME (Multipurpose Internet Mail Extensions) Part Three: Message Header Extensions for Non-ASCII Text</a>,&rdquo; RFC&nbsp;2047, November&nbsp;1996.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2231">[RFC2231]</a></td>
<td class="author-text"><a href="mailto:ned.freed@innosoft.com">Freed, N.</a> and <a href="mailto:moore@cs.utk.edu">K. Moore</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2231">MIME Parameter Value and Encoded Word Extensions: Character Sets, Languages, and Continuations</a>,&rdquo; RFC&nbsp;2231, November&nbsp;1997.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2277">[RFC2277]</a></td>
<td class="author-text"><a href="mailto:Harald.T.Alvestrand@uninett.no">Alvestrand, H.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2277">IETF Policy on Character Sets and Languages</a>,&rdquo; BCP&nbsp;18, RFC&nbsp;2277, January&nbsp;1998.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2388">[RFC2388]</a></td>
<td class="author-text"><a href="mailto:masinter@parc.xerox.com">Masinter, L.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2388">Returning Values from Forms:  multipart/form-data</a>,&rdquo; RFC&nbsp;2388, August&nbsp;1998.</td></tr>
</table>

<a name="history"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
Document History and Future Plans (to be removed by RFC Editor before publication)</h3>

<p>
  Problems with the internationalization of the HTTP Content-Disposition header
  field have been known for many years (see test cases at
  <a href='http://greenbytes.de/tech/tc2231/'>http://greenbytes.de/tech/tc2231/</a>).

</p>
<p>
  During IETF 72 (<a href='http://tools.ietf.org/wg/httpbis/minutes?item=minutes72.html'>http://tools.ietf.org/wg/httpbis/minutes?item=minutes72.html</a>),
  the HTTPbis Working Group shortly discussed how to deal with the underspecification
  of (1) Content-Disposition, and its (2) internationalization aspects.
  Back then, there was rough consensus in the room to move the definition
  into a separate draft.

</p>
<p>
  This specification addresses problem (2), by defining a simple subset of
  the encoding format defined in RFC 2231. A separate specification,
  draft-reschke-rfc2183-in-http, is planned to address problem (1). Note that 
  this approach was chosen because Content-Disposition is just an example for
  an HTTP header field using this kind of encoding. Another example
  is the currently proposed Link header field (draft-nottingham-http-link-header).

</p>
<p>
  This document is planned to be published on the IETF Standards Track, so that
  other standards-track level documents can depend on it, such as the new
  specification of Content-Disposition, or potentially future revisions of
  the HTTP Link Header specification.

</p>
<p>
  Also note that this document specifies a proper subset of the extensions
  defined in RFC 2231, but does not normatively refer to it. Thus, RFC 2231
  can be revised separately, should the email community decide to. 

</p>
<a name="change.log"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B"></a><h3>Appendix B.&nbsp;
Change Log (to be removed by RFC Editor before publication)</h3>

<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.1"></a><h3>B.1.&nbsp;
Since draft-reschke-rfc2231-in-http-00</h3>

<p>
  Use RFC5234-style ABNF, closer to the one used in RFC 2231.

</p>
<p>
  Make RFC 2231 dependency informative, so this specification can evolve
  independently.

</p>
<p>
  Explain the ABNF in prose.

</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.2"></a><h3>B.2.&nbsp;
Since draft-reschke-rfc2231-in-http-01</h3>

<p>
  Remove unneeded RFC5137 notation (code point vs character).

</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.3"></a><h3>B.3.&nbsp;
Since draft-reschke-rfc2231-in-http-02</h3>

<p>
  And and resolve issues "charset", "repeats"
  and "rfc4646".

</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.4"></a><h3>B.4.&nbsp;
Since draft-reschke-rfc2231-in-http-03</h3>

<p>
  And and resolve issue "charsetmatch".

</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.5"></a><h3>B.5.&nbsp;
Since draft-reschke-rfc2231-in-http-04</h3>

<p>
  Add and resolve issues "badseq" and
  "tokenquotcharset".

</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.6"></a><h3>B.6.&nbsp;
Since draft-reschke-rfc2231-in-http-05</h3>

<p>
  Say "header field" instead of "header" in the context of HTTP.

</p>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.7"></a><h3>B.7.&nbsp;
Since draft-reschke-rfc2231-in-http-06</h3>

<p>
  Add an appendix discussing document history and future plans, to be removed before publication.

</p>
<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.8"></a><h3>B.8.&nbsp;
Since draft-reschke-rfc2231-in-http-07</h3>

<p>
  Add and resolve issues "impl" and "rel-2388".

</p>
<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.9"></a><h3>B.9.&nbsp;
Since draft-reschke-rfc2231-in-http-08</h3>

<p>
  Editorial improvements.
  Add and resolve issues "attrcharvstoken" and
  "tokengrammar".

</p>
<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.10"></a><h3>B.10.&nbsp;
Since draft-reschke-rfc2231-in-http-09</h3>

<p>
  Add issues "i18n-spoofing",
  "iso8859",
  "parameter-abnf",
  and
  "when-ext-value".
  Add and resolve issues
  "rfc2978-normative",
  "rfc3986-normative" and
  "usascii-normative".

</p>
<a name="anchor19"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.C"></a><h3>Appendix C.&nbsp;
Resolved issues (to be removed by RFC Editor before publication)</h3>

<p>
          Issues that were either rejected or resolved in this version of this
          document.
        
</p>
<a name="anchor20"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.C.1"></a><h3>C.1.&nbsp;
rfc2978-normative</h3>

<p>
        In Section 3.2:
      
</p>
<p>
      Type: change
</p>
<p>julian.reschke@greenbytes.de (2010-02-20): 
    The reference to RFC2978 needs to be normative
    (reported by Alexey Melnikov).
  
</p>
<p>Resolution (2010-02-20): Done.
</p>
<a name="anchor21"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.C.2"></a><h3>C.2.&nbsp;
rfc3986-normative</h3>

<p>
        In Section 3.2:
      
</p>
<p>
      Type: change
</p>
<p>julian.reschke@greenbytes.de (2010-02-20): 
    The reference to percent-encoding (RFC3986) needs to be normative
    (reported by Alexey Melnikov).
  
</p>
<p>Resolution (2010-02-20): Done.
</p>
<a name="anchor22"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.C.3"></a><h3>C.3.&nbsp;
usascii-normative</h3>

<p>
        In Section 4.1:
      
</p>
<p>
      Type: change
</p>
<p>julian.reschke@greenbytes.de (2010-02-20): 
    The reference to USASCII needs to be normative.
  
</p>
<p>Resolution (2010-02-20): Done.
</p>
<a name="anchor23"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.D"></a><h3>Appendix D.&nbsp;
Open issues (to be removed by RFC Editor prior to publication)</h3>

<a name="anchor24"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.D.1"></a><h3>D.1.&nbsp;
edit</h3>

<p>
      Type: edit
</p>
<p>julian.reschke@greenbytes.de (2009-04-17): 
    Umbrella issue for editorial fixes/enhancements.
  
</p>
<a name="anchor25"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.D.2"></a><h3>D.2.&nbsp;
parameter-abnf</h3>

<p>
        In Section 3.2:
      
</p>
<p>
      Type: change
</p>
<p>julian.reschke@greenbytes.de (2010-02-20): 
    The ABNF for reg-parameter and ext-parameter is ambiguous, as "*" is a valid
    token character; furthermore, RFC 2616's "attribute" production allows "*"
    while RFC 2231's does not.
    (reported by Alexey Melnikov).
  
</p>
<p>julian.reschke@greenbytes.de (2010-02-21): 
    Proposal: destrict the allowable character set in parameter names to
    exclude "*" (amd maybe even more non-name characters?). Also, consider
    extending the set of value characters (for the right hand side) to allow
    more characters that can be umabigouously parsed outside quoted strings,
    such as "/".
  
</p>
<a name="anchor26"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.D.3"></a><h3>D.3.&nbsp;
iso8859</h3>

<p>
        In Section 3.2:
      
</p>
<p>
      Type: change
</p>
<p>julian.reschke@greenbytes.de (2010-02-20): 
    The protocol could be further simplified by mandating UTF-8 only
    (reported by Alexey Melnikov).
    On the other hand and not surprinsingly, testing shows that ISO-8859-1
    support is widely implemented. The author is looking for community
    feedback on this choice.
  
</p>
<a name="anchor27"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.D.4"></a><h3>D.4.&nbsp;
when-ext-value</h3>

<p>
        In Section 4.1:
      
</p>
<p>
      Type: change
</p>
<p>julian.reschke@greenbytes.de (2010-02-18): 
    There's no point in using ext-value when the language is unknown and no
    "special" characters are present.
  
</p>
<a name="anchor28"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.D.5"></a><h3>D.5.&nbsp;
i18n-spoofing</h3>

<p>
        In Section 5:
      
</p>
<p>
      Type: change
</p>
<p>&lt;http://www.ietf.org/mail-archive/web/apps-discuss/current/msg01329.html&gt;
</p>
<p>GK@ninebynine.org (2010-02-20): 
    I note that the security considerations section says nothing about possible
    character "spoofing" - i.e. making a displayed prompt or value appear to be
    something other than it is. E.g. Non-ASCII characters have been used to set
    up exploits involving dodgy URIs that may appear to a user to be legitimate.
  
</p>
<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Author's Address</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Julian F. Reschke</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">greenbytes GmbH</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Hafenweg 16</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Muenster, NW  48155</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Germany</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:julian.reschke@greenbytes.de">julian.reschke@greenbytes.de</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://greenbytes.de/tech/webdav/">http://greenbytes.de/tech/webdav/</a></td></tr>
</table>
</body></html>
