<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>PW Bonding</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="PW Bonding">
<meta name="keywords" content="pseudowire, inverse multiplexing, bonding, Internet-Draft">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">PWE3</td><td class="header">Y(J). Stein</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">I. Mendelsohn</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">R. Insler</td></tr>
<tr><td class="header">Expires: December 27, 2008</td><td class="header">RAD Data Communications</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">June 25, 2008</td></tr>
</table></td></tr></table>
<h1><br />PW Bonding<br />draft-stein-pwe3-pwbonding-00.txt</h1>

<h3>Status of this Memo</h3>
<p>
By submitting this Internet-Draft,
each author represents that any applicable patent or other IPR claims of which
he or she is aware have been or will be disclosed,
and any of which he or she becomes aware will be disclosed,
in accordance with Section&nbsp;6 of BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on December 27, 2008.</p>

<h3>Abstract</h3>

<p>
  There are times when pseudowires must be transported over physical links with limited bandwidth.
  We shall use the term "bonding" (also variously known as inverse multiplexing, 
  link aggregation, trunking, teaming, etc.) to mean an efficient mechanism 
  for separating the PW traffic over several links.
  Unlike load balancing and equal cost multipath, bonding makes no assumption that the PW traffic 
  can be decomposed into distinguishable flows, 
  and thus bonding requires delay compensation and packet reordering.
  Furthermore, PW bonding can optionally track bandwidth constraints in order to minimize
  packet loss.
 
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#anchor2">2.</a>&nbsp;
PW Bonding mechanism<br />
<a href="#anchor3">3.</a>&nbsp;
PW Dynamic Bandwidth Allocation<br />
<a href="#anchor4">4.</a>&nbsp;
Protocol Extensions<br />
<a href="#anchor5">5.</a>&nbsp;
Partial Path PW Bonding<br />
<a href="#anchor6">6.</a>&nbsp;
Security Considerations<br />
<a href="#anchor7">7.</a>&nbsp;
IANA Considerations<br />
<a href="#anchor8">8.</a>&nbsp;
Acknowledgments<br />
<a href="#rfc.references1">9.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">9.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">9.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
<a href="#rfc.copyright">&#167;</a>&nbsp;
Intellectual Property and Copyright Statements<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
  Inverse multiplexing is any mechanism for transporting a single high capacity traffic flow
  over multiple lower capacity paths. Inverse multiplexing is also known as bonding, 
  link load balancing, link aggregation, trunking, teaming, 
  concatenation, and multipath. In the context of pseudowires we will use the term bonding.
 
</p>
<p> 
  Bonding has been defined for many transport technologies
  (and often more than one mechanism has been developed for a single technology)
  including TDM (continguous and virtual concatenation VCAT), 
  ATM (ATM forum's IMA and ITU's G.998.1 multi-pair bonding), 
  Ethernet (802.3 link aggregation LAG and EFM PME aggregation), 
  xDSL (the previous two and G.998.3 time domain inverse multiplexing TDIM), 
  PPP (MLPPP), and in the context of IP transport, equal cost multiplath (ECMP).
 
</p>
<p>
  Regardless of the transport infrastructure, all bonding mechanisms must confront
  a fundamental problem, namely that the constituent paths will in general have different 
  (and not necessarily constant) propagation delays.
  Thus a mechanism must be employed to ensure in-order delivery of the data units.
  Two solutions have been proposed for this problem, namely
  performing differential delay compensation, 
  and decomposing the input into mutually distinct flows.
  Methods using the former solution (e.g., VCAT, TDIM) buffer the data from each path 
  at egress (e.g., VCAT buffers up to 1/2 second),
  and introduce protocol elements to synchronize the paths before recombining them.
  Methods using the latter soution (LAG, ECMP) skirt the problem by consistently mapping 
  data units from a given flow onto the same constituent path,
  assuming that there is only the need to maintain order inside each flow, 
  and not across flows.
 
</p>
<p>
  Methods employing differential delay compensation tend to more complex
  and to require large buffers, but are universally applicable.
  Methods decomposing the input into flows depend on the existence of such flows
  and sniffing the input for their identification.
  Thus if the input is a single large flow, 
  or if it is not possible to identify flows (e.g., due to lower layer encryption),
  or if it is undesirably complex to do so, 
  these methods may not be applicable.
 
</p>
<p>
  Furthermore, methods decomposing the input into flows tacitly assume
  that the hashing of flow identifiers onto tunnels results in fair
  distribution of traffic. This is generally a good assumption when
  there are a very large number of independent flows.	
  Incorrect distribution causes some underlying paths to become congested and drop packets,
  while others are relatively underutlized.
  Direct inverse multiplexing with differential delay compensation
  one can ensure fairness, and in fact can adapt to underlying paths
  with unequal and even time varying capacity. 
 
</p>
<p>
  In the context of pseudowires a decomposition mechanism has been
  previously proposed <a class='info' href='#I-D.bryant-filsfils-fat-pw'>[I&#8209;D.bryant&#8209;filsfils&#8209;fat&#8209;pw]<span> (</span><span class='info'>Bryant, S., Filsfils, C., Drafz, U., Kompella, V., Regan, J., and S. Amante, &ldquo;Flow Aware Transport of MPLS Pseudowires,&rdquo; March&nbsp;2009.</span><span>)</span></a>.
  The present draft proposes a PW bonding mechanism based
  on direct inverse multiplexing with differential delay compensation.
  In particular, the proposed mechanism may be used when
  PWs are supported by DSL links.
 
</p>
<p>     
  The simplest scenario for PW-bonding is depicted in Figure 1.
  Here the entire PW is transported edge to edge over 
  separate PW components, each inside a distinct transport tunnel.
  A somewhat more complex scenario is partial path bonding, as depicted in Figure 2,
  where only a portion of the PW path is bandwidth restricted.
  Here only the PW components are shown, and not the tunnels
  into which they are placed.
  Here it is required to separate the PW into components in
  separate tunnels at some point inside the network. 
  However, since P device where this happens is not PW aware, 
  the PW components must still be defined by the ingress PE.
 
</p><div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
          +--------+                        +--------+
          |   PE   |                        |   PE   |
          |        |         tunnel 1       |        |
          |        X========================X        |
          |        |      PW component 1    |        |
          |        X------------------------X        |
          |        |                        |        |
          |        X========================X        |
          |        |                        |        |
     AC   |        |                        |        |   AC
   -------o        |                        |        o-------
          |        |                        |        |
          |        |         tunnel 2       |        |
          |        X========================X        |
          |        |      PW component 2    |        |
          |        X------------------------X        |
          |        |                        |        |
          |        X========================X        |
          |        |                        |        |
          +--------+                        +--------+
</pre></div>
<p style='text-align: center'>Figure 1. edge-to-edge PW bonding - 2 PW components in tunnels 
</p><div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
       +------+          +-----+                +------+
       |  PE  |          |  P  |                |  PE  |
       |      |          |     |  PW component  |      |
       |      |          |     X================X      |
       |      |          |     |                |      |
   AC  |      |          |     |                |      |  AC
 ------o      |    PW    |     |  PW component  |      o------
       |      X==========X     X================X      |
       |      |          |     |                |      |
       |      |          |     |                |      |
       |      |          |     |  PW component  |      |
       |      X          |     X================X      |
       |      |          |     |                |      |
       +------+          +-----+                +------+
</pre></div>
<p style='text-align: center'>Figure 2. partial path PW bonding - 3 PW components 
</p>
<p>
  Each PW component will normally receive a distinct PW label,
  and thus seem to the network to be a distinct PW.
  Furthermore, PW components MUST use the PW control word <a class='info' href='#RFC4385'>[RFC4385]<span> (</span><span class='info'>Bryant, S., Swallow, G., Martini, L., and D. McPherson, &ldquo;Pseudowire Emulation Edge-to-Edge (PWE3) Control Word for Use over an MPLS PSN,&rdquo; February&nbsp;2006.</span><span>)</span></a>.
  However, as we shall see in the next section, the sequence number generation
  and processing is different for PW components that for true PWs. 
 
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
PW Bonding mechanism</h3>

<p>
  As discussed in the previous section, at the egress PE the traffic from
  each PW component is buffered, and the protocol is responsible for ensuring
  that packets constituting the PW are reassembled in correct order.
  This is accomplished by mandating use of the PW control word,
  and sharing the same sequence number sequence for all PW components
  making up the PW.
  The sequence numbers are used by the egress PE to ensure properly ordering.
  The idea is depicted in Figure 3, for the simple case of edge-to-edge bonding.
  Here eight packets are divided amongst three PW components by the ingress PE, 
  according to a bandwidth allocation algorithm to be described later.
  Due to different link latencies, the packets arrive at the egress out of order, 
  but are easily reordered by the egress PE by observing the sequence number.
 
</p><div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
               +------+          +---------------+
               |  PE  |          |        PE     |
               |      | 1 2   7  |               |
               |      X==========X               |
               |      |          |               |
1 2 3 4 5 6 7 8|      |          |1 3 2 4 5 7 6 8|1 2 3 4 5 6 7 8
---------------o      |   3 4  8 |               o---------------
     PW        |      X==========X               |
               |      |          |               |
               |      |          |               |
               |      |     5 6  |               |
               |      X==========X               |
               |      |          |               |
               +------+          +---------------+
</pre></div>
<p style='text-align: center'>Figure 3. Use of sequence numbers to ensure correct packet ordering
</p>
<p>
  In order to enable reordering, the egress PE must allocate sufficient
  buffer memory to sustain the largest expected differential delay.
  The differential delay is added to the latencies of all packets,
  making the effective latency equal to that of the slowest PW component.  
 
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
PW Dynamic Bandwidth Allocation</h3>

<p>
  In the simplest case, all packets to be sent over the various PW components
  are of the same size, and all PW components support the same data rates.
  For this case (but only for this case), a simple round-robin algorithm
  for distributing the packets onto PW components is optimal
  in the sense that it minimizes the probability of packet loss due
  to buffer exhaustion.
 
</p>
<p>
  The simple round-robin algorithm is not optimal when the packets 
  are not all of the same size, or when the PW components do not 
  all support the same data rate, or both.
  In such cases we need to fairly distribute data bytes over the components
  in such fashion as to minimize the probability that a packet will be
  dropped due to over-run of a component's buffer.
  While the packet sizes are always known before transmission,
  the state of the buffers are usually unknown, 
  and in some cases the supported data rates may be unknown.
  The following discussion will be for the edge-to-edge component case;
  the partial path case is similar, but requires separate consideration
  of the two directions.
 
</p>
<p>
  If the packet size is not constant, and the component rates are known,
  but we have no further information
  (e.g., we do not know the size of the buffers, nor do we have feedback from
  the egress PE on the actual fill states)
  the best algorithm for an ingress PE is based on a leaky bucket scheme.
  In this scheme the ingress PE maintains, for each PW component, a variable Bn
  that approximately tracks the fill state of the egress PE's buffer for this component. 
  The variable Bn is continually decreased at a rate equal to the data rate of the component n,
  but always remains non-negative.
  Each time a packet is sent over PW component n, its size in bytes is added to Bn.   
  When a new packet needs to be sent, the ingress PE sends it on the PW component
  with minimal Bn.
  This algorithm can also be used when it can be assumed that the component
  rates are equal, or approximately so.
 
</p>
<p>
  If in addition to packet size and PW component date rates, the ingress PE knows
  the buffer size used for differential compensation, a similar, but somewhat better, 
  algorithm can be used. When deciding over which component to send the packet,
  rather than choosing the minimal Bn, the ingress PE chooses the maximal Bn
  to which the packet size can be added without overflowing the given buffer size.
  In practice some extra margin must be applied in order to account for PDV.
 
</p>
<p>
  Finally, if the egress PE can send information on the actual state
  of its buffers back to the ingress PE, then an algorithm that
  uses these buffer states instead of the approximated leaky bucket ones 
  can be employed.
 
</p>
<p> 
  Any implementation MUST support the round-robin method,
  and SHOULD support the first leaky bucket mode.
  Control protocol extensions are needed to enable communication from
  egress back to ingress of the additional information needed
  to support more optimal modes. If the rates can be accurately known
  the first leaky bucket mode MUST be used,
  and if further information is available then other mechanisms
  MAY be used.
 
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Protocol Extensions</h3>

<p>
  Enhancements to the PWE3 control protocol <a class='info' href='#RFC4447'>[RFC4447]<span> (</span><span class='info'>Martini, L., Rosen, E., El-Aawar, N., Smith, T., and G. Heron, &ldquo;Pseudowire Setup and Maintenance Using the Label Distribution Protocol (LDP),&rdquo; April&nbsp;2006.</span><span>)</span></a>
  are needed in order to associate PW components with distinct labels in distinct tunnels 
  to a single logical PW, and to communicate component capacity and status information.  
  The format of these LDP extensions will be detailed in the next version
  of this draft. 
 
</p>
<p>
  A single PWid or generalized PWid is assigned to the logical PW,
  and additional PWids or generalized PWids are allocated for the PW components.
  The label mapping message of the logical PW contains the interface parameters,
  and new sub-TLVs containing PW labels for all the PW components.
  Each PW component is assigned to a tunnel by mechanisms not specified here.
  AC faults are signaled via PW status messages associated with the
  PWid or generalized PWid of the logical PW. 
  PW component faults and capacity indicators are sent via status messages 
  per PW component PWid or generalized PWid.
 
</p>
<p>
   Standard VCCV mechanisms <a class='info' href='#RFC5085'>[RFC5085]<span> (</span><span class='info'>Nadeau, T. and C. Pignataro, &ldquo;Pseudowire Virtual Circuit Connectivity Verification (VCCV): A Control Channel for Pseudowires,&rdquo; December&nbsp;2007.</span><span>)</span></a> may be used independently 
   for each PW component,
   and the resulting connectivity information may be used by the ingress PE
   in the process of distributing traffic over PW components.
   VCCV for the partial path scenario is for further study.
 
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Partial Path PW Bonding</h3>

<p>
  When only a portion of the PW's path suffers from bandwidth constriction, 
  the partial path bonding scenario depicted in Figure 2 is used.
  As for the regular bonding case, the ingress PE decomposes the input
  into multiple PW components, and performs the same algorithm to decide
  into which component to send a given packet.
  For those portions of the network where a single tunnel
  can support the entire service bandwidth, the PW components may all be all placed
  in the same transport tunnel. 
  For constricted bandwidth segments, each PW component must be placed in 
  a distinct tunnel. The distinct transport tunnels are merged into the
  single tunnel using label merging, per section 3.26.2 of <a class='info' href='#RFC3031'>[RFC3031]<span> (</span><span class='info'>Rosen, E., Viswanathan, A., and R. Callon, &ldquo;Multiprotocol Label Switching Architecture,&rdquo; January&nbsp;2001.</span><span>)</span></a>.
 
</p>
<p>
  Another case of practical interest is when the bandwidth is restricted
  in a non-MPLS access network, and the PE terminating the MPLS
  can not inverse multiplex the traffic onto low capacity links	based on PW labels alone.
  This case arises for a DSLAM terminating MPLS 
  (or a PE terminating MPLS upstream from the DSLAM)
  and forwarding to customers
  solely based on Ethernet MAC address (and possibly VLAN ID).
  For such a case a double PW encapsulation may be used. 
  Through the core network we tunnel an Ethernet PW, 
  which itself carries the bonded PW components 
  (which may be of any type supported by PWE encapsulations),
  see Figure 4.
 
</p><div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
    +--------------------+
    |  MPLS label stack  |
    +--------------------+
    | exterior PW label  |
    +--------------------+
    |  Ethernet header   |
    +--------------------+
    | interior PW label  |
    +--------------------+
    |   control word     |
    +--------------------+
    |      payload       |
    +--------------------+
</pre></div>
<p style='text-align: center'>Figure 4. packet format for DSL partial path scenario 
</p>
<p>
  The DSLAM (or PE immediately upstream from the DSLAM)
  terminates the MPLS and exterior PW protocols,
  thus exposing the Ethernet header.
  Under the Ethernet header there MAY be an MPLS header
  (which the CE negotiates with the immediately upstream PE),
  and there MUST be an interior PW label
  (which the CE negotiates with the remote CE or PE).
  Based purely on the Ethernet addressing
  the DSLAM distributes the traffic over multiple DSL links 
  following the partition crafted by the ingress PE.
  All of these DSL links terminate on a single CE device
  which terminates the Ethernet, exposes the interior PW
  labels and sequence numbers in the control word.
  Using these sequence numbers the CE can thus piece together 
  the original traffic stream.
 
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Security Considerations</h3>

<p>
  PW bonding does not introduce security considerations
  above those present for regular PWs.
  In particular, attacks based on sequence number manipulation
  are of concern.
  For partial path cases where CE devices participate in the PWE signaling,
  authentication is required.
 
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
IANA Considerations</h3>

<p>
   Required extensions to the PWE3 control protocol, 
   including the sub-TLV type code for the PW component label,
   and new PW status codes, will be detailed
   in the next version of this draft.
 
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Acknowledgments</h3>

<p>
  The authors would like to thank Gabriel Zigelboim for fruitful discussions
  on optimal dynamic allocation mechanisms.
 
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC3031">[RFC3031]</a></td>
<td class="author-text">Rosen, E., Viswanathan, A., and R. Callon, &ldquo;<a href="http://tools.ietf.org/html/rfc3031">Multiprotocol Label Switching Architecture</a>,&rdquo; RFC&nbsp;3031, January&nbsp;2001 (<a href="http://www.rfc-editor.org/rfc/rfc3031.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4385">[RFC4385]</a></td>
<td class="author-text">Bryant, S., Swallow, G., Martini, L., and D. McPherson, &ldquo;<a href="http://tools.ietf.org/html/rfc4385">Pseudowire Emulation Edge-to-Edge (PWE3) Control Word for Use over an MPLS PSN</a>,&rdquo; RFC&nbsp;4385, February&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4385.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4447">[RFC4447]</a></td>
<td class="author-text">Martini, L., Rosen, E., El-Aawar, N., Smith, T., and G. Heron, &ldquo;<a href="http://tools.ietf.org/html/rfc4447">Pseudowire Setup and Maintenance Using the Label Distribution Protocol (LDP)</a>,&rdquo; RFC&nbsp;4447, April&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4447.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5085">[RFC5085]</a></td>
<td class="author-text">Nadeau, T. and C. Pignataro, &ldquo;<a href="http://tools.ietf.org/html/rfc5085">Pseudowire Virtual Circuit Connectivity Verification (VCCV): A Control Channel for Pseudowires</a>,&rdquo; RFC&nbsp;5085, December&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc5085.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.bryant-filsfils-fat-pw">[I-D.bryant-filsfils-fat-pw]</a></td>
<td class="author-text">Bryant, S., Filsfils, C., Drafz, U., Kompella, V., Regan, J., and S. Amante, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-bryant-filsfils-fat-pw-03.txt">Flow Aware Transport of MPLS Pseudowires</a>,&rdquo; draft-bryant-filsfils-fat-pw-03 (work in progress), March&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-bryant-filsfils-fat-pw-03.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Yaakov (Jonathan) Stein</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">RAD Data Communications</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">24 Raoul Wallenberg St., Bldg C</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Tel Aviv  69719</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">ISRAEL</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+972 3 645-5389</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:yaakov_s@rad.com">yaakov_s@rad.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Itai Mendelsohn</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">RAD Data Communications</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">24 Raoul Wallenberg St., Bldg C</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Tel Aviv  69719</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">ISRAEL</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+972 3 645-5761</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:itai_m@rad.com">itai_m@rad.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Ron Insler</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">RAD Data Communications</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">24 Raoul Wallenberg St., Bldg C</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Tel Aviv  69719</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">ISRAEL</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+972 3 645-5445</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:ron_i@rad.com">ron_i@rad.com</a></td></tr>
</table>
<a name="rfc.copyright"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Full Copyright Statement</h3>
<p class='copyright'>
Copyright &copy; The IETF Trust (2008).</p>
<p class='copyright'>
This document is subject to the rights,
licenses and restrictions contained in BCP&nbsp;78,
and except as set forth therein,
the authors retain all their rights.</p>
<p class='copyright'>
This document and the information contained herein are provided
on an &ldquo;AS IS&rdquo; basis and THE CONTRIBUTOR,
THE ORGANIZATION HE/SHE REPRESENTS
OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE.</p>
<h3>Intellectual Property</h3>
<p class='copyright'>
The IETF takes no position regarding the validity or scope of any
Intellectual Property Rights or other rights that might be claimed
to pertain to the implementation or use of the technology
described in this document or the extent to which any license
under such rights might or might not be available; nor does it
represent that it has made any independent effort to identify any
such rights.
Information on the procedures with respect to
rights in RFC documents can be found in BCP&nbsp;78 and BCP&nbsp;79.</p>
<p class='copyright'>
Copies of IPR disclosures made to the IETF Secretariat and any
assurances of licenses to be made available,
or the result of an attempt made to obtain a general license or
permission for the use of such proprietary rights by implementers or
users of this specification can be obtained from the IETF on-line IPR
repository at <a href='http://www.ietf.org/ipr'>http://www.ietf.org/ipr</a>.</p>
<p class='copyright'>
The IETF invites any interested party to bring to its attention
any copyrights,
patents or patent applications,
or other
proprietary rights that may cover technology that may be required
to implement this standard.
Please address the information to the IETF at <a href='mailto:ietf-ipr@ietf.org'>ietf-ipr@ietf.org</a>.</p>
</body></html>
