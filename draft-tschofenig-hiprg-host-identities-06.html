<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Interaction between SIP and HIP</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Interaction between SIP and HIP">
<meta name="keywords" content="Internet-Draft">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">HIPRG</td><td class="header">H. Tschofenig</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Nokia Siemens Networks</td></tr>
<tr><td class="header">Expires: August 28, 2008</td><td class="header">J. Ott</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Helsinki University of Technology</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">H. Schulzrinne</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Columbia U.</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">T. Henderson</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">The Boeing Company</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">G. Camarillo</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Ericsson</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">February 25, 2008</td></tr>
</table></td></tr></table>
<h1><br />Interaction between SIP and HIP<br />draft-tschofenig-hiprg-host-identities-06.txt</h1>

<h3>Status of this Memo</h3>
<p>
By submitting this Internet-Draft,
each author represents that any applicable patent or other IPR claims of which
he or she is aware have been or will be disclosed,
and any of which he or she becomes aware will be disclosed,
in accordance with Section&nbsp;6 of BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on August 28, 2008.</p>

<h3>Abstract</h3>

<p>This document investigates the interworking between the Session Initiation Protocol (SIP)
        and the Host Identity Protocol (HIP) and the benefits that may arise from their combined
        operation.
</p>
<p>The aspect of exchanging Host Identities (or Host Identity Tags) in SIP/SDP for later usage
        with the Host Identity Protocol Protocol (HIP) is described in more detail as an example of
        this interworking.
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#introduction">1.</a>&nbsp;
Introduction<br />
<a href="#anchor1">2.</a>&nbsp;
Terminology <br />
<a href="#host-identities">3.</a>&nbsp;
Exchanging Host Identities with SIP<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">3.1.</a>&nbsp;
Concept<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#extension">3.2.</a>&nbsp;
SDP Extension<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#example">3.3.</a>&nbsp;
Example<br />
<a href="#security">4.</a>&nbsp;
Security Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">4.1.</a>&nbsp;
UPDATE<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">4.2.</a>&nbsp;
SIPS<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">4.3.</a>&nbsp;
S/MIME<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">4.4.</a>&nbsp;
Single-sided Verification<br />
<a href="#anchor7">5.</a>&nbsp;
IANA Considerations<br />
<a href="#anchor8">6.</a>&nbsp;
Contributors<br />
<a href="#anchor9">7.</a>&nbsp;
Acknowledgments<br />
<a href="#rfc.references1">8.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">8.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">8.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
<a href="#rfc.copyright">&#167;</a>&nbsp;
Intellectual Property and Copyright Statements<br />
</p>
<br clear="all" />

<a name="introduction"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>SIP <a class='info' href='#RFC3261'>[1]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a> enables a pair of user agents to establish and maintain
        sessions. The communication typically involves SIP proxies before prior to communication
        between the end points taking place. As part of the initial exchange, a number of parameters
        are exchanged. Certain of these parameters are relevant to security. Examples of such
        parameters are keying material and other cryptographic information that is used in order to
        establish a security association for the protection of subsequent data traffic.
</p>
<p>HIP (see <a class='info' href='#I-D.ietf-hip-arch'>[2]<span> (</span><span class='info'>Moskowitz, R. and P. Nikander, &ldquo;Host Identity Protocol Architecture,&rdquo; August&nbsp;2005.</span><span>)</span></a> and <a class='info' href='#I-D.ietf-hip-base'>[3]<span> (</span><span class='info'>Moskowitz, R., Nikander, P., Jokela, P., and T. Henderson, &ldquo;Host Identity Protocol,&rdquo; October&nbsp;2007.</span><span>)</span></a>) propose
        an architecture with a cryptographic namespace and a layer between the network and the
        transport layer. This layer is used in order to shield applications from the impact of
        multi-homing, readdressing and mobility. A protocol, called the Host Identity Protocol, is
        used in order to establish state at the two end hosts. This state includes the establishment
        of IPsec SAs. 
</p>
<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Terminology </h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT",
        "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in
          <a class='info' href='#RFC2119'>RFC 2119<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> [4].
</p>
<a name="host-identities"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Exchanging Host Identities with SIP</h3>

<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Concept</h3>

<p>In order to provide security between two HIP end hosts beyond opportunistic encryption it
          is necessary to securely retrieve the Host Identities. A number of mechanisms can be used
          including directories (such as DNS) or more advanced concepts for example based on
          Distributed Hash Tables typically used in peer-to-peer networks. 
</p>
<p>This document suggests to exchange the Host Identities (or Host Identity Tags) as part of
          the initial SIP exchange inside the SDP payload. As such, the Host Identities can also be
          bound to the user identities - a concept not used in HIP. 
</p>
<p>
          <a class='info' href='#sip-trapezoid'>Figure&nbsp;1<span> (</span><span class='info'>SIP Trapezoid</span><span>)</span></a> illustrates the main idea: <br /><hr class="insert" />
<a name="sip-trapezoid"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                +-----------+            +-----------+
         HI/HIT |SIP        |   HI/HIT   |SIP        | HI/HIT
        +------&gt;|Proxy      |&lt;----------&gt;|Proxy      |&lt;------+
        |       |Server X   |   TLS      |Server Y   |       |
        |       +-----------+ (+auth.id.)+-----------+       |
        |                                                    |
        | TLS or                                      TLS or |
        | SIP Digest                              SIP Digest |
        |                                        (+auth.id.) |
        |                                                    |
        v                                                    v
    +-----------+          SIP and HIP                +-----------+
    |SIP        | &lt;---------------------------------&gt; |SIP        |
    |User Agent |          RTP                        |User Agent |
    |Alice      | &lt;=================================&gt; |Bob        |
    +-----------+                                     +-----------+

    Legend:
    &lt;---&gt;: Signaling Traffic
    &lt;===&gt;: Data Traffic
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: SIP Trapezoid&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

        
</p>
<p>The initial SIP signaling messages between Alice and Bob often take place via the proxy
          servers. This exchange may be protected with TLS (between SIP proxies but also between SIP
          UAs and SIP proxies) or with SIP digest authentication between SIP UAs and the outbound
          proxy. Further SIP security mechanisms should be used in combination with this proposal.
          The security consideration section, see <a class='info' href='#security'>Section&nbsp;4<span> (</span><span class='info'>Security Considerations</span><span>)</span></a>, provides a discussion
          about the possible approaches to secure the Host Identity Tag and to relate it ongoing
          session.
</p>
<p>This allows two hosts to securely exchange keys even if there are only domain-level
          public and private keys, as well as secure associations within a domain, thus avoiding the
          need for a global user-level PKI. 
</p>
<p>This initial message exchange is used to exchange Host Identities between the end points
          within the SDP payload.
</p>
<p>Subsequently, when both user agents Alice and Bob communicate directly with each other
          they are able to reuse the Host Identity for the HIP message exchange. 
</p>
<p>If the SIP communication does not involve third parties (i.e., SIP proxies) and is
          therefore executed directly between the two SIP UAs then it is not useful to exchange Host
          Identities in the SDP payloads since the HIP exchange already took place before the first
          SIP message can be exchanged between the two peers. Still HIP might provide some
          advantages for the end-to-end communication, such as providing security at the lower layer
          and mobility and multi-homing support.
</p>
<p>The security of this approach relies on two properties: </p>
<blockquote class="text">
<p>The signaling messages and the data traffic traverse a different path. Hence, an
              adversary needs to be located where it is able to see both, the signaling and the the
              data traffic. 
</p>
<p>The signaling traffic is often protected.
</p>
</blockquote><p>
        
</p>
<a name="extension"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
SDP Extension</h3>

<p>This document proposes to enhance the SDP <a class='info' href='#I-D.ietf-mmusic-sdescriptions'>[5]<span> (</span><span class='info'>Andreasen, F., &ldquo;Session Description Protocol Security Descriptions for Media Streams,&rdquo; September&nbsp;2005.</span><span>)</span></a>
          'k' or 'a' parameter.
</p>
<p>The 'k' parameter has the following structure:
</p>
<p>k=&lt;method&gt;:&lt;encryption key&gt;
</p>
<p>This document defines two new method fields: </p>
<blockquote class="text">
<p>k=host-identity:&lt;HIP Host Identity&gt;
</p>
<p>k=host-identity-tag:&lt;hash of the public key&gt; 
</p>
</blockquote><p>
        
</p>
<p>Alternatively, the 'a' parameter could be used like <a class='info' href='#I-D.ietf-mmusic-kmgmt-ext'>[6]<span> (</span><span class='info'>Arkko, J., &ldquo;Key Management Extensions for Session Description Protocol (SDP) and Real  Time Streaming Protocol (RTSP),&rdquo; June&nbsp;2005.</span><span>)</span></a> proposes. An example for MIKEY <a class='info' href='#RFC3830'>[9]<span> (</span><span class='info'>Arkko, J., Carrara, E., Lindholm, F., Naslund, M., and K. Norrman, &ldquo;MIKEY: Multimedia Internet KEYing,&rdquo; August&nbsp;2004.</span><span>)</span></a> is given in the reference, which could be reused for HIP. As defined
          in <a class='info' href='#I-D.ietf-mmusic-sdp-new'>[10]<span> (</span><span class='info'>Handley, M., &ldquo;SDP: Session Description Protocol,&rdquo; January&nbsp;2006.</span><span>)</span></a>, the 'a' parameter has the following
          structure:
</p>
<p>a=&lt;attribute&gt;:&lt;value&gt;
</p>
<p>Similar to the MIKEY example in <a class='info' href='#I-D.ietf-mmusic-kmgmt-ext'>[6]<span> (</span><span class='info'>Arkko, J., &ldquo;Key Management Extensions for Session Description Protocol (SDP) and Real  Time Streaming Protocol (RTSP),&rdquo; June&nbsp;2005.</span><span>)</span></a>, this document
          defines two new method fields: </p>
<blockquote class="text">
<p>a=key-mgmt:host-identity &lt;HIP Host Identity&gt;
</p>
<p>a=key-mgmt:host-identity-tag &lt;hash of the public key&gt; 
</p>
</blockquote><p>
        
</p>
<p>Both, the Host Identity and the Host Identity Tag are defined in <a class='info' href='#I-D.ietf-hip-base'>[3]<span> (</span><span class='info'>Moskowitz, R., Nikander, P., Jokela, P., and T. Henderson, &ldquo;Host Identity Protocol,&rdquo; October&nbsp;2007.</span><span>)</span></a>. The Host Identity contains the public key and a number of
          cryptographic parameters (such as used algorithms and Diffie-Hellmann public parameters).
          The Host Identity is base64 encoded.
</p>
<p>FOR DISCUSSION:<br />
<br />

          </p>
<blockquote class="text">
<p>The usage of the k parameter as defined in <a class='info' href='#RFC2327'>[7]<span> (</span><span class='info'>Handley, M. and V. Jacobson, &ldquo;SDP: Session Description Protocol,&rdquo; April&nbsp;1998.</span><span>)</span></a> is deprecated.
                <a class='info' href='#I-D.ietf-mmusic-sdescriptions'>[5]<span> (</span><span class='info'>Andreasen, F., &ldquo;Session Description Protocol Security Descriptions for Media Streams,&rdquo; September&nbsp;2005.</span><span>)</span></a> is more appropriate but like 'k=',
              they come with the caveat that they require a secured e2e signaling path (or SDP is
              S/MIME protected). One alternative is the usage of MIKEY for the exchange as defined
              in <a class='info' href='#I-D.ietf-mmusic-kmgmt-ext'>[6]<span> (</span><span class='info'>Arkko, J., &ldquo;Key Management Extensions for Session Description Protocol (SDP) and Real  Time Streaming Protocol (RTSP),&rdquo; June&nbsp;2005.</span><span>)</span></a>.<br />
<br />

            
</p>
<p>Furthermore, and probably more important, it is important to said what the Host
              Identity is supposed to be used with. They may help avoiding re-INVITEs when
              underlying IP addresses change to update the 'Contact:' address as well as the
              addresses in the 'c=' lines for the various media.<br />
<br />

            
</p>
<p>However, multiple devices may take part in the different media sessions (your laptop
              doing video in parallel to your hardware IP phone). To support these cases, it may be
              necessary to exchange _several_ HI(T)s within SDP and denote what they shall be used
              for. Such a mapping could naturally be achieved for each media stream (even using 'k='
              attributes); at simple 'a=' attributes (or the mechanisms from <a class='info' href='#I-D.ietf-mmusic-sdescriptions'>[5]<span> (</span><span class='info'>Andreasen, F., &ldquo;Session Description Protocol Security Descriptions for Media Streams,&rdquo; September&nbsp;2005.</span><span>)</span></a>/ <a class='info' href='#I-D.ietf-mmusic-kmgmt-ext'>[6]<span> (</span><span class='info'>Arkko, J., &ldquo;Key Management Extensions for Session Description Protocol (SDP) and Real  Time Streaming Protocol (RTSP),&rdquo; June&nbsp;2005.</span><span>)</span></a>
              would be preferred.<br />
<br />

            
</p>
<p>SDP only deals with media streams and does not have a notion of user or main device
              in the background. Hence, the SIP HI(T) may need to go into SIP signaling (rather than
              be carried in SDP).<br />
<br />
 Logically, this appears to belong to the
              'Contact:' header which may be conveyed protected in an S/MIME body (signed and
                encrypted).<br />
<br />

            
</p>
</blockquote><p>
        
</p>
<a name="example"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
Example</h3>

<p>This example contains the full details of the example session setup taken from Section 4
          of <a class='info' href='#RFC3261'>[1]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a>. The message flow is shown in Figure 1 of <a class='info' href='#RFC3261'>[1]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a> and resembles the architecture shown in <a class='info' href='#sip-trapezoid'>Figure&nbsp;1<span> (</span><span class='info'>SIP Trapezoid</span><span>)</span></a>. Note that these flows show the minimum required set of header fields; some other
          header fields such as Allow and Supported would normally be present.
</p>
<p>In our example Alice uses the following Host Identity Tag
          (7214148E0433AFE2FA2D48003D31172E) and Bob uses (44A5C522D7EDEDF962E55A0677DB1346) as the
          HIT. These HITs correspond to the following Host Identities (for convenience we reuse the
          XML representation format used by the Boeing implementation).
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
------
Alice:
------

&lt;host_identity alg="DSA" alg_id="3" length="128"
 anon="no" incoming="yes"&gt;

&lt;name&gt;sip:alice@atlanta.com&lt;/name&gt;

&lt;P&gt;D757262C4584C44C211F18BD96E5F061C4F0A423F7FE6B6B85B34CEF72CE14
A0D3A222FE08CECE65BE6C265854889DC1EDBD13EC8B274DA9F75BA26CCB98772
3602787E92BA84421F22C3C89CB9B06FD60FE01941DDD77FE6B12893DA76EEBC1
D128D97F0678D772B5341C8506F358214B16A2FAC4B368950387811C7DA33&lt;/P&gt;

&lt;Q&gt;C773218C737EC8EE993B4F2DED30F48EDACE915F&lt;/Q&gt;

&lt;G&gt;82269009E14EC474BAF2932E69D3B1F18517AD9594184CCDFCEAE96EC4D5EF
9313384B47093C52B20CD35D02492B3959EC6499625BC4FA5082E22C5B374E16D
D00132CE71020217091AC717B612391C76C1FB2E88317C1BD8171D41ECB83E210
C03CC9B32E81056C21621C73D6DAAC028F4B1585DA7F42519718CC9B09EEF&lt;/G&gt;

&lt;PUB&gt;A4666AED5F5E753773DC961EDD0412A03F1F8D7CEC70A057076062804B86
619D3DA4E7610EBBDB05F44C5784622D1B86600DFCC1431BC4451D4FD31329354
07A9B24718CB82BAE93A4CDD9CC4C8B9A41C000AB53D52A65E8383F54F5BF92A8
21EA776A207C6991EF23808C00DB820977D97CAC01CB96307274E2386001327
&lt;/PUB&gt;

&lt;HIT&gt;7214148E0433AFE2FA2D48003D31172E&lt;/HIT&gt;
&lt;/host_identity&gt;
</pre></div><p>

        
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
----
Bob:
----

&lt;host_identity alg="DSA" alg_id="3" length="96"
 anon="no" incoming="yes"&gt;

&lt;name&gt;sip:bob@biloxi.com&lt;/name&gt;

&lt;P&gt;F13ACC1693AFD04B9E1E8D2A9DEA6DE8DE4C276BE2BF15B6CFF6E269B0169
378CB0DDDE23D187827015DC67E6768193914B823BDF215D0DAD7A151E434F9E
128DAFB9DEFAE07874621E70D7ED2D34B80A95FA8312B9564E4D118FB525664C
77D&lt;/P&gt;

&lt;Q&gt;C773218C737EC8EE993B4F2DED30F48EDACE915F&lt;/Q&gt;

&lt;G&gt;241F32CF48F424B1A75D33B7AE6088E745D9E24E653AE2CAEBE67E4AA1C11
15BA0CC25055A63C139235A95B36EFBC2064AF304C0F8A431D151B2B5854DE61
5168B45B9EAEBF9A88354CA7876E52D169E14E502BEA0CBB98B55AD2AB61620F
498&lt;/G&gt;

&lt;PUB&gt;E481C20D8FBAA84F9C7ED8B5598F60F5A7D03951CA4783841EB8ADDC63D
DE11A2F3555C5641F465160AB1E016756D826B0F8CE4FDE33BA17F6FFFA751DA
1389A10E5599802AB1EBE4FD943405819A74FD6F1C9EA2815EE6B651610DF107
5D19F&lt;/PUB&gt;

&lt;HIT&gt;44A5C522D7EDEDF962E55A0677DB1346&lt;/HIT&gt;

&lt;/host_identity&gt;
</pre></div><p>

        
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
F1 INVITE Alice -&gt; atlanta.com proxy

INVITE sip:bob@biloxi.com SIP/2.0
Via: SIP/2.0/UDP pc33.atlanta.com;branch=z9hG4bKnashds8
Max-Forwards: 70
To: Bob &lt;sip:bob@biloxi.com&gt;
From: Alice &lt;sip:alice@atlanta.com&gt;;tag=1928301774
Call-ID: a84b4c76e66710
CSeq: 314159 INVITE
Contact: &lt;sip:alice@pc33.atlanta.com&gt;
Content-Type: application/sdp
Content-Length: ...

v=0
o=alice 53655765 2353687637 IN IP4 pc33.atlanta.com
s=Session SDP
t=0 0
c=IN IP4 pc33.atlanta.com
m=audio 3456 RTP/AVP 0 1 3 99
a=rtpmap:0 PCMU/8000
k=host-identity-tag:7214148E0433AFE2FA2D48003D31172E
</pre></div><p>

        
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
F2 100 Trying atlanta.com proxy -&gt; Alice

SIP/2.0 100 Trying
Via: SIP/2.0/UDP pc33.atlanta.com;branch=z9hG4bKnashds8
 ;received=192.0.2.1
To: Bob &lt;sip:bob@biloxi.com&gt;
From: Alice &lt;sip:alice@atlanta.com&gt;;tag=1928301774
Call-ID: a84b4c76e66710
CSeq: 314159 INVITE
Content-Length: 0
</pre></div><p>

        
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
F3 INVITE atlanta.com proxy -&gt; biloxi.com proxy

INVITE sip:bob@biloxi.com SIP/2.0
Via: SIP/2.0/UDP bigbox3.site3.atlanta.com
  ;branch=z9hG4bK77ef4c2312983.1
Via: SIP/2.0/UDP pc33.atlanta.com;branch=z9hG4bKnashds8
 ;received=192.0.2.1
Max-Forwards: 69
To: Bob &lt;sip:bob@biloxi.com&gt;
From: Alice &lt;sip:alice@atlanta.com&gt;;tag=1928301774
Call-ID: a84b4c76e66710
CSeq: 314159 INVITE
Contact: &lt;sip:alice@pc33.atlanta.com&gt;
Content-Type: application/sdp
Content-Length: ...

v=0
o=alice 53655765 2353687637 IN IP4 pc33.atlanta.com
s=Session SDP
t=0 0
c=IN IP4 pc33.atlanta.com
m=audio 3456 RTP/AVP 0 1 3 99
a=rtpmap:0 PCMU/8000
k=host-identity-tag:7214148E0433AFE2FA2D48003D31172E
</pre></div><p>

        
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
F4 100 Trying biloxi.com proxy -&gt; atlanta.com proxy

SIP/2.0 100 Trying
Via: SIP/2.0/UDP bigbox3.site3.atlanta.com
 ;branch=z9hG4bK77ef4c2312983.1
 ;received=192.0.2.2
Via: SIP/2.0/UDP pc33.atlanta.com;branch=z9hG4bKnashds8
 ;received=192.0.2.1
To: Bob &lt;sip:bob@biloxi.com&gt;
From: Alice &lt;sip:alice@atlanta.com&gt;;tag=1928301774
Call-ID: a84b4c76e66710
CSeq: 314159 INVITE
Content-Length: 0
</pre></div><p>

        
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
F5 INVITE biloxi.com proxy -&gt; Bob

INVITE sip:bob@192.0.2.4 SIP/2.0
Via: SIP/2.0/UDP server10.biloxi.com;branch=z9hG4bK4b43c2ff8.1
Via: SIP/2.0/UDP bigbox3.site3.atlanta.com
 ;branch=z9hG4bK77ef4c2312983.1
 ;received=192.0.2.2
Via: SIP/2.0/UDP pc33.atlanta.com;branch=z9hG4bKnashds8
 ;received=192.0.2.1
Max-Forwards: 68
To: Bob &lt;sip:bob@biloxi.com&gt;
From: Alice &lt;sip:alice@atlanta.com&gt;;tag=1928301774
Call-ID: a84b4c76e66710
CSeq: 314159 INVITE
Contact: &lt;sip:alice@pc33.atlanta.com&gt;
Content-Type: application/sdp
Content-Length: ...

v=0
o=alice 53655765 2353687637 IN IP4 pc33.atlanta.com
s=Session SDP
t=0 0
c=IN IP4 pc33.atlanta.com
m=audio 3456 RTP/AVP 0 1 3 99
a=rtpmap:0 PCMU/8000
k=host-identity-tag:7214148E0433AFE2FA2D48003D31172E
</pre></div><p>

        
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
F6 180 Ringing Bob -&gt; biloxi.com proxy

SIP/2.0 180 Ringing
Via: SIP/2.0/UDP server10.biloxi.com;branch=z9hG4bK4b43c2ff8.1
 ;received=192.0.2.3
Via: SIP/2.0/UDP bigbox3.site3.atlanta.com
 ;branch=z9hG4bK77ef4c2312983.1
 ;received=192.0.2.2
Via: SIP/2.0/UDP pc33.atlanta.com;branch=z9hG4bKnashds8
 ;received=192.0.2.1
To: Bob &lt;sip:bob@biloxi.com&gt;;tag=a6c85cf
From: Alice &lt;sip:alice@atlanta.com&gt;;tag=1928301774
Call-ID: a84b4c76e66710
Contact: &lt;sip:bob@192.0.2.4&gt;
CSeq: 314159 INVITE
Content-Length: 0
</pre></div><p>

        
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
F7 180 Ringing biloxi.com proxy -&gt; atlanta.com proxy

SIP/2.0 180 Ringing
Via: SIP/2.0/UDP bigbox3.site3.atlanta.com
 ;branch=z9hG4bK77ef4c2312983.1
 ;received=192.0.2.2
Via: SIP/2.0/UDP pc33.atlanta.com;branch=z9hG4bKnashds8
 ;received=192.0.2.1
To: Bob &lt;sip:bob@biloxi.com&gt;;tag=a6c85cf
From: Alice &lt;sip:alice@atlanta.com&gt;;tag=1928301774
Call-ID: a84b4c76e66710
Contact: &lt;sip:bob@192.0.2.4&gt;
CSeq: 314159 INVITE
Content-Length: 0
</pre></div><p>

        
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
F8 180 Ringing atlanta.com proxy -&gt; Alice

SIP/2.0 180 Ringing
Via: SIP/2.0/UDP pc33.atlanta.com;branch=z9hG4bKnashds8
 ;received=192.0.2.1
To: Bob &lt;sip:bob@biloxi.com&gt;;tag=a6c85cf
From: Alice &lt;sip:alice@atlanta.com&gt;;tag=1928301774
Call-ID: a84b4c76e66710
Contact: &lt;sip:bob@192.0.2.4&gt;
CSeq: 314159 INVITE
Content-Length: 0
</pre></div><p>

        
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
F9 200 OK Bob -&gt; biloxi.com proxy

SIP/2.0 200 OK
Via: SIP/2.0/UDP server10.biloxi.com;branch=z9hG4bK4b43c2ff8.1
 ;received=192.0.2.3
Via: SIP/2.0/UDP bigbox3.site3.atlanta.com
 ;branch=z9hG4bK77ef4c2312983.1
 ;received=192.0.2.2
Via: SIP/2.0/UDP pc33.atlanta.com;branch=z9hG4bKnashds8
 ;received=192.0.2.1
To: Bob &lt;sip:bob@biloxi.com&gt;;tag=a6c85cf
From: Alice &lt;sip:alice@atlanta.com&gt;;tag=1928301774
Call-ID: a84b4c76e66710
CSeq: 314159 INVITE
Contact: &lt;sip:bob@192.0.2.4&gt;
Content-Type: application/sdp
Content-Length: ...

v=0
o=bob 2890844527 2890844527 IN IP4 192.0.2.4
s=Session SDP
c=IN IP4 192.0.2.4
t=3034423619 0
m=audio 3456 RTP/AVP 0
a=rtpmap:0 PCMU/8000
k=host-identity-tag:44A5C522D7EDEDF962E55A0677DB1346
</pre></div><p>

        
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
F10 200 OK biloxi.com proxy -&gt; atlanta.com proxy

SIP/2.0 200 OK
Via: SIP/2.0/UDP bigbox3.site3.atlanta.com
 ;branch=z9hG4bK77ef4c2312983.1
 ;received=192.0.2.2
Via: SIP/2.0/UDP pc33.atlanta.com;branch=z9hG4bKnashds8
 ;received=192.0.2.1
To: Bob &lt;sip:bob@biloxi.com&gt;;tag=a6c85cf
From: Alice &lt;sip:alice@atlanta.com&gt;;tag=1928301774
Call-ID: a84b4c76e66710
CSeq: 314159 INVITE
Contact: &lt;sip:bob@192.0.2.4&gt;
Content-Type: application/sdp
Content-Length: ...

v=0
o=bob 2890844527 2890844527 IN IP4 192.0.2.4
s=Session SDP
c=IN IP4 192.0.2.4
t=3034423619 0
m=audio 3456 RTP/AVP 0
a=rtpmap:0 PCMU/8000
k=host-identity-tag:44A5C522D7EDEDF962E55A0677DB1346
</pre></div><p>

        
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
F11 200 OK atlanta.com proxy -&gt; Alice

SIP/2.0 200 OK
Via: SIP/2.0/UDP pc33.atlanta.com;branch=z9hG4bKnashds8
 ;received=192.0.2.1
To: Bob &lt;sip:bob@biloxi.com&gt;;tag=a6c85cf
From: Alice &lt;sip:alice@atlanta.com&gt;;tag=1928301774
Call-ID: a84b4c76e66710
CSeq: 314159 INVITE
Contact: &lt;sip:bob@192.0.2.4&gt;
Content-Type: application/sdp
Content-Length: ...

v=0
o=bob 2890844527 2890844527 IN IP4 192.0.2.4
s=Session SDP
c=IN IP4 192.0.2.4
t=3034423619 0
m=audio 3456 RTP/AVP 0
a=rtpmap:0 PCMU/8000
k=host-identity-tag:44A5C522D7EDEDF962E55A0677DB1346
</pre></div><p>

        
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
F12 ACK Alice -&gt; Bob

ACK sip:bob@192.0.2.4 SIP/2.0
Via: SIP/2.0/UDP pc33.atlanta.com;branch=z9hG4bKnashds9
Max-Forwards: 70
To: Bob &lt;sip:bob@biloxi.com&gt;;tag=a6c85cf
From: Alice &lt;sip:alice@atlanta.com&gt;;tag=1928301774
Call-ID: a84b4c76e66710
CSeq: 314159 ACK
Content-Length: 0
</pre></div><p>

        
</p>
<p>The media session between Alice and Bob is now established.
</p>
<p>The exchanged HITs are now placed in the pool of known HITs at both end hosts. As such
          there is also a binding established between URI and HIT at this point.
</p>
<p>Next a regular HIP base exchange between Alice and Bob is started. As part of the
          exchange the two end hosts inspect their known-HITs pool and find the previously exchanged
          parameters.
</p>
<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Alice -&gt; Bob: I1: Trigger exchange

Alice &lt;- Bob: R1: {Puzzle, D-H(R), HI(R), ESP Transform,
              HIP Transform }SIG

Alice -&gt; Bob: I2: {Solution, LSI(I), SPI(I), D-H(I),
              ESP Transform, HIP Transform, {H(I)}SK }SIG

Alice &lt;- Bob: R2: {LSI(R), SPI(R), HMAC}SIG
</pre></div><p>

        
</p>
<p>As a result of this exchange, two IPsec SAs (one for each direction) is established. RTP
          media traffic can be exchanged between the two end hosts, Alice and Bob, protected by
          IPsec. If end host mobility takes place then a HIP readdressing exchange takes place which
          is not detected at the upper layer by UDP/RTP or SIP.
</p>
<a name="security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Security Considerations</h3>

<p>The standard HIP strategy for authenticating the communicating parties is to give the
        Initiator and the Responder a Host Identity and to assure the authenticity of the Host
        Identity via external mechanisms, such as DNSSEC (if the Host Identities are stored in the
        DNS). The Initiator then verifies the Host Identity and checks its validity. The complexity
        of ensuring that the Host Identity has not been tampered with is pushed to DNS (and DNSSEC),
        as the only mechanism specified for ensuring that the public key is genuine. The
        infrastructure provided for SIP can provide a similar, but more deployment friendly,
        functionality when combined with already available SIP security mechanisms. 
</p>
<p>The design described in this document is intended to leverage the authenticity of the
        signaling channel (while not requiring confidentiality). As long as each side of the
        connection can verify the integrity of the SDP INVITE then the HIP base exchange handshake
        cannot be hijacked via a man-in-the-middle attack. This integrity protection is easily
        provided by the caller to the callee via the SIP Identity <a class='info' href='#RFC4474'>[11]<span> (</span><span class='info'>Peterson, J. and C. Jennings, &ldquo;Enhancements for Authenticated Identity Management in the Session Initiation Protocol (SIP),&rdquo; August&nbsp;2006.</span><span>)</span></a>
        mechanism. However, it is less straightforward for the responder.
</p>
<p>Ideally Alice would want to know that Bob's SDP had not been tampered with and who it was
        from so that Alice's User Agent could indicate to Alice that there was a secure phone call
        to Bob. This is known as the SIP Response Identity problem and is still a topic of ongoing
        work in the SIP community. When a solution to the SIP Response Identity problem is
        finalized, it SHOULD be used here. In the meantime there are several approaches that can be
        used to mitigate this problem: Use UPDATE, Use SIPS, Use S/MIME, and do nothing. Each one is
        discussed here followed by the security implications of that approach.
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
UPDATE</h3>

<p>In this approach, Bob sends an answer, then immediately follows up with an UPDATE that
          includes the Host Identity Tag and uses the SIP Identity mechanism to assert that the
          message is from Bob's. The downside of this approach is that it requires the extra round
          trip of the UPDATE. However, it is simple and secure even when the proxies are not
          trusted.
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
SIPS</h3>

<p>In this approach, the signaling is protected by TLS from hop to hop. As long as all
          proxies are trusted, this provides integrity for the Host Identity Tag. It does not
          provide a strong assertion of who Alice is communicating with. However, as much as the
          target domain can be trusted to correctly populate the From header field value, Alice can
          use that. The security issue with this approach is that if one of the Proxies wished to
          mount a man-in-the-middle attack, it could convince Alice that she was talking to Bob when
          really the media was flowing through a man in the middle media relay. However, this attack
          could not convince Bob that he was taking to Alice.
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
S/MIME</h3>

<p>
          <a class='info' href='#RFC3261'>RFC 3261<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a> [1] defines a S/MIME security mechanism for SIP that
          could be used to sign that the fingerprint was from Bob. This would be secure. However, so
          far there have been no deployments of S/MIME for SIP.
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4"></a><h3>4.4.&nbsp;
Single-sided Verification</h3>

<p>In this approach, no integrity is provided for the fingerprint from Bob to Alice. In this
          approach, an attacker that was on the signaling path could tamper with the fingerprint and
          insert themselves as a man-in-the-middle on the media. Alice would know that she had a
          secure call with someone but would not know if it was with Bob or a man-in-the-middle. Bob
          would know that an attack was happening. The fact that one side can detect this attack
          means that in most cases where Alice and Bob both wish the communications to be encrypted
          there is not a problem. Keep in mind that in any of the possible approaches Bob could
          always reveal the media that was received to anyone. We are making the assumption that Bob
          also wants secure communications. In this do nothing case, Bob knows the media has not
          been tampered with or intercepted by a third party and that it is from Alice. Alice knows
          that she is talking to someone and that whoever that is has probably checked that the
          media is not being intercepted or tampered with. This approach is certainly less than
          ideal but very usable for many situations. An alternative available to Alice and Bob is to
          use human speech to verified each others' identity then verify each others' Host Identity
          Tags also using human speech. Assuming that it is difficult to impersonate another's
          speech and seamlessly modify the audio contents of a call, this approach is relatively
          safe. On the other hand, SIP is not only used for voice communication.
</p>
<p>Note that this proposal is closely aligned towards the usage of the 'k' parameter in SDP
          <a class='info' href='#RFC2327'>[7]<span> (</span><span class='info'>Handley, M. and V. Jacobson, &ldquo;SDP: Session Description Protocol,&rdquo; April&nbsp;1998.</span><span>)</span></a>. As a difference, an asymmetric key is exchanged unlike the
        proposals illustrated in Section 6 of <a class='info' href='#RFC2327'>[7]<span> (</span><span class='info'>Handley, M. and V. Jacobson, &ldquo;SDP: Session Description Protocol,&rdquo; April&nbsp;1998.</span><span>)</span></a>. Section 5.12 of <a class='info' href='#I-D.ietf-mmusic-sdp-new'>[10]<span> (</span><span class='info'>Handley, M., &ldquo;SDP: Session Description Protocol,&rdquo; January&nbsp;2006.</span><span>)</span></a> is relevant for this discussion.
</p>
<p>Please note that this approach is in a certain sense a re-instantiation of the
        Purpose-Built-Key (PBK) idea (see <a class='info' href='#I-D.bradner-pbk-frame'>[12]<span> (</span><span class='info'>Bradner, S., Mankin, A., and J. Schiller, &ldquo;A Framework for Purpose-Built Keys (PBK),&rdquo; June&nbsp;2003.</span><span>)</span></a>). With PBK a hash
        of a public key is sent from node A to node B. If there was no adversary between A and B at
        that time to modify the transmitted hash value then subsequent communication interactions
        which use the public key are secure. This proposal reuses the same idea but focuses on the
        interworking between different protocols. In fact it would be possible to use the same
        approach to exchange the hash of an S/MIME certificate which can later be used in subsequent
        SIP signaling message exchanges.
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
IANA Considerations</h3>

<p>[Editor's Note: A future version of this document will provide a discussion about IANA
        considerations.]
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Contributors</h3>

<p>We would like to thank Vesa Torvinen for his contributions to the initial version of this
        document.
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Acknowledgments</h3>

<p>The authors would like to thank Steffen Fries, Aarthi Nagarajan, Murugaraj Shanmugam, Franz
        Muenz, Jochen Grimminger and Joachim Kross for their feedback.
</p>
<p>The content of the security consideration section is based on DTLS-SIP.
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC3261">[1]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;<a href="http://tools.ietf.org/html/rfc3261">SIP: Session Initiation Protocol</a>,&rdquo; RFC&nbsp;3261, June&nbsp;2002 (<a href="ftp://ftp.isi.edu/in-notes/rfc3261.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-hip-arch">[2]</a></td>
<td class="author-text">Moskowitz, R. and P. Nikander, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-hip-arch-03.txt">Host Identity Protocol Architecture</a>,&rdquo; draft-ietf-hip-arch-03 (work in progress), August&nbsp;2005 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-hip-arch-03.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-hip-base">[3]</a></td>
<td class="author-text">Moskowitz, R., Nikander, P., Jokela, P., and T. Henderson, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-hip-base-10.txt">Host Identity Protocol</a>,&rdquo; draft-ietf-hip-base-10 (work in progress), October&nbsp;2007 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-hip-base-10.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[4]</a></td>
<td class="author-text">Bradner, S., &ldquo;<a href="ftp://ftp.isi.edu/in-notes/rfc2119.txt">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; March&nbsp;1997.</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-mmusic-sdescriptions">[5]</a></td>
<td class="author-text">Andreasen, F., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-mmusic-sdescriptions-12.txt">Session Description Protocol Security Descriptions for Media Streams</a>,&rdquo; draft-ietf-mmusic-sdescriptions-12 (work in progress), September&nbsp;2005 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-mmusic-sdescriptions-12.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-mmusic-kmgmt-ext">[6]</a></td>
<td class="author-text">Arkko, J., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-mmusic-kmgmt-ext-15.txt">Key Management Extensions for Session Description Protocol (SDP) and Real  Time Streaming Protocol (RTSP)</a>,&rdquo; draft-ietf-mmusic-kmgmt-ext-15 (work in progress), June&nbsp;2005 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-mmusic-kmgmt-ext-15.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2327">[7]</a></td>
<td class="author-text">Handley, M. and V. Jacobson, &ldquo;<a href="http://tools.ietf.org/html/rfc2327">SDP: Session Description Protocol</a>,&rdquo; RFC&nbsp;2327, April&nbsp;1998 (<a href="http://xml.resource.org/public/rfc/html/rfc2327.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2327.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="Sch00">[8]</a></td>
<td class="author-text">Schulzrinne, H. and E. Wedlund, &ldquo;Application-Layer Mobility using SIP,
            ACM MC2R,&rdquo;  &nbsp; , July&nbsp;2000.</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC3830">[9]</a></td>
<td class="author-text">Arkko, J., Carrara, E., Lindholm, F., Naslund, M., and K. Norrman, &ldquo;<a href="http://tools.ietf.org/html/rfc3830">MIKEY: Multimedia Internet KEYing</a>,&rdquo; RFC&nbsp;3830, August&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3830.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-mmusic-sdp-new">[10]</a></td>
<td class="author-text">Handley, M., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-mmusic-sdp-new-26.txt">SDP: Session Description Protocol</a>,&rdquo; draft-ietf-mmusic-sdp-new-26 (work in progress), January&nbsp;2006 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-mmusic-sdp-new-26.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4474">[11]</a></td>
<td class="author-text">Peterson, J. and C. Jennings, &ldquo;<a href="http://tools.ietf.org/html/rfc4474">Enhancements for Authenticated Identity Management in the Session Initiation Protocol (SIP)</a>,&rdquo; RFC&nbsp;4474, August&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4474.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.bradner-pbk-frame">[12]</a></td>
<td class="author-text">Bradner, S., Mankin, A., and J. Schiller, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-bradner-pbk-frame-06.txt">A Framework for Purpose-Built Keys (PBK)</a>,&rdquo; draft-bradner-pbk-frame-06 (work in progress), June&nbsp;2003 (<a href="http://www.ietf.org/internet-drafts/draft-bradner-pbk-frame-06.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-sip-certs">[13]</a></td>
<td class="author-text">Jennings, C. and J. Fischl, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-sip-certs-12.txt">Certificate Management Service for The Session Initiation Protocol (SIP)</a>,&rdquo; draft-ietf-sip-certs-12 (work in progress), March&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-sip-certs-12.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3515">[14]</a></td>
<td class="author-text">Sparks, R., &ldquo;<a href="http://tools.ietf.org/html/rfc3515">The Session Initiation Protocol (SIP) Refer Method</a>,&rdquo; RFC&nbsp;3515, April&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3515.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-hip-rvs">[15]</a></td>
<td class="author-text">Laganier, J. and L. Eggert, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-hip-rvs-05.txt">Host Identity Protocol (HIP) Rendezvous Extension</a>,&rdquo; draft-ietf-hip-rvs-05 (work in progress), June&nbsp;2006 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-hip-rvs-05.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-hip-nat-traversal">[16]</a></td>
<td class="author-text">Komu, M., Henderson, T., Tschofenig, H., Melen, J., and A. Keranen, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-hip-nat-traversal-09.txt">Basic HIP Extensions for Traversal of Network Address Translators</a>,&rdquo; draft-ietf-hip-nat-traversal-09 (work in progress), October&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-hip-nat-traversal-09.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-behave-rfc3489bis">[17]</a></td>
<td class="author-text">Rosenberg, J., Mahy, R., Matthews, P., and D. Wing, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-behave-rfc3489bis-18.txt">Session Traversal Utilities for (NAT) (STUN)</a>,&rdquo; draft-ietf-behave-rfc3489bis-18 (work in progress), July&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-behave-rfc3489bis-18.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-behave-turn">[18]</a></td>
<td class="author-text">Rosenberg, J., Mahy, R., and P. Matthews, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-behave-turn-16.txt">Traversal Using Relays around NAT (TURN): Relay Extensions to Session Traversal Utilities for NAT (STUN)</a>,&rdquo; draft-ietf-behave-turn-16 (work in progress), July&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-behave-turn-16.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-hip-esp">[19]</a></td>
<td class="author-text">Jokela, P., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-hip-esp-06.txt">Using ESP transport format with HIP</a>,&rdquo; draft-ietf-hip-esp-06 (work in progress), June&nbsp;2007 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-hip-esp-06.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Hannes Tschofenig</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia Siemens Networks</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Linnoitustie 6</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Espoo  02600</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+358 (50) 4871445</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:Hannes.Tschofenig@nsn.com">Hannes.Tschofenig@nsn.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.tschofenig.com">http://www.tschofenig.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Joerg Ott</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Helsinki University of Technology</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Otakaari 5A</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Espoo  FI-02150</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:jo@netlab.hut.fi">jo@netlab.hut.fi</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Henning Schulzrinne</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Columbia University</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Department of Computer Science</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">450 Computer Science Building</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">New York, NY  10027</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 212 939 7042</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:schulzrinne@cs.columbia.edu">schulzrinne@cs.columbia.edu</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.cs.columbia.edu/~hgs">http://www.cs.columbia.edu/~hgs</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Thomas R. Henderson</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">The Boeing Company</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">P.O. Box 3707</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Seattle, WA</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:thomas.r.henderson@boeing.com">thomas.r.henderson@boeing.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Gonzalo Camarillo</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Ericsson</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Hirsalantie 11</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Jorvas  02420</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:Gonzalo.Camarillo@ericsson.com">Gonzalo.Camarillo@ericsson.com</a></td></tr>
</table>
<a name="rfc.copyright"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Full Copyright Statement</h3>
<p class='copyright'>
Copyright &copy; The IETF Trust (2008).</p>
<p class='copyright'>
This document is subject to the rights,
licenses and restrictions contained in BCP&nbsp;78,
and except as set forth therein,
the authors retain all their rights.</p>
<p class='copyright'>
This document and the information contained herein are provided
on an &ldquo;AS IS&rdquo; basis and THE CONTRIBUTOR,
THE ORGANIZATION HE/SHE REPRESENTS
OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE.</p>
<h3>Intellectual Property</h3>
<p class='copyright'>
The IETF takes no position regarding the validity or scope of any
Intellectual Property Rights or other rights that might be claimed
to pertain to the implementation or use of the technology
described in this document or the extent to which any license
under such rights might or might not be available; nor does it
represent that it has made any independent effort to identify any
such rights.
Information on the procedures with respect to
rights in RFC documents can be found in BCP&nbsp;78 and BCP&nbsp;79.</p>
<p class='copyright'>
Copies of IPR disclosures made to the IETF Secretariat and any
assurances of licenses to be made available,
or the result of an attempt made to obtain a general license or
permission for the use of such proprietary rights by implementers or
users of this specification can be obtained from the IETF on-line IPR
repository at <a href='http://www.ietf.org/ipr'>http://www.ietf.org/ipr</a>.</p>
<p class='copyright'>
The IETF invites any interested party to bring to its attention
any copyrights,
patents or patent applications,
or other
proprietary rights that may cover technology that may be required
to implement this standard.
Please address the information to the IETF at <a href='mailto:ietf-ipr@ietf.org'>ietf-ipr@ietf.org</a>.</p>
</body></html>
