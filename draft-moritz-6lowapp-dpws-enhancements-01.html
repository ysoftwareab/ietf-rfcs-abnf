<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>DPWS for 6LoWPAN</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="DPWS for 6LoWPAN">
<meta name="keywords" content="DPWS, 6LoWPAN, 6LoWAPP">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">6LoWAPP</td><td class="header">G. Moritz, Ed.</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">University of Rostock</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">June 16, 2010</td></tr>
<tr><td class="header">Expires: December 18, 2010</td><td class="header">&nbsp;</td></tr>
</table></td></tr></table>
<h1><br />DPWS for 6LoWPAN<br />draft-moritz-6lowapp-dpws-enhancements-01</h1>

<h3>Abstract</h3>

<p>This draft describes adaptions and enhancements for deploying the Devices Profile for Web Service (DPWS) in 6LoWPAN networks. 
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.
This document may not be modified, and derivative works of it may
not be created, and it may not be published except as an Internet-Draft.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on December 18, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">1.1.</a>&nbsp;
Requirements Language<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">1.2.</a>&nbsp;
Terminology<br />
<a href="#anchor4">2.</a>&nbsp;
Discovery optimizations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">2.1.</a>&nbsp;
General adaptions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">2.2.</a>&nbsp;
Discovery addressing<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">2.3.</a>&nbsp;
Discovery proxy<br />
<a href="#anchor8">3.</a>&nbsp;
Message compression<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">3.1.</a>&nbsp;
HTTP compression<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">3.2.</a>&nbsp;
SOAP compression<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">3.3.</a>&nbsp;
Compression integration<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">3.3.1.</a>&nbsp;
Payload compression<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">3.3.2.</a>&nbsp;
TCP vs. UDP<br />
<a href="#IANA">4.</a>&nbsp;
IANA Considerations<br />
<a href="#Security">5.</a>&nbsp;
Security Considerations<br />
<a href="#rfc.references1">6.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">6.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">6.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Author's Address<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>In August 2008 a technical committee (TC) at OASIS was formed for the Web Services Discovery and Web Services Devices Profile<a class='info' href='#WS-DD'>(WS-DD)<span> (</span><span class='info'>OASIS Open, &ldquo;OASIS Web Services Discovery and Web Services Devices Profile (WS-DD) TC,&rdquo; 2009.</span><span>)</span></a> [WS&#8209;DD]. WS-DD standardizes a lightweight subset of the Web services protocol suite that makes it easy to find, share, and control devices on a network.
</p>
<p>The work of this TC is based on the former DPWS, WS-Discovery, and SOAP-over-UDP specifications.
DPWS makes use of existing Web services protocols, but also adds several extensions to enable Web services based communication on embedded devices also. Thereby, DPWS includes features like (1) discovery of devices and metadata exchange with services even in dynamic changing environments (2) eventing about state changes by WS-Eventing (3) security and integrity for discovery, metadata exchange and service usages. Because DPWS bases on existing Web services standards, it is fully capable of being integrated in the Web services framework.
</p>
<p>
This draft describes several adaptions and enhancements to expand DPWS deployments to 6LoWPAN networks, but is far away from a comprehensive specification. It only presents a basis for further discussions. Main scope is the definition of a profile, to describe: message compression and bidirectional message reduction, while staying fully compliant with existing WS-DD specifications. The deployment of this profile is fully transparent for existing DPWS implementations and describes extension to be considered by 6LoWPAN networks only.

</p>
<p>
Readers of this draft should have a basic knowledge about the specifications <a class='info' href='#DPWS'>DPWS<span> (</span><span class='info'>Driscoll and Mensch, &ldquo;OASIS Devices Profile for Web Services (DPWS) Version 1.1,&rdquo; 2009.</span><span>)</span></a> [DPWS], <a class='info' href='#WS-Discovery'>WS-Discovery<span> (</span><span class='info'>Modi and Kemp, &ldquo;OASIS Web Services Dynamic Discovery (WS-Discovery) Version 1.1,&rdquo; 2009.</span><span>)</span></a> [WS&#8209;Discovery], <a class='info' href='#SOAP-over-UDP'>SOAP-over-UDP<span> (</span><span class='info'>Jeyaraman, &ldquo;OASIS SOAP-over-UDP Version 1.1,&rdquo; 2009.</span><span>)</span></a> [SOAP&#8209;over&#8209;UDP] and related standards like SOAP, HTTP, XML and XML Schema.

</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Requirements Language</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
        "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
        document are to be interpreted as described in <a class='info' href='#RFC2119'>RFC 2119<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> [RFC2119].
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.2"></a><h3>1.2.&nbsp;
Terminology</h3>

<p>
			</p>
<blockquote class="text"><dl>
<dt>DPWS</dt>
<dd>In the remainder of this draft, DPWS is used as general term for the WS-DD specifications <a class='info' href='#DPWS'>DPWS<span> (</span><span class='info'>Driscoll and Mensch, &ldquo;OASIS Devices Profile for Web Services (DPWS) Version 1.1,&rdquo; 2009.</span><span>)</span></a> [DPWS], <a class='info' href='#WS-Discovery'>WS-Discovery<span> (</span><span class='info'>Modi and Kemp, &ldquo;OASIS Web Services Dynamic Discovery (WS-Discovery) Version 1.1,&rdquo; 2009.</span><span>)</span></a> [WS&#8209;Discovery], and <a class='info' href='#SOAP-over-UDP'>SOAP-over-UDP<span> (</span><span class='info'>Jeyaraman, &ldquo;OASIS SOAP-over-UDP Version 1.1,&rdquo; 2009.</span><span>)</span></a> [SOAP&#8209;over&#8209;UDP].
</dd>
<dt>DPWS specification</dt>
<dd>Points to the <a class='info' href='#DPWS'>DPWS<span> (</span><span class='info'>Driscoll and Mensch, &ldquo;OASIS Devices Profile for Web Services (DPWS) Version 1.1,&rdquo; 2009.</span><span>)</span></a> [DPWS] specification directly.
</dd>
<dt>Device</dt>
<dd>A device is an endpoint implementing DPWS device functionalities as specified by <a class='info' href='#WS-DD'>WS-DD<span> (</span><span class='info'>OASIS Open, &ldquo;OASIS Web Services Discovery and Web Services Devices Profile (WS-DD) TC,&rdquo; 2009.</span><span>)</span></a> [WS&#8209;DD].
</dd>
<dt>Client</dt>
<dd>A client is an endpoint implementing DPWS client functionalities as specified by <a class='info' href='#WS-DD'>WS-DD<span> (</span><span class='info'>OASIS Open, &ldquo;OASIS Web Services Discovery and Web Services Devices Profile (WS-DD) TC,&rdquo; 2009.</span><span>)</span></a> [WS&#8209;DD].
</dd>
<dt>Hello</dt>
<dd>The Hello message of a device as defined in <a class='info' href='#WS-Discovery'>WS-Discovery<span> (</span><span class='info'>Modi and Kemp, &ldquo;OASIS Web Services Dynamic Discovery (WS-Discovery) Version 1.1,&rdquo; 2009.</span><span>)</span></a> [WS&#8209;Discovery].
</dd>
<dt>Bye</dt>
<dd>The Bye message of a device as defined in <a class='info' href='#WS-Discovery'>WS-Discovery<span> (</span><span class='info'>Modi and Kemp, &ldquo;OASIS Web Services Dynamic Discovery (WS-Discovery) Version 1.1,&rdquo; 2009.</span><span>)</span></a> [WS&#8209;Discovery].
</dd>
<dt>Probe</dt>
<dd>The Probe message of a client as defined in <a class='info' href='#WS-Discovery'>WS-Discovery<span> (</span><span class='info'>Modi and Kemp, &ldquo;OASIS Web Services Dynamic Discovery (WS-Discovery) Version 1.1,&rdquo; 2009.</span><span>)</span></a> [WS&#8209;Discovery].
</dd>
<dt>Probe Match</dt>
<dd>The Probe Match message of a device as defined in <a class='info' href='#WS-Discovery'>WS-Discovery<span> (</span><span class='info'>Modi and Kemp, &ldquo;OASIS Web Services Dynamic Discovery (WS-Discovery) Version 1.1,&rdquo; 2009.</span><span>)</span></a> [WS&#8209;Discovery].
</dd>
<dt>Resolve</dt>
<dd>The Resolve message of a client as defined in <a class='info' href='#WS-Discovery'>WS-Discovery<span> (</span><span class='info'>Modi and Kemp, &ldquo;OASIS Web Services Dynamic Discovery (WS-Discovery) Version 1.1,&rdquo; 2009.</span><span>)</span></a> [WS&#8209;Discovery].
</dd>
<dt>Resolve Match</dt>
<dd>The Resolve Match message of a device as defined in <a class='info' href='#WS-Discovery'>WS-Discovery<span> (</span><span class='info'>Modi and Kemp, &ldquo;OASIS Web Services Dynamic Discovery (WS-Discovery) Version 1.1,&rdquo; 2009.</span><span>)</span></a> [WS&#8209;Discovery].
</dd>
<dt>WSDL</dt>
<dd>Acronym for the document describing the services in <a class='info' href='#WSDL'>Web Services Description Language<span> (</span><span class='info'>Christensen, Curbera, Meredith, and Weerawarana, &ldquo;W3C Web Services Description Language (WSDL) 1.1,&rdquo; March&nbsp;2001.</span><span>)</span></a> [WSDL] format.
</dd>
<dt>Edge Router</dt>
<dd>Edge Routers are the routers that connect LoWPANs to an IPv6 infrastructure via backhaul or backbone links when such an infrastructure is available. (Defined in <a class='info' href='#I-D.ietf-6lowpan-nd'>6LoWPAN Neighbor Discovery<span> (</span><span class='info'>Shelby, Z., Thubert, P., Hui, J., Chakrabarti, S., Bormann, C., and E. Nordmark, &ldquo;6LoWPAN Neighbor Discovery,&rdquo; October&nbsp;2009.</span><span>)</span></a> [I&#8209;D.ietf&#8209;6lowpan&#8209;nd]
</dd>
</dl></blockquote><p>
			
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Discovery optimizations</h3>

<p>DPWS describes two different modes for discovery of devices: ad-hoc mode and managed mode. In managed mode, a registry called Discovery Proxy is applied to suppress multicast messages. This section describes adaptions for both of these modes.
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
General adaptions</h3>

<p>
	A DEVICE MUST include the transport specific addresses in its Hello and Probe Match messages.
	
</p>
<p>
In accordance to DPWS, embedding of a transport specific address in  Hello and Probe messages is not mandatory. This behavior is counterproductive for WSN, with the constraints for energy consumption and limited bandwidth. Thus, the optional fields for the transport specific addresses are now mandatory to avoid Resolve messages.
	
</p>
<p>A DEVICE SHOULD include all device types in Hello and Probe Match messages.
</p>
<p>In the current version of DPWS it is not mandatory to include the type field in the Hello and Probe Match messages. A client MAY infer to services provided by the device with the help of the device type. Inclusion of the device type can avoid further discovery and metadata exchange messages. 
</p>
<p>A SERVICE SHOULD NOT provide the WSDL file for CLIENTS at run time.
</p>
<p>Providing the WSDL during the discovery phase is optional in DPWS. WSDL are used in general at development time only for code generation. These WSDL files have a size of several kB in most analyzed scenarios. The expensive and memory consuming storage of these WSDL files on the device and on the client node is not applicable for WSN. Furthermore, the exchange itself consumes a high bandwidth.
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
Discovery addressing</h3>

<p>
	 </p>
<ul class="text">
<li>All SOAP-over-UDP messages inside the 6LoWPAN network MUST use the port 61616 as target port. (Exact port to be defined)
</li>
<li>Devices inside the 6LoWPAN network MUST listen to the IPv6 multicast address: FF02::C0. (Exact address to be defined)
</li>
<li>Clients inside the 6LoWPAN network MUST listen to the IPv6 multicast address: FF02::C1. (Exact address to be defined)
</li>
</ul><p>
	
</p>
<p>In RFC4944, a UDP port compression is described which works most efficient when using ports in a specific range. Thus, the used ports should be changed to fit in this range. The ports have to be mapped on the edge router of the 6LoWPAN network for incoming and outgoing SOAP-over-UDP messages.
</p>
<p>DPWS defines one IPv4 and one IPv6 multicast addresses to be used for discovery message exchange. But DPWS differentiates between device and client roles. Hence there are messages to be processed by clients (Hello) and by devices (Probe, Resolve) exclusively. Usage of one and the same address for all these messages implies overhead in sending to and receiving of these messages independent of the nodes role. Inside 6LoWPAN networks, different addresses have to be used. The mapping into compliant addresses is done by the edge router of the 6LoWPAN network.
</p>
<p>The multicast addresses for discovery have a link local scope. For a transparent integration, in ad-hoc mode, edge routers of 6LoWPAN networks SHOULD forward incoming and outgoing link-local scope multicast discovery messages. Another solution might be to use a different scope for the multicast discovery messaging.
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3"></a><h3>2.3.&nbsp;
Discovery proxy</h3>

<p>In managed mode, a device and service registry is applied. It is possible, to use more than one discovery proxy in a network. In managed mode, one discovery proxy SHOULD be deployed at the edge router to hide expensive external multicast messages from the 6LoWPAN network and omit multicast flooding.
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Message compression</h3>

<p>Because DPWS bases on SOAP and thus on XML for data representation, XML compression techniques and/or encoding concepts have to be used to reduce message sizes.

</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
HTTP compression</h3>

<p>
	DPWS for 6LoWPAN requires HTTP header compression. While <a class='info' href='#I-D.frank-6lowapp-chopan'>CHOPAN<span> (</span><span class='info'>Frank, B., &ldquo;Chopan - Compressed HTTP Over PANs,&rdquo; September&nbsp;2009.</span><span>)</span></a> [I&#8209;D.frank&#8209;6lowapp&#8209;chopan] describes a general and generic HTTP compression, this draft focuses on a more DPWS specific compression scheme as described here.
</p>
<p>DPWS uses SOAP-over-HTTP binding for unicast messaging. All messages are using the POST method of HTTP in version 1.1. The transport specific addresses (target host) can be elided and derived from transport layer. In accordance to HTTP 1.1, all connections marked not explicit as close are keep-alive connections. But keep-alive TCP connections are not applicable for WSN. The SOAPAction field is mandatory when using the SOAP-over-HTTP binding, but can be empty. Because DPWS uses WS-Addressing, the SOAPAction field is redundant. The content-type of SOAP-over-HTTP is always application/soap+xml; charset=utf-8. To sum up, only few fields are left, which are analyzed by devices and clients and which provide useful information. A specific compression scheme is required to omit unnecessary HTTP header fields and allow a compression (optimized binary format) of the remaining required fields. The fields which have to be left are:
</p>
<p>Content-length: This is required to allow resource constrained sensor nodes to know about length of data to be analyzed and thus e.g. required memory allocations.
</p>
<p>HTTP Status Codes: The status code may be analyzed in error and fault cases. Status code 200/OK can be implied if this field is missing, to use it only in error/fault cases.
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
SOAP compression</h3>

<p>Different XML specific and XML non-specific compression schemes are already known. The following table presents an overview about existing schemes and compressors, including the emerging EXI format of the W3C. The table shows resulting sizes of different compressors applied to DPWS messages. The values present the sizes of the SOAP envelopes (excluding HTTP headers) after compression and in the last line pure XML messages for comparison. The messages were recorded in a realistic scenario, implemented by using compliant DPWS toolkits. An overall number of 18 different message types are included in the evaluations and the table shows the averages over all these message types. Most of the compressors suffer from the simple XML structures. Sensor nodes will not provide complex services and thus simple message have to be assumed. These measurements might provide a basis for further discussions on message size optimizations.
</p>
<p>For the measurements of EXI schema-informed format, separated results are presented: optimized and default. The default format used XML schema files as defined in DPWS without optimizations. This includes an inconsistency of different namespaces and versions used by DPWS and among Web services specifications (especially WS-Addressing and WS-Eventing). For the optimized format, some improvements are added. Most values of the XML tags and attributes in DPWS are well-known URIs. If these values are included in the XML schema files and with corrected dependencies, the average message size is reduced significantly as presented in the table.
</p>
<p>Using the table below as starting point, further investigations were necessary with special focus on EXI. The influence of the Deflate compression and Bit/Byte aligned modes of EXI is minor compared to the optimization possibilities of the schema files. With carefully optimized schema files, the message sizes could be further reduced to ~96 Byte on an average in Bit aligned compressed mode (~121 Bytes in Byte aligned mode) with a minimum of 10 Bytes for the smallest message (21 Byte in Byte aligned mode) and a maximum of 391 Bytes for the biggest message (464 Byte in Byte aligned mode).
</p>
<p>It is important to notice that the encoded messages used for the evaluations are still complaint SOAP envelopes that can be re-encoded in compliant XML utf-8 if the corresponding XML schema documents are used.
</p><br /><hr class="insert" />
<a name="XML-compression"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="center"><col align="center"><col align="center"><col align="center">
<tr><th align="left">Compressor</th><th align="center">Average in Byte</th><th align="center">Average in %</th><th align="center">Minimum in Byte</th><th align="center">Maximum in Byte</th></tr>
<tr>
<td align="left">EXI schema-informed (optimized)</td>
<td align="center">153,72</td>
<td align="center">19,97</td>
<td align="center">66,00</td>
<td align="center">349,00</td>
</tr>
<tr>
<td align="left">EXI schema-informed (default)</td>
<td align="center">206,61</td>
<td align="center">26,49</td>
<td align="center">122,00</td>
<td align="center">415,00</td>
</tr>
<tr>
<td align="left">Fast Infoset schema-informed/with compression</td>
<td align="center">218,39</td>
<td align="center">27,98</td>
<td align="center">103,00</td>
<td align="center">455,00</td>
</tr>
<tr>
<td align="left">Fast Infoset schema-informed/without compression</td>
<td align="center">242,00</td>
<td align="center">30,09</td>
<td align="center">97,00</td>
<td align="center">563,00</td>
</tr>
<tr>
<td align="left">EXI schema-less/with compression</td>
<td align="center">315,67</td>
<td align="center">40,31</td>
<td align="center">192,00</td>
<td align="center">633,00</td>
</tr>
<tr>
<td align="left">gzip (C=9)</td>
<td align="center">419,83</td>
<td align="center">54,54</td>
<td align="center">271,00</td>
<td align="center">749,00</td>
</tr>
<tr>
<td align="left">XMLPPM</td>
<td align="center">427,44</td>
<td align="center">55,61</td>
<td align="center">274,00</td>
<td align="center">755,00</td>
</tr>
<tr>
<td align="left">gzip (C=1)</td>
<td align="center">437,83</td>
<td align="center">56,96</td>
<td align="center">297,00</td>
<td align="center">799,00</td>
</tr>
<tr>
<td align="left">Xmill (C=9)</td>
<td align="center">457,89</td>
<td align="center">59,46</td>
<td align="center">300,00</td>
<td align="center">824,00</td>
</tr>
<tr>
<td align="left">Xmill (C=1)</td>
<td align="center">463,56</td>
<td align="center">60,14</td>
<td align="center">303,00</td>
<td align="center">852,00</td>
</tr>
<tr>
<td align="left">EXI schema-less/without compression</td>
<td align="center">467,77</td>
<td align="center">59,64</td>
<td align="center">234,00</td>
<td align="center">1118,00</td>
</tr>
<tr>
<td align="left">bzip2 (C=1)</td>
<td align="center">472,94</td>
<td align="center">61,41</td>
<td align="center">304,00</td>
<td align="center">852,00</td>
</tr>
<tr>
<td align="left">bzip2 (C=9)</td>
<td align="center">474,78</td>
<td align="center">61,82</td>
<td align="center">315,00</td>
<td align="center">852,00</td>
</tr>
<tr>
<td align="left">Fast Infoset (schema-less)</td>
<td align="center">561,89</td>
<td align="center">69,70</td>
<td align="center">315,00</td>
<td align="center">1301,00</td>
</tr>
<tr>
<td align="left">XML</td>
<td align="center">814,89</td>
<td align="center">100,00</td>
<td align="center">418,00</td>
<td align="center">2089,00</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 1: DPWS SOAP envelope compression comparison&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
Compression integration</h3>

<p>This section describes general points, which might be discussed more in general in 6LoWAPP. 
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.1"></a><h3>3.3.1.&nbsp;
Payload compression</h3>

<p>Many protocols (like DPWS) already provide concepts for discovery of devices (ad-hoc networking), data dissemination, eventing, etc. 6LoWPAN protocols allow a seamless connectivity of IP networks with wireless sensor networks, without the need for application layer gateways. These gateways must be aware of application layer data and need an understanding of semantics of payload. Instead, the communication of 6loWPAN nodes with existing networking devices or other existing implementations must be transparent and invisible for these external hosts. Application layer data compression and encoding should only affect the 6LoWPAN network and communication inside the network, like 6LoWPAN does with IPv6 headers. But payload on application layer is not self-contained in one packet like IP, TCP and UDP headers. Defining new extension to be implemented by the external nodes is not a proper solution and violates the core concept of 6LoWPAN protocols. 
</p>
<p>New possibilities for application layer data encoding must be found, to allow efficient in-transit data encoding for traffic inside the 6LoWPAN network without affecting external communication. A new Encoding Router (ER) role might be defined. This ER is located at the edge router and not only translates compressed network and transport layer protocols, but also standardized application layer encoding and compression (e.g. EXI format in compliant XML/SOAP envelopes). This requires no understanding of semantics of the payload, but allows a seamless connectivity. The deployment of an ER might violate the layered model, because the ER must receive external message as representative to the 6LoWPAN nodes, encodes the messages and forwards them (outgoing traffic vice versa). 
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3.2"></a><h3>3.3.2.&nbsp;
TCP vs. UDP</h3>

<p>TCP makes use of mechanisms like sliding window and flow control, to optimize throughput. These mechanisms are questionable in wireless sensor networks. To reduce TCP overhead, also UDP might be used inside 6LoWPAN networks instead. But most application layer protocols base on TCP because of the required end-to-end reliability. The usage of the lightweight UDP for internal communication instead of TCP would require additional mechanisms to assure end-to-end reliability between endpoints. Also definition of an extension for UDP to provide this functionality is possible, but reinventing TCP must be omitted.
</p>
<a name="IANA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
IANA Considerations</h3>

<p>The new defined discovery addresses have to be registered at IANA.
</p>
<a name="Security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Security Considerations</h3>

<p>No security issues have been identified in this draft.
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>6.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>6.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="DPWS">[DPWS]</a></td>
<td class="author-text">Driscoll and Mensch, &ldquo;<a href="http://docs.oasis-open.org/ws-dd/ns/dpws/2009/01">OASIS Devices Profile for Web Services (DPWS) Version 1.1</a>,&rdquo; 2009.</td></tr>
<tr><td class="author-text" valign="top"><a name="EXI-format">[EXI-format]</a></td>
<td class="author-text">Scheider and Kamiya, &ldquo;<a href="http://www.w3.org/TR/2009/CR-exi-20091208/">W3C Efficient XML Interchange (EXI) Format 1.0 Candidate Recommendation</a>,&rdquo; December&nbsp;2009.</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.frank-6lowapp-chopan">[I-D.frank-6lowapp-chopan]</a></td>
<td class="author-text">Frank, B., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-frank-6lowapp-chopan-00.txt">Chopan - Compressed HTTP Over PANs</a>,&rdquo; draft-frank-6lowapp-chopan-00 (work in progress), September&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-frank-6lowapp-chopan-00.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-6lowpan-nd">[I-D.ietf-6lowpan-nd]</a></td>
<td class="author-text">Shelby, Z., Thubert, P., Hui, J., Chakrabarti, S., Bormann, C., and E. Nordmark, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-6lowpan-nd-07.txt">6LoWPAN Neighbor Discovery</a>,&rdquo; draft-ietf-6lowpan-nd-07 (work in progress), October&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-6lowpan-nd-07.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="SOAP-over-UDP">[SOAP-over-UDP]</a></td>
<td class="author-text">Jeyaraman, &ldquo;<a href="http://docs.oasis-open.org/ws-dd/soapoverudp/1.1/os/wsdd-soapoverudp-1.1-spec-os.html">OASIS SOAP-over-UDP Version 1.1</a>,&rdquo; 2009.</td></tr>
<tr><td class="author-text" valign="top"><a name="WS-DD">[WS-DD]</a></td>
<td class="author-text">OASIS Open, &ldquo;<a href="www.oasis-open.org/committees/ws-dd/">OASIS Web Services Discovery and Web Services Devices Profile (WS-DD) TC</a>,&rdquo; 2009.</td></tr>
<tr><td class="author-text" valign="top"><a name="WS-Discovery">[WS-Discovery]</a></td>
<td class="author-text">Modi and Kemp, &ldquo;<a href="http://docs.oasis-open.org/ws-dd/ns/discovery/2009/01">OASIS Web Services Dynamic Discovery (WS-Discovery) Version 1.1</a>,&rdquo; 2009.</td></tr>
<tr><td class="author-text" valign="top"><a name="WSDL">[WSDL]</a></td>
<td class="author-text">Christensen, Curbera, Meredith, and Weerawarana, &ldquo;<a href="http://www.w3.org/TR/2009/CR-exi-20091208/">W3C Web Services Description Language (WSDL) 1.1</a>,&rdquo; March&nbsp;2001.</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Author's Address</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Guido Moritz (editor)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">University of Rostock</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">18051 Rostock,   </td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Germany</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+49 381 498 7269</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:guido.moritz@uni-rostock.de">guido.moritz@uni-rostock.de</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.imd.uni-rostock.de/">http://www.imd.uni-rostock.de/</a></td></tr>
</table>
</body></html>
