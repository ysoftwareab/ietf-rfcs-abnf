<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>RPL Objective Function 0</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Terminology">
<link href="#rfc.section.3" rel="Chapter" title="3 Objective Function 0 Overview">
<link href="#rfc.section.4" rel="Chapter" title="4 OF0 Operations">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 Computing Rank">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Feasible Successors Selection">
<link href="#rfc.section.4.2.1" rel="Chapter" title="4.2.1 Selection Of The Preferred Parent">
<link href="#rfc.section.4.2.2" rel="Chapter" title="4.2.2 Selection Of The Backup Feasible Successor">
<link href="#rfc.section.5" rel="Chapter" title="5 Abstract Interface to OF0">
<link href="#rfc.section.6" rel="Chapter" title="6 OF0 Operands">
<link href="#rfc.section.6.1" rel="Chapter" title="6.1 Variables">
<link href="#rfc.section.6.2" rel="Chapter" title="6.2 Configurable Parameters">
<link href="#rfc.section.6.3" rel="Chapter" title="6.3 Constants">
<link href="#rfc.section.7" rel="Chapter" title="7 Manageability Considerations">
<link href="#rfc.section.7.1" rel="Chapter" title="7.1 Device Configuration">
<link href="#rfc.section.7.2" rel="Chapter" title="7.2 Device Monitoring">
<link href="#rfc.section.8" rel="Chapter" title="8 IANA Considerations">
<link href="#rfc.section.9" rel="Chapter" title="9 Security Considerations">
<link href="#rfc.section.10" rel="Chapter" title="10 Acknowledgements">
<link href="#rfc.references" rel="Chapter" title="11 References">
<link href="#rfc.references.1" rel="Chapter" title="11.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="11.2 Informative References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="The Routing Protocol for Low Power and Lossy Networks (RPL) specification defines a generic Distance Vector protocol that is adapted to a variety of networks types by the application of specific Objective Functions. An Objective Function defines how a RPL node selects and optimizes routes within a RPL Instance based on the information objects available.  This document specifies a basic Objective Function that relies only on the objects that are defined in RPL and does not use any extension.  " />
  <meta name="description" content="The Routing Protocol for Low Power and Lossy Networks (RPL) specification defines a generic Distance Vector protocol that is adapted to a variety of networks types by the application of specific Objective Functions. An Objective Function defines how a RPL node selects and optimizes routes within a RPL Instance based on the information objects available.  This document specifies a basic Objective Function that relies only on the objects that are defined in RPL and does not use any extension.  " />
  <meta name="keywords" content="Draft" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">ROLL</td>
<td class="right">P. Thubert, Ed.</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">Cisco Systems</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">June 20, 2011</td>
</tr>
<tr>
<td class="left">Expires: December 22, 2011</td>
<td class="right"></td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">RPL Objective Function 0<br />
  <span class="filename">draft-ietf-roll-of0-14</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>The Routing Protocol for Low Power and Lossy Networks (RPL) specification defines a generic Distance Vector protocol that is adapted to a variety of networks types by the application of specific Objective Functions. An Objective Function defines how a RPL node selects and optimizes routes within a RPL Instance based on the information objects available.  This document specifies a basic Objective Function that relies only on the objects that are defined in RPL and does not use any extension.  </p>
<h1><a>Requirements Language</a></h1>
<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">RFC 2119</a> <cite title="NONE">[RFC2119]</cite>.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on December 22, 2011.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Terminology</a>
</li>
<li>3.   <a href="#rfc.section.3">Objective Function 0 Overview</a>
</li>
<li>4.   <a href="#rfc.section.4">OF0 Operations</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">Computing Rank</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">Feasible Successors Selection</a>
</li>
<li>4.2.1.   <a href="#rfc.section.4.2.1">Selection Of The Preferred Parent</a>
</li>
<li>4.2.2.   <a href="#rfc.section.4.2.2">Selection Of The Backup Feasible Successor</a>
</li>
<li>5.   <a href="#rfc.section.5">Abstract Interface to OF0</a>
</li>
<li>6.   <a href="#rfc.section.6">OF0 Operands</a>
</li>
<li>6.1.   <a href="#rfc.section.6.1">Variables</a>
</li>
<li>6.2.   <a href="#rfc.section.6.2">Configurable Parameters</a>
</li>
<li>6.3.   <a href="#rfc.section.6.3">Constants</a>
</li>
<li>7.   <a href="#rfc.section.7">Manageability Considerations</a>
</li>
<li>7.1.   <a href="#rfc.section.7.1">Device Configuration</a>
</li>
<li>7.2.   <a href="#rfc.section.7.2">Device Monitoring</a>
</li>
<li>8.   <a href="#rfc.section.8">IANA Considerations</a>
</li>
<li>9.   <a href="#rfc.section.9">Security Considerations</a>
</li>
<li>10.   <a href="#rfc.section.10">Acknowledgements</a>
</li>
<li>11.   <a href="#rfc.references">References</a>
</li>
<li>11.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>11.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li><a href="#rfc.authors">Author's Address</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p><a href="#I-D.ietf-roll-rpl">The Routing Protocol for LLN (RPL) </a> <cite title="NONE">[I-D.ietf-roll-rpl]</cite> specification defines a generic Distance Vector protocol that is adapted to a variety of Low Power and Lossy Networks (LLN) types by the application of specific Objective Functions. An Objective Function defines how a RPL node selects and optimizes routes within a RPL Instance based on the information objects available. This separation of Objective Functions from the core protocol specification allows RPL to be adapted to meet the different optimization criteria required by the wide range of deployments, applications and network designs.</p>
<p id="rfc.section.1.p.2">RPL forms Directed Acyclic Graphs (DAGs) as collections of Destination Oriented DAGs (DODAGs) within instances of the protocol.  Each instance is associated with a specialized Objective Function. A DODAG is periodically reconstructed as a new DODAG Version to enable a global reoptimization of the graph.</p>
<p id="rfc.section.1.p.3">An instance of RPL running on a device uses an Objective Function to help it determine which DODAG Version it should join. The OF is also used by the RPL instance to select a number of routers within the DODAG Version to serve as parents or as feasible successors.</p>
<p id="rfc.section.1.p.4">The RPL instance uses the OF to compute a Rank for the device. This value represents an abstract distance to the root of the DODAG within the DODAG Version. The Rank is exchanged between nodes using RPL and allows other RPL nodes to avoid loops and verify forward progression toward the destination, as specified in	<a href="#I-D.ietf-roll-rpl">[I-D.ietf-roll-rpl]</a>.</p>
<p id="rfc.section.1.p.5">The Objective Function Zero (OF0) operates on parameters that are obtained from provisioning, the RPL DODAG Configuration option and the RPL DIO base container <a href="#I-D.ietf-roll-rpl">[I-D.ietf-roll-rpl]</a>.  </p>
<p id="rfc.section.1.p.6">The Rank of a node is obtained by adding a normalized scalar, rank_increase (<a href="#vars">Section 6.1</a>), to the Rank of a selected preferred parent. The rank_increase can vary with a ratio from 1 (excellent) to 9 (worst acceptable) to represent the link properties.  By default, OF0 encodes the 2-octet Rank in units of 256, and the default settings allow to encode a  minimum of 28 (worst acceptable) hops and a maximum of 255 (excellent) hops.  </p>
<p id="rfc.section.1.p.7">It is important that devices deployed in a particular network or environment use the same OF to build and operate DODAGs. If they do not, it is likely that sub-optimal paths will be selected). In practice, without a common definition of an OF, RPL implementations cannot guarantee to interoperate correctly.  The RPL specification [I-D.ietf-roll-rpl] does not include any OF definitions. This is left for other documents specific to different deployments and application environments.  Since there is no default OF or metric container in the RPL main specification, it might happen that, unless two given implementations follow the same guidance for a specific problem or environment, those implementations will not support a common OF with which they could interoperate.  </p>
<p id="rfc.section.1.p.8">OF0 is designed as a default OF that will allow interoperation between implementations in a wide spectrum of use cases.  This is why it is not specific as to how the link properties are transformed into a rank_increase and leaves that responsibility to the implementation; rather, OF0 enforces normalized values for the rank_increase of a normal link and its acceptable range, as opposed to formulating the details of its computation.  This is also why OF0 ignores metric containers.  </p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> <a href="#Terminology" id="Terminology">Terminology</a>
</h1>
<p id="rfc.section.2.p.1">The Terminology used in this document is consistent with and incorporates that described in `Terminology in Low power And Lossy Networks' <a href="#I-D.ietf-roll-terminology">[I-D.ietf-roll-terminology]</a> and <a href="#I-D.ietf-roll-rpl">[I-D.ietf-roll-rpl]</a>.</p>
<p id="rfc.section.2.p.2">The term 'feasible successor' is used to refer to a neighbor that can possibly be used as a next-hop for upwards traffic following the loop avoidance and forwarding rules that the nodes implements and that are defined in the RPL specification <a href="#I-D.ietf-roll-rpl">[I-D.ietf-roll-rpl]</a>.  </p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> Objective Function 0 Overview</h1>
<p id="rfc.section.3.p.1">The RPL specification describes constraints on how nodes select potential parents, called a parent set, from their neighbors.  All parents are feasible successors for upward traffic (towards the root). Additionally, RPL allows the use of parents in a subsequent Version of a same DODAG as feasible successors, in which case this node acts as a leaf in the subsequent DODAG Version.  </p>
<p id="rfc.section.3.p.2">The Goal of the OF0 is for a node to join a DODAG Version that offers good enough connectivity to a specific set of nodes or to a larger routing infrastructure though there is no guarantee that the path will be optimized according to a specific metric.  Thus, for the purpose of OF0, the term Grounded <a href="#I-D.ietf-roll-rpl">[I-D.ietf-roll-rpl]</a> means that the DODAG root provides such connectivity. How that connectivity is asserted and maintained is out of scope.</p>
<p id="rfc.section.3.p.3">Objective Function 0 is designed to find the nearest Grounded root.  This can be achieved if the Rank of a node is very close to an abstract function of its distance to the root.  This need is balanced with the other need of maintaining some path diversity, which may be achieved by increasing the Rank.  In the absence of a Grounded root, inner connectivity within the Low Power and Lossy Network is still desirable and floating DAGs will form, rooted at the nodes with the highest administrative preference.</p>
<p id="rfc.section.3.p.4">OF0 selects a preferred parent and a backup feasible successor if one is available. All the upward traffic is normally routed via the preferred parent with no attempt to perform any load balancing.  When the link conditions do not let an upward packet through the preferred parent, the packet is passed to the backup feasible successor.</p>
<p id="rfc.section.3.p.5">A RPL node monitors links to a number of neighbor nodes, and can use OF0 to assign a rank_increase to each link.  Though the exact method for computing the rank_increase is implementation-dependent, the computation must follow the rules that are specified in <a href="#comprank">Section 4.1</a>.  </p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> OF0 Operations</h1>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> <a href="#comprank" id="comprank">Computing Rank</a>
</h1>
<p id="rfc.section.4.1.p.1">An OF0 implementation first computes a variable step_of_rank (<a href="#vars">Section 6.1</a>) associated with a given parent from relevant link properties and metrics. The step_of_rank is used to compute the amount by which to increase the rank along a particular link, as explained later in this section.  </p>
<p id="rfc.section.4.1.p.2">Computing a step_of_rank based on a static metric such as an administrative cost implies that the OF0 implementation only considers parents with good enough connectivity, and results in a Rank that is analogous to hop-count.  In most LLNs, this favors paths with fewer but longer hops of poorer connectivity; it is thus RECOMMENDED to base the computation of the step_of_rank on dynamic link properties such as the expected transmission count metric (ETX) <a href="#I-D.ietf-roll-routing-metrics">[I-D.ietf-roll-routing-metrics]</a>,<a href="#DeCouto03">[DeCouto03]</a>. The <a href="#I-D.ietf-roll-minrank-hysteresis-of">Minimum Rank Objective Function with Hysteresis </a> <cite title="NONE">[I-D.ietf-roll-minrank-hysteresis-of]</cite> provides guidance on how link cost can be computed and on how hysteresis can improve Rank stability.</p>
<p id="rfc.section.4.1.p.3">OF0 allows an implementation to stretch the step_of_rank in order to enable the selection of at least one feasible successor and thus maintain path diversity.  Stretching the step_of_rank is NOT RECOMMENDED, because it augments the apparent distance from the node to the root, distorts the DODAG from the optimal shape and may cause instabilities due to greedy behaviors whereby depending nodes augment their Ranks to use each other as parents in a loop.  Still, an implementation MAY stretch the step_of_rank with at most a configurable stretch_of_rank (<a href="#parms">Section 6.2</a>) of any value between 0 (no stretch) and the fixed constant MAXIMUM_RANK_STRETCH (<a href="#consts">Section 6.3</a>).</p>
<p id="rfc.section.4.1.p.4">An implementation MUST maintain the stretched step_of_rank between the fixed constants MINIMUM_STEP_OF_RANK and MAXIMUM_STEP_OF_RANK (<a href="#consts">Section 6.3</a>). This range allows to reflect a large variation of link quality.</p>
<p id="rfc.section.4.1.p.5">The gap between MINIMUM_STEP_OF_RANK and MAXIMUM_RANK_STRETCH may not be sufficient in every case to strongly distinguish links of different types or categories in order to favor, say, powered over battery-operated or wired over wireless, within a same DAG. An implementation SHOULD allow to configure a factor called rank_factor (<a href="#parms">Section 6.2</a>) and to apply the factor on all links and peers to multiply the effect of the stretched step_of_rank in the rank_increase computation as further detailed below.  </p>
<p id="rfc.section.4.1.p.6">Additionally, an implementation MAY recognize categories of peers and links, such as different MAC types, in which case it SHOULD be able to configure a more specific rank_factor to those categories.  The rank_factor MUST be set between the fixed constants MINIMUM_RANK_FACTOR and MAXIMUM_RANK_FACTOR (<a href="#consts">Section 6.3</a>) .  </p>
<p id="rfc.section.4.1.p.7">The variable rank_increase is represented in units expressed by the variable MinHopRankIncrease which defaults to the fixed constant DEFAULT_MIN_HOP_RANK_INCREASE (<a href="#I-D.ietf-roll-rpl">[I-D.ietf-roll-rpl]</a>); with that setting, the least significant octet in the RPL Rank field in the DIO Base Object is not used.  </p>
<p id="rfc.section.4.1.p.8">The step_of_rank Sp that is computed for that link is multiplied by the rank_factor Rf and then possibly stretched by a stretch_of_rank Sr.  The resulting rank_increase is added to the Rank of preferred parent R(P) to obtain that of this node R(N): </p>
<p id="rfc.section.4.1.p.9">R(N) = R(P) + rank_increase where: </p>
<p id="rfc.section.4.1.p.10">rank_increase = (Rf*Sp + Sr) * MinHopRankIncrease </p>
<p id="rfc.section.4.1.p.11">Optionally, the administrative preference of a root MAY be configured to supersede the goal to join a Grounded DODAG. In that case, nodes will associate to the root with the highest preference available, regardless of whether that root is Grounded or not. Compared to a deployment with a multitude of Grounded roots that would result in the same multitude of DODAGs, such a configuration may result in possibly less but larger DODAGs, as many as roots configured with the highest priority in the reachable vicinity.</p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> Feasible Successors Selection</h1>
<h1 id="rfc.section.4.2.1">
<a href="#rfc.section.4.2.1">4.2.1.</a> Selection Of The Preferred Parent</h1>
<p id="rfc.section.4.2.1.p.1">As it scans all the candidate neighbors, OF0 keeps the parent that is the best for the following criteria (in order): </p>

<ol>
<li>
<a href="#I-D.ietf-roll-rpl">[I-D.ietf-roll-rpl]</a> section 8 spells out the generic rules for a node to re-parent and in particular the boundaries to augment its Rank within a DODAG Version.  A candidate that would not satisfy those rules MUST NOT be considered.</li>
<li>An implementation SHOULD validate a router prior to selecting it as preferred. This validation process is implementation and link type dependent, and is out of scope. A router that succeeded that validation process is preferable.</li>
<li>When multiple interfaces are available, a policy might be locally configured to order them and that policy applies first; that is a router on a higher order interface in the policy is preferable.</li>
<li>If the administrative preference of the root is configured to supersede the goal to join a Grounded DODAG, a router that offers connectivity to a more preferable root SHOULD be preferred.</li>
<li>A router that offers connectivity to a grounded DODAG Version SHOULD be preferred over one that does not.</li>
<li>A router that offers connectivity to a more preferable root SHOULD be preferred.</li>
<li>When comparing 2 parents that belong to the same DODAG, a router that offers connectivity to the most recent DODAG Version SHOULD be preferred.</li>
<li>The parent that causes the lesser resulting Rank for this node, as specified in <a href="#comprank">Section 4.1</a>, SHOULD be preferred.</li>
<li>A DODAG Version for which there is an alternate parent SHOULD be preferred.  This check is OPTIONAL. It is performed by computing the backup feasible successor while assuming that the router that is currently examined is finally selected as preferred parent.</li>
<li>The preferred parent that was in use already SHOULD be preferred.</li>
<li>A router that has announced a DIO message more recently SHOULD be preferred.</li>
</ol>

<p> These rules and their order MAY be varied by an implementation according to configured policy.  </p>
<h1 id="rfc.section.4.2.2">
<a href="#rfc.section.4.2.2">4.2.2.</a> Selection Of The Backup Feasible Successor</h1>
<p id="rfc.section.4.2.2.p.1">When selecting a backup feasible successor, the OF performs in order the following checks: </p>

<ol>
<li>When multiple interfaces are available, a router on a higher order interface is preferable.</li>
<li>The backup feasible successor MUST NOT be the preferred parent.</li>
<li>The backup feasible successor MUST be either in the same DODAG Version as this node or in an subsequent DODAG Version.</li>
<li>Along with RPL rules, a Router in the same DODAG Version as this node and with a Rank that is higher than the Rank computed for this node MUST NOT be selected as a feasible successor.  </li>
<li>A router with a lesser Rank SHOULD be preferred.</li>
<li>A router that has been validated as usable by an implementation-dependant validation process SHOULD be preferred.</li>
<li>The backup feasible successor that was in use already SHOULD be preferred.</li>
</ol>

<p> These rules and their order MAY be varied by an implementation according to configured policy.  </p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#API" id="API">Abstract Interface to OF0</a>
</h1>
<p id="rfc.section.5.p.1">Objective Function 0 interacts for its management and operations in the following ways: </p>

<dl>
<dt>Processing DIO:</dt>
<dd style="margin-left: 8">When a new DIO is received, the OF that corresponds to the Objective Code Point	(OCP) in the DIO is triggered with the content of the DIO.  OF0 is identified by OCP 0 (to be validated by IANA <a href="#IANA">Section 8</a>).</dd>
<dt>Providing DAG information:</dt>
<dd style="margin-left: 8">The OF0 support provides an interface that returns information about a given instance.  This includes material from the DIO base header, the role (router, leaf), and the Rank of this node.</dd>
<dt>Providing a Parent List:</dt>
<dd style="margin-left: 8">The OF0 support provide an interface that returns the ordered list of the parents and feasible successors for a given instance to the RPL core.  This includes the material that is contained in the transit option for each entry.</dd>
<dt>Triggered Updates:</dt>
<dd style="margin-left: 8">the OF0 support provides events to inform it that a change in DAG information or Parent List as  occurred.  This can be caused by an interaction with another system component such as configuration, timers, and device drivers, and the change may cause the RPL core to fire a new DIO or reset trickle timers.</dd>
</dl>

<p> </p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#constvarpar" id="constvarpar">OF0 Operands</a>
</h1>
<p id="rfc.section.6.p.1">On top of variables and constants defined in  <a href="#I-D.ietf-roll-rpl">[I-D.ietf-roll-rpl]</a>, this specification introduces the following variables and constants: </p>
<h1 id="rfc.section.6.1">
<a href="#rfc.section.6.1">6.1.</a> <a href="#vars" id="vars">Variables</a>
</h1>
<p id="rfc.section.6.1.p.1">OF0 uses the following variables: </p>

<dl>
<dt>step_of_rank (unsigned integer):</dt>
<dd style="margin-left: 8">an intermediate computation based on the link properties with a certain neighbor.</dd>
<dt>rank_increase (unsigned integer):</dt>
<dd style="margin-left: 8">delta between the Rank of the preferred parent and self </dd>
</dl>
<h1 id="rfc.section.6.2">
<a href="#rfc.section.6.2">6.2.</a> <a href="#parms" id="parms">Configurable Parameters</a>
</h1>
<p id="rfc.section.6.2.p.1">OF0 can use the following optional configurable values that are used as parameters to the rank_increase computation: </p>

<dl>
<dt>stretch_of_rank (unsigned integer):</dt>
<dd style="margin-left: 8">the maximum augmentation to the step-of-rank of a preferred parent to allow the selection of an additional feasible successor. If none is configured to the device, then the step_of_rank is not stretched.</dd>
<dt>rank_factor (unsigned integer):</dt>
<dd style="margin-left: 8">A configurable factor that is used to multiply the effect of the link properties in the rank_increase computation.  If none is configured, then a rank_factor of 1 is used.</dd>
</dl>

<p> </p>
<h1 id="rfc.section.6.3">
<a href="#rfc.section.6.3">6.3.</a> <a href="#consts" id="consts">Constants</a>
</h1>
<p id="rfc.section.6.3.p.1">Section 17 of <a href="#I-D.ietf-roll-rpl">[I-D.ietf-roll-rpl]</a> defines RPL constants.  OF0 fixes the values of the following constants: </p>

<dl>
<dt>DEFAULT_STEP_OF_RANK:</dt>
<dd style="margin-left: 8">3</dd>
<dt>MINIMUM_STEP_OF_RANK:</dt>
<dd style="margin-left: 8">1</dd>
<dt>MAXIMUM_STEP_OF_RANK:</dt>
<dd style="margin-left: 8">9</dd>
<dt>DEFAULT_RANK_STRETCH:</dt>
<dd style="margin-left: 8">0</dd>
<dt>MAXIMUM_RANK_STRETCH:</dt>
<dd style="margin-left: 8">5</dd>
<dt>DEFAULT_RANK_FACTOR:</dt>
<dd style="margin-left: 8">1</dd>
<dt>MINIMUM_RANK_FACTOR:</dt>
<dd style="margin-left: 8">1</dd>
<dt>MAXIMUM_RANK_FACTOR:</dt>
<dd style="margin-left: 8">4</dd>
</dl>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#mgt" id="mgt">Manageability Considerations</a>
</h1>
<p id="rfc.section.7.p.1">Section 18 of <a href="#I-D.ietf-roll-rpl">[I-D.ietf-roll-rpl]</a> depicts the management of the protocol.  This specification inherits from that section and its subsections, with the exception that metrics as specified in <a href="#I-D.ietf-roll-routing-metrics">[I-D.ietf-roll-routing-metrics]</a> are not used and do not require management.  </p>
<h1 id="rfc.section.7.1">
<a href="#rfc.section.7.1">7.1.</a> <a href="#mgtp" id="mgtp">Device Configuration</a>
</h1>
<p id="rfc.section.7.1.p.1">An implementation SHOULD allow to configure at least a global rank_factor that applies to all links. Additionally, the implementation may allow to group interfaces, links and/or neighbors and configure a more specific rank_factor to such groups.  </p>
<p id="rfc.section.7.1.p.2">An implementation MAY allow to configure a maximum stretch_of_rank as discussed in <a href="#comprank">Section 4.1</a>. If none is configured, a value of 0 is assumed and the step_of_rank is not stretched.  </p>
<p id="rfc.section.7.1.p.3">An OF0 implementation SHOULD support the DODAG Configuration option as specified in section 6.7.6 of <a href="#I-D.ietf-roll-rpl">[I-D.ietf-roll-rpl]</a> and apply the parameters contained therein.  When the option is used, the parameters are configured to the nodes that may become DODAG roots, and the nodes are configured to redistribute the information using the DODAG Configuration option.  In particular, the value of MinHopRankIncrease can be distributed with that option and override the fixed constant of DEFAULT_MIN_HOP_RANK_INCREASE that is defined section 17 of <a href="#I-D.ietf-roll-rpl">[I-D.ietf-roll-rpl]</a> with a fixed value of 256.  </p>
<p id="rfc.section.7.1.p.4">At build-time, the default constant values should be used, that is: </p>

<ul class="empty">
<li>the rank_factor is set to the fixed constant DEFAULT_RANK_FACTOR (<a href="#consts">Section 6.3</a>).  </li>
<li>the maximum stretch_of_rank is set to the fixed constant DEFAULT_RANK_STRETCH (<a href="#consts">Section 6.3</a>).  </li>
<li>the MinHopRankIncrease is set to the fixed constant DEFAULT_MIN_HOP_RANK_INCREASE (<a href="#I-D.ietf-roll-rpl">[I-D.ietf-roll-rpl]</a>).  </li>
</ul>

<p> The values can be overridden at anytime and apply at the next Version of the DODAG.  </p>
<h1 id="rfc.section.7.2">
<a href="#rfc.section.7.2">7.2.</a> <a href="#mgtm" id="mgtm">Device Monitoring</a>
</h1>
<p id="rfc.section.7.2.p.1">As discussed in <a href="#API">Section 5</a>, the OF support must be able to provide information about its operations, and trigger events when tthat information changes.  At a minimum, the information should include: </p>

<ul class="empty">
<li>DAG information as specified in Section 6.3.1 of <a href="#I-D.ietf-roll-rpl">[I-D.ietf-roll-rpl]</a>, and including the DODAGID, the RPLInstanceID, the Mode of Operation, the Rank of this node, the current Version Number, and the value of the Grounded flag. </li>
<li>A list of neighbors indicating the preferred parent and an alternate feasible if available.  For each neighbor, the Rank, he current Version Number, and the value of the Grounded flag should be indicated</li>
</ul>

<p> </p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#IANA" id="IANA">IANA Considerations</a>
</h1>
<p id="rfc.section.8.p.1">This specification requires the assignment of an Objective Code Point (OCP) for OF0 in the Objective Code Point Registry that is requested in section 20.5. of <a href="#I-D.ietf-roll-rpl">[I-D.ietf-roll-rpl]</a>.  </p>

<dl>
<dt>OCP code:</dt>
<dd style="margin-left: 6">The value of 0 is suggested.  </dd>
<dt>Description:</dt>
<dd style="margin-left: 6">A basic Objective Function that relies only on the objects that are defined in <a href="#I-D.ietf-roll-rpl">[I-D.ietf-roll-rpl]</a>.  </dd>
<dt>Defining RFC:</dt>
<dd style="margin-left: 6">This.  </dd>
</dl>

<p> </p>
<h1 id="rfc.section.9">
<a href="#rfc.section.9">9.</a> <a href="#Sec" id="Sec">Security Considerations</a>
</h1>
<p id="rfc.section.9.p.1">This specification makes simple extensions to RPL and so is vulnerable to and benefits from the security issues and mechanisms described in <a href="#I-D.ietf-roll-rpl">[I-D.ietf-roll-rpl]</a> and <a href="#I-D.ietf-roll-rpl">[I-D.ietf-roll-rpl]</a>.  This document does not introduce new flows or new messages, thus requires no specific mitigation for new threats.	</p>
<p id="rfc.section.9.p.2">OF0 depends on information exchanged in the Rank and OCP protocol elements. If those elements were compromised, then an implementation of OF0 might generate the wrong path for a packet resulting in it being misrouted. Therefore, deployments are RECOMMENDED to use RPL security mechanisms if there is a risk that routing information might be modified or spoofed.	</p>
<h1 id="rfc.section.10">
<a href="#rfc.section.10">10.</a> <a href="#Acknowledgements" id="Acknowledgements">Acknowledgements</a>
</h1>
<p id="rfc.section.10.p.1">Most specific thanks to Philip Levis and Phoebus Chen for their help in finalizing this document.</p>
<p id="rfc.section.10.p.2">Many thanks also to Adrian Farrel, Tim Winter, JP Vasseur, Julien Abeille, Mathilde Durvy, Teco Boot, Navneet Agarwal, Meral Shirazipour and Henning Rogge for in-depth review and first hand implementers' feedback.</p>
<h1 id="rfc.references">
<a href="#rfc.references">11.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">11.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-roll-rpl">[I-D.ietf-roll-rpl]</b></td>
<td class="top">
<a>Winter, T</a>, <a>Thubert, P</a>, <a>Brandt, A</a>, <a>Clausen, T</a>, <a>Hui, J</a>, <a>Kelsey, R</a>, <a>Levis, P</a>, <a>Pister, K</a>, <a>Struik, R</a> and <a>J Vasseur</a>, "<a href="http://tools.ietf.org/html/draft-ietf-roll-rpl-19">RPL: IPv6 Routing Protocol for Low power and Lossy Networks</a>", Internet-Draft draft-ietf-roll-rpl-19, March 2011.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">11.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="I-D.ietf-roll-terminology">[I-D.ietf-roll-terminology]</b></td>
<td class="top">
<a>Vasseur, J</a>, "<a href="http://tools.ietf.org/html/draft-ietf-roll-terminology-06">Terminology in Low power And Lossy Networks</a>", Internet-Draft draft-ietf-roll-terminology-06, September 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-roll-security-framework">[I-D.ietf-roll-security-framework]</b></td>
<td class="top">
<a>Tsao, T</a>, <a>Alexander, R</a>, <a>Dohler, M</a>, <a>Daza, V</a> and <a>A Lozano</a>, "<a href="http://tools.ietf.org/html/draft-ietf-roll-security-framework-06">A Security Framework for Routing over Low Power and Lossy Networks</a>", Internet-Draft draft-ietf-roll-security-framework-06, June 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-roll-routing-metrics">[I-D.ietf-roll-routing-metrics]</b></td>
<td class="top">
<a>Vasseur, J</a>, <a>Kim, M</a>, <a>Pister, K</a>, <a>Dejean, N</a> and <a>D Barthel</a>, "<a href="http://tools.ietf.org/html/draft-ietf-roll-routing-metrics-19">Routing Metrics used for Path Calculation in Low Power and Lossy Networks</a>", Internet-Draft draft-ietf-roll-routing-metrics-19, March 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-roll-minrank-hysteresis-of">[I-D.ietf-roll-minrank-hysteresis-of]</b></td>
<td class="top">
<a>Gnawali, O</a> and <a>P Levis</a>, "<a href="http://tools.ietf.org/html/draft-ietf-roll-minrank-hysteresis-of-04">The Minimum Rank Objective Function with Hysteresis</a>", Internet-Draft draft-ietf-roll-minrank-hysteresis-of-04, May 2011.</td>
</tr>
<tr>
<td class="reference"><b id="DeCouto03">[DeCouto03]</b></td>
<td class="top">
<a>De Couto, </a>, <a>Aguayo, </a>, <a>Bicket, </a> and <a> Morris</a>, "<a>A High-Throughput Path Metric for Multi-Hop Wireless Routing </a>", MobiCom '03 The 9th ACM International Conference on Mobile         Computing and Networking, San Diego, California,, 2003.</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Author's Address</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Pascal Thubert</span> editor
	  <span class="n hidden">
		<span class="family-name">Thubert</span>
	  </span>
	</span>
	<span class="org vcardline">Cisco Systems</span>
	<span class="adr">
	  <span>Village d'Entreprises Green Side</span>
<span>400, Avenue de Roumanille</span>
<span>Batiment T3</span>

	  <span class="vcardline">
		<span class="locality">Biot - Sophia Antipolis</span>,  
		<span class="region"></span>
		<span class="code">06410</span>
	  </span>
	  <span class="country-name vcardline">FRANCE</span>
	</span>
	<span class="vcardline">Phone: +33 497 23 26 34</span>

<span class="vcardline">EMail: <a href="mailto:pthubert@cisco.com">pthubert@cisco.com</a></span>

  </address>
</div>

</body>
</html>