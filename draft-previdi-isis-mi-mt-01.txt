
 
INTERNET DRAFT   IS-IS Multi-instance Multi-topology         Jun 2006 
 
 
 
Network Working Group                                        S. Previdi 
Internet Draft                                              L. Ginsberg 
Expiration Date: Dec 2006                                      M. Shand 
                                                                 A. Roy 
                                                                D. Ward 
                                                          Cisco Systems 
                                                              June 2006 
                                                                        
                                                                        
 
                  IS-IS Multi-instance Multi-topology 
                    draft-previdi-isis-mi-mt-01.txt 
 
 
Status of this Memo 
    

   By submitting this Internet-Draft, each author represents that any 
   applicable patent or other IPR claims of which he or she is aware 
   have been or will be disclosed, and any of which he or she becomes 
   aware will be disclosed, in accordance with Section 6 of BCP 79. 

   Internet-Drafts are working documents of the Internet Engineering 
   Task Force (IETF), its areas, and its working groups. Note that 
   other groups may also distribute working documents as Internet-   
   Drafts. 

   Internet-Drafts are draft documents valid for a maximum of six 
   months and may be updated, replaced, or obsoleted by other documents 
   at any time. It is inappropriate to use Internet-Drafts as reference 
   material or to cite them other than as "work in progress." 

   The list of current Internet-Drafts can be accessed at 
   http://www.ietf.org/1id-abstracts.html 

   The list of Internet-Draft Shadow Directories can be accessed at 
   http://www.ietf.org/shadow.html 

     

Abstract 
    

   This draft describes a mechanism that allows a single router to   
   share one or more links among multiple IS-IS routing protocol 
   instances. 

   Multiple instances allow the deployment of multiple address-families 
   as well as multiple instances of the same address-family and it is 
 
  
Previdi                    Expires Dec 2006                   [Page 1] 
 
 
INTERNET DRAFT   IS-IS Multi-instance Multi-topology         Jun 2006 
 
 
   an alternative to Multi-Topology IS-IS. Routers will form instance 
   specific adjacencies, exchange instance specific routing updates and 
   compute paths utilizing instance specific LSDB information. Each PDU 
   will contain a new TLV identifying the instance to which the PDU 
   belongs. This allows a network operator to deploy multiple IS-IS 
   topologies in parallel, using the same set of links when required 
   and still have the capability of computing topology specific paths. 
   This draft does not address the forwarding paradigm that needs to be 
   used in order to ensure data PDUs are forwarded according to the 
   topology to which they belong. 

    

Table of Contents 
    

   1. Conventions used in this document..............................2 
   2. Introduction...................................................2 
   3. Proposed Solution..............................................3 
    3.1 Instance Identifier..........................................3 
    3.2 Instance Membership..........................................3 
    3.3 Adjacency Establishment......................................4 
     3.3.1 Point-to-Point Adjacencies................................4 
     3.3.2 Multi-Access Adjacencies..................................4 
    3.4 Interoperability Considerations..............................4 
     3.4.1 MI-ISIS Layer 2 multicast address.........................5 
     3.4.2 Interoperability using p2p networks.......................5 
     3.4.3 Interoperability using Broadcast networks.................5 
   4. Security Considerations........................................6 
   5. IANA Considerations............................................6 
   6. Normative References...........................................6 
   7. Acknowledgments................................................6 
   8. Authors' Addresses.............................................7 
   9. Full Copyright Statement.......................................7 
    
1.    Conventions used in this document 

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", 
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this 
   document are to be interpreted as described in RFC-2119 [BCP14]. 

2.    Introduction 

   "[MT-IS-IS] defines extensions to IS-IS which support multiple 
   topologies through the use of additional TLVs in IIH/LSP PDUs. [MT-
   IS-IS] specifies that a single adjacency, single flooding scheme, 
   and single LSDB are to be shared across all topologies to which a 
 
 
Previdi                    Expires Dec 2006                   [Page 2] 
 
 
INTERNET DRAFT   IS-IS Multi-instance Multi-topology         Jun 2006 
 
 
   router belongs. This draft describes an alternative approach where 
   multiple topologies are supported by the use of multiple independent 
   instances of the IS-IS protocol. Routers which support this 
   extension are referred to as "multi-instance capable routers" (MI-
   RTR).  

3.    Proposed Solution 

   The solution is based on a new TLV called the Instance Identifier 
   (IID) that is used to mark each IS-IS PDU originated by the router. 
   Routers form adjacencies and exchange routing updates only if their 
   IIDs correspond. Each topology is therefore processed within a 
   separate instance of the IS-IS protocol. 

   This also implies an instance specific flooding scheme, instance 
   specific LSDBs and instance specific routing calculations. It MAY 
   also imply instance specific routing and forwarding tables. However, 
   this aspect is outside the scope of this specification. When 
   multiple instances share the same link each instance will have a 
   separate set of adjacencies. Each IS-IS PDU is associated with only 
   one IS-IS instance. 

   How multiple instances are implemented is outside the scope of this 
   specification. 

3.1     Instance Identifier 

   A new TLV is defined in order to convey an instance identifier 
   (IID). The purpose of the IID is to mark each IS-IS instance running 
   on a router with a unique 16-bit number. The IID TLV is carried in 
   all IS-IS PDUs (IIH, SNP, LSP) originated by the router. Multiple 
   instances of IS-IS may co-exist on the same network and on the same 
   physical router. IIDs MUST be unique within the same routing domain. 

   Instance identifier #0 is reserved for the standard topology 
   supported by legacy systems. 

   The following format is used for the IID: 

         Type   TBA by IANA 
         Length 2 
         Value  <16-bit number IID> 

3.2     Instance Membership 

   Each router is configured to be participating in one or more 
   instances of IS-IS. For each instance in which it participates, a 
   router labels all IS-IS PDUs (IIH, LSP or SNP) generated pertaining 
   to that instance by including the appropriate IID TLV. Note that 
   this applies for the standard topology (instance identifier #0). A 
 
 
Previdi                    Expires Dec 2006                   [Page 3] 
 
 
INTERNET DRAFT   IS-IS Multi-instance Multi-topology         Jun 2006 
 
 
   PDU can only be labeled with a single instance identifier. PDUs with 
   multiple IID TLVs MUST be ignored. 

3.3     Adjacency Establishment 

   In order to establish adjacencies, IS-IS routers exchange IIH PDUs. 
   Two types of adjacencies exist in IS-IS: point-to-point and 
   broadcast. The following sub-sections describe the additional rules 
   an MI-RTR MUST follow when establishing adjacencies. 

3.3.1       Point-to-Point Adjacencies 

   A new IID TLV is inserted into the p2p hello PDUs originated by an 
   MI-RTR. Upon reception of an IIH, an MI-RTR inspects the received 
   IID TLV and if it matches any of the IIDs configured on that link, 
   normal adjacency establishment procedures are used to establish an 
   instance specific adjacency. 

   This extension allows an MI-RTR to establish multiple adjacencies to 
   the same physical neighbor over a p2p link. This differs from the 
   normal behavior on p2p links where only one adjacency is formed. 
   However, in this case IS-IS instances are "ships-in-the-night" and 
   from a logical perspective only one adjacency per instance is formed 
   on p2p links. 

3.3.2       Multi-Access Adjacencies 

   Multi-Access (broadcast) networks behave differently than p2p in 
   that PDUs sent by one router are visible to all routers and all 
   routers must agree on the election of a DIS. 

   MI-RTRs will establish adjacencies and elect a DIS per IS-IS 
   instance. Upon reception of an IIH each MI-RTR will form adjacencies 
   only with routers advertising the same IID in their IIH PDUs. Since 
   an MI-RTR is not required to participate in all IIDs on a LAN, it's 
   possible to elect a different DIS for different instances. 

3.4     Interoperability Considerations 

   It is assumed that any TLV that is not understood is silently 
   ignored without compromising the processing of the whole IS-IS PDU 
   (IIH, LSP, SNP). 

   To a router not implementing this extension, all IS-IS PDUs received 
   will appear to be associated with the standard topology regardless 
   of any IID TLVs which may be contained in those PDUs. This can cause 
   interoperability issues unless the mechanisms and procedures 
   discussed below are followed. 


 
 
Previdi                    Expires Dec 2006                   [Page 4] 
 
 
INTERNET DRAFT   IS-IS Multi-instance Multi-topology         Jun 2006 
 
 
3.4.1       MI-ISIS Layer 2 multicast address 

   In order for routers to correctly interoperate with routers not 
   implementing this extension and in order not to cause disruption, a 
   specific and dedicated MAC address is used for multicasting IS-IS 
   PDUs labeled with any non-zero IID among MI-RTRs. Each level will 
   use a specific layer 2 multicast address. Such an address allows MI-
   RTRs to exchange IS-IS PDUs with non-zero IIDs without these PDUs 
   being processed by legacy routers and therefore no disruption is 
   caused. 

   An MI-RTR will exchange ISIS PDUs intended for IID #0 using AllL1IS 
   and AllL2IS ISIS mac layer addresses (as defined in [IS-IS]) and 
   will use two new (TBD) dedicated layer 2 multicast addresses (one 
   for each level) when sending IS-IS PDUs for any non-zero IID. 

   MI-RTRs MUST discard IS-IS PDUs received if either of the following 
   is true: 

      . The destination multicast address is AllL1IS or AllL2IS and the 
        PDU contains an IID TLV with non-zero value. 

      . The destination multicast address is one of the two new 
        addresses and the PDU contains an IID TLV with a zero value or 
        has no IID TLV.  

3.4.2       Interoperability using p2p networks 

   In order for an instance on an MI-RTR which participates in the 
   standard topology (IID #0) to interoperate over a p2p link with a 
   router which does NOT support this extension, the MI-RTR MUST NOT 
   send IS-IS PDUs for instances other than IID #0 over the p2p link as 
   these PDUs may affect the state of IID #0 in the neighbor. 

   The presence/absence of the IID TLV in an IIH indicates that the 
   neighbor does/does not support this extension. Once it is determined 
   that the neighbor does not support this extension, an MI-RTR MUST 
   NOT send PDUs (including IIHs) for instances other than IID #0. 

3.4.3       Interoperability using Broadcast networks 

   If the multicast addresses AllL1IS and/or AllL2IS are improperly 
   used to send IS-IS PDUs for non-zero IIDs, legacy systems will 
   interpret these PDUs as being associated with IID #0. This will 
   cause inconsistencies in the LSDB in those routers, may incorrectly 
   maintain adjacencies, and may lead to inconsistent DIS election. 




 
 
Previdi                    Expires Dec 2006                   [Page 5] 
 
 
INTERNET DRAFT   IS-IS Multi-instance Multi-topology         Jun 2006 
 
 
4.    Security Considerations 

   Security concerns for IS-IS are addressed in the IS-IS specification 
   [IS-IS], and accompanying specifications on [HMAC-MD5]. No 
   additional considerations need to be made for the extension. 

5.    IANA Considerations 

   This document requires the definition a new ISIS TLV that needs to 
   be reflected in the ISIS TLV code-point registry: 

    Type        Description                            IIH   LSP   SNP 
    ----        -----------------------------------    ---   ---   --- 
    TBA         MI-MT IID                               y     y     y 
    

6.    Normative References 

   [IS-IS] ISO, "Intermediate system to Intermediate system routeing 
     information exchange protocol for use in conjunction with the 
     Protocol for providing the Connectionless-mode Network Service 
     (ISO 8473)," ISO/IEC 10589:2002, Second Edition.  

   [MT-IS-IS] Pryzgienda, T., Shen, N., and Sheth, N., "Multi 
     Topology (MT) Routing in IS-IS", draft-ietf-isis-wg-multi-
     topology-11.txt (work in progress), October 2005.  

   [HMAC-MD5] Li, T. and R. Atkinson, "Intermediate System to 
     Intermediate System (IS-IS) Cryptographic Authentication", RFC 
     3567, July 2003. 

   [BCP9] Bradner, S., "The Internet Standards Process -- Revision 
     3", BCP 9, RFC 2026, October 1996.  

   [BCP14] Bradner, S., "Key words for use in RFCs to Indicate 
     Requirement Levels", BCP 14, RFC 2119, March 1997  

   [BCP26] Narten, T. and Alvestrand, H., "Guidelines for Writing an 
     IANA Considerations Section in RFCs", BCP 26 , RFC 2434, October 
     1998 

   [BCP79] Bradner, S. Ed., "Intellectual Property Rights in IETF 
     Technology ", BCP 79 , RFC 3979, March 2005 

7.    Acknowledgments 

   The authors would like to acknowledge contributions made by Dino 
   Farinacci. 

 
 
Previdi                    Expires Dec 2006                   [Page 6] 
 
 
INTERNET DRAFT   IS-IS Multi-instance Multi-topology         Jun 2006 
 
 
8.    Authors' Addresses 

   Stefano Previdi 
   CISCO Systems, Inc.  
   Via Del Serafico 200  
   00142 - Roma  
   ITALY  
   Email: sprevidi@cisco.com   
        
   Les Ginsberg 
   Cisco Systems 
   510 McCarthy Blvd. 
   Milpitas, Ca. 95035 USA 
   Email: ginsberg@cisco.com 
     
   Abhay Roy 
   Cisco Systems 
   170 W. Tasman Dr. 
   San Jose, CA 95134 USA 
   akr@cisco.com    
    
   Mike Shand   
   Cisco Systems   
   250 Longwater Avenue,   
   Reading,   
   Berkshire,   
   RG2 6GB   
   UK  
   Email: mshand@cisco.com    
    
   Dave Ward 
   Cisco Systems 
   170 W. Tasman Dr. 
   San Jose, CA 95134 USA 
   dward@cisco.com 
    
9.    Full Copyright Statement 

   Copyright (C) The Internet Society (2006). 

   This document is subject to the rights, licenses and restrictions 
   contained in BCP 78, and except as set forth therein, the authors 
   retain all their rights. 
    
   This document and the information contained herein are provided on 
   an "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE 
   REPRESENTS OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE 
   INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR 
   IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF 

 
 
Previdi                    Expires Dec 2006                   [Page 7] 
 
 
INTERNET DRAFT   IS-IS Multi-instance Multi-topology         Jun 2006 
 
 
   THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED 
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. 

   This document and translations of it may be copied and furnished to 
   others, and derivative works that comment on or otherwise explain it 
   or assist in its implementation may be prepared, copied, published 
   and distributed, in whole or in part, without restriction of any 
   kind, provided that the above copyright notice and this paragraph 
   are included on all such copies and derivative works.  However, this 
   document itself may not be modified in any way, such as by removing 
   the copyright notice or references to the Internet Society or other 
   Internet organizations, except as needed for the purpose of 
   developing Internet standards in which case the procedures for 
   copyrights defined in the Internet Standards process must be 
   followed, or as required to translate it into languages other than 
   English. 

   The limited permissions granted above are perpetual and will not be 
   revoked by the Internet Society or its successors or assigns. 

   The IETF takes no position regarding the validity or scope of any 
   Intellectual Property Rights or other rights that might be claimed 
   to pertain to the implementation or use of the technology described 
   in this document or the extent to which any license under such 
   rights might or might not be available; nor does it represent that 
   it has made any independent effort to identify any such rights. 
   Information on the procedures with respect to rights in RFC 
   documents can be found in BCP 78 and BCP 79. 

    

   Copies of IPR disclosures made to the IETF Secretariat and any 
   assurances of licenses to be made available, or the result of an 
   attempt made to obtain a general license or permission for the use 
   of such proprietary rights by implementers or users of this 
   specification can be obtained from the IETF on-line IPR repository 
   at http://www.ietf.org/ipr. 

   The IETF invites any interested party to bring to its attention any 
   copyrights, patents or patent applications, or other proprietary 
   rights that may cover technology that may be required to implement 
   this standard.  Please address the information to the IETF at ietf-
   ipr@ietf.org. 

    





 
 
Previdi                    Expires Dec 2006                   [Page 8] 
 