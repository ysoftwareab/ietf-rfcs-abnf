<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Flow mobility support in PMIPv6</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Flow mobility support in PMIPv6">
<meta name="keywords" content="Internet Draft">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">T. Tran</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Y. Hong</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">ETRI</td></tr>
<tr><td class="header">Expires: April 28, 2011</td><td class="header">Y. Han</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">KUT</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">October 25, 2010</td></tr>
</table></td></tr></table>
<h1><br />Flow mobility support in PMIPv6<br />draft-trung-netext-flow-mobility-support-01</h1>

<h3>Abstract</h3>

<p>
	  To support flow mobility in PMIPv6, the Mobile Node's Home Network Prefix should be able to be shared across its attachments and the network should support flow-based routing.  This document specifies how to extend PMIPv6 to meet these requirements.  
	  
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on April 28, 2011.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#anchor2">2.</a>&nbsp;
PMIPv6 Extensions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">2.1.</a>&nbsp;
Shared-Prefix Model Support<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">2.1.1.</a>&nbsp;
Proactive Signaling<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">2.1.2.</a>&nbsp;
Re-active Signaling<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">2.2.</a>&nbsp;
Flow-Based Routing Support<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">2.2.1.</a>&nbsp;
Multiple Care-of Address Registration<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">2.2.2.</a>&nbsp;
Flow Binding Cache Entry List<br />
<a href="#anchor9">3.</a>&nbsp;
Protocol Operations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">3.1.</a>&nbsp;
Local Mobility Anchor Operation<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">3.1.1.</a>&nbsp;
Sending Home Network Prefix Update Request Message<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">3.1.2.</a>&nbsp;
Receiving Home Network Prefix Update Acknowledgement Message<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">3.1.3.</a>&nbsp;
Moving a Flow<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">3.2.</a>&nbsp;
Mobile Access Gateway Operation<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">3.2.1.</a>&nbsp;
Receiving Home Network Prefix Update Request Message <br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor16">3.2.2.</a>&nbsp;
Sending Home Network Prefix Update Acknowledgement Message <br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor17">3.3.</a>&nbsp;
Mobile Node Operation<br />
<a href="#anchor18">4.</a>&nbsp;
Messages format<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor19">4.1.</a>&nbsp;
Home Network Prefix Update Request (HUR)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor20">4.2.</a>&nbsp;
Home Network Prefix Update Acknowledgement Message (HUA)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor21">4.3.</a>&nbsp;
Proxy Binding Update extensions<br />
<a href="#Security">5.</a>&nbsp;
Security Considerations<br />
<a href="#IANA">6.</a>&nbsp;
IANA Considerations<br />
<a href="#rfc.references1">7.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">7.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">7.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
The Proxy Mobile IPv6 (PMIPv6) <a class='info' href='#RFC5213'>[1]<span> (</span><span class='info'>Gundavelli, S., Leung, K., Devarapalli, V., Chowdhury, K., and B. Patil, &ldquo;Proxy Mobile IPv6,&rdquo; August&nbsp;2008.</span><span>)</span></a> allows mobile nodes to connect to the network through multiple interfaces for simultaneous access. The Mobile Node (MN) can send simultaneously packets to the PMIPv6 domain over multiple interfaces. However it cannot performs flow mobility due to some limitations as follows:
		
</p>
<p></p>
<ul class="text">
<li>The PMIPv6 can only support IP mobility: In PMIPv6, when the mobile node performs handover from a network to another, all of the IP flows are moved to the new network. However, the flow mobility requires to support moving just some of the selected flows to the new network, while the other flows are kept transmitting on the old one.
</li>
<li>The PMIPv6 can only support Per-MN-Prefix model: Basically, a home network prefix (HNP) can only be assigned to a single interface at one time. However in a real system, multiple flows can be associated with a HNP. When the flow mobility occurs, some of these flows are moved to a new interface, while the other flows are kept transmitting via the old interface. To keep the sessions continuing the HNP should be preserved during the movement of the flows. It means that the HNP should be able to be assigned simultaneously to multiple interfaces.
		   
</li>
<li>The PMIPv6 does not support flow-based routing: Normally, the network can only route a packet at IP-based level. However to route packet at flow-based level, it should be able to classify the packets at flow level and then apply the same policy to the packets that has the same flow information.
		   
</li>
</ul><p> 
</p>
<p>
To support flow mobility in PMIPv6, we first utilize the advantage of the logical interface at the MN to hide the changing at physical interfaces from the IP layer and then extend the operations of PMIPv6 to allow the HNP to be able to be shared across interfaces as well as to support flow-based routing functions.

</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
PMIPv6 Extensions</h3>

<p>This section introduces the necessary extensions of the PMIPv6 to support flow mobility.
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Shared-Prefix Model Support</h3>

<p>The first requirement for supporting flow mobility is that the PMIPv6 should be extended to support shared-prefix model. Since multiple flows can share the same HNP and each flow can be forwarded to different attachment, the HNP should be shared across attachments. This specification recommends the implementations to extend PMIPv6 in two ways, proactive and reactive signaling approach.
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1.1"></a><h3>2.1.1.&nbsp;
Proactive Signaling</h3>

<p> With the proactive signaling approach, an HNP is shared across attachments immediately when it is assigned to the MN.
</p>
<p> When the Local Mobility Anchor (LMA) assigns a new HNP to the MN, it will immediately signal this HNP to all of the Mobile Access Gateways (MAG) that the MN attaches to. By doing this, the HNPs assigned to the MN are always shared across its attachments in advance. Therefore the LMA can move flows from an attachment to another in a free manner without any extra signaling messages. 
</p><br /><hr class="insert" />
<a name="call_pro"></a>

<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

    +--+              +----+              +----+              +---+
    |MN|              |MAG1|              |MAG2|              |LMA|
    +--+              +----+              +----+              +---+
     |                   |                  |                   |
    IF1&lt;--Rtr Adv(HNP1)--|                  |                   |
     |                   |                  |                   |
IF1(HNP1)&lt;--- Flow 1 ---&gt;|&lt;-------------- Flow 1 --------------&gt;|
     |                   |                  |                   |
MN Attached              |                  |                   |
   Via IF2               |                  |                   |
     |                   |                  |                   |
     |--- Rtr Sol -------------------------&gt;|                   |
     |                   |                  |                   |
     |                   |                  |---- PBU (H=1) ---&gt;|
     |                   |                  |                   |
     |                   |                  |&lt;--PBA(HNP1,HNP2)--|
     |                   |                  |                   |
     |                   |                  |== Bi-Dir Tunnel ==|
     |                   |                  |                   |
     IF2 &lt;--------Rtr Adv (HNP1,HNP2)-------|
     |                   |                  |                   |
     |                   |&lt;----------- HUR (HNP2) --------------|
     |                   |                  |                   |
     |              Accept HUR              |                   |
     |       Set Up Tunnel and Routing      |                   |
     |                   |                  |                   |
     |                   |------- HUA -------------------------&gt;|
     |                   |                  |                   |
     |                   |                  |               Accept HUA
     |                   |                  |            Update BCE and
     |                   |                  |             Setup Tunnel
     |                   |                  |                   |
     |                   |=========== Bi-Dir Tunnel ============|
     |                   |                  |                   |
    IF1&lt;-Rtr Adv(HNP1,2)-|                  |            Decide to Move
     |                   |                  |            flow 1 to MAG2
     |                   |                  |                   |
     |                   |                  |              Update Flow
     |                   |                  |             binding table
     |                   |                  |                   |
   IF2&lt;-------------- Flow 1 --------------&gt;|&lt;----- Flow 1 ----&gt;|
(HNP1,HNP2)              |                  |                   |
     |                   |                  |                   |



</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: Call flow for proactive signaling approach&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p><a class='info' href='#call_pro'>Figure&nbsp;1<span> (</span><span class='info'>Call flow for proactive signaling approach</span><span>)</span></a> shows signaling call flow the of proactive signaling approach. First, the MN attaches to the MAG1 using the physical interface IF1. The network assigns HNP1 to the IF1. Next, the MN performs new attachment via the physical interface IF2. The MAG sends a Proxy Binding Update (PBU) message with HI=1 to inform the LMA. If the LMA recognizes that the MN can support flow mobility, it will assign both new HNP2 and the old HNP1 to the new attachment. Upon accepting this PBU message, the LMA sends a Proxy Binding Acknowledgement (PBA) message including both of the HNP1 and HNP2 to the MAG2. It also signals MAG1 to update with the new HNP2 by sending an Home Network Prefix Update Request (HUR) to the MAG1. On receiving the HUR message, the MAG1 setups tunnel and routing path for the HNP2 and sends back an Home Network Prefix Update Acknowledgement Message (HUA) to inform the LMA that it is ready for forwarding the packets of the HNP2.
</p>
<p>After the above steps, both MAG1 and MAG2 can forward the packets of both HNP1 and HNP2. Therefore the LMA can move flows between two attachments freely without any extra signaling messages. For example the LMA can move the flow 1, which uses HNP1, from MAG1 to MAG2 immediately because the MAG2 is already enabled for forwarding the packets of the HNP1.
</p>
<p> With this approach, the implementations need to do two extensions:
		</p>
<ul class="text">
<li>Extend the PBA message to include both the new HNP assigned to new attachment and the HNPs that are already assigned to the existing MN's attachments.
</li>
<li> Extend the MAG and LMA to enable them to exchange HUR and HUA.
</li>
</ul><p>
		
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1.2"></a><h3>2.1.2.&nbsp;
Re-active Signaling</h3>

<p> With the re-active signaling approach, an HNP is shared with another attachment only when a flow is moved to an attachment which the HNP associated to that flow is not valid. 
</p>
<p>When the LMA decides to move a flow and realizes that the HNP used by that flow is not valid on the destination MAG, it will signal the HNP to that MAG.  By doing this, an HNP will be shared on the destination MAG only when the flow associating with it is moved to a destination MAG that it is not valid. 
		
</p><br /><hr class="insert" />
<a name="call_re"></a>

<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

    +--+              +----+              +----+              +---+
    |MN|              |MAG1|              |MAG2|              |LMA|
    +--+              +----+              +----+              +---+
     |                   |                  |                   |
    IF1&lt;--Rtr Adv(HNP1)--|                  |                   |
     |                   |                  |                   |
IF1(HNP1)&lt;--- Flow 1 ---&gt;|&lt;-------------- Flow 1 --------------&gt;|
     |                   |                  |                   |
MN Attached              |                  |                   |
   Via IF2               |                  |                   |
     |                   |                  |                   |
     |--- Rtr Sol -------------------------&gt;|                   |
     |                   |                  |                   |
     |                   |                  |---- PBU (H=1) ---&gt;|
     |                   |                  |                   |
     |                   |                  |&lt;----PBA(HNP2)-----|
     |                   |                  |                   |
     |                   |                  |== Bi-Dir Tunnel ==|
     |                   |                  |                   |
    IF2 &lt;------------Rtr Adv (HNP2)---------|                   |
     |                   |                  |                   |
     |                   |                  |                   |
     |                   |                  |            Decide to Move
     |                   |                  |            flow 1 to MAG2
     |                   |                  |                   |
     |                   |                  |                   |
     |                   |                  |&lt;--- HUR (HNP1) ---|
     |                   |                  |                   |
     |                   |              Accept HUR              |
     |                   |        Set Up Tunnel and Routing     |
     |                   |                  |                   |
     |                   |                  |---- HUA ---------&gt;|
     |                   |                  |                   |
     |                   |                  |               Accept HUA
     |                   |                  |            Update BCE and
     |                   |                  |             Setup Tunnel
     |                   |                  |                   |
     |                   |                  |== Bi-Dir Tunnel ==|
    IF2 &lt;--------Rtr Adv (HNP1,HNP2)--------|                   |
     |                   |                  |              Update Flow
     |                   |                  |             binding table
     |                   |                  |                   |
    IF2&lt;------------- Flow 1 --------------&gt;|&lt;----- Flow 1 ----&gt;|
(HNP1,HNP2)              |                  |                   |
     |                   |                  |                   |
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: Call flow for proactive signaling approach&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p><a class='info' href='#call_re'>Figure&nbsp;2<span> (</span><span class='info'>Call flow for proactive signaling approach</span><span>)</span></a> shows the signaling call flow of re-active signaling approach. First, the MN attaches to the network using 2 interfaces, IF1 and IF2. The network assigns HNP1 to the IF1 and HNP2 to the HNP2. The flow 1 is forwarded by the MAG1 and uses HNP1. When the LMA decides to move flow 1 to the MAG2, it signals MAG2 to update with the HNP1 by sending a HUR message. On receiving the HUR message, the MAG2 setups routing path for the HNP1 and sends back a HUA message to inform the LMA that it is ready for forwarding the packets of HNP1. After receiving HUA from the MAG2, the LMA can update flow binding table to move the flow 2 from MAG1 to MAG2.
</p>
<p>
The key difference between proactive and reactive approach is that in the case of the re-active approach, the HNPs assigned to the MN is not shared across attachments in advance. Each attachment will be assigned with a unique HNP as described in the PMIPv6 standard [1]. The HNP1 is shared on the MAG2 only when the flow 1, which is associated with the HNP1, is moved to the MAG2.
</p>
<p>With the re-active approach, the implementations need only to extend the MAG and LMA to enable them to exchange HUR and HUA when the flow mobility occurs.
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
Flow-Based Routing Support</h3>

<p>
	The second requirement for supporting flow mobility is that the PMIPv6 should be able to bind a particular flow to a Proxy-CoA without affecting other flow using the same HNP. This specification allows the LMA to bind a HNP to multiple Proxy-CoAs (MAGs) and then allows it to bind a particular flow to a Proxy-CoA. When the LMA wants to move a flow, it just changes the binding of the flow to another Proxy-CoA (MAG) as showed in the table <a class='info' href='#FBU-Before'>Table&nbsp;5<span> (</span><span class='info'>The Flow Binding Cache Entry list before the LMA receiving the HUA</span><span>)</span></a> and <a class='info' href='#FBU-After'>Table&nbsp;6<span> (</span><span class='info'>The Flow Binding Cache Entry list after the LMA receiving the HUA</span><span>)</span></a>. To do that the PMIPv6 need to be extended as following:
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.1"></a><h3>2.2.1.&nbsp;
Multiple Care-of Address Registration</h3>

<p>The LMA is extended to allow a mobile node to register multiple proxy care of address (Proxy-CoA), which is the same situation as described in the <a class='info' href='#RFC5648'>[2]<span> (</span><span class='info'>Wakikawa, R., Devarapalli, V., Tsirtsis, G., Ernst, T., and K. Nagami, &ldquo;Multiple Care-of Addresses Registration,&rdquo; October&nbsp;2009.</span><span>)</span></a>. The LMA maintains multiple binding cache entries for a MN. The number of binding cache entries of a MN is equal to the number of the MN’s interfaces attaching to the MAG. 
</p><br /><hr class="insert" />
<a name="BCE"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center">
<tr><th align="center">BID-PRI</th><th align="center">BID</th><th align="center">MN-ID</th><th align="center">ATT</th><th align="center">HNP(s)</th><th align="center">Proxy-CoA</th></tr>
<tr>
<td align="center">20</td>
<td align="center">1</td>
<td align="center">MN1</td>
<td align="center">WiFi</td>
<td align="center">HNP1,HNP2</td>
<td align="center">IP1 (MAG1)</td>
</tr>
<tr>
<td align="center">30</td>
<td align="center">2</td>
<td align="center">MN1</td>
<td align="center">3GPP</td>
<td align="center">HNP1,HNP3</td>
<td align="center">IP2 (MAG2)</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 1: The Binding Cache Entry list&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p><a class='info' href='#BCE'>Table&nbsp;1<span> (</span><span class='info'>The Binding Cache Entry list</span><span>)</span></a> shows two Binding Cache Entries of the MN1 when it attaches to the network using two different access technologies. Both of the two attachments share HNP1 and are bounded to two different Proxy-CoAs.
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.2"></a><h3>2.2.2.&nbsp;
Flow Binding Cache Entry List</h3>

<p>
	Each LMA must maintain a flow binding table as shown in <a class='info' href='#BCE'>Table&nbsp;1<span> (</span><span class='info'>The Binding Cache Entry list</span><span>)</span></a>. This table contains entry for each flow sent from the MN. A flow binding entry includes the following fields:
		
</p>
<p></p>
<ul class="text">
<li>Flow Identifier - Priority (FID-PRI)
</li>
<li>Flow Identifier (FID)
</li>
<li>Traffic Selector (TS)
</li>
<li>Binding Identifier (BID)
</li>
<li>Action
</li>
<li>Active/Idle
</li>
</ul>
<br /><hr class="insert" />
<a name="FBU"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center">
<tr><th align="center">FID-PRI</th><th align="center">FID</th><th align="center">TS</th><th align="center">BIDs</th><th align="center">Action</th><th align="center">AI</th></tr>
<tr>
<td align="center">10</td>
<td align="center">2</td>
<td align="center">TCP</td>
<td align="center">1</td>
<td align="center">Forward</td>
<td align="center">Active</td>
</tr>
<tr>
<td align="center">20</td>
<td align="center">4</td>
<td align="center">UDP</td>
<td align="center">1,2</td>
<td align="center">Forward</td>
<td align="center">Inactive</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 2: The Flow Binding Cache Entry list&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>The BIDs field contains the identifier of the binding cache entry that all of the packets matching the flow information described in the TS field will be forwarded to. When the flow mobility occurs, the BIDs will be updated with new binding cache entry identifier. 
		
</p>
<p>
		Similar to flow binding described in <a class='info' href='#I-D.draft-ietf-mext-flow-binding-09'>[3]<span> (</span><span class='info'>Tsirtsis, G., Soliman , H., Montavont , N., Giaretta , G., and K. Kuladinithi , &ldquo;Flow Bindings in Mobile IPv6 and NEMO Basic Support,&rdquo; August&nbsp;2010.</span><span>)</span></a>, each flow binding entry points to a specific binding cache entry identifier (BID). When the LMA decides to move a flow, it simply updates the pointer of the flow binding entry with the BID of the interface to which the flow will be moved. The traffic selector (TS) in flow binding table is defined as in <a class='info' href='#I-D.draft-ietf-mext-flow-binding-09'>[3]<span> (</span><span class='info'>Tsirtsis, G., Soliman , H., Montavont , N., Giaretta , G., and K. Kuladinithi , &ldquo;Flow Bindings in Mobile IPv6 and NEMO Basic Support,&rdquo; August&nbsp;2010.</span><span>)</span></a>. TS is used to classify the packets of flows basing on specific parameters such as service type, source and destination address … The packets matching with the same TS will be applied with the same forwarding policy.
</p>
<p>
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Protocol Operations</h3>

<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Local Mobility Anchor Operation</h3>

<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.1"></a><h3>3.1.1.&nbsp;
Sending Home Network Prefix Update Request Message</h3>

<p>When a HNP is needed to be shared on a MAG, the LMA will send an HUR message including the HNP to that MAG to request it to setup a tunnel and update the routing path for the HNP. Depending on the way of implementation, proactive or reactive signaling approach, the trigger for sending an HUR message is different. With proactive signaling approach, the HUR will be initiated whenever a new HNP is assigned to the MN. In contrast, with the reactive signaling approach, the HUR will be initiated only when the LMA decides to move a flow and the HNP used by that flow is not valid on the destination MAG.
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.2"></a><h3>3.1.2.&nbsp;
Receiving Home Network Prefix Update Acknowledgement Message</h3>

<p>After sending HUR, the LMA waits for the HUA sent back from MAG. On 	receiving the HUA, the LMA update binding cache to bind the HNP to an extra Proxy-CoA.
				
</p>
<p>
<a class='info' href='#BCE-Before'>Table&nbsp;3<span> (</span><span class='info'>The Binding Cache Entry list before the LMA receiving HUA</span><span>)</span></a> and <a class='info' href='#BCE-After'>Table&nbsp;4<span> (</span><span class='info'>The Binding Cache Entry list after the LMA receiving HUA</span><span>)</span></a> show the Binding Cache Entries of the MN1 before and after the LMA receive HUA message from the MAG2.
				
</p><br /><hr class="insert" />
<a name="BCE-Before"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center">
<tr><th align="center">BID-PRI</th><th align="center">BID</th><th align="center">MN-ID</th><th align="center">ATT</th><th align="center">HNP(s)</th><th align="center">Proxy-CoA</th></tr>
<tr>
<td align="center">20</td>
<td align="center">1</td>
<td align="center">MN1</td>
<td align="center">WiFi</td>
<td align="center">HNP1</td>
<td align="center">IP1</td>
</tr>
<tr>
<td align="center">30</td>
<td align="center">2</td>
<td align="center">MN1</td>
<td align="center">3GPP</td>
<td align="center">HNP2</td>
<td align="center">IP2</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 3: The Binding Cache Entry list before the LMA receiving HUA&nbsp;</b></font><br /></td></tr></table><hr class="insert" />
<br /><hr class="insert" />
<a name="BCE-After"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center">
<tr><th align="center">BID-PRI</th><th align="center">BID</th><th align="center">MN-ID</th><th align="center">ATT</th><th align="center">HNP(s)</th><th align="center">Proxy-CoA</th></tr>
<tr>
<td align="center">20</td>
<td align="center">1</td>
<td align="center">MN1</td>
<td align="center">WiFi</td>
<td align="center">HNP1</td>
<td align="center">IP1</td>
</tr>
<tr>
<td align="center">30</td>
<td align="center">2</td>
<td align="center">MN1</td>
<td align="center">3GPP</td>
<td align="center">HNP1,HNP2</td>
<td align="center">IP2</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 4: The Binding Cache Entry list after the LMA receiving HUA&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>In the <a class='info' href='#BCE-Before'>Table&nbsp;3<span> (</span><span class='info'>The Binding Cache Entry list before the LMA receiving HUA</span><span>)</span></a> the HNP1 is bounded to the IP1 of MAG1 only. After the LMA sends HUR to request the MAG2 update with the HNP1. Then the HNP1 is now also bounded IP2 of the MAG2 as showed in the <a class='info' href='#BCE-After'>Table&nbsp;4<span> (</span><span class='info'>The Binding Cache Entry list after the LMA receiving HUA</span><span>)</span></a>
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.3"></a><h3>3.1.3.&nbsp;
Moving a Flow</h3>

<p>When the LMA decides to move a flow, it first checks whether the HNP used by that flow is valid on the destination MAG or not by checking the existing binding cache entries of the MN. If it is valid, the LMA just updates the flow binding cache entry list with new BID. If it is not valid the LMA sends HUR message to request the destination MAG to update with the HNP used by the flow. After that, if the MAG sends an HUA message to the LMA, the LMA will update the binding cache entry to bind the HNP to new Proxy-CoA and then update the flow binding entry list with the destination BID.
</p>
<p>
<a class='info' href='#FBU-Before'>Table&nbsp;5<span> (</span><span class='info'>The Flow Binding Cache Entry list before the LMA receiving the HUA</span><span>)</span></a> and <a class='info' href='#FBU-After'>Table&nbsp;6<span> (</span><span class='info'>The Flow Binding Cache Entry list after the LMA receiving the HUA</span><span>)</span></a> show the flow binding list entry before and after it is updated. In the <a class='info' href='#FBU-Before'>Table&nbsp;5<span> (</span><span class='info'>The Flow Binding Cache Entry list before the LMA receiving the HUA</span><span>)</span></a>, the flow 1 is associated with the binding cache entry 1. It means that the flow 1 is forwarded via the Proxy-CoA of the MAG1. After that the LMA updates the flow binding list entry with new binding cache entry 2. The flow 1 is now associated with the Proxy-CoA 2 of the MAG2 as shown in the <a class='info' href='#FBU-After'>Table&nbsp;6<span> (</span><span class='info'>The Flow Binding Cache Entry list after the LMA receiving the HUA</span><span>)</span></a>. Thus the flow 1 is successfully moved from MAG1 to MAG2.
				
</p><br /><hr class="insert" />
<a name="FBU-Before"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center">
<tr><th align="center">FID-PRI</th><th align="center">FID</th><th align="center">TS</th><th align="center">BIDs</th><th align="center">Action</th><th align="center">AI</th></tr>
<tr>
<td align="center">10</td>
<td align="center">2</td>
<td align="center">TCP (Flow1)</td>
<td align="center">1</td>
<td align="center">Forward</td>
<td align="center">Active</td>
</tr>
<tr>
<td align="center">20</td>
<td align="center">4</td>
<td align="center">UDP</td>
<td align="center">1,2</td>
<td align="center">Forward</td>
<td align="center">Inactive</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 5: The Flow Binding Cache Entry list before the LMA receiving the HUA&nbsp;</b></font><br /></td></tr></table><hr class="insert" />
<br /><hr class="insert" />
<a name="FBU-After"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="center"><col align="center"><col align="center"><col align="center"><col align="center"><col align="center">
<tr><th align="center">FID-PRI</th><th align="center">FID</th><th align="center">TS</th><th align="center">BIDs</th><th align="center">Action</th><th align="center">AI</th></tr>
<tr>
<td align="center">10</td>
<td align="center">2</td>
<td align="center">TCP (Flow 1)</td>
<td align="center">2</td>
<td align="center">Forward</td>
<td align="center">Active</td>
</tr>
<tr>
<td align="center">20</td>
<td align="center">4</td>
<td align="center">UDP</td>
<td align="center">1,2</td>
<td align="center">Forward</td>
<td align="center">Inactive</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 6: The Flow Binding Cache Entry list after the LMA receiving the HUA&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Mobile Access Gateway Operation</h3>

<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.1"></a><h3>3.2.1.&nbsp;
Receiving Home Network Prefix Update Request Message </h3>

<p>On receiving the HUR message, the MAG sets up its endpoint of the bi-directional tunnel to the LMA and also sets up the routing path for the traffic using HNP included in the HUR.
</p>
<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.2"></a><h3>3.2.2.&nbsp;
Sending Home Network Prefix Update Acknowledgement Message </h3>

<p>After setting up the tunnel and routing path for new HNP successfully, the MAG sends HUA including the HNP to inform the LMA that the flows using HNP can be forwarded via the MAG. 
</p>
<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
Mobile Node Operation</h3>

<p>For simplicity, we assume that the MN uses a single logical interface to hide all of its available physical interfaces. The detail discussion about LGI is provided in <a class='info' href='#I-D.draft-ietf-netext-logical-interface-support-00'>[4]<span> (</span><span class='info'>Melia, T. and S. Gundavelli, &ldquo;Logical Interface Support for multi-mode IP Hosts, draft-ietf-netext-logical-interface-support-00,&rdquo; August&nbsp;2010.</span><span>)</span></a>.
</p>
<p>
On receiving a downlink traffic flow, the MN always selects the same path for sending the uplink traffic flow. For example, if the mobile node attaches to the network using two physical interfaces, IF1 and IF2. If the downlink traffic of the flow 1 is received from the IF1 then the uplink traffic of the flow 1 will also be sent via the IF1. When the flow 1 is moved to attachment of the IF2, then the path for sending uplink traffic of the flow 1 is also changed to the IF2. 

</p>
<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Messages format</h3>

<a name="anchor19"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Home Network Prefix Update Request (HUR)</h3>

<p>The data structure of the HUR is described as following [<a class='info' href='#HUR'>Figure&nbsp;3<span> (</span><span class='info'>The data structure of the HUR</span><span>)</span></a>]:
</p><br /><hr class="insert" />
<a name="HUR"></a>

<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

                                    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                                    |          Sequence #           |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |A|T|          Reserved         |           Lifetime            |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                               |
    .                                                               .
    .                        Mobility options                       .
    .                                                               .
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3: The data structure of the HUR&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p></p>
<ul class="text">
<li>Acknowledge (A): The A bit is set by the LMA to request an HNP update acknowledgement to be returned upon receipt of the HUR
</li>
<li>Message type (T): The T bit is set by LMA to indicate that it is a HNP update request message. 
</li>
<li>The mobility options: The mobility option field is a variable-length field. It contains all new HNPs that are assigned to the new attachment of the MN.

</li>
</ul>

<a name="anchor20"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Home Network Prefix Update Acknowledgement Message (HUA)</h3>

<p>The data structure of the HUA is described as following [<a class='info' href='#HUA'>Figure&nbsp;4<span> (</span><span class='info'>The data structure of the HUA</span><span>)</span></a>]:
</p><br /><hr class="insert" />
<a name="HUA"></a>

<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

                                    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                                    |    Status     |T|  Reserved   |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |           Sequence #          |           Lifetime            |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                               |
    .                                                               .
    .                        Mobility options                       .
    .                                                               .
    |                                                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;4: The data structure of the HUA&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p></p>
<ul class="text">
<li>	Message type (T): The T bit is set by MAG to indicate that it is a HUA.
</li>
<li>The mobility options: The mobility option field is a variable-length field. It contains the HNP that is needed to be shared.

</li>
</ul>

<a name="anchor21"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
Proxy Binding Update extensions</h3>

<p>The data structure of the extended PBU message is described as following [<a class='info' href='#PBU'>Figure&nbsp;5<span> (</span><span class='info'>The data structure of the PBU</span><span>)</span></a>]:
</p><br /><hr class="insert" />
<a name="PBU"></a>

<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

	   0               1               2               3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
                                      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                                      |            Sequence #         |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |A|H|L|K|M|R|P|F|    Reserved   |            Lifetime           |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                                                               |
      .                                                               .
      .                        Mobility options                       .
      .                                                               .

      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;5: The data structure of the PBU&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>A new flag (F) is included in the Binding Update Massage to indicate to the LMA that the MN can support flow mobility. This field is necessary  only when the LMA cannot acquire information about flow mobility capacity of the MN from the MN policy profile. In that case, the MN will signal the MAG about its flow mobility capacity by using layer 2.5 signaling message. The MAG then set the value of F flag to inform the LMA about the flow mobility capacity of the MN. The flag MUST be set to 1 if the MN can support flow mobility and MUST be set to 0 if the MN cannot support flow mobility. 
</p>
<a name="Security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Security Considerations</h3>

<p>
	  This document doesn't intend to provide the NETEXT security analysis but one will be required.
	  
</p>
<a name="IANA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
IANA Considerations</h3>

<p>This document has no actions for IANA.
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>7.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC5213">[1]</a></td>
<td class="author-text">Gundavelli, S., Leung, K., Devarapalli, V., Chowdhury, K., and B. Patil, &ldquo;<a href="http://tools.ietf.org/html/rfc5213">Proxy Mobile IPv6</a>,&rdquo; RFC&nbsp;5213, August&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5213.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5648">[2]</a></td>
<td class="author-text">Wakikawa, R., Devarapalli, V., Tsirtsis, G., Ernst, T., and K. Nagami, &ldquo;<a href="http://tools.ietf.org/html/rfc5648">Multiple Care-of Addresses Registration</a>,&rdquo; RFC&nbsp;5648, October&nbsp;2009 (<a href="http://www.rfc-editor.org/rfc/rfc5648.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>7.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.draft-ietf-mext-flow-binding-09">[3]</a></td>
<td class="author-text">Tsirtsis, G., Soliman
, H., Montavont
, N., Giaretta
, G., and K. Kuladinithi
, &ldquo;Flow Bindings in Mobile IPv6 and NEMO Basic Support,&rdquo; August&nbsp;2010.</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.draft-ietf-netext-logical-interface-support-00">[4]</a></td>
<td class="author-text">Melia, T. and S. Gundavelli, &ldquo;Logical Interface Support for multi-mode IP Hosts, draft-ietf-netext-logical-interface-support-00,&rdquo; August&nbsp;2010.</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Tran Minh Trung</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">ETRI</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">161 Gajeong-Dong Yuseung-Gu</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Daejeon,   305-700</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Korea</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+82 42 860 1132</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:trungtm2909@gmail.com">trungtm2909@gmail.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Yong-Geun Hong</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">ETRI</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">161 Gajeong-Dong Yuseung-Gu</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Daejeon,   305-700</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Korea</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+82 42 860 6557</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:yonggeun.hong@gmail.com">yonggeun.hong@gmail.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Youn-Hee Han</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">KUT</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Gajeon-Ri, 307, Byeongcheon-Myeon, Cheonan-Si</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Chungnam Province,   330-708</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Korea</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+82 41 560 1486</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:yhhan@kut.ac.kr">yhhan@kut.ac.kr</a></td></tr>
</table>
</body></html>
