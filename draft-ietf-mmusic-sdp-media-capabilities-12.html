<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>SDP Media Mapabilities Negotiation</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Terminology">
<link href="#rfc.section.3" rel="Chapter" title="3  SDP Media Capabilities">
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 Requirements">
<link href="#rfc.section.3.2" rel="Chapter" title="3.2 Solution Overview">
<link href="#rfc.section.3.3" rel="Chapter" title="3.3 New Capability Attributes">
<link href="#rfc.section.3.3.1" rel="Chapter" title="3.3.1 The Media Format Capability Attributes">
<link href="#rfc.section.3.3.2" rel="Chapter" title="3.3.2 The Media Format Parameter Capability Attribute">
<link href="#rfc.section.3.3.2.1" rel="Chapter" title="3.3.2.1 Media Format Parameter Concatenation Rule">
<link href="#rfc.section.3.3.3" rel="Chapter" title="3.3.3 The Media-Specific Capability Attribute">
<link href="#rfc.section.3.3.4" rel="Chapter" title="3.3.4 New Configuration Parameters">
<link href="#rfc.section.3.3.4.1" rel="Chapter" title="3.3.4.1 The Media Configuration Parameter (m=)">
<link href="#rfc.section.3.3.4.2" rel="Chapter" title="3.3.4.2 The Payload Type Number Mapping Parameter (pt=)">
<link href="#rfc.section.3.3.4.3" rel="Chapter" title="3.3.4.3 The Media Type Parameter">
<link href="#rfc.section.3.3.5" rel="Chapter" title="3.3.5 The Latent Configuration Attribute">
<link href="#rfc.section.3.3.6" rel="Chapter" title="3.3.6 Enhanced Potential Configuration Attribute">
<link href="#rfc.section.3.3.6.1" rel="Chapter" title="3.3.6.1 Returning Capabilities in the Answer">
<link href="#rfc.section.3.3.6.2" rel="Chapter" title="3.3.6.2 Payload Type Number Mapping">
<link href="#rfc.section.3.3.6.3" rel="Chapter" title="3.3.6.3 Processing of Media-Format-Related Conventional Attributes for Potential Configurations">
<link href="#rfc.section.3.3.7" rel="Chapter" title="3.3.7 Substitution of Media Payload Type Numbers in Capability Attribute Parameters">
<link href="#rfc.section.3.3.8" rel="Chapter" title="3.3.8 The Session Capability Attribute">
<link href="#rfc.section.3.4" rel="Chapter" title="3.4 Offer/Answer Model Extensions">
<link href="#rfc.section.3.4.1" rel="Chapter" title="3.4.1 Generating the Initial Offer">
<link href="#rfc.section.3.4.2" rel="Chapter" title="3.4.2 Generating the Answer ">
<link href="#rfc.section.3.4.3" rel="Chapter" title="3.4.3 Offerer Processing of the Answer ">
<link href="#rfc.section.3.4.4" rel="Chapter" title="3.4.4 Modifying the Session">
<link href="#rfc.section.4" rel="Chapter" title="4 Examples">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 Alternative Codecs">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Alternative Combinations of Codecs (Session Configurations)">
<link href="#rfc.section.4.3" rel="Chapter" title="4.3 Latent Media Streams">
<link href="#rfc.section.5" rel="Chapter" title="5 IANA Considerations">
<link href="#rfc.section.5.1" rel="Chapter" title="5.1 New SDP Attributes">
<link href="#rfc.section.5.2" rel="Chapter" title="5.2 New SDP Option Tag">
<link href="#rfc.section.5.3" rel="Chapter" title="5.3 New SDP Capability Negotiation Parameters">
<link href="#rfc.section.6" rel="Chapter" title="6 Security Considerations">
<link href="#rfc.section.7" rel="Chapter" title="7 Changes from previous versions">
<link href="#rfc.section.7.1" rel="Chapter" title="7.1 Changes from version 11">
<link href="#rfc.section.7.2" rel="Chapter" title="7.2 Changes from version 10">
<link href="#rfc.section.7.3" rel="Chapter" title="7.3 Changes from version 09">
<link href="#rfc.section.7.4" rel="Chapter" title="7.4 Changes from version 08">
<link href="#rfc.section.7.5" rel="Chapter" title="7.5 Changes from version 04">
<link href="#rfc.section.7.6" rel="Chapter" title="7.6 Changes from version 03">
<link href="#rfc.section.7.7" rel="Chapter" title="7.7 Changes from version 02">
<link href="#rfc.section.7.8" rel="Chapter" title="7.8 Changes from version 01">
<link href="#rfc.section.7.9" rel="Chapter" title="7.9 Changes from version 00">
<link href="#rfc.section.8" rel="Chapter" title="8 Acknowledgements">
<link href="#rfc.references" rel="Chapter" title="9 References">
<link href="#rfc.references.1" rel="Chapter" title="9.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="9.2 Informative References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="Session Description Protocol (SDP) capability negotiation provides a general framework for indicating and negotiating capabilities in SDP.  The base framework defines only capabilities for negotiating transport protocols and attributes.  In this document, we extend the framework by defining media capabilities that can be used to negotiate media types and their associated parameters. " />
  <meta name="description" content="Session Description Protocol (SDP) capability negotiation provides a general framework for indicating and negotiating capabilities in SDP.  The base framework defines only capabilities for negotiating transport protocols and attributes.  In this document, we extend the framework by defining media capabilities that can be used to negotiate media types and their associated parameters. " />
  <meta name="keywords" content="" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">MMUSIC</td>
<td class="right">R. Gilman</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">Independent</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">R. Even</td>
</tr>
<tr>
<td class="left">Expires: May 03, 2012</td>
<td class="right">Gesher Erove Ltd</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">F. Andreasen</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Cisco Systems</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">October 31, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">SDP Media Mapabilities Negotiation<br />
  <span class="filename">draft-ietf-mmusic-sdp-media-capabilities-12</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>Session Description Protocol (SDP) capability negotiation provides a general framework for indicating and negotiating capabilities in SDP.  The base framework defines only capabilities for negotiating transport protocols and attributes.  In this document, we extend the framework by defining media capabilities that can be used to negotiate media types and their associated parameters. </p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on May 03, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>
<p>This document may contain material from IETF Documents or IETF Contributions published or made publicly available before November 10, 2008.  The person(s) controlling the copyright in some of this material may not have granted the IETF Trust the right to allow modifications of such material outside the IETF Standards Process. Without obtaining an adequate license from the person(s) controlling the copyright in such materials, this document may not be modified outside the IETF Standards Process, and derivative works of it may not be created outside the IETF Standards Process, except to format it for publication as an RFC or to translate it into languages other than English.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Terminology</a>
</li>
<li>3.   <a href="#rfc.section.3"> SDP Media Capabilities</a>
</li>
<li>3.1.   <a href="#rfc.section.3.1">Requirements</a>
</li>
<li>3.2.   <a href="#rfc.section.3.2">Solution Overview</a>
</li>
<li>3.3.   <a href="#rfc.section.3.3">New Capability Attributes</a>
</li>
<li>3.3.1.   <a href="#rfc.section.3.3.1">The Media Format Capability Attributes</a>
</li>
<li>3.3.2.   <a href="#rfc.section.3.3.2">The Media Format Parameter Capability Attribute</a>
</li>
<li>3.3.2.1.   <a href="#rfc.section.3.3.2.1">Media Format Parameter Concatenation Rule</a>
</li>
<li>3.3.3.   <a href="#rfc.section.3.3.3">The Media-Specific Capability Attribute</a>
</li>
<li>3.3.4.   <a href="#rfc.section.3.3.4">New Configuration Parameters</a>
</li>
<li>3.3.4.1.   <a href="#rfc.section.3.3.4.1">The Media Configuration Parameter (m=)</a>
</li>
<li>3.3.4.2.   <a href="#rfc.section.3.3.4.2">The Payload Type Number Mapping Parameter (pt=)</a>
</li>
<li>3.3.4.3.   <a href="#rfc.section.3.3.4.3">The Media Type Parameter</a>
</li>
<li>3.3.5.   <a href="#rfc.section.3.3.5">The Latent Configuration Attribute</a>
</li>
<li>3.3.6.   <a href="#rfc.section.3.3.6">Enhanced Potential Configuration Attribute</a>
</li>
<li>3.3.6.1.   <a href="#rfc.section.3.3.6.1">Returning Capabilities in the Answer</a>
</li>
<li>3.3.6.2.   <a href="#rfc.section.3.3.6.2">Payload Type Number Mapping</a>
</li>
<li>3.3.6.3.   <a href="#rfc.section.3.3.6.3">Processing of Media-Format-Related Conventional Attributes for Potential Configurations</a>
</li>
<li>3.3.7.   <a href="#rfc.section.3.3.7">Substitution of Media Payload Type Numbers in Capability Attribute Parameters</a>
</li>
<li>3.3.8.   <a href="#rfc.section.3.3.8">The Session Capability Attribute</a>
</li>
<li>3.4.   <a href="#rfc.section.3.4">Offer/Answer Model Extensions</a>
</li>
<li>3.4.1.   <a href="#rfc.section.3.4.1">Generating the Initial Offer</a>
</li>
<li>3.4.2.   <a href="#rfc.section.3.4.2">Generating the Answer </a>
</li>
<li>3.4.3.   <a href="#rfc.section.3.4.3">Offerer Processing of the Answer </a>
</li>
<li>3.4.4.   <a href="#rfc.section.3.4.4">Modifying the Session</a>
</li>
<li>4.   <a href="#rfc.section.4">Examples</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">Alternative Codecs</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">Alternative Combinations of Codecs (Session Configurations)</a>
</li>
<li>4.3.   <a href="#rfc.section.4.3">Latent Media Streams</a>
</li>
<li>5.   <a href="#rfc.section.5">IANA Considerations</a>
</li>
<li>5.1.   <a href="#rfc.section.5.1">New SDP Attributes</a>
</li>
<li>5.2.   <a href="#rfc.section.5.2">New SDP Option Tag</a>
</li>
<li>5.3.   <a href="#rfc.section.5.3">New SDP Capability Negotiation Parameters</a>
</li>
<li>6.   <a href="#rfc.section.6">Security Considerations</a>
</li>
<li>7.   <a href="#rfc.section.7">Changes from previous versions</a>
</li>
<li>7.1.   <a href="#rfc.section.7.1">Changes from version 11</a>
</li>
<li>7.2.   <a href="#rfc.section.7.2">Changes from version 10</a>
</li>
<li>7.3.   <a href="#rfc.section.7.3">Changes from version 09</a>
</li>
<li>7.4.   <a href="#rfc.section.7.4">Changes from version 08</a>
</li>
<li>7.5.   <a href="#rfc.section.7.5">Changes from version 04</a>
</li>
<li>7.6.   <a href="#rfc.section.7.6">Changes from version 03</a>
</li>
<li>7.7.   <a href="#rfc.section.7.7">Changes from version 02</a>
</li>
<li>7.8.   <a href="#rfc.section.7.8">Changes from version 01</a>
</li>
<li>7.9.   <a href="#rfc.section.7.9">Changes from version 00</a>
</li>
<li>8.   <a href="#rfc.section.8">Acknowledgements</a>
</li>
<li>9.   <a href="#rfc.references">References</a>
</li>
<li>9.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>9.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> <a href="#intro" id="intro">Introduction</a>
</h1>
<p id="rfc.section.1.p.1">Session Description Protocol (SDP) capability negotiation  <a href="#RFC5939">[RFC5939]</a> provides a general framework for indicating and negotiating capabilities in SDP<a href="#RFC4566">[RFC4566]</a>. The base framework defines only capabilities for negotiating transport protocols and attributes.  </p>
<p id="rfc.section.1.p.2">The <a href="#RFC5939">[RFC5939]</a> document lists some of the issues with the current SDP capability negotiation process. An additional real life case is to be able to offer one media stream (e.g. audio) but list the capability to support another media stream (e.g. video) without actually offering it concurrently.  </p>
<p id="rfc.section.1.p.3">In this document, we extend the framework by defining media capabilities that can be used to indicate and negotiate media types and their associated format parameters.  This document also adds the ability to declare support for media streams, the use of which can be offered and negotiated later, and the ability to specify session configurations as combinations of media stream configurations.  The definitions of new attributes for media capability negotiation are chosen to make the translation from these attributes to "conventional" SDP <a href="#RFC4566">[RFC4566]</a> media attributes as straightforward as possible in order to simplify implementation.  This goal is intended to reduce processing in two ways: each proposed configuration in an offer may be easily translated into a conventional SDP media stream record for processing by the receiver; and the construction of an answer based on a selected proposed configuration is straightforward. </p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> <a href="#terms" id="terms">Terminology</a>
</h1>
<p id="rfc.section.2.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in RFC2119 <a href="#RFC2119">[RFC2119]</a> and indicate requirement levels for compliant RTP implementations.</p>
<p></p>
<p id="rfc.section.2.p.3">"Base Attributes": Conventional SDP attributes appearing in the base configuration of a media block.  </p>
<p id="rfc.section.2.p.4">"Base Configuration": The media configuration represented by a media block exclusive of all the capability negotiation attributes defined in this document, the base capability negotiation document<a href="#RFC5939">[RFC5939]</a>, or any other capability negotiation document.  In an offer SDP, the base configuration corresponds to the actual configuration as defined in <a href="#RFC5939">[RFC5939]</a>.  </p>
<p id="rfc.section.2.p.5">"Conventional Attribute": Any SDP attribute other than those defined by the series of capability negotiation specifications.  </p>
<p id="rfc.section.2.p.6">"Conventional SDP": An SDP record devoid of capability negotiation attributes.</p>
<p id="rfc.section.2.p.7">"Media Capability": A media encoding, typically a media subtype such as PCMU, H263-1998, or T38.  </p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> <a href="#sdpmedcap" id="sdpmedcap"> SDP Media Capabilities</a>
</h1>
<p id="rfc.section.3.p.1">The SDP capability negotiation <a href="#RFC5939">[RFC5939]</a> discusses the use of any SDP <a href="#RFC4566">[RFC4566]</a> attribute (a=) under the attribute capability "acap".  The limitations of using acap for fmtp and rtpmap in a potential configuration are described in <a href="#RFC5939">[RFC5939]</a>; for example they can be used only at the media level since they are media level attributes. The <a href="#RFC5939">[RFC5939]</a>  does not provide a way to exchange media-level capabilities prior to the actual offer of the associated media stream.  This section provides an overview of extensions providing an SDP Media Capability negotiation solution offering more robust capabilities negotiation. This is followed by definitions of new SDP attributes for the solution and its associated updated offer/answer procedures <a href="#RFC3264">[RFC3264]</a> </p>
<h1 id="rfc.section.3.1">
<a href="#rfc.section.3.1">3.1.</a> <a href="#reqts" id="reqts">Requirements</a>
</h1>
<p id="rfc.section.3.1.p.1">The capability negotiation extensions requirements considered herein are as follows.</p>
<p></p>

<dl>
<dt>REQ-01: </dt>
<dd style="margin-left: 8">Support the specification of alternative (combinations of) media formats (codecs) in a single media block.                       </dd>
</dl>

<p> </p>
<p></p>

<dl>
<dt>REQ-02: </dt>
<dd style="margin-left: 8">Support the specification of alternative media format parameters for each media format.                    </dd>
</dl>

<p> </p>
<p></p>

<dl>
<dt>REQ-03: </dt>
<dd style="margin-left: 8">Retain backward compatibility with conventional SDP.  Ensure that each and every offered configuration can be easily translated into a corresponding SDP media block expressed with conventional SDP lines.                 </dd>
</dl>

<p> </p>
<p></p>

<dl>
<dt>REQ-04: </dt>
<dd style="margin-left: 8">Ensure the scheme operates within the offer/answer model in such a way that media formats and parameters can be agreed upon with a single exchange.                  </dd>
</dl>

<p> </p>
<p></p>

<dl>
<dt>REQ-05: </dt>
<dd style="margin-left: 8">Provide the ability to express offers in such a way that the offerer can receive media as soon as the offer is sent.  (Note that the offerer may not be able to render received media prior to exchange of keying material.)            </dd>
</dl>

<p> </p>
<p></p>

<dl>
<dt>REQ-06: </dt>
<dd style="margin-left: 8">Provide the ability to offer latent media configurations for future negotiation.               </dd>
</dl>

<p> </p>
<p></p>

<dl>
<dt>REQ-07: </dt>
<dd style="margin-left: 8">Provide reasonable efficiency in the expression of alternative media formats and/or format parameters, especially in those cases in which many combinations of options are offered.                </dd>
</dl>

<p> </p>
<p></p>

<dl>
<dt>REQ-08: </dt>
<dd style="margin-left: 8">Retain the extensibility of the base capability negotiation mechanism.</dd>
</dl>

<p> </p>
<p></p>

<dl>
<dt>REQ-09: </dt>
<dd style="margin-left: 8">Provide the ability to specify acceptable combinations of media streams and media formats.  For example, offer a PCMU audio stream with an H264 video stream, or a G729 audio stream with an H263 video stream.  This ability would give the offerer a means to limit processing requirements for simultaneous streams.  This would also permit an offer to include the choice of an audio/T38 stream or an image/T38 stream, but not both.               </dd>
</dl>

<p> </p>
<p id="rfc.section.3.1.p.11">Other possible extensions have been discussed, but have not been treated in this document.  They may be considered in the future.  Three such extensions are:</p>
<p></p>

<dl>
<dt>FUT-01: </dt>
<dd style="margin-left: 8">Provide the ability to mix, or change, media types within a single media block.  Conventional SDP does not support this capability explicitly; the usual technique is to define a media subtype that represents the actual format within the nominal media type.  For example, T.38 FAX as an alternative to audio/PCMU within an audio stream is identified as audio/T38; a separate FAX stream would use image/T38.                 </dd>
</dl>

<p> </p>
<p></p>

<dl>
<dt>FUT-02: </dt>
<dd style="margin-left: 8">Provide the ability to support multiple transport protocols within an active media stream without reconfiguration.  This is not explicitly supported by conventional SDP.                  </dd>
</dl>

<p> </p>
<p></p>

<dl>
<dt>FUT-03: </dt>
<dd style="margin-left: 8">Provide capability negotiation attributes for all media-level SDP line types in the same manner as already done for the attribute type, with the exception of the media line type itself.  The media line type is handled in a special way to permit compact expression of media coding/format options.  The line types are bandwidth ("b="), information ("i="), connection data ("c="), and, possibly, the deprecated encryption key ("k=").                   </dd>
</dl>

<p> </p>
<h1 id="rfc.section.3.2">
<a href="#rfc.section.3.2">3.2.</a> <a href="#overview" id="overview">Solution Overview</a>
</h1>
<p id="rfc.section.3.2.p.1">The solution consists of new capability attributes corresponding to conventional SDP line types, new parameters for the pcfg, acfg, and the new lcfg attributes extending the base attributes from <a href="#RFC5939">[RFC5939]</a>, and a use of the pcfg attribute to return capability information in the SDP answer.</p>
<p id="rfc.section.3.2.p.2">Several new attributes are defined in a manner that can be related to the capabilities specified in a media line, and its corresponding rtpmap and fmtp attributes.</p>
<p></p>

<ul>
<li>A new media attribute ("a=rmcap") defines RTP-based media capabilities in the form of a media subtype (e.g.  "PCMU"), and its encoding parameters (e.g. "/8000/2").  Each resulting media format type/subtype capability has an associated handle called a media capability number.  The encoding parameters are as specified for the rtpmap attribute defined in <a href="#RFC4566">[RFC4566]</a>, without the payload type number part.  </li>
<li>A new media attribute ("a=omcap") defines other (non RTP-based) media capabilities in the form of a media subtype only (e.g. "T38").  Each resulting media format type/subtype capability has an associated handle called a media capability number.  </li>
<li>A new attribute ("a=mfcap") specifies media format parameters associated with one or more media capabilities.  The mfcap attribute is used primarily to associate the formatting capabilities normally carried in the fmtp attribute. Note that media format parameters can be used with RTP and non-RTP based media formats.</li>
<li>A new attribute ("a=mscap") that specifies media parameters associated with one or more media capabilities.  The mscap attribute is used to associate capabilities with attributes other than fmtp or rtpmap, for example, the rtcp-fb attribute defined in <a href="#RFC4585">[RFC4585]</a>.</li>
<li>A new attribute ("a=lcfg") specifies latent media stream configurations when no corresponding media line ("m=") is offered.  An example is the offer of latent configurations for video even though no video is currently offered.  If the peer indicates support for one or more offered latent configurations, the corresponding media stream(s) may be added via a new offer/answer exchange.  </li>
<li>A new attribute ("a=sescap") is used to specify an acceptable combination of simultaneous media streams and their configurations as a list of potential and/or latent configurations.</li>
</ul>

<p> </p>
<p id="rfc.section.3.2.p.4">New parameters are defined for the potential configuration (pcfg), latent configuration (lcfg), and accepted configuration (acfg) attributes to associate the new attributes with particular configurations.</p>
<p></p>

<ul>
<li>A new parameter type ("m=") is added to the potential configuration ("a=pcfg:") attribute and the actual configuration ("a=acfg:") attribute defined in <a href="#RFC5939">[RFC5939]</a>, and to the new latent configuration ("a=lcfg:") attribute.  This permits specification of media capabilities (including their associated parameters) and combinations thereof for the configuration.  For example, the "a=pcfg:" line might specify PCMU and telephone events <a href="#RFC4733">[RFC4733]</a> or G.729B and telephone events as acceptable configurations.  The "a=acfg:" line in the answer would specify the configuration chosen.  </li>
<li>A new parameter type ("pt=") is added to the potential configuration, actual configuration, and latent configuration attributes.  This parameter associates RTP payload type numbers with the referenced RTP-based media capabilities, and is appropriate only when the transport protocol uses RTP.  </li>
<li>A new parameter type ("mt=") is used to specify the media type for latent configurations.</li>
</ul>

<p> </p>
<p id="rfc.section.3.2.p.6">Special processing rules are defined for capability attribute arguments in order to reduce the need to replicate essentially-identical attribute lines for the base configuration and potential configurations.</p>
<p></p>

<ul>
<li>A substitution rule is defined for any capability attribute to permit the replacement of the (escaped) media capability number with the media format identifier (e.g., the payload type number in audio/video profiles).</li>
<li>Replacement rules are defined for the conventional SDP equivalents of the mfcap and mscap capability attributes.  This reduces the necessity to use the deletion qualifier in the a=pcfg parameter in order to ignore rtpmap, fmtp, and certain other attributes in the base configuration.</li>
<li>An argument concatenation rule is defined for mfcap attributes which refer to the same media capability number.  This makes it convenient to combine format options concisely by associating multiple mfcap lines with multiple media capabilities.  </li>
</ul>

<p> </p>
<p id="rfc.section.3.2.p.8">This document extends the base protocol extensions to the offer/answer model that allow for capabilities and potential configurations to be included in an offer.  Media capabilities constitute capabilities that can be used in potential and latent configurations.  Whereas potential configurations constitute alternative offers that may be accepted by the answerer instead of the actual configuration(s) included in the "m=" line(s) and associated parameters, latent configurations merely inform the other side of possible configurations supported by the entity.  Those latent configurations may be used to guide subsequent offer/answer exchanges, but they are not part of the current offer/answer exchange. </p>
<p id="rfc.section.3.2.p.9">The mechanism is illustrated by the offer/answer exchange below, where Alice sends an offer to Bob: </p>
<div id="#rfc.figure.1"></div>
<pre>
					   
                Alice                            Bob
               | (1) Offer (SRTP and RTP)         |
               |---------------------------------&gt;|
               |                                  |
               | (2) Answer (RTP)                 |
               |&lt;---------------------------------|
               |                                  |
		</pre>
<p id="rfc.section.3.2.p.10">Alice's offer includes RTP and SRTP as alternatives. RTP is the default, but SRTP is the preferred one (long lines are folded to fit the margins):</p>
<p></p>

<ul class="empty"><li>v=0<br> o=- 25678 753849 IN IP4 192.0.2.1<br> s=<br> c=IN IP4 192.0.2.1<br> t=0 0<br> a=creq:med-v0<br> m=audio 3456 RTP/AVP 0 18<br> a=tcap:1 RTP/SAVP  RTP/AVP<br> a=rtpmap:0 PCMU/8000/1<br> a=rtpmap:18 G729/8000/1<br> a=fmtp:18 annexb=yes<br> a=rmcap:1,4 g729/8000/1<br> a=rmcap:2 PCMU/8000/1<br> a=rmcap:5 telephone-event/8000<br> a=mfcap:1 annexb=no<br> a=mfcap:4 annexb=yes<br> a=mfcap:5 0-11<br> a=acap:1 crypto:1 AES_CM_128_HMAC_SHA1_32 \   <br> inline:NzB4d1BINUAvLEw6UzF3WSJ+PSdFcGdUJShpX1Zj|2^20|1:32<br> a=pcfg:1 m=4,5|1,5 t=1 a=1 pt=1:100,4:101,5:102<br> a=pcfg:2 m=2 t=1 a=1 pt=2:103<br> a=pcfg:3 m=4 t=2 pt=4:18 </li></ul>

<p> </p>
<p id="rfc.section.3.2.p.12">The required base and extensions are provided by the "a=creq" attribute defined in <a href="#RFC5939">[RFC5939]</a>, with the option tag "med-v0", which indicates that the extension framework defined here, must be supported. The Base level support is implied since it is required for the extensions.</p>
<p id="rfc.section.3.2.p.13">The "m=" line indicates that Alice is offering to use plain RTP with PCMU or G.729B.  The media line implicitly defines the default transport protocol (RTP/AVP in this case) and the default actual configuration.  </p>
<p id="rfc.section.3.2.p.14">The "a=tcap:1" line, specified in the base protocol, defines transport protocol capabilities, in this case Secure RTP (SAVP profile) as the first option and RTP (AVP profile) as the second option.</p>
<p id="rfc.section.3.2.p.15">The "a=rmcap:1,4" line defines two G.729 RTP-based media format capabilities, numbered 1 and 4, and their encoding rate.  The capabilities are of media type "audio" and subtype G729.  Note that the media subtype is explicitly specified here, rather than RTP payload type numbers.  This permits the assignment of payload type numbers in the media stream configuration specification.  In this example, two G.729 subtype capabilities are defined.  This permits the declaration of two sets of formatting parameters for G.729.</p>
<p id="rfc.section.3.2.p.16">The "a=rmcap:2" line defines a G.711 mu-law capability, numbered 2.</p>
<p id="rfc.section.3.2.p.17">The "a=rmcap:5" line defines an audio telephone-event capability, numbered 5.</p>
<p id="rfc.section.3.2.p.18">The "a=mfcap:1" line specifies the fmtp formatting parameters for capability 1 (offerer will not accept G.729 Annex B packets).</p>
<p id="rfc.section.3.2.p.19">The "a=mfcap:4" line specifies the fmtp formatting parameters for capability 4 (offerer will accept G.729 Annex B packets).</p>
<p id="rfc.section.3.2.p.20">The "a=mfcap:5" line specifies the fmtp formatting parameters for capability 5 (the DTMF touchtones 0-9,*,#).</p>
<p id="rfc.section.3.2.p.21">The "a=acap:1" line specified in the base protocol provides the "crypto" attribute which provides the keying material for SRTP using SDP security descriptions.</p>
<p id="rfc.section.3.2.p.22">The "a=pcfg:" attributes provide the potential configurations included in the offer by reference to the media capabilities, transport capabilities, attribute capabilities and specified payload type number mappings.  Three explicit alternatives are provided; the lowest-numbered one is the preferred one. The "a=pcfg:1 ..." line specifies media capabilities 4 and 5, i.e., G.729B and DTMF, or media capability 1 and 5, i.e., G.729 and DTMF. Furthermore, it specifies transport protocol capability 1 (i.e. the RTP/SAVP profile - secure RTP), and the attribute capability 1, i.e.  the crypto attribute provided.  Lastly, it specifies a payload type number mapping for (RTP-based) media capabilities 1, 4, and 5, thereby permitting the offerer to distinguish between encrypted media and unencrypted media received prior to receipt of the answer.  </p>
<p id="rfc.section.3.2.p.23">Use of unique payload type numbers in alternative configurations is not required; codecs such as AMR-WB <a href="#RFC4867">[RFC4867]</a> have the potential for so many combinations of options that it may be impractical to define unique payload type numbers for all supported combinations. If unique payload type numbers cannot be specified, then the offerer will be obliged to wait for the SDP answer before rendering received media.  For SRTP using SDES inline keying <a href="#RFC4568">[RFC4568]</a>, the offerer will still need to receive the answer before being able to decrypt the stream.</p>
<p id="rfc.section.3.2.p.24">The second alternative ("a=pcfg:2 ...")  specifies media capability 2, i.e. PCMU, under the RTP/SAVP profile, with the same SRTP key material.</p>
<p id="rfc.section.3.2.p.25">The third alternative ("a=pcfg:3 ...")  offers G.729B unsecured; its only purpose in this example is to show a preference for G.729B over PCMU.</p>
<p id="rfc.section.3.2.p.26">The media line, with any qualifying attributes such as fmtp or rtpmap, is itself considered a valid configuration; it is assumed to be the lowest preference.  </p>
<p id="rfc.section.3.2.p.27">Bob receives the SDP offer from Alice.  Bob supports G.729B, PCMU, and telephone events over RTP, but not SRTP,  hence he accepts the potential configuration 3 for RTP provided by Alice. Bob generates the following answer:</p>
<p></p>

<ul class="empty"><li>v=0<br> o=- 24351 621814 IN IP4 192.0.2.2<br> s=<br> c=IN IP4 19x2.0.2.2<br> t=0 0<br> a=csup:med-v0<br> m=audio 4567 RTP/AVP 18<br> a=rtpmap:18 G729/8000<br> a=fmtp:18 annexb=yes<br> a=acfg:3 m=4 t=2 pt=4:18</li></ul>

<p> </p>
<p id="rfc.section.3.2.p.29">Bob includes the "a=csup" and "a=acfg" attributes in the answer to inform Alice that he can support the med-v0 level of capability negotiations.  Note that in this particular example, the answerer supported the capability extensions defined here, however had he not, he would simply have processed the offer based on the offered PCMU and G.729 codecs under the RTP/AVP profile only.  Consequently, the answer would have omitted the "a=csup" attribute line and chosen one or both of the PCMU and G.729 codecs instead.  The answer carries the accepted configuration in the "m=" line along with corresponding rtpmap and/or fmtp parameters, as appropriate.</p>
<p id="rfc.section.3.2.p.30">Note that per the base protocol, after the above, Alice MAY generate a new offer with an actual configuration ("m=" line, etc.) corresponding to the actual configuration referenced in Bob's answer (not shown here).</p>
<h1 id="rfc.section.3.3">
<a href="#rfc.section.3.3">3.3.</a> <a href="#newattrs" id="newattrs">New Capability Attributes</a>
</h1>
<p id="rfc.section.3.3.p.1">In this section, we present the new attributes associated with indicating the media capabilities for use by the SDP Capability negotiation.  The approach taken is to keep things similar to the existing media capabilities defined by the existing media descriptions ("m=" lines) and the associated "rtpmap" and "fmtp" attributes.  We use media subtypes and "media capability numbers" to link the relevant media capability parameters.  This permits the capabilities to be defined at the session level and be used for multiple streams, if desired.  For RTP-based media formats, payload types are then specified at the media level (see <a href="#ptparm">Section 3.3.4.2</a>).  </p>
<p id="rfc.section.3.3.p.2">A media capability merely indicates possible support for the media type and media format(s) in question.  In order to actually use a media capability in an offer/answer exchange, it MUST be referenced in a potential configuration.  </p>
<p id="rfc.section.3.3.p.3">Media capabilities can be provided at the session-level and/or the media-level.  Media capabilities provided at the session level may be referenced in any pcfg or lcfg attribute at the media level (consistent with the media type), whereas media capabilities provided at the media level may be referenced only by the pcfg or lcfg attribute within that media stream only.  In either case, the scope of the &lt;med-cap-num&gt; is the entire session description.  This enables each media capability to be uniquely referenced across the entire session description (e.g. in a potential configuration).</p>
<h1 id="rfc.section.3.3.1">
<a href="#rfc.section.3.3.1">3.3.1.</a> <a href="#mcap" id="mcap">The Media Format Capability Attributes</a>
</h1>
<p id="rfc.section.3.3.1.p.1">Media subtypes can be expressed as media format capabilities by use of the "a=rmcap" and "a=omcap" attributes. The "a=rmcap" attribute MUST be used for RTP-based media whereas the "a=omcap" attribute MUST be used for non-RTP-based (other) media formats. The two attributes are defined as follows:</p>
<div id="#rfc.figure.2"></div>
<pre>
a=rmcap:&lt;media-cap-num-list&gt; &lt;encoding-name&gt;/&lt;clock-rate&gt;
                             [/&lt;encoding-parms&gt;]

a=omcap:&lt;media-cap-num-list&gt; &lt;format-name&gt;
                                       </pre>
<p id="rfc.section.3.3.1.p.2">where &lt;media-cap-num-list&gt; is a (list of) media capability number(s) used to number a media format capability, the &lt;encoding name&gt; is the media subtype e.g. H263-1998 or PCMU, &lt;clock rate&gt; is the encoding rate, and &lt;encoding parms&gt; are the media encoding parameters for the media subtype;.  All media format capabilities in the list are assigned to the same media type/subtype.  Each occurrence of the rmcap and omcap attribute MUST use unique values in their &lt;media-cap-num-list&gt;; the media capability numbers are shared between the two attributes and the numbers MUST be unique across the entire SDP session.  In short, the rmcap and omcap attributes define media capabilities and associates them with a media capability number in the same manner as the rtpmap attribute defines them and associates them with a payload type number.  Additionally, the attributes allow multiple capability numbers to be defined for the media format in question.  This permits the media format to be associated with different media parameters in different configurations. </p>
<p id="rfc.section.3.3.1.p.3">In ABNF, we have: </p>
<div id="#rfc.figure.3"></div>
<pre>
   media-capability-line = rtp-mcap / non-rtp-mcap

   rtp-mcap           = "a=rmcap:" media-cap-num-list
                           1*WSP encoding-name "/" clock-rate
                           ["/" encoding-parms]
   non-rtp-mcap       = "a=omcap:" media-cap-num-list 1*WSP format-name
   media-cap-num-list = media-cap-num-element
                        *["," media-cap-num-element]
   media-cap-num-element = media-cap-num
                                / media-cap-num-range
   media-cap-num-range = media-cap-num "-" media-cap-num
   media-cap-num      = 1*10(DIGIT)
   encoding-name      = token ; defined in RFC4566
   clock-rate         = 1*10(DIGIT)
   encoding-parms     = token
   format-name        = token ;defined in RFC4566
	                               </pre>
<p id="rfc.section.3.3.1.p.4">The encoding-name, clock-rate and encoding-params are as defined to appear in an rtpmap attribute for each media type/subtype.  Thus, it is easy to convert an rmcap attribute line into one or more rtpmap attribute lines, once a payload type number is assigned to a media-cap-num (see <a href="#lcfg">Section 3.3.5</a>).</p>
<p id="rfc.section.3.3.1.p.5">The format-name is a media format description for non-RTP based media as defined for the &lt;fmt&gt; part of the media description ("m=" line) in <a href="#RFC4566">[RFC4566]</a>. In simple terms, it's the name of the media format, e.g. "t38". </p>
<p id="rfc.section.3.3.1.p.6">The "rmcap" and "omcap" attributes can be provided at the session-level and/or the media-level.  There can be more than one rmcap plus one omcap attribute at the session or media level (i.e at most one of each at the session-level and at most one of in each media description).  Each media-cap-num MUST be unique within the entire SDP record; it is used to identify that media capability in potential, latent and actual configurations, and in other attribute lines as explained below. Note that the media-cap-num values are shared between the rmcap and omcap attributes, and hence the uniqueness requirement applies to the union of them. When the media capabilities are used in a potential, latent or actual configuration, the media formats referred by those configurations apply at the media level, irrespective of whether the media capabilities themselves were specified at the session or media level. In other words, the media capability applies to the specific media description associated with the configuration which invokes it.</p>
<p id="rfc.section.3.3.1.p.7">For example:	</p>
<p></p>

<ul class="empty"><li>v=0<br> a=rmcap:1 L16/8000/1<br> a=rmcap:2 L16/16000/2<br> a=rmcap:3,4 H263-1998/90000<br> m=audio 54320 RTP/AVP 0<br> a=pcfg:1 m=1|2, pt=1:99,2:98<br> m=video 66544 RTP/AVP 100<br> a=rtpmap:100 H264/90000<br> a=pcfg:10 m=3 pt=3:101 </li></ul>

<p> </p>
<h1 id="rfc.section.3.3.2">
<a href="#rfc.section.3.3.2">3.3.2.</a> <a href="#mfcap" id="mfcap">The Media Format Parameter Capability Attribute</a>
</h1>
<p id="rfc.section.3.3.2.p.1">This attribute is used to associate media format specific format parameters with one or more media capabilities.  The form of the attribute is: </p>
<p></p>

<ul class="empty"><li>a=mfcap:&lt;media-caps&gt;  &lt;list of parameters&gt; </li></ul>

<p> </p>
<p id="rfc.section.3.3.2.p.3">where &lt;media-caps&gt; permits the list of parameters to be associated with one or more media capabilities and the format parameters are specific to the type of media format.  The mfcap lines map to a single traditional SDP fmtp attribute line (one for each entry in &lt;media-caps&gt;) of the form</p>
<p></p>

<ul class="empty"><li>a=fmtp:&lt;fmt&gt;  &lt;list of parameters&gt;</li></ul>

<p> </p>
<p id="rfc.section.3.3.2.p.5">where &lt;fmt&gt; is the media format description defined in RFC 4566 <a href="#RFC4566">[RFC4566]</a>, as appropriate for the particular media stream.  The mfcap attribute MUST be used to encode attributes for media capabilities, which would conventionally appear in an fmtp attribute.  The existing acap attribute MUST NOT be used to encode fmtp attributes.</p>
<p id="rfc.section.3.3.2.p.6">The mfcap attribute adheres to <a href="#RFC4566">[RFC4566]</a> attribute production rules with</p>
<div id="#rfc.figure.4"></div>
<pre>
   media-format-capability = "a=mfcap:" media-cap-num-list 1*WSP
                                        fmt-specific-param-list
   fmt-specific-param-list = text ; defined in RFC4566
	                               </pre>
<p id="rfc.section.3.3.2.p.7">Note that media format parameters can be used with RTP-based and non-RTP based media formats.</p>
<h1 id="rfc.section.3.3.2.1">
<a href="#rfc.section.3.3.2.1">3.3.2.1.</a> <a href="#mfcapcat" id="mfcapcat">Media Format Parameter Concatenation Rule</a>
</h1>
<p id="rfc.section.3.3.2.1.p.1">The appearance of media subtypes with a large number of formatting options (e.g., AMR-WB <a href="#RFC4867">[RFC4867]</a>) coupled with the restriction that only a single fmtp attribute can appear per media format, suggests that it is useful to create a combining rule for mfcap parameters which are associated with the same media capability number.  Therefore, different mfcap lines MAY include the same media-cap-num in their media-cap-num-list.  When a particular media capability is selected for processing, the parameters from each mfcap line which references the particular capability number in its media-cap-num-list are concatenated together via ";", in the order the mfcap attributes appear in the SDP record, to form the equivalent of a single fmtp attribute line.  This permits one to define a separate mfcap line for a single parameter and value that is to be applied to each media capability designated in the media-cap-num-list.  This provides a compact method to specify multiple combinations of format parameters when using codecs with multiple format options. Note that order-dependent parameters SHOULD be placed in a single mfcap line to avoid possible problems with line rearrangement by a middlebox.</p>
<p id="rfc.section.3.3.2.1.p.2">Format parameters are not parsed by SDP; their content is specific to the media type/subtype.  When format parameters for a specific media capability are combined from multiple a=mfcap lines which reference that media capability, the format-specific parameters are concatenated together and separated by ";" for construction of the corresponding format attribute (a=fmtp).  The resulting format attribute will look something like the following (without line breaks):</p>
<div id="#rfc.figure.5"></div>
<pre>
     a=fmtp:&lt;fmt&gt; &lt;fmt-specific-param-list1&gt;;
                  &lt;fmt-specific-param-list2&gt;;
                  ...
                         </pre>
<p></p>
<p id="rfc.section.3.3.2.1.p.4">where &lt;fmt&gt; depends on the transport protocol in the manner defined in RFC4566.  SDP cannot assess the legality of the resulting parameter list in the "a=fmtp" line; the user must take care to ensure that legal parameter lists are generated. </p>
<p id="rfc.section.3.3.2.1.p.5">The "mfcap" attribute can be provided at the session-level and the media-level.  There can be more than one mfcap attribute at the session or media level.  The unique media-cap-num is used to associate the parameters with a media capability.  </p>
<p id="rfc.section.3.3.2.1.p.6">As a simple example, a G.729 capability is, by default, considered to  support comfort noise as defined by Annex B.  Capabilities for G.729  with and without comfort noise support may thus be defined by: </p>
<p></p>

<ul class="empty"><li>a=rmcap:1,2 audio G729/8000<br> a=mfcap:2 annexb:no</li></ul>

<p> </p>
<p id="rfc.section.3.3.2.1.p.8">Media format capability 1 supports G.729 with Annex B, whereas media format capability 2 supports G.729 without Annex B. </p>
<p id="rfc.section.3.3.2.1.p.9">Example for H.263 video: </p>
<p></p>

<ul class="empty"><li>a=rmcap:1 video H263-1998/90000<br> a=rmcap:2 video H263-2000/90000<br> a=mfcap:1 CIF=4;QCIF=2;F=1;K=1<br> a=mfcap:2 profile=2;level=2.2</li></ul>

<p> </p>
<p id="rfc.section.3.3.2.1.p.11">Finally, for six format combinations of the Adaptive MultiRate codec:</p>
<p></p>

<ul class="empty"><li>a=rmcap:1-3 AMR/8000/1<br> a=rmcap:4-6 AMR-WB/16000/1<br> a=mfcap:1,2,3,4 mode-change-capability=1<br> a=mfcap:5,6 mode-change-capability=2<br> a=mfcap:1,2,3,5 max-red=220<br> a=mfcap:3,4,5,6 octet-align=1<br> a=mfcap:1,3,5 mode-set=0,2,4,7<br> a=mfcap:2,4,6 mode-set=0,3,5,6</li></ul>

<p> </p>
<p id="rfc.section.3.3.2.1.p.13">So that AMR codec #1, when specified in a pcfg attribute within an audio stream block (and assigned payload type number 98) as in</p>
<p></p>

<ul class="empty"><li>a=pcfg:1 m=1 pt=1:98</li></ul>

<p> </p>
<p id="rfc.section.3.3.2.1.p.15">is essentially equivalent to the following </p>
<p></p>

<ul class="empty"><li>m=audio 49170 RTP/AVP 98<br> a=rtpmap:98 AMR/8000/1<br> a=fmtp:98 mode-change-capability=1; \ <br> max-red=220; mode-set=0,2,4,7</li></ul>

<p> </p>
<p id="rfc.section.3.3.2.1.p.17">and AMR codec #4 with payload type number 99,depicted by the potential configuration:</p>
<p></p>

<ul class="empty"><li>a=pcfg:4 m=4, pt=4:99</li></ul>

<p> </p>
<p id="rfc.section.3.3.2.1.p.19">is equivalent to the following: </p>
<p></p>

<ul class="empty"><li>m=audio 49170 RTP/AVP 99<br> a=rtpmap:99 AMR-WB/16000/1<br> a=fmtp:99 mode-change-capability=1; octet-align=1; \ <br> mode-set=0,3,5,6</li></ul>

<p> </p>
<p id="rfc.section.3.3.2.1.p.21">and so on for the other four combinations. SDP could thus convert the media capabilities specifications into one or more alternative media stream specifications, one of which can be chosen for the answer.</p>
<h1 id="rfc.section.3.3.3">
<a href="#rfc.section.3.3.3">3.3.3.</a> <a href="#mscap" id="mscap">The Media-Specific Capability Attribute</a>
</h1>
<p id="rfc.section.3.3.3.p.1">Media-specific attributes, beyond the rtpmap and fmtp attributes, may be associated with media capability numbers via a new media-specific attribute, mscap, of the following form:</p>
<div id="#rfc.figure.6"></div>
<pre>
      a=mscap:&lt;media caps star&gt; &lt;att field&gt; &lt;att value&gt;
</pre>
<p id="rfc.section.3.3.3.p.2">Where &lt;media caps star&gt; is a (list of) media capability number(s), &lt;att field&gt; is the attribute name, and &lt;att value&gt; is the value field for the named attribute. The media capability numbers may include a wildcard ("*"), which will be used instead of any payload type mappings. In ABNF, we have:</p>
<div id="#rfc.figure.7"></div>
<pre>
       media-specific-capability = "a=mscap:"
                                    media-caps-star
                                    1*WSP att-field ; from RFC4566
                                    1*WSP att-value ; from RFC4566
       media-caps-star	         =  media-cap-star-element
                                      *["," media-cap-star-element]
       media-cap-star-element    = media-cap-num [wildcard] 
                                   / media-cap-num-range [wildcard]
       wildcard                  = "*"

                                    </pre>
<p id="rfc.section.3.3.3.p.3">Given an association between a media capability and a payload type number as specified by the pt= parameters in an lcfg or pcfg attribute line, a mscap line may be translated easily into a conventional SDP attribute line of the form </p>
<p></p>

<ul class="empty"><li>a=&lt;att field&gt;":"&lt;fmt&gt; &lt;att value&gt;   ; &lt;fmt&gt; defined in <a href="#RFC4566">[RFC4566]</a> </li></ul>

<p> </p>
<p id="rfc.section.3.3.3.p.5">A resulting attribute that is not a legal SDP attribute as specified by RFC4566  MUST be ignored by the receiver.</p>
<p id="rfc.section.3.3.3.p.6">If a media capability number (or range) contains a wildcard character at the end, any payload type mapping specified for that media specific capability will be use the wildcard character instead of the payload type.</p>
<p id="rfc.section.3.3.3.p.7">A single mscap line may refer to multiple media capabilities; this is equivalent to multiple mscap lines, each with the same attribute values (but different media capability numbers), one line per media capability. </p>
<p id="rfc.section.3.3.3.p.8">Multiple mscap lines may refer to the same media capability, but, unlike the mfcap attribute, no concatenation operation is defined.  Hence, multiple mscap lines applied to the same media capability is equivalent to multiple lines of the specified attribute in a conventional media record.</p>
<p id="rfc.section.3.3.3.p.9">Here is an example with the rtcp-fb attribute, modified from an example in <a href="#RFC5104">[RFC5104]</a> (with the session-level and audio media omitted).  If the offer contains a media block like the following (note the wildcard character),</p>
<p></p>

<ul class="empty"><li>m=video 51372 RTP/AVP 98<br> a=rtpmap:98 H263-1998/90000<br> a=tcap:1 RTP/AVPF<br> a=rmcap:1 H263-1998/90000<br> a=mscap:1 rtcp-fb ccm tstr<br> a=mscap:1 rtcp-fb ccm fir<br> a=mscap:1* rtcp-fb ccm tmmbr smaxpr=120<br> a=pcfg:1 t=1 m=1 pt=1:98 </li></ul>

<p> </p>
<p id="rfc.section.3.3.3.p.11">and if the proposed configuration is chosen, then the equivalent media block would look like</p>
<p></p>

<ul class="empty"><li>m=video 51372 RTP/AVPF 98<br> a=rtpmap:98 H263-1998/90000<br> a=rtcp-fb:98 ccm tstr<br> a=rtcp-fb:98 ccm fir<br> a=rtcp-fb:* ccm tmmbr smaxpr=120 </li></ul>

<p> </p>
<h1 id="rfc.section.3.3.4">
<a href="#rfc.section.3.3.4">3.3.4.</a> <a href="#configparms" id="configparms">New Configuration Parameters</a>
</h1>
<p id="rfc.section.3.3.4.p.1">Along with the new attributes for media capabilities, new extension parameters are defined for use in the potential configuration, the actual configuration, and/or the new latent configuration defined in <a href="#lcfg">Section 3.3.5</a>.</p>
<h1 id="rfc.section.3.3.4.1">
<a href="#rfc.section.3.3.4.1">3.3.4.1.</a> <a href="#mparm" id="mparm">The Media Configuration Parameter (m=)</a>
</h1>
<p id="rfc.section.3.3.4.1.p.1">The media configuration parameter is used to specify the media encoding(s) and related parameters for a potential, actual, or latent configuration.  Adhering to the ABNF for extension-config-list in <a href="#RFC5939">[RFC5939]</a> with </p>
<div id="#rfc.figure.8"></div>
<pre>
          ext-cap-name = "m"
          ext-cap-list = media-cap-num-list
                         [*(BAR media-cap-num-list)]
                                          </pre>
<p id="rfc.section.3.3.4.1.p.2">we have </p>
<div id="#rfc.figure.9"></div>
<pre>
           media-config-list = ["+"]"m=" media-cap-num-list
                               [*(BAR media-cap-num-list)]
                                 ; BAR is defined in RFC5939
           ; media-cap-num-list is defined above
                                           </pre>
<p id="rfc.section.3.3.4.1.p.3">Alternative media configurations are separated by a vertical bar ("|").  The alternatives are ordered by preference, most-preferred first.  When media capabilities are not included in a potential configuration at the media level, the media type and media format from the associated "m=" line will be used.  The use of the plus sign ("+") is described in RFC5939.  </p>
<h1 id="rfc.section.3.3.4.2">
<a href="#rfc.section.3.3.4.2">3.3.4.2.</a> <a href="#ptparm" id="ptparm">The Payload Type Number Mapping Parameter (pt=)</a>
</h1>
<p id="rfc.section.3.3.4.2.p.1">The payload type number mapping parameter is used to specify the payload type number to be associated with each media type in a potential, actual, or latent configuration. We define the payload type number mapping parameter, payload-number-config-list, in accordance with the extension-config-list format defined in <a href="#RFC5939">[RFC5939]</a>.  In ABNF: </p>
<div id="#rfc.figure.10"></div>
<pre>
         payload-number-config-list = ["+"]"pt=" media-map-list
         media-map-list = media-map *["," media-map]
         media-map = media-cap-num ":" payload-type-number 
                       ; media-cap-num is defined in 3.3.1
         payload-type-number = 1*3(DIGIT) ; RTP payload type number
                               / "*"      ; dummy
                                          </pre>
<p id="rfc.section.3.3.4.2.p.2">The example in <a href="#ptsubs">Section 3.3.7</a> shows how the parameters from the rmcap line are mapped to payload type numbers from the pcfg "pt" parameter.  The use of the plus sign ("+") is desribed in RFC5939.</p>
<p id="rfc.section.3.3.4.2.p.3">The "*" value for payload-type-number is used in cases such as BFCP <a href="#RFC4583">[RFC4583]</a> in which the fmt list in the m-line is ignored.</p>
<p id="rfc.section.3.3.4.2.p.4">A latent configuration represents a future capability, hence the pt= parameter is not directly meaningful in the lcfg attribute because no actual media session is being offered or accepted; it is permitted in order to tie any payload type number parameters within attributes to the proper media format.  A primary example is the case of format parameters for the Redundant Audio Data (RED) payload, which are payload type numbers.  Specific payload type numbers used in a latent configuration MAY be interpreted as suggestions to be used in any future offer based on the latent configuration, but they are not binding; the offerer and/or answerer may use any payload type numbers each deems appropriate.  The use of explicit payload type numbers for latent configurations can be avoided by use of the parameter substitution rule of <a href="#ptsubs">Section 3.3.7</a> .  Future extensions are also permitted.</p>
<h1 id="rfc.section.3.3.4.3">
<a href="#rfc.section.3.3.4.3">3.3.4.3.</a> <a href="#mtparm" id="mtparm">The Media Type Parameter</a>
</h1>
<p id="rfc.section.3.3.4.3.p.1">When a latent configuration is specified (always at the media level), indicating the ability to support an additional media stream, it is necessary to specify the media type (audio, video, etc.) as well as the format and transport type.  The media type parameter is defined in ABNF as</p>
<div id="#rfc.figure.11"></div>
<pre>
         media-type = ["+"] "mt=" media; media defined in RFC4566
                                         </pre>
<p id="rfc.section.3.3.4.3.p.2">At present, the media-type parameter is used only in the latent configuration attribute, and the use of the "+" prefix to specify that the entire attribute line is to be ignored if the mt= parameter is not understood, is unnecessary.  However, if the media-type parameter is later added to an existing capability attribute such as pcfg, then the "+" would be useful.  The media format(s) and transport type(s) are specified using the media configuration parameter ("+m=") defined above, and the transport parameter ("t=") defined in <a href="#RFC5939">[RFC5939]</a>, respectively.</p>
<h1 id="rfc.section.3.3.5">
<a href="#rfc.section.3.3.5">3.3.5.</a> <a href="#lcfg" id="lcfg">The Latent Configuration Attribute</a>
</h1>
<p id="rfc.section.3.3.5.p.1">One of the goals of this work is to permit the exchange of supportable media configurations in addition to those offered or accepted for immediate use.  Such configurations are referred to as "latent configurations".  For example, a party may offer to establish a session with an audio stream, and, at the same time, announce its ability to support a video stream as part of the same session.  The offerer can supply its video capabilities by offering one or more latent video configurations along with the media stream for audio; the responding party may indicate its ability and willingness to support such a video session by returning a corresponding latent configuration.</p>
<p id="rfc.section.3.3.5.p.2">Latent configurations returned in SDP answers must match offered latent configurations (or parameter subsets thereof).  Therefore, it is appropriate for the offering party to announce most, if not all, of its capabilities in the initial offer.  This choice has been made in order to keep the size of the answer more compact by not requiring acap, rmcap, tcap, etc. lines in the answer. </p>
<p id="rfc.section.3.3.5.p.3">Latent configurations may be announced by use of the latent configuration attribute, which is defined in a manner very similar to the potential configuration attribute.  The latent configuration attribute combines the properties of a media line and a potential configuration.  The media type (mt=) and the transport protocol(s) (t=) MUST be specified since the latent configuration is independent of any media line present.  In most cases, the media configuration (m=) parameter MUST be present as well (see <a href="#examples">Section 4</a> for examples).  The lcfg attribute is a media level attribute and, like a media line, it ends the session level of the session description if it appears before any media line.</p>
<p id="rfc.section.3.3.5.p.4">Each media line in an SDP description represents an offered simultaneous media stream, whereas each latent configuration represents an additional stream which may be negotiated in a future offer/answer exchange.  Session capability attributes may be used to determine whether a latent configuration may be used to form an offer for an additional simultaneous stream or to reconfigure an existing stream in a subsequent offer/answer exchange. </p>
<p id="rfc.section.3.3.5.p.5">The latent configuration attribute is of the form:</p>
<div id="#rfc.figure.12"></div>
<pre>
     a=lcfg:&lt;config-number&gt; &lt;latent-cfg-list&gt;
                                    </pre>
<p id="rfc.section.3.3.5.p.6">which adheres to the <a href="#RFC4566">[RFC4566]</a> "attribute" production with att-field and att-value defined as:</p>
<div id="#rfc.figure.13"></div>
<pre>
     att-field  = "lcfg"
     att-value  = config-number 1*WSP lcfg-cfg-list
     config-number   = 1*10(DIGIT)  ; defined in RFC5234
     lcfg-cfg-list = media-type 1*WSP pot-cfg-list
                                 ; as defined in RFC5939
                                 ; and extended herein
                                     </pre>
<p id="rfc.section.3.3.5.p.7">The media-type (mt=) parameter identifies the media type (audio, video, etc.) to be associated with the latent media stream, and MUST be present.  The pot-cfg-list MUST contain a transport-protocol-config-list (t=) parameter and a media-config-list (m=) parameter.  The pot-cfg-list MUST NOT contain more than one instance of each type of parameter list.  As specified in <a href="#RFC5939">[RFC5939]</a>, the use of the "+" prefix with a parameter indicates that the entire configuration MUST be ignored if the parameter is not understood; otherwise, the parameter itself may be ignored.</p>
<p id="rfc.section.3.3.5.p.8">Media stream payload numbers are not assigned by a latent configuration.  Assignment will take place if and when the corresponding stream is actually offered via an m-line in a later exchange.  The payload-number-config-list is included as a parameter to the lcfg attribute in case it is necessary to tie payload numbers in attribute capabilities to specific media capabilities.</p>
<p id="rfc.section.3.3.5.p.9">If an lcfg attribute invokes an acap attribute that appears at the session level, then that attribute will be expected to appear at the session level of a subsequent offer when and if a corresponding media stream is offered.  Otherwise, acap attributes which appear at the media level represent media-level attributes.  Note, however, that rmcap, omcap, mfcap, mscap, and tcap attributes may appear at the session level because they always result in media-level attributes or m-line parameters.</p>
<p id="rfc.section.3.3.5.p.10">The configuration numbers for latent configurations do not imply a preference; the offerer will imply a preference when actually offering potential configurations derived from latent configurations negotiated earlier.  Note however that the offerer of latent configurations MAY specify preferences for combinations of potential and latent configurations by use of the sescap attribute defined in <a href="#sescap">Section 3.3.8</a>.  For example, if an SDP offer contains, say, an audio stream with pcfg:1,  and two latent video configurations, lcfg:2, and lcfg:3, then a session with one audio stream and one video stream could be specified by including "a=sescap:1 1,2|3".  One audio stream and two video streams could be specified by including "a=sescap:2 1,2,3" in the offer.  In order to permit combinations of latent and potential configurations in session capabilities, latent configuration numbers MUST be different from those used for potential configurations.  This restriction is especially important if the offerer does not require cmed-v0 capability and the recipient of the offer doesn't support it.  If the lcfg attribute is not recognized, the capability attributes intended to be associated with it may be confused with those associated with a potential configuration of some other media stream.</p>
<p id="rfc.section.3.3.5.p.11">If a cryptographic attribute, such as the SDES "a=crypto:" attribute <a href="#RFC4568">[RFC4568]</a>, is referenced by a latent configuration through an acap attribute, any keying material required in the conventional attribute, such as the SDES key/salt string, MUST be included in order to satisfy formatting rules for the attribute.  The actual value(s) of the keying material SHOULD be meaningless, and the receiver of the lcfg attribute MUST ignore the values.</p>
<h1 id="rfc.section.3.3.6">
<a href="#rfc.section.3.3.6">3.3.6.</a> <a href="#pcfg" id="pcfg">Enhanced Potential Configuration Attribute</a>
</h1>
<p id="rfc.section.3.3.6.p.1">The present work requires new extensions (parameters) for the pcfg attribute defined in the base protocol <a href="#RFC5939">[RFC5939]</a>.  The parameters and their definitions are "borrowed" from the definitions provided for the latent configuration attribute in <a href="#lcfg">Section 3.3.5</a>.  The expanded ABNF definition of the pcfg attribute is</p>
<p></p>

<ul class="empty"><li>a=pcfg: &lt;config-number&gt; [&lt;pot-cfg-list&gt;]					</li></ul>

<p> </p>
<p id="rfc.section.3.3.6.p.3">where</p>
<p></p>

<ul class="empty"><li>config-number  = 1*DIGIT ;defined in <a href="#RFC5234">[RFC5234]</a> <br> pot-cfg-list   = pot-config *(1*WSP pot-config) <br> pot-config     = / attribute-config-list / ;def in <a href="#RFC5939">[RFC5939]</a> <br> transport-protocol-config-list /  ;defined in <a href="#RFC5939">[RFC5939]</a><br> extension-config-list /  ;<a href="#RFC5939">[RFC5939]</a><br> media-config-list /  ; <a href="#mparm">Section 3.3.4.1</a><br> payload-number-config-list  ; <a href="#ptparm">Section 3.3.4.2</a> </li></ul>

<p> </p>
<p id="rfc.section.3.3.6.p.5">Except for the extension-config-list, the pot-cfg-list MUST NOT contain more than one instance of each parameter list.</p>
<h1 id="rfc.section.3.3.6.1">
<a href="#rfc.section.3.3.6.1">3.3.6.1.</a> <a href="#answercaps" id="answercaps">Returning Capabilities in the Answer</a>
</h1>
<p id="rfc.section.3.3.6.1.p.1">Potential and/or latent configuration attributes may be returned within an answer SDP to indicate the ability of the answerer to support alternative configurations of the corresponding stream(s).  For example, an offer may include multiple potential configurations for a media stream and/or latent configurations for additional streams; the corresponding answer will indicate (via an acfg attribute) the configuration accepted and used to construct the base configuration for each active media stream in the reply, but the reply MAY also contain potential and/or latent configuration attributes, with parameters, to indicate which other offered configurations would be acceptable.  This information is useful if it becomes desirable to reconfigure a media stream, e.g., to reduce resource consumption. </p>
<p id="rfc.section.3.3.6.1.p.2">When potential and/or latent configurations are returned in an answer, all numbering MUST refer to the configuration and capability attribute numbering of the offer.  The offered capability attributes need not be returned in the answer.  The answer MAY include additional capability attributes and/or configuratons (with distinct numbering).  The parameter values of any returned pcfg or lcfg attributes MUST be a subset of those included in the offered configurations or those added by the answerer; values may be omitted only if they were indicated as alternative sets, or optional, in the original offer.  The parameter set indicated in the returned acfg attribute need not be repeated in a returned pcfg attribute.  The answerer may return more than one pcfg attribute with the same configuration number if it is necessary to describe selected combinations of optional or alternative parameters.</p>
<p id="rfc.section.3.3.6.1.p.3">Similarly, one or more session capability attributes (a=sescap) may be returned to indicate which of the offered session capabilities is/are supportable by the answerer (see <a href="#sescap">Section 3.3.8</a>.)</p>
<p id="rfc.section.3.3.6.1.p.4">Note that, although the answerer MAY return capabilities beyond those included by the offerer, these capabilities MUST NOT be used to form any base level media description in the answer.  For this reason, it is advisable for the offerer to include most, if not all, potential and latent configurations it can support in the initial offer, unless the size of the resulting SDP is a concern.  Either party MAY later announce additional capabilities by renegotiating the session in a second offer/answer exchange.</p>
<h1 id="rfc.section.3.3.6.2">
<a href="#rfc.section.3.3.6.2">3.3.6.2.</a> <a href="#ptmaping" id="ptmaping">Payload Type Number Mapping</a>
</h1>
<p id="rfc.section.3.3.6.2.p.1">When media capabilities defined in rmcap attributes are used in potential configuration lines, the transport protocol uses RTP and it is necessary to assign payload type numbers.  In some cases, it is desirable to assign different payload type numbers to the same media capability when used in different potential configurations.  One example is when configurations for AVP and SAVP are offered: the offerer would like the answerer to use different payload type numbers for encrypted and unencrypted media so that it (the offerer) can decide whether or not to render early media which arrives before the answer is received.  This association of distinct payload type number(s) with different transport protocols requires a separate pcfg line for each protocol.  Clearly, this technique cannot be used if the number of potential configurations exceeds the number of possible payload type numbers.</p>
<h1 id="rfc.section.3.3.6.3">
<a href="#rfc.section.3.3.6.3">3.3.6.3.</a> <a href="#mediaattrs" id="mediaattrs">Processing of Media-Format-Related Conventional Attributes for Potential Configurations</a>
</h1>
<p id="rfc.section.3.3.6.3.p.1">In cases in which media capabilities negotiation is employed, SDP records are likely to contain conventional attributes such as rtpmap, fmtp, and other media-format-related lines, as well as capability attributes such as rmcap, omcap, mfcap, and mscap which map into those conventional attributes when invoked by a potential configuration.  In such cases, it MAY be appropriate to employ the delete-attributes option <a href="#RFC5939">[RFC5939]</a> in the attribute configuration list parameter in order to avoid the generation of conflicting fmtp attributes for a particular configuration.  Any media-specific attributes in the media block which refer to media formats not used by the potential configuration MUST be ignored.</p>
<p id="rfc.section.3.3.6.3.p.2">For example:</p>
<p></p>

<ul class="empty"><li>v=0<br> o=- 25678 753849 IN IP4 192.0.2.1<br> s=<br> c=IN IP4 192.0.2.1<br> t=0 0<br> a=creq:med-v0<br> m=audio 3456 RTP/AVP 0 18 100<br> a=rtpmap:100 telephone-events<br> a=fmtp:100 0-11<br> a=rmcap:1 PCMU/8000<br> a=rmcap:2 g729/8000<br> a=rmcap:3 telephone-events/8000<br> a=mfcap:3 0-15<br> a=pcfg:1 m=2,3|1,3 a=-m pt=1:0,2:18,3:100<br> a=pcfg:2 </li></ul>

<p> </p>
<p id="rfc.section.3.3.6.3.p.4">In this example, PCMU is media capability 1, G729 is media capability 2, and telephone-event is media capability 3.  The a=pcfg:1 line specifies that the preferred configuration is G.729 with extended dtmf events, second is G.711 mu-law with extended dtmf events, and the base media-level attributes are to be deleted.  Intermixing of G.729, G.711, and "commercial" dtmf events is least preferred (the base configuration provided by the "m=" line, which is, by default, the least preferred configuration).  The rtpmap and fmtp attributes of the base configuration are replaced by the rmcap and mfcap attributes when invoked by the proposed configuration.</p>
<p id="rfc.section.3.3.6.3.p.5">If the preferred configuration is selected, the SDP answer will look like</p>
<p></p>

<ul class="empty"><li>v=0<br> o=- 25678 753849 IN IP4 192.0.2.1<br> s=<br> c=IN IP4 192.0.2.1<br> t=0 0<br> a=csup:med-v0<br> m=audio 6543 RTP/AVP 18 100<br> a=rtpmap:100 telephone-events/8000<br> a=fmtp:100 0-15<br> a=acfg:1 m=2,3 pt=1:0,2:18,3:100 </li></ul>

<p> </p>
<h1 id="rfc.section.3.3.7">
<a href="#rfc.section.3.3.7">3.3.7.</a> <a href="#ptsubs" id="ptsubs">Substitution of Media Payload Type Numbers in Capability Attribute Parameters</a>
</h1>
<p id="rfc.section.3.3.7.p.1">In some cases, for example, when an RFC 2198 redundancy audio subtype (RED) capability is defined in an mfcap attribute, the parameters to an attribute may contain payload type numbers.  Two options are available for specifying such payload type numbers.  They may be expressed explicitly, in which case they are bound to actual payload types by means of the payload type number parameter (pt=) in the appropriate potential or latent configuration.  For example, the following SDP fragment defines a potential configuration with redundant G.711 mu-law:</p>
<p></p>

<ul class="empty"><li>m=audio 45678 RTP/AVP 0<br> a=rtpmap:0 PCMU/8000<br> a=rmcap:1 PCMU/8000<br> a=rmcap:2 RED/8000<br> a=mfcap:2 0/0<br> a=pcfg:1 m=2,1 pt=2:98,1:0 </li></ul>

<p> </p>
<p id="rfc.section.3.3.7.p.3">The potential configuration is then equivalent to</p>
<p></p>

<ul class="empty"><li>m=audio 45678 RTP/AVP 98 0<br> a=rtpmap:0 PCMU/8000<br> a=rtpmap:98 RED/8000<br> a=fmtp:98 0/0 </li></ul>

<p> </p>
<p id="rfc.section.3.3.7.p.5">A more general mechanism is provided via the parameter substitution rule.  When an mfcap, mscap, or acap attribute is processed, its arguments will be scanned for a payload type number escape sequences of the following form (in ABNF):</p>
<p></p>

<ul class="empty"><li>ptn-esc = "%m=" media-cap-num "%"   ; defined in 3.3.1 </li></ul>

<p> </p>
<p id="rfc.section.3.3.7.p.7">If the sequence is found, the sequence is replaced by the payload type number assigned to the media capability number, as specified by the pt= parameter in the selected potential configuration; only actual payload type numbers are supported - wildcards are excluded.  The sequence "%%" (null digit string) is replaced by a single percent sign and processing continues with the next character, if any.  </p>
<p id="rfc.section.3.3.7.p.8">For example, the above offer sequence could have been written as</p>
<p></p>

<ul class="empty"><li>m=audio 45678 RTP/AVP 0<br> a=rtpmap:0 PCMU/8000<br> a=rmcap:1 PCMU/8000<br> a=rmcap:2 RED/8000<br> a=mfcap:2 %m=1%/%m=1%<br> a=pcfg:1 m=2,1 pt=2:98,1:0<br> </li></ul>

<p> </p>
<p id="rfc.section.3.3.7.p.10">and the equivalent SDP is the same as above.</p>
<h1 id="rfc.section.3.3.8">
<a href="#rfc.section.3.3.8">3.3.8.</a> <a href="#sescap" id="sescap">The Session Capability Attribute</a>
</h1>
<p id="rfc.section.3.3.8.p.1">The session capability attribute provides a means for the offerer and/or the answerer to specify combinations of specific media stream configurations which it is willing and able to support.  Each session capability in an offer or answer MAY be expressed as a list of required potential configurations, and MAY include a list of optional potential and/or latent configurations.  </p>
<p id="rfc.section.3.3.8.p.2">The choices of session capabilities may be based on processing load, total bandwidth, or any other criteria of importance to the communicating parties.  If the answerer supports media capabilities negotiation, and session configurations are offered, it MUST accept one of the offered configurations, or it MUST refuse the session.  Therefore, if the offer includes any session capabilities, it SHOULD include all the session capabilities the offerer is willing to support.</p>
<p id="rfc.section.3.3.8.p.3">The session capability attribute is described by:</p>
<div id="#rfc.figure.14"></div>
<pre>
	"a=sescap:" &lt;session num&gt; &lt;list of configs&gt;
		                        </pre>
<p id="rfc.section.3.3.8.p.4">which corresponds to the standard value attribute definition with</p>
<div id="#rfc.figure.15"></div>
<pre>
        att-field        = "sescap"
        att-value        = session-num 1*WSP list-of-configs
                           [1*WSP optional-configs]
        session-num      = 1*10(DIGIT)  ; defined in RFC5234
        list-of-configs  = alt-config *["," alt-config]
        optional-configs = "[" list-of-configs "]"
        alt-config       = config-number *["|" config-number]
                          ; config-number defined in RFC5939
		                         </pre>
<p id="rfc.section.3.3.8.p.5">The session-num identifies the session; a lower-number session is preferred over a higher-numbered session.  Each alt-config list specifies alternative media configurations within the session; preference is based on config-num as specified in <a href="#RFC5939">[RFC5939]</a>.  Note that the session preference order, when present, takes precedence over the individual media stream configuration preference order.</p>
<p id="rfc.section.3.3.8.p.6">Use of session capability attributes requires that configuration numbers assigned to potential and latent configurations MUST be unique across the entire session; <a href="#RFC5939">[RFC5939]</a> requires only that pcfg configuration numbers be unique within a media description.</p>
<p id="rfc.section.3.3.8.p.7">As an example, consider an endpoint that is capable of supporting an audio stream with either one H.264 video stream or two H.263 video streams with a floor control stream.  The SDP offer might look like the following (offering audio, two H.263 video streams and BFCP)- the empty lines are added for readability only (not part of valid SDP):</p>
<p></p>

<ul class="empty"><li>v=0<br> o=- 25678 753849 IN IP4 192.0.2.1<br> s=<br> c=IN IP4 192.0.2.1<br> t=0 0<br> a=creq:med-v0<br> a=sescap:2 1,2,3,5<br> a=sescap:1 1,4<br> <br><br> m=audio 54322 RTP/AVP 0<br> a=rtpmap:0 PCMU/8000<br> a=pcfg:1<br> <br><br> m=video 22344 RTP/AVP 102<br> a=rtpmap:102 H263-1998/90000<br> a=fmtp:102 CIF=4;QCIF=2;F=1;K=1<br> i= main video stream<br> a=label:11<br> a=pcfg:2<br> a=rmcap:1 H264/90000<br> a=mfcap:1 profile-level-id=42A01E; packetization-mode=2<br> a=acap:1 label:13<br> a=pcfg:4 m=1 a=1 pt=1:104<br> <br><br> m=video 33444 RTP/AVP 103<br> a=rtpmap:103 H263-1998/90000<br> a=fmtp:103 CIF=4;QCIF=2;F=1;K=1<br> i= secondary video (slides)<br> a=label:12<br> a=pcfg:3<br> <br><br> m=application 33002 TCP/BFCP *<br> a=setup:passive<br> a=connection:new<br> a=floorid:1 m-stream:11 12<br> a=floor-control:s-only<br> a=confid:4321<br> a=userid:1234<br> a=pcfg:5 </li></ul>

<p> </p>
<p id="rfc.section.3.3.8.p.9">If the answerer understands MediaCapNeg, but cannot support the Binary Floor Control Protocol, then it would respond with (invalid empty lines in SDP included again for readability):</p>
<p></p>

<ul class="empty"><li>v=0<br> o=- 25678 753849 IN IP4 192.0.2.1<br> s=<br> c=IN IP4 192.0.2.22<br> t=0 0<br> a=csup:med-v0<br> a=sescap:1 1,4<br> <br><br> m=audio 23456 RTP/AVP 0<br> a=rtpmap:0 PCMU/8000<br> a=acfg:1<br> <br><br> m=video 41234 RTP/AVP 104<br> a=rtpmap:100 H264/90000<br> a=fmtp:104 profile-level-id=42A01E; packetization-mode=2<br> a=acfg:4 m=1 a=1 pt=1:104<br> <br><br> m=video 0 RTP/AVP 103<br> a=acfg:3<br> <br><br> m=application 0 TCP/BFCP *<br> a=acfg:5 </li></ul>

<p> </p>
<p id="rfc.section.3.3.8.p.11">An endpoint that doesn't support Media capabilities negotiation, but does support H.263 video, would respond with one or two H.263 video streams.  In the latter case, the answerer may issue a second offer to reconfigure the session to one audio and one video channel using H.264 or H.263. </p>
<p id="rfc.section.3.3.8.p.12">Session capabilities can include latent capabilities as well.  Here's a similar example in which the offerer wishes to initially establish an audio stream, and prefers to later establish two video streams with chair control.  If the answerer doesn't understand Media CapNeg, or cannot support the dual video streams or flow control, then it may support a single H.264 video stream.  Note that establishment of the most favored configuration will require two offer/answer exchanges.</p>
<p></p>

<ul class="empty"><li>v=0<br> o=- 25678 753849 IN IP4 192.0.2.1<br> s=<br> c=IN IP4 192.0.2.1<br> t=0 0<br> a=creq:med-v0<br> a=sescap:1 1,3,4,5<br> a=sescap:2 1,2<br> a=sescap:3 1<br> <br> a=rmcap:1 H263-1998/90000<br> a=mfcap:1 CIF=4;QCIF=2;F=1;K=1<br> a=tcap:1 RTP/AVP TCP/BFCP<br> <br> m=audio 54322 RTP/AVP 0<br> a=rtpmap:0 PCMU/8000<br> a=label:11<br> a=pcfg:1<br> <br> m=video 22344 RTP/AVP 102<br> a=rtpmap:102 H264/90000<br> a=fmtp:102 profile-level-id=42A01E; packetization-mode=2<br> a=label:11<br> a=content:main<br> a=pcfg:2 <br> a=lcfg:3 mt=video t=1 m=1 a=31,32 i=3<br> a=acap:31 label:12<br> a=acap:32 content:main<br> <br> a=lcfg:4 mt=video t=1 m=1 a=41,42 i=4<br> a=acap:41 label:13<br> a=acap:42 content:slides<br> <br> a=lcfg:5 mt=application m=51 t=51<br> a=tcap:51 TCP/BFCP<br> a=rmcap:51 * <br> a=acap:51 setup:passive<br> a=acap:52 connection:new<br> a=acap:53 floorid:1 m-stream:12 13<br> a=acap:54 floor-control:s-only<br> a=acap:55 confid:4321<br> a=acap:56 userid:1234<br> </li></ul>

<p> </p>
<p id="rfc.section.3.3.8.p.14">In this example, the default offer, as seen by endpoints which do not understand capabilities negotiation, proposes a PCMU audio stream and an H.264 video stream.  Note that the offered lcfg lines for the video streams don't carry pt= parameters because they're not needed (payload type numbers will be assigned in the offer/answer exchange that establishes the streams).  Note also that the three rmcap, mfcap, and tcap attributes used by lcfg:3 and lcfg:4 are included at the session level so they may be referenced by both latent configurations.  As per <a href="#newattrs">Section 3.3</a>, the media attributes generated from the rmcap, mfcap, and tcap attributes are always media-level attributes.   If the answerer supports Media CapNeg, and supports the most desired configuration, it would return the following SDP: </p>
<p></p>

<ul class="empty"><li>v=0<br> o=- 25678 753849 IN IP4 192.0.2.1<br> s=<br> c=IN IP4 192.0.2.22<br> t=0 0<br> a=csup:med-v0<br> a=sescap:1 1,3,4,5<br> a=sescap:2 1,2<br> a=sescap:3 1<br> <br> m=audio 23456 RTP/AVP 0<br> a=rtpmap:0 PCMU/8000<br> a=acfg:1<br> <br> m=video 0 RTP/AVP 102<br> a=pcfg:2 <br> a=lcfg:3 mt=video t=1 m=1 a=31,32<br> <br> a=lcfg:4 mt=video t=1 m=1 a=41,42 <br> <br> a=lcfg:5 mt=application t=2<br> </li></ul>

<p> </p>
<p id="rfc.section.3.3.8.p.16">This exchange supports immediate establishment of an audio stream for preliminary conversation.  This exchange would presumably be followed at the appropriate time with a "reconfiguration" offer/answer exchange to add the video and chair control streams.</p>
<h1 id="rfc.section.3.4">
<a href="#rfc.section.3.4">3.4.</a> <a href="#oaext" id="oaext">Offer/Answer Model Extensions</a>
</h1>
<p id="rfc.section.3.4.p.1">EDITOR'S NOTE: SECTION NEEDS MORE ELABORATE PROCEDURES</p>
<p id="rfc.section.3.4.p.2">In this section, we define extensions to the offer/answer model defined in RFC3264 <a href="#RFC3264">[RFC3264]</a> and <a href="#RFC5939">[RFC5939]</a>  to allow for media capabilities, bandwidth capabilities, and latent configurations to be used with the SDP Capability Negotiation framework.</p>
<p id="rfc.section.3.4.p.3">The <a href="#RFC5939">[RFC5939]</a> provides a relatively compact means to offer the equivalent of an ordered list of alternative media stream configurations (as would be described by separate m= lines and associated attributes).  The  attributes acap, mscap, mfcap and rmcap are designed to map somewhat straightforwardly into equivalent m= lines and conventional attributes when invoked by a pcfg, lcfg, or acfg attribute with appropriate parameters.  The a=pcfg: lines, along with the m= line itself, represent offered media configurations.  The a=lcfg: lines represent alternative capabilities for future use.</p>
<h1 id="rfc.section.3.4.1">
<a href="#rfc.section.3.4.1">3.4.1.</a> <a href="#offergen" id="offergen">Generating the Initial Offer</a>
</h1>
<p id="rfc.section.3.4.1.p.1">When an endpoint generates an initial offer and wants to use the functionality described in the current document, it should identify and define the codecs it can support via rmcap, mfcap and mscap attributes.  The SDP media line(s) should be made up with the configuration to be used if the other party does not understand capability negotiations (by default, this is the least preferred configuration).  Typically, the media line configuration will contain the minimum acceptable capabilities.  The offer MUST include the level of capability negotiation extensions needed to support this functionality in a "creq" attribute.	</p>
<p id="rfc.section.3.4.1.p.2">Preferred configurations for each media stream are identified following the media line.  The present offer may also include latent configuration (lcfg) attributes, at the media level, describing media streams and/or configurations the offerer is not now offering, but which it is willing to support in a future offer/answer exchange.  A simple example might be the inclusion of a latent video configuration in an offer for an audio stream.</p>
<h1 id="rfc.section.3.4.2">
<a href="#rfc.section.3.4.2">3.4.2.</a> <a href="#answergen" id="answergen">Generating the Answer </a>
</h1>
<p id="rfc.section.3.4.2.p.1">When the answering party receives the offer and if it supports the required capability negotiation extensions, it should select the most-preferred configuration it can support for each media stream, and build its answer accordingly.  The configuration selected for each accepted media stream is placed into the answer as a media line with associated parameters and attributes.  If a proposed configuration is chosen, the answer must include the supported extension attribute and each media stream for which a proposed configuration was chosen must contain an actual configuration (acfg) attribute to indicate just which pcfg attribute was used to build the answer.  The answer should also include any potential or latent configurations the answerer can support, especially any configurations compatible with other potential or latent configurations received in the offer.  The answerer should make note of those configurations it might wish to offer in the future.				</p>
<h1 id="rfc.section.3.4.3">
<a href="#rfc.section.3.4.3">3.4.3.</a> <a href="#ansproc" id="ansproc">Offerer Processing of the Answer </a>
</h1>
<p id="rfc.section.3.4.3.p.1">When the offerer receives the answer, it should make note of any capabilities and/or latent configurations for future use.  The media line(s) must be processed in the normal way to identify the media stream(s) accepted by the answer, if any.  The acfg attribute, if present, may be used to verify the proposed configuration used to form the answer, and to infer the lack of acceptability of higher- preference configurations that were not chosen.  Note that the base specification <a href="#RFC5939">[RFC5939]</a> requires the answerer to choose the highest preference configuration it can support, subject to local policies.				</p>
<h1 id="rfc.section.3.4.4">
<a href="#rfc.section.3.4.4">3.4.4.</a> <a href="#sesmod" id="sesmod">Modifying the Session</a>
</h1>
<p id="rfc.section.3.4.4.p.1">If, at a later time, one of the parties wishes to modify the operating parameters of a session, e.g., by adding a new media stream, or by changing the properties used on an existing stream, it may do so via the mechanisms defined for offer/answer <a href="#RFC3264">[RFC3264]</a>.  If the initiating party has remembered the codecs, potential configurations, and latent configurations announced by the other party in the earlier negotiation, it may use this knowledge to maximize the likelihood of a successful modification of the session.  Alternatively, the initiator may perform a new capabilities exchange as part of the reconfiguration.  In such a case, the new capabilities will replace the previously-negotiated capabilities.  This may be useful if conditions change on the endpoint.  </p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#examples" id="examples">Examples</a>
</h1>
<p id="rfc.section.4.p.1">In this section, we provide examples showing how to use the Media Capabilities with the SDP Capability Negotiation.  </p>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> <a href="#altcodecs" id="altcodecs">Alternative Codecs</a>
</h1>
<p id="rfc.section.4.1.p.1">This example provide a choice of one of six variations of the adaptive multirate codec.  In this example, the default configuration as specified by the media line is the same as the most preferred configuration.  Each configuration uses a different payload type number so the offerer can interpret early media.</p>
<p></p>

<ul class="empty"><li>v=0<br> o=- 25678 753849 IN IP4 192.0.2.1<br> s=<br> c=IN IP4 192.0.2.1<br> t=0 0<br> a=creq:med-v0<br> m=audio 54322 RTP/AVP 96<br> rtpmap:96 AMR-WB/16000/1<br> a=fmtp:96 mode-change-capability=1; max-red=220; \ <br> mode-set=0,2,4,7<br> a=rmcap:1,3,5 audio AMR-WB/16000/1<br> a=rmcap:2,4,6 audio AMR/8000/1<br> a=mfcap:1,2,3,4 mode-change-capability=1<br> a=mfcap:5,6 mode-change-capability=2<br> a=mfcap:1,2,3,5 max-red=220<br> a=mfcap:3,4,5,6 octet-align=1 <br> a=mfcap:1,3,5 mode-set=0,2,4,7 <br> a=mfcap:2,4,6 mode-set=0,3,5,6 <br> a=pcfg:1 m=1 pt=1:96<br> a=pcfg:2 m=2 pt=2:97<br> a=pcfg:3 m=3 pt=3:98<br> a=pcfg:4 m=4 pt=4:99 <br> a=pcfg:5 m=5 pt=5:100 <br> a=pcfg:6 m=6 pt=6:101 </li></ul>

<p> </p>
<p id="rfc.section.4.1.p.3">In the above example, media capability 1 could have been excluded from the first rmcap declaration and from the corresponding mfcap attributes, and the pcfg:1 attribute line could have been simply "pcfg:1".</p>
<p id="rfc.section.4.1.p.4">The next example offers a video stream with three options of H.264 and 4 transports.  It also includes an audio stream with different audio qualities: four variations of AMR, or AC3.  The offer looks something like: </p>
<p></p>

<ul class="empty"><li>v=0<br> o=- 25678 753849 IN IP4 192.0.2.1<br> s=An SDP Media NEG example<br> c=IN IP4 192.0.2.1<br> t=0 0<br> a=creq:med-v0<br> a=ice-pwd:speEc3QGZiNWpVLFJhQX <br> m=video 49170 RTP/AVP 100 <br> c=IN IP4 192.0.2.56<br> a=maxprate:1000 <br> a=rtcp:51540 <br> a=sendonly <br> a=candidate 12345 1 UDP 9 192.0.2.56 49170 host <br> a=candidate 23456 2 UDP 9 192.0.2.56 51540 host<br> a=candidate 34567 1 UDP 7 198.51.100.1 41345 srflx raddr \ <br> 192.0.2.56 rport 49170<br> a=candidate 45678 2 UDP 7 198.51.100.1 52567 srflx raddr \ <br> 192.0.2.56 rport 51540<br> a=candidate 56789 1 UDP 3 192.0.2.100 49000 relay raddr \ <br> 192.0.2.56 rport 49170<br> a=candidate 67890 2 UDP 3 192.0.2.100 49001 relay raddr \ <br> 192.0.2.56 rport 51540 <br> b=AS:10000 <br> b=TIAS:10000000 <br> b=RR:4000 <br> b=RS:3000<br> a=rtpmap:100 H264/90000 <br> a=fmtp:100 profile-level-id=42A01E; packetization-mode=2; \ <br> sprop-parameter-sets=Z0IACpZTBYmI,aMljiA==; \ <br> sprop-interleaving-depth=45; sprop-deint-buf-req=64000; \ <br> sprop-init-buf-time=102478; deint-buf-cap=128000  <br> a=tcap:1 RTP/SAVPF RTP/SAVP RTP/AVPF<br> a=rmcap:1-3,7-9 H264/90000<br> a=rmcap:4-6 rtx/90000<br> a=mfcap:1-9 profile-level-id=42A01E<br> a=mfcap:1-9 aMljiA==<br> a=mfcap:1,4,7 packetization-mode=0<br> a=mfcap:2,5,8 packetization-mode=1<br> a=mfcap:3,6,9 packetization-mode=2<br> a=mfcap:1-9 sprop-parameter-sets=Z0IACpZTBYmI<br> a=mfcap:1,7 sprop-interleaving-depth=45; \ <br> sprop-deint-buf-req=64000; sprop-init-buf-time=102478; \ <br> deint-buf-cap=128000<br> a=mfcap:4 apt=100<br> a=mfcap:5 apt=99<br> a=mfcap:6 apt=98<br> a=mfcap:4-6 rtx-time=3000<br> a=mscap:1-6 rtcp-fb nack<br> a=acap:1 crypto:1 AES_CM_128_HMAC_SHA1_80 \ <br> inline:d0RmdmcmVCspeEc3QGZiNWpVLFJhQX1cfHAwJSoj|220|1:32 <br> a=pcfg:1 t=1 m=1,4 a=1 pt=1:100,4:97<br> a=pcfg:2 t=1 m=2,5 a=1 pt=2:99,4:96<br> a=pcfg:3 t=1 m=3,6 a=1 pt=3:98,6:95<br> a=pcfg:4 t=2 m=7 a=1 pt=7:100 <br> a=pcfg:5 t=2 m=8 a=1 pt=8:99<br> a=pcfg:6 t=2 m=9 a=1 pt=9:98<br> a=pcfg:7 t=3 m=1,3 pt=1:100,4:97 <br> a=pcfg:8 t=3 m=2,4 pt=2:99,4:96<br> a=pcfg:9 t=3 m=3,6 pt=3:98,6:95<br> m=audio 49176 RTP/AVP 101 100 99 98 <br> c=IN IP4 192.0.2.56<br> a=ptime:60 <br> a=maxptime:200 <br> a=rtcp:51534 <br> a=sendonly <br> a=candidate 12345 1 UDP 9 192.0.2.56 49176 host <br> a=candidate 23456 2 UDP 9 192.0.2.56 51534 host<br> a=candidate 34567 1 UDP 7 198.51.100.1 41348 srflx \ <br> raddr 192.0.2.56 rport 49176<br> a=candidate 45678 2 UDP 7 198.51.100.1 52569 srflx \ <br> raddr 192.0.2.56 rport 51534<br> a=candidate 56789 1 UDP 3 192.0.2.100 49002 relay \ <br> raddr 192.0.2.56 rport 49176<br> a=candidate 67890 2 UDP 3 192.0.2.100 49003 relay \ <br> raddr 192.0.2.56 rport 51534 <br> b=AS:512 <br> b=TIAS:512000 <br> b=RR:4000 <br> b=RS:3000 <br> a=maxprate:120 <br> a=rtpmap:98 AMR-WB/16000 <br> a=fmtp:98 octet-align=1; mode-change-capability=2<br> a=rtpmap:99 AMR-WB/16000 <br> a=fmtp:99 octet-align=1; crc=1; mode-change-capability=2<br> a=rtpmap:100 AMR-WB/16000/2 <br> a=fmtp:100 octet-align=1; interleaving=30 <br> a=rtpmap:101 AMR-WB+/72000/2 <br> a=fmtp:101 interleaving=50; int-delay=160000; <br> a=rmcap:14 ac3/48000/6 <br> a=acap:23 crypto:1 AES_CM_128_HMAC_SHA1_80 \ <br> inline:d0RmdmcmVCspeEc3QGZiNWpVLFJhQX1cfHAwJSoj|220|1:32<br> a=tcap:4 RTP/SAVP <br> a=pcfg:10 t=4 a=23 <br> a=pcfg:11 t=4 m=14 a=23 pt=14:102 </li></ul>

<p> </p>
<p id="rfc.section.4.1.p.6">This offer illustrates the advantage in compactness that arises if one can avoid deleting the base configuration attributes and recreating them in acap attributes for the potential configurations.</p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> <a href="#altcombos" id="altcombos">Alternative Combinations of Codecs (Session Configurations)</a>
</h1>
<p id="rfc.section.4.2.p.1">If an endpoint has limited signal processing capacity, it might be capable of supporting, say, a G.711 mu-law audio stream in combination with an H.264 video stream, or a G.729B audio stream in combination with an H.263-1998 video stream.  It might then issue an offer like the following:</p>
<p></p>

<ul class="empty"><li>v=0<br> o=- 25678 753849 IN IP4 192.0.2.1<br> s=<br> c=IN IP4 192.0.2.1<br> t=0 0<br> a=creq:med-v0<br> a=sescap:1 2,4<br> a=sescap:2 1,3<br> m=audio 54322 RTP/AVP 18<br> a=rtpmap:18 G729/8000<br> a=fmtp:18 annexb=yes<br> a=rmcap:1 PCMU/8000<br> a=pcfg:1 m=1 pt=1:0<br> a=pcfg:2<br> m=video 54344 RTP/AVP 100<br> a=rtpmap:100 H263-1998/90000<br> a=rmcap:2 H264/90000<br> a=mfcap:2 profile-level-id=42A01E; packetization-mode=2<br> a=pcfg:3 m=2 pt=2:101<br> a=pcfg:4 </li></ul>

<p> </p>
<p id="rfc.section.4.2.p.3">Note that the preferred session configuration (and the default as well) is G.729B with H.263.  This overrides the individual media stream preferences which are PCMU and H.264 by the potential configuration numbering rule.  </p>
<h1 id="rfc.section.4.3">
<a href="#rfc.section.4.3">4.3.</a> <a href="#latentstreams" id="latentstreams">Latent Media Streams</a>
</h1>
<p id="rfc.section.4.3.p.1">Consider a case in which the offerer can support either G.711 mu-law, or G.729B, along with DTMF telephony events for the 12 common touchtone signals, but is willing to support simple G.711 mu-law audio as a last resort.  In addition, the offerer wishes to announce its ability to support video in the future, but does not wish to offer a video stream at present.  The offer might look like the following: </p>
<p></p>

<ul class="empty"><li>v=0<br> o=- 25678 753849 IN IP4 192.0.2.1<br> s=<br> c=IN IP4 192.0.2.1<br> t=0 0<br> a=creq:med-v0<br> m=audio 23456 RTP/AVP 0<br> a=rtpmap:0 PCMU/8000<br> a=rmcap:1 PCMU/8000<br> a=rmcap:2 g729/8000<br> a=rmcap:3 telephone-event/8000<br> a=mfcap:3 0-11<br> a=pcfg:1 m=1,3|2,3 pt=1:0,2:18,3:100 a=lcfg:10 mt=video t=1 m=10|11<br> a=rmcap:10 H263-1998/90000<br> a=rmcap:11 H264/90000<br> a=tcap:1 RTP/AVP<br> </li></ul>

<p> </p>
<p id="rfc.section.4.3.p.3">The lcfg attribute line announces support for H.263 and H.264 video (H.263 preferred) for future reference.  The m-line and the rtpmap attribute offer an audio stream and provide the lowest precedence configuration (PCMU without any DTMF encoding).  The rmcap lines define the media capabilities (PCMU, G729, and telephone-event) to be offered in potential configurations.  The mfcap attribute provides the format parameters for telephone-events, specifying the 12 commercial DTMF 'digits'.  The pcfg attribute line defines the most-preferred media configuration as PCMU plus DTMF events and the next-most-preferred configuration as G.729B plus DTMF events.</p>
<p id="rfc.section.4.3.p.4">If the answerer is able to support all the potential configurations, and also support H.263 video (but not H.264), it would reply with an answer like:</p>
<p></p>

<ul class="empty"><li>v=0<br> o=- 24351 621814 IN IP4 192.0.2.2<br> s=<br> c=IN IP4 192.0.2.2<br> t=0 0<br> a=csup:med-v0<br> m=audio 54322 RTP/AVP 0 100<br> a=rtpmap:0 PCMU/8000<br> a=rtpmap:100 telephone-event/8000<br> a=fmtp:100 0-11<br> a=acfg:1 m=1,3 pt=1:0,3:100<br>  									a=pcfg:1 m=2,3 pt=2:18,3:100 a=lcfg:1 mt=video t=1 m=10<br> </li></ul>

<p> </p>
<p id="rfc.section.4.3.p.6">The lcfg attribute line announces the capability to support H.263 video at a  later time.  The media line and subsequent rtpmap and fmtp attribute lines present the selected configuration for the media stream.  The acfg attribute line identifies the potential configuration from which it was taken, and the pcfg attribute line announces the potential capability to support G.729 with DTMF events as well.  If, at some later time, congestion becomes a problem in the network, either party may, with expectation of success, offer a reconfiguration of the media stream to use G.729 in order to reduce packet sizes.</p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#iana" id="iana">IANA Considerations</a>
</h1>
<h1 id="rfc.section.5.1">
<a href="#rfc.section.5.1">5.1.</a> <a href="#ianaattrs" id="ianaattrs">New SDP Attributes</a>
</h1>
<p id="rfc.section.5.1.p.1">The IANA is hereby requested to register the following new SDP attributes:</p>
<p></p>

<ul class="empty"><li>Attribute name:      rmcap<br> Long form name:      RTP-based media capability<br> Type of attribute:   session-level and media-level<br> Subject to charset:  no<br> Purpose:             associate RTP-based media capability number(s) with<br> media subtype and encoding parameters<br> Appropriate Values:  see <a href="#mcap">Section 3.3.1</a> </li></ul>

<p> </p>
<p></p>

<ul class="empty"><li>Attribute name:      omcap<br> Long form name:      Non RTP-based media capability<br> Type of attribute:   session-level and media-level<br> Subject to charset:  no<br> Purpose:             associate non RTP-based media capability number(s) with<br> media subtype and encoding parameters<br> Appropriate Values:  see <a href="#mcap">Section 3.3.1</a> </li></ul>

<p> </p>
<p></p>

<ul class="empty"><li>Attribute name:      mfcap<br> Long form name:      media format capability<br> Type of attribute:   session-level and media-level<br> Subject to charset:  no<br> Purpose:             associate media format attributes and<br> parameters with media format capabilities<br> Appropriate Values:  see <a href="#mfcap">Section 3.3.2</a> </li></ul>

<p> </p>
<p></p>

<ul class="empty"><li>Attribute name:      mscap<br> Long form name:      media-specific capability<br> Type of attribute:   session-level and media-level<br> Subject to charset:  no<br> Purpose:             associate media-specific attributes and<br> parameters with media capabilities<br> Appropriate Values:  see <a href="#mscap">Section 3.3.3</a> </li></ul>

<p> </p>
<p></p>

<ul class="empty"><li>Attribute name:      lcfg<br> Long form name:      latent configuration<br> Type of attribute:   media-level<br> Subject to charset:  no<br> Purpose:             to announce supportable media streams<br> without offering them for immediate use.<br> Appropriate Values:  see <a href="#lcfg">Section 3.3.5</a> </li></ul>

<p> </p>
<p></p>

<ul class="empty"><li>Attribute name:      sescap<br> Long form name:       session capability<br> Type of attribute:   session-level<br> Subject to charset:  no<br> Purpose:             to specify and prioritize acceptable<br> combinations of media stream configurations.<br> Appropriate Values:  see <a href="#sescap">Section 3.3.8</a> </li></ul>

<p> </p>
<h1 id="rfc.section.5.2">
<a href="#rfc.section.5.2">5.2.</a> <a href="#ianaoption" id="ianaoption">New SDP Option Tag</a>
</h1>
<p id="rfc.section.5.2.p.1">The IANA is hereby requested to add the new option tag "med-v0", defined in this document, to the SDP Capability Option Negotiation Capability registry created for <a href="#RFC5939">[RFC5939]</a>.  </p>
<h1 id="rfc.section.5.3">
<a href="#rfc.section.5.3">5.3.</a> <a href="#ianaparms" id="ianaparms">New SDP Capability Negotiation Parameters</a>
</h1>
<p id="rfc.section.5.3.p.1">The IANA is hereby requested to expand the SDP Capability Negotiation Potential Configuration Parameter Registry established by <a href="#RFC5939">[RFC5939]</a> to become the SDP Capability Negotiation Configuration Parameter Registry and to include parameters for the potential, actual and latent configuration attributes.  The new parameters to be registered are the "m" for "media", "pt" for "payload type number", and "mt" for "media type" parameters.  Note that the "mt" parameter is defined for use only in the latent configuration attribute.  </p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#security" id="security">Security Considerations</a>
</h1>
<p id="rfc.section.6.p.1">EDITOR'S NOTE: SECTION NEEDS TO BE EXPANDED</p>
<p id="rfc.section.6.p.2">The security considerations of <a href="#RFC5939">[RFC5939]</a> apply for this document. </p>
<p id="rfc.section.6.p.3">The addition of negotiable media encoding, bandwidth attributes, and connection data in this specification can cause problems for middleboxes which attempt to control bandwidth utilization, media flows, and/or processing resource consumption as part of network policy, but which do not understand the media capability negotiation feature.  As for the initial CapNeg work, the SDP answer is formulated in such a way that it always carries the selected media encoding and bandwidth parameters for every media stream selected.  Pending an understanding of capabilities negotiation, the middlebox should examine the answer SDP to obtain the best picture of the media streams being established.</p>
<p id="rfc.section.6.p.4">As always, middleboxes can best do their job if they fully understand media capabilities negotiation.</p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#verchanges" id="verchanges">Changes from previous versions</a>
</h1>
<h1 id="rfc.section.7.1">
<a href="#rfc.section.7.1">7.1.</a> Changes from version 11</h1>
<p></p>

<ul>
<li>Corrected several statements implying lcfg was a session-level attribute.</li>
<li>Added non-RTP based media format capabilities ("a=omcap") and renamed "mcap" to "rmcap"</li>
</ul>

<p> </p>
<h1 id="rfc.section.7.2">
<a href="#rfc.section.7.2">7.2.</a> Changes from version 10</h1>
<p></p>

<ul>
<li>Defined the latent configuration attribute as a media-level attribute because it specifies a possible future media stream.  Added text to clarify how to specify alternative configurations of a single latent stream and/or multiple streams.</li>
<li>Improved the definition of the session capability attribute to permit both required configurations and optional configurations - latent configurations cannot be required because they have not yet been offered.</li>
<li>Removed the special-case treatment of conflicts between base-level fmtp attributes and fmtp attributes generated for a configuration via invoked mcap and mfcap attributes. </li>
<li>Removed reference to bandwidth capability (bcap) attribute.</li>
<li>Changed various "must", etc., terms to normative terms ("MUST", etc.) as appropriate, in <a href="#lcfg">Section 3.3.5</a><a href="#answercaps">Section 3.3.6.1</a> <a href="#mediaattrs">Section 3.3.6.3</a> and <a href="#sescap">Section 3.3.8</a> </li>
<li>Attempted to clarify the substitution mechanism in <a href="#ptsubs">Section 3.3.7</a> and improve its uniqueness.</li>
<li>Made various editorial changes, including changing the title in the header, and removing numbering from some SDP examples.</li>
</ul>

<p> </p>
<h1 id="rfc.section.7.3">
<a href="#rfc.section.7.3">7.3.</a> Changes from version 09</h1>
<p></p>

<ul>
<li>Additional corrections to latent media stream example in <a href="#latentstreams">Section 4.3</a>
</li>
<li>Fixed up attribute formatting examples and corresponding ABNF.</li>
<li>Removed preference rule for latent configurations.</li>
<li>Various spelling and other editorial changes were made.</li>
<li>updated crossreferences.</li>
</ul>

<p> </p>
<h1 id="rfc.section.7.4">
<a href="#rfc.section.7.4">7.4.</a> Changes from version 08</h1>
<p id="rfc.section.7.4.p.1">The major change is in <a href="#latentstreams">Section 4.3</a>, Latent Media Streams, fixing the syntax of the answer. All the other changes are editorial.</p>
<h1 id="rfc.section.7.5">
<a href="#rfc.section.7.5">7.5.</a> Changes from version 04</h1>
<p></p>

<ul>
<li>The definitions for bcap, ccap, icap, and kcap attributes have been removed, and are to be defined in another document.</li>
<li>Corrected formatting of m= and p= configuration parameters to conform to extension-config-list form defined in <a href="#RFC5939">[RFC5939]</a> </li>
<li>Reorganized definitions of new parameters to make them easier to find in document.</li>
<li>Added ability to renegotiate capabilities when modifying the session (<a href="#sesmod">Section 3.4.4</a>).</li>
<li>Made various editorial changes, clarifications, and typo corrections.</li>
</ul>

<p> </p>
<h1 id="rfc.section.7.6">
<a href="#rfc.section.7.6">7.6.</a> Changes from version 03</h1>
<p></p>

<ul>
<li>A new session capability attribute (sescap) has been added to permit specification of acceptable media stream combinations.</li>
<li>Capability attribute definitions corresponding to the i, c, b, and k SDP line types have been added for completeness.</li>
<li>Use of the pcfg: attribute in SDP answers has been included in order to conveniently return information in the answer about acceptable configurations in the media stream offer.</li>
<li>The use of the lcfg: attribute(s) in SDP answers has been restricted to indicate just which latent configuration offers would be acceptable to the answerer.</li>
<li>A suggestion for "naive" middleboxes has been added to the Security Considerations.</li>
<li>Various editorial changes have been made.</li>
<li>Several errors/omissions have been corrected.</li>
<li>The description of the mscap attribute has been modified to make it clear that it should not be used to generate undefined SDP attributes, or to "extend" existing attributes.</li>
<li>&lt;ms-parameters&gt; are made optional in the mscap attribute definition.</li>
<li>"AMR" changed to "AMR-WB" in cases in which the sample rate is 16000.  </li>
</ul>

<p> </p>
<h1 id="rfc.section.7.7">
<a href="#rfc.section.7.7">7.7.</a> Changes from version 02</h1>
<p id="rfc.section.7.7.p.1">This version contains several detail changes intended to simplify capability processing and mapping into conventional SDP media blocks.</p>
<p></p>

<ul>
<li>The "mcap" attribute is enhanced to include the role of the "ecap" attribute; the latter is eliminated.</li>
<li>The "fcap" attribute has been renamed "mfcap".  New replacement rules vis-a-vis fmtp attributes in the base media specification have been added.</li>
<li>A new "mscap" attribute is defined to handle the problem of attributes (other than rtpmap and fmtp) that are specific to a particular payload type.</li>
<li>New rules for processing the mcap, mfcap, and mscap attributes, and overriding standard rtpmap, fmtp, or other media-specific attributes, are put forward to reduce the need to use the deletion option in the a= parameter of the potential configuration (pcfg) attribute.</li>
<li>A new parameter, "mt=" is added to the latent configuration attribute (lcfg) to specify the media stream type (audio, video, etc.) when the lcfg is declared at the session level.</li>
<li>The examples are expanded.</li>
<li>Numerous typos and misspellings have been corrected.</li>
</ul>

<p> </p>
<h1 id="rfc.section.7.8">
<a href="#rfc.section.7.8">7.8.</a> Changes from version 01</h1>
<p id="rfc.section.7.8.p.1">The documents adds a new attribute for specifying bandwidth capability and a parametr to list in the potential configuration.  Other changes are to align the document with the terminolgy and attribute names from draft-ietf-mmusic-sdp-capability-negotiation-07.  The document also clarifies some previous open issues.  </p>
<h1 id="rfc.section.7.9">
<a href="#rfc.section.7.9">7.9.</a> Changes from version 00</h1>
<p id="rfc.section.7.9.p.1">The major changes include taking out the "mcap" and "cptmap" parameter. The mapping of payload type is now in the "pt" parameter of "pcfg". Media subtype need to explictly definesd in the "cmed" attribute if referenced in the "pcfg" </p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#acks" id="acks">Acknowledgements</a>
</h1>
<p id="rfc.section.8.p.1">This document is heavily influenced by the discussions and work done by the SDP Capability Negotiation Design team. The following people in particular provided useful comments and suggestions to either the document itself or the overall direction of the solution defined herein: Cullen Jennings, Matt Lepinski, Joerg Ott, Colin Perkins, and Thomas Stach.  </p>
<p id="rfc.section.8.p.2">We thank Ingemar Johansson and Magnus Westerlund for examples that stimulated this work, and for critical reading of the document.  </p>
<h1 id="rfc.references">
<a href="#rfc.references">9.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">9.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5234">[RFC5234]</b></td>
<td class="top">
<a>Crocker, D.</a> and <a>P. Overell</a>, "<a href="http://tools.ietf.org/html/rfc5234">Augmented BNF for Syntax Specifications: ABNF</a>", STD 68, RFC 5234, January 2008.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3264">[RFC3264]</b></td>
<td class="top">
<a>Rosenberg, J.</a> and <a>H. Schulzrinne</a>, "<a href="http://tools.ietf.org/html/rfc3264">An Offer/Answer Model with Session Description Protocol (SDP)</a>", RFC 3264, June 2002.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4566">[RFC4566]</b></td>
<td class="top">
<a>Handley, M.</a>, <a>Jacobson, V.</a> and <a>C. Perkins</a>, "<a href="http://tools.ietf.org/html/rfc4566">SDP: Session Description Protocol</a>", RFC 4566, July 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5939">[RFC5939]</b></td>
<td class="top">
<a>Andreasen, F</a>, "<a href="http://tools.ietf.org/html/rfc5939">SDP Capability Negotiation</a>", RFC 5939, September 2010.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">9.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC4568">[RFC4568]</b></td>
<td class="top">
<a>Andreasen, F.</a>, <a>Baugher, M.</a> and <a>D. Wing</a>, "<a href="http://tools.ietf.org/html/rfc4568">Session Description Protocol (SDP) Security Descriptions for Media Streams</a>", RFC 4568, July 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4585">[RFC4585]</b></td>
<td class="top">
<a>Ott, J.</a>, <a>Wenger, S.</a>, <a>Sato, N.</a>, <a>Burmeister, C.</a> and <a>J. Rey</a>, "<a href="http://tools.ietf.org/html/rfc4585">Extended RTP Profile for Real-time Transport Control Protocol (RTCP)-Based Feedback (RTP/AVPF)</a>", RFC 4585, July 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4867">[RFC4867]</b></td>
<td class="top">
<a>Sjoberg, J.</a>, <a>Westerlund, M.</a>, <a>Lakaniemi, A.</a> and <a>Q. Xie</a>, "<a href="http://tools.ietf.org/html/rfc4867">RTP Payload Format and File Storage Format for the Adaptive Multi-Rate (AMR) and Adaptive Multi-Rate Wideband (AMR-WB) Audio Codecs</a>", RFC 4867, April 2007.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5104">[RFC5104]</b></td>
<td class="top">
<a>Wenger, S.</a>, <a>Chandra, U.</a>, <a>Westerlund, M.</a> and <a>B. Burman</a>, "<a href="http://tools.ietf.org/html/rfc5104">Codec Control Messages in the RTP Audio-Visual Profile with Feedback (AVPF)</a>", RFC 5104, February 2008.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4583">[RFC4583]</b></td>
<td class="top">
<a>Camarillo, G.</a>, "<a href="http://tools.ietf.org/html/rfc4583">Session Description Protocol (SDP) Format for Binary Floor Control Protocol (BFCP) Streams</a>", RFC 4583, November 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4733">[RFC4733]</b></td>
<td class="top">
<a>Schulzrinne, H.</a> and <a>T. Taylor</a>, "<a href="http://tools.ietf.org/html/rfc4733">RTP Payload for DTMF Digits, Telephony Tones, and Telephony Signals</a>", RFC 4733, December 2006.</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Robert R Gilman </span> 
	  <span class="n hidden">
		<span class="family-name">Gilman</span>
	  </span>
	</span>
	<span class="org vcardline">Independent</span>
	<span class="adr">
	  <span>3243 W. 11th Ave. Dr.</span>

	  <span class="vcardline">
		<span class="locality">Broomfield, CO 80020</span>,  
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:bob_gilman@comcast.net">bob_gilman@comcast.net</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Roni Even</span> 
	  <span class="n hidden">
		<span class="family-name">Even</span>
	  </span>
	</span>
	<span class="org vcardline">Gesher Erove Ltd</span>
	<span class="adr">
	  <span>14 David Hamelech</span>

	  <span class="vcardline">
		<span class="locality">Tel Aviv</span>,  
		<span class="region"></span>
		<span class="code">64953</span>
	  </span>
	  <span class="country-name vcardline">Israel</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:ron.even.tlv@gmail.com">ron.even.tlv@gmail.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Flemming Andreasen </span> 
	  <span class="n hidden">
		<span class="family-name">Andreasen</span>
	  </span>
	</span>
	<span class="org vcardline">Cisco Systems</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality">Iselin, NJ</span>,  
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:fandreas@cisco.com%20">fandreas@cisco.com </a></span>

  </address>
</div>

</body>
</html>