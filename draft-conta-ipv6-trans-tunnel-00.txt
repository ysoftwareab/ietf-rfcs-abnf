





IPng Working Group                          A. Conta (Lucent)
INTERNET-DRAFT
                                            July 1997


        Transmission of IPv6 Packets over IPv6 and IPv4 Tunnels.

                             Specification

                  draft-conta-ipv6-trans-tunnel-00.txt


Status of this Memo

   This document is an Internet-Draft.  Internet-Drafts are working doc-
   uments of the Internet Engineering Task Force (IETF), its Areas,  and
   its  Working Groups. Note that other groups may also distribute work-
   ing documents as Internet-Drafts.

   Internet-Drafts are draft  documents  valid  for  a  maximum  of  six
   months.  Internet-Drafts  may  be  updated, replaced, or obsoleted by
   other documents at any time.  It is not appropriate to  use  Internet
   Drafts as reference material or to cite them other than as a "working
   draft" or "work in progress."

   To learn the current status of any Internet-Draft, please  check  the
   ``1id-abstracts.txt''  listing  contained  in  the  Internet-  Drafts
   Shadow Directories on ftp.is.co.za (Africa), nic.nordu.net  (Europe),
   munnari.oz.au  (Pacific  Rim),  ds.internic.net  (US  East Coast), or
   ftp.isi.edu (US West Coast).

   Distribution of this memo is unlimited.

Abstract

   This memo describes the transmission of IPv6 packets  over  IPv6  and
   IPv4 tunnels, and the IPv6 tunnel link local addresses.


1. Introduction


   This  document  specifies  the  frame format for transmission of IPv6
   packets and the method of forming IPv6 link-local addresses  on  IPv6
   tunnels.   It  also  specifies the content of the Source/Target Link-
   layer Address option  used  in  Inverse  Neighbor  Solicitation,  and
   Neighbor  Advertisement  messages when those messages are transmitted
   over an IPv6 tunnel [IND_TUN].



Conta                   Expires in six months       [Page 1]




INTERNET-DRAFT       IPv6 over IPv6 and IPv4 Tunnels        29 July 1997


   The keywords MUST, MUST NOT, MAY, OPTIONAL,   REQUIRED,  RECOMMENDED,
   SHALL,  SHALL  NOT,  SHOULD,  SHOULD  NOT   are  to be interpreted as
   defined in RFC 2119.


2. Maximum Transmission Unit

   The default MTU size for IPv6 or IPv4  tunnels  is  the  MTU  of  the
   underlying  physical  interface  less  the size of the tunnel headers
   [TUNNEL].

   The MTU can be reduced by manual configuration. An IPv6 or IPv4  tun-
   nel MTU cannot be larger than its default size.


3. Frame format

   IPv6  packets  are transmitted in standard IPv6 packet format -  IPv6
   packets are payloads of IPv6 Tunnel packets.

   The IPv6 tunnel header contains as Source and Destination the  tunnel
   entry-point  and exit-point node addresses. The tunnel IPv6 header is
   filled in conforming to [TUNNEL].


4. Stateless Autoconfiguration

   This applies only for IPv6 tunnels.

   The interface token [CONF] for an IPv6 tunnel  pseudo-interface  must
   be  unique  on the virtual link represented  by the tunnel, i.e., the
   tunnel's end-point nodes must have distinct pseudo-interface  tokens.
   The default IPv6 tunnel pseudo-interface token is based on the under-
   lying physical interface EUI-64 identifier [ETHER]. It is the  result
   of  masking  the forth and fifth octets of the EUI-64 identifier with
   the fixed FFFC hexadecimal value.

   For instance for an underlying physical interface EUI-64 identifier

                             36-56-78-FF-FE-9A-BC-DE.

   the IPv6 tunnel pseudo-interface token is:

                       36-56-78-FF-FC-9A-BC-DE.

   An IPv6 address prefix used for  stateless  autoconfiguration  of  an
   IPv6 tunnel interface must have a length of 64 bits.




Conta                   Expires in six months       [Page 2]




INTERNET-DRAFT       IPv6 over IPv6 and IPv4 Tunnels        29 July 1997


5. Link-Local Addresses

   This applies only to IPv6.

   The  IPv6  link-local  address  [AARCH]  for  an  IPv6 tunnel pseudo-
   interface is formed  by  appending  the  pseudo-interface  token,  as
   defined above, to the prefix FE80::/64.

          10 bits            54 bits                  64 bits
        +----------+-----------------------+----------------------------+
        |1111111010|         (zeros)       |   Pseudo-Interface Token   |
        +----------+-----------------------+----------------------------+


6. Address Mapping - Unicast

   The  procedure  for  mapping  IPv6  addresses  to tunnel IPv6 or IPv4
   addresses is described in [IND_TUN].

   The Source/Target Virtual Link-layer Address option has the following
   form when the (virtual) link layer is an IPv6 or IPv4 tunnel.

         0                   1                   2                   3
         0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      0 |     Type      |     Length    |                               |
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               +
      4 |                                                               |
        +                                                               +
      8 |                                                               |
        +                        IPv6  Address                          +
     12 |                                                               |
        +                               +-------------------------------+
     16 |                               |                               |
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                               +
     20 |                      Padding                                  |
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+














Conta                   Expires in six months       [Page 3]




INTERNET-DRAFT       IPv6 over IPv6 and IPv4 Tunnels        29 July 1997


   or
                         0                   1
                         0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
                        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                      0 |     Type      |    Length     |
                        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                      2 |             IPv4              |
                        +-                             -+
                      4 |           Address             |
                        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                      6 |          Padding              |
                        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

       Option fields:

       Type        1 for Source Link-layer address.
                   2 for Target Link-layer address.

       Length      3 (in units of 8 octets) for IPv6 addresses
                   1 (in units of 8 octets) for IPv4 addresses

       IPv6 Address
                   The 128 bit IPv6 address of the IPv6 tunnel pseudo-interface.
            or

       IPv4 Address
                   The 32 bit IPv4 address of the IPv4 tunnel pseudo-interface.


7. Security Considerations

   The  mechanisms  defined  in this document for generating IPv6 tunnel
   address tokens are  intended  to  provide  virtual  link  uniqueness.
   There  is  no security protection from duplication through forgery or
   accident.


8. Acknowledgments

   This draft is a result of a discussion with Steve Deering  about  the
   applicability  and  benefits  of Neighbor Discovery for IPv6 tunnels.
   After more thinking and in combination  with  IPv6  Inverse  Neighbor
   Discovery things seemed to fall into place.

   The  IPv4  part  is an idea that Dan Harrington suggested, and it was
   very easy to add.





Conta                   Expires in six months       [Page 4]




INTERNET-DRAFT       IPv6 over IPv6 and IPv4 Tunnels        29 July 1997


9. References

   [RFC-1883] S. Deering, R. Hinden, "Internet Protocol Version 6 Speci-
   fication"


   [RFC-1885]  A. Conta, and S. Deering "Internet Control Message Proto-
   col for the Internet Protocol Version 6 (IPv6)"


   [RFC-1970] T. Narten, E. Nordmark, W.Simpson "Neighbor Discovery  for
   IP Version 6 (IPv6)"


   [IND_TUN]  A.  Conta "IPv6 ND Extensions for Inverse Neighbor Discov-
   ery.


   [TUNNEL] A. Conta, S. Deering "Generic IPv6 Encapsulation".


   [ETHER] M. Crawford "Transmission of IPv6 packets over Ethernet"


   Authors' Addresses

   Alex Conta
   Lucent Technologies Inc.
   300 Baker Ave, Suite 100
   Concord, MA 01742
   +1-508-287-2842

   email: aconta@lucent.com


















Conta                   Expires in six months       [Page 5]

