<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>BGP Extended Community Attribute
    for QoS Marking</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="BGP Extended Community Attribute
    for QoS Marking">
<meta name="keywords" content="Draft">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Inter-Domain Routing Working Group</td><td class="header">Th. Knoll</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Chemnitz University of Technology</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">June 08, 2008</td></tr>
<tr><td class="header">Expires: December 10, 2008</td><td class="header">&nbsp;</td></tr>
</table></td></tr></table>
<h1><br />BGP Extended Community Attribute
    for QoS Marking<br />draft-knoll-idr-qos-attribute-00</h1>

<h3>Status of this Memo</h3>
<p>
By submitting this Internet-Draft,
each author represents that any applicable patent or other IPR claims of which
he or she is aware have been or will be disclosed,
and any of which he or she becomes aware will be disclosed,
in accordance with Section&nbsp;6 of BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on December 10, 2008.</p>

<h3>Abstract</h3>

<p>This document specifies a simple signalling mechanism for
      inter-domain QoS marking using a BGP Extended Community QoS Attribute.
      Class based packet forwarding for delay and loss critical services is
      currently performed in an individual AS internal manner. The new QoS
      marking attribute makes the QoS class setup within the IP prefix
      advertising AS known to all access and transit ASes. This enables
      individual (re-)marking and forwarding treatment adaptation to the
      original QoS class setup of the respective IP prefix. The attribute
      provides the means to signal QoS markings on different layers, which are
      linked together in QoS class sets. It provides inter-domain and
      cross-layer insight into the QoS class mapping of the source AS with
      minimal signalling traffic.
</p>
<h3>Requirements Language</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in <a class='info' href='#RFC2119'>RFC 2119<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> [RFC2119].
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#anchor2">2.</a>&nbsp;
Definition of the QoS Marking Attribute<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">2.1.</a>&nbsp;
Extended Community Type<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">2.2.</a>&nbsp;
Structure of the QoS Marking Attribute<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#tech_type">2.3.</a>&nbsp;
Technology Type Enumeration<br />
<a href="#anchor5">3.</a>&nbsp;
Attribute Usage<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">3.1.</a>&nbsp;
QoS Marking Attribute Example<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">3.2.</a>&nbsp;
AS Border Packet Forwarding<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">3.3.</a>&nbsp;
IP Prefix Aggregation<br />
<a href="#Confidentiality">4.</a>&nbsp;
Confidentiality Considerations<br />
<a href="#IANA">5.</a>&nbsp;
IANA Considerations<br />
<a href="#Security">6.</a>&nbsp;
Security Considerations<br />
<a href="#rfc.references1">7.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">7.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">7.2.</a>&nbsp;
Informative References<br />
<a href="#appendix_a">Appendix&nbsp;A.</a>&nbsp;
QoS Marking Attribute Example<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Author's Address<br />
<a href="#rfc.copyright">&#167;</a>&nbsp;
Intellectual Property and Copyright Statements<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>A new BGP Extended Community Attribute is defined in this document,
      which carries QoS marking information for different network layer
      technologies across ASes. This attribute is called "QoS Marking
      Attribute". This new attribute provides a mechanism for labelling
      priority class information carried in BGP-4 <a class='info' href='#RFC4271'>[RFC4271]<span> (</span><span class='info'>Rekhter, Y., Li, T., and S. Hares, &ldquo;A Border Gateway Protocol 4 (BGP-4),&rdquo; January&nbsp;2006.</span><span>)</span></a>. It allows for the consistent exchange of
      priority class encoding values between BGP peers for physical, data
      link, network and transport layer QoS mechanisms. These labels can be
      used to control the distribution of this information, for the encoding
      and for treatment adjustments within the AS or for other
      applications.
</p>
<p>Several QoS Marking Attributes MAY be included in a single BGP UPDATE
      message. Each QoS Marking Attribute is encoded as 8-octet tuple, as
      follows.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Definition of the QoS Marking Attribute</h3>

<p>
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Extended Community Type</h3>

<p>The new QoS Marking Attribute is encoded as a BGP Extended
        Community Attribute <a class='info' href='#RFC4360'>[RFC4360]<span> (</span><span class='info'>Sangli, S., Tappan, D., and Y. Rekhter, &ldquo;BGP Extended Communities Attribute,&rdquo; February&nbsp;2006.</span><span>)</span></a>. It is therefore a
        transitive optional BGP attribute with Type Code 16. An adoption to
        the simple BGP Community Attribute encoding <a class='info' href='#RFC1997'>[RFC1997]<span> (</span><span class='info'>Chandrasekeran, R., Traina, P., and T. Li, &ldquo;BGP Communities Attribute,&rdquo; August&nbsp;1996.</span><span>)</span></a> is not defined in this document. The actual
        encoding within the BGP Extended Community Attribute is as
        follows.
</p>
<p>The QoS Marking Attribute is of regular type which results in a 1
        octet Type field followed by 7 octets for the QoS marking structure.
        The Type is IANA-assignable (FCFS procedure) and marks the community
        as transitive across ASes. The type number has been assigned by IANA
        to 0xYY (0x00-x3f).
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre> 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0 0 x x x x x x|                                               |
+-+-+-+-+-+-+-+-+   7 octet QoS Marking Attribute structure     |
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

</pre></div>
<p>Note to RFC Editor: The actual type number needs to replace the
        '0xYY (0x00-x3f)' after the IANA assignment has occurred.
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
Structure of the QoS Marking Attribute</h3>

<p>The QoS Marking Attributes provides a flexible encoding structure
        for various QoS Markings on different layers. This flexibility is
        achieved by a Flags, a QoS Set Number and a Technology Type field
        within the 7 octet structure as defined below.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre> 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    Flags      | QoS Set Number|        Technology Type        |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| QoS Marking O | QoS Marking A |   P. Count    | C. Unused ='0'|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

</pre></div>
<p>Flags:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre> 0  1  2  3  4  5  6  7
+--+--+--+--+--+--+--+--+
|L2 L1 L0|R |I |A |0 |0 |
+--+--+--+--+--+--+--+--+
</pre></div>
<p></p>
<blockquote class="text"><dl>
<dt></dt>
<dd>All used and unused flags default to a value of
            &lsquo;0&rsquo;. The following table shows the bit encoding of the
            Flags field.
</dd>
</dl></blockquote>
<table class="full" align="left" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left"><col align="left">
<tr><th align="left">Bit</th><th align="left">Flag</th><th align="left">Encoding</th></tr>
<tr>
<td align="left">0-2</td>
<td align="left">L2 &amp; L1 &amp; L0</td>
<td align="left">Specification of the applied enumeration list for the Technology
          Type</td>
</tr>
<tr>
<td align="left">3</td>
<td align="left">R</td>
<td align="left">&lsquo;1&rsquo; &hellip; remarking occurred</td>
</tr>
<tr>
<td align="left">4</td>
<td align="left">I</td>
<td align="left">&lsquo;1&rsquo; &hellip; QoS marking ignored</td>
</tr>
<tr>
<td align="left">5</td>
<td align="left">A</td>
<td align="left">&lsquo;1&rsquo; &hellip; QoS class aggregation occurred</td>
</tr>
<tr>
<td align="left">6,7</td>
<td align="left">unused</td>
<td align="left">Default to &lsquo;0&rsquo;</td>
</tr>
</table>
<br clear="all" />

<p></p>
<blockquote class="text"><dl>
<dt></dt>
<dd>Technology Type Enumeration can be chosen from different
            sources as follows.
</dd>
</dl></blockquote>
<table class="full" align="left" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left">
<tr><th align="left">L2&amp;L1&amp;L0</th><th align="left">Enumeration List</th></tr>
<tr>
<td align="left">'000'</td>
<td align="left">GMPLS LSP encoding Type <a class='info' href='#GMPLS-SIG'>see<span> (</span><span class='info'>IANA, &ldquo;GMPLS Signaling Parameters,&rdquo; June&nbsp;2008.</span><span>)</span></a> [GMPLS&#8209;SIG]</td>
</tr>
<tr>
<td align="left">'001'</td>
<td align="left">MPLS Pseudowire Type <a class='info' href='#RFC4446'>see<span> (</span><span class='info'>Martini, L., &ldquo;IANA Allocations for Pseudowire Edge to Edge Emulation (PWE3),&rdquo; April&nbsp;2006.</span><span>)</span></a> [RFC4446]</td>
</tr>
<tr>
<td align="left">'010'</td>
<td align="left">EtherType <a class='info' href='#EtherType'>see<span> (</span><span class='info'>IEEE, &ldquo;IEEE EtherType registration list,&rdquo; June&nbsp;2008.</span><span>)</span></a> [EtherType]</td>
</tr>
<tr>
<td align="left">'011'</td>
<td align="left">IANA Protocol Numbers <a class='info' href='#RFC5237'>see<span> (</span><span class='info'>Arkko, J. and S. Bradner, &ldquo;IANA Allocation Guidelines for the Protocol Field,&rdquo; February&nbsp;2008.</span><span>)</span></a> [RFC5237]</td>
</tr>
<tr>
<td align="left">'100'</td>
<td align="left">MIB II Interface List <a class='info' href='#RFC2863'>see<span> (</span><span class='info'>McCloghrie, K. and F. Kastenholz, &ldquo;The Interfaces Group MIB,&rdquo; June&nbsp;2000.</span><span>)</span></a> [RFC2863]</td>
</tr>
<tr>
<td align="left">'111'</td>
<td align="left">alternative Technology Type <a class='info' href='#tech_type'>see<span> (</span><span class='info'>Technology Type Enumeration</span><span>)</span></a></td>
</tr>
</table>
<br clear="all" />

<p></p>
<blockquote class="text"><dl>
<dt></dt>
<dd>The Flags "R, I and A" are set to '0' in the advertisement by
            the IP prefix originating AS. Transit ASes MUST change the flag
            value to '1' once the respective event occurred. If the QoS
            marking actively used in the transit AS internal forwarding is
            different from the advertised original one, the 'Remarking (R)'
            flag is set to '1'. This MUST be done separately for each
            technology type attribute within the attribute set. The same
            applies to the 'Ignore (I)' flag, if the respective advertised QoS
            marking is ignored in the transit AS internal forwarding.
</dd>
<dt></dt>
<dd>The 'Aggregation (A)' flag MUST be set to '1' by the UPDATE
            message relaying transit AS, if the respective IP prefixes will be
            advertised inside an IP prefix aggregate.
</dd>
</dl></blockquote>

<p>QoS Set Number:
</p>
<p></p>
<blockquote class="text"><dl>
<dt></dt>
<dd>Several single QoS Marking Attributes can be grouped logically
            into a QoS Marking Attribute Set characterized by a QoS Set
            Number. This grouping of the single QoS Marking Attributes into a
            set provides a cross-layer linking between the QoS class
            encodings. The number of signalled QoS Marking Attributes as well
            as QoS Marking Attribute Sets is at the operator&rsquo;s choice of
            the originating AS. The enumerated QoS set numbers have BGP UPDATE
            message local significance starting with set number 0x00.
</dd>
</dl></blockquote>

<p>Technology Type:
</p>
<p>The technology type encoding follows commonly used enumerations as
        referred to by the L2&amp;L1&amp;L0 bit combinations stated above. If
        the use of external enumerations is not favoured or the mapping of
        commonly used technologies is sufficient, the enumeration list <a class='info' href='#tech_type'>in<span> (</span><span class='info'>Technology Type Enumeration</span><span>)</span></a> SHALL be used.
</p>
<p>QoS Marking / Enumeration O &amp; A:
</p>
<p>The interpretation of these identically approached fields depends
        on the selected layer and technology. QoS mechanisms using bit
        encodings for the targeted priority (e.g. IP DSCP, Ethernet User
        Priority, MPLS EXP etc.) MUST use a copy of the encoding in this
        attribute field. Unused higher order bits default to &lsquo;0&rsquo;.
        Other technologies, which use other ways of labelling priority
        information such as L-LSPs, VPI/VCI inferred ATM classes, lambda
        inferred priority, etc. SHALL use class enumerations as encoding in
        this attribute field.
</p>
<p>There are two QoS Marking fields within the QoS Marking Attribute
        for the "original (O)" and the "active (A)" QoS marking.
</p>
<p>QoS Marking O (Original QoS Marking):</p>
<blockquote class="text"><dl>
<dt></dt>
<dd>The IP prefix originating AS copies the internally associated
            QoS encoding of the given Technology Type into this one octet
            field. The field MUST remain unchanged in BGP UPDATE messages of
            relaying nodes.
</dd>
</dl></blockquote>

<p>QoS Marking A (Active QoS Marking):</p>
<blockquote class="text"><dl>
<dt></dt>
<dd>QoS Marking A and O MUST be identically encoded by the prefix
            originating AS.
</dd>
<dt></dt>
<dd>All other ASes use this Active QoS Marking field to advertise
            their internal QoS encoding of the given class and technology. A
            cleared Marking field signals that this traffic class experiences
            default traffic treatment within the transit AS forwarding
            technology.
</dd>
</dl></blockquote>

<p>Processing Count (P. Count):</p>
<blockquote class="text"><dl>
<dt></dt>
<dd>Each BGP instance, which processes the attribute and appends a
            different AS number to the AS_PATH, MUST increase this counter by
            one. The attribute originating instance initializes the counter
            value to '0x00'.
</dd>
</dl></blockquote><p>Currently Unused (C. Unused):</p>
<blockquote class="text"><dl>
<dt></dt>
<dd>This one octet field is currently unused and MUST be set to
            '0x00'.
</dd>
</dl></blockquote>

<a name="tech_type"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3"></a><h3>2.3.&nbsp;
Technology Type Enumeration</h3>

<p>A small list of technologies is provided in the table below for the
        direct encoding of common technology types.
</p><table class="full" align="left" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left">
<tr><th align="left">Value</th><th align="left">Technology Type</th></tr>
<tr>
<td align="left">0x0000</td>
<td align="left">DiffServ enabled IPv4</td>
</tr>
<tr>
<td align="left">0x0001</td>
<td align="left">DiffServ enabled IPv6</td>
</tr>
<tr>
<td align="left">0x0010</td>
<td align="left">Ethernet using 802.1q priority tag</td>
</tr>
<tr>
<td align="left">0x0020</td>
<td align="left">MPLS using E-LSP</td>
</tr>
<tr>
<td align="left">0x0021</td>
<td align="left">MPLS using L-LSP</td>
</tr>
<tr>
<td align="left">0x0100</td>
<td align="left">GMPLS &ndash; time slot encoding</td>
</tr>
<tr>
<td align="left">0x0101</td>
<td align="left">GMPLS &ndash; lambda encoding</td>
</tr>
<tr>
<td align="left">0x0102</td>
<td align="left">GMPLS &ndash; fibre encoding</td>
</tr>
</table>
<br clear="all" />

<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Attribute Usage</h3>

<p>Providers MAY choose to process the QoS Marking Attributes and adopt
      the priority encoding according to their local policy. Whether this MAY
      also lead to different IGP routing decisions or even effect BGP update
      filters is out of scope for the attribute definition.
</p>
<p>Only the IP prefix originating AS is allowed to signal the QoS
      Marking Attributes and Sets. Transit ASes MUST NOT modify or extend the
      QoS Set except for the update of each 'QoS Marking A' field contained in
      the Attribute Set, the respective "R, I, A" flags and the Processing
      Counter.
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
QoS Marking Attribute Example</h3>

<p>See <a class='info' href='#appendix_a'>Appendix&nbsp;A<span> (</span><span class='info'>QoS Marking Attribute Example</span><span>)</span></a> for an example QoS Marking
        Attribute Set.
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
AS Border Packet Forwarding</h3>

<p>IP packet forwarding based on packet header QoS encoding might
        require remarking of packets in order to match AS internal policies
        and encodings of neighbouring ASes.
</p>
<p>Identical QoS class sets and encodings between neighbouring ASes do
        not require any remarking. Different encodings will be matched on the
        outgoing traffic.
</p>
<p>Outgoing traffic for a given IP prefix uses the 'QoS Marking A'
        information of the respective BGP UPDATE message QoS Marking Attribute
        for adopted remarking of the forwarded packet.
</p>
<p>If the Process Count is smaller than the number of different AS
        numbers in the AS PATH or if the 'I' flag is set for a given encoding,
        the outgoing traffic will be remarked using the 'QoS Marking O'
        information instead.
</p>
<p>'QoS Marking O' information is also used for outgoing remarking, if
        the targeted class is not supported by the neighbouring AS.
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
IP Prefix Aggregation</h3>

<p>Several IP prefixes of different IP prefix originating ASes MAY be
        aggregated to a shorter IP prefix in transit ASes. The QoS Marking
        Attribute Set of the resulting IP prefix aggregate is chosen as
        follows:</p>
<ol class="text">
<li>If only on aggregate member contains an associated QoS Marking
            Attribute Set, than this Set MUST be used as resulting QoS Marking
            Attribute Set for the IP prefix aggregate.
</li>
<li>If several aggregate members contain an associated QoS Marking
            Attribute Set, than the Set of the shortest IP prefix aggregate
            member MUST be used as resulting QoS Marking Attribute Set for the
            IP prefix aggregate. Equal IP prefix aggregate member lengths
            SHOULD be resolved in favour of the IP prefix with lower IP
            addresses.
</li>
</ol><p>In case of IP prefix aggregation, the 'Aggregation (A)' flag
        of each QoS Marking Attribute within the Set MUST be set to '1'.
</p>
<a name="Confidentiality"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Confidentiality Considerations</h3>

<p>The disclosure of confidential AS intrinsic information is of no
      concern since the signalled marking for QoS class encodings can be
      adopted prior to the UPDATE advertisement of the IP prefix originating
      AS. AS internal cross-layer remarking and policy based update filtering
      allows for consistent QoS class support despite made up QoS class set
      and encoding information within UPDATE advertisements. In case of such
      policy hiding strategy the required originating AS internal ingress and
      egress remarking SHALL be done transparently without explicit "Active
      Marking" and 'R' flag signalling.
</p>
<a name="IANA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
IANA Considerations</h3>

<p>This document defines a new BGP Extended Community Attribute, which
      needs to be assigned a number by IANA within the Extended Community
      Attribute list.
</p>
<p>The new QoS Marking Attribute is a BGP Extended Community Attribute
      of regular type. It is IANA-assignable (FCFS procedure) and is
      transitive across ASes.
</p>
<p>An number assignment application within the numbering range of 0x00 -
      x3f is made to IANA.
</p>
<p>Note to RFC Editor: this section may be removed on publication as an
      RFC.
</p>
<a name="Security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Security Considerations</h3>

<p>The new QoS marking Attribute does not raise extra security concerns.
      Existing BGP security measures are in place by means of the reused
      transport within BGP UPDATE messages.
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>7.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC1997">[RFC1997]</a></td>
<td class="author-text"><a href="mailto:rchandra@cisco.com">Chandrasekeran, R.</a>, <a href="mailto:pst@cisco.com">Traina, P.</a>, and <a href="mailto:tli@skat.usc.edu">T. Li</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc1997">BGP Communities Attribute</a>,&rdquo; RFC&nbsp;1997, August&nbsp;1996 (<a href="http://www.rfc-editor.org/rfc/rfc1997.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2863">[RFC2863]</a></td>
<td class="author-text">McCloghrie, K. and F. Kastenholz, &ldquo;<a href="http://tools.ietf.org/html/rfc2863">The Interfaces Group MIB</a>,&rdquo; RFC&nbsp;2863, June&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc2863.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4271">[RFC4271]</a></td>
<td class="author-text">Rekhter, Y., Li, T., and S. Hares, &ldquo;<a href="http://tools.ietf.org/html/rfc4271">A Border Gateway Protocol 4 (BGP-4)</a>,&rdquo; RFC&nbsp;4271, January&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4271.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4360">[RFC4360]</a></td>
<td class="author-text">Sangli, S., Tappan, D., and Y. Rekhter, &ldquo;<a href="http://tools.ietf.org/html/rfc4360">BGP Extended Communities Attribute</a>,&rdquo; RFC&nbsp;4360, February&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4360.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4446">[RFC4446]</a></td>
<td class="author-text">Martini, L., &ldquo;<a href="http://tools.ietf.org/html/rfc4446">IANA Allocations for Pseudowire Edge to Edge Emulation (PWE3)</a>,&rdquo; BCP&nbsp;116, RFC&nbsp;4446, April&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4446.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5237">[RFC5237]</a></td>
<td class="author-text">Arkko, J. and S. Bradner, &ldquo;<a href="http://tools.ietf.org/html/rfc5237">IANA Allocation Guidelines for the Protocol Field</a>,&rdquo; BCP&nbsp;37, RFC&nbsp;5237, February&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5237.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>7.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="EtherType">[EtherType]</a></td>
<td class="author-text">IEEE, &ldquo;<a href="http://standards.ieee.org/regauth/ethertype/eth.txt">IEEE EtherType registration list</a>,&rdquo; June&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="GMPLS-SIG">[GMPLS-SIG]</a></td>
<td class="author-text">IANA, &ldquo;<a href="http://www.iana.org/assignments/gmpls-sigparameters">GMPLS Signaling Parameters</a>,&rdquo; June&nbsp;2008.</td></tr>
</table>

<a name="appendix_a"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
QoS Marking Attribute Example</h3>

<p>The example AS is advertising several IP prefixes, which experience
      equal QoS treatment from AS internal networks. The IP packet forwarding
      policy within this originating AS defines e.g. 3 traffic classes for IP
      traffic (DSCP1, DSCP2 and DSCP3). These three classes are also
      consistently taken care off within AS internal 802.1q Ethernet switches
      (using UPC1, UPC2 and UPC3) as well as within the EXP bit supporting
      MPLS tunnel forwarding. The BGP UPDATE message for the announced IP
      prefixes will contain the following QoS Marking Attribute Set together
      with the IP prefix NLRI.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre> 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|1 1 1 0 0 0 0 0|0 0 0 0 0 0 0 0|0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0 0 1 0 1 1 1 0|0 0 1 0 1 1 1 0|     currently used = '0'      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|1 1 1 0 0 0 0 0|0 0 0 0 0 0 0 0|0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0 0 0 0 0 1 1 1|0 0 0 0 0 1 1 1|     currently used = '0'      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|1 1 1 0 0 0 0 0|0 0 0 0 0 0 0 0|0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0 0 0 0 0 1 0 1|0 0 0 0 0 1 0 1|     currently used = '0'      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

|1 1 1 0 0 0 0 0|0 0 0 0 0 0 0 1|0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0 0 0 1 1 0 0 0|0 0 0 1 1 0 0 0|     currently used = '0'      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|1 1 1 0 0 0 0 0|0 0 0 0 0 0 0 1|0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0 0 0 0 0 1 0 1|0 0 0 0 0 1 0 1|     currently used = '0'      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|1 1 1 0 0 0 0 0|0 0 0 0 0 0 0 1|0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0 0 0 0 0 0 1 1|0 0 0 0 0 0 1 1|     currently used = '0'      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

|1 1 1 0 0 0 0 0|0 0 0 0 0 0 1 0|0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0 0 0 0 1 0 0 0|0 0 0 0 1 0 0 0|     currently used = '0'      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|1 1 1 0 0 0 0 0|0 0 0 0 0 0 1 0|0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0 0 0 0 0 0 0 1|0 0 0 0 0 0 0 1|     currently used = '0'      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|1 1 1 0 0 0 0 0|0 0 0 0 0 0 1 0|0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0 0 0 0 0 0 0 1|0 0 0 0 0 0 0 1|     currently used = '0'      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre></div>
<p>The class set as well as the example encodings are arbitrarily
      chosen.
</p>
<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Author's Address</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Thomas Martin Knoll</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Chemnitz University of Technology</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Reichenhainer Str. 70 /331</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Chemnitz,   09126</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">GERMANY</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+49-371-531-33246</td></tr>
<tr><td class="author" align="right">Fax:&nbsp;</td>
<td class="author-text">+49-371-531-833246</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:knoll@etit.tu-chemnitz.de">knoll@etit.tu-chemnitz.de</a></td></tr>
</table>
<a name="rfc.copyright"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Full Copyright Statement</h3>
<p class='copyright'>
Copyright &copy; The IETF Trust (2008).</p>
<p class='copyright'>
This document is subject to the rights,
licenses and restrictions contained in BCP&nbsp;78,
and except as set forth therein,
the authors retain all their rights.</p>
<p class='copyright'>
This document and the information contained herein are provided
on an &ldquo;AS IS&rdquo; basis and THE CONTRIBUTOR,
THE ORGANIZATION HE/SHE REPRESENTS
OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE.</p>
<h3>Intellectual Property</h3>
<p class='copyright'>
The IETF takes no position regarding the validity or scope of any
Intellectual Property Rights or other rights that might be claimed
to pertain to the implementation or use of the technology
described in this document or the extent to which any license
under such rights might or might not be available; nor does it
represent that it has made any independent effort to identify any
such rights.
Information on the procedures with respect to
rights in RFC documents can be found in BCP&nbsp;78 and BCP&nbsp;79.</p>
<p class='copyright'>
Copies of IPR disclosures made to the IETF Secretariat and any
assurances of licenses to be made available,
or the result of an attempt made to obtain a general license or
permission for the use of such proprietary rights by implementers or
users of this specification can be obtained from the IETF on-line IPR
repository at <a href='http://www.ietf.org/ipr'>http://www.ietf.org/ipr</a>.</p>
<p class='copyright'>
The IETF invites any interested party to bring to its attention
any copyrights,
patents or patent applications,
or other
proprietary rights that may cover technology that may be required
to implement this standard.
Please address the information to the IETF at <a href='mailto:ietf-ipr@ietf.org'>ietf-ipr@ietf.org</a>.</p>
</body></html>
