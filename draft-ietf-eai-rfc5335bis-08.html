<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Internationalized Email Headers</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Internationalized Email Headers">
<meta name="keywords" content="I18N Email Header, UTF-8 Email Header, internationalized Email">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">EAI</td><td class="header">A. Yang</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">TWNIC</td></tr>
<tr><td class="header">Obsoletes: <a href='http://tools.ietf.org/html/rfc5335'>5335</a> (if&nbsp;approved)</td><td class="header">S. Steele</td></tr>
<tr><td class="header">Updates: <a href='http://tools.ietf.org/html/rfc2045'>2045</a>, <a href='http://tools.ietf.org/html/rfc5322'>5322</a></td><td class="header">Microsoft</td></tr>
<tr><td class="header">(if&nbsp;approved)</td><td class="header">D. Crocker</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">Brandenburg InternetWorking</td></tr>
<tr><td class="header">Expires: July 29, 2011</td><td class="header">N. Freed</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Oracle</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">January 25, 2011</td></tr>
</table></td></tr></table>
<h1><br />Internationalized Email Headers<br />draft-ietf-eai-rfc5335bis-08</h1>

<h3>Abstract</h3>

<p> Internet mail was originally limited to 7-bit ASCII. Recent
            enhancements support Unicode's UTF-8 encoding in portions of a
            message. Full internationalization of electronic mail requires
            additional enhancement, including support for UTF-8 in
            user-oriented header fields, such as in the To, From, and Subject
            fields. This document specifies an enhancement to Internet mail
            that permits native UTF-8 support in the header and body of a
            message. 
</p>
<h3>Status of This Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on July 29, 2011.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2011 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">1.1.</a>&nbsp;
Changes to the 8-bit clean Model<!-- (by DCrocker) --><br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">1.2.</a>&nbsp;
Terminology<br />
<a href="#anchor4">2.</a>&nbsp;
Support for UTF-8 Encoding<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">2.1.</a>&nbsp;
Message Object ABNF Changes<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">2.2.</a>&nbsp;
Normalization<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">2.3.</a>&nbsp;
Content-Transfer-Encoding<br />
<a href="#change-5322">3.</a>&nbsp;
Internet Message Format Enhancement<br />
<a href="#anchor8">4.</a>&nbsp;
Message Labeling<br />
<a href="#change-2045">5.</a>&nbsp;
MIME Enhancement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">5.1.</a>&nbsp;
Content-Transfer-Encoding<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">5.2.</a>&nbsp;
MIME Header Field<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#message-utf8">5.3.</a>&nbsp;
Content-Type: message/utf8-rfc822<br />
<a href="#security">6.</a>&nbsp;
Security Considerations<br />
<a href="#IANA">7.</a>&nbsp;
IANA Considerations<br />
<a href="#anchor11">8.</a>&nbsp;
Acknowledgements<br />
<a href="#rfc.references1">9.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">9.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">9.2.</a>&nbsp;
Informative References<br />
<a href="#anchor14">Appendix&nbsp;A.</a>&nbsp;
Changes to support UTF-8<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>Internet mail distinguishes a message from its transport and
            further divides a message between a header and a body <a class='info' href='#RFC5598'>[RFC5598]<span> (</span><span class='info'>Crocker, D., &ldquo;Internet Mail Architecture,&rdquo; July&nbsp;2009.</span><span>)</span></a>. 
			Internet mail header fields contain a
            variety of strings that are intended to be user-visible. The range
            of supported characters for these strings was originally limited
            to a subset of <a class='info' href='#ASCII'>[ASCII]<span> (</span><span class='info'>, &ldquo;Coded Character Set -- 7-bit American Standard Code for                   Information Interchange,&rdquo; 1986.</span><span>)</span></a>; globalization of the Internet requires
            support of the much larger set contained in UTF-8 <a class='info' href='#RFC5198'>[RFC5198]<span> (</span><span class='info'>Klensin, J. and M. Padlipsky, &ldquo;Unicode Format for Network Interchange,&rdquo; March&nbsp;2008.</span><span>)</span></a>. Complex encoding alternatives to UTF-8, as
            an overlay to the existing ASCII base, would introduce
            inefficiencies as well as opportunities for processing errors.
            Native support for UTF-8 encoding <a class='info' href='#RFC3629'>[RFC3629]<span> (</span><span class='info'>Yergeau, F., &ldquo;UTF-8, a transformation format of ISO 10646,&rdquo; November&nbsp;2003.</span><span>)</span></a> is widely available among systems now used
            over the Internet. Hence supporting this encoding directly within
            email is desired. This document specifies an enhancement to
            Internet mail that permits the use of UTF-8 encoding, rather than
            only ASCII, as the base form for header fields. 
</p>
<p>This specification is based on a model of native, end-to-end
            support for UTF-8, which uses an "8-bit clean" environment .
            Support for carriage across legacy, 7-bit infrastructure and for
            processing by 7-bit receivers requires additional mechanisms that
            are not provided by this specification.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Changes to the 8-bit clean Model<!-- (by DCrocker) --></h3>

<p>This is an extensive revision to the draft. Changes include:</p>
<ul class="text">
<li>Greatly simplified ABNF that is much more basic and
                     integrated.
</li>
<li>Clean separation of the changes in an email header <a class='info' href='#RFC5322'>[RFC5322]<span> (</span><span class='info'>Resnick, P., Ed., &ldquo;Internet Message Format,&rdquo; October&nbsp;2008.</span><span>)</span></a> from those in a MIME header <a class='info' href='#RFC2045'>[RFC2045]<span> (</span><span class='info'>Freed, N. and N. Borenstein, &ldquo;Multipurpose Internet Mail Extensions (MIME) Part One: Format of Internet Message Bodies,&rdquo; November&nbsp;1996.</span><span>)</span></a>
</li>
<li>Change to the default MIME content-transfer-encoding to
                     be 8bit
</li>
<li>Elimination of all discussion of transport
</li>
<li>An appendix that lists the derived ABNF rules that
                     inherit support UTF-8, due to the changed basic rules
</li>
</ul><p> Still Pending:</p>
<ul class="text">
<li>ABF to support IDN
</li>
<li>Fix "Normalization" section; I could not figure out what
                     it needs to say. I wasn't trying to change the existing
                     spec, but simply fix the writing.
</li>
<li>Review/fix MIME C-T-E details
</li>
</ul><p>
            
</p>
<p> The goal of the changes is to dramatically simplify the
               specification and the software needed to support a message with
               UTF8 encoding. Rather than specify a wide range of
               UTF8-specific changes to the existing ABNF rules, it focuses on
               the few, underlying ABNF rules that are the basis for
               user-visible ASCII text. The premise for this is simple: If the
               message is to be in UTF-8, then it is in UTF-8. Subtle or
               complex rules that selectively add UTF-8 are not worth the
               effort, once the message has already entered into the realm of
               UTF-8. 
</p>
<p>The question, then, is whether this change has planted some
               landmines, such as in Trace header fields? 
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.2"></a><h3>1.2.&nbsp;
Terminology</h3>

<p> The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
               NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and
               "OPTIONAL" in this document are to be interpreted as described
               in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>. 
</p>
<p>Syntax descriptions use Augmented BNF (ABNF) <a class='info' href='#RFC5234'>[RFC5234]<span> (</span><span class='info'>Crocker, D. and P. Overell, &ldquo;Augmented BNF for Syntax Specifications: ABNF,&rdquo; January&nbsp;2008.</span><span>)</span></a>. 
</p>
<p>Basic terms for this specification include:</p>
<blockquote class="text">
<p></p>
<blockquote class="text"><dl>
<dt>ASCII:  </dt>
<dd>An encoding of Control
                           Characters and Basic Latin that occupies 7-bits,
                           per <a class='info' href='#ASCII'>[ASCII]<span> (</span><span class='info'>, &ldquo;Coded Character Set -- 7-bit American Standard Code for                   Information Interchange,&rdquo; 1986.</span><span>)</span></a>. Such a string is fully
                           compatible with email as specified in <a class='info' href='#RFC5322'>[RFC5322]<span> (</span><span class='info'>Resnick, P., Ed., &ldquo;Internet Message Format,&rdquo; October&nbsp;2008.</span><span>)</span></a>.
</dd>
<dt>UTF-8:  </dt>
<dd>An encoding of Unicode in 8-bit
                           bytes, per <a class='info' href='#RFC3629'>[RFC3629]<span> (</span><span class='info'>Yergeau, F., &ldquo;UTF-8, a transformation format of ISO 10646,&rdquo; November&nbsp;2003.</span><span>)</span></a>.
</dd>
</dl></blockquote>
                  

</blockquote>

<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Support for UTF-8 Encoding</h3>

<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Message Object ABNF Changes</h3>

<p>Internet Mail that conforms to this specification is classed as
               supporting UTF-8. However, UTF-8 characters within the ASCII
               range retain the restrictions defined for original, legacy,
               Latin-only email. Therefore, ABNF enhancements to include UTF-8
               incrementally add the non-ASCII portions of UTF-8 to that
               established base of ASCII.
</p>
<p>UTF-8 characters are defined by using the following ABNF taken
               from <a class='info' href='#RFC3629'>[RFC3629]<span> (</span><span class='info'>Yergeau, F., &ldquo;UTF-8, a transformation format of ISO 10646,&rdquo; November&nbsp;2003.</span><span>)</span></a>: </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre><dfn>UTF8-enhancement</dfn>  =   <cite class='id'>UTF8-2</cite> / <cite class='id'>UTF8-3</cite> / <cite class='id'>UTF8-4</cite>

<dfn>UTF8-2</dfn>            =   &lt;<span class='str'>See Section 4 of RFC3629</span>&gt;

<dfn>UTF8-3</dfn>            =   &lt;<span class='str'>See Section 4 of RFC3629</span>&gt;

<dfn>UTF8-4</dfn>            =   &lt;<span class='str'>See Section 4 of RFC3629</span>&gt;</pre></div><p>

            
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
Normalization</h3>

<p> See <a class='info' href='#RFC5198'>[RFC5198]<span> (</span><span class='info'>Klensin, J. and M. Padlipsky, &ldquo;Unicode Format for Network Interchange,&rdquo; March&nbsp;2008.</span><span>)</span></a> for a discussion of normalization. A
               normalized form <a class='info' href='#NFC'>[NFC]<span> (</span><span class='info'>Davis, M. and K. Whistler, &ldquo;Unicode Standard Annex #15: Unicode Normalization                   Forms,&rdquo; September&nbsp;2010.</span><span>)</span></a> MAY be used. However <a class='info' href='#NFC'>[NFC]<span> (</span><span class='info'>Davis, M. and K. Whistler, &ldquo;Unicode Standard Annex #15: Unicode Normalization                   Forms,&rdquo; September&nbsp;2010.</span><span>)</span></a> can lose information that is needed to
               correctly spell some names in unusual circumstances.
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3"></a><h3>2.3.&nbsp;
Content-Transfer-Encoding</h3>

<p>This specification is based on a requirement for an "8-bit
               clean" infrastructure. Support for UTF-8 semantics within a
               7-bit environment requires translation conventions that are not
               specified here. Consequently a Content-Transfer-Encoding value
               of 7-bit is not useful for a message that is labeled as
               containing UTF-8.
</p>
<a name="change-5322"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Internet Message Format Enhancement</h3>

<p> This section specifies UTF-8 enhancements for the header of an
            Internet Mail message, as defined in <a class='info' href='#RFC5322'>[RFC5322]<span> (</span><span class='info'>Resnick, P., Ed., &ldquo;Internet Message Format,&rdquo; October&nbsp;2008.</span><span>)</span></a>. 
</p>
<p>ABNF used in this section is taken from that specification and the
            ABNF specification.
</p>
<p> This specification retains the <a class='info' href='#RFC5322'>[RFC5322]<span> (</span><span class='info'>Resnick, P., Ed., &ldquo;Internet Message Format,&rdquo; October&nbsp;2008.</span><span>)</span></a> rules for defining header field names. The
            bodies of header fields are allowed to contain UTF-8 characters,
            but the header field names themselves must contain only ASCII
            characters. 
</p>
<p>The following rules extend the corresponding rules in <a class='info' href='#RFC5322'>[RFC5322]<span> (</span><span class='info'>Resnick, P., Ed., &ldquo;Internet Message Format,&rdquo; October&nbsp;2008.</span><span>)</span></a> and <a class='info' href='#RFC5234'>[RFC5234]<span> (</span><span class='info'>Crocker, D. and P. Overell, &ldquo;Augmented BNF for Syntax Specifications: ABNF,&rdquo; January&nbsp;2008.</span><span>)</span></a> in order to allow additional UTF-8
            characters. </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre><dfn>VCHAR</dfn>   =/  <cite class='id'>UTF8-non-ascii</cite>

<dfn>ctext</dfn>   =/  <cite class='id'>UTF8-enhancement</cite>

<dfn>atext</dfn>   =/  <cite class='id'>UTF8-enhancement</cite>

<dfn>qtext</dfn>   =/  <cite class='id'>UTF8-enhancement</cite>

<dfn>TENTATIVE</dfn> <span class='err'>(DCrocker):
text    =/  UTF8-enhancement
               ; note that this upgrades the body to UTF-8

{{ how to add IDN to this? }}
domain  =   dot-atom / domain-literal / obs-domain
</span></pre></div><p>

         
</p>
<p>This means that all the <a class='info' href='#RFC5322'>[RFC5322]<span> (</span><span class='info'>Resnick, P., Ed., &ldquo;Internet Message Format,&rdquo; October&nbsp;2008.</span><span>)</span></a> constructs that build upon these will permit
            UTF-8 characters, including comments and quoted strings.</p>
<blockquote class="text">
<p></p>
<blockquote class="text"><dl>
<dt>&lt;field-name&gt;  </dt>
<dd><a class='info' href='#RFC5322'>[RFC5322]<span> (</span><span class='info'>Resnick, P., Ed., &ldquo;Internet Message Format,&rdquo; October&nbsp;2008.</span><span>)</span></a> has the rule &lt;field-name&gt; 
                        which specifies permissible names for user-defined
                        header fields. The current specification defines no
                        changes to that rule.
</dd>
<dt>&lt;msg-id&gt; </dt>
<dd>This ABNF enables
                        Message-ID strings to be full UTF-8. However the
                        specification directs that Message-ID strings SHOULD
                        be restricted to ASCII.
</dd>
</dl></blockquote>

</blockquote>

<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Message Labeling</h3>

<p>For clarity and convenience, a message SHOULD contain an explicit
            label indicating the character base it uses. This section defines
            a new header field for this label:</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre><dfn>fields</dfn>         =/ <cite class='id'>msg-character</cite>
<dfn>msg-character</dfn>  = "<span class='str'>MSG-Char:</span>" ( "<span class='str'>ASCII</span>" / "<span class='str'>UTF-8</span>" ) <cite class='key'>CRLF</cite></pre></div><p>

         
</p>
<a name="change-2045"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
MIME Enhancement</h3>

<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Content-Transfer-Encoding</h3>

<p>The default "Content-Transfer-Encoding: is 8BIT" and is assumed
               if the Content-Transfer-Encoding header field is not
               present.
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
MIME Header Field</h3>

<p> MIME contains at least one header field that is intended for
               user display, namely Content-Description. This section
               specifies UTF-8 enhancements to MIME header fields, as defined
               in <a class='info' href='#RFC2045'>[RFC2045]<span> (</span><span class='info'>Freed, N. and N. Borenstein, &ldquo;Multipurpose Internet Mail Extensions (MIME) Part One: Format of Internet Message Bodies,&rdquo; November&nbsp;1996.</span><span>)</span></a>. ABNF rules used in this section is taken
               from that specification and the ABNF specification. 
</p>
<p>The enhanced ABNF rules are: </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre><dfn>text</dfn>    =/ <cite class='id'>UTF8-non-ascii</cite></pre></div><p>

            
</p>
<a name="message-utf8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
Content-Type: message/utf8-rfc822</h3>

<p> The type message/utf-rfc822 is similar to message/rfc822.
               However it specifies that characters are interpreted as UTF-8
               rather than being limited to ASCII.
</p>
<p>
               </p>
<blockquote class="text"><dl>
<dt>Type name:</dt>
<dd>message
</dd>
<dt>Subtype name:</dt>
<dd>utf8-rfc822
</dd>
<dt>Required parameters:</dt>
<dd>none
</dd>
<dt>Optional parameters:</dt>
<dd>none
</dd>
<dt>Encoding considerations:</dt>
<dd>Any
                     content-transfer-encoding is permitted. The 8-bit or
                     binary content-transfer-encodings are recommended where
                     permitted.
</dd>
<dt>Security considerations:</dt>
<dd>See <a class='info' href='#security'>Section&nbsp;6<span> (</span><span class='info'>Security Considerations</span><span>)</span></a>.
</dd>
<dt>Interoperability considerations:</dt>
<dd>The media
                     type provides functionality similar to the message/rfc822
                     content type for email messages with international email
                     headers. When there is a need to embed or return such
                     content in another message, there is generally an option
                     to use this media type and leave the content unchanged or
                     down-convert the content to message/rfc822. Both of these
                     choices will interoperate with the installed base, but
                     with different properties. Systems unaware of
                     internationalized headers will typically treat a
                     message/utf8-rfc822 body part as an unknown attachment,
                     while they will understand the structure of a
                     message/rfc822. However, systems that understand
                     message/utf8-rfc822 will provide functionality superior
                     to the result of a down-conversion to message/rfc822. The
                     most interoperable choice depends on the deployed
                     software.
</dd>
<dt>Published specification:</dt>
<dd>RFC XXXX
</dd>
<dt>Applications that use this media type:</dt>
<dd>SMTP
                     servers and email clients that support multipart/report
                     generation or parsing. Email clients which forward
                     messages with international headers as attachments.
</dd>
<dt>Additional information:</dt>
<dd>
</dd>
<dt>Magic number(s):</dt>
<dd>none
</dd>
<dt>File extension(s):</dt>
<dd>The extension ".u8msg" is
                     suggested.
</dd>
<dt>Macintosh file type code(s):</dt>
<dd>A uniform type
                     identifier (UTI) of "public.utf8-email-message" is
                     suggested. This conforms to "public.message" and
                     "public.composite-content", but does not necessarily
                     conform to "public.utf8-plain-text".
</dd>
<dt>Person &amp; email address to contact for further 
information:</dt>
<dd>See
                     the Author's Address section of this document.
</dd>
<dt>Intended usage:</dt>
<dd>COMMON
</dd>
<dt>Restrictions on usage:</dt>
<dd>This is a structured
                     media type which embeds other MIME media types. The 8-bit
                     or binary content-transfer-encoding SHOULD be used unless
                     this media type is sent over a 7-bit-only transport.
</dd>
<dt>Author:</dt>
<dd>See the Author's Address section of
                     this document.
</dd>
<dt>Change controller:</dt>
<dd>IETF Standards Process
</dd>
</dl></blockquote><p>
            
</p>
<a name="security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Security Considerations</h3>

<p> If a user has a mailbox address in UTF-8 and a mailbox address in
            ASCII, a digital certificate that identifies that user might have
            both addresses in the identity. Having multiple email addresses as
            identities in a single certificate is already supported in PKIX
            (Public Key Infrastructure for X.509 Certificates) <a class='info' href='#RFC5280'>[RFC5280]<span> (</span><span class='info'>Cooper, D., Santesson, S., Farrell, S., Boeyen, S., Housley, R., and W. Polk, &ldquo;Internet X.509 Public Key Infrastructure Certificate and Certificate Revocation List (CRL) Profile,&rdquo; May&nbsp;2008.</span><span>)</span></a> and OpenPGP <a class='info' href='#RFC3156'>[RFC3156]<span> (</span><span class='info'>Elkins, M., Del Torto, D., Levien, R., and T. Roessler, &ldquo;MIME Security with OpenPGP,&rdquo; August&nbsp;2001.</span><span>)</span></a>. 
</p>
<p> Because UTF-8 often requires several octets to encode a single
            character, internationalized local parts and header value may
            cause mail addresses to become longer. As specified in <a class='info' href='#RFC5322'>[RFC5322]<span> (</span><span class='info'>Resnick, P., Ed., &ldquo;Internet Message Format,&rdquo; October&nbsp;2008.</span><span>)</span></a>, each line of characters MUST be no more 998
            octets, excluding the CRLF. On the other hand, MDA (Mail Delivery
            Agent) processes that parse, store, or handle email addresses or
            local parts must take extra care not to overflow buffers, truncate
            addresses, or exceed storage allotments. Also, they must take
            care, when comparing, to use the entire lengths of the addresses. 
</p>
<p> The security impact of UTF-8 headers on email signature systems
            such as Domain Keys Identified Mail (DKIM), S/MIME, and OpenPGP is
            discussed in <a class='info' href='#I-D.eai-frmwrk-4952bis'>[I&#8209;D.eai&#8209;frmwrk&#8209;4952bis]<span> (</span><span class='info'>Klensin, J. and Y. Ko, &ldquo;Overview and Framework for Internationalized                   Email,&rdquo; September&nbsp;2010.</span><span>)</span></a>, Section 14.
            
         
</p>
<a name="IANA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
IANA Considerations</h3>

<p> IANA is requested to update the registration of the
            message/utf8-rfc822 MIME type using the registration form
            contained in <a class='info' href='#message-utf8'>Section&nbsp;5.3<span> (</span><span class='info'>Content-Type: message/utf8-rfc822</span><span>)</span></a>. 
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Acknowledgements</h3>

<p> This document incorporates many ideas first described in
            Internet-Draft form by Paul Hoffman, although many details have
            changed from that earlier work. 
</p>
<p> The author especially thanks Jeff Yeh for his efforts and
            contributions on editing previous versions. 
</p>
<p> Most of the content of this document is provided by John C
            Klensin. Also, some significant comments and suggestions were
            received from Charles H. Lindsey, Kari Hurtta, Pete Resnick,
            Alexey Melnikov, Chris Newman, Yangwoo Ko, Yoshiro Yoneya, and
            other members of the JET team (Joint Engineering Team) and were
            incorporated into the document. The editor sincerely thanks them
            for their contributions. 
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="ASCII">[ASCII]</a></td>
<td class="author-text">&ldquo;Coded Character Set -- 7-bit American Standard Code for
                  Information Interchange,&rdquo; ANSI&nbsp;X3.4, 1986.</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.eai-frmwrk-4952bis">[I-D.eai-frmwrk-4952bis]</a></td>
<td class="author-text">Klensin, J. and Y. Ko, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-eai-frmwrk-4952bis-10.txt">Overview and Framework for Internationalized
                  Email</a>,&rdquo; draft-ietf-eai-frmwrk-4952bis-10 (work in progress), September&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-eai-frmwrk-4952bis-10.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="Latin">[Latin]</a></td>
<td class="author-text">Unicode Consortium, &ldquo;C0 Controls and Basic Latin,&rdquo; http://unicode.org&nbsp;/charts/PDF/U0000.pdf, 2010.</td></tr>
<tr><td class="author-text" valign="top"><a name="NFC">[NFC]</a></td>
<td class="author-text">Davis, M. and K. Whistler, &ldquo;<a href="http://www.unicode.org/reports/tr15/">Unicode Standard Annex #15: Unicode Normalization
                  Forms</a>,&rdquo; September&nbsp;2010.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3629">[RFC3629]</a></td>
<td class="author-text">Yergeau, F., &ldquo;<a href="http://tools.ietf.org/html/rfc3629">UTF-8, a transformation format of ISO 10646</a>,&rdquo; STD&nbsp;63, RFC&nbsp;3629, November&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3629.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5198">[RFC5198]</a></td>
<td class="author-text">Klensin, J. and M. Padlipsky, &ldquo;<a href="http://tools.ietf.org/html/rfc5198">Unicode Format for Network Interchange</a>,&rdquo; RFC&nbsp;5198, March&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5198.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5234">[RFC5234]</a></td>
<td class="author-text">Crocker, D. and P. Overell, &ldquo;<a href="http://tools.ietf.org/html/rfc5234">Augmented BNF for Syntax Specifications: ABNF</a>,&rdquo; STD&nbsp;68, RFC&nbsp;5234, January&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5234.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5322">[RFC5322]</a></td>
<td class="author-text"><a href="mailto:presnick@qualcomm.com">Resnick, P., Ed.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc5322">Internet Message Format</a>,&rdquo; RFC&nbsp;5322, October&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5322.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc5322.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc5322.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5598">[RFC5598]</a></td>
<td class="author-text">Crocker, D., &ldquo;<a href="http://tools.ietf.org/html/rfc5598">Internet Mail Architecture</a>,&rdquo; RFC&nbsp;5598, July&nbsp;2009.</td></tr>
<tr><td class="author-text" valign="top"><a name="Unicode">[Unicode]</a></td>
<td class="author-text">Unicode Consortium, &ldquo;Unicode 6.0 Character Code Charts,&rdquo; http://unicode.org&nbsp;/charts/, 2010.</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2045">[RFC2045]</a></td>
<td class="author-text"><a href="mailto:ned@innosoft.com">Freed, N.</a> and <a href="mailto:nsb@nsb.fv.com">N. Borenstein</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2045">Multipurpose Internet Mail Extensions (MIME) Part One: Format of Internet Message Bodies</a>,&rdquo; RFC&nbsp;2045, November&nbsp;1996 (<a href="http://www.rfc-editor.org/rfc/rfc2045.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2046">[RFC2046]</a></td>
<td class="author-text"><a href="mailto:ned@innosoft.com">Freed, N.</a> and <a href="mailto:nsb@nsb.fv.com">N. Borenstein</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2046">Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types</a>,&rdquo; RFC&nbsp;2046, November&nbsp;1996 (<a href="http://www.rfc-editor.org/rfc/rfc2046.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3156">[RFC3156]</a></td>
<td class="author-text">Elkins, M., Del Torto, D., Levien, R., and T. Roessler, &ldquo;<a href="http://tools.ietf.org/html/rfc3156">MIME Security with OpenPGP</a>,&rdquo; RFC&nbsp;3156, August&nbsp;2001 (<a href="http://www.rfc-editor.org/rfc/rfc3156.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5280">[RFC5280]</a></td>
<td class="author-text">Cooper, D., Santesson, S., Farrell, S., Boeyen, S., Housley, R., and W. Polk, &ldquo;<a href="http://tools.ietf.org/html/rfc5280">Internet X.509 Public Key Infrastructure Certificate and Certificate Revocation List (CRL) Profile</a>,&rdquo; RFC&nbsp;5280, May&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5280.txt">TXT</a>).</td></tr>
</table>

<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
Changes to support UTF-8</h3>

<p>This section provides a basic audit of the places in a message
            that now can permit UTF-8 rather than being restricted to ASCII,
            based on the changes to underlying ABNF. The audit ignores rule
            for "obsolete" constructs in RFC 5322. (This is a first cut and
            the list is likely incomplete):</p>
<blockquote class="text"><dl>
<dt>VCHAR:  </dt>
<dd>quoted-pair, unstructured
</dd>
<dt></dt>
<dd>&gt; ccontent, qcontent 
</dd>
<dt></dt>
<dd>&gt; comment, quoted-string 
</dd>
<dt></dt>
<dd>&gt; word, local-part 
</dd>
<dt></dt>
<dd>&gt; phrase 
</dd>
<dt></dt>
<dd>&gt; display-name, keywords 
</dd>
<dt>ctext:  </dt>
<dd>ccontent &gt; comment
</dd>
<dt>atext:  </dt>
<dd>atom, dot-atom-text
</dd>
<dt>qtext:  </dt>
<dd>qcontent &gt; quoted-string
</dd>
</dl></blockquote><p>
         
</p>
<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Abel Yang</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">TWNIC</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">4F-2, No. 9, Sec 2, Roosevelt Rd.</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Taipei,   100</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Taiwan</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+886 2 23411313 ext 505</td></tr>
<tr><td class="author" align="right">EMail:&nbsp;</td>
<td class="author-text"><a href="mailto:abelyang@twnic.net.tw">abelyang@twnic.net.tw</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Shawn Steele</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Microsoft</td></tr>
<tr><td class="author" align="right">EMail:&nbsp;</td>
<td class="author-text"><a href="mailto:Shawn.Steele@microsoft.com">Shawn.Steele@microsoft.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">D. Crocker</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Brandenburg InternetWorking</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">675 Spruce Dr.</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Sunnyvale</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1.408.246.8253</td></tr>
<tr><td class="author" align="right">EMail:&nbsp;</td>
<td class="author-text"><a href="mailto:dcrocker@bbiw.net">dcrocker@bbiw.net</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://bbiw.net">http://bbiw.net</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Ned Freed</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Oracle</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">800 Royal Oaks</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Monrovia, CA  91016-6347</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">EMail:&nbsp;</td>
<td class="author-text"><a href="mailto:ned.freed@mrochek.com">ned.freed@mrochek.com</a></td></tr>
</table>
</body></html>
