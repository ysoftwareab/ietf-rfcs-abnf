


Network Working Group                                         F. Templin
Internet-Draft                                                     Nokia
Expires: September 25, 2003                                   T. Gleeson
                                                      Cisco Systems K.K.
                                                               M. Talwar
                                                               D. Thaler
                                                   Microsoft Corporation
                                                          March 27, 2003


        Intra-Site Automatic Tunnel Addressing Protocol (ISATAP)
                    draft-ietf-ngtrans-isatap-13.txt

Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups. Note that other
   groups may also distribute working documents as Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time. It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at http://
   www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on September 25, 2003.

Copyright Notice

   Copyright (C) The Internet Society (2003). All Rights Reserved.

Abstract

   This document specifies an Intra-Site Automatic Tunnel Addressing
   Protocol (ISATAP) that connects IPv6 hosts and routers within IPv4
   sites. ISATAP treats the site's IPv4 infrastructure as a link layer
   for IPv6 with no requirement for IPv4 multicast. ISATAP enables
   intra-site automatic IPv6-in-IPv4 tunneling whether globally assigned
   or private IPv4 addresses are used.





Templin, et al.        Expires September 25, 2003               [Page 1]

Internet-Draft                   ISATAP                       March 2003


Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3
   2.  Applicability Statement  . . . . . . . . . . . . . . . . . . .  3
   3.  Requirements . . . . . . . . . . . . . . . . . . . . . . . . .  3
   4.  Terminology  . . . . . . . . . . . . . . . . . . . . . . . . .  4
   5.  Basic IPv6 Operation . . . . . . . . . . . . . . . . . . . . .  4
   6.  Automatic Tunneling  . . . . . . . . . . . . . . . . . . . . .  5
   7.  Neighbor Discovery . . . . . . . . . . . . . . . . . . . . . .  6
   8.  Deployment Considerations  . . . . . . . . . . . . . . . . . .  9
   9.  Site Administration Considerations . . . . . . . . . . . . . .  9
   10. IANA Considerations  . . . . . . . . . . . . . . . . . . . . . 10
   11. Security considerations  . . . . . . . . . . . . . . . . . . . 10
   12. Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . 10
       Normative References . . . . . . . . . . . . . . . . . . . . . 11
       Informative References . . . . . . . . . . . . . . . . . . . . 11
       Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . 12
   A.  Major Changes  . . . . . . . . . . . . . . . . . . . . . . . . 13
   B.  Rationale for Interface Identifier Construction  . . . . . . . 15
       Intellectual Property and Copyright Statements . . . . . . . . 17































Templin, et al.        Expires September 25, 2003               [Page 2]

Internet-Draft                   ISATAP                       March 2003


1. Introduction

   This document presents a simple approach called the Intra-Site
   Automatic Tunnel Addressing Protocol (ISATAP) that enables
   incremental deployment of IPv6 [RFC2460] within IPv4 [RFC0791] sites.
   ISATAP allows dual-stack nodes that do not share a physical link with
   an IPv6 router to automatically tunnel packets to the IPv6 next-hop
   address through IPv4, i.e., the site's IPv4 infrastructure is treated
   as a link layer for IPv6.

   Specific details for the operation of IPv6 and automatic tunneling
   using ISATAP are given, including an interface identifier format that
   embeds an IPv4 address. This format supports IPv6 address
   configuration and simple link-layer address mapping. Also specified
   is the operation of IPv6 Neighbor Discovery and deployment/security
   considerations.

2. Applicability Statement

   ISATAP provides the following features:

   o  treats site's IPv4 infrastructure as a link layer for IPv6 using
      automatic IPv6-in-IPv4 tunneling

   o  enables incremental deployment of IPv6 hosts within IPv4 sites
      with no aggregation scaling issues at border gateways

   o  requires no special IPv4 services within the site (e.g.,
      multicast)

   o  supports both stateless and stateful autoconfiguration as well as
      manual configuration

   o  supports networks that use non-globally unique IPv4 addresses
      (e.g., when private address allocations [RFC1918] are used)

   o  compatible with other NGTRANS mechanisms (e.g., 6to4 [RFC3056])


3. Requirements

   The keywords MUST, MUST NOT, REQUIRED, SHALL, SHALL NOT, SHOULD,
   SHOULD NOT, RECOMMENDED, MAY, and OPTIONAL, when they appear in this
   document, are to be interpreted as described in [RFC2119].

   This document also makes use of internal conceptual variables to
   describe protocol behavior and external variables that an
   implementation must allow system administrators to change.  The



Templin, et al.        Expires September 25, 2003               [Page 3]

Internet-Draft                   ISATAP                       March 2003


   specific variable names, how their values change, and how their
   settings influence protocol behavior are provided to demonstrate
   protocol behavior.  An implementation is not required to have them in
   the exact form described here, so long as its external behavior is
   consistent with that described in this document.

4. Terminology

   The terminology of [RFC2460] applies to this document. The following
   additional terms are defined:

   link, on-link, off-link:
      same definitions as ([RFC2461], section 2.1).

   underlying link:
      a link layer that supports IPv4 (for ISATAP), and MAY also support
      IPv6 natively.

   ISATAP interface:
      an interface configured over one or more underling links.

   advertising ISATAP interface:
      same meaning as "advertising interface" in ([RFC2461], section
      6.2.2).

   ISATAP address:
      an on-link address on an ISATAP interface and with an interface
      identifier constructed as specified in Section 5.1


5. Basic IPv6 Operation

   ISATAP interfaces automatically tunnel IPv6 packets using the site's
   IPv4 infrastructure as a link layer for IPv6, i.e., IPv6 treats the
   site's IPv4 infrastructure as a Non-Broadcast, Multiple Access (NBMA)
   link layer. The mechanisms in [RFC2491] are used, with the following
   noted exceptions for ISATAP:

5.1 Interface Identifiers and Unicast Addresses

   ISATAP interface identifiers use "modified EUI-64" format ([ARCH],
   section 2.5.1) and are formed by appending an IPv4 address assigned
   to an underlying link to the 32-bit string '00-00-5E-FE'. Appendix B
   includes non-normative rationale for this construction rule.







Templin, et al.        Expires September 25, 2003               [Page 4]

Internet-Draft                   ISATAP                       March 2003


   IPv6 global and local-use ([ARCH], sections 2.5.4, 2.5.6) ISATAP
   addresses are constructed as follows:

    |           64 bits            |     32 bits   |    32 bits     |
    +------------------------------+---------------+----------------+
    | global/local unicast prefix  |   0000:5EFE   |  IPv4 Address  |
    +------------------------------+---------------+----------------+


5.2 ISATAP Interface Configuration

   ISATAP interfaces are configured over one or more underlying links
   that support IPv4 for tunneling within a site; each IPv4 address
   assigned to an underlying link is seen as a link-layer address for
   ISATAP.

5.3 Link Layer Address Options

   With reference to ([RFC2491], section 5.2), when the [NTL] and [STL]
   fields in an ISATAP link layer address option encode 0, the [NBMA
   Number] field encodes a 4-octet IPv4 address.

5.4 Multicast and Anycast

   ISATAP interfaces recognize an IPv6 node's required addresses
   ([ARCH], section 2.8), including certain multicast/anycast addresses.

   Mechanisms for multicast/anycast emulation on ISATAP interfaces
   (e.g., adaptations of MLD [RFC2710], PIM-SM [RFC2362], MARS
   [RFC2022], etc.) are subject for future companion document(s).

6. Automatic Tunneling

   The common tunneling mechanisms specified in ([MECH], sections 2 and
   3) are used, with the following noted considerations for ISATAP:

6.1 Tunnel MTU and Fragmentation

   ISATAP automatic tunnel interfaces may be configured over multiple
   underlying links with diverse maximum transmission units (MTUs). The
   minimum MTU for IPv6 interfaces is 1280 bytes ([RFC2460], Section 5),
   but the following considerations apply for ISATAP interfaces:

   o  Nearly all IPv4 nodes connect to physical links with MTUs of 1500
      bytes or larger (e.g., Ethernet)

   o  Sub-IPv4 layer encapsulations (e.g., VPN) may occur on some paths




Templin, et al.        Expires September 25, 2003               [Page 5]

Internet-Draft                   ISATAP                       March 2003


   o  Commonly-deployed VPN interfaces use an MTU of 1400 bytes

   To maximize efficiency and minimize IPv4 fragmentation for the
   predominant deployment case, the ISATAP interface MTU, or "LinkMTU"
   (see: [RFC2461], Section 6.3.2), SHOULD be set to no more than 1380
   bytes (1400 minus 20 bytes for IPv4 encapsulation). LinkMTU MAY be
   set to larger values when a dynamic link layer MTU discovery
   mechanism is used or when a static MTU assignment is used and
   additional fragmentation in the site's IPv4 network is deemed
   acceptable.

   When a dynamic IPv4 MTU discovery mechanism is not used, the ISATAP
   interface encapsulates IPv6 packets with the Don't Fragment (DF) bit
   not set in the encapsualting IPv4 header.

6.2 Handling IPv4 ICMP Errors

   ARP failures and persistent ICMPv4 errors SHOULD be processed as
   link-specific information indicating that a path to a neighbor has
   failed ([RFC2461], section 7.3.3).

6.3 Local-Use IPv6 Unicast Addresses

   The specification in ([MECH], section 3.7) is not used; the
   specification in Section 5.1 is used instead.

7. Neighbor Discovery

   The specification in ([MECH], section 3.8) applies only to configured
   tunnels. [RFC2461] provides the following guidelines for
   non-broadcast multiple access (NBMA) link support:

      "Redirect, Neighbor Unreachability Detection and next-hop
      determination should be implemented as described in this document.
      Address resolution and the mechanism for delivering Router
      Solicitations and Advertisements on NBMA links is not specified in
      this document."

   ISATAP interfaces SHOULD implement Redirect, Neighbor Unreachability
   Detection, and next-hop determination exactly as specified in
   [RFC2461]. Address resolution and the mechanisms for delivering
   Router Solicitations and Advertisements are not specified by
   [RFC2461]; instead, they are specified in the following sections of
   this document.

7.1 Address Resolution and Neighbor Unreachability Detection

   ISATAP addresses are resolved to link-layer (IPv4) addresses by a



Templin, et al.        Expires September 25, 2003               [Page 6]

Internet-Draft                   ISATAP                       March 2003


   static computation, i.e., the last four octets are treated as an IPv4
   address.

   Hosts SHOULD perform an initial reachability confirmation by sending
   Neighbor Solicitation (NS) message(s) and receiving a Neighbor
   Advertisement (NA) message as specified in ([RFC2461], section 7.2).
   Unless otherwise specified in a future document, solicitations are
   sent to the target's unicast address.

   Hosts SHOULD additionally perform Neighbor Unreachability Detection
   (NUD) as specified in ([RFC2461], section 7.3). Routers MAY perform
   these reachability confirmation and NUD procedures, but this might
   not scale in all environments.

   All ISATAP nodes MUST send solicited neighbor advertisements
   ([RFC2461], section 7.2.4).

7.2 Duplicate Address Detection

   Duplicate Address Detection ([RFC2462], section 5.4) is not required
   for ISATAP addresses, since duplicate address detection is assumed
   already performed for the IPv4 addresses from which they derive.

7.3 Router and Prefix Discovery

   The following sections describe mechanisms to support the router and
   prefix discovery process ([RFC2461], section 6):

7.3.1 Conceptual Data Structures

   ISATAP nodes use the conceptual data structures Prefix List and
   Default Router List exactly as in ([RFC2461], section 5.1). ISATAP
   adds a new conceptual data structure "Potential Router List" (PRL)
   and the following new configuration variable:

   PrlRefreshInterval
      Time in seconds between successive refreshments of the PRL after
      initialization. SHOULD be no less than 3,600 seconds.

      Default: 3,600 seconds

   A PRL is associated with every ISATAP interface. Each entry in the
   PRL ("PRL(i)") has an IPv4 address ("V4ADDR(i)") that represents an
   advertising ISATAP interface and an associated timer ("TIMER(i)").

   When a node enables an ISATAP interface, it initializes the PRL with
   IPv4 addresses. The addresses MAY be discovered via a DHCPv4
   [RFC2131] option for ISATAP, manual configuration, or an unspecified



Templin, et al.        Expires September 25, 2003               [Page 7]

Internet-Draft                   ISATAP                       March 2003


   alternate method (e.g., DHCPv4 vendor-specific option).

   When no other mechanisms are available, a DNS fully-qualified domain
   name (FQDN) [RFC1035] established by an out-of-band method (e.g.,
   DHCPv4, manual configuration, etc.) MAY be used. The FQDN is resolved
   into IPv4 addresses for the PRL through a static host file, a
   site-specific name service, querying a DNS server within the site, or
   an unspecified alternate method. There are no mandatory rules for the
   selection of a FQDN, but manual configuration MUST be supported. When
   DNS is used, client resolvers use the IPv4 transport.

   After initialization, nodes periodically refresh the PRL (i.e., using
   one or more of the methods described above) after PrlRefreshInterval.

7.3.2 Validation of Router Advertisements Messages

   The specification in ([RFC2461], section 6.1.2) is used.

   Additionally, received RA messages that contain Prefix Information
   options and/or encode non-zero values in the Cur Hop Limit, Router
   Lifetime, Reachable Time, or Retrans Timer fields (see: [RFC2461],
   section 4.2) MUST satisfy the following validity check for ISATAP:

   o  the network-layer (IPv6) source address is an ISATAP address and
      embeds V4ADDR(i) for some PRL(i)


7.3.3 Router Specification

   Routers with advertising ISATAP interfaces behave the same as
   described in ([RFC2461], section 6.2). As permitted by ([RFC2461],
   section 6.2.6), advertising ISATAP interfaces SHOULD send unicast RA
   messages to a soliciting host's unicast address when the
   solicitation's source address is not the unspecified address.

7.3.4 Host Specification

   Hosts behave the same as described in ([RFC2461], section 6.3) and
   ([RFC2462], section 5.5) with the following additional considerations
   for ISATAP:

7.3.4.1 Soliciting Router Advertisements

   Hosts solicit Router Advertisements (RAs) by sending Router
   Solicitations (RSs) to advertising ISATAP interfaces in the PRL. The
   manner of selecting PRL(i)'s for solicitation is up to the
   implementation. Hosts add the following variable to support the
   solicitation process:



Templin, et al.        Expires September 25, 2003               [Page 8]

Internet-Draft                   ISATAP                       March 2003


   MinRouterSolicitInterval
      Minimum time in seconds between successive solicitations of the
      same advertising ISATAP interface. SHOULD be no less than 900
      seconds.

      Default: 900 seconds

   RS messages use a link-local unicast address from the ISATAP
   interface as the IPv6 source address. Unless otherwise specified in a
   future document, RS messages use the link-local ISATAP address
   constructed from V4ADDR(i) for the PRL(i) being solicited as the IPv6
   destination address.

7.3.4.2 Router Advertisement Processing

   When the source address of an RA message is an ISATAP address that
   embeds V4ADDR(i) for some PRL(i), hosts reset TIMER(i) to schedule
   the next solicitation event (see: Section 7.3.4.1). Let
   "MIN_LIFETIME" be the minimum value in the router lifetime or the
   lifetime(s) encoded in options included in the RA message. Then,
   TIMER(i) is reset as follows:

      TIMER(i) = MAX((0.5 * MIN_LIFETIME), MinRouterSolicitInterval)


7.3.4.3 Stateful Autoconfiguration

   If stateful autoconfiguration is invoked ([RFC2462], sections 5.5.2,
   5.5.3), the "ALL_DHCP_Relay_Agents_and_Servers" multicast address
   ([DHCPV6], section 5.1) is resolved to the link-local ISATAP address
   constructed from V4ADDR(i) for some PRL(i).

8. Deployment Considerations

   Hosts may enable ISATAP, e.g., when native IPv6 service is
   unavailable. When native IPv6 service is acquired, hosts SHOULD
   discontinue the ISATAP router solicitation process (Section 7.3.4)
   and/or allow associated state to expire (see: [RFC2461], section 5.3
   and [RFC2462], section 5.5.4). Any associated addresses added to the
   DNS should also be removed.

   Routers MAY configure both native IPv6 and ISATAP interfaces over the
   same physical link. The prefixes used on each interface will be
   distinct, and normal IPv6 routing between the interfaces may occur.

9. Site Administration Considerations

   ISATAP sites are administratively defined by a set of advertising



Templin, et al.        Expires September 25, 2003               [Page 9]

Internet-Draft                   ISATAP                       March 2003


   interfaces and set of nodes that solicit those interfaces. Thus,
   ISATAP sites are defined by administrative (not physical) boundaries.

   Site administrators maintain a list of IPv4 addresses representing
   advertising ISATAP interfaces and make them available via one or more
   of the mechanisms described in Section 7.3.1. Responsible
   administration can reduce control traffic overhead.

10. IANA Considerations

   Modifications to the IANA "ethernet-numbers" registry (e.g., based on
   text in Appendix B) are requested.

11. Security considerations

   ISATAP site border routers and firewalls MUST implement IPv6 and IPv4
   ingress filtering, including ip-protocol-41 filtering. Packets with
   local-use source and/or destination addresses MUST NOT be forwarded
   outside of the site.

   Even with IPv4 and IPv6 ingress filtering, reflection attacks can
   originate from compromised nodes within an ISATAP site that spoof
   IPv6 source addresses. Security mechanisms for reflection attack
   mitigation SHOULD be used in routers with advertising ISATAP
   interfaces. At a minimum, border gateways SHOULD log potential source
   address spoofing cases.

   ISATAP addresses do not support privacy extensions for stateless
   address autoconfiguration [RFC3041]. However, since the ISATAP
   interface identifier is derived from the node's IPv4 address, ISATAP
   addresses do not have the same level of privacy concerns as IPv6
   addresses that use an interface identifier derived from the MAC
   address. (This is especially true when private address allocations
   [RFC1918] are used.)

12. Acknowledgements

   Some of the ideas presented in this draft were derived from work at
   SRI with internal funds and contractual support. Government sponsors
   who supported the work include Monica Farah-Stapleton and Russell
   Langan from U.S. Army CECOM ASEO, and Dr. Allen Moshfegh from U.S.
   Office of Naval Research. Within SRI, Dr. Mike Frankel, J. Peter
   Marcotullio, Lou Rodriguez, and Dr. Ambatipudi Sastry supported the
   work and helped foster early interest.

   The following peer reviewers are acknowledged for taking the time to
   review a pre-release of this document and provide input: Jim Bound,
   Rich Draves, Cyndi Jung, Ambatipudi Sastry, Aaron Schrader, Ole



Templin, et al.        Expires September 25, 2003              [Page 10]

Internet-Draft                   ISATAP                       March 2003


   Troan, Vlad Yasevich.

   The authors acknowledge members of the NGTRANS community who have
   made significant contributions to this effort, including Rich Draves,
   Alain Durand, Nathan Lutchansky, Karen Nielsen, Art Shelest, Margaret
   Wasserman, and Brian Zill.

   The authors also wish to acknowledge the work of Quang Nguyen [VET]
   under the guidance of Dr. Lixia Zhang that proposed very similar
   ideas to those that appear in this document. This work was first
   brought to the authors' attention on September 20, 2002.

Normative References

   [ARCH]     Hinden, R. and S. Deering, "IP Version 6 Addressing
              Architecture", draft-ietf-ipngwg-addr-arch-v3-11 (work in
              progress), October 2002.

   [MECH]     Gilligan, R. and E. Nordmark, "Basic Transition Mechanisms
              for IPv6 Hosts and Routers", draft-ietf-v6ops-mech-v2-00
              (work in progress), February 2003.

   [RFC0791]  Postel, J., "Internet Protocol", STD 5, RFC 791, September
              1981.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC2460]  Deering, S. and R. Hinden, "Internet Protocol, Version 6
              (IPv6) Specification", RFC 2460, December 1998.

   [RFC2461]  Narten, T., Nordmark, E. and W. Simpson, "Neighbor
              Discovery for IP Version 6 (IPv6)", RFC 2461, December
              1998.

   [RFC2462]  Thomson, S. and T. Narten, "IPv6 Stateless Address
              Autoconfiguration", RFC 2462, December 1998.

   [RFC2463]  Conta, A. and S. Deering, "Internet Control Message
              Protocol (ICMPv6) for the Internet Protocol Version 6
              (IPv6) Specification", RFC 2463, December 1998.

   [RFC2491]  Armitage, G., Schulter, P., Jork, M. and G. Harter, "IPv6
              over Non-Broadcast Multiple Access (NBMA) networks", RFC
              2491, January 1999.

Informative References




Templin, et al.        Expires September 25, 2003              [Page 11]

Internet-Draft                   ISATAP                       March 2003


   [DHCPV6]   Droms, R., "Dynamic Host Configuration Protocol for IPv6
              (DHCPv6)", draft-ietf-dhc-dhcpv6-28 (work in progress),
              November 2002.

   [RFC1035]  Mockapetris, P., "Domain names - implementation and
              specification", STD 13, RFC 1035, November 1987.

   [RFC1918]  Rekhter, Y., Moskowitz, R., Karrenberg, D., Groot, G. and
              E. Lear, "Address Allocation for Private Internets", BCP
              5, RFC 1918, February 1996.

   [RFC2022]  Armitage, G., "Support for Multicast over UNI 3.0/3.1
              based ATM Networks", RFC 2022, November 1996.

   [RFC2131]  Droms, R., "Dynamic Host Configuration Protocol", RFC
              2131, March 1997.

   [RFC2362]  Estrin, D., Farinacci, D., Helmy, A., Thaler, D., Deering,
              S., Handley, M. and V. Jacobson, "Protocol Independent
              Multicast-Sparse Mode (PIM-SM): Protocol Specification",
              RFC 2362, June 1998.

   [RFC2710]  Deering, S., Fenner, W. and B. Haberman, "Multicast
              Listener Discovery (MLD) for IPv6", RFC 2710, October
              1999.

   [RFC3041]  Narten, T. and R. Draves, "Privacy Extensions for
              Stateless Address Autoconfiguration in IPv6", RFC 3041,
              January 2001.

   [RFC3056]  Carpenter, B. and K. Moore, "Connection of IPv6 Domains
              via IPv4 Clouds", RFC 3056, February 2001.

   [VET]      Nguyen, Q., "http://irl.cs.ucla.edu/vet/report.ps", spring
              1998.


Authors' Addresses

   Fred L. Templin
   Nokia
   313 Fairchild Drive
   Mountain View, CA  94110
   US

   Phone: +1 650 625 2331
   EMail: ftemplin@iprg.nokia.com




Templin, et al.        Expires September 25, 2003              [Page 12]

Internet-Draft                   ISATAP                       March 2003


   Tim Gleeson
   Cisco Systems K.K.
   Shinjuku Mitsu Building
   2-1-1 Nishishinjuku, Shinjuku-ku
   Tokyo  163-0409
   Japan

   EMail: tgleeson@cisco.com


   Mohit Talwar
   Microsoft Corporation
   One Microsoft Way
   Redmond, WA>  98052-6399
   US

   Phone: +1 425 705 3131
   EMail: mohitt@microsoft.com


   Dave Thaler
   Microsoft Corporation
   One Microsoft Way
   Redmond, WA  98052-6399
   US

   Phone: +1 425 703 8835
   EMail: dthaler@microsoft.com

Appendix A. Major Changes

   changes from version 12 to version 13:

   o  Added comments from co-authors

   o  Text cleanup; removed extraneous text

   o  Revised ISATAP interface/link terminology

   o  Returned to using symbolic reference names

   o  Revised MTU section; moved non-normative MTU text to seperate
      document

   changes from earlier versions to version 12:

   o  Added multicast/anycast subsection




Templin, et al.        Expires September 25, 2003              [Page 13]

Internet-Draft                   ISATAP                       March 2003


   o  Revised PRL initialization

   o  Updated neighbor discovery, security consideration sections

   o  Rearranged/revised sections 5, 6, 7

   o  Added stateful autoconfiguration mechanism

   o  Normative references to RFC 2491, RFC 2462

   o  Moved non-normative MTU text to appendix C

   o  clarified address resolution, Neighbor Unreachability Detection

   o  specified MTU/MRU requirements

   o  Addressed operational issues identified in 05 based on discussion
      between co-authors

   o  Clarified ambiguous text per comments from Hannu Flinck; Jason
      Goldschmidt

   o  Moved historical text in section 4.1 to Appendix B in response to
      comments from Pekka Savola

   o  Identified operational issues for anticipated deployment scenarios

   o  Included reference to Quang Nguyen work























Templin, et al.        Expires September 25, 2003              [Page 14]

Internet-Draft                   ISATAP                       March 2003


Appendix B. Rationale for Interface Identifier Construction

   ISATAP specifies an EUI64-format address construction for the
   Organizationally-Unique Identifier (OUI) owned by the Internet
   Assigned Numbers Authority (IANA). This format (given below) is used
   to construct both native EUI64 addresses for general use and modified
   EUI-64 format interface identifiers for IPv6 unicast addresses:

   |0                      2|2      3|3      3|4                      6|
   |0                      3|4      1|2      9|0                      3|
   +------------------------+--------+--------+------------------------+
   |  OUI ("00-00-5E"+u+g)  |  TYPE  |  TSE   |          TSD           |
   +------------------------+--------+--------+------------------------+

   Where the fields are:

      OUI     IANA's OUI: 00-00-5E with 'u' and 'g' bits (3 octets)

      TYPE    Type field; specifies use of (TSE, TSD) (1 octet)

      TSE     Type-Specific Extension (1 octet)

      TSD     Type-Specific Data (3 octets)

   And the following interpretations are specified based on TYPE:

      TYPE         (TSE, TSD) Interpretation
      ----         -------------------------
      0x00-0xFD    RESERVED for future IANA use
      0xFE         (TSE, TSD) together contain an embedded IPv4 address
      0xFF         TSD is interpreted based on TSE as follows:

                   TSE          TSD Interpretation
                   ---          ------------------
                   0x00-0xFD    RESERVED for future IANA use
                   0xFE         TSD contains 24-bit EUI-48 intf id
                   0xFF         RESERVED by IEEE/RAC

   Thus, if TYPE=0xFE, TSE is an extension of TSD. If TYPE=0xFF, TSE is
   an extension of TYPE. Other values for TYPE (thus, other
   interpretations of TSE, TSD) are reserved for future IANA use.

   The above specification is compatible with all aspects of EUI64,
   including support for encapsulating legacy EUI-48 interface
   identifiers (e.g., an IANA EUI-48 format multicast address such as:
   '01-00-5E-01-02-03' is encapsulated as: '01-00-5E-FF-FE-01-02-03').
   But, the specification also provides a special TYPE (0xFE) to
   indicate an IPv4 address is embedded. Thus, when the first four



Templin, et al.        Expires September 25, 2003              [Page 15]

Internet-Draft                   ISATAP                       March 2003


   octets of an IPv6 interface identifier are: '00-00-5E-FE' (note: the
   'u/l' bit MUST be 0) the interface identifier is said to be in
   "ISATAP format" and the next four octets embed an IPv4 address
   encoded in network byte order.















































Templin, et al.        Expires September 25, 2003              [Page 16]

Internet-Draft                   ISATAP                       March 2003


Intellectual Property Statement

   The IETF takes no position regarding the validity or scope of any
   intellectual property or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; neither does it represent that it
   has made any effort to identify any such rights. Information on the
   IETF's procedures with respect to rights in standards-track and
   standards-related documentation can be found in BCP-11. Copies of
   claims of rights made available for publication and any assurances of
   licenses to be made available, or the result of an attempt made to
   obtain a general license or permission for the use of such
   proprietary rights by implementors or users of this specification can
   be obtained from the IETF Secretariat.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights which may cover technology that may be required to practice
   this standard. Please address the information to the IETF Executive
   Director.

   The IETF has been notified of intellectual property rights claimed in
   regard to some or all of the specification contained in this
   document. For more information consult the online list of claimed
   rights.


Full Copyright Statement

   Copyright (C) The Internet Society (2003). All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works. However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assignees.



Templin, et al.        Expires September 25, 2003              [Page 17]

Internet-Draft                   ISATAP                       March 2003


   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.







































Templin, et al.        Expires September 25, 2003              [Page 18]


