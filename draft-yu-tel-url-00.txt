


Internet Draft                                                 James Yu
Document: <draft-yu-tel-url-00.txt>                       NeuStar, Inc.
Category: Informational                                       July 2000




  Extensions to the "tel" and "fax" URLs to Support Number Portability

                      <draft-yu-tel-url-00.txt>




Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026 [RFC].

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups. Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six
   months and may be updated, replaced, or obsoleted by other documents
   at any time. It is inappropriate to use Internet- Drafts as
   reference material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   To learn the current status of any Internet-Draft, please check the
   "1id-abstracts.txt" listing contained in the Internet-Drafts Shadow
   Directories on ftp.is.co.za (Africa), nic.nordu.net (Europe),
   munnari.oz.au (Pacific Rim), ds.internic.net (US East Coast), or
   ftp.isi.edu (US West Coast).














<draft-yu-tel-url-00>   Informational-Expiration on January 2001      1

 Extension to the "tel" and "fax" URLs to Support NP          July 2000


 1. Abstract

   Number portability (NP) allows the telephone subscribers to keep
   their telephone numbers when they change service provider, move to a
   new location, or change the subscribed services.  The NP
   implementations in many countries presently support service provider
   portability for geographic numbers and non-geographical numbers.  It
   has been identified that NP has impacts on several works-in-progress
   at the IETF.  One of the impacts is to carry the NP related
   information in the SIP INVITE message.  This document proposed the
   extensions to the "tel" and "fax" Uniform Resource Locators (URLs)
   to support NP so that they can be used to carry the NP related
   information in the Session Initiation Protocol (SIP) Request-URI.


2. Introduction

   This document proposes the extensions to the "tel" and "fax" Uniform
   Resource Locators (URLs) for supporting number portability (NP).
   [NP] provides an overview of the NP in the GSTN and points out the
   impacts of NP in several works-in-progress at the IETF Working
   Groups.  One of the impacts is to be able to carry the NP related
   information in the Session Initiation Protocol (SIP) INVITE message.

   The NP related information includes the dialed directory number, a
   routing number and an indicator that indicates whether a query to
   the Number Portability Database (NPDB) has been performed.  The
   routing number allows the network, either the Global Switched
   Telephone Network (GSTN) or the IP-based network, to route the call
   to the network or switch that currently serves the dialed called
   party number that has ported out of the donor network. The NPDB dip
   indicator informs the network entities downstream towards the
   terminating network (e.g., the network that currently serves the
   called party number) that NPDB dip has been performed; therefore,
   there is no need to dip the NPDB again.  The dialed called party
   number is needed at the terminating switch so that the call can be
   terminated to a correct line card.  If the routing number only
   points to the terminating network, the called party number would be
   used for another NPDB query to retrieve another routing number that
   is typically a network-specific routing number for routing the call
   to the terminating switch.


3. SIP Request-URI

   The SIP INVITE message contains a "Request-URI" element that is used
   by the SIP servers for making routing decisions.  As indicated in
   [SIP], SIP servers may support Request-URIs with schemes other than
   "SIP," for example, the "tel" URI scheme. [TEL] specifies the URL
   schemes "tel," "fax" and "modem" for specifying the location of a
   terminal in the phone network and the connection types (modes of
   operation) that can be used to connect to that entity.  By examining
   the SIP URL and "tel" URL, it seems that the "tel" URL is a better

<draft-yu-tel-url-00>    Informational - Expiration in January 2001   2

 Extension to the "tel" and "fax" URLs to Support NP          July 2000


   place to carry the NP related information.  Since the "fax" URL may
   be used for fax calls, both the "tel" and "fax" URLs need to be
   enhanced to support NP.


4. Proposed extensions to the "tel" RUL Scheme

   The following shows the extensions to the "tel" URL.  Only the
   impacted items/lines are shown below.

   global-phone-number  = (no change)
                          (no change)
                          (no change)
                          *1(number-portability)
   local-phone-number   = (no change)
                          (no change)
                          (no change)
                          (no change)
                          future-extension) *1(number-portability)
   number-portability   = ";" routing-number *1(";" npdb-dip-indicator)
   routing-number       = rn-tag "=" *1("+") rn-ident
   rn-tag               = "rn"
   rn-ident             = *15(hex excluding "F")
   npdi-dip-indicator   = npdi-tag "=" npdi-ident
   npdi-tag             = "npdi"
   npdi-ident           = "yes" / "no"

   It is assumed that national routing number may appear with other
   global-phone-number information and international routing number may
   appear with other local-phone-number information.  The routing
   number digit can be any hexadecimal digit except the digit "F."

   The routing number and the NPDB dip indicator can appear at most
   once if present.  The routing number can contain hexadecimal digits
   from 0 to E. When the routing number is present, the NPDB dip
   indicator may or may not be present.  This is because that the
   routing number may be present independent of NP.  When the "npdi"
   parameter is not present, it indicates that either NPDB dip has not
   been performed (equivalent to npdi=no) or NP is not relevant.  If a
   SIP server is set to perform the NPDB queries and if a received
   INVITE message does not contain "yes" in the "npdi" parameter, it
   will perform the NPDB query.  The NPDB query is outside the scope of
   this document.  The routing number received in the response (plus
   the "+" and the country code when necessary) will replace the
   routing number in the "rn" parameter if present or will be used by
   the new "rn" parameter if "rn" parameter is not present.  The "npdi"
   parameter will be set to "yes" in this case.  The routing number can
   be a global routing number (e.g., with "+" and the country code) or
   a local (e.g., network-specific) routing number.   When the "rn"
   parameter is present, it must be used for making routing decisions
   (e.g., against the TRIP routing tables)[TRIP].  If the "rn"
   parameter is not present, the telephone number right after "tel:" is
   used as the routing number.

<draft-yu-tel-url-00>    Informational - Expiration in January 2001   3

 Extension to the "tel" and "fax" URLs to Support NP          July 2000



   It is possible that interworking between SIP and Signaling System
   No. 7 (SS7) Integrated Services Digital Network User Part (ISUP) is
   required at the border between the Global Switched Telephone Network
   (GSTN) and the IP-based network.  For SIP to GSTN interworking and
   depending on the ISUP support of NP, the information in the "tel"
   URL will be mapped/carried in the proper ISUP parameters.  For
   example, for the GSTN in the U.S., the routing number in the "rn"
   parameter is carried in the ISUP Called Party Number Parameter.  The
   phone number after "tel:" is carried in the ISUP Generic Address
   Parameter.  Only national numbers are carried (e.g., without the "+"
   and the country code) in the ISUP parameter.  The "npdi" parameter
   that contains "yes" cause the Forward Call Indicator parameter to be
   properly set to indicate that NPDB has been dipped.   If the
   terminating GSTN supports concatenated routing number and directory
   number (e.g., in Europe), then the routing number and the phone
   number are concatenated and put in the ISUP Called Party Number
   parameter.  The NOA value will be set according the terminating
   GSTN's NP standards.

   For GSTN to IP interworking, when the ISUP signaling contains the NP
   related information, the NP related information is mapped to the
   "tel" URL.  This happens for domestic calls where the originating
   GSTN has performed the NPDB query, or for international calls that
   have arrived at the terminating country's GSTN where that GSTN has
   performed the NPDB query.  It is assumed that the GSTN routes the
   call via the IP-based network to the terminating switch or network
   in the same country, and SIP and ISUP interworking is involved.  For
   the GSTN in the U.S., the interworking is straightforward.  The
   indication in the ISUP Forward Call Indicator parameter that NPDB
   dip has been performed will set "npdi" to "yes," the number in the
   Called Party Number parameter plus the "+" and the country code, if
   a global routing number, is carried in the "rn" parameter, and
   called party number in the Generic Address Parameter plus the "+"
   and the country code, if a global phone number, appears after
   "tel:".  For GSTN that supports concatenated routing number and
   directory number (e.g., in Europe), the IP entity that performs the
   interworking needs to know the routing number used by the GSTN so
   that the routing number and the directory number in the concatenated
   format in the ISUP Called Party Number parameter can be separate out
   and transported in the "rn" parameter and after "tel:" by adding the
   "+" and the country code to them if they are global routing number
   and phone numbers.

5. Proposed extension to the "fax" URL Scheme

   The following shows the extensions to the "fax" URL.  Only the
   impacted items/lines are shown below.


   fax-global-phone     = (no change)
                          (no change)
                          (no change)

<draft-yu-tel-url-00>    Informational - Expiration in January 2001   4

 Extension to the "tel" and "fax" URLs to Support NP          July 2000


                          future extension) *1(number-portability)
   fax-local-phone      = (no change)
                          (no change)
                          (no change)
                          (no change)
                          future-extension) *1(number-portability)
   number-portability   = ";" routing-number *1(";" npdb-dip-indicator)
   routing-number       = rn-tag "=" *1("+") rn-ident
   rn-tag               = "rn"
   rn-ident             = *15(hex excluding "F")
   npdi-dip-indicator   = npdi-tag "=" npdi-ident
   npdi-tag             = "npdi"
   npdi-ident           = "yes" / "no"

   The same discussions in Section 5 also apply to this section.


6. Examples

   To simply the example and to focus on the "tel" URL in the Request-
   URI, only the Request-Line of a complete SIP INVITE message is
   shown.  A SIP server receives an INVITE message as shown below where
   +1-202-533-1234 is the dialed called party number and has been
   ported out of the donor network.

   INVITE tel:+1-202-533-1234 SIP/2.0

   Assume that this SIP server is set to perform the NPDB query.  Since
   this INVITE message does not contain the "npdi" parameter, this SIP
   server will perform a NPDB query.  After receiving a response back
   from a NPDB, it formulates the following SIP INVITE message:

   INVITE tel:+1-202-533-1234;rn=+1-202-544-0000;npdi=yes SIP/2.0

   This SIP server then uses the "rn" parameter to make the routing
   decisions (e.g., using the routing number in the "rn" parameter to
   check against the TRIP tables to determine the terminating GSTN
   gateway).

   If the dialed called party number +1-202-533-1234 is not ported and
   the dialed called party number can be used as the routing number,
   the outbound SIP INVITE message may look like

   INVITE tel:+1-202-533-1234;rn=+1-202-533-1234;npdi=yes SIP/2.0

   or

   INVITE tel:+1-202-533-1234;npdi=yes SIP/2.0

   The concept is that "rn," if present, is used for making routing
   decisions, and the phone number after "tel:" is used if "rn" is not
   present.


<draft-yu-tel-url-00>    Informational - Expiration in January 2001   5

 Extension to the "tel" and "fax" URLs to Support NP          July 2000



7. Conclusion

   This Internet Draft proposes extensions to the "tel" and "fax" URLs
   described in [TEL] to allow the SIP to carry the NP related
   information in the "tel" and "fax" URLs.  If agreed, it is proposed
   to incorporate the proposed extensions in the next revision of
   RFC2806.



REFERENCES

   [NP]   M. Foster, T. McGarry and J. Yu, "Number Portability in the
          GSTN: An Overview," draft-foster-e164-gstn-np-01.txt, July
          2000.

   [TEL]  A. Vaha-Sipila, "URLs for Telephone Calls," RFC 2806, April
          2000.

   [SIP]  M. Handley, H. Schulzrinne, E. Schooler and J. Rosenberg,
          "SIP: Session Initiation Protocol," draft--ietf-sip-
          rfc2543bis-00.ps, May 2000.

   [TRIP] J. Rosenberg, H. Salama and M. Squire, draft-ietf-iptel-trip-
          02.txt, "Telephony Routing Information Protocol (TRIP)," May
          2000.


Acknowledgement

   The author would like to thank Jonathan Rosenberg and Henning
   Schulzrinne for the discussion of SIP support of NP.


Full Copyright Statement

   "Copyright (C) The Internet Society (date). All Rights Reserved.
   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph
   are included on all such copies and derivative works. However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into.




<draft-yu-tel-url-00>    Informational - Expiration in January 2001   6
