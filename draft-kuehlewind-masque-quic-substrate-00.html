<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Use Cases and Requirements for QUIC as a Substrate</title>
<meta content="Mirja Kuehlewind" name="author">
<meta content="Zaheduzzaman Sarker" name="author">
<meta content="Thomas Fossati" name="author">
<meta content="Lucas Pardue" name="author">
<meta content="
       In situations where direct connectivity is not available or desired, proxies in the network
are used to forward and potentially translate traffic.
TCP is often used as a proxying or tunneling protocol. QUIC is a new,
emerging transport protocol and there is a similar expectation that it too will
be used as a substrate once it is widely deployed. Using QUIC instead of TCP in
existing scenarios will allow proxying and tunneling services to maintain the benefits
of QUIC natively, without degrading the performance and security characteristics.
QUIC also opens up new opportunities for these services to have lower latency and
better multistreaming support. This document summarizes current and future usage
scenarios to derive requirements for QUIC as a substrate and to provide additional
considerations for proxy signaling and control protocol as proposed by MASQUE. 
    " name="description">
<meta content="xml2rfc 2.40.1" name="generator">
<meta content="Internet-Draft" name="keyword">
<meta content="draft-kuehlewind-masque-quic-substrate-00" name="ietf.draft">
<link href="/tmp/draft-kuehlewind-masque-quic-substrate-00-uwaoierh.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Avoid wrapping of URLs in references */
@media screen {
  .references a {
    white-space: nowrap;
  }
}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin: 0 0 0.25em 0;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/*
  The margin-left: 0 on <dd> removes all distinction
  between levels from nested <dl>s.  Undo that.
*/
dl.olPercent > dd,
dd {
  margin-left: revert;
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">QUIC Substrate</td>
<td class="right">March 2020</td>
</tr></thead>
<tfoot><tr>
<td class="left">Kuehlewind, et al.</td>
<td class="center">Expires 10 September 2020</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">Network Working Group</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-kuehlewind-masque-quic-substrate-00</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2020-03-09" class="published">9 March 2020</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Informational</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2020-09-10">10 September 2020</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">M. Kuehlewind</div>
<div class="org">Ericsson</div>
</div>
<div class="author">
      <div class="author-name">Z. Sarker</div>
<div class="org">Ericsson</div>
</div>
<div class="author">
      <div class="author-name">T. Fossati</div>
<div class="org">Arm</div>
</div>
<div class="author">
      <div class="author-name">L. Pardue</div>
<div class="org">Cloudflare</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Use Cases and Requirements for QUIC as a Substrate</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">In situations where direct connectivity is not available or desired, proxies in the network
are used to forward and potentially translate traffic.
TCP is often used as a proxying or tunneling protocol. QUIC is a new,
emerging transport protocol and there is a similar expectation that it too will
be used as a substrate once it is widely deployed. Using QUIC instead of TCP in
existing scenarios will allow proxying and tunneling services to maintain the benefits
of QUIC natively, without degrading the performance and security characteristics.
QUIC also opens up new opportunities for these services to have lower latency and
better multistreaming support. This document summarizes current and future usage
scenarios to derive requirements for QUIC as a substrate and to provide additional
considerations for proxy signaling and control protocol as proposed by MASQUE.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 10 September 2020.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2020 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a><a href="#section-toc.1-1.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="xref">2</a>.  <a href="#name-usage-scenarios" class="xref">Usage Scenarios</a><a href="#section-toc.1-1.2.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1"><a href="#section-2.1" class="xref">2.1</a>.  <a href="#name-obfuscation-via-tunneling" class="xref">Obfuscation via Tunneling</a><a href="#section-toc.1-1.2.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.2.2.2">
                <p id="section-toc.1-1.2.2.2.1"><a href="#section-2.2" class="xref">2.2</a>.  <a href="#name-advanced-support-of-user-ag" class="xref">Advanced Support of User Agents</a><a href="#section-toc.1-1.2.2.2.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.2.2.2.2.1">
                    <p id="section-toc.1-1.2.2.2.2.1.1"><a href="#section-2.2.1" class="xref">2.2.1</a>.  <a href="#name-security-and-access-policy-" class="xref">Security and Access Policy Enforcement</a><a href="#section-toc.1-1.2.2.2.2.1.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.2.2.3">
                <p id="section-toc.1-1.2.2.3.1"><a href="#section-2.3" class="xref">2.3</a>.  <a href="#name-frontend-support-for-load-b" class="xref">Frontend Support for Load Balancing and Migration/Mobility</a><a href="#section-toc.1-1.2.2.3.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.2.2.4">
                <p id="section-toc.1-1.2.2.4.1"><a href="#section-2.4" class="xref">2.4</a>.  <a href="#name-iot-gateways" class="xref">IoT Gateways</a><a href="#section-toc.1-1.2.2.4.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.2.2.5">
                <p id="section-toc.1-1.2.2.5.1"><a href="#section-2.5" class="xref">2.5</a>.  <a href="#name-multi-hop-chaining-usage" class="xref">Multi-hop Chaining Usage</a><a href="#section-toc.1-1.2.2.5.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.2.2.5.2.1">
                    <p id="section-toc.1-1.2.2.5.2.1.1"><a href="#section-2.5.1" class="xref">2.5.1</a>.  <a href="#name-considerations-for-multiple" class="xref">Considerations for Multiple Encryption</a><a href="#section-toc.1-1.2.2.5.2.1.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-requirements" class="xref">Requirements</a><a href="#section-toc.1-1.3.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-review-of-existing-approach" class="xref">Review of Existing Approaches</a><a href="#section-toc.1-1.4.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-contributors" class="xref">Contributors</a><a href="#section-toc.1-1.5.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-references" class="xref">References</a><a href="#section-toc.1-1.6.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a href="#section-6.1" class="xref">6.1</a>.  <a href="#name-normative-references" class="xref">Normative References</a><a href="#section-toc.1-1.6.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.6.2.2">
                <p id="section-toc.1-1.6.2.2.1"><a href="#section-6.2" class="xref">6.2</a>.  <a href="#name-informative-references" class="xref">Informative References</a><a href="#section-toc.1-1.6.2.2.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-appendix.a" class="xref"></a><a href="#name-authors-addresses" class="xref">Authors' Addresses</a><a href="#section-toc.1-1.7.1" class="pilcrow">¶</a></p>
</li>
</ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">QUIC is a new transport protocol that was developed with a focus on optimizing
HTTP traffic by supporting multiplexing without head-of-line-blocking and integrating
security directly into the transport. This tight integration of security allows the transport
and security handshakes to be combined into a single round-trip exchange, after which
both the transport connection and authenticated encryption keys are ready.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">Based on the expectation that QUIC will be widely used for HTTP, it follows that there
will also be a need to enable the use of QUIC for HTTP proxy services.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">Beyond HTTP, however, QUIC provides a general-purpose transport protocol that can
be used for many other kinds of traffic, whenever the features provided by QUIC
(compared to existing options, like TCP) are beneficial to the high-layer service.
Specifically, QUIC's ability to multiplex, encrypt data, and migrate between network paths
makes it ideal for solutions that needs to tunnel or proxy traffic.<a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4">Existing proxies that are not based on QUIC are often transparent. That is, they do not
require the cooperation of the ultimate connection endpoints, and are often not
visible to one or both of the endpoints. If QUIC provides the basis for future tunneling
and proxying solutions, it is expected that this relationship will change. At least one
of the endpoints will be aware of the proxy and explicitly coordinate with it. This allows
client hosts to make explicit decisions about the services they request from proxies
(for example, simple forwarding or more advance, e.g. performance-optimizing, services),
and to do so using a secure communication channel between themselves and the proxy.<a href="#section-1-4" class="pilcrow">¶</a></p>
<p id="section-1-5">MASQUE <span>[<a href="#I-D.schinazi-masque" class="xref">I-D.schinazi-masque</a>]</span> is a proposed framework that allows running multiple network or
application services inside one QUIC connection to be forwarded to one or
more target servers. The end-to-end traffic between the client and the target server
will be tunnelled in a (outer) QUIC connection between the client and the MASQUE server.
This outer connection can also be used to securely exchange additional signal or control
information between the MASQUE server and the client.<a href="#section-1-5" class="pilcrow">¶</a></p>
<p id="section-1-6">This document describes some of the use cases for using QUIC for proxying and tunneling,
as proposed by MASQUE, and explains the protocol impacts and tradeoffs of such deployments.<a href="#section-1-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="usage-scenarios">
<section id="section-2">
      <h2 id="name-usage-scenarios">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-usage-scenarios" class="section-name selfRef">Usage Scenarios</a>
      </h2>
<div id="obfuscation-via-tunneling">
<section id="section-2.1">
        <h3 id="name-obfuscation-via-tunneling">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-obfuscation-via-tunneling" class="section-name selfRef">Obfuscation via Tunneling</a>
        </h3>
<p id="section-2.1-1">Tunnels are used in many scenarios within the core of the network
from a client endpoint to a proxy middlepoint on the way towards the server. In many cases, when
the client explicitly decides to use the support of a proxy in order to
connect to a server, it does so because a direct connection may be blocked or impaired. This
can either be the case in e.g. enterprise network where traffic is firewalled
and web traffic needs to be routed over an explicitly provided HTTP proxy, or
other reasons for blocking of certain services e.g. due to censorship, data
exfiltration protection, etc.<a href="#section-2.1-1" class="pilcrow">¶</a></p>
<p id="section-2.1-2">Tunneling through a proxy server can provide various benefits, particularly when
using a proxy that has a secure multiplexed channel like QUIC:<a href="#section-2.1-2" class="pilcrow">¶</a></p>
<ul>
<li id="section-2.1-3.1">Obfuscating the traffic patterns of the traffic from the perspective of observers
between the client and the proxy. If the content of connections to many end servers
can be coalesced as one flow, it becomes increasingly difficult for observers to
detect how many inner connections are being used, or what the content of
those connections are.<a href="#section-2.1-3.1" class="pilcrow">¶</a>
</li>
<li id="section-2.1-3.2">Obfuscating the client's IP address from the perspective of observers after the proxy,
to the end server itself. This allows the client to reduce information leaked about its actual
location, improving privacy.<a href="#section-2.1-3.2" class="pilcrow">¶</a>
</li>
<li id="section-2.1-3.3">Obfuscating the end server's IP address from the observers between the client and
the proxy, which protects the identity of a private server's address or circumvents
local firewall rules.<a href="#section-2.1-3.3" class="pilcrow">¶</a>
</li>
</ul>
<p id="section-2.1-4">In any of these tunneling scenarios, including those deployed today, the client
explicitly decides to make use of a proxy service while it is usually fully transparent
for the server, or even with the intention to hide the client's identity from the
server. This is explicitly part of the design as these services are targeting an
impaired or otherwise constrained network setup.<a href="#section-2.1-4" class="pilcrow">¶</a></p>
<p id="section-2.1-5">Therefore, in this usage scenario the client knows the proxy's address and explicitly
selects to connect to the proxy in order to instruct the proxy to forward its
traffic to a specific target server. Often the proxy is also preconfigured to "know" the
client and therefore the client needs to authenticate itself (e.g. using HTTP Transport
Authentication <span>[<a href="#I-D.schinazi-httpbis-transport-auth" class="xref">I-D.schinazi-httpbis-transport-auth</a>]</span>). But even without authentication,
at a minimum, the client needs to communicate directly with the proxy to provide
the address of the target server it wants to connect to, e.g. using HTTP CONNECT,
and potentially other information needed to inform the behaviour of the proxy.<a href="#section-2.1-5" class="pilcrow">¶</a></p>
<p id="section-2.1-6">Usually the server is not aware of the proxy in the middle, so
the proxy needs to re-write the IP address of any traffic inside the tunnel to
ensure that the return traffic is also routed back to the proxy. This is also often
used to conceal the address/location of the client to the server, e.g. to access
local content that would not be accessible by the client at its current location
otherwise.<a href="#section-2.1-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="advanced-support-of-user-agents">
<section id="section-2.2">
        <h3 id="name-advanced-support-of-user-ag">
<a href="#section-2.2" class="section-number selfRef">2.2. </a><a href="#name-advanced-support-of-user-ag" class="section-name selfRef">Advanced Support of User Agents</a>
        </h3>
<p id="section-2.2-1">Depending on the traffic that is sent "over" the proxy, it is also possible that
the proxy can perform additional support services if requested by the client.
Today, Performance Enhancing Proxies (PEPs) usually work transparently by either
fully or partially terminating the transport connection. For many of these support services
the termination is actually not needed and may even be problematic. However, it is often the only,
or at least easiest, solution if no direct communication with the client is available.
Enabling these services based on an explicit tunnel setup between the client and
the proxy provides such a communication channel and makes it possible to
exchange information in a private and authenticated way.<a href="#section-2.2-1" class="pilcrow">¶</a></p>
<p id="section-2.2-2">It is expected that in-network functions are usually provided close to the
client e.g. hosted by the access network provider. Having this direct relation between
the endpoint and the network service is also necessary in order to discover the
service, as the assumption is that a client knows how to address the proxy
service and which service is offered (besides forwarding). Such a setup is
especially valuable in access networks with challenging link environments such as
satellite or cellular networks. While end-to-end functions need to be designed
to handle all kind of network conditions, direct support from the network can
help to optimize for the specific characteristics of the access network such as use
of link-specific congestion control or local repair mechanisms.<a href="#section-2.2-2" class="pilcrow">¶</a></p>
<p id="section-2.2-3">Further, if not provided by the server directly, a network support function can
also assist the client to adapt or prioritize the traffic based on user preferences
or device characteristics and capabilities. Again, especially if the access network is
constrained, this can benefit both the network provider to save resources and
the client to receive the desired service quicker or less impaired. Such a
service could even be extended to include caching or pre-fetching if the necessary
trust relationship between the client and the proxy exists.<a href="#section-2.2-3" class="pilcrow">¶</a></p>
<p id="section-2.2-4">Depending on the function requested, the proxy would need to access or alter the
traffic or context which is limiting due to the necessary trust. Therefore
alternative models should be pursued in most cases. One such model is
explicit exchange of information about the current network state
from the proxy to the client.
This enables some services to function by having the end-to-end peers
act on or inject the learned information from the proxy into the end-to-end connection(s).
Thus achieving the benefits without the need to access the content or some
of the traffic metadata directly. Especially transport layer optimizations do not need
access to the actual user content. Network functions should generally minimize
dependencies to higher layer characteristics as those may change frequently.<a href="#section-2.2-4" class="pilcrow">¶</a></p>
<p id="section-2.2-5">Similar to previous usage scenario, in this setup the client explicitly
selects the proxy and specifies the requested support function. Often the server
may not need to be aware of it but depending on the optimization function,
server cooperation could be beneficial as well. Usually though, it is expected that
even if the server is aware, no direct information exchange is needed
between the proxy and the server. Instead, any needed information
will be provided "over" the client and thus, the client and the proxy need
a direct and secured communication channel in order to request and configure
a service and exchange or expose the needed information and metadata.<a href="#section-2.2-5" class="pilcrow">¶</a></p>
<div id="security-and-access-policy-enforcement">
<section id="section-2.2.1">
          <h4 id="name-security-and-access-policy-">
<a href="#section-2.2.1" class="section-number selfRef">2.2.1. </a><a href="#name-security-and-access-policy-" class="section-name selfRef">Security and Access Policy Enforcement</a>
          </h4>
<p id="section-2.2.1-1">Some deployment models may wish to enforce security or access policies on
traffic flowing between domains (physical, logical, administrative, security
etc.). To support this, endpoints coordinate through a gateway that can require
information about the transport layer, application layer and application
content. Policy is generally configured out-of-band, either statically or
through some independent control plane.<a href="#section-2.2.1-1" class="pilcrow">¶</a></p>
<p id="section-2.2.1-2">In one use case, the enforcement function controls egress traffic; a client
connects to a proxy, typically inside the same domain, in order to cross the
domain boundary. In another use case, the enforcement function controls ingress
traffic; a client connects to a proxy that controls access to the ultimate
destination. This may be deployed inside the target domain, near it, or further
away as a part of a third-party security service. Clients are usually remote and
diverse, and use connections that have crossed several other domains (with or
without tunnels).<a href="#section-2.2.1-2" class="pilcrow">¶</a></p>
<p id="section-2.2.1-3">Enforcement functions typically require some form of client authentication such
as username, password, or certificate. Authentication is enforced at the earliest
stage of communication.<a href="#section-2.2.1-3" class="pilcrow">¶</a></p>
<p id="section-2.2.1-4">Enforcement rules might require access to transport characteristics of the
ultimate endpoints (such as client source IP address). This might change as
traffic moves between domains, whether tunneling is used or not. Therefore, it
can be desirable to encapsulate original information in form accessible to the
enforcement function.<a href="#section-2.2.1-4" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="frontend-support-for-load-balancing-and-migrationmobility">
<section id="section-2.3">
        <h3 id="name-frontend-support-for-load-b">
<a href="#section-2.3" class="section-number selfRef">2.3. </a><a href="#name-frontend-support-for-load-b" class="section-name selfRef">Frontend Support for Load Balancing and Migration/Mobility</a>
        </h3>
<p id="section-2.3-1">Application service providers aiming to improve access flexibility might use
proxies in front of their services.<a href="#section-2.3-1" class="pilcrow">¶</a></p>
<p id="section-2.3-2">In one usage scenario the client communicates with a reverse proxy that assists
with access to and selection of the content requested. This proxy that may or
may not be under the authority of the service provider. Today such reverse
proxies terminate the connection, including the security association, and as
such appear as the communication endpoint to the client. Terminating both
transport and security may be problematic if the proxy provider is not under the
direct authority of the actual service provider (e.g. a contracted third party).<a href="#section-2.3-2" class="pilcrow">¶</a></p>
<p id="section-2.3-3">In another usage scenario the client communicates with a frontend proxy that
manages traffic steering to assist with load balancing or migration for mobility
support of server or client. This proxy is more likely to be located close to
the server and under the same administrative domain, or at least has some trust
relationship with the application service provider. The server may have its own
communication channel with the proxy or tunnel endpoint in order to provide data
that is used for decision making. Meanwhile, the client is usually not aware of
any specifics of the setup behind the substrate endpoint. However, improving
visibility may benefit future explicit tunneling or proxying approaches.<a href="#section-2.3-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="iot-gateways">
<section id="section-2.4">
        <h3 id="name-iot-gateways">
<a href="#section-2.4" class="section-number selfRef">2.4. </a><a href="#name-iot-gateways" class="section-name selfRef">IoT Gateways</a>
        </h3>
<p id="section-2.4-1">A number of IoT devices are connected via a low-power wireless network (e.g., a
Bluetooth LE piconet) and need to talk to their parent cloud service to provide
sensor readings or receive firmware updates.<a href="#section-2.4-1" class="pilcrow">¶</a></p>
<p id="section-2.4-2">When end-to-end IP connectivity is not possible or desirable for at least
some of the devices, one or more IP capable nodes in the piconet can be
designated as ad-hoc gateways to forward sensor traffic to the cloud and
vice-versa.  In other scenarios, a less
constrained node - sometimes called a "smart gateway" - can provide the
forwarding role permanently.  In both cases, the gateway node routes messages
based on client's session identifiers, which need to be unique among all the
active participants so that the gateway can route unambiguously.  The access
network attachment is expected to change over time but the end-to-end
communication (especially the security association) needs to persist for as
long as possible.<a href="#section-2.4-2" class="pilcrow">¶</a></p>
<p id="section-2.4-3">A strong requirement for these deployments is privacy: data
on the public Internet (i.e., from the gateway to the cloud service) needs to
be made as opaque as possible to passive observers, possibly hiding the natural
traffic patterns associated with the sensor network. A mechanism to provide
discovery of the proxy node to the rest of the piconet is also typically
necessary.<a href="#section-2.4-3" class="pilcrow">¶</a></p>
<p id="section-2.4-4">Today, the above requirements can be met by composing an end-to-end secure
channel (e.g., based on DTLS sessions with client-chosen connection IDs
<span>[<a href="#I-D.ietf-tls-dtls-connection-id" class="xref">I-D.ietf-tls-dtls-connection-id</a>]</span> or application layer TLS
<span>[<a href="#I-D.friel-tls-atls" class="xref">I-D.friel-tls-atls</a>]</span> from the sensors to the cloud together with a
multiplexed secure tunnel (e.g., using HTTP/2 WebSockets <span>[<a href="#RFC8441" class="xref">RFC8441</a>]</span>, or a
proprietary shim) from the gateway to the cloud.  In the future, a more
homogeneous solution could be provided by QUIC for both the end-to-end and
tunneling services, thus simplifying code dependencies on the gateway nodes.<a href="#section-2.4-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="multi-hop-chaining-usage">
<section id="section-2.5">
        <h3 id="name-multi-hop-chaining-usage">
<a href="#section-2.5" class="section-number selfRef">2.5. </a><a href="#name-multi-hop-chaining-usage" class="section-name selfRef">Multi-hop Chaining Usage</a>
        </h3>
<p id="section-2.5-1">Providing a generic approach to use QUIC as a substrate also enables the
combination of multiple of the above use cases. For example, employing multiple
obfuscating proxies in sequence, where the communication with each proxy is
individually secured, can enable onion-like layered security. Each proxy will
only know the address of the prior hop and after itself, similar as provided by
onion routing in Tor project <span>[<a href="#TOR" class="xref">TOR</a>]</span>.<a href="#section-2.5-1" class="pilcrow">¶</a></p>
<p id="section-2.5-2">Further, it would also be possible to chain proxies for different
reasons. A client may select proxying support from its access network, while a web
service provider may utilize a front-end load balancing proxy to provide end-to-end
secure communication with the applications components servers. Here the proxy and
the load balancer have different tasks. The access network proxy optimizes the
aggregated data transport. The load balancer needs to route different set of
end-to-end protected data that it aggregates. A third example would be
multiple proxies to cooperate and maybe exchange measurement information in order
to optimize the QUIC connection over a specific segment.<a href="#section-2.5-2" class="pilcrow">¶</a></p>
<p id="section-2.5-3">The above examples indicates that a solution likely have to consider how to
establish a security model so that endpoints can selectively choose what
connection related information to share with the different proxy entities.  The
possible efficiency should also be consider and multiple layers of encapsulation
should be avoided when the security model allows for it.<a href="#section-2.5-3" class="pilcrow">¶</a></p>
<div id="considerations-for-multiple-encryption">
<section id="section-2.5.1">
          <h4 id="name-considerations-for-multiple">
<a href="#section-2.5.1" class="section-number selfRef">2.5.1. </a><a href="#name-considerations-for-multiple" class="section-name selfRef">Considerations for Multiple Encryption</a>
          </h4>
<p id="section-2.5.1-1">Using QUIC in a multi-hop fashion will generally cause all user data to be
encrypted multiple times, once for each hop. There are two main reasons
to encrypt data multiple times in a multi-hop network:<a href="#section-2.5.1-1" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-2.5.1-2">
            <li id="section-2.5.1-2.1">To ensure that no hop can see both the connection metadata
of the client and the server (thus obfuscating IP addresses and other related
data that is visible in cleartext in the transport protocol headers).<a href="#section-2.5.1-2.1" class="pilcrow">¶</a>
</li>
<li id="section-2.5.1-2.2">To prevent an attacker from being able to correlate data between
different hops to identify a particular flow of data as it passes through multiple
hops.<a href="#section-2.5.1-2.2" class="pilcrow">¶</a>
</li>
</ol>
<p id="section-2.5.1-3">However, multiple layers of encryption can have a noticeable impact on the
end-to-end latency of data. When a Tor-like approach is used, each
piece of user data will be encrypted N times, where N is the number of hops.
Devices such as IoT devices that may not have support for cryptographic optimizations,
or are constrained in terms of processing or power usage, could be significantly
slowed down due to the extra overhead or not be able to process such traffic at all.<a href="#section-2.5.1-3" class="pilcrow">¶</a></p>
<p id="section-2.5.1-4">Since QUIC is an encrypted transport, the content of all packets after the
handshake is opaque to any attacker. Short-header packets,
particularly those that have zero-length Connection IDs, only send encrypted
fields. Thus, for all packets beyond the QUIC handshake, encrypting packets
multiple times through a multi-hop proxy primarily achieves benefit 2) described
above, since benefit 1) is already achieved by QUIC being forwarded without
re-encryption. If a deployment is more concerned with benefit 1) than benefit 2),
it might be preferable to use a solution that forwards QUIC packets without
re-encrypting once QUIC handshakes are complete.<a href="#section-2.5.1-4" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="requirements">
<section id="section-3">
      <h2 id="name-requirements">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-requirements" class="section-name selfRef">Requirements</a>
      </h2>
<p id="section-3-1">To use QUIC as a substrate, it could be beneficial if unreliable transmission is
supported as well as having a way to potentially influence or disable congestion
control if the inner tunnel traffic is known to be congestion controlled.<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">Communication between the client and proxy is more likely to be realized as a
separate protocol on top of QUIC or HTTP as e.g. proposed by MASQUE.
However, a QUIC extensibility
mechanism could be used to indicate to the receiver that QUIC is used as a
substrate and potentially additional information about which protocol is used for
communication between these entities. A similar mechanism could be realized in HTTP
instead. In both cases it is important that the QUIC connection cannot be identified
as a substrate by an observer on the path.<a href="#section-3-2" class="pilcrow">¶</a></p>
<p id="section-3-3">With QUIC, the use of proxying functions cannot be done transparently. Instead,
proxies needs to be explicitly discoverable. The simplest form of such discovery
could include pre-configuration or via out-of-band signaling. The proxy could
also be discovered through advertisement when a client is connected to a network
(for example, the Dynamic Host Configuration Protocol). Alternatively, the
client could obtain a white-listed proxy address when making first contact with
the server (CNAME/IPaddress). In both cases the proxy needs to have a routable
address and name.<a href="#section-3-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="review-of-existing-approaches">
<section id="section-4">
      <h2 id="name-review-of-existing-approach">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-review-of-existing-approach" class="section-name selfRef">Review of Existing Approaches</a>
      </h2>
<p id="section-4-1">As already mentioned, HTTP proxies are usually realized by use of the HTTP
CONNECT method (see Section 4.3.6 of <span>[<a href="#RFC7231" class="xref">RFC7231</a>]</span>). This is commonly used to
establish a tunnelled TLS session over a TCP connection to an origin server
identified by a request-target. In HTTP/1.1, the entire client-to-proxy HTTP
connection is converted into a tunnel. In HTTP/2 (see Section 8.3 of
<span>[<a href="#RFC7540" class="xref">RFC7540</a>]</span>) and HTTP/3 (see Section 4.2 of <span>[<a href="#I-D.ietf-quic-http" class="xref">I-D.ietf-quic-http</a>]</span>), a single
stream gets dedicated to a tunnel. Conventional HTTP CONNECT is only specified
to open a TCP connection between proxy and server, even in HTTP/3, so it enables
forwarding based on a split TCP-TCP or QUIC-TCP connection but unaltered payload
traffic. There is no currently-specified HTTP mechanism to instruct a proxy to
create a UDP or IP association to the server.
<span>[<a href="#HINT" class="xref">HINT</a>]</span> contains a deeper analysis of
the problem space and potential solutions. Of those explored, a good candidate
for MASQUE is the Extended CONNECT method <span>[<a href="#RFC8441" class="xref">RFC8441</a>]</span>, accepts a ":protocol"
pseudo-header that could be used to express an alternative protocol between
proxy and server.<a href="#section-4-1" class="pilcrow">¶</a></p>
<p id="section-4-2">An explicit proxy control protocol is the SOCKS protocol <span>[<a href="#RFC1928" class="xref">RFC1928</a>]</span>. Version 6
is currently under standardization <span>[<a href="#I-D.olteanu-intarea-socks-6" class="xref">I-D.olteanu-intarea-socks-6</a>]</span> which provides
fast connection establishment. Use of QUIC could even further improve that. However,
SOCKS provides support to establish forwarding sockets using a new connection (with
a different port). This behavior is visible to the path and not necessary if the
underlying transport is multiplexing capable, as QUIC is. A SOCKS-like protocol
could still be used for negotiation and authentication between the client and the
proxy. An example proposal for this approach is <span>[<a href="#I-D.piraux-quic-tunnel" class="xref">I-D.piraux-quic-tunnel</a>]</span>.<a href="#section-4-2" class="pilcrow">¶</a></p>
<p id="section-4-3">In that sense the TCP PROXY protocol could also be seen as a light-weight version
of SOCKS (see https://www.haproxy.org/download/1.8/doc/proxy-protocol.txt). This
protocol was never standardized and only provides a limited set of functionality.<a href="#section-4-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="contributors">
<section id="section-5">
      <h2 id="name-contributors">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-contributors" class="section-name selfRef">Contributors</a>
      </h2>
<p id="section-5-1">Magnus Westerlund has contributed two paragraphs on combining proxies.<a href="#section-5-1" class="pilcrow">¶</a></p>
<p id="section-5-2">Tommy Pauly has contributed text on multiple layers of encryption, and other
edits to the use cases.<a href="#section-5-2" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-6">
      <h2 id="name-references">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-6.1">
        <h3 id="name-normative-references">
<a href="#section-6.1" class="section-number selfRef">6.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="I-D.schinazi-masque">[I-D.schinazi-masque]</dt>
<dd>
<span class="refAuthor">Schinazi, D.</span>, <span class="refTitle">"The MASQUE Protocol"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-schinazi-masque-02</span>, <time datetime="2020-01-08">8 January 2020</time>, <span>&lt;<a href="http://www.ietf.org/internet-drafts/draft-schinazi-masque-02.txt">http://www.ietf.org/internet-drafts/draft-schinazi-masque-02.txt</a>&gt;</span>. </dd>
</dl>
</section>
<section id="section-6.2">
        <h3 id="name-informative-references">
<a href="#section-6.2" class="section-number selfRef">6.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="HINT">[HINT]</dt>
<dd>
<span class="refAuthor">Pardue, L.</span>, <span class="refTitle">"HTTP-initiated Network Tunnelling (HiNT)"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-pardue-httpbis-http-network-tunnelling-01</span>, <time datetime="2018-10-18">18 October 2018</time>, <span>&lt;<a href="http://www.ietf.org/internet-drafts/draft-pardue-httpbis-http-network-tunnelling-01.txt">http://www.ietf.org/internet-drafts/draft-pardue-httpbis-http-network-tunnelling-01.txt</a>&gt;</span>. </dd>
<dt id="I-D.friel-tls-atls">[I-D.friel-tls-atls]</dt>
<dd>
<span class="refAuthor">Friel, O.</span><span class="refAuthor">, Barnes, R.</span><span class="refAuthor">, Pritikin, M.</span><span class="refAuthor">, Tschofenig, H.</span><span class="refAuthor">, and M. Baugher</span>, <span class="refTitle">"Application-Layer TLS"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-friel-tls-atls-04</span>, <time datetime="2019-11-04">4 November 2019</time>, <span>&lt;<a href="http://www.ietf.org/internet-drafts/draft-friel-tls-atls-04.txt">http://www.ietf.org/internet-drafts/draft-friel-tls-atls-04.txt</a>&gt;</span>. </dd>
<dt id="I-D.ietf-quic-http">[I-D.ietf-quic-http]</dt>
<dd>
<span class="refAuthor">Bishop, M.</span>, <span class="refTitle">"Hypertext Transfer Protocol Version 3 (HTTP/3)"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-quic-http-27</span>, <time datetime="2020-02-21">21 February 2020</time>, <span>&lt;<a href="http://www.ietf.org/internet-drafts/draft-ietf-quic-http-27.txt">http://www.ietf.org/internet-drafts/draft-ietf-quic-http-27.txt</a>&gt;</span>. </dd>
<dt id="I-D.ietf-tls-dtls-connection-id">[I-D.ietf-tls-dtls-connection-id]</dt>
<dd>
<span class="refAuthor">Rescorla, E.</span><span class="refAuthor">, Tschofenig, H.</span><span class="refAuthor">, and T. Fossati</span>, <span class="refTitle">"Connection Identifiers for DTLS 1.2"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-tls-dtls-connection-id-07</span>, <time datetime="2019-10-21">21 October 2019</time>, <span>&lt;<a href="http://www.ietf.org/internet-drafts/draft-ietf-tls-dtls-connection-id-07.txt">http://www.ietf.org/internet-drafts/draft-ietf-tls-dtls-connection-id-07.txt</a>&gt;</span>. </dd>
<dt id="I-D.olteanu-intarea-socks-6">[I-D.olteanu-intarea-socks-6]</dt>
<dd>
<span class="refAuthor">Olteanu, V.</span><span class="refAuthor"> and D. Niculescu</span>, <span class="refTitle">"SOCKS Protocol Version 6"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-olteanu-intarea-socks-6-08</span>, <time datetime="2019-11-04">4 November 2019</time>, <span>&lt;<a href="http://www.ietf.org/internet-drafts/draft-olteanu-intarea-socks-6-08.txt">http://www.ietf.org/internet-drafts/draft-olteanu-intarea-socks-6-08.txt</a>&gt;</span>. </dd>
<dt id="I-D.piraux-quic-tunnel">[I-D.piraux-quic-tunnel]</dt>
<dd>
<span class="refAuthor">Piraux, M.</span><span class="refAuthor"> and O. Bonaventure</span>, <span class="refTitle">"Tunneling Internet protocols inside QUIC"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-piraux-quic-tunnel-00</span>, <time datetime="2019-11-04">4 November 2019</time>, <span>&lt;<a href="http://www.ietf.org/internet-drafts/draft-piraux-quic-tunnel-00.txt">http://www.ietf.org/internet-drafts/draft-piraux-quic-tunnel-00.txt</a>&gt;</span>. </dd>
<dt id="I-D.schinazi-httpbis-transport-auth">[I-D.schinazi-httpbis-transport-auth]</dt>
<dd>
<span class="refAuthor">Schinazi, D.</span>, <span class="refTitle">"HTTP Transport Authentication"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-schinazi-httpbis-transport-auth-01</span>, <time datetime="2020-01-08">8 January 2020</time>, <span>&lt;<a href="http://www.ietf.org/internet-drafts/draft-schinazi-httpbis-transport-auth-01.txt">http://www.ietf.org/internet-drafts/draft-schinazi-httpbis-transport-auth-01.txt</a>&gt;</span>. </dd>
<dt id="RFC1928">[RFC1928]</dt>
<dd>
<span class="refAuthor">Leech, M.</span><span class="refAuthor">, Ganis, M.</span><span class="refAuthor">, Lee, Y.</span><span class="refAuthor">, Kuris, R.</span><span class="refAuthor">, Koblas, D.</span><span class="refAuthor">, and L. Jones</span>, <span class="refTitle">"SOCKS Protocol Version 5"</span>, <span class="seriesInfo">RFC 1928</span>, <span class="seriesInfo">DOI 10.17487/RFC1928</span>, <time datetime="1996-03">March 1996</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc1928">https://www.rfc-editor.org/info/rfc1928</a>&gt;</span>. </dd>
<dt id="RFC7231">[RFC7231]</dt>
<dd>
<span class="refAuthor">Fielding, R., Ed.</span><span class="refAuthor"> and J. Reschke, Ed.</span>, <span class="refTitle">"Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content"</span>, <span class="seriesInfo">RFC 7231</span>, <span class="seriesInfo">DOI 10.17487/RFC7231</span>, <time datetime="2014-06">June 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7231">https://www.rfc-editor.org/info/rfc7231</a>&gt;</span>. </dd>
<dt id="RFC7540">[RFC7540]</dt>
<dd>
<span class="refAuthor">Belshe, M.</span><span class="refAuthor">, Peon, R.</span><span class="refAuthor">, and M. Thomson, Ed.</span>, <span class="refTitle">"Hypertext Transfer Protocol Version 2 (HTTP/2)"</span>, <span class="seriesInfo">RFC 7540</span>, <span class="seriesInfo">DOI 10.17487/RFC7540</span>, <time datetime="2015-05">May 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7540">https://www.rfc-editor.org/info/rfc7540</a>&gt;</span>. </dd>
<dt id="RFC8441">[RFC8441]</dt>
<dd>
<span class="refAuthor">McManus, P.</span>, <span class="refTitle">"Bootstrapping WebSockets with HTTP/2"</span>, <span class="seriesInfo">RFC 8441</span>, <span class="seriesInfo">DOI 10.17487/RFC8441</span>, <time datetime="2018-09">September 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8441">https://www.rfc-editor.org/info/rfc8441</a>&gt;</span>. </dd>
<dt id="TOR">[TOR]</dt>
<dd>
<span class="refTitle">"TOR Project"</span>, <time datetime="2019-06-05">5 June 2019</time>, <span>&lt;<a href="https://www.torproject.org/">https://www.torproject.org/</a>&gt;</span>. </dd>
</dl>
</section>
</section>
<div id="authors-addresses">
<section id="section-appendix.a">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Mirja Kuehlewind</span></div>
<div dir="auto" class="left"><span class="org">Ericsson</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:mirja.kuehlewind@ericsson.com" class="email">mirja.kuehlewind@ericsson.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Zaheduzzaman Sarker</span></div>
<div dir="auto" class="left"><span class="org">Ericsson</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:zaheduzzaman.sarker@ericsson.com" class="email">zaheduzzaman.sarker@ericsson.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Thomas Fossati</span></div>
<div dir="auto" class="left"><span class="org">Arm</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:thomas.fossati@arm.com" class="email">thomas.fossati@arm.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Lucas Pardue</span></div>
<div dir="auto" class="left"><span class="org">Cloudflare</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:lucaspardue.24.7@gmail.com" class="email">lucaspardue.24.7@gmail.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
