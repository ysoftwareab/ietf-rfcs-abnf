



BIER                                                            Z. Zhang
Internet-Draft                                             A. Przygienda
Intended status: Standards Track                        Juniper Networks
Expires: October 12, 2018                                    A. Dolganow
                                                              H. Bidgoli
                                                                   Nokia
                                                             I. Wijnands
                                                           Cisco Systems
                                                                A. Gulko
                                                         Thomson Reuters
                                                          April 10, 2018


        BIER Underlay Path Calculation Algorithm and Contraints
                       draft-ietf-bier-bar-ipa-01

Abstract

   This document specifies general rules for interaction between the BAR
   and IPA fields defined in [I-D.ietf-bier-isis-extensions] and
   [I-D.ietf-bier-ospf-bier-extensions].

Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC2119.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on October 12, 2018.







Zhang, et al.           Expires October 12, 2018                [Page 1]

Internet-Draft                bier-bar-ipa                    April 2018


Copyright Notice

   Copyright (c) 2018 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Terminologies . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   3.  General Rules for the BAR and IPA fields  . . . . . . . . . .   3
     3.1.  When BAR Is Not Used  . . . . . . . . . . . . . . . . . .   4
     3.2.  Exceptions/Extensions to the General Rules  . . . . . . .   4
   4.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   4
   5.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   4
   6.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   4
     6.1.  Normative References  . . . . . . . . . . . . . . . . . .   4
     6.2.  Informative References  . . . . . . . . . . . . . . . . .   5
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   5

1.  Terminologies

   Familiarity with BIER protocols and procedures is assumed.  Some
   terminologies are listed below for convenience.

   [To be added].

2.  Introduction

   In the BIER architecture, packets with a BIER encapsulation header
   are forwarded to the neighbors on the underlay paths towards the
   BFERs.  For each sub-domain, the paths are calculated in the underlay
   topology for the sub-domain, following a calculation algorithm
   specific to the sub-domain.  The <topology, algorithm> could be
   congruent or incongruent with unicast.  The topology could be a
   default topology, a multi-topology [RFC5120] topology.  The algorithm
   could be a generic IGP algorithm (e.g.  SPF) or could be a BIER
   specific one defined in the future.




Zhang, et al.           Expires October 12, 2018                [Page 2]

Internet-Draft                bier-bar-ipa                    April 2018


   In [I-D.ietf-bier-isis-extensions] and
   [I-D.ietf-bier-ospf-bier-extensions], an 8-bit BAR field and 8-bit
   IPA field are defined to signal the BIER specific algorithm and
   generic IGP Algorithm respectively and only value 0 is allowed for
   both fields currently.  This document specifies the general rules for
   the two fields and their interaction when either or both fields are
   not 0.

3.  General Rules for the BAR and IPA fields

   For a particular sub-domain, all routers SHOULD be provisioned with
   and signal the same BAR and IPA values.  When a BFR discovers another
   BFR advertising different BAR or IPA value from its own provisioned,
   it MUST treat the advertising BFR as incapable of supporting BIER for
   the sub-domain.  How incapable routers are handled is outside the
   scope of this document.

   It is expected that both the BAR and IPA values could have both
   algorithm and constraints semantics.  To generalize, we introduce the
   following terms:

   o  BC: BIER-specific Constraints

   o  BA: BIER-specific Algorithm

   o  RC: Generic Routing Constraints

   o  RA: Generic Routing Algorithm

   o  BCBA: BC + BA

   o  RCRA: RC + RA

   A BAR value corresponds to a BCBA, and a IPA value corresponds to a
   RCRA.  Any of the RC/BC/BA could be "NULL", which means there are no
   corresponding constraints or algorithm.

   For a particular topology X (which could be a default topology or
   multit-topolgy topology) that a sub-domain is associated with, a
   router calculates the underlay paths according to its provisioned
   BCBA and RCRA the following way:

   1.  Apply the BIER constraints, resulting in BC(X).

   2.  Apply the routing constraints, resulting in RC(BC(X)).

   3.  Select the algorithm AG as following:




Zhang, et al.           Expires October 12, 2018                [Page 3]

Internet-Draft                bier-bar-ipa                    April 2018


       A.  If BA is NULL, AG is set to RA.

       B.  If BA is not NULL, AG is set to BA.

   4.  Run AG on RC(BC(X)).

3.1.  When BAR Is Not Used

   The BIER Algorithm registry established by
   [I-D.ietf-bier-isis-extensions] and also used in
   [I-D.ietf-bier-ospf-bier-extensions] has value 0 for "No BIER
   specific algorithm is used".  That translates to NULL BA and NULL BC.
   Following the rules defined above, the IPA value alone identifies the
   calculation algorithm and constraints to be used for a particular
   sub-domain when BAR is 0.

3.2.  Exceptions/Extensions to the General Rules

   Exceptions or extensions to the above general rules may be specified
   in the future for specific BAR and/or IPA values.  When that happens,
   compatibility with defined BAR and/or IPA values and semantics need
   to be specified.

4.  IANA Considerations

   No IANA Consideration is requested in this document.

5.  Acknowledgements

   The authors thanks Alia Atlas, Eric Rosen, Senthil Dhanaraj and many
   others for their suggestions and comments.  In particular, the BCBA/
   RCRA representation for the interaction rules is based on Alia's
   write-up.

6.  References

6.1.  Normative References

   [I-D.ietf-bier-isis-extensions]
              Ginsberg, L., Przygienda, T., Aldrin, S., and Z. Zhang,
              "BIER support via ISIS", draft-ietf-bier-isis-
              extensions-11 (work in progress), March 2018.

   [I-D.ietf-bier-ospf-bier-extensions]
              Psenak, P., Kumar, N., Wijnands, I., Dolganow, A.,
              Przygienda, T., Zhang, Z., and S. Aldrin, "OSPFv2
              Extensions for BIER", draft-ietf-bier-ospf-bier-
              extensions-17 (work in progress), April 2018.



Zhang, et al.           Expires October 12, 2018                [Page 4]

Internet-Draft                bier-bar-ipa                    April 2018


   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC8279]  Wijnands, IJ., Ed., Rosen, E., Ed., Dolganow, A.,
              Przygienda, T., and S. Aldrin, "Multicast Using Bit Index
              Explicit Replication (BIER)", RFC 8279,
              DOI 10.17487/RFC8279, November 2017,
              <https://www.rfc-editor.org/info/rfc8279>.

6.2.  Informative References

   [RFC5120]  Przygienda, T., Shen, N., and N. Sheth, "M-ISIS: Multi
              Topology (MT) Routing in Intermediate System to
              Intermediate Systems (IS-ISs)", RFC 5120,
              DOI 10.17487/RFC5120, February 2008,
              <https://www.rfc-editor.org/info/rfc5120>.

Authors' Addresses

   Zhaohui Zhang
   Juniper Networks

   EMail: zzhang@juniper.net


   Antoni Przygienda
   Juniper Networks

   EMail: prz@juniper.net


   Andrew Dolganow
   Nokia

   EMail: andrew.dolganow@nokia.com


   Hooman Bidgoli
   Nokia

   EMail: hooman.bidgoli@nokia.com








Zhang, et al.           Expires October 12, 2018                [Page 5]

Internet-Draft                bier-bar-ipa                    April 2018


   IJsbrand Wijnands
   Cisco Systems

   EMail: ice@cisco.com


   Arkadiy Gulko
   Thomson Reuters

   EMail: arkadiy.gulko@thomsonreuters.com









































Zhang, et al.           Expires October 12, 2018                [Page 6]
