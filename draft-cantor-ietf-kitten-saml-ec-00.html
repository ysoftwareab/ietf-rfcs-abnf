<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>SAML Enhanced Client SASL and GSS-API Mechanisms</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="SAML Enhanced Client SASL and GSS-API Mechanisms">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">S. Cantor</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Internet2</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">S. Josefsson</td></tr>
<tr><td class="header">Expires: March 27, 2011</td><td class="header">SJD AB</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">September 23, 2010</td></tr>
</table></td></tr></table>
<h1><br />SAML Enhanced Client SASL and GSS-API Mechanisms<br />draft-cantor-ietf-kitten-saml-ec-00.txt</h1>

<h3>Abstract</h3>

<p>
   Security Assertion Markup Language (SAML) 2.0 is a generalized
   framework for the exchange of security-related information between
   asserting and relying parties.  Simple Authentication and Security
   Layer (SASL) and the Generic Security Service Application Program
   Interface (GSS-API) are application frameworks to facilitate an
   extensible authentication model. This document specifies a SASL and
   GSS-API mechanism for SAML 2.0 that leverages the capabilities of a
   SAML-aware "enhanced client" to address significant barriers to
   federated authentication in a manner that encourages reuse of
   existing SAML bindings and profiles designed for non-browser
   scenarios.
  
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on March 27, 2011.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#terminology">2.</a>&nbsp;
Terminology<br />
<a href="#anchor2">3.</a>&nbsp;
Applicability for Non-HTTP Use Cases<br />
<a href="#anchor3">4.</a>&nbsp;
SAML SASL Mechanism Specification<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#advertisement">4.1.</a>&nbsp;
Advertisement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#initiation">4.2.</a>&nbsp;
Initiation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#serverresponse">4.3.</a>&nbsp;
Server Response<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#userauthn">4.4.</a>&nbsp;
User Authentication with Identity Provider<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#clientresponse">4.5.</a>&nbsp;
Client Response<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#outcome">4.6.</a>&nbsp;
Outcome<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#notes">4.7.</a>&nbsp;
Additional Notes<br />
<a href="#anchor4">5.</a>&nbsp;
SAML EC GSS-API Mechanism Specification<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">5.1.</a>&nbsp;
GSS-API Principal Name Types for SAML EC<br />
<a href="#anchor6">6.</a>&nbsp;
Example<br />
<a href="#anchor7">7.</a>&nbsp;
Security Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">7.1.</a>&nbsp;
Risks Left Unaddressed<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">7.2.</a>&nbsp;
User Privacy<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">7.3.</a>&nbsp;
Collusion between RPs<br />
<a href="#anchor11">8.</a>&nbsp;
IANA Considerations<br />
<a href="#rfc.references1">9.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">9.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">9.2.</a>&nbsp;
Normative References for GSS-API Implementers<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references3">9.3.</a>&nbsp;
Informative References<br />
<a href="#anchor15">Appendix&nbsp;A.</a>&nbsp;
Acknowledgments<br />
<a href="#anchor16">Appendix&nbsp;B.</a>&nbsp;
Changes<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p> 
<a class='info' href='#OASIS.saml-core-2.0-os'>Security Assertion Markup
Language (SAML) 2.0<span> (</span><span class='info'>Cantor, S., Kemp, J., Philpott, R., and E. Maler, &ldquo;Assertions and Protocol for the OASIS Security Assertion Markup Language             (SAML) V2.0,&rdquo; March&nbsp;2005.</span><span>)</span></a> [OASIS.saml&#8209;core&#8209;2.0&#8209;os] is a modular specification that provides
various means for a user to be identified to a relying party (RP)
through the exchange of (typically signed) assertions issued by an
identity provider (IdP). It includes a number of protocols,
protocol <a class='info' href='#OASIS.saml-bindings-2.0-os'>bindings<span> (</span><span class='info'>Cantor, S., Hirsch, F., Kemp, J., Philpott, R., and E. Maler, &ldquo;Bindings for the OASIS Security Assertion Markup Language             (SAML) V2.0,&rdquo; March&nbsp;2005.</span><span>)</span></a> [OASIS.saml&#8209;bindings&#8209;2.0&#8209;os],
and <a class='info' href='#OASIS.saml-profiles-2.0-os'>interoperability profiles<span> (</span><span class='info'>Hughes, J., Cantor, S., Hodges, J., Hirsch, F., Mishra, P., Philpott, R., and E. Maler, &ldquo;Profiles for the OASIS Security Assertion Markup Language             (SAML) V2.0,&rdquo; March&nbsp;2005.</span><span>)</span></a> [OASIS.saml&#8209;profiles&#8209;2.0&#8209;os]
designed for different use cases.

</p>
<p> 
<a class='info' href='#RFC4422'>Simple Authentication and Security Layer
(SASL)<span> (</span><span class='info'>Melnikov, A. and K. Zeilenga, &ldquo;Simple Authentication and Security Layer (SASL),&rdquo; June&nbsp;2006.</span><span>)</span></a> [RFC4422] is a generalized mechanism for identifying and
authenticating a user and for optionally negotiating a security layer
for subsequent protocol interactions. SASL is used by application
protocols like IMAP, POP and <a class='info' href='#RFC3920'>XMPP<span> (</span><span class='info'>Saint-Andre, P., Ed., &ldquo;Extensible Messaging and Presence Protocol (XMPP): Core,&rdquo; October&nbsp;2004.</span><span>)</span></a> [RFC3920].  The
effect is to make authentication modular, so that newer authentication
mechanisms can be added as needed.

</p>
<p>
The <a class='info' href='#RFC2743'>Generic Security Service Application
Program Interface (GSS-API)<span> (</span><span class='info'>Linn, J., &ldquo;Generic Security Service Application Program Interface Version 2, Update 1,&rdquo; January&nbsp;2000.</span><span>)</span></a> [RFC2743] provides a framework for
applications to support multiple authentication mechanisms through a
unified programming interface.  This document defines a pure SASL
mechanism for SAML, but it conforms to the new bridge between SASL and
the GSS-API called <a class='info' href='#RFC5801'>GS2<span> (</span><span class='info'>Josefsson, S. and N. Williams, &ldquo;Using Generic Security Service Application Program Interface (GSS-API) Mechanisms in Simple Authentication and Security Layer (SASL): The GS2 Mechanism Family,&rdquo; July&nbsp;2010.</span><span>)</span></a> [RFC5801].  This means that
this document defines both a SASL mechanism and a GSS-API mechanism.
We want to point out that the GSS-API interface is optional for SASL
implementers, and the GSS-API considerations can be avoided in
environments that uses SASL directly without GSS-API.

</p>
<p>The mechanism specified in this document allows a SASL-enabled
server to act as a SAML relying party, or service provider (SP), by
advertising this mechanism as an option for SASL clients that support
the use of SAML to communicate identity and attribute
information. Clients supporting this mechanism are termed "enhanced
clients" in SAML terminology because they understand the federated
authentication model and have specific knowledge of the IdP(s)
associated with the user.  This knowledge, and the ability to act on
it, addresses a significant problem with browser-based SAML profiles
known as the "discovery", or "where are you from?" (WAYF)
problem. Obviating the need for the RP to interact with the client to
determine the right IdP (and its network location) is both a user
interface and security improvement.

</p>
<p>The SAML mechanism described in this document is an adaptation of an
existing SAML profile, the
<a class='info' href='#OASIS.saml-profiles-2.0-os'>Enhanced Client or Proxy (ECP) Profile<span> (</span><span class='info'>Hughes, J., Cantor, S., Hodges, J., Hirsch, F., Mishra, P., Philpott, R., and E. Maler, &ldquo;Profiles for the OASIS Security Assertion Markup Language             (SAML) V2.0,&rdquo; March&nbsp;2005.</span><span>)</span></a> [OASIS.saml&#8209;profiles&#8209;2.0&#8209;os],
and therefore does not establish a separate authentication, integrity and
confidentiality mechanism. It is anticipated that existing security
layers, such as Transport Layer Security (TLS), will continued to be
used.
</p>
<p><a class='info' href='#overview'>Figure&nbsp;1<span> (</span><span class='info'>Interworking Architecture</span><span>)</span></a> describes the interworking between SAML and
SASL: this document requires enhancements to the RP and to the client (as
the two SASL communication endpoints) but no changes to the SAML IdP are
assumed apart from its support for the applicable SAML profile. To accomplish
this, a SAML protocol exchange between the RP and the IdP, brokered by the
client, is tunneled within SASL. There is no assumed communication between
the RP and the IdP, but such communication may occur in conjunction with
additional SAML-related profiles not in scope for this document.
</p>
<p> <br /><hr class="insert" />
<a name="overview"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


                                    +-----------+
                                    |  SAML     |
                                    |  Relying  |
                                    |  Party    |
                                    |           |
                                    +-----------+
                                          ^
                                       +--|--+
                                       | S|  |
                                     S | A|  |
                                     A | M|  |
                                     S | L|  |
                                     L |  |  |
                                       |  |  |
                                       +--|--+
      +------------+                      v
      |            |                 +----------+
      |  SAML      |     SAML SOAP   |          |
      |  Identity  |&lt;---------------&gt;|  Client  |
      |  Provider  |      Binding    |          |
      +------------+                 +----------+

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: Interworking
Architecture&nbsp;</b></font><br /></td></tr></table><hr class="insert" />
 
</p>
<a name="terminology"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Terminology</h3>

<p>The key words
"MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD
NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be
interpreted as described in RFC 2119 <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
</p>
<p>The reader is also assumed to be familiar with the terms used in the SAML
2.0 specification, and an understanding of the
<a class='info' href='#OASIS.saml-profiles-2.0-os'>Enhanced Client or Proxy (ECP) Profile<span> (</span><span class='info'>Hughes, J., Cantor, S., Hodges, J., Hirsch, F., Mishra, P., Philpott, R., and E. Maler, &ldquo;Profiles for the OASIS Security Assertion Markup Language             (SAML) V2.0,&rdquo; March&nbsp;2005.</span><span>)</span></a> [OASIS.saml&#8209;profiles&#8209;2.0&#8209;os]
is necessary, as part of this mechanism explicitly reuses and references it.
</p>
<p>This document can be implemented without knowledge of GSS-API since
the normative aspects of the GS2 protocol syntax have been duplicated
in this document. The document may also be implemented to provide a
GSS-API mechanism, and then knowledge of GSS-API is essential. To
faciliate these two variants, the references has been split into two
parts, one part that provides normative references for all readers,
and one part that adds additional normative references required for
implementers that wish to implement the GSS-API portion.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Applicability for Non-HTTP Use Cases</h3>

<p>While SAML is designed to support a variety of application scenarios,
the profiles for authentication defined in the original standard are
designed around <a class='info' href='#RFC2616'>HTTP<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a> [RFC2616] applications.
They are not, however, limited to browsers, because it was recognized
that browsers suffer from a variety of functional and security deficiencies
that would be useful to avoid where possible. Specifically, the notion of an
"Enhanced Client" (or a proxy acting as one on behalf of a browser, thus the
term "ECP") was specified for a software component that acted like a browser
from an application perspective, but included sufficient awareness of SAML
to play a more conscious role in the authentication exchange between the
RP and the IdP. What follows is an outline of the
<a class='info' href='#OASIS.saml-profiles-2.0-os'>Enhanced Client or Proxy (ECP) Profile<span> (</span><span class='info'>Hughes, J., Cantor, S., Hodges, J., Hirsch, F., Mishra, P., Philpott, R., and E. Maler, &ldquo;Profiles for the OASIS Security Assertion Markup Language             (SAML) V2.0,&rdquo; March&nbsp;2005.</span><span>)</span></a> [OASIS.saml&#8209;profiles&#8209;2.0&#8209;os],
as applied to the web/HTTP service use case:
</p>
<p> 
</p>
<ol class="text">
<li>The Enhanced Client requests a resource of a Relying Party (RP) (via an HTTP request).
In doing so, it advertises its "enhanced" capability using HTTP headers.
</li>
<li>The RP, desiring SAML authentication and noting the client's capabilities,
responds not with an HTTP redirect or form, but with a
<a class='info' href='#W3C.soap11'>SOAP<span> (</span><span class='info'>Box, D., Ehnebuske, D., Kakivaya, G., Layman, A., Mendelsohn, N., Nielsen, H., Thatte, S., and D. Winer, &ldquo;Simple Object Access Protocol (SOAP) 1.1,&rdquo; May&nbsp;2000.</span><span>)</span></a> [W3C.soap11] envelope containing a SAML &lt;AuthnRequest&gt;
along with some supporting headers. This request identifies the RP (and may be signed),
and may provide hints to the client as to what IdPs the RP finds acceptable, but the
choice of IdP is generally left to the client.
</li>
<li>The client is then responsible for delivering the body of the SOAP message in a new
envelope to the IdP it is instructed to use (often via configuration ahead of time).
The user authenticates to the IdP ahead of, during, or after the delivery of this
message, and perhaps explicitly authorizes the response to the RP.
</li>
<li>Whether authentication succeeds or fails, the IdP responds with its own
SOAP envelope, generally containing a SAML &lt;Response&gt; message for delivery
to the RP. In a successful case, the message will include a SAML &lt;Assertion&gt;
containing authentication, and possibly attribute, information about the user.
Either the response or assertion alone is signed, and the assertion may be encrypted to
a key negotiated with or known to belong to the RP.
</li>
<li>The client then delivers a new SOAP envelope containing the &lt;Response&gt; to the
RP at a location the IdP directs (which acts as an additional, though limited, defense
against MITM attacks). This completes the SAML exchange.
</li>
<li>The RP now has sufficient identity information to approve the original HTTP request
or not, and acts accordingly. Everything between the original request and this
response can be thought of as an "interruption" of the original HTTP exchange.
</li>
</ol><p>

</p>
<p>When considering this flow in the context of an arbitrary
application protocol and SASL, the RP and the client both must change
their code to implement this SASL mechanism, but the IdP can remain
untouched. The existing RP/client exchange that is tunneled through
HTTP also maps well to the tunneling of that same exchange in SASL. In
the parlance of <a class='info' href='#RFC4422'>SASL<span> (</span><span class='info'>Melnikov, A. and K. Zeilenga, &ldquo;Simple Authentication and Security Layer (SASL),&rdquo; June&nbsp;2006.</span><span>)</span></a> [RFC4422], this mechanism is
"client-first" for consistency with GS2.  The client may accompany its
"initial response" with a SAML &lt;Response&gt; obtained from an IdP.
The steps are shown below:
</p>
<p> 
</p>
<ol class="text">
<li>The server MAY advertise the SAML20EC capability.
</li>
<li>The client initiates a SASL authentication with SAML20EC. It MAY
 include an SAML &lt;Response&gt;.
</li>
<li>The server sends the client one of two responses: 
 
<ol class="text">
<li>an indication of success or failure (if the client included an
  SAML &lt;Response&gt;).
</li>
<li>a challenge containing a SOAP envelope containing
  a SAML &lt;AuthnRequest&gt;.
</li>
</ol>
 
</li>
<li>In the latter case, the SASL client unpacks the SOAP message and
 communicates with its chosen IdP to relay the SAML &lt;AuthnRequest&gt;
 to it. This communication, and the authentication with the IdP, proceeds
 separately from the SASL process.
</li>
<li>Upon completion of the exchange with the IdP, the client responds
 to the SASL server with a SOAP envelope containing the SAML
 &lt;Response&gt; it obtained, or a SOAP fault, as warranted.
</li>
<li> The SASL Server indicates success or failure.
</li>
</ol><p> 
</p>
<p>Note: The details of the SAML processing, which are consistent with the
existing <a class='info' href='#OASIS.saml-profiles-2.0-os'>Enhanced Client or Proxy (ECP) Profile<span> (</span><span class='info'>Hughes, J., Cantor, S., Hodges, J., Hirsch, F., Mishra, P., Philpott, R., and E. Maler, &ldquo;Profiles for the OASIS Security Assertion Markup Language             (SAML) V2.0,&rdquo; March&nbsp;2005.</span><span>)</span></a> [OASIS.saml&#8209;profiles&#8209;2.0&#8209;os],
are such that the client MUST interact with the IdP in order to complete any
SASL exchange with the RP. The assertions issued by the IdP for the purposes of
the profile, and by extension this SASL mechanism, are short lived, and therefore
cannot be cached by the client for later use.
</p>
<p>
Encompassed in step four is the client-driven selection of the IdP,
authentication to it, and the acquisition of a response to provide
to the SASL server. These processes are all external to SASL.
</p>
<p> With all of this in mind, the typical flow appears as follows:
</p>
<p>
<br /><hr class="insert" />
<a name="flow"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


      SASL Serv.       Client          IdP
         |&gt;-----(1)-----&gt;|              | Advertisement
         |               |              |
         |&lt;-----(2)-----&lt;|              | Initiation
         |               |              |
         |&gt;-----(3)-----&gt;|              | SASL Server Response
         |               |              |
         |               |&lt;- - -(4)- - &gt;| SOAP AuthnRequest + user authn
         |               |              |
         |&lt;-----(5)-----&lt;|              | SASL Client Response
         |               |              |
         |&gt;-----(6)-----&gt;|              | Server sends Outcome
         |               |              |

       ----- = SASL
       - - - = SOAP over HTTPS (external to SASL)

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: Authentication flow (no initial response)&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

</p>
<p>An alternative in which the client interacts with the IdP ahead of time:
</p>
<p>
<br /><hr class="insert" />
<a name="flowinit"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>


      SASL Serv.       Client          IdP
         |&gt;-----(1)-----&gt;|              | Advertisement
         |               |              |
         |&lt;-----(2)-----&lt;|              | Initiation + Client Response
         |               |              |
         |&gt;-----(3)-----&gt;|              | Server sends Outcome
         |               |              |

       ----- = SASL

</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3: Authentication flow (with initial response)&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
SAML SASL Mechanism Specification</h3>

<p>Based on the
previous figures, the following operations are defined by the SAML
SASL mechanism:
</p>
<a name="advertisement"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Advertisement</h3>

<p>To advertise
that a server supports this mechanism, during application session initiation,
it displays the name &quot;SAML20EC&quot; in the list of supported SASL
mechanisms.
</p>
<a name="initiation"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Initiation</h3>

<p>A client initiates &quot;SAML20EC&quot; authentication.  If
supported by the application protocol, the client MAY include an
initial response, otherwise it waits until the server has issued an
empty challenge (because the mechanism is client-first).
</p>
<p>The format of the initial client response is as follows:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
    saml-response = *%x00-FF

    initial-response = gs2-cb-flag "," [gs2-authzid] "," [saml-response]
</pre></div>
<p>If the "saml-response" token is present, the client is attempting
to use a SAML &lt;Response&gt; negotiated earlier.  In this case, the
server's next step is <a class='info' href='#outcome'>Outcome<span> (</span><span class='info'>Outcome</span><span>)</span></a>.
</p>
<p>For now, the gs2-cb-flag MUST be negotiated as "n" because channel
bindings are not supported. A future draft of this specification will
incorporate a channel binding mechanism layered on the SAML protocol.
</p>
<p>The optional "gs2-authzid" field holds the authorization identity,
as requested by the client.
</p>
<a name="serverresponse"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
Server Response</h3>

<p>Assuming no SAML &lt;Response&gt; from the client, the SASL server
responds with a SOAP envelope constructed in accordance with section
4.2.3.2 of <a class='info' href='#OASIS.saml-profiles-2.0-os'>[OASIS.saml&#8209;profiles&#8209;2.0&#8209;os]<span> (</span><span class='info'>Hughes, J., Cantor, S., Hodges, J., Hirsch, F., Mishra, P., Philpott, R., and E. Maler, &ldquo;Profiles for the OASIS Security Assertion Markup Language             (SAML) V2.0,&rdquo; March&nbsp;2005.</span><span>)</span></a>.  This includes
adhering to the SOAP header requirements of
the <a class='info' href='#OASIS.saml-bindings-2.0-os'>SAML PAOS
Binding<span> (</span><span class='info'>Cantor, S., Hirsch, F., Kemp, J., Philpott, R., and E. Maler, &ldquo;Bindings for the OASIS Security Assertion Markup Language             (SAML) V2.0,&rdquo; March&nbsp;2005.</span><span>)</span></a> [OASIS.saml&#8209;bindings&#8209;2.0&#8209;os], for compatibility with the existing profile.
</p>
<a name="userauthn"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4"></a><h3>4.4.&nbsp;
User Authentication with Identity Provider</h3>

<p>Upon receipt of the <a class='info' href='#serverresponse'>Server
Response<span> (</span><span class='info'>Server Response</span><span>)</span></a>, the steps described in sections 4.2.3.3 through
4.2.3.6 of <a class='info' href='#OASIS.saml-profiles-2.0-os'>[OASIS.saml&#8209;profiles&#8209;2.0&#8209;os]<span> (</span><span class='info'>Hughes, J., Cantor, S., Hodges, J., Hirsch, F., Mishra, P., Philpott, R., and E. Maler, &ldquo;Profiles for the OASIS Security Assertion Markup Language             (SAML) V2.0,&rdquo; March&nbsp;2005.</span><span>)</span></a> are performed
between the client and the chosen IdP. The means by which the client
determines the IdP to use, and where it is located, are out of scope
of this mechanism.
</p>
<p>The exact means of authentication to the IdP are
also out of scope, but clients supporting this mechanism MUST support
HTTP Basic Authentication as defined in <a class='info' href='#RFC2617'>[RFC2617]<span> (</span><span class='info'>Franks, J., Hallam-Baker, P., Hostetler, J., Lawrence, S., Leach, P., Luotonen, A., and L. Stewart, &ldquo;HTTP Authentication: Basic and Digest Access Authentication,&rdquo; June&nbsp;1999.</span><span>)</span></a> and
SHOULD support client authentication via TLS as defined in
<a class='info' href='#RFC5246'>[RFC5246]<span> (</span><span class='info'>Dierks, T. and E. Rescorla, &ldquo;The Transport Layer Security (TLS) Protocol Version 1.2,&rdquo; August&nbsp;2008.</span><span>)</span></a>.
</p>
<a name="clientresponse"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.5"></a><h3>4.5.&nbsp;
Client Response</h3>

<p>Assuming a response is obtained from the IdP, the client responds
to the SASL server with SOAP envelope constructed in accordance with
section 4.2.3.7 of <a class='info' href='#OASIS.saml-profiles-2.0-os'>[OASIS.saml&#8209;profiles&#8209;2.0&#8209;os]<span> (</span><span class='info'>Hughes, J., Cantor, S., Hodges, J., Hirsch, F., Mishra, P., Philpott, R., and E. Maler, &ldquo;Profiles for the OASIS Security Assertion Markup Language             (SAML) V2.0,&rdquo; March&nbsp;2005.</span><span>)</span></a>. This
includes adhering to the SOAP header requirements of
the <a class='info' href='#OASIS.saml-bindings-2.0-os'>SAML PAOS
Binding<span> (</span><span class='info'>Cantor, S., Hirsch, F., Kemp, J., Philpott, R., and E. Maler, &ldquo;Bindings for the OASIS Security Assertion Markup Language             (SAML) V2.0,&rdquo; March&nbsp;2005.</span><span>)</span></a> [OASIS.saml&#8209;bindings&#8209;2.0&#8209;os], for compatibility with the existing profile. If the
client is unable to obtain a response from the IdP, it responds to the
SASL server with a SOAP envelope containing a SOAP fault.
</p>
<a name="outcome"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.6"></a><h3>4.6.&nbsp;
Outcome</h3>

<p>The SAML protocol exchange having completed, the SASL server will
transmit the outcome to the client depending on local validation of
the client responses.
</p>
<a name="notes"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.7"></a><h3>4.7.&nbsp;
Additional Notes</h3>

<p>Because this mechanism is an adaptation of an HTTP-based profile,
there are a few requirements outlined in <a class='info' href='#OASIS.saml-profiles-2.0-os'>[OASIS.saml&#8209;profiles&#8209;2.0&#8209;os]<span> (</span><span class='info'>Hughes, J., Cantor, S., Hodges, J., Hirsch, F., Mishra, P., Philpott, R., and E. Maler, &ldquo;Profiles for the OASIS Security Assertion Markup Language             (SAML) V2.0,&rdquo; March&nbsp;2005.</span><span>)</span></a>
that make reference to a response URL that is normally used to regulate
where the client returns information to the RP. There are also
security-related checks built into the profile that involve this location.
</p>
<p>For compatibility with existing IdP and profile behavior, and to provide
for secure identification of the RP to the client, the SASL server MUST
populate responseConsumerURL and AssertionConsumerServiceURL attributes
with its service name, expressed as an absolute URI. The parties then
perform the steps described in <a class='info' href='#OASIS.saml-profiles-2.0-os'>[OASIS.saml&#8209;profiles&#8209;2.0&#8209;os]<span> (</span><span class='info'>Hughes, J., Cantor, S., Hodges, J., Hirsch, F., Mishra, P., Philpott, R., and E. Maler, &ldquo;Profiles for the OASIS Security Assertion Markup Language             (SAML) V2.0,&rdquo; March&nbsp;2005.</span><span>)</span></a>
as usual.
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
SAML EC GSS-API Mechanism Specification</h3>

<p>This section and its sub-sections and all normative references of
it not referenced elsewhere in this document are INFORMATIONAL for
SASL implementors, but they are NORMATIVE for GSS-API
implementors.
</p>
<p>The SAML SASL Enhanced Clients mechanism is actually also a GSS-API
mechanism.  The messages are the same, but a) the GS2 header on the
client's first message and channel binding data is excluded when SAML
EC is used as a GSS-API mechanism, and b) the RFC2743 section 3.1
initial context token header is prefixed to the client's first
authentication message (context token).
</p>
<p>The GSS-API mechanism OID for SAML EC is 1.3.6.1.4.1.11591.4.6.
</p>
<p>SAML EC security contexts always have the mutual_state flag
(GSS_C_MUTUAL_FLAG) set to TRUE.  SAML EC does not support
credential delegation, therefore SAML EC security contexts alway have the
deleg_state flag (GSS_C_DELEG_FLAG) set to FALSE.
</p>
<p>The SAML EC mechanism does not support per-message tokens or
GSS_Pseudo_random.
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
GSS-API Principal Name Types for SAML EC</h3>

<p>SAML EC supports standard generic name syntaxes for acceptors such
as GSS_C_NT_HOSTBASED_SERVICE (see [RFC2743], Section 4.1). These service
names MUST be associated with the SAML "entityID" claimed by the RP,
such as through the use of <a class='info' href='#OASIS.saml-metadata-2.0-os'>SAML metadata<span> (</span><span class='info'>Cantor, S., Moreh, J., Philpott, R., and E. Maler, &ldquo;Metadata for the Security Assertion Markup Language             (SAML) V2.0,&rdquo; March&nbsp;2005.</span><span>)</span></a> [OASIS.saml&#8209;metadata&#8209;2.0&#8209;os].
</p>
<p>SAML EC supports only a single name type for initiators:
GSS_C_NT_USER_NAME.  GSS_C_NT_USER_NAME is the default name type for
SAML EC.
</p>
<p>The query, display, and exported name syntaxes for SAML EC
principal names are all the same.  There are no SAML EC-specific name
syntaxes -- applications should use generic GSS-API name types such as
GSS_C_NT_USER_NAME and GSS_C_NT_HOSTBASED_SERVICE (see [RFC2743],
Section 4). The exported name token does, of course, conform to
[RFC2743], Section 3.2, but the "NAME" part of the token should be
treated as a potential input string to the SAML EC name normalization
rules.
</p>
<p>GSS-API name attributes may be defined in the future to hold the
normalized SAML EC Identifier.
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Example</h3>

<p> Suppose the user has an identity at the SAML IdP saml.example.org and a Jabber Identifier (jid) 
"somenode@example.com", and wishes to authenticate his XMPP connection to xmpp.example.com (and 
example.com and example.org have established a SAML-capable trust relationship).
The authentication on the wire would then look something like the following: 
</p>
<p>Step 1: Client initiates stream to server:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;stream:stream xmlns='jabber:client'
xmlns:stream='http://etherx.jabber.org/streams'
to='example.com' version='1.0'&gt;

</pre></div>
<p>Step 2: Server responds with a stream tag sent to client:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;stream:stream
xmlns='jabber:client' xmlns:stream='http://etherx.jabber.org/streams'
id='some_id' from='example.com' version='1.0'&gt;

</pre></div>
<p>Step 3: Server informs client of available authentication
mechanisms:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;stream:features&gt;
 &lt;mechanisms xmlns='urn:ietf:params:xml:ns:xmpp-sasl'&gt;
  &lt;mechanism&gt;DIGEST-MD5&lt;/mechanism&gt;
  &lt;mechanism&gt;PLAIN&lt;/mechanism&gt;
  &lt;mechanism&gt;SAML20EC&lt;/mechanism&gt;
 &lt;/mechanisms&gt;
&lt;/stream:features&gt;

</pre></div>
<p>Step 4: Client selects an authentication mechanism and sends the
initial client response (it is base64 encoded as specified by the XMPP
SASL protocol profile):
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;auth xmlns='urn:ietf:params:xml:ns:xmpp-sasl' mechanism='SAML20EC'&gt;
biws
&lt;/auth&gt;

</pre></div>
<p>The initial response is "n,," which signals that channel bindings
are not used, there is no authorization identity, and the client did
not provide a SAML &lt;Response&gt;.
</p>
<p>Step 5: Server sends a challenge to client in the form of a SOAP
envelope containing its SAML &lt;AuthnRequest&gt;:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;challenge xmlns='urn:ietf:params:xml:ns:xmpp-sasl'&gt;
PFM6RW52ZWxvcGUNCiAgICB4bWxuczpzYW1sPSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoy
LjA6YXNzZXJ0aW9uIg0KICAgIHhtbG5zOnNhbWxwPSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FN
TDoyLjA6cHJvdG9jb2wiDQogICAgeG1sbnM6Uz0iaHR0cDovL3NjaGVtYXMueG1sc29hcC5v
cmcvc29hcC9lbnZlbG9wZS8iPg0KICA8UzpIZWFkZXI+DQogICAgPHBhb3M6UmVxdWVzdCB4
bWxuczpwYW9zPSJ1cm46bGliZXJ0eTpwYW9zOjIwMDMtMDgiDQogICAgICBtZXNzYWdlSUQ9
ImMzYTRmOGI5YzJkIiBTOm11c3RVbmRlcnN0YW5kPSIxIg0KICAgICAgUzphY3Rvcj0iaHR0
cDovL3NjaGVtYXMueG1sc29hcC5vcmcvc29hcC9hY3Rvci9uZXh0Ig0KICAgICAgcmVzcG9u
c2VDb25zdW1lclVSTD0iaHR0cHM6Ly94bXBwLmV4YW1wbGUuY29tIg0KICAgICAgc2Vydmlj
ZT0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOnByb2ZpbGVzOlNTTzplY3AiLz4NCiAg
ICA8ZWNwOlJlcXVlc3QNCiAgICAgIHhtbG5zOmVjcD0idXJuOm9hc2lzOm5hbWVzOnRjOlNB
TUw6Mi4wOnByb2ZpbGVzOlNTTzplY3AiDQogICAgICBTOmFjdG9yPSJodHRwOi8vc2NoZW1h
cy54bWxzb2FwLm9yZy9zb2FwL2FjdG9yL25leHQiDQogICAgICBTOm11c3RVbmRlcnN0YW5k
PSIxIiBQcm92aWRlck5hbWU9IkphYmJlciBhdCBleGFtcGxlLmNvbSI+DQogICAgICA8c2Ft
bDpJc3N1ZXI+aHR0cHM6Ly94bXBwLmV4YW1wbGUuY29tPC9zYW1sOklzc3Vlcj4NCiAgICA8
L2VjcDpSZXF1ZXN0Pg0KICA8L1M6SGVhZGVyPg0KICA8UzpCb2R5Pg0KICAgIDxzYW1scDpB
dXRoblJlcXVlc3QNCiAgICAgIElEPSJjM2E0ZjhiOWMyZCIgVmVyc2lvbj0iMi4wIiBJc3N1
ZUluc3RhbnQ9IjIwMDctMTItMTBUMTE6Mzk6MzRaIg0KICAgICAgUHJvdG9jb2xCaW5kaW5n
PSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoyLjA6YmluZGluZ3M6UEFPUyINCiAgICAgIEFz
c2VydGlvbkNvbnN1bWVyU2VydmljZVVSTD0iaHR0cHM6Ly94bXBwLmV4YW1wbGUuY29tIj4N
CiAgICAgIDxzYW1sOklzc3VlciB4bWxuczpzYW1sPSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FN
TDoyLjA6YXNzZXJ0aW9uIj4NCiAgICAgICBodHRwczovL3htcHAuZXhhbXBsZS5jb20NCiAg
ICAgIDwvc2FtbDpJc3N1ZXI+DQogICAgICA8c2FtbHA6TmFtZUlEUG9saWN5IEFsbG93Q3Jl
YXRlPSJ0cnVlIg0KICAgICAgICBGb3JtYXQ9InVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIu
MDpuYW1laWQtZm9ybWF0OnBlcnNpc3RlbnQiLz4NCiAgICAgIDxzYW1scDpSZXF1ZXN0ZWRB
dXRobkNvbnRleHQgQ29tcGFyaXNvbj0iZXhhY3QiPg0KICAgICAgIDxzYW1sOkF1dGhuQ29u
dGV4dENsYXNzUmVmPg0KICAgICAgIHVybjpvYXNpczpuYW1lczp0YzpTQU1MOjIuMDphYzpj
bGFzc2VzOlBhc3N3b3JkUHJvdGVjdGVkVHJhbnNwb3J0DQogICAgICAgPC9zYW1sOkF1dGhu
Q29udGV4dENsYXNzUmVmPg0KICAgICAgPC9zYW1scDpSZXF1ZXN0ZWRBdXRobkNvbnRleHQ+
IA0KICAgIDwvc2FtbHA6QXV0aG5SZXF1ZXN0Pg0KICA8L1M6Qm9keT4NCjwvUzpFbnZlbG9w
ZT4NCg==
&lt;/challenge&gt;

</pre></div>
<p>The <a class='info' href='#RFC4648'>Base64<span> (</span><span class='info'>Josefsson, S., &ldquo;The Base16, Base32, and Base64 Data Encodings,&rdquo; October&nbsp;2006.</span><span>)</span></a> [RFC4648] decoded envelope:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;S:Envelope
    xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion"
    xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol"
    xmlns:S="http://schemas.xmlsoap.org/soap/envelope/"&gt;
  &lt;S:Header&gt;
    &lt;paos:Request xmlns:paos="urn:liberty:paos:2003-08"
      messageID="c3a4f8b9c2d" S:mustUnderstand="1"
      S:actor="http://schemas.xmlsoap.org/soap/actor/next"
      responseConsumerURL="xmpp:xmpp.example.com"
      service="urn:oasis:names:tc:SAML:2.0:profiles:SSO:ecp"/&gt;
    &lt;ecp:Request
      xmlns:ecp="urn:oasis:names:tc:SAML:2.0:profiles:SSO:ecp"
      S:actor="http://schemas.xmlsoap.org/soap/actor/next"
      S:mustUnderstand="1" ProviderName="Jabber at example.com"&gt;
      &lt;saml:Issuer&gt;https://xmpp.example.com&lt;/saml:Issuer&gt;
    &lt;/ecp:Request&gt;
  &lt;/S:Header&gt;
  &lt;S:Body&gt;
    &lt;samlp:AuthnRequest
      ID="c3a4f8b9c2d" Version="2.0" IssueInstant="2007-12-10T11:39:34Z"
      ProtocolBinding="urn:oasis:names:tc:SAML:2.0:bindings:PAOS"
      AssertionConsumerServiceURL="xmpp:xmpp.example.com"&gt;
      &lt;saml:Issuer xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion"&gt;
       https://xmpp.example.com
      &lt;/saml:Issuer&gt;
      &lt;samlp:NameIDPolicy AllowCreate="true"
        Format="urn:oasis:names:tc:SAML:2.0:nameid-format:persistent"/&gt;
      &lt;samlp:RequestedAuthnContext Comparison="exact"&gt;
       &lt;saml:AuthnContextClassRef&gt;
       urn:oasis:names:tc:SAML:2.0:ac:classes:PasswordProtectedTransport
       &lt;/saml:AuthnContextClassRef&gt;
      &lt;/samlp:RequestedAuthnContext&gt;
    &lt;/samlp:AuthnRequest&gt;
  &lt;/S:Body&gt;
&lt;/S:Envelope&gt;

</pre></div>
<p>Step 5 (alt): Server returns error to client:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;failure xmlns='urn:ietf:params:xml:ns:xmpp-sasl'&gt;
 &lt;incorrect-encoding/&gt;
&lt;/failure&gt;
&lt;/stream:stream&gt;

</pre></div>
<p>Step 6: Client relays the request to IdP in a SOAP message
transmitted over HTTP (over TLS). HTTP portion not shown, use of
Basic Authentication is assumed. The body of the SOAP envelope is
exactly the same as received in the previous step.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;S:Envelope
    xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion"
    xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol"
    xmlns:S="http://schemas.xmlsoap.org/soap/envelope/"&gt;
    &lt;S:Body&gt;
        &lt;samlp:AuthnRequest&gt;
        &lt;!-- same as above --&gt;
        &lt;/samlp:AuthnRequest&gt;
    &lt;/S:Body&gt;
&lt;/S:Envelope&gt;

</pre></div>
<p>Step 7: IdP responds to client with a SOAP response
containing a SAML &lt;Response&gt; containing a short-lived SSO
assertion (shown as an encrypted variant in the example).
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;S:Envelope
    xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion"
    xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol"
    xmlns:S="http://schemas.xmlsoap.org/soap/envelope/"&gt;
  &lt;S:Header&gt;
    &lt;ecp:Response S:mustUnderstand="1"
      S:actor="http://schemas.xmlsoap.org/soap/actor/next"
      AssertionConsumerServiceURL="xmpp:xmpp.example.com"/&gt;
  &lt;/S:Header&gt;
  &lt;S:Body&gt;
    &lt;samlp:Response ID="d43h94r389309r" Version="2.0"
        IssueInstant="2007-12-10T11:42:34Z" InResponseTo="c3a4f8b9c2d"
        Destination="https://xmpp.example.com"&gt;
      &lt;saml:Issuer&gt;https://saml.example.org&lt;/saml:Issuer&gt;
      &lt;samlp:Status&gt;
        &lt;samlp:StatusCode
            Value="urn:oasis:names:tc:SAML:2.0:status:Success"/&gt;
      &lt;/samlp:Status&gt;
      &lt;saml:EncryptedAssertion&gt;
        &lt;!-- contents elided --&gt;
      &lt;/saml:EncryptedAssertion&gt;
    &lt;/samlp:Response&gt;
  &lt;/S:Body&gt;
&lt;/S:Envelope&gt;

</pre></div>
<p>Step 8: Client sends SOAP envelope containing the SAML
&lt;Response&gt; as a response to the SASL server's challenge:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;response xmlns='urn:ietf:params:xml:ns:xmpp-sasl'&gt;
PFM6RW52ZWxvcGUNCiAgICB4bWxuczpzYW1sPSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FNTDoy
LjA6YXNzZXJ0aW9uIg0KICAgIHhtbG5zOnNhbWxwPSJ1cm46b2FzaXM6bmFtZXM6dGM6U0FN
TDoyLjA6cHJvdG9jb2wiDQogICAgeG1sbnM6Uz0iaHR0cDovL3NjaGVtYXMueG1sc29hcC5v
cmcvc29hcC9lbnZlbG9wZS8iPg0KICA8UzpIZWFkZXI+DQogICAgPHBhb3M6UmVzcG9uc2Ug
eG1sbnM6cGFvcz0idXJuOmxpYmVydHk6cGFvczoyMDAzLTA4Ig0KICAgICAgUzphY3Rvcj0i
aHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvc29hcC9hY3Rvci9uZXh0Ig0KICAgICAgUzpt
dXN0VW5kZXJzdGFuZD0iMSIgcmVmVG9NZXNzYWdlSUQ9IjZjM2E0ZjhiOWMyZCIvPg0KICA8
L1M6SGVhZGVyPg0KICA8UzpCb2R5Pg0KICAgIDxzYW1scDpSZXNwb25zZSBJRD0iZDQzaDk0
cjM4OTMwOXIiIFZlcnNpb249IjIuMCINCiAgICAgICAgSXNzdWVJbnN0YW50PSIyMDA3LTEy
LTEwVDExOjQyOjM0WiIgSW5SZXNwb25zZVRvPSJjM2E0ZjhiOWMyZCINCiAgICAgICAgRGVz
dGluYXRpb249Imh0dHBzOi8veG1wcC5leGFtcGxlLmNvbSI+DQogICAgICA8c2FtbDpJc3N1
ZXI+aHR0cHM6Ly9zYW1sLmV4YW1wbGUub3JnPC9zYW1sOklzc3Vlcj4NCiAgICAgIDxzYW1s
cDpTdGF0dXM+DQogICAgICAgIDxzYW1scDpTdGF0dXNDb2RlDQogICAgICAgICAgICBWYWx1
ZT0idXJuOm9hc2lzOm5hbWVzOnRjOlNBTUw6Mi4wOnN0YXR1czpTdWNjZXNzIi8+DQogICAg
ICA8L3NhbWxwOlN0YXR1cz4NCiAgICAgIDxzYW1sOkVuY3J5cHRlZEFzc2VydGlvbj4NCiAg
ICAgICAgPCEtLSBjb250ZW50cyBlbGlkZWQgLS0+DQogICAgICA8L3NhbWw6RW5jcnlwdGVk
QXNzZXJ0aW9uPg0KICAgIDwvc2FtbHA6UmVzcG9uc2U+DQogIDwvUzpCb2R5Pg0KPC9TOkVu
dmVsb3BlPg0K
&lt;/response&gt;

</pre></div>
<p>The <a class='info' href='#RFC4648'>Base64<span> (</span><span class='info'>Josefsson, S., &ldquo;The Base16, Base32, and Base64 Data Encodings,&rdquo; October&nbsp;2006.</span><span>)</span></a> [RFC4648] decoded envelope:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;S:Envelope
    xmlns:saml="urn:oasis:names:tc:SAML:2.0:assertion"
    xmlns:samlp="urn:oasis:names:tc:SAML:2.0:protocol"
    xmlns:S="http://schemas.xmlsoap.org/soap/envelope/"&gt;
  &lt;S:Header&gt;
    &lt;paos:Response xmlns:paos="urn:liberty:paos:2003-08"
      S:actor="http://schemas.xmlsoap.org/soap/actor/next"
      S:mustUnderstand="1" refToMessageID="6c3a4f8b9c2d"/&gt;
  &lt;/S:Header&gt;
  &lt;S:Body&gt;
    &lt;samlp:Response ID="d43h94r389309r" Version="2.0"
        IssueInstant="2007-12-10T11:42:34Z" InResponseTo="c3a4f8b9c2d"
        Destination="xmpp:xmpp.example.com"&gt;
      &lt;saml:Issuer&gt;https://saml.example.org&lt;/saml:Issuer&gt;
      &lt;samlp:Status&gt;
        &lt;samlp:StatusCode
            Value="urn:oasis:names:tc:SAML:2.0:status:Success"/&gt;
      &lt;/samlp:Status&gt;
      &lt;saml:EncryptedAssertion&gt;
        &lt;!-- contents elided --&gt;
      &lt;/saml:EncryptedAssertion&gt;
    &lt;/samlp:Response&gt;
  &lt;/S:Body&gt;
&lt;/S:Envelope&gt;

</pre></div>
<p>Step 9: Server informs client of successful authentication:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;success xmlns='urn:ietf:params:xml:ns:xmpp-sasl'/&gt;

</pre></div>
<p>Step 9 (alt): Server informs client of failed authentication:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;failure xmlns='urn:ietf:params:xml:ns:xmpp-sasl'&gt;
 &lt;temporary-auth-failure/&gt;
&lt;/failure&gt;
&lt;/stream:stream&gt;

</pre></div>
<p>Step 10: Client initiates a new stream to server:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;stream:stream xmlns='jabber:client'
xmlns:stream='http://etherx.jabber.org/streams'
to='example.com' version='1.0'&gt;

</pre></div>
<p>Step 11: Server responds by sending a stream header to client along
with any additional features (or an empty features element):
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

&lt;stream:stream xmlns='jabber:client'
xmlns:stream='http://etherx.jabber.org/streams'
id='c2s_345' from='example.com' version='1.0'&gt;
&lt;stream:features&gt;
 &lt;bind xmlns='urn:ietf:params:xml:ns:xmpp-bind'/&gt;
 &lt;session xmlns='urn:ietf:params:xml:ns:xmpp-session'/&gt;
&lt;/stream:features&gt;

</pre></div>
<p>Step 12: Client binds a resource:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

   &lt;iq type='set' id='bind_1'&gt;
     &lt;bind xmlns='urn:ietf:params:xml:ns:xmpp-bind'&gt;
       &lt;resource&gt;someresource&lt;/resource&gt;
     &lt;/bind&gt;
   &lt;/iq&gt;

</pre></div>
<p>Step 13: Server informs client of successful resource binding:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

   &lt;iq type='result' id='bind_1'&gt;
     &lt;bind xmlns='urn:ietf:params:xml:ns:xmpp-bind'&gt;
       &lt;jid&gt;somenode@example.com/someresource&lt;/jid&gt;
     &lt;/bind&gt;
   &lt;/iq&gt;

</pre></div>
<p>Please note: line breaks were added to the
base64 for clarity.
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Security Considerations</h3>

<p>
This section will address only security considerations associated
with the use of SAML with SASL applications. For considerations
relating to SAML in general, the reader is referred to the SAML
specification and to other literature. Similarly, for general SASL
Security Considerations, the reader is referred to that
specification.

</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1"></a><h3>7.1.&nbsp;
Risks Left Unaddressed</h3>

<p>
The adaptation of a web-based profile that is largely designed
around security-oblivious clients and a bearer model for security
token validation results in a number of basic security exposures
that should be weighed against the compatibility and client
simplification benefits of this mechanism.

</p>
<p>
Protection against "Man in the Middle" attacks is left to lower
layer protocols such as TLS, and the development of user interfaces
able to implement that has not been effectively demonstrated. Failure
to detect a MITM can result in phishing of the user's credentials
if the attacker is between the client and IdP, or the theft and misuse
of a short-lived credential (the SAML assertion) if the attacker is
able to impersonate a RP. SAML allows for source address checking
as a minor mitigation to the latter threat, but this is often
impractical. IdPs can mitigate to some extent the exposure of
personal information to RP attackers by encrypting assertions with
authenticated keys.

</p>
<p>
This mechanism also does not yet support the use of channel bindings or
supply a SASL security layer, so there is no assurance that the TLS
endpoints are related to the SASL endpoints. A future draft of this
specification will incorporate such a mechanism, mediated by the IdP.

</p>
<p>

</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2"></a><h3>7.2.&nbsp;
User Privacy</h3>

<p>
The IdP is aware of each RP that a user logs into. There is nothing
in the protocol to hide this information from the IdP. It is not a
requirement to track the activity, but there is nothing technically
that prohibits the collection of information. SASL servers should be
aware that SAML IdPs will track - to some extent - user access to
their services.

</p>
<p>
It is also out of scope of the mechanism to determine under what
conditions an IdP will release particular information to a relying
party, and it is generally unclear in what fashion user consent
could be established in real time for the release of particular
information. The SOAP exchange with the IdP does not preclude such
interaction, but neither does it define that interoperably.

</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.3"></a><h3>7.3.&nbsp;
Collusion between RPs</h3>

<p>
Depending on the information supplied by the IdP, it may be possible
for RPs to correlate data that they have collected. By using the same
identifier to log into every RP, collusion between RPs is possible.
SAML supports the notion of pairwise, or targeted/directed, identity.
This allows the IdP to manage opaque, pairwise identifiers for each user
that are specific to each RP. However, correlation is often possible
based on other attributes supplied, and is generally a topic that is
beyond the scope of this mechanism. It is sufficient to say that this
mechanism does not introduce new correlation opportunities over and
above the use of SAML in web-based use cases. 

</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
IANA Considerations</h3>

<p> The IANA is requested to
register the following
SASL profile: 
</p>
<p>
</p>
<p>SASL mechanism profile: SAML20EC
</p>
<p>Security
Considerations: See this document
</p>
<p>Published Specification: See
this document
</p>
<p>For further information: Contact the authors of
this document.
</p>
<p>Owner/Change controller: the IETF
</p>
<p>Note:
None
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="OASIS.saml-bindings-2.0-os">[OASIS.saml-bindings-2.0-os]</a></td>
<td class="author-text"><a href="mailto:cantor.2@osu.edu">Cantor, S.</a>, <a href="mailto:Frederick.Hirsch@nokia.com">Hirsch, F.</a>, <a href="mailto:John.Kemp@nokia.com">Kemp, J.</a>, <a href="mailto:rphilpott@rsasecurity.com">Philpott, R.</a>, and <a href="mailto:eve.maler@sun.com">E. Maler</a>, &ldquo;<a href="http://docs.oasis-open.org/security/saml/v2.0/saml-bindings-2.0-os.pdf">Bindings for the OASIS Security Assertion Markup Language
            (SAML) V2.0</a>,&rdquo; OASIS Standard&nbsp;saml-bindings-2.0-os, March&nbsp;2005.</td></tr>
<tr><td class="author-text" valign="top"><a name="OASIS.saml-core-2.0-os">[OASIS.saml-core-2.0-os]</a></td>
<td class="author-text"><a href="mailto:cantor.2@osu.edu">Cantor, S.</a>, <a href="mailto:John.Kemp@nokia.com">Kemp, J.</a>, <a href="mailto:rphilpott@rsasecurity.com">Philpott, R.</a>, and <a href="mailto:eve.maler@sun.com">E. Maler</a>, &ldquo;<a href="http://docs.oasis-open.org/security/saml/v2.0/saml-core-2.0-os.pdf">Assertions and Protocol for the OASIS Security Assertion Markup Language
            (SAML) V2.0</a>,&rdquo; OASIS Standard&nbsp;saml-core-2.0-os, March&nbsp;2005.</td></tr>
<tr><td class="author-text" valign="top"><a name="OASIS.saml-profiles-2.0-os">[OASIS.saml-profiles-2.0-os]</a></td>
<td class="author-text"><a href="mailto:">Hughes, J.</a>, <a href="mailto:cantor.2@osu.edu">Cantor, S.</a>, <a href="mailto:Jeff.Hodges@neustar.biz">Hodges, J.</a>, <a href="mailto:Frederick.Hirsch@nokia.com">Hirsch, F.</a>, <a href="mailto:pmishra@principalidentity.com">Mishra, P.</a>, <a href="mailto:rphilpott@rsasecurity.com">Philpott, R.</a>, and <a href="mailto:eve.maler@sun.com">E. Maler</a>, &ldquo;<a href="http://docs.oasis-open.org/security/saml/v2.0/saml-profiles-2.0-os.pdf">Profiles for the OASIS Security Assertion Markup Language
            (SAML) V2.0</a>,&rdquo; OASIS Standard&nbsp;OASIS.saml-profiles-2.0-os, March&nbsp;2005.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2617">[RFC2617]</a></td>
<td class="author-text"><a href="mailto:john@math.nwu.edu">Franks, J.</a>, <a href="mailto:pbaker@verisign.com">Hallam-Baker, P.</a>, <a href="mailto:jeff@AbiSource.com">Hostetler, J.</a>, <a href="mailto:lawrence@agranat.com">Lawrence, S.</a>, <a href="mailto:paulle@microsoft.com">Leach, P.</a>, Luotonen, A., and <a href="mailto:stewart@OpenMarket.com">L. Stewart</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2617">HTTP Authentication: Basic and Digest Access Authentication</a>,&rdquo; RFC&nbsp;2617, June&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2617.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2617.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2617.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4422">[RFC4422]</a></td>
<td class="author-text">Melnikov, A. and K. Zeilenga, &ldquo;<a href="http://tools.ietf.org/html/rfc4422">Simple Authentication and Security Layer (SASL)</a>,&rdquo; RFC&nbsp;4422, June&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4422.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4648">[RFC4648]</a></td>
<td class="author-text">Josefsson, S., &ldquo;<a href="http://tools.ietf.org/html/rfc4648">The Base16, Base32, and Base64 Data Encodings</a>,&rdquo; RFC&nbsp;4648, October&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4648.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5246">[RFC5246]</a></td>
<td class="author-text">Dierks, T. and E. Rescorla, &ldquo;<a href="http://tools.ietf.org/html/rfc5246">The Transport Layer Security (TLS) Protocol Version 1.2</a>,&rdquo; RFC&nbsp;5246, August&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5246.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="W3C.soap11">[W3C.soap11]</a></td>
<td class="author-text"><a href="mailto:dbox@develop.com">Box, D.</a>, <a href="mailto:davide@us.ibm.com">Ehnebuske, D.</a>, <a href="mailto:gopalk@microsoft.com">Kakivaya, G.</a>, <a href="mailto:andrewl@microsoft.com">Layman, A.</a>, <a href="mailto:Noah_Mendelsohn@lotus.com">Mendelsohn, N.</a>, <a href="mailto:frystyk@microsoft.com">Nielsen, H.</a>, <a href="mailto:satisht@microsoft.com">Thatte, S.</a>, and <a href="mailto:dave@userland.com">D. Winer</a>, &ldquo;<a href="http://www.w3.org/TR/SOAP/">Simple Object Access Protocol (SOAP) 1.1</a>,&rdquo; W3C Note&nbsp;soap11, May&nbsp;2000.</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.2.&nbsp;Normative References for GSS-API Implementers</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2743">[RFC2743]</a></td>
<td class="author-text"><a href="mailto:jlinn@rsasecurity.com">Linn, J.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2743">Generic Security Service Application Program Interface Version 2, Update 1</a>,&rdquo; RFC&nbsp;2743, January&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc2743.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5801">[RFC5801]</a></td>
<td class="author-text">Josefsson, S. and N. Williams, &ldquo;<a href="http://tools.ietf.org/html/rfc5801">Using Generic Security Service Application Program Interface (GSS-API) Mechanisms in Simple Authentication and Security Layer (SASL): The GS2 Mechanism Family</a>,&rdquo; RFC&nbsp;5801, July&nbsp;2010 (<a href="http://www.rfc-editor.org/rfc/rfc5801.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.3.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="OASIS.saml-metadata-2.0-os">[OASIS.saml-metadata-2.0-os]</a></td>
<td class="author-text"><a href="mailto:cantor.2@osu.edu">Cantor, S.</a>, <a href="mailto:jmoreh@sigaba.com">Moreh, J.</a>, <a href="mailto:rphilpott@rsasecurity.com">Philpott, R.</a>, and <a href="mailto:eve.maler@sun.com">E. Maler</a>, &ldquo;<a href="http://docs.oasis-open.org/security/saml/v2.0/saml-metadata-2.0-os.pdf">Metadata for the Security Assertion Markup Language
            (SAML) V2.0</a>,&rdquo; OASIS Standard&nbsp;saml-metadata-2.0-os, March&nbsp;2005.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2616">[RFC2616]</a></td>
<td class="author-text"><a href="mailto:fielding@ics.uci.edu">Fielding, R.</a>, <a href="mailto:jg@w3.org">Gettys, J.</a>, <a href="mailto:mogul@wrl.dec.com">Mogul, J.</a>, <a href="mailto:frystyk@w3.org">Frystyk, H.</a>, <a href="mailto:masinter@parc.xerox.com">Masinter, L.</a>, <a href="mailto:paulle@microsoft.com">Leach, P.</a>, and <a href="mailto:timbl@w3.org">T. Berners-Lee</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2616">Hypertext Transfer Protocol -- HTTP/1.1</a>,&rdquo; RFC&nbsp;2616, June&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2616.txt">TXT</a>, <a href="http://www.rfc-editor.org/rfc/rfc2616.ps">PS</a>, <a href="http://www.rfc-editor.org/rfc/rfc2616.pdf">PDF</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2616.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2616.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3920">[RFC3920]</a></td>
<td class="author-text"><a href="mailto:stpeter@jabber.org">Saint-Andre, P., Ed.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc3920">Extensible Messaging and Presence Protocol (XMPP): Core</a>,&rdquo; RFC&nbsp;3920, October&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3920.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc3920.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc3920.xml">XML</a>).</td></tr>
</table>

<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
Acknowledgments</h3>

<p>
The authors would like to thank Klaas Wierenga, Sam Hartman, and
Nico Williams for their contributions.

</p>
<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B"></a><h3>Appendix B.&nbsp;
Changes</h3>

<p>This section to be removed
prior to publication.
</p>
<p> </p>
<ul class="text">
<li>00 Added GSS-API and GS2 discussions to draft-cantor-ietf-sasl-saml-ec-00
and renamed as kitten draft.
</li>
<li>draft-cantor-ietf-sasl-saml-ec-00, Initial
Revision, largely adapted from draft-wierenga-ietf-sasl-saml-00. 
</li>
</ul><p> 
</p>
<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Scott Cantor</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Internet2</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">2740 Airport Drive</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Columbus, Ohio  43219</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">United States</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 614 247 6147</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:cantor.2@osu.edu">cantor.2@osu.edu</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Simon Josefsson</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">SJD AB</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Hagagatan 24</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Stockholm  113 47</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">SE</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:simon@josefsson.org">simon@josefsson.org</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://josefsson.org/">http://josefsson.org/</a></td></tr>
</table>
</body></html>
