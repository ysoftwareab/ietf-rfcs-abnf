<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Hypertext Transfer Protocol Version 3 (HTTP/3)</title>
<meta content="Mike Bishop" name="author">
<meta content="
       The QUIC transport protocol has several features that are desirable in a
transport for HTTP, such as stream multiplexing, per-stream flow control, and
low-latency connection establishment.  This document describes a mapping of HTTP
semantics over QUIC.  This document also identifies HTTP/2 features that are
subsumed by QUIC, and describes how HTTP/2 extensions can be ported to HTTP/3. 
    " name="description">
<meta content="xml2rfc 2.40.0" name="generator">
<meta content="draft-ietf-quic-http-26" name="ietf.draft">
<link href="/tmp/draft-ietf-quic-http-26-Z_rxnN.xml" type="application/rfc+xml" rel="alternate">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Avoid wrapping of URLs in references */
@media screen {
  .references a {
    white-space: nowrap;
  }
}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin: 0 0 0.25em 0;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/*
  The margin-left: 0 on <dd> removes all distinction
  between levels from nested <dl>s.  Undo that.
*/
dl.olPercent > dd,
dd {
  margin-left: revert;
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
</style>
<link href="rfc-local.css" type="text/css" rel="stylesheet">
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">HTTP/3</td>
<td class="right">February 2020</td>
</tr></thead>
<tfoot><tr>
<td class="left">Bishop</td>
<td class="center">Expires 24 August 2020</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">QUIC</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-ietf-quic-http-26</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2020-02-21" class="published">21 February 2020</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2020-08-24">24 August 2020</time></dd>
<dt class="label-authors">Author:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">M. Bishop, <span class="editor">Ed.</span>
</div>
<div class="org">Akamai</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Hypertext Transfer Protocol Version 3 (HTTP/3)</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">The QUIC transport protocol has several features that are desirable in a
transport for HTTP, such as stream multiplexing, per-stream flow control, and
low-latency connection establishment.  This document describes a mapping of HTTP
semantics over QUIC.  This document also identifies HTTP/2 features that are
subsumed by QUIC, and describes how HTTP/2 extensions can be ported to HTTP/3.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<section class="note" id="section-note.1">
      <h2 id="name-note-to-readers">
<a href="#name-note-to-readers" class="section-name selfRef">Note to Readers</a>
      </h2>
<p id="section-note.1-1">Discussion of this draft takes place on the QUIC working group mailing list
(quic@ietf.org), which is archived at
<a href="https://mailarchive.ietf.org/arch/search/?email_list=quic">https://mailarchive.ietf.org/arch/search/?email_list=quic</a>.<a href="#section-note.1-1" class="pilcrow">¶</a></p>
<p id="section-note.1-2">Working Group information can be found at <a href="https://github.com/quicwg">https://github.com/quicwg</a>; source
code and issues list for this draft can be found at
<a href="https://github.com/quicwg/base-drafts/labels/-http">https://github.com/quicwg/base-drafts/labels/-http</a>.<a href="#section-note.1-2" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 24 August 2020.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2020 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a><a href="#section-toc.1-1.1.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.1.2.1">
                <p id="section-toc.1-1.1.2.1.1"><a href="#section-1.1" class="xref">1.1</a>.  <a href="#name-prior-versions-of-http" class="xref">Prior versions of HTTP</a><a href="#section-toc.1-1.1.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.1.2.2">
                <p id="section-toc.1-1.1.2.2.1"><a href="#section-1.2" class="xref">1.2</a>.  <a href="#name-delegation-to-quic" class="xref">Delegation to QUIC</a><a href="#section-toc.1-1.1.2.2.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="xref">2</a>.  <a href="#name-http-3-protocol-overview" class="xref">HTTP/3 Protocol Overview</a><a href="#section-toc.1-1.2.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1"><a href="#section-2.1" class="xref">2.1</a>.  <a href="#name-document-organization" class="xref">Document Organization</a><a href="#section-toc.1-1.2.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.2.2.2">
                <p id="section-toc.1-1.2.2.2.1"><a href="#section-2.2" class="xref">2.2</a>.  <a href="#name-conventions-and-terminology" class="xref">Conventions and Terminology</a><a href="#section-toc.1-1.2.2.2.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-connection-setup-and-manage" class="xref">Connection Setup and Management</a><a href="#section-toc.1-1.3.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1"><a href="#section-3.1" class="xref">3.1</a>.  <a href="#name-draft-version-identificatio" class="xref">Draft Version Identification</a><a href="#section-toc.1-1.3.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="xref">3.2</a>.  <a href="#name-discovering-an-http-3-endpo" class="xref">Discovering an HTTP/3 Endpoint</a><a href="#section-toc.1-1.3.2.2.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.3.2.3">
                <p id="section-toc.1-1.3.2.3.1"><a href="#section-3.3" class="xref">3.3</a>.  <a href="#name-connection-establishment" class="xref">Connection Establishment</a><a href="#section-toc.1-1.3.2.3.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.3.2.4">
                <p id="section-toc.1-1.3.2.4.1"><a href="#section-3.4" class="xref">3.4</a>.  <a href="#name-connection-reuse" class="xref">Connection Reuse</a><a href="#section-toc.1-1.3.2.4.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-http-request-lifecycle" class="xref">HTTP Request Lifecycle</a><a href="#section-toc.1-1.4.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="xref">4.1</a>.  <a href="#name-http-message-exchanges" class="xref">HTTP Message Exchanges</a><a href="#section-toc.1-1.4.2.1.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.4.2.1.2.1">
                    <p id="section-toc.1-1.4.2.1.2.1.1"><a href="#section-4.1.1" class="xref">4.1.1</a>.  <a href="#name-header-formatting-and-compr" class="xref">Header Formatting and Compression</a><a href="#section-toc.1-1.4.2.1.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.4.2.1.2.2">
                    <p id="section-toc.1-1.4.2.1.2.2.1"><a href="#section-4.1.2" class="xref">4.1.2</a>.  <a href="#name-request-cancellation-and-re" class="xref">Request Cancellation and Rejection</a><a href="#section-toc.1-1.4.2.1.2.2.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.4.2.1.2.3">
                    <p id="section-toc.1-1.4.2.1.2.3.1"><a href="#section-4.1.3" class="xref">4.1.3</a>.  <a href="#name-malformed-requests-and-resp" class="xref">Malformed Requests and Responses</a><a href="#section-toc.1-1.4.2.1.2.3.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="xref">4.2</a>.  <a href="#name-the-connect-method" class="xref">The CONNECT Method</a><a href="#section-toc.1-1.4.2.2.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="xref">4.3</a>.  <a href="#name-http-upgrade" class="xref">HTTP Upgrade</a><a href="#section-toc.1-1.4.2.3.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.4.2.4">
                <p id="section-toc.1-1.4.2.4.1"><a href="#section-4.4" class="xref">4.4</a>.  <a href="#name-server-push" class="xref">Server Push</a><a href="#section-toc.1-1.4.2.4.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-connection-closure" class="xref">Connection Closure</a><a href="#section-toc.1-1.5.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="xref">5.1</a>.  <a href="#name-idle-connections" class="xref">Idle Connections</a><a href="#section-toc.1-1.5.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="xref">5.2</a>.  <a href="#name-connection-shutdown" class="xref">Connection Shutdown</a><a href="#section-toc.1-1.5.2.2.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a href="#section-5.3" class="xref">5.3</a>.  <a href="#name-immediate-application-closu" class="xref">Immediate Application Closure</a><a href="#section-toc.1-1.5.2.3.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.5.2.4">
                <p id="section-toc.1-1.5.2.4.1"><a href="#section-5.4" class="xref">5.4</a>.  <a href="#name-transport-closure" class="xref">Transport Closure</a><a href="#section-toc.1-1.5.2.4.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-stream-mapping-and-usage" class="xref">Stream Mapping and Usage</a><a href="#section-toc.1-1.6.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a href="#section-6.1" class="xref">6.1</a>.  <a href="#name-bidirectional-streams" class="xref">Bidirectional Streams</a><a href="#section-toc.1-1.6.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.6.2.2">
                <p id="section-toc.1-1.6.2.2.1"><a href="#section-6.2" class="xref">6.2</a>.  <a href="#name-unidirectional-streams" class="xref">Unidirectional Streams</a><a href="#section-toc.1-1.6.2.2.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.6.2.2.2.1">
                    <p id="section-toc.1-1.6.2.2.2.1.1"><a href="#section-6.2.1" class="xref">6.2.1</a>.  <a href="#name-control-streams" class="xref">Control Streams</a><a href="#section-toc.1-1.6.2.2.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.6.2.2.2.2">
                    <p id="section-toc.1-1.6.2.2.2.2.1"><a href="#section-6.2.2" class="xref">6.2.2</a>.  <a href="#name-push-streams" class="xref">Push Streams</a><a href="#section-toc.1-1.6.2.2.2.2.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.6.2.2.2.3">
                    <p id="section-toc.1-1.6.2.2.2.3.1"><a href="#section-6.2.3" class="xref">6.2.3</a>.  <a href="#name-reserved-stream-types" class="xref">Reserved Stream Types</a><a href="#section-toc.1-1.6.2.2.2.3.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-http-framing-layer" class="xref">HTTP Framing Layer</a><a href="#section-toc.1-1.7.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.7.2.1">
                <p id="section-toc.1-1.7.2.1.1"><a href="#section-7.1" class="xref">7.1</a>.  <a href="#name-frame-layout" class="xref">Frame Layout</a><a href="#section-toc.1-1.7.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7.2.2">
                <p id="section-toc.1-1.7.2.2.1"><a href="#section-7.2" class="xref">7.2</a>.  <a href="#name-frame-definitions" class="xref">Frame Definitions</a><a href="#section-toc.1-1.7.2.2.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.7.2.2.2.1">
                    <p id="section-toc.1-1.7.2.2.2.1.1"><a href="#section-7.2.1" class="xref">7.2.1</a>.  <a href="#name-data" class="xref">DATA</a><a href="#section-toc.1-1.7.2.2.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7.2.2.2.2">
                    <p id="section-toc.1-1.7.2.2.2.2.1"><a href="#section-7.2.2" class="xref">7.2.2</a>.  <a href="#name-headers" class="xref">HEADERS</a><a href="#section-toc.1-1.7.2.2.2.2.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7.2.2.2.3">
                    <p id="section-toc.1-1.7.2.2.2.3.1"><a href="#section-7.2.3" class="xref">7.2.3</a>.  <a href="#name-cancel_push" class="xref">CANCEL_PUSH</a><a href="#section-toc.1-1.7.2.2.2.3.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7.2.2.2.4">
                    <p id="section-toc.1-1.7.2.2.2.4.1"><a href="#section-7.2.4" class="xref">7.2.4</a>.  <a href="#name-settings" class="xref">SETTINGS</a><a href="#section-toc.1-1.7.2.2.2.4.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7.2.2.2.5">
                    <p id="section-toc.1-1.7.2.2.2.5.1"><a href="#section-7.2.5" class="xref">7.2.5</a>.  <a href="#name-push_promise" class="xref">PUSH_PROMISE</a><a href="#section-toc.1-1.7.2.2.2.5.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7.2.2.2.6">
                    <p id="section-toc.1-1.7.2.2.2.6.1"><a href="#section-7.2.6" class="xref">7.2.6</a>.  <a href="#name-goaway" class="xref">GOAWAY</a><a href="#section-toc.1-1.7.2.2.2.6.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7.2.2.2.7">
                    <p id="section-toc.1-1.7.2.2.2.7.1"><a href="#section-7.2.7" class="xref">7.2.7</a>.  <a href="#name-max_push_id" class="xref">MAX_PUSH_ID</a><a href="#section-toc.1-1.7.2.2.2.7.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.7.2.2.2.8">
                    <p id="section-toc.1-1.7.2.2.2.8.1"><a href="#section-7.2.8" class="xref">7.2.8</a>.  <a href="#name-reserved-frame-types" class="xref">Reserved Frame Types</a><a href="#section-toc.1-1.7.2.2.2.8.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-error-handling" class="xref">Error Handling</a><a href="#section-toc.1-1.8.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="xref">8.1</a>.  <a href="#name-http-3-error-codes" class="xref">HTTP/3 Error Codes</a><a href="#section-toc.1-1.8.2.1.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-extensions-to-http-3" class="xref">Extensions to HTTP/3</a><a href="#section-toc.1-1.9.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="xref">10</a>. <a href="#name-security-considerations" class="xref">Security Considerations</a><a href="#section-toc.1-1.10.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a href="#section-10.1" class="xref">10.1</a>.  <a href="#name-traffic-analysis" class="xref">Traffic Analysis</a><a href="#section-toc.1-1.10.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.10.2.2">
                <p id="section-toc.1-1.10.2.2.1"><a href="#section-10.2" class="xref">10.2</a>.  <a href="#name-frame-parsing" class="xref">Frame Parsing</a><a href="#section-toc.1-1.10.2.2.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.10.2.3">
                <p id="section-toc.1-1.10.2.3.1"><a href="#section-10.3" class="xref">10.3</a>.  <a href="#name-early-data" class="xref">Early Data</a><a href="#section-toc.1-1.10.2.3.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.10.2.4">
                <p id="section-toc.1-1.10.2.4.1"><a href="#section-10.4" class="xref">10.4</a>.  <a href="#name-migration" class="xref">Migration</a><a href="#section-toc.1-1.10.2.4.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#section-11" class="xref">11</a>. <a href="#name-iana-considerations" class="xref">IANA Considerations</a><a href="#section-toc.1-1.11.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.11.2.1">
                <p id="section-toc.1-1.11.2.1.1"><a href="#section-11.1" class="xref">11.1</a>.  <a href="#name-registration-of-http-3-iden" class="xref">Registration of HTTP/3 Identification String</a><a href="#section-toc.1-1.11.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.11.2.2">
                <p id="section-toc.1-1.11.2.2.1"><a href="#section-11.2" class="xref">11.2</a>.  <a href="#name-new-registries" class="xref">New Registries</a><a href="#section-toc.1-1.11.2.2.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.11.2.2.2.1">
                    <p id="section-toc.1-1.11.2.2.2.1.1"><a href="#section-11.2.1" class="xref">11.2.1</a>.  <a href="#name-frame-types" class="xref">Frame Types</a><a href="#section-toc.1-1.11.2.2.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.11.2.2.2.2">
                    <p id="section-toc.1-1.11.2.2.2.2.1"><a href="#section-11.2.2" class="xref">11.2.2</a>.  <a href="#name-settings-parameters" class="xref">Settings Parameters</a><a href="#section-toc.1-1.11.2.2.2.2.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.11.2.2.2.3">
                    <p id="section-toc.1-1.11.2.2.2.3.1"><a href="#section-11.2.3" class="xref">11.2.3</a>.  <a href="#name-error-codes" class="xref">Error Codes</a><a href="#section-toc.1-1.11.2.2.2.3.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.11.2.2.2.4">
                    <p id="section-toc.1-1.11.2.2.2.4.1"><a href="#section-11.2.4" class="xref">11.2.4</a>.  <a href="#name-stream-types" class="xref">Stream Types</a><a href="#section-toc.1-1.11.2.2.2.4.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.12">
            <p id="section-toc.1-1.12.1"><a href="#section-12" class="xref">12</a>. <a href="#name-references" class="xref">References</a><a href="#section-toc.1-1.12.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.12.2.1">
                <p id="section-toc.1-1.12.2.1.1"><a href="#section-12.1" class="xref">12.1</a>.  <a href="#name-normative-references" class="xref">Normative References</a><a href="#section-toc.1-1.12.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.12.2.2">
                <p id="section-toc.1-1.12.2.2.1"><a href="#section-12.2" class="xref">12.2</a>.  <a href="#name-informative-references" class="xref">Informative References</a><a href="#section-toc.1-1.12.2.2.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.13">
            <p id="section-toc.1-1.13.1"><a href="#section-appendix.a" class="xref">Appendix A</a>.  <a href="#name-considerations-for-transiti" class="xref">Considerations for Transitioning from HTTP/2</a><a href="#section-toc.1-1.13.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.13.2.1">
                <p id="section-toc.1-1.13.2.1.1"><a href="#section-a.1" class="xref">A.1</a>.  <a href="#name-streams" class="xref">Streams</a><a href="#section-toc.1-1.13.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.13.2.2">
                <p id="section-toc.1-1.13.2.2.1"><a href="#section-a.2" class="xref">A.2</a>.  <a href="#name-http-frame-types" class="xref">HTTP Frame Types</a><a href="#section-toc.1-1.13.2.2.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.13.2.2.2.1">
                    <p id="section-toc.1-1.13.2.2.2.1.1"><a href="#section-a.2.1" class="xref">A.2.1</a>.  <a href="#name-prioritization-differences" class="xref">Prioritization Differences</a><a href="#section-toc.1-1.13.2.2.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.13.2.2.2.2">
                    <p id="section-toc.1-1.13.2.2.2.2.1"><a href="#section-a.2.2" class="xref">A.2.2</a>.  <a href="#name-header-compression-differen" class="xref">Header Compression Differences</a><a href="#section-toc.1-1.13.2.2.2.2.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.13.2.2.2.3">
                    <p id="section-toc.1-1.13.2.2.2.3.1"><a href="#section-a.2.3" class="xref">A.2.3</a>.  <a href="#name-guidance-for-new-frame-type" class="xref">Guidance for New Frame Type Definitions</a><a href="#section-toc.1-1.13.2.2.2.3.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.13.2.2.2.4">
                    <p id="section-toc.1-1.13.2.2.2.4.1"><a href="#section-a.2.4" class="xref">A.2.4</a>.  <a href="#name-mapping-between-http-2-and-" class="xref">Mapping Between HTTP/2 and HTTP/3 Frame Types</a><a href="#section-toc.1-1.13.2.2.2.4.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.13.2.3">
                <p id="section-toc.1-1.13.2.3.1"><a href="#section-a.3" class="xref">A.3</a>.  <a href="#name-http-2-settings-parameters" class="xref">HTTP/2 SETTINGS Parameters</a><a href="#section-toc.1-1.13.2.3.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.13.2.4">
                <p id="section-toc.1-1.13.2.4.1"><a href="#section-a.4" class="xref">A.4</a>.  <a href="#name-http-2-error-codes" class="xref">HTTP/2 Error Codes</a><a href="#section-toc.1-1.13.2.4.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.14">
            <p id="section-toc.1-1.14.1"><a href="#section-appendix.b" class="xref">Appendix B</a>.  <a href="#name-change-log" class="xref">Change Log</a><a href="#section-toc.1-1.14.1" class="pilcrow">¶</a></p>
<ul class="toc ulEmpty">
<li class="toc ulEmpty" id="section-toc.1-1.14.2.1">
                <p id="section-toc.1-1.14.2.1.1"><a href="#section-b.1" class="xref">B.1</a>.  <a href="#name-since-draft-ietf-quic-http-" class="xref">Since draft-ietf-quic-http-25</a><a href="#section-toc.1-1.14.2.1.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.14.2.2">
                <p id="section-toc.1-1.14.2.2.1"><a href="#section-b.2" class="xref">B.2</a>.  <a href="#name-since-draft-ietf-quic-http-2" class="xref">Since draft-ietf-quic-http-24</a><a href="#section-toc.1-1.14.2.2.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.14.2.3">
                <p id="section-toc.1-1.14.2.3.1"><a href="#section-b.3" class="xref">B.3</a>.  <a href="#name-since-draft-ietf-quic-http-23" class="xref">Since draft-ietf-quic-http-23</a><a href="#section-toc.1-1.14.2.3.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.14.2.4">
                <p id="section-toc.1-1.14.2.4.1"><a href="#section-b.4" class="xref">B.4</a>.  <a href="#name-since-draft-ietf-quic-http-22" class="xref">Since draft-ietf-quic-http-22</a><a href="#section-toc.1-1.14.2.4.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.14.2.5">
                <p id="section-toc.1-1.14.2.5.1"><a href="#section-b.5" class="xref">B.5</a>.  <a href="#name-since-draft-ietf-quic-http-21" class="xref">Since draft-ietf-quic-http-21</a><a href="#section-toc.1-1.14.2.5.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.14.2.6">
                <p id="section-toc.1-1.14.2.6.1"><a href="#section-b.6" class="xref">B.6</a>.  <a href="#name-since-draft-ietf-quic-http-20" class="xref">Since draft-ietf-quic-http-20</a><a href="#section-toc.1-1.14.2.6.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.14.2.7">
                <p id="section-toc.1-1.14.2.7.1"><a href="#section-b.7" class="xref">B.7</a>.  <a href="#name-since-draft-ietf-quic-http-1" class="xref">Since draft-ietf-quic-http-19</a><a href="#section-toc.1-1.14.2.7.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.14.2.8">
                <p id="section-toc.1-1.14.2.8.1"><a href="#section-b.8" class="xref">B.8</a>.  <a href="#name-since-draft-ietf-quic-http-18" class="xref">Since draft-ietf-quic-http-18</a><a href="#section-toc.1-1.14.2.8.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.14.2.9">
                <p id="section-toc.1-1.14.2.9.1"><a href="#section-b.9" class="xref">B.9</a>.  <a href="#name-since-draft-ietf-quic-http-17" class="xref">Since draft-ietf-quic-http-17</a><a href="#section-toc.1-1.14.2.9.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.14.2.10">
                <p id="section-toc.1-1.14.2.10.1"><a href="#section-b.10" class="xref">B.10</a>. <a href="#name-since-draft-ietf-quic-http-16" class="xref">Since draft-ietf-quic-http-16</a><a href="#section-toc.1-1.14.2.10.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.14.2.11">
                <p id="section-toc.1-1.14.2.11.1"><a href="#section-b.11" class="xref">B.11</a>. <a href="#name-since-draft-ietf-quic-http-15" class="xref">Since draft-ietf-quic-http-15</a><a href="#section-toc.1-1.14.2.11.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.14.2.12">
                <p id="section-toc.1-1.14.2.12.1"><a href="#section-b.12" class="xref">B.12</a>. <a href="#name-since-draft-ietf-quic-http-14" class="xref">Since draft-ietf-quic-http-14</a><a href="#section-toc.1-1.14.2.12.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.14.2.13">
                <p id="section-toc.1-1.14.2.13.1"><a href="#section-b.13" class="xref">B.13</a>. <a href="#name-since-draft-ietf-quic-http-13" class="xref">Since draft-ietf-quic-http-13</a><a href="#section-toc.1-1.14.2.13.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.14.2.14">
                <p id="section-toc.1-1.14.2.14.1"><a href="#section-b.14" class="xref">B.14</a>. <a href="#name-since-draft-ietf-quic-http-12" class="xref">Since draft-ietf-quic-http-12</a><a href="#section-toc.1-1.14.2.14.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.14.2.15">
                <p id="section-toc.1-1.14.2.15.1"><a href="#section-b.15" class="xref">B.15</a>. <a href="#name-since-draft-ietf-quic-http-11" class="xref">Since draft-ietf-quic-http-11</a><a href="#section-toc.1-1.14.2.15.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.14.2.16">
                <p id="section-toc.1-1.14.2.16.1"><a href="#section-b.16" class="xref">B.16</a>. <a href="#name-since-draft-ietf-quic-http-10" class="xref">Since draft-ietf-quic-http-10</a><a href="#section-toc.1-1.14.2.16.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.14.2.17">
                <p id="section-toc.1-1.14.2.17.1"><a href="#section-b.17" class="xref">B.17</a>. <a href="#name-since-draft-ietf-quic-http-0" class="xref">Since draft-ietf-quic-http-09</a><a href="#section-toc.1-1.14.2.17.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.14.2.18">
                <p id="section-toc.1-1.14.2.18.1"><a href="#section-b.18" class="xref">B.18</a>. <a href="#name-since-draft-ietf-quic-http-08" class="xref">Since draft-ietf-quic-http-08</a><a href="#section-toc.1-1.14.2.18.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.14.2.19">
                <p id="section-toc.1-1.14.2.19.1"><a href="#section-b.19" class="xref">B.19</a>. <a href="#name-since-draft-ietf-quic-http-07" class="xref">Since draft-ietf-quic-http-07</a><a href="#section-toc.1-1.14.2.19.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.14.2.20">
                <p id="section-toc.1-1.14.2.20.1"><a href="#section-b.20" class="xref">B.20</a>. <a href="#name-since-draft-ietf-quic-http-06" class="xref">Since draft-ietf-quic-http-06</a><a href="#section-toc.1-1.14.2.20.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.14.2.21">
                <p id="section-toc.1-1.14.2.21.1"><a href="#section-b.21" class="xref">B.21</a>. <a href="#name-since-draft-ietf-quic-http-05" class="xref">Since draft-ietf-quic-http-05</a><a href="#section-toc.1-1.14.2.21.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.14.2.22">
                <p id="section-toc.1-1.14.2.22.1"><a href="#section-b.22" class="xref">B.22</a>. <a href="#name-since-draft-ietf-quic-http-04" class="xref">Since draft-ietf-quic-http-04</a><a href="#section-toc.1-1.14.2.22.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.14.2.23">
                <p id="section-toc.1-1.14.2.23.1"><a href="#section-b.23" class="xref">B.23</a>. <a href="#name-since-draft-ietf-quic-http-03" class="xref">Since draft-ietf-quic-http-03</a><a href="#section-toc.1-1.14.2.23.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.14.2.24">
                <p id="section-toc.1-1.14.2.24.1"><a href="#section-b.24" class="xref">B.24</a>. <a href="#name-since-draft-ietf-quic-http-02" class="xref">Since draft-ietf-quic-http-02</a><a href="#section-toc.1-1.14.2.24.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.14.2.25">
                <p id="section-toc.1-1.14.2.25.1"><a href="#section-b.25" class="xref">B.25</a>. <a href="#name-since-draft-ietf-quic-http-01" class="xref">Since draft-ietf-quic-http-01</a><a href="#section-toc.1-1.14.2.25.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.14.2.26">
                <p id="section-toc.1-1.14.2.26.1"><a href="#section-b.26" class="xref">B.26</a>. <a href="#name-since-draft-ietf-quic-http-00" class="xref">Since draft-ietf-quic-http-00</a><a href="#section-toc.1-1.14.2.26.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.14.2.27">
                <p id="section-toc.1-1.14.2.27.1"><a href="#section-b.27" class="xref">B.27</a>. <a href="#name-since-draft-shade-quic-http" class="xref">Since draft-shade-quic-http2-mapping-00</a><a href="#section-toc.1-1.14.2.27.1" class="pilcrow">¶</a></p>
</li>
</ul>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.15">
            <p id="section-toc.1-1.15.1"><a href="#section-appendix.c" class="xref"></a><a href="#name-acknowledgements" class="xref">Acknowledgements</a><a href="#section-toc.1-1.15.1" class="pilcrow">¶</a></p>
</li>
<li class="toc ulEmpty" id="section-toc.1-1.16">
            <p id="section-toc.1-1.16.1"><a href="#section-appendix.d" class="xref"></a><a href="#name-authors-address" class="xref">Author's Address</a><a href="#section-toc.1-1.16.1" class="pilcrow">¶</a></p>
</li>
</ul>
</nav>
</section>
</div>
<div id="introduction">
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">HTTP semantics are used for a broad range of services on the Internet. These
semantics have commonly been used with two different TCP mappings, HTTP/1.1 and
HTTP/2.  HTTP/3 supports the same semantics over a new transport protocol, QUIC.<a href="#section-1-1" class="pilcrow">¶</a></p>
<div id="prior-versions-of-http">
<section id="section-1.1">
        <h3 id="name-prior-versions-of-http">
<a href="#section-1.1" class="section-number selfRef">1.1. </a><a href="#name-prior-versions-of-http" class="section-name selfRef">Prior versions of HTTP</a>
        </h3>
<p id="section-1.1-1">HTTP/1.1 is a TCP mapping which uses whitespace-delimited text fields to convey
HTTP messages.  While these exchanges are human-readable, using whitespace for
message formatting leads to parsing difficulties and workarounds to be tolerant
of variant behavior. Because each connection can transfer only a single HTTP
request or response at a time in each direction, multiple parallel TCP
connections are often used, reducing the ability of the congestion controller to
accurately manage traffic between endpoints.<a href="#section-1.1-1" class="pilcrow">¶</a></p>
<p id="section-1.1-2">HTTP/2 introduced a binary framing and multiplexing layer to improve latency
without modifying the transport layer.  However, because the parallel nature of
HTTP/2's multiplexing is not visible to TCP's loss recovery mechanisms, a lost
or reordered packet causes all active transactions to experience a stall
regardless of whether that transaction was impacted by the lost packet.<a href="#section-1.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="delegation-to-quic">
<section id="section-1.2">
        <h3 id="name-delegation-to-quic">
<a href="#section-1.2" class="section-number selfRef">1.2. </a><a href="#name-delegation-to-quic" class="section-name selfRef">Delegation to QUIC</a>
        </h3>
<p id="section-1.2-1">The QUIC transport protocol incorporates stream multiplexing and per-stream flow
control, similar to that provided by the HTTP/2 framing layer. By providing
reliability at the stream level and congestion control across the entire
connection, it has the capability to improve the performance of HTTP compared to
a TCP mapping.  QUIC also incorporates TLS 1.3 at the transport layer, offering
comparable security to running TLS over TCP, with the improved connection setup
latency of TCP Fast Open <span>[<a href="#RFC7413" class="xref">RFC7413</a>]</span>.<a href="#section-1.2-1" class="pilcrow">¶</a></p>
<p id="section-1.2-2">This document defines a mapping of HTTP semantics over the QUIC transport
protocol, drawing heavily on the design of HTTP/2.  While delegating stream
lifetime and flow control issues to QUIC, a similar binary framing is used on
each stream. Some HTTP/2 features are subsumed by QUIC, while other features are
implemented atop QUIC.<a href="#section-1.2-2" class="pilcrow">¶</a></p>
<p id="section-1.2-3">QUIC is described in <span>[<a href="#QUIC-TRANSPORT" class="xref">QUIC-TRANSPORT</a>]</span>.  For a full description of HTTP/2, see
<span>[<a href="#HTTP2" class="xref">HTTP2</a>]</span>.<a href="#section-1.2-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="http3-protocol-overview">
<section id="section-2">
      <h2 id="name-http-3-protocol-overview">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-http-3-protocol-overview" class="section-name selfRef">HTTP/3 Protocol Overview</a>
      </h2>
<p id="section-2-1">HTTP/3 provides a transport for HTTP semantics using the QUIC transport protocol
and an internal framing layer similar to HTTP/2.<a href="#section-2-1" class="pilcrow">¶</a></p>
<p id="section-2-2">Once a client knows that an HTTP/3 server exists at a certain endpoint, it opens
a QUIC connection. QUIC provides protocol negotiation, stream-based
multiplexing, and flow control. An HTTP/3 endpoint can be discovered using HTTP
Alternative Services; this process is described in greater detail in
<a href="#discovery" class="xref">Section 3.2</a>.<a href="#section-2-2" class="pilcrow">¶</a></p>
<p id="section-2-3">Within each stream, the basic unit of HTTP/3 communication is a frame
(<a href="#frames" class="xref">Section 7.2</a>).  Each frame type serves a different purpose.  For example, HEADERS
and DATA frames form the basis of HTTP requests and responses
(<a href="#request-response" class="xref">Section 4.1</a>).<a href="#section-2-3" class="pilcrow">¶</a></p>
<p id="section-2-4">Multiplexing of requests is performed using the QUIC stream abstraction,
described in Section 2 of <span>[<a href="#QUIC-TRANSPORT" class="xref">QUIC-TRANSPORT</a>]</span>.  Each request-response pair
consumes a single QUIC stream.  Streams are independent of each other, so one
stream that is blocked or suffers packet loss does not prevent progress on other
streams.<a href="#section-2-4" class="pilcrow">¶</a></p>
<p id="section-2-5">Server push is an interaction mode introduced in HTTP/2 <span>[<a href="#HTTP2" class="xref">HTTP2</a>]</span> which permits
a server to push a request-response exchange to a client in anticipation of the
client making the indicated request.  This trades off network usage against a
potential latency gain.  Several HTTP/3 frames are used to manage server push,
such as PUSH_PROMISE, MAX_PUSH_ID, and CANCEL_PUSH.<a href="#section-2-5" class="pilcrow">¶</a></p>
<p id="section-2-6">As in HTTP/2, request and response headers are compressed for transmission.
Because HPACK <span>[<a href="#HPACK" class="xref">HPACK</a>]</span> relies on in-order transmission of compressed
header blocks (a guarantee not provided by QUIC), HTTP/3 replaces HPACK with
QPACK <span>[<a href="#QPACK" class="xref">QPACK</a>]</span>.  QPACK uses separate unidirectional streams to modify and track
header table state, while header blocks refer to the state of the table without
modifying it.<a href="#section-2-6" class="pilcrow">¶</a></p>
<div id="document-organization">
<section id="section-2.1">
        <h3 id="name-document-organization">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-document-organization" class="section-name selfRef">Document Organization</a>
        </h3>
<p id="section-2.1-1">The following sections provide a detailed overview of the connection lifecycle
and key concepts:<a href="#section-2.1-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-2.1-2.1">Connection Setup and Management (<a href="#connection-setup" class="xref">Section 3</a>) covers how an HTTP/3
endpoint is discovered and a connection is established.<a href="#section-2.1-2.1" class="pilcrow">¶</a>
</li>
<li id="section-2.1-2.2">HTTP Request Lifecycle (<a href="#http-request-lifecycle" class="xref">Section 4</a>) describes how HTTP
semantics are expressed using frames.<a href="#section-2.1-2.2" class="pilcrow">¶</a>
</li>
<li id="section-2.1-2.3">Connection Closure (<a href="#connection-closure" class="xref">Section 5</a>) describes how connections are
terminated, either gracefully or abruptly.<a href="#section-2.1-2.3" class="pilcrow">¶</a>
</li>
</ul>
<p id="section-2.1-3">The details of the wire protocol and interactions with the transport are
described in subsequent sections:<a href="#section-2.1-3" class="pilcrow">¶</a></p>
<ul>
<li id="section-2.1-4.1">Stream Mapping and Usage (<a href="#stream-mapping" class="xref">Section 6</a>) describes the way QUIC streams
are used.<a href="#section-2.1-4.1" class="pilcrow">¶</a>
</li>
<li id="section-2.1-4.2">HTTP Framing Layer (<a href="#http-framing-layer" class="xref">Section 7</a>) describes the frames used on
most streams.<a href="#section-2.1-4.2" class="pilcrow">¶</a>
</li>
<li id="section-2.1-4.3">Error Handling (<a href="#errors" class="xref">Section 8</a>) describes how error conditions are handled and
expressed, either on a particular stream or for the connection as a whole.<a href="#section-2.1-4.3" class="pilcrow">¶</a>
</li>
</ul>
<p id="section-2.1-5">Additional resources are provided in the final sections:<a href="#section-2.1-5" class="pilcrow">¶</a></p>
<ul>
<li id="section-2.1-6.1">Extensions to HTTP/3 (<a href="#extensions" class="xref">Section 9</a>) describes how new capabilities can be
added in future documents.<a href="#section-2.1-6.1" class="pilcrow">¶</a>
</li>
<li id="section-2.1-6.2">A more detailed comparison between HTTP/2 and HTTP/3 can be found in
<a href="#h2-considerations" class="xref">Appendix A</a>.<a href="#section-2.1-6.2" class="pilcrow">¶</a>
</li>
</ul>
</section>
</div>
<div id="conventions-and-terminology">
<section id="section-2.2">
        <h3 id="name-conventions-and-terminology">
<a href="#section-2.2" class="section-number selfRef">2.2. </a><a href="#name-conventions-and-terminology" class="section-name selfRef">Conventions and Terminology</a>
        </h3>
<p id="section-2.2-1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD",
"SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and "OPTIONAL" in this
document are to be interpreted as described in BCP 14 <span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span> <span>[<a href="#RFC8174" class="xref">RFC8174</a>]</span>
when, and only when, they appear in all capitals, as shown here.<a href="#section-2.2-1" class="pilcrow">¶</a></p>
<p id="section-2.2-2">Field definitions are given in Augmented Backus-Naur Form (ABNF), as defined in
<span>[<a href="#RFC5234" class="xref">RFC5234</a>]</span>.<a href="#section-2.2-2" class="pilcrow">¶</a></p>
<p id="section-2.2-3">This document uses the variable-length integer encoding from
<span>[<a href="#QUIC-TRANSPORT" class="xref">QUIC-TRANSPORT</a>]</span>.<a href="#section-2.2-3" class="pilcrow">¶</a></p>
<p id="section-2.2-4">The following terms are used:<a href="#section-2.2-4" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-2.2-5">
          <dt id="section-2.2-5.1">abort:</dt>
<dd id="section-2.2-5.2">
  An abrupt termination of a connection or stream, possibly due to an error
condition.<a href="#section-2.2-5.2" class="pilcrow">¶</a>
</dd>
<dt id="section-2.2-5.3">client:</dt>
<dd id="section-2.2-5.4">
  The endpoint that initiates an HTTP/3 connection.  Clients send HTTP requests
and receive HTTP responses.<a href="#section-2.2-5.4" class="pilcrow">¶</a>
</dd>
<dt id="section-2.2-5.5">connection:</dt>
<dd id="section-2.2-5.6">
  A transport-layer connection between two endpoints, using QUIC as the
transport protocol.<a href="#section-2.2-5.6" class="pilcrow">¶</a>
</dd>
<dt id="section-2.2-5.7">connection error:</dt>
<dd id="section-2.2-5.8">
  An error that affects the entire HTTP/3 connection.<a href="#section-2.2-5.8" class="pilcrow">¶</a>
</dd>
<dt id="section-2.2-5.9">endpoint:</dt>
<dd id="section-2.2-5.10">
  Either the client or server of the connection.<a href="#section-2.2-5.10" class="pilcrow">¶</a>
</dd>
<dt id="section-2.2-5.11">frame:</dt>
<dd id="section-2.2-5.12">
  The smallest unit of communication on a stream in HTTP/3, consisting of a
header and a variable-length sequence of bytes structured according to the
frame type.

Protocol elements called "frames" exist in both this document and
<span>[<a href="#QUIC-TRANSPORT" class="xref">QUIC-TRANSPORT</a>]</span>. Where frames from <span>[<a href="#QUIC-TRANSPORT" class="xref">QUIC-TRANSPORT</a>]</span> are referenced, the
frame name will be prefaced with "QUIC."  For example, "QUIC CONNECTION_CLOSE
frames."  References without this preface refer to frames defined in
<a href="#frames" class="xref">Section 7.2</a>.<a href="#section-2.2-5.12" class="pilcrow">¶</a>
</dd>
<dt id="section-2.2-5.13">peer:</dt>
<dd id="section-2.2-5.14">
  An endpoint.  When discussing a particular endpoint, "peer" refers to the
endpoint that is remote to the primary subject of discussion.<a href="#section-2.2-5.14" class="pilcrow">¶</a>
</dd>
<dt id="section-2.2-5.15">receiver:</dt>
<dd id="section-2.2-5.16">
  An endpoint that is receiving frames.<a href="#section-2.2-5.16" class="pilcrow">¶</a>
</dd>
<dt id="section-2.2-5.17">sender:</dt>
<dd id="section-2.2-5.18">
  An endpoint that is transmitting frames.<a href="#section-2.2-5.18" class="pilcrow">¶</a>
</dd>
<dt id="section-2.2-5.19">server:</dt>
<dd id="section-2.2-5.20">
  The endpoint that accepts an HTTP/3 connection.  Servers receive HTTP requests
and send HTTP responses.<a href="#section-2.2-5.20" class="pilcrow">¶</a>
</dd>
<dt id="section-2.2-5.21">stream:</dt>
<dd id="section-2.2-5.22">
  A bidirectional or unidirectional bytestream provided by the QUIC transport.<a href="#section-2.2-5.22" class="pilcrow">¶</a>
</dd>
<dt id="section-2.2-5.23">stream error:</dt>
<dd id="section-2.2-5.24">
  An error on the individual HTTP/3 stream.<a href="#section-2.2-5.24" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-2.2-6">The term "payload body" is defined in Section 3.3 of <span>[<a href="#RFC7230" class="xref">RFC7230</a>]</span>.<a href="#section-2.2-6" class="pilcrow">¶</a></p>
<p id="section-2.2-7">Finally, the terms "gateway", "intermediary", "proxy", and "tunnel" are defined
in Section 2.3 of <span>[<a href="#RFC7230" class="xref">RFC7230</a>]</span>.  Intermediaries act as both client and server at
different times.<a href="#section-2.2-7" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="connection-setup">
<section id="section-3">
      <h2 id="name-connection-setup-and-manage">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-connection-setup-and-manage" class="section-name selfRef">Connection Setup and Management</a>
      </h2>
<div id="draft-version-identification">
<section id="section-3.1">
        <h3 id="name-draft-version-identificatio">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-draft-version-identificatio" class="section-name selfRef">Draft Version Identification</a>
        </h3>
<ul class="ulEmpty">
<li class="ulEmpty" id="section-3.1-1.1">
            <strong>RFC Editor's Note:</strong>  Please remove this section prior to publication of a
final version of this document.<a href="#section-3.1-1.1" class="pilcrow">¶</a>
</li>
</ul>
<p id="section-3.1-2">HTTP/3 uses the token "h3" to identify itself in ALPN and Alt-Svc.  Only
implementations of the final, published RFC can identify themselves as "h3".
Until such an RFC exists, implementations MUST NOT identify themselves using
this string.<a href="#section-3.1-2" class="pilcrow">¶</a></p>
<p id="section-3.1-3">Implementations of draft versions of the protocol MUST add the string "-" and
the corresponding draft number to the identifier. For example,
draft-ietf-quic-http-01 is identified using the string "h3-01".<a href="#section-3.1-3" class="pilcrow">¶</a></p>
<p id="section-3.1-4">Draft versions MUST use the corresponding draft transport version as their
transport. For example, the application protocol defined in
draft-ietf-quic-http-25 uses the transport defined in
draft-ietf-quic-transport-25.<a href="#section-3.1-4" class="pilcrow">¶</a></p>
<p id="section-3.1-5">Non-compatible experiments that are based on these draft versions MUST append
the string "-" and an experiment name to the identifier. For example, an
experimental implementation based on draft-ietf-quic-http-09 which reserves an
extra stream for unsolicited transmission of 1980s pop music might identify
itself as "h3-09-rickroll". Note that any label MUST conform to the "token"
syntax defined in Section 3.2.6 of <span>[<a href="#RFC7230" class="xref">RFC7230</a>]</span>. Experimenters are encouraged to
coordinate their experiments on the quic@ietf.org mailing list.<a href="#section-3.1-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="discovery">
<section id="section-3.2">
        <h3 id="name-discovering-an-http-3-endpo">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-discovering-an-http-3-endpo" class="section-name selfRef">Discovering an HTTP/3 Endpoint</a>
        </h3>
<p id="section-3.2-1">An HTTP origin advertises the availability of an equivalent HTTP/3 endpoint via
the Alt-Svc HTTP response header field or the HTTP/2 ALTSVC frame
(<span>[<a href="#ALTSVC" class="xref">ALTSVC</a>]</span>), using the ALPN token defined in
<a href="#connection-establishment" class="xref">Section 3.3</a>.<a href="#section-3.2-1" class="pilcrow">¶</a></p>
<p id="section-3.2-2">For example, an origin could indicate in an HTTP response that HTTP/3 was
available on UDP port 50781 at the same hostname by including the following
header field:<a href="#section-3.2-2" class="pilcrow">¶</a></p>
<div class="artwork art-text alignLeft art-example" id="section-3.2-3">
<pre>
Alt-Svc: h3=":50781"
</pre><a href="#section-3.2-3" class="pilcrow">¶</a>
</div>
<p id="section-3.2-4">On receipt of an Alt-Svc record indicating HTTP/3 support, a client MAY attempt
to establish a QUIC connection to the indicated host and port and, if
successful, send HTTP requests using the mapping described in this document.<a href="#section-3.2-4" class="pilcrow">¶</a></p>
<p id="section-3.2-5">Connectivity problems (e.g. firewall blocking UDP) can result in QUIC connection
establishment failure, in which case the client SHOULD continue using the
existing connection or try another alternative endpoint offered by the origin.<a href="#section-3.2-5" class="pilcrow">¶</a></p>
<p id="section-3.2-6">Servers MAY serve HTTP/3 on any UDP port, since an alternative always includes
an explicit port.<a href="#section-3.2-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="connection-establishment">
<section id="section-3.3">
        <h3 id="name-connection-establishment">
<a href="#section-3.3" class="section-number selfRef">3.3. </a><a href="#name-connection-establishment" class="section-name selfRef">Connection Establishment</a>
        </h3>
<p id="section-3.3-1">HTTP/3 relies on QUIC version 1 as the underlying transport.  The use of other
QUIC transport versions with HTTP/3 MAY be defined by future specifications.<a href="#section-3.3-1" class="pilcrow">¶</a></p>
<p id="section-3.3-2">QUIC version 1 uses TLS version 1.3 or greater as its handshake protocol.
HTTP/3 clients MUST support a mechanism to indicate the target host to the
server during the TLS handshake.  If the server is identified by a DNS name,
clients MUST send the Server Name Indication (SNI) <span>[<a href="#RFC6066" class="xref">RFC6066</a>]</span> TLS extension
unless an alternative mechanism to indicate the target host is used.<a href="#section-3.3-2" class="pilcrow">¶</a></p>
<p id="section-3.3-3">QUIC connections are established as described in <span>[<a href="#QUIC-TRANSPORT" class="xref">QUIC-TRANSPORT</a>]</span>. During
connection establishment, HTTP/3 support is indicated by selecting the ALPN
token "h3" in the TLS handshake.  Support for other application-layer protocols
MAY be offered in the same handshake.<a href="#section-3.3-3" class="pilcrow">¶</a></p>
<p id="section-3.3-4">While connection-level options pertaining to the core QUIC protocol are set in
the initial crypto handshake, HTTP/3-specific settings are conveyed in the
SETTINGS frame. After the QUIC connection is established, a SETTINGS frame
(<a href="#frame-settings" class="xref">Section 7.2.4</a>) MUST be sent by each endpoint as the initial frame of their
respective HTTP control stream (see <a href="#control-streams" class="xref">Section 6.2.1</a>).<a href="#section-3.3-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="connection-reuse">
<section id="section-3.4">
        <h3 id="name-connection-reuse">
<a href="#section-3.4" class="section-number selfRef">3.4. </a><a href="#name-connection-reuse" class="section-name selfRef">Connection Reuse</a>
        </h3>
<p id="section-3.4-1">Once a connection exists to a server endpoint, this connection MAY be reused for
requests with multiple different URI authority components.  The client MAY send
any requests for which the client considers the server authoritative.<a href="#section-3.4-1" class="pilcrow">¶</a></p>
<p id="section-3.4-2">An authoritative HTTP/3 endpoint is typically discovered because the client has
received an Alt-Svc record from the request's origin which nominates the
endpoint as a valid HTTP Alternative Service for that origin.  As required by
<span>[<a href="#RFC7838" class="xref">RFC7838</a>]</span>, clients MUST check that the nominated server can present a valid
certificate for the origin before considering it authoritative. Clients MUST NOT
assume that an HTTP/3 endpoint is authoritative for other origins without an
explicit signal.<a href="#section-3.4-2" class="pilcrow">¶</a></p>
<p id="section-3.4-3">Prior to making requests for an origin whose scheme is not "https," the client
MUST ensure the server is willing to serve that scheme.  If the client intends
to make requests for an origin whose scheme is "http", this means that it MUST
obtain a valid <code>http-opportunistic</code> response for the origin as described in
<span>[<a href="#RFC8164" class="xref">RFC8164</a>]</span> prior to making any such requests.  Other schemes might define
other mechanisms.<a href="#section-3.4-3" class="pilcrow">¶</a></p>
<p id="section-3.4-4">A server that does not wish clients to reuse connections for a particular origin
can indicate that it is not authoritative for a request by sending a 421
(Misdirected Request) status code in response to the request (see Section 9.1.2
of <span>[<a href="#HTTP2" class="xref">HTTP2</a>]</span>).<a href="#section-3.4-4" class="pilcrow">¶</a></p>
<p id="section-3.4-5">The considerations discussed in Section 9.1 of <span>[<a href="#HTTP2" class="xref">HTTP2</a>]</span> also apply to the
management of HTTP/3 connections.<a href="#section-3.4-5" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="http-request-lifecycle">
<section id="section-4">
      <h2 id="name-http-request-lifecycle">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-http-request-lifecycle" class="section-name selfRef">HTTP Request Lifecycle</a>
      </h2>
<div id="request-response">
<section id="section-4.1">
        <h3 id="name-http-message-exchanges">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-http-message-exchanges" class="section-name selfRef">HTTP Message Exchanges</a>
        </h3>
<p id="section-4.1-1">A client sends an HTTP request on a client-initiated bidirectional QUIC stream.
A client MUST send only a single request on a given stream. A server sends zero
or more non-final HTTP responses on the same stream as the request, followed by
a single final HTTP response, as detailed below.<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<p id="section-4.1-2">Pushed responses are sent on a server-initiated unidirectional QUIC stream (see
<a href="#push-streams" class="xref">Section 6.2.2</a>).  A server sends zero or more non-final HTTP responses,
followed by a single final HTTP response, in the same manner as a standard
response.  Push is described in more detail in <a href="#server-push" class="xref">Section 4.4</a>.<a href="#section-4.1-2" class="pilcrow">¶</a></p>
<p id="section-4.1-3">On a given stream, receipt of multiple requests or receipt of an additional HTTP
response following a final HTTP response MUST be treated as malformed
(<a href="#malformed" class="xref">Section 4.1.3</a>).<a href="#section-4.1-3" class="pilcrow">¶</a></p>
<p id="section-4.1-4">An HTTP message (request or response) consists of:<a href="#section-4.1-4" class="pilcrow">¶</a></p>
<ol start="1" type="1" class="normal type-1" id="section-4.1-5">
          <li id="section-4.1-5.1">the message header (see Section 3.2 of <span>[<a href="#RFC7230" class="xref">RFC7230</a>]</span>), sent as a single
HEADERS frame (see <a href="#frame-headers" class="xref">Section 7.2.2</a>),<a href="#section-4.1-5.1" class="pilcrow">¶</a>
</li>
<li id="section-4.1-5.2">optionally, the payload body, if present (see Section 3.3 of <span>[<a href="#RFC7230" class="xref">RFC7230</a>]</span>),
sent as a series of DATA frames (see <a href="#frame-data" class="xref">Section 7.2.1</a>),<a href="#section-4.1-5.2" class="pilcrow">¶</a>
</li>
<li id="section-4.1-5.3">optionally, trailing headers, if present (see Section 4.1.2 of <span>[<a href="#RFC7230" class="xref">RFC7230</a>]</span>),
sent as a single HEADERS frame.<a href="#section-4.1-5.3" class="pilcrow">¶</a>
</li>
</ol>
<p id="section-4.1-6">Receipt of DATA and HEADERS frames in any other sequence MUST be treated as a
connection error of type H3_FRAME_UNEXPECTED (<a href="#errors" class="xref">Section 8</a>).<a href="#section-4.1-6" class="pilcrow">¶</a></p>
<p id="section-4.1-7">A server MAY send one or more PUSH_PROMISE frames (see <a href="#frame-push-promise" class="xref">Section 7.2.5</a>)
before, after, or interleaved with the frames of a response message. These
PUSH_PROMISE frames are not part of the response; see <a href="#server-push" class="xref">Section 4.4</a> for more
details.  These frames are not permitted in pushed responses; a pushed response
which includes PUSH_PROMISE frames MUST be treated as a connection error of type
H3_FRAME_UNEXPECTED.<a href="#section-4.1-7" class="pilcrow">¶</a></p>
<p id="section-4.1-8">Frames of unknown types (<a href="#extensions" class="xref">Section 9</a>), including reserved frames
(<a href="#frame-reserved" class="xref">Section 7.2.8</a>) MAY be sent on a request or push stream before, after, or
interleaved with other frames described in this section.<a href="#section-4.1-8" class="pilcrow">¶</a></p>
<p id="section-4.1-9">The HEADERS and PUSH_PROMISE frames might reference updates to the QPACK dynamic
table. While these updates are not directly part of the message exchange, they
must be received and processed before the message can be consumed.  See
<a href="#header-formatting" class="xref">Section 4.1.1</a> for more details.<a href="#section-4.1-9" class="pilcrow">¶</a></p>
<p id="section-4.1-10">The "chunked" transfer encoding defined in Section 4.1 of <span>[<a href="#RFC7230" class="xref">RFC7230</a>]</span> MUST NOT
be used.<a href="#section-4.1-10" class="pilcrow">¶</a></p>
<p id="section-4.1-11">A response MAY consist of multiple messages when and only when one or more
informational responses (1xx; see Section 6.2 of <span>[<a href="#RFC7231" class="xref">RFC7231</a>]</span>) precede a final
response to the same request.  Non-final responses do not contain a payload body
or trailers.<a href="#section-4.1-11" class="pilcrow">¶</a></p>
<p id="section-4.1-12">If an endpoint receives an invalid sequence of frames on either a request or
a push stream, it MUST respond with a connection error of type
H3_FRAME_UNEXPECTED (<a href="#errors" class="xref">Section 8</a>).  In particular, a DATA frame before any
HEADERS frame, or a HEADERS or DATA frame after the trailing HEADERS frame is
considered invalid.<a href="#section-4.1-12" class="pilcrow">¶</a></p>
<p id="section-4.1-13">An HTTP request/response exchange fully consumes a client-initiated
bidirectional QUIC stream. After sending a request, a client MUST close the
stream for sending.  Unless using the CONNECT method (see <a href="#connect" class="xref">Section 4.2</a>), clients
MUST NOT make stream closure dependent on receiving a response to their request.
After sending a final response, the server MUST close the stream for sending. At
this point, the QUIC stream is fully closed.<a href="#section-4.1-13" class="pilcrow">¶</a></p>
<p id="section-4.1-14">When a stream is closed, this indicates the end of an HTTP message. Because some
messages are large or unbounded, endpoints SHOULD begin processing partial HTTP
messages once enough of the message has been received to make progress.  If a
client stream terminates without enough of the HTTP message to provide a
complete response, the server SHOULD abort its response with the error code
H3_REQUEST_INCOMPLETE.<a href="#section-4.1-14" class="pilcrow">¶</a></p>
<p id="section-4.1-15">A server can send a complete response prior to the client sending an entire
request if the response does not depend on any portion of the request that has
not been sent and received. When the server does not need to receive the
remainder of the request, it MAY abort reading the request stream, send a
complete response, and cleanly close the sending part of the stream.  The error
code H3_NO_ERROR SHOULD be used when requesting that the client stop sending on
the request stream.  Clients MUST NOT discard complete responses as a result of
having their request terminated abruptly, though clients can always discard
responses at their discretion for other reasons.  If the server sends a partial
or complete response but does not abort reading, clients SHOULD continue sending
the body of the request and close the stream normally.<a href="#section-4.1-15" class="pilcrow">¶</a></p>
<div id="header-formatting">
<section id="section-4.1.1">
          <h4 id="name-header-formatting-and-compr">
<a href="#section-4.1.1" class="section-number selfRef">4.1.1. </a><a href="#name-header-formatting-and-compr" class="section-name selfRef">Header Formatting and Compression</a>
          </h4>
<p id="section-4.1.1-1">HTTP message headers carry information as a series of key-value pairs, called
header fields. For a listing of registered HTTP header fields, see the "Message
Header Field" registry maintained at
<a href="https://www.iana.org/assignments/message-headers">https://www.iana.org/assignments/message-headers</a>.<a href="#section-4.1.1-1" class="pilcrow">¶</a></p>
<p id="section-4.1.1-2">Just as in previous versions of HTTP, header field names are strings of ASCII
characters that are compared in a case-insensitive fashion.  Properties of HTTP
header field names and values are discussed in more detail in Section 3.2 of
<span>[<a href="#RFC7230" class="xref">RFC7230</a>]</span>, though the wire rendering in HTTP/3 differs.  As in HTTP/2, header
field names MUST be converted to lowercase prior to their encoding.  A request
or response containing uppercase header field names MUST be treated as
malformed (<a href="#malformed" class="xref">Section 4.1.3</a>).<a href="#section-4.1.1-2" class="pilcrow">¶</a></p>
<p id="section-4.1.1-3">Like HTTP/2, HTTP/3 does not use the Connection header field to indicate
connection-specific header fields; in this protocol, connection-specific
metadata is conveyed by other means.  An endpoint MUST NOT generate an HTTP/3
message containing connection-specific header fields; any message containing
connection-specific header fields MUST be treated as malformed (<a href="#malformed" class="xref">Section 4.1.3</a>).<a href="#section-4.1.1-3" class="pilcrow">¶</a></p>
<p id="section-4.1.1-4">The only exception to this is the TE header field, which MAY be present in an
HTTP/3 request; when it is, it MUST NOT contain any value other than "trailers".<a href="#section-4.1.1-4" class="pilcrow">¶</a></p>
<p id="section-4.1.1-5">This means that an intermediary transforming an HTTP/1.x message to HTTP/3 will
need to remove any header fields nominated by the Connection header field, along
with the Connection header field itself.  Such intermediaries SHOULD also remove
other connection-specific header fields, such as Keep-Alive, Proxy-Connection,
Transfer-Encoding, and Upgrade, even if they are not nominated by the Connection
header field.<a href="#section-4.1.1-5" class="pilcrow">¶</a></p>
<div id="pseudo-header-fields">
<section id="section-4.1.1.1">
            <h5 id="name-pseudo-header-fields">
<a href="#section-4.1.1.1" class="section-number selfRef">4.1.1.1. </a><a href="#name-pseudo-header-fields" class="section-name selfRef">Pseudo-Header Fields</a>
            </h5>
<p id="section-4.1.1.1-1">As in HTTP/2, HTTP/3 uses special pseudo-header fields beginning with the ':'
character (ASCII 0x3a) to convey the target URI, the method of the request, and
the status code for the response.<a href="#section-4.1.1.1-1" class="pilcrow">¶</a></p>
<p id="section-4.1.1.1-2">Pseudo-header fields are not HTTP header fields.  Endpoints MUST NOT generate
pseudo-header fields other than those defined in this document, except as
negotiated via an extension; see <a href="#extensions" class="xref">Section 9</a>.<a href="#section-4.1.1.1-2" class="pilcrow">¶</a></p>
<p id="section-4.1.1.1-3">Pseudo-header fields are only valid in the context in which they are defined.
Pseudo-header fields defined for requests MUST NOT appear in responses;
pseudo-header fields defined for responses MUST NOT appear in requests.
Pseudo-header fields MUST NOT appear in trailers.  Endpoints MUST treat a
request or response that contains undefined or invalid pseudo-header fields as
malformed (<a href="#malformed" class="xref">Section 4.1.3</a>).<a href="#section-4.1.1.1-3" class="pilcrow">¶</a></p>
<p id="section-4.1.1.1-4">All pseudo-header fields MUST appear in the header block before regular header
fields.  Any request or response that contains a pseudo-header field that
appears in a header block after a regular header field MUST be treated as
malformed (<a href="#malformed" class="xref">Section 4.1.3</a>).<a href="#section-4.1.1.1-4" class="pilcrow">¶</a></p>
<p id="section-4.1.1.1-5">The following pseudo-header fields are defined for requests:<a href="#section-4.1.1.1-5" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-4.1.1.1-6">
              <dt id="section-4.1.1.1-6.1">":method":</dt>
<dd id="section-4.1.1.1-6.2">
  Contains the HTTP method (<span>[<a href="#RFC7231" class="xref">RFC7231</a>]</span>, Section 4)<a href="#section-4.1.1.1-6.2" class="pilcrow">¶</a>
</dd>
<dt id="section-4.1.1.1-6.3">":scheme":</dt>
<dd id="section-4.1.1.1-6.4">
  Contains the scheme portion of the target URI (<span>[<a href="#RFC3986" class="xref">RFC3986</a>]</span>, Section 3.1)<a href="#section-4.1.1.1-6.4" class="pilcrow">¶</a>
</dd>
<dt id="section-4.1.1.1-6.5"></dt>
<dd id="section-4.1.1.1-6.6">":scheme" is not restricted to "http" and "https" schemed URIs.  A proxy or
gateway can translate requests for non-HTTP schemes, enabling the use of
HTTP to interact with non-HTTP services.<a href="#section-4.1.1.1-6.6" class="pilcrow">¶</a>
</dd>
<dt id="section-4.1.1.1-6.7">":authority":</dt>
<dd id="section-4.1.1.1-6.8">
  Contains the authority portion of the target URI (Section 3.2 of <span>[<a href="#RFC3986" class="xref">RFC3986</a>]</span>).
The authority MUST NOT include the deprecated "userinfo" subcomponent for
"http" or "https" schemed URIs.<a href="#section-4.1.1.1-6.8" class="pilcrow">¶</a>
</dd>
<dt id="section-4.1.1.1-6.9"></dt>
<dd id="section-4.1.1.1-6.10">To ensure that the HTTP/1.1 request line can be reproduced accurately, this
pseudo-header field MUST be omitted when translating from an HTTP/1.1
request that has a request target in origin or asterisk form (see Section
5.3 of <span>[<a href="#RFC7230" class="xref">RFC7230</a>]</span>).  Clients that generate HTTP/3 requests directly SHOULD
use the ":authority" pseudo-header field instead of the Host header field.
An intermediary that converts an HTTP/3 request to HTTP/1.1 MUST create a
Host header field if one is not present in a request by copying the value of
the ":authority" pseudo-header field.<a href="#section-4.1.1.1-6.10" class="pilcrow">¶</a>
</dd>
<dt id="section-4.1.1.1-6.11">":path":</dt>
<dd id="section-4.1.1.1-6.12">
  Contains the path and query parts of the target URI (the "path-absolute"
production and optionally a '?' character followed by the "query" production
(see Sections 3.3 and 3.4 of <span>[<a href="#RFC3986" class="xref">RFC3986</a>]</span>).  A request in asterisk form
includes the value '*' for the ":path" pseudo-header field.<a href="#section-4.1.1.1-6.12" class="pilcrow">¶</a>
</dd>
<dt id="section-4.1.1.1-6.13"></dt>
<dd id="section-4.1.1.1-6.14">This pseudo-header field MUST NOT be empty for "http" or "https" URIs;
"http" or "https" URIs that do not contain a path component MUST include a
value of '/'.  The exception to this rule is an OPTIONS request for an
"http" or "https" URI that does not include a path component; these MUST
include a ":path" pseudo-header field with a value of '*' (see Section 5.3.4
of <span>[<a href="#RFC7230" class="xref">RFC7230</a>]</span>).<a href="#section-4.1.1.1-6.14" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-4.1.1.1-7">All HTTP/3 requests MUST include exactly one value for the ":method", ":scheme",
and ":path" pseudo-header fields, unless it is a CONNECT request (<a href="#connect" class="xref">Section 4.2</a>).
An HTTP request that omits mandatory pseudo-header fields or contains invalid
values for those fields is malformed (<a href="#malformed" class="xref">Section 4.1.3</a>).<a href="#section-4.1.1.1-7" class="pilcrow">¶</a></p>
<p id="section-4.1.1.1-8">HTTP/3 does not define a way to carry the version identifier that is included in
the HTTP/1.1 request line.<a href="#section-4.1.1.1-8" class="pilcrow">¶</a></p>
<p id="section-4.1.1.1-9">For responses, a single ":status" pseudo-header field is defined that carries
the HTTP status code field (see Section 6 of <span>[<a href="#RFC7231" class="xref">RFC7231</a>]</span>).  This pseudo-header
field MUST be included in all responses; otherwise, the response is malformed
(<a href="#malformed" class="xref">Section 4.1.3</a>).<a href="#section-4.1.1.1-9" class="pilcrow">¶</a></p>
<p id="section-4.1.1.1-10">HTTP/3 does not define a way to carry the version or reason phrase that is
included in an HTTP/1.1 status line.<a href="#section-4.1.1.1-10" class="pilcrow">¶</a></p>
</section>
</div>
<div id="header-compression">
<section id="section-4.1.1.2">
            <h5 id="name-header-compression">
<a href="#section-4.1.1.2" class="section-number selfRef">4.1.1.2. </a><a href="#name-header-compression" class="section-name selfRef">Header Compression</a>
            </h5>
<p id="section-4.1.1.2-1">HTTP/3 uses QPACK header compression as described in <span>[<a href="#QPACK" class="xref">QPACK</a>]</span>, a variation of
HPACK which allows the flexibility to avoid header-compression-induced
head-of-line blocking.  See that document for additional details.<a href="#section-4.1.1.2-1" class="pilcrow">¶</a></p>
<p id="section-4.1.1.2-2">To allow for better compression efficiency, the cookie header field <span>[<a href="#RFC6265" class="xref">RFC6265</a>]</span>
MAY be split into separate header fields, each with one or more cookie-pairs,
before compression. If a decompressed header list contains multiple cookie
header fields, these MUST be concatenated before being passed into a non-HTTP/2,
non-HTTP/3 context, as described in Section 8.1.2.5 of <span>[<a href="#HTTP2" class="xref">HTTP2</a>]</span>.<a href="#section-4.1.1.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="header-size-constraints">
<section id="section-4.1.1.3">
            <h5 id="name-header-size-constraints">
<a href="#section-4.1.1.3" class="section-number selfRef">4.1.1.3. </a><a href="#name-header-size-constraints" class="section-name selfRef">Header Size Constraints</a>
            </h5>
<p id="section-4.1.1.3-1">An HTTP/3 implementation MAY impose a limit on the maximum size of the message
header it will accept on an individual HTTP message.  A server that receives a
larger header field list than it is willing to handle can send an HTTP 431
(Request Header Fields Too Large) status code <span>[<a href="#RFC6585" class="xref">RFC6585</a>]</span>.  A client can
discard responses that it cannot process.  The size of a header field list is
calculated based on the uncompressed size of header fields, including the length
of the name and value in bytes plus an overhead of 32 bytes for each header
field.<a href="#section-4.1.1.3-1" class="pilcrow">¶</a></p>
<p id="section-4.1.1.3-2">If an implementation wishes to advise its peer of this limit, it can be conveyed
as a number of bytes in the <code>SETTINGS_MAX_HEADER_LIST_SIZE</code> parameter. An
implementation which has received this parameter SHOULD NOT send an HTTP message
header which exceeds the indicated size, as the peer will likely refuse to
process it.  However, because this limit is applied at each hop, messages below
this limit are not guaranteed to be accepted.<a href="#section-4.1.1.3-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="request-cancellation">
<section id="section-4.1.2">
          <h4 id="name-request-cancellation-and-re">
<a href="#section-4.1.2" class="section-number selfRef">4.1.2. </a><a href="#name-request-cancellation-and-re" class="section-name selfRef">Request Cancellation and Rejection</a>
          </h4>
<p id="section-4.1.2-1">Clients can cancel requests by resetting and aborting the request stream with an
error code of H3_REQUEST_CANCELLED (<a href="#http-error-codes" class="xref">Section 8.1</a>).  When the client
aborts reading a response, it indicates that this response is no longer of
interest. Implementations SHOULD cancel requests by abruptly terminating any
directions of a stream that are still open.<a href="#section-4.1.2-1" class="pilcrow">¶</a></p>
<p id="section-4.1.2-2">When the server rejects a request without performing any application processing,
it SHOULD abort its response stream with the error code H3_REQUEST_REJECTED.
In this context, "processed" means that some data from the stream was passed to
some higher layer of software that might have taken some action as a result. The
client can treat requests rejected by the server as though they had never been
sent at all, thereby allowing them to be retried later on a new connection.
Servers MUST NOT use the H3_REQUEST_REJECTED error code for requests which
were partially or fully processed.  When a server abandons a response after
partial processing, it SHOULD abort its response stream with the error code
H3_REQUEST_CANCELLED.<a href="#section-4.1.2-2" class="pilcrow">¶</a></p>
<p id="section-4.1.2-3">When a client resets a request with the error code H3_REQUEST_CANCELLED, a
server MAY abruptly terminate the response using the error code
H3_REQUEST_REJECTED if no processing was performed.  Clients MUST NOT use the
H3_REQUEST_REJECTED error code, except when a server has requested closure of
the request stream with this error code.<a href="#section-4.1.2-3" class="pilcrow">¶</a></p>
<p id="section-4.1.2-4">If a stream is cancelled after receiving a complete response, the client MAY
ignore the cancellation and use the response.  However, if a stream is cancelled
after receiving a partial response, the response SHOULD NOT be used.
Automatically retrying such requests is not possible, unless this is otherwise
permitted (e.g., idempotent actions like GET, PUT, or DELETE).<a href="#section-4.1.2-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="malformed">
<section id="section-4.1.3">
          <h4 id="name-malformed-requests-and-resp">
<a href="#section-4.1.3" class="section-number selfRef">4.1.3. </a><a href="#name-malformed-requests-and-resp" class="section-name selfRef">Malformed Requests and Responses</a>
          </h4>
<p id="section-4.1.3-1">A malformed request or response is one that is an otherwise valid sequence of
frames but is invalid due to:<a href="#section-4.1.3-1" class="pilcrow">¶</a></p>
<ul>
<li id="section-4.1.3-2.1">the presence of prohibited header fields or pseudo-header fields,<a href="#section-4.1.3-2.1" class="pilcrow">¶</a>
</li>
<li id="section-4.1.3-2.2">the absence of mandatory pseudo-header fields,<a href="#section-4.1.3-2.2" class="pilcrow">¶</a>
</li>
<li id="section-4.1.3-2.3">invalid values for pseudo-header fields,<a href="#section-4.1.3-2.3" class="pilcrow">¶</a>
</li>
<li id="section-4.1.3-2.4">pseudo-header fields after header fields,<a href="#section-4.1.3-2.4" class="pilcrow">¶</a>
</li>
<li id="section-4.1.3-2.5">an invalid sequence of HTTP messages, or<a href="#section-4.1.3-2.5" class="pilcrow">¶</a>
</li>
<li id="section-4.1.3-2.6">the inclusion of uppercase header field names.<a href="#section-4.1.3-2.6" class="pilcrow">¶</a>
</li>
</ul>
<p id="section-4.1.3-3">A request or response that includes a payload body can include a
<code>content-length</code> header field.  A request or response is also malformed if the
value of a content-length header field does not equal the sum of the DATA frame
payload lengths that form the body.  A response that is defined to have no
payload, as described in Section 3.3.2 of <span>[<a href="#RFC7230" class="xref">RFC7230</a>]</span> can have a non-zero
content-length header field, even though no content is included in DATA frames.<a href="#section-4.1.3-3" class="pilcrow">¶</a></p>
<p id="section-4.1.3-4">Intermediaries that process HTTP requests or responses (i.e., any intermediary
not acting as a tunnel) MUST NOT forward a malformed request or response.
Malformed requests or responses that are detected MUST be treated as a stream
error (<a href="#errors" class="xref">Section 8</a>) of type H3_GENERAL_PROTOCOL_ERROR.<a href="#section-4.1.3-4" class="pilcrow">¶</a></p>
<p id="section-4.1.3-5">For malformed requests, a server MAY send an HTTP response prior to closing or
resetting the stream.  Clients MUST NOT accept a malformed response.  Note that
these requirements are intended to protect against several types of common
attacks against HTTP; they are deliberately strict because being permissive can
expose implementations to these vulnerabilities.<a href="#section-4.1.3-5" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="connect">
<section id="section-4.2">
        <h3 id="name-the-connect-method">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-the-connect-method" class="section-name selfRef">The CONNECT Method</a>
        </h3>
<p id="section-4.2-1">The pseudo-method CONNECT (Section 4.3.6 of <span>[<a href="#RFC7231" class="xref">RFC7231</a>]</span>) is primarily used with
HTTP proxies to establish a TLS session with an origin server for the purposes
of interacting with "https" resources. In HTTP/1.x, CONNECT is used to convert
an entire HTTP connection into a tunnel to a remote host. In HTTP/2, the CONNECT
method is used to establish a tunnel over a single HTTP/2 stream to a remote
host for similar purposes.<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<p id="section-4.2-2">A CONNECT request in HTTP/3 functions in the same manner as in HTTP/2. The
request MUST be formatted as described in Section 8.3 of <span>[<a href="#HTTP2" class="xref">HTTP2</a>]</span>. A CONNECT
request that does not conform to these restrictions is malformed (see
<a href="#malformed" class="xref">Section 4.1.3</a>). The request stream MUST NOT be closed at the end of the request.<a href="#section-4.2-2" class="pilcrow">¶</a></p>
<p id="section-4.2-3">A proxy that supports CONNECT establishes a TCP connection (<span>[<a href="#RFC0793" class="xref">RFC0793</a>]</span>) to the
server identified in the ":authority" pseudo-header field. Once this connection
is successfully established, the proxy sends a HEADERS frame containing a 2xx
series status code to the client, as defined in Section 4.3.6 of <span>[<a href="#RFC7231" class="xref">RFC7231</a>]</span>.<a href="#section-4.2-3" class="pilcrow">¶</a></p>
<p id="section-4.2-4">All DATA frames on the stream correspond to data sent or received on the TCP
connection. Any DATA frame sent by the client is transmitted by the proxy to the
TCP server; data received from the TCP server is packaged into DATA frames by
the proxy. Note that the size and number of TCP segments is not guaranteed to
map predictably to the size and number of HTTP DATA or QUIC STREAM frames.<a href="#section-4.2-4" class="pilcrow">¶</a></p>
<p id="section-4.2-5">Once the CONNECT method has completed, only DATA frames are permitted
to be sent on the stream.  Extension frames MAY be used if specifically
permitted by the definition of the extension.  Receipt of any other frame type
MUST be treated as a connection error of type H3_FRAME_UNEXPECTED.<a href="#section-4.2-5" class="pilcrow">¶</a></p>
<p id="section-4.2-6">The TCP connection can be closed by either peer. When the client ends the
request stream (that is, the receive stream at the proxy enters the "Data Recvd"
state), the proxy will set the FIN bit on its connection to the TCP server. When
the proxy receives a packet with the FIN bit set, it will terminate the send
stream that it sends to the client. TCP connections which remain half-closed in
a single direction are not invalid, but are often handled poorly by servers, so
clients SHOULD NOT close a stream for sending while they still expect to receive
data from the target of the CONNECT.<a href="#section-4.2-6" class="pilcrow">¶</a></p>
<p id="section-4.2-7">A TCP connection error is signaled by abruptly terminating the stream. A proxy
treats any error in the TCP connection, which includes receiving a TCP segment
with the RST bit set, as a stream error of type H3_CONNECT_ERROR
(<a href="#http-error-codes" class="xref">Section 8.1</a>).  Correspondingly, if a proxy detects an error with the
stream or the QUIC connection, it MUST close the TCP connection.  If the
underlying TCP implementation permits it, the proxy SHOULD send a TCP segment
with the RST bit set.<a href="#section-4.2-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="http-upgrade">
<section id="section-4.3">
        <h3 id="name-http-upgrade">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-http-upgrade" class="section-name selfRef">HTTP Upgrade</a>
        </h3>
<p id="section-4.3-1">HTTP/3 does not support the HTTP Upgrade mechanism (Section 6.7 of <span>[<a href="#RFC7230" class="xref">RFC7230</a>]</span>) or
101 (Switching Protocols) informational status code (Section 6.2.2 of
<span>[<a href="#RFC7231" class="xref">RFC7231</a>]</span>).<a href="#section-4.3-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="server-push">
<section id="section-4.4">
        <h3 id="name-server-push">
<a href="#section-4.4" class="section-number selfRef">4.4. </a><a href="#name-server-push" class="section-name selfRef">Server Push</a>
        </h3>
<p id="section-4.4-1">Server push is an interaction mode introduced in HTTP/2 <span>[<a href="#HTTP2" class="xref">HTTP2</a>]</span> which permits
a server to push a request-response exchange to a client in anticipation of the
client making the indicated request.  This trades off network usage against a
potential latency gain.  HTTP/3 server push is similar to what is described in
HTTP/2 <span>[<a href="#HTTP2" class="xref">HTTP2</a>]</span>, but uses different mechanisms.<a href="#section-4.4-1" class="pilcrow">¶</a></p>
<p id="section-4.4-2">Each server push is identified by a unique Push ID. This Push ID is used in one
or more PUSH_PROMISE frames (see <a href="#frame-push-promise" class="xref">Section 7.2.5</a>) that carry the request
headers, then included with the push stream which ultimately fulfills those
promises. When the same Push ID is promised on multiple request streams, the
decompressed request header sets MUST contain the same fields in the
same order, and both the name and the value in each field MUST be exact
matches.<a href="#section-4.4-2" class="pilcrow">¶</a></p>
<p id="section-4.4-3">Server push is only enabled on a connection when a client sends a MAX_PUSH_ID
frame (see <a href="#frame-max-push-id" class="xref">Section 7.2.7</a>). A server cannot use server push until it
receives a MAX_PUSH_ID frame. A client sends additional MAX_PUSH_ID frames to
control the number of pushes that a server can promise. A server SHOULD use Push
IDs sequentially, starting at 0. A client MUST treat receipt of a push stream
with a Push ID that is greater than the maximum Push ID as a connection error of
type H3_ID_ERROR.<a href="#section-4.4-3" class="pilcrow">¶</a></p>
<p id="section-4.4-4">The header of the request message is carried by a PUSH_PROMISE frame (see
<a href="#frame-push-promise" class="xref">Section 7.2.5</a>) on the request stream which generated the push. Promised
requests MUST conform to the requirements in Section 8.2 of <span>[<a href="#HTTP2" class="xref">HTTP2</a>]</span>.<a href="#section-4.4-4" class="pilcrow">¶</a></p>
<p id="section-4.4-5">Each pushed response is associated with one or more client requests.  The push
is associated with the request stream on which the PUSH_PROMISE frame was
received.  The same server push can be associated with additional client
requests using a PUSH_PROMISE frame with the same Push ID on multiple request
streams.  These associations do not affect the operation of the protocol, but
MAY be considered by user agents when deciding how to use pushed resources.<a href="#section-4.4-5" class="pilcrow">¶</a></p>
<p id="section-4.4-6">Ordering of a PUSH_PROMISE in relation to certain parts of the response is
important. The server SHOULD send PUSH_PROMISE frames prior to sending HEADERS
or DATA frames that reference the promised responses.  This reduces the chance
that a client requests a resource that will be pushed by the server.<a href="#section-4.4-6" class="pilcrow">¶</a></p>
<p id="section-4.4-7">When a server later fulfills a promise, the server push response is conveyed on
a push stream (see <a href="#push-streams" class="xref">Section 6.2.2</a>). The push stream identifies the Push ID of
the promise that it fulfills, then contains a response to the promised request
using the same format described for responses in <a href="#request-response" class="xref">Section 4.1</a>.<a href="#section-4.4-7" class="pilcrow">¶</a></p>
<p id="section-4.4-8">Due to reordering, push stream data can arrive before the corresponding
PUSH_PROMISE frame.  When a client receives a new push stream with an
as-yet-unknown Push ID, both the associated client request and the pushed
request headers are unknown.  The client can buffer the stream data in
expectation of the matching PUSH_PROMISE. The client can use stream flow control
(see section 4.1 of <span>[<a href="#QUIC-TRANSPORT" class="xref">QUIC-TRANSPORT</a>]</span>) to limit the amount of data a server may
commit to the pushed stream.<a href="#section-4.4-8" class="pilcrow">¶</a></p>
<p id="section-4.4-9">If a promised server push is not needed by the client, the client SHOULD send a
CANCEL_PUSH frame. If the push stream is already open or opens after sending the
CANCEL_PUSH frame, the client can abort reading the stream with an error code of
H3_REQUEST_CANCELLED. This asks the server not to transfer additional data and
indicates that it will be discarded upon receipt.<a href="#section-4.4-9" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="connection-closure">
<section id="section-5">
      <h2 id="name-connection-closure">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-connection-closure" class="section-name selfRef">Connection Closure</a>
      </h2>
<p id="section-5-1">Once established, an HTTP/3 connection can be used for many requests and
responses over time until the connection is closed.  Connection closure can
happen in any of several different ways.<a href="#section-5-1" class="pilcrow">¶</a></p>
<div id="idle-connections">
<section id="section-5.1">
        <h3 id="name-idle-connections">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-idle-connections" class="section-name selfRef">Idle Connections</a>
        </h3>
<p id="section-5.1-1">Each QUIC endpoint declares an idle timeout during the handshake.  If the
connection remains idle (no packets received) for longer than this duration, the
peer will assume that the connection has been closed.  HTTP/3 implementations
will need to open a new connection for new requests if the existing connection
has been idle for longer than the server's advertised idle timeout, and SHOULD
do so if approaching the idle timeout.<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<p id="section-5.1-2">HTTP clients are expected to request that the transport keep connections open
while there are responses outstanding for requests or server pushes, as
described in Section 19.2 of <span>[<a href="#QUIC-TRANSPORT" class="xref">QUIC-TRANSPORT</a>]</span>. If the client is not expecting
a response from the server, allowing an idle connection to time out is preferred
over expending effort maintaining a connection that might not be needed.  A
gateway MAY maintain connections in anticipation of need rather than incur the
latency cost of connection establishment to servers. Servers SHOULD NOT actively
keep connections open.<a href="#section-5.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="connection-shutdown">
<section id="section-5.2">
        <h3 id="name-connection-shutdown">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-connection-shutdown" class="section-name selfRef">Connection Shutdown</a>
        </h3>
<p id="section-5.2-1">Even when a connection is not idle, either endpoint can decide to stop using the
connection and let the connection close gracefully.  Since clients drive request
generation, clients perform a connection shutdown by not sending additional
requests on the connection; responses and pushed responses associated to
previous requests will continue to completion.  Servers perform the same
function by communicating with clients.<a href="#section-5.2-1" class="pilcrow">¶</a></p>
<p id="section-5.2-2">Servers initiate the shutdown of a connection by sending a GOAWAY frame
(<a href="#frame-goaway" class="xref">Section 7.2.6</a>).  The GOAWAY frame indicates that client-initiated requests
on lower stream IDs were or might be processed in this connection, while
requests on the indicated stream ID and greater were rejected. This enables
client and server to agree on which requests were accepted prior to the
connection shutdown.  This identifier MAY be zero if no requests were processed.
Servers SHOULD NOT permit additional QUIC streams after sending a GOAWAY frame.<a href="#section-5.2-2" class="pilcrow">¶</a></p>
<p id="section-5.2-3">Clients MUST NOT send new requests on the connection after receiving GOAWAY;
a new connection MAY be established to send additional requests.<a href="#section-5.2-3" class="pilcrow">¶</a></p>
<p id="section-5.2-4">Some requests might already be in transit. If the client has already sent
requests on streams with a Stream ID greater than or equal to that indicated in
the GOAWAY frame, those requests will not be processed and MAY be retried by the
client on a different connection.  The client MAY cancel these requests.  It is
RECOMMENDED that the server explicitly reject such requests (see
<a href="#request-cancellation" class="xref">Section 4.1.2</a>) in order to clean up transport state for the affected
streams.<a href="#section-5.2-4" class="pilcrow">¶</a></p>
<p id="section-5.2-5">Requests on Stream IDs less than the Stream ID in the GOAWAY frame might have
been processed; their status cannot be known until a response is received, the
stream is reset individually, or the connection terminates.  Servers MAY reject
individual requests on streams below the indicated ID if these requests were not
processed.<a href="#section-5.2-5" class="pilcrow">¶</a></p>
<p id="section-5.2-6">Servers SHOULD send a GOAWAY frame when the closing of a connection is known
in advance, even if the advance notice is small, so that the remote peer can
know whether a request has been partially processed or not.  For example, if an
HTTP client sends a POST at the same time that a server closes a QUIC
connection, the client cannot know if the server started to process that POST
request if the server does not send a GOAWAY frame to indicate what streams it
might have acted on.<a href="#section-5.2-6" class="pilcrow">¶</a></p>
<p id="section-5.2-7">A client that is unable to retry requests loses all requests that are in flight
when the server closes the connection.  A server MAY send multiple GOAWAY frames
indicating different stream IDs, but MUST NOT increase the value they send in
the last Stream ID, since clients might already have retried unprocessed
requests on another connection.<a href="#section-5.2-7" class="pilcrow">¶</a></p>
<p id="section-5.2-8">A server that is attempting to gracefully shut down a connection can send an
initial GOAWAY frame with the last Stream ID set to the maximum possible value
for a client-initiated, bidirectional stream (i.e. 2^62-4 in case of QUIC
version 1).  This GOAWAY frame signals to the client that shutdown is imminent
and that initiating further requests is prohibited.  After allowing time for any
in-flight requests to reach the server, the server can send another GOAWAY frame
indicating which requests it will accept before the end of the connection. This
ensures that a connection can be cleanly shut down without causing requests to
fail.<a href="#section-5.2-8" class="pilcrow">¶</a></p>
<p id="section-5.2-9">Once all accepted requests have been processed, the server can permit the
connection to become idle, or MAY initiate an immediate closure of the
connection.  An endpoint that completes a graceful shutdown SHOULD use the
H3_NO_ERROR code when closing the connection.<a href="#section-5.2-9" class="pilcrow">¶</a></p>
<p id="section-5.2-10">If a client has consumed all available bidirectional stream IDs with requests,
the server need not send a GOAWAY frame, since the client is unable to make
further requests.<a href="#section-5.2-10" class="pilcrow">¶</a></p>
</section>
</div>
<div id="immediate-application-closure">
<section id="section-5.3">
        <h3 id="name-immediate-application-closu">
<a href="#section-5.3" class="section-number selfRef">5.3. </a><a href="#name-immediate-application-closu" class="section-name selfRef">Immediate Application Closure</a>
        </h3>
<p id="section-5.3-1">An HTTP/3 implementation can immediately close the QUIC connection at any time.
This results in sending a QUIC CONNECTION_CLOSE frame to the peer; the error
code in this frame indicates to the peer why the connection is being closed.
See <a href="#errors" class="xref">Section 8</a> for error codes which can be used when closing a connection.<a href="#section-5.3-1" class="pilcrow">¶</a></p>
<p id="section-5.3-2">Before closing the connection, a GOAWAY MAY be sent to allow the client to retry
some requests.  Including the GOAWAY frame in the same packet as the QUIC
CONNECTION_CLOSE frame improves the chances of the frame being received by
clients.<a href="#section-5.3-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="transport-closure">
<section id="section-5.4">
        <h3 id="name-transport-closure">
<a href="#section-5.4" class="section-number selfRef">5.4. </a><a href="#name-transport-closure" class="section-name selfRef">Transport Closure</a>
        </h3>
<p id="section-5.4-1">For various reasons, the QUIC transport could indicate to the application layer
that the connection has terminated.  This might be due to an explicit closure
by the peer, a transport-level error, or a change in network topology which
interrupts connectivity.<a href="#section-5.4-1" class="pilcrow">¶</a></p>
<p id="section-5.4-2">If a connection terminates without a GOAWAY frame, clients MUST assume that any
request which was sent, whether in whole or in part, might have been processed.<a href="#section-5.4-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="stream-mapping">
<section id="section-6">
      <h2 id="name-stream-mapping-and-usage">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-stream-mapping-and-usage" class="section-name selfRef">Stream Mapping and Usage</a>
      </h2>
<p id="section-6-1">A QUIC stream provides reliable in-order delivery of bytes, but makes no
guarantees about order of delivery with regard to bytes on other streams. On the
wire, data is framed into QUIC STREAM frames, but this framing is invisible to
the HTTP framing layer. The transport layer buffers and orders received QUIC
STREAM frames, exposing the data contained within as a reliable byte stream to
the application. Although QUIC permits out-of-order delivery within a stream,
HTTP/3 does not make use of this feature.<a href="#section-6-1" class="pilcrow">¶</a></p>
<p id="section-6-2">QUIC streams can be either unidirectional, carrying data only from initiator to
receiver, or bidirectional.  Streams can be initiated by either the client or
the server.  For more detail on QUIC streams, see Section 2 of
<span>[<a href="#QUIC-TRANSPORT" class="xref">QUIC-TRANSPORT</a>]</span>.<a href="#section-6-2" class="pilcrow">¶</a></p>
<p id="section-6-3">When HTTP headers and data are sent over QUIC, the QUIC layer handles most of
the stream management.  HTTP does not need to do any separate multiplexing when
using QUIC - data sent over a QUIC stream always maps to a particular HTTP
transaction or connection context.<a href="#section-6-3" class="pilcrow">¶</a></p>
<div id="bidirectional-streams">
<section id="section-6.1">
        <h3 id="name-bidirectional-streams">
<a href="#section-6.1" class="section-number selfRef">6.1. </a><a href="#name-bidirectional-streams" class="section-name selfRef">Bidirectional Streams</a>
        </h3>
<p id="section-6.1-1">All client-initiated bidirectional streams are used for HTTP requests and
responses.  A bidirectional stream ensures that the response can be readily
correlated with the request. This means that the client's first request occurs
on QUIC stream 0, with subsequent requests on stream 4, 8, and so on. In order
to permit these streams to open, an HTTP/3 server SHOULD configure non-zero
minimum values for the number of permitted streams and the initial stream flow
control window.  So as to not unnecessarily limit parallelism, at least 100
requests SHOULD be permitted at a time.<a href="#section-6.1-1" class="pilcrow">¶</a></p>
<p id="section-6.1-2">HTTP/3 does not use server-initiated bidirectional streams, though an extension
could define a use for these streams.  Clients MUST treat receipt of a
server-initiated bidirectional stream as a connection error of type
H3_STREAM_CREATION_ERROR unless such an extension has been negotiated.<a href="#section-6.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="unidirectional-streams">
<section id="section-6.2">
        <h3 id="name-unidirectional-streams">
<a href="#section-6.2" class="section-number selfRef">6.2. </a><a href="#name-unidirectional-streams" class="section-name selfRef">Unidirectional Streams</a>
        </h3>
<p id="section-6.2-1">Unidirectional streams, in either direction, are used for a range of purposes.
The purpose is indicated by a stream type, which is sent as a variable-length
integer at the start of the stream. The format and structure of data that
follows this integer is determined by the stream type.<a href="#section-6.2-1" class="pilcrow">¶</a></p>
<span id="name-unidirectional-stream-heade"></span><div id="fig-stream-header">
<figure id="figure-1">
          <div class="artwork art-text alignLeft art-drawing" id="section-6.2-2.1">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                        Stream Type (i)                      ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
</div>
<figcaption><a href="#figure-1" class="selfRef">Figure 1</a>:
<a href="#name-unidirectional-stream-heade" class="selfRef">Unidirectional Stream Header</a>
          </figcaption></figure>
</div>
<p id="section-6.2-3">Some stream types are reserved (<a href="#stream-grease" class="xref">Section 6.2.3</a>).  Two stream types are
defined in this document: control streams (<a href="#control-streams" class="xref">Section 6.2.1</a>) and push streams
(<a href="#push-streams" class="xref">Section 6.2.2</a>).  <span>[<a href="#QPACK" class="xref">QPACK</a>]</span> defines two additional stream types.  Other stream
types can be defined by extensions to HTTP/3; see <a href="#extensions" class="xref">Section 9</a> for more
details.<a href="#section-6.2-3" class="pilcrow">¶</a></p>
<p id="section-6.2-4">The performance of HTTP/3 connections in the early phase of their lifetime is
sensitive to the creation and exchange of data on unidirectional streams.
Endpoints that excessively restrict the number of streams or the flow control
window of these streams will increase the chance that the remote peer reaches
the limit early and becomes blocked. In particular, implementations should
consider that remote peers may wish to exercise reserved stream behavior
(<a href="#stream-grease" class="xref">Section 6.2.3</a>) with some of the unidirectional streams they are permitted
to use. To avoid blocking, the transport parameters sent by both clients and
servers MUST allow the peer to create at least one unidirectional stream for the
HTTP control stream plus the number of unidirectional streams required by
mandatory extensions (three being the minimum number required for the base
HTTP/3 protocol and QPACK), and SHOULD provide at least 1,024 bytes of flow
control credit to each stream.<a href="#section-6.2-4" class="pilcrow">¶</a></p>
<p id="section-6.2-5">Note that an endpoint is not required to grant additional credits to create more
unidirectional streams if its peer consumes all the initial credits before
creating the critical unidirectional streams. Endpoints SHOULD create the HTTP
control stream as well as the unidirectional streams required by mandatory
extensions (such as the QPACK encoder and decoder streams) first, and then
create additional streams as allowed by their peer.<a href="#section-6.2-5" class="pilcrow">¶</a></p>
<p id="section-6.2-6">If the stream header indicates a stream type which is not supported by the
recipient, the remainder of the stream cannot be consumed as the semantics are
unknown. Recipients of unknown stream types MAY abort reading of the stream with
an error code of H3_STREAM_CREATION_ERROR, but MUST NOT consider such streams
to be a connection error of any kind.<a href="#section-6.2-6" class="pilcrow">¶</a></p>
<p id="section-6.2-7">Implementations MAY send stream types before knowing whether the peer supports
them.  However, stream types which could modify the state or semantics of
existing protocol components, including QPACK or other extensions, MUST NOT be
sent until the peer is known to support them.<a href="#section-6.2-7" class="pilcrow">¶</a></p>
<p id="section-6.2-8">A sender can close or reset a unidirectional stream unless otherwise specified.
A receiver MUST tolerate unidirectional streams being closed or reset prior to
the reception of the unidirectional stream header.<a href="#section-6.2-8" class="pilcrow">¶</a></p>
<div id="control-streams">
<section id="section-6.2.1">
          <h4 id="name-control-streams">
<a href="#section-6.2.1" class="section-number selfRef">6.2.1. </a><a href="#name-control-streams" class="section-name selfRef">Control Streams</a>
          </h4>
<p id="section-6.2.1-1">A control stream is indicated by a stream type of <code>0x00</code>.  Data on this stream
consists of HTTP/3 frames, as defined in <a href="#frames" class="xref">Section 7.2</a>.<a href="#section-6.2.1-1" class="pilcrow">¶</a></p>
<p id="section-6.2.1-2">Each side MUST initiate a single control stream at the beginning of the
connection and send its SETTINGS frame as the first frame on this stream.  If
the first frame of the control stream is any other frame type, this MUST be
treated as a connection error of type H3_MISSING_SETTINGS. Only one control
stream per peer is permitted; receipt of a second stream which claims to be a
control stream MUST be treated as a connection error of type
H3_STREAM_CREATION_ERROR.  The sender MUST NOT close the control stream, and
the receiver MUST NOT request that the sender close the control stream.  If
either control stream is closed at any point, this MUST be treated as a
connection error of type H3_CLOSED_CRITICAL_STREAM.<a href="#section-6.2.1-2" class="pilcrow">¶</a></p>
<p id="section-6.2.1-3">A pair of unidirectional streams is used rather than a single bidirectional
stream.  This allows either peer to send data as soon as it is able.  Depending
on whether 0-RTT is enabled on the connection, either client or server might be
able to send stream data first after the cryptographic handshake completes.<a href="#section-6.2.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="push-streams">
<section id="section-6.2.2">
          <h4 id="name-push-streams">
<a href="#section-6.2.2" class="section-number selfRef">6.2.2. </a><a href="#name-push-streams" class="section-name selfRef">Push Streams</a>
          </h4>
<p id="section-6.2.2-1">Server push is an optional feature introduced in HTTP/2 that allows a server to
initiate a response before a request has been made.  See <a href="#server-push" class="xref">Section 4.4</a> for
more details.<a href="#section-6.2.2-1" class="pilcrow">¶</a></p>
<p id="section-6.2.2-2">A push stream is indicated by a stream type of <code>0x01</code>, followed by the Push ID
of the promise that it fulfills, encoded as a variable-length integer. The
remaining data on this stream consists of HTTP/3 frames, as defined in
<a href="#frames" class="xref">Section 7.2</a>, and fulfills a promised server push by zero or more non-final HTTP
responses followed by a single final HTTP response, as defined in
<a href="#request-response" class="xref">Section 4.1</a>.  Server push and Push IDs are described in
<a href="#server-push" class="xref">Section 4.4</a>.<a href="#section-6.2.2-2" class="pilcrow">¶</a></p>
<p id="section-6.2.2-3">Only servers can push; if a server receives a client-initiated push stream, this
MUST be treated as a connection error of type H3_STREAM_CREATION_ERROR.<a href="#section-6.2.2-3" class="pilcrow">¶</a></p>
<span id="name-push-stream-header"></span><div id="fig-push-stream-header">
<figure id="figure-2">
            <div class="artwork art-text alignLeft art-drawing" id="section-6.2.2-4.1">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                           0x01 (i)                          ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                          Push ID (i)                        ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
</div>
<figcaption><a href="#figure-2" class="selfRef">Figure 2</a>:
<a href="#name-push-stream-header" class="selfRef">Push Stream Header</a>
            </figcaption></figure>
</div>
<p id="section-6.2.2-5">Each Push ID MUST only be used once in a push stream header. If a push stream
header includes a Push ID that was used in another push stream header, the
client MUST treat this as a connection error of type H3_ID_ERROR.<a href="#section-6.2.2-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="stream-grease">
<section id="section-6.2.3">
          <h4 id="name-reserved-stream-types">
<a href="#section-6.2.3" class="section-number selfRef">6.2.3. </a><a href="#name-reserved-stream-types" class="section-name selfRef">Reserved Stream Types</a>
          </h4>
<p id="section-6.2.3-1">Stream types of the format <code>0x1f * N + 0x21</code> for integer values of N are
reserved to exercise the requirement that unknown types be ignored. These
streams have no semantics, and can be sent when application-layer padding is
desired. They MAY also be sent on connections where no data is currently being
transferred. Endpoints MUST NOT consider these streams to have any meaning upon
receipt.<a href="#section-6.2.3-1" class="pilcrow">¶</a></p>
<p id="section-6.2.3-2">The payload and length of the stream are selected in any manner the
implementation chooses.  Implementations MAY terminate these streams cleanly, or
MAY abruptly terminate them.  When terminating abruptly, the error code
H3_NO_ERROR or a reserved error code (<a href="#http-error-codes" class="xref">Section 8.1</a>) SHOULD be used.<a href="#section-6.2.3-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="http-framing-layer">
<section id="section-7">
      <h2 id="name-http-framing-layer">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-http-framing-layer" class="section-name selfRef">HTTP Framing Layer</a>
      </h2>
<p id="section-7-1">HTTP frames are carried on QUIC streams, as described in <a href="#stream-mapping" class="xref">Section 6</a>.
HTTP/3 defines three stream types: control stream, request stream, and push
stream. This section describes HTTP/3 frame formats and the streams types on
which they are permitted; see <a href="#stream-frame-mapping" class="xref">Table 1</a> for an overview.  A
comparison between HTTP/2 and HTTP/3 frames is provided in <a href="#h2-frames" class="xref">Appendix A.2</a>.<a href="#section-7-1" class="pilcrow">¶</a></p>
<span id="name-http-3-frames-and-stream-ty"></span><div id="stream-frame-mapping">
<table class="center" id="table-1">
        <caption>
<a href="#table-1" class="selfRef">Table 1</a>:
<a href="#name-http-3-frames-and-stream-ty" class="selfRef">HTTP/3 Frames and Stream Type Overview</a>
        </caption>
<thead>
          <tr>
            <th class="text-left" rowspan="1" colspan="1">Frame</th>
            <th class="text-left" rowspan="1" colspan="1">Control Stream</th>
            <th class="text-left" rowspan="1" colspan="1">Request Stream</th>
            <th class="text-left" rowspan="1" colspan="1">Push Stream</th>
            <th class="text-left" rowspan="1" colspan="1">Section</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">DATA</td>
            <td class="text-left" rowspan="1" colspan="1">No</td>
            <td class="text-left" rowspan="1" colspan="1">Yes</td>
            <td class="text-left" rowspan="1" colspan="1">Yes</td>
            <td class="text-left" rowspan="1" colspan="1">
              <a href="#frame-data" class="xref">Section 7.2.1</a>
</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">HEADERS</td>
            <td class="text-left" rowspan="1" colspan="1">No</td>
            <td class="text-left" rowspan="1" colspan="1">Yes</td>
            <td class="text-left" rowspan="1" colspan="1">Yes</td>
            <td class="text-left" rowspan="1" colspan="1">
              <a href="#frame-headers" class="xref">Section 7.2.2</a>
</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">CANCEL_PUSH</td>
            <td class="text-left" rowspan="1" colspan="1">Yes</td>
            <td class="text-left" rowspan="1" colspan="1">No</td>
            <td class="text-left" rowspan="1" colspan="1">No</td>
            <td class="text-left" rowspan="1" colspan="1">
              <a href="#frame-cancel-push" class="xref">Section 7.2.3</a>
</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">SETTINGS</td>
            <td class="text-left" rowspan="1" colspan="1">Yes (1)</td>
            <td class="text-left" rowspan="1" colspan="1">No</td>
            <td class="text-left" rowspan="1" colspan="1">No</td>
            <td class="text-left" rowspan="1" colspan="1">
              <a href="#frame-settings" class="xref">Section 7.2.4</a>
</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">PUSH_PROMISE</td>
            <td class="text-left" rowspan="1" colspan="1">No</td>
            <td class="text-left" rowspan="1" colspan="1">Yes</td>
            <td class="text-left" rowspan="1" colspan="1">No</td>
            <td class="text-left" rowspan="1" colspan="1">
              <a href="#frame-push-promise" class="xref">Section 7.2.5</a>
</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">GOAWAY</td>
            <td class="text-left" rowspan="1" colspan="1">Yes</td>
            <td class="text-left" rowspan="1" colspan="1">No</td>
            <td class="text-left" rowspan="1" colspan="1">No</td>
            <td class="text-left" rowspan="1" colspan="1">
              <a href="#frame-goaway" class="xref">Section 7.2.6</a>
</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">MAX_PUSH_ID</td>
            <td class="text-left" rowspan="1" colspan="1">Yes</td>
            <td class="text-left" rowspan="1" colspan="1">No</td>
            <td class="text-left" rowspan="1" colspan="1">No</td>
            <td class="text-left" rowspan="1" colspan="1">
              <a href="#frame-max-push-id" class="xref">Section 7.2.7</a>
</td>
          </tr>
          <tr>
            <td class="text-left" rowspan="1" colspan="1">Reserved</td>
            <td class="text-left" rowspan="1" colspan="1">Yes</td>
            <td class="text-left" rowspan="1" colspan="1">Yes</td>
            <td class="text-left" rowspan="1" colspan="1">Yes</td>
            <td class="text-left" rowspan="1" colspan="1">
              <a href="#frame-reserved" class="xref">Section 7.2.8</a>
</td>
          </tr>
        </tbody>
      </table>
</div>
<p id="section-7-3">Certain frames can only occur as the first frame of a particular stream type;
these are indicated in <a href="#stream-frame-mapping" class="xref">Table 1</a> with a (1).  Specific guidance
is provided in the relevant section.<a href="#section-7-3" class="pilcrow">¶</a></p>
<p id="section-7-4">Note that, unlike QUIC frames, HTTP/3 frames can span multiple packets.<a href="#section-7-4" class="pilcrow">¶</a></p>
<div id="frame-layout">
<section id="section-7.1">
        <h3 id="name-frame-layout">
<a href="#section-7.1" class="section-number selfRef">7.1. </a><a href="#name-frame-layout" class="section-name selfRef">Frame Layout</a>
        </h3>
<p id="section-7.1-1">All frames have the following format:<a href="#section-7.1-1" class="pilcrow">¶</a></p>
<span id="name-http-3-frame-format"></span><div id="fig-frame">
<figure id="figure-3">
          <div class="artwork art-text alignLeft art-drawing" id="section-7.1-2.1">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                           Type (i)                          ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                          Length (i)                         ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                       Frame Payload (*)                     ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
</div>
<figcaption><a href="#figure-3" class="selfRef">Figure 3</a>:
<a href="#name-http-3-frame-format" class="selfRef">HTTP/3 Frame Format</a>
          </figcaption></figure>
</div>
<p id="section-7.1-3">A frame includes the following fields:<a href="#section-7.1-3" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-7.1-4">
          <dt id="section-7.1-4.1">Type:</dt>
<dd id="section-7.1-4.2">
  A variable-length integer that identifies the frame type.<a href="#section-7.1-4.2" class="pilcrow">¶</a>
</dd>
<dt id="section-7.1-4.3">Length:</dt>
<dd id="section-7.1-4.4">
  A variable-length integer that describes the length in bytes of
the Frame Payload.<a href="#section-7.1-4.4" class="pilcrow">¶</a>
</dd>
<dt id="section-7.1-4.5">Frame Payload:</dt>
<dd id="section-7.1-4.6">
  A payload, the semantics of which are determined by the Type field.<a href="#section-7.1-4.6" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-7.1-5">Each frame's payload MUST contain exactly the fields identified in its
description.  A frame payload that contains additional bytes after the
identified fields or a frame payload that terminates before the end of the
identified fields MUST be treated as a connection error of type
H3_FRAME_ERROR.<a href="#section-7.1-5" class="pilcrow">¶</a></p>
<p id="section-7.1-6">When a stream terminates cleanly, if the last frame on the stream was truncated,
this MUST be treated as a connection error (<a href="#errors" class="xref">Section 8</a>) of type
H3_FRAME_ERROR. Streams which terminate abruptly may be reset at any point in
a frame.<a href="#section-7.1-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="frames">
<section id="section-7.2">
        <h3 id="name-frame-definitions">
<a href="#section-7.2" class="section-number selfRef">7.2. </a><a href="#name-frame-definitions" class="section-name selfRef">Frame Definitions</a>
        </h3>
<div id="frame-data">
<section id="section-7.2.1">
          <h4 id="name-data">
<a href="#section-7.2.1" class="section-number selfRef">7.2.1. </a><a href="#name-data" class="section-name selfRef">DATA</a>
          </h4>
<p id="section-7.2.1-1">DATA frames (type=0x0) convey arbitrary, variable-length sequences of bytes
associated with an HTTP request or response payload.<a href="#section-7.2.1-1" class="pilcrow">¶</a></p>
<p id="section-7.2.1-2">DATA frames MUST be associated with an HTTP request or response.  If a DATA
frame is received on a control stream, the recipient MUST respond with a
connection error (<a href="#errors" class="xref">Section 8</a>) of type H3_FRAME_UNEXPECTED.<a href="#section-7.2.1-2" class="pilcrow">¶</a></p>
<span id="name-data-frame-payload"></span><div id="fig-data">
<figure id="figure-4">
            <div class="artwork art-text alignLeft art-drawing" id="section-7.2.1-3.1">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                         Payload (*)                         ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
</div>
<figcaption><a href="#figure-4" class="selfRef">Figure 4</a>:
<a href="#name-data-frame-payload" class="selfRef">DATA Frame Payload</a>
            </figcaption></figure>
</div>
</section>
</div>
<div id="frame-headers">
<section id="section-7.2.2">
          <h4 id="name-headers">
<a href="#section-7.2.2" class="section-number selfRef">7.2.2. </a><a href="#name-headers" class="section-name selfRef">HEADERS</a>
          </h4>
<p id="section-7.2.2-1">The HEADERS frame (type=0x1) is used to carry a header block, compressed using
QPACK. See <span>[<a href="#QPACK" class="xref">QPACK</a>]</span> for more details.<a href="#section-7.2.2-1" class="pilcrow">¶</a></p>
<span id="name-headers-frame-payload"></span><div id="fig-headers">
<figure id="figure-5">
            <div class="artwork art-text alignLeft art-drawing" id="section-7.2.2-2.1">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                       Header Block (*)                      ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
</div>
<figcaption><a href="#figure-5" class="selfRef">Figure 5</a>:
<a href="#name-headers-frame-payload" class="selfRef">HEADERS Frame Payload</a>
            </figcaption></figure>
</div>
<p id="section-7.2.2-3">HEADERS frames can only be sent on request / push streams.  If a HEADERS frame
is received on a control stream, the recipient MUST respond with a connection
error (<a href="#errors" class="xref">Section 8</a>) of type H3_FRAME_UNEXPECTED.<a href="#section-7.2.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="frame-cancel-push">
<section id="section-7.2.3">
          <h4 id="name-cancel_push">
<a href="#section-7.2.3" class="section-number selfRef">7.2.3. </a><a href="#name-cancel_push" class="section-name selfRef">CANCEL_PUSH</a>
          </h4>
<p id="section-7.2.3-1">The CANCEL_PUSH frame (type=0x3) is used to request cancellation of a server
push prior to the push stream being received.  The CANCEL_PUSH frame identifies
a server push by Push ID (see <a href="#frame-push-promise" class="xref">Section 7.2.5</a>), encoded as a
variable-length integer.<a href="#section-7.2.3-1" class="pilcrow">¶</a></p>
<p id="section-7.2.3-2">When a client sends CANCEL_PUSH, it is indicating that it does not wish to
receive the promised resource.  The server SHOULD abort sending the resource,
but the mechanism to do so depends on the state of the corresponding push
stream.  If the server has not yet created a push stream, it does not create
one.  If the push stream is open, the server SHOULD abruptly terminate that
stream.  If the push stream has already ended, the server MAY still abruptly
terminate the stream or MAY take no action.<a href="#section-7.2.3-2" class="pilcrow">¶</a></p>
<p id="section-7.2.3-3">When a server sends CANCEL_PUSH, it is indicating that it will not be fulfilling
a promise and has not created a push stream.  The client should not expect the
corresponding promise to be fulfilled.<a href="#section-7.2.3-3" class="pilcrow">¶</a></p>
<p id="section-7.2.3-4">Sending CANCEL_PUSH has no direct effect on the state of existing push streams.
A server SHOULD NOT send a CANCEL_PUSH when it has already created a
corresponding push stream, and a client SHOULD NOT send a CANCEL_PUSH when it
has already received a corresponding push stream.<a href="#section-7.2.3-4" class="pilcrow">¶</a></p>
<p id="section-7.2.3-5">A CANCEL_PUSH frame is sent on the control stream.  Receiving a CANCEL_PUSH
frame on a stream other than the control stream MUST be treated as a connection
error of type H3_FRAME_UNEXPECTED.<a href="#section-7.2.3-5" class="pilcrow">¶</a></p>
<span id="name-cancel_push-frame-payload"></span><div id="fig-cancel-push">
<figure id="figure-6">
            <div class="artwork art-text alignLeft art-drawing" id="section-7.2.3-6.1">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                          Push ID (i)                        ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
</div>
<figcaption><a href="#figure-6" class="selfRef">Figure 6</a>:
<a href="#name-cancel_push-frame-payload" class="selfRef">CANCEL_PUSH Frame Payload</a>
            </figcaption></figure>
</div>
<p id="section-7.2.3-7">The CANCEL_PUSH frame carries a Push ID encoded as a variable-length integer.
The Push ID identifies the server push that is being cancelled (see
<a href="#frame-push-promise" class="xref">Section 7.2.5</a>).  If a CANCEL_PUSH frame is received which references a
Push ID greater than currently allowed on the connection, this MUST be treated
as a connection error of type H3_ID_ERROR.<a href="#section-7.2.3-7" class="pilcrow">¶</a></p>
<p id="section-7.2.3-8">If the client receives a CANCEL_PUSH frame, that frame might identify a Push ID
that has not yet been mentioned by a PUSH_PROMISE frame due to reordering.  If a
server receives a CANCEL_PUSH frame for a Push ID that has not yet been
mentioned by a PUSH_PROMISE frame, this MUST be treated as a connection error of
type H3_ID_ERROR.<a href="#section-7.2.3-8" class="pilcrow">¶</a></p>
</section>
</div>
<div id="frame-settings">
<section id="section-7.2.4">
          <h4 id="name-settings">
<a href="#section-7.2.4" class="section-number selfRef">7.2.4. </a><a href="#name-settings" class="section-name selfRef">SETTINGS</a>
          </h4>
<p id="section-7.2.4-1">The SETTINGS frame (type=0x4) conveys configuration parameters that affect how
endpoints communicate, such as preferences and constraints on peer behavior.
Individually, a SETTINGS parameter can also be referred to as a "setting"; the
identifier and value of each setting parameter can be referred to as a "setting
identifier" and a "setting value".<a href="#section-7.2.4-1" class="pilcrow">¶</a></p>
<p id="section-7.2.4-2">SETTINGS frames always apply to a connection, never a single stream.  A SETTINGS
frame MUST be sent as the first frame of each control stream (see
<a href="#control-streams" class="xref">Section 6.2.1</a>) by each peer, and MUST NOT be sent subsequently. If
an endpoint receives a second SETTINGS frame on the control stream, the endpoint
MUST respond with a connection error of type H3_FRAME_UNEXPECTED.<a href="#section-7.2.4-2" class="pilcrow">¶</a></p>
<p id="section-7.2.4-3">SETTINGS frames MUST NOT be sent on any stream other than the control stream.
If an endpoint receives a SETTINGS frame on a different stream, the endpoint
MUST respond with a connection error of type H3_FRAME_UNEXPECTED.<a href="#section-7.2.4-3" class="pilcrow">¶</a></p>
<p id="section-7.2.4-4">SETTINGS parameters are not negotiated; they describe characteristics of the
sending peer, which can be used by the receiving peer. However, a negotiation
can be implied by the use of SETTINGS - each peer uses SETTINGS to advertise a
set of supported values. The definition of the setting would describe how each
peer combines the two sets to conclude which choice will be used.  SETTINGS does
not provide a mechanism to identify when the choice takes effect.<a href="#section-7.2.4-4" class="pilcrow">¶</a></p>
<p id="section-7.2.4-5">Different values for the same parameter can be advertised by each peer. For
example, a client might be willing to consume a very large response header,
while servers are more cautious about request size.<a href="#section-7.2.4-5" class="pilcrow">¶</a></p>
<p id="section-7.2.4-6">The same setting identifier MUST NOT occur more than once in the SETTINGS frame.
A receiver MAY treat the presence of duplicate setting identifiers as a
connection error of type H3_SETTINGS_ERROR.<a href="#section-7.2.4-6" class="pilcrow">¶</a></p>
<p id="section-7.2.4-7">The payload of a SETTINGS frame consists of zero or more parameters.  Each
parameter consists of a setting identifier and a value, both encoded as QUIC
variable-length integers.<a href="#section-7.2.4-7" class="pilcrow">¶</a></p>
<span id="name-settings-parameter-format"></span><div id="fig-ext-settings">
<figure id="figure-7">
            <div class="artwork art-text alignLeft art-drawing" id="section-7.2.4-8.1">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                        Identifier (i)                       ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                           Value (i)                         ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
</div>
<figcaption><a href="#figure-7" class="selfRef">Figure 7</a>:
<a href="#name-settings-parameter-format" class="selfRef">SETTINGS Parameter Format</a>
            </figcaption></figure>
</div>
<p id="section-7.2.4-9">An implementation MUST ignore the contents for any SETTINGS identifier it does
not understand.<a href="#section-7.2.4-9" class="pilcrow">¶</a></p>
<div id="settings-parameters">
<section id="section-7.2.4.1">
            <h5 id="name-defined-settings-parameters">
<a href="#section-7.2.4.1" class="section-number selfRef">7.2.4.1. </a><a href="#name-defined-settings-parameters" class="section-name selfRef">Defined SETTINGS Parameters</a>
            </h5>
<p id="section-7.2.4.1-1">The following settings are defined in HTTP/3:<a href="#section-7.2.4.1-1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-7.2.4.1-2">
              <dt id="section-7.2.4.1-2.1">SETTINGS_MAX_HEADER_LIST_SIZE (0x6):</dt>
<dd id="section-7.2.4.1-2.2">
  The default value is unlimited.  See <a href="#header-formatting" class="xref">Section 4.1.1</a> for usage.<a href="#section-7.2.4.1-2.2" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-7.2.4.1-3">Setting identifiers of the format <code>0x1f * N + 0x21</code> for integer values of N are
reserved to exercise the requirement that unknown identifiers be ignored.  Such
settings have no defined meaning. Endpoints SHOULD include at least one such
setting in their SETTINGS frame. Endpoints MUST NOT consider such settings to
have any meaning upon receipt.<a href="#section-7.2.4.1-3" class="pilcrow">¶</a></p>
<p id="section-7.2.4.1-4">Because the setting has no defined meaning, the value of the setting can be any
value the implementation selects.<a href="#section-7.2.4.1-4" class="pilcrow">¶</a></p>
<p id="section-7.2.4.1-5">Additional settings can be defined by extensions to HTTP/3; see <a href="#extensions" class="xref">Section 9</a>
for more details.<a href="#section-7.2.4.1-5" class="pilcrow">¶</a></p>
</section>
</div>
<div id="settings-initialization">
<section id="section-7.2.4.2">
            <h5 id="name-initialization">
<a href="#section-7.2.4.2" class="section-number selfRef">7.2.4.2. </a><a href="#name-initialization" class="section-name selfRef">Initialization</a>
            </h5>
<p id="section-7.2.4.2-1">An HTTP implementation MUST NOT send frames or requests which would be invalid
based on its current understanding of the peer's settings.<a href="#section-7.2.4.2-1" class="pilcrow">¶</a></p>
<p id="section-7.2.4.2-2">All settings begin at an initial value.  Each endpoint SHOULD use these initial
values to send messages before the peer's SETTINGS frame has arrived, as packets
carrying the settings can be lost or delayed.  When the SETTINGS frame arrives,
any settings are changed to their new values.<a href="#section-7.2.4.2-2" class="pilcrow">¶</a></p>
<p id="section-7.2.4.2-3">This removes the need to wait for the SETTINGS frame before sending messages.
Endpoints MUST NOT require any data to be received from the peer prior to
sending the SETTINGS frame; settings MUST be sent as soon as the transport is
ready to send data.<a href="#section-7.2.4.2-3" class="pilcrow">¶</a></p>
<p id="section-7.2.4.2-4">For servers, the initial value of each client setting is the default value.<a href="#section-7.2.4.2-4" class="pilcrow">¶</a></p>
<p id="section-7.2.4.2-5">For clients using a 1-RTT QUIC connection, the initial value of each server
setting is the default value.  1-RTT keys will always become available prior to
SETTINGS arriving, even if the server sends SETTINGS immediately. Clients SHOULD
NOT wait indefinitely for SETTINGS to arrive before sending requests, but SHOULD
process received datagrams in order to increase the likelihood of processing
SETTINGS before sending the first request.<a href="#section-7.2.4.2-5" class="pilcrow">¶</a></p>
<p id="section-7.2.4.2-6">When a 0-RTT QUIC connection is being used, the initial value of each server
setting is the value used in the previous session. Clients SHOULD store the
settings the server provided in the connection where resumption information was
provided, but MAY opt not to store settings in certain cases (e.g., if the
session ticket is received before the SETTINGS frame). A client MUST comply with
stored settings - or default values, if no values are stored - when attempting
0-RTT. Once a server has provided new settings, clients MUST comply with those
values.<a href="#section-7.2.4.2-6" class="pilcrow">¶</a></p>
<p id="section-7.2.4.2-7">A server can remember the settings that it advertised, or store an
integrity-protected copy of the values in the ticket and recover the information
when accepting 0-RTT data. A server uses the HTTP/3 settings values in
determining whether to accept 0-RTT data.  If the server cannot determine that
the settings remembered by a client are compatible with its current settings, it
MUST NOT accept 0-RTT data.  Remembered settings are compatible if a client
complying with those settings would not violate the server's current settings.<a href="#section-7.2.4.2-7" class="pilcrow">¶</a></p>
<p id="section-7.2.4.2-8">A server MAY accept 0-RTT and subsequently provide different settings in its
SETTINGS frame. If 0-RTT data is accepted by the server, its SETTINGS frame MUST
NOT reduce any limits or alter any values that might be violated by the client
with its 0-RTT data.  The server MUST include all settings which differ from
their default values.  If a server accepts 0-RTT but then sends settings that
are not compatible with the previously specified settings, this MUST be treated
as a connection error of type H3_SETTINGS_ERROR. If a server accepts 0-RTT but
then sends a SETTINGS frame that omits a setting value that the client
understands (apart from reserved setting identifiers) that was previously
specified to have a non-default value, this MUST be treated as a connection
error of type H3_SETTINGS_ERROR.<a href="#section-7.2.4.2-8" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="frame-push-promise">
<section id="section-7.2.5">
          <h4 id="name-push_promise">
<a href="#section-7.2.5" class="section-number selfRef">7.2.5. </a><a href="#name-push_promise" class="section-name selfRef">PUSH_PROMISE</a>
          </h4>
<p id="section-7.2.5-1">The PUSH_PROMISE frame (type=0x5) is used to carry a promised request header
set from server to client on a request stream, as in HTTP/2.<a href="#section-7.2.5-1" class="pilcrow">¶</a></p>
<span id="name-push_promise-frame-payload"></span><div id="fig-push-promise">
<figure id="figure-8">
            <div class="artwork art-text alignLeft art-drawing" id="section-7.2.5-2.1">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                          Push ID (i)                        ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                       Header Block (*)                      ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
</div>
<figcaption><a href="#figure-8" class="selfRef">Figure 8</a>:
<a href="#name-push_promise-frame-payload" class="selfRef">PUSH_PROMISE Frame Payload</a>
            </figcaption></figure>
</div>
<p id="section-7.2.5-3">The payload consists of:<a href="#section-7.2.5-3" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-7.2.5-4">
            <dt id="section-7.2.5-4.1">Push ID:</dt>
<dd id="section-7.2.5-4.2">
  A variable-length integer that identifies the server push operation.  A Push
ID is used in push stream headers (<a href="#server-push" class="xref">Section 4.4</a>), CANCEL_PUSH frames
(<a href="#frame-cancel-push" class="xref">Section 7.2.3</a>).<a href="#section-7.2.5-4.2" class="pilcrow">¶</a>
</dd>
<dt id="section-7.2.5-4.3">Header Block:</dt>
<dd id="section-7.2.5-4.4">
  QPACK-compressed request header fields for the promised response.  See <span>[<a href="#QPACK" class="xref">QPACK</a>]</span>
for more details.<a href="#section-7.2.5-4.4" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-7.2.5-5">A server MUST NOT use a Push ID that is larger than the client has provided in a
MAX_PUSH_ID frame (<a href="#frame-max-push-id" class="xref">Section 7.2.7</a>). A client MUST treat receipt of a
PUSH_PROMISE frame that contains a larger Push ID than the client has advertised
as a connection error of H3_ID_ERROR.<a href="#section-7.2.5-5" class="pilcrow">¶</a></p>
<p id="section-7.2.5-6">A server MAY use the same Push ID in multiple PUSH_PROMISE frames. If so, the
decompressed request header sets MUST contain the same fields in the same
order, and both the name and and value in each field MUST be exact
matches. Clients SHOULD compare the request header sets for resources promised
multiple times. If a client receives a Push ID that has already been promised
and detects a mismatch, it MUST respond with a connection error of type
H3_GENERAL_PROTOCOL_ERROR. If the decompressed header sets match exactly, the
client SHOULD associate the pushed content with each stream on which
a PUSH_PROMISE was received.<a href="#section-7.2.5-6" class="pilcrow">¶</a></p>
<p id="section-7.2.5-7">Allowing duplicate references to the same Push ID is primarily to reduce
duplication caused by concurrent requests.  A server SHOULD avoid reusing a Push
ID over a long period.  Clients are likely to consume server push responses and
not retain them for reuse over time.  Clients that see a PUSH_PROMISE that uses
a Push ID that they have already consumed and discarded are forced to ignore the
PUSH_PROMISE.<a href="#section-7.2.5-7" class="pilcrow">¶</a></p>
<p id="section-7.2.5-8">If a PUSH_PROMISE frame is received on the control stream, the client MUST
respond with a connection error (<a href="#errors" class="xref">Section 8</a>) of type H3_FRAME_UNEXPECTED.<a href="#section-7.2.5-8" class="pilcrow">¶</a></p>
<p id="section-7.2.5-9">A client MUST NOT send a PUSH_PROMISE frame.  A server MUST treat the receipt
of a PUSH_PROMISE frame as a connection error of type H3_FRAME_UNEXPECTED.<a href="#section-7.2.5-9" class="pilcrow">¶</a></p>
<p id="section-7.2.5-10">See <a href="#server-push" class="xref">Section 4.4</a> for a description of the overall server push mechanism.<a href="#section-7.2.5-10" class="pilcrow">¶</a></p>
</section>
</div>
<div id="frame-goaway">
<section id="section-7.2.6">
          <h4 id="name-goaway">
<a href="#section-7.2.6" class="section-number selfRef">7.2.6. </a><a href="#name-goaway" class="section-name selfRef">GOAWAY</a>
          </h4>
<p id="section-7.2.6-1">The GOAWAY frame (type=0x7) is used to initiate graceful shutdown of a
connection by a server.  GOAWAY allows a server to stop accepting new requests
while still finishing processing of previously received requests.  This enables
administrative actions, like server maintenance.  GOAWAY by itself does not
close a connection.<a href="#section-7.2.6-1" class="pilcrow">¶</a></p>
<span id="name-goaway-frame-payload"></span><div id="fig-goaway">
<figure id="figure-9">
            <div class="artwork art-text alignLeft art-drawing" id="section-7.2.6-2.1">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                          Stream ID (i)                      ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
</div>
<figcaption><a href="#figure-9" class="selfRef">Figure 9</a>:
<a href="#name-goaway-frame-payload" class="selfRef">GOAWAY Frame Payload</a>
            </figcaption></figure>
</div>
<p id="section-7.2.6-3">The GOAWAY frame is always sent on the control stream. It carries a QUIC Stream
ID for a client-initiated bidirectional stream encoded as a variable-length
integer.  A client MUST treat receipt of a GOAWAY frame containing a Stream ID
of any other type as a connection error of type H3_ID_ERROR.<a href="#section-7.2.6-3" class="pilcrow">¶</a></p>
<p id="section-7.2.6-4">Clients do not need to send GOAWAY to initiate a graceful shutdown; they simply
stop making new requests.  A server MUST treat receipt of a GOAWAY frame on any
stream as a connection error (<a href="#errors" class="xref">Section 8</a>) of type H3_FRAME_UNEXPECTED.<a href="#section-7.2.6-4" class="pilcrow">¶</a></p>
<p id="section-7.2.6-5">The GOAWAY frame applies to the connection, not a specific stream.  A client
MUST treat a GOAWAY frame on a stream other than the control stream as a
connection error (<a href="#errors" class="xref">Section 8</a>) of type H3_FRAME_UNEXPECTED.<a href="#section-7.2.6-5" class="pilcrow">¶</a></p>
<p id="section-7.2.6-6">See <a href="#connection-shutdown" class="xref">Section 5.2</a> for more information on the use of the GOAWAY frame.<a href="#section-7.2.6-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="frame-max-push-id">
<section id="section-7.2.7">
          <h4 id="name-max_push_id">
<a href="#section-7.2.7" class="section-number selfRef">7.2.7. </a><a href="#name-max_push_id" class="section-name selfRef">MAX_PUSH_ID</a>
          </h4>
<p id="section-7.2.7-1">The MAX_PUSH_ID frame (type=0xD) is used by clients to control the number of
server pushes that the server can initiate.  This sets the maximum value for a
Push ID that the server can use in PUSH_PROMISE and CANCEL_PUSH frames.
Consequently, this also limits the number of push streams that the server can
initiate in addition to the limit maintained by the QUIC transport.<a href="#section-7.2.7-1" class="pilcrow">¶</a></p>
<p id="section-7.2.7-2">The MAX_PUSH_ID frame is always sent on the control stream.  Receipt of a
MAX_PUSH_ID frame on any other stream MUST be treated as a connection error of
type H3_FRAME_UNEXPECTED.<a href="#section-7.2.7-2" class="pilcrow">¶</a></p>
<p id="section-7.2.7-3">A server MUST NOT send a MAX_PUSH_ID frame.  A client MUST treat the receipt of
a MAX_PUSH_ID frame as a connection error of type H3_FRAME_UNEXPECTED.<a href="#section-7.2.7-3" class="pilcrow">¶</a></p>
<p id="section-7.2.7-4">The maximum Push ID is unset when a connection is created, meaning that a server
cannot push until it receives a MAX_PUSH_ID frame.  A client that wishes to
manage the number of promised server pushes can increase the maximum Push ID by
sending MAX_PUSH_ID frames as the server fulfills or cancels server pushes.<a href="#section-7.2.7-4" class="pilcrow">¶</a></p>
<span id="name-max_push_id-frame-payload"></span><div id="fig-max-push">
<figure id="figure-10">
            <div class="artwork art-text alignLeft art-drawing" id="section-7.2.7-5.1">
<pre>
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                          Push ID (i)                        ...
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
</div>
<figcaption><a href="#figure-10" class="selfRef">Figure 10</a>:
<a href="#name-max_push_id-frame-payload" class="selfRef">MAX_PUSH_ID Frame Payload</a>
            </figcaption></figure>
</div>
<p id="section-7.2.7-6">The MAX_PUSH_ID frame carries a single variable-length integer that identifies
the maximum value for a Push ID that the server can use (see
<a href="#frame-push-promise" class="xref">Section 7.2.5</a>).  A MAX_PUSH_ID frame cannot reduce the maximum Push ID;
receipt of a MAX_PUSH_ID that contains a smaller value than previously received
MUST be treated as a connection error of type H3_ID_ERROR.<a href="#section-7.2.7-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="frame-reserved">
<section id="section-7.2.8">
          <h4 id="name-reserved-frame-types">
<a href="#section-7.2.8" class="section-number selfRef">7.2.8. </a><a href="#name-reserved-frame-types" class="section-name selfRef">Reserved Frame Types</a>
          </h4>
<p id="section-7.2.8-1">Frame types of the format <code>0x1f * N + 0x21</code> for integer values of N are reserved
to exercise the requirement that unknown types be ignored (<a href="#extensions" class="xref">Section 9</a>).
These frames have no semantics, and can be sent on any open stream when
application-layer padding is desired. They MAY also be sent on connections where
no data is currently being transferred. Endpoints MUST NOT consider these frames
to have any meaning upon receipt.<a href="#section-7.2.8-1" class="pilcrow">¶</a></p>
<p id="section-7.2.8-2">The payload and length of the frames are selected in any manner the
implementation chooses.<a href="#section-7.2.8-2" class="pilcrow">¶</a></p>
<p id="section-7.2.8-3">Frame types which were used in HTTP/2 where there is no corresponding HTTP/3
frame have also been reserved (<a href="#iana-frames" class="xref">Section 11.2.1</a>).  These frame types MUST NOT be
sent, and receipt MAY be treated as an error of type H3_FRAME_UNEXPECTED.<a href="#section-7.2.8-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<div id="errors">
<section id="section-8">
      <h2 id="name-error-handling">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-error-handling" class="section-name selfRef">Error Handling</a>
      </h2>
<p id="section-8-1">QUIC allows the application to abruptly terminate (reset) individual streams or
the entire connection when an error is encountered.  These are referred to as
"stream errors" or "connection errors" and are described in more detail in
<span>[<a href="#QUIC-TRANSPORT" class="xref">QUIC-TRANSPORT</a>]</span>.<a href="#section-8-1" class="pilcrow">¶</a></p>
<p id="section-8-2">An endpoint MAY choose to treat a stream error as a connection error under
certain circumstances.  Implementations need to consider the impact on
outstanding requests before making this choice.<a href="#section-8-2" class="pilcrow">¶</a></p>
<p id="section-8-3">Because new error codes can be defined without negotiation (see <a href="#extensions" class="xref">Section 9</a>),
use of an error code in an unexpected context or receipt of an unknown error
code MUST be treated as equivalent to H3_NO_ERROR.  However, closing a stream
can have other effects regardless of the error code (see <a href="#request-response" class="xref">Section 4.1</a>).<a href="#section-8-3" class="pilcrow">¶</a></p>
<p id="section-8-4">This section describes HTTP/3-specific error codes which can be used to express
the cause of a connection or stream error.<a href="#section-8-4" class="pilcrow">¶</a></p>
<div id="http-error-codes">
<section id="section-8.1">
        <h3 id="name-http-3-error-codes">
<a href="#section-8.1" class="section-number selfRef">8.1. </a><a href="#name-http-3-error-codes" class="section-name selfRef">HTTP/3 Error Codes</a>
        </h3>
<p id="section-8.1-1">The following error codes are defined for use when abruptly terminating streams,
aborting reading of streams, or immediately closing connections.<a href="#section-8.1-1" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-8.1-2">
          <dt id="section-8.1-2.1">H3_NO_ERROR (0x100):</dt>
<dd id="section-8.1-2.2">
  No error.  This is used when the connection or stream needs to be closed, but
there is no error to signal.<a href="#section-8.1-2.2" class="pilcrow">¶</a>
</dd>
<dt id="section-8.1-2.3">H3_GENERAL_PROTOCOL_ERROR (0x101):</dt>
<dd id="section-8.1-2.4">
  Peer violated protocol requirements in a way which doesn't match a more
specific error code, or endpoint declines to use the more specific error code.<a href="#section-8.1-2.4" class="pilcrow">¶</a>
</dd>
<dt id="section-8.1-2.5">H3_INTERNAL_ERROR (0x102):</dt>
<dd id="section-8.1-2.6">
  An internal error has occurred in the HTTP stack.<a href="#section-8.1-2.6" class="pilcrow">¶</a>
</dd>
<dt id="section-8.1-2.7">H3_STREAM_CREATION_ERROR (0x103):</dt>
<dd id="section-8.1-2.8">
  The endpoint detected that its peer created a stream that it will not accept.<a href="#section-8.1-2.8" class="pilcrow">¶</a>
</dd>
<dt id="section-8.1-2.9">H3_CLOSED_CRITICAL_STREAM (0x104):</dt>
<dd id="section-8.1-2.10">
  A stream required by the connection was closed or reset.<a href="#section-8.1-2.10" class="pilcrow">¶</a>
</dd>
<dt id="section-8.1-2.11">H3_FRAME_UNEXPECTED (0x105):</dt>
<dd id="section-8.1-2.12">
  A frame was received which was not permitted in the current state or on the
current stream.<a href="#section-8.1-2.12" class="pilcrow">¶</a>
</dd>
<dt id="section-8.1-2.13">H3_FRAME_ERROR (0x106):</dt>
<dd id="section-8.1-2.14">
  A frame that fails to satisfy layout requirements or with an invalid size
was received.<a href="#section-8.1-2.14" class="pilcrow">¶</a>
</dd>
<dt id="section-8.1-2.15">H3_EXCESSIVE_LOAD (0x107):</dt>
<dd id="section-8.1-2.16">
  The endpoint detected that its peer is exhibiting a behavior that might be
generating excessive load.<a href="#section-8.1-2.16" class="pilcrow">¶</a>
</dd>
<dt id="section-8.1-2.17">H3_ID_ERROR (0x108):</dt>
<dd id="section-8.1-2.18">
  A Stream ID or Push ID was used incorrectly, such as exceeding a limit,
reducing a limit, or being reused.<a href="#section-8.1-2.18" class="pilcrow">¶</a>
</dd>
<dt id="section-8.1-2.19">H3_SETTINGS_ERROR (0x109):</dt>
<dd id="section-8.1-2.20">
  An endpoint detected an error in the payload of a SETTINGS frame.<a href="#section-8.1-2.20" class="pilcrow">¶</a>
</dd>
<dt id="section-8.1-2.21">H3_MISSING_SETTINGS (0x10A):</dt>
<dd id="section-8.1-2.22">
  No SETTINGS frame was received at the beginning of the control stream.<a href="#section-8.1-2.22" class="pilcrow">¶</a>
</dd>
<dt id="section-8.1-2.23">H3_REQUEST_REJECTED (0x10B):</dt>
<dd id="section-8.1-2.24">
  A server rejected a request without performing any application processing.<a href="#section-8.1-2.24" class="pilcrow">¶</a>
</dd>
<dt id="section-8.1-2.25">H3_REQUEST_CANCELLED (0x10C):</dt>
<dd id="section-8.1-2.26">
  The request or its response (including pushed response) is cancelled.<a href="#section-8.1-2.26" class="pilcrow">¶</a>
</dd>
<dt id="section-8.1-2.27">H3_REQUEST_INCOMPLETE (0x10D):</dt>
<dd id="section-8.1-2.28">
  The client's stream terminated without containing a fully-formed request.<a href="#section-8.1-2.28" class="pilcrow">¶</a>
</dd>
<dt id="section-8.1-2.29">H3_CONNECT_ERROR (0x10F):</dt>
<dd id="section-8.1-2.30">
  The connection established in response to a CONNECT request was reset or
abnormally closed.<a href="#section-8.1-2.30" class="pilcrow">¶</a>
</dd>
<dt id="section-8.1-2.31">H3_VERSION_FALLBACK (0x110):</dt>
<dd id="section-8.1-2.32">
  The requested operation cannot be served over HTTP/3.  The peer should
retry over HTTP/1.1.<a href="#section-8.1-2.32" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-8.1-3">Error codes of the format <code>0x1f * N + 0x21</code> for integer values of N are reserved
to exercise the requirement that unknown error codes be treated as equivalent to
H3_NO_ERROR (<a href="#extensions" class="xref">Section 9</a>). Implementations SHOULD select an error code from
this space with some probability when they would have sent H3_NO_ERROR.<a href="#section-8.1-3" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="extensions">
<section id="section-9">
      <h2 id="name-extensions-to-http-3">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-extensions-to-http-3" class="section-name selfRef">Extensions to HTTP/3</a>
      </h2>
<p id="section-9-1">HTTP/3 permits extension of the protocol.  Within the limitations described in
this section, protocol extensions can be used to provide additional services or
alter any aspect of the protocol.  Extensions are effective only within the
scope of a single HTTP/3 connection.<a href="#section-9-1" class="pilcrow">¶</a></p>
<p id="section-9-2">This applies to the protocol elements defined in this document.  This does not
affect the existing options for extending HTTP, such as defining new methods,
status codes, or header fields.<a href="#section-9-2" class="pilcrow">¶</a></p>
<p id="section-9-3">Extensions are permitted to use new frame types (<a href="#frames" class="xref">Section 7.2</a>), new settings
(<a href="#settings-parameters" class="xref">Section 7.2.4.1</a>), new error codes (<a href="#errors" class="xref">Section 8</a>), or new unidirectional
stream types (<a href="#unidirectional-streams" class="xref">Section 6.2</a>).  Registries are established for
managing these extension points: frame types (<a href="#iana-frames" class="xref">Section 11.2.1</a>), settings
(<a href="#iana-settings" class="xref">Section 11.2.2</a>), error codes (<a href="#iana-error-codes" class="xref">Section 11.2.3</a>), and stream types
(<a href="#iana-stream-types" class="xref">Section 11.2.4</a>).<a href="#section-9-3" class="pilcrow">¶</a></p>
<p id="section-9-4">Implementations MUST ignore unknown or unsupported values in all extensible
protocol elements.  Implementations MUST discard frames and unidirectional
streams that have unknown or unsupported types.  This means that any of these
extension points can be safely used by extensions without prior arrangement or
negotiation.  However, where a known frame type is required to be in a specific
location, such as the SETTINGS frame as the first frame of the control stream
(see <a href="#control-streams" class="xref">Section 6.2.1</a>), an unknown frame type does not satisfy that
requirement and SHOULD be treated as an error.<a href="#section-9-4" class="pilcrow">¶</a></p>
<p id="section-9-5">Extensions that could change the semantics of existing protocol components MUST
be negotiated before being used.  For example, an extension that changes the
layout of the HEADERS frame cannot be used until the peer has given a positive
signal that this is acceptable.  Coordinating when such a revised layout comes
into effect could prove complex.  As such, allocating new identifiers for
new definitions of existing protocol elements is likely to be more effective.<a href="#section-9-5" class="pilcrow">¶</a></p>
<p id="section-9-6">This document doesn't mandate a specific method for negotiating the use of an
extension but notes that a setting (<a href="#settings-parameters" class="xref">Section 7.2.4.1</a>) could be used for
that purpose.  If both peers set a value that indicates willingness to use the
extension, then the extension can be used.  If a setting is used for extension
negotiation, the default value MUST be defined in such a fashion that the
extension is disabled if the setting is omitted.<a href="#section-9-6" class="pilcrow">¶</a></p>
</section>
</div>
<div id="security-considerations">
<section id="section-10">
      <h2 id="name-security-considerations">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-10-1">The security considerations of HTTP/3 should be comparable to those of HTTP/2
with TLS; the considerations from Section 10 of <span>[<a href="#HTTP2" class="xref">HTTP2</a>]</span> apply in addition to
those listed here.<a href="#section-10-1" class="pilcrow">¶</a></p>
<p id="section-10-2">When HTTP Alternative Services is used for discovery for HTTP/3 endpoints, the
security considerations of <span>[<a href="#ALTSVC" class="xref">ALTSVC</a>]</span> also apply.<a href="#section-10-2" class="pilcrow">¶</a></p>
<div id="traffic-analysis">
<section id="section-10.1">
        <h3 id="name-traffic-analysis">
<a href="#section-10.1" class="section-number selfRef">10.1. </a><a href="#name-traffic-analysis" class="section-name selfRef">Traffic Analysis</a>
        </h3>
<p id="section-10.1-1">Where HTTP/2 employs PADDING frames and Padding fields in other frames to make a
connection more resistant to traffic analysis, HTTP/3 can either rely on
transport-layer padding or employ the reserved frame and stream types discussed
in <a href="#frame-reserved" class="xref">Section 7.2.8</a> and <a href="#stream-grease" class="xref">Section 6.2.3</a>.  These methods of padding produce
different results in terms of the granularity of padding, how padding is
arranged in relation to the information that is being protected, whether
padding is applied in the case of packet loss, and how an implementation might
control padding.<a href="#section-10.1-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="frame-parsing">
<section id="section-10.2">
        <h3 id="name-frame-parsing">
<a href="#section-10.2" class="section-number selfRef">10.2. </a><a href="#name-frame-parsing" class="section-name selfRef">Frame Parsing</a>
        </h3>
<p id="section-10.2-1">Several protocol elements contain nested length elements, typically in the form
of frames with an explicit length containing variable-length integers.  This
could pose a security risk to an incautious implementer.  An implementation MUST
ensure that the length of a frame exactly matches the length of the fields it
contains.<a href="#section-10.2-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="early-data">
<section id="section-10.3">
        <h3 id="name-early-data">
<a href="#section-10.3" class="section-number selfRef">10.3. </a><a href="#name-early-data" class="section-name selfRef">Early Data</a>
        </h3>
<p id="section-10.3-1">The use of 0-RTT with HTTP/3 creates an exposure to replay attack.  The
anti-replay mitigations in <span>[<a href="#HTTP-REPLAY" class="xref">HTTP-REPLAY</a>]</span> MUST be applied when using
HTTP/3 with 0-RTT.<a href="#section-10.3-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="migration">
<section id="section-10.4">
        <h3 id="name-migration">
<a href="#section-10.4" class="section-number selfRef">10.4. </a><a href="#name-migration" class="section-name selfRef">Migration</a>
        </h3>
<p id="section-10.4-1">Certain HTTP implementations use the client address for logging or
access-control purposes.  Since a QUIC client's address might change during a
connection (and future versions might support simultaneous use of multiple
addresses), such implementations will need to either actively retrieve the
client's current address or addresses when they are relevant or explicitly
accept that the original address might change.<a href="#section-10.4-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="iana-considerations">
<section id="section-11">
      <h2 id="name-iana-considerations">
<a href="#section-11" class="section-number selfRef">11. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-11-1">This document registers a new ALPN protocol ID (<a href="#iana-alpn" class="xref">Section 11.1</a>) and creates new
registries that manage the assignment of codepoints in HTTP/3.<a href="#section-11-1" class="pilcrow">¶</a></p>
<div id="iana-alpn">
<section id="section-11.1">
        <h3 id="name-registration-of-http-3-iden">
<a href="#section-11.1" class="section-number selfRef">11.1. </a><a href="#name-registration-of-http-3-iden" class="section-name selfRef">Registration of HTTP/3 Identification String</a>
        </h3>
<p id="section-11.1-1">This document creates a new registration for the identification of
HTTP/3 in the "Application Layer Protocol Negotiation (ALPN)
Protocol IDs" registry established in <span>[<a href="#RFC7301" class="xref">RFC7301</a>]</span>.<a href="#section-11.1-1" class="pilcrow">¶</a></p>
<p id="section-11.1-2">The "h3" string identifies HTTP/3:<a href="#section-11.1-2" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-11.1-3">
          <dt id="section-11.1-3.1">Protocol:</dt>
<dd id="section-11.1-3.2">
  HTTP/3<a href="#section-11.1-3.2" class="pilcrow">¶</a>
</dd>
<dt id="section-11.1-3.3">Identification Sequence:</dt>
<dd id="section-11.1-3.4">
  0x68 0x33 ("h3")<a href="#section-11.1-3.4" class="pilcrow">¶</a>
</dd>
<dt id="section-11.1-3.5">Specification:</dt>
<dd id="section-11.1-3.6">
  This document<a href="#section-11.1-3.6" class="pilcrow">¶</a>
</dd>
</dl>
</section>
</div>
<div id="iana-policy">
<section id="section-11.2">
        <h3 id="name-new-registries">
<a href="#section-11.2" class="section-number selfRef">11.2. </a><a href="#name-new-registries" class="section-name selfRef">New Registries</a>
        </h3>
<p id="section-11.2-1">New registries created in this document operate under the QUIC registration
policy documented in Section 22.1 of <span>[<a href="#QUIC-TRANSPORT" class="xref">QUIC-TRANSPORT</a>]</span>.  These registries all
include the common set of fields listed in Section 22.1.1 of <span>[<a href="#QUIC-TRANSPORT" class="xref">QUIC-TRANSPORT</a>]</span>.<a href="#section-11.2-1" class="pilcrow">¶</a></p>
<p id="section-11.2-2">The initial allocations in these registries created in this document are all
assigned permanent status and list as contact both the IESG (iesg@ietf.org) and
the HTTP working group (ietf-http-wg@w3.org).<a href="#section-11.2-2" class="pilcrow">¶</a></p>
<div id="iana-frames">
<section id="section-11.2.1">
          <h4 id="name-frame-types">
<a href="#section-11.2.1" class="section-number selfRef">11.2.1. </a><a href="#name-frame-types" class="section-name selfRef">Frame Types</a>
          </h4>
<p id="section-11.2.1-1">This document establishes a registry for HTTP/3 frame type codes. The "HTTP/3
Frame Type" registry governs a 62-bit space.  This registry follows the QUIC
registry policy; see <a href="#iana-policy" class="xref">Section 11.2</a>.  Permanent registrations in this registry
are assigned using the Specification Required policy <span>[<a href="#RFC8126" class="xref">RFC8126</a>]</span>, except for
values between 0x00 and 0x3f (in hexadecimal; inclusive), which are assigned
using Standards Action or IESG Approval as defined in Section 4.9 and 4.10 of
<span>[<a href="#RFC8126" class="xref">RFC8126</a>]</span>.<a href="#section-11.2.1-1" class="pilcrow">¶</a></p>
<p id="section-11.2.1-2">While this registry is separate from the "HTTP/2 Frame Type" registry defined in
<span>[<a href="#HTTP2" class="xref">HTTP2</a>]</span>, it is preferable that the assignments parallel each other where the
code spaces overlap.  If an entry is present in only one registry, every effort
SHOULD be made to avoid assigning the corresponding value to an unrelated
operation.<a href="#section-11.2.1-2" class="pilcrow">¶</a></p>
<p id="section-11.2.1-3">In addition to common fields as described in <a href="#iana-policy" class="xref">Section 11.2</a>, permanent
registrations in this registry MUST include the following field:<a href="#section-11.2.1-3" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-11.2.1-4">
            <dt id="section-11.2.1-4.1">Frame Type:</dt>
<dd id="section-11.2.1-4.2">
  A name or label for the frame type.<a href="#section-11.2.1-4.2" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-11.2.1-5">Specifications of frame types MUST include a description of the frame layout and
its semantics, including any parts of the frame that are conditionally present.<a href="#section-11.2.1-5" class="pilcrow">¶</a></p>
<p id="section-11.2.1-6">The entries in <a href="#iana-frame-table" class="xref">Table 2</a> are registered by this document.<a href="#section-11.2.1-6" class="pilcrow">¶</a></p>
<span id="name-initial-http-3-frame-types"></span><div id="iana-frame-table">
<table class="center" id="table-2">
            <caption>
<a href="#table-2" class="selfRef">Table 2</a>:
<a href="#name-initial-http-3-frame-types" class="selfRef">Initial HTTP/3 Frame Types</a>
            </caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Frame Type</th>
                <th class="text-center" rowspan="1" colspan="1">Value</th>
                <th class="text-left" rowspan="1" colspan="1">Specification</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">DATA</td>
                <td class="text-center" rowspan="1" colspan="1">0x0</td>
                <td class="text-left" rowspan="1" colspan="1">
                  <a href="#frame-data" class="xref">Section 7.2.1</a>
</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">HEADERS</td>
                <td class="text-center" rowspan="1" colspan="1">0x1</td>
                <td class="text-left" rowspan="1" colspan="1">
                  <a href="#frame-headers" class="xref">Section 7.2.2</a>
</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Reserved</td>
                <td class="text-center" rowspan="1" colspan="1">0x2</td>
                <td class="text-left" rowspan="1" colspan="1">N/A</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">CANCEL_PUSH</td>
                <td class="text-center" rowspan="1" colspan="1">0x3</td>
                <td class="text-left" rowspan="1" colspan="1">
                  <a href="#frame-cancel-push" class="xref">Section 7.2.3</a>
</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">SETTINGS</td>
                <td class="text-center" rowspan="1" colspan="1">0x4</td>
                <td class="text-left" rowspan="1" colspan="1">
                  <a href="#frame-settings" class="xref">Section 7.2.4</a>
</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">PUSH_PROMISE</td>
                <td class="text-center" rowspan="1" colspan="1">0x5</td>
                <td class="text-left" rowspan="1" colspan="1">
                  <a href="#frame-push-promise" class="xref">Section 7.2.5</a>
</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Reserved</td>
                <td class="text-center" rowspan="1" colspan="1">0x6</td>
                <td class="text-left" rowspan="1" colspan="1">N/A</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">GOAWAY</td>
                <td class="text-center" rowspan="1" colspan="1">0x7</td>
                <td class="text-left" rowspan="1" colspan="1">
                  <a href="#frame-goaway" class="xref">Section 7.2.6</a>
</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Reserved</td>
                <td class="text-center" rowspan="1" colspan="1">0x8</td>
                <td class="text-left" rowspan="1" colspan="1">N/A</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Reserved</td>
                <td class="text-center" rowspan="1" colspan="1">0x9</td>
                <td class="text-left" rowspan="1" colspan="1">N/A</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">MAX_PUSH_ID</td>
                <td class="text-center" rowspan="1" colspan="1">0xD</td>
                <td class="text-left" rowspan="1" colspan="1">
                  <a href="#frame-max-push-id" class="xref">Section 7.2.7</a>
</td>
              </tr>
            </tbody>
          </table>
</div>
<p id="section-11.2.1-8">Additionally, each code of the format <code>0x1f * N + 0x21</code> for integer values of N
(that is, <code>0x21</code>, <code>0x40</code>, ..., through <code>0x3FFFFFFFFFFFFFFE</code>) MUST NOT be
assigned by IANA.<a href="#section-11.2.1-8" class="pilcrow">¶</a></p>
</section>
</div>
<div id="iana-settings">
<section id="section-11.2.2">
          <h4 id="name-settings-parameters">
<a href="#section-11.2.2" class="section-number selfRef">11.2.2. </a><a href="#name-settings-parameters" class="section-name selfRef">Settings Parameters</a>
          </h4>
<p id="section-11.2.2-1">This document establishes a registry for HTTP/3 settings.  The "HTTP/3 Settings"
registry governs a 62-bit space.  This registry follows the QUIC registry
policy; see <a href="#iana-policy" class="xref">Section 11.2</a>.  Permanent registrations in this registry are
assigned using the Specification Required policy <span>[<a href="#RFC8126" class="xref">RFC8126</a>]</span>, except for values
between 0x00 and 0x3f (in hexadecimal; inclusive), which are assigned using
Standards Action or IESG Approval as defined in Section 4.9 and 4.10 of
<span>[<a href="#RFC8126" class="xref">RFC8126</a>]</span>.<a href="#section-11.2.2-1" class="pilcrow">¶</a></p>
<p id="section-11.2.2-2">While this registry is separate from the "HTTP/2 Settings" registry defined in
<span>[<a href="#HTTP2" class="xref">HTTP2</a>]</span>, it is preferable that the assignments parallel each other.  If an
entry is present in only one registry, every effort SHOULD be made to avoid
assigning the corresponding value to an unrelated operation.<a href="#section-11.2.2-2" class="pilcrow">¶</a></p>
<p id="section-11.2.2-3">In addition to common fields as described in <a href="#iana-policy" class="xref">Section 11.2</a>, permanent
registrations in this registry MUST include the following fields:<a href="#section-11.2.2-3" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-11.2.2-4">
            <dt id="section-11.2.2-4.1">Setting Name:</dt>
<dd id="section-11.2.2-4.2">
  A symbolic name for the setting.  Specifying a setting name is optional.<a href="#section-11.2.2-4.2" class="pilcrow">¶</a>
</dd>
<dt id="section-11.2.2-4.3">Default:</dt>
<dd id="section-11.2.2-4.4">
  The value of the setting unless otherwise indicated. A default SHOULD be the
most restrictive possible value.<a href="#section-11.2.2-4.4" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-11.2.2-5">The entries in <a href="#iana-setting-table" class="xref">Table 3</a> are registered by this document.<a href="#section-11.2.2-5" class="pilcrow">¶</a></p>
<span id="name-initial-http-3-settings"></span><div id="iana-setting-table">
<table class="center" id="table-3">
            <caption>
<a href="#table-3" class="selfRef">Table 3</a>:
<a href="#name-initial-http-3-settings" class="selfRef">Initial HTTP/3 Settings</a>
            </caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Setting Name</th>
                <th class="text-center" rowspan="1" colspan="1">Value</th>
                <th class="text-left" rowspan="1" colspan="1">Specification</th>
                <th class="text-left" rowspan="1" colspan="1">Default</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Reserved</td>
                <td class="text-center" rowspan="1" colspan="1">0x2</td>
                <td class="text-left" rowspan="1" colspan="1">N/A</td>
                <td class="text-left" rowspan="1" colspan="1">N/A</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Reserved</td>
                <td class="text-center" rowspan="1" colspan="1">0x3</td>
                <td class="text-left" rowspan="1" colspan="1">N/A</td>
                <td class="text-left" rowspan="1" colspan="1">N/A</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Reserved</td>
                <td class="text-center" rowspan="1" colspan="1">0x4</td>
                <td class="text-left" rowspan="1" colspan="1">N/A</td>
                <td class="text-left" rowspan="1" colspan="1">N/A</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Reserved</td>
                <td class="text-center" rowspan="1" colspan="1">0x5</td>
                <td class="text-left" rowspan="1" colspan="1">N/A</td>
                <td class="text-left" rowspan="1" colspan="1">N/A</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">MAX_HEADER_LIST_SIZE</td>
                <td class="text-center" rowspan="1" colspan="1">0x6</td>
                <td class="text-left" rowspan="1" colspan="1">
                  <a href="#settings-parameters" class="xref">Section 7.2.4.1</a>
</td>
                <td class="text-left" rowspan="1" colspan="1">Unlimited</td>
              </tr>
            </tbody>
          </table>
</div>
<p id="section-11.2.2-7">Additionally, each code of the format <code>0x1f * N + 0x21</code> for integer values of N
(that is, <code>0x21</code>, <code>0x40</code>, ..., through <code>0x3FFFFFFFFFFFFFFE</code>) MUST NOT be
assigned by IANA.<a href="#section-11.2.2-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="iana-error-codes">
<section id="section-11.2.3">
          <h4 id="name-error-codes">
<a href="#section-11.2.3" class="section-number selfRef">11.2.3. </a><a href="#name-error-codes" class="section-name selfRef">Error Codes</a>
          </h4>
<p id="section-11.2.3-1">This document establishes a registry for HTTP/3 error codes. The "HTTP/3 Error
Code" registry manages a 62-bit space.  This registry follows the QUIC registry
policy; see <a href="#iana-policy" class="xref">Section 11.2</a>.  Permanent registrations in this registry are
assigned using the Specification Required policy <span>[<a href="#RFC8126" class="xref">RFC8126</a>]</span>, except for values
between 0x00 and 0x3f (in hexadecimal; inclusive), which are assigned using
Standards Action or IESG Approval as defined in Section 4.9 and 4.10 of
<span>[<a href="#RFC8126" class="xref">RFC8126</a>]</span>.<a href="#section-11.2.3-1" class="pilcrow">¶</a></p>
<p id="section-11.2.3-2">Registrations for error codes are required to include a description
of the error code.  An expert reviewer is advised to examine new
registrations for possible duplication with existing error codes.
Use of existing registrations is to be encouraged, but not mandated.<a href="#section-11.2.3-2" class="pilcrow">¶</a></p>
<p id="section-11.2.3-3">In addition to common fields as described in <a href="#iana-policy" class="xref">Section 11.2</a>, permanent
registrations in this registry MUST include the following fields:<a href="#section-11.2.3-3" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-11.2.3-4">
            <dt id="section-11.2.3-4.1">Name:</dt>
<dd id="section-11.2.3-4.2">
  A name for the error code.  Specifying an error code name is optional.<a href="#section-11.2.3-4.2" class="pilcrow">¶</a>
</dd>
<dt id="section-11.2.3-4.3">Description:</dt>
<dd id="section-11.2.3-4.4">
  A brief description of the error code semantics.<a href="#section-11.2.3-4.4" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-11.2.3-5">The entries in the <a href="#iana-error-table" class="xref">Table 4</a> are registered by this document.<a href="#section-11.2.3-5" class="pilcrow">¶</a></p>
<span id="name-initial-http-3-error-codes"></span><div id="iana-error-table">
<table class="center" id="table-4">
            <caption>
<a href="#table-4" class="selfRef">Table 4</a>:
<a href="#name-initial-http-3-error-codes" class="selfRef">Initial HTTP/3 Error Codes</a>
            </caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Name</th>
                <th class="text-left" rowspan="1" colspan="1">Value</th>
                <th class="text-left" rowspan="1" colspan="1">Description</th>
                <th class="text-left" rowspan="1" colspan="1">Specification</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">H3_NO_ERROR</td>
                <td class="text-left" rowspan="1" colspan="1">0x0100</td>
                <td class="text-left" rowspan="1" colspan="1">No error</td>
                <td class="text-left" rowspan="1" colspan="1">
                  <a href="#http-error-codes" class="xref">Section 8.1</a>
</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">H3_GENERAL_PROTOCOL_ERROR</td>
                <td class="text-left" rowspan="1" colspan="1">0x0101</td>
                <td class="text-left" rowspan="1" colspan="1">General protocol error</td>
                <td class="text-left" rowspan="1" colspan="1">
                  <a href="#http-error-codes" class="xref">Section 8.1</a>
</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">H3_INTERNAL_ERROR</td>
                <td class="text-left" rowspan="1" colspan="1">0x0102</td>
                <td class="text-left" rowspan="1" colspan="1">Internal error</td>
                <td class="text-left" rowspan="1" colspan="1">
                  <a href="#http-error-codes" class="xref">Section 8.1</a>
</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">H3_STREAM_CREATION_ERROR</td>
                <td class="text-left" rowspan="1" colspan="1">0x0103</td>
                <td class="text-left" rowspan="1" colspan="1">Stream creation error</td>
                <td class="text-left" rowspan="1" colspan="1">
                  <a href="#http-error-codes" class="xref">Section 8.1</a>
</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">H3_CLOSED_CRITICAL_STREAM</td>
                <td class="text-left" rowspan="1" colspan="1">0x0104</td>
                <td class="text-left" rowspan="1" colspan="1">Critical stream was closed</td>
                <td class="text-left" rowspan="1" colspan="1">
                  <a href="#http-error-codes" class="xref">Section 8.1</a>
</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">H3_FRAME_UNEXPECTED</td>
                <td class="text-left" rowspan="1" colspan="1">0x0105</td>
                <td class="text-left" rowspan="1" colspan="1">Frame not permitted in the current state</td>
                <td class="text-left" rowspan="1" colspan="1">
                  <a href="#http-error-codes" class="xref">Section 8.1</a>
</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">H3_FRAME_ERROR</td>
                <td class="text-left" rowspan="1" colspan="1">0x0106</td>
                <td class="text-left" rowspan="1" colspan="1">Frame violated layout or size rules</td>
                <td class="text-left" rowspan="1" colspan="1">
                  <a href="#http-error-codes" class="xref">Section 8.1</a>
</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">H3_EXCESSIVE_LOAD</td>
                <td class="text-left" rowspan="1" colspan="1">0x0107</td>
                <td class="text-left" rowspan="1" colspan="1">Peer generating excessive load</td>
                <td class="text-left" rowspan="1" colspan="1">
                  <a href="#http-error-codes" class="xref">Section 8.1</a>
</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">H3_ID_ERROR</td>
                <td class="text-left" rowspan="1" colspan="1">0x0108</td>
                <td class="text-left" rowspan="1" colspan="1">An identifier was used incorrectly</td>
                <td class="text-left" rowspan="1" colspan="1">
                  <a href="#http-error-codes" class="xref">Section 8.1</a>
</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">H3_SETTINGS_ERROR</td>
                <td class="text-left" rowspan="1" colspan="1">0x0109</td>
                <td class="text-left" rowspan="1" colspan="1">SETTINGS frame contained invalid values</td>
                <td class="text-left" rowspan="1" colspan="1">
                  <a href="#http-error-codes" class="xref">Section 8.1</a>
</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">H3_MISSING_SETTINGS</td>
                <td class="text-left" rowspan="1" colspan="1">0x010A</td>
                <td class="text-left" rowspan="1" colspan="1">No SETTINGS frame received</td>
                <td class="text-left" rowspan="1" colspan="1">
                  <a href="#http-error-codes" class="xref">Section 8.1</a>
</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">H3_REQUEST_REJECTED</td>
                <td class="text-left" rowspan="1" colspan="1">0x010B</td>
                <td class="text-left" rowspan="1" colspan="1">Request not processed</td>
                <td class="text-left" rowspan="1" colspan="1">
                  <a href="#http-error-codes" class="xref">Section 8.1</a>
</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">H3_REQUEST_CANCELLED</td>
                <td class="text-left" rowspan="1" colspan="1">0x010C</td>
                <td class="text-left" rowspan="1" colspan="1">Data no longer needed</td>
                <td class="text-left" rowspan="1" colspan="1">
                  <a href="#http-error-codes" class="xref">Section 8.1</a>
</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">H3_REQUEST_INCOMPLETE</td>
                <td class="text-left" rowspan="1" colspan="1">0x010D</td>
                <td class="text-left" rowspan="1" colspan="1">Stream terminated early</td>
                <td class="text-left" rowspan="1" colspan="1">
                  <a href="#http-error-codes" class="xref">Section 8.1</a>
</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">H3_CONNECT_ERROR</td>
                <td class="text-left" rowspan="1" colspan="1">0x010F</td>
                <td class="text-left" rowspan="1" colspan="1">TCP reset or error on CONNECT request</td>
                <td class="text-left" rowspan="1" colspan="1">
                  <a href="#http-error-codes" class="xref">Section 8.1</a>
</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">H3_VERSION_FALLBACK</td>
                <td class="text-left" rowspan="1" colspan="1">0x0110</td>
                <td class="text-left" rowspan="1" colspan="1">Retry over HTTP/1.1</td>
                <td class="text-left" rowspan="1" colspan="1">
                  <a href="#http-error-codes" class="xref">Section 8.1</a>
</td>
              </tr>
            </tbody>
          </table>
</div>
<p id="section-11.2.3-7">Additionally, each code of the format <code>0x1f * N + 0x21</code> for integer values of N
(that is, <code>0x21</code>, <code>0x40</code>, ..., through <code>0x3FFFFFFFFFFFFFFE</code>) MUST NOT be
assigned by IANA.<a href="#section-11.2.3-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="iana-stream-types">
<section id="section-11.2.4">
          <h4 id="name-stream-types">
<a href="#section-11.2.4" class="section-number selfRef">11.2.4. </a><a href="#name-stream-types" class="section-name selfRef">Stream Types</a>
          </h4>
<p id="section-11.2.4-1">This document establishes a registry for HTTP/3 unidirectional stream types. The
"HTTP/3 Stream Type" registry governs a 62-bit space.  This registry follows the
QUIC registry policy; see <a href="#iana-policy" class="xref">Section 11.2</a>.  Permanent registrations in this
registry are assigned using the Specification Required policy <span>[<a href="#RFC8126" class="xref">RFC8126</a>]</span>,
except for values between 0x00 and 0x3f (in hexadecimal; inclusive), which are
assigned using Standards Action or IESG Approval as defined in Section 4.9 and
4.10 of <span>[<a href="#RFC8126" class="xref">RFC8126</a>]</span>.<a href="#section-11.2.4-1" class="pilcrow">¶</a></p>
<p id="section-11.2.4-2">In addition to common fields as described in <a href="#iana-policy" class="xref">Section 11.2</a>, permanent
registrations in this registry MUST include the following fields:<a href="#section-11.2.4-2" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-11.2.4-3">
            <dt id="section-11.2.4-3.1">Stream Type:</dt>
<dd id="section-11.2.4-3.2">
  A name or label for the stream type.<a href="#section-11.2.4-3.2" class="pilcrow">¶</a>
</dd>
<dt id="section-11.2.4-3.3">Sender:</dt>
<dd id="section-11.2.4-3.4">
  Which endpoint on a connection may initiate a stream of this type. Values are
"Client", "Server", or "Both".<a href="#section-11.2.4-3.4" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-11.2.4-4">Specifications for permanent registrations MUST include a description of the
stream type, including the layout semantics of the stream contents.<a href="#section-11.2.4-4" class="pilcrow">¶</a></p>
<p id="section-11.2.4-5">The entries in the following table are registered by this document.<a href="#section-11.2.4-5" class="pilcrow">¶</a></p>
<table class="center" id="table-5">
            <caption><a href="#table-5" class="selfRef">Table 5</a></caption>
<thead>
              <tr>
                <th class="text-left" rowspan="1" colspan="1">Stream Type</th>
                <th class="text-center" rowspan="1" colspan="1">Value</th>
                <th class="text-left" rowspan="1" colspan="1">Specification</th>
                <th class="text-left" rowspan="1" colspan="1">Sender</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Control Stream</td>
                <td class="text-center" rowspan="1" colspan="1">0x00</td>
                <td class="text-left" rowspan="1" colspan="1">
                  <a href="#control-streams" class="xref">Section 6.2.1</a>
</td>
                <td class="text-left" rowspan="1" colspan="1">Both</td>
              </tr>
              <tr>
                <td class="text-left" rowspan="1" colspan="1">Push Stream</td>
                <td class="text-center" rowspan="1" colspan="1">0x01</td>
                <td class="text-left" rowspan="1" colspan="1">
                  <a href="#server-push" class="xref">Section 4.4</a>
</td>
                <td class="text-left" rowspan="1" colspan="1">Server</td>
              </tr>
            </tbody>
          </table>
<p id="section-11.2.4-7">Additionally, each code of the format <code>0x1f * N + 0x21</code> for integer values of N
(that is, <code>0x21</code>, <code>0x40</code>, ..., through <code>0x3FFFFFFFFFFFFFFE</code>) MUST NOT be
assigned by IANA.<a href="#section-11.2.4-7" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
</section>
</div>
<section id="section-12">
      <h2 id="name-references">
<a href="#section-12" class="section-number selfRef">12. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-12.1">
        <h3 id="name-normative-references">
<a href="#section-12.1" class="section-number selfRef">12.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="ALTSVC">[ALTSVC]</dt>
<dd>
<span class="refAuthor">Nottingham, M.</span><span class="refAuthor">, McManus, P.</span><span class="refAuthor">, and J. Reschke</span>, <span class="refTitle">"HTTP Alternative Services"</span>, <span class="seriesInfo">RFC 7838</span>, <span class="seriesInfo">DOI 10.17487/RFC7838</span>, <time datetime="2016-04">April 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7838">https://www.rfc-editor.org/info/rfc7838</a>&gt;</span>. </dd>
<dt id="HTTP-REPLAY">[HTTP-REPLAY]</dt>
<dd>
<span class="refAuthor">Thomson, M.</span><span class="refAuthor">, Nottingham, M.</span><span class="refAuthor">, and W. Tarreau</span>, <span class="refTitle">"Using Early Data in HTTP"</span>, <span class="seriesInfo">RFC 8470</span>, <span class="seriesInfo">DOI 10.17487/RFC8470</span>, <time datetime="2018-09">September 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8470">https://www.rfc-editor.org/info/rfc8470</a>&gt;</span>. </dd>
<dt id="HTTP2">[HTTP2]</dt>
<dd>
<span class="refAuthor">Belshe, M.</span><span class="refAuthor">, Peon, R.</span><span class="refAuthor">, and M. Thomson, Ed.</span>, <span class="refTitle">"Hypertext Transfer Protocol Version 2 (HTTP/2)"</span>, <span class="seriesInfo">RFC 7540</span>, <span class="seriesInfo">DOI 10.17487/RFC7540</span>, <time datetime="2015-05">May 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7540">https://www.rfc-editor.org/info/rfc7540</a>&gt;</span>. </dd>
<dt id="QPACK">[QPACK]</dt>
<dd>
<span class="refAuthor">Krasic, C.</span><span class="refAuthor">, Bishop, M.</span><span class="refAuthor">, and A. Frindell, Ed.</span>, <span class="refTitle">"QPACK: Header Compression for HTTP over QUIC"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-quic-qpack-13</span>, <time datetime="2020-02-21">21 February 2020</time>, <span>&lt;<a href="https://tools.ietf.org/html/draft-ietf-quic-qpack-13">https://tools.ietf.org/html/draft-ietf-quic-qpack-13</a>&gt;</span>. </dd>
<dt id="QUIC-TRANSPORT">[QUIC-TRANSPORT]</dt>
<dd>
<span class="refAuthor">Iyengar, J., Ed.</span><span class="refAuthor"> and M. Thomson, Ed.</span>, <span class="refTitle">"QUIC: A UDP-Based Multiplexed and Secure Transport"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-quic-transport-26</span>, <time datetime="2020-02-21">21 February 2020</time>, <span>&lt;<a href="https://tools.ietf.org/html/draft-ietf-quic-transport-26">https://tools.ietf.org/html/draft-ietf-quic-transport-26</a>&gt;</span>. </dd>
<dt id="RFC0793">[RFC0793]</dt>
<dd>
<span class="refAuthor">Postel, J.</span>, <span class="refTitle">"Transmission Control Protocol"</span>, <span class="seriesInfo">STD 7</span>, <span class="seriesInfo">RFC 793</span>, <span class="seriesInfo">DOI 10.17487/RFC0793</span>, <time datetime="1981-09">September 1981</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc793">https://www.rfc-editor.org/info/rfc793</a>&gt;</span>. </dd>
<dt id="RFC2119">[RFC2119]</dt>
<dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dt id="RFC3986">[RFC3986]</dt>
<dd>
<span class="refAuthor">Berners-Lee, T.</span><span class="refAuthor">, Fielding, R.</span><span class="refAuthor">, and L. Masinter</span>, <span class="refTitle">"Uniform Resource Identifier (URI): Generic Syntax"</span>, <span class="seriesInfo">STD 66</span>, <span class="seriesInfo">RFC 3986</span>, <span class="seriesInfo">DOI 10.17487/RFC3986</span>, <time datetime="2005-01">January 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3986">https://www.rfc-editor.org/info/rfc3986</a>&gt;</span>. </dd>
<dt id="RFC5234">[RFC5234]</dt>
<dd>
<span class="refAuthor">Crocker, D., Ed.</span><span class="refAuthor"> and P. Overell</span>, <span class="refTitle">"Augmented BNF for Syntax Specifications: ABNF"</span>, <span class="seriesInfo">STD 68</span>, <span class="seriesInfo">RFC 5234</span>, <span class="seriesInfo">DOI 10.17487/RFC5234</span>, <time datetime="2008-01">January 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5234">https://www.rfc-editor.org/info/rfc5234</a>&gt;</span>. </dd>
<dt id="RFC6066">[RFC6066]</dt>
<dd>
<span class="refAuthor">Eastlake 3rd, D.</span>, <span class="refTitle">"Transport Layer Security (TLS) Extensions: Extension Definitions"</span>, <span class="seriesInfo">RFC 6066</span>, <span class="seriesInfo">DOI 10.17487/RFC6066</span>, <time datetime="2011-01">January 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6066">https://www.rfc-editor.org/info/rfc6066</a>&gt;</span>. </dd>
<dt id="RFC6265">[RFC6265]</dt>
<dd>
<span class="refAuthor">Barth, A.</span>, <span class="refTitle">"HTTP State Management Mechanism"</span>, <span class="seriesInfo">RFC 6265</span>, <span class="seriesInfo">DOI 10.17487/RFC6265</span>, <time datetime="2011-04">April 2011</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6265">https://www.rfc-editor.org/info/rfc6265</a>&gt;</span>. </dd>
<dt id="RFC7230">[RFC7230]</dt>
<dd>
<span class="refAuthor">Fielding, R., Ed.</span><span class="refAuthor"> and J. Reschke, Ed.</span>, <span class="refTitle">"Hypertext Transfer Protocol (HTTP/1.1): Message Syntax and Routing"</span>, <span class="seriesInfo">RFC 7230</span>, <span class="seriesInfo">DOI 10.17487/RFC7230</span>, <time datetime="2014-06">June 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7230">https://www.rfc-editor.org/info/rfc7230</a>&gt;</span>. </dd>
<dt id="RFC7231">[RFC7231]</dt>
<dd>
<span class="refAuthor">Fielding, R., Ed.</span><span class="refAuthor"> and J. Reschke, Ed.</span>, <span class="refTitle">"Hypertext Transfer Protocol (HTTP/1.1): Semantics and Content"</span>, <span class="seriesInfo">RFC 7231</span>, <span class="seriesInfo">DOI 10.17487/RFC7231</span>, <time datetime="2014-06">June 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7231">https://www.rfc-editor.org/info/rfc7231</a>&gt;</span>. </dd>
<dt id="RFC7838">[RFC7838]</dt>
<dd>
<span class="refAuthor">Nottingham, M.</span><span class="refAuthor">, McManus, P.</span><span class="refAuthor">, and J. Reschke</span>, <span class="refTitle">"HTTP Alternative Services"</span>, <span class="seriesInfo">RFC 7838</span>, <span class="seriesInfo">DOI 10.17487/RFC7838</span>, <time datetime="2016-04">April 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7838">https://www.rfc-editor.org/info/rfc7838</a>&gt;</span>. </dd>
<dt id="RFC8126">[RFC8126]</dt>
<dd>
<span class="refAuthor">Cotton, M.</span><span class="refAuthor">, Leiba, B.</span><span class="refAuthor">, and T. Narten</span>, <span class="refTitle">"Guidelines for Writing an IANA Considerations Section in RFCs"</span>, <span class="seriesInfo">BCP 26</span>, <span class="seriesInfo">RFC 8126</span>, <span class="seriesInfo">DOI 10.17487/RFC8126</span>, <time datetime="2017-06">June 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8126">https://www.rfc-editor.org/info/rfc8126</a>&gt;</span>. </dd>
<dt id="RFC8164">[RFC8164]</dt>
<dd>
<span class="refAuthor">Nottingham, M.</span><span class="refAuthor"> and M. Thomson</span>, <span class="refTitle">"Opportunistic Security for HTTP/2"</span>, <span class="seriesInfo">RFC 8164</span>, <span class="seriesInfo">DOI 10.17487/RFC8164</span>, <time datetime="2017-05">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8164">https://www.rfc-editor.org/info/rfc8164</a>&gt;</span>. </dd>
<dt id="RFC8174">[RFC8174]</dt>
<dd>
<span class="refAuthor">Leiba, B.</span>, <span class="refTitle">"Ambiguity of Uppercase vs Lowercase in RFC 2119 Key Words"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 8174</span>, <span class="seriesInfo">DOI 10.17487/RFC8174</span>, <time datetime="2017-05">May 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8174">https://www.rfc-editor.org/info/rfc8174</a>&gt;</span>. </dd>
</dl>
</section>
<section id="section-12.2">
        <h3 id="name-informative-references">
<a href="#section-12.2" class="section-number selfRef">12.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="HPACK">[HPACK]</dt>
<dd>
<span class="refAuthor">Peon, R.</span><span class="refAuthor"> and H. Ruellan</span>, <span class="refTitle">"HPACK: Header Compression for HTTP/2"</span>, <span class="seriesInfo">RFC 7541</span>, <span class="seriesInfo">DOI 10.17487/RFC7541</span>, <time datetime="2015-05">May 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7541">https://www.rfc-editor.org/info/rfc7541</a>&gt;</span>. </dd>
<dt id="RFC6585">[RFC6585]</dt>
<dd>
<span class="refAuthor">Nottingham, M.</span><span class="refAuthor"> and R. Fielding</span>, <span class="refTitle">"Additional HTTP Status Codes"</span>, <span class="seriesInfo">RFC 6585</span>, <span class="seriesInfo">DOI 10.17487/RFC6585</span>, <time datetime="2012-04">April 2012</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc6585">https://www.rfc-editor.org/info/rfc6585</a>&gt;</span>. </dd>
<dt id="RFC7301">[RFC7301]</dt>
<dd>
<span class="refAuthor">Friedl, S.</span><span class="refAuthor">, Popov, A.</span><span class="refAuthor">, Langley, A.</span><span class="refAuthor">, and E. Stephan</span>, <span class="refTitle">"Transport Layer Security (TLS) Application-Layer Protocol Negotiation Extension"</span>, <span class="seriesInfo">RFC 7301</span>, <span class="seriesInfo">DOI 10.17487/RFC7301</span>, <time datetime="2014-07">July 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7301">https://www.rfc-editor.org/info/rfc7301</a>&gt;</span>. </dd>
<dt id="RFC7413">[RFC7413]</dt>
<dd>
<span class="refAuthor">Cheng, Y.</span><span class="refAuthor">, Chu, J.</span><span class="refAuthor">, Radhakrishnan, S.</span><span class="refAuthor">, and A. Jain</span>, <span class="refTitle">"TCP Fast Open"</span>, <span class="seriesInfo">RFC 7413</span>, <span class="seriesInfo">DOI 10.17487/RFC7413</span>, <time datetime="2014-12">December 2014</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7413">https://www.rfc-editor.org/info/rfc7413</a>&gt;</span>. </dd>
</dl>
</section>
</section>
<div id="h2-considerations">
<section id="section-appendix.a">
      <h2 id="name-considerations-for-transiti">
<a href="#section-appendix.a" class="section-number selfRef">Appendix A. </a><a href="#name-considerations-for-transiti" class="section-name selfRef">Considerations for Transitioning from HTTP/2</a>
      </h2>
<p id="section-appendix.a-1">HTTP/3 is strongly informed by HTTP/2, and bears many similarities.  This
section describes the approach taken to design HTTP/3, points out important
differences from HTTP/2, and describes how to map HTTP/2 extensions into HTTP/3.<a href="#section-appendix.a-1" class="pilcrow">¶</a></p>
<p id="section-appendix.a-2">HTTP/3 begins from the premise that similarity to HTTP/2 is preferable, but not
a hard requirement.  HTTP/3 departs from HTTP/2 where QUIC differs from TCP,
either to take advantage of QUIC features (like streams) or to accommodate
important shortcomings (such as a lack of total ordering). These differences
make HTTP/3 similar to HTTP/2 in key aspects, such as the relationship of
requests and responses to streams. However, the details of the HTTP/3 design are
substantially different than HTTP/2.<a href="#section-appendix.a-2" class="pilcrow">¶</a></p>
<p id="section-appendix.a-3">These departures are noted in this section.<a href="#section-appendix.a-3" class="pilcrow">¶</a></p>
<div id="h2-streams">
<section id="section-a.1">
        <h2 id="name-streams">
<a href="#section-a.1" class="section-number selfRef">A.1. </a><a href="#name-streams" class="section-name selfRef">Streams</a>
        </h2>
<p id="section-a.1-1">HTTP/3 permits use of a larger number of streams (2^62-1) than HTTP/2.  The
considerations about exhaustion of stream identifier space apply, though the
space is significantly larger such that it is likely that other limits in QUIC
are reached first, such as the limit on the connection flow control window.<a href="#section-a.1-1" class="pilcrow">¶</a></p>
<p id="section-a.1-2">In contrast to HTTP/2, stream concurrency in HTTP/3 is managed by QUIC.  QUIC
considers a stream closed when all data has been received and sent data has been
acknowledged by the peer.  HTTP/2 considers a stream closed when the frame
containing the END_STREAM bit has been committed to the transport. As a result,
the stream for an equivalent exchange could remain "active" for a longer period
of time.  HTTP/3 servers might choose to permit a larger number of concurrent
client-initiated bidirectional streams to achieve equivalent concurrency to
HTTP/2, depending on the expected usage patterns.<a href="#section-a.1-2" class="pilcrow">¶</a></p>
<p id="section-a.1-3">Due to the presence of other unidirectional stream types, HTTP/3 does not rely
exclusively on the number of concurrent unidirectional streams to control the
number of concurrent in-flight pushes.  Instead, HTTP/3 clients use the
MAX_PUSH_ID frame to control the number of pushes received from an HTTP/3
server.<a href="#section-a.1-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="h2-frames">
<section id="section-a.2">
        <h2 id="name-http-frame-types">
<a href="#section-a.2" class="section-number selfRef">A.2. </a><a href="#name-http-frame-types" class="section-name selfRef">HTTP Frame Types</a>
        </h2>
<p id="section-a.2-1">Many framing concepts from HTTP/2 can be elided on QUIC, because the transport
deals with them. Because frames are already on a stream, they can omit the
stream number. Because frames do not block multiplexing (QUIC's multiplexing
occurs below this layer), the support for variable-maximum-length packets can be
removed. Because stream termination is handled by QUIC, an END_STREAM flag is
not required.  This permits the removal of the Flags field from the generic
frame layout.<a href="#section-a.2-1" class="pilcrow">¶</a></p>
<p id="section-a.2-2">Frame payloads are largely drawn from <span>[<a href="#HTTP2" class="xref">HTTP2</a>]</span>. However, QUIC includes many
features (e.g., flow control) which are also present in HTTP/2. In these cases,
the HTTP mapping does not re-implement them. As a result, several HTTP/2 frame
types are not required in HTTP/3. Where an HTTP/2-defined frame is no longer
used, the frame ID has been reserved in order to maximize portability between
HTTP/2 and HTTP/3 implementations. However, even equivalent frames between the
two mappings are not identical.<a href="#section-a.2-2" class="pilcrow">¶</a></p>
<p id="section-a.2-3">Many of the differences arise from the fact that HTTP/2 provides an absolute
ordering between frames across all streams, while QUIC provides this guarantee
on each stream only.  As a result, if a frame type makes assumptions that frames
from different streams will still be received in the order sent, HTTP/3 will
break them.<a href="#section-a.2-3" class="pilcrow">¶</a></p>
<p id="section-a.2-4">Some examples of feature adaptations are described below, as well as general
guidance to extension frame implementors converting an HTTP/2 extension to
HTTP/3.<a href="#section-a.2-4" class="pilcrow">¶</a></p>
<div id="h2-diff-priority">
<section id="section-a.2.1">
          <h3 id="name-prioritization-differences">
<a href="#section-a.2.1" class="section-number selfRef">A.2.1. </a><a href="#name-prioritization-differences" class="section-name selfRef">Prioritization Differences</a>
          </h3>
<p id="section-a.2.1-1">HTTP/2 specifies priority assignments in PRIORITY frames and (optionally) in
HEADERS frames. HTTP/3 does not provide a means of signaling priority.<a href="#section-a.2.1-1" class="pilcrow">¶</a></p>
<p id="section-a.2.1-2">Note that while there is no explicit signaling for priority, this does not mean
that prioritization is not important for achieving good performance.<a href="#section-a.2.1-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="header-compression-differences">
<section id="section-a.2.2">
          <h3 id="name-header-compression-differen">
<a href="#section-a.2.2" class="section-number selfRef">A.2.2. </a><a href="#name-header-compression-differen" class="section-name selfRef">Header Compression Differences</a>
          </h3>
<p id="section-a.2.2-1">HPACK was designed with the assumption of in-order delivery. A sequence of
encoded header blocks must arrive (and be decoded) at an endpoint in the same
order in which they were encoded. This ensures that the dynamic state at the two
endpoints remains in sync.<a href="#section-a.2.2-1" class="pilcrow">¶</a></p>
<p id="section-a.2.2-2">Because this total ordering is not provided by QUIC, HTTP/3 uses a modified
version of HPACK, called QPACK.  QPACK uses a single unidirectional stream to
make all modifications to the dynamic table, ensuring a total order of updates.
All frames which contain encoded headers merely reference the table state at a
given time without modifying it.<a href="#section-a.2.2-2" class="pilcrow">¶</a></p>
<p id="section-a.2.2-3"><span>[<a href="#QPACK" class="xref">QPACK</a>]</span> provides additional details.<a href="#section-a.2.2-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="guidance-for-new-frame-type-definitions">
<section id="section-a.2.3">
          <h3 id="name-guidance-for-new-frame-type">
<a href="#section-a.2.3" class="section-number selfRef">A.2.3. </a><a href="#name-guidance-for-new-frame-type" class="section-name selfRef">Guidance for New Frame Type Definitions</a>
          </h3>
<p id="section-a.2.3-1">Frame type definitions in HTTP/3 often use the QUIC variable-length integer
encoding.  In particular, Stream IDs use this encoding, which allows for a
larger range of possible values than the encoding used in HTTP/2.  Some frames
in HTTP/3 use an identifier rather than a Stream ID (e.g., Push
IDs). Redefinition of the encoding of extension frame types might be necessary
if the encoding includes a Stream ID.<a href="#section-a.2.3-1" class="pilcrow">¶</a></p>
<p id="section-a.2.3-2">Because the Flags field is not present in generic HTTP/3 frames, those frames
which depend on the presence of flags need to allocate space for flags as part
of their frame payload.<a href="#section-a.2.3-2" class="pilcrow">¶</a></p>
<p id="section-a.2.3-3">Other than this issue, frame type HTTP/2 extensions are typically portable to
QUIC simply by replacing Stream 0 in HTTP/2 with a control stream in HTTP/3.
HTTP/3 extensions will not assume ordering, but would not be harmed by ordering,
and would be portable to HTTP/2 in the same manner.<a href="#section-a.2.3-3" class="pilcrow">¶</a></p>
</section>
</div>
<div id="mapping-between-http2-and-http3-frame-types">
<section id="section-a.2.4">
          <h3 id="name-mapping-between-http-2-and-">
<a href="#section-a.2.4" class="section-number selfRef">A.2.4. </a><a href="#name-mapping-between-http-2-and-" class="section-name selfRef">Mapping Between HTTP/2 and HTTP/3 Frame Types</a>
          </h3>
<dl class="dlParallel" id="section-a.2.4-1">
            <dt id="section-a.2.4-1.1">DATA (0x0):</dt>
<dd id="section-a.2.4-1.2">
  Padding is not defined in HTTP/3 frames.  See <a href="#frame-data" class="xref">Section 7.2.1</a>.<a href="#section-a.2.4-1.2" class="pilcrow">¶</a>
</dd>
<dt id="section-a.2.4-1.3">HEADERS (0x1):</dt>
<dd id="section-a.2.4-1.4">
  The PRIORITY region of HEADERS is not defined in HTTP/3 frames. Padding is not
defined in HTTP/3 frames.  See <a href="#frame-headers" class="xref">Section 7.2.2</a>.<a href="#section-a.2.4-1.4" class="pilcrow">¶</a>
</dd>
<dt id="section-a.2.4-1.5">PRIORITY (0x2):</dt>
<dd id="section-a.2.4-1.6">
  As described in <a href="#h2-diff-priority" class="xref">Appendix A.2.1</a>, HTTP/3 does not provide a means of
signaling priority.<a href="#section-a.2.4-1.6" class="pilcrow">¶</a>
</dd>
<dt id="section-a.2.4-1.7">RST_STREAM (0x3):</dt>
<dd id="section-a.2.4-1.8">
  RST_STREAM frames do not exist, since QUIC provides stream lifecycle
management.  The same code point is used for the CANCEL_PUSH frame
(<a href="#frame-cancel-push" class="xref">Section 7.2.3</a>).<a href="#section-a.2.4-1.8" class="pilcrow">¶</a>
</dd>
<dt id="section-a.2.4-1.9">SETTINGS (0x4):</dt>
<dd id="section-a.2.4-1.10">
  SETTINGS frames are sent only at the beginning of the connection.  See
<a href="#frame-settings" class="xref">Section 7.2.4</a> and <a href="#h2-settings" class="xref">Appendix A.3</a>.<a href="#section-a.2.4-1.10" class="pilcrow">¶</a>
</dd>
<dt id="section-a.2.4-1.11">PUSH_PROMISE (0x5):</dt>
<dd id="section-a.2.4-1.12">
  The PUSH_PROMISE does not reference a stream; instead the push stream
references the PUSH_PROMISE frame using a Push ID.  See
<a href="#frame-push-promise" class="xref">Section 7.2.5</a>.<a href="#section-a.2.4-1.12" class="pilcrow">¶</a>
</dd>
<dt id="section-a.2.4-1.13">PING (0x6):</dt>
<dd id="section-a.2.4-1.14">
  PING frames do not exist, since QUIC provides equivalent functionality.<a href="#section-a.2.4-1.14" class="pilcrow">¶</a>
</dd>
<dt id="section-a.2.4-1.15">GOAWAY (0x7):</dt>
<dd id="section-a.2.4-1.16">
  GOAWAY is sent only from server to client and does not contain an error code.
See <a href="#frame-goaway" class="xref">Section 7.2.6</a>.<a href="#section-a.2.4-1.16" class="pilcrow">¶</a>
</dd>
<dt id="section-a.2.4-1.17">WINDOW_UPDATE (0x8):</dt>
<dd id="section-a.2.4-1.18">
  WINDOW_UPDATE frames do not exist, since QUIC provides flow control.<a href="#section-a.2.4-1.18" class="pilcrow">¶</a>
</dd>
<dt id="section-a.2.4-1.19">CONTINUATION (0x9):</dt>
<dd id="section-a.2.4-1.20">
  CONTINUATION frames do not exist; instead, larger HEADERS/PUSH_PROMISE
frames than HTTP/2 are permitted.<a href="#section-a.2.4-1.20" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-a.2.4-2">Frame types defined by extensions to HTTP/2 need to be separately registered for
HTTP/3 if still applicable.  The IDs of frames defined in <span>[<a href="#HTTP2" class="xref">HTTP2</a>]</span> have been
reserved for simplicity.  Note that the frame type space in HTTP/3 is
substantially larger (62 bits versus 8 bits), so many HTTP/3 frame types have no
equivalent HTTP/2 code points.  See <a href="#iana-frames" class="xref">Section 11.2.1</a>.<a href="#section-a.2.4-2" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="h2-settings">
<section id="section-a.3">
        <h2 id="name-http-2-settings-parameters">
<a href="#section-a.3" class="section-number selfRef">A.3. </a><a href="#name-http-2-settings-parameters" class="section-name selfRef">HTTP/2 SETTINGS Parameters</a>
        </h2>
<p id="section-a.3-1">An important difference from HTTP/2 is that settings are sent once, as the first
frame of the control stream, and thereafter cannot change.  This eliminates many
corner cases around synchronization of changes.<a href="#section-a.3-1" class="pilcrow">¶</a></p>
<p id="section-a.3-2">Some transport-level options that HTTP/2 specifies via the SETTINGS frame are
superseded by QUIC transport parameters in HTTP/3. The HTTP-level options that
are retained in HTTP/3 have the same value as in HTTP/2.<a href="#section-a.3-2" class="pilcrow">¶</a></p>
<p id="section-a.3-3">Below is a listing of how each HTTP/2 SETTINGS parameter is mapped:<a href="#section-a.3-3" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-a.3-4">
          <dt id="section-a.3-4.1">SETTINGS_HEADER_TABLE_SIZE:</dt>
<dd id="section-a.3-4.2">
  See <span>[<a href="#QPACK" class="xref">QPACK</a>]</span>.<a href="#section-a.3-4.2" class="pilcrow">¶</a>
</dd>
<dt id="section-a.3-4.3">SETTINGS_ENABLE_PUSH:</dt>
<dd id="section-a.3-4.4">
  This is removed in favor of the MAX_PUSH_ID which provides a more granular
control over server push.<a href="#section-a.3-4.4" class="pilcrow">¶</a>
</dd>
<dt id="section-a.3-4.5">SETTINGS_MAX_CONCURRENT_STREAMS:</dt>
<dd id="section-a.3-4.6">
  QUIC controls the largest open Stream ID as part of its flow control logic.
Specifying SETTINGS_MAX_CONCURRENT_STREAMS in the SETTINGS frame is an error.<a href="#section-a.3-4.6" class="pilcrow">¶</a>
</dd>
<dt id="section-a.3-4.7">SETTINGS_INITIAL_WINDOW_SIZE:</dt>
<dd id="section-a.3-4.8">
  QUIC requires both stream and connection flow control window sizes to be
specified in the initial transport handshake.  Specifying
SETTINGS_INITIAL_WINDOW_SIZE in the SETTINGS frame is an error.<a href="#section-a.3-4.8" class="pilcrow">¶</a>
</dd>
<dt id="section-a.3-4.9">SETTINGS_MAX_FRAME_SIZE:</dt>
<dd id="section-a.3-4.10">
  This setting has no equivalent in HTTP/3.  Specifying it in the SETTINGS frame
is an error.<a href="#section-a.3-4.10" class="pilcrow">¶</a>
</dd>
<dt id="section-a.3-4.11">SETTINGS_MAX_HEADER_LIST_SIZE:</dt>
<dd id="section-a.3-4.12">
  See <a href="#settings-parameters" class="xref">Section 7.2.4.1</a>.<a href="#section-a.3-4.12" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-a.3-5">In HTTP/3, setting values are variable-length integers (6, 14, 30, or 62 bits
long) rather than fixed-length 32-bit fields as in HTTP/2.  This will often
produce a shorter encoding, but can produce a longer encoding for settings which
use the full 32-bit space.  Settings ported from HTTP/2 might choose to redefine
their value to limit it to 30 bits for more efficient encoding, or to make use
of the 62-bit space if more than 30 bits are required.<a href="#section-a.3-5" class="pilcrow">¶</a></p>
<p id="section-a.3-6">Settings need to be defined separately for HTTP/2 and HTTP/3. The IDs of
settings defined in <span>[<a href="#HTTP2" class="xref">HTTP2</a>]</span> have been reserved for simplicity.  Note that
the settings identifier space in HTTP/3 is substantially larger (62 bits versus
16 bits), so many HTTP/3 settings have no equivalent HTTP/2 code point. See
<a href="#iana-settings" class="xref">Section 11.2.2</a>.<a href="#section-a.3-6" class="pilcrow">¶</a></p>
<p id="section-a.3-7">As QUIC streams might arrive out-of-order, endpoints are advised to not wait for
the peers' settings to arrive before responding to other streams.  See
<a href="#settings-initialization" class="xref">Section 7.2.4.2</a>.<a href="#section-a.3-7" class="pilcrow">¶</a></p>
</section>
</div>
<div id="http2-error-codes">
<section id="section-a.4">
        <h2 id="name-http-2-error-codes">
<a href="#section-a.4" class="section-number selfRef">A.4. </a><a href="#name-http-2-error-codes" class="section-name selfRef">HTTP/2 Error Codes</a>
        </h2>
<p id="section-a.4-1">QUIC has the same concepts of "stream" and "connection" errors that HTTP/2
provides. However, there is no direct portability of HTTP/2 error codes to
HTTP/3 error codes; the values are shifted in order to prevent accidental
or implicit conversion.<a href="#section-a.4-1" class="pilcrow">¶</a></p>
<p id="section-a.4-2">The HTTP/2 error codes defined in Section 7 of <span>[<a href="#HTTP2" class="xref">HTTP2</a>]</span> logically map to
the HTTP/3 error codes as follows:<a href="#section-a.4-2" class="pilcrow">¶</a></p>
<dl class="dlParallel" id="section-a.4-3">
          <dt id="section-a.4-3.1">NO_ERROR (0x0):</dt>
<dd id="section-a.4-3.2">
  H3_NO_ERROR in <a href="#http-error-codes" class="xref">Section 8.1</a>.<a href="#section-a.4-3.2" class="pilcrow">¶</a>
</dd>
<dt id="section-a.4-3.3">PROTOCOL_ERROR (0x1):</dt>
<dd id="section-a.4-3.4">
  This is mapped to H3_GENERAL_PROTOCOL_ERROR except in cases where more
specific error codes have been defined. This includes H3_FRAME_UNEXPECTED
and H3_CLOSED_CRITICAL_STREAM defined in <a href="#http-error-codes" class="xref">Section 8.1</a>.<a href="#section-a.4-3.4" class="pilcrow">¶</a>
</dd>
<dt id="section-a.4-3.5">INTERNAL_ERROR (0x2):</dt>
<dd id="section-a.4-3.6">
  H3_INTERNAL_ERROR in <a href="#http-error-codes" class="xref">Section 8.1</a>.<a href="#section-a.4-3.6" class="pilcrow">¶</a>
</dd>
<dt id="section-a.4-3.7">FLOW_CONTROL_ERROR (0x3):</dt>
<dd id="section-a.4-3.8">
  Not applicable, since QUIC handles flow control.<a href="#section-a.4-3.8" class="pilcrow">¶</a>
</dd>
<dt id="section-a.4-3.9">SETTINGS_TIMEOUT (0x4):</dt>
<dd id="section-a.4-3.10">
  Not applicable, since no acknowledgement of SETTINGS is defined.<a href="#section-a.4-3.10" class="pilcrow">¶</a>
</dd>
<dt id="section-a.4-3.11">STREAM_CLOSED (0x5):</dt>
<dd id="section-a.4-3.12">
  Not applicable, since QUIC handles stream management.<a href="#section-a.4-3.12" class="pilcrow">¶</a>
</dd>
<dt id="section-a.4-3.13">FRAME_SIZE_ERROR (0x6):</dt>
<dd id="section-a.4-3.14">
  H3_FRAME_ERROR error code defined in <a href="#http-error-codes" class="xref">Section 8.1</a>.<a href="#section-a.4-3.14" class="pilcrow">¶</a>
</dd>
<dt id="section-a.4-3.15">REFUSED_STREAM (0x7):</dt>
<dd id="section-a.4-3.16">
  H3_REQUEST_REJECTED (in <a href="#http-error-codes" class="xref">Section 8.1</a>) is used to indicate that a
request was not processed. Otherwise, not applicable because QUIC handles
stream management.<a href="#section-a.4-3.16" class="pilcrow">¶</a>
</dd>
<dt id="section-a.4-3.17">CANCEL (0x8):</dt>
<dd id="section-a.4-3.18">
  H3_REQUEST_CANCELLED in <a href="#http-error-codes" class="xref">Section 8.1</a>.<a href="#section-a.4-3.18" class="pilcrow">¶</a>
</dd>
<dt id="section-a.4-3.19">COMPRESSION_ERROR (0x9):</dt>
<dd id="section-a.4-3.20">
  Multiple error codes are defined in <span>[<a href="#QPACK" class="xref">QPACK</a>]</span>.<a href="#section-a.4-3.20" class="pilcrow">¶</a>
</dd>
<dt id="section-a.4-3.21">CONNECT_ERROR (0xa):</dt>
<dd id="section-a.4-3.22">
  H3_CONNECT_ERROR in <a href="#http-error-codes" class="xref">Section 8.1</a>.<a href="#section-a.4-3.22" class="pilcrow">¶</a>
</dd>
<dt id="section-a.4-3.23">ENHANCE_YOUR_CALM (0xb):</dt>
<dd id="section-a.4-3.24">
  H3_EXCESSIVE_LOAD in <a href="#http-error-codes" class="xref">Section 8.1</a>.<a href="#section-a.4-3.24" class="pilcrow">¶</a>
</dd>
<dt id="section-a.4-3.25">INADEQUATE_SECURITY (0xc):</dt>
<dd id="section-a.4-3.26">
  Not applicable, since QUIC is assumed to provide sufficient security on all
connections.<a href="#section-a.4-3.26" class="pilcrow">¶</a>
</dd>
<dt id="section-a.4-3.27">H3_1_1_REQUIRED (0xd):</dt>
<dd id="section-a.4-3.28">
  H3_VERSION_FALLBACK in <a href="#http-error-codes" class="xref">Section 8.1</a>.<a href="#section-a.4-3.28" class="pilcrow">¶</a>
</dd>
</dl>
<p id="section-a.4-4">Error codes need to be defined for HTTP/2 and HTTP/3 separately.  See
<a href="#iana-error-codes" class="xref">Section 11.2.3</a>.<a href="#section-a.4-4" class="pilcrow">¶</a></p>
</section>
</div>
</section>
</div>
<div id="change-log">
<section id="section-appendix.b">
      <h2 id="name-change-log">
<a href="#section-appendix.b" class="section-number selfRef">Appendix B. </a><a href="#name-change-log" class="section-name selfRef">Change Log</a>
      </h2>
<ul class="ulEmpty">
<li class="ulEmpty" id="section-appendix.b-1.1">
          <strong>RFC Editor's Note:</strong>  Please remove this section prior to publication of a
final version of this document.<a href="#section-appendix.b-1.1" class="pilcrow">¶</a>
</li>
</ul>
<div id="since-draft-ietf-quic-http-25">
<section id="section-b.1">
        <h2 id="name-since-draft-ietf-quic-http-">
<a href="#section-b.1" class="section-number selfRef">B.1. </a><a href="#name-since-draft-ietf-quic-http-" class="section-name selfRef">Since draft-ietf-quic-http-25</a>
        </h2>
<ul>
<li id="section-b.1-1.1">Require QUICv1 for HTTP/3 (#3117, #3323)<a href="#section-b.1-1.1" class="pilcrow">¶</a>
</li>
<li id="section-b.1-1.2">Remove DUPLICATE_PUSH and allow duplicate PUSH_PROMISE (#3275, #3309)<a href="#section-b.1-1.2" class="pilcrow">¶</a>
</li>
<li id="section-b.1-1.3">Clarify the definition of "malformed" (#3352, #3345)<a href="#section-b.1-1.3" class="pilcrow">¶</a>
</li>
</ul>
</section>
</div>
<div id="since-draft-ietf-quic-http-24">
<section id="section-b.2">
        <h2 id="name-since-draft-ietf-quic-http-2">
<a href="#section-b.2" class="section-number selfRef">B.2. </a><a href="#name-since-draft-ietf-quic-http-2" class="section-name selfRef">Since draft-ietf-quic-http-24</a>
        </h2>
<ul>
<li id="section-b.2-1.1">Removed H3_EARLY_RESPONSE error code; H3_NO_ERROR is recommended instead
(#3130,#3208)<a href="#section-b.2-1.1" class="pilcrow">¶</a>
</li>
<li id="section-b.2-1.2">Unknown error codes are equivalent to H3_NO_ERROR (#3276,#3331)<a href="#section-b.2-1.2" class="pilcrow">¶</a>
</li>
<li id="section-b.2-1.3">Some error codes are reserved for greasing (#3325,#3360)<a href="#section-b.2-1.3" class="pilcrow">¶</a>
</li>
</ul>
</section>
</div>
<div id="since-draft-ietf-quic-http-23">
<section id="section-b.3">
        <h2 id="name-since-draft-ietf-quic-http-23">
<a href="#section-b.3" class="section-number selfRef">B.3. </a><a href="#name-since-draft-ietf-quic-http-23" class="section-name selfRef">Since draft-ietf-quic-http-23</a>
        </h2>
<ul>
<li id="section-b.3-1.1">Removed <code>quic</code> Alt-Svc parameter (#3061,#3118)<a href="#section-b.3-1.1" class="pilcrow">¶</a>
</li>
<li id="section-b.3-1.2">Clients need not persist unknown settings for use in 0-RTT (#3110,#3113)<a href="#section-b.3-1.2" class="pilcrow">¶</a>
</li>
<li id="section-b.3-1.3">Clarify error cases around CANCEL_PUSH (#2819,#3083)<a href="#section-b.3-1.3" class="pilcrow">¶</a>
</li>
</ul>
</section>
</div>
<div id="since-draft-ietf-quic-http-22">
<section id="section-b.4">
        <h2 id="name-since-draft-ietf-quic-http-22">
<a href="#section-b.4" class="section-number selfRef">B.4. </a><a href="#name-since-draft-ietf-quic-http-22" class="section-name selfRef">Since draft-ietf-quic-http-22</a>
        </h2>
<ul>
<li id="section-b.4-1.1">Removed priority signaling (#2922,#2924)<a href="#section-b.4-1.1" class="pilcrow">¶</a>
</li>
<li id="section-b.4-1.2">
            <p id="section-b.4-1.2.1">Further changes to error codes (#2662,#2551):<a href="#section-b.4-1.2.1" class="pilcrow">¶</a></p>
<ul>
<li id="section-b.4-1.2.2.1">Error codes renumbered<a href="#section-b.4-1.2.2.1" class="pilcrow">¶</a>
</li>
<li id="section-b.4-1.2.2.2">HTTP_MALFORMED_FRAME replaced by HTTP_FRAME_ERROR, HTTP_ID_ERROR, and others<a href="#section-b.4-1.2.2.2" class="pilcrow">¶</a>
</li>
</ul>
</li>
<li id="section-b.4-1.3">Clarify how unknown frame types interact with required frame sequence
(#2867,#2858)<a href="#section-b.4-1.3" class="pilcrow">¶</a>
</li>
<li id="section-b.4-1.4">Describe interactions with the transport in terms of defined interface terms
(#2857,#2805)<a href="#section-b.4-1.4" class="pilcrow">¶</a>
</li>
<li id="section-b.4-1.5">Require the use of the <code>http-opportunistic</code> resource (RFC 8164) when scheme is
<code>http</code> (#2439,#2973)<a href="#section-b.4-1.5" class="pilcrow">¶</a>
</li>
<li id="section-b.4-1.6">Settings identifiers cannot be duplicated (#2979)<a href="#section-b.4-1.6" class="pilcrow">¶</a>
</li>
<li id="section-b.4-1.7">
            <p id="section-b.4-1.7.1">Changes to SETTINGS frames in 0-RTT (#2972,#2790,#2945):<a href="#section-b.4-1.7.1" class="pilcrow">¶</a></p>
<ul>
<li id="section-b.4-1.7.2.1">Servers must send all settings with non-default values in their SETTINGS
frame, even when resuming<a href="#section-b.4-1.7.2.1" class="pilcrow">¶</a>
</li>
<li id="section-b.4-1.7.2.2">If a client doesn't have settings associated with a 0-RTT ticket, it uses
the defaults<a href="#section-b.4-1.7.2.2" class="pilcrow">¶</a>
</li>
<li id="section-b.4-1.7.2.3">Servers can't accept early data if they cannot recover the settings the
client will have remembered<a href="#section-b.4-1.7.2.3" class="pilcrow">¶</a>
</li>
</ul>
</li>
<li id="section-b.4-1.8">Clarify that Upgrade and the 101 status code are prohibited (#2898,#2889)<a href="#section-b.4-1.8" class="pilcrow">¶</a>
</li>
<li id="section-b.4-1.9">Clarify that frame types reserved for greasing can occur on any stream, but
frame types reserved due to HTTP/2 correspondence are prohibited
(#2997,#2692,#2693)<a href="#section-b.4-1.9" class="pilcrow">¶</a>
</li>
<li id="section-b.4-1.10">Unknown error codes cannot be treated as errors (#2998,#2816)<a href="#section-b.4-1.10" class="pilcrow">¶</a>
</li>
</ul>
</section>
</div>
<div id="since-draft-ietf-quic-http-21">
<section id="section-b.5">
        <h2 id="name-since-draft-ietf-quic-http-21">
<a href="#section-b.5" class="section-number selfRef">B.5. </a><a href="#name-since-draft-ietf-quic-http-21" class="section-name selfRef">Since draft-ietf-quic-http-21</a>
        </h2>
<p id="section-b.5-1">No changes<a href="#section-b.5-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="since-draft-ietf-quic-http-20">
<section id="section-b.6">
        <h2 id="name-since-draft-ietf-quic-http-20">
<a href="#section-b.6" class="section-number selfRef">B.6. </a><a href="#name-since-draft-ietf-quic-http-20" class="section-name selfRef">Since draft-ietf-quic-http-20</a>
        </h2>
<ul>
<li id="section-b.6-1.1">Prohibit closing the control stream (#2509, #2666)<a href="#section-b.6-1.1" class="pilcrow">¶</a>
</li>
<li id="section-b.6-1.2">Change default priority to use an orphan node (#2502, #2690)<a href="#section-b.6-1.2" class="pilcrow">¶</a>
</li>
<li id="section-b.6-1.3">Exclusive priorities are restored (#2754, #2781)<a href="#section-b.6-1.3" class="pilcrow">¶</a>
</li>
<li id="section-b.6-1.4">Restrict use of frames when using CONNECT (#2229, #2702)<a href="#section-b.6-1.4" class="pilcrow">¶</a>
</li>
<li id="section-b.6-1.5">Close and maybe reset streams if a connection error occurs for CONNECT (#2228,
#2703)<a href="#section-b.6-1.5" class="pilcrow">¶</a>
</li>
<li id="section-b.6-1.6">Encourage provision of sufficient unidirectional streams for QPACK (#2100,
#2529, #2762)<a href="#section-b.6-1.6" class="pilcrow">¶</a>
</li>
<li id="section-b.6-1.7">Allow extensions to use server-initiated bidirectional streams (#2711, #2773)<a href="#section-b.6-1.7" class="pilcrow">¶</a>
</li>
<li id="section-b.6-1.8">Clarify use of maximum header list size setting (#2516, #2774)<a href="#section-b.6-1.8" class="pilcrow">¶</a>
</li>
<li id="section-b.6-1.9">
            <p id="section-b.6-1.9.1">Extensive changes to error codes and conditions of their sending<a href="#section-b.6-1.9.1" class="pilcrow">¶</a></p>
<ul>
<li id="section-b.6-1.9.2.1">Require connection errors for more error conditions (#2511, #2510)<a href="#section-b.6-1.9.2.1" class="pilcrow">¶</a>
</li>
<li id="section-b.6-1.9.2.2">Updated the error codes for illegal GOAWAY frames (#2714, #2707)<a href="#section-b.6-1.9.2.2" class="pilcrow">¶</a>
</li>
<li id="section-b.6-1.9.2.3">Specified error code for HEADERS on control stream (#2708)<a href="#section-b.6-1.9.2.3" class="pilcrow">¶</a>
</li>
<li id="section-b.6-1.9.2.4">Specified error code for servers receiving PUSH_PROMISE (#2709)<a href="#section-b.6-1.9.2.4" class="pilcrow">¶</a>
</li>
<li id="section-b.6-1.9.2.5">Specified error code for receiving DATA before HEADERS (#2715)<a href="#section-b.6-1.9.2.5" class="pilcrow">¶</a>
</li>
<li id="section-b.6-1.9.2.6">Describe malformed messages and their handling (#2410, #2764)<a href="#section-b.6-1.9.2.6" class="pilcrow">¶</a>
</li>
<li id="section-b.6-1.9.2.7">Remove HTTP_PUSH_ALREADY_IN_CACHE error (#2812, #2813)<a href="#section-b.6-1.9.2.7" class="pilcrow">¶</a>
</li>
<li id="section-b.6-1.9.2.8">Refactor Push ID related errors (#2818, #2820)<a href="#section-b.6-1.9.2.8" class="pilcrow">¶</a>
</li>
<li id="section-b.6-1.9.2.9">Rationalize HTTP/3 stream creation errors (#2821, #2822)<a href="#section-b.6-1.9.2.9" class="pilcrow">¶</a>
</li>
</ul>
</li>
</ul>
</section>
</div>
<div id="since-draft-ietf-quic-http-19">
<section id="section-b.7">
        <h2 id="name-since-draft-ietf-quic-http-1">
<a href="#section-b.7" class="section-number selfRef">B.7. </a><a href="#name-since-draft-ietf-quic-http-1" class="section-name selfRef">Since draft-ietf-quic-http-19</a>
        </h2>
<ul>
<li id="section-b.7-1.1">SETTINGS_NUM_PLACEHOLDERS is 0x9 (#2443,#2530)<a href="#section-b.7-1.1" class="pilcrow">¶</a>
</li>
<li id="section-b.7-1.2">Non-zero bits in the Empty field of the PRIORITY frame MAY be treated as an
error (#2501)<a href="#section-b.7-1.2" class="pilcrow">¶</a>
</li>
</ul>
</section>
</div>
<div id="since-draft-ietf-quic-http-18">
<section id="section-b.8">
        <h2 id="name-since-draft-ietf-quic-http-18">
<a href="#section-b.8" class="section-number selfRef">B.8. </a><a href="#name-since-draft-ietf-quic-http-18" class="section-name selfRef">Since draft-ietf-quic-http-18</a>
        </h2>
<ul>
<li id="section-b.8-1.1">Resetting streams following a GOAWAY is recommended, but not required
(#2256,#2457)<a href="#section-b.8-1.1" class="pilcrow">¶</a>
</li>
<li id="section-b.8-1.2">
            <p id="section-b.8-1.2.1">Use variable-length integers throughout (#2437,#2233,#2253,#2275)<a href="#section-b.8-1.2.1" class="pilcrow">¶</a></p>
<ul>
<li id="section-b.8-1.2.2.1">Variable-length frame types, stream types, and settings identifiers<a href="#section-b.8-1.2.2.1" class="pilcrow">¶</a>
</li>
<li id="section-b.8-1.2.2.2">Renumbered stream type assignments<a href="#section-b.8-1.2.2.2" class="pilcrow">¶</a>
</li>
<li id="section-b.8-1.2.2.3">Modified associated reserved values<a href="#section-b.8-1.2.2.3" class="pilcrow">¶</a>
</li>
</ul>
</li>
<li id="section-b.8-1.3">Frame layout switched from Length-Type-Value to Type-Length-Value
(#2395,#2235)<a href="#section-b.8-1.3" class="pilcrow">¶</a>
</li>
<li id="section-b.8-1.4">Specified error code for servers receiving DUPLICATE_PUSH (#2497)<a href="#section-b.8-1.4" class="pilcrow">¶</a>
</li>
<li id="section-b.8-1.5">Use connection error for invalid PRIORITY (#2507, #2508)<a href="#section-b.8-1.5" class="pilcrow">¶</a>
</li>
</ul>
</section>
</div>
<div id="since-draft-ietf-quic-http-17">
<section id="section-b.9">
        <h2 id="name-since-draft-ietf-quic-http-17">
<a href="#section-b.9" class="section-number selfRef">B.9. </a><a href="#name-since-draft-ietf-quic-http-17" class="section-name selfRef">Since draft-ietf-quic-http-17</a>
        </h2>
<ul>
<li id="section-b.9-1.1">HTTP_REQUEST_REJECTED is used to indicate a request can be retried (#2106,
#2325)<a href="#section-b.9-1.1" class="pilcrow">¶</a>
</li>
<li id="section-b.9-1.2">Changed error code for GOAWAY on the wrong stream (#2231, #2343)<a href="#section-b.9-1.2" class="pilcrow">¶</a>
</li>
</ul>
</section>
</div>
<div id="since-draft-ietf-quic-http-16">
<section id="section-b.10">
        <h2 id="name-since-draft-ietf-quic-http-16">
<a href="#section-b.10" class="section-number selfRef">B.10. </a><a href="#name-since-draft-ietf-quic-http-16" class="section-name selfRef">Since draft-ietf-quic-http-16</a>
        </h2>
<ul>
<li id="section-b.10-1.1">Rename "HTTP/QUIC" to "HTTP/3" (#1973)<a href="#section-b.10-1.1" class="pilcrow">¶</a>
</li>
<li id="section-b.10-1.2">
            <p id="section-b.10-1.2.1">Changes to PRIORITY frame (#1865, #2075)<a href="#section-b.10-1.2.1" class="pilcrow">¶</a></p>
<ul>
<li id="section-b.10-1.2.2.1">Permitted as first frame of request streams<a href="#section-b.10-1.2.2.1" class="pilcrow">¶</a>
</li>
<li id="section-b.10-1.2.2.2">Remove exclusive reprioritization<a href="#section-b.10-1.2.2.2" class="pilcrow">¶</a>
</li>
<li id="section-b.10-1.2.2.3">Changes to Prioritized Element Type bits<a href="#section-b.10-1.2.2.3" class="pilcrow">¶</a>
</li>
</ul>
</li>
<li id="section-b.10-1.3">Define DUPLICATE_PUSH frame to refer to another PUSH_PROMISE (#2072)<a href="#section-b.10-1.3" class="pilcrow">¶</a>
</li>
<li id="section-b.10-1.4">Set defaults for settings, allow request before receiving SETTINGS (#1809,
#1846, #2038)<a href="#section-b.10-1.4" class="pilcrow">¶</a>
</li>
<li id="section-b.10-1.5">Clarify message processing rules for streams that aren't closed (#1972, #2003)<a href="#section-b.10-1.5" class="pilcrow">¶</a>
</li>
<li id="section-b.10-1.6">Removed reservation of error code 0 and moved HTTP_NO_ERROR to this value
(#1922)<a href="#section-b.10-1.6" class="pilcrow">¶</a>
</li>
<li id="section-b.10-1.7">Removed prohibition of zero-length DATA frames (#2098)<a href="#section-b.10-1.7" class="pilcrow">¶</a>
</li>
</ul>
</section>
</div>
<div id="since-draft-ietf-quic-http-15">
<section id="section-b.11">
        <h2 id="name-since-draft-ietf-quic-http-15">
<a href="#section-b.11" class="section-number selfRef">B.11. </a><a href="#name-since-draft-ietf-quic-http-15" class="section-name selfRef">Since draft-ietf-quic-http-15</a>
        </h2>
<p id="section-b.11-1">Substantial editorial reorganization; no technical changes.<a href="#section-b.11-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="since-draft-ietf-quic-http-14">
<section id="section-b.12">
        <h2 id="name-since-draft-ietf-quic-http-14">
<a href="#section-b.12" class="section-number selfRef">B.12. </a><a href="#name-since-draft-ietf-quic-http-14" class="section-name selfRef">Since draft-ietf-quic-http-14</a>
        </h2>
<ul>
<li id="section-b.12-1.1">Recommend sensible values for QUIC transport parameters (#1720,#1806)<a href="#section-b.12-1.1" class="pilcrow">¶</a>
</li>
<li id="section-b.12-1.2">Define error for missing SETTINGS frame (#1697,#1808)<a href="#section-b.12-1.2" class="pilcrow">¶</a>
</li>
<li id="section-b.12-1.3">Setting values are variable-length integers (#1556,#1807) and do not have
separate maximum values (#1820)<a href="#section-b.12-1.3" class="pilcrow">¶</a>
</li>
<li id="section-b.12-1.4">Expanded discussion of connection closure (#1599,#1717,#1712)<a href="#section-b.12-1.4" class="pilcrow">¶</a>
</li>
<li id="section-b.12-1.5">HTTP_VERSION_FALLBACK falls back to HTTP/1.1 (#1677,#1685)<a href="#section-b.12-1.5" class="pilcrow">¶</a>
</li>
</ul>
</section>
</div>
<div id="since-draft-ietf-quic-http-13">
<section id="section-b.13">
        <h2 id="name-since-draft-ietf-quic-http-13">
<a href="#section-b.13" class="section-number selfRef">B.13. </a><a href="#name-since-draft-ietf-quic-http-13" class="section-name selfRef">Since draft-ietf-quic-http-13</a>
        </h2>
<ul>
<li id="section-b.13-1.1">Reserved some frame types for grease (#1333, #1446)<a href="#section-b.13-1.1" class="pilcrow">¶</a>
</li>
<li id="section-b.13-1.2">Unknown unidirectional stream types are tolerated, not errors; some reserved
for grease (#1490, #1525)<a href="#section-b.13-1.2" class="pilcrow">¶</a>
</li>
<li id="section-b.13-1.3">Require settings to be remembered for 0-RTT, prohibit reductions (#1541,
#1641)<a href="#section-b.13-1.3" class="pilcrow">¶</a>
</li>
<li id="section-b.13-1.4">Specify behavior for truncated requests (#1596, #1643)<a href="#section-b.13-1.4" class="pilcrow">¶</a>
</li>
</ul>
</section>
</div>
<div id="since-draft-ietf-quic-http-12">
<section id="section-b.14">
        <h2 id="name-since-draft-ietf-quic-http-12">
<a href="#section-b.14" class="section-number selfRef">B.14. </a><a href="#name-since-draft-ietf-quic-http-12" class="section-name selfRef">Since draft-ietf-quic-http-12</a>
        </h2>
<ul>
<li id="section-b.14-1.1">TLS SNI extension isn't mandatory if an alternative method is used (#1459,
#1462, #1466)<a href="#section-b.14-1.1" class="pilcrow">¶</a>
</li>
<li id="section-b.14-1.2">Removed flags from HTTP/3 frames (#1388, #1398)<a href="#section-b.14-1.2" class="pilcrow">¶</a>
</li>
<li id="section-b.14-1.3">Reserved frame types and settings for use in preserving extensibility (#1333,
#1446)<a href="#section-b.14-1.3" class="pilcrow">¶</a>
</li>
<li id="section-b.14-1.4">Added general error code (#1391, #1397)<a href="#section-b.14-1.4" class="pilcrow">¶</a>
</li>
<li id="section-b.14-1.5">Unidirectional streams carry a type byte and are extensible (#910,#1359)<a href="#section-b.14-1.5" class="pilcrow">¶</a>
</li>
<li id="section-b.14-1.6">Priority mechanism now uses explicit placeholders to enable persistent
structure in the tree (#441,#1421,#1422)<a href="#section-b.14-1.6" class="pilcrow">¶</a>
</li>
</ul>
</section>
</div>
<div id="since-draft-ietf-quic-http-11">
<section id="section-b.15">
        <h2 id="name-since-draft-ietf-quic-http-11">
<a href="#section-b.15" class="section-number selfRef">B.15. </a><a href="#name-since-draft-ietf-quic-http-11" class="section-name selfRef">Since draft-ietf-quic-http-11</a>
        </h2>
<ul>
<li id="section-b.15-1.1">Moved QPACK table updates and acknowledgments to dedicated streams (#1121,
#1122, #1238)<a href="#section-b.15-1.1" class="pilcrow">¶</a>
</li>
</ul>
</section>
</div>
<div id="since-draft-ietf-quic-http-10">
<section id="section-b.16">
        <h2 id="name-since-draft-ietf-quic-http-10">
<a href="#section-b.16" class="section-number selfRef">B.16. </a><a href="#name-since-draft-ietf-quic-http-10" class="section-name selfRef">Since draft-ietf-quic-http-10</a>
        </h2>
<ul>
<li id="section-b.16-1.1">Settings need to be remembered when attempting and accepting 0-RTT (#1157,
#1207)<a href="#section-b.16-1.1" class="pilcrow">¶</a>
</li>
</ul>
</section>
</div>
<div id="since-draft-ietf-quic-http-09">
<section id="section-b.17">
        <h2 id="name-since-draft-ietf-quic-http-0">
<a href="#section-b.17" class="section-number selfRef">B.17. </a><a href="#name-since-draft-ietf-quic-http-0" class="section-name selfRef">Since draft-ietf-quic-http-09</a>
        </h2>
<ul>
<li id="section-b.17-1.1">Selected QCRAM for header compression (#228, #1117)<a href="#section-b.17-1.1" class="pilcrow">¶</a>
</li>
<li id="section-b.17-1.2">The server_name TLS extension is now mandatory (#296, #495)<a href="#section-b.17-1.2" class="pilcrow">¶</a>
</li>
<li id="section-b.17-1.3">Specified handling of unsupported versions in Alt-Svc (#1093, #1097)<a href="#section-b.17-1.3" class="pilcrow">¶</a>
</li>
</ul>
</section>
</div>
<div id="since-draft-ietf-quic-http-08">
<section id="section-b.18">
        <h2 id="name-since-draft-ietf-quic-http-08">
<a href="#section-b.18" class="section-number selfRef">B.18. </a><a href="#name-since-draft-ietf-quic-http-08" class="section-name selfRef">Since draft-ietf-quic-http-08</a>
        </h2>
<ul>
<li id="section-b.18-1.1">Clarified connection coalescing rules (#940, #1024)<a href="#section-b.18-1.1" class="pilcrow">¶</a>
</li>
</ul>
</section>
</div>
<div id="since-draft-ietf-quic-http-07">
<section id="section-b.19">
        <h2 id="name-since-draft-ietf-quic-http-07">
<a href="#section-b.19" class="section-number selfRef">B.19. </a><a href="#name-since-draft-ietf-quic-http-07" class="section-name selfRef">Since draft-ietf-quic-http-07</a>
        </h2>
<ul>
<li id="section-b.19-1.1">Changes for integer encodings in QUIC (#595,#905)<a href="#section-b.19-1.1" class="pilcrow">¶</a>
</li>
<li id="section-b.19-1.2">Use unidirectional streams as appropriate (#515, #240, #281, #886)<a href="#section-b.19-1.2" class="pilcrow">¶</a>
</li>
<li id="section-b.19-1.3">Improvement to the description of GOAWAY (#604, #898)<a href="#section-b.19-1.3" class="pilcrow">¶</a>
</li>
<li id="section-b.19-1.4">Improve description of server push usage (#947, #950, #957)<a href="#section-b.19-1.4" class="pilcrow">¶</a>
</li>
</ul>
</section>
</div>
<div id="since-draft-ietf-quic-http-06">
<section id="section-b.20">
        <h2 id="name-since-draft-ietf-quic-http-06">
<a href="#section-b.20" class="section-number selfRef">B.20. </a><a href="#name-since-draft-ietf-quic-http-06" class="section-name selfRef">Since draft-ietf-quic-http-06</a>
        </h2>
<ul>
<li id="section-b.20-1.1">Track changes in QUIC error code usage (#485)<a href="#section-b.20-1.1" class="pilcrow">¶</a>
</li>
</ul>
</section>
</div>
<div id="since-draft-ietf-quic-http-05">
<section id="section-b.21">
        <h2 id="name-since-draft-ietf-quic-http-05">
<a href="#section-b.21" class="section-number selfRef">B.21. </a><a href="#name-since-draft-ietf-quic-http-05" class="section-name selfRef">Since draft-ietf-quic-http-05</a>
        </h2>
<ul>
<li id="section-b.21-1.1">Made push ID sequential, add MAX_PUSH_ID, remove SETTINGS_ENABLE_PUSH (#709)<a href="#section-b.21-1.1" class="pilcrow">¶</a>
</li>
<li id="section-b.21-1.2">Guidance about keep-alive and QUIC PINGs (#729)<a href="#section-b.21-1.2" class="pilcrow">¶</a>
</li>
<li id="section-b.21-1.3">Expanded text on GOAWAY and cancellation (#757)<a href="#section-b.21-1.3" class="pilcrow">¶</a>
</li>
</ul>
</section>
</div>
<div id="since-draft-ietf-quic-http-04">
<section id="section-b.22">
        <h2 id="name-since-draft-ietf-quic-http-04">
<a href="#section-b.22" class="section-number selfRef">B.22. </a><a href="#name-since-draft-ietf-quic-http-04" class="section-name selfRef">Since draft-ietf-quic-http-04</a>
        </h2>
<ul>
<li id="section-b.22-1.1">Cite RFC 5234 (#404)<a href="#section-b.22-1.1" class="pilcrow">¶</a>
</li>
<li id="section-b.22-1.2">Return to a single stream per request (#245,#557)<a href="#section-b.22-1.2" class="pilcrow">¶</a>
</li>
<li id="section-b.22-1.3">Use separate frame type and settings registries from HTTP/2 (#81)<a href="#section-b.22-1.3" class="pilcrow">¶</a>
</li>
<li id="section-b.22-1.4">SETTINGS_ENABLE_PUSH instead of SETTINGS_DISABLE_PUSH (#477)<a href="#section-b.22-1.4" class="pilcrow">¶</a>
</li>
<li id="section-b.22-1.5">Restored GOAWAY (#696)<a href="#section-b.22-1.5" class="pilcrow">¶</a>
</li>
<li id="section-b.22-1.6">Identify server push using Push ID rather than a stream ID (#702,#281)<a href="#section-b.22-1.6" class="pilcrow">¶</a>
</li>
<li id="section-b.22-1.7">DATA frames cannot be empty (#700)<a href="#section-b.22-1.7" class="pilcrow">¶</a>
</li>
</ul>
</section>
</div>
<div id="since-draft-ietf-quic-http-03">
<section id="section-b.23">
        <h2 id="name-since-draft-ietf-quic-http-03">
<a href="#section-b.23" class="section-number selfRef">B.23. </a><a href="#name-since-draft-ietf-quic-http-03" class="section-name selfRef">Since draft-ietf-quic-http-03</a>
        </h2>
<p id="section-b.23-1">None.<a href="#section-b.23-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="since-draft-ietf-quic-http-02">
<section id="section-b.24">
        <h2 id="name-since-draft-ietf-quic-http-02">
<a href="#section-b.24" class="section-number selfRef">B.24. </a><a href="#name-since-draft-ietf-quic-http-02" class="section-name selfRef">Since draft-ietf-quic-http-02</a>
        </h2>
<ul>
<li id="section-b.24-1.1">Track changes in transport draft<a href="#section-b.24-1.1" class="pilcrow">¶</a>
</li>
</ul>
</section>
</div>
<div id="since-draft-ietf-quic-http-01">
<section id="section-b.25">
        <h2 id="name-since-draft-ietf-quic-http-01">
<a href="#section-b.25" class="section-number selfRef">B.25. </a><a href="#name-since-draft-ietf-quic-http-01" class="section-name selfRef">Since draft-ietf-quic-http-01</a>
        </h2>
<ul>
<li id="section-b.25-1.1">
            <p id="section-b.25-1.1.1">SETTINGS changes (#181):<a href="#section-b.25-1.1.1" class="pilcrow">¶</a></p>
<ul>
<li id="section-b.25-1.1.2.1">SETTINGS can be sent only once at the start of a connection;
no changes thereafter<a href="#section-b.25-1.1.2.1" class="pilcrow">¶</a>
</li>
<li id="section-b.25-1.1.2.2">SETTINGS_ACK removed<a href="#section-b.25-1.1.2.2" class="pilcrow">¶</a>
</li>
<li id="section-b.25-1.1.2.3">Settings can only occur in the SETTINGS frame a single time<a href="#section-b.25-1.1.2.3" class="pilcrow">¶</a>
</li>
<li id="section-b.25-1.1.2.4">Boolean format updated<a href="#section-b.25-1.1.2.4" class="pilcrow">¶</a>
</li>
</ul>
</li>
<li id="section-b.25-1.2">Alt-Svc parameter changed from "v" to "quic"; format updated (#229)<a href="#section-b.25-1.2" class="pilcrow">¶</a>
</li>
<li id="section-b.25-1.3">Closing the connection control stream or any message control stream is a
fatal error (#176)<a href="#section-b.25-1.3" class="pilcrow">¶</a>
</li>
<li id="section-b.25-1.4">HPACK Sequence counter can wrap (#173)<a href="#section-b.25-1.4" class="pilcrow">¶</a>
</li>
<li id="section-b.25-1.5">0-RTT guidance added<a href="#section-b.25-1.5" class="pilcrow">¶</a>
</li>
<li id="section-b.25-1.6">Guide to differences from HTTP/2 and porting HTTP/2 extensions added
(#127,#242)<a href="#section-b.25-1.6" class="pilcrow">¶</a>
</li>
</ul>
</section>
</div>
<div id="since-draft-ietf-quic-http-00">
<section id="section-b.26">
        <h2 id="name-since-draft-ietf-quic-http-00">
<a href="#section-b.26" class="section-number selfRef">B.26. </a><a href="#name-since-draft-ietf-quic-http-00" class="section-name selfRef">Since draft-ietf-quic-http-00</a>
        </h2>
<ul>
<li id="section-b.26-1.1">Changed "HTTP/2-over-QUIC" to "HTTP/QUIC" throughout (#11,#29)<a href="#section-b.26-1.1" class="pilcrow">¶</a>
</li>
<li id="section-b.26-1.2">Changed from using HTTP/2 framing within Stream 3 to new framing format and
two-stream-per-request model (#71,#72,#73)<a href="#section-b.26-1.2" class="pilcrow">¶</a>
</li>
<li id="section-b.26-1.3">Adopted SETTINGS format from draft-bishop-httpbis-extended-settings-01<a href="#section-b.26-1.3" class="pilcrow">¶</a>
</li>
<li id="section-b.26-1.4">Reworked SETTINGS_ACK to account for indeterminate inter-stream order (#75)<a href="#section-b.26-1.4" class="pilcrow">¶</a>
</li>
<li id="section-b.26-1.5">Described CONNECT pseudo-method (#95)<a href="#section-b.26-1.5" class="pilcrow">¶</a>
</li>
<li id="section-b.26-1.6">Updated ALPN token and Alt-Svc guidance (#13,#87)<a href="#section-b.26-1.6" class="pilcrow">¶</a>
</li>
<li id="section-b.26-1.7">Application-layer-defined error codes (#19,#74)<a href="#section-b.26-1.7" class="pilcrow">¶</a>
</li>
</ul>
</section>
</div>
<div id="since-draft-shade-quic-http2-mapping-00">
<section id="section-b.27">
        <h2 id="name-since-draft-shade-quic-http">
<a href="#section-b.27" class="section-number selfRef">B.27. </a><a href="#name-since-draft-shade-quic-http" class="section-name selfRef">Since draft-shade-quic-http2-mapping-00</a>
        </h2>
<ul>
<li id="section-b.27-1.1">Adopted as base for draft-ietf-quic-http<a href="#section-b.27-1.1" class="pilcrow">¶</a>
</li>
<li id="section-b.27-1.2">Updated authors/editors list<a href="#section-b.27-1.2" class="pilcrow">¶</a>
</li>
</ul>
</section>
</div>
</section>
</div>
<div id="acknowledgements">
<section id="section-appendix.c">
      <h2 id="name-acknowledgements">
<a href="#name-acknowledgements" class="section-name selfRef">Acknowledgements</a>
      </h2>
<p id="section-appendix.c-1">The original authors of this specification were Robbie Shade and Mike Warres.<a href="#section-appendix.c-1" class="pilcrow">¶</a></p>
<p id="section-appendix.c-2">A substantial portion of Mike's contribution was supported by Microsoft during
his employment there.<a href="#section-appendix.c-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="authors-addresses">
<section id="section-appendix.d">
      <h2 id="name-authors-address">
<a href="#name-authors-address" class="section-name selfRef">Author's Address</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Mike Bishop (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">Akamai</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:mbishop@evequefou.be" class="email">mbishop@evequefou.be</a>
</div>
</address>
</section>
</div>
<script>var toc = document.getElementById("toc");
var tocToggle = toc.querySelector("h2");
var tocNav = toc.querySelector("nav");

// mobile menu toggle
tocToggle.onclick = function(event) {
    if (window.innerWidth < 1024) {
 var tocNavDisplay = tocNav.currentStyle ? tocNav.currentStyle.display : getComputedStyle(tocNav, null).display;
 if (tocNavDisplay == "none") {
     tocNav.style.display = "block";
 } else {
     tocNav.style.display = "none";
 }
    }
}

// toc anchor scroll to anchor
tocNav.addEventListener("click", function (event) {
    event.preventDefault();
    if (event.target.nodeName == 'A') {
 if (window.innerWidth < 1024) {
     tocNav.style.display = "none";
 }
 var href = event.target.getAttribute("href");
 var anchorId = href.substr(1);
 var anchor =  document.getElementById(anchorId);
 anchor.scrollIntoView(true);
 window.history.pushState("","",href);
    }
});

// switch toc mode when window resized
window.onresize = function () {
    if (window.innerWidth < 1024) {
 tocNav.style.display = "none";
    } else {
 tocNav.style.display = "block";
    }
}
</script>
</body>
</html>
