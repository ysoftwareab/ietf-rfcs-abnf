<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Current Practices for Multiple Interface Hosts</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Current Practices for Multiple Interface Hosts">
<meta name="keywords" content="current practices, multi-homing, MIF">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Internet Engineering Task Force</td><td class="header">M. Wasserman, Ed.</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Painless Security, LLC</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">P. Seite, Ed.</td></tr>
<tr><td class="header">Expires: December 30, 2010</td><td class="header">France Telecom - Orange</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">June 28, 2010</td></tr>
</table></td></tr></table>
<h1><br />Current Practices for Multiple Interface Hosts<br />draft-ietf-mif-current-practices-02</h1>

<h3>Abstract</h3>

<p> An increasing number of hosts are operating in multiple-interface
environments, where different network interfaces are providing unequal
levels of service or connectivity. This document summarizes current
practices in this area, and describes in detail how some common
operating systems cope with these challenges.

</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on December 30, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#anchor2">2.</a>&nbsp;
Summary of Current Approaches<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">2.1.</a>&nbsp;
Centralized Connection Management<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">2.2.</a>&nbsp;
Per Application Connection Settings<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">2.3.</a>&nbsp;
Stack-Level Solutions to Specific Problems<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">2.3.1.</a>&nbsp;
DNS Resolution Issues<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">2.3.2.</a>&nbsp;
Routing<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">2.3.3.</a>&nbsp;
Address Selection Policy<br />
<a href="#anchor9">3.</a>&nbsp;
Current Practices in Some Operating Systems<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">3.1.</a>&nbsp;
Mobile Handset Operating Systems<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">3.1.1.</a>&nbsp;
Nokia S60 3rd Edition, Feature Pack 2<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">3.1.2.</a>&nbsp;
Microsoft Windows Mobile 2003 Second Edition<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">3.1.3.</a>&nbsp;
BlackBerry<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">3.1.4.</a>&nbsp;
Google Android<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">3.1.5.</a>&nbsp;
Qualcomm Brew<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor16">3.1.6.</a>&nbsp;
Arena Connection Manager<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor17">3.1.7.</a>&nbsp;
Access selection<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor18">3.2.</a>&nbsp;
Desktop Operating Systems<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor19">3.2.1.</a>&nbsp;
Microsoft Windows<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor20">3.2.1.1.</a>&nbsp;
Routing<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor21">3.2.1.2.</a>&nbsp;
Outbound and Inbound Addresses<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor22">3.2.1.3.</a>&nbsp;
DNS Configuration<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor23">3.2.2.</a>&nbsp;
Linux and BSD-based Operating Systems<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor24">3.2.3.</a>&nbsp;
Apple Mac OS X<br />
<a href="#Acknowledgements">4.</a>&nbsp;
Acknowledgements<br />
<a href="#IANA">5.</a>&nbsp;
IANA Considerations<br />
<a href="#Security">6.</a>&nbsp;
Security Considerations<br />
<a href="#anchor25">7.</a>&nbsp;
Change Log<br />
<a href="#anchor26">8.</a>&nbsp;
Contributors<br />
<a href="#rfc.references1">9.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">9.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">9.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
Multiple-interface hosts face several challenges not faced by
single-interface hosts, some of which are described in the MIF problem
statement, <a class='info' href='#I-D.ietf-mif-problem-statement'>[I&#8209;D.ietf&#8209;mif&#8209;problem&#8209;statement]<span> (</span><span class='info'>Blanchet, M. and P. Seite, &ldquo;Multiple Interfaces Problem Statement,&rdquo; May&nbsp;2010.</span><span>)</span></a>.
This document summarizes how current implementations deal with the
problems identified in the MIF problem statement.

</p>
<p>
Publicly-available information about the multiple-interface solutions
implemented in some widely used operating systems, including both 
mobile handset and desktop operating systems, is collected in
this document, including: Nokia S60 <a class='info' href='#S60'>[S60]<span> (</span><span class='info'>Nokia Corporation, &ldquo;S60 Platform: IP Bearer Management,&rdquo; 2007.</span><span>)</span></a>,
Microsoft Windows Mobile <a class='info' href='#WINDOWSMOBILE'>[WINDOWSMOBILE]<span> (</span><span class='info'>Microsoft Corporation, &ldquo;SDK Documentation for Windows Mobile-Based Smartphones: Connection Manager,&rdquo; 2005.</span><span>)</span></a>,
Blackberry <a class='info' href='#BLACKBERRY'>[BLACKBERRY]<span> (</span><span class='info'>Research In Motion Limited, &ldquo;BlackBerry Java Development Environment - Fundamentals Guide: Wireless gateways,&rdquo; 2009.</span><span>)</span></a>, Google
Android <a class='info' href='#ANDROID'>[ANDROID]<span> (</span><span class='info'>Google Inc., &ldquo;Android developers: package android.net,&rdquo; 2009.</span><span>)</span></a>, Microsoft Windows, Apple Mac
OS X, Linux and BSD-based operating systems.

</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Summary of Current Approaches</h3>

<p>
This section summarizes current approaches that are used to resolve
the multi-interface issues described in the Multiple Interface Problem
Statement <a class='info' href='#I-D.ietf-mif-problem-statement'>[I&#8209;D.ietf&#8209;mif&#8209;problem&#8209;statement]<span> (</span><span class='info'>Blanchet, M. and P. Seite, &ldquo;Multiple Interfaces Problem Statement,&rdquo; May&nbsp;2010.</span><span>)</span></a>.
These approaches can be broken down into three major categories:

</p>
<p>
</p>
<ul class="text">
<li>Centralized connection management
</li>
<li>Per-application connection settings
</li>
<li>Stack-level solutions to specific problems
</li>
</ul><p>

</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Centralized Connection Management</h3>

<p> 
It is a common practice for mobile handset operating systems to
use a centralized connection manager that performs network interface
selection based on application or user input.  The information used by
the connection manager may be programmed into an application or
provisioned on a handset-wide basis.  When information is not
available to make an interface selection, the connection manager will
query the user to choose between available choices.

</p>
<p>
Routing tables are not typically used for network interface selection
when a connection manager is in use, as the criteria for network
selection is not strictly IP-based but is also dependent on other
properties of the interface (cost, type, etc.). Furthermore, multiple
overlapping private IPv4 address spaces are often exposed to a
multiple-interface host, making it difficult to make interface
selection decisions based on prefix matching.

</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
Per Application Connection Settings</h3>

<p>
In mobile handsets, applications are often involved in choosing what
interface and related configuration information should be used.  In
some cases, the application selects the interface directly, and in 
other cases the application provides more abstract information to 
a connection manager that makes the final interface choice.

</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3"></a><h3>2.3.&nbsp;
Stack-Level Solutions to Specific Problems</h3>

<p>
In most desktop operating systems, multiple interface problems are
dealt with in the stack and related components, based on system- level
configuration information, without the benefit of input from
applications or users.  These solutions tend to map well to the
problems listed in the problem statement:

</p>
<p>
  </p>
<ul class="text">
<li>DNS resolution issues
</li>
<li>Routing
</li>
<li>Address selection policy
</li>
</ul><p>

</p>
<p>
The configuration information for desktop systems comes from one of
three sources:  DHCP, proprietary configuration systems or manual
configuration.  While these systems universally accept IP address
assignment on a per-interface basis, they differ in what set of 
information can be assigned on a per-interface basis and what 
can be configured only on a per-system basis.

</p>
<p>
When choosing between multiple sets of information provided, these
systems will typically give preference to information received on
the "primary" interface.  The mechanism for designating the "primary"
interface differs by system.

</p>
<p>
There is very little commonality in how desktop operating systems
handle multiple sets of configuration information, with notable
variations between different versions of the same operating system
and/or within different software packages built for the same 
operating system.  Although these systems differ widely, it is 
not clear that any of them provide a completely satisfactory
user experience in multiple-interface environments.

</p>
<p>
The following sections discuss some of the solutions used in each of
the areas raised in the MIF problem statement.

</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3.1"></a><h3>2.3.1.&nbsp;
DNS Resolution Issues</h3>

<p>
There is very little commonality in how desktop operating systems
handle the DNS server list.  Some systems support per-interface DNS
server lists, while others only support a single system-wide list.

</p>
<p>
On hosts with per-interface DNS server lists, different mechanisms
are used to determine which DNS server is contacted for a given 
query.  In most cases, the first DNS server listed on the "primary"
interface is queried first, with back off to other servers if an 
answer is not received.  

</p>
<p>
Systems that support a single system-wide list differ in how they
select which DNS server to use in cases where they receive more than
one DNS server list to configure (e.g. from DHCP on multiple 
interfaces).  Some accept the information received on the "primary"
interface, while others use either the first or last set DNS server
list configured.

</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3.2"></a><h3>2.3.2.&nbsp;
Routing</h3>

<p>
Routing information is also handled differently on different desktop
operating systems.  While all systems maintain some sort of routing
cache, to handle redirects and/or statically configured routes, most
packets are routed based on configured default gateway information.

</p>
<p>
Some systems do allow the configuration of different default router
lists for different interfaces.  These systems will always choose the
default gateway on the interface with the lowest routing metric, with
different behavior when two or more interfaces have the same routing
metric.

</p>
<p>
Most systems do not allow the configuration of more than one default
router list, choosing instead to use the first or last default router
list configured and/or the router list configured on the "primary"
interface.

</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3.3"></a><h3>2.3.3.&nbsp;
Address Selection Policy</h3>

<p>
There is somewhat more commonality in how desktop hosts handle 
address selection.  Applications typically provide the destination
address for an outgoing packet, and the IP stack is responsible
for picking the source address.

</p>
<p>
IPv6 specifies a specific source address selection mechanism in
<a class='info' href='#RFC3484'>[RFC3484]<span> (</span><span class='info'>Draves, R., &ldquo;Default Address Selection for Internet Protocol version 6 (IPv6),&rdquo; February&nbsp;2003.</span><span>)</span></a>, and several systems implement this 
mechanism with similar support for IPv4.  However, many systems
do not provide any mechanism to update this default policy, and
there is no standard way to do so.

</p>
<p>
In some cases, the routing decision (including which interface to
use) is made before source address selection is performed, and a 
source address is chosen from the outbound interface.  In other
cases, source address selection is performed before, or independently
from outbound interface selection.

</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Current Practices in Some Operating Systems</h3>

<p>
The following sections briefly describe the current multiple-interface
host implementations on some widely-used operating systems. Please
refer to the References section for pointers to original documentation
on most of these systems, including further details.

</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Mobile Handset Operating Systems</h3>

<p>
Cellular devices typically run a variety of applications in parallel,
each with different requirements for IP connectivity. A typical
scenario is shown in figure 1, where a cellular device is utilizing
WLAN access for web browsing and GPRS access for transferring
multimedia messages (MMS). Another typical scenario would be a
real-time VoIP session over one network interface in parallel with
best effort web browsing on another network interface. Yet another
typical scenario would be global Internet access through one network
interface and local (e.g. corporate VPN) network access through
another.

</p><br /><hr class="insert" />
<a name="xml_fig1"></a>

<p style='text-align: center'>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
     Web server                                       MMS Gateway
          |                                                |
         -+--Internet----            ----Operator network--+-
                 |                          |
             +-------+                  +-------+
             |WLAN AP|                  | GGSN  |
             +-------+                  +-------+
                 |        +--------+        |
                 +--------|Cellular|--------+
                          |device  |
                          +--------+

</pre></div>
<p style='text-align: center'>A cellular device with two network interfaces
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
Different network access technologies require different settings. For
example, WLAN requires Service Set Identifier (SSID) and the GPRS
network requires the Access Point Name (APN) of the Gateway GPRS
Support Node (GGSN), among other parameters. It is common that
different accesses lead to different destination networks (e.g. to
"Internet", "intranet", cellular network services, etc.).

</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.1"></a><h3>3.1.1.&nbsp;
Nokia S60 3rd Edition, Feature Pack 2</h3>

<p>
S60 uses the concept of an Internet Access Point
(IAP) <a class='info' href='#S60'>[S60]<span> (</span><span class='info'>Nokia Corporation, &ldquo;S60 Platform: IP Bearer Management,&rdquo; 2007.</span><span>)</span></a> that contains all information
required for opening a network connection using a specific access
technology. A device may have several IAPs configured for different
network technologies and settings (multiple WLAN SSIDs, GPRS APNs,
dial-up numbers, and so forth). There may also be 'virtual' IAPs that
define parameters needed for tunnel establishment (e.g. for VPN).

</p>
<p>
For each application, a correct IAP needs to be selected at the point
when the application requires network connectivity. This is essential,
as the wrong IAP may not be able to support the application or reach
the desired destination. For example, MMS application must use the
correct IAP in order to reach the MMS Gateway, which typically is not
accessible from the public Internet. As another example, an
application might need to use the IAP associated with its corporate
VPN in order to reach internal corporate servers.  Binding
applications to IAPs avoids several problems, such as choosing the
correct DNS server in the presence of split DNS (as an application
will use the DNS server list from its bound IAP), and overlapping
private IPv4 address spaces used for different interfaces (as each
application will use the default routes from its bound IAP).

</p>
<p>
If multiple applications utilize the same IAP, the underlying network
connection can typically be shared. This is often the case when
multiple Internet-using applications are running in parallel.

</p>
<p>
The IAP for an application can be selected in multiple ways:

</p>
<p>
      </p>
<ul class="text">
<li>
      Statically: e.g. from a configuration interface, via client
      provisioning/device management system, or at build-time.
      
</li>
<li>
      Manually by the user: e.g. each time an application starts the
      user may be asked to select the IAP to use. This may be needed,
      for example, if a user sometimes wishes to access his corporate
      intranet and other times would prefer to access the Internet
      directly.
      
</li>
<li>
      Automatically by the system: after the destination network has
      been selected statically or dynamically.
      
</li>
</ul><p>

</p>
<p>
The static approach is fine for certain applications, like MMS, for
which configuration can be provisioned by the network operator and
does not change often. Manual selection works, but may be seen as
troublesome by the user. An automatic selection mechanism needs to
have some way of knowing which destination network the user, or an
application, is trying access.

</p>
<p>
S60 3rd Edition, Feature Pack 2, introduces a concept of Service
Network Access Points (SNAPs) that group together IAPs that lead to
the same destination.  This enables static or manual selection of the
destination network for an application and leaves the problem of
selecting the best of the available IAPs within a SNAP to the
operating system.

</p>
<p>
When SNAPs are used, it is possibly for the operating system to notify
applications when a preferred IAP, leading to the same destination,
becomes available (for example, when a user comes within range of his
home WLAN access point), or when the currently used IAP is no longer
available and applications have to reconnect via another IAP (for
example, when a user goes out of range of his home WLAN and must move
to the cellular network).

</p>
<p>
Please see the source documentation for more details and screenshots: 
<a class='info' href='#S60'>[S60]<span> (</span><span class='info'>Nokia Corporation, &ldquo;S60 Platform: IP Bearer Management,&rdquo; 2007.</span><span>)</span></a>.

</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.2"></a><h3>3.1.2.&nbsp;
Microsoft Windows Mobile 2003 Second Edition</h3>

<p>
A Connection Manager architecture is described
in <a class='info' href='#WINDOWSMOBILE'>[WINDOWSMOBILE]<span> (</span><span class='info'>Microsoft Corporation, &ldquo;SDK Documentation for Windows Mobile-Based Smartphones: Connection Manager,&rdquo; 2005.</span><span>)</span></a>.  This architecture
centralizes and automates network connection establishment and
management, and makes it possible to automatically select a
connection, to dial-in automatically or by user initiation, and to
optimize connection and shared resource usage. Connection Manager
periodically re-evaluates the validity of the connection
selection. The Connection Manager uses various attributes such as
cost, security, bandwidth, error rate, and latency in its decision
making.

</p>
<p>
The Connection Manager selects the best possible connection for the
application based on the destination network the application wishes to
reach. The selection is made between available physical and virtual
connections (e.g. VPN, GPRS, WLAN, and wired Ethernet) that are known
to provide connectivity to the destination network, and the selection
is based on the costs associated with each connection. Different
applications are bundled to use the same network connection when
possible, but in conflict situations when a connection cannot be
shared, higher priority applications take precedence, and the lower
priority applications lose connectivity until the conflict situation
clears.

</p>
<p>
During operation, Connection Manager opens new connections as
needed, and also disconnects unused or idle connections.

</p>
<p>
To optimize resource use, such as battery power and bandwidth,
Connection Manager enables applications to synchronize network
connection usage by allowing applications to register their
requirements for periodic connectivity. An application is notified
when a suitable connection becomes available for its use.

</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.3"></a><h3>3.1.3.&nbsp;
BlackBerry</h3>

<p>
In BlackBerry devices <a class='info' href='#BLACKBERRY'>[BLACKBERRY]<span> (</span><span class='info'>Research In Motion Limited, &ldquo;BlackBerry Java Development Environment - Fundamentals Guide: Wireless gateways,&rdquo; 2009.</span><span>)</span></a> Java
applications can use one of two wireless gateways to proxy the
connection to the Internet or to a corporate network. The application
can be designed to always use the default Internet gateway, or to use
a more preferred enterprise gateway when available. The intent is to
hide connectivity issues from users.

</p>
<p>
A BlackBerry device <a class='info' href='#BLACKBERRY'>[BLACKBERRY]<span> (</span><span class='info'>Research In Motion Limited, &ldquo;BlackBerry Java Development Environment - Fundamentals Guide: Wireless gateways,&rdquo; 2009.</span><span>)</span></a> can access different destinations 
using multiple access (wireless/wired) networks simultaneously. A device can also access the same 
destination using multiple access networks simultaneously. The device can select 
the network interface to be used in various ways. For instance, it can use the default network interface 
(or the default access network) or choose from available active network interfaces based on cost, 
type-of-service and/or use preference. Multiple network interfaces can be associated with 
a single IP stack or multiple IP stacks. 

</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.4"></a><h3>3.1.4.&nbsp;
Google Android</h3>

<p>
The Android reference documentation describes the android.net
package <a class='info' href='#ANDROID'>[ANDROID]<span> (</span><span class='info'>Google Inc., &ldquo;Android developers: package android.net,&rdquo; 2009.</span><span>)</span></a> and the ConnectivityManager
class that applications can use to request a route to a specified
destination address via a specified network interface
(3GPP or Wifi). Applications also ask Connection Manager for permission
to start using a network feature. The Connectivity Manager monitors
changes in network connectivity and attempts to failover to another
network if connectivity to an active network is lost. When there are
changes in network connectivity, applications are
notified. Applications are also able to ask for information about all
network interfaces, including their availability, type and other
information.

</p>
<p>
Applications are bound to use one network type at a time. For example, on a 3G/Wifi HTC Dream (Android 1.5),
 web browsing uses only the Wifi access when both 3G and WiFi are available. However different applications 
can use different access at the same time. For instance, the HTC Dream can utilize
WLAN access for web browsing and GPRS access for transferring multimedia messages (MMS).  

</p>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.5"></a><h3>3.1.5.&nbsp;
Qualcomm Brew</h3>

<p>
This section describes how multi-interface support is handled by Advanced Mobile Station Software (AMSS) 
that comes with Brew OS for all Qualcomm chipsets (e.g., MSM, Snapdragon etc). 

AMSS is a low level connectivity platform, on top of which manufacturers can build to provide the necessary 
connectivity to applications. The interaction model between AMSS, the Operating System, and the applications 
is not unique and depend on the design chosen by the manufacturer. The Mobile OS can let an application invoke 
the AMSS directly (via API), or provide its own connection manager that will request connectivity to the AMSS 
based on applications needs. The interaction between the OS connection manager and the applications is OS dependent.

</p>
<p>
AMSS supports a concept of netpolicy which allows each application
to specify the type of network connectivity desired. 
The netpolicy contains parameters such as access technology, IP version type and
network profile. Access technology could be a specific technology
type such as CDMA or WiFi or could be a group of technologies, such as
ANY_Cellular or ANY_Wireless. IP version could be one of IPv4, IPv6
or Default. The network profile identifies a type of network domain
or service within a certain network technology, such as 3GPP APN or
Mobile IP Home Agent. It also specifies all the mandatory parameters
required to connect to the domain such authentication credentials and
other optional parameters such as QoS attributes. Network Profile is
technology specific and set of parameters contained in the profile
could vary for different technologies.

</p>
<p>
Two models of network usage are supported:
</p>
<ul class="text">
<li>
Applications requiring network connectivity specify an appropriate
netpolicy in order to select the desired network.  The netpolicy may
match one or more network interfaces. AMSS system selection module
selects the best interface out of the ones that match the netpolicy
based on various criteria such as cost, speed or other provisioned
rules. Application explicitly starts the selected network interface
and, as a result, the application also gets bound to the corresponding
network interface. All outbound packets from this application are
always routed over this bound interface using the source address of
the interface.

</li>
<li>
Applications may rely on a separate connection manager to
control (e.g. start/stop) the network interface. In this model,
applications are not necessarily bound to any one interface. All
outbound packets from such applications are routed on one of the
interfaces that match its netpolicy. The routing decision is made
individually for each packet and  selects the best interface based on
the criteria described above and the destination address. Source
address is always that assigned to the interface used to transmit the
packet.

</li>
</ul><p>

</p>
<p>
All of the routing/interface selection decisions are based
on the netpolicy and not just on the destination address to avoid overlapping
private IPv4 address issue. This also allows multiple
interfaces to be configured with the same IP address, for example, to
handle certain tunnelling scenarios. Applications that do not
specify a netpolicy are routed by AMSS to the best possible interface
using the default netpolicy. Default netpolicy could be pre-defined
or provisioned by the administrator or operator. Hence default
interface could vary from device to device and also depends upon the
available networks at any given time.

</p>
<p>
AMSS allows each interface to be configured with its own set of DNS
configuration parameters (e.g. list of DNS servers, domain names etc.).
Interface selected to make a DNS resolution is the one to which
application making the DNS query is bound. Applications can also
specify a different netpolicy as part of DNS request to select another
interface for DNS resolution. Regardless, all the DNS queries are
sent only over this selected interface using the DNS configuration
from the interface. DNS resolution is first attempted with the
primary server configured in the interface. If a response is not
received, the queries are sent to all the other servers configured in
the interface in a sequential manner using a backoff mechanism.

</p>
<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.6"></a><h3>3.1.6.&nbsp;
Arena Connection Manager</h3>

<p>
Arena, a mobile OS based on Linux, provides a Connection Manager, which is described in
<a class='info' href='#I-D.zhang-mif-connection-manager-arena'>[I&#8209;D.zhang&#8209;mif&#8209;connection&#8209;manager&#8209;arena]<span> (</span><span class='info'>Zhang, Y., Sun, T., and H. Chen, &ldquo;Multi-interface Network Connection Manager in Arena Platform,&rdquo; February&nbsp;2009.</span><span>)</span></a> and
<a class='info' href='#I-D.yang-mif-connection-manager-impl-req'>[I&#8209;D.yang&#8209;mif&#8209;connection&#8209;manager&#8209;impl&#8209;req]<span> (</span><span class='info'>Yang, J., Sun, T., and S. Fan, &ldquo;Multi-interface Connection Manager Implementation and Requirements,&rdquo; March&nbsp;2009.</span><span>)</span></a>.  The
arena connection manager provides a means for applications to 
register their connectivity requirement.
The Connection Manager can then choose an interface that matches
the application's needs while considering other factors such as
availability, cost and stability.  Also, the Connection Manager
can handle multi-interface issues such as connection sharing.

</p>
<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1.7"></a><h3>3.1.7.&nbsp;
Access selection</h3>

<p>
		This section describes the behavior of connection managers in presence of multiple points of attachment for a same interface. 
		The section focuses on Wifi interface, it is described how does the connection manager deal with the list of preferred SSID and how does it select the SSID for attachment.
		Current implementation of connection managers are considered for the following handsets: LG Pathfinder, HTC  Android,  RIM BlackBerry , iPhone (3G and 3GS).
	
</p>
<p>
		When the terminal is under coverage of different WiFi networks with different SSIDs:
		</p>
<blockquote class="text">
<p>
				connection managers, excepted for the RIM Blackberry, 
				construct the list of preferred SSID giving priority to the last SSID on which they have managed to attach. The user is not allowed to define its preferred access. 
				So, if the terminal discovers and manages to attach to SSID1, SSID1 becomes the preferred access for future attachment.
				If the terminal moves out of SSID1 coverage and attaches to a new SSID, SSID2. SSID2 will then be the preferred access of the connection manager. 
				Then, if the terminal processes to Wifi attachment within both SSID1 and SSID2 coverage, the connection manager will select SSID2 for attachment. 
				The RIM Blackberry behaves differently, the connection manager selects the first SSID on which it has managed to attach in the past.
			
</p>
<p>
				All connection managers behave in the same way when the terminals fails to attach to the selected SSID: the connection manager automatically selects the second SSID 
				in the list of preferred SSID. Fallback come into play at expiration of a timeout from few seconds to about 3 minutes.           
			
</p>
<p>
				When the IP stack fails to obtain an IP address, the handset, excepted the Iphone, restarts Wifi attachment selecting the second SSID in the list.
			
</p>
</blockquote><p>
	
</p>
<p>
		When the terminal receives signals from different point of attachment with same SSID:
		</p>
<blockquote class="text">
<p>
				The connection manager selects the point of attachment with best signal strength; 
				no other criteria (e.g. MAC address) is taken into account. If the handset fails to attach to the selected point of attachment (e.g. due to L2 authentication failure), 
				the connection manager selects the point of attachment with lower signal strength. However, this fallback is not supported on the LG pathfinder. If no more points of attachment
				(corresponding to the preferred SSID) are available,
				the connection manager selects the second SSID in the list of preferred SSID. 
			
</p>
<p>
				Whatever is the handset, fallback on L3 attachment failure is not supported for motionless terminals. Actually, the connection manager always selects the most powerful 
				signal strength without considering IP configuration results. 
				In other words, if the terminal is unable to set up the IP connectivity on one wifi access, the connection manager will not try to attach to an alternative point of attachment 
				(or SSID) as long as the signal strength of the first radio link is the most powerful. Situation is not the same for mobile terminal
				since the signal strength of the alternative point of attachment could become better while the terminal is moving. If so, the terminal automatically 
				restarts IP connectivity process (excepted the HTC Magic which requires the user to manually restart the L3 attachment).
			
</p>
</blockquote><p>


	
</p>
<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Desktop Operating Systems</h3>

<p>
Multi-interface issues also occur in desktop environments in those
cases where a desktop host has multiple (logical or physical)
interfaces connected to networks with different reachability
properties, such as one interface connected to the global Internet,
while another interface is connected to a corporate VPN.

</p>
<a name="anchor19"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.1"></a><h3>3.2.1.&nbsp;
Microsoft Windows</h3>

<p>
The multi-interface functionality currently implemented in Microsoft
Windows operation systems is described in more detail
in <a class='info' href='#I-D.montenegro-mif-multihoming'>[I&#8209;D.montenegro&#8209;mif&#8209;multihoming]<span> (</span><span class='info'>Montenegro, G., Thaler, D., and S. Seshadri, &ldquo;Multiple Interfaces on Windows,&rdquo; March&nbsp;2009.</span><span>)</span></a>.

</p>
<a name="anchor20"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.1.1"></a><h3>3.2.1.1.&nbsp;
Routing</h3>

<p>
It is possible, although not often desirable, to configure default
routers on more than one Windows interface.  In this configuration,
Windows will use the default route on the interface with the lowest
routing metric (i.e. the fastest interface).  If multiple interfaces
share the same metric, the behavior will differ based on the version
of Windows in use.  Prior to Windows Vista, the packet would be routed
out of the first interface that was bound to the TCP/IP stack, the
preferred interface.  In Windows vista, host-to-router load
sharing <a class='info' href='#RFC4311'>[RFC4311]<span> (</span><span class='info'>Hinden, R. and D. Thaler, &ldquo;IPv6 Host-to-Router Load Sharing,&rdquo; November&nbsp;2005.</span><span>)</span></a> is used for both IPv4 and IPv6.

</p>
<a name="anchor21"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.1.2"></a><h3>3.2.1.2.&nbsp;
Outbound and Inbound Addresses</h3>

<p>
If the source address of the outgoing packet has not been determined
by the application, Windows will choose from the addresses assigned to
its interfaces.  Windows implements <a class='info' href='#RFC3484'>[RFC3484]<span> (</span><span class='info'>Draves, R., &ldquo;Default Address Selection for Internet Protocol version 6 (IPv6),&rdquo; February&nbsp;2003.</span><span>)</span></a> for source
address selection in IPv6 and, in Windows Vista, for IPv4.  Prior to
Windows Vista, IPv4 simply chose the first address on the outgoing
interface.

</p>
<p>
For incoming packets, Windows will check if the destination address 
matches one of the addresses assigned to its interfaces.  Windows has
implemented the weak host model <a class='info' href='#RFC1122'>[RFC1122]<span> (</span><span class='info'>Braden, R., &ldquo;Requirements for Internet Hosts - Communication Layers,&rdquo; October&nbsp;1989.</span><span>)</span></a> on IPv4 in
Windows 2000, Windows XP and Windows Server 2003.  The strong host 
model became the default for IPv4 in Windows Vista and Windows server
2008, however the weak host model is available via per-interface 
configuration.  IPv6 has always implemented the strong host model.

</p>
<a name="anchor22"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.1.3"></a><h3>3.2.1.3.&nbsp;
DNS Configuration</h3>

<p>
Windows largely relies on suffixes to solve DNS resolution issues. Suffixes are used for four different purposes that are reminded hereafter:
</p>
<ol class="text">
<li>DNS Suffix Search List (aka domain search list): suffix is added to non-FQDN names.
</li>
<li>Interface-specific suffix list, which allows sending different DNS queries to different DNS servers.
</li>
<li>Suffix to control Dynamic DNS Updates: determine which DNS server will receive a dynamic update for a name with a certain suffix.
</li>
<li>Suffix in the Name Resolution Policy Table <a class='info' href='#NRPT'>[NRPT]<span> (</span><span class='info'>Windows, &ldquo;Name Resolution Policy Table,&rdquo; February&nbsp;2010.</span><span>)</span></a> to aid in identifying a Namespace that requires special handling 
  (feature available only after Windows 7 and its server counterpart, Windows Server 2008 R2).
</li>
</ol><p>
However, this section focuses on the interface-specific suffix list since it is the only suffix usage in the scope of MIF.

</p>
<p>
DNS configuration information can be host-wide or interface specific. Host-wide DNS configuration is 
input via static configuration or, in  sites that use Active Directory, Microsoft's Group Policy.  
Interface specific DNS configuration can be input via static configuration
or via DHCP.

</p>
<p>
The host-wide configuration consists of a primary DNS suffix to be used for the local host, as
well as a list of suffix that can be appended to names being queried.
Before Windows Vista and Windows Server 2008, there was also a host-wide
DNS server list that took precedent over per-interface DNS configuration.

</p>
<p>
The interface-specific DNS configuration comprises an interface-specific suffix list 
and a list of DNS server IP addresses.

</p>
<p>
Windows uses a host-wide "effective" server list for an actual query, 
where the effective server list may be different for different names.
In the list of DNS server addresses, the first server is considered the
"primary" server, with all other servers being secondary.

</p>
<p>
When a DNS query is performed in Windows, the query is first sent to
the primary DNS server on the preferred interface.  If no response is
received in one second, the query is sent to the primary DNS servers
on all interfaces under consideration.  If no response is received for
2 more seconds, the DNS server sends the query to all of the DNS
servers on the DNS server lists for all interfaces under
consideration.  If the host still doesn't receive a response after 4
seconds, it will send to all of the servers again and wait 8 seconds
for a response.

</p>
<a name="anchor23"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.2"></a><h3>3.2.2.&nbsp;
Linux and BSD-based Operating Systems</h3>

<p>
Most BSD and Linux distributions rely on their DHCP client to handle
the configuration of interface-specific information (such as an IP
address and netmask), and a set of system-wide configuration
information, (such a DNS server list, an NTP server list and default
routes). Users of these operating systems have the choice of using any
DHCP client available for their platform, with an operating system
default. This section discusses the behavior of several DHCP clients
that may be used with Linux and BSD distributions.

</p>
<p>
The Internet Systems Consortium (ISC) DHCP
Client <a class='info' href='#ISCDHCP'>[ISCDHCP]<span> (</span><span class='info'>Internet Software Consortium, &ldquo;ISC DHCP,&rdquo; 2009.</span><span>)</span></a> and its derivative for
OpenBSD <a class='info' href='#OPENBSDDHCLIENT'>[OPENBSDDHCLIENT]<span> (</span><span class='info'>OpenBSD, &ldquo;OpenBSD dhclient,&rdquo; 2009.</span><span>)</span></a> can be configured with
specific instructions for each interface. However, each time new
configuration data is received by the host from a DHCP server,
regardless of which interface it is received on, the DHCP client
rewrites the global configuration data, such as the default routes and
the DNS server list (in /etc/resolv.conf) with the most recent
information received. Therefore, the last configured interface always
become the primary one. The ISC DHCPv6 client behaves similarly.

</p>
<p>
The Phystech dhcpcd client <a class='info' href='#PHYSTECHDHCPC'>[PHYSTECHDHCPC]<span> (</span><span class='info'>Phystech, &ldquo;dhcpcd,&rdquo; 2009.</span><span>)</span></a>
behaves similarly to the ISC client.  It replaces the DNS server list
in /etc/resolv.conf and the default routes each time new DHCP
information is received on any interface. However, the -R flag can be
used to instruct the client to not replace the DNS servers in
/etc/resolv.conf. However, this flag is a global flag for the DHCP
server, and is therefore applicable to all interfaces. When dhcpd is
called with the -R flag, the DNS servers are never replaced.

</p>
<p>
The pump client <a class='info' href='#PUMP'>[PUMP]<span> (</span><span class='info'>RedHat, &ldquo;PUMP,&rdquo; 2009.</span><span>)</span></a> also behaves similarly to
the ISC client.  It replaces the DNS servers in /etc/resolv.conf and
the default routes each time new DHCP information is received on any
interface. However, the nodns and nogateway options can be specified
on a per interface basis, enabling the user to define which interface
should be used to obtain the global configuration information.

</p>
<p>
The udhcp client <a class='info' href='#UDHCP'>[UDHCP]<span> (</span><span class='info'>Busybox, &ldquo;uDHCP,&rdquo; 2009.</span><span>)</span></a> is often used in
embedded platforms based on busybox. The udhcp client behaves
similarly to the ISC client. It rewrites default routes and the DNS
server list each time new DHCP information is received.

</p>
<p>
Redhat-based distributions, such as Redhat, Centos and Fedora have a
per-interface configuration option (PEERDNS) that indicates that the 
DNS server list should not be updated based on configuration received
on that interface.

</p>
<p>
The most configurable DHCP clients can be set to define a primary
interface to use only that interface for the global configuration
data. However, this is limited, since a mobile host might not always
have the same set of interfaces available. Connection managers may help
in this situation.

</p>
<p>
Some distributions also have a connection manager. However, most 
connection managers serve as a GUI to the DHCP client, therefore not changing
the functionality described above.

</p>
<a name="anchor24"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2.3"></a><h3>3.2.3.&nbsp;
Apple Mac OS X</h3>

<p>
This section is based on testing Mac OS X (version 10.5.6). 

</p>
<p>
When using multiple interfaces on Mac OS X, global configuration data
such as default routes and the DNS server list are taken from the DHCP
data received on the primary interface. Therefore, the order in which
the interfaces receive their configuration data is not relevant. For
example, if the primary interface receives its configuration data
first, then the second interface receives its configuration data, the
interface-specific information for the second interface will be
configured, but the global configuration information such as the DNS
server list and default routes is not overwritten.

</p>
<a name="Acknowledgements"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Acknowledgements</h3>

<p>
Authors of the document would like to thank following people for their
input and feedback: Dan Wing, Hui Deng, Jari Arkko, Julien Laganier.

</p>
<a name="IANA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
IANA Considerations</h3>

<p>
This memo includes no request to IANA.

</p>
<a name="Security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Security Considerations</h3>

<p>
This document describes current operating system implementations and
how they handle the issues raised in the MIF problem statement.  While
it is possible that the currently implemented mechanisms described in
this document may affect the security of the systems described, this
document merely reports on current practice.  It does not attempt to
analyze the security properties (or any other architectural
properties) of the currently implemented mechanisms.

</p>
<a name="anchor25"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Change Log</h3>

<p>
The following changes were made between versions -00 and -02:
</p>
<ul class="text">
<li> Added information on usage of suffix with Windows.
</li>
<li> new section describing Qualcomm AMSS/Brew Multi-interface handling
</li>
<li> Considerations on access selection for some current connection managers.
</li>
<li> Added information  on multiple-interface scenarios with Google Android.
</li>
<li>	Clarifications on Arena connection manager
</li>
<li> Clarifications on multiple interface handling with RIM blackberry.
</li>
<li> Added new contributors.
</li>
</ul><p>

</p>
<a name="anchor26"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Contributors</h3>

<p>
The following people contributed most of the per-Operating System
information found in this document:
</p>
<ul class="text">
<li>Marc Blanchet, Viagenie
</li>
<li>Hua Chen, Leadcoretech, Ltd.
</li>
<li>Yan Zhang, Leadcoretech Ltd.
</li>
<li>Shunan Fan, Huawei Technology
</li>
<li>Jian Yang, Huawei Technology
</li>
<li>Gabriel Montenegro, Microsoft Corporation
</li>
<li>Shyam Seshadri, Microsoft Corporation 
</li>
<li>Dave Thaler, Microsoft Corporation
</li>
<li>Teemu Savolainen, Nokia
</li>
<li>Tao Sun, China Mobile
</li>
<li>George Tsirtsis, Qualcomm.
</li>
<li>David Freyermuth, France telecom.
</li>
<li>Aurelien Collet, Altran.
</li>
<li>Giyeong Son, RIM.
</li>
</ul><p>

</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-mif-problem-statement">[I-D.ietf-mif-problem-statement]</a></td>
<td class="author-text">Blanchet, M. and P. Seite, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-mif-problem-statement-04.txt">Multiple Interfaces Problem Statement</a>,&rdquo; draft-ietf-mif-problem-statement-04 (work in progress), May&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-mif-problem-statement-04.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="ANDROID">[ANDROID]</a></td>
<td class="author-text">Google Inc., &ldquo;<a href="http://developer.android.com/reference/android/net/ConnectivityManager.html">Android developers: package android.net</a>,&rdquo; 2009.</td></tr>
<tr><td class="author-text" valign="top"><a name="BLACKBERRY">[BLACKBERRY]</a></td>
<td class="author-text">Research In Motion Limited, &ldquo;<a href="http://na.blackberry.com/eng/deliverables/5827/Wireless_gateways_447132_11.jsp">BlackBerry Java Development Environment - Fundamentals Guide: Wireless gateways</a>,&rdquo; 2009.</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.montenegro-mif-multihoming">[I-D.montenegro-mif-multihoming]</a></td>
<td class="author-text">Montenegro, G., Thaler, D., and S. Seshadri, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-montenegro-mif-multihoming-00.txt">Multiple Interfaces on Windows</a>,&rdquo; draft-montenegro-mif-multihoming-00 (work in progress), March&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-montenegro-mif-multihoming-00.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.yang-mif-connection-manager-impl-req">[I-D.yang-mif-connection-manager-impl-req]</a></td>
<td class="author-text">Yang, J., Sun, T., and S. Fan, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-yang-mif-connection-manager-impl-req-00.txt">Multi-interface Connection Manager Implementation and Requirements</a>,&rdquo; draft-yang-mif-connection-manager-impl-req-00 (work in progress), March&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-yang-mif-connection-manager-impl-req-00.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.zhang-mif-connection-manager-arena">[I-D.zhang-mif-connection-manager-arena]</a></td>
<td class="author-text">Zhang, Y., Sun, T., and H. Chen, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-zhang-mif-connection-manager-arena-00.txt">Multi-interface Network Connection Manager in Arena Platform</a>,&rdquo; draft-zhang-mif-connection-manager-arena-00 (work in progress), February&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-zhang-mif-connection-manager-arena-00.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="ISCDHCP">[ISCDHCP]</a></td>
<td class="author-text">Internet Software Consortium, &ldquo;<a href="http://www.isc.org/software/dhcp">ISC DHCP</a>,&rdquo; 2009.</td></tr>
<tr><td class="author-text" valign="top"><a name="NRPT">[NRPT]</a></td>
<td class="author-text">Windows, &ldquo;<a href=" http://technet.microsoft.com/en-us/magazine/ff394369.aspx">Name Resolution Policy Table</a>,&rdquo; February&nbsp;2010.</td></tr>
<tr><td class="author-text" valign="top"><a name="OPENBSDDHCLIENT">[OPENBSDDHCLIENT]</a></td>
<td class="author-text">OpenBSD, &ldquo;<a href="http://www.openbsd.org/">OpenBSD dhclient</a>,&rdquo; 2009.</td></tr>
<tr><td class="author-text" valign="top"><a name="PHYSTECHDHCPC">[PHYSTECHDHCPC]</a></td>
<td class="author-text">Phystech, &ldquo;<a href="http://www.phystech.com/download/dhcpcd.html">dhcpcd</a>,&rdquo; 2009.</td></tr>
<tr><td class="author-text" valign="top"><a name="PUMP">[PUMP]</a></td>
<td class="author-text">RedHat, &ldquo;<a href="http://redhat.com">PUMP</a>,&rdquo; 2009.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC1122">[RFC1122]</a></td>
<td class="author-text"><a href="mailto:Braden@ISI.EDU">Braden, R.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc1122">Requirements for Internet Hosts - Communication Layers</a>,&rdquo; STD&nbsp;3, RFC&nbsp;1122, October&nbsp;1989 (<a href="http://www.rfc-editor.org/rfc/rfc1122.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3484">[RFC3484]</a></td>
<td class="author-text">Draves, R., &ldquo;<a href="http://tools.ietf.org/html/rfc3484">Default Address Selection for Internet Protocol version 6 (IPv6)</a>,&rdquo; RFC&nbsp;3484, February&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3484.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4311">[RFC4311]</a></td>
<td class="author-text">Hinden, R. and D. Thaler, &ldquo;<a href="http://tools.ietf.org/html/rfc4311">IPv6 Host-to-Router Load Sharing</a>,&rdquo; RFC&nbsp;4311, November&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4311.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="S60">[S60]</a></td>
<td class="author-text">Nokia Corporation, &ldquo;<a href="http://www.forum.nokia.com/info/sw.nokia.com/id/190358c8-7cb1-4be3-9321-f9d6788ecae5/S60_Platform_IP_Bearer_Management_v1_0_en.pdf.html">S60 Platform: IP Bearer Management</a>,&rdquo; 2007.</td></tr>
<tr><td class="author-text" valign="top"><a name="UDHCP">[UDHCP]</a></td>
<td class="author-text">Busybox, &ldquo;<a href="http://sources.busybox.net/index.py/trunk/busybox/networking/udhcp/">uDHCP</a>,&rdquo; 2009.</td></tr>
<tr><td class="author-text" valign="top"><a name="WINDOWSMOBILE">[WINDOWSMOBILE]</a></td>
<td class="author-text">Microsoft Corporation, &ldquo;<a href="http://msdn.microsoft.com/en-us/library/aa457829.aspx">SDK Documentation for Windows Mobile-Based Smartphones: Connection Manager</a>,&rdquo; 2005.</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Margaret Wasserman (editor)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Painless Security, LLC</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">356 Abbott Street</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">North Andover, MA  01845</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 781 405-7464</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:mrw@painless-security.com">mrw@painless-security.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.painless-security.com">http://www.painless-security.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Pierrick Seite (editor)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">France Telecom - Orange</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">4, rue du clos courtel BP 91226</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cesson-Sevigne  35512</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">France</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:pierrick.seite@orange-ftgroup.com">pierrick.seite@orange-ftgroup.com</a></td></tr>
</table>
</body></html>
