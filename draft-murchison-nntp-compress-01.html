<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Network News Transfer Protocol (NNTP) Extension for Compression</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Network News Transfer Protocol (NNTP) Extension for Compression">
<meta name="keywords" content="NNTP, COMPRESS, DEFLATE, compression">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Independent Submission</td><td class="header">K. Murchison</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Carnegie Mellon University</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">January 26, 2010</td></tr>
<tr><td class="header">Expires: July 30, 2010</td><td class="header">&nbsp;</td></tr>
</table></td></tr></table>
<h1><br />Network News Transfer Protocol (NNTP) Extension for Compression<br />draft-murchison-nntp-compress-01.txt</h1>

<h3>Abstract</h3>

<p>This memo defines an extension to the Network News Transport
  Protocol (NNTP) to allow a connection to be effectively and
  efficiently compressed.
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on July 30, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#intro">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor1">1.1.</a>&nbsp;
Conventions Used in This Document<br />
<a href="#compressext">2.</a>&nbsp;
The COMPRESS Extension<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#advertising">2.1.</a>&nbsp;
Advertising the COMPRESS Extension<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#compresscmd">2.2.</a>&nbsp;
COMPRESS Command<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#usage">2.2.1.</a>&nbsp;
Usage<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#description">2.2.2.</a>&nbsp;
Description<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#examples">2.2.3.</a>&nbsp;
Examples<br />
<a href="#efficiency">3.</a>&nbsp;
Compression Efficiency<br />
<a href="#ABNF">4.</a>&nbsp;
Augmented BNF Syntax for the COMPRESS Extension<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#commands">4.1.</a>&nbsp;
Commands<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#capabilities">4.2.</a>&nbsp;
Capability entries<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#non-terminals">4.3.</a>&nbsp;
General Non-terminals<br />
<a href="#respcodes">5.</a>&nbsp;
Summary of Response Codes<br />
<a href="#security">6.</a>&nbsp;
Security Considerations<br />
<a href="#anchor2">7.</a>&nbsp;
IANA Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#compreg">7.1.</a>&nbsp;
NNTP Compression Algorithm Registry<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#regproc">7.1.1.</a>&nbsp;
Algorithm Name Registration Procedure<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#regcomments">7.1.2.</a>&nbsp;
Comments on Algorithm Registrations<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#changecontrol">7.1.3.</a>&nbsp;
Change Control<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">7.2.</a>&nbsp;
Registration of the DEFLATE Compression Algorithm<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">7.3.</a>&nbsp;
Registration of the NNTP COMPRESS Extension<br />
<a href="#rfc.references1">8.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">8.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">8.2.</a>&nbsp;
Informative References<br />
<a href="#anchor7">Appendix&nbsp;A.</a>&nbsp;
Acknowledgements<br />
<a href="#anchor8">Appendix&nbsp;B.</a>&nbsp;
Document History (to be removed by RFC Editor before
		publication)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">B.1.</a>&nbsp;
Changes since -00<br />
<a href="#anchor10">Appendix&nbsp;C.</a>&nbsp;
Issues to be addressed<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Author's Address<br />
</p>
<br clear="all" />

<a name="intro"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>The goal of COMPRESS is to reduce the bandwidth usage of NNTP.
</p>
<p>Compared to PPP compression <a class='info' href='#RFC1962'>[RFC1962]<span> (</span><span class='info'>Rand, D. and K. Fox, &ldquo;The PPP Compression Control Protocol (CCP),&rdquo; June&nbsp;1996.</span><span>)</span></a> and
  modem-based compression (<a class='info' href='#MNP'>[MNP]<span> (</span><span class='info'>Held, G., &ldquo;The Complete Modem Reference,&rdquo; May&nbsp;1994.</span><span>)</span></a> and
  <a class='info' href='#V42bis'>[V42bis]<span> (</span><span class='info'>International Telecommunications     Union, &ldquo;Data compression procedures for data circuit-terminating   equipment (DCE) using error correction procedures,&rdquo; January&nbsp;1990.</span><span>)</span></a>), COMPRESS offers greater compression
  efficiency.  COMPRESS can be used together with Transport Layer
  Security (TLS) <a class='info' href='#RFC5246'>[RFC5246]<span> (</span><span class='info'>Dierks, T. and E. Rescorla, &ldquo;The Transport Layer Security (TLS) Protocol Version 1.2,&rdquo; August&nbsp;2008.</span><span>)</span></a>, Simple Authentication and
  Security Layer (SASL) encryption <a class='info' href='#RFC4422'>[RFC4422]<span> (</span><span class='info'>Melnikov, A. and K. Zeilenga, &ldquo;Simple Authentication and Security Layer (SASL),&rdquo; June&nbsp;2006.</span><span>)</span></a>, Virtual
  Private Networks (VPNs), etc.
</p>
<p>Compared to TLS compression
  <a class='info' href='#RFC3749'>[RFC3749]<span> (</span><span class='info'>Hollenbeck, S., &ldquo;Transport Layer Security Protocol Compression Methods,&rdquo; May&nbsp;2004.</span><span>)</span></a>, NNTP COMPRESS has the following
  advantages:

</p>
<ul class="text">
<li>COMPRESS can be implemented easily both by NNTP servers and
  clients.
</li>
<li>COMPRESS benefits from an intimate knowledge of the NNTP
  protocol's state machine, allowing for dynamic and aggressive
  optimization of the underlying compression algorithm's
  parameters.
</li>
</ul>

<p>and the following disadvantages:

</p>
<ul class="text">
<li>When the TLS layer implements compression, any protocol using that
  layer can transparently benefit from that compression (e.g., SMTP
  and NNTP).  COMPRESS is specific to NNTP.
</li>
</ul>

<p>In order to increase interoperability, it is desirable to have as
   few different compression algorithms as possible, so this document
   specifies only one.  The DEFLATE algorithm (defined in
   <a class='info' href='#RFC1951'>[RFC1951]<span> (</span><span class='info'>Deutsch, P., &ldquo;DEFLATE Compressed Data Format Specification version 1.3,&rdquo; May&nbsp;1996.</span><span>)</span></a>) is standard, widely available and fairly
   efficient, and MUST be implemented as part of this extension.
</p>
<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Conventions Used in This Document</h3>

<p>The notational conventions used in this document are the same as
  those in <a class='info' href='#RFC3977'>[RFC3977]<span> (</span><span class='info'>Feather, C., &ldquo;Network News Transfer Protocol (NNTP),&rdquo; October&nbsp;2006.</span><span>)</span></a> and any term not defined in this
  document has the same meaning as in that one.
</p>
<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
  "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
  document are to be interpreted as described in
  <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
</p>
<p>In the examples, commands from the client are indicated with [C],
  and responses from the server are indicated with [S].
</p>
<a name="compressext"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
The COMPRESS Extension</h3>

<p>The COMPRESS extension is used to enable data compression on an
  NNTP connection.
</p>
<p>This extension provides a new COMPRESS command and has capability
  label COMPRESS.
</p>
<a name="advertising"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Advertising the COMPRESS Extension</h3>

<p>A server supporting the COMPRESS command as defined in this
  document will advertise the "COMPRESS" capability label in response
  to the CAPABILITIES command (<a class='info' href='#RFC3977'>[RFC3977]<span> (</span><span class='info'>Feather, C., &ldquo;Network News Transfer Protocol (NNTP),&rdquo; October&nbsp;2006.</span><span>)</span></a> Section
  5.2).  This capability MAY be advertised both before and after any
  use of the MODE READER command (<a class='info' href='#RFC3977'>[RFC3977]<span> (</span><span class='info'>Feather, C., &ldquo;Network News Transfer Protocol (NNTP),&rdquo; October&nbsp;2006.</span><span>)</span></a> Section
  5.3), with the same semantics.
</p>
<p>The COMPRESS capability label contains a whitespace-separated list
  of available compression algorithms.  This document defines one
  compression algorithm: DEFLATE.  This algorithm is mandatory to
  implement and MUST be supported in order to advertise the COMPRESS
  extension.
</p>
<p>Future extensions may add additional compression algorithms to this
  capability.  Unrecognized algorithms MUST be ignored by the
  client.
</p>
<p>Example:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
[C] CAPABILITIES
[S] 101 Capability list:
[S] VERSION 2
[S] READER
[S] IHAVE
[S] COMPRESS DEFLATE X-SHRINK
[S] LIST ACTIVE NEWSGROUPS
[S] .
</pre></div>
<a name="compresscmd"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
COMPRESS Command</h3>

<a name="usage"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.1"></a><h3>2.2.1.&nbsp;
Usage</h3>

<p>This command MUST NOT be pipelined.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Syntax
   COMPRESS algorithm

Responses
   291 Compression active
   403 Unable to activate compression
   502 Command unavailable [1]

[1] If a compression layer is already active, COMPRESS is not a valid
    command (see Section 2.2.2).

Parameters
   algorithm = Name of compression algorithm: "DEFLATE"
</pre></div>
<a name="description"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.2"></a><h3>2.2.2.&nbsp;
Description</h3>

<p>The COMPRESS command instructs the server to use the named
  compression algorithm ("DEFLATE" is the only one defined in this
  document) for all commands and/or responses after COMPRESS.
</p>
<p>The client MUST NOT send any further commands until it has seen the
   result of COMPRESS.
</p>
<p>If the requested compression algorithm is invalid (e.g., is not
   supported), the server MUST reject the COMPRESS command with a 503
   response (<a class='info' href='#RFC3977'>[RFC3977]<span> (</span><span class='info'>Feather, C., &ldquo;Network News Transfer Protocol (NNTP),&rdquo; October&nbsp;2006.</span><span>)</span></a> Section 3.2.1).  If the
   server is unable to activate compression for any reason (e.g., a
   server configuration or resource problem), the server MUST reject
   the COMPRESS command with a 403 response (<a class='info' href='#RFC3977'>[RFC3977]<span> (</span><span class='info'>Feather, C., &ldquo;Network News Transfer Protocol (NNTP),&rdquo; October&nbsp;2006.</span><span>)</span></a>
   Section 3.2.1).  Otherwise, the server issues a 291 response and
   the compression layer takes effect for both client and server
   immediately following the CRLF of the success reply.
</p>
<p>Both the client and the server MUST know if there is a compression
  layer active.  A client MUST NOT attempt to activate compression
  (via either the COMPRESS or STARTTLS <a class='info' href='#RFC4642'>[RFC4642]<span> (</span><span class='info'>Murchison, K., Vinocur, J., and C. Newman, &ldquo;Using Transport Layer Security (TLS) with Network News Transfer Protocol (NNTP),&rdquo; October&nbsp;2006.</span><span>)</span></a>
  commands) if a compression layer is already active.  A server MUST
  NOT return the COMPRESS or STARTTLS capability labels in response to
  a CAPABILITIES command received after a compression layer is active,
  and a server MUST reply with a 502 response code if a syntactically
  valid COMPRESS or STARTTLS command is received while a compression
  layer is already active.
</p>
<p>For DEFLATE <a class='info' href='#RFC1951'>[RFC1951]<span> (</span><span class='info'>Deutsch, P., &ldquo;DEFLATE Compressed Data Format Specification version 1.3,&rdquo; May&nbsp;1996.</span><span>)</span></a> (as for many other compression
  mechanisms), the compressor can trade speed against quality.  The
  decompressor MUST automatically adjust to the parameters selected by
  the sender. Consequently, the client and server are both free to
  pick the best reasonable rate of compression for the data they
  send.
</p>
<p>When COMPRESS is combined with TLS <a class='info' href='#RFC5246'>[RFC5246]<span> (</span><span class='info'>Dierks, T. and E. Rescorla, &ldquo;The Transport Layer Security (TLS) Protocol Version 1.2,&rdquo; August&nbsp;2008.</span><span>)</span></a>
  or SASL <a class='info' href='#RFC4422'>[RFC4422]<span> (</span><span class='info'>Melnikov, A. and K. Zeilenga, &ldquo;Simple Authentication and Security Layer (SASL),&rdquo; June&nbsp;2006.</span><span>)</span></a> security layers, the processing
  order of the three layers MUST be first COMPRESS, then SASL, and
  finally TLS.  That is, before data is transmitted it is first
  compressed.  Second, if a SASL security layer has been negotiated,
  the compressed data is then signed and/or encrypted accordingly.
  Third, if a TLS security layer has been negotiated, the data from
  the previous step is signed and/or encrypted accordingly.  When
  receiving data, the processing order MUST be reversed.  This ensures
  that before sending, data is compressed before it is encrypted,
  independent of the order in which the client issues the COMPRESS,
  AUTHINFO SASL <a class='info' href='#RFC4643'>[RFC4643]<span> (</span><span class='info'>Vinocur, J. and K. Murchison, &ldquo;Network News Transfer Protocol (NNTP) Extension for Authentication,&rdquo; October&nbsp;2006.</span><span>)</span></a>, and STARTTLS
  <a class='info' href='#RFC4642'>[RFC4642]<span> (</span><span class='info'>Murchison, K., Vinocur, J., and C. Newman, &ldquo;Using Transport Layer Security (TLS) with Network News Transfer Protocol (NNTP),&rdquo; October&nbsp;2006.</span><span>)</span></a> commands.
</p>
<a name="examples"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.3"></a><h3>2.2.3.&nbsp;
Examples</h3>

<p>Example of layering TLS and NNTP compression:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
[C] CAPABILITIES
[S] 101 Capability list:
[S] VERSION 2
[S] READER
[S] STARTTLS
[S] AUTHINFO
[S] COMPRESS DEFLATE
[S] .
[C] STARTTLS
[S] 382 Continue with TLS negotiation
[TLS negotiation without compression occurs here]
[Following successful negotiation, all traffic is encrypted]
[C] CAPABILITIES
[S] 101 Capability list:
[S] VERSION 2
[S] READER
[S] AUTHINFO USER
[S] COMPRESS DEFLATE
[S] .
[C] AUTHINFO USER fred
[S] 381 Enter passphrase
[C] AUTHINFO PASS flintstone
[S] 281 Authentication accepted
[C] COMPRESS DEFLATE
[S] 291 Compression active
[From this point on, all traffic is compresssed before being encrypted]
</pre></div>
<p>Example of a server failing to activate compression:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
[C] CAPABILITIES
[S] 101 Capability list:
[S] VERSION 2
[S] IHAVE
[S] COMPRESS DEFLATE
[S] .
[C] COMPRESS DEFLATE
[S] 403 Unable to activate compression
</pre></div>
<p>Example of attempting to use an unsupported compression algorithm:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
[C] CAPABILITIES
[S] 101 Capability list:
[S] VERSION 2
[S] IHAVE
[S] COMPRESS DEFLATE
[S] .
[C] COMPRESS X-SHRINK
[S] 503 Compression algorithm not supported
</pre></div>
<p>Examples of a server refusing to compress twice:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
[C] CAPABILITIES
[S] 101 Capability list:
[S] VERSION 2
[S] IHAVE
[S] STARTTLS
[S] COMPRESS DEFLATE
[S] .
[C] STARTTLS
[S] 382 Continue with TLS negotiation
[TLS negotiation with compression occurs here]
[Following successful negotiation, all traffic is protected by TLS]
[C] CAPABILITIES
[S] 101 Capability list:
[S] VERSION 2
[S] IHAVE
[S] .
[C] COMPRESS DEFLATE
[S] 502 Compression already active via TLS
</pre></div><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
[C] CAPABILITIES
[S] 101 Capability list:
[S] VERSION 2
[S] IHAVE
[S] STARTTLS
[S] COMPRESS DEFLATE
[S] .
[C] COMPRESS DEFLATE
[S] 291 Compression active
[From this point on, all traffic is compresssed]
[C] CAPABILITIES
[S] 101 Capability list:
[S] VERSION 2
[S] IHAVE
[S] .
[C] STARTTLS
[S] 502 DEFLATE compression already active
</pre></div>
<a name="efficiency"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Compression Efficiency</h3>

<p>This section is only informative.
</p>
<p>NNTP poses some unusual problems for a compression layer.
</p>
<p>Upstream traffic is fairly simple.  Most NNTP clients send the same
  few commands again and again, so any compression algorithm that can 
  exploit repetition works efficiently.  The article posting and
  transfer commands (e.g., POST, IHAVE, and TAKETHIS
  <a class='info' href='#RFC4644'>[RFC4644]<span> (</span><span class='info'>Vinocur, J. and K. Murchison, &ldquo;Network News Transfer Protocol (NNTP) Extension for Streaming Feeds,&rdquo; October&nbsp;2006.</span><span>)</span></a>) are an exception; clients that send many
  article posting or transfer commands may want to surround large
  multi-line data blocks with flushes in the same way as is
  recommended for servers later in this section.
</p>
<p>Downstream traffic has the unusual property that several kinds of
  data are sent, confusing all dictionary-based compression
  algorithms.
</p>
<p>One type is NNTP simple responses and NNTP multi-line responses not
   related to article header/body retrieval (e.g, CAPABILITIES, GROUP,
   NEXT, STAT, DATE, NEWNEWS, LIST, OVER, CHECK
   <a class='info' href='#RFC4644'>[RFC4644]<span> (</span><span class='info'>Vinocur, J. and K. Murchison, &ldquo;Network News Transfer Protocol (NNTP) Extension for Streaming Feeds,&rdquo; October&nbsp;2006.</span><span>)</span></a>, etc).  These are highly compressible;
   zlib using its least CPU-intensive setting compresses typical
   responses to 25-40% of their original size.
</p>
<p>Another type is article headers (as retrieved via the HEAD or
   ARTICLE commands).  These are equally compressible, and benefit
   from using the same dictionary as the NNTP responses.
</p>
<p>A third type is article body text (as retrieved via the BODY or
   ARTICLE commands).  Text is usually fairly short and includes much
   ASCII, so the same compression dictionary will do a good job here,
   too.  When multiple messages in the same thread are read at the
   same time, quoted lines, etc. can often be compressed almost to
   zero.
</p>
<p>Finally, attachments (non-text article bodies retrieved via the
   BODY and ARTICLE commands) are transmitted in encoded form, usually
   Base64 <a class='info' href='#RFC4648'>[RFC4648]<span> (</span><span class='info'>Josefsson, S., &ldquo;The Base16, Base32, and Base64 Data Encodings,&rdquo; October&nbsp;2006.</span><span>)</span></a>, UUencode
   <a class='info' href='#IEEE.1003-2.1992'>[IEEE.1003&#8209;2.1992]<span> (</span><span class='info'>Institute of Electrical and Electronics Engineers, &ldquo;Information Technology - Portable Operating System Interface (POSIX) - Part 2: Shell and Utilities (Vol. 1),&rdquo; 1992.</span><span>)</span></a>, or yEnc
   <a class='info' href='#yEnc'>[yEnc]<span> (</span><span class='info'>Helbing, J., &ldquo;yEnc - Efficient encoding for Usenet and eMail,&rdquo; http://www.yenc.org.</span><span>)</span></a>.
</p>
<p>When attachments are retrieved, DEFLATE may be able to compress
   them, but the format of the attachment's encoding is usually not
   NNTP-like, so the dictionary built while compressing NNTP does not 
   help.  The compressor has to adapt its dictionary from NNTP to the
   attachment's encoding format, and then back.  


</p>
<p>When attachments are retrieved in Base64 or UUencode form, these
   encodings add another problem.  8-bit compression algorithms such
   as DEFLATE work well on 8-bit file formats, however both Base64 and
   UUencode transform a file into something resembling 6-bit bytes,
   hiding most of the 8-bit file format from the compressor.
</p>
<p>When using the zlib library (see <a class='info' href='#RFC1951'>[RFC1951]<span> (</span><span class='info'>Deutsch, P., &ldquo;DEFLATE Compressed Data Format Specification version 1.3,&rdquo; May&nbsp;1996.</span><span>)</span></a>), the
   functions deflateInit2(), deflate(), inflateInit2(), and inflate()
   suffice to implement this extension.  The windowBits value must be
   in the range -8 to -15, or else deflateInit2() uses the wrong
   format.  deflateParams() can be used to improve compression rate
   and resource use.  The Z_FULL_FLUSH argument to deflate() can be
   used to clear the dictionary (the receiving peer does not need to
   do anything).
</p>
<p>A server can improve downstream compression if it hints to the
   compressor that the data type is about to change strongly, e.g., by
   sending a Z_FULL_FLUSH at the start and end of large non-text
   multi-line data blocks (before and after 'content-lines' in the
   definition of 'multi-line-data-block' in <a class='info' href='#RFC3977'>[RFC3977]<span> (</span><span class='info'>Feather, C., &ldquo;Network News Transfer Protocol (NNTP),&rdquo; October&nbsp;2006.</span><span>)</span></a>
   Section 9.8).  Small multi-line data blocks are best left alone.  A
   possible boundary is 5kB.
</p>
<a name="ABNF"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Augmented BNF Syntax for the COMPRESS Extension</h3>

<p>This section describes the syntax of the COMPRESS extension using
  ABNF <a class='info' href='#RFC5234'>[RFC5234]<span> (</span><span class='info'>Crocker, D. and P. Overell, &ldquo;Augmented BNF for Syntax Specifications: ABNF,&rdquo; January&nbsp;2008.</span><span>)</span></a>.  It extends the syntax in Section 9
  of <a class='info' href='#RFC3977'>[RFC3977]<span> (</span><span class='info'>Feather, C., &ldquo;Network News Transfer Protocol (NNTP),&rdquo; October&nbsp;2006.</span><span>)</span></a>, and non-terminals not defined in this
  document are defined there.  The <a class='info' href='#RFC3977'>[RFC3977]<span> (</span><span class='info'>Feather, C., &ldquo;Network News Transfer Protocol (NNTP),&rdquo; October&nbsp;2006.</span><span>)</span></a> ABNF
  should be imported first before attempting to validate these
  rules.
</p>
<a name="commands"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Commands</h3>

<p>This syntax extends the non-terminal "command", which represents an
  NNTP command.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
command =/ compress-command

compress-command = "COMPRESS" WS algorithm
</pre></div>
<a name="capabilities"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Capability entries</h3>

<p>This syntax extends the non-terminal "capability-entry", which
  represents a capability that may be advertised by the server.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
capability-entry =/ compress-capability

compress-capability = "COMPRESS" *(WS algorithm)
</pre></div>
<a name="non-terminals"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
General Non-terminals</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
algorithm = "DEFLATE" / token
</pre></div>
<a name="respcodes"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Summary of Response Codes</h3>

<p>This section contains a list of each new response code defined in
  this document and indicates whether it is multi-line, which commands
  can generate it, what arguments it has, and what its meaning
  is.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Response code 291
   Generated by: COMPRESS
   Meaning: Compression layer activated
</pre></div>
<a name="security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Security Considerations</h3>

<p>As for TLS compression <a class='info' href='#RFC3749'>[RFC3749]<span> (</span><span class='info'>Hollenbeck, S., &ldquo;Transport Layer Security Protocol Compression Methods,&rdquo; May&nbsp;2004.</span><span>)</span></a>.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
IANA Considerations</h3>

<a name="compreg"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1"></a><h3>7.1.&nbsp;
NNTP Compression Algorithm Registry</h3>

<p>The NNTP Compression Algorithm registry will be maintained by
  IANA.  The registry will be available at
  &lt;http://www.iana.org/assignments/nntp-compression-algorithms&gt;.
</p>
<p>The purpose of this registry is not only to ensure uniqueness of
   values used to name NNTP compression algorithms, but also to
   provide a definitive reference to technical specifications
   detailing each NNTP compression algorithm available for use on the
   Internet.
</p>
<p>There is no naming convention for NNTP compression algorithms; any
   name that conforms to the syntax of a NNTP compression algorithm
   name can be registered.
</p>
<p>The procedure detailed in <a class='info' href='#regproc'>Section&nbsp;7.1.1<span> (</span><span class='info'>Algorithm Name Registration Procedure</span><span>)</span></a> is to be used
   for registration of a value naming a specific individual
   mechanism.
</p>
<p>Comments may be included in the registry as discussed in
  <a class='info' href='#regcomments'>Section&nbsp;7.1.2<span> (</span><span class='info'>Comments on Algorithm Registrations</span><span>)</span></a> and may be changed as discussed in
  <a class='info' href='#changecontrol'>Section&nbsp;7.1.3<span> (</span><span class='info'>Change Control</span><span>)</span></a>.
</p>
<a name="regproc"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1.1"></a><h3>7.1.1.&nbsp;
Algorithm Name Registration Procedure</h3>

<p>IANA will register new NNTP compression algorithm names on a First
   Come First Served basis, as defined in BCP 26
   <a class='info' href='#RFC5226'>[RFC5226]<span> (</span><span class='info'>Narten, T. and H. Alvestrand, &ldquo;Guidelines for Writing an IANA Considerations Section in RFCs,&rdquo; May&nbsp;2008.</span><span>)</span></a>.  IANA has the right to reject obviously
   bogus registration requests, but will perform no review of claims
   made in the registration form.
</p>
<p>Registration of an NNTP compression algorithm is requested by
   filling in the following template:

</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Subject: Registration of NNTP compression algorithm X

NNTP compression algorithm name:

Security considerations:

Published specification (recommended):

Contact for further information:

Intended usage: (One of COMMON, LIMITED USE, or OBSOLETE)

Owner/Change controller:

Note: (Any other information that the author deems relevant may be
       added here.)
</pre></div><p>


and sending it via electronic mail to IANA at
&lt;iana@iana.org&gt;.
</p>
<p>While this registration procedure does not require expert review,
   authors of NNTP compression algorithms are encouraged to seek
   community review and comment whenever that is feasible.  Authors
   may seek community review by posting a specification of their
   proposed mechanism as an Internet-Draft.  NNTP compression
   algorithms intended for widespread use should be standardized
   through the normal IETF process, when appropriate.
</p>
<a name="regcomments"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1.2"></a><h3>7.1.2.&nbsp;
Comments on Algorithm Registrations</h3>

<p>Comments on a registered NNTP compression algorithm should first be
   sent to the "owner" of the algorithm and/or to the
   &lt;ietf-nntp@lists.eyrie.org&gt; mailing list.
</p>
<p>Submitters of comments may, after a reasonable attempt to contact
   the owner, request IANA to attach their comment to the NNTP
   compression algorithm registration itself by sending mail to
   &lt;iana@iana.org&gt;.  At IANA's sole discretion, IANA may attach
   the comment to the NNTP compression algorithm's registration.
</p>
<a name="changecontrol"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1.3"></a><h3>7.1.3.&nbsp;
Change Control</h3>

<p>Once an NNTP compression algorithm registration has been published
   by IANA, the author may request a change to its definition.  The
   change request follows the same procedure as the registration
   request.
</p>
<p>The owner of an NNTP compression algorithm may pass responsibility
   for the algorithm to another person or agency by informing IANA;
   this can be done without discussion or review.
</p>
<p>The IESG may reassign responsibility for an NNTP compression
   algorithm.  The most common case of this will be to enable changes
   to be made to algorithms where the author of the registration has
   died, has moved out of contact, or is otherwise unable to make
   changes that are important to the community.
</p>
<p>NNTP compression algorithm registrations may not be deleted;
   algorithms that are no longer believed appropriate for use can be
   declared OBSOLETE by a change to their "intended usage" field; such
   algorithms will be clearly marked in the lists published by
   IANA.
</p>
<p>The IESG is considered to be the owner of all NNTP compression
   algorithms that are on the IETF standards track.
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2"></a><h3>7.2.&nbsp;
Registration of the DEFLATE Compression Algorithm</h3>

<p>This section gives a formal definition of the DEFLATE compression
   algorithm as required by <a class='info' href='#regproc'>Section&nbsp;7.1.1<span> (</span><span class='info'>Algorithm Name Registration Procedure</span><span>)</span></a> for the IANA
   registry.
</p>
<p>NNTP compression algorithm name: DEFLATE
</p>
<p>Security considerations: See <a class='info' href='#security'>Section&nbsp;6<span> (</span><span class='info'>Security Considerations</span><span>)</span></a> of this
  document
</p>
<p>Published specification: This document
</p>
<p>Contact for further information: Author of this document
</p>
<p>Intended usage: COMMON
</p>
<p>Owner/Change controller: IESG &lt;iesg@ietf.org&gt;.
</p>
<p>Note: This algorithm is mandatory to implement
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.3"></a><h3>7.3.&nbsp;
Registration of the NNTP COMPRESS Extension</h3>

<p>This section gives a formal definition of the COMPRESS extension as
   required by Section 3.3.3 of <a class='info' href='#RFC3977'>[RFC3977]<span> (</span><span class='info'>Feather, C., &ldquo;Network News Transfer Protocol (NNTP),&rdquo; October&nbsp;2006.</span><span>)</span></a> for the IANA
   registry.

</p>
<ul class="text">
<li>The COMPRESS extension allows an NNTP connection to be effectively
  and efficiently compressed.
</li>
<li>The capability label for this extension is "COMPRESS", whose
  arguments list the available compression algorithms.
</li>
<li>This extension defines one new command, COMPRESS, whose behavior,
  arguments, and responses are defined in
  <a class='info' href='#compresscmd'>Section&nbsp;2.2<span> (</span><span class='info'>COMPRESS Command</span><span>)</span></a>.
</li>
<li>This extension does not associate any new responses with
  pre-existing NNTP commands.
</li>
<li>This extension does affect the overall behavior of both server and
  client, in that after successful use of the COMPRESS command, all
  communication is transmitted in a compressed format.
</li>
<li>This extension does not affect the maximum length of commands or
  initial response lines.
</li>
<li>This extension does not alter pipelining, but the COMPRESS command
  cannot be pipelined
</li>
<li>Use of this extension does alter the capabilities list; once the
  COMPRESS command has been used successfully, the COMPRESS capability
  can no longer be advertised by CAPABILITIES.  Additionally, the
  STARTTLS and MODE-READER capabilities MUST NOT be advertised after
  successful execution of the COMPRESS command.
</li>
<li>This extension does not cause any pre-existing command to produce a
  401, 480, or 483 response.
</li>
<li>This extension is unaffected by any use of the MODE READER command,
  however the MODE READER command MUST NOT be used in the same session
  following a successful execution of the COMPRESS command.
</li>
<li>The STARTTLS command MUST NOT be used in the same session
  following a successful execution of the COMPRESS command.
</li>
<li>Published Specification: This document.
</li>
<li>Contact for Further Information: Author of this document.
</li>
<li>Change Controller: IESG &lt;iesg@ietf.org&gt;.
</li>
</ul>

<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC1951">[RFC1951]</a></td>
<td class="author-text"><a href="mailto:ghost@aladdin.com">Deutsch, P.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc1951">DEFLATE Compressed Data Format Specification version 1.3</a>,&rdquo; RFC&nbsp;1951, May&nbsp;1996 (<a href="http://www.rfc-editor.org/rfc/rfc1951.txt">TXT</a>, <a href="http://www.rfc-editor.org/rfc/rfc1951.ps">PS</a>, <a href="http://www.rfc-editor.org/rfc/rfc1951.pdf">PDF</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3977">[RFC3977]</a></td>
<td class="author-text">Feather, C., &ldquo;<a href="http://tools.ietf.org/html/rfc3977">Network News Transfer Protocol (NNTP)</a>,&rdquo; RFC&nbsp;3977, October&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc3977.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4642">[RFC4642]</a></td>
<td class="author-text">Murchison, K., Vinocur, J., and C. Newman, &ldquo;<a href="http://tools.ietf.org/html/rfc4642">Using Transport Layer Security (TLS) with Network News Transfer Protocol (NNTP)</a>,&rdquo; RFC&nbsp;4642, October&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4642.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5226">[RFC5226]</a></td>
<td class="author-text">Narten, T. and H. Alvestrand, &ldquo;<a href="http://tools.ietf.org/html/rfc5226">Guidelines for Writing an IANA Considerations Section in RFCs</a>,&rdquo; BCP&nbsp;26, RFC&nbsp;5226, May&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5226.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5234">[RFC5234]</a></td>
<td class="author-text">Crocker, D. and P. Overell, &ldquo;<a href="http://tools.ietf.org/html/rfc5234">Augmented BNF for Syntax Specifications: ABNF</a>,&rdquo; STD&nbsp;68, RFC&nbsp;5234, January&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5234.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="IEEE.1003-2.1992">[IEEE.1003-2.1992]</a></td>
<td class="author-text">Institute of Electrical and Electronics Engineers, &ldquo;Information Technology - Portable Operating System Interface (POSIX) - Part 2: Shell and Utilities (Vol. 1),&rdquo; IEEE&nbsp;Standard 1003.2, 1992.</td></tr>
<tr><td class="author-text" valign="top"><a name="MNP">[MNP]</a></td>
<td class="author-text">Held, G., &ldquo;The Complete Modem Reference,&rdquo; Second Edition,&nbsp;Wiley Professional Computing, May&nbsp;1994.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC1962">[RFC1962]</a></td>
<td class="author-text"><a href="mailto:dlr@daver.bungi.com">Rand, D.</a> and <a href="mailto:karl@ascend.com">K. Fox</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc1962">The PPP Compression Control Protocol (CCP)</a>,&rdquo; RFC&nbsp;1962, June&nbsp;1996 (<a href="http://www.rfc-editor.org/rfc/rfc1962.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3749">[RFC3749]</a></td>
<td class="author-text">Hollenbeck, S., &ldquo;<a href="http://tools.ietf.org/html/rfc3749">Transport Layer Security Protocol Compression Methods</a>,&rdquo; RFC&nbsp;3749, May&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3749.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4422">[RFC4422]</a></td>
<td class="author-text">Melnikov, A. and K. Zeilenga, &ldquo;<a href="http://tools.ietf.org/html/rfc4422">Simple Authentication and Security Layer (SASL)</a>,&rdquo; RFC&nbsp;4422, June&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4422.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4643">[RFC4643]</a></td>
<td class="author-text">Vinocur, J. and K. Murchison, &ldquo;<a href="http://tools.ietf.org/html/rfc4643">Network News Transfer Protocol (NNTP) Extension for Authentication</a>,&rdquo; RFC&nbsp;4643, October&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4643.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4644">[RFC4644]</a></td>
<td class="author-text">Vinocur, J. and K. Murchison, &ldquo;<a href="http://tools.ietf.org/html/rfc4644">Network News Transfer Protocol (NNTP) Extension for Streaming Feeds</a>,&rdquo; RFC&nbsp;4644, October&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4644.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4648">[RFC4648]</a></td>
<td class="author-text">Josefsson, S., &ldquo;<a href="http://tools.ietf.org/html/rfc4648">The Base16, Base32, and Base64 Data Encodings</a>,&rdquo; RFC&nbsp;4648, October&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4648.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4978">[RFC4978]</a></td>
<td class="author-text">Gulbrandsen, A., &ldquo;<a href="http://tools.ietf.org/html/rfc4978">The IMAP COMPRESS Extension</a>,&rdquo; RFC&nbsp;4978, August&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc4978.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5246">[RFC5246]</a></td>
<td class="author-text">Dierks, T. and E. Rescorla, &ldquo;<a href="http://tools.ietf.org/html/rfc5246">The Transport Layer Security (TLS) Protocol Version 1.2</a>,&rdquo; RFC&nbsp;5246, August&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5246.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="V42bis">[V42bis]</a></td>
<td class="author-text">International Telecommunications
    Union, &ldquo;<a href="http://www.itu.int/rec/T-REC-V.42bis">Data compression procedures for data circuit-terminating
  equipment (DCE) using error correction procedures</a>,&rdquo; ITU-T&nbsp;Recommendation V.42bis, January&nbsp;1990.</td></tr>
<tr><td class="author-text" valign="top"><a name="yEnc">[yEnc]</a></td>
<td class="author-text">Helbing, J., &ldquo;<a href="http://www.yenc.org">yEnc - Efficient encoding for Usenet and eMail</a>,&rdquo; http://www.yenc.org.</td></tr>
</table>

<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
Acknowledgements</h3>

<p>This document draws heavily on ideas in <a class='info' href='#RFC4978'>[RFC4978]<span> (</span><span class='info'>Gulbrandsen, A., &ldquo;The IMAP COMPRESS Extension,&rdquo; August&nbsp;2007.</span><span>)</span></a>
  by Arnt Gulbrandsen and a large portion of this text was borrowed
  from that specification.
</p>
<p>Special acknowledgement also goes to Julien &Eacute;lie and others who
   commented privately on intermediate revisions of this document.
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B"></a><h3>Appendix B.&nbsp;
Document History (to be removed by RFC Editor before
		publication)</h3>

<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.1"></a><h3>B.1.&nbsp;
Changes since -00</h3>

<p></p>
<ul class="text">
<li>Made DEFLATE the mandatory to implement compression algorithm.
</li>
<li>Removed the requirement that clients/servers implementing COMPRESS
  also implement TLS compression.
</li>
<li>Added an example of a client trying to use an unsupported
  compression algorithm.
</li>
<li>Rewrote <a class='info' href='#efficiency'>Compression Efficiency<span> (</span><span class='info'>Compression Efficiency</span><span>)</span></a> as
  follows:

<ul class="text">
<li>Included a sample listing of which NNTP commands produce which type
  of data to be compressed.
</li>
<li>Removed discussion of attachments in binary form and incompressible
  file formats.
</li>
<li>Mentioned UUencode and yEnc encoding of attachments.
</li>
</ul>
</li>
<li>Added IANA registry of NNTP compression algorithms.
</li>
<li>Miscellaneous editorial changes submitted by Julien &Eacute;lie.
</li>
</ul>

<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.C"></a><h3>Appendix C.&nbsp;
Issues to be addressed</h3>

<p></p>
<ul class="text">
<li>What 2xx code should we use when compression is activated? 20x,
  28x, 29x?
</li>
<li>Should we restrict the ABNF for compression algorithms?
</li>
</ul>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Author's Address</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Kenneth Murchison</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Carnegie Mellon University</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">5000 Forbes Avenue</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cyert Hall 285</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Pittsburgh, PA  15213</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">US</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 412 268 2638</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:murch@andrew.cmu.edu">murch@andrew.cmu.edu</a></td></tr>
</table>
</body></html>
