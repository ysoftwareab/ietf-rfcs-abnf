



BIER WG                                                        Ran. Chen
Internet-Draft                                           ZTE Corporation
Intended status: Standards Track                             Fangwei. Hu
Expires: March 12, 2021                                       Individual
                                                            Zheng. Zhang
                                                            Xianxia. Dai
                                                         ZTE Corporation
                                                       Mahesh. Sivakumar
                                                        Juniper networks
                                                       September 8, 2020


                   YANG Data Model for BIER Protocol
                      draft-ietf-bier-bier-yang-07

Abstract

   This document defines a YANG data model for BIER configuration and
   operation.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on March 12, 2021.

Copyright Notice

   Copyright (c) 2020 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must



Chen, et al.             Expires March 12, 2021                 [Page 1]

Internet-Draft                  BIER YANG                 September 2020


   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Design of the Data Model  . . . . . . . . . . . . . . . . . .   2
   3.  Configuration . . . . . . . . . . . . . . . . . . . . . . . .   3
   4.  Control plane configuration . . . . . . . . . . . . . . . . .   4
   5.  Notification  . . . . . . . . . . . . . . . . . . . . . . . .   4
   6.  BIER YANG Data Model  . . . . . . . . . . . . . . . . . . . .   4
   7.  Security Considerations . . . . . . . . . . . . . . . . . . .  15
   8.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .  15
   9.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .  15
   10. Normative References  . . . . . . . . . . . . . . . . . . . .  15
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  17

1.  Introduction

   This document defines a YANG data model for BIER configuration and
   operation.

2.  Design of the Data Model

module: ietf-bier
  augment /rt:routing:
    +--rw bier
       +--rw encapsulation-type?   identityref
       +--rw bsl?                  enumeration
       +--rw bfr-id?               uint16
       +--rw bfr-prefix?           inet:ip-prefix
       +--rw sub-domain* [sub-domain-id address-family]
       |  +--rw sub-domain-id             uint16
       |  +--rw address-family            identityref
       |  +--rw bfr-prefix?               inet:ip-prefix
       |  +--rw underlay-protocol-type?   enumeration
       |  +--rw mt-id?                    uint16
       |  +--rw bfr-id?                   uint16
       |  +--rw bsl?                      enumeration
       |  +--rw igp-algorithm?            uint8
       |  +--rw bier-algorithm?           uint8
       |  +--rw load-balance-num?         uint8
       |  +--rw encapsulation* [bsl encapsulation-type]
       |     +--rw bsl                   uint16
       |     +--rw encapsulation-type    identityref
       |     +--rw max-si?               uint16
       |     +--rw bift-id-base?         uint32



Chen, et al.             Expires March 12, 2021                 [Page 2]

Internet-Draft                  BIER YANG                 September 2020


       +--rw birt* [sub-domain-id]
            +--rw sub-domain-id             uint16
            +--rw bfr-id?                   uint16
            +--rw birt-bitstringlength* [bitstringlength]
               +--rw bitstringlength    uint16
               +--rw birt-si* [si]
                  +--rw si                    uint16
                  +--rw in-bift-id?           uint32
                  +--rw bfr-nbr
                     +--rw bfr-nbr               inet:ip-prefix
                     +--rw encapsulation-type?   enumeration
                     +--rw out-bift-id            uint32

 augment /rt:routing/rt:control-plane-protocols/rt:control-plane-protocol/ospf:ospf:
    +--rw bier-ospf-cfg
       +--rw mt-id?   uint16
       +--rw bier
          +--rw enable?      boolean
          +--rw advertise?   boolean
          +--rw receive?     boolean
  augment /rt:routing/rt:control-plane-protocols/rt:control-plane-protocol/isis:isis:
    +--rw bier-isis-cfg
       +--rw mt-id?   uint16
       +--rw bier
          +--rw enable?      boolean
          +--rw advertise?   boolean
          +--rw receive?     boolean



  notifications:
    +---n bfr-id-collision
    |  +--ro bfr-id?   uint16
    +---n bfr-zero
    |  +--ro ipv4-bfr-prefix?   inet:ipv4-prefix
    |  +--ro ipv6-bfr-prefix?   inet:ipv6-prefix
    +---n sub-domain-id-collision
       +--ro sub-domain-id?   uint16
       +--ro mt-id?           uint16

3.  Configuration

   This Module augments the "/rt:routing:" with a BIER container.  This
   Container defines all the configuration parameters related to BIER
   for this particular routing.

   The BIER configuration contains global configuration.




Chen, et al.             Expires March 12, 2021                 [Page 3]

Internet-Draft                  BIER YANG                 September 2020


   The global configuration includes BIER encapsulation type,
   BitStringLengths, BFR-id, BFR-prefixes, and parameters associated
   with bier sub-domain.

4.  Control plane configuration

   This Module augments the "/rt:routing/rt:routing-protocols/
   rt:routing-protocol/ospf:ospf:" and "/rt:routing/rt:routing-
   protocols/rt:routing-protocol/isis:isis:"configuration with BIER.

   This Module supports ISIS ([RFC8401])and OSPF ([RFC8444]) as control
   plane for BIER.

5.  Notification

   This Module includes bfr-id-collision, bfr-zero, and sub-domain-id-
   collision.

6.  BIER YANG Data Model

<CODE BEGINS> file "ietf-bier@2019-05-14.yang"
module ietf-bier {
     yang-version 1.1;
     namespace "urn:ietf:params:xml:ns:yang:ietf-bier";
     prefix "bier";

    import ietf-routing {
       prefix "rt";
     }
    import ietf-interfaces {
      prefix "if";
      reference "RFC7223";
    }
    import ietf-inet-types {
       prefix "inet";
     }

        import ietf-isis{
       prefix "isis";
     }

    import ietf-ospf  {
       prefix "ospf";
     }

     organization
       "IETF BIER(Bit Indexed Explicit Replication ) Working Group";




Chen, et al.             Expires March 12, 2021                 [Page 4]

Internet-Draft                  BIER YANG                 September 2020


     contact
        "WG List:  <mailto:bier@ietf.org>

        WG Chair: Tony Przygienda
                  <mailto:tonysietf@gmail.com>

        WG Chair: Greg Shepherd
                  <mailto:gjshep@gmail.com>


        Editor:   Ran Chen
                   <mailto:chen.ran@zte.com.cn>
        Editor:   Fangwei Hu
                   <mailto:hu.fangwei@zte.com.cn>
        Editor:   Zheng Zhang
                   <mailto:zhang.zheng@zte.com.cn>
        Editor:   Xianxian Dai
                   <mailto:dai.xianxian@zte.com.cn>
        Editor:    Mahesh Sivakumar
                   <mailto:masivaku@cisco.com>
        ";
       description
         "The YANG module defines a generic configuration
          model for BIER.";

                revision 2020-09-08{
         description
           "latest revision";
         reference "RFC XXXX: YANG Data Model for BIER Protocol.";
       }

                revision 2019-05-14{
         description
           "latest revision";
         reference "RFC XXXX: YANG Data Model for BIER Protocol.";
       }


                revision 2018-09-29{
         description
           "04 revision";
         reference "RFC XXXX: YANG Data Model for BIER Protocol.";
       }

                revision 2018-02-07{
         description
           "03 revision";
         reference "RFC XXXX: YANG Data Model for BIER Protocol.";



Chen, et al.             Expires March 12, 2021                 [Page 5]

Internet-Draft                  BIER YANG                 September 2020


       }

                revision 2017-08-10{
         description
           "02 revision";
         reference "RFC XXXX: YANG Data Model for BIER Protocol.";

       }


        revision 2017-01-20{
         description
           "01 revision";
         reference "RFC XXXX: YANG Data Model for BIER Protocol.";
       }

                revision 2016-07-23{
         description
           "00 revision";
         reference "RFC XXXX: YANG Data Model for BIER Protocol.";
       }

           revision 2016-05-12{
         description
           "04 revision";
         reference "RFC XXXX: YANG Data Model for BIER Protocol.";
       }

       revision 2016-03-16 {
         description
           "03 revision";
         reference "RFC XXXX: YANG Data Model for BIER Protocol.";
       }

       revision 2015-12-03 {
         description
           "02 revision";
         reference "RFC XXXX: YANG Data Model for BIER Protocol.";
       }

       revision 2015-10-16 {
         description
           "01 revision.";
         reference "RFC XXXX: YANG Data Model for BIER Protocol.";
       }

       revision 2015-06-22 {
         description



Chen, et al.             Expires March 12, 2021                 [Page 6]

Internet-Draft                  BIER YANG                 September 2020


           "Initial revision.";
         reference "RFC XXXX: YANG Data Model for BIER Protocol.";
     }

     /* Identities */
     identity bier-encapsulation{
       description
         "Base identity for BIER encapsulation.";
     }
     identity bier-encapsulation-mpls {
       base bier-encapsulation;
       description
         "This identity represents MPLS encapsulation for bier.";
     }
         identity bier-encapsulation-ipv6 {
       base bier-encapsulation;
       description
         "This identity represents ipv6 encapsulation for bier.";
     }
     identity bier-encapsulation-ethernet {
       base bier-encapsulation;
       description
         "This identity represents ethernet encapsulation for bier.";
     }
     identity address-family {
       description
         "Base identity from which identities describing address
          families are derived.";
     }
     identity ipv4 {
       base address-family;
       description
         "This identity represents an IPv4 address family.";
     }

     identity ipv6 {
       base address-family;
       description
         "This identity represents an IPv6 address family.";
     }

        /*grouping*/
          grouping bier-protocol-extensions{
             description
                   "Defines protocol extensions.";
                leaf mt-id{
                  type uint16 ;
                  description



Chen, et al.             Expires March 12, 2021                 [Page 7]

Internet-Draft                  BIER YANG                 September 2020


                        "Multi-topology associated with bier sub-domain.";
                 }
            container bier {
                  leaf enable {
                    type boolean;
                        default false;
                        description
                          "Enables bier protocol extensions.";
                  }
                  leaf advertise {
                        type boolean;
                        default true;
                        description
                          "Enable to advertise the parameters associated with bier.";
                        }
                  leaf receive {
                        type boolean;
                        default true;
                        description
                          "Enable to receive the parameters associated with bier.";
                        }
                  description
                        "BIER global config.";
                }
           }

         grouping bsl {
        description
                  "The bitstringlength type.";
                leaf bsl {
                  type enumeration{
                     enum "64-bit"{
                   description
                     "bitstringlength is 64";
                        }
                 enum "128-bit"{
                   description
                         "bitstringlength is 128";
                        }
                 enum "256-bit"{
                   description
                     "bitstringlength is 256";
                        }
                 enum "512-bit"{
                         description
                           "bitstringlength is 512";
                        }
                 enum "1024-bit"{



Chen, et al.             Expires March 12, 2021                 [Page 8]

Internet-Draft                  BIER YANG                 September 2020


                   description
                     "bitstringlength is 1024";
                        }
                 enum "2048-bit"{
                   description
                     "bitstringlength is 2048";
                        }
                 enum "4096-bit"{
                   description
                     "bitstringlength is 4096";
                        }
                }
                default "256-bit";
                 description
                   "list of the bitstringlength type to be supported.";
       }
          }
        grouping underlay-protocol-type {
         description
           "The underlay protocol type.";
     leaf underlay-protocol-type {
            type enumeration{
        enum "isis" {
                   description
                     "isis protocol";
                        }
                 enum "ospf" {
                   description
                     "ospf protocol";
                        }
                  enum "bgp" {
                   description
                     "bgp protocol";
                        }
                   }
                  description
                   "list of the underlay protocol to be supported.";
                 }
    }

         grouping encapsulation {
           description
             "The Bit Index Forwarding T6able.When MPLS is used as the transport, the Bit Indexed Forwarding Table (BIFT) is identified by a MPLS Label.  When non-MPLS transport is used, the BIFT is identified by a 20bit value.";
            list encapsulation {
                  key "bsl encapsulation-type";
           leaf bsl{
                     type uint16;
                description



Chen, et al.             Expires March 12, 2021                 [Page 9]

Internet-Draft                  BIER YANG                 September 2020


                 "The value of the bitstringlength.";
              }

                  leaf encapsulation-type {
                     type identityref {
               base bier-encapsulation;
                          }
                          description
                 "Dataplane to be used.";
                                 }
                  leaf max-si {
                    type uint16;
                description
                      "Maximum Set Identifier .";
                  }
                  leaf bift-id-base {
                   type uint32;
                   description
                     "The value of the bift id.";
                   }
                 description
                   "Different dataplane, different value of the bift-id.";
                 }
        }
        grouping sub-domain {
          description
        "The parameters of the sub domain.";
           list sub-domain {
            key "sub-domain-id address-family";
                leaf sub-domain-id {
               type uint16;
               description
                 "The type for sub-domain-id";
           }
           leaf address-family {
             type identityref {
           base address-family;
         }
         mandatory true;
         description
           "Address family.";
       }

           leaf bfr-prefix {
             type inet:ip-prefix;
             description
           "the bfr prefix.";
       }



Chen, et al.             Expires March 12, 2021                [Page 10]

Internet-Draft                  BIER YANG                 September 2020


        uses underlay-protocol-type;
                leaf mt-id {
                  type uint16;
              description
                "The type for multi-topology identifier";
            }
                leaf bfr-id {
                  type uint16;
              description
                "The type for bfr identifier";
            }
        uses bsl;
                leaf igp-algorithm {
          type uint8;
                  description
                "The type for igp algorithm";
            }
                leaf bier-algorithm {
          type uint8;
                  description
                "The type for bier algorithm";
            }
        leaf load-balance-num {
                  type uint8;
                  description
                "The multicast load balance num.";
            }
        uses encapsulation;
                 description
                "list the parameters of the sub domain.";
                }
                }

        grouping bfr-nbr{
          description "The bfr nbr information, including bfr-nbr, encapsulation type and out-bift-id.";
          leaf bfr-nbr {
             type inet:ip-prefix;
             description
           "the bfr nbr.";
           }
          leaf encapsulation-type {
            type identityref {
              base bier-encapsulation;
                          }
               description
                 "Dataplane to be used.";
                                 }



Chen, et al.             Expires March 12, 2021                [Page 11]

Internet-Draft                  BIER YANG                 September 2020


            leaf out-bift-id{
                  type uint32;
                    description
                      "BIER out-bift-id.";
                    }
                   }

      augment "/rt:routing" {
            description
                  "This augments routing-instance configuration with bier.";
            container bier{
          description
            "bier global configuration.";
                        leaf encapsulation-type {
                     type identityref {
               base bier-encapsulation;
                          }
                          description
                 "Dataplane to be used.";
                                 }
                        uses bsl;
                        leaf bfr-id {
                      type uint16;
                  description
                    "The type for bfr identifier";
                }
                        leaf bfr-prefix {
                type inet:ip-prefix;
                  description
                "the bfr prefix.";
            }
                        uses sub-domain;
                        list birt{
              key "sub-domain-id";
              leaf sub-domain-id{
                type uint16;
                  description
                    "BIER sub domain ID";
                }
               list birt-bitstringlength {
                 key "bitstringlength";
                 leaf bitstringlength{
                   type uint16;
                   description
                     "BIER bitstringlength.";
                }
                list birt-si {
                  key "si";



Chen, et al.             Expires March 12, 2021                [Page 12]

Internet-Draft                  BIER YANG                 September 2020


                  leaf si{
                    type uint16;
                    description
                      "BIER set identifier.";
                   }
                leaf in-bift-id{
                  type uint32;
                    description
                      "BIER in-bift-id.";
                    }
                                uses bfr-nbr;
                description
                   "The BIRT based on the key set identifier";
                                   }
                description
                   "The BIRT based on the key set identifier & bitstringlength";
                    }
                description
                    "The information of the BIRT.";
              }

                        }
                }

     augment "/rt:routing/rt:control-plane-protocols/"
           + "rt:control-plane-protocol/ospf:ospf" {
       when "../rt:type = 'ospf:ospfv2' or
             ../rt:type = 'ospf:ospfv3'" {
         description
           "This augments the ospf routing protocol when used";
         }
       description
         "This augments ospf protocol configuration with bier.";
                container bier-ospf-cfg{
                  uses bier-protocol-extensions;
          description
                        "Control of bier advertisement and reception.";
                }
      }

     augment "/rt:routing/rt:control-plane-protocols/"
             +"rt:control-plane-protocol/isis:isis"{
       when "/rt:routing/rt:control-plane-protocols/"+
           "rt:control-plane-protocol/rt:type = 'isis:isis'" {
         description
         "This augment ISIS routing protocol when used";
       }
       description



Chen, et al.             Expires March 12, 2021                [Page 13]

Internet-Draft                  BIER YANG                 September 2020


         "This augments ISIS protocol configuration with bier.";
                  container bier-isis-cfg{
            uses bier-protocol-extensions;
                        description
                          "Control of bier advertisement and reception.";

                }
      }




          /* Notifications */
      notification bfr-id-collision{
                leaf bfr-id{
                  type uint16;
              description
                "The type for bfr identifier";
           }

           description
                 "BFR ID received in the controlplane that caused BFR ID collision.";
       }

      notification bfr-zero{
                leaf ipv4-bfr-prefix{
                  type inet:ipv4-prefix;
                  description
                        "BIER ipv4 bfr prefix";
         }
                leaf ipv6-bfr-prefix{
                  type inet:ipv6-prefix;
                  description
                        "BIER ipv6 bfr prefix";
        }
                description
                        "Invalid value associated with prefix";
       }

      notification sub-domain-id-collision{
                leaf sub-domain-id {
               type uint16;
               description
                 "The type for sub-domain-id";
           }
                leaf mt-id{
                  type uint16;
                  description



Chen, et al.             Expires March 12, 2021                [Page 14]

Internet-Draft                  BIER YANG                 September 2020


                        "Multi-topology ID";
        }
           description
                 "Sub domain ID received in the controlplane that caused Sub domain ID collision";
       }
     }

 <CODE ENDS>

7.  Security Considerations

   TBD.

8.  Acknowledgements

   We would like to thank IJsbrand Wijnands, Reshad Rahman ,Giles Heron,
   Senthil Dhanaraj ,Benchong xu and jingrong Xie for their comments and
   support of this work.

9.  IANA Considerations

   This document requires no IANA Actions.  Please remove this section
   before RFC publication.

10.  Normative References

   [I-D.ietf-isis-yang-isis-cfg]
              Litkowski, S., Yeung, D., Lindem, A., Zhang, Z., and L.
              Lhotka, "YANG Data Model for IS-IS Protocol", draft-ietf-
              isis-yang-isis-cfg-42 (work in progress), October 2019.

   [I-D.ietf-mpls-base-yang]
              Saad, T., Raza, K., Gandhi, R., Liu, X., and V. Beeram, "A
              YANG Data Model for MPLS Base", draft-ietf-mpls-base-
              yang-15 (work in progress), August 2020.

   [I-D.ietf-mpls-static-yang]
              Saad, T., Gandhi, R., Liu, X., Beeram, V., and I. Bryskin,
              "A YANG Data Model for MPLS Static LSPs", draft-ietf-mpls-
              static-yang-11 (work in progress), April 2020.

   [I-D.ietf-ospf-yang]
              Yeung, D., Qu, Y., Zhang, Z., Chen, I., and A. Lindem,
              "YANG Data Model for OSPF Protocol", draft-ietf-ospf-
              yang-29 (work in progress), October 2019.






Chen, et al.             Expires March 12, 2021                [Page 15]

Internet-Draft                  BIER YANG                 September 2020


   [RFC6020]  Bjorklund, M., Ed., "YANG - A Data Modeling Language for
              the Network Configuration Protocol (NETCONF)", RFC 6020,
              DOI 10.17487/RFC6020, October 2010,
              <https://www.rfc-editor.org/info/rfc6020>.

   [RFC6241]  Enns, R., Ed., Bjorklund, M., Ed., Schoenwaelder, J., Ed.,
              and A. Bierman, Ed., "Network Configuration Protocol
              (NETCONF)", RFC 6241, DOI 10.17487/RFC6241, June 2011,
              <https://www.rfc-editor.org/info/rfc6241>.

   [RFC6991]  Schoenwaelder, J., Ed., "Common YANG Data Types",
              RFC 6991, DOI 10.17487/RFC6991, July 2013,
              <https://www.rfc-editor.org/info/rfc6991>.

   [RFC7223]  Bjorklund, M., "A YANG Data Model for Interface
              Management", RFC 7223, DOI 10.17487/RFC7223, May 2014,
              <https://www.rfc-editor.org/info/rfc7223>.

   [RFC8022]  Lhotka, L. and A. Lindem, "A YANG Data Model for Routing
              Management", RFC 8022, DOI 10.17487/RFC8022, November
              2016, <https://www.rfc-editor.org/info/rfc8022>.

   [RFC8279]  Wijnands, IJ., Ed., Rosen, E., Ed., Dolganow, A.,
              Przygienda, T., and S. Aldrin, "Multicast Using Bit Index
              Explicit Replication (BIER)", RFC 8279,
              DOI 10.17487/RFC8279, November 2017,
              <https://www.rfc-editor.org/info/rfc8279>.

   [RFC8296]  Wijnands, IJ., Ed., Rosen, E., Ed., Dolganow, A.,
              Tantsura, J., Aldrin, S., and I. Meilik, "Encapsulation
              for Bit Index Explicit Replication (BIER) in MPLS and Non-
              MPLS Networks", RFC 8296, DOI 10.17487/RFC8296, January
              2018, <https://www.rfc-editor.org/info/rfc8296>.

   [RFC8401]  Ginsberg, L., Ed., Przygienda, T., Aldrin, S., and Z.
              Zhang, "Bit Index Explicit Replication (BIER) Support via
              IS-IS", RFC 8401, DOI 10.17487/RFC8401, June 2018,
              <https://www.rfc-editor.org/info/rfc8401>.

   [RFC8444]  Psenak, P., Ed., Kumar, N., Wijnands, IJ., Dolganow, A.,
              Przygienda, T., Zhang, J., and S. Aldrin, "OSPFv2
              Extensions for Bit Index Explicit Replication (BIER)",
              RFC 8444, DOI 10.17487/RFC8444, November 2018,
              <https://www.rfc-editor.org/info/rfc8444>.







Chen, et al.             Expires March 12, 2021                [Page 16]

Internet-Draft                  BIER YANG                 September 2020


Authors' Addresses

   Ran Chen
   ZTE Corporation
   No.50 Software Avenue,Yuhuatai District
   Nanjing, Jiangsu Province  210012
   China

   Phone: +86 025 88014636
   Email: chen.ran@zte.com.cn


   Fangwei Hu
   Individual
   No.889 Bibo Rd
   Shanghai  201203
   China

   Email: hufwei@gmail.com


   Zheng Zhang
   ZTE Corporation
   No.50 Software Avenue,Yuhuatai District
   Nanjing, Jiangsu Province  210012
   China

   Email: zhang.zheng@zte.com.cn


   Xianxian Dai
   ZTE Corporation
   No.50 Software Avenue,Yuhuatai District
   Nanjing, Jiangsu Province  210012
   China

   Email: Dai.xianxian@zte.com.cn


   Mahesh Sivakumar
   Juniper networks
   1133 Innovation Way
   Sunnyvale, CALIFORNIA 94089
   United States

   Email: sivakumar.mahesh@gmail.com





Chen, et al.             Expires March 12, 2021                [Page 17]
