



IPPM                                                        T. Zhou, Ed.
Internet-Draft                                                   H. Song
Intended status: Standards Track                                  ZB. Li
Expires: October 22, 2019                                         Huawei
                                                                  ZQ. Li
                                                            China Mobile
                                                          April 20, 2019


                   Enhanced Alternate Marking Method
             draft-zhou-ippm-enhanced-alternate-marking-01

Abstract

   This document proposes several ways to encapsulate the alternate
   marking field with enough space.  More information can be considered
   within the alternate marking field to facilitate the efficiency and
   ease the deployment.

Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC2119].

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on October 22, 2019.

Copyright Notice

   Copyright (c) 2019 IETF Trust and the persons identified as the
   document authors.  All rights reserved.





Zhou, Ed., et al.       Expires October 22, 2019                [Page 1]

Internet-Draft         enhanced-alternate-marking             April 2019


   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Encapsulating Alternate Marking Field . . . . . . . . . . . .   3
     2.1.  Use the IOAM Data . . . . . . . . . . . . . . . . . . . .   3
     2.2.  Use the PostCard based Telemetry Header . . . . . . . . .   3
     2.3.  Encapsulate within the Transport Directly . . . . . . . .   3
   3.  Examples  . . . . . . . . . . . . . . . . . . . . . . . . . .   4
     3.1.  Encapsulate with the End to End IOAM  . . . . . . . . . .   4
     3.2.  Encapsulate with the PostCard Base Telemetry  . . . . . .   4
   4.  Security Considerations . . . . . . . . . . . . . . . . . . .   5
   5.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   5
   6.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   5
   7.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   5
     7.1.  Normative References  . . . . . . . . . . . . . . . . . .   5
     7.2.  Informative References  . . . . . . . . . . . . . . . . .   5
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   6

1.  Introduction

   The Alternate Marking [RFC8321] technique is an hybrid performance
   measurement method, per [RFC7799] classification of measurement
   methods.  It can be used to measure packet loss, latency, and jitter
   on live traffic.  Because this method is based on marking consecutive
   batches of packets.

   For the basic Alternate Marking method, bits are needed to record the
   mark.  However, in some protocols, no additional bit can be used,
   which blocks the wide deployment of the alternate marking technique.
   And the basic Alternate Marking method is limited with the
   scalability for further extension.

   This document proposes several ways to encapsulate the alternate
   marking field with enough space.  More information can be considered
   within the alternate marking field to facilitate the efficiency and
   ease the deployment.  Specifically, the flow identifier is applied as
   an enhancement for the basic Alternate Marking when determining
   packet loss and packet delay measurement.  The flow identifier helps



Zhou, Ed., et al.       Expires October 22, 2019                [Page 2]

Internet-Draft         enhanced-alternate-marking             April 2019


   the data plane to identify the specific flow, hence to do the
   processing with respect to the Alternate Marking.  It also simplifies
   the export by directly being encapsulated as the index for the
   associated metrics.

2.  Encapsulating Alternate Marking Field

2.1.  Use the IOAM Data

   In-situ Operations, Administration, and Maintenance (IOAM
   [I-D.ietf-ippm-ioam-data]) defines a generic meta data structure to
   records OAM information within user packets while the packets
   traverse a network.  The data types and data formats for IOAM data
   records have been defined in [I-D.ietf-ippm-ioam-data].  The IOAM
   data can be embedded in many protocol encapsulations such as Network
   Services Header, Segment Routing, and IPv6
   [I-D.brockners-inband-oam-transport].

   The IOAM edge-to-edge option is to carry data that is added by the
   IOAM encapsulating node and interpreted by IOAM decapsulating node.
   It provide a bit map to indicate what is present in the data, so that
   alternate marking filed can be included in the IOAM edge-to-edge
   option.  This provides a way for an end to end deployment for the
   alternate marking method.

   Since the IOAM edge-to-edge option data is not able to be interpreted
   by the intermediate node, alternate marking method cannot be applied
   within the path hop by hop with this encapsulation way.

2.2.  Use the PostCard based Telemetry Header

   The PostCard Base Telemetry (PBT)
   [I-D.song-ippm-postcard-based-telemetry] is proposed to directly
   exports the telemetry data to a collector through separated OAM
   packets called postcards, while not require inserting telemetry data
   into user packets.  The alternate making data can also be
   encapsulated in this option header.  Different from the IOAM edge-to-
   edge option, the PostCard based Telemetry facilitates the hop by hop
   deployment of alternate marking method.

2.3.  Encapsulate within the Transport Directly

   In addition to the previous ways which carry the alternate marking
   filed within the existing generic OAM header.  The alternate marking
   field can also be encapsulate within the transport protocol directly
   as an extension header or so.  This may vary according to the
   transport protocol.




Zhou, Ed., et al.       Expires October 22, 2019                [Page 3]

Internet-Draft         enhanced-alternate-marking             April 2019


3.  Examples

3.1.  Encapsulate with the End to End IOAM

   The IOAM-E2E-Type filed within the IOAM edge-to-edge option header is
   a 16-bit identifier which specifies which data types are used in the
   E2E option data.  The IOAM-E2E-Type value is a bit field, in which
   bit 0-3 are currently defined by [I-D.ietf-ippm-ioam-data].  So one
   bit from bit 4-15 can be used to indicate the presence of data used
   for alternate marking.

   The alternate marking data is a 8-octet field defined as follows:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+---------------------------+-------------------------------+
   |L|D|       Reserved            |            FlowID             |
   +-+-+---------------------------+-------------------------------+
   |                        FlowID(contd)                          |
   +---------------------------------------------------------------+

   where:

   o  L - Loss flag as defined in [RFC8321];

   o  D - Delay flag as defined in [RFC8321];

   o  FlowID - 6-octet unsigned integer.  Flow identifier field is to
      uniquely identify a monitored flow within the in-situ OAM domain.
      The field is set at the engress node.  The FlowID can be uniformly
      assigned by the central controller or algorithmically generated by
      the engress node.  The latter approach cannot guarantee the
      uniqueness of FlowID, yet the conflict probability is small due to
      the large FlowID space.

3.2.  Encapsulate with the PostCard Base Telemetry

   The following figures shows a proposed change to the Telemetry
   Information Header (TIH) [I-D.song-ippm-postcard-based-telemetry].

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +---------------+---------------+-----------+-+-+---------------+
   | Next Header   |   TIH Length  | Reserved  |L|D|   Hop Count   |
   +---------------+---------------+-----------+-+-+---------------+

   This proposes to use the two bits from the Reserved field from the
   Telemetry Information Header.



Zhou, Ed., et al.       Expires October 22, 2019                [Page 4]

Internet-Draft         enhanced-alternate-marking             April 2019


   Where:

   o  L - Loss flag as defined in [RFC8321];

   o  D - Delay flag as defined in [RFC8321].

   The Data Element Bitmap defined in the TIH is an 31-bit bitmap
   indicating the list of required data elements.  One not used bit from
   the Data Element Bitmap can be used to indicate the presence of the
   marking bits, and trigger the statistic process.

4.  Security Considerations

   TBD

5.  IANA Considerations

   TBD

6.  Acknowledgements

   TBD

7.  References

7.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC7799]  Morton, A., "Active and Passive Metrics and Methods (with
              Hybrid Types In-Between)", RFC 7799, DOI 10.17487/RFC7799,
              May 2016, <https://www.rfc-editor.org/info/rfc7799>.

   [RFC8321]  Fioccola, G., Ed., Capello, A., Cociglio, M., Castaldelli,
              L., Chen, M., Zheng, L., Mirsky, G., and T. Mizrahi,
              "Alternate-Marking Method for Passive and Hybrid
              Performance Monitoring", RFC 8321, DOI 10.17487/RFC8321,
              January 2018, <https://www.rfc-editor.org/info/rfc8321>.

7.2.  Informative References








Zhou, Ed., et al.       Expires October 22, 2019                [Page 5]

Internet-Draft         enhanced-alternate-marking             April 2019


   [I-D.brockners-inband-oam-transport]
              Brockners, F., Bhandari, S., Govindan, V., Pignataro, C.,
              Gredler, H., Leddy, J., Youell, S., Mizrahi, T., Mozes,
              D., Lapukhov, P., and R. Chang, "Encapsulations for In-
              situ OAM Data", draft-brockners-inband-oam-transport-05
              (work in progress), July 2017.

   [I-D.ietf-ippm-ioam-data]
              Brockners, F., Bhandari, S., Pignataro, C., Gredler, H.,
              Leddy, J., Youell, S., Mizrahi, T., Mozes, D., Lapukhov,
              P., Chang, R., daniel.bernier@bell.ca, d., and J. Lemon,
              "Data Fields for In-situ OAM", draft-ietf-ippm-ioam-
              data-05 (work in progress), March 2019.

   [I-D.song-ippm-postcard-based-telemetry]
              Song, H., Zhou, T., Li, Z., and J. Shin, "Postcard-based
              In-band Flow Data Telemetry", draft-song-ippm-postcard-
              based-telemetry-02 (work in progress), March 2019.

Authors' Addresses

   Tianran Zhou
   Huawei
   156 Beiqing Rd.
   Beijing  100095
   China

   Email: zhoutianran@huawei.com


   Haoyu Song
   Huawei
   2330 Central Expressway
   Santa Clara
   United States of America

   Email: haoyu.song@huawei.com


   Zhenbin Li
   Huawei
   156 Beiqing Rd.
   Beijing  100095
   China

   Email: lizhenbin@huawei.com





Zhou, Ed., et al.       Expires October 22, 2019                [Page 6]

Internet-Draft         enhanced-alternate-marking             April 2019


   Zhenqiang Li
   China Mobile
   Beijing
   China

   Email: lizhenqiang@chinamobile.com













































Zhou, Ed., et al.       Expires October 22, 2019                [Page 7]