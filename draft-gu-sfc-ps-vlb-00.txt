Network Working Group                                         Rong Gu
                                                              Vic Liu
Internet Draft                                            China Mobile
Intended status: Informational
Expires: January 2015                                     July 4, 2014




               Problem statements of Virtual Load Balancers
                        draft-gu-sfc-ps-vlb-00.txt




Status of this Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79. This document may not be modified,
   and derivative works of it may not be created, and it may not be
   published except as an Internet-Draft.

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79. This document may not be modified,
   and derivative works of it may not be created, except to publish it
   as an RFC and to translate it into languages other than English.

   This document may contain material from IETF Documents or IETF
   Contributions published or made publicly available before November
   10, 2008. The person(s) controlling the copyright in some of this
   material may not have granted the IETF Trust the right to allow
   modifications of such material outside the IETF Standards Process.
   Without obtaining an adequate license from the person(s) controlling
   the copyright in such materials, this document may not be modified
   outside the IETF Standards Process, and derivative works of it may
   not be created outside the IETF Standards Process, except to format
   it for publication as an RFC or to translate it into languages other
   than English.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.





<Lastname>             Expires January 4, 2015                [Page 1]

Internet-Draft       PS for Virtual Loadblancer              July 2014


   Internet-Drafts are draft documents valid for a maximum of six
   months and may be updated, replaced, or obsoleted by other documents
   at any time.  It is inappropriate to use Internet-Drafts as
   reference material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html

   This Internet-Draft will expire on January 4,2015.

Copyright Notice

   Copyright (c) 2014 IETF Trust and the persons identified as the
   document authors. All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document. Please review these documents
   carefully, as they describe your rights and restrictions with
   respect to this document. Code Components extracted from this
   document must include Simplified BSD License text as described in
   Section 4.e of the Trust Legal Provisions and are provided without
   warranty as described in the Simplified BSD License.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document. Please review these documents
   carefully, as they describe your rights and restrictions with
   respect to this document.

Abstract

   This document describes the development of virtual load balancer
   with a recent test in function and performance of virtual load
   balancer shared. Several problems of deploying virtual load balancer
   practically are presented. And requirements of further work in
   virtual load balancer are suggested with internet community.


Table of Contents




R.Gu & V.Liu           Expires January 4, 2015                [Page 2]

Internet-Draft       PS for Virtual Loadblancer              July 2014


   1. Introduction ................................................ 3
   2. Test overview ............................................... 4
   3. Problem statement ........................................... 4
   4. Summary and requirement...................................... 6
   5. Security Considerations...................................... 6
   6. IANA Considerations ......................................... 6
   7. References .................................................. 6
      7.1. Normative References.................................... 6
      7.2. Informative References.................................. 7
   8. Acknowledgments ............................................. 7

1. Introduction

   According to the network operators, Network Functions Virtualization
   (NFV) brings many benefits such as equipment cost reduction, power
   consumption reduction, optimization of network configuration and
   automated network installation. Virtual load balancer (VLB) is a
   piece of software acting as a reverse proxy to distribute network or
   application traffic over different servers. Instead of the form of
   hardware, VLB is a virtual machine (VM) which is a part of NFV
   performing application-level optimization by distributing the
   workload across multiple servers.

   VLB can be realized by some OSS (open-source software) such as LVS,
   Nginx and HA Proxy. Besides, many vendors launch virtual load
   balancers as commercial products as well as their hardware load
   balancers (LBs). Either the open-source software or the commercial
   software can perform the basic function of the Layer 4-7 server load
   balancing. The open-source software limits the features with
   additional function needing to be further developed. The commercial
   software load balancer acts almost the same as hardware load
   balancer with the function of IPv4/IPv6 server load balancing,
   powerful application scripting, SSL offload, high availability,
   prevention from attacks and so on.

   Because of the form of software, the VLB has superiority in the
   application scenarios of elasticity, flexibility and agility such as
   cloud computing and IDC (Internet Data Center).

   a. The software load balancer performs great flexibility and saves
   your space.

   b. Virtual load balancer is a program which can be deployed
   anywhere, such as very close to the servers that need to have the
   information flow metered.




R.Gu & V.Liu           Expires January 4, 2015                [Page 3]

Internet-Draft       PS for Virtual Loadblancer              July 2014


   c. Software load balancer has the advantage of agility which can be
   moved and reconfigured quickly.

   d. Software load balancer can be installed in several hypervisors
   such as VMware ESX/ESXi and Linux KVM.

   e. Software load balancer supports extensible management and
   orchestration.


   2. Test overview

   Recently, we have tested several demos of VLB from different
   vendors. The test mainly includes both the function and performance
   of VLB. Results show that basic function of load balancing, health
   monitoring and persistence are well supported by commercial VLB
   products and partly supported by VLB of OSS. The performance of new
   session, concurrent, and throughput of VLB is poorer than that of
   hardware load balancer.



   Test topology

        --------       ------------       -----------
       | Client |-----|    VLB     |-----|   Server  |
        --------       ------------       -----------

3. Problem statement



   The virtual load balancer shows vast potentialfor future development
   of NFV. However, there are a number of challenges in deploying VLB
   due to its immaturity.

   a. The performance of VLB is an obvious disadvantage comparing with
   the hardware load balancer, since software rather than chips
   achieves the load balancing function. Reading from our exploratory
   test, there is a huge gap of performance including new session,
   concurrent session and throughput between VLB and the hardware LB.
   According to our testing data, the number of new session of VLB can
   be increased to ten thousand, the number of concurrent session can
   reach up to several million, and the throughput can reach up to tens
   Gbps. Performance of VLB after optimization still can't catch up


R.Gu & V.Liu           Expires January 4, 2015                [Page 4]

Internet-Draft       PS for Virtual Loadblancer              July 2014


   with the hardware LB of low performance, as performance of the
   software is subject to the physical server. And the performance of
   VLB realized by OSS is much poorer than the commercial products of
   VLB, several thousand of new session, tens thousand of concurrent
   session and one Gbps in details, which shows that commercial
   products do the performance optimization by their private
   technology.

   b. The VLB shows instability when operating in the network. VLB acts
   as a VM coexisting with other VMs in the physical server. Other VMs
   sometimes have an influence on VLB. Virtual bridge or virtual switch
   takes the role of forwarding datagram in the physical server.In our
   test, performance of server NIC and virtual bridge has an impact on
   the operation of VLB which leads to unsuccessful request sometimes.

   c. The VLB occupies the CPU and memory of the physical server
   working as a VM. And VLBs of different vendors give variability in
   large scale of the utilization rate of CPU and memory when
   operating. And performances are influenced largely by the hardware
   resources. Thus the utilization rate of CPU and memory of a physical
   server should be taken into consideration in choosing the suitable
   VLB, while the problem of bench mark exists in measuring VLB from
   this aspect.

   d. VLB shows problems of compatibility with various platforms of
   VMware ESX/ESXi, Citrix Xenserver, Microwave Hypervisor,
   RedHat/CentOS/Ubuntu Linux KVM and community Xen. From the result of
   our study, VLB of different vendors support most of the platforms.
   However, several platforms are not supported by VLB of some vendors
   or some specific license of VLB of one vendor.

   e. Some additional functions such as access control list (ACL) and
   SSL acceleration are not fully supported by VLB of all the vendors
   due to the progress of software development. Because of the
   performance of software, functions like SSL acceleration prefer to
   be achieved by hardware and ACL can be performed by other devices.
   What's more, VLB realized by OSS only has basic functions by
   default, with more functions added by specific modules which needs
   to be developed and debugged.

   f. Open APIs such as Openflow, OpenStack, OpenNaaS or OGF's are
   partly supported by VLBs from different vendors, which may have an
   impact on the management and data plane control.






R.Gu & V.Liu           Expires January 4, 2015                [Page 5]

Internet-Draft       PS for Virtual Loadblancer              July 2014


  4. Summary and requirement

   Network Functions Virtualization is already on the road. In order to
   accelerate the progress of large-scale deployment of VLB, further
   work should focus on responding to these challenges nowadays.

   a. Compatibility with various platforms should be optimized. And
   open APIs should be fully developed contributing to centralized
   management.

   b. Standard methods of measuring hardware resources such as the CPU
   and memory of physical servers occupied should be set in making it
   easier for horizontal comparison of different VLBs.

   c. High availability of VLB as a VM should be ensured by either
   virtual machine migration or master-standby with two VLBs. The
   restoration time should be controlled when one VLB breaks down.

   d. Performance of VLB should be further improved by advanced
   techniques such as traffic migration.



  5.  Security Considerations

   <Add any security considerations>

  6. IANA Considerations

  7. References



   7.1. Normative References

   [1]  Bradner, S., "Key words for use in RFCs to Indicate
         Requirement Levels", BCP 14, RFC 2119, March 1997.

   [2]  Crocker, D. and Overell, P.(Editors), "Augmented BNF for
         Syntax Specifications: ABNF", RFC 2234, Internet Mail
         Consortium and Demon Internet Ltd., November 1997.

   [RFC2119] Bradner, S., "Key words for use in RFCs to Indicate
             Requirement Levels", BCP 14, RFC 2119, March 1997.





R.Gu & V.Liu           Expires January 4, 2015                [Page 6]

Internet-Draft       PS for Virtual Loadblancer              July 2014


   [RFC2234] Crocker, D. and Overell, P.(Editors), "Augmented BNF for
             Syntax Specifications: ABNF", RFC 2234, Internet Mail
             Consortium and Demon Internet Ltd., November 1997.

   7.2. Informative References

   [3]  Faber, T., Touch, J. and W. Yue, "The TIME-WAIT state in TCP
         and Its Effect on Busy Servers", Proc. Infocom 1999 pp. 1573-
         1583.

   [Fab1999] Faber, T., Touch, J. and W. Yue, "The TIME-WAIT state in
             TCP and Its Effect on Busy Servers", Proc. Infocom 1999
             pp. 1573-1583.

          8. Acknowledgments





Authors' Addresses

   Rong Gu
   China Mobile
   32 Xuanwumen West Ave, Beijing, China

   Email: gurong@chinamobile.com

   Vic Liu
   China Mobile
   32 Xuanwumen West Ave, Beijing, China

   Email: liuzhiheng@chinamobile.com















R.Gu & V.Liu           Expires January 4, 2015                [Page 7]

