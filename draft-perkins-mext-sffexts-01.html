<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>SFF Extensions for Mobile IPv6</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Overview">
<link href="#rfc.section.3" rel="Chapter" title="3 Co-locating SFF in the home network with the Home Agent">
<link href="#rfc.section.4" rel="Chapter" title="4 Extension Formats">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 SFF-REQ (SFF Parameters Request)">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 SFF-REP (SFF Parameters Reply)">
<link href="#rfc.section.5" rel="Chapter" title="5 Security Considerations">
<link href="#rfc.section.6" rel="Chapter" title="6 IANA Considerations">
<link href="#rfc.references" rel="Chapter" title="7 References">
<link href="#rfc.references.1" rel="Chapter" title="7.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="7.2 Informative References">
<link href="#rfc.appendix.Appendix%20A" rel="Chapter" title="Appendix A Acknowledgements">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="A mobile node with multiple radio interfaces running in single-radio mode will typically need IP address continuity as it migrates from one 4G wireless network to another; Mobile IPv6 is very well suited for that purpose.  For such mobile nodes using Mobile IP, mobility management by the home agent can be extended to provide necessary information about the Signal Forwarding Functions (SFFs) that have been defined for WiMAX and for eHRPD/CDMA networks.  In this document, we explain the operations required to support single-radio mobile nodes and specify new extensions to Mobile IPv6 Binding Update and Binding Acknowledgement for supporting ease of access between mobile nodes and SFFs.  " />
  <meta name="description" content="A mobile node with multiple radio interfaces running in single-radio mode will typically need IP address continuity as it migrates from one 4G wireless network to another; Mobile IPv6 is very well suited for that purpose.  For such mobile nodes using Mobile IP, mobility management by the home agent can be extended to provide necessary information about the Signal Forwarding Functions (SFFs) that have been defined for WiMAX and for eHRPD/CDMA networks.  In this document, we explain the operations required to support single-radio mobile nodes and specify new extensions to Mobile IPv6 Binding Update and Binding Acknowledgement for supporting ease of access between mobile nodes and SFFs.  " />
  <meta name="keywords" content="I-D, Internet Draft" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Mobile IPv6 Extensions (mext)</td>
<td class="right">C.P. Perkins</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">Tellabs</td>
</tr>
<tr>
<td class="left">Intended status: Informational</td>
<td class="right">Jul 11, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">SFF Extensions for Mobile IPv6<br />
  <span class="filename">draft-perkins-mext-sffexts-01</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>A mobile node with multiple radio interfaces running in single-radio mode will typically need IP address continuity as it migrates from one 4G wireless network to another; Mobile IPv6 is very well suited for that purpose.  For such mobile nodes using Mobile IP, mobility management by the home agent can be extended to provide necessary information about the Signal Forwarding Functions (SFFs) that have been defined for WiMAX and for eHRPD/CDMA networks.  In this document, we explain the operations required to support single-radio mobile nodes and specify new extensions to Mobile IPv6 Binding Update and Binding Acknowledgement for supporting ease of access between mobile nodes and SFFs.  </p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted to IETF in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Overview</a>
</li>
<li>3.   <a href="#rfc.section.3">Co-locating SFF in the home network with the Home Agent</a>
</li>
<li>4.   <a href="#rfc.section.4">Extension Formats</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">SFF-REQ (SFF Parameters Request)</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">SFF-REP (SFF Parameters Reply)</a>
</li>
<li>5.   <a href="#rfc.section.5">Security Considerations</a>
</li>
<li>6.   <a href="#rfc.section.6">IANA Considerations</a>
</li>
<li>7.   <a href="#rfc.references">References</a>
</li>
<li>7.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>7.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li>Appendix A.   <a href="#rfc.appendix.Appendix%20A">Acknowledgements</a>
</li>
<li><a href="#rfc.authors">Author's Address</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> <a href="#intro" id="intro">Introduction</a>
</h1>
<p id="rfc.section.1.p.1">There is growing interest to enable efficient handovers between heterogeneous radio access technologies (RATs) for networks owned by the same network operator, or network operators who have entered into roaming agreements.  Since authentication is indispensible for enabling the attachment of a mobile node, a mutually accessible authentication authority is indispensible for enabling efficient handovers between such operator networks.  Based on this authentication authority, we can develop trust relationships between agents in each network that are charged with responsibilities for aiding handovers.  </p>
<p id="rfc.section.1.p.2">Wireless devices that are designed to attach to networks using heterogeneous RATs must include radio interfaces enabling connectivity to each desired RAT.  But each radio interface requires substantial power -- in fact, the radio interfaces for mobile wireless devices are quite often the biggest consumer of scarce battery power.  For this reason, today, and into the foreseeable future, most mobile wireless devices that have multiple radio interfaces will nevertheless only keep one of them powered on at any particular time.  Such devices are known as "single-radio" mobile nodes (MNs), notwithstanding the presence of multiple radio interfaces in each MN's hardware.  </p>
<p id="rfc.section.1.p.3">Single-radio nodes present design challenges, because if only a single radio interface is powered on at any particular time, it is not possible for the device to be simultaneously connected to two different networks.  In such cases, handover protocols must try to compensate for the time during which the wireless device will be retuning its hardware to establish a link with the target network.  This "break-before-make" mode of operation is susceptible to dropping packets during the time when the target radio access link is not yet established, but the link to the source network has already been released.  </p>
<p id="rfc.section.1.p.4">For smooth handovers, it is imperative to reduce the time between release of one radio link and establishment of the new radio link at the target network.  Before the new link can be established in the target network, some or all of the following procedures must typically be followed: </p>

<dl>
<dt></dt>
<dd style="margin-left: 8">- Scheduling the radio link </dd>
<dt></dt>
<dd style="margin-left: 8">- Authenticating the mobile node </dd>
<dt></dt>
<dd style="margin-left: 8">- Creating proper context for the mobile node </dd>
<dt></dt>
<dd style="margin-left: 8">- Allocating data paths for traffic to/from the mobile node </dd>
</dl>

<p> </p>
<p id="rfc.section.1.p.5">The specific details for each step vary quite a bit depending on the particular RAT used in the target network.  But, regardless of the particular target RAT, completing the listed procedures is too time consuming to enable smooth handovers when faced with the "break-before-make" nature of a single-radio MN.  For this reason, it is very important that the MN try to accomplish as many of the attachment procedures as possible before releasing its current radio link.  So, for instance, while MN is still attached to network N1, it may try to transfer context to a target base station in a target network N2.  In fact, almost all of the above procedures can be accomplished ahead of the actual radio link break, with operator agreement and mutual access to core network functions.   For ease of discussion, in this document all such handover optimizations will collectively be termed as "pre-registration".  </p>
<p id="rfc.section.1.p.6">There has been considerable effort invested into protocol support for preregistration.  To do the signaling from the current network into the target network, the mobile node needs the following information about the target network: </p>

<dl>
<dt></dt>
<dd style="margin-left: 8">- Scheduling the radio link </dd>
<dt></dt>
<dd style="margin-left: 8">- location of basestation or access point </dd>
<dt></dt>
<dd style="margin-left: 8">- IP addresses of signaling endpoints for preregistration functional modules </dd>
<dt></dt>
<dd style="margin-left: 8">- Security association parameters for those signaling endpoints </dd>
</dl>

<p> </p>
<p id="rfc.section.1.p.7">The latter requirement results from the possibility that preregistration signaling between the MN's current network and the target network may traverse the Internet, even though the networks are owned by the same operators or operators who have made roaming agreements.  It may be impracticable for such information to be preconfigured into each of the millions of subscriber devices roaming around today's wireless networks, and the number of devices continues to increase rapidly from year to year.  Given that, any preconfiguration strategy is likely to fail soon.  </p>
<p id="rfc.section.1.p.8">Therefore, the MN must not only follow the require preregistration procedures for the target network, but it must also discover the necessary IP addresses for the target functional modules, and it must also establish a security relationship with each such target module.  The discovery mechanisms for these handover agents typically involve DHCP or resolution of purpose-built DNS name.  The former approach could be integrated with other DHCP access procedures; using DNS affords a speed advantage to the latter approach.  One can reasonably ask how the MN might get access to the proper DHCP server or DNS server, especially given the emphasis on private addressing in today's networks.  Many restrictions and assumptions are required in order for the necessary information to be supplied to the MN.  </p>
<p id="rfc.section.1.p.9">These discovery and security procedures are to be undertaken after the MN determines that it would be beneficial to move to a new network.  The benefit is typically for improved coverage, but in many cases also results from reduced cost or improved security or access to needed resources unavailable in the current network.  For whatever reason, after the determination is made, the MN cannot yet start to carry out its preregistration tasks.  The discovery and security tasks cannot be started until the target network can be identified, and the target network is closely associated with the current location of the MN.  </p>
<p id="rfc.section.1.p.10">In summary, once the MN starts to move to a new network, the following are required: </p>

<dl>
<dt></dt>
<dd style="margin-left: 8">- Discovery of handover agent(s) in the target network </dd>
<dt></dt>
<dd style="margin-left: 8">- Security establishment with target agents </dd>
<dt></dt>
<dd style="margin-left: 8">- Pre-authentication using the security services trusted by the foreign network </dd>
<dt></dt>
<dd style="margin-left: 8">- Possibly other pre-registration tasks.  </dd>
</dl>

<p> </p>
<p id="rfc.section.1.p.11">Each of these procedures may require lengthy signaling transactions with the MN.  It is the goal of this document to specify a way to reduce the time delay associated with the first two tasks.  By doing so, it is expected that handover performance can be substantially improved.  Moreover, given reasonable assumptions about operator roaming agreements, it is likely that this proposal will be simpler to deploy and simpler for ongoing network management.  </p>
<p id="rfc.section.1.p.12">The following abbreviations appear in this document: </p>

<dl>
<dt></dt>
<dd style="margin-left: 8">HA: home agent </dd>
<dt></dt>
<dd style="margin-left: 8">MN: mobile node </dd>
<dt></dt>
<dd style="margin-left: 8">SFF: Signal Forwarding Function </dd>
<dt></dt>
<dd style="margin-left: 8">OSFF: Signal Forwarding Function in the Originating Network </dd>
<dt></dt>
<dd style="margin-left: 8">TSFF: Signal Forwarding Function in the Target Network </dd>
<dt></dt>
<dd style="margin-left: 8">BU: Binding Update </dd>
<dt></dt>
<dd style="margin-left: 8">BAck: Binding Acknowledgement </dd>
<dt></dt>
<dd style="margin-left: 8">PoA: Point of Attachment </dd>
<dt></dt>
<dd style="margin-left: 8">RAT: Radio Access Technology </dd>
</dl>

<p> </p>
<p><br><br><br><br><br><br><br></p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> <a href="#Overview" id="Overview">Overview</a>
</h1>
<p id="rfc.section.2.p.1">Recent documents describing handovers between cooperating networks supporting different radio technologies have specified a new functional module called a Signal Forwarding Function (SFF).  The SFF is the agent in the target network which assists the MN to carry out preregistration tasks while the MN still has radio access in its current network.  The details of the signaling between the MN and the SFF fundamentally depend on the requirements of the target network; it is out of scope for this document to specify any preregistration protocol exchange that the SFF would handle in the target network on behalf of the MN.  See Figure 1.  </p>
<div id="#rfc.figure.1"></div>
<pre>
	+------------+       +---------------------+   +-------------+
	|            |       |                     |   |             |
       	| Network A  |       |      Internet       |   |  Network B  |
       	|            |       |                     |   |             |
	|      +------------------------------------------&gt; SFF      |
       	|     /      |       |                     |   |     |       |
	+----/-------+       +---------------------+   +-----|-------+
             |                                               |
             |                                               |
	MN---+                                            Target RAN
</pre>
<p></p>

<dl>
<dt>   Figure 1: MN at current PoA signaling via SFF in target network</dt>
<dd style="margin-left: 8">
<br><br> Here, Network A is the current point of attachment for the MN, and Network B is the target network.  MN signals to SFF in Network B to prepare for the handover from Network A into Network B.  </dd>
</dl>

<p> </p>
<p id="rfc.section.2.p.3">The SFF in the target network relays the MN signals to the network elements in the Radio Access Network (RAN) which will offer radio access to the MN.  </p>
<p id="rfc.section.2.p.4">SFF behavior has been specified in detail for eHRPD/CDMA networks as well as for WiMAX networks.  For a variety of reasons, seemingly not all technical, 3GPP has chosen to recommend instead a more integrated approach for interworking between LTE networks and other target networks.  Notably, LTE handovers are specified under the assumption that the MN's address belongs to the LTE operator.  WiMAX and HRPD network technologies are more friendly to assisting MN's that are addressable from via domains supporting other RATs.  </p>
<p id="rfc.section.2.p.5">Signaling between single-radio MNs and the SFF in a target network may follow protocol under development in the 802.21(c) task group under the auspices of IEEE 802.  This document can be viewed as a companion document to the SFF-based handover assistance being defined within 802.21(c).  </p>
<p id="rfc.section.2.p.6">As the MN moves from one network to another, the SFF that was the target SFF becomes the SFF in the MN's current network.  We observe that for operators offering SFF modules for handovers between heterogeneous network types, the SFF in the MN's current network (which can be called the "originating network") can manage security associations with SFFs in neighboring networks belonging to roaming partners.  Such security associations facilitate a simplified approach for the necessary discovery and security establishment between a MN and a target SFF, as follows.  </p>
<p id="rfc.section.2.p.7">When the MN completes its handover to a target network, it will have a security association with the SFF in that target network.  If the MN maintains this security association, then it can make use of the SFF in that network to assist in discovery and secure communication with a future SFF in a future target network.  The abbreviation TSFF will be used for the target SFF, and the SFF in the MN's current network will be called the "Originating SFF", abbreviated OSFF.  With that terminology, the handover between the originating network and the target network can be made faster using the services of the OSFF and the TSFF.  See Figure 2.  </p>
<div id="#rfc.figure.2"></div>
<pre>
    +----------------+       +---------------------+   +-------------+
    |                |       |                     |   |             |
    |   Network A    |       |      Internet       |   |  Network B  |
    |                |       |                     |   |             |
    |      OSFF-------------------------------------------&gt; TSFF     |
    |     /          |       |                     |   |     |       |
    +----/-----------+       +---------------------+   +-----|-------+
         |                                                   |
         |                                                   |
    MN&lt;--+                                             Target RAN
</pre>
<p></p>

<dl>
<dt>        Figure 1: MN handover preparation via OSFF and TSFF</dt>
<dd style="margin-left: 8">
<br><br> Again, Network A is the current point of attachment for the MN, and Network B is the target network.  MN initially relays signals to TSFF (in Network B) by way of OSFF (in Network A) to prepare for the handover from Network A into Network B.  </dd>
</dl>

<p> </p>
<p id="rfc.section.2.p.9">Specifically, when the MN has determined that a handover is beneficial, the following services should be offered by the OSFF: </p>

<dl>
<dt></dt>
<dd style="margin-left: 8">- The OSFF should be able to identify the proper TSFF to help the MN with handover to the target network.  </dd>
<dt></dt>
<dd style="margin-left: 8">- The OSFF should be able to provide a shared key to establish a security association between the MN and the TSFF.  </dd>
</dl>

<p> In other words, the OSFF enables optimized discovery and security establishment for the TSFF and thus substantially simplifies and shortens the handover preparation time needed by the MN.  When the MN arrives at the target network, the TSFF becomes the OSFF and the MN has a security association with the OSFF useful for future handover services.  </p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> <a href="#Colocate" id="Colocate">Co-locating SFF in the home network with the Home Agent</a>
</h1>
<p id="rfc.section.3.p.1">The foregoing overview does not explain how a MN might best get information about the SFF in the network providing the MN's initial point of attachment (PoA).  </p>
<p id="rfc.section.3.p.2">Up until this point in the current document, there has been no attention paid for the need of the MN to maintain IP address continuity as it moves from the originating network to a target network.  For this purpose, the MN can use Mobile IPv6<a href="#RFC3775">[RFC3775]</a> (or Mobile IP for IPv4 devices<a href="#RFC3344">[RFC3344]</a>).  The Binding Update (BU) from the MN is, more often than not, transmitted as soon as the MN has established a radio link at the target network; alternatively, the BU could be sent just as the radio link between the MN and the originating network were to be broken.  This latter approach as the advantage of reducing the amount of time during which the home agent would be routing packets to the wrong network, but would not work as well if the target network required a long time to establish a new radio link.  </p>
<p id="rfc.section.3.p.3">When the mobile node (MN) is making its initial point of attachment, it does not yet need the services of any SFF.  The MN could get the required address of the SFF and establish a security association at any time after its initial attachment procedures have completed.  In this document, it is proposed that this information be delivered by the home agent as part of the Mobile IPv6 registration procedure.  Furthermore, it is proposed that the SFF function in the home domain should be co-located with the home agent in that domain.  Doing so has several advantages, as follows: </p>

<dl>
<dt></dt>
<dd style="margin-left: 8">- The home agent is a natural repository for mobility management functions such as SFF.  If the home agent is co-located with the SFF in the MN's home domain, it can readily assist the MN with handovers from any visited network back to the home network.  This is expected to be a very frequent case.  </dd>
<dt></dt>
<dd style="margin-left: 8">- The MN naturally already has a security association with the home agent.  When the home agent is co-located with home SFF (i.e., HSFF), then the all of the necessary procedures for finding and securing communications with SFFs in all visited networks of roaming partners can be accomplished without any additional need for DHCP or IKEv2.  </dd>
<dt></dt>
<dd style="margin-left: 8">- The MN is already required to securely transmit a BU to its home agent.  Adding a new extension to the BU, requesting the IP address and shared key for the local SFF is economical and introduces fewer error conditions.  </dd>
<dt></dt>
<dd style="margin-left: 8">- In the typical case where the MN begins its initial network attachment in its home network, the MN can rely on its home agent as an OSFF for future handovers to target networks.  </dd>
<dt></dt>
<dd style="margin-left: 8">- For handovers from WiFi into any network of roaming partner, the MN can utilize its home agent/HSFF as an OSFF to establish preregistration signaling with any desired target network enabled for roaming.  </dd>
</dl>

<p> </p>
<p id="rfc.section.3.p.4">Given the appropriate security model between roaming partners, co-locating the SFF function with the home agent in the home network enables also reduces the number of mobility agents requiring configuration and management.  </p>
<p id="rfc.section.3.p.5">In this document, only signaling elements for Mobile IPv6 (MIPv6) are specified.  Similar extensions to Registration Request and Registration Reply for Mobile IPv4 can readily be specified.  </p>
<p id="rfc.section.3.p.6">The following extension to the Binding Update of MIPv6 is needed so that the MN can request information about the SFF in the network providing its care-of address </p>

<dl>
<dt></dt>
<dd style="margin-left: 8">- SFF address Request (SFF-REQ) </dd>
</dl>

<p> </p>
<p id="rfc.section.3.p.7">The following extension to the Binding Acknowledgement is needed so that the HA can request information about the SFF to the requesting MN </p>

<dl>
<dt></dt>
<dd style="margin-left: 8">- SFF address Reply (SFF-REP) </dd>
</dl>

<p> </p>
<p id="rfc.section.3.p.8">The SFF in the MN's current network (i.e., OSFF) will be tasked with enabling security associations between the MN and a future target SFF.  Therefore the MN will require a security association with OSFF, and there does not appear to be a need for providing an "SFF address Request" extension that does not also imply a simulataneous request for key material to establish the security association with OSFF.  </p>
<p id="rfc.section.3.p.9">The Home Agent MAY supply an SFF-REP extension to the MN in its BAck even when the MN has not requested it, if the MN is known by preconfiguration or other means to support the ability to utilize OSFF for handover assistance.  </p>
<p id="rfc.section.3.p.10">It is presumed in this initial version of the SFF-REQ and SFF-REP specification that the MN's care-of address is sufficient for the home agent to determine the proper and roaming network to which the OSFF belongs, and thus be able to determine the IP address for the OSFF.  Future versions of this specification may specify additional location information to be included with the Binding Update.  </p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#formats" id="formats">Extension Formats</a>
</h1>
<p id="rfc.section.4.p.1">The SFF-REQ may only appear in a Binding Update IPv6 Mobility Header, and the SFF-REP may only appear in a Binding Acknowledgement IPv6 Mobility Header.  </p>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> <a href="#SFF-REQ" id="SFF-REQ">SFF-REQ (SFF Parameters Request)</a>
</h1>
<p id="rfc.section.4.1.p.1">A mobile node (MN) inserts the SFF-REQ extension appear in a Binding Update Header to request that the home agent supply information about the SFF in the network providing the Care-of Address to the MN.  </p>
<div id="#rfc.figure.3"></div>
<pre>
      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
                                     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                                     |  Option Type  | Option Length |
                                     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
<p></p>

<dl>
<dt>Option Type</dt>
<dd style="margin-left: 8">
<br><br> The Option Type will be allocated by IANA from the space of Mobility Option types.  </dd>
<dt>Option Length</dt>
<dd style="margin-left: 8">
<br><br> The Option Length is 0.  </dd>
</dl>

<p> </p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> <a href="#SFF-REP" id="SFF-REP">SFF-REP (SFF Parameters Reply)</a>
</h1>
<p id="rfc.section.4.2.p.1">A home agent (HA) inserts the SFF Parameter Reply (SFF-REP) in a Binding Acknowledgement.  The SFF-REP contains the IP address of the SFF (i.e., OSFF) in the MN's current network, as well as an encrypted key to enable secure communication between the MN and OSFF.  </p>
<div id="#rfc.figure.4"></div>
<pre>
      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
                                     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                                     |  Option Type  | Option Length |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     :                  SFF IPv6 Address (128 bits)                  :
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                        HA_SPI (32 bits)                       |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     :             Encrypted SFF key (at least 128 bits)             :
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                       SFF_SPI (32 bits)                       |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
				     
</pre>
<p></p>

<dl>
<dt>Option Type</dt>
<dd style="margin-left: 8">
<br><br> The Option Type will be allocated by IANA from the space of Mobility Option types.  </dd>
<dt>Option Length</dt>
<dd style="margin-left: 8">
<br><br> The Option Length is 24 + [# of bytes for Encrypted SFF key].  </dd>
<dt>SFF IPv6 Address</dt>
<dd style="margin-left: 8">
<br><br> The SFF IPv6 Address (128 bits) </dd>
<dt>HA_SPI</dt>
<dd style="margin-left: 8">
<br><br> HA_SPI (32 bits) is used by the MN to select the proper Mobility Security Association with its home agent so that it can use the correct security parameters in its computation to recover the SFF key.  </dd>
<dt>Encrypted SFF key</dt>
<dd style="margin-left: 8">
<br><br> Encrypted SFF key (at least 128 bits) </dd>
<dt>SFF SPI</dt>
<dd style="margin-left: 8">
<br><br> The SFF SPI (32 bits) is used by the MN as needed for any future secure communications with the SFF in the network supporting its current Care-of Address.  This same SPI will be also be used by the SFF for its secure communications with the MN.  </dd>
</dl>

<p> </p>
<p id="rfc.section.4.2.p.3">The home agent first picks a random number to be used for K_sff, the desired shared key between MN and SFF.  Then, the home agent computes the Encrypted Key as follows, using the parameters it supplies in the SFF-REP: </p>

<dl>
<dt></dt>
<dd style="margin-left: 8">Encrypted SFF key = [K_sff (+) HMAC_SHA1 (SFFaddr, SFF_SPI)] </dd>
</dl>

<p> where: </p>

<dl>
<dt></dt>
<dd style="margin-left: 8">K_sff is the desired shared key between MN and SFF </dd>
<dt></dt>
<dd style="margin-left: 8">Encrypted SFF key hides K_sff for transmission to the MN </dd>
<dt></dt>
<dd style="margin-left: 8">(+) is XOR </dd>
<dt></dt>
<dd style="margin-left: 8">HMAC_SHA1<a href="#RFC2401">[RFC2401]</a> is the algorithm to be used by the Home Agent to encrypt the K_sff for delivery in encrypted form to the mobile node.  HMAC_SHA1 uses the key forming the basis of the mobility security association (indexed by HA_SPI) between the MN and the HA </dd>
<dt></dt>
<dd style="margin-left: 8">SFFaddr is the IPv6 address of the SFF </dd>
<dt></dt>
<dd style="margin-left: 8">SFF_SPI is the SPI of the security association between the MN and SFF, used here simply as a random number.  </dd>
</dl>

<p> </p>
<p id="rfc.section.4.2.p.4">The mobile node computes the following value from the parameters in the SFF-REP: </p>

<dl>
<dt></dt>
<dd style="margin-left: 8">K_sff = [Encrypted SFF key (+) HMAC_SHA1 (SFFaddr, SFF_SPI)] </dd>
</dl>

<p> where: </p>

<dl>
<dt></dt>
<dd style="margin-left: 8">K_sff is the desired shared key between MN and SFF </dd>
<dt></dt>
<dd style="margin-left: 8">(+) is XOR </dd>
<dt></dt>
<dd style="margin-left: 8">HMAC_SHA1<a href="#RFC2401">[RFC2401]</a> is the algorithm to be used by the MN to recover the K_sff delivered in encrypted form by the home agent.  HMAC_SHA1 uses the key forming the basis of the mobility security association (indexed by HA_SPI) between the MN and the HA </dd>
<dt></dt>
<dd style="margin-left: 8">SFFaddr is the IPv6 address of the SFF </dd>
<dt></dt>
<dd style="margin-left: 8">SFF_SPI is the SPI of the security association between the MN and SFF, used here simply as a random number.  </dd>
</dl>

<p> </p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#security" id="security">Security Considerations</a>
</h1>
<p id="rfc.section.5.p.1">This document uses techniques from RFC 2104 (and RFC 3957) for key distribution.  Up until now, no security weaknesses have been reported for those techniques, as long as the basic encryption algorithms are themselves secure.  HMAC_SHA1 is recommended for encryption.  </p>
<p id="rfc.section.5.p.2">In future revisions of this specification, SHA-256 or AES may be instead specified, since SHA-1 has been shown to have some potential vulnerabilities.  However, for low volume (comtrol plane) signaling, such vulnerabilities are unlikely to have any significant effect.  </p>
<p id="rfc.section.5.p.3">This specification should be considered as an initial draft.  The exact nature of the algorithm used to compute the Encrypted Key field of the SFF-REP is subject to discussion and changes are likely.  </p>
<p id="rfc.section.5.p.4">The home SFF (HSFF) colocated with home agent is also charged with the responsibility for supplying K_sff to the SFF in the network supporting the mobile node's Care-of Address (i.e., OSFF).  Messages currently undergoing specification within IEEE 802.21(c) and 802.21(a) are likely to be used between HSFF and OSFF.  The nature of the algorithm used to provide confidentiality for the IEEE 802.21(c) messages between HSFF and OSFF may well be different than the algorithm used for SFF-REP computation.  </p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#iana" id="iana">IANA Considerations</a>
</h1>
<p id="rfc.section.6.p.1">This document requires allocation of two new extensions to Mobile IPv6 Binding Update and Binding Acknowledgement.  </p>
<p><br><br><br><br><br><br><br></p>
<h1 id="rfc.references">
<a href="#rfc.references">7.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">7.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2401">[RFC2401]</b></td>
<td class="top">
<a href="mailto:kent@bbn.com" title="BBN Corporation">Kent, S.</a> and <a href="mailto:rja@corp.home.net" title="@Home Network">R. Atkinson</a>, "<a href="http://tools.ietf.org/html/rfc2401">Security Architecture for the Internet Protocol</a>", RFC 2401, November 1998.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3344">[RFC3344]</b></td>
<td class="top">
<a>Perkins, C.</a>, "<a href="http://tools.ietf.org/html/rfc3344">IP Mobility Support for IPv4</a>", RFC 3344, August 2002.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3775">[RFC3775]</b></td>
<td class="top">
<a>Johnson, D.</a>, <a>Perkins, C.</a> and <a>J. Arkko</a>, "<a href="http://tools.ietf.org/html/rfc3775">Mobility Support in IPv6</a>", RFC 3775, June 2004.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">7.2.</a> Informative References</h1>
<table><tbody><tr>
<td class="reference"><b id="cool_draft">[cool_draft]</b></td>
<td class="top">
<a title="CIA ">Doe, J.</a> and <a title="CIA ">J. Doe</a>, "<a href="http://tools.ietf.org/html/draft-does-cia-rules.txt">A cool draft.  </a>", Internet-Draft draft-does-cia-rules.txt, 2010.</td>
</tr></tbody></table>
<h1 id="rfc.appendix.Appendix A">
<a href="#rfc.appendix.Appendix%20A">Appendix A.</a> <a href="#ack" id="ack">Acknowledgements</a>
</h1>
<p id="rfc.section.Appendix A.p.1">This document has benefitted from discussions with the following people, in no particular order: Anthony Chan, Subir Varma </p>
<h1 id="rfc.authors"><a href="#rfc.authors">Author's Address</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Charles E. Perkins</span> 
	  <span class="n hidden">
		<span class="family-name">Perkins</span>
	  </span>
	</span>
	<span class="org vcardline">Tellabs</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">Phone: +1-408-421-1172</span>

<span class="vcardline">EMail: <a href="mailto:charliep@computer.org">charliep@computer.org</a></span>

  </address>
</div>

</body>
</html>