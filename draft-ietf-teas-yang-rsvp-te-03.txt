



TEAS Working Group                                             V. Beeram
Internet-Draft                                          Juniper Networks
Intended status: Standards Track                            T. Saad, Ed.
Expires: August 23, 2018                                       R. Gandhi
                                                     Cisco Systems, Inc.
                                                                  X. Liu
                                                                   Jabil
                                                              I. Bryskin
                                                     Huawei Technologies
                                                                 H. Shah
                                                                   Ciena
                                                       February 19, 2018


                     A YANG Data Model for RSVP-TE
                    draft-ietf-teas-yang-rsvp-te-03

Abstract

   This document defines a YANG data model for the configuration and
   management of RSVP (Resource Reservation Protocol) to establish
   Traffic-Engineered (TE) Label-Switched Paths (LSPs) for MPLS (Multi-
   Protocol Label Switching) and other technologies.

   The model defines a generic RSVP-TE module for signaling LSPs that is
   technology agnostic.  The generic RSVP-TE module is to be augmented
   by technology specific RSVP-TE modules that define technology
   specific data.  This document defines the augmentation for RSVP-TE
   MPLS LSPs model.

   This model covers data for the configuration, operational state,
   remote procedural calls, and event notifications.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."




Beeram, et al.           Expires August 23, 2018                [Page 1]

Internet-Draft            RSVP YANG Data Model             February 2018


   This Internet-Draft will expire on August 23, 2018.

Copyright Notice

   Copyright (c) 2018 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
     1.1.  Terminology . . . . . . . . . . . . . . . . . . . . . . .   3
     1.2.  Tree Diagram  . . . . . . . . . . . . . . . . . . . . . .   3
     1.3.  Prefixes in Data Node Names . . . . . . . . . . . . . . .   4
   2.  Design Considerations . . . . . . . . . . . . . . . . . . . .   5
     2.1.  Module Hierarchy  . . . . . . . . . . . . . . . . . . . .   5
     2.2.  RSVP-TE Generic Model . . . . . . . . . . . . . . . . . .   6
       2.2.1.  Tree Diagram  . . . . . . . . . . . . . . . . . . . .   6
       2.2.2.  YANG Module . . . . . . . . . . . . . . . . . . . . .  14
     2.3.  RSVP-TE MPLS Model  . . . . . . . . . . . . . . . . . . .  26
       2.3.1.  Tree Diagram  . . . . . . . . . . . . . . . . . . . .  26
       2.3.2.  YANG Module . . . . . . . . . . . . . . . . . . . . .  28
   3.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .  41
   4.  Security Considerations . . . . . . . . . . . . . . . . . . .  41
   5.  Acknowledgement . . . . . . . . . . . . . . . . . . . . . . .  42
   6.  Contributors  . . . . . . . . . . . . . . . . . . . . . . . .  42
   7.  Normative References  . . . . . . . . . . . . . . . . . . . .  42
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  43

1.  Introduction

   YANG [RFC6020] is a data definition language that was introduced to
   define the contents of a conceptual data store that allows networked
   devices to be managed using NETCONF [RFC6241].  YANG is proving
   relevant beyond its initial confines, as bindings to other interfaces
   (e.g.  ReST) and encoding other than XML (e.g.  JSON) are being
   defined.  Furthermore, YANG data models can be used as the basis of
   implementation for other interfaces, such as CLI and programmatic
   APIs.



Beeram, et al.           Expires August 23, 2018                [Page 2]

Internet-Draft            RSVP YANG Data Model             February 2018


   This document defines a generic YANG data model for configuring and
   managing RSVP-TE LSP(s) [RFC3209].  The RSVP-TE generic model
   augments the RSVP base and extended models defined in
   [I-D.ietf-teas-yang-rsvp], and adds TE extensions to the RSVP
   protocol [RFC2205] model configuration and state data.  The
   technology specific RSVP-TE models augment the generic RSVP-TE model
   with additional technology specific parameters.  For example, this
   document also defines the MPLS RSVP-TE model for configuring and
   managing MPLS RSVP TE LSP(s).

   In addition to augmenting the RSVP YANG module, the modules defined
   in this document augment the TE Interfaces, Tunnels and LSP(s) YANG
   module defined in [I-D.ietf-teas-yang-te] to define additional
   parameters to enable signaling for RSVP-TE.

1.1.  Terminology

   In this document, the key words "MUST", "MUST NOT", "REQUIRED",
   "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY",
   and "OPTIONAL" are to be interpreted as described in BCP 14, RFC 2119
   [RFC2119].

1.2.  Tree Diagram

   A simplified graphical representation of the data model is presented
   in each section of the model.  The following notations are used for
   the YANG model data tree representation.
























Beeram, et al.           Expires August 23, 2018                [Page 3]

Internet-Draft            RSVP YANG Data Model             February 2018


   <status> <flags> <name> <opts> <type>

    <status> is one of:
      +  for current
      x  for deprecated
      o  for obsolete

    <flags> is one of:
      rw  for read-write configuration data
      ro  for read-only non-configuration data
      -x  for execution rpcs
      -n  for notifications

    <name> is the name of the node

   If the node is augmented into the tree from another module, its name
   is printed as <prefix>:<name>

    <opts> is one of:
      ? for an optional leaf or node
      ! for a presence container
      * for a leaf-list or list
      Brackets [<keys>] for a list's keys
      Curly braces {<condition>} for optional feature that make node
   conditional
      Colon : for marking case nodes
      Ellipses ("...") subtree contents not shown

      Parentheses enclose choice and case nodes, and case nodes are also
      marked with a colon (":").

    <type> is the name of the type for leafs and leaf-lists.

1.3.  Prefixes in Data Node Names

   In this document, names of data nodes and other data model objects
   are prefixed using the standard prefix associated with the
   corresponding YANG imported modules, as shown in Table 1.













Beeram, et al.           Expires August 23, 2018                [Page 4]

Internet-Draft            RSVP YANG Data Model             February 2018


           +---------------+--------------------+---------------+
           | Prefix        | YANG module        | Reference     |
           +---------------+--------------------+---------------+
           | yang          | ietf-yang-types    | [RFC6991]     |
           | inet          | ietf-inet-types    | [RFC6991]     |
           | te            | ietf-te            | this document |
           | te-types      | ietf-te-types      | this document |
           | te-mpls-types | ietf-te-mpls-types | this document |
           | te-dev        | ietf-te-device     | this document |
           | te-mpls       | ietf-te-mpls       | this document |
           | te-sr-mpls    | ietf-te-sr-mpls    | this document |
           +---------------+--------------------+---------------+

               Table 1: Prefixes and corresponding YANG modules

2.  Design Considerations

2.1.  Module Hierarchy

   The data pertaining to RSVP-TE in this document is divided into two
   modules: a technology agnostic RSVP-TE module that holds generic
   parameters for RSVP-TE applicable to all technologies, and a
   technology specific RSVP-TE module (e.g. for MPLS RSVP-TE) that holds
   parameters specific to the technology.

   This document defines YANG data models for RSVP-TE, and RSVP-TE MPLS
   configuration, state, notification and RPCs.  The relationship
   between the different modules is depicted in Figure 1.























Beeram, et al.           Expires August 23, 2018                [Page 5]

Internet-Draft            RSVP YANG Data Model             February 2018


     TE basic       +---------+        ^: import
     module         | ietf-te |        o: augment
                    +---------+
                       |   o
                       |   |
                       v   |
                    +--------------+
     RSVP-TE module | ietf-rsvp-te |o . . .
                    +--------------+         \
                       ^   |                  \
                       |   o               +-------------------+
                    +-----------+          | ietf-rsvp-otn-te  |
     RSVP module    | ietf-rsvp |          +-------------------+
                    +-----------+             RSVP-TE with OTN
                         o                    extensions
                         |                   (shown for illustration
     RSVP extended       |                    not in this document)
       module       +--------------------+
                    | ietf-rsvp-extended |
                    +--------------------+

       Figure 1: Relationship of RSVP and RSVP-TE modules with other
                             protocol modules

2.2.  RSVP-TE Generic Model

   The RSVP-TE generic module augments the RSVP base and extended YANG
   modules defined in [I-D.ietf-teas-yang-rsvp]  as well as the TE
   tunnels and interfaces module [I-D.ietf-teas-yang-te] to cover
   parameters specific to the configuration and management of RSVP-TE
   interfaces, tunnels and LSP(s).

2.2.1.  Tree Diagram

   There are three types of configuration and state data nodes in this
   module:

   o  those augmenting or extending the base RSVP module

   o  those augmenting or extending the base TE module

   o  those that are specific to the RSVP-TE module

   Below is a YANG tree representation for data items defined in the
   RSVP-TE generic module:

 module: ietf-rsvp-te
   augment



Beeram, et al.           Expires August 23, 2018                [Page 6]

Internet-Draft            RSVP YANG Data Model             February 2018


   /rt:routing/rt:control-plane-protocols/rt:control-plane-protocol/
   rsvp:rsvp/rsvp:globals:
     +--rw global-soft-preemption!
        +--rw soft-preemption-timeout?   uint16
   augment
   /rt:routing/rt:control-plane-protocols/rt:control-plane-protocol/
   rsvp:rsvp/rsvp:interfaces:
     +--rw rsvp-te-interface-attributes
        +--ro state
   augment
   /rt:routing/rt:control-plane-protocols/rt:control-plane-protocol/
   rsvp:rsvp/rsvp:interfaces/rsvp:interface:
     +--rw rsvp-te-interface-attributes
        +--ro state
   augment
   /rt:routing/rt:control-plane-protocols/rt:control-plane-protocol/
   rsvp:rsvp/rsvp:globals/rsvp:sessions/rsvp:session/rsvp:state/
   rsvp:psbs/rsvp:psb:
     +--ro tspec-average-rate?   rt-types:bandwidth-ieee-float32
     +--ro tspec-size?           rt-types:bandwidth-ieee-float32
     +--ro tspec-peak-rate?      rt-types:bandwidth-ieee-float32
     +--ro min-policed-unit?     uint32
     +--ro max-packet-size?      uint32
   augment
   /rt:routing/rt:control-plane-protocols/rt:control-plane-protocol/
   rsvp:rsvp/rsvp:globals/rsvp:sessions/rsvp:session/rsvp:state/
   rsvp:rsbs/rsvp:rsb:
     +--ro fspec-average-rate?   rt-types:bandwidth-ieee-float32
     +--ro fspec-size?           rt-types:bandwidth-ieee-float32
     +--ro fspec-peak-rate?      rt-types:bandwidth-ieee-float32
     +--ro min-policed-unit?     uint32
     +--ro max-packet-size?      uint32
   augment
   /rt:routing/rt:control-plane-protocols/rt:control-plane-protocol/
   rsvp:rsvp/rsvp:neighbors:
   augment /te:te/te:tunnels/te:tunnel:
     +--rw lsp-signaled-name?           string
     +--rw local-recording-desired?     boolean
     +--rw se-style-desired?            boolean
     +--rw path-reevaluation-request?   boolean
     +--rw soft-preemption-desired?     boolean
     +--rw lsp-rerouting?               enumeration
     +--rw lsp-integrity-required?      boolean
     +--rw lsp-contiguous?              boolean
     +--rw lsp-stitching-desired?       boolean
     +--rw lsp-preplanned?              boolean
     +--rw lsp-oob-mapping?             boolean
     +--rw retry-timer?                 uint16



Beeram, et al.           Expires August 23, 2018                [Page 7]

Internet-Draft            RSVP YANG Data Model             February 2018


   augment /te:te/te:tunnels/te:tunnel/te:state:
     +--ro lsp-signaled-name?           string
     +--ro local-recording-desired?     boolean
     +--ro se-style-desired?            boolean
     +--ro path-reevaluation-request?   boolean
     +--ro soft-preemption-desired?     boolean
     +--ro lsp-rerouting?               enumeration
     +--ro lsp-integrity-required?      boolean
     +--ro lsp-contiguous?              boolean
     +--ro lsp-stitching-desired?       boolean
     +--ro lsp-preplanned?              boolean
     +--ro lsp-oob-mapping?             boolean
     +--ro retry-timer?                 uint16
   augment /te:te/te:lsps-state/te:lsp:
     +--ro associated-rsvp-session?            ->
     /rt:routing/control-plane-protocols/control-plane-protocol/
     rsvp:rsvp/globals/sessions/session/local-index
     +--ro lsp-signaled-name?                  string
     +--ro local-recording-desired?            boolean
     +--ro se-style-desired?                   boolean
     +--ro path-reevaluation-request?          boolean
     +--ro soft-preemption-desired?            boolean
     +--ro lsp-rerouting?                      enumeration
     +--ro lsp-integrity-required?             boolean
     +--ro lsp-contiguous?                     boolean
     +--ro lsp-stitching-desired?              boolean
     +--ro lsp-preplanned?                     boolean
     +--ro lsp-oob-mapping?                    boolean
     +--ro explicit-route-objects
     |  +--ro incoming-explicit-route-hop* [index]
     |  |  +--ro index    -> ../state/index
     |  |  +--ro state
     |  |     +--ro index?            uint32
     |  |     +--ro (type)?
     |  |        +--:(numbered)
     |  |        |  +--ro numbered-hop
     |  |        |     +--ro address?     te-types:te-tp-id
     |  |        |     +--ro hop-type?    te-hop-type
     |  |        |     +--ro direction?   te-link-direction
     |  |        +--:(as-number)
     |  |        |  +--ro as-number-hop
     |  |        |     +--ro as-number?   binary
     |  |        |     +--ro hop-type?    te-hop-type
     |  |        +--:(unnumbered)
     |  |        |  +--ro unnumbered-hop
     |  |        |     +--ro node-id?      te-types:te-node-id
     |  |        |     +--ro link-tp-id?   te-types:te-tp-id
     |  |        |     +--ro hop-type?     te-hop-type



Beeram, et al.           Expires August 23, 2018                [Page 8]

Internet-Draft            RSVP YANG Data Model             February 2018


     |  |        |     +--ro direction?    te-link-direction
     |  |        +--:(label)
     |  |           +--ro label-hop
     |  |              +--ro te-label
     |  |                 +--ro (technology)?
     |  |                 |  +--:(generic)
     |  |                 |     +--ro generic?
     rt-types:generalized-label
     |  |                 +--ro direction?   te-label-direction
     |  +--ro outgoing-explicit-route-hop* [index]
     |     +--ro index    -> ../state/index
     |     +--ro state
     |        +--ro index?            uint32
     |        +--ro (type)?
     |           +--:(numbered)
     |           |  +--ro numbered-hop
     |           |     +--ro address?     te-types:te-tp-id
     |           |     +--ro hop-type?    te-hop-type
     |           |     +--ro direction?   te-link-direction
     |           +--:(as-number)
     |           |  +--ro as-number-hop
     |           |     +--ro as-number?   binary
     |           |     +--ro hop-type?    te-hop-type
     |           +--:(unnumbered)
     |           |  +--ro unnumbered-hop
     |           |     +--ro node-id?      te-types:te-node-id
     |           |     +--ro link-tp-id?   te-types:te-tp-id
     |           |     +--ro hop-type?     te-hop-type
     |           |     +--ro direction?    te-link-direction
     |           +--:(label)
     |              +--ro label-hop
     |                 +--ro te-label
     |                    +--ro (technology)?
     |                    |  +--:(generic)
     |                    |     +--ro generic?
     rt-types:generalized-label
     |                    +--ro direction?   te-label-direction
     +--ro incoming-record-route-subobjects
     |  +--ro incoming-record-route-subobject* [index]
     |     +--ro index    -> ../state/index
     |     +--ro state
     |        +--ro index?         uint32
     |        +--ro (type)?
     |           +--:(numbered)
     |           |  +--ro address?       te-types:te-tp-id
     |           |  +--ro ip-flags?      binary
     |           +--:(unnumbered)
     |           |  +--ro node-id?       te-types:te-node-id



Beeram, et al.           Expires August 23, 2018                [Page 9]

Internet-Draft            RSVP YANG Data Model             February 2018


     |           |  +--ro link-tp-id?    te-types:te-tp-id
     |           +--:(label)
     |              +--ro value?         rt-types:generalized-label
     |              +--ro label-flags?   binary
     +--ro outgoing-record-route-subobjects
        +--ro outgoing-record-route-subobject* [index]
           +--ro index    -> ../state/index
           +--ro state
              +--ro index?         uint32
              +--ro (type)?
                 +--:(numbered)
                 |  +--ro address?       te-types:te-tp-id
                 |  +--ro ip-flags?      binary
                 +--:(unnumbered)
                 |  +--ro node-id?       te-types:te-node-id
                 |  +--ro link-tp-id?    te-types:te-tp-id
                 +--:(label)
                    +--ro value?         rt-types:generalized-label
                    +--ro label-flags?   binary
   augment
   /te:te/te:tunnels/te:tunnel/te:p2p-primary-paths/te:p2p-primary-path/
   te:state/te:lsps/te:lsp:
     +--ro associated-rsvp-session?            ->
     /rt:routing/control-plane-protocols/control-plane-protocol/
     rsvp:rsvp/globals/sessions/session/local-index
     +--ro lsp-signaled-name?                  string
     +--ro local-recording-desired?            boolean
     +--ro se-style-desired?                   boolean
     +--ro path-reevaluation-request?          boolean
     +--ro soft-preemption-desired?            boolean
     +--ro lsp-rerouting?                      enumeration
     +--ro lsp-integrity-required?             boolean
     +--ro lsp-contiguous?                     boolean
     +--ro lsp-stitching-desired?              boolean
     +--ro lsp-preplanned?                     boolean
     +--ro lsp-oob-mapping?                    boolean
     +--ro explicit-route-objects
     |  +--ro incoming-explicit-route-hop* [index]
     |  |  +--ro index    -> ../state/index
     |  |  +--ro state
     |  |     +--ro index?            uint32
     |  |     +--ro (type)?
     |  |        +--:(numbered)
     |  |        |  +--ro numbered-hop
     |  |        |     +--ro address?     te-types:te-tp-id
     |  |        |     +--ro hop-type?    te-hop-type
     |  |        |     +--ro direction?   te-link-direction
     |  |        +--:(as-number)



Beeram, et al.           Expires August 23, 2018               [Page 10]

Internet-Draft            RSVP YANG Data Model             February 2018


     |  |        |  +--ro as-number-hop
     |  |        |     +--ro as-number?   binary
     |  |        |     +--ro hop-type?    te-hop-type
     |  |        +--:(unnumbered)
     |  |        |  +--ro unnumbered-hop
     |  |        |     +--ro node-id?      te-types:te-node-id
     |  |        |     +--ro link-tp-id?   te-types:te-tp-id
     |  |        |     +--ro hop-type?     te-hop-type
     |  |        |     +--ro direction?    te-link-direction
     |  |        +--:(label)
     |  |           +--ro label-hop
     |  |              +--ro te-label
     |  |                 +--ro (technology)?
     |  |                 |  +--:(generic)
     |  |                 |     +--ro generic?
     rt-types:generalized-label
     |  |                 +--ro direction?   te-label-direction
     |  +--ro outgoing-explicit-route-hop* [index]
     |     +--ro index    -> ../state/index
     |     +--ro state
     |        +--ro index?            uint32
     |        +--ro (type)?
     |           +--:(numbered)
     |           |  +--ro numbered-hop
     |           |     +--ro address?     te-types:te-tp-id
     |           |     +--ro hop-type?    te-hop-type
     |           |     +--ro direction?   te-link-direction
     |           +--:(as-number)
     |           |  +--ro as-number-hop
     |           |     +--ro as-number?   binary
     |           |     +--ro hop-type?    te-hop-type
     |           +--:(unnumbered)
     |           |  +--ro unnumbered-hop
     |           |     +--ro node-id?      te-types:te-node-id
     |           |     +--ro link-tp-id?   te-types:te-tp-id
     |           |     +--ro hop-type?     te-hop-type
     |           |     +--ro direction?    te-link-direction
     |           +--:(label)
     |              +--ro label-hop
     |                 +--ro te-label
     |                    +--ro (technology)?
     |                    |  +--:(generic)
     |                    |     +--ro generic?
     rt-types:generalized-label
     |                    +--ro direction?   te-label-direction
     +--ro incoming-record-route-subobjects
     |  +--ro incoming-record-route-subobject* [index]
     |     +--ro index    -> ../state/index



Beeram, et al.           Expires August 23, 2018               [Page 11]

Internet-Draft            RSVP YANG Data Model             February 2018


     |     +--ro state
     |        +--ro index?         uint32
     |        +--ro (type)?
     |           +--:(numbered)
     |           |  +--ro address?       te-types:te-tp-id
     |           |  +--ro ip-flags?      binary
     |           +--:(unnumbered)
     |           |  +--ro node-id?       te-types:te-node-id
     |           |  +--ro link-tp-id?    te-types:te-tp-id
     |           +--:(label)
     |              +--ro value?         rt-types:generalized-label
     |              +--ro label-flags?   binary
     +--ro outgoing-record-route-subobjects
        +--ro outgoing-record-route-subobject* [index]
           +--ro index    -> ../state/index
           +--ro state
              +--ro index?         uint32
              +--ro (type)?
                 +--:(numbered)
                 |  +--ro address?       te-types:te-tp-id
                 |  +--ro ip-flags?      binary
                 +--:(unnumbered)
                 |  +--ro node-id?       te-types:te-node-id
                 |  +--ro link-tp-id?    te-types:te-tp-id
                 +--:(label)
                    +--ro value?         rt-types:generalized-label
                    +--ro label-flags?   binary
   augment
   /te:te/te:tunnels/te:tunnel/te:p2p-secondary-paths/
   te:p2p-secondary-path/te:state/te:lsps/te:lsp:
     +--ro associated-rsvp-session?            ->
     /rt:routing/control-plane-protocols/control-plane-protocol/
     rsvp:rsvp/globals/sessions/session/local-index
     +--ro lsp-signaled-name?                  string
     +--ro local-recording-desired?            boolean
     +--ro se-style-desired?                   boolean
     +--ro path-reevaluation-request?          boolean
     +--ro soft-preemption-desired?            boolean
     +--ro lsp-rerouting?                      enumeration
     +--ro lsp-integrity-required?             boolean
     +--ro lsp-contiguous?                     boolean
     +--ro lsp-stitching-desired?              boolean
     +--ro lsp-preplanned?                     boolean
     +--ro lsp-oob-mapping?                    boolean
     +--ro explicit-route-objects
     |  +--ro incoming-explicit-route-hop* [index]
     |  |  +--ro index    -> ../state/index
     |  |  +--ro state



Beeram, et al.           Expires August 23, 2018               [Page 12]

Internet-Draft            RSVP YANG Data Model             February 2018


     |  |     +--ro index?            uint32
     |  |     +--ro (type)?
     |  |        +--:(numbered)
     |  |        |  +--ro numbered-hop
     |  |        |     +--ro address?     te-types:te-tp-id
     |  |        |     +--ro hop-type?    te-hop-type
     |  |        |     +--ro direction?   te-link-direction
     |  |        +--:(as-number)
     |  |        |  +--ro as-number-hop
     |  |        |     +--ro as-number?   binary
     |  |        |     +--ro hop-type?    te-hop-type
     |  |        +--:(unnumbered)
     |  |        |  +--ro unnumbered-hop
     |  |        |     +--ro node-id?      te-types:te-node-id
     |  |        |     +--ro link-tp-id?   te-types:te-tp-id
     |  |        |     +--ro hop-type?     te-hop-type
     |  |        |     +--ro direction?    te-link-direction
     |  |        +--:(label)
     |  |           +--ro label-hop
     |  |              +--ro te-label
     |  |                 +--ro (technology)?
     |  |                 |  +--:(generic)
     |  |                 |     +--ro generic?
     rt-types:generalized-label
     |  |                 +--ro direction?   te-label-direction
     |  +--ro outgoing-explicit-route-hop* [index]
     |     +--ro index    -> ../state/index
     |     +--ro state
     |        +--ro index?            uint32
     |        +--ro (type)?
     |           +--:(numbered)
     |           |  +--ro numbered-hop
     |           |     +--ro address?     te-types:te-tp-id
     |           |     +--ro hop-type?    te-hop-type
     |           |     +--ro direction?   te-link-direction
     |           +--:(as-number)
     |           |  +--ro as-number-hop
     |           |     +--ro as-number?   binary
     |           |     +--ro hop-type?    te-hop-type
     |           +--:(unnumbered)
     |           |  +--ro unnumbered-hop
     |           |     +--ro node-id?      te-types:te-node-id
     |           |     +--ro link-tp-id?   te-types:te-tp-id
     |           |     +--ro hop-type?     te-hop-type
     |           |     +--ro direction?    te-link-direction
     |           +--:(label)
     |              +--ro label-hop
     |                 +--ro te-label



Beeram, et al.           Expires August 23, 2018               [Page 13]

Internet-Draft            RSVP YANG Data Model             February 2018


     |                    +--ro (technology)?
     |                    |  +--:(generic)
     |                    |     +--ro generic?
     rt-types:generalized-label
     |                    +--ro direction?   te-label-direction
     +--ro incoming-record-route-subobjects
     |  +--ro incoming-record-route-subobject* [index]
     |     +--ro index    -> ../state/index
     |     +--ro state
     |        +--ro index?         uint32
     |        +--ro (type)?
     |           +--:(numbered)
     |           |  +--ro address?       te-types:te-tp-id
     |           |  +--ro ip-flags?      binary
     |           +--:(unnumbered)
     |           |  +--ro node-id?       te-types:te-node-id
     |           |  +--ro link-tp-id?    te-types:te-tp-id
     |           +--:(label)
     |              +--ro value?         rt-types:generalized-label
     |              +--ro label-flags?   binary
     +--ro outgoing-record-route-subobjects
        +--ro outgoing-record-route-subobject* [index]
           +--ro index    -> ../state/index
           +--ro state
              +--ro index?         uint32
              +--ro (type)?
                 +--:(numbered)
                 |  +--ro address?       te-types:te-tp-id
                 |  +--ro ip-flags?      binary
                 +--:(unnumbered)
                 |  +--ro node-id?       te-types:te-node-id
                 |  +--ro link-tp-id?    te-types:te-tp-id
                 +--:(label)
                    +--ro value?         rt-types:generalized-label
                    +--ro label-flags?   binary
   augment /te:te/te-dev:interfaces/te-dev:interface:

                   Figure 2: RSVP-TE model Tree diagram

2.2.2.  YANG Module

   <CODE BEGINS> file "ietf-rsvp-te@2018-02-19.yang"
   module ietf-rsvp-te {

     namespace "urn:ietf:params:xml:ns:yang:ietf-rsvp-te";

     prefix "rsvp-te";




Beeram, et al.           Expires August 23, 2018               [Page 14]

Internet-Draft            RSVP YANG Data Model             February 2018


     import ietf-rsvp {
       prefix rsvp;
     }

     import ietf-routing {
       prefix "rt";
     }

     import ietf-routing-types {
       prefix rt-types;
     }

     import ietf-te {
       prefix te;
     }

     import ietf-te-device {
       prefix te-dev;
     }

     /* Import TE generic types */
     import ietf-te-types {
       prefix te-types;
     }

     organization
       "IETF Traffic Engineering Architecture and Signaling (TEAS)
        Working Group";

     contact
       "WG Web:   <http://tools.ietf.org/wg/teas/>
        WG List:  <mailto:teas@ietf.org>

        WG Chair: Lou Berger
                  <mailto:lberger@labn.net>

        WG Chair: Vishnu Pavan Beeram
                  <mailto:vbeeram@juniper.net>

        Editor:   Vishnu Pavan Beeram
                  <mailto:vbeeram@juniper.net>

        Editor:   Tarek Saad
                  <mailto:tsaad@cisco.com>

        Editor:   Rakesh Gandhi
                  <mailto:rgandhi@cisco.com>




Beeram, et al.           Expires August 23, 2018               [Page 15]

Internet-Draft            RSVP YANG Data Model             February 2018


        Editor:   Himanshu Shah
                  <mailto:hshah@ciena.com>

        Editor:   Xufeng Liu
                  <mailto:xliu@kuatrotech.com>

        Editor:   Xia Chen
                  <mailto:jescia.chenxia@huawei.com>

        Editor:   Raqib Jones
                  <mailto:raqib@Brocade.com>

        Editor:   Bin Wen
                  <mailto:Bin_Wen@cable.comcast.com>";

     description
       "This module contains the RSVP-TE YANG generic data model.";

     revision "2018-02-19" {
       description "Latest revision to RSVP-TE generic YANG module";
       reference "RFC2205, RFC3209, etc.";
     }


     /**
      * RSVP-TE LSPs groupings.
      */

     grouping lsp-record-route-information_state {
       description "recorded route information grouping";
       container incoming-record-route-subobjects {
         description "RSVP recorded route object incoming information";
         list incoming-record-route-subobject {
           when "../../te:origin-type != 'ingress'" {
             description "Applicable on non-ingress LSPs only";
           }
           key "index";
           description
             "List of RSVP Path record-route objects";
           leaf index {
             type leafref {
               path "../state/index";
             }
             description "RRO subobject index";
           }
           container state {
             config false;
             description



Beeram, et al.           Expires August 23, 2018               [Page 16]

Internet-Draft            RSVP YANG Data Model             February 2018


               "State parameters for the record route hop";
             uses te-types:record-route-subobject_state;
           }
         }
       }
       container outgoing-record-route-subobjects {
         description "RSVP recorded route object outgoing information";
         list outgoing-record-route-subobject {
           when "../../te:origin-type != 'egress'" {
             description "Applicable on non-egress LSPs only";
           }
           key "index";
           description
             "List of RSVP Resv record-route objects";
           leaf index {
             type leafref {
               path "../state/index";
             }
             description "RRO subobject index";
           }
           container state {
             config false;
             description
               "State parameters for the record route hop";
             uses te-types:record-route-subobject_state;
           }
         }
       }
     }

     grouping lsp-explicit-route-information_state {
       description "RSVP-TE LSP explicit-route information";
       container explicit-route-objects {
         description "Explicit route object information";
         list incoming-explicit-route-hop {
           when "../../te:origin-type != 'ingress'" {
             description "Applicable on non-ingress LSPs only";
           }
           key "index";
           description
             "List of incoming RSVP Path explicit-route objects";
           leaf index {
             type leafref {
               path "../state/index";
             }
             description "ERO subobject index";
           }
           container state {



Beeram, et al.           Expires August 23, 2018               [Page 17]

Internet-Draft            RSVP YANG Data Model             February 2018


             config false;
             description
               "State parameters for the explicit route hop";
             uses te-types:explicit-route-hop;
           }
         }
         list outgoing-explicit-route-hop {
           when "../../te:origin-type != 'egress'" {
             description "Applicable on non-egress LSPs only";
           }
           key "index";
           description
             "List of outgoing RSVP Path explicit-route objects";
           leaf index {
             type leafref {
               path "../state/index";
             }
             description "ERO subobject index";
           }
           container state {
             config false;
             description
               "State parameters for the explicit route hop";
             uses te-types:explicit-route-hop;
           }
         }
       }
     }

     grouping lsp-attributes-flags_config {
       description
         "Configuration parameters relating to RSVP-TE LSP
         attribute flags";
       leaf lsp-rerouting {
         type enumeration {
           enum end-to-end-routing {
             description
               "End-to-end routing desired";
             reference "RFC4920, RFC5420";
           }
           enum boundary-rerouting {
             description
               "Boundary rerouting desired";
             reference "RFC4920, RFC5420";
           }
           enum segment-based-rerouting {
             description
               "Segment-based rerouting desired";



Beeram, et al.           Expires August 23, 2018               [Page 18]

Internet-Draft            RSVP YANG Data Model             February 2018


             reference "RFC4920, RFC5420";
           }
         }
         description "LSP rerouting types";
       }
       leaf lsp-integrity-required {
         type boolean;
         description "LSP integrity desired";
         reference "RFC4875";
       }
       leaf lsp-contiguous {
         type boolean;
         description "Contiguous LSP";
         reference "RFC5151";
       }
       leaf lsp-stitching-desired {
         type boolean;
         description "Stitched LSP";
         reference "RFC5150";
       }
       leaf lsp-preplanned {
         type boolean;
         description "Preplanned LSP";
         reference "RFC6001";
       }
       leaf lsp-oob-mapping {
         type boolean;
         description
           "Mapping is done out-of-band";
         reference "RFC6511";
       }
     }

     grouping lsp-session-attributes-obj-flags_config {
       description
         "Configuration parameters relating to RSVP-TE LSP
         session attribute flags";
       reference
         "RFC4859: Registry for RSVP-TE Session Flags";
       leaf local-recording-desired {
         type boolean;
         description "Path recording is desired.";
         reference "RFC3209";
       }
       leaf se-style-desired {
         type boolean;
         description "SE Style desired";
         reference "RFC3209";



Beeram, et al.           Expires August 23, 2018               [Page 19]

Internet-Draft            RSVP YANG Data Model             February 2018


       }
       leaf path-reevaluation-request {
         type boolean;
         description "Path re-evaluation request";
         reference "RFC4736";
       }
       leaf soft-preemption-desired {
         type boolean;
         description "Soft-preemption is desired";
         reference "RFC5712";
       }
     }

     grouping lsp-properties_config {
       description
         "Configuration parameters relating to RSVP-TE LSP
         session attribute flags";
       leaf lsp-signaled-name {
         type string;
         description
           "Sets the session name to use in the session
           attribute object.";
       }
       uses lsp-session-attributes-obj-flags_config;
       uses lsp-attributes-flags_config;
     }

     grouping tunnel-properties_config {
       description "RSVP-TE Tunnel properties grouping";
       leaf retry-timer {
         type uint16 {
           range 1..600;
         }
         units seconds;
         description
           "sets the time between attempts to establish the
            LSP";
       }
     }

     /*** End of RSVP-TE LSP groupings ***/

     /**
      * RSVP-TE generic global properties.
      */

     grouping global-soft-preemption_config {
       description



Beeram, et al.           Expires August 23, 2018               [Page 20]

Internet-Draft            RSVP YANG Data Model             February 2018


         "Configuration for global RSVP-TE soft preemption";
       leaf soft-preemption-timeout {
         type uint16 {
           range 0..300;
         }
         default 0;
         description
           "Timeout value for soft preemption to revert
           to hard preemption";
       }
     }

     grouping global-soft-preemption {
       description
         "Top level group for RSVP-TE soft-preemption";
       container global-soft-preemption {
         presence "Enables soft preemption on a node.";
         description
           "Top level container for RSVP-TE soft-preemption";
         uses global-soft-preemption_config;
       }
     }
     /*** End of RSVP-TE generic global properties. ***/

     /**
      * RSVP-TE interface generic groupings.
      */

     grouping rsvp-te-interface-attributes {
       description
         "Top level grouping for RSVP-TE interface properties.";
       container rsvp-te-interface-attributes {
         description
           "Top level container for RSVP-TE interface
           properties";
         container state {
           config false;
           description
             "State information associated with RSVP-TE
             bandwidth";
         }
       }
     }
     /*** End of RSVP-TE generic groupings ***/


     /* RSVP-TE global properties */
     augment "/rt:routing/rt:control-plane-protocols/"



Beeram, et al.           Expires August 23, 2018               [Page 21]

Internet-Draft            RSVP YANG Data Model             February 2018


     + "rt:control-plane-protocol/rsvp:rsvp/rsvp:globals" {
       description
         "RSVP-TE augmentation to RSVP globals";
         uses global-soft-preemption;
     }

     /* Linkage to the base RSVP all links */
     augment "/rt:routing/rt:control-plane-protocols/"
     + "rt:control-plane-protocol/rsvp:rsvp/rsvp:interfaces" {
       description
         "RSVP-TE generic data augmentation pertaining to interfaces";
       uses rsvp-te-interface-attributes;
     }

     /* Linkage to per RSVP interface */
     augment "/rt:routing/rt:control-plane-protocols/"
       + "rt:control-plane-protocol/rsvp:rsvp/rsvp:interfaces/" +
       "rsvp:interface" {
       description
         "RSVP-TE generic data augmentation pertaining to specific
          interface";
       uses rsvp-te-interface-attributes;
     }

     /* add augmentation for sessions and neighbors */
     augment "/rt:routing/rt:control-plane-protocols/"
     + "rt:control-plane-protocol/rsvp:rsvp/rsvp:globals/"
     + "rsvp:sessions/rsvp:session/rsvp:state/rsvp:psbs/rsvp:psb" {
       description
         "RSVP-TE generic data augmentation pertaining to session";
       /* To be added */
       leaf tspec-average-rate {
         type rt-types:bandwidth-ieee-float32;
         units "Bytes per second";
         description "Tspec Token Bucket Average Rate";
         reference "RFC2210: RSVP with INTSERV";
       }
       leaf tspec-size {
         type rt-types:bandwidth-ieee-float32;
         units "Bytes per second";
         description "Tspec Token Bucket Burst Rate";
         reference "RFC2210";
       }
       leaf tspec-peak-rate {
         type rt-types:bandwidth-ieee-float32;
         units "Bytes per second";
         description "Tspec Token Bucket Peak Data Rate";
         reference "RFC2210";



Beeram, et al.           Expires August 23, 2018               [Page 22]

Internet-Draft            RSVP YANG Data Model             February 2018


       }
       leaf min-policed-unit {
         type uint32;
         description "Tspec Minimum Policed Unit";
         reference "RFC2210";
       }
       leaf max-packet-size {
         type uint32;
         description "Tspec Maximum Packet Size";
         reference "RFC2210";
       }
     }
     augment "/rt:routing/rt:control-plane-protocols/"
     + "rt:control-plane-protocol/rsvp:rsvp/rsvp:globals/"
     + "rsvp:sessions/rsvp:session/rsvp:state/rsvp:rsbs/rsvp:rsb" {
       description
         "RSVP-TE generic data augmentation pertaining to session";
       leaf fspec-average-rate {
         type rt-types:bandwidth-ieee-float32;
         units "Bytes per second";
         description "Fspec Token Bucket Average Rate";
         reference "RFC2210";
       }
       leaf fspec-size {
         type rt-types:bandwidth-ieee-float32;
         units "Bytes per second";
         description "Fspec Token Bucket Burst Rate";
         reference "RFC2210";
       }
       leaf fspec-peak-rate {
         type rt-types:bandwidth-ieee-float32;
         units "Bytes per second";
         description "Fspec Token Bucket Peak Data Rate";
         reference "RFC2210";
       }
       leaf min-policed-unit {
         type uint32;
         description "Fspec Minimum Policed Unit";
         reference "RFC2210";
       }
       leaf max-packet-size {
         type uint32;
         description "Fspec Maximum Packet Size";
         reference "RFC2210";
       }
     }

     augment "/rt:routing/rt:control-plane-protocols/"



Beeram, et al.           Expires August 23, 2018               [Page 23]

Internet-Draft            RSVP YANG Data Model             February 2018


     + "rt:control-plane-protocol/rsvp:rsvp/rsvp:neighbors" {
       description
         "RSVP-TE generic data augmentation pertaining to neighbors";
       /* To be added */
     }

     /**
      * RSVP-TE generic augmentations of generic TE model.
      */

     /* TE tunnel augmentation */
     augment "/te:te/te:tunnels/te:tunnel" {
       when "/te:te/te:tunnels/te:tunnel" +
         "/te:p2p-primary-paths/te:p2p-primary-path" +
         "/te:path-setup-protocol = 'te-types:path-setup-rsvp'" {
         description
         "When the path signaling protocol is RSVP-TE ";
       }
       description
         "RSVP-TE generic data augmentation pertaining to TE tunnels";
       uses lsp-properties_config;
       uses tunnel-properties_config;
     }

     augment "/te:te/te:tunnels/te:tunnel/te:state" {
       when "/te:te/te:tunnels/te:tunnel" +
         "/te:p2p-primary-paths/te:p2p-primary-path" +
         "/te:path-setup-protocol = 'te-types:path-setup-rsvp'" {
         description
         "When the path signaling protocol is RSVP-TE ";
       }
       description
         "RSVP-TE generic data augmentation pertaining to TE tunnels";
       uses lsp-properties_config;
       uses tunnel-properties_config;
     }

     /* TE LSP augmentation */
     grouping rsvp-te-lsp-properties {
       description "RSVP-TE LSP properties grouping";
       leaf associated-rsvp-session {
         type leafref {
           path "/rt:routing/rt:control-plane-protocols/"
              + "rt:control-plane-protocol/rsvp:rsvp/rsvp:globals/"
              + "rsvp:sessions/rsvp:session/rsvp:local-index";
         }
         description
           "If the signalling protocol specified for this path is



Beeram, et al.           Expires August 23, 2018               [Page 24]

Internet-Draft            RSVP YANG Data Model             February 2018


           RSVP-TE, this leaf provides a reference to the associated
           session within the RSVP-TE protocol sessions list, such
           that details of the signaling can be retrieved.";
       }

       uses lsp-properties_config;
       uses lsp-explicit-route-information_state;
       uses lsp-record-route-information_state;
     }

     augment "/te:te/te:lsps-state/te:lsp" {
       when "/te:te/te:lsps-state/te:lsp" +
         "/te:path-setup-protocol = 'te-types:path-setup-rsvp'" {
         description
         "When the signaling protocol is RSVP-TE ";
       }
       description
         "RSVP-TE generic data augmentation pertaining to specific TE
          LSP";
       uses rsvp-te-lsp-properties;
     }

     augment "/te:te/te:tunnels/te:tunnel/te:p2p-primary-paths" +
             "/te:p2p-primary-path/te:state/te:lsps/te:lsp" {
       when "/te:te/te:tunnels/te:tunnel/te:p2p-primary-paths" +
             "/te:p2p-primary-path/te:state/te:lsps/te:lsp" +
             "/te:path-setup-protocol = 'te-types:path-setup-rsvp'" {
           description
           "When the signaling protocol is RSVP-TE ";
       }
       description
         "RSVP-TE generic data augmentation pertaining to specific TE
          LSP";
       uses rsvp-te-lsp-properties;
     }

     augment "/te:te/te:tunnels/te:tunnel/te:p2p-secondary-paths" +
       "/te:p2p-secondary-path/te:state/te:lsps/te:lsp" {
       when "/te:te/te:tunnels/te:tunnel/te:p2p-primary-paths" +
             "/te:p2p-primary-path/te:state/te:lsps/te:lsp" +
             "/te:path-setup-protocol = 'te-types:path-setup-rsvp'" {
           description
           "When the signaling protocol is RSVP-TE ";
       }
       description
         "RSVP-TE generic data augmentation pertaining to specific TE
          LSP";
       uses rsvp-te-lsp-properties;



Beeram, et al.           Expires August 23, 2018               [Page 25]

Internet-Draft            RSVP YANG Data Model             February 2018


     }

     /* TE interface augmentation */
     augment "/te:te/te-dev:interfaces/te-dev:interface" {
       description
         "RSVP-TE generic data augmentation pertaining to specific TE
          interface";
     }
   }
   <CODE ENDS>

                   Figure 3: RSVP TE generic YANG module

2.3.  RSVP-TE MPLS Model

   The MPLS RSVP-TE YANG module augments the RSVP-TE generic module with
   parameters to configure and manage signaling of MPLS RSVP-TE LSPs.
   RSVP-TE YANG modules for other dataplane technologies (e.g.  OTN or
   WDM) are outside the scope of this document and are defined in other
   documents.

2.3.1.  Tree Diagram

   The following are possible types of configuration and state data
   nodes in this module:

   o  those augmenting or extending the generic RSVP-TE module

   o  those augmenting or extending the TE module

   o  those that are specific to the RSVP-TE MPLS module

   Below is a YANG tree representation for data items defined in the
   RSVP-TE MPLS module:

   module: ietf-rsvp-te-mpls
     augment /rt:routing/rt:control-plane-protocols/
     rt:control-plane-protocol/rsvp:rsvp:
       +--rw fast-reroute-local-revertive
          +--rw rsvp-frr-local-revert-delay?   uint32
     augment /rt:routing/rt:control-plane-protocols/
     rt:control-plane-protocol/rsvp:rsvp/rsvp:interfaces:
     augment /rt:routing/rt:control-plane-protocols/
     rt:control-plane-protocol/rsvp:rsvp/rsvp:interfaces/rsvp:interface:
     augment /rt:routing/rt:control-plane-protocols/
     rt:control-plane-protocol/rsvp:rsvp/rsvp:globals/
     rsvp:sessions/rsvp:session/rsvp:state:
     augment /rt:routing/rt:control-plane-protocols/



Beeram, et al.           Expires August 23, 2018               [Page 26]

Internet-Draft            RSVP YANG Data Model             February 2018


     rt:control-plane-protocol/rsvp:rsvp/rsvp:neighbors:
     augment /te:te/te:tunnels/te:tunnel:
       +--rw local-protection-desired?       empty
       +--rw bandwidth-protection-desired?   empty
       +--rw node-protection-desired?        empty
       +--rw non-php-desired?                empty
       +--rw entropy-label-cap?              empty
       +--rw oam-mep-entities-desired?       empty
       +--rw oam-mip-entities-desired?       empty
     augment /te:te/te:lsps-state/te:lsp:
       +--ro state
       |  +--ro local-protection-desired?       empty
       |  +--ro bandwidth-protection-desired?   empty
       |  +--ro node-protection-desired?        empty
       |  +--ro non-php-desired?                empty
       |  +--ro entropy-label-cap?              empty
       |  +--ro oam-mep-entities-desired?       empty
       |  +--ro oam-mip-entities-desired?       empty
       +--ro backup-info
          +--ro state
             +--ro backup-tunnel-name?         string
             +--ro backup-frr-on?              uint8
             +--ro backup-protected-lsp-num?   uint32
     augment /te:te/te:tunnels/te:tunnel/te:p2p-primary-paths/
     te:p2p-primary-path/te:state/te:lsps/te:lsp:
       +--ro state
       |  +--ro local-protection-desired?       empty
       |  +--ro bandwidth-protection-desired?   empty
       |  +--ro node-protection-desired?        empty
       |  +--ro non-php-desired?                empty
       |  +--ro entropy-label-cap?              empty
       |  +--ro oam-mep-entities-desired?       empty
       |  +--ro oam-mip-entities-desired?       empty
       +--ro backup-info
          +--ro state
             +--ro backup-tunnel-name?         string
             +--ro backup-frr-on?              uint8
             +--ro backup-protected-lsp-num?   uint32
     augment /te:te/te:tunnels/te:tunnel/te:p2p-secondary-paths/
     te:p2p-secondary-path/te:state/te:lsps/te:lsp:
       +--ro state
       |  +--ro local-protection-desired?       empty
       |  +--ro bandwidth-protection-desired?   empty
       |  +--ro node-protection-desired?        empty
       |  +--ro non-php-desired?                empty
       |  +--ro entropy-label-cap?              empty
       |  +--ro oam-mep-entities-desired?       empty
       |  +--ro oam-mip-entities-desired?       empty



Beeram, et al.           Expires August 23, 2018               [Page 27]

Internet-Draft            RSVP YANG Data Model             February 2018


       +--ro backup-info
          +--ro state
             +--ro backup-tunnel-name?         string
             +--ro backup-frr-on?              uint8
             +--ro backup-protected-lsp-num?   uint32
     augment /te:te/te-dev:interfaces/te-dev:interface:
       +--rw bandwidth-mpls-reservable
          +--rw (bandwidth-value)?
          |  +--:(absolute)
          |  |  +--rw absolute-value?   uint32
          |  +--:(percentage)
          |     +--rw percent-value?    uint32
          +--rw (bc-model-type)?
             +--:(bc-model-rdm)
             |  +--rw bc-model-rdm
             |     +--rw bandwidth-mpls-constraints
             |        +--rw maximum-reservable?   uint32
             |        +--rw bc-value*             uint32
             +--:(bc-model-mam)
             |  +--rw bc-model-mam
             |     +--rw bandwidth-mpls-constraints
             |        +--rw maximum-reservable?   uint32
             |        +--rw bc-value*             uint32
             +--:(bc-model-mar)
                +--rw bc-model-mar
                   +--rw bandwidth-mpls-constraints
                      +--rw maximum-reservable?   uint32
                      +--rw bc-value*             uint32
     augment /te:te/te-dev:interfaces/te-dev:interface:
       +--rw rsvp-te-frr-backups
          +--rw (type)?
             +--:(static-tunnel)
             |  +--rw static-backups
             |     +--rw static-backup* [backup-tunnel-name]
             |        +--rw backup-tunnel-name ->
             /te:te/tunnels/tunnel/name
             +--:(auto-tunnel)
                +--rw auto-tunnel-backups
                   +--rw auto-backup-protection?         identityref
                   +--rw auto-backup-path-computation?   identityref

                    Figure 4: RSVP-TE MPLS Tree diagram

2.3.2.  YANG Module

   <CODE BEGINS> file "ietf-rsvp-te-mpls@2018-02-19.yang"
   module ietf-rsvp-te-mpls {




Beeram, et al.           Expires August 23, 2018               [Page 28]

Internet-Draft            RSVP YANG Data Model             February 2018


     namespace "urn:ietf:params:xml:ns:yang:ietf-rsvp-te-mpls";

     prefix "rsvp-te-mpls";

     import ietf-rsvp {
       prefix "rsvp";
     }

     import ietf-routing {
       prefix "rt";
     }

     import ietf-te-mpls-types {
       prefix "te-mpls-types";
     }

     import ietf-te-types {
       prefix "te-types";
     }

     import ietf-te {
       prefix "te";
     }

     import ietf-te-device {
       prefix "te-dev";
     }

     organization
       "IETF Traffic Engineering Architecture and Signaling (TEAS)
        Working Group";

     contact
       "WG Web:   <http://tools.ietf.org/wg/teas/>
        WG List:  <mailto:teas@ietf.org>

        WG Chair: Lou Berger
                  <mailto:lberger@labn.net>

        WG Chair: Vishnu Pavan Beeram
                  <mailto:vbeeram@juniper.net>

        Editor:   Vishnu Pavan Beeram
                  <mailto:vbeeram@juniper.net>

        Editor:   Tarek Saad
                  <mailto:tsaad@cisco.com>




Beeram, et al.           Expires August 23, 2018               [Page 29]

Internet-Draft            RSVP YANG Data Model             February 2018


        Editor:   Rakesh Gandhi
                  <mailto:rgandhi@cisco.com>

        Editor:   Himanshu Shah
                  <mailto:hshah@ciena.com>

        Editor:   Xufeng Liu
                  <mailto:xliu@kuatrotech.com>

        Editor:   Xia Chen
                  <mailto:jescia.chenxia@huawei.com>

        Editor:   Raqib Jones
                  <mailto:raqib@Brocade.com>

        Editor:   Bin Wen
                  <mailto:Bin_Wen@cable.comcast.com>";

     description
       "Latest update to MPLS RSVP-TE YANG data model.";

     revision "2018-02-19" {
       description "Update to MPLS RSVP-TE YANG initial revision.";
       reference "RFC3209, RFC6511, RFC6790, RFC7260, RFC4859, RFC4090";
     }

     /* RSVP-TE MPLS LSPs groupings */
     grouping lsp-attributes-flags-mpls_config {
       description
         "Configuration parameters relating to RSVP-TE MPLS LSP
         attribute flags";
       leaf non-php-desired {
         type empty;
         description
           "Non-PHP is desired";
         reference "RFC6511";
       }
       leaf entropy-label-cap {
         type empty;
         description "Entropy label capability";
         reference "RFC6790";
       }
       leaf oam-mep-entities-desired {
         type empty;
         description "OAM MEP entities desired";
         reference "RFC7260";
       }
       leaf oam-mip-entities-desired {



Beeram, et al.           Expires August 23, 2018               [Page 30]

Internet-Draft            RSVP YANG Data Model             February 2018


         type empty;
         description "OAM MIP entities desired";
         reference "RFC7260";
       }
     }

     grouping lsp-session-attributes-obj-flags-mpls_config {
       description
         "Configuration parameters relating to RSVP-TE MPLS LSP
          session attribute flags";
       reference
         "RFC4859: Registry for RSVP-TE Session Flags";
       leaf local-protection-desired {
         type empty;
         description "Fastreroute local protection is desired.";
         reference
           "RFC4859: Registry for RSVP-TE Session Flags";
       }
       leaf bandwidth-protection-desired {
         type empty;
         description
           "Request FRR bandwidth protection on LSRs if
           present.";
         reference "RFC4090";
       }
       leaf node-protection-desired {
         type empty;
         description
           "Request FRR node protection on LSRs if
           present.";
         reference "RFC4090";
       }
     }

     grouping tunnel-properties-mpls_config {
       description
         "Top level grouping for LSP properties.";
       uses lsp-session-attributes-obj-flags-mpls_config;
       uses lsp-attributes-flags-mpls_config;
     }

     grouping lsp-properties-mpls {
       description
         "Top level grouping for LSP properties.";
       container state {
         config false;
         description
           "Configuration applied parameters and state";



Beeram, et al.           Expires August 23, 2018               [Page 31]

Internet-Draft            RSVP YANG Data Model             February 2018


         uses lsp-session-attributes-obj-flags-mpls_config;
         uses lsp-attributes-flags-mpls_config;
       }
     }
     /* End of RSVP-TE MPLS LSPs groupings */

     /* MPLS RSVP-TE interface groupings */
     grouping rsvp-te-interface_state {
       description
         "The RSVP-TE interface state grouping";
       leaf over-subscribed-bandwidth {
         type uint32;
         description
           "The amount of over-subscribed bandwidth on
           the interface";
       }
     }

     grouping rsvp-te-interface-softpreemption_state {
       description
         "The RSVP-TE interface preeemptions state grouping";
       container interface-softpreemption-state {
         description
           "The RSVP-TE interface preeemptions state grouping";
         leaf soft-preempted-bandwidth {
           type uint32;
           description
             "The amount of soft-preempted bandwidth on
             this interface";
         }
         list lsps {
           key
             "source destination tunnel-id lsp-id "+
             "extended-tunnel-id";
           description
             "List of LSPs that are soft-preempted";
           leaf source {
             type leafref {
               path "/te:te/te:lsps-state/te:lsp/"+
                    "te:source";
             }
             description
               "Tunnel sender address extracted from
               SENDER_TEMPLATE  object";
             reference "RFC3209";
           }
           leaf destination {
             type leafref {



Beeram, et al.           Expires August 23, 2018               [Page 32]

Internet-Draft            RSVP YANG Data Model             February 2018


               path "/te:te/te:lsps-state/te:lsp/"+
                    "te:destination";
             }
             description
               "Tunnel endpoint address extracted from
               SESSION object";
             reference "RFC3209";
           }
           leaf tunnel-id {
             type leafref {
               path "/te:te/te:lsps-state/te:lsp/"+
                 "te:tunnel-id";
             }
             description
               "Tunnel identifier used in the SESSION
               that remains constant over the life
               of the tunnel.";
             reference "RFC3209";
           }
           leaf lsp-id {
             type leafref {
               path "/te:te/te:lsps-state/te:lsp/"+
                    "te:lsp-id";
             }
             description
               "Identifier used in the SENDER_TEMPLATE
               and the FILTER_SPEC that can be changed
               to allow a sender to share resources with
               itself.";
             reference "RFC3209";
           }
           leaf extended-tunnel-id {
             type leafref {
               path "/te:te/te:lsps-state/te:lsp/"+
                 "te:extended-tunnel-id";
             }
             description
               "Extended Tunnel ID of the LSP.";
             reference "RFC3209";
           }
           leaf type {
             type leafref {
               path "/te:te/te:lsps-state/te:lsp/"+
                 "te:type";
             }
             description "LSP type P2P or P2MP";
           }
         }



Beeram, et al.           Expires August 23, 2018               [Page 33]

Internet-Draft            RSVP YANG Data Model             February 2018


       }
     }

     grouping bandwidth-mpls-constraints {
       description "Bandwidth constraints.";
       container bandwidth-mpls-constraints {
         description
           "Holds the bandwidth constraints properties";
         leaf maximum-reservable {
           type uint32 {
             range "0..4294967295";
           }
           description
             "The maximum reservable bandwidth on the
             interface";
         }
         leaf-list bc-value {
           type uint32 {
             range "0..4294967295";
           }
           max-elements 8;
           description
             "The bandwidth constraint type";
         }
       }
     }

     grouping bandwidth-constraint-values {
       description
         "Packet bandwidth contraints values";
       choice value-type {
         description
           "Value representation";
         case percentages {
           container perc-values {
             uses bandwidth-mpls-constraints;
             description
               "Percentage values";
           }
         }
         case absolutes {
           container abs-values {
             uses bandwidth-mpls-constraints;
             description
               "Absolute values";
           }
         }
       }



Beeram, et al.           Expires August 23, 2018               [Page 34]

Internet-Draft            RSVP YANG Data Model             February 2018


     }

     grouping bandwidth-mpls-reservable_config {
       description
         "Interface bandwidth reservable configuration grouping";
       choice bandwidth-value {
         description "Reservable bandwidth configuration choice";
         case absolute {
           leaf absolute-value {
             type uint32;
             description "Absolute value of the bandwidth";
           }
         }
         case percentage {
           leaf percent-value {
             type uint32 {
               range "0..4294967295";
             }
             description "Percentage reservable bandwidth";
           }
           description
             "The maximum reservable bandwidth on the
             interface";
         }
       }
       choice bc-model-type {
         description
           "Reservable bandwidth percentage capacity
           values.";
         case bc-model-rdm {
           container bc-model-rdm {
             description
               "Russian Doll Model Bandwidth Constraints.";
             uses bandwidth-mpls-constraints;
           }
         }
         case bc-model-mam {
           container bc-model-mam {
             uses bandwidth-mpls-constraints;
             description
               "Maximum Allocation Model Bandwidth
               Constraints.";
           }
         }
         case bc-model-mar {
           container bc-model-mar {
             uses bandwidth-mpls-constraints;
             description



Beeram, et al.           Expires August 23, 2018               [Page 35]

Internet-Draft            RSVP YANG Data Model             February 2018


               "Maximum Allocation with Reservation Model
               Bandwidth Constraints.";
           }
         }
       }
     }

     grouping bandwidth-mpls-reservable {
       description
         "Packet reservable bandwidth";
       container bandwidth-mpls-reservable {
         description
           "Interface bandwidth reservable container";
         uses bandwidth-mpls-reservable_config;
       }
     }
     /* End of RSVP-TE interface groupings */

     /* RSVP-TE FRR groupings */
     grouping rsvp-te-frr-auto-tunnel-backup_config {
       description
         "Auto-tunnel backup configuration grouping";
       leaf auto-backup-protection {
         type identityref {
           base te-mpls-types:backup-protection-type;
         }
         default
           te-mpls-types:backup-protection-node-link;
         description
           "Describes whether the backup should offer
           protection against link, node, or either";
       }
       leaf auto-backup-path-computation {
         type identityref {
           base
             te-types:path-computation-srlg-type;
         }
         description
           "FRR backup computation type";
       }
     }

     grouping rsvp-te-frr-backups_config {
       description
         "Top level container for RSVP-TE FRR backup parameters";
       choice type {
         description
           "FRR backup tunnel type";



Beeram, et al.           Expires August 23, 2018               [Page 36]

Internet-Draft            RSVP YANG Data Model             February 2018


         case static-tunnel {
           container static-backups {
             description "List of static backups";
             list static-backup {
               key "backup-tunnel-name";
               description
                 "List of static backup tunnels that
                 protect the RSVP-TE interface.";
               leaf backup-tunnel-name {
                 type leafref {
                   path "/te:te/te:tunnels/te:tunnel/te:name";
                 }
                 description "FRR Backup tunnel name";
               }
             }
           }
         }
         case auto-tunnel {
           container auto-tunnel-backups {
             description "Auto-tunnel choice";
             uses rsvp-te-frr-auto-tunnel-backup_config;
           }
         }
       }
     }

     grouping rsvp-te-frr-backups {
         description
           "RSVP-TE facility backup grouping";
       container rsvp-te-frr-backups {
         description
           "RSVP-TE facility backup properties";
         uses rsvp-te-frr-backups_config;
       }
     }

     grouping lsp-backup-info_state {
       description "LSP backup information grouping";
       leaf backup-tunnel-name {
         type string;
         description
           "If an LSP has an FRR backup LSP that can protect it,
           this field identifies the tunnel name of the backup LSP.
           Otherwise, this field is empty.";
       }
       leaf backup-frr-on {
         type uint8;
         description



Beeram, et al.           Expires August 23, 2018               [Page 37]

Internet-Draft            RSVP YANG Data Model             February 2018


           "Whether currently this backup is carrying traffic";
       }
       leaf backup-protected-lsp-num {
         type uint32;
         description
           "Number of LSPs protected by this backup";
       }
     }

     grouping lsp-backup-info {
       description "Backup/bypass LSP related information";
       container backup-info {
         description
           "backup information";
         container state {
           config false;
           description
             "Configuration applied parameters and state";
           uses lsp-backup-info_state;
         }
       }
     }

     grouping fast-reroute-local-revertive_config {
       description "RSVP-TE FRR local revertive grouping";
       leaf rsvp-frr-local-revert-delay {
         type uint32;
         description
           "Time to wait after primary link is restored
           before node attempts local revertive
           procedures.";
       }
     }

     /*** End of RSVP-TE FRR backup information ***/

     grouping fast-reroute-local-revertive {
       description
         "Top level grouping for globals properties";
       container fast-reroute-local-revertive {
         description "RSVP-TE FRR local revertive container";
         uses fast-reroute-local-revertive_config;
       }
     }

     /* RSVP-TE global properties */
     augment "/rt:routing/rt:control-plane-protocols/"
     + "rt:control-plane-protocol/rsvp:rsvp" {



Beeram, et al.           Expires August 23, 2018               [Page 38]

Internet-Draft            RSVP YANG Data Model             February 2018


       description
         "RSVP-TE augmentation to RSVP globals";
       uses fast-reroute-local-revertive;
     }

     /* Linkage to the base RSVP all interfaces */
     augment "/rt:routing/rt:control-plane-protocols/"
     + "rt:control-plane-protocol/rsvp:rsvp/rsvp:interfaces" {
       description
         "Augmentations for RSVP-TE MPLS all interfaces properties";
       /* To be added */
     }

     /* Linkage to per RSVP interface */
     augment "/rt:routing/rt:control-plane-protocols/"
     + "rt:control-plane-protocol/rsvp:rsvp/rsvp:interfaces/" +
     "rsvp:interface" {
       description
         "Augmentations for RSVP-TE MPLS per interface properties";
       /* To be added */
     }

     /* add augmentation for sessions neighbors */
     augment "/rt:routing/rt:control-plane-protocols/"
     + "rt:control-plane-protocol/rsvp:rsvp/rsvp:globals/"
     + "rsvp:sessions/rsvp:session/rsvp:state" {
       description
         "Augmentations for RSVP-TE MPLS sessions";
       /* To be added */
     }

     augment "/rt:routing/rt:control-plane-protocols/"
     + "rt:control-plane-protocol/rsvp:rsvp/rsvp:neighbors" {
       description
         "Augmentations for RSVP-TE MPLS neighbors properties";
       /* To be added */
     }

     /**
      * Augmentation to TE generic module
      */
     augment "/te:te/te:tunnels/te:tunnel" {
       description
         "Augmentations for RSVP-TE MPLS TE tunnel properties";
       uses tunnel-properties-mpls_config;
     }

     augment "/te:te/te:lsps-state/te:lsp" {



Beeram, et al.           Expires August 23, 2018               [Page 39]

Internet-Draft            RSVP YANG Data Model             February 2018


       when "/te:te/te:lsps-state/te:lsp" +
       "/te:path-setup-protocol = 'te-types:path-setup-rsvp'" {
         description
         "When the signaling protocol is RSVP-TE ";
       }
       description
         "RSVP-TE MPLS LSP state properties";
       uses lsp-properties-mpls;
       uses lsp-backup-info;
     }

     augment "/te:te/te:tunnels/te:tunnel/te:p2p-primary-paths" +
       "/te:p2p-primary-path/te:state/te:lsps/te:lsp" {
       when "/te:te/te:tunnels/te:tunnel" +
         "/te:p2p-secondary-paths/te:p2p-secondary-path/" +
         "te:path-setup-protocol = 'te-types:path-setup-rsvp'" {
         description
         "When the signaling protocol is RSVP-TE ";
       }
       description
         "RSVP-TE MPLS LSP state properties";
       uses lsp-properties-mpls;
       uses lsp-backup-info;
     }

     augment "/te:te/te:tunnels/te:tunnel/te:p2p-secondary-paths" +
       "/te:p2p-secondary-path/te:state/te:lsps/te:lsp" {
       when "/te:te/te:tunnels/te:tunnel" +
         "/te:p2p-secondary-paths/te:p2p-secondary-path/" +
         "te:path-setup-protocol = 'te-types:path-setup-rsvp'" {
         description
         "When the signaling protocol is RSVP-TE ";
       }
       description
         "RSVP-TE MPLS LSP state properties";
       uses lsp-properties-mpls;
       uses lsp-backup-info;
     }

     augment "/te:te/te-dev:interfaces/te-dev:interface" {
       description
         "RSVP reservable bandwidth configuration properties";
       uses bandwidth-mpls-reservable;
     }

     augment "/te:te/te-dev:interfaces/te-dev:interface" {
       description
         "RSVP reservable bandwidth configuration properties";



Beeram, et al.           Expires August 23, 2018               [Page 40]

Internet-Draft            RSVP YANG Data Model             February 2018


       uses rsvp-te-frr-backups;
     }
   }
   <CODE ENDS>

                    Figure 5: RSVP TE MPLS YANG module

   Figure 5 shows the YANG tree representation of the RSVP TE MPLS
   module that augments RSVP-TE module as well as RSVP and TE YANG
   modules.

3.  IANA Considerations

   This document registers the following URIs in the IETF XML registry
   [RFC3688].  Following the format in [RFC3688], the following
   registration is requested to be made.

   URI: urn:ietf:params:xml:ns:yang:ietf-rsvp-te XML: N/A, the requested
   URI is an XML namespace.

   URI: urn:ietf:params:xml:ns:yang:ietf-rsvp-te-mpls XML: N/A, the
   requested URI is an XML namespace.

   This document registers a YANG module in the YANG Module Names
   registry [RFC6020].

   name: ietf-rsvp namespace: urn:ietf:params:xml:ns:yang:ietf-rsvp-te
   prefix: ietf-rsvp reference: RFC3209

   name: ietf-rsvp-te namespace: urn:ietf:params:xml:ns:yang:ietf-rsvp-
   te-mpls prefix: ietf-rsvp-te reference: RFC3209

4.  Security Considerations

   The YANG module defined in this memo is designed to be accessed via
   the NETCONF protocol [RFC6241].  The lowest NETCONF layer is the
   secure transport layer and the mandatory-to-implement secure
   transport is SSH [RFC6242].  The NETCONF access control model
   [RFC6536] provides means to restrict access for particular NETCONF

   users to a pre-configured subset of all available NETCONF protocol
   operations and content.

   There are a number of data nodes defined in the YANG module which are
   writable/creatable/deletable (i.e., config true, which is the
   default).  These data nodes may be considered sensitive or vulnerable
   in some network environments.  Write operations (e.g., <edit-config>)




Beeram, et al.           Expires August 23, 2018               [Page 41]

Internet-Draft            RSVP YANG Data Model             February 2018


   to these data nodes without proper protection can have a negative
   effect on network operations.

5.  Acknowledgement

   The authors would like to thank Lou Berger for reviewing and
   providing valuable feedback on this document.

6.  Contributors

      Xia Chen
      Huawei Technologies

      Email: jescia.chenxia@huawei.com


      Raqib Jones
      Brocade

      Email: raqib@Brocade.com


      Bin Wen
      Comcast

      Email: Bin_Wen@cable.comcast.com


7.  Normative References

   [I-D.ietf-teas-yang-rsvp]
              Beeram, V., Saad, T., Gandhi, R., Liu, X., Bryskin, I.,
              and H. Shah, "A YANG Data Model for Resource Reservation
              Protocol (RSVP)", draft-ietf-teas-yang-rsvp-08 (work in
              progress), October 2017.

   [I-D.ietf-teas-yang-te]
              Saad, T., Gandhi, R., Liu, X., Beeram, V., Shah, H., and
              I. Bryskin, "A YANG Data Model for Traffic Engineering
              Tunnels and Interfaces", draft-ietf-teas-yang-te-11 (work
              in progress), February 2018.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.





Beeram, et al.           Expires August 23, 2018               [Page 42]

Internet-Draft            RSVP YANG Data Model             February 2018


   [RFC2205]  Braden, R., Ed., Zhang, L., Berson, S., Herzog, S., and S.
              Jamin, "Resource ReSerVation Protocol (RSVP) -- Version 1
              Functional Specification", RFC 2205, DOI 10.17487/RFC2205,
              September 1997, <https://www.rfc-editor.org/info/rfc2205>.

   [RFC3209]  Awduche, D., Berger, L., Gan, D., Li, T., Srinivasan, V.,
              and G. Swallow, "RSVP-TE: Extensions to RSVP for LSP
              Tunnels", RFC 3209, DOI 10.17487/RFC3209, December 2001,
              <https://www.rfc-editor.org/info/rfc3209>.

   [RFC3688]  Mealling, M., "The IETF XML Registry", BCP 81, RFC 3688,
              DOI 10.17487/RFC3688, January 2004,
              <https://www.rfc-editor.org/info/rfc3688>.

   [RFC6020]  Bjorklund, M., Ed., "YANG - A Data Modeling Language for
              the Network Configuration Protocol (NETCONF)", RFC 6020,
              DOI 10.17487/RFC6020, October 2010,
              <https://www.rfc-editor.org/info/rfc6020>.

   [RFC6241]  Enns, R., Ed., Bjorklund, M., Ed., Schoenwaelder, J., Ed.,
              and A. Bierman, Ed., "Network Configuration Protocol
              (NETCONF)", RFC 6241, DOI 10.17487/RFC6241, June 2011,
              <https://www.rfc-editor.org/info/rfc6241>.

   [RFC6242]  Wasserman, M., "Using the NETCONF Protocol over Secure
              Shell (SSH)", RFC 6242, DOI 10.17487/RFC6242, June 2011,
              <https://www.rfc-editor.org/info/rfc6242>.

   [RFC6536]  Bierman, A. and M. Bjorklund, "Network Configuration
              Protocol (NETCONF) Access Control Model", RFC 6536,
              DOI 10.17487/RFC6536, March 2012,
              <https://www.rfc-editor.org/info/rfc6536>.

   [RFC6991]  Schoenwaelder, J., Ed., "Common YANG Data Types",
              RFC 6991, DOI 10.17487/RFC6991, July 2013,
              <https://www.rfc-editor.org/info/rfc6991>.

Authors' Addresses

   Vishnu Pavan Beeram
   Juniper Networks

   Email: vbeeram@juniper.net








Beeram, et al.           Expires August 23, 2018               [Page 43]

Internet-Draft            RSVP YANG Data Model             February 2018


   Tarek Saad (editor)
   Cisco Systems, Inc.

   Email: tsaad@cisco.com


   Rakesh Gandhi
   Cisco Systems, Inc.

   Email: rgandhi@cisco.com


   Xufeng Liu
   Jabil

   Email: Xufeng_Liu@jabil.com


   Igor Bryskin
   Huawei Technologies

   Email: Igor.Bryskin@huawei.com


   Himanshu Shah
   Ciena

   Email: hshah@ciena.com























Beeram, et al.           Expires August 23, 2018               [Page 44]
