

   CCAMP Working Group                             E. Mannie (KPNQwest)
   Internet Draft                            D. Papadimitriou (Alcatel)
   Expiration Date: December 2002
                                                              June 2002


     GMPLS Extensions to OSPF and IS-IS for SONET/SDH Network Control

            draft-mannie-ccamp-gmpls-sonet-sdh-ospf-isis-01.txt


Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026 [1].

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups. Note that
   other groups may also distribute working documents as Internet-
   Drafts. Internet-Drafts are draft documents valid for a maximum of
   six months and may be updated, replaced, or obsoleted by other
   documents at any time. It is inappropriate to use Internet- Drafts
   as reference material or to cite them other than as "work in
   progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

Abstract

   This document introduces some of the extensions required in existing
   IGP routing protocols to support sub-sequent signalling for
   dynamically established SONET/SDH circuits using GMPLS-based control
   plane architecture [GMPLS-ARCH]. In particular, it specifies the
   GMPLS routing extensions to OSPF and IS-IS routing protocols for
   SONET/SDH networks using [GMPLS-RTG] as guideline.

   The current document is based on the Traffic Engineering (TE)
   extensions defined in [OSPF-TE] and [ISIS-TE]. It supports link
   bundling (aka TE Links) as defined in [MPLS-BDL]. This document
   proposes several new sub-TLVs for SONET/SDH network control which
   complement those proposed in [GMPLS-OSPF] and [GMPLS-ISIS]. The
   proposed encoding does not preclude any further integration in these
   documents that the current one intends to complement.

1. Conventions used in this document

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
   NOT","SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in
   this document are to be interpreted as described in RFC 2119.


                        Expires December 2002                [Page 1]

         draft-mannie-ccamp-gmpls-sonet-sdh-ospf-isis-01.txt  JuneÆ02


2. Introduction

   This document is based on Traffic Engineering (TE) extensions
   defined in [OSPF-TE] and [ISIS-TE]. [GMPLS-OSPF] and [GMPLS-ISIS]
   have extended these attributes in the GMPLS context.

   The proposed approach also uses the notion of Link Bundling as
   defined in [MPLS-BDL]. A set of data bearing links between two
   adjacent GMPLS nodes (or simply nodes) is defined as a TE Link and
   identified by a TE Link ID. The set of data bearing links belonging
   to a given TE Link must have the same TE metric, the same set of
   Resource Classes and the same set of Switching Capabilities and can
   be advertised as a single TE Link. Such TE Links are also referred
   to as link bundles and their individual data bearing link (or simply
   links) as component links. Moreover, there is no longer a one-to-one
   association between a regular routing adjacency and a TE Link (see
   [MPLS-HIER]).

   In order to enable distributed SONET/SDH network control, the IGP TE
   routing protocol has to enable the exchange of two different sets of
   TE Attributes. On one hand, a set that describes the TE Link
   capabilities of the SONET/SDH nodeÆs interfaces, independently of
   their usage. On the other hand, a set that describes the resources
   (i.e. the SONET/SDH signals) usage on each TE Link.

   The first set can be defined as being driven by less frequent
   updates (since TE Link capabilities changes are not expected to be
   frequent) while the second would follow update interval values as
   the ones used for any other TE Link attribute. Therefore, when this
   frequency is very low the corresponding TE Link capabilities are
   considered as static and by opposition, the TE Link resources usage
   as dynamic.

   When using OSPF, GMPLS TE links can be advertised using Opaque LSAs
   (Link State Advertisements) of Type 10. The Traffic Engineering (TE)
   LSA, whose area flooding scope is specified [RFC-2370], has one top-
   level Type/Length/Value (TLV) triplet and one or more nested sub-
   TLVs for extensibility.  Per [OSPF-TE], the following top-level TLVs
   are defined (1) Router Address (referred to as the Node TLV) and (2)
   TE Link TLV. When using IS-IS, GMPLS TE links are advertised using
   LS PDUs. TE Attributes TLVs are defined as sub-TLV for the Extended
   IS Reachability TLV (TLV 22) (see [ISIS-TE] and [GMPLS-ISIS]).

   Thus, here we propose to extend the current sub-TLV set of the TE
   Link TLV and Extended IS Reachability TLV, respectively. The sub-
   TLVs describing the capabilities of SONET/SDH TE Links are
   separately defined for LOVC/VT and HOVC/STS SPE; these are:

   - LS-MC TLV : TE Link SONET/SDH Multiplexing Capability TLV
   - LS-CC TLV : TE Link SONET/SDH Concatenation Capability TLV
   - LS-TC TLV : TE Link SONET/SDH Transparency Capability TLV



                          Expires December 2002               [Page 2]

         draft-mannie-ccamp-gmpls-sonet-sdh-ospf-isis-01.txt  JuneÆ02


   The sub-TLV describing the dynamic status of the SONET/SDH TE Link
   components is:

   - LS-UT-TLV : TE Link SONET/SDH (number of) Unallocated Timeslot TLV

   Note: the proposed sub-TLVs can also complement the Interface
   Switching Capability Descriptor sub-TLV of the TE Link TLV and
   Extended IS Reachability TLV (see [GMPLS-OSPF] and [GMPLS-ISIS],
   respectively) when the Switching Capability field value refers to
   TDM.

3. Additional Considerations

   Between two adjacent nodes, several links having the same Traffic
   Engineering (TE) capabilities (i.e. same TE metric, same set of
   Resource Class and same Switching capability) can be advertised as a
   single TE Link, such TE links are referred to as link bundles. The
   individual links (or data bearing links) belonging to a given bundle
   are referred to as component links. Also there is no longer a one-
   to-one association between a regular routing adjacency and a TE
   link.

   The result is that each component of a TE Link may have the same
   SONET/SDH multiplexing and concatenation capabilities as defined
   later in this document. The two corresponding TLVs (LS-MC and LS-CC)
   are specified once, but apply to each component of the TE Link.
   Thus, no per component information or identification is required for
   these TLVs. The TE Link SONET/SDH Unallocated Timeslot TLV defined
   in Section 5 gives the total number of unallocated components (i.e.
   timeslots) included in a given TE Link.

   Combined with the Link Property Correlation (see [LMP]) of data
   links into TE Links (also referred to as link bundling) this
   capability helps in removing the potential problem of flooding huge
   amount routing information. For instance, with a group of 10 fibers
   and 40 wavelengths per fiber, each of them supporting an STM-64,
   there are potentially 76800 VC-3 timeslots that can be allocated
   into the corresponding TE Link and that have therefore to be
   advertised to all nodes in the same routing domain. The most
   efficient way to proceed on a per-TE Link basis is to advertise the
   number of unallocated timeslots, such that after the initial
   advertisement, each node within a given routing area is aware of
   total capacity per TE Link (see Section 5.1).

   Despite being bundled, the usage of each component link in a TE Link
   may differ completely. For example, in a TE Link comprising two
   components the first component could be structured in VC-4-4c while
   the second component could be structured in VC-3s. Likewise, each
   STM-i of an STM-N (N > 1) could also be structured differently from
   the others.

   Therefore, for given TE Link it is not sufficient to simply
   represent the total number of timeslots (i.e. the bandwidth) that

                          Expires December 2002               [Page 3]

         draft-mannie-ccamp-gmpls-sonet-sdh-ospf-isis-01.txt  JuneÆ02


   are (un)allocated. It is also essential to know the corresponding
   signal types. This because in an allocated component does not only
   consume a timeslot at a given position in the multiplex, it also
   imposes some restrictions on the future allocations that can be made
   from the free portion of the SONET/SDH multiplex. This imposes a
   specific Concatenation Capability rules as described in Section 4.2.

   The knowledge of the signal types that can be carried in an STS-
   (3*N)/STM-N (for High Order, HO) or an STS-1/STM-0 (for Low Order,
   LO) and supported by the TE links are needed for path computation
   purposes. When computing an explicit route, a node considers the
   Interface Switching Capability descriptor subùTLV (see [GMPLS-RTG])
   and the LS-MC sub-TLV to ensure that the path (a) has the capability
   to carry the requested signal and (b) that it has sufficient
   available bandwidth (i.e. enough timeslot within the SONET/SDH
   multiplex on each interface) to carry the requested signal.

4. TE Link Capabilities

   There are two SONET/SDH TE Link capabilities to be advertised in the
   routing protocols: the multiplexing capabilities and the
   concatenation capability.

4.1  TE Link Multiplexing Capability

   The types of signals that are supported by the TE Links of SONET/SDH
   node constitute an important information with respect to the
   SONET/SDH network capability. Therefore this information is to be
   advertised via IGP TE routing protocol extensions.

   The purpose of the TE Link multiplexing capability is to succinctly
   describe the types of SONET/SDH signals that can be multiplexed by a
   TE Link for explicit route computation purposes. For example,
   depending on how it is structured, an OC-48/STM-16 link may be able
   to multiplex a variety of signal types.

4.1.1  Structure of SONET/SDH Multiplexing Capabilities

   GMPLS-based control of SONET/SDH networks enables the control of
   multiplex structures at a finer level of granularity than both STM-
   N/STS-(3xN) with N = 1, 4, 16, 64, 256 and STM-0/STS-1. These
   multiplexing structures are defined in [T1.105] and [G.707].

4.1.2  TE Link SONET/SDH Multiplexing Capability TLV (LS-MC)

   The Link SONET/SDH Multiplexing Capability (LS-MC) TLV describes the
   multiplexing capabilities of either a low-order link (i.e. a single
   STS-1/STM-0), or a high-order link (i.e. a single STS-(3*N)/STM-N (N
   = 1, 4, 16, 64, 256). It indicates precisely the types of elementary
   signal that can be multiplexed by this link. Both low order and high
   order instances of this TLV can be used simultaneously (for reasons
   outside of the scope of this document).


                          Expires December 2002               [Page 4]

         draft-mannie-ccamp-gmpls-sonet-sdh-ospf-isis-01.txt  JuneÆ02


   In IS-IS, this TLV is a sub-TLV of the Extended IS Reachability TLV
   (TLV 22) with Type TBD. In OSPF, this TLV is a sub-TLV of the Link
   TLV, with type TBD. The length of this TLV is four octets. The
   Multiplexing Capability Flag (MC-Flag) field defined as a vector of
   flags is coded over one octet.

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |             Type              |         Length = 4            |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |    MC Flag    |                    Reserved                   |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

              OSPF SONET/SDH TE Link Multiplex Capability TLV

      0                   1
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |   MC Flag     |    Reserved   |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

             IS-IS SONET/SDH TE Link Multiplex Capability TLV

   The MC Flag field indicates the capability of a link to multiplex a
   given signal into the higher order signal in the SONET/SDH multiplex
   tree.

   This flag is a vector of bits defined separately for both High Order
   (HO) and for Low Order (LO) SONET/SDH signals. A bit value of 1
   indicates that the multiplexing capability is supported while a bit
   value of 0 indicates that the multiplexing capability is not
   supported. Bit 1 is the lowest order bit of the flag field.

   The MC-Flag for SDH High Order VC (HOVC) is:

        - Bit 1 : VC-3   in AUG-1
        - Bit 2 : AUG-1  in AUG-4
        - Bit 3 : AUG-4  in AUG-16
        - Bit 4 : AUG-16 in AUG-64
        - Bit 5 : AUG-64 in AUG-256
        - Bit 6 : TUG-3  in AUG-1 (via VC-4)
        - Bit 7 : Reserved
        - Bit 8 : Reserved

   For instance, a value of HOVC MC-Flag can take the following values:
   - 0b00111111 (0x3f): indicates a full SDH HO multiplexing capability
   - 0b00011110 (0x1e): indicates that the lowest multiplexing
     capability is AUG-1 (with C4->VC4->AU4->AUG1)
   - 0b00000111 (0x05): indicates a full AUG-4 (within an STM-4)
     multiplexing capability

   Similarly, the MC-Flag for SDH Low Order VC (LOVC) is:

                          Expires December 2002               [Page 5]

         draft-mannie-ccamp-gmpls-sonet-sdh-ospf-isis-01.txt  JuneÆ02



        - Bit 1 : VC-11  in TUG-2
        - Bit 2 : VC-12  in TUG-2
        - Bit 3 : Reserved
        - Bit 4 : VC-2   in TUG-2
        - Bit 5 : TUG-2  in TUG-3
        - Bit 6 : TUG-2  in VC-3
        - Bit 7 : Reserved
        - Bit 8 : Reserved

   For instance, a value of LOVC MC-Flag can take the following values:
   - 0b00100010 (0x22): indicates that VC-12 can only be multiplexed in
     VC-3 (through TUG-2).
   - 0b00101000 (0x28): indicates that VC-2 can only be multiplexed in
     VC-3 (through TUG-2).

   Note: A binary value of 0b0..0 when advertised indicates no SDH
   multiplexing capability at all. Therefore referring to VC-4-Nc in
   AUG-N/STM-N capable interfaces only.

   The MC Flag for SONET high order STS SPE is:

        - Bit 1      : STS-1    in STSG-3
        - Bit 2      : STSG-3   in STSG-12
        - Bit 3      : STSG-12  in STSG-48
        - Bit 4      : STSG-48  in STSG-192
        - Bit 5      : STSG-192 in STSG-768
        - Bit 6 to 8 : reserved

   Similarly, the MC Flag for SONET low order VT SPE is:

        - Bit 1      : VT-1.5 SPE in VT Group
        - Bit 2      : VT-2   SPE in VT Group
        - Bit 3      : VT-3   SPE in VT Group
        - Bit 4      : VT-6   SPE in VT Group
        - Bit 5      : VT-Group   in STS-1 SPE
        - Bit 6 to 8 : reserved

   Note: A binary value of 0b0...0 when advertised indicates no SONET
   multiplexing capability at all. Therefore referring to STS3-Mc in
   STS-N (with N = 3xM) capable interfaces only.

4.2  TE Link Concatenation Capability

   Contiguous and Virtual concatenation of Low Order (LO) and High
   Order (HO) SONET and SDH signals are respectively defined in
   [T1.105] and [G.707].

   Note: Some equipmentÆs have limitations on the number of signal that
   can be concatenated. In that case, it may not possible to use a
   complete range of signals for contiguous (or even virtual)
   concatenation. It might also be that some of the supported
   contiguous and virtual concatenation capabilities are precluded or

                          Expires December 2002               [Page 6]

         draft-mannie-ccamp-gmpls-sonet-sdh-ospf-isis-01.txt  JuneÆ02


   discarded for reasons outside of the scope of this specification.
   Therefore, we propose an alternate way of representing the
   concatenation capabilities of a link by listing explicitly all of
   the levels of contiguous and virtual concatenation being supported.

4.2.1 SDH TE Link Concatenation Capability TLV (LS-CC)

   The SDH TE Link Concatenation Capability TLV describes the SONET/SDH
   concatenation capabilities on a link.

   In IS-IS, this TLV is a sub-TLV of the Extended IS Reachability TLV
   with type TBD. In OSPF, this TLV is a sub-TLV of the Link TLV, with
   type TBD. The corresponding encoding and values are defined for Low
   Order and High Order VCs. If no concatenation is supported on a TE
   Link, this TLV should not be advertised.

   1. Low Order VC (LOVC) Concatenation

      LOVC Concatenation includes:
      - Contiguous concatenation of X VC-2s (VC-2-Xc, X = 1,...,7)
      - Virtual concatenation of X VC-2/12/11s (VC-m-Xv, m = 11,12,2)
        as defined in the following table:

        Signal                  Carried in      X interval
        --------------------------------------------------
        VC-11-Xv                VC-3            1 to 28
        VC-12-Xv                VC-3            1 to 21
        VC-2-Xv                 VC-3            1 to 7
        VC-11-Xv                VC-4            1 to 64
        VC-12-Xv                VC-4            1 to 63
        VC-2-Xv                 VC-4            1 to 21

      The SDH LOVC TE Link Concatenation Capability TLV has the
      following format:

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |             Type              |             Length            |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |  Signal Type  |   CT  |  Res. |   LT  |     List Length       |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |              NCC              |             . . .             |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |              NCC              |             . . .             |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                                                               |
     //                            . . .                             //
     |                                                               |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |  Signal Type  |   CT  |  Res. |   LT  |     List Length       |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |              NCC              |             . . .             |

                          Expires December 2002               [Page 7]

         draft-mannie-ccamp-gmpls-sonet-sdh-ospf-isis-01.txt  JuneÆ02


     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |              NCC              |             . . .             |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

            OSPF SDH LOVC TE Link Concatenation Capability TLV

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |  Signal Type  |   CT  |  Res. |   LT  |     List Length       |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |              NCC              |             . . .             |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |              NCC              |             . . .             |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                                                               |
     //                            . . .                             //
     |                                                               |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |  Signal Type  |   CT  |  Res. |   LT  |     List Length       |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |              NCC              |             . . .             |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |              NCC              |             . . .             |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

            IS-IS SDH LOVC TE Link Concatenation Capability TLV

   Signal Type (8 bits):

        The Signal Type field values are defined in [GMPLS-SONET-SDH].

   CT û Concatenation Type (4 bits):

        The CT field is defined as a 4-bit vector of flags indicating
        the supported concatenation type(s):

        Bit 1:  Contiguous Concatenation
        Bit 2:  Virtual Concatenation
        Bit 3:  Concatenation Conversion (see ITU-T G.783)
        Bit 4:  Reserved

   Reserved (4 bits):

        The Reserved field bits must be set to zero when sent and
        should be ignored when received.

   LT û List Type (4 bits):

        The LT field indicates the type of the list; the following
        values are defined (the values to which they refer must be
        mutually disjoint):


                          Expires December 2002               [Page 8]

         draft-mannie-ccamp-gmpls-sonet-sdh-ospf-isis-01.txt  JuneÆ02


           0    Inclusive list
           1    Exclusive list
           2    Inclusive range (one or more Minimum/Maximum pairs)
           3    Exclusive range (one or more Minimum/Maximum pairs)

        Values ranging from 4 to 15 are reserved.

   List Length (12 bits):

        The List Length indicates the number of NCC elements included
        within the sub-list. Zero is an invalid value.

   NCC - Number of Concatenated Components (16 bits):

        The NCC field indicates the supported number of low order VCÆs
        with respect to the Signal Type and the CT values. For SDH
        LOVCs, the number of VC-mÆs values MUST refer to one or more of
        the following values (as defined in the Signal Type field): VC-
        11, VC-12 and/or VC-2.

        When the LT field value equals 2 or 3, at least one pair of
        LOVCÆs numbers (i.e. two NCC fields) must be included in the
        list. The first value indicates the minimum number of LOVCÆs
        and the second one the maximum number of LOVCÆs supported (or
        not supported, respectively) with the selected concatenation
        type (CT).

   2. High Order VC (HOVC) Concatenation:

      HOVC Concatenation includes:
      - Contiguous concatenation of X VC-4s (VC-4-Xc, X = 4,16,64,256)
      - Virtual concatenation of X VC-3/4s  (VC-3/4-Xv, X = 1,...,256)

      The SDH HOVC TE Link Concatenation Capability TLV has the
      following format:

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |             Type              |             Length            |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |  Signal Type  |   CT  |  Res. |   LT  |     List Length       |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |              NCC              |             . . .             |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |              NCC              |             . . .             |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                                                               |
     //                            . . .                             //
     |                                                               |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |  Signal Type  |   CT  |  Res. |   LT  |     List Length       |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                          Expires December 2002               [Page 9]

         draft-mannie-ccamp-gmpls-sonet-sdh-ospf-isis-01.txt  JuneÆ02


     |              NCC              |             . . .             |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |              NCC              |             . . .             |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

          OSPF SDH HOVC TE Link SDH Concatenation Capability TLV

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |  Signal Type  |   CT  |  Res. |   LT  |     List Length       |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |              NCC              |             . . .             |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |              NCC              |             . . .             |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                                                               |
     //                            . . .                             //
     |                                                               |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |  Signal Type  |   CT  |  Res. |   LT  |     List Length       |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |              NCC              |             . . .             |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |              NCC              |             . . .             |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

          IS-IS SDH HOVC TE Link SDH Concatenation Capability TLV

   Signal Type (8 bits): see above.

   CT û Concatenation Type (4 bits): see above.

   Reserved (4 bits): see above.

   LT û List Type (4 bits): see above.

   List Length (12 bits): see above.

   NCC - Number of Concatenated Components (16 bits):

        The NCC field indicates the supported number of high order VCÆs
        with respect to the Signal Type (i.e. VC-3 and/or VC-4) and the
        CT values.

        When the LT field value equals 2 or 3, at least one pair of
        HOVCÆs numbers (i.e. two NCC fields) must be included in the
        list. The first value indicates the minimum number of HOVCÆs
        and the second one the maximum number of HOVCÆs supported (or
        not supported, respectively) with the selected concatenation
        type (CT).



                          Expires December 2002              [Page 10]

         draft-mannie-ccamp-gmpls-sonet-sdh-ospf-isis-01.txt  JuneÆ02


4.2.2 SONET TE Link Concatenation Capability TLV (LS-CC)

   Using the STS-1 SPE and STS-3c SPE equivalence to a VC-3 and a VC-4,
   respectively, the above High Order Concatenation Capability TLV
   applies. Notice that in SONET, contiguous concatenation is
   applicable to STS-3c SPE signals, resulting in STS-(3*X)c SPE
   signals with X = 4, 16, 64, 256. For low order signal, only virtual
   concatenation of X VTn SPEs (VTn-Xv SPE, n = 1.5,2,3,6) must be
   considered since low order contiguous concatenation is not defined
   in ANSI [T1.105].

   In IS-IS, this TLV is a sub-TLV of the Extended IS Reachability TLV
   with type TBD. In OSPF, this TLV is a sub-TLV of the Link TLV, with
   type TBD. The corresponding encoding and values are defined for Low
   Order and High Order VCs.

   1. Low order VT SPEs concatenation:

      - Virtual concatenation of X VTnÆs SPE (VTn-Xv SPE, n = 1.5,2,3,
        6) as defined in the following table:

        Signal                  Carried in      X interval
        --------------------------------------------------
        VT1.5-Xv SPE            STS-1           1 to 28
        VT2-Xv   SPE            STS-1           1 to 21
        VT3-Xv   SPE            STS-1           1 to 14
        VT6-Xv   SPE            STS-1           1 to 7
        VT1.5-Xv SPE            STS-3c          1 to 64
        VT2-Xv   SPE            STS-3c          1 to 63
        VT3-Xv   SPE            STS-3c          1 to 42
        VT6-Xv   SPE            STS-3c          1 to 21

      The OSPF/ISIS encoding for the Low Order SONET TE Link
      Concatenation Capability TLV is identical to the one defined for
      SDH LOVC Concatenation.

   2. High order STS SPEs concatenation:

      - Contiguous concatenation of X STS-3c SPEs (STS-(3*X)c with X =
        4,16,64,256)
      - Virtual concatenation of X STS-1/STS-3c SPEs (STS-1-Xv/STS-3c-
        Xv with X = 1,...,256)

      The OSPF and ISIS encoding for the High Order SONET TE Link
      Concatenation Capability TLV is identical to the one defined for
      SDH HOVC Concatenation.

4.2.3  SONET/SDH TE Link Transparency Capability (LS-TC TLV)

   This TLV is defined as a vector of flags that indicates the type of
   transparency supported by each of the component of a given TE Link.
   Several flags can be combined to provide different types of
   transparency while any combination is not necessarily valid. By

                          Expires December 2002              [Page 11]

         draft-mannie-ccamp-gmpls-sonet-sdh-ospf-isis-01.txt  JuneÆ02


   default, the supported transparency on a TE Link is defined as the
   Path Overhead (POH) transparency; therefore the LS-TC TLV should not
   be sent for a TE Link only supporting POH transparency.

   Note that when the LS-TC TLV is advertised, the Signal Type(s)
   field(s) in the LS-UT TLV (see Section 5) MUST take at least one of
   the following values (see [GMPLS-SONET-SDH]): STM-0/STS-1, STM-
   1/STS-3, STM-4/STS-12, STM-16/STS-48, STM-64/STS-192, and STM-
   256/STS-768. Equivalently, at least one transparency type must be
   specified when advertising such Signal Type(s) in the LS-UT TLV.

   In IS-IS, the LS-TC TLV is a sub-TLV of the Extended IS Reachability
   TLV (TLV 22) with Type TBD. In OSPF, this TLV is a sub-TLV of the
   Link TLV, with type TBD. The length of this TLV is four octets. It
   includes the Transparency field defined as a 32-bit vector of flags.

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |             Type              |         Length = 4            |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                          Transparency (T)                     |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

            OSPF SONET/SDH TE Link Transparency Capability TLV

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                          Transparency (T)                     |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

            IS-IS SONET/SDH TE Link Transparency Capability TLV


   The different transparency flags are the following:
        Flag 1 (bit 1): Section/Regenerator Section layer
        Flag 2 (bit 2): Line/Multiplex Section layer

   Where bit 1 is the low order bit. Others flags are reserved, they
   should be set to zero when sent, and should be ignored when
   received. A flag is set to one to indicate that the corresponding
   transparency is supported on the corresponding TE Link.

   We refer to [GMPLS-SONET-SDH-EXT] for an extended set of
   transparency flags beyond the standard transparencies defined in
   ANSI [T1.105] and ITU-T [G.707].

5. Dynamic Allocation

   This section defines the dynamic capabilities of a link that should
   be advertised by OSPF/IS-IS. The most important dynamic link
   capability that needs to be advertised concerns the link resources

                          Expires December 2002              [Page 12]

         draft-mannie-ccamp-gmpls-sonet-sdh-ospf-isis-01.txt  JuneÆ02


   usage. In the SONET/SDH context, this information can be represented
   by the number of unallocated (free) timeslots per signal type and
   per link.

5.1  Link SONET/SDH Unallocated Timeslot (LS-UT) TLV

   The Link SONET/SDH Unallocated Timeslot TLV specifies the number of
   identical unallocated timeslots per TE Link. As such, the initial
   value(s) of this TLV indicates the total capacity in terms of number
   of timeslot per TE Link.

   In IS-IS, this TLV is a sub-TLV of the Extended IS Reachability TLV
   with type TBD. In OSPF, this TLV is a sub-TLV of the Link TLV, with
   type TBD. The length is n*4 octets. The value is the number of
   unallocated (free) timeslot in the TE Link, and is coded in 4
   octets. The Signal Type field values are defined in [GMPLS-SONET-
   SDH].

   Typically, a given LS-UT TLV will be advertised by including Signal
   Type(s) of the same order since one expects (as it is mostly the
   case in legacy networks) separated routing instances between Low
   Order and High Order VC transport layers.

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |             Type              |          Length = n*4         |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |  Signal Type  |        Number of Unallocated Timeslots        |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |  Signal Type  |        Number of Unallocated Timeslots        |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                                                               |
     //                            . . .                             //
     |                                                               |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

               OSPF Link SONET/SDH Unallocated Timeslot TLV

      0                   1                   2                   3
      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |  Signal Type  |        Number of Unallocated Timeslots        |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |  Signal Type  |        Number of Unallocated Timeslots        |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                                                               |
     //                            . . .                             //
     |                                                               |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

               IS-IS Link SONET/SDH Unallocated Timeslot TLV


                          Expires December 2002              [Page 13]

         draft-mannie-ccamp-gmpls-sonet-sdh-ospf-isis-01.txt  JuneÆ02


   For instance, if a TE Link is constituted by 40 STM-64, each of them
   decomposed in VC-4, initially the value of the Number of Unallocated
   Timeslots field of this TLV is 40 x 64. Thus, 2560 VC-4 signals are
   supported, and, if required, 2560 instances of exactly the same
   signal can be allocated.

   When two Number of Unallocated Timeslots fields with the same Signal
   Type value are advertised, the second one indicates the number of
   contiguous block of unallocated timeslots. Thus, when advertised
   initially the corresponding value equal 1.

6  Security Considerations

   This document does not introduce additional considerations to [OSPF-
   TE] and [ISIS-TE].

7. References

   [G.707]      ITU-T Recommendation G.707, ôNetwork Node Interface for
                the Synchronous Digital Hierarchyö, April 2000.

   [GMPLS-ARCH] E.Mannie (Editor) et al., ôGeneralized MPLS (GMPLS)
                Architecture,ö Internet Draft, Work in Progress, draft-
                ietf-ccamp-gmpls-architecture-02.txt, February 2002.

   [GMPLS-ISIS] K.Kompella et al, ôIS-IS Extensions in Support of
                Generalized MPLS,ö Internet Draft, Work in Progress,
                draft-ietf-isis-gmpls-extensions-13.txt, June 2002.

   [GMPLS-OSPF] K.Kompella et al., ôOSPF Extensions in Support
                of Generalized MPLS,ö Internet Draft, Work in Progress,
                draft-ietf-ccamp-ospf-gmpls-extensions-07.txt, April
                2002.

   [GMPLS-RTG]  K.Kompella et al., ôRouting Extensions in Support of
                Generalized MPLS,ö Internet Draft, Work in Progress,
                draft-ietf-ccamp-gmpls-routing-04.txt, April 2002.

   [GMPLS-SONET-SDH] E.Mannie and D.Papadimitriou (Editors) et al.,
                "GMPLS extensions for SONET and SDH control", Internet
                Draft, Work in progress, draft-ietf-ccamp-gmpls-sonet-
                sdh-05.txt, May 2002.

   [ISIS-TE]    H.Smith and T.Li, ôISIS Extensions for Traffic
                Engineeringö, draft-ietf-isis-traffic-04.txt, Internet
                Draft, Work in Progress, June 2001.

   [MPLS-BDL]   K.Kompella et al., ôLink Bundling in MPLS Traffic
                Engineering,ö Internet Draft, Work in Progress, draft-
                ietf-mpls-bundle-03.txt, May 2002.




                          Expires December 2002              [Page 14]

         draft-mannie-ccamp-gmpls-sonet-sdh-ospf-isis-01.txt  JuneÆ02


   [MPLS-HIER]  K.Kompella and Y.Rekhter, ôLSP Hierarchy with
                Generalized MPLS TEö, Internet Draft, Work in progress,
                draft-ietf-mpls-lsp-hierarchy-06.txt, May 2002.

   [OSPF-TE]    D.Katz, D.Yeung and K.Kompella, ôTraffic Engineering
                Extensions to OSPFö, draft-katz-yeung-ospf-traffic-
                06.txt, Internet Draft, Work in Progress, October 2001.

   [RFC-2370]   R.Coltun, RFC 2370, Standard Track, "The OSPF Opaque
                LSA Option", July 1998.

   [T1.105]     American National Standards Institute, ôSynchronous
                Optical Network - Payload Mappingsö, ANSI T1.105, 2001.

8. Author's Addresses

   Eric Mannie (KPNQwest)       Dimitri Papadimitriou (Alcatel)
   Terhulpsesteenweg, 6A        Francis Wellesplein 1,
   1560 Hoeilaart, Belgium      B-2018 Antwerpen, Belgium
   Phone:+32 2 658-5652         Phone:+32 3 240-8491
   Email: eric.mannie@ebone.com Email:dimitri.papadimitriou@alcatel.be

































                          Expires December 2002              [Page 15]
