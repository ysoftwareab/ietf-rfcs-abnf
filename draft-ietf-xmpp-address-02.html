<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Extensible Messaging and Presence Protocol (XMPP): Address Format</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Extensible Messaging and Presence Protocol (XMPP): Address Format">
<meta name="keywords" content="Extensible Messaging and Presence Protocol, XMPP, Jabber, Messaging, Instant Messaging, Presence, Extensible Markup Language, XML">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">P. Saint-Andre</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Cisco Systems, Inc.</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">July 12, 2010</td></tr>
<tr><td class="header">Expires: January 13, 2011</td><td class="header">&nbsp;</td></tr>
</table></td></tr></table>
<h1><br />Extensible Messaging and Presence Protocol (XMPP): Address Format<br />draft-ietf-xmpp-address-02</h1>

<h3>Abstract</h3>

<p>This document defines the format for addresses used in the Extensible Messaging and Presence Protocol (XMPP), including support for non-ASCII characters.
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on January 13, 2011.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#intro">1.</a>&nbsp;
Introduction<br />
<a href="#addressing">2.</a>&nbsp;
Addresses<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#addressing-overview">2.1.</a>&nbsp;
Overview<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#addressing-domain">2.2.</a>&nbsp;
Domainpart<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#addressing-localpart">2.3.</a>&nbsp;
Localpart<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#addressing-resource">2.4.</a>&nbsp;
Resourcepart<br />
<a href="#i18n">3.</a>&nbsp;
Internationalization Considerations<br />
<a href="#security">4.</a>&nbsp;
Security Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#security-stringprep">4.1.</a>&nbsp;
Reuse of Stringprep<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#security-unicode">4.2.</a>&nbsp;
Reuse of Unicode<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#security-confusables">4.3.</a>&nbsp;
Confusable Characters<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#security-spoofing">4.4.</a>&nbsp;
Address Spoofing<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#security-forging">4.4.1.</a>&nbsp;
Address Forging<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#security-mimicking">4.4.2.</a>&nbsp;
Address Mimicking<br />
<a href="#iana">5.</a>&nbsp;
IANA Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#iana-nodeprep">5.1.</a>&nbsp;
Nodeprep Profile of Stringprep<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#iana-resourceprep">5.2.</a>&nbsp;
Resourceprep Profile of Stringprep<br />
<a href="#conformance">6.</a>&nbsp;
Conformance Requirements<br />
<a href="#rfc.references1">7.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">7.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">7.2.</a>&nbsp;
Informative References<br />
<a href="#nodeprep">Appendix&nbsp;A.</a>&nbsp;
Nodeprep<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#nodeprep-intro">A.1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#nodeprep-character">A.2.</a>&nbsp;
Character Repertoire<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#nodeprep-mapping">A.3.</a>&nbsp;
Mapping<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#nodeprep-normalization">A.4.</a>&nbsp;
Normalization<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#nodeprep-prohibited">A.5.</a>&nbsp;
Prohibited Output<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#nodeprep-bidirectional">A.6.</a>&nbsp;
Bidirectional Characters<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#nodeprep-notes">A.7.</a>&nbsp;
Notes<br />
<a href="#resourceprep">Appendix&nbsp;B.</a>&nbsp;
Resourceprep<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#resourceprep-introduction">B.1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#resourceprep-character">B.2.</a>&nbsp;
Character Repertoire<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#resourceprep-mapping">B.3.</a>&nbsp;
Mapping<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#resourceprep-normalization">B.4.</a>&nbsp;
Normalization<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#resourceprep-prohibited">B.5.</a>&nbsp;
Prohibited Output<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#resourceprep-bidirectional">B.6.</a>&nbsp;
Bidirectional Characters<br />
<a href="#diffs">Appendix&nbsp;C.</a>&nbsp;
Differences From RFC 3920<br />
<a href="#copying">Appendix&nbsp;D.</a>&nbsp;
Copying Conditions<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Author's Address<br />
</p>
<br clear="all" />

<a name="intro"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>The Extensible Messaging and Presence Protocol <a class='info' href='#XMPP'>[XMPP]<span> (</span><span class='info'>Saint-Andre, P., &ldquo;Extensible Messaging and Presence Protocol (XMPP): Core,&rdquo; July&nbsp;2010.</span><span>)</span></a> is an application profile of the Extensible Markup Language <a class='info' href='#XML'>[XML]<span> (</span><span class='info'>Paoli, J., Maler, E., Sperberg-McQueen, C., Yergeau, F., and T. Bray, &ldquo;Extensible Markup Language (XML) 1.0 (Fourth Edition),&rdquo; August&nbsp;2006.</span><span>)</span></a> for streaming XML data in close to real time between any two or more network-aware entities.  The address format for XMPP entities was originally developed in the Jabber open-source community in 1999, first described by <a class='info' href='#XEP-0029'>[XEP&#8209;0029]<span> (</span><span class='info'>Kaes, C., &ldquo;Definition of Jabber Identifiers (JIDs),&rdquo; October&nbsp;2003.</span><span>)</span></a> in 2002, and defined canonically by <a class='info' href='#RFC3920'>[RFC3920]<span> (</span><span class='info'>Saint-Andre, P., Ed., &ldquo;Extensible Messaging and Presence Protocol (XMPP): Core,&rdquo; October&nbsp;2004.</span><span>)</span></a> in 2004.
</p>
<p>As specified in RFC 3920, the XMPP address format re-uses the "stringprep" technology for preparation of non-ASCII characters <a class='info' href='#STRINGPREP'>[STRINGPREP]<span> (</span><span class='info'>Hoffman, P. and M. Blanchet, &ldquo;Preparation of Internationalized Strings (&quot;stringprep&quot;),&rdquo; December&nbsp;2002.</span><span>)</span></a>, including the Nameprep profile for internationalized domain names as specified in <a class='info' href='#NAMEPREP'>[NAMEPREP]<span> (</span><span class='info'>Hoffman, P. and M. Blanchet, &ldquo;Nameprep: A Stringprep Profile for Internationalized Domain Names (IDN),&rdquo; March&nbsp;2003.</span><span>)</span></a> and <a class='info' href='#IDNA2003'>[IDNA2003]<span> (</span><span class='info'>Faltstrom, P., Hoffman, P., and A. Costello, &ldquo;Internationalizing Domain Names in Applications (IDNA),&rdquo; March&nbsp;2003.</span><span>)</span></a> along with two XMPP-specific profiles for the localpart and resourcepart.  However, since the publication of RFC 3920, IDNA2003 has been superseded by IDNA2008 (see <a class='info' href='#IDNA-PROTO'>[IDNA&#8209;PROTO]<span> (</span><span class='info'>Klensin, J., &ldquo;Internationalized Domain Names in Applications (IDNA): Protocol,&rdquo; January&nbsp;2010.</span><span>)</span></a> and related documents).  As a result, other protocols that use stringprep (including XMPP) have begun to migrate from stringprep toward more "modern" approaches.
</p>
<p>Because work on improved handling of internationalized addresses is currently in progress, specifying the XMPP address format in the specification that obsoletes RFC 3920 would unacceptably delay the revision process.  Therefore, this specification provides updated documentation of the XMPP address format (essentially copied from RFC 3920), with the intent that it can be superseded once work on a new approach to internationalization is complete.
</p>
<a name="addressing"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Addresses</h3>

<a name="addressing-overview"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Overview</h3>

<p>An XMPP entity is anything that is network-addressable and that can communicate using XMPP.  For historical reasons, the native address of an XMPP entity is called a Jabber Identifier or JID.  A valid JID is a string of <a class='info' href='#UNICODE'>[UNICODE]<span> (</span><span class='info'>The Unicode Consortium, &ldquo;The Unicode Standard, Version 3.2.0,&rdquo; 2000.</span><span>)</span></a> code points, encoded using <a class='info' href='#UTF-8'>[UTF&#8209;8]<span> (</span><span class='info'>Yergeau, F., &ldquo;UTF-8, a transformation format of ISO 10646,&rdquo; November&nbsp;2003.</span><span>)</span></a>, and structured as an ordered sequence of localpart, domainpart, and resourcepart (where the first two parts are demarcated by the '@' character used as a separator, and the last two parts are similarly demarcated by the '/' character).
</p>
<p>The syntax for a JID is defined as follows using the Augmented Backus-Naur Form as specified in <a class='info' href='#ABNF'>[ABNF]<span> (</span><span class='info'>Crocker, D. and P. Overell, &ldquo;Augmented BNF for Syntax Specifications: ABNF,&rdquo; January&nbsp;2008.</span><span>)</span></a>.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   jid           = [ localpart "@" ] domainpart [ "/" resourcepart ]
   localpart     = 1*(nodepoint)
                   ; a "nodepoint" is a UTF-8 encoded Unicode code
                   ; point that satisfies the Nodeprep profile of
                   ; stringprep
   domainpart    = IP-literal / IPv4address / ifqdn
                   ; the "IPv4address" and "IP-literal" rules are
                   ; defined in RFC 3986, and the first-match-wins
                   ; (a.k.a. "greedy") algorithm described in RFC
                   ; 3986 applies to the matching process
   ifqdn         = 1*(namepoint)
                   ; a "namepoint" is a UTF-8 encoded Unicode
                   ; code point that satisfies the Nameprep
                   ; profile of stringprep
   resourcepart  = 1*(resourcepoint)
                   ; a "resourcepoint" is a UTF-8 encoded Unicode
                   ; code point that satisfies the Resourceprep
                   ; profile of stringprep
</pre></div>
<p>All JIDs are based on the foregoing structure.  One common use of this structure is to identify a messaging and presence account, the server that hosts the account, and a connected resource (e.g., a specific device) in the form of &lt;localpart@domain/resource&gt;.  However, localparts other than clients are possible; for example, a specific chat room offered by a multi-user chat service (see <a class='info' href='#XEP-0045'>[XEP&#8209;0045]<span> (</span><span class='info'>Saint-Andre, P., &ldquo;Multi-User Chat,&rdquo; January&nbsp;in progress, last updated 2010.</span><span>)</span></a>) is addressed as &lt;room@service&gt; (where "room" is the name of the chat room and "service" is the hostname of the multi-user chat service) and a specific occupant of such a room could be addressed as &lt;room@service/nick&gt; (where "nick" is the occupant's room nickname).  Many other JID types are possible (e.g., &lt;domain/resource&gt; could be a server-side script or service).
</p>
<p>Each allowable portion of a JID (localpart, domainpart, and resourcepart) MUST NOT be zero bytes in length and MUST NOT be more than 1023 bytes in length, resulting in a maximum total size (including the '@' and '/' separators) of 3071 bytes.
</p>
<p>An entity's address on an XMPP network MUST be represented as a JID (without a URI scheme) and not a <a class='info' href='#URI'>[URI]<span> (</span><span class='info'>Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;Uniform Resource Identifier (URI): Generic Syntax,&rdquo; January&nbsp;2005.</span><span>)</span></a> or <a class='info' href='#IRI'>[IRI]<span> (</span><span class='info'>Duerst, M. and M. Suignard, &ldquo;Internationalized Resource Identifiers (IRIs),&rdquo; January&nbsp;2005.</span><span>)</span></a> as specified in <a class='info' href='#XMPP-URI'>[XMPP&#8209;URI]<span> (</span><span class='info'>Saint-Andre, P., &ldquo;Internationalized Resource Identifiers (IRIs) and Uniform Resource Identifiers (URIs) for the Extensible Messaging and Presence Protocol (XMPP),&rdquo; February&nbsp;2008.</span><span>)</span></a>; the latter specification is provided only for identification and interaction outside the context of XMPP itself.
</p>
<p></p>
<blockquote class="text">
<p>Implementation Note: When dividing a JID into its component parts, an implementation needs to match the separator characters '@' and '/' before applying any transformation algorithms, which might decompose certain Unicode code points to the separator characters (e.g., U+FE6B SMALL COMMERCIAL AT might decompose into U+0040 COMMERCIAL AT).
</p>
</blockquote>

<a name="addressing-domain"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
Domainpart</h3>

<p>The DOMAINPART of a JID is that portion after the '@' character (if any) and before the '/' character (if any); it is the primary identifier and is the only REQUIRED element of a JID (a mere domainpart is a valid JID).  Typically a domainpart identifies the "home" server to which clients connect for XML routing and data management functionality.  However, it is not necessary for an XMPP domainpart to identify an entity that provides core XMPP server functionality (e.g., a domainpart can identify an entity such as a multi-user chat service, a publish-subscribe service, or a user directory).
</p>
<p>The domainpart for every server or service that will communicate over a network SHOULD be a fully qualified domain name or "FQDN" (see <a class='info' href='#DNS'>[DNS]<span> (</span><span class='info'>Mockapetris, P., &ldquo;Domain names - implementation and specification,&rdquo; November&nbsp;1987.</span><span>)</span></a>); although the domainpart MAY be either an Internet Protocol (IPv4 or IPv6) address or a text label that is resolvable on a local network (commonly called an "unqualified hostname"), it is possible that domainparts that are IP addresses will not be acceptable to other services for the sake of interdomain communication.  Furthermore, domainparts that are unqualified hostnames MUST NOT be used on public networks but MAY be used on private networks.
</p>
<p></p>
<blockquote class="text">
<p>Note: If the domainpart includes a final character considered to be a label separator (dot) by <a class='info' href='#IDNA2003'>[IDNA2003]<span> (</span><span class='info'>Faltstrom, P., Hoffman, P., and A. Costello, &ldquo;Internationalizing Domain Names in Applications (IDNA),&rdquo; March&nbsp;2003.</span><span>)</span></a> or <a class='info' href='#DNS'>[DNS]<span> (</span><span class='info'>Mockapetris, P., &ldquo;Domain names - implementation and specification,&rdquo; November&nbsp;1987.</span><span>)</span></a>, this character MUST be stripped from the domainpart before the JID of which it is a part is used for the purpose of routing an XML stanza, comparing against another JID, or constructing an <a class='info' href='#XMPP-URI'>[XMPP&#8209;URI]<span> (</span><span class='info'>Saint-Andre, P., &ldquo;Internationalized Resource Identifiers (IRIs) and Uniform Resource Identifiers (URIs) for the Extensible Messaging and Presence Protocol (XMPP),&rdquo; February&nbsp;2008.</span><span>)</span></a>; in particular, the character MUST be stripped before any other canonicalization steps are taken, such as application of the <a class='info' href='#NAMEPREP'>[NAMEPREP]<span> (</span><span class='info'>Hoffman, P. and M. Blanchet, &ldquo;Nameprep: A Stringprep Profile for Internationalized Domain Names (IDN),&rdquo; March&nbsp;2003.</span><span>)</span></a> profile of <a class='info' href='#STRINGPREP'>[STRINGPREP]<span> (</span><span class='info'>Hoffman, P. and M. Blanchet, &ldquo;Preparation of Internationalized Strings (&quot;stringprep&quot;),&rdquo; December&nbsp;2002.</span><span>)</span></a> or completion of the ToASCII operation as described in <a class='info' href='#IDNA2003'>[IDNA2003]<span> (</span><span class='info'>Faltstrom, P., Hoffman, P., and A. Costello, &ldquo;Internationalizing Domain Names in Applications (IDNA),&rdquo; March&nbsp;2003.</span><span>)</span></a>.
</p>
</blockquote>

<p>A domainpart consisting of a fully qualified domain name MUST be an "internationalized domain name" as defined in <a class='info' href='#IDNA2003'>[IDNA2003]<span> (</span><span class='info'>Faltstrom, P., Hoffman, P., and A. Costello, &ldquo;Internationalizing Domain Names in Applications (IDNA),&rdquo; March&nbsp;2003.</span><span>)</span></a>, that is, "a domain name in which every label is an internationalized label".  When preparing a text label (consisting of a sequence of properly-encoded Unicode code points) for representation as an internationalized label in the process of constructing an XMPP domainpart or comparing two XMPP domainparts, an application MUST ensure that for each text label it is possible to apply without failing the ToASCII operation specified in <a class='info' href='#IDNA2003'>[IDNA2003]<span> (</span><span class='info'>Faltstrom, P., Hoffman, P., and A. Costello, &ldquo;Internationalizing Domain Names in Applications (IDNA),&rdquo; March&nbsp;2003.</span><span>)</span></a> with the UseSTD3ASCIIRules flag set (thus forbidding ASCII code points other than letters, digits, and hyphens).  If the ToASCII operation can be applied without failing, then the label is an internationalized label.  An internationalized domain name (and therefore an XMPP domainpart) is constructed from its constituent internationalized labels by following the rules specified in <a class='info' href='#IDNA2003'>[IDNA2003]<span> (</span><span class='info'>Faltstrom, P., Hoffman, P., and A. Costello, &ldquo;Internationalizing Domain Names in Applications (IDNA),&rdquo; March&nbsp;2003.</span><span>)</span></a>.
</p>
<p></p>
<blockquote class="text">
<p>Note: The ToASCII operation includes application of the <a class='info' href='#NAMEPREP'>[NAMEPREP]<span> (</span><span class='info'>Hoffman, P. and M. Blanchet, &ldquo;Nameprep: A Stringprep Profile for Internationalized Domain Names (IDN),&rdquo; March&nbsp;2003.</span><span>)</span></a> profile of <a class='info' href='#STRINGPREP'>[STRINGPREP]<span> (</span><span class='info'>Hoffman, P. and M. Blanchet, &ldquo;Preparation of Internationalized Strings (&quot;stringprep&quot;),&rdquo; December&nbsp;2002.</span><span>)</span></a> and encoding using the algorithm specified in <a class='info' href='#PUNYCODE'>[PUNYCODE]<span> (</span><span class='info'>Costello, A., &ldquo;Punycode: A Bootstring encoding of Unicode for Internationalized Domain Names in Applications (IDNA),&rdquo; March&nbsp;2003.</span><span>)</span></a>; for details, see <a class='info' href='#IDNA2003'>[IDNA2003]<span> (</span><span class='info'>Faltstrom, P., Hoffman, P., and A. Costello, &ldquo;Internationalizing Domain Names in Applications (IDNA),&rdquo; March&nbsp;2003.</span><span>)</span></a>.  Although the output of the ToASCII operation is not used in XMPP, it MUST be possible to apply that operation without failing.
</p>
</blockquote>

<p>In the terms of IDNA2008 <a class='info' href='#IDNA-DEFS'>[IDNA&#8209;DEFS]<span> (</span><span class='info'>Klensin, J., &ldquo;Internationalized Domain Names for Applications (IDNA): Definitions and Document Framework,&rdquo; January&nbsp;2010.</span><span>)</span></a>, the domainpart of a JID is a "domain name slot".
</p>
<a name="addressing-localpart"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3"></a><h3>2.3.&nbsp;
Localpart</h3>

<p>The LOCALPART of a JID is an optional identifier placed before the domainpart and separated from the latter by the '@' character.  Typically a localpart uniquely identifies the entity requesting and using network access provided by a server (i.e., a local account), although it can also represent other kinds of entities (e.g., a chat room associated with a multi-user chat service).  The entity represented by an XMPP localpart is addressed within the context of a specific domain.
</p>
<p>A localpart MUST NOT be zero bytes in length and MUST NOT be more than 1023 bytes in length.
</p>
<p>A localpart MUST be formatted such that the Nodeprep profile of <a class='info' href='#STRINGPREP'>[STRINGPREP]<span> (</span><span class='info'>Hoffman, P. and M. Blanchet, &ldquo;Preparation of Internationalized Strings (&quot;stringprep&quot;),&rdquo; December&nbsp;2002.</span><span>)</span></a> can be applied without failing (see <a class='info' href='#nodeprep'>Appendix&nbsp;A<span> (</span><span class='info'>Nodeprep</span><span>)</span></a>).  Before comparing two localparts, an application MUST first ensure that the Nodeprep profile has been applied to each identifier (the profile need not be applied each time a comparison is made, as long as it has been applied before comparison).
</p>
<a name="addressing-resource"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.4"></a><h3>2.4.&nbsp;
Resourcepart</h3>

<p>The resourcepart of a JID is an optional identifier placed after the domainpart and separated from the latter by the '/' character.  A resourcepart can modify either a &lt;localpart@domainpart&gt; address or a mere &lt;domainpart&gt; address.  Typically a resourcepart uniquely identifies a specific connection (e.g., a device or location) or object (e.g., an occupant in a multi-user chat room) belonging to the entity associated with an XMPP localpart at a local domain.
</p>
<p>When an XMPP address does not include a resourcepart (i.e., when it is of the form &lt;domainpart&gt; or &lt;localpart@domainpart&gt;), it is referred to as a BARE JID.  When an XMPP address includes a resourcepart (i.e., when it is of the form &lt;domain/resource&gt; or &lt;localpart@domain/resource&gt;), is referred to as a FULL JID.
</p>
<p>A resourcepart MUST NOT be zero bytes in length and MUST NOT be more than 1023 bytes in length.
</p>
<p>A resourcepart MUST be formatted such that the Resourceprep profile of <a class='info' href='#STRINGPREP'>[STRINGPREP]<span> (</span><span class='info'>Hoffman, P. and M. Blanchet, &ldquo;Preparation of Internationalized Strings (&quot;stringprep&quot;),&rdquo; December&nbsp;2002.</span><span>)</span></a> can be applied without failing (see <a class='info' href='#resourceprep'>Appendix&nbsp;B<span> (</span><span class='info'>Resourceprep</span><span>)</span></a>).  Before comparing two resourceparts, an application MUST first ensure that the Resourceprep profile has been applied to each identifier (the profile need not be applied each time a comparison is made, as long as it has been applied before comparison).
</p>
<p></p>
<blockquote class="text">
<p>Note: For historical reasons, the term "resource identifier" is often used in XMPP to refer to the optional portion of an XMPP address that follows the domainpart and the "/" separator character; to help prevent confusion between an XMPP "resource identifier" and the meanings of "resource" and "identifier" provided in Section 1.1 of <a class='info' href='#URI'>[URI]<span> (</span><span class='info'>Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;Uniform Resource Identifier (URI): Generic Syntax,&rdquo; January&nbsp;2005.</span><span>)</span></a>, this specification uses the term "resourcepart" instead of "resource identifier" (as in RFC 3920).
</p>
</blockquote>

<p>XMPP entities SHOULD consider resourceparts to be opaque strings and SHOULD NOT impute meaning to any given resourcepart.  In particular:
</p>
<p>
        </p>
<ul class="text">
<li>Use of the '/' character as a separator between the domainpart and the resourcepart does not imply that XMPP addresses are hierarchical in the way that, say, HTTP addresses are hierarchical; thus for example an XMPP address of the form &lt;localpart@domain/foo/bar&gt; does not identify a resource "bar" that exists below a resource "foo" in a hierarchy of resources associated with the entity "localpart@domain".<br />
<br />

</li>
<li>The '@' character is allowed in the resourcepart, and is often used in the "nick" shown in XMPP chatrooms.  For example, the JID &lt;room@chat.example.com/user@host&gt; describes an entity who is an occupant of the room &lt;room@chat.example.com&gt; with an (asserted) nick of &lt;user@host&gt;.  However, chatroom services do not necessarily check such an asserted nick against the occupant's real JID.
</li>
</ul><p>
      
</p>
<a name="i18n"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Internationalization Considerations</h3>

<p>XMPP servers MUST, and XMPP clients SHOULD, support <a class='info' href='#IDNA2003'>[IDNA2003]<span> (</span><span class='info'>Faltstrom, P., Hoffman, P., and A. Costello, &ldquo;Internationalizing Domain Names in Applications (IDNA),&rdquo; March&nbsp;2003.</span><span>)</span></a> for domainparts (including the <a class='info' href='#NAMEPREP'>[NAMEPREP]<span> (</span><span class='info'>Hoffman, P. and M. Blanchet, &ldquo;Nameprep: A Stringprep Profile for Internationalized Domain Names (IDN),&rdquo; March&nbsp;2003.</span><span>)</span></a> profile of <a class='info' href='#STRINGPREP'>[STRINGPREP]<span> (</span><span class='info'>Hoffman, P. and M. Blanchet, &ldquo;Preparation of Internationalized Strings (&quot;stringprep&quot;),&rdquo; December&nbsp;2002.</span><span>)</span></a>), the <a class='info' href='#nodeprep'>Nodeprep<span> (</span><span class='info'>Nodeprep</span><span>)</span></a> profile of <a class='info' href='#STRINGPREP'>[STRINGPREP]<span> (</span><span class='info'>Hoffman, P. and M. Blanchet, &ldquo;Preparation of Internationalized Strings (&quot;stringprep&quot;),&rdquo; December&nbsp;2002.</span><span>)</span></a> for localparts, and the <a class='info' href='#resourceprep'>Resourceprep<span> (</span><span class='info'>Resourceprep</span><span>)</span></a> profile of <a class='info' href='#STRINGPREP'>[STRINGPREP]<span> (</span><span class='info'>Hoffman, P. and M. Blanchet, &ldquo;Preparation of Internationalized Strings (&quot;stringprep&quot;),&rdquo; December&nbsp;2002.</span><span>)</span></a> for resourceparts; this enables XMPP addresses to include a wide variety of characters outside the US-ASCII range.  Rules for enforcement of the XMPP address format are provided in <a class='info' href='#XMPP'>[XMPP]<span> (</span><span class='info'>Saint-Andre, P., &ldquo;Extensible Messaging and Presence Protocol (XMPP): Core,&rdquo; July&nbsp;2010.</span><span>)</span></a>.
</p>
<a name="security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Security Considerations</h3>

<a name="security-stringprep"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Reuse of Stringprep</h3>

<p>The security considerations described in <a class='info' href='#STRINGPREP'>[STRINGPREP]<span> (</span><span class='info'>Hoffman, P. and M. Blanchet, &ldquo;Preparation of Internationalized Strings (&quot;stringprep&quot;),&rdquo; December&nbsp;2002.</span><span>)</span></a> apply to the <a class='info' href='#nodeprep'>Nodeprep<span> (</span><span class='info'>Nodeprep</span><span>)</span></a> and <a class='info' href='#resourceprep'>Resourceprep<span> (</span><span class='info'>Resourceprep</span><span>)</span></a> profiles defined in this document for XMPP localparts and resourceparts.  The security considerations described in <a class='info' href='#STRINGPREP'>[STRINGPREP]<span> (</span><span class='info'>Hoffman, P. and M. Blanchet, &ldquo;Preparation of Internationalized Strings (&quot;stringprep&quot;),&rdquo; December&nbsp;2002.</span><span>)</span></a> and <a class='info' href='#NAMEPREP'>[NAMEPREP]<span> (</span><span class='info'>Hoffman, P. and M. Blanchet, &ldquo;Nameprep: A Stringprep Profile for Internationalized Domain Names (IDN),&rdquo; March&nbsp;2003.</span><span>)</span></a> apply to the Nameprep profile that is re-used here for XMPP domainparts.
</p>
<a name="security-unicode"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Reuse of Unicode</h3>

<p>The security considerations described in <a class='info' href='#UNICODE-SEC'>[UNICODE&#8209;SEC]<span> (</span><span class='info'>The Unicode Consortium, &ldquo;Unicode Technical Report #36: Unicode Security Considerations,&rdquo; 2008.</span><span>)</span></a> apply to the use of Unicode characters in XMPP addresses.
</p>
<a name="security-confusables"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
Confusable Characters</h3>

<p>The Unicode and ISO/IEC 10646 repertoires have many characters that look similar (so-called "confusable characters").  In many cases, users of security protocols might perform visual matching, such as when comparing the names of trusted third parties.  Because it is impossible to map similar-looking characters without a great deal of context (such as knowing the fonts used), stringprep does nothing to map similar-looking characters together, nor to prohibit some characters because they look like others.  Some specific suggestions about identification and handling of confusable characters appear in the Unicode Security Considerations <a class='info' href='#UNICODE-SEC'>[UNICODE&#8209;SEC]<span> (</span><span class='info'>The Unicode Consortium, &ldquo;Unicode Technical Report #36: Unicode Security Considerations,&rdquo; 2008.</span><span>)</span></a>.
</p>
<p>A localpart can be employed as one part of an entity's address in XMPP.  One common usage is as the username of an instant messaging user; another is as the name of a multi-user chat room; and many other kinds of entities could use localparts as part of their addresses.  The security of such services could be compromised based on different interpretations of the internationalized localpart; for example, a user entering a single internationalized localpart could access another user's account information, or a user could gain access to a hidden or otherwise restricted chat room or service.
</p>
<p>A resourcepart can be employed as one part of an entity's address in XMPP.  One common usage is as the name for an instant messaging user's connected resource; another is as the nickname of a user in a multi-user chat room; and many other kinds of entities could use resourceparts as part of their addresses.  The security of such services could be compromised based on different interpretations of the internationalized resourcepart; for example, a user could attempt to initiate multiple connections with the same name, or a user could send a message to someone other than the intended recipient in a multi-user chat room.
</p>
<a name="security-spoofing"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4"></a><h3>4.4.&nbsp;
Address Spoofing</h3>

<p>There are two forms of address spoofing: forging and mimicking.
</p>
<a name="security-forging"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4.1"></a><h3>4.4.1.&nbsp;
Address Forging</h3>

<p>In the context of XMPP technologies, address forging occurs when an entity is able to generate an XML stanza whose 'from' address does not correspond to the account credentials with which the entity authenticated onto the network (or an authorization identity provided during SASL negotiation).  For example, address forging occurs if an entity that authenticated as "juliet@im.example.com" is able to send XML stanzas from "nurse@im.example.com" or "romeo@example.net".
</p>
<p>Address forging is difficult in XMPP systems, given the requirement for sending servers to stamp 'from' addresses and for receiving servers to verify sending domains via server-to-server authentication (see <a class='info' href='#XMPP'>[XMPP]<span> (</span><span class='info'>Saint-Andre, P., &ldquo;Extensible Messaging and Presence Protocol (XMPP): Core,&rdquo; July&nbsp;2010.</span><span>)</span></a>).  However, address forging is not impossible, since a rogue server could forge JIDs at the sending domain by ignoring the stamping requirement.  Therefore, an entity outside the security perimeter of a particular server cannot reliably distinguish between bare JIDs of the form &lt;localpart@domainpart&gt; at that server and thus can authenticate only the domainpart of such JIDs with any level of assurance.  This specification does not define methods for discovering or counteracting such rogue servers.
</p>
<p>Furthermore, it is possible for an attacker to forge JIDs at other domains by means of a DNS poisoning attack if DNS security extensions <a class='info' href='#DNSSEC'>[DNSSEC]<span> (</span><span class='info'>Arends, R., Austein, R., Larson, M., Massey, D., and S. Rose, &ldquo;DNS Security Introduction and Requirements,&rdquo; March&nbsp;2005.</span><span>)</span></a> are not used.
</p>
<a name="security-mimicking"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4.2"></a><h3>4.4.2.&nbsp;
Address Mimicking</h3>

<p>Address mimicking occurs when an entity provides legitimate authentication credentials for and sends XML stanzas from an account whose JID appears to a human user to be the same as another JID.  For example, in some XMPP clients the address "paypa1@example.org" (spelled with the number one as the final character of the localpart) might appear to be the same as "paypal@example.org (spelled with the lower-case version of the letter "L"), especially on casual visual inspection; this phenomenon is sometimes called "typejacking".  A more sophisticated example of address mimicking might involve the use of characters from outside the US-ASCII range, such as the Cherokee characters U+13DA U+13A2 U+13B5 U+13AC U+13A2 U+13AC U+13D2 instead of the US-ASCII characters "STPETER".
</p>
<p>In some examples of address mimicking, it is unlikely that the average user could tell the difference between the real JID and the fake JID.  (Indeed, there is no way to distinguish with full certainty which is the fake JID and which is the real JID; in some communication contexts, the JID with Cherokee characters might be the real JID and the JID with US-ASCII characters might thus appear to be the fake JID.)  Because JIDs can contain almost any Unicode character, it can be relatively easy to mimic some JIDs in XMPP systems.  The possibility of address mimicking introduces security vulnerabilities of the kind that have also plagued the World Wide Web, specifically the phenomenon known as phishing.
</p>
<p>As noted in <a class='info' href='#IDNA-DEFS'>[IDNA&#8209;DEFS]<span> (</span><span class='info'>Klensin, J., &ldquo;Internationalized Domain Names for Applications (IDNA): Definitions and Document Framework,&rdquo; January&nbsp;2010.</span><span>)</span></a>, "there are no comprehensive technical solutions to the problems of confusable characters".  Mimicked JIDs that involve characters from only one character set or from the character set typically employed by a particular user are not easy to combat (e.g., the simple typejacking attack previously described, which relies on a surface similarity between the characters "1" and "l" in some presentations).  However, mimicked addresses that involve characters from more than one character set, or from a character set not typically employed by a particular user, can be mitigated somewhat through intelligent presentation.  In particular, every human user of an XMPP technology presumably has a preferred language (or, in some cases, a small set of preferred languages), which an XMPP application SHOULD gather either explicitly from the user or implicitly via the operating system of the user's device.  Furthermore, every language has a range (or a small set of ranges) of characters normally used to represent that language in textual form.  Therefore, an XMPP application SHOULD warn the user when presenting a JID that uses characters outside the normal range of the user's preferred language(s).  This recommendation is not intended to discourage communication across language communities; instead, it recognizes the existence of such language communities and encourages due caution when presenting unfamiliar character sets to human users.
</p>
<a name="iana"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
IANA Considerations</h3>

<p>The following sections update the registrations provided in <a class='info' href='#RFC3920'>[RFC3920]<span> (</span><span class='info'>Saint-Andre, P., Ed., &ldquo;Extensible Messaging and Presence Protocol (XMPP): Core,&rdquo; October&nbsp;2004.</span><span>)</span></a>.
</p>
<a name="iana-nodeprep"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Nodeprep Profile of Stringprep</h3>

<p>The Nodeprep profile of stringprep is defined under <a class='info' href='#nodeprep'>Nodeprep<span> (</span><span class='info'>Nodeprep</span><span>)</span></a>.  The IANA has registered Nodeprep in the stringprep profile registry.
</p>
<p>Name of this profile:
</p>
<p></p>
<blockquote class="text"><dl>
<dt></dt>
<dd>Nodeprep
</dd>
</dl></blockquote>

<p>RFC in which the profile is defined:
</p>
<p></p>
<blockquote class="text"><dl>
<dt></dt>
<dd>XXXX
</dd>
</dl></blockquote>

<p>Indicator whether or not this is the newest version of the profile:
</p>
<p></p>
<blockquote class="text"><dl>
<dt></dt>
<dd>This is the first version of Nodeprep
</dd>
</dl></blockquote>

<a name="iana-resourceprep"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Resourceprep Profile of Stringprep</h3>

<p>The Resourceprep profile of stringprep is defined under <a class='info' href='#resourceprep'>Resourceprep<span> (</span><span class='info'>Resourceprep</span><span>)</span></a>.  The IANA has registered Resourceprep in the stringprep profile registry.
</p>
<p>Name of this profile:
</p>
<p></p>
<blockquote class="text"><dl>
<dt></dt>
<dd>Resourceprep
</dd>
</dl></blockquote>

<p>RFC in which the profile is defined:
</p>
<p></p>
<blockquote class="text"><dl>
<dt></dt>
<dd>XXXX
</dd>
</dl></blockquote>

<p>Indicator whether or not this is the newest version of the profile:
</p>
<p></p>
<blockquote class="text"><dl>
<dt></dt>
<dd>This is the first version of Resourceprep
</dd>
</dl></blockquote>

<a name="conformance"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Conformance Requirements</h3>

<p>This section describes a protocol feature set that summarizes the conformance requirements of this specification.  This feature set is appropriate for use in software certification, interoperability testing, and implementation reports.  For each feature, this section provides the following information:
</p>
<p>
      </p>
<ul class="text">
<li>A human-readable name<br />
<br />

</li>
<li>An informational description<br />
<br />

</li>
<li>A reference to the particular section of this document that normatively defines the feature<br />
<br />

</li>
<li>Whether the feature applies to the Client role, the Server role, or both (where "N/A" signifies that the feature is not applicable to the specified role)<br />
<br />

</li>
<li>Whether the feature MUST or SHOULD be implemented, where the capitalized terms are to be understood as described in <a class='info' href='#KEYWORDS'>[KEYWORDS]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>
</li>
</ul><p>
    
</p>
<p>The feature set specified here attempts to adhere to the concepts and formats proposed by Larry Masinter within the IETF's NEWTRK Working Group in 2005, as captured in <a class='info' href='#INTEROP'>[INTEROP]<span> (</span><span class='info'>Masinter, L., &ldquo;Formalizing IETF Interoperability Reporting,&rdquo; October&nbsp;2005.</span><span>)</span></a>.  Although this feature set is more detailed than called for by <a class='info' href='#REPORTS'>[REPORTS]<span> (</span><span class='info'>Dusseault, L. and R. Sparks, &ldquo;Guidance on Interoperation and Implementation Reports for Advancement to Draft Standard,&rdquo; September&nbsp;2009.</span><span>)</span></a>, it provides a suitable basis for the generation of implementation reports to be submitted in support of advancing this specification from Proposed Standard to Draft Standard in accordance with <a class='info' href='#PROCESS'>[PROCESS]<span> (</span><span class='info'>Bradner, S., &ldquo;The Internet Standards Process -- Revision 3,&rdquo; October&nbsp;1996.</span><span>)</span></a>.
</p>
<p>
      </p>
<blockquote class="text"><dl>
<dt>Feature:</dt>
<dd>address-domain-length
</dd>
<dt>Description:</dt>
<dd>Ensure that the domainpart of an XMPP address is at least one byte in length and at most 1023 bytes in length.
</dd>
<dt>Section:</dt>
<dd><a class='info' href='#addressing-domain'>Section&nbsp;2.2<span> (</span><span class='info'>Domainpart</span><span>)</span></a>
</dd>
<dt>Roles:</dt>
<dd>Both MUST.
</dd>
</dl></blockquote><p>
    
</p>
<p>
      </p>
<blockquote class="text"><dl>
<dt>Feature:</dt>
<dd>address-domain-prep
</dd>
<dt>Description:</dt>
<dd>Ensure that the domainpart of an XMPP address conforms to the Nameprep profile of Stringprep.
</dd>
<dt>Section:</dt>
<dd><a class='info' href='#addressing-domain'>Section&nbsp;2.2<span> (</span><span class='info'>Domainpart</span><span>)</span></a>
</dd>
<dt>Roles:</dt>
<dd>Client SHOULD, Server MUST.
</dd>
</dl></blockquote><p>
    
</p>
<p>
      </p>
<blockquote class="text"><dl>
<dt>Feature:</dt>
<dd>address-localpart-length
</dd>
<dt>Description:</dt>
<dd>Ensure that the localpart of an XMPP address is at least one byte in length and at most 1023 bytes in length.
</dd>
<dt>Section:</dt>
<dd><a class='info' href='#addressing-localpart'>Section&nbsp;2.3<span> (</span><span class='info'>Localpart</span><span>)</span></a>
</dd>
<dt>Roles:</dt>
<dd>Both MUST.
</dd>
</dl></blockquote><p>
    
</p>
<p>
      </p>
<blockquote class="text"><dl>
<dt>Feature:</dt>
<dd>address-localpart-prep
</dd>
<dt>Description:</dt>
<dd>Ensure that the localpart of an XMPP address conforms to the Nodeprep profile of Stringprep.
</dd>
<dt>Section:</dt>
<dd><a class='info' href='#addressing-localpart'>Section&nbsp;2.3<span> (</span><span class='info'>Localpart</span><span>)</span></a>
</dd>
<dt>Roles:</dt>
<dd>Client SHOULD, Server MUST.
</dd>
</dl></blockquote><p>
    
</p>
<p>
      </p>
<blockquote class="text"><dl>
<dt>Feature:</dt>
<dd>address-resource-length
</dd>
<dt>Description:</dt>
<dd>Ensure that the resourcepart of an XMPP address is at least one byte in length and at most 1023 bytes in length.
</dd>
<dt>Section:</dt>
<dd><a class='info' href='#addressing-resource'>Section&nbsp;2.4<span> (</span><span class='info'>Resourcepart</span><span>)</span></a>
</dd>
<dt>Roles:</dt>
<dd>Both MUST.
</dd>
</dl></blockquote><p>
    
</p>
<p>
      </p>
<blockquote class="text"><dl>
<dt>Feature:</dt>
<dd>address-resource-prep
</dd>
<dt>Description:</dt>
<dd>Ensure that the resourcepart of an XMPP address conforms to the Resourceprep profile of Stringprep.
</dd>
<dt>Section:</dt>
<dd><a class='info' href='#addressing-domain'>Section&nbsp;2.2<span> (</span><span class='info'>Domainpart</span><span>)</span></a>
</dd>
<dt>Roles:</dt>
<dd>Client SHOULD, Server MUST.
</dd>
</dl></blockquote><p>
    
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>7.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="ABNF">[ABNF]</a></td>
<td class="author-text">Crocker, D. and P. Overell, &ldquo;<a href="http://tools.ietf.org/html/rfc5234">Augmented BNF for Syntax Specifications: ABNF</a>,&rdquo; STD&nbsp;68, RFC&nbsp;5234, January&nbsp;2008 (<a href="ftp://ftp.isi.edu/in-notes/rfc5234.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="IDNA2003">[IDNA2003]</a></td>
<td class="author-text">Faltstrom, P., Hoffman, P., and A. Costello, &ldquo;<a href="http://tools.ietf.org/html/rfc3490">Internationalizing Domain Names in Applications (IDNA)</a>,&rdquo; RFC&nbsp;3490, March&nbsp;2003 (<a href="ftp://ftp.isi.edu/in-notes/rfc3490.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="KEYWORDS">[KEYWORDS]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="ftp://ftp.isi.edu/in-notes/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="NAMEPREP">[NAMEPREP]</a></td>
<td class="author-text">Hoffman, P. and M. Blanchet, &ldquo;<a href="http://tools.ietf.org/html/rfc3491">Nameprep: A Stringprep Profile for Internationalized Domain Names (IDN)</a>,&rdquo; RFC&nbsp;3491, March&nbsp;2003 (<a href="ftp://ftp.isi.edu/in-notes/rfc3491.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="STRINGPREP">[STRINGPREP]</a></td>
<td class="author-text">Hoffman, P. and M. Blanchet, &ldquo;<a href="http://tools.ietf.org/html/rfc3454">Preparation of Internationalized Strings ("stringprep")</a>,&rdquo; RFC&nbsp;3454, December&nbsp;2002 (<a href="ftp://ftp.isi.edu/in-notes/rfc3454.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="UNICODE">[UNICODE]</a></td>
<td class="author-text">The Unicode Consortium, &ldquo;The Unicode Standard, Version 3.2.0,&rdquo; 2000.<p>
The Unicode Standard, Version 3.2.0 is defined by The Unicode Standard, Version 3.0 (Reading, MA, Addison-Wesley, 2000. ISBN 0-201-61633-5), as amended by the Unicode Standard Annex #27: Unicode 3.1 (http://www.unicode.org/reports/tr27/) and by the Unicode Standard Annex #28: Unicode 3.2 (http://www.unicode.org/reports/tr28/).
</p>
</td></tr>
<tr><td class="author-text" valign="top"><a name="UNICODE-SEC">[UNICODE-SEC]</a></td>
<td class="author-text">The Unicode Consortium, &ldquo;<a href="http://www.unicode.org/reports/tr36/">Unicode Technical Report #36: Unicode Security Considerations</a>,&rdquo; 2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="UTF-8">[UTF-8]</a></td>
<td class="author-text">Yergeau, F., &ldquo;<a href="http://tools.ietf.org/html/rfc3629">UTF-8, a transformation format of ISO 10646</a>,&rdquo; STD&nbsp;63, RFC&nbsp;3629, November&nbsp;2003 (<a href="ftp://ftp.isi.edu/in-notes/rfc3629.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="XMPP">[XMPP]</a></td>
<td class="author-text">Saint-Andre, P., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-xmpp-3920bis-10.txt">Extensible Messaging and Presence Protocol (XMPP): Core</a>,&rdquo; draft-ietf-xmpp-3920bis-10 (work in progress), July&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-xmpp-3920bis-10.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>7.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="DNS">[DNS]</a></td>
<td class="author-text">Mockapetris, P., &ldquo;<a href="http://tools.ietf.org/html/rfc1035">Domain names - implementation and specification</a>,&rdquo; STD&nbsp;13, RFC&nbsp;1035, November&nbsp;1987 (<a href="ftp://ftp.isi.edu/in-notes/rfc1035.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="DNSSEC">[DNSSEC]</a></td>
<td class="author-text">Arends, R., Austein, R., Larson, M., Massey, D., and S. Rose, &ldquo;<a href="http://tools.ietf.org/html/rfc4033">DNS Security Introduction and Requirements</a>,&rdquo; RFC&nbsp;4033, March&nbsp;2005 (<a href="ftp://ftp.isi.edu/in-notes/rfc4033.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="IDNA-DEFS">[IDNA-DEFS]</a></td>
<td class="author-text">Klensin, J., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-idnabis-defs-13.txt">Internationalized Domain Names for Applications (IDNA): Definitions and Document Framework</a>,&rdquo; draft-ietf-idnabis-defs-13 (work in progress), January&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-idnabis-defs-13.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="IDNA-PROTO">[IDNA-PROTO]</a></td>
<td class="author-text">Klensin, J., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-idnabis-protocol-18.txt">Internationalized Domain Names in Applications (IDNA): Protocol</a>,&rdquo; draft-ietf-idnabis-protocol-18 (work in progress), January&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-idnabis-protocol-18.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="INTEROP">[INTEROP]</a></td>
<td class="author-text">Masinter, L., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-newtrk-interop-reports-00.txt">Formalizing IETF Interoperability Reporting</a>,&rdquo; draft-ietf-newtrk-interop-reports-00 (work in progress), October&nbsp;2005 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-newtrk-interop-reports-00.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="IRI">[IRI]</a></td>
<td class="author-text">Duerst, M. and M. Suignard, &ldquo;<a href="http://tools.ietf.org/html/rfc3987">Internationalized Resource Identifiers (IRIs)</a>,&rdquo; RFC&nbsp;3987, January&nbsp;2005 (<a href="ftp://ftp.isi.edu/in-notes/rfc3987.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="PROCESS">[PROCESS]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2026">The Internet Standards Process -- Revision 3</a>,&rdquo; BCP&nbsp;9, RFC&nbsp;2026, October&nbsp;1996 (<a href="ftp://ftp.isi.edu/in-notes/rfc2026.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="PUNYCODE">[PUNYCODE]</a></td>
<td class="author-text">Costello, A., &ldquo;<a href="http://tools.ietf.org/html/rfc3492">Punycode: A Bootstring encoding of Unicode for Internationalized Domain Names in Applications (IDNA)</a>,&rdquo; RFC&nbsp;3492, March&nbsp;2003 (<a href="ftp://ftp.isi.edu/in-notes/rfc3492.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="REPORTS">[REPORTS]</a></td>
<td class="author-text">Dusseault, L. and R. Sparks, &ldquo;<a href="http://tools.ietf.org/html/rfc5657">Guidance on Interoperation and Implementation Reports for Advancement to Draft Standard</a>,&rdquo; BCP&nbsp;9, RFC&nbsp;5657, September&nbsp;2009 (<a href="ftp://ftp.isi.edu/in-notes/rfc5657.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3920">[RFC3920]</a></td>
<td class="author-text"><a href="mailto:stpeter@jabber.org">Saint-Andre, P., Ed.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc3920">Extensible Messaging and Presence Protocol (XMPP): Core</a>,&rdquo; RFC&nbsp;3920, October&nbsp;2004 (<a href="ftp://ftp.isi.edu/in-notes/rfc3920.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc3920.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc3920.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="URI">[URI]</a></td>
<td class="author-text"><a href="mailto:timbl@w3.org">Berners-Lee, T.</a>, <a href="mailto:fielding@gbiv.com">Fielding, R.</a>, and <a href="mailto:LMM@acm.org">L. Masinter</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc3986">Uniform Resource Identifier (URI): Generic Syntax</a>,&rdquo; STD&nbsp;66, RFC&nbsp;3986, January&nbsp;2005 (<a href="ftp://ftp.isi.edu/in-notes/rfc3986.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc3986.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc3986.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="XEP-0029">[XEP-0029]</a></td>
<td class="author-text"><a href="mailto:craigk@jabber.com">Kaes, C.</a>, &ldquo;<a href="http://xmpp.org/extensions/xep-0029.html">Definition of Jabber Identifiers (JIDs)</a>,&rdquo; XSF XEP&nbsp;0029, October&nbsp;2003.</td></tr>
<tr><td class="author-text" valign="top"><a name="XEP-0030">[XEP-0030]</a></td>
<td class="author-text"><a href="mailto:jhildebr@cisco.com">Hildebrand, J.</a>, <a href="mailto:">Millard, P.</a>, <a href="mailto:reatmon@jabber.org">Eatmon, R.</a>, and <a href="mailto:stpeter@jabber.org">P. Saint-Andre</a>, &ldquo;<a href="http://xmpp.org/extensions/xep-0030.html">Service Discovery</a>,&rdquo; XSF XEP&nbsp;0030, June&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="XEP-0045">[XEP-0045]</a></td>
<td class="author-text"><a href="mailto:stpeter@jabber.org">Saint-Andre, P.</a>, &ldquo;<a href="http://xmpp.org/extensions/xep-0045.html">Multi-User Chat</a>,&rdquo; XSF XEP&nbsp;0045, January&nbsp;in progress, last updated 2010.</td></tr>
<tr><td class="author-text" valign="top"><a name="XEP-0060">[XEP-0060]</a></td>
<td class="author-text"><a href="mailto:">Millard, P.</a>, <a href="mailto:stpeter@jabber.org">Saint-Andre, P.</a>, and <a href="mailto:ralphm@ik.nu">R. Meijer</a>, &ldquo;<a href="http://xmpp.org/extensions/xep-0060.html">Publish-Subscribe</a>,&rdquo; XSF XEP&nbsp;0060, September&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="XML">[XML]</a></td>
<td class="author-text">Paoli, J., Maler, E., Sperberg-McQueen, C., Yergeau, F., and T. Bray, &ldquo;<a href="http://www.w3.org/TR/2006/REC-xml-20060816">Extensible Markup Language (XML) 1.0 (Fourth Edition)</a>,&rdquo; World Wide Web Consortium Recommendation&nbsp;REC-xml-20060816, August&nbsp;2006 (<a href="http://www.w3.org/TR/2006/REC-xml-20060816">HTML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="XMPP-URI">[XMPP-URI]</a></td>
<td class="author-text">Saint-Andre, P., &ldquo;<a href="http://tools.ietf.org/html/rfc5122">Internationalized Resource Identifiers (IRIs) and Uniform Resource Identifiers (URIs) for the Extensible Messaging and Presence Protocol (XMPP)</a>,&rdquo; RFC&nbsp;5122, February&nbsp;2008 (<a href="ftp://ftp.isi.edu/in-notes/rfc5122.txt">TXT</a>).</td></tr>
</table>

<a name="nodeprep"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
Nodeprep</h3>

<a name="nodeprep-intro"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.1"></a><h3>A.1.&nbsp;
Introduction</h3>

<p>This appendix defines the "Nodeprep" profile of stringprep.  As such, it specifies processing rules that will enable users to enter internationalized localparts in the Extensible Messaging and Presence Protocol (XMPP) and have the highest chance of getting the content of the strings correct.  (An XMPP localpart is the optional portion of an XMPP address that precedes an XMPP domainpart and the '@' separator; it is often but not exclusively associated with an instant messaging username.)  These processing rules are intended only for XMPP localparts and are not intended for arbitrary text or any other aspect of an XMPP address.
</p>
<p>This profile defines the following, as required by <a class='info' href='#STRINGPREP'>[STRINGPREP]<span> (</span><span class='info'>Hoffman, P. and M. Blanchet, &ldquo;Preparation of Internationalized Strings (&quot;stringprep&quot;),&rdquo; December&nbsp;2002.</span><span>)</span></a>:
</p>
<p></p>
<ul class="text">
<li>The intended applicability of the profile: internationalized localparts within XMPP
</li>
<li>The character repertoire that is the input and output to stringprep: Unicode 3.2, specified in Section 2 of this Appendix
</li>
<li>The mappings used: specified in Section 3
</li>
<li>The Unicode normalization used: specified in Section 4
</li>
<li>The characters that are prohibited as output: specified in Section 5
</li>
<li>Bidirectional character handling: specified in Section 6
</li>
</ul>

<a name="nodeprep-character"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.2"></a><h3>A.2.&nbsp;
Character Repertoire</h3>

<p>This profile uses Unicode 3.2 with the list of unassigned code points being Table A.1, both defined in Appendix A of <a class='info' href='#STRINGPREP'>[STRINGPREP]<span> (</span><span class='info'>Hoffman, P. and M. Blanchet, &ldquo;Preparation of Internationalized Strings (&quot;stringprep&quot;),&rdquo; December&nbsp;2002.</span><span>)</span></a>.
</p>
<a name="nodeprep-mapping"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.3"></a><h3>A.3.&nbsp;
Mapping</h3>

<p>This profile specifies mapping using the following tables from <a class='info' href='#STRINGPREP'>[STRINGPREP]<span> (</span><span class='info'>Hoffman, P. and M. Blanchet, &ldquo;Preparation of Internationalized Strings (&quot;stringprep&quot;),&rdquo; December&nbsp;2002.</span><span>)</span></a>:
</p>
<p></p>
<blockquote class="text"><dl>
<dt></dt>
<dd>Table B.1
</dd>
<dt></dt>
<dd>Table B.2
</dd>
</dl></blockquote>

<a name="nodeprep-normalization"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.4"></a><h3>A.4.&nbsp;
Normalization</h3>

<p>This profile specifies the use of Unicode normalization form KC, as described in <a class='info' href='#STRINGPREP'>[STRINGPREP]<span> (</span><span class='info'>Hoffman, P. and M. Blanchet, &ldquo;Preparation of Internationalized Strings (&quot;stringprep&quot;),&rdquo; December&nbsp;2002.</span><span>)</span></a>.
</p>
<a name="nodeprep-prohibited"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.5"></a><h3>A.5.&nbsp;
Prohibited Output</h3>

<p>This profile specifies the prohibition of using the following tables from <a class='info' href='#STRINGPREP'>[STRINGPREP]<span> (</span><span class='info'>Hoffman, P. and M. Blanchet, &ldquo;Preparation of Internationalized Strings (&quot;stringprep&quot;),&rdquo; December&nbsp;2002.</span><span>)</span></a>.
</p>
<p></p>
<blockquote class="text"><dl>
<dt></dt>
<dd>Table C.1.1
</dd>
<dt></dt>
<dd>Table C.1.2
</dd>
<dt></dt>
<dd>Table C.2.1
</dd>
<dt></dt>
<dd>Table C.2.2
</dd>
<dt></dt>
<dd>Table C.3
</dd>
<dt></dt>
<dd>Table C.4
</dd>
<dt></dt>
<dd>Table C.5
</dd>
<dt></dt>
<dd>Table C.6
</dd>
<dt></dt>
<dd>Table C.7
</dd>
<dt></dt>
<dd>Table C.8
</dd>
<dt></dt>
<dd>Table C.9
</dd>
</dl></blockquote>

<p>In addition, the following additional Unicode characters are also prohibited:
</p>
<p>
          </p>
<blockquote class="text"><dl>
<dt></dt>
<dd>U+0022 (QUOTATION MARK), i.e., "
</dd>
<dt></dt>
<dd>U+0026 (AMPERSAND), i.e., &amp;
</dd>
<dt></dt>
<dd>U+0027 (APOSTROPHE), i.e., '
</dd>
<dt></dt>
<dd>U+002F (SOLIDUS), i.e., /
</dd>
<dt></dt>
<dd>U+003A (COLON), i.e., :
</dd>
<dt></dt>
<dd>U+003C (LESS-THAN SIGN), i.e., &lt;
</dd>
<dt></dt>
<dd>U+003E (GREATER-THAN SIGN), i.e., &gt;
</dd>
<dt></dt>
<dd>U+0040 (COMMERCIAL AT), i.e., @
</dd>
</dl></blockquote><p>
        
</p>
<a name="nodeprep-bidirectional"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.6"></a><h3>A.6.&nbsp;
Bidirectional Characters</h3>

<p>This profile specifies checking bidirectional strings, as described in Section 6 of <a class='info' href='#STRINGPREP'>[STRINGPREP]<span> (</span><span class='info'>Hoffman, P. and M. Blanchet, &ldquo;Preparation of Internationalized Strings (&quot;stringprep&quot;),&rdquo; December&nbsp;2002.</span><span>)</span></a>.
</p>
<a name="nodeprep-notes"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.7"></a><h3>A.7.&nbsp;
Notes</h3>

<p>Because the additional characters prohibited by Nodeprep are prohibited after normalization, an implementation MUST NOT enable a human user to input any Unicode code point whose decomposition includes those characters; such code points include but are not necessarily limited to the following (refer to <a class='info' href='#UNICODE'>[UNICODE]<span> (</span><span class='info'>The Unicode Consortium, &ldquo;The Unicode Standard, Version 3.2.0,&rdquo; 2000.</span><span>)</span></a> for complete information).
</p>
<p>
          </p>
<ul class="text">
<li>U+2100 (ACCOUNT OF)
</li>
<li>U+2101 (ADDRESSED TO THE SUBJECT)
</li>
<li>U+2105 (CARE OF)
</li>
<li>U+2106 (CADA UNA)
</li>
<li>U+226E (NOT LESS-THAN)
</li>
<li>U+226F (NOT GREATER-THAN)
</li>
<li>U+2A74 (DOUBLE COLON EQUAL)
</li>
<li>U+FE13 (SMALL COLON)
</li>
<li>U+FE60 (SMALL AMPERSAND)
</li>
<li>U+FE64 (SMALL LESS-THAN SIGN)
</li>
<li>U+FE65 (SMALL GREATER-THAN SIGN)
</li>
<li>U+FE6B (SMALL COMMERCIAL AT)
</li>
<li>U+FF02 (FULLWIDTH QUOTATION MARK)
</li>
<li>U+FF06 (FULLWIDTH AMPERSAND)
</li>
<li>U+FF07 (FULLWIDTH APOSTROPHE)
</li>
<li>U+FF0F (FULLWIDTH SOLIDUS)
</li>
<li>U+FF1A (FULLWIDTH COLON)
</li>
<li>U+FF1C (FULLWIDTH LESS-THAN SIGN)
</li>
<li>U+FF1E (FULLWIDTH GREATER-THAN SIGN)
</li>
<li>U+FF20 (FULLWIDTH COMMERCIAL AT)
</li>
</ul><p>
        
</p>
<a name="resourceprep"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B"></a><h3>Appendix B.&nbsp;
Resourceprep</h3>

<a name="resourceprep-introduction"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.1"></a><h3>B.1.&nbsp;
Introduction</h3>

<p>This appendix defines the "Resourceprep" profile of stringprep.  As such, it specifies processing rules that will enable users to enter internationalized resourceparts in the Extensible Messaging and Presence Protocol (XMPP) and have the highest chance of getting the content of the strings correct.  (An XMPP resourcepart is the optional portion of an XMPP address that follows an XMPP domainpart and the '/' separator.)  These processing rules are intended only for XMPP resourceparts and are not intended for arbitrary text or any other aspect of an XMPP address.
</p>
<p>This profile defines the following, as required by <a class='info' href='#STRINGPREP'>[STRINGPREP]<span> (</span><span class='info'>Hoffman, P. and M. Blanchet, &ldquo;Preparation of Internationalized Strings (&quot;stringprep&quot;),&rdquo; December&nbsp;2002.</span><span>)</span></a>:
</p>
<p></p>
<ul class="text">
<li>The intended applicability of the profile: internationalized resourceparts within XMPP
</li>
<li>The character repertoire that is the input and output to stringprep: Unicode 3.2, specified in Section 2 of this Appendix
</li>
<li>The mappings used: specified in Section 3
</li>
<li>The Unicode normalization used: specified in Section 4
</li>
<li>The characters that are prohibited as output: specified in Section 5
</li>
<li>Bidirectional character handling: specified in Section 6
</li>
</ul>

<a name="resourceprep-character"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.2"></a><h3>B.2.&nbsp;
Character Repertoire</h3>

<p>This profile uses Unicode 3.2 with the list of unassigned code points being Table A.1, both defined in Appendix A of <a class='info' href='#STRINGPREP'>[STRINGPREP]<span> (</span><span class='info'>Hoffman, P. and M. Blanchet, &ldquo;Preparation of Internationalized Strings (&quot;stringprep&quot;),&rdquo; December&nbsp;2002.</span><span>)</span></a>.
</p>
<a name="resourceprep-mapping"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.3"></a><h3>B.3.&nbsp;
Mapping</h3>

<p>This profile specifies mapping using the following tables from <a class='info' href='#STRINGPREP'>[STRINGPREP]<span> (</span><span class='info'>Hoffman, P. and M. Blanchet, &ldquo;Preparation of Internationalized Strings (&quot;stringprep&quot;),&rdquo; December&nbsp;2002.</span><span>)</span></a>:
</p>
<p></p>
<blockquote class="text"><dl>
<dt></dt>
<dd>Table B.1
</dd>
</dl></blockquote>

<a name="resourceprep-normalization"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.4"></a><h3>B.4.&nbsp;
Normalization</h3>

<p>This profile specifies the use of Unicode normalization form KC, as described in <a class='info' href='#STRINGPREP'>[STRINGPREP]<span> (</span><span class='info'>Hoffman, P. and M. Blanchet, &ldquo;Preparation of Internationalized Strings (&quot;stringprep&quot;),&rdquo; December&nbsp;2002.</span><span>)</span></a>.
</p>
<a name="resourceprep-prohibited"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.5"></a><h3>B.5.&nbsp;
Prohibited Output</h3>

<p>This profile specifies the prohibition of using the following tables from <a class='info' href='#STRINGPREP'>[STRINGPREP]<span> (</span><span class='info'>Hoffman, P. and M. Blanchet, &ldquo;Preparation of Internationalized Strings (&quot;stringprep&quot;),&rdquo; December&nbsp;2002.</span><span>)</span></a>.
</p>
<p></p>
<blockquote class="text"><dl>
<dt></dt>
<dd>Table C.1.2
</dd>
<dt></dt>
<dd>Table C.2.1
</dd>
<dt></dt>
<dd>Table C.2.2
</dd>
<dt></dt>
<dd>Table C.3
</dd>
<dt></dt>
<dd>Table C.4
</dd>
<dt></dt>
<dd>Table C.5
</dd>
<dt></dt>
<dd>Table C.6
</dd>
<dt></dt>
<dd>Table C.7
</dd>
<dt></dt>
<dd>Table C.8
</dd>
<dt></dt>
<dd>Table C.9
</dd>
</dl></blockquote>

<a name="resourceprep-bidirectional"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.6"></a><h3>B.6.&nbsp;
Bidirectional Characters</h3>

<p>This profile specifies checking bidirectional strings, as described in Section 6 of <a class='info' href='#STRINGPREP'>[STRINGPREP]<span> (</span><span class='info'>Hoffman, P. and M. Blanchet, &ldquo;Preparation of Internationalized Strings (&quot;stringprep&quot;),&rdquo; December&nbsp;2002.</span><span>)</span></a>.
</p>
<a name="diffs"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.C"></a><h3>Appendix C.&nbsp;
Differences From RFC 3920</h3>

<p>Based on consensus derived from implementation and deployment experience as well as formal interoperability testing, the following substantive modifications were made from RFC 3920.
</p>
<p>
        </p>
<ul class="text">
<li>Corrected the ABNF syntax to (1) ensure consistency with <a class='info' href='#URI'>[URI]<span> (</span><span class='info'>Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;Uniform Resource Identifier (URI): Generic Syntax,&rdquo; January&nbsp;2005.</span><span>)</span></a> and <a class='info' href='#IRI'>[IRI]<span> (</span><span class='info'>Duerst, M. and M. Suignard, &ldquo;Internationalized Resource Identifiers (IRIs),&rdquo; January&nbsp;2005.</span><span>)</span></a>, and (2) prevent zero-length localparts, domainparts, and resourceparts.
</li>
<li>To avoid confusion with the term "node" as used in <a class='info' href='#XEP-0030'>[XEP&#8209;0030]<span> (</span><span class='info'>Hildebrand, J., Millard, P., Eatmon, R., and P. Saint-Andre, &ldquo;Service Discovery,&rdquo; June&nbsp;2008.</span><span>)</span></a> and <a class='info' href='#XEP-0060'>[XEP&#8209;0060]<span> (</span><span class='info'>Millard, P., Saint-Andre, P., and R. Meijer, &ldquo;Publish-Subscribe,&rdquo; September&nbsp;2008.</span><span>)</span></a>, changed the term "node identifier" to "localpart" (but retained the name "Nodeprep" for backward compatibility).
</li>
<li>To avoid confusion with the terms "resource" and "identifier" as used in <a class='info' href='#URI'>[URI]<span> (</span><span class='info'>Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;Uniform Resource Identifier (URI): Generic Syntax,&rdquo; January&nbsp;2005.</span><span>)</span></a>, changed the term "resource identifier" to "resourcepart".
</li>
<li>Corrected the nameprep processing rules to require use of the UseSTD3ASCIIRules flag.
</li>
</ul><p>
      
</p>
<a name="copying"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.D"></a><h3>Appendix D.&nbsp;
Copying Conditions</h3>

<p>Regarding this entire document or any portion of it, the author makes no guarantees and is not responsible for any damage resulting from its use.  The author grants irrevocable permission to anyone to use, modify, and distribute it in any way that does not diminish the rights of anyone else to use, modify, and distribute it, provided that redistributed derivative works do not contain misleading author or version information.  Derivative works need not be licensed under similar terms.
</p>
<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Author's Address</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Peter Saint-Andre</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cisco Systems, Inc.</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">1899 Wyknoop Street, Suite 600</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Denver, CO  80202</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1-303-308-3282</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:psaintan@cisco.com">psaintan@cisco.com</a></td></tr>
</table>
</body></html>
