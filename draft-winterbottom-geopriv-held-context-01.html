<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>HELD Protocol Context Management Extensions</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="HELD Protocol Context Management Extensions">
<meta name="keywords" content="Internet-Draft">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Geopriv</td><td class="header">J. Winterbottom</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Andrew Corporation</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">H. Tschofenig</td></tr>
<tr><td class="header">Expires: April 8, 2008</td><td class="header">Nokia Siemens Networks</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">M. Thomson</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Andrew Corporation</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">October 06, 2007</td></tr>
</table></td></tr></table>
<h1><br />HELD Protocol Context Management Extensions<br />draft-winterbottom-geopriv-held-context-01.txt</h1>

<h3>Status of this Memo</h3>
<p>
By submitting this Internet-Draft,
each author represents that any applicable patent or other IPR claims of which
he or she is aware have been or will be disclosed,
and any of which he or she becomes aware will be disclosed,
in accordance with Section&nbsp;6 of BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on April 8, 2008.</p>

<h3>Abstract</h3>

<p>This document describes a protocol extension for the HTTP Enabled Location Delivery (HELD) protocol.
        It allows a Target to manage their
        location information on a Location Information Server (LIS) 
        through the application of constraints invoked by accessing a
        location URI. Constraints described in this memo restrict how often location can be accessed
        through a location URI, how long the URI is valid for, and the type of location information
        returned when a location URI is accessed. Extension points are also provided. 
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#intro">1.</a>&nbsp;
Introduction<br />
<a href="#terminology">2.</a>&nbsp;
Terminology<br />
<a href="#context">3.</a>&nbsp;
What is a Context?<br />
<a href="#policies">4.</a>&nbsp;
Constraints<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#useuri">4.1.</a>&nbsp;
Limited Use URIs<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#snapshoturi">4.2.</a>&nbsp;
Snapshot URIs<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#locationtypeuri">4.3.</a>&nbsp;
Location Type URIs<br />
<a href="#details">5.</a>&nbsp;
Protocol Details<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#createcontext">5.1.</a>&nbsp;
Create Context Message<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#updatecontext">5.2.</a>&nbsp;
Update Context Message<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#contextresponse">5.3.</a>&nbsp;
Context Response Message<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#contexterrors">5.4.</a>&nbsp;
Context Error Messages<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#idandurirules">5.5.</a>&nbsp;
Location URI and Context Identifier Generation Rules<br />
<a href="#anchor1">6.</a>&nbsp;
XML Schema<br />
<a href="#security-considerations">7.</a>&nbsp;
Security Considerations<br />
<a href="#iana">8.</a>&nbsp;
IANA Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">8.1.</a>&nbsp;
URN Sub-Namespace Registration for urn:ietf:params:xml:ns:geopriv:held:context<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">8.2.</a>&nbsp;
XML Schema Registration<br />
<a href="#anchor4">9.</a>&nbsp;
Acknowledgements<br />
<a href="#anchor5">Appendix&nbsp;A.</a>&nbsp;
Context Extensions<br />
<a href="#anchor6">Appendix&nbsp;B.</a>&nbsp;
HELD Compliance to IETF Location Configuration Protocol Location Reference Requirements<br />
<a href="#rfc.references1">10.</a>&nbsp;
Normative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
<a href="#rfc.copyright">&#167;</a>&nbsp;
Intellectual Property and Copyright Statements<br />
</p>
<br clear="all" />

<a name="intro"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>The HTTP Enabled Location Delivery (HELD) protocol specification <a class='info' href='#I-D.ietf-geopriv-http-location-delivery'>[I&#8209;D.ietf&#8209;geopriv&#8209;http&#8209;location&#8209;delivery]<span> (</span><span class='info'>Barnes, M., Winterbottom, J., Thomson, M., and B. Stark, &ldquo;HTTP Enabled Location Delivery (HELD),&rdquo; August&nbsp;2009.</span><span>)</span></a> provides a
        set of features that can be used by a Target to retrieve location information from a Location Information Server (LIS).
        The basic HELD specification does this in a more or less stateless manner, and when a
        location URI is retrieved the Target has no way of controlling 
        how the URI is used; a Location Recipient in pocession of the location URI can get the
        Target's location until the URI expires. This basic mechanism may be reasonable in a limited
        set of applications, but is unacceptable in a broader range of applications. This position
        is highlighted in <a class='info' href='#I-D.ietf-geopriv-lbyr-requirements'>[I&#8209;D.ietf&#8209;geopriv&#8209;lbyr&#8209;requirements]<span> (</span><span class='info'>Marshall, R., &ldquo;Requirements for a Location-by-Reference Mechanism,&rdquo; November&nbsp;2009.</span><span>)</span></a> which describes
        requirements for constraints relating to location URIs. This specification provides support for
        these requirements in HELD. 
</p>
<a name="terminology"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Terminology</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT",
        "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in
        <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>. 
</p>
<p>This document reuses the terms Target, as defined in <a class='info' href='#RFC3693'>[RFC3693]<span> (</span><span class='info'>Cuellar, J., Morris, J., Mulligan, D., Peterson, J., and J. Polk, &ldquo;Geopriv Requirements,&rdquo; February&nbsp;2004.</span><span>)</span></a>. 
</p>
<p> This document uses the term Location Information Server (LIS) as the node in the access
        network that provides location information about a Target. This term is also used in <a class='info' href='#I-D.ietf-geopriv-l7-lcp-ps'>[I&#8209;D.ietf&#8209;geopriv&#8209;l7&#8209;lcp&#8209;ps]<span> (</span><span class='info'>Tschofenig, H. and H. Schulzrinne, &ldquo;GEOPRIV Layer 7 Location Configuration Protocol; Problem Statement and Requirements,&rdquo; July&nbsp;2009.</span><span>)</span></a>. 
</p>
<a name="context"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
What is a Context?</h3>

<p>A Location URI points to a LIS that is able to provide the location of a specific Target.
        The LIS is able to map the URI to the location of the Target inside its administrative domain. 
        We call this mapping a &quot;context&quot;. In the basic HELD specification the context is implicitly 
        created with the request for a location URI in the locationRequest message. The Target
        has no control of the mapping from the URI to the Target's location. This
        specification provides a degree of control to the Target, allowing it to specify rules to
        the LIS on how a context should map a URI to location information. 
</p>
<p>A context expires when it reaches a certain age, at which time the mapping between the URI
        and the Target's location ceases. In the basic HELD specification the exiry time of the context is determined
        by the LIS when the Target requests a location URI. By allowing the Target to specify and
        change the life time of a context the Target is able to create URIs for limited periods, or to
        terminate URIs for which it longer wishes its location to be returned. This specification
        provides explicit support for this functionality.
</p>
<a name="policies"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Constraints</h3>

<p>Constraints restrict the ability of a Location Recipient to resolve a location URI to location 
        information. The constraints are selected by the Target and they are provided to the LIS
        that maintains them along with the context. A LIS, understanding this specification, receives 
        constraints provided by the Target, and returns a set of URIs influenced by the constraints.
      
</p>
<p> A single Target may want to place different contraints on different references
        and hence may have multiple contexts on the LIS.
        The constraints describe what actions the LIS MUST take when a URI associated with
        the context is accessed. This document describes three basic constraints that a Target can use in
        comination for the same context. Once set, these rules remain in force of the life of the
        context. 
</p>
<a name="useuri"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Limited Use URIs</h3>

<p>A limited use URI can only be accessed a fixed number of times to yield the location of
          the Target. Each time the URI is used to provide the location of the Target one usage is
          consumed. Once the limit is reached the URI no longer yields the location of the Target
          and the URI is deemed spent. 
</p>
<p>By setting the usage limit to 1, the Target is able to create a one-time-URI permitting a
          Location Recipient to obtain the Target's location only once. Setting the usage limit to
          something higher than 1 creates functionality analogous to a metro-ticket, where a Location
          Recipient in possession of the URI can access the Target's location many more times, but
          not exceeding the imposed limit. 
</p>
<p>Not setting a usage limit provides similar semantics to the URI in the base HELD
          specification, enabling a Location Recipient to continually obtain the Target's location
          until the URI expires due to age. 
</p>
<p> When an HTTP URI is assigned to a context, the limit is the number of times that the URI
          can be accessed before the LIS returns an error. In the case of SIP it is the number of
          NOTIFY messages that are sent prior to the LIS returning an error. Where a context
          supports both SIP and HTTP URIs it is the combination of URI accesses and NOTIFY messages
          that constitutes the usage value, each time the Target's location is provided constitutes
          a usage. 
</p>
<a name="snapshoturi"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Snapshot URIs</h3>

<p>A snapshot URI points to the location of the Target at a specific point in time, and no
          matter how many times the URI is accessed it will always yield the same location. This is
          useful if, for example, the Target does not want to be tracked. In this
          specification the location snapshot to which a snapshot URIs points is captured when the
          context is created on the LIS. 
</p>
<a name="locationtypeuri"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
Location Type URIs</h3>

<p>A location type URI controls the form of location that can be accessed; This may be
          geodetic, civic, or both. 
</p>
<a name="details"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Protocol Details</h3>

<p>This specification introduces four new HELD messages, create context (&lt;createContext&gt;), update
        context (&lt;updateContext&gt;), context response (&lt;contextResponse&gt;),
        and context error (&lt;contextError&gt;). A LIS that does not understand this
        specification is expected to return a HELD <em>unsupportedMessage</em>
        error code in a HELD error message. 
</p>
<p>The specification assumes that the LIS was discovered as part of the general HELD LIS
        discovery process. All messages are sent using the application/held+xml MIME type as defined
        in <a class='info' href='#I-D.ietf-geopriv-http-location-delivery'>[I&#8209;D.ietf&#8209;geopriv&#8209;http&#8209;location&#8209;delivery]<span> (</span><span class='info'>Barnes, M., Winterbottom, J., Thomson, M., and B. Stark, &ldquo;HTTP Enabled Location Delivery (HELD),&rdquo; August&nbsp;2009.</span><span>)</span></a>. 
</p>
<a name="createcontext"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Create Context Message</h3>

<p>The Target creates a context on the LIS using a create context message. The basic
          create context message supports the constraints described in <a class='info' href='#policies'>Section&nbsp;4<span> (</span><span class='info'>Constraints</span><span>)</span></a> and
          consist of three attributes and one element described below:
</p>
<p></p>
<ul class="text">
<li><tt>uses</tt>: an optional attribute instructing the LIS on how
              many times a URI may yield the location of the Target. This is a positive integer, and
              has a default value of <em>unlimited</em>. The LIS SHOULD support
              the Target specifying up to at least 100 uses.
</li>
<li><tt>snapshot</tt>: an optional attribute instructing the LIS to
              take a snapshot of the Target's location for use with the context. This a boolean
              value and has a default of <em>false</em> meaning that a snapshot
              is not taken, and the Target's location is determined each time the URI is accessed.
</li>
<li><tt>locationType</tt>: an optional attribute instructing the LIS
              on the form of location that URI MUST provide. This is an enumeration and may have a
              value of <em>geodetic</em>, <em>civic</em>, or
                <em>any</em>. If unspecified by the Target the LIS will use a
              value of <em>any</em>. If the Target specifies a location type that
              the LIS cannot provide, then the LIS MUST fail the context creation.
</li>
<li><tt>lifeTime</tt>: is a mandatory element that defines the maximum
              period in seconds that the LIS should keep the context for. The LIS MAY create the
              context with a shorter life time than was requested, but the life time MUST NOT be
              longer than was requested.
</li>
</ul><p>
        
</p>
<p>
          <br /><hr class="insert" />
<a name="ex1"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;hc:createContext
     xmlns:hc="urn:ietf:params:xml:ns:geopriv:held:context"
     uses="10"
     snapshot="false"
     locationType="any"&gt;
  &lt;hc:lifeTime&gt;7200&lt;/hc:lifeTime&gt;
&lt;/hc:createContext&gt;
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: createContext Example&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

        
</p>
<p><a class='info' href='#ex1'>Figure&nbsp;1<span> (</span><span class='info'>createContext Example</span><span>)</span></a> shows a create context message defining a context which: </p>
<ul class="text">
<li>may be accessed 10 times
</li>
<li>will determine the location of the Target each time it is accessed
</li>
<li>will return the location in either geodetic or civic form depending on the request
              tot he URI
</li>
<li>will be valid for 2 hours from the time of context creation
</li>
</ul><p>
        
</p>
<a name="updatecontext"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Update Context Message</h3>

<p>A Target can change the life time of a context using an update context message. As stated
          in <a class='info' href='#policies'>Section&nbsp;4<span> (</span><span class='info'>Constraints</span><span>)</span></a> the three attributes used in the context creation, <tt>uses</tt>, <tt>snapshot</tt>, and <tt>locationType</tt> cannot be changed once a context is created. 
</p>
<p> Since the Target may have more than one context on the LIS, the Target needs to identify
          the context to be updated. It does this by including a context identifier that is provided
          to it by the LIS when the context is created. 
</p>
<p>
          <br /><hr class="insert" />
<a name="ex2"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;hc:updateContext
    xmlns:hc="urn:ietf:params:xml:ns:geopriv:held:context"
    hc:id="uhvuhdbnuiehudbnvcujevuijeijcvij3"&gt;
  &lt;lifeTime&gt;3600&lt;/lifeTime&gt;
&lt;/hc:updateContext&gt;
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: updateContext Life Time Change Example&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

        
</p>
<p>When a Target includes a life time element in an update context message, the LIS needs to
          calculate a new context expiry time. The LIS MUST do this by adding the new life time
          value to the current time on the LIS. This mechanism means the Target can terminate a
          context at any time. It does this by updating the context with a life time of 0, which
          results in the LIS setting the context expiry time to the present. The LIS MAY also
          terminate a context if the life time value is set to less than 10 seconds. 
</p>
<p>
          <br /><hr class="insert" />
<a name="ex3"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;hc:updateContext
    xmlns:hc="urn:ietf:params:xml:ns:geopriv:held:context"
    hc:id="uhvuhdbnuiehudbnvcujevuijeijcvij3"&gt;
  &lt;lifeTime&gt;0&lt;/lifeTime&gt;
&lt;/lhc:updateContext&gt;
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3: updateContext Termination Example&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

        
</p>
<a name="contextresponse"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
Context Response Message</h3>

<p>The LIS informs the Target about the outcome of context operations through the context
          response message. The LIS MUST always send a context response message to a Target in response
          to a create context or update context message when the outcome was successful. 
          The context response message contains a <tt>code</tt> attribute indicating 
          the performed operation, and the other attributes and elements indicating the state of the context. 
</p>
<p>The <tt>code</tt> attribute is an enumerated type and has one of the
          following values: </p>
<ul class="text">
<li><em>created</em>: The context was successfully created.
</li>
<li><em>destroyed</em>: The context was destroyed.
</li>
<li><em>updated</em>: The context was successfully updated.
</li>
</ul><p>
        
</p>
<p>The following list details the other attributes are may be returned in a context response
          message. </p>
<blockquote class="text"><dl>
<dt>id:</dt>
<dd>The identifier allocated to the context by the LIS. This identifier is
              unique in the scope of the LIS. The Target MUST keep this secret and MUST included it
              in all update requests. The LIS MUST return and <tt>id</tt> in all
              context response messages. 
</dd>
<dt>uses:</dt>
<dd>The number of times that the context will yield the Target's
              location. The LIS MAY report either the original value, or the number of remaining
              uses. The LIS MUST report this value for all responses pertaining to a known and valid
              context. This value MAY be ommitted when indicating that a context has been destroyed. 
</dd>
<dt>snapshot:</dt>
<dd>The value of the snapshot attribute in the context. The LIS MUST
              report this value for all responses pertaining to a known and valid context. This
              value MAY be ommitted when indicating that a context has been destroyed. 
</dd>
<dt>locationType:</dt>
<dd>The type of location information that can be acquired
              through URIs addressing the context. The LIS MUST report this value for all responses
              pertaining to a known and valid context. This value MAY be omitted when indicating
              that a context has been destroyed. 
</dd>
<dt>expiry:</dt>
<dd>The time at which the context will expire. After this time, all
              location URIs that reference this context no longer work. The LIS MUST report this
              value for all responses pertaining to a known context. This attribute MUST be provided
              even when a <tt>code</tt> value of <em>destroyed</em> is included in the context repsonse message. 
</dd>
</dl></blockquote><p>
        
</p>
<p>In addition to the above attributes, the LIS also provides a set of URIs that can used to
          access the Target's location with the surety that the context constraints will be
          applied. A URI set is returned whenever a context is successfully created on the LIS, and
          this set remains unchanged for the lifetime of the context. A context response message
          sent in reply to the create context message in <a class='info' href='#ex1'>Figure&nbsp;1<span> (</span><span class='info'>createContext Example</span><span>)</span></a> might look like <a class='info' href='#ex4'>Figure&nbsp;4<span> (</span><span class='info'>contextResponse Example</span><span>)</span></a>. 
</p>
<p>
          <br /><hr class="insert" />
<a name="ex4"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;hc:contextResponse
          xmlns:hc="urn:ietf:params:xml:ns:geopriv:held:context"
          code="created"
          id="uhvuhdbnuiehudbnvcujevuijeijcvij4"
          uses="10"
          snapshot="false"
          locationType="any"
          expires="2007-11-01T13:30:00"&gt;
    &lt;hc:locationUriSet&gt;
      &lt;hc:locationURI&gt;
         https://lis.example.com:9768/357yc6s64ceyoiuy5ax3o4
      &lt;/hc:locationURI&gt;
      &lt;hc:locationURI&gt;
         sips:357yc6s64ceyoiuy5ax3o4@lis.example.com:9769
      &lt;/hc:locationURI&gt;
    &lt;/hc:locationUriSet&gt;
&lt;/hc:contextResponse&gt;
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;4: contextResponse Example&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

        
</p>
<a name="contexterrors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.4"></a><h3>5.4.&nbsp;
Context Error Messages</h3>

<p>When the LIS unable to perform the requested context operation it need to inform the
          Target of this. It does this using a context error message. The context error message
          consists of a <tt>errorCode</tt> and an optional <tt>message</tt> attribute. The code indicates what went wrong, the message is
          human-readable text that may provide additional information on what occurred. 
</p>
<p>The <tt>errorCode</tt> attribute is an enumerated type and has one of
          the following values: 
</p>
<p></p>
<ul class="text">
<li><em>badMessage</em>: The LIS was unable to understand the content
              of the message.
</li>
<li><em>unknownContext</em>: The LIS was unable to find the context.
</li>
<li><em>failed</em>: The LIS was unable to perform the requested
              operation.
</li>
</ul><p> A Target implementing this specification MUST accept a HELD error message as a
          valid response to a create context or update context message. 
</p>
<p>
          <br /><hr class="insert" />
<a name="ex5"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;hc:contextError
          xmlns:hc="urn:ietf:params:xml:ns:geopriv:held:context"
          code="failed"
          message="unable to update context"&gt;
&lt;/hc:contextError&gt;
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;5: contextError With Message Example&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

        
</p>
<a name="idandurirules"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.5"></a><h3>5.5.&nbsp;
Location URI and Context Identifier Generation Rules</h3>

<p>A primary aim of this specification is to provide a Target a means to cancel a location
          URI so that it can no longer be used to provide its location. To achieve this, a location
          URI generated as part of a context creation needs to be unique with in the scope of the
          LIS, and identify only that context. If the Target destroys a context and subsequently
          creates a new one, URIs associated the new context MUST be different from those generated
          for the previous context. <a class='info' href='#I-D.ietf-geopriv-http-location-delivery'>[I&#8209;D.ietf&#8209;geopriv&#8209;http&#8209;location&#8209;delivery]<span> (</span><span class='info'>Barnes, M., Winterbottom, J., Thomson, M., and B. Stark, &ldquo;HTTP Enabled Location Delivery (HELD),&rdquo; August&nbsp;2009.</span><span>)</span></a> and
            <a class='info' href='#I-D.ietf-geopriv-lbyr-requirements'>[I&#8209;D.ietf&#8209;geopriv&#8209;lbyr&#8209;requirements]<span> (</span><span class='info'>Marshall, R., &ldquo;Requirements for a Location-by-Reference Mechanism,&rdquo; November&nbsp;2009.</span><span>)</span></a> provide guideance on the creation
          and desired characteristcs of a location URI. 
</p>
<p>The context identifier provided by the LIS to the Target in the context response message
          MUST be unique and MUST be different from the identifier provided in any location URI.
          This latter constraint ensures that possession of a location URI does not automatically
          provide access and control over the internals of the context. 
</p>
<p>A context identifier is generated by a LIS to uniquely identify a context. It MUST NOT be
          feasible for a third-party to easily determine a context identifier by knowing the
          identity of the Target. This implies that internal correlation (using a hash-table or
          similar) is the only method that the LIS can use to associate a context id with a
          particular Target. 
</p>
<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
XML Schema</h3>

<p>
        <br /><hr class="insert" />
<a name="schema"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;?xml version="1.0"?&gt;
&lt;xs:schema
    targetNamespace="urn:ietf:params:xml:ns:geopriv:held:context"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:heldCx="urn:ietf:params:xml:ns:geopriv:held:context"
    xmlns:xml="http://www.w3.org/XML/1998/namespace"
    elementFormDefault="qualified" attributeFormDefault="unqualified"&gt;

  &lt;xs:simpleType name="locationType"&gt;
    &lt;xs:restriction base="xs:token"&gt;
      &lt;xs:enumeration value="any"/&gt;
      &lt;xs:enumeration value="civic"/&gt;
      &lt;xs:enumeration value="geodetic"/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;

  &lt;xs:simpleType name="codeType"&gt;
    &lt;xs:restriction base="xs:token"&gt;
      &lt;xs:enumeration value="created"/&gt;
      &lt;xs:enumeration value="updated"/&gt;
      &lt;xs:enumeration value="destroyed"/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;

  &lt;xs:simpleType name="errorCodeType"&gt;
    &lt;xs:restriction base="xs:token"&gt;
      &lt;xs:enumeration value="badMessage"/&gt;
      &lt;xs:enumeration value="unknownContext"/&gt;
      &lt;xs:enumeration value="failed"/&gt;
    &lt;/xs:restriction&gt;
  &lt;/xs:simpleType&gt;

  &lt;xs:simpleType name="useType"&gt;
    &lt;xs:union&gt;
      &lt;xs:simpleType&gt;
        &lt;xs:restriction base="xs:token"&gt;
          &lt;xs;enumeration value="unlimited"/&gt;
        &lt;/xs:restriction&gt;
      &lt;/xs:simpleType&gt;
      &lt;xs:positiveInteger/&gt;
    &lt;/xs:union&gt;
  &lt;/xs:simpleType&gt;

  &lt;xs:complexType name="createContextMsg"&gt;
    &lt;xs:complexContent&gt;
      &lt;xs:restriction base="xs:anyType"&gt;
        &lt;xs:sequence&gt;
          &lt;xs:element name="lifeTime" type="xs:nonNegativeInteger "
                  minOccurs="1" maxOccurs="1"/&gt;
          &lt;xs:any namespace="##other" processContents="lax"
                  minOccurs="0" maxOccurs="unbounded"/&gt;
        &lt;/xs:sequence&gt;
        &lt;xs:attribute name="uses" type="heldCx:useType"
                      use="optional" default="unlimited"/&gt;
        &lt;xs:attribute name="snapshot" type="xs:boolean"
                      use="optional" default="false"/&gt;
        &lt;xs:attribute name="locationType" type="heldCx:locationType"
                      use="optional" default="any"/&gt;
        &lt;xs:anyAttribute namespace="##any" processContents="lax"/&gt;
      &lt;/xs:restriction&gt;
    &lt;/xs:complexContent&gt;
  &lt;/xs:complexType&gt;

  &lt;xs:complexType name="uriSetType"&gt;
       &lt;xs:complexContent&gt;
          &lt;xs:sequence&gt;
            &lt;xs:element name="locationURI" type="xs:anyURI"
                        maxOccurs="unbounded"/&gt;
          &lt;/xs:sequence&gt;
       &lt;/xs:complexContent&gt;
   &lt;/xs:complexType&gt;

  &lt;xs:complexType name="contextResponseMsg"&gt;
    &lt;xs:complexContent&gt;
      &lt;xs:restriction base="xs:anyType"&gt;
        &lt;xs:sequence&gt;
          &lt;xs:element name="locationUriSet" type="heldCx:uriSetType"
                  minOccurs="1" maxOccurs="1"/&gt;
          &lt;xs:any namespace="##other" processContents="lax"
                  minOccurs="0" maxOccurs="unbounded"/&gt;
        &lt;/xs:sequence&gt;
        &lt;xs:attribute name="id" type="xs:token"
                      use="required"/&gt;
        &lt;xs:attribute name="expires" type="xs:dateTime"
                      use="required"/&gt;
        &lt;xs:attribute name="uses" type="xs:positiveInteger"
                      use="optional"/&gt;
        &lt;xs:attribute name="snapshot" type="xs:boolean"
                      use="optional"/&gt;
        &lt;xs:attribute name="locationType" type="heldCx:locationType"
                      use="optional"/&gt;
        &lt;xs:attribute name="code" type="heldCx:codeType"
                      use="required"/&gt;
        &lt;xs:anyAttribute namespace="##any" processContents="lax"/&gt;
      &lt;/xs:restriction&gt;
    &lt;/xs:complexContent&gt;
  &lt;/xs:complexType&gt;

 &lt;xs:complexType name="updateContextMsg"&gt;
    &lt;xs:complexContent&gt;
      &lt;xs:restriction base="heldCx:"&gt;
        &lt;xs:sequence&gt;
          &lt;xs:element name="lifeTime" type="xs:nonNegativeInteger "
                  minOccurs="0" maxOccurs="1"/&gt;
          &lt;xs:any namespace="##other" processContents="lax"
                  minOccurs="0" maxOccurs="unbounded"/&gt;
        &lt;/xs:sequence&gt;
        &lt;xs:attribute name="id" type="xs:token"
                      use="required"/&gt;
        &lt;xs:anyAttribute namespace="##any" processContents="lax"/&gt;
      &lt;/xs:restriction&gt;
    &lt;/xs:complexContent&gt;
  &lt;/xs:complexType&gt;

&lt;xs:complexType name="contextErrorMsg"&gt;
    &lt;xs:complexContent&gt;
      &lt;xs:restriction base="xs:anyType"&gt;
        &lt;xs:sequence/&gt;
        &lt;xs:attribute name="errorCode" type="heldCx:errorCodeType"
                      use="required"/&gt;
        &lt;xs:attribute name="message" type="xs:token"
                      use="optional"/&gt;
        &lt;xs:anyAttribute namespace="##any" processContents="lax"/&gt;
      &lt;/xs:restriction&gt;
    &lt;/xs:complexContent&gt;
  &lt;/xs:complexType&gt;

  &lt;xs:element name="createContext" type="heldCx:createContextMsg"/&gt;
  &lt;xs:element name="updateContext" type="heldCx:updateContextMsg"/&gt;
  &lt;xs:element name="contextResponse" type="heldCx:contextResponseMsg"/&gt;
  &lt;xs:element name="contextError" type="heldCx:contextErrorMsg"/&gt;

&lt;/xs:schema&gt;
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;6: Context Management Schema&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

      
</p>
<a name="security-considerations"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Security Considerations</h3>

<p>There are several security concerns associated with the details in this specification. The
        first is to do with the nature of the sensitivity of any data passed from the Target to the
        LIS for inclusion in a context. The second is the ability of the LIS to contain the number
        of contexts that it will permit to exist for a given Target address. Finally, there is a
        threat of Targets performing DoS attacks on the LIS by trying to create large numbers of
        short-lived contexts that result in the LIS expending resources in message processing. 
</p>
<p>HELD <a class='info' href='#I-D.ietf-geopriv-http-location-delivery'>[I&#8209;D.ietf&#8209;geopriv&#8209;http&#8209;location&#8209;delivery]<span> (</span><span class='info'>Barnes, M., Winterbottom, J., Thomson, M., and B. Stark, &ldquo;HTTP Enabled Location Delivery (HELD),&rdquo; August&nbsp;2009.</span><span>)</span></a> mandates the use of TLS for
        exchanges between a Target and the LIS. This is deemed adequate to provide confidentiality
        to any contextual data in transit. The LIS implementation and the operator of the LIS need
        to take sufficient steps to ensure that active contextual data on the LIS is not readily
        available to anyone other than the Target. The Target MUST NOT provide any information to
        the LIS that it does not want the LIS to know or be able to use in some capacity associated
        with determination or providing of the Target's location.
</p>
<p>It is quite conceivable that a LIS will be required to provide location to Targets residing
        behind a NAT; a DSL home router with 5 PCs attached is a good example this situation. In
        this case it is reasonable for each device to create its own context on the LIS, and for the
        LIS to treat each context individually even though the LIS cannot make any other distinction
        between the end hosts; that is, they share a common IP address/identity from the LIS
        perspective. 
</p>
<p>Given the constraints that can be added to a context and the way that a Target might want
        to manage expiry separately, a Target may use multiple contexts as a way to isolate
        applications from each other. For instance, a Target can create a context for each
        application so that it can revoke access to its location information for each without
        affecting other applications&#039; access. This environment, however, opens the LIS to a
        type of denial of service attack through an overload of contexts. It is RECOMMENDED that an
        implementer of this specification include mechanisms to restrict to the maximum number of
        contexts that can be created on the LIS by an individual Target. 
</p>
<p>Using short-term location URIs in a carefully controlled manner may obviate the need for
        individual location authorization policies on the LIS. This leads to reduced LIS complexity
        and the amount of private information that the Target need share with the LIS. This
        specification provides the ability for a Target to cancel a location URI which extends the
        Target's ability to enforce its entitlement to privacy. Using the mechanisms described in
        this memo a target can create URIs with short validity periods; this restricts how long a
        third-party is able to obtain the location of the Target while still allowing the Target the
        convenience of using a location reference. 
</p>
<p>The generation of context identifiers by the LIS is a critical component to supporting the
        functionality described in this memo. The LIS MUST follow the rules described in <a class='info' href='#idandurirules'>Section&nbsp;5.5<span> (</span><span class='info'>Location URI and Context Identifier Generation Rules</span><span>)</span></a> for generating context identifiers. 
</p>
<a name="iana"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
IANA Considerations</h3>

<p>This document registers the schema and associated namespace with IANA. 
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.1"></a><h3>8.1.&nbsp;
URN Sub-Namespace Registration for urn:ietf:params:xml:ns:geopriv:held:context</h3>

<p>This section registers a new XML namespace, <tt>urn:ietf:params:xml:ns:geopriv:held:context</tt>, as per the guidelines in <a class='info' href='#RFC3688'>[RFC3688]<span> (</span><span class='info'>Mealling, M., &ldquo;The IETF XML Registry,&rdquo; January&nbsp;2004.</span><span>)</span></a>. </p>
<blockquote class="text">
<p>URI: urn:ietf:params:xml:ns:geopriv:held:context
</p>
<p>Registrant Contact: IETF, GEOPRIV working group, (geopriv@ietf.org), James
              Winterbottom (james.winterbottom@andrew.com).
</p>
<p>XML: </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      BEGIN
        &lt;?xml version="1.0"?&gt;
        &lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;
        &lt;html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"&gt;
          &lt;head&gt;
            &lt;title&gt;HELD Context Management Messages&lt;/title&gt;
          &lt;/head&gt;
          &lt;body&gt;
            &lt;h1&gt;Namespace for HELD Context Management Messages&lt;/h1&gt;
            &lt;h2&gt;urn:ietf:params:xml:ns:geopriv:held:context&lt;/h2&gt;
[[NOTE TO IANA/RFC-EDITOR: Please update RFC URL and replace XXXX
    with the RFC number for this specification.]]
            &lt;p&gt;See &lt;a href="[[RFC URL]]"&gt;RFCXXXX&lt;/a&gt;.&lt;/p&gt;
          &lt;/body&gt;
        &lt;/html&gt;
      END
</pre></div><p>

            
</p>
</blockquote><p>
        
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.2"></a><h3>8.2.&nbsp;
XML Schema Registration</h3>

<p>This section registers an XML schema as per the guidelines in <a class='info' href='#RFC3688'>[RFC3688]<span> (</span><span class='info'>Mealling, M., &ldquo;The IETF XML Registry,&rdquo; January&nbsp;2004.</span><span>)</span></a>.
            </p>
<blockquote class="text"><dl>
<dt>URI:</dt>
<dd>urn:ietf:params:xml:schema:geopriv:held:context
</dd>
<dt>Registrant Contact:</dt>
<dd>IETF, GEOPRIV working group, (geopriv@ietf.org), James
              Winterbottom (james.winterbottom@andrew.com).
</dd>
<dt>Schema:</dt>
<dd>The XML for this schema can be found as the entirety of <a class='info' href='#schema'>Figure&nbsp;6<span> (</span><span class='info'>Context Management Schema</span><span>)</span></a> of this document. 
</dd>
</dl></blockquote><p>
        
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Acknowledgements</h3>

<p>Thanks to Adam Muhlbauer and Neil Justusson for their comments on the pre-version of this
        draft. 
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
Context Extensions</h3>

<p>A context contains specific information about a Target and is stored on the LIS. As with other protocols 
        it is necessary to consider extensibility. 
        When defining context data extensions it is necessary to consider how they will be used;
        this includes not only how to provide the information from the Target to the LIS, but also
        acceptance and error indications from the LIS back to the Target. For example, a context may
        be created with several extensions included, how does the LIS indicate that extensions 1 and
        3 were successful but that extension 2 had a problem in its formatting? Guidelines for
        designing context extensions that provide functionality are described below. 
</p>
<p>Two basic types of context data extension are envisioned. The first consist of data
        provided by the Target to be consumed by the LIS; for example information pertaining to
        PIDF-LO construction, usage-rules, and authorization policies. The second type of data
        consists of a two way exchange between the Target and the LIS; for example exchanging
        location determination capabilities. Extensibility to the context scheme is to allow
        additional elements to be added to the context easily. The general idea is shown in <a class='info' href='#fig1'>Figure&nbsp;7<span> (</span><span class='info'>Create Context with Extensions</span><span>)</span></a>. 
</p>
<p>
        <br /><hr class="insert" />
<a name="fig1"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;hc:createContext
          xmlns:hc="urn:ietf:params:xml:ns:geopriv:held:context"&gt;
    &lt;lifeTime&gt;7200&lt;/lifeTime&gt;
    &lt;ex1:extension-1
          xmlns:ex1="urn:ietf:params:xml:ns:geopriv:held:ex1"&gt;
      &lt;ex1:value&gt;7200&lt;/ex1:value&gt;
    &lt;/ex1:extension-1&gt;
    &lt;extension-2 xmlns="urn:ietf:params:xml:ns:geopriv:held:ex2"/&gt;
    &lt;extension-3 xmlns="urn:ietf:params:xml:ns:geopriv:held:ex3"/&gt;
    .
    .
    .
    &lt;extension-N xmlns="urn:ietf:params:xml:ns:geopriv:held:exN"/&gt;
&lt;/hc:createContext&gt;
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;7: Create Context with Extensions&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

      
</p>
<p>When defining a context data extension it is necessary to ensure that the LIS can provide
        an adequate response to the Target indicating acceptance or rejection of the data provided.
        This may be an explicit OK or FAIL message within the extension namespace, it may be an
        attribute associated with part of a larger data exchange, or it may result in the LIS
        failing to create the context at all. Regardless, it is mandatory for a context data
        extension to provide an indication of success or failure. 
</p>
<p>
        <br /><hr class="insert" />
<a name="fig2"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;hc:contextResponse
          xmlns:hc="urn:ietf:params:xml:ns:geopriv:held:context"
          code="created"
          id="uhvuhdbnuiehudbnvcujevuijeijcvij"
          uses="unlimited"
          snapshot="false"
          locType="any"
          expires="2007-08-01T13:00:00"&gt;
    &lt;locationUriSet&gt;
      &lt;locationURI&gt;
         https://ls.example.com:9768/357yc6s64ceyoiuy5ax3o
      &lt;/locationURI&gt;
      &lt;locationURI&gt;
         sips:357yc6s64ceyoiuy5ax3o@ls.example.com:9769
      &lt;/locationURI&gt;
    &lt;/locationUriSet&gt;
    &lt;ex1:extension-1 xmlns:ex1="urn:ietf:params:xml:ns:geopriv:held:ex1"
                  ex1:response="OK"/&gt;
    &lt;ex2:extension-2 xmlns:ex2="urn:ietf:params:xml:ns:geopriv:held:ex2"
                  ex2:response="OK"/&gt;

    &lt;ex3:extension-3
         xmlns:ex3="urn:ietf:params:xml:ns:geopriv:held:ex3"&gt;
      &lt;datum-3&gt;data&lt;/datum-3&gt;
      &lt;stuff&gt;guff in here for extension&lt;/stuff&gt;
    &lt;/ex3:extension-3&gt;
&lt;/hc:contextRresponse&gt;
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;8: LIS response to createContext&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

      
</p>
<p>When defining information to be included in a context data extension consideration should
        be given to how that data can be removed from the context. In some cases it may be necessary
        to void the context on the LIS in order to remove information, but this SHOULD be treated as
        a last resort and not used as the primary mechanism for removing data from the context. 
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B"></a><h3>Appendix B.&nbsp;
HELD Compliance to IETF Location Configuration Protocol Location Reference Requirements</h3>

<p>This section describes how HELD and this specification comply to the LCP location reference
        requirements stipulated in <a class='info' href='#I-D.ietf-geopriv-lbyr-requirements'>[I&#8209;D.ietf&#8209;geopriv&#8209;lbyr&#8209;requirements]<span> (</span><span class='info'>Marshall, R., &ldquo;Requirements for a Location-by-Reference Mechanism,&rdquo; November&nbsp;2009.</span><span>)</span></a>. 
</p>
<p>High-level requirements for a location configuration protocol. </p>
<blockquote class="text"><dl>
<dt>C1.</dt>
<dd><tt>Location URI support - LCP: The configuration protocol MUST support
              a location reference in URI form.</tt>
            <br />
<br />
 COMPLY. HELD only provides location references in URI form.
              <br />
<br />

          
</dd>
<dt>C2.</dt>
<dd><tt>Location URI expiration: The LCP MUST support the ability to
              specify to the server, the length of time that a location URI will be valid.</tt>
            <br />
<br />
 COMPLY. HELD with the context management extensions described
            in this document provide the Target the ability to specify expiry times for location
            URIs. <br />
<br />

          
</dd>
<dt>C3.</dt>
<dd><tt>Location URI cancellation: The LCP MUST support the ability to
              request a cancellation of a specific location URI.</tt>
            <br />
<br />
 COMPLY. HELD with the context management extensions described
            in this document provide the Target the ability to void location URIs when required.
              <br />
<br />

          
</dd>
<dt>C4.</dt>
<dd><tt>Random Generated: The location URI MUST be hard to guess, i.e., it
              MUST contain a cryptographically random component.</tt>
            <br />
<br />
 COMPLY. The HELD specification and this document provide
            specific guidance on the security surrounding location URI generation. <br />
<br />

          
</dd>
<dt>C5.</dt>
<dd><tt>Identity Protection - LCP: The location URI MUST NOT contain any
              information that identifies the user, device or address of record within the URI form.</tt>
            <br />
<br />
 COMPLY. The HELD specification and this document provide
            specific guidance on the anonymity of the Target with regards to the generation of
            location URIs. <br />
<br />

          
</dd>
<dt>C6.</dt>
<dd><tt>Reuse flag default: The LCP MUST support the default condition of a
              requested location URI being repeatedly reused.</tt>
            <br />
<br />
 COMPLY. HELD with the context management extensions described
            in this document provide the Target the ability to specify how many times a location URI
            may yield the location of Target. <br />
<br />

          
</dd>
<dt>C7.</dt>
<dd><tt>One-time-use: The LCP MUST support the ability for the client to
              request a 'one-time-use' location URI (e.g., via a reuse flag setting).</tt>
            <br />
<br />
 COMPLY. HELD with the context management extensions described
            in this document provide the Target the ability to specify how many times a location URI
            may yield the location of Target. This value may be set to 1 to create a one-time URI.
              <br />
<br />

          
</dd>
</dl></blockquote><p>
      
</p>
<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>10.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3693">[RFC3693]</a></td>
<td class="author-text">Cuellar, J., Morris, J., Mulligan, D., Peterson, J., and J. Polk, &ldquo;<a href="http://tools.ietf.org/html/rfc3693">Geopriv Requirements</a>,&rdquo; RFC&nbsp;3693, February&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3693.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3688">[RFC3688]</a></td>
<td class="author-text">Mealling, M., &ldquo;<a href="http://tools.ietf.org/html/rfc3688">The IETF XML Registry</a>,&rdquo; BCP&nbsp;81, RFC&nbsp;3688, January&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3688.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-geopriv-http-location-delivery">[I-D.ietf-geopriv-http-location-delivery]</a></td>
<td class="author-text">Barnes, M., Winterbottom, J., Thomson, M., and B. Stark, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-geopriv-http-location-delivery-16.txt">HTTP Enabled Location Delivery (HELD)</a>,&rdquo; draft-ietf-geopriv-http-location-delivery-16 (work in progress), August&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-geopriv-http-location-delivery-16.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-geopriv-l7-lcp-ps">[I-D.ietf-geopriv-l7-lcp-ps]</a></td>
<td class="author-text">Tschofenig, H. and H. Schulzrinne, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-geopriv-l7-lcp-ps-10.txt">GEOPRIV Layer 7 Location Configuration Protocol; Problem Statement and Requirements</a>,&rdquo; draft-ietf-geopriv-l7-lcp-ps-10 (work in progress), July&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-geopriv-l7-lcp-ps-10.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-geopriv-lbyr-requirements">[I-D.ietf-geopriv-lbyr-requirements]</a></td>
<td class="author-text">Marshall, R., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-geopriv-lbyr-requirements-09.txt">Requirements for a Location-by-Reference Mechanism</a>,&rdquo; draft-ietf-geopriv-lbyr-requirements-09 (work in progress), November&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-geopriv-lbyr-requirements-09.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">James Winterbottom</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Andrew Corporation</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">PO Box U40</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">University of Wollongong, NSW  2500</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">AU</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+61 242 212938</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:james.winterbottom@andrew.com">james.winterbottom@andrew.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.andrew.com/products/geometrix">http://www.andrew.com/products/geometrix</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Hannes Tschofenig</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia Siemens Networks</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Otto-Hahn-Ring 6</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Munich, Bavaria  81739</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Germany</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+49 89 636 40390</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:Hannes.Tschofenig@nsn.com">Hannes.Tschofenig@nsn.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.tschofenig.com">http://www.tschofenig.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Martin Thomson</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Andrew Corporation</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">PO Box U40</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">University of Wollongong, NSW  2500</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">AU</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+61 242 212915</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:martin.thomson@andrew.com">martin.thomson@andrew.com</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.andrew.com/products/geometrix">http://www.andrew.com/products/geometrix</a></td></tr>
</table>
<a name="rfc.copyright"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Full Copyright Statement</h3>
<p class='copyright'>
Copyright &copy; The IETF Trust (2007).</p>
<p class='copyright'>
This document is subject to the rights,
licenses and restrictions contained in BCP&nbsp;78,
and except as set forth therein,
the authors retain all their rights.</p>
<p class='copyright'>
This document and the information contained herein are provided
on an &ldquo;AS IS&rdquo; basis and THE CONTRIBUTOR,
THE ORGANIZATION HE/SHE REPRESENTS
OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE.</p>
<h3>Intellectual Property</h3>
<p class='copyright'>
The IETF takes no position regarding the validity or scope of any
Intellectual Property Rights or other rights that might be claimed
to pertain to the implementation or use of the technology
described in this document or the extent to which any license
under such rights might or might not be available; nor does it
represent that it has made any independent effort to identify any
such rights.
Information on the procedures with respect to
rights in RFC documents can be found in BCP&nbsp;78 and BCP&nbsp;79.</p>
<p class='copyright'>
Copies of IPR disclosures made to the IETF Secretariat and any
assurances of licenses to be made available,
or the result of an attempt made to obtain a general license or
permission for the use of such proprietary rights by implementers or
users of this specification can be obtained from the IETF on-line IPR
repository at <a href='http://www.ietf.org/ipr'>http://www.ietf.org/ipr</a>.</p>
<p class='copyright'>
The IETF invites any interested party to bring to its attention
any copyrights,
patents or patent applications,
or other
proprietary rights that may cover technology that may be required
to implement this standard.
Please address the information to the IETF at <a href='mailto:ietf-ipr@ietf.org'>ietf-ipr@ietf.org</a>.</p>
</body></html>
