



IETF Fax working group                                    Graham Klyne
Request for comments: nnnn                    5GM/Content Technologies
Category: Work-in-progress                              Lloyd McIntyre
                                                     Xerox Corporation
                                                          October 1998
                                                   Expires: April 1999


               Content feature schema for Internet fax
                <draft-ietf-fax-feature-schema-01.txt>


Status of this memo

  This document is an Internet-Draft.  Internet-Drafts are working
  documents of the Internet Engineering Task Force (IETF), its areas,
  and its working groups.  Note that other groups may also distribute
  working documents as Internet-Drafts.

  Internet-Drafts are draft documents valid for a maximum of six
  months and may be updated, replaced, or obsoleted by other
  documents at any time.  It is inappropriate to use Internet-Drafts
  as reference material or to cite them other than as ``work in
  progress''.

  To view the entire list of current Internet-Drafts, please check
  the "1id-abstracts.txt" listing contained in the Internet-Drafts
  Shadow Directories on ftp.is.co.za (Africa), ftp.nordu.net
  (Northern Europe), ftp.nis.garr.it (Southern Europe), munnari.oz.au
  (Pacific Rim), ftp.ietf.org (US East Coast), or ftp.isi.edu (US
  West Coast).

  [[INTENDED STATUS:  This document specifies an Internet standards
  track protocol for the Internet community, and requests discussion
  and suggestions for improvements.  Please refer to the current
  edition of the "Internet Official Protocol Standards" (STD 1) for
  the standardization state and status of this protocol.
  Distribution of this memo is unlimited.]]

Copyright Notice

  Copyright (C) The Internet Society 1998.  All Rights Reserved.

Abstract

  This document defines a content feature schema that is a profile of
  the media feature registration mechanisms [1,2,3] for use in
  performing capability identification between extended Internet fax
  systems [5].




Klyne/McIntyre             Work-in-progress                   [Page 1]

RFC nnnn       Content feature schema for Internet fax    October 1998


  This document does not describe any specific mechanisms for
  communicating capability information, but does presume that any
  such mechanisms will transfer textual values.  It specifies a
  textual format to be used for describing Internet fax capability
  information.

Table of contents

  1. Introduction ............................................2
     1.1 Organization of this document                        3
     1.2 Terminology and document conventions                 3
     1.3 Revision history                                     3
     1.4 Unfinished business                                  4
  2. Fax feature schema syntax ...............................4
  3. Internet fax feature tags ...............................4
     3.1 Image Size                                           5
     3.2 Resolution                                           5
     3.3 Media type                                           6
     3.4 Paper Size                                           6
     3.5 Colour and greyscale                                 6
     3.6 Coding                                               7
     3.7 Colour model                                         8
     3.8 Preferred units                                      8
  4. Examples ................................................8
     4.1 Simple mode Internet fax system                      8
     4.2 High-end black-and-white Internet fax system         9
     4.3 Grey-scale Internet fax system                       9
     4.4 Full-colour Internet fax system (JPEG)               9
     4.5 Full-colour Internet fax system (MRC)                9
     4.6 Sender and receiver feature matching                 9
  5. Security considerations .................................12
     5.1 Threats                                              12
  6. Full copyright statement ................................12
  7. Acknowledgements ........................................13
  8. References ..............................................13
  9. Authors' addresses ......................................15
  Appendix A: Feature registrations ..........................15


1. Introduction

  This document defines a content feature schema that is a profile of
  the media feature registration mechanisms [1,2,3] for use in
  performing capability identification between extended Internet fax
  systems [5].

  This document does not describe any specific mechanisms for
  communicating capability information, but does presume that any
  such mechanisms will transfer textual values.  It specifies a
  textual format to be used for describing Internet fax capability
  information.


Klyne/McIntyre             Work-in-progress                   [Page 2]

RFC nnnn       Content feature schema for Internet fax    October 1998


  The range of capabilities that can be indicated are based on those
  covered by the TIFF file format for Internet fax [7] and Group 3
  facsimile [6].  A companion document [4] describes the relationship
  and mapping between this schema and Group 3 fax capabilities.

1.1 Organization of this document

  Section 2 specifies the overall syntax for fax feature descriptions
  by reference to the media feature registration and syntax documents
  [1,2].

  Section 3 enumerates the feature tags that are to be recognized and
  processed by extended Internet fax systems, according to their
  capabilities.

  Appendix A contains additional feature tag registrations for media
  features that are specific to fax and for which no applicable
  registration already exists.  These are presented in the form
  prescribed by the media feature registration procedure [1].

1.2 Terminology and document conventions

  The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
  "SHOULD", SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
  document are to be interpreted as described in [RFC2119].

  The term "eifax system" is used to describe any software, device or
  combination of these that conforms to the specification "Extended
  Facsimile Using Internet Mail" [5].

       NOTE:  Comments like this provide additional nonessential
       information about the rationale behind this document.
       Such information is not needed for building a conformant
       implementation, but may help those who wish to understand
       the design in greater depth.

1.3 Revision history

  00a  28-Sep-1998  Initial draft.

  01a  12-Oct-1998  Incorporated review comments.  Described feature
                    tag for differential x/y resolution ratio.











Klyne/McIntyre             Work-in-progress                   [Page 3]

RFC nnnn       Content feature schema for Internet fax    October 1998


1.4 Unfinished business

  -  Review terminology (especially eifax).

  -  Finalize feature set

  -  Supply examples

  -  Supply new feature registrations

2. Fax feature schema syntax

  The syntax for the fax feature schema is described by "A syntax for
  describing media feature sets" [2].  This in turn calls upon media
  feature tags that may be registered according to the procedure
  described in "Media Feature Tag Registration Procedure" [1].

       NOTE:  Media feature registration provides a base
       vocabulary of features that correspond to media handling
       capabilities.  The feature set syntax provides a
       mechanism and format for combining these to describe
       combinations of features that may be handled by eifax
       systems.

3. Internet fax feature tags

  This section enumerates and briefly describes a number of feature
  tags that are defined for use with Extended Internet Fax (eifax)
  systems and applications.  These tags may be used also by other
  systems and applications that support corresponding capabilities.

  The feature tags presented below are those that an eifax system is
  expected to recognize its ability or non-ability to handle.

  Definitive descriptions of feature tags are indicated by reference
  to their registration per the 'conneg' registration procedure [1]
  (some of which are appended to this document)

       NOTE:  The presence of a feature tag in this list does
       not mean that an eifax system must have that capability;
       rather, it must recognize the feature tag and deal with
       it according to the capabilities that it does have.

       Further, an eifax system is not prevented from
       recognizing and offering additional feature tags.  The
       list below is intended to provide a minimum vocabulary
       that all eifax systems can use in a consistent fashion.

       If an unrecognized or unused feature tag is received, the
       feature set matching rule (described in [2]) operates so
       that tag is effectively ignored.


Klyne/McIntyre             Work-in-progress                   [Page 4]

RFC nnnn       Content feature schema for Internet fax    October 1998


3.1 Image Size

  Feature tag name    Legal values
  ----------------    ------------
  pix-x               <Integer> (>0)
  pix-y               <Integer> (>0)

  Reference: "Media Features for Display, Print, and Fax" [3].

  [[[GK: The use of pixels as a measure of fax image size is
  currently under discussion: should we use pixels or some physical
  unit of measure?   In my opinion, we should use physical dimensions
  rather than pixels, because when a device (like a fax) offers a
  range of resolutions, these are not generally reflected in the
  physical image size, though they would affect the pixel size.
  Thus, using physical dimensions, it is not necessary to specify a
  different image size with each resolution option.]]]

3.2 Resolution

  Feature tag name    Legal values
  ----------------    ------------
  dpi                 <Integer> (>0)
  dpi-xyratio         <Rational> (>0)

  Reference: "Media Features for Display, Print, and Fax" [3], and
  this document appendix A.

  If 'dpi-xyratio' is present and not equal to 1 then the horizontal
  resolution (x-axis) is indicated by the 'dpi' feature value, and
  the vertical resolution (y-axis) is the value of 'dpi' divided by
  'dpi-xyratio'.

  For example, the basic Group 3 fax resolution of 200*100dpi might
  be indicated as:

     (& (dpi=200) (dpi-xyratio=200/100) )

  [[[Handling of differential x- and y- resolutions is currently
  under discussion.]]]













Klyne/McIntyre             Work-in-progress                   [Page 5]

RFC nnnn       Content feature schema for Internet fax    October 1998


3.3 Media type

  Feature tag name    Legal values
  ----------------    ------------
  ua-media            screen
                      screen-paged
                      stationery
                      transparency
                      envelope
                      envelope-plain
                      continuous

  Reference: "Media Features for Display, Print, and Fax" [3].

       NOTE: Where the recipient indicates specific support for
       hard copy or soft copy media type, a sender of colour
       image data may wish to adjust the colour components (e.g.
       per the related rules of ITU recommendation T.42 [9]) to
       improve rendered image quality on that medium.

3.4 Paper Size

  Feature tag name    Legal values
  ----------------    ------------
  paper-size          A4
                      A3
                      B4
                      letter
                      legal

  Reference: "Media Features for Display, Print, and Fax" [3].

3.5 Colour and greyscale

  Feature tag name    Legal values
  ----------------    ------------
  grey                <Integer>
                      (Typically 2,16,256,65536,16777216)
  color               <Integer>
                      (Typically 16,256,65536,16777216)

  Reference: "Media Features for Display, Print, and Fax" [3].

       NOTE: a bi-level (i.e. black-and-white only) fax image or
       capability is indicated by the feature value 'grey=2'.
       This is indicates the rendering capabilities of a
       recipient or requirements of a document, and does not of
       itself indicate a coding scheme.





Klyne/McIntyre             Work-in-progress                   [Page 6]

RFC nnnn       Content feature schema for Internet fax    October 1998


3.6 Coding

  Feature tag name    Legal values
  ----------------    ------------
  image-coding        MH
                      MR
                      MMR
                      JBIG-2-Level    (bi-level)
                      JBIG-M-Level    (multi-level)
                      JPEG
                      MRC
  strip-size          <Integer>
  image-interleave    Strip
                      Plane
  color-subsampling   <Boolean>
  MRC-level           <Integer> [1-7]

  The 'strip-size' feature may be used with JBIG and MRC coding, and
  indicates the maximum number of scan lines in an image strip.  For
  JBIG receivers the legal constraints are:

     (strip-size=128)
     (strip-size>=0)

  The later being equivalent to no restriction.  For MRC coded image
  receivers, the legal constraints are:

     (strip-size=[0..256])
     (strip-size>=0)

  For a receiver that can handle both JBIG and MRC images, the strip-
  size constraints may need to be related to the image coding, as in
  this example:

     (| (& (image-coding=JBIG-2-LEVEL) (strip-size=128) )
        (& (image-coding=JBIG-M-LEVEL) (strip-size=128) )
        (& (image-coding=MRC)          (strip-size=[0..256]) )

  Where it may vary, the actual maximum strip size for a given file
  is indicated in the image data.

  The 'MRC-level' feature is used only if the 'image-coding' feature
  includes MRC.

  Reference: this document, appendix A.

  [[[GK: color subsampling is proposed to be changed to a token, thus
  allowing subsampling capabilities other than 4:1:1.]]]





Klyne/McIntyre             Work-in-progress                   [Page 7]

RFC nnnn       Content feature schema for Internet fax    October 1998


3.7 Colour model

  Feature tag name    Legal values
  ----------------    ------------
  color-space         CIELAB    (per T.42 [9])
                      Palette   (per T.43 [10])
  custom-illuminant   <Boolean>
  custom-gamut        <Boolean>

  Reference: this document, appendix A.

3.8 Preferred units

  Feature tag name    Legal values
  ----------------    ------------
  preferred-unit      metric
                      inch

       NOTE: this feature is really provided for interactions
       that involve legacy fax machines.  TIFF images used for
       Internet fax (per RFC 2301 [7]) always contain inch-based
       measurements.

       The value of this feature does not affect in any way the
       units used for expressing other feature values; e.g.
       resolution is always measured in dots per inch.

  Reference: this document, appendix A.

4. Examples

  Some of the examples contain comments introduced by '--...'.  These
  are not part of the allowed capability description syntax.  They
  are included here to explain some of the constructs used.

  <<<Suggested example subjects follow>>

4.1 Simple mode Internet fax system

  This example describes the capabilities of a typical simple mode
  Internet fax system.  Note that TIFF application S is required to
  be supported by such a system.

     (& ( dpi=200 )
        ( dpi-xyratio=[200/100,200/200] )
        ( grey=2 )
        ( paper-size=A4 )
        ( image-coding=MH )
        ( ua-media=stationery ) )




Klyne/McIntyre             Work-in-progress                   [Page 8]

RFC nnnn       Content feature schema for Internet fax    October 1998


4.2 High-end black-and-white Internet fax system

  This would include support for B/W JBIG and be equivalent to what
  is sometimes called "Super G3", except that Internet fax
  functionality would be added.

     (& (| (& (dpi=200) (dpi-xyratio=200/100) )    -- 200*100
           (& (dpi=200) (dpi-xyratio=1) )          -- 200*200
           (& (dpi=300) (dpi-xyratio=1) )          -- 300*300
           (& (dpi=400) (dpi-xyratio=1) ) )        -- 400*400
        ( grey=2 )
        ( paper-size=[A4,B4] )
        ( image-coding=[MH,MR,MMR,JBIG-2-LEVEL] ) )

4.3 Grey-scale Internet fax system

  This is the previous example extended to handle grey scale multi-
  level images.  In keeping with Group 3 fax, this capability
  requires equal x- and y- resolutions for a multi-level image.

     (& (| (& (dpi=200) (dpi-xyratio=200/100) (grey=2) )
           (& (dpi=200) (dpi-xyratio=1) )
           (& (dpi=300) (dpi-xyratio=1) )
           (& (dpi=400) (dpi-xyratio=1) ) )
        ( grey<=256 )
        ( paper-size=[A4,B4] )
        ( image-coding=[MH,MR,MMR,JBIG-2-LEVEL,JPEG,JBIG-M-LEVEL] ) )

4.4 Full-colour Internet fax system (JPEG)

  <<<to be provided>>>

4.5 Full-colour Internet fax system (MRC)

  <<<to be provided>>>

4.6 Sender and receiver feature matching

  This example considers sending a document to a high-end black-and-
  white fax system with the following capabilities:

     (& (| (& (dpi=200) (dpi-xyratio=200/100) )    -- 200*100
           (& (dpi=200) (dpi-xyratio=1) )          -- 200*200
           (& (dpi=300) (dpi-xyratio=1) )          -- 300*300
           (& (dpi=400) (dpi-xyratio=1) ) )        -- 400*400
        ( grey=2 ) (color=0)
        (| (& (paper-size=A4) (ua-media=[stationery,transparency]) )
           (& (paper-size=B4) (ua-media=continuous) ) )
        ( image-coding=[MH,MR,JBIG-2-LEVEL] ) )




Klyne/McIntyre             Work-in-progress                   [Page 9]

RFC nnnn       Content feature schema for Internet fax    October 1998


  Turning to the document itself, assume it is available to the
  sender in three possible formats, A4 high resolution, B4 low
  resolution and A4 high resolution colour, described by:

     (& ( dpi=300 ) ( dpi-xyratio=1 )
        ( grey=2 )
        ( paper-size=A4 )
        ( image-coding=[MMR,JBIG-2-LEVEL] ) )

     (& ( dpi=200 ) (dpi-xyratio=200/100)
        ( grey=2 )
        ( paper-size=B4 )
        ( image-coding=[MH,MR] ) )

     (& ( dpi=300 ) ( dpi-xyratio=1 )
        ( color<=256 )
        ( paper-size=A4 )
        ( image-coding=JPEG ) )

  These three image formats can be combined into a composite
  capability statement by a logical-OR operation (to describe format-
  1 OR format-2 OR format-3):

     (| (& ( dpi=300 ) ( dpi-xyratio=1 )
           ( grey=2 )
           ( paper-size=A4 )
           ( image-coding=[MMR,JBIG-2-LEVEL] ) )
        (& ( dpi=200 ) (dpi-xyratio=200/100)
           ( grey=2 )
           ( paper-size=B4 )
           ( image-coding=[MH,MR] ) )
        (& ( dpi=300 ) ( dpi-xyratio=1 )
           ( color=42 )
           ( paper-size=A4 )
           ( image-coding=JPEG ) ) )

  This could be simplified, but there is little gain in doing so at
  this point.















Klyne/McIntyre             Work-in-progress                  [Page 10]

RFC nnnn       Content feature schema for Internet fax    October 1998


  The composite document description can be matched with the receiver
  capability description, according to the rules in [2], to yield the
  result:

     (| (& ( dpi=300 ) ( dpi-xyratio=1 )
           ( grey=2 )
           ( paper-size=A4 )
           ( ua-media=[stationery,transparency] )
           ( image-coding=JBIG-2-LEVEL ) )
        (& ( dpi=200 ) (dpi-xyratio=200/100)
           ( grey=2 )
           ( paper-size=B4 )
           ( ua-media=continuous )
           ( image-coding=[MH,MR] ) ) )

  Points to note about the feature matching process:

  o  The colour document option is eliminated because the receiver
     cannot handle either colour (indicated by '(color=0)') or JPEG
     coding.

  o  The high resolution version of the document with '(dpi=300)' must
     be send using '(image-coding=JBIG-2-LEVEL)' because this is the
     only available coding of the image data that the receiver can use
     for high resolution documents.

  o  The low-resolution version of the document can be sent with
     either MH or MR coding as the receiver can deal with either of
     these for low resolution documents.

  o  The high resolution variant of the document is available only for
     A4, so that is the paper-size used in that case.  Similarly the
     low resolution version is sent for B4 paper.

  o  Even though the sender may not understand the 'ua-media' feature
     tag, and does not mention it, the matching rules preserve the
     constraint that the B4 document is rendered with
     '(ua-media=continuous)', and the A4 document may be rendered with
     '(ua-media=[stationery,transparency])'.














Klyne/McIntyre             Work-in-progress                  [Page 11]

RFC nnnn       Content feature schema for Internet fax    October 1998


5. Security considerations

  The points raised below are in addition to the general security
  considerations for extended Internet fax [5], and others discussed
  in [2,8,11,12,13]

5.1 Threats

  Negotiation mechanisms reveal information about one party to other
  parties.  This may raise privacy concerns, and may allow a
  malicious party to make better guesses about the presence of
  specific security holes.

  Most of these considerations pertain to capabilities information
  getting into the hands of someone who wanted to abuse it.  This
  document specifies a list of capabilities which will help a sender
  determine what image files characteristics can be processed by the
  recipient, not mechanisms for their publication.  Implementors and
  users should try to ensure that these capabilities are provided to
  appropriate persons, systems and agents.

  1.  Unsolicited bulk mail:  if it is known that a recipient can
      process certain types of images, they may be targeted by bulk
      mailers that want to send such images.

  <<<more to be provided>>>

6. Full copyright statement

  Copyright (C) The Internet Society 1998.  All Rights Reserved.

  This document and translations of it may be copied and furnished to
  others, and derivative works that comment on or otherwise explain
  it or assist in its implementation may be prepared, copied,
  published and distributed, in whole or in part, without restriction
  of any kind, provided that the above copyright notice and this
  paragraph are included on all such copies and derivative works.
  However, this document itself may not be modified in any way, such
  as by removing the copyright notice or references to the Internet
  Society or other Internet organizations, except as needed for the
  purpose of developing Internet standards in which case the
  procedures for copyrights defined in the Internet Standards process
  must be followed, or as required to translate it into languages
  other than English.

  The limited permissions granted above are perpetual and will not be
  revoked by the Internet Society or its successors or assigns.






Klyne/McIntyre             Work-in-progress                  [Page 12]

RFC nnnn       Content feature schema for Internet fax    October 1998


  This document and the information contained herein is provided on
  an "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET
  ENGINEERING TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR
  IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF
  THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
  WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

7. Acknowledgements

  The authors gratefully acknowledge the following persons who made
  comments on earlier versions of this memo:  James Rafferty, Dan
  Wing, [[...]].

8. References

[1]  "Media Feature Tag Registration Procedure"
     Koen Holtman, TUE
     Andrew Mutz, Hewlett-Packard
     Ted Hardie, NASA
     Internet draft: <draft-ietf-conneg-feature-reg-03.txt>
     Work in progress, July 1998.

[2]  "A syntax for describing media feature sets"
     Graham Klyne, 5GM/Content Technologies
     Internet draft: <draft-ietf-conneg-feature-syntax-00.txt>"
     Work in progress, September 1998.

[3]  "Media Features for Display, Print, and Fax"
     Larry Masinter, Xerox PARC
     Koen Holtman, TUE
     Andrew Mutz, Hewlett-Packard
     Dan Wing, Cisco Systems
     Internet draft: <draft-ietf-conneg-media-features-02.txt>
     Work in progress, September 1998.

[4]  "Internet fax feature mapping from Group 3 fax"
     Lloyd McIntyre, Xerox Corporation
     Graham Klyne, 5GM/Content Technologies
     Internet draft: <draft-ietf-fax-feature-T30-mapping-00.txt>
     Work in progress, August 1998.

[5]  "Extended Facsimile Using Internet Mail
     Larry Masinter, Xerox Corporation
     Dan Wing, Cisco Systems
     Internet draft: <draft-ietf-fax-eifax-04.txt>
     Work in progress, September 1998.







Klyne/McIntyre             Work-in-progress                  [Page 13]

RFC nnnn       Content feature schema for Internet fax    October 1998


[6]  "Procedures for document facsimile transmission in the general
     switched telephone network"
     ITU-T Recommendation T.30
     International Telecommunications Union
     July 1996

[7]  RFC 2301, "File format for Internet fax"
     L. McIntyre,
     R. Buckley,
     D. Venable, Xerox Corporation
     S. Zilles, Adobe Systems, Inc.
     G. Parsons, Northern Telecom
     J. Rafferty, Human Communications
     March 1998.

[8]  RFC 2305, "A Simple Mode of Facsimile Using Internet Mail"
     K. Toyoda
     H. Ohno
     J. Murai, WIDE Project
     D. Wing, Cisco Systems
     March 1998.

[9]  T.42 (custom illuminant, gamut)

[10] T.43 (JBIG for colour/grey)

[11] "Scenarios for the Delivery of Negotiated Content"
     T. Hardie, NASA Network Information Center
     Internet draft: <draft-ietf-http-negotiate-scenario-02.txt>
     Work in progress, November 1997.

[12] "Requirements for protocol-independent content negotiation"
     G. Klyne, Integralis Ltd.
     Internet draft: <draft-ietf-conneg-requirements-00.txt>
     Work in progress, March 1998.


















Klyne/McIntyre             Work-in-progress                  [Page 14]

RFC nnnn       Content feature schema for Internet fax    October 1998


9. Authors' addresses

  Graham Klyne
  5th Generation Messaging Ltd.    Content Technologies Ltd.
  5 Watlington Street              Forum 1, Station Road
  Nettlebed                        Theale
  Henley-on-Thames, RG9 5AB        Reading, RG7 4RA
  United Kingdom                   United Kingdom.
  Telephone: +44 1491 641 641      +44 118 930 1300
  Facsimile: +44 1491 641 611      +44 118 930 1301
  E-mail: GK@ACM.ORG

  Lloyd McIntyre
  Xerox Corporation
  Mailstop PAHV-305
  3400 Hillview Ave.
  Palo Alto, CA 94304 USA
  Telephone: +1-650-813-6762
  Facsimile: +1-650-845-2340
  E-mail: Lloyd.McIntyre@pahv.xerox.com

Appendix A: Feature registrations

  [[[This appendix contains registrations of media features, that are
  specific to fax and for which no applicable registration already
  exists.]]]



























Klyne/McIntyre             Work-in-progress                  [Page 15]
