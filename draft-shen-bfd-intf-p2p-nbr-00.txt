
Network Working Group                                       Naiming Shen
Internet-Draft                                             Cisco Systems
Intended status: Informational Track                          March 2007 
Expires: September 2007




               Interface Based Point-to-Point Neighbor BFD
                   draft-shen-bfd-intf-p2p-nbr-00.txt



Status of this Memo

   By submitting this Internet-Draft, each author represents that any
   applicable patent or other IPR claims of which he or she is aware
   have been or will be disclosed, and any of which he or she becomes
   aware will be disclosed, in accordance with Section 6 of BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups. Note that other
   groups may also distribute working documents as Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time. It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/1id-abstracts.html

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html

   This document expires in September 26, 2007.


Abstract

   This document describes an application of Bidirectional Forwarding
   Detection (BFD) protocol named Interface Based Point-to-Point
   Neighbor BFD. This mechanism can be used to simplify the BFD
   operations over point-to-point physical and logical links in
   networks.


1.  Conventions Used In This Document

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC2119 [12].



Shen                    Expires September 2007                  [Page 1]

Internet-Draft           INTF-P2P Neighbor BFD                March 2007


2.  Introduction

   Point-to-point circuit type is commonly used in networks. With
   increasingly popularity of Ethernet technology, many networks
   deploy it in a point-to-point fashion. It is widely used by
   connecting systems back-to-back (physical point-to-point), or
   through switches with vLAN configuration (logical point-to-point).
   Point-to-point circuit on Ethernet brings many benefits
   such as QoS applications, TE bandwidth reservation, simplified
   routing operations [1] and so on.

   BFD [2][3] is developed to detect faults in the bidirectional
   path between two network elements, and it has been widely
   accepted and deployed in IP networks which require routing and
   forwarding convergence in very low latency.

   This document describes a special application for BFD over
   point-to-point physical or logical circuits. This application
   is not a normal BFD client such as upper layer routing
   protocol, but it is a management element for circuit itself
   where BFD is required and configured. This circuit or
   interface management element will change the state of the
   point-to-point circuit or interface base on states of BFD. All
   the upper layer routing protocols get fast convergence
   notification through the circuit or interface state change
   regardless whether they have BFD direct interaction or not.

   The benefits of this proposal include fast development and
   rollout of BFD services; no complex handling for protocols
   such as RIP and static routing; simpler configuration and
   management on the routers or other network related elements;
   and minimized BFD session numbers on the network devices
   where multiple address families, multiple routing instances,
   multiple routing areas, multiple routing topologies, or multiple
   IP/IPv6 subnets could exist on the interfaces.


3.  Applications and Limitations

   The INTF-P2P Neighbor BFD application is to provide fast
   point-to-point link down detection for the routing protocols
   and services over the link. All the protocols do not have to
   interact directly with BFD, rather they will interact with
   interface as they normally do. Fast link down BFD notification
   is relayed from interface management through interface state
   into routing protocols.

   This application is only applied over point-to-point physical
   and logical interfaces. This application MUST NOT be used for
   point-to-multipoint circuits or having multiple neighbors over
   broadcast interfaces.


Shen                    Expires September 2007                  [Page 2]

Internet-Draft           INTF-P2P Neighbor BFD                March 2007


   The INTF-P2P Neighbor BFD application only establish one BFD session
   over a point-to-point link. It can be either IPv4 or IPv6 BFD
   session. The peering address of the session SHOULD be explicitly
   configured on the interface to bootstrap. The configuration of
   local end point SHOULD be optional, it is normally the local
   interface address. This application SHOULD NOT be used in the
   the environment where liveness of the link requires to be data
   protocol and forwarding state dependent. For example, if a router
   implements BFD for IPv4 and IPv6 on two different hardware service
   modules or in two different software processes, obviously one
   protocol BFD session goes down does not automatically imply the
   other one also has problem. But even in that case, it might be better
   off to re-route the other protocol traffic at the same time if there
   are alternative paths available.  This will be operator's decision
   whether to use INTF-P2P Neighbor BFD with such a network device.

   The base specifications of BFD define the bits on the wire and the
   state machines of the protocol. How the BFD packet sharing the
   common forwarding fate with data packet is very much implementation
   specific. The protocol itself does not guarantee the forwarding
   plane for the data packets are exercised even both IPv4 and IPv6
   sessions are established over an interface. Again, INTF-P2P Neighbor
   BFD SHOULD NOT be used if the network requires the BFD sessions
   completely exercising the data forwarding plane. If the main
   concern of a network is the physical or link layer connection, then
   INTF-P2P Neighbor BFD offers a simpler solution while using the
   well established BFD infrastructure and mechanism.

   Since the INTF-P2P Neighbor BFD can change the interface state, it
   not only can offer BFD service to all the IPv4 and IPv6
   protocols, it also can offer BFD service to any legacy or future
   new protocols as long as they rely on the interface state.


4.  Interface Based P2P Neighbor BFD

   INTF-P2P Neighbor BFD is an application of BFD [3], the client is
   the interface where BFD service is required. Configuration is
   needed under the interface(point-to-point) to specify the
   peer address which can be either an IPv4 or IPv6 address.
   The interface needs to be IPv4 and/or IPv6 enabled.

   The BFD session and operation should be established and run
   as normal, there is no change at all to the BFD specifications.
   Thus there is no compatibility issue when one side of the
   link runs INTF-P2P Neighbor BFD and the other side is running BFD
   with other routing applications or clients registered.

   When this BFD session state changes from UP to DOWN, the INTF-P2P
   Neighbor BFD client SHOULD immediately bring down the
   point-to-point interface where the BFD is configured on.


Shen                    Expires September 2007                  [Page 3]

Internet-Draft           INTF-P2P Neighbor BFD                March 2007


   It will set up a timer with a predetermined value, for example
   with 5 seconds interface hold-down. During this interface hold-down
   period, there will be no packet to be sent or received on this
   interface.

   When this timer expires, the INTF-P2P Neighbor BFD client will
   try to bring up this interface, assume the other conditions are
   met for the interface to be in the UP state. It will also set
   a flag on the interface to indicate the INTF-P2P Neighbor BFD
   session is still down at the moment. This special flag will only
   be used by protocols like static routing process which will be
   described in section 4.2.  BFD over this interface should try to
   re-establish the session when the interface is back in UP state.
   As soon as the BFD session comes to UP state, it SHOULD clear the
   flag set on the interface and also have the static routing to
   re-evaluate the routes pointing to this interface as next-hop.

   Since INTF-P2P Neighbor BFD is only meant to operate in the
   point-to-point environment, an implementation SHOULD deploy
   a mis-configuration detection scheme on the broadcast
   interface both at the time of configuration and with periodical
   checks, as long as the BFD is in UP state. One simple
   mechanism could be to walk through the ARP/ND cache tables of this
   interface to detect if there exist dynamically learned entries
   which contain different MAC addresses. It then SHOULD send
   out a warning about the multiple peers existing on the interface,
   and optionally abort the INTF-P2P Neighbor BFD operation over this
   interface until the configuration error is corrected.

4.1  Dynamic Routing Protocols

   Since the INTF-P2P Neighbor BFD will bring down the interface when
   it's BFD session going down, some routing protocols such as 
   IS-IS [4][5], OSPF [6][7] will tear down their adjacencies and
   reroute immediately, assume the initial hold-down timer is not
   applied. Other routing protocols such as RIP [8, 9], BGP [10] will
   be updated by the RIB table processes about the interface state or
   their recursive next-hop changes. Protocols will try to reroute
   around the failed point-to-point link. When the interface
   comes back up, protocols will try to establish the adjacencies or
   advertise their routes, this part is the normal protocol
   operation regardless of whether the INTF-P2P Neighbor BFD is in use.
   There is no protocol level change to any of the dynamic routing
   protocols from this proposal. The dynamic routing protocols do not
   pay attention to the special flag on interface mentioned above.

4.2  Static Routing Instances

   The going down portion is similar to the dynamic routing
   protocols described in the above section. In the bring up
   part, the static routing instances need to pay attention


Shen                    Expires September 2007                  [Page 4]

Internet-Draft           INTF-P2P Neighbor BFD                March 2007


   to the special flag set by INTF-P2P Neighbor BFD. Thus the
   interface DOWN state for static routing should be either
   the interface is traditionally DOWN, or the special BFD flag
   is set.  When the INTF-P2P Neighbor BFD session is up, it informs
   the static routing about the interface is UP (again) and
   static routes can be installed into RIB tables this time since
   the special BFD flag on the interface is cleared.

4.3 Fast Re-Route

    MPLS TE FRR [11] and other IP and MPLS fast re-route schemes 
    can be triggered in respond to BFD session state going down.
    When INTF-P2P Neighbor BFD is used over the interface, the
    interface DOWN state can simply trigger the fast reroute action
    even there is no direct signaling between the BFD and FRR module.


5.  Security Considerations

   This document does not introduce any additional security issue 
   beyond those already considered in the base BFD specifications.


6.  IANA Considerations

   This document has no IANA considerations.


7.  Acknowledgement

   The author would like to thank Dave Katz and David Ward for their
   comments on the architecture and implementation part of the
   BFD operations in this document.


8.  References

   [1] Shen, N., Zinin, A., "Point-to-point operation over LAN in
       link-state routing protocols",
       draft-ietf-isis-igp-p2p-over-lan-06.txt, work in progress. 

   [2] Katz, D., Ward, D., "Bidirectional Forwarding Detection",
       draft-ietf-bfd-base-06.txt, work in progress.

   [3] Katz, D., Ward, D., "BFD for IPv4 and IPv6 (Single Hop)",
       draft-ietf-bfd-v4v6-1hop-06.txt, work in progress.

   [4] ISO, "Intermediate system to Intermediate system routing
       information exchange protocol for use in conjunction with the
       Protocol for providing the Connectionless-mode Network Service
       (ISO 8473)," ISO/IEC 10589:1992.


Shen                    Expires September 2007                  [Page 5]

Internet-Draft           INTF-P2P Neighbor BFD                March 2007


   [5] Hopps, C., "Routing IPv6 with IS-IS",
       draft-ietf-isis-ipv6-06.txt, work in progress.

   [6] Moy, J., "OSPF Version 2", RFC 2328, April 1998.

   [7] Coltun, R., Ferguson, D., and J. Moy, "OSPF for IPv6",
       July 1998.

   [8] Hedrick, C., "Routing Information Protocol", RFC 1058,
       June 1988.

   [9] Malkin, G., Minnear, R., "RIPng for IPv6", RFC 2080,
       January 1997.

   [10] Rekhter, Y., Li, T., Hares, S., "A Border Gateway Protocol 4
       (BGP-4)", RFC 4271, January 2006.

   [11] Pan, P., Swallow, G., and A. Atlas, "Fast Reroute Extensions
        to RSVP-TE for LSP Tunnels", RFC 4090, May 2005.

   [12] Bradner, S., "Key words for use in RFCs to Indicate
        Requirement Levels", BCP 14, RFC 2119, March 1997.


9.  Author's Addresses

   Naiming Shen
   Cisco Systems
   225 West Tasman Drive
   San Jose, CA  95134
   USA
   Email: naiming@cisco.com


IPR Disclaimer

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in BCP 78 and BCP 79.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   http://www.ietf.org/ipr.


Shen                    Expires September 2007                  [Page 6]

Internet-Draft           INTF-P2P Neighbor BFD                March 2007


   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at ietf-
   ipr@ietf.org.

Full Copyright Notice

   Copyright (C) The IETF Trust (2007).

   This document is subject to the rights, licenses and restrictions
   contained in BCP 78, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND
   THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS
   OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF
   THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.



























Shen                    Expires September 2007                  [Page 7]

