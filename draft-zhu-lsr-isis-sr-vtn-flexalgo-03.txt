



LSR Working Group                                                 Y. Zhu
Internet-Draft                                             China Telecom
Intended status: Standards Track                                 J. Dong
Expires: January 13, 2022                                          Z. Hu
                                                     Huawei Technologies
                                                           July 12, 2021


             Using Flex-Algo for Segment Routing based VTN
                 draft-zhu-lsr-isis-sr-vtn-flexalgo-03

Abstract

   Enhanced VPN (VPN+) aims to provide enhanced VPN service to support
   some application's needs of enhanced isolation and stringent
   performance requirements.  VPN+ requires integration between the
   overlay VPN connectivity and the characteristics provided the
   underlay network.  A Virtual Transport Network (VTN) is a virtual
   underlay network which has a customized network topology and a set of
   network resources allocated from the physical network.  A VTN could
   be used as the underlay for one or a group of VPN+ services.

   The topology of a VTN can be defined using Flex-Algo.  In some
   network scenarios, each VTN can be associated with a unique Flex-
   Algo, and the set of network resources of the VTN can be instantiated
   as sub-interfaces or member links of the L3 interfaces.  This
   document describes the mechanisms to build the SR based VTNs using SR
   Flex-Algo and IGP L2 bundle with minor extensions.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on January 13, 2022.






Zhu, et al.             Expires January 13, 2022                [Page 1]

Internet-Draft            Flex-Algo for SR VTN                 July 2021


Copyright Notice

   Copyright (c) 2021 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
     1.1.  Requirements Language . . . . . . . . . . . . . . . . . .   3
   2.  Advertisement of SR VTN Topology Attribute  . . . . . . . . .   3
   3.  Advertisement of SR VTN Resource Attribute  . . . . . . . . .   4
   4.  Forwarding Plane Operations . . . . . . . . . . . . . . . . .   5
   5.  Scalability Considerations  . . . . . . . . . . . . . . . . .   6
   6.  Security Considerations . . . . . . . . . . . . . . . . . . .   6
   7.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   6
   8.  Acknowledgments . . . . . . . . . . . . . . . . . . . . . . .   6
   9.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   7
     9.1.  Normative References  . . . . . . . . . . . . . . . . . .   7
     9.2.  Informative References  . . . . . . . . . . . . . . . . .   8
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   8

1.  Introduction

   Enhanced VPN (VPN+) is an enhancement to VPN services to support the
   needs of new applications, particularly including the applications
   that are associated with 5G services.  These applications require
   enhanced isolation and have more stringent performance requirements
   than that can be provided with traditional overlay VPNs.  Thus these
   properties require integration between the underlay and the overlay
   networks.  [I-D.ietf-teas-enhanced-vpn] specifies the framework of
   enhanced VPN and describes the candidate component technologies in
   different network planes and layers.  An enhanced VPN may be used for
   5G transport network slicing, and will also be of use in other
   generic scenarios.

   To meet the requirement of enhanced VPN services, a number of virtual
   transport networks (VTN) can be created, each with a subset of the
   underlay network topology and a set of network resources allocated



Zhu, et al.             Expires January 13, 2022                [Page 2]

Internet-Draft            Flex-Algo for SR VTN                 July 2021


   from the underlay network to meet the requirement of a specific VPN+
   service or a group of VPN+ services.  Another possible approach is to
   create a set of point-to-point paths, each with a set of network
   resource reserved along the path, such paths are called Virtual
   Transport Paths (VTPs).  Although using a set of dedicated VTPs can
   provide similar characteristics as VTN, it has some scalability
   issues due to the per-path state in the network.

   [I-D.ietf-spring-resource-aware-segments] introduces resource
   awareness to Segment Routing (SR) [RFC8402].  As described in
   [I-D.ietf-spring-sr-for-enhanced-vpn], the resource-aware SIDs can be
   used to build virtual transport networks (VTNs) with the required
   network topology and network resource attributes to support enhanced
   VPN services.  With segment routing based data plane, Segment
   Identifiers (SIDs) can be used to represent both the topology and the
   set of network resources allocated by network nodes to a VTN.  The
   SIDs of each VTN and the associated topology and resource attributes
   need to be distributed using control plane.

   [I-D.dong-lsr-sr-enhanced-vpn] defines the IGP mechanisms with
   necessary extensions to provide scalable Segment Routing (SR) based
   VTNs.  The VTNs could be used as the underlay of the enhanced VPN
   services.  The mechanism described in [I-D.dong-lsr-sr-enhanced-vpn]
   allows flexible combination of the topology and resource attribute to
   provide a relatively large number of VTNs.  In some network
   scenarios, each VTN can be associated with a unique Flex-Algo, and
   the set of network resources allocated to the VTN can be instantiated
   using sub-interfaces or member links of the L3 interfaces.  This
   document describes a mechanism to build the SR based VTNs using SR
   Flex-Algo and IGP L2 bundle with minor extensions.

1.1.  Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in
   BCP14 RFC 2119 [RFC2119] RFC 8174 [RFC8174] when, and only when, they
   appear in all capitals, as shown here.

2.  Advertisement of SR VTN Topology Attribute

   [I-D.ietf-lsr-flex-algo] specifies the mechanism to provide
   distributed constraint-path computation, and the usage of SR-MPLS
   prefix-SIDs and SRv6 locators for steering traffic along the
   constrained paths.

   The Flex-Algo Definition (FAD) is the combination of calculation-
   type, metric-type and the topological constraints used for path



Zhu, et al.             Expires January 13, 2022                [Page 3]

Internet-Draft            Flex-Algo for SR VTN                 July 2021


   computation.  According to the network nodes' participation of a
   Flex-Algo, and the rules of including or excluding Admin Groups (i.e.
   colors) and Shared Risk Link Groups (SRLGs), the topology of a VTN
   can be described using the associated Flex-Algo.  If each VTN is
   associated with a unique Flex-Algo, the Flex-Algo identifier could be
   reused as the identifier of the VTN in the control plane.

   With the mechanisms defined in[RFC8667] [I-D.ietf-lsr-flex-algo], SR-
   MPLS prefix-SID advertisement can be associated with a specific
   topology and a specific algorithm, which can be a Flex-Algo.  This
   allows the nodes to use the prefix-SIDs to steer traffic along
   distributed computed constraint paths according to the associated
   Flex-Algo in a particular topology.

   [I-D.ietf-lsr-isis-srv6-extensions] specifies the IS-IS extensions to
   support SRv6 data plane, in which the SRv6 locators advertisement can
   be associated with a topology and a specific algorithm, which can be
   a Flex-Algo.  This allows the nodes to use the SRv6 locators to steer
   traffic along distributed computed constraint paths according to the
   associated Flex-Algo in a particular topology.  In addition,
   topology/algorithm specific SRv6 End SIDs and End.X SIDs can be used
   to enforce traffic over the Loop-Free Alternatives (LFA) computed
   backup paths.

3.  Advertisement of SR VTN Resource Attribute

   Each VTN can be allocated with a set of dedicated network resources.
   In order to perform constraint based path computation for each VTN on
   network controller and the ingress nodes, the resource attribute of
   each VTN also needs to be advertised.

   IS-IS L2 Bundle [RFC8668] was defined to advertise the link
   attributes of the Layer-2 bundle member links.  In this section, it
   is extended to advertise the set of network resource attributes
   associated with different VTNs on a shared Layer-3 link.

   The Layer-3 link may or may not be a Layer-2 link bundle, as long as
   it has the capability of allocating different subsets of link
   resources to different VTNs it participates in.  A subset of the link
   resources can be considered as a virtual Layer-2 member link (or sub-
   interface) of the Layer-3 link.  If the Layer-3 interface is a
   Layer-2 link bundle, it is possible that the subset of link resource
   allocated to a specific VTN is provided by one of the physical
   Layer-2 member links.

   A new flag "V" (Virtual) is defined in the flag field of the Parent
   L3 Neighbor Descriptor in the L2 Bundle Member Attributes TLV (25).




Zhu, et al.             Expires January 13, 2022                [Page 4]

Internet-Draft            Flex-Algo for SR VTN                 July 2021


                0 1 2 3 4 5 6 7
               +-+-+-+-+-+-+-+-+
               |P|V|           |
               +-+-+-+-+-+-+-+-+

   V flag: When the V flag is set, it indicates the advertised member
   links under the Parent Layer-3 link are virtual Layer-2 member links.
   When the V flag is clear, it indicates the member links are physical
   member links.  This flag may be used to determine whether the member
   links share fates with the parent interface.

   For each virtual or physical member link, the TE attributes defined
   in [RFC5305] such as the Maximum Link Bandwidth and Admin Groups
   SHOULD be advertised using the mechanism as defined in [RFC8668].
   The SR-MPLS Adj-SIDs or SRv6 End.X SIDs associated with each of the
   virtual or physical Layer-2 member links SHOULD also be advertised
   according to [RFC8668] and [I-D.dong-lsr-l2bundle-srv6].

   In order to correlate the virtual or physical member links with the
   Flex-Algo used to identify the VTN, each VTN SHOULD be assigned with
   a unique Admin Group (AG) or Extended Admin Group (EAG), and the
   virtual or physical member link associated with this VTN SHOULD be
   configured with the AG or EAG assigned to the VTN.  The AG or EAG of
   the parent Layer 3 link SHOULD be set to the union of all the AGs or
   EAGs of its virtual or physical member links.  In the definition of
   the Flex-Algo corresponding to the VTN, It MUST use the Include-Any
   Admin Group rule with only the AG or EAG assigned to the VTN as the
   link constraints, the Include-All Admin Goup rule or the Exclude
   Admin Group rule MUST NOT be used.  This ensures that the Layer-3
   link is included in the Flex-Algo specific constraint path
   computation for each VTN it participates in.

4.  Forwarding Plane Operations

   For SR-MPLS data plane, a prefix SID is associated with the paths
   calculated using the corresponding Flex-Algo of a VTN.  An outgoing
   Layer-3 interface is determined for each path.  In addition, the
   prefix-SID also steers the traffic to use the virtual or physical
   member link which is associated with the VTN on the outgoing Layer-3
   interface for packet forwarding.  The Adj-SIDs associated with the
   virtual or physical member links of a VTN MAY be used with the
   prefix-SIDs of the same VTN together to build SR-MPLS paths with the
   topological and resource constraints of the VTN.

   For SRv6 data plane, an SRv6 Locator is a prefix which is associated
   with the paths calculated using the corresponding Flex-Algo of a VTN.
   An outgoing Layer-3 interface is determined for each path.  In
   addition, the SRv6 Locator prefix also steers the traffic to use the



Zhu, et al.             Expires January 13, 2022                [Page 5]

Internet-Draft            Flex-Algo for SR VTN                 July 2021


   virtual or physical member link which is associated with the VTN on
   the outgoing Layer-3 interface for packet forwarding.  The End.XU
   SIDs associated with the virtual or physical member links of a VTN
   MAY be used with the SRv6 Locator prefix of the same VTN together to
   build SRv6 paths with the topological and resource constraints of the
   VTN.

5.  Scalability Considerations

   The mechanism described in this document assumes that each VTN is
   associated with an unique Flex-Algo, so that the Flex-Algo IDs can be
   reused to identify the VTNs in the control plane.  While this brings
   the benefit of simplicity, it also has some limitations.  For
   example, it means that even if multiple VTNs share the same
   topological constraints, they would still need to be identified using
   different Flex-Algo IDs in the control plane, then independent path
   computation needs to be executed for each VTN.  The number of VTNs
   supported in a network may be dependent on the number of Flex-Algos
   supported, which is related to the control plane overhead.  Another
   aspect which may impact the number of VTNs supported with this
   mechanism is that at most 128 Flex-Algos can be used in a network.
   The mechanism described in this document is applicable to network
   scenarios where the number of required VTN is relatively small.  A
   detailed analysis about the VTN scalability and the possible
   optimizations for supporting a large number of VTNs is described in
   [I-D.dong-teas-enhanced-vpn-vtn-scalability].

6.  Security Considerations

   This document introduces no additional security vulnerabilities to
   IS-IS.

   The mechanism proposed in this document is subject to the same
   vulnerabilities as any other protocol that relies on IGPs.

7.  IANA Considerations

   This document does not request any IANA actions.

8.  Acknowledgments

   The authors would like to thank Zhenbin Li and Peter Psenak for the
   review and discussion of this document.








Zhu, et al.             Expires January 13, 2022                [Page 6]

Internet-Draft            Flex-Algo for SR VTN                 July 2021


9.  References

9.1.  Normative References

   [I-D.dong-lsr-l2bundle-srv6]
              Dong, J. and Z. Hu, "Advertising SRv6 SIDs for Layer 2
              Bundle Member Links in IGP", draft-dong-lsr-l2bundle-
              srv6-00 (work in progress), February 2021.

   [I-D.ietf-lsr-flex-algo]
              Psenak, P., Hegde, S., Filsfils, C., Talaulikar, K., and
              A. Gulko, "IGP Flexible Algorithm", draft-ietf-lsr-flex-
              algo-15 (work in progress), April 2021.

   [I-D.ietf-lsr-isis-srv6-extensions]
              Psenak, P., Filsfils, C., Bashandy, A., Decraene, B., and
              Z. Hu, "IS-IS Extension to Support Segment Routing over
              IPv6 Dataplane", draft-ietf-lsr-isis-srv6-extensions-14
              (work in progress), April 2021.

   [I-D.ietf-spring-resource-aware-segments]
              Dong, J., Bryant, S., Miyasaka, T., Zhu, Y., Qin, F., Li,
              Z., and F. Clad, "Introducing Resource Awareness to SR
              Segments", draft-ietf-spring-resource-aware-segments-02
              (work in progress), February 2021.

   [I-D.ietf-spring-sr-for-enhanced-vpn]
              Dong, J., Bryant, S., Miyasaka, T., Zhu, Y., Qin, F., Li,
              Z., and F. Clad, "Segment Routing based Virtual Transport
              Network (VTN) for Enhanced VPN", draft-ietf-spring-sr-for-
              enhanced-vpn-00 (work in progress), February 2021.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC5305]  Li, T. and H. Smit, "IS-IS Extensions for Traffic
              Engineering", RFC 5305, DOI 10.17487/RFC5305, October
              2008, <https://www.rfc-editor.org/info/rfc5305>.

   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC
              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,
              May 2017, <https://www.rfc-editor.org/info/rfc8174>.







Zhu, et al.             Expires January 13, 2022                [Page 7]

Internet-Draft            Flex-Algo for SR VTN                 July 2021


   [RFC8402]  Filsfils, C., Ed., Previdi, S., Ed., Ginsberg, L.,
              Decraene, B., Litkowski, S., and R. Shakir, "Segment
              Routing Architecture", RFC 8402, DOI 10.17487/RFC8402,
              July 2018, <https://www.rfc-editor.org/info/rfc8402>.

   [RFC8667]  Previdi, S., Ed., Ginsberg, L., Ed., Filsfils, C.,
              Bashandy, A., Gredler, H., and B. Decraene, "IS-IS
              Extensions for Segment Routing", RFC 8667,
              DOI 10.17487/RFC8667, December 2019,
              <https://www.rfc-editor.org/info/rfc8667>.

   [RFC8668]  Ginsberg, L., Ed., Bashandy, A., Filsfils, C., Nanduri,
              M., and E. Aries, "Advertising Layer 2 Bundle Member Link
              Attributes in IS-IS", RFC 8668, DOI 10.17487/RFC8668,
              December 2019, <https://www.rfc-editor.org/info/rfc8668>.

9.2.  Informative References

   [I-D.dong-lsr-sr-enhanced-vpn]
              Dong, J., Hu, Z., Li, Z., Tang, X., Pang, R., JooHeon, L.,
              and S. Bryant, "IGP Extensions for Segment Routing based
              Enhanced VPN", draft-dong-lsr-sr-enhanced-vpn-05 (work in
              progress), February 2021.

   [I-D.dong-teas-enhanced-vpn-vtn-scalability]
              Dong, J., Li, Z., Qin, F., Yang, G., and J. N. Guichard,
              "Scalability Considerations for Enhanced VPN (VPN+)",
              draft-dong-teas-enhanced-vpn-vtn-scalability-02 (work in
              progress), February 2021.

   [I-D.ietf-teas-enhanced-vpn]
              Dong, J., Bryant, S., Li, Z., Miyasaka, T., and Y. Lee, "A
              Framework for Enhanced Virtual Private Network (VPN+)
              Services", draft-ietf-teas-enhanced-vpn-07 (work in
              progress), February 2021.

Authors' Addresses

   Yongqing Zhu
   China Telecom

   Email: zhuyq8@chinatelecom.cn


   Jie Dong
   Huawei Technologies

   Email: jie.dong@huawei.com



Zhu, et al.             Expires January 13, 2022                [Page 8]

Internet-Draft            Flex-Algo for SR VTN                 July 2021


   Zhibo Hu
   Huawei Technologies

   Email: huzhibo@huawei.com















































Zhu, et al.             Expires January 13, 2022                [Page 9]
