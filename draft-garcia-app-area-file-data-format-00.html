<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>An Extensible Data Format (XML) for Describing Files</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="An Extensible Data Format (XML) for Describing Files">
<meta name="keywords" content="file, format, XML">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">M. Garcia-Martin</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Nokia Siemens Networks</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">M. Matuszewski</td></tr>
<tr><td class="header">Expires: May 15, 2008</td><td class="header">Nokia</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">November 12, 2007</td></tr>
</table></td></tr></table>
<h1><br />An Extensible Data Format (XML) for Describing Files<br />draft-garcia-app-area-file-data-format-00</h1>

<h3>Status of this Memo</h3>
<p>
By submitting this Internet-Draft,
each author represents that any applicable patent or other IPR claims of which
he or she is aware have been or will be disclosed,
and any of which he or she becomes aware will be disclosed,
in accordance with Section&nbsp;6 of BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on May 15, 2008.</p>

<h3>Abstract</h3>

<p>
	This document defines an Extensible Data Format (XML) for
	describing files.
      
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#anchor2">2.</a>&nbsp;
Terminology<br />
<a href="#file-metadata-document">3.</a>&nbsp;
The 'file-metadata' XML Document<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#full-file-metadata-document">3.1.</a>&nbsp;
Full 'file-metadata' document<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#partial-file-metadata-document">3.2.</a>&nbsp;
Partial 'file-metadata' document: patch operations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#schema">3.3.</a>&nbsp;
XML Schema<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-example">3.4.</a>&nbsp;
Examples<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">3.4.1.</a>&nbsp;
Example of a full 'file-document' document<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#file-metadata-example-partial-1">3.4.2.</a>&nbsp;
Example of a partial 'file-metadata' document<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#file-example-full-2">3.4.3.</a>&nbsp;
Example of a full 'file-metadata' document<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#file-example-partial-2">3.4.4.</a>&nbsp;
Example of a partial 'file-metadata' document<br />
<a href="#security">4.</a>&nbsp;
Security Considerations<br />
<a href="#iana">5.</a>&nbsp;
IANA Considerations<br />
<a href="#rfc.references1">6.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">6.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">6.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
<a href="#rfc.copyright">&#167;</a>&nbsp;
Intellectual Property and Copyright Statements<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
	In the recent times there is a growing interest for defining a
	standard format for describing files and its associated
	meta-data. This is the case, for example, of the <a class='info' href='#I-D.garcia-sipping-file-sharing-framework'>Session
	Initiation Protocol (SIP) file sharing framework<span> (</span><span class='info'>Garcia-Martin, M., Matuszewski, M., Beijar, N., and J. Lehtinen, &ldquo;Sharing Files with the Session Initiation Protocol (SIP),&rdquo; November&nbsp;2007.</span><span>)</span></a> [I&#8209;D.garcia&#8209;sipping&#8209;file&#8209;sharing&#8209;framework],
	which describes a usage of SIP for publishing file
	metadata. Other usages, for example, based on the <a class='info' href='#RFC2616'>HyperText Transfer Protocol (HTTP)<span> (</span><span class='info'>Fielding, R., Gettys, J., Mogul, J., Frystyk, H., Masinter, L., Leach, P., and T. Berners-Lee, &ldquo;Hypertext Transfer Protocol -- HTTP/1.1,&rdquo; June&nbsp;1999.</span><span>)</span></a> [RFC2616]
	have been also discussed, and it is expected that the growing
	usage of XML in IETF protocols will increase the demand for
	this format.
      
</p>
<p>
	This document creates a generic XML document format
	for describing files and their associated meta-data. The
	document format is extensible, so future needs can be
	addressed thorough extensions. It is expected that
	applications that need to describe files use this format as
	their standard format.
      
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Terminology</h3>

<p>
	The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
	NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and
	"OPTIONAL" in this document are to be interpreted as described
	in BCP 14, <a class='info' href='#RFC2119'>RFC 2119<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to           Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a> [RFC2119] and indicate
	requirement levels for compliant implementations.
      
</p>
<a name="file-metadata-document"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
The 'file-metadata' XML Document</h3>

<p>
      A 'file-metadata' document is an <a class='info' href='#W3C.REC-xml-20001006'>XML document<span> (</span><span class='info'>Sperberg-McQueen, C., Maler, E., Paoli, J., and T. Bray, &ldquo;Extensible Markup Language (XML) 1.0 (Second Edition),&rdquo; October&nbsp;2000.</span><span>)</span></a> [W3C.REC&#8209;xml&#8209;20001006] that MUST be
      well-formed and SHOULD be valid. A 'file-metadata' document MUST be
      based on XML 1.0 and MUST be encoded using <a class='info' href='#RFC3629'>UTF-8<span> (</span><span class='info'>Yergeau, F., &ldquo;UTF-8, a transformation format of ISO 10646,&rdquo; November&nbsp;2003.</span><span>)</span></a> [RFC3629].  This specification makes use of
      XML namespaces for identifying 'file-metadata' documents.  The
      namespace URI for elements defined by this specification is a
      <a class='info' href='#RFC2141'>URN<span> (</span><span class='info'>Moats, R., &ldquo;URN Syntax,&rdquo; May&nbsp;1997.</span><span>)</span></a> [RFC2141], using the namespace
      identifier 'ietf'.  This URN is:
    
</p>
<p>
      </p>
<blockquote class="text"><dl>
<dt></dt>
<dd>
	  urn:ietf:params:xml:ns:file
	
</dd>
</dl></blockquote><p>
    
</p>
<p>
      The 'file-metadata' documents are identified with the MIME type
      "application/file+xml" and are instances of the XML schema
      defined in <a class='info' href='#schema'>Section&nbsp;3.3<span> (</span><span class='info'>XML Schema</span><span>)</span></a>.
    
</p>
<p>
      The XML schema that defines the constrains of the 'file-metadata'
      document provides support for full and partial 'file-metadata'
      documents, so that applications that can accommodate
      differentiated versions of XML documents can use partial content
      to signal a change in one or more files. The XML schema
      contains provisions for two root elements, namely
      &lt;file-set&gt; and &lt;patch&gt;, of which only one MUST
      be present in a valid 'file-metadata' document. The
      &lt;file-set&gt; element is used to describe a full
      'file-metadata' document, i.e., one containing a full state of the
      available files. A full 'file-metadata' document MUST be used in
      any initial publication or initial notification. On the
      contrary, the &lt;patch&gt; element is used to describe a
      partial 'file-metadata' document. The &lt;patch&gt; element contains
      a number of patch operations that, once applied to a previous
      version of a full 'file-metadata' document, create an updated full
      document. 
    
</p>
<p>
      </p>
<blockquote class="text"><dl>
<dt></dt>
<dd>
	  The XML schema rules require that only one root element is
	  present in an XML document. Therefore, a 'file-metadata'
	  document compliant with the XML schema definition contains
	  either a &lt;file-set&gt; root element or a &lt;patch&gt;
	  root element, but not both.
	
</dd>
</dl></blockquote><p>
    
</p>
<p>
      Due to the duality of a 'file-metadata' document, depending on
      whether it contains a full or a partial 'file-metadata'
      document, we describe separately each of them in <a class='info' href='#full-file-metadata-document'>Section&nbsp;3.1<span> (</span><span class='info'>Full 'file-metadata' document</span><span>)</span></a> and <a class='info' href='#partial-file-metadata-document'>Section&nbsp;3.2<span> (</span><span class='info'>Partial 'file-metadata' document: patch operations</span><span>)</span></a>, respectively.
    
</p>
<a name="full-file-metadata-document"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Full 'file-metadata' document</h3>

<p>
	A full 'file-metadata' document begins with the root element
	tag &lt;file-set&gt; that describes a collection of files. The
	&lt;file-set&gt; element contains a mandatory 'version'
	attribute.  When 'file-metadata' documents are used with
	protocols that provide the notion of a session, such as <a class='info' href='#RFC3261'>SIP<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a> [RFC3261], an initial appearance of a
	'file-metadata' document in a session selects an initial value
	for the 'version' attribute of the &lt;file-set&gt;
	element. Subsequent 'file-metadata' documents within the same
	session MUST increment the value of the 'version' attribute by
	one, no matter whether they are full or partial, and add it
	either to the &lt;file-set&gt; or &lt;patch&gt; element, as
	appropriate. As a consequence, the counter of the 'version'
	attribute is shared between &lt;file-set&gt; and &lt;patch&gt;
	elements.
      
</p>
<p>
	The &lt;file-set&gt; element consists of one or more child
	&lt;file&gt; elements. The &lt;file-set&gt; element MAY
	contain a &lt;timestamp&gt; element, a &lt;note&gt; element,
	and MAY contain other elements and attributes from different
	namespaces for the purposes of extensibility; elements or
	attributes from unknown namespaces MUST be ignored.
      
</p>
<p>
	Each &lt;file&gt; element represents the description data of a
	file. It includes an 'id' attribute that contains a unique
	identifier. The value of the 'id' attribute MUST be unique
	within the 'file-metadata' document.
      
</p>
<p>
	The &lt;timestamp&lt; element contains a string indicating
	when the document has been last updated. The value of this
	element MUST follow the <a class='info' href='#RFC3339'>IMPP datetime
	format<span> (</span><span class='info'>Klyne, G., Ed. and C. Newman, &ldquo;Date and Time on the Internet: Timestamps,&rdquo; July&nbsp;2002.</span><span>)</span></a> [RFC3339]. Timestamps that contain 'T' or 'Z' MUST use the
	capitalized forms. It is recommended that file metadata
	documents contain a &lt;timestamp&gt; element to indicate the
	age of the document.
      
</p>
<p>
	The &lt;note&gt; element contains a string value, which is
	usually used for a human readable comment.  A &lt;note&gt;
	element MAY appear as a child element of &lt;file-set&gt;
	element.
      
</p>
<p>
	The &lt;file&gt; element consists of one &lt;identity&gt;
	element and one or more &lt;instance&gt; elements. The
	&lt;file&gt; element MAY also contain other elements and
	attributes from different namespaces for the purposes of
	extensibility; elements or attributes from unknown namespaces
	MUST be ignored.
      
</p>
<p>
	The &lt;identity&gt; element groups a number of elements that
	represent the invariant data of the file, i.e., file metadata
	that is common across different instances of the file. For
	example, the &lt;identity&gt; element provides a description
	for the hash or size of a file. On the contrary, data that is
	specific to the location of the file are grouped in the
	&lt;instance&gt; element. This can include a Uniform
	Resource Identifier (URI) of the user who hosts the file or a
	human readable description of the file.
      
</p>
<p>
	The &lt;identity&gt; element contains an 'id' attribute whose
	value MUST be unique within the XML document. 
      
</p>
<p>
	The &lt;identity&gt; element contains zero or one &lt;urn&gt;,
	&lt;mime-type&gt;, &lt;size&gt;, and &lt;sha1&gt;
	elements. The &lt;identity&gt; element MAY also contain other
	elements and attributes from different namespaces for the
	purposes of extensibility; elements or attributes from unknown
	namespaces MUST be ignored.
      
</p>
<p>
	The &lt;urn&gt; element contains a persistent,
	location-independent, resource identifier expressed as a <a class='info' href='#RFC2141'>Uniform Resource Name (URN)<span> (</span><span class='info'>Moats, R., &ldquo;URN Syntax,&rdquo; May&nbsp;1997.</span><span>)</span></a> [RFC2141] that is
	allocated to the file and uniquely identifies it. If
	present, the value of the &lt;urn&gt; element MUST be
	formatted according to the URN syntax specified in <a class='info' href='#RFC2141'>RFC 2141<span> (</span><span class='info'>Moats, R., &ldquo;URN Syntax,&rdquo; May&nbsp;1997.</span><span>)</span></a> [RFC2141].
      
</p>
<p>
	The &lt;mime-type&gt; element contains the Multipurpose
	Internet Mail Extensions (MIME) type of the file. If
	present, the value of the &lt;mime-type&gt; element SHOULD
	contain an IANA registered MIME media type expressed as
	type/subtype format.
      
</p>
<p>
	The &lt;size&gt; element contains the file size in
	octets.
      
</p>
<p>
	The &lt;sha1&gt; element contains the results of a hashing
	operation on the file. The hashing operation MUST be
	computed using the <a class='info' href='#RFC3174'>US Secure Hash
	Algorithm 1 (SHA1)<span> (</span><span class='info'>Eastlake, D. and P. Jones, &ldquo;US Secure Hash Algorithm 1 (SHA1),&rdquo; September&nbsp;2001.</span><span>)</span></a> [RFC3174] and MUST be expressed in
	hexadecimal format.
      
</p>
<p>
	One or more &lt;instance&gt; elements can be included in the
	&lt;file&gt; element. Each &lt;instance&gt; element
	provides information that is related to a particular instance
	of the file, rather than the file itself.
      
</p>
<p>
	Each &lt;instance&gt; element contains an 'id' attribute whose
	value MUST be unique within the XML document. The
	&lt;instance&gt; element also contains one or more &lt;uri&gt;
	and &lt;urn&gt; elements, and zero or one &lt;user-uri&gt;,
	&lt;user-gruu&gt;, &lt;name&gt;, &lt;description&gt;
	&lt;iconptr&gt;, &lt;creation-date&gt;,
	&lt;modification-date&gt;, &lt;read-date&gt; and
	&lt;keywords&gt; elements. Additionally, the &lt;instance&gt;
	element MAY contain other elements and attributes from
	different namespaces for the purposes of extensibility;
	elements or attributes from unknown namespaces MUST be
	ignored.
      
</p>
<p>
	The &lt;uri&gt; element contains either a location-dependent,
	typically protocol-specific file identifier expressed as a
	<a class='info' href='#RFC3986'>Uniform Resource Identifier (URI)<span> (</span><span class='info'>Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;Uniform Resource Identifier (URI): Generic Syntax,&rdquo; January&nbsp;2005.</span><span>)</span></a> [RFC3986]. The &lt;uri&gt; element can be, for example, an HTTP
	or FTP URI. 
      
</p>
<p>
	The &lt;user-uri&gt; provides a container for a URI that
	resolves to the URI f the user where the file
	is available. For example, this can be a SIP or SIPS URI.
	This might be useful when it is not possible to provide a URI
	(in the &lt;uri&gt; element) that resolves to the file itself,
	but instead, there is a URI that resolves to the user that
	hosts the file. 
      
</p>
<p>
	The &lt;user-gruu&gt; provides a SIP <a class='info' href='#I-D.ietf-sip-gruu'>Globally Routable User Agent URI
	(GRUU)<span> (</span><span class='info'>Rosenberg, J., &ldquo;Obtaining and Using Globally Routable User Agent (UA) URIs (GRUU) in the  Session Initiation Protocol (SIP),&rdquo; October&nbsp;2007.</span><span>)</span></a> [I&#8209;D.ietf&#8209;sip&#8209;gruu] that points to the SIP instance in the User
	Agent where the file is available. This element completes the
	&lt;user-uri&gt; by providing an pointer to the SIP instance
	that is hosting the file.
      
</p>
<p>
	The &lt;name&gt; element contains the file name.
      
</p>
<p>
	The &lt;description&gt; element contains a human readable text
	describing the file.
      
</p>
<p>
	The &lt;iconptr&gt; element contains a URI that points to an
	icon that represents the file. This is typically
	applicable to image or video files.
      
</p>
<p>
	The &lt;creation-date&gt; element indicates the date and time
	at which the file was created.
      
</p>
<p>
	The &lt;modification-date&gt; element indicates the date and
	time at which the file was last modified.
      
</p>
<p>
	The &lt;read-date&gt; element indicates the date and time at
	which the file was last read.
      
</p>
<p>
	The &lt;keywords&gt; element is a container of keywords
	associated to the file. Its main purpose is to assist
	indexing and search engines. The &lt;keywords&gt; element
	contains one or more &lt;keyword&gt; elements (notice the
	singular form of the child elements). The &lt;keywords&gt;
	element MAY contain other attributes from different namespaces
	for the purposes of extensibility; attributes from unknown
	namespaces MUST be ignored.
      
</p>
<p>
	Each &lt;keyword&gt; element contains one word that represents
	a keyword associated to the file. A &lt;keyword&gt;
	element SHOULD NOT contain any white spaces. If several
	keywords are to be included, each one should be included in a
	separate &lt;keyword&gt; element.
      
</p>
<a name="partial-file-metadata-document"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Partial 'file-metadata' document: patch operations</h3>

<p>
	A partial 'file-metadata' document begins with the root
	element tag &lt;patch&gt; that describes a collection of <a class='info' href='#I-D.ietf-simple-xml-patch-ops'>XML patch operations<span> (</span><span class='info'>Urpalainen, J., &ldquo;An Extensible Markup Language (XML) Patch Operations Framework Utilizing XML  Path Language (XPath) Selectors,&rdquo; November&nbsp;2007.</span><span>)</span></a> [I&#8209;D.ietf&#8209;simple&#8209;xml&#8209;patch&#8209;ops] that are to be applied to a previous version of a full
	'file-metadata' document. The &lt;patch&gt; element contains a
	mandatory 'version' attribute whose counter is shared with the
	'version' attribute of the &lt;file-set&gt; element. Each new
	partial 'file-metadata' document MUST increment the 'version'
	attribute value by one, with respect the previously sent
	version. The value of the 'version' attribute can be used to
	ensure consistent updates as the recipient of the document can
	use the 'version' number to properly order received documents
	and to ensure that updates have not been lost.
      
</p>
<p>
	The &lt;patch&gt; element consists of one or more child
	&lt;add&gt;, &lt;replace&gt;, or &lt;remove&gt; elements whose
	type definitions are included from the <a class='info' href='#I-D.ietf-simple-xml-patch-ops'>XML Patch Operations<span> (</span><span class='info'>Urpalainen, J., &ldquo;An Extensible Markup Language (XML) Patch Operations Framework Utilizing XML  Path Language (XPath) Selectors,&rdquo; November&nbsp;2007.</span><span>)</span></a> [I&#8209;D.ietf&#8209;simple&#8209;xml&#8209;patch&#8209;ops] identified with the namespace
	"urn:ietf:params:xml:schema:xml-patch-ops".
      
</p>
<p>
	The &lt;patch&gt; element MAY contain other elements and
	attributes from different namespaces for the purposes of
	extensibility; elements or attributes from unknown namespaces
	MUST be ignored.
      
</p>
<p>
	The &lt;add&gt; element is used to add new content to the
	'file-metadata' document. The details of the &lt;add&gt;
	element are discussed in the <a class='info' href='#I-D.ietf-simple-xml-patch-ops'>XML Patch Operations<span> (</span><span class='info'>Urpalainen, J., &ldquo;An Extensible Markup Language (XML) Patch Operations Framework Utilizing XML  Path Language (XPath) Selectors,&rdquo; November&nbsp;2007.</span><span>)</span></a> [I&#8209;D.ietf&#8209;simple&#8209;xml&#8209;patch&#8209;ops].
      
</p>
<p>
	The &lt;replace&gt; element is used to update content in the
	'file-metadata' document. The details of the &lt;replace&gt;
	element are discussed in the <a class='info' href='#I-D.ietf-simple-xml-patch-ops'>XML Patch Operations<span> (</span><span class='info'>Urpalainen, J., &ldquo;An Extensible Markup Language (XML) Patch Operations Framework Utilizing XML  Path Language (XPath) Selectors,&rdquo; November&nbsp;2007.</span><span>)</span></a> [I&#8209;D.ietf&#8209;simple&#8209;xml&#8209;patch&#8209;ops].
      
</p>
<p>
	The &lt;remove&gt; element is used to remove content from the
	'file-metadata' document. The details of the &lt;remove&gt;
	element are discussed in the <a class='info' href='#I-D.ietf-simple-xml-patch-ops'>XML Patch Operations<span> (</span><span class='info'>Urpalainen, J., &ldquo;An Extensible Markup Language (XML) Patch Operations Framework Utilizing XML  Path Language (XPath) Selectors,&rdquo; November&nbsp;2007.</span><span>)</span></a> [I&#8209;D.ietf&#8209;simple&#8209;xml&#8209;patch&#8209;ops].
      
</p>
<p>
	Once all the patch operations have been applied to the
	previous full 'file-metadata' document, a new full
	'file-metadata' document is created with the same 'version'
	attribute value, letting a subsequent partial 'file-metadata'
	document operate on the last full document.
      
</p>
<a name="schema"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
XML Schema</h3>

<p>
	Implementations according to this specification MUST comply to
	the following XML schema that defines the constraints of the
	'file-metadata' document:
      
</p><br /><hr class="insert" />
<a name="fig-schema"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
   &lt;xs:schema targetNamespace="urn:ietf:params:xml:ns:file"
      xmlns:xs="http://www.w3.org/2001/XMLSchema"
      xmlns="urn:ietf:params:xml:ns:file"
      elementFormDefault="qualified"
      attributeFormDefault="unqualified"&gt;

    &lt;xs:import namespace="http://www.w3.org/XML/1998/namespace"
            schemaLocation="http://www.w3.org/2001/xml.xsd"/&gt;

    &lt;xs:annotation&gt;
      &lt;xs:documentation xml:lang="en"&gt;
        XML Schema Definition to provide information about
        available files at a host.
      &lt;/xs:documentation&gt;
    &lt;/xs:annotation&gt;

    &lt;!-- include xml-patch-ops type definitions --&gt;
    &lt;xs:include
      schemaLocation="urn:ietf:params:xml:schema:xml-patch-ops"/&gt;

    &lt;xs:element name="file-set" type="file-setType"/&gt;
    &lt;xs:element name="patch" type="patchType"/&gt;

    &lt;xs:complexType name="file-setType"&gt;
      &lt;xs:sequence&gt;
        &lt;xs:element name="file" type="fileType"
                        maxOccurs="unbounded"/&gt;
        &lt;xs:element name="timestamp" type="xs:dateTime"
                        minOccurs="0"/&gt;
        &lt;xs:element name="note" type="note" minOccurs="0"
            maxOccurs="unbounded"/&gt;
        &lt;xs:any namespace="##other" processContents="lax"
                   minOccurs="0" maxOccurs="unbounded"/&gt;
      &lt;/xs:sequence&gt;
      &lt;xs:attribute name="version" type="xs:unsignedInt"
                       use="required"/&gt;
      &lt;xs:anyAttribute namespace="##other" processContents="lax"/&gt;
    &lt;/xs:complexType&gt;

    &lt;xs:complexType name="fileType"&gt;
      &lt;xs:sequence&gt;
        &lt;xs:element name="identity" type="identityType" /&gt;
        &lt;xs:element name="instance" type="instanceType"
                       maxOccurs="unbounded" /&gt;

        &lt;xs:any namespace="##other" processContents="lax"
                   minOccurs="0" maxOccurs="unbounded"/&gt;
      &lt;/xs:sequence&gt;
      &lt;xs:attribute name="id" type="xs:ID" use="required"/&gt;
      &lt;xs:anyAttribute namespace="##other" processContents="lax"/&gt;
    &lt;/xs:complexType&gt;

    &lt;xs:complexType name="identityType"&gt;
      &lt;xs:sequence&gt;
        &lt;xs:element name="urn" type="xs:anyURI" minOccurs="0"/&gt;
        &lt;xs:element name="mime-type" type="xs:string" minOccurs="0"/&gt;
        &lt;xs:element name="size" type="xs:nonNegativeInteger"
                       minOccurs="0"/&gt;
        &lt;xs:element name="sha1" type="xs:hexBinary" minOccurs="0"/&gt;
        &lt;xs:any namespace="##other" processContents="lax"
                   minOccurs="0" maxOccurs="unbounded"/&gt;
      &lt;/xs:sequence&gt;
      &lt;xs:attribute name="id" type="xs:ID" use="required"/&gt;
      &lt;xs:anyAttribute namespace="##other" processContents="lax"/&gt;
    &lt;/xs:complexType&gt;

    &lt;xs:complexType name="instanceType"&gt;
      &lt;xs:sequence&gt;
        &lt;xs:element name="name" type="xs:string" minOccurs="0"/&gt;
        &lt;xs:element name="description" type="xs:string"
                       minOccurs="0"/&gt;
        &lt;xs:element name="uri" type="xs:anyURI" minOccurs="0"
                       maxOccurs="unbounded"/&gt;
        &lt;xs:element name="user-uri" type="xs:anyURI" minOccurs="0"/&gt;
        &lt;xs:element name="user-gruu" type="xs:anyURI" minOccurs="0"/&gt;
        &lt;xs:element name="iconptr" type="xs:anyURI"
                       minOccurs="0"/&gt;
        &lt;xs:element name="creation-date" type="xs:dateTime"
                       minOccurs="0"/&gt;
        &lt;xs:element name="modification-date" type="xs:dateTime"
                       minOccurs="0"/&gt;
        &lt;xs:element name="read-date" type="xs:dateTime"
                       minOccurs="0"/&gt;
        &lt;xs:element name="keywords" type="keywordsType"
                       minOccurs="0"/&gt;
        &lt;xs:any namespace="##other" processContents="lax"
                   minOccurs="0" maxOccurs="unbounded"/&gt;
      &lt;/xs:sequence&gt;
      &lt;xs:attribute name="id" type="xs:ID" use="required"/&gt;
      &lt;xs:anyAttribute namespace="##other" processContents="lax"/&gt;
    &lt;/xs:complexType&gt;

    &lt;xs:complexType name="keywordsType"&gt;
      &lt;xs:sequence&gt;
        &lt;xs:element name="keyword" type="xs:token"
                       maxOccurs="unbounded" /&gt;
        &lt;xs:any namespace="##other" processContents="lax"
                   minOccurs="0" maxOccurs="unbounded"/&gt;
      &lt;/xs:sequence&gt;
      &lt;xs:anyAttribute namespace="##other" processContents="lax"/&gt;
    &lt;/xs:complexType&gt;

    &lt;xs:complexType name="patchType"&gt;
      &lt;xs:choice minOccurs="0" maxOccurs="unbounded"&gt;
          &lt;xs:element name="add" type="add"/&gt;
          &lt;xs:element name="replace" type="replace"/&gt;
          &lt;xs:element name="remove" type="remove"/&gt;
      &lt;/xs:choice&gt;
      &lt;xs:attribute name="version" type="xs:unsignedInt"/&gt;
    &lt;/xs:complexType&gt;

    &lt;xs:complexType name="note"&gt;
      &lt;xs:simpleContent&gt;
        &lt;xs:extension base="xs:string"&gt;
          &lt;xs:attribute ref="xml:lang"/&gt;&gt;
        &lt;/xs:extension&gt;
      &lt;/xs:simpleContent&gt;
    &lt;/xs:complexType&gt;

   &lt;/xs:schema&gt;
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: 'file-metadata' document XML schema&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="sec-example"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4"></a><h3>3.4.&nbsp;
Examples</h3>

<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4.1"></a><h3>3.4.1.&nbsp;
Example of a full 'file-document' document</h3>

<p>
	  <a class='info' href='#fig-example-full-1'>Figure&nbsp;2<span> (</span><span class='info'>Example of a full 'file-metadata' document</span><span>)</span></a> is an example of a
	  'file-metadata' document.
	
</p><br /><hr class="insert" />
<a name="fig-example-full-1"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
   &lt;file-set xmlns="urn:ietf:params:xml:ns:file"
          version="123"&gt;
     &lt;file id="id38sh12jd"&gt;

       &lt;identity id="id9d8c9"&gt;
         &lt;mime-type&gt;image/jpeg&lt;/mime-type&gt;
         &lt;size&gt;230432&lt;/size&gt;
         &lt;sha1&gt;72245FE8653DDAF371362F86D471913EE4A2CE2E&lt;/sha1&gt;
       &lt;/identity&gt;

       &lt;instance id="idc989c00"&gt;
         &lt;name&gt;coolpic.jpg&lt;/name&gt;
         &lt;description&gt;
             This is my latest cool picture from my summer vacation
         &lt;/description&gt;
         &lt;user-uri&gt;sip:miguel.an.garcia@example.com&lt;/user-uri&gt;
         &lt;user-gruu&gt;
           sip:miguel.an.garcia@example.com;
                gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6
         &lt;/user-gruu&gt;
         &lt;iconptr&gt;http://www.example.com/coolpic-icon.jpg&lt;/iconptr&gt;
         &lt;creation-date&gt;2006-05-09T09:30:47+03:00&lt;/creation-date&gt;
         &lt;modification-date&gt;
             2006-05-09T10:24:34+03:00
         &lt;/modification-date&gt;
         &lt;read-date&gt;2006-05-10T14:24:32+03:00&lt;/read-date&gt;
         &lt;keywords&gt;
           &lt;keyword&gt;summer&lt;/keyword&gt;
           &lt;keyword&gt;vacation&lt;/keyword&gt;
         &lt;/keywords&gt;
       &lt;/instance&gt;
     &lt;/file&gt;

     &lt;timestamp&gt;2007-11-12T09:55:28Z&lt;/timestamp&gt;
     &lt;note xml:lang="en"&gt;There is only one available file&lt;/note&gt;

   &lt;/file-set&gt;
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: Example of a full 'file-metadata' document&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
	  The example in <a class='info' href='#fig-example-full-1'>Figure&nbsp;2<span> (</span><span class='info'>Example of a full 'file-metadata' document</span><span>)</span></a> shows a
	  full 'file-metadata' document. The example contains the
	  description of a single file: an image file. The source of
	  the information provides description of the file (an
	  &lt;file&gt; element) that contains the static data of the
	  file included in the &lt;identity&gt; element and the
	  variable data (that depends on the actual instance of the
	  file) in the &lt;instance&gt; element. The &lt;identity&gt;
	  element contains a number of characteristics of the file
	  that would not change across different instances, such as
	  the MIME type, the size, and the hash of the file. On the
	  contrary, the &lt;instance&gt; element contains the data
	  related to the particular instance of the file, such as the
	  name assigned by the user to the file, a human readable
	  description, the GRUU that points to the SIP User Agent
	  where the file is stored, the creation, modification, and
	  read dates, etc. Last, a &lt;timestamp&gt; and a
	  &lt;note&gt; elements indicate the date and time when the
	  XML document was created and a human readable note.
	
</p>
<a name="file-metadata-example-partial-1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4.2"></a><h3>3.4.2.&nbsp;
Example of a partial 'file-metadata' document</h3>

<p>
	  <a class='info' href='#fig-example-partial-1'>Figure&nbsp;3<span> (</span><span class='info'>Example of a partial 'file-metadata' document</span><span>)</span></a> is an example
	  of a partial 'file-metadata' document.
	
</p><br /><hr class="insert" />
<a name="fig-example-partial-1"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
  &lt;patch xmlns="urn:ietf:params:xml:ns:file"
               version="124"&gt;
     &lt;add sel="file-set"&gt;
       &lt;file id="b390d92"&gt;

         &lt;identity id="mm8b8d"&gt;
           &lt;mime-type&gt;message/msrp&lt;/mime-type&gt;
         &lt;/identity&gt;

         &lt;instance id="hhdu23"&gt;
           &lt;name&gt;IETFers chat room&lt;/name&gt;
           &lt;description&gt;
                Dedicated chat room for IETF discussions
           &lt;/description&gt;
           &lt;user-gruu&gt;
               sip:miguel.an.garcia@example.com;
                 gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6
           &lt;/user-gruu&gt;
           &lt;user-uri&gt;sip:miguel.an.garcia@example.com&lt;/user-uri&gt;
         &lt;/instance&gt;
       &lt;/file&gt;
     &lt;/add&gt;

     &lt;replace sel="file-set/timestamp"&gt;
        &lt;timestamp&gt;2007-11-12T11:00:00Z&lt;/timestamp&gt;
     &lt;/replace&gt;

     &lt;replace sel="file-set/note"&gt;
        &lt;note xml:lange="en"&gt;Now I have two available files&lt;/note&gt;
     &lt;/replace&gt;
  &lt;/patch&gt;

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3: Example of a partial 'file-metadata' document&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
	  The example in <a class='info' href='#fig-example-partial-1'>Figure&nbsp;3<span> (</span><span class='info'>Example of a partial 'file-metadata' document</span><span>)</span></a> shows
	  an example of a partial 'file-metadata' document. The
	  document contains the patch operations that adds one more
	  new file to the existing list of files, so the result of
	  applying the patch to the initial file metadata document of
	  <a class='info' href='#fig-example-full-1'>Figure&nbsp;2<span> (</span><span class='info'>Example of a full 'file-metadata' document</span><span>)</span></a> results in a document
	  that contains the description of two files.
	
</p>
<p>
	  The 'version' attribute of
	  the &lt;patch&gt; element is incremented by one with respect
	  the 'version' attribute of the &lt;file-set&gt; element of
	  the full 'file-metadata' document in <a class='info' href='#fig-example-full-1'>Figure&nbsp;2<span> (</span><span class='info'>Example of a full 'file-metadata' document</span><span>)</span></a>. The document replaces the
	  previous &lt;timestamp&gt; and &lt;note&gt; elements with
	  new values.
	
</p>
<a name="file-example-full-2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4.3"></a><h3>3.4.3.&nbsp;
Example of a full 'file-metadata' document</h3>

<p>
	  <a class='info' href='#fig-example-full-2'>Figure&nbsp;4<span> (</span><span class='info'>Example of a full 'file-metadata' document</span><span>)</span></a> is an example of a
	  full 'file-metadata' document.
	
</p><br /><hr class="insert" />
<a name="fig-example-full-2"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   &lt;?xml version="1.0" encoding="UTF-8"?&gt;
   &lt;file-set xmlns="urn:ietf:params:xml:ns:file"
          version="312"&gt;
     &lt;file id="nkcdn0"&gt;

       &lt;identity id="aa77d7"&gt;
         &lt;mime-type&gt;audio/3gpp&lt;/mime-type&gt;
         &lt;size&gt;34987&lt;/size&gt;
         &lt;sha1&gt;E05DA01A590E31F6E3100AD7BEC39C63464A1CD0&lt;/sha1&gt;
       &lt;/identity&gt;

      &lt;instance id="idea1dof"&gt;
         &lt;name&gt;recording-1.3gp&lt;/name&gt;
         &lt;description&gt;
             Bob's speech at a conference
         &lt;/description&gt;
         &lt;user-uri&gt;sip:miguel.an.garcia@example.com&lt;/user-uri&gt;
         &lt;user-gruu&gt;
           sip:miguel.an.garcia@example.com;
                 gr=urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6
         &lt;/user-gruu&gt;
         &lt;creation-date&gt;2006-05-01T01:30:47+03:00&lt;/creation-date&gt;
         &lt;modification-date&gt;
             2006-05-02T02:24:34+03:00
         &lt;/modification-date&gt;
         &lt;read-date&gt;2006-05-03T03:24:32+03:00&lt;/read-date&gt;
         &lt;keywords&gt;
           &lt;keyword&gt;Bob&lt;/keyword&gt;
           &lt;keyword&gt;speech&lt;/keyword&gt;
         &lt;/keywords&gt;
       &lt;/instance&gt;

       &lt;instance id="kxf-312"&gt;
         &lt;name&gt;bob-speech.3gp&lt;/name&gt;
         &lt;description&gt;
             Bob talking about nanotechnology
         &lt;/description&gt;
         &lt;user-uri&gt;sip:alice@example.com&lt;/user-uri&gt;
         &lt;user-gruu&gt;
           sip:alice@example.com;
                 gr=urn:uuid:f81d4fae-7dec-11d0-4de9-00a2ac4e398a
         &lt;/user-gruu&gt;
         &lt;creation-date&gt;2006-05-01T01:30:47+03:00&lt;/creation-date&gt;
         &lt;modification-date&gt;
             2006-05-02T02:24:34+03:00
         &lt;/modification-date&gt;
         &lt;read-date&gt;2006-05-24T05:12:07+02:00&lt;/read-date&gt;
         &lt;keywords&gt;
           &lt;keyword&gt;Bob&lt;/keyword&gt;
           &lt;keyword&gt;nanotechnology&lt;/keyword&gt;
         &lt;/keywords&gt;
       &lt;/instance&gt;
     &lt;/file&gt;

   &lt;timestamp&gt;2007-11-12T14:01:02Z&lt;/timestamp&gt;
   &lt;note&gt;There is a single file available at two endpoints&lt;/note&gt;

   &lt;/file-set&gt;
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;4: Example of a full 'file-metadata' document&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
	  The example in <a class='info' href='#fig-example-full-2'>Figure&nbsp;4<span> (</span><span class='info'>Example of a full 'file-metadata' document</span><span>)</span></a> shows an
	  example of a full 'file-metadata' document. The document
	  describes a single audio file, which is available at two
	  difference hosts, thus, the 'file-metadata' document starts
	  with a &lt;file-set&gt; element that contains the
	  description of the file in the &lt;file&gt; element. The
	  &lt;file&gt; element contains an &lt;identity&gt; element
	  and two &lt;instance&gt; elements. The &lt;identity&gt;
	  element contains descriptive invariant data of the
	  file. Each of the &lt;instance&gt; elements contains data
	  related to the particular instance where the file is
	  available.
	
</p>
<a name="file-example-partial-2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4.4"></a><h3>3.4.4.&nbsp;
Example of a partial 'file-metadata' document</h3>

<p>
	  <a class='info' href='#fig-example-partial-2'>Figure&nbsp;5<span> (</span><span class='info'>Example of a partial 'file-metadata' document</span><span>)</span></a> is an example
	  of a partial 'file-metadata' document.
	
</p><br /><hr class="insert" />
<a name="fig-example-partial-2"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   &lt;?xml version="1.0" encoding="UTF-8"?&gt;
   &lt;patch xmlns="urn:ietf:params:xml:ns:file"
          version="313"&gt;

     &lt;add sel="file-set/file[@id='nkcdn0']"&gt;
       &lt;instance id="ak6v3d"&gt;
         &lt;name&gt;nanotalk.3gp&lt;/name&gt;
         &lt;description&gt;
              Nanotechnology speech
         &lt;/description&gt;
         &lt;user-gruu&gt;
             sip:bob@example.com;
                 gr=urn:uuid:f81d4fae-7dec-11d0-5d3a-bbc333431122
         &lt;/user-gruu&gt;
         &lt;user-uri&gt;sip:bob@example.com&lt;/user-uri&gt;
       &lt;/instance&gt;
     &lt;/add&gt;

     &lt;replace sel="id('idea1dof')/read-date/text()"
         &gt;2006-06-07T17:26:04+03:00&lt;/replace&gt;
     &lt;replace sel="file-set/timestamp"&gt;
         &lt;timestamp&gt;2007-11-12T18:02:02Z&lt;/timestamp&gt;
     &lt;/replace&gt;

     &lt;replace sel="file-set/note"&gt;
         &lt;note xml:lange="en"&lt;Three instances of the same file&lt;/note&gt;
     &lt;/replace&gt;
  &lt;/patch&gt;
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;5: Example of a partial 'file-metadata' document&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>
	  <a class='info' href='#fig-example-partial-2'>Figure&nbsp;5<span> (</span><span class='info'>Example of a partial 'file-metadata' document</span><span>)</span></a> contains a
	  number of XML patch operations to be applied to the full
	  'file-metadata' document included in <a class='info' href='#fig-example-full-2'>Figure&nbsp;4<span> (</span><span class='info'>Example of a full 'file-metadata' document</span><span>)</span></a>. The document in <a class='info' href='#fig-example-partial-2'>Figure&nbsp;5<span> (</span><span class='info'>Example of a partial 'file-metadata' document</span><span>)</span></a> starts with a
	  &lt;patch&gt; root element, indicating that it is a partial
	  'file-metadata' document. The 'version' attribute is incremented
	  by one with respect the 'version' attribute of the
	  &lt;file-set&gt; element of the full 'file-metadata' document of
	  <a class='info' href='#fig-example-full-2'>Figure&nbsp;4<span> (</span><span class='info'>Example of a full 'file-metadata' document</span><span>)</span></a>.
	
</p>
<p>
	  The document contains an &lt;add&gt; element that first
	  selects the &lt;file&gt; element whose 'id' attribute is set
	  to "nkcdn0". Then it appends, at the end of the existing child
	  elements, a new &lt;instance&gt; element that describes the
	  availability of the same file at a different endpoint.
	
</p>
<p>
	  The first &lt;replace&gt; element selects the
	  &lt;read-date&gt; element of the &lt;instance&gt; whose 'id'
	  attribute is set to "idea1dof" and replaces the value with a
	  new date and time. Then, the following &lt;replace&gt;
	  elements replace the &lt;timestamp&gt; and &lt;note&gt;
	  elements, respectively.
	
</p>
<p>
	  </p>
<blockquote class="text"><dl>
<dt></dt>
<dd>
	      Note: the 'sel' attribute of the &lt;replace&gt; element
	      in <a class='info' href='#fig-example-partial-2'>Figure&nbsp;5<span> (</span><span class='info'>Example of a partial 'file-metadata' document</span><span>)</span></a> is split
	      in two lines due to formatting restrictions. It will
	      appear as a single line in XML documents.
	    
</dd>
</dl></blockquote><p>
	
</p>
<a name="security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Security Considerations</h3>

<p>
TBD

</p>
<a name="iana"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
IANA Considerations</h3>

<p>
TBD

</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>6.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to
          Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="ftp://ftp.isi.edu/in-notes/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2141">[RFC2141]</a></td>
<td class="author-text"><a href="mailto:jayhawk@ds.internic.net">Moats, R.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2141">URN Syntax</a>,&rdquo; RFC&nbsp;2141, May&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2141.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2141.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2141.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3174">[RFC3174]</a></td>
<td class="author-text">Eastlake, D. and P. Jones, &ldquo;<a href="http://tools.ietf.org/html/rfc3174">US Secure Hash Algorithm 1 (SHA1)</a>,&rdquo; RFC&nbsp;3174, September&nbsp;2001 (<a href="http://www.rfc-editor.org/rfc/rfc3174.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3339">[RFC3339]</a></td>
<td class="author-text"><a href="mailto:GK@ACM.ORG">Klyne, G., Ed.</a> and <a href="mailto:chris.newman@sun.com">C. Newman</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc3339">Date and Time on the Internet: Timestamps</a>,&rdquo; RFC&nbsp;3339, July&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3339.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc3339.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc3339.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3629">[RFC3629]</a></td>
<td class="author-text">Yergeau, F., &ldquo;<a href="http://tools.ietf.org/html/rfc3629">UTF-8, a transformation format of ISO 10646</a>,&rdquo; STD&nbsp;63, RFC&nbsp;3629, November&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3629.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3986">[RFC3986]</a></td>
<td class="author-text"><a href="mailto:timbl@w3.org">Berners-Lee, T.</a>, <a href="mailto:fielding@gbiv.com">Fielding, R.</a>, and <a href="mailto:LMM@acm.org">L. Masinter</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc3986">Uniform Resource Identifier (URI): Generic Syntax</a>,&rdquo; STD&nbsp;66, RFC&nbsp;3986, January&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc3986.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc3986.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc3986.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="W3C.REC-xml-20001006">[W3C.REC-xml-20001006]</a></td>
<td class="author-text">Sperberg-McQueen, C., Maler, E., Paoli, J., and T. Bray, &ldquo;<a href="http://www.w3.org/TR/2000/REC-xml-20001006">Extensible Markup Language (XML) 1.0 (Second Edition)</a>,&rdquo; World Wide Web Consortium FirstEdition&nbsp;REC-xml-20001006, October&nbsp;2000 (<a href="http://www.w3.org/TR/2000/REC-xml-20001006">HTML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-simple-xml-patch-ops">[I-D.ietf-simple-xml-patch-ops]</a></td>
<td class="author-text">Urpalainen, J., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-simple-xml-patch-ops-04.txt">An Extensible Markup Language (XML) Patch Operations Framework Utilizing XML  Path Language (XPath) Selectors</a>,&rdquo; draft-ietf-simple-xml-patch-ops-04 (work in progress), November&nbsp;2007 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-simple-xml-patch-ops-04.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>6.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2616">[RFC2616]</a></td>
<td class="author-text"><a href="mailto:fielding@ics.uci.edu">Fielding, R.</a>, <a href="mailto:jg@w3.org">Gettys, J.</a>, <a href="mailto:mogul@wrl.dec.com">Mogul, J.</a>, <a href="mailto:frystyk@w3.org">Frystyk, H.</a>, <a href="mailto:masinter@parc.xerox.com">Masinter, L.</a>, <a href="mailto:paulle@microsoft.com">Leach, P.</a>, and <a href="mailto:timbl@w3.org">T. Berners-Lee</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2616">Hypertext Transfer Protocol -- HTTP/1.1</a>,&rdquo; RFC&nbsp;2616, June&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2616.txt">TXT</a>, <a href="http://www.rfc-editor.org/rfc/rfc2616.ps">PS</a>, <a href="http://www.rfc-editor.org/rfc/rfc2616.pdf">PDF</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2616.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2616.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3261">[RFC3261]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;<a href="http://tools.ietf.org/html/rfc3261">SIP: Session Initiation Protocol</a>,&rdquo; RFC&nbsp;3261, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3261.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-sip-gruu">[I-D.ietf-sip-gruu]</a></td>
<td class="author-text">Rosenberg, J., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-sip-gruu-15.txt">Obtaining and Using Globally Routable User Agent (UA) URIs (GRUU) in the  Session Initiation Protocol (SIP)</a>,&rdquo; draft-ietf-sip-gruu-15 (work in progress), October&nbsp;2007 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-sip-gruu-15.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.garcia-sipping-file-sharing-framework">[I-D.garcia-sipping-file-sharing-framework]</a></td>
<td class="author-text">Garcia-Martin, M., Matuszewski, M., Beijar, N., and J. Lehtinen, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-garcia-sipping-file-sharing-framework-01.txt">Sharing Files with the Session Initiation Protocol (SIP)</a>,&rdquo; draft-garcia-sipping-file-sharing-framework-01 (work in progress), November&nbsp;2007 (<a href="http://www.ietf.org/internet-drafts/draft-garcia-sipping-file-sharing-framework-01.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Miguel A. Garcia-Martin</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia Siemens Networks</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">P.O.Box 22</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia Siemens Networks, FIN  02022</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:miguel.garcia@nsn.com">miguel.garcia@nsn.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Marcin Matuszewski</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">P.O.Box 407</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">NOKIA GROUP, FIN  00045</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:marcin.matuszewski@nokia.com">marcin.matuszewski@nokia.com</a></td></tr>
</table>
<a name="rfc.copyright"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Full Copyright Statement</h3>
<p class='copyright'>
Copyright &copy; The IETF Trust (2007).</p>
<p class='copyright'>
This document is subject to the rights,
licenses and restrictions contained in BCP&nbsp;78,
and except as set forth therein,
the authors retain all their rights.</p>
<p class='copyright'>
This document and the information contained herein are provided
on an &ldquo;AS IS&rdquo; basis and THE CONTRIBUTOR,
THE ORGANIZATION HE/SHE REPRESENTS
OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE.</p>
<h3>Intellectual Property</h3>
<p class='copyright'>
The IETF takes no position regarding the validity or scope of any
Intellectual Property Rights or other rights that might be claimed
to pertain to the implementation or use of the technology
described in this document or the extent to which any license
under such rights might or might not be available; nor does it
represent that it has made any independent effort to identify any
such rights.
Information on the procedures with respect to
rights in RFC documents can be found in BCP&nbsp;78 and BCP&nbsp;79.</p>
<p class='copyright'>
Copies of IPR disclosures made to the IETF Secretariat and any
assurances of licenses to be made available,
or the result of an attempt made to obtain a general license or
permission for the use of such proprietary rights by implementers or
users of this specification can be obtained from the IETF on-line IPR
repository at <a href='http://www.ietf.org/ipr'>http://www.ietf.org/ipr</a>.</p>
<p class='copyright'>
The IETF invites any interested party to bring to its attention
any copyrights,
patents or patent applications,
or other
proprietary rights that may cover technology that may be required
to implement this standard.
Please address the information to the IETF at <a href='mailto:ietf-ipr@ietf.org'>ietf-ipr@ietf.org</a>.</p>
</body></html>
