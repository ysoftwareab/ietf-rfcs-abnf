Network Working Group                                       K. Ishiguro
Internet Draft                                         IP Infusion Inc.
Expiration Date: January 2005                                 T. Takada
                                                       IP Infusion Inc.
                                                              July 2004



            Traffic Engineering Extensions to OSPF version 3


                 draft-ietf-ospf-ospfv3-traffic-02.txt



Status of this Memo


   By submitting this Internet-Draft, each author represents that any
   applicable patent or other intellectual property right (IPR) claims
   of which he or she is aware have been or will be disclosed, and any
   of which he or she becomes aware will be disclosed, in accordance
   with Section 6 of RFC 3668.


   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.


   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet- Drafts as reference
   material or to cite them other than as "work in progress."


   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt


   To view the list Internet-Draft Shadow Directories, see
   http://www.ietf.org/shadow.html.



Copyright Notice


   Copyright (C) The Internet Society (2004).  All Rights Reserved.



Abstract


   This document describes extensions to OSPFv3 to support intra-area
   Traffic Engineering (TE).


   This document extends OSPFv2 TE to handle IPv6 networks. A new TLV




Ishiguro                  Expires January 2005                  [Page 1]
Internet Draft    draft-ietf-ospf-ospfv3-traffic-02.txt        July 2004



   and several new sub-TLVs are defined to support IPv6 networks.



1. Applicability


   OSPFv3 has a very flexible mechanism for adding new LS types.
   Unknown LS types are flooded properly based on the flooding scope
   bits in the LS type [1]. This document proposes the addition of the
   Intra-Area-TE LSA to OSPFv3.


   For Traffic Engineering, this document uses "Traffic Engineering
   Extensions to OSPF" [2] as a base for TLV definitions.  New sub-TLVs
   are added to [2] to extend TE capabilities to IPv6 networks.  Some
   TLVs require clarification for OSPFv3 applicabilty. The new sub-TLVs
   described in this document can also be carried in OSPFv2 as described
   in [2].


   GMPLS [3] and the Diff-Serv aware MPLS Extensions [4] are based on
   [2]. These functions can also be extended to OSPFv3 by utilizing the
   TLV and sub-TLVs described in this document.



2. Node Address TLV


   A stable IP address of the advertising router that is always
   reachable is needed for traffic engineering.  Node address TLV [5]
   provides at least one routable node address.  This satisfy
   requirements of Traffic Engineering computation.  In OSPFv3 TE, node
   address TLV must be supported.



3. Router IPv6 Address TLV


   The Router IPv6 Address TLV will advertise a reachable IPv6 address.
   This is a stable IPv6 address that is always reachable if there is
   connectivity to the OSPFv3 router.


   The Router IPv6 Address TLV has type 3, length 16, and a value
   containing a 16 octet local IPv6 address. It MUST appear in exactly
   one Traffic Engineering LSA originated by an OSPFv3 router supporting
   the TE extentions.



4. Link TLV


   The Link TLV describes a single link and consists a set of sub-TLVs
   [2].  All of sub-TLVs in [2] other than the Link ID sub-TLV are
   applicable to OSPFv3.  The Link ID sub-TLV can't be used in OSPFv3




Ishiguro                  Expires January 2005                  [Page 2]
Internet Draft    draft-ietf-ospf-ospfv3-traffic-02.txt        July 2004



   due to the protocol differences between OSPFv2 and OSPFv3.


   Three new sub-TLVs for the Link TLV are defined:



     17 - Neighbor ID (8 octets)
     18 - Local Interface IPv6 Address (16N octets)
     19 - Remote Interface IPv6 Address (16N octets)



4.1 Link ID


   The Link ID sub-TLV is used in OSPFv2 to identify the other end of
   the link.  In OSPFv3, the Neighbor ID sub-TLV should be used for link
   identification. In OSPFv3, The Link ID sub-TLV should not be sent and
   should be ignored upon receipt.



4.2 Neighbor ID


   In OSPFv2, the Link ID is used to identify the other end of a link.
   In OSPFv3, the combination of Neighbor Interface ID and Neighbor
   Router ID are used for neighbor link identification. Both are adver-
   tised in the Neighbor ID Sub-TLV.


   The Neighbor ID sub-TLV has type 17, length 8, and contains the 4
   octet Neighbor Interface ID and the 4 octet Neighbor Router ID.
   Neighbor Interface ID and Neighbor Router ID values are the same as
   described in RFC 2740 [1] A.4.3 Router-LSAs.



4.3 Local Interface IPv6 Address


   The Local Interface IPv6 Address sub-TLV specifies the IPv6
   address(es) of the interface corresponding to this link.  If there
   are multiple local addresses on the link, they are all listed in this
   sub-TLV.  Link-local address should not be included in this sub-TLV.


   The Local Interface IPv6 Address sub-TLV has type 18, length 16N
   (where N is the number of local addresses), and contains the link's
   local addresses.



4.4 Remote Interface IPv6 Address


   The Remote Interface IPv6 Address sub-TLV advertises the IPv6
   address(es) associated with neighbor's interface.  This Sub-TLV and
   the Local Interface IPv6 address Sub-TLV are used to discern amongst




Ishiguro                  Expires January 2005                  [Page 3]
Internet Draft    draft-ietf-ospf-ospfv3-traffic-02.txt        July 2004



   parallel links between OSPFv3 routers.  If the Link Type is multi-
   access, the Remote Interface IPv6 Address is set to ::.  Link-local
   addresses should not be contained in this sub-TLV.


   The Remote Interface IPv6 Address sub-TLV has type 19, length 16N
   (where N is the number of local addresses), and contains the link
   neighbor's local addresses.



5. Intra-Area-TE-LSA


   A new LS type is defined for the Intra-Area-TE LSA. The LSA function
   code is 10, the U bit is set, and the scope is Area-scoping. When the
   U bit is set to 1 an OSPFv3 router must flood the LSA at its defined
   flooding scope even if it does not recognize the LS type [1].



     LSA function code  LS Type  Description
     --------------------------------------------------------------------
     10                 0xa00a   Intra-Area-TE-LSA



   The Link State ID of an Intra-Area-TE LSA will be the Interface ID of
   the link.



6. Security Considerations


   This memo does not create any new security issues for the OSPFv3 pro-
   tocol [1] or OSPFv2 Traffic Engineering extenstions [2].  Security
   considerations for OSPFv2 Traffic Engineering are covered in [2].



7. Acknowledgements


   Thanks to Vishwas Manral, Kireeti Kompella and Alex Zinin for their
   comments.



8. Normative Reference


   [1] R, Coltun, D. Ferguson, and J. Moy, "OSPF for IPv6", RFC 2740.


   [2] Katz, D., Yeung, D., Kompella, K., "Traffic Engineering
       Extensions to OSPF", RFC 3630.



9. Informative References




Ishiguro                  Expires January 2005                  [Page 4]
Internet Draft    draft-ietf-ospf-ospfv3-traffic-02.txt        July 2004



   [3] K. Kompella, Y. Rekhter, "OSPF Extensions in Support of
       Generalized MPLS", draft-ietf-ccamp-ospf-gmpls-extensions-12.txt,
       work in progress.


   [4] F. L. Faucheur, J. Boyle,  K. Kompella, W. Townsend, D. Skalecki,
       "Protocol extensions for support of Diff-Serv-aware MPLS Traffic
       Engineering", draft-ietf-tewg-diff-te-proto-07.txt, work in
       progress.


   [5] R. Aggarwal, K. Kompella, "Advertising a Router's Local Addresses
       in OSPF TE Extensions", draft-ietf-ospf-te-node-addr-00.txt, work
       in progress.



10. Author's Address


   Kunihiro Ishiguro
   IP Infusion Inc.
   111 W. St. John Street, Suite 910
   San Jose CA 95113
   e-mail: kunihiro@ipinfusion.com


   Toshiaki Takada
   IP Infusion Inc.
   111 W. St. John Street, Suite 910
   San Jose CA 95113
   e-mail: takada@ipinfusion.com



Intellectual Property Statement


   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be found
   in BCP 78 and BCP 79.


   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this specification
   can be obtained from the IETF on-line IPR repository at
   http://www.ietf.org/ipr.


   The IETF invites any interested party to bring to its attention any




Ishiguro                  Expires January 2005                  [Page 5]
Internet Draft    draft-ietf-ospf-ospfv3-traffic-02.txt        July 2004



   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.



Disclaimer of Validity


   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET
   ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.



Copyright Statement


   Copyright (C) The Internet Society (2004).  This document is subject
   to the rights, licenses and restrictions contained in BCP 78, and
   except as set forth therein, the authors retain all their rights.



Acknowledgment


   Funding for the RFC Editor function is currently provided by the
   Internet Society.
























Ishiguro                  Expires January 2005                  [Page 6]