<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Exploring the multi-router SOHO network</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.1.1" rel="Chapter" title="1.1 Definitions">
<link href="#rfc.section.1.2" rel="Chapter" title="1.2 Use Cases">
<link href="#rfc.section.2" rel="Chapter" title="2 Issues">
<link href="#rfc.section.2.1" rel="Chapter" title="2.1 Routing in a small network">
<link href="#rfc.section.2.2" rel="Chapter" title="2.2 Assigning Subnet Numbers">
<link href="#rfc.section.3" rel="Chapter" title="3 Possible Requirements">
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 Source/Destination Routing">
<link href="#rfc.section.3.2" rel="Chapter" title="3.2 Subnet assignment">
<link href="#rfc.section.3.3" rel="Chapter" title="3.3 Recommended upstream route">
<link href="#rfc.section.4" rel="Chapter" title="4 IANA Considerations">
<link href="#rfc.section.5" rel="Chapter" title="5 Security Considerations">
<link href="#rfc.section.5.1" rel="Chapter" title="5.1 Privacy Considerations">
<link href="#rfc.section.6" rel="Chapter" title="6 Acknowledgements">
<link href="#rfc.section.7" rel="Chapter" title="7 Change Log">
<link href="#rfc.references" rel="Chapter" title="8 References">
<link href="#rfc.references.1" rel="Chapter" title="8.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="8.2 Informative References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="This note explores the ramifications of a multi-router or multihomed small network, such as a residential or SOHO network." />
  <meta name="description" content="This note explores the ramifications of a multi-router or multihomed small network, such as a residential or SOHO network." />
  <meta name="keywords" content="" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Network Working Group</td>
<td class="right">F.J. Baker</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">Cisco Systems</td>
</tr>
<tr>
<td class="left">Intended status: Informational</td>
<td class="right">July 02, 2011</td>
</tr>
<tr>
<td class="left">Expires: January 03, 2012</td>
<td class="right"></td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Exploring the multi-router SOHO network<br />
  <span class="filename">draft-baker-fun-multi-router-00</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This note explores the ramifications of a multi-router or multihomed small network, such as a residential or SOHO network.</p>
<h1><a>Requirements</a></h1>
<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">[RFC2119]</a>.</p>
<p>For clarity, in this document the word "may" is distinguished from "MAY". Consistent with <a href="#RFC2119">[RFC2119]</a>, "MAY" refers to permission - something MAY or MAY NOT be done within a context. The word "may" refers to possibility; it is possible and correct for something to happen.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on January 03, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>1.1.   <a href="#rfc.section.1.1">Definitions</a>
</li>
<li>1.2.   <a href="#rfc.section.1.2">Use Cases</a>
</li>
<li>2.   <a href="#rfc.section.2">Issues</a>
</li>
<li>2.1.   <a href="#rfc.section.2.1">Routing in a small network</a>
</li>
<li>2.2.   <a href="#rfc.section.2.2">Assigning Subnet Numbers</a>
</li>
<li>3.   <a href="#rfc.section.3">Possible Requirements</a>
</li>
<li>3.1.   <a href="#rfc.section.3.1">Source/Destination Routing</a>
</li>
<li>3.2.   <a href="#rfc.section.3.2">Subnet assignment</a>
</li>
<li>3.3.   <a href="#rfc.section.3.3">Recommended upstream route</a>
</li>
<li>4.   <a href="#rfc.section.4">IANA Considerations</a>
</li>
<li>5.   <a href="#rfc.section.5">Security Considerations</a>
</li>
<li>5.1.   <a href="#rfc.section.5.1">Privacy Considerations</a>
</li>
<li>6.   <a href="#rfc.section.6">Acknowledgements</a>
</li>
<li>7.   <a href="#rfc.section.7">Change Log</a>
</li>
<li>8.   <a href="#rfc.references">References</a>
</li>
<li>8.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>8.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li><a href="#rfc.authors">Author's Address</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">This note explores the ramifications of a multi-router or multihomed small network, such as a residential or SOHO network. It has relevance to the IETF CPE Router discussion in the IPv6 Operations Working Group, numbering and renumbering in the "renum" effort, and scoping of the "fun" effort.</p>
<p id="rfc.section.1.p.2">Much of the commentary in this draft applies equally to <a href="#RFC0791">IPv4</a> <cite title="NONE">[RFC0791]</cite> or <a href="#RFC2460">IPv6</a> <cite title="NONE">[RFC2460]</cite>. As such, the protocol will simply be called "IP" unless there is a reason to distinguish. References will be IPv6-related unless there is a reason for an IPv4-specific reference.</p>
<h1 id="rfc.section.1.1">
<a href="#rfc.section.1.1">1.1.</a> <a href="#definitions" id="definitions">Definitions</a>
</h1>
<p id="rfc.section.1.1.p.1">I don't think I'm introducing new terms, but let me state the definitions of the terms I'm using for clarity. </p>

<dl>
<dt>LAN:</dt>
<dd style="margin-left: 8">A Local Area Network (LAN) is a network of link layer interfaces that can directly communicate without the use of a router. Example of LANs include IEEE 802.3 Ethernet, IEEE 802.11 WiFi, and IEEE 802.15.1 and IEEE 802.15.4 WPANs.</dd>
<dt>Subnet:</dt>
<dd style="margin-left: 8">A Subnet is a set of IP interfaces connected by a LAN. It by definition has a prefix, which serves as a locator in routing. Multiple subnets may use the same LAN, and the membership of those subnets may or may not be congruent.</dd>
<dt>LAN Switch:</dt>
<dd style="margin-left: 8">A LAN switch connects different physical media (wired or wireless) in a LAN, switching packets to make them appear to be a single LAN from the perspective of the systems attached to it.</dd>
<dt>Host:</dt>
<dd style="margin-left: 8">With respect to a given subnet, a host is a system that has an address in it and may originate traffic using that address, but does not switch packets between it and other subnets. See <a href="#RFC2460">[RFC2460]</a>.</dd>
<dt>Router:</dt>
<dd style="margin-left: 8">With respect to a given subnet, a router is a system that has an address in it, may originate traffic using that address, and additionally switches packets between it and other subnets. See <a href="#RFC2460">[RFC2460]</a>.</dd>
<dt>CPE Router:</dt>
<dd style="margin-left: 8">The Customer Premises Equipment (CPE) Router is the router on the customer premises that connects it to another network. The term is often used in the context of a Managed Service, which is a service in which an upstream network own and operates the router. In residential broadband networks, it is more common for the customer to own the router. For the purposes of this document, the term "CPE" simply means that it is on the customer's premises.</dd>
</dl>
<h1 id="rfc.section.1.2">
<a href="#rfc.section.1.2">1.2.</a> <a href="#usecase" id="usecase">Use Cases</a>
</h1>
<p id="rfc.section.1.2.p.1">The <a href="#RFC6204">Basic Requirements for IPv6 Customer Edge Routers</a> <cite title="NONE">[RFC6204]</cite> postulate a very simple network: a single router connecting a single subnet to a single upstream ISP. In general, one would expect that router to also implement a simple firewall implementing the <a href="#RFC6092">Recommended Simple Security Capabilities</a> <cite title="NONE">[RFC6092]</cite>.</p>
<p id="rfc.section.1.2.p.2">However, it is common, and in the future perhaps normal, for residential and SOHO networks to be more complex, with separate domains for </p>

<ul>
<li>domain-wide wired and/or wireless LANs with IP subnets,</li>
<li>offices with differing corporate security requirements for the residents,</li>
<li>networks with different PHY/MAC layers supporting the Smart Grid HAN or medical telemetry, and</li>
<li>networks for entertainment such as home-wide audio systems or high definition TV.</li>
</ul>
<p id="rfc.section.1.2.p.3">In addition, there is evidence that individual residences are likely to be multihomed, in the sense of having multiple upstream networks. There are at least three obvious cases: </p>

<ul>
<li>One obvious case is a home using traditional broadband (DSL or Cable Modem) and additionally using 3GPP or LTE as an upstream.</li>
<li>Another is a home equipped with a Smart Grid Energy Services Interface (ESI); such a home could be assigned a prefix by the utility for use in communications through the Advanced Metering Infrastructure (AMI). This is not an "ISP" in the usual sense of the term, as it provides limited services and only communicates to the relevant utility. It is, however, an "upstream" network in the sense that it allocates a prefix to the home and provides services for hire.</li>
<li>A third, which has been proposed in Japan, is a Content Delivery Network (CDN) that delivers entertainment via IP, and allocates a prefix to the home for communication with it. Again, this is not an "ISP" in the usual sense of the term, as it provides limited services and only communicates to the CDN servers. It is, however, an "upstream" network in the sense that it allocates a prefix to the home and provides services for hire.</li>
</ul>
<p id="rfc.section.1.2.p.4">As such services are deployed, it is reasonable to expect that the typical residence or SOHO will be multihomed.</p>
<p id="rfc.section.1.2.p.5">If one takes <a href="#RFC6204">[RFC6204]</a>'s view of such a network, one gets a picture something like <a href="#router0">Figure 1</a> (in that picture, consider "ISP" to be a generalized upstream network, not specifically one that delivers Internet access as a service). From the perspective of some, this would be a wireless LAN, or at most a wired LAN and a wireless LAN bridged together.</p>
<p></p>
<div id="#rfc.figure.1"></div>
<div id="#router0"></div>
<pre>
                          |
---.       +--------+     | HAN Sensors, ESI,.
    \      |        |     |
ISP1 )-----+        |     | Medical Sensors, .
    /      |        |     |
---'       | CPE    |     | Office Equipment
           | Router +-----+
---.       |        |     | A/V Equipment
    \      |        |     |
ISP2 )-----+        |     |
    /      |        |     |
---'       +--------+     |
                          |
                 home-wide|
                    LAN   |
                          |
</pre>
<p id="rfc.section.1.2.p.7">The model in <a href="#router0">Figure 1</a> has some obvious problems, however. Cisco Systems, for example, requires that telecommuter's offices have a security guard (firewall or separate Internet access) between the office and the home. There are known cases in which husband and wife or roommates each work for different companies and each company has such an information security guideline.  In addition, especially with a single SSID 802.11 implementation, one could readily imagine HD TV crowding out other uses, or BitTorrent crowding out the A/V uses. Separating the uses into separate LANs for manageability and service isolation, and especially with the Smart Grid's Home Area Network having a different physical interface (IEEE 802.15.4 being a prominent option), such a network begins to look like <a href="#router1">Figure 2</a>.</p>
<div id="#rfc.figure.2"></div>
<div id="#router1"></div>
<pre>
           +--------+  HAN Sensors, ESI,...
           |        +------------------
           |        |
---.       |        |  Medical Sensors, ...
    \      |        +------------------
ISP1 )-----+        |
    /      |        |  Office Equipment
---'       | CPE    +------------------
           | Router |
---.       |        |  Office Equipment
    \      |        +------------------
ISP2 )-----+        |
    /      |        |  A/V Equipment
---'       |        +------------------
           |        |
           |        |  SOHO-wide LAN
           |        +------------------
           +--------+
</pre>
<p id="rfc.section.1.2.p.8">Modulo the 802.15.4 interface, such routers exist today, providing multiple 802.3 and 802.11 LANs and routing between their subnets.  However, such a router begins to look like the IT counterpart to a Swiss Army knife, and networks are constrained by their interface count and type. An alternative would be to build the network out of two-port routers, as in <a href="#router2">Figure 3</a>.</p>
<div id="#rfc.figure.3"></div>
<div id="#router2"></div>
<pre>
                    |  +------+
                    +--+HAN   |  HAN Sensors, ESI,...
                    |  |Router+-------------------
                    |  +------+
---.       +------+ | +-------+
    \      |CPE   +-+ |Medical|  Medical Sensors, ...
ISP1 )-----+Router| +-+Router +-------------------
    /      +------+ | +-------+
---'                | +---------+
                    | |Office #1| Office Equipment
---.       +------+ +-+FW/Router+-----------------
    \      |CPE   +-+ +---------+
ISP2 )-----+Router| | +---------+
    /      +------+ | |Office #2| Office Equipment
---'                +-+FW/Router+-----------------
                    | +---------+
                    | +----------+
           SOHO-wide+-+A/V Domain| A/V Equipment
              LAN   | |Router    +----------------
                    | +----------+
</pre>
<p id="rfc.section.1.2.p.9">Reality is probably somewhere in the middle - some multiport routers and some two-port routers, depending on the application.</p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> <a href="#sect2" id="sect2">Issues</a>
</h1>
<p id="rfc.section.2.p.1">Three obvious questions arise in such networks: </p>

<ul>
<li>How does routing, including routing between interior routers and to exit routers, actually work? What features are needed?</li>
<li>How does the network identify and number its subnets?</li>
</ul>
<h1 id="rfc.section.2.1">
<a href="#rfc.section.2.1">2.1.</a> <a href="#routing" id="routing">Routing in a small network</a>
</h1>
<p id="rfc.section.2.1.p.1">A brief analysis of the advertised features of commercial residential routers - products designed for use by the uninitiated in their homes - found that almost without exception, they support <a href="#RFC2453">RIP Version 2</a> <cite title="NONE">[RFC2453]</cite>. At least one was found that supports <a href="#RFC1058">RIP Version 1</a> <cite title="NONE">[RFC1058]</cite>, and one that supports <a href="#RFC2328">OSPF Version 2</a> <cite title="NONE">[RFC2328]</cite>. By analogy, it seems rational to expect residential and SOHO routers for IPv6 to support <a href="#RFC2080">RIPng</a> <cite title="NONE">[RFC2080]</cite>, and possibly <a href="#RFC5340">OSPF</a> <cite title="NONE">[RFC5340]</cite>.</p>
<p id="rfc.section.2.1.p.2">The issues in distance vector routing, which are discussed in some detail in <a href="#RFC1058">[RFC1058]</a>, primarily relate to bogus information that has not been removed from the routing system, especially during a "count to infinity" event. Such events happen in networks that have parallel connectivity, which is usually implemented for robustness. The network in <a href="#router2">Figure 3</a> does not have parallel paths, and so would be unlikely to have that issue. More generally, an outage in a small network would likely result in the network administrator resetting the router in question. So RIPng should be adequate for the purpose.</p>
<p id="rfc.section.2.1.p.3">Another issue that arises, however, has to do with upstream <a href="#RFC2827">Ingress Filtering</a> <cite title="NONE">[RFC2827]</cite>. In a network with a router per upstream network, one would really like to direct traffic intended for a specific upstream network to the correct router. If hosts select the correct source address using <a href="#I-D.ietf-6man-rfc3484-revise">[I-D.ietf-6man-rfc3484-revise]</a>, <a href="#RFC3704">[RFC3704]</a> addresses that in part by suggesting that such routers redirect traffic to each other; a better approach would be to have a routing protocol that looks at {source, destination} address pairs and routes traffic to the appropriate exit.</p>
<h1 id="rfc.section.2.2">
<a href="#rfc.section.2.2">2.2.</a> <a href="#numbering" id="numbering">Assigning Subnet Numbers</a>
</h1>
<p id="rfc.section.2.2.p.1">In order for an upstream network such as an ISP or utility to assign a prefix to a small network, the CPE router must support <a href="#RFC3315">DHCPv6</a> <cite title="NONE">[RFC3315]</cite> and its <a href="#RFC3633">IPv6 Prefix Options</a> <cite title="NONE">[RFC3633]</cite>. This enables the CPE Router to obtain a prefix from its upstream network, be it an ISP, a content delivery service, or a utility, and begin to use it.</p>
<p id="rfc.section.2.2.p.2">If, for example, an ISP allocated a global prefix to the CPE, one would expect the CPE to allocate a default unicast route (in IPv6, a route to 2000::/3, which is to say "all unicast addresses", as opposed to ::/0, which would include link-local addresses, ULAs, and multicast traffic) toward the ISP. In the more limited cases of a CDN or utility, it may be appropriate for the upstream prefix to be more limited - it might recommend an upstream route to exactly the CDN service, or the address of a single anycast server/service.</p>
<p id="rfc.section.2.2.p.3">Within the small network, one would also hope for a way to assign subnet numbers; as others have suggested, this could build on the same capability as in <a href="#RFC3633">[RFC3633]</a>. If the CPE router has a prefix shorter than /64, other routers within the domain could ask it for /64s and have them assigned by the same mechanism. A hand-wave description would have any small-network router</p>

<ol>
<li>Come up as a host on each interface, emitting an RS and awaiting an RA from another router. On any interface that calculates its address using SLAAC, one would expect the router to use the same prefix(es) that it learned.</li>
<li>If no address is allocated on an interface via SLAAC within some interval, perhaps sixty microfortnights, the router could request a prefix using the mechanisms in <a href="#RFC3315">[RFC3315]</a> and <a href="#RFC3633">[RFC3633]</a>. For the ISP-facing CPE Router, this would result in a prefix shorter than /64; within the domain, it should result in a /64. In the ISP-facing case, one would expect the router to allocate a /64 to each of its non-ISP-facing interfaces and immediately emitting an RA; routers in those subnets would then create addresses using SLAAC.</li>
<li>If an additional interval of (perhaps) sixty microfortnights elapses, and the router has an IPv6 address on one or more of its interfaces, one could imagine the router requesting a new /64 on one of its addressed interfaces and assigning it to an un-addressed interface.</li>
</ol>
<p id="rfc.section.2.2.p.4">This procedure has an obvious race condition: if there are two routers on the same LAN, they could both request a prefix and simultaneously apply it. While not incorrect (IPv6 allows for multiple subnets on a LAN), it is inefficient. Two obvious mechanisms exist to counter this. If an SPF-based protocol such as OSPF or IS-IS is in use, and only the designated router requests a prefix, there will be a minimum number of subnets on the LAN. Alternatively, if the DHCPv6 server allocates prefixes with some non-trivial inter-assignment interval, the LANs should similarly have a minimum number of subnets.</p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> Possible Requirements</h1>
<p id="rfc.section.3.p.1">As the document is written, various possible requirements have popped up. These include at least the following.</p>
<h1 id="rfc.section.3.1">
<a href="#rfc.section.3.1">3.1.</a> <a href="#sdroute" id="sdroute">Source/Destination Routing</a>
</h1>
<p><a href="#routing">Section 2.1</a> notes that it would be nice to have a routing protocol that steered traffic toward an appropriate exit.  Stated generally, it would be nice to have a routing protocol that could generate routes *from* a source *to* a destination, as opposed to being simply *to* a destination.</p>
<h1 id="rfc.section.3.2">
<a href="#rfc.section.3.2">3.2.</a> Subnet assignment</h1>
<p id="rfc.section.3.2.p.1">A subnet assignment procedure such as described in <a href="#numbering">Section 2.2</a> is needed. That section shows a "hand-wavy" mechanism, but the mechanism needs to be worked out in detail.</p>
<h1 id="rfc.section.3.3">
<a href="#rfc.section.3.3">3.3.</a> Recommended upstream route</h1>
<p><a href="#numbering">Section 2.2</a> notes that it would be nice to have a way for the upstream network that provides a prefix to a customer also be able to give it a recommended upstream route. One obvious solution would be a DHCPv6 option that indicated some number of tuples, each consisting of </p>

<ul>
<li>A source prefix (which could be ::/0, the prefix assigned to the small network, or something else)</li>
<li>A destination prefix (which could be ::/0, 2000::/3, or a more specific appropriate to the service such as an anycast address or a data center prefix for a specific service offered by the ISP)</li>
<li>A set of DSCP values, which could be "any" or any more specific subset</li>
<li>One or more next hop router addresses</li>
</ul>
<p id="rfc.section.3.3.p.2">If source/destination routing is implemented as described in <a href="#sdroute">Section 3.1</a>, it might want to be able to specify that such datagrams must come *from* the prefix it assigned to the network.  This could be implemented using a routing protocol, but that is a big change to the way residential broadband networks usually work; a more acceptable approach may be a DHCPv6 option.</p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#IANA" id="IANA">IANA Considerations</a>
</h1>
<p id="rfc.section.4.p.1">This memo asks the IANA for no new parameters.</p>
<p id="rfc.section.4.p.2">Note to RFC Editor: This section will have served its purpose if it correctly tells IANA that no new assignments or registries are required, or if those assignments or registries are created during the RFC publication process. From the author"s perspective, it may therefore be removed upon publication as an RFC at the RFC Editor"s discretion.</p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#Security" id="Security">Security Considerations</a>
</h1>
<p></p>
<h1 id="rfc.section.5.1">
<a href="#rfc.section.5.1">5.1.</a> <a href="#Privacy" id="Privacy">Privacy Considerations</a>
</h1>
<p></p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#Acknowledgements" id="Acknowledgements">Acknowledgements</a>
</h1>
<p></p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#log" id="log">Change Log</a>
</h1>
<p></p>

<dl>
<dt>Initial Version:</dt>
<dd style="margin-left: 8">17 June 2011</dd>
</dl>
<h1 id="rfc.references">
<a href="#rfc.references">8.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">8.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2460">[RFC2460]</b></td>
<td class="top">
<a href="mailto:deering@cisco.com" title="Cisco Systems, Inc.">Deering, S.E.</a> and <a href="mailto:hinden@iprg.nokia.com" title="Nokia">R.M. Hinden</a>, "<a href="http://tools.ietf.org/html/rfc2460">Internet Protocol, Version 6 (IPv6) Specification</a>", RFC 2460, December 1998.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">8.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC0791">[RFC0791]</b></td>
<td class="top">
<a title="University of Southern California (USC)/Information Sciences Institute">Postel, J.</a>, "<a href="http://tools.ietf.org/html/rfc791">Internet Protocol</a>", STD 5, RFC 791, September 1981.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2080">[RFC2080]</b></td>
<td class="top">
<a href="mailto:gmalkin@Xylogics.COM" title="Xylogics, Inc.">Malkin, G.</a> and <a href="mailto:minnear@ipsilon.com" title="Ipsilon Networks, Inc.">R. Minnear</a>, "<a href="http://tools.ietf.org/html/rfc2080">RIPng for IPv6</a>", RFC 2080, January 1997.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-6man-rfc3484-revise">[I-D.ietf-6man-rfc3484-revise]</b></td>
<td class="top">
<a>Matsumoto, A</a>, <a>Kato, J</a>, <a>Fujisaki, T</a> and <a>T Chown</a>, "<a href="http://tools.ietf.org/html/draft-ietf-6man-rfc3484-revise-05">Update to RFC 3484 Default Address Selection for IPv6</a>", Internet-Draft draft-ietf-6man-rfc3484-revise-05, October 2011.</td>
</tr>
<tr>
<td class="reference"><b id="RFC1058">[RFC1058]</b></td>
<td class="top">
<a title="Rutgers University">Hedrick, C.</a>, "<a href="http://tools.ietf.org/html/rfc1058">Routing Information Protocol</a>", RFC 1058, June 1988.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2328">[RFC2328]</b></td>
<td class="top">
<a href="mailto:jmoy@casc.com" title="Ascend Communications, Inc.">Moy, J.</a>, "<a href="http://tools.ietf.org/html/rfc2328">OSPF Version 2</a>", STD 54, RFC 2328, April 1998.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2453">[RFC2453]</b></td>
<td class="top">
<a href="mailto:gmalkin@baynetworks.com" title="Bay Networks">Malkin, G.S.</a>, "<a href="http://tools.ietf.org/html/rfc2453">RIP Version 2</a>", STD 56, RFC 2453, November 1998.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2827">[RFC2827]</b></td>
<td class="top">
<a>Ferguson, P.</a> and <a>D. Senie</a>, "<a href="http://tools.ietf.org/html/rfc2827">Network Ingress Filtering: Defeating Denial of Service Attacks which employ IP Source Address Spoofing</a>", BCP 38, RFC 2827, May 2000.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3704">[RFC3704]</b></td>
<td class="top">
<a>Baker, F.</a> and <a>P. Savola</a>, "<a href="http://tools.ietf.org/html/rfc3704">Ingress Filtering for Multihomed Networks</a>", BCP 84, RFC 3704, March 2004.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3315">[RFC3315]</b></td>
<td class="top">
<a>Droms, R.</a>, <a>Bound, J.</a>, <a>Volz, B.</a>, <a>Lemon, T.</a>, <a>Perkins, C.</a> and <a>M. Carney</a>, "<a href="http://tools.ietf.org/html/rfc3315">Dynamic Host Configuration Protocol for IPv6 (DHCPv6)</a>", RFC 3315, July 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3633">[RFC3633]</b></td>
<td class="top">
<a>Troan, O.</a> and <a>R. Droms</a>, "<a href="http://tools.ietf.org/html/rfc3633">IPv6 Prefix Options for Dynamic Host Configuration Protocol (DHCP) version 6</a>", RFC 3633, December 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5340">[RFC5340]</b></td>
<td class="top">
<a>Coltun, R.</a>, <a>Ferguson, D.</a>, <a>Moy, J.</a> and <a>A. Lindem</a>, "<a href="http://tools.ietf.org/html/rfc5340">OSPF for IPv6</a>", RFC 5340, July 2008.</td>
</tr>
<tr>
<td class="reference"><b id="RFC6092">[RFC6092]</b></td>
<td class="top">
<a>Woodyatt, J.</a>, "<a href="http://tools.ietf.org/html/rfc6092">Recommended Simple Security Capabilities in Customer Premises Equipment (CPE) for Providing Residential IPv6 Internet Service</a>", RFC 6092, January 2011.</td>
</tr>
<tr>
<td class="reference"><b id="RFC6204">[RFC6204]</b></td>
<td class="top">
<a>Singh, H.</a>, <a>Beebee, W.</a>, <a>Donley, C.</a>, <a>Stark, B.</a> and <a>O. Troan</a>, "<a href="http://tools.ietf.org/html/rfc6204">Basic Requirements for IPv6 Customer Edge Routers</a>", RFC 6204, April 2011.</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Author's Address</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Fred Baker</span> 
	  <span class="n hidden">
		<span class="family-name">Baker</span>
	  </span>
	</span>
	<span class="org vcardline">Cisco Systems</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality">Santa Barbara</span>,  
		<span class="region">California</span> 
		<span class="code">93117</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:fred@cisco.com">fred@cisco.com</a></span>

  </address>
</div>

</body>
</html>