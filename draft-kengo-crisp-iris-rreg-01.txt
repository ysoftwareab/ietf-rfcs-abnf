
Network Working Group                                        K.Nagahashi
Internet-Draft                                        The Univ. of Tokyo
Expires: October 24, 2005                                      T.Yoshida
                                                      NTT Communications
						                 K.Kondo
						           Intec Netcore
                                                           June 24, 2005

    IRIS - A Routing Registry (rreg) Type for the Internet Registry
                          Information Service
                     draft-kengo-crisp-iris-rreg-01

Status of this Memo
   By submitting this Internet-Draft, each author represents
   that any applicable patent or other IPR claims of which he
   or she is aware have been or will be disclosed, and any of
   which he or she becomes aware will be disclosed, in
   accordance with Section 6 of BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as
   Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on June 16, 2005.

Copyright Notice

   Copyright (C) The Internet Society (2005).

Abstract

   This document describes an IRIS registry schema for Internet Routing
   information.  The schema extends the necessary query and result 
   operations of IRIS to provide the


kengo, et al.           Expires June 16, 2005                  [Page 1]
Internet-Draft                 iris-rreg                   December 2004

   functional information service needs for syntaxes and results used by
   Internet Protocol address registries.

Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3
     1.1 Motivation . . . . . . . . . . . . . . . . . . . . . . . . .  3
   2.  Document Terminology . . . . . . . . . . . . . . . . . . . . .  4
   3.  Requirements . . . . . . . . . . . . . . . . . . . . . . . . .  4 
   4.  Schema Description . . . . . . . . . . . . . . . . . . . . . .  5
     4.1   Query Derivatives  . . . . . . . . . . . . . . . . . . . .  5
       4.1.1   <findContacts> Query . . . . . . . . . . . . . . . . .  5
       4.1.2   <findOrganizations>  . . . . . . . . . . . . . . . . .  5
       4.1.3   <findAutnumByName> and
               <findRoutesByName> . . . . . . . . . . . . . . . . . .  6
       4.1.4   <findRoutesByAddress>  . . . . . . . . . . . . . . . .  6
       4.1.5   <findRouteBySpecificity> . . . . . . . . . . . . . . .  6
       4.1.6   <findAutnumByNumber>  .. . . . . . . . . . . . . . . .  7
       4.1.7   <findByContact>  . . . . . . . . . . . . . . . . . . .  7
       4.1.8   <findSetByName>  . . . . . . . . . . . . . . . . . . .  7  
       4.1.9   Contact Search Group . . . . . . . . . . . . . . . . .  8
     4.2   Result Derivatives . . . . . . . . . . . . . . . . . . . .  9
       4.2.1   <ipv4Route> and <ipv6Route> Results  . . . . . . . . .  9
       4.2.2   <Autnum> Result  . . . . . . . . . . . . . . . . . . .  9
       4.2.3   <Set>    Result  . . . . . . . . . . . . . . . . . . .  9
       4.2.4   <contact> Result . . . . . . . . . . . . . . . . . . . 10
       4.2.5   <organization> Result  . . . . . . . . . . . . . . . . 10
       4.2.6   Contact References . . . . . . . . . . . . . . . . . . 11
       4.2.7   Common Result Child Elements . . . . . . . . . . . . . 11
     4.3   Support for <iris:lookupEntity>  . . . . . . . . . . . . . 11
   5.  Terminology for Nesting of Networks  . . . . . . . . . . . . . 12
   6.  Formal XML Syntax  . . . . . . . . . . . . . . . . . . . . . . 16
   7.  BEEP Transport Compliance  . . . . . . . . . . . . . . . . . . 34
     7.1   Message Pattern  . . . . . . . . . . . . . . . . . . . . . 34
     7.2   Server Authentication  . . . . . . . . . . . . . . . . . . 34
   8.  Internationalization Considerations  . . . . . . . . . . . . . 35
   9.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . . 36
   10. Security Considerations  . . . . . . . . . . . . . . . . . . . 37
   11.   References . . . . . . . . . . . . . . . . . . . . . . . . . 38
   11.1  Normative References . . . . . . . . . . . . . . . . . . . . 38
   11.2  Informative References . . . . . . . . . . . . . . . . . . . 38
       Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . 39
   A.  Example Requests and Responses . . . . . . . . . . . . . . . . 40
     A.1   Example 1  . . . . . . . . . . . . . . . . . . . . . . . . 40
     A.2   Example 2  . . . . . . . . . . . . . . . . . . . . . . . . 41
   B.  Specificity Examples . . . . . . . . . . . . . . . . . . . . . 45
   C.  Contributors . . . . . . . . . . . . . . . . . . . . . . . . . 59
   D.  Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . 60
       Intellectual Property and Copyright Statements . . . . . . . . 61



Kengo, et al.           Expires August 14, 2005                  [Page 2]
Internet-Draft                 iris-rreg                   December 2004

1.  Introduction

   This document describes an IRIS namespace for Internet routing
   registries using an XML Schema [9] derived from and using the IRIS
   [2] schema.  This schema and registry type are provided to
   demonstrate the extensibility of the IRIS framework beyond the use of
   domains, a criteria defined in CRISP [4].

   The schema given is this document is specified using the Extensible
   Markup Language (XML) 1.0 as described in XML [6], XML Schema
   notation as described in XML_SD [8] and XML_SS [9], and XML
   Namespaces as described in XML_NS [7].

   Examples of client/server XML exchanges with this registry type are
   available in Appendix A.

1.1 Motivation
  Our intention to apply  CRISP framework into Routing
  Registry is due to the current messy architecture 
  of routing registries.
  They  are scattered around the world but  neither hierarchical
  strcutre nor recursive look-up are 
  performed. This derives an inaccurate routing information
  in Routing Registry. 
  We have strong motivation to improve accuracy of the routing
  registries by introducing CRISP framework into routing registries.

  2 steps must be taken to improve the situation , (1) defines
  XML Schema for Routing Registry and (2)deploy CRISP enabled
  Routing Registry. 
  
  This document only focuses on the definition of XML schema for
  routing registries, and the deployment issues will be described
  in another document.




Kengo, et al.           Expires August 14, 2005                  [Page 3]
Internet-Draft                 iris-rreg                   January 2005

2.  Document Terminology

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC2119 [1].


3. Requirements 
  
   Like other iris schema e.g. areg, dreg, routing registry should
   be defined XML schema which  comprises query and responce.

   The query and responce in routing registry is similer with 
   areg since main objective of routing registry is to manage
   prefix, autonomous system and contact information.
   
   The obvious difference with areg and rreg is that 
   rreg requries to handle routing policy schema 
   e.g. AS imports policy and exports policy.
   This routing policy schema is described by Routing Policy 
   Specification  Language (RPSL)[RPSL]. 
   Thus, rreg requires the routing policy handling defined 
   in RPSL.
   
   Since the routing registry are distributed without 
   strong relation, root resolution is a hard issue to solve. 
   One of straight forward solution is to decide the root 
   e.g. "rreg.nro.net" uniquely but it still requires to 
   discuss about it.
 

   
   
   
   











kengo, et al.           Expires August 14, 2005                  [Page 4]
Internet-Draft                 iris-rreg                   January 2005

3.  Schema Description

   IRIS requires the derivation of both query and result elements by a
   registry schema.  These descriptions follow.

   The descriptions contained within this section refer to XML elements
   and attributes and their relation to the exchange of data within the
   protocol.  These descriptions also contain specifications outside the
   scope of the formal XML syntax.  Therefore, this section will use
   terms defined by RFC 2119 [1] to describe the specification outside
   the scope of the formal XML syntax.  While reading this section,
   please reference Section 5 for needed details on the formal XML
   syntax.

3.1  Query Derivatives

3.1.1  <findContacts> Query

   <findContacts> searches for contacts given search constraints.

   The allowable search fields are handled by one of the elements in the
   "contactSearchGroup" (see Section 3.1.9).

   This query also provides optional <language> elements containing
   language tags.  Clients MAY use these elements to give a hint about
   the natural language(s) of the affected element.  Servers MAY use
   this information in processing the query, such as tailoring
   normalization routines to aid in more effective searches.

   The client SHOULD pass the names unchanged to the server, and the
   implementation of the server decides if the search is case sensitive
   or not.

3.1.2  <findOrganizations>

   The <findOrganizations> element allows searches by name of
   organizations.

   The child element <name> allows the query to be constrained based on
   the name of the organization.  The constraint can either constrain
   the query by an exact match using the <exactMatch> element, or it may
   constrain the query by a subset of the name using the <beginsWith>
   and <endsWith> elements.

   This query also provides optional <language> elements containing
   language tags.  Clients MAY use these elements to give a hint about
   the natural language(s) of the affected element.  Servers MAY use
   this information in processing the query, such as tailoring



Kengo, et al.           Expires August 14, 2005                  [Page 5]
Internet-Draft                 iris-rreg                   January 2005

   normalization routines to aid in more effective searches.

   The client SHOULD pass the names unchanged to the server, and the
   implementation of the server decides if the search is case sensitive
   or not.


3.1.3  <findAutnumByName> and <findRoutesByName>

   The <findAutonumByName> and <findNetworksByName> elements
   allow searches by name of autonomous systems, and networks,
   respectively.  Both have the same format.

   The child element <name> may either have as children the <exactMatch>
   element or the <beginsWith> and <endsWith> elements.

3.1.4  <findRoutesByAddress>


   The <findRoutesByAddress> element is a query for a route given a
   related IP address or IP address range.  It has the following child
   elements:
   o  <ipv4Address> - has a child <start> element containing the
      starting IPv4 address of the network and an optional child of
      <end> containing the ending IPv4 address of the network.
   o  <ipv6Address> - same as <ipv4Address> but the child addresses
      contain IPv6 addresses.  Clients MUST convert any short-form
      notation to the fully-qualified notation.
   o  <specificity> - determines the network specificity for the search
      (see Section 4).  Valid values are "exact-match",
      "all-less-specifics", "one-level-less-specifics",
      "all-more-specifics", and "one-level-more-specifics".  This
      element may have the optional attribute 'allowEquivalences'.  When
      set to "true", the result set should include networks with
      equivalent starting and ending addresses.

   The results from this query MUST be either the <ipv4Route> result
   or the <ipv6Route> result.  More than one network result MAY be
   returned.

3.1.5  <findRouteBySpecificity>

   The <findRouteBySpecificity> element is a query for a network given
   a the handle of a related network.  It has the following child
   elements:
   o  <networkHandle> - Specifies the network handle.
   o  <specificity> - determines the network specificity for the search
      (see Section 4).  Valid values are "all-less-specifics",
      "one-level-less-specifics", "all-more-specifics", and
      "one-level-more-specifics".



Kengo, et al.           Expires August 14, 2005                  [Page 6]
Internet-Draft                 iris-rreg                   January 2005

   The results from this query MUST be either the <ipv4Route> result
   or the <ipv6Route> result.  More than one network result MAY be
   returned.

   This query could be used to discover the parentage relationships
   between networks that have the same starting and ending addresses.

3.1.6  <findAutnumByNumber>

   The <findAutnumByNumber> element allows a search for autonomous system
   number ranges given a related ASN range.  It has the following child
   elements:
   o  <asNumberStart> - Specifies the start of the ASN range.
   o  <asNumberEnd> - Specifies the end of the ASN range.
   o  <specificity> - determines the range specificity for the search
      (see Section 4).  Valid values are "exact-match",
      "all-less-specifics", "one-level-less-specifics",
      "all-more-specifics" and "one-level-more-specifics".  This element
      may have the optional attribute 'allowEquivalences'.  When set to
      "true", the result set should include ranges with equivalent
      starting and ending numbers.

   The results from this query MUST be <autonomousSystem> result.  More
   than one result MAY be returned.

3.1.7  <findSetByName>

   The <findSetByName> element allows a search for Set  given a related 
   name of Set.  It has the following child
   elements:
   o  <name> - Specifies the name of Set
   o  <type> - Specifies the type of Set
      o <as-set>
      o <route-set>
 
   The results from this query MUST be <Set> result.  More
   than one result MAY be returned.


3.1.8  <findByContact>

   The <findByContact> element allows a search for autnum, routes 
   and organizations on fields associated  with that entity's contact. 
   Search constraints of <returnAutnums>, <returnIPv4routes>, 
   <returnIPv6routes> and <returnOrganizations>  MUST restrict the results 
   to Autnum ranges, IPv4 routes, IPv6 routes  and organizations, respectively.

   The allowable search fields are handled with either the
   <contactHandle> element or one of the elements in the
   "contactSearchGroup" (see Section 3.1.9).  The <contactHandle>
   element allows for the entities to be selected based on the contact
   having the specified contact handle.

   The query MAY also be constrained further using the optional <role>
   element.  The contents of this element signify the role the contact
   has with the entity.

   This query also provides optional <language> elements containing
   language tags.  Clients MAY use these elements to give a hint about
   the natural language(s) of the affected element.  Servers MAY use
   this information in processing the query, such as tailoring



Kengo, et al.           Expires August 14, 2005                  [Page 7]
Internet-Draft                 iris-rreg                   January 2005

   normalization routines to aid in more effective searches.

   The results from this query MUST be the <ipv4Route> results, the
   <ipv6Route> results, the <autunum> or <organization>
   results.  More than one result MAY be returned and the results MAY be
   of mixed types.


3.1.9  Contact Search Group

   Some of the queries above have similar query constraints for
   searching on contacts.  This section describes those common
   parameters.

   <commonName> allows the query to be constrained based on the common
   name of the contact.  The constraint can either constrain the query
   by an exact match using the <exactMatch> element, or it may constrain
   the query by a subset of the common name using the <beginsWith> and
   <endsWith> elements.

   <organization> allows the query to be constrained based on the
   organization ID (handle) of the contact.

   <eMail> constrains the query based on the e-mail address of the
   contact.  This may be done by an exact e-mail address using the
   <exactMatch> element or by any e-mail address in a domain using the
   <inDomain> element.  The <inDomain> MUST only contain a valid domain
   name (i.e.  no '@' symbol), and the matching SHOULD take place only
   on the domain given (i.e.  no partial matches with respect to
   substrings or parent domains).

   The <city>, <region>, and <postalCode> elements restrict the scope of
   the query based on the city, region, or postal code of the contact,
   respectively.  Each one must only contain an <exactMatch> element
   containing the exact city, region, or postal code (i.e.  no substring
   searches).




Kengo, et al.           Expires August 14, 2005                  [Page 8]
Internet-Draft                 iris-rreg                   January 2005

3.2  Result Derivatives

3.2.1  <ipv4Route> and <ipv6Route> Results

   The <ipv4Route> and <ipv6Route> share a common definition of
   'ipRouteType'.  It has the following child elements:
   o  <networkHandle> contains the registry-unique assigned handle for
      this network.
   o  <name> contains a human friendly name for the network.
   o  <startAddress> contains the first IP address of the route.
   o  <endAddress> contains the last IP address of the route.
   o  <routeType> contains a string denoting the type of network.
      *  <networkTypeInfoURI> contains a URI where the meanings of the
         values are explained in a plain natural language.  The valid
         schemes are HTTP, HTTPS and FTP.
   o  Zero or more <nameServer> elements, each containing the domain
      name of a nameserver responsible for reverse-DNS mapping for this
      network.
   o  <organization> contains an entity reference to the organization
      assigned this network.  The referent MUST be an <organization>
      (Section 3.2.4) result.
   o  One of:
      *  <parent> contains an entity reference to the parent network of
         this network.  The referent MUST be an <ipv4Route> (Section
         3.2.1) result if this reference is a child of <ipv4Route>.
         The referent MUST be an <ipv6Route> (Section 3.2.1) result if
         this reference is a child of <ipv6Route>.
      *  <noParent> contains no children and simply signifies that the
         network does not have a parent.
   o  Contact references (see Section 3.2.5).
   o  Common child elements (see Section 3.2.6).

3.2.2  <Autnum> Result

   The <Autnum> element represents a policy of each
   autonomous system.  It has the following children:
   o  <asHandle> contains a registry-unique assigned handle for this
      autonomous system number range.
   o  <asNumberStart> contains an integer indicating the starting number
      for the autonomous system number range.
   o  <asNumberEnd> contains an integer indicating the ending number for
      the autonomous system number range.
   o  <organization> contains an entity reference to the organization
      assigned or allocated this autonomous system number range.  The
      referent MUST be an <organization> (Section 3.2.4) result.
   o  One of:
      *  <parent> contains an entity reference to the parent ASN range
         of this ASN range.  The referent MUST be an <Autonum>



Kengo, et al.           Expires August 14, 2005                  [Page 9]
Internet-Draft                 iris-rreg                   January 2005

         (Section 3.2.2) result.
      *  <noParent> contains no children and simply signifies that the
         network does not have a parent.
   o  Contact references (see Section 3.2.5).
   o  Common child elements (see Section 3.2.6).

3.2.3  <Set> Result

   The <Set> element represents a collection of autnum or route. 
   It has the following children:
   o  <setHandle> contains a registry-unique assigned handle for each Set
   o  <type> contains a type of Set
      o <as-set>  Collection of Autnum 
      o <route-set> Collection of IPv4Route or IPv6Route

   o  Contact references (see Section 3.2.5).
   o  Common child elements (see Section 3.2.6).


3.2.4  <contact> Result

   The <contact> element represents the registration of a point of
   contact.  It has the following child elements:
   o  <contactHandle> contains the registry-unique assigned handle for
      this contact.
   o  Either <commonName> or <role>.  The first element specifies the
      name of the contact.  The latter element, <role>, specifies that
      the contact is a group of people given the responsibility
      described by this element.
   o  <eMail> contains the email address for this contact.
   o  <sip> contains the sip address for this contact.
   o  <organization> contains an entity reference to the organization
      associated with this contact.  The referent MUST be an
      <organization> (Section 3.2.4) result.
   o  <phone> contains child elements describing the phone number of the
      contact.  The child elements are <number>, <extension>, and
      <type>.
   o  Common child elements (see Section 3.2.6).

3.2.5  <organization> Result

   The <organization> element represents an organization.  It has the
   following child elements:
   o  <name> contains the name of the organization.
   o  <id> contains a registry-unique identifier for this organization.
   o  <eMail> contains the email address for this organization.
   o  <address> contains the address for this organization.
   o  <city> contains the city where this organization is located.
   o  <region> contains the national region where this organization is
      located.
   o  <postalCode> contains the postal code where this organization is
      located.
   o  <country> contains the country code where this organization is
      located.  This MUST be compliant with ISO 3166 [12] two-character
      country codes.
   o  <phone> contains child elements describing the phone number of the
      contact.  The child elements are <number>, <extension>, and
      <type>.
   o  Contact references (see Section 3.2.6).
   o  Common child elements (see Section 3.2.7).



Kengo, et al.           Expires August 14, 2005                 [Page 10]
Internet-Draft                 iris-rreg                   January 2005

3.2.6  Contact References

   The registry schema defined in Section 5 normalizes out a group of
   elements used to reference contacts.  This group is used by many of
   the result types for this registry.  The group has the following
   elements, each of which may appear as many times as needed.  The
   referent of each MUST be <contact> (Section 3.2.3) results.
   o  <adminContact>
   o  <techContact>
   o  <nocContact>
   o  <abuseContact>
   o  <otherContact>

3.2.7  Common Result Child Elements

   The registry schema defined in Section 5 normalizes out a group of
   common elements used most of the result types.  The group has the
   following elements:
   o  <numberResourceRegistry> contains an entity reference to the
      number resource registry of record.  The referent MUST be an
      <organization> (Section 3.2.4) result.
   o  <registrationDate> contains the date of first registration.
   o  <lastUpdatedDate> contains the date when the registration was last
      updated.
   o  The <iris:seeAlso> element contains an entity reference specifying
      an entity that is indirectly associated with this result object.
      This element can be used for comments and remarks.

3.3  Support for <iris:lookupEntity>

   The following types of entity classes are recognized by the
   <lookupEntity> query of IRIS for this registry:
   o  ipv4-handle - a registry unique identifier specifying an IPv4
      route.  Queries with these names will yield a <ipv4Route>
      result.
   o  ipv6-handle - a registry unique identifier specifying an IPv6
      route.  Queries with these names will yield a <ipv6Route>
      result.
   o  as-handle - a registry unique identifier specifying an autnum
      It yields a result of <Autnum>.
   o  contact-handle - a registry unique identifier of a contact.
      Yields a result of <contact>.
   o  organization-id - a registry unique identifier of an organization.
      Yields a result of <organization>.
   o  The entity names of these entity classes are case insensitive.




Kengo, et al.           Expires August 14, 2005                 [Page 11]
Internet-Draft                 iris-rreg                   January 2005

4.  Terminology for Nesting of Networks

   The following terms are defined for describing the nesting of IP
   networks.
   o  More specific: Given two networks, A and B, A is more specific
      than B if network B includes all space of network A, and if
      network B is larger than network A.
   o  Less specific: Opposite of more specific.  The network B is less
      specific than network A if network A's all space is included in
      network B and if network A is smaller than network B.
   o  Most specific: Given a set of networks, the network or networks
      that are more specific than zero or more of other networks in the
      set, and that are not a less specific of any of the networks in
      the set.
   o  Least specific: Given a set of networks, the network or networks
      that are not more specific to any of the other networks in the
      set.

   Examples:

   +-------------------------------------------------------+
   |                                                       |
   | Given the networks A, B, C and D as follows:          |
   |                                                       |
   |    A    |---------------------------------|           |
   |    B                    |-----------------|           |
   |    C                       |---------|                |
   |    D      |-------|                                   |
   |                                                       |
   |                                                       |
   | The network A is less specific than B, C and D.       |
   | The network B is more specific than A.                |
   | Among these four networks, A is the least specific,   |
   |   and C and D are the most specific networks.         |
   |                                                       |
   +-------------------------------------------------------+

                      Figure 1: Nesting Example 1








Kengo, et al.           Expires August 14, 2005                 [Page 12]
Internet-Draft                 iris-rreg                   January 2005

   +-------------------------------------------------------+
   |                                                       |
   | Given the networks E, F and G:                        |
   |                                                       |
   |    E   |----------|                                   |
   |    F                |--------------|                  |
   |    G     |---|                                        |
   |                                                       |
   | The networks E and F are least specific networks.     |
   | The networks F and G are most specific networks.      |
   |                                                       |
   +-------------------------------------------------------+

                      Figure 2: Nesting Example 2

   The following definitions assume that there are no overlapping
   networks in the database.  A network overlaps with another one when
   they encompass each other's space partially.  Examples:

     A   |---------------------|
     B       |----------------------------|

                      Figure 3: Nesting Example 3

     C   |------------------|
     D   |---------|

                      Figure 4: Nesting Example 4

   Here, the networks C and D are NOT overlapping networks, because even
   if network D encompasses a part of network C's space, network C does
   not encompass network D's space partially (it encompasses network D
   completely).

   The address directory can contain more than one network with the same
   range.  They are said to be exact match networks.

   Parent/child relationship in the internet address directory is
   unidirectional.  That is, there might also be parent/child
   relationship with exact match networks, but a network cannot be a
   parent and a child of its exact match network at the same time.

   Nested matching searches:

   [1] all less specifics search: Given a range, find all the networks
   that contain that range (ie, all less specifics and exact matches).
   These networks are the networks that fulfill the following condition:



Kengo, et al.           Expires August 14, 2005                 [Page 13]
Internet-Draft                 iris-rreg                   January 2005

   (start(network) <= start(search)) AND (end(network) >= end(search))

   [2] one-level less specifics search: Given a range, find only the
   most specific network that contains that range (could be multiple
   networks, but usually single); This is the set of networks from [1],
   with the provision that: no network in the return set is contained by
   any other network in the set.  If there are exact match networks in
   the set from [1], they both must appear in the result set.  The
   result set may contain a network that is exact match to the query
   range, if the search allows exact matches.

   A  |-------------------------------|
   B  |---------------------------|
   C            |-------|
   Query  |- - - - - - - - - -|

                      Figure 5: Nesting Example 5

   In the above case, the query must return B.

   A  |-------------------------------|
   B  |---------------------------|
   C  |---------------------------|
   D            |-------|
   Query  |- - - - - - - - - -|

                      Figure 6: Nesting Example 6

   Here, the query must return B and C (they are exact matches of each
   other).

   A  |-------------------------------|
   B  |---------------------------|
   C  |---------------------------|
   D            |-------|
   Query        |- - - -|

                      Figure 7: Nesting Example 7

   Here, the query must return B and C (they are exact matches of each
   other).  D must not be in the result set, as it is exact match to the
   query if the search specifies that exact matches of query range
   should not appear in the result set.

   In the example 7, if the search specifies that exact matches to the
   query range are allowed in the result set, then only D must be



Kengo, et al.           Expires August 14, 2005                 [Page 14]
Internet-Draft                 iris-rreg                   January 2005

   returned.

   [3] all more specifics search: Given a range, find all the networks
   that are fully within that range.  The search contains a flag that
   specifies if an exact match to the query range should appear in the
   result set or not.  Thus, the result set may or may not contain the
   exact match to the query range, as instructed by the search.

   (start(network) >= start(search)) AND (end(network) <= end(search))

   [4] one-level more specifics search: Given a range, find only the
   least specific networks that are fully within that range.  This is
   the set of networks from [3], with the provision that:

   no network in the return set contains any other network in the return
   set.

   Query   |- - - - - - - - - - - - - - - - - - - - - - -|

   A       |------------------|
   B                           |-------------------------|
   C           |--------|
   D                                      |---------|

                      Figure 8: Nesting Example 8

   [5] exact match search: Given a range, find the networks that begin
   and end on the same IP addresses as the range.

   That is, the networks that fulfill the following condition:

   (start(network) = start(search)) AND (end(network) = end(search))

   [6] Given a range find the exact match network if exists, and if not,
   perform the [2] search.

   Parent-child relationship searches:

   [6] Given a network handle, find the network that is the direct (one
   level up) parent of the network with the given handle.

   [7] Given a network handle, find the network or networks that are
   direct (one level down) children of the network with the handle
   given.




Kengo, et al.           Expires August 14, 2005                 [Page 15]
Internet-Draft                 iris-rreg                   January 2005

5.  Formal XML Syntax

   This routing registry is specified in the XML Schema notation.
   The formal syntax presented here is a complete schema representation
   suitable for automated validation of an XML instance when combined
   with the formal schema syntax of IRIS.

   <?xml version="1.0"?>
   <schema xmlns="http://www.w3.org/2001/XMLSchema"
           xmlns:rreg="urn:ietf:params:xml:ns:rreg1"
           xmlns:iris="urn:ietf:params:xml:ns:iris1"
           targetNamespace="urn:ietf:params:xml:ns:rreg1"
           elementFormDefault="qualified" >

     <import namespace="urn:ietf:params:xml:ns:iris1" />

     <annotation>
       <documentation>
         routing registry schema
         derived from IRIS schema
       </documentation>
     </annotation>

     <!-- ========================================= -->
     <!--                                           -->
     <!-- Query Types                               -->
     <!--                                           -->
     <!-- ========================================= -->

     <!--                                           -->
     <!-- Find Organizations By Name                -->
     <!-- Find Autnum  By Name                     -->
     <!-- Find Routes Name                          -->
     <!--                                           -->

     <complexType
       name="findByNameType" >
       <complexContent>
         <extension
           base="iris:queryType">
           <sequence>
             <element
               name="name"
               type="rreg:exactOrPartialMatchParameter" />
             <element
                name="language"
                type="language"


Kengo, et al.           Expires August 14, 2005                 [Page 16]
Internet-Draft                 iris-rreg                   January 2005

                minOccurs="0"
                maxOccurs="unbounded"/>
           </sequence>
         </extension>
       </complexContent>
     </complexType>

     <element
       name="findOrganizations"
       type="rreg:findByNameType"
       substitutionGroup="iris:query" />

     <element
       name="findRoutes"
       type="rreg:findByNameType"
       substitutionGroup="iris:query" />

     <element
       name="findAutonum"
       type="rreg:findByNameType"
       substitutionGroup="iris:query" />

     <!--                                           -->
     <!-- Address/Address Range type for            -->
     <!--   Find Route                              -->
     <!--                                           -->

     <complexType
       name="addressRangeType">
       <sequence>
         <element
           name="start"
           type="token" />
         <element
           name="end"
           type="token"
           minOccurs="0"
           maxOccurs="1" />
       </sequence>
     </complexType>

     <!--                                           -->
     <!-- Find Routes By Address                    -->
     <!--                                           -->

     <complexType
       name="findRoutesByAddressType" >
       <complexContent>


Kengo, et al.           Expires August 14, 2005                 [Page 17]
Internet-Draft                 iris-rreg                   January 2005

         <extension
           base="iris:queryType">
           <sequence>
             <choice>
               <element
                 name="networkHandle"
                 type="token" />
               <element
                 name="ipv4Address"
                 type="rreg:addressRangeType" />
               <element
                 name="ipv6Address"
                 type="rreg:addressRangeType" />
             </choice>
             <element
               name="specificity">
               <complexType>
                 <simpleContent>
                   <extension
                     base="rreg:specificityType" >
                     <attribute
                       name="allowEquivalences"
                       type="boolean"
                       default="false" />
                   </extension>
                 </simpleContent>
               </complexType>
             </element>
           </sequence>
         </extension>
       </complexContent>
     </complexType>

     <element
       name="findRoutesByAddress"
       type="rreg:findRoutesByAddressType"
       substitutionGroup="iris:query" />

     <!--                                           -->
     <!-- Find autnum By Number                     -->
     <!--                                           -->

        <complexType
          name="findAutnumByNumberType" >
          <complexContent>
            <extension
              base="iris:queryType">
              <sequence>


Kengo, et al.           Expires August 14, 2005                 [Page 18]
Internet-Draft                 iris-rreg                   January 2005

                <element
                  name="asNumberStart"
                  type="token" />
                <element
                  name="asNumberEnd"
                  type="token"
                  minOccurs="0"
                  maxOccurs="1" />
                <element
                  name="specificity">
                  <complexType>
                    <simpleContent>
                      <extension
                        base="rreg:specificityType" >
                        <attribute
                          name="allowEquivalences"
                          type="boolean"
                          default="false" />
                      </extension>
                    </simpleContent>
                  </complexType>
                </element>
              </sequence>
            </extension>
          </complexContent>
        </complexType>

        <element
          name="findAutnumByNumber"
          type="rreg:findAutnumByNumberType"
          substitutionGroup="iris:query" />

     <simpleType
       name="specificityType">
       <restriction
         base="string">
           <enumeration
             value="exact-match" />
           <enumeration
             value="all-less-specifics" />
           <enumeration
             value="one-level-less-specifics" />
           <enumeration
             value="all-more-specifics" />
           <enumeration
             value="one-level-more-specifics" />
       </restriction>


Kengo, et al.           Expires August 14, 2005                 [Page 19]
Internet-Draft                 iris-rreg                   January 2005

     </simpleType>

     <!--                                           -->
     <!-- Find By Contact                           -->
     <!--                                           -->

        <complexType
          name="findByContactType">
          <complexContent>
            <extension
              base="iris:queryType">
              <sequence>
                <choice>
                  <group
                    ref="rreg:contactSearchGroup" />
                  <element
                    name="contactHandle"
                    type="rreg:exactMatchParameter" />
                </choice>
                <element
                  name="returnedResultType"
                  minOccurs="0"
                  maxOccurs="1" >
                  <simpleType>
                    <restriction
                      base="string" >
                      <enumeration
                        value="returnASNs" />
                      <enumeration
                        value="returnIPv4Routes" />
                      <enumeration
                        value="returnIPv6Routes" />
                      <enumeration
                        value="returnOrganizations" />
                    </restriction>
                  </simpleType>
                </element>
                <element
                  name="role"
                  minOccurs="0"
                  maxOccurs="1" >
                  <simpleType>
                    <restriction
                      base="string" >
                      <enumeration
                        value="adminContact" />
                      <enumeration


Kengo, et al.           Expires August 14, 2005                 [Page 20]
Internet-Draft                 iris-rreg                   January 2005

                        value="techContact" />
                      <enumeration
                        value="nocContact" />
                      <enumeration
                        value="abuseContact" />
                      <enumeration
                        value="otherContact" />
                    </restriction>
                  </simpleType>
                </element>
                <element
                  name="language"
                  type="language"
                  minOccurs="0"
                  maxOccurs="unbounded"/>
              </sequence>
            </extension>
          </complexContent>
        </complexType>

        <element
          name="findByContact"
          type="rreg:findByContactType"
          substitutionGroup="iris:query" />

     <!--                                           -->
     <!-- Find Routes  By Specificity               -->
     <!--                                           -->

        <complexType
          name="findRoutesBySpecificityType" >
          <complexContent>
            <extension
              base="iris:queryType">
              <sequence>
                <element
                  name="networkHandle"
                  type="token" />
                <element
                  name="specificity"
                  type="rreg:specificitySubsetType" />
              </sequence>
            </extension>
          </complexContent>
        </complexType>

        <simpleType


Kengo, et al.           Expires August 14, 2005                 [Page 21]
Internet-Draft                 iris-rreg                   January 2005

          name="specificitySubsetType">
          <restriction
            base="string">
              <enumeration
                value="all-less-specifics" />
              <enumeration
                value="one-level-less-specifics" />
              <enumeration
                value="all-more-specifics" />
              <enumeration
                value="one-level-more-specifics" />
          </restriction>
        </simpleType>

        <element
          name="findRoutesBySpecificity"
          type="rreg:findNetworksBySpecificityType"
          substitutionGroup="iris:query" />

     <!--                                           -->
     <!-- Find Contacts                             -->
     <!--                                           -->

        <complexType
          name="findContactsType">
          <complexContent>
            <extension
              base="iris:queryType">
              <sequence>
                <group
                  ref="rreg:contactSearchGroup" />
                <element
                  name="language"
                  type="language"
                  minOccurs="0"
                  maxOccurs="unbounded"/>
               </sequence>
            </extension>
          </complexContent>
        </complexType>

        <element
          name="findContacts"
          type="rreg:findContactsType"
          substitutionGroup="iris:query" />



Kengo, et al.           Expires August 14, 2005                 [Page 22]
Internet-Draft                 iris-rreg                   January 2005

     <!--                                           -->
     <!-- Contact Search Group                      -->
     <!--                                           -->

        <group
          name="contactSearchGroup">
          <choice>
            <element
              name="commonName"


Kengo, et al.           Expires August 14, 2005                 [Page 23]
Internet-Draft                 iris-rreg                   January 2005

              type="rreg:exactOrPartialMatchParameter" />
            <element
              name="organization"
              type="token" />
            <element
              name="eMail"
              type="rreg:domainResourceParameter" />
            <element
              name="city"
              type="rreg:exactMatchParameter" />
            <element
              name="region"
              type="rreg:exactMatchParameter" />
            <element
              name="postalCode"
              type="rreg:exactMatchParameter" />
          </choice>
        </group>

        <complexType
          name="exactOrPartialMatchParameter">
          <choice>
            <group
              ref="rreg:partialMatchGroup" />
            <group
              ref="rreg:exactMatchGroup" />
          </choice>
        </complexType>

        <complexType
          name="exactMatchParameter">
          <group
            ref="rreg:exactMatchGroup" />
        </complexType>

        <complexType
          name="partialMatchParameter">
          <sequence>
            <group
              ref="rreg:partialMatchGroup" />
          </sequence>
        </complexType>

        <complexType
          name="domainResourceParameter" >
          <choice>
            <group
              ref="rreg:exactMatchGroup" />


Kengo, et al.           Expires August 14, 2005                 [Page 24]
Internet-Draft                 iris-rreg                   January 2005

            <element
              name="inDomain"
              type="token" />
          </choice>
        </complexType>

        <element
          name="baseDomain"
          type="normalizedString" />

        <group
          name="partialMatchGroup">
          <choice>
            <sequence>
              <element
                name="beginsWith">
                <simpleType>
                  <restriction
                    base="token">
                    <minLength
                      value="1"/>
                  </restriction>
                </simpleType>
              </element>
              <element
                minOccurs="0"
                name="endsWith">
                <simpleType>
                  <restriction
                    base="token">
                    <minLength
                      value="1"/>
                  </restriction>
                </simpleType>
              </element>
            </sequence>
            <element
              name="endsWith">
              <simpleType>
                <restriction
                  base="token">
                  <minLength
                    value="1"/>
                </restriction>
              </simpleType>
            </element>
          </choice>
        </group>


Kengo, et al.           Expires August 14, 2005                 [Page 25]
Internet-Draft                 iris-rreg                   January 2005

        <group
          name="exactMatchGroup">
          <sequence>
            <element
              name="exactMatch"
              type="normalizedString" />
          </sequence>
        </group>

     <!-- ========================================= -->
     <!--                                           -->
     <!-- Result Types                              -->
     <!--                                           -->
     <!-- ========================================= -->

     <!--                                           -->
     <!-- IPv4 and IPv6 Route Results               -->
     <!--                                           -->

     <complexType
       name="ipNetworkType">
       <complexContent>
         <extension
           base="iris:resultType">
           <sequence>
             <element
               name="networkHandle"
               type="token" />
             <element
               name="name"
               minOccurs="0"
               maxOccurs="1"
               type="normalizedString" />
             <element
               name="startAddress"
               type="token" />
             <element
               name="endAddress"
               type="token" />
             <element
               name="networkType"
               type="normalizedString">
               <element
                 name="networkTypeInfoURI"
                 type="normalizedString"
                 minOccurs="0"
                 maxOccurs="1" />
             </element>


Kengo, et al.           Expires August 14, 2005                 [Page 26]
Internet-Draft                 iris-rreg                   January 2005

             <element
               name="nameServer"
               type="normalizedString"
               minOccurs="0"
               maxOccurs="unbounded" />
             <element
               name="organization"
               type="iris:entityType"
               minOccurs="0"
               maxOccurs="1" />
             <choice
               minOccurs="0"
               maxOccurs="1" >
               <element
                 name="parent"
                 type="iris:entityType" />
               <element
                 name="noParent">
               </element>
             </choice>
             <group
               ref="rreg:contactGroup" />
             <group
               ref="rreg:commonGroup" />
           </sequence>
         </extension>
       </complexContent>
     </complexType>

     <element
       name="ipv4Route"
       type="rreg:ipRouteType"
       substitutionGroup="iris:result" />

     <element
       name="ipv6Network"
       type="rreg:RouteType"
       substitutionGroup="iris:result" />

     <!--                                           -->
     <!-- Autonomous System                         -->
     <!--                                           -->

     <complexType
       name="autumType">
       <complexContent>
         <extension
           base="iris:resultType">


Kengo, et al.           Expires August 14, 2005                 [Page 27]
Internet-Draft                 iris-rreg                   January 2005

           <sequence>
             <element
               name="asHandle"
               type="token" />
             <element
               name="asNumberStart"
               type="integer"
               minOccurs="1"
               maxOccurs="1" />
             <element
               name="asNumberEnd"
               type="integer"
               minOccurs="0"
               maxOccurs="1" />
             <element
               name="name"
               type="normalizedString"
               minOccurs="0"
               maxOccurs="1" />
             <element
               name="organization"
               type="iris:entityType"
               minOccurs="0"
               maxOccurs="1" />
             <choice
               minOccurs="0"
               maxOccurs="1">
               <element
                 name="parent"
                 type="iris:entityType" />
               <element
                 name="noParent" />
             </choice>
             <group
               ref="rreg:contactGroup" />
             <group
               ref="rreg:commonGroup" />
           </sequence>
         </extension>
       </complexContent>
     </complexType>

     <element
       name="autnum"
       type="rreg:autonomousSystemType"
       substitutionGroup="iris:result" />

     <!--                                           -->


Kengo, et al.           Expires August 14, 2005                 [Page 28]
Internet-Draft                 iris-rreg                   January 2005

     <!-- Contact                                   -->
     <!--                                           -->

     <complexType
       name="contactType">
       <complexContent>
         <extension
           base="iris:resultType">
           <sequence>
             <element
               name="contactHandle"
               type="token" />
             <element
               name="commonName"
               type="normalizedString"
               minOccurs="0"
               maxOccurs="1" />
             <element
               name="eMail"
               type="normalizedString"
               minOccurs="0"
               maxOccurs="unbounded" />
             <element
               name="sip"
               type="normalizedString"
               minOccurs="0"
               maxOccurs="unbounded" />
             <element
               name="organization"
               type="iris:entityType"
               minOccurs="0"
               maxOccurs="unbounded" />
             <element
               name="phone"
               minOccurs="0"
               maxOccurs="unbounded" >
               <complexType>
                 <sequence>
                   <element
                     name="number"
                     type="normalizedString" />
                   <element
                     name="extension"
                     type="normalizedString"
                     minOccurs="0"
                     maxOccurs="unbounded" />
                   <element
                     name="type"


Kengo, et al.           Expires August 14, 2005                 [Page 29]
Internet-Draft                 iris-rreg                   January 2005

                     type="normalizedString" />
                     minOccurs="0"
                     maxOccurs="1" />
                 </sequence>
               </complexType>
             </element>
             <element
               name="language"
               type="language"
               minOccurs="0"
               maxOccurs="1" />
             <group
               ref="rreg:commonGroup" />
           </sequence>
         </extension>
       </complexContent>
     </complexType>

     <element
       name="contact"
       type="rreg:contactType"
       substitutionGroup="iris:result" />

     <!--                                           -->
     <!-- Organization                              -->
     <!--                                           -->

     <complexType
       name="organizationType">
       <complexContent>
         <extension
           base="iris:resultType">
           <sequence>
             <element
               name="name"
               type="normalizedString" />
             <element
               name="eMail"
               type="normalizedString"
               minOccurs="0"
               maxOccurs="unbounded" />
             <element
               name="id"
               type="token" />
             <element name="address"
               type="string"
               minOccurs="0"
               maxOccurs="1" />


Kengo, et al.           Expires August 14, 2005                 [Page 30]
Internet-Draft                 iris-rreg                   January 2005

             <element
               name="city"
               type="string"
               minOccurs="0"
               maxOccurs="1" />
             <element
               name="region"
               type="string"
               minOccurs="0"
               maxOccurs="1" />
             <element
               name="postalCode"
               type="normalizedString"
               minOccurs="0"
               maxOccurs="1" />
             <element
               name="country"
               type="token"
               minOccurs="0"
               maxOccurs="1" />
             <element
               name="phone"
               minOccurs="0"
               maxOccurs="unbounded" >
               <complexType>
                 <sequence>
                   <element
                     name="number"
                     type="normalizedString" />
                   <element
                     name="extension"
                     type="normalizedString"
                     minOccurs="0"
                     maxOccurs="unbounded" />
                   <element
                     name="type"
                     type="normalizedString" />
                     minOccurs="0"
                     maxOccurs="1" />
                 </sequence>
               </complexType>
             </element>
             <group
               ref="rreg:contactGroup" />
             <group
               ref="rreg:commonGroup" />
           </sequence>
         </extension>


Kengo, et al.           Expires August 14, 2005                 [Page 31]
Internet-Draft                 iris-rreg                   January 2005

       </complexContent>
     </complexType>

     <element
       name="organization"
       type="rreg:organizationType"
       substitutionGroup="iris:result" />

     <group
       name="contactGroup">
       <sequence>
         <element
           name="adminContact"
           type="iris:entityType"
           minOccurs="0"
           maxOccurs="unbounded" />
         <element
           name="techContact"
           type="iris:entityType"
           minOccurs="0"
           maxOccurs="unbounded" />
         <element
           name="nocContact"
           type="iris:entityType"
           minOccurs="0"
           maxOccurs="unbounded" />
         <element
           name="abuseContact"
           type="iris:entityType"
           minOccurs="0"
           maxOccurs="unbounded" />
         <element
           name="otherContact"
           type="iris:entityType"
           minOccurs="0"
           maxOccurs="unbounded" />
       </sequence>
     </group>

     <group
       name="commonGroup">
       <sequence>
         <element
           name="numberResourceRegistry"
           type="iris:entityType"
           minOccurs="0"
           maxOccurs="1" />
         <element


Kengo, et al.           Expires August 14, 2005                 [Page 32]
Internet-Draft                 iris-rreg                   January 2005

           name="registrationDate"
           type="dateTime"
           minOccurs="0"
           maxOccurs="1" />
         <element
           name="lastUpdatedDate"
           type="dateTime"
           minOccurs="0"
           maxOccurs="1" />
         <element
           ref="iris:seeAlso"
           minOccurs="0"
           maxOccurs="unbounded" />
       </sequence>
     </group>

   </schema>

                                Figure 9
















Kengo, et al.           Expires August 14, 2005                 [Page 33]
Internet-Draft                 iris-rreg                   January 2005

6.  BEEP Transport Compliance

   IRIS allows several extensions of the core capabilities.  This
   section outlines those extensions allowable by IRIS-BEEP [3].

6.1  Message Pattern

   This registry type uses the default message pattern as described in
   IRIS-BEEP [3].

6.2  Server Authentication

   This registry type uses the default server authentication method as
   described in IRIS-BEEP [3].



















Kengo, et al.           Expires August 14, 2005                 [Page 34]
Internet-Draft                 iris-rreg                   January 2005

7.  Internationalization Considerations

   This document lays out no new considerations for internationalization
   beyond that specified in IRIS [2].
























Kengo, et al.           Expires August 14, 2005                 [Page 35]
Internet-Draft                 iris-rreg                   January 2005

8.  IANA Considerations

   The following URN will need to be registered with IANA according to
   the IANA considerations defined in IRIS [2]:
      urn:ietf:params:xml:ns:rreg1























Kengo, et al.           Expires August 14, 2005                 [Page 36]
Internet-Draft                 iris-rreg                   January 2005

9.  Security Considerations

   This document lays out no new considerations for security precautions
   beyond that specified in IRIS [2].
























Kengo, et al.           Expires August 14, 2005                 [Page 37]
Internet-Draft                 iris-rreg                   January 2005

10.  References

10.1  Normative References

   [1]  Bradner, S., "Key words for use in RFCs to Indicate Requirement
        Levels", RFC 2119, BCP 14, March 1997.

   [2]  Newton, A., "Internet Registry Information Service",
        draft-ietf-crisp-iris-core-07 (work in progress), July 2004.

   [3]  Newton, A., "Internet Registry Information Service (IRIS) over
        the Blocks Extensible Exchange Protocol (BEEP)",
        draft-ietf-crisp-iris-beep-07 (work in progress), July 2004.

   [4]  Newton, A., "Cross Registry Internet Service Protocol (CRISP)
        Requirements", RFC 3707, February 2004.

10.2  Informative References

   [5]   Mockapetris, P., "Domain names - implementation and
         specification", STD 13, RFC 1035, November 1987.

   [6]   World Wide Web Consortium, "Extensible Markup Language (XML)
         1.0", W3C XML, February 1998,
         <http://www.w3.org/TR/1998/REC-xml-19980210>.

   [7]   World Wide Web Consortium, "Namespaces in XML", W3C XML
         Namespaces, January 1999,
         <http://www.w3.org/TR/1999/REC-xml-names-19990114>.

   [8]   World Wide Web Consortium, "XML Schema Part 2: Datatypes", W3C
         XML Schema, October 2000,
         <http://www.w3.org/TR/2001/REC-xmlschema-2-20010502/>.

   [9]   World Wide Web Consortium, "XML Schema Part 1: Structures", W3C
         XML Schema, October 2000,
         <http://www.w3.org/TR/2001/REC-xmlschema-1-20010502/>.

   [10]  Reynolds, J. and J. Postel, "ASSIGNED NUMBERS", RFC 1700, STD
         2, October 1994.

   [11]  Narten, T. and H. Alvestrand, "Guidelines for Writing an IANA
         Considerations Section in RFCs", RFC 2434, BCP 26, October
         1998.

   [12]  International Organization for Standardization, "Codes for the
         representation of names of countries, 3rd edition", ISO
         Standard 3166, August 1988.


Kengo, et al.           Expires August 14, 2005                 [Page 38]
Internet-Draft                 iris-rreg                   January 2005

Authors' Addresses

   Kengo Nagahashi
   The University of Tokyo
   403 3rd. Eng. Bldng.
   7-6-1 Hongo, Bunkyo-ku   
   Japan

   Phone: +81 3 5841 7465
   EMail: kengo@nagahashi.org

   Tomoya Yoshida
   NTT Communications


   Kuniaki Kondo
   Intec Netcore





Kengo, et al.           Expires August 14, 2005                 [Page 39]
Internet-Draft                 iris-rreg                   January 2005

Appendix A.  Example Requests and Responses

   The examples in this section use the string "C:" to denote data sent
   by a client to a server and the string "S:" to denote data sent by a
   server to a client.

A.1  Example 1

   The following is an example of entity lookup for the contact-handle
   of 'HA5260JP'.

   C: <?xml version="1.0"?>
   C: <request xmlns="urn:ietf:params:xml:ns:iris1"
   C:   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   C:   xsi:schemaLocation="urn:ietf:params:xml:ns:iris1 iris.xsd" >
   C:
   C:   <searchSet>
   C:
   C:     <lookupEntity
   C:       registryType="urn:ietf:params:xml:ns:rreg1"
   C:       entityClass="contact-handle"
   C:       entityName="HA6260-JP" />
   C:
   C:   </searchSet>
   C:
   C: </request>

   S: <?xml version="1.0"?>
   S: <iris:response
   S:   xmlns:iris="urn:ietf:params:xml:ns:iris1"
   S:   xmlns="urn:ietf:params:xml:ns:rreg1"
   S:   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   S:
   S:   <iris:resultSet>
   S:     <iris:answer>
   S:
   S:       <contact
   S:         authority="nic.ad.jp"
   S:         registryType="rreg1"
   S:         entityClass="contact-handle"
   S:         entityName="HA6260-JP">
   S:
   S:         <contactHandle>HA6260-JP</contactHandle>
   S:
   S:         <commonName>Taro Suzuki</commonName>
   S:
   S:         <organization
   S:           iris:referentType="organization"


Kengo, et al.           Expires August 14, 2005                 [Page 40]
Internet-Draft                 iris-rreg                   January 2005

   S:           authority="nic.ad.jp"
   S:           registryType="rreg1"
   S:           entityClass="organization-id"
   S:           entityName="JPNIC">
   S:           <iris:displayName
   S:             language="en">
   S:             Japan Network Information Centre
   S:           </iris:displayName>
   S:         </organization>
   S:
   S:         <phone>
   S:           <number>+81-3-213-1234</number>
   S:           <type>office</type>
   S:         </phone>
   S:
   S:       </contact>
   S:
   S:     </iris:answer>
   S:   </iris:resultSet>
   S:
   S: </iris:response>

                          Figure 10: Example 1

A.2  Example 2

   The following example shows a query to find the routes
   containing a given address.

   C: <?xml version="1.0"?>
   C: <request xmlns="urn:ietf:params:xml:ns:iris1"
   C:          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   C:
   C:   <searchSet>
   C:     <findRoutesByAddress
   C:       xmlns="urn:ietf:params:xml:ns:rreg1">
   C:
   C:       <ipv4Address>
   C:         <start>202.12.30.42</start>
   C:       </ipv4Address>
   C:
   C:       <specificity allowEquivalences="true">all-less-specifics</specificity>
   C:
   C:     </findRoutesByAddress>
   C:   </searchSet>
   C:
   C: </request>


Kengo, et al.           Expires August 14, 2005                 [Page 41]
Internet-Draft                 iris-rreg                   January 2005

   S: <?xml version="1.0"?>
   S: <iris:response xmlns:iris="urn:ietf:params:xml:ns:iris1"
   S:                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
   S:
   S:   <iris:resultSet>
   S:     <iris:answer>
   S:       <rreg:ipv4Route
   S:         xmlns="urn:ietf:params:xml:ns:rreg1"
   S:         xmlns:rreg="urn:ietf:params:xml:ns:rreg1"
   S:         xsi:schemaLocation="urn:ietf:params:xml:ns:rreg1 rreg.xsd"
   S:         authority="202.12.30.0" registryType="rreg1"
   S:         entityClass="ipv4-handle" entityName="202-12-3-0" >
   S:         <networkHandle>
   S:           202.12.3.0-24
   S:         </networkHandle>
   S:         <name>
   S:           JPNIC-CIDR-BLOCK-1
   S:         </name>
   S:         <startAddress>
   S:           202.12.3.0
   S:         </startAddress>
   S:         <endAddress>
   S:           202.12.3.255
   S:         </endAddress>
   S:         <organization
   S:           iris:referentType="rreg:organization"
   S:           authority="nic.ad.jp" registryType="rreg1"
   S:           entityClass="organization-id" entityName="JPNIC>
   S:           <iris:displayName language="en">
   S:             Japane Network Information Centre
   S:           </iris:displayName>
   S:         </organization>
   S:         <parent
   S:           iris:referentType="rreg:ipv4Route"
   S:           authority="202.12.3.0" registryType="rreg1"
   S:           entityClass="ipv4-handle" entityName="202-12-3-0"/>
   S:         <techContact
   S:           iris:referentType="rreg:contact"
   S:           authority="arin.net" registryType="rreg1"
   S:           entityClass="contact-handle" entityName="JHA6260-JP">
   S:           <iris:displayName language="en">
   S:             Taro Suzuki
   S:           </iris:displayName>
   S:         </techContact>
   S:         <registrationDate>


Kengo, et al.           Expires August 14, 2005                 [Page 42]
Internet-Draft                 iris-rreg                   January 2005

   S:           2005-01-12T00:00:00-00:00
   S:         </registrationDate>
   S:         <lastUpdatedDate>
   S:           2005-01-12T00:00:00-00:00
   S:         </lastUpdatedDate>
   S:         <iris:seeAlso
   S:           iris:referentType="ANY"
   S:           authority="nic.ad.jp" registryType="rreg1"
   S:           entityClass="service-definition" entityName="portability-notice"/>
   S:       </rreg:ipv4Route>
   S:       <rreg:ipv4Route
   S:         xmlns="urn:ietf:params:xml:ns:rreg1"
   S:         xmlns:rreg="urn:ietf:params:xml:ns:rreg1"
   S:         xsi:schemaLocation="urn:ietf:params:xml:ns:rreg1 rreg.xsd"
   S:         authority="202.12.0.0" registryType="rreg1"
   S:         entityClass="ipv4-handle" entityName="202.12-0-0" >
   S:         <networkHandle>
   S:           NET-202-12-0-0-1
   S:         </networkHandle>
   S:         <name>
   S:           JPNIC-1
   S:         </name>
   S:         <startAddress>
   S:           202.12.0.0
   S:         </startAddress>
   S:         <endAddress>
   S:           202.12.255.255
   S:         </endAddress>
   S:         <networkType>direct allocation</networkType>
   S:         <organization
   S:           iris:referentType="rreg:organization"
   S:           authority="nic.ad.jp" registryType="rreg1"
   S:           entityClass="organization-id" entityName="JPNIC">
   S:           <iris:displayName language="en">
   S:             Japan Network Information Centre
   S:           </iris:displayName>
   S:         </organization>
   S:         <parent
   S:           iris:referentType="rreg:ipv4Route"
   S:           authority="65.0.0.0" registryType="rreg1"
   S:           entityClass="ipv4-handle" entityName="NET-202-0-0-0-1"/>
   S:         <techContact
   S:           iris:referentType="rreg:contact"
   S:           authority="arin.net" registryType="rreg1"
   S:           entityClass="contact-handle" entityName="HA6260-JP" />
   S:         <registrationDate>


Kengo, et al.           Expires August 14, 2005                 [Page 43]
Internet-Draft                 iris-rreg                   January 2005

   S:           2000-10-27T00:00:00-00:00
   S:         </registrationDate>
   S:         <lastUpdatedDate>
   S:           2002-02-13T00:00:00-00:00
   S:         </lastUpdatedDate>
   S:         <iris:seeAlso
   S:           iris:referentType="ANY"
   S:           authority="nic.ad.jp" registryType="rreg1"
   S:           entityClass="service-definition" entityName="portability-notice"/>
   S:       </rreg:ipv4Route>
   S:     </iris:answer>
   S:     <iris:additional>
   S:       <iris:simpleEntity
   S:         authority="nic.ad.jp" registryType="rreg1"
   S:         entityClass="service-definition" entityName="portability-notice" >
   S:         <iris:property name="portability" language="en">
   S:           Addresses within this block are non-portable.
   S:         </iris:property>
   S:       </iris:simpleEntity>
   S:     </iris:additional>
   S:   </iris:resultSet>
   S:
   S: </iris:response>

                          Figure 11: Example 2













Kengo, et al.           Expires August 14, 2005                 [Page 44]
Internet-Draft                 iris-rreg                   January 2005

Appendix B.  Specificity Examples

   This section includes examples to clarify specificity options for
   network and ASN searches.





    A      |------------------|                     192.0.2.0  - 192.0.2.15

    B                          |------------------| 192.0.2.16 - 192.0.2.31

    C      |--------------|                         192.0.2.0  - 192.0.2.9

    D                          |---------------|    192.0.2.16 - 192.0.2.30

    E                          |---------------|    192.0.2.16 - 192.0.2.30

    F      |--------|                               192.0.2.0  - 192.0.2.5

    G                |----|                         192.0.2.6  - 192.0.2.9

                        Contents of the DB

                    Figure 12: Specificity Example 1









Kengo, et al.           Expires August 14, 2005                 [Page 45]
Internet-Draft                 iris-rreg                   January 2005

    A      |------------------|                     192.0.2.0  - 192.0.2.15

    B                          |------------------| 192.0.2.16 - 192.0.2.31

    C      |--------------|                         192.0.2.0  - 192.0.2.9

    D                          |---------------|    192.0.2.16 - 192.0.2.30

    E                          |---------------|    192.0.2.16 - 192.0.2.30

    F      |--------|                               192.0.2.0  - 192.0.2.5

    G                |----|                         192.0.2.6  - 192.0.2.9

    Query  |- - - - - - - |                         192.0.2.0  - 192.0.2.9


                        Exact match [1]

                        Result: C

                    Figure 13: Specificity Example 2













Kengo, et al.           Expires August 14, 2005                 [Page 46]
Internet-Draft                 iris-rreg                   January 2005

    A      |------------------|                     192.0.2.0  - 192.0.2.15

    B                          |------------------| 192.0.2.16 - 192.0.2.31

    C      |--------------|                         192.0.2.0  - 192.0.2.9

    D                          |---------------|    192.0.2.16 - 192.0.2.30

    E                          |---------------|    192.0.2.16 - 192.0.2.30

    F      |--------|                               192.0.2.0  - 192.0.2.5

    G                |----|                         192.0.2.6  - 192.0.2.9

    Query  |- - - - - - - - |                       192.0.2.0  - 192.0.2.12


                         Exact match [2]

                         Result: None

                    Figure 14: Specificity Example 3













Kengo, et al.           Expires August 14, 2005                 [Page 47]
Internet-Draft                 iris-rreg                   January 2005

    A      |------------------|                     192.0.2.0  - 192.0.2.15

    B                          |------------------| 192.0.2.16 - 192.0.2.31

    C      |--------------|                         192.0.2.0  - 192.0.2.9

    D                          |---------------|    192.0.2.16 - 192.0.2.30

    E                          |---------------|    192.0.2.16 - 192.0.2.30

    F      |--------|                               192.0.2.0  - 192.0.2.5

    G                |----|                         192.0.2.6  - 192.0.2.9

    Query  |- - - - - - - - - |                     192.0.2.0  - 192.0.2.15


                All more specifics, allowEquivalences = false

                Result: C, F & G (not A, which is exact match)

                    Figure 15: Specificity Example 4














Kengo, et al.           Expires August 14, 2005                 [Page 48]
Internet-Draft                 iris-rreg                   January 2005

    A      |------------------|                     192.0.2.0  - 192.0.2.15

    B                          |------------------| 192.0.2.16 - 192.0.2.31

    C      |--------------|                         192.0.2.0  - 192.0.2.9

    D                          |---------------|    192.0.2.16 - 192.0.2.30

    E                          |---------------|    192.0.2.16 - 192.0.2.30

    F      |--------|                               192.0.2.0  - 192.0.2.5

    G                |----|                         192.0.2.6  - 192.0.2.9

   Query   |- - - - - - - - - |                     192.0.2.0  - 192.0.2.15


                All more specifics, allowEquivalences = true

                Result: A, C, F & G (A included, which is exact match)

                    Figure 16: Specificity Example 5













Kengo, et al.           Expires August 14, 2005                 [Page 49]
Internet-Draft                 iris-rreg                   January 2005

    A      |------------------|                     192.0.2.0  - 192.0.2.15

    B                          |------------------| 192.0.2.16 - 192.0.2.31

    C      |--------------|                         192.0.2.0  - 192.0.2.9

    D                          |---------------|    192.0.2.16 - 192.0.2.30

    E                          |---------------|    192.0.2.16 - 192.0.2.30

    F      |--------|                               192.0.2.0  - 192.0.2.5

    G                |----|                         192.0.2.6  - 192.0.2.9

    Query  |- - - - - - - - - |                     192.0.2.0  - 192.0.2.15


                One level more specifics, allowEquivalences = false

                Result: C

                    Figure 17: Specificity Example 6














Kengo, et al.           Expires August 14, 2005                 [Page 50]
Internet-Draft                 iris-rreg                   January 2005

    A      |------------------|                     192.0.2.0  - 192.0.2.15

    B                          |------------------| 192.0.2.16 - 192.0.2.31

    C      |--------------|                         192.0.2.0  - 192.0.2.9

    D                          |---------------|    192.0.2.16 - 192.0.2.30

    E                          |---------------|    192.0.2.16 - 192.0.2.30

    F      |--------|                               192.0.2.0  - 192.0.2.5

    G                |----|                         192.0.2.6  - 192.0.2.9

    Query  |- - - - - - - - - |                     192.0.2.0  - 192.0.2.15


                One level more specifics, allowEquivalences = true

                Result: A

                    Figure 18: Specificity Example 7













Kengo, et al.           Expires August 14, 2005                 [Page 51]
Internet-Draft                 iris-rreg                   January 2005

    A      |------------------|                     192.0.2.0  - 192.0.2.15

    B                          |------------------| 192.0.2.16 - 192.0.2.31

    C      |--------------|                         192.0.2.0  - 192.0.2.9

    D                          |---------------|    192.0.2.16 - 192.0.2.30

    E                          |---------------|    192.0.2.16 - 192.0.2.30

    F      |--------|                               192.0.2.0  - 192.0.2.5

    G                |----|                         192.0.2.6  - 192.0.2.9

    Query            |- - |                         192.0.2.6  - 192.0.2.9


                All less specifics, allowEquivalences = true

                Result: A, C & G (G is included, exact match)

                    Figure 19: Specificity Example 8














Kengo, et al.           Expires August 14, 2005                 [Page 52]
Internet-Draft                 iris-rreg                   January 2005

    A      |------------------|                     192.0.2.0  - 192.0.2.15

    B                          |------------------| 192.0.2.16 - 192.0.2.31

    C      |--------------|                         192.0.2.0  - 192.0.2.9

    D                          |---------------|    192.0.2.16 - 192.0.2.30

    E                          |---------------|    192.0.2.16 - 192.0.2.30

    F      |--------|                               192.0.2.0  - 192.0.2.5

    G                |----|                         192.0.2.6  - 192.0.2.9

    Query            |- - |                         192.0.2.6  - 192.0.2.9


                All less specifics, allowEquivalences = false

                Result: A & C (G is not included, exact match)

                    Figure 20: Specificity Example 9













Kengo, et al.           Expires August 14, 2005                 [Page 53]
Internet-Draft                 iris-rreg                   January 2005

    A      |------------------|                     192.0.2.0  - 192.0.2.15

    B                          |------------------| 192.0.2.16 - 192.0.2.31

    C      |--------------|                         192.0.2.0  - 192.0.2.9

    D                          |---------------|    192.0.2.16 - 192.0.2.30

    E                          |---------------|    192.0.2.16 - 192.0.2.30

    F      |--------|                               192.0.2.0  - 192.0.2.5

    G                |----|                         192.0.2.6  - 192.0.2.9

    Query            |- - |                         192.0.2.6  - 192.0.2.9


                One level less specifics, allowEquivalences = true

                Result: G (the exact match)

                   Figure 21: Specificity Example 10













Kengo, et al.           Expires August 14, 2005                 [Page 54]
Internet-Draft                 iris-rreg                   January 2005

    A      |------------------|                     192.0.2.0  - 192.0.2.15

    B                          |------------------| 192.0.2.16 - 192.0.2.31

    C      |--------------|                         192.0.2.0  - 192.0.2.9

    D                          |---------------|    192.0.2.16 - 192.0.2.30

    E                          |---------------|    192.0.2.16 - 192.0.2.30

    F      |--------|                               192.0.2.0  - 192.0.2.5

    G                |----|                         192.0.2.6  - 192.0.2.9

    Query            |- - |                         192.0.2.6  - 192.0.2.9


                One level less specifics, allowEquivalences = false

                Result: C

                   Figure 22: Specificity Example 11













Kengo, et al.           Expires August 14, 2005                 [Page 55]
Internet-Draft                 iris-rreg                   January 2005

    A      |------------------|                     192.0.2.0  - 192.0.2.15

    B                          |------------------| 192.0.2.16 - 192.0.2.31

    C      |--------------|                         192.0.2.0  - 192.0.2.9

    D                          |---------------|    192.0.2.16 - 192.0.2.30

    E                          |---------------|    192.0.2.16 - 192.0.2.30

    F      |--------|                               192.0.2.0  - 192.0.2.5

    G                |----|                         192.0.2.6  - 192.0.2.9

    Query  |- - - - - - |                           192.0.2.0  - 192.0.2.8


                One level less specifics, allowEquivalences = false or true

                Result: C

                   Figure 23: Specificity Example 12













Kengo, et al.           Expires August 14, 2005                 [Page 56]
Internet-Draft                 iris-rreg                   January 2005

    A      |------------------|                     192.0.2.0  - 192.0.2.15

    B                          |------------------| 192.0.2.16 - 192.0.2.31

    C      |--------------|                         192.0.2.0  - 192.0.2.9

    D                          |---------------|    192.0.2.16 - 192.0.2.30

    E                          |---------------|    192.0.2.16 - 192.0.2.30

    F      |--------|                               192.0.2.0  - 192.0.2.5

    G                |----|                         192.0.2.6  - 192.0.2.9

    Query  =  E


                  Find parent (Query argument is a handle)

                  Result: D

                   Figure 24: Specificity Example 13













Kengo, et al.           Expires August 14, 2005                 [Page 57]
Internet-Draft                 iris-rreg                   January 2005

    A      |------------------|                     192.0.2.0  - 192.0.2.15

    B                          |------------------| 192.0.2.16 - 192.0.2.31

    C      |--------------|                         192.0.2.0  - 192.0.2.9

    D                          |---------------|    192.0.2.16 - 192.0.2.30

    E                          |---------------|    192.0.2.16 - 192.0.2.30

    F      |--------|                               192.0.2.0  - 192.0.2.5

    G                |----|                         192.0.2.6  - 192.0.2.9

    Query  =  D


                   Find child (Query argument is a handle)

                   Result: E

                   Figure 25: Specificity Example 14














Kengo, et al.           Expires August 14, 2005                 [Page 58]
Internet-Draft                 iris-rreg                   January 2005

Appendix C.  Contributors

























Kengo, et al.           Expires August 14, 2005                 [Page 59]
Internet-Draft                 iris-rreg                   January 2005

Appendix D.  Acknowledgements

   The authors would thank for using discussion with JPNIC
   IRR planning team: Kuniaki Kondo, Jun-ichi Matsumoto,
   Katsuyasu Tomama and Masashi Eto.






















Kengo, et al.           Expires August 14, 2005                 [Page 60]
Internet-Draft                 iris-rreg                   January 2005

Intellectual Property Statement

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in BCP 78 and BCP 79.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   http://www.ietf.org/ipr.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.

Disclaimer of Validity

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET
   ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

Copyright Statement

   Copyright (C) The Internet Society (2004).  This document is subject
   to the rights, licenses and restrictions contained in BCP 78, and
   except as set forth therein, the authors retain all their rights.

Acknowledgment

   Funding for the RFC Editor function is currently provided by the
   Internet Society.


Kengo, et al.           Expires August 14, 2005                 [Page 61]
