





Network Working Group                                       Levon Esibov
INTERNET-DRAFT                                             Bernard Aboba
Category: Standards Track                                    Dave Thaler
<draft-aboba-dhc-mdns-conf-01.txt>                             Microsoft
10 March 2000
Expires: October 1, 2000

                   Multicast DNS Configuration Option

This document is an Internet-Draft and is in full conformance with all
provisions of Section 10 of RFC2026.

Internet-Drafts are working documents of the Internet Engineering Task
Force (IETF), its areas, and its working groups.  Note that other groups
may also distribute working documents as Internet- Drafts.

Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any
time.  It is inappropriate to use Internet-Drafts as reference material
or to cite them other than as "work in progress."

The list of current Internet-Drafts can be accessed at
http://www.ietf.org/ietf/1id-abstracts.txt

The list of Internet-Draft Shadow Directories can be accessed at
http://www.ietf.org/shadow.html.

1.  Copyright Notice

Copyright (C) The Internet Society (2000).  All Rights Reserved.

2.  Abstract

This document defines a new DHCP option which is passed from the DHCP
Server to the DHCP Client to specify the multicast DNS configuration.

3.  Introduction

Multicast DNS was first defined in [5], and behavior was further
specified in [3]. The Dynamic Host Configuration Protocol (DHCP)[1]
provides a framework for passing configuration information to hosts on a
TCP/IP network. RFC 2132 [2] allows DHCP servers to specify
configuration information for various kinds of name servers to be passed
to DHCP clients. However, no information is provided as to the
configuration desired for multicast DNS. The purpose of  this document
is to allow DHCP servers to specify the multicast DNS configuration to
be used by DHCP clients.




Esibov, Aboba & Thaler       Standards Track                    [Page 1]

INTERNET-DRAFT     Multicast DNS Configuration Option      10 March 2000


3.1.  Requirements terminology

The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
"SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY" and "OPTIONAL" in this
document are to be interpreted as described in RFC 2119 [4].

3.2.  DHCP terminology

This document uses the following terms:

DHCP client
          DHCP client or "client" is an Internet host using DHCP to
          obtain configuration parameters such as a network address.

DHCP server
          A DHCP server or "server" is an Internet host that returns
          configuration parameters to DHCP clients.

4.  Format of the multicast DNS configuration option

The following diagram defines the format of the multicast DNS
configuration option:

 0                   1                   2
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|     Code      |     Length    |  Node Type    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

Code

   TBD

Length

   1















Esibov, Aboba & Thaler       Standards Track                    [Page 2]

INTERNET-DRAFT     Multicast DNS Configuration Option      10 March 2000


Node type

   The node type field, which is one octet, describes how the host
   behaves as multicast DNS querier and listener. Values are defined as
   follows:

   Value         Node Type
   -----         ---------
   0x1           B-node
   0x2           P-node
   0x3           Reserved
   0x4           M-node
   0x5 - 0x7     Reserved
   0x8           H-node
   0x9 - 0xFF    Reserved

4.1.  B-node

B-nodes MUST act as multicast DNS queriers and listeners, but MUST NOT
send unicast DNS queries. As a result, they are unable to resolve names
outside the scope of the multicast DNS, as defined in [3].

Hosts configured as B-nodes MUST listen for mDNS queries on both the
linklocal and local scope addresses, and MUST respond to mDNS queries as
described in [3].

4.2.  P-node

P-nodes MUST only send unicast DNS queries, and MUST NOT listen for
multicast DNS queries or respond to them in any way. Hosts configured as
P-nodes MUST NOT send multicast DNS queries for any purpose, including
DNS server location. By default, both IPv4 and IPv6 hosts that are
configured via DHCP but do not receive a multicast DNS configuration
option behave as P-nodes. If no DNS server option is provided, a P-node
host  will be unable to resolve names.

4.3.  M-node

M-nodes MUST use multicast DNS queries for resolving names prior to
querying the DNS server using unicast. M-nodes configured without a DNS
server will send only multicast DNS queries, and will be unable to
resolve names outside the scope of the multicast DNS, as defined in [3].

Hosts configured as M-nodes MUST listen for mDNS queries on both the
linklocal and local scope addresses, and MUST respond to mDNS queries as
described in [3].





Esibov, Aboba & Thaler       Standards Track                    [Page 3]

INTERNET-DRAFT     Multicast DNS Configuration Option      10 March 2000


4.4.  H-nodes

H-nodes MUST send multicast DNS queries only if they have not been able
to resolve the name via a query to a DNS server using unicast. H-nodes
lacking a DNS server will send only multicast DNS queries, and will be
unable to resolve names outside the scope of the multicast DNS as
defined in [3].

Hosts configured as H-nodes MUST listen for mDNS queries on both the
linklocal and local scope addresses, and MUST respond to mDNS queries as
described in [3].  H-nodes MUST NOT send mDNS queries without first
querying the unicast DNS server if one is available.

5.  Scalability considerations

Since B and M-nodes function as multicast DNS listeners as well as
multicast DNS queriers of first resort, the presence of these nodes can
result in considerable multicast traffic propagating within the local
administrative scope zone. This could represent a scalability problem in
large enterprise networks, and so in this scenario, configuration of
hosts as B and M-nodes is discouraged. Instead, it is recommended that
enterprise networks deploy dynamic DNS utilizing hosts configured as P-
nodes, which is the default behavior where no mDNS configuration option
is provided.

6.  References

[1]  Droms, R., "Dynamic Host Configuration Protocol", RFC 2131, March
     1997.

[2]  Alexander, S., Droms, R., "DHCP Options and BOOTP Vendor
     Extensions", RFC 2132, March 1997.

[3]  Esibov, L., Aboba, B., Thaler, D. "Multicast DNS", Internet draft
     (work in progress), draft-aboba-dnsext-mdns-00.txt, March 2000.

[4]  Bradner, S., "Key words for use in RFCs to Indicate Requirement
     Levels", BCP 14, RFC 2119, March 1997.

[5]  Braden, R., "Requirements for Internet Hosts -- Application and
     Support", RFC 1123, October 1989.

7.  Security Considerations

The option described in this draft may be used in situations where DHCP
is authenticated or unauthenticated. In situations where authenticated
DHCP is not used, it is possible for a rogue DHCP server to respond to
the DHCP client with an inappropriate mDNS configuration option. For



Esibov, Aboba & Thaler       Standards Track                    [Page 4]

INTERNET-DRAFT     Multicast DNS Configuration Option      10 March 2000


example, the rogue DHCP server could specify an mDNS configuration
option of 0x1. This would cause the host to become both an mDNS querier
and listener (B-node). Were hosts to be widely configured this way, this
could result in propagation of mDNS queries throughout the enterprise.

8.  IANA Considerations

This draft does not create any new number or name spaces for IANA
administration.

9.  Acknowledgements

This draft has been enriched by comments from Erik Guttman of Sun
Microsystems.

10.  Authors' Addresses

Levon Esibov
Microsoft Corporation
One Microsoft Way
Redmond, WA 98052

EMail: levone@microsoft.com

Bernard Aboba
Microsoft Corporation
One Microsoft Way
Redmond, WA 98052

Phone: +1 (425) 936-6605
EMail: bernarda@microsoft.com

Dave Thaler
Microsoft Corporation
One Microsoft Way
Redmond, WA 98052

Phone: +1 (425) 703-8835
EMail: dthaler@microsoft.com


11.  Intellectual Property Statement

The IETF takes no position regarding the validity or scope of any
intellectual property or other rights that might be claimed to  pertain
to the implementation or use of the technology described in this
document or the extent to which any license under such rights might or
might not be available; neither does it represent that it has made any



Esibov, Aboba & Thaler       Standards Track                    [Page 5]

INTERNET-DRAFT     Multicast DNS Configuration Option      10 March 2000


effort to identify any such rights.  Information on the IETF's
procedures with respect to rights in standards-track and standards-
related documentation can be found in BCP-11.  Copies of claims of
rights made available for publication and any assurances of licenses to
be made available, or the result of an attempt made to obtain a general
license or permission for the use of such proprietary rights by
implementors or users of this specification can be obtained from the
IETF Secretariat.

The IETF invites any interested party to bring to its attention any
copyrights, patents or patent applications, or other proprietary rights
which may cover technology that may be required to practice this
standard.  Please address the information to the IETF Executive
Director.

12.  Full Copyright Statement

Copyright (C) The Internet Society (2000).  All Rights Reserved.
This document and translations of it may be copied and furnished to
others, and derivative works that comment on or otherwise explain it or
assist in its implmentation may be prepared, copied, published and
distributed, in whole or in part, without restriction of any kind,
provided that the above copyright notice and this paragraph are included
on all such copies and derivative works.  However, this document itself
may not be modified in any way, such as by removing the copyright notice
or references to the Internet Society or other Internet organizations,
except as needed for the purpose of developing Internet standards in
which case the procedures for copyrights defined in the Internet
Standards process must be followed, or as required to translate it into
languages other than English.  The limited permissions granted above are
perpetual and will not be revoked by the Internet Society or its
successors or assigns.  This document and the information contained
herein is provided on an "AS IS" basis and THE INTERNET SOCIETY AND THE
INTERNET ENGINEERING TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE."

13.  Expiration Date

This memo is filed as <draft-aboba-dhc-mdns-conf-01.txt>,  and  expires
October 1, 2000.









Esibov, Aboba & Thaler       Standards Track                    [Page 6]

