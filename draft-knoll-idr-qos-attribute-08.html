<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>BGP Extended Community for QoS Marking</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Problem Statement">
<link href="#rfc.section.3" rel="Chapter" title="3 Related Work">
<link href="#rfc.section.4" rel="Chapter" title="4 Definition of the QoS Marking Community">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 Extended Community Type">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Structure of the QoS Marking Community">
<link href="#rfc.section.4.3" rel="Chapter" title="4.3 Technology Type Enumeration">
<link href="#rfc.section.5" rel="Chapter" title="5 Community Usage">
<link href="#rfc.section.5.1" rel="Chapter" title="5.1 QoS Marking Example">
<link href="#rfc.section.5.2" rel="Chapter" title="5.2 AS Border Packet Forwarding">
<link href="#rfc.section.5.3" rel="Chapter" title="5.3 IP Prefix Aggregation">
<link href="#rfc.section.6" rel="Chapter" title="6 Confidentiality Considerations">
<link href="#rfc.section.7" rel="Chapter" title="7 IANA Considerations">
<link href="#rfc.section.8" rel="Chapter" title="8 Security Considerations">
<link href="#rfc.references" rel="Chapter" title="9 References">
<link href="#rfc.references.1" rel="Chapter" title="9.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="9.2 Informative References">
<link href="#rfc.appendix.Appendix%20A" rel="Chapter" title="Appendix A QoS Marking Example">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="This document specifies a simple signalling mechanism for inter-domain QoS marking using several instances of a new BGP Extended Community. Class based packet marking and forwarding is currently performed independently within ASes. The new QoS marking community makes the targeted Per Hop Behaviour within the IP prefix advertising AS and the currently applied marking at the interconnection point known to all access and transit ASes. This enables individual (re-)marking and possibly forwarding treatment adaptation to the original QoS class setup of the respective originating AS. The extended community provides the means to signal QoS markings on different layers, which are linked together in QoS Class Sets. It provides inter-domain and cross-layer insight into the QoS class mapping of the source AS with minimal signalling traffic." />
  <meta name="description" content="This document specifies a simple signalling mechanism for inter-domain QoS marking using several instances of a new BGP Extended Community. Class based packet marking and forwarding is currently performed independently within ASes. The new QoS marking community makes the targeted Per Hop Behaviour within the IP prefix advertising AS and the currently applied marking at the interconnection point known to all access and transit ASes. This enables individual (re-)marking and possibly forwarding treatment adaptation to the original QoS class setup of the respective originating AS. The extended community provides the means to signal QoS markings on different layers, which are linked together in QoS Class Sets. It provides inter-domain and cross-layer insight into the QoS class mapping of the source AS with minimal signalling traffic." />
  <meta name="keywords" content="Draft" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Inter-Domain Routing Working Group</td>
<td class="right">Th. M. Knoll</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">Chemnitz University of Technology</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">July 14, 2011</td>
</tr>
<tr>
<td class="left">Expires: January 15, 2012</td>
<td class="right"></td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">BGP Extended Community for QoS Marking<br />
  <span class="filename">draft-knoll-idr-qos-attribute-08</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This document specifies a simple signalling mechanism for inter-domain QoS marking using several instances of a new BGP Extended Community. Class based packet marking and forwarding is currently performed independently within ASes. The new QoS marking community makes the targeted Per Hop Behaviour within the IP prefix advertising AS and the currently applied marking at the interconnection point known to all access and transit ASes. This enables individual (re-)marking and possibly forwarding treatment adaptation to the original QoS class setup of the respective originating AS. The extended community provides the means to signal QoS markings on different layers, which are linked together in QoS Class Sets. It provides inter-domain and cross-layer insight into the QoS class mapping of the source AS with minimal signalling traffic.</p>
<h1><a>Requirements Language</a></h1>
<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">RFC 2119</a> <cite title="NONE">[RFC2119]</cite>.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on January 15, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Problem Statement</a>
</li>
<li>3.   <a href="#rfc.section.3">Related Work</a>
</li>
<li>4.   <a href="#rfc.section.4">Definition of the QoS Marking Community</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">Extended Community Type</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">Structure of the QoS Marking Community</a>
</li>
<li>4.3.   <a href="#rfc.section.4.3">Technology Type Enumeration</a>
</li>
<li>5.   <a href="#rfc.section.5">Community Usage</a>
</li>
<li>5.1.   <a href="#rfc.section.5.1">QoS Marking Example</a>
</li>
<li>5.2.   <a href="#rfc.section.5.2">AS Border Packet Forwarding</a>
</li>
<li>5.3.   <a href="#rfc.section.5.3">IP Prefix Aggregation</a>
</li>
<li>6.   <a href="#rfc.section.6">Confidentiality Considerations</a>
</li>
<li>7.   <a href="#rfc.section.7">IANA Considerations</a>
</li>
<li>8.   <a href="#rfc.section.8">Security Considerations</a>
</li>
<li>9.   <a href="#rfc.references">References</a>
</li>
<li>9.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>9.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li>Appendix A.   <a href="#rfc.appendix.Appendix%20A">QoS Marking Example</a>
</li>
<li><a href="#rfc.authors">Author's Address</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">A new BGP Extended Community is defined in this document, which carries QoS marking information for different network layer technologies across ASes. This extended community is called "QoS Marking". This new community provides a mechanism within BGP-4 <a href="#RFC4271">[RFC4271]</a> for associating all advertised prefixes of the AS with its differentiated QoS Class Marking information. It allows for the consistent exchange of class encoding values between BGP peers for physical, data link and network QoS mechanisms. These labels can be used to control the distribution of this information, for the encoding and for treatment adjustments within the AS or for other applications. One globally seen QoS Class Set per AS is required for scalability reasons.  It is the AS provider's responsibility to enforce the globally signalled Set throughout the AS.</p>
<p id="rfc.section.1.p.2">Several QoS Marking communities MAY be included in a single BGP UPDATE message. They are virtually linked together by means of an identical "QoS Set Number" field. Each QoS Marking community is encoded as 8-octet tuple, as defined in <a href="#Attribute_Definition">Section 4</a>. Signalled QoS Class Sets are assumed to be valid for traffic crossing this AS. If different QoS strategies are used with an AS, its provider is responsible for consistent transport of transit traffic across this inhomogeneous domain. In all transit forwarding cases, QoS based tunnelling mechanisms are the means of choice for transparent traffic transport.</p>
<p id="rfc.section.1.p.3">The availability of the "Best Effort" forwarding class is implied and defaults to a zero encoding on all signalled layers. It is therefore not necessary to include QoS Marking communities for the Best Effort Class as long as the default encoding is in place.</p>
<p id="rfc.section.1.p.4">Class overload prevention can be achieved by means of the signalling described in <a href="#I-D.knoll-idr-cos-interconnect">[I-D.knoll-idr-cos-interconnect]</a>. It is a complementary concept to limit the usage of advertised classes in a fair and square manner.</p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> Problem Statement</h1>
<p id="rfc.section.2.p.1">Current inter-domain interconnection is "best effort" interconnection only. That is, traffic forwarding between ASes is without traffic class differentiation and without any forwarding guarantee. It is common for network providers to reset any IP packet class markings to zero, the best effort DSCP marking, at the AS ingress router, which eliminates any traffic differentiation. Some providers perform higher layer classification at the ingress in order to guess the forwarding requirements and to match on their AS internal QoS forwarding policy.  There is no standardized set of classes, no standardized marking (class encoding) and no standardized forwarding behaviour, which cross-domain traffic could rely on. QoS policy decisions are taken by network providers independently and in an uncoordinated fashion.</p>
<p id="rfc.section.2.p.2">This general statement does not cover the existing individual agreements, which do offer quality based interconnection with strict QoS guarantees. However, such SLA based agreements are of bilateral or multilateral nature and do not offer a means for a general "better than best effort" interconnection. This draft does not aim for making such SLA based agreements become void. On the contrary, those agreements are expected to exist for special traffic forwarding paths with strictly guaranteed QoS.</p>
<p id="rfc.section.2.p.3">There are many approaches, which propose proper inter-domain QoS strategies including inter-domain parameter signalling, metering, monitoring and misbehaviour detection. Such complex strategies get close to guaranteed QoS based forwarding at the expense of dynamic measurements and adjustments, of state keeping on resource usage vs.  traffic load and in particular of possibly frequent inter-domain signalling.</p>
<p id="rfc.section.2.p.4">The proposed QoS Class marking approach dissociates from the complex latter solutions and targets the general "better than best effort" interconnection in coexistence with SLA based agreements. It enables ASes to make their supported Class Sets and their encoding globally known. In other words, this support information constitutes a simple map of QoS enabled roads in transit and destination ASes.</p>
<p id="rfc.section.2.p.5">Signalling the coarse information about the supported class set and its cross-layer encoding within the involved forwarding domains of the selected AS path removes the lack of knowledge about the over-all available traffic differentiation. AS providers are enabled to make an informed decision about supported class encodings and might adopt to them. No guarantees are offered by this "better than best effort" approach, but as much as easily possible traffic differentiation without the need for frequent inter-domain signalling and for costly ingress re-classification will be achieved.</p>
<p id="rfc.section.2.p.6">Remarking the class encoding of customer traffic in order to match neighbouring class set encodings is reasonable at AS interconnection points. For AS internal forwarding, the encapsulation within any kind of QoS supporting tunnelling technology is highly recommended. The cross-layer signalling of QoS encoding will further ease the setup of QoS based inter-domain tunnelling.</p>
<p id="rfc.section.2.p.7">The general confidentiality concern of disclosing AS internal policy information is addressed in <a href="#Confidentiality">Section 6</a>. In short, network providers can signal a different class set in the QoS Marking communities to the one actually used internally. The different class sets (externally signalled vs. internally applied one) require an undisclosed strictly defined mapping at the AS borders between the two.  This way, a distinction between internal and external QoS Class Sets can be achieved.</p>
<p id="rfc.section.2.p.8">The general need for class based accounting is not addressed by this draft. MIB extensions are also required, which separate traffic variables by traffic marking. It is expected for both that existing procedures can be reused in a class based manner.</p>
<p></p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> Related Work</h1>
<p id="rfc.section.3.p.1">A number of QoS improvement approaches have been proposed before and a selection will be briefly mentioned in this section.</p>
<p id="rfc.section.3.p.2">Most of the approaches perform parameter signalling. <a href="#I-D.jacquenet-bgp-qos">[I-D.jacquenet-bgp-qos]</a> defines the QOS_NLRI attribute, which is used for propagating QoS-related information associated to the NLRI (Network Layer Reachability Information) information conveyed in a BGP UPDATE message. Single so called "QoS routes" are signalled, which fulfil certain QoS requirements. Several information types are defined for the attribute, which concentrate on rate and delay type parameters.</p>
<p><a href="#I-D.boucadair-qos-bgp-spec">[I-D.boucadair-qos-bgp-spec]</a> is based on the specified QOS_NLRI attribute and introduces some modifications to it.  The notion of AS-local and extended QoS classes is used, which effectively describes the local set of QoS performance parameters or their cross-domain combined result. Two groups of QoS delivery services are distinguished, where the second group concentrates on ID associated QoS parameter propagation between adjacent peers. The first group is of more interest for this draft since it concentrates on the "identifier propagation" such as the DSCP value for example. However, this signalling is specified for the information exchange between adjacent peers only and assumes the existence of extended QoS classes and offline traffic engineering functions.</p>
<p id="rfc.section.3.p.4">Another approach is described in <a href="#I-D.liang-bgp-qos">[I-D.liang-bgp-qos]</a>. It associates a list of QoS metrics with each prefix by extending the existing AS_PATH attribute format.  Hop-by-hop metric accumulation is performed as the AS_PATH gets extended in relaying ASes. Metrics are generically specified as a list of TLV-style attribute elements. The metrics such as bandwidth and delay are exemplary mentioned in the draft.</p>
<p id="rfc.section.3.p.5">One contribution specialized in the signalling of Type Of Service (TOS) values which are in turn directly mapped to DSCP values in section 3.2 of the draft <a href="#I-D.zhang-idr-bgp-extcommunity-qos">[I-D.zhang-idr-bgp-extcommunity-qos]</a>. The TOS value is signalled within an Extended Community Attribute and, if it is understood correctly, will be applied to a certain route. An additional value field is used to identify, which routes belong to which signalled TOS community. Who advertises such attributes and whether they are of transitive or non-transitive type remains unspecified.</p>
<p id="rfc.section.3.p.6">The most comprehensive analysis (although not an IETF draft) is given in <a href="#MIT_CFP">[MIT_CFP]</a>. This "Inter- provider Quality of Service" white paper examines the inter-domain QoS requirements and derives a comprehensive approach for the introduction of at least one QoS class with guaranteed delay parameters. The implementation aspects of metering, monitoring, parameter feedback and impairment allocations are all considered in the white paper. However, QoS guarantees and parameter signalling is beyond the intention of this QoS Marking draft.</p>
<p id="rfc.section.3.p.7">Other drafts may also be considered as related work as long as they convey QoS marking information and might be "misused" for QoS class signalling.</p>
<p id="rfc.section.3.p.8">One example is the usage of the "Traffic Engineering Attribute" as defined in <a href="#RFC5543">[RFC5543]</a>. However, the attribute is non-transitive and the LSP encoding types are not generally applicable to inter-domain interconnection types. Its usage of the targeted QoS Marking signalling is not possible. The included maximum bandwidth of each of eight priority classes, could however be used in future draft extensions.</p>
<p id="rfc.section.3.p.9">The second example is the current "Dissemination of flow specification rules" draft <a href="#RFC5575">[RFC5575]</a>. It defines a new BGP NLRI encoding format, which can be used to distribute traffic flow specifications. Such flow specification can also include DSCP values as type 11 in the NLRI. Furthermore, one could signal configuration actions together with the DSCP encoding, which could be used for filtering purposes or even trigger remarking and route selection with it. Such usage is not defined in the draft and can hardly be achieved because of the following reasons. The flow specification is focused on single flows, which might even be part of an aggregate. Such fine grained specification is counterproductive for the coarse grained general QoS Marking approach of this draft. The novel approach of cross-layer QoS Marking could also not be incorporated, which might be essential for future tunnelled inter-domain interconnection.</p>
<p><br><br><br><br><br><br><br><br><br><br><br><br><br></p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#Attribute_Definition" id="Attribute_Definition">Definition of the QoS Marking Community</a>
</h1>
<p></p>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> Extended Community Type</h1>
<p id="rfc.section.4.1.p.1">The new QoS Marking community is encoded in a BGP Extended Community Attribute <a href="#RFC4360">[RFC4360]</a>. It is therefore a transitive optional BGP attribute with Type Code 16. An adoption to the simple BGP Community Attribute encoding <a href="#RFC1997">[RFC1997]</a> is not defined in this document. The actual encoding within the BGP Extended Community Attribute is as follows.</p>
<p id="rfc.section.4.1.p.2">The QoS Marking community is of regular type which results in a 1 octet Type field followed by 7 octets for the QoS marking structure.  The Type is IANA-assignable and marks the community as transitive across ASes. The type number has been assigned by IANA to 0x04 <a href="#IANA_EC">[IANA_EC]</a>.</p>
<p id="rfc.section.4.1.p.3">Optionally, a non-transitive Type value assignment of 0x44 is provided, which allows for the AS internal marking information exchange. The community format remains untouched for the non-transitive version.</p>
<div id="#rfc.figure.1"></div>
<div id="#Figure_1"></div>
<pre> 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0 0 0 0 0 0 0 0|                                               |
+-+-+-+-+-+-+-+-+   7 octet QoS Marking community structure     |
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> Structure of the QoS Marking Community</h1>
<p id="rfc.section.4.2.p.1">The QoS Marking community provides a flexible encoding structure for various QoS Markings on different layers. This flexibility is achieved by a Flags, a QoS Set Number and a Technology Type field within the 7 octet structure as defined below.</p>
<div id="#rfc.figure.2"></div>
<div id="#Figure_2"></div>
<pre> 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    Flags      | QoS Set Number|Technology Type| QoS Marking Oh|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| QoS Marking Ol| QoS Marking A |0 0 0 0 0 0 0 0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
<p><br><br><br><br><br><br><br><br><br><br><br><br><br>Flags:</p>
<div id="#rfc.figure.3"></div>
<div id="#Figure_3"></div>
<pre> 0  1  2  3  4  5  6  7 
+--+--+--+--+--+--+--+--+
|0  0 |P |R |I |A |0 |0 |
+--+--+--+--+--+--+--+--+
</pre>
<p></p>

<dl>
<dt></dt>
<dd style="margin-left: 8">All used and unused flags default to a value of &#8216;0&#8217;. The following table shows the bit encoding of the Flags field.</dd>
</dl>
<div id="#rfc.table.1"></div>
<div id="#Table_1"></div>
<table cellpadding="3" cellspacing="0" class="tt full left">
<thead><tr>
<th class="left">Bit</th>
<th class="left">Flag</th>
<th class="left">Encoding</th>
</tr></thead>
<tbody>
<tr>
<td class="left">0-1</td>
<td class="left">unused</td>
<td class="left">Default to &#8216;0&#8217;</td>
</tr>
<tr>
<td class="left">2</td>
<td class="left">P</td>
<td class="left">&#8216;1&#8217; &#8230; Marking is preserved</td>
</tr>
<tr>
<td class="left">3</td>
<td class="left">R</td>
<td class="left">&#8216;1&#8217; &#8230; Remarking occurred</td>
</tr>
<tr>
<td class="left">4</td>
<td class="left">I</td>
<td class="left">&#8216;1&#8217; &#8230; QoS marking ignored</td>
</tr>
<tr>
<td class="left">5</td>
<td class="left">A</td>
<td class="left">&#8216;1&#8217; &#8230; QoS class aggregation occurred</td>
</tr>
<tr>
<td class="left">6,7</td>
<td class="left">unused</td>
<td class="left">Default to &#8216;0&#8217;</td>
</tr>
</tbody>
</table>
<p></p>
<p></p>

<dl>
<dt></dt>
<dd style="margin-left: 8">The 'P' flag indicates the preservation of incoming markings during the transit forwarding process. The IP prefix originating AS SHOULD set the flag to '1', which is otherwise implied by an AS_PATH length of 1 ASN. Transit ASes MUST set the flag to '1', if the advertised Marking A is accepted at the ingress and is sent out unchanged at the egress. That is, no remarking occurs - neither for marking adoption with the neighbouring downstream AS nor by resetting the markings. This flag field is set and cleared by each relaying AS according to its handling of markings - irrespective of the possible ignorance of the particular Marking A in the internal per hop forwarding behaviour.</dd>
<dt></dt>
<dd style="margin-left: 8">The Flags "R, I and A" are set to '0' in the advertisement by the IP prefix originating AS. Transit ASes MUST change the flag value to '1' once the respective event occurred. If the QoS marking actively used in the transit AS internal forwarding is different from the advertised original one, the 'Remarking (R)' flag is set to '1'. This MUST be done separately for each technology type community within the community set. The same applies to the 'Ignore (I)' flag, if the respective advertised QoS marking is ignored in the transit AS internal forwarding.</dd>
<dt></dt>
<dd style="margin-left: 8">The 'Aggregation (A)' flag MUST be set to '1' by the UPDATE message relaying transit AS, if the respective IP prefixes will be advertised inside an IP prefix aggregate constituted from differing Class Sets.</dd>
<dt></dt>
<dd style="margin-left: 8">If the defined "R, I and A" flags are cleared - and by means of the cleared 'Partial' flag of the BGP attribute it is shown, that no "QoS Class ignorant" AS is involved in the forwarding path - a consistent class based overall traffic separated forwarding is available along this path.</dd>
</dl>
<p id="rfc.section.4.2.p.6">QoS Set Number:</p>
<p></p>

<dl>
<dt></dt>
<dd style="margin-left: 8">Several single QoS Marking communities can be logically grouped into a QoS Marking community Set characterized by a identical QoS Set Number. This grouping of the single QoS Marking communities into a set provides cross-layer linking between the QoS class encodings. It can also be used for the specification of behaviour sets as given in the <a href="#RFC3140">[RFC3140]</a>. The number of signalled QoS Marking communities as well as QoS Marking community Sets is at the operator&#8217;s choice of the originating AS. The enumerated QoS set numbers have BGP UPDATE message local significance starting with set number 0x00.</dd>
</dl>
<p id="rfc.section.4.2.p.8">Technology Type:</p>
<p id="rfc.section.4.2.p.9">The technology type encoding uses the enumeration list <a href="#tech_type">in</a> <cite title="NONE">[tech_type]</cite>. Future version of this draft will need an extended enumeration list administered by IANA.</p>
<p id="rfc.section.4.2.p.10">QoS Marking / Enumeration O &amp; A:</p>
<p id="rfc.section.4.2.p.11">The interpretation of these fields depends on the selected layer and technology. ASes, which process the community and support the given QoS Class by means of a QoS mechanism using bit encodings for the targeted behaviour (e.g. IP DSCP, Ethernet User Priority, MPLS TC etc.) MUST use a copy of the encoding in the "QoS Marking A" community field. Unused higher order bits default to &#8216;0&#8217;. Other technologies, which use separate forwarding channels for different classes (such as L-LSPs, VPI/VCI inferred ATM classes, lambda inferred priority, etc.) SHALL use class enumerations as encoding in this community field. The enumeration count starts with zero for the best effort traffic class and rises by one with each available higher priority class.</p>
<p id="rfc.section.4.2.p.12">There are two QoS Marking fields within the QoS Marking community for the "original (O)" and the "active (A)" QoS marking. Higher order bits of those fields, which are not used for the respective behaviour encoding, default to zero.</p>
<p id="rfc.section.4.2.p.13">QoS Marking O (Original QoS Marking):</p>

<dl>
<dt></dt>
<dd style="margin-left: 8">This field is a 16 bit QoS Marking field, which consists of of a high ("Oh") and a low ("Ol") octet. The IP prefix originating AS copies the internally associated QoS encoding of the given Technology Type into this one octet field. The field value is right-aligned depending on the number of encoded bits. For the IP technology, the encoding of Per Hop Behaviour Codes has to follow the definitions stated in <a href="#RFC3140">[RFC3140]</a>. The field MUST remain unchanged in BGP UPDATE messages of relaying nodes.</dd>
</dl>
<p id="rfc.section.4.2.p.14">QoS Marking A (Active QoS Marking):</p>

<dl>
<dt></dt>
<dd style="margin-left: 8">QoS Marking A and O MUST be identically encoded by the prefix originating AS, except for the case, where IP technology Per Hop Behaviours are addressed. "QoS Marking A" will always contain the locally applied encoding for the targeted PHB.</dd>
<dt></dt>
<dd style="margin-left: 8">All other ASes use this Active QoS Marking field to advertise their locally applied internal QoS encoding of the given class and technology at the interconnection point. The field value is right-aligned depending on the number of encoded bits. A cleared Marking field (all zero) signals that this traffic class experiences default traffic treatment within the transit AS forwarding technology.</dd>
</dl>
<p><br><br><br><br><br><br><br><br><br><br><br><br><br></p>
<h1 id="rfc.section.4.3">
<a href="#rfc.section.4.3">4.3.</a> <a href="#tech_type" id="tech_type">Technology Type Enumeration</a>
</h1>
<p id="rfc.section.4.3.p.1">A small list of technologies is provided in the table below for the direct encoding of common technology types. The mapping of all virtual channel technologies into a single technology type value is for limiting the number of different communities in an UPDATE message. It is therefore a contribution to scalability.</p>
<div id="#rfc.table.2"></div>
<div id="#Table_3"></div>
<table cellpadding="3" cellspacing="0" class="tt full left">
<thead><tr>
<th class="left">Value</th>
<th class="left">Technology Type</th>
</tr></thead>
<tbody>
<tr>
<td class="left">0x00</td>
<td class="left">DiffServ enabled IP (DSCP encoding)</td>
</tr>
<tr>
<td class="left">0x01</td>
<td class="left">Ethernet using 802.1q priority tag</td>
</tr>
<tr>
<td class="left">0x02</td>
<td class="left">MPLS using E-LSP</td>
</tr>
<tr>
<td class="left">0x03</td>
<td class="left">Virtual Channel (VC) encoding using separate channels for QoS forwarding / one channel per class (e.g. ATM VCs, FR VCs, MPLS L-LSPs)</td>
</tr>
<tr>
<td class="left">0x04</td>
<td class="left">GMPLS &#8211; time slot encoding</td>
</tr>
<tr>
<td class="left">0x05</td>
<td class="left">GMPLS &#8211; lambda encoding</td>
</tr>
<tr>
<td class="left">0x06</td>
<td class="left">GMPLS &#8211; fibre encoding</td>
</tr>
</tbody>
</table>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> Community Usage</h1>
<p id="rfc.section.5.p.1">Providers MAY choose to process the QoS Marking communities and adopt the behaviour encoding and tunnel selection according to their local policy. Whether this MAY also lead to different IGP routing decisions or even effect BGP update filters is out of scope for the community definition.</p>
<p id="rfc.section.5.p.2">Only the IP prefix originating AS is allowed to signal the QoS Marking communities and Sets. AS providers, which make use of this signalling mechanism MUST make sure, that only one external Class Set will be advertised for the AS. All advertised prefixes, which originate from that AS will be sent with the same QoS Marking community Set in the respective UPDATE message. Transit ASes MUST NOT modify or extend the QoS Marking community Set except for the update of each 'QoS Marking A' field contained in the community Set and the respective "P, R, I, A" flags. Prefixes with associated identical QoS Marking community Sets are to be advertised together in common UPDATE messages in relaying nodes.</p>
<p><a href="#Figure_4">Figure 4</a> shows an AS interconnection example with different Class Sets. It shows the case in AS 5 where different Class Sets are used internally and externally. The proposed QoS Class Set signalling will always use the external definitions within the UPDATE message QoS Marking communities. The example also shows, that IP prefixes, which originate in AS 5 and AS 3 can be advertised together with the same QoS Marking community Set as long as their Layer 2 encoding is identical.</p>
<div id="#rfc.figure.4"></div>
<div id="#Figure_4"></div>
<pre>                   AS 5 = Transit AS      
+------------+     =================     +------------+
+   AS 1     +      AS internal:         +   AS 3     +
+ 4 classes  +         5 classes         + 3 classes  +
+   L2/L3    +         L2/L3             +   L2/L3    +
+(EF,2xAF,BE)+      AS external:         +(EF,AF1,BE)+
+         [] +         3 classes         +[]          +
+------------+         L3 (EF,AF1,BE)   +------------+
              \    +---------------+    /
               \   |       []      |   /
                \  |      /  \     |  /               
                 \ |  --()---()--  | /        
                  \| /   |    |  \ |/         
                   |[]   |    |  []|         
                  /| \   |    |  / |\         
                 / |  --()---()--  | \        
                /  |      \  /     |  \       
               /   |       []      |   \      
              /    +---------------+    \     
+------------+                           +------------+
+         [] +                           +[]          +
+   AS 2     +                           +   AS 4     +
+ 2 classes  +                           + 6 classes  +
+   L2/L3    +                           +  L1/L2/L3  +
+  (EF,BE)   +                           +(EF,4xAF,BE)+
+------------+                           +------------+
[] ... AS Border Router                 
() ... AS internal Router</pre>
<h1 id="rfc.section.5.1">
<a href="#rfc.section.5.1">5.1.</a> QoS Marking Example</h1>
<p id="rfc.section.5.1.p.1">See <a href="#appendix_a">Appendix Appendix A</a> for an example QoS Marking community Set.</p>
<h1 id="rfc.section.5.2">
<a href="#rfc.section.5.2">5.2.</a> AS Border Packet Forwarding</h1>
<p id="rfc.section.5.2.p.1">IP packet forwarding based on packet header QoS encoding might require remarking of packets in order to match AS internal policies and encodings of neighbouring ASes.</p>
<p id="rfc.section.5.2.p.2">Identical QoS class sets and encodings between neighbouring ASes do not require any remarking. Different encodings will be matched on the outgoing traffic.</p>
<p id="rfc.section.5.2.p.3">Outgoing traffic for a given IP prefix uses the 'QoS Marking A' information of the respective BGP UPDATE message QoS Marking community for adopted remarking of the forwarded packet.</p>
<p id="rfc.section.5.2.p.4">If the 'I' flag is set for a given encoding, the outgoing traffic remarking SHOULD still be applied despite of the signalled lack of QoS Class forwarding support. This is particularly important, if the preserve flag 'P' is signalled together with the 'I' flag.</p>
<h1 id="rfc.section.5.3">
<a href="#rfc.section.5.3">5.3.</a> IP Prefix Aggregation</h1>
<p id="rfc.section.5.3.p.1">Several IP prefixes of different IP prefix originating ASes MAY be aggregated to a shorter IP prefix in transit ASes. If the original Class Sets of the aggregated prefixes are identical, the aggregate will use the same Set. In all other cases, the resulting IP prefix aggregate is handled the same as if the transit AS were the originating AS for this aggregated prefix. The transit AS provider MAY care for AS internal mechanisms, which map the signalled aggregate QoS Class Set to the different original Class Sets in the internal forwarding path.</p>
<p id="rfc.section.5.3.p.2">In case of IP prefix aggregation with different QoS Class Sets, the 'Aggregation (A)' flag of each QoS Marking community within the Set MUST be set to '1'.</p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#Confidentiality" id="Confidentiality">Confidentiality Considerations</a>
</h1>
<p id="rfc.section.6.p.1">The disclosure of confidential AS intrinsic information is of no concern since the signalled marking for QoS class encodings can be adopted prior to the UPDATE advertisement of the IP prefix originating AS. This way, a distinction between internal and external QoS Class Sets can be achieved. AS internal cross-layer marking adaptation and policy based update filtering allows for consistent QoS class support despite made up QoS Class Set and encoding information within UPDATE advertisements. In case of such policy hiding strategy, the required AS internal ingress and egress adaptation SHALL be done transparently without explicit "Active Marking" and 'R' flag signalling.</p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#IANA" id="IANA">IANA Considerations</a>
</h1>
<p id="rfc.section.7.p.1">This document defines a new BGP Extended Community, which includes a "Technology Type" field. <a href="#tech_type">Section 4.3</a> enumerates a number of popular technologies. This list is expected to suffice for first implementations. However, future or currently uncovered technologies may arise, which will require an extended "Technology Type" enumeration list administered by IANA.</p>
<p id="rfc.section.7.p.2">A new extended community QoS Marking community is defined, which has been assigned a Type value of 0x04 for a transitive and 0x44 for a non-transitive usage.</p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#Security" id="Security">Security Considerations</a>
</h1>
<p id="rfc.section.8.p.1">This extension to BGP does not change the underlying security issues inherent in the existing BGP.</p>
<p id="rfc.section.8.p.2">Malicious signalling behaviour of QoS Marking community advertising ASes can result in misguided neighbours about non existing or maliciously encoded Class Sets. Removal of QoS Marking community Sets leads to the current best effort interconnection, which is no stringent security concern.</p>
<p id="rfc.section.8.p.3">The IP prefix originating AS MAY place a copy of its marking information into the Internet Routing Registry (IRR) for global reference.</p>
<p id="rfc.section.8.p.4">The strongest threat is the advertisement of numerous very fine grained Class Sets, which could limit the scalability of this approach.  However, neighbouring ASes are free to set the ignore flag of single communities or to stop processing the QoS Marking communities of a certain routing advertisement, once a self-set threshold has been crossed. By means of this self defence mechanism it should not be possible to crash neighbouring peers due to the excessive use of the new community.</p>
<h1 id="rfc.references">
<a href="#rfc.references">9.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">9.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="IANA_EC">[IANA_EC]</b></td>
<td class="top">
<a>IANA, </a>, "<a>Border Gateway Protocol (BGP) Data Collection Standard Communities</a>", June 2008.</td>
</tr>
<tr>
<td class="reference"><b id="RFC1997">[RFC1997]</b></td>
<td class="top">
<a href="mailto:rchandra@cisco.com" title="cisco Systems, Inc.">Chandrasekeran, R.</a>, <a href="mailto:pst@cisco.com" title="cisco Systems, Inc.">Traina, P.</a> and <a href="mailto:tli@skat.usc.edu">T. Li</a>, "<a href="http://tools.ietf.org/html/rfc1997">BGP Communities Attribute</a>", RFC 1997, August 1996.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3140">[RFC3140]</b></td>
<td class="top">
<a>Black, D.</a>, <a>Brim, S.</a>, <a>Carpenter, B.</a> and <a>F. Le Faucheur</a>, "<a href="http://tools.ietf.org/html/rfc3140">Per Hop Behavior Identification Codes</a>", RFC 3140, June 2001.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4271">[RFC4271]</b></td>
<td class="top">
<a>Rekhter, Y.</a>, <a>Li, T.</a> and <a>S. Hares</a>, "<a href="http://tools.ietf.org/html/rfc4271">A Border Gateway Protocol 4 (BGP-4)</a>", RFC 4271, January 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4360">[RFC4360]</b></td>
<td class="top">
<a>Sangli, S.</a>, <a>Tappan, D.</a> and <a>Y. Rekhter</a>, "<a href="http://tools.ietf.org/html/rfc4360">BGP Extended Communities Attribute</a>", RFC 4360, February 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5543">[RFC5543]</b></td>
<td class="top">
<a>Ould-Brahim, H.</a>, <a>Fedyk, D.</a> and <a>Y. Rekhter</a>, "<a href="http://tools.ietf.org/html/rfc5543">BGP Traffic Engineering Attribute</a>", RFC 5543, May 2009.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5575">[RFC5575]</b></td>
<td class="top">
<a>Marques, P.</a>, <a>Sheth, N.</a>, <a>Raszuk, R.</a>, <a>Greene, B.</a>, <a>Mauch, J.</a> and <a>D. McPherson</a>, "<a href="http://tools.ietf.org/html/rfc5575">Dissemination of Flow Specification Rules</a>", RFC 5575, August 2009.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">9.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="I-D.boucadair-qos-bgp-spec">[I-D.boucadair-qos-bgp-spec]</b></td>
<td class="top">
<a>Boucadair, M</a>, "<a href="http://tools.ietf.org/html/draft-boucadair-qos-bgp-spec-01">QoS-Enhanced Border Gateway Protocol</a>", Internet-Draft draft-boucadair-qos-bgp-spec-01, July 2005.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.jacquenet-bgp-qos">[I-D.jacquenet-bgp-qos]</b></td>
<td class="top">
<a>Cristallo, G</a>, "<a href="http://tools.ietf.org/html/draft-jacquenet-bgp-qos-00">The BGP QOS_NLRI Attribute</a>", Internet-Draft draft-jacquenet-bgp-qos-00, February 2004.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.liang-bgp-qos">[I-D.liang-bgp-qos]</b></td>
<td class="top">
<a>Benmohamed, L</a>, "<a href="http://tools.ietf.org/html/draft-liang-bgp-qos-00">QoS Enhancements to BGP in Support of Multiple Classes of Service</a>", Internet-Draft draft-liang-bgp-qos-00, June 2006.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.zhang-idr-bgp-extcommunity-qos">[I-D.zhang-idr-bgp-extcommunity-qos]</b></td>
<td class="top">
<a>Zhang, Z</a>, "<a href="http://tools.ietf.org/html/draft-zhang-idr-bgp-extcommunity-qos-00">ExtCommunity map and carry TOS value of IP header</a>", Internet-Draft draft-zhang-idr-bgp-extcommunity-qos-00, November 2005.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.knoll-idr-cos-interconnect">[I-D.knoll-idr-cos-interconnect]</b></td>
<td class="top">
<a>Knoll, T</a>, "<a href="http://tools.ietf.org/html/draft-knoll-idr-cos-interconnect-07">BGP Class of Service Interconnection</a>", Internet-Draft draft-knoll-idr-cos-interconnect-07, November 2011.</td>
</tr>
<tr>
<td class="reference"><b id="MIT_CFP">[MIT_CFP]</b></td>
<td class="top">
<a>Amante, S.</a>, <a>Bitar, N.</a>, <a title="N.">Bjorkman, N.</a>, <a>others</a>, "<a>Inter-provider Quality of Service - White paper draft 1.1</a>", November 2006.</td>
</tr>
</tbody></table>
<h1 id="rfc.appendix.Appendix A">
<a href="#rfc.appendix.Appendix%20A">Appendix A.</a> <a href="#appendix_a" id="appendix_a">QoS Marking Example</a>
</h1>
<p id="rfc.section.Appendix A.p.1">The example AS is advertising several IP prefixes, which experience equal QoS treatment from AS internal networks. The IP packet forwarding policy within this originating AS defines e.g. 3 traffic classes for IP traffic (DSCP1, DSCP2 and DSCP3). These three classes are also consistently taken care of within a TC bit supporting MPLS tunnel forwarding. The BGP UPDATE message for the announced IP prefixes will contain the following QoS Marking community Set together with the IP prefix NLRI.</p>
<div id="#rfc.figure.5"></div>
<div id="#Figure_5"></div>
<pre> 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0 0 1 0 0 0 0 0|0 0 0 0 0 0 0 0|0 0 0 0 0 0 0 0|1 0 1 1 1 0 0 0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0 0 0 0 0 0 0 0|0 0 1 0 1 1 1 0|0 0 0 0 0 0 0 0|  
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0 0 1 0 0 0 0 0|0 0 0 0 0 0 0 0|0 0 0 0 0 0 1 0|0 0 0 0 0 0 0 0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0 0 0 0 0 1 0 1|0 0 0 0 0 1 0 1|0 0 0 0 0 0 0 0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0 0 1 0 0 0 0 0|0 0 0 0 0 0 0 1|0 0 0 0 0 0 0 0|0 0 1 0 1 0 0 0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0 0 0 0 0 0 1 0|0 0 0 0 1 0 1 0|0 0 0 0 0 0 0 0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0 0 1 0 0 0 0 0|0 0 0 0 0 0 0 1|0 0 0 0 0 0 1 0|0 0 0 0 0 0 0 0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0 0 0 0 0 0 0 1|0 0 0 0 0 0 0 1|0 0 0 0 0 0 0 0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0 0 1 0 0 0 0 0|0 0 0 0 0 0 1 0|0 0 0 0 0 0 0 0|0 1 0 0 1 0 0 0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0 0 0 0 0 0 1 0|0 0 0 1 0 0 1 0|0 0 0 0 0 0 0 0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0 0 1 0 0 0 0 0|0 0 0 0 0 0 1 0|0 0 0 0 0 0 1 0|0 0 0 0 0 0 0 0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|0 0 0 0 0 0 1 0|0 0 0 0 0 0 1 0|0 0 0 0 0 0 0 0|
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

The class set as well as the example encodings are arbitrarily chosen.
</pre>
<h1 id="rfc.authors"><a href="#rfc.authors">Author's Address</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Thomas Martin Knoll</span> 
	  <span class="n hidden">
		<span class="family-name">Knoll</span>
	  </span>
	</span>
	<span class="org vcardline">Chemnitz University of Technology</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:knoll@etit.tu-chemnitz.de">knoll@etit.tu-chemnitz.de</a></span>

  </address>
</div>

</body>
</html>