



Network Working Group                                            J. Dong
Internet-Draft                                                     Z. Li
Intended status: Standards Track                     Huawei Technologies
Expires: January 13, 2022                                         C. Xie
                                                                   C. Ma
                                                           China Telecom
                                                               G. Mishra
                                                            Verizon Inc.
                                                           July 12, 2021


 Carrying Virtual Transport Network Identifier in IPv6 Extension Header
                 draft-dong-6man-enhanced-vpn-vtn-id-04

Abstract

   A Virtual Transport Network (VTN) is a virtual network which has a
   customized network topology and a set of dedicated or shared network
   resources allocated from the physical network.  A VTN can be used as
   the underlay for one or a group of overlay VPNs to provide enhanced
   VPN (VPN+) services.  In packet forwarding, some fields in the data
   packet needs to be used to identify the VTN the packet belongs to, so
   that the VTN-specific processing can be performed on each node the
   packet traverses.

   This document proposes a new Hop-by-Hop option of IPv6 extension
   header to carry the VTN ID, which can be used to identify the Virtual
   Transport Network (VTN) the packet belongs to.  The procedure for
   processing the VTN option is also specified.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on January 13, 2022.





Dong, et al.            Expires January 13, 2022                [Page 1]

Internet-Draft               IPv6 VTN Option                   July 2021


Copyright Notice

   Copyright (c) 2021 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
     1.1.  Requirements Language . . . . . . . . . . . . . . . . . .   3
   2.  New IPv6 Extension Header Option for VTN  . . . . . . . . . .   3
   3.  Procedures  . . . . . . . . . . . . . . . . . . . . . . . . .   4
     3.1.  VTN Option Insertion  . . . . . . . . . . . . . . . . . .   4
     3.2.  VTN based Packet Forwarding . . . . . . . . . . . . . . .   5
   4.  Operational Considerations  . . . . . . . . . . . . . . . . .   5
   5.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   6
   6.  Security Considerations . . . . . . . . . . . . . . . . . . .   6
   7.  Contributors  . . . . . . . . . . . . . . . . . . . . . . . .   6
   8.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   6
   9.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   6
     9.1.  Normative References  . . . . . . . . . . . . . . . . . .   6
     9.2.  Informative References  . . . . . . . . . . . . . . . . .   7
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   7

1.  Introduction

   Virtual Private Networks (VPNs) provide different customers with
   logically isolated connectivity over a common network infrastructure.
   With the introduction and evolvement of 5G, some existing or new
   services may require connectivity services with advanced
   characteristics comparing to traditional VPNs, such as resource
   isolation from other services or guaranteed performance.  These
   services are refered to as "enhanced VPNs" (VPN+).
   [I-D.ietf-teas-enhanced-vpn] describes a framework and the candidate
   component technologies for providing VPN+ services.

   The enhanced properties of VPN+ require tighter coordination and
   integration between the underlay and the overlay network.  VPN+
   service can be delivered using a Virtual Transport Network (VTN) as



Dong, et al.            Expires January 13, 2022                [Page 2]

Internet-Draft               IPv6 VTN Option                   July 2021


   the underlay, which has a customized network topology and a set of
   dedicated or shared network resources allocated from the physical
   network.  The overlay VPN together with the corresponding VTN in the
   underlay constitute the VPN+ service.  In the network, traffic of
   different VPN+ services need to be processed separately based on the
   topology and the network resources associated with the corresponding
   VTN.

   [I-D.dong-teas-enhanced-vpn-vtn-scalability] describes the
   scalability considerations and the possible optimizations for
   providing a relatively large number of VTNs for VPN+ services, one
   approach to improve the data plane scalability is by introducing a
   dedicated VTN Identifier (VTN ID) in the data packet to identify the
   VTN the packet belongs to, so that VTN-specific packet processing can
   be performed on each node the packet traverses.  This is called
   Resource Independent (RI) VTN.

   This document proposes a mechanism to carry the VTN ID in a new Hop-
   by-Hop option of IPv6 extension header [RFC8200] of IPv6 packet, so
   that on each network node along the packet forwarding path, the VTN
   option in the packet is parsed, and the obtained VTN-ID instructs the
   network node to use the network resources allocated to the
   corresponding VTN to process and forward the packet.  The procedure
   for processing the VTN ID is also specified.  This provides a
   scalable solution to support a relatively large number of VTNs in an
   IPv6 network.

1.1.  Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in
   BCP14 RFC 2119 [RFC2119] RFC 8174 [RFC8174] when, and only when, they
   appear in all capitals, as shown here.

2.  New IPv6 Extension Header Option for VTN

   A new Hop-by-Hop option type "VTN" is defined to carry the Virtual
   Transport Network Identifier (VTN ID) in an IPv6 packet.  Its format
   is shown as below:

                         Option   Option       Option
                          Type   Data Len       Data
                       +--------+--------+------------------+
                       |BBCTTTTT|00000100|   4-octet VTN ID |
                       +--------+--------+------------------+
                        Figure 1. The format of VTN Option




Dong, et al.            Expires January 13, 2022                [Page 3]

Internet-Draft               IPv6 VTN Option                   July 2021


   Option Type: 8-bit identifier of the type of option.  The type of VTN
   option is to be assigned by IANA.  The highest-order bits of the type
   field are defined as below:

   o  BB 00 The highest-order 2 bits are set to 00 to indicate that a
      node which does not recognize this type will skip over it and
      continue processing the header.

   o  C 0 The third highest-order bit are set to 0 to indicate this
      option does not change en route.

   Opt Data Len: 8-bit unsigned integer indicates the length of the
   option Data field of this option, in octets.  The value of Opt Data
   Len of VTN option SHOULD be set to 4.

   VTN-ID: 4-octet identifier which uniquely identifies a VTN.

   Editor's note: The length of the VTN ID is defined as 4-octet in
   correspondence to the 4-octet Single Network Slice Selection
   Assistance Information (S-NSSAI) defined in 3GPP [TS23501].

                          8-bit              24-bit
                     +------------+-------------------------+
                     |    SST     |   Slice Differentiator  |
                     +------------+-------------------------+
                         Figure 2. The format of S-NSSAI

3.  Procedures

   As the VTN option needs to be processed by each node along the path
   for VTN-specific forwarding, it SHOULD be carried in IPv6 Hop-by-Hop
   options header when the Hop-by-Hop options header can be either
   processed or ignored in forwarding plane by all the nodes along the
   path.

3.1.  VTN Option Insertion

   When an ingress node of an IPv6 domain receives a packet, according
   to the traffic classification or mapping policy, the packet is
   steered into one of the VTNs in the network, then the packet SHOULD
   be encapsulated in an outer IPv6 header, and the identifier of the
   VTN which the packet is mapped to SHOULD be carried in the VTN option
   of the Hop-by-Hop options header associated with the outer IPv6
   header.







Dong, et al.            Expires January 13, 2022                [Page 4]

Internet-Draft               IPv6 VTN Option                   July 2021


3.2.  VTN based Packet Forwarding

   On receipt of a packet with the VTN option, each network node which
   can process the VTN option in fast path SHOULD use the VTN-ID to
   identify the VTN the packet belongs to, so that the set of local
   network resources allocated to the VTN could be determined.  The
   packet forwarding behavior is based on both the destination IP
   address and the VTN-ID.  More specifically, the destination IP
   address is used to determine the next-hop and the outgoing interface,
   and VTN-ID is used to determine the set of network resources reserved
   for processing and sending the packet on the outgoing interface.  The
   Traffic Class field of the outer IPv6 header MAY be used to provide
   Diffserv treatment for packets which belong to the same VTN.  The
   egress node of the IPv6 domain SHOULD decapsulate the outer IPv6
   header which includes the VTN option.

   In the forwarding plane, there can be different instantiations of
   local network resources allocated to the VTNs.  For example, on one
   interface, a subset of forwarding plane resources (e.g. the bandwidth
   and the associated buffer and queuing resources) allocated to a
   particular VTN can be represented as a virtual sub-interface with
   dedicated bandwidth resources.  In packet forwarding, the IPv6
   destination address of the received packet is used to identify the
   next-hop and the outgoing interface, and the VTN-ID is used to
   further identify the virtual sub-interface which is associated with
   the VTN on the outgoing interface.

   Routers which do not support the processing of Hop-by-Hop options
   header SHOULD ignore the Hop-by-Hop options header and forward the
   packet only based on the destination IP address.  Routers which
   support Hop-by-Hop Options header, but do not support the VTN option
   SHOULD ignore the VTN-ID option and continue to forward the packet
   based on the destination IP address and MAY also based on the rest of
   the Hop-by-Hop Options.

4.  Operational Considerations

   As described in [RFC8200], nodes may be configured to ignore the Hop-
   by-Hop Options header, and in some implementations a packet
   containing a Hop-by-Hop Options header may be dropped or assigned to
   a slow processing path.  The proposed modification to the processing
   of IPv6 Hop-by-Hop options header is specified in
   [I-D.hinden-6man-hbh-processing].  Operator needs to make sure that
   all the network nodes involved in a VTN can either process Hop-by-Hop
   Options header in the fast path, or ignore the Hop-by-Hop Option
   header.  In other word, packets steered into a VTN MUST NOT be
   dropped due to the existence of the Hop-by-Hop Options header.  It is
   RECOMMENDED to configure all the nodes involved in a VTN to process



Dong, et al.            Expires January 13, 2022                [Page 5]

Internet-Draft               IPv6 VTN Option                   July 2021


   the Hop-by-Hop Options header and the VTN option if there is a nob
   for this.

5.  IANA Considerations

   This document requests IANA to assign a new option type from
   "Destination Options and Hop-by-Hop Options" registry.

      Value   Description     Reference
      --------------------------------------
      TBD     VTN Option      this document

6.  Security Considerations

   The security considerations with IPv6 Hop-by-Hop options header are
   described in [RFC8200], [RFC7045] and
   [I-D.hinden-6man-hbh-processing].  This document introduces a new
   IPv6 Hop-by-Hop option which is either processed in the fast path or
   ignored by network nodes, thus it does not introduce additional
   security issues.

7.  Contributors

      Zhibo Hu
      Email: huzhibo@huawei.com

      Lei Bao
      Email: baolei7@huawei.com

8.  Acknowledgements

   The authors would like to thank Juhua Xu and James Guichard for their
   review and valuable comments.

9.  References

9.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC
              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,
              May 2017, <https://www.rfc-editor.org/info/rfc8174>.





Dong, et al.            Expires January 13, 2022                [Page 6]

Internet-Draft               IPv6 VTN Option                   July 2021


   [RFC8200]  Deering, S. and R. Hinden, "Internet Protocol, Version 6
              (IPv6) Specification", STD 86, RFC 8200,
              DOI 10.17487/RFC8200, July 2017,
              <https://www.rfc-editor.org/info/rfc8200>.

9.2.  Informative References

   [I-D.dong-teas-enhanced-vpn-vtn-scalability]
              Dong, J., Li, Z., Qin, F., Yang, G., and J. N. Guichard,
              "Scalability Considerations for Enhanced VPN (VPN+)",
              draft-dong-teas-enhanced-vpn-vtn-scalability-02 (work in
              progress), February 2021.

   [I-D.hinden-6man-hbh-processing]
              Hinden, R. M. and G. Fairhurst, "IPv6 Hop-by-Hop Options
              Processing Procedures", draft-hinden-6man-hbh-
              processing-00 (work in progress), December 2020.

   [I-D.ietf-teas-enhanced-vpn]
              Dong, J., Bryant, S., Li, Z., Miyasaka, T., and Y. Lee, "A
              Framework for Enhanced Virtual Private Network (VPN+)
              Services", draft-ietf-teas-enhanced-vpn-07 (work in
              progress), February 2021.

   [RFC7045]  Carpenter, B. and S. Jiang, "Transmission and Processing
              of IPv6 Extension Headers", RFC 7045,
              DOI 10.17487/RFC7045, December 2013,
              <https://www.rfc-editor.org/info/rfc7045>.

   [TS23501]  "3GPP TS23.501", 2016,
              <https://portal.3gpp.org/desktopmodules/Specifications/
              SpecificationDetails.aspx?specificationId=3144>.

Authors' Addresses

   Jie Dong
   Huawei Technologies
   Huawei Campus, No. 156 Beiqing Road
   Beijing  100095
   China

   Email: jie.dong@huawei.com









Dong, et al.            Expires January 13, 2022                [Page 7]

Internet-Draft               IPv6 VTN Option                   July 2021


   Zhenbin Li
   Huawei Technologies
   Huawei Campus, No. 156 Beiqing Road
   Beijing  100095
   China

   Email: lizhenbin@huawei.com


   Chongfeng Xie
   China Telecom
   China Telecom Beijing Information Science & Technology, Beiqijia
   Beijing  102209
   China

   Email: xiechf@chinatelecom.cn


   Chenhao Ma
   China Telecom
   China Telecom Beijing Information Science & Technology, Beiqijia
   Beijing  102209
   China

   Email: machh@chinatelecom.cn


   Gyan Mishra
   Verizon Inc.

   Email: gyan.s.mishra@verizon.com




















Dong, et al.            Expires January 13, 2022                [Page 8]
