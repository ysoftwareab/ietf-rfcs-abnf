SIPPING Working Group                                       G. Camarillo
Internet-Draft                                                 G. Blanco
Expires: December 2, 2006                                       Ericsson
                                                            May 31, 2006


   The Session Initiation Protocol (SIP) P-Profile-Key Private Header
                               (P-Header)
               draft-camarillo-sipping-profile-key-00.txt

Status of this Memo

   By submitting this Internet-Draft, each author represents that any
   applicable patent or other IPR claims of which he or she is aware
   have been or will be disclosed, and any of which he or she becomes
   aware will be disclosed, in accordance with Section 6 of BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on December 2, 2006.

Copyright Notice

   Copyright (C) The Internet Society (2006).

Abstract

   This document specifies the SIP P-Profile-Key P-header.  This header
   field is used in the 3rd-Generation Partnership Project (3GPP) IMS
   (IP Multimedia Subsystem) to provide SIP registrars and SIP proxy
   servers with the key of the profile corresponding to the destination
   SIP URI of a particular SIP request.





Camarillo & Blanco      Expires December 2, 2006                [Page 1]


Internet-Draft           P-Profile-Key P-Header                 May 2006


1.  Introduction

   The 3rd-Generation Partnership Project (3GPP) IMS (IP Multimedia
   Subsystem) uses SIP [3] as its main signalling protocol.  (For more
   information on the IMS, a detailed description can be found in 3GPP
   TS 23.228 [5] and 3GPP TS 24.229 [6]). 3GPP has identified a set of
   requirements that can be met, according to the procedures in RFC 3427
   [4], by defining a new SIP P-header.

   The remainder of this document is organized as follows.  Section 2
   describes the scenario considered by 3GPP and Section 3 discusses the
   requirements derived from this scenario.  Section 4 defines the
   P-Profile-Key header field, which meets those requirements, and
   Section 5 discusses the applicability and scope of this new header
   field.  Section 6 registers the P-Profile-Key header field with the
   IANA and Section 7 discusses the security properties of the
   environment where this header field is intended to be used.


2.  Scenario

   In the 3GPP IMS, there are scenarios where a set of proxies handling
   a request need to consult the same user database, as described in
   [7].  Those proxies typically use the destination SIP URI of the
   request as the key for their database queries.  Nevertheless, when a
   proxy handles a Wildcarded Public Service Identity, the key to be
   used in its database query is not the destination SIP URI of the
   request, but a regular expression instead.

   Public Service Identities are SIP URIs that refer to services instead
   of users.  That is, they address a specific application in an
   Application Server.  Wildcarded Public Service Identities are a set
   of Public Service Identities that match a regular expression and
   share the same profile.  For example, the Public Service Identities
   'sip:chatroom-12@example.com' and 'sip:chatroom-657@example.com'
   would match the Wildcarded Public Service Identity 'sip:chatroom-
   !.*!@example.com'.  For a description of Wildcarded Public Service
   Identities, see 3GPP TS 23.003 [1].

   When a proxy queries the user database for a Public Service Identity
   for which there is no profile in the user database, the user database
   needs to find its matching Wildcarded Public Service Identity.  The
   process of finding a matching a Wildcarded Public Service Identity
   can be computationally expensive, time consuming, or both.

   When two proxies query the user database for the same Public Service
   Identity, which matches a Wildcarded Public User Identity, the user
   database needs to perform the matching process twice.  Having to



Camarillo & Blanco      Expires December 2, 2006                [Page 2]


Internet-Draft           P-Profile-Key P-Header                 May 2006


   perform that process twice can be avoided by having the first proxy
   obtain the Wildcarded Public User Identity from the user database and
   transfer it, piggy-backed in the SIP message, to the second proxy.
   This way, the second proxy can query the user database using the
   Wildcarded Public User Identity directly.

   An alternative, but undesirable, solution would consist of having the
   user database store every Public Service Identity and its matching
   Wildcarded Public Service Identity.  The scalability and
   manageability properties of this approach are considerably worse than
   those of the approach described earlier.


3.  Requirements

   This section lists the requirements derived from the previous
   scenario:

   1.  It is necessary to optimize the response time for session
       establishment in the 3GPP IMS.
   2.  It is necessary to avoid storing individual Public Service
       Identities matching a Wildcarded Public Service Identity in the
       user database.


4.  P-Profile-Key header field definition

   This document defines the SIP P-Profile-Key P-header.  The P-Profile-
   Key P-header contains the key to be used by a proxy to query the user
   database for a given profile.

   The augmented Backus-Naur Form (BNF) [2] syntax of the P-Profile-Key
   header field is the following:


      P-Profile-Key     = "P-Profile-Key" HCOLON (name-addr / addr-spec)
                           *( SEMI generic-param )

   The format of HCOLON, name-addr, addr-spec, and generic-param are
   defined in RFC 3261 [3].  The format of Wildcarded Public Service
   Identities is defined in 3GPP TS 23.003 [1].

   The following is an example of a P-Profile-Key header field that
   contains a Wildcarded Public Service Identity:

      P-Profile-Key: <chatroom-!.*!@example.com>





Camarillo & Blanco      Expires December 2, 2006                [Page 3]


Internet-Draft           P-Profile-Key P-Header                 May 2006


5.  Applicability

   According to RFC 3427 [4], P-headers have a limited applicability.
   Specifications of P-headers such as this RFC need to clearly document
   the useful scope of the proposal, and explain its limitations and why
   it is not suitable for the general use of SIP on the Internet.

   The P-Profile-Key header field is intended to be used in 3GPP IMS
   networks.  This header field carries the key of a service profile,
   that is stored in a user database referred to as HSS, between two
   proxies, which are referred to as I-CSCF and S-CSCF.  The I-CSCF and
   the S-CSCF belong to the same administrative domain and share a
   common frame of reference to the user database.  The I-CSCF inserts
   the P-Profile-Key header field into a SIP request and the S-CSCF
   removes it before routing the request further.  (For a description of
   how an I-CSCF and an S-CSCF query the same user database for a single
   request, see [7].)

   When SIP is used on the Internet, there are typically no proxies
   querying a user database between the UA sending an INVITE request and
   the registrar.  Consequently, the P-Profile-Key header field does not
   seem useful in a general Internet environment.


6.  IANA Considerations

   This document defines a new SIP header field: P-Profile-Key.  This
   header field needs to be registered by the IANA ni the SIP Parameters
   registry under the Header Fields subregistry.


7.  Security Considerations

   The P-Profile-Key defined in this document is to be used in an
   environment where elements are trusted and where attackers are not
   supposed to have access to the protocol messages between those
   elements.  Traffic protection between network elements is sometimes
   achieved by using IPsec and sometimes by physically protecting the
   network.  In any case, the environment where the P-Profile-Key header
   field will be used ensures the integrity and the confidentiality of
   the contents of this header field.


8.  Acknowledgements

   Alf Heidermark and Timo Forsman provided input to this document.





Camarillo & Blanco      Expires December 2, 2006                [Page 4]


Internet-Draft           P-Profile-Key P-Header                 May 2006


9.  References

9.1.  Normative References

   [1]  3GPP, "Numbering, addressing and identification", 3GPP TS 23.003
        3.14.0, January 2004.

   [2]  Crocker, D., Ed. and P. Overell, "Augmented BNF for Syntax
        Specifications: ABNF", RFC 2234, November 1997.

   [3]  Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A.,
        Peterson, J., Sparks, R., Handley, M., and E. Schooler, "SIP:
        Session Initiation Protocol", RFC 3261, June 2002.

   [4]  Mankin, A., Bradner, S., Mahy, R., Willis, D., Ott, J., and B.
        Rosen, "Change Process for the Session Initiation Protocol
        (SIP)", BCP 67, RFC 3427, December 2002.

9.2.  Informative References

   [5]  3GPP, "IP Multimedia Subsystem (IMS); Stage 2", 3GPP TS 23.228
        5.14.0, October 2005.

   [6]  3GPP, "Internet Protocol (IP) multimedia call control protocol
        based on Session Initiation Protocol (SIP) and Session
        Description Protocol (SDP); Stage 3", 3GPP TS 24.229 5.16.0,
        March 2006.

   [7]  Camarillo, G. and G. Blanco, "The Session Initiation Protocol
        (SIP) P-User-Database Private-Header (P-Header)", RFC 4457,
        April 2006.




















Camarillo & Blanco      Expires December 2, 2006                [Page 5]


Internet-Draft           P-Profile-Key P-Header                 May 2006


Authors' Addresses

   Gonzalo Camarillo
   Ericsson
   Hirsalantie 11
   Jorvas  02420
   Finland

   Email: Gonzalo.Camarillo@ericsson.com


   German Blanco
   Ericsson
   Via de los Poblados 13
   Madrid  28033
   Spain

   Email: German.Blanco@ericsson.com

































Camarillo & Blanco      Expires December 2, 2006                [Page 6]


Internet-Draft           P-Profile-Key P-Header                 May 2006


Intellectual Property Statement

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in BCP 78 and BCP 79.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   http://www.ietf.org/ipr.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.


Disclaimer of Validity

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET
   ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Copyright Statement

   Copyright (C) The Internet Society (2006).  This document is subject
   to the rights, licenses and restrictions contained in BCP 78, and
   except as set forth therein, the authors retain all their rights.


Acknowledgment

   Funding for the RFC Editor function is currently provided by the
   Internet Society.




Camarillo & Blanco      Expires December 2, 2006                [Page 7]


