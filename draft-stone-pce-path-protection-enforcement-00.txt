



Network Working Group                                           A. Stone
Internet-Draft                                               M. Aissaoui
Intended status: Standards Track                                   Nokia
Expires: April 27, 2020                                 October 25, 2019


                  Path Protection Enforcement in PCEP
             draft-stone-pce-path-protection-enforcement-00

Abstract

   This document aims to clarify existing usage of the local protection
   desired bit signalled in Path Computation Element Protocol (PCEP).
   This document also introduces a new flag for signalling protection
   strictness in PCEP.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on April 27, 2020.

Copyright Notice

   Copyright (c) 2019 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.




Stone & Aissaoui         Expires April 27, 2020                 [Page 1]

Internet-Draft                     I-D                      October 2019


Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
     1.1.  Requirements Language . . . . . . . . . . . . . . . . . .   3
     1.2.  Terminology . . . . . . . . . . . . . . . . . . . . . . .   3
   2.  Protection Enforcement Flag (E-Flag)  . . . . . . . . . . . .   4
   3.  Security Considerations . . . . . . . . . . . . . . . . . . .   5
   4.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   6
     4.1.  LSP Attributes Protection Enforcement Flag  . . . . . . .   6
   5.  Normative References  . . . . . . . . . . . . . . . . . . . .   6
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   7

1.  Introduction

   Path Computation Element (PCE) Communication Protocol (PCEP)
   [RFC5440] enables the communication between a Path Computation Client
   (PCC) and a Path Control Element (PCE), or between two PCEs based on
   the PCE architecture [RFC4655] .

   PCEP [RFC5440] utilizes flags, values and concepts previously defined
   in RSVP-TE Extensions [RFC3209] and Fast Reroute Extensions to RSVP-
   TE [RFC4090] . One such concept in PCEP is the "Local Protection
   Desired" (L-flag in the LSPA Object in RFC5440), which was originally
   defined in the SESSION-ATTRIBUTE Object in RFC3209.  In RSVP, this
   flag signals to downstream routers that local protection is desired,
   which indicates to transit routers that they may use a local repair
   mechanism.  The headend router calculating the path does not know
   whether a downstream router will or will not protect a hop during
   it's calculation.  Therefore, a local protection desired does not
   require the transit router to satisfy protection in order to
   establish the RSVP signalled path.  This flag is signalled in PCEP as
   an attribute of the LSP via the LSP Attributes object.

   PCEP Extensions for Segment Routing (draft-ietf-pce-segment-routing)
   extends support in PCEP for Segment Routed LSPs (SR-LSPs) as defined
   in the Segment Routing Architecture [RFC8402] . As per the Segment
   Routing Architecture, Adjacency Segment Identifiers(Adj-SID) may be
   eligible for protection (using IPFRR or MPLS-FRR).  The protection
   eligibility is advertised into IGP (draft-ietf-ospf-segment-routing-
   extensions and draft-ietf-isis-segment-routing-extensions) as the
   B-Flag part of the Adjacency SID sub-tlv and can be discovered by a
   PCE via BGP-LS [RFC7752] using the BGP-LS Segment Routing Extensions
   (draft-ietf-idr-bgp-ls-segment-routing-ext).  An Adjacency SID may or
   may not have protection eligibility and for a given adjacency between
   two routers there may be multiple Adjacency SIDs, some of which are
   protected and some which are not.





Stone & Aissaoui         Expires April 27, 2020                 [Page 2]

Internet-Draft                     I-D                      October 2019


   A Segment Routed path calculated by PCE may contain various types of
   segments, as defined in [RFC8402] such as Adjacency, Node or Binding.
   The protection eligibility for Adjacency SIDs can be discovered by
   PCE, so therefore the PCE can take the protection eligibility into
   consideration as a path constraint.  If a path is calculated to
   include other segment identifiers which are not applicable to having
   their protection state advertised, as they may only be locally
   significant for each router processing the SID such as Node SIDs, it
   may not be possible for PCE to include the protection constraint as
   part of the path calculation.

   It is desirable for an operator to define the enforcement, or
   strictness of the protection requirement when it can be applied.

   As defined in [RFC5440] the mechanism to signal protection
   enforcement in PCEP is with the previously mentioned L-flag defined
   in the LSPA Object.  The name of the flag uses the term "Desired",
   which by definition means "strongly wished for or intended" and is
   rooted in the RSVP use case.  For RSVP, this is not within control of
   the PCE.  However, [RFC5440] does state "When set, this means that
   the computed path must include links protected with Fast Reroute as
   defined in [RFC4090]."  Implementations of [RFC5440] have either
   interpreted the L-Flag as PROTECTION MANDATORY or PROTECTION
   PREFERRED, leading to operational differences.  The boolean bit flag
   is unable to distinguish between the the different options of
   PROTECTION MANDATORY, UNPROTECTED MANDATORY, PROTECTION PREFERRED and
   UNPROTECTED PREFERRED.

1.1.  Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC2119].

1.2.  Terminology

   This document uses the following terminology:

   PROTECTION MANDATORY: path MUST have protection eligibility on all
   links.

   UNPROTECTED MANDATORY: path MUST NOT have protection eligibility on
   all links.

   PROTECTION PREFERRED: path SHOULD have protection eligibility on all
   links but MAY contain links which do not have protection eligibility.





Stone & Aissaoui         Expires April 27, 2020                 [Page 3]

Internet-Draft                     I-D                      October 2019


   UNPROTECTED PREFERRED: path SHOULD NOT have protection eligibility on
   all links but MAY contain links which have protection eligibility.

   PCC: Path Computation Client.  Any client application requesting a
   path computation to be performed by a Path Computation Element.

   PCE: Path Computation Element.  An entity (component, application, or
   network node) that is capable of computing a network path or route
   based on a network graph and applying computational constraints.

   PCEP: Path Computation Element Protocol.

2.  Protection Enforcement Flag (E-Flag)

   Section 7.11 in Path Computation Element Protocol [RFC5440] describes
   the encoding of the Local Protection Desired (L-Flag).  A new flag is
   proposed in this document in the LSP Attributes Object which extends
   the L-Flag to identify the protection enforcement.

   The flag bit is to be allocated by IANA following IETF Consensus.

   This draft version proposes using bit 6.

   Codespace of the Flag field (LSPA Object)

        Bit      Description                      Reference

         7    Local Protection Desired             RFC5440

         6    Local Protection Enforcement      This document

   The format of the LSPA Object as defined in [RFC5440] is:

   0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                       Exclude-any                             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                       Include-any                             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                       Include-all                             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |  Setup Prio   |  Holding Prio |     Flags |E|L|   Reserved    |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                                                               |
      //                     Optional TLVs                           //
      |                                                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+



Stone & Aissaoui         Expires April 27, 2020                 [Page 4]

Internet-Draft                     I-D                      October 2019


   Flags (8 bits)

   o  L flag: As defined in [RFC5440] and further updated by this
      document.  When set, protection is desired.  When not set,
      protection is not desired.  The enforcement of the protection is
      identified via the E-Flag.

   o  E flag (Protection Enforcement): When set, the value of the L-Flag
      MUST be treated as a MUST constraint where applicable, when
      protection state of a SID is known.  When E flag is not set, the
      value of the L-Flag MUST be treated as a MAY constraint.

   When L-flag is set and E-flag is set then PCE MUST consider the
   protection eligibility as PROTECTION MANDATORY constraint.

   When L-flag is set and E-flag is not set then PCE MUST consider the
   protection eligibility as PROTECTION PREFERRED constraint.

   When L-flag is not set and E-flag is not set then PCE SHOULD consider
   the protection eligibility as UNPROTECTED PREFERRED but MAY consider
   protection eligibility as UNPROTECTED MANDATORY constraint.

   When L-flag is not set and E-flag is set then PCE MUST consider the
   protection eligibility as UNPROTECTED MANDATORY constraint.

   For a PCC which does not yet support this draft, the E-flag bit is
   always set to zero as per [RFC5440] . Therefore, a PCE communicating
   with a PCC which does not support this draft would treat the L-Flag
   set as being PROTECTION PREFERRED.

   The protection constraint can only be applied to resource selection
   in which the protection state is known to PCE.  A PCE calculating a
   path that includes resources which does not support the protection
   state being known to PCE (such as Node SID), then the protection
   state MAY ignore the protection enforcement constraint.

   UNPROTECTED PREFERRED and PROTECTED PREFERRED may seem similar but
   they indicate the preference of selection if PCE has an option of
   either protected or unprotected available for a link.  When presented
   with either option, PCE SHOULD select the SID which has a protection
   state matching the state of the L-Flag.

3.  Security Considerations

   This document clarifies the behaviour of an existing flag and
   introduces a new flag to provide further control of that existing
   behaviour.  The introduction of this new flag and behaviour




Stone & Aissaoui         Expires April 27, 2020                 [Page 5]

Internet-Draft                     I-D                      October 2019


   clarification does not create any new sensitive information.  No
   additional security measure is required.

   Securing the PCEP session using Transport Layer Security (TLS)
   [RFC8253] , as per the recommendations and best current practices in
   [RFC7525], is RECOMMENDED.

4.  IANA Considerations

4.1.  LSP Attributes Protection Enforcement Flag

   This document defines a new LSP Attribute Flag; IANA is requested to
   make the following bit allocation from the "LSPA Object" sub registry
   of the PCEP Numbers registry, as follows:

   Value    Name                         Reference

        6     PROTECTION-ENFORCEMENT      This document

5.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC3209]  Awduche, D., Berger, L., Gan, D., Li, T., Srinivasan, V.,
              and G. Swallow, "RSVP-TE: Extensions to RSVP for LSP
              Tunnels", RFC 3209, DOI 10.17487/RFC3209, December 2001,
              <https://www.rfc-editor.org/info/rfc3209>.

   [RFC4090]  Pan, P., Ed., Swallow, G., Ed., and A. Atlas, Ed., "Fast
              Reroute Extensions to RSVP-TE for LSP Tunnels", RFC 4090,
              DOI 10.17487/RFC4090, May 2005,
              <https://www.rfc-editor.org/info/rfc4090>.

   [RFC4655]  Farrel, A., Vasseur, J., and J. Ash, "A Path Computation
              Element (PCE)-Based Architecture", RFC 4655,
              DOI 10.17487/RFC4655, August 2006,
              <https://www.rfc-editor.org/info/rfc4655>.

   [RFC5440]  Vasseur, JP., Ed. and JL. Le Roux, Ed., "Path Computation
              Element (PCE) Communication Protocol (PCEP)", RFC 5440,
              DOI 10.17487/RFC5440, March 2009,
              <https://www.rfc-editor.org/info/rfc5440>.








Stone & Aissaoui         Expires April 27, 2020                 [Page 6]

Internet-Draft                     I-D                      October 2019


   [RFC7525]  Sheffer, Y., Holz, R., and P. Saint-Andre,
              "Recommendations for Secure Use of Transport Layer
              Security (TLS) and Datagram Transport Layer Security
              (DTLS)", BCP 195, RFC 7525, DOI 10.17487/RFC7525, May
              2015, <https://www.rfc-editor.org/info/rfc7525>.

   [RFC7752]  Gredler, H., Ed., Medved, J., Previdi, S., Farrel, A., and
              S. Ray, "North-Bound Distribution of Link-State and
              Traffic Engineering (TE) Information Using BGP", RFC 7752,
              DOI 10.17487/RFC7752, March 2016,
              <https://www.rfc-editor.org/info/rfc7752>.

   [RFC8253]  Lopez, D., Gonzalez de Dios, O., Wu, Q., and D. Dhody,
              "PCEPS: Usage of TLS to Provide a Secure Transport for the
              Path Computation Element Communication Protocol (PCEP)",
              RFC 8253, DOI 10.17487/RFC8253, October 2017,
              <https://www.rfc-editor.org/info/rfc8253>.

   [RFC8402]  Filsfils, C., Ed., Previdi, S., Ed., Ginsberg, L.,
              Decraene, B., Litkowski, S., and R. Shakir, "Segment
              Routing Architecture", RFC 8402, DOI 10.17487/RFC8402,
              July 2018, <https://www.rfc-editor.org/info/rfc8402>.

Authors' Addresses

   Andrew Stone
   Nokia

   Email: andrew.stone@nokia.com


   Mustapha Aissaoui
   Nokia

   Email: mustapha.aissaoui@nokia.com
















Stone & Aissaoui         Expires April 27, 2020                 [Page 7]
