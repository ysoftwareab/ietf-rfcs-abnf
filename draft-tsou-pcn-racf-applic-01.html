<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Applicability Statement for the Use of Pre-Congestion Notification in a Resource-Controlled Network</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Applicability Statement for the Use of Pre-Congestion Notification in a Resource-Controlled Network">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">PCN</td><td class="header">T. Tsou</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">F. Huang</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">T. Taylor</td></tr>
<tr><td class="header">Expires: May 7, 2009</td><td class="header">Huawei</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">November 03, 2008</td></tr>
</table></td></tr></table>
<h1><br />Applicability Statement for the Use of Pre-Congestion Notification in a Resource-Controlled Network<br />draft-tsou-pcn-racf-applic-01.txt</h1>

<h3>Status of this Memo</h3>
<p>
By submitting this Internet-Draft,
each author represents that any applicable patent or other IPR claims of which
he or she is aware have been or will be disclosed,
and any of which he or she becomes aware will be disclosed,
in accordance with Section&nbsp;6 of BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on May 7, 2009.</p>

<h3>Abstract</h3>

<p>This document is written to help coordinate work on pre-congestion notification (PCN) between the IETF PCN Working Group and the ITU-T. It maps the use of PCN into the ITU-T transport control architecture. It examines three scenarios, showing in each, where new requirements are placed on the ITU-T architecture. In each case, the ITU-T functional entity known as the Transport Resource Control Functional Entity (TRC-FE) is seen as the logical destination for PCN congestion reports and PCN flow termination reports, which it uses to keep track of network status. As logical entities, instances of the TRC-FE can be present in the ingress nodes, in one or more centralized devices, or in both. These alternatives define the scenarios examined.
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#term">1.</a>&nbsp;
Terminology<br />
<a href="#intro">2.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#pcnIntro">2.1.</a>&nbsp;
Pre-Congestion Notification (PCN)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#racfIntro">2.2.</a>&nbsp;
Admission Control System<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#introFlows">2.2.1.</a>&nbsp;
Basic Flows of the Admission Control System<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#introAddr">2.2.2.</a>&nbsp;
Addressing<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#combin">2.3.</a>&nbsp;
Combining the PCN and ITU-T RACF Architectures<br />
<a href="#scen1">3.</a>&nbsp;
Scenario 1: Proxy and Ingress TRC-FE Instances<br />
<a href="#scen2">4.</a>&nbsp;
Scenario 2: TRC-FE Present In Ingress Nodes Only<br />
<a href="#scen3">5.</a>&nbsp;
Scenario 3: Centralized TRC-FE Only<br />
<a href="#secur">6.</a>&nbsp;
Security Considerations<br />
<a href="#IANA">7.</a>&nbsp;
IANA Considerations<br />
<a href="#ack">8.</a>&nbsp;
Acknowledgements<br />
<a href="#rfc.references1">9.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">9.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">9.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
<a href="#rfc.copyright">&#167;</a>&nbsp;
Intellectual Property and Copyright Statements<br />
</p>
<br clear="all" />

<a name="term"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Terminology</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119. 
</p>
<a name="intro"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Introduction</h3>

<a name="pcnIntro"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Pre-Congestion Notification (PCN)</h3>

<p>The PCN Working Group is working on a new approach for maintenance of quality of service (QoS) within Diffserv-controlled domains. This approach is called "pre-congestion notification" (PCN). The principles and associated architecture are documented in <a class='info' href='#I-D.PCNarch'>[I&#8209;D.PCNarch]<span> (</span><span class='info'>Eardley, P., &ldquo;Pre-Congestion Notification Architecture,&rdquo; October&nbsp;2008.</span><span>)</span></a>.
</p>
<p>PCN distinguishes and assigns roles to ingress nodes, interior nodes, and egress nodes relative to a given PCN domain. Ingress nodes mark admitted packets to indicate that they should be PCN-metered. Interior nodes check the next-hop interface traffic status for each PCN-marked packet before routing it. Marking behaviour is described in detail in <a class='info' href='#I-D.PCNmark'>[I&#8209;D.PCNmark]<span> (</span><span class='info'>Eardley, P., &ldquo;Marking behaviour of PCN-nodes,&rdquo; October&nbsp;2008.</span><span>)</span></a> and depends in fact on the encoding scheme being used. The current view of this encoding scheme is provided in <a class='info' href='#I-D.PCNencod'>[I&#8209;D.PCNencod]<span> (</span><span class='info'>Moncaster, T., Briscoe, B., and M. Menth, &ldquo;Baseline Encoding and Transport of Pre-Congestion Information,&rdquo; October&nbsp;2008.</span><span>)</span></a>, but other schemes are possible. In particular, note <a class='info' href='#I-D.PCN3in1'>[I&#8209;D.PCN3in1]<span> (</span><span class='info'>Briscoe, B., &ldquo;PCN 3-State Encoding Extension in a single DSCP,&rdquo; October&nbsp;2008.</span><span>)</span></a>. If three encoding states are available, it is possible to have the following marking behaviour:
</p>
<ul class="text">
<li>If the traffic status exceeds a lower "pre-congestion" threshold (but not the upper threshold described next), the packet is marked to indicate that it has encountered pre-congestion. 
</li>
<li>If the traffic status exceeds an upper "termination" threshold, the packet is marked to indicate that it has encountered a flow termination condition. 
</li>
</ul>

<p>The egress nodes relate the packets they receive to the aggregate flows they receive from individual ingress nodes. 
Statistics on packet marking are reported to a decision point (possibly within the egress node itself), which makes two decisions:

</p>
<ul class="text">
<li>whether one or more flows should be terminated immediately to preserve QoS for the remainder;
</li>
<li>whether new flows can be admitted without degrading the QoS for existing flows to an unacceptable level.
</li>
</ul>

<p>The architecture on which the IETF work has focussed assumes that egress nodes communicate directly to ingress nodes to effect the termination and admission decisions.
</p>
<a name="racfIntro"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
Admission Control System</h3>

<p>A number of standards bodies (such as the ITU-T and ETSI TISPAN) have defined admission control systems (ITU-T RACF <a class='info' href='#Y.2111'>[Y.2111]<span> (</span><span class='info'>International Telecommunications Union, &ldquo;Resource and admission control functions in Next Generation Networks,&rdquo; September&nbsp;2006.</span><span>)</span></a>, TISPAN RACS <a class='info' href='#ES283003'>[ES283003]<span> (</span><span class='info'>ETSI Telecommunications and Internet converged Services and Protocols for Advanced Networking (TISPAN), &ldquo;ETSI ES 282 003 V2.0.0, Telecommunications and Internet converged Services and Protocols for Advanced Networking (TISPAN); Resource and Admission Control Sub-System (RACS): Functional Architecture,&rdquo; May&nbsp;2008.</span><span>)</span></a>) to allow per-flow imposition of policy based on subscriptions across a variety of transport technologies.
</p>
<p>This section provides some general guidance how the admission control system is used in the PCN environment.
</p>
<a name="introFlows"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.1"></a><h3>2.2.1.&nbsp;
Basic Flows of the Admission Control System</h3>

<p>The admission control system generally performs both admission control functions and flow termination functions based on the network congestion status information collected from the PCN-egress-node. 
</p>
<p>The PCN-egress-node measures the traffic from a particular PCN-ingress-node, and calculates the congestion value at the ingress-egress-aggregate level. The PCN-egress-node may compare the current congestion value with the previous congestion value, if the difference of the two congestion value exceeds a preset range, the PCN-egress-node sends the PCN-feedback-information (e.g. the current congestion value for a particular pair of PCN-boundary-nodes) to the admission control system. After receiving the PCN-feedback-information, the admission control system saves the information for admission control and flow termination. Based on this information, the admission control system can determine whether to admit a service flow request or not after receiving the flow request, and can also determine whether some of the admitted flows need to be terminated. The admission control system also needs to signal to the PCN-ingress-node the decision about admission or termination.
</p>
<a name="introAddr"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2.2"></a><h3>2.2.2.&nbsp;
Addressing</h3>

<p>Generally, there is a mapping between the PCN-ingress-node and the addresses which are outside the PCN domain and accessible by the PCN-ingress-node, i.e. the source addresses of the incoming flows to the PCN domain. The PCN-ingress-node can abstract this mapping from for example the routing table or the configuration data. The PCN-ingress-node can send the mapping to the admission control system and the admission control system can determine the PCN-ingress-node for each flow based on the mapping and the address information of the flow. The admission control system may also forward the mapping to the PCN-egress-node, so that the PCN-egress-node can determine the PCN-ingress-node of a flow based on the mapping and the address information of the flow.
</p>
<a name="combin"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3"></a><h3>2.3.&nbsp;
Combining the PCN and ITU-T RACF Architectures</h3>

<p>The ITU-T RACF architecture is a generalization of the architecture originally developed by 3GPP for cellular radio networks connected to an IP core. The architecture features a top-level control function which transmits requests (push mode) or provides policy responses (pull mode) to edge nodes where enforcement takes place. This top-level control function provides an abstract view of network infrastructure to the session control layer (SIP servers and the like). A second-level control function is aware of the specific transport technology in use in the network, tracks network topology and resource availability, and indicates to the top-level function whether resources are available to serve a specific flow request.
</p>
<p>In the ITU-T architecture in particular <a class='info' href='#Y.2111'>[Y.2111]<span> (</span><span class='info'>International Telecommunications Union, &ldquo;Resource and admission control functions in Next Generation Networks,&rdquo; September&nbsp;2006.</span><span>)</span></a>, the top-level function is called the Policy Decision Functional Entity (PD-FE-FE), and the second-level function is called the Transport Resource Control Functional Entity (TRC-FE). The complete transport control subsystem is called the Resource and Admission Control Function (RACF).  The function within the edge node at which decisions are enforced is called the Policy Enforcement Functional Entity (PE-FE). Interested parties will find a complete description of the first release of this architecture in [ITU-T Y.2111] , but a partial diagram labelling the reference points of interest in this document is shown in <a class='info' href='#figRACF'>Figure&nbsp;1<span> (</span><span class='info'>A Portion of the ITU-T-Defined Transport Control Architecture</span><span>)</span></a>.
</p><br /><hr class="insert" />
<a name="figRACF"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

                        Session Control
                        _______________
                               |
                               + Rs
                          -----+-----
                          |  PD-FE  |------
                          -----+-----     |
                               |          |
                               + Rt       |
       -----------   Rp   -----+-----     + Rw
       |  TRC-FE |---+----|  TRC-FE |     |
       -----+-----        -----+-----     |
            + Rc               + Rc       |
      ------+------------------+----------|-------
      |                              -----+----- |
      |         . . . .              |  PE-FE  | |
      |     Transport Processing     ----------- |
      --------------------------------------------

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: A Portion of the ITU-T-Defined Transport Control Architecture&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>The typical message flow associated with a flow admission request in the ITU-T architecture is as follows:

</p>
<ol class="text">
<li>In the general case, the TRC-FE gathers topology and status information from the transport processing layer across the Rc reference point. The use of PCN offers the possibility that the TRC-FE no longer has to deal with detailed topology.
</li>
<li>The PD-FE receives a request to admit a flow. In push mode this comes from a P-CSCF, for example, across the Rs reference point; in pull mode it comes from the PE-FE across the Rw reference point.
</li>
<li>The PD-FE checks subscription data (provided by another subsystem) to see if the subscriber is permitted to add the requested flow. If not, it rejects the request immediately.
</li>
<li>The PD-FE contacts an instance of the TRC-FE by way of the Rt reference point to determine if the network resources are available to allocate to the requested flow. The selected instance may locate other TRC-FE instances along the flow path via the Rp reference point to make this determination.
</li>
<li>If the response from the TRC-FE is negative, the PD-FE rejects the request. Otherwise it downloads the required policy to the PE-FE across the Rw reference point. In push mode it also responds positively to the original request across the Rs reference point.
</li>
</ol><p>

</p>
<p>The PD-FE and TRC-FE actually track sessions, which typically consist of multiple flows in both directions. The TRC-FE can tell the PD-FE to terminate a flow or to abort a complete session due to, for instance, loss of the supporting resources. The PD-FE from its side can add or terminate individual flows or terminate a complete session as required by the user.
</p>
<p>This document considers how PCN would interact with the RACF architecture just described. Since that architecture is functional, various implementations are possible, depending on what elements are combined in the same physical entities. This document looks at three possible deployment scenarios. In all three cases, the PD-FE is implemented in a centralized device and the PE-FE is a functional component of the ingress nodes. The scenarios vary in where the TRC-FE is implemented.

</p>
<ol class="text">
<li>The TRC-FE is implemented both in one or more centralized devices (possibly combined with the PD-FE) and as a logical component of the ingress nodes. Congestion level and flow termination reports from the egress nodes pass directly to the ingress nodes. The TRC-FE in the centralized device is just a proxy that forwards requests and responses between the PD-FE and the ingress nodes.  The TRC-FE instances in the ingress nodes respond to flow admission requests from the PD-FE with indications of resource status derived from the PCN reports.  They process flow termination reports based on the priority parameters for existing flows that were supplied by the PD-FE during resource reservation, and send reports to the PD-FE indicating which flows or sessions must be terminated to protect the QoS of the remaining flows
</li>
<li>The TRC-FE is absorbed into the ingress nodes and no centralized instance exists. Congestion level and flow termination reports from the egress nodes pass directly to the ingress nodes. The TRC-FE instances in the ingress nodes respond to flow admission requests and process flow termination reports in the same way as in Scenario 1.
</li>
<li>The TRC-FE is implemented in one or more centralized devices only (possibly combined with the PD-FE). It receives and processes the congestion level and flow termination reports and responds to flow admission requests in the same way as the distributed TRC-FE instances in the previous two scenarios.
</li>
</ol><p>

</p>
<p>The following sections examine each of these scenarios in turn. Amongst other things, they will consider whether the message flow described in the previous section is appropriate or whether it should be modified.
</p>
<a name="scen1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Scenario 1: Proxy and Ingress TRC-FE Instances</h3>

<p>The functional layout for Scenario 1 is shown in <a class='info' href='#figScen1'>Figure&nbsp;2<span> (</span><span class='info'>Functional Architecture For Scenario 1</span><span>)</span></a> below. The PCN reports pass across the existing Rc reference point between the embedded TRC-FE and the transport processing layer. If probes are used, they also cross the Rc reference point.  
The figure assumes that the PD-FE uses the proxy TRC-FE to locate the ingress node for a given user flow, and places the Rt and Rp reference points accordingly.
</p><br /><hr class="insert" />
<a name="figScen1"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

                        Session Control
                        _______________
                               |
                               + Rs
                          -----+-----
                          |  PD-FE  |
                          -+---+-----
                          /    |
                         /     + Rt
                        /      |
               Rp      /  -----+-----
           ----+----------+  TRC-FE |
          /          /    | (Proxy) |
         /          /     -----------
        /          x Rw
 ------/-------   /                           ----------
 | ---+------ |  /             Rc             | Egress |
 | | TRC-FE +------------------+--------------+  Nodes |
 | ---------- |/   PCN reports and probes     ----------
 | ---------- /         (if used)
 | |  PE-FE +/|
 | ---------- |
 --------------
     Ingress
      Nodes

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: Functional Architecture For Scenario 1&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p> If we follow through the message flows specified in <a class='info' href='#racfIntro'>Section&nbsp;2.2<span> (</span><span class='info'>Admission Control System</span><span>)</span></a>, we find that they now run as follows:

</p>
<ol class="text">
<li>Network status, but not network topology, is now determined from the PCN report message flows across Rc, as already noted.
</li>
<li>Step 2 is unchanged.
</li>
<li>Step 3 is unchanged.
</li>
<li>Step 4 involves messaging through the Rt reference point to the proxy TRC-FE instance, and from there through the Rp reference point to the TRC-FE instance embedded in the desired ingress node. If probing is used to determine congestion status, the probing messages are another increment to the messaging through the Rc reference point. The responses to the probes pass back through Rc.
</li>
<li>Step 5 is unchanged: a request from the PD-FE directly to the PE-FE instance in the ingress node, across Rw.
</li>
</ol><p>

</p>
<p>Note that the messaging flow appears to be less than optimal, in that the PD-FE is really communicating twice with the ingress node - once to the embedded TRC-FE instance in step 4, then, based on a positive response, to the PE-FE instance in step 5. Messaging could be reduced to one exchange if the PD-FE were aware in advance that it was communicating with a combined TRC-FE + PE-FE entity. It is an open issue whether such a special-case modification of the general control architecture should be developed.
</p>
<a name="scen2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Scenario 2: TRC-FE Present In Ingress Nodes Only</h3>

<p>The functional architecture corresponding to this scenario is shown in <a class='info' href='#figScen2'>Figure&nbsp;3<span> (</span><span class='info'>Functional Architecture For Scenario 2</span><span>)</span></a>. The figure assumes that the PD-FE does not know which ingress node to contact until the TRC-FE instance it reached in the first place locates it. It is plausible that the TRC-FE instance has the necessary knowledge simply because ingress nodes tend also to be egress nodes, and in this scenario the egress nodes have to know where to send their PCN reports. As an alternative, the PD-FE could be required to have the necessary knowledge to locate the right ingress node directly. However, this seems contrary to the spirit of the existing ITU-T architecture.
</p><br /><hr class="insert" />
<a name="figScen2"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

                        Session Control
                        _______________
                               |
                               + Rs
                          -----+-----
                          |  PD-FE  |
                          -+---+-----
                          /    |
                         /     |
                        /      |
                       x Rw    + Rt
                      /        |
                     /         |         Rc
         --------------------------------+-------
         |         /           |                |
 --------|-----   /       -----|--------     ---+------
 | ------+--- |  /   Rp   | ---+------ | Rc  | Egress |
 | | TRC-FE +--------+------+ TRC-FE +---+---+ Nodes  |
 | ---------- |/          | ---------- |     ----------
 | ---------- /           | ---------- |
 | |  PE-FE +/|           | |  PE-FE | |
 | ---------- |           | ---------- |
 --------------           --------------
     Ingress                   Ingress
       Node                      Node

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3: Functional Architecture For Scenario 2&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>Aside from the routing of messages between the PD-FE and the TRC-FE, this scenario is the same as Scenario 1.
</p>
<a name="scen3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Scenario 3: Centralized TRC-FE Only</h3>

<p>In this scenario centralized TRC-FE instances collect PCN reports from egress nodes within their scope of responsibility. As in the other scenarios, the TRC-FE instances track resource status, respond to inquiries from the PD-FE, and notify the PD-FE if flows have to be terminated. However, since they are physically separate from the ingress nodes, there is no possibility of message optimization.
It is assumed in the figure that a given egress node sends all of its PCN reports to the same TRC-FE instance, which must then distribute them to the TRC-FE instances in charge of the various ingress nodes. Thus the PCN reports appear as incremental information flows Rc' and Rp' across the Rc and Rp reference points respectively.
</p><br /><hr class="insert" />
<a name="figScen3"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

                        Session Control
                        _______________
                               |
                               + Rs
                          -----+-----
                          |  PD-FE  |
                          -+---+-----
                          /    |
                         /     + Rt
                        /      |
 -----------   Rp      /  -----+----- PCN reports
 |  TRC-FE +---+----------|  TRC-FE +-----+-----
 -----------         /    -----------     Rc    \
      |             /                            \
      + Rc'        x Rw                           \
 -----|--------   /                                \
 | ---+------ |  /                            -----+----
 | |  PE-FE +---/                             | Egress |
 | |        +---------------------------------+  Nodes |
 | ---------- |          Probes (if used)     ----------
 --------------
     Ingress
      Nodes

</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;4: Functional Architecture For Scenario 3&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>The first thing to note in <a class='info' href='#figScen3'>Figure&nbsp;4<span> (</span><span class='info'>Functional Architecture For Scenario 3</span><span>)</span></a> is that the centralized TRC-FE reduces the scale of a problem already encountered in PCN operation: where to send the PCN reports? In the straightforward case initially dealt with by the PCN Working Group, each egress node must know to which ingress node to send each of its flow reports. Now the centralized TRC-FE has that problem, but the egress nodes only have to discover or be configured with the address of a single collection point.
</p>
<p>The information exchanges needed to admit a flow are pretty well those described in <a class='info' href='#racfIntro'>Section&nbsp;2.2<span> (</span><span class='info'>Admission Control System</span><span>)</span></a>. This scenario has one interesting point not seen in the other scenarios. If probes are used, they must be sent from the ingress nodes rather than the TRC-FE instances. This raises the question of how they are triggered. It seems inappropriate to require the PD-FE to be aware of the use of PCN in the domain, since it is supposed to operate in technology-independent fashion. It makes more sense for the TRC-FE to trigger a probe at the PE-FE in response to a query from the PD-FE. In terms of the ITU-T architecture, the trigger and response from the PE-FE would pass via the Rc reference point, but this is shown as Rc' in the figure because it represents an incremental requirement.
</p>
<a name="secur"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Security Considerations</h3>

<p>The security considerations for the different scenarios described in this document are not fundamentally different from those already applying for PCN and for the ITU-T architecture respectively. A more detailed analysis of specific issues may be appropriate as this document is further developed.
</p>
<a name="IANA"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
IANA Considerations</h3>

<p>This memo presents no IANA considerations.
</p>
<a name="ack"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Acknowledgements</h3>

<p>Thanks to Gabriele Corliano for ideas contributed in preliminary discussion.
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.PCNarch">[I-D.PCNarch]</a></td>
<td class="author-text">Eardley, P., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-pcn-architecture-08.txt">Pre-Congestion Notification Architecture</a>,&rdquo; October&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.PCNencod">[I-D.PCNencod]</a></td>
<td class="author-text">Moncaster, T., Briscoe, B., and M. Menth, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-pcn-baseline-encoding-01
.txt">Baseline Encoding and Transport of Pre-Congestion Information</a>,&rdquo; October&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.PCNmark">[I-D.PCNmark]</a></td>
<td class="author-text">Eardley, P., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-pcn-marking-behaviour-01
.txt">Marking behaviour of PCN-nodes</a>,&rdquo; October&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="Y.2111">[Y.2111]</a></td>
<td class="author-text">International Telecommunications Union, &ldquo;Resource and admission control functions in Next Generation Networks,&rdquo; September&nbsp;2006.</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>9.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="ES283003">[ES283003]</a></td>
<td class="author-text">ETSI Telecommunications and Internet converged Services and
Protocols for Advanced Networking (TISPAN), &ldquo;ETSI ES 282 003 V2.0.0, Telecommunications and Internet converged Services and
Protocols for Advanced Networking (TISPAN);
Resource and Admission Control Sub-System (RACS):
Functional Architecture,&rdquo; May&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.PCN3in1">[I-D.PCN3in1]</a></td>
<td class="author-text">Briscoe, B., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-pcn-marking-behaviour-01
.txt">PCN 3-State Encoding Extension in a single DSCP</a>,&rdquo; October&nbsp;2008.</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Tina Tsou</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Huawei Technologies</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">F3-5-089S, R&amp;D Center,</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Longgang District</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Shenzhen  518129</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">China</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:tena@huawei.com">tena@huawei.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Fortune Huang</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Huawei Technologies</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">F3-5-089S, R&amp;D Center,</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Longgang District</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Shenzhen  518129</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">China</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:fqhuang@huawei.com">fqhuang@huawei.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Tom Taylor</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Huawei Technologies</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">1852 Lorraine Ave</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Ottawa, Ontario  K1H 6Z8</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Canada</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 613 680 2675</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:tom.taylor@rogers.com">tom.taylor@rogers.com</a></td></tr>
</table>
<a name="rfc.copyright"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Full Copyright Statement</h3>
<p class='copyright'>
Copyright &copy; The IETF Trust (2008).</p>
<p class='copyright'>
This document is subject to the rights,
licenses and restrictions contained in BCP&nbsp;78,
and except as set forth therein,
the authors retain all their rights.</p>
<p class='copyright'>
This document and the information contained herein are provided
on an &ldquo;AS IS&rdquo; basis and THE CONTRIBUTOR,
THE ORGANIZATION HE/SHE REPRESENTS
OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE.</p>
<h3>Intellectual Property</h3>
<p class='copyright'>
The IETF takes no position regarding the validity or scope of any
Intellectual Property Rights or other rights that might be claimed
to pertain to the implementation or use of the technology
described in this document or the extent to which any license
under such rights might or might not be available; nor does it
represent that it has made any independent effort to identify any
such rights.
Information on the procedures with respect to
rights in RFC documents can be found in BCP&nbsp;78 and BCP&nbsp;79.</p>
<p class='copyright'>
Copies of IPR disclosures made to the IETF Secretariat and any
assurances of licenses to be made available,
or the result of an attempt made to obtain a general license or
permission for the use of such proprietary rights by implementers or
users of this specification can be obtained from the IETF on-line IPR
repository at <a href='http://www.ietf.org/ipr'>http://www.ietf.org/ipr</a>.</p>
<p class='copyright'>
The IETF invites any interested party to bring to its attention
any copyrights,
patents or patent applications,
or other
proprietary rights that may cover technology that may be required
to implement this standard.
Please address the information to the IETF at <a href='mailto:ietf-ipr@ietf.org'>ietf-ipr@ietf.org</a>.</p>
</body></html>
