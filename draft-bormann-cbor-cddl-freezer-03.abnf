base = 16777216
a = base + 1
b = base + 2

Tag1004 = #6.1004(text .abnf full-date)
Tag0 = #6.0(text .abnf date-time)

full-date = "full-date" .cat rfc3339
date-time = "date-time" .cat rfc3339

rfc3339 = '
date-fullyear   = 4DIGIT
date-month      = 2DIGIT  ; 01-12
date-mday       = 2DIGIT  ; 01-28, 01-29, 01-30, 01-31 based on
                                ; month/year
time-hour       = 2DIGIT  ; 00-23
time-minute     = 2DIGIT  ; 00-59
time-second     = 2DIGIT  ; 00-58, 00-59, 00-60 based on leap sec
                                ; rules
time-secfrac    = "." 1*DIGIT
time-numoffset  = ("+" / "-") time-hour ":" time-minute
time-offset     = "Z" / time-numoffset

partial-time    = time-hour ":" time-minute ":" time-second
                        [time-secfrac]
full-date       = date-fullyear "-" date-month "-" date-mday
full-time       = partial-time time-offset

date-time       = full-date "T" full-time
rfc5234-core = '
DIGIT          =  %x30-39 ; 0-9
Field = uint .bitfield Fieldbits

Fieldbits = [
     flag1: [1, bool],
     val: [4, Vals],
     flag2: [1, bool],
Vals = &(A: 0, B: 1, C: 2, D: 3)

postal = {
     ( street: text,
       housenumber: text) //
     ( pobox: text .regexp "[0-9]+" )
session = {
     timeout: uint,
other-session = {
     timeout: uint  .lt [somehow refer to session.timeout],
cddlj = ["cddl", +rule]
rule = ["=" / "/=" / "//=", namep, type]
namep = ["name", id] / ["gen", id, +id]
id = text .regexp "[A-Za-z@_$](([-.])*[A-Za-z0-9@_$])*"
op = ".." / "..." /
     text .regexp "\\.[A-Za-z@_$](([-.])*[A-Za-z0-9@_$])*"
namea = ["name", id] / ["gen", id, +type]
type = value / namea / ["op", op, type, type] /
     ["map", group] / ["ary", group] / ["tcho", 2*type] /
     ["unwrap", namea] / ["enum", group / namea] /
     ["prim", ?(0..7, ?uint)]
group = ["mem", null/type, type] /
     ["rep", uint, uint/false, group] /
     ["seq", 2*group] / ["gcho", 2*group]
value = ["number"/"text"/"bytes", text]

