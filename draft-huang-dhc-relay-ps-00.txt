


DHC                                                        L. Huang, Ed.
Internet-Draft                                                   H. Deng
Intended status: Informational                              China Mobile
Expires: January 6, 2010                                     P. Kurapati
                                                                B. Joshi
                                                    Infosys Technologies
                                                            July 5, 2009


                 Problem Statement for DHCP Relay Agent
                      draft-huang-dhc-relay-ps-00

Status of this Memo

   This Internet-Draft is submitted to IETF in full conformance with the
   provisions of BCP 78 and BCP 79.  This document may contain material
   from IETF Documents or IETF Contributions published or made publicly
   available before November 10, 2008.  The person(s) controlling the
   copyright in some of this material may not have granted the IETF
   Trust the right to allow modifications of such material outside the
   IETF Standards Process.  Without obtaining an adequate license from
   the person(s) controlling the copyright in such materials, this
   document may not be modified outside the IETF Standards Process, and
   derivative works of it may not be created outside the IETF Standards
   Process, except to format it for publication as an RFC or to
   translate it into languages other than English.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on January 6, 2010.

Copyright Notice

   Copyright (c) 2009 IETF Trust and the persons identified as the



Huang, et al.            Expires January 6, 2010                [Page 1]

Internet-Draft                DHCP Relay PS                    July 2009


   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents in effect on the date of
   publication of this document (http://trustee.ietf.org/license-info).
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.

Abstract

   RFC 3046 allows only the first Relay Agent to append Relay Agent
   Information option.  In some networks, Layer 2 Relay Agents and Layer
   3 Relay Agents are deployed but only Layer 2 Relay Agent appends the
   Relay Agent Information option.  This document describes two pretty
   common network scenarios that uses Layer 2 and Layer 3 Relay Agents
   and their unique requirements where either DHCP server or Relay Agent
   need more information to handle DHCP messages.


































Huang, et al.            Expires January 6, 2010                [Page 2]

Internet-Draft                DHCP Relay PS                    July 2009


Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . . . 4
   2.  Identifying the downstream subscriber's interface . . . . . . . 4
   3.  location based authentication . . . . . . . . . . . . . . . . . 4
   4.  Security Considerations . . . . . . . . . . . . . . . . . . . . 5
   5.  IANA Consideration  . . . . . . . . . . . . . . . . . . . . . . 5
   6.  References  . . . . . . . . . . . . . . . . . . . . . . . . . . 6
     6.1.  Normative References  . . . . . . . . . . . . . . . . . . . 6
     6.2.  Informative References  . . . . . . . . . . . . . . . . . . 6
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . . . 6








































Huang, et al.            Expires January 6, 2010                [Page 3]

Internet-Draft                DHCP Relay PS                    July 2009


1.  Introduction

   DHCP Relay Agents eliminate the necessity of having a DHCP server on
   each physical network.  RFC 3046 introduces Relay Agent Information
   option which is inserted by DHCP relay agent when forwarding client-
   originated DHCP packets to a DHCP server.  DHCP server may use the
   information available in this option to implement IP address or other
   parameter assignment policies.  DHCP server echo back the Relay Agent
   Information option in the reply messages and Relay Agent strips this
   option before forwarding the reply to the client.

   In some network configurations, DHCP server and clients are separated
   by multiple Relay Agents.  This document describes two such network
   scenarios and their unique requirements in details.  This document is
   intended to be a problem statement document and document the problems
   and thier requirements.  This document does not suggest any specific
   ways to solve these problems.


2.  Identifying the downstream subscriber's interface

                                                -------
             +-----------+  +-----------+    ///       \\\    +------+
   +------+  |Layer 2    |  |Layer 3    |   |             |   |DHCP  |
   |Client+--+Relay Agent+--+Relay Agent+--+    Network    +--+Server|
   +------+  +-----------+  +-----------+   |             |   +------+
                                             \\\       ///
                                                -------

                        Figure 1: Network Scenario

   Under current mechanism defined in RFC3046, only downstream relay
   agent can insert relay agent information.  In some deployments, Layer
   3 Relay Agent uses unnumbered interfaces.  When these Layer 3 Relay
   Agents are used along with Layer 2 Relay agents, they need to
   maintain internal states to identify the outgoing interface.
   Maintaining state information for each packet will not scale as
   number of DHCP clients increases.


3.  location based authentication

   When IPoE is used as access authentication mechanism, clients'
   location is recognized through DHCP relay agent information.
   Sometime, operator may limit the ability of access of subscriber
   within the pre-arranged area, such as a certain building.  But in the
   current deployment, relay agent information can be inserted either by
   the floor switches or the building switches, which means that the



Huang, et al.            Expires January 6, 2010                [Page 4]

Internet-Draft                DHCP Relay PS                    July 2009


   subscriber!_s location is either too specific or too ambiguous.  It
   will need much more policies for the operator to configure the
   subscriber's right to access from various kind of location scenario.

   For example, a layer 3 switch is installed for a 20 floor building
   and a layer 2 switch is installed at each floor inside this building.

                               +-------+
                 Layer 3       |Layer 3|
                 Relay Agent   |Switch |
                              -+---/---+---
                           ---    /        ----
                         --       /            ----
                      ---        /                 -----
                 +-------+ | +---/---+ |            | +-------+
    Layer 2      |Layer 2| | |Layer 2| |    ....... | |Layer 2|
    Relay Agent  |Switch | | |Switch | |            | |Switch |
                 +-------+ | +-------+ |            | +-------+
                           |           |            |
                  floor 1  |  floor 2  |            |  floor 20

                        Figure 2: Network Scenario

   If the administrator plan to allow client A to access only from the
   first floor of this building and allow client B to access from every
   each floor.  Based on the current mechanism, relay agent option
   information can only be inserted by layer 2 switch and the
   administrator should make 21 policies, one for client A and twenty
   for client B in this scenario.  If Layer 3 switch can also insert
   some relay agent information even if layer 2 switch has inserted one,
   the administrator only need to make 2 policies, one for client A and
   the other for client B.


4.  Security Considerations

   This is a problem statement document and does not suggest any
   protocol functionality.


5.  IANA Consideration

   This document makes no requests to IANA.


6.  References





Huang, et al.            Expires January 6, 2010                [Page 5]

Internet-Draft                DHCP Relay PS                    July 2009


6.1.  Normative References

   [RFC2131]  Droms, R., "Dynamic Host Configuration Protocol",
              RFC 2131, March 1997.

   [RFC2132]  Alexander, S. and R. Droms, "DHCP Options and BOOTP Vendor
              Extensions", RFC 2132, March 1997.

   [RFC3046]  Patrick, M., "DHCP Relay Agent Information Option",
              RFC 3046, January 2001.

6.2.  Informative References

   [Relay Chaining]
              Joshi, B., "Relay Chaining in DHCPv4",
              draft-kurapati-dhc-relay-chaining-dhcpv4-01.txt (work in
              progress), June 2007.


Authors' Addresses

   Lu Huang (editor)
   China Mobile
   53A,Xibianmennei Ave.,
   Xuanwu District,
   Beijing  100053
   China

   Email: huanglu@chinamobile.com


   Hui Deng
   China Mobile
   53A,Xibianmennei Ave.,
   Xuanwu District,
   Beijing  100053
   China

   Email: denghui02@gmail.com












Huang, et al.            Expires January 6, 2010                [Page 6]

Internet-Draft                DHCP Relay PS                    July 2009


   Pavan Kurapati
   Infosys Technologies
   44 Electronics City, Hosur Road
   Bangalore  560100
   India

   Email: pavan_kurapati@infosys.com


   Bharat Joshi
   Infosys Technologies
   44 Electronics City, Hosur Road
   Bangalore  560100
   India

   Email: bharat_joshi@infosys.com



































Huang, et al.            Expires January 6, 2010                [Page 7]


