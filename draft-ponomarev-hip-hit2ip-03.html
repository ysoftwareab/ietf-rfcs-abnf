<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Embedding Host Identity Tags Data in DNS</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Embedding Host Identity Tags Data in DNS">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Host Identity Protocol</td><td class="header">O. Ponomarev</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">A. Gurtov</td></tr>
<tr><td class="header">Intended status: Experimental</td><td class="header">Helsinki Institute for Information</td></tr>
<tr><td class="header">Expires: September 10, 2009</td><td class="header">Technology HIIT</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">March 09, 2009</td></tr>
</table></td></tr></table>
<h1><br />Embedding Host Identity Tags Data in DNS<br />draft-ponomarev-hip-hit2ip-03</h1>

<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on September 10, 2009.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents in effect on the date of
publication of this document (http://trustee.ietf.org/license-info).
Please review these documents carefully, as they describe your
rights and restrictions with respect to this document.</p>

<h3>Abstract</h3>

<p>This document proposes conventions to access and manage 
Host Identity Tag (HIT) mappings using the Domain Name System (DNS) 
interface.
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#anchor2">2.</a>&nbsp;
Domain names for HIT mappings<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">2.1.</a>&nbsp;
Preconfigured Domain<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">2.2.</a>&nbsp;
Listing IP Addresses of the System<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">2.3.</a>&nbsp;
Listing host names<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">2.4.</a>&nbsp;
Link to another domain<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">2.5.</a>&nbsp;
Managing the Records<br />
<a href="#anchor8">3.</a>&nbsp;
Usage scenarios<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">3.1.</a>&nbsp;
Initial deployment<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">3.2.</a>&nbsp;
Parallel services<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">3.3.</a>&nbsp;
Two-level mapping<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">3.4.</a>&nbsp;
Local mapping<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">3.5.</a>&nbsp;
Link to mapping service<br />
<a href="#Security">4.</a>&nbsp;
Security Considerations<br />
<a href="#anchor14">5.</a>&nbsp;
IANA Considerations<br />
<a href="#anchor15">6.</a>&nbsp;
Acknowledgments<br />
<a href="#rfc.references1">7.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">7.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">7.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>One of the approaches to use legacy applications<a class='info' href='#RFC5338'>[RFC5338]<span> (</span><span class='info'>Henderson, T., Nikander, P., and M. Komu, &ldquo;Using the Host Identity Protocol with Legacy Applications,&rdquo; September&nbsp;2008.</span><span>)</span></a> with Host Identity Protocol<a class='info' href='#RFC4423'>[RFC4423]<span> (</span><span class='info'>Moskowitz, R. and P. Nikander, &ldquo;Host Identity Protocol (HIP) Architecture,&rdquo; May&nbsp;2006.</span><span>)</span></a> is to use HIT as 
IPv6 address. The application may receive them from the nameserver, store 
internally and connect directly to a HIT. The HIP software would receive 
packet with HIT as a destination IPv6 address without any additional 
information about the current locator and therefore some HIT resolution 
service is needed in this case. This document suggests the DNS as a 
protocol to access such mapping databases in addition to a local list of 
Host Identities and Distributed Hash Tables (DHT) <a class='info' href='#I-D.ahrenholz-hiprg-dht'>[I&#8209;D.ahrenholz&#8209;hiprg&#8209;dht]<span> (</span><span class='info'>Ahrenholz, J., &ldquo;HIP DHT Interface,&rdquo; October&nbsp;2008.</span><span>)</span></a>.
</p>
<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", 
"SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this 
document are to be interpreted as described in RFC 2119<a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Domain names for HIT mappings</h3>

<p>Domain Name System is well-known to systems administrators and there 
is much experience with operations under high load. It also allows 
dynamic modifications and has low overhead when compared to many other 
protocols. It is used now, for example, to get IP address reputations 
from various blacklists.
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Preconfigured Domain</h3>

<p>The systems using this method MUST have the same domain 
pre-configured, for example hit-to-ip.example.net. If there are 
multiple parallel services with their own domains, the systems MUST have 
at least one of them in common to interoperate.
</p>
<p>A HIT is represented as a sequence of nibbles separated by dots and 
followed by the suffix similarly to IPv6 addresses in ip6.arpa<a class='info' href='#RFC3596'>[RFC3596]<span> (</span><span class='info'>Thomson, S., Huitema, C., Ksinant, V., and M. Souissi, &ldquo;DNS Extensions to Support IP Version 6,&rdquo; October&nbsp;2003.</span><span>)</span></a>. For example, the domain name corresponding to the 
HIT
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
2001:10:1234:5678:9abc:def0:1234:5678
</pre></div>
<p>would be
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
8.7.6.5.4.3.2.1.0.f.e.d.c.b.a.9.8.7.6.5.4.3.2.1.0.1.0.0.1.0.0.2.
                                                hit-to-ip.example.net
</pre></div>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
Listing IP Addresses of the System</h3>

<p>The A/AAAA resource record types MAY be used to specify the IP/IPv6 
addresses of the system. There MAY be multiple locators listed for a 
HIT.
</p>
<p>For example, the system with IP address 192.0.2.1 and IPv6 address 
2001:DB8::1 would have the following records
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
8.7.6.5.4.3.2.1.0.f.e.d.c.b.a.9.8.7.6.5.4.3.2.1.0.1.0.0.1.0.0.2.
                                              hit-to-ip.example.net.
  1     IN      A       192.0.2.1
8.7.6.5.4.3.2.1.0.f.e.d.c.b.a.9.8.7.6.5.4.3.2.1.0.1.0.0.1.0.0.2.
                                              hit-to-ip.example.net.
  1     IN      AAAA    2001:DB8::1
</pre></div>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3"></a><h3>2.3.&nbsp;
Listing host names</h3>

<p>The PTR resource record types MAY be used to specify name of the host 
using the Host Identity.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
8.7.6.5.4.3.2.1.0.f.e.d.c.b.a.9.8.7.6.5.4.3.2.1.0.1.0.0.1.0.0.2.
                                               hit-to-ip.example.net.
  86400 IN      PTR     alpha.example.com.
</pre></div>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.4"></a><h3>2.4.&nbsp;
Link to another domain</h3>

<p>The CNAME resource record types MAY be used to specify another domain 
to lookup the locators of the system.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
8.7.6.5.4.3.2.1.0.f.e.d.c.b.a.9.8.7.6.5.4.3.2.1.0.1.0.0.1.0.0.2.
                                               hit-to-ip.example.net.
  86400 IN      CNAME   8.7.6.5.4.3.2.1.0.f.e.d.c.b.a.9.8.7.6.5.
                    4.3.2.1.0.1.0.0.1.0.0.2.hit-to-ip.domain.example.
</pre></div>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.5"></a><h3>2.5.&nbsp;
Managing the Records</h3>

<p>The system MAY send DNS UPDATE<a class='info' href='#RFC2136'>[RFC2136]<span> (</span><span class='info'>Vixie, P., Thomson, S., Rekhter, Y., and J. Bound, &ldquo;Dynamic Updates in the Domain Name System (DNS UPDATE),&rdquo; April&nbsp;1997.</span><span>)</span></a> to the server 
provided by SOA MNAME field of the domain. The system MAY add or delete 
A,AAAA,PTR,CNAME records for its own HIT representation. The update MUST 
then originate from the corresponding HIT. If there are multiple 
identities they should be modified separately.
</p>
<p>The domain provided in SOA MNAME field of the preconfigured domain 
MUST have Host Identity of the server stored in DNS, the IP addresses 
MUST be listed in that domain using the suggested method and the server 
MUST accept DNS UPDATE messages, which add or delete A,AAAA,PTR,CNAME 
records for the HIT representation of the client after successful HIP 
base exchange. The HIP base exchange serves to authenticate the origin 
of the DNS UPDATE and server MUST refuse to perform the changes if the 
update is not originating from the host identity whose data is being 
updated.
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Usage scenarios</h3>

<p>The DNS selected as an interface should help in the deployment. There 
is vast number of resursive DNS resolvers available to the clients, they 
can cache mapping information, for example. This section contains ideas 
about different designs of the mapping service.
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Initial deployment</h3>

<p>Such global mapping service would be useful for the Host Identities 
that are not published for any domain name. It can be started up using 
the conventional DNS software with minor changes to authenticate DNS 
updates with HIP. There is hit-to-ip.net zone available for the 
experiments at the moment. According to the measurements<a class='info' href='#ISC-TN-2008-1'>[ISC&#8209;TN&#8209;2008&#8209;1]<span> (</span><span class='info'>Reid, B., &ldquo;BIND 9 performance while serving large zones under update,&rdquo; February&nbsp;2008.</span><span>)</span></a> BIND 9 is able to send 60,361 replies/second 
under update at 256 updates/sec over IXFR. The performance of DDNS 
updates was only 93.46 updates/second as they are committed to 
nonvolatile storage before the response is returned. The version of BIND 
compiled without the file-system commits performed 471.70 
updates/second. The performance of HIP implementations also limits the 
capacity, but about active 100,000 users may be served assuming 1 hour 
average update interval, if the peak performance is 100 updates/second. 
Number of mappings that fits into the memory of a modern server has to 
be studied.
</p>
<p>The TTL of the records is selected by the clients. If a Host 
Identity is used by a server with static IP addresses, its mappings may 
have long TTLs as any changes are scheduled in advance. This would allow 
the recursive resolvers to cache records of the frequently accessed 
static servers.
</p>
<p>Delegation of 1.0.0.1.0.0.2.ip6.arpa would allow reverse resolution 
of HIT to a host name by any system without any changes. The host name 
does not change often and such mapping may be updated only when needed. 

</p>
<p>Although the service may be started with existing DNS software, it is 
not optimal for such a usage pattern and another database engine 
allowing higher update rate is needed.
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Parallel services</h3>

<p>Although it is not desirable, there may be multiple independent 
mapping services. I.e. the host updates its IP addresses only in 
hit-to-ip.domain1.example, but has to look for IP addresses of an 
unknown host in hit-to-ip.domain1.example, hit-to-ip.domain2.example and 
hit-to-ip.domain3.example. This causes extra traffic due to multiple 
lookups.
</p>
<p>Another possibility is that the host updates its IP addresses in 
hit-to-ip.domain1.example, hit-to-ip.domain2.example and 
hit-to-ip.domain3.example, but chose only hit-to-ip.domain1.example to 
lookup unknown hosts. This would cause growth of all three databases 
with every new user and extra traffic due to multiple updates, but 
provides redundancy
</p>
<p>The delegation of domain for reverse mapping is unlikely in this case 
and would probably be blackholed similar to reverse subdomains for 
private-use netblocks <a class='info' href='#I-D.ietf-dnsop-as112-ops'>[I&#8209;D.ietf&#8209;dnsop&#8209;as112&#8209;ops]<span> (</span><span class='info'>Abley, J. and W. Maton, &ldquo;AS112 Nameserver Operations,&rdquo; November&nbsp;2008.</span><span>)</span></a> 

</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
Two-level mapping</h3>

<p>The flat identifiers do not have administrative division as in usual 
domain names and a single organization should serve all 
the identifiers. Therefore it is desirable to reduce its workload at the 
same time TTL of the records cannot be long to allow dynamic changes. 
Two-level design might help to solve this contradiction.
</p>
<p>The first level would contain only links (CNAME) to different second 
level mapping providers. Such information does not change often and can 
have long TTL. Furthermore in this case, it would be enough to store in 
memory only HIT and an index of the second level provider both in binary 
format. The second level mapping would contain dynamic information about 
the current IP addresses. For example, there may be the following 
records in the DNS:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
8.7.6.5.4.3.2.1.0.f.e.d.c.b.a.9.8.7.6.5.4.3.2.1.0.1.0.0.1.0.0.2.
                                        hit-to-ip.arpa.
  86400 IN      CNAME   8.7.6.5.4.3.2.1.0.f.e.d.c.b.a.9.8.7.6.5.
                  4.3.2.1.0.1.0.0.1.0.0.2.hit-to-ip.domain.example.

8.7.6.5.4.3.2.1.0.f.e.d.c.b.a.9.8.7.6.5.4.3.2.1.0.1.0.0.1.0.0.2.
                                        ip6.arpa.
  86400 IN      CNAME   8.7.6.5.4.3.2.1.0.f.e.d.c.b.a.9.8.7.6.5.
                  4.3.2.1.0.1.0.0.1.0.0.2.hit-to-host.domain.example.

8.7.6.5.4.3.2.1.0.f.e.d.c.b.a.9.8.7.6.5.4.3.2.1.0.1.0.0.1.0.0.2.
                                        hit-to-ip.domain.example.
  1     IN      A       192.0.2.1

8.7.6.5.4.3.2.1.0.f.e.d.c.b.a.9.8.7.6.5.4.3.2.1.0.1.0.0.1.0.0.2.
                                        hit-to-ip.domain.example.
  1     IN      AAAA    2001:DB8::1

8.7.6.5.4.3.2.1.0.f.e.d.c.b.a.9.8.7.6.5.4.3.2.1.0.1.0.0.1.0.0.2.
                                        hit-to-host.domain.example.
  86400 IN      PTR     alpha.example.com.
</pre></div>
<p>The information about frequently accessed static hosts may be 
available already at the first level.
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4"></a><h3>3.4.&nbsp;
Local mapping</h3>

<p>Such mapping does not have to be global. If the host has a domain 
name with HIP and A/AAAA records, for example
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
alpha.example.com.
  3600  IN      HIP     {2001:10:1234:5678:9abc:def0:1234:5678}
  3600  IN      A       192.0.2.1
  3600  IN      AAAA    2001:DB8::1
</pre></div>
<p>and a legacy application sends AAAA? query to its recursive 
nameserver, the nameserver may reply with 
2001:10:1234:5678:9abc:def0:1234:5678 in AAAA data and add the following 
domain name (unless it already exists):
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
8.7.6.5.4.3.2.1.0.f.e.d.c.b.a.9.8.7.6.5.4.3.2.1.0.1.0.0.1.0.0.2.
                                        hit-to-ip.domain.example.
  86400 IN      CNAME    alpha.example.com.
</pre></div>
<p>The application would send packets to 
2001:10:1234:5678:9abc:def0:1234:5678 and HIP software would be able to 
retrieve its current location from the local hit-to-ip mapping. The 
nameserver may remove the mapping sometimes, but it might be needed for 
a long time if the application stores 
2001:10:1234:5678:9abc:def0:1234:5678 internally. The same technique may 
be used with Local Scope Identifiers for IPv4 legacy applications.
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.5"></a><h3>3.5.&nbsp;
Link to mapping service</h3>

<p>Some users can change the records for their domain manually, but do 
not have DDNS updates. Then it would be usefull to publish data 
(including full Host Identity) in the mapping service and put CNAME for 
the domain name:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
alpha.example.com.        CNAME 8.7.6.5.4.3.2.1.0.f.e.d.c.b.a.9.
        8.7.6.5.4.3.2.1.0.1.0.0.1.0.0.2.hit-to-ip.domain.example.

8.7.6.5.4.3.2.1.0.f.e.d.c.b.a.9.8.7.6.5.4.3.2.1.0.1.0.0.1.0.0.2.
                                        hit-to-ip.domain.example.
  86400 IN      HIP       {2001:10:1234:5678:9abc:def0:1234:5678}

8.7.6.5.4.3.2.1.0.f.e.d.c.b.a.9.8.7.6.5.4.3.2.1.0.1.0.0.1.0.0.2.
                                        hit-to-ip.domain.example.
  1     IN      A       192.0.2.1

8.7.6.5.4.3.2.1.0.f.e.d.c.b.a.9.8.7.6.5.4.3.2.1.0.1.0.0.1.0.0.2.
                                        hit-to-ip.domain.example.
  1     IN      AAAA    2001:DB8::1
</pre></div>
<p>In this case, a legacy system would resolve the hostname to its IP 
addresses and would reach its current location, a HIP hosts would start 
HIP session. Any other dynamic DNS service may be used, if it allows HIP 
resource records.
</p>
<a name="Security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Security Considerations</h3>

<p>SHA1 is used now as a hash function to get HITs, but the complexity 
of an existing attack<a class='info' href='#SHA1-attack'>[SHA1&#8209;attack]<span> (</span><span class='info'>Schneier, B., &ldquo;New Cryptanalytic Results Against SHA-1,&rdquo; August&nbsp;2005.</span><span>)</span></a> is only 2**63. Since 
only HIT, but not complete HI is used for lookups, SHA1 should be phased 
out, for example, in favor of the SHA-2 variants. 
</p>
<p>The actions, when multiple hosts share the same identity and start to 
constantly update their mappings, should be discussed.
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
IANA Considerations</h3>

<p>This draft would require that the IANA delegates
1.0.0.1.0.0.2.IP6.ARPA subdomain and HIT-TO-IP.ARPA for the Host 
Identity Protocol usage.
</p>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Acknowledgments</h3>

<p>The authors would like to thank Tom Henderson and Miika Komu, who 
provided comments and helped to improve this document.
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>7.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2136">[RFC2136]</a></td>
<td class="author-text"><a href="mailto:paul@vix.com">Vixie, P.</a>, <a href="mailto:set@thumper.bellcore.com">Thomson, S.</a>, <a href="mailto:yakov@cisco.com">Rekhter, Y.</a>, and <a href="mailto:bound@zk3.dec.com">J. Bound</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2136">Dynamic Updates in the Domain Name System (DNS UPDATE)</a>,&rdquo; RFC&nbsp;2136, April&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2136.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2136.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2136.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4423">[RFC4423]</a></td>
<td class="author-text">Moskowitz, R. and P. Nikander, &ldquo;<a href="http://tools.ietf.org/html/rfc4423">Host Identity Protocol (HIP) Architecture</a>,&rdquo; RFC&nbsp;4423, May&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4423.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5338">[RFC5338]</a></td>
<td class="author-text">Henderson, T., Nikander, P., and M. Komu, &ldquo;<a href="http://tools.ietf.org/html/rfc5338">Using the Host Identity Protocol with Legacy Applications</a>,&rdquo; RFC&nbsp;5338, September&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5338.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>7.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ahrenholz-hiprg-dht">[I-D.ahrenholz-hiprg-dht]</a></td>
<td class="author-text">Ahrenholz, J., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ahrenholz-hiprg-dht-03.txt">HIP DHT Interface</a>,&rdquo; draft-ahrenholz-hiprg-dht-03 (work in progress), October&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-ahrenholz-hiprg-dht-03.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-dnsop-as112-ops">[I-D.ietf-dnsop-as112-ops]</a></td>
<td class="author-text">Abley, J. and W. Maton, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-dnsop-as112-ops-01.txt">AS112 Nameserver Operations</a>,&rdquo; draft-ietf-dnsop-as112-ops-01 (work in progress), November&nbsp;2008 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-dnsop-as112-ops-01.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="ISC-TN-2008-1">[ISC-TN-2008-1]</a></td>
<td class="author-text">Reid, B., &ldquo;<a href="http://new.isc.org/proj/dnsperf/ISC-TN-2008-1.html">BIND 9 performance while serving large zones under update</a>,&rdquo; February&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3596">[RFC3596]</a></td>
<td class="author-text">Thomson, S., Huitema, C., Ksinant, V., and M. Souissi, &ldquo;<a href="http://tools.ietf.org/html/rfc3596">DNS Extensions to Support IP Version 6</a>,&rdquo; RFC&nbsp;3596, October&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3596.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="SHA1-attack">[SHA1-attack]</a></td>
<td class="author-text">Schneier, B., &ldquo;<a href="http://www.schneier.com/blog/archives/2005/08/new_cryptanalyt.html">New Cryptanalytic Results Against SHA-1</a>,&rdquo; August&nbsp;2005.</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Oleg Ponomarev</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Helsinki Institute for Information Technology HIIT</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">PO Box 9800</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">TKK  FIN-02015</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:oleg.ponomarev@hiit.fi">oleg.ponomarev@hiit.fi</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Andrei Gurtov</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Helsinki Institute for Information Technology HIIT</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">PO Box 9800</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">TKK  FIN-02015</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:gurtov@cs.helsinki.fi">gurtov@cs.helsinki.fi</a></td></tr>
</table>
</body></html>
