<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>IPPM standard advancement testing</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.1.1" rel="Chapter" title="1.1 Requirements Language">
<link href="#rfc.section.2" rel="Chapter" title="2 Basic idea">
<link href="#rfc.section.3" rel="Chapter" title="3 Verification of conformance to a metric specification">
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 Tests of an individual implementation against a metric specification">
<link href="#rfc.section.3.2" rel="Chapter" title="3.2 Test setup resulting in identical live network testing conditions">
<link href="#rfc.section.3.3" rel="Chapter" title="3.3 Tests of two or more different implementations against a metric specification">
<link href="#rfc.section.3.4" rel="Chapter" title="3.4 Clock synchronisation">
<link href="#rfc.section.3.5" rel="Chapter" title="3.5 Recommended Metric Verification Measurement Process">
<link href="#rfc.section.3.6" rel="Chapter" title='3.6 Proposal to determine an "equivalence" threshold for each metric evaluated'>
<link href="#rfc.section.4" rel="Chapter" title="4 Acknowledgements">
<link href="#rfc.section.5" rel="Chapter" title="5 Contributors">
<link href="#rfc.section.6" rel="Chapter" title="6 IANA Considerations">
<link href="#rfc.section.7" rel="Chapter" title="7 Security Considerations">
<link href="#rfc.references" rel="Chapter" title="8 References">
<link href="#rfc.references.1" rel="Chapter" title="8.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="8.2 Informative References">
<link href="#rfc.appendix.Appendix%20A" rel="Chapter" title="Appendix A An example on a One-way Delay metric validation">
<link href="#rfc.appendix.Appendix%20A.1" rel="Chapter" title="Appendix A.1 Compliance to Metric specification requirements">
<link href="#rfc.appendix.Appendix%20A.2" rel="Chapter" title="Appendix A.2 Examples related to statistical tests for One-way Delay">
<link href="#rfc.appendix.Appendix%20B" rel="Chapter" title="Appendix B Anderson-Darling K-sample Reference and 2 sample C++ code">
<link href="#rfc.appendix.Appendix%20C" rel="Chapter" title="Appendix C Glossary">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="This document specifies tests to determine if multiple independent instantiations of a performance metric RFC have implemented the specifications in the same way. This is the performance metric equivalent of interoperability, required to advance RFCs along the standards track. Results from different implementations of metric RFCs will be collected under the same underlying network conditions and compared using state of the art statistical methods. The goal is an evaluation of the metric RFC itself, whether its definitions are clear and unambiguous to implementors and therefore a candidate for advancement on the IETF standards track." />
  <meta name="description" content="This document specifies tests to determine if multiple independent instantiations of a performance metric RFC have implemented the specifications in the same way. This is the performance metric equivalent of interoperability, required to advance RFCs along the standards track. Results from different implementations of metric RFCs will be collected under the same underlying network conditions and compared using state of the art statistical methods. The goal is an evaluation of the metric RFC itself, whether its definitions are clear and unambiguous to implementors and therefore a candidate for advancement on the IETF standards track." />
  <meta name="keywords" content="inter-operability, equivalence, measurement, compliance, metric" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Internet Engineering Task Force</td>
<td class="right">R. Geib, Ed.</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">Deutsche Telekom</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">A. Morton</td>
</tr>
<tr>
<td class="left">Expires: April 26, 2012</td>
<td class="right">AT&amp;T Labs</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">R. Fardid</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Cariden Technologies</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">A. Steinmitz</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Deutsche Telekom</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">October 24, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">IPPM standard advancement testing<br />
  <span class="filename">draft-ietf-ippm-metrictest-04</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This document specifies tests to determine if multiple independent instantiations of a performance metric RFC have implemented the specifications in the same way. This is the performance metric equivalent of interoperability, required to advance RFCs along the standards track. Results from different implementations of metric RFCs will be collected under the same underlying network conditions and compared using state of the art statistical methods. The goal is an evaluation of the metric RFC itself, whether its definitions are clear and unambiguous to implementors and therefore a candidate for advancement on the IETF standards track.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on April 26, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>1.1.   <a href="#rfc.section.1.1">Requirements Language</a>
</li>
<li>2.   <a href="#rfc.section.2">Basic idea</a>
</li>
<li>3.   <a href="#rfc.section.3">Verification of conformance to a metric specification</a>
</li>
<li>3.1.   <a href="#rfc.section.3.1">Tests of an individual implementation against a metric specification</a>
</li>
<li>3.2.   <a href="#rfc.section.3.2">Test setup resulting in identical live network testing conditions</a>
</li>
<li>3.3.   <a href="#rfc.section.3.3">Tests of two or more different implementations against a metric specification</a>
</li>
<li>3.4.   <a href="#rfc.section.3.4">Clock synchronisation</a>
</li>
<li>3.5.   <a href="#rfc.section.3.5">Recommended Metric Verification Measurement Process</a>
</li>
<li>3.6.   <a href="#rfc.section.3.6">Proposal to determine an "equivalence" threshold for each metric evaluated</a>
</li>
<li>4.   <a href="#rfc.section.4">Acknowledgements</a>
</li>
<li>5.   <a href="#rfc.section.5">Contributors</a>
</li>
<li>6.   <a href="#rfc.section.6">IANA Considerations</a>
</li>
<li>7.   <a href="#rfc.section.7">Security Considerations</a>
</li>
<li>8.   <a href="#rfc.references">References</a>
</li>
<li>8.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>8.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li>Appendix A.   <a href="#rfc.appendix.Appendix%20A">An example on a One-way Delay metric validation</a>
</li>
<li>Appendix A.1.   <a href="#rfc.appendix.Appendix%20A.1">Compliance to Metric specification requirements</a>
</li>
<li>Appendix A.2.   <a href="#rfc.appendix.Appendix%20A.2">Examples related to statistical tests for One-way Delay</a>
</li>
<li>Appendix B.   <a href="#rfc.appendix.Appendix%20B">Anderson-Darling K-sample Reference and 2 sample C++ code</a>
</li>
<li>Appendix C.   <a href="#rfc.appendix.Appendix%20C">Glossary</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">The Internet Standards Process <a href="#RFC2026">RFC2026 </a> <cite title="NONE">[RFC2026]</cite> requires that for a IETF specification to advance beyond the Proposed Standard level, at least two genetically unrelated implementations must be shown to interoperate correctly with all features and options. This requirement can be met by supplying:</p>

<ul>
<li>evidence that (at least a sub-set of) the specification has been implemented by multiple parties, thus indicating adoption by the IETF community and the extent of feature coverage.</li>
<li>evidence that each feature of the specification is sufficiently well-described to support interoperability, as demonstrated through testing and/or user experience with deployment.</li>
</ul>
<p id="rfc.section.1.p.2">In the case of a protocol specification, the notion of "interoperability" is reasonably intuitive - the implementations must successfully "talk to each other", while exercising all features and options. To achieve interoperability, two implementors need to interpret the protocol specifications in equivalent ways. In the case of IP Performance Metrics (IPPM), this definition of interoperability is only useful for test and control protocols like the One-Way Active Measurement Protocol, OWAMP <a href="#RFC4656">[RFC4656]</a>, and the Two-Way Active Measurement Protocol, TWAMP <a href="#RFC5357">[RFC5357]</a>.</p>
<p id="rfc.section.1.p.3">A metric specification RFC describes one or more metric definitions, methods of measurement and a way to report the results of measurement.  One example would be a way to test and report the One-way Delay that data packets incur while being sent from one network location to another, One-way Delay Metric.</p>
<p id="rfc.section.1.p.4">In the case of metric specifications, the conditions that satisfy the "interoperability" requirement are less obvious, and there was a need for IETF agreement on practices to judge metric specification "interoperability" in the context of the IETF Standards Process. This memo provides methods which should be suitable to evaluate metric specifications for standards track advancement. The methods proposed here MAY be generally applicable to metric specification RFCs beyond those developed under the IPPM Framework <a href="#RFC2330">[RFC2330]</a>.</p>
<p id="rfc.section.1.p.5">Since many implementations of IP metrics are embedded in measurement systems that do not interact with one another (they were built before OWAMP and TWAMP), the interoperability evaluation called for in the IETF standards process cannot be determined by observing that independent implementations interact properly for various protocol exchanges.  Instead, verifying that different implementations give statistically equivalent results under controlled measurement conditions takes the place of interoperability observations. Even when evaluating OWAMP and TWAMP RFCs for standards track advancement, the methods described here are useful to evaluate the measurement results because their validity would not be ascertained in typical interoperability testing.</p>
<p id="rfc.section.1.p.6">The standards advancement process aims at producing confidence that the metric definitions and supporting material are clearly worded and unambiguous, or reveals ways in which the metric definitions can be revised to achieve clarity. The process also permits identification of options that were not implemented, so that they can be removed from the advancing specification. Thus, the product of this process is information about the metric specification RFC itself: determination of the specifications or definitions that are clear and unambiguous and those that are not (as opposed to an evaluation of the implementations which assist in the process).</p>
<p id="rfc.section.1.p.7">This document defines a process to verify that implementations (or practically, measurement systems) have interpreted the metric specifications in equivalent ways, and produce equivalent results.</p>
<p id="rfc.section.1.p.8">Testing for statistical equivalence requires ensuring identical test setups (or awareness of differences) to the best possible extent. Thus, producing identical test conditions is a core goal of the memo. Another important aspect of this process is to test individual implementations against specific requirements in the metric specifications using customized tests for each requirement. These tests can distinguish equivalent interpretations of each specific requirement.</p>
<p id="rfc.section.1.p.9">Conclusions on equivalence are reached by two measures.</p>
<p id="rfc.section.1.p.10">First, implementations are compared against individual metric specifications to make sure that differences in implementation are minimised or at least known.</p>
<p id="rfc.section.1.p.11">Second, a test setup is proposed ensuring identical networking conditions so that unknowns are minimized and comparisons are simplified. The resulting separate data sets may be seen as samples taken from the same underlying distribution. Using state of the art statistical methods, the equivalence of the results is verified. To illustrate application of the process and methods defined here, evaluation of the <a href="#RFC2679">One-way Delay Metric </a> <cite title="NONE">[RFC2679]</cite> is provided in an Appendix. While test setups will vary with the metrics to be validated, the general methodology of determining equivalent results will not. Documents defining test setups to evaluate other metrics should be developed once the process proposed here has been agreed and approved.</p>
<p id="rfc.section.1.p.12">The metric RFC advancement process begins with a request for protocol action accompanied by a memo that documents the supporting tests and results. The procedures of <a href="#RFC2026">[RFC2026]</a> are expanded in<a href="#RFC5657">[RFC5657]</a>, including sample implementation and interoperability reports. Section 3 of <a href="#morton-advance-metrics-01">[morton-advance-metrics-01]</a> can serve as a template for a metric RFC report which accompanies the protocol action request to the Area Director, including description of the test set-up, procedures, results for each implementation and conclusions.</p>
<p id="rfc.section.1.p.13">Changes from WG-03 to WG-04:</p>

<ul><li>Revisions to Appendix B code and add reference to "R" in the Appendix and the text of section 3.6.</li></ul>
<p id="rfc.section.1.p.14">Changes from WG-02 to WG-03:</p>

<ul>
<li>Changes stemming from experiments that implemented this plan, in general.</li>
<li>Adoption of the VLAN loopback figure in the main body of the memo (section 3.2).</li>
</ul>
<p id="rfc.section.1.p.15">Changes from WG-01 to WG-02:</p>
<p></p>

<ul>
<li>Clarification of the number of test streams recommended in section 3.2.</li>
<li>Clarifications on testing details in sections 3.3 and 3.4.</li>
<li>Spelling corrections throughout.</li>
</ul>
<p id="rfc.section.1.p.17">Changes from WG -00 to WG -01 draft</p>
<p></p>

<ul>
<li>Discussion on merits and requirements of a distributed lab test using only local load generators.</li>
<li>Proposal of metrics suitable for tests using the proposed measurement configuration.</li>
<li>Hint on delay caused by software based L2TPv3 implementation.</li>
<li>Added an appendix with a test configuration allowing remote tests comparing different implementations across the network.</li>
<li>Proposal for maximum error of "equivalence", based on performance comparison of identical implementations. This may be useful for both ADK and non-ADK comparisons.</li>
</ul>
<p id="rfc.section.1.p.19">Changes from prior ID -02 to WG -00 draft</p>
<p></p>

<ul>
<li>Incorporation of aspects of reporting to support the protocol action request in the Introduction and section 3.5</li>
<li>Overhaul of section 3.2 regarding tunneling: Added generic tunneling requirements and L2TPv3 as an example tunneling mechanism fulfilling the tunneling requirements. Removed and adapted some of the prior references to other tunneling protocols</li>
<li>Softened a requirement within section 3.4 (MUST to SHOULD on precision) and removed some comments of the authors.</li>
<li>Updated contact information of one author and added a new author.</li>
<li>Added example C++ code of an Anderson-Darling two sample test implementation.</li>
</ul>
<p id="rfc.section.1.p.21">Changes from ID -01 to ID -02 version</p>
<p></p>

<ul>
<li>Major editorial review, rewording and clarifications on all contents.</li>
<li>Additional text on parallel testing using VLANs and GRE or Pseudowire tunnels.</li>
<li>Additional examples and a glossary.</li>
</ul>
<p id="rfc.section.1.p.23">Changes from ID -00 to ID -01 version</p>
<p></p>

<ul>
<li>Addition of a comparison of individual metric implementations against the metric specification (trying to pick up <a href="#morton-advance-metrics">problems and solutions for metric advancement</a> <cite title="NONE">[morton-advance-metrics]</cite>).</li>
<li>More emphasis on the requirement to carefully design and document the measurement setup of the metric comparison.</li>
<li>Proposal of testing conditions under identical WAN network conditions using IP in IP tunneling or Pseudo Wires and parallel measurement streams.</li>
<li>Proposing the requirement to document the smallest resolution at which an ADK test was passed by 95%. As no minimum resolution is specified, IPPM metric compliance is not linked to a particular performance of an implementation.</li>
<li>Reference to RFC 2330 and RFC 2679 for the 95% confidence interval as preferred criterion to decide on statistical equivalence</li>
<li>Reducing the proposed statistical test to ADK with 95% confidence.</li>
</ul>
<h1 id="rfc.section.1.1">
<a href="#rfc.section.1.1">1.1.</a> Requirements Language</h1>
<p id="rfc.section.1.1.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">RFC 2119</a> <cite title="NONE">[RFC2119]</cite>.</p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> Basic idea</h1>
<p id="rfc.section.2.p.1">The implementation of a standard compliant metric is expected to meet the requirements of the related metric specification. So before comparing two metric implementations, each metric implementation is individually compared against the metric specification.</p>
<p id="rfc.section.2.p.2">Most metric specifications leave freedom to implementors on non-fundamental aspects of an individual metric (or options). Comparing different measurement results using a statistical test with the assumption of identical test path and testing conditions requires knowledge of all differences in the overall test setup. Metric specification options chosen by implementors have to be documented. It is REQUIRED to use identical implementation options wherever possible for any test proposed here. Calibrations proposed by metric standards should be performed to further identify (and possibly reduce) potential sources of errors in the test setup.</p>
<p id="rfc.section.2.p.3">The Framework for <a href="#RFC2330">IP Performance Metrics </a> <cite title="NONE">[RFC2330]</cite> expects that a "methodology for a metric should have the property that it is repeatable: if the methodology is used multiple times under identical conditions, it should result in consistent measurements." This means an implementation is expected to repeatedly measure a metric with consistent results (repeatability with the same result). Small deviations in the test setup are expected to lead to small deviations in results only. To characterise statistical equivalence in the case of small deviations, RFC 2330 <a href="#RFC2679">and </a> <cite title="NONE">[RFC2679]</cite> suggest to apply a 95% confidence interval. Quoting RFC 2679, "95 percent was chosen because ... a particular confidence level should be specified so that the results of independent implementations can be compared."</p>
<p id="rfc.section.2.p.4">Two different implementations are expected to produce statistically equivalent results if they both measure a metric under the same networking conditions. Formulating in statistical terms: separate metric implementations collect separate samples from the same underlying statistical process (the same network conditions). The statistical hypothesis to be tested is the expectation that both samples do not expose statistically different properties. This requires careful test design:</p>
<p></p>

<ul>
<li>The measurement test setup must be self-consistent to the largest possible extent. To minimize the influence of the test and measurement setup on the result, network conditions and paths MUST be identical for the compared implementations to the largest possible degree. This includes both the stability and non-ambiguity of routes taken by the measurement packets. See RFC 2330 for a discussion on self-consistency.</li>
<li>To minimize the influence of implementation options on the result, metric implementations SHOULD use identical options and parameters for the metric under evaluation.</li>
<li>The error induced by the sample size must be small enough to minimize its influence on the test result. This may have to be respected, especially if two implementations measure with different average probing rates.</li>
<li>The implementation with the lowest probing frequency determines the smallest temporal interval for which samples can be compared.</li>
<li>Repeat comparisons with several independent metric samples to avoid random indications of compatibility (or the lack of it).</li>
</ul>
<p id="rfc.section.2.p.6">The metric specifications themselves are the primary focus of evaluation, rather than the implementations of metrics. The documentation produced by the advancement process should identify which metric definitions and supporting material were found to be clearly worded and unambiguous, OR, it should identify ways in which the metric specification text should be revised to achieve clarity and unified interpretation.</p>
<p id="rfc.section.2.p.7">The process should also permit identification of options that were not implemented, so that they can be removed from the advancing specification (this is an aspect more typical of protocol advancement along the standards track).</p>
<p id="rfc.section.2.p.8">Note that this document does not propose to base interoperability indications of performance metric implementations on comparisons of individual singletons. Individual singletons may be impacted by many statistical effects while they are measured. Comparing two singletons of different implementations may result in failures with higher probability than comparing samples.</p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> Verification of conformance to a metric specification</h1>
<p id="rfc.section.3.p.1">This section specifies how to verify compliance of two or more IPPM implementations against a metric specification. This document only proposes a general methodology. Compliance criteria to a specific metric implementation need to be defined for each individual metric specification. The only exception is the statistical test comparing two metric implementations which are simultaneously tested. This test is applicable without metric specific decision criteria.</p>
<p id="rfc.section.3.p.2">Several testing options exist to compare two or more implementations:</p>
<p></p>

<ul>
<li>Use a single test lab to compare the implementations and emulate the Internet with an impairment generator.</li>
<li>Use a single test lab to compare the implementations and measure across the Internet.</li>
<li>Use remotely separated test labs to compare the implementations and emulate the Internet with two "identically" configured impairment generators.</li>
<li>Use remotely separated test labs to compare the implementations and measure across the Internet.</li>
<li>Use remotely separated test labs to compare the implementations and measure across the Internet and include a single impairment generator to impact all measurement flows in non discriminatory way.</li>
</ul>
<p id="rfc.section.3.p.4">The first two approaches work, but cause higher expenses than the other ones (due to travel and/or shipping+installation). For the third option, ensuring two identically configured impairment generators requires well defined test cases and possibly identical hard- and software.</p>
<p id="rfc.section.3.p.5">As documented in a <a href="#morton-testplan-rfc2679">test report</a> <cite title="NONE">[morton-testplan-rfc2679]</cite>, the last option was required to prove compatibility of two delay metric implementations. An impairment generator is probably required when testing compatibility of most other metrics and it therefore RECOMMENDED to include an impairment generator in metric test set ups.</p>
<h1 id="rfc.section.3.1">
<a href="#rfc.section.3.1">3.1.</a> Tests of an individual implementation against a metric specification</h1>
<p id="rfc.section.3.1.p.1">A metric implementation MUST support the requirements classified as "MUST" and "REQUIRED" of the related metric specification to be compliant to the latter.</p>
<p id="rfc.section.3.1.p.2">Further, supported options of a metric implementation SHOULD be documented in sufficient detail. The documentation of chosen options is RECOMMENDED to minimise (and recognise) differences in the test setup if two metric implementations are compared. Further, this documentation is used to validate and improve the underlying metric specification option, to remove options which saw no implementation or which are badly specified from the metric specification to be promoted to a standard. This documentation SHOULD be made for all implementation-relevant specifications of a metric picked for a comparison that are not explicitly marked as "MUST" or "REQUIRED" in the RFC text. This applies for the following sections of all metric specifications:</p>
<p></p>

<ul>
<li>Singleton Definition of the Metric.</li>
<li>Sample Definition of the Metric.</li>
<li>Statistics Definition of the Metric. As statistics are compared by the test specified here, this documentation is required even in the case, that the metric specification does not contain a Statistics Definition.</li>
<li>Timing and Synchronisation related specification (if relevant for the Metric).</li>
<li>Any other technical part present or missing in the metric specification, which is relevant for the implementation of the Metric.</li>
</ul>
<p id="rfc.section.3.1.p.4">RFC2330 and RFC2679 emphasise precision as an aim of IPPM metric implementations. A single IPPM conformant implementation MUST under otherwise identical network conditions produce precise results for repeated measurements of the same metric.</p>
<p id="rfc.section.3.1.p.5">RFC 2330 prefers the "empirical distribution function" EDF to describe collections of measurements. RFC 2330 determines, that "unless otherwise stated, IPPM goodness-of-fit tests are done using 5% significance." The goodness of fit test determines by which precision two or more samples of a metric implementation belong to the same underlying distribution (of measured network performance events). The goodness of fit test suggested for the metric test is the <a href="#ADK">Anderson-Darling K sample test (ADK sample test, K stands for the number of samples to be compared) </a> <cite title="NONE">[ADK]</cite>. Please note that RFC 2330 and RFC 2679 apply an Anderson Darling goodness of fit test too.</p>
<p id="rfc.section.3.1.p.6">The results of a repeated test with a single implementation MUST pass an ADK sample test with confidence level of 95%. The conditions for which the ADK test has been passed with the specified confidence level MUST be documented. To formulate this differently: The requirement is to document the set of parameters with the smallest deviation, at which the results of the tested metric implementation pass an ADK test with a confidence level of 95%. The minimum resolution available in the reported results from each implementation MUST be taken into account in the ADK test.</p>
<p id="rfc.section.3.1.p.7">The test conditions which MUST be documented for a passed metric test include:</p>
<p></p>

<ul>
<li>The metric resolution at which a test was passed (e.g. the resolution of timestamps)</li>
<li>The parameters modified by an impairment generator.</li>
<li>The impairment generator parameter settings.</li>
</ul>
<h1 id="rfc.section.3.2">
<a href="#rfc.section.3.2">3.2.</a> Test setup resulting in identical live network testing conditions</h1>
<p id="rfc.section.3.2.p.1">Two major issues complicate tests for metric compliance across live networks under identical testing conditions. One is the general point that metric definition implementations cannot be conveniently examined in field measurement scenarios. The other one is more broadly described as "parallelism in devices and networks", including mechanisms like those that achieve load balancing (<a href="#RFC4928">see </a> <cite title="NONE">[RFC4928]</cite>).</p>
<p id="rfc.section.3.2.p.2">This section proposes two measures to deal with both issues.  Tunneling mechanisms can be used to avoid parallel processing of different flows in the network. Measuring by separate parallel probe flows results in repeated collection of data. If both measures are combined, WAN network conditions are identical for a number of independent measurement flows, no matter what the network conditions are in detail.</p>
<p id="rfc.section.3.2.p.3">Any measurement setup MUST be made to avoid the probing traffic itself to impede the metric measurement. The created measurement load MUST NOT result in congestion at the access link connecting the measurement implementation to the WAN. The created measurement load MUST NOT overload the measurement implementation itself, e.g., by causing a high CPU load or by creating imprecisions due to internal transmit (receive respectively) probe packet collisions.</p>
<p id="rfc.section.3.2.p.4">Tunneling multiple flows reaching a network element on a single physical port may allow to transmit all packets of the tunnel via the same path. Applying tunnels to avoid undesired influence of standard routing for measurement purposes is a concept known from literature, see e.g. <a href="#GU+Duffield">GRE encapsulated multicast probing</a> <cite title="NONE">[GU+Duffield]</cite>. An existing IP in IP tunnel protocol can be applied to avoid Equal-Cost Multi-Path (ECMP) routing of different measurement streams if it meets the following criteria:</p>
<p></p>

<ul>
<li>Inner IP packets from different measurement implementations are mapped into a single tunnel with single outer IP origin and destination address as well as origin and destination port numbers which are identical for all packets.</li>
<li>An easily accessible commodity tunneling protocol allows to carry out a metric test from more test sites.</li>
<li>A low operational overhead may enable a broader audience to set up a metric test with the desired properties.</li>
<li>The tunneling protocol should be reliable and stable in set up and operation to avoid disturbances or influence on the test results.</li>
<li>The tunneling protocol should not incur any extra cost for those interested in setting up a metric test.</li>
</ul>
<p id="rfc.section.3.2.p.6">An illustration of a test setup with two layer 2 tunnels and two flows between two linecards of one implementation is given in <a href="#Figure%201">Figure 1</a>.</p>
<div id="#rfc.figure.1"></div>
<div id="#Figure 1"></div>
<p></p>
<pre>
       
        Implementation                   ,---.       +--------+
                            +~~~~~~~~~~~/     \~~~~~~| Remote |
         +-------&gt;-----F2-&gt;-|          /       \     |-&gt;---+  |
         | +---------+      | Tunnel 1(         )    |     |  |  
         | | transmit|-F1-&gt;-|         (         )    |-&gt;+  |  |
         | | LC1     |      +~~~~~~~~~|         |~~~~|  |  |  |
         | | receive |-&lt;--+           (         )    | F1  F2 |
         | +---------+    |           |Internet |    |  |  |  |
         *-------&lt;-----+  F2          |         |    |  |  |  |
           +---------+ |  | +~~~~~~~~~|         |~~~~|  |  |  |
           | transmit|-*  *-|         |         |    |--+&lt;-*  |
           | LC2     |      | Tunnel 2(         )    |  |     |
           | receive |-&lt;-F1-|          \       /     |&lt;-*     |     
           +---------+      +~~~~~~~~~~~\     /~~~~~~| Router |
                                         `-+-'       +--------+
        </pre>
<p>Illustration of a test setup with two layer 2 tunnels.  For simplicity, only two linecards of one implementation and two flows F between them are shown.</p>
<p><a href="#Figure%202">Figure 2</a> shows the network elements required to set up layer 2 tunnels as shown by figure 1.</p>
<div id="#rfc.figure.2"></div>
<div id="#Figure 2"></div>
<p></p>
<pre>
       
         Implementation

         +-----+                   ,---.                
         | LC1 |                  /     \               
         +-----+                 /       \              +------+
            |        +-------+  (         )  +-------+  |Remote|
         +--------+  |       |  |         |  |       |  |      |
         |Ethernet|  | Tunnel|  |Internet |  | Tunnel|  |      |
         |Switch  |--| Head  |--|         |--| Head  |--|      |
         +--------+  | Router|  |         |  | Router|  |      |
            |        |       |  (         )  |       |  |Router|
         +-----+     +-------+   \       /   +-------+  +------+ 
         | LC2 |                  \     /               
         +-----+                   `-+-'                        </pre>
<p>Illustration of a hardware setup to realise the test setup illustrated by figure 1 with layer 2 tunnels or Pseudowires.</p>
<p id="rfc.section.3.2.p.8">The test set up successfully used during a <a href="#morton-testplan-rfc2679">delay metric test</a> <cite title="NONE">[morton-testplan-rfc2679]</cite> is given as an example in figure 3. Note that the shown set up allows a metric test between two remote sites.</p>
<div id="#rfc.figure.3"></div>
<div id="#Figure 3"></div>
<p></p>
<pre>
     
        +----+  +----+                                +----+  +----+
        |LC10|  |LC11|           ,---.                |LC20|  |LC21|  
        +----+  +----+          /     \    +-------+  +----+  +----+  
          | V10  | V11         /       \   | Tunnel|   | V20   |  V21
          |      |            (         )  | Head  |   |       |
         +--------+  +------+ |         |  | Router|__+----------+
         |Ethernet|  |Tunnel| |Internet |  +---B---+  |Ethernet  |
         |Switch  |--|Head  |-|         |      |      |Switch    |
         +-+--+---+  |Router| |         |  +---+---+  +--+--+----+
           |__|      +--A---+ (         )--|Option.|     |__|     
                               \       /   |Impair.|         
         Bridge                 \     /    |Gener. |     Bridge
         V20 to V21              `-+-?     +-------+     V10 to V11        

     
    </pre>
<p></p>
<p id="rfc.section.3.2.p.9">In figure 3, LC10 identify measurement clients /line cards. V10 and the others denote VLANs. All VLANs are using the same tunnel from A to B and in the reverse direction. The remote site VLANs are U-bridged at the local site Ethernet switch. The measurement packets of site 1 travel tunnel A-&gt;B first, are U-bridged at site 2 and travel tunnel B-&gt;A second. Measurement packets of site 2 travel tunnel B-&gt;A first, are U-bridged at site 1 and travel tunnel A-&gt;B second. So all measurement packets pass the same tunnel segments, but in different segment order.</p>
<p id="rfc.section.3.2.p.10">If tunneling is applied, two tunnels MUST carry all test traffic in between the test site and the remote site. For example, if 802.1Q Ethernet Virtual LANs (VLAN) are applied and the measurement streams are carried in different VLANs, the IP tunnel or Pseudo Wires respectively MUST be set up in physical port mode to avoid set up of Pseudo Wires per VLAN (which may see different paths due to ECMP routing), see RFC 4448. The remote router and the Ethernet switch shown in figure 3 has to support 802.1Q in this set up.</p>
<p id="rfc.section.3.2.p.11">The IP packet size of the metric implementation SHOULD be chosen small enough to avoid fragmentation due to the added Ethernet and tunnel headers. Otherwise, the impact of tunnel overhead on fragmentation and interface MTU size MUST be understood and taken into account (see <a href="#RFC4459">[RFC4459]</a>).</p>
<p id="rfc.section.3.2.p.12">An Ethernet port mode IP tunnel carrying several 802.1Q VLANs each containing measurement traffic of a single measurement system was successfully applied when testing compatibility of <a href="#morton-testplan-rfc2679">two metric implementations</a> <cite title="NONE">[morton-testplan-rfc2679]</cite>.</p>
<p id="rfc.section.3.2.p.13">The following headers may have to be accounted for when calculating total packet length, if VLANs and Ethernet over L2TPv3 tunnels are applied:</p>
<p></p>

<ul>
<li>Ethernet 802.1Q: 22 Byte.</li>
<li>L2TPv3 Header: 4-16 Byte for L2TPv3 data messages over IP; 16-28 Byte for L2TPv3 data messages over UDP.</li>
<li>IPv4 Header (outer IP header): 20 Byte.</li>
<li>MPLS Labels may be added by a carrier. Each MPLS Label has a length of 4 Bytes. By the time of writing, between 1 and 4 Labels seems to be a fair guess of what's expectable.</li>
</ul>
<p id="rfc.section.3.2.p.15">The applicability of one or more of the following tunneling protocols may be investigated by interested parties if Ethernet over L2TPv3 is felt to be not suitable: <a href="#RFC2003">IP in IP</a> <cite title="NONE">[RFC2003]</cite> or <a href="#RFC2784">Generic Routing Encapsulation (GRE)</a> <cite title="NONE">[RFC2784]</cite>. <a href="#RFC4928">RFC 4928</a> <cite title="NONE">[RFC4928]</cite> proposes measures how to avoid ECMP treatment in MPLS networks.</p>
<p id="rfc.section.3.2.p.16">L2TP is a commodity tunneling protocol <a href="#RFC2661">[RFC2661]</a>. By the time of writing, L2TPv3 <a href="#RFC3931">[RFC3931]</a>is the latest version of L2TP. If L2TPv3 is applied, software based implementations of this protocol are not suitable for the test set up, as such implementations may cause incalculable delay shifts.</p>
<p id="rfc.section.3.2.p.17">Ethernet Pseudo Wires may also be set up on <a href="#RFC4448">MPLS networks</a> <cite title="NONE">[RFC4448]</cite>. While there's no technical issue with this solution, MPLS interfaces are mostly found in the network provider domain. Hence not all of the above criteria to select a tunneling protocol are met.</p>
<p id="rfc.section.3.2.p.18">Note that setting up a metric test environment isn't a plug and play issue. Skilled networking engineers should be consulted and involved, if a set up between remote sites is preferred.</p>
<p id="rfc.section.3.2.p.19">Passing or failing an ADK test with 2 samples could be a random result (note that <a href="#RFC2330">[RFC2330]</a> defines a sample as a set of singleton metric values produced by a measurement stream, and we continue to use this terminology here). The error margin of a statistical test is higher if the number of samples it is based on is low (the number of samples taken influences the so called "degree of freedom" of a statistical test and a higher degree of freedom produces more reliable results). To pass ADK with higher probability, the number of samples collected per implementation under identical networking conditions SHOULD be greater than 2. Hardware and load constraints may enforce an upper limit on the number of simultaneous measurement streams. The ADK test allows one to combine different samples (see <a href="#ADK">section 9</a> <cite title="NONE">[ADK]</cite>) and then to run a two sample test between combined samples. At least 4 samples per implementation captured under identical networking conditions is RECOMMENDED when comparing different metric implementations by a statistical test.</p>
<p id="rfc.section.3.2.p.20">It is RECOMMENDED that tests be carried out by establishing N different parallel measurement flows. Two or three linecards per implementation serving to send or receive measurement flows should be sufficient to create 4 or more parallel measurement flows. Other options are to separate flows by DiffServ marks (without deploying any QoS in the inner or outer tunnel) or using a single CBR flow and evaluating every n-th singleton to belong to a specific measurement flow. Note that a practical test indeed showed that ADK was passed with 4 samples even if a 2 sample test failed<a href="#morton-testplan-rfc2679">[morton-testplan-rfc2679]</a>.</p>
<p id="rfc.section.3.2.p.21">Some additional guidelines to calculate and compare samples to perform a metric test are:</p>
<p></p>

<ul>
<li>To compare different probes of a common underlying distribution in terms of metrics characterising a communication network requires to respect the temporal nature for which the assumption of common underlying distribution may hold. Any singletons or samples to be compared MUST be captured within the same time interval.</li>
<li>If statistical events like rates are used to characterise measured metrics of a time-interval, its RECOMMENDED to pick as a minimum 5 singletons of a relevant metric to ensure a minimum confidence into the reported value. The error margin of the determined rate depends on the number singletons (refer to statistical textbooks on Student's t-test). As an example, any packet loss measurement interval to be compared with the results of another implementation contains at least five lost packets to have some confidence that the observed loss rate wasn't caused by a small number of random packet drops.</li>
<li>The minimum number of singletons or samples to be compared by an Anderson-Darling test SHOULD be 100 per tested metric implementation. Note that the Anderson-Darling test detects small differences in distributions fairly well and will fail for high number of compared results (RFC2330 mentions an example with 8192 measurements where an Anderson-Darling test always failed).</li>
<li>Generally, the Anderson-Darling test is sensitive to differences in the accuracy or bias associated with varying implementations or test conditions. These dissimilarities may result in differing averages of samples to be compared. An example may be different packet sizes, resulting in a constant delay difference between compared samples. Therefore samples to be compared by an Anderson Darling test MAY be calibrated by the difference of the average values of the samples. Any calibration of this kind MUST be documented in the test result.</li>
</ul>
<h1 id="rfc.section.3.3">
<a href="#rfc.section.3.3">3.3.</a> Tests of two or more different implementations against a metric specification</h1>
<p id="rfc.section.3.3.p.1">RFC2330 expects "a methodology for a given metric [to] exhibit continuity if, for small variations in conditions, it results in small variations in the resulting measurements. Slightly more precisely, for every positive epsilon, there exists a positive delta, such that if two sets of conditions are within delta of each other, then the resulting measurements will be within epsilon of each other." A small variation in conditions in the context of the metric test proposed here can be seen as different implementations measuring the same metric along the same path.</p>
<p id="rfc.section.3.3.p.2">IPPM metric specifications however allow for implementor options to the largest possible degree. It cannot be expected that two implementors allow 100% identical options in their implementations.  Testers SHOULD to the highest degree possible pick the same configurations for their systems when comparing their implementations by a metric test.</p>
<p id="rfc.section.3.3.p.3">In some cases, a goodness of fit test may not be possible or show disappointing results. To clarify the difficulties arising from different implementation options, the individual options picked for every compared implementation SHOULD be documented in sufficient detail. Based on this documentation, the underlying metric specification should be improved before it is promoted to a standard.</p>
<p id="rfc.section.3.3.p.4">The same statistical test as applicable to quantify precision of a single metric implementation MUST be used to compare metric result equivalence for different implementations. To document compatibility, the smallest measurement resolution at which the compared implementations passed the ADK sample test MUST be documented.</p>
<p id="rfc.section.3.3.p.5">For different implementations of the same metric, "variations in conditions" are reasonably expected. The ADK test comparing samples of the different implementations MAY result in a lower precision than the test for precision in the same-implementation comparison.</p>
<h1 id="rfc.section.3.4">
<a href="#rfc.section.3.4">3.4.</a> Clock synchronisation</h1>
<p id="rfc.section.3.4.p.1">Clock synchronization effects require special attention. Accuracy of one-way active delay measurements for any metrics implementation depends on clock synchronization between the source and destination of tests. Ideally, one-way active delay measurement (<a href="#RFC2679">RFC 2679,</a> <cite title="NONE">[RFC2679]</cite>) test endpoints either have direct access to independent GPS or CDMA-based time sources or indirect access to nearby NTP primary (stratum 1) time sources, equipped with GPS receivers. Access to these time sources may not be available at all test locations associated with different Internet paths, for a variety of reasons out of scope of this document.</p>
<p id="rfc.section.3.4.p.2">When secondary (stratum 2 and above) time sources are used with NTP running across the same network, whose metrics are subject to comparative implementation tests, network impairments can affect clock synchronization, distort sample one-way values and their interval statistics. It is RECOMMENDED to discard sample one-way delay values for any implementation, when one of the following reliability conditions is met:</p>
<p></p>

<ul>
<li>Delay is measured and is finite in one direction, but not the other.</li>
<li>Absolute value of the difference between the sum of one-way measurements in both directions and round-trip measurement is greater than X% of the latter value.</li>
</ul>
<p id="rfc.section.3.4.p.4">Examination of the second condition requires RTT measurement for reference, e.g., based on TWAMP (RFC5357, <a href="#RFC5357">RFC 5357</a> <cite title="NONE">[RFC5357]</cite>), in conjunction with one-way delay measurement.</p>
<p id="rfc.section.3.4.p.5">Specification of X% to strike a balance between identification of unreliable one-way delay samples and misidentification of reliable samples under a wide range of Internet path RTTs probably requires further study.</p>
<p id="rfc.section.3.4.p.6">An IPPM compliant metric implementation of an RFC that requires synchronized clocks is expected to provide precise measurement results.</p>
<p id="rfc.section.3.4.p.7">IF an implementation publishes a specification of its precision, such as "a precision of 1 ms (+/- 500 us) with a confidence of 95%", then the specification SHOULD be met over a useful measurement duration. For example, if the metric is measured along an Internet path which is stable and not congested, then the precision specification SHOULD be met over durations of an hour or more.</p>
<h1 id="rfc.section.3.5">
<a href="#rfc.section.3.5">3.5.</a> Recommended Metric Verification Measurement Process</h1>
<p id="rfc.section.3.5.p.1">In order to meet their obligations under the IETF Standards Process the IESG must be convinced that each metric specification advanced to Draft Standard or Internet Standard status is clearly written, that there are a sufficient number of verified equivalent implementations, and that options that have been implemented are documented.</p>
<p id="rfc.section.3.5.p.2">In the context of this document, metrics are designed to measure some characteristic of a data network. An aim of any metric definition should be that it should be specified in a way that can reliably measure the specific characteristic in a repeatable way across multiple independent implementations.</p>
<p id="rfc.section.3.5.p.3">Each metric, statistic or option of those to be validated MUST be compared against a reference measurement or another implementation by as specified by this document.</p>
<p id="rfc.section.3.5.p.4">Finally, the metric definitions, embodied in the text of the RFCs, are the objects that require evaluation and possible revision in order to advance to the next step on the standards track.</p>
<p id="rfc.section.3.5.p.5">IF two (or more) implementations do not measure an equivalent metric as specified by this document,</p>
<p id="rfc.section.3.5.p.6">AND sources of measurement error do not adequately explain the lack of agreement,</p>
<p id="rfc.section.3.5.p.7">THEN the details of each implementation should be audited along with the exact definition text, to determine if there is a lack of clarity that has caused the implementations to vary in a way that affects the correspondence of the results.</p>
<p id="rfc.section.3.5.p.8">IF there was a lack of clarity or multiple legitimate interpretations of the definition text,</p>
<p id="rfc.section.3.5.p.9">THEN the text should be modified and the resulting memo proposed for consensus and (possible) advancement along the standards track.</p>
<p id="rfc.section.3.5.p.10">Finally, all the findings MUST be documented in a report that can support advancement on the standards track, similar to those described in <a href="#RFC5657">[RFC5657]</a>. The list of measurement devices used in testing satisfies the implementation requirement, while the test results provide information on the quality of each specification in the metric RFC (the surrogate for feature interoperability).</p>
<p id="rfc.section.3.5.p.11">The complete process of advancing a metric specification to a standard as defined by this document is illustrated in <a href="#Figure%204">Figure 4</a>.</p>
<div id="#rfc.figure.4"></div>
<div id="#Figure 4"></div>
<p></p>
<pre>


   ,---.
  /     \
 ( Start )
  \     /    Implementations
   `-+-'        +-------+
     |         /|   1   `.
 +---+----+   / +-------+ `.-----------+     ,-------.
 |  RFC   |  /             |Check for  |   ,' was RFC `. YES
 |        | /              |Equivalence....  clause x   ------+
 |        |/    +-------+  |under      |   `. clear?  ,'      |
 | Metric \.....|   2   ....relevant   |     `---+---'   +----+-----+
 | Metric |\    +-------+  |identical  |      No |       |Report    |
 | Metric | \              |network    |      +--+----+  |results + |
 |  ...   |  \             |conditions |      |Modify |  |Advance   |
 |        |   \ +-------+  |           |      |Spec   +--+RFC       |
 +--------+    \|   n   |.'+-----------+      +-------+  |request(?)|
                +-------+                                +----------+

        </pre>
<p>Illustration of the metric standardisation process</p>
<p id="rfc.section.3.5.p.12">Any recommendation for the advancement of a metric specification MUST be accompanied by an implementation report, as is the case with all requests for the advancement of IETF specifications. The implementation report needs to include the tests performed, the applied test setup, the specific metrics in the RFC and reports of the tests performed with two or more implementations. The test plan needs to specify the precision reached for each measured metric and thus define the meaning of "statistically equivalent" for the specific metrics being tested.</p>
<p id="rfc.section.3.5.p.13">Ideally, the test plan would co-evolve with the development of the metric, since that's when people have the most context in their thinking regarding the different subtleties that can arise.</p>
<p id="rfc.section.3.5.p.14">In particular, the implementation report MUST as a minimum document:</p>
<p></p>

<ul>
<li>The metric compared and the RFC specifying it. This includes statements as required by the section "Tests of an individual implementation against a metric specification" of this document.</li>
<li>The measurement configuration and setup.</li>
<li>A complete specification of the measurement stream (mean rate, statistical distribution of packets, packet size or mean packet size and their distribution), DSCP and any other measurement stream properties which could result in deviating results.  Deviations in results can be caused also if chosen IP addresses and ports of different implementations can result in different layer 2 or layer 3 paths due to operation of Equal Cost Multi-Path routing in an operational network.</li>
<li>The duration of each measurement to be used for a metric validation, the number of measurement points collected for each metric during each measurement interval (i.e. the probe size) and the level of confidence derived from this probe size for each measurement interval.</li>
<li>The result of the statistical tests performed for each metric validation as required by the section "Tests of two or more different implementations against a metric specification" of this document.</li>
<li>A parameterization of laboratory conditions and applied traffic and network conditions allowing reproduction of these laboratory conditions for readers of the implementation report.</li>
<li>The documentation helping to improve metric specifications defined by this section.</li>
</ul>
<p id="rfc.section.3.5.p.16">All of the tests for each set SHOULD be run in a test setup as specified in the section "Test setup resulting in identical live network testing conditions."</p>
<p id="rfc.section.3.5.p.17">If a different test set up is chosen, it is RECOMMENDED to avoid effects falsifying results of validation measurements caused by real data networks (like parallelism in devices and networks). Data networks may forward packets differently in the case of:</p>
<p></p>

<ul>
<li>Different packet sizes chosen for different metric implementations. A proposed countermeasure is selecting the same packet size when validating results of two samples or a sample against an original distribution.</li>
<li>Selection of differing IP addresses and ports used by different metric implementations during metric validation tests. If ECMP is applied on IP or MPLS level, different paths can result (note that it may be impossible to detect an MPLS ECMP path from an IP endpoint). A proposed counter measure is to connect the measurement equipment to be compared by a NAT device, or establishing a single tunnel to transport all measurement traffic The aim is to have the same IP addresses and port for all measurement packets or to avoid ECMP based local routing diversion by using a layer 2 tunnel.</li>
<li>Different IP options.</li>
<li>Different DSCP.</li>
<li>If the N measurements are captured using sequential measurements instead of simultaneous ones, then the following factors come into play: Time varying paths and load conditions.</li>
</ul>
<h1 id="rfc.section.3.6">
<a href="#rfc.section.3.6">3.6.</a> Proposal to determine an "equivalence" threshold for each metric evaluated</h1>
<p id="rfc.section.3.6.p.1">This section describes a proposal for maximum error of "equivalence", based on performance comparison of identical implementations. This comparison may be useful for both ADK and non-ADK comparisons.</p>
<p id="rfc.section.3.6.p.2">Each metric tested by two or more implementations (cross-implementation testing).</p>
<p id="rfc.section.3.6.p.3">Each metric is also tested twice simultaneously by the *same* implementation, using different Src/Dst Address pairs and other differences such that the connectivity differences of the cross-implementation tests are also experienced and measured by the same implementation.</p>
<p id="rfc.section.3.6.p.4">Comparative results for the same implementation represent a bound on cross-implementation equivalence. This should be particularly useful when the metric does *not* produces a continuous distribution of singleton values, such as with a loss metric, or a duplication metric. Appendix A indicates how the ADK will work for 0ne-way delay, and should be likewise applicable to distributions of delay variation.  Appendix B discusses two possible ways to perform the ADK analysis, the R statistical language <a href="#Rtool">[Rtool]</a> with ADK package <a href="#Radk">[Radk]</a> and C++ code.</p>
<p id="rfc.section.3.6.p.5">Proposal: the implementation with the largest difference in homogeneous comparison results is the lower bound on the equivalence threshold, noting that there may be other systematic errors to account for when comparing between implementations.</p>
<p id="rfc.section.3.6.p.6">Thus, when evaluating equivalence in cross-implementation results:</p>
<p id="rfc.section.3.6.p.7">Maximum_Error = Same_Implementation_Error + Systematic_Error</p>
<p id="rfc.section.3.6.p.8">and only the systematic error need be decided beforehand.</p>
<p id="rfc.section.3.6.p.9">In the case of ADK comparison, the largest same-implementation resolution of distribution equivalence can be used as a limit on cross-implementation resolutions (at the same confidence level).</p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#Acknowledgements" id="Acknowledgements">Acknowledgements</a>
</h1>
<p id="rfc.section.4.p.1">Gerhard Hasslinger commented a first version of this document, suggested statistical tests and the evaluation of time series information. Matthias Wieser's thesis on a metric test resulted in new input for this draft. Henk Uijterwaal and Lars Eggert have encouraged and helped to orgainize this work. Mike Hamilton, Scott Bradner, David Mcdysan and Emile Stephan commented on this draft. Carol Davids reviewed the 01 version of the ID before it was promoted to WG draft.</p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#Contributors" id="Contributors">Contributors</a>
</h1>
<p id="rfc.section.5.p.1">Scott Bradner, Vern Paxson and Allison Mankin drafted <a href="#bradner-metrictest">bradner-metrictest</a> <cite title="NONE">[bradner-metrictest]</cite>, and major parts of it are included in this document.</p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#IANA" id="IANA">IANA Considerations</a>
</h1>
<p id="rfc.section.6.p.1">This memo includes no request to IANA.</p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#Security" id="Security">Security Considerations</a>
</h1>
<p id="rfc.section.7.p.1">This memo does not raise any specific security issues.</p>
<h1 id="rfc.references">
<a href="#rfc.references">8.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">8.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2026">[RFC2026]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2026">The Internet Standards Process -- Revision 3</a>", BCP 9, RFC 2026, October 1996.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2679">[RFC2679]</b></td>
<td class="top">
<a href="mailto:almes@advanced.org" title="Advanced Network &amp; Services, Inc.">Almes, G.</a>, <a href="mailto:kalidindi@advanced.org" title="Advanced Network &amp; Services, Inc.">Kalidindi, S.</a> and <a href="mailto:matt@advanced.org" title="Advanced Network &amp; Services, Inc.">M. Zekauskas</a>, "<a href="http://tools.ietf.org/html/rfc2679">A One-way Delay Metric for IPPM</a>", RFC 2679, September 1999.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2330">[RFC2330]</b></td>
<td class="top">
<a href="mailto:vern@ee.lbl.gov" title="MS 50B/2239">Paxson, V.</a>, <a href="mailto:almes@advanced.org" title="Advanced Network &amp; Services, Inc.">Almes, G.</a>, <a href="mailto:mahdavi@psc.edu" title="Pittsburgh Supercomputing Center">Mahdavi, J.</a> and <a href="mailto:mathis@psc.edu" title="Pittsburgh Supercomputing Center">M. Mathis</a>, "<a href="http://tools.ietf.org/html/rfc2330">Framework for IP Performance Metrics</a>", RFC 2330, May 1998.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2003">[RFC2003]</b></td>
<td class="top">
<a href="mailto:perk@watson.ibm.com" title="Room H3-D34">Perkins, C.</a>, "<a href="http://tools.ietf.org/html/rfc2003">IP Encapsulation within IP</a>", RFC 2003, October 1996.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2784">[RFC2784]</b></td>
<td class="top">
<a href="mailto:dino@procket.com" title="Procket Networks">Farinacci, D.</a>, <a href="mailto:tony1@home.net" title="Procket Networks">Li, T.</a>, <a href="mailto:stan_hanks@enron.net" title="Enron Communications">Hanks, S.</a>, <a href="mailto:dmm@cisco.com" title="Cisco Systems, Inc.">Meyer, D.</a> and <a href="mailto:pst@juniper.net" title="Juniper Networks">P. Traina</a>, "<a href="http://tools.ietf.org/html/rfc2784">Generic Routing Encapsulation (GRE)</a>", RFC 2784, March 2000.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2661">[RFC2661]</b></td>
<td class="top">
<a href="mailto:townsley@cisco.com" title="Cisco Systems">Townsley, W.</a>, <a href="mailto:vandys@cisco.com" title="cisco Systems">Valencia, A.</a>, <a href="mailto:acr@del.com" title="Ascend Communications">Rubens, A.</a>, <a href="mailto:gurdeep@microsoft.com" title="Microsoft Corporation">Pall, G.</a>, <a href="mailto:gwz@acm.org" title="Microsoft Corporation">Zorn, G.</a> and <a href="mailto:palter@zev.net" title="RedBack Networks, Inc">B. Palter</a>, "<a href="http://tools.ietf.org/html/rfc2661">Layer Two Tunneling Protocol "L2TP"</a>", RFC 2661, August 1999.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3931">[RFC3931]</b></td>
<td class="top">
<a>Lau, J.</a>, <a>Townsley, M.</a> and <a>I. Goyret</a>, "<a href="http://tools.ietf.org/html/rfc3931">Layer Two Tunneling Protocol - Version 3 (L2TPv3)</a>", RFC 3931, March 2005.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4448">[RFC4448]</b></td>
<td class="top">
<a>Martini, L.</a>, <a>Rosen, E.</a>, <a>El-Aawar, N.</a> and <a>G. Heron</a>, "<a href="http://tools.ietf.org/html/rfc4448">Encapsulation Methods for Transport of Ethernet over MPLS Networks</a>", RFC 4448, April 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4459">[RFC4459]</b></td>
<td class="top">
<a>Savola, P.</a>, "<a href="http://tools.ietf.org/html/rfc4459">MTU and Fragmentation Issues with In-the-Network Tunneling</a>", RFC 4459, April 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4928">[RFC4928]</b></td>
<td class="top">
<a>Swallow, G.</a>, <a>Bryant, S.</a> and <a>L. Andersson</a>, "<a href="http://tools.ietf.org/html/rfc4928">Avoiding Equal Cost Multipath Treatment in MPLS Networks</a>", BCP 128, RFC 4928, June 2007.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2680">[RFC2680]</b></td>
<td class="top">
<a href="mailto:almes@advanced.org" title="Advanced Network &amp; Services, Inc.">Almes, G.</a>, <a href="mailto:kalidindi@advanced.org" title="Advanced Network &amp; Services, Inc.">Kalidindi, S.</a> and <a href="mailto:matt@advanced.org" title="Advanced Network &amp; Services, Inc.">M. Zekauskas</a>, "<a href="http://tools.ietf.org/html/rfc2680">A One-way Packet Loss Metric for IPPM</a>", RFC 2680, September 1999.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2681">[RFC2681]</b></td>
<td class="top">
<a href="mailto:almes@advanced.org" title="Advanced Network &amp; Services, Inc.">Almes, G.</a>, <a href="mailto:kalidindi@advanced.org" title="Advanced Network &amp; Services, Inc.">Kalidindi, S.</a> and <a href="mailto:matt@advanced.org" title="Advanced Network &amp; Services, Inc.">M. Zekauskas</a>, "<a href="http://tools.ietf.org/html/rfc2681">A Round-trip Delay Metric for IPPM</a>", RFC 2681, September 1999.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4656">[RFC4656]</b></td>
<td class="top">
<a>Shalunov, S.</a>, <a>Teitelbaum, B.</a>, <a>Karp, A.</a>, <a>Boote, J.</a> and <a>M. Zekauskas</a>, "<a href="http://tools.ietf.org/html/rfc4656">A One-way Active Measurement Protocol (OWAMP)</a>", RFC 4656, September 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4719">[RFC4719]</b></td>
<td class="top">
<a>Aggarwal, R.</a>, <a>Townsley, M.</a> and <a>M. Dos Santos</a>, "<a href="http://tools.ietf.org/html/rfc4719">Transport of Ethernet Frames over Layer 2 Tunneling Protocol Version 3 (L2TPv3)</a>", RFC 4719, November 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5657">[RFC5657]</b></td>
<td class="top">
<a>Dusseault, L.</a> and <a>R. Sparks</a>, "<a href="http://tools.ietf.org/html/rfc5657">Guidance on Interoperation and Implementation Reports for Advancement to Draft Standard</a>", BCP 9, RFC 5657, September 2009.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">8.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC5357">[RFC5357]</b></td>
<td class="top">
<a>Hedayat, K.</a>, <a>Krzanowski, R.</a>, <a>Morton, A.</a>, <a>Yum, K.</a> and <a>J. Babiarz</a>, "<a href="http://tools.ietf.org/html/rfc5357">A Two-Way Active Measurement Protocol (TWAMP)</a>", RFC 5357, October 2008.</td>
</tr>
<tr>
<td class="reference"><b id="bradner-metrictest">[bradner-metrictest]</b></td>
<td class="top">
<a title="Harvard University">Bradner, S.</a>, <a title="Harvard University">Mankin, A.</a> and <a title="Harvard University">V. Paxson</a>, "<a>Advancement of metrics specifications on the IETF Standards Track</a>", draft -bradner-metricstest-03, (work in progress), July 2007.</td>
</tr>
<tr>
<td class="reference"><b id="morton-advance-metrics">[morton-advance-metrics]</b></td>
<td class="top">
<a title="AT&amp;T Labs">Morton, A.</a>, "<a>Problems and Possible Solutions for Advancing Metrics on the Standards Track</a>", draft -morton-ippm-advance-metrics-00, (work in progress), July 2009.</td>
</tr>
<tr>
<td class="reference"><b id="morton-advance-metrics-01">[morton-advance-metrics-01]</b></td>
<td class="top">
<a title="AT&amp;T Labs">Morton, A.</a>, "<a>Lab Test Results for Advancing Metrics on the Standards Track</a>", draft -morton-ippm-advance-metrics-01, (work in progress), June 2010.</td>
</tr>
<tr>
<td class="reference"><b id="morton-testplan-rfc2679">[morton-testplan-rfc2679]</b></td>
<td class="top">
<a title="AT&amp;T Labs">Ciavattone, L.</a>, <a title="Deutsche Telekom">Geib, R.</a>, <a title="AT&amp;T Labs">Morton, A.</a> and <a title="University of Applied Sciences Darmstadt">M. Wieser</a>, "<a>Test Plan and Results for Advancing RFC 2679 on the Standards Track</a>", draft -morton-ippm-testplan-rfc2679-01, (work in progress), June 2011.</td>
</tr>
<tr>
<td class="reference"><b id="GU+Duffield">[GU+Duffield]</b></td>
<td class="top">
<a title="University of Massachusetts, Amherst">Gu, Y.</a>, <a title="AT&amp;T Labs &#8211; Research">Duffield, N.</a>, <a title="AT&amp;T Labs &#8211; Research">Breslau, L.</a> and <a title="AT&amp;T Labs &#8211; Research">S. Sen</a>, "<a>GRE Encapsulated Multicast Probing: A Scalable Technique for Measuring One-Way Loss</a>", SIGMETRICS&#8217;07 San Diego, California, USA, June 2007.</td>
</tr>
<tr>
<td class="reference"><b id="ADK">[ADK]</b></td>
<td class="top">
<a title="Boeing Computer Services">Scholz, F.W.</a> and <a title="Simon Fraser University">M.A. Stephens</a>, "<a>K-sample Anderson-Darling Tests of fit, for continuous and discrete cases</a>", University of Washington, Technical Report No. 81, May 1986.</td>
</tr>
<tr>
<td class="reference"><b id="Rtool">[Rtool]</b></td>
<td class="top">
<a title="Boeing Computer Services">R Development Core Team, </a>, "<a>R: A language and environment for statistical computing. R Foundation for Statistical Computing, Vienna, Austria. ISBN 3-900051-07-0, URL http://www.R-project.org/</a>",  , 2011.</td>
</tr>
<tr>
<td class="reference"><b id="Radk">[Radk]</b></td>
<td class="top">
<a title="Boeing Computer Services">Scholz, F.</a>, "<a>adk: Anderson-Darling K-Sample Test and Combinations of Such Tests. R package version 1.0.</a>",  , 2008.</td>
</tr>
<tr>
<td class="reference"><b id="Rule of thumb">[Rule of thumb]</b></td>
<td class="top">
<a title="Wikipedia">Hardy, M.</a>, "<a>Confidence interval</a>", March 2010.</td>
</tr>
</tbody></table>
<h1 id="rfc.appendix.Appendix A">
<a href="#rfc.appendix.Appendix%20A">Appendix A.</a> <a href="#Appendix%20A" id="Appendix A">An example on a One-way Delay metric validation</a>
</h1>
<p id="rfc.section.Appendix A.p.1">The text of this appendix is not binding. It is an example how parts of a One-way Delay metric test could look like.  http://xml.resource.org/public/rfc/bibxml/</p>
<h1 id="rfc.appendix.Appendix A.1">
<a href="#rfc.appendix.Appendix%20A.1">Appendix A.1.</a> Compliance to Metric specification requirements</h1>
<p id="rfc.section.Appendix A.1.p.1">One-way Delay, Loss threshold, RFC 2679</p>
<p id="rfc.section.Appendix A.1.p.2">This test determines if implementations use the same configured maximum waiting time delay from one measurement to another under different delay conditions, and correctly declare packets arriving in excess of the waiting time threshold as lost. See Section 3.5 of RFC2679, 3rd bullet point and also Section 3.8.2 of RFC2679.</p>
<p></p>

<dl>
<dt>(1 )</dt>
<dd>Configure a path with 1 sec one-way constant delay.</dd>
<dt>(2 )</dt>
<dd>Measure one-way delay with 2 or more implementations, using identical waiting time thresholds for loss set at 2 seconds.</dd>
<dt>(3 )</dt>
<dd>Configure the path with 3 sec one-way delay.</dd>
<dt>(4 )</dt>
<dd>Repeat measurements.</dd>
<dt>(5 )</dt>
<dd>Observe that the increase measured in step 4 caused all packets to be declared lost, and that all packets that arrive successfully in step 2 are assigned a valid one-way delay.</dd>
</dl>
<p id="rfc.section.Appendix A.1.p.4">One-way Delay, First-bit to Last bit, RFC 2679</p>
<p id="rfc.section.Appendix A.1.p.5">This test determines if implementations register the same relative increase in delay from one measurement to another under different delay conditions. This test tends to cancel the sources of error which may be present in an implementation. See Section 3.7.2 of RFC2679, and Section 10.2 of RFC2330.</p>
<p></p>

<dl>
<dt>(1 )</dt>
<dd>Configure a path with X ms one-way constant delay, and ideally including a low-speed link.</dd>
<dt>(2 )</dt>
<dd>Measure one-way delay with 2 or more implementations, using identical options and equal size small packets (e.g., 100 octet IP payload).</dd>
<dt>(3 )</dt>
<dd>Maintain the same path with X ms one-way delay.</dd>
<dt>(4 )</dt>
<dd>Measure one-way delay with 2 or more implementations, using identical options and equal size large packets (e.g., 1500 octet IP payload).</dd>
<dt>(5 )</dt>
<dd>Observe that the increase measured in steps 2 and 4 is equivalent to the increase in ms expected due to the larger serialization time for each implementation. Most of the measurement errors in each system should cancel, if they are stationary.</dd>
</dl>
<p id="rfc.section.Appendix A.1.p.7">One-way Delay, RFC 2679</p>
<p id="rfc.section.Appendix A.1.p.8">This test determines if implementations register the same relative increase in delay from one measurement to another under different delay conditions. This test tends to cancel the sources of error which may be present in an implementation. This test is intended to evaluate measurments in sections 3 and 4 of RFC2679.</p>
<p></p>

<dl>
<dt>(1 )</dt>
<dd>Configure a path with X ms one-way constant delay.</dd>
<dt>(2 )</dt>
<dd>Measure one-way delay with 2 or more implementations, using identical options.</dd>
<dt>(3 )</dt>
<dd>Configure the path with X+Y ms one-way delay.</dd>
<dt>(4 )</dt>
<dd>Repeat measurements.</dd>
<dt>(5 )</dt>
<dd>Observe that the increase measured in steps 2 and 4 is ~Y ms for each implementation. Most of the measurement errors in each system should cancel, if they are stationary.</dd>
</dl>
<p id="rfc.section.Appendix A.1.p.10">Error Calibration, RFC 2679</p>
<p id="rfc.section.Appendix A.1.p.11">This is a simple check to determine if an implementation reports the error calibration as required in Section 4.8 of RFC2679. Note that the context (Type-P) must also be reported.</p>
<h1 id="rfc.appendix.Appendix A.2">
<a href="#rfc.appendix.Appendix%20A.2">Appendix A.2.</a> Examples related to statistical tests for One-way Delay</h1>
<p id="rfc.section.Appendix A.2.p.1">A one way delay measurement may pass an ADK test with a timestamp resultion of 1 ms. The same test may fail, if timestamps with a resolution of 100 microseconds are eavluated. The implementation then is then conforming to the metric specification up to a timestamp resolution of 1 ms.</p>
<p id="rfc.section.Appendix A.2.p.2">Let's assume another one way delay measurement comparison between implementation 1, probing with a frequency of 2 probes per second and implementation 2 probing at a rate of 2 probes every 3 minutes. To ensure reasonable confidence in results, sample metrics are calculated from at least 5 singletons per compared time interval. This means, sample delay values are calculated for each system for identical 6 minute intervals for the whole test duration. Per 6 minute interval, the sample metric is calculated from 720 singletons for implementation 1 and from 6 singletons for implementation 2. Note, that if outliers are not filtered, moving averages are an option for an evaluation too.  The minimum move of an averaging interval is three minutes in this example.</p>
<p id="rfc.section.Appendix A.2.p.3">The data in table 1 may result from measuring One-Way Delay with implementation 1 (see column Implemnt_1) and implementation 2 (see column implemnt_2). Each data point in the table represents a (rounded) average of the sampled delay values per interval. The resolution of the clock is one micro-second. The difference in the delay values may result eg. from different probe packet sizes.</p>
<div id="#rfc.table.1"></div>
<div id="#table_example_data"></div>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="center">Implemnt_1</th>
<th class="center">Implemnt_2</th>
<th class="center">Implemnt_2 - Delta_Averages</th>
</tr></thead>
<tbody>
<tr>
<td class="center">5000</td>
<td class="center">6549</td>
<td class="center">4997</td>
</tr>
<tr>
<td class="center">5008</td>
<td class="center">6555</td>
<td class="center">5003</td>
</tr>
<tr>
<td class="center">5012</td>
<td class="center">6564</td>
<td class="center">5012</td>
</tr>
<tr>
<td class="center">5015</td>
<td class="center">6565</td>
<td class="center">5013</td>
</tr>
<tr>
<td class="center">5019</td>
<td class="center">6568</td>
<td class="center">5016</td>
</tr>
<tr>
<td class="center">5022</td>
<td class="center">6570</td>
<td class="center">5018</td>
</tr>
<tr>
<td class="center">5024</td>
<td class="center">6573</td>
<td class="center">5021</td>
</tr>
<tr>
<td class="center">5026</td>
<td class="center">6575</td>
<td class="center">5023</td>
</tr>
<tr>
<td class="center">5027</td>
<td class="center">6577</td>
<td class="center">5025</td>
</tr>
<tr>
<td class="center">5029</td>
<td class="center">6580</td>
<td class="center">5028</td>
</tr>
<tr>
<td class="center">5030</td>
<td class="center">6585</td>
<td class="center">5033</td>
</tr>
<tr>
<td class="center">5032</td>
<td class="center">6586</td>
<td class="center">5034</td>
</tr>
<tr>
<td class="center">5034</td>
<td class="center">6587</td>
<td class="center">5035</td>
</tr>
<tr>
<td class="center">5036</td>
<td class="center">6588</td>
<td class="center">5036</td>
</tr>
<tr>
<td class="center">5038</td>
<td class="center">6589</td>
<td class="center">5037</td>
</tr>
<tr>
<td class="center">5039</td>
<td class="center">6591</td>
<td class="center">5039</td>
</tr>
<tr>
<td class="center">5041</td>
<td class="center">6592</td>
<td class="center">5040</td>
</tr>
<tr>
<td class="center">5043</td>
<td class="center">6599</td>
<td class="center">5047</td>
</tr>
<tr>
<td class="center">5046</td>
<td class="center">6606</td>
<td class="center">5054</td>
</tr>
<tr>
<td class="center">5054</td>
<td class="center">6612</td>
<td class="center">5060</td>
</tr>
</tbody>
</table>
<p id="rfc.section.Appendix A.2.p.4">Average values of sample metrics captured during identical time intervals are compared. This excludes random differences caused by differing probing intervals or differing temporal distance of singletons resulting from their Poisson distributed sending times.</p>
<p id="rfc.section.Appendix A.2.p.5">In the example, 20 values have been picked (note that at least 100 values are recommended for a single run of a real test). Data must be ordered by ascending rank. The data of Implemnt_1 and Implemnt_2 as shown in the first two columns of table 1 clearly fails an ADK test with 95% confidence.</p>
<p id="rfc.section.Appendix A.2.p.6">The results of Implemnt_2 are now reduced by difference of the averages of column 2 (rounded to 6581 us) and column 1 (rounded to 5029 us), which is 1552 us. The result may be found in column 3 of table 1. Comparing column 1 and column 3 of the table by an ADK test shows, that the data contained in these columns passes an ADK tests with 95% confidence.</p>
<p id="rfc.section.Appendix A.2.p.7">&gt;&gt;&gt; Comment: Extensive averaging was used in this example, because of the vastly different sampling frequencies. As a result, the distributions compared do not exactly align with a metric in <a href="#RFC2679">[RFC2679]</a>, but illustrate the ADK process adequately.</p>
<h1 id="rfc.appendix.Appendix B">
<a href="#rfc.appendix.Appendix%20B">Appendix B.</a> <a href="#AppB" id="AppB">Anderson-Darling K-sample Reference and 2 sample C++ code</a>
</h1>
<p id="rfc.section.Appendix B.p.1">There are many statistical tools available, and this Appendix describes two that are familiar to the authors.</p>
<p id="rfc.section.Appendix B.p.2">The "R tool" is a language and command-line environment for statistical computing and plotting <a href="#Rtool">[Rtool]</a>. With the optional "adk" package installed <a href="#Radk">[Radk]</a>, it can perform individual and combined sample ADK computations. The user must consult the package documentation and the original paper <a href="#ADK">[ADK]</a> to interpret the results, but this is as it should be.</p>
<p id="rfc.section.Appendix B.p.3">The C++ code below will perform a 2-sample AD comparison when compiled and presented with two column vectors in a file (using white space as separation). This version contains modifications to use the vectors and run as a stand-alone module by Wes Eddy, Sept 2011. The status of the comparison can be checked on the command line with "$ echo $?" or the last line can be replaced with a printf statement for adk_result instead.</p>
<div id="#rfc.figure.5"></div>
<div id="#code"></div>
<p></p>
<pre>/* Routines for computing the Anderson-Darling 2 sample
 * test statistic.
 *
 * Implemented based on the description in
 * "Anderson-Darling K Sample Test" Heckert, Alan and
 * Filliben, James, editors, Dataplot Reference Manual,
 * Chapter 15 Auxiliary, NIST, 2004.
 * Official Reference by 2010
 * Heckert, N. A. (2001). Dataplot website at the
 * National Institute of Standards and Technology:
 * http://www.itl.nist.gov/div898/software/dataplot.html/
 * June 2001.
*/

#include &lt;iostream&gt;
#include &lt;fstream&gt;
#include &lt;vector&gt;
#include &lt;sstream&gt;

using namespace std;



int main() {
   vector&lt;double&gt; vec1, vec2;
   double adk_result;
   static int k, val_st_z_samp1, val_st_z_samp2,
              val_eq_z_samp1, val_eq_z_samp2,
              j, n_total, n_sample1, n_sample2, L,
              max_number_samples, line, maxnumber_z;
   static int column_1, column_2;
   static double adk, n_value, z, sum_adk_samp1,
                 sum_adk_samp2, z_aux;
   static double H_j, F1j, hj, F2j, denom_1_aux, denom_2_aux;
   static bool next_z_sample2, equal_z_both_samples;
   static int stop_loop1, stop_loop2, stop_loop3,old_eq_line2,
              old_eq_line1;

   static double adk_criterium = 1.993;

   /* vec1 and vec2 to be initialised with sample 1 and
    * sample 2 values in ascending order */
   while (!cin.eof()) {
      double f1, f2;
      cin &gt;&gt; f1;
      cin &gt;&gt; f2;
      vec1.push_back(f1);
      vec2.push_back(f2);
   }

   k = 2;
   n_sample1 = vec1.size() - 1;
   n_sample2 = vec2.size() - 1;

   // -1 because vec[0] is a dummy value
   n_total = n_sample1 + n_sample2;

   /* value equal to the line with a value = zj in sample 1.
    * Here j=1, so the line is 1.
    */
   val_eq_z_samp1 = 1;

   /* value equal to the line with a value = zj in sample 2.
    * Here j=1, so the line is 1.
    */
   val_eq_z_samp2 = 1;

   /* value equal to the last line with a value &lt; zj
    * in sample 1. Here j=1, so the line is 0.
    */
   val_st_z_samp1 = 0;

   /* value equal to the last line with a value &lt; zj
    * in sample 1. Here j=1, so the line is 0.
    */
   val_st_z_samp2 = 0;

   sum_adk_samp1 = 0;
   sum_adk_samp2 = 0;
   j = 1;

   // as mentioned above, j=1
   equal_z_both_samples = false;

   next_z_sample2 = false;

   //assuming the next z to be of sample 1
   stop_loop1 = n_sample1 + 1;

   // + 1 because vec[0] is a dummy, see n_sample1 declaration
   stop_loop2 = n_sample2 + 1;
   stop_loop3 = n_total + 1;

   /* The required z values are calculated until all values
    * of both samples have been taken into account. See the
    * lines above for the stoploop values. Construct required
    * to avoid a mathematical operation in the While condition
    */
   while (((stop_loop1 &gt; val_eq_z_samp1)
          || (stop_loop2 &gt; val_eq_z_samp2)) &amp;&amp; stop_loop3 &gt; j)
   {
     if(val_eq_z_samp1 &lt; n_sample1+1)
     {
    /* here, a preliminary zj value is set.
     * See below how to calculate the actual zj.
     */
           z = vec1[val_eq_z_samp1];

    /* this while sequence calculates the number of values
     * equal to z.
     */
           while ((val_eq_z_samp1+1 &lt; n_sample1)
                   &amp;&amp; z == vec1[val_eq_z_samp1+1] )
                   {
                   val_eq_z_samp1++;
                   }
           }
           else
           {
           val_eq_z_samp1 = 0;
           val_st_z_samp1 = n_sample1;

   // this should be val_eq_z_samp1 - 1 = n_sample1
           }

   if(val_eq_z_samp2 &lt; n_sample2+1)
           {
           z_aux = vec2[val_eq_z_samp2];;

   /* this while sequence calculates the number of values
    * equal to z_aux
    */

           while ((val_eq_z_samp2+1 &lt; n_sample2)
                   &amp;&amp; z_aux == vec2[val_eq_z_samp2+1] )
                   {
                   val_eq_z_samp2++;
                   }

   /* the smaller of the two actual data values is picked
    * as the next zj.
    */

       if(z &gt; z_aux)
                   {
                   z = z_aux;
                   next_z_sample2 = true;
                   }
            else
                   {
                   if (z == z_aux)
                   {
                   equal_z_both_samples = true;
                   }

   /* This is the case, if the last value of column1 is
    * smaller than the remaining values of column2.
    */
                  if (val_eq_z_samp1 == 0)
                   {
                   z = z_aux;
                   next_z_sample2 = true;
                   }
               }
           }
          else
             {
           val_eq_z_samp2 = 0;
           val_st_z_samp2 = n_sample2;

   // this should be val_eq_z_samp2 - 1 = n_sample2

           }

    /* in the following, sum j = 1 to L is calculated for
     * sample 1 and sample 2.
     */
          if (equal_z_both_samples)
             {

             /* hj is the number of values in the combined sample
              * equal to zj
              */
                  hj = val_eq_z_samp1 - val_st_z_samp1
                 + val_eq_z_samp2 - val_st_z_samp2;

             /* H_j is the number of values in the combined sample
              * smaller than zj plus one half the the number of
              * values in the combined sample equal to zj
              * (that's hj/2).
              */
                 H_j = val_st_z_samp1 + val_st_z_samp2
                        + hj / 2;

             /* F1j is the number of values in the 1st sample
              * which are less than zj plus one half the number
              * of values in this sample which are equal to zj.
              */

                 F1j = val_st_z_samp1 + (double)
                     (val_eq_z_samp1 - val_st_z_samp1) / 2;

             /* F2j is the number of values in the 1st sample
              * which are less than zj     plus one half the number
              * of values in this sample which are equal to zj.
              */
                 F2j = val_st_z_samp2 + (double)
                    (val_eq_z_samp2 - val_st_z_samp2) / 2;

             /* set the line of values equal to zj to the
              * actual line of the last value picked for zj.
              */
                 val_st_z_samp1 = val_eq_z_samp1;

             /* Set the line of values equal to zj to the actual
              * line of the last value picked for zjof each
              * sample. This is required as data smaller than zj
              * is accounted differently than values equal to zj.
              */
                 val_st_z_samp2 = val_eq_z_samp2;

             /* next the lines of the next values z, ie. zj+1
              * are addressed.
              */
               val_eq_z_samp1++;

             /* next the lines of the next values z, ie.
              * zj+1 are addressed
              */
                 val_eq_z_samp2++;
                 }
          else
                 {

             /* the smaller z value was contained in sample 2,
              * hence this value is the zj to base the following
              * calculations on.
              */
                           if (next_z_sample2)
                           {

             /* hj is the number of values in the combined
              * sample equal to zj, in this case these are
              * within sample 2 only.
              */
                           hj = val_eq_z_samp2 - val_st_z_samp2;

             /* H_j is the number of values in the combined sample
              * smaller than zj plus one half the the number of
              * values in the combined sample equal to zj
              * (that's hj/2).
              */

                               H_j = val_st_z_samp1 + val_st_z_samp2
                             + hj / 2;

             /* F1j is the number of values in the 1st sample which
              * are less than zj plus one half the number of values in
              * this sample which are equal to zj.
              * As val_eq_z_samp2 &lt; val_eq_z_samp1, these are the
              * val_st_z_samp1 only.
              */
                           F1j = val_st_z_samp1;

             /* F2j is the number of values in the 1st sample which
              * are less than zj plus one half the number of values in
              * this sample which are equal to zj. The latter are from
              * sample 2 only in this case.
              */

                   F2j = val_st_z_samp2 + (double)
                        (val_eq_z_samp2 - val_st_z_samp2) / 2;

             /* Set the line of values equal to zj to the actual line
              * of the last value picked for zj of sample 2 only in
              * this case.
              */
                               val_st_z_samp2 = val_eq_z_samp2;

             /* next the line of the next value z, ie. zj+1 is
              * addressed. Here, only sample 2 must be addressed.
              */

                   val_eq_z_samp2++;
                                   if (val_eq_z_samp1 == 0)
                                   {
                                   val_eq_z_samp1 = stop_loop1;
                                   }
                           }

   /* the smaller z value was contained in sample 2,
    * hence this value is the zj to base the following
    * calculations on.
    */

                 else
                 {

   /* hj is the number of values in the combined
    * sample equal to zj, in this case these are
    * within sample 1 only.
    */
                 hj = val_eq_z_samp1 - val_st_z_samp1;

   /* H_j is the number of values in the combined
    * sample smaller than zj plus one half the the number
    * of values in the combined sample equal to zj
    * (that's hj/2).
    */

         H_j = val_st_z_samp1 + val_st_z_samp2
               + hj / 2;

   /* F1j is the number of values in the 1st sample which
    * are less than zj plus, in this case these are within
    * sample 1 only one half the number of values in this
    * sample which are equal to zj. The latter are from
    * sample 1 only in this case.
    */

         F1j = val_st_z_samp1 + (double)
              (val_eq_z_samp1 - val_st_z_samp1) / 2;

   /* F2j is the number of values in the 1st sample which
    * are less than zj plus one half the number of values
    * in this sample which are equal to zj. As
    * val_eq_z_samp1 &lt; val_eq_z_samp2, these are the
    * val_st_z_samp2 only.
    */

                 F2j = val_st_z_samp2;

   /* Set the line of values equal to zj to the actual line
    * of the last value picked for zj of sample 1 only in
    * this case
    */

         val_st_z_samp1 = val_eq_z_samp1;

   /* next the line of the next value z, ie. zj+1 is
    * addressed. Here, only sample 1 must be addressed.
    */
                 val_eq_z_samp1++;

                 if (val_eq_z_samp2 == 0)
                         {
                         val_eq_z_samp2 = stop_loop2;
                         }
                 }
                 }

           denom_1_aux = n_total * F1j - n_sample1 * H_j;
           denom_2_aux = n_total * F2j - n_sample2 * H_j;

           sum_adk_samp1 = sum_adk_samp1 + hj
                   * (denom_1_aux * denom_1_aux) /
                                      (H_j * (n_total - H_j)
                   - n_total * hj / 4);
           sum_adk_samp2 = sum_adk_samp2 + hj
          * (denom_2_aux * denom_2_aux) /
                              (H_j * (n_total - H_j)
         - n_total * hj / 4);

           next_z_sample2 = false;
           equal_z_both_samples = false;

   /* index to count the z. It is only required to prevent
    * the while slope to execute endless
    */
           j++;
           }

   // calculating the adk value is the final step.
   adk_result = (double) (n_total - 1) / (n_total
          * n_total * (k - 1))
           * (sum_adk_samp1 / n_sample1
           + sum_adk_samp2 / n_sample2);


   /* if(adk_result &lt;= adk_criterium)
    * adk_2_sample test is passed
    */
   return adk_result &lt;= adk_criterium;
}      </pre>
<p></p>
<h1 id="rfc.appendix.Appendix C">
<a href="#rfc.appendix.Appendix%20C">Appendix C.</a> <a href="#AppC" id="AppC">Glossary</a>
</h1>
<div id="#rfc.table.2"></div>
<div id="#table_glossary"></div>
<table cellpadding="3" cellspacing="0" class="tt full center">
<thead><tr>
<th class="left"></th>
<th class="left"></th>
</tr></thead>
<tbody>
<tr>
<td class="left">ADK</td>
<td class="left">Anderson-Darling K-Sample test, a test used to check whether two samples have the same statistical distribution.</td>
</tr>
<tr>
<td class="left">ECMP</td>
<td class="left">Equal Cost Multipath, a load balancing mechanism evaluating MPLS labels stacks, IP addresses and ports.</td>
</tr>
<tr>
<td class="left">EDF</td>
<td class="left">The "Empirical Distribution Function" of a set of scalar measurements is a function F(x) which for any x gives the fractional proportion of the total measurements that were smaller than or equal as x.</td>
</tr>
<tr>
<td class="left">Metric</td>
<td class="left">A measured quantity related to the performance and reliability of the Internet, expressed by a value. This could be a singleton (single value), a sample of single values or a statistic based on a sample of singletons.</td>
</tr>
<tr>
<td class="left">OWAMP</td>
<td class="left">One-way Active Measurement Protocol, a protocol for communication between IPPM measurement systems specified by IPPM.</td>
</tr>
<tr>
<td class="left">OWD</td>
<td class="left">One-Way Delay, a performance metric specified by IPPM.</td>
</tr>
<tr>
<td class="left">Sample metric</td>
<td class="left">A sample metric is derived from a given singleton metric by evaluating a number of distinct instances together.</td>
</tr>
<tr>
<td class="left">Singleton metric</td>
<td class="left">A singleton metric is, in a sense, one atomic measurement of this metric.</td>
</tr>
<tr>
<td class="left">Statistical metric</td>
<td class="left">A 'statistical' metric is derived from a given sample metric by computing some statistic of the values defined by the singleton metric on the sample.</td>
</tr>
<tr>
<td class="left">TWAMP</td>
<td class="left">Two-way Active Measurement Protocol, a protocol for communication between IPPM measurement systems specified by IPPM.</td>
</tr>
</tbody>
</table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Ruediger Geib</span> editor
	  <span class="n hidden">
		<span class="family-name">Geib</span>
	  </span>
	</span>
	<span class="org vcardline">Deutsche Telekom</span>
	<span class="adr">
	  <span>Heinrich Hertz Str. 3-7</span>

	  <span class="vcardline">
		<span class="locality">Darmstadt</span>,  
		<span class="region"></span>
		<span class="code">64295</span>
	  </span>
	  <span class="country-name vcardline">Germany</span>
	</span>
	<span class="vcardline">Phone: +49 6151 58 12747</span>

<span class="vcardline">EMail: <a href="mailto:Ruediger.Geib@telekom.de">Ruediger.Geib@telekom.de</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Al Morton</span> 
	  <span class="n hidden">
		<span class="family-name">Morton</span>
	  </span>
	</span>
	<span class="org vcardline">AT&T Labs</span>
	<span class="adr">
	  <span>200 Laurel Avenue South</span>

	  <span class="vcardline">
		<span class="locality">Middletown</span>,  
		<span class="region">NJ</span> 
		<span class="code">07748</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">Phone: +1 732 420 1571</span>

<span class="vcardline">EMail: <a href="mailto:acmorton@att.com">acmorton@att.com</a></span>

<span class="vcardline">URI: <a href="http://home.comcast.net/~acmacm/">http://home.comcast.net/~acmacm/</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Reza Fardid</span> 
	  <span class="n hidden">
		<span class="family-name">Fardid</span>
	  </span>
	</span>
	<span class="org vcardline">Cariden Technologies</span>
	<span class="adr">
	  <span>888 Villa Street, Suite 500</span>

	  <span class="vcardline">
		<span class="locality">Mountain View</span>,  
		<span class="region">CA</span> 
		<span class="code">94041</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:rfardid@cariden.com">rfardid@cariden.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Alexander Steinmitz</span> 
	  <span class="n hidden">
		<span class="family-name">Steinmitz</span>
	  </span>
	</span>
	<span class="org vcardline">Deutsche Telekom</span>
	<span class="adr">
	  <span>Memmelsdorfer Str. 209b</span>

	  <span class="vcardline">
		<span class="locality">Bamberg</span>,  
		<span class="region"></span>
		<span class="code">96052</span>
	  </span>
	  <span class="country-name vcardline">Germany</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:Alexander.Steinmitz@telekom.de">Alexander.Steinmitz@telekom.de</a></span>

  </address>
</div>

</body>
</html>