



BIER Working Group                                          IJ. Wijnands
Internet-Draft                                                Individual
Intended status: Informational                                 M. Mishra
Expires: December 1, 2021                                  Cisco Systems
                                                                   X. Xu
                                                           Alibaba Group
                                                              H. Bidgoli
                                                                   Nokia
                                                            May 30, 2021


     An Optional Encoding of the BIFT-id Field in the non-MPLS BIER
                             Encapsulation
               draft-ietf-bier-non-mpls-bift-encoding-04

Abstract

   Bit Index Explicit Replication (BIER) is an architecture that
   provides optimal multicast forwarding through a "multicast domain",
   without requiring intermediate routers to maintain any per-flow state
   or to engage in an explicit tree-building protocol.  The Multicast
   packet is encapsulated using a BIER Header and transported through an
   MPLS or non-MPLS network.  When MPLS is used as the transport, the
   Bit Indexed Forwarding Table (BIFT) is identified by a MPLS Label.
   When non-MPLS transport is used, the BIFT is identified by a 20bit
   value.  This document describes one way of encoding the 20bit value.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on December 1, 2021.








Wijnands, et al.        Expires December 1, 2021                [Page 1]

Internet-Draft     Non-MPLS BIER BIFT-id Encapsulation          May 2021


Copyright Notice

   Copyright (c) 2021 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Terminology and Definitions . . . . . . . . . . . . . . . . .   3
   3.  Specification of Requirements . . . . . . . . . . . . . . . .   3
   4.  The Bit Index Forwarding Table  . . . . . . . . . . . . . . .   3
   5.  The Non-MPLS Static BSL-SD-SI BIFT Encoding . . . . . . . . .   4
   6.  The Non-MPLS Static IBU-SI BIFT Encoding  . . . . . . . . . .   4
   7.  Security Considerations . . . . . . . . . . . . . . . . . . .   5
   8.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   5
   9.  Acknowledgments . . . . . . . . . . . . . . . . . . . . . . .   5
   10. Normative References  . . . . . . . . . . . . . . . . . . . .   5
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   6

1.  Introduction

   Bit Index Explicit Replication (BIER) [RFC8279] is an architecture
   that provides optimal multicast forwarding through a "multicast
   domain", without requiring intermediate routers to maintain any per-
   flow state or to engage in an explicit tree-building protocol.  The
   Multicast packet is encapsulated [RFC8296] using a BIER Header and
   transported through an MPLS or non-MPLS network.  When MPLS is used
   as the transport, the Bit Indexed Forwarding Table (BIFT) is
   identified by a MPLS Label.  When non-MPLS transport is used, the
   BIFT is identified by a 20bit value.  This document describes one way
   of encoding the 20bit value, based on the Sub-Domain (SD), Set
   Identifier (SI) and BitStringLength (BSL) values.

   The BIER architecture requires that a BFR has a BIFT for every
   combination of <SD, SI, BSL> that is being used.  When processing a
   BIER packet, the correct BIFT is inferred from the BIFT-id field of
   the encapsulation.  When the non-MPLS encapsulation is used in a
   given BIER domain, it may be desirable for the a BIFT-id to be unique



Wijnands, et al.        Expires December 1, 2021                [Page 2]

Internet-Draft     Non-MPLS BIER BIFT-id Encapsulation          May 2021


   in that domain.  This document describes an OPTIONAL method that can
   be used to form domain-wide unique BIFT-ids based on the <SD, SI,
   BSL> triples.  If in the future the BIER architecture is extended
   with an additional BIFT argument, this encoding does not generate
   domain-wide unique identifiers anymore.

   This encoding, if used, is only for the convenience of the network
   adminstrators.  When forwarding a BIER packet, the BIFT-id is used as
   an opaque 20-bit value that identifies a BIFT; the forwarding
   procedures do not parse the 20-bit value, they just use it as a
   lookup key.

2.  Terminology and Definitions

   Readers of this document are assumed to be familiar with the
   terminology and concepts of the documents listed as Normative
   References.  For convenience, some of the more frequently used terms
   appear below.

   BIER:
      Bit Indexed Explicit Replication.

   BIFT-id:
      Bit Indexed Forwarding Table Identifier.

3.  Specification of Requirements

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].

4.  The Bit Index Forwarding Table

   In MPLS networks a BIER label is allocated for each Bit Index
   Forwarding Table (BIFT) from the platform specific, downstream label
   database ([RFC8296]).  This label is associated with a particular
   combination of BIER Sub-Domain (SD), Set Identifier (SI) and
   BitStringLength (BSL).  In order for the network to know which MPLS
   label represents a particular combination of <SD, SI, BS>, this
   mapping has to be advertised through the network.  This is currently
   done through an IGP or BGP.  In MPLS networks this is not a drawback
   as the MPLS label has to be advertised anyway.

   When the non-MPLS encoding is chosen, there is no need to advertise
   the BIFT-id to <SD, SI, BSL> mapping if the BIFT-id is domain-wide
   unique.  For this reason we're defining two encodings that MAY be
   used by operators to compute the domain-wide unique BIFT-id values
   from the SD, BSL and/or SI.  Although the BIFT-id is not expected to



Wijnands, et al.        Expires December 1, 2021                [Page 3]

Internet-Draft     Non-MPLS BIER BIFT-id Encapsulation          May 2021


   change, it may change when the BSL mismatch procedures [RFC8279]
   section 6.10.2 are applied.

5.  The Non-MPLS Static BSL-SD-SI BIFT Encoding

   Find below the first 32 bits of the BIER header, encoding the SD, SI
   and BSL into the 20 bit BIFT-id field.


     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |  BSL  |       SD      |       SI      | TC  |S|       TTL     |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

     |-------- 20 bit BIFT-id Field ---------|


                                 Figure 1

      BSL: This 4-bit field encodes the length in bits of the BitString.
      These are the same values as documented in [RFC8296].

      SD: This is a 8-bit field that encodes the Sub-Domain as described
      in [RFC8279].

      SI: This is a 8-bit field that encodes the Set-ID as described in
      [RFC8279].

      TC: This is a 3-bit field set to 000 (following [RFC8296]).

      S: This is a 1-bit field set to 1 (following [RFC8296]).

      TTL: See [RFC8296].

6.  The Non-MPLS Static IBU-SI BIFT Encoding

   Find below the first 32 bits of the BIER header, encoding the
   provisioned Index BIFT Unit (IBU) and SI into the 20 bit BIFT-id
   field.  The IBU replaces the BSL and SD values as described in the
   encoding above.  This provides additional flexibility in-case there
   is a need to support additional arguments other than BSL and SD to
   create the BIFT-id.










Wijnands, et al.        Expires December 1, 2021                [Page 4]

Internet-Draft     Non-MPLS BIER BIFT-id Encapsulation          May 2021


     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |          IBU          |       SI      | TC  |S|       TTL     |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

     |-------- 20 bit BIFT-id Field ---------|


                                 Figure 2

      IBU: The IBU is a 12-bit field that encodes the provisioned Index
      BIFT Unit.

      SI: This is a 8-bit field that encodes the Set-ID as described in
      [RFC8279].

      TC: This is a 3-bit field set to 000 (following [RFC8296]).

      S: This is a 1-bit field set to 1 (following [RFC8296]).

      TTL: See [RFC8296].

7.  Security Considerations

   This document does not introduce any new security considerations
   other than already discussed in [RFC8279].

8.  IANA Considerations

   There is no IANA consideration.

9.  Acknowledgments

   The authors like to thank the following people for their comments and
   contributions to this document; Eric Rosen, Neale Ranns, Jeffrey
   Zhang.

10.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC8279]  Wijnands, IJ., Ed., Rosen, E., Ed., Dolganow, A.,
              Przygienda, T., and S. Aldrin, "Multicast Using Bit Index
              Explicit Replication (BIER)", RFC 8279,
              DOI 10.17487/RFC8279, November 2017,
              <https://www.rfc-editor.org/info/rfc8279>.



Wijnands, et al.        Expires December 1, 2021                [Page 5]

Internet-Draft     Non-MPLS BIER BIFT-id Encapsulation          May 2021


   [RFC8296]  Wijnands, IJ., Ed., Rosen, E., Ed., Dolganow, A.,
              Tantsura, J., Aldrin, S., and I. Meilik, "Encapsulation
              for Bit Index Explicit Replication (BIER) in MPLS and Non-
              MPLS Networks", RFC 8296, DOI 10.17487/RFC8296, January
              2018, <https://www.rfc-editor.org/info/rfc8296>.

Authors' Addresses

   IJsbrand Wijnands
   Individual
   Belgium

   Email: ice@braindump.be


   Mankamana Mishra
   Cisco Systems
   821 alder drive
    Milpitas , CA
   USA

   Email: mankamis@cisco.com


   Xiaohu Xu
   Alibaba Group

   Email: xiaohu.xxh@alibaba-inc.com


   Hooman Bidgoli
   Nokia
   600 March Rd.
   Ottawa, Ontario  K2K 2E6
   Canada

   Email: hooman.bidgoli@nokia.com














Wijnands, et al.        Expires December 1, 2021                [Page 6]
