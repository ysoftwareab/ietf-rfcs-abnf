





Network Working Group                                    Justin Fletcher
Internet Draft                                       Proficient Networks
Expiration Date: July 2003


                  Inactive Path Advertisement in BGP-4

                draft-fletcher-bgp-inactive-path-00.txt


                          Status of this Memo

   This document is an Internet-Draft and is subject to all provisions
   of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/1id-abstracts.html

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html

Abstract

   This document defines BGP capabilities and a path attribute to permit
   advertisement of routes other than those selected during the BGP
   decision process.  These extensions would provide additional routing
   information for research, monitoring and policy decisions.

1. Introduction

   BGP [BGP-4] as currently defined advertises only routes to BGP peers
   selected through the decision process.  These advertised routes,
   known as the active path, provide an incomplete view of a BGP peer's
   knowledge of network adjacency; additional routes may be present in
   the Adj-RIBs-In which have not been selected by the decision process,
   otherwise known as the inactive path.  Advertisement of a peer's
   complete set of active and inactive paths will provide additional
   information for route servers, research, monitoring and policy



Fletcher                                                        [Page 1]

Internet Draft    Inactive Path Advertisement in BGP-4      January 2003


   decisions.

   The INACTIVE_PATH Path Attribute and Inactive Path Capabilities are
   defined to identify advertised routes on an inactive path and routers
   capable of processing such routes.

   A potential application in a production network would be for a
   provider to selectively advertise as inactive paths a customer's CIDR
   ranges back to them.  This would allow the customer to see advertised
   routes after provider processing for troubleshooting purposes.
   Outbound filtering may be applied to constrain the visibility of
   specific attributes.

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC2119].

2. Path Attribute

   INACTIVE_PATH is an optional non-transitive attribute of length 0;
   the type code for this attribute is specified in the "IANA
   Considerations" section of this document.

   It is used by a BGP speaker to inform other BGP speakers that the
   advertised route is not advertised as a result of the BGP decision
   process.  As such, it MUST NOT be considered in the listener's
   decision process and MUST NOT be re-advertised.

3. Inactive Path Capabilities

   The Inactive Path Capabilities are two new BGP capabilities [BGP-
   CAP].  The Capability Code for both of these Capabilities are
   specified in the "IANA Considerations" section of this document.  The
   Capability Length field of both Capabilities is set to 0.

   By advertising the Inactive Path Send Capability to a peer in the
   OPEN, a BGP speaker informs the peer that the speaker is capable of
   sending UPDATE messages containing routes with the INACTIVE_PATH
   attribute set.

   By advertising the Inactive Path Receive Capability to a peer in the
   OPEN, a BGP speaker informs the peer that the speaker is capable of
   processing UPDATE messages containing routes with the INACTIVE_PATH
   attribute set.







Fletcher                                                        [Page 2]

Internet Draft    Inactive Path Advertisement in BGP-4      January 2003


4. Configuration

   When Inactive Path Capabilities are supported, a configuration option
   MUST be provided specifying whether inactive path routes are to be
   advertised or received on a per-peer basis.  The default
   configuration for this option MUST be to advertise or receive only
   active path routes.

5. Route Advertisement

   Routes are selected for advertisement through the BGP decision
   process.  When is option is enabled, the routes that were not
   selected through the decision process are processed into the
   associated Adj-RIBs-Out with the INACTIVE_PATH attribute set
   including applicable filtering and route processing performed by the
   BGP peer.  Outbound filters are then applied and the resultant Adj-
   RIBs-Out are advertised to the BGP peers.

   Routes containing the INACTIVE_PATH attribute set MUST NOT be sent
   unless the speaker has sent the Inactive Path Send Capability and the
   listener has sent the Inactive Path Receive Capability in the
   corresponding OPEN messages.

References

   [BGP-4] Y. Rekhter, and T. Li, "A Border Gateway Protocol 4 (BGP-4)",
   RFC 1771, March 1995.

   [BGP-CAP] R. Chandra, J. Scudder, "Capabilities Advertisement with
   BGP-4", RFC 2842, May 2000.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
   Requirement Levels", BCP 14, RFC 2119, March 1997.

Security Considerations

   These extensions to BGP do not change the underlying security issues.

IANA Considerations

   This document uses a BGP Capability Code to indicate that a BGP
   speaker supports the Inactive Path Capability and a Attribute Type to
   indicate an advertised inactive path.  The Capability Code and
   Attribute Type must be assigned by IANA per RFC 2842.







Fletcher                                                        [Page 3]

Internet Draft    Inactive Path Advertisement in BGP-4      January 2003


Acknowledgments

   The author would like to thank Robert Bays and Bruce Pinsky for
   providing invaluable insight and expertise.

Author Information

   Justin Fletcher
   Proficient Networks
   300 California
   Suite 500
   San Francisco, CA 94104
   e-mail: jfletcher@proficient.net






































Fletcher                                                        [Page 4]
