<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>HTTP framework for time-based access to resource states -- Memento</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.1.1" rel="Chapter" title="1.1 Terminology">
<link href="#rfc.section.1.2" rel="Chapter" title="1.2 Purpose">
<link href="#rfc.section.1.3" rel="Chapter" title="1.3 Notational Conventions">
<link href="#rfc.section.2" rel="Chapter" title="2 The Memento Framework, Datetime Negotiation component: HTTP headers, HTTP Link Relation Types">
<link href="#rfc.section.2.1" rel="Chapter" title="2.1 HTTP Headers">
<link href="#rfc.section.2.1.1" rel="Chapter" title="2.1.1 Accept-Datetime, Memento-Datetime">
<link href="#rfc.section.2.1.1.1" rel="Chapter" title="2.1.1.1 Values for Accept-Datetime">
<link href="#rfc.section.2.1.1.2" rel="Chapter" title="2.1.1.2 Values for Memento-Datetime">
<link href="#rfc.section.2.1.2" rel="Chapter" title="2.1.2 Vary">
<link href="#rfc.section.2.1.3" rel="Chapter" title="2.1.3 Location">
<link href="#rfc.section.2.1.4" rel="Chapter" title="2.1.4 Link">
<link href="#rfc.section.2.2" rel="Chapter" title="2.2 Link Header Relation Types">
<link href="#rfc.section.2.2.1" rel="Chapter" title="2.2.1 Memento Framework Relation Types">
<link href="#rfc.section.2.2.1.1" rel="Chapter" title='2.2.1.1 Relation Type "original"'>
<link href="#rfc.section.2.2.1.2" rel="Chapter" title='2.2.1.2 Relation Type "timegate"'>
<link href="#rfc.section.2.2.1.3" rel="Chapter" title='2.2.1.3 Relation Type "timemap"'>
<link href="#rfc.section.2.2.1.4" rel="Chapter" title='2.2.1.4 Relation Type "memento"'>
<link href="#rfc.section.2.2.2" rel="Chapter" title="2.2.2 Other Relation Types">
<link href="#rfc.section.3" rel="Chapter" title="3 The Memento Framework, Datetime Negotiation component: HTTP Interactions">
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 Interactions with an Original Resource">
<link href="#rfc.section.3.1.1" rel="Chapter" title="3.1.1 Step 1: User Agent Requests an Original Resource">
<link href="#rfc.section.3.1.2" rel="Chapter" title="3.1.2 Step 2: Server Responds to a Request for an Original Resource">
<link href="#rfc.section.3.1.2.1" rel="Chapter" title="3.1.2.1 Original Resource is an Appropriate Memento">
<link href="#rfc.section.3.1.2.2" rel="Chapter" title="3.1.2.2 Server Exists and Original Resource Used to Exist">
<link href="#rfc.section.3.1.2.3" rel="Chapter" title="3.1.2.3 Missing or Inadequate &quot;timegate&quot; Link in Original Server's Response">
<link href="#rfc.section.3.2" rel="Chapter" title="3.2 Interactions with a TimeGate">
<link href="#rfc.section.3.2.1" rel="Chapter" title="3.2.1 Step 3: User Agent Negotiates with a TimeGate">
<link href="#rfc.section.3.2.2" rel="Chapter" title="3.2.2 Step 4: Server Responds to Negotiation with TimeGate">
<link href="#rfc.section.3.2.2.1" rel="Chapter" title="3.2.2.1 Successful Scenario">
<link href="#rfc.section.3.2.2.2" rel="Chapter" title="3.2.2.2 Accept-Datetime with Interval Indicator Provided">
<link href="#rfc.section.3.2.2.3" rel="Chapter" title="3.2.2.3 Multiple Matching Mementos">
<link href="#rfc.section.3.2.2.4" rel="Chapter" title="3.2.2.4 TimeGate Redirects to another TimeGate">
<link href="#rfc.section.3.2.2.5" rel="Chapter" title="3.2.2.5 Accept-Datetime and other Accept Headers Provided">
<link href="#rfc.section.3.2.2.6" rel="Chapter" title="3.2.2.6 Accept-Datetime Unparseable">
<link href="#rfc.section.3.2.2.7" rel="Chapter" title="3.2.2.7 Accept-Datetime Not Provided">
<link href="#rfc.section.3.2.2.8" rel="Chapter" title="3.2.2.8 TimeGate Does Not Exist">
<link href="#rfc.section.3.2.2.9" rel="Chapter" title="3.2.2.9 HTTP Methods other than HEAD/GET">
<link href="#rfc.section.3.2.3" rel="Chapter" title="3.2.3 Recognizing a TimeGate">
<link href="#rfc.section.3.3" rel="Chapter" title="3.3 Interactions with a Memento">
<link href="#rfc.section.3.3.1" rel="Chapter" title="3.3.1 Step 5: User Agent Requests a Memento">
<link href="#rfc.section.3.3.2" rel="Chapter" title="3.3.2 Step 6: Server Responds to a Request for a Memento">
<link href="#rfc.section.3.3.2.1" rel="Chapter" title="3.3.2.1 Memento Does not Exist">
<link href="#rfc.section.3.3.2.2" rel="Chapter" title="3.3.2.2 Mementos Without a TimeGate">
<link href="#rfc.section.3.3.3" rel="Chapter" title="3.3.3 Recognizing a Memento">
<link href="#rfc.section.3.4" rel="Chapter" title="3.4 Interactions with a TimeMap">
<link href="#rfc.section.3.4.1" rel="Chapter" title="3.4.1 User Agent Requests a TimeMap">
<link href="#rfc.section.3.4.2" rel="Chapter" title="3.4.2 Server Responds to a Request for a TimeMap">
<link href="#rfc.section.4" rel="Chapter" title="4 The Memento Framework, Discovery Component">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 Discovering TimeGates Via Robots Exclusion Protocol">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Discovering Mementos via Robots Exclusion Protocol">
<link href="#rfc.section.5" rel="Chapter" title="5 IANA Considerations">
<link href="#rfc.section.6" rel="Chapter" title="6 Security Considerations">
<link href="#rfc.section.7" rel="Chapter" title="7 Changelog">
<link href="#rfc.section.8" rel="Chapter" title="8 Acknowledgements">
<link href="#rfc.references" rel="Chapter" title="9 References">
<link href="#rfc.references.1" rel="Chapter" title="9.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="9.2 Informative References">
<link href="#rfc.appendix.Appendix%20A" rel="Chapter" title="Appendix A Appendix B: A Sample, Successful Memento Request/Response cycle">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="The HTTP-based Memento framework bridges the present and past Web by interlinking current resources with resources that encapsulate their past. It facilitates obtaining representations of prior states of a resource, available from archival resources in Web archives or version resources in content management systems, by leveraging the resource's URI and a preferred datetime. To this end, the framework introduces datetime negotiation (a variation on content negotiation), and new Relation Types for the HTTP Link header aimed at interlinking resources with their archival/version resources.  It also introduces various discovery mechanisms that further support bridging the present and past Web.  " />
  <meta name="description" content="The HTTP-based Memento framework bridges the present and past Web by interlinking current resources with resources that encapsulate their past. It facilitates obtaining representations of prior states of a resource, available from archival resources in Web archives or version resources in content management systems, by leveraging the resource's URI and a preferred datetime. To this end, the framework introduces datetime negotiation (a variation on content negotiation), and new Relation Types for the HTTP Link header aimed at interlinking resources with their archival/version resources.  It also introduces various discovery mechanisms that further support bridging the present and past Web.  " />
  <meta name="keywords" content="HTTP, content negotiation, datetime negotiation, resource versions, archival resources, Memento" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Internet Engineering Task Force</td>
<td class="right">H. VandeSompel</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">Los Alamos National Laboratory</td>
</tr>
<tr>
<td class="left">Intended status: Informational</td>
<td class="right">M.L. Nelson</td>
</tr>
<tr>
<td class="left">Expires: December 05, 2011</td>
<td class="right">Old Dominion University</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">R.D. Sanderson</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Los Alamos National Laboratory</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">June 03, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">HTTP framework for time-based access to resource states -- Memento<br />
  <span class="filename">draft-vandesompel-memento-02</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>The HTTP-based Memento framework bridges the present and past Web by interlinking current resources with resources that encapsulate their past. It facilitates obtaining representations of prior states of a resource, available from archival resources in Web archives or version resources in content management systems, by leveraging the resource's URI and a preferred datetime. To this end, the framework introduces datetime negotiation (a variation on content negotiation), and new Relation Types for the HTTP Link header aimed at interlinking resources with their archival/version resources.  It also introduces various discovery mechanisms that further support bridging the present and past Web.  </p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on December 05, 2011.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>1.1.   <a href="#rfc.section.1.1">Terminology</a>
</li>
<li>1.2.   <a href="#rfc.section.1.2">Purpose</a>
</li>
<li>1.3.   <a href="#rfc.section.1.3">Notational Conventions</a>
</li>
<li>2.   <a href="#rfc.section.2">The Memento Framework, Datetime Negotiation component: HTTP headers, HTTP Link Relation Types</a>
</li>
<li>2.1.   <a href="#rfc.section.2.1">HTTP Headers</a>
</li>
<li>2.1.1.   <a href="#rfc.section.2.1.1">Accept-Datetime, Memento-Datetime</a>
</li>
<li>2.1.1.1.   <a href="#rfc.section.2.1.1.1">Values for Accept-Datetime</a>
</li>
<li>2.1.1.2.   <a href="#rfc.section.2.1.1.2">Values for Memento-Datetime</a>
</li>
<li>2.1.2.   <a href="#rfc.section.2.1.2">Vary</a>
</li>
<li>2.1.3.   <a href="#rfc.section.2.1.3">Location</a>
</li>
<li>2.1.4.   <a href="#rfc.section.2.1.4">Link</a>
</li>
<li>2.2.   <a href="#rfc.section.2.2">Link Header Relation Types</a>
</li>
<li>2.2.1.   <a href="#rfc.section.2.2.1">Memento Framework Relation Types</a>
</li>
<li>2.2.1.1.   <a href="#rfc.section.2.2.1.1">Relation Type "original"</a>
</li>
<li>2.2.1.2.   <a href="#rfc.section.2.2.1.2">Relation Type "timegate"</a>
</li>
<li>2.2.1.3.   <a href="#rfc.section.2.2.1.3">Relation Type "timemap"</a>
</li>
<li>2.2.1.4.   <a href="#rfc.section.2.2.1.4">Relation Type "memento"</a>
</li>
<li>2.2.2.   <a href="#rfc.section.2.2.2">Other Relation Types</a>
</li>
<li>3.   <a href="#rfc.section.3">The Memento Framework, Datetime Negotiation component: HTTP Interactions</a>
</li>
<li>3.1.   <a href="#rfc.section.3.1">Interactions with an Original Resource</a>
</li>
<li>3.1.1.   <a href="#rfc.section.3.1.1">Step 1: User Agent Requests an Original Resource</a>
</li>
<li>3.1.2.   <a href="#rfc.section.3.1.2">Step 2: Server Responds to a Request for an Original Resource</a>
</li>
<li>3.1.2.1.   <a href="#rfc.section.3.1.2.1">Original Resource is an Appropriate Memento</a>
</li>
<li>3.1.2.2.   <a href="#rfc.section.3.1.2.2">Server Exists and Original Resource Used to Exist</a>
</li>
<li>3.1.2.3.   <a href="#rfc.section.3.1.2.3">Missing or Inadequate "timegate" Link in Original Server's Response</a>
</li>
<li>3.2.   <a href="#rfc.section.3.2">Interactions with a TimeGate</a>
</li>
<li>3.2.1.   <a href="#rfc.section.3.2.1">Step 3: User Agent Negotiates with a TimeGate</a>
</li>
<li>3.2.2.   <a href="#rfc.section.3.2.2">Step 4: Server Responds to Negotiation with TimeGate</a>
</li>
<li>3.2.2.1.   <a href="#rfc.section.3.2.2.1">Successful Scenario</a>
</li>
<li>3.2.2.2.   <a href="#rfc.section.3.2.2.2">Accept-Datetime with Interval Indicator Provided</a>
</li>
<li>3.2.2.3.   <a href="#rfc.section.3.2.2.3">Multiple Matching Mementos</a>
</li>
<li>3.2.2.4.   <a href="#rfc.section.3.2.2.4">TimeGate Redirects to another TimeGate</a>
</li>
<li>3.2.2.5.   <a href="#rfc.section.3.2.2.5">Accept-Datetime and other Accept Headers Provided</a>
</li>
<li>3.2.2.6.   <a href="#rfc.section.3.2.2.6">Accept-Datetime Unparseable</a>
</li>
<li>3.2.2.7.   <a href="#rfc.section.3.2.2.7">Accept-Datetime Not Provided</a>
</li>
<li>3.2.2.8.   <a href="#rfc.section.3.2.2.8">TimeGate Does Not Exist</a>
</li>
<li>3.2.2.9.   <a href="#rfc.section.3.2.2.9">HTTP Methods other than HEAD/GET</a>
</li>
<li>3.2.3.   <a href="#rfc.section.3.2.3">Recognizing a TimeGate</a>
</li>
<li>3.3.   <a href="#rfc.section.3.3">Interactions with a Memento</a>
</li>
<li>3.3.1.   <a href="#rfc.section.3.3.1">Step 5: User Agent Requests a Memento</a>
</li>
<li>3.3.2.   <a href="#rfc.section.3.3.2">Step 6: Server Responds to a Request for a Memento</a>
</li>
<li>3.3.2.1.   <a href="#rfc.section.3.3.2.1">Memento Does not Exist</a>
</li>
<li>3.3.2.2.   <a href="#rfc.section.3.3.2.2">Mementos Without a TimeGate</a>
</li>
<li>3.3.3.   <a href="#rfc.section.3.3.3">Recognizing a Memento</a>
</li>
<li>3.4.   <a href="#rfc.section.3.4">Interactions with a TimeMap</a>
</li>
<li>3.4.1.   <a href="#rfc.section.3.4.1">User Agent Requests a TimeMap</a>
</li>
<li>3.4.2.   <a href="#rfc.section.3.4.2">Server Responds to a Request for a TimeMap</a>
</li>
<li>4.   <a href="#rfc.section.4">The Memento Framework, Discovery Component</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">Discovering TimeGates Via Robots Exclusion Protocol</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">Discovering Mementos via Robots Exclusion Protocol</a>
</li>
<li>5.   <a href="#rfc.section.5">IANA Considerations</a>
</li>
<li>6.   <a href="#rfc.section.6">Security Considerations</a>
</li>
<li>7.   <a href="#rfc.section.7">Changelog</a>
</li>
<li>8.   <a href="#rfc.section.8">Acknowledgements</a>
</li>
<li>9.   <a href="#rfc.references">References</a>
</li>
<li>9.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>9.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li>Appendix A.   <a href="#rfc.appendix.Appendix%20A">Appendix B: A Sample, Successful Memento Request/Response cycle</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<h1 id="rfc.section.1.1">
<a href="#rfc.section.1.1">1.1.</a> Terminology</h1>
<p id="rfc.section.1.1.p.1">This specification uses the terms "resource", "request", "response", "entity", "entity-body", "entity-header", "content negotiation", "client", "user agent", "server" as described in <a href="#RFC2616">RFC 2616</a> <cite title="NONE">[RFC2616]</cite>, and it uses the terms "representation" and "resource state" as described in <a href="#W3C.REC-aww-20041215">W3C.REC-aww-20041215</a> <cite title="NONE">[W3C.REC-aww-20041215]</cite>.  </p>
<p id="rfc.section.1.1.p.2">In addition, the following terms specific to the Memento framework are introduced: </p>
<p></p>

<ul>
<li>Original Resource: An Original Resource is a resource that exists or used to exist, and for which access to one of its prior states is desired.  </li>
<li>Memento: A Memento for an Original Resource is a resource that encapsulates a prior state of the Original Resource.  A Memento for an Original Resource as it existed at time Tj is a resource that encapsulates the state that the Original Resource had at time Tj.  </li>
<li>TimeGate: A TimeGate for an Original Resource is a resource that is capable of negotiation to allow selective, datetime-based, access to prior states of the Original Resource.  </li>
<li>TimeMap: A TimeMap for an Original Resource is a resource from which a list of URIs of Mementos of the Original Resource is available.  </li>
</ul>

<p> </p>
<h1 id="rfc.section.1.2">
<a href="#rfc.section.1.2">1.2.</a> Purpose</h1>
<p id="rfc.section.1.2.p.1">The state of an Original Resource may change over time. Dereferencing its URI at any specific moment in time during its existence yields a representation of its then current state. Dereferencing its URI at any time past its existence no longer yields a meaningful representation, if any. Still, in both cases, resources may exist that encapsulate prior states of the Original Resource.  Each such resource, named a Memento, has its own URI that, when dereferenced, returns a representation of a prior state of the Original Resource.  Mementos may, for example, exist in Web archives, Content Management Systems, or Revision Control Systems.  </p>
<p id="rfc.section.1.2.p.2">Examples are:</p>
<p id="rfc.section.1.2.p.3">Mementos for Original Resource http://www.ietf.org/ :</p>
<p></p>

<ul>
<li>http://web.archive.org/web/19970107171109/http://www.ietf.org/</li>
<li>http://webarchive.nationalarchives.gov.uk/20080906200044/http://www.ietf.org/</li>
</ul>
<p id="rfc.section.1.2.p.5">Mementos for Original Resource http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol :</p>
<p></p>

<ul>
<li>http://en.wikipedia.org/w/index.php?title=Hypertext_Transfer_Protocol&amp;oldid=366806574</li>
<li>http://en.wikipedia.org/w/index.php?title=Hypertext_Transfer_Protocol&amp;oldid=33912</li>
<li>http://web.archive.org/web/20071011153017/http://en.wikipedia.org/wiki/Hypertext_Transfer_Protocol</li>
</ul>
<p id="rfc.section.1.2.p.7">Mementos for Original Resource http://www.w3.org/TR/webarch/ :</p>
<p></p>

<ul>
<li>http://www.w3.org/TR/2004/PR-webarch-20041105/</li>
<li>http://www.w3.org/TR/2002/WD-webarch-20020830/</li>
<li>http://webarchive.nationalarchives.gov.uk/20100304163140/http://www.w3.org/TR/webarch/</li>
</ul>
<p id="rfc.section.1.2.p.9">In the abstract, Memento introduces a mechanism to access versions of Web resources that: </p>
<p></p>

<ul>
<li>Is fully distributed in the sense that resource versions may reside on multiple hosts, and that any such host is likely only aware of the versions it holds;</li>
<li>Uses the global notion of datetime as a resource version indicator and access key;</li>
<li>Leverages the following primitives of <a href="#W3C.REC-aww-20041215">W3C.REC-aww-20041215</a> <cite title="NONE">[W3C.REC-aww-20041215]</cite>: resource, resource state, representation, content negotiation, and link.</li>
</ul>
<p id="rfc.section.1.2.p.11">The core components of Memento's mechanism to access resource versions are:</p>
<p id="rfc.section.1.2.p.12">1. The abstract notion of the state of a resource identified by URI-R as it existed at some time Tj.  Note the relationship with the ability to identify a the state of a resource at some datetime Tj by means of a URI as intended by the proposed Dated URI scheme <a href="#I-D.masinter-dated-uri">I-D.masinter-dated-uri</a> <cite title="NONE">[I-D.masinter-dated-uri]</cite>.  </p>
<p id="rfc.section.1.2.p.13">2. A bridge from the present to the past, consisting of: </p>
<p></p>

<ul>
<li>An appropriately typed link from a resource identified by URI-R to an associated TimeGate identified by URI-G, which is aware of (at least part of the) version history of the resource identified by URI-R;</li>
<li>The ability to content negotiate in the datetime dimension with the TimeGate identified by URI-G, as a means to obtain a representation of the state that the resource identified by URI-R had at some datetime Tj.</li>
</ul>
<p id="rfc.section.1.2.p.15">3. A bridge from the past to the present, consisting of an appropriately typed link from a resource identified by URI-M, which encapsulates the state a resource identified by URI-R had at some datetime Tj, to the resource identified by URI-R.  </p>
<p><a href="#component-1.1">Section 2</a> and <a href="#component-1.2">Section 3</a> of this document are concerned with specifying an instantiation of these abstractions for resources that are identified by HTTP(S) URIs, whereas <a href="#component-2">Section 4</a> details approaches to discover TimeGates, TimeMaps, and Mementos on the HTTP(S) Web by other means than typed links.  </p>
<h1 id="rfc.section.1.3">
<a href="#rfc.section.1.3">1.3.</a> <a href="#notation" id="notation">Notational Conventions</a>
</h1>
<p id="rfc.section.1.3.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">RFC 2119</a> <cite title="NONE">[RFC2119]</cite>.  </p>
<p id="rfc.section.1.3.p.2">When needed for extra clarity, the following conventions are used: </p>
<p></p>

<ul>
<li>URI-R is used to denote the URI of an Original Resource.</li>
<li>URI-G is used to denote the URI of a TimeGate.</li>
<li>URI-M is used to denote the URI of a Memento.</li>
<li>URI-T is used to denote the URI of a TimeMap.</li>
<li>When scenarios are described that involve multiple Mementos, URI-M0 denotes the URI of the first Memento known to the responding server, URI-Mn denotes the URI of the most recent known Memento, URI-Mj denotes the URI of the selected Memento, URI-Mi denotes the URI of the Memento that is temporally previous to the selected Memento, and URI-Mk denotes the URI of the Memento that is temporally after the selected Memento. The respective datetimes for these Mementos are T0, Tn, Tj, Ti, and Tk; it holds that T0 &lt;= Ti &lt;= Tj &lt;= Tk &lt;= Tn.</li>
</ul>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> <a href="#component-1.1" id="component-1.1">The Memento Framework, Datetime Negotiation component: HTTP headers, HTTP Link Relation Types</a>
</h1>
<p id="rfc.section.2.p.1">The Memento framework is concerned with Original Resources, TimeGates, Mementos, and TimeMaps that are identified by HTTP or HTTPS URIs.  Details are only provided for resources identified by HTTP URIs but apply similarly to those with HTTPS URIs.  </p>
<h1 id="rfc.section.2.1">
<a href="#rfc.section.2.1">2.1.</a> HTTP Headers</h1>
<p id="rfc.section.2.1.p.1">The Memento framework operates at the level of HTTP request and response headers. It introduces two new headers ("Accept-Datetime", "Memento-Datetime"), introduces new values for two existing headers ("Vary", "Link"), and uses an existing header ("Location") without modification. All these headers are described below.  Other HTTP headers are present or absent in Memento response/request cycles as specified by <a href="#RFC2616">RFC 2616</a> <cite title="NONE">[RFC2616]</cite>.  </p>
<h1 id="rfc.section.2.1.1">
<a href="#rfc.section.2.1.1">2.1.1.</a> <a href="#Accept-Memento-Datetime" id="Accept-Memento-Datetime">Accept-Datetime, Memento-Datetime</a>
</h1>
<p id="rfc.section.2.1.1.p.1">The "Accept-Datetime" request header is used by a user agent to indicate it wants to retrieve a representation of a Memento that encapsulates a past state of an Original Resource. To that end, the "Accept-Datetime" header is conveyed in an HTTP GET/HEAD request issued against a TimeGate for an Original Resource, and its value indicates the datetime of the desired past state of the Original Resource.  The "Accept-Datetime" request header has no defined meaning for HTTP methods other than HEAD and GET.  </p>
<p id="rfc.section.2.1.1.p.2">The "Memento-Datetime" response header is used by a server to indicate that the response contains a representation of a Memento, and its value expresses the datetime of the state of an Original Resource that is encapsulated in that Memento.  The URI of that Original Resource is provided in the response, as the Target IRI (see <a href="#RFC5988">RFC5988</a> <cite title="NONE">[RFC5988]</cite>) of a link provided in the HTTP "Link" header that has a Relation Type of "original" (see <a href="#Link-Header-Relation-Types">Section 2.2</a>).  </p>
<p id="rfc.section.2.1.1.p.3">The presence of a "Memento-Datetime" header and associated value for a given resource constitutes a promise that the resource is stable and that its state will no longer change. This means that, in terms of the Ontology for Relating Generic and Specific Information Resources (see <a href="#W3C.gen-ont-20090420">W3C.gen-ont-20090420</a> <cite title="NONE">[W3C.gen-ont-20090420]</cite>), a Memento is a FixedResource.</p>
<p id="rfc.section.2.1.1.p.4">As a consequence, "Memento-Datetime" headers associated with a Memento MUST be "sticky" in the following ways:</p>
<p></p>

<ul>
<li>The server that originally assigns the "Memento-Datetime" header and value MUST retain that header in all responses to HTTP HEAD/GET requests (with or without "Accept-Datetime" header) that occur against the Memento after the time of the original assignment of the header, and it MUST NOT change its associated value.</li>
<li>Applications that mirror Mementos at a different URI MUST NOT change the "Memento-Datetime" header and value of those Mementos unless mirroring involves a meaningful state change.  This allows, for example, duplicating a Web archive at a new location while preserving the value of the "Memento-Datetime" header of the archived resources. In this example, the "Last-Modified" header will be updated to reflect the time of mirroring at the new URI, whereas the value for "Memento-Datetime" will be sticky.</li>
</ul>
<h1 id="rfc.section.2.1.1.1">
<a href="#rfc.section.2.1.1.1">2.1.1.1.</a> <a href="#accept-datetime" id="accept-datetime">Values for Accept-Datetime</a>
</h1>
<p id="rfc.section.2.1.1.1.p.1">Values for the "Accept-Datetime" header consist of a MANDATORY datetime expressed according to the <a href="#RFC1123">RFC 1123</a> <cite title="NONE">[RFC1123]</cite> format, which is formalized by the rfc1123-date construction rule of the BNF in <a href="#datetime-BNF">Figure 2</a>, and an OPTIONAL interval indicator expressed according to the iso8601-interval rule of the BNF in <a href="#datetime-BNF">Figure 2</a>. The datetime MUST be represented in Greenwich Mean Time (GMT).  </p>
<p id="rfc.section.2.1.1.1.p.2">Examples of "Accept-Datetime" request headers with and without an interval indicator: </p>
<div id="#rfc.figure.1"></div>
<pre> 
Accept-Datetime: Thu, 31 May 2007 20:35:00 GMT
Accept-Datetime: Thu, 31 May 2007 20:35:00 GMT; -P3DT5H;+P2DT6H
</pre>
<p id="rfc.section.2.1.1.1.p.3">The user agent uses the MANDATORY datetime value to convey its preferred datetime for a Memento; it uses the OPTIONAL interval indicator to convey it is interested in retrieving Mementos that reside within this interval around the preferred datetime, and not interested in Mementos that reside outside of it.  Not using an interval indicator is equivalent to expressing an infinite interval around the preferred datetime.  </p>
<p id="rfc.section.2.1.1.1.p.4">The interval mechanism can be regarded as an implementation of the functionality intended by the q-value approach that is used in regular content negotiation. The q-value approach is not supported for Memento's datetime negotiation because it is well-suited for negotiation over a discrete space of mostly predictable values, not for negotiation over a continuum of unpredictable datetime values.  </p>
<div id="#rfc.figure.2"></div>
<div id="#datetime-BNF"></div>
<pre>

accept-dt-value = rfc1123-date *SP [ iso8601-interval ]
rfc1123-date = wkday "," SP date1 SP time SP "GMT"
date1        = 2DIGIT SP month SP 4DIGIT 
                  ; day month year (e.g., 20 Mar 1957)
time         = 2DIGIT ":" 2DIGIT ":" 2DIGIT 
                  ; 00:00:00 - 23:59:59 (e.g., 14:33:22)
wkday        = "Mon" | "Tue" | "Wed" | "Thu" | "Fri" | "Sat" | 
               "Sun" 
month        = "Jan" | "Feb" | "Mar" | "Apr" | "May" | "Jun" | 
               "Jul" | "Aug" | "Sep" | "Oct" | "Nov" | "Dec"
iso8601-interval = ";" *SP "-" duration *SP ";" *SP "+" duration
duration = "P" ( dur-date | dur-week )
dur-date = ( dur-day | dur-month | dur-year ) [ dur-time ]
dur-year = 1*DIGIT "Y" [ dur-month ] [ dur-day ]
dur-month = 1*DIGIT "M" [ dur-day ]
dur-day = 1*DIGIT "D"
dur-time = "T" ( dur-hour | dur-minute | dur-second )
dur-hour = 1*DIGIT "H" [ dur-minute ] [ dur-second ]
dur-minute = 1*DIGIT "M" [ dur-second ]
dur-second = 1*DIGIT "S"
dur-week = 1*DIGIT "W"

</pre>
<h1 id="rfc.section.2.1.1.2">
<a href="#rfc.section.2.1.1.2">2.1.1.2.</a> <a href="#memento-datetime" id="memento-datetime">Values for Memento-Datetime</a>
</h1>
<p id="rfc.section.2.1.1.2.p.1">Values for the "Memento-Datetime" headers MUST be datetimes expressed according to the rfc1123-date construction rule of the BNF in <a href="#datetime-BNF">Figure 2</a>; they MUST be represented in Greenwich Mean Time (GMT).  </p>
<p id="rfc.section.2.1.1.2.p.2">An example "Memento-Datetime" response header: </p>
<div id="#rfc.figure.3"></div>
<pre> 
Memento-Datetime: Wed, 30 May 2007 18:47:52 GMT
</pre>
<h1 id="rfc.section.2.1.2">
<a href="#rfc.section.2.1.2">2.1.2.</a> Vary</h1>
<p id="rfc.section.2.1.2.p.1">The "Vary" response header is used in responses to indicate the dimensions in which content negotiation was successfully applied. This header is used in the Memento framework to indicate both whether datetime negotiation was applied or is supported by the responding server.  </p>
<p id="rfc.section.2.1.2.p.2">For example, this use of the "Vary" header indicates that datetime is the only dimension in which negotiation was applied: </p>
<div id="#rfc.figure.4"></div>
<pre>
Vary: negotiate, accept-datetime
</pre>
<p id="rfc.section.2.1.2.p.3">The use of the "Vary" header in this example shows that both datetime negotiation, and media type content negotiation were applied: </p>
<div id="#rfc.figure.5"></div>
<pre>
Vary: negotiate, accept-datetime, accept
</pre>
<h1 id="rfc.section.2.1.3">
<a href="#rfc.section.2.1.3">2.1.3.</a> Location</h1>
<p id="rfc.section.2.1.3.p.1">The "Location" header is used as defined in <a href="#RFC2616">RFC 2616</a> <cite title="NONE">[RFC2616]</cite>.  Examples are given in <a href="#component-1.2">Section 3</a> below.  </p>
<h1 id="rfc.section.2.1.4">
<a href="#rfc.section.2.1.4">2.1.4.</a> Link</h1>
<p id="rfc.section.2.1.4.p.1">The "Link" response header is specified in <a href="#RFC5988">RFC5988</a> <cite title="NONE">[RFC5988]</cite>.  The Memento framework introduces new Relation Types to convey typed links among Original Resources, TimeGates, Mementos, and TimeMaps.  Already existing Relation Types, among others, aimed at supporting navigation among a series of ordered resources may also be used in the Memento framework.  This is detailed in <a href="#Link-Header-Relation-Types">Link Header Relation Types</a> <cite title="NONE">[Link-Header-Relation-Types]</cite>, below.  </p>
<h1 id="rfc.section.2.2">
<a href="#rfc.section.2.2">2.2.</a> <a href="#Link-Header-Relation-Types" id="Link-Header-Relation-Types">Link Header Relation Types</a>
</h1>
<p id="rfc.section.2.2.p.1">The "Link" header specified in <a href="#RFC5988">RFC5988</a> <cite title="NONE">[RFC5988]</cite> is semantically equivalent to the "&lt;LINK&gt;" element in HTML, as well as the "atom:link" feed-level element in Atom <a href="#RFC4287">RFC 4287</a> <cite title="NONE">[RFC4287]</cite>.  By default, the origin of a link expressed by an entry in a "Link" header (named Context IRI in <a href="#RFC5988">RFC5988</a> <cite title="NONE">[RFC5988]</cite>) is the IRI of the requested resource. This default can be overwritten using the "anchor" attribute in the entry.  </p>
<h1 id="rfc.section.2.2.1">
<a href="#rfc.section.2.2.1">2.2.1.</a> <a href="#memento-rels" id="memento-rels">Memento Framework Relation Types</a>
</h1>
<p id="rfc.section.2.2.1.p.1">The Relation Types used in the Memento framework are listed in the remainder of this section, and their use is summarized in the below table. <a href="#AppendixFlow">Appendix Appendix A</a> shows a Memento request/response cycle that uses all the Relation Types that are introduced here.</p>
<div id="#rfc.table.1"></div>
<div id="#Relation-Type-Table"></div>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>The use of Relation Types</caption>
<thead><tr>
<th class="center">Relation Type</th>
<th class="center">Original Resource</th>
<th class="center">TimeGate</th>
<th class="center">Memento</th>
</tr></thead>
<tbody>
<tr>
<td class="center">original</td>
<td class="center">NA, except see <a href="#HTTP_OriginalResource_server_memento">Section 3.1.2.1</a>
</td>
<td class="center">REQUIRED, 1</td>
<td class="center">REQUIRED, 1</td>
</tr>
<tr>
<td class="center">timegate</td>
<td class="center">RECOMMENDED, 0 or more</td>
<td class="center">REQUIRED, 1 in case of <a href="#HTTP_TimeGate_redirect">Section 3.2.2.4</a>
</td>
<td class="center">RECOMMENDED, 0 or more</td>
</tr>
<tr>
<td class="center">timemap</td>
<td class="center">NA</td>
<td class="center">RECOMMENDED, 0 or more</td>
<td class="center">RECOMMENDED, 0 or more</td>
</tr>
<tr>
<td class="center">memento</td>
<td class="center">NA, except see <a href="#HTTP_OriginalResource_server_memento">Section 3.1.2.1</a>
</td>
<td class="center">REQUIRED, 1 or more</td>
<td class="center">REQUIRED, 1 or more</td>
</tr>
</tbody>
</table>
<h1 id="rfc.section.2.2.1.1">
<a href="#rfc.section.2.2.1.1">2.2.1.1.</a> Relation Type "original"</h1>
<p id="rfc.section.2.2.1.1.p.1">"original" -- A "Link" header entry with a Relation Type of "original" is used to point from a TimeGate or a Memento to their associated Original Resource.  In both cases, an entry with the "original" Relation Type MUST occur exactly once in a "Link" header.  Details for the entry are as follows: </p>
<p></p>

<ul>
<li>Context IRI: URI-G, URI-M</li>
<li>Target IRI: URI-R</li>
<li>Relation Type: "original"</li>
<li>Use: REQUIRED</li>
<li>Cardinality: 1</li>
</ul>
<h1 id="rfc.section.2.2.1.2">
<a href="#rfc.section.2.2.1.2">2.2.1.2.</a> Relation Type "timegate"</h1>
<p id="rfc.section.2.2.1.2.p.1">"timegate" -- A "Link" header entry with a Relation Type of "timegate" is used to point both from an Original Resource or a Memento to a TimeGate for the Original Resource. In both cases, the use of an entry with the "timegate" Relation Type is RECOMMENDED. Since more than one TimeGate can exist for any Original Resource, multiple entries with a "timegate" Relation Type MAY occur, each with a distinct Target IRI. Since a TimeGate has no mime type, the "type" attribute MUST NOT be used on Links with a "timegate" Relation Type.  Details for the entry are as follows: </p>
<p></p>

<ul>
<li>Context IRI: URI-R or URI-Mj</li>
<li>Target IRI: URI-G</li>
<li>Relation Type: "timegate"</li>
<li>Use: RECOMMENDED</li>
<li>Cardinality: 0 or more</li>
</ul>
<p id="rfc.section.2.2.1.2.p.3">In the special case (see <a href="#HTTP_TimeGate_redirect">Section 3.2.2.4</a>) where a TimeGate redirects to another TimeGate for the Original Resource, a "Link" header entry with a Relation Type of "timegate" MUST be used to point from the former to the latter.  </p>
<h1 id="rfc.section.2.2.1.3">
<a href="#rfc.section.2.2.1.3">2.2.1.3.</a> Relation Type "timemap"</h1>
<p id="rfc.section.2.2.1.3.p.1">"timemap" -- A "Link" header entry with a Relation Type of "timemap" is used to point from both a TimeGate or a Memento to a TimeMap resource from which a list of Mementos known to the responding server is available.  Use of an entry with the "timemap" Relation Type is RECOMMENDED, and, since multiple serializations of a TimeMap are possible, multiple entries with a "timemap" Relation Type MAY occur, each with a distinct Target IRI, and each with a MANDATORY "type" attribute to convey the mime type of the TimeMap serialization. Details for the entry are as follows: </p>
<p></p>

<ul>
<li>Context IRI: URI-G or URI-Mi</li>
<li>Target IRI: URI-T</li>
<li>Relation Type: "timemap"</li>
<li>Target Attribute: "type"</li>
<li>Use: RECOMMENDED</li>
<li>Cardinality: 0 or more</li>
</ul>
<p id="rfc.section.2.2.1.3.p.3">Further details about TimeMap serializations are provided in <a href="#timemap">Section 3.4</a>.</p>
<h1 id="rfc.section.2.2.1.4">
<a href="#rfc.section.2.2.1.4">2.2.1.4.</a> <a href="#memento-rel" id="memento-rel">Relation Type "memento"</a>
</h1>
<p id="rfc.section.2.2.1.4.p.1">"memento" -- A "Link" header entry with a Relation Type of "memento" is used to point from both a TimeGate and a Memento to various Mementos for an Original Resource.  This link MUST include a "datetime" attribute with a value that matches the "Memento-Datetime" of the Memento that is the target of the link; that is, the value of the "Memento-Datetime" header that is returned when the URI of the linked Memento is dereferenced.  In addition, the link MAY include an "embargo" attribute to convey the datetime until which the Memento will remain inaccessible.  The value for both the "datetime" and "embargo" attributes MUST be a datetime expressed according to the rfc1123-date construction rule of the BNF in <a href="#datetime-BNF">Figure 2</a> and it MUST be represented in Greenwich Mean Time (GMT).  This link MAY also include a "license" attribute to associate a license with the Memento; the value for the "license" attribute SHOULD be a URI.  The link SHOULD also include a "type" attribute to convey the mime type of the Memento that is the target of the link.  Use of entries with the "memento" Relation Type is REQUIRED and it MUST be as follows: </p>
<p id="rfc.section.2.2.1.4.p.2">For all responses to HTTP HEAD/GET requests issued against a TimeGate or a Memento in which a Memento is selected or served by the responding server:</p>
<p></p>

<ul>
<li>One "memento" link MUST be included that has as Target IRI the URI of the Memento that was selected or served;</li>
<li>One "memento" link MUST be included that has as Target IRI the URI of the temporally first Memento known to the responding server;</li>
<li>One "memento" link MUST be included that has as Target IRI the URI of the temporally most recent Memento known to the responding server.</li>
<li>One "memento" link SHOULD be included that has as Target IRI the URI of the Memento that is previous to the selected Memento in the temporal series of all Mementos (sorted by ascending "Memento-Datetime" values) known to the server;</li>
<li>One "memento" link SHOULD be included that has as Target IRI the URI the Memento that is next to the selected Memento in the temporal series of all Mementos (sorted by ascending "Memento-Datetime" values) known to the server.</li>
<li>Other "memento" links MAY only be included if both the aforementioned previous and next links are provided.  Each of these OPTIONAL "memento" links MUST have as Target IRI the URI of a Memento other than the ones listed above.</li>
</ul>
<p id="rfc.section.2.2.1.4.p.4">For all responses to HTTP HEAD/GET requests issued against an existing TimeGate or Memento in which no Memento is selected or served by the responding server:</p>
<p></p>

<ul>
<li>One "memento" link MUST be included that has as Target IRI the URI of the temporally first Memento known to the responding server;</li>
<li>One "memento" link MUST be included that has as Target IRI the URI of the temporally most recent Memento known to the responding server.</li>
<li>Other "memento" links MAY be included, and each of these OPTIONAL links MUST have as Target IRI the URI of a Memento other than the two listed above.</li>
</ul>
<p id="rfc.section.2.2.1.4.p.6">Note that the Target IRI of some of these links may coincide. For example, if the selected Memento actually is the first Memento known to the server, only three distinct "memento" links may result. The value for the "datetime" attribute of these links would be the datetimes of the first (equal to selected), next, and most recent Memento known to the responding server.</p>
<p id="rfc.section.2.2.1.4.p.7">The summary is as follows:</p>
<p></p>

<ul>
<li>Context IRI: URI-G, URI-Mj</li>
<li>Target IRI: URI-M</li>
<li>Relation Type: "memento"</li>
<li>Target Attributes: "datetime", "embargo", "license"</li>
<li>Use: REQUIRED</li>
<li>Cardinality: 1 or more</li>
</ul>
<h1 id="rfc.section.2.2.2">
<a href="#rfc.section.2.2.2">2.2.2.</a> <a href="#other-rels" id="other-rels">Other Relation Types</a>
</h1>
<p id="rfc.section.2.2.2.p.1">Web Linking <a href="#RFC5988">RFC5988</a> <cite title="NONE">[RFC5988]</cite> allows for the inclusion of links with different Relation Types but the same Target IRI, and hence the Relation Types introduced by the Memento framework MAY be combined with others as deemed necessary. As the "memento" Relation Type focuses on conveying the datetime of a linked Memento, Relation Types that allow navigating among the temporally ordered series of Mementos known to a server are of particular importance. With this regard, the Relation Types listed in the below table SHOULD be considered for combination with the "memento" Relation Type. A distinction is made between responding servers that can be categorized as systems that are the focus of <a href="#RFC5829">RFC5829</a> <cite title="NONE">[RFC5829]</cite> (such as version control systems) and others that can not (such as Web archives). Note that, in terms of <a href="#RFC5829">RFC5829</a> <cite title="NONE">[RFC5829]</cite>, the last Memento (URI-Mn) is the version prior to the latest (i.e. current) version.</p>
<div id="#rfc.table.2"></div>
<div id="#other-rel-types"></div>
<table cellpadding="3" cellspacing="0" class="tt full center">
<caption>The use of Relation Types</caption>
<thead><tr>
<th class="center">Memento Type</th>
<th class="center">RFC5988 system</th>
<th class="center">non RFC5988 system</th>
</tr></thead>
<tbody>
<tr>
<td class="center">First Memento (URI-M0)</td>
<td class="center">first</td>
<td class="center">first</td>
</tr>
<tr>
<td class="center">Last Memento (URI-Mn)</td>
<td class="center">last</td>
<td class="center">last</td>
</tr>
<tr>
<td class="center">Selected Memento (URI-Mj)</td>
<td class="center">NA</td>
<td class="center">NA</td>
</tr>
<tr>
<td class="center">Memento prior to selected Memento (URI-Mi)</td>
<td class="center">predecessor-version</td>
<td class="center">prev</td>
</tr>
<tr>
<td class="center">Memento next to selected Memento (URI-Mk)</td>
<td class="center">successor-version</td>
<td class="center">next</td>
</tr>
</tbody>
</table>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> <a href="#component-1.2" id="component-1.2">The Memento Framework, Datetime Negotiation component: HTTP Interactions</a>
</h1>
<p id="rfc.section.3.p.1">This section describes the HTTP interactions of the Memento framework for a variety of scenarios. First, <a href="#intro-flow">Figure 6</a> provides a schematic overview of a successful request/response chain that involves datetime negotiation. Dashed lines depict HTTP transactions between user agent and server. <a href="#AppendixFlow">Appendix Appendix A</a> shows these HTTP interactions in detail for the case where the Original Resource resides on one server, whereas both the TimeGate and the Mementos reside on another. Scenarios also exist in which all these resources are on the same server (for example, Content Management Systems) or on different servers (for example, an aggregator of TimeGates).  Note that, in Step 2 and Step 6, the HTTP status code of the response is shown as "200 OK", but a series of "206 Partial Content" responses could be substituted without loss of generality.  </p>
<div id="#rfc.figure.6"></div>
<div id="#intro-flow"></div>
<pre>
1: UA --- HTTP GET/HEAD; Accept-Datetime: Tj ---------------&gt; URI-R
2: UA &lt;-- HTTP 200; Link: URI-G ----------------------------- URI-R
3: UA --- HTTP GET/HEAD; Accept-Datetime: Tj ---------------&gt; URI-G
4: UA &lt;-- HTTP 302; Location: URI-Mj; Vary; Link:
      URI-R,URI-T,URI-M0,URI-Mn,URI-Mi,URI-Mj,URI-Mk -------- URI-G
5: UA --- HTTP GET URI-Mj; Accept-Datetime: Tj -------------&gt; URI-Mj
6: UA &lt;-- HTTP 200; Memento-Datetime: Tj; Link:  
      URI-R,URI-T,URI-G,URI-M0,URI-Mn,URI-Mi,URI-Mj,URI-Mk -- URI-Mj
</pre>
<p></p>

<ul>
<li>Step 1: In order to determine what the URI is of a TimeGate for an Original Resource, the user agent issues an HTTP HEAD/GET request against the URI of the Original Resource (URI-R).  </li>
<li>Step 2: The entity-header of the response from URI-R includes an HTTP "Link" header with a Relation Type of "timegate" pointing at a TimeGate (URI-G) for the Original Resource.  </li>
<li>Step 3: The user agent starts the datetime negotiation process with the TimeGate by issuing an HTTP GET request against its URI-G thereby including an "Accept-Datetime" HTTP header with a value of the datetime of the desired prior state of the Original Resource.  </li>
<li>Step 4: The entity-header of the response from URI-G includes a "Location" header pointing at the URI of a Memento (URI-Mj) for the Original Resource.  In addition, the entity-header contains an HTTP "Link" header with a Relation Type of "original" pointing at the Original Resource, and an HTTP "Link" header with a Relation Type of "timemap" pointing at a TimeMap (URI-T). Also HTTP Links pointing at various Mementos are provided using the "memento" Relation Type, as specified in <a href="#memento-rel">Section 2.2.1.4</a>.  </li>
<li>Step 5: The user agent issues an HTTP GET request against the URI-Mj of a Memento, obtained in Step 4.  </li>
<li>Step 6: The entity-header of the response from URI-Mj includes a "Memento-Datetime" HTTP header with a value of the datetime of the Memento.  It also contains an HTTP "Link" header with a Relation Type of "original" pointing at the Original Resource, with a Relation Type of "timegate" pointing at a TimeGate associated with the Original Resource, and with a Relation Type of "timemap" pointing at a TimeMap.  The state that is expressed by the representation provided in the response is the state the Original Resource had at the datetime expressed in the "Memento-Datetime" header. This response also includes HTTP Links with a "memento" Relation Type pointing at various Mementos, as specified in <a href="#memento-rel">Section 2.2.1.4</a>.  </li>
</ul>
<p id="rfc.section.3.p.3">The following sections detail the specifics of HTTP interactions with Original Resources, TimeGates, Mementos, and TimeMaps under various conditions.  </p>
<h1 id="rfc.section.3.1">
<a href="#rfc.section.3.1">3.1.</a> <a href="#HTTP_OriginalResource" id="HTTP_OriginalResource">Interactions with an Original Resource</a>
</h1>
<p id="rfc.section.3.1.p.1">This section details HTTP GET/HEAD requests targeted at an Original Resource (URI-R).  </p>
<h1 id="rfc.section.3.1.1">
<a href="#rfc.section.3.1.1">3.1.1.</a> <a href="#HTTP_OriginalResource_client" id="HTTP_OriginalResource_client">Step 1: User Agent Requests an Original Resource</a>
</h1>
<p id="rfc.section.3.1.1.p.1">In order to try and discover a TimeGate for the Original Resource, the user agent SHOULD issue an HTTP HEAD or GET request against the Original Resource's URI.  Use of the "Accept-Datetime" header in the HTTP HEAD/GET request is OPTIONAL.  </p>
<p><a href="#a200-step1-http">Figure 7</a> shows the use of HTTP HEAD indicating the user agent is not interested in retrieving a representation of the Original Resource, but only in determining a TimeGate for it.  It also shows the use of the "Accept-Datetime" header anticipating that the user agent will set it for the entire duration of a Memento request/response cycle.  </p>
<div id="#rfc.figure.7"></div>
<div id="#a200-step1-http"></div>
<pre>
HEAD / HTTP/1.1
Host: a.example.org
Accept-Datetime: Tue, 11 Sep 2001 20:35:00 GMT
Connection: close
</pre>
<h1 id="rfc.section.3.1.2">
<a href="#rfc.section.3.1.2">3.1.2.</a> <a href="#HTTP_OriginalResource_server" id="HTTP_OriginalResource_server">Step 2: Server Responds to a Request for an Original Resource</a>
</h1>
<p id="rfc.section.3.1.2.p.1">The response of the Original Resource's server to the user agent's HTTP HEAD/GET request of Step 1, for the case where the Original Resource exists, is as it would be in a regular HTTP request/response cycle, but in addition MAY include a HTTP "Link" header with a Relation Type of "timegate" that conveys the URI of the Original Resource's TimeGate as the Target IRI of the Link.  Multiple HTTP Links with a relation type of "timegate" MAY be provided to accommodate situations in which the server is aware of multiple TimeGates for an Original Resource. The actual Target IRI provided in the "timegate" Link may depend on several factors including the datetime provided in the "Accept-Datetime" header, and the IP address of the user agent.  A response for this case is illustrated in <a href="#a200-step2-http">Figure 8</a>.  </p>
<div id="#rfc.figure.8"></div>
<div id="#a200-step2-http"></div>
<pre>
HTTP/1.1 200 OK
Date: Thu, 21 Jan 2010 00:02:12 GMT
Server: Apache
Link: &lt;http://arxiv.example.net/timegate/http://a.example.org&gt;
   ; rel="timegate"
Content-Length: 255
Connection: close
Content-Type: text/html; charset=iso-8859-1
</pre>
<p id="rfc.section.3.1.2.p.2">Servers that actively maintain archives of their resources SHOULD include the "timegate" HTTP "Link" header because this link is an important way for a user agent to discover TimeGates for those resources.  This includes servers such as Content Management Systems, Control Version Systems, and Web servers with associated transactional archives <a href="#Fitch">Fitch</a> <cite title="NONE">[Fitch]</cite>.  Servers that do not actively maintain archives of their resources MAY include the "timegate" HTTP "Link" header as a way to convey a preference for TimeGates for their resources exposed by a third party archive.  This includes servers that rely on Web archives such as the Internet Archive to archive their resources.  </p>
<p id="rfc.section.3.1.2.p.3">The server of the Original Resource MUST treat requests with and without an "Accept-Datetime" header in the same way: </p>
<p></p>

<ul>
<li>The response MUST either always or never include a HTTP "Link" header with an entry that has a "timegate" Relation Type and the URI of a TimeGate as the Target IRI.</li>
<li>The entity-body of the response MUST be the same, for user agent requests with or without a "Accept-Datetime" header.</li>
</ul>
<h1 id="rfc.section.3.1.2.1">
<a href="#rfc.section.3.1.2.1">3.1.2.1.</a> <a href="#HTTP_OriginalResource_server_memento" id="HTTP_OriginalResource_server_memento">Original Resource is an Appropriate Memento</a>
</h1>
<p id="rfc.section.3.1.2.1.p.1">The "Memento-Datetime" header MAY be applied to an Original Resource directly to indicate it is a FixedResource (see <a href="#W3C.gen-ont-20090420">W3C.gen-ont-20090420</a> <cite title="NONE">[W3C.gen-ont-20090420]</cite>), meaning that the state of the Original Resource has not changed since the datetime conveyed in the "Memento-Datetime" header, and as a promise that it will not change anymore beyond it. This may occur, for example, for certain stable media resources on news sites.  In case the user agent's preferred datetime is equal to or more recent than the datetime conveyed as the value of "Memento-Datetime" in the server's response in Step 2, the user agent SHOULD conclude it has located an appropriate Memento, and it SHOULD NOT continue to Step 3.</p>
<p><a href="#memento-response-URI-R1">Figure 9</a> illustrates such a response to a request for the resource with URI http://a.example.org/pic that has been stable since it was created. Note the use of both the "memento" and "original" Relation Types for links that have as Target IRI the URI of the Original Resource.  </p>
<div id="#rfc.figure.9"></div>
<div id="#memento-response-URI-R1"></div>
<pre>
HTTP/1.1 200 OK
Date: Thu, 21 Jan 2010 00:02:12 GMT
Server: Apache
Link: 
 &lt;http://a.example.org/pic&gt; 
  ; rel="original memento" 
  ; datetime="Fri, 20 Mar 2009 11:00:00 GMT"
Memento-Datetime: Fri, 20 Mar 2009 11:00:00 GMT
Content-Length: 255
Connection: close
Content-Type: text/html; charset=iso-8909-1

</pre>
<p id="rfc.section.3.1.2.1.p.3">Cases may also exist in which a resource becomes stable at a certain point in its existence, but changed previously.  In such cases, the Original Resource may know about a TimeGate that is aware of its prior history and hence MAY also include a link with a "timegate" Relation Type. This is illustrated in <a href="#memento-response-URI-R2">Figure 10</a>, where the "memento" and "original" Relation Types are used as in <a href="#memento-response-URI-R1">Figure 9</a>, and the existence of a TimeGate to negotiate for Mementos with datetimes prior to Fri, 20 Mar 2009 11:00:00 GMT is indicated.</p>
<div id="#rfc.figure.10"></div>
<div id="#memento-response-URI-R2"></div>
<pre>
HTTP/1.1 200 OK
Date: Thu, 21 Jan 2010 00:02:12 GMT
Server: Apache
Link: 
 &lt;http://a.example.org/pic&gt; 
  ; rel="original memento" 
  ; datetime="Fri, 20 Mar 2009 11:00:00 GMT",
 &lt;http://arxiv.example.net/timegate/http://a.example.org/pic&gt; 
  ; rel="timegate"
Memento-Datetime: Fri, 20 Mar 2009 11:00:00 GMT
Content-Length: 255
Connection: close
Content-Type: text/html; charset=iso-8909-1
</pre>
<h1 id="rfc.section.3.1.2.2">
<a href="#rfc.section.3.1.2.2">3.1.2.2.</a> <a href="#HTTP_OriginalResource_server_404" id="HTTP_OriginalResource_server_404">Server Exists and Original Resource Used to Exist</a>
</h1>
<p id="rfc.section.3.1.2.2.p.1">Servers SHOULD also provide a "timegate" HTTP "Link" header in responses to requests for an Original Resource that the server knows used to exist, but no longer does.  This allows the use of an Original Resource's URI as an entry point to representations of its prior states even if the resource itself no longer exists. A server's response for this case is illustrated in <a href="#a404-response-URI-R">Figure 11</a>.  </p>
<div id="#rfc.figure.11"></div>
<div id="#a404-response-URI-R"></div>
<pre>
HTTP/1.1 404 Not Found
Date: Thu, 21 Jan 2010 00:02:12 GMT
Server: Apache
Link: 
 &lt;http://arxiv.example.net/timegate/http://a.example.org/gone&gt; 
  ; rel="timegate"
Content-Length: 255
Connection: close
Content-Type: text/html; charset=iso-8909-1

</pre>
<p id="rfc.section.3.1.2.2.p.2">In case the server is not aware of the prior existence of the Original Resource, its response SHOULD NOT include a "timegate" HTTP Link.  <a href="#HTTP_OriginalResource_server_xxx">Section 3.1.2.3</a> details what the user agent's behavior should be in such cases.</p>
<h1 id="rfc.section.3.1.2.3">
<a href="#rfc.section.3.1.2.3">3.1.2.3.</a> <a href="#HTTP_OriginalResource_server_xxx" id="HTTP_OriginalResource_server_xxx">Missing or Inadequate "timegate" Link in Original Server's Response</a>
</h1>
<p id="rfc.section.3.1.2.3.p.1">A user agent MAY ignore the TimeGate returned in Step 2. However, when engaging in a Memento request/response cycle, a user agent SHOULD NOT proceed immediately to Step 3 by using a TimeGate of its own preference but rather SHOULD always start the cycle by issuing an HTTP GET/HEAD against the Original Resource (Step 1, <a href="#a200-step1-http">Figure 7</a>) as it is an important way to learn about dedicated or preferred TimeGates for the Original Resource. Also, cases exist in which the response in Step 2 will not provide a "timegate" link, including:</p>
<p></p>

<ul>
<li>The Original Resource's server does not support the Memento framework;</li>
<li>The Original Resource no longer exists and the responding server is not aware of its prior existence;</li>
<li>The server that hosted the Original Resource no longer exists;</li>
</ul>
<p id="rfc.section.3.1.2.3.p.3">In all these cases, the user agent SHOULD attempt to determine an appropriate TimeGate for the Original Resource, either automatically or interactively supported by the user. The discovery mechanisms described in <a href="#component-2">Section 4</a> can support the user agent with this regard.</p>
<h1 id="rfc.section.3.2">
<a href="#rfc.section.3.2">3.2.</a> <a href="#HTTP_TimeGate" id="HTTP_TimeGate">Interactions with a TimeGate</a>
</h1>
<p id="rfc.section.3.2.p.1">This section details HTTP GET/HEAD requests targeted at a TimeGate (URI-G).</p>
<h1 id="rfc.section.3.2.1">
<a href="#rfc.section.3.2.1">3.2.1.</a> <a href="#HTTP_TimeGate_client" id="HTTP_TimeGate_client">Step 3: User Agent Negotiates with a TimeGate</a>
</h1>
<p id="rfc.section.3.2.1.p.1">In order to negotiate with a TimeGate, the user agent MUST issue a HTTP HEAD or GET against its URI, its request MUST include the "Accept-Datetime" header to express its datetime preference, and the use of that header MUST be as described in <a href="#accept-datetime">Section 2.1.1.1</a>.  The URI of the TimeGate may have been provided as the Target IRI of a "timegate" HTTP "Link" header in the response from the Original Resource (Step 2, <a href="#a200-step2-http">Figure 8</a>), or may have resulted from another discovery mechanism (see <a href="#component-2">Section 4</a>) or user interaction.  Such a request is illustrated in <a href="#a200-step3-http">Figure 12</a>.  </p>
<div id="#rfc.figure.12"></div>
<div id="#a200-step3-http"></div>
<pre>
GET /timegate/http://a.example.org HTTP/1.1
Host: arxiv.example.net
Accept-Datetime: Tue, 11 Sep 2001 20:35:00 GMT
Connection: close
</pre>
<h1 id="rfc.section.3.2.2">
<a href="#rfc.section.3.2.2">3.2.2.</a> <a href="#HTTP_TimeGate_server" id="HTTP_TimeGate_server">Step 4: Server Responds to Negotiation with TimeGate</a>
</h1>
<p id="rfc.section.3.2.2.p.1">In order to respond to a datetime negotiation request (Step 3, <a href="#HTTP_TimeGate_client">Section 3.2.1</a>), the server uses an internal algorithm to select the Memento that best meets the user agent's datetime preference, and redirects to it. The exact nature of the selection algorithm is at the server's discretion but SHOULD be consistent. A variety of approaches can be used including selecting the Memento that is nearest in time (either past or future) or nearest in the past relative to the requested datetime.  Special cases for datetime negotiation with a TimeGate exist, and they are addressed in <a href="#HTTP_TimeGate_server_302">Section 3.2.2.7</a> through <a href="#HTTP_TimeGate_server_404">Section 3.2.2.8</a>.  </p>
<h1 id="rfc.section.3.2.2.1">
<a href="#rfc.section.3.2.2.1">3.2.2.1.</a> <a href="#HTTP_TimeGate_server_OK" id="HTTP_TimeGate_server_OK">Successful Scenario</a>
</h1>
<p id="rfc.section.3.2.2.1.p.1">In cases where the TimeGate exists, and the datetime provided in the user agent's "Accept-Datetime" header can be parsed and does not contain an interval indicator, the server selects a Memento based on the user agent's datetime preference. The response MUST have a "302 Found" HTTP status code, and the "Location" header MUST be used to convey the URI of the selected Memento.  The "Vary" header MUST be provided and it MUST include the "negotiate" and "accept-datetime" values to indicate that datetime negotiation has taken place. The "Link" header MUST be provided and contain links with Relation Types subject to the considerations described in <a href="#Link-Header-Relation-Types">Section 2.2</a>.  Such a response is illustrated in <a href="#a200-step4-http">Figure 13</a>.  </p>
<div id="#rfc.figure.13"></div>
<div id="#a200-step4-http"></div>
<pre>
HTTP/1.1 302 Found
Date: Thu, 21 Jan 2010 00:06:50 GMT
Server: Apache
Vary: negotiate, accept-datetime
Location: 
 http://arxiv.example.net/web/20010911203610/http://a.example.org
Link: &lt;http://a.example.org&gt;; rel="original",
 &lt;http://arxiv.example.net/timemap/http://a.example.org&gt;
   ; rel="timemap"; type="application/link-format",
 &lt;http://arxiv.example.net/web/20000915112826/http://a.example.org&gt;
   ; rel="first memento"; datetime="Tue, 15 Sep 2000 11:28:26 GMT",
 &lt;http://arxiv.example.net/web/20080708093433/http://a.example.org&gt;
   ; rel="last memento"; datetime="Tue, 08 Jul 2008 09:34:33 GMT",
 &lt;http://arxiv.example.net/web/20010911203610/http://a.example.org&gt;
   ; rel="memento"; datetime="Tue, 11 Sep 2001 20:36:10 GMT",
 &lt;http://arxiv.example.net/web/20010911203610/http://a.example.org&gt;
   ; rel="prev memento"; datetime="Tue, 11 Sep 2001 20:30:51 GMT",
 &lt;http://arxiv.example.net/web/20010911203610/http://a.example.org&gt; 
   ; rel="next memento"; datetime="Tue, 11 Sep 2001 20:47:33 GMT"
Content-Length: 0
Content-Type: text/plain; charset=UTF-8
Connection: close
</pre>
<p id="rfc.section.3.2.2.1.p.2">Note that if a user agent's "Accept-Datetime" header does not convey an interval indicator, and conveys a datetime that is either earlier than the datetime of the first Memento or later than the datetime of the most recent Memento known to the server, the server's response is as just described yet entails the selection of the first or most recent Memento, respectively. This approach is consistent with interpreting the abscence of an interval indicator in the user agent's request as an indication of an infinite interval around its preferred datetime (see <a href="#accept-datetime">Section 2.1.1.1</a>).  </p>
<p id="rfc.section.3.2.2.1.p.3">This is illustrated in <a href="#a406-http-a">Figure 14</a> that shows the response from a TimeGate exposed by a MediaWiki server to a request by a user agent that has an "Accept-Datetime: Mon, 31 May 1999 00:00:00 GMT" header. Note that a link is provided with a "successor-version" Relation Type but not with a "predecessor-version" Relation Type.  </p>
<div id="#rfc.figure.14"></div>
<div id="#a406-http-a"></div>
<pre>
HTTP/1.1 302 Found
Server: Apache
Content-Length: 709
Content-Type: text/html; charset=utf-8
Date: Thu, 21 Jan 2010 00:09:40 GMT
Location: 
 http://a.example.org/w/index.php?title=Clock&amp;oldid=1493688
Vary: negotiate, accept-datetime
Link: &lt;http://a.example.org/w/Clock&gt;; rel="original",
 &lt;http://a.example.org/Special:TimeMap/http://a.example.org/w/Clock&gt;
   ; rel="timemap",
 &lt;http://a.example.org/w/index.php?title=Clock&amp;oldid=1493688&gt;
   ; rel="first memento"; datetime="Sun, 28 Sep 2003 01:42:00 GMT", 
    &lt;http://a.example.org/w/index.php?title=Clock&amp;oldid=1493854&gt;
   ; rel="successor-version memento"
   ; datetime="Tue, 30 Sep 2003 14:28:00 GMT", 
 &lt;http://a.example.org/w/index.php?title=Clock&amp;oldid=337446696&gt;
   ; rel="last memento"; datetime="Tue, 12 Jan 2010 19:55:00 GMT"
Connection: close
</pre>
<h1 id="rfc.section.3.2.2.2">
<a href="#rfc.section.3.2.2.2">3.2.2.2.</a> <a href="#ua_range" id="ua_range">Accept-Datetime with Interval Indicator Provided</a>
</h1>
<p id="rfc.section.3.2.2.2.p.1">In case, in Step 3, the datetime provided in the user agent's "Accept-Datetime" header can be parsed, and contains an interval indicator, the response depends on whether the server is or is not aware of Mementos with datetimes within the expressed interval.  If the server is aware of such Mementos, the server's response MUST be as in <a href="#HTTP_TimeGate_server_OK">Section 3.2.2.1</a>.  </p>
<p id="rfc.section.3.2.2.2.p.2">However, if the responding server is not aware of any Mementos with "Memento-Datetime" values within the expressed interval, the server's response MUST have a "406 Not Acceptable" HTTP status code. The use of the "Vary" header MUST be as described in <a href="#HTTP_TimeGate_server_OK">Section 3.2.2.1</a>.  The use of the "Link" header MUST be as described in <a href="#Link-Header-Relation-Types">Section 2.2</a>.  Specifically, the use of links with a "memento" Relation Type MUST follow the rules for the case where no Memento is selected by the responding server (<a href="#memento-rel">Section 2.2.1.4</a>) and it is RECOMMENDED that the server provides "memento" links pointing at Mementos that have "Memento-Datetime" values in the temporal vicinity of the interval expressed by the client.  </p>
<p id="rfc.section.3.2.2.2.p.3">As a result, a user agent that allows for the provision of an interval indicator in requests SHOULD anticipate possible "406 Not Acceptable" responses and provide the capability for their resolution. For example, the client can leverage the "memento" links returned by the responding server, can extend its preferred interval, or can remove it from further requests.</p>
<p><a href="#a406-http-req">Figure 15</a> shows a user agent using an "Accept-Datetime" header conveying an interval of interest starting 5 hours before and ending 6 hours after Tue, 11 Sep 2001 20:35:00 GMT. <a href="#a406-http-res">Figure 16</a> shows the "406 Not Acceptable" response from the TimeGate that has links to the first and last Memento, as well to two Mementos, one on either temoporal side of the user agent's preferred interval.  </p>
<div id="#rfc.figure.15"></div>
<div id="#a406-http-req"></div>
<pre>
GET /timegate/http://a.example.org HTTP/1.1
Host: arxiv.example.net
Accept-Datetime: Tue, 11 Sep 2001 20:35:00 GMT; -PT5H;+PT6H
Connection: close
</pre>
<div id="#rfc.figure.16"></div>
<div id="#a406-http-res"></div>
<pre>
HTTP/1.1 406 Not Acceptable
Date: Thu, 21 Jan 2010 00:06:50 GMT
Server: Apache
Vary: negotiate, accept-datetime
Link: &lt;http://an.example.org&gt;; rel="original",
 &lt;http://arxiv.example.net/timemap/http://a.example.org&gt;
   ; rel="timemap";type="application/link-format",
 &lt;http://arxiv.example.net/web/20000915112826/http://a.example.org&gt;
   ; rel="memento first"; datetime="Tue, 15 Sep 2000 11:28:26 GMT",
 &lt;http://arxiv.example.net/web/20080708093433/http://a.example.org&gt;
   ; rel="memento last"; datetime="Tue, 08 Jul 2008 09:34:33 GMT",
 &lt;http://arxiv.example.net/web/20010910082200/http://a.example.org&gt;
   ; rel="memento"; datetime="Mon, 10 Sep 2001 08:22:00 GMT",
 &lt;http://arxiv.example.net/web/20010912034100/http://a.example.org&gt;
   ; rel="memento"; datetime="Wed, 12 Sep 2001 03:41:00 GMT"
Content-Length: 1732
Connection: close
Content-Type: text/plain; charset=UTF-8
</pre>
<h1 id="rfc.section.3.2.2.3">
<a href="#rfc.section.3.2.2.3">3.2.2.3.</a> <a href="#HTTP_TimeGate_server_300" id="HTTP_TimeGate_server_300">Multiple Matching Mementos</a>
</h1>
<p id="rfc.section.3.2.2.3.p.1">Because the finest datetime granularity expressable using the <a href="#RFC1123">RFC 1123</a> <cite title="NONE">[RFC1123]</cite> format used in HTTP is seconds level, cases may occur in which a TimeGate server is aware of multiple Mementos that meet the user agent's datetime preference.  This may occur in Content Management Systems with very high update rates.  The response in this case MUST be handled as in <a href="#HTTP_TimeGate_server_OK">Section 3.2.2.1</a>, with the selection of one of the matching Mementos.  </p>
<p id="rfc.section.3.2.2.3.p.2">As an example, <a href="#a300-http">Figure 17</a> shows a hypothetical response from a TimeGate on a MediaWiki server to a request for a Memento for the Original Resource http://a.example.org/w/Clock for which two Mementos exist for the user agent's preferred datetime.  </p>
<div id="#rfc.figure.17"></div>
<div id="#a300-http"></div>
<pre>
HTTP/1.1 302 Found
Server: Apache
Content-Length: 705
Content-Type: text/html; charset=utf-8
Date: Thu, 21 Jan 2010 00:09:40 GMT
Vary: negotiate, accept-datetime
Location: 
 http://a.example.org/w/index.php?title=Clock&amp;oldid=322586071
Link: &lt;http://a.example.org/w/Clock&gt;; rel="original",
 &lt;http://a.example.org/Special:TimeMap/http://a.example.org/w/Clock&gt;
   ; rel="timemap";type="application/link-format",
 &lt;http://a.example.org/w/index.php?title=Clock&amp;oldid=1493688&gt;
   ; rel="first memento"; datetime="Sun, 28 Sep 2003 01:42:00 GMT",
 &lt;http://a.example.org/w/index.php?title=Clock&amp;oldid=337446696&gt;
   ; rel="last memento"; datetime="Tue, 12 Jan 2010 19:55:00 GMT",
 &lt;http://a.example.org/w/index.php?title=Clock&amp;oldid=322586071&gt;
   ; rel="memento"; datetime="Sun, 31 May 2009 15:43:00 GMT",
 &lt;http://a.example.org/w/index.php?title=Clock&amp;oldid=326164283&gt; 
   ; rel="memento successor-version"
   ; datetime="Sun, 31 May 2009 15:43:00 GMT"
 &lt;http://a.example.org/w/index.php?title=Clock&amp;oldid=326164283&gt; 
   ; rel="memento predecessor-version"
   ; datetime="Sun, 31 May 2009 15:41:24 GMT"
Connection: close
</pre>
<h1 id="rfc.section.3.2.2.4">
<a href="#rfc.section.3.2.2.4">3.2.2.4.</a> <a href="#HTTP_TimeGate_redirect" id="HTTP_TimeGate_redirect">TimeGate Redirects to another TimeGate</a>
</h1>
<p id="rfc.section.3.2.2.4.p.1">Cases may exist in which a TimeGate's response entails a redirects to another TimeGate, for example, because the responding TimeGate is aware that the other TimeGate is able to more precisely respond to a client's datetime preference.  In such cases, the TimeGate's response MUST have a "302 Found" HTTP status code, and the "Location" header MUST be used to convey the URI of the other TimeGate.  The "Vary" header MUST be provided and it MUST include the "negotiate" and "accept-datetime" values to indicate that, although datetime negotiation has not taken place, the responding TimeGate is capable of it.  The "Link" header MUST be provided and contain links with Relation Types subject to the considerations described in <a href="#Link-Header-Relation-Types">Section 2.2</a>.  Specifically, the use of links with a "memento" Relation Type MUST follow the rules for the case where no Memento is selected by the responding server (<a href="#memento-rel">Section 2.2.1.4</a>). Also, a link with a "timegate" Relation Type MUST be provided that has as Target IRI the URI of the TimeGate to which the current TimeGate is redirecting the client.  </p>
<p id="rfc.section.3.2.2.4.p.2">A response in which the client is redirected by TimeGate http://arxiv.example.net/timegate/http://a.example.org to TimeGate http://otherarxiv.example.com/timegate/http://a.example.org for the Original Resource http://a.example.org is illustrated in <a href="#step4-tg-redirect">Figure 18</a>. Note the URI of the latter TimeGate in both the "Location" and "Link" header, in the latter case as the Target IRI of a "timegate" link.  Note also that the "memento" and "timemap" links in this response reflect the knowledge of the responding TimeGate, not of the remote TimeGate.  </p>
<div id="#rfc.figure.18"></div>
<div id="#step4-tg-redirect"></div>
<pre>
HTTP/1.1 302 Found
Date: Thu, 21 Jan 2010 00:06:50 GMT
Server: Apache
Vary: negotiate, accept-datetime
Location: 
 http://otherarxiv.example.com/timegate/http://a.example.org
Link: &lt;http://a.example.org&gt;; rel="original",
 &lt;http://arxiv.example.net/timemap/http://a.example.org&gt;
   ; rel="timemap"; type="application/link-format",
 &lt;http://arxiv.example.net/web/20000915112826/http://a.example.org&gt;
   ; rel="first memento"; datetime="Tue, 15 Sep 2000 11:28:26 GMT",
 &lt;http://arxiv.example.net/web/20080708093433/http://a.example.org&gt;
   ; rel="last memento"; datetime="Tue, 08 Jul 2008 09:34:33 GMT",
 &lt;http://otherarxiv.example.com/timegate/http://a.example.org&gt;
   ; rel="timegate"
Content-Length: 0
Content-Type: text/plain; charset=UTF-8
Connection: close
</pre>
<h1 id="rfc.section.3.2.2.5">
<a href="#rfc.section.3.2.2.5">3.2.2.5.</a> <a href="#HTTP_TimeGate_server_accept" id="HTTP_TimeGate_server_accept">Accept-Datetime and other Accept Headers Provided</a>
</h1>
<p id="rfc.section.3.2.2.5.p.1">When interacting with a TimeGate, the regular content negotiation dimensions (media type, character encoding, language, and compression) remain available.  It is the TimeGate server's responsibility to honor (or not) such content negotiation, and in doing so it MUST always first select a Memento that meets the user agent's datetime preference, and then consider honoring regular content negotiation for it. As a result of this approach, the returned Memento will not necessarily meet the user agent's regular content negotiation preferences. Therefore, it is RECOMMENDED that the server provides HTTP Links with a "memento" Relation Type pointing at Mementos that do meet the user agent's regular content negotiation requests and that have a Memento-Datetime value in the temporal vicinity of the user agent's preferred datetime value.  </p>
<h1 id="rfc.section.3.2.2.6">
<a href="#rfc.section.3.2.2.6">3.2.2.6.</a> <a href="#HTTP_TimeGate_server_400" id="HTTP_TimeGate_server_400">Accept-Datetime Unparseable</a>
</h1>
<p id="rfc.section.3.2.2.6.p.1">In case, in Step 3, a user agent conveys a value for the "Accept-Datetime" request header that does not conform to the accept-dt-value construction rule of the BNF in <a href="#datetime-BNF">Figure 2</a>, the TimeGate server's response MUST have a "400 Bad Request" HTTP status code. With all other respects, responses in this case MUST be handled as described in <a href="#ua_range">Section 3.2.2.2</a>.  </p>
<h1 id="rfc.section.3.2.2.7">
<a href="#rfc.section.3.2.2.7">3.2.2.7.</a> <a href="#HTTP_TimeGate_server_302" id="HTTP_TimeGate_server_302">Accept-Datetime Not Provided</a>
</h1>
<p id="rfc.section.3.2.2.7.p.1">In case, in Step 3, a user agent issues a request to a TimeGate and fails to include an "Accept-Datetime" request header, the response MUST be handled as in <a href="#HTTP_TimeGate_server_OK">Section 3.2.2.1</a>, with a selection of the most recent Memento known to the responding server.  </p>
<h1 id="rfc.section.3.2.2.8">
<a href="#rfc.section.3.2.2.8">3.2.2.8.</a> <a href="#HTTP_TimeGate_server_404" id="HTTP_TimeGate_server_404">TimeGate Does Not Exist</a>
</h1>
<p id="rfc.section.3.2.2.8.p.1">Cases may occur in which a user agent issues a request against a TimeGate that does not exist. This may, for example, occur when a user agent uses internal knowledge to construct the URI of an assumed, yet non-existent TimeGate.  In these cases, the response from the target server MUST have a "404 Not Found" HTTP status code, and SHOULD include a "Vary" header that includes the "negotiate" and "accept-datetime" values as an indication that, generally, the server is capable of datetime negotiation.  The response MUST NOT include a "Link" header with any of the Relation Types introduced in <a href="#memento-rels">Section 2.2.1</a>.  </p>
<h1 id="rfc.section.3.2.2.9">
<a href="#rfc.section.3.2.2.9">3.2.2.9.</a> HTTP Methods other than HEAD/GET</h1>
<p id="rfc.section.3.2.2.9.p.1">In the above, the safe HTTP methods GET and HEAD are described for TimeGates.  TimeGates MAY support the safe HTTP methods OPTIONS and TRACE in the way described in <a href="#RFC2616">RFC 2616</a> <cite title="NONE">[RFC2616]</cite>.  Unsafe HTTP methods (i.e. PUT, POST, DELETE) MUST NOT be supported by a TimeGate. Such requests MUST yield a response with a "405 Method Not Allowed" HTTP status code, and MUST include an "Allow" header to convey that only the HEAD and GET (and OPTIONALLY the OPTIONS and TRACE) methods are supported.  In addition, the response MUST have a "Vary" header that includes the "negotiate" and "accept-datetime" values to indicate the TimeGate supports datetime negotiation. <a href="#a405-response-URI-G">Figure 19</a> shows such a response.  </p>
<div id="#rfc.figure.19"></div>
<div id="#a405-response-URI-G"></div>
<pre>
HTTP/1.1 405 Method Not Allowed
Date: Thu, 21 Jan 2010 00:02:12 GMT
Server: Apache
Vary: negotiate, accept-datetime
Allow: HEAD, GET
Content-Length: 255
Connection: close
Content-Type: text/html; charset=iso-8909-1
</pre>
<h1 id="rfc.section.3.2.3">
<a href="#rfc.section.3.2.3">3.2.3.</a> <a href="#redirect_chains_tg" id="redirect_chains_tg">Recognizing a TimeGate</a>
</h1>
<p id="rfc.section.3.2.3.p.1">When a user agent issues a HTTP HEAD/GET request against a resource of which it found the URI as the Target IRI of an entry in the "Link" header with a "timegate" Relation Type, it SHOULD NOT assume that the targeted resource effectively is a TimeGate and hence will behave as described in <a href="#HTTP_TimeGate_server">Section 3.2.2</a>.  </p>
<p id="rfc.section.3.2.3.p.2">A user agent MUST decide it has reached a TimeGate if the response to a HTTP HEAD/GET request against the resource's URI contains a "Vary" header that includes the "negotiate" and "accept-datetime" values. If the response does not, the user agent MUST decide it has not reached a TimeGate and proceed as follows: </p>
<p></p>

<ul>
<li>If the response contains a redirection, the user agent SHOULD follow it. Note that even a chain of redirections is possible, e.g.  URI-R -&gt; URI-1 -&gt; URI-2 -&gt; ... -&gt; URI-G </li>
<li>If the response does not contain a redirection, or if the redirection (chain) does not lead to a TimeGate, the user agent SHOULD attempt to determine an appropriate TimeGate for the Original Resource, either automatically or interactively supported by the user.  The discovery mechanisms described in <a href="#component-2">Section 4</a> can support the user agent with this regard.  </li>
</ul>
<p id="rfc.section.3.2.3.p.4">Resources that are not TimeGates (i.e. do not behave as described in <a href="#HTTP_TimeGate_server">Section 3.2.2</a>) MUST NOT use a "Vary" header that includes the "accept-datetime" value.  </p>
<h1 id="rfc.section.3.3">
<a href="#rfc.section.3.3">3.3.</a> <a href="#HTTP_Memento" id="HTTP_Memento">Interactions with a Memento</a>
</h1>
<p id="rfc.section.3.3.p.1">This section details HTTP GET/HEAD requests targeted at a Memento (URI-M).</p>
<h1 id="rfc.section.3.3.1">
<a href="#rfc.section.3.3.1">3.3.1.</a> <a href="#HTTP_Memento_client" id="HTTP_Memento_client">Step 5: User Agent Requests a Memento</a>
</h1>
<p id="rfc.section.3.3.1.p.1">In Step 5, the user agent issues a HTTP GET request against the URI of a Memento.  The user agent MAY include an "Accept-Datetime" header in this request, but the existence or absence of this header MUST NOT affect the server's response.  The URI of the Memento may have resulted from a response in Step 4, or the user agent may simply have happened upon it.  Such a request is illustrated in <a href="#a200-step5-http">Figure 20</a>.  </p>
<div id="#rfc.figure.20"></div>
<div id="#a200-step5-http"></div>
<pre>
GET /web/20010911203610/http://a.example.org HTTP/1.1
Host: arxiv.example.net
Accept-Datetime: Tue, 11 Sep 2001 20:35:00 GMT
Connection: close
</pre>
<h1 id="rfc.section.3.3.2">
<a href="#rfc.section.3.3.2">3.3.2.</a> <a href="#HTTP_Memento_server" id="HTTP_Memento_server">Step 6: Server Responds to a Request for a Memento</a>
</h1>
<p id="rfc.section.3.3.2.p.1">If the Memento requested by the user agent in Step 5 exists, the server's response MUST have a "200 OK" HTTP status code (or "206 Partial Content", where appropriate), and it MUST include a "Memento-Datetime" header with a value equal to the archival datetime of the Memento, that is, the datetime of the state of the Original Resource that is encapsulated in the Memento.  The "Link" header MUST be provided and contain links subject to the considerations described in <a href="#Link-Header-Relation-Types">Section 2.2</a>.  The Target IRI and, when applicable, the datetime values in the "Link" header associated with the "memento" Relation Type SHOULD be the same as conveyed in Step 4, in case the TimeGate and the selected Memento reside on the same server. However, they MAY be different in case the TimeGate and the selected Memento reside on different servers.  </p>
<p><a href="#a200-step6-http">Figure 21</a> illustrates the server's response to the request issued against a Memento in Step 5 (<a href="#a200-step5-http">Figure 20</a>).  </p>
<div id="#rfc.figure.21"></div>
<div id="#a200-step6-http"></div>
<pre>
HTTP/1.1 200 OK
Date: Thu, 21 Jan 2010 00:09:40 GMT
Server: Apache-Coyote/1.1
Memento-Datetime: Tue, 11 Sep 2001 20:36:10 GMT
Link: &lt;http://a.example.org&gt;; rel="original",
 &lt;http://arxiv.example.net/timemap/http://a.example.org&gt;
   ; rel="timemap"; type="application/link-format", 
 &lt;http://arxiv.example.net/timegate/http://a.example.org&gt;
   ; rel="timegate",
 &lt;http://arxiv.example.net/web/20000915112826/http://a.example.org&gt;
   ; rel="first memento"; datetime="Tue, 15 Sep 2000 11:28:26 GMT",
 &lt;http://arxiv.example.net/web/20080708093433/http://a.example.org&gt;
   ; rel="last memento"; datetime="Tue, 08 Jul 2008 09:34:33 GMT",
 &lt;http://arxiv.example.net/web/20010911203610/http://a.example.org&gt;
   ; rel="memento"; datetime="Tue, 11 Sep 2001 20:36:10 GMT",
 &lt;http://arxiv.example.net/web/20010911203610/http://a.example.org&gt;
   ; rel="prev memento"; datetime="Tue, 11 Sep 2001 20:30:51 GMT",
 &lt;http://arxiv.example.net/web/20010911203610/http://a.example.org&gt; 
   ; rel="next memento"; datetime="Tue, 11 Sep 2001 20:47:33 GMT"
Content-Length: 23364
Content-Type: text/html;charset=utf-8
Connection: close
</pre>
<p id="rfc.section.3.3.2.p.3">The server's response MUST include the "Memento-Datetime" header regardless whether the user agent's request contained an "Accept-Datetime" header or not. This is the way by which resources make explicit that they are Mementos. Due to the sparseness of Mementos in most archives, the value of the "Memento-Datetime" header returned by a server may differ (significantly) from the value conveyed by the user agent in "Accept-Datetime".  </p>
<p id="rfc.section.3.3.2.p.4">Although a Memento encapsulates a prior state of an Original Resource, the entity-body returned in response to an HTTP GET request issued against a Memento may very well not be byte-to-byte the same as an entity-body that was previously returned by that Original Resource. Various reasons exist why there are significant chances these would be different yet do convey substantially the same information. These include format migrations as part of a digital preservation strategy, URI-rewriting as applied by some Web archives, and the addition of banners as a means to brand Web archives.  </p>
<h1 id="rfc.section.3.3.2.1">
<a href="#rfc.section.3.3.2.1">3.3.2.1.</a> <a href="#HTTP_Memento_server_404" id="HTTP_Memento_server_404">Memento Does not Exist</a>
</h1>
<p id="rfc.section.3.3.2.1.p.1">Cases may occur in which a TimeGate's response (Step 4) points at a Memento that actually does not exist, resulting in a user agent's request (Step 5) for a non-existent Memento. In this case, the server's response MUST have the expected "404 Not Found" HTTP Status Code and it MUST NOT contain a "Memento-Datetime" header.  </p>
<h1 id="rfc.section.3.3.2.2">
<a href="#rfc.section.3.3.2.2">3.3.2.2.</a> <a href="#HTTP_Memento_no_TimeGate" id="HTTP_Memento_no_TimeGate">Mementos Without a TimeGate</a>
</h1>
<p id="rfc.section.3.3.2.2.p.1">Cases may occur in which a server that hosts Mementos does not expose a TimeGate for those Mementos.  This can, for example, be the case if the server's Mementos result from taking a snapshot of the state of a set of Original Resources from another server at the time this other server is being retired.  As a result, only a single Memento per Original Resource is hosted, making the introduction of a TimeGate unnecessary. But it may also be the case for servers that hosts multiple Mementos for an Original Resource but consider exposing TimeGates too expensive.  </p>
<p id="rfc.section.3.3.2.2.p.2">In cases of Mementos without associated TimeGates, responses to a request for a Memento by a user agent MUST be as described in <a href="#HTTP_Memento_server">Section 3.3.2</a> with the exception that it will not contain a HTTP Link with a "timegate" Relation Type pointing at a TimeGate exposed by the responding server. It MAY still contain such a Link pointing at a TimeGate exposed elsewhere. Depending on whether one or more Mementos are hosted for an Original Resource, the response may or may not have a HTTP Link with a "timemap" Relation Type.  However, the response MUST still contain a "Memento-Datetime" response header with a value that corresponds to archival datetime of the Memento.  </p>
<p><a href="#a200-step6-no-timegate">Figure 22</a> illustrates the server's response to the request issued against a Memento in Step 5 (<a href="#a200-step5-http">Figure 20</a>) for the case that Memento has no associated TimeGate. In this example, it is also assumed there is only one Memento for the Original Resource, and hence the Links with Relation Types "memento", "first", "last" all point at the same - responding - Memento.  </p>
<div id="#rfc.figure.22"></div>
<div id="#a200-step6-no-timegate"></div>
<pre>
HTTP/1.1 200 OK
Date: Thu, 21 Jan 2010 00:09:40 GMT
Server: Apache-Coyote/1.1
Memento-Datetime: Tue, 11 Sep 2001 20:36:10 GMT
Link: &lt;http://a.example.org&gt;; rel="original",
 &lt;http://arxiv.example.net/web/20010911203610/http://a.example.org&gt;
   ; rel="first last memento"
   ; datetime="Tue, 15 Sep 2000 11:28:26 GMT"
Content-Length: 23364
Content-Type: text/html;charset=utf-8
Connection: close
</pre>
<p id="rfc.section.3.3.2.2.p.4">Note that a server issuing a response similar to that of <a href="#a200-step6-no-timegate">Figure 22</a> does not imply that there is no server whatsoever that exposes a TimeGate; it merely means that the responding server neither provides nor is aware of the location of a TimeGate.</p>
<h1 id="rfc.section.3.3.3">
<a href="#rfc.section.3.3.3">3.3.3.</a> <a href="#redirect_chains_m" id="redirect_chains_m">Recognizing a Memento</a>
</h1>
<p id="rfc.section.3.3.3.p.1">When following the redirection provided by a confirmed TimeGate (see <a href="#redirect_chains_tg">Section 3.2.3</a>), a user agent SHOULD NOT assume that the targeted resource effectively is a Memento and hence will behave as described in <a href="#HTTP_Memento_server">Section 3.3.2</a>.  </p>
<p id="rfc.section.3.3.3.p.2">A user agent MUST decide it has reached a Memento if the response to a HTTP HEAD/GET request against the resource's URI contains a "Memento-Datetime" header with a legitimate value.  If the response does not, the following applies: </p>
<p></p>

<ul>
<li>If the response contains a redirection, the user agent SHOULD follow it. Even a chain of redirections is possible, e.g.  URI-G -&gt; URI-X -&gt; URI-Y -&gt; ... -&gt; URI-M.  </li>
<li>If the response by a confirmed TimeGate does not contain a redirection, or if the redirection (chain) that started at a confirmed TimeGate does not lead to a resource that provides a "Memento-Datetime" header, the user agent MAY still conclude that it has likely arrived at a Memento.  That is because cases exist in which Web archives and CMS are made compliant with the Memento framework "by proxy". In these cases TimeGates will redirect to Mementos in such systems, but the responses from these Mementos will not (yet) include a "Memento-Datetime" header.  </li>
</ul>
<h1 id="rfc.section.3.4">
<a href="#rfc.section.3.4">3.4.</a> <a href="#timemap" id="timemap">Interactions with a TimeMap</a>
</h1>
<p id="rfc.section.3.4.p.1">A TimeMap is introduced to support retrieving a comprehensive list of all Mementos for a specific Original Resource, known to a responding server.  The entity-body of a response to an HTTP GET request issued against a TimeMap's URI:</p>
<p></p>

<ul>
<li>MUST list the URI of the Original Resource that the response lists Mementos for;</li>
<li>MUST list the URI and datetime of each Memento for the Original Resource known to the responding server; </li>
<li>MUST list the URI of one or more TimeGates for the Original Resource except when no TimeGate exists (see <a href="#HTTP_Memento_no_TimeGate">Section 3.3.2.2</a>);</li>
<li>SHOULD, for self-containment, list the URI of the TimeMap itself;</li>
<li>MUST unambiguously type listed resources as being Original Resource, TimeGate, Memento, or TimeMap.</li>
</ul>
<p id="rfc.section.3.4.p.3">The entity-body of a response from a TimeMap MAY be serialized in various ways, but the link-value format serialization MUST be supported.  In this serialization, the entity-body MUST be formatted in the same way as the value of a HTTP "Link" header, and hence MUST comply to the "link-value" construction rule of "Section 5. The Link Header Field" of <a href="#RFC5988">RFC5988</a> <cite title="NONE">[RFC5988]</cite>, and the media type of the entity-body MUST be "application/link-format" as introduced in <a href="#I-D.ietf-core-link-format">I-D.ietf-core-link-format</a> <cite title="NONE">[I-D.ietf-core-link-format]</cite>.  All links conveyed in this serialization MUST be interpreted as having the URI of the Original Resource as their Context IRI. The URI of the Original Resource is provided in the entity-body as the Target IRI of the link with an "original" Relation Type.  </p>
<h1 id="rfc.section.3.4.1">
<a href="#rfc.section.3.4.1">3.4.1.</a> <a href="#HTTP_TimeMap_client" id="HTTP_TimeMap_client">User Agent Requests a TimeMap</a>
</h1>
<p id="rfc.section.3.4.1.p.1">In order to retrieve the link-value serialization of a TimeMap, a user agent SHOULD use an "Accept" request header with a value set to "application/link-format".  This is shown in <a href="#TimeMap-request">Figure 23</a>.  </p>
<div id="#rfc.figure.23"></div>
<div id="#TimeMap-request"></div>
<pre>
GET /timemap/http://a.example.org HTTP/1.1
Host: arxiv.example.net
Accept: application/link-format;q=1.0
Connection: close
</pre>
<h1 id="rfc.section.3.4.2">
<a href="#rfc.section.3.4.2">3.4.2.</a> <a href="#HTTP_TimeMap_server" id="HTTP_TimeMap_server">Server Responds to a Request for a TimeMap</a>
</h1>
<p id="rfc.section.3.4.2.p.1">If the TimeMap requested by the user agent exists, the server's response MUST have a "200 OK" HTTP status code (or "206 Partial Content", where appropriate).  Note that a TimeMap is itself an Original Resource for which Mementos may exist. For example, a response from a TimeMap could provide a "timegate" Link to a TimeGate via which prior TimeMap versions are available.  In this case, the use of the "Link" header is subject to all considerations described in <a href="#Link-Header-Relation-Types">Section 2.2</a>, with the TimeMap acting as the Original Resource.</p>
<p id="rfc.section.3.4.2.p.2">However, in case a TimeMap wants to explicitly indicate in its response headers for which Original Resource it is a TimeMap, it MUST do so by including a HTTP "Link" header with the following characteristics:</p>
<p></p>

<ul>
<li>The Context IRI for the HTTP Link is the URI of the Original Resource;</li>
<li>The Relation Type is "timemap";</li>
<li>The Target IRI for the HTTP Link is the URI of the TimeMap.</li>
</ul>
<p id="rfc.section.3.4.2.p.4">Because the Context IRI of this HTTP Link is not the URI of the TimeMap, as per <a href="#RFC5988">RFC5988</a> <cite title="NONE">[RFC5988]</cite>, the default Context IRI must be overwritten by using the "anchor" attribute with a value of the URI of the Original Resource.</p>
<p id="rfc.section.3.4.2.p.5">The response from the TimeMap to the request of <a href="#TimeMap-request">Figure 23</a> is shown in <a href="#TimeMap-response">Figure 24</a>. The response header shows the TimeMap explicitly conveying the URI of the Original Resource for which it is a TimeMap; for practical reasons the entity-body in the example has been abbreviated.  Notice also the use of the "license" and "embargo" attributes introduced in <a href="#memento-rel">Section 2.2.1.4</a> on the "memento" links in the TimeMap.</p>
<div id="#rfc.figure.24"></div>
<div id="#TimeMap-response"></div>
<pre>
HTTP/1.1 200 OK
Date: Thu, 21 Jan 2010 00:06:50 GMT
Server: Apache
Link: &lt;http://arxiv.example.net/timemap/http://a.example.org&gt; 
   ; anchor="http://a.example.org"; rel="timemap"
   ; type="application/link-format"
Content-Length: 4883
Content-Type: application/link-format
Connection: close

 &lt;http://a.example.org&gt;;rel="original",
 &lt;http://arxiv.example.net/timemap/http://a.example.org&gt;
   ; rel="timemap";type="application/link-format",
 &lt;http://arxiv.example.net/timegate/http://a.example.org&gt;
   ; rel="timegate",
 &lt;http://arxiv.example.net/web/20000620180259/http://a.example.org&gt;
   ; rel="first memento";datetime="Tue, 20 Jun 2000 18:02:59 GMT"
   ; license="http://creativecommons.org/publicdomain/zero/1.0/", 
 &lt;http://arxiv.example.net/web/20091027204954/http://a.example.org&gt;
    ; rel="last memento";datetime="Tue, 27 Oct 2009 20:49:54 GMT"
    ; license="http://creativecommons.org/publicdomain/zero/1.0/"
    ; embargo="Tue, 19 Apr 2011 00:00:00 GMT",
 &lt;http://arxiv.example.net/web/20000621011731/http://a.example.org&gt;
   ; rel="memento";datetime="Wed, 21 Jun 2000 01:17:31 GMT"
   ; license="http://creativecommons.org/publicdomain/zero/1.0/",
 &lt;http://arxiv.example.net/web/20000621044156/http://a.example.org&gt;
   ; rel="memento";datetime="Wed, 21 Jun 2000 04:41:56 GMT"
   ; license="http://creativecommons.org/publicdomain/zero/1.0/",
 ...
</pre>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#component-2" id="component-2">The Memento Framework, Discovery Component</a>
</h1>
<p><a href="#component-1.2">Section 3</a> describes how TimeGates, Mementos, Original Resources, and TimeMaps can be discovered by following HTTP Links with Relation Types "timegate", "memento", "original", and "timemap", respectively.</p>
<p id="rfc.section.4.p.2">Naturally, some of these links can also be embedded into representations of resources that have a media type that allows embedding of typed links. For example, an Original Resource that has an HTML representation can include a "timegate" link by using HTML's LINK element, e.g.  &lt;link href="http://arxiv.example.net/timegate/http://a.example.org" rel="timegate"&gt;.  The use of such embedded links is also subject to the considerations of <a href="#Link-Header-Relation-Types">Section 2.2</a>.</p>
<p id="rfc.section.4.p.3">In this section additional approaches are introduced that support batch discovery of TimeGates and Mementos.  The approaches leverage the Robots Exclusion Protocol.</p>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> <a href="#TimeGate_Discovery" id="TimeGate_Discovery">Discovering TimeGates Via Robots Exclusion Protocol</a>
</h1>
<p id="rfc.section.4.1.p.1">The Robots Exclusion Protocol's robots.txt file <a href="#robotstxt.org">[robotstxt.org]</a> is commonly used by Web site owners to give instructions about their site to Web robots. It is used both to protect resources hosted by a server from crawling and to facilitate discovering them.  This document introduces the "TimeGate" and "Archived" directives for robots.txt to provide a server-wide mechanism to support TimeGate discovery that SHOULD be used by:</p>
<p></p>

<ul>
<li>Servers of Original Resources;</li>
<li>Servers that provide access to Mementos of Original Resources by exposing TimeGates.</li>
</ul>
<p id="rfc.section.4.1.p.3">A robots.txt file MAY contain zero or more occurrences of the "TimeGate" directive, and each occurrence MUST be followed by one or more associated "Archived" directives.  The meaning of the directives is as follows:</p>
<p></p>

<ul>
<li>TimeGate: Conveys the base URL (that is URI scheme, host and path component) that is shared by all URIs of TimeGates of a set of Original Resources.</li>
<li>Archived: Indicates - by means of mandatory host and optional path parts of a URI - for which set of Original Resources actual TimeGates are available that have the base URL conveyed in the associated TimeGate directive.</li>
</ul>
<p id="rfc.section.4.1.p.5">For example, consider a wiki at http://a.example.org/w/ that supports the Memento framework and exposes TimeGates to access the wiki's history pages at base URL http://a.example.org/w/index.php/Special:TimeGate/. An actual TimeGate for the wiki's http://a.example.org/w/My_Title page would then be at http://a.example.org/w/index.php/Special:TimeGate/http://a.example.org/w/My_Title.  This wiki SHOULD make its TimeGates discoverable by using the directives shown in <a href="#robotstxt1">Figure 25</a> in its robots.txt file.  </p>
<div id="#rfc.figure.25"></div>
<div id="#robotstxt1"></div>
<pre>
      TimeGate: http://a.example.org/w/index.php/Special:TimeGate/
      Archived: a.example.org/w/
</pre>
<p id="rfc.section.4.1.p.6">As another example, consider a server of Original Resources at http://a.example.org/ and http://www.a.example.org/ that is aware that its resources are regularly crawled by a Web archive that generally exposes TimeGates at base URL http://arxiv.example.net/timegate/ and hence has TimeGate http://arxiv.example.net/timegate/http://a.example.org/ to access Mementos for http://a.example.org/.  This server SHOULD make the remote TimeGates discoverable by including the directives shown in <a href="#robotstxt2">Figure 26</a> in its robots.txt file: </p>
<div id="#rfc.figure.26"></div>
<div id="#robotstxt2"></div>
<pre>
      TimeGate: http://arxiv.example.net/timegate/
      Archived: a.example.org/
      Archived: www.a.example.org/
</pre>
<p id="rfc.section.4.1.p.7">And, consider a Web archive that crawls a wide range of Original Resources, and exposes TimeGates to access the resulting Mementos at base URL http://arxiv.example.net/timegate/.  In order to make its TimeGates discoverable, this Web archive SHOULD include the directives shown in <a href="#robotstxt3">Figure 27</a> in its robots.txt file: </p>
<div id="#rfc.figure.27"></div>
<div id="#robotstxt3"></div>
<pre>
      TimeGate: http://arxiv.example.net/timegate/
      Archived: *
</pre>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> <a href="#Mementos_robotstxt" id="Mementos_robotstxt">Discovering Mementos via Robots Exclusion Protocol</a>
</h1>
<p id="rfc.section.4.2.p.1">Servers can support discovery of their Mementos by crawlers through the use of the Robots Exclusion Protocol, but SHOULD do so in a manner that conveys to crawlers and mirroring applications that the sticky Memento-Datetime behavior (see <a href="#Accept-Memento-Datetime">Section 2.1.1</a>) MUST be respected.  To that end, servers SHOULD use the "User-agent" and "Allow" directives of the Robots Exclusion Protocol in the following manner:</p>
<p></p>

<ul>
<li>User-agent: Has "memento" as its value;</li>
<li>Allow: Lists the path that contains Mementos that can be crawled, and for which content can be mirrored subject to the sticky Memento-Datetime behavior.</li>
</ul>
<p><a href="#robotstxt5">Figure 28</a> shows the robots.txt for a server that generally disallows crawling, yet allows agents that respect the sticky Memento-Datetime behavior to crawl Mementos in the /web/ path.</p>
<div id="#rfc.figure.28"></div>
<div id="#robotstxt5"></div>
<pre>
        User-agent: *
        Disallow: /
        User-agent: memento
        Allow: /web/
</pre>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#IANA" id="IANA">IANA Considerations</a>
</h1>
<p id="rfc.section.5.p.1">This memo requires IANA to register the Accept-Datetime and Memento-Datetime HTTP headers defined in <a href="#Accept-Memento-Datetime">Section 2.1.1</a> in the appropriate IANA registry.  </p>
<p id="rfc.section.5.p.2">This memo requires IANA to register the "Link" header Relation Types "original", "timegate", "timemap", and "memento" defined in <a href="#memento-rels">Section 2.2.1</a> in the appropriate IANA registry.  </p>
<p id="rfc.section.5.p.3">This memo requires IANA to register the "datetime", "license", and "embargo" attributes for Link headers with a "memento" Relation Type, as defined in <a href="#memento-rel">Section 2.2.1.4</a> in the appropriate IANA registry.  </p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#Security" id="Security">Security Considerations</a>
</h1>
<p id="rfc.section.6.p.1">Provision of a "timegate" HTTP "Link" header in responses to requests for an Original Resource that is protected (e.g., 401 or 403 HTTP response codes) is OPTIONAL. The inclusion of this Link when requesting authentication is at the server's discretion; cases may exist in which a server protects the current state of a resource, but supports open access to prior states and thus chooses to supply a "timegate" HTTP "Link" header.  Conversely, the server may choose to not advertise the TimeGate URIs (e.g., they exist in an intranet archive) for unauthenticated requests.</p>
<p id="rfc.section.6.p.2">Authentication, encryption and other security related issues are otherwise orthogonal to Memento.</p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> Changelog</h1>
<p id="rfc.section.7.p.1">v03 2011-05-11  HVDS MLN RS  draft-vandesompel-memento-02</p>
<p></p>

<ul>
<li>Added scenario in which a TimeGate redirects to another TimeGate.</li>
<li>Reorganized TimeGate section to better reflect the difference between requests with and without interval indicator.</li>
<li>Added recommendation to provide "memento" links to Mementos in the vicinity of the preferred interval provided by the client, in case of a 406 response.</li>
<li>Removed TimeMap Feed material from the Discovery section as a result of discussions regarding (lack of) scalability of the approach with representatives of the International Internet Preservation Consortium.  An alternative approach to support batch discovery of Mementos will be specified.</li>
</ul>
<p id="rfc.section.7.p.3">v02 2011-04-28  HVDS MLN RS  draft-vandesompel-memento-01</p>
<p></p>

<ul>
<li>Introduced wording and reference to indicate a Memento is a FixedResource.</li>
<li>Introduced "Sticky Memento-Datetime" notion and clarified wording about retaining "Memento-Datetime" headers and values when a Memento is mirrored at different URI.</li>
<li>Introduced section about handling both datetime and regular negotiation.</li>
<li>Introduced section about Mementos Without TimeGate.</li>
<li>Made various changes in the section Relation Type "memento", including addition of "license" and "embargo" attributes, and clarification of rules regarding the use of "memento" links.</li>
<li>Moved section about TimeMaps inside the Datetime Negotiation section, and updated it.</li>
<li>Restarted the Discovery section from scratch.</li>
</ul>
<p id="rfc.section.7.p.5">v01 2010-11-11  HVDS MLN RS  First public version draft-vandesompel-memento-00</p>
<p id="rfc.section.7.p.6">v00 2010-10-19  HVDS MLN RS Limited circulation version</p>
<p id="rfc.section.7.p.7">2010-07-22  HVDS MLN   First internal version</p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#Acknowledgements" id="Acknowledgements">Acknowledgements</a>
</h1>
<p id="rfc.section.8.p.1">The Memento effort is funded by the Library of Congress.  Many thanks to Kris Carpenter Negulescu, Michael Hausenblas, Erik Hetzner, Larry Masinter, Gordon Mohr, Mark Nottingham, David Rosenthal, Ed Summers for early feedback.  Many thanks to Samuel Adams, Scott Ainsworth, Lyudmilla Balakireva, Frank McCown, Harihar Shankar, Brad Tofel for early implementations.</p>
<h1 id="rfc.references">
<a href="#rfc.references">9.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">9.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC5988">[RFC5988]</b></td>
<td class="top">
<a>Nottingham, M.</a>, "<a href="http://tools.ietf.org/html/rfc5988">Web Linking</a>", RFC 5988, October 2010.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-core-link-format">[I-D.ietf-core-link-format]</b></td>
<td class="top">
<a>Shelby, Z</a>, "<a href="http://tools.ietf.org/html/draft-ietf-core-link-format-03">CoRE Link Format</a>", Internet-Draft draft-ietf-core-link-format-03, March 2011.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2616">[RFC2616]</b></td>
<td class="top">
<a href="mailto:fielding@ics.uci.edu" title="Department of Information and Computer Science">Fielding, R.</a>, <a href="mailto:jg@w3.org" title="World Wide Web Consortium">Gettys, J.</a>, <a href="mailto:mogul@wrl.dec.com" title="Compaq Computer Corporation">Mogul, J.</a>, <a href="mailto:frystyk@w3.org" title="World Wide Web Consortium">Frystyk, H.</a>, <a href="mailto:masinter@parc.xerox.com" title="Xerox Corporation">Masinter, L.</a>, <a href="mailto:paulle@microsoft.com" title="Microsoft Corporation">Leach, P.</a> and <a href="mailto:timbl@w3.org" title="World Wide Web Consortium">T. Berners-Lee</a>, "<a href="http://tools.ietf.org/html/rfc2616">Hypertext Transfer Protocol -- HTTP/1.1</a>", RFC 2616, June 1999.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5829">[RFC5829]</b></td>
<td class="top">
<a>Brown, A.</a>, <a>Clemm, G.</a> and <a>J. Reschke</a>, "<a href="http://tools.ietf.org/html/rfc5829">Link Relation Types for Simple Version Navigation between Web Resources</a>", RFC 5829, April 2010.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4287">[RFC4287]</b></td>
<td class="top">
<a href="mailto:mnot@pobox.com">Nottingham, M.</a> and <a href="mailto:rfsayre@boswijck.com">R. Sayre</a>, "<a href="http://tools.ietf.org/html/rfc4287">The Atom Syndication Format</a>", RFC 4287, December 2005.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4151">[RFC4151]</b></td>
<td class="top">
<a>Kindberg, T.</a> and <a>S. Hawke</a>, "<a href="http://tools.ietf.org/html/rfc4151">The 'tag' URI Scheme</a>", RFC 4151, October 2005.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">9.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC1123">[RFC1123]</b></td>
<td class="top">
<a href="mailto:Braden@ISI.EDU" title="University of Southern California (USC), Information Sciences Institute">Braden, R.</a>, "<a href="http://tools.ietf.org/html/rfc1123">Requirements for Internet Hosts - Application and Support</a>", STD 3, RFC 1123, October 1989.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.masinter-dated-uri">[I-D.masinter-dated-uri]</b></td>
<td class="top">
<a>Masinter, L</a>, "<a href="http://tools.ietf.org/html/draft-masinter-dated-uri-08">The 'tdb' and 'duri' URI schemes, based on dated URIs</a>", Internet-Draft draft-masinter-dated-uri-08, January 2011.</td>
</tr>
<tr>
<td class="reference"><b id="W3C.gen-ont-20090420">[W3C.gen-ont-20090420]</b></td>
<td class="top">
<a>Berners-Lee, </a>, "<a>Architecture of the World Wide Web</a>", April 2009.</td>
</tr>
<tr>
<td class="reference"><b id="W3C.REC-aww-20041215">[W3C.REC-aww-20041215]</b></td>
<td class="top">
<a>Jacobs, </a> and <a> Walsh</a>, "<a>Architecture of the World Wide Web</a>", December 2004.</td>
</tr>
<tr>
<td class="reference"><b id="Fitch">[Fitch]</b></td>
<td class="top">
<a>Fitch, </a>, "<a>Web site archiving - an approach to recording every materially different response produced by a website</a>", July 2003.</td>
</tr>
<tr>
<td class="reference"><b id="robotstxt.org">[robotstxt.org]</b></td>
<td class="top">
<a>Robots Exclusion Protocol</a>", August 2010.</td>, "</tr>
</tbody></table>
<h1 id="rfc.appendix.Appendix A">
<a href="#rfc.appendix.Appendix%20A">Appendix A.</a> <a href="#AppendixFlow" id="AppendixFlow">Appendix B: A Sample, Successful Memento Request/Response cycle</a>
</h1>
<div id="#rfc.figure.29"></div>
<pre>
Step 1 : UA --- HTTP GET/HEAD; Accept-Datetime: Tj ---------&gt; URI-R
      
HEAD / HTTP/1.1
Host: a.example.org
Accept-Datetime: Tue, 11 Sep 2001 20:35:00 GMT
Connection: close

Step 2 : UA &lt;-- HTTP 200; Link: URI-G ----------------------- URI-R

HTTP/1.1 200 OK
Date: Thu, 21 Jan 2010 00:02:12 GMT
Server: Apache
Link: &lt;http://arxiv.example.net/timegate/http://a.example.org&gt;
   ; rel="timegate"
Content-Length: 255
Connection: close
Content-Type: text/html; charset=iso-8859-1

Step 3 : UA --- HTTP GET/HEAD; Accept-Datetime: Tj ---------&gt; URI-G

GET /timegate/http://a.example.org 
 HTTP/1.1
Host: arxiv.example.net
Accept-Datetime: Tue, 11 Sep 2001 20:35:00 GMT
Connection: close

Step 4 : UA &lt;-- HTTP 302; Location: URI-Mj; Vary; Link:
    URI-R, URI-T, URI-M0, URI-Mn, URI-Mi, URI-Mj, URI-Mk ---- URI-G
    
HTTP/1.1 302 Found
Date: Thu, 21 Jan 2010 00:06:50 GMT
Server: Apache
Vary: negotiate, accept-datetime
Location: 
 http://arxiv.example.net/web/20010911203610/http://a.example.org
Link: &lt;http://a.example.org&gt;; rel="original",
 &lt;http://arxiv.example.net/web/20000915112826/http://a.example.org&gt;
   ; rel="first memento"; datetime="Tue, 15 Sep 2000 11:28:26 GMT",
 &lt;http://arxiv.example.net/web/20080708093433/http://a.example.org&gt;
   ; rel="last memento"; datetime="Tue, 08 Jul 2008 09:34:33 GMT",
 &lt;http://arxiv.example.net/timemap/http://a.example.org&gt;
   ; rel="timemap"; type="application/link-format",
 &lt;http://arxiv.example.net/web/20010911203610/http://a.example.org&gt;
   ; rel="memento"; datetime="Tue, 11 Sep 2001 20:36:10 GMT",
 &lt;http://arxiv.example.net/web/20010911203610/http://a.example.org&gt;
   ; rel="prev memento"; datetime="Tue, 11 Sep 2001 20:30:51 GMT",
 &lt;http://arxiv.example.net/web/20010911203610/http://a.example.org&gt; 
   ; rel="next memento"; datetime="Tue, 11 Sep 2001 20:47:33 GMT"
Content-Length: 0
Content-Type: text/plain; charset=UTF-8
Connection: close

Step 5 : UA --- HTTP GET URI-Mj; Accept-Datetime: Tj -------&gt; URI-Mj

GET /web/20010911203610/http://a.example.org 
 HTTP/1.1
Host: arxiv.example.net
Accept-Datetime: Tue, 11 Sep 2001 20:35:00 GMT
Connection: close

Step 6 : UA &lt;-- HTTP 200; Memento-Datetime: Tj; Link: URI-R, 
    URI-T, URI-G, URI-M0, URI-Mn, URI-Mi, URI-Mj, URI-Mk ---- URI-Mj

HTTP/1.1 200 OK
Date: Thu, 21 Jan 2010 00:09:40 GMT
Server: Apache-Coyote/1.1
Memento-Datetime: Tue, 11 Sep 2001 20:36:10 GMT
Link: &lt;http://a.example.org&gt;; rel="original",
 &lt;http://arxiv.example.net/web/20000915112826/http://a.example.org&gt;
   ; rel="first memento"; datetime="Tue, 15 Sep 2000 11:28:26 GMT",
 &lt;http://arxiv.example.net/web/20080708093433/http://a.example.org&gt;
   ; rel="last memento"; datetime="Tue, 08 Jul 2008 09:34:33 GMT",
 &lt;http://arxiv.example.net/timemap/http://a.example.org&gt;
   ; rel="timemap"; type="application/link-format", 
 &lt;http://arxiv.example.net/timegate/http://a.example.org&gt;
   ; rel="timegate",
 &lt;http://arxiv.example.net/web/20010911203610/http://a.example.org&gt;
   ; rel="memento"; datetime="Tue, 11 Sep 2001 20:36:10 GMT",
 &lt;http://arxiv.example.net/web/20010911203610/http://a.example.org&gt;
   ; rel="prev memento"; datetime="Tue, 11 Sep 2001 20:30:51 GMT",
 &lt;http://arxiv.example.net/web/20010911203610/http://a.example.org&gt; 
   ; rel="next memento"; datetime="Tue, 11 Sep 2001 20:47:33 GMT"
Content-Length: 23364
Content-Type: text/html;charset=utf-8
Connection: close
</pre>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Herbert VandeSompel</span> 
	  <span class="n hidden">
		<span class="family-name">VandeSompel</span>
	  </span>
	</span>
	<span class="org vcardline">Los Alamos National Laboratory</span>
	<span class="adr">
	  <span>PO Box 1663</span>

	  <span class="vcardline">
		<span class="locality">Los Alamos</span>,  
		<span class="region">New Mexico</span> 
		<span class="code">87545</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">Phone: +1 505 667 1267</span>

<span class="vcardline">EMail: <a href="mailto:hvdsomp@gmail.com">hvdsomp@gmail.com</a></span>

<span class="vcardline">URI: <a href="http://public.lanl.gov/herbertv/">http://public.lanl.gov/herbertv/</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Michael Nelson</span> 
	  <span class="n hidden">
		<span class="family-name">Nelson</span>
	  </span>
	</span>
	<span class="org vcardline">Old Dominion University</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality">Norfolk</span>,  
		<span class="region">Virginia</span> 
		<span class="code">23529</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">Phone: +1 757 683 6393</span>

<span class="vcardline">EMail: <a href="mailto:mln@cs.odu.edu">mln@cs.odu.edu</a></span>

<span class="vcardline">URI: <a href="http://www.cs.odu.edu/~mln/">http://www.cs.odu.edu/~mln/</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Robert Sanderson</span> 
	  <span class="n hidden">
		<span class="family-name">Sanderson</span>
	  </span>
	</span>
	<span class="org vcardline">Los Alamos National Laboratory</span>
	<span class="adr">
	  <span>PO Box 1663</span>

	  <span class="vcardline">
		<span class="locality">Los Alamos</span>,  
		<span class="region">New Mexico</span> 
		<span class="code">87545</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">Phone: +1 505 665 5804</span>

<span class="vcardline">EMail: <a href="mailto:azaroth42@gmail.com">azaroth42@gmail.com</a></span>

  </address>
</div>

</body>
</html>