<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Mapping YANG to Document Schema
  Definition Languages and Validating NETCONF Content</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Mapping YANG to Document Schema
  Definition Languages and Validating NETCONF Content">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">NETMOD</td><td class="header">L. Lhotka, Ed.</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">CESNET</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">September 28, 2010</td></tr>
<tr><td class="header">Expires: April 1, 2011</td><td class="header">&nbsp;</td></tr>
</table></td></tr></table>
<h1><br />Mapping YANG to Document Schema
  Definition Languages and Validating NETCONF Content<br />draft-ietf-netmod-dsdl-map-08</h1>

<h3>Abstract</h3>

<p>This document specifies the mapping rules for translating YANG
    data models into Document Schema Definition Languages (DSDL), a
    coordinated set of XML schema languages standardized as ISO/IEC
    19757. The following DSDL schema languages are addressed by the
    mapping: RELAX NG, Schematron and DSRL. The mapping takes one or
    more YANG modules and produces a set of DSDL schemas for a
    selected target document type - datastore content, NETCONF message
    etc. Procedures for schema-based validation of such documents are
    also discussed.
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on April 1, 2011.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#intro">1.</a>&nbsp;
Introduction<br />
<a href="#term-not">2.</a>&nbsp;
Terminology and Notation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#new-terms">2.1.</a>&nbsp;
Glossary of New Terms<br />
<a href="#objectivesMotivation">3.</a>&nbsp;
Objectives and Motivation<br />
<a href="#schema-lang">4.</a>&nbsp;
DSDL Schema Languages<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#relaxng">4.1.</a>&nbsp;
RELAX NG<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#schematron">4.2.</a>&nbsp;
Schematron<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#dsrl">4.3.</a>&nbsp;
Document Semantics Renaming Language (DSRL)<br />
<a href="#annotations">5.</a>&nbsp;
Additional Annotations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#dcElements">5.1.</a>&nbsp;
Dublin Core Metadata Elements<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#dtdCompatibility">5.2.</a>&nbsp;
RELAX NG DTD Compatibility Annotations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#netmodAnnotations">5.3.</a>&nbsp;
NETMOD-Specific Annotations<br />
<a href="#mappingOverview">6.</a>&nbsp;
Overview of the Mapping<br />
<a href="#validation">7.</a>&nbsp;
NETCONF Content Validation<br />
<a href="#design">8.</a>&nbsp;
Design Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#hybridSchema">8.1.</a>&nbsp;
Hybrid Schema<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#modularity">8.2.</a>&nbsp;
Modularity<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#granularity">8.3.</a>&nbsp;
Granularity<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#XML-NS">8.4.</a>&nbsp;
Handling of XML Namespaces<br />
<a href="#desc-yang-to-hs">9.</a>&nbsp;
Mapping YANG Data Models to the Hybrid Schema<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#occurrence-rules">9.1.</a>&nbsp;
Occurrence Rules for Data Nodes<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#optional-mandatory">9.1.1.</a>&nbsp;
Optional and Mandatory Nodes<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#implicit-nodes">9.1.2.</a>&nbsp;
Implicit Nodes<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#grouping-typedef">9.2.</a>&nbsp;
Mapping YANG Groupings and Typedefs<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#refine-augment">9.2.1.</a>&nbsp;
YANG Refinements and Augments<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#chtypes">9.2.2.</a>&nbsp;
Type Derivation Chains<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#transXPath">9.3.</a>&nbsp;
Translation of XPath Expressions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#extensions">9.4.</a>&nbsp;
YANG Language Extensions<br />
<a href="#yang-to-rng">10.</a>&nbsp;
Mapping YANG Statements to the Hybrid Schema<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anyxml-stmt">10.1.</a>&nbsp;
The 'anyxml' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#argument-stmt">10.2.</a>&nbsp;
The 'argument' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#augment-stmt">10.3.</a>&nbsp;
The 'augment' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#base-stmt">10.4.</a>&nbsp;
The 'base' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#belongs-to-stmt">10.5.</a>&nbsp;
The 'belongs-to' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#bit-stmt">10.6.</a>&nbsp;
The 'bit' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#case-stmt">10.7.</a>&nbsp;
The 'case' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#choice-stmt">10.8.</a>&nbsp;
The 'choice' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#config-stmt">10.9.</a>&nbsp;
The 'config' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#contact-stmt">10.10.</a>&nbsp;
The 'contact' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#container-stmt">10.11.</a>&nbsp;
The 'container' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#default-stmt">10.12.</a>&nbsp;
The 'default' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#description-stmt">10.13.</a>&nbsp;
The 'description' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#deviation-stmt">10.14.</a>&nbsp;
The 'deviation' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#enum-stmt">10.15.</a>&nbsp;
The 'enum' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#error-app-tag-stmt">10.16.</a>&nbsp;
The 'error-app-tag' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#error-message-stmt">10.17.</a>&nbsp;
The 'error-message' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#extension-stmt">10.18.</a>&nbsp;
The 'extension' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#feature-stmt">10.19.</a>&nbsp;
The 'feature' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#grouping-stmt">10.20.</a>&nbsp;
The 'grouping' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#identity-stmt">10.21.</a>&nbsp;
The 'identity' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#if-feature-stmt">10.22.</a>&nbsp;
The 'if-feature' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#import-stmt">10.23.</a>&nbsp;
The 'import' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#include-stmt">10.24.</a>&nbsp;
The 'include' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#input-stmt">10.25.</a>&nbsp;
The 'input' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#key-stmt">10.26.</a>&nbsp;
The 'key' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#leaf-stmt">10.27.</a>&nbsp;
The 'leaf' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#leaf-list-stmt">10.28.</a>&nbsp;
The 'leaf-list' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#length-stmt">10.29.</a>&nbsp;
The 'length' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#list-stmt">10.30.</a>&nbsp;
The 'list' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#mandatory-stmt">10.31.</a>&nbsp;
The 'mandatory' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#max-elements-stmt">10.32.</a>&nbsp;
The 'max-elements' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#min-elements-stmt">10.33.</a>&nbsp;
The 'min-elements' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#module-stmt">10.34.</a>&nbsp;
The 'module' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#must-stmt">10.35.</a>&nbsp;
The 'must' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#namespace-stmt">10.36.</a>&nbsp;
The 'namespace' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#notification-stmt">10.37.</a>&nbsp;
The 'notification' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ordered-by-stmt">10.38.</a>&nbsp;
The 'ordered-by' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#organization-stmt">10.39.</a>&nbsp;
The 'organization' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#output-stmt">10.40.</a>&nbsp;
The 'output' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#path-stmt">10.41.</a>&nbsp;
The 'path' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#pattern-stmt">10.42.</a>&nbsp;
The 'pattern' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#position-stmt">10.43.</a>&nbsp;
The 'position' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#prefix-stmt">10.44.</a>&nbsp;
The 'prefix' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#presence-stmt">10.45.</a>&nbsp;
The 'presence' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#range-stmt">10.46.</a>&nbsp;
The 'range' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#reference-stmt">10.47.</a>&nbsp;
The 'reference' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#require-instance-stmt">10.48.</a>&nbsp;
The 'require-instance' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#revision-stmt">10.49.</a>&nbsp;
The 'revision' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rpc-stmt">10.50.</a>&nbsp;
The 'rpc' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#status-stmt">10.51.</a>&nbsp;
The 'status' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#submodule-stmt">10.52.</a>&nbsp;
The 'submodule' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#type-stmt">10.53.</a>&nbsp;
The 'type' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#empty-type">10.53.1.</a>&nbsp;
The &quot;empty&quot; Type<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#boobi-types">10.53.2.</a>&nbsp;
The &quot;boolean&quot; and &quot;binary&quot; Types<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#bits-type">10.53.3.</a>&nbsp;
The &quot;bits&quot; Type<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#enuun-type">10.53.4.</a>&nbsp;
The &quot;enumeration&quot; and &quot;union&quot; Types<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#identityref-type">10.53.5.</a>&nbsp;
The &quot;identityref&quot; Type<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#instance-identifier-type">10.53.6.</a>&nbsp;
The &quot;instance-identifier&quot; Type<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#leafref-type">10.53.7.</a>&nbsp;
The &quot;leafref&quot; Type<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#numeric-types">10.53.8.</a>&nbsp;
The Numeric Types<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#string-type">10.53.9.</a>&nbsp;
The &quot;string&quot; Type<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#derived-types">10.53.10.</a>&nbsp;
Derived Types<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#typedef-stmt">10.54.</a>&nbsp;
The 'typedef' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#unique-stmt">10.55.</a>&nbsp;
The 'unique' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#units-stmt">10.56.</a>&nbsp;
The 'units' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#uses-stmt">10.57.</a>&nbsp;
The 'uses' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#value-stmt">10.58.</a>&nbsp;
The 'value' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#when-stmt">10.59.</a>&nbsp;
The 'when' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#yang-version-stmt">10.60.</a>&nbsp;
The 'yang-version' Statement<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#yin-element-stmt">10.61.</a>&nbsp;
The 'yin-element' Statement<br />
<a href="#hs-to-dsdl">11.</a>&nbsp;
Mapping the Hybrid Schema to DSDL<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#step2-rng">11.1.</a>&nbsp;
Generating RELAX NG Schemas for Various Document Types<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#mappingSch">11.2.</a>&nbsp;
Mapping Semantic Constraints to Schematron<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#mandatory-choice">11.2.1.</a>&nbsp;
Constraints on Mandatory Choice<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#mappingDSRL">11.3.</a>&nbsp;
Mapping Default Values to DSRL<br />
<a href="#nma-to-dsdl">12.</a>&nbsp;
Mapping NETMOD-specific Annotations to DSDL Schema Languages<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#nma-config">12.1.</a>&nbsp;
The @nma:config Annotation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#nma-default">12.2.</a>&nbsp;
The @nma:default Annotation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#nma-error-app-tag">12.3.</a>&nbsp;
The &lt;nma:error-app-tag&gt; Annotation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#nma-error-message">12.4.</a>&nbsp;
The &lt;nma:error-message&gt; Annotation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#nma-if-feature">12.5.</a>&nbsp;
The @if-feature Annotation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#nma-implicit">12.6.</a>&nbsp;
The @nma:implicit Annotation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#nma-instance-identifier">12.7.</a>&nbsp;
The &lt;nma:instance-identifier&gt; Annotation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#nma-key">12.8.</a>&nbsp;
The @nma:key Annotation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#nma-leaf-list">12.9.</a>&nbsp;
The @nma:leaf-list Annotation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#nma-leafref">12.10.</a>&nbsp;
The @nma:leafref Annotation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#nma-min-elements">12.11.</a>&nbsp;
The @nma:min-elements Annotation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#nma-max-elements">12.12.</a>&nbsp;
The @nma:max-elements Annotation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#nma-must">12.13.</a>&nbsp;
The &lt;nma:must&gt;
                                      Annotation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#nma-ordered-by">12.14.</a>&nbsp;
The &lt;nma:ordered-by&gt; Annotation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#nma-status">12.15.</a>&nbsp;
The &lt;nma:status&gt; Annotation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#nma-unique">12.16.</a>&nbsp;
The @nma:unique Annotation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#nma-when">12.17.</a>&nbsp;
The @nma:when Annotation<br />
<a href="#iana">13.</a>&nbsp;
IANA Considerations<br />
<a href="#sec-cons">14.</a>&nbsp;
Security Considerations<br />
<a href="#contributors">15.</a>&nbsp;
Contributors<br />
<a href="#acknowledgments">16.</a>&nbsp;
Acknowledgments<br />
<a href="#rfc.references1">17.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">17.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">17.2.</a>&nbsp;
Informative References<br />
<a href="#nma-schema">Appendix&nbsp;A.</a>&nbsp;
RELAX NG Schema for NETMOD-Specific Annotations<br />
<a href="#app-library">Appendix&nbsp;B.</a>&nbsp;
Schema-Independent Library<br />
<a href="#app-dhcp">Appendix&nbsp;C.</a>&nbsp;
Mapping DHCP Data Model - A Complete Example<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#app-dhcp-yang">C.1.</a>&nbsp;
Input YANG Module<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#app-dhcp-hs">C.2.</a>&nbsp;
Hybrid Schema<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#app-dhcp-2">C.3.</a>&nbsp;
Final DSDL Schemas<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">C.3.1.</a>&nbsp;
Main RELAX NG Schema for &lt;nc:get&gt; Reply<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">C.3.2.</a>&nbsp;
RELAX NG Schema - Global Named Pattern Definitions<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">C.3.3.</a>&nbsp;
Schematron Schema for &lt;nc:get&gt; Reply<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">C.3.4.</a>&nbsp;
DSRL Schema for &lt;nc:get&gt; Reply<br />
<a href="#change-log">Appendix&nbsp;D.</a>&nbsp;
Change Log<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">D.1.</a>&nbsp;
Changes Between Versions -07 and -08<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">D.2.</a>&nbsp;
Changes Between Versions -06 and -07<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">D.3.</a>&nbsp;
Changes Between Versions -05 and -06<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">D.4.</a>&nbsp;
Changes Between Versions -04 and -05<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">D.5.</a>&nbsp;
Changes Between Versions -03 and -04<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">D.6.</a>&nbsp;
Changes Between Versions -02 and -03<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">D.7.</a>&nbsp;
Changes Between Versions -01 and -02<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">D.8.</a>&nbsp;
Changes Between Versions -00 and -01<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Author's Address<br />
</p>
<br clear="all" />

<a name="intro"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>The NETCONF Working Group has completed a base protocol used
    for configuration management <a class='info' href='#RFC4741'>[RFC4741]<span> (</span><span class='info'>Enns, R., &ldquo;NETCONF Configuration Protocol,&rdquo; December&nbsp;2006.</span><span>)</span></a>. This base
    specification defines protocol bindings and an XML container
    syntax for configuration and management operations, but does not
    include a data modeling language or accompanying rules for how to
    model configuration and state information carried by NETCONF. The
    IETF Operations Area has a long tradition of defining data for
    SNMP Management Information Bases (MIB) modules <a class='info' href='#RFC1157'>[RFC1157]<span> (</span><span class='info'>Case, J., Fedor, M., Schoffstall, M., and J. Davin, &ldquo;Simple Network Management Protocol (SNMP),&rdquo; May&nbsp;1990.</span><span>)</span></a> using the Structure of Management Information
    (SMI) language <a class='info' href='#RFC2578'>[RFC2578]<span> (</span><span class='info'>McCloghrie, K., Ed., Perkins, D., Ed., and J. Schoenwaelder, Ed., &ldquo;Structure of Management Information         Version 2 (SMIv2),&rdquo; April&nbsp;1999.</span><span>)</span></a> to model its data. While
    this specific modeling approach has a number of well-understood
    problems, most of the data modeling features provided by SMI are
    still considered extremely important.  Simply modeling the valid
    syntax without the additional semantic relationships has caused
    significant interoperability problems in the past.
</p>
<p>The NETCONF community concluded that a data modeling framework
    is needed to support ongoing development of IETF and
    vendor-defined management information modules. The NETMOD Working
    Group was chartered to design a modeling language defining the
    semantics of operational data, configuration data, event
    notifications and operations, with focus on "human-friendliness",
    i.e., readability and ease of use. The result is the YANG data
    modeling language <a class='info' href='#RFC6020'>[RFC6020]<span> (</span><span class='info'>Bjorklund, M., Ed., &ldquo;YANG - A Data Modeling Language for Network         Configuration Protocol (NETCONF),&rdquo; September&nbsp;2010.</span><span>)</span></a>, which now serves for the
    normative description of NETCONF data models.
</p>
<p>Since NETCONF uses XML for encoding its messages, it is natural
    to express the constraints on NETCONF content using standard XML
    schema languages. For this purpose, the NETMOD WG selected the
    Document Schema Definition Languages (DSDL) that is being
    standardized as ISO/IEC 19757 <a class='info' href='#DSDL'>[DSDL]<span> (</span><span class='info'>ISO/IEC, &ldquo;Document Schema Definition Languages (DSDL) - Part 1:         Overview,&rdquo; November&nbsp;2004.</span><span>)</span></a>. The DSDL
    framework comprises a set of XML schema languages that address
    grammar rules, semantic constraints and other data modeling
    aspects, but also, and more importantly, do it in a coordinated
    and consistent way. While it is true that some DSDL parts have not
    been standardized yet and are still work in progress, the three
    parts that the YANG-to-DSDL mapping relies upon - Regular Language
    for XML Next Generation (RELAX NG), Schematron and Document Schema
    Renaming Language (DSRL) - already have the status of an ISO/IEC
    International Standard and are supported in a number of software
    tools.
</p>
<p>This document contains a specification of a mapping that
    translates YANG data models to XML schemas utilizing a subset of
    the DSDL schema languages. The mapping procedure is divided into
    two steps: In the first step, the structure of the data tree,
    signatures of remote procedure call (RPC) operations and
    notifications is expressed as the so-called "hybrid schema" - a
    single RELAX NG schema with annotations representing additional
    data model information (metadata, documentation, semantic
    constraints, default values etc.). The second step then generates
    a coordinated set of DSDL schemas that can be used for validating
    specific XML documents such as client requests, server responses
    or notifications, perhaps also taking into account additional
    context such as active capabilities or features.
</p>
<a name="term-not"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Terminology and Notation</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
    NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL"
    in this document are to be interpreted as described in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to         Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
</p>
<p>The following terms are defined in <a class='info' href='#RFC4741'>[RFC4741]<span> (</span><span class='info'>Enns, R., &ldquo;NETCONF Configuration Protocol,&rdquo; December&nbsp;2006.</span><span>)</span></a>:
    </p>
<ul class="text">
<li>client
</li>
<li>datastore
</li>
<li>message
</li>
<li>operation
</li>
<li>server
</li>
</ul>

<p>The following terms are defined in <a class='info' href='#RFC6020'>[RFC6020]<span> (</span><span class='info'>Bjorklund, M., Ed., &ldquo;YANG - A Data Modeling Language for Network         Configuration Protocol (NETCONF),&rdquo; September&nbsp;2010.</span><span>)</span></a>:
    </p>
<ul class="text">
<li>augment
</li>
<li>base type
</li>
<li>built-in type
</li>
<li>configuration data
</li>
<li>container
</li>
<li>data model
</li>
<li>data node
</li>
<li>data tree
</li>
<li>derived type
</li>
<li>device deviation
</li>
<li>extension
</li>
<li>feature
</li>
<li>grouping
</li>
<li>instance identifier
</li>
<li>leaf-list
</li>
<li>list
</li>
<li>mandatory node
</li>
<li>module
</li>
<li>RPC
</li>
<li>RPC operation
</li>
<li>schema node
</li>
<li>schema tree
</li>
<li>state data
</li>
<li>submodule
</li>
<li>top-level data node
</li>
<li>uses
</li>
</ul>

<p>The following terms are defined in <a class='info' href='#XML-INFOSET'>[XML&#8209;INFOSET]<span> (</span><span class='info'>Tobin, R. and J. Cowan, &ldquo;XML Information Set (Second Edition),&rdquo; February&nbsp;2004.</span><span>)</span></a>:
    </p>
<ul class="text">
<li>attribute
</li>
<li>document
</li>
<li>document element
</li>
<li>document type declaration (DTD)
</li>
<li>element
</li>
<li>information set
</li>
<li>namespace
</li>
</ul>

<p>In the text, the following typographic conventions are used:
    </p>
<ul class="text">
<li>YANG statement keywords are delimited by single quotes.
</li>
<li>XML element names are delimited by "&lt;" and "&gt;" characters.
</li>
<li>Names of XML attributes are prefixed by the "@" character.
</li>
<li>Other literal values are delimited by double quotes.
</li>
</ul><p>
    
</p>
<p>XML elements names are always written with explicit namespace
    prefixes corresponding to the following XML vocabularies:
    </p>
<blockquote class="text"><dl>
<dt>&quot;a&quot;</dt>
<dd>DTD compatibility annotations <a class='info' href='#RNG-DTD'>[RNG&#8209;DTD]<span> (</span><span class='info'>Clark, J., Ed. and M. Murata, Ed., &ldquo;RELAX NG DTD Compatibility,&rdquo; December&nbsp;2001.</span><span>)</span></a>;
</dd>
<dt>&quot;dc&quot;</dt>
<dd>Dublin Core metadata elements <a class='info' href='#RFC5013'>[RFC5013]<span> (</span><span class='info'>Kunze, J., &ldquo;The Dublin Core Metadata Element Set,&rdquo; August&nbsp;2007.</span><span>)</span></a>;
</dd>
<dt>&quot;dsrl&quot;</dt>
<dd>Document Semantics Renaming
      Language <a class='info' href='#DSRL'>[DSRL]<span> (</span><span class='info'>ISO/IEC, &ldquo;Information Technology - Document Schema Definition         Languages (DSDL) - Part 8: Document Semantics Renaming         Language - DSRL,&rdquo; December&nbsp;2008.</span><span>)</span></a>;
</dd>
<dt>&quot;en&quot;</dt>
<dd>NETCONF event notifications <a class='info' href='#RFC5277'>[RFC5277]<span> (</span><span class='info'>Chisholm, S. and H. Trevino, &ldquo;NETCONF Event Notifications,&rdquo; July&nbsp;2008.</span><span>)</span></a>;
</dd>
<dt>&quot;nc&quot;</dt>
<dd>NETCONF protocol <a class='info' href='#RFC4741'>[RFC4741]<span> (</span><span class='info'>Enns, R., &ldquo;NETCONF Configuration Protocol,&rdquo; December&nbsp;2006.</span><span>)</span></a>;
</dd>
<dt>&quot;nma&quot;</dt>
<dd>NETMOD-specific schema annotations
      (see <a class='info' href='#netmodAnnotations'>Section&nbsp;5.3<span> (</span><span class='info'>NETMOD-Specific Annotations</span><span>)</span></a>);
</dd>
<dt>&quot;nmf&quot;</dt>
<dd>NETMOD-specific XPath extension
      functions (see <a class='info' href='#nma-instance-identifier'>Section&nbsp;12.7<span> (</span><span class='info'>The &lt;nma:instance-identifier&gt; Annotation</span><span>)</span></a>);
</dd>
<dt>&quot;rng&quot;</dt>
<dd>RELAX NG <a class='info' href='#RNG'>[RNG]<span> (</span><span class='info'>ISO/IEC, &ldquo;Information Technology - Document Schema Definition         Languages (DSDL) - Part 2: Regular-Grammar-Based Validation -         RELAX NG. Second Edition.,&rdquo; December&nbsp;2008.</span><span>)</span></a>;
</dd>
<dt>&quot;sch&quot;</dt>
<dd>ISO Schematron <a class='info' href='#Schematron'>[Schematron]<span> (</span><span class='info'>ISO/IEC, &ldquo;Information Technology - Document Schema Definition         Languages (DSDL) - Part 3: Rule-Based Validation -         Schematron,&rdquo; June&nbsp;2006.</span><span>)</span></a>;
</dd>
<dt>&quot;xsd&quot;</dt>
<dd>W3C XML Schema <a class='info' href='#XSD'>[XSD]<span> (</span><span class='info'>Thompson, H., Beech, D., Maloney, M., and N. Mendelsohn, &ldquo;XML Schema Part 1: Structures Second Edition,&rdquo; October&nbsp;2004.</span><span>)</span></a>.
</dd>
</dl></blockquote><p>
    The following table shows the mapping of these prefixes to
    namespace URIs.
</p><br /><hr class="insert" />
<a name="table-namespaces"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left">
<tr><th align="left">Prefix</th><th align="left">Namespace URI</th></tr>
<tr>
<td align="left">a</td>
<td align="left">http://relaxng.org/ns/compatibility/annotations/1.0</td>
</tr>
<tr>
<td align="left">dc</td>
<td align="left">http://purl.org/dc/terms</td>
</tr>
<tr>
<td align="left">dsrl</td>
<td align="left">http://purl.oclc.org/dsdl/dsrl</td>
</tr>
<tr>
<td align="left">en</td>
<td align="left">urn:ietf:params:xml:ns:netconf:notification:1.0</td>
</tr>
<tr>
<td align="left">nc</td>
<td align="left">urn:ietf:params:xml:ns:netconf:base:1.0</td>
</tr>
<tr>
<td align="left">nma</td>
<td align="left">urn:ietf:params:xml:ns:netmod:dsdl-annotations:1</td>
</tr>
<tr>
<td align="left">nmf</td>
<td align="left">urn:ietf:params:xml:ns:netmod:xpath-extensions:1</td>
</tr>
<tr>
<td align="left">rng</td>
<td align="left">http://relaxng.org/ns/structure/1.0</td>
</tr>
<tr>
<td align="left">sch</td>
<td align="left">http://purl.oclc.org/dsdl/schematron</td>
</tr>
<tr>
<td align="left">xsd</td>
<td align="left">http://www.w3.org/2001/XMLSchema</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 1: Used namespace prefixes and corresponding URIs&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="new-terms"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Glossary of New Terms</h3>

<p></p>
<ul class="text">
<li>ancestor datatype: Any datatype a given datatype is
        (transitively) derived from.
</li>
<li>ancestor built-in datatype: The built-in datatype that is
        at the start of the type derivation chain for a given
        datatype.
</li>
<li>hybrid schema: A RELAX NG schema with annotations, which
        embodies the same information as the source YANG module(s).
        See <a class='info' href='#hybridSchema'>Section&nbsp;8.1<span> (</span><span class='info'>Hybrid Schema</span><span>)</span></a> for details.
</li>
<li>implicit node: A data node that, if it is not instantiated
        in a data tree, may be added to the information set of that
        data tree (configuration, RPC input or output, notification)
        without changing the semantics of the data tree.
</li>
</ul>

<a name="objectivesMotivation"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Objectives and Motivation</h3>

<p>The main objective of this work is to complement YANG as a data
    modeling language with validation capabilities of DSDL schema
    languages, namely RELAX NG, Schematron and DSRL. This document
    describes the correspondence between grammatical, semantic and
    data type constraints expressed in YANG and equivalent DSDL
    patterns and rules. The ultimate goal is to be able to capture all
    substantial information contained in YANG modules and express it
    in DSDL schemas. While the mapping from YANG to DSDL described in
    this document may in principle be invertible, the inverse mapping
    from DSDL to YANG is beyond the scope of this document.
</p>
<p>XML-based information models and XML-encoded data appear in
    several different forms in various phases of YANG data modeling
    and NETCONF workflow - configuration datastore contents, RPC
    requests and replies, and notifications. Moreover, RPC operations are
    characterized by an inherent diversity resulting from selective
    availability of capabilities and features. YANG modules can also
    define new RPC operations. The mapping should be able to accommodate
    this variability and generate schemas that are specifically
    tailored to a particular situation and thus considerably more
    effective for validation than generic all-encompassing schemas.
</p>
<p>In order to cope with this variability, we assume that the DSDL
    schemas will be generated on demand for a particular purpose from
    the available collection of YANG modules and their lifetime will
    be relatively short. In other words, we don't envision that any
    collection of DSDL schemas will be created and maintained over an
    extended period of time in parallel to YANG modules.
</p>
<p>The generated schemas are primarily intended as input to
    existing XML schema validators and other off-the-shelf
    tools. However, the schemas may also be perused by developers and
    users as a formal representation of constraints on a particular
    XML-encoded data object. Consequently, our secondary goal is to
    keep the schemas as readable as possible. To this end, the
    complexity of the mapping is distributed into two steps:
    </p>
<ol class="text">
<li>The first step maps one or more YANG modules
      to the so-called hybrid schema, which is a single RELAX NG
      schema that describes grammatical constraints for the main data
      tree as well as for RPC operations and notifications. Semantic
      constraints and other information appearing in the input YANG
      modules is recorded in the hybrid schema in the form of foreign
      namespace annotations. The output of the first step can thus be
      considered a virtually complete equivalent of the input YANG
      modules.
</li>
<li>In the second step, the hybrid schema from step <a class='info' href='#m-step1'>1</a> is transformed further to a
      coordinated set of fully conformant DSDL schemas containing
      constraints for a particular data object and a specific
      situation. The DSDL schemas are intended mainly for machine
      validation using off-the-shelf tools.
</li>
</ol><p>
    
</p>
<a name="schema-lang"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
DSDL Schema Languages</h3>

<p>Document Schema Definition Languages (DSDL) is a framework of
    schema languages that is being developed as the International
    Standard ISO/IEC 19757 <a class='info' href='#DSDL'>[DSDL]<span> (</span><span class='info'>ISO/IEC, &ldquo;Document Schema Definition Languages (DSDL) - Part 1:         Overview,&rdquo; November&nbsp;2004.</span><span>)</span></a>. Unlike other
    approaches to XML document validation, most notably W3C XML Schema
    Definition (XSD) <a class='info' href='#XSD'>[XSD]<span> (</span><span class='info'>Thompson, H., Beech, D., Maloney, M., and N. Mendelsohn, &ldquo;XML Schema Part 1: Structures Second Edition,&rdquo; October&nbsp;2004.</span><span>)</span></a>, the DSDL framework adheres
    to the principle of "small languages": Each of the DSDL
    constituents is a stand-alone schema language with a relatively
    narrow purpose and focus. Together, these schema languages may be
    used in a coordinated way to accomplish various validation
    tasks.
</p>
<p>The mapping described in this document uses three of the DSDL
    schema languages, namely RELAX NG <a class='info' href='#RNG'>[RNG]<span> (</span><span class='info'>ISO/IEC, &ldquo;Information Technology - Document Schema Definition         Languages (DSDL) - Part 2: Regular-Grammar-Based Validation -         RELAX NG. Second Edition.,&rdquo; December&nbsp;2008.</span><span>)</span></a>, Schematron
    <a class='info' href='#Schematron'>[Schematron]<span> (</span><span class='info'>ISO/IEC, &ldquo;Information Technology - Document Schema Definition         Languages (DSDL) - Part 3: Rule-Based Validation -         Schematron,&rdquo; June&nbsp;2006.</span><span>)</span></a> and DSRL <a class='info' href='#DSRL'>[DSRL]<span> (</span><span class='info'>ISO/IEC, &ldquo;Information Technology - Document Schema Definition         Languages (DSDL) - Part 8: Document Semantics Renaming         Language - DSRL,&rdquo; December&nbsp;2008.</span><span>)</span></a>.
</p>
<a name="relaxng"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
RELAX NG</h3>

<p>RELAX NG (pronounced "relaxing") is an XML schema language
      for grammar-based validation and Part 2 of the ISO/IEC DSDL
      family of standards <a class='info' href='#RNG'>[RNG]<span> (</span><span class='info'>ISO/IEC, &ldquo;Information Technology - Document Schema Definition         Languages (DSDL) - Part 2: Regular-Grammar-Based Validation -         RELAX NG. Second Edition.,&rdquo; December&nbsp;2008.</span><span>)</span></a>. Like the W3C XML
      Schema language <a class='info' href='#XSD'>[XSD]<span> (</span><span class='info'>Thompson, H., Beech, D., Maloney, M., and N. Mendelsohn, &ldquo;XML Schema Part 1: Structures Second Edition,&rdquo; October&nbsp;2004.</span><span>)</span></a>, it is able to describe
      constraints on the structure and contents of XML
      documents. However, unlike the DTD <a class='info' href='#XML'>[XML]<span> (</span><span class='info'>Bray, T., Paoli, J., Sperberg-McQueen, C., Maler, E., and F. Yergeau, &ldquo;Extensible Markup Language (XML) 1.0 (Fifth Edition),&rdquo; November&nbsp;2008.</span><span>)</span></a> and XSD
      schema languages, RELAX NG intentionally avoids any infoset
      augmentation such as defining default values. In the DSDL
      architecture, the particular task of defining and applying
      default values is delegated to another schema language, DSRL
      (see <a class='info' href='#dsrl'>Section&nbsp;4.3<span> (</span><span class='info'>Document Semantics Renaming Language (DSRL)</span><span>)</span></a>).
</p>
<p>As its base datatype library, RELAX NG uses the W3C XML
      Schema Datatype Library <a class='info' href='#XSD-D'>[XSD&#8209;D]<span> (</span><span class='info'>Biron, P. and A. Malhotra, &ldquo;XML Schema Part 2: Datatypes Second Edition,&rdquo; October&nbsp;2004.</span><span>)</span></a>, but unlike XSD,
      other datatype libraries may be used along with it or even
      replace it if necessary. 
</p>
<p>RELAX NG is very liberal in accepting annotations from other
      namespaces. With a few exceptions, such annotations may be placed
      anywhere in the schema and need no encapsulating elements such
      as &lt;xsd:annotation&gt; in XSD.
</p>
<p>RELAX NG schemas can be represented in two equivalent
      syntaxes: XML and compact. The compact syntax is described in
      Annex C of the RELAX NG specification <a class='info' href='#RNG-CS'>[RNG&#8209;CS]<span> (</span><span class='info'>ISO/IEC, &ldquo;Information Technology - Document Schema Definition         Languages (DSDL) - Part 2: Regular-Grammar-Based Validation -         RELAX NG. AMENDMENT 1: Compact Syntax,&rdquo; January&nbsp;2006.</span><span>)</span></a>,
      which was added to the standard in 2006 (Amendment 1). Automatic
      bidirectional conversions between the two syntaxes can be
      accomplished using several tools, for example Trang <a class='info' href='#Trang'>[Trang]<span> (</span><span class='info'>Clark, J., &ldquo;Trang: Multiformat schema converter based on RELAX NG,&rdquo; 2008.</span><span>)</span></a>.
      
</p>
<p>For its terseness and readability, the compact syntax is
      often the preferred form for publishing RELAX NG schemas whereas
      validators and other software tools usually work with the XML
      syntax. However, the compact syntax has two drawbacks:
      </p>
<ul class="text">
<li>External annotations make the compact syntax schema
        considerably less readable. While in the XML syntax the
        annotating elements and attributes are represented in a simple
        and uniform way (XML elements and attributes from foreign
        namespaces), the compact syntax uses as many as four different
        syntactic constructs: documentation, grammar, initial and
        following annotations. Therefore, the impact of annotations on
        readability is often much stronger for the compact syntax than
        it is for the XML syntax.
</li>
<li>In a computer program, it is more difficult to generate the
        compact syntax than the XML syntax. While a number of software
        libraries exist that make it easy to create an XML tree in the
        memory and then serialize it, no such aid is available for the
        compact syntax.
</li>
</ul><p>
      For these reasons, the mapping specification in this document
      uses exclusively the XML syntax. Where appropriate, though, the
      schemas resulting from the translation MAY be presented in the
      equivalent compact syntax.
</p>
<p>RELAX NG elements are qualified with the namespace URI
      "http://relaxng.org/ns/structure/1.0". The namespace of the W3C
      Schema Datatype Library is
      "http://www.w3.org/2001/XMLSchema-datatypes".
</p>
<a name="schematron"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Schematron</h3>

<p>Schematron is Part 3 of DSDL that reached the status of a
      full ISO/IEC standard in 2006 <a class='info' href='#Schematron'>[Schematron]<span> (</span><span class='info'>ISO/IEC, &ldquo;Information Technology - Document Schema Definition         Languages (DSDL) - Part 3: Rule-Based Validation -         Schematron,&rdquo; June&nbsp;2006.</span><span>)</span></a>. In
      contrast to the traditional schema languages such as DTD, XSD or
      RELAX NG, which are based on the concept of a formal grammar,
      Schematron utilizes a rule-based approach. Its rules may specify
      arbitrary conditions involving data from different parts of an
      XML document. Each rule consists of three essential components:
      </p>
<ul class="text">
<li>context - an XPath expression that defines the set of
        locations where the rule is to be applied;
</li>
<li>assert or report condition - another XPath expression that
        is evaluated relative to the location matched by the context
        expression;
</li>
<li>human-readable message that is displayed when the assert
        condition is false or report condition is true.
</li>
</ul><p>
      The difference between the assert and report condition is that
      the former is positive in that it states a condition that a
      valid document has to satisfy, whereas the latter specifies an
      error condition.
</p>
<p>Schematron draws most of its expressive power from XPath
      <a class='info' href='#XPath'>[XPath]<span> (</span><span class='info'>Clark, J. and S. DeRose, &ldquo;XML Path Language (XPath) Version 1.0,&rdquo; November&nbsp;1999.</span><span>)</span></a> and Extensible Stylesheet Language
      Transformations (XSLT) <a class='info' href='#XSLT'>[XSLT]<span> (</span><span class='info'>Clark, J., &ldquo;XSL Transformations (XSLT) Version 1.0,&rdquo; November&nbsp;1999.</span><span>)</span></a>. ISO Schematron
      allows for dynamic query language binding so that the following
      XML query languages can be used: STX, XSLT 1.0, XSLT 1.1, EXSLT,
      XSLT 2.0, XPath 1.0, XPath 2.0 and XQuery 1.0 (this list may be
      extended in the future).
</p>
<p>Human-readable error messages are another feature that sets
      Schematron apart from other common schema languages. The
      messages may even contain XPath expressions that are evaluated
      in the actual context and thus refer to information items in the
      XML document being validated.
</p>
<p>Another feature of Schematron that is used by the mapping are
      abstract patterns. These work essentially as macros and may also
      contain parameters which are supplied when the abstract pattern
      is used.
</p>
<p>Schematron elements are qualified with namespace URI
      "http://purl.oclc.org/dsdl/schematron".
</p>
<a name="dsrl"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
Document Semantics Renaming Language (DSRL)</h3>

<p>DSRL (pronounced "disrule") is Part 8 of DSDL that reached
      the status of a full ISO/IEC standard in 2008 <a class='info' href='#DSRL'>[DSRL]<span> (</span><span class='info'>ISO/IEC, &ldquo;Information Technology - Document Schema Definition         Languages (DSDL) - Part 8: Document Semantics Renaming         Language - DSRL,&rdquo; December&nbsp;2008.</span><span>)</span></a>. Unlike RELAX NG and Schematron, DSRL is allowed
      to modify XML information set of the validated document. While
      DSRL is primarily intended for renaming XML elements and
      attributes, it can also define default values for XML attributes
      and default contents for XML elements or subtrees so that the
      default contents are inserted if they are missing in the
      validated documents. The latter feature is used by the
      YANG-to-DSDL mapping for representing YANG default contents
      consisting of leaf nodes with default values and their ancestor
      non-presence containers.
</p>
<p>DSRL elements are qualified with namespace URI
      "http://purl.oclc.org/dsdl/dsrl".
</p>
<a name="annotations"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Additional Annotations</h3>

<p>Besides the DSDL schema languages, the mapping also uses three
    sets of annotations that are added as foreign-namespace attributes
    and elements to RELAX NG schemas.
</p>
<p>Two of the annotation sets - Dublin Core elements and DTD
    compatibility annotations - are standard vocabularies for
    representing metadata and documentation, respectively. Although
    these data model items are not used for formal validation, they
    quite often carry important information for data model
    implementers. Therefore, they SHOULD be included in the hybrid
    schema and MAY also appear in the final validation schemas.
</p>
<p>The third set are NETMOD-specific annotations. They are
    specifically designed for the hybrid schema and convey semantic
    constraints and other information that cannot be expressed
    directly in RELAX NG. In the second mapping step, these
    annotations are converted to Schematron and DSRL rules.
</p>
<a name="dcElements"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Dublin Core Metadata Elements</h3>

<p>Dublin Core is a system of metadata elements that was
      originally created for describing metadata of World Wide Web
      resources in order to facilitate their automated lookup. Later
      it was accepted as a standard for describing metadata of
      arbitrary resources. This specification uses the definition from
      <a class='info' href='#RFC5013'>[RFC5013]<span> (</span><span class='info'>Kunze, J., &ldquo;The Dublin Core Metadata Element Set,&rdquo; August&nbsp;2007.</span><span>)</span></a>.
</p>
<p> Dublin Core elements are qualified with namespace URI
      "http://purl.org/dc/terms".
</p>
<a name="dtdCompatibility"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
RELAX NG DTD Compatibility Annotations</h3>

<p>DTD compatibility annotations are a part of the RELAX NG DTD
      Compatibility specification <a class='info' href='#RNG-DTD'>[RNG&#8209;DTD]<span> (</span><span class='info'>Clark, J., Ed. and M. Murata, Ed., &ldquo;RELAX NG DTD Compatibility,&rdquo; December&nbsp;2001.</span><span>)</span></a>.
      YANG-to-DSDL mapping uses only the &lt;a:documentation&gt;
      annotation for representing YANG 'description' and 'reference'
      texts.
</p>
<p>Note that there is no intention to make the resulting schemas
      DTD-compatible, the main reason for using these annotations is
      technical: they are well supported and adequately formatted by
      several RELAX NG tools.
</p>
<p>DTD compatibility annotations are qualified with namespace
      URI "http://relaxng.org/ns/compatibility/annotations/1.0".
</p>
<a name="netmodAnnotations"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
NETMOD-Specific Annotations</h3>

<p>NETMOD-specific annotations are XML elements and attributes
      qualified with the namespace URI
      "urn:ietf:params:xml:ns:netmod:dsdl-annotations:1" which appear
      in various locations of the hybrid schema. YANG statements are
      mapped to these annotations in a straightforward way. In most
      cases, the annotation attributes and elements have the same name
      as the corresponding YANG statement.
</p>
<p><a class='info' href='#nma-table'>Table&nbsp;2<span> (</span><span class='info'>NETMOD-specific annotations</span><span>)</span></a> lists alphabetically the names of
      NETMOD-specific annotation attributes (prefixed with "@") and
      elements (in angle brackets) along with a reference to the
      section where their use is described. <a class='info' href='#nma-schema'>Appendix&nbsp;A<span> (</span><span class='info'>RELAX NG Schema for NETMOD-Specific Annotations</span><span>)</span></a> contains a RELAX NG schema for this
      annotation vocabulary.
</p><br /><hr class="insert" />
<a name="nma-table"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left"><col align="left">
<tr><th align="left">annotation</th><th align="left">section</th><th align="left">note</th></tr>
<tr>
<td align="left">@nma:config</td>
<td align="left"><a class='info' href='#config-stmt'>10.9<span> (</span><span class='info'>The 'config' Statement</span><span>)</span></a></td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">&lt;nma:data&gt;</td>
<td align="left"><a class='info' href='#hybridSchema'>Section&nbsp;8.1<span> (</span><span class='info'>Hybrid Schema</span><span>)</span></a></td>
<td align="left"><a class='info' href='#item-marker'>4</a></td>
</tr>
<tr>
<td align="left">@nma:default</td>
<td align="left"><a class='info' href='#default-stmt'>10.12<span> (</span><span class='info'>The 'default' Statement</span><span>)</span></a></td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">&lt;nma:error-app-tag&gt;</td>
<td align="left"><a class='info' href='#error-app-tag-stmt'>10.16<span> (</span><span class='info'>The 'error-app-tag' Statement</span><span>)</span></a></td>
<td align="left"><a class='info' href='#item-error'>1</a></td>
</tr>
<tr>
<td align="left">&lt;nma:error-message&gt;</td>
<td align="left"><a class='info' href='#error-message-stmt'>10.17<span> (</span><span class='info'>The 'error-message' Statement</span><span>)</span></a></td>
<td align="left"><a class='info' href='#item-error'>1</a></td>
</tr>
<tr>
<td align="left">@nma:if-feature</td>
<td align="left"><a class='info' href='#if-feature-stmt'>10.22<span> (</span><span class='info'>The 'if-feature' Statement</span><span>)</span></a></td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">@nma:implicit</td>
<td align="left"><a class='info' href='#container-stmt'>10.11<span> (</span><span class='info'>The 'container' Statement</span><span>)</span></a>,
        <a class='info' href='#case-stmt'>10.7<span> (</span><span class='info'>The 'case' Statement</span><span>)</span></a>,
        <a class='info' href='#default-stmt'>10.12<span> (</span><span class='info'>The 'default' Statement</span><span>)</span></a></td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">&lt;nma:input&gt;</td>
<td align="left"><a class='info' href='#hybridSchema'>Section&nbsp;8.1<span> (</span><span class='info'>Hybrid Schema</span><span>)</span></a></td>
<td align="left"><a class='info' href='#item-marker'>4</a></td>
</tr>
<tr>
<td align="left">&lt;nma:instance-identifier&gt;</td>
<td align="left"><a class='info' href='#instance-identifier-type'>10.53.6<span> (</span><span class='info'>The &quot;instance-identifier&quot; Type</span><span>)</span></a></td>
<td align="left"><a class='info' href='#item-reqinst'>2</a></td>
</tr>
<tr>
<td align="left">@nma:key</td>
<td align="left"><a class='info' href='#key-stmt'>10.26<span> (</span><span class='info'>The 'key' Statement</span><span>)</span></a></td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">@nma:leaf-list</td>
<td align="left"><a class='info' href='#leaf-list-stmt'>10.28<span> (</span><span class='info'>The 'leaf-list' Statement</span><span>)</span></a></td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">@nma:leafref</td>
<td align="left"><a class='info' href='#leafref-type'>10.53.7<span> (</span><span class='info'>The &quot;leafref&quot; Type</span><span>)</span></a></td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">@nma:mandatory</td>
<td align="left"><a class='info' href='#choice-stmt'>10.8<span> (</span><span class='info'>The 'choice' Statement</span><span>)</span></a></td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">@nma:max-elements</td>
<td align="left"><a class='info' href='#leaf-list-stmt'>10.28<span> (</span><span class='info'>The 'leaf-list' Statement</span><span>)</span></a></td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">@nma:min-elements</td>
<td align="left"><a class='info' href='#leaf-list-stmt'>10.28<span> (</span><span class='info'>The 'leaf-list' Statement</span><span>)</span></a></td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">@nma:module</td>
<td align="left"><a class='info' href='#module-stmt'>10.34<span> (</span><span class='info'>The 'module' Statement</span><span>)</span></a></td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">&lt;nma:must&gt;</td>
<td align="left"><a class='info' href='#must-stmt'>10.35<span> (</span><span class='info'>The 'must' Statement</span><span>)</span></a></td>
<td align="left"><a class='info' href='#item-must'>3</a></td>
</tr>
<tr>
<td align="left">&lt;nma:notification&gt;</td>
<td align="left"><a class='info' href='#hybridSchema'>Section&nbsp;8.1<span> (</span><span class='info'>Hybrid Schema</span><span>)</span></a></td>
<td align="left"><a class='info' href='#item-marker'>4</a></td>
</tr>
<tr>
<td align="left">&lt;nma:notifications&gt;</td>
<td align="left"><a class='info' href='#hybridSchema'>Section&nbsp;8.1<span> (</span><span class='info'>Hybrid Schema</span><span>)</span></a></td>
<td align="left"><a class='info' href='#item-marker'>4</a></td>
</tr>
<tr>
<td align="left">@nma:ordered-by</td>
<td align="left"><a class='info' href='#ordered-by-stmt'>10.38<span> (</span><span class='info'>The 'ordered-by' Statement</span><span>)</span></a></td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">&lt;nma:output&gt;</td>
<td align="left"><a class='info' href='#hybridSchema'>Section&nbsp;8.1<span> (</span><span class='info'>Hybrid Schema</span><span>)</span></a></td>
<td align="left"><a class='info' href='#item-marker'>4</a></td>
</tr>
<tr>
<td align="left">&lt;nma:rpc&gt;</td>
<td align="left"><a class='info' href='#hybridSchema'>Section&nbsp;8.1<span> (</span><span class='info'>Hybrid Schema</span><span>)</span></a></td>
<td align="left"><a class='info' href='#item-marker'>4</a></td>
</tr>
<tr>
<td align="left">&lt;nma:rpcs&gt;</td>
<td align="left"><a class='info' href='#hybridSchema'>Section&nbsp;8.1<span> (</span><span class='info'>Hybrid Schema</span><span>)</span></a></td>
<td align="left"><a class='info' href='#item-marker'>4</a></td>
</tr>
<tr>
<td align="left">@nma:status</td>
<td align="left"><a class='info' href='#status-stmt'>10.51<span> (</span><span class='info'>The 'status' Statement</span><span>)</span></a></td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">@nma:unique</td>
<td align="left"><a class='info' href='#unique-stmt'>10.55<span> (</span><span class='info'>The 'unique' Statement</span><span>)</span></a></td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">@nma:units</td>
<td align="left"><a class='info' href='#units-stmt'>10.56<span> (</span><span class='info'>The 'units' Statement</span><span>)</span></a></td>
<td align="left">&nbsp;</td>
</tr>
<tr>
<td align="left">@nma:when</td>
<td align="left"><a class='info' href='#when-stmt'>10.59<span> (</span><span class='info'>The 'when' Statement</span><span>)</span></a></td>
<td align="left">&nbsp;</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 2: NETMOD-specific annotations&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>Notes:
      </p>
<ol class="text">
<li>Appears only as a subelement of
        &lt;nma:must&gt;.
</li>
<li>Has an optional attribute
        @require-instance.
</li>
<li>Has a mandatory attribute @assert and
        two optional subelements &lt;nma:error-app-tag&gt; and
        &lt;nma:error-message&gt;.
</li>
<li>Marker element in the hybrid schema.
</li>
</ol>

<a name="mappingOverview"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Overview of the Mapping</h3>

<p>This section gives an overview of the YANG-to-DSDL mapping, its
    inputs and outputs. <a class='info' href='#fig-mapschema'>Figure&nbsp;1<span> (</span><span class='info'>Structure of the mapping</span><span>)</span></a> presents an overall
    structure of the mapping:
</p><br /><hr class="insert" />
<a name="fig-mapschema"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                 +----------------+
                 | YANG module(s) |
                 +----------------+
                         |
                         |T
                         |
       +------------------------------------+
       |           hybrid schema            |
       +------------------------------------+
            /       |           |       \
           /        |           |        \
        Tg/       Tr|           |Tn       \
         /          |           |          \
   +---------+   +-----+    +-------+    +------+
   |get reply|   | rpc |    | notif |    | .... |
   +---------+   +-----+    +-------+    +------+
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: Structure of the mapping&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p> The mapping procedure is divided into two steps:   
    </p>
<ol class="text">
<li>Transformation T in the first step maps one or more YANG
      modules to the hybrid schema (see <a class='info' href='#hybridSchema'>Section&nbsp;8.1<span> (</span><span class='info'>Hybrid Schema</span><span>)</span></a>). Constraints that cannot be expressed
      directly in RELAX NG (list key definitions, 'must' statements
      etc.) and various documentation texts are recorded in the schema
      as foreign-namespace annotations.
</li>
<li>In the second step, the hybrid schema may be transformed in
      multiple ways to a coordinated set of DSDL schemas that can be
      used for validating a particular data object in a specific
      context. <a class='info' href='#fig-mapschema'>Figure&nbsp;1<span> (</span><span class='info'>Structure of the mapping</span><span>)</span></a> shows three simple
      possibilities as examples. In the process, appropriate parts of
      the hybrid schema are extracted and specific annotations
      transformed to equivalent, but usually more complex, Schematron
      patterns, DSRL element maps etc.
</li>
</ol>

<p>An implementation of the mapping algorithm MUST accept one or
    more valid YANG modules as its input. It is important to be able
    to process multiple YANG modules together since multiple modules
    may be negotiated for a NETCONF session and the contents of the
    configuration datastore is then obtained as the union of data
    trees specified by the individual modules, which may also lead to
    multiple root nodes of the datastore hierarchy. In addition, the
    input modules may be further coupled by the 'augment' statement in
    which one module augments the data tree of another module.
</p>
<p>It is also assumed that the algorithm has access, perhaps on
    demand, to all YANG modules that the input modules import
    (directly or transitively).
</p>
<p>Other information contained in input YANG modules, such as
    semantic constraints and default values, are recorded in the
    hybrid schema as annotations - XML attributes or elements
    qualified with namespace URI
    "urn:ietf:params:xml:ns:netmod:dsdl-annotations:1". Metadata
    describing the YANG modules are mapped to Dublin Core annotations
    elements (<a class='info' href='#dcElements'>Section&nbsp;5.1<span> (</span><span class='info'>Dublin Core Metadata Elements</span><span>)</span></a>). Finally, documentation
    strings are mapped to &lt;a:documentation&gt; elements belonging
    to the DTD compatibility vocabulary (<a class='info' href='#dtdCompatibility'>Section&nbsp;5.2<span> (</span><span class='info'>RELAX NG DTD Compatibility Annotations</span><span>)</span></a>).
</p>
<p>The output of the second step is a coordinated set of three
    DSDL schemas corresponding to a specific data object and context:
    </p>
<ul class="text">
<li>RELAX NG schema describing the grammatical and datatype
      constraints;
</li>
<li>Schematron schema expressing other constraints such as
      uniqueness of list keys or user-specified semantic rules;
</li>
<li>DSRL schema containing the specification of default
      contents.
</li>
</ul>

<a name="validation"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
NETCONF Content Validation</h3>

<p>This section describes how the schemas generated by the
    YANG-to-DSDL mapping are supposed to be applied for validating XML
    instance documents such as the contents of a datastore or various
    NETCONF messages.
</p>
<p>The validation proceeds in the following steps, which are also
    illustrated in <a class='info' href='#fig-valproc'>Figure&nbsp;2<span> (</span><span class='info'>Outline of the validation procedure</span><span>)</span></a>:
    </p>
<ol class="text">
<li>The XML instance document is
      checked for grammatical and data type validity using the RELAX
      NG schema.
</li>
<li>Default values for leaf nodes have to be
      applied and their ancestor containers added where necessary. It
      is important to add the implicit nodes before the next
      validation step because YANG specification <a class='info' href='#RFC6020'>[RFC6020]<span> (</span><span class='info'>Bjorklund, M., Ed., &ldquo;YANG - A Data Modeling Language for Network         Configuration Protocol (NETCONF),&rdquo; September&nbsp;2010.</span><span>)</span></a>
      requires that the data tree against which XPath expressions are
      evaluated already has all defaults filled-in. Note that this
      step modifies the information set of the validated XML
      document.
</li>
<li>The semantic constraints are checked using
      the Schematron schema.
</li>
</ol><p>
    
</p><br /><hr class="insert" />
<a name="fig-valproc"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      +----------+                        +----------+
      |          |                        |   XML    |
      |   XML    |                        | document |
      | document |-----------o-----------&gt;|   with   |
      |          |           ^            | defaults |
      |          |           |            |          |
      +----------+           |            +----------+
           ^                 | filling in       ^
           | grammar,        | defaults         | semantic
           | datatypes       |                  | constraints
           |                 |                  |
      +----------+       +--------+       +------------+
      | RELAX NG |       |  DSRL  |       | Schematron |
      |  schema  |       | schema |       |   schema   |
      +----------+       +--------+       +------------+
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: Outline of the validation procedure&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="design"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Design Considerations</h3>

<p>YANG data models could in principle be mapped to the DSDL schemas
    in a number of ways. The mapping procedure described in this
    document uses several specific design decisions that are discussed
    in the following subsections.
</p>
<a name="hybridSchema"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.1"></a><h3>8.1.&nbsp;
Hybrid Schema</h3>

<p>As was explained in <a class='info' href='#mappingOverview'>Section&nbsp;6<span> (</span><span class='info'>Overview of the Mapping</span><span>)</span></a>, the
      first step of the mapping produces an intermediate document -
      the hybrid schema, which specifies all constraints for the
      entire data model in a single RELAX NG schema.
</p>
<p>Every input YANG module corresponds to exactly one embedded
      grammar in the hybrid schema. This separation of input YANG
      modules allows each embedded grammar to include named pattern
      definitions into its own namespace, which is important for
      mapping YANG groupings (see <a class='info' href='#grouping-typedef'>Section&nbsp;9.2<span> (</span><span class='info'>Mapping YANG Groupings and Typedefs</span><span>)</span></a>
      for additional details).
</p>
<p>In addition to grammatical and datatype constraints, YANG
      modules provide other important information that cannot be
      expressed in a RELAX NG schema: semantic constraints, default
      values, metadata, documentation and so on. Such information
      items are represented in the hybrid schema as XML attributes and
      elements belonging to the namespace with the following URI:
      "urn:ietf:params:xml:ns:netmod:dsdl-annotations:1". A complete
      list of these annotations is given in <a class='info' href='#netmodAnnotations'>Section&nbsp;5.3<span> (</span><span class='info'>NETMOD-Specific Annotations</span><span>)</span></a>, detailed rules about their use are
      then contained in the following sections.
</p>
<p>YANG modules define data models not only for configuration
      and state data but also for (multiple) RPC operations <a class='info' href='#RFC4741'>[RFC4741]<span> (</span><span class='info'>Enns, R., &ldquo;NETCONF Configuration Protocol,&rdquo; December&nbsp;2006.</span><span>)</span></a> and/or event notifications <a class='info' href='#RFC5277'>[RFC5277]<span> (</span><span class='info'>Chisholm, S. and H. Trevino, &ldquo;NETCONF Event Notifications,&rdquo; July&nbsp;2008.</span><span>)</span></a>. In order to be able to capture all three
      types of data models in one schema document, the hybrid schema
      uses special markers that enclose sub-schemas for configuration
      and state data, individual RPC operations (both input and output
      part) and individual notifications.
</p>
<p>The markers are the following XML elements in the namespace
      of NETMOD-specific annotations (URI
      urn:ietf:params:xml:ns:netmod:dsdl-annotations:1):
</p><br /><hr class="insert" />
<a name="table-hybrid-tree-elements"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left">
<tr><th align="left">Element name</th><th align="left">Role</th></tr>
<tr>
<td align="left">nma:data</td>
<td align="left">encloses configuration and state data</td>
</tr>
<tr>
<td align="left">nma:rpcs</td>
<td align="left">encloses all RPC operations</td>
</tr>
<tr>
<td align="left">nma:rpc</td>
<td align="left">encloses an individual RPC operation</td>
</tr>
<tr>
<td align="left">nma:input</td>
<td align="left">encloses an RPC request</td>
</tr>
<tr>
<td align="left">nma:output</td>
<td align="left">encloses an RPC reply</td>
</tr>
<tr>
<td align="left">nma:notifications</td>
<td align="left">encloses all notifications</td>
</tr>
<tr>
<td align="left">nma:notification</td>
<td align="left">encloses an individual notification</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 3: Marker elements in the hybrid schema&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>For example, consider a data model formed by two YANG modules
      "example-a" and "example-b" that define nodes in the namespaces
      "http://example.com/ns/example-a" and
      "http://example.com/ns/example-b". Module "example-a" defines
      configuration/state data, RPC methods and notifications, whereas
      "example-b" defines only configuration/state data. The hybrid
      schema can then be schematically represented as follows:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;grammar xmlns="http://relaxng.org/ns/structure/1.0"
         xmlns:nma="urn:ietf:params:xml:ns:netmod:dsdl-annotations:1"
         xmlns:exa="http://example.com/ns/example-a"
         xmlns:exb="http://example.com/ns/example-b"
         datatypeLibrary="http://www.w3.org/2001/XMLSchema-datatypes"&gt;
  &lt;start&gt;
    &lt;grammar nma:module="example-a"
             ns="http://example.com/ns/example-a"&gt;
      &lt;start&gt;
        &lt;nma:data&gt;
          ...configuration and state data defined in "example-a"...
        &lt;/nma:data&gt;
        &lt;nma:rpcs&gt;
          &lt;nma:rpc&gt;
            &lt;nma:input&gt;
              &lt;element name="exa:myrpc"&gt;
                ...
              &lt;/element&gt;
            &lt;/nma:input&gt;
            &lt;nma:output&gt;
              ...
            &lt;/nma:output&gt;
          &lt;/nma:rpc&gt;
          ...
        &lt;/nma:rpcs&gt;
        &lt;nma:notifications&gt;
          &lt;nma:notification&gt;
            &lt;element name="exa:mynotif"&gt;
              ...
            &lt;/element&gt;
          &lt;/nma:notification&gt;
          ...
        &lt;/nma:notifications&gt;
      &lt;/start&gt;
      ...local named pattern definitions of example-a...
    &lt;/grammar&gt;
    &lt;grammar nma:module="example-b"
             ns="http://example.com/ns/example-a"&gt;
      &lt;start&gt;
        &lt;nma:data&gt;
          ...configuration and state data defined in "example-b"...
        &lt;/nma:data&gt;
        &lt;nma:rpcs/&gt;
        &lt;nma:notifications/&gt;
      &lt;/start&gt;
      ...local named pattern definitions of example-b...
    &lt;/grammar&gt;
  &lt;/start&gt;
  ...global named pattern definitions...
&lt;/grammar&gt;</pre></div>
<p>A complete hybrid schema for the data model of a DHCP server
      is given in <a class='info' href='#app-dhcp-hs'>Appendix&nbsp;C.2<span> (</span><span class='info'>Hybrid Schema</span><span>)</span></a>.
</p>
<a name="modularity"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.2"></a><h3>8.2.&nbsp;
Modularity</h3>

<p>Both YANG and RELAX NG offer means for modularity, i.e., for
      splitting the contents of a full schema into separate modules
      and combining or reusing them in various ways. However, the
      approaches taken by YANG and RELAX NG differ. Modularity in
      RELAX NG is suitable for ad hoc combinations of a small number
      of schemas whereas YANG assumes a large set of modules similar
      to SNMP MIB modules. The following differences are important:
      </p>
<ul class="text">
<li>In YANG, whenever module A imports module B, it gets access
        to the definitions (groupings and typedefs) appearing at the
        top level of module B. However, no part of data tree from
        module B is imported along with it. In contrast, the
        &lt;rng:include&gt; pattern in RELAX NG imports both
        definitions of named patterns and the entire schema tree from
        the included schema.
</li>
<li>The names of imported YANG groupings and typedefs are
        qualified with the namespace of the imported module. On the
        other hand, the names of data nodes contained inside the
        imported groupings, when used within the importing module,
        become part of the importing module's namespace. In RELAX NG,
        the names of patterns are unqualified and so named patterns
        defined in both the importing and imported module share the
        same flat namespace. The contents of RELAX NG named patterns
        may either keep the namespace of the schema where they are
        defined or inherit the namespace of the importing module,
        analogically to YANG. However, in order to achieve the latter
        behavior, the definitions of named patterns must be included
        from an external schema which has to be prepared in a special
        way (see <a class='info' href='#Vli04'>[Vli04]<span> (</span><span class='info'>van der Vlist, E., &ldquo;RELAX NG,&rdquo; 2004.</span><span>)</span></a>, Chapter 11).
</li>
</ul>

<p>In order to map, as much as possible, the modularity of YANG
      to RELAX NG, a validating RELAX NG schema (the result of the
      second mapping step) has to be split into two files, one of them
      containing all global definitions that are mapped from top-level
      YANG groupings appearing in all input YANG module. This RELAX NG
      schema MUST NOT define any namespace via the @ns attribute.
</p>
<p>The other RELAX NG schema file then defines actual data trees
      mapped from input YANG modules, each of them enclosed in an own
      embedded grammar. Those embedded grammars in which at least one
      of the global definitions is used MUST include the first schema
      with definitions and also MUST define the local namespace using
      the @ns attribute. This way, the global definitions can be used
      inside different embedded grammar, each time accepting a
      different local namespace.
</p>
<p>Named pattern definition that are mapped from non-top-level
      YANG groupings MUST be placed inside the embedded grammar
      corresponding to the YANG module where the grouping is
      defined.
</p>
<p>In the hybrid schema, we need to distinguish the global and
      non-global named pattern definitions while still keeping the
      hybrid schema in one file. This is accomplished in the following
      way:
      </p>
<ul class="text">
<li>Every global definition MUST be placed as a child of the
        the outer &lt;rng:grammar&gt; element (the document root of
        the hybrid schema).
</li>
<li>Every non-global definitions MUST be placed as a child of
        the corresponding embedded &lt;rng:grammar&gt; element.
</li>
</ul>

<p>YANG also allows for splitting a module into a number of
      submodules. However, as submodules have no impact on the scope
      of identifiers and namespaces, the modularity based on
      submodules is not mapped in any way. The contents of
      submodules is therefore handled as if the submodule text
      appeared directly in the main module.
</p>
<a name="granularity"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.3"></a><h3>8.3.&nbsp;
Granularity</h3>

<p>RELAX NG supports different styles of schema structuring: One
      extreme, often called "Russian Doll", specifies the structure of
      an XML instance document in a single hierarchy. The other
      extreme, the flat style, uses a similar approach as the Data
      Type Definition (DTD) schema language - every XML element
      corresponds to a named pattern definition. In practice, some
      compromise between the two extremes is usually chosen.
</p>
<p>YANG supports both styles in principle, too, but in most
      cases the modules are organized in a way closer to the "Russian
      Doll" style, which provides a better insight into the structure
      of the configuration data. Groupings are usually defined only
      for contents that are prepared for reuse in multiple places via
      the 'uses' statement. In contrast, RELAX NG schemas tend to be
      much flatter, because finer granularity is also needed in RELAX
      NG for extensibility of the schemas - it is only possible to
      replace or modify schema fragments that are factored out as
      named patterns. For YANG this is not an issue since its
      'augment' and 'refine' statements can delve, by using path
      expressions, into arbitrary depths of existing structures.
</p>
<p>In general, it not feasible to map YANG's powerful extension
      mechanisms to those available in RELAX NG. For this reason, the
      mapping essentially keeps the granularity of the original YANG
      data model: YANG groupings and definitions of derived types
      usually have direct counterparts in definitions of named
      patterns in the resulting RELAX NG schema.
</p>
<a name="XML-NS"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.4"></a><h3>8.4.&nbsp;
Handling of XML Namespaces</h3>

<p>Most modern XML schema languages, including RELAX NG,
      Schematron and DSRL, support schemas for so-called compound XML
      documents which contain elements from multiple namespaces. This
      is useful for our purpose since the YANG-to-DSDL mapping allows
      for multiple input YANG modules, which naturally leads to
      compound document schemas.
</p>
<p>RELAX NG offers two alternatives for defining the target
      namespaces in the schema:
      </p>
<ol class="text">
<li>First possibility is the traditional XML
        way via the @xmlns:xxx attribute.
</li>
<li>One of the target namespace
        URIs may be declared using the @ns attribute.
</li>
</ol>

<p>In both the hybrid schema and validation RELAX NG schemas
      generated in the second step, the namespaces MUST be declared as
      follows:
      </p>
<ol class="text">
<li>The root &lt;rng:grammar&gt; MUST have @xmlns:xxx
        attributes declaring prefixes of all namespaces that are used
        in the data model. The prefixes SHOULD be identical to those
        defined in the 'prefix' statements. An implementation of the
        mapping MUST resolve all collisions in the prefixes defined by
        different input modules, if there are any.
</li>
<li>Each embedded &lt;rng:grammar&gt; element MUST declare the
        namespace of the corresponding module using the @ns
        attribute. This way, the names of nodes defined by global
        named patterns are able to adopt the local namespace of each
        embedded grammar, as explained in <a class='info' href='#modularity'>Section&nbsp;8.2<span> (</span><span class='info'>Modularity</span><span>)</span></a>.
        
</li>
</ol>

<p>This setup is illustrated by the example at the end of <a class='info' href='#hybridSchema'>Section&nbsp;8.1<span> (</span><span class='info'>Hybrid Schema</span><span>)</span></a>.
</p>
<p>DSRL schemas may declare any number of target namespaces via
      the standard XML attributes xmlns:xxx.
</p>
<p>In contrast, Schematron requires all used namespaces to be
      defined in the &lt;sch:ns&gt; subelements of the document
      element &lt;sch:schema&gt;.
</p>
<a name="desc-yang-to-hs"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Mapping YANG Data Models to the Hybrid Schema</h3>

<p>This section explains the main principles governing the first
    step of the mapping. Its result is the hybrid schema which is
    described in <a class='info' href='#hybridSchema'>Section&nbsp;8.1<span> (</span><span class='info'>Hybrid Schema</span><span>)</span></a>.
</p>
<p>A detailed specification of the mapping of individual YANG
    statements is contained in the following <a class='info' href='#yang-to-rng'>Section&nbsp;10<span> (</span><span class='info'>Mapping YANG Statements to the Hybrid Schema</span><span>)</span></a>.
</p>
<a name="occurrence-rules"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.1"></a><h3>9.1.&nbsp;
Occurrence Rules for Data Nodes</h3>

<p>In DSDL schema languages, occurrence constraints for a node
      are always localized together with that node. In a RELAX NG
      schema, for example, &lt;rng:optional&gt; pattern appears as the
      parent element of the pattern defining a leaf or non-leaf
      element. Similarly, DSRL specifies default contents separately
      for every single node, be it a leaf or non-leaf element.
</p>
<p>For leaf nodes in YANG modules, the occurrence constraints
      are also easily inferred from the substatements of 'leaf'. On
      the other hand, for a YANG container it is often necessary to
      examine its entire subtree in order to determine the container's
      occurrence constraints.
</p>
<p>Therefore, one of the goals of the first mapping step is to
      infer the occurrence constraints for all data nodes and mark
      accordingly the corresponding &lt;rng:element&gt; patterns in
      the hybrid schema so that any transformation procedure
      in the second mapping step can simply use this information and
      need not examine the subtree again.
</p>
<p>First, it has to be decided whether a given data node must
      always be present in a valid configuration. If so, such a node
      is called mandatory, otherwise it is called optional. This
      constraint is closely related to the notion of mandatory nodes
      in <a href='http://tools.ietf.org/html/rfc6020#section-3.1'>Section
      3.1</a> in <a class='info' href='#RFC6020'>[RFC6020]<span> (</span><span class='info'>Bjorklund, M., Ed., &ldquo;YANG - A Data Modeling Language for Network         Configuration Protocol (NETCONF),&rdquo; September&nbsp;2010.</span><span>)</span></a>. The only difference is that
      this document also considers list keys to be mandatory.
</p>
<p>The other occurrence constraint has to do with the semantics
      of the 'default' statement and the possibility of removing empty
      non-presence containers. As a result, the information set of a
      valid configuration may be modified by adding or removing
      certain leaf or container elements without changing the meaning
      of the configuration. In this document, such elements are called
      implicit. In the hybrid schema, they can be identified as RELAX
      NG patterns having either @nma:default or @nma:implicit
      attribute.
</p>
<p>Note that both occurrence constraints apply to containers at
      the top level of the data tree, and then also to other
      containers under the additional condition that their parent node
      exists in the instance document. For example, consider the
      following YANG fragment:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
    container outer {
        presence 'Presence of "outer" means something.';
        container c1 {
            leaf foo {
                type uint8;
                default 1;
            }
        }
        container c2 {
            leaf-list bar {
                type uint8;
                min-elements 0;
            }
        }
        container c3 {
            leaf baz {
                type uint8;
                mandatory true;
            }
        }
    }</pre></div>
<p>Here, container "outer" has the 'presence' substatement,
      which means that it is optional and not implicit. If "outer" is
      not present in a configuration, its child containers are not
      present as well. However, if "outer" does exist, it makes sense
      to ask which of its child containers are optional and which are
      implicit. In this case, "c1" is optional and implicit, "c2" is
      optional but not implicit and "c3" is mandatory (and therefore
      not implicit).
</p>
<p>The following subsections give precise rules for determining
      whether a container is optional or mandatory and whether it is
      implicit. In order to simplify the recursive definition of these
      occurrence characteristics, it is useful to define them also for
      other types of YANG schema nodes, i.e., leaf, list, leaf-list
      and anyxml and choice.
</p>
<a name="optional-mandatory"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.1.1"></a><h3>9.1.1.&nbsp;
Optional and Mandatory Nodes</h3>

<p>The decision whether a given node is mandatory or optional
        is governed by the following rules:
        </p>
<ul class="text">
<li>Leaf, anyxml and choice nodes are mandatory if they
          contain the substatement "mandatory true;". For a choice
          node this means that at least one node from exactly one case
          branch must exist.
</li>
<li>In addition, a leaf node is mandatory if it is
          declared as a list key.
</li>
<li>A list or leaf-list node is mandatory if it contains the
          'min-elements' substatement with an argument value greater than
          zero.
</li>
<li>A container node is mandatory if its definition does not
          contain the 'presence' substatement and at least one of its
          child nodes is mandatory.
</li>
</ul>

<p>A node which is not mandatory is said to be optional.
</p>
<p>In RELAX NG, definitions of nodes that are optional must be
        explicitly wrapped in the &lt;rng:optional&gt; element. The
        mapping MUST use the above rules to determine whether a YANG
        node is optional and if so, insert the &lt;rng:optional&gt;
        element in the hybrid schema.
</p>
<p>However, alternatives in &lt;rng:choice&gt; MUST NOT be
        defined as optional in the hybrid schema. If a choice in YANG
        is not mandatory, &lt;rng:optional&gt; MUST be used to wrap
        the entire &lt;rng:choice&gt; pattern.
</p>
<a name="implicit-nodes"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.1.2"></a><h3>9.1.2.&nbsp;
Implicit Nodes</h3>

<p>The following rules are used to determine whether a given
        data node is implicit:
        </p>
<ul class="text">
<li>List, leaf-list and anyxml nodes are never implicit.
</li>
<li>A leaf node is implicit if and only if it has a default
          value, defined either directly or via its datatype.
</li>
<li>A container node is implicit if and only if it does not
          have the 'presence' substatement, none of its children are
          mandatory and at least one child is implicit.
</li>
</ul>

<p>In the hybrid schema, all implicit containers, as
        well as leafs that obtain their default value from a typedef
        and don't have the @nma:default attribute, MUST be marked with
        @nma:implicit attribute having the value of "true".
</p>
<p>Note that <a href='http://tools.ietf.org/html/rfc6020#section-7.9.3'>Section
        7.9.3</a> in <a class='info' href='#RFC6020'>[RFC6020]<span> (</span><span class='info'>Bjorklund, M., Ed., &ldquo;YANG - A Data Modeling Language for Network         Configuration Protocol (NETCONF),&rdquo; September&nbsp;2010.</span><span>)</span></a> specifies other rules
        that must be taken into account when deciding whether a given
        container or leaf appearing inside a case of a choice is
        ultimately implicit or not. Specifically, a leaf or container
        under a case can be implicit only if the case appears in the
        argument of the choice's 'default' statement. However, this is
        not sufficient by itself but also depends on the particular
        instance XML document, namely on the presence or absence of
        nodes from other (non-default) cases. The details are
        explained in <a class='info' href='#mappingDSRL'>Section&nbsp;11.3<span> (</span><span class='info'>Mapping Default Values to DSRL</span><span>)</span></a>.
</p>
<a name="grouping-typedef"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.2"></a><h3>9.2.&nbsp;
Mapping YANG Groupings and Typedefs</h3>

<p>YANG groupings and typedefs are generally mapped to RELAX NG
      named patterns. There are, however, several caveats that the
      mapping has to take into account.
</p>
<p>First of all, YANG typedefs and groupings may appear at all
      levels of the module hierarchy and are subject to lexical
      scoping, see <a href='http://tools.ietf.org/html/rfc6020#section-5.5'>Section 5.5</a> in <a class='info' href='#RFC6020'>[RFC6020]<span> (</span><span class='info'>Bjorklund, M., Ed., &ldquo;YANG - A Data Modeling Language for Network         Configuration Protocol (NETCONF),&rdquo; September&nbsp;2010.</span><span>)</span></a>. Second, top-level
      symbols from external modules may be imported as qualified names
      represented using the external module namespace prefix and the
      name of the symbol. In contrast, named patterns in RELAX NG
      (both local and imported via the &lt;rng:include&gt; pattern)
      share the same namespace and within a grammar they are always
      global - their definitions may only appear at the top level as
      children of the &lt;rng:grammar&gt; element. Consequently,
      whenever YANG groupings and typedefs are mapped to RELAX NG
      named pattern definitions, their names MUST be disambiguated in
      order to avoid naming conflicts. The mapping uses the following
      procedure for mangling the names of groupings and type
      definitions:
      </p>
<ul class="text">
<li>Names of groupings and typedefs appearing at the top level
        of the YANG module hierarchy are prefixed with the module name
        and two underscore characters ("__").
</li>
<li>Names of other groupings and typedefs, i.e., those that do
        not appear at the top level of a YANG module, are prefixed
        with the module name, double underscore, and then the names of
        all ancestor data nodes separated by double underscore.
</li>
<li>Finally, since the names of groupings and typedefs in YANG
        have different namespaces, an additional underscore character
        is added to the beginning of the mangled names of all
        groupings.
</li>
</ul><p>
      
</p>
<p>An additional complication is caused by the YANG rules for
      subelement ordering (see, e.g., <a href='http://tools.ietf.org/html/rfc6020#section-7.5.7'>Section
      7.5.7</a> in <a class='info' href='#RFC6020'>[RFC6020]<span> (</span><span class='info'>Bjorklund, M., Ed., &ldquo;YANG - A Data Modeling Language for Network         Configuration Protocol (NETCONF),&rdquo; September&nbsp;2010.</span><span>)</span></a>): In RPC input and output
      parameters, subelements must follow the order specified in the
      data model, otherwise the order is arbitrary. Consequently, if a
      grouping is used both in RPC input/output parameters and
      elsewhere, it MUST be mapped to two different named pattern
      definitions - one with fixed order and the other with arbitrary
      order. To distinguish them, the "__rpc" suffix MUST be appended
      to the version with fixed order.
</p>
<p>EXAMPLE. Consider the following YANG module which imports
      the standard module "ietf-inet-types" <a class='info' href='#RFC6021'>[RFC6021]<span> (</span><span class='info'>Schoenwaelder, J., Ed., &ldquo;Common YANG Data Types,&rdquo; September&nbsp;2010.</span><span>)</span></a>:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
module example1 {
    namespace "http://example.com/ns/example1";
    prefix ex1;
    typedef vowels {
        type string {
            pattern "[aeiouy]*";
        }
    }
    grouping "grp1" {
        leaf "void" {
            type "empty";
        }
    }
    container "cont" {
        leaf foo {
            type vowels;
        }
        uses "grp1";
    }
}</pre></div>
<p>The hybrid schema generated by the first mapping step will
      then contain the following two (global) named pattern
      definitions:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;rng:define name="example1__vowels"&gt;
  &lt;rng:data type="string"&gt;
    &lt;rng:param name="pattern"&gt;[aeiouy]*&lt;/rng:param&gt;
  &lt;/rng:data&gt;
&lt;/rng:define&gt;

&lt;rng:define name="_example1__grp1"&gt;
  &lt;rng:optional&gt;
    &lt;rng:element name="void"&gt;
      &lt;rng:empty/&gt;
    &lt;/rng:element&gt;
  &lt;/rng:optional&gt;
&lt;/rng:define&gt;</pre></div>
<a name="refine-augment"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.2.1"></a><h3>9.2.1.&nbsp;
YANG Refinements and Augments</h3>

<p>YANG groupings represent a similar concept as named pattern
        definitions in RELAX NG and both languages also offer
        mechanisms for their subsequent modification. However, in
        RELAX NG the definitions themselves are modified whereas YANG
        provides two substatements of 'uses' which modify expansions
        of groupings:
        </p>
<ul class="text">
<li>'refine' statement allows for changing parameters of a
          schema node inside the grouping referenced by the parent
          'uses' statement;
</li>
<li>'augment' statement can be used for adding new schema
          nodes to the grouping contents.
</li>
</ul>

<p>Both 'refine' and 'augment' statements are quite powerful
        in that they can address, using XPath-like expressions as
        their arguments, schema nodes that are arbitrarily deep inside
        the grouping contents. In contrast, modifications of named
        pattern definitions in RELAX NG are applied exclusively at the
        topmost level of the named pattern contents. In order to
        achieve a modifiability of named patterns comparable to YANG,
        a RELAX NG schema would have to be extremely flat (cf. <a class='info' href='#granularity'>Section&nbsp;8.3<span> (</span><span class='info'>Granularity</span><span>)</span></a>) and very difficult to read.
</p>
<p>Since the goal of the mapping described in this document is
        to generate ad hoc DSDL schemas, we decided to avoid these
        complications and instead expand the grouping and refine
        and/or augment it "in place". In other words, every 'uses'
        statement which has 'refine' and/or 'augment' substatements is
        replaced by the contents of the corresponding grouping, the
        changes specified in the 'refine' and 'augment' statements are
        applied and the resulting YANG schema fragment is mapped as if
        the 'uses'/'grouping' indirection wasn't there.
</p>
<p>If there are further 'uses' statements inside the grouping
        contents, they may require expansion, too: it is necessary if
        the contained 'uses'/'grouping' pair lies on the "modification
        path" specified in the argument of a 'refine' or 'augment'
        statement.
</p>
<p>EXAMPLE. Consider the following YANG module:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
module example2 {
    namespace "http://example.com/ns/example2";
    prefix ex2;
    grouping leaves {
        uses fr;
        uses es;
    }
    grouping fr {
        leaf feuille {
            type string;
        }
    }
    grouping es {
        leaf hoja {
            type string;
        }
    }
    uses leaves;
}</pre></div>
<p>The resulting hybrid schema contains three global named
      pattern definitions corresponding to the three groupings,
      namely
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;rng:define name="_example2__leaves"&gt;
  &lt;rng:interleave&gt;
    &lt;rng:ref name="_example2__fr"/&gt;
    &lt;rng:ref name="_example2__es"/&gt;
  &lt;/rng:interleave&gt;
&lt;/rng:define&gt;

&lt;rng:define name="_example2__fr"&gt;
  &lt;rng:optional&gt;
    &lt;rng:element name="feuille"&gt;
      &lt;rng:data type="string"/&gt;
    &lt;/rng:element&gt;
  &lt;/rng:optional&gt;
&lt;/rng:define&gt;

&lt;rng:define name="_example2__es"&gt;
  &lt;rng:optional&gt;
    &lt;rng:element name="hoja"&gt;
      &lt;rng:data type="string"/&gt;
    &lt;/rng:element&gt;
  &lt;/rng:optional&gt;
&lt;/rng:define&gt;
</pre></div>
<p>and the configuration data part of the hybrid schema
      is a single named pattern reference:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;nma:data&gt;
  &lt;rng:ref name="_example2__leaves"/&gt;
&lt;/nma:data&gt;</pre></div>
<p>Now assume that the "uses leaves" statement contains a
      'refine' substatement, for example:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
uses leaves {
    refine "hoja" {
        default "alamo";
    }
}</pre></div>
<p>The resulting hybrid schema now contains just one
      named pattern definition - "_example2__fr". The other two
      groupings "leaves" and "es" have to be expanded because they
      both lie on the "modification path", i.e., contain the leaf
      "hoja" that is being refined. The configuration data part of the
      hybrid schema now looks like this:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;nma:data&gt;
  &lt;rng:interleave&gt;
    &lt;rng:ref name="_example2__fr"/&gt;
    &lt;rng:optional&gt;
      &lt;rng:element name="ex2:hoja" nma:default="alamo"&gt;
        &lt;rng:data type="string"/&gt;
      &lt;/rng:element&gt;
    &lt;/rng:optional&gt;
  &lt;/rng:interleave&gt;
&lt;/nma:data&gt;</pre></div>
<a name="chtypes"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.2.2"></a><h3>9.2.2.&nbsp;
Type Derivation Chains</h3>

<p>RELAX NG has no equivalent of the type derivation mechanism
        in YANG that allows to restrict a built-in type (perhaps in
        multiple steps) by adding new constraints. Whenever a derived
        YANG type is used without restrictions - as a substatement of
        either 'leaf' or another 'typedef' - then the 'type' statement
        is mapped simply to a named pattern reference &lt;rng:ref&gt;,
        and the type definition is mapped to a RELAX NG named pattern
        definition &lt;rng:define&gt;. However, if any restrictions
        are specified as substatements of the 'type' statement, the
        type definition MUST be expanded at that point so that only
        the ancestor built-in type appears in the hybrid schema,
        restricted with facets that correspond to the combination of
        all restrictions found along the type derivation chain and
        also in the 'type' statement.
</p>
<p>EXAMPLE. Consider this YANG module:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
module example3 {
    namespace "http://example.com/ns/example3";
    prefix ex3;
    typedef dozen {
        type uint8 {
            range 1..12;
        }
    }
    leaf month {
        type dozen;
    }
}</pre></div>
<p>The 'type' statement in "leaf month" has no restrictions
        and is therefore mapped simply to the reference &lt;rng:ref
        name="example3__dozen"/&gt; and the corresponding named
        pattern is defined as follows:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;rng:define name="example3__dozen"&gt;
  &lt;rng:data type="unsignedByte"&gt;
    &lt;rng:param name="minInclusive"&gt;1&lt;/rng:param&gt;
    &lt;rng:param name="maxInclusive"&gt;12&lt;/rng:param&gt;
  &lt;/rng:data&gt;
&lt;/rng:define&gt;</pre></div>
<p>Assume now that the definition of leaf "month" is changed
        to
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
leaf month {
    type dozen {
        range 7..max;
    }
}</pre></div>
<p>The output RELAX NG schema then will not contain any named
        pattern definition and the leaf "month" will be mapped directly
        to
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;rng:element name="ex3:month"&gt;
  &lt;rng:data type="unsignedByte"&gt;
    &lt;rng:param name="minInclusive"&gt;7&lt;/rng:param&gt;
    &lt;rng:param name="maxInclusive"&gt;12&lt;/rng:param&gt;
  &lt;/rng:data&gt;
&lt;/rng:element&gt;</pre></div>
<p>The mapping of type derivation chains may be further
        complicated by the presence of the 'default' statement in type
        definitions. In the simple case, when a type definition
        containing the 'default' statement is used without
        restrictions, the 'default' statement is mapped to the
        @nma:default attribute attached to the &lt;rng:define&gt;
        element.
</p>
<p>However, if that type definition has to be expanded due to
        restrictions, the @nma:default annotation arising from the
        expanded type or ancestor types in the type derivation chain
        MUST be attached to the pattern where the expansion occurs. If
        there are multiple 'default' statements in consecutive steps
        of the type derivation, only the 'default' statement that is
        closest to the expanded type is used.
</p>
<p>EXAMPLE. Consider this variation of the last example:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
module example3bis {
    namespace "http://example.com/ns/example3bis";
    prefix ex3bis;
    typedef dozen {
        type uint8 {
            range 1..12;
        }
        default 7;
    }
    leaf month {
        type dozen;
    }
}</pre></div>
<p>The 'typedef' statement in this module is mapped to the
        following named pattern definition:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;rng:define name="example3bis__dozen" @nma:default="7"&gt;
  &lt;rng:data type="unsignedByte"&gt;
    &lt;rng:param name="minInclusive"&gt;1&lt;/rng:param&gt;
    &lt;rng:param name="maxInclusive"&gt;12&lt;/rng:param&gt;
  &lt;/rng:data&gt;
&lt;/rng:define&gt;</pre></div>
<p>If the "dozen" type is restricted when used in the leaf
        "month" definition as in the previous example, the "dozen"
        type has to be expanded and @nma:default becomes an attribute
        of the &lt;ex3bis:month&gt; element definition:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;rng:element name="ex3bis:month" @nma:default="7"&gt;
  &lt;rng:data type="unsignedByte"&gt;
    &lt;rng:param name="minInclusive"&gt;7&lt;/rng:param&gt;
    &lt;rng:param name="maxInclusive"&gt;12&lt;/rng:param&gt;
  &lt;/rng:data&gt;
&lt;/rng:element&gt;</pre></div>
<p>However, if the definition of the leaf "month" itself
        contained the 'default' substatement, the default specified
        for the "dozen" type would be ignored.
</p>
<a name="transXPath"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.3"></a><h3>9.3.&nbsp;
Translation of XPath Expressions</h3>

<p>YANG uses full XPath 1.0 syntax <a class='info' href='#XPath'>[XPath]<span> (</span><span class='info'>Clark, J. and S. DeRose, &ldquo;XML Path Language (XPath) Version 1.0,&rdquo; November&nbsp;1999.</span><span>)</span></a> for
      the arguments of 'must', 'when' and 'path' statements.  As the
      names of data nodes defined in a YANG module always belong to
      the namespace of that YANG module, YANG adopted a simplification
      similar to the concept of default namespace in XPath 2.0: node
      names in XPath expressions needn't carry a namespace prefix
      inside the module where they are defined and the local module's
      namespace is assumed.
</p>
<p>Consequently, all XPath expressions MUST be translated into a
      fully conformant XPath 1.0 expression: Every unprefixed node
      name MUST be prepended with the local module's namespace prefix
      as declared by the 'prefix' statement.
</p>
<p>XPath expressions appearing inside top-level groupings
      require special attention because all unprefixed node names
      contained in them must adopt the namespace of each module where
      the grouping is used (cf. <a class='info' href='#modularity'>Section&nbsp;8.2<span> (</span><span class='info'>Modularity</span><span>)</span></a>. In order
      to achieve this, the local prefix MUST be represented using the
      variable "$pref" in the hybrid schema. A Schematron schema which
      encounters such an XPath expression then supplies an appropriate
      value for this variable via a parameter to an abstract pattern
      to which the YANG grouping is mapped (see <a class='info' href='#mappingSch'>Section&nbsp;11.2<span> (</span><span class='info'>Mapping Semantic Constraints to Schematron</span><span>)</span></a>).
</p>
<p>For example, XPath expression "/dhcp/max-lease-time"
      appearing in a YANG module with the "dhcp" prefix will be
      translated to
      </p>
<ul class="text">
<li>"$pref:dhcp/$pref:max-lease-time", if the expression is
        inside a top-level grouping;
</li>
<li>"dhcp:dhcp/dhcp:max-lease-time", otherwise.
</li>
</ul>

<p>YANG also uses other XPath-like expressions, namely key
      identifiers and "descendant schema node identifiers" (see the
      ABNF production for and "descendant-schema-nodeid" in <a href='http://tools.ietf.org/html/rfc6020#section-12'>Section&#xA0;12</a>
      of <a class='info' href='#RFC6020'>[RFC6020]<span> (</span><span class='info'>Bjorklund, M., Ed., &ldquo;YANG - A Data Modeling Language for Network         Configuration Protocol (NETCONF),&rdquo; September&nbsp;2010.</span><span>)</span></a>). These expressions MUST be translated
      by adding local module prefixes as well.
</p>
<a name="extensions"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.4"></a><h3>9.4.&nbsp;
YANG Language Extensions</h3>

<p>YANG allows for extending its own language in-line by adding
    new statements with keywords from special namespaces. Such
    extensions first have to be declared using the 'extension'
    statement and then they can be used as the standard YANG
    statements, from which they are distinguished by a namespace
    prefix qualifying the extension keyword. RELAX NG has a similar
    extension mechanism - XML elements and attributes with names from
    foreign namespaces may be inserted at almost any place of a RELAX
    NG schema.
</p>
<p>YANG language extensions may or may not have a meaning in the
    context of DSDL schemas. Therefore, an implementation MAY ignore
    any or all of the extensions. However, an extension that is not
    ignored MUST be mapped to XML element(s) and/or attribute(s) that
    exactly match the YIN form of the extension, see <a href='http://tools.ietf.org/html/rfc6020#section-11.1'>Section
    11.1</a> in <a class='info' href='#RFC6020'>[RFC6020]<span> (</span><span class='info'>Bjorklund, M., Ed., &ldquo;YANG - A Data Modeling Language for Network         Configuration Protocol (NETCONF),&rdquo; September&nbsp;2010.</span><span>)</span></a>.
</p>
<p>EXAMPLE. Consider the following extension defined by the "acme"
    module:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
extension documentation-flag {
    argument number;
}</pre></div>
<p>This extension can then be used in the same or another
    module, for instance like this:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
leaf folio {
    acme:documentation-flag 42;
    type string;
}</pre></div>
<p>If this extension is honored by the mapping, it will be mapped
    to
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;rng:element name="acme:folio"&gt;
   &lt;acme:documentation-flag number="42"/&gt;
   &lt;rng:data type="string"/&gt;
&lt;/rng:element&gt;
</pre></div>
<p>Note that the 'extension' statement itself is not mapped in any
    way.
</p>
<a name="yang-to-rng"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
Mapping YANG Statements to the Hybrid Schema</h3>

<p>Each subsection in this section is devoted to one YANG
    statement and provides the specification of how the statement is
    mapped to the hybrid schema. The subsections are sorted
    alphabetically by the statement keyword.
</p>
<p>Each YANG statement is mapped to an XML fragment, typically a
    single element or attribute but it may also be a larger
    structure. The mapping procedure is inherently recursive, which
    means that after finishing a statement the mapping continues with
    its substatements, if there are any, and a certain element of the
    resulting fragment becomes the parent of other fragments resulting
    from the mapping of substatements. Any changes to this default
    recursive procedure are explicitly specified.
</p>
<p>YANG XML encoding rules translate to the following rules for
    ordering multiple subelements:
    </p>
<ol class="text">
<li>Within the &lt;nma:rpcs&gt; subtree (i.e., for input and
      output parameters of an RPC operation) the order of subelements
      is fixed and their definitions in the hybrid schema MUST follow
      the order specified in the source YANG module.
</li>
<li>When mapping the 'list' statement, all keys MUST come before
      any other subelements and in the same order as they are declared
      in the 'key' statement. The order of the remaining (non-key)
      subelements is not specified, so their definitions in the hybrid
      schema MUST be enclosed in the &lt;rng:interleave&gt;
      element.
</li>
<li>Otherwise, the order of subelements is arbitrary and,
      consequently, all definitions of subelements in the hybrid
      schema MUST be enclosed in the &lt;rng:interleave&gt;
      element.
</li>
</ol>

<p>The following conventions are used in this section:
    </p>
<ul class="text">
<li>The argument of the statement being mapped is denoted by
      ARGUMENT.
</li>
<li>The element in the RELAX NG schema that becomes the parent of
      the resulting XML fragment is denoted by PARENT.
</li>
</ul>

<a name="anyxml-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.1"></a><h3>10.1.&nbsp;
The 'anyxml' Statement</h3>

<p>This statement is mapped to &lt;rng:element&gt; element and
      ARGUMENT with prepended local namespace prefix becomes the value
      of its @name attribute. The contents of &lt;rng:element&gt;
      are
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;rng:ref name="__anyxml__"/&gt;</pre></div>
<p>Substatements of the 'anyxml' statement, if any, MAY be
      mapped to additional children of the &lt;rng:element&gt;
      element.
</p>
<p>If at least one 'anyxml' statement occurs in any of the input
      YANG modules, the following pattern definition MUST be added
      exactly once to the RELAX NG schema as a child of the
      root &lt;rng:grammar&gt; element (cf. <a class='info' href='#Vli04'>[Vli04]<span> (</span><span class='info'>van der Vlist, E., &ldquo;RELAX NG,&rdquo; 2004.</span><span>)</span></a>,
      p. 172):
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;rng:define name="__anyxml__"&gt;
  &lt;rng:zeroOrMore&gt;
    &lt;rng:choice&gt;
      &lt;rng:attribute&gt;
        &lt;rng:anyName/&gt;
      &lt;/rng:attribute&gt;
      &lt;rng:element&gt;
        &lt;rng:anyName/&gt;
        &lt;rng:ref name="__anyxml__"/&gt;
      &lt;/rng:element&gt;
      &lt;rng:text/&gt;
    &lt;/rng:choice&gt;
  &lt;/rng:zeroOrMore&gt;
&lt;/rng:define&gt;</pre></div>
<p>EXAMPLE: YANG statement in a module with namespace prefix
      "yam"
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
anyxml data {
    description "Any XML content allowed here.";
}</pre></div>
<p>is mapped to the following fragment:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;rng:element name="yam:data"&gt;
    &lt;a:documentation&gt;Any XML content allowed here&lt;/a:documentation&gt;
    &lt;rng:ref name="__anyxml__"/&gt;
&lt;/rng:element&gt;</pre></div>
<p>An anyxml node is optional if there is no "mandatory true;"
      substatement. The &lt;rng:element&gt; element then MUST be
      wrapped in &lt;rng:optional&gt;, except when the 'anyxml'
      statement is a child of the 'choice' statement and thus forms a
      shorthand case for that choice (see <a class='info' href='#optional-mandatory'>Section&nbsp;9.1.1<span> (</span><span class='info'>Optional and Mandatory Nodes</span><span>)</span></a> for details).
</p>
<a name="argument-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.2"></a><h3>10.2.&nbsp;
The 'argument' Statement</h3>

<p>This statement is not mapped to the output schema, but see
      the rules for handling extensions in <a class='info' href='#extensions'>Section&nbsp;9.4<span> (</span><span class='info'>YANG Language Extensions</span><span>)</span></a>.
</p>
<a name="augment-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.3"></a><h3>10.3.&nbsp;
The 'augment' Statement</h3>

<p>As a substatement of 'uses', this statement is handled as a
      part of 'uses' mapping, see <a class='info' href='#uses-stmt'>Section&nbsp;10.57<span> (</span><span class='info'>The 'uses' Statement</span><span>)</span></a>.
</p>
<p>At the top level of a module or submodule, the 'augment'
      statement is used for augmenting the schema tree of another YANG
      module. If the augmented module is not processed within the same
      mapping session, the top-level 'augment' statement MUST be
      ignored. Otherwise, the contents of the statement are added to
      the foreign module with the namespace of the module where the
      'augment' statement appears.
</p>
<a name="base-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.4"></a><h3>10.4.&nbsp;
The 'base' Statement</h3>

<p>This statement is ignored as a substatement of 'identity' and
      handled within the 'identityref' type if it appears as a
      substatement of that type definition, see <a class='info' href='#identityref-type'>Section&nbsp;10.53.5<span> (</span><span class='info'>The &quot;identityref&quot; Type</span><span>)</span></a>.
</p>
<a name="belongs-to-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.5"></a><h3>10.5.&nbsp;
The 'belongs-to' Statement</h3>

<p>This statement is not used since the processing of submodules
      is always initiated from the main module, see <a class='info' href='#include-stmt'>Section&nbsp;10.24<span> (</span><span class='info'>The 'include' Statement</span><span>)</span></a>.
</p>
<a name="bit-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.6"></a><h3>10.6.&nbsp;
The 'bit' Statement</h3>

<p>This statement is handled within the "bits" type, see <a class='info' href='#bits-type'>Section&nbsp;10.53.3<span> (</span><span class='info'>The &quot;bits&quot; Type</span><span>)</span></a>.
</p>
<a name="case-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.7"></a><h3>10.7.&nbsp;
The 'case' Statement</h3>

<p>This statement is mapped to &lt;rng:group&gt; or
      &lt;rng:interleave&gt; element, depending on whether the
      statement belongs to an definition of an RPC operation or
      not. If the argument of a sibling 'default' statement equals to
      ARGUMENT, @nma:implicit attribute with the value of "true" MUST be
      added to that &lt;rng:group&gt; or &lt;rng:interleave&gt;
      element. The @nma:implicit attribute MUST NOT be used for nodes
      at the top-level of a non-default case (see <a href='http://tools.ietf.org/html/rfc6020#section-7.9.3'>Section
      7.9.3</a> in <a class='info' href='#RFC6020'>[RFC6020]<span> (</span><span class='info'>Bjorklund, M., Ed., &ldquo;YANG - A Data Modeling Language for Network         Configuration Protocol (NETCONF),&rdquo; September&nbsp;2010.</span><span>)</span></a>).
</p>
<a name="choice-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.8"></a><h3>10.8.&nbsp;
The 'choice' Statement</h3>

<p>This statement is mapped to &lt;rng:choice&gt; element.
</p>
<p>If 'choice' has the 'mandatory' substatement with the value
      of "true", the attribute @nma:mandatory MUST be added to the
      &lt;rng:choice&gt; element with the value of ARGUMENT. This case
      may require additional handling, see <a class='info' href='#mandatory-choice'>Section&nbsp;11.2.1<span> (</span><span class='info'>Constraints on Mandatory Choice</span><span>)</span></a>. Otherwise, if "mandatory true;" is
      not present, the &lt;rng:choice&gt; element MUST be wrapped in
      &lt;rng:optional&gt;.
</p>
<p>The alternatives in &lt;rng:choice&gt; - mapped from either
      the 'case' statement or a shorthand case - MUST NOT be defined
      as optional.
</p>
<a name="config-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.9"></a><h3>10.9.&nbsp;
The 'config' Statement</h3>

<p>This statement is mapped to @nma:config attribute and
      ARGUMENT becomes its value.
</p>
<a name="contact-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.10"></a><h3>10.10.&nbsp;
The 'contact' Statement</h3>

<p>This statement SHOULD NOT be used by the mapping since the
      hybrid schema may be mapped from multiple YANG modules created
      by different authors. The hybrid schema contains references to
      all input modules in the Dublin Core elements &lt;dc:source&gt;,
      see <a class='info' href='#module-stmt'>Section&nbsp;10.34<span> (</span><span class='info'>The 'module' Statement</span><span>)</span></a>. The original YANG modules are
      the authoritative sources of the authorship information.
</p>
<a name="container-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.11"></a><h3>10.11.&nbsp;
The 'container' Statement</h3>

<p>Using the rules specified in <a class='info' href='#optional-mandatory'>Section&nbsp;9.1.1<span> (</span><span class='info'>Optional and Mandatory Nodes</span><span>)</span></a>, the mapping algorithm MUST
      determine whether the statement defines an optional container,
      and if so, insert the &lt;rng:optional&gt; element and make it
      the new PARENT.
</p>
<p>The container defined by this statement
      is then mapped to the &lt;rng:element&gt; element, which becomes
      a child of PARENT and uses ARGUMENT with prepended local namespace
      prefix as the value of its @name attribute.
</p>
<p>Finally, using the rules specified in <a class='info' href='#implicit-nodes'>Section&nbsp;9.1.2<span> (</span><span class='info'>Implicit Nodes</span><span>)</span></a>,
      the mapping algorithm MUST determine whether the container is
      implicit, and if so, add the attribute @nma:implicit with the
      value of "true" to the &lt;rng:element&gt; element.
</p>
<a name="default-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.12"></a><h3>10.12.&nbsp;
The 'default' Statement</h3>

<p>If this statement is a substatement of 'leaf', it is mapped
      to the @nma:default attribute of PARENT and ARGUMENT becomes its
      value.
</p>
<p>As a substatement of 'typedef', the 'default' statement is
      also mapped to the @nma:default attribute with the value of
      ARGUMENT. The placement of this attribute depends on whether or
      not the type definition has to be expanded when it is used:
      </p>
<ul class="text">
<li>If the type definition is not expanded, @nma:default
        becomes an attribute of the &lt;rng:define&gt; pattern
        resulting from the parent 'typedef' mapping.
</li>
<li>Otherwise, @nma:default becomes an attribute of the
        ancestor RELAX NG pattern inside which the expansion takes
        place.
</li>
</ul><p>
      Details and an example are given in <a class='info' href='#chtypes'>Section&nbsp;9.2.2<span> (</span><span class='info'>Type Derivation Chains</span><span>)</span></a>.
</p>
<p>Finally, as a substatement of 'choice', the 'default'
      statement identifies the default case and is handled within the
      'case' statement, see <a class='info' href='#case-stmt'>Section&nbsp;10.7<span> (</span><span class='info'>The 'case' Statement</span><span>)</span></a>. If the default
      case uses the shorthand notation where the 'case' statement is
      omitted, the @nma:implicit attribute with the value of "true" is
      either attached to the node representing the default case in the
      shorthand notation or, alternatively, an extra &lt;rng:group&gt;
      element MAY be inserted and the @nma:implicit attribute attached
      to it. In the latter case, the net result is the same as if
      the 'case' statement wasn't omitted for the default case.
</p>
<p>EXAMPLE. The following 'choice' statement in a module with
      namespace prefix "yam"
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
choice leaves {
    default feuille;
    leaf feuille { type empty; }
    leaf hoja { type empty; }
}</pre></div>
<p>is either mapped directly to
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;rng:choice&gt;
  &lt;rng:element name="yam:feuille" nma:implicit="true"&gt;
    &lt;rng:empty/&gt;
  &lt;/rng:element&gt;
  &lt;rng:element name="yam:hoja"&gt;
    &lt;rng:empty/&gt;
  &lt;/rng:element/&gt;
&lt;/rng:choice&gt;</pre></div>
<p>or the default case may be wrapped in an extra &lt;rng:group&gt;:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;rng:choice&gt;
  &lt;rng:group nma:implicit="true"&gt;
    &lt;rng:element name="yam:feuille"&gt;
      &lt;rng:empty/&gt;
    &lt;/rng:element&gt;
  &lt;/rng:group&gt;
  &lt;rng:element name="yam:hoja"&gt;
    &lt;rng:empty/&gt;
  &lt;/rng:element/&gt;
&lt;/rng:choice&gt;</pre></div>
<a name="description-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.13"></a><h3>10.13.&nbsp;
The 'description' Statement</h3>

<p>This statement is mapped to the DTD compatibility element
      &lt;a:documentation&gt; and ARGUMENT becomes its text.
</p>
<p>In order to get properly formatted in the RELAX NG compact
      syntax, this element SHOULD be inserted as the first child of
      PARENT.
</p>
<a name="deviation-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.14"></a><h3>10.14.&nbsp;
The 'deviation' Statement</h3>

<p>This statement is ignored. However, it is assumed that all
      deviations are known beforehand and the corresponding changes
      have already been applied to the input YANG modules.
</p>
<a name="enum-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.15"></a><h3>10.15.&nbsp;
The 'enum' Statement</h3>

<p>This statement is mapped to &lt;rng:value&gt; element and
      ARGUMENT becomes its text. All substatements except 'status' are
      ignored because the &lt;rng:value&gt; element cannot contain
      annotation elements, see <a class='info' href='#RNG'>[RNG]<span> (</span><span class='info'>ISO/IEC, &ldquo;Information Technology - Document Schema Definition         Languages (DSDL) - Part 2: Regular-Grammar-Based Validation -         RELAX NG. Second Edition.,&rdquo; December&nbsp;2008.</span><span>)</span></a>, section 6.
</p>
<a name="error-app-tag-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.16"></a><h3>10.16.&nbsp;
The 'error-app-tag' Statement</h3>

<p>This statement is ignored unless it is a substatement of
      'must'. In the latter case it is mapped to the
      &lt;nma:error-app-tag&gt; element. See also <a class='info' href='#must-stmt'>Section&nbsp;10.35<span> (</span><span class='info'>The 'must' Statement</span><span>)</span></a>.
</p>
<a name="error-message-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.17"></a><h3>10.17.&nbsp;
The 'error-message' Statement</h3>

<p>This statement is ignored unless it is a substatement of
      'must'. In the latter case it is mapped to the
      &lt;nma:error-message&gt; element. See also <a class='info' href='#must-stmt'>Section&nbsp;10.35<span> (</span><span class='info'>The 'must' Statement</span><span>)</span></a>.
</p>
<a name="extension-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.18"></a><h3>10.18.&nbsp;
The 'extension' Statement</h3>

<p>This statement is ignored. However, extensions to the YANG
     language MAY be mapped as described in <a class='info' href='#extensions'>Section&nbsp;9.4<span> (</span><span class='info'>YANG Language Extensions</span><span>)</span></a>.
</p>
<a name="feature-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.19"></a><h3>10.19.&nbsp;
The 'feature' Statement</h3>

<p>This statement is ignored.
</p>
<a name="grouping-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.20"></a><h3>10.20.&nbsp;
The 'grouping' Statement</h3>

<p>This statement is mapped to a RELAX NG named pattern
      definition &lt;rng:define&gt;, but only if the grouping defined
      by this statement is used without refinements and augments in at
      least one of the input modules. In this case, the named pattern
      definition becomes a child of the &lt;rng:grammar&gt; element
      and its name is ARGUMENT mangled according to the rules
      specified in <a class='info' href='#grouping-typedef'>Section&nbsp;9.2<span> (</span><span class='info'>Mapping YANG Groupings and Typedefs</span><span>)</span></a>.
</p>
<p>As explained in <a class='info' href='#modularity'>Section&nbsp;8.2<span> (</span><span class='info'>Modularity</span><span>)</span></a>, a named
      pattern definition MUST be placed
      </p>
<ul class="text">
<li>as a child of the root &lt;rng:grammar&gt; element if the
        corresponding grouping is defined at the top level of an input
        YANG module;
</li>
<li>otherwise as a child of the embedded &lt;rng:grammar&gt;
        element corresponding to the module in which the grouping is
        defined.
</li>
</ul>

<p>Whenever a grouping is used with refinements and/or augments,
      it is expanded so that the refinements and augments may be
      applied in place to the prescribed schema nodes. See <a class='info' href='#refine-augment'>Section&nbsp;9.2.1<span> (</span><span class='info'>YANG Refinements and Augments</span><span>)</span></a> for further details and an
      example.
</p>
<p>An implementation MAY offer the option of mapping all
      'grouping' statements as named pattern definitions in the output
      RELAX NG schema even if they are not referenced. This is useful
      for mapping YANG "library" modules that typically contain only
      'typedef' and/or 'grouping' statements. 
</p>
<a name="identity-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.21"></a><h3>10.21.&nbsp;
The 'identity' Statement</h3>

<p>This statement is mapped to the following named pattern
      definition which is placed as a child of the root
      &lt;rng:grammar&gt; element:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;rng:define name="__PREFIX_ARGUMENT"&gt;
  &lt;rng:choice&gt;
    &lt;rng:value type="QName"&gt;PREFIX:ARGUMENT&lt;/rng:value&gt;
    &lt;rng:ref name="IDENTITY1"/&gt;
    ...
  &lt;/rng:choice&gt;
&lt;/rng:define&gt;</pre></div>
<p>where
      </p>
<blockquote class="text">
<p>PREFIX is the prefix used in the hybrid schema for the
        namespace of the module where the current identity is
        defined.
</p>
<p>IDENTITY1 is the name of of the named pattern corresponding
        to an identity which is derived from the current
        identity. Exactly one &lt;rng:ref&gt; element MUST be present
        for every such identity.
</p>
</blockquote>

<p>EXAMPLE (<a class='info' href='#RFC6020'>[RFC6020]<span> (</span><span class='info'>Bjorklund, M., Ed., &ldquo;YANG - A Data Modeling Language for Network         Configuration Protocol (NETCONF),&rdquo; September&nbsp;2010.</span><span>)</span></a>, <a href='http://tools.ietf.org/html/rfc6020#section-7.16.3'>Section
      7.16.3</a>). The identities in the input YANG modules
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
module crypto-base {
  namespace "http://example.com/crypto-base";
  prefix "crypto";
  identity crypto-alg {
    description
      "Base identity from which all crypto algorithms
       are derived.";
    }
}

module des {
  namespace "http://example.com/des";
  prefix "des";
  import "crypto-base" {
    prefix "crypto";
  }
  identity des {
    base "crypto:crypto-alg";
    description "DES crypto algorithm";
  }
  identity des3 {
    base "crypto:crypto-alg";
    description "Triple DES crypto algorithm";
  }
}</pre></div>
<p>will be mapped to the following named pattern definitions:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;define name="__crypto_crypto-alg"&gt;
  &lt;choice&gt;
    &lt;value type="QName"&gt;crypto:crypto-alg&lt;/value&gt;
    &lt;ref name="__des_des"/&gt;
    &lt;ref name="__des_des3"/&gt;
  &lt;/choice&gt;
&lt;/define&gt;
&lt;define name="__des_des"&gt;
  &lt;value type="QName"&gt;des:des&lt;/value&gt;
&lt;/define&gt;
&lt;define name="__des_des3"&gt;
  &lt;value type="QName"&gt;des:des3&lt;/value&gt;
&lt;/define&gt;</pre></div>
<a name="if-feature-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.22"></a><h3>10.22.&nbsp;
The 'if-feature' Statement</h3>

<p>ARGUMENT together with arguments of all sibling 'if-feature'
      statements (with added prefixes, if missing) MUST be collected
      in a space-separated list which becomes the value of the
      @nma:if-feature attribute. This attribute is attached to PARENT.
</p>
<a name="import-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.23"></a><h3>10.23.&nbsp;
The 'import' Statement</h3>

<p>This statement is not specifically mapped. The module whose
      name is in ARGUMENT has to be parsed so that the importing
      module is able to use its top-level groupings, typedefs and
      identities, and also augment the data tree of the imported
      module.
</p>
<p>If the 'import' statement has the 'revision' substatement,
      the corresponding revision of the imported module MUST be
      used. The mechanism for finding a given module revision is
      outside the scope of this document.
</p>
<a name="include-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.24"></a><h3>10.24.&nbsp;
The 'include' Statement</h3>

<p>This statement is not specifically mapped. The submodule
      whose name is in ARGUMENT has to be parsed and its contents
      mapped exactly as if the submodule text appeared directly in the
      main module text.
</p>
<p>If the 'include' statement has the 'revision' substatement,
      the corresponding revision of the submodule MUST be used. The
      mechanism for finding a given submodule revision is outside the
      scope of this document.
</p>
<a name="input-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.25"></a><h3>10.25.&nbsp;
The 'input' Statement</h3>

<p>This statement is handled within 'rpc' statement, see <a class='info' href='#rpc-stmt'>Section&nbsp;10.50<span> (</span><span class='info'>The 'rpc' Statement</span><span>)</span></a>.
</p>
<a name="key-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.26"></a><h3>10.26.&nbsp;
The 'key' Statement</h3>

<p>This statement is mapped to @nma:key attribute. ARGUMENT
      MUST be translated so that every key is prefixed with the
      namespace prefix of the local module. The result of this
      translation then becomes the value of the @nma:key
      attribute.
</p>
<a name="leaf-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.27"></a><h3>10.27.&nbsp;
The 'leaf' Statement</h3>

<p>This statement is mapped to the &lt;rng:element&gt; element
      and ARGUMENT with prepended local namespace prefix becomes the
      value of its @name attribute.
</p>
<p>If the leaf is optional, i.e., if there is no "mandatory
      true;" substatement and the leaf is not declared among the keys
      of an enclosing list, then the &lt;rng:element&gt; element MUST
      be enclosed in &lt;rng:optional&gt;, except when the 'leaf'
      statement is a child of the 'choice' statement and thus
      represents a shorthand case for that choice (see <a class='info' href='#optional-mandatory'>Section&nbsp;9.1.1<span> (</span><span class='info'>Optional and Mandatory Nodes</span><span>)</span></a> for details).
</p>
<a name="leaf-list-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.28"></a><h3>10.28.&nbsp;
The 'leaf-list' Statement</h3>

<p>This statement is mapped to a block enclosed by either
      &lt;rng:zeroOrMore&gt; or &lt;rng:oneOrMore&gt; element
      depending on whether the argument of 'min-elements' substatement
      is "0" or positive, respectively (it is zero by default). This
      &lt;rng:zeroOrMore&gt; or &lt;rng:oneOrMore&gt; element becomes
      the PARENT.
</p>
<p>&lt;rng:element&gt; is then added as a child element of
      PARENT and ARGUMENT with prepended local namespace prefix
      becomes the value of its @name attribute. Another attribute,
      @nma:leaf-list, MUST also be added to this &lt;rng:element&gt;
      element with the value of "true". If the 'leaf-list' statement
      has the 'min-elements' substatement and its argument is greater
      than one, additional attribute @nma:min-elements is attached to
      &lt;rng:element&gt; and the argument of 'min-elements' becomes
      the value of this attribute. Similarly, if there is the
      'max-elements' substatement and its argument value is not
      "unbounded", attribute @nma:max-elements is attached to this
      element and the argument of 'max-elements' becomes the value of
      this attribute.
</p>
<p>EXAMPLE. A leaf-list appearing in a module with the namespace
      prefix "yam"
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
leaf-list foliage {
    min-elements 3;
    max-elements 6378;
    ordered-by user;
    type string;
}</pre></div>
<p>is mapped to the following RELAX NG fragment:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;rng:oneOrMore&gt;
  &lt;rng:element name="yam:foliage" nma:leaf-list="true"
               nma:ordered-by="user"
               nma:min-elements="3" nma:max-elements="6378"&gt;
    &lt;rng:data type="string"/&gt;
  &lt;/rng:element&gt;
&lt;/rng:oneOrMore&gt;</pre></div>
<a name="length-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.29"></a><h3>10.29.&nbsp;
The 'length' Statement</h3>

<p>This statement is handled within the "string" type, see <a class='info' href='#string-type'>Section&nbsp;10.53.9<span> (</span><span class='info'>The &quot;string&quot; Type</span><span>)</span></a>.
</p>
<a name="list-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.30"></a><h3>10.30.&nbsp;
The 'list' Statement</h3>

<p>This statement is mapped exactly as the 'leaf-list'
      statement, see <a class='info' href='#leaf-list-stmt'>Section&nbsp;10.28<span> (</span><span class='info'>The 'leaf-list' Statement</span><span>)</span></a>. The only
      difference is that the @nma:leaf-list annotation either MUST NOT
      be present or MUST have the value of "false".
</p>
<p>When mapping the substatements of 'list', the order of
      children of the list element MUST be specified so that list
      keys, if there are any, always appear in the same order as they
      are defined in the 'key' substatement and before other children,
      see <a class='info' href='#RFC6020'>[RFC6020]<span> (</span><span class='info'>Bjorklund, M., Ed., &ldquo;YANG - A Data Modeling Language for Network         Configuration Protocol (NETCONF),&rdquo; September&nbsp;2010.</span><span>)</span></a>, <a href='http://tools.ietf.org/html/rfc6020#section-7.8.5'>Section
      7.8.5</a>. In particular, if a list key is defined in a
      grouping but the list node itself is not a part of the same
      grouping, and the position of the 'uses' statement would violate
      the above ordering requirement, the grouping MUST be expanded,
      i.e., the 'uses' statement replaced by the grouping
      contents.
</p>
<p>For example, consider the following YANG fragment of a module
      with the prefix "yam":
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
grouping keygrp {
  leaf clef {
    type uint8;
  }
}
list foo {
  key clef;
  leaf bar {
    type string;
  }
  leaf baz {
    type string;
  }
  uses keygrp;
}</pre></div>
<p>is mapped to the following RELAX NG fragment:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;rng:zeroOrMore&gt;
  &lt;rng:element name="yam:foo" nma:key="yam:clef"&gt;
    &lt;rng:element name="yam:clef"&gt;
      &lt;rng:data type="unsignedByte"/&gt;
    &lt;/rng:element&gt;
    &lt;rng:interleave&gt;
      &lt;rng:element name="yam:bar"&gt;
        &lt;rng:data type="string"/&gt;
      &lt;/rng:element&gt;
      &lt;rng:element name="yam:baz"&gt;
        &lt;rng:data type="string"/&gt;
      &lt;/rng:element&gt;
    &lt;/rng:interleave&gt;
  &lt;/rng:element&gt;
&lt;/rng:zeroOrMore&gt;</pre></div>
<p>Note that the "keygrp" grouping is expanded and the
      definition of "yam:clef" is moved before the
      &lt;rng:interleave&gt; pattern.
</p>
<a name="mandatory-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.31"></a><h3>10.31.&nbsp;
The 'mandatory' Statement</h3>

<p>This statement may appear as a substatement of 'leaf',
      'choice' or 'anyxml' statement. If ARGUMENT is "true", the
      parent data node is mapped as mandatory, see <a class='info' href='#optional-mandatory'>Section&nbsp;9.1.1<span> (</span><span class='info'>Optional and Mandatory Nodes</span><span>)</span></a>.
</p>
<p>As a substatement of 'choice', this statement is also mapped
      to the @nma:mandatory attribute which is added to PARENT. The
      value of this attribute is the argument of the parent 'choice'
      statement.
</p>
<a name="max-elements-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.32"></a><h3>10.32.&nbsp;
The 'max-elements' Statement</h3>

<p>This statement is handled within 'leaf-list' or 'list'
      statements, see <a class='info' href='#leaf-list-stmt'>Section&nbsp;10.28<span> (</span><span class='info'>The 'leaf-list' Statement</span><span>)</span></a>.
</p>
<a name="min-elements-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.33"></a><h3>10.33.&nbsp;
The 'min-elements' Statement</h3>

<p>This statement is handled within 'leaf-list' or 'list'
      statements, see <a class='info' href='#leaf-list-stmt'>Section&nbsp;10.28<span> (</span><span class='info'>The 'leaf-list' Statement</span><span>)</span></a>.
</p>
<a name="module-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.34"></a><h3>10.34.&nbsp;
The 'module' Statement</h3>

<p>This statement is mapped to an embedded &lt;rng:grammar&gt;
      pattern having the @nma:module attribute with the value of
      ARGUMENT. In addition, a &lt;dc:source&gt; element SHOULD be
      created as a child of this &lt;rng:grammar&gt; element and
      contain ARGUMENT as a metadata reference to the input YANG
      module. See also <a class='info' href='#revision-stmt'>Section&nbsp;10.49<span> (</span><span class='info'>The 'revision' Statement</span><span>)</span></a>.
</p>
<p>Substatements of the 'module' statement MUST be mapped so
      that
      </p>
<ul class="text">
<li>statements representing configuration/state data are mapped
        to descendants of the &lt;nma:data&gt; element;
</li>
<li>statements representing the contents of RPC requests or
        replies are mapped to descendants of the &lt;nma:rpcs&gt;
        element;
</li>
<li>statements representing the contents of event notifications
        are mapped to descendants of the &lt;nma:notifications&gt;
        element.
</li>
</ul>

<a name="must-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.35"></a><h3>10.35.&nbsp;
The 'must' Statement</h3>

<p>This statement is mapped to the &lt;nma:must&gt; element. It
      has one mandatory attribute @assert (with no namespace) which
      contains ARGUMENT transformed into a valid XPath expression (see
      <a class='info' href='#transXPath'>Section&nbsp;9.3<span> (</span><span class='info'>Translation of XPath Expressions</span><span>)</span></a>). The &lt;nma:must&gt; element may
      have other subelements resulting from mapping the
      'error-app-tag' and 'error-message' substatements. Other
      substatements of 'must', i.e., 'description' and 'reference',
      are ignored.
</p>
<p>EXAMPLE. YANG statement in the "dhcp" module
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
must 'current() &lt;= ../max-lease-time' {
    error-message
        "The default-lease-time must be less than max-lease-time";
}</pre></div>
<p>is mapped to
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;nma:must assert="current()&amp;lt;=../dhcp:max-lease-time"&gt;
  &lt;nma:error-message&gt;
    The default-lease-time must be less than max-lease-time
  &lt;/nma:error-message&gt;
&lt;/nma:must&gt;</pre></div>
<a name="namespace-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.36"></a><h3>10.36.&nbsp;
The 'namespace' Statement</h3>

<p>This statement is mapped in two ways:
      </p>
<ol class="text">
<li>To the @xmlns:PREFIX attribute of the root
        &lt;rng:grammar&gt; element where PREFIX is the namespace
        prefix specified by the sibling 'prefix' statement. ARGUMENT
        becomes the value of this attribute.
</li>
<li>To the @ns attribute of PARENT, which is an embedded
        &lt;rng:grammar&gt; pattern. ARGUMENT becomes the value of
        this attribute.
</li>
</ol>

<a name="notification-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.37"></a><h3>10.37.&nbsp;
The 'notification' Statement</h3>

<p>This statement is mapped to the following subtree of the
      &lt;nma:notifications&gt; element in the hybrid schema (where
      PREFIX is the prefix of the local YANG module):
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;nma:notification&gt;
  &lt;rng:element name="PREFIX:ARGUMENT"&gt;
    ...
  &lt;/rng:element&gt;
&lt;/nma:notification&gt;</pre></div>
<p>Substatements of 'notification' are mapped under
      &lt;rng:element name="PREFIX:ARGUMENT"&gt;.
</p>
<a name="ordered-by-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.38"></a><h3>10.38.&nbsp;
The 'ordered-by' Statement</h3>

<p>This statement is mapped to @nma:ordered-by attribute and
      ARGUMENT becomes the value of this attribute. See <a class='info' href='#leaf-list-stmt'>Section&nbsp;10.28<span> (</span><span class='info'>The 'leaf-list' Statement</span><span>)</span></a> for an example.
</p>
<a name="organization-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.39"></a><h3>10.39.&nbsp;
The 'organization' Statement</h3>

<p>This statement is ignored by the mapping because the hybrid
      schema may be mapped from multiple YANG modules authored by
      different parties. The hybrid schema SHOULD contain references
      to all input modules in the Dublin Core &lt;dc:source&gt;
      elements, see <a class='info' href='#module-stmt'>Section&nbsp;10.34<span> (</span><span class='info'>The 'module' Statement</span><span>)</span></a>. The original YANG
      modules are the authoritative sources of the authorship
      information.
</p>
<a name="output-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.40"></a><h3>10.40.&nbsp;
The 'output' Statement</h3>

<p>This statement is handled within the 'rpc' statement, see
     <a class='info' href='#rpc-stmt'>Section&nbsp;10.50<span> (</span><span class='info'>The 'rpc' Statement</span><span>)</span></a>.
</p>
<a name="path-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.41"></a><h3>10.41.&nbsp;
The 'path' Statement</h3>

<p>This statement is handled within the "leafref" type, see
      <a class='info' href='#leafref-type'>Section&nbsp;10.53.7<span> (</span><span class='info'>The &quot;leafref&quot; Type</span><span>)</span></a>.
</p>
<a name="pattern-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.42"></a><h3>10.42.&nbsp;
The 'pattern' Statement</h3>

<p>This statement is handled within the "string" type, see <a class='info' href='#string-type'>Section&nbsp;10.53.9<span> (</span><span class='info'>The &quot;string&quot; Type</span><span>)</span></a>.
</p>
<a name="position-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.43"></a><h3>10.43.&nbsp;
The 'position' Statement</h3>

<p>This statement is ignored.
</p>
<a name="prefix-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.44"></a><h3>10.44.&nbsp;
The 'prefix' Statement</h3>

<p>This statement is handled within the sibling 'namespace'
      statement, see <a class='info' href='#namespace-stmt'>Section&nbsp;10.36<span> (</span><span class='info'>The 'namespace' Statement</span><span>)</span></a>, or within the
      parent 'import' statement, see <a class='info' href='#import-stmt'>Section&nbsp;10.23<span> (</span><span class='info'>The 'import' Statement</span><span>)</span></a>. As a
      substatement of 'belongs-to' (in submodules), the 'prefix'
      statement is ignored.
</p>
<a name="presence-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.45"></a><h3>10.45.&nbsp;
The 'presence' Statement</h3>

<p>This statement influences the mapping of the parent container
      (<a class='info' href='#container-stmt'>Section&nbsp;10.11<span> (</span><span class='info'>The 'container' Statement</span><span>)</span></a>): the parent container
      definition MUST be wrapped in &lt;rng:optional&gt;, regardless
      of its contents. See also <a class='info' href='#optional-mandatory'>Section&nbsp;9.1.1<span> (</span><span class='info'>Optional and Mandatory Nodes</span><span>)</span></a>.
</p>
<a name="range-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.46"></a><h3>10.46.&nbsp;
The 'range' Statement</h3>

<p>This statement is handled within numeric types, see <a class='info' href='#numeric-types'>Section&nbsp;10.53.8<span> (</span><span class='info'>The Numeric Types</span><span>)</span></a>.
</p>
<a name="reference-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.47"></a><h3>10.47.&nbsp;
The 'reference' Statement</h3>

<p>This statement is mapped to &lt;a:documentation&gt; element
      and its text is set to ARGUMENT prefixed with "See: ".
</p>
<a name="require-instance-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.48"></a><h3>10.48.&nbsp;
The 'require-instance' Statement</h3>

<p>This statement is handled within "instance-identifier" type
      (<a class='info' href='#instance-identifier-type'>Section&nbsp;10.53.6<span> (</span><span class='info'>The &quot;instance-identifier&quot; Type</span><span>)</span></a>).
</p>
<a name="revision-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.49"></a><h3>10.49.&nbsp;
The 'revision' Statement</h3>

<p>The mapping uses only the most recent instance of the
      'revision' statement, i.e., one with the latest date in
      ARGUMENT, which specifies the current revision of the input YANG
      module <a class='info' href='#RFC6020'>[RFC6020]<span> (</span><span class='info'>Bjorklund, M., Ed., &ldquo;YANG - A Data Modeling Language for Network         Configuration Protocol (NETCONF),&rdquo; September&nbsp;2010.</span><span>)</span></a>. This date SHOULD be recorded,
      together with the name of the YANG module, in the corresponding
      Dublin Core &lt;dc:source&gt; element (see <a class='info' href='#module-stmt'>Section&nbsp;10.34<span> (</span><span class='info'>The 'module' Statement</span><span>)</span></a>), for example in this form:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;dc:source&gt;YANG module 'foo', revision 2010-03-02&lt;/dc:source&gt;</pre></div>
<p>The 'description' substatement of 'revision' is ignored.
</p>
<a name="rpc-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.50"></a><h3>10.50.&nbsp;
The 'rpc' Statement</h3>

<p>This statement is mapped to the following subtree in the
      RELAX NG schema (where PREFIX is the prefix of the local YANG
      module):
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;nma:rpc&gt;
  &lt;nma:input&gt;
    &lt;rng:element name="PREFIX:ARGUMENT"&gt;
      ... mapped contents of 'input' ...
    &lt;/rng:element&gt;
  &lt;/nma:input&gt;
  &lt;nma:output"&gt;
    ... mapped contents of 'output' ...
  &lt;/nma:output&gt;
&lt;/nma:rpc&gt;</pre></div>
<p>As indicated in the schema fragment, contents of the 'input'
      substatement (if any) are mapped under &lt;rng:element
      name="PREFIX:ARGUMENT"&gt;. Similarly, contents of the 'output'
      substatement are mapped under &lt;nma:output&gt;. If there is no
      'output' substatement, the &lt;nma:output&gt; element MUST NOT
      be present.
</p>
<p>The &lt;nma:rpc&gt; element is a child of
      &lt;nma:rpcs&gt;.
</p>
<a name="status-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.51"></a><h3>10.51.&nbsp;
The 'status' Statement</h3>

<p>This statement MAY be ignored. Otherwise, it is mapped to
      @nma:status attribute and ARGUMENT becomes its value.
</p>
<a name="submodule-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.52"></a><h3>10.52.&nbsp;
The 'submodule' Statement</h3>

<p>This statement is not specifically mapped. Its substatements
      are mapped as if they appeared directly in the module the
      submodule belongs to.
</p>
<a name="type-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.53"></a><h3>10.53.&nbsp;
The 'type' Statement</h3>

<p>Most YANG built-in datatypes have an equivalent in the XSD
      datatype library <a class='info' href='#XSD-D'>[XSD&#8209;D]<span> (</span><span class='info'>Biron, P. and A. Malhotra, &ldquo;XML Schema Part 2: Datatypes Second Edition,&rdquo; October&nbsp;2004.</span><span>)</span></a> as shown in <a class='info' href='#tab-types'>Table&nbsp;4<span> (</span><span class='info'>YANG built-in datatypes with equivalents in the W3C                  XML Schema Type Library</span><span>)</span></a>.
</p><br /><hr class="insert" />
<a name="tab-types"></a>
<table class="full" align="center" border="0" cellpadding="2" cellspacing="2">
<col align="left"><col align="left"><col align="left">
<tr><th align="left">YANG type</th><th align="left">XSD type</th><th align="left">Meaning</th></tr>
<tr>
<td align="left">int8</td>
<td align="left">byte</td>
<td align="left">8-bit integer value</td>
</tr>
<tr>
<td align="left">int16</td>
<td align="left">short</td>
<td align="left">16-bit integer value</td>
</tr>
<tr>
<td align="left">int32</td>
<td align="left">int</td>
<td align="left">32-bit integer value</td>
</tr>
<tr>
<td align="left">int64</td>
<td align="left">long</td>
<td align="left">64-bit integer value</td>
</tr>
<tr>
<td align="left">uint8</td>
<td align="left">unsignedByte</td>
<td align="left">8-bit unsigned integer value</td>
</tr>
<tr>
<td align="left">uint16</td>
<td align="left">unsignedShort</td>
<td align="left">16-bit unsigned integer value</td>
</tr>
<tr>
<td align="left">uint32</td>
<td align="left">unsignedInt</td>
<td align="left">32-bit unsigned integer value</td>
</tr>
<tr>
<td align="left">uint64</td>
<td align="left">unsignedLong</td>
<td align="left">64-bit unsigned integer value</td>
</tr>
<tr>
<td align="left">string</td>
<td align="left">string</td>
<td align="left">character string</td>
</tr>
<tr>
<td align="left">boolean</td>
<td align="left">boolean</td>
<td align="left">"true" or "false"</td>
</tr>
<tr>
<td align="left">binary</td>
<td align="left">base64Binary</td>
<td align="left">binary data in base64 encoding</td>
</tr>
</table>
<br clear="all" />
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Table 4: YANG built-in datatypes with equivalents in the W3C
                 XML Schema Type Library&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>Two important datatypes of the XSD datatype library -
      "dateTime" and "anyURI" - are not built-in types in YANG but
      instead are defined as derived types in the standard modules
      <a class='info' href='#RFC6021'>[RFC6021]<span> (</span><span class='info'>Schoenwaelder, J., Ed., &ldquo;Common YANG Data Types,&rdquo; September&nbsp;2010.</span><span>)</span></a>: "date-and-time" in the
      "ietf-yang-types" module and "uri" in the "ietf-inet-types"
      module. However, the formal restrictions in the YANG type
      definitions are rather weak. Therefore, implementations of the
      YANG-to-DSDL mapping SHOULD detect these derived types in source
      YANG modules and map them to "dateType" and "anyURI",
      respectively.
</p>
<p>Details about the mapping of individual YANG built-in types
      are given in the following subsections.
</p>
<a name="empty-type"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.53.1"></a><h3>10.53.1.&nbsp;
The &quot;empty&quot; Type</h3>

<p>This type is mapped to &lt;rng:empty/&gt;.
</p>
<a name="boobi-types"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.53.2"></a><h3>10.53.2.&nbsp;
The &quot;boolean&quot; and &quot;binary&quot; Types</h3>

<p>These two built-in types do not allow any restrictions and
        are mapped simply by inserting &lt;rng:data&gt; element whose
        @type attribute is set to ARGUMENT mapped according to <a class='info' href='#tab-types'>Table&nbsp;4<span> (</span><span class='info'>YANG built-in datatypes with equivalents in the W3C                  XML Schema Type Library</span><span>)</span></a> above.
</p>
<a name="bits-type"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.53.3"></a><h3>10.53.3.&nbsp;
The &quot;bits&quot; Type</h3>

<p>This type is mapped to &lt;rng:list&gt; and for each 'bit'
        substatement the following XML fragment is inserted as a child
        of &lt;rng:list&gt;:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;rng:optional&gt;
  &lt;rng:value&gt;bit_name&lt;/rng:value&gt;
&lt;/rng:optional&gt;</pre></div>
<p>where bit_name is the name of the bit as found in the
        argument of a 'bit' substatement.
</p>
<a name="enuun-type"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.53.4"></a><h3>10.53.4.&nbsp;
The &quot;enumeration&quot; and &quot;union&quot; Types</h3>

<p>These types are mapped to the &lt;rng:choice&gt;
        element.
</p>
<a name="identityref-type"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.53.5"></a><h3>10.53.5.&nbsp;
The &quot;identityref&quot; Type</h3>

<p>This type is mapped to the following named pattern
        reference:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;rng:ref name="__PREFIX_BASE"/&gt;</pre></div>
<p>where PREFIX:BASE is the qualified name of the identity
        appearing in the argument of the 'base' substatement.
</p>
<p>For example, assume that module "des" in <a class='info' href='#identity-stmt'>Section&nbsp;10.21<span> (</span><span class='info'>The 'identity' Statement</span><span>)</span></a> contains the following leaf definition:
        
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
leaf foo {
  type identityref {
    base crypto:crypto-alg;
  }
}</pre></div>
<p>This leaf would then be mapped to the following element
        pattern:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;element name="des:foo"&gt;
  &lt;ref name="__crypto_crypto-alg"/&gt;
&lt;/element&gt;</pre></div>
<a name="instance-identifier-type"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.53.6"></a><h3>10.53.6.&nbsp;
The &quot;instance-identifier&quot; Type</h3>

<p>This type is mapped to &lt;rng:data&gt; element with @type
        attribute set to "string". In addition, an empty
        &lt;nma:instance-identifier&gt; element MUST be inserted as a
        child of PARENT.
</p>
<p>The argument of the 'require-instance'
        substatement, if it exists, becomes the value of the
        @require-instance attribute of the
        &lt;nma:instance-identifier&gt; element.
</p>
<a name="leafref-type"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.53.7"></a><h3>10.53.7.&nbsp;
The &quot;leafref&quot; Type</h3>

<p>This type is mapped exactly as the type of the leaf given
        in the argument of 'path' substatement. However, if the type
        of the referred leaf defines a default value, this default
        value MUST be ignored by the mapping.
</p>
<p>In addition, @nma:leafref attribute MUST be added to
        PARENT. The argument of the 'path' substatement, translated
        according to <a class='info' href='#transXPath'>Section&nbsp;9.3<span> (</span><span class='info'>Translation of XPath Expressions</span><span>)</span></a>, is set as the value
        of this attribute.
</p>
<a name="numeric-types"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.53.8"></a><h3>10.53.8.&nbsp;
The Numeric Types</h3>

<p>YANG built-in numeric types are "int8", "int16", "int32",
        "int64", "uint8", "uint16", "uint32", "uint64" and
        "decimal64". They are mapped to &lt;rng:data&gt; element with
        @type attribute set to ARGUMENT translated according to <a class='info' href='#tab-types'>Table&nbsp;4<span> (</span><span class='info'>YANG built-in datatypes with equivalents in the W3C                  XML Schema Type Library</span><span>)</span></a> above.
</p>
<p>An exception is the "decimal64" type, which is
        mapped to the "decimal" type of the XSD datatype library.
        Its precision and number of fractional digits are controlled
        with the following facets, which MUST always be present:
        </p>
<ul class="text">
<li>"totalDigits" facet set to the value of 19.
</li>
<li>"fractionDigits" facet set to the argument of the
          'fraction-digits' substatement.
</li>
</ul>

<p>The fixed value of "totalDigits" corresponds to the maximum
        of 19 decimal digits for 64-bit integers.
</p>
<p>For example, the statement
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
type decimal64 {
    fraction-digits 2;
}
</pre></div>
<p>is mapped to the following RELAX NG datatype:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;rng:data type="decimal"&gt;
  &lt;rng:param name="totalDigits"&gt;19&lt;/rng:param&gt;
  &lt;rng:param name="fractionDigits"&gt;2&lt;/rng:param&gt;
&lt;/rng:data&gt;</pre></div>
<p>All numeric types support the 'range' restriction, which is
        mapped as follows:
</p>
<p>If the range expression consists of just a single range LO..HI,
        then it is mapped to a pair of datatype facets
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      &lt;rng:param name="minInclusive"&gt;LO&lt;/rng:param&gt;
</pre></div>
<p>and
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
       &lt;rng:param name="maxInclusive"&gt;HI&lt;/rng:param&gt;
</pre></div>
<p>If the range consists of a single number, the values of
          both facets are set to this value. If LO is equal to the
          string "min", the "minInclusive" facet is omitted. If HI is
          equal to the string "max", the "maxInclusive" facet is
          omitted.
</p>
<p>If the range expression has multiple parts separated by
        "|", then the parent &lt;rng:data&gt; element must be repeated
        once for every range part and all such &lt;rng:data&gt;
        elements are wrapped in &lt;rng:choice&gt; element. Each
        &lt;rng:data&gt; element contains the "minInclusive" and
        "maxInclusive" facets for one part of the range expression as
        described in the previous paragraph.
</p>
<p>For the
        "decimal64" type, the "totalDigits" and "fractionDigits" must
        be repeated inside each of the &lt;rng:data&gt; elements.
</p>
<p>For example,
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
type int32 {
    range "-6378..0|42|100..max";
}</pre></div>
<p>is mapped to the following RELAX NG fragment:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;rng:choice&gt;
  &lt;rng:data type="int"&gt;
    &lt;rng:param name="minInclusive"&gt;-6378&lt;/rng:param&gt;
    &lt;rng:param name="maxInclusive"&gt;0&lt;/rng:param&gt;
  &lt;/rng:data&gt;
  &lt;rng:data type="int"&gt;
    &lt;rng:param name="minInclusive"&gt;42&lt;/rng:param&gt;
    &lt;rng:param name="maxInclusive"&gt;42&lt;/rng:param&gt;
  &lt;/rng:data&gt;
  &lt;rng:data type="int"&gt;
    &lt;rng:param name="minInclusive"&gt;100&lt;/rng:param&gt;
  &lt;/rng:data&gt;
&lt;/rng:choice&gt;</pre></div>
<p>See <a class='info' href='#chtypes'>Section&nbsp;9.2.2<span> (</span><span class='info'>Type Derivation Chains</span><span>)</span></a> for further details on mapping
        the restrictions.
</p>
<a name="string-type"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.53.9"></a><h3>10.53.9.&nbsp;
The &quot;string&quot; Type</h3>

<p>This type is mapped to &lt;rng:data&gt; element with the
        @type attribute set to "string".
</p>
<p>The 'length' restriction is handled analogically to the
        'range' restriction for the numeric types (<a class='info' href='#numeric-types'>Section&nbsp;10.53.8<span> (</span><span class='info'>The Numeric Types</span><span>)</span></a>):
</p>
<p>If the length expression has just a single range, then
        </p>
<ul class="text">
<li>if the length range consists of a single number LENGTH, the
          following datatype facet is inserted:
          <div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      &lt;rng:param name="length"&gt;LENGTH&lt;/rng:param&gt;.
</pre></div>
</li>
<li>Otherwise the length range is of the form LO..HI, i.e.,
          it consists of both the lower and upper bound. The following
          two datatype facets are then inserted:
          <div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      &lt;rng:param name="minLength"&gt;LO&lt;/rng:param&gt;
</pre></div>
          and
          <div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      &lt;rng:param name="maxLength"&gt;HI&lt;/rng:param&gt;
</pre></div>

          If LO is equal to the string "min", the "minLength" facet is
          omitted. If HI is equal to the string "max", the "maxLength"
          facet is omitted.
</li>
</ul>

<p>If the length expression has of multiple parts separated by
        "|", then the parent &lt;rng:data&gt; element must be repeated
        once for every range part and all such &lt;rng:data&gt;
        elements are wrapped in &lt;rng:choice&gt; element. Each
        &lt;rng:data&gt; element contains the "length" or "minLength"
        and "maxLength" facets for one part of the length expression
        as described in the previous paragraph.
</p>
<p>Every 'pattern' restriction of the "string" datatype is
        mapped to the "pattern" facet
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;rng:param name="pattern"&gt;...&lt;/rng:param&gt;</pre></div>
<p>with text equal to the argument of the 'pattern'
        statement. All such "pattern" facets must be repeated inside
        each copy of the &lt;rng:data&gt; element, i.e., once for each
        length range.
</p>
<p>For example,
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
type string {
    length "1|3..8";
    pattern "[A-Z][a-z]*";
}</pre></div>
<p>is mapped to the following RELAX NG fragment:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;rng:choice&gt;
  &lt;rng:data type="string"&gt;
    &lt;rng:param name="length"&gt;1&lt;/rng:param&gt;
    &lt;rng:param name="pattern"&gt;[A-Z][a-z]*&lt;/rng:param&gt;
  &lt;/rng:data&gt;
  &lt;rng:data type="string"&gt;
    &lt;rng:param name="minLength"&gt;3&lt;/rng:param&gt;
    &lt;rng:param name="maxLength"&gt;8&lt;/rng:param&gt;
    &lt;rng:param name="pattern"&gt;[A-Z][a-z]*&lt;/rng:param&gt;
  &lt;/rng:data&gt;
&lt;/rng:choice&gt;</pre></div>
<a name="derived-types"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.53.10"></a><h3>10.53.10.&nbsp;
Derived Types</h3>

<p>If the 'type' statement refers to a derived type, it is
        mapped in one of the following ways depending on whether it
        contains any restrictions as its substatements:
        </p>
<ol class="text">
<li>Without restrictions, the 'type' statement is mapped
          simply to the &lt;rng:ref&gt; element, i.e., a reference to
          a named pattern. If the RELAX NG definition of this named
          pattern has not been added to the hybrid schema yet, the
          corresponding type definition MUST be found and its mapping
          installed as a subelement of either the root or an embedded
          &lt;rng:grammar&gt; element, see <a class='info' href='#typedef-stmt'>Section&nbsp;10.54<span> (</span><span class='info'>The 'typedef' Statement</span><span>)</span></a>. Even if a given derived type is
          used more than once in the input YANG modules, the mapping
          of the corresponding 'typedef' MUST be installed only
          once.
</li>
<li>If any restrictions are present, the ancestor built-in
          type for the given derived type must be determined and the
          mapping of this base type MUST be used. Restrictions
          appearing at all stages of the type derivation chain MUST be
          taken into account and their conjunction added to the
          &lt;rng:data&gt; element which defines the basic type.
</li>
</ol>

<p>See <a class='info' href='#chtypes'>Section&nbsp;9.2.2<span> (</span><span class='info'>Type Derivation Chains</span><span>)</span></a> for more details and an
        example.
</p>
<a name="typedef-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.54"></a><h3>10.54.&nbsp;
The 'typedef' Statement</h3>

<p>This statement is mapped to a RELAX NG named pattern definition
      &lt;rng:define&gt;, but only if the type defined by this
      statement is used without restrictions in at least one of the
      input modules. In this case, the named pattern definition
      becomes a child of either the root or an embedded
      &lt;rng:grammar&gt; element, depending on whether the 'typedef'
      statement appears at the top level of a YANG module or not.  The
      name of this named pattern definition is set to ARGUMENT mangled
      according to the rules specified in <a class='info' href='#grouping-typedef'>Section&nbsp;9.2<span> (</span><span class='info'>Mapping YANG Groupings and Typedefs</span><span>)</span></a>.
</p>
<p>Whenever a derived type is used with additional restrictions,
      the ancestor built-in type for the derived type is used instead with
      restrictions (facets) that are a combination of all restrictions
      specified along the type derivation chain. See <a class='info' href='#derived-types'>Section&nbsp;10.53.10<span> (</span><span class='info'>Derived Types</span><span>)</span></a> for further details and an example.
</p>
<p>An implementation MAY offer the option of recording all
      'typedef' statements as named patterns in the output RELAX NG
      schema even if they are not referenced. This is useful for
      mapping YANG "library" modules containing only 'typedef' and/or
      'grouping' statements.
</p>
<a name="unique-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.55"></a><h3>10.55.&nbsp;
The 'unique' Statement</h3>

<p>This statement is mapped to @nma:unique attribute. ARGUMENT
      MUST be translated so that every node identifier in each of its
      components is prefixed with the namespace prefix of the local
      module, unless the prefix is already present. The result of this
      translation then becomes the value of the @nma:unique
      attribute.
</p>
<p>For example, assuming that the local module prefix is
      "ex",
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
unique "foo ex:bar/baz"</pre></div>
<p>is mapped to the following attribute/value pair:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
nma:unique="ex:foo ex:bar/ex:baz"</pre></div>
<a name="units-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.56"></a><h3>10.56.&nbsp;
The 'units' Statement</h3>

<p>This statement is mapped to @nma:units attribute and ARGUMENT
      becomes its value.
</p>
<a name="uses-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.57"></a><h3>10.57.&nbsp;
The 'uses' Statement</h3>

<p>If this statement has neither 'refine' nor 'augment'
      substatements, it is mapped to &lt;rng:ref&gt; element, i.e., a
      reference to a named pattern, and the value of its @name
      attribute is set to ARGUMENT mangled according to <a class='info' href='#grouping-typedef'>Section&nbsp;9.2<span> (</span><span class='info'>Mapping YANG Groupings and Typedefs</span><span>)</span></a>. If the RELAX NG definition of the
      referenced named pattern has not been added to the hybrid schema
      yet, the corresponding grouping MUST be found and its mapping
      installed as a subelement of &lt;rng:grammar&gt;, see <a class='info' href='#grouping-stmt'>Section&nbsp;10.20<span> (</span><span class='info'>The 'grouping' Statement</span><span>)</span></a>.
</p>
<p>Otherwise, if the 'uses' statement has any 'refine' or
      'augment' substatements, the corresponding grouping must be
      looked up and its contents inserted under PARENT. See <a class='info' href='#refine-augment'>Section&nbsp;9.2.1<span> (</span><span class='info'>YANG Refinements and Augments</span><span>)</span></a> for further details and an
      example.
</p>
<a name="value-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.58"></a><h3>10.58.&nbsp;
The 'value' Statement</h3>

<p>This statement is ignored.
</p>
<a name="when-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.59"></a><h3>10.59.&nbsp;
The 'when' Statement</h3>

<p>This statement is mapped to @nma:when attribute and ARGUMENT,
     translated according to <a class='info' href='#transXPath'>Section&nbsp;9.3<span> (</span><span class='info'>Translation of XPath Expressions</span><span>)</span></a>, becomes it
     value.
</p>
<a name="yang-version-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.60"></a><h3>10.60.&nbsp;
The 'yang-version' Statement</h3>

<p>This statement is not mapped to the output schema. However,
      an implementation SHOULD check that it is compatible with the
      YANG version declared by the statement (currently
      version&#xA0;1). In the case of a mismatch, the implementation
      SHOULD report an error and terminate.
</p>
<a name="yin-element-stmt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.61"></a><h3>10.61.&nbsp;
The 'yin-element' Statement</h3>

<p>This statement is not mapped to the output schema, but see
      the rules for extension handling in <a class='info' href='#extensions'>Section&nbsp;9.4<span> (</span><span class='info'>YANG Language Extensions</span><span>)</span></a>.
</p>
<a name="hs-to-dsdl"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11"></a><h3>11.&nbsp;
Mapping the Hybrid Schema to DSDL</h3>

<p>As explained in <a class='info' href='#mappingOverview'>Section&nbsp;6<span> (</span><span class='info'>Overview of the Mapping</span><span>)</span></a>, the second step
  of the YANG-to-DSDL mapping takes the hybrid schema and transforms
  it to various DSDL schemas capable of validating instance XML
  documents. As an input parameter, this step takes, in the simplest
  case, just a specification of the NETCONF XML document type that is
  to be validated. These document types can be, for example, the
  contents of a datastore, a reply to &lt;nc:get&gt; or
  &lt;nc:get-config&gt;, contents of other RPC requests/replies and
  event notifications, and so on.
</p>
<p>The second mapping step has to accomplish the following three
  general tasks:
  </p>
<ol class="text">
<li>Extract the parts of the hybrid schema that are
    appropriate for the requested document type. For example, if a
    &lt;nc:get&gt; reply is to be validated, the subtree under
    &lt;nma:data&gt; has to be selected.
</li>
<li>The schema must be adapted to the specific encapsulating
    XML elements mandated by the RPC layer. These are, for example,
    &lt;nc:rpc&gt; and &lt;nc:data&gt; elements in the case of a
    &lt;nc:get&gt; reply or &lt;en:notification&gt; for a notification.
</li>
<li>Finally, NETMOD-specific annotations that are relevant for the
    schema language of the generated schema must be mapped to the
    corresponding patterns or rules.
</li>
</ol>

<p>These three tasks are together much simpler than the first
  mapping step and can be effectively implemented using XSL
  transformations <a class='info' href='#XSLT'>[XSLT]<span> (</span><span class='info'>Clark, J., &ldquo;XSL Transformations (XSLT) Version 1.0,&rdquo; November&nbsp;1999.</span><span>)</span></a>.
</p>
<p>The following subsections describe the details of the second
  mapping step for the individual DSDL schema languages. <a class='info' href='#nma-to-dsdl'>Section&nbsp;12<span> (</span><span class='info'>Mapping NETMOD-specific Annotations to DSDL Schema Languages</span><span>)</span></a> then contains a detailed specification for
  the mapping of all NETMOD-specific annotations.
</p>
<a name="step2-rng"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11.1"></a><h3>11.1.&nbsp;
Generating RELAX NG Schemas for Various Document Types</h3>

<p>With one minor exception, obtaining a validating RELAX NG
    schema from the hybrid schema only means taking appropriate parts
    of the hybrid schema and assembling them in a new RELAX NG
    grammar, perhaps after removing all unwanted annotations.
</p>
<p>The structure of the resulting RELAX NG schema is similar to
    that of the hybrid schema: The root grammar contains embedded
    grammars, one for each input YANG module. However, as explained in
    <a class='info' href='#modularity'>Section&nbsp;8.2<span> (</span><span class='info'>Modularity</span><span>)</span></a>, global named pattern definitions
    (children of the root &lt;rng:grammar&gt; element) MUST be moved
    to a separate schema file.
</p>
<p>Depending on the XML document type that is the target
    for validation, such as &lt;nc:get&gt;/&lt;nc:get-config&gt; reply, RPC
    operations or notifications, patterns defining corresponding
    top-level information items MUST be added, such as
    &lt;nc:rpc-reply&gt; with the @message-id attribute and so on.
</p>
<p>In order to avoid copying common named pattern definitions for
    common NETCONF elements and attributes to every single output
    RELAX NG file, such schema-independent definitions SHOULD be
    collected in a library file which is then included by the
    validating RELAX NG schemas. <a class='info' href='#app-library'>Appendix&nbsp;B<span> (</span><span class='info'>Schema-Independent Library</span><span>)</span></a> has the
    listing of such a library file.
</p>
<p>The minor exception mentioned above is the annotation
    @nma:config, which must be observed if the target document type is
    a reply to &lt;nc:get-config&gt;. In this case, each element
    definition that has this attribute with the value of "false" MUST
    be removed from the schema together with its descendants. See
    <a class='info' href='#nma-config'>Section&nbsp;12.1<span> (</span><span class='info'>The @nma:config Annotation</span><span>)</span></a> for more details.
</p>
<a name="mappingSch"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11.2"></a><h3>11.2.&nbsp;
Mapping Semantic Constraints to Schematron</h3>

<p>Schematron schemas tend to be much flatter and more uniform
    compared to RELAX NG. They have exactly four levels of XML
    hierarchy: &lt;sch:schema&gt;, &lt;sch:pattern&gt;,
    &lt;sch:rule&gt; and &lt;sch:assert&gt; or &lt;sch:report&gt;.
</p>
<p>In a Schematron schema generated by the second mapping step,
    the basic unit of organization is a rule represented by the
    &lt;sch:rule&gt; element. The following NETMOD-specific
    annotations from the hybrid schema (henceforth called "semantic
    annotations") are mapped to corresponding Schematron rules:
    &lt;nma:must&gt;, @nma:key, @nma:unique, @nma:max-elements,
    @nma:min-elements, @nma:when, @nma:leafref, @nma:leaf-list, and
    also @nma:mandatory appearing as an attribute of
    &lt;rng:choice&gt; (see <a class='info' href='#mandatory-choice'>Section&nbsp;11.2.1<span> (</span><span class='info'>Constraints on Mandatory Choice</span><span>)</span></a>).
</p>
<p>Each input YANG module is mapped to a Schematron pattern whose
    @id attribute is set to the module name. Every &lt;rng:element&gt;
    pattern containing at least one of the above-mentioned semantic
    annotations is then mapped to a Schematron rule:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;sch:rule context="XELEM"&gt;
  ...
&lt;/sch:rule&gt;</pre></div>
<p>The value of the mandatory @context attribute of
    &lt;sch:rule&gt; (denoted as XELEM) MUST be set to the absolute
    path of the context element in the data tree. The &lt;sch:rule&gt;
    element contains the mappings of all contained semantic
    annotations in the form of Schematron asserts or reports.
</p>
<p>Semantic annotations appearing inside a named pattern
    definition (i.e., having &lt;rng:define&gt; among its ancestors)
    require special treatment because they may be potentially used in
    different contexts. This is accomplished by using Schematron
    abstract patterns that use the "$pref" variable in place of the
    local namespace prefix. The value of the @id attribute of such an
    abstract pattern MUST be set to the name of the named pattern
    definition which is being mapped (i.e., the mangled name of the
    original YANG grouping).
</p>
<p>When the abstract pattern is instantiated,
    the values of the following two parameters MUST be provided:
    </p>
<ul class="text">
<li>pref: the actual namespace prefix,
</li>
<li>start: XPath expression defining the context in which the
      grouping is used.
</li>
</ul>

<p>EXAMPLE. Consider the following YANG module:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
module example4 {
  namespace "http://example.com/ns/example4";
  prefix ex4;
  uses sorted-leaf-list;
  grouping sorted-leaf-list {
    leaf-list sorted-entry {
      must "not(preceding-sibling::sorted-entry &gt; .)" {
        error-message "Entries must appear in ascending order.";
      }
      type uint8;
    }
  }
}</pre></div>
<p>The resulting Schematron schema for a reply to &lt;nc:get&gt;
    is then as follows:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;sch:schema xmlns:sch="http://purl.oclc.org/dsdl/schematron"&gt;
  &lt;sch:ns uri="http://example.com/ns/example4" prefix="ex4"/&gt;
  &lt;sch:ns uri="urn:ietf:params:xml:ns:netconf:base:1.0"
          prefix="nc"/&gt;
  &lt;sch:pattern abstract="true"
               id="_example4__sorted-leaf-list"&gt;
    &lt;sch:rule context="$start/$pref:sorted-entry"&gt;
      &lt;sch:report
          test=". = preceding-sibling::$pref:sorted-entry"&gt;
        Duplicate leaf-list entry "&lt;sch:value-of select="."/&gt;".
      &lt;/sch:report&gt;
      &lt;sch:assert
          test="not(preceding-sibling::$pref:sorted-entry &amp;gt; .)"&gt;
        Entries must appear in ascending order.
      &lt;/sch:assert&gt;
    &lt;/sch:rule&gt;
  &lt;/sch:pattern&gt;
  &lt;sch:pattern id="example4"/&gt;
  &lt;sch:pattern id="id2573371" is-a="_example4__sorted-leaf-list"&gt;
    &lt;sch:param name="start" value="/nc:rpc-reply/nc:data"/&gt;
    &lt;sch:param name="pref" value="ex4"/&gt;
  &lt;/sch:pattern&gt;
&lt;/sch:schema&gt;</pre></div>
<p>The "sorted-leaf-list" grouping from the input module is mapped
    to an abstract pattern with an @id value of
    "_example4__sorted-leaf-list" in which the 'must' statement
    corresponds to the &lt;sch:assert&gt; element. The abstract
    pattern is the instantiated by the pattern with an @id value of
    "id2802112" which sets the "start" and "pref" parameters to
    appropriate values.
</p>
<p>Note that another Schematron element, &lt;sch:report&gt;, was
    automatically added, checking for duplicate leaf-list entries.
</p>
<p>The mapping from the hybrid schema to Schematron
    proceeds in the following steps:
    </p>
<ol class="text">
<li>First, the active subtree(s) of the hybrid schema
      must be selected depending on the requested target document
      type. This procedure is identical to the RELAX NG case,
      including the handling of @nma:config if
      the target document type is &lt;nc:get-config&gt; reply.
</li>
<li>Namespaces of all input YANG modules, together with the
      namespaces of base NETCONF ("nc" prefix) or notifications ("en"
      prefix) MUST be declared using the &lt;sch:ns&gt;
      element, for example
      <div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;sch:ns uri="http://example.com/ns/example4" prefix="ex4"/&gt;</pre></div>
      
</li>
<li>One pattern is created for every input module. In addition,
      an abstract pattern is created for every named pattern
      definition containing one or more semantic annotations.
</li>
<li>A &lt;sch:rule&gt; element is created for each element
      pattern containing semantic annotations.
</li>
<li>Every such
      annotation is then mapped to an &lt;sch:assert&gt; or
      &lt;sch:report&gt; element which is installed as a child of the
      &lt;sch:rule&gt; element.
</li>
</ol>

<a name="mandatory-choice"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11.2.1"></a><h3>11.2.1.&nbsp;
Constraints on Mandatory Choice</h3>

<p>In order to fully represent the semantics of YANG's 'choice'
    statement with the "mandatory true;" substatement, the RELAX NG
    grammar has to be combined with a special Schematron rule.
</p>
<p>EXAMPLE. Consider the following module:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
module example5 {
    namespace "http://example.com/ns/example5";
    prefix ex5;
    choice foobar {
        mandatory true;
        case foo {
            leaf foo1 {
                type uint8;
            }
            leaf foo2 {
                type uint8;
            }
        }
        leaf bar {
            type uint8;
        }
    }
}</pre></div>
<p>In this module, all three leaf nodes in both case branches are
    optional but because of the "mandatory true;" statement, at least
    one of them must be present in a valid configuration. The 'choice'
    statement from this module is mapped to the following fragment of
    the RELAX NG schema:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;rng:choice&gt;
  &lt;rng:interleave&gt;
    &lt;rng:optional&gt;
      &lt;rng:element name="ex5:foo1"&gt;
        &lt;rng:data type="unsignedByte"/&gt;
      &lt;/rng:element&gt;
    &lt;/rng:optional&gt;
    &lt;rng:optional&gt;
      &lt;rng:element name="ex5:foo2"&gt;
        &lt;rng:data type="unsignedByte"/&gt;
      &lt;/rng:element&gt;
    &lt;/rng:optional&gt;
  &lt;/rng:interleave&gt;
  &lt;rng:element name="ex5:bar"&gt;
    &lt;rng:data type="unsignedByte"/&gt;
  &lt;/rng:element&gt;
&lt;/rng:choice&gt;</pre></div>
<p>In the second case branch, the "ex5:bar" element is defined as
    mandatory so that this element must be present in a valid
    configuration if this branch is selected. However, the two
    elements in the first branch "foo" cannot be both declared as
    mandatory since each of them alone suffices for a valid
    configuration. As a result, the above RELAX NG fragment would
    successfully validate configurations where none of the three leaf
    elements are present.
</p>
<p>Therefore, mandatory choices, which can be recognized in the
    hybrid schema as &lt;rng:choice&gt; elements with the
    @nma:mandatory annotation, have to be handled in a special way:
    For each mandatory choice where at least one of the cases contains
    more than one node, a Schematron rule MUST be added enforcing the
    presence of at least one element from any of the cases. (RELAX NG
    schema guarantees that elements from different cases cannot be
    mixed together, that all mandatory nodes are present etc.).
</p>
<p>For the example module above, the Schematron rule will be as
    follows:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;sch:rule context="/nc:rpc-reply/nc:data"&gt;
  &lt;sch:assert test="ex5:foo1 or ex5:foo2 or ex5:bar"&gt;
    Node(s) from at least one case of choice "foobar" must exist.
  &lt;/sch:assert&gt;
&lt;/sch:rule&gt;</pre></div>
<a name="mappingDSRL"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11.3"></a><h3>11.3.&nbsp;
Mapping Default Values to DSRL</h3>

<p>DSRL is the only component of DSDL which is allowed to change
    the information set of the validated XML document. While DSRL also
    has other functions, YANG-to-DSDL mapping uses it only for
    specifying and applying default contents. For XML instance
    documents based on YANG data models, insertion of default contents
    may potentially take place for all implicit nodes identified by
    the rules in <a class='info' href='#implicit-nodes'>Section&nbsp;9.1.2<span> (</span><span class='info'>Implicit Nodes</span><span>)</span></a>.
</p>
<p>In DSRL, the default contents of an element are specified using
    the &lt;dsrl:default-content&gt; element, which is a child of
    &lt;dsrl:element-map&gt;. Two sibling elements of
    &lt;dsrl:default-content&gt; determine the context for the
    application of the default contents, see <a class='info' href='#DSRL'>[DSRL]<span> (</span><span class='info'>ISO/IEC, &ldquo;Information Technology - Document Schema Definition         Languages (DSDL) - Part 8: Document Semantics Renaming         Language - DSRL,&rdquo; December&nbsp;2008.</span><span>)</span></a>:
    </p>
<ul class="text">
<li>&lt;dsrl:parent&gt; element contains an XSLT pattern
      specifying the parent element; the default contents are applied
      only if the parent element exists in the instance document.
</li>
<li>&lt;dsrl:name&gt; contains the XML name of the element which,
      if missing or empty, is inserted together with the contents of
      &lt;dsrl:default-content&gt;.
</li>
</ul>

<p>The &lt;dsrl:parent&gt; element is optional in a general DSRL
    schema but, for the purpose of the YANG-to-DSDL mapping, this
    element MUST be always present, in order to guarantee a proper
    application of default contents.
</p>
<p>DSRL mapping only deals with &lt;rng:element&gt; patterns in
    the hybrid schema that define implicit nodes (see <a class='info' href='#implicit-nodes'>Section&nbsp;9.1.2<span> (</span><span class='info'>Implicit Nodes</span><span>)</span></a>). Such element patterns are
    distinguished by having NETMOD-specific annotation attributes
    @nma:default or @nma:implicit, i.e., either
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;rng:element name="ELEM" nma:default="DEFVALUE"&gt;
  ...
&lt;/rng:element&gt;</pre></div>
<p>or
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;rng:element name="ELEM" nma:implicit="true"&gt;
  ...
&lt;/rng:element&gt;</pre></div>
<p>The former case applies to leaf nodes having the 'default'
    substatement, but also to leaf nodes that obtain their default
    value from a typedef, if this typedef is expanded according to the
    rules in <a class='info' href='#chtypes'>Section&nbsp;9.2.2<span> (</span><span class='info'>Type Derivation Chains</span><span>)</span></a> so that the @nma:default
    annotation is attached directly to the leaf's element pattern.
</p>
<p>The latter case is used for all implicit containers (see <a class='info' href='#occurrence-rules'>Section&nbsp;9.1<span> (</span><span class='info'>Occurrence Rules for Data Nodes</span><span>)</span></a>) and for leafs that obtain the default
    value from a typedef and don't have the @nma:default annotation.
</p>
<p>In the simplest case, both element patterns are mapped to the
    following DSRL element map:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;dsrl:element-map&gt;
  &lt;dsrl:parent&gt;XPARENT&lt;/dsrl:parent&gt;
  &lt;dsrl:name&gt;ELEM&lt;/dsrl:name&gt;
  &lt;dsrl:default-content&gt;DEFCONT&lt;/dsrl:default-content&gt;
&lt;/dsrl:element-map&gt;</pre></div>
<p>where XPARENT is the absolute XPath of ELEM's parent element in
    the data tree and DEFCONT is constructed as follows:
    </p>
<ul class="text">
<li>If the implicit node ELEM is a leaf and has the @nma:default
      attribute, DEFCONT is set to the value of this attribute
      (denoted above as DEFVALUE).
</li>
<li>If the implicit node ELEM is a leaf and has the @nma:implicit
      attribute with the value of "true", the default value has to be
      determined from the @nma:default attribute of the definition of
      ELEM's type (perhaps recursively) and used in place of DEFCONT
      in the above DSRL element map. See also <a class='info' href='#chtypes'>Section&nbsp;9.2.2<span> (</span><span class='info'>Type Derivation Chains</span><span>)</span></a>.
</li>
<li>Otherwise, the implicit node ELEM is a container and DEFCONT
      is constructed as an XML fragment containing all descendant
      elements of ELEM that have either @nma:implicit or @nma:default
      attribute.
</li>
</ul>

<p>In addition, when mapping the default case of a choice, it has
    to be guaranteed that the default contents are not applied if any
    node from any non-default case is present. This is accomplished by
    setting &lt;dsrl:parent&gt; in a special way:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;dsrl:parent&gt;XPARENT[not (ELEM1|ELEM2|...|ELEMn)]&lt;/dsrl:parent&gt;</pre></div>
<p>where ELEM1, ELEM2, ... ELEMn are the names of all top-level
    nodes from all non-default cases. The rest of the element map is
    exactly as before.
</p>
<p>EXAMPLE. Consider the following YANG module:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
module example6 {
  namespace "http://example.com/ns/example6";
  prefix ex6;
  container outer {
    leaf leaf1 {
      type uint8;
      default 1;
    }
    choice one-or-two {
      default "one";
      container one {
        leaf leaf2 {
          type uint8;
          default 2;
        }
      }
      leaf leaf3 {
        type uint8;
        default 3;
      }
    }
  }
}</pre></div>
<p>The DSRL schema generated for the "get-reply" target document
      type will be:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;dsrl:maps xmlns:dsrl="http://purl.oclc.org/dsdl/dsrl"
           xmlns:ex6="http://example.com/ns/example6"
           xmlns:nc="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
  &lt;dsrl:element-map&gt;
    &lt;dsrl:parent&gt;/nc:rpc-reply/nc:data&lt;/dsrl:parent&gt;
    &lt;dsrl:name&gt;ex6:outer&lt;/dsrl:name&gt;
    &lt;dsrl:default-content&gt;
      &lt;ex6:leaf1&gt;1&lt;/ex6:leaf1&gt;
      &lt;ex6:one&gt;&lt;ex6:leaf2&gt;2&lt;/ex6:leaf2&gt;&lt;/ex6:one&gt;
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;dsrl:maps xmlns:dsrl="http://purl.oclc.org/dsdl/dsrl"
           xmlns:ex6="http://example.com/ns/example6"
           xmlns:nc="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
  &lt;dsrl:element-map&gt;
    &lt;dsrl:parent&gt;/nc:rpc-reply/nc:data&lt;/dsrl:parent&gt;
    &lt;dsrl:name&gt;ex6:outer&lt;/dsrl:name&gt;
    &lt;dsrl:default-content&gt;
      &lt;ex6:leaf1&gt;1&lt;/ex6:leaf1&gt;
      &lt;ex6:one&gt;
        &lt;ex6:leaf2&gt;2&lt;/ex6:leaf2&gt;
      &lt;/ex6:one&gt;
    &lt;/dsrl:default-content&gt;
  &lt;/dsrl:element-map&gt;
  &lt;dsrl:element-map&gt;
    &lt;dsrl:parent&gt;/nc:rpc-reply/nc:data/ex6:outer&lt;/dsrl:parent&gt;
    &lt;dsrl:name&gt;ex6:leaf1&lt;/dsrl:name&gt;
    &lt;dsrl:default-content&gt;1&lt;/dsrl:default-content&gt;
  &lt;/dsrl:element-map&gt;
  &lt;dsrl:element-map&gt;
    &lt;dsrl:parent&gt;
      /nc:rpc-reply/nc:data/ex6:outer[not(ex6:leaf3)]
    &lt;/dsrl:parent&gt;
    &lt;dsrl:name&gt;ex6:one&lt;/dsrl:name&gt;
    &lt;dsrl:default-content&gt;
      &lt;ex6:leaf2&gt;2&lt;/ex6:leaf2&gt;
    &lt;/dsrl:default-content&gt;
  &lt;/dsrl:element-map&gt;
  &lt;dsrl:element-map&gt;
    &lt;dsrl:parent&gt;
      /nc:rpc-reply/nc:data/ex6:outer/ex6:one
    &lt;/dsrl:parent&gt;
    &lt;dsrl:name&gt;ex6:leaf2&lt;/dsrl:name&gt;
    &lt;dsrl:default-content&gt;2&lt;/dsrl:default-content&gt;
  &lt;/dsrl:element-map&gt;
&lt;/dsrl:maps&gt;
</pre></div>
<p>Note that the default value for "leaf3" defined in the YANG
      module is ignored because "leaf3" represents a non-default
      alternative of a choice and as such never becomes an implicit
      element.
</p>
<a name="nma-to-dsdl"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12"></a><h3>12.&nbsp;
Mapping NETMOD-specific Annotations to DSDL Schema Languages</h3>

<p>This section contains the mapping specification for the
    individual NETMOD-specific annotations. In each case, the result
    of the mapping must be inserted into an appropriate context of the
    target DSDL schema as described in <a class='info' href='#hs-to-dsdl'>Section&nbsp;11<span> (</span><span class='info'>Mapping the Hybrid Schema to DSDL</span><span>)</span></a>.
    The context is determined by the element pattern in the hybrid
    schema to which the annotation is attached. In the rest of this
    section, CONTELEM will denote the name of this context element
    properly qualified with its namespace prefix.
</p>
<a name="nma-config"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12.1"></a><h3>12.1.&nbsp;
The @nma:config Annotation</h3>

<p>If this annotation is present with the value of "false", the
      following rules MUST be observed for DSDL schemas of
      &lt;nc:get-config&gt; reply:
      </p>
<ul class="text">
<li>When generating RELAX NG, the contents of the CONTELEM
        definition MUST be changed to &lt;rng:notAllowed&gt;.
</li>
<li>When generating Schematron or DSRL, the CONTELEM
        definition and all its descendants in the hybrid
        schema MUST be ignored.
</li>
</ul><p>
      
</p>
<a name="nma-default"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12.2"></a><h3>12.2.&nbsp;
The @nma:default Annotation</h3>

<p>This annotation is used for generating the DSRL schema as
      described in <a class='info' href='#mappingDSRL'>Section&nbsp;11.3<span> (</span><span class='info'>Mapping Default Values to DSRL</span><span>)</span></a>.
</p>
<a name="nma-error-app-tag"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12.3"></a><h3>12.3.&nbsp;
The &lt;nma:error-app-tag&gt; Annotation</h3>

<p>This annotation currently has no mapping defined.
</p>
<a name="nma-error-message"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12.4"></a><h3>12.4.&nbsp;
The &lt;nma:error-message&gt; Annotation</h3>

<p>This annotation is handled within &lt;nma:must&gt;, see <a class='info' href='#nma-must'>Section&nbsp;12.13<span> (</span><span class='info'>The &lt;nma:must&gt;                                       Annotation</span><span>)</span></a>.
</p>
<a name="nma-if-feature"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12.5"></a><h3>12.5.&nbsp;
The @if-feature Annotation</h3>

<p>The information about available features MAY be supplied as
      an input parameter to an implementation. In this case, the
      following changes MUST be performed for all features that are
      considered unavailable:
      </p>
<ul class="text">
<li>When generating RELAX NG, the contents of the CONTELEM
        definition MUST be changed to &lt;rng:notAllowed&gt;.
</li>
<li>When generating Schematron or DSRL, the CONTELEM
        definition and all its descendants in the hybrid
        schema MUST be ignored.
</li>
</ul>

<a name="nma-implicit"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12.6"></a><h3>12.6.&nbsp;
The @nma:implicit Annotation</h3>

<p>This annotation is used for generating the DSRL schema as
      described in <a class='info' href='#mappingDSRL'>Section&nbsp;11.3<span> (</span><span class='info'>Mapping Default Values to DSRL</span><span>)</span></a>.
</p>
<a name="nma-instance-identifier"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12.7"></a><h3>12.7.&nbsp;
The &lt;nma:instance-identifier&gt; Annotation</h3>

<p>If this annotation element has the @require-instance
      attribute with the value of "false", it is ignored. Otherwise it is
      mapped to the following Schematron assert:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;sch:assert test="nmf:evaluate(.)"&gt;
  The element pointed to by "CONTELEM" must exist.
&lt;/sch:assert&gt;
</pre></div>
<p>The nmf:evaluate() function is an XSLT extension function
      (see <a href='http://www.w3.org/TR/xslt#section-Extension-Functions'>Extension
      Functions</a> in <a class='info' href='#XSLT'>[XSLT]<span> (</span><span class='info'>Clark, J., &ldquo;XSL Transformations (XSLT) Version 1.0,&rdquo; November&nbsp;1999.</span><span>)</span></a>) that evaluates an
      XPath expression at run time. Such an extension function is
      available in Extended XSLT (EXSLT) or provided as a proprietary
      extension by some XSLT processors, for example Saxon.
</p>
<a name="nma-key"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12.8"></a><h3>12.8.&nbsp;
The @nma:key Annotation</h3>

<p>Assume this annotation attribute contains "k_1 k_2 ... k_n",
      i.e., specifies n children of CONTELEM as list keys. The
      annotation is then mapped to the following Schematron
      report:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;sch:report test="CONDITION"&gt;
  Duplicate key of list "CONTELEM"
&lt;/sch:report&gt;</pre></div>
<p>where CONDITION has this form:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>preceding-sibling::CONTELEM[C_1 and C_2 and ... and C_n]</pre></div>
<p>Each sub-expression C_i, for i=1,2,...,n, specifies the
      condition for violated uniqueness of the key k_i, namely
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
k_i=current()/k_i</pre></div>
<a name="nma-leaf-list"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12.9"></a><h3>12.9.&nbsp;
The @nma:leaf-list Annotation</h3>

<p>This annotation is mapped to the following Schematron rule
      which detects duplicate entries of a leaf-list:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;sch:report
    test=". = preceding-sibling::PREFIX:sorted-entry"&gt;
  Duplicate leaf-list entry "&lt;sch:value-of select="."/&gt;".
&lt;/sch:report&gt;
</pre></div>
<p>See <a class='info' href='#mappingSch'>Section&nbsp;11.2<span> (</span><span class='info'>Mapping Semantic Constraints to Schematron</span><span>)</span></a> for a complete example.
</p>
<a name="nma-leafref"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12.10"></a><h3>12.10.&nbsp;
The @nma:leafref Annotation</h3>

<p>This annotation is mapped to the following assert:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;sch:assert test="PATH=."&gt;
  Leaf "PATH" does not exist for leafref value "VALUE"
&lt;/sch:assert&gt;
</pre></div>
<p>where PATH is the value of @nma:leafref and VALUE is the
      value of the context element in the instance document for which
      the referred leaf doesn't exist.
</p>
<a name="nma-min-elements"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12.11"></a><h3>12.11.&nbsp;
The @nma:min-elements Annotation</h3>

<p>This annotation is mapped to the following Schematron
      assert:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;sch:assert test="count(../CONTELEM)&amp;gt;=MIN"&gt;
  List "CONTELEM" - item count must be at least MIN
&lt;/sch:assert&gt;
</pre></div>
<p>where MIN is the value of @nma:min-elements.
</p>
<a name="nma-max-elements"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12.12"></a><h3>12.12.&nbsp;
The @nma:max-elements Annotation</h3>

<p>This annotation is mapped to the following Schematron
      assert:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;sch:assert
    test="count(../CONTELEM)&amp;lt;=MAX or preceding-sibling::../CONTELEM"&gt;
  Number of list items must be at most MAX
&lt;/sch:assert&gt;</pre></div>
<p>where MAX is the value of @nma:min-elements.
</p>
<a name="nma-must"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12.13"></a><h3>12.13.&nbsp;
The &lt;nma:must&gt;
                                      Annotation</h3>

<p>This annotation is mapped to the following Schematron
      assert:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;sch:assert test="EXPRESSION"&gt;
  MESSAGE
&lt;/sch:assert&gt;</pre></div>
<p>where EXPRESSION is the value of the mandatory @assert
      attribute of &lt;nma:must&gt;. If the &lt;nma:error-message&gt;
      subelement exists, MESSAGE is set to its contents, otherwise it
      is set to the default message "Condition EXPRESSION must be
      true".
</p>
<a name="nma-ordered-by"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12.14"></a><h3>12.14.&nbsp;
The &lt;nma:ordered-by&gt; Annotation</h3>

<p>This annotation currently has no mapping defined.
</p>
<a name="nma-status"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12.15"></a><h3>12.15.&nbsp;
The &lt;nma:status&gt; Annotation</h3>

<p>This annotation currently has no mapping defined.
</p>
<a name="nma-unique"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12.16"></a><h3>12.16.&nbsp;
The @nma:unique Annotation</h3>

<p>The mapping of this annotation is almost identical as for
      @nma:key, see <a class='info' href='#nma-key'>Section&nbsp;12.8<span> (</span><span class='info'>The @nma:key Annotation</span><span>)</span></a>, with two small
      differences:
      </p>
<ul class="text">
<li>The value of @nma:unique is a list of descendant schema node
        identifiers rather than simple leaf names. However, the XPath
        expressions specified in <a class='info' href='#nma-key'>Section&nbsp;12.8<span> (</span><span class='info'>The @nma:key Annotation</span><span>)</span></a> work without
        any modifications if the descendant schema node identifiers
        are substituted for k_1, k_2, ..., k_n.
</li>
<li>The message appearing as the text of &lt;sch:report&gt; is
        different: "Violated uniqueness for list CONTELEM".
</li>
</ul><p>
      
</p>
<a name="nma-when"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12.17"></a><h3>12.17.&nbsp;
The @nma:when Annotation</h3>

<p>This annotation is mapped to the following Schematron assert:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;sch:assert test="EXPRESSION"&gt;
  Node "CONTELEM" is only valid when "EXPRESSION" is true.
&lt;/sch:assert&gt;
</pre></div>
<p>where EXPRESSION is the value of @nma:when.
</p>
<a name="iana"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.13"></a><h3>13.&nbsp;
IANA Considerations</h3>

<p>This document requests the following two registrations of
    namespace URIs in the IETF XML registry <a class='info' href='#RFC3688'>[RFC3688]<span> (</span><span class='info'>Mealling, M., &ldquo;The IETF XML Registry,&rdquo; January&nbsp;2004.</span><span>)</span></a>:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
-----------------------------------------------------
URI: urn:ietf:params:xml:ns:netmod:dsdl-annotations:1

Registrant Contact: The IESG.

XML: N/A, the requested URI is an XML namespace.
-----------------------------------------------------
</pre></div><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
-----------------------------------------------------
URI: urn:ietf:params:xml:ns:netmod:xpath-extensions:1

Registrant Contact: The IESG.

XML: N/A, the requested URI is an XML namespace.
-----------------------------------------------------
</pre></div>
<a name="sec-cons"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.14"></a><h3>14.&nbsp;
Security Considerations</h3>

<p>This document defines a procedure that maps data models
    expressed in the YANG language to a coordinated set of DSDL
    schemas. The procedure itself has no security impact on the
    Internet.
</p>
<p>DSDL schemas obtained by the mapping procedure may be used for
    validating the contents of NETCONF messages or entire
    datastores and thus provide additional validity checks above those
    performed by NETCONF server and client implementations supporting
    YANG data models. The strictness of this validation is directly
    derived from the source YANG modules that the validated XML data
    adhere to.
</p>
<a name="contributors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.15"></a><h3>15.&nbsp;
Contributors</h3>

<p>The following people contributed significantly to the initial
    version of this document:
    </p>
<ul class="text">
<li>Rohan Mahy
</li>
<li>Sharon Chisholm (Ciena)
</li>
</ul>

<a name="acknowledgments"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.16"></a><h3>16.&nbsp;
Acknowledgments</h3>

<p>The editor wishes to thank the following individuals who
    provided helpful suggestions and/or comments on various versions
    of this document: Andy Bierman, Martin Bjorklund, Jirka Kosek,
    Juergen Schoenwaelder and Phil Shafer.
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.17"></a><h3>17.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>17.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="DSDL">[DSDL]</a></td>
<td class="author-text">ISO/IEC, &ldquo;<a href="http://www.dsdl.org/0567.pdf">Document Schema Definition Languages (DSDL) - Part 1:
        Overview</a>,&rdquo; ISO/IEC&nbsp;19757-1, November&nbsp;2004.</td></tr>
<tr><td class="author-text" valign="top"><a name="DSRL">[DSRL]</a></td>
<td class="author-text">ISO/IEC, &ldquo;Information Technology - Document Schema Definition
        Languages (DSDL) - Part 8: Document Semantics Renaming
        Language - DSRL,&rdquo; ISO/IEC&nbsp;19757-8:2008(E), December&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text">Bradner, S., &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to
        Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="ftp://ftp.isi.edu/in-notes/rfc2119.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3688">[RFC3688]</a></td>
<td class="author-text">Mealling, M., &ldquo;<a href="http://tools.ietf.org/html/rfc3688">The IETF XML Registry</a>,&rdquo; BCP&nbsp;81, RFC&nbsp;3688, January&nbsp;2004 (<a href="ftp://ftp.isi.edu/in-notes/rfc3688.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4741">[RFC4741]</a></td>
<td class="author-text">Enns, R., &ldquo;<a href="http://tools.ietf.org/html/rfc4741">NETCONF Configuration Protocol</a>,&rdquo; RFC&nbsp;4741, December&nbsp;2006 (<a href="http://www.ietf.org/rfc/rfc4741.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC6020">[RFC6020]</a></td>
<td class="author-text">Bjorklund, M., Ed., &ldquo;<a href="http://tools.ietf.org/html/rfc6020">YANG - A Data Modeling Language for Network
        Configuration Protocol (NETCONF)</a>,&rdquo; RFC&nbsp;6020, September&nbsp;2010 (<a href="http://tools.ietf.org/html/rfc6020">HTML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC6021">[RFC6021]</a></td>
<td class="author-text">Schoenwaelder, J., Ed., &ldquo;<a href="http://tools.ietf.org/html/rfc6021">Common YANG Data Types</a>,&rdquo; RFC&nbsp;6021, September&nbsp;2010 (<a href="http://tools.ietf.org/html/rfc6021">HTML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RNG">[RNG]</a></td>
<td class="author-text">ISO/IEC, &ldquo;<a href="http://http://standards.iso.org/ittf/PubliclyAvailableStandards/c052348_ISO_IEC_19757-2_2008(E).zip">Information Technology - Document Schema Definition
        Languages (DSDL) - Part 2: Regular-Grammar-Based Validation -
        RELAX NG. Second Edition.</a>,&rdquo; ISO/IEC&nbsp;19757-2:2008(E), December&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="RNG-CS">[RNG-CS]</a></td>
<td class="author-text">ISO/IEC, &ldquo;<a href="http://standards.iso.org/ittf/PubliclyAvailableStandards/c040774_ISO_IEC_19757-2_2003_Amd_1_2006(E).zip">Information Technology - Document Schema Definition
        Languages (DSDL) - Part 2: Regular-Grammar-Based Validation -
        RELAX NG. AMENDMENT 1: Compact Syntax</a>,&rdquo; ISO/IEC&nbsp;19757-2:2003/Amd. 1:2006(E), January&nbsp;2006.</td></tr>
<tr><td class="author-text" valign="top"><a name="RNG-DTD">[RNG-DTD]</a></td>
<td class="author-text">Clark, J., Ed. and M. Murata, Ed., &ldquo;<a href="http://relaxng.org/compatibility-20011203.html">RELAX NG DTD Compatibility</a>,&rdquo; OASIS Committee Specification&nbsp;3 December 2001, December&nbsp;2001.</td></tr>
<tr><td class="author-text" valign="top"><a name="Schematron">[Schematron]</a></td>
<td class="author-text">ISO/IEC, &ldquo;<a href="http://standards.iso.org/ittf/PubliclyAvailableStandards/c040833_ISO_IEC_19757-3_2006(E).zip">Information Technology - Document Schema Definition
        Languages (DSDL) - Part 3: Rule-Based Validation -
        Schematron</a>,&rdquo; ISO/IEC&nbsp;19757-3:2006(E), June&nbsp;2006.</td></tr>
<tr><td class="author-text" valign="top"><a name="XML">[XML]</a></td>
<td class="author-text">Bray, T., Paoli, J., Sperberg-McQueen, C., Maler, E., and F. Yergeau, &ldquo;<a href="http://www.w3.org/TR/2006/REC-xml-20060816">Extensible Markup Language (XML) 1.0 (Fifth Edition)</a>,&rdquo; World Wide Web Consortium Recommendation&nbsp;REC-xml-20081126, November&nbsp;2008 (<a href="http://www.w3.org/TR/2008/REC-xml-20081126">HTML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="XML-INFOSET">[XML-INFOSET]</a></td>
<td class="author-text">Tobin, R. and J. Cowan, &ldquo;<a href="http://www.w3.org/TR/2004/REC-xml-infoset-20040204">XML Information Set (Second Edition)</a>,&rdquo; World Wide Web Consortium Recommendation&nbsp;REC-xml-infoset-20040204, February&nbsp;2004 (<a href="http://www.w3.org/TR/2004/REC-xml-infoset-20040204">HTML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="XPath">[XPath]</a></td>
<td class="author-text">Clark, J. and S. DeRose, &ldquo;<a href="http://www.w3.org/TR/1999/REC-xpath-19991116">XML Path Language (XPath) Version 1.0</a>,&rdquo; World Wide Web Consortium Recommendation&nbsp;REC-xpath-19991116, November&nbsp;1999 (<a href="http://www.w3.org/TR/1999/REC-xpath-19991116">HTML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="XSD-D">[XSD-D]</a></td>
<td class="author-text">Biron, P. and A. Malhotra, &ldquo;<a href="http://www.w3.org/TR/2004/REC-xmlschema-2-20041028">XML Schema Part 2: Datatypes Second Edition</a>,&rdquo; World Wide Web Consortium Recommendation&nbsp;REC-xmlschema-2-20041028, October&nbsp;2004 (<a href="http://www.w3.org/TR/2004/REC-xmlschema-2-20041028">HTML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="XSLT">[XSLT]</a></td>
<td class="author-text">Clark, J., &ldquo;<a href="http://www.w3.org/TR/1999/REC-xslt-19991116">XSL Transformations (XSLT) Version 1.0</a>,&rdquo; World Wide Web Consortium Recommendation&nbsp;REC-xslt-19991116, November&nbsp;1999.</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>17.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="DHCPtut">[DHCPtut]</a></td>
<td class="author-text">Bjorklund, M., &ldquo;<a href="http://www.yang-central.org/twiki/bin/view/Main/DhcpTutorial">DHCP Tutorial</a>,&rdquo; November&nbsp;2007.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC1157">[RFC1157]</a></td>
<td class="author-text">Case, J., Fedor, M., Schoffstall, M., and J. Davin, &ldquo;<a href="http://tools.ietf.org/html/rfc1157">Simple Network Management Protocol (SNMP)</a>,&rdquo; STD&nbsp;15, RFC&nbsp;1157, May&nbsp;1990 (<a href="http://www.ietf.org/rfc/rfc1157.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2578">[RFC2578]</a></td>
<td class="author-text">McCloghrie, K., Ed., Perkins, D., Ed., and J. Schoenwaelder, Ed., &ldquo;<a href="http://tools.ietf.org/html/rfc2578">Structure of Management Information
        Version 2 (SMIv2)</a>,&rdquo; STD&nbsp;58, RFC&nbsp;2578, April&nbsp;1999 (<a href="fttp://www.ietf.org/rfc/rfc2578.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5013">[RFC5013]</a></td>
<td class="author-text">Kunze, J., &ldquo;<a href="http://tools.ietf.org/html/rfc5013">The Dublin Core Metadata Element Set</a>,&rdquo; RFC&nbsp;5013, August&nbsp;2007 (<a href="http://www.ietf.org/rfc/rfc5013.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5277">[RFC5277]</a></td>
<td class="author-text">Chisholm, S. and H. Trevino, &ldquo;<a href="http://tools.ietf.org/html/rfc5277">NETCONF Event Notifications</a>,&rdquo; RFC&nbsp;5277, July&nbsp;2008 (<a href="http://www.ietf.org/rfc/rfc5277.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="Trang">[Trang]</a></td>
<td class="author-text">Clark, J., &ldquo;<a href="http://www.thaiopensource.com/relaxng/trang.html">Trang: Multiformat schema converter based on RELAX NG</a>,&rdquo; 2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="Vli04">[Vli04]</a></td>
<td class="author-text">van der Vlist, E., &ldquo;<a href="http://books.xmlschemata.org/relaxng/">RELAX NG</a>,&rdquo; O'Reilly&nbsp;, 2004.</td></tr>
<tr><td class="author-text" valign="top"><a name="XSD">[XSD]</a></td>
<td class="author-text">Thompson, H., Beech, D., Maloney, M., and N. Mendelsohn, &ldquo;<a href="http://www.w3.org/TR/2004/REC-xmlschema-1-20041028">XML Schema Part 1: Structures Second Edition</a>,&rdquo; World Wide Web Consortium Recommendation&nbsp;REC-xmlschema-1-20041028, October&nbsp;2004 (<a href="http://www.w3.org/TR/2004/REC-xmlschema-1-20041028">HTML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="pyang">[pyang]</a></td>
<td class="author-text">Bjorklund, M. and L. Lhotka, &ldquo;<a href="http://code.google.com/p/pyang/">pyang: An extensible YANG validator and converter in
        Python</a>,&rdquo; 2010.</td></tr>
</table>

<a name="nma-schema"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
RELAX NG Schema for NETMOD-Specific Annotations</h3>

<p>This appendix defines the content model for all NETMOD-specific
    annotations in the form of RELAX NG named pattern definitions.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;CODE BEGINS&gt; file "nmannot.rng"

&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;grammar xmlns="http://relaxng.org/ns/structure/1.0"
         xmlns:nma="urn:ietf:params:xml:ns:netmod:dsdl-annotations:1"
         datatypeLibrary="http://www.w3.org/2001/XMLSchema-datatypes"&gt;

&lt;define name="config-attribute"&gt;
  &lt;attribute name="nma:config"&gt;
    &lt;data type="boolean"/&gt;
  &lt;/attribute&gt;
&lt;/define&gt;

&lt;define name="data-element"&gt;
  &lt;element name="nma:data"&gt;
    &lt;ref name="__anyxml__"/&gt;
  &lt;/element&gt;
&lt;/define&gt;

&lt;define name="default-attribute"&gt;
  &lt;attribute name="nma:default"&gt;
    &lt;data type="string"/&gt;
  &lt;/attribute&gt;
&lt;/define&gt;

&lt;define name="error-app-tag-element"&gt;
  &lt;element name="nma:error-app-tag"&gt;
    &lt;text/&gt;
  &lt;/element&gt;
&lt;/define&gt;

&lt;define name="error-message-element"&gt;
  &lt;element name="nma:error-message"&gt;
    &lt;text/&gt;
  &lt;/element&gt;
&lt;/define&gt;

&lt;define name="if-feature-attribute"&gt;
  &lt;attribute name="nma:if-feature"&gt;
    &lt;list&gt;
      &lt;data type="QName"/&gt;
    &lt;/list&gt;
  &lt;/attribute&gt;
&lt;/define&gt;

&lt;define name="implicit-attribute"&gt;
  &lt;attribute name="nma:implicit"&gt;
    &lt;data type="boolean"/&gt;
  &lt;/attribute&gt;
&lt;/define&gt;

&lt;define name="instance-identifier-element"&gt;
  &lt;element name="nma:instance-identifier"&gt;
    &lt;optional&gt;
      &lt;attribute name="nma:require-instance"&gt;
        &lt;data type="boolean"/&gt;
      &lt;/attribute&gt;
    &lt;/optional&gt;
  &lt;/element&gt;
&lt;/define&gt;

&lt;define name="key-attribute"&gt;
  &lt;attribute name="nma:key"&gt;
    &lt;list&gt;
      &lt;data type="QName"/&gt;
    &lt;/list&gt;
  &lt;/attribute&gt;
&lt;/define&gt;

&lt;define name="leaf-list-attribute"&gt;
  &lt;attribute name="nma:leaf-list"&gt;
    &lt;data type="boolean"/&gt;
  &lt;/attribute&gt;
&lt;/define&gt;

&lt;define name="leafref-attribute"&gt;
  &lt;attribute name="nma:leafref"&gt;
    &lt;data type="string"/&gt;
  &lt;/attribute&gt;
&lt;/define&gt;

&lt;define name="mandatory-attribute"&gt;
  &lt;attribute name="nma:mandatory"&gt;
    &lt;data type="Name"/&gt;
  &lt;/attribute&gt;
&lt;/define&gt;

&lt;define name="max-elements-attribute"&gt;
  &lt;attribute name="nma:max-elements"&gt;
    &lt;data type="nonNegativeInteger"/&gt;
  &lt;/attribute&gt;
&lt;/define&gt;

&lt;define name="min-elements-attribute"&gt;
  &lt;attribute name="nma:min-elements"&gt;
    &lt;data type="nonNegativeInteger"/&gt;
  &lt;/attribute&gt;
&lt;/define&gt;

&lt;define name="module-attribute"&gt;
  &lt;attribute name="nma:module"&gt;
    &lt;data type="Name"/&gt;
  &lt;/attribute&gt;
&lt;/define&gt;

&lt;define name="must-element"&gt;
  &lt;element name="nma:must"&gt;
    &lt;attribute name="assert"&gt;
      &lt;data type="string"/&gt;
    &lt;/attribute&gt;
    &lt;interleave&gt;
      &lt;optional&gt;
        &lt;ref name="error-app-tag-element"/&gt;
      &lt;/optional&gt;
      &lt;optional&gt;
        &lt;ref name="error-message-element"/&gt;
      &lt;/optional&gt;
    &lt;/interleave&gt;
  &lt;/element&gt;
&lt;/define&gt;

&lt;define name="notifications-element"&gt;
  &lt;element name="nma:notifications"&gt;
    &lt;zeroOrMore&gt;
      &lt;element name="nma:notification"&gt;
        &lt;ref name="__anyxml__"/&gt;
      &lt;/element&gt;
    &lt;/zeroOrMore&gt;
  &lt;/element&gt;
&lt;/define&gt;

&lt;define name="rpcs-element"&gt;
  &lt;element name="nma:rpcs"&gt;
    &lt;zeroOrMore&gt;
      &lt;element name="nma:rpc"&gt;
        &lt;interleave&gt;
          &lt;element name="nma:input"&gt;
            &lt;ref name="__anyxml__"/&gt;
          &lt;/element&gt;
          &lt;optional&gt;
            &lt;element name="nma:output"&gt;
              &lt;ref name="__anyxml__"/&gt;
            &lt;/element&gt;
          &lt;/optional&gt;
        &lt;/interleave&gt;
      &lt;/element&gt;
    &lt;/zeroOrMore&gt;
  &lt;/element&gt;
&lt;/define&gt;

&lt;define name="ordered-by-attribute"&gt;
  &lt;attribute name="nma:ordered-by"&gt;
    &lt;choice&gt;
      &lt;value&gt;user&lt;/value&gt;
      &lt;value&gt;system&lt;/value&gt;
    &lt;/choice&gt;
  &lt;/attribute&gt;
&lt;/define&gt;

&lt;define name="status-attribute"&gt;
  &lt;optional&gt;
    &lt;attribute name="nma:status"&gt;
      &lt;choice&gt;
        &lt;value&gt;current&lt;/value&gt;
        &lt;value&gt;deprecated&lt;/value&gt;
        &lt;value&gt;obsolete&lt;/value&gt;
      &lt;/choice&gt;
    &lt;/attribute&gt;
  &lt;/optional&gt;
&lt;/define&gt;

&lt;define name="unique-attribute"&gt;
  &lt;optional&gt;
    &lt;attribute name="nma:unique"&gt;
      &lt;list&gt;
        &lt;data type="token"/&gt;
      &lt;/list&gt;
    &lt;/attribute&gt;
  &lt;/optional&gt;
&lt;/define&gt;

&lt;define name="units-attribute"&gt;
  &lt;optional&gt;
    &lt;attribute name="nma:units"&gt;
      &lt;data type="string"/&gt;
    &lt;/attribute&gt;
  &lt;/optional&gt;
&lt;/define&gt;

&lt;define name="when-attribute"&gt;
  &lt;optional&gt;
    &lt;attribute name="nma:when"&gt;
      &lt;data type="string"/&gt;
    &lt;/attribute&gt;
  &lt;/optional&gt;
&lt;/define&gt;

&lt;define name="__anyxml__"&gt;
  &lt;zeroOrMore&gt;
    &lt;choice&gt;
      &lt;attribute&gt;
        &lt;anyName/&gt;
      &lt;/attribute&gt;
      &lt;element&gt;
        &lt;anyName/&gt;
        &lt;ref name="__anyxml__"/&gt;
      &lt;/element&gt;
      &lt;text/&gt;
    &lt;/choice&gt;
  &lt;/zeroOrMore&gt;
&lt;/define&gt;

&lt;/grammar&gt;

&lt;CODE ENDS&gt;</pre></div>
<a name="app-library"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B"></a><h3>Appendix B.&nbsp;
Schema-Independent Library</h3>

<p>In order to avoid copying the common named pattern definitions
    to every RELAX NG schema generated in the second mapping step, the
    definitions are collected in a library file - schema-independent
    library - which is included by the validating schemas under the
    file name "relaxng-lib.rng" (XML syntax) and "relaxng-lib.rnc"
    (compact syntax). The included definitions cover patterns for
    common elements from base NETCONF <a class='info' href='#RFC4741'>[RFC4741]<span> (</span><span class='info'>Enns, R., &ldquo;NETCONF Configuration Protocol,&rdquo; December&nbsp;2006.</span><span>)</span></a> and
    event notifications <a class='info' href='#RFC5277'>[RFC5277]<span> (</span><span class='info'>Chisholm, S. and H. Trevino, &ldquo;NETCONF Event Notifications,&rdquo; July&nbsp;2008.</span><span>)</span></a>.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;CODE BEGINS&gt; file "relaxng-lib.rng"

&lt;?xml version="1.0" encoding="UTF-8"?&gt;

&lt;grammar xmlns="http://relaxng.org/ns/structure/1.0"
         xmlns:nc="urn:ietf:params:xml:ns:netconf:base:1.0"
         xmlns:en="urn:ietf:params:xml:ns:netconf:notification:1.0"
         datatypeLibrary="http://www.w3.org/2001/XMLSchema-datatypes"&gt;

  &lt;define name="message-id-attribute"&gt;
    &lt;attribute name="message-id"&gt;
      &lt;data type="string"&gt;
        &lt;param name="maxLength"&gt;4095&lt;/param&gt;
      &lt;/data&gt;
    &lt;/attribute&gt;
  &lt;/define&gt;

  &lt;define name="ok-element"&gt;
    &lt;element name="nc:ok"&gt;
      &lt;empty/&gt;
    &lt;/element&gt;
  &lt;/define&gt;

  &lt;define name="eventTime-element"&gt;
    &lt;element name="en:eventTime"&gt;
      &lt;data type="dateTime"/&gt;
    &lt;/element&gt;
  &lt;/define&gt;
&lt;/grammar&gt;

&lt;CODE ENDS&gt;</pre></div>
<a name="app-dhcp"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.C"></a><h3>Appendix C.&nbsp;
Mapping DHCP Data Model - A Complete Example</h3>

<p>This appendix demonstrates both steps of the YANG-to-DSDL
    mapping applied to the "canonical" DHCP tutorial <a class='info' href='#DHCPtut'>[DHCPtut]<span> (</span><span class='info'>Bjorklund, M., &ldquo;DHCP Tutorial,&rdquo; November&nbsp;2007.</span><span>)</span></a> data model. The input YANG module is shown in
    <a class='info' href='#app-dhcp-yang'>Appendix&nbsp;C.1<span> (</span><span class='info'>Input YANG Module</span><span>)</span></a> and the output schemas in the
    following two subsections.
</p>
<p>The hybrid schema was obtained by the "dsdl" plugin of the
    pyang tool <a class='info' href='#pyang'>[pyang]<span> (</span><span class='info'>Bjorklund, M. and L. Lhotka, &ldquo;pyang: An extensible YANG validator and converter in         Python,&rdquo; 2010.</span><span>)</span></a> and the validating DSDL schemas
    were obtained by XSLT stylesheets that are also part of pyang
    distribution.
</p>
<p>Due to the limit of 72 characters per line, a few long strings
    required manual editing, in particular the regular expression
    patterns for IP addresses etc. These were replaced by the
    placeholder string "... regex pattern ...". Also, line breaks were
    added to several documentation strings and Schematron
    messages. Other than that, the results of the automatic
    translations were not changed.
</p>
<a name="app-dhcp-yang"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.C.1"></a><h3>C.1.&nbsp;
Input YANG Module</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
module dhcp {
  namespace "http://example.com/ns/dhcp";
  prefix dhcp;

  import ietf-yang-types { prefix yang; }
  import ietf-inet-types { prefix inet; }

  organization
    "yang-central.org";
  description
    "Partial data model for DHCP, based on the config of
     the ISC DHCP reference implementation.";

  container dhcp {
    description
      "configuration and operational parameters for a DHCP server.";

    leaf max-lease-time {
      type uint32;
      units seconds;
      default 7200;
    }

    leaf default-lease-time {
      type uint32;
      units seconds;
      must '. &lt;= ../max-lease-time' {
        error-message
          "The default-lease-time must be less than max-lease-time";
      }
      default 600;
    }

    uses subnet-list;

    container shared-networks {
      list shared-network {
        key name;

        leaf name {
          type string;
        }
        uses subnet-list;
      }
    }

    container status {
      config false;
      list leases {
        key address;

        leaf address {
          type inet:ip-address;
        }
        leaf starts {
          type yang:date-and-time;
        }
        leaf ends {
          type yang:date-and-time;
        }
        container hardware {
          leaf type {
            type enumeration {
              enum "ethernet";
              enum "token-ring";
              enum "fddi";
            }
          }
          leaf address {
            type yang:phys-address;
          }
        }
      }
    }
  }

  grouping subnet-list {
    description "A reusable list of subnets";
    list subnet {
      key net;
      leaf net {
        type inet:ip-prefix;
      }
      container range {
        presence "enables dynamic address assignment";
        leaf dynamic-bootp {
          type empty;
          description
            "Allows BOOTP clients to get addresses in this range";
        }
        leaf low {
          type inet:ip-address;
          mandatory true;
        }
        leaf high {
          type inet:ip-address;
          mandatory true;
        }
      }

      container dhcp-options {
        description "Options in the DHCP protocol";
        leaf-list router {
          type inet:host;
          ordered-by user;
          reference "RFC 2132, sec. 3.8";
        }
        leaf domain-name {
          type inet:domain-name;
          reference "RFC 2132, sec. 3.17";
        }
      }

      leaf max-lease-time {
        type uint32;
        units seconds;
        default 7200;
      }
    }
  }
}</pre></div>
<a name="app-dhcp-hs"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.C.2"></a><h3>C.2.&nbsp;
Hybrid Schema</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;?xml version="1.0" encoding="UTF-8"?&gt;
&lt;grammar
    xmlns="http://relaxng.org/ns/structure/1.0"
    xmlns:nma="urn:ietf:params:xml:ns:netmod:dsdl-annotations:1"
    xmlns:dc="http://purl.org/dc/terms"
    xmlns:a="http://relaxng.org/ns/compatibility/annotations/1.0"
    xmlns:dhcp="http://example.com/ns/dhcp"
    datatypeLibrary="http://www.w3.org/2001/XMLSchema-datatypes"&gt;
 &lt;dc:creator&gt;Pyang 1.0a, DSDL plugin&lt;/dc:creator&gt;
 &lt;dc:date&gt;2010-06-17&lt;/dc:date&gt;
 &lt;start&gt;
  &lt;grammar nma:module="dhcp" ns="http://example.com/ns/dhcp"&gt;
   &lt;dc:source&gt;YANG module 'dhcp'&lt;/dc:source&gt;
   &lt;start&gt;
    &lt;nma:data&gt;
     &lt;optional&gt;
      &lt;element nma:implicit="true" name="dhcp:dhcp"&gt;
       &lt;interleave&gt;
        &lt;a:documentation&gt;
         configuration and operational parameters for a DHCP server.
        &lt;/a:documentation&gt;
        &lt;optional&gt;
         &lt;element nma:default="7200"
                  name="dhcp:max-lease-time"
                  nma:units="seconds"&gt;
          &lt;data type="unsignedInt"/&gt;
         &lt;/element&gt;
        &lt;/optional&gt;
        &lt;optional&gt;
         &lt;element nma:default="600"
                  name="dhcp:default-lease-time"
                  nma:units="seconds"&gt;
          &lt;data type="unsignedInt"/&gt;
          &lt;nma:must assert=". &amp;lt;= ../dhcp:max-lease-time"&gt;
           &lt;nma:error-message&gt;
            The default-lease-time must be less than max-lease-time
           &lt;/nma:error-message&gt;
          &lt;/nma:must&gt;
         &lt;/element&gt;
        &lt;/optional&gt;
        &lt;ref name="_dhcp__subnet-list"/&gt;
        &lt;optional&gt;
         &lt;element name="dhcp:shared-networks"&gt;
          &lt;zeroOrMore&gt;
           &lt;element nma:key="dhcp:name"
                    name="dhcp:shared-network"&gt;
            &lt;element name="dhcp:name"&gt;
             &lt;data type="string"/&gt;
            &lt;/element&gt;
            &lt;ref name="_dhcp__subnet-list"/&gt;
           &lt;/element&gt;
          &lt;/zeroOrMore&gt;
         &lt;/element&gt;
        &lt;/optional&gt;
        &lt;optional&gt;
         &lt;element name="dhcp:status" nma:config="false"&gt;
          &lt;zeroOrMore&gt;
           &lt;element nma:key="dhcp:address"
                    name="dhcp:leases"&gt;
            &lt;element name="dhcp:address"&gt;
             &lt;ref name="ietf-inet-types__ip-address"/&gt;
            &lt;/element&gt;
            &lt;interleave&gt;
             &lt;optional&gt;
              &lt;element name="dhcp:starts"&gt;
               &lt;ref name="ietf-yang-types__date-and-time"/&gt;
              &lt;/element&gt;
             &lt;/optional&gt;
             &lt;optional&gt;
              &lt;element name="dhcp:ends"&gt;
               &lt;ref name="ietf-yang-types__date-and-time"/&gt;
              &lt;/element&gt;
             &lt;/optional&gt;
             &lt;optional&gt;
              &lt;element name="dhcp:hardware"&gt;
               &lt;interleave&gt;
                &lt;optional&gt;
                 &lt;element name="dhcp:type"&gt;
                  &lt;choice&gt;
                   &lt;value&gt;ethernet&lt;/value&gt;
                   &lt;value&gt;token-ring&lt;/value&gt;
                   &lt;value&gt;fddi&lt;/value&gt;
                  &lt;/choice&gt;
                 &lt;/element&gt;
                &lt;/optional&gt;
                &lt;optional&gt;
                 &lt;element name="dhcp:address"&gt;
                  &lt;ref name="ietf-yang-types__phys-address"/&gt;
                 &lt;/element&gt;
                &lt;/optional&gt;
               &lt;/interleave&gt;
              &lt;/element&gt;
             &lt;/optional&gt;
            &lt;/interleave&gt;
           &lt;/element&gt;
          &lt;/zeroOrMore&gt;
         &lt;/element&gt;
        &lt;/optional&gt;
       &lt;/interleave&gt;
      &lt;/element&gt;
     &lt;/optional&gt;
    &lt;/nma:data&gt;
    &lt;nma:rpcs/&gt;
    &lt;nma:notifications/&gt;
   &lt;/start&gt;
  &lt;/grammar&gt;
 &lt;/start&gt;
 &lt;define name="ietf-yang-types__phys-address"&gt;
  &lt;data type="string"&gt;
   &lt;param name="pattern"&gt;([0-9a-fA-F]{2}(:[0-9a-fA-F]{2})*)?&lt;/param&gt;
  &lt;/data&gt;
 &lt;/define&gt;
 &lt;define name="ietf-inet-types__ipv6-address"&gt;
  &lt;data type="string"&gt;
   &lt;param name="pattern"&gt;... regex pattern ...&lt;/param&gt;
   &lt;param name="pattern"&gt;... regex pattern ...&lt;/param&gt;
  &lt;/data&gt;
 &lt;/define&gt;
 &lt;define name="ietf-inet-types__ip-prefix"&gt;
  &lt;choice&gt;
   &lt;ref name="ietf-inet-types__ipv4-prefix"/&gt;
   &lt;ref name="ietf-inet-types__ipv6-prefix"/&gt;
  &lt;/choice&gt;
 &lt;/define&gt;
 &lt;define name="ietf-inet-types__host"&gt;
  &lt;choice&gt;
   &lt;ref name="ietf-inet-types__ip-address"/&gt;
   &lt;ref name="ietf-inet-types__domain-name"/&gt;
  &lt;/choice&gt;
 &lt;/define&gt;
 &lt;define name="ietf-yang-types__date-and-time"&gt;
  &lt;data type="string"&gt;
   &lt;param name="pattern"&gt;... regex pattern ...&lt;/param&gt;
  &lt;/data&gt;
 &lt;/define&gt;
 &lt;define name="_dhcp__subnet-list"&gt;
  &lt;a:documentation&gt;A reusable list of subnets&lt;/a:documentation&gt;
  &lt;zeroOrMore&gt;
   &lt;element nma:key="net" name="subnet"&gt;
    &lt;element name="net"&gt;
     &lt;ref name="ietf-inet-types__ip-prefix"/&gt;
    &lt;/element&gt;
    &lt;interleave&gt;
     &lt;optional&gt;
      &lt;element name="range"&gt;
       &lt;interleave&gt;
        &lt;optional&gt;
         &lt;element name="dynamic-bootp"&gt;
          &lt;a:documentation&gt;
           Allows BOOTP clients to get addresses in this range
          &lt;/a:documentation&gt;
          &lt;empty/&gt;
         &lt;/element&gt;
        &lt;/optional&gt;
        &lt;element name="low"&gt;
         &lt;ref name="ietf-inet-types__ip-address"/&gt;
        &lt;/element&gt;
        &lt;element name="high"&gt;
         &lt;ref name="ietf-inet-types__ip-address"/&gt;
        &lt;/element&gt;
       &lt;/interleave&gt;
      &lt;/element&gt;
     &lt;/optional&gt;
     &lt;optional&gt;
      &lt;element name="dhcp-options"&gt;
       &lt;interleave&gt;
        &lt;a:documentation&gt;
         Options in the DHCP protocol
        &lt;/a:documentation&gt;
        &lt;zeroOrMore&gt;
         &lt;element nma:leaf-list="true" name="router"
                  nma:ordered-by="user"&gt;
          &lt;a:documentation&gt;
           See: RFC 2132, sec. 3.8
          &lt;/a:documentation&gt;
          &lt;ref name="ietf-inet-types__host"/&gt;
         &lt;/element&gt;
        &lt;/zeroOrMore&gt;
        &lt;optional&gt;
         &lt;element name="domain-name"&gt;
          &lt;a:documentation&gt;
           See: RFC 2132, sec. 3.17
          &lt;/a:documentation&gt;
          &lt;ref name="ietf-inet-types__domain-name"/&gt;
         &lt;/element&gt;
        &lt;/optional&gt;
       &lt;/interleave&gt;
      &lt;/element&gt;
     &lt;/optional&gt;
     &lt;optional&gt;
      &lt;element nma:default="7200" name="max-lease-time"
               nma:units="seconds"&gt;
       &lt;data type="unsignedInt"/&gt;
      &lt;/element&gt;
     &lt;/optional&gt;
    &lt;/interleave&gt;
   &lt;/element&gt;
  &lt;/zeroOrMore&gt;
 &lt;/define&gt;
 &lt;define name="ietf-inet-types__domain-name"&gt;
  &lt;data type="string"&gt;
   &lt;param name="pattern"&gt;... regex pattern ...&lt;/param&gt;
   &lt;param name="minLength"&gt;1&lt;/param&gt;
   &lt;param name="maxLength"&gt;253&lt;/param&gt;
  &lt;/data&gt;
 &lt;/define&gt;
 &lt;define name="ietf-inet-types__ipv4-prefix"&gt;
  &lt;data type="string"&gt;
   &lt;param name="pattern"&gt;... regex pattern ...&lt;/param&gt;
  &lt;/data&gt;
 &lt;/define&gt;
 &lt;define name="ietf-inet-types__ipv4-address"&gt;
  &lt;data type="string"&gt;
   &lt;param name="pattern"&gt;... regex pattern ...&lt;/param&gt;
  &lt;/data&gt;
 &lt;/define&gt;
 &lt;define name="ietf-inet-types__ipv6-prefix"&gt;
  &lt;data type="string"&gt;
   &lt;param name="pattern"&gt;... regex pattern ...&lt;/param&gt;
   &lt;param name="pattern"&gt;... regex pattern ...&lt;/param&gt;
  &lt;/data&gt;
 &lt;/define&gt;
 &lt;define name="ietf-inet-types__ip-address"&gt;
  &lt;choice&gt;
   &lt;ref name="ietf-inet-types__ipv4-address"/&gt;
   &lt;ref name="ietf-inet-types__ipv6-address"/&gt;
  &lt;/choice&gt;
 &lt;/define&gt;
&lt;/grammar&gt;</pre></div>
<a name="app-dhcp-2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.C.3"></a><h3>C.3.&nbsp;
Final DSDL Schemas</h3>

<p>This appendix contains DSDL schemas that were obtained from
     the hybrid schema in <a class='info' href='#app-dhcp-hs'>Appendix&nbsp;C.2<span> (</span><span class='info'>Hybrid Schema</span><span>)</span></a> by XSL
     transformations. These schemas can be directly used for
     validating a reply to unfiltered &lt;nc:get&gt; with the contents
     corresponding to the DHCP data model.
</p>
<p>The RELAX NG schema (in two parts, as explained in <a class='info' href='#modularity'>Section&nbsp;8.2<span> (</span><span class='info'>Modularity</span><span>)</span></a>) also includes the schema-independent
     library from <a class='info' href='#app-library'>Appendix&nbsp;B<span> (</span><span class='info'>Schema-Independent Library</span><span>)</span></a>.
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.C.3.1"></a><h3>C.3.1.&nbsp;
Main RELAX NG Schema for &lt;nc:get&gt; Reply</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;grammar
    xmlns="http://relaxng.org/ns/structure/1.0"
    xmlns:nma="urn:ietf:params:xml:ns:netmod:dsdl-annotations:1"
    xmlns:dhcp="http://example.com/ns/dhcp"
    datatypeLibrary="http://www.w3.org/2001/XMLSchema-datatypes"
    ns="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
 &lt;include href="relaxng-lib.rng"/&gt;
 &lt;start&gt;
  &lt;element name="rpc-reply"&gt;
   &lt;ref name="message-id-attribute"/&gt;
   &lt;element name="data"&gt;
    &lt;interleave&gt;
     &lt;grammar ns="http://example.com/ns/dhcp"&gt;
      &lt;include href="dhcp-gdefs.rng"/&gt;
      &lt;start&gt;
       &lt;optional&gt;
        &lt;element name="dhcp:dhcp"&gt;
         &lt;interleave&gt;
          &lt;optional&gt;
           &lt;element name="dhcp:max-lease-time"&gt;
            &lt;data type="unsignedInt"/&gt;
           &lt;/element&gt;
          &lt;/optional&gt;
          &lt;optional&gt;
           &lt;element name="dhcp:default-lease-time"&gt;
            &lt;data type="unsignedInt"/&gt;
           &lt;/element&gt;
          &lt;/optional&gt;
          &lt;ref name="_dhcp__subnet-list"/&gt;
          &lt;optional&gt;
           &lt;element name="dhcp:shared-networks"&gt;
            &lt;zeroOrMore&gt;
             &lt;element name="dhcp:shared-network"&gt;
              &lt;element name="dhcp:name"&gt;
               &lt;data type="string"/&gt;
              &lt;/element&gt;
              &lt;ref name="_dhcp__subnet-list"/&gt;
             &lt;/element&gt;
            &lt;/zeroOrMore&gt;
           &lt;/element&gt;
          &lt;/optional&gt;
          &lt;optional&gt;
           &lt;element name="dhcp:status"&gt;
            &lt;zeroOrMore&gt;
             &lt;element name="dhcp:leases"&gt;
              &lt;element name="dhcp:address"&gt;
               &lt;ref name="ietf-inet-types__ip-address"/&gt;
              &lt;/element&gt;
              &lt;interleave&gt;
               &lt;optional&gt;
                &lt;element name="dhcp:starts"&gt;
                 &lt;ref name="ietf-yang-types__date-and-time"/&gt;
                &lt;/element&gt;
               &lt;/optional&gt;
               &lt;optional&gt;
                &lt;element name="dhcp:ends"&gt;
                 &lt;ref name="ietf-yang-types__date-and-time"/&gt;
                &lt;/element&gt;
               &lt;/optional&gt;
               &lt;optional&gt;
                &lt;element name="dhcp:hardware"&gt;
                 &lt;interleave&gt;
                  &lt;optional&gt;
                   &lt;element name="dhcp:type"&gt;
                    &lt;choice&gt;
                     &lt;value&gt;ethernet&lt;/value&gt;
                     &lt;value&gt;token-ring&lt;/value&gt;
                     &lt;value&gt;fddi&lt;/value&gt;
                    &lt;/choice&gt;
                   &lt;/element&gt;
                  &lt;/optional&gt;
                  &lt;optional&gt;
                   &lt;element name="dhcp:address"&gt;
                    &lt;ref name="ietf-yang-types__phys-address"/&gt;
                   &lt;/element&gt;
                  &lt;/optional&gt;
                 &lt;/interleave&gt;
                &lt;/element&gt;
               &lt;/optional&gt;
              &lt;/interleave&gt;
             &lt;/element&gt;
            &lt;/zeroOrMore&gt;
           &lt;/element&gt;
          &lt;/optional&gt;
         &lt;/interleave&gt;
        &lt;/element&gt;
       &lt;/optional&gt;
      &lt;/start&gt;
     &lt;/grammar&gt;
    &lt;/interleave&gt;
   &lt;/element&gt;
  &lt;/element&gt;
 &lt;/start&gt;
&lt;/grammar&gt;</pre></div>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.C.3.2"></a><h3>C.3.2.&nbsp;
RELAX NG Schema - Global Named Pattern Definitions</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;grammar
    xmlns="http://relaxng.org/ns/structure/1.0"
    xmlns:nma="urn:ietf:params:xml:ns:netmod:dsdl-annotations:1"
    xmlns:dhcp="http://example.com/ns/dhcp"
    datatypeLibrary="http://www.w3.org/2001/XMLSchema-datatypes"&gt;
 &lt;define name="ietf-yang-types__phys-address"&gt;
  &lt;data type="string"&gt;
   &lt;param name="pattern"&gt;
    ([0-9a-fA-F]{2}(:[0-9a-fA-F]{2})*)?
   &lt;/param&gt;
  &lt;/data&gt;
 &lt;/define&gt;
 &lt;define name="ietf-inet-types__ipv6-address"&gt;
  &lt;data type="string"&gt;
   &lt;param name="pattern"&gt;... regex pattern ...&lt;/param&gt;
  &lt;/data&gt;
 &lt;/define&gt;
 &lt;define name="ietf-inet-types__ip-prefix"&gt;
  &lt;choice&gt;
   &lt;ref name="ietf-inet-types__ipv4-prefix"/&gt;
   &lt;ref name="ietf-inet-types__ipv6-prefix"/&gt;
  &lt;/choice&gt;
 &lt;/define&gt;
 &lt;define name="ietf-inet-types__host"&gt;
  &lt;choice&gt;
   &lt;ref name="ietf-inet-types__ip-address"/&gt;
   &lt;ref name="ietf-inet-types__domain-name"/&gt;
  &lt;/choice&gt;
 &lt;/define&gt;
 &lt;define name="ietf-yang-types__date-and-time"&gt;
  &lt;data type="string"&gt;
   &lt;param name="pattern"&gt;... regex pattern ...&lt;/param&gt;
  &lt;/data&gt;
 &lt;/define&gt;
 &lt;define name="_dhcp__subnet-list"&gt;
  &lt;zeroOrMore&gt;
   &lt;element name="subnet"&gt;
    &lt;element name="net"&gt;
     &lt;ref name="ietf-inet-types__ip-prefix"/&gt;
    &lt;/element&gt;
    &lt;interleave&gt;
     &lt;optional&gt;
      &lt;element name="range"&gt;
       &lt;interleave&gt;
        &lt;optional&gt;
         &lt;element name="dynamic-bootp"&gt;
          &lt;empty/&gt;
         &lt;/element&gt;
        &lt;/optional&gt;
        &lt;element name="low"&gt;
         &lt;ref name="ietf-inet-types__ip-address"/&gt;
        &lt;/element&gt;
        &lt;element name="high"&gt;
         &lt;ref name="ietf-inet-types__ip-address"/&gt;
        &lt;/element&gt;
       &lt;/interleave&gt;
      &lt;/element&gt;
     &lt;/optional&gt;
     &lt;optional&gt;
      &lt;element name="dhcp-options"&gt;
       &lt;interleave&gt;
        &lt;zeroOrMore&gt;
         &lt;element name="router"&gt;
          &lt;ref name="ietf-inet-types__host"/&gt;
         &lt;/element&gt;
        &lt;/zeroOrMore&gt;
        &lt;optional&gt;
         &lt;element name="domain-name"&gt;
          &lt;ref name="ietf-inet-types__domain-name"/&gt;
         &lt;/element&gt;
        &lt;/optional&gt;
       &lt;/interleave&gt;
      &lt;/element&gt;
     &lt;/optional&gt;
     &lt;optional&gt;
      &lt;element name="max-lease-time"&gt;
       &lt;data type="unsignedInt"/&gt;
      &lt;/element&gt;
     &lt;/optional&gt;
    &lt;/interleave&gt;
   &lt;/element&gt;
  &lt;/zeroOrMore&gt;
 &lt;/define&gt;
 &lt;define name="ietf-inet-types__domain-name"&gt;
  &lt;data type="string"&gt;
   &lt;param name="pattern"&gt;... regex pattern ...&lt;/param&gt;
   &lt;param name="minLength"&gt;1&lt;/param&gt;
   &lt;param name="maxLength"&gt;253&lt;/param&gt;
  &lt;/data&gt;
 &lt;/define&gt;
 &lt;define name="ietf-inet-types__ipv4-prefix"&gt;
  &lt;data type="string"&gt;
   &lt;param name="pattern"&gt;... regex pattern ...&lt;/param&gt;
  &lt;/data&gt;
 &lt;/define&gt;
 &lt;define name="ietf-inet-types__ipv4-address"&gt;
  &lt;data type="string"&gt;
   &lt;param name="pattern"&gt;... regex pattern ...&lt;/param&gt;
  &lt;/data&gt;
 &lt;/define&gt;
 &lt;define name="ietf-inet-types__ipv6-prefix"&gt;
  &lt;data type="string"&gt;
   &lt;param name="pattern"&gt;... regex pattern ...&lt;/param&gt;
   &lt;param name="pattern"&gt;... regex pattern ...&lt;/param&gt;
  &lt;/data&gt;
 &lt;/define&gt;
 &lt;define name="ietf-inet-types__ip-address"&gt;
  &lt;choice&gt;
   &lt;ref name="ietf-inet-types__ipv4-address"/&gt;
   &lt;ref name="ietf-inet-types__ipv6-address"/&gt;
  &lt;/choice&gt;
 &lt;/define&gt;
&lt;/grammar&gt;</pre></div>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.C.3.3"></a><h3>C.3.3.&nbsp;
Schematron Schema for &lt;nc:get&gt; Reply</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;sch:schema xmlns:sch="http://purl.oclc.org/dsdl/schematron"&gt;
 &lt;sch:ns uri="http://example.com/ns/dhcp" prefix="dhcp"/&gt;
 &lt;sch:ns uri="urn:ietf:params:xml:ns:netconf:base:1.0" prefix="nc"/&gt;
 &lt;sch:pattern abstract="true" id="_dhcp__subnet-list"&gt;
  &lt;sch:rule context="$start/$pref:subnet"&gt;
   &lt;sch:report test="preceding-sibling::$pref:subnet
                     [$pref:net=current()/$pref:net]"&gt;
    Duplicate key "net"
   &lt;/sch:report&gt;
  &lt;/sch:rule&gt;
  &lt;sch:rule
    context="$start/$pref:subnet/$pref:dhcp-options/$pref:router"&gt;
   &lt;sch:report test=".=preceding-sibling::router"&gt;
    Duplicate leaf-list value "&lt;sch:value-of select="."/&gt;"
   &lt;/sch:report&gt;
  &lt;/sch:rule&gt;
 &lt;/sch:pattern&gt;
 &lt;sch:pattern id="dhcp"&gt;
  &lt;sch:rule
    context="/nc:rpc-reply/nc:data/dhcp:dhcp/dhcp:default-lease-time"&gt;
   &lt;sch:assert test=". &amp;lt;= ../dhcp:max-lease-time"&gt;
    The default-lease-time must be less than max-lease-time
   &lt;/sch:assert&gt;
  &lt;/sch:rule&gt;
  &lt;sch:rule context="/nc:rpc-reply/nc:data/dhcp:dhcp/
                     dhcp:shared-networks/dhcp:shared-network"&gt;
   &lt;sch:report test="preceding-sibling::dhcp:shared-network
                     [dhcp:name=current()/dhcp:name]"&gt;
    Duplicate key "dhcp:name"
   &lt;/sch:report&gt;
  &lt;/sch:rule&gt;
  &lt;sch:rule context="/nc:rpc-reply/nc:data/dhcp:dhcp/
                     dhcp:status/dhcp:leases"&gt;
   &lt;sch:report test="preceding-sibling::dhcp:leases
                     [dhcp:address=current()/dhcp:address]"&gt;
    Duplicate key "dhcp:address"
   &lt;/sch:report&gt;
  &lt;/sch:rule&gt;
 &lt;/sch:pattern&gt;
 &lt;sch:pattern id="id2768196" is-a="_dhcp__subnet-list"&gt;
  &lt;sch:param name="start" value="/nc:rpc-reply/nc:data/dhcp:dhcp"/&gt;
  &lt;sch:param name="pref" value="dhcp"/&gt;
 &lt;/sch:pattern&gt;
 &lt;sch:pattern id="id2768215" is-a="_dhcp__subnet-list"&gt;
  &lt;sch:param name="start"
             value="/nc:rpc-reply/nc:data/dhcp:dhcp/
                    dhcp:shared-networks/dhcp:shared-network"/&gt;
  &lt;sch:param name="pref" value="dhcp"/&gt;
 &lt;/sch:pattern&gt;
&lt;/sch:schema&gt;</pre></div>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.C.3.4"></a><h3>C.3.4.&nbsp;
DSRL Schema for &lt;nc:get&gt; Reply</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;dsrl:maps
    xmlns:dsrl="http://purl.oclc.org/dsdl/dsrl"
    xmlns:dhcp="http://example.com/ns/dhcp"
    xmlns:nc="urn:ietf:params:xml:ns:netconf:base:1.0"&gt;
 &lt;dsrl:element-map&gt;
  &lt;dsrl:parent&gt;/nc:rpc-reply/nc:data&lt;/dsrl:parent&gt;
  &lt;dsrl:name&gt;dhcp:dhcp&lt;/dsrl:name&gt;
  &lt;dsrl:default-content&gt;
   &lt;dhcp:max-lease-time&gt;7200&lt;/dhcp:max-lease-time&gt;
   &lt;dhcp:default-lease-time&gt;600&lt;/dhcp:default-lease-time&gt;
  &lt;/dsrl:default-content&gt;
 &lt;/dsrl:element-map&gt;
 &lt;dsrl:element-map&gt;
  &lt;dsrl:parent&gt;/nc:rpc-reply/nc:data/dhcp:dhcp&lt;/dsrl:parent&gt;
  &lt;dsrl:name&gt;dhcp:max-lease-time&lt;/dsrl:name&gt;
  &lt;dsrl:default-content&gt;7200&lt;/dsrl:default-content&gt;
 &lt;/dsrl:element-map&gt;
 &lt;dsrl:element-map&gt;
  &lt;dsrl:parent&gt;/nc:rpc-reply/nc:data/dhcp:dhcp&lt;/dsrl:parent&gt;
  &lt;dsrl:name&gt;dhcp:default-lease-time&lt;/dsrl:name&gt;
  &lt;dsrl:default-content&gt;600&lt;/dsrl:default-content&gt;
 &lt;/dsrl:element-map&gt;
 &lt;dsrl:element-map&gt;
  &lt;dsrl:parent&gt;
   /nc:rpc-reply/nc:data/dhcp:dhcp/dhcp:subnet
  &lt;/dsrl:parent&gt;
  &lt;dsrl:name&gt;dhcp:max-lease-time&lt;/dsrl:name&gt;
  &lt;dsrl:default-content&gt;7200&lt;/dsrl:default-content&gt;
 &lt;/dsrl:element-map&gt;
 &lt;dsrl:element-map&gt;
  &lt;dsrl:parent&gt;
   /nc:rpc-reply/nc:data/dhcp:dhcp/dhcp:shared-networks/
   dhcp:shared-network/dhcp:subnet
  &lt;/dsrl:parent&gt;
  &lt;dsrl:name&gt;dhcp:max-lease-time&lt;/dsrl:name&gt;
  &lt;dsrl:default-content&gt;7200&lt;/dsrl:default-content&gt;
 &lt;/dsrl:element-map&gt;
&lt;/dsrl:maps&gt;

</pre></div>
<a name="change-log"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.D"></a><h3>Appendix D.&nbsp;
Change Log</h3>

<p>RFC Editor: remove this section upon publication as an RFC.
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.D.1"></a><h3>D.1.&nbsp;
Changes Between Versions -07 and -08</h3>

<p></p>
<ul class="text">
<li>Edits based on Gen-ART review.
</li>
<li>Added formal templates in <a class='info' href='#iana'>Section&nbsp;13<span> (</span><span class='info'>IANA Considerations</span><span>)</span></a>.
</li>
<li>Created the "Contributors" section and moved the former
        co-authors there.
</li>
<li>Indicated the location of both global and local named
        pattern definitions in the example hybrid schema in <a class='info' href='#hybridSchema'>Section&nbsp;8.1<span> (</span><span class='info'>Hybrid Schema</span><span>)</span></a>.
</li>
<li>Added reference to EXSLT "evaluate" function.
</li>
</ul>

<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.D.2"></a><h3>D.2.&nbsp;
Changes Between Versions -06 and -07</h3>

<p></p>
<ul class="text">
<li>Mapping of 'description', 'reference' and 'units' to the
        hybrid schema is now mandatory.
</li>
<li>Improvements and fixes of the text based on the AD review
</li>
</ul>

<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.D.3"></a><h3>D.3.&nbsp;
Changes Between Versions -05 and -06</h3>

<p></p>
<ul class="text">
<li>Terminology change: "conceptual tree schema" -> "hybrid
        schema".
</li>
<li>Changed sectioning markers in the hybrid schema into plain
        NETMOD-specific annotations. Hence the former "nmt" namespace
        is not used at all.
</li>
<li>Added the following NETMOD-specific annotations:
        @nma:if-feature, @nma:leaf-list, @nma:mandatory,
        @nma:module, removed @nma:presence.
</li>
<li>Changed the structure of RELAX NG schemas by using embedded
        grammars and declaration of namespaces via @ns. This was
        necessary for enabling the "chameleon" behavior of global
        definitions.
</li>
<li>Schematron validation phases are not used.
</li>
<li>If an XPath expression appears inside a top-level grouping,
        the local prefix must be represented using the variable
        $pref. (This is related to the previous item.)
</li>
<li>DHCP example: All RNG schemas are only in the XML
        syntax. Added RNG with global definitions.
</li>
<li>Added <a class='info' href='#XML-INFOSET'>[XML&#8209;INFOSET]<span> (</span><span class='info'>Tobin, R. and J. Cowan, &ldquo;XML Information Set (Second Edition),&rdquo; February&nbsp;2004.</span><span>)</span></a> to normative references.
</li>
<li>Listed the terms that are defined in other documents.
</li>
<li>The schema for NETMOD-specific annotation is now given only
        as RNG named pattern definitions, no more in NVDL.
</li>
</ul>

<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.D.4"></a><h3>D.4.&nbsp;
Changes Between Versions -04 and -05</h3>

<p></p>
<ul class="text">
<li>Leafs that take their default value from a typedef and are
        not annotated with @nma:default must have
        @nma:implicit="true".
</li>
<li>Changed code markers CODE BEGINS/ENDS to the form agreed by
        the WG.
</li>
<li>Derived types "date-and-time" and "uri" SHOULD be mapped to
        XSD "dateTime" and "anyURI" types, respectively.
</li>
<li>Clarified the notion of implicit nodes under under 'case'
        in <a class='info' href='#implicit-nodes'>Section&nbsp;9.1.2<span> (</span><span class='info'>Implicit Nodes</span><span>)</span></a>.
</li>
<li>Moved draft-ietf-netmod-yang-types-06 to normative
        references.
</li>
<li>An extra &lt;rng:group&gt; is no more required for the
        default case of a choice in the shorthand notation.
</li>
</ul>

<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.D.5"></a><h3>D.5.&nbsp;
Changes Between Versions -03 and -04</h3>

<p></p>
<ul class="text">
<li>Implemented ordering rules for list children - keys must go
        first and appear in the same order as in the input YANG
        module.
</li>
<li>The 'case' statement is now mapped to either
        &lt;rng:group&gt; (inside RPC operations) or &lt;rng:interleave&gt;
        (otherwise).
</li>
<li>A nma:default annotation coming from a datatype which the mapping
        expands is attached to the &lt;rng:element&gt; pattern where
        the expansion occurs. Added an example.
</li>
<li>Documentation statements ('description', 'reference',
        'status') MAY be ignored.
</li>
<li>Single-valued numeric or length range parts are mapped to
        &lt;rng:value&gt; pattern or "length" facet.
</li>
<li>Example for "string" datatype was added.
</li>
<li><a class='info' href='#nma-schema'>Appendix&nbsp;A<span> (</span><span class='info'>RELAX NG Schema for NETMOD-Specific Annotations</span><span>)</span></a> now uses NVDL for defining
        NETMOD-specific annotations.
</li>
<li>Added CODE BEGINS/ENDS markers.
</li>
<li>Separated normative and informative references.
</li>
<li>Added URL for XPath extensions namespace.
</li>
<li>Added <a class='info' href='#term-not'>Section&nbsp;2<span> (</span><span class='info'>Terminology and Notation</span><span>)</span></a> (Terminology and Notation).
</li>
<li>Added <a class='info' href='#sec-cons'>Section&nbsp;14<span> (</span><span class='info'>Security Considerations</span><span>)</span></a> (Security
        Considerations).
</li>
<li>Added <a class='info' href='#acknowledgments'>Section&nbsp;16<span> (</span><span class='info'>Acknowledgments</span><span>)</span></a> (Acknowledgments).
</li>
<li>Removed compact syntax schema from <a class='info' href='#app-library'>Appendix&nbsp;B<span> (</span><span class='info'>Schema-Independent Library</span><span>)</span></a>.
</li>
<li>Editorial changes: symbolic citation labels.
</li>
</ul>

<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.D.6"></a><h3>D.6.&nbsp;
Changes Between Versions -02 and -03</h3>

<p></p>
<ul class="text">
<li>Changed @nma:default-case to @nma:implicit.
</li>
<li>Changed nma:leafref annotation from element to attribute.
</li>
<li>Added skeleton rule to <a class='info' href='#mappingSch'>Section&nbsp;11.2<span> (</span><span class='info'>Mapping Semantic Constraints to Schematron</span><span>)</span></a>.
</li>
<li>Reworked <a class='info' href='#mappingDSRL'>Section&nbsp;11.3<span> (</span><span class='info'>Mapping Default Values to DSRL</span><span>)</span></a>, added skeleton
        element maps,corrected the example.
</li>
<li>Added section on 'feature' and 'deviation'.
</li>
<li>New <a class='info' href='#occurrence-rules'>Section&nbsp;9.1<span> (</span><span class='info'>Occurrence Rules for Data Nodes</span><span>)</span></a> integrating discussion
        of both optional/mandatory (was in -02) and implicit nodes
        (new).
</li>
<li>Reflected that key argument and schema node identifiers are
        no more XPath (should be in yang-07).
</li>
<li>Element patterns for implicit containers now must have
        @nma:implicit attribute.
</li>
<li>Removed "float32" and "float64" types and added mapping of
        "decimal64" with example.
</li>
<li>Removed mapping of 'require-instance' for "leafref" type.
</li>
<li>Updated RELAX NG schema for NETMOD-specific annotations.
</li>
<li>Updated the DHCP example.
</li>
</ul>

<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.D.7"></a><h3>D.7.&nbsp;
Changes Between Versions -01 and -02</h3>

<p></p>
<ul class="text">
<li>Moved <a class='info' href='#validation'>Section&nbsp;7<span> (</span><span class='info'>NETCONF Content Validation</span><span>)</span></a> "NETCONF Content
        Validation" after <a class='info' href='#mappingOverview'>Section&nbsp;6<span> (</span><span class='info'>Overview of the Mapping</span><span>)</span></a>.
</li>
<li>New text about mapping defaults to DSRL, especially in
        <a class='info' href='#validation'>Section&nbsp;7<span> (</span><span class='info'>NETCONF Content Validation</span><span>)</span></a> and <a class='info' href='#mappingDSRL'>Section&nbsp;11.3<span> (</span><span class='info'>Mapping Default Values to DSRL</span><span>)</span></a>.
</li>
<li>Finished the DHCP example by adding the DSRL schema to
        <a class='info' href='#app-dhcp'>Appendix&nbsp;C<span> (</span><span class='info'>Mapping DHCP Data Model - A Complete Example</span><span>)</span></a>.
</li>
<li>New @nma:presence annotation was added - it is needed for
        proper handling of default contents.
</li>
<li><a class='info' href='#mandatory-choice'>Section&nbsp;11.2.1<span> (</span><span class='info'>Constraints on Mandatory Choice</span><span>)</span></a> "Constraints on Mandatory
        Choice" was added because these constraints require a
        combination of RELAX NG and Schematron.
</li>
<li>Fixed the schema for NETMOD-specific annotations by adding
        explicit prefix to all defined elements and
        attributes. Previously, the attributes had no namespace.
</li>
<li>Handling of 'feature', 'if-feature' and 'deviation'
        added.
</li>
<li>Handling of nma:instance-identifier via XSLT extension
        function.
</li>
</ul>

<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.D.8"></a><h3>D.8.&nbsp;
Changes Between Versions -00 and -01</h3>

<p></p>
<ul class="text">
<li>Attributes @nma:min-elements and @nma:max-elements are
        attached to &lt;rng:element&gt; (list entry) and not to
        &lt;rng:zeroOrMore&gt; or &lt;rng:oneOrMore&gt;.
</li>
<li>Keys and all node identifiers in 'key' and 'unique'
        statements are prefixed.
</li>
<li>Fixed the mapping of 'rpc' and 'notification'.
</li>
<li>Removed previous sec. 7.5 "RPC Signatures and
        Notifications" - the same information is now contained in
        <a class='info' href='#rpc-stmt'>Section&nbsp;10.50<span> (</span><span class='info'>The 'rpc' Statement</span><span>)</span></a> and <a class='info' href='#notification-stmt'>Section&nbsp;10.37<span> (</span><span class='info'>The 'notification' Statement</span><span>)</span></a>.
</li>
<li>Added initial "_" to mangled names of groupings.
</li>
<li>Mandated the use of @xmlns:xxx as the only method for
        declaring the target namespace.
</li>
<li>Added section "Handling of XML Namespaces" to explain the
        previous item.
</li>
<li>Completed DHCP example in <a class='info' href='#app-dhcp'>Appendix&nbsp;C<span> (</span><span class='info'>Mapping DHCP Data Model - A Complete Example</span><span>)</span></a>.
</li>
<li>Almost all text about the second mapping step is new.
</li>
</ul>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Author's Address</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Ladislav Lhotka (editor)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">CESNET</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:lhotka@cesnet.cz">lhotka@cesnet.cz</a></td></tr>
</table>
</body></html>
