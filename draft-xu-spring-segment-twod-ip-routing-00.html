<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>Segment Routing in Two Dimensional IP Routing</title>
<meta content="Mingwei Xu" name="author">
<meta content="Bo Wang" name="author">
<meta content="Tingfeng Wang" name="author">
<meta content="Jianping" name="author">
<meta content="
       Segment Routing (SR) allows a headend node to steer traffic into a Segment Routing Policy (SR Policy), 
        which represents the routing path by matching the destination address and the corresponding Binding Segment Identifier (BSID).
        However, determining the target SR Policy only based on destination aspect is incapable for demands for 
        higher dimensional routing.
        Two Dimensional IP (TwoD-IP) routing is an Internet routing architecture that makes forwarding decisions based on 
        source and destination addresses. TwoD-IP routing can easily express a routing policy 
        between host to host, or network to network, and have much lower storage and calculation consumption compared to the
        higher dimensional routing. 
         
       
       In this document, we extend SR to support TwoD-IP routing, illustrate some typical scenarios of SR with TwoD-IP 
        routing to express the advantage of extending SR to support TwoD-IP routing, and describe the mechanism of how TwoD 
        IP routing protocol cooperates with SR.    
    " name="description">
<meta content="xml2rfc 3.10.0" name="generator">
<meta content="draft-xu-spring-segment-twod-ip-routing-00" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.10.0
    Python 3.6.12
    appdirs 1.4.4
    ConfigArgParse 1.5.2
    google-i18n-address 2.5.0
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.6.3
    pycountry 20.7.3
    pyflakes 2.3.1
    PyYAML 5.4.1
    requests 2.26.0
    setuptools 58.0.4
    six 1.16.0
-->
<link href="/tmp/draft-xu-spring-segment-twod-ip-routing-00-r3h_2d8x.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">SR in TwoD-IP Routing</td>
<td class="right">September 2021</td>
</tr></thead>
<tfoot><tr>
<td class="left">Xu, et al.</td>
<td class="center">Expires 2 April 2022</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">SPRING Working Group</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-xu-spring-segment-twod-ip-routing-00</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2021-09" class="published">September 2021</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Informational</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2022-04-02">2 April 2022</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">M. Xu</div>
<div class="org">Tsinghua University</div>
</div>
<div class="author">
      <div class="author-name">B. Wang</div>
<div class="org">Tsinghua University</div>
</div>
<div class="author">
      <div class="author-name">T. Wang</div>
<div class="org">Beijing University of Posts and Telecommunications</div>
</div>
<div class="author">
      <div class="author-name">J. Wu</div>
<div class="org">Tsinghua University</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">Segment Routing in Two Dimensional IP Routing</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">Segment Routing (SR) allows a headend node to steer traffic into a Segment Routing Policy (SR Policy), 
        which represents the routing path by matching the destination address and the corresponding Binding Segment Identifier (BSID).
        However, determining the target SR Policy only based on destination aspect is incapable for demands for 
        higher dimensional routing.
        Two Dimensional IP (TwoD-IP) routing is an Internet routing architecture that makes forwarding decisions based on 
        source and destination addresses. TwoD-IP routing can easily express a routing policy 
        between host to host, or network to network, and have much lower storage and calculation consumption compared to the
        higher dimensional routing.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
<p id="section-abstract-2">In this document, we extend SR to support TwoD-IP routing, illustrate some typical scenarios of SR with TwoD-IP 
        routing to express the advantage of extending SR to support TwoD-IP routing, and describe the mechanism of how TwoD 
        IP routing protocol cooperates with SR.<a href="#section-abstract-2" class="pilcrow">¶</a></p>
</section>
<section class="note" id="section-note.1">
      <h2 id="name-requirements-language">
<a href="#name-requirements-language" class="section-name selfRef">Requirements Language</a>
      </h2>
<p id="section-note.1-1">
    The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
    "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
    document are to be interpreted as described in RFC 2119 <span>[<a href="#RFC2119" class="xref">RFC2119</a>]</span>.<a href="#section-note.1-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 5 March 2022.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2021 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Simplified BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Simplified BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="xref">1</a>.  <a href="#name-introduction" class="xref">Introduction</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1" class="keepWithNext"><a href="#section-2" class="xref">2</a>.  <a href="#name-terminology" class="xref">Terminology</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-benefit-of-extend-segment-r" class="xref">Benefit of extend Segment routing to support TwoD-IP routing</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.1">
                <p id="section-toc.1-1.3.2.1.1" class="keepWithNext"><a href="#section-3.1" class="xref">3.1</a>.  <a href="#name-multi-homing" class="xref">Multi-homing</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3.2.2">
                <p id="section-toc.1-1.3.2.2.1"><a href="#section-3.2" class="xref">3.2</a>.  <a href="#name-source-related-policy-routi" class="xref">Source Related Policy Routing</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-framework" class="xref">Framework</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="xref">4.1</a>.  <a href="#name-data-plane" class="xref">Data Plane</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="xref">4.2</a>.  <a href="#name-control-plane" class="xref">Control Plane</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-advertisement-of-twod-ip-co" class="xref">Advertisement of TwoD-IP configuration</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.1">
                <p id="section-toc.1-1.5.2.1.1"><a href="#section-5.1" class="xref">5.1</a>.  <a href="#name-twod-ip-configuration-tlv" class="xref">TwoD-IP configuration TLV</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.2">
                <p id="section-toc.1-1.5.2.2.1"><a href="#section-5.2" class="xref">5.2</a>.  <a href="#name-optimization-object-sub-tlv" class="xref">Optimization Object Sub-TLV</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.3">
                <p id="section-toc.1-1.5.2.3.1"><a href="#section-5.3" class="xref">5.3</a>.  <a href="#name-constraints-sub-tlv" class="xref">Constraints Sub-TLV</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5.2.4">
                <p id="section-toc.1-1.5.2.4.1"><a href="#section-5.4" class="xref">5.4</a>.  <a href="#name-destination-source-address-" class="xref">destination/source address Sub-TLV</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-twod-ip-forwarding-path-com" class="xref">TwoD-IP forwarding path computation</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.1">
                <p id="section-toc.1-1.6.2.1.1"><a href="#section-6.1" class="xref">6.1</a>.  <a href="#name-setting-up-the-sr-policy-dy" class="xref">Setting up the SR Policy Dynamic candidate path</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6.2.2">
                <p id="section-toc.1-1.6.2.2.1"><a href="#section-6.2" class="xref">6.2</a>.  <a href="#name-twod-ip-forwarding-table-en" class="xref">TwoD-IP forwarding table entry creation</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-twod-ip-forwarding-table-de" class="xref">TwoD-IP forwarding table Design</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-security-considerations" class="xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#section-9" class="xref">9</a>.  <a href="#name-iana-considerations" class="xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#section-10" class="xref">10</a>. <a href="#name-references" class="xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.1">
                <p id="section-toc.1-1.10.2.1.1"><a href="#section-10.1" class="xref">10.1</a>.  <a href="#name-normative-references" class="xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10.2.2">
                <p id="section-toc.1-1.10.2.2.1"><a href="#section-10.2" class="xref">10.2</a>.  <a href="#name-informative-references" class="xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.11">
            <p id="section-toc.1-1.11.1"><a href="#appendix-A" class="xref"></a><a href="#name-authors-addresses" class="xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<section id="section-1">
      <h2 id="name-introduction">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-introduction" class="section-name selfRef">Introduction</a>
      </h2>
<p id="section-1-1">Segment routing (SR) <span>[<a href="#RFC8402" class="xref">RFC8402</a>]</span> allows a headend node 
     to steer a packet flow into an Segment Routing Policy (SR Policy), 
     which represents the routing path. So that the administrator can specific forwarding path 
      on headend node <span>[<a href="#I-D.ietf-spring-segment-routing-policy" class="xref">I-D.ietf-spring-segment-routing-policy</a>]</span>.<a href="#section-1-1" class="pilcrow">¶</a></p>
<p id="section-1-2">The headend node can steers packets into an SR Policy either by matching the destination address or
      routing policy. However, due to the increasing demands of higher dimensional routing like Multi-homing or Source Related Policy Routing, 
      only directs packets based on destination aspect is limited under those scenarios.
      Moreover, directing packets into SR Policy by routing policy, which can match other fields in packets like port and source address,
      needs many access in memory. Considering the high-speed ternary content-addressable memory (TCAM) based solution for routers is limited by its low
      capacity, simply adding one more dimension on routing policy can easily become undeployable on TCAM-based solution.<a href="#section-1-2" class="pilcrow">¶</a></p>
<p id="section-1-3">To achieve higher Dimensional routing objectives, we introduce Two Dimensional-IP (TwoD-IP) routing protocol. <span>[<a href="#I-D.xu-rtgwg-twod-ip-routing" class="xref">I-D.xu-rtgwg-twod-ip-routing</a>]</span>
        The TwoD-IP routing architecture can easily express a routing policy 
        between host to host, or network to network, and have much lower storage and calculation consumption compared to
        higher dimensional routing.<a href="#section-1-3" class="pilcrow">¶</a></p>
<p id="section-1-4">In this document, we extend Segment Routing to support Two Dimensional IP(TwoD-IP) routing to enriches the routing abilities, 
        describe how they cooperate to achieve higher dimensional routing like Multi-homing.<a href="#section-1-4" class="pilcrow">¶</a></p>
<p id="section-1-5">To extend Segment Routing to support Two Dimensional IP(TwoD-IP) routing, modification of the data plane and control
      plane is necessary. In data plane, the TwoD-IP routing protocol needs a TwoD-IP forwarding table to stores the 
      source and destination address information. In control plane, the TwoD-IP routing protocol leverages 
      OSPFv3 Router Information(RI) LSA to broadcast configuration and the SR Policy Dynamic Path Computation to 
      compute optimal forwarding path under setting configuration. With these modifications, the headend node 
        will be able to make forwarding decisions base on both source and destination aspects
        without damaging existing SR architecture.<a href="#section-1-5" class="pilcrow">¶</a></p>
</section>
<section id="section-2">
      <h2 id="name-terminology">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-terminology" class="section-name selfRef">Terminology</a>
      </h2>
<p id="section-2-1">Terminology used in this document:<a href="#section-2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-2-2.1">SR: Segment Routing.<a href="#section-2-2.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-2.2">TwoD-IP routing protocol: Two Dimensional IP routing protocol,
              which makes routing decisions based on both destination and source
              IP addresses.<a href="#section-2-2.2" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-2.3">SID: Segment Identifier.<a href="#section-2-2.3" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-2.4">SRv6: Segment Routing over IPv6 data plane.<a href="#section-2-2.4" class="pilcrow">¶</a>
</li>
        <li class="normal" id="section-2-2.5">SR Policy: a framework that enables instantiation of an ordered
            list of segments on a node for implementing a source routing policy
            with a specific intent for traffic steering from that node.<a href="#section-2-2.5" class="pilcrow">¶</a>
</li>
      </ul>
</section>
<section id="section-3">
      <h2 id="name-benefit-of-extend-segment-r">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-benefit-of-extend-segment-r" class="section-name selfRef">Benefit of extend Segment routing to support TwoD-IP routing</a>
      </h2>
<p id="section-3-1">This section lists two scenarios which can benefit from TwoD-IP routing 
        protocol with Segment Routing technology. Illustrating that TwoD-IP routing 
        protocol can seamless deployment with SR and combine their advantage to 
        achieve users demands of higher dimensional routing.<a href="#section-3-1" class="pilcrow">¶</a></p>
<section id="section-3.1">
        <h3 id="name-multi-homing">
<a href="#section-3.1" class="section-number selfRef">3.1. </a><a href="#name-multi-homing" class="section-name selfRef">Multi-homing</a>
        </h3>
<p id="section-3.1-1">Even though Segment Routing is able to steer flows 
        to the destination in different way, it is still limited to process the 
        source-related routing scenario like Multi-homing.<a href="#section-3.1-1" class="pilcrow">¶</a></p>
<p id="section-3.1-2">Multi-homing<span>[<a href="#RFC4177" class="xref">RFC4177</a>]</span> is prevalent among ISPs for 
        better traffic distribution and reliability. In this case, a 
        network could be connected to multiple upstream ISPs, Hosts 
        are assigned multiple addresses, one for each ISP.  The network 
        is responsible for delivering packets from Hosts to the export
         exit router that is connected to the corresponding upstream ISP.<a href="#section-3.1-2" class="pilcrow">¶</a></p>
<p id="section-3.1-3">For example, in Figure 1, a multi-homed site is connected to 
        two ISPs: ISP1 and ISP2.  ISP1 has a prefix P1, and ISP2 has a 
        prefix P2.  A host connect to the multi-homed site has two addresses, 
        address A that assigned from ISP1, and address B that assigned from 
        ISP2.  the multi-homed site should deliver the traffic from A 
        towards the Internet to ISP1, and deliver the traffic from B towards the Internet to ISP2.<a href="#section-3.1-3" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-3.1-4">
<pre>
                 +--------------------+
                 |                    |
                 |       Internet     |
                 |                    |
                 +--+---------------+-+
                    |               |
                    |  l3           | l4
                    |               |
             +------+----+       +--+--------+
             |   ISP1    |       |   ISP2    |
             | Prefix P1 |       | Prefix P2 |
             +--------+--+       +-+---------+
                      |            |
                      | l1         | l2
                   +--+------------+--+
                   |                  |
                   | Multi-homed Site |        +---------+
                   |                  +--------+  Host   |
                   +------------------+        +---------+
                                          ISP1 assign address: A
                                          ISP2 assign address: B

                Figure 1: Multi-homing scenario
</pre><a href="#section-3.1-4" class="pilcrow">¶</a>
</div>
<p id="section-3.1-5">Although SR can assign different forwarding paths to different ISP for an incoming packet, it still lacks the
          ability to classify the packets toward the same destination address with different source addresses A and B. 
          With the help of TwoD-IP and Segment Routing, the administrator can easily implement Multi-homing by modifying the 
          headend node that receives packets from Host, which means that administrator does not need to concern 
          about the intermediate node. After extending SR to support TwoD-IP routing, the headend node 
          can routing packet based on both source and destination 
          address, guides packets from Host through the optimal path to the corresponding ISP.<a href="#section-3.1-5" class="pilcrow">¶</a></p>
</section>
<section id="section-3.2">
        <h3 id="name-source-related-policy-routi">
<a href="#section-3.2" class="section-number selfRef">3.2. </a><a href="#name-source-related-policy-routi" class="section-name selfRef">Source Related Policy Routing</a>
        </h3>
<p id="section-3.2-1">In this scenario, an ingress edge node wants to forward packets with the
         same destination address through different kind of paths in order to achieve source related demand.<a href="#section-3.2-1" class="pilcrow">¶</a></p>
<p id="section-3.2-2">For example, in Figure 2, assume a network has four routers: a, b, c and d,  c has a 
        service(such as authentication or encipherer). The operator wants a packet from a to d to be 
        delivered to service c first and then node c will forward the processed packet to it's destination d.<a href="#section-3.2-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-3.2-3">
<pre>
                                    +---------+
                             +------+    c    +-----+
                             |      +(service)+     |
                             |      +---------+     |
                             |                      |
        +------+          +--+---+              +---+--+
        |  a   +----------+  b   +--------------+   d  |
        +------+          +------+              +------+

                Figure 2: TwoD-IP routing for Service
</pre><a href="#section-3.2-3" class="pilcrow">¶</a>
</div>
<p id="section-3.2-4">In Segment Routing Architecture, we can allocate a Service segment associated with node c's service.<span>[<a href="#I-D.ietf-spring-sr-service-programming" class="xref">I-D.ietf-spring-sr-service-programming</a>]</span> 
        and can be integrated as part of an SR Policy 
        P1(Headend node: b, color, Endpoint: d) of Segment-List &lt; c &gt; . But SR Policy steers packets to a
        specific SR Policy only when this packet's destination matching corresponding entry, which means 
        headend node can't only steers packets from a to SR Policy P1.<a href="#section-3.2-4" class="pilcrow">¶</a></p>
<p id="section-3.2-5">But with TwoD-IP routing, headend node b can easily steer packets matching destination of b 
        and source of a to SR Policy P1, then the packet will be delivered to service c first and then node
         c will forward the processed packet to it's destination d.<a href="#section-3.2-5" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-4">
      <h2 id="name-framework">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-framework" class="section-name selfRef">Framework</a>
      </h2>
<p id="section-4-1">The mechanism of how we combine TwoD IP routing and Segment 
      Routing can be separated into two parts: data plane and control plane.<a href="#section-4-1" class="pilcrow">¶</a></p>
<section id="section-4.1">
        <h3 id="name-data-plane">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-data-plane" class="section-name selfRef">Data Plane</a>
        </h3>
<p id="section-4.1-1">TCAM resources are future limited to the higher dimensional routing, including TwoD-IP routing.
        <span>[<a href="#I-D.xu-rtgwg-twod-ip-routing" class="xref">I-D.xu-rtgwg-twod-ip-routing</a>]</span> propose a novel forwarding table design to increase 
        the TCAM resource utilizatioin significantly. The data plane of extending SR to support 
        TwoD-IP routing introduces this Two-D forwarding table design into the original SR data plane.<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<p id="section-4.1-2">Considering Segment Routing leverages the source routing paradigm, 
        administrator just need to deploy TwoD-IP forwarding table in headend node, which makes 
        implementing TwoD-IP routing much easier. Different with traditional destination-based 
        FIB, each entry in the TwoD-IP forwarding table is a 3-tuple: {destination address,
         source address, next hop} <span>[<a href="#I-D.xu-rtgwg-twod-ip-routing" class="xref">I-D.xu-rtgwg-twod-ip-routing</a>]</span><a href="#section-4.1-2" class="pilcrow">¶</a></p>
<p id="section-4.1-3">The next hop in the TwoD-IP forwarding table should steer the packet into the associated SR Policy, and 
          the SR architecture has provided an identifier to do that: Binding segment/BSID. The headend of an SR  Policy
           binds a SID(BSID) to its policy, so the next hop in TwoD-IP forwarding table should be a BSID,  
           which is associated with the SR Policy that corresponding to the entry's &lt;destination address, source address&gt;pairs.<a href="#section-4.1-3" class="pilcrow">¶</a></p>
<p id="section-4.1-4">So the TwoD-IP forwarding table tuple is  {destination address, source address, BSID}, when a packet arrive, the headend node 
          can extract both destination and source addresses from the packet, then lookup the Two-IP forwarding table, and output a 
          matched entry. Finally, headend node will forward the packet to the matched entry's next hop, which is a BSID associated 
          with a SR Policy, to get the dynamic candidate path that steers it to the destination.<a href="#section-4.1-4" class="pilcrow">¶</a></p>
<p id="section-4.1-5">Segment Routing can be instantiated on two data planes: SR over MPLS (SR-MPLS) and SR over IPv6 (SRv6). Different data plane 
          has different BSID format, in SR-MPLS, SID are an MPLS label or an index into an MPLS label space, in SRv6, SID is an IPv6 address. 
          So even we could deploy TwoD-IP routing on both two data planes, we still deploy TwoD-IP routing with SR over IPv6(SRv6), so that the 
          next hop elements in TwoD-IP forwarding table will be 
          SRv6 BSID which is an IPv6 address.<a href="#section-4.1-5" class="pilcrow">¶</a></p>
</section>
<section id="section-4.2">
        <h3 id="name-control-plane">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-control-plane" class="section-name selfRef">Control Plane</a>
        </h3>
<p id="section-4.2-1">Within TwoD-IP routing, the control plane is concerned with user demands, it focus on providing services that 
          are related with source addresses. They need to collect demands from users, and compute the routing table to 
          satisfy these demands. And Segment Routing support many control plane. So we can extend one of them to achieve 
          configuration exchange and optimal forwarding path computation objects..<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.2-2.1">TwoD-IP configuration exchange: TwoD-IP routing protocol focus on transforming
           users demand for destination and source address pairs to forwarding action, 
           which mean that we have one more dimension of source address information to 
           exchange along with headend node, and the forwarding configurations corresponding
            to the destination and source address pairs.<a href="#section-4.2-2.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.2-2.2">TwoD-IP forwarding path computation: We leverage the SR Policy Dynamic Path Computation to achieve forwarding path 
            computation, transferring our demand for &lt;destination, source&gt; pair to optimization object and constraint source 
              format which can specify a dynamic candidate path of SR Policy, then the dynamic candidate path can be computed 
              by either the headend or a Path Computation Element (PCE). So TwoD-IP routing protocol doesn't need to concern about 
              how the candidate path is computed and what the path really is.<a href="#section-4.2-2.2" class="pilcrow">¶</a>
</li>
        </ul>
</section>
</section>
<section id="section-5">
      <h2 id="name-advertisement-of-twod-ip-co">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-advertisement-of-twod-ip-co" class="section-name selfRef">Advertisement of TwoD-IP configuration</a>
      </h2>
<p id="section-5-1">TwoD-IP configuration needs to be installed in the headend node so that the headend node can creates the TwoD-IP forwarding table entry and the SR Policy with dynamic candidate path corresponding it. The TwoD-IP 
      configuration can be installed in headend node manually or automatically by advertising of TwoD-IP configurations between nodes.<a href="#section-5-1" class="pilcrow">¶</a></p>
<p id="section-5-2">A TwoD-IP configuration contains three parts: destination addresses,source addresses and the user demands of the &lt;destination, source&gt; pairs, 
        including optimization objective and constraints.<a href="#section-5-2" class="pilcrow">¶</a></p>
<section id="section-5.1">
        <h3 id="name-twod-ip-configuration-tlv">
<a href="#section-5.1" class="section-number selfRef">5.1. </a><a href="#name-twod-ip-configuration-tlv" class="section-name selfRef">TwoD-IP configuration TLV</a>
        </h3>
<p id="section-5.1-1">The configurations of TwoD-IP routing is within the TwoD-IP configuration TLV, the TwoD-IP configuration TLV is a TLV of OSPFv3 Router 
          Information(RI) LSA, TwoD-IP configuration information will be broadcast by letting An OSPF router advertising an OSPFv3 RI LSA that 
          include the TwoD-IP configuration TLV.<a href="#section-5.1-1" class="pilcrow">¶</a></p>
<p id="section-5.1-2">Because TwoD-IP routing is deployed in SR over IPv6, the OSPF router will exchange router information with OSPFv3 Router Information(RI) LSA.<a href="#section-5.1-2" class="pilcrow">¶</a></p>
<p id="section-5.1-3">The router may advertise multiple instances of TwoD-IP configuration TLV within the  OSPFv3 Router Information(RI) LSA - 
        one for each of the TwoD-IP configuration needs to be advertised.<a href="#section-5.1-3" class="pilcrow">¶</a></p>
<p id="section-5.1-4">The format of the TwoD-IP configuration TLV is the same as the format used by<span>[<a href="#RFC3630" class="xref">RFC3630</a>]</span>. 
        The variable TLV section consists of one or more nested TLV tuples.  The format of each TLV is:<a href="#section-5.1-4" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.1-5">
<pre>
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |              Type             |             Length            |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                           Sub-TLVs                            |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

              Figure 3.  TwoD-IP configuration TLV Format
</pre><a href="#section-5.1-5" class="pilcrow">¶</a>
</div>
<p id="section-5.1-6">Where:<a href="#section-5.1-6" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-5.1-7">
          <dt id="section-5.1-7.1"></dt>
          <dd style="margin-left: 1.5em" id="section-5.1-7.2">Type is TBD<a href="#section-5.1-7.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-7.3"></dt>
          <dd style="margin-left: 1.5em" id="section-5.1-7.4">Length: 16 bit field. The total length of the value portion(Sub-TLVs) of the TLV<a href="#section-5.1-7.4" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.1-7.5"></dt>
          <dd style="margin-left: 1.5em" id="section-5.1-7.6">Sub-TLVs: Each TwoD-IP configuration TLV has four Sub-TLVs: Optimization Object Sub-TLV, Constraint Sub-TLV, 
            destination and source address Sub-TLV. There could be multiple Sub-TLV of them to specify the dynamic candidate 
            path of SR Policy and the &lt;destination address, source address&gt; pairs associated the SR Policy.<a href="#section-5.1-7.6" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
<section id="section-5.2">
        <h3 id="name-optimization-object-sub-tlv">
<a href="#section-5.2" class="section-number selfRef">5.2. </a><a href="#name-optimization-object-sub-tlv" class="section-name selfRef">Optimization Object Sub-TLV</a>
        </h3>
<p id="section-5.2-1">The Optimization and the constraint is basically refer to <span>[<a href="#I-D.filsfils-spring-sr-policy-considerations" class="xref">I-D.filsfils-spring-sr-policy-considerations</a>]</span>.<a href="#section-5.2-1" class="pilcrow">¶</a></p>
<p id="section-5.2-2">The format of Optimization Object Sub-TLV is:<a href="#section-5.2-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.2-3">
<pre>
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |              Type             |             Length            |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                  Reserved             | Flags |       T       |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

             Figure 4: Optimization Object Sub-TLV Format
</pre><a href="#section-5.2-3" class="pilcrow">¶</a>
</div>
<p id="section-5.2-4">Where:<a href="#section-5.2-4" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-5.2-5">
          <dt id="section-5.2-5.1"></dt>
          <dd style="margin-left: 1.5em" id="section-5.2-5.2">Type: 16 bit field. The value is 1 for this type.<a href="#section-5.2-5.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-5.3"></dt>
          <dd style="margin-left: 1.5em" id="section-5.2-5.4">Length: 16 bit field. The total length of the value portion of the TLV.<a href="#section-5.2-5.4" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-5.5"></dt>
          <dd style="margin-left: 1.5em" id="section-5.2-5.6">Reserved (20 bits):  This field MUST be set to zero on transmission and MUST be ignored on receipt.<a href="#section-5.2-5.6" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-5.7"></dt>
          <dd style="margin-left: 1.5em" id="section-5.2-5.8">
            <p id="section-5.2-5.8.1">Flags(4 bits): Identify the optimization objective, The following flags are defined:<a href="#section-5.2-5.8.1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.2-5.8.2">
<pre>
     0 1 2 3
    +-+-+-+-+
    |M|N|   |
    +-+-+-+-+
</pre><a href="#section-5.2-5.8.2" class="pilcrow">¶</a>
</div>
<p id="section-5.2-5.8.3"> Where:<a href="#section-5.2-5.8.3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.2-5.8.4.1">M flag: Min-Metric - requests computation of a solution Segment-List optimized for a selected metric.<a href="#section-5.2-5.8.4.1" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-5.2-5.8.4.2">N flag: Min-Metric with margin and maximum number of SIDs - Min Metric with two changes: a margin of by which two paths 
            with similar metrics would be considered equal, a constraint on the max number of SIDs in the Segment-List.<a href="#section-5.2-5.8.4.2" class="pilcrow">¶</a>
</li>
            </ul>
</dd>
          <dd class="break"></dd>
<dt id="section-5.2-5.9"></dt>
          <dd style="margin-left: 1.5em" id="section-5.2-5.10">
            <p id="section-5.2-5.10.1">T (Type - 8 bits):  Specifies the metric type.
          Three values are currently defined:<a href="#section-5.2-5.10.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.2-5.10.2.1">T=1: IGP metric<a href="#section-5.2-5.10.2.1" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-5.2-5.10.2.2">T=2: TE metric<a href="#section-5.2-5.10.2.2" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-5.2-5.10.2.3">T=3: Hop Counts<a href="#section-5.2-5.10.2.3" class="pilcrow">¶</a>
</li>
            </ul>
</dd>
        <dd class="break"></dd>
</dl>
</section>
<section id="section-5.3">
        <h3 id="name-constraints-sub-tlv">
<a href="#section-5.3" class="section-number selfRef">5.3. </a><a href="#name-constraints-sub-tlv" class="section-name selfRef">Constraints Sub-TLV</a>
        </h3>
<p id="section-5.3-1">The constrains we use in TwoD-IP routing is Inclusion and/or exclusion some node/service identified as a IPv6 address.<a href="#section-5.3-1" class="pilcrow">¶</a></p>
<p id="section-5.3-2">The format of Optimization Object Sub-TLV is:<a href="#section-5.3-2" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.3-3">
<pre>
    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |              Type             |             Length            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                  Reserved             | Flags |       T       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                        variable                               |
   |                           ...                                 |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                   Figure 5: Constraints Sub-TLV Format
</pre><a href="#section-5.3-3" class="pilcrow">¶</a>
</div>
<p id="section-5.3-4">Where:<a href="#section-5.3-4" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-5.3-5">
          <dt id="section-5.3-5.1"></dt>
          <dd style="margin-left: 1.5em" id="section-5.3-5.2">Type: 16 bit field. The value is 2 for this type.<a href="#section-5.3-5.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.3-5.3"></dt>
          <dd style="margin-left: 1.5em" id="section-5.3-5.4">Length: 16 bit field. The total length of the value portion of the TLV.<a href="#section-5.3-5.4" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.3-5.5"></dt>
          <dd style="margin-left: 1.5em" id="section-5.3-5.6">Reserved (20 bits):  This field MUST be set to zero on transmission and MUST be ignored on receipt.<a href="#section-5.3-5.6" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.3-5.7"></dt>
          <dd style="margin-left: 1.5em" id="section-5.3-5.8">
            <p id="section-5.3-5.8.1">Flags(4 bits): Identify the optimization objective, The following flags are defined:<a href="#section-5.3-5.8.1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.3-5.8.2">
<pre>
     0 1 2 3
    +-+-+-+-+
    |I|E|D| |
    +-+-+-+-+
</pre><a href="#section-5.3-5.8.2" class="pilcrow">¶</a>
</div>
<p id="section-5.3-5.8.3"> Where:<a href="#section-5.3-5.8.3" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.3-5.8.4.1">I flag: Inclusion<a href="#section-5.3-5.8.4.1" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-5.3-5.8.4.2">E flag: Exclusion<a href="#section-5.3-5.8.4.2" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-5.3-5.8.4.3">D flag: Diversity to another service instance (e.g., link, node)<a href="#section-5.3-5.8.4.3" class="pilcrow">¶</a>
</li>
            </ul>
</dd>
          <dd class="break"></dd>
<dt id="section-5.3-5.9"></dt>
          <dd style="margin-left: 1.5em" id="section-5.3-5.10">
            <p id="section-5.3-5.10.1">T (Type - 8 bits):  Specifies the metric type.
          Two values are currently defined:<a href="#section-5.3-5.10.1" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-5.3-5.10.2.1">T=1: TE affinity<a href="#section-5.3-5.10.2.1" class="pilcrow">¶</a>
</li>
              <li class="normal" id="section-5.3-5.10.2.2">T=2: IPv6 address(can be a SRv6 SID)<a href="#section-5.3-5.10.2.2" class="pilcrow">¶</a>
</li>
            </ul>
</dd>
          <dd class="break"></dd>
<dt id="section-5.3-5.11"></dt>
          <dd style="margin-left: 1.5em" id="section-5.3-5.12">variable: 128 bit field. Corresponding the variable defined in T.<a href="#section-5.3-5.12" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
<section id="section-5.4">
        <h3 id="name-destination-source-address-">
<a href="#section-5.4" class="section-number selfRef">5.4. </a><a href="#name-destination-source-address-" class="section-name selfRef">destination/source address Sub-TLV</a>
        </h3>
<p id="section-5.4-1">A TwoD-IP routing demand corresponding a &lt;destination, source&gt; pair, so the 
        Optimization object and constraint define a TwoD-IP demand and naturally need to bind 
        a &lt;destination, source&gt; pair. The pair's information is carried in destination/source address Sub-TLV, and it's format is:<a href="#section-5.4-1" class="pilcrow">¶</a></p>
<div class="alignLeft art-text artwork" id="section-5.4-2">
<pre>
     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |              Type             |             Length            |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    | PrefixLength  |    Reserved   |         PrefixNumbers         |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                        Address Prefix1                        |
    |                             ...                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                        Address Prefix2                        |
    |                             ...                               |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                             ...                               |
    |                                                               |

          Figure 6: destination/source address Sub-TLV Format
</pre><a href="#section-5.4-2" class="pilcrow">¶</a>
</div>
<p id="section-5.4-3">Where:<a href="#section-5.4-3" class="pilcrow">¶</a></p>
<span class="break"></span><dl class="dlParallel" id="section-5.4-4">
          <dt id="section-5.4-4.1"></dt>
          <dd style="margin-left: 1.5em" id="section-5.4-4.2">Type: 16 bit field. The value is 3 for destination address, 4 for source address.<a href="#section-5.4-4.2" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.4-4.3"></dt>
          <dd style="margin-left: 1.5em" id="section-5.4-4.4">Length: 16 bit field. The total length of the value portion(addresses information) of the TLV.<a href="#section-5.4-4.4" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.4-4.5"></dt>
          <dd style="margin-left: 1.5em" id="section-5.4-4.6">PrefixLength: 8 bit field. The length of IPv6 address. The IPv6 address information is transferring in 
          Prefix format in order to reduce packet length and all the addresses needed to transferring is group by same prefix length.<a href="#section-5.4-4.6" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.4-4.7"></dt>
          <dd style="margin-left: 1.5em" id="section-5.4-4.8">Reserved (8 bits):  This field MUST be set to zero on transmission and MUST be ignored on receipt.<a href="#section-5.4-4.8" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.4-4.9"></dt>
          <dd style="margin-left: 1.5em" id="section-5.4-4.10">PrefixNumbers: 16 bit field. The number of address prefix in the length of PrefixLength.<a href="#section-5.4-4.10" class="pilcrow">¶</a>
</dd>
          <dd class="break"></dd>
<dt id="section-5.4-4.11"></dt>
          <dd style="margin-left: 1.5em" id="section-5.4-4.12">Address Prefix:  The address prefix in the length of PrefixLength and will be padded with 0 to fit the multiple 32 bit length.<a href="#section-5.4-4.12" class="pilcrow">¶</a>
</dd>
        <dd class="break"></dd>
</dl>
</section>
</section>
<section id="section-6">
      <h2 id="name-twod-ip-forwarding-path-com">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-twod-ip-forwarding-path-com" class="section-name selfRef">TwoD-IP forwarding path computation</a>
      </h2>
<p id="section-6-1">The procedure of transforming the TwoD-IP configuration to a candidate path has two steps: 
      setting up the SR Policy Dynamic candidate path and TwoD-IP forwarding table entry creation.<a href="#section-6-1" class="pilcrow">¶</a></p>
<section id="section-6.1">
        <h3 id="name-setting-up-the-sr-policy-dy">
<a href="#section-6.1" class="section-number selfRef">6.1. </a><a href="#name-setting-up-the-sr-policy-dy" class="section-name selfRef">Setting up the SR Policy Dynamic candidate path</a>
        </h3>
<p id="section-6.1-1">The TwoD-IP configuration contains the Optimization object and constraint information, when the headend node 
        receive TwoD-IP configuration information(manually or automatically), it will extracts the Optimization 
        object and constraint information to generate a SR Policy which enable Dynamic candidate path.<a href="#section-6.1-1" class="pilcrow">¶</a></p>
<p id="section-6.1-2">An SR  Policy is identified through the tuple&lt;headend, color, endpoint&gt;,<span>[<a href="#I-D.ietf-spring-segment-routing-policy" class="xref">I-D.ietf-spring-segment-routing-policy</a>]</span> so the headend node will extract the first destination address in TwoD-IP configuration TLV - 
        destination address Sub-TLV as the endpoint, dynamic assign a color value to distinguish the SR Policy from others with the same endpoint. And the candidate path associated 
        to the SR Policy is a dynamic candidate path which expresses an optimization objective and a set of constraints that extract from the TwoD-IP configuration 
        TLV - Optimization Object Sub-TLV and Constraint Sub-TLV. Then the headend node(or with the help of a PCE) computes the solution Segment-List that solve the 
        optimization problem and also match our TwoD-IP routing demand.<a href="#section-6.1-2" class="pilcrow">¶</a></p>
</section>
<section id="section-6.2">
        <h3 id="name-twod-ip-forwarding-table-en">
<a href="#section-6.2" class="section-number selfRef">6.2. </a><a href="#name-twod-ip-forwarding-table-en" class="section-name selfRef">TwoD-IP forwarding table entry creation</a>
        </h3>
<p id="section-6.2-1">After Setting up the SR Policy dynamic candidate path, the active dynamic candidate path will be defined with a BSID which can steers the packets to the dynamic 
        candidate path, and installs the BSID-keyed entry in the TwoD-IP forwarding table.<a href="#section-6.2-1" class="pilcrow">¶</a></p>
<p id="section-6.2-2">The TwoD-IP forwarding table has two dimensions: destination and source, so TwoD-IP forwarding table has two index: destination address and source address, 
        a pair of &lt;destination address, source address&gt; determines a action(next hop) which is a BSID.<a href="#section-6.2-2" class="pilcrow">¶</a></p>
<p id="section-6.2-3">The headend node receives a TwoD-IP configuration TLV, generates a SR Policy depends on it, and also will creates &lt;destination address, source address&gt; pairs in 
        TwoD-IP forwarding table as a index, and installs their action(next hop) 
        with the BSID that define the dynamic candidate path generated with the same TwoD-IP configuration TLV informations.<a href="#section-6.2-3" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-7">
      <h2 id="name-twod-ip-forwarding-table-de">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-twod-ip-forwarding-table-de" class="section-name selfRef">TwoD-IP forwarding table Design</a>
      </h2>
<p id="section-7-1">Traditional forwarding table only supports making forwarding decisions based on destination IP addresses even in Segment Routing architecture. TwoD-IP routing needs a new forwarding table structure 
      that supports making forwarding decisions based on both destination and source IP addresses.<a href="#section-7-1" class="pilcrow">¶</a></p>
<p id="section-7-2">Considering the compatibility with Segment Routing architecture, There's no need to modify the FIB structure directly. we imitate the way SR Policy process 
      interacting with the FIB process to install our TwoD IP process 
      in data plane. we just need to install in FIB with destination address that in the active TwoD-IP &lt;destination, source&gt; pair with next-hop = TwoD IP 
      routing process which maintain a TwoD IP Forwarding table.<a href="#section-7-2" class="pilcrow">¶</a></p>
<p id="section-7-3">The TwoD-IP forwarding table structure is the same as <span>[<a href="#I-D.xu-rtgwg-twod-ip-routing" class="xref">I-D.xu-rtgwg-twod-ip-routing</a>]</span> called FIST which is designed 
      to avoid forwarding table explosion with a new source dimension.<a href="#section-7-3" class="pilcrow">¶</a></p>
<p id="section-7-4">In conclusion, TwoD IP routing procedure maintains a TwoD-IP forwarding table separate from the headend node's FIB and installs FIB entries with 
      destination addresses in the chosen &lt;destination address, source address&gt; pairs with next-hop = TwoD IP routing interface.<a href="#section-7-4" class="pilcrow">¶</a></p>
<p id="section-7-5">When a headend node receives a packet with destination matching the destination address of TwoD IP routing pairs, headend node steers the packet to TwoD IP routing process to the TwoD-IP forwarding table, 
      then the headend node will lookup the TwoD-IP forwarding table base on the packet's both destination and source address extracted from the packet and output a matched entry. 
      Finally, headend node will forward the packet to the next hop associated with the matched entry, which is a BSID, after steering the packet to the BSID, the headend node will 
      insert the Segment-List of the dynamic candidate path of the BSID to the packet head so that it can be forwarded through this path<a href="#section-7-5" class="pilcrow">¶</a></p>
<p id="section-7-6">SR Policy process interacts with the RIB/FIB process to install an active SR Policy in the data plane.<span>[<a href="#I-D.filsfils-spring-sr-policy-considerations" class="xref">I-D.filsfils-spring-sr-policy-considerations</a>]</span> 
      TwoD IP routing protocol doesn't change the FIB structure so Segment Routing's advanced features like On-Demand Next Hop will still work. (we allocate higher authority to 
      TwoD IP routing process to install and modify FIB entries to avoid conflicting)<a href="#section-7-6" class="pilcrow">¶</a></p>
</section>
<div id="Security">
<section id="section-8">
      <h2 id="name-security-considerations">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-8-1">This document does not introduce additional security requirements and
      mechanisms.<a href="#section-8-1" class="pilcrow">¶</a></p>
</section>
</div>
<div id="IANA">
<section id="section-9">
      <h2 id="name-iana-considerations">
<a href="#section-9" class="section-number selfRef">9. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-9-1">Some newly designed TwoD-IP routing protocols may need new protocol numbers assigned by IANA.<a href="#section-9-1" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-10">
      <h2 id="name-references">
<a href="#section-10" class="section-number selfRef">10. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-10.1">
        <h3 id="name-normative-references">
<a href="#section-10.1" class="section-number selfRef">10.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="RFC2119">[RFC2119]</dt>
        <dd>
<span class="refAuthor">Bradner, S.</span>, <span class="refTitle">"Key words for use in RFCs to Indicate Requirement Levels"</span>, <span class="seriesInfo">BCP 14</span>, <span class="seriesInfo">RFC 2119</span>, <span class="seriesInfo">DOI 10.17487/RFC2119</span>, <time datetime="1997-03" class="refDate">March 1997</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc2119">https://www.rfc-editor.org/info/rfc2119</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8402">[RFC8402]</dt>
      <dd>
<span class="refAuthor">Filsfils, C., Ed.</span>, <span class="refAuthor">Previdi, S., Ed.</span>, <span class="refAuthor">Ginsberg, L.</span>, <span class="refAuthor">Decraene, B.</span>, <span class="refAuthor">Litkowski, S.</span>, and <span class="refAuthor">R. Shakir</span>, <span class="refTitle">"Segment Routing Architecture"</span>, <span class="seriesInfo">RFC 8402</span>, <span class="seriesInfo">DOI 10.17487/RFC8402</span>, <time datetime="2018-07" class="refDate">July 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8402">https://www.rfc-editor.org/info/rfc8402</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-10.2">
        <h3 id="name-informative-references">
<a href="#section-10.2" class="section-number selfRef">10.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="I-D.filsfils-spring-sr-policy-considerations">[I-D.filsfils-spring-sr-policy-considerations]</dt>
        <dd>
<span class="refAuthor">Filsfils, C.</span>, <span class="refAuthor">Talaulikar, K.</span>, <span class="refAuthor">Krol, P.</span>, <span class="refAuthor">Horneffer, M.</span>, and <span class="refAuthor">P. Mattes</span>, <span class="refTitle">"SR Policy Implementation and Deployment Considerations"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-filsfils-spring-sr-policy-considerations-07</span>, <time datetime="2021-04-04" class="refDate">4 April 2021</time>, <span>&lt;<a href="https://www.ietf.org/archive/id/draft-filsfils-spring-sr-policy-considerations-07.txt">https://www.ietf.org/archive/id/draft-filsfils-spring-sr-policy-considerations-07.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-spring-segment-routing-policy">[I-D.ietf-spring-segment-routing-policy]</dt>
        <dd>
<span class="refAuthor">Filsfils, C.</span>, <span class="refAuthor">Talaulikar, K.</span>, <span class="refAuthor">Voyer, D.</span>, <span class="refAuthor">Bogdanov, A.</span>, and <span class="refAuthor">P. Mattes</span>, <span class="refTitle">"Segment Routing Policy Architecture"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-spring-segment-routing-policy-13</span>, <time datetime="2021-05-28" class="refDate">28 May 2021</time>, <span>&lt;<a href="https://www.ietf.org/archive/id/draft-ietf-spring-segment-routing-policy-13.txt">https://www.ietf.org/archive/id/draft-ietf-spring-segment-routing-policy-13.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-spring-sr-service-programming">[I-D.ietf-spring-sr-service-programming]</dt>
        <dd>
<span class="refAuthor">Clad, F.</span>, <span class="refAuthor">Xu, X.</span>, <span class="refAuthor">Filsfils, C.</span>, <span class="refAuthor">Bernier, D.</span>, <span class="refAuthor">Li, C.</span>, <span class="refAuthor">Decraene, B.</span>, <span class="refAuthor">Ma, S.</span>, <span class="refAuthor">Yadlapalli, C.</span>, <span class="refAuthor">Henderickx, W.</span>, and <span class="refAuthor">S. Salsano</span>, <span class="refTitle">"Service Programming with Segment Routing"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-spring-sr-service-programming-05</span>, <time datetime="2021-09-10" class="refDate">10 September 2021</time>, <span>&lt;<a href="https://www.ietf.org/archive/id/draft-ietf-spring-sr-service-programming-05.txt">https://www.ietf.org/archive/id/draft-ietf-spring-sr-service-programming-05.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.xu-rtgwg-twod-ip-routing">[I-D.xu-rtgwg-twod-ip-routing]</dt>
        <dd>
<span class="refAuthor">Xu, M.</span>, <span class="refAuthor">Wu, J.</span>, <span class="refAuthor">Yang, S.</span>, and <span class="refAuthor">D. Wang</span>, <span class="refTitle">"Two Dimensional IP Routing Architecture"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-xu-rtgwg-twod-ip-routing-00</span>, <time datetime="2012-03-04" class="refDate">4 March 2012</time>, <span>&lt;<a href="https://www.ietf.org/archive/id/draft-xu-rtgwg-twod-ip-routing-00.txt">https://www.ietf.org/archive/id/draft-xu-rtgwg-twod-ip-routing-00.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC3630">[RFC3630]</dt>
        <dd>
<span class="refAuthor">Katz, D.</span>, <span class="refAuthor">Kompella, K.</span>, and <span class="refAuthor">D. Yeung</span>, <span class="refTitle">"Traffic Engineering (TE) Extensions to OSPF Version 2"</span>, <span class="seriesInfo">RFC 3630</span>, <span class="seriesInfo">DOI 10.17487/RFC3630</span>, <time datetime="2003-09" class="refDate">September 2003</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc3630">https://www.rfc-editor.org/info/rfc3630</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC4177">[RFC4177]</dt>
      <dd>
<span class="refAuthor">Huston, G.</span>, <span class="refTitle">"Architectural Approaches to Multi-homing for IPv6"</span>, <span class="seriesInfo">RFC 4177</span>, <span class="seriesInfo">DOI 10.17487/RFC4177</span>, <time datetime="2005-09" class="refDate">September 2005</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc4177">https://www.rfc-editor.org/info/rfc4177</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<div id="authors-addresses">
<section id="appendix-A">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Mingwei Xu</span></div>
<div dir="auto" class="left"><span class="org">Tsinghua University</span></div>
<div dir="auto" class="left"><span class="street-address">Department of Computer Science, Tsinghua University</span></div>
<div dir="auto" class="left"><span class="locality">Beijing</span></div>
<div class="tel">
<span>Phone:</span>
<a href="tel:+86-10-6278-5822" class="tel">+86-10-6278-5822</a>
</div>
<div class="email">
<span>Email:</span>
<a href="mailto:xmw@cernet.edu.cn" class="email">xmw@cernet.edu.cn</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Bo Wang</span></div>
<div dir="auto" class="left"><span class="org">Tsinghua University</span></div>
<div dir="auto" class="left"><span class="locality">Beijing</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:wangbo2019@tsinghua.edu.cn" class="email">wangbo2019@tsinghua.edu.cn</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Tingfeng Wang</span></div>
<div dir="auto" class="left"><span class="org">Beijing University of Posts and Telecommunications</span></div>
<div dir="auto" class="left"><span class="locality">Beijing</span></div>
<div dir="auto" class="left"><span class="country-name">P.R. China</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:wangtingfeng@bupt.edu.cn" class="email">wangtingfeng@bupt.edu.cn</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Jianping</span></div>
<div dir="auto" class="left"><span class="org">Tsinghua University</span></div>
<div dir="auto" class="left"><span class="locality">Beijing</span></div>
<div dir="auto" class="left"><span class="country-name">P.R. China</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:jianping@cernet.edu.cn" class="email">jianping@cernet.edu.cn</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
