
INTERNET DRAFT                                            Brian Haberman
February 1999                                                 Garry Kump
                                                                   (IBM)
                                                             Hal Sandick
                                                       (Nortel Networks)


                 Protocol Independent Multicast Routing
               in the Internet Protocol Version 6 (IPv6)

                      <draft-ietf-pim-ipv6-01.txt>


Status of This Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working
   groups.  Note that other groups may also distribute working documents
   as Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six
   months, and may be updated, replaced, or obsoleted by other documents
   at any time.  It is not appropriate to use Internet-Drafts as
   reference material, or to cite them other than as a ``working draft''
   or ``work in progress.''

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.


Abstract

   This document outlines recommendations in the use of Protocol
   Independent Multicast routing protocol to support Internet Protocol
   Version 6.  It describes the changes needed in order to handle the
   differences between IPv6 and IPv4 and conform to the logic introduced
   by other routing protocols enabled for IPv6.











Haberman, Kump, Sandick           Expires August 1999           [Page i]

Internet Draft       PIM Multicast Routing for IPv6        February 1999




                                Contents



 1. Definitions                                                        1

 2. Introduction                                                       1

 3. Definitions and Assumptions                                        1

 4. Protocol Impact                                                    1
     4.1. Hello Message . . . . . . . . . . . . . . . . . . . . . .    1
     4.2. Register Message  . . . . . . . . . . . . . . . . . . . .    2
     4.3. Register-Stop Message . . . . . . . . . . . . . . . . . .    2
     4.4. Join/Prune, Graft, and Graft-Ack Messages   . . . . . . .    2
     4.5. Bootstrap Message . . . . . . . . . . . . . . . . . . . .    2
     4.6. Assert Message  . . . . . . . . . . . . . . . . . . . . .    3
     4.7. Candidate-RP-Advertisement Message  . . . . . . . . . . .    3

 5. IPv6 Address Scoping                                               3





























Haberman, Kump, Sandick          Expires August 1999           [Page ii]

Internet Draft       PIM Multicast Routing for IPv6        February 1999


1. Definitions

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC 2119].


2. Introduction

   This document describes a protocol for efficiently routing to
   multicast groups communicating with the
   Internet Protocol Version 6 (IPv6).  This document will only describe
   recommendations for making PIM conform to practices
   implemented by other IPv6 routing protocols.  The existing PIM drafts
   should be referenced for actual protocol operation.


3. Definitions and Assumptions

    -  Link Local Address - A local-use, non-routable unicast IPv6
       address [RFC 2373].

    -  All-PIM-Routers multicast address -
       A permanently assigned link-scoped IPv6 multicast address for the
       PIM protocol [RFC 2375].

   It is assumed that a router running PIM for IPv6 will have a
   network unique, globally reachable IPv6 address that will be used for
   multiple hop messages.


4. Protocol Impact

   The following will outline suggested values for the PIM protocol 
   messages in order to support IPv6.  For most messages, the changes
   involve the addresses used in the IPv6 header.


4.1. Hello Message

   When sending a Hello Message, a PIM router must use a different set
   of IPv6 addresses in the IPv6 header.  The IPv6 destination address
   must be the All-PIM-Routers multicast address.  The IPv6 source
   address must be the IPv6 link local address of the interface on which
   this message is being forwarded.  The link local address in
   the source address field will be used to determine neighbor adjacency




Haberman, Kump, Sandick           Expires August 1999           [Page 1]

Internet Draft       PIM Multicast Routing for IPv6        February 1999


   and for Designated Router(DR) election.  It should be noted, that the
   DR will identify itself using its globally reachable IPv6 address.


4.2. Register Message

   The Register Message
   is addressed to the globally reachable IPv6 address of the Rendezvous
   Point(RP). The source address of the message is the globally
   reachable IPv6 address of the DR. The DR sending the Register Message
   obtains the globally reachable IPv6 address of the RP from the local
   RP-set information.


4.3. Register-Stop Message

   The Register-Stop Message is addressed in the
   same manner as the Register Message.  The RP addresses the message to
   the globally reachable IPv6 address of the DR. The source address is
   the globally reachable IPv6 address of the RP. The RP obtains
   the globally reachable IPv6 address of the DR from the source address
   field of the Register Message received from the DR.


4.4. Join/Prune, Graft, and Graft-Ack Messages

   In the transmission of a
   Join/Prune Message, a router sets the IPv6 destination address to the
   All-PIM-Routers multicast address.  The IPv6 source address is set to
   the link local address of the interface on which the message
   is forwarded.  The Upstream Neighbor Address field is set to the link
   local address of the next hop router, which is obtained from the RPF
   lookup.  If a link local address cannot be obtained
   for the upstream neighbor, the Upstream Neighbor Address field is set
   to a known IPv6 address for that neighbor.


4.5. Bootstrap Message

   When sending a Bootstrap Message, a PIM router sets the IPv6
   destination address to the All-PIM-Routers multicast address.  The
   source address is the link local address of the interface on
   which the message is forwarded.  The Bootstrap Router(BSR) Address is
   set to the globally reachable IPv6 address of the BSR.







Haberman, Kump, Sandick           Expires August 1999           [Page 2]

Internet Draft       PIM Multicast Routing for IPv6        February 1999


4.6. Assert Message

   The Assert Message has an IPv6 destination address of the
   All-PIM-Routers multicast address and an IPv6 source address of the
   link local address of the interface forwarding the message.  The link
   local address in the IPv6 source field is used to resolve ties in the
   assert process.  Downstream routers save the winning assert router's
   link local address to resolve any future RPF requirements.


4.7. Candidate-RP-Advertisement Message

   The Candidate-RP-Advertisement Message uses the globally reachable
   IPv6 address of the BSR as the IPv6 destination address.  The source
   address is the globally reachable IPv6 address of the candidate RP.
   The RP Address field is set to the globally reachable IPv6 address of
   the candidate RP. Each candidate RP router creates this message and
   unicasts it to the BSR.


5. IPv6 Address Scoping

   With the introduction of scoped addresses in IPv6, new issues arise
   in the distribution of scoped routes
   and the forwarding of scoped packets.  Currently, work in the area of
   scoping has been limited.  An Internet draft does exist that outlines
   the changes needed to routing protocols in order to support the IPv6
   scoped addresses [SCOPE].

   The main outstanding problem, with regard to scoping, is the
   PIM-SM bootstrap mechanism.  The bootstrap mechanism is a centralized
   function, e.g.  there is one bootstrap server per PIM domain.  If the
   PIM-SM domain is not a subset of
   the address domain then the bootstrap mechanism, in its current form,
   cannot support scoped RP addressses and scoped group addresses.  The
   bootstrap server will have to assemble and distribute sets
   of RP-group mappings that were appropriate to the intersection of the
   source and group address scopes.  Extending the bootstrap server
   to support this environment is a topic for further study.  Therefore,
   initially we will only consider the case where the PIM-SM domain is a
   subset of the scope address domain.










Haberman, Kump, Sandick           Expires August 1999           [Page 3]

Internet Draft       PIM Multicast Routing for IPv6        February 1999


References


[RFC 2119] S. Bradner, "Key words for use in RFCs to Indicate
           Requirement Levels", RFC 2119, BCP14, March 1997.

[RFC 2373] R. Hinden and S. Deering, "IP Version 6 Addressing
           Architecture", RFC 2373, July 1998.

[RFC 2375] R. Hinden and S. Deering, "IPv6 Multicast Address
           Assignments", RFC 2375, July 1998.

[SCOPE]    B. Haberman, "Routing of Site-Scoped Addresses in the
           Internet Protocol Version 6 (IPv6)", currently
           draft-haberman-ipv6-site-route-00.txt.



Security Considerations

   This document does not introduce any protocol changes that
   require any additional security considerations above and beyond those
   described in the original protocol specification documents.


Author's Address

        Brian Haberman
        Garry Kump
        IBM Corporation
        800 Park Office Drive
        Research Triangle Park, NC 27709
        USA

        +1-919-254-2673
        haberman@raleigh.ibm.com

        +1-919-254-2395
        kump@us.ibm.com


        Hal Sandick
        Nortel Networks, Inc.
        1009 Slater Rd., Suite 220
        Durham, NC 27703
        USA
        +1-919-832-8848
        hsandick@baynetworks.com



Haberman, Kump, Sandick           Expires August 1999           [Page 4]

Internet Draft       PIM Multicast Routing for IPv6        February 1999





















































Haberman, Kump, Sandick           Expires August 1999           [Page 5]
