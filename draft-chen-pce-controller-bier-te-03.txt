



PCE                                                              R. Chen
Internet-Draft                                                     B. Xu
Intended status: Standards Track                                 ch. Zhu
Expires: 7 September 2022                                ZTE Corporation
                                                                 H. Chen
                                                               Futurewei
                                                                 A. Wang
                                                           China Telecom
                                                            6 March 2022


   PCEP Procedures and Protocol Extensions for Using PCE as a Central
                     Controller (PCECC) of BIER-TE
                  draft-chen-pce-controller-bier-te-03

Abstract

   This draft specify extensions to PCEP protocol when a PCE-based
   controller is responsible for allocates the BIER-TE information(BIER
   subdomain-id, adjacencies BitPosition(s), and Adjacency Types etc),
   then PCC generate a "Bit Index Forwarding Table"(BIFT).

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on 7 September 2022.

Copyright Notice

   Copyright (c) 2022 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents (https://trustee.ietf.org/
   license-info) in effect on the date of publication of this document.
   Please review these documents carefully, as they describe your rights



Chen, et al.            Expires 7 September 2022                [Page 1]

Internet-Draft                PCECC BIER-TE                   March 2022


   and restrictions with respect to this document.  Code Components
   extracted from this document must include Revised BSD License text as
   described in Section 4.e of the Trust Legal Provisions and are
   provided without warranty as described in the Revised BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
     1.1.  Requirements Language . . . . . . . . . . . . . . . . . .   3
   2.  PCECC BIER Requirements . . . . . . . . . . . . . . . . . . .   3
   3.  Procedures for Using the PCE as the Central Controller (PCECC)
           in BIER-TE  . . . . . . . . . . . . . . . . . . . . . . .   4
     3.1.  PCECC Capability Advertisement  . . . . . . . . . . . . .   4
     3.2.  New BIER Path Setup . . . . . . . . . . . . . . . . . . .   4
     3.3.  PCECC BIER-TE information allocation and Generation of
           BFIT  . . . . . . . . . . . . . . . . . . . . . . . . . .   4
     3.4.  Redundant PCEs  . . . . . . . . . . . . . . . . . . . . .   5
     3.5.  Re Delegation and Cleanup . . . . . . . . . . . . . . . .   5
     3.6.  Synchronization of BIER-TE information Allocations  . . .   5
   4.  PCEP extension  . . . . . . . . . . . . . . . . . . . . . . .   5
     4.1.  The OPEN Object . . . . . . . . . . . . . . . . . . . . .   5
       4.1.1.  PCECC Capability sub-TLV  . . . . . . . . . . . . . .   5
     4.2.  PATH-SETUP-TYPE TLV . . . . . . . . . . . . . . . . . . .   6
     4.3.  CCI object  . . . . . . . . . . . . . . . . . . . . . . .   6
       4.3.1.  BIER Encapsulation Sub TLV  . . . . . . . . . . . . .   7
       4.3.2.  Address TLVs  . . . . . . . . . . . . . . . . . . . .   7
       4.3.3.  ROUTE-DISTINGUISHER TLV . . . . . . . . . . . . . . .   7
     4.4.  FEC Object  . . . . . . . . . . . . . . . . . . . . . . .   8
   5.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   8
   6.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   8
   7.  Security Considerations . . . . . . . . . . . . . . . . . . .   8
   8.  Normative References  . . . . . . . . . . . . . . . . . . . .   8
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  10

1.  Introduction

   [RFC8283]introduces the architecture for PCE as a central controller
   as an extension of the architecture described in[RFC4655] and assumes
   the continued use of PCEP as the protocol used between PCE and PCC.
   [RFC8283]further examines the motivations and applicability for PCEP
   as a Southbound Interface (SBI), and introduces the implications for
   the protocol.

   [RFC9050]specify the procedures and PCEP protocol extensions for
   using the PCE as the central controller for static LSPs, where LSPs
   can be provisioned as explicit label instructions at each hop on the
   end-to-end path.  Each router along the path must be told what label-
   forwarding instructions to program and what resources to reserve.



Chen, et al.            Expires 7 September 2022                [Page 2]

Internet-Draft                PCECC BIER-TE                   March 2022


   The PCE-based controller keeps a view of the network and determines
   the paths of the end-to-end LSPs, and the controller uses PCEP to
   communicate with each router along the path of the end-to-end LSP.

   Bit Index Explicit Replication (BIER)-TE shares architecture and
   packet formats with BIER as described in [RFC8279].  BIER-TE forwards
   and replicates packets based on a BitString in the packet header, but
   every BitPosition of the BitString of a BIER-TE packet indicates one
   or more adjacencies as described in [I-D.ietf-bier-te-arch].

   This draft specify extensions to PCEP protocol when a PCE-based
   controller is responsible for allocates the BIER-TE information(BIER
   subdomain-id, adjacencies BitPosition(s), and Adjacency Types etc),
   then PCC generate a "Bit Index Forwarding Table"(BIFT).

1.1.  Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC2119].

2.  PCECC BIER Requirements

   Following key requirements for PCECC-BIER should be considered
   when`designing the PCECC based solution:

   *  PCEP speaker supporting this draft needs to have the capability to
      advertise its PCECC BIER-TE capability to its peers.

   *  PCEP speaker not supporting this draft needs to be able to reject
      PCECC BIER-TE related message with a reason code that indicates no
      support for PCECC.

   *  PCEP procedures needs to provide a means to update (or cleanup)
      the BIER-TE related informations (BIER subdomain-id, adjacencies
      BitPosition(s), and Adjacency Types etc) to the PCC.

   *  PCEP procedures needs to provide a means to update (or cleanup)
      the BIER-TE "Bit Index Forwarding Table" (BIFT) to the PCC.

   *  PCEP procedures needs to provide a means to synchronize the BIER-
      TE related informations(BIER subdomain-id, adjacencies
      BitPosition(s), and Adjacency Types etc) between PCE to PCC in the
      PCEP messages.







Chen, et al.            Expires 7 September 2022                [Page 3]

Internet-Draft                PCECC BIER-TE                   March 2022


3.  Procedures for Using the PCE as the Central Controller (PCECC) in
    BIER-TE

   Active stateful PCE is described in [RFC8231].  PCE as a central
   controller (PCECC) reuses existing Active stateful PCE mechanism as
   much as possible to control the LSP.

   This document uses the same PCEP messages and its extensions which
   are described in [RFC9050] for PCECC BIER-TE as well.

   PCEP messages PCRpt, PCInitiate, PCUpd are also used to send LSP
   Reports, LSP setup and LSP update respectively.  The extended
   PCInitiate message described in [RFC9050] is used to download or
   cleanup central controller's instructions (CCIs) (BIER-TE related
   informations and "Bit Index Forwarding Table" (BIFT) in scope of this
   document).  The extended PCRpt message described in [RFC9050] is also
   used to report the CCIs (BIER-TE related informations) from PCC to
   PCE.

   [RFC9050] specify an object called CCI for the encoding of central
   controller's instructions.  This document extends the CCI by defining
   another object-type for BIER-TE.

3.1.  PCECC Capability Advertisement

   During PCEP Initialization Phase, PCEP Speakers (PCE or PCC)
   advertise their support of PCECC extensions.  A PCEP Speaker includes
   the "PCECC Capability" sub-TLV, described in [RFC9050].

   This document adds T-bit in PCECC-CAPABILITY sub-TLV for BIER-TE.

3.2.  New BIER Path Setup

   The PCEP messages pertaining to PCECC BIER-TE MUST include PATH-
   SETUP-TYPE TLV [RFC8408] with PST=TBD in the SRP object to clearly
   identify the PCECC BIER-TE is intended.

3.3.  PCECC BIER-TE information allocation and Generation of BFIT

   Each node (PCC) is allocated a node BIER-TE information by the PCECC.
   The BIER-TE information mainly includes BIER subdomain-id,
   adjacencies BitPosition(s), and Adjacency Types etc.  In scenarios
   where the IGP protocol is not used/available, Each node (PCC) is
   allocated its own and neighbor BIER-TE informations by the PCECC,
   then PCC generates a BIFT based on the informations it receives.  The
   BIFT mainly includes BFR ID, F-BM and BFR nexthop.





Chen, et al.            Expires 7 September 2022                [Page 4]

Internet-Draft                PCECC BIER-TE                   March 2022


3.4.  Redundant PCEs

   [I-D.ietf-pce-state-sync] describes synchronization mechanism between
   the stateful PCEs.  The BIER-TE informations allocated by a PCE MUST
   also be synchronized among PCEs for PCECC BIER-TE state
   synchronization.

3.5.  Re Delegation and Cleanup

   [RFC9050] describes the action needed for CCIs for the Basic PCECC
   LSP on this terminated session.Similarly actions should be applied
   for the BIER-TE information as well.

3.6.  Synchronization of BIER-TE information Allocations

   [RFC9050] describes the synchronization of Central Controller's
   Instructions (CCI) via LSP state synchronization as described in
   [RFC8231] and [RFC8232].Same procedures should be applied for BIER-TE
   information and "Bit Index Forwarding Table" (BIFT) allocations as
   well.

4.  PCEP extension

4.1.  The OPEN Object

4.1.1.  PCECC Capability sub-TLV

   [RFC9050] defined the PCECC-CAPABILITY TLV.  A new T-bit is defined
   in PCECC-CAPABILITY sub-TLV for PCECC BIER-TE:


     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |     Type=TBD                  |               Length          |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                Flags                                    |T|I|S|
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                                  Figure 1

   where:

   T (PCECC BIER-TE CAPABILITY - 1 bit): If set to 1 by a PCEP speaker,
   it indicates that the PCEP speaker is capable for PCECC BIER-TE
   capability and PCE would allocate BIER-TE information on this
   session.




Chen, et al.            Expires 7 September 2022                [Page 5]

Internet-Draft                PCECC BIER-TE                   March 2022


4.2.  PATH-SETUP-TYPE TLV

   The PATH-SETUP-TYPE TLV is defined in [RFC8408].  PST = TBD is used
   when Path is setup via PCECC BIER-TE mode.On a PCRpt/PCUpd/PCInitiate
   message, the PST=TBD indicates that this path was setup via a PCECC
   BIER-TE based mechanism where either the BIER-TE informations and
   BIER-TE "Bit Index Forwarding Table" (BIFT) were allocated/instructed
   by PCE via PCECC mechanism.

4.3.  CCI object

   The Central Control Instructions (CCI) Object is used by the PCE to
   specify the forwarding instructions is defined in [RFC9050].  This
   document defines another object-type for BIER-TE purpose.

   CCI Object-Type is TBD for BIER-TE as below


     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                                CC-ID                          |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     | subdomain-ID  |     BSL       |           Flags               |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |      SI       |adj-t|           BitPosition         | Reserved|
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
     |                                                               |
     //                       Optional TLV                          //
     |                                                               |
     +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                                  Figure 2

   where:

   The field CC-ID is as described in [RFC9050].

   BIER subdomain-ID: Unique value identifying the BIER subdomain. (as
   defined in [RFC8401].

   BSL: A 1 octet field encodes the length in bits of the BitString as
   per [RFC8296], the maximum length of the BitString is 5,it indicates
   the length of BitString is 1024.It is used to refer to the number of
   bits in the BitString.

   SI: Set Identifier (Section 1 of [RFC8279] used in the encapsulation
   for this BIER subdomain for this BitString length, 1 octet.



Chen, et al.            Expires 7 September 2022                [Page 6]

Internet-Draft                PCECC BIER-TE                   March 2022


   BitPositions: BitPositions indicate adjacencies,16bit.

   The "Reserved" (1 octets) fields are currently unused, and MUST be
   set to zero on transmission and ignored on reception.

   Adjacency Types:There are three types in this document.

   *  0b000:Forward Connected.

   *  0b001:Forward Routed.

   *  0b010: Local Decap.

   *  ECMP will discuss in next version.

   Optional TLV: There are three optional TLV are defined/reused in this
   draft.

4.3.1.  BIER Encapsulation Sub TLV

   BIER Encapsulation Sub-TLV defined in
   [I-D.chen-pce-pcep-extension-pce-controller-bier] are used to
   associate BIER Encapsulation information, so we Reuse BIER
   Encapsulation Sub-TLV to carry the BIER-TE Encapsulation
   informations.

4.3.2.  Address TLVs

   When the adjacency type is 0b000:Forward Connected, the BFR address
   information (BFR out-interface and nexthop informations) should be
   carried in the CCI Object.

   Address TLVs described in [RFC9050] are used to associate the next-
   hop information, so we Reuse ADDRESS TLV to carry the BFR out-
   interface and nexthop informations.

4.3.3.  ROUTE-DISTINGUISHER TLV

   When the adjacency type is 0b001: Forward Routed, a VRF and the next-
   hop informations should be carried in the CCI Object, so we reuse the
   ROUTE-DISTINGUISHER TLV defined in [RFC9168] and Address TLVs defined
   in [RFC9050] to carry the next hop is associated with a specific VPN
   identified by the RD.

   When the adjacency type is 0b010: Local Decap, only a VRF should be
   carried in the CCI Object.  Reuse the ROUTE-DISTINGUISHER TLV which
   is defined in [RFC9168] carries an RD value, used to identify a VRF.




Chen, et al.            Expires 7 September 2022                [Page 7]

Internet-Draft                PCECC BIER-TE                   March 2022


4.4.  FEC Object

   BIER-TE information is always associated with adjacency, so we reuse
   FEC Object 1'IPv4 Node ID' and FEC Object-Type 2 'IPv6 Node ID'
   defined in [RFC8664] to clearly identify the adjacency for which a
   SI: BitPosition is being allocated.

5.  Acknowledgements

   We would like to thank Dhruv Dhody for their useful comments and
   suggestions.

6.  IANA Considerations

   TBD.

7.  Security Considerations

   The PCECC extension are based on the existing PCEP messages and thus
   the security considerations described in

   The PCECC extension are based on the existing PCEP messages and thus
   the security considerations described in [RFC5440] ,[RFC8231]
   ,[RFC8281], and [RFC9050] apply to this draft.

8.  Normative References

   [I-D.chen-pce-pcep-extension-pce-controller-bier]
              Chen, R. and B. Xu, "PCEP Procedures and Protocol
              Extensions for Using PCE as a Central Controller (PCECC)
              of BIER", Work in Progress, Internet-Draft, draft-chen-
              pce-pcep-extension-pce-controller-bier-02, 24 December
              2021, <https://datatracker.ietf.org/doc/html/draft-chen-
              pce-pcep-extension-pce-controller-bier-02>.

   [I-D.ietf-bier-te-arch]
              Eckert, T., Menth, M., and G. Cauchie, "Tree Engineering
              for Bit Index Explicit Replication (BIER-TE)", Work in
              Progress, Internet-Draft, draft-ietf-bier-te-arch-12, 28
              January 2022, <https://datatracker.ietf.org/doc/html/
              draft-ietf-bier-te-arch-12>.










Chen, et al.            Expires 7 September 2022                [Page 8]

Internet-Draft                PCECC BIER-TE                   March 2022


   [I-D.ietf-pce-state-sync]
              Litkowski, S., Sivabalan, S., Li, C., and H. Zheng, "Inter
              Stateful Path Computation Element (PCE) Communication
              Procedures.", Work in Progress, Internet-Draft, draft-
              ietf-pce-state-sync-01, 20 October 2021,
              <https://datatracker.ietf.org/doc/html/draft-ietf-pce-
              state-sync-01>.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC4655]  Farrel, A., Vasseur, J.-P., and J. Ash, "A Path
              Computation Element (PCE)-Based Architecture", RFC 4655,
              DOI 10.17487/RFC4655, August 2006,
              <https://www.rfc-editor.org/info/rfc4655>.

   [RFC5440]  Vasseur, JP., Ed. and JL. Le Roux, Ed., "Path Computation
              Element (PCE) Communication Protocol (PCEP)", RFC 5440,
              DOI 10.17487/RFC5440, March 2009,
              <https://www.rfc-editor.org/info/rfc5440>.

   [RFC8231]  Crabbe, E., Minei, I., Medved, J., and R. Varga, "Path
              Computation Element Communication Protocol (PCEP)
              Extensions for Stateful PCE", RFC 8231,
              DOI 10.17487/RFC8231, September 2017,
              <https://www.rfc-editor.org/info/rfc8231>.

   [RFC8232]  Crabbe, E., Minei, I., Medved, J., Varga, R., Zhang, X.,
              and D. Dhody, "Optimizations of Label Switched Path State
              Synchronization Procedures for a Stateful PCE", RFC 8232,
              DOI 10.17487/RFC8232, September 2017,
              <https://www.rfc-editor.org/info/rfc8232>.

   [RFC8279]  Wijnands, IJ., Ed., Rosen, E., Ed., Dolganow, A.,
              Przygienda, T., and S. Aldrin, "Multicast Using Bit Index
              Explicit Replication (BIER)", RFC 8279,
              DOI 10.17487/RFC8279, November 2017,
              <https://www.rfc-editor.org/info/rfc8279>.

   [RFC8281]  Crabbe, E., Minei, I., Sivabalan, S., and R. Varga, "Path
              Computation Element Communication Protocol (PCEP)
              Extensions for PCE-Initiated LSP Setup in a Stateful PCE
              Model", RFC 8281, DOI 10.17487/RFC8281, December 2017,
              <https://www.rfc-editor.org/info/rfc8281>.





Chen, et al.            Expires 7 September 2022                [Page 9]

Internet-Draft                PCECC BIER-TE                   March 2022


   [RFC8283]  Farrel, A., Ed., Zhao, Q., Ed., Li, Z., and C. Zhou, "An
              Architecture for Use of PCE and the PCE Communication
              Protocol (PCEP) in a Network with Central Control",
              RFC 8283, DOI 10.17487/RFC8283, December 2017,
              <https://www.rfc-editor.org/info/rfc8283>.

   [RFC8296]  Wijnands, IJ., Ed., Rosen, E., Ed., Dolganow, A.,
              Tantsura, J., Aldrin, S., and I. Meilik, "Encapsulation
              for Bit Index Explicit Replication (BIER) in MPLS and Non-
              MPLS Networks", RFC 8296, DOI 10.17487/RFC8296, January
              2018, <https://www.rfc-editor.org/info/rfc8296>.

   [RFC8401]  Ginsberg, L., Ed., Przygienda, T., Aldrin, S., and Z.
              Zhang, "Bit Index Explicit Replication (BIER) Support via
              IS-IS", RFC 8401, DOI 10.17487/RFC8401, June 2018,
              <https://www.rfc-editor.org/info/rfc8401>.

   [RFC8408]  Sivabalan, S., Tantsura, J., Minei, I., Varga, R., and J.
              Hardwick, "Conveying Path Setup Type in PCE Communication
              Protocol (PCEP) Messages", RFC 8408, DOI 10.17487/RFC8408,
              July 2018, <https://www.rfc-editor.org/info/rfc8408>.

   [RFC8664]  Sivabalan, S., Filsfils, C., Tantsura, J., Henderickx, W.,
              and J. Hardwick, "Path Computation Element Communication
              Protocol (PCEP) Extensions for Segment Routing", RFC 8664,
              DOI 10.17487/RFC8664, December 2019,
              <https://www.rfc-editor.org/info/rfc8664>.

   [RFC9050]  Li, Z., Peng, S., Negi, M., Zhao, Q., and C. Zhou, "Path
              Computation Element Communication Protocol (PCEP)
              Procedures and Extensions for Using the PCE as a Central
              Controller (PCECC) of LSPs", RFC 9050,
              DOI 10.17487/RFC9050, July 2021,
              <https://www.rfc-editor.org/info/rfc9050>.

   [RFC9168]  Dhody, D., Farrel, A., and Z. Li, "Path Computation
              Element Communication Protocol (PCEP) Extension for Flow
              Specification", RFC 9168, DOI 10.17487/RFC9168, January
              2022, <https://www.rfc-editor.org/info/rfc9168>.

Authors' Addresses

   Ran Chen
   ZTE Corporation
   Nanjing
   China
   Email: chen.ran@zte.com.cn




Chen, et al.            Expires 7 September 2022               [Page 10]

Internet-Draft                PCECC BIER-TE                   March 2022


   BenChong Xu
   ZTE Corporation
   Nanjing
   China
   Email: xu.benchong@zte.com.cn


   Chun Zhu
   ZTE Corporation
   Nanjing
   China
   Email: zhu.chun@zte.com.cn


   Huaimo Chen
   Futurewei
   Nanjing,
   United States of America
   Email: Huaimo.chen@futurewei.com


   Aijun Wang
   China Telecom
   Nanjing
   China
   Email: wangaj3@chinatelecom.cn

























Chen, et al.            Expires 7 September 2022               [Page 11]
