<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Diameter Parameter Query</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Diameter Parameter Query">
<meta name="keywords" content="Internet-Draft">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Diameter Maintenance and</td><td class="header">J. Winterbottom</td></tr>
<tr><td class="header">Extensions (DIME)</td><td class="header">Andrew Corporation</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">H. Tschofenig</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">Nokia Siemens Networks</td></tr>
<tr><td class="header">Expires: April 22, 2010</td><td class="header">R. Bellis</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Nominet UK</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">October 19, 2009</td></tr>
</table></td></tr></table>
<h1><br />Diameter Parameter Query<br />draft-winterbottom-dime-param-query-00.txt</h1>

<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on April 22, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents in effect on the date of
publication of this document (http://trustee.ietf.org/license-info).
Please review these documents carefully, as they describe your
rights and restrictions with respect to this document.</p>

<h3>Abstract</h3>

<p>In an emergency services environment a Location Information Server (LIS) receives requests
        from end hosts, SIP proxies or Public Safety Answering Points (PSAPs). When receiving these
        requests a LIS has to perform a location determination procedure that depends on the
        specific network deployment. In any case, an interation with other network elements is
        needed, particularly with AAA servers, that store information about the current attachment
        of the end host.
</p>
<p>This document descirbes a Diameter application, called Diameter Parameter Query, which
        allows a Location Information Server to interact with a Diameter server to obtain
        information needed for the location determination procedure. The style of the described
        Diameter application offers flexibility for different deployments.
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#introduction">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor1">1.1.</a>&nbsp;
Application Identifiers<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">1.2.</a>&nbsp;
Session Management<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">1.3.</a>&nbsp;
Accounting<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#Command-Code-Values">1.4.</a>&nbsp;
Command Codes<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">1.4.1.</a>&nbsp;
Diameter-PQ-Request<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">1.4.2.</a>&nbsp;
Diameter-PQ-Answer<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#avps">1.5.</a>&nbsp;
AVPs<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">1.5.1.</a>&nbsp;
IP-Address AVP<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">1.5.2.</a>&nbsp;
Requested-Info AVP<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">1.5.3.</a>&nbsp;
AVP-Code AVP<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">1.5.4.</a>&nbsp;
Vendor-ID AVP<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#result">1.6.</a>&nbsp;
Result-Code AVP Values<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">1.6.1.</a>&nbsp;
Success<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">1.6.2.</a>&nbsp;
Permanent Failures<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">1.7.</a>&nbsp;
AVP Occurrence Tables<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">1.8.</a>&nbsp;
PQR/PQA AVP/Command-Code Table<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">1.9.</a>&nbsp;
IANA Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">1.9.1.</a>&nbsp;
Command Codes<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor16">1.9.2.</a>&nbsp;
AVP Codes<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor17">1.10.</a>&nbsp;
Application Identifier<br />
<a href="#example">2.</a>&nbsp;
Example<br />
<a href="#SecurityConsiderations">3.</a>&nbsp;
Security Considerations<br />
<a href="#anchor18">4.</a>&nbsp;
Acknowledgements<br />
<a href="#rfc.references1">5.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">5.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">5.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="introduction"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>The AAA backend infrastructure stores information about various device related
        interactions, such as network attachments, accounting streams, etc. In certain cases, parts
        of this information needs to be shared with other entities in the operators network to
        provide smooth network operation. An example of this interaction is when a Location Server
        is deployed in an IP-based network and needs to obtain information about the users point of
        attachment to make location information for emergency services. This document describes how
        such a Diameter based interface can help a location server to query inforation from the
        backend infrastructure. In particular, it allows the query to contain the IP address of the
        device and to request information about 
</p>
<p>
        <a class='info' href='#arch'>Figure&nbsp;1<span> (</span><span class='info'>Example Instantiation of involved Entities</span><span>)</span></a> shows an example of how the Diameter interface used in this document
        can be used by a Location Server receiving a request to query a Diameter Server.
</p><br /><hr class="insert" />
<a name="arch"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                                     +--------+
                                     |Diameter|
                                     |Server  |
                                     +--------+
                                         ^
                                Back-End | Diameter Parameter
                                Protocol | Query / Response
                                Support  | Interaction
                                         | (this document)
                                         v
 +------------+                      +---------------+
 | Emergency  |  Front-End Protocol  |Location Server|
 | Service    |&lt;--------------------&gt;|Diameter Client|
 | Routing    |  Example: HELD       +---------------+
 | Proxy /    |
 | Public     |
 | Safety     |
 | Answering  |
 | Point      |
 +------------+
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: Example Instantiation of involved Entities&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Application Identifiers</h3>

<p>This specification defines a Diameter applications and their respective Application
          Identifiers: 
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   Diameter Parameter Query   (DPQ)  TBD by IANA

</pre></div>
<p>The DPQ Application Identifier is used when a Diameter client utilizes the Diameter
          Parameter Query Request and Response messages. 
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.2"></a><h3>1.2.&nbsp;
Session Management</h3>

<p>The Diameter server is stateless in the protocol interaction described by this document.
          As such, the Session-Termination-Request (STR), the Session-Termination-Answer (STA),
          Abort-Session-Request (ASR) nor the Abort-Session-Answer (ASA) message is used by this
          Diameter application.
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.3"></a><h3>1.3.&nbsp;
Accounting</h3>

<p>This Diameter application does not make use of accounting. Hence, the Accounting-Request
          and the Accounting-Answer message is not used. 
</p>
<a name="Command-Code-Values"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.4"></a><h3>1.4.&nbsp;
Command Codes</h3>

<p>The DQP application uses two command codes as shown below. <br /><hr class="insert" />
<a name="cmd-eap"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Command-Name          Abbrev. Code  Reference    Application
---------------------------------------------------------------------
Diameter-PQ-Request    PQR     TBD  This doc.    DPQ
Diameter-PQ-Answer     PQA     TBD  This doc.    DPQ
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: Command Codes&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

        
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.4.1"></a><h3>1.4.1.&nbsp;
Diameter-PQ-Request</h3>

<p>The Diameter-PQ-Request (PQR) message, indicated by the Command-Code field set to TBD
            and the 'R' bit set in the Command Flags field, is sent by the Diameter Client to the
            Diameter server to query for parameters. This Diameter application builds on top of
            Diameter NASREQ. 
</p>
<p>
            </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;Diameter-PQ-Request&gt; ::= &lt; Diameter Header: TBD, REQ, PXY &gt;
                           &lt; Session-Id &gt;
                           { Auth-Application-Id }
                           { Origin-Host }
                           { Origin-Realm }
                           { Destination-Realm }
                           { Auth-Request-Type }
                           [ Destination-Host ]
                           [ NAS-Identifier ]
                           [ NAS-IP-Address ]
                           [ NAS-IPv6-Address ]
                           [ NAS-Port-Type ]
                           ...
                           Diameter NASREQ defined AVPs
                           ...
                           { Device-Identity }
                         * [ Requested-Info ]
                         * [ AVP ]
</pre></div><p>

          
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.4.2"></a><h3>1.4.2.&nbsp;
Diameter-PQ-Answer</h3>

<p>The Diameter-PQ-Answer (PQA) message, indicated by the Command-Code field set to TBD
            and 'R' bit cleared in the Command Flags field, is sent in response to the
            Diameter-PQ-Request message. The Application-Id field in the Diameter message header
            MUST be set to DPQ Application-Id (value of TBD). 
</p>
<p>
            </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;Diameter-PQ-Answer&gt; ::= &lt; Diameter Header: TBD, REQ, PXY &gt;
                          &lt; Session-Id &gt;
                          { Auth-Application-Id }
                          { Auth-Request-Type }
                          { Result-Code }
                          { Origin-Host }
                          { Origin-Realm }
                           ...
                           Diameter NASREQ defined AVPs
                           ...
                          { Device-Identity }
                        * [ AVP ]
</pre></div><p>

          
</p>
<p>In case of a successful processing of the request the desired AVPs as indicated in the
            Requested-Info AVPs are returned. 
</p>
<a name="avps"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.5"></a><h3>1.5.&nbsp;
AVPs</h3>

<p>This document re-uses AVPs defined in Diameter NASREQ (RFC 4005 <a class='info' href='#RFC4005'>[RFC4005]<span> (</span><span class='info'>Calhoun, P., Zorn, G., Spence, D., and D. Mitton, &ldquo;Diameter Network Access Server Application,&rdquo; August&nbsp;2005.</span><span>)</span></a>). Additionally, the following AVPs are used as shown in the table below. 
</p>
<p>
          <br /><hr class="insert" />
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                                          +--------------------+
                                          |   AVP Flag rules   |
                                          +----+---+------+----+----+
                 AVP  Defined             |    |   |SHOULD|MUST|MAY |
 Attribute Name  Code in       Value Type |MUST|MAY| NOT  | NOT|Encr|
+-----------------------------------------+----+---+------+----+----+
|Device-Identity TBD  TBD      Grouped    |  M | P |      | V  | Y  |
+-----------------------------------------+----+---+------+----+----+
|User-Name       1    RFC3588  UTF8String |  M | P |      | V  | Y  |
+-----------------------------------------+----+---+------+----+----+
|IP-Address      TBD  TBD      Address    |  M | P |      | V  | Y  |
+-----------------------------------------+----+---+------+----+----+
|Requested-Info  TBD  TBD      Grouped    |  M | P |      | V  | Y  |
+-----------------------------------------+----+---+------+----+----+
|AVP-Code        TBD  TBD      Integer32  |  M | P |      | V  | Y  |
+-----------------------------------------+----+---+------+----+----+
|Vendor-ID       TBD  TBD      Integer32  |  M | P |      | V  | Y  |
+-----------------------------------------+----+---+------+----+----+
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;AVPs for Mobile IPv6 IKE Application&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

        
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.5.1"></a><h3>1.5.1.&nbsp;
IP-Address AVP</h3>

<p>The IP-Address AVP (AVP Code TBD) is of type Address and contains IPv6 or IPv4 address
            of the device. 
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.5.2"></a><h3>1.5.2.&nbsp;
Requested-Info AVP</h3>

<p>The Requested-Info AVP (AVP Code TBD) is of type grouped and is defined as shown below: </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;Requested-Info&gt; ::= &lt; AVP Header: TBD &gt;
                      { AVP-Code }
                      [ Vendor-ID ]
</pre></div><p>

          
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.5.3"></a><h3>1.5.3.&nbsp;
AVP-Code AVP</h3>

<p>The AVP-Code AVP (AVP Code TBD) is of type Integer32 and contains the Diameter AVP
            code. 
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.5.4"></a><h3>1.5.4.&nbsp;
Vendor-ID AVP</h3>

<p>The Vendor-ID AVP (AVP Code TBD) is of type Integer32 and contains the vendor id of a
            Diameter AVP. 
</p>
<a name="result"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.6"></a><h3>1.6.&nbsp;
Result-Code AVP Values</h3>

<p>This section defines new Result-Code <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a> values that MUST be
          supported by all Diameter implementations that conform to this specification.
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.6.1"></a><h3>1.6.1.&nbsp;
Success</h3>

<p>Errors that fall within the Success category are used to inform a peer that a request
            has been successfully completed. 
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.6.2"></a><h3>1.6.2.&nbsp;
Permanent Failures</h3>

<p>Errors that fall within the permanent failures category are used to inform the peer
            that the request failed and SHOULD NOT be attempted again. 
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.7"></a><h3>1.7.&nbsp;
AVP Occurrence Tables</h3>

<p>The following tables present the AVPs defined in this document and their occurrences in
          Diameter messages. Note that AVPs that can only be present within a Grouped AVP are not
          represented in this table.
</p>
<p>The table uses the following symbols:
</p>
<p>
          </p>
<blockquote class="text"><dl>
<dt>0:</dt>
<dd><br />
The AVP MUST NOT be present in the
                message.<br />
<br />

</dd>
<dt>0+:</dt>
<dd><br />
Zero or more instances of the AVP MAY be
              present in the message.<br />
<br />

</dd>
<dt>0-1:</dt>
<dd><br />
Zero or one instance of the AVP MAY be
              present in the message.<br />
<br />

</dd>
<dt>1:</dt>
<dd><br />
One instance of the AVP MUST be present in the
              message. 
</dd>
</dl></blockquote><p>
        
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.8"></a><h3>1.8.&nbsp;
PQR/PQA AVP/Command-Code Table</h3>

<p>
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>

                                  +-----------------------+
                                  |     Command-Code      |
                                  |-----+-----+-----------+
   AVP Name                       | PQR | PQA |
   -------------------------------|-----+-----+
   Device-Identity                |  1  |  1  |
   Requested-Info                 |  0+ |  0  |
                                  +-----+-----+
</pre></div><p>

        
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.9"></a><h3>1.9.&nbsp;
IANA Considerations</h3>

<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.9.1"></a><h3>1.9.1.&nbsp;
Command Codes</h3>

<p> IANA is requested to allocate a command code value for the following new commands from
            the Command Code namespace defined in <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>. See <a class='info' href='#Command-Code-Values'>Section&nbsp;1.4<span> (</span><span class='info'>Command Codes</span><span>)</span></a> for the assignment of the namespace in this
            specification. 
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Command Code                       | Value
-----------------------------------+------
Diameter-PQ-Request (PQR)          | TBD
Diameter-PQ-Answer (PQA)           | TBD

</pre></div>
<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.9.2"></a><h3>1.9.2.&nbsp;
AVP Codes</h3>

<p> This specification requires IANA to register the following new AVPs from the AVP Code
            namespace defined in <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>.<br />
<br />

            </p>
<ul class="text">
<li>Device-Identity
</li>
<li>IP-Address
</li>
<li>Requested-Info
</li>
<li>AVP-Code
</li>
<li>Vendor-ID
</li>
</ul><br />
<br />
<p>The AVPs are defined in <a class='info' href='#avps'>Section&nbsp;1.5<span> (</span><span class='info'>AVPs</span><span>)</span></a>. 
</p>
<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.10"></a><h3>1.10.&nbsp;
Application Identifier</h3>

<p> This specification requires IANA to allocate a new Diameter Application "Diameter
          Parameter Query (DPQ)" from the Application Identifier namespace defined in <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>. 
</p>
<a name="example"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Example</h3>

<p>The following example shows a request with an IP address and User-Name as the device
        identity asking for the Callback-Number AVP defined in RFC 2865 <a class='info' href='#RFC2865'>[RFC2865]<span> (</span><span class='info'>Rigney, C., Willens, S., Rubens, A., and W. Simpson, &ldquo;Remote Authentication Dial In User Service (RADIUS),&rdquo; June&nbsp;2000.</span><span>)</span></a> to
        be returned. 
</p>
<p>
        <br /><hr class="insert" />
<a name="example-fig"></a>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Diameter                                                    Diameter
Client                                                        Server
 |                                                                 |
 |  Diameter-PQ-Request                                            |
 |  Device-Identity=(IP-Address=...,User-Name=...)                 |
 |  Requested-Info=(AVP-Code=19)                                   |
 |----------------------------------------------------------------&gt;|
 |                                                                 |
 |                                                                 |
 |                Diameter-PQ-Answer                               |
 |                Device-Identity=(IP-Address=...)                 |
 |                Callback-Number(...)                             |
 |&lt;----------------------------------------------------------------|
 |                                                                 |
</pre></div><p>
<table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3: Example Exchange&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

      
</p>
<a name="SecurityConsiderations"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Security Considerations</h3>

<p> AAA servers MUST prevent exposure of information (particularly the mapping of IP address
        to the subscriber information like identity or some form of location information, which can
        be an invasion of the subscribers privacy) by employing access control techniques. A
        pre-requisity of this authorization step is authentication, which is provided by the
        Diameter base specification <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>. Furthermore, it is recommended that a
        AAA server configuration is available to control the granularity of the information exchange
        to restrict the exposure of information to those attributes previously agreed on between the
        involved parties, namely the Diameter client, the Diameter server and the subscriber as the
        owner of the information. The latter aspect is particularly important since the distribution
        of information for a stated purpose requires explicit consent of the subscriber since is a
        regulatory requirement in many juristictions. Because of the strong security requirements
        stated above it is envisioned that the Diameter application described in this document is
        used only between two entities belonging to the same administrative domain. Distributed
        denial of service attacks against the Diameter by repeated requests from the Diameter client
        are not considered a threat since the Diameter client will be known to the Diameter server
        once cryptographic authentication, using TLS or IPsec as described in <a class='info' href='#RFC3588'>[RFC3588]<span> (</span><span class='info'>Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;Diameter Base Protocol,&rdquo; September&nbsp;2003.</span><span>)</span></a>, is completed. 
</p>
<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Acknowledgements</h3>

<p>Add your name here. 
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>5.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3588">[RFC3588]</a></td>
<td class="author-text">Calhoun, P., Loughney, J., Guttman, E., Zorn, G., and J. Arkko, &ldquo;<a href="http://tools.ietf.org/html/rfc3588">Diameter Base Protocol</a>,&rdquo; RFC&nbsp;3588, September&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3588.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4005">[RFC4005]</a></td>
<td class="author-text">Calhoun, P., Zorn, G., Spence, D., and D. Mitton, &ldquo;<a href="http://tools.ietf.org/html/rfc4005">Diameter Network Access Server Application</a>,&rdquo; RFC&nbsp;4005, August&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4005.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>5.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2865">[RFC2865]</a></td>
<td class="author-text">Rigney, C., Willens, S., Rubens, A., and W. Simpson, &ldquo;<a href="http://tools.ietf.org/html/rfc2865">Remote Authentication Dial In User Service (RADIUS)</a>,&rdquo; RFC&nbsp;2865, June&nbsp;2000 (<a href="http://www.rfc-editor.org/rfc/rfc2865.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">James Winterbottom</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Andrew Corporation</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Andrew Building (39)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">University of Wollongong, NSW  2500</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">AU</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:james.winterbottom@andrew.com">james.winterbottom@andrew.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Hannes Tschofenig</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nokia Siemens Networks</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Linnoitustie 6</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Espoo  FIN-02600</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+358 (50) 4871445</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:Hannes.Tschofenig@gmx.net">Hannes.Tschofenig@gmx.net</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.tschofenig.priv.at">http://www.tschofenig.priv.at</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Ray Bellis</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Nominet UK</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Edmund Halley Road</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Oxford  OX4 4DQ</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">United Kingdom</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+44 1865 332211</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:ray.bellis@nominet.org.uk">ray.bellis@nominet.org.uk</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.nominet.org.uk/">http://www.nominet.org.uk/</a></td></tr>
</table>
</body></html>
