

SIPPING                                                          V. Hilt
Internet-Draft                                                 Bell Labs
Expires: November 12, 2004                                  G. Camarillo
                                                                Ericsson
                                                            May 14, 2004



        Considerations for Session-specific SIP Session Policies
                 draft-hilt-sipping-consider-policy-00


Status of this Memo


   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.


   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups. Note that other
   groups may also distribute working documents as Internet-Drafts.


   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time. It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."


   The list of current Internet-Drafts can be accessed at http://
   www.ietf.org/ietf/1id-abstracts.txt.


   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.


   This Internet-Draft will expire on November 12, 2004.


Copyright Notice


   Copyright (C) The Internet Society (2004). All Rights Reserved.


Abstract


   This draft intends to trigger discussions within the SIP community on
   how to implement session-specific policies in SIP. In particular, we
   discuss why the piggyback model, which was proposed previously, does
   not meet important requirements.











Hilt & Camarillo       Expires November 12, 2004                [Page 1]
Internet-Draft    Considerations for Session Policies           May 2004



Table of Contents


   1.   Introduction . . . . . . . . . . . . . . . . . . . . . . . . . 3
   2.   Requirements which are not Met by the Piggyback Model  . . . . 3
   3.   Sending Intructions  . . . . . . . . . . . . . . . . . . . . . 4
   4.   Disclosing Information . . . . . . . . . . . . . . . . . . . . 4
   5.   Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . 5
   6.   References . . . . . . . . . . . . . . . . . . . . . . . . . . 5
        Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . 6
        Intellectual Property and Copyright Statements . . . . . . . . 7










































Hilt & Camarillo       Expires November 12, 2004                [Page 2]
Internet-Draft    Considerations for Session Policies           May 2004



1.  Introduction


   The concept of session-specific SIP session policies has been around
   for some time. However, it has been proven that the mechanisms for
   establishing session-specific policies are non-trivial and most
   likely require to sacrifice some of the requirements defined in [1].


   Session-specific policies involve two main operations:


   1.  A UA disclose information about the offer/answer exchange to a
       proxy.
   2.  The proxy sends instructions to the UA.


   Some types of policies do not involve sending intructions, but only
   information disclosure (e.g., a proxy opening pin holes in a firewall
   for media streams). Still, a general session-specific policy
   mechanism needs to support both operations.


   The same way, some proxies only need to inspect the offer, but not
   the answer. Nevertheless, a general mechanism needs to consider
   proxies which need to inspect both.


2.  Requirements which are not Met by the Piggyback Model


   The piggyback model, which was proposed some time ago, attemped to
   perform both operations described previously (disclosing information
   and sending instructions) by piggybacking information into the
   INVITE-200 OK-ACK messages.


   The piggyback model has two major drawbacks that make it unsuitable
   as a general mechanism for session-specific policies:


   1.  It assumes that both UAs understand session-specific policies.
       That is, the UAS needs to apply the policies that the UAC's proxy
       proposes.
   2.  It does not support policy changes for ongoing sessions. That is,
       proxies can only send information to the UAs when these happen to
       exchange a SIP message for some reason. The proxy cannot initiate
       a transaction towars the UAs (e.g., you can now use G.711 if you
       want).


   In other words, the piggyback model does not meet two important
   requirements: support by one of the UAs should be enough and dynamic
   policy changes should be supported.


   The next sections discuss some alternatives to perform both
   operations, (disclosing information and sending instructions).





Hilt & Camarillo       Expires November 12, 2004                [Page 3]
Internet-Draft    Considerations for Session Policies           May 2004



3.  Sending Intructions


   In order to support policy changes during ongoing sessions, the proxy
   and its UA need to establish a separate channel. The proxy would use
   this channel to send instructions to the UA.


   Having the UA SUBSCRIBE to the proxy's policy event package seems
   like a sensible solution. We would use the same mechanism as we
   already use for session-independent policies, and we would meet the
   requirement above.


   If the UA is already subscribed to session-independent policies, it
   could receive the session-specific policies over the same
   subscription. If the UA is not subscribed, the proxy needs to provide
   the UA with a URI to send the SUBSCRIBE.


   The proxy could use a header field or a body part in a 4xx response
   to the INVITE (for the UAC) or in the INVITE itself (for the UAS). We
   would need m2e security for the UAS case.


4.  Disclosing Information


   There are four possible scenarios regarding information disclosure:


   1.  Figure 1: offer in INVITE and B does not support session
       policies. That is, P provides policies for A.
   2.  Figure 1: offer in INVITE and A does not support session
       policies. That is, P provides policies for B.
   3.  Figure 2: empty INVITE and B does not support session policies.
       That is, P provides policies for A.
   4.  Figure 2: empty INVITE and A does not support session policies.
       That is, P provides policies for B.



     A                    P                    B
     |   INVITE (offer)   |                    |
     |------------------->|   INVITE (offer)   |
     |                    |------------------->|
     |                    |   200 OK (answer)  |
     |   200 OK (answer)  |<-------------------|
     |<-------------------|                    |
     |       ACK          |                    |
     |------------------->|        ACK         |
     |                    |------------------->|


                                Figure 1






Hilt & Camarillo       Expires November 12, 2004                [Page 4]
Internet-Draft    Considerations for Session Policies           May 2004



     A                    P                    B
     |       INVITE       |                    |
     |------------------->|       INVITE       |
     |                    |------------------->|
     |                    |   200 OK (offer)   |
     |   200 OK (offer)   |<-------------------|
     |<-------------------|                    |
     |     ACK (answer)   |                    |
     |------------------->|     ACK (answer)   |
     |                    |------------------->|


                                Figure 2


   The discussion here is whether we want to use the piggyback model to
   disclose information to the proxy or we want to use a separate
   channel as well.


   In scenario 2 (offer in INVITE and A does not support session
   policies), if we use the piggyback model B needs to generate a 200 OK
   with a dummy answer and an object intended for P. P will receive the
   200 OK, open the object, get the information it needs, and send
   instructions to B using the separate channel (e.g., a NOTIFY). B,
   then, would need to re-INVITE or UPDATE.


   If we used a separate channel instead, B would contact P using the
   separate channel to send P the information it needs.


   At this point, a good discussion topic is: if we decide to use a
   separate channel, what could that channel be? Adding information to a
   SUBSCRIBE request to P's URI could do the job, but it does not seem a
   nice solution. A different protocol than SIP?


   In scenario 4 (empty INVITE and A does not support session policies),
   using a separate channel would allow B to contact P before generating
   the offer. Additionally, if B needs to disclose part of the answer to
   P, it could do it using the separate channel without needing to
   re-INVITE or UPDATE.


5.  Acknowledgements


   Many thanks to Jonathan Rosenberg who initiated the policy work. A
   big thanks also to Allison Mankin and Markus Hofmann for their
   contributions to the policy discussion.


6  References


   [1]  Rosenberg, J., "Requirements for Session Policy for the Session
        Initiation Protocol  (SIP)",




Hilt & Camarillo       Expires November 12, 2004                [Page 5]
Internet-Draft    Considerations for Session Policies           May 2004



        draft-ietf-sipping-session-policy-req-01 (work in progress),
        February 2004.



Authors' Addresses


   Volker Hilt
   Bell Labs
   101 Crawfords Corner Rd
   Holmdel, NJ  07733
   USA


   EMail: volkerh@bell-labs.com



   Gonzalo Camarillo
   Ericsson
   Hirsalantie 11
   Jorvas  02420
   Finland


   EMail: Gonzalo.Camarillo@ericsson.com






























Hilt & Camarillo       Expires November 12, 2004                [Page 6]
Internet-Draft    Considerations for Session Policies           May 2004



Intellectual Property Statement


   The IETF takes no position regarding the validity or scope of any
   intellectual property or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; neither does it represent that it
   has made any effort to identify any such rights. Information on the
   IETF's procedures with respect to rights in standards-track and
   standards-related documentation can be found in BCP-11. Copies of
   claims of rights made available for publication and any assurances of
   licenses to be made available, or the result of an attempt made to
   obtain a general license or permission for the use of such
   proprietary rights by implementors or users of this specification can
   be obtained from the IETF Secretariat.


   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights which may cover technology that may be required to practice
   this standard. Please address the information to the IETF Executive
   Director.



Full Copyright Statement


   Copyright (C) The Internet Society (2004). All Rights Reserved.


   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works. However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.


   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assignees.


   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION




Hilt & Camarillo       Expires November 12, 2004                [Page 7]
Internet-Draft    Considerations for Session Policies           May 2004



   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.



Acknowledgment


   Funding for the RFC Editor function is currently provided by the
   Internet Society.












































Hilt & Camarillo       Expires November 12, 2004                [Page 8]