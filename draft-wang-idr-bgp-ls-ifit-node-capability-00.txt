



Interdomain Routing Working Group                           Y. Wang, Ed.
Internet-Draft                                              T. Zhou, Ed.
Intended status: Standards Track                                  Huawei
Expires: August 29, 2020                               February 26, 2020


       Extensions to BGP-LS for Advertising IFIT Node Capability
             draft-wang-idr-bgp-ls-ifit-node-capability-00

Abstract

   This document defines a way for an a Border Gateway Protocol Link-
   State (BGP-LS) speaker to announce IFIT node capabilities of routers
   to BGP-LS consumer.  In this document, IFIT Node Capability TLV is
   defined as a new Node Attribute TLV that is encoded in the BGP-LS
   attribute with Node NLRIs [RFC7752].  Such advertisements enable IFIT
   applications in an operational network domain.

Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC2119].

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on August 29, 2020.

Copyright Notice

   Copyright (c) 2020 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents



Wang & Zhou              Expires August 29, 2020                [Page 1]

Internet-Draftdraft-wang-idr-bgp-ls-ifit-node-capability-00February 2020


   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
     1.1.  Terminology . . . . . . . . . . . . . . . . . . . . . . .   3
   2.  Concepts  . . . . . . . . . . . . . . . . . . . . . . . . . .   3
     2.1.  IFIT Domain . . . . . . . . . . . . . . . . . . . . . . .   3
     2.2.  IFIT Node Capability Information  . . . . . . . . . . . .   3
   3.  Advertisement of the IFIT Node Capabilities via BGP-LS  . . .   3
     3.1.  IFIT Node Capability TLV  . . . . . . . . . . . . . . . .   3
   4.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   5
     4.1.  TLV Code Point of the new IFIT Node Capability TLV within
           Node NLRIs  . . . . . . . . . . . . . . . . . . . . . . .   5
   5.  Security Considerations . . . . . . . . . . . . . . . . . . .   5
   6.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   5
   7.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   5
     7.1.  Normative References  . . . . . . . . . . . . . . . . . .   5
     7.2.  Informative References  . . . . . . . . . . . . . . . . .   6
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   6

1.  Introduction

   IFIT provides a complete framework architecture and a reflection-loop
   working solution for on-path flow telemetry
   [I-D.song-opsawg-ifit-framework].  At present, there are a family of
   emerging on-path flow telemetry techniques, including In-situ OAM
   (IOAM) [I-D.ietf-ippm-ioam-data], PBT
   [I-D.song-ippm-postcard-based-telemetry] , IOAM Direct Export (DEX)
   [I-D.ioamteam-ippm-ioam-direct-export] , Enhanced Alternate Marking
   (EAM) [I-D.zhou-ippm-enhanced-alternate-marking], etc.  IFIT is a
   solution focusing on network domains.  The "network domain" consists
   of a set of network devices or entities within a single
   administration.  For example, a network domain can be one or more IGP
   routing domains.  The family of emerging on-path flow telemetry
   techniques may be selectively or partially implemented in different
   vendors' devices as an emerging feature for various use cases of
   application-aware network operations.  Hence, in order to enable IFIT
   applications in an operational network domain, IFIT node capabilities
   SHOULD be advertised by every Intermediate System to Intermediate
   System (IS-IS) router in the network domain.




Wang & Zhou              Expires August 29, 2020                [Page 2]

Internet-Draftdraft-wang-idr-bgp-ls-ifit-node-capability-00February 2020


   BGP-LS defines a way to advertise topology and associated attributes
   and capabilities of the nodes in that topology to a centralized
   controller [RFC7752].  This document defines extensions to BGP-LS to
   advertise the IFIT node capabilities to BGP-LS consumers.

1.1.  Terminology

   BGP-LS: Advertisement of Link-State and TE Information using Border
   Gateway Protocol

2.  Concepts

2.1.  IFIT Domain

   IFIT is expected to be deployed in a specific domain referred as the
   IFIT domain.  An IFIT domain may cross multiple network domains.  One
   network domain may consists of multiple IFIT domain.  Within the IFIT
   domain, the IFIT data fields of flow information head MAY be updated
   by network nodes that the packet traverses.

2.2.  IFIT Node Capability Information

   Each IFIT node is configured with a node-id which uniquely identifies
   a node within the associated IFIT domain.  To accommodate the
   different use cases or requirements of in-situ flow information
   telemetry, IFIT data fields updated by network nodes fall into
   different categories which are referred as different IFIT option
   types, including IOAM Trace Option-Types [I-D.ietf-ippm-ioam-data],
   IOAM Edge-to-Edge (E2E) Option-Type [I-D.ietf-ippm-ioam-data], IOAM
   DEX Option-Type [I-D.ioamteam-ippm-ioam-direct-export] and Enhanced
   Alternate Marking (EAM) Option-Type
   [I-D.zhou-ippm-enhanced-alternate-marking].  So IFIT Option Types
   SHOULD be carried in IFIT node capability advertisment.

3.  Advertisement of the IFIT Node Capabilities via BGP-LS

   This document describes extensions enabling BGP-LS speakers to
   announce the IFIT node capabilities of routers in a network to a BGP-
   LS consumer (e.g. a centralized controller).  The centralized
   controller can leverage this information in enabling IFIT
   applications in network domains based on IFIT node capabilities and
   OAM use cases.

3.1.  IFIT Node Capability TLV

   IFIT Node-Capability TLV is defined as a new Node Attribute TLV that
   is encoded in the BGP-LS attribute with Node NLRIs [RFC7752].  The
   IFIT Node Capability TLV is defined as a TLV triplet, i.e. a two-



Wang & Zhou              Expires August 29, 2020                [Page 3]

Internet-Draftdraft-wang-idr-bgp-ls-ifit-node-capability-00February 2020


   octet Type field, a two-octet Length field, and 4-octet Value field.
   The Type field indicates the type of items in the Value field.  The
   Length field indicates the length of the Value field in octets.  The
   Value field indicates the IFIT Node Capability, which is a 4-octet
   IFIT Option Type-enabled Flag bitmap.

   The IFIT Node capability TLV has the following format:

        0                   1                   2                   3
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-------------------------------+-------------------------------+
       |               Type            |            Length             |
       +---------------------------------------------------------------+
       |                 IFIT Option Type-enabled Flag                 |
       +---------------------------------------------------------------+


                  Fig. 1 IFIT Node Capability TLV Format

   Type: To be assigned by IANA

   Length: A 8-bit field that indicates the length of the value portion
   in octets and will be a multiple of 4 octets dependent on the number
   of capabilities advertised.

   IFIT Option Type-enabled Flag: A 4-octet field, which is defined as
   following:

        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +---------------------------------------------------------------+
       |p|i|d|e|m|                       Reserved                      |
       +---------------------------------------------------------------+


   Where:

   p-Flag: IOAM Pre-allocated Trace Option Type-enabled flag.  If p bit
   is set (1), the router is capable of IOAM Pre-allocated Trace
   [I-D.ietf-ippm-ioam-data].

   i-Flag: IOAM Incremental Trace Option Type-enabled flag.  If i bit is
   set (1), the router is capable of IOAM Incremental Tracing
   [I-D.ietf-ippm-ioam-data].

   d-Flag: IOAM DEX Option Type-enabled flag.  If d bit is set (1), the
   router is capable of IOAM DEX [I-D.ioamteam-ippm-ioam-direct-export].





Wang & Zhou              Expires August 29, 2020                [Page 4]

Internet-Draftdraft-wang-idr-bgp-ls-ifit-node-capability-00February 2020


   e-Flag: IOAM E2E Option Type-enabled flag.  If e bit is set (1), the
   router is capable of IOAM E2E processing [I-D.ietf-ippm-ioam-data].

   m-Flag: Enhanced Alternative Marking enabled flag.  If m bit is set
   (1), then the router is capable of processing Enhanced Alternative
   Marking packets [I-D.zhou-ippm-enhanced-alternate-marking].

   Reserved: Must be set to zero upon transmission and ignored upon
   receipt.

   An IFIT node SHALL be capable of more than one IFIT option types.  So
   in this case, IFIT Option Type-enabled Flag bitmap SHOULD has more
   than one bit being set.

4.  IANA Considerations

   Note to RFC Editor: this section may be removed on publication as an
   RFC.

4.1.  TLV Code Point of the new IFIT Node Capability TLV within Node
      NLRIs

   This document makes the following registrations for a Node Attribute
   TLV code point for the IFIT Node Capability TLV included with Node
   NLRIs.

                   +------------+----------------------+
                   | Code Point | Description          |
                   +------------+----------------------+
                   | TBD        | IFIT Node Capability |
                   +------------+----------------------+

5.  Security Considerations

   This document introduces new Node Attribute TLVs for the existing
   Node NLRIs.  It does not introduce any new security risks to BGP-LS.

6.  Acknowledgements

7.  References

7.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.




Wang & Zhou              Expires August 29, 2020                [Page 5]

Internet-Draftdraft-wang-idr-bgp-ls-ifit-node-capability-00February 2020


   [RFC5305]  "IS-IS Extensions for Traffic Engineering",
              <https://www.rfc-editor.org/info/rfc5305>.

   [RFC7752]  "North-Bound Distribution of Link-State and Traffic
              Engineering (TE) Information Using BGP",
              <https://datatracker.ietf.org/doc/rfc7752/>.

7.2.  Informative References

   [I-D.ietf-ippm-ioam-data]
              "Data Fields for In-situ OAM".

   [I-D.ioamteam-ippm-ioam-direct-export]
              "In-situ OAM Direct Exporting",
              <https://datatracker.ietf.org/doc/draft-ioamteam-ippm-
              ioam-direct-export/>.

   [I-D.song-ippm-postcard-based-telemetry]
              "Postcard-based On-Path Flow Data Telemetry",
              <https://datatracker.ietf.org/doc/draft-song-ippm-
              postcard-based-telemetry/>.

   [I-D.song-opsawg-ifit-framework]
              "In-situ Flow Information Telemetry Framework",
              <https://datatracker.ietf.org/doc/draft-song-opsawg-ifit-
              framework/>.

   [I-D.zhou-ippm-enhanced-alternate-marking]
              "Enhanced Alternate Marking Method",
              <https://datatracker.ietf.org/doc/draft-zhou-ippm-
              enhanced-alternate-marking/>.

Authors' Addresses

   Yali Wang (editor)
   Huawei
   156 Beiqing Rd., Haidian District
   Beijing
   China

   Email: wangyali11@huawei.com










Wang & Zhou              Expires August 29, 2020                [Page 6]

Internet-Draftdraft-wang-idr-bgp-ls-ifit-node-capability-00February 2020


   Tianran Zhou (editor)
   Huawei
   156 Beiqing Rd., Haidian District
   Beijing
   China

   Email: zhoutianran@huawei.com












































Wang & Zhou              Expires August 29, 2020                [Page 7]
