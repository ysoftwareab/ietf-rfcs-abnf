<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>RTCP XR Report Block for Packet Delay Variation Metric Reporting</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="RTCP XR Report Block for Packet Delay Variation Metric Reporting">
<meta name="keywords" content="RFC, Request for Comments, I-D, Internet-Draft, Real Time Control Protocol">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Audio/Video Transport Working</td><td class="header">G. Hunt</td></tr>
<tr><td class="header">Group</td><td class="header">BT</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">A. Clark</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">Telchemy</td></tr>
<tr><td class="header">Expires: October 30, 2009</td><td class="header">April 28, 2009</td></tr>
</table></td></tr></table>
<h1><br />RTCP XR Report Block for Packet Delay Variation Metric Reporting<br />draft-ietf-avt-rtcp-xr-pdv-02.txt</h1>

<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on October 30, 2009.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents in effect on the date of
publication of this document (http://trustee.ietf.org/license-info).
Please review these documents carefully, as they describe your
rights and restrictions with respect to this document.</p>

<h3>Abstract</h3>

<p>
   This document defines an RTCP XR Report Block that allows the
   reporting of Packet Delay Variation metrics for a range of RTP applications.
        
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#intro">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#intro1">1.1.</a>&nbsp;
Packet Delay Variation Metrics Block<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#intro2">1.2.</a>&nbsp;
RTCP and RTCP XR Reports<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#intro3">1.3.</a>&nbsp;
Performance Metrics Framework<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#intro4">1.4.</a>&nbsp;
Applicability<br />
<a href="#blockdef">2.</a>&nbsp;
Packet Delay Variation Metrics Block<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#blockdef1">2.1.</a>&nbsp;
Report Block Structure<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#blockdef2">2.2.</a>&nbsp;
Definition of Fields in PDV Metrics Block<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#guide">2.3.</a>&nbsp;
Guidance on use of PDV metrics<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#examples">2.4.</a>&nbsp;
Examples of use<br />
<a href="#sdp">3.</a>&nbsp;
SDP Signaling<br />
<a href="#anchor1">4.</a>&nbsp;
IANA Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">4.1.</a>&nbsp;
New RTCP XR Block Type value<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">4.2.</a>&nbsp;
New RTCP XR SDP Parameter<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">4.3.</a>&nbsp;
Contact information for registrations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#ianareg">4.4.</a>&nbsp;
New registry of PDV types<br />
<a href="#anchor5">5.</a>&nbsp;
Security Considerations<br />
<a href="#anchor6">6.</a>&nbsp;
Changes from previous version<br />
<a href="#rfc.references1">7.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">7.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">7.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="intro"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<a name="intro1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Packet Delay Variation Metrics Block</h3>

<p>
   This draft defines a new block type to augment those defined
   in <a class='info' href='#RFC3611'>[RFC3611]<span> (</span><span class='info'>Friedman, T., &ldquo;RTP Control Protocol Extended Reports (RTCP XR),&rdquo; November&nbsp;2003.</span><span>)</span></a>, for use in a range of RTP applications.

</p>
<p>
   The new block type provides information on Packet Delay Variation using one of several standard metrics.

</p>
<p>
The metrics belong to the class of transport metrics defined in [MONARCH] (work in progress).

</p>
<p>
Instances of this Metrics Block refer by tag to the separate auxiliary Measurement Identity block 
<a class='info' href='#MEASIDENT'>[MEASIDENT]<span> (</span><span class='info'>Hunt, G., &ldquo;RTCP XR Measurement Identifier Block,&rdquo; February&nbsp;2009.</span><span>)</span></a> which contains information 
such as the SSRC of the measured stream, and RTP sequence numbers and time intervals indicating the span of the report.

</p>
<a name="intro2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.2"></a><h3>1.2.&nbsp;
RTCP and RTCP XR Reports</h3>

<p>
   The use of RTCP for reporting is defined in <a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a>. 
   <a class='info' href='#RFC3611'>[RFC3611]<span> (</span><span class='info'>Friedman, T., &ldquo;RTP Control Protocol Extended Reports (RTCP XR),&rdquo; November&nbsp;2003.</span><span>)</span></a> defined an extensible structure for reporting using
   an RTCP Extended Report (XR).  This draft defines
   a new Extended Report block that MUST be used as defined in
   <a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a> and <a class='info' href='#RFC3611'>[RFC3611]<span> (</span><span class='info'>Friedman, T., &ldquo;RTP Control Protocol Extended Reports (RTCP XR),&rdquo; November&nbsp;2003.</span><span>)</span></a>.

</p>
<a name="intro3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.3"></a><h3>1.3.&nbsp;
Performance Metrics Framework</h3>

<p>
   The Performance Metrics Framework <a class='info' href='#PMOLFRAME'>[PMOLFRAME]<span> (</span><span class='info'>Clark, A., &ldquo;Framework for Performance Metric Development,&rdquo; July&nbsp;2008.</span><span>)</span></a> provides guidance on the
   definition and specification of performance metrics.  Metrics
   described in this draft either reference external definitions
   or define metrics generally in accordance with the guidelines
   in <a class='info' href='#PMOLFRAME'>[PMOLFRAME]<span> (</span><span class='info'>Clark, A., &ldquo;Framework for Performance Metric Development,&rdquo; July&nbsp;2008.</span><span>)</span></a>.

</p>
<a name="intro4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.4"></a><h3>1.4.&nbsp;
Applicability</h3>

<p>
These metrics are applicable to a range of RTP applications. 

</p>
<a name="blockdef"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Packet Delay Variation Metrics Block</h3>

<p>
Metrics in this block report on packet delay variation in the stream arriving at the RTP system.

</p>
<a name="blockdef1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Report Block Structure</h3>
<br /><hr class="insert" />
<a name="blockdata"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   PDV metrics block
    0               1               2               3
    0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7 0 1 2 3 4 5 6 7
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |     BT=NPDV   |I| tag |pdvtyp |        block length=3         |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    Pos Threshold/Peak PDV     |     Pos PDV Percentile        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    Neg Threshold/Peak PDV     |     Neg PDV Percentile        |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |          Mean PDV             |            unused             |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: Report Block Structure&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="blockdef2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
Definition of Fields in PDV Metrics Block</h3>

<p>
   block type (BT): 8 bits

</p>
<p>
</p>
<blockquote class="text">
<p>
         A Packet Delay Variation Metrics Report Block is identified by the constant 
         NPDV. 

</p>
</blockquote><p>

</p>
<p>
[Note to RFC Editor: please replace NPDV with the
         IANA provided RTCP XR block type for this block.]

</p>
<p>
   Interval Metric flag (I): 1 bit

</p>
<p>
</p>
<blockquote class="text">
<p>
This field is used to indicate whether the Packet Delay Variation metrics block is an Interval or a Cumulative report, 
that is, whether the reported values apply to the most 
recent measurement interval duration between successive metrics reports (I=1) (the Interval Duration) or to the accumulation period 
characteristic of cumulative 
measurements (I=0) (the Cumulative Duration). Numerical values for both these intervals are provided in the Measurement Identifier block 
referenced by the tag field below.

</p>
</blockquote><p>

</p>
<p>
   Measurement Identifier association (tag): 3 bits

</p>
<p>
</p>
<blockquote class="text">
<p>
This field is used to identify the Measurement Identifier block <a class='info' href='#MEASIDENT'>[MEASIDENT]<span> (</span><span class='info'>Hunt, G., &ldquo;RTCP XR Measurement Identifier Block,&rdquo; February&nbsp;2009.</span><span>)</span></a> which describes this measurement. The relevant 
Measurement Identifier block has the same tag value as the Packet Delay Variation Metrics block. Note that there may be 
more than one Measurement Identifier block per RTCP packet.

</p>
</blockquote><p>

</p>
<p>
   Packet Delay Variation Metric Type (pdvtyp): 4 bits

</p>
<p>
</p>
<blockquote class="text">
<p>
This field is used to identify the Packet Delay Variation Metric Type used in this report block, according 
to the following code:

</p>
</blockquote><p>

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
    bits 014-017
        0: interarrival jitter, Section 6.4.1 of [RFC3550],
        1: MAPDV2, Clause 6.2.3.2 of [G.1020],
        2: 2-point PDV, Clause 6.2.4 of [Y.1540]
</pre></div>
<p>
</p>
<blockquote class="text">
<p>
Other values as registered by IANA in new registry "RTCP XR PDV block - PDV type", see <a class='info' href='#ianareg'>Section&nbsp;4.4<span> (</span><span class='info'>New registry of PDV types</span><span>)</span></a>.

</p>
</blockquote><p>

</p>
<p>
   block length: 16 bits

</p>
<p>
</p>
<blockquote class="text">
<p>
The length of this report block in 32-bit words, minus one. For the Packet Delay Variation Metrics block, the 
block length is equal to 3.

</p>
</blockquote><p>

</p>
<p>
Positive Threshold/Peak PDV: 16 bit, S11:4 format

</p>
<p>
</p>
<blockquote class="text">
<p>
   The PDV associated with the Positive PDV percentile expressed in milliseconds.  
The term Positive is associated
   with packets arriving later than the expected time.

</p>
<p>
   If the measured value is more negative than -2047.9375 (the value
   which would be coded as 0x8001), the value 0x8000 SHOULD be reported
   to indicate an over-range negative measurement.  If the measured
   value is more positive than +2047.8125 (the value which would be
   coded as 0x7FFD), the value 0x7FFE SHOULD be reported to indicate an
   over-range positive measurement.  If the measurement is unavailable,
   the value 0x7FFF SHOULD be reported.

</p>
</blockquote><p>

</p>
<p>
Positive PDV Percentile: 16 bit, 8:8 format

</p>
<p>
</p>
<blockquote class="text">
<p>
   The percentage of packets on the call for which individual packet
   delays were less than the Positive Threshold PDV.

</p>
<p>
   If the measurement is unavailable, the value 0xFFFF SHOULD be
   reported.

</p>
</blockquote><p>

</p>
<p>
Negative Threshold/Peak PDV: 16 bit, S11:4 format

</p>
<p>
</p>
<blockquote class="text">
<p>
   The PDV associated with the Negative PDV percentile expressed in milliseconds.  
The term Negative is associated
   with packets arriving earlier than the expected time.

</p>
<p>
   If the measured value is more negative than -2047.9375 (the value
   which would be coded as 0x8001), the value 0x8000 SHOULD be reported
   to indicate an over-range negative measurement.  If the measured
   value is more positive than +2047.8125 (the value which would be
   coded as 0x7FFD), the value 0x7FFE SHOULD be reported to indicate an
   over-range positive measurement.  If the measurement is unavailable,
   the value 0x7FFF SHOULD be reported.

</p>
</blockquote><p>

</p>
<p>
Negative PDV Percentile: 16 bit, 8:8 format

</p>
<p>
</p>
<blockquote class="text">
<p>
   The percentage of packets on the call for which individual packet
   delays were more than the Negative Threshold PDV.

</p>
<p>
   If the measurement is unavailable, the value 0xFFFF SHOULD be
   reported.

</p>
</blockquote><p>

</p>
<p>
   If the PDV Type indicated is 2-point PDV and the Positive and Negative PDV
   Percentiles are set to 100.0 then the Positive and Negative
   Threshold/Peak PDV values are the peak values measured during the
   reporting interval (which may be from the start of the call for
   cumulative reports).  In this case, the difference between the
   Positive and Negative Threshold/Peak values defines the range of
   2-point PDV.

</p>
<p>
Mean PDV: (16 bit, S11:4 format) expressed in milliseconds

</p>
<p>
</p>
<blockquote class="text">
<p>
   For MAPDV2 this value is generated according to Clause 6.2.3.2 of <a class='info' href='#G.1020'>[G.1020]<span> (</span><span class='info'>ITU-T, &ldquo;ITU-T Rec. G.1020, Performance parameter definitions for quality of speech and         other voiceband applications utilizing IP networks,&rdquo; July&nbsp;2006.</span><span>)</span></a>.  For
   interval reports the MAPDV2 value is reset at the start of the
   interval.

</p>
<p>
   For interarrival jitter, the value reported is the value of J(i) calculated according
   to <a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a> at the time the report is generated.

</p>
<p>
For 2-point PDV, the value reported is the mean of per-packet 2-point PDV values. This metric 
indicates the arrival time of the first media packet of the session with respect to the 
mean of the arrival times of every packet of the session. A single value of the metric (for a
single session) may not be
useful by itself, but its average over a number of sessions may be useful in diagnosing media 
delay at session startup. For example, this might occur if media packets are often delayed behind 
signalling packets due to head-of-line blocking.

</p>
<p>
   If the measured value is more negative than -2047.9375 (the value
   which would be coded as 0x8001), the value 0x8000 SHOULD be reported
   to indicate an over-range negative measurement.  If the measured
   value is more positive than +2047.8125 (the value which would be
   coded as 0x7FFD), the value 0x7FFE SHOULD be reported to indicate an
   over-range positive measurement.  If the measurement is unavailable,
   the value 0x7FFF SHOULD be reported.

</p>
</blockquote><p>

</p>
<p>
   unused: 16 bits

</p>
<p>
</p>
<blockquote class="text">
<p>
These bits are unused. They SHOULD be set to zero by the sender and MUST be ignored by the receiver.

</p>
</blockquote><p>

</p>
<a name="guide"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3"></a><h3>2.3.&nbsp;
Guidance on use of PDV metrics</h3>

<p>
This subsection provides informative guidance on when it might be appropriate to use each of the
PDV metric types.

</p>
<p>
Interarrival jitter (Section 6.4.1 of <a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a>) allows comparison of results with those from RTP 
end systems which support only RTCP as defined in <a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a>.

</p>
<p>
MAPDV2 (Clause 6.2.3.2 of <a class='info' href='#G.1020'>[G.1020]<span> (</span><span class='info'>ITU-T, &ldquo;ITU-T Rec. G.1020, Performance parameter definitions for quality of speech and         other voiceband applications utilizing IP networks,&rdquo; July&nbsp;2006.</span><span>)</span></a>) compares instantaneous (per-packet) delay variation against a moving average delay 
variation. This metric could be useful in determining residual impairment when an RTP end system uses an adaptive de-jitter 
buffer which tracks the average delay variation, provided the MAPDV2 algorithm and the adaptive de-jitter buffer have similar 
averaging behaviour.

</p>
<p>
2-point PDV (Clause 6.2.4 of <a class='info' href='#Y.1540'>[Y.1540]<span> (</span><span class='info'>ITU-T, &ldquo;ITU-T Rec. Y.1540, IP packet transfer and availability performance parameters,&rdquo; November&nbsp;2007.</span><span>)</span></a>) reports absolute packet delay variation with respect to the time of arrival of the 
first packet of the connection. In an RTP context, the two "points" are at the sender (the synchronization source which applies RTP timestamps) 
and at the receiver. 
The value of this metric for the packet with index j is identical to the quantity D(i,j) defined in Section 6.4.1 of <a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a> 
if the packet index i is set equal to 1, that is, the reference packet for the metric is the first packet of the connection. The metric includes
the effect of the frequency offsets of clocks in both the 
sender and receiver end systems, so it is useful mainly in network where synchronisation is distributed. As well as 
measuring packet delay variation in such networks, it may be used to ensure that synchronisation is effective, for 
example where the network carries ISDN data traffic over RTP <a class='info' href='#RFC4040'>[RFC4040]<span> (</span><span class='info'>Kreuter, R., &ldquo;RTP Payload Format for a 64 kbit/s Transparent Call,&rdquo; April&nbsp;2005.</span><span>)</span></a>. The metric is likely to be useful in networks 
which use fixed de-jitter buffering, because it may be used to determine the length of the required de-jitter buffer, or to determine 
if network performance has deteriorated such that existing de-jitter buffers are too small to accommodate the observed delay variation.

</p>
<a name="examples"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.4"></a><h3>2.4.&nbsp;
Examples of use</h3>

<p>
   (a) To report interarrival jitter <a class='info' href='#RFC3550'>[RFC3550]<span> (</span><span class='info'>Schulzrinne, H., &ldquo;RTP: A Transport Protocol for Real-Time Applications,&rdquo; July&nbsp;2003.</span><span>)</span></a>:

</p>
<p>
   Threshold PDV = FFFF (Undefined); PDV Percentile = FFFF (Undefined);
   PDV type = 0 (interarrival jitter)

</p>
<p>
   causes interarrival jitter to be reported in the Mean PDV field.

</p>
<p>
   (b) To report MAPDV2 <a class='info' href='#G.1020'>[G.1020]<span> (</span><span class='info'>ITU-T, &ldquo;ITU-T Rec. G.1020, Performance parameter definitions for quality of speech and         other voiceband applications utilizing IP networks,&rdquo; July&nbsp;2006.</span><span>)</span></a>:

</p>
<p>
   Pos Threshold PDV = 50.0; Pos PDV Percentile = 95.3; Neg Threshold
   PDV = 50.0 (note this implies -50ms); Neg PDV Percentile = 98.4; PDV
   type = 1 (MAPDV2)

</p>
<p>
   causes average MAPDV2 to be reported in the Mean PDV field.

</p>
<p>
   Note that implementations may either fix the reported percentile and
   calculate the associated PDV level OR may fix a threshold PDV level
   and calculate the associated percentile.  From a practical
   implementation perspective it is simpler to use the second of these
   approaches (except of course in the extreme case of a 100%
   percentile).

</p>
<p>
   2-point PDV, according to <a class='info' href='#Y.1540'>[Y.1540]<span> (</span><span class='info'>ITU-T, &ldquo;ITU-T Rec. Y.1540, IP packet transfer and availability performance parameters,&rdquo; November&nbsp;2007.</span><span>)</span></a> is the difference in delay between the current
   packet and the first packet of the stream.  If the sending and
   receiving clocks are not synchronized, this metric includes the
   effect of relative timing drift.

</p>
<a name="sdp"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
SDP Signaling</h3>

<p>
   <a class='info' href='#RFC3611'>[RFC3611]<span> (</span><span class='info'>Friedman, T., &ldquo;RTP Control Protocol Extended Reports (RTCP XR),&rdquo; November&nbsp;2003.</span><span>)</span></a> defines the use of SDP (Session Description Protocol) 
   <a class='info' href='#RFC4566'>[RFC4566]<span> (</span><span class='info'>Handley, M., &ldquo;SDP: Session Description Protocol,&rdquo; July&nbsp;2006.</span><span>)</span></a> for signaling the use of XR blocks.  XR blocks MAY be used without
   prior signaling.

</p>
<p>
   This section augments the SDP <a class='info' href='#RFC4566'>[RFC4566]<span> (</span><span class='info'>Handley, M., &ldquo;SDP: Session Description Protocol,&rdquo; July&nbsp;2006.</span><span>)</span></a> attribute "rtcp-xr" defined in 
   <a class='info' href='#RFC3611'>[RFC3611]<span> (</span><span class='info'>Friedman, T., &ldquo;RTP Control Protocol Extended Reports (RTCP XR),&rdquo; November&nbsp;2003.</span><span>)</span></a> by providing an additional value of "xr-format" to signal the use of the report
   block defined in this document.

</p>
<p>
     rtcp-xr-attrib = "a=" "rtcp-xr" ":" [xr-format *(SP xr-format)] CRLF

</p>
<p>
     (defined in <a class='info' href='#RFC3611'>[RFC3611]<span> (</span><span class='info'>Friedman, T., &ldquo;RTP Control Protocol Extended Reports (RTCP XR),&rdquo; November&nbsp;2003.</span><span>)</span></a>)

</p>
<p>
     xr-format = xr-format / 
                xr-pdv-block

</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
xr-pdv-block  = "pkt-dly-var" [ "," pdvtype ] [ "," nspec "," pspec ]
</pre></div><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
     pdvtype     = "pdv="    0      ; interarrival jitter  RFC 3550
                           / 1      ; MAPDV2 ITU-T G.1020
                           / 2      ; 2-point PDV ITU-T Y.1540
     nspec       = "nthr=" fixpoint     ; negative threshold PDV (ms)
                 / "npc=" fixpoint    ; negative PDV percentile
     pspec       = "pthr=" fixpoint     ; positive threshold PDV (ms)
                 / "ppc=" fixpoint    ; positive PDV percentile
</pre></div><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
     fixpoint       = 1*DIGIT "." 1*DIGIT  ; fixed point decimal
     DIGIT          = %x30-39
</pre></div>
<p>
When SDP is used in offer-answer, a system sending SDP may request a specific type of PDV measurement. In addition, they 
may state a specific percentile or threshold value, and expect to receive the corresponding threshold or 
percentile metric, respectively. The system receiving the SDP SHOULD send the PDV metrics requested, but 
if the metric is not available, the system receiving the SDP SHOULD send the flag value indicating that the 
metric is unavailable.

</p>
<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
IANA Considerations</h3>

<p>
   New block types for RTCP XR are subject to IANA registration.  For
   general guidelines on IANA considerations for RTCP XR, refer to
   [RFC3611].

</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
New RTCP XR Block Type value</h3>

<p>   
   This document assigns the block type value NPDV in the IANA "RTCP XR Block
   Type Registry" to the "Packet Delay Variation Metrics Block".

</p>
<p>
[Note to RFC Editor: please replace NPDV with the
         IANA provided RTCP XR block type for this block.]

</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
New RTCP XR SDP Parameter</h3>

<p>
This document also registers a new
   parameter "pkt-dly-var" in the "RTCP XR SDP Parameters Registry".

</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
Contact information for registrations</h3>

<p>
   The contact information for the registrations is:

</p>
<p>
   Geoff Hunt (geoff.hunt@bt.com)

</p>
<p>
   Orion 2 PP3, Adastral Park, Martlesham Heath, Ipswich IP5 3RE, United Kingdom

</p>
<a name="ianareg"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.4"></a><h3>4.4.&nbsp;
New registry of PDV types</h3>

<p>
This document creates a new registry to be called "RTCP XR PDV block - PDV type" as a sub-registry of 
the "RTP Control Protocol Extended Reports (RTCP XR) Block Type Registry". Policies for this new
registry are as follows:

</p>
<p>
</p>
<ul class="text">
<li>
The information required to support an assignment is an unambiguous definition of the new metric, covering the base measurements
and how they are processed to generate the reported metric. This should include the units of measurement, how values of the metric
are reported in the three 16-bit fields "Pos Threshold/Peak PDV", "Neg Threshold/Peak PDV" and "Mean PDV" within the report block, 
and how the metric uses the two 16-bit fields "Pos PDV Percentile" and "Neg PDV Percentile".

</li>
<li>
The review process for the registry is "Specification Required" as described in Section 4.1 of <a class='info' href='#RFC5226'>[RFC5226]<span> (</span><span class='info'>Narten, T., &ldquo;Guidelines for Writing an IANA Considerations Section in RFCs,&rdquo; May&nbsp;2008.</span><span>)</span></a>.

</li>
<li>
Entries in the registry are integers. The valid range is 0 to 15 corresponding to the 4-bit field "pdvtyp" in the block.
Values are to be recorded in decimal.

</li>
<li>
Initial assignments are as follows:

</li>
</ul><p>

</p>
<p>
</p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
        0: interarrival jitter, Section 6.4.1 of [RFC3550],
        1: MAPDV2, Clause 6.2.3.2 of [G.1020],
        2: 2-point PDV, Clause 6.2.4 of [Y.1540]
</pre></div><p>


</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Security Considerations</h3>

<p>
   It is believed that this proposed RTCP XR report block introduces no
   new security considerations beyond those described in <a class='info' href='#RFC3611'>[RFC3611]<span> (</span><span class='info'>Friedman, T., &ldquo;RTP Control Protocol Extended Reports (RTCP XR),&rdquo; November&nbsp;2003.</span><span>)</span></a>.  This block does not provide 
   per-packet statistics so the risk
   to confidentiality documented in Section 7, paragraph 3 of <a class='info' href='#RFC3611'>[RFC3611]<span> (</span><span class='info'>Friedman, T., &ldquo;RTP Control Protocol Extended Reports (RTCP XR),&rdquo; November&nbsp;2003.</span><span>)</span></a> does
   not apply.

</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Changes from previous version</h3>

<p>
Changed names of metrics to align with RFC 5481, following Al Morton's comment at IETF74

</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>7.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="G.1020">[G.1020]</a></td>
<td class="author-text">ITU-T, &ldquo;ITU-T Rec. G.1020, Performance parameter definitions for quality of speech and
        other voiceband applications utilizing IP networks,&rdquo; July&nbsp;2006.</td></tr>
<tr><td class="author-text" valign="top"><a name="MEASIDENT">[MEASIDENT]</a></td>
<td class="author-text">Hunt, G., &ldquo;RTCP XR Measurement Identifier Block,&rdquo; ID&nbsp;draft-ietf-avt-rtcp-xr-measid-01, February&nbsp;2009.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text">Bradner, S., &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; RFC&nbsp;2119, BCP&nbsp;14, March&nbsp;1997.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3550">[RFC3550]</a></td>
<td class="author-text">Schulzrinne, H., &ldquo;<a href="http://tools.ietf.org/html/rfc3550">RTP: A Transport Protocol for Real-Time Applications</a>,&rdquo; RFC&nbsp;3550, July&nbsp;2003.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3611">[RFC3611]</a></td>
<td class="author-text">Friedman, T., &ldquo;<a href="http://tools.ietf.org/html/rfc3611">RTP Control Protocol Extended Reports (RTCP XR)</a>,&rdquo; RFC&nbsp;3611, November&nbsp;2003.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4040">[RFC4040]</a></td>
<td class="author-text">Kreuter, R., &ldquo;<a href="http://tools.ietf.org/html/rfc4040">RTP Payload Format for a 64 kbit/s Transparent Call</a>,&rdquo; RFC&nbsp;4040, April&nbsp;2005.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4566">[RFC4566]</a></td>
<td class="author-text">Handley, M., &ldquo;<a href="http://tools.ietf.org/html/rfc4566">SDP: Session Description Protocol</a>,&rdquo; RFC&nbsp;4566, July&nbsp;2006.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5226">[RFC5226]</a></td>
<td class="author-text">Narten, T., &ldquo;<a href="http://tools.ietf.org/html/rfc5226">Guidelines for Writing an IANA Considerations Section in RFCs</a>,&rdquo; RFC&nbsp;5226, BCP&nbsp;26, May&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="Y.1540">[Y.1540]</a></td>
<td class="author-text">ITU-T, &ldquo;ITU-T Rec. Y.1540, IP packet transfer and availability performance parameters,&rdquo; November&nbsp;2007.</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>7.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="MONARCH">[MONARCH]</a></td>
<td class="author-text">Hunt, G., &ldquo;Monitoring Architectures for RTP,&rdquo; ID&nbsp;draft-hunt-avt-monarch-01, August&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="PMOLFRAME">[PMOLFRAME]</a></td>
<td class="author-text">Clark, A., &ldquo;Framework for Performance Metric Development,&rdquo; ID&nbsp;draft-ietf-pmol-metrics-framework-00, July&nbsp;2008.</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Geoff Hunt</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">BT</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Orion 2 PP3</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Adastral Park</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Martlesham Heath</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Ipswich, Suffolk  IP4 2TH</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">United Kingdom</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+44 1473 651704</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:geoff.hunt@bt.com">geoff.hunt@bt.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Alan Clark</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Telchemy Incorporated</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">2905 Premiere Parkway, Suite 280</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Duluth, GA  30097</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:alan.d.clark@telchemy.com">alan.d.clark@telchemy.com</a></td></tr>
</table>
</body></html>
