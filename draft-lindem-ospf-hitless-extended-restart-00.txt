



Network Working Group                                        Acee Lindem
Internet Draft                                               Anand Oswal
Expiration Date: November 2002                               Redback Networks
                                                             June 2002


                    Extended Hitless OSPF Restart 
             draft-lindem-ospf-hitless-extended-restart-00.txt



Status of this Memo

    This document is an Internet-Draft and is in full conformance with
    all provisions of Section 10 of RFC2026.

    Internet-Drafts are working documents of the Internet Engineering
    Task Force (IETF), its areas, and its working groups.  Note that
    other groups may also distribute working documents as Internet-
    Drafts.

    Internet-Drafts are draft documents valid for a maximum of six
    months and may be updated, replaced, or obsoleted by other documents
    at any time.  It is inappropriate to use Internet-Drafts as
    reference material or to cite them other than as "work in progress."

    The list of current Internet-Drafts can be accessed at
    http://www.ietf.org/ietf/1id-abstracts.txt

    The list of Internet-Draft Shadow Directories can be accessed at
    http://www.ietf.org/shadow.html.

Abstract

    This memo documents an enhancement to OSPF "hitless restart" whereby
    an OSPF router can request that its forwarding state be maintained
    longer that the router dead interval on one or more router 
    interfaces.  This is useful when the OSPF software is being 
    updated and the router dead interval on one or more interfaces is
    configured to a small value. 













Lindem, Oswal                                                   [Page 1]

Internet Draft       Extended Hitless OSPF Restart             June 2002


Table of Contents

    1        Overview ............................................... 2
    2        Changes to restarting router operation ................. 2
    3        Changes to helper neighbor operation ................... 2
    4        Backward compatibility ................................. 3
    5        Security Considerations ................................ 3
    6        References ............................................. 3
    7        Acknowledgments ........................................ 3
    8        Authors' Addresses ..................................... 3

1.  Overview

    "Hitless OSPF Restart" [Ref2] describes an enhancement to the
    OSPF protocol [Ref1] which allows an OSPF router to continue
    forwarding after the OSPF routing software has been restarted. 
    This memo documents an extension which allows the restart time 
    to exceed the router dead interval on one or more interfaces. This
    useful when the routing software is being updated and the router
    dead interval on one or more interfaces is configured to a very
    small value. 

2.  Changes to restarting router operation

    When the restarting router is to be brought down for a period which
    may exceed the router dead interval on one or more router 
    interfaces, a unique value will be used for the Hitless restart 
    reason (Type=2, length=1) TLV. Currently, a value of 4 (extended 
    maintenance) is used for this purpose. Once the grace-LSA has been 
    originated on an interface, the restarting router must assure that 
    it does not send any hello packets until it actually restarts. This 
    is required to prevent helper neighbors from resetting their router 
    dead interval timer corresponding to the restarting router to the 
    configured value.

    Routers that support both planned and unplanned restart should save 
    the restart reason in non-volatile storage. When the OSPF restarts
    restarts, the saved restart reason is examined to determine whether 
    or not grace-LSAs need to be originated. The restart reason will be 
    0 (unknown) for unplanned restarts. This indicates the restarting 
    router must originate grace-LSAs prior to sending any hellos 
    (as specified in section 5 of "Hitless OSPF restart" [Ref2]). 

3.  Changes to helper neighbor operation

    When a router Y receives a grace-LSA from router X and all 
    criteria for entering helper are satisfied (as specified in section
    3.1 of "Hitless OSPF restart" [Ref2]), it will enter helper mode. If 
    Hitless restart reason TLV in the grace-LSA indicates "extended
    maintenance" and the router dead interval will expire sooner
    than the grace period expiration, the router dead interval
    timer for the restarting router will be reset to expire at the
    same time as the grace period expiration.  

Lindem, Oswal                                                   [Page 2]

Internet Draft       Extended Hitless OSPF Restart             June 2002

    Additionally, local policy may be implemented to disallow
    router dead interval extension when entering helper mode.
    
4.  Backward compatibility

    This extension to "Hitless OSPF Restart" [Ref2] does not introduce 
    any new backward compatibility issues. If an OSPF router supports 
    hitless OSPF restart but does not support this extension and the 
    router dead timer for a restarting OSPF router expires, it will 
    simply exit helper mode and the resume normal OSPF operation.

5. Security Considerations

    The described technique does not introduce any new security issues
    into OSPF protocol.

6. References

     [1] Moy, J., "OSPF Version 2", RFC 2328, April 1998. 

     [2] Moy, J., "OSPF Hitless Restart", work in progress.

7. Acknowledgments

   The authors wish to thank Naiming Shen and Tony Przygienda for their 
   helpful comments.

8. Authors' Addresses

        Acee Lindem                           Anand Oswal 
        Redback Networks                      Redback Networks
        102 Carric Bend Court                 350 Holger Way           
        Cary, NC 27519                        San Jose, CA  95134
        e-mail: acee@redback.com              e-mail: aoswal@redback.com 





  















Lindem, Oswal                                                   [Page 3]
