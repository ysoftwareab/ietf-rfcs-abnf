



IDR                                                                Z. Li
Internet-Draft                                              China Mobile
Intended status: Standards Track                                 J. Dong
Expires: September 16, 2016                          Huawei Technologies
                                                          March 15, 2016


           Carry congestion status in BGP extended community
          draft-li-idr-congestion-status-extended-community-00

Abstract

   A new extended community is introduced in this document to carry the
   link congestion status, especially for the exit link of one AS.  We
   call this extended community congestion status community, which can
   be used by the BGP routers to steer the Internet-access traffic among
   the exit links by deploying policy routing.

Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on September 16, 2016.

Copyright Notice

   Copyright (c) 2016 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents



Li & Dong              Expires September 16, 2016               [Page 1]

Internet-Draft            CS extended community               March 2016


   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Congestion Status Extended Community  . . . . . . . . . . . .   4
     2.1.  Congestion Status Extended Community for Two-Octet AS . .   4
     2.2.  Congestion Status Extended Community for Four-Octet AS  .   5
   3.  Security Considerations . . . . . . . . . . . . . . . . . . .   6
   4.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   6
   5.  Normative References  . . . . . . . . . . . . . . . . . . . .   6
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   6

1.  Introduction

   typically the architecture of a large scale ISP's network is multi-
   layered, as illustrated in Figure 1.  The national backbone network
   has its own AS, and each of the province or state network has a
   specific AS.  Backbone network connects all the province or state
   networks together and has several exit links to access the Internet.
   In some circumstances, the province or state network may have direct
   exit links to the Internet.  The total bandwidth of the backbone exit
   links is usually much bigger than that of the direct exit links in
   the province or state networks.  Thus, the Internet-access traffic is
   mainly transported through the backbone exit links by deploying route
   policies on the ASBR routers in the province or state networks.  The
   ASBR routers in the province or state networks, for example, prefer
   the routes learned from the backbone by setting higher local
   preference for those routes.  However, when the backbone exit links
   are congested due to traffic increasing or delay of the capacity
   expansion, the ASBR routers in the province or state networks do not
   know this, and still delivery Internet-access traffic to the
   backbone.  The customer experience deteriorates, the operator, in
   turn, will receive more and more complaints for its bad network
   performance.  Then, the operator has to steer some Internet-access
   traffic to the direct exit links in the province or state networks by
   deploying route policy on the ASBR routers.  This kind of policy
   should be removed when the capacity expansion of the backbone exit
   links is done.  The ASBR routers do not konw this again.






Li & Dong              Expires September 16, 2016               [Page 2]

Internet-Draft            CS extended community               March 2016


   +---------------------------------------------------------+
   |                                                         |
   |                        Internet                         |

   | +----------+          +----------+         +----------+ |
   +-| Router a |----------| Router b |---------| Router c |-+
     +----------+          +----------+         +----------+
       /   \                   \                    /
   ---/-----\-------------------\------------------/----------
      |      \                   \                /ISP Network
      |    +----------+    +----------+    +----------+
      |  +-| Router 1 |----| Router 2 |----| Router 3 |-+
      |  | +----------+    +----------+    +----------+ |
      |  |                                              |
      |  |                   BACKBONE                   |
      |  |                     AS B                     |
      |  | +----------+    +----------+    +----------+ |
      |  +-| Router L |----| Router M |----| Router N |-+
      |    +----------+    +----------+    +----------+
      |         /               |                \
      |        /                |                 \
     +----------+          +----------+          +----------+
   +-| Router X |-+      +-| Router Y |-+      +-| Router Z |-+
   | +----------+ |      | +----------+ |      | +----------+ |
   |  province X  |      |  province Y  |      |  province Z  |
   |     AS X     |      |     AS Y     |      |     AS Z     |
   +--------------+      +--------------+      +--------------+

                                 Figure 1

   This document introduces a new extended community [RFC4360] to
   delivery the congestion status of the exit link to other BGP peers.
   The BGP receiver can then use this community to deploy route policy,
   thus steer Internet-access traffic according to the congestion status
   of the exit link.  Router X in the above figure, for example, can
   steer some Internet-access traffic to the direct exit link when it
   knows the backbone exit link is congested.  The introduced community
   is called congestion status extended community.

   Congestion status extended community is good not only to the ASBRs in
   other AS, but also to the BGP peers within one AS.  For instance,
   Router M in backbone AS chooses Router 2 to transport the Internet-
   access traffic by default.  When Router M receives congestion status
   extended communities from Router 1,2,3, which indicate the
   utilization of the exit link of Router 1,2,3 is 90%, 70%, and 50%
   respectively, it can choose Router 3 to transport some Internet-
   access traffic using route policy.




Li & Dong              Expires September 16, 2016               [Page 3]

Internet-Draft            CS extended community               March 2016


2.  Congestion Status Extended Community

   As described in [RFC4360], the extended community attribute is an
   8-octet value with the first one or two octets to indicate the type
   of this attribute.  Since congestion status extended community needs
   to be delivered from on AS to other ASes, and used by the BGP
   speakers both in other ASes and within the same AS as the sender, it
   MUST be a transitive extended community, i.e. the T bit in the first
   octet MUST be zero.

   Congestion status extended community has two encoding formats, one is
   for two-octet AS, the other is for four-octet AS.

2.1.  Congestion Status Extended Community for Two-Octet AS

   Congestion status extended community for two-octet AS is a sub-type
   allocated from Transitive Two-Octet AS-Specific Extended Community
   Sub-Types defined in section 5.2.2 of [RFC7153].  Its format is as
   Figure 2.

         0                   1                   2                   3
         0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        |      0x00     |    Sub-Type   |        Sender AS Number       |
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        |           Reserved            |    Bandwidth    | Utilization |
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                                 Figure 2

      The "Type" field MUST be 0x00, which indicate this is a Transitive
      Two-Octet AS-Specific Extended Community.

      The "Sub-Type" field is used to indicate this is a Congestion
      Status Extended Community.  Its value is to be assigned by IANA.
      0x06 is suggested.

      The "Sender AS Number" field is 2 octets.  Its value is the AS
      number of the BGP speaker who generates this congestion status
      extended community.  The generator MUST have 2-octct AS number.

      The "Reserved" field is 2 octets.  This field is used to align
      with the Congestion Status Extended Community for Four-Octet AS
      defined in the next section of this document.  Its value SHOULD be
      zero.  The BGP peers who receive this community MUST ignore this
      field.





Li & Dong              Expires September 16, 2016               [Page 4]

Internet-Draft            CS extended community               March 2016


      The "Bandwidth" field is 1 octet.  Its value is the bandwidth of
      the exit link in unit of gbps (gigabits per second).

      The "Utilization" field is 1 octet.  Its value is the utilization
      of the exit link in unit of percent.  We can use the "Utilization"
      field together with the "Bandwidth" field to calculate the traffic
      load that we can further steer to this exit link.

2.2.  Congestion Status Extended Community for Four-Octet AS

   Congestion status extended community for four-octet AS is a sub-type
   allocated from Transitive Four-Octet AS-Specific Extended Community
   Sub-Types defined in section 5.2.4 of [RFC7153].  Its format is as
   Figure 3.

         0                   1                   2                   3
         0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        |      0x02     |    Sub-Type   |        Sender AS Number       |
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
        |    Sender AS Number (cont.)   |    Bandwidth    | Utilization |
        +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                                 Figure 3

      The "Type" field MUST be 0x02, which indicate this is a Transitive
      Four-Octet AS-Specific Extended Community.

      The "Sub-Type" field is used to indicate this is a Congestion
      Status Extended Community.  Its value is to be assigned by IANA.
      0x06 is suggested.

      The "Sender AS Number" field is 4 octets.  Its value is the AS
      number of the BGP speaker who generates this congestion status
      extended community.  The generator MUST have 4-octct AS number.

      The "Bandwidth" field is 1 octet.  Its value is the bandwidth of
      the exit link in unit of gbps (gigabits per second).

      The "Utilization" field is 1 octet.  Its value is the utilization
      of the exit link in unit of percent.  We can use the "Utilization"
      field together with the "Bandwidth" field to calculate the traffic
      load that we can further steer to this exit link.








Li & Dong              Expires September 16, 2016               [Page 5]

Internet-Draft            CS extended community               March 2016


3.  Security Considerations

   Malicious router may use the congestion status extended community to
   interfere the traffic steering decision of the BGP receiver.  BGP
   peers SHOULD use MD5 for authentication [RFC4360].  BGP receiver
   SHOULD only accept the congestion status community or extended
   community delivered from BGP peers with MD5 authentication.

4.  IANA Considerations

   One sub-type is solicited to be assigned from Transitive Two-Octet
   AS-Specific Extended Community Sub-Types registry to indicate the
   extended community with Type 0x00 is a Congestion Status Extended
   Community for Two-Octet AS. 0x06 is suggested.

   One sub-type is solicited to be assigned from Transitive Four-Octet
   AS-Specific Extended Community Sub-Types registry to indicate the
   extended community with Type 0x02 is a Congestion Status Extended
   Community for Four-Octet AS. 0x06 is suggested.

5.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <http://www.rfc-editor.org/info/rfc2119>.

   [RFC4360]  Sangli, S., Tappan, D., and Y. Rekhter, "BGP Extended
              Communities Attribute", RFC 4360, DOI 10.17487/RFC4360,
              February 2006, <http://www.rfc-editor.org/info/rfc4360>.

   [RFC7153]  Rosen, E. and Y. Rekhter, "IANA Registries for BGP
              Extended Communities", RFC 7153, DOI 10.17487/RFC7153,
              March 2014, <http://www.rfc-editor.org/info/rfc7153>.

Authors' Addresses

   Zhenqiang Li
   China Mobile
   No.32 Xuanwumenxi Ave., Xicheng District
   Beijing  100032
   P.R. China

   Email: li_zhenqiang@hotmail.com







Li & Dong              Expires September 16, 2016               [Page 6]

Internet-Draft            CS extended community               March 2016


   Jie Dong
   Huawei Technologies
   Huawei Campus, No.156 Beiqing Rd.
   Beijing  100095
   P.R. China

   Email: jie.dong@huawei.com












































Li & Dong              Expires September 16, 2016               [Page 7]
