<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>LLN Routing Fundamentals</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="LLN Routing Fundamentals">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">ROLL Working Group</td><td class="header">P. Thubert</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Cisco</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">T. Watteyne</td></tr>
<tr><td class="header">Expires: October 11, 2009</td><td class="header">UC Berkeley</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Z. Shelby</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Sensinode</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">D. Barthel</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Orange Labs</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">April 09, 2009</td></tr>
</table></td></tr></table>
<h1><br />LLN Routing Fundamentals<br />draft-thubert-roll-fundamentals-01</h1>

<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on October 11, 2009.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents in effect on the date of
publication of this document (http://trustee.ietf.org/license-info).
Please review these documents carefully, as they describe your
rights and restrictions with respect to this document.</p>

<h3>Abstract</h3>

<p>
            This document describes a basic set of fundamental mechanisms for routing on a Low-power and Lossy Network (LLN). It does not intend to specify a full-blown protocol. It is rather offered as a basis to support the discussion while designing the ROLL protocol.
         
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#intro">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#intro_terminology">1.1.</a>&nbsp;
Terminology<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#needs">1.2.</a>&nbsp;
Needs<br />
<a href="#disco">2.</a>&nbsp;
Tree Discovery<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#disco_overview">2.1.</a>&nbsp;
Overview<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#disco_treeinfo">2.2.</a>&nbsp;
Discovery Information<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#disco_stability">2.3.</a>&nbsp;
Stability<br />
<a href="#dissemination">3.</a>&nbsp;
Route Dissemination<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#dissemination_overview">3.1.</a>&nbsp;
Overview<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#dissemination_ninooption">3.2.</a>&nbsp;
Disseminated Information<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#dissemination_ROLLrouteroperation">3.3.</a>&nbsp;
LLN Router Operation<br />
<a href="#forwarding">4.</a>&nbsp;
Forwarding<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#forwarding_in">4.1.</a>&nbsp;
Upstream Forwarding<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#forwarding_out">4.2.</a>&nbsp;
Downstream Forwarding<br />
<a href="#multicast">5.</a>&nbsp;
Multicast Support<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#multicast_overview">5.1.</a>&nbsp;
Overview<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#multicast_rxflow">5.2.</a>&nbsp;
Receiver Flow<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#multicast_srcflow">5.3.</a>&nbsp;
Source flow<br />
<a href="#adv">6.</a>&nbsp;
Advanced Features<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#adv_igps">6.1.</a>&nbsp;
Interaction with other routing protocols<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#adv_igp_dymo">6.1.1.</a>&nbsp;
AODV/DYMO<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#adv_igp_olsr">6.1.2.</a>&nbsp;
OSPF/OLSR<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#adv_igp_mip6">6.1.3.</a>&nbsp;
MIP6/NEMO<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#adv_opt">6.2.</a>&nbsp;
Route Optimization<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#adv_opt_node">6.2.1.</a>&nbsp;
Node-to-node routing<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#adv_opt_offline">6.2.2.</a>&nbsp;
Offline Path Computation<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#adv_opt_graphforwarding">6.2.3.</a>&nbsp;
Graph forwarding<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#density">6.3.</a>&nbsp;
Density<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#adv_digraph">6.4.</a>&nbsp;
Digraph Dissemination<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#adv_multiple">6.5.</a>&nbsp;
Multiple LBRs and Trees<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#adv_aggregation">6.6.</a>&nbsp;
Aggregation for Route Dissemination<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#adv_advancedfwd">6.7.</a>&nbsp;
Advanced Forwarding<br />
<a href="#security">7.</a>&nbsp;
Security Considerations<br />
<a href="#iana">8.</a>&nbsp;
IANA Considerations<br />
<a href="#acknowledgments">9.</a>&nbsp;
Acknowledgments<br />
<a href="#rfc.references1">10.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">10.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">10.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="intro"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
            This document describes a basic set of fundamental mechanisms for routing on a Low-power and Lossy Network (LLN) appropriate for scenarios identified by the ROLL working group. It does not intend to specify a full-blown protocol. It is rather offered as a basis to support the discussion while designing the ROLL protocol. The fundamental mechanisms proposed stem from our analysis that current academic, industrial and IETF protocols suitable to ROLL scenarios are reduceable to those basic mechanisms.
         
</p>
<p>Those mechanisms provide a core set of functionality that can be complemented by specific extensions to implement the needs expressed in the ROLL routing requirement drafts:
		 </p>
<ul class="text">
<li><a class='info' href='#I-D.ietf-roll-urban-routing-reqs'>Urban WSNs Routing Requirements in Low Power and Lossy Networks<span> (</span><span class='info'>Dohler, M., Watteyne, T., Winter, T., Barthel, D., Jacquenet, C., Madhusudan, G., and G. Chegaray, &ldquo;Urban WSNs Routing Requirements in Low Power and Lossy Networks,&rdquo; March&nbsp;2009.</span><span>)</span></a> [I&#8209;D.ietf&#8209;roll&#8209;urban&#8209;routing&#8209;reqs]
</li>
<li><a class='info' href='#I-D.ietf-roll-building-routing-reqs'>Building Automation Routing Requirements in Low Power and Lossy Networks<span> (</span><span class='info'>Martocci, J., Riou, N., Mil, P., and W. Vermeylen, &ldquo;Building Automation Routing Requirements in Low Power and Lossy Networks,&rdquo; January&nbsp;2010.</span><span>)</span></a> [I&#8209;D.ietf&#8209;roll&#8209;building&#8209;routing&#8209;reqs]
</li>
<li><a class='info' href='#I-D.ietf-roll-home-routing-reqs'>Home Automation Routing Requirements in Low Power and Lossy Networks<span> (</span><span class='info'>Brandt, A. and J. Buron, &ldquo;Home Automation Routing Requirements in Low Power and Lossy Networks,&rdquo; January&nbsp;2010.</span><span>)</span></a> [I&#8209;D.ietf&#8209;roll&#8209;home&#8209;routing&#8209;reqs]
</li>
<li><a class='info' href='#I-D.ietf-roll-indus-routing-reqs'>Industrial Routing Requirements in Low Power and Lossy Networks<span> (</span><span class='info'>Networks, D., Thubert, P., Dwars, S., and T. Phinney, &ldquo;Industrial Routing Requirements in Low Power and Lossy Networks,&rdquo; June&nbsp;2009.</span><span>)</span></a> [I&#8209;D.ietf&#8209;roll&#8209;indus&#8209;routing&#8209;reqs]
</li>
</ul><p>
            The constraints expressed in the routing requirement documents (such as on node memory and communication cost) narrow the choice of fundamental mechanisms down to very simple ones.
         
</p>
<p>
            Due to the highly directed flows in LLNs, a tree structure comes naturally to mind as a bare minimum. In a slightly more elaborate mechanism, we propose that each router memorizes a few best neighbor routers (not only among its parents up the tree, but also among its siblings), to choose from (using some routing metric) when routing towards LLN Border Routers (LBR). However, to reduce complexity, we propose that only the best parent be advertised up the structure towards the LBRs, giving each of them a simple tree representation to be used for routing downstream traffic or for making other global decisions. Since links and nodes are expected to come and go over time, mechanisms for tree reorganization are described. However, on a shorter time scale, transient link failures are bound to happen. In such a case, we recommend that the link-layer passes packets back to the network layer for re-routing along alternate paths.
         
</p>
<p>
            In terms of routing, the basic fundamental methods include uni/anycast routing up the graph and unicast routing down the tree (either hop-by-hop or source-based). The best neighbor selection mechanism is left to the protocol design phase. We even suggest that it be left as a plug-in for future evolution. However, a set of basic tree discovery and forwarding rules, described here, prevents loops from forming, in most cases, whatever the routing algorithm eventually implemented.
         
</p>
<p>
            More advanced mechanisms which can be built upon the fundamental mechanisms are also described. They include route optimizations, dissemination of a digraph, dissemination and maintenance of multiple overlapping trees, prefix aggregation and advanced forwarding rules.
         
</p>
<p>
            This document is organized as follows:
            </p>
<blockquote class="text"><dl>
<dt></dt>
<dd>Section 1.1 defines the terminology used in this document.
</dd>
<dt></dt>
<dd>Section 2 concentrates on the basic tree discovery and maintenance mechanism.
</dd>
<dt></dt>
<dd>Section 3 introduces the basic distance-vector route dissemination mechanism.
</dd>
<dt></dt>
<dd>Section 4 describes the upstream and downstream forwarding rules.
</dd>
<dt></dt>
<dd>Section 5 describes multicast support.
</dd>
<dt></dt>
<dd>Section 6 describes advanced mechanisms which can be built upon these fundamentals.
</dd>
</dl></blockquote><p>
         
</p>
<a name="intro_terminology"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Terminology</h3>

<p>The terminology used in this document is consistent with and incorporates that described in <a class='info' href='#I-D.ietf-roll-terminology'>[I&#8209;D.ietf&#8209;roll&#8209;terminology]<span> (</span><span class='info'>Vasseur, J., &ldquo;Terminology in Low power And Lossy Networks,&rdquo; March&nbsp;2010.</span><span>)</span></a>. This terminology is extended in this document as follows:
               </p>
<blockquote class="text"><dl>
<dt>to Attach:</dt>
<dd>the action of establishing a child-to-parent relationship in Tree Discovery.
</dd>
<dt>Tree Depth:</dt>
<dd>the maximum number of edges that need to be traversed from any tree node to the root.
</dd>
<dt>Discovery:</dt>
<dd>a mechanism by which a logical representation of the network is built.
</dd>
<dt>Floating, Grounded:</dt>
<dd>a tree is said to be Grounded if it is connected to a high-capacity backbone or backhaul link to a network such as the Internet. By contrast, a tree is said to be Floating if it is not Grounded.
</dd>
<dt>Graph:</dt>
<dd>a set of vertices and edges to represent a network of nodes and links. A Directed Acyclic Graph (DAG) is a graph with directional edges where no loop is formed.
</dd>
<dt>Uniform Path Metric:</dt>
<dd>A scalar measure for the quality of the bi-directional path between the LLN Router and the root.
</dd>
<dt>Route Dissemination:</dt>
<dd>the action of establishing state within the network so that routers know how to forward packets related to some source-destination pairs.
</dd>
<dt>Router:</dt>
<dd>a network node that is capable of forwarding packets on behalf of other nodes. In ROLL routing requirement documents, it appears that most nodes are expected to be routers.
</dd>
<dt>Default Router:</dt>
<dd>the router to turn to when a node has no information on where to forward a packet.
</dd>
</dl></blockquote><p>
            
</p>
<a name="needs"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.2"></a><h3>1.2.&nbsp;
Needs</h3>

<p>
               The ROLL working group has identified typical scenarios and their related requirements for LLN routing. The main requirements on any fundamental mechanisms used for achieving the ROLL protocol can be summarized as follows:
              </p>
<ul class="text">
<li>Support for operation in both full IPv6 <a class='info' href='#RFC2460'>[RFC2460]<span> (</span><span class='info'>Deering, S. and R. Hinden, &ldquo;Internet Protocol, Version 6 (IPv6) Specification,&rdquo; December&nbsp;1998.</span><span>)</span></a> and minimal 6LoWPAN <a class='info' href='#RFC4944'>[RFC4944]<span> (</span><span class='info'>Montenegro, G., Kushalnagar, N., Hui, J., and D. Culler, &ldquo;Transmission of IPv6 Packets over IEEE 802.15.4 Networks,&rdquo; September&nbsp;2007.</span><span>)</span></a> networks.
</li>
<li>Optimized for traffic directed between nodes and LBRs.
</li>
<li>The discovery of multiple disjoint routing paths to increase reliability.
</li>
<li>Support for multiple LBRs out of the LLN.
</li>
<li>Minimal network state needed by routers, with a hard bound better than O(D), D being the number of destinations.
</li>
<li>Support for complex unicast, anycast and multicast flows.
</li>
<li>Localized response upon link failures without requiring global updates.
</li>
<li>Minimal control overhead scaling within O(log(L)) of the data rate.
</li>
<li>Support for link and node costs along routes.
</li>
</ul><p>
            
</p>
<a name="disco"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Tree Discovery</h3>

<p>
            A tree is the simplest and most basic acyclic graph structure. 
            Even if it is not sufficient to ensure by itself the multipath forwarding 
            proposed below, a tree provides the ideal structure 
            for best path routing between source and sink in a convergecast.
         
</p>
<p>
            In many occasions, LLNs do not have a clear and stable
            physical structure and it becomes necessary to overlay a logical representation 
            to define links and enable IPv6 operations.
            LLN Tree Discovery is the component of the LLN fundamentals that
            builds and maintains logical tree structures over the LLN.
         
</p>
<p>   The nodes in an LLN discovery tree are Routers; the root is an
			arbitrary elected Router if the tree is Floating; it is a LLN
			Border Router (LBR) if the tree is Grounded, that is the
			root is connected to the infrastructure via a backhaul link or a federating backbone. 
         
</p>
<p> 
			A federating backbone such as an extended LoWPAN 
            backbone is the virtual root of the federated tree. In that case, the LBRs
            are attached at a depth of one and are in charge of performing
            the root operations on behalf of that virtual root.
         
</p>
<p>
            A tree is identified by a Tree ID which can take the form of an IPv6 address:
            in the case of a LoWPAN configuration with a federating backbone, the LoWPAN prefix
            is used as the Tree ID. If there is no backbone, the tree ID will be
            an address of the root or a prefix owned by the root. A router attaching to
			a tree sets a route to the treeID via its parent in the tree. 
         
</p>
<p>
		    A router may attach to and may advertise more than one tree, but it uses and advertises at most one tree as Default tree.
			A router sets up its default route via its parent in its Default tree.
		   
</p>
<p>
            This section describes
            </p>
<ol class="text">
<li>a minimum extension to IPv6 Neighbor
                  Discovery Router Advertisements in order to ensure that LLN
                  Routers organize in a tree structure, and
</li>
<li>a minimum common algorithmic part that all LLN Routers
                  are required to implement in order to ensure that, whatever the
                  individual routing decisions, routing loops between LLN Routers are
                  avoided and basic optimization is achieved.
</li>
</ol><p>
         
</p>
<p>
            LLN Discovery is based on an autonomous decision by each Router
            with no global state convergence such as traditionally found in IGPs.
            In order to enable backward compatibility and interoperability,
            LLN Discovery allows Routers to make different 
            decisions from identical inputs, based on their own configuration 
            and their own algorithms, though it is highly preferable that the 
            decision algorithm be consistent in a given deployment to achieve the 
            specific goals of that deployment.
         
</p>
<p>
            The signalling mechanism that is used to form the trees is an extension to
            the ICMP Router Advertisement (RA) message, namely the Tree Information
            Option (TIO). The TIO allows LLN Routers to advertise the tree
            they belong to, and to select and move to the best location within
            the available trees. LLN Routers propagate the TIO in RA messages down the
            tree, updating some metrics such as the Tree Depth while leaving
            other information such as the Tree ID unchanged. This is compatible with RA period reduction techniques 
            such as the use of Trickle. 
         
</p>
<a name="disco_overview"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.1"></a><h3>2.1.&nbsp;
Overview</h3>

<p>
               LLN Tree Discovery is a form of distance vector protocol for use in
               wireless meshed networks. Tree Discovery locates the nearest exit and forms
               Directed Graphs towards that exit, composed of a best path tree
               and alternate forwarding options.
            
</p>
<p>
	       By introducing the concept of routing plug-ins, LLN Tree Discovery enables
 	       LLN Routers to implement different policies for selecting their preferred parent in the Tree. Tree Discovery does not specify the plug-in operation, but rather specifies a set of rules to be implemented by all plug-ins to ensure
 	       interoperability.  
            
</p>
<p>
               The Tree Depth is the underlying criterion that garantees loop-free operations even if plug-ins
               implement different policies, and even if these policies do not use Depth as a routing metric.
            
</p>
<p>
               In order to organize and maintain a loopfree structure, the parent selection
               plug-ins in the LLN Routers MUST obey the following rules and definitions:
               </p>
<ol class="text">
<li>
                     The root of a tree exposes the tree in the Router
                     Advertisement (RA) Tree Information Option (TIO) and LLN Routers
                     propagate the TIO down.
                  
</li>
<li>
                     An LLN Border Router that is attached to a federating backbone acts as root and advertises a depth of one. 
					 An LBR that is not attached to a federating backbone is a root and exposes a depth of zero.
                  
</li>
<li>An LLN Router that is not a Border Router may be the root of its
					own Floating tree.  Its depth is zero in that tree.
					 An LLN Router that loses its current parent and has no 
					 alternate parent is back to that same state, but it needs to
                     remember the Tree ID and the sequence counter in the TIO of the 
                     lost parent for a period of time which covers multiple TIOs. 
                  
</li>
<li>
					 An LLN Router announces its tree as Default in a TIO unless it also 
					 announces its participation to another tree that it uses as Default.
					 An LBR announces its tree as Default and sets up its default route 
					 over the backhaul or the backbone.
					 An LLN router that attaches to a tree that is announced as Default may select
					 that tree as Default in which case it will propagate the Default information
					 in the TIO for that tree and set up a default route via its parent in that tree.
					 If the route attaches to other trees that are also announced as Default, it will
					 reset the Default for the corresponding TIOs.
                  
</li>
<li>
                     A router sending an RA without TIO is considered a Grounded Default Router at depth 0.
                  
</li>
<li>
                     An LLN Router that is already part of a tree MAY move at any
                     time and with no delay in order to get closer to the root
                     of its current tree, i.e. in order to reduce its own tree depth.
                     But an LLN Router MUST NOT move down the tree that it is
                     attached to unless the potential parent advertises a Sequence Number
					 that is newer than the last Sequence Number known for that tree,
					 indicating that the potential parent is not within this router subtree.
                  
</li>
<li>
                     A LLN Router may move from its current default tree into any different
                     default tree at any time and whatever the depth it reaches in the new
		     	   tree but, before it can do so, it may have to wait for a Tree Hop
		     	   Timer to elapse. If the router was root of its own floating
                     tree, it may join its previous tree (identified by the last
                     parent Tree ID) only if the sequence number in the TIO was
                     incrememented since the LLN Router left that tree, indicating that the
                     candidate parent was not attached behind this LLN Router and kept getting subsequent TIOs from the same tree. The LLN Router will join
                     that other tree if it is preferable for reasons of
                     connectivity, configured preference, available medium time, size,
                     security, bandwidth, tree depth, or whatever metrics the LLN
                     Router cares to use.
                  
</li>
<li>
                     If an LLN Router has selected a new parent router but has
                     not moved yet (because it is waiting for Tree Hop Timer to
                     elapse), it is said to be unstable and refrains from sending Router Advertisement - Tree Information Options.

                  
</li>
<li>
                     When a LLN Router joins a tree, moves within its own tree or
                     receives a modified TIO from its current parent router,
                     it sends out an unsolicited Router Advertisement
                     message with TIO that propagates the new tree information.
                  
</li>
<li>
                     This allows the new higher parts of the tree to be updated first,
                     eventually dragging their sub-tree with them, and allowing
                     stepped sub-tree reconfigurations, limiting relative movements.
                  
</li>
</ol><p>
            
</p>
<a name="disco_treeinfo"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.2"></a><h3>2.2.&nbsp;
Discovery Information</h3>

<p>
               The Tree Information Option carries a number of metrics and other
               information that allows an LLN Router to discover a tree and select
               its parent while avoiding loop generation.
               </p>
<blockquote class="text"><dl>
<dt>TIO Base option</dt>
<dd>
</dd>
<dt></dt>
<dd>
                     The Tree Information Option is a container option, which might
                     contain a number of suboptions. The base option regroups the minimum
                     information set that is mandatory to operate the LLN Discovery
                     Algorithm.
                     
<blockquote class="text"><dl>
<dt>Default (D):</dt>
<dd>The Default (D) flag is set when the tree is
                           used to set up the default route. A router that participates to multiple
						   trees (including self-rooted) announces at most one tree as Default.
</dd>
<dt>Grounded (G):</dt>
<dd>The Grounded (G) flag is set when the tree is
                           attached to a fixed network infrastructure (such as the Internet).
</dd>
<dt>Sequence Number:</dt>
<dd>An integer that is 
                           incremented by the root for each TIO sent on a link. It is propagated unchanged down the tree.
</dd>
<dt>Tree Depth:</dt>
<dd>If the root is attached to a federating     
		   	         backbone, its Tree Depth is 1, otherwise it is 0.
                           The Tree Depth of an LLN Router is the depth of its parent as received in a TIO, incremented by at least
                           one. All the nodes in the tree advertise their Tree Depth in the Tree Information Options that they append to the RA messages as part of the propagation process.
</dd>
<dt>Tree ID:</dt>
<dd>An IPv6 address which uniquely 	   
                           identifies a tree.
                           This value is set by the root to one of its ULA or global addresses or prefixes.
</dd>
<dt> Uniform Path Metric:</dt>
<dd>A scalar measure for the quality of the bi-directional path between the LLN Router and the root.
</dd>
</dl></blockquote>
                  
</dd>
<dt></dt>
<dd>
                     The following values MUST not change during the propagation of the
                     TIO down the tree: G, Sequence Number, Tree Delay and Tree ID.  
					 The Default flag MAY only be reset.
					 All other fields are updated at each hop of the propagation.
                  
</dd>
<dt></dt>
<dd>
                     In addition to the minimum set of information required, a
                     number of options can are used, e.g. for bandwidth, 
                     stability, preference etc.
                  
</dd>
</dl></blockquote><p>
            
</p>
<a name="disco_stability"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2.3"></a><h3>2.3.&nbsp;
Stability</h3>

<p>
               An LLN Router is instable when it is prepared to move shortly to
               another parent Router.  This happens typically when the LLN 
               Router has selected a more preferred candidate parent Router and
               has to wait for the Tree Hop Timer to elapse before roaming.
               Instability may also occur when the current parent Router is lost
               and the next best one is still held up. Instability is resolved when the
               Tree Hop Timer of all the parent Router(s) causing instability
               elapse. 
            
</p>
<p>
               Instability is transient (on the order of Tree Hop Timers). When an
               LLN Router is unstable, it MUST NOT send RAs with TIO.  This
               reduces the likelyhood of loops when LLN Router A wishes to attach to LLN Router B
               and LLN Router B wishes to attach to LLN Router A. Unless RAs
               crisscross, a LLN Router only receives TIO from stable parent Routers,
               which do not plan to attach to it, so it can safely attach to one of them.
            
</p>
<a name="dissemination"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Route Dissemination</h3>

<a name="dissemination_overview"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
Overview</h3>

<p>
               Route Dissemination is the second component of the LLN fundamental mechanisms. 
               As explained previously, the first component, LLN Tree Discovery, establishes a logical tree structure over the
               LLN and sets up default routes towards the root of its Default Tree.
               To establish the routing states towards the nodes in the LLN and enable complete 
               reachability along the tree, it suffices for Route Dissemination
               to advertise up the tree the host ID, prefix and multicast routes.
            
</p>
<p>
               As a result, the Default Router for an LLN Router is its parent up in the Default tree 
               (upstream); and the more specific routes are always oriented down the tree (downstream).
            
</p>
<p>
               LLN Tree Discovery does not only provide loop avoidance for the Route Dissemination protocol; 
               LLN Tree Discovery also triggers Route Dissemination each time a topological change occurs.
               The loopfree structure must be restored before Route Dissemination can operate again 
               and repaint the tree with prefixes, addresses and group membership. 
            
</p>
<p>
               Each logical tree that LLN Tree Discovery forms is considered a separate routing
               topology. If an LLN Router belongs to multiple of such topologies,
               then it is expected that both the Route Dissemination signaling and the data packets
               are flagged to follow the topology for which the packet was introduced in 
               the network.
            
</p>
<p>
               The ROLL Route Dissemination protocol defines a new information vector called the Route Information Option (RIO) to disseminate atomic routing information towards the root of the tree.
            
</p>
<p>
               A parent maintains a state for each information it learns from Route Dissemination.
               Advertisements are sequenced and the last sequence number is kept.  
               An out-of-sequence RIO must be disregarded.  If the RIO information 
               appears valid, it is forwarded to the parent's parent in the next burst, 
               carried by a RIO, together with the parent's own information.
            
</p>
<a name="dissemination_ninooption"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Disseminated Information</h3>

<p>
               Route Dissemination extends RFC4861 and RFC4191 to allow a node to include a
               new Route Information Option in ND messages such as Neighbor Advertisements (NAs).
            
</p>
<p>
               In order to track the freshness of an advertisement, the
               RIO includes a sequence counter that is incremented each time the 
               advertisement is reissued. 
            
</p>
<p>
               An NA is also sent to the new parent once it has been selected after a movement, or
               when the list of advertised information has changed.
            
</p>
<p>
               Route Dissemination may advertise positive (prefix is present) or negative (removed) RIOs.
            
</p>
<p>
               The RIO base option carries sequenced route information for unicast and multicast; 
               it contains:
               </p>
<blockquote class="text"><dl>
<dt>Resource type:</dt>
<dd>Prefix, host, or multicast group
</dd>
<dt>Prefix Length:</dt>
<dd>Number of valid leading bits in the IPv6 Prefix.
</dd>
<dt>RIO Lifetime:</dt>
<dd> The length of time in seconds (relative
                     to the time the packet is sent) that the prefix is valid for route
                     determination. 
</dd>
<dt>RIO Depth:</dt>
<dd>Set to 0 by the router that owns the resource and issues the RIO.
                     Incremented by all routers that propagate the RIO towards the root.
</dd>
<dt>RIO Sequence:</dt>
<dd>Incremented by the router that owns the
                     resource for each new RIO for that
                     prefix.  Left unchanged by all routers that propagate the RIO.  
                    
</dd>
<dt>Prefix:</dt>
<dd>Variable-length field containing a prefix, an IPv6 address or a multicast
                     group id.
</dd>
</dl></blockquote><p>
            
</p>
<a name="dissemination_ROLLrouteroperation"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
LLN Router Operation</h3>

<p>
               Route Dissemination information can be redistributed in another routing protocol, e.g. MANET or
               IGP. But the MANET or the IGP route information SHOULD NOT be redistributed into Route Dissemination.
               This creates a hierarchy of routing protocols where Route Dissemination routes stand
               somewhere between connected and IGP routes. See Section <a class='info' href='#adv_igps'>Section&nbsp;6.1<span> (</span><span class='info'>Interaction with other routing protocols</span><span>)</span></a> for more discussion on integration with other routing 
               protocols.
            
</p>
<p>
               As a result:
            
</p>
<p>
               </p>
<ul class="text">
<li>
                     LLN Tree Discovery establishes a tree using extended Neighbor
                     Discovery RS/RA flows.
                  
</li>
<li>
                     A routing algorithm exploits the tree to optimally move upstream traffic 
                     out of the LLN (default route).
                  
</li>
<li>
                     Route Dissemination extends Neighbor Discovery in order 
                     to quickly establish hop-by-hop routes down the tree. 
                  
</li>
<li>
		     Source Routing can be used to provide additional routes towards nodes in the LLN. When and where there exists hop-by-hop state in routers, 
                     the source routing information can be made sparse.
                  
</li>
</ul><p>
            
</p>
<p>
               Route Dissemination maintains abstract lists of known information.  An entry
               contains the following abstract information:
               </p>
<ul class="text">
<li>A reference to the adjacency that was created for that prefix.
</li>
<li>The IPv6 address of the advertising Neighbor.
</li>
<li>The logical equivalent of the full Route Dissemination information.
</li>
<li>A 'reported' Boolean to keep track whether this prefix was already reported to the parent's parent.
</li>
<li>A counter of retries to count how many TIOs were sent to the neighbor without reachability confirmation for the prefix.
</li>
</ul><p>
            
</p>
<p>
               Route Dissemination stores the entries in either one of 3 abstract lists; the Connected, the Reachable and the Unreachable lists. In practice all are
               part of a route table.
            
</p>
<p>
               The Connected list corresponds to the resources owned by the LLN Router.
            
</p>
<p>
               As long as a router keeps receiving timely RIOs for a given information, its entry is listed in the Reachable list.
            
</p>
<p>
               Once scheduled to be destroyed, an entry is moved to the
               Unreachable list if the router has a parent to which it sends RIOs,
               otherwise the entry is cleaned up right away.  The entry is removed
               from the Unreachable list when the parent changes or after a no-RIO
               has been sent to the parent indicating the loss of the prefix.
            
</p>
<p>
               </p>
<blockquote class="text"><dl>
<dt>RIO Processing</dt>
<dd>
</dd>
<dt></dt>
<dd>
                     When ND sends an NA to the parent, Route Dissemination extends the message with RIO options for:
                     
<ul class="text">
<li>All entries that are not deleted.
</li>
<li>All entries in the removed list, using a no-RIO.
</li>
<li>All entries in the advertised list that are 'not reported yet'. The entries are then set to 'reported'.
</li>
</ul>
                  
</dd>
<dt></dt>
<dd>
                     If an information is advertised as a no-RIO, the associated route is
                     removed, and the entry is transferred to the removed list.
                     Otherwise, the proper routing table is looked up:
                     
<ul class="text">
<li>
                           If a preferred route to that source from another protocol already
                           exists, the RIO is ignored.
                        
</li>
<li>
                           If a new route can be created, a new entry is allocated to
                           track it, as CONFIRMED, but not reported.
                        
</li>
<li>
                           If a Route Dissemination route existed already via the same Neighbor, it is
                           CONFIRMED.
                        
</li>
<li>
                           If an older unicast route existed via a different Neighbor, this is
                           equivalent to a no-RIO for the previous entry followed by a new
                           RIO for the new entry.  So the old entry is scheduled to be
                           destroyed, whereas the new one is installed.
                        
</li>
</ul>
                  
</dd>
<dt>Unicast Route Dissemination messages from child to parent</dt>
<dd>
</dd>
<dt></dt>
<dd>
                     When sending Route Dissemination to its parent, a router includes the RIOs about not
                     already reported entries in the Reachable and Connected lists,
                     as well as no-RIOs for all the entries in the Unreachable list.
                  
</dd>
<dt></dt>
<dd>
                     The TIO from the root is used to synchronize the whole tree.
                     Its period is expected to range from 500ms to hours, depending on the
                     stability of the configuration and the bandwidth available.
                  
</dd>
<dt></dt>
<dd>
                     The design choice behind this is NOT TO synchronize the parent and
                     children databases, but instead to update them regularly to cover
                     from the loss of packets.  The rationale for that choice is network dynamicity.
                     If the topology can be expected to change frequently, synchronization
                     might be an excessive goal in terms of exchanges and protocol
                     complexity.  This results in a simple protocol with no real peering.
                  
</dd>
</dl></blockquote><p>
            
</p>
<a name="forwarding"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Forwarding</h3>

<p>The fundamental mechanisms described in this draft build a DAG to enable communication from the LLN Router nodes to the LLN Border Routers (upstream); a second mechanism informs LLN Routers about their children in the tree, hence enabling LLN Boarder Router to LLN Router communication (downstream) and node-to-node routing along the tree. While the previous sections focus on how routing information is disseminated throughout the LLN and used for routing, this section focuses on the forwarding policies used by LLN Routers.
</p>
<p>Reliability is increased by allowing a node to try several potential next-hop nodes in upstream traffic; downstream traffic is sent along the tree formed by route dissemination.
</p>
<a name="forwarding_in"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Upstream Forwarding</h3>

<p> Forwarding in a LLN needs to account for requirements that are unusual in the IP world:
			</p>
<blockquote class="text"><dl>
<dt>perfect loop freedom is a non-goal</dt>
<dd>
</dd>
<dt></dt>
<dd>the specification allows for the 'wheel model' where a packet circulates a bit around the destination till it finally makes it.
</dd>
<dt>transient forwarding failure are commonplace</dt>
<dd>
</dd>
<dt></dt>
<dd> This specification introduces the capability for the layer 2 to give a packet back to layer 3 in order to try another adjacency.
</dd>
</dl></blockquote><p>
			
</p>
<p>Using the LLN Tree Discovery procedure, LLN Routers expose their path metrics using the Uniform Path Metric field in the TIO.
			Neighbor LLN Routers with a lesser depth in the tree then self are forwarding parents. Neighbor LLN Routers with a same depth in the tree are siblings. 
			Forwarding via parents ensures a loop free operation whereas forwarding via siblings may not be loopfree unless additional measures are taken.
			
</p>
<p>
			The approach taken in this specification is to favor forwarding via parents but still enable forwarding via siblings as a backup option.
			Preferring the parents enables a forwarding gradient towards the LBR that limits the chances of multiple consecutive hops over siblings. 
			This specification also prevents from returning a packet back to the neighbor that just passed it. 
			This simple rule coupled with the forwarding gradient protect against loops for a vast majority of cases, and the specification
			relies on a appropriate setting of the TTL in a given deployment to protect against meltdowns.
			
</p>
<p>In more details: </p>
<ul class="text">
<li>	
			A LLN router MUST send upstream data to its forwarding parent with smallest metric. Note that, depending on the way the routing protocol determines this metric, and the dynamics of the tree, the best forwarding parent at a given point of time is not necessarily the parent with the smallest depth or the parent in the  logical tree defined by the Tree Discovery procedure.
</li>
<li>If the transmission of an upstream packet to that preferred parent fails (due to a node or link failure, or mobility), the LLN router MAY attempt to forward the packet again via other parents, as ordered by best metric.
</li>
<li>If the transmission to both primary and secondary forwarding parents fails, the LLN Router MAY forward the packet via siblings, as ordered by best metric.
</li>
<li>When the transmission fails and the packet is retried via a different neighbor, the router MUST decrease the TTL by one.
</li>
</ul><p>
            
</p>
<p>In order to enable these rules, a LLN router maintains a blacklist per packet being forwarded that contains:
			</p>
<ul class="text">
<li>the neighbor that forwarded the packet to self
			
</li>
<li>neighbors to which forwarding of this packet failed
			
</li>
</ul><p>
			
</p>
<p>These rules are illustrated in the following figure which represents a subset of an LLN.
</p>
<p>
               </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
     D,1,3   B,1,7
         |   /
         |  /
         | /
C,2,9--- A,2,8
</pre></div><p>

            
</p>
<p>An LLN Router is identified by &lt;Id,Depth,Metric>. LLN Router A has three neighbors B,C,D. D is A's primary forwarding parent as it is the neighbor with the smallest Metric amoung neighbors with smaller depth. If transmission to D fails, A sends the packet to B, which is of smaller depth. If transmission to B fails, A transmits to C. Because C is at the same depth as A, a blacklisting policy is used to avoid that C retransmits to A.
</p>
<a name="forwarding_out"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Downstream Forwarding</h3>

<p>
               Downstream routing using LLN fundamental mechanisms can occur using either
               hop-by-hop state, source routing or a combination thereof (loose source route). By default, the LLN Route Dissemination mechanism builds up hop-by-hop distance-vector routing information in each of the routers along the tree up to the root for each address, prefix or group ID. 
            
</p>
<p>
               Source routing can optionally be supported by either requesting a route record header from a node, or by having nodes send periodic route record headers up to the root. If a Route Dissemination route exists to the first entry in the Record Route
               header via the source of the packet, then the router can override the source of the
               packet with its address without adding the original source to the
               Record Route.  At that point, the routing header operation becomes loose, in other words
               an hybrid between transparent hop-by-hop (stateful) and source routing.
            
</p>
<p>Therefore three different downstream techniques are supported:
               </p>
<ul class="text">
<li>Hop-by-hop forwarding. When only partial route dissemination data reaches a LLN Border Router, it only knows the next-hop to a given LLN Router in the network. In this case, each LLN Router relaying downstream data will select the next-hop according to the information it receives during route dissemination.
</li>
<li>Full source routing. When all the route dissemination data reaches a LLN Border Router, it one can choose to specify the full list of LLN Routers to be traversed in each downstream data packet.
</li>
<li>Loose source routing. When the source route information is compressed because of existing state in the routers along the path.
</li>
</ul><p>
            
</p>
<a name="multicast"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Multicast Support</h3>

<a name="multicast_overview"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Overview</h3>

<p>Wherever we mention &lt;MLD>, one can read MLDv2,3 for IPv6. Doing IGMP over the LLN involves:
               </p>
<ul class="text">
<li>LLN Border Router acting as a local Rendez-vous Point (RP) for the LLN and as source towards the Internet for all multicast flows started in the LLN.
</li>
<li>transporting &lt;MLD> in Route Dissemination and recursive coalescence of the multicast requests.
</li>
</ul><p>
            
</p>
<a name="multicast_rxflow"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Receiver Flow</h3>

<p>The LBR is considered as a Rendezvous Point (RP) for all multicast flows issued from inside the LLN. Multicast packets are passed up the tree to the LBR.
</p>
<p>Nodes talk &lt;MLD> to their parent router. The parent router forward the registration and inject their own as a special type of RIO for multicast groups, towards the LBR. The LBR MAY participate to multicast in the infrastructure it is connected to and forward all the packets coming from the LLN.
</p>
<p>Between the parent router and the LBR, &lt;MLD> requests are transported in the RIO; each hop aggregates the requests in a fashion that is similar to proxy IGMP, but this happens recursively between child node to parent router up to the LBR. On the way, multicast routing states are installed in each router from the receiver to the root, enabling multicast routing down the LLN tree.
</p>
<a name="multicast_srcflow"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.3"></a><h3>5.3.&nbsp;
Source flow</h3>

<p>As a Node, the source is unaware of the ROLL protocol, and it uses standard protocols with the router (say in IPv6: Neighbor Discovery, &lt;MLD> etc...). So when it has a multicast packet to send, the source just forwards it to its default router, which is the expected standard behavior. Routers on the way recursively forward to their parent. At each hop, if a multicast route indicates that a listener is reachable via another child (different from that through which the packet was received) then the packet is duplicated and forwarded to that child down the tree.
</p>
<p>If the  LLN Border Router is configured to do so, it will source the packet to a real RP in the Internet.
</p>
<a name="adv"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Advanced Features</h3>

<p>The fundamental mechanisms described in this document are sufficient to allow for upstream and downstream communication inside the LLN. They form a common basis upon which future LLN routing protocols can be designed. This section indicates some possible advanced features which can be integrated to increase efficiency for a particular usage scenarios.
</p>
<a name="adv_igps"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
Interaction with other routing protocols</h3>

<p>
                  While network design and specific use cases are out of scope for this document, it must be noted that the 
LLN fundamental mechanisms described herein might be used in conjunction with other routing protocols 
in order to fulfill the requirements of a particular deployment. Here follows a non exhaustive series of
examples illustrating such interactions.
               
</p>
<a name="adv_igp_dymo"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1.1"></a><h3>6.1.1.&nbsp;
AODV/DYMO</h3>

<p>In the example of a closed loop between a sensor and a switch, a constrained 
			   optimized route must be installed between the 2 devices.
               
</p>
<p>Defining such a specific route is costly and should be performed on-demand when 
			   the bulk of the traffic is buffered data from source to sink.
               
</p>
<p>A reactive MANET protocol such as <a class='info' href='#RFC3561'>AODV<span> (</span><span class='info'>Perkins, C., Belding-Royer, E., and S. Das, &ldquo;Ad hoc On-Demand Distance Vector (AODV) Routing,&rdquo; July&nbsp;2003.</span><span>)</span></a> [RFC3561], <a class='info' href='#RFC4728'>DSR<span> (</span><span class='info'>Johnson, D., Hu, Y., and D. Maltz, &ldquo;The Dynamic Source Routing Protocol (DSR) for Mobile Ad Hoc Networks for IPv4,&rdquo; February&nbsp;2007.</span><span>)</span></a> [RFC4728] or 
			   <a class='info' href='#I-D.ietf-manet-dymo'>DYMO<span> (</span><span class='info'>Chakeres, I. and C. Perkins, &ldquo;Dynamic MANET On-demand (DYMO) Routing,&rdquo; March&nbsp;2010.</span><span>)</span></a> [I&#8209;D.ietf&#8209;manet&#8209;dymo] can be deployed to enable 
			   such routing, though the QoS-constrained approach for AODV is stalled as a draft 
			   (<a class='info' href='#I-D.perkins-manet-aodvqos'>[I&#8209;D.perkins&#8209;manet&#8209;aodvqos]<span> (</span><span class='info'>Perkins, C. and E. Belding-Royer, &ldquo;Quality of Service for Ad hoc On-Demand Distance Vector Routing,&rdquo; November&nbsp;2001.</span><span>)</span></a>).
               
</p>
<a name="adv_igp_olsr"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1.2"></a><h3>6.1.2.&nbsp;
OSPF/OLSR</h3>

<p>
A federating backbone is the virtual root of a collection of trees that forms a single routing topology. If that topology shares a same prefix, 
a sensor device can move freely within the topology without renumbering. The 6LoWPAN backbone link is an example of such a federating backbone 
and in that case, the protocol that enables any to any reachability is simply <a class='info' href='#RFC4861'>IPv6 Neighbor Discovery<span> (</span><span class='info'>Narten, T., Nordmark, E., Simpson, W., and H. Soliman, &ldquo;Neighbor Discovery for IP version 6 (IPv6),&rdquo; September&nbsp;2007.</span><span>)</span></a> [RFC4861].
               
</p>
<p>
In a generalized case with routing and multiple subnets, a traditional IGP such as <a class='info' href='#RFC2740'>OSPF<span> (</span><span class='info'>Coltun, R., Ferguson, D., and J. Moy, &ldquo;OSPF for IPv6,&rdquo; December&nbsp;1999.</span><span>)</span></a> [RFC2740] or a 
MANET protocol such as <a class='info' href='#RFC3626'>OLSR<span> (</span><span class='info'>Clausen, T. and P. Jacquet, &ldquo;Optimized Link State Routing Protocol (OLSR),&rdquo; October&nbsp;2003.</span><span>)</span></a> [RFC3626] can be deployed within the 
federating backbone between the LBR to advertise the routes learnt from the LLN fundamentals dissemination protocol through the
redistribution of route information.

               
</p>
<p>
In turn, the routed federating backbone is just the instantiation at Depth 0 of the more general concept of beltlines. 
A beltline is a set of routers of a same depth in a same tree that form a subarea where an IGP is run and route information from the LLN Route Dissemination protocol is 
redistributed. This creates routes around the root and reduces the load that routing along the tree imposes on the 
lower depth of the tree.
               
</p>
<p> Note that in turn, beltline routes ARE NOT redistributed into LLN Route Dissemination information. As a result, 
the beltlines routes are orthogonal to the route dissemination routes, and they should never collide, which optimizes the value of the control plane of the combination.			   
               
</p>
<p>Beltline routes should be used with caution in order to maintain stability and optimize the resulting routes:
				</p>
<ul class="text">
<li>beltline routes should only be used when a certain topological stability was asserted			   
               
</li>
<li>using beltline routes discourages the reorganization of the tree, mostly when that causes a router to change its depth			   
               
</li>
<li>a divide and conquer approach to limit the size of a beltline enables to manage the cost of the control plane		   
               
</li>
<li>a beltline of depth 2 or more should be an arc as opposed to full circle.In the example of a closed loop between a sensor and a switch, a constrained 
			   optimized route must be installed between the 2 devices.			   
               
</li>
</ul><p>
			   
               
</p>
<a name="adv_igp_mip6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1.3"></a><h3>6.1.3.&nbsp;
MIP6/NEMO</h3>

<p>
 <a class='info' href='#RFC3775'>MIP6<span> (</span><span class='info'>Johnson, D., Perkins, C., and J. Arkko, &ldquo;Mobility Support in IPv6,&rdquo; June&nbsp;2004.</span><span>)</span></a> [RFC3775] and <a class='info' href='#RFC3963'>NEMO<span> (</span><span class='info'>Devarapalli, V., Wakikawa, R., Petrescu, A., and P. Thubert, &ldquo;Network Mobility (NEMO) Basic Support Protocol,&rdquo; January&nbsp;2005.</span><span>)</span></a> [RFC3963] enable a subtree to move away from the tree 
 and maintain reachability as if the nodes in the subtree
were still located in their topologically correct position. This can be useful when a RIO aggregation is performed 
(see <a class='info' href='#adv_aggregation'>Section&nbsp;6.6<span> (</span><span class='info'>Aggregation for Route Dissemination</span><span>)</span></a>) to enable reachability of a stray device. MIP6 be also be useful to enable a mobile display device such as a PDA
 to keep accessing a sensor network remotely without injecting the sensor network prefix into the infrastructure for security reasons.
               
</p>
<a name="adv_opt"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2"></a><h3>6.2.&nbsp;
Route Optimization</h3>

<p>Whereas upstream and downstream communication is made possible by the fundamental mechanisms 
			described in this document, applications may require more require traffic engineering, which may include:
            
</p>
<a name="adv_opt_node"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2.1"></a><h3>6.2.1.&nbsp;
Node-to-node routing</h3>

<p>
                  Node-to-node routing is ensured along the tree by the Route Dissemination protocol, and  the packets flow via the first common parent. This can be optimized if the LLN Border Router has a clear view of the topology (see 'Offline Path Computation' section). In this case, the LLN Border Router can indicate the direct path between both LLN Routers, calculated offline, to the source, the destination, or both. This technique induces a trade-off between multi-hop route efficiency and signaling overhead to setup this direct node-to-node path for instance as suggested in <a class='info' href='#adv_igp_dymo'>Section&nbsp;6.1.1<span> (</span><span class='info'>AODV/DYMO</span><span>)</span></a>.
</p>
<a name="adv_opt_offline"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2.2"></a><h3>6.2.2.&nbsp;
Offline Path Computation</h3>

<p>Whereas nodes might not have the capacity to store and manage enough information to perform constrained routing, it is possible for nodes to report their neighborhood information to the LLN Border routers. LLN Border routers can then share their partial topology databases and get a full picture of the network.
</p>
<p>From there, it is possible to get LLN Border routers to compute shorter or constrained paths and either distribute them (e.g. LDP) or pass the source route information to the end nodes.
</p>
<p>An OSPF example of that goes like this. Nodes run HELLO or similar, and send their LSA in unicast to their LLN Border routers.
			   The LLN Border routers act as proxy for the nodes and share those LSAs with other LLN Border routers over the backbone. 
			   At some point they converge and an LLN Border router will run SPF on behalf of all its registered nodes, one at a time. The SPF computation should end at a certain distance from the node for which it makes more sense to go through the backbone anyway. Then the LLN Border router sends the set of routes to the node as an new topology that can be used in a MTR fashion.           
               
</p>
<a name="adv_opt_graphforwarding"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2.3"></a><h3>6.2.3.&nbsp;
Graph forwarding</h3>

<p>
                  Distance Vector and Link State routing protocols are traditionally designed in terms of:
               
</p>
<p>
                  </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Links -&gt; Metrics -&gt; Routes -&gt; network runtime
</pre></div><p>

               
</p>
<p>Unless traffic engineering kicks in, either the routes are established over the shortest path and the alternate links are wasted or the traffic is load balanced in a fashion that represents the ratio of costs as opposed to the ratio of capacity of the paths.
</p>
<p>Also, the runtime of the network is opaque to the forwarding plane, so the only way to guarantee some end-to-end bandwidth for a class of traffic is to blindly reserve it, leading to even more waste of bandwidth when the reservation is not fully utilized.
</p>
<p>In order to optimize the network utilization, it would be beneficial to detect the saturation of the shortest path and load balance the extra traffic over alternate routes. In the case of ROLL, it is also critical to be able to make a reroute decision on a per packet basis when hop by hop retries are exhausted. Arpanet introduced a feedback loop into the routing protocol by making the metrics dynamic:
</p>
<p>
                  </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Links -&gt;  Metrics -&gt; Routes -&gt; network runtime
          ^                                  |
          |__________________________________|
</pre></div><p>

               
</p>
<p>
                  But this approach was unsuccessful, causing instabilities and
                  disrupting the network.  With dynamic metrics, the duration of the
                  convergence time - or frozen time -,increases with the number of
                  links and the frequency of the metric updates.  During that time,
                  the response of the network is undefined and temporary loops occur.
               
</p>
<p>
                  An approach to solve this problem is having 2 independent sets of metrics:
                  on the one hand, the topological metrics that are rather static and mostly
                  administratively set; and on the other hand, the volatile metrics that
                  are based on dynamic measurements of the network characteristics.
               
</p>
<p>
                  The topological metrics are used by the LLN routing protocol
                  to initially build the tree as described in this specification.
                  The volatile metrics are then used by a forwarding protocol to balance
                  the traffic for that destination over the upstream links, thus modifying
                  the way the graph is being used in runtime, without changing its
                  structure.  
               
</p>
<p>
                  To get there, the control plane operates in 2 phases, in a lollipop fashion:
               
</p>
<p>
                  </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Links-&gt;Metrics-&gt;Routes-&gt;netw. runtime-&gt;runtime metrics-&gt;forwarding
                           ^                                |
                           |________________________________|
&lt;--------------------------&gt; &lt;-----------------------------------&gt;
    ROLL routing protocol        ROLL forwarding protocol
</pre></div><p>

               
</p>
<p>
                  The LLN fundamentals proposal builds shortest path trees to the exits but adds 
                  the capability to forward over another branch if sending a packet to a parent fails,
                  either via any alternate parent or a sibbling. So the paths that we really want to 
                  monitor are along the tree itself and one hop away from the tree. To get there, 
                  the root emits a beacon that is multicasted down the tree and heard one hop away.
                  That beacon gathers the metrics that will be used for alternate parents and 
                  sibblings selection and nodes keep track of the beacon they hear for all the parents
                  and sibblings they want to track. From the beacon, they can infer the quality of
                  the path through all the alternates and compare them.
               
</p>
<a name="density"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.3"></a><h3>6.3.&nbsp;
Density</h3>

<p>
               In a dense environment, it is useless that all routers that can
               provide backhauling service actually do so; in practice, limiting the
               number of routers that accept attached nodes saves memory in the attached nodes
               and reduces the cost of signalling.  Also, limiting the number of forwarding
              LLN Routers in the tree improves the multicast operations.
            
</p>
<p>
               Algorithms such a Trickle could be used by a LLN Router to decide
               to stop providing its access services for attached nodes if there are a
               number of neighboring routers that provide similar services.  The
               simplest abstraction of such similarity is that a multiple routers
               advertising a same depth, though such a simple similarity does not
               address the specifics of a router selection in the plugins.  In a
               more general fashion, a LLN Router can associate the concept of
               similarity with the characteristics of its own parent router
               selection plug in.
            
</p>
<a name="adv_digraph"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.4"></a><h3>6.4.&nbsp;
Digraph Dissemination</h3>

<p>The fundamental techniques described in this draft overlay a tree for source/sink traffic over the physical topology. This tree could be converted into a (bi)graph with additional overhead. A LLN Router would therefore send route dissemination data to both its primary and secondary forwarding parents, hence informing an LLN Border Router of disjoint paths. This makes sense in applications where the gains in increase downstream reliability outweigh the additional signaling overhead.
</p>
<a name="adv_multiple"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.5"></a><h3>6.5.&nbsp;
Multiple LBRs and Trees</h3>

<p>The LLN Tree Discovery technique propagates increasing depths and metrics throughout the network; upstream messages travel on a decreasing metric path back to the LLN Border Router. When the LLN features multiple LBRs, the following options appear:
               </p>
<ul class="text">
<li>If the different LBRs share the same TreeID, an LLN Router implicitly sends its upstream data to the LBR which is closest in terms of aggregated metric. This should be used whenever LBRs play the same role.
</li>
<li>Different LBRs may choose to use different TreeIDs. In this case, a LLN Router is part of multiple trees, one for eachTreeID. When sending an upstream message, a LLN Router chooses on which TreeID it wishes to send, i.e. to which LBR.
</li>
<li>A hybrid case can exist in which some LBRs share the same TreeID while others have their dedicated Tree ID.
</li>
</ul><p>
            
</p>
<p>
               An alternative when having multiple LBRs is to construct multiple trees (e.g. one for each LBR) and choose a default tree for forwarding data. Using an alternate tree is possible only when labeling the data packet accordingly; an unlabeled packet is forwarded on the default tree.
            
</p>
<a name="adv_aggregation"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.6"></a><h3>6.6.&nbsp;
Aggregation for Route Dissemination</h3>

<p>
               </p>
<blockquote class="text"><dl>
<dt>Aggregation of prefixes on a same router</dt>
<dd>
</dd>
<dt></dt>
<dd>
                     When deploying a router with multiple interfaces, it makes sense
                     to assign an aggregation prefix (shorter than /64) to the router and
                     partition it as /64 prefixes over the router interfaces.  A router that owns
                     a contiguous set of prefixes should only report the aggregation of
                     these prefixes through Route Dissemination.
                  
</dd>
<dt>Aggregation of prefixes by a parent acting as ROLL Home</dt>
<dd>
</dd>
<dt></dt>
<dd>
                     There are also a number of cases where a ROLL aggregation is shared
                     within a platoon of LLN Routers.
                                                        In that case, it is still possible
                     to use aggregation techniques with Route Dissemination and improve its scalability.
                     In that case, the parent is configured as the Route Dissemination aggregator for
                     the group prefix.  At run time, it absorbs the individual RIO
                     information it receives from the platoon members down its subtree and
                     only reports the aggregation up the TD tree.  This works fine when
                     the whole platoon is attached within the parent's subtree.
                  
</dd>
<dt></dt>
<dd>
                     But other cases might occur for which additional support is required:
                     
<ol class="text">
<li>the aggregator is attached within the subtree of one of its platoon members.
</li>
<li>a platoon member is somewhere else within the TD tree.
</li>
<li>a platoon member is somewhere else in the Internet.
</li>
</ol>
                  
</dd>
<dt></dt>
<dd>
                     In all those cases, a node situated above the aggregator in the TD
                     tree but not above the platoon member will see the advertisements for
                     the aggregation owned by the aggregator but not that of the individual
                     platoon member prefix.  So it will route all the packets for the platoon
                     member towards the aggregator, but the aggregator will have no route to
                     the platoon and will fail to forward.     
                  
</dd>
</dl></blockquote><p>
            
</p>
<a name="adv_advancedfwd"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.7"></a><h3>6.7.&nbsp;
Advanced Forwarding</h3>

<p>
               A blacklisting policy can be used to avoid routing loops when an upstream data packet is sent between neighbor LLN Routers of the same depth. Alternatively, more general techniques can be used to avoid loops. One is to record the sequence of already traversed nodes in the data packet as it travels along a multi-hop path. When receiving a packet, a LLN Router may know whether it has already relayed that packet; if yes, it can know from which neighbors it had received it and to which it had sent. A distributed version of depth first search can then be used to avoid routing loops. This extension enables upstream packets to be sent to neighbors with a larger depth.
            
</p>
<a name="security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Security Considerations</h3>

<p>
            As this draft suggests the use of new options carried in ICMP ND messages;
            the same security considerations as in <a class='info' href='#RFC4861'>[RFC4861]<span> (</span><span class='info'>Narten, T., Nordmark, E., Simpson, W., and H. Soliman, &ldquo;Neighbor Discovery for IP version 6 (IPv6),&rdquo; September&nbsp;2007.</span><span>)</span></a> apply, in particular with regards to the use of Secure ND <a class='info' href='#RFC3971'>[RFC3971]<span> (</span><span class='info'>Arkko, J., Kempf, J., Zill, B., and P. Nikander, &ldquo;SEcure Neighbor Discovery (SEND),&rdquo; March&nbsp;2005.</span><span>)</span></a> to protect against address theft. 
			Additionally link-layer security should be applied in the 
            case of 6LoWPAN where SeND is not typically possible. 
         
</p>
<a name="iana"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
IANA Considerations</h3>

<p>
            This draft would require two new ICMP options for use with ND: the
            Tree Information Option (TIO) and the Route Information Option (RIO).
         
</p>
<a name="acknowledgments"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Acknowledgments</h3>

<p>
            The authors would like to thank Richard Kelsey, Robert Assimiti, Kris Pister, Mischa Dohler, 
			Julien Abeille, Ryuji Wakikawa, Teco Boot, Patrick Wetterwald, Bryan Mclaughlin 
			and Carlos J. Bernardos for useful design considerations and reviews.
         
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>10.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2460">[RFC2460]</a></td>
<td class="author-text"><a href="mailto:deering@cisco.com">Deering, S.</a> and <a href="mailto:hinden@iprg.nokia.com">R. Hinden</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2460">Internet Protocol, Version 6 (IPv6) Specification</a>,&rdquo; RFC&nbsp;2460, December&nbsp;1998 (<a href="http://www.rfc-editor.org/rfc/rfc2460.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2460.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2460.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4944">[RFC4944]</a></td>
<td class="author-text">Montenegro, G., Kushalnagar, N., Hui, J., and D. Culler, &ldquo;<a href="http://tools.ietf.org/html/rfc4944">Transmission of IPv6 Packets over IEEE 802.15.4 Networks</a>,&rdquo; RFC&nbsp;4944, September&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc4944.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>10.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-manet-dymo">[I-D.ietf-manet-dymo]</a></td>
<td class="author-text">Chakeres, I. and C. Perkins, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-manet-dymo-19.txt">Dynamic MANET On-demand (DYMO) Routing</a>,&rdquo; draft-ietf-manet-dymo-19 (work in progress), March&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-manet-dymo-19.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-roll-building-routing-reqs">[I-D.ietf-roll-building-routing-reqs]</a></td>
<td class="author-text">Martocci, J., Riou, N., Mil, P., and W. Vermeylen, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-roll-building-routing-reqs-09.txt">Building Automation Routing Requirements in Low Power and Lossy Networks</a>,&rdquo; draft-ietf-roll-building-routing-reqs-09 (work in progress), January&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-roll-building-routing-reqs-09.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-roll-home-routing-reqs">[I-D.ietf-roll-home-routing-reqs]</a></td>
<td class="author-text">Brandt, A. and J. Buron, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-roll-home-routing-reqs-11.txt">Home Automation Routing Requirements in Low Power and Lossy Networks</a>,&rdquo; draft-ietf-roll-home-routing-reqs-11 (work in progress), January&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-roll-home-routing-reqs-11.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-roll-indus-routing-reqs">[I-D.ietf-roll-indus-routing-reqs]</a></td>
<td class="author-text">Networks, D., Thubert, P., Dwars, S., and T. Phinney, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-roll-indus-routing-reqs-06.txt">Industrial Routing Requirements in Low Power and Lossy Networks</a>,&rdquo; draft-ietf-roll-indus-routing-reqs-06 (work in progress), June&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-roll-indus-routing-reqs-06.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-roll-terminology">[I-D.ietf-roll-terminology]</a></td>
<td class="author-text">Vasseur, J., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-roll-terminology-03.txt">Terminology in Low power And Lossy Networks</a>,&rdquo; draft-ietf-roll-terminology-03 (work in progress), March&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-roll-terminology-03.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-roll-urban-routing-reqs">[I-D.ietf-roll-urban-routing-reqs]</a></td>
<td class="author-text">Dohler, M., Watteyne, T., Winter, T., Barthel, D., Jacquenet, C., Madhusudan, G., and G. Chegaray, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-roll-urban-routing-reqs-05.txt">Urban WSNs Routing Requirements in Low Power and Lossy Networks</a>,&rdquo; draft-ietf-roll-urban-routing-reqs-05 (work in progress), March&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-roll-urban-routing-reqs-05.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.perkins-manet-aodvqos">[I-D.perkins-manet-aodvqos]</a></td>
<td class="author-text">Perkins, C. and E. Belding-Royer, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-perkins-manet-aodvqos-01.txt">Quality of Service for Ad hoc On-Demand Distance Vector Routing</a>,&rdquo; draft-perkins-manet-aodvqos-01 (work in progress), November&nbsp;2001 (<a href="http://www.ietf.org/internet-drafts/draft-perkins-manet-aodvqos-01.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2740">[RFC2740]</a></td>
<td class="author-text"><a href="mailto:rcoltun@siara.com">Coltun, R.</a>, <a href="mailto:dennis@juniper.com">Ferguson, D.</a>, and <a href="mailto:jmoy@sycamorenet.com">J. Moy</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2740">OSPF for IPv6</a>,&rdquo; RFC&nbsp;2740, December&nbsp;1999 (<a href="http://www.rfc-editor.org/rfc/rfc2740.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3561">[RFC3561]</a></td>
<td class="author-text">Perkins, C., Belding-Royer, E., and S. Das, &ldquo;<a href="http://tools.ietf.org/html/rfc3561">Ad hoc On-Demand Distance Vector (AODV) Routing</a>,&rdquo; RFC&nbsp;3561, July&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3561.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3626">[RFC3626]</a></td>
<td class="author-text">Clausen, T. and P. Jacquet, &ldquo;<a href="http://tools.ietf.org/html/rfc3626">Optimized Link State Routing Protocol (OLSR)</a>,&rdquo; RFC&nbsp;3626, October&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3626.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3775">[RFC3775]</a></td>
<td class="author-text">Johnson, D., Perkins, C., and J. Arkko, &ldquo;<a href="http://tools.ietf.org/html/rfc3775">Mobility Support in IPv6</a>,&rdquo; RFC&nbsp;3775, June&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3775.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3963">[RFC3963]</a></td>
<td class="author-text">Devarapalli, V., Wakikawa, R., Petrescu, A., and P. Thubert, &ldquo;<a href="http://tools.ietf.org/html/rfc3963">Network Mobility (NEMO) Basic Support Protocol</a>,&rdquo; RFC&nbsp;3963, January&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc3963.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3971">[RFC3971]</a></td>
<td class="author-text">Arkko, J., Kempf, J., Zill, B., and P. Nikander, &ldquo;<a href="http://tools.ietf.org/html/rfc3971">SEcure Neighbor Discovery (SEND)</a>,&rdquo; RFC&nbsp;3971, March&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc3971.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4728">[RFC4728]</a></td>
<td class="author-text">Johnson, D., Hu, Y., and D. Maltz, &ldquo;<a href="http://tools.ietf.org/html/rfc4728">The Dynamic Source Routing Protocol (DSR) for Mobile Ad Hoc Networks for IPv4</a>,&rdquo; RFC&nbsp;4728, February&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc4728.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4861">[RFC4861]</a></td>
<td class="author-text">Narten, T., Nordmark, E., Simpson, W., and H. Soliman, &ldquo;<a href="http://tools.ietf.org/html/rfc4861">Neighbor Discovery for IP version 6 (IPv6)</a>,&rdquo; RFC&nbsp;4861, September&nbsp;2007 (<a href="http://www.rfc-editor.org/rfc/rfc4861.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Pascal Thubert</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Cisco Systems</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Village d'Entreprises Green Side</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">400, Avenue de Roumanille</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Batiment T3</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Biot - Sophia Antipolis  06410</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">FRANCE</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+33 4 97 23 26 34</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:pthubert@cisco.com">pthubert@cisco.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Thomas Watteyne</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">UC Berkeley</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">497 Cory Hall #1774</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Berkeley Sensor &amp; Actuator Center</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Berkeley, California  94720-1774</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+1 (510) 333-4437</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:watteyne@eecs.berkeley.edu">watteyne@eecs.berkeley.edu</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Zach Shelby</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Sensinode</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Kidekuja 2</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Vuokatti  88600</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">FINLAND</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+358407796297</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:zach@sensinode.com">zach@sensinode.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Dominique Barthel</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Orange Labs</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">28 chemin du Vieux Chene, BP98</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">BP98</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Meylan  38243</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">FRANCE</td></tr>
<tr><td class="author" align="right">Phone:&nbsp;</td>
<td class="author-text">+33476764522</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:dominique.barthel@orange-ftgroup.com">dominique.barthel@orange-ftgroup.com</a></td></tr>
</table>
</body></html>
