<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Multiplexing of Real-Time Transport Protocol (RTP) Traffic for Browser based Real-Time Communications (RTC)</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 RTP Muxing with SSRC">
<link href="#rfc.section.3" rel="Chapter" title="3 Arguments in Favor of Multiplexing">
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 NAT Resource Preservation">
<link href="#rfc.section.3.2" rel="Chapter" title="3.2 Improved Failure Modes">
<link href="#rfc.section.3.3" rel="Chapter" title="3.3 Setup Time">
<link href="#rfc.section.3.4" rel="Chapter" title="3.4 Complexity">
<link href="#rfc.section.4" rel="Chapter" title="4 Responding to draft-perkins-rtcweb-rtp-usage">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 Requires Additional Signaling">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 QoS and Traffic Engineering">
<link href="#rfc.section.4.3" rel="Chapter" title="4.3 Scalability">
<link href="#rfc.section.4.4" rel="Chapter" title="4.4 RTP Retransmission">
<link href="#rfc.section.4.5" rel="Chapter" title="4.5 Forward Error Correction">
<link href="#rfc.section.4.6" rel="Chapter" title="4.6 RTCP Issues">
<link href="#rfc.section.5" rel="Chapter" title="5 Arguing Against a Shim">
<link href="#rfc.section.6" rel="Chapter" title="6 Conclusion">
<link href="#rfc.references" rel="Chapter" title="7 References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="This document argues that multiplexing of voice and video traffic over a single RTP session should be specified as the baseline mode of operation for multimedia traffic in RTC web. " />
  <meta name="description" content="This document argues that multiplexing of voice and video traffic over a single RTP session should be specified as the baseline mode of operation for multimedia traffic in RTC web. " />
  <meta name="keywords" content="SIP, RTP" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">RTCWEB</td>
<td class="right">J.R. Rosenberg</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">Skype</td>
</tr>
<tr>
<td class="left">Intended status: Informational</td>
<td class="right">C.J. Jennings</td>
</tr>
<tr>
<td class="left">Expires: January 06, 2012</td>
<td class="right">Cisco</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">J.P. Peterson</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Neustar</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">M.K. Kaufman</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Skype</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">E.R. Rescorla</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">RTFM</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">T.T. Terriberry</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Mozilla</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">July 05, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Multiplexing of Real-Time Transport Protocol (RTP) Traffic for Browser based Real-Time Communications (RTC)<br />
  <span class="filename">draft-rosenberg-rtcweb-rtpmux-00</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This document argues that multiplexing of voice and video traffic over a single RTP session should be specified as the baseline mode of operation for multimedia traffic in RTC web. </p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on January 06, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">RTP Muxing with SSRC</a>
</li>
<li>3.   <a href="#rfc.section.3">Arguments in Favor of Multiplexing</a>
</li>
<li>3.1.   <a href="#rfc.section.3.1">NAT Resource Preservation</a>
</li>
<li>3.2.   <a href="#rfc.section.3.2">Improved Failure Modes</a>
</li>
<li>3.3.   <a href="#rfc.section.3.3">Setup Time</a>
</li>
<li>3.4.   <a href="#rfc.section.3.4">Complexity</a>
</li>
<li>4.   <a href="#rfc.section.4">Responding to draft-perkins-rtcweb-rtp-usage</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">Requires Additional Signaling</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">QoS and Traffic Engineering</a>
</li>
<li>4.3.   <a href="#rfc.section.4.3">Scalability</a>
</li>
<li>4.4.   <a href="#rfc.section.4.4">RTP Retransmission</a>
</li>
<li>4.5.   <a href="#rfc.section.4.5">Forward Error Correction</a>
</li>
<li>4.6.   <a href="#rfc.section.4.6">RTCP Issues</a>
</li>
<li>5.   <a href="#rfc.section.5">Arguing Against a Shim</a>
</li>
<li>6.   <a href="#rfc.section.6">Conclusion</a>
</li>
<li>7.   <a href="#rfc.references">References</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">The RTCweb working group is chartered to specify a framework and protocols for enabling real-time communications services within a browser, without the need for plugins <a href="#I-D.rosenberg-rtcweb-framework">[I-D.rosenberg-rtcweb-framework]</a>. It is envisioned that this will enable many use cases <a href="#I-D.ietf-rtcweb-use-cases-and-requirements">[I-D.ietf-rtcweb-use-cases-and-requirements]</a>, the most basic of which is a video call between two users on the web.  </p>
<p id="rfc.section.1.p.2">In order to enable this functionality, the specifications produced by the IETF will mandate a specific set of protocols that must be implemented within the browser. It is anticipated that these protocols will include the Real-Time Transport Protocol <a href="#RFC3550">[RFC3550]</a>, and either in full or in part, Interactive Connectivity Establishment (ICE) <a href="#RFC5245">[RFC5245]</a>.  </p>
<p id="rfc.section.1.p.3">The usage of RTP raises the question of multiplexing - whether or not RTCP and RTP should run on the same port, and furthermore, whether or not voice, video, and possibly data, should also run on the same port. To provide guidance on this, Perkins et. al. produced <a href="#I-D.perkins-rtcweb-rtp-usage">[I-D.perkins-rtcweb-rtp-usage]</a>, which recommends that voice and video utilize different RTP sessions, and thus different UDP ports.  </p>
<p id="rfc.section.1.p.4">This document argues against this conclusion, and advocates that a single transport session (i.e., a single UDP port) is used to carry voice and video traffic, using the SSRC for demux.  </p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> RTP Muxing with SSRC</h1>
<p id="rfc.section.2.p.1">This document recommends that all of the associated media content of the call - the voice, video, and RTCP traffic for both the voice and video sessions, utilize a single transport session (i.e., single UDP port). In cases where there are multiple video streams (for example, screen sharing), the single transport session would carry all of the video. Furthemore, that demultiplexing voice and video traffic is done by assigning a different SSRC to each. This recommendation applies to the case of a single unicast communications session between a pair of endpoints (e.g., this document does not consider the case of running a multi-user service like a gateway).  </p>
<p id="rfc.section.2.p.2">To enable multiplexing, we propose that the 32-bit SSRC value in the RTP header be broken up into the following sub-fields: </p>
<div id="#rfc.figure.1"></div>
<pre>

  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
  |          Magic Cookie         |Type |     StreamID          |x|
  +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre>
<p id="rfc.section.2.p.3">The Magic Cookie is two bytes, with a value of 0xf7b3. It is meant to facilitate DPI applications which can use its value to - with high confidence - determine that this RTP packet uses the encoding format defined here. The type is a 3 bit value, corresponding to the top-level MIME type of the media (mapping table TBD). It too is meant to facilitate DPI applications which want to separate voice and video. The streamID is a 12 bit field which represents the unique ID for this stream. It is signaled between participants out of band. The final bit, 'x' is set to zero and is reserved for future usage.  </p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> Arguments in Favor of Multiplexing</h1>
<p id="rfc.section.3.p.1">This section outlines several arguments in favor of multiplexing.  </p>
<h1 id="rfc.section.3.1">
<a href="#rfc.section.3.1">3.1.</a> NAT Resource Preservation</h1>
<p id="rfc.section.3.1.p.1">Today's Internet is full of Network Address Translators (NAT), a situation which is likely to get worse as IPv4 address exhaustion continues. When NAT is in use, the constraint on the number of endpoints behind the NAT is based on the number of parallel transport sessions that need to be supported. If, for example, a NAT has a single external IP address, it can support 64k UDP sessions while having an endpoint-independent mapping behavior <a href="#RFC4787">[RFC4787]</a>. Thus, in the presence of NAT, parallel transport sessions becomes the scarce resource.  </p>
<p id="rfc.section.3.1.p.2">If rtcweb specifies that audio and video run on a separate port, this will double the number of transport session resources consumed in intervening NATs. While the usage of port as an application layer demux point made sense when RTP was designed back in 1992 (the year the first RTP draft was published), the Internet has changed substantially since then. Continuing to perpetuate this design optimizes preseveration of legacy against protection of resources in the modern Internet. We feel that this optimizes in the wrong direction.  </p>
<p id="rfc.section.3.1.p.3">Given that we anticipate widespread usage of rtcweb, this design choice may create a non-trivial load on the transport session capacity of the Internet at large. Real-time video communications on the Internet has seen huge growth in recent years. For Skype, approximately 40% of its Skype-to-Skype calls are video based. A recent report by Sandvine reports that Skype alone is the third largest source of upload traffic on the Internet as a whole, largely attributed to Skype video calling. <a href="http://www.sandvine.com/downloads/documents/05-17-2011_phenomena/Sandvine%20Global%20Internet%20Phenomena%20Spotlight%20-%20Netflix%20Rising.pdf">http://www.sandvine.com/downloads/documents/05-17-2011_phenomena/Sandvine%20Global%20Internet%20Phenomena%20Spotlight%20-%20Netflix%20Rising.pdf</a>. The conclusion from this is that the costs of a separate voice and video port cannot be ignored.  </p>
<p id="rfc.section.3.1.p.4">Simply put, the usage of transport ports for application demultiplexing should be considered harmful for the Internet.  </p>
<h1 id="rfc.section.3.2">
<a href="#rfc.section.3.2">3.2.</a> Improved Failure Modes</h1>
<p id="rfc.section.3.2.p.1">The usage of separate transport sessions for the audio, video or other content of the call introduces a variety of partial failure modes. The transport session for one type of media might get established; but a NAT capacity problem might cause the transport session for another type of media to fail. Usage of a single transport session means that the conversation succeeds or fails atomically. We consider this a feature.  </p>
<h1 id="rfc.section.3.3">
<a href="#rfc.section.3.3">3.3.</a> Setup Time</h1>
<p id="rfc.section.3.3.p.1">The rtcweb group is considering the usage of ICE to create p2p sessions. ICE provides firewall and NAT traversal in addition to providing a handshake necessary to assure mutual consent for communications.  </p>
<p id="rfc.section.3.3.p.2">Unfortunately, ICE requires time to perform its setup operations. This time grows in proportion to the number of transport sessions which must be opened in order to support the call. By using a different port for video traffic, call setup times will increase. The precise amount of this increase depends on the type of NAT and varies depending on packet loss. However, in a simple, ideal case of no packet loss and direct connectivity between endpoints, this value is XXX [[fill in]].  </p>
<h1 id="rfc.section.3.4">
<a href="#rfc.section.3.4">3.4.</a> Complexity</h1>
<p id="rfc.section.3.4.p.1">ICE is not a simple protocol. One of its significant complexities is its requirement to support calls for multiple media streams, each of which runs on a separate port, and multiple components for each stream (e.g., RTCP). If the concept of streams and components were eliminated, ICE would be a simpler protocol.  </p>
<p id="rfc.section.3.4.p.2">If, within rtcweb, a single transport connection was utilized, browsers could implement a simplified version of the ICE protocol.  </p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> Responding to draft-perkins-rtcweb-rtp-usage</h1>
<p><a href="#I-D.perkins-rtcweb-rtp-usage">[I-D.perkins-rtcweb-rtp-usage]</a> outlines several arguments for continuing to use a separate port for audio and video. In this section, we respond to those arguments.  </p>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> Requires Additional Signaling</h1>
<p><a href="#I-D.perkins-rtcweb-rtp-usage">[I-D.perkins-rtcweb-rtp-usage]</a> argues that multiplexing of voice and video on the same RTP session would require a demux point to be specified (for example, the SSRC), and require additional signaling to be specified to accomplish this.  </p>
<p id="rfc.section.4.1.p.2">Firstly, this conclusion is only partly true. For communications sessions between rtcweb users within the same domain, no signaling specifications are required. This is true in general with rtcweb; one of its benefits is that it does not require standardized signaling.  </p>
<p id="rfc.section.4.1.p.3">Secondly, it is not yet clear that rtcweb will be able to interoperate with existing VoIP endpoitns without a media intermediary to terminate ICE traffic. It is our position that interoperability without media intermediary only be provided for basic voice services, and even then, only when RTCP is supported. In the case of basic voice endpoints, where there is no video, RTP multiplexing of voice and video is irrelevant, and thus no signaling complexity is introduced.  </p>
<p id="rfc.section.4.1.p.4">Thirdly, the primary place where there will be a need for signaling enhancements is for inter-domain calling between rtcweb endpoints in different domains. In such a case, an SDP extension is required, and one can be specified. It is trivial to do so.  </p>
<p id="rfc.section.4.1.p.5">Finally, this document does recommend that it be possible to utilize a separate transport session for voice and for video, and that, in the worst case, this mode can be used for calls between an rtcweb endpoint and a legacy endpoint.  </p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> QoS and Traffic Engineering</h1>
<p><a href="#I-D.perkins-rtcweb-rtp-usage">[I-D.perkins-rtcweb-rtp-usage]</a> argues that multiplexing of voice and video on the same RTP session would mean that it would not be possible to apply QoS techniques separately for voice and video which rely on the 5-tuple.  </p>
<p id="rfc.section.4.2.p.2">Firstly, the public Internet lacks any QoS mechanism, so this argument is moot on the public Internet.  </p>
<p id="rfc.section.4.2.p.3">Secondly, private enterprise networks which do provide QoS most often use diffserv. Diffserv is compatible with utilization of a common port for voice and video traffic. Typically, different DSCPs are used for voice and video (Cisco recommends EF for audio and AF41 for video in enterprise telephony deployments), and this practice is compatible with usage of the same port - each packet would be marked appropriately. It is also possible to use the same DSCP for voice and video.  </p>
<p id="rfc.section.4.2.p.4">Carrier networks, such as mobile operator networks, typically provide QoS through traffic engineering, using a combination of MPLS tunnels and diffserv markings. MPLS tunnels do use 5-tuples as classifiers to determine which traffic to put in what kind of tunnel. If there is a need for using separate MPLS tunnels for voice and video, the DSCP codepoint itself can be used as a differentiator.  </p>
<p id="rfc.section.4.2.p.5">It is true that it would not be possible to utilize RSVP to separately establish QoS treatment for the voice and the video traffic. However, there is very little real deployment of RSVP. None within the public Internet and relatively little within corporate networks. As such, this argument is mostly theoretical.  </p>
<p id="rfc.section.4.2.p.6">Finally, DPI is used within some operator networks to perform traffic classification. It would always be possible to use DPI to assign different treatment to voice and video traffic.  </p>
<h1 id="rfc.section.4.3">
<a href="#rfc.section.4.3">4.3.</a> Scalability</h1>
<p><a href="#I-D.perkins-rtcweb-rtp-usage">[I-D.perkins-rtcweb-rtp-usage]</a> argues that multiplexing of voice and video on the same RTP session would mean that layered coding using multicast for each layer would not be possible.  </p>
<p id="rfc.section.4.3.p.2">Firstly, most layered coding today uses unicast and a switch or mixer of some sort to discard layers. That architecture is completely compatible with the usage of a single transport session for voice and video. The limitation applies only to the use of IP multicast for real-time communications. The usage of multicast on the Internet has substantially diminished over time. There is some usage today in private networks but primarily for streaming media distribution. The usage for real-time communications is quite rare. As such, we find this to be a theoretical corner case.  </p>
<h1 id="rfc.section.4.4">
<a href="#rfc.section.4.4">4.4.</a> RTP Retransmission</h1>
<p><a href="#I-D.perkins-rtcweb-rtp-usage">[I-D.perkins-rtcweb-rtp-usage]</a> argues that multiplexing of voice and video on the same RTP session would not be interoperable with endpoints doing RTP retransmission per <a href="#RFC4588">[RFC4588]</a>.  </p>
<p id="rfc.section.4.4.p.2">As pointed out above, interoperability with existing endpoints without the usage of a media intermediary is not a given at this point, and we argue it should only be supported for the common case - a basic, voice-only RTP-capable endpoint. There is, to our knowledge, relatively little deployment of RFC4588, at least for real-time communications. It is certainly not a common feature in basic RTP endpoints and never a baseline requirement for interoperability. Consequently, if there is a need to interoperate with an endpoint supporting RFC4588, and it is desired to avoid a media intermediary, RFC4588 can just be turned off for the session.  </p>
<p id="rfc.section.4.4.p.3">As such, we find the interoperability argument here not compelling.  </p>
<h1 id="rfc.section.4.5">
<a href="#rfc.section.4.5">4.5.</a> Forward Error Correction</h1>
<p><a href="#I-D.perkins-rtcweb-rtp-usage">[I-D.perkins-rtcweb-rtp-usage]</a> argues that multiplexing of voice and video on the same RTP session will limit the applicability of FEC <a href="#RFC5109">[RFC5109]</a> to when the RTP packets are half of the path MTU.  </p>
<p id="rfc.section.4.5.p.2">There are two cases to consider - interoperability with existing endpoints and usage for calls between rtcweb endpoints.  </p>
<p id="rfc.section.4.5.p.3">For interoperability with existing endpoints, we argue the same thing here as for retransmits. FEC is not commonly used in legacy voice endpoints, and if it is supported, is never a required feature. Consequently, if present, its usage can be disabled when interoperating with an rtcweb endpoint. If FEC is included as part of the rtcweb specifications, the lower bandwidth of voice means that FEC packets could be sent on the same port, using <a href="#RFC2198">[RFC2198]</a>, without approaching the path MTU.  </p>
<p id="rfc.section.4.5.p.4">For communications between rtcweb endpoints, this is only an issue if FEC is included as part of the rtcweb specification. If the group decides to do that (there is some value for real-time video), it should define a mechanism which allows for FEC packets to be sent using a separate SSRC.  </p>
<h1 id="rfc.section.4.6">
<a href="#rfc.section.4.6">4.6.</a> RTCP Issues</h1>
<p><a href="#I-D.perkins-rtcweb-rtp-usage">[I-D.perkins-rtcweb-rtp-usage]</a> argues that multiplexing of voice and video on the same RTP session will introduce complications in the usage of RTCP, primarily when considering RTCP extensions.  </p>
<p id="rfc.section.4.6.p.2">It is our belief that normal RTCP operation as defined in the RTCP specification will work fine with multiplexed voice and video traffic. SRs and RRs are already generated per SSRC to handle multiple senders, and RTCP in general supports feedback for multiple SSRC within a session. These mechanisms work as defined when each SSRC happens to represent a different media stream instead of a different user.  </p>
<p id="rfc.section.4.6.p.3">The only complication that arises is for RTCP extensions which are defined to be media dependent. <a href="#I-D.perkins-rtcweb-rtp-usage">[I-D.perkins-rtcweb-rtp-usage]</a> points out, as an example, the usage of RTCP extended report blocks (XR) <a href="#RFC3611">[RFC3611]</a>. However, XR works fine in conjunction with multiplexing of voice and video within the same port. Each of the seven report blocks defined in <a href="#RFC3611">[RFC3611]</a> include the SSRC of the source as part of the block, and thus will work. <a href="#I-D.perkins-rtcweb-rtp-usage">[I-D.perkins-rtcweb-rtp-usage]</a> indicates that "SSRC purpose tagging needs not only to be one the media side, but also on the RTCP reporting". However, we do not believe this to be accurate. Since the XR blocks report the SSRC source already, the specifications provide all that is needed. The XR report is merely included when it is relevant.  </p>
<p id="rfc.section.4.6.p.4">Furthermore, the discussion around XR assumes that we need to support them for interoperability with existing VoIP endpoints, or we are utilizing it for rtcweb itself. As with FEC and retransmissions, in the case of interoperability, if there is an issue, XR can simply be disabled in these cases. <a href="#RFC3611">[RFC3611]</a> does specify that XR can be sent without prior signaling. In the worst case XR are received by an rtcweb endpoint which are then discarded. In terms of usage of RTCP XR for communications between rtcweb endpoints, we would argue that a much more flexible solution would be to provide Javascript APis which allow the application to have access to the same data used to generate the XR, and then the application itself can use this data as it sees fit, including sending it back to the sender through some kind of application data packet.  </p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> Arguing Against a Shim</h1>
<p id="rfc.section.5.p.1">It has been proposed on the mailing list that an alternative approach for multiplexing on the same port would be to specify a new multiplexing protocol that has a small shim, which could then be used to separate voice and video traffic as a layer between UDP and RTP. Such a shim could then also be used to enable non-RTP data traffic as well.  </p>
<p id="rfc.section.5.p.2">We believe that such a shim would be a mistake, for the same reason that shims have been avoided in the multiplexing of RTCP, STUN, and DTLS on the same port as RTP: </p>
<p></p>

<ul>
<li>The shim would break interoperability with a great deal of existing network inspection gear - firewalls, packet sniffers, traffic analyzers, and so on - which know how to extract, parse, and process RTP packets.  </li>
<li>The shim would add complexity through yet another layer of multiplexing.  </li>
<li>The shim would increase packet overhead further.  </li>
<li>A shim is a mistake which cannot be undone later.  If multiplexing on a single port truly causes interoperability issues, clients can fall back to using multiple ports, possibly even in the preponderance of cases. However, once a shim is inserted, interoperability will always require an intermediary to strip it out, forever.  </li>
</ul>

<p> </p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> Conclusion</h1>
<p id="rfc.section.6.p.1">In conclusion, we feel that benefits of multiplexing of voice and video on a single RTP session (and thus single transport connection), outweight the drawbacks. The primary benefit is the impact on NAT capacity, which is becoming an important issue in the modern Internet. Furthermore, the unique nature of backwards compatibility for rtcweb lessens many of the interoperability concerns, and the traditional arguments around multicast and RSVP are simply no longer relevant and those technologies have faded from use.  </p>
<h1 id="rfc.references">
<a href="#rfc.references">7.</a> References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="I-D.perkins-rtcweb-rtp-usage">[I-D.perkins-rtcweb-rtp-usage]</b></td>
<td class="top">
<a>Perkins, C</a>, <a>Westerlund, M</a> and <a>J Ott</a>, "<a href="http://tools.ietf.org/html/draft-perkins-rtcweb-rtp-usage-03">RTP Requirements for RTC-Web</a>", Internet-Draft draft-perkins-rtcweb-rtp-usage-03, August 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.rosenberg-rtcweb-framework">[I-D.rosenberg-rtcweb-framework]</b></td>
<td class="top">
<a>Rosenberg, J</a>, <a>Kaufman, M</a>, <a>Hiie, M</a> and <a>F Audet</a>, "<a href="http://tools.ietf.org/html/draft-rosenberg-rtcweb-framework-00">An Architectural Framework for Browser based Real-Time Communications (RTC)</a>", Internet-Draft draft-rosenberg-rtcweb-framework-00, February 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-rtcweb-use-cases-and-requirements">[I-D.ietf-rtcweb-use-cases-and-requirements]</b></td>
<td class="top">
<a>Holmberg, C</a>, <a>Hakansson, S</a> and <a>G Eriksson</a>, "<a href="http://tools.ietf.org/html/draft-ietf-rtcweb-use-cases-and-requirements-06">Web Real-Time Communication Use-cases and Requirements</a>", Internet-Draft draft-ietf-rtcweb-use-cases-and-requirements-06, October 2011.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5245">[RFC5245]</b></td>
<td class="top">
<a>Rosenberg, J.</a>, "<a href="http://tools.ietf.org/html/rfc5245">Interactive Connectivity Establishment (ICE): A Protocol for Network Address Translator (NAT) Traversal for Offer/Answer Protocols</a>", RFC 5245, April 2010.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3550">[RFC3550]</b></td>
<td class="top">
<a>Schulzrinne, H.</a>, <a>Casner, S.</a>, <a>Frederick, R.</a> and <a>V. Jacobson</a>, "<a href="http://tools.ietf.org/html/rfc3550">RTP: A Transport Protocol for Real-Time Applications</a>", STD 64, RFC 3550, July 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4787">[RFC4787]</b></td>
<td class="top">
<a>Audet, F.</a> and <a>C. Jennings</a>, "<a href="http://tools.ietf.org/html/rfc4787">Network Address Translation (NAT) Behavioral Requirements for Unicast UDP</a>", BCP 127, RFC 4787, January 2007.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4588">[RFC4588]</b></td>
<td class="top">
<a>Rey, J.</a>, <a>Leon, D.</a>, <a>Miyazaki, A.</a>, <a>Varsa, V.</a> and <a>R. Hakenberg</a>, "<a href="http://tools.ietf.org/html/rfc4588">RTP Retransmission Payload Format</a>", RFC 4588, July 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5109">[RFC5109]</b></td>
<td class="top">
<a>Li, A.</a>, "<a href="http://tools.ietf.org/html/rfc5109">RTP Payload Format for Generic Forward Error Correction</a>", RFC 5109, December 2007.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3611">[RFC3611]</b></td>
<td class="top">
<a>Friedman, T.</a>, <a>Caceres, R.</a> and <a>A. Clark</a>, "<a href="http://tools.ietf.org/html/rfc3611">RTP Control Protocol Extended Reports (RTCP XR)</a>", RFC 3611, November 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2198">[RFC2198]</b></td>
<td class="top">
<a href="mailto:c.perkins@cs.ucl.ac.uk" title="Department of Computer Science">Perkins, C.</a>, <a href="mailto:i.kouvelas@cs.ucl.ac.uk" title="Department of Computer Science">Kouvelas, I.</a>, <a href="mailto:o.hodson@cs.ucl.ac.uk" title="Department of Computer Science">Hodson, O.</a>, <a href="mailto:v.hardman@cs.ucl.ac.uk" title="Department of Computer Science">Hardman, V.</a>, <a href="mailto:mjh@isi.edu" title="USC Information Sciences Institute">Handley, M.</a>, <a href="mailto:bolot@sophia.inria.fr" title="INRIA Sophia Antipolis">Bolot, J.</a>, <a href="mailto:avega@sophia.inria.fr" title="INRIA Sophia Antipolis">Vega-Garcia, A.</a> and <a href="mailto:sfosse@sophia.inria.fr" title="INRIA Sophia Antipolis">S. Fosse-Parisis</a>, "<a href="http://tools.ietf.org/html/rfc2198">RTP Payload for Redundant Audio Data</a>", RFC 2198, September 1997.</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Jonathan Rosenberg</span> 
	  <span class="n hidden">
		<span class="family-name">Rosenberg</span>
	  </span>
	</span>
	<span class="org vcardline">Skype</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:jdrosen@skype.net">jdrosen@skype.net</a></span>

<span class="vcardline">URI: <a href="http://www.jdrosen.net">http://www.jdrosen.net</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Cullen Jennings</span> 
	  <span class="n hidden">
		<span class="family-name">Jennings</span>
	  </span>
	</span>
	<span class="org vcardline">Cisco</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:fluffy@cisco.com">fluffy@cisco.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Jon Peterson</span> 
	  <span class="n hidden">
		<span class="family-name">Peterson</span>
	  </span>
	</span>
	<span class="org vcardline">Neustar</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:jon.peterson@neustar.biz">jon.peterson@neustar.biz</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Matthew Kaufman</span> 
	  <span class="n hidden">
		<span class="family-name">Kaufman</span>
	  </span>
	</span>
	<span class="org vcardline">Skype</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:matthew.kaufman@skype.net">matthew.kaufman@skype.net</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Eric Rescorla</span> 
	  <span class="n hidden">
		<span class="family-name">Rescorla</span>
	  </span>
	</span>
	<span class="org vcardline">RTFM</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:ekr@rtfm.com">ekr@rtfm.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Tim Terriberry</span> 
	  <span class="n hidden">
		<span class="family-name">Terriberry</span>
	  </span>
	</span>
	<span class="org vcardline">Mozilla</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:tterriberry@mozilla.com">tterriberry@mozilla.com</a></span>

  </address>
</div>

</body>
</html>