<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Default Router List Option for DHCPv6 (DRLO) </title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Terminology">
<link href="#rfc.section.3" rel="Chapter" title="3 Pertinence to the MIF Working Group">
<link href="#rfc.section.4" rel="Chapter" title="4 Scenario description">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 Topologies">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Message Exchange">
<link href="#rfc.section.5" rel="Chapter" title="5 DHCPv6 Default router list option">
<link href="#rfc.section.5.1" rel="Chapter" title="5.1 Option format">
<link href="#rfc.section.5.1.1" rel="Chapter" title="5.1.1 Client side">
<link href="#rfc.section.5.1.2" rel="Chapter" title="5.1.2 Server side">
<link href="#rfc.section.5.2" rel="Chapter" title="5.2 Optimization">
<link href="#rfc.section.5.3" rel="Chapter" title="5.3 Default router lifetime management">
<link href="#rfc.section.6" rel="Chapter" title="6 Open issues">
<link href="#rfc.section.7" rel="Chapter" title="7 Acknowledgements">
<link href="#rfc.section.8" rel="Chapter" title="8 IANA Considerations">
<link href="#rfc.section.9" rel="Chapter" title="9 Security Considerations">
<link href="#rfc.references" rel="Chapter" title="10 References">
<link href="#rfc.references.1" rel="Chapter" title="10.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="10.2 Informative References">
<link href="#rfc.appendix.Appendix%20A" rel="Chapter" title="Appendix A ChangeLog">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="Neighbor Discovery protocol is currently considered as the best way for providing a default router to a client in IPv6 networks, typically using a Default Router List.  Hence it was not considered necessary for DHCPv6 to have this feature.  But, recently, some deployment scenarios expressed a need not to use Neighbor Discovery mechanisms.  This draft specifies a new DHCPv6 option providing data necessary for a Client's Default Router List (address, lifetime, MAC address) (indirectly, through the Neighbour Cache).  " />
  <meta name="description" content="Neighbor Discovery protocol is currently considered as the best way for providing a default router to a client in IPv6 networks, typically using a Default Router List.  Hence it was not considered necessary for DHCPv6 to have this feature.  But, recently, some deployment scenarios expressed a need not to use Neighbor Discovery mechanisms.  This draft specifies a new DHCPv6 option providing data necessary for a Client's Default Router List (address, lifetime, MAC address) (indirectly, through the Neighbour Cache).  " />
  <meta name="keywords" content="DHCPv6, default route, default router, lifetime " />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Network Working Group</td>
<td class="right">M. Mouton</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">A. Petrescu</td>
</tr>
<tr>
<td class="left">Intended status: Informational</td>
<td class="right">C. Janneteau</td>
</tr>
<tr>
<td class="left">Expires: February 03, 2012</td>
<td class="right">CEA, LIST</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">August 02, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Default Router List Option for DHCPv6 (DRLO) <br />
  <span class="filename">draft-mouton-mif-dhcpv6-drlo-00.txt</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>Neighbor Discovery protocol is currently considered as the best way for providing a default router to a client in IPv6 networks, typically using a Default Router List.  Hence it was not considered necessary for DHCPv6 to have this feature.  But, recently, some deployment scenarios expressed a need not to use Neighbor Discovery mechanisms.  This draft specifies a new DHCPv6 option providing data necessary for a Client's Default Router List (address, lifetime, MAC address) (indirectly, through the Neighbour Cache).  </p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on February 03, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Terminology</a>
</li>
<li>3.   <a href="#rfc.section.3">Pertinence to the MIF Working Group</a>
</li>
<li>4.   <a href="#rfc.section.4">Scenario description</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">Topologies</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">Message Exchange</a>
</li>
<li>5.   <a href="#rfc.section.5">DHCPv6 Default router list option</a>
</li>
<li>5.1.   <a href="#rfc.section.5.1">Option format</a>
</li>
<li>5.1.1.   <a href="#rfc.section.5.1.1">Client side</a>
</li>
<li>5.1.2.   <a href="#rfc.section.5.1.2">Server side</a>
</li>
<li>5.2.   <a href="#rfc.section.5.2">Optimization</a>
</li>
<li>5.3.   <a href="#rfc.section.5.3">Default router lifetime management</a>
</li>
<li>6.   <a href="#rfc.section.6">Open issues</a>
</li>
<li>7.   <a href="#rfc.section.7">Acknowledgements</a>
</li>
<li>8.   <a href="#rfc.section.8">IANA Considerations</a>
</li>
<li>9.   <a href="#rfc.section.9">Security Considerations</a>
</li>
<li>10.   <a href="#rfc.references">References</a>
</li>
<li>10.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>10.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li>Appendix A.   <a href="#rfc.appendix.Appendix%20A">ChangeLog</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">Neighbor Discovery protocol <a href="#RFC4861">[RFC4861]</a> is currently considered as the best way for providing a default router to a client in IPv6 networks.  Hence it was not considered necessary for DHCPv6 <a href="#RFC3315">[RFC3315]</a> to have this feature.  But recently, some deployment scenarios express a need not to use neighbor discovery autoconfiguration mechanism.  </p>
<p id="rfc.section.1.p.2">This need is justified by configuration management centralization reasons.  Indeed, contrary to Stateless Address Autoconfiguration (SLAAC) <a href="#RFC4862">[RFC4862]</a> which needs to be configured in each router, DHCPv6 configuration is centralized in a server; meaning that all subnets configurations are managed in one configuration file containing all prefix information, DNS server addresses, timers, etc.  Hence, one administering a large, complex architecture including numerous routers may prefer a centralized, stateful autoconfiguration solution like DHCPv6 rather than using SLAAC on each router which is more difficult to debug and reconfigure.  Other cases like multihoming may require a centralized autoconfiguration mechanism for traffic optimization reasons.  </p>
<p id="rfc.section.1.p.3">This draft specifies a new DHCPv6 option.  This option provides data necessary for the ND Neighbor Cache and pointed to by the ND Default Router List (this data is coloquially named "a default router list" from here on).  This option is similar to DHCPv4 option router <a href="#RFC2132">[RFC2132]</a>.  Contrary to DHCPv4, however, this option also provides router lifetime and optionaly router link layer address.  Lifetime and link-layer address are necessary for a coherent implementation of DHCP and ND data structures.  They are particularly useful in the context of mobility and multihoming for managing several default routers in order to solve continuity of service issues.  </p>
<p id="rfc.section.1.p.4">The perspective of using DHCPv6 to provide a default route to a client was previously mentioned in <a href="#I-D.droms-dhc-dhcpv6-default-router">[I-D.droms-dhc-dhcpv6-default-router]</a>.  </p>
<p id="rfc.section.1.p.5">Additionally, <a href="#I-D.ietf-mif-dhcpv6-route-option">[I-D.ietf-mif-dhcpv6-route-option]</a> presents a method to distribute routes, in a generic manner, to DHCP Clients.  This draft does not explicitly treat the default router case, although it does exhibit a capability to communicate a default route as a particular case of a route (use destination prefix "::" with prefix length 0, and address of the default router).  </p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> Terminology</h1>
<p id="rfc.section.2.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">RFC 2119</a> <cite title="NONE">[RFC2119]</cite>.  </p>
<p id="rfc.section.2.p.2">This document uses also the terminology defined in <a href="#RFC3315">[RFC3315]</a>, <a href="#RFC3963">[RFC3963]</a> and <a href="#RFC4862">[RFC4862]</a>.  </p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> Pertinence to the MIF Working Group</h1>
<p id="rfc.section.3.p.1">The Multiple Interfaces WG (MIF) is treating of Hosts which have the ability to attach to multiple networks simultaneously.  The WG is chartered to produce, among other products, extensions to DHCPv6 to "provision client nodes with small amount of static routing information".  </p>
<p id="rfc.section.3.p.2">The mechanism described in this draft, can be used to communicate several default routes (triplets gw-mac-lifetime) to a single Host which can have several interfaces.  </p>
<p id="rfc.section.3.p.3">The distinction among the default routes (once installed on a Client) can be realized according to various criteria: (1) use a form of Preferences, new extensions similar to RFC 4191, (2) use the Lifetime communicated by the mechanism of this draft to distinguish among default routes according to new rules, (3) use a random function to pick a default route, (4) use a new interface name in the ORO and in the Ack to specify which default route uses which interface, (5) use a new field containing a source address which the Client must use for a particular default route, and more.  </p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> Scenario description</h1>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> Topologies</h1>
<p id="rfc.section.4.1.p.1">This section describes two simple topologies: one involving a server and a client and another implying in addition a relay.  </p>
<p id="rfc.section.4.1.p.2">Client/Server topology: </p>
<div id="#rfc.figure.1"></div>
<div id="#xml_topo1"></div>
<pre>
	    
+------+        +------+
|DHCPv6|--------|DHCPv6|
|server|ethernet|client|
+------+        +------+
			
	    </pre>
<p id="rfc.section.4.1.p.3">In this topology, a client with no IPv6 configuration needs to obtain an Internet access and doesn't intend to use SLAAC.  It asks the DHCPv6 Server the three necessary settings: an IPv6 address, a default router address and a DNS server in a solicit message. The DHCPv6 Server receives this Solicit message and sends back the parameters necessary fo IPv6 configuration.  </p>
<p id="rfc.section.4.1.p.4">Client/Relay/Server topology: </p>
<div id="#rfc.figure.2"></div>
<div id="#xml_topo2"></div>
<pre>
	    
+------+        +------+        +------+
|DHCPv6|--....--|DHCPv6|--------|DHCPv6|
|server|ethernet|relay |ethernet|client|
+------+        +------+        +------+	
	    </pre>
<p id="rfc.section.4.1.p.5">Again, a client with no IPv6 configuration tries to obtain an Internet access and doesn't want to use SLAAC. It asks the DHCPv6 server the same way than in previous figure but the DHCPv6 server is not in the same link. The DHCPv6 relay takes client DHCPv6 message and delivers it to the server. The server knows that the message is relayed and send its responses back to the relay.  </p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> Message Exchange</h1>
<p id="rfc.section.4.2.p.1">There are two main message exchange scenarios corresponding to the using or not of a relay. The message exchange when not using a relay is the following: </p>
<div id="#rfc.figure.3"></div>
<div id="#xml_msg_ex1"></div>
<pre>
	    
   +------+                     +------+
   |DHCPv6|                     |DHCPv6|
   |client|                     |server|
   +------+                     +------+
        |                          |
        |    DHCPv6 Solicit        |
        |-------------------------&gt;|
        |                          |
        |    DHCPv6 Advertise      |
        |&lt;-------------------------|
        |                          |
        |    DHCPv6 Request        |
        |-------------------------&gt;|
        |                          |
        |    DHCPv6 Reply          |
        |&lt;-------------------------|
        |                          |					
	    </pre>
<p id="rfc.section.4.2.p.2">A normal exchange between a new Client and a DHCPv6 Server consists in four messages: Solicit, Advertise, Request, and Reply.  In a Solicit/Request packet a Client lists wanted options in the Option Request Option (ORO).  This option is composed of a list of option codes.  The DHCPv6 Server answers those packets with Advertise/Reply packets containing values for the options asked by the Client.  </p>
<p id="rfc.section.4.2.p.3">The message exchange when using a Relay is illustrated in the figure below: </p>
<div id="#rfc.figure.4"></div>
<div id="#xml_msg_ex2"></div>
<pre>
	    
   +------+                    +------+                     +------+
   |DHCPv6|                    |DHCPv6|                     |DHCPv6|
   |client|                    |relay |                     |server|
   +------+                    +------+                     +------+
       |                          |                            |
       |    DHCPv6 Solicit        |      DHCPv6 Relay-forw     |
       |-------------------------&gt;|===========================&gt;|
       |                          |                            |
       |    DHCPv6 Advertise      |      DHCPv6 Relay-reply    |
       |&lt;-------------------------|&lt;===========================|
       |                          |                            |
       |    DHCPv6 Request        |      DHCPv6 Relay-forw     |
       |-------------------------&gt;|===========================&gt;|
       |                          |                            |
       |    DHCPv6 Reply          |      DHCPv6 Relay-reply    |
       |&lt;-------------------------|&lt;===========================|
       |                          |                            |
	    </pre>
<p id="rfc.section.4.2.p.4">The relay receives the message from the client and forwards it to the server in a Relay-forw message. The server replies to the relay with an advertise/reply message encapsulated in a Relay-reply message. The content of this message is extracted by the relay and sent to the client.  </p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> DHCPv6 Default router list option</h1>
<h1 id="rfc.section.5.1">
<a href="#rfc.section.5.1">5.1.</a> Option format</h1>
<h1 id="rfc.section.5.1.1">
<a href="#rfc.section.5.1.1">5.1.1.</a> Client side</h1>
<p id="rfc.section.5.1.1.p.1">In its DHCPv6 requests, the client sends a list of required options in the option request option (ORO). The format of this option is the following: </p>
<div id="#rfc.figure.5"></div>
<div id="#xml_client_option"></div>
<pre>
	      
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|           OPTION_ORO          |           option-len          |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    requested-option-code      |                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                              ...                              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
	      </pre>
<p id="rfc.section.5.1.1.p.2">The proposed option (to fill in the field requested-option-code in the diagram above) is named in this draft OPTION_DEFAULT_ROUTER_LIST.  It is possible to concatenate this value with several other existing requested-option-code's.  </p>
<p id="rfc.section.5.1.1.p.3">The value of this code of this option is TBA.  </p>
<h1 id="rfc.section.5.1.2">
<a href="#rfc.section.5.1.2">5.1.2.</a> Server side</h1>
<p id="rfc.section.5.1.2.p.1">The default router list option is described below: </p>
<div id="#rfc.figure.6"></div>
<div id="#xml_server_option"></div>
<pre>
	      
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   OPTION_DEFAULT_ROUTER_LIST  |          option-len           |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
|                        router_address                         |
|                                                               |
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|        router_lifetime        |    lla_len    |               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+               |
.                 router_link_layer_address(opt)                .
.                              ...                              .
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
	      </pre>
<p id="rfc.section.5.1.2.p.2">As this option contains a list, the pattern containing router_address, router_lifetime, lla_len and optionnaly router_link_layer_address can be repeated.  </p>
<p></p>

<dl>
<dt>option-code</dt>
<dd style="margin-left: 8">
<br> OPTION_DEFAULT_ROUTER_LIST (TBA) </dd>
<dt>option-len</dt>
<dd style="margin-left: 8">
<br> length of the default router list option in bytes. It has a value of minimum 23 (decimal representation).  </dd>
<dt>router_address</dt>
<dd style="margin-left: 8">
<br> default router IPv6 address (16 bytes) </dd>
<dt>router_lifetime</dt>
<dd style="margin-left: 8">
<br> 16-bit unsigned integer.  Router lifetime in units of seconds. Limit value is 9000 and 0 SHOULD NOT appear according to section 6 of [RFC 4861].  </dd>
<dt>lla_len</dt>
<dd style="margin-left: 8">
<br> 8-bit unsigned integer. The size of the link layer address of the router in bytes. Equals to 0 if no link layer address is given.  </dd>
<dt>router_link_layer_address</dt>
<dd style="margin-left: 8">
<br> link layer address of the router. Its length is not known in advance and need to be inquired in lla_len field. This field is optional.  </dd>
</dl>

<p> </p>
<p id="rfc.section.5.1.2.p.4">This option contains an optional variable length field router_link_layer_address. Router_address and router_lifetime field's size are fixed.  </p>
<p id="rfc.section.5.1.2.p.5">There are two alternative possibilities of using router information in the list: </p>
<p></p>

<ul>
<li>Not using router_link_layer_address: DHCPv6 server communicates router_address and router_lifetime with lla_len equals to 0. Default router's information is finished at the end of lla_len.  </li>
<li>Using router_link_layer_address: DHCPv6 server communicates router_address and router_lifetime with lla_len equals to k, where k is the size of the link-layer address.  After the field lla_len the default router's information is finished after reading k more bytes.  </li>
</ul>

<p> </p>
<h1 id="rfc.section.5.2">
<a href="#rfc.section.5.2">5.2.</a> Optimization</h1>
<p id="rfc.section.5.2.p.1">An optimization is possible: removing lla_len field for the last element of a default router list when that is not necessary.  Prima facie, one may consider that removing one byte may not be worth the effort of the implementation complexity.  This is why this draft proposes to apply this optimization in only one simple but fairly frequent case: if the last element (i.e. the triplet address-MAC-lifetime) of a list (if there are more elements) has no link-layer address. As a matter of fact it has the advantage of removing 8 zero bits.  This case happens each time an administrator doesn't want to use router_link_layer_address.  This case is frequent enough to justify an optimization.  Moreover this optimization has been implemented and does not require a huge amount of intellectual effort (around 10 extra lines of code).  </p>
<h1 id="rfc.section.5.3">
<a href="#rfc.section.5.3">5.3.</a> Default router lifetime management</h1>
<p id="rfc.section.5.3.p.1">This draft proposes to use default router lifetime in the same manner as <a href="#RFC4861">[RFC4861]</a>.  This has the following consequences.  </p>
<p id="rfc.section.5.3.p.2">When a default router lifetime is equal to 0 it MUST be deleted from the Default Router list, Neighbor cahce and other related Fowarding Information Bases.  </p>
<p id="rfc.section.5.3.p.3">Following <a href="#RFC4861">[RFC4861]</a> section 6, this draft propose to limit the lifetime to 9000 (decimal) seconds.  </p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> Open issues</h1>
<p id="rfc.section.6.p.1">In addition of default router address, lifetime and link-layer address neighbor discovery mechanism also provide MTU, Hop limit, reachable time, retransmission timer and textual name of the interface.  This information can be defined in other DHCPv6 options extending this draft, if needed.  </p>
<p id="rfc.section.6.p.2">DHCP and Neighbor Discovery protocol manage router lifetime differently. <a href="#RFC3315">[RFC3315]</a> specifies lifetimes typically in a 4-byte field. In the opposite, Neighbor Discovery protocol defines a 2-byte field for lifetime. In addition, it defines a lifetime limit equalling 9000 making the use of 4-byte fields unnecessary.  Because of this, this draft proposes a 2-byte field for router lifetime.  </p>
<p id="rfc.section.6.p.3">Simultaneous use of DHCP and Router Advertisement to communicate default routes is out of the scope of this draft.  </p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#Acknowledgements" id="Acknowledgements">Acknowledgements</a>
</h1>
<p id="rfc.section.7.p.1">The authors would like to acknowledge the useful technical contribution of Mathias Boc and Sofian Imadali.  </p>
<p id="rfc.section.7.p.2">Authors appreciate the particularly stimulating discussion about default route and DHCPv6 in the email lists of DHC, MIF and 6MAN Working Groups.  </p>
<p id="rfc.section.7.p.3">Recently, Tomasz Mrugalski offered insight about default routes potentially used by draft-dec-dhcpv6-route-option-02.  Mikael Abrahamsson suggested communicating a source address when discussing default route and DHCPv6.  </p>
<p id="rfc.section.7.p.4">This work has been performed in the framework of the ICT project ICT-5-258512 EXALTED, which is partly funded by the European Union.  The organisations on the source list [CEA] would like to acknowledge the contributions of their colleagues to the project, although the views expressed in this contribution are those of the authors and do not necessarily represent the project.  </p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#IANA" id="IANA">IANA Considerations</a>
</h1>
<p id="rfc.section.8.p.1">The proper working of this extension to DHCPv6 to support default routers rely on using a unique number for OPTION_DEFAULT_ROUTER_LIST.  </p>
<p id="rfc.section.8.p.2">In this sense, and when agreed to take on this path, IANA will be demanded to assign an option code to OPTION_DEFAULT_ROUTER_LIST, if deemed necessary.  </p>
<p id="rfc.section.8.p.3">Currently, the local prototype implementation uses the number 66 (decimal) for this field.  </p>
<h1 id="rfc.section.9">
<a href="#rfc.section.9">9.</a> <a href="#Security" id="Security">Security Considerations</a>
</h1>
<p id="rfc.section.9.p.1">Security considerations referring to DHCPv6 are described in <a href="#RFC3315">[RFC3315]</a> and other more recent Internet Drafts.  The new option described here should not add new threats.  However, it is worth mentioning that the high importance of a default route (it must work when everything else fails) represents also a high risk when successful attacks - if at all - happen.  </p>
<h1 id="rfc.references">
<a href="#rfc.references">10.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">10.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2132">[RFC2132]</b></td>
<td class="top">
<a href="mailto:sca@engr.sgi.com" title="Silicon Graphics, Inc.">Alexander, S.</a> and <a href="mailto:droms@bucknell.edu" title="Bucknell University">R. Droms</a>, "<a href="http://tools.ietf.org/html/rfc2132">DHCP Options and BOOTP Vendor Extensions</a>", RFC 2132, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3315">[RFC3315]</b></td>
<td class="top">
<a>Droms, R.</a>, <a>Bound, J.</a>, <a>Volz, B.</a>, <a>Lemon, T.</a>, <a>Perkins, C.</a> and <a>M. Carney</a>, "<a href="http://tools.ietf.org/html/rfc3315">Dynamic Host Configuration Protocol for IPv6 (DHCPv6)</a>", RFC 3315, July 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3963">[RFC3963]</b></td>
<td class="top">
<a>Devarapalli, V.</a>, <a>Wakikawa, R.</a>, <a>Petrescu, A.</a> and <a>P. Thubert</a>, "<a href="http://tools.ietf.org/html/rfc3963">Network Mobility (NEMO) Basic Support Protocol</a>", RFC 3963, January 2005.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4861">[RFC4861]</b></td>
<td class="top">
<a>Narten, T.</a>, <a>Nordmark, E.</a>, <a>Simpson, W.</a> and <a>H. Soliman</a>, "<a href="http://tools.ietf.org/html/rfc4861">Neighbor Discovery for IP version 6 (IPv6)</a>", RFC 4861, September 2007.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4862">[RFC4862]</b></td>
<td class="top">
<a>Thomson, S.</a>, <a>Narten, T.</a> and <a>T. Jinmei</a>, "<a href="http://tools.ietf.org/html/rfc4862">IPv6 Stateless Address Autoconfiguration</a>", RFC 4862, September 2007.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">10.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="I-D.droms-dhc-dhcpv6-default-router">[I-D.droms-dhc-dhcpv6-default-router]</b></td>
<td class="top">
<a>Droms, R</a> and <a>T Narten</a>, "<a href="http://tools.ietf.org/html/draft-droms-dhc-dhcpv6-default-router-00">Default Router and Prefix Advertisement Options for DHCPv6</a>", Internet-Draft draft-droms-dhc-dhcpv6-default-router-00, March 2009.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-mif-dhcpv6-route-option">[I-D.ietf-mif-dhcpv6-route-option]</b></td>
<td class="top">
<a>Dec, W</a>, <a>Mrugalski, T</a>, <a>Sun, T</a> and <a>B Sarikaya</a>, "<a href="http://tools.ietf.org/html/draft-ietf-mif-dhcpv6-route-option-03">DHCPv6 Route Options</a>", Internet-Draft draft-ietf-mif-dhcpv6-route-option-03, September 2011.</td>
</tr>
</tbody></table>
<h1 id="rfc.appendix.Appendix A">
<a href="#rfc.appendix.Appendix%20A">Appendix A.</a> <a href="#changelog" id="changelog">ChangeLog</a>
</h1>
<p id="rfc.section.Appendix A.p.1">The changes are listed in reverse chronological order, most recent changes appearing at the top of the list.  </p>
<p id="rfc.section.Appendix A.p.2">From draft-mouton-mif-dhcpv6-drlo-00.txt to draft-mouton-mif-dhcpv6-drlo-01.txt: </p>

<ul><li>Not yet.  </li></ul>

<p> </p>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Maximilien Mouton</span> 
	  <span class="n hidden">
		<span class="family-name">Mouton</span>
	  </span>
	</span>
	<span class="org vcardline">CEA, LIST</span>
	<span class="adr">
	  <span>Communicating Systems Laboratory, Point Courrier 94 </span>

	  <span class="vcardline">
		<span class="locality">Gif-sur-Yvette </span>,  
		<span class="region"></span>
		<span class="code">F-91191 </span>
	  </span>
	  <span class="country-name vcardline">France </span>
	</span>
	<span class="vcardline">Phone: +33 169089223 </span>

<span class="vcardline">EMail: <a href="mailto:maximilien.mouton@cea.fr%20">maximilien.mouton@cea.fr </a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Alexandru Petrescu</span> 
	  <span class="n hidden">
		<span class="family-name">Petrescu</span>
	  </span>
	</span>
	<span class="org vcardline">CEA, LIST</span>
	<span class="adr">
	  <span>Communicating Systems Laboratory, Point Courrier 94 </span>

	  <span class="vcardline">
		<span class="locality">Gif-sur-Yvette </span>,  
		<span class="region"></span>
		<span class="code">F-91191 </span>
	  </span>
	  <span class="country-name vcardline">France </span>
	</span>
	<span class="vcardline">Phone: +33 169089223 </span>

<span class="vcardline">EMail: <a href="mailto:alexandru.petrescu@cea.fr%20">alexandru.petrescu@cea.fr </a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Christophe Janneteau</span> 
	  <span class="n hidden">
		<span class="family-name">Janneteau</span>
	  </span>
	</span>
	<span class="org vcardline">CEA, LIST</span>
	<span class="adr">
	  <span>Communicating Systems Laboratory, Point Courrier 94 </span>

	  <span class="vcardline">
		<span class="locality">Gif-sur-Yvette </span>,  
		<span class="region"></span>
		<span class="code">F-91191 </span>
	  </span>
	  <span class="country-name vcardline">France </span>
	</span>
	<span class="vcardline">Phone: +33 169089182 </span>

<span class="vcardline">EMail: <a href="mailto:christophe.janneteau@cea.fr%20">christophe.janneteau@cea.fr </a></span>

  </address>
</div>

</body>
</html>