



DMM                                                         H. Chan, Ed.
Internet-Draft                                                    X. Wei
Intended status: Informational                       Huawei Technologies
Expires: March 27, 2017                                           J. Lee
                                                    Sangmyung University
                                                                 S. Jeon
                                                 Sungkyunkwan University
                                                             A. Petrescu
                                                               CEA, LIST
                                                              F. Templin
                                          Boeing Research and Technology
                                                      September 23, 2016


                     Distributed Mobility Anchoring
            draft-ietf-dmm-distributed-mobility-anchoring-02

Abstract

   This document defines distributed mobility anchoring to meet diverse
   mobility needs in 5G Wireless and beyond.  Multiple anchors and nodes
   with mobility functions work together to provide IP mobility support.
   A network or network slice may be configured with distributed
   mobility anchoring depending on the needs of mobility support.  In
   the distributed mobility anchoring environment, multiple anchors are
   available for mid-session switching of an IP prefix anchor.  Without
   an ongoing session, i.e., no IP session continuity required, a flow
   of a mobile node can be re-started using a new IP prefix which is
   allocated from a new network of the mobile node and is therefore
   anchored to the new network.  With an ongoing session, the anchoring
   of the prior IP prefix may be relocated to the new network to enable
   IP session continuity.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at http://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."




Chan, et al.             Expires March 27, 2017                 [Page 1]

Internet-Draft       distributed mobility anchoring       September 2016


   This Internet-Draft will expire on March 27, 2017.

Copyright Notice

   Copyright (c) 2016 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   3
   2.  Conventions and Terminology . . . . . . . . . . . . . . . . .   4
   3.  Distributed Mobility Anchoring  . . . . . . . . . . . . . . .   6
     3.1.  Configurations for Different Networks or Network Slices .   6
       3.1.1.  Network-based Mobility Support for a Flat Network . .   7
       3.1.2.  Network-based Mobility Support for a Hierarchical
               Network . . . . . . . . . . . . . . . . . . . . . . .   8
       3.1.3.  Host-based Mobility Support . . . . . . . . . . . . .  11
       3.1.4.  NEtwork MObility (NEMO) Basic Support . . . . . . . .  13
     3.2.  Operations and Parameters . . . . . . . . . . . . . . . .  15
       3.2.1.  Location Management . . . . . . . . . . . . . . . . .  16
       3.2.2.  Forwarding Management . . . . . . . . . . . . . . . .  18
   4.  IP Mobility Handling in Distributed Anchoring Environments -
       Mobility Support Only When Needed . . . . . . . . . . . . . .  24
     4.1.  No Need of IP Mobility: Changing to New IP Prefix/Address  25
       4.1.1.  Guidelines for IPv6 Nodes: Changing to New IP
               Prefix/Address  . . . . . . . . . . . . . . . . . . .  27
     4.2.  Need of IP Mobility . . . . . . . . . . . . . . . . . . .  28
       4.2.1.  Guidelines for IPv6 Nodes: Need of IP Mobility  . . .  30
   5.  IP Mobility Handling in Distributed Mobility Anchoring
       Environments - Anchor Switching to the New Network  . . . . .  31
     5.1.  IP Prefix/Address Anchor Switching for Flat Network . . .  31
       5.1.1.  Guidelines for IPv6 Nodes: Switching Anchor for Flat
               Network . . . . . . . . . . . . . . . . . . . . . . .  32
     5.2.  IP Prefix/Address Anchor Switching for Flat Network with
           Centralized Control Plane . . . . . . . . . . . . . . . .  33
       5.2.1.  Additional Guidelines for IPv6 Nodes:  Switching
               Anchor with Centralized CP  . . . . . . . . . . . . .  36
     5.3.  IP Prefix/Address Anchor Switching for a Hierarchical



Chan, et al.             Expires March 27, 2017                 [Page 2]

Internet-Draft       distributed mobility anchoring       September 2016


           Network . . . . . . . . . . . . . . . . . . . . . . . . .  37
       5.3.1.  Additional Guidelines for IPv6 Nodes:  No Anchoring
               Change with a Hierarchical Network  . . . . . . . . .  39
     5.4.  IP Prefix/Address Anchor Switching for a Hierarchical
           Network . . . . . . . . . . . . . . . . . . . . . . . . .  39
       5.4.1.  Additional Guidelines for IPv6 Nodes:  Switching
               Anchor with Hierarchical Network  . . . . . . . . . .  41
   6.  Security Considerations . . . . . . . . . . . . . . . . . . .  41
   7.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .  41
   8.  Contributors  . . . . . . . . . . . . . . . . . . . . . . . .  41
   9.  References  . . . . . . . . . . . . . . . . . . . . . . . . .  42
     9.1.  Normative References  . . . . . . . . . . . . . . . . . .  42
     9.2.  Informative References  . . . . . . . . . . . . . . . . .  44
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  44

1.  Introduction

   A key requirement in distributed mobility management [RFC7333] is to
   enable traffic to avoid traversing a single mobility anchor far from
   an optimal route.  Distributed mobility management solutions do not
   make use of centrally deployed mobility anchor for a data plane
   [Paper-Distributed.Mobility].  As such, the traffic of a flow SHOULD
   be able to change from traversing one mobility anchor to traversing
   another mobility anchor as a mobile node (MN) moves, or when changing
   operation and management requirements call for mobility anchor
   switching, thus avoiding non-optimal routes.  This draft proposes
   distributed mobility anchoring to enable making such route changes.

   Distributed mobility anchoring employs multiple anchors in the data
   plane.  In general, control plane functions may be separate from data
   plane functions and be centralized but may also be co-located with
   the data plane functions at the distributed anchors.  Different
   configurations of distributed mobility anchoring are described in
   Section 3.1.  For instance, the configurations for network-based
   mobility support in a flat network, for network-based mobility
   support in a hierarchical network, for host-based mobility support,
   and for NEtwork MObility (NEMO) basic support are described
   respectively in Section 3.1.1, Section 3.1.2, Section 3.1.3 and
   Section 3.1.4.  Required operations and parameters for distributed
   mobility anchoring are presented in Section 3.2.  For instance,
   location management is described in Section 3.2.1, forwarding
   management is described in Section 3.2.2.

   An MN attached to an access router of a network or network slice may
   be allocated an IP prefix which is anchored to that router.  It may
   then use an IP address configured from this prefix as the source IP
   address to run a flow with its correspondent node (CN).  When there
   are multiple mobility anchors, an address selection for a given flow



Chan, et al.             Expires March 27, 2017                 [Page 3]

Internet-Draft       distributed mobility anchoring       September 2016


   is first required before the flow is initiated.  Using an anchor in
   an MN's network of attachment has the advantage that the packets can
   simply be forwarded according to the forwarding table.  Although the
   anchor is in the MN's network of attachment when the flow was
   initiated, the MN may later move to another network, so that the IP
   no longer belongs to the current network of attachment of the MN.

   Whether the flow needs IP session continuity will determine how to
   ensure that the IP address of the flow will be anchored to the new
   network of attachment.  If the ongoing IP flow can cope with an IP
   prefix/address change, the flow can be reinitiated with a new IP
   address anchored in the new network as shown in Section 4.1.  On the
   other hand, if the ongoing IP flow cannot cope with such change,
   mobility support is needed as shown in Section 4.2.  A network or
   network slice supporting a mix of flows requiring and not requiring
   IP mobility support will need to distinguish these flows.  The
   guidelines for such network or network slice are described in
   Section 4.1.1.  The general guidelines for such network or network
   slice to provide IP mobility support are described in Section 4.2.1.

   Specifically, IP mobility support can be provided by changing the
   anchoring of the IP prefix/address of the flow from the home network
   of the flow to the new network of attachment.  The basic case may be
   with network-based mobility for a flat network configuration
   described in Section 5.1 with the guidelines described in
   Section 5.1.1.  This case is discussed further with a centralized
   control plane in Section 5.2 with additional guidelines described in
   Section 5.2.1.  A level of hierarchy of nodes may then be added to
   the network configuration.  Mobility involving change in the Data
   Plane Node (DPN) without changing the Data Plane Anchor (DPA) is
   described in Section 5.3 with additional guidelines described in
   Section 5.3.1 Mobility involving change in the DPN without changing
   the DPA is described in Section 5.4 with additional guidelines
   described in Section 5.4.1

2.  Conventions and Terminology

   The key words "MUST", "MUST NOT", "GLUIRED", "SHALL","SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].

   All general mobility-related terms and their acronyms used in this
   document are to be interpreted as defined in the Mobile IPv6 (MIPv6)
   base specification [RFC6275], the Proxy Mobile IPv6 (PMIPv6)
   specification [RFC5213], the "Mobility Related Terminologies"
   [RFC3753], and the DMM current practices and gap analysis [RFC7429].
   These include terms such as mobile node (MN), correspondent node




Chan, et al.             Expires March 27, 2017                 [Page 4]

Internet-Draft       distributed mobility anchoring       September 2016


   (CN), home agent (HA), home address (HoA), care-of-address (CoA),
   local mobility anchor (LMA), and mobile access gateway (MAG).

   In addition, this document uses the following terms:

   Home network of an application session or a home address:  the
      network that has allocated the HoA used for the session identifier
      by the application running in an MN.  The MN may be running
      multiple application sessions, and each of these sessions can have
      a different home network.


   IP prefix/address anchoring:  An IP prefix, i.e., Home Network Prefix
      (HNP), or address, i.e., HoA, allocated to an MN is topologically
      anchored to an anchor node when the anchor node is able to
      advertise a connected route into the routing infrastructure for
      the allocated IP prefix.


   Location Management (LM) function:  managing and keeping track of the
      internetwork location of an MN.  The location information may be a
      binding of the IP advertised address/prefix, e.g., HoA or HNP, to
      the IP routing address of the MN or of a node that can forward
      packets destined to the MN.

      When the MN is a mobile router (MR) carrying a mobile network of
      mobile network nodes (MNN), the location information will also
      include the mobile network prefix (MNP), which is the IP prefix
      delegated to the MR.  The MNP is allocated to the MNNs in the
      mobile network.

      LM is a control plane function.

      In a client-server protocol model, location query and update
      messages may be exchanged between a Location Management client
      (LMc) and a Location Management server (LMs).

      Optionally, there may be a Location Management proxy (LMp) between
      LMc and LMs.

      With separation of control plane and data plane, the LM function
      is in the control plane.  It may be a logical function at the
      control plane node, control plane anchor, or mobility controller.

      It may be distributed or centralized.






Chan, et al.             Expires March 27, 2017                 [Page 5]

Internet-Draft       distributed mobility anchoring       September 2016


   Forwarding Management (FM) function:  packet interception and
      forwarding to/from the IP address/prefix assigned to the MN, based
      on the internetwork location information, either to the
      destination or to some other network element that knows how to
      forward the packets to their destination.

      This function may be used to achieve traffic indirection.  With
      separation of control plane and data plane, the FM function may
      split into a FM function in the data plane (FM-DP) and a FM
      function in the control plane (FM-CP).

      FM-DP may be distributed with distributed mobility management.  It
      may be a function in a data plane anchor or data plane node.

      FM-CP may be distributed or centralized.  It may be a function in
      a control plane node, control plane anchor or mobility controller.


   Security Management (SM) function:  The security management function
      controls security mechanisms/protocols providing access control,
      integrity, authentication, authorization, confidentiality, etc.
      for the control plane and data plane.

      This function resides in all nodes such as control plane anchor,
      data plane anchor, mobile node, and correspondent node.

3.  Distributed Mobility Anchoring

3.1.  Configurations for Different Networks or Network Slices

   The mobility functions may be implemented in different configurations
   of distributed mobility anchoring in architectures separating the
   control and data planes.  The separation described in
   [I-D.ietf-dmm-deployment-models] has defined the home control plane
   anchor (Home-CPA), home data plane anchor (Home-DPA), access control
   plane node (Access-CPN), and access data plane node (Access-DPN),
   which are respectively abbreviated as CPA, DPA, CPN, and DPN here.
   Some configurations are described in
   [I-D.sijeon-dmm-deployment-models].

   Different networks or different network slices may have different
   configurations in distributed mobility anchoring.

   The configurations also differ depending on the desired mobility
   supports: network-based mobility support for a flat network in
   Section 3.1.1, network-based mobility support for a hierarchical
   network in Section 3.1.2, host-based mobility support




Chan, et al.             Expires March 27, 2017                 [Page 6]

Internet-Draft       distributed mobility anchoring       September 2016


   (Section 3.1.3), and NEtwork MObility (NEMO) based support in
   Section 3.1.4.

3.1.1.  Network-based Mobility Support for a Flat Network

   Figure 1 shows two different configurations of network-based mobility
   management for a flat network.

       (a)                                   (b)
                                              +-----+
                                              |LMs  |
                                              +-----+

 +------------+                        +------------+
 |CPA:        |                        |CPA:        |
 |FM-CP, LM   |                        |FM-CP, LMc  |
 +------------+                        +------------+
 +------------+ +------------+         +------------+ +------------+
 |DPA(IPa1):  | |DPA(IPa2):  |         |DPA(IPa1):  | |DPA(IPa2):  |
 |anchors IP1 | |anchors IP2 | ...     |anchors IP1 | |anchors IP2 | ...
 |FM-DP       | |FM-DP       |         |FM-DP       | |FM-DP       |
 +------------+ +------------+         +------------+ +------------+


 +------------+                        +------------+
 |MN(IP1)     |                        |MN(IP1)     |
 |flow(IP1,..)|                        |flow(IP1,..)|
 +------------+                        +------------+

   Figure 1.  Configurations of network-based mobility management for a
   flat network (a) FM-CP and LM at CPA, FM-DP at DPA; (b) Separate LMs,
   FM-CP and LMc at CPA, FM-DP at DPA.

   Figure 1 also shows a distributed mobility anchoring environment with
   multiple instances of the DPA.

   There is an FM-DP function at each of the distributed DPA.

   The control plane may either be distributed (not shown) or
   centralized.  When the CPA co-locates with the distributed DPA there
   will be multiple instances of the co-located CPA and DPA (not shown).

   There is an FM-CP function at the CPA.

   An MN is allocated an IP prefix/address IP1 which is anchored to the
   DPA with the IP prefix/address IPa1.  The MN uses IP1 to communicate
   with a CN not shown in the figure.  The flow of this communication




Chan, et al.             Expires March 27, 2017                 [Page 7]

Internet-Draft       distributed mobility anchoring       September 2016


   session is shown as flow(IP1, ...) which uses IP1 and other
   parameters.

   In Figure 1(a), LM and FM-CP co-locate at CPA.

   Then LM may be distributed or centralized according to whether the
   CPA is distributed (not shown) or centralized.

   Figure 1(b) differs from Figure 1(a) in that the LM function is split
   into a server LMs and a client LMc.

   LMc and FM-CP co-locate at the CPA.

   The LMs may be centralized whereas the LMc may be distributed or
   centralized according to whether the CPA is distributed (not shown)
   or centralized.

3.1.2.  Network-based Mobility Support for a Hierarchical Network

   Figure 2 shows two different configurations of network-based mobility
   management for a hierarchical network.






























Chan, et al.             Expires March 27, 2017                 [Page 8]

Internet-Draft       distributed mobility anchoring       September 2016


       (a)
 +------------+
 |CPA:        |
 |FM-CP, LMs  |
 +------------+
 +------------+                        +------------+
 |DPA(IPa1):  |                        |DPA(IPa2):  |
 |anchors IP1 |                        |anchors IP2 |                ...
 |FM-DP       |                        |FM-DP       |
 +------------+                        +------------+


 +------------+
 |CPN:        |
 |FM-CP, LMc  |
 +------------+
 +------------+ +------------+         +------------+ +------------+
 |DPN(IPn11): | |DPN(IPn12): |         |DPN(IPn21): | |DPN(IPn22)  |
 |FM-DP       | |FM-DP       | ...     |FM-DP       | |FM-DP       | ...
 +------------+ +------------+         +------------+ +------------+


 +------------+                        +------------+
 |MN(IP1)     |                        |MN(IP2)     |
 |flow(IP1,..)|                        |flow(IP2,..)|
 +------------+                        +------------+

   Figure 2(a).  Configurations of network-based mobility management for
   a hierarchical network with FM-CP and LMs at CPA, FM-DP at DPA; FM-CP
   and LMc at CPN, FM-DP at DPN.





















Chan, et al.             Expires March 27, 2017                 [Page 9]

Internet-Draft       distributed mobility anchoring       September 2016


       (b)
        +-----+
        |LMs  |
        +-----+

 +------------+
 |CPA:        |
 |FM-CP, LMp  |
 +------------+
 +------------+                        +------------+
 |DPA(IPa1):  |                        |DPA(IPa2):  |
 |anchors IP1 |                        |anchors IP2 |                ...
 |FM-DP       |                        |FM-DP       |
 +------------+                        +------------+


 +------------+
 |CPN:        |
 |FM-CP, LMc  |
 +------------+
 +------------+ +------------+         +------------+ +------------+
 |DPN(IPn11): | |DPN(IPn12): |         |DPN(IPn21): | |DPN(IPn22)  |
 |FM-DP       | |FM-DP       | ...     |FM-DP       | |FM-DP       | ...
 +------------+ +------------+         +------------+ +------------+


 +------------+                        +------------+
 |MN(IP1)     |                        |MN(IP2)     |
 |flow(IP1,..)|                        |flow(IP2,..)|
 +------------+                        +------------+

   Figure 2(b).  Configurations of network-based mobility management for
   a hierarchical network with separate LMs, FM-CP and LMp at CPA, FM-DP
   at DPA; FM-CP and LMc at CPN, FM-DP at DPN.

   Figures 2 also shows a distributed mobility anchoring environment
   with multiple instances of the DPA.

   In the hierarchy, there may be multiple DPN's for each DPA.

   There is FM-DP at each of the distributed DPA and at each of the
   distributed DPN.

   The control plane may either be distributed (not shown) or
   centralized.

   When the CPA co-locates with the distributed DPA there will be
   multiple instances of the co-located CPA and DPA (not shown).



Chan, et al.             Expires March 27, 2017                [Page 10]

Internet-Draft       distributed mobility anchoring       September 2016


   When the CPN co-locates with the distributed DPN there will be
   multiple instances of the co-located CPN and DPN (not shown).

   There is FM-CP function at the CPA and at the CPN.

   MN is allocated an IP prefix/address IP1 which is anchored to the DPA
   with the IP prefix/address IPa1.  It is using IP1 to communicate with
   a correspondent node (CN) not shown in the figure.  The flow of this
   communication session is shown as flow(IP1, ...) which uses IP1 and
   other parameters.

   In Figure 2(a), LMs and FM-CP are at the CPA.  In addition, there are
   FM-CP and LMc at the CPN.

   LMs may be distributed or centralized according to whether the CPA is
   distributed or centralized.  The CPA may co-locate with DPA or may
   separate.

   Figure 2(b) differs from Figure 2(a) in that the LMs is separated
   out, and a proxy LMp is added between the LMs and LMc.

   LMp and FM-CP co-locate at the CPA.

   FM-CP and LMc co-locate at the CPN.

   The LMs may be centralized whereas the LMp may be distributed or
   centralized according to whether the CPA is distributed or
   centralized.

3.1.3.  Host-based Mobility Support

   Host-based variants of the mobility function configurations from
   Figures 2(a) and 2(b) are respectively shown in Figures 3(a) and 3(b)
   where the role to perform mobility functions by CPN and DPN are now
   taken by the MN.  The MN then needs to possess the mobility functions
   FM and LMc.















Chan, et al.             Expires March 27, 2017                [Page 11]

Internet-Draft       distributed mobility anchoring       September 2016


       (a)                                   (b)
                                              +-----+
                                              |LMs  |
                                              +-----+

 +------------+                        +------------+
 |CPA:        |                        |CPA:        |
 |FM-CP, LMs  |                        |FM-CP, LMp  |
 +------------+                        +------------+
 +------------+ +------------+         +------------+ +------------+
 |DPA(IPa1):  | |DPA(IPa2):  |         |DPA(IPa1):  | |DPA(IPa2):  |
 |anchors IP1 | |anchors IP2 |  ...    |anchors IP1 | |anchors IP2 | ...
 |FM-DP       | |FM-DP       |         |FM-DP       | |FM-DP       |
 +------------+ +------------+         +------------+ +------------+


 +------------+                        +------------+
 |MN(IP1)     |                        |MN(IP1)     |
 |flow(IP1,..)|                        |flow(IP1,..)|
 |FM,    LMc  |                        |FM,    LMc  |
 +------------+                        +------------+

   Figure 3.  Configurations of host-based mobility management (a) FM-CP
   and LMs at CPA, FM-DP at DPA, FM and LMc at MN; (b) Separate LMs, FM-
   CP and LMp at CPA, FM-DP at DPA, FM and LMc at MN.

   Figure 3 shows 2 configurations of host-based mobility management
   with multiple instances of DPA for a distributed mobility anchoring
   environment.

   There is an FM-DP function at each of the distributed DPA.

   The control plane may either be distributed (not shown) or
   centralized.

   When the CPA co-locates with the distributed DPA there will be
   multiple instances of the co-located CPA and DPA (not shown).

   There is an FM-CP function at the CPA.

   The MN possesses the mobility functions such as FM and LMc.

   The MN is allocated an IP prefix/address IP1 which is anchored to the
   DPA with the IP prefix/address IPa1.  It is using IP1 to communicate
   with a CN not shown in the figure.  The flow of this communication
   session is shown as flow(IP1, ...) which uses IP1 and other
   parameters.




Chan, et al.             Expires March 27, 2017                [Page 12]

Internet-Draft       distributed mobility anchoring       September 2016


   In Figure 3(a), LMs and FM-CP co-locate at the CPA.

   The LMs may be distributed or centralized according to whether the
   CPA is distributed (not shown) or centralized.

   Figure 3(b) differs from Figure 3(a) in that the LMs is separated out
   and the proxy LMp is added between the LMs and LMc.

   LMp and FM-CP co-locate at the CPA.

   The LMs may be centralized whereas the LMp may be distributed or
   centralized according to whether the CPA is distributed (not shown)
   or centralized.

3.1.4.  NEtwork MObility (NEMO) Basic Support

   Figure 4 shows two configurations of NEMO basic support for a mobile
   router.

































Chan, et al.             Expires March 27, 2017                [Page 13]

Internet-Draft       distributed mobility anchoring       September 2016


       (a)                                   (b)
                                              +-----+
                                              |LMs  |
                                              +-----+

 +------------+                        +------------+
 |CPA:        |                        |CPA:        |
 |FM-CP, LMs  |                        |FM-CP, LMp  |
 +------------+                        +------------+
 +------------+ +------------+         +------------+ +------------+
 |DPA(IPa1):  | |DPA(IPa2):  |         |DPA(IPa1):  | |DPA(IPa2):  |
 |anchors IP1 | |anchors IP2 |         |anchors IP1 | |anchors IP2 |
 |DHCPv6-PD   | |DHCPv6-PD   |  ...    |DHCPv6-PD   | |DHCPv6-PD   | ...
 |        IPn1| |        IPn2|         |        IPn1| |        IPn2|
 |FM-DP       | |FM-DP       |         |FM-DP       | |FM-DP       |
 +------------+ +------------+         +------------+ +------------+


 +------------+                        +------------+
 |FM-CP  LMc  |                        |FM-CP  LMc  |
 |- - - - - - |                        |- - - - - - |
 |MR(IP1)     |                        |MR(IP1)     |
 |anchors IPn1|                        |anchors IPn1|
 |FM-DP       |                        |FM-DP       |
 +------------+                        +------------+


 +------------+                        +------------+
 |MNN(IPn1)   |                        |MR(IP1n1)   |
 |flow(IPn1,.)|                        |flow(IPn1,.)|
 +------------+                        +------------+

   Figure 4.  Configurations of NEMO basic support for a MR.  (a) FM-CP
   and LMs at CPA, FM-DP at DPA, FM and LMc at MR; (b) Separate LMs, FM-
   CP and LMp at CPA, FM-DP at DPA, FM and LMc at MR.

   Figure 4 shows 2 configurations of host-based mobility management for
   a MR with multiple instances of DPA for a distributed mobility
   anchoring environment.

   There is an FM-DP function at each of the distributed DPA.

   The control plane may either be distributed (not shown) or
   centralized.

   When the CPA co-locates with the distributed DPA there will be
   multiple instances of the co-located CPA and DPA (not shown).




Chan, et al.             Expires March 27, 2017                [Page 14]

Internet-Draft       distributed mobility anchoring       September 2016


   There is FM-CP function at the CPA.

   The MR possesses the mobility functions FM and LMc.

   MR is allocated an IP prefix/address IP1 which is anchored to the DPA
   with the IP prefix/address IPa1.

   A mobile network node (MNN) in the mobile network is allocated an IP
   prefix/address IPn1 which is anchored to the MR with the IP prefix/
   address IP1.

   The MNN is using IPn1 to communicate with a correspondent node (CN)
   not shown in the figure.  The flow of this communication session is
   shown as flow(IPn1, ...) which uses IPn1 and other parameters.

   In Figure 4(a), LMs and FM-CP co-locate at the CPA.

   The LMs may be distributed or centralized according to whether the
   CPA is distributed (not shown) or centralized.

   Figure 4(b) differs from Figure 4(a) in that the LMs is separated out
   and the proxy LMp is added between the LMs and LMc.

   LMp and FM-CP co-locate at the CPA.

   The LMs may be centralized whereas the LMp may be distributed or
   centralized according to whether the CPA is distributed (not shown)
   or centralized.

3.2.  Operations and Parameters

   The operations of distributed mobility anchoring are defined in order
   that they may work together in expected manners to produce a
   distributed mobility solution.  The needed information is passed as
   mobility message parameters, which must be protected in terms of
   integrity.  Some parameters may require a means to support privacy of
   an MN or MR.

   The mobility needs in 5G Wireless and beyond are diverse.  Therefore
   operations needed to enable different distributed mobility solutions
   in different distributed mobility anchoring configurations are
   extensive as illustrated below.  It is however not necessary for
   every distributed mobility solution to exhibit all the operations
   listed in this section.  A given distributed mobility solution may
   exhibit the operations as needed.






Chan, et al.             Expires March 27, 2017                [Page 15]

Internet-Draft       distributed mobility anchoring       September 2016


3.2.1.  Location Management

   An example LM design consists of a distributed database with multiple
   LMs servers.  The location information about the prefix/address of an
   MN is primarily at a given LMs.  Peer LMs may exchange the location
   information with each other.  LMc may retrieve a given record or send
   a given record update to LMs.

   Location management configurations:

   LM-cfg: As shown in Section 3.1:

           LMs may be implemented at CPA, may co-locate with LMc at CPA,
           or may be a separate server.

           LMc may be at CPA, CPN, or MN.

           LMp may proxy between LMs and LMc.

           Specifically:

   Location management operations and parameters:

   LM-cfg:1  LMs may co-locate with LMc at CPA in a flat network with
             network-based mobility as shown in Figure 1(a) in
             Section 3.1.1.

   LM-cfg:2  LMs may be a separate server whereas LMc is implemented in
             CPA in a flat network with network-based mobility as shown
             in Figure 1(b) in Section 3.1.1.

   LM-cfg:3  LMs may be implemented at CPA, whereas LMc is implemented
             at CPN in a hierarchical network with network-based
             mobility as shown in Figure 2(a) in Section 3.1.2 or at MN
             for host-based mobility as shown in Figure 3(a) in
             Section 3.1.3.

   LM-cfg:4  LMs may be a separate server with LMp implemented at CPA
             whereas LMc is implemented at CPN in a hierarchical network
             with network-based mobility as shown in Figure 2(b) in
             Section 3.1.2 or at MN for host-based mobility as shown in
             Figure 3(b) in Section 3.1.3.


   LM-db: LM may manage the location information in a client-server
          database system.

          Example LM database functions are as follows:



Chan, et al.             Expires March 27, 2017                [Page 16]

Internet-Draft       distributed mobility anchoring       September 2016


   LM-db:1  LMc may query LMs about location information for a prefix of
            MN (pull).
            Parameters:
            - IP prefix of MN: integrity support required and privacy
            support may be required.

   LM-db:2  LMs may reply to LMc query about location information for a
            prefix of MN (pull).
            Parameters:
            - IP prefix of MN: integrity support required and privacy
            support may be required
            - IP address of FM-DP/DPA/DPN to forward the packets of the
            flow: integrity support required.

   LM-db:3  LMs may inform LMc about location information for a prefix
            of MN (push).
            Parameters:
            - IP prefix of MN: integrity support required and privacy
            support may be required
            - IP address of FM-DP/DPA/DPN to forward the packets of the
            flow.

            This function in the PMIPv6 protocol is the Update
            Notification (UPN) together with the Update Notification
            Acknowledgment (UPA) as defined in [RFC7077].

   LM-db:4  LMc may inform LMs about update location information for a
            prefix of MN.
            Parameters:
            - IP prefix of MN: integrity support required and privacy
            support may be required
            - IP address of FM-DP/DPA/DPN to forward the packets of the
            flow: integrity support required

            This function in the MIPv6 / PMIPv6 protocol is the Binding
            Update (BU) / Proxy Binding Update (PBU) together with the
            Binding Acknowledgment (BA) / Proxy Binding Acknowledgment
            (PBA) as defined in [RFC6275] / [RFC5213] respectively.

   LM-db:5  The MN may be a host or a router.  When the MN is an MR, the
            prefix information may include the MNP delegated to the MR.
            Additional parameters:
            MNP: integrity support required and privacy support may be
            required


   LM-svr: The LM may be a distributed database with multiple LMs
           servers.



Chan, et al.             Expires March 27, 2017                [Page 17]

Internet-Draft       distributed mobility anchoring       September 2016


           For example:

   LM-svr:1  A LMs may join a pool of LMs servers.
             Parameters:
             - IP address of the LMs: integrity support required
             - IP prefixes for which the LMs will host the primary
             location information: integrity support required.

   LM-svr:2  LMs may query a peer LMs about location information for a
             prefix of MN.
             Parameters:
             - IP prefix: integrity support required and privacy support
             may be required.

   LM-svr:3  LMs may reply to a peer LMs about location information for
             a prefix of MN.
             Parameters:
             - IP prefix of MN: integrity support required and privacy
             support may be required
             - IP address of FM-DP/DPA/DPN to forward the packets of the
             flow: integrity support required.

   The parameters indicated above are only the minimal.  In a specific
   mobility protocol, additional parameters should be added as needed.
   Examples of these additional parameters are those passed in the
   mobility options of the mobility header for MIPv6 [RFC6275] and for
   PMIPv6 [RFC5213].

3.2.2.  Forwarding Management

   Forwarding management configurations:

   FM-cfg: As shown in Section 3.1:

           FM-CP may be implemented at CPA, CPN, MN depending on the
           configuration chosen.

           FM-DP may also be implemented at CPA, CPN, MN depending on
           the configuration chosen.

           Specifically:

   FM-cfg:1  FM-CP and FM-DP may be implemented at CPA and DPA
             respectively in a flat network with network-based mobility
             as shown in Figure 1(a) and Figure 1(b) in Section 3.1.1.

   FM-cfg:2  FM-CP may be implemented at both CPA and CPN and FM-DP is
             implemented at both DPA and DPN in a hierarchical network



Chan, et al.             Expires March 27, 2017                [Page 18]

Internet-Draft       distributed mobility anchoring       September 2016


             with network-based mobility as shown in Figure 2(a) and
             Figure 2(b) in Section 3.1.2.

   FM-cfg:3  FM-CP and FM-DP may be implemented at CPA and DPA
             respectively and also both implemented at MN for host-based
             mobility as shown in Figure 3(a) and Figure 3(b) in
             Section 3.1.3.


   Forwarding management operations and parameters:

   FM-find:1  An anchor may discover and be discovered such as through
              an anchor registration system as follows:

   FM-find:2  FM registers and authenticates itself with a centralized
              mobility controller.
              Parameters:
              - IP address of DPA and its CPA: integrity support
              required
              - IP prefix anchored to the DPA: integrity support
              required

              registration reply: acknowledge of registration and echo
              the input parameters.

   FM-find:3  FM discovers the FM of another IP prefix by querying the
              mobility controller based on the IP prefix.
              Parameters:
              - IP prefix of MN: integrity support required and privacy
              support may be required

   FM-find:4  when making anchor discovery FM expects the answer
              parameters:
              - IP address of DPA to which IP prefix of MN is anchored:
              integrity support required
              - IP prefix of the corresponding CPA: integrity support
              required

   FM-flow:1  The FM may be carried out on the packets to/from an MN up
              to the granularity of a flow.

   FM-flow:2  Example matching parameters are in the 5-tuple of a flow.


   FM-cpdp: With separation of control plane function and data plane
            function, FM-CP and FM-DP communicate with each other.  Such
            communication may be realized by the appropriate messages in
            [I-D.ietf-dmm-fpc-cpdp].



Chan, et al.             Expires March 27, 2017                [Page 19]

Internet-Draft       distributed mobility anchoring       September 2016


            For example:


   FM-cpdp:1  CPA/FM-CP sends forwarding table updates to DPA/FM-DP.
              Parameters:
              - New forwarding table entries to add: integrity support
              required
              - Expired forwarding table entries to delete: integrity
              support required

   FM-cpdp:2  DPA/FM-DP sends to CPA/FM-CP about its status and load.
              Parameters:
              - State of forwarding function being active or not:
              integrity support required
              - Loading percentage: integrity support required

   FM-path:1  FM may change the forwarding path of a flow upon a change
              of point of attachment of a MN.  Prior to the changes,
              packets coming from the CN to the MN would traverse from
              the CN to the home network anchor of the flow for the MN
              before reaching the MN.  Changes are from this original
              forwarding path or paths to a new forwarding path or paths
              from the CN to the current AR of the MN and then the MN
              itself.

   FM-path:2  As an incoming packet is forwarded from the CN to the MN,
              the far end where forwarding path change begins may in
              general be any node in the original forwarding path from
              the CN to the home network DPA.  The packet is forwarded
              to the MN for host-based mobility and to a node in the
              network which will deliver the packets to the MN for
              network-based mobility.  The near-end is generally a DPN
              with a hierarchical network but may also be another node
              with DPA capability in a flattened network.

   FM-path:3  The mechanisms to accomplish such changes may include
              changes to the forwarding table and indirection such as
              tunneling, rewriting packet header, or NAT.

              Note: An emphasis in this document in distributed mobility
              anchoring is to explain the use of multiple anchors to
              avoid unnecessarily long route which may be encountered in
              centralized mobility anchoring.  It is therefore not the
              emphasis of this document on which particular mechanism to
              choose from.






Chan, et al.             Expires March 27, 2017                [Page 20]

Internet-Draft       distributed mobility anchoring       September 2016


   FM-path-tbl:4  With forwarding table updates, changes to the
                  forwarding table are needed at each of the affected
                  forwarding switches in order to change the forwarding
                  path of the packets for the flow from that originally
                  between the CN and the home network anchor to that
                  between the CN and the new AR.

                  Forwarding table updates may be achieved through BGP
                  update as described in [I-D.templin-aerolink],
                  [I-D.mccann-dmm-flatarch] and also for 3GPP Evolved
                  Packet Core (EPC) network in
                  [I-D.matsushima-stateless-uplane-vepc] when the scope
                  and response time can be managed.  Alternatively, a
                  centralized control plane may be used.

                  When the control plane is centralized, forwarding
                  table updates may be achieved through messaging
                  between the centralized control plane and the
                  distributed forwarding switches as described above
                  (FM-cpdp) in this section.

                  Forwarding table updates may be triggered using
                  DHCPv6-PD prefix delegation to change the role of IP
                  anchoring from the home network anchor (with FM-DP) to
                  the new anchor (with FM-DP) to which the MN is
                  currently attached.  The new anchor will then
                  advertise routes for the delegated prefix.

                  With a distributed routing protocol, the updates
                  spread out from neighbors to neighbors and will affect
                  all the forwarding switches such that the packets sent
                  from "any" node to MN will go to the new AR.

                  Yet the scope of such updates for a given flow may be
                  confined to only those forwarding switches such that
                  the packets sent only from the "CN" to MN will go to
                  the new AR.  Such confinement may be made when using a
                  centralized central plane possessing a global view of
                  all the forwarding switches.

   FM-path-tbl:5  FM reverts the changes previously made to the
                  forwarding path of a flow when such changes are no
                  longer needed, e.g., when all the ongoing flows using
                  an IP prefix/address requiring IP session continuity
                  have closed.  When using DHCPv6-PD, the forwarding
                  paths will be reverted upon prefix lease expiration.





Chan, et al.             Expires March 27, 2017                [Page 21]

Internet-Draft       distributed mobility anchoring       September 2016


   FM-path-ind:6  Indirection forwards the incoming packets of the flow
                  from the DPA at the far end to a DPA/DPN at the near
                  end of indirection.  Both ends of the indirection
                  needs to know the LM information of the MN for the
                  flow and also needs to possess FM capability to
                  perform indirection.

   FM-path-ind:7  The mechanism of changing the forwarding path in
                  [RFC6275] and [RFC5213] is tunneling.  In the control
                  plane, the FM-CP sets up the tunnel by instructing the
                  FM-DP at both ends of the tunnel.  In the data plane,
                  the FM-DP at the start of the tunnel performs packet
                  encapsulation, whereas the FM-DP at the end of the
                  tunnel decapsulates the packet.

                  Note that in principle the ends of the indirection
                  path can be any pair of network elements with the FM-
                  DP function.

   FM-path-ind:8  FM reverts the changes previously made to the
                  forwarding path of a flow when such changes are no
                  longer needed, e.g., when all the ongoing flows using
                  an IP prefix/address requiring IP session continuity
                  have closed.  When tunneling is used, the tunnels will
                  be torn down when they are no longer needed.


   FM-DPA:1  Recall from above that for the incoming packets from the
             CN, forwarding path change by FM is from the DPA at the far
             end which may be at any forwarding switch (or even CN
             itself) in the original forwarding path to the near end
             DPA/DPN.

             It is necessary that any incoming packet from the CN of the
             flow must traverse the DPA (or at least one of the DPAs,
             e.g., in the case of anycast) at the far end in order for
             the packet to detour to a new forwarding path.

             Therefore a convenient design is to locate the far end DPA
             at a unique location which is always in the forwarding
             path.  This is the case in a centralized mobility design
             where the DPA at the far end is the home network anchor of
             the flow.

             Distributed mobility however may place the far end DPA at
             other locations in order to avoid unnecessarily long route.





Chan, et al.             Expires March 27, 2017                [Page 22]

Internet-Draft       distributed mobility anchoring       September 2016


   FM-DPA:2  With multiple nodes possessing DPA capabilities, the role
             of FM to begin path change for the incoming packets of a
             flow at the home network DPA at the far end may be passed
             to or added to that of another DPA.

             In particular, this DPA role may be moved upstream from the
             home network DPA in the original forwarding path from CN to
             MN.

   FM-DPA:3  Optimization of the new forwarding path may be achieved
             when the path change for the incoming packets begins at a
             DPA where the original path and the direct IPv6 path
             overlaps.  Then the new forwarding path will resemble the
             direct IPv6 path from the CN to the MN.


   FM-DPA-tbl:4  Forwarding table updates, such as that triggered using
                 DHCPv6-PD to change the role of IP anchoring from the
                 home network anchor (DPA with FM-DP) to the new anchor
                 (DPA with FM-DP), may put the near end of the path
                 change at the new DPA.  Subsequent forwarding table
                 updates may propagates upstream up to a far end where
                 the original path and the direct IPv6 path overlaps.

                 When that far end is too far upstream the signaling of
                 forwarding table updates may become excessive.  An
                 alternative is to use indirection (see FM-DPA-ind) from
                 that far end to the new DPA at the near end.

                 Still another alternative is to combine forwarding
                 table update with indirection.

   FM-DPA-tbl:5  Changes made by FM to the following tables, which are
                 IPv6 nodes, at the ends of the path change for a flow
                 will be reverted when the mobility support for the flow
                 is no longer needed, e.g., when the flows have
                 terminated.


   FM-DPA-ind:6  With indirection, locating or moving the FM function to
                 begin indirection upstream along the forwarding path
                 from CN to MN again may help to reduce unnecessarily
                 long path.

   FM-DPA-ind:7  Changes made by FM to establish indirection at the DPA
                 and DPN, which are IPv6 nodes, at the ends of the path
                 change for a flow will be reverted when the mobility




Chan, et al.             Expires March 27, 2017                [Page 23]

Internet-Draft       distributed mobility anchoring       September 2016


                 support for the flow is no longer needed, e.g., when
                 the flows have terminated.


   FM-state:1  In addition to the above, a flow/session may contain
               states with the required information for QoS, charging,
               etc. as needed.  These states need to be transferred from
               the old anchor to the new anchor.


   FM-buffer:1  An anchor can buffer packets of a flow in a mobility
                event:
   FM-buffer:2  CPA/FM-CP informs DPA/FM-DP to buffer packets of a flow.
                Trigger:
                - MN leaves DPA in a mobility event.
                Parameters:
                - IP prefix of the flow for which packets need to be
                buffered: integrity support required

   FM-buffer:3  CPA/FM-CP on behalf of a new DPA/FM-DP informs the CPA/
                FM-CP of the prior DPA/FM-DP that it is ready to receive
                any buffered packets of a flow.
                Parameters:
                - Destination IP prefix of the flow's packets: integrity
                support required
                - IP address of the new DPA: integrity support required

   FM-mr:1  When the MN is a mobile router the access router anchoring
            the IP prefix of MR will also anchor the IP prefix or
            prefixes delegated to the MR.


4.  IP Mobility Handling in Distributed Anchoring Environments -
    Mobility Support Only When Needed

   IP Mobility Support Only When Needed:

   IP mobility support may be provided only when needed instead of being
   provided by default.  The LM and FM functions in the different
   configurations shown in Section 3.1 are then utilized only when
   needed.

   A straightforward choice of mobility anchoring is for a flow to use
   the IP prefix of the network to which the MN is attached when the
   flow is initiated [I-D.seite-dmm-dma].

   The IP prefix/address at the MN's side of a flow may be anchored at
   the access router to which the MN is attached.  For example, when an



Chan, et al.             Expires March 27, 2017                [Page 24]

Internet-Draft       distributed mobility anchoring       September 2016


   MN attaches to a network (Net1) or moves to a new network (Net2), it
   is allocated an IP prefix from the attached network.  In addition to
   configuring new link-local addresses, the MN configures from this
   prefix an IP address which is typically a dynamic IP address.  It
   then uses this IP address when a flow is initiated.  Packets to the
   MN in this flow are simply forwarded according to the forwarding
   table.

   There may be multiple IP prefixes/addresses that an MN can select
   when initiating a flow.  They may be from the same access network or
   different access networks.  The network may advertise these prefixes
   with cost options [I-D.mccann-dmm-prefixcost] so that the mobile node
   may choose the one with the least cost.  In addition, these IP
   prefixes/addresses may be of different types regarding whether
   mobility support is needed [I-D.ietf-dmm-ondemand-mobility].  A flow
   will need to choose the appropriate one according to whether it needs
   IP mobility support.

4.1.  No Need of IP Mobility: Changing to New IP Prefix/Address

   When IP mobility support is not needed for a flow, the LM and FM
   functions are not utilized so that the configurations in Section 3.1
   are simplified as shown in Figure 5.

Net1                                                   Net2

+---------------+                                      +---------------+
|AR1            |                                      |AR2            |
+---------------+                                      +---------------+
|CPA:           |                                      |CPA:           |
|---------------|                                      |---------------|
|DPA(IPa1):     |                                      |DPA(IPa2):     |
|anchors IP1    |                                      |anchors IP2    |
+---------------+                                      +---------------+


+...............+                                      +---------------+
.MN(IP1)        .                 move                 |MN(IP2)        |
.flow(IP1,...)  .               =======>               |flow(IP2,...)  |
+...............+                                      +---------------+

   Figure 5.  Changing to the new IP prefix/address.  MN running a flow
   using IP1 in a network Net1 changes to running a flow using IP2 in
   Net2.

   When there is no need to provide IP mobility to a flow, the flow may
   use a new IP address acquired from a new network as the MN moves to
   the new network.



Chan, et al.             Expires March 27, 2017                [Page 25]

Internet-Draft       distributed mobility anchoring       September 2016


   Regardless of whether IP mobility is needed, if the flow has
   terminated before the MN moves to a new network, the flow may
   subsequently restart using the new IP address allocated from the new
   network.

   When IP session continuity is needed, even if a flow is ongoing as
   the MN moves, it may still be desirable for the flow to change to
   using the new IP prefix configured in the new network.  The flow may
   then close and then restart using a new IP address configured in the
   new network.  Such a change in the IP address of the flow may be
   enabled using a higher layer mobility support which is not in the
   scope of this document.

   In Figure 5, a flow initiated while the MN was in a network Net1 has
   terminated before the MN moves to a new network Net2.  After moving
   to Net2, the MN uses the new IP prefix anchored in Net2 to start a
   new flow.  The packets may then be forwarded without requiring IP
   layer mobility support.

   An example call flow is outlined in Figure 6.































Chan, et al.             Expires March 27, 2017                [Page 26]

Internet-Draft       distributed mobility anchoring       September 2016


 MN                    p-AR          n-AR                             CN
  |MN attaches to p-AR: |             |                                |
  |acquire MN-ID and profile          |                                |
  |--RS---------------->|             |                                |
  |                     |             |                                |
  |<----------RA(HNP1)--|             |                                |
  |                     |             |                                |
Allocated prefix HNP1
IP1 address configuration
  |                     |             |                                |
  |<-Flow(IP1,IPcn,...)-+--------------------------------------------->|
  |                     |             |                                |
  |MN detaches from p-AR|             |                                |
  |MN attaches to n-AR  |             |                                |
  |                     |             |                                |
  |--RS------------------------------>|                                |
  |                     |             |                                |
  |<--------------RA(HNP2)------------|                                |
  |                     |             |                                |
Allocated prefix HNP2
IP2 address configuration
  |                     |             |                                |
  |<-new Flow(IP2,IPcn,...)-----------+------------------------------->|
  |                     |             |                                |


   Figure 6.  Re-starting a flow to use the IP allocated from the
   network at which the MN is attached.

4.1.1.  Guidelines for IPv6 Nodes: Changing to New IP Prefix/Address

   A network or network slice may not need IP mobility support.  For
   example, a network slice for stationary sensors only will never
   encounter mobility.

   The standard functions in IPv6 already include dropping the old IPv6
   prefix/address and acquiring new IPv6 prefix/address when the node
   changes its point of attachment to a new network.  Therefore, a
   network or network slice not providing IP mobility support at all
   will not need any of the functions with the mobility operations and
   messages described in Section 3.2.

   The guidelines for the IPv6 nodes in a network or network slice
   supporting a mix of flows requiring and not requiring IP mobility
   support include the following:

   GL-cfg:1  A network or network slice supporting a mix of flows
             requiring and not requiring mobility support may take any



Chan, et al.             Expires March 27, 2017                [Page 27]

Internet-Draft       distributed mobility anchoring       September 2016


             of the configurations described in Section 3.1 and need to
             implement in the appropriate IPv6 nodes the mobility
             functions LM and FM as described respectively in LM-cfg and
             FM-cfg in Section 3.2 according to the configuration
             chosen.

   GL-mix:1  These mobility functions perform some of the operations
             with the appropriate messages as described in Section 3.2
             depending on which mobility mechanisms are used.  Yet these
             mobility functions must not be invoked for a flow that does
             not need IP mobility support.  It is necessary to be able
             to distinguish the needs of a flow.  The guidelines for the
             MN and the AR are in the following.

   GL-mix:2  Regardless of whether there are flows requiring IP mobility
             support, when the MN changes its point of attachment to a
             new network, it needs to configure a new global IP address
             for use in the new network in addition to configuring the
             new link-local addresses.

   GL-mix:3  The MN needs to check whether a flow needs IP mobility
             support.  This can be performed when the application was
             initiated.  The specific method is not in the scope of this
             document.

   GL-mix:4  The information of whether a flow needs IP mobility support
             is conveyed to the network such as by choosing an IP
             address to be provided with mobility support as described
             in [I-D.ietf-dmm-ondemand-mobility].  Then as the MN
             attaches to a new network, if the MN was using an IP
             address that is not supposed to be provided with mobility
             support, the access router will not invoke the mobility
             functions described in Section 3.2 for this IP address.
             That is, the IP address from the prior network is simply
             not used in the new network.


   The above guidelines are only to enable distinguishing whether there
   is need of IP mobility support for a flow that does not.  When the
   flow needs IP mobility support, the list of guidelines will continue
   in Section 4.2.1.

4.2.  Need of IP Mobility

   When IP mobility is needed for a flow, the LM and FM functions in
   Section 3.1 are utilized.  The mobility support may be provided by IP
   prefix anchor switching to the new network to be described in
   Section 5 or by using other mobility management methods



Chan, et al.             Expires March 27, 2017                [Page 28]

Internet-Draft       distributed mobility anchoring       September 2016


   ([Paper-Distributed.Mobility.PMIP] and
   [Paper-Distributed.Mobility.Review]).  Then the flow may continue to
   use the IP prefix from the prior network of attachment.  Yet some
   time later, the user application for the flow may be closed.  If the
   application is started again, the new flow may not need to use the
   prior network's IP address to avoid having to invoke IP mobility
   support.  This may be the case where a dynamic IP prefix/address
   rather than a permanent one is used.  The flow may then use the new
   IP prefix in the network where the flow is being initiated.  Routing
   is again kept simpler without employing IP mobility and will remain
   so as long as the MN which is now in the new network has not moved
   again and left to another new network.

   An example call flow in this case is outlined in Figure 7.

 MN                    p-AR          n-AR                             CN
  |MN attaches to p-AR: |             |                                |
  |acquire MN-ID and profile          |                                |
  |--RS---------------->|             |                                |
  |                     |             |                                |
  |<----------RA(HNP1)--|             |                                |
  |                     |             |                                |
Allocated prefix HNP1
IP1 address configuration
  |                     |             |                                |
  |<-Flow(IP1,IPcn,...)-+--------------------------------------------->|
  |                     |             |                                |
  |MN detach from p-AR  |             |                                |
  |MN attach to n-AR    |             |                                |
  |                     |             |                                |
  |--RS------------------------------>|                                |

IP mobility support such as that described in next sub-section
  |<--------------RA(HNP2,HNP1)-------|                                |
  |                     |             |                                |
  |<-Flow(IP1,IPcn,...)---------------+------------------------------->|
  |                     |             |                                |
Allocated prefix HNP2
IP2 address configuration
  |                     |             |                                |
Flow(IP1,IPcn) terminates
  |                     |             |                                |
  |<-new Flow(IP2,IPcn,...)-----------+------------------------------->|
  |                     |             |                                |


   Figure 7.  A flow continues to use the IP from its home network after
   MN has moved to a new network.



Chan, et al.             Expires March 27, 2017                [Page 29]

Internet-Draft       distributed mobility anchoring       September 2016


4.2.1.  Guidelines for IPv6 Nodes: Need of IP Mobility

   The configuration guidelines of distributed mobility for the IPv6
   nodes in a network or network slice supporting a mix of flows
   requiring and not requiring distributed mobility support are as
   follows:

   GL-cfg:2  Multiple instances of DPAs (at access routers) which are
             providing IP prefix to the MNs are needed to provide
             distributed mobility anchoring in an appropriate
             configuration such as those in Figure 1 (Section 3.1.1) for
             network-based distributed mobility or in Figure 3
             (Section 3.1.3) for host-based distributed mobility.



             The appropriate IPv6 nodes (CPA, DPA, CPN, DPN) are to be
             implemented the mobility functions LM and FM as described
             respectively in LM-cfg and FM-cfg in Section 3.2 according
             to the configuration chosen.

   The guidelines of distributed mobility for the IPv6 nodes in a
   network or network slice supporting a mix of flows requiring and not
   requiring distributed mobility support had begun with those given as
   GL-mix in Section 4.1.1 and continue as follows:

   GL-mix:5  The distributed anchors may need to message with each
             other.  When such messaging is needed, the anchors may need
             to discover each other as described in the FM operations
             and mobility message parameters (FM-find) in Section 3.2.2.

   GL-mix:6  The anchors may need to provide mobility support on a per-
             flow basis as described in the FM operations and mobility
             message parameters (FM-flow) in Section 3.2.2.

   GL-mix:7  Then the anchors need to properly forward the packets of
             the flows as described in the FM operations and mobility
             message parameters (FM-path, FM-path-tbl, FM-DPA, FM-DPA-
             tbl) in Section 3.2.2.

   GL-mix:8  If there are in-flight packets toward the old anchor while
             the MN is moving to the new anchor, it may be necessary to
             buffer these packets and then forward to the new anchor
             after the old anchor knows that the new anchor is ready.
             Such are described in the FM operations and mobility
             message parameters (FM-buffer) in Section 3.2.2.





Chan, et al.             Expires March 27, 2017                [Page 30]

Internet-Draft       distributed mobility anchoring       September 2016


5.  IP Mobility Handling in Distributed Mobility Anchoring Environments
    - Anchor Switching to the New Network

   IP Prefix/Address Anchor Switching to the New Network:

   IP mobility is invoked to enable IP session continuity for an ongoing
   flow as the MN moves to a new network.  Here the anchoring of the IP
   address of the flow is in the home network of the flow, which is not
   in the current network of attachment.  A centralized mobility
   management mechanism may employ indirection from the anchor in the
   home network to the current network of attachment.  Yet it may be
   difficult to avoid unnecessarily long route when the route between
   the MN and the CN via the anchor in the home network is significantly
   longer than the direct route between them.  An alternative is to
   switch the IP prefix/address anchoring to the new network.

5.1.  IP Prefix/Address Anchor Switching for Flat Network

   The IP prefix/address anchoring may move without changing the IP
   prefix/address of the flow.  Here the LM and FM functions in Figures
   1(a) and 1(b) in Section 3.1 are implemented as shown in Figure 8.

Net1                                                   Net2

+---------------+                                      +---------------+
|AR1            |                                      |AR2            |
+---------------+                                      +---------------+
|CPA:           |                                      |CPA:           |
|LM:IP1<-->IPa2 |                                      |LM:IP1<-->IPa2 |
|---------------|                                      |---------------|
|DPA(IPa1):     |                                      |DPA(IPa2):     |
|anchors IP1    |                 move                 |anchors IP2,IP1|
|FM:DHCPv6-PD   |               =======>               |FM:DHCPv6-PD   |
+---------------+                                      +---------------+


+...............+                                      +---------------+
.MN(IP1)        .                 move                 |MN(IP2,IP1)    |
.flow(IP1,...)  .               =======>               |flow(IP1,...)  |
+...............+                                      +---------------+

   Figure 8.  IP prefix/address anchor switching to the new network.  MN
   with flow using IP1 in Net1 continues to run the flow using IP1 as it
   moves to Net2.

   As an MN with an ongoing session moves to a new network, the flow may
   preserve IP session continuity by moving the anchoring of the
   original IP prefix/address of the flow to the new network.  BGP



Chan, et al.             Expires March 27, 2017                [Page 31]

Internet-Draft       distributed mobility anchoring       September 2016


   UPDATE messages may be used to change the forwarding table entries as
   described in [I-D.templin-aerolink] and [I-D.mccann-dmm-flatarch] if
   the response time of such updates does not exceed the handover delay
   requirement of the flow.  An alternative is to use a centralized
   routing protocol to be described in Section 5.2 with a centralized
   control plane.

5.1.1.  Guidelines for IPv6 Nodes: Switching Anchor for Flat Network

   The configuration guideline for a flat network or network slice
   supporting a mix of flows requiring and not requiring IP mobility
   support is:

   GL-cfg:3  Multiple instances of DPAs (at access routers) which are
             providing IP prefix to the MNs are needed to provide
             distributed mobility anchoring according to Figure 1(a) or
             Figure 1(b)in Section 3.1 for a flat network.



             The appropriate IPv6 nodes (CPA, DPA) are to be implemented
             the mobility functions LM and FM as described respectively
             in LM-cfg:1 or LM-cfg:2 and FM-cfg:1 in Section 3.2.

   The guidelines (GL-mix) in Section 4.1.1 and in Section 4.2.1 for the
   IPv6 nodes for a network or network slice supporting a mix of flows
   requiring and not requiring IP mobility support apply here.  In
   addition, the following are required.

   GL-switch:1  The location management provides information about which
                IP prefix from an AR in the original network is being
                used by a flow in which AR in a new network.  Such
                information needs to be deleted or updated when such
                flows have closed so that the IP prefix is no longer
                used in a different network.  The LM operations are
                described in Section 3.2.1.

   GL-switch:2  The FM functions are implemented through the DHCPv6-PD
                protocol.  Here the anchor operations to properly
                forward the packets for a flow as described in the FM
                operations and mobility message parameters in
                Section 3.2.2 FM-path, FM-path-tbl, FM-DPA, FM-DPA-tbl
                are realized by changing the anchor with DHCPv6-PD and
                also by reverting such changes later after the
                application has already closed and when the DHCPv6-PD
                timer expires.  If there are in-flight packets toward
                the old anchor while the MN is moving to the new anchor,
                it may be necessary to buffer these packets and then



Chan, et al.             Expires March 27, 2017                [Page 32]

Internet-Draft       distributed mobility anchoring       September 2016


                forward to the new anchor after the old anchor knows
                that the new anchor is ready as are described in
                Section 3.2.2 (FM-buffer).  The anchors may also need to
                discover each other as described also in the FM
                operations and mobility message parameters (FM-find).


   GL-switch:3  The security management function in the anchor node at a
                new network must allow to assign the original IP prefix/
                address used by the mobile node at the previous
                (original) network.  As the assigned original IP prefix/
                address is to be used in the new network, the security
                management function in the anchor node must allow to
                advertise the prefix of the original IP address and also
                allow the mobile node to send and receive data packets
                with the original IP address.

   GL-switch:4  The security management function in the mobile node must
                allow to configure the original IP prefix/address used
                at the previous (original) network when the original IP
                prefix/address is assigned by the anchor node in the new
                network.  The security management function in the mobile
                node also allows to use the original IP address for the
                previous flow in the new network.


5.2.  IP Prefix/Address Anchor Switching for Flat Network with
      Centralized Control Plane

   An example of IP prefix anchor switching is in the case where Net1
   and Net2 both belong to the same operator network with separation of
   control and data planes ([I-D.liu-dmm-deployment-scenario] and
   [I-D.matsushima-stateless-uplane-vepc]), where the controller may
   send to the switches/routers the updated information of the
   forwarding tables with the IP address anchoring of the original IP
   prefix/address at AR1 moved to AR2 in the new network.  That is, the
   IP address anchoring in the original network which was advertising
   the prefix will need to move to the new network.  As the anchoring in
   the new network advertises the prefix of the original IP address in
   the new network, the forwarding tables will be updated so that
   packets of the flow will be forwarded according to the updated
   forwarding tables.  The configurations in Figures 1(a) and 1(b) in
   Section 3.1 for which FM-CP and LM are centralized and FM-DP's are
   distributed apply here.  Figure 9 shows its implementation where LM
   is a binding between the original IP prefix/address of the flow and
   the IP address of the new DPA, whereas FM uses the DHCPv6-PD
   protocol.




Chan, et al.             Expires March 27, 2017                [Page 33]

Internet-Draft       distributed mobility anchoring       September 2016


Net1                                                   Net2
+----------------------------------------------------------------------+
|                            CPA:                                      |
|                            LM:IP1<-->IPa2                            |
|                            FM-CP                                     |
+----------------------------------------------------------------------+


+---------------+                                      +---------------+
|AR1            |                                      |AR2            |
+---------------+                                      +---------------+
|DPA(IPa1):     |                                      |DPA(IPa2):     |
|anchors IP1    |                 move                 |anchors IP2,IP1|
|FM:DHCPv6-PD   |               =======>               |FM:DHCPv6-PD   |
+---------------+                                      +---------------+


+...............+                                      +---------------+
.MN(IP1)        .                 move                 |MN(IP2,IP1)    |
.flow(IP1,...)  .               =======>               |flow(IP1,...)  |
+...............+                                      +---------------+

   Figure 9.  IP prefix/address anchor switching to the new network with
   with LM and FM-CP in a centralized control plane whereas the FM-DP's
   are distributed.

   The example call flow in Figure 10 shows that MN is allocated HNP1
   when it attaches to the p-AR.  A flow running in MN and needing IP
   mobility may continue to use the previous IP prefix by moving the
   anchoring of the IP prefix to the new network.  Yet a new flow to be
   initiated in the new network may simply use a new IP prefix allocated
   from the new network.



















Chan, et al.             Expires March 27, 2017                [Page 34]

Internet-Draft       distributed mobility anchoring       September 2016


 MN                    p-AR          n-AR            DHCPv6 Servers   CN
  |MN attaches to p-AR: |             |                     |          |
  |acquire MN-ID and profile          |                     |          |
  |--RS---------------->|             |                     |          |
  |<----------RA(HNP1)--|             |                     |          |
  |                     |             |             Allocate MN-HNP1   |
IP addr config          |             |                     |          |
  |                     |             |                     |          |
  |<-Flow(IP1,IPcn,...)-+--------------------------------------------->|
  |                     |             |                     |          |
  |MN detach from p-AR  |             |                     |          |
  |MN attach to n-AR    |             |                     |          |
  |                     |             |                     |          |
  |--RS------------------------------>|                     |          |
  |                     |             |                     |          |
  |                     |------DHCPv6 release-------------->|          |
  |                     |             |                     |          |
  |                     |             |--DHCPv6 PD request->|          |
  |                     |             |<-DHCPv6 PD reply--->|          |
  |                     |             |                     |          |
  |                 forwarding table updates                |          |
  |                     |             |                     |          |
  |<--------------RA(HNP2,HNP1)-------|                     |          |
  |                     |             |             Allocate MN-HNP2   |
IP addr config          |             |                     |          |
  |                     |             |                     |          |
  |<-Flow(IP1,IPcn,...)---------------+------------------------------->|
  |                     |             |                     |          |
  |  Flow(IP1,IPcn,...) terminates    |                     |          |
  |                     |             |                     |          |
  |                     | DHCPv6-PD timeout                 |          |
  |                     |             |                     |          |
  |                 forwarding table updates                |          |
  |                     |             |                     |          |
  |                     |             |                     |          |
  |<-new Flow(IP2,IPcn,...)-----------+------------------------------->|
  |                     |             |                     |          |


   Figure 10.  DMM solution.  MN with flow using IP1 in Net1 continues
   to run the flow using IP1 as it moves to Net2.

   As the MN moves from p-AR to n-AR, the p-AR as a DHCPv6 client may
   send a DHCPv6 release message to release the HNP1.  It is now
   necessary for n-AR to learn the IP prefix of the MN from the previous
   network so that it will be possible for Net2 to allocate both the
   previous network prefix and the new network prefix.  The network may
   learn the previous prefix in different methods.  For example, the MN



Chan, et al.             Expires March 27, 2017                [Page 35]

Internet-Draft       distributed mobility anchoring       September 2016


   may provide its previous network prefix information by including it
   to the RS message [I-D.jhlee-dmm-dnpp].

   Knowing that MN is using HNP1, the n-AR sends to a DHCPv6 server a
   DHCPv6-PD request to move the HNP1 to n-AR.  The server sends to n-AR
   a DHCPv6-PD reply to move the HNP1.  Then forwarding tables updates
   will take place here.

   In addition, the MN also needs a new HNP in the new network.  The
   n-AR may now send RA to n-AR, with prefix information that includes
   HNP1 and HNP2.  The MN may then continue to use IP1.  In addition,
   the MN is allocated the prefix HNP2 with which it may configure its
   IP addresses.  Now for flows using IP1, packets destined to IP1 will
   be forwarded to the MN via n-AR.

   As such flows have terminated and DHCPv6-PD has timed out, HNP1 goes
   back to Net1.  MN will then be left with HNP2 only, which it will use
   when it now starts a new flow.

5.2.1.  Additional Guidelines for IPv6 Nodes: Switching Anchor with
        Centralized CP

   The configuration guideline for a flat network or network slice with
   centralized control plane and supporting a mix of flows requiring and
   not requiring IP mobility support is:

   GL-cfg:4  Multiple instances of DPAs (at access routers) which are
             providing IP prefix to the MNs are needed to provide
             distributed mobility anchoring according to Figure 1(a) or
             Figure 1(b)in Section 3.1 with centralized control plane
             for a flat network.



             The appropriate IPv6 nodes (CPA, DPA) are to be implemented
             the mobility functions LM and FM as described respectively
             in LM-cfg:1 or LM-cfg:2 and FM-cfg:1 in Section 3.2.

   The guidelines (GL-mix) in Section 4.1.1 and in Section 4.2.1 for the
   IPv6 nodes for a network or network slice supporting a mix of flows
   requiring and not requiring IP mobility support apply here.  The
   guidelines (GL-mix) in Section 5.1.1 also apply here.  In addition,
   the following are required.

   GL-switch:5  The anchor operations to properly forward the packets
                for a flow as described in the FM operations and
                mobility message parameters in Section 3.2.2 FM-path,
                FM-path-tbl, FM-DPA, FM-DPA-tbl is realized by changing



Chan, et al.             Expires March 27, 2017                [Page 36]

Internet-Draft       distributed mobility anchoring       September 2016


                the anchoring with DHCPv6-PD and undoing such changes
                later when its timer expires and the application has
                already closed.  With the anchors being separated in
                control and data planes with LMs and FM-CP centralized
                in the same control plane, messaging between anchors and
                the discovery of anchors become internal to the control
                plane as described in Section 3.2.2 FM-cpdp.  However,
                the centralized FM-CP needs to communicate with the
                distributed FM-DP as described as described in the FM
                operations and mobility message parameters (FM-find).
                Such may be realized by the appropriate messages in
                [I-D.ietf-dmm-fpc-cpdp].

   GL-switch:6  It was already mentioned before that, if there are in-
                flight packets toward the old anchor while the MN is
                moving to the new anchor, it may be necessary to buffer
                these packets and then forward to the new anchor after
                the old anchor knows that the new anchor is ready Here,
                however, the corresponding FM operations and mobility
                message parameters as described in Section 3.2.2 (FM-
                buffer) can be realized by the internal operations in
                the control plane together with signaling between the
                control plane and distributed data plane.  These
                signaling may be realized by the appropriate messages in
                [I-D.ietf-dmm-fpc-cpdp].


5.3.  IP Prefix/Address Anchor Switching for a Hierarchical Network

   The configuration for a hierarchical network is shown in Figures 1(c)
   and 1(d) in Section 3.1.  With centralized control plane, CPA and
   CPN, with the associated LM and FM-CP are all co-located.  There are
   multiple DPAs (each with FM-DP) in distributed mobility anchoring.
   In the data plane, there are multiple DPNs (each with FM-DP)
   hierarchically below each DPA.  The DPA at each AR supports
   forwarding to the DPN at each of a number of forwarding switches
   (FW's).  A mobility event in this configuration belonging to
   distributed mobility management will be deferred to Section 5.4.

   In this distributed mobility configuration, a mobility event
   involving change of FW only but not of AR as shown in Figure 11 may
   still belong to centralized mobility management and may be supported
   using PMIPv6.  This configuration of network-based mobility is also
   applicable to host-based mobility with the modification for the MN
   directly taking the role of DPN and CPN, and the corresponding
   centralized mobility event may be supported using MIPv6.





Chan, et al.             Expires March 27, 2017                [Page 37]

Internet-Draft       distributed mobility anchoring       September 2016


   In Figure 11, the IP prefix allocated to the MN is anchored at the
   access router (AR) supporting indirection to the old FW to which the
   MN was originally attached as well as to the new FW to which the MN
   has moved.

   The realization of LM may be the binding between the IP prefix/
   address of the flow used by the MN and the IP address of the DPN to
   which MN has moved.  The implementation of FM to enable change of FW
   without changing AR may be accomplished using tunneling between the
   AR and the FW as described in [I-D.korhonen-dmm-local-prefix] and in
   [I-D.templin-aerolink] or using some other L2 mobility mechanism.

Net1                                                   Net2
+----------------------------------------------------------------------+
|                            CPA,CPN:                                  |
|                            LM:IP1<-->IPn2                            |
|                            FM-CP                                     |
+----------------------------------------------------------------------+


                           +---------------+
                           |AR1            |
                           +---------------+
                           |DPA(IPa1):     |
                           |anchors IP1    |
                           |FM:DHCPv6-PD   |
                           +---------------+


+---------------+                                      +---------------+
|FW1            |                                      |FW2            |
+---------------+                 move                 +---------------+
|DPN(IPn1):     |               =======>               |DPN(IPn2):     |
+---------------+                                      +---------------+


+...............+                                      +---------------+
.MN(IP1)        .                 move                 |MN(IP2)        |
.flow(IP1,...)  .               =======>               |flow(IP1,...)  |
+...............+                                      +---------------+

   Figure 11.  Mobility without involving change of IP anchoring in a
   network in which the IP prefix allocated to the MN is anchored at an
   AR which is hierarchically above multiple FWs to which the MN may
   connect.






Chan, et al.             Expires March 27, 2017                [Page 38]

Internet-Draft       distributed mobility anchoring       September 2016


5.3.1.  Additional Guidelines for IPv6 Nodes: No Anchoring Change with a
        Hierarchical Network

   The configuration guideline ( ) for a hierarchical network or network
   slice with centralized control plane and supporting a mix of flows
   requiring and not requiring IP mobility support is:

   GL-cfg:5  Multiple instances of DPAs (at access routers) which are
             providing IP prefix to the MNs are needed to provide
             distributed mobility anchoring according to Figure 2(a) or
             Figure 2(b)in Section 3.1.2 with centralized control plane
             for a hierarchical network.



             The appropriate IPv6 nodes (CPA, DPA) are to be implemented
             the mobility functions LM and FM as described respectively
             in LM-cfg:3 or LM-cfg:4 and FM-cfg:2 in Section 3.2.

   Even when the mobility event does not involve change of anchor, it is
   still necessary to distinguish whether a flow needs IP mobility
   support.

   The GL-mix guidelines in Section 4.1.1 and in Section 4.2.1 for the
   IPv6 nodes for a network or network slice supporting a mix of flows
   requiring and not requiring IP mobility support apply here.  The
   guidelines (GL-switch) in Section 5.1.1 and in Section 5.2.1 also
   apply here.  In addition, the following are required.

   GL-switch:7  Here, the LM operations and mobility message parameters
                described in Section 3.2.1 provides information of which
                IP prefix from its FW needs to be used by a flow using
                which new FW.  The anchor operations to properly forward
                the packets of a flow described in the FM operations and
                mobility message parameters (FM-path, FM-path-ind, FM-
                cpdp in Section 3.2.2) may be realized with PMIPv6
                protocol ([I-D.korhonen-dmm-local-prefix]) or with AERO
                protocol ([I-D.templin-aerolink]) to tunnel between the
                AR and the FW.


5.4.  IP Prefix/Address Anchor Switching for a Hierarchical Network

   The configuration for the hierarchical network is again shown in
   Figures 1(c) and 1(d) in Section 3.1.  Again, with centralized
   control plane, CPA and CPN, with the associated LM and FM-CP are all
   co-located.  There are multiple DPAs (each with FM-DP) in distributed
   mobility anchoring.  In the data plane, there are multiple DPNs (each



Chan, et al.             Expires March 27, 2017                [Page 39]

Internet-Draft       distributed mobility anchoring       September 2016


   with FM-DP) hierarchically below each DPA.  The DPA at each AR
   supports forwarding to the DPN at each of a number of forwarding
   switches (FW's).

   A distributed mobility event in this configuration involves change
   from a previous DPN which is hierarchically under the previous DPA to
   a new DPN which is hierarchically under a new DPA.  Such an event
   involving change of both DPA and DPN is shown in Figure 12.

Net1                                                   Net2
+----------------------------------------------------------------------+
|                            CPA,CPN:                                  |
|                            LM:IP1<-->IPa2,IPn2                       |
|                            FM-CP                                     |
+----------------------------------------------------------------------+

                            +---------------+
                            |Aggregate Point|
                            |---------------|
                            |FM,    LM      |
                            +---------------+


+---------------+                                      +---------------+
|AR1            |                                      |AR2            |
+---------------+                                      +---------------+
|DPA(IPa1):     |                                      |DPA(IPa2):     |
|anchors IP1    |                 move                 |anchors IP2,IP1|
|FM:DHCPv6-PD   |               =======>               |FM:DHCPv6-PD   |
+---------------+                                      +---------------+


+---------------+                                      +---------------+
|FW1            |                                      |FW2            |
+---------------+                 move                 +---------------+
|DPN(IPn1):     |               =======>               |DPN(IPn2):     |
+---------------+                                      +---------------+


+...............+                                      +---------------+
.MN(IP1)        .                 move                 |MN(IP2,IP1)    |
.flow(IP1,...)  .               =======>               |flow(IP1,...)  |
+...............+                                      +---------------+

   Figure 12.  Mobility involving change of IP anchoring in a network
   with hierarchy in which the IP prefix allocated to the MN is anchored
   at an Edge Router supporting multiple access routers to which the MN
   may connect.



Chan, et al.             Expires March 27, 2017                [Page 40]

Internet-Draft       distributed mobility anchoring       September 2016


   This deployment case involves both a change of anchor from AR1 to AR2
   and a network hierarchy AR-FW.  It can be realized by a combination
   of changing the IP prefix/address anchoring from AR1 to AR2 with the
   mechanism as described in Section 5.2 and then forwarding the packets
   with network hierarchy AR-FW as described in Section 5.3.

   To change AR, AR1 acting as a DHCPv6-PD client may exchange message
   with the DHCPv6 server to release the prefix IP1.  Meanwhile, AR2
   acting as a DHCPv6-PD client may exchange message with the DHCPv6
   server to delegate the prefix IP1 to AR2.

5.4.1.  Additional Guidelines for IPv6 Nodes: Switching Anchor with
        Hierarchical Network

   The configuration guideline (GL-cfg) for a hierarchical network or
   network slice with centralized control plane described in
   Section 5.3.1 apply here.

   The GL-mix guidelines in Section 4.1.1 and in Section 4.2.1 for the
   IPv6 nodes for a network or network slice supporting a mix of flows
   requiring and not requiring IP mobility support apply here.

   The guidelines (GL-switch) in Section 5.1.1 and in Section 5.2.1 also
   apply here to change the anchoring of the IP prefix/address with a
   centralized control plane.

   In addition, the guideline for indirection between the new DPA and
   the new DPN as described in Section 5.3.1 apply here.

6.  Security Considerations

   TBD

7.  IANA Considerations

   This document presents no IANA considerations.

8.  Contributors

   This document has benefited from other work on mobility solutions
   using BGP update, on mobility support in SDN network, on providing
   mobility support only when needed, and on mobility support in
   enterprise network.  These work have been referenced.  While some of
   these authors have taken the work to jointly write this document,
   others have contributed at least indirectly by writing these drafts.
   The latter include Philippe Bertin, Dapeng Liu, Satoru Matushima,
   Peter McCann, Pierrick Seite, Jouni Korhonen, and Sri Gundavelli.




Chan, et al.             Expires March 27, 2017                [Page 41]

Internet-Draft       distributed mobility anchoring       September 2016


   Valuable comments have also been received from John Kaippallimalil,
   ChunShan Xiong, and Dapeng Liu.

9.  References

9.1.  Normative References

   [I-D.ietf-dmm-deployment-models]
              Gundavelli, S. and S. Jeon, "DMM Deployment Models and
              Architectural Considerations", draft-ietf-dmm-deployment-
              models-00 (work in progress), August 2016.

   [I-D.ietf-dmm-fpc-cpdp]
              Liebsch, M., Matsushima, S., Gundavelli, S., Moses, D.,
              and L. Bertz, "Protocol for Forwarding Policy
              Configuration (FPC) in DMM", draft-ietf-dmm-fpc-cpdp-03
              (work in progress), March 2016.

   [I-D.ietf-dmm-ondemand-mobility]
              Yegin, A., Moses, D., Kweon, K., Lee, J., and J. Park, "On
              Demand Mobility Management", draft-ietf-dmm-ondemand-
              mobility-07 (work in progress), July 2016.

   [I-D.jhlee-dmm-dnpp]
              Lee, J. and Z. Yan, "Deprecated Network Prefix Provision",
              draft-jhlee-dmm-dnpp-01 (work in progress), April 2016.

   [I-D.korhonen-dmm-local-prefix]
              Korhonen, J., Savolainen, T., and S. Gundavelli, "Local
              Prefix Lifetime Management for Proxy Mobile IPv6", draft-
              korhonen-dmm-local-prefix-01 (work in progress), July
              2013.

   [I-D.liu-dmm-deployment-scenario]
              Liu, V., Liu, D., Chan, A., Lingli, D., and X. Wei,
              "Distributed mobility management deployment scenario and
              architecture", draft-liu-dmm-deployment-scenario-05 (work
              in progress), October 2015.

   [I-D.matsushima-stateless-uplane-vepc]
              Matsushima, S. and R. Wakikawa, "Stateless user-plane
              architecture for virtualized EPC (vEPC)", draft-
              matsushima-stateless-uplane-vepc-06 (work in progress),
              March 2016.







Chan, et al.             Expires March 27, 2017                [Page 42]

Internet-Draft       distributed mobility anchoring       September 2016


   [I-D.mccann-dmm-flatarch]
              McCann, P., "Authentication and Mobility Management in a
              Flat Architecture", draft-mccann-dmm-flatarch-00 (work in
              progress), March 2012.

   [I-D.mccann-dmm-prefixcost]
              McCann, P. and J. Kaippallimalil, "Communicating Prefix
              Cost to Mobile Nodes", draft-mccann-dmm-prefixcost-03
              (work in progress), April 2016.

   [I-D.seite-dmm-dma]
              Seite, P., Bertin, P., and J. Lee, "Distributed Mobility
              Anchoring", draft-seite-dmm-dma-07 (work in progress),
              February 2014.

   [I-D.sijeon-dmm-deployment-models]
              Jeon, S. and Y. Kim, "Deployment Models for Distributed
              Mobility Management", draft-sijeon-dmm-deployment-
              models-03 (work in progress), July 2016.

   [I-D.templin-aerolink]
              Templin, F., "Asymmetric Extended Route Optimization
              (AERO)", draft-templin-aerolink-71 (work in progress),
              September 2016.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <http://www.rfc-editor.org/info/rfc2119>.

   [RFC3753]  Manner, J., Ed. and M. Kojo, Ed., "Mobility Related
              Terminology", RFC 3753, DOI 10.17487/RFC3753, June 2004,
              <http://www.rfc-editor.org/info/rfc3753>.

   [RFC5213]  Gundavelli, S., Ed., Leung, K., Devarapalli, V.,
              Chowdhury, K., and B. Patil, "Proxy Mobile IPv6",
              RFC 5213, DOI 10.17487/RFC5213, August 2008,
              <http://www.rfc-editor.org/info/rfc5213>.

   [RFC6275]  Perkins, C., Ed., Johnson, D., and J. Arkko, "Mobility
              Support in IPv6", RFC 6275, DOI 10.17487/RFC6275, July
              2011, <http://www.rfc-editor.org/info/rfc6275>.

   [RFC7077]  Krishnan, S., Gundavelli, S., Liebsch, M., Yokota, H., and
              J. Korhonen, "Update Notifications for Proxy Mobile IPv6",
              RFC 7077, DOI 10.17487/RFC7077, November 2013,
              <http://www.rfc-editor.org/info/rfc7077>.




Chan, et al.             Expires March 27, 2017                [Page 43]

Internet-Draft       distributed mobility anchoring       September 2016


   [RFC7333]  Chan, H., Ed., Liu, D., Seite, P., Yokota, H., and J.
              Korhonen, "Requirements for Distributed Mobility
              Management", RFC 7333, DOI 10.17487/RFC7333, August 2014,
              <http://www.rfc-editor.org/info/rfc7333>.

   [RFC7429]  Liu, D., Ed., Zuniga, JC., Ed., Seite, P., Chan, H., and
              CJ. Bernardos, "Distributed Mobility Management: Current
              Practices and Gap Analysis", RFC 7429,
              DOI 10.17487/RFC7429, January 2015,
              <http://www.rfc-editor.org/info/rfc7429>.

9.2.  Informative References

   [Paper-Distributed.Mobility]
              Lee, J., Bonnin, J., Seite, P., and H. Chan, "Distributed
              IP Mobility Management from the Perspective of the IETF:
              Motivations, Requirements, Approaches, Comparison, and
              Challenges",  IEEE Wireless Communications, October 2013.

   [Paper-Distributed.Mobility.PMIP]
              Chan, H., "Proxy Mobile IP with Distributed Mobility
              Anchors",  Proceedings of GlobeCom Workshop on Seamless
              Wireless Mobility, December 2010.

   [Paper-Distributed.Mobility.Review]
              Chan, H., Yokota, H., Xie, J., Seite, P., and D. Liu,
              "Distributed and Dynamic Mobility Management in Mobile
              Internet: Current Approaches and Issues", February 2011.

Authors' Addresses

   H Anthony Chan (editor)
   Huawei Technologies
   5340 Legacy Dr. Building 3
   Plano, TX 75024
   USA

   Email: h.a.chan@ieee.org


   Xinpeng Wei
   Huawei Technologies
   Xin-Xi Rd. No. 3, Haidian District
   Beijing, 100095
   P. R. China

   Email: weixinpeng@huawei.com




Chan, et al.             Expires March 27, 2017                [Page 44]

Internet-Draft       distributed mobility anchoring       September 2016


   Jong-Hyouk Lee
   Sangmyung University
   31, Sangmyeongdae-gil, Dongnam-gu
   Cheonan 31066
   Republic of Korea

   Email: jonghyouk@smu.ac.kr


   Seil Jeon
   Sungkyunkwan University
   2066 Seobu-ro, Jangan-gu
   Suwon, Gyeonggi-do
   Republic of Korea

   Email: seiljeon@skku.edu


   Alexandre Petrescu
   CEA, LIST
   CEA Saclay
   Gif-sur-Yvette, Ile-de-France  91190
   France

   Phone: +33169089223
   Email: Alexandre.Petrescu@cea.fr


   Fred L. Templin
   Boeing Research and Technology
   P.O. Box 3707
   Seattle, WA  98124
   USA

   Email: fltemplin@acm.org
















Chan, et al.             Expires March 27, 2017                [Page 45]
