





INTERNET DRAFT                                              FUJIKAWA Kenji
draft-fujikawa-ric-ss-01.txt                               SASAKI Motoharu
                                                          Kyoto University

                                                  Real Internet Consortium
                                                             25 March 2001


                         Service Specifications (SS)


Status of this Memo

    This document is an Internet-Draft and is in full conformance
    with all provisions of Section 10 of RFC2026.

    Internet-Drafts are working documents of the Internet Engineering
    Task Force (IETF), its areas, and its working groups.  Note that
    other groups may also distribute working documents as
    Internet-Drafts.

    Internet-Drafts are draft documents valid for a maximum of six
    months and may be updated, replaced, or obsoleted by other
    documents at any time.  It is inappropriate to use Internet-
    Drafts as reference material or to cite them other than as
    "work in progress."

    The list of current Internet-Drafts can be accessed at
    http://www.ietf.org/ietf/1id-abstracts.txt

    The list of Internet-Draft Shadow Directories can be accessed at
    http://www.ietf.org/shadow.html.


                                  Abstract

   This draft specifies the specifications of link QoS, area QoS and
   specified and requested QoS by HQLIP and SRSVP, which are defined in
   Real Internet Consortium.


1. Introduction

   This document specifies the specification of link QoS and area QoS,
   which is advertised by HQLIP[HQLIP], and the specification of QoSes,
   which is specified and requested for by SRSVP [SRSVP].

  1.1 Request for Link




FUJIKAWA Kenji             Expires on 25 November              [Page 1]






INTERNET DRAFT                     SS                          March 2001


   The following two attributes are REQUIRED for each link:
     * The packet loss ratio is equal to or less than 10^-5.
     * The size of MTU is equal to or more than 1280.

   A link does not satisfies these conditions must not advertise QoS
   information.


2. Definition of QoSes

   Four types of QoSes are defined; They are link QoS (LINK_QOS), area
   QoS (AREA_QOS), request QoS (REQ_QOS) and path QoS (PATH_QOS). In
   addition, CHARGE that stands for charging is defined.

  2.1 BNF Notation

        LINK_QOS := L_PRI L_LOH L_PPS L_DLY 
        AREA_QOS := A_PRI A_CTU A_BCHG A_PCHG
        REQ_QOS  := R_PRI R_MTU R_PPS R_UTU R_CDLY R_CCHG [R_RDLY R_RCHG]
        PATH_QOS := P_PPS P_DLY
        CHARGE   := C_SCHG

      where

        {L,R}_PRI:   PRIority
        {L,R,P}_PPS: Packet Per Second
        {L,R,P}_DLY: transmission DeLaY
        L_LOH:       Link OverHead
        A_CTU:       Charging Time Unit
        A_BCHG:      Base CHarGe for each L_CTU
        A_PCHG:      CHarGe per Packet for each L_CTU
        R_MTU:       Maximum Transmission Unit
        R_UTU:       Using Time Unit
        R_CDLY:      Coefficient for DeLaY
        R_CCHG:      Coefficient for CHarGe
        R_RDLY:      Restricted DeLaY
        R_RCHG:      Restricted CHarGe
        C_SCHG:      Sum of CHarGe

  2.2 LINK_QOS

   A LINK_QOS shows a QoS that a link can provide, and is included in a
   link information of HQLIP.

   There are four REQUIRED parameters included in a LINK_QOS; They are
   L_PRI, L_LOH, L_PPS and L_DLY.

   An L_PRI specifies a priority of the QoS information. A corresponding



FUJIKAWA Kenji             Expires on 25 November              [Page 2]






INTERNET DRAFT                     SS                          March 2001


   L_PRI is chosen and the other parameters are compared when a certain
   R_PRI is given. Details are described later.

   An L_LOH shows link overhead measured in octets, i.e. L_LOH + x octets
   of data is transmitted when x octets of packet is transmitted. L_LOHs
   are expected to be used at the link of which transmitting rate is low
   about under 100 Mbps.

   An L_PPS is the maximum pps when a packet of 1280 octets.

   An L_DLY is the delay that is experienced when a packet is transfered
   from one end to the other.

  2.3 AREA_QOS

   There are four REQUIRED parameters included in an AREA_QOS, A_PRI,
   A_CTU, A_BCHG and A_PCHG.

   The usage of A_PRI is the same as L_PRI.

   Charge is calculated as follows:

        A_BCHG + A_PCHG * (pps requested for by SRSVP)

  2.4 REQ_QOS

   An REQ_QOS is included in a Path message or a Resv message, and shows
   a QoS specified by a sender or requested for by a receiver.

   There are six REQUIRED parameters included in a REQ_QOS; They are
   R_PRI, R_MTU, R_PPS, R_UTU, R_CDLY and R_CCHG.

   A host requests for a QoS by specifying an R_PRI. link QoS with a
   certain L_PRI and area QoS with a certain A_PRI are chosen according
   to the R_PRI. The rule is described later.

   A sender can sends packets of which size is equal to or less than
   R_MTU by the rate R_PPS after the reservation is established.

   R_UTU, R_CDLY and R_CHG are used for estimating the charge for each
   R_UTU sec, and for specifying how to calculate the shortest path.
   Details are described later.

   R_RDLY and R_RCHG MAY be used for restricting the path. A reservation
   fails if the calculated shortest path does not satisfy an R_RDLY or an
   R_RCHG.

  2.5 PATH_QOS



FUJIKAWA Kenji             Expires on 25 November              [Page 3]






INTERNET DRAFT                     SS                          March 2001



   A Path message collects a PATH_QOS at every link along the path in
   order to calculate the path precisely.

   There are two parameters, P_PPS and P_DLY, included in a PATH_QOS.

   A P_PPS shows pps that the reservation can use.

   P_DLY shows delay that the reservation actually experiences.


3. Priority

   A priority (L_PRI, A_PRI or R_PRI) takes a value from 0 to 3, where a
   lower value means a higher priority. Priority 3 means a general
   reservation, e.g. a phone call, a conference or a video transmission.
   Priority 2 means a general reservation, of which usage is the same as
   that of 3, but which is treated with higher priority. Priority 1 is
   used for a reservation that takes long such as a leased circuit.
   Priority 0 is used for emergency communication such as calls for a
   police or a firehouse.

   The following table shows whether a reservation with a certain
   priority can preempt one with another priority or not:

                  | 0 1 2 3
                --+--------
                0 |   X X X
                1 |        
                2 |       X
                3 |        

   Link and area QoSes with a different priority are advertised
   separately. However, a QoS is regarded to be advertised under some
   conditions event if it is not advertised. The rule that matches an
   R_PRI to an L_PRI or an A_PRI in the next subsection.

  3.1 Rule for Matching R_PRI to L_PRI or R_PRI

   Corresponding LINK_QOS and AREA_QOS are chosen if L_PRI and A_PRI obey
   the following rule, when an R_PRI is given:
    1. No A_PRI corresponds to R_PRI when R_PRI is 0 or 1.
    2. L_PRI is equal to or larger than R_PRI.
    3. A_PRI is equal to or larger than R_PRI.

   A reservation through the area or link is not established, when no
   conditions are satisfied.




FUJIKAWA Kenji             Expires on 25 November              [Page 4]






INTERNET DRAFT                     SS                          March 2001



4. Admission Control

   A reservation is admitted under the following conditions:

        (L_LOH + R_MTU) * R_PPS                          -+
            <= (L_LOH + 1280) * L_PPS (L_LOH > 0)         |...(1)
        R_PPS <= L_PPS                (L_LOH = 0)        -+

   This criteria is employed when calculating the shortest path.


5. Calculating the Shortest Path

   A node that calculates the shortest path determines whether a link
   satisfies a requested QoS (R_MTU and R_PPS) according to criteria (1).

   The charge is calculated, when an REQ_QOS is given, as follows:

        (R_PPS * A_PCHG + A_BCHG) * [R_UTU/A_CTU]          ...(2)
                           ([x] is a ceiling function)

   The cost which is considered when calculating the shortest path is
   given by the following expression:

        R_CDLY * L_DLY + R_CCHG * (2)                      ...(3)

   Note that R_CCHG of 0 means delay preference, and R_CDLY of 0 means
   charge preference.


6. Calculating LINK_QOS between Two Points

   The way to calculate LINK_QOS between two areas which excludes each
   other is first to select R_PRI and R_PPS and then to calculate the
   shortest path from one area to the other that satisfies the R_PRI and
   R_PPS by the algorithm of Dijkstra. R_CHG is set to 0 in this case,
   i.e. AREA_QOSes does not influence. An L_DLY is the sum of L_DLYs of
   the links on the shortest path, and an L_PPS is the smallest one of
   the links. L_LOHs are ignored at this calculation.

   This calculation is not applied to AREA_QOSes since they are
   determined by the managers of the areas.








FUJIKAWA Kenji             Expires on 25 November              [Page 5]






INTERNET DRAFT                     SS                          March 2001


References

   [HQLIP]
          Ohta, M. and Fujikawa, K., ``Hierarchical QoS Link Information
          Protocol (HQLIP),'' Internet Draft (work in progress),
          draft-ohta-ric-hqlip-00.txt, March 2001.

   [SRSVP]
          Fujikawa, K., and Sheng, W., ``Simple Resource Reservation
          Protocol (SRSVP),'' Internet Draft (work in progress),
          draft-fujikawa-ric-srsvp-00.txt, March 2001.


Author's Address

    FUJIKAWA Kenji
    Graduate School of Informatics
    Kyoto University
    Yoshidahonmachi, Sakyo-Ku, Kyoto City, 606-8501, JAPAN
    Phone: +81-75-753-5387
    Fax: +81-75-751-0482
    EMail: fujikawa@real-internet.org

    SASAKI Motoharu
    Graduate School of Informatics
    Kyoto University
    Yoshidahonmachi, Sakyo-Ku, Kyoto City, 606-8501, JAPAN
    Phone: +81-75-753-5387
    Fax: +81-75-751-0482
    EMail: msasaki@kuis.kyoto-u.ac.jp





















FUJIKAWA Kenji             Expires on 25 November              [Page 6]






INTERNET DRAFT                     SS                          March 2001


                                  Appendix


A. Packet Formats

  A.1 LINK_QOS

      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
     +---------------+---------------+
     |     L_PRI     |     L_LOH     |
     +---------------+---------------+---------------+---------------+
     |                             L_PPS                             |
     +---------------+---------------+---------------+---------------+
     |                             L_DLY                             |
     +---------------+---------------+---------------+---------------+

  A.2 AREA_QOS

      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
     +---------------+---------------+
     |     A_PRI     |     A_CTU     |
     +---------------+---------------+---------------+---------------+
     |                             A_BCHG                            |
     +---------------+---------------+---------------+---------------+
     |                             A_PCHG                            |
     +---------------+---------------+---------------+---------------+

  A.3 REQ_QOS

      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
     +---------------+---------------+---------------+---------------+
     |     R_PRI     |     R_UTU     |             R_MTU             |
     +---------------+---------------+---------------+---------------+
     |                             R_PPS                             |
     +---------------+---------------+---------------+---------------+
     |                            R_CDLY                             |
     +---------------+---------------+---------------+---------------+
     |                            R_CCHG                             |
     +---------------+---------------+---------------+---------------+
     |                            R_RDLY                             |
     +---------------+---------------+---------------+---------------+
     |                            R_RCHG                             |
     +---------------+---------------+---------------+---------------+








FUJIKAWA Kenji             Expires on 25 November              [Page 7]






INTERNET DRAFT                     SS                          March 2001


  A.4 PATH_QOS

      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
     +---------------+---------------+---------------+---------------+
     |                             P_PPS                             |
     +---------------+---------------+---------------+---------------+
     |                             P_DLY                             |
     +---------------+---------------+---------------+---------------+

  A.5 CHARGE

      0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 
     +---------------+---------------+---------------+---------------+
     |                             C_SCHG                            |
     +---------------+---------------+---------------+---------------+




































FUJIKAWA Kenji             Expires on 25 November              [Page 8]
