

Network Working Group                                   Muneyoshi Suzuki
INTERNET DRAFT                                                       NTT
Expires November 21 , 1996                                  May 21, 1996


              ST FlowSpec for the Controlled-Load Service
                <draft-suzuki-stfs-ctrl-load-svc-00.txt>


Status of this Memo

   This document is an Internet-Draft.  Internet-Drafts are working
   documents of the Internet Engineering Task Force (IETF), its areas,
   and its working groups.  Note that other groups may also distribute
   working documents as Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress".

   To learn the current status of any Internet-Draft, please check the
   "1id-abstracts.txt" listing contained in the Internet- Drafts Shadow
   Directories on ftp.is.co.za (Africa), nic.nordu.net (Europe),
   munnari.oz.au (Pacific Rim), ds.internic.net (US East Coast), or
   ftp.isi.edu (US West Coast).


Abstract

   This memo specifies the ST FlowSpec format for the Controlled-Load
   service.  The ST FlowSpec described in this memo applies to both
   RFC1190 ST2 and RFC1819 ST2+.


1. Introduction

   This memo specifies the ST FlowSpec format for the Controlled-Load
   service defined in [1]. The ST FlowSpec described in this memo
   applies to both the RFC1190 ST2 [2] and the RFC1819 ST2+ [3]. This
   FlowSpec does not support parameter negotiations except for maximum
   packet size. This is because, in the ST2 and ST2+ environment,
   negotiated FlowSpec parameters are not always unique to each target.
   It is difficult for current datalink technologies to support
   heterogeneous traffic parameters to multiple receivers.






Suzuki                   Expires November, 1996                 [Page 1]

INTERNET DRAFT   draft-suzuki-stfs-ctrl-load-svc-00.txt        May, 1996


2. FlowSpec Format

   The ST FlowSpec and RFlowSpec for the Controlled-Load Service have
   the following format:

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |     PCode     |  PBytes = 28  | ST FS Ver = 8 |   0(unused)   |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | Ver=0 |       0(unused)       |      Overall Length = 5       |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |Service Num = 5|Data Length = 4|  Param ID = 1 |   0(unused)   |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |  Token Bucket Rate [r] (32-bit IEEE floating point number)    |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |  Token Bucket Size [b] (32-bit IEEE floating point number)    |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                   Minimum Policed Unit [m]                    |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                   Maximum Packet Size [M]                     |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


   The PCode field identifies common SCMP elements. The PCode value for
   the ST2 FlowSpec is two (2), for the ST2 RFlowSpec it is twelve (12),
   and for the ST2+ FlowSpec it is one (1).

   The PBytes field for the Controlled-Load Service is twenty-eight (28)
   bytes.

   The ST FS Ver (ST FlowSpec Version) field identifies the ST FlowSpec
   version.  The ST FlowSpec version number for the Integrated Services
   is eight (8).

   The Ver (Controlled-Load Service Version) field identifies the
   Controlled-Load Service version number. The current version is zero
   (0).

   The Overall Length field is always set to five (5) words.

   The Service Num (Service Number) for the Controlled-Load Service is
   five (5).

   The Data Length (Per-Service Data Length) field is always set to four
   (4) words.

   The Param ID (Parameter ID) field is always set to one (1).



Suzuki                   Expires November, 1996                 [Page 2]

INTERNET DRAFT   draft-suzuki-stfs-ctrl-load-svc-00.txt        May, 1996


   Intention of this field is compatibility with the Integrated Services
   FlowSpec format for the RSVP and does not have another meaning.

   Definitions of the Token Bucket Rate [r], the Token Bucket Size [b],
   the Minimum Policed Unit [m] and the Maximum Packet Size [M] fields
   are given in [1]. See section 5 of [1] for details.


   The ST2 or ST2+ agent, that creates the FlowSpec or the RFlowSpec
   element in the SCMP message, must assign valid values to all fields.
   The other agents must not modify any values except for the [M] field
   in the CONNECT message.

   The [M] field in the CONNECT message is assigned by the origin or the
   intermediate agent acting as origin, and updated by each agent based
   on the MTU value of the datalink layer.

   The negotiated value of [M] is set back to the origin or the
   intermediate agent acting as origin using the [M] field in the ACCEPT
   message that corresponds to the CONNECT message.

   In the original definition of the Controlled-Load Service, the value
   of the [m] field must be less than or equal to the value of the [M]
   field.  However, in the ST FlowSpec for the Controlled-Load Service,
   if the value of the [M] field is less than that of the [m] field, the
   value of the [m] field is regarded as the same value as the [M]
   field, and must not generate an error. This is because there is a
   possibility that the value of the [M] field in the CONNECT message
   may be decreased by negotiation.

   In the ST2+ SCMP messages, the value of the [M] field must be equal
   to or less than 65535.  In the ST2+ CONNECT message, the ACCEPT
   message that responds to CONNECT, or the NOTIFY message that contains
   the FlowSpec field, the value of the [M] field must be equal to the
   MaxMsgSize field in the message.  If these values are not the same,
   FlowSpec is regarded as an error.

   If the ST2 or ST2+ agent receives the CONNECT message that contains
   unacceptable FlowSpec, the agent must generate the REFUSE message.

   The ST FlowSpec for the Controlled-Load Service does not have the
   Precedence (see section 4.2.2.3 of [2] or section 9.2.2 of [3])
   field. All of the ST2 and ST2+ functions that depend on the
   Precedence (ex. stream preemption of the ST2+) are not supported.







Suzuki                   Expires November, 1996                 [Page 3]

INTERNET DRAFT   draft-suzuki-stfs-ctrl-load-svc-00.txt        May, 1996


3. Security Considerations

   Security considerations are not discussed in this memo.


References

      [1] J. Wroclawski, "Specification of the Controlled-Load Network
      Element Service", Internet Draft, November 1995, <draft-ietf-
      intserv-ctrl-load-svc-01.txt>

      [2] C. Topolcic, Ed., "Experimental Internet Stream Protocol,
      Version 2 (ST-II)", RFC 1190, October 1990.

      [3] L. Delgrossi, L. Berger, Ed., "Internet Stream Protocol
      Version 2 (ST2) Protocol Specification - Version ST2+", RFC 1819,
      August 1995.


Acknowledgments

      I would like to thank for valuable comments from Eric Crawley of
      BayNetworks and Steve Jackowski of NetManage.


Author's Address

      Muneyoshi Suzuki
      NTT Telecommunication Networks Laboratories
      3-9-11, Midori-cho
      Musashino-shi, Tokyo 180 Japan

      Phone: +81-422-59-2119
      Fax:   +81-422-59-3203
      EMail: suzuki@nal.ntt.jp
















Suzuki                   Expires November, 1996                 [Page 4]

