

Network Working Group                                        Rajiv Asati
Internet Draft                                       Cisco Systems, Inc.
Expiration Date: December 2007
                                                              Bob Thomas
                                                     Cisco Systems, Inc.

                                                               June 2007


                             LDP End-of-LIB


                 draft-asati-mpls-ldp-end-of-lib-00.txt

Status of this Memo

   By submitting this Internet-Draft, each author represents that any
   applicable patent or other IPR claims of which he or she is aware
   have been or will be disclosed, and any of which he or she becomes
   aware will be disclosed, in accordance with Section 6 of BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

Copyright Notice

   Copyright (C) The IETF TRUST (2007).


Abstract

   There are situations following LDP session establishment where it
   would be useful for an LDP speaker to know when its peer has
   advertised all of its labels.  These include session re-establishment
   following loss of an LDP session when LDP graceful restart is in use



Asati & Thomas                                                  [Page 1]

Internet Draft   draft-asati-mpls-ldp-end-of-lib-00.txt        June 2007


   and session establishment when LDP-IGP sync is in use.  The LDP
   specification provides no mechanism for an LDP speaker to notify a
   peer when it has completed its initial label advertisements to that
   peer.  This document specifies means for an LDP speaker to signal
   completion of its initial label advertisements following session
   establishment.



Table of Contents

    1   Introduction  .......................................... 2
    2   Specification Language  ................................ 3
    3   Signaling Completion of Initial Label Advertisement  ... 3
    4   IANA Considerations  ................................... 4
    5   Security Considerations  ............................... 4
    6   References  ............................................ 4
    7   Author Information  .................................... 5
    8   Intellectual Property Statement  ....................... 5
    9   Full Copyright Statement  .............................. 6





1. Introduction

   There are situations following LDP session establishment where it
   would be useful for an LDP speaker to know when its peer has
   advertised all of its labels.  For example, after an LDP session is
   re-established when LDP graceful restart [RFC3478] is in effect it
   would be helpful for each peer to signal the other after it has
   advertised all its label bindings.  Similarly when an LDP speaker is
   using LDP-IGP synchronization procedures [LDPSynch] it would be
   useful for the speaker to know when its peer has completed
   advertisement of its IP label bindings.

   The LDP specification [RFC3036] provides no mechanism for an LDP
   speaker to notify a peer when it has completed its initial label
   advertisements to that peer.

   This document specifies use of a Notification message with the "End-
   of-LIB" Status Code for an LDP speaker to signal completion of its
   label advertisements following session establishment.

   RFC3036 implicitly assumes that new Status Codes will be defined over
   the course of time.  However, it does not explicitly define the
   behavior of an LDP speaker which does not understand the Status Code



Asati & Thomas                                                  [Page 2]

Internet Draft   draft-asati-mpls-ldp-end-of-lib-00.txt        June 2007


   in a Notification message.  To avoid backward compatibility issues
   this document specifies use of the LDP capability mechanism [LDPCap]
   at session establishment time for informing a peer that an LDP
   speaker is capable of processing Notification messages that carry the
   "End-of-LIB" Status Code.


2. Specification Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in [RFC2119].


3. Signaling Completion of Initial Label Advertisement

   An LDP speaker MAY include a Capability Parameter in an
   Initialization message to inform a peer that it is capable of
   processing Notification Messages that carry a Status TLV with the
   End-of-LIB Status Code.

   The Capability Parameter for the End-of-LIB capability is a TLV with
   the following format:

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |U|F| End-of-LIB (IANA)         |            Length             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |S| Reserved    |
      +-+-+-+-+-+-+-+-+


   where:

     U and F bits: As specified by RFC3036.

     End-of-LIB: TLV code point to be assigned by IANA.

     S-bit: Must be 1 (indicates that cability is being advertised).

   An LDP speaker MUST NOT send a Notificiation which carries a Status
   TLV with the End-of-LIB Status Code unless its peer had advertised
   the End-of-LIB capability during session establishment.

   If its peer had advertised the End-of-LIB capability during session
   establishment an LDP speaker MAY signal completion of its label
   advertisements to the peer by means of a Notification message.  Such



Asati & Thomas                                                  [Page 3]

Internet Draft   draft-asati-mpls-ldp-end-of-lib-00.txt        June 2007


   a Notification message MUST carry:

     - An "End-of-LIB" Status Code in the Status TLV.  This is a new
       Status Code.

     - A FEC TLV with the Typed Wildcard FEC Element [TypedWC] that
       identifies the FEC type for which initial label advertisements
       have been completed.  In terms of Section 3.5.1 of RFC3036 this
       TLV is an "Optional Parameter" of the Notification message.


4. IANA Considerations

   This draft introduces a new LDP Status Code and a new LDP Capability
   both of shich require IANA assignment.


5. Security Considerations

   No security considerations beyond those that apply to the base LDP
   specification and described in [RFC3036] apply to use of the Typed
   Wildcard FEC Element defined in this document.


6. References

   Normative References

     [RFC2119] Bradner, S., "Key words for use in RFCs to Indicate
     Requirement Levels", BCP 14, RFC2119, March 1997.

     [RFC3036] Andersson, L., Doolan, P., Feldman, N., Fredette, A. and
     Thomas, B., "LDP Specification", RFC 3036, January 2001.

     [LDPCap] Thomas, B., Aggarwal, S., Aggarwal, R., Le Roux, J.L.,
     "LDP Capabilities", draft-ietf-mpls-ldp-capabilities-00, Work in
     Progress, May 2007.

     [TypedWC] Thomas, B., Minei, I., "LDP Typed Wildcard FEC", draft-
     ietf-mpls-ldp-typed-wildcard-01, Work in Progress, May 2007.

   Informative References

     [LDPCap] Thomas, B., Aggarwal, S., Agarwal, R., Le Roux, J.L., "LDP
     Capabilities", Work in Progreaa, May 2007.






Asati & Thomas                                                  [Page 4]

Internet Draft   draft-asati-mpls-ldp-end-of-lib-00.txt        June 2007


     [LDPSynch] Jork, M., Atlas, A., Fang, L., "LDP IGP
     Synchronization", draft-jork-ldp-igp-sync-02, Work in Progress,
     June 2006.

   [RFC3478]  Leelanivas, M., Rekhter, Y., Aggarwal, R., "Graceful
   Restart Mechanism for Label Distribution Protocol", February 2003.


7. Author Information

   Rajiv Asati
   Cisco Systems, Inc.
   Mail Stop RTP6P/2/1
   7025-6 Kit Creek Road PO Box 14987
   Research Triangle Park , NORTH CAROLINA 27709-4987
   Email: rajiva@cisco.com

   Bob Thomas
   Cisco Systems, Inc.
   1414 Massachusetts Ave.
   Boxborough MA 01719
   Email: rhthomas@cisco.com


8. Intellectual Property Statement

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in BCP 78 and BCP 79.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   http://www.ietf.org/ipr.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at ietf-
   ipr@ietf.org.




Asati & Thomas                                                  [Page 5]

Internet Draft   draft-asati-mpls-ldp-end-of-lib-00.txt        June 2007


9. Full Copyright Statement

   Copyright (C) The IETF Trust (2007).

   This document is subject to the rights, licenses and restrictions
   contained in BCP 78, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
   AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
   EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
   THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
   IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
   PURPOSE.



































Asati & Thomas                                                  [Page 6]

