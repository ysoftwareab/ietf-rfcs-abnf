
DHC Working Group                                              M-K. Shin
INTERNET-DRAFT                                                 ETRI/NIST
Expires: December 2004                                          H-C. Lee
                                                                    ETRI
                                                               June 2004

                     IPv4 Prefix Options for DHCPv6
             <draft-shin-dhc-dhcpv6-opt-ipv4-prefix-00.txt>


Status of this Memo

     This document is an Internet-Draft and is in full conformance with
     all provisions of Section 10 of RFC2026.

     Internet Drafts are working documents of the Internet Engineering
     Task Force (IETF), its areas, and working groups. Note that other
     groups may also distribute working documents as Internet-Drafts.

     Internet-Drafts are draft documents valid for a maximum of six
     months and may be updated, replaced, or obsolete by other documents
     at anytime. It is inappropriate to use Internet Drafts as reference
     material or to cite them other than as "work in progress."

     The list of current Internet-Drafts can be accessed at
     http://www.ietf.org/ietf/1id-abstracts.txt.

     The list of Internet-Draft Shadow Directories can be accessed at
     http://www.ietf.org/shadow.html.


Abstract

     This document describes new options for Dynamic Host Configuration
     Protocol (DHCP)  version 6 that provide a mechanism for the
     delegation of IPv4 prefixes.  Through these options, a delegating
     router can delegate IPv4 prefixes to authorized requesting devices.


1. Introduction and Applicability

     This document describes new options for DHCPv6 [1] that provide a
     mechanism for the delegation of IPv4 prefixes.

     The deployment of IPv6 will require a tightly coupled use of IPv4
     addresses to support both IPv6 and IPv4 connectivities within IPv6
     dominant network. At that time, these options would be used by an
     IPv4/IPv6 dual service provider to assign an IPv4 prefix to a
     Customer Premise Equipment (CPE) device acting as an IPv4 router
     and/or dynamic address allocation server (e.g., DHCPv4) as well as
     an IPv6 router between the subscriber's internal network and the
     service provider's core network.




Shin et al.               Expires December 2004                 [Page 1]


INTERNET-DRAFT       IPv4 Prefix Option for DHCPv6             June 2004


     Through these options, a delegating router can delegate IPv4
     prefixes to authorized requesting devices.  This mechanism is
     intended to automate the process of informing the customer's
     networking equipment of the IPv4 prefixes to be used at the
     customer's site.

     In addition, DSTM (Dual Stack Transition Mechanism) server [6] or
     TSP (Tunnel Setup Protocol) broker/server [7] might be one of good
     examples requesting an IPv4 prefix to its service provider within
     IPv6 network.

     This mechanism is intended as one of dual stack requirements for
     DHCPv6 during the period of co-existence of IPv4 and IPv6 [5].  It
     is not intended as a permanent solution.


2. Terminology

     This document uses the terminology defined in RFC 3315 [1], RFC
     2460 [2], and RFC 3633 [3].


3. Requirements

     The keywords MUST, MUST NOT, REQUIRED, SHALL, SHALL NOT, SHOULD,
     SHOULD NOT, RECOMMENDED, MAY, and OPTIONAL, when they appear in
     this document, are to be interpreted as described in BCP 14, RFC
     2119 [4].


4. Identity Association for IPv4 Prefix Delegation Option

     The IA_PD4 option is used to carry an IPv4 prefix delegation
     identity association, the parameters associated with the IA_PD4 and
     the prefixes associated with it.

     The format of the IA_PD4 option is:

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |        OPTION_IA_PD4          |         option-length         |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                         IAID (4 octets)                       |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                              T1                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                              T2                               |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      .                                                               .
      .                         IA_PD4-options                        .
      .                                                               .




Shin et al.               Expires December 2004                 [Page 2]


INTERNET-DRAFT       IPv4 Prefix Option for DHCPv6             June 2004


      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

      option-code:      OPTION_IA_PD4 (TBD)

      option-length:    12 + length of IA_PD4-options field.

      IAID:             The unique identifier for this IA_PD4; the IAID
                        must be unique among the identifiers for all of
                        this requesting router's IA_PD4s.

      T1:               The time at which the requesting router should
                        contact the delegating router from which the
                        IPv4 prefixes in the IA_PD4 were obtained to
                        extend the lifetimes of the prefixes delegated
                        to the IA_PD4; T1 is a time duration relative to
                        the current time expressed in units of seconds.

      T2:               The time at which the requesting router should
                        contact any available delegating router to
                        extend the lifetimes of the IPv4 prefixes
                        assigned to the IA_PD4; T2 is a time duration
                        relative to the current time expressed in units
                        of seconds.

      IA_PD4-options:   Options associated with this IA_PD4.


5. IA_PD4 Prefix Option

     The IA_PD4 Prefix option is used to specify IPv4 address prefixes
     associated with an IA_PD4. The IA_PD4 Prefix option must be
     encapsulated in the IA_PD4-options field of an IA_PD4 option.

     The format of the IA_PD4 Prefix option is:

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |       OPTION_IAPREFIX4        |         option-length         |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                      preferred-lifetime                       |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                        valid-lifetime                         |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | prefix-length |            IPv4 prefix (4 octets)             |
      |-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |    (cont.)    |                                               .
      +-+-+-+-+-+-+-+-+            IAprefix4-options                  .
      .                                                               .
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

      option-code:      OPTION_IAPREFIX4 (TBD)




Shin et al.               Expires December 2004                 [Page 3]


INTERNET-DRAFT       IPv4 Prefix Option for DHCPv6             June 2004


      option-length:    13 + length of IAprefix4-options field

      preferred-lifetime: The preferred-lifetime for the IPv4 prefix in
                        the option, expressed in units of seconds.

      valid-lifetime:   The valid lifetime for the IPv4 prefix in the
                        option, expressed in units of seconds.

      prefix-length:    Length for this IPv4 prefix in bits

      IPv4-prefix:      An IPv4 prefix

      IAprefix4-options: Options associated with this IPv4 prefix


6. Appearance of This Option

     The apprearance of options above is exactly the same with that of
     IPv6 prefix delegation options for DHCPv6 [1].

     An IA_PD4 option may only appear in the options area of a DHCPv6
     message.  A DHCPv6 message may contain multiple IA_PD4 options.
     The status of any operations involving this IA_PDv4 is indicated in
     a Status Code option in the IA_PD4-options field.  The
     IA_PD4-options field encapsulates those options that are specific
     to this IA_PD4.


7. Security Considerations

     The options may be used by an intruder DHCP server to assign an
     invalid prefixes to a requesting router in a denial of service
     attack.

     To avoid this security hazard, a requesting router MUST use
     authenticated DHCP to confirm that it is exchanging the options
     with an authorized DHCP server.


8. IANA Considerations

     IANA is requested to assign an option code to the following options
     from the option-code space defined in "DHCPv6 Options" section of
     the DHCPv6 specification [2].

      Option Name       Value           Described in
      OPTION_IA_PD4      TBD             Section 4
      OPTION_IAPREFIX4   TBD             Section 5








Shin et al.               Expires December 2004                 [Page 4]


INTERNET-DRAFT       IPv4 Prefix Option for DHCPv6             June 2004


9. References

 Normative References

 [1]  Droms, R., Bound, J., Volz, B., Lemon, T., Perkins, C. and M.
      Carney, "Dynamic Host Configuration Protocol for IPv6 (DHCPv6),"
      RFC 3315, July 2003.

 [2]  Deering, S. and R. Hinden, "Internet Protocol, Version 6 (IPv6)
      Specification," RFC 2460, December 1998.

 [3]  Troan, O., Droms, R.,"IPv6 Prefix Options for Dynamic Host
      Configuration Protocol (DHCP) version 6," RFC 3633, December
      2003.

 [4]  Bradner, S., "Key words for use in RFCs to Indicate Requirement
      Levels", BCP 14, RFC 2119, March 1997.

 Informative References

 [5]  Chown, T., Venaas, S., Strauf, C., "IPv4 and IPv6 Dual-Stack
      Issues for DHCPv6," draft-ietf-dhc-dual-stack-00.txt, Work-in-
      Progress, March 2004.

 [6]  Bound, J. et al., "Dual Stack Transition Mechanism," draft-
      bound-dstm-exp-01.txt, Work-in-Progress, April 2004.

 [7]  Blanchet, M., "IPv6 Tunnel Broker with the Tunnel Setup
      Protocol (TSP)," draft-blanchet-v6ops-tunnelbroker-tsp-00.txt,
      Work-in-Progress, February 2004.




Authors' Addresses

       Myung-Ki Shin
       ETRI/NIST
       820 West Diamond Avenue
       Gaithersburg, MD 20899 USA
       Tel : +1 301 975-3613
       E-mail : mshin@nist.gov

       Hee-Cheol Lee
       ETRI PEC
       161 Gajong-Dong, Yusong-Gu, Daejon 305-350, Korea
       Phone: +82 42 860 1833
       Email: hclee_shep@etri.re.kr








Shin et al.               Expires December 2004                 [Page 5]


INTERNET-DRAFT       IPv4 Prefix Option for DHCPv6             June 2004


Intellectual Property Statement

     The IETF takes no position regarding the validity or scope of any
     intellectual property or other rights that might be claimed to
     pertain to the implementation or use of the technology described in
     this document or the extent to which any license under such rights
     might or might not be available; neither does it represent that it
     has made any effort to identify any such rights. Information on the
     IETF's procedures with respect to rights in standards-track and
     standards-related documentation can be found in BCP-11. Copies of
     claims of rights made available for publication and any assurances
     of licenses to be made available, or the result of an attempt made
     to obtain a general license or permission for the use of such
     proprietary rights by implementors or users of this specification
     can be obtained from the IETF Secretariat.

     The IETF invites any interested party to bring to its attention any
     copyrights, patents or patent applications, or other proprietary
     rights which may cover technology that may be required to practice
     this standard. Please address the information to the IETF Executive
     Director.


Full Copyright Statement

     Copyright (C) The Internet Society (2003). All Rights Reserved.

     This document and translations of it may be copied and furnished to
     others, and derivative works that comment on or otherwise explain
     it or assist in its implementation may be prepared, copied,
     published and distributed, in whole or in part, without restriction
     of any kind, provided that the above copyright notice and this
     paragraph are included on all such copies and derivative works.
     However, this document itself may not be modified in any way, such
     as by removing the copyright notice or references to the Internet
     Society or other Internet organizations, except as needed for the
     purpose of developing Internet standards in which case the
     procedures for copyrights defined in the Internet Standards process
     must be followed, or as required to translate it into languages
     other than English.

     The limited permissions granted above are perpetual and will not be
     revoked by the Internet Society or its successors or assignees.

     This document and the information contained herein is provided on
     an "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET
     ENGINEERING TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR
     IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF
     THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
     WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.






Shin et al.               Expires December 2004                 [Page 6]


INTERNET-DRAFT       IPv4 Prefix Option for DHCPv6             June 2004


Acknowledgement

     Funding for the RFC Editor function is currently provided by the
     Internet Society.




















































Shin et al.               Expires December 2004                 [Page 7]


