
  Internet Draft                                       Pankaj K. Jha
  draft-jha-optical-sdl-01.txt                 Cypress Semiconductor
  Expiration Date: September, 2002                       March, 2002


  Payload-independent Delineation for Simple Data Link (SDL) Framing


  1.   Status of this Memo

  This document is an Internet-Draft and is in full conformance with
  all provisions of Section 10 of RFC2026 [1].

  Internet drafts are working documents of the Internet Engineering
  Task Force (IETF), its areas, and its working groups. Note that other
  groups may also distribute working documents as Internet-Drafts.
  Internet drafts are draft documents valid for a maximum of six months
  and may be updated, replaced, or obsoleted by other documents at any
  time. It is inappropriate to use Internet-Drafts as reference
  material or to cite them other than as "work in progress".

  The list of current Internet-Drafts can be accessed at
                                            
                                           
                                            
  http://www.ietf.org/ietf/1id-abstracts.txt.

  The list of Internet-Draft Shadow Directories can be accessed at
                                 
                                
                                 
  http://www.ietf.org/shadow.html.

  2.   Abstract

  Simple Data Link (SDL) framing specification (rfc2823) defines a
  {length, length CRC} based construct with a tail-end payload CRC for
  delineating frames over digital links. Many protocols, however,
  already have built-in CRC mechanisms, and a tail-end CRC is not
  always needed. This draft proposes a modification to allow SDL
  receivers to delineate all types of payload without having to analyze
  payload protocol header to determine presence of a tail-end CRC.

  3.   Conventions used in this document

  The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
  "SHOULD", "SHOULD NOT", "RECOMMENDED",  "MAY", and "OPTIONAL" in this
  document are to be interpreted as described in RFC-2119 [2].

  4.   Introduction

  Simple Data Link (SDL) framing specification (rfc2823) defines a
  {length, length CRC} based construct for delineating frames over
  digital links. Current SDL protocol specifies a payload CRC at the
  end for all types of payloads. Many protocols, however, already have
  built-in CRC mechanisms, and a tail-end CRC is not always needed.



   Jha                    Expires September, 2002               [Page 1]


  INTERNET-DRAFT          Payload-independent SDL        March, 2002


  Consequently, with the current SDL specification a frame delineation
  engine must include additional payload protocol-specific logic to
  process payload protocol header to be able to determine presence of a
  payload CRC at the end of frame.


  5. An Overview of Simple Data Link (SDL, rfc2823)

  SDL framing delineation protocol (rfc2823, [1]) prefixes a payload
  with a 32-bit header. First 16 bits of this word (LHdr) hold the
  length of the payload and the other 16 bits (LHEC) contain CRC-16
  calculated on the 16-bit length field, as shown below:

     +--------->------>---------------+
     |                                v
  +=====+======+-----------+------++=====+======+-----------+------+
  |LHdr | LHEC | .Payload. | pCRC ||LHdr | LHEC | .Payload. | pCRC |
  +=====+======+-----------+------++=====+======+-----------+------+
    2      2        N         4       2     2        N         4
  Figure 1: SDL Framing Delineation


  Frames are located by hunting for a length/CRC match, much the same
  way as ATM cells are located by HEC synchronization. Next frame is
  located by jumping length bytes in the frame, skipping next four
  bytes (payload CRC is computed and verified by an SDL receive engine)
  and again looking for a length/CRC match at the following byte
  location.

  Since there is no manipulation to the header bytes, link bandwidth is
  optimally utilized for sending frames using SDL.

  In case of data corruption at the location of a length CRC field, the
  hardware begins a byte-by-byte hunting for the length/CRC construct
  until a match is found.

  5.1   Length (LHdr)

  The current SDL protocol specifies the length field to include all
  bytes following the LHEC (length CRC) field up to the end of payload
  but not including pCRC.

  5.2   Length HEC (LHEC)

  This field is 16 bits, and it contains ITU-T CRC-16 calculated on the
  16-bit LHdr field.

  5.3   Payload CRC (pCRC)


  Jha                     Expires September, 2002               [Page 2]


  INTERNET-DRAFT          Payload-independent SDL        March, 2002



  A payload CRC is OPTIONAL. The SDL specification mandates an advance
  negotiation or provisioning for presence or absence of pCRC in all
  frames.

  6.   SDL for a single Service Transport

  The current SDL specification for payload CRC scheme is sufficient
  for sending a single type of data. If the service being carried
  doesn't have a built-in CRC mechanism, an SDL engine can provide a
  payload CRC on transmission and check for a valid CRC on reception.

  For other protocols, such as Ethernet, the external CRC is omitted.
  In this case, the SDL receive engine performs the length/length-CRC
  hunting and passes the payload to an Ethernet MAC that checks the CRC
  embedded in the Ethernet frame.

  7.   SDL for a Multiservice Transport

  In a multiservice transport, however, some data types may not have an
  explicit CRC field present at the end of the payload. In addition, in
  many systems a frame delineation engine is always separate from a
  payload CRC computation/verification logic block.

  Multiservice transport framing protocols must feature a bit in their
  header fields to indicate presence of a payload CRC. These framing
  protocols understand when to include or exclude payload CRC during
  transmit/receive

  8.   SDL Engine Limitations

  Dependence on payload protocol structure complicates design of SDL
  transmit/receive engines. For multiservice transport, devices must
  contain logic blocks that understand details of protocol that are
  carried inside the SDL payload area, and the engines must be able to
  process them for sending and receiving payload data with/without a
  CRC.

  Scalability of such SDL engines will be quite limited, especially in
  multi-channel environments where multiple instances of SDL engines
  need to run. Worse yet, each time a new multiservice transport
  protocol is to be transported, each of the engines need to modified,
  forcing a re-design of hardware device.

  9.   Proposal for Length Field Definition

  To de-couple frame delineation from payload CRC dependence, this
  draft proposes that the LHdr length value MUST include payload plus


  Jha                     Expires September, 2002               [Page 3]


  INTERNET-DRAFT          Payload-independent SDL        March, 2002


  any payload CRC field, if present. With this scheme, a frame
  delineation mechanism becomes simpler - to get to the next frame, the
  delineation logic simply skips the number of bytes given by the
  length field (LHdr).

  On reception, the entire payload (including any payload CRC) is given
  to a payload-processing logic block. The payload-processing block is
  responsible for any generation and processing of payload CRC. During
  transmission, the payload-processing block sends payload and any
  payload CRC to the SDL framing logic. This logic simply adds a 4-byte
  header consisting of a 2-byte length field for payload and any CRC,
  and a 2-byte CRC for the length field.

  10.  Author's Address

  Pankaj K Jha
  Cypress Semiconductor
  3901 N First Street
  San Jose, CA 95134
  USA

  Phone: 408 432 7091
  Fax:   408 943 2949
  Email: pkj@cypress.com


  11.  Full Copyright Statement

  "Copyright (C) The Internet Society. All Rights Reserved. This
  document and translations of it may be copied and furnished to
  others, and derivative works that comment on or otherwise explain it
  or assist in its implementation may be prepared, copied, published
  and distributed, in whole or in part, without restriction of any
  kind, provided that the above copyright notice and this paragraph are
  included on all such copies and derivative works. However, this
  document itself may not be modified in any way, such as by removing
  the copyright notice or references to the Internet Society or other
  Internet organizations, except as needed for the purpose of
  developing Internet standards in which case the procedures for
  copyrights defined in the Internet Standards process must be
  followed, or as required to translate it into languages other than
  English.

  The limited permissions granted above are perpetual and will not be
  revoked by the Internet Society or its successors or assigns.

  This document and the information contained herein is provided on an
  "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING


  Jha                     Expires September, 2002               [Page 4]


  INTERNET-DRAFT          Payload-independent SDL        March, 2002


  TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
  BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
  HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
  MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.

  12.  References

  1.   Carlson, J., Langner, P., Hernandez-Valencia, E.J., Manchester,
       J., PPP over Simple Data Link (SDL) using SONET/SDH with ATM-
       like framing, rfc2823.txt, May 2000.
  2.   Doshi, B., Dravida, S., Hernandez-Valencia, E., Matragi, W.,
       Qureshi, M., Anderson, J., Manchester, J.,"A Simple Data Link
       Protocol for High Speed Packet Networks", Bell Labs Technical
       Journal, pp. 85-104, Vol.4 No.1, January-March 1999.
  3.   Anderson, J., Manchester, J., Rodriguez-Moral, A.,
       Veeraraghavan, M.,"Protocols and Architectures for IP Optical
       Networking", Bell Labs Technical Journal, pp. 105-124, Vol.4
       No.1, January - March 1999.
  4.   Generic Framing Procedure, Revision 4, ANSI, http://www.t1.org
       T1X1.5/200-024R4.doc






























  Jha                     Expires September, 2002               [Page 5]

