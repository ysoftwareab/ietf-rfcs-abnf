<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Precis Framework: Handling Internationalized Strings in Protocols</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Precis Framework: Handling Internationalized Strings in Protocols">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 60em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 60em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 60em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">Network Working Group</td><td class="header">M. Blanchet</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Viagenie</td></tr>
<tr><td class="header">Obsoletes: <a href='http://tools.ietf.org/html/rfc3454'>3454</a> (if&nbsp;approved)</td><td class="header">July 5, 2010</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">&nbsp;</td></tr>
<tr><td class="header">Expires: January 6, 2011</td><td class="header">&nbsp;</td></tr>
</table></td></tr></table>
<h1><br />Precis Framework: Handling Internationalized Strings in Protocols<br />draft-blanchet-precis-framework-00.txt</h1>

<h3>Abstract</h3>

<p>
Using Unicode codepoints in protocol strings requires preparation of the string. This document describes the Precis Protocol Framework that prepares various classes of strings used in protocol elements. A protocol specification chooses a class of strings and then implements the corresponding preparation steps described in this document. This document is based on the IDNAbis approach. It obsoletes the Stringprep algorithm.
      
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on January 6, 2011.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<p>
This document may contain material from IETF Documents or IETF
Contributions published or made publicly available before November
10, 2008.  The person(s) controlling the copyright in some of this
material may not have granted the IETF Trust the right to allow
modifications of such material outside the IETF Standards Process.
Without obtaining an adequate license from the person(s) controlling
the copyright in such materials, this document may not be modified
outside the IETF Standards Process, and derivative works of it may
not be created outside the IETF Standards Process, except to format
it for publication as an RFC or to translate it into languages other
than English.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#anchor2">2.</a>&nbsp;
String Classes<br />
<a href="#anchor3">3.</a>&nbsp;
Domain U-Label, A-Label and Name<br />
<a href="#anchor4">4.</a>&nbsp;
Email Addresses<br />
<a href="#anchor5">5.</a>&nbsp;
Restricted Identifier<br />
<a href="#anchor6">6.</a>&nbsp;
Less-Restrictive Identifier<br />
<a href="#anchor7">7.</a>&nbsp;
Normalization Form and Case Folding<br />
<a href="#anchor8">8.</a>&nbsp;
Codepoint Properties<br />
<a href="#Categories">9.</a>&nbsp;
Category definitions Used to Calculate Derived Property Value<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#A">9.1.</a>&nbsp;
LetterDigits (A)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#B">9.2.</a>&nbsp;
Unstable (B)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#C">9.3.</a>&nbsp;
IgnorableProperties (C)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#D">9.4.</a>&nbsp;
IgnorableBlocks (D)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#E">9.5.</a>&nbsp;
LDH (E)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#F">9.6.</a>&nbsp;
Exceptions (F)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#G">9.7.</a>&nbsp;
BackwardCompatible (G)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#H">9.8.</a>&nbsp;
JoinControl (H)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#I">9.9.</a>&nbsp;
OldHangulJamo (I)<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#J">9.10.</a>&nbsp;
Unassigned (J)<br />
<a href="#PropertyCalculation">10.</a>&nbsp;
Calculation of the Derived Property<br />
<a href="#codepointexplain">11.</a>&nbsp;
Codepoints<br />
<a href="#anchor9">12.</a>&nbsp;
IANA Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#derivedregistry">12.1.</a>&nbsp;
IDNA derived property value registry<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#IANAContext">12.2.</a>&nbsp;
IDNA Context Registry<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">12.2.1.</a>&nbsp;
Template for context registry<br />
<a href="#anchor11">13.</a>&nbsp;
Security Considerations<br />
<a href="#anchor12">14.</a>&nbsp;
Discussion home for this draft<br />
<a href="#anchor13">15.</a>&nbsp;
Acknowledgements<br />
<a href="#RulesInit">Appendix&nbsp;A.</a>&nbsp;
Contextual Rules Registry<br />
<a href="#anchor14">Appendix&nbsp;A.1.</a>&nbsp;
ZERO WIDTH NON-JOINER<br />
<a href="#anchor15">Appendix&nbsp;A.2.</a>&nbsp;
ZERO WIDTH JOINER<br />
<a href="#anchor16">Appendix&nbsp;A.3.</a>&nbsp;
MIDDLE DOT<br />
<a href="#anchor17">Appendix&nbsp;A.4.</a>&nbsp;
GREEK LOWER NUMERAL SIGN (KERAIA)<br />
<a href="#anchor18">Appendix&nbsp;A.5.</a>&nbsp;
HEBREW PUNCTUATION GERESH<br />
<a href="#anchor19">Appendix&nbsp;A.6.</a>&nbsp;
HEBREW PUNCTUATION GERSHAYIM<br />
<a href="#anchor20">Appendix&nbsp;A.7.</a>&nbsp;
KATAKANA MIDDLE DOT<br />
<a href="#anchor21">Appendix&nbsp;A.8.</a>&nbsp;
ARABIC-INDIC DIGITS<br />
<a href="#anchor22">Appendix&nbsp;A.9.</a>&nbsp;
EXTENDED ARABIC-INDIC DIGITS<br />
<a href="#Codepoints">Appendix&nbsp;B.</a>&nbsp;
Codepoints 0x0000 - 0x10FFFF<br />
<a href="#anchor23">Appendix&nbsp;B.1.</a>&nbsp;
Codepoints in Unicode Character Database (UCD) format<br />
<a href="#rfc.references1">16.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Author's Address<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>[draft-ietf-blanchet-newprep-problem-statement] describes the rationale behind updating Stringprep[RFC3454] to a new framework.

</p>
<p>
Current Stringprep profiles and their corresponding protocol specifications share similar class of strings. This framework is based on the assumption that the use of internationalized strings in most protocols can be grouped into a few set of string classes. By defining a few string classes and their corresponding preparation algorithms instead of specific profiles for each protocol,
</p>
<ul class="text">
<li>protocols specifications do not need to have a special i18n section or implementation, since they would reference one of this document string classes and corresponding processing.
</li>
<li>protocols benefit for sharing implementation code and tables.
</li>
<li>end-users will have a better knowledge of which codepoints are allowed in various contexts (instead of a specific profile per protocol as of with Stringprep profiles
</li>
<li>versioning for future versions of the Unicode database is simpler
</li>
<li>protocols that have familiarity with others (such as username identifiers used in various authentication schemes in protocols) can use the same string class, and therefore obtain consistency for end-users and implementors.
</li>
</ul><p>

</p>
<p>This framework takes heavily on the IDNAbis tables[IDNABISTABLES], therefore, could help implementors by sharing common code for all string classes, including domain labels and names.
</p>
<p>EDITOR NOTE:This current version of the document copy a lot of normative text from draft-ietf-idnabis-tables. The editor would highly prefer reference instead of copy, but at least for the purpose of discussion, copied text. Moreover, the idnabis-table draft contains references to IDN labels in many places which may make problematic for normative reference. To be looked at as we go.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
String Classes</h3>

<p>The following classes of strings are identified:
</p>
<ul class="text">
<li>domain U-label
</li>
<li>domain A-label
</li>
<li>domain name
</li>
<li>email address
</li>
<li>restricted identifier
</li>
<li>less-restrictive identifier
</li>
</ul><p>

</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Domain U-Label, A-Label and Name</h3>

<p>TBD:define the class.
</p>
<p>For these string classes, implement [IDNA2008].
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Email Addresses</h3>

<p>TBD:define the class by instantiating and refering to the EAI, SMTP.
</p>
<p>For this classes of strings, implement [EAI]?
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Restricted Identifier</h3>

<p>This class of strings, named RI in this document, corresponds to an identifier which contains language-type characters, no spacing characters, no "@", no "punctuation", no display
 characters. The normative description of this class is in the corresponding mapping tables.
</p>
<p>In section XX below, allowed Unicode codepoints for this string class are identified as PVALID or RI_PVALID. Disallowed codepoints are identified as DISALLOWED or RI_DISALLOWED.
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Less-Restrictive Identifier</h3>

<p>This class of strings, named LRI in this document, corresponds to an identifier which contains language-type characters, no spacing characters, no "@", but contains various "punctuation" and display characters. The normative description of this class is in the corresponding mapping tables.
</p>
<p>In section XX below, allowed Unicode codepoints for this string class are identified as PVALID or LRI_PVALID. Disallowed codepoints are identified as DISALLOWED or LRI_DISALLOWED.
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Normalization Form and Case Folding</h3>

<p>TBD: discuss NFC vs NFKC, case folding",
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Codepoint Properties</h3>

<p>This document reviews and classifies the collections of code points
      in the Unicode character set by examining various properties of the code
      points. It then defines an algorithm for determining a derived property
      value. It specifies a procedure, and not a table, of code points so that
      the algorithm can be used to determine code point sets independent of
      the version of Unicode that is in use.
</p>
<p>This document is not intended to specify precisely how these property
      values are to be applied in protocol strings. That information should be
defined in the protocol specification that instantiate a string class of this document.
</p>
<p>The value of the property is to be interpreted as follows.
</p>
<p>
 </p>
<ul class="text">
<li>PROTOCOL VALID: Those that are allowed to be used in any string class. Code
          points with this property value are permitted for general use in any string class.  The abbreviated term PVALID is used to refer to this value in the rest of this document.<br />

</li>
<li>SPECIFIC CLASS PROTOCOL VALID: Those that are allowed to be used in specific string classes. Code points with this property value are permitted for use in specific string classes.  The abbreviated term *_PVALID, where * = (RI, LRI) is used to refer to this value in the rest of this document.  <br />

</li>
<li>CONTEXTUAL RULE REQUIRED: Some characteristics of the character,
          such as it being invisible in certain contexts or problematic in
          others, requires that it not be used in labels unless specific other
          characters or properties are present. The abbreviated term CONTEXT
          is used to refer to this value in the rest of this document. There
          are two subdivisions of CONTEXTUAL RULE REQUIRED, one for
          Join_controls (called CONTEXTJ) and for other characters (called
          CONTEXTO).  <br />

</li>
<li>DISALLOWED: Those that should clearly not be included in any string class.
          Code points with this property value are not permitted in any string class.<br />

</li>
<li>SPECIFIC CLASS DISALLOWED: Those that should clearly not be included in specific string classes. Code points with this property value are not permitted in any string class. The abbreviated term *_DISALLOWED, where * = (RI, LRI) is used to refer to this value in the rest of this document. <br />

</li>
<li>UNASSIGNED: Those code points that are not designated (i.e. are unassigned) in the Unicode Standard.<br />

</li>
</ul><p>

</p>
<p>
	      The mechanisms described here allow determination of the value of the
        property for future versions of Unicode (including characters added
        after Unicode 5.2). Changes in Unicode properties that do not affect the outcome
        of this process do not affect this framework. For example, a character can have
        its Unicode General_Category value (see [Unicode52])
				change from So to Sm, or from Lo to
        Ll, without affecting the algorithm results. Moreover, even if such
        changes were to result, the <a class='info' href='#G'>BackwardCompatible
        list<span> (</span><span class='info'>BackwardCompatible (G)</span><span>)</span></a> can be adjusted to ensure the stability of the results.
		  
</p>
<p>Some code points need to be allowed in exceptional circumstances, but
      should be excluded in all other cases; these rules are also described in
      other documents. The most notable of these are the Join Control
      characters, U+200D ZERO WIDTH JOINER and U+200C ZERO WIDTH NON-JOINER.
      Both of them have the derived property value CONTEXTJ. A character with
      the derived property value CONTEXTJ or CONTEXTO (CONTEXTUAL RULE
      REQUIRED) is not to be used unless an appropriate rule has been
      established and the context of the character is consistent with that
      rule. It is invalid to either register a string containing these
      characters or even to look one up unless such contextual rule is found
      and satisfied. Please see <a class='info' href='#RulesInit'>Appendix&nbsp;A<span> (</span><span class='info'>Contextual Rules Registry</span><span>)</span></a>, The Contextual Rules Registry,
      for more information.
</p>
<a name="Categories"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Category definitions Used to Calculate Derived Property Value</h3>

<p>The derived property obtains its value based on a two-step
        procedure. First, characters are placed in one or more character
        categories based on either core properties defined by the Unicode Standard
        or by treating the codepoint as an exception and addressing the codepoint
        by its codepoint value. These categories are not mutually exclusive.
</p>
<p>In the second step, set operations are used with these categories
        to determine the values for an string class specific property. Those operations
        are specified in <a class='info' href='#PropertyCalculation'>Section&nbsp;10<span> (</span><span class='info'>Calculation of the Derived Property</span><span>)</span></a>.
</p>
<p>Unicode property names and property value names may have short
        abbreviations, such as gc for the General_Category property, and Ll
        for the Lowercase_Letter property value of the gc property.
</p>
<p>In the following specification of categories, the operation
	which returns the value of a particular Unicode character
	property for a code point is designated by using the
	formal name of that property (from PropertyAliases.txt)
	followed by '(cp)'. For example, the value of the
	General_Category property for a code point is indicated
	by General_Category(cp).
	
</p>
<a name="A"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.1"></a><h3>9.1.&nbsp;
LetterDigits (A)</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
A: General_Category(cp) is in {Ll, Lu, Lo, Nd, Lm, Mn, Mc}
</pre></div>
<p>These rules identifies characters commonly used in mnemonics and
          often informally described as "language characters".
</p>
<p>For more information, see section
          4.5 of [Unicode5].
</p>
<p>The categories used in this rule are: </p>
<ul class="text">
<li>Ll - Lowercase_Letter
</li>
<li>Lu - Uppercase_Letter
</li>
<li>Lo - Other_Letter
</li>
<li>Nd - Decimal_Number
</li>
<li>Lm - Modifier_Letter
</li>
<li>Mn - Nonspacing_Mark
</li>
<li>Mc - Spacing_Mark
</li>
</ul>

<a name="B"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.2"></a><h3>9.2.&nbsp;
Unstable (B)</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
B: toNFKC(toCaseFold(toNFKC(cp))) != cp
</pre></div>
<p>This category is used to group the characters that are not stable
          under NFKC normalization and casefolding. In general, these code
          points are not suitable for use in any string class.
</p>
<p>The toCaseFold() operation is defined in Section 3.13 of
          [Unicode5].
</p>
<p>The toNFKC() operation returns the code point in normalization
          form KC. For more information, see Section 5 of [TR15].
</p>
<a name="C"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.3"></a><h3>9.3.&nbsp;
IgnorableProperties (C)</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
C: Default_Ignorable_Code_Point(cp) = True or
   White_Space(cp) = True or
   Noncharacter_Code_Point(cp) = True
</pre></div>
<p>This category is used to group code points that are not
          recommended for use in identifiers. In general, these code points
          are not suitable for identifiers.
</p>
<p>The definition for Default_Ignorable_Code_Point can be found in
          <a href='http://unicode.org/Public/UNIDATA/DerivedCoreProperties.txt'>DerivedCoreProperties.txt</a> and is at the time of Unicode
          5.2:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Other_Default_Ignorable_Code_Point + Cf (Format characters)
+ Variation_Selector - White_Space - FFF9..FFFB (Annotation
Characters) - 0600..0603, 06DD, 070F (exceptional Cf characters
that should be visible)
</pre></div>
<a name="D"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.4"></a><h3>9.4.&nbsp;
IgnorableBlocks (D)</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
D: Block(cp) is in {Combining Diacritical Marks for Symbols,
                    Musical Symbols, Ancient Greek Musical Notation}
</pre></div>
<p>This category is used to identifying code points that are not
          useful in mnemonics  but may be useful for some string classes.
</p>
<p>The definition of blocks can be found in
          <a href='http://unicode.org/Public/UNIDATA/Blocks.txt'>Blocks.txt</a>
				  
</p>
<a name="E"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.5"></a><h3>9.5.&nbsp;
LDH (E)</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
E: cp is in {002D, 0030..0039, 0061..007A}
</pre></div>
<p>This category is used in the second step to preserve the
          traditional "hostname" (LDH) characters ('-', 0-9 and a-z). In
          general, these code points are suitable for use for identifiers.
				
</p>
<a name="F"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.6"></a><h3>9.6.&nbsp;
Exceptions (F)</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
F: cp is in {00B7, 00DF, 0375, 03C2, 05F3, 05F4, 0640, 0660,
             0661, 0662, 0663, 0664, 0665, 0666, 0667, 0668,
             0669, 06F0, 06F1, 06F2, 06F3, 06F4, 06F5, 06F6,
             06F7, 06F8, 06F9, 06FD, 06FE, 07FA, 0F0B, 3007,
             302E, 302F, 3031, 3032, 3033, 3034, 3035, 303B,
             30FB}
</pre></div>
<p>This category explicitly lists code points for which the category
          cannot be assigned using only the core property values that exist in
          the Unicode standard. The values are according to the table
          below:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
PVALID -- Would otherwise have been DISALLOWED

00DF; PVALID     # LATIN SMALL LETTER SHARP S
03C2; PVALID     # GREEK SMALL LETTER FINAL SIGMA
06FD; PVALID     # ARABIC SIGN SINDHI AMPERSAND
06FE; PVALID     # ARABIC SIGN SINDHI POSTPOSITION MEN
0F0B; PVALID     # TIBETAN MARK INTERSYLLABIC TSHEG
3007; PVALID     # IDEOGRAPHIC NUMBER ZERO

CONTEXTO -- Would otherwise have been DISALLOWED

00B7; CONTEXTO   # MIDDLE DOT
0375; CONTEXTO   # GREEK LOWER NUMERAL SIGN (KERAIA)
05F3; CONTEXTO   # HEBREW PUNCTUATION GERESH
05F4; CONTEXTO   # HEBREW PUNCTUATION GERSHAYIM
30FB; CONTEXTO   # KATAKANA MIDDLE DOT

CONTEXTO -- Would otherwise have been PVALID

0660; CONTEXTO   # ARABIC-INDIC DIGIT ZERO
0661; CONTEXTO   # ARABIC-INDIC DIGIT ONE
0662; CONTEXTO   # ARABIC-INDIC DIGIT TWO
0663; CONTEXTO   # ARABIC-INDIC DIGIT THREE
0664; CONTEXTO   # ARABIC-INDIC DIGIT FOUR
0665; CONTEXTO   # ARABIC-INDIC DIGIT FIVE
0666; CONTEXTO   # ARABIC-INDIC DIGIT SIX
0667; CONTEXTO   # ARABIC-INDIC DIGIT SEVEN
0668; CONTEXTO   # ARABIC-INDIC DIGIT EIGHT
0669; CONTEXTO   # ARABIC-INDIC DIGIT NINE
06F0; CONTEXTO   # EXTENDED ARABIC-INDIC DIGIT ZERO
06F1; CONTEXTO   # EXTENDED ARABIC-INDIC DIGIT ONE
06F2; CONTEXTO   # EXTENDED ARABIC-INDIC DIGIT TWO
06F3; CONTEXTO   # EXTENDED ARABIC-INDIC DIGIT THREE
06F4; CONTEXTO   # EXTENDED ARABIC-INDIC DIGIT FOUR
06F5; CONTEXTO   # EXTENDED ARABIC-INDIC DIGIT FIVE
06F6; CONTEXTO   # EXTENDED ARABIC-INDIC DIGIT SIX
06F7; CONTEXTO   # EXTENDED ARABIC-INDIC DIGIT SEVEN
06F8; CONTEXTO   # EXTENDED ARABIC-INDIC DIGIT EIGHT
06F9; CONTEXTO   # EXTENDED ARABIC-INDIC DIGIT NINE

DISALLOWED -- Would otherwise have been PVALID

0640; DISALLOWED # ARABIC TATWEEL
07FA; DISALLOWED # NKO LAJANYALAN
302E; DISALLOWED # HANGUL SINGLE DOT TONE MARK
302F; DISALLOWED # HANGUL DOUBLE DOT TONE MARK
3031; DISALLOWED # VERTICAL KANA REPEAT MARK
3032; DISALLOWED # VERTICAL KANA REPEAT WITH VOICED SOUND MARK
3033; DISALLOWED # VERTICAL KANA REPEAT MARK UPPER HALF
3034; DISALLOWED # VERTICAL KANA REPEAT WITH VOICED SOUND MARK UPPER HA
3035; DISALLOWED # VERTICAL KANA REPEAT MARK LOWER HALF
303B; DISALLOWED # VERTICAL IDEOGRAPHIC ITERATION MARK
</pre></div>
<a name="G"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.7"></a><h3>9.7.&nbsp;
BackwardCompatible (G)</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
G: cp is in {}
</pre></div>
<p>This category includes the code points that property values in
          versions of Unicode after 5.2 have changed in such a way that the
          derived property value would no longer be PVALID or DISALLOWED. If
          changes are made to future versions of Unicode so that code points
          might change property value from PVALID or DISALLOWED, then this
          table can be updated and keep special exception values so that the
          property values for code points stay stable.
</p>
<a name="H"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.8"></a><h3>9.8.&nbsp;
JoinControl (H)</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
H: Join_Control(cp) = True
</pre></div>
<p>This category consists of Join Control characters (i.e., they are
          not in <a class='info' href='#A'>LetterDigits<span> (</span><span class='info'>LetterDigits (A)</span><span>)</span></a>) but are still required
          in strings under some circumstances.
</p>
<a name="I"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.9"></a><h3>9.9.&nbsp;
OldHangulJamo (I)</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
I: Hangul_Syllable_Type(cp) is in {L, V, T}
</pre></div>
<p>
	This category consists of all conjoining Hangul Jamo
	(Leading Jamo, Vowel Jamo, and Trailing Jamo).
	
</p>
<p>
  Elimination of conjoining Hangul Jamos from the set
	of PVALID characters results in restricting the set
	of Korean PVALID characters just to preformed, modern
	Hangul syllable characters. Old Hangul syllables,
	which must be spelled with sequences of conjoining Hangul 
	Jamos, are not PVALID for string classes.
	
</p>
<a name="J"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.10"></a><h3>9.10.&nbsp;
Unassigned (J)</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
J: General_Category(cp) is in {Cn} and
   Noncharacter_Code_Point(cp) = False
</pre></div>
<p>This category consists of code points in the Unicode character
          set that are not (yet) assigned. It should be noted that Unicode
          distinguishes between 'unassigned code points' and 'unassigned
          characters'. The unassigned code points are all but (Cn -
          Noncharacters), while the unassigned *characters* are all but (Cn +
          Cs).
</p>
<a name="PropertyCalculation"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
Calculation of the Derived Property</h3>

<p>Possible values of the property are:
</p>
<p>
        </p>
<ul class="text">
<li>PVALID
</li>
<li>RI_PVALID
</li>
<li>LRI_PVALID
</li>
<li>CONTEXTJ
</li>
<li>CONTEXTO
</li>
<li>DISALLOWED
</li>
<li>RI_DISALLOWED
</li>
<li>LRI_DISALLOWED
</li>
<li>UNASSIGNED
</li>
</ul><p>
      
</p>
<p>
     The algorithm to calculate the value of the derived property is as
    follows. If the names of a rule (such
  as Exception) is used, that implies the set of codepoints that the rule define,
  while the same name as a function
  call (such as Exception(cp)) imply the value cp has in the Exceptions table.
		 
</p>
<p>
	 If .cp. .in. Exceptions Then Exceptions(cp);<br />

       Else If .cp. .in. BackwardCompatible Then BackwardCompatible(cp);<br />

       Else If .cp. .in. Unassigned Then UNASSIGNED;<br />

       Else If .cp. .in. LDH Then PVALID;<br />

       Else If .cp. .in. JoinControl Then CONTEXTJ;<br />

       Else If .cp. .in. Unstable Then DISALLOWED;<br />

       Else If .cp. .in. IgnorableProperties Then DISALLOWED;<br />

       Else If .cp. .in. IgnorableBlocks Then LRI_PVALID;<br />

       Else If .cp. .in. OldHangulJamo Then DISALLOWED;<br />

       Else If .cp. .in. LetterDigits Then PVALID;<br />

       Else DISALLOWED;
		 
</p>
<a name="codepointexplain"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11"></a><h3>11.&nbsp;
Codepoints</h3>

<p>The Categories and Rules defined in <a class='info' href='#Categories'>Section&nbsp;9<span> (</span><span class='info'>Category definitions Used to Calculate Derived Property Value</span><span>)</span></a> and
      <a class='info' href='#PropertyCalculation'>Section&nbsp;10<span> (</span><span class='info'>Calculation of the Derived Property</span><span>)</span></a> apply to all Unicode
      code points. The table in <a class='info' href='#Codepoints'>Appendix&nbsp;B<span> (</span><span class='info'>Codepoints 0x0000 - 0x10FFFF</span><span>)</span></a> shows, for
      illustrative purposes, the consequences of the categories and
      classification rules, and the resulting property values.
</p>
<p>The list of code points that can be found in <a class='info' href='#Codepoints'>Appendix&nbsp;B<span> (</span><span class='info'>Codepoints 0x0000 - 0x10FFFF</span><span>)</span></a> is non-normative. <a class='info' href='#Categories'>Section&nbsp;9<span> (</span><span class='info'>Category definitions Used to Calculate Derived Property Value</span><span>)</span></a>
      and <a class='info' href='#PropertyCalculation'>Section&nbsp;10<span> (</span><span class='info'>Calculation of the Derived Property</span><span>)</span></a> are normative.
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12"></a><h3>12.&nbsp;
IANA Considerations</h3>

<a name="derivedregistry"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12.1"></a><h3>12.1.&nbsp;
IDNA derived property value registry</h3>

<p>
    IANA is to create a registry with the derived properties for the
        versions of Unicode that is released after (and including) version
        5.2. The derived property value is to be calculated in cooperation
        with a designated expert[RFC5226] according to
        the specifications in <a class='info' href='#Categories'>Section&nbsp;9<span> (</span><span class='info'>Category definitions Used to Calculate Derived Property Value</span><span>)</span></a> and <a class='info' href='#PropertyCalculation'>Section&nbsp;10<span> (</span><span class='info'>Calculation of the Derived Property</span><span>)</span></a> and not by copying the non-normative
        table found in <a class='info' href='#Codepoints'>Appendix&nbsp;B<span> (</span><span class='info'>Codepoints 0x0000 - 0x10FFFF</span><span>)</span></a>.
  		
</p>
<p>
        If during this process (creation of the table of derived property
        values) followed by a designated expert review, either non-backward
        compatible changes to the table of derived properties are discovered,
        or otherwise problems during the creation of the table arises, that is
        to be flagged to the IESG. Changes to the rules (as specified in <a class='info' href='#Categories'>Section&nbsp;9<span> (</span><span class='info'>Category definitions Used to Calculate Derived Property Value</span><span>)</span></a> and <a class='info' href='#PropertyCalculation'>Section&nbsp;10<span> (</span><span class='info'>Calculation of the Derived Property</span><span>)</span></a>),
        including <a class='info' href='#G'>BackwardCompatible<span> (</span><span class='info'>BackwardCompatible (G)</span><span>)</span></a> (a set that is at
        release of this document is empty), require IETF Review, as described
        in [RFC 5226].
	  
</p>
<a name="IANAContext"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12.2"></a><h3>12.2.&nbsp;
IDNA Context Registry</h3>

<p>For characters that are defined in
	<a class='info' href='#derivedregistry'>IDNA derived property value registry<span> (</span><span class='info'>IDNA derived property value registry</span><span>)</span></a>
	as CONTEXTO or CONTEXTJ and therefore requiring a contextual rule
	IANA will create and  
	maintain a list of approved contextual rules.  Additions
	or changes to these rules require IETF Review, as
	described in [RFC5226].
</p>
<p>A table from which that registry can be initialized, and
	some further discussion appears in <a class='info' href='#RulesInit'>Appendix&nbsp;A<span> (</span><span class='info'>Contextual Rules Registry</span><span>)</span></a>.
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12.2.1"></a><h3>12.2.1.&nbsp;
Template for context registry</h3>

<p>
	The following information is to be given when a new rule is created.
	</p>
<blockquote class="text">
<p>Name: Unique name of the rule
</p>
<p>Code point: Rule should be applied when this codepoint exist in label
</p>
<p>Overview: Description in plain english on what the rule verifies
</p>
<p>Lookup: Should rule be applied at time of lookup?
</p>
<p>Rule Set: The set of rules, as described in
</p>
</blockquote><p>
	
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.13"></a><h3>13.&nbsp;
Security Considerations</h3>

<p>TBD
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.14"></a><h3>14.&nbsp;
Discussion home for this draft</h3>

<p>This document is discussed in the precis@ietf.org mailing list (This section to be removed when published as RFC).
</p>
<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.15"></a><h3>15.&nbsp;
Acknowledgements</h3>

<p>The author of this document would like to acknowledge the comments and contributions of the following people: ...
</p>
<p>Since this document copies a lot of text and the algorithms from IDNAbis tables, therefore all authors and contributors to the idnabis work are deeply  acknowledged.
</p>
<a name="RulesInit"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
Contextual Rules Registry</h3>

<p>
   As discussed in <a class='info' href='#IANAContext'>Section&nbsp;12.2<span> (</span><span class='info'>IDNA Context Registry</span><span>)</span></a>, a
       registry of rules that define the contexts in which particular
       PROTOCOL-VALID characters, characters associated with a requirement for
       Contextual Information, are permitted. These rules are expressed as
       tests on the label in which the characters appear (all, or any part of,
       the label may be tested).
     
</p>
<p>
	The grammatical rules are expressed in pseudo code. The conventions used
      for that pseudo code are explained here.
 
</p>
<p>
   Each rule is constructed as a Boolean expression that evaluates to
   either True or False. A simple "True;" or "False;" rule sets the
   default result value for the rule set. Subsequent conditional rules
   that evaluate to True or False may re-set the result value.
 
</p>
<p>
   A special value "Undefined" is used to deal with any error conditions,
    such as an attempt to test a character before the start of a label or
      after the end of a label. If any term of a rule evaluates to Undefined,
      further evaluation of the rule immediately terminates, as the result
      value of the rule will itself be Undefined.

</p>
<p>
 </p>
<blockquote class="text"><dl>
<dt></dt>
<dd>
     cp represents the codepoint to be tested.
   
</dd>
<dt></dt>
<dd> FirstChar is a special term which denotes the first codepoint in a string.  
</dd>
<dt></dt>
<dd>
      LastChar is a special term which denotes the last codepoint in a string.  
</dd>
<dt></dt>
<dd> .eq. represents the equality relation. 
    
<blockquote class="text"><dl>
<dt></dt>
<dd> A .eq. B evaluates to True if A equals B. 
</dd>
</dl></blockquote>
</dd>
<dt></dt>
<dd> .is. represents checking position in a string. 
       
<blockquote class="text"><dl>
<dt></dt>
<dd>
     A .is. B evaluates to True if A and B have same position in the same string.  
</dd>
</dl></blockquote>
</dd>
<dt></dt>
<dd> .ne. represents the non-equality relation. 
       
<blockquote class="text"><dl>
<dt></dt>
<dd> A .ne. B evaluates to True if A is not equal to B.
</dd>
</dl></blockquote>
</dd>
<dt></dt>
<dd> .in. represents the set inclusion relation. 
       
<blockquote class="text"><dl>
<dt></dt>
<dd> A .in. B evaluates to True if A is a member of the set B.  
</dd>
</dl></blockquote>
       
</dd>
</dl></blockquote><p>

</p>
<p><br />

		   A functional notation, Function_Name(cp), is used to express either
       string positions within a string, Boolean character property tests of a
       codepoint, or a regular expression match. When such function names
       refer to Boolean character property tests, the function names use the
       exact Unicode character property name for the property in question, and
       "cp" is evaluated as the Unicode value of the codepoint to be tested,
       rather than as its position in the string. When such function names
       refer to string positions within a string, "cp" is evaluated as its
       position in the string.
		 
</p>
<p>
   RegExpMatch(X) takes as its parameter X a schematic regular expression
       consisting of a mix of Unicode character property values and literal
       Unicode codepoints.
		 
</p>
<p>
		   Script(cp) returns the value of the Unicode Script property, as defined
       in Scripts.txt in the Unicode Character Database.
		 
</p>
<p>
		   Canonical_Combining_Class(cp) returns the value of the Unicode
       Canonical_Combining_Class property, as defined in UnicodeData.txt in
       the Unicode Character Database.
	   
</p>
<p>
		   Before(cp) returns the codepoint of the character immediately preceding
       cp in logical order in the string representing the string.
       Before(FirstChar) evaluates to Undefined.
		 
</p>
<p>
		   After(cp) returns the codepoint of the character immediately following
       cp in logical order in the string representing the string.
       After(LastChar) evaluates to Undefined.
		 
</p>
<p>
			 Note that "Before" and "After" do not refer to the visual display order
       of the character in a string, which may be reversed or otherwise
       modified by the bidirectional algorithm for strings including characters
       from scripts written right-to-left. Instead,
			 'Before' and 'After' refer to the network order of the character in
			 the string.
		 
</p>
<p>
			 The clauses "Then True" and "Then False" imply exit from the
       pseudo-code routine with the corresponding result.
		 
</p>
<p>
		   Repeated evaluation for all characters in a string makes use of the
       special construct:
		 </p>
<blockquote class="text"><dl>
<dt></dt>
<dd>
			   For All Characters:
			 
<blockquote class="text"><dl>
<dt></dt>
<dd>
				   Expression;
				 
</dd>
</dl></blockquote>
			 
</dd>
<dt></dt>
<dd>
			   End For;
       
</dd>
</dl></blockquote><p>
                 
</p>
<p>
		   This construct requires repeated evaluation of "Expression" for each
       codepoint in the string, starting from FirstChar and proceeding to
       LastChar.
		 
</p>
<p>
       The different fields in the rules are to be interpreted as follows:
	</p>
<blockquote class="text"><dl>
<dt>Code point: </dt>
<dd>
	The codepoint, or codepoints, that this rule is to be applied to.
          Normally, this implies that if any of the codepoints in a string is
          as defined, then the rules should be applied. If evaluated to True,
          the codepoint is ok as used; if evaluated to False, it is not o.k.
	
</dd>
<dt>Overview: </dt>
<dd>
	A description of the goal with the rule, in plain English.
	
</dd>
<dt>Lookup: </dt>
<dd>
		True if application of this rule is recommended at lookup
		time; False otherwise.
	
</dd>
<dt>Rule Set: </dt>
<dd>
	The rule set itself, as described above.
	
</dd>
</dl></blockquote><p> 
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.1"></a><h3>Appendix A.1.&nbsp;
ZERO WIDTH NON-JOINER</h3>

<p>
		   </p>
<blockquote class="text"><dl>
<dt>Code point: </dt>
<dd>U+200C
</dd>
<dt>Overview: </dt>
<dd>
		       This may occur in a formally cursive script (such as Arabic) in a
           context where it breaks a cursive connection as required for
           orthographic rules, as in the Persian language, for example. It
           also may occur in Indic scripts in a consonant conjunct context
           (immediately following a virama), to control required display of
           such conjuncts.
         
</dd>
<dt>Lookup: </dt>
<dd>True
</dd>
<dt>Rule Set: </dt>
<dd>
</dd>
<dt></dt>
<dd>False;
</dd>
<dt></dt>
<dd>If Canonical_Combining_Class(Before(cp)) .eq. Virama Then True;
</dd>
<dt></dt>
<dd>If RegExpMatch((Joining_Type:{L,D})(Joining_Type:T)*\u200C
           
<blockquote class="text"><dl>
<dt></dt>
<dd>(Joining_Type:T)*(Joining_Type:{R,D})) Then True;
</dd>
</dl></blockquote>
 	 
</dd>
</dl></blockquote>

<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.2"></a><h3>Appendix A.2.&nbsp;
ZERO WIDTH JOINER</h3>

<p></p>
<blockquote class="text"><dl>
<dt>Code point: </dt>
<dd>U+200D
</dd>
<dt>Overview: </dt>
<dd>
			     This may occur in Indic scripts in a consonant conjunct context
           (immediately following a virama), to control required display of
           such conjuncts.
			 
</dd>
<dt>Lookup: </dt>
<dd>True
</dd>
<dt>Rule Set: </dt>
<dd>
</dd>
<dt></dt>
<dd>False;
</dd>
<dt></dt>
<dd>If Canonical_Combining_Class(Before(cp)) .eq. Virama Then True;
</dd>
</dl></blockquote>

<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.3"></a><h3>Appendix A.3.&nbsp;
MIDDLE DOT</h3>

<p></p>
<blockquote class="text"><dl>
<dt>Code point: </dt>
<dd>U+00B7
</dd>
<dt>Overview: </dt>
<dd>Between 'l' (U+006C) characters
			  only, used to permit the Catalan character ela geminada
			  to be expressed
			 
</dd>
<dt>Lookup: </dt>
<dd>False
</dd>
<dt>Rule Set: </dt>
<dd>
</dd>
<dt></dt>
<dd>False;
</dd>
<dt></dt>
<dd>If Before(cp) .eq. U+006C And
         
<blockquote class="text"><dl>
<dt></dt>
<dd>After(cp) .eq. U+006C Then True;
</dd>
</dl></blockquote>
</dd>
</dl></blockquote>

<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.4"></a><h3>Appendix A.4.&nbsp;
GREEK LOWER NUMERAL SIGN (KERAIA)</h3>

<p></p>
<blockquote class="text"><dl>
<dt>Code point: </dt>
<dd>U+0375
</dd>
<dt>Overview: </dt>
<dd>The script of the following character MUST be Greek.
</dd>
<dt>Lookup: </dt>
<dd>False
</dd>
<dt>Rule Set: </dt>
<dd>
</dd>
<dt></dt>
<dd>False;
</dd>
<dt></dt>
<dd>If Script(After(cp)) .eq. Greek Then True;
</dd>
</dl></blockquote>

<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.5"></a><h3>Appendix A.5.&nbsp;
HEBREW PUNCTUATION GERESH</h3>

<p></p>
<blockquote class="text"><dl>
<dt>Code point: </dt>
<dd>U+05F3
</dd>
<dt>Overview: </dt>
<dd>The script of the preceding
			   character MUST be Hebrew.
</dd>
<dt>Lookup: </dt>
<dd>False
</dd>
<dt>Rule Set: </dt>
<dd>
</dd>
<dt></dt>
<dd>False;
</dd>
<dt></dt>
<dd>If Script(Before(cp)) .eq. Hebrew Then True;
</dd>
</dl></blockquote>

<a name="anchor19"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.6"></a><h3>Appendix A.6.&nbsp;
HEBREW PUNCTUATION GERSHAYIM</h3>

<p></p>
<blockquote class="text"><dl>
<dt>Code point: </dt>
<dd>U+05F4 
</dd>
<dt>Overview: </dt>
<dd>
				The script of the preceding character MUST be Hebrew.
			
</dd>
<dt>Lookup: </dt>
<dd>False
</dd>
<dt>Rule Set: </dt>
<dd>
</dd>
<dt></dt>
<dd>False;
</dd>
<dt></dt>
<dd>If Script(Before(cp)) .eq. Hebrew Then True;
</dd>
</dl></blockquote>

<a name="anchor20"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.7"></a><h3>Appendix A.7.&nbsp;
KATAKANA MIDDLE DOT</h3>

<p></p>
<blockquote class="text"><dl>
<dt>Code point: </dt>
<dd>U+30FB 
</dd>
<dt>Overview: </dt>
<dd>
				Note that the Script of Katakana Middle Dot is not any
				of "Hiragana", "Katakana" or "Han". The effect of
				this rule is to require at least one character in the label
				to be in one of those scripts.
			
</dd>
<dt>Lookup: </dt>
<dd>False
</dd>
<dt>Rule Set: </dt>
<dd>
</dd>
<dt></dt>
<dd>False;
</dd>
<dt></dt>
<dd>For All Characters:
				
<blockquote class="text"><dl>
<dt></dt>
<dd>If Script(cp) .in. {Hiragana, Katakana, Han} Then True;
</dd>
</dl></blockquote>
</dd>
<dt></dt>
<dd>End For;
</dd>
</dl></blockquote>

<a name="anchor21"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.8"></a><h3>Appendix A.8.&nbsp;
ARABIC-INDIC DIGITS</h3>

<p>	</p>
<blockquote class="text"><dl>
<dt>Code point: </dt>
<dd>0660..0669
</dd>
<dt>Overview: </dt>
<dd>
				Can not be mixed with Extended Arabic-Indic Digits.
			
</dd>
<dt>Lookup: </dt>
<dd>False
</dd>
<dt>Rule Set: </dt>
<dd>
</dd>
<dt></dt>
<dd>True;
</dd>
<dt></dt>
<dd>For All Characters:
				
<blockquote class="text"><dl>
<dt></dt>
<dd>If cp .in. 06F0..06F9 Then False;
</dd>
</dl></blockquote>
</dd>
<dt></dt>
<dd>End For;
</dd>
</dl></blockquote><p>
    	
</p>
<a name="anchor22"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.9"></a><h3>Appendix A.9.&nbsp;
EXTENDED ARABIC-INDIC DIGITS</h3>

<p>	</p>
<blockquote class="text"><dl>
<dt>Code point: </dt>
<dd>06F0..06F9
</dd>
<dt>Overview: </dt>
<dd>
				Can not be mixed with Arabic-Indic Digits.
			
</dd>
<dt>Lookup: </dt>
<dd>False
</dd>
<dt>Rule Set: </dt>
<dd>
</dd>
<dt></dt>
<dd>True;
</dd>
<dt></dt>
<dd>For All Characters:
				
<blockquote class="text"><dl>
<dt></dt>
<dd>If cp .in. 0660..0669 Then False;
</dd>
</dl></blockquote>
</dd>
<dt></dt>
<dd>End For;
</dd>
</dl></blockquote>

<a name="Codepoints"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B"></a><h3>Appendix B.&nbsp;
Codepoints 0x0000 - 0x10FFFF</h3>

<p>If one applies <a class='info' href='#PropertyCalculation'>the rules<span> (</span><span class='info'>Calculation of the Derived Property</span><span>)</span></a> to
      the code points 0x0000 to 0x10FFFF to Unicode 5.2, the result is as
      follows.
</p>
<p>This list is non-normative, and only included for illustrative
      purposes. Specifically, what is displayed in the third column
		  is not the formal name of the codepoint (as defined in section 4.8
		  of [Unicode52]). The differences
		  exists for example for the codepoints that have the codepoint value
		  as part of the name (example: CJK UNIFIED IDEOGRAPH-4E00) and the
		  naming of Hangul syllables. For many codepoints, what you see is the official name.
		  
</p>
<a name="anchor23"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.B.1"></a><h3>Appendix B.1.&nbsp;
Codepoints in Unicode Character Database (UCD) format</h3>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
0000..10FFFF; TBD!
</pre></div>
<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>16.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC3454">[RFC3454]</a></td>
<td class="author-text">Hoffman, P. and M. Blanchet, &ldquo;<a href="http://tools.ietf.org/html/rfc3454">Preparation of Internationalized Strings ("stringprep")</a>,&rdquo; RFC&nbsp;3454, December&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3454.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3490">[RFC3490]</a></td>
<td class="author-text">Faltstrom, P., Hoffman, P., and A. Costello, &ldquo;<a href="http://tools.ietf.org/html/rfc3490">Internationalizing Domain Names in Applications (IDNA)</a>,&rdquo; RFC&nbsp;3490, March&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3490.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3491">[RFC3491]</a></td>
<td class="author-text">Hoffman, P. and M. Blanchet, &ldquo;<a href="http://tools.ietf.org/html/rfc3491">Nameprep: A Stringprep Profile for Internationalized Domain Names (IDN)</a>,&rdquo; RFC&nbsp;3491, March&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3491.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3492">[RFC3492]</a></td>
<td class="author-text">Costello, A., &ldquo;<a href="http://tools.ietf.org/html/rfc3492">Punycode: A Bootstring encoding of Unicode for Internationalized Domain Names in Applications (IDNA)</a>,&rdquo; RFC&nbsp;3492, March&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3492.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3722">[RFC3722]</a></td>
<td class="author-text">Bakke, M., &ldquo;<a href="http://tools.ietf.org/html/rfc3722">String Profile for Internet Small Computer Systems Interface (iSCSI) Names</a>,&rdquo; RFC&nbsp;3722, April&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3722.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3920">[RFC3920]</a></td>
<td class="author-text"><a href="mailto:stpeter@jabber.org">Saint-Andre, P., Ed.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc3920">Extensible Messaging and Presence Protocol (XMPP): Core</a>,&rdquo; RFC&nbsp;3920, October&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3920.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc3920.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc3920.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4011">[RFC4011]</a></td>
<td class="author-text">Waldbusser, S., Saperia, J., and T. Hongal, &ldquo;<a href="http://tools.ietf.org/html/rfc4011">Policy Based Management MIB</a>,&rdquo; RFC&nbsp;4011, March&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4011.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4013">[RFC4013]</a></td>
<td class="author-text">Zeilenga, K., &ldquo;<a href="http://tools.ietf.org/html/rfc4013">SASLprep: Stringprep Profile for User Names and Passwords</a>,&rdquo; RFC&nbsp;4013, February&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4013.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4505">[RFC4505]</a></td>
<td class="author-text">Zeilenga, K., &ldquo;<a href="http://tools.ietf.org/html/rfc4505">Anonymous Simple Authentication and Security Layer (SASL) Mechanism</a>,&rdquo; RFC&nbsp;4505, June&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4505.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4518">[RFC4518]</a></td>
<td class="author-text">Zeilenga, K., &ldquo;<a href="http://tools.ietf.org/html/rfc4518">Lightweight Directory Access Protocol (LDAP): Internationalized String Preparation</a>,&rdquo; RFC&nbsp;4518, June&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4518.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4690">[RFC4690]</a></td>
<td class="author-text">Klensin, J., Faltstrom, P., Karp, C., and IAB, &ldquo;<a href="http://tools.ietf.org/html/rfc4690">Review and Recommendations for Internationalized Domain Names (IDNs)</a>,&rdquo; RFC&nbsp;4690, September&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4690.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Author's Address</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Marc Blanchet</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Viagenie</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">2600 boul. Laurier, suite 625</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Quebec, QC  G1V 4W1</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Canada</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:Marc.Blanchet@viagenie.ca">Marc.Blanchet@viagenie.ca</a></td></tr>
<tr><td class="author" align="right">URI:&nbsp;</td>
<td class="author-text"><a href="http://www.viagenie.ca">http://www.viagenie.ca</a></td></tr>
</table>
</body></html>
