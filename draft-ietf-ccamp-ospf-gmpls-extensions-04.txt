




CCAMP Working Group                       K. Kompella (Juniper Networks)
Internet Draft                            Y. Rekhter  (Juniper Networks)
Expiration Date: August 2002              A. Banerjee (Calient Networks)
                                          J. Drake    (Calient Networks)
                                          G. Bernstein (Ciena)
                                          D. Fedyk    (Nortel Networks)
                                          E. Mannie   (GTS Network)
                                          D. Saha     (Tellium)
                                          V. Sharma   (Metanoia, Inc.)

             OSPF Extensions in Support of Generalized MPLS

             draft-ietf-ccamp-ospf-gmpls-extensions-04.txt


1. Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as ``work in progress.''

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.
















draft-ietf-ccamp-ospf-gmpls-extensions-04.txt                   [Page 1]





Internet Draftdraft-ietf-ccamp-ospf-gmpls-extensions-04.txtFebruary 2002


2. Abstract

   This document specifies encoding of extensions to the OSPF routing
   protocol in support of Generalized Multi-Protocol Label Switching
   (GMPLS).  The description of the extensions is specified in [GMPLS-
   ROUTING].


3. Summary for Sub-IP Area


3.1. Summary

   This document specifies encoding of extensions to the OSPF routing
   protocol in support of Generalized Multi-Protocol Label Switching
   (GMPLS).  The description of the extensions is specified in [GMPLS-
   ROUTING].


3.2. Where does it fit in the Picture of the Sub-IP Work

   This work fits squarely in either the CCAMP or OSPF box.


3.3. Why is it Targeted at this WG

   This draft is targeted at the CCAMP or the OSPF WG, because this
   draft specifies the extensions to the OSPF routing protocols in
   support of GMPLS, because GMPLS is within the scope of the CCAMP WG,
   and because OSPF is within the scope of the OSPF WG.


3.4. Justification

   The WG should consider this document as it specifies the extensions
   to the OSPF routing protocols in support of GMPLS.















draft-ietf-ccamp-ospf-gmpls-extensions-04.txt                   [Page 2]





Internet Draftdraft-ietf-ccamp-ospf-gmpls-extensions-04.txtFebruary 2002


4. Introduction

   This document specifies extensions to the OSPF routing protocol in
   support of carrying link state information for Generalized Multi-
   Protocol Label Switching (GMPLS). The set of required enhancements to
   OSPF are outlined in [GMPLS-ROUTING].


5. OSPF Routing Enhancements

   In this section we define the enhancements to the TE properties of
   GMPLS TE links that can be announced in OSPF TE LSAs.  The Traffic
   Engineering (TE) LSA, which is an opaque LSA with area flooding scope
   [3], has only one top-level Type/Length/Value (TLV) triplet and has
   one or more nested TLVs for extensibility.  The top-level TLV can
   take one of two values (1) Router Address or (2) Link.  In this
   document, we enhance the sub-TLVs for the Link TLV in support of
   GMPLS.  Specifically, we add the following sub-TLVs:

      1. Link Local Identifier,
      2. Link Remote Identifier,
      3. Link Protection Type,
      4. Shared Risk Link Group, and
      5. Interface Switching Capability Descriptor.

   This brings the list of sub-TLVs of the TE Link TLV to:

      Sub-TLV Type      Length    Name
                 1           1    Link type
                 2           4    Link ID
                 3    variable    Local interface IP address
                 4    variable    Remote interface IP address
                 5           4    Traffic engineering metric
                 6           4    Maximum bandwidth
                 7           4    Maximum reservable bandwidth
                 8          32    Unreserved bandwidth
                 9           4    Resource class/color
                11           4    Link Local Identifier
                12           4    Link Remote Identifier
                14           4    Link Protection Type
                15    variable    Interface Switching Capability Descriptor
                16    variable    Shared Risk Link Group
       32768-32772           -    Reserved for Cisco-specific extensions








draft-ietf-ccamp-ospf-gmpls-extensions-04.txt                   [Page 3]





Internet Draftdraft-ietf-ccamp-ospf-gmpls-extensions-04.txtFebruary 2002


5.1. Link Local Identifier

   A  Link Local Identifier is a sub-TLV of the Link TLV with type 11,
   and length 4.


5.2. Link Remote Identifier

   A Link Remote Identifier is a sub-TLV of the Link TLV with type 12,
   and length 4.


5.3. Link Protection Type

   The Link Protection Type is a sub-TLV of the Link TLV, with type 14,
   and length of four octets, the first of which is a bit vector
   describing the protection capabilities of the link. They are:

      0x01  Extra Traffic

      0x02  Unprotected

      0x04  Shared

      0x08  Dedicated 1:1

      0x10  Dedicated 1+1

      0x20  Enhanced

      0x40  Reserved

      0x80  Reserved


5.4. Shared Risk Link Group (SRLG)

   The SRLG is a sub-TLV of the Link TLV with type 16. The length is the
   length of the list in octets. The value is an unordered list of 32
   bit numbers that are the SRLGs that the link belongs to. The format
   of the value field is as shown below:










draft-ietf-ccamp-ospf-gmpls-extensions-04.txt                   [Page 4]





Internet Draftdraft-ietf-ccamp-ospf-gmpls-extensions-04.txtFebruary 2002



       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                  Shared Risk Link Group Value                 |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                        ............                           |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                  Shared Risk Link Group Value                 |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

5.5. Interface Switching Capability Descriptor

   The Interface Switching Capability Descriptor is a sub-TLV of the
   Link TLV with type 15. The length is the length of value field in
   octets. The format of the value field is as shown below:


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | Switching Cap |   Encoding    |           Reserved            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                  Max LSP Bandwidth at priority 0              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                  Max LSP Bandwidth at priority 1              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                  Max LSP Bandwidth at priority 2              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                  Max LSP Bandwidth at priority 3              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                  Max LSP Bandwidth at priority 4              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                  Max LSP Bandwidth at priority 5              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                  Max LSP Bandwidth at priority 6              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                  Max LSP Bandwidth at priority 7              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |        Switching Capability-specific information              |
      |                  (variable)                                   |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


   The Switching Capability (Switching Cap) field contains one of the
   following values:





draft-ietf-ccamp-ospf-gmpls-extensions-04.txt                   [Page 5]





Internet Draftdraft-ietf-ccamp-ospf-gmpls-extensions-04.txtFebruary 2002


           1     Packet-Switch Capable-1 (PSC-1)
           2     Packet-Switch Capable-2 (PSC-2)
           3     Packet-Switch Capable-3 (PSC-3)
           4     Packet-Switch Capable-4 (PSC-4)
           51    Layer-2 Switch Capable  (L2SC)
           100   Time-Division-Multiplex Capable (TDM)
           150   Lambda-Switch Capable   (LSC)
           200   Fiber-Switch Capable    (FSC)


   The Encoding field contains one of the values specified in Section
   3.1.1 of [GMPLS-SIG].

   Maximum LSP Bandwidth is encoded as a list of eight 4 octet fields in
   the IEEE floating point format, with priority 0 first and priority 7
   last. The units are bytes (not bits!) per second.

   The content of the Switching Capability specific information field
   depends on the value of the Switching Capability field.

   When the Switching Capability field is PSC-1, PSC-2, PSC-3, or PSC-4,
   the specific information includes Interface MTU, Minimum LSP
   Bandwidth, and padding. The Interface MTU is encoded as a 2 octets
   integer. The Minimum LSP Bandwidth is is encoded in a 4 octets field
   in the IEEE floating point format. The units are bytes (not bits!)
   per second. The padding is 2 octets, and is used to make the
   Interface Switching Capability Descriptor sub-TLV 32-bits aligned.

   When the Switching Capability field is L2SC, there is no specific
   information.

   When the Switching Capability field is TDM, the specific information
   includes Minimum LSP Bandwidth, an indication whether the interface
   supports Standard or Arbitrary SONET/SDH, and padding. The Minimum
   LSP Bandwidth is encoded in a 4 octets field in the IEEE floating
   point format. The units are bytes (not bits!) per second. The
   indication whether the interface supports Standard or Arbitrary
   SONET/SDH is encoded as 1 octet. The value of this octet is 0 if the
   interface supports Standard SONET/SDH, and 1 if the interface
   supports Arbitrary SONET/SDH.  The padding is 3 octets, and is used
   to make the Interface Switching Capability Descriptor sub-TLV 32-bits
   aligned.

   When the Switching Capability field is LSC, there is no specific
   information.

   The Interface Switching Capability Descriptor sub-TLV may occur more
   than once within the Link TLV  (this is needed to handle interfaces



draft-ietf-ccamp-ospf-gmpls-extensions-04.txt                   [Page 6]





Internet Draftdraft-ietf-ccamp-ospf-gmpls-extensions-04.txtFebruary 2002


   that support multiple switching capabilities).


6. Implications on Graceful Restart

   The restarting node should follow the OSPF restart procedures [OSPF-
   RESTART], and the RSVP-TE restart procedures [GMPLS-RSVP].

   Once the restarting node re-establishes at least one OSPF adjacency,
   the node should originate its TE LSAs. These LSAs should be
   originated with 0 unreserved bandwidth  until the node is able to
   determine the amount of unreserved resources taking into account the
   resources reserved by the already established LSPs that have been
   preserved across the restart. Once the restarting node determines the
   amount of unreserved resources, taking into account the resources
   reserved by the already established LSPs that have been preserved
   across the restart, the node should advertise these resources in its
   TE LSAs.

   Neighbors of the restarting node should continue advertise the actual
   unreserved bandwidth on the TE links from the neighbors to that node.

   Regular graceful restart should not be aborted if a TE LSA or TE
   topology changes. TE graceful restart need not be aborted if a TE LSA
   or TE topology changes.


7. Security Considerations

   The sub-TLVs proposed in this document does not raise any new
   security concerns.


8. Acknowledgements

   The authors would like to thank Suresh Katukam, Jonathan Lang and
   Quaizar Vohra for their comments on the draft.














draft-ietf-ccamp-ospf-gmpls-extensions-04.txt                   [Page 7]





Internet Draftdraft-ietf-ccamp-ospf-gmpls-extensions-04.txtFebruary 2002


9. References

   [OSPF-TE] Katz, D., Yeung, D., "Traffic Engineering Extensions to
   OSPF",
       draft-katz-yeung-ospf-traffic-04.txt (work in progress)

   [GMPLS-SIG] "Generalized MPLS - Signaling Functional
       Description", draft-ietf-mpls-generalized-signaling-04.txt (work
       in progress)

   [GMPLS-RSVP] "Generalized MPLS Signaling - RSVP-TE Extensions",
       draft-ietf-mpls-generalized-rsvp-te-06.txt (work in progress)

   [GMPLS-ROUTING] "Routing Extensions in Support of Generalized MPLS",
       draft-ietf-ccamp-gmpls-routing-01.txt (work in progress)

   [OSPF-RESTART] "Hitless OSPF Restart", draft-ietf-ospf-hitless-
   restart-02.txt
       (work in progress)



10. Authors' Information


Kireeti Kompella
Juniper Networks, Inc.
1194 N. Mathilda Ave
Sunnyvale, CA 94089
Email: kireeti@juniper.net



Yakov Rekhter
Juniper Networks, Inc.
1194 N. Mathilda Ave
Sunnyvale, CA 94089
Email: yakov@juniper.net













draft-ietf-ccamp-ospf-gmpls-extensions-04.txt                   [Page 8]





Internet Draftdraft-ietf-ccamp-ospf-gmpls-extensions-04.txtFebruary 2002



Ayan Banerjee
Calient Networks
5853 Rue Ferrari
San Jose, CA 95138
Phone: +1.408.972.3645
Email: abanerjee@calient.net


John Drake
Calient Networks
5853 Rue Ferrari
San Jose, CA 95138
Phone: (408) 972-3720
Email: jdrake@calient.net


Greg Bernstein
Ciena Corporation
10480 Ridgeview Court
Cupertino, CA 94014
Phone: (408) 366-4713
Email: greg@ciena.com


Don Fedyk
Nortel Networks Corp.
600 Technology Park Drive
Billerica, MA 01821
Phone: +1-978-288-4506
Email: dwfedyk@nortelnetworks.com


Eric Mannie
GTS Network Services
RDI Department, Core Network Technology Group
Terhulpsesteenweg, 6A
1560 Hoeilaart, Belgium
Phone: +32-2-658.56.52
E-mail: eric.mannie@gtsgroup.com











draft-ietf-ccamp-ospf-gmpls-extensions-04.txt                   [Page 9]





Internet Draftdraft-ietf-ccamp-ospf-gmpls-extensions-04.txtFebruary 2002



Debanjan Saha
Tellium Optical Systems
2 Crescent Place
P.O. Box 901
Ocean Port, NJ 07757
Phone: (732) 923-4264
Email: dsaha@tellium.com


Vishal Sharma
Metanoia, Inc.
335 Elan Village Lane, Unit 203
San Jose, CA 95134-2539
Phone: +1 408-943-1794
Email: v.sharma@ieee.org



































draft-ietf-ccamp-ospf-gmpls-extensions-04.txt                  [Page 10]


