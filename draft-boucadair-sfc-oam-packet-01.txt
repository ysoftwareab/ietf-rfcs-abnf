



sfc                                                         M. Boucadair
Internet-Draft                                                    Orange
Updates: 8300 (if approved)                             16 February 2022
Intended status: Standards Track                                        
Expires: 20 August 2022


Clarifying Ambiguity related to Network Service Header (NSH) OAM Packet
                   draft-boucadair-sfc-oam-packet-01

Abstract

   This document clarifies an ambiguity in the Network Service Header
   (NSH) specification related to the handling of O-bit.  In particular,
   this document clarifies the meaning of "OAM packet".

   This document updates RFC8300.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on 20 August 2022.

Copyright Notice

   Copyright (c) 2022 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents (https://trustee.ietf.org/
   license-info) in effect on the date of publication of this document.
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.  Code Components
   extracted from this document must include Revised BSD License text as
   described in Section 4.e of the Trust Legal Provisions and are
   provided without warranty as described in the Revised BSD License.



Boucadair                Expires 20 August 2022                 [Page 1]

Internet-Draft       DOTS Robust Block Transmission        February 2022


Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Terminology . . . . . . . . . . . . . . . . . . . . . . . . .   2
   3.  An Update to RFC8300  . . . . . . . . . . . . . . . . . . . .   2
   4.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   4
   5.  Security Considerations . . . . . . . . . . . . . . . . . . .   4
   6.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   4
   7.  References  . . . . . . . . . . . . . . . . . . . . . . . . .   4
     7.1.  Normative References  . . . . . . . . . . . . . . . . . .   4
     7.2.  Informative References  . . . . . . . . . . . . . . . . .   5
   Author's Address  . . . . . . . . . . . . . . . . . . . . . . . .   5

1.  Introduction

   This document clarifies an ambiguity related to the definition of OAM
   packet discussed in [RFC8300].

   The processing of the O-bit must follow the updated behavior
   specified in Section 3.

2.  Terminology

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in BCP
   14 [RFC2119][RFC8174] when, and only when, they appear in all
   capitals, as shown here.

   This document makes use of the terms defined in [RFC7665] and
   [RFC8300].

   "SFC data plane element" refers to NSH-aware SF, SFF, SFC Proxy, or
   Classifier as defined in the SFC data plane architecture [RFC7665]
   and further refined in [RFC8300].

   "OAM control element" is an NSH-aware elements that is capable of
   generating NSH OAM packets.  An SFC data plane element may behave as
   an OAM control element.

3.  An Update to RFC8300

   This document updates RFC8300 as follows:








Boucadair                Expires 20 August 2022                 [Page 2]

Internet-Draft       DOTS Robust Block Transmission        February 2022


OLD:

   O bit:  Setting this bit indicates an OAM packet (see [RFC6291]).
      The actual format and processing of SFC OAM packets is outside the
      scope of this specification (for example, see [SFC-OAM-FRAMEWORK]
      for one approach).

      The O bit MUST be set for OAM packets and MUST NOT be set for
      non-OAM packets.  The O bit MUST NOT be modified along the SFP.

      SF/SFF/SFC Proxy/Classifier implementations that do not support
      SFC OAM procedures SHOULD discard packets with O bit set, but MAY
      support a configurable parameter to enable forwarding received SFC
      OAM packets unmodified to the next element in the chain.
      Forwarding OAM packets unmodified by SFC elements that do not
      support SFC OAM procedures may be acceptable for a subset of OAM
      functions, but it can result in unexpected outcomes for others;
      thus, it is recommended to analyze the impact of forwarding an OAM
      packet for all OAM functions prior to enabling this behavior.  The
      configurable parameter MUST be disabled by default.

NEW:

   O bit:  Setting this bit indicates an SFC OAM packet.  Such a packet
      is any NSH-encapasulated packet that exclusively includes an OAM
      command and/or OAM data.  The OAM command (or data) can be
      included in the Fixed-Length Context Header, optional Context
      Headers, and/or the inner packet.

      When OAM command (or data) is included in the inner packet, the
      Next Protocol field is set to reflect the structure of that inner
      packet.

      NSH-encapsulated packets that include user data are not considered
      as SFC OAM packets even OAM data (e.g., record route) is also
      supplied in the packet.

      An SFC OAM packet MAY include optional Context Headers (e.g.,
      subscriber identifier [RFC8979] or flow identifier
      [I-D.ietf-sfc-nsh-tlv]) that are used to influence the processing
      of the packet by SFC data plane elements.

      An SFC OAM packet may include OAM data in both Context Headers and
      the inner packet.  The order of processing the OAM data is
      implementation specific.  However, an implementation may support a
      configuration parameter to drive the processing order for specific
      protocols and Context Headers.




Boucadair                Expires 20 August 2022                 [Page 3]

Internet-Draft       DOTS Robust Block Transmission        February 2022


      The actual format and processing of SFC OAM packets is outside the
      scope of this specification.

      The O bit MUST be set for SFC OAM packets and MUST NOT be set for
      non-OAM packets.  The O bit MUST NOT be modified along the SFP.

      SF/SFF/SFC Proxy/Classifier implementations that do not support
      SFC OAM procedures SHOULD discard packets with O bit set, but MAY
      support a configurable parameter to enable forwarding received SFC
      OAM packets unmodified to the next element in the chain.
      Forwarding SFC OAM packets unmodified by SFC elements that do not
      support SFC OAM procedures may be acceptable for a subset of OAM
      functions, but it can result in unexpected outcomes for others;
      thus, it is recommended to analyze the impact of forwarding an SFC
      OAM packet for all OAM functions prior to enabling this behavior.
      The configurable parameter MUST be disabled by default.

      The O bit is typically set by an OAM controller or an ultimate
      target of an SFC OAM command that triggers a response.


4.  IANA Considerations

   This document does not make any request to IANA.

5.  Security Considerations

   Data plane SFC-related security considerations, including privacy,
   are discussed in Section 6 of [RFC7665] and Section 8 of [RFC8300].

   Data icnluded in an SFC OAM packet SHOULD be integrity-protected
   [RFC9145].

6.  Acknowledgements

   Thanks to Jim Guichard and Greg Mirsky for the comments.

7.  References

7.1.  Normative References

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.






Boucadair                Expires 20 August 2022                 [Page 4]

Internet-Draft       DOTS Robust Block Transmission        February 2022


   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC
              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,
              May 2017, <https://www.rfc-editor.org/info/rfc8174>.

   [RFC8300]  Quinn, P., Ed., Elzur, U., Ed., and C. Pignataro, Ed.,
              "Network Service Header (NSH)", RFC 8300,
              DOI 10.17487/RFC8300, January 2018,
              <https://www.rfc-editor.org/info/rfc8300>.

   [RFC9145]  Boucadair, M., Reddy.K, T., and D. Wing, "Integrity
              Protection for the Network Service Header (NSH) and
              Encryption of Sensitive Context Headers", RFC 9145,
              DOI 10.17487/RFC9145, December 2021,
              <https://www.rfc-editor.org/info/rfc9145>.

7.2.  Informative References

   [I-D.ietf-sfc-nsh-tlv]
              Wei, Y., Elzur, U., Majee, S., Pignataro, C., and D. E.
              Eastlake, "Network Service Header Metadata Type 2
              Variable-Length Context Headers", Work in Progress,
              Internet-Draft, draft-ietf-sfc-nsh-tlv-13, 26 January
              2022, <https://www.ietf.org/archive/id/draft-ietf-sfc-nsh-
              tlv-13.txt>.

   [RFC7665]  Halpern, J., Ed. and C. Pignataro, Ed., "Service Function
              Chaining (SFC) Architecture", RFC 7665,
              DOI 10.17487/RFC7665, October 2015,
              <https://www.rfc-editor.org/info/rfc7665>.

   [RFC8924]  Aldrin, S., Pignataro, C., Ed., Kumar, N., Ed., Krishnan,
              R., and A. Ghanwani, "Service Function Chaining (SFC)
              Operations, Administration, and Maintenance (OAM)
              Framework", RFC 8924, DOI 10.17487/RFC8924, October 2020,
              <https://www.rfc-editor.org/info/rfc8924>.

   [RFC8979]  Sarikaya, B., von Hugo, D., and M. Boucadair, "Subscriber
              and Performance Policy Identifier Context Headers in the
              Network Service Header (NSH)", RFC 8979,
              DOI 10.17487/RFC8979, February 2021,
              <https://www.rfc-editor.org/info/rfc8979>.

Author's Address








Boucadair                Expires 20 August 2022                 [Page 5]

Internet-Draft       DOTS Robust Block Transmission        February 2022


   Mohamed Boucadair
   Orange
   35000 Rennes
   France

   Email: mohamed.boucadair@orange.com













































Boucadair                Expires 20 August 2022                 [Page 6]
