<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Raptor FEC Schemes for FECFRAME</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Raptor FEC Schemes for FECFRAME">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">FEC Framework</td><td class="header">M. Watson</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Digital Fountain</td></tr>
<tr><td class="header">Intended status:  Standards Track</td><td class="header">October 25, 2008</td></tr>
<tr><td class="header">Expires:  April 28, 2009</td><td class="header">&nbsp;</td></tr>
</table></td></tr></table>
<h1><br />Raptor FEC Schemes for FECFRAME<br />draft-ietf-fecframe-raptor-00</h1>

<h3>Status of this Memo</h3>
<p>
By submitting this Internet-Draft,
each author represents that any applicable patent or other IPR claims of which
he or she is aware have been or will be disclosed,
and any of which he or she becomes aware will be disclosed,
in accordance with Section&nbsp;6 of BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on April 28, 2009.</p>

<h3>Abstract</h3>

<p>This document describes Fully-Specified Forward Error Correction
      (FEC) Schemes for the Raptor code and its application to reliable
      delivery of media streams in the context of FEC Framework. The Raptor
      code is a systematic code, where a number of repair symbols are
      generated from a set of source symbols and sent in one or more repair
      flows in addition to the source symbols that are sent to the receiver(s)
      within a source flow. The Raptor code offers a close to optimal
      protection against arbitrary packet losses at a low computational
      complexity. Two FEC Schemes are defined, one for protection of arbitrary
      packet flows and another for protection of a single flow that already
      contains a sequence number. Repair data may be sent over arbitrary
      datagram transport (e.g. UDP) or using RTP. An RTP Payload Type is
      defined for this latter case.
</p><a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#anchor2">2.</a>&nbsp;
Document Outline<br />
<a href="#anchor3">3.</a>&nbsp;
Requirements Notation<br />
<a href="#anchor4">4.</a>&nbsp;
Definitions and Abbreviations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">4.1.</a>&nbsp;
Definitions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">4.2.</a>&nbsp;
Abbreviations<br />
<a href="#GeneralProcedures">5.</a>&nbsp;
General procedures for Raptor FEC Schemes<br />
<a href="#ArbitraryFlowScheme">6.</a>&nbsp;
Raptor FEC Scheme for arbitrary packet flows<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">6.1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">6.2.</a>&nbsp;
Formats and Codes<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">6.2.1.</a>&nbsp;
FEC Framework Configuration Information<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#SourceFECPayloadID">6.2.2.</a>&nbsp;
Source FEC Payload ID<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#RepairFECPayloadID">6.2.3.</a>&nbsp;
Repair FEC Payload ID<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">6.3.</a>&nbsp;
Procedures<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#SourceSymbolSection">6.3.1.</a>&nbsp;
Source symbol construction<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor12">6.3.2.</a>&nbsp;
Repair packet construction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#FECSpecificationSection">6.4.</a>&nbsp;
FEC Code Specification<br />
<a href="#OptimisedArbitraryFlowScheme">7.</a>&nbsp;
Optimised Raptor FEC Scheme for arbitrary packet flows<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">7.1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">7.2.</a>&nbsp;
Formats and Codes<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor15">7.2.1.</a>&nbsp;
FEC Framework Configuration Information<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor18">7.2.2.</a>&nbsp;
Source FEC Payload ID<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor19">7.2.3.</a>&nbsp;
Repair FEC Payload ID<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor20">7.3.</a>&nbsp;
Procedures<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor21">7.3.1.</a>&nbsp;
Source symbol construction<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#OptimisedRepairPacketSection">7.3.2.</a>&nbsp;
Repair packet construction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#OptimisedFECSpecificationSection">7.4.</a>&nbsp;
FEC Code Specification<br />
<a href="#SingleFlowScheme">8.</a>&nbsp;
Raptor FEC Scheme for a single sequenced flow<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor22">8.1.</a>&nbsp;
Formats and codes<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor23">8.1.1.</a>&nbsp;
FEC Framework Configuration Information<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor26">8.1.2.</a>&nbsp;
Source FEC Payload ID<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor27">8.1.3.</a>&nbsp;
Repair FEC Payload ID<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor28">8.2.</a>&nbsp;
Procedures<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor29">8.2.1.</a>&nbsp;
Source symbol construction<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor30">8.2.2.</a>&nbsp;
Derivation of Source FEC Packet Identification Information<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor31">8.2.3.</a>&nbsp;
Repair packet construction<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor32">8.2.4.</a>&nbsp;
Procedures for RTP source flows<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor33">8.3.</a>&nbsp;
FEC Code Specification<br />
<a href="#SecuritySection">9.</a>&nbsp;
Security Considerations<br />
<a href="#anchor34">10.</a>&nbsp;
Session Description Protocol (SDP) Signaling<br />
<a href="#anchor35">11.</a>&nbsp;
Congestion Control Considerations<br />
<a href="#IANASection">12.</a>&nbsp;
IANA Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor36">12.1.</a>&nbsp;
Registration of FEC Scheme IDs<br />
<a href="#rfc.references1">13.</a>&nbsp;
Normative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Author's Address<br />
<a href="#rfc.copyright">&#167;</a>&nbsp;
Intellectual Property and Copyright Statements<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>The FEC Framework <a class='info' href='#I-D.ietf-fecframe-framework'>[I&#8209;D.ietf&#8209;fecframe&#8209;framework]<span> (</span><span class='info'>Watson, M., &ldquo;Forward Error Correction (FEC) Framework,&rdquo; March&nbsp;2010.</span><span>)</span></a>
      describes a framework for the application of Forward Error Correction to
      arbitrary packet flows. Modelled after the FEC Building Block developed
      by the IETF Reliable Multicast Transport working group (<a class='info' href='#RFC5052'>[RFC5052]<span> (</span><span class='info'>, &ldquo;,&rdquo; 2005.</span><span>)</span></a>), the FEC Framework defines the concept of FEC
      Schemes which provide specific Forward Error Correction schemes. This
      document describes two FEC Schemes which make use of the Raptor FEC code
      as defined in <a class='info' href='#RFC5053'>[RFC5053]<span> (</span><span class='info'>, &ldquo;,&rdquo; 2005.</span><span>)</span></a>.
</p>
<p>The FEC protection mechanism is independent of the type of the source
      data, which can be an arbitrary sequence of packets, including for
      example audio or video data. In general, the operation of the protection
      mechanism is as follows:
</p>
<p></p>
<ul class="text">
<li>The sender determines a set of source packets to be protected
          together based on the FEC Framework Configuration Information.
</li>
<li>The sender arranges the source packets into a set of source
          symbols, each of which is the same size.
</li>
<li>The sender applies the Raptor protection operation on the source
          symbols to generate the required number of repair symbols.
</li>
<li>The sender packetizes the repair symbols and sends the repair
          packet(s) along with the source packets to the receiver(s).
</li>
</ul>

<p>Per the FEC Framework requirements, the sender MUST transmit the
      source and repair packets in different source and repair flows,
      respectively. At the receiver side, if all of the source packets are
      successfully received, there is no need for FEC recovery and the repair
      packets are discarded. However, if there are missing source packets, the
      repair packets can be used to recover the missing information.
</p>
<p>The operation of the FEC mechanism requires that the receiver can
      identify the relationships between received source packets and repair
      packets and in particular which source packets are missing. In many
      cases, data already exists in the source packets which can be used to
      refer to source packets and to identify which packets are missing. In
      this case we assume it is possible to derive a "sequence number"
      directly or indirectly from the source packets and this sequence number
      can be used within the FEC Scheme. This case is referred to as a "single
      sequenced flow". In this case the FEC Source Payload ID defined in <a class='info' href='#I-D.ietf-fecframe-framework'>[I&#8209;D.ietf&#8209;fecframe&#8209;framework]<span> (</span><span class='info'>Watson, M., &ldquo;Forward Error Correction (FEC) Framework,&rdquo; March&nbsp;2010.</span><span>)</span></a> is empty and the source
      packets are not modified by the application of FEC, with obvious
      backwards compatibility advantages.
</p>
<p>Otherwise, it is necessary to add data to the source packets for FEC
      purposes in the form of a non-empty FEC Source Payload ID. This case if
      referred to as the "arbitrary packet flow" case. Accordingly, this
      document defines two FEC Schemes, one for the case of a single sequenced
      flow and another for the case of arbitrary packet flows.
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Document Outline</h3>

<p>This document is organised as follows: </p>
<blockquote class="text">
<p><a class='info' href='#GeneralProcedures'>Section&nbsp;5<span> (</span><span class='info'>General procedures for Raptor FEC Schemes</span><span>)</span></a> defines general
          procedures applicable to the use of the Raptor code in the context
          of the FEC Framework.
</p>
<p><a class='info' href='#ArbitraryFlowScheme'>Section&nbsp;6<span> (</span><span class='info'>Raptor FEC Scheme for arbitrary packet flows</span><span>)</span></a>defines an FEC Scheme
          for the case of arbitrary source flows and follows the format
          defined for FEC Schemes in <a class='info' href='#I-D.ietf-fecframe-framework'>[I&#8209;D.ietf&#8209;fecframe&#8209;framework]<span> (</span><span class='info'>Watson, M., &ldquo;Forward Error Correction (FEC) Framework,&rdquo; March&nbsp;2010.</span><span>)</span></a>. This scheme is
          equivalent to that defined in [3GPP MBMS Specification].
</p>
<p><a class='info' href='#OptimisedArbitraryFlowScheme'>Section&nbsp;7<span> (</span><span class='info'>Optimised Raptor FEC Scheme for arbitrary packet flows</span><span>)</span></a> defines an
          FEC Scheme similar to that defined in <a class='info' href='#ArbitraryFlowScheme'>Section&nbsp;6<span> (</span><span class='info'>Raptor FEC Scheme for arbitrary packet flows</span><span>)</span></a>but with optimisations for the
          case where only limited source block sizes are required. This scheme
          is equivalent to that defined in [DVB AL-FEC specification] for
          arbitrary packet flows.
</p>
<p><a class='info' href='#SingleFlowScheme'>Section&nbsp;8<span> (</span><span class='info'>Raptor FEC Scheme for a single sequenced flow</span><span>)</span></a> defines an FEC Scheme for
          the case of a single sequenced flow and follows the format defined
          for FEC Schemes in
</p>
<p><a class='info' href='#I-D.ietf-fecframe-framework'>[I&#8209;D.ietf&#8209;fecframe&#8209;framework]<span> (</span><span class='info'>Watson, M., &ldquo;Forward Error Correction (FEC) Framework,&rdquo; March&nbsp;2010.</span><span>)</span></a>. This scheme
          is equivalent to that defined in [DVB AL-FEC specification] for the
          case of a single sequenced flow.
</p>
</blockquote>

<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Requirements Notation</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Definitions and Abbreviations</h3>

<p>The definitions, notations and abbreviations commonly used in this
      document are summarized in this section.
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Definitions</h3>

<p>This document uses the following definitions. For further
        definitions that apply to FEC Framework in general, see <a class='info' href='#I-D.ietf-fecframe-framework'>[I&#8209;D.ietf&#8209;fecframe&#8209;framework]<span> (</span><span class='info'>Watson, M., &ldquo;Forward Error Correction (FEC) Framework,&rdquo; March&nbsp;2010.</span><span>)</span></a>.
</p>
<p>Source Flow: The packet flow(s) carrying the source data and to
        which FEC protection is to be applied.
</p>
<p>Repair Flow: The packet flow(s) carrying the repair data.
</p>
<p>Symbol: A unit of data. Its size, in bytes, is referred to as the
        symbol size.
</p>
<p>Source Symbol: The smallest unit of data used during the encoding
        process.
</p>
<p>Repair Symbol: Repair symbols are generated from the source
        symbols.
</p>
<p>Source Packet: Data packets that contain only source symbols.
</p>
<p>Repair Packet: Data packets that contain only repair symbols.
</p>
<p>Source Block: A block of source symbols that are considered
        together in the encoding process.
</p>
<p>FEC Framework Configuration Information: Information that controls
        the operation of the FEC Framework. Each FEC Framework instance has
        its own configuration information.
</p>
<p>FEC Payload ID: Information that identifies the contents of a
        packet with respect to the FEC scheme.
</p>
<p>Source FEC Payload ID: An FEC Payload ID specifically used with
        source packets.
</p>
<p>Repair FEC Payload ID: An FEC Payload ID specifically used with
        repair packets.
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Abbreviations</h3>

<p></p>
<ul class="text">
<li>FSSI: FEC-Scheme-Specific Information.
</li>
<li>SS-FSSI: Sender-Side FEC-Scheme-Specific Information.
</li>
<li>RS-FSSI: Receiver-Side FEC-Scheme-Specific Information.
</li>
</ul>

<a name="GeneralProcedures"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
General procedures for Raptor FEC Schemes</h3>

<p>This section specifies general procedures which apply to all Raptor
      FEC Schemes, specifically the construction of source symbols from a set
      of source transport payloads. As described in <a class='info' href='#I-D.ietf-fecframe-framework'>[I&#8209;D.ietf&#8209;fecframe&#8209;framework]<span> (</span><span class='info'>Watson, M., &ldquo;Forward Error Correction (FEC) Framework,&rdquo; March&nbsp;2010.</span><span>)</span></a> for each source transport
      payload in a source block, the FEC Scheme is provided with:
</p>
<p></p>
<ul class="text">
<li>A description of the source transport flow with which the
          transport payload is associated and an integer identifier associated
          with that flow.
</li>
<li>The source transport payload itself.
</li>
<li>The length of the source transport payload.
</li>
</ul><p>For each source transport payload, we define the Source Packet
      Information (SPI) as follows:
</p>
<p>Let
</p>
<p></p>
<blockquote class="text">
<p>n be the number of source transport payloads in the source
          block.
</p>
<p>T be the source symbol size in bytes. Note: this information is
          provided by the FEC Scheme as defined below.
</p>
<p>i the index to the (i+1)-th source transport payload to be added
          to the source block, 0 &lt;= i &lt; n.
</p>
<p>R[i] denote the number of octets in the (i+1)-th source transport
          payload.
</p>
<p>l[i] be a length indication associated with the i-th UDP packet
          &ndash; the nature of the length indication is defined by the FEC
          Scheme.
</p>
<p>L[i] denote two octets representing the value of l[i] in network
          byte order (high order octet first) of the i-th UDP packet.
</p>
<p>f[i] denote the integer identifier associated with the source
          transport payload from which the i-th source transport payload was
          taken.
</p>
<p>F[i] denote a single octet representing the value of f[i].
</p>
<p>s[i] be the smallest integer such that s[i]*T &gt;= (l[i]+3).
          Note s[i] is the length of SPI[i] in units of symbols of size T
          bytes.
</p>
<p>P[i] denote s[i]*T-(l[i]+3) zero octets. Note: P[i] are padding
          octets to align the start of each UDP packet with the start of a
          symbol.
</p>
<p>SPI[i] be the concatenation of F[i] ,L[i], R[i] and P[i].
</p>
</blockquote>

<p>Then, a source data block is constructed by concatenating SPI[i] for
      i = 0, 1, 2, ... n-1. The source data block size, S, is then given by
      sum {s[i]*T, i=0, ..., n-1}. Symbols are allocated integer Encoding
      Symbol IDs consecutively starting from zero within the source block.
      Each source transport payload is associated with the Encoding Symbol ID
      of the first symbol containing SPI for that packet. Thus, the Encoding
      Symbol ID value associated with the j-th source packet, ESI[j], is given
      by ESI[j] = 0, for j=0 and ESI[j] = sum{s[i], i=0,...,(j-1)}, for 0 &lt;
      j &lt; n.
</p>
<p>Source blocks are identified by integer Source Block Numbers. This
      specification does not specify how Source Block Numbers are allocated to
      source blocks. The Source FEC Packet Identification Information consists
      of the identity of the source block and the Encoding Symbol ID
      associated with the packet.
</p>
<p>
</p>
<a name="ArbitraryFlowScheme"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Raptor FEC Scheme for arbitrary packet flows</h3>

<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
Introduction</h3>

<p>This section specifies an FEC Scheme for the application of the
        Raptor code to arbitary packet flows. This scheme is recommended in
        scenarios where maximal generality is required.
</p>
<p>This scheme is equivalent to that specified in [3GPP MBMS
        Specification].
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2"></a><h3>6.2.&nbsp;
Formats and Codes</h3>

<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2.1"></a><h3>6.2.1.&nbsp;
FEC Framework Configuration Information</h3>

<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2.1.1"></a><h3>6.2.1.1.&nbsp;
FEC Scheme ID</h3>

<p>The value of the FEC Scheme ID for the fully-specified FEC
            scheme defined in this section MUST be TBD as assigned by
            IANA.
</p>
<a name="ArbitraryFSSISection"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2.1.2"></a><h3>6.2.1.2.&nbsp;
Scheme-Specific Elements</h3>

<p>The scheme-specific elements of the FEC Framework Configuration
            information for this scheme are as follows:
</p>
<p></p>
<blockquote class="text"><dl>
<dt>Maximum Source Block Length</dt>
<dd>A non-negative
                integer less than 2^13, in units of symbols
</dd>
<dt>Encoding Symbol Size</dt>
<dd>A non-negative integer less
                than 2^16, in units of bytes
</dd>
</dl></blockquote><p>An encoding format for this information in a 4 octet
            field is defined as follows:
</p>
<p><br /><hr class="insert" />
<a name="ArbitraryFSSI"></a>

<p>
</p><div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
                         1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |       Symbol Size (T)         |   Max. Source Block Length    |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre></div>
<p>
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: FEC Scheme Specific Information&nbsp;</b></font><br /></td></tr></table><hr class="insert" />


<a name="SourceFECPayloadID"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2.2"></a><h3>6.2.2.&nbsp;
Source FEC Payload ID</h3>

<p>This scheme makes use of an Explicit Source FEC Payload ID, which
          is appended to the end of the source packets.
</p>
<p><br /><hr class="insert" />
<a name="SourceFECPayloadIDFigure"></a>

<p>
</p><div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
                     1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Source Block Number (SBN)   |   Encoding Symbol ID (ESI)    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre></div>
<p>
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: Source FEC Payload ID&nbsp;</b></font><br /></td></tr></table><hr class="insert" />


<p>Source Block Number (SBN), (16 bits): An integer identifier for
          the source block that the source data within the packet relates
          to.
</p>
<p>Encoding Symbol ID (ESI), (16 bits): The starting symbol index of
          the source packet in the source block.
</p>
<a name="RepairFECPayloadID"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2.3"></a><h3>6.2.3.&nbsp;
Repair FEC Payload ID</h3>

<p>The structure of the Repair FEC Payload ID is defined below:
</p>
<p><br /><hr class="insert" />

<p>
</p><div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>
                     1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Source Block Number (SBN)   |   Encoding Symbol ID (ESI)    |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Source Block Length (SBL)   |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre></div>
<p>
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Repair FEC Payload ID&nbsp;</b></font><br /></td></tr></table><hr class="insert" />


<p></p>
<blockquote class="text"><dl>
<dt>Source Block Number (SBN), (16 bits)</dt>
<dd>An integer
              identifier for the source block that the repair symbols within
              the packet relate to.
</dd>
<dt>Encoding Symbol ID (ESI), (16 bits)</dt>
<dd>Integer
              identifier for the encoding symbols within the packet.
</dd>
<dt>Source Block Length (SBL), (16 bits)</dt>
<dd>The number of
              source symbols in the source block.
</dd>
</dl></blockquote>

<p>The interpretation of the Source Block Number, Encoding Symbol
          Identifier and Source Block Length is defined by the FEC Code
          Specification.
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.3"></a><h3>6.3.&nbsp;
Procedures</h3>

<a name="SourceSymbolSection"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.3.1"></a><h3>6.3.1.&nbsp;
Source symbol construction</h3>

<p>This FEC Scheme uses the procedures defined in <a class='info' href='#GeneralProcedures'>Section&nbsp;5<span> (</span><span class='info'>General procedures for Raptor FEC Schemes</span><span>)</span></a> to construct a set of source
          symbols to which the FEC code can be applied. The sender MUST
          allocate Source Block Numbers to source blocks sequentially,
          wrapping around to zero after Source Block Number 2^16-1.
</p>
<p>During the construction of the source block:
</p>
<p></p>
<ul class="text">
<li>the length indication, l[i], included in the Source Packet
              Information for each packet shall be the transport payload
              length.
</li>
<li>the value of s[i] in the construction of the Source Packet
              Information for each packet shall be the smallest integer such
              that s[i]*T &gt;= (l[i]+3).
</li>
</ul>

<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.3.2"></a><h3>6.3.2.&nbsp;
Repair packet construction</h3>

<p>The number of repair symbols contained within a repair packet is
          computed from the packet length. The ESI value placed into a repair
          packet is given by the following formula:
</p>
<p>ESI_repair = I_repair + SBL,
</p>
<p>where I_repair is the index of the repair symbol in the sequence
          of repair symbols generated according to <a class='info' href='#FECSpecificationSection'>Section&nbsp;6.4<span> (</span><span class='info'>FEC Code Specification</span><span>)</span></a>, where the first repair
          symbol has index 0, the second index 1 etc. and SBL is the Source
          Block Length. The Source Block Length field of the Repair FEC
          Payload ID field SHALL be set to the number of symbols included in
          the Source Packet Information of packets associated with the source
          block.
</p>
<a name="FECSpecificationSection"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.4"></a><h3>6.4.&nbsp;
FEC Code Specification</h3>

<p>The Raptor FEC encoder defined in <a class='info' href='#RFC5053'>[RFC5053]<span> (</span><span class='info'>, &ldquo;,&rdquo; 2005.</span><span>)</span></a>
        SHALL be used. The source symbols passed to the Raptor FEC encoder
        SHALL consist of the source symbols constructed according to <a class='info' href='#SourceSymbolSection'>Section&nbsp;6.3.1<span> (</span><span class='info'>Source symbol construction</span><span>)</span></a>. Thus the value of the parameter
        K used by the FEC encoder (equal to the Source Block Length) may vary
        amongst the blocks of the stream but SHALL NOT exceed the Maximum
        Source Block Length signalled in the FEC Scheme-specific information.
        The symbol size, T, to be used for source block construction and the
        repair symbol construction is equal to the Encoding Symbol Size
        signaled in the FEC Scheme Specific Information.
</p>
<a name="OptimisedArbitraryFlowScheme"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Optimised Raptor FEC Scheme for arbitrary packet flows</h3>

<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1"></a><h3>7.1.&nbsp;
Introduction</h3>

<p>This section specifies a slightly modified version of the FEC
        Scheme specified in <a class='info' href='#ArbitraryFlowScheme'>Section&nbsp;6<span> (</span><span class='info'>Raptor FEC Scheme for arbitrary packet flows</span><span>)</span></a> which
        is applicable to scenarios in which only relatively small block sizes
        will be used. These modifications admit substantial optimisations to
        both sender and receiver implementations.
</p>
<p>In outline, the modifications are:
</p>
<p></p>
<blockquote class="text">
<p>All source blocks within a stream are encoded using the same
            source block size. Code shortening is used to encode blocks of
            different sizes. This is achieved by padding every block to the
            required size using zero symbols before encoding. The zero symbols
            are then discarded after decoding. The source block size to be
            used for a stream is signalled in the Maximum Source Block Size
            field of the scheme-specific information. This allows for
            efficient parallel encoding of multiple streams.
</p>
<p>A restricted set of possible source block sizes is specified.
            This allows explicit operation sequences for encoding the
            restricted set of block sizes to be pre-calculated and embedded in
            software or handware.
</p>
</blockquote><p> This scheme is equivalent to that specified in [DVB AL-FEC
        Specification] for arbitrary packet flows.
</p>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2"></a><h3>7.2.&nbsp;
Formats and Codes</h3>

<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2.1"></a><h3>7.2.1.&nbsp;
FEC Framework Configuration Information</h3>

<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2.1.1"></a><h3>7.2.1.1.&nbsp;
FEC Scheme ID</h3>

<p>The value of the FEC Scheme ID for the fully-specified FEC
            scheme defined in this section MUST be TBD as assigned by
            IANA.
</p>
<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2.1.2"></a><h3>7.2.1.2.&nbsp;
FEC Scheme specific information</h3>

<p>See <a class='info' href='#ArbitraryFSSISection'>.<span> (</span><span class='info'>Scheme-Specific Elements</span><span>)</span></a>
</p>
<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2.2"></a><h3>7.2.2.&nbsp;
Source FEC Payload ID</h3>

<p>See <a class='info' href='#SourceFECPayloadID'>.<span> (</span><span class='info'>Source FEC Payload ID</span><span>)</span></a>
</p>
<a name="anchor19"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2.3"></a><h3>7.2.3.&nbsp;
Repair FEC Payload ID</h3>

<p>See<a class='info' href='#RepairFECPayloadID'>Section&nbsp;6.2.3<span> (</span><span class='info'>Repair FEC Payload ID</span><span>)</span></a>
</p>
<a name="anchor20"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.3"></a><h3>7.3.&nbsp;
Procedures</h3>

<a name="anchor21"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.3.1"></a><h3>7.3.1.&nbsp;
Source symbol construction</h3>

<p>See <a class='info' href='#SourceSymbolSection'>Section&nbsp;6.3.1<span> (</span><span class='info'>Source symbol construction</span><span>)</span></a>
</p>
<a name="OptimisedRepairPacketSection"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.3.2"></a><h3>7.3.2.&nbsp;
Repair packet construction</h3>

<p>The number of repair symbols contained within a repair packet is
          computed from the packet length. The ESI value placed into a repair
          packet is given by the following formula:
</p>
<p>ESI_repair = I_repair + MSBL
</p>
<p>Where I_repair is the index of the repair symbol in the sequence
          of repair symbols generated according to <a class='info' href='#FECSpecificationSection'>Section&nbsp;6.4<span> (</span><span class='info'>FEC Code Specification</span><span>)</span></a>, where the first repair
          symbol has index 0, the second index 1 etc. and MSBL is the Maximum
          Source Block Length signalled in the FEC Scheme Specific
          Information. The Source Block Length field of the Repair FEC Payload
          ID field SHALL be set to the number of symbols included in the
          Source Packet Information of packets associated with the source
          block.
</p>
<a name="OptimisedFECSpecificationSection"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.4"></a><h3>7.4.&nbsp;
FEC Code Specification</h3>

<p>The Raptor FEC encoder defined in <a class='info' href='#RFC5053'>[RFC5053]<span> (</span><span class='info'>, &ldquo;,&rdquo; 2005.</span><span>)</span></a>
        SHALL be used. The source symbols passed to the Raptor FEC encoder
        SHALL consist of the source symbols constructed according to <a class='info' href='#SourceSymbolSection'>Section&nbsp;6.3.1<span> (</span><span class='info'>Source symbol construction</span><span>)</span></a> extended with zero or more
        padding symbols such that the total number of symbols in the source
        block is equal to the Maximum Source Block Length signaled in the FEC
        Scheme Specific Information. Thus the value of the parameter K used by
        the FEC encoded is equal to the Maximum Source Block Length for all
        blocks of the stream. Padding symbols shall consist entirely of bytes
        set to the value zero. The symbol size, T, to be used for source block
        construction and the repair symbol construction is equal to the
        Encoding Symbol Size signaled in the FEC Scheme Specific Information.
        The parameter T shall be set such that the number of source symbols in
        any source block is at most KMAX = 8192. The Maximum Source Block
        Length parameter &ndash; and hence the number of symbols used in the
        FEC Encoding and Decoding operations - SHALL be set to one of the
        following values:
</p>
<p></p>
<blockquote class="text">
<p>101, 120, 148, 164, 212, 237, 297, 371, 450, 560, 680, 842,
            1031, 1139, 1281
</p>
</blockquote>

<a name="SingleFlowScheme"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Raptor FEC Scheme for a single sequenced flow</h3>

<a name="anchor22"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.1"></a><h3>8.1.&nbsp;
Formats and codes</h3>

<a name="anchor23"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.1.1"></a><h3>8.1.1.&nbsp;
FEC Framework Configuration Information</h3>

<a name="anchor24"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.1.1.1"></a><h3>8.1.1.1.&nbsp;
FEC Scheme ID</h3>

<p>The value of the FEC Scheme ID for the fully-specified FEC
            scheme defined in this section MUST be TBD as assigned by
            IANA.
</p>
<a name="anchor25"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.1.1.2"></a><h3>8.1.1.2.&nbsp;
Scheme-specific elements</h3>

<p>See <a class='info' href='#ArbitraryFSSISection'>Section&nbsp;6.2.1.2<span> (</span><span class='info'>Scheme-Specific Elements</span><span>)</span></a>
</p>
<a name="anchor26"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.1.2"></a><h3>8.1.2.&nbsp;
Source FEC Payload ID</h3>

<p>The Source FEC Payload ID field is not used by this FEC Scheme.
          Source packets are not modified by this FEC Scheme.
</p>
<a name="anchor27"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.1.3"></a><h3>8.1.3.&nbsp;
Repair FEC Payload ID</h3>

<p>The Repair FEC Payload ID format for this FEC Scheme is shown
          below:
</p>
<p><br /><hr class="insert" />
<a name="RepairFECPayloadID2"></a>

<p>
</p><div style='display: table; width: 0; margin-left: auto; margin-right: auto'><pre>                     1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    Initial Sequence Number    |      Encoding Symbol ID       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|      Source Block Length      |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
</pre></div>
<p>
</p><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;3: Repair FEC Payload ID&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<blockquote class="text"><dl>
<dt>Initial Sequence Number (Flow i ISN) &ndash; 16 bits</dt>
<dd>This
              field specifies the lowest 16 bits of the sequence number of the
              first packet to be included in this sub-block. If the sequence
              numbers are shorter than 16 bits then the received Sequence
              Number SHALL be logically padded with zero bits to become 16
              bits in length respectively.
</dd>
<dt>Encoding Symbol ID (ESI) &ndash; 16 bits</dt>
<dd>This
              field indicates which repair symbols are contained within this
              repair packet. The ESI provided is the ESI of the first repair
              symbol in the packet.
</dd>
<dt>Source Block Length (SBL) &ndash; 16 bits</dt>
<dd>This
              field specifies the length of the source block in symbols.
</dd>
</dl></blockquote>

<a name="anchor28"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.2"></a><h3>8.2.&nbsp;
Procedures</h3>

<a name="anchor29"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.2.1"></a><h3>8.2.1.&nbsp;
Source symbol construction</h3>

<p>This FEC Scheme uses the procedures defined in <a class='info' href='#GeneralProcedures'>Section&nbsp;5<span> (</span><span class='info'>General procedures for Raptor FEC Schemes</span><span>)</span></a> to construct a set of source
          symbols to which the FEC code can be applied. The sender MUST
          allocate Source Block Numbers to source blocks sequentially,
          wrapping around to zero after Source Block Number 2^16-1.
</p>
<p>During the construction of the source block:
</p>
<p></p>
<ul class="text">
<li>the length indication, l[i], included in the Source Packet
              Information for each packet shall be dependent on the protocol
              carried within the transport payload. Rules for RTP are
              specified below.
</li>
<li>the value of s[i] in the construction of the Source Packet
              Information for each packet shall be the smallest integer such
              that s[i]*T &gt;= (l[i]+3)
</li>
</ul>

<a name="anchor30"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.2.2"></a><h3>8.2.2.&nbsp;
Derivation of Source FEC Packet Identification Information</h3>

<p>The Source FEC Packet Identification Information for a source
          packet is derived from the sequence number of the packet and
          information received in any Repair FEC packet belonging to this
          Source Block. Source blocks are identified by the sequence number of
          the first source packet in the block. This information is signaled
          in all Repair FEC packets associated with the source block in the
          Initial Sequence Number field.
</p>
<p>The length of the Source Packet Information (in bytes) for source
          packets within a source block is equal to length of the payload
          containing encoding symbols of the repair packets (i.e. not
          including the Repair FEC Payload ID) for that block, which MUST be
          the same for all repair packets. The Source Packet Information
          Length (SPIL) in symbols is equal to this length divided by the
          Encoding Symbol Size (which is signaled in the FEC Framework
          Configuration Information). The set of source packets which are
          included in the source block is determined from the Initial Sequence
          Number (ISN) and Source Block Length (SBL) as follows:
</p>
<p>Let,
</p>
<p></p>
<blockquote class="text">
<p>I be the Initial Sequence Number of the source block
</p>
<p>LP be the Source Packet Information Length in symbols
</p>
<p>LB be the Source Block Length in symbols
</p>
</blockquote><p>Then, source packets with sequence numbers from I to I
          +LB/LP-1 inclusive are included in the source block.
</p>
<p>Note that if no FEC Repair packets are received then no FEC
          decoding is possible and it is unnecessary for the receiver to
          identify the Source FEC Packet Identification Information for the
          source packets.
</p>
<p>The Encoding Symbol ID for a packet is derived from the following
          information:
</p>
<p></p>
<blockquote class="text">
<p>The sequence number, Ns, of the packet
</p>
<p>The Source Packet Information Length for the source block,
              LP
</p>
<p>The Initial Sequence Number of the source block, I
</p>
</blockquote><p>Then the Encoding Symbol ID for packet with sequence number
          Ns is determined by the following formula:
</p>
<p></p>
<blockquote class="text">
<p>ESI = ( Ns - I ) * LP
</p>
</blockquote><p>Note that all repair packet associated to a given Source
          Block MUST contain the same Source Block Length and Initial Sequence
          Number.
</p>
<a name="anchor31"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.2.3"></a><h3>8.2.3.&nbsp;
Repair packet construction</h3>

<p>See <a class='info' href='#OptimisedRepairPacketSection'>Section&nbsp;7.3.2<span> (</span><span class='info'>Repair packet construction</span><span>)</span></a>
</p>
<a name="anchor32"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.2.4"></a><h3>8.2.4.&nbsp;
Procedures for RTP source flows</h3>

<p>In the specific case of RTP source packet flows, then the RTP
          Sequence Number field SHALL be used as the sequence number in the
          procedures described above. The length indication included in the
          Source Packet Information SHALL be the RTP payload length plus the
          length of the CSRCs, if any, and the RTP padding bytes, if any. Note
          that this length is always equal to the UDP payload length of the
          packet, minus 12.
</p>
<a name="anchor33"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.3"></a><h3>8.3.&nbsp;
FEC Code Specification</h3>

<p>See <a class='info' href='#OptimisedFECSpecificationSection'>Section&nbsp;7.4<span> (</span><span class='info'>FEC Code Specification</span><span>)</span></a>
</p>
<a name="SecuritySection"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Security Considerations</h3>

<p>For the general security considerations related to the use of FEC,
      refer to <a class='info' href='#I-D.ietf-fecframe-framework'>[I&#8209;D.ietf&#8209;fecframe&#8209;framework]<span> (</span><span class='info'>Watson, M., &ldquo;Forward Error Correction (FEC) Framework,&rdquo; March&nbsp;2010.</span><span>)</span></a>.
</p>
<a name="anchor34"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
Session Description Protocol (SDP) Signaling</h3>

<p>This section provides an SDP <a class='info' href='#RFC4566'>[RFC4566]<span> (</span><span class='info'>Handley, M., Jacobson, V., and C. Perkins, &ldquo;SDP: Session Description Protocol,&rdquo; July&nbsp;2006.</span><span>)</span></a> example.
      The following example uses the SDP elements for FEC Framework, which
      were introduced in <a class='info' href='#I-D.ietf-fecframe-sdp-elements'>[I&#8209;D.ietf&#8209;fecframe&#8209;sdp&#8209;elements]<span> (</span><span class='info'>Begen, A., &ldquo;SDP Elements for FEC Framework,&rdquo; April&nbsp;2010.</span><span>)</span></a>, and the FEC grouping
      semantics <a class='info' href='#RFC4756'>[RFC4756]<span> (</span><span class='info'>Li, A., &ldquo;Forward Error Correction Grouping Semantics in Session Description Protocol,&rdquo; November&nbsp;2006.</span><span>)</span></a>.
</p>
<p>In this example, we have one source video stream (mid:S1) and one FEC
      repair stream (mid:R1). We form one FEC group with the "a=group:FEC S1
      R1" line. The source and repair streams are sent to the same port on
      different multicast groups. The repair window is set to 200 ms.
</p>
<p>
<p>
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>     v=0
     o=ali 1122334455 1122334466 IN IP4 fec.rocks.com
     s=Interleaved Parity FEC Example
     t=0 0
     a=group:FEC S1 R1
     m=video 30000 RTP/AVP 100
     c=IN IP4 224.1.1.1/127
     a=rtpmap:100 MP2T/90000
     a=fec-source-flow: id=0
     a=mid:S1
     m=application 30000 udp/fec
     c=IN IP4 224.1.2.1/127
     a=fec-repair-flow: scheme-id=0; ss-fssi=5hu=
     a=repair-window: 200
     a=mid:R1
</pre></div>

<a name="anchor35"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11"></a><h3>11.&nbsp;
Congestion Control Considerations</h3>

<p>For the general congestion control considerations related to the use
      of FEC, refer to <a class='info' href='#I-D.ietf-fecframe-framework'>[I&#8209;D.ietf&#8209;fecframe&#8209;framework]<span> (</span><span class='info'>Watson, M., &ldquo;Forward Error Correction (FEC) Framework,&rdquo; March&nbsp;2010.</span><span>)</span></a>.
</p>
<a name="IANASection"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12"></a><h3>12.&nbsp;
IANA Considerations</h3>

<a name="anchor36"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12.1"></a><h3>12.1.&nbsp;
Registration of FEC Scheme IDs</h3>

<p>The value of FEC Scheme IDs is subject to IANA registration. For
        general guidelines on IANA considerations as they apply to this
        document, refer to <a class='info' href='#I-D.ietf-fecframe-framework'>[I&#8209;D.ietf&#8209;fecframe&#8209;framework]<span> (</span><span class='info'>Watson, M., &ldquo;Forward Error Correction (FEC) Framework,&rdquo; March&nbsp;2010.</span><span>)</span></a>.
</p>
<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>13.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-fecframe-framework">[I-D.ietf-fecframe-framework]</a></td>
<td class="author-text">Watson, M., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-fecframe-framework-07.txt">Forward Error Correction (FEC) Framework</a>,&rdquo; draft-ietf-fecframe-framework-07 (work in progress), March&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-fecframe-framework-07.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5052">[RFC5052]</a></td>
<td class="author-text">&ldquo;,&rdquo; 2005.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5053">[RFC5053]</a></td>
<td class="author-text">&ldquo;,&rdquo; 2005.</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-fecframe-sdp-elements">[I-D.ietf-fecframe-sdp-elements]</a></td>
<td class="author-text">Begen, A., &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-fecframe-sdp-elements-06.txt">SDP Elements for FEC Framework</a>,&rdquo; draft-ietf-fecframe-sdp-elements-06 (work in progress), April&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-fecframe-sdp-elements-06.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4566">[RFC4566]</a></td>
<td class="author-text">Handley, M., Jacobson, V., and C. Perkins, &ldquo;<a href="http://tools.ietf.org/html/rfc4566">SDP: Session Description Protocol</a>,&rdquo; RFC&nbsp;4566, July&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4566.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4756">[RFC4756]</a></td>
<td class="author-text">Li, A., &ldquo;<a href="http://tools.ietf.org/html/rfc4756">Forward Error Correction Grouping Semantics in Session Description Protocol</a>,&rdquo; RFC&nbsp;4756, November&nbsp;2006 (<a href="http://www.rfc-editor.org/rfc/rfc4756.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Author's Address</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Mark Watson</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Digital Fountain</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">39141 Civic Center Drive</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Suite 300</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Fremont, CA  94538</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">U.S.A.</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:mark@digitalfountain.com">mark@digitalfountain.com</a></td></tr>
</table>
<a name="rfc.copyright"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Full Copyright Statement</h3>
<p class='copyright'>
Copyright &copy; The IETF Trust (2008).</p>
<p class='copyright'>
This document is subject to the rights,
licenses and restrictions contained in BCP&nbsp;78,
and except as set forth therein,
the authors retain all their rights.</p>
<p class='copyright'>
This document and the information contained herein are provided
on an &ldquo;AS IS&rdquo; basis and THE CONTRIBUTOR,
THE ORGANIZATION HE/SHE REPRESENTS
OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST
AND THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES,
EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT
THE USE OF THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY
IMPLIED WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR
PURPOSE.</p>
<h3>Intellectual Property</h3>
<p class='copyright'>
The IETF takes no position regarding the validity or scope of any
Intellectual Property Rights or other rights that might be claimed
to pertain to the implementation or use of the technology
described in this document or the extent to which any license
under such rights might or might not be available; nor does it
represent that it has made any independent effort to identify any
such rights.
Information on the procedures with respect to
rights in RFC documents can be found in BCP&nbsp;78 and BCP&nbsp;79.</p>
<p class='copyright'>
Copies of IPR disclosures made to the IETF Secretariat and any
assurances of licenses to be made available,
or the result of an attempt made to obtain a general license or
permission for the use of such proprietary rights by implementers or
users of this specification can be obtained from the IETF on-line IPR
repository at <a href='http://www.ietf.org/ipr'>http://www.ietf.org/ipr</a>.</p>
<p class='copyright'>
The IETF invites any interested party to bring to its attention
any copyrights,
patents or patent applications,
or other
proprietary rights that may cover technology that may be required
to implement this standard.
Please address the information to the IETF at <a href='mailto:ietf-ipr@ietf.org'>ietf-ipr@ietf.org</a>.</p>
</body></html>
