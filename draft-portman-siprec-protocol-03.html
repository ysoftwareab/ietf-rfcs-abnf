<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>The SIP-based Media Recording Protocol (SIPREC)</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.2" rel="Chapter" title="2 Definitions">
<link href="#rfc.section.3" rel="Chapter" title="3 Scope">
<link href="#rfc.section.4" rel="Chapter" title="4 Overview of operations">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 Delivering recorded media">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Conference focus as an SRC">
<link href="#rfc.section.4.3" rel="Chapter" title="4.3 Delivering recording metadata">
<link href="#rfc.section.5" rel="Chapter" title="5 SIP Extensions for Recording Session">
<link href="#rfc.section.5.1" rel="Chapter" title="5.1 Callee Capabilities Extensions for SIP Recording">
<link href="#rfc.section.5.1.1" rel="Chapter" title="5.1.1 src Feature Tag">
<link href="#rfc.section.5.1.2" rel="Chapter" title="5.1.2 srs Feature Tag">
<link href="#rfc.section.5.2" rel="Chapter" title="5.2 SDP handling">
<link href="#rfc.section.5.3" rel="Chapter" title="5.3 Metadata">
<link href="#rfc.section.5.3.1" rel="Chapter" title="5.3.1 Requesting for metadata snapshot">
<link href="#rfc.section.5.3.2" rel="Chapter" title="5.3.2 Recording Pause and Resume">
<link href="#rfc.section.6" rel="Chapter" title="6 SIP Extensions for Recording-aware User Agents">
<link href="#rfc.section.6.1" rel="Chapter" title="6.1 Recording awareness">
<link href="#rfc.section.6.2" rel="Chapter" title="6.2 Providing recording indication">
<link href="#rfc.section.6.3" rel="Chapter" title="6.3 Recording preference">
<link href="#rfc.section.7" rel="Chapter" title="7 IANA Considerations">
<link href="#rfc.section.7.1" rel="Chapter" title="7.1 New Content-Disposition Parameter Registrations">
<link href="#rfc.section.7.2" rel="Chapter" title="7.2 Media Type Registration">
<link href="#rfc.section.7.2.1" rel="Chapter" title="7.2.1 Registration of MIME Type application/rs-metadata">
<link href="#rfc.section.7.2.2" rel="Chapter" title="7.2.2 Registration of MIME Type application/rs-metadata-request">
<link href="#rfc.section.7.3" rel="Chapter" title="7.3 Info Package">
<link href="#rfc.section.7.4" rel="Chapter" title="7.4 SDP Attributes">
<link href="#rfc.section.7.4.1" rel="Chapter" title="7.4.1 'recording-aware' SDP Attribute">
<link href="#rfc.section.7.4.2" rel="Chapter" title="7.4.2 'record' SDP Attribute">
<link href="#rfc.section.7.4.3" rel="Chapter" title="7.4.3 'recordpref' SDP Attribute">
<link href="#rfc.section.8" rel="Chapter" title="8 Security Considerations">
<link href="#rfc.section.8.1" rel="Chapter" title="8.1 Authentication and Authorization">
<link href="#rfc.references" rel="Chapter" title="9 References">
<link href="#rfc.references.1" rel="Chapter" title="9.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="9.2 Informative References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="SIPREC Session Recording Protocol is used for establishing recording session and reporting of the metadata of the communication session." />
  <meta name="description" content="SIPREC Session Recording Protocol is used for establishing recording session and reporting of the metadata of the communication session." />
  <meta name="keywords" content="siprec" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">SIPREC</td>
<td class="right">L.P. Portman, Ed.</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">NICE Systems</td>
</tr>
<tr>
<td class="left">Intended status: Informational</td>
<td class="right">H. Lum</td>
</tr>
<tr>
<td class="left">Expires: September 02, 2011</td>
<td class="right">Genesys, Alcatel-Lucent</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">A. Johnston</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Avaya</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">A. Hutton</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Siemens Enterprise Communications</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">March 01, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">The SIP-based Media Recording Protocol (SIPREC)<br />
  <span class="filename">draft-portman-siprec-protocol-03</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>SIPREC Session Recording Protocol is used for establishing recording session and reporting of the metadata of the communication session.</p>
<p>This document specifies the SIPREC Protocol (SIPREC).  SIPREC is used between Session Recording Client (SRC) and Session Recording Server (SRS).</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on September 02, 2011.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>2.   <a href="#rfc.section.2">Definitions</a>
</li>
<li>3.   <a href="#rfc.section.3">Scope</a>
</li>
<li>4.   <a href="#rfc.section.4">Overview of operations</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">Delivering recorded media</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">Conference focus as an SRC</a>
</li>
<li>4.3.   <a href="#rfc.section.4.3">Delivering recording metadata</a>
</li>
<li>5.   <a href="#rfc.section.5">SIP Extensions for Recording Session</a>
</li>
<li>5.1.   <a href="#rfc.section.5.1">Callee Capabilities Extensions for SIP Recording</a>
</li>
<li>5.1.1.   <a href="#rfc.section.5.1.1">src Feature Tag</a>
</li>
<li>5.1.2.   <a href="#rfc.section.5.1.2">srs Feature Tag</a>
</li>
<li>5.2.   <a href="#rfc.section.5.2">SDP handling</a>
</li>
<li>5.3.   <a href="#rfc.section.5.3">Metadata</a>
</li>
<li>5.3.1.   <a href="#rfc.section.5.3.1">Requesting for metadata snapshot</a>
</li>
<li>5.3.2.   <a href="#rfc.section.5.3.2">Recording Pause and Resume</a>
</li>
<li>6.   <a href="#rfc.section.6">SIP Extensions for Recording-aware User Agents</a>
</li>
<li>6.1.   <a href="#rfc.section.6.1">Recording awareness</a>
</li>
<li>6.2.   <a href="#rfc.section.6.2">Providing recording indication</a>
</li>
<li>6.3.   <a href="#rfc.section.6.3">Recording preference</a>
</li>
<li>7.   <a href="#rfc.section.7">IANA Considerations</a>
</li>
<li>7.1.   <a href="#rfc.section.7.1">New Content-Disposition Parameter Registrations</a>
</li>
<li>7.2.   <a href="#rfc.section.7.2">Media Type Registration</a>
</li>
<li>7.2.1.   <a href="#rfc.section.7.2.1">Registration of MIME Type application/rs-metadata</a>
</li>
<li>7.2.2.   <a href="#rfc.section.7.2.2">Registration of MIME Type application/rs-metadata-request</a>
</li>
<li>7.3.   <a href="#rfc.section.7.3">Info Package</a>
</li>
<li>7.4.   <a href="#rfc.section.7.4">SDP Attributes</a>
</li>
<li>7.4.1.   <a href="#rfc.section.7.4.1">'recording-aware' SDP Attribute</a>
</li>
<li>7.4.2.   <a href="#rfc.section.7.4.2">'record' SDP Attribute</a>
</li>
<li>7.4.3.   <a href="#rfc.section.7.4.3">'recordpref' SDP Attribute</a>
</li>
<li>8.   <a href="#rfc.section.8">Security Considerations</a>
</li>
<li>8.1.   <a href="#rfc.section.8.1">Authentication and Authorization</a>
</li>
<li>9.   <a href="#rfc.references">References</a>
</li>
<li>9.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>9.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> <a href="#Introduction" id="Introduction">Introduction</a>
</h1>
<p id="rfc.section.1.p.1">Communication Session recording requires establishment of the recording session between communication system and recording system. In order to allow access to such recordings, information about the communication session (metadata) is also shared between SRC and SRS.</p>
<p id="rfc.section.1.p.2">The SIPREC Requirements <a href="#I-D.ietf-siprec-req">[I-D.ietf-siprec-req]</a> list a set of requirements that need to be met by session recording protocols.  The SIPREC protocol, which is specified in this document, meets these requirements.</p>
<p id="rfc.section.1.p.3">The SIPREC protocol uses SIP as the protocol for session establishment with special attention to reducing size of the required SIP messages.  In addition, it is designed for future extendability and protocol version management to ensure backward compatability.</p>
<p id="rfc.section.1.p.4">The remainder of this document is organized as follows: Section 2 defines the terminology used throughout this document, Section 3 discusses the scope of SIPREC (i.e., which tasks fall within the scope of SIPREC and which ones are performed using different mechanisms), Section 4 provides a non-normative overview of SIPREC operation, and subsequent sections provide the normative specification of SIPREC.</p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> <a href="#Definitions" id="Definitions">Definitions</a>
</h1>
<p id="rfc.section.2.p.1">The core SIPREC defintions are taken from the requirements document <a href="#I-D.ietf-siprec-req">[I-D.ietf-siprec-req]</a>.</p>
<p></p>

<dl>
<dt></dt>
<dd style="margin-left: 8">Session Recording Server (SRS): A Session Recording Server (SRS) is a SIP User Agent (UA) that is a specialized media server or collector that acts as the sink of the recorded media.  An SRS is a logical function that typically archives media for extended durations of time and provides interfaces for search and retrieval of the archived media.  An SRS is typically implemented as a multi-port device that is capable of receiving media from several sources simultaneously. An SRS is typically also the sink of the recorded session metadata.</dd>
<dt>Session Recording Client (SRC)</dt>
<dd style="margin-left: 8">A Session Recording Client (SRC) is a SIP User Agent (UA) that acts as the source of the recorded media, sending it to the SRS.  An SRC is a logical function.  Its capabilities may be implemented across one or more physical devices.  In practice, an SRC could be a personal device (such as a SIP phone), a SIP Media Gateway (MG), a Session Border Controller (SBC) or a SIP Media Server (MS) integrated with an Application Server (AS).  This specification defines the term SRC such that all such SIP entities can be generically addressed under one definition.  The SRC itself or another entity working on its behalf (such as a SIP Application Server) may act as the source of the recording metadata.</dd>
<dt>Communication Session (CS)</dt>
<dd style="margin-left: 8">A session created between two or more SIP User Agents (UAs) that is the target for recording.</dd>
<dt>Recording Session (RS)</dt>
<dd style="margin-left: 8">The SIP session created between an SRC and SRS for the purpose of recording a Communication Session.</dd>
<dt>Metadata</dt>
<dd style="margin-left: 8">Information that describes recorded media and the CS to which they relate.</dd>
<dt>SIPREC</dt>
<dd style="margin-left: 8">The set of SIP extensions that supports recording of Communication Sessions.</dd>
<dt>Pause during a Communication Session:</dt>
<dd style="margin-left: 8">The action of temporarily discontinuing the transmission and collection of RS media.</dd>
<dt>Resume during a Communication Session:</dt>
<dd style="margin-left: 8">The action of recommencing the transmission and collection of RS media.</dd>
</dl>

<p> </p>
<p id="rfc.section.2.p.3">Figure 1 shows the relationship between the defintions.</p>
<div id="#rfc.figure.1"></div>
<pre>

  +-------------+                                      +-----------+
  |             |        Communication Session         |           |
  |     A       |&lt;------------------------------------&gt;|     B     |
  |             |                                      |           |
  +-------------+                                      +-----------+
  ..................................................................
  .                             Session                            .
  .                            Recording                           .
  .                             Client                             .
  ..................................................................
                                   |
                                   | Recording
                                   | Session
                                   |
                                   v
                            +------------+
                            |   Session  |
                            |  Recording |
                            |   Server   |
                            +------------+
							
	   Figure 1: Relationship between CS, SRC, SRS, and RS

   </pre>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> Scope</h1>
<p id="rfc.section.3.p.1">The scope of the SIPREC protocol includes the establishment of the recording sessions and the reporting of the metadata.  The following items, which is not an exhaustive list, do not represent the SIPREC protcol itself and are considered out of the scope of the SIPREC protocol:</p>
<p></p>

<ul>
<li>Recording policies that determine whether the CS should be recorded</li>
<li>Retention policies that determine how long a recording is stored</li>
<li>Searching and accessing the recorded media and metadata</li>
<li>Delivering recording session metadata through non-SIP mechanism</li>
</ul>

<p> </p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#Overview" id="Overview">Overview of operations</a>
</h1>
<p id="rfc.section.4.p.1">This section is informative and provides a description of SIPREC operations.</p>
<p id="rfc.section.4.p.2">As mentioned in the architecture document <a href="#I-D.ietf-siprec-architecture">[I-D.ietf-siprec-architecture]</a>, there are a couple of types of call flows based on the location of the Session Recording Client. The following sample call flows provide a quick overview of the operations between the SRC and the SRS.</p>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> Delivering recorded media</h1>
<p id="rfc.section.4.1.p.1">When the SRC is deployed as a B2BUA, the SRC can route call requests from UA(A) to UA(B). As a SIP B2BUA, the SRC has access to the media path between the user agents.  When the SRC is aware that it should be recording the conversation, the SRC may bridge the media between UA(A) and UA(B).  The SRC then establishes the Recording Session with the SRS and sends replicated media towards the SRS.</p>
<p id="rfc.section.4.1.p.2">An endpoint can also be acting as the SRC, and the endpoint itself will be establishing the Recording Session to the SRS.  Since the endpoint has access to the media in the communication session, the endpoint can send replicated media towards the SRS.</p>
<p id="rfc.section.4.1.p.3">The following basic call flow shows the SRC establishing a recording session towards the SRS. The call flow is essentially identical when the SRC is a B2BUA or as the endpoint itself.</p>
<div id="#rfc.figure.2"></div>
<pre>

UA A           SRC                    UA B                    SRS
 |(1)CS INVITE  |                       |                      |
 |-------------&gt;|                       |                      |
 |              |(2)CS INVITE           |                      |
 |              |----------------------&gt;|                      |
 |              |               (3)OK   |                      |
 |              |&lt;----------------------|                      |
 |        (4)OK |                       |                      |
 |&lt;-------------|                       |                      |
 |              |(5)RS INVITE (CallId + Participants) with SDP |
 |              |---------------------------------------------&gt;|
 |              |                       |       (6)OK with SDP |
 |              |&lt;---------------------------------------------|
 |(7)CS RTP     |                       |                      |
 |=============&gt;|======================&gt;|                      |
 |&lt;=============|&lt;======================|                      |
 |              |(8)RS RTP              |                      |
 |              |=============================================&gt;|
 |              |=============================================&gt;|
 |(9)CS BYE     |                       |                      |
 |-------------&gt;|                       |                      |
 |              |(10)CS BYE             |                      |
 |              |----------------------&gt;|                      |
 |              |(11)RS BYE             |                      |
 |              |---------------------------------------------&gt;|
 |              |                       |                      |

         Figure 2: Basic Recording Call flow
								 
	   </pre>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> Conference focus as an SRC</h1>
<p id="rfc.section.4.2.p.1">A conference focus may also act as an SRC since it has access to all the media from each conference participant.  In this example, a user agent may REFER the conference focus to the SRS, and the SRC may choose to mix media streams from all participants as a single media stream towards the SRS.  In order to tell the conference focus to start a recording session to the SRS, the user agent can include the srs feature tag in the Refer-To header as per <a href="#RFC4508">[RFC4508]</a>.</p>
<div id="#rfc.figure.3"></div>
<pre>

 UA A                 Focus                 UA B                SRS
   |                  (SRC)                  |                   |
   |                    |                    |                   |
   |      (already in a conference)          |                   |
   |&lt;==================&gt;|&lt;==================&gt;|                   |
   |(1)REFER sip:Conf-ID Refer-To:&lt;SRS&gt;;srs  |                   |
   |-------------------&gt;|                                        |
   |(2)202 Accepted     |                                        |
   |&lt;-------------------|                                        |
   |  (3)NOTIFY (Trying)|                                        |
   |&lt;-------------------|                                        |
   |(4)200 OK           |                                        |
   |-------------------&gt;|                                        |
   |                    |(5)INVITE Contact:Conf-ID;isfocus       |
   |                    |---------------------------------------&gt;|
   |                    |                              (6)200 OK |
   |                    |&lt;---------------------------------------|
   |                    | (7)RTP (mixed or unmixed)              |
   |                    |=======================================&gt;|
   |     (8)NOTIFY (OK) |                                        |
   |&lt;-------------------|                                        |
   |(9)200 OK           |                                        |
   |-------------------&gt;|                                        |

  Figure 3: Recording call flow - SRC as a conference focus
	   
	   </pre>
<h1 id="rfc.section.4.3">
<a href="#rfc.section.4.3">4.3.</a> Delivering recording metadata</h1>
<p id="rfc.section.4.3.p.1">Certain metadata, such as the attributes of the recorded media stream, are already included in the SDP of the recording session.  This information is reused as part of the metadata.  The SRC may provide an initial metadata snapshot about recorded media streams in the initial INVITE content in the recording session.  Subsequent metadata updates can be represented as a stream of events in UPDATE or reINVITE requests sent by the SRC.  These metadata updates are normally incremental updates to the initial metadata snapshot to optimize on the size of updates, however, the SRC may also decide to send a new metadata snapshot anytime.</p>
<p id="rfc.section.4.3.p.2">The SRS also has the ability to sent a request to the SRC to request to receive a new metadata snapshot update when the SRS fails to understand the current stream of incremental updates for whatever reason (ie. SRS gets a syntax/semantic error in metadata update, the SRS crashes and restarts), and the SRS may attach a reason along with the snapshot request.  This request allows both SRC and SRS to restart the states with a new metadata snapshot so that further metadata incremental updates will be based on the latest metadata snapshot.  The metadata snapshot request will be provided as an INFO package <a href="#RFC6086">[RFC6086]</a> and sent as mid-dialog messages within the recording session by the SRS.</p>
<div id="#rfc.figure.4"></div>
<pre>

  SRC                                                   SRS
   |                                                     |
   |(1) INVITE (metadata snapshot)                       |
   |----------------------------------------------------&gt;|
   |                                           (2)200 OK |
   |&lt;----------------------------------------------------|
   |(3) ACK                                              |
   |----------------------------------------------------&gt;|
   |(4) RTP                                              |
   |====================================================&gt;|
   |(5) UPDATE (metadata update 1)                       |
   |----------------------------------------------------&gt;|
   |                                          (6) 200 OK |
   |&lt;----------------------------------------------------|
   |(7) UPDATE (metadata update 2)                       |
   |----------------------------------------------------&gt;|
   |                                          (8) 200 OK |
   |&lt;----------------------------------------------------|
   |                (9) INFO (metadata snapshot request) |
   |&lt;----------------------------------------------------|
   |                                         (10) 200 OK |
   |----------------------------------------------------&gt;|
   |(11) UPDATE (metadata snapshot 2)                    |
   |----------------------------------------------------&gt;|
   |                                         (12) 200 OK |
   |&lt;----------------------------------------------------|
   |(13) UPDATE (metadata update 1 based on snapshot 2)  |
   |----------------------------------------------------&gt;|
   |                                         (14) 200 OK |
   |&lt;----------------------------------------------------|
   
       Figure 4: Delivering metadata via SIP INFO
								 
	   </pre>
<p id="rfc.section.4.3.p.3">In some cases session metadata can be conveyed through non-SIP mechanism such as HTTP or JTAPI.  These non-SIP mechanisms are considered out of the scope of the SIPREC protocol, however, it is envisoned that a link with a URI can be provided in the recording session INVITE message so that the SRS can access the session metadata via the URI provided that the SRS supports the type of URI.</p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> <a href="#extensions" id="extensions">SIP Extensions for Recording Session</a>
</h1>
<p id="rfc.section.5.p.1">The following sections describe SIP extensions for the Recording Session.</p>
<p id="rfc.section.5.p.2">The From header must contain the identity of the SRC.  Participants information is not recorded in the From or To header; they are included in the metadata information.</p>
<p id="rfc.section.5.p.3">Note that a recording session does not have to have live within the scope of a single communication session. As outline in REQ-005 of <a href="#I-D.ietf-siprec-req">[I-D.ietf-siprec-req]</a>, the recording session can be established in the absence of a communication session.  In this case, the SRC must offer an SDP with zero m= lines.</p>
<p id="rfc.section.5.p.4">Recorded media from multiple communication sessions may be handled in a single recording session.  The SRC provides a reference of each recorded media stream to the metadata described in the next section.</p>
<p id="rfc.section.5.p.5">The SRC must be able to accept re-INVITE from SRS with the updated SDP as part of the session timer mechanism.</p>
<h1 id="rfc.section.5.1">
<a href="#rfc.section.5.1">5.1.</a> Callee Capabilities Extensions for SIP Recording</h1>
<p id="rfc.section.5.1.p.1">This section discusses  how the callee capabilities defined in <a href="#RFC3840">[RFC3840]</a> can be extended for SIP call recording.  </p>
<p id="rfc.section.5.1.p.2">SIP Callee Capabilities defines feature tags which are used to represent characteristics and capabilities of a UA.  From RFC 3840: </p>
<p></p>

<ul class="empty"><li>"Capability and characteristic information about a UA is carried as parameters of the Contact header field.  These parameters can be used within REGISTER requests and responses, OPTIONS responses, and requests and responses that create dialogs (such as INVITE)." </li></ul>

<p> </p>
<p id="rfc.section.5.1.p.4">Note that feature tags are also used in dialog modifying requests and responses such as re-INVITE and responses to a re-INVITE, and UPDATE.  The 'isfocus' feature tag, defined in <a href="#RFC4579">[RFC4579]</a> is similar semantically to this case: it indicates that the UA is acting as a SIP conference focus, and is performing a specific action (mixing) on the resulting media stream.  This information is available from OPTIONS queries, dialog package notifications, and the SIP registration event package.  </p>
<p id="rfc.section.5.1.p.5">We propose the definition of two new feature tags:  'src' and 'srs'.  </p>
<h1 id="rfc.section.5.1.1">
<a href="#rfc.section.5.1.1">5.1.1.</a> src Feature Tag</h1>
<p id="rfc.section.5.1.1.p.1">The 'src' feature tag is used in Contact URIs by the Session Recording Client (SRC) related to recording sessions.  A Session Recording Server uses the presence of this feature tag in dialog creating and modifying requests and responses to confirm that the dialog being created is for the purpose of a Recording Session. In addition, a registrar could discover that a UA is an SRC based on the presence of this feature tag in a registration.  Other SIP Recording extensions and behaviors can be triggered by the presence of this feature tag.  </p>
<p id="rfc.section.5.1.1.p.2">Note that we could use a single feature tag, such as 'recording' used by either an SRC or SRS to identify that the session is a recording session.  However, due to the differences in functionality and behavior between an SRC and SRS, using only one feature tag for both is not ideal.  For instance, if a routing mistake resulted in a request from a SRC being routed back to another SRC, if only one feature tag were defined, they would not know right away about the error and could become confused.  With separate feature tags, they would realize the error immediately and terminate the session.  Also, call logs would clearly show the routing error.  </p>
<h1 id="rfc.section.5.1.2">
<a href="#rfc.section.5.1.2">5.1.2.</a> srs Feature Tag</h1>
<p id="rfc.section.5.1.2.p.1">The 'srs' feature tag is used in Contact URIs by the Session Recording Server (SRS) related to recording sessions.  A Session Recording Client uses the presence of this feature tag in dialog creating and modifying requests and responses to confirm that the dialog being created is for the purpose of a Recording Session (REQ-30). In addition, a registrar could discover that a UA is an SRS based on the presence of this feature tag in a registration. Other SIP Recording extensions and behaviors can be triggered by the presence of this feature tag.  </p>
<p id="rfc.section.5.1.2.p.2">To ensure a recording session is redirected to an SRS, an SRC can utilize the SIP Caller Preferences extensions, defined in <a href="#RFC3841">[RFC3841]</a>.  The presence of a Accept-Contact: *;sip.srs allows a UA to request that the INVITE be routed to an SRS.  Note that to be completely sure, the SRC would need to include a Require: prefs header field field in the request.  </p>
<h1 id="rfc.section.5.2">
<a href="#rfc.section.5.2">5.2.</a> SDP handling</h1>
<p id="rfc.section.5.2.p.1">SRC can include one or more media streams to the SRS.  The SRS must respond with the same number of media descriptors in the SDP body of the 200 OK.</p>
<p id="rfc.section.5.2.p.2">The SRC should use a=sendonly attribute as the SRC does not expect to receive media from the SRS.  As SRS only receives RTP streams from SRS, the 200 OK response will normally contain SDP with a=recvonly attribute.</p>
<p id="rfc.section.5.2.p.3">Since the SRC may send recorded media of different participants (or even mixed streams) to the SRS, the SDP must provide a label on each media stream in order to identify the recorded stream with the rest of the metadata.  The a=label attribute <a href="#RFC4574">[RFC4574]</a> will be used to identify each recorded media stream, and the label name will be used as the reference for the metadata.  Note that a participant may have multiple streams (audio and video) and each stream is labeled separately.</p>
<div id="#rfc.figure.5"></div>
<pre>
	
           v=0
           o=SRS 0 0 IN IP4 172.22.3.8
           s=SRS
           c=IN IP4 172.22.3.8
           t=0 0
           m=audio 12241 RTP/AVP 0 4 8
           a=sendonly
           a=label:1
           m=audio 12242 RTP/AVP 98
           a=rtpmap:98 H264/90000
           a=fmtp:98 ...
           a=sendonly
           a=label:2
           m=audio 12243 RTP/AVP 0 4 8
           a=sendonly
           a=label:3
           m=audio 12244 RTP/AVP 98
           a=rtpmap:98 H264/90000
           a=fmtp:98 ...
           a=sendonly
           a=label:4

    Figure 6: Sample SDP with audio and video streams

   </pre>
<p id="rfc.section.5.2.p.4">To remove a recorded media stream from the recording session, send a reINVITE and set the port to zero in the m= line.</p>
<p id="rfc.section.5.2.p.5">To add a recorded media stream, send a reINVITE and add a new m= line.</p>
<p id="rfc.section.5.2.p.6">The SRS may respond with a=inactive attribute as part of the SDP in the 200 OK response when the SRS is not ready to receive recorded media.  The SRS can send re-INVITE to update the SDP with a=recvonly when it is ready to receive media.</p>
<p id="rfc.section.5.2.p.7">The following sequence diagram shows an example of SRS responds with SDP that contain a=inactive, and then later update media information update with re-INVITE.</p>
<div id="#rfc.figure.6"></div>
<pre>

  SRC                                                   SRS
   |                                                     |
   |(1) INVITE (no offer)                                |
   |----------------------------------------------------&gt;|
   |                         (2)200 OK with SDP inactive |
   |&lt;----------------------------------------------------|
   |(3) ACK with SDP inactive                            |
   |----------------------------------------------------&gt;|
   |                      ...                            |
   |                     (4) re-INVITE with SDP recvonly |
   |&lt;----------------------------------------------------|
   |(5)200 OK with SDP sendonly                          |
   |----------------------------------------------------&gt;|
   |                                  (6) ACK with SDP   |
   |&lt;----------------------------------------------------|
   |(7) RTP                                              |
   |====================================================&gt;|
   |                      ...                            |
   |(8) BYE                                              |
   |----------------------------------------------------&gt;|
   |                                             (9) OK  |
   |&lt;----------------------------------------------------|
    
	   Figure 7: SRS to offer with a=inactive

   </pre>
<h1 id="rfc.section.5.3">
<a href="#rfc.section.5.3">5.3.</a> Metadata</h1>
<p id="rfc.section.5.3.p.1">The format of the full metadata will be described as part of the mechanism in <a href="#I-D.ram-siprec-metadata">[I-D.ram-siprec-metadata]</a>.</p>
<p id="rfc.section.5.3.p.2">As mentioned in the previous section, the SDP of the recording session is the metadata for all recorded media streams. The label attribute contains a reference to the rest of the metadata information.</p>
<p id="rfc.section.5.3.p.3">For all basic metadata information such as communication session, participants, call identifiers and direction, they can be included in the initial INVITE request sent by the SRC. Metadata can be included as content in the INVITE or UPDATE request.  A new "disposition-type" of Content-Disposition is defined for this purpose and the value is "recording-session".</p>
<p id="rfc.section.5.3.p.4">The following SIP example for RS establishment between SRC and SRS with metadata as content.</p>
<div id="#rfc.figure.7"></div>
<pre>

    INVITE sip:97753210@10.240.3.10:5060 SIP/2.0
    From: &lt;sip:2000@10.226.240.3&gt;;tag=35e195d2-947d-4585-946f-098392474
    To: &lt;sip:Recorder@10.240.3.10&gt;
    Call-ID: d253c800-b0d1ea39-4a7dd-3f0e20a@10.226.240.3
    CSeq: 101 INVITE
    Date: Thu, 26 Nov 2009 02:38:49 GMT
    Supported: timer
    Supported: replaces
    User-Agent: B2BUA
    Max-Forwards: 70
    Allow: INVITE,OPTIONS,INFO,BYE,CANCEL,ACK,PRACK,UPDATE,
      REFER,SUBSCRIBE,NOTIFY,PUBLISH
    Allow-Events: presence,kpml 
	Min-SE: 90
    Contact: &lt;sip:2000@10.226.240.3:5060;transport=tcp&gt;;isfocus;src
    Via: SIP/2.0/TCP 10.226.240.3:5060;branch=z9hG4bKdf6b622b648d9
    Session-Expires: 1800
    Content-Type: multipart/mixed;boundary=foobar
    Content-Length: [length]
    
    --foobar
    Content-Type: application/sdp
    
    v=0
    o=SRS 0 0 IN IP4 10.226.240.3
    c=IN IP4 10.226.240.3
    t=0 0
    m=audio 12241 RTP/AVP 0 4 8
    a=sendonly
    a=label:1
    
    --foobar
    Content-Type: application/rs-metadata
    Content-Disposition: recording-session
    
    [metadata content]

        Figure 8: Sample INVITE request for the recording session

   </pre>
<p id="rfc.section.5.3.p.5">Further updates to recording metadata can be deliverd as a sequence events reported in SIP UPDATE or reINVITE requests and the SRS must receive the sequence of events in order.  Since there can only be a single INVITE or UPDATE transaction happening at a time within a SIP dialog, using sequence number CSeq in the dialog can be a reliable way for the SRS to identify the receipt of the next metadata update.</p>
<p id="rfc.section.5.3.p.6">At any time during Recording Session, the SRC may send a new metadata snapshot in SIP UPDATE or reINVITE request.  All subsequent metadata updates will be based on the new metadata snapshot.</p>
<h1 id="rfc.section.5.3.1">
<a href="#rfc.section.5.3.1">5.3.1.</a> <a href="#metadata_request" id="metadata_request">Requesting for metadata snapshot</a>
</h1>
<p id="rfc.section.5.3.1.p.1">The SRS may send an INFO request to request for a metadata snapshot any time after the Recording Session has been established.  The INFO package is "recording-session-srs".  The format of the metadata snapshot request is described in <a href="#I-D.ram-siprec-metadata">[I-D.ram-siprec-metadata]</a>.  This request allows the SRS to request for a metadata snapshot from the SRC, and is used in scenarios where the SRS is failing to process further metadata incremental updates.  Failure scenarios can include failure to parse metadata information (syntax error), failure to match metadata information with the current metadata snapshot (semantic error), or failure at the SRS.  The SRS should include the reason why a snapshot request is being made.</p>
<p id="rfc.section.5.3.1.p.2">When the SRC receives the INFO request for a metadata snapshot, the SRC should wait for any existing dialog modifying transactions to complete and then send a UPDATE request with a new metadata snapshot.  All subsequent metadata updates sent by the SRC will be based on the new metadata snapshot.</p>
<h1 id="rfc.section.5.3.2">
<a href="#rfc.section.5.3.2">5.3.2.</a> <a href="#realtime_control" id="realtime_control">Recording Pause and Resume</a>
</h1>
<p id="rfc.section.5.3.2.p.1">To temporarily discontinue streaming and collection of recorded media from the SRC to the SRS, the SRC must send a reINVITE and set a=inactive for each recorded media stream to be paused.</p>
<p id="rfc.section.5.3.2.p.2">To resume streaming and collection of recorded media, the SRC must send a reINVITE and set a=sendonly for each recorded media stream to resume.</p>
<p id="rfc.section.5.3.2.p.3">Note that when a media stream in the CS is muted/unmuted, this information may conveyed in the metadata by the SRC.  The SRC should not modify the recorded media stream with a=inactive for mute since this operation is reserved for pausing the RS media.</p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#recording_aware_UA" id="recording_aware_UA">SIP Extensions for Recording-aware User Agents</a>
</h1>
<p id="rfc.section.6.p.1">The following sections describe SIP extensions for recording-aware UA.</p>
<h1 id="rfc.section.6.1">
<a href="#rfc.section.6.1">6.1.</a> Recording awareness</h1>
<p id="rfc.section.6.1.p.1">A recording-aware UA MUST include the 'a=recording-aware' SDP attribute to indicate that the user agent can accept other recording SDP attributes listed in this section. This is a session level attribute.</p>
<p id="rfc.section.6.1.p.2">If the offerer is recording-aware and the answerer is also recording-aware, the answer MUST contain the recording-aware attribute.</p>
<p id="rfc.section.6.1.p.3">If the offerer is not recording-aware, the answerer MUST be prepared to provide recording indication through other existing mechanisms such as in-band media.</p>
<h1 id="rfc.section.6.2">
<a href="#rfc.section.6.2">6.2.</a> Providing recording indication</h1>
<p id="rfc.section.6.2.p.1">While there are existing mechanisms for providing an indication that a CS is being recorded, these mechanisms are usually delivered on the CS media streams such as playing an in-band tone or an announcement to the participants.  A new SDP attribute is introduced to allow a recording-aware UA to render recording indication at the user interface.</p>
<p id="rfc.section.6.2.p.2">The 'record' SDP attribute may appear at the session level or the media level, and may appear in either SDP offer or answer.  When the attribute is set at the session level, then the recording indication applies to all media streams within the session.  When the attribute is set at the media level, then the recording indication applies to the specified media stream only. The following is the ABNF of the 'record' attribute:</p>
<p></p>

<dl>
<dt></dt>
<dd style="margin-left: 8">record-attr      = "a=record:" indication</dd>
<dt></dt>
<dd style="margin-left: 8">indication       = "on" / "off" / "paused"</dd>
</dl>

<p> </p>
<p></p>

<dl>
<dt>on</dt>
<dd style="margin-left: 8">Recording is in progress.</dd>
<dt>off</dt>
<dd style="margin-left: 8">No recording is in progress.</dd>
<dt>paused</dt>
<dd style="margin-left: 8">Recording is in progress by media is paused.</dd>
</dl>
<h1 id="rfc.section.6.3">
<a href="#rfc.section.6.3">6.3.</a> <a href="#record_request" id="record_request">Recording preference</a>
</h1>
<p id="rfc.section.6.3.p.1">A recording-aware UA involved in a CS may request the CS to be recorded or not recorded.  This indication of recording preference may be sent at session establishment time or during the session.</p>
<p id="rfc.section.6.3.p.2">A new SDP attribute "recordpref" is introduced. The SDP attribute may appear at the session level or the media level and can only appear in an SDP offer.  When the attribute is set at the session level, then the recording indication applies to all media streams within the session.  When the attribute is set at the media level, then the recording indication applies to the specified media stream only. The following is the ABNF of the recordpref attribute:</p>
<p></p>

<dl>
<dt></dt>
<dd style="margin-left: 8">recordpref-attr      = "a=recordpref:" pref</dd>
<dt></dt>
<dd style="margin-left: 8">pref       = "record" / "norecord" / "pause" / "resume"</dd>
</dl>

<p> </p>
<p></p>

<dl>
<dt>record</dt>
<dd style="margin-left: 8">Request for recording if it has not already been started.</dd>
<dt>norecord</dt>
<dd style="margin-left: 8">Request for no recording. If recording has already been started, then this preference indicates a request to stop recording.</dd>
<dt>pause</dt>
<dd style="margin-left: 8">Request to pause recording if recording is currently in progress.</dd>
<dt>resume</dt>
<dd style="margin-left: 8">Request to resume recording if recording is currently paused.</dd>
</dl>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#iana" id="iana">IANA Considerations</a>
</h1>
<h1 id="rfc.section.7.1">
<a href="#rfc.section.7.1">7.1.</a> New Content-Disposition Parameter Registrations</h1>
<p id="rfc.section.7.1.p.1">This document registers a new "disposition-type" value in Content-Disposition header: recording-session.</p>
<p id="rfc.section.7.1.p.2">recording-session   the body describes the metadata information about the recording session</p>
<h1 id="rfc.section.7.2">
<a href="#rfc.section.7.2">7.2.</a> Media Type Registration</h1>
<h1 id="rfc.section.7.2.1">
<a href="#rfc.section.7.2.1">7.2.1.</a> Registration of MIME Type application/rs-metadata</h1>
<p id="rfc.section.7.2.1.p.1">This document registers the application/rs-metadata MIME media type in order to describe the recording session metadata. This media type is defined by the following information:</p>
<p id="rfc.section.7.2.1.p.2">Media type name: application</p>
<p id="rfc.section.7.2.1.p.3">Media subtype name: rs-metadata</p>
<p id="rfc.section.7.2.1.p.4">Required parameters: none</p>
<p id="rfc.section.7.2.1.p.5">Options parameters: none</p>
<h1 id="rfc.section.7.2.2">
<a href="#rfc.section.7.2.2">7.2.2.</a> Registration of MIME Type application/rs-metadata-request</h1>
<p id="rfc.section.7.2.2.p.1">This document registers the application/rs-metadata-request MIME media type in order to describe a recording session metadata snapshot request. This media type is defined by the following information:</p>
<p id="rfc.section.7.2.2.p.2">Media type name: application</p>
<p id="rfc.section.7.2.2.p.3">Media subtype name: rs-metadata-request</p>
<p id="rfc.section.7.2.2.p.4">Required parameters: none</p>
<p id="rfc.section.7.2.2.p.5">Options parameters: none</p>
<h1 id="rfc.section.7.3">
<a href="#rfc.section.7.3">7.3.</a> Info Package</h1>
<p id="rfc.section.7.3.p.1">This document registers a new INFO package for transpoting metadata requests from the SRS within a Recording Session.</p>
<p id="rfc.section.7.3.p.2">Info Package Name: recording-session-srs</p>
<p id="rfc.section.7.3.p.3">Reference: [RFCXXXX]</p>
<h1 id="rfc.section.7.4">
<a href="#rfc.section.7.4">7.4.</a> SDP Attributes</h1>
<p id="rfc.section.7.4.p.1">This document registers the following new SDP attributes.</p>
<h1 id="rfc.section.7.4.1">
<a href="#rfc.section.7.4.1">7.4.1.</a> 'recording-aware' SDP Attribute</h1>
<p id="rfc.section.7.4.1.p.1">Attribute name: recording-aware</p>
<p id="rfc.section.7.4.1.p.2">Type of attribute: session level</p>
<p id="rfc.section.7.4.1.p.3">Subject to charset: no</p>
<p id="rfc.section.7.4.1.p.4">This attribute indicates that the user agent supports recording extensions. This is a property attribute which does not take a value.</p>
<h1 id="rfc.section.7.4.2">
<a href="#rfc.section.7.4.2">7.4.2.</a> 'record' SDP Attribute</h1>
<p id="rfc.section.7.4.2.p.1">Attribute name: record</p>
<p id="rfc.section.7.4.2.p.2">Long form attribute name: Recording Indication</p>
<p id="rfc.section.7.4.2.p.3">Type of attribute: session level or media level</p>
<p id="rfc.section.7.4.2.p.4">Subject to charset: no</p>
<p id="rfc.section.7.4.2.p.5">This attribute provides the recording indication for the session or media stream.</p>
<p id="rfc.section.7.4.2.p.6">Allowed attribute values: on, off, paused</p>
<h1 id="rfc.section.7.4.3">
<a href="#rfc.section.7.4.3">7.4.3.</a> 'recordpref' SDP Attribute</h1>
<p id="rfc.section.7.4.3.p.1">Attribute name: recordpref</p>
<p id="rfc.section.7.4.3.p.2">Long form attribute name: Recording Preference</p>
<p id="rfc.section.7.4.3.p.3">Type of attribute: session level or media level</p>
<p id="rfc.section.7.4.3.p.4">Subject to charset: no</p>
<p id="rfc.section.7.4.3.p.5">This attribute provides the recording indication for the session or media stream.</p>
<p id="rfc.section.7.4.3.p.6">Allowed attribute values: nopref, record, norecord, pause, resume</p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> <a href="#Security" id="Security">Security Considerations</a>
</h1>
<p id="rfc.section.8.p.1">The recording session is fundamentally a standard SIP dialog <a href="#RFC3261">[RFC3261]</a>, therefore, the recording session can reuse any of the existing SIP security mechanism available for securing the recorded media as well as metadata.</p>
<h1 id="rfc.section.8.1">
<a href="#rfc.section.8.1">8.1.</a> <a href="#authentication" id="authentication">Authentication and Authorization</a>
</h1>
<p id="rfc.section.8.1.p.1">The recording session reuses the SIP mechanism to challenge requests that is based on HTTP authentication.  The mechanism relies on 401 and 407 SIP responses as well as other SIP header fields for carrying challenges and credentials.</p>
<p id="rfc.section.8.1.p.2">The SRS may have its own set of recording policies to authorize recording requests from the SRC. The use of recording policies is outside the scope of the SIPREC protocol.</p>
<h1 id="rfc.references">
<a href="#rfc.references">9.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">9.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2804">[RFC2804]</b></td>
<td class="top">
<a>IAB</a><a>IESG</a>, "<a href="http://tools.ietf.org/html/rfc2804">IETF Policy on Wiretapping</a>", RFC 2804, May 2000.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3261">[RFC3261]</b></td>
<td class="top">
<a>Rosenberg, J.</a>, <a>Schulzrinne, H.</a>, <a>Camarillo, G.</a>, <a>Johnston, A.</a>, <a>Peterson, J.</a>, <a>Sparks, R.</a>, <a>Handley, M.</a> and <a>E. Schooler</a>, "<a href="http://tools.ietf.org/html/rfc3261">SIP: Session Initiation Protocol</a>", RFC 3261, June 2002.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3265">[RFC3265]</b></td>
<td class="top">
<a>Roach, A.B.</a>, "<a href="http://tools.ietf.org/html/rfc3265">Session Initiation Protocol (SIP)-Specific Event Notification</a>", RFC 3265, June 2002.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4574">[RFC4574]</b></td>
<td class="top">
<a>Levin, O.</a> and <a>G. Camarillo</a>, "<a href="http://tools.ietf.org/html/rfc4574">The Session Description Protocol (SDP) Label Attribute</a>", RFC 4574, August 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3840">[RFC3840]</b></td>
<td class="top">
<a>Rosenberg, J.</a>, <a>Schulzrinne, H.</a> and <a>P. Kyzivat</a>, "<a href="http://tools.ietf.org/html/rfc3840">Indicating User Agent Capabilities in the Session Initiation Protocol (SIP)</a>", RFC 3840, August 2004.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3841">[RFC3841]</b></td>
<td class="top">
<a>Rosenberg, J.</a>, <a>Schulzrinne, H.</a> and <a>P. Kyzivat</a>, "<a href="http://tools.ietf.org/html/rfc3841">Caller Preferences for the Session Initiation Protocol (SIP)</a>", RFC 3841, August 2004.</td>
</tr>
<tr>
<td class="reference"><b id="RFC6086">[RFC6086]</b></td>
<td class="top">
<a>Holmberg, C.</a>, <a>Burger, E.</a> and <a>H. Kaplan</a>, "<a href="http://tools.ietf.org/html/rfc6086">Session Initiation Protocol (SIP) INFO Method and Package Framework</a>", RFC 6086, January 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-siprec-req">[I-D.ietf-siprec-req]</b></td>
<td class="top">
<a>Rehor, K</a>, <a>Portman, L</a>, <a>Hutton, A</a> and <a>R Jain</a>, "<a href="http://tools.ietf.org/html/draft-ietf-siprec-req-12">Use Cases and Requirements for SIP-based Media Recording (SIPREC)</a>", Internet-Draft draft-ietf-siprec-req-12, June 2011.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">9.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="I-D.ietf-siprec-architecture">[I-D.ietf-siprec-architecture]</b></td>
<td class="top">
<a>Hutton, A</a>, <a>Portman, L</a>, <a>Jain, R</a> and <a>K Rehor</a>, "<a href="http://tools.ietf.org/html/draft-ietf-siprec-architecture-03">An Architecture for Media Recording using the Session Initiation Protocol</a>", Internet-Draft draft-ietf-siprec-architecture-03, October 2011.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ram-siprec-metadata">[I-D.ram-siprec-metadata]</b></td>
<td class="top">
<a>R, R</a>, <a>R, P</a> and <a>P Kyzivat</a>, "<a href="http://tools.ietf.org/html/draft-ram-siprec-metadata-04">Session Initiation Protocol (SIP) Recording Metadata</a>", Internet-Draft draft-ram-siprec-metadata-04, March 2011.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4508">[RFC4508]</b></td>
<td class="top">
<a>Levin, O.</a> and <a>A. Johnston</a>, "<a href="http://tools.ietf.org/html/rfc4508">Conveying Feature Tags with the Session Initiation Protocol (SIP) REFER Method</a>", RFC 4508, May 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4579">[RFC4579]</b></td>
<td class="top">
<a>Johnston, A.</a> and <a>O. Levin</a>, "<a href="http://tools.ietf.org/html/rfc4579">Session Initiation Protocol (SIP) Call Control - Conferencing for User Agents</a>", BCP 119, RFC 4579, August 2006.</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Leon Portman</span> editor
	  <span class="n hidden">
		<span class="family-name">Portman</span>
	  </span>
	</span>
	<span class="org vcardline">NICE Systems</span>
	<span class="adr">
	  <span>8 Hapnina</span>

	  <span class="vcardline">
		<span class="locality">Ra'anana</span>,  
		<span class="region"></span>
		<span class="code">43017</span>
	  </span>
	  <span class="country-name vcardline">Israel</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:leon.portman@nice.com">leon.portman@nice.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Henry Lum</span> 
	  <span class="n hidden">
		<span class="family-name">Lum</span>
	  </span>
	</span>
	<span class="org vcardline">Genesys, Alcatel-Lucent</span>
	<span class="adr">
	  <span>1380 Rodick Road, Suite 200</span>

	  <span class="vcardline">
		<span class="locality">Markham</span>,  
		<span class="region">Ontario</span> 
		<span class="code">L3R4G5</span>
	  </span>
	  <span class="country-name vcardline">Canada</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:henry.lum@genesyslab.com">henry.lum@genesyslab.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Alan Johnston</span> 
	  <span class="n hidden">
		<span class="family-name">Johnston</span>
	  </span>
	</span>
	<span class="org vcardline">Avaya</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality">St. Louis</span>,  
		<span class="region">MO</span> 
		<span class="code">63124</span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:alan.b.johnston@gmail.com">alan.b.johnston@gmail.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Andrew Hutton</span> 
	  <span class="n hidden">
		<span class="family-name">Hutton</span>
	  </span>
	</span>
	<span class="org vcardline">Siemens Enterprise Communications</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:andrew.hutton@siemens-enterprise.com%20">andrew.hutton@siemens-enterprise.com </a></span>

  </address>
</div>

</body>
</html>