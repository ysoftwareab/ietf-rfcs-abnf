



Network Working Group                                           K. Patel
Internet-Draft                                              Arrcus, Inc.
Intended status: Standards Track                               A. Lindem
Expires: January 27, 2021                                  Cisco Systems
                                                                S. Zandi
                                                                LinkedIn
                                                           W. Henderickx
                                                                   Nokia
                                                           July 26, 2020


           Shortest Path Routing Extensions for BGP Protocol
                       draft-ietf-lsvr-bgp-spf-10

Abstract

   Many Massively Scaled Data Centers (MSDCs) have converged on
   simplified layer 3 routing.  Furthermore, requirements for
   operational simplicity have led many of these MSDCs to converge on
   BGP as their single routing protocol for both their fabric routing
   and their Data Center Interconnect (DCI) routing.  This document
   describes a solution which leverages BGP Link-State distribution and
   the Shortest Path First (SPF) algorithm similar to Internal Gateway
   Protocols (IGPs) such as OSPF.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on January 27, 2021.

Copyright Notice

   Copyright (c) 2020 IETF Trust and the persons identified as the
   document authors.  All rights reserved.





Patel, et al.           Expires January 27, 2021                [Page 1]

Internet-Draft         BGP Protocol SPF Extensions             July 2020


   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   3
     1.1.  BGP Shortest Path First (SPF) Motivation  . . . . . . . .   4
     1.2.  Requirements Language . . . . . . . . . . . . . . . . . .   5
   2.  BGP Peering Models  . . . . . . . . . . . . . . . . . . . . .   5
     2.1.  BGP Single-Hop Peering on Network Node Connections  . . .   5
     2.2.  BGP Peering Between Directly Connected Network Nodes  . .   5
     2.3.  BGP Peering in Route-Reflector or Controller Topology . .   6
   3.  BGP-LS Shortest Path Routing (SPF) SAFI . . . . . . . . . . .   6
   4.  Extensions to BGP-LS  . . . . . . . . . . . . . . . . . . . .   6
     4.1.  Node NLRI Usage . . . . . . . . . . . . . . . . . . . . .   7
       4.1.1.  Node NLRI Attribute SPF Capability TLV  . . . . . . .   7
       4.1.2.  BGP-LS Node NLRI Attribute SPF Status TLV . . . . . .   8
     4.2.  Link NLRI Usage . . . . . . . . . . . . . . . . . . . . .   8
       4.2.1.  BGP-LS Link NLRI Attribute Prefix-Length TLVs . . . .   9
       4.2.2.  BGP-LS Link NLRI Attribute SPF Status TLV . . . . . .   9
     4.3.  Prefix NLRI Usage . . . . . . . . . . . . . . . . . . . .  10
       4.3.1.  BGP-LS Prefix NLRI Attribute SPF Status TLV . . . . .  10
     4.4.  BGP-LS Attribute Sequence-Number TLV  . . . . . . . . . .  10
   5.  Decision Process with SPF Algorithm . . . . . . . . . . . . .  11
     5.1.  Phase-1 BGP NLRI Selection  . . . . . . . . . . . . . . .  12
     5.2.  Dual Stack Support  . . . . . . . . . . . . . . . . . . .  13
     5.3.  SPF Calculation based on BGP-LS NLRI  . . . . . . . . . .  13
     5.4.  NEXT_HOP Manipulation . . . . . . . . . . . . . . . . . .  16
     5.5.  IPv4/IPv6 Unicast Address Family Interaction  . . . . . .  16
     5.6.  NLRI Advertisement and Convergence  . . . . . . . . . . .  17
       5.6.1.  Link/Prefix Failure Convergence . . . . . . . . . . .  17
       5.6.2.  Node Failure Convergence  . . . . . . . . . . . . . .  17
     5.7.  Error Handling  . . . . . . . . . . . . . . . . . . . . .  18
   6.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .  18
   7.  Security Considerations . . . . . . . . . . . . . . . . . . .  18
   8.  Management Considerations . . . . . . . . . . . . . . . . . .  18
     8.1.  Configuration . . . . . . . . . . . . . . . . . . . . . .  18
     8.2.  Operational Data  . . . . . . . . . . . . . . . . . . . .  19
   9.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .  19
   10. Contributors  . . . . . . . . . . . . . . . . . . . . . . . .  19
   11. References  . . . . . . . . . . . . . . . . . . . . . . . . .  20



Patel, et al.           Expires January 27, 2021                [Page 2]

Internet-Draft         BGP Protocol SPF Extensions             July 2020


     11.1.  Normative References . . . . . . . . . . . . . . . . . .  20
     11.2.  Information References . . . . . . . . . . . . . . . . .  21
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  22

1.  Introduction

   Many Massively Scaled Data Centers (MSDCs) have converged on
   simplified layer 3 routing.  Furthermore, requirements for
   operational simplicity have led many of these MSDCs to converge on
   BGP [RFC4271] as their single routing protocol for both their fabric
   routing and their Data Center Interconnect (DCI) routing.
   Requirements and procedures for using BGP are described in [RFC7938].
   This document describes an alternative solution which leverages BGP-
   LS [RFC7752] and the Shortest Path First algorithm similar to
   Internal Gateway Protocols (IGPs) such as OSPF [RFC2328].

   [RFC4271] defines the Decision Process that is used to select routes
   for subsequent advertisement by applying the policies in the local
   Policy Information Base (PIB) to the routes stored in its Adj-RIBs-
   In.  The output of the Decision Process is the set of routes that are
   announced by a BGP speaker to its peers.  These selected routes are
   stored by a BGP speaker in the speaker's Adj-RIBs-Out according to
   policy.

   [RFC7752] describes a mechanism by which link-state and TE
   information can be collected from networks and shared with external
   components using BGP.  This is achieved by defining NLRI advertised
   within the BGP-LS/BGP-LS-SPF AFI/SAFI.  The BGP-LS extensions defined
   in [RFC7752] makes use of the Decision Process defined in [RFC4271].

   This document augments [RFC7752] by replacing its use of the existing
   Decision Process.  Rather than reusing the BGP-LS SAFI, the BGP-LS-
   SPF SAFI is introduced to insure backward compatibility.  The Phase 1
   and 2 decision functions of the Decision Process are replaced with
   the Shortest Path First (SPF) algorithm also known as the Dijkstra
   algorithm.  The Phase 3 decision function is also simplified since it
   is no longer dependent on the previous phases.  This solution avails
   the benefits of both BGP and SPF-based IGPs.  These include TCP based
   flow-control, no periodic link-state refresh, and completely
   incremental NLRI advertisement.  These advantages can reduce the
   overhead in MSDCs where there is a high degree of Equal Cost Multi-
   Path (ECMPs) and the topology is very stable.  Additionally, using an
   SPF-based computation can support fast convergence and the
   computation of Loop-Free Alternatives (LFAs) [RFC5286] in the event
   of link failures.  Furthermore, a BGP based solution lends itself to
   multiple peering models including those incorporating route-
   reflectors [RFC4456] or controllers.




Patel, et al.           Expires January 27, 2021                [Page 3]

Internet-Draft         BGP Protocol SPF Extensions             July 2020


   Support for Multiple Topology Routing (MTR) as described in [RFC4915]
   is an area for further study dependent on deployment requirements.

1.1.  BGP Shortest Path First (SPF) Motivation

   Given that [RFC7938] already describes how BGP could be used as the
   sole routing protocol in an MSDC, one might question the motivation
   for defining an alternate BGP deployment model when a mature solution
   exists.  For both alternatives, BGP offers the operational benefits
   of a single routing protocol.  However, BGP SPF offers some unique
   advantages above and beyond standard BGP distance-vector routing.

   A primary advantage is that all BGP speakers in the BGP SPF routing
   domain will have a complete view of the topology.  This will allow
   support for ECMP, IP fast-reroute (e.g., Loop-Free Alternatives),
   Shared Risk Link Groups (SRLGs), and other routing enhancements
   without advertisement of addition BGP paths or other extensions.  In
   short, the advantages of an IGP such as OSPF [RFC2328] are availed in
   BGP.

   With the simplified BGP decision process as defined in Section 5.1,
   NLRI changes can be disseminated throughout the BGP routing domain
   much more rapidly (equivalent to IGPs with the proper
   implementation).

   Another primary advantage is a potential reduction in NLRI
   advertisement.  With standard BGP distance-vector routing, a single
   link failure may impact 100s or 1000s prefixes and result in the
   withdrawal or re-advertisement of the attendant NLRI.  With BGP SPF,
   only the BGP speakers corresponding to the link NLRI need withdraw
   the corresponding BGP-LS Link NLRI.  This advantage will contribute
   to both faster convergence and better scaling.

   With controller and route-reflector peering models, BGP SPF
   advertisement and distributed computation require a minimal number of
   sessions and copies of the NLRI since only the latest version of the
   NLRI from the originator is required.  Given that verification of the
   adjacencies is done outside of BGP (see Section 2), each BGP speaker
   will only need as many sessions and copies of the NLRI as required
   for redundancy (e.g., one for the SPF computation and another for
   backup).  Functions such as Optimized Route Reflection (ORR) are
   supported without extension by virtue of the primary advantages.
   Additionally, a controller could inject topology that is learned
   outside the BGP routing domain.

   Given that controllers are already consuming BGP-LS NLRI [RFC7752],
   reusing for the BGP-LS SPF leverages the existing controller
   implementations.



Patel, et al.           Expires January 27, 2021                [Page 4]

Internet-Draft         BGP Protocol SPF Extensions             July 2020


   Another potential advantage of BGP SPF is that both IPv6 and IPv4 can
   be supported in the same address family using the same topology.
   Although not described in this version of the document, multi-
   topology extensions can be used to support separate IPv4, IPv6,
   unicast, and multicast topologies while sharing the same NLRI.

   Finally, the BGP SPF topology can be used as an underlay for other
   BGP address families (using the existing model) and realize all the
   above advantages.  A simplified peering model using IPv6 link-local
   addresses as next-hops can be deployed similar to [RFC5549].

1.2.  Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "NOT RECOMMENDED", "MAY", and
   "OPTIONAL" in this document are to be interpreted as described in BCP
   14 [RFC2119] [RFC8174] when, and only when, they appear in all
   capitals, as shown here.

2.  BGP Peering Models

   Depending on the requirements, scaling, and capabilities of the BGP
   speakers, various peering models are supported.  The only requirement
   is that all BGP speakers in the BGP SPF routing domain receive link-
   state NLRI on a timely basis, run an SPF calculation, and update
   their data plane appropriately.  The content of the Link NLRI is
   described in Section 4.2.

2.1.  BGP Single-Hop Peering on Network Node Connections

   The simplest peering model is the one described in section 5.2.1 of
   [RFC7938].  In this model, EBGP single-hop sessions are established
   over direct point-to-point links interconnecting the SPF domain
   nodes.  For the purposes of BGP SPF, Link NLRI is only advertised if
   a single-hop BGP session has been established and the Link-State/SPF
   address family capability has been exchanged [RFC4790] on the
   corresponding session.  If the session goes down, the corresponding
   Link NLRI will be withdrawn.  Topologically, this would be equivalent
   to the peering model in [RFC7938] where there is a BGP session on
   every link in the data center switch fabric.

2.2.  BGP Peering Between Directly Connected Network Nodes

   In this model, BGP speakers peer with all directly connected network
   nodes but the sessions may be multi-hop and the direct connection
   discovery and liveliness detection for those connections are
   independent of the BGP protocol.  How this is accomplished is outside
   the scope of this document.  Consequently, there will be a single



Patel, et al.           Expires January 27, 2021                [Page 5]

Internet-Draft         BGP Protocol SPF Extensions             July 2020


   session even if there are multiple direct connections between BGP
   speakers.  For the purposes of BGP SPF, Link NLRI is advertised as
   long as a BGP session has been established, the Link-State/SPF
   address family capability has been exchanged [RFC4790] and the
   corresponding link is considered is up and considered operational.
   This is much like the previous peering model only peering is on a
   single loopback address and the switch fabric links can be
   unnumbered.  However, there will be the same number of sessions as
   with the previous peering model unless there are parallel links
   between switches in the fabric.

2.3.  BGP Peering in Route-Reflector or Controller Topology

   In this model, BGP speakers peer solely with one or more Route
   Reflectors [RFC4456] or controllers.  As in the previous model,
   direct connection discovery and liveliness detection for those
   connections are done outside the BGP protocol.  More specifically,
   the Liveliness detection is done using BFD protocol described in
   [RFC5880].  For the purposes of BGP SPF, Link NLRI is advertised as
   long as the corresponding link is up and considered operational.

   This peering model, known as sparse peering, allows for many fewer
   BGP sessions and, consequently, instances of the same NLRI received
   from multiple peers.  It is discussed in greater detail in
   [I-D.ietf-lsvr-applicability].

3.  BGP-LS Shortest Path Routing (SPF) SAFI

   In order to replace the Phase 1 and 2 decision functions of the
   existing Decision Process with an SPF-based Decision Process and
   streamline the Phase 3 decision functions in a backward compatible
   manner, this draft introduces the BGP-LS-SFP SAFI for BGP-LS SPF
   operation.  The BGP-LS-SPF (AFI 16388 / SAFI TBD1) [RFC4790] is
   allocated by IANA as specified in the Section 6.  A BGP speaker using
   the BGP-LS SPF extensions described herein MUST exchange the AFI/SAFI
   using Multiprotocol Extensions Capability Code [RFC4760] with other
   BGP speakers in the SPF routing domain.

4.  Extensions to BGP-LS

   [RFC7752] describes a mechanism by which link-state and TE
   information can be collected from networks and shared with external
   components using BGP protocol.  It describes both the definition of
   BGP-LS NLRI that describes links, nodes, and prefixes comprising IGP
   link-state information and the definition of a BGP path attribute
   (BGP-LS attribute) that carries link, node, and prefix properties and
   attributes, such as the link and prefix metric or auxiliary Router-
   IDs of nodes, etc.



Patel, et al.           Expires January 27, 2021                [Page 6]

Internet-Draft         BGP Protocol SPF Extensions             July 2020


   The BGP protocol will be used in the Protocol-ID field specified in
   table 1 of [I-D.ietf-idr-bgpls-segment-routing-epe].  The local and
   remote node descriptors for all NLRI will be the BGP Router-ID (TLV
   516) and either the AS Number (TLV 512) [RFC7752] or the BGP
   Confederation Member (TLV 517) [RFC8402].  However, if the BGP
   Router-ID is known to be unique within the BGP Routing domain, it can
   be used as the sole descriptor.

4.1.  Node NLRI Usage

   The BGP Node NLRI will be advertised unconditionally by all routers
   in the BGP SPF routing domain.

4.1.1.  Node NLRI Attribute SPF Capability TLV

   The SPF capability is a new Node Attribute TLV that will be added to
   those defined in table 7 of [RFC7752].  The new attribute TLV will
   only be applicable when BGP is specified in the Node NLRI Protocol ID
   field.  The TBD TLV type will be defined by IANA.  The new Node
   Attribute TLV will contain a single-octet SPF algorithm as defined in
   [RFC8402].

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |              Type             |             Length            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | SPF Algorithm |
      +-+-+-+-+-+-+-+-+

   The SPF Algorithm may take the following values:

   0 - Normal Shortest Path First (SPF) algorithm based on link
       metric. This is the standard shortest path algorithm as
       computed by the IGP protocol.  Consistent with the deployed
       practice for link-state protocols, Algorithm 0 permits any
       node to overwrite the SPF path with a different path based on
       its local policy.
   1 - Strict Shortest Path First (SPF) algorithm based on link
       metric. The algorithm is identical to Algorithm 0 but Algorithm
       1 requires that all nodes along the path will honor the SPF
       routing decision.  Local policy at the node claiming support for
       Algorithm 1 MUST NOT alter the SPF paths computed by Algorithm 1.

   Note that usage of Strict Shortest Path First (SPF) algorithm is
   defined in the IGP algorithm registry but usage is restricted to
   [I-D.ietf-idr-bgpls-segment-routing-epe].  Hence, its usage for BGP-
   LS SPF is out of scope.



Patel, et al.           Expires January 27, 2021                [Page 7]

Internet-Draft         BGP Protocol SPF Extensions             July 2020


   When computing the SPF for a given BGP routing domain, only BGP nodes
   advertising the SPF capability attribute will be included the
   Shortest Path Tree (SPT).

4.1.2.  BGP-LS Node NLRI Attribute SPF Status TLV

   A BGP-LS Attribute TLV to BGP-LS Node NLRI is defined to indicate the
   status of the node with respect to the BGP SPF calculation.  This
   will be used to rapidly take a node out of service or to indicate the
   node is not to be used for transit (i.e., non-local) traffic.  If the
   SPF Status TLV is not included with the Node NLRI, the node is
   considered to be up and is available for transit traffic.

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |   TBD Type    |                       Length                  |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | SPF Status    |
      +-+-+-+-+-+-+-+-+

       BGP Status Values: 0 - Reserved
                          1 - Node Unreachable with respect to BGP SPF
                          2 - Node does not support transit with respect
                              to BGP SPF
                      3-254 - Undefined
                        255 - Reserved


4.2.  Link NLRI Usage

   The criteria for advertisement of Link NLRI are discussed in
   Section 2.

   Link NLRI is advertised with local and remote node descriptors as
   described above and unique link identifiers dependent on the
   addressing.  For IPv4 links, the links local IPv4 (TLV 259) and
   remote IPv4 (TLV 260) addresses will be used.  For IPv6 links, the
   local IPv6 (TLV 261) and remote IPv6 (TLV 262) addresses will be
   used.  For unnumbered links, the link local/remote identifiers (TLV
   258) will be used.  For links supporting having both IPv4 and IPv6
   addresses, both sets of descriptors may be included in the same Link
   NLRI.  The link identifiers are described in table 5 of [RFC7752].

   The link IGP metric attribute TLV (TLV 1095) as well as any others
   required for non-SPF purposes SHOULD be advertised.  The metric value
   in this TLV is variable length dependent on specific protocol usage
   (refer to section 3.3.2.4 in [RFC7752]).  For simplicity, the BGP-LS



Patel, et al.           Expires January 27, 2021                [Page 8]

Internet-Draft         BGP Protocol SPF Extensions             July 2020


   SPF metric length will be 4 octets.  Algorithms such as setting the
   metric inversely to the link speed as done in the OSPF MIB [RFC4750]
   MAY be supported.  However, this is beyond the scope of this
   document.

4.2.1.  BGP-LS Link NLRI Attribute Prefix-Length TLVs

   Two BGP-LS Attribute TLVs to BGP-LS Link NLRI are defined to
   advertise the prefix length associated with the IPv4 and IPv6 link
   prefixes.  The prefix length is used for the optional installation of
   prefixes corresponding to Link NLRI as defined in Section 5.3.

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |      TBD IPv4 or IPv6 Type    |             Length            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | Prefix-Length |
      +-+-+-+-+-+-+-+-+

        Prefix-length - A one-octet length restricted to 1-32 for IPv4
                        Link NLRI endpoint prefixes and 1-128 for IPv6
                        Link NLRI endpoint prefixes.

4.2.2.  BGP-LS Link NLRI Attribute SPF Status TLV

   A BGP-LS Attribute TLV to BGP-LS Link NLRI is defined to indicate the
   status of the link with respect to the BGP SPF calculation.  This
   will be used to expedite convergence for link failures as discussed
   in Section 5.6.1.  If the SPF Status TLV is not included with the
   Link NLRI, the link is considered up and available.

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |   TBD Type    |                       Length                  |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | SPF Status    |
      +-+-+-+-+-+-+-+-+

       BGP Status Values: 0 - Reserved
                          1 - Link Unreachable with respect to BGP SPF
                      2-254 - Undefined
                        255 - Reserved







Patel, et al.           Expires January 27, 2021                [Page 9]

Internet-Draft         BGP Protocol SPF Extensions             July 2020


4.3.  Prefix NLRI Usage

   Prefix NLRI is advertised with a local node descriptor as described
   above and the prefix and length used as the descriptors (TLV 265) as
   described in [RFC7752].  The prefix metric attribute TLV (TLV 1155)
   as well as any others required for non-SPF purposes SHOULD be
   advertised.  For loopback prefixes, the metric should be 0.  For non-
   loopback prefixes, the setting of the metric is a local matter and
   beyond the scope of this document.

4.3.1.  BGP-LS Prefix NLRI Attribute SPF Status TLV

   A BGP-LS Attribute TLV to BGP-LS Prefix NLRI is defined to indicate
   the status of the prefix with respect to the BGP SPF calculation.
   This will be used to expedite convergence for prefix unreachability
   as discussed in Section 5.6.1.  If the SPF Status TLV is not included
   with the Prefix NLRI, the prefix is considered reachable.

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |   TBD Type    |                       Length                  |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | SPF Status    |
      +-+-+-+-+-+-+-+-+

       BGP Status Values: 0 - Reserved
                          1 - Prefix down with respect to SPF
                      2-254 - Undefined
                        255 - Reserved


4.4.  BGP-LS Attribute Sequence-Number TLV

   A new BGP-LS Attribute TLV to BGP-LS NLRI types is defined to assure
   the most recent version of a given NLRI is used in the SPF
   computation.  The TBD TLV type will be defined by IANA.  The new BGP-
   LS Attribute TLV will contain an 8-octet sequence number.  The usage
   of the Sequence Number TLV is described in Section 5.1.












Patel, et al.           Expires January 27, 2021               [Page 10]

Internet-Draft         BGP Protocol SPF Extensions             July 2020


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |              Type             |             Length            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                Sequence Number (High-Order 32 Bits)           |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                Sequence Number (Low-Order 32 Bits)            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

   Sequence Number

   The 64-bit strictly increasing sequence number is incremented for
   every version of BGP-LS NLRI originated.  BGP speakers implementing
   this specification MUST use available mechanisms to preserve the
   sequence number's strictly increasing property for the deployed life
   of the BGP speaker (including cold restarts).  One mechanism for
   accomplishing this would be to use the high-order 32 bits of the
   sequence number as a wrap/boot count that is incremented anytime the
   BGP router loses its sequence number state or the low-order 32 bits
   wrap.

   When incrementing the sequence number for each self-originated NLRI,
   the sequence number should be treated as an unsigned 64-bit value.
   If the lower-order 32-bit value wraps, the higher-order 32-bit value
   should be incremented and saved in non-volatile storage.  If by some
   chance the BGP Speaker is deployed long enough that there is a
   possibility that the 64-bit sequence number may wrap or a BGP Speaker
   completely loses its sequence number state (e.g., the BGP speaker
   hardware is replaced or experiences a cold-start), the phase 1
   decision function (see Section 5.1) rules will insure convergence,
   albeit, not immediately.

5.  Decision Process with SPF Algorithm

   The Decision Process described in [RFC4271] takes place in three
   distinct phases.  The Phase 1 decision function of the Decision
   Process is responsible for calculating the degree of preference for
   each route received from a BGP speaker's peer.  The Phase 2 decision
   function is invoked on completion of the Phase 1 decision function
   and is responsible for choosing the best route out of all those
   available for each distinct destination, and for installing each
   chosen route into the Loc-RIB.  The combination of the Phase 1 and 2
   decision functions is characterized as a Path Vector algorithm.

   The SPF based Decision process replaces the BGP best-path Decision
   process described in [RFC4271].  This process starts with selecting
   only those Node NLRI whose SPF capability TLV matches with the local



Patel, et al.           Expires January 27, 2021               [Page 11]

Internet-Draft         BGP Protocol SPF Extensions             July 2020


   BGP speaker's SPF capability TLV value.  Since Link-State NLRI always
   contains the local descriptor [RFC7752], it will only be originated
   by a single BGP speaker in the BGP routing domain.  These selected
   Node NLRI and their Link/Prefix NLRI are used to build a directed
   graph during the SPF computation.  The best paths for BGP prefixes
   are installed as a result of the SPF process.

   When BGP-LS-SPF NLRI is received, all that is required is to
   determine whether it is the best-path by examining the Node-ID and
   sequence number as described in Section 5.1.  If the received best-
   path NLRI had changed, it will be advertised to other BGP-LS-SPF
   peers.  If the attributes have changed (other than the sequence
   number), a BGP SPF calculation will be scheduled.  However, a changed
   NLRI MAY be advertised to other peers almost immediately and
   propagation of changes can approach IGP convergence times.  To
   accomplish this, the MinRouteAdvertisementIntervalTimer and
   MinASOriginationIntervalTimer [RFC4271] are not applicable to the
   BGP-LS-SPF SAFI.  Rather, SPF calculations SHOULD be triggered and
   dampened consistent with the SPF back-off algorithm specified in
   [RFC8405].

   The Phase 3 decision function of the Decision Process [RFC4271] is
   also simplified since under normal SPF operation, a BGP speaker would
   advertise the NLRI selected for the SPF to all BGP peers with the
   BGP-LS/BGP-LS-SPF AFI/SAFI.  Application of policy would not be
   prevented however its usage to best-path process would be limited as
   the SPF relies solely on link metrics.

5.1.  Phase-1 BGP NLRI Selection

   The rules for NLRI selection are greatly simplified from [RFC4271].

   1.  If the NLRI is received from the BGP speaker originating the NLRI
       (as determined by the comparing BGP Router ID in the NLRI Node
       identifiers with the BGP speaker Router ID), then it is preferred
       over the same NLRI from non-originators.  This rule will assure
       that stale NLRI is updated even if a BGP-LS router loses its
       sequence number state due to a cold-start.

   2.  If the Sequence-Number TLV is present in the BGP-LS Attribute,
       then the NLRI with the most recent, i.e., highest sequence number
       is selected.  BGP-LS NLRI with a Sequence-Number TLV will be
       considered more recent than NLRI without a BGP-LS Attribute or a
       BGP-LS Attribute that doesn't include the Sequence-Number TLV.

   3.  The final tie-breaker is the NLRI from the BGP Speaker with the
       numerically largest BGP Router ID.




Patel, et al.           Expires January 27, 2021               [Page 12]

Internet-Draft         BGP Protocol SPF Extensions             July 2020


   When a BGP speaker completely loses its sequence number state, i.e.,
   due to a cold start, or in the unlikely possibility that that
   sequence number wraps, the BGP routing domain will still converge.
   This is due to the fact that BGP speakers adjacent to the router will
   always accept self-originated NLRI from the associated speaker as
   more recent (rule # 1).  When BGP speaker reestablishes a connection
   with its peers, any existing session will be taken down and stale
   NLRI will be replaced by the new NLRI and stale NLRI will be
   discarded independent of whether or not BGP graceful restart is
   deployed, [RFC4724].  The adjacent BGP speaker will update their NLRI
   advertisements in turn until the BGP routing domain has converged.

   The modified SPF Decision Process performs an SPF calculation rooted
   at the BGP speaker using the metrics from Link and Prefix NLRI
   Attribute TLVs [RFC7752].  As a result, any attributes that would
   influence the Decision process defined in [RFC4271] like ORIGIN,
   MULTI_EXIT_DISC, and LOCAL_PREF attributes are ignored by the SPF
   algorithm.  Furthermore, the NEXT_HOP attribute value is preserved
   but otherwise ignored during the SPF or best-path.

5.2.  Dual Stack Support

   The SPF-based decision process operates on Node, Link, and Prefix
   NLRIs that support both IPv4 and IPv6 addresses.  Whether to run a
   single SPF instance or multiple SPF instances for separate AFs is a
   matter of a local implementation.  Normally, IPv4 next-hops are
   calculated for IPv4 prefixes and IPv6 next-hops are calculated for
   IPv6 prefixes.  However, an interesting use-case is deployment of
   [RFC5549] where IPv6 next-hops are calculated for both IPv4 and IPv6
   prefixes.  As stated in Section 1, support for Multiple Topology
   Routing (MTR) is an area for future study.

5.3.  SPF Calculation based on BGP-LS NLRI

   This section details the BGP-LS SPF local routing information base
   (RIB) calculation.  The router will use BGP-LS Node, Link, and Prefix
   NLRI to populate the local RIB using the following algorithm.  This
   calculation yields the set of intra-area routes associated with the
   BGP-LS domain.  A router calculates the shortest-path tree using
   itself as the root.  Variations and optimizations of the algorithm
   are valid as long as it yields the same set of routes.  The algorithm
   below supports Equal Cost Multi-Path (ECMP) routes.  Weighted Unequal
   Cost Multi-Path are out of scope.  The organization of this section
   owes heavily to section 16 of [RFC2328].

   The following abstract data structures are defined in order to
   specify the algorithm.




Patel, et al.           Expires January 27, 2021               [Page 13]

Internet-Draft         BGP Protocol SPF Extensions             July 2020


   o  Local Route Information Base (RIB) - This is abstract contains
      reachability information (i.e., next hops) for all prefixes (both
      IPv4 and IPv6) as well as the Node NLRI reachability.
      Implementations may choose to implement this as separate RIBs for
      each address family and/or Node NLRI.

   o  Link State NLRI Database (LSNDB) - Database of BGP-LS NLRI that
      facilitates access to all Node, Link, and Prefix NLRI as well as
      all the Link and Prefix NLRI corresponding to a given Node NLRI.
      Other optimization, such as, resolving bi-directional connectivity
      associations between Link NLRI are possible but of scope of this
      document.

   o  Candidate List - This is a list of candidate Node NLRI with the
      lowest cost Node NLRI at the front of the list.  It is typically
      implemented as a heap but other concrete data structures have also
      been used.

   The algorithm is comprised of the steps below:

   1.  The current local RIB is invalidated.  The local RIB is rebuilt
       during the course of the SPF computation.  The existing routing
       entries are preserved for comparison to determine changes that
       need to be installed in the global RIB.

   2.  The computing router's Node NLRI is installed in the local RIB
       with a cost of 0 and as the sole entry in the candidate list.

   3.  The Node NLRI with the lowest cost is removed from the candidate
       list for processing.  If the BGP-LS Node attribute includes an
       SPF Status TLV (Section 4.1.2) indicating the node is
       unreachable, the Node NLRI is ignored and the next lowest cost
       Node NLRI is selected from candidate list.  The Node
       corresponding to this NLRI will be referred to as the Current
       Node.  If the candidate list is empty, the SPF calculation has
       completed and the algorithm proceeds to step 6.

   4.  All the Prefix NLRI with the same Node Identifiers as the Current
       Node will be considered for installation.  The cost for each
       prefix is the metric advertised in the Prefix NLRI added to the
       cost to reach the Current Node.

       *  If the BGP-LS Prefix attribute includes an SPF Status TLV
          indicating the prefix is unreachable, the BGP-LS Prefix NLRI
          is considered unreachable and the next BGP-LS Prefix NLRI is
          examined.





Patel, et al.           Expires January 27, 2021               [Page 14]

Internet-Draft         BGP Protocol SPF Extensions             July 2020


       *  If the prefix is in the local RIB and the cost is greater than
          the Current route's metric, the Prefix NLRI does not
          contribute to the route and is ignored.

       *  If the prefix is in the local RIB and the cost is less than
          the current route's metric, the Prefix is installed with the
          Current Node's next-hops replacing the local RIB route's next-
          hops and the metric being updated.

       *  If the prefix is in the local RIB and the cost is same as the
          current route's metric, the Prefix is installed with the
          Current Node's next-hops being merged with local RIB route's
          next-hops.

   5.  All the Link NLRI with the same Node Identifiers as the Current
       Node will be considered for installation.  Each link will be
       examined and will be referred to in the following text as the
       Current Link.  The cost of the Current Link is the advertised
       metric in the Link NLRI added to the cost to reach the Current
       Node.

       *  Optionally, the prefix(es) associated with the Current Link
          are installed into the local RIB using the same rules as were
          used for Prefix NLRI in the previous steps.

       *  If the current Node NLRI attributes includes the SPF status
          TLV (Section 4.1.2) and the status indicates that the Node
          doesn't support transit, the next link for the current node is
          processed.

       *  The Current Link's endpoint Node NLRI is accessed (i.e., the
          Node NLRI with the same Node identifiers as the Link
          endpoint).  If it exists, it will be referred to as the
          Endpoint Node NLRI and the algorithm will proceed as follows:

          +  If the BGP-LS Link NLRI attribute includes an SPF Status
             TLV indicating the link is down, the BGP-LS Link NLRI is
             considered down and the next BGP-LS Link NLRI is examined.

          +  All the Link NLRI corresponding the Endpoint Node NLRI will
             be searched for a back-link NLRI pointing to the current
             node.  Both the Node identifiers and the Link endpoint
             identifiers in the Endpoint Node's Link NLRI must match for
             a match.  If there is no corresponding Link NLRI
             corresponding to the Endpoint Node NLRI, the Endpoint Node
             NLRI fails the bi-directional connectivity test and is not
             processed further.




Patel, et al.           Expires January 27, 2021               [Page 15]

Internet-Draft         BGP Protocol SPF Extensions             July 2020


          +  If the Endpoint Node NLRI is not on the candidate list, it
             is inserted based on the link cost and BGP Identifier (the
             latter being used as a tie-breaker).

          +  If the Endpoint Node NLRI is already on the candidate list
             with a lower cost, it need not be inserted again.

          +  If the Endpoint Node NLRI is already on the candidate list
             with a higher cost, it must be removed and reinserted with
             a lower cost.

       *  Return to step 3 to process the next lowest cost Node NLRI on
          the candidate list.

   6.  The local RIB is examined and changes (adds, deletes,
       modifications) are installed into the global RIB.

5.4.  NEXT_HOP Manipulation

   A BGP speaker that supports SPF extensions MAY interact with peers
   that don't support SPF extensions.  If the BGP-LS address family is
   advertised to a peer not supporting the SPF extensions described
   herein, then the BGP speaker MUST conform to the NEXT_HOP rules
   specified in [RFC4271] when announcing the Link-State address family
   routes to those peers.

   All BGP peers that support SPF extensions would locally compute the
   Loc-RIB next-hops as a result of the SPF process.  Consequently, the
   NEXT_HOP attribute is always ignored on receipt.  However, BGP
   speakers SHOULD set the NEXT_HOP address according to the NEXT_HOP
   attribute rules specified in [RFC4271].

5.5.  IPv4/IPv6 Unicast Address Family Interaction

   While the BGP-LS SPF address family and the IPv4/IPv6 unicast address
   families install routes into the same device routing tables, they
   will operate independently much the same as OSPF and IS-IS would
   operate today (i.e., "Ships-in-the-Night" mode).  There will be no
   implicit route redistribution between the BGP address families.
   However, implementation specific redistribution mechanisms SHOULD be
   made available with the restriction that redistribution of BGP-LS SPF
   routes into the IPv4 address family applies only to IPv4 routes and
   redistribution of BGP-LS SPF route into the IPv6 address family
   applies only to IPv6 routes.

   Given the fact that SPF algorithms are based on the assumption that
   all routers in the routing domain calculate the precisely the same
   SPF tree and install the same set of routes, it is RECOMMENDED that



Patel, et al.           Expires January 27, 2021               [Page 16]

Internet-Draft         BGP Protocol SPF Extensions             July 2020


   BGP-LS SPF IPv4/IPv6 routes be given priority by default when
   installed into their respective RIBs.  In common implementations the
   prioritization is governed by route preference or administrative
   distance with lower being more preferred.

5.6.  NLRI Advertisement and Convergence

5.6.1.  Link/Prefix Failure Convergence

   A local failure will prevent a link from being used in the SPF
   calculation due to the IGP bi-directional connectivity requirement.
   Consequently, local link failures should always be given priority
   over updates (e.g., withdrawing all routes learned on a session) in
   order to ensure the highest priority propagation and optimal
   convergence.

   An IGP such as OSPF [RFC2328] will stop using the link as soon as the
   Router-LSA for one side of the link is received.  With normal BGP
   advertisement, the link would continue to be used until the last copy
   of the BGP-LS Link NLRI is withdrawn.  In order to avoid this delay,
   the originator of the Link NLRI will advertise a more recent version
   of the BGP-LS Link NLRI including the SPF Status TLV Section 4.2.2
   indicating the link is down with respect to BGP SPF.  After some
   configurable period of time, e.g., 2-3 seconds, the BGP-LS Link NLRI
   can be withdrawn with no consequence.  If the link becomes available
   in that period, the originator of the BGP-LS LINK NLRI will simply
   advertise a more recent version of the BGP-LS Link NLRI without the
   SPF Status TLV in the BGP-LS Link Attributes.

   Similarly, when a prefix becomes unreachable, a more recent version
   of the BGP-LS Prefix NLRI will be advertised with the SPF Status TLV
   Section 4.3.1 indicating the prefix is unreachable in the BGP-LS
   Prefix Attributes and the prefix will be considered unreachable with
   respect to BGP SPF.  After some configurable period of time, e.g.,
   2-3 seconds, the BGP-LS Prefix NLRI can be withdrawn with no
   consequence.  If the prefix becomes reachable in that period, the
   originator of the BGP-LS Prefix NLRI will simply advertise a more
   recent version of the BGP-LS Prefix NLRI without the SPF Status TLV
   in the BGP-LS Prefix Attributes.

5.6.2.  Node Failure Convergence

   With BGP without graceful restart [RFC4724], all the NLRI advertised
   by node are implicitly withdrawn when a session failure is detected.
   If fast failure detection such as BFD is utilized, and the node is on
   the fastest converging path, the most recent versions of BGP-LS NLRI
   may be withdrawn while these versions are in-flight on longer paths.
   This will result the older version of the NLRI being used until the



Patel, et al.           Expires January 27, 2021               [Page 17]

Internet-Draft         BGP Protocol SPF Extensions             July 2020


   new versions arrive and, potentially, unnecessary route flaps.
   Therefore, BGP-LS SPF NLRI SHOULD always be retained before being
   implicitly withdrawn for a brief configurable interval, e.g., 2-3
   seconds.  This will not delay convergence since the adjacent nodes
   will detect the link failure and advertise a more recent NLRI
   indicating the link is down with respect to BGP SPF Section 5.6.1 and
   the BGP-SPF calculation will failure the bi-directional connectivity
   check.

5.7.  Error Handling

   When a BGP speaker receives a BGP Update containing a malformed SPF
   Capability TLV in the Node NLRI BGP-LS Attribute [RFC7752], it MUST
   ignore the received TLV and the Node NLRI and not pass it to other
   BGP peers as specified in [RFC7606].  When discarding a Node NLRI
   with malformed TLV, a BGP speaker SHOULD log an error for further
   analysis.

6.  IANA Considerations

   This document defines an AFI/SAFI for BGP-LS SPF operation and
   requests IANA to assign the BGP-LS/BGP-LS-SPF (AFI 16388 / SAFI TBD1)
   as described in [RFC4760].

   This document also defines five attribute TLVs for BGP-LS NLRI.  We
   request IANA to assign types for the SPF capability TLV, Sequence
   Number TLV, IPv4 Link Prefix-Length TLV, IPv6 Link Prefix-Length TLV,
   and SPF Status TLV from the "BGP-LS Node Descriptor, Link Descriptor,
   Prefix Descriptor, and Attribute TLVs" Registry.

7.  Security Considerations

   This extension to BGP does not change the underlying security issues
   inherent in the existing [RFC4271], [RFC4724], and [RFC7752].

8.  Management Considerations

   This section includes unique management considerations for the BGP-LS
   SPF address family.

8.1.  Configuration

   In addition to configuration of the BGP-LS SPF address family,
   implementations SHOULD support the configuration of the
   INITIAL_SPF_DELAY, SHORT_SPF_DELAY, LONG_SPF_DELAY, TIME_TO_LEARN,
   and HOLDDOWN_INTERVAL as documented in [RFC8405].





Patel, et al.           Expires January 27, 2021               [Page 18]

Internet-Draft         BGP Protocol SPF Extensions             July 2020


8.2.  Operational Data

   In order to troubleshoot SPF issues, implementations SHOULD support
   an SPF log including entries for previous SPF computations, Each SPF
   log entry would include the BGP-LS NLRI SPF triggering the SPF, SPF
   scheduled time, SPF start time, SPF end time, and SPF type if
   different types of SPF are supported.  Since the size of the log will
   be finite, implementations SHOULD also maintain counters for the
   total number of SPF computations of each type and the total number of
   SPF triggering events.  Additionally, to troubleshoot SPF scheduling
   and back-off [RFC8405], the current SPF back-off state, remaining
   time-to-learn, remaining holddown, last trigger event time, last SPF
   time, and next SPF time should be available.

9.  Acknowledgements

   The authors would like to thank Sue Hares, Jorge Rabadan, Boris
   Hassanov, Dan Frost, Matt Anderson, Fred Baker, and Lukas Krattiger
   for their review and comments.  Thanks to Pushpasis Sarkar for
   discussions on preventing a BGP SPF Router from being used for non-
   local traffic (i.e., transit traffic).

   The authors extend special thanks to Eric Rosen for fruitful
   discussions on BGP-LS SPF convergence as compared to IGPs.

10.  Contributors

   In addition to the authors listed on the front page, the following
   co-authors have contributed to the document.






















Patel, et al.           Expires January 27, 2021               [Page 19]

Internet-Draft         BGP Protocol SPF Extensions             July 2020


     Derek Yeung
     Arrcus, Inc.
     derek@arrcus.com

     Gunter Van De Velde
     Nokia
     gunter.van_de_velde@nokia.com

     Abhay Roy
     Arrcus, Inc.
     abhay@arrcus.com

     Venu Venugopal
     Cisco Systems
     venuv@cisco.com

     Chaitanya Yadlapalli
     AT&T
     cy098d@att.com

11.  References

11.1.  Normative References

   [I-D.ietf-idr-bgpls-segment-routing-epe]
              Previdi, S., Talaulikar, K., Filsfils, C., Patel, K., Ray,
              S., and J. Dong, "BGP-LS extensions for Segment Routing
              BGP Egress Peer Engineering", draft-ietf-idr-bgpls-
              segment-routing-epe-19 (work in progress), May 2019.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [RFC4271]  Rekhter, Y., Ed., Li, T., Ed., and S. Hares, Ed., "A
              Border Gateway Protocol 4 (BGP-4)", RFC 4271,
              DOI 10.17487/RFC4271, January 2006,
              <https://www.rfc-editor.org/info/rfc4271>.

   [RFC7606]  Chen, E., Ed., Scudder, J., Ed., Mohapatra, P., and K.
              Patel, "Revised Error Handling for BGP UPDATE Messages",
              RFC 7606, DOI 10.17487/RFC7606, August 2015,
              <https://www.rfc-editor.org/info/rfc7606>.







Patel, et al.           Expires January 27, 2021               [Page 20]

Internet-Draft         BGP Protocol SPF Extensions             July 2020


   [RFC7752]  Gredler, H., Ed., Medved, J., Previdi, S., Farrel, A., and
              S. Ray, "North-Bound Distribution of Link-State and
              Traffic Engineering (TE) Information Using BGP", RFC 7752,
              DOI 10.17487/RFC7752, March 2016,
              <https://www.rfc-editor.org/info/rfc7752>.

   [RFC8174]  Leiba, B., "Ambiguity of Uppercase vs Lowercase in RFC
              2119 Key Words", BCP 14, RFC 8174, DOI 10.17487/RFC8174,
              May 2017, <https://www.rfc-editor.org/info/rfc8174>.

   [RFC8402]  Filsfils, C., Ed., Previdi, S., Ed., Ginsberg, L.,
              Decraene, B., Litkowski, S., and R. Shakir, "Segment
              Routing Architecture", RFC 8402, DOI 10.17487/RFC8402,
              July 2018, <https://www.rfc-editor.org/info/rfc8402>.

   [RFC8405]  Decraene, B., Litkowski, S., Gredler, H., Lindem, A.,
              Francois, P., and C. Bowers, "Shortest Path First (SPF)
              Back-Off Delay Algorithm for Link-State IGPs", RFC 8405,
              DOI 10.17487/RFC8405, June 2018,
              <https://www.rfc-editor.org/info/rfc8405>.

11.2.  Information References

   [I-D.ietf-lsvr-applicability]
              Patel, K., Lindem, A., Zandi, S., and G. Dawra, "Usage and
              Applicability of Link State Vector Routing in Data
              Centers", draft-ietf-lsvr-applicability-05 (work in
              progress), March 2020.

   [RFC2328]  Moy, J., "OSPF Version 2", STD 54, RFC 2328,
              DOI 10.17487/RFC2328, April 1998,
              <https://www.rfc-editor.org/info/rfc2328>.

   [RFC4456]  Bates, T., Chen, E., and R. Chandra, "BGP Route
              Reflection: An Alternative to Full Mesh Internal BGP
              (IBGP)", RFC 4456, DOI 10.17487/RFC4456, April 2006,
              <https://www.rfc-editor.org/info/rfc4456>.

   [RFC4724]  Sangli, S., Chen, E., Fernando, R., Scudder, J., and Y.
              Rekhter, "Graceful Restart Mechanism for BGP", RFC 4724,
              DOI 10.17487/RFC4724, January 2007,
              <https://www.rfc-editor.org/info/rfc4724>.

   [RFC4750]  Joyal, D., Ed., Galecki, P., Ed., Giacalone, S., Ed.,
              Coltun, R., and F. Baker, "OSPF Version 2 Management
              Information Base", RFC 4750, DOI 10.17487/RFC4750,
              December 2006, <https://www.rfc-editor.org/info/rfc4750>.




Patel, et al.           Expires January 27, 2021               [Page 21]

Internet-Draft         BGP Protocol SPF Extensions             July 2020


   [RFC4760]  Bates, T., Chandra, R., Katz, D., and Y. Rekhter,
              "Multiprotocol Extensions for BGP-4", RFC 4760,
              DOI 10.17487/RFC4760, January 2007,
              <https://www.rfc-editor.org/info/rfc4760>.

   [RFC4790]  Newman, C., Duerst, M., and A. Gulbrandsen, "Internet
              Application Protocol Collation Registry", RFC 4790,
              DOI 10.17487/RFC4790, March 2007,
              <https://www.rfc-editor.org/info/rfc4790>.

   [RFC4915]  Psenak, P., Mirtorabi, S., Roy, A., Nguyen, L., and P.
              Pillay-Esnault, "Multi-Topology (MT) Routing in OSPF",
              RFC 4915, DOI 10.17487/RFC4915, June 2007,
              <https://www.rfc-editor.org/info/rfc4915>.

   [RFC5286]  Atlas, A., Ed. and A. Zinin, Ed., "Basic Specification for
              IP Fast Reroute: Loop-Free Alternates", RFC 5286,
              DOI 10.17487/RFC5286, September 2008,
              <https://www.rfc-editor.org/info/rfc5286>.

   [RFC5549]  Le Faucheur, F. and E. Rosen, "Advertising IPv4 Network
              Layer Reachability Information with an IPv6 Next Hop",
              RFC 5549, DOI 10.17487/RFC5549, May 2009,
              <https://www.rfc-editor.org/info/rfc5549>.

   [RFC5880]  Katz, D. and D. Ward, "Bidirectional Forwarding Detection
              (BFD)", RFC 5880, DOI 10.17487/RFC5880, June 2010,
              <https://www.rfc-editor.org/info/rfc5880>.

   [RFC7938]  Lapukhov, P., Premji, A., and J. Mitchell, Ed., "Use of
              BGP for Routing in Large-Scale Data Centers", RFC 7938,
              DOI 10.17487/RFC7938, August 2016,
              <https://www.rfc-editor.org/info/rfc7938>.

Authors' Addresses

   Keyur Patel
   Arrcus, Inc.

   Email: keyur@arrcus.com











Patel, et al.           Expires January 27, 2021               [Page 22]

Internet-Draft         BGP Protocol SPF Extensions             July 2020


   Acee Lindem
   Cisco Systems
   301 Midenhall Way
   Cary, NC  27513
   USA

   Email: acee@cisco.com


   Shawn Zandi
   LinkedIn
   222 2nd Street
   San Francisco, CA  94105
   USA

   Email: szandi@linkedin.com


   Wim Henderickx
   Nokia
   Antwerp
   Belgium

   Email: wim.henderickx@nokia.com



























Patel, et al.           Expires January 27, 2021               [Page 23]
