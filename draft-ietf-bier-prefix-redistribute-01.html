<!DOCTYPE html>
<html lang="en" class="Internet-Draft">
<head>
<meta charset="utf-8">
<meta content="Common,Latin" name="scripts">
<meta content="initial-scale=1.0" name="viewport">
<title>BIER Prefix Redistribute</title>
<meta content="Zheng(Sandy) Zhang" name="author">
<meta content="Bo Wu" name="author">
<meta content="Zhaohui Zhang" name="author">
<meta content="IJsbrand Wijnands" name="author">
<meta content="Yisong Liu" name="author">
<meta content="Hooman Bidgoli" name="author">
<meta content="
       This document defines a BIER proxy function to support a single
   BIER sub-domain over multiple underlay routing protocol regions
   (Autonomous Systems or IGP areas). A new BIER proxy range sub-TLV is
 defined to redistribute BIER BFR-id information across the routing
 regions.
       
    " name="description">
<meta content="xml2rfc 3.12.0" name="generator">
<meta content="draft-ietf-bier-prefix-redistribute-01" name="ietf.draft">
<!-- Generator version information:
  xml2rfc 3.12.0
    Python 3.6.12
    appdirs 1.4.4
    ConfigArgParse 1.5.3
    google-i18n-address 2.5.0
    html5lib 1.1
    intervaltree 3.1.0
    Jinja2 2.11.3
    kitchen 1.2.6
    lxml 4.6.4
    pycountry 20.7.3
    pyflakes 2.4.0
    PyYAML 6.0
    requests 2.26.0
    setuptools 59.5.0
    six 1.16.0
    WeasyPrint 52.5
-->
<link href="/tmp/draft-ietf-bier-prefix-redistribute-01-d7vms9vj.xml" rel="alternate" type="application/rfc+xml">
<link href="#copyright" rel="license">
<style type="text/css">/*

  NOTE: Changes at the bottom of this file overrides some earlier settings.

  Once the style has stabilized and has been adopted as an official RFC style,
  this can be consolidated so that style settings occur only in one place, but
  for now the contents of this file consists first of the initial CSS work as
  provided to the RFC Formatter (xml2rfc) work, followed by itemized and
  commented changes found necssary during the development of the v3
  formatters.

*/

/* fonts */
@import url('https://fonts.googleapis.com/css?family=Noto+Sans'); /* Sans-serif */
@import url('https://fonts.googleapis.com/css?family=Noto+Serif'); /* Serif (print) */
@import url('https://fonts.googleapis.com/css?family=Roboto+Mono'); /* Monospace */

@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}
/* general and mobile first */
html {
}
body {
  max-width: 90%;
  margin: 1.5em auto;
  color: #222;
  background-color: #fff;
  font-size: 14px;
  font-family: 'Noto Sans', Arial, Helvetica, sans-serif;
  line-height: 1.6;
  scroll-behavior: smooth;
}
.ears {
  display: none;
}

/* headings */
#title, h1, h2, h3, h4, h5, h6 {
  margin: 1em 0 0.5em;
  font-weight: bold;
  line-height: 1.3;
}
#title {
  clear: both;
  border-bottom: 1px solid #ddd;
  margin: 0 0 0.5em 0;
  padding: 1em 0 0.5em;
}
.author {
  padding-bottom: 4px;
}
h1 {
  font-size: 26px;
  margin: 1em 0;
}
h2 {
  font-size: 22px;
  margin-top: -20px;  /* provide offset for in-page anchors */
  padding-top: 33px;
}
h3 {
  font-size: 18px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h4 {
  font-size: 16px;
  margin-top: -36px;  /* provide offset for in-page anchors */
  padding-top: 42px;
}
h5, h6 {
  font-size: 14px;
}
#n-copyright-notice {
  border-bottom: 1px solid #ddd;
  padding-bottom: 1em;
  margin-bottom: 1em;
}
/* general structure */
p {
  padding: 0;
  margin: 0 0 1em 0;
  text-align: left;
}
div, span {
  position: relative;
}
div {
  margin: 0;
}
.alignRight.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignRight.art-text pre {
  padding: 0;
}
.alignRight {
  margin: 1em 0;
}
.alignRight > *:first-child {
  border: none;
  margin: 0;
  float: right;
  clear: both;
}
.alignRight > *:nth-child(2) {
  clear: both;
  display: block;
  border: none;
}
svg {
  display: block;
}
.alignCenter.art-text {
  background-color: #f9f9f9;
  border: 1px solid #eee;
  border-radius: 3px;
  padding: 1em 1em 0;
  margin-bottom: 1.5em;
}
.alignCenter.art-text pre {
  padding: 0;
}
.alignCenter {
  margin: 1em 0;
}
.alignCenter > *:first-child {
  border: none;
  /* this isn't optimal, but it's an existence proof.  PrinceXML doesn't
     support flexbox yet.
  */
  display: table;
  margin: 0 auto;
}

/* lists */
ol, ul {
  padding: 0;
  margin: 0 0 1em 2em;
}
ol ol, ul ul, ol ul, ul ol {
  margin-left: 1em;
}
li {
  margin: 0 0 0.25em 0;
}
.ulCompact li {
  margin: 0;
}
ul.empty, .ulEmpty {
  list-style-type: none;
}
ul.empty li, .ulEmpty li {
  margin-top: 0.5em;
}
ul.ulBare, li.ulBare {
  margin-left: 0em !important;
}
ul.compact, .ulCompact,
ol.compact, .olCompact {
  line-height: 100%;
  margin: 0 0 0 2em;
}

/* definition lists */
dl {
}
dl > dt {
  float: left;
  margin-right: 1em;
}
/* 
dl.nohang > dt {
  float: none;
}
*/
dl > dd {
  margin-bottom: .8em;
  min-height: 1.3em;
}
dl.compact > dd, .dlCompact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}

/* links */
a {
  text-decoration: none;
}
a[href] {
  color: #22e; /* Arlen: WCAG 2019 */
}
a[href]:hover {
  background-color: #f2f2f2;
}
figcaption a[href],
a[href].selfRef {
  color: #222;
}
/* XXX probably not this:
a.selfRef:hover {
  background-color: transparent;
  cursor: default;
} */

/* Figures */
tt, code, pre, code {
  background-color: #f9f9f9;
  font-family: 'Roboto Mono', monospace;
}
pre {
  border: 1px solid #eee;
  margin: 0;
  padding: 1em;
}
img {
  max-width: 100%;
}
figure {
  margin: 0;
}
figure blockquote {
  margin: 0.8em 0.4em 0.4em;
}
figcaption {
  font-style: italic;
  margin: 0 0 1em 0;
}
@media screen {
  pre {
    overflow-x: auto;
    max-width: 100%;
    max-width: calc(100% - 22px);
  }
}

/* aside, blockquote */
aside, blockquote {
  margin-left: 0;
  padding: 1.2em 2em;
}
blockquote {
  background-color: #f9f9f9;
  color: #111; /* Arlen: WCAG 2019 */
  border: 1px solid #ddd;
  border-radius: 3px;
  margin: 1em 0;
}
cite {
  display: block;
  text-align: right;
  font-style: italic;
}

/* tables */
table {
  width: 100%;
  margin: 0 0 1em;
  border-collapse: collapse;
  border: 1px solid #eee;
}
th, td {
  text-align: left;
  vertical-align: top;
  padding: 0.5em 0.75em;
}
th {
  text-align: left;
  background-color: #e9e9e9;
}
tr:nth-child(2n+1) > td {
  background-color: #f5f5f5;
}
table caption {
  font-style: italic;
  margin: 0;
  padding: 0;
  text-align: left;
}
table p {
  /* XXX to avoid bottom margin on table row signifiers. If paragraphs should
     be allowed within tables more generally, it would be far better to select on a class. */
  margin: 0;
}

/* pilcrow */
a.pilcrow {
  color: #666; /* Arlen: AHDJ 2019 */
  text-decoration: none;
  visibility: hidden;
  user-select: none;
  -ms-user-select: none;
  -o-user-select:none;
  -moz-user-select: none;
  -khtml-user-select: none;
  -webkit-user-select: none;
  -webkit-touch-callout: none;
}
@media screen {
  aside:hover > a.pilcrow,
  p:hover > a.pilcrow,
  blockquote:hover > a.pilcrow,
  div:hover > a.pilcrow,
  li:hover > a.pilcrow,
  pre:hover > a.pilcrow {
    visibility: visible;
  }
  a.pilcrow:hover {
    background-color: transparent;
  }
}

/* misc */
hr {
  border: 0;
  border-top: 1px solid #eee;
}
.bcp14 {
  font-variant: small-caps;
}

.role {
  font-variant: all-small-caps;
}

/* info block */
#identifiers {
  margin: 0;
  font-size: 0.9em;
}
#identifiers dt {
  width: 3em;
  clear: left;
}
#identifiers dd {
  float: left;
  margin-bottom: 0;
}
/* Fix PDF info block run off issue */
@media print {
  #identifiers dd {
    float: none;
  }
}
#identifiers .authors .author {
  display: inline-block;
  margin-right: 1.5em;
}
#identifiers .authors .org {
  font-style: italic;
}

/* The prepared/rendered info at the very bottom of the page */
.docInfo {
  color: #666; /* Arlen: WCAG 2019 */
  font-size: 0.9em;
  font-style: italic;
  margin-top: 2em;
}
.docInfo .prepared {
  float: left;
}
.docInfo .prepared {
  float: right;
}

/* table of contents */
#toc  {
  padding: 0.75em 0 2em 0;
  margin-bottom: 1em;
}
nav.toc ul {
  margin: 0 0.5em 0 0;
  padding: 0;
  list-style: none;
}
nav.toc li {
  line-height: 1.3em;
  margin: 0.75em 0;
  padding-left: 1.2em;
  text-indent: -1.2em;
}
/* references */
.references dt {
  text-align: right;
  font-weight: bold;
  min-width: 7em;
}
.references dd {
  margin-left: 8em;
  overflow: auto;
}

.refInstance {
  margin-bottom: 1.25em;
}

.references .ascii {
  margin-bottom: 0.25em;
}

/* index */
.index ul {
  margin: 0 0 0 1em;
  padding: 0;
  list-style: none;
}
.index ul ul {
  margin: 0;
}
.index li {
  margin: 0;
  text-indent: -2em;
  padding-left: 2em;
  padding-bottom: 5px;
}
.indexIndex {
  margin: 0.5em 0 1em;
}
.index a {
  font-weight: 700;
}
/* make the index two-column on all but the smallest screens */
@media (min-width: 600px) {
  .index ul {
    -moz-column-count: 2;
    -moz-column-gap: 20px;
  }
  .index ul ul {
    -moz-column-count: 1;
    -moz-column-gap: 0;
  }
}

/* authors */
address.vcard {
  font-style: normal;
  margin: 1em 0;
}

address.vcard .nameRole {
  font-weight: 700;
  margin-left: 0;
}
address.vcard .label {
  font-family: "Noto Sans",Arial,Helvetica,sans-serif;
  margin: 0.5em 0;
}
address.vcard .type {
  display: none;
}
.alternative-contact {
  margin: 1.5em 0 1em;
}
hr.addr {
  border-top: 1px dashed;
  margin: 0;
  color: #ddd;
  max-width: calc(100% - 16px);
}

/* temporary notes */
.rfcEditorRemove::before {
  position: absolute;
  top: 0.2em;
  right: 0.2em;
  padding: 0.2em;
  content: "The RFC Editor will remove this note";
  color: #9e2a00; /* Arlen: WCAG 2019 */
  background-color: #ffd; /* Arlen: WCAG 2019 */
}
.rfcEditorRemove {
  position: relative;
  padding-top: 1.8em;
  background-color: #ffd; /* Arlen: WCAG 2019 */
  border-radius: 3px;
}
.cref {
  background-color: #ffd; /* Arlen: WCAG 2019 */
  padding: 2px 4px;
}
.crefSource {
  font-style: italic;
}
/* alternative layout for smaller screens */
@media screen and (max-width: 1023px) {
  body {
    padding-top: 2em;
  }
  #title {
    padding: 1em 0;
  }
  h1 {
    font-size: 24px;
  }
  h2 {
    font-size: 20px;
    margin-top: -18px;  /* provide offset for in-page anchors */
    padding-top: 38px;
  }
  #identifiers dd {
    max-width: 60%;
  }
  #toc {
    position: fixed;
    z-index: 2;
    top: 0;
    right: 0;
    padding: 0;
    margin: 0;
    background-color: inherit;
    border-bottom: 1px solid #ccc;
  }
  #toc h2 {
    margin: -1px 0 0 0;
    padding: 4px 0 4px 6px;
    padding-right: 1em;
    min-width: 190px;
    font-size: 1.1em;
    text-align: right;
    background-color: #444;
    color: white;
    cursor: pointer;
  }
  #toc h2::before { /* css hamburger */
    float: right;
    position: relative;
    width: 1em;
    height: 1px;
    left: -164px;
    margin: 6px 0 0 0;
    background: white none repeat scroll 0 0;
    box-shadow: 0 4px 0 0 white, 0 8px 0 0 white;
    content: "";
  }
  #toc nav {
    display: none;
    padding: 0.5em 1em 1em;
    overflow: auto;
    height: calc(100vh - 48px);
    border-left: 1px solid #ddd;
  }
}

/* alternative layout for wide screens */
@media screen and (min-width: 1024px) {
  body {
    max-width: 724px;
    margin: 42px auto;
    padding-left: 1.5em;
    padding-right: 29em;
  }
  #toc {
    position: fixed;
    top: 42px;
    right: 42px;
    width: 25%;
    margin: 0;
    padding: 0 1em;
    z-index: 1;
  }
  #toc h2 {
    border-top: none;
    border-bottom: 1px solid #ddd;
    font-size: 1em;
    font-weight: normal;
    margin: 0;
    padding: 0.25em 1em 1em 0;
  }
  #toc nav {
    display: block;
    height: calc(90vh - 84px);
    bottom: 0;
    padding: 0.5em 0 0;
    overflow: auto;
  }
  img { /* future proofing */
    max-width: 100%;
    height: auto;
  }
}

/* pagination */
@media print {
  body {

    width: 100%;
  }
  p {
    orphans: 3;
    widows: 3;
  }
  #n-copyright-notice {
    border-bottom: none;
  }
  #toc, #n-introduction {
    page-break-before: always;
  }
  #toc {
    border-top: none;
    padding-top: 0;
  }
  figure, pre {
    page-break-inside: avoid;
  }
  figure {
    overflow: scroll;
  }
  h1, h2, h3, h4, h5, h6 {
    page-break-after: avoid;
  }
  h2+*, h3+*, h4+*, h5+*, h6+* {
    page-break-before: avoid;
  }
  pre {
    white-space: pre-wrap;
    word-wrap: break-word;
    font-size: 10pt;
  }
  table {
    border: 1px solid #ddd;
  }
  td {
    border-top: 1px solid #ddd;
  }
}

/* This is commented out here, as the string-set: doesn't
   pass W3C validation currently */
/*
.ears thead .left {
  string-set: ears-top-left content();
}

.ears thead .center {
  string-set: ears-top-center content();
}

.ears thead .right {
  string-set: ears-top-right content();
}

.ears tfoot .left {
  string-set: ears-bottom-left content();
}

.ears tfoot .center {
  string-set: ears-bottom-center content();
}

.ears tfoot .right {
  string-set: ears-bottom-right content();
}
*/

@page :first {
  padding-top: 0;
  @top-left {
    content: normal;
    border: none;
  }
  @top-center {
    content: normal;
    border: none;
  }
  @top-right {
    content: normal;
    border: none;
  }
}

@page {
  size: A4;
  margin-bottom: 45mm;
  padding-top: 20px;
  /* The follwing is commented out here, but set appropriately by in code, as
     the content depends on the document */
  /*
  @top-left {
    content: 'Internet-Draft';
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-left {
    content: string(ears-top-left);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-center {
    content: string(ears-top-center);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @top-right {
    content: string(ears-top-right);
    vertical-align: bottom;
    border-bottom: solid 1px #ccc;
  }
  @bottom-left {
    content: string(ears-bottom-left);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-center {
    content: string(ears-bottom-center);
    vertical-align: top;
    border-top: solid 1px #ccc;
  }
  @bottom-right {
      content: '[Page ' counter(page) ']';
      vertical-align: top;
      border-top: solid 1px #ccc;
  }
  */

}

/* Changes introduced to fix issues found during implementation */
/* Make sure links are clickable even if overlapped by following H* */
a {
  z-index: 2;
}
/* Separate body from document info even without intervening H1 */
section {
  clear: both;
}


/* Top align author divs, to avoid names without organization dropping level with org names */
.author {
  vertical-align: top;
}

/* Leave room in document info to show Internet-Draft on one line */
#identifiers dt {
  width: 8em;
}

/* Don't waste quite as much whitespace between label and value in doc info */
#identifiers dd {
  margin-left: 1em;
}

/* Give floating toc a background color (needed when it's a div inside section */
#toc {
  background-color: white;
}

/* Make the collapsed ToC header render white on gray also when it's a link */
@media screen and (max-width: 1023px) {
  #toc h2 a,
  #toc h2 a:link,
  #toc h2 a:focus,
  #toc h2 a:hover,
  #toc a.toplink,
  #toc a.toplink:hover {
    color: white;
    background-color: #444;
    text-decoration: none;
  }
}

/* Give the bottom of the ToC some whitespace */
@media screen and (min-width: 1024px) {
  #toc {
    padding: 0 0 1em 1em;
  }
}

/* Style section numbers with more space between number and title */
.section-number {
  padding-right: 0.5em;
}

/* prevent monospace from becoming overly large */
tt, code, pre, code {
  font-size: 95%;
}

/* Fix the height/width aspect for ascii art*/
pre.sourcecode,
.art-text pre {
  line-height: 1.12;
}


/* Add styling for a link in the ToC that points to the top of the document */
a.toplink {
  float: right;
  margin-right: 0.5em;
}

/* Fix the dl styling to match the RFC 7992 attributes */
dl > dt,
dl.dlParallel > dt {
  float: left;
  margin-right: 1em;
}
dl.dlNewline > dt {
  float: none;
}

/* Provide styling for table cell text alignment */
table td.text-left,
table th.text-left {
  text-align: left;
}
table td.text-center,
table th.text-center {
  text-align: center;
}
table td.text-right,
table th.text-right {
  text-align: right;
}

/* Make the alternative author contact informatio look less like just another
   author, and group it closer with the primary author contact information */
.alternative-contact {
  margin: 0.5em 0 0.25em 0;
}
address .non-ascii {
  margin: 0 0 0 2em;
}

/* With it being possible to set tables with alignment
  left, center, and right, { width: 100%; } does not make sense */
table {
  width: auto;
}

/* Avoid reference text that sits in a block with very wide left margin,
   because of a long floating dt label.*/
.references dd {
  overflow: visible;
}

/* Control caption placement */
caption {
  caption-side: bottom;
}

/* Limit the width of the author address vcard, so names in right-to-left
   script don't end up on the other side of the page. */

address.vcard {
  max-width: 30em;
  margin-right: auto;
}

/* For address alignment dependent on LTR or RTL scripts */
address div.left {
  text-align: left;
}
address div.right {
  text-align: right;
}

/* Provide table alignment support.  We can't use the alignX classes above
   since they do unwanted things with caption and other styling. */
table.right {
 margin-left: auto;
 margin-right: 0;
}
table.center {
 margin-left: auto;
 margin-right: auto;
}
table.left {
 margin-left: 0;
 margin-right: auto;
}

/* Give the table caption label the same styling as the figcaption */
caption a[href] {
  color: #222;
}

@media print {
  .toplink {
    display: none;
  }

  /* avoid overwriting the top border line with the ToC header */
  #toc {
    padding-top: 1px;
  }

  /* Avoid page breaks inside dl and author address entries */
  .vcard {
    page-break-inside: avoid;
  }

}
/* Tweak the bcp14 keyword presentation */
.bcp14 {
  font-variant: small-caps;
  font-weight: bold;
  font-size: 0.9em;
}
/* Tweak the invisible space above H* in order not to overlay links in text above */
 h2 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 31px;
 }
 h3 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
 h4 {
  margin-top: -18px;  /* provide offset for in-page anchors */
  padding-top: 24px;
 }
/* Float artwork pilcrow to the right */
@media screen {
  .artwork a.pilcrow {
    display: block;
    line-height: 0.7;
    margin-top: 0.15em;
  }
}
/* Make pilcrows on dd visible */
@media screen {
  dd:hover > a.pilcrow {
    visibility: visible;
  }
}
/* Make the placement of figcaption match that of a table's caption
   by removing the figure's added bottom margin */
.alignLeft.art-text,
.alignCenter.art-text,
.alignRight.art-text {
   margin-bottom: 0;
}
.alignLeft,
.alignCenter,
.alignRight {
  margin: 1em 0 0 0;
}
/* In print, the pilcrow won't show on hover, so prevent it from taking up space,
   possibly even requiring a new line */
@media print {
  a.pilcrow {
    display: none;
  }
}
/* Styling for the external metadata */
div#external-metadata {
  background-color: #eee;
  padding: 0.5em;
  margin-bottom: 0.5em;
  display: none;
}
div#internal-metadata {
  padding: 0.5em;                       /* to match the external-metadata padding */
}
/* Styling for title RFC Number */
h1#rfcnum {
  clear: both;
  margin: 0 0 -1em;
  padding: 1em 0 0 0;
}
/* Make .olPercent look the same as <ol><li> */
dl.olPercent > dd {
  margin-bottom: 0.25em;
  min-height: initial;
}
/* Give aside some styling to set it apart */
aside {
  border-left: 1px solid #ddd;
  margin: 1em 0 1em 2em;
  padding: 0.2em 2em;
}
aside > dl,
aside > ol,
aside > ul,
aside > table,
aside > p {
  margin-bottom: 0.5em;
}
/* Additional page break settings */
@media print {
  figcaption, table caption {
    page-break-before: avoid;
  }
}
/* Font size adjustments for print */
@media print {
  body  { font-size: 10pt;      line-height: normal; max-width: 96%; }
  h1    { font-size: 1.72em;    padding-top: 1.5em; } /* 1*1.2*1.2*1.2 */
  h2    { font-size: 1.44em;    padding-top: 1.5em; } /* 1*1.2*1.2 */
  h3    { font-size: 1.2em;     padding-top: 1.5em; } /* 1*1.2 */
  h4    { font-size: 1em;       padding-top: 1.5em; }
  h5, h6 { font-size: 1em;      margin: initial; padding: 0.5em 0 0.3em; }
}
/* Sourcecode margin in print, when there's no pilcrow */
@media print {
  .artwork,
  .sourcecode {
    margin-bottom: 1em;
  }
}
/* Avoid narrow tables forcing too narrow table captions, which may render badly */
table {
  min-width: 20em;
}
/* ol type a */
ol.type-a { list-style-type: lower-alpha; }
ol.type-A { list-style-type: upper-alpha; }
ol.type-i { list-style-type: lower-roman; }
ol.type-I { list-style-type: lower-roman; }
/* Apply the print table and row borders in general, on request from the RPC,
and increase the contrast between border and odd row background sligthtly */
table {
  border: 1px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
}
tr:nth-child(2n+1) > td {
  background-color: #f8f8f8;
}
/* Use style rules to govern display of the TOC. */
@media screen and (max-width: 1023px) {
  #toc nav { display: none; }
  #toc.active nav { display: block; }
}
/* Add support for keepWithNext */
.keepWithNext {
  break-after: avoid-page;
  break-after: avoid-page;
}
/* Add support for keepWithPrevious */
.keepWithPrevious {
  break-before: avoid-page;
}
/* Change the approach to avoiding breaks inside artwork etc. */
figure, pre, table, .artwork, .sourcecode  {
  break-before: auto;
  break-after: auto;
}
/* Avoid breaks between <dt> and <dd> */
dl {
  break-before: auto;
  break-inside: auto;
}
dt {
  break-before: auto;
  break-after: avoid-page;
}
dd {
  break-before: avoid-page;
  break-after: auto;
  orphans: 3;
  widows: 3
}
span.break, dd.break {
  margin-bottom: 0;
  min-height: 0;
  break-before: auto;
  break-inside: auto;
  break-after: auto;
}
/* Undo break-before ToC */
@media print {
  #toc {
    break-before: auto;
  }
}
/* Text in compact lists should not get extra bottim margin space,
   since that would makes the list not compact */
ul.compact p, .ulCompact p,
ol.compact p, .olCompact p {
 margin: 0;
}
/* But the list as a whole needs the extra space at the end */
section ul.compact,
section .ulCompact,
section ol.compact,
section .olCompact {
  margin-bottom: 1em;                    /* same as p not within ul.compact etc. */
}
/* The tt and code background above interferes with for instance table cell
   backgrounds.  Changed to something a bit more selective. */
tt, code {
  background-color: transparent;
}
p tt, p code, li tt, li code {
  background-color: #f8f8f8;
}
/* Tweak the pre margin -- 0px doesn't come out well */
pre {
   margin-top: 0.5px;
}
/* Tweak the comact list text */
ul.compact, .ulCompact,
ol.compact, .olCompact,
dl.compact, .dlCompact {
  line-height: normal;
}
/* Don't add top margin for nested lists */
li > ul, li > ol, li > dl,
dd > ul, dd > ol, dd > dl,
dl > dd > dl {
  margin-top: initial;
}
/* Elements that should not be rendered on the same line as a <dt> */
/* This should match the element list in writer.text.TextWriter.render_dl() */
dd > div.artwork:first-child,
dd > aside:first-child,
dd > figure:first-child,
dd > ol:first-child,
dd > div:first-child > pre.sourcecode,
dd > table:first-child,
dd > ul:first-child {
  clear: left;
}
/* fix for weird browser behaviour when <dd/> is empty */
dt+dd:empty::before{
  content: "\00a0";
}
/* Make paragraph spacing inside <li> smaller than in body text, to fit better within the list */
li > p {
  margin-bottom: 0.5em
}
/* Don't let p margin spill out from inside list items */
li > p:last-of-type {
  margin-bottom: 0;
}
</style>
<link href="rfc-local.css" rel="stylesheet" type="text/css">
<script type="application/javascript">async function addMetadata(){try{const e=document.styleSheets[0].cssRules;for(let t=0;t<e.length;t++)if(/#identifiers/.exec(e[t].selectorText)){const a=e[t].cssText.replace("#identifiers","#external-updates");document.styleSheets[0].insertRule(a,document.styleSheets[0].cssRules.length)}}catch(e){console.log(e)}const e=document.getElementById("external-metadata");if(e)try{var t,a="",o=function(e){const t=document.getElementsByTagName("meta");for(let a=0;a<t.length;a++)if(t[a].getAttribute("name")===e)return t[a].getAttribute("content");return""}("rfc.number");if(o){t="https://www.rfc-editor.org/rfc/rfc"+o+".json";try{const e=await fetch(t);a=await e.json()}catch(e){t=document.URL.indexOf("html")>=0?document.URL.replace(/html$/,"json"):document.URL+".json";const o=await fetch(t);a=await o.json()}}if(!a)return;e.style.display="block";const s="",d="https://datatracker.ietf.org/doc",n="https://datatracker.ietf.org/ipr/search",c="https://www.rfc-editor.org/info",l=a.doc_id.toLowerCase(),i=a.doc_id.slice(0,3).toLowerCase(),f=a.doc_id.slice(3).replace(/^0+/,""),u={status:"Status",obsoletes:"Obsoletes",obsoleted_by:"Obsoleted By",updates:"Updates",updated_by:"Updated By",see_also:"See Also",errata_url:"Errata"};let h="<dl style='overflow:hidden' id='external-updates'>";["status","obsoletes","obsoleted_by","updates","updated_by","see_also","errata_url"].forEach(e=>{if("status"==e){a[e]=a[e].toLowerCase();var t=a[e].split(" "),o=t.length,w="",p=1;for(let e=0;e<o;e++)p<o?w=w+r(t[e])+" ":w+=r(t[e]),p++;a[e]=w}else if("obsoletes"==e||"obsoleted_by"==e||"updates"==e||"updated_by"==e){var g,m="",b=1;g=a[e].length;for(let t=0;t<g;t++)a[e][t]&&(a[e][t]=String(a[e][t]).toLowerCase(),m=b<g?m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>, ":m+"<a href='"+s+"/rfc/".concat(a[e][t])+"'>"+a[e][t].slice(3)+"</a>",b++);a[e]=m}else if("see_also"==e){var y,L="",C=1;y=a[e].length;for(let t=0;t<y;t++)if(a[e][t]){a[e][t]=String(a[e][t]);var _=a[e][t].slice(0,3),v=a[e][t].slice(3).replace(/^0+/,"");L=C<y?"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>, ":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>, ":"RFC"!=_?L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+_+" "+v+"</a>":L+"<a href='"+s+"/info/"+_.toLowerCase().concat(v.toLowerCase())+"'>"+v+"</a>",C++}a[e]=L}else if("errata_url"==e){var R="";R=a[e]?R+"<a href='"+a[e]+"'>Errata exist</a> | <a href='"+d+"/"+l+"'>Datatracker</a>| <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>":"<a href='"+d+"/"+l+"'>Datatracker</a> | <a href='"+n+"/?"+i+"="+f+"&submit="+i+"'>IPR</a> | <a href='"+c+"/"+l+"'>Info page</a>",a[e]=R}""!=a[e]?"Errata"==u[e]?h+=`<dt>More info:</dt><dd>${a[e]}</dd>`:h+=`<dt>${u[e]}:</dt><dd>${a[e]}</dd>`:"Errata"==u[e]&&(h+=`<dt>More info:</dt><dd>${a[e]}</dd>`)}),h+="</dl>",e.innerHTML=h}catch(e){console.log(e)}else console.log("Could not locate metadata <div> element");function r(e){return e.charAt(0).toUpperCase()+e.slice(1)}}window.removeEventListener("load",addMetadata),window.addEventListener("load",addMetadata);</script>
</head>
<body>
<script src="metadata.min.js"></script>
<table class="ears">
<thead><tr>
<td class="left">Internet-Draft</td>
<td class="center">BIER Prefix Redistribute</td>
<td class="right">December 2021</td>
</tr></thead>
<tfoot><tr>
<td class="left">Zhang, et al.</td>
<td class="center">Expires 26 June 2022</td>
<td class="right">[Page]</td>
</tr></tfoot>
</table>
<div id="external-metadata" class="document-information"></div>
<div id="internal-metadata" class="document-information">
<dl id="identifiers">
<dt class="label-workgroup">Workgroup:</dt>
<dd class="workgroup">BIER</dd>
<dt class="label-internet-draft">Internet-Draft:</dt>
<dd class="internet-draft">draft-ietf-bier-prefix-redistribute-01</dd>
<dt class="label-published">Published:</dt>
<dd class="published">
<time datetime="2021-12-23" class="published">23 December 2021</time>
    </dd>
<dt class="label-intended-status">Intended Status:</dt>
<dd class="intended-status">Standards Track</dd>
<dt class="label-expires">Expires:</dt>
<dd class="expires"><time datetime="2022-06-26">26 June 2022</time></dd>
<dt class="label-authors">Authors:</dt>
<dd class="authors">
<div class="author">
      <div class="author-name">Z. Zhang</div>
<div class="org">ZTE Corporation</div>
</div>
<div class="author">
      <div class="author-name">B. Wu</div>
<div class="org">Individual</div>
</div>
<div class="author">
      <div class="author-name">Z. Zhang, <span class="editor">Ed.</span>
</div>
<div class="org">Juniper Networks</div>
</div>
<div class="author">
      <div class="author-name">IJ. Wijnands</div>
<div class="org">Cisco Systems, Inc.</div>
</div>
<div class="author">
      <div class="author-name">Y. Liu</div>
<div class="org">China Mobile</div>
</div>
<div class="author">
      <div class="author-name">H. Bidgoli</div>
<div class="org">Nokia</div>
</div>
</dd>
</dl>
</div>
<h1 id="title">BIER Prefix Redistribute</h1>
<section id="section-abstract">
      <h2 id="abstract"><a href="#abstract" class="selfRef">Abstract</a></h2>
<p id="section-abstract-1">This document defines a BIER proxy function to support a single
   BIER sub-domain over multiple underlay routing protocol regions
   (Autonomous Systems or IGP areas). A new BIER proxy range sub-TLV is
 defined to redistribute BIER BFR-id information across the routing
 regions.<a href="#section-abstract-1" class="pilcrow">¶</a></p>
</section>
<section class="note" id="section-note.1">
      <h2 id="name-requirements-language">
<a href="#name-requirements-language" class="section-name selfRef">Requirements Language</a>
      </h2>
<p id="section-note.1-1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
      "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
      document are to be interpreted as described in RFC2119.<a href="#section-note.1-1" class="pilcrow">¶</a></p>
</section>
<div id="status-of-memo">
<section id="section-boilerplate.1">
        <h2 id="name-status-of-this-memo">
<a href="#name-status-of-this-memo" class="section-name selfRef">Status of This Memo</a>
        </h2>
<p id="section-boilerplate.1-1">
        This Internet-Draft is submitted in full conformance with the
        provisions of BCP 78 and BCP 79.<a href="#section-boilerplate.1-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-2">
        Internet-Drafts are working documents of the Internet Engineering Task
        Force (IETF). Note that other groups may also distribute working
        documents as Internet-Drafts. The list of current Internet-Drafts is
        at <span><a href="https://datatracker.ietf.org/drafts/current/">https://datatracker.ietf.org/drafts/current/</a></span>.<a href="#section-boilerplate.1-2" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-3">
        Internet-Drafts are draft documents valid for a maximum of six months
        and may be updated, replaced, or obsoleted by other documents at any
        time. It is inappropriate to use Internet-Drafts as reference
        material or to cite them other than as "work in progress."<a href="#section-boilerplate.1-3" class="pilcrow">¶</a></p>
<p id="section-boilerplate.1-4">
        This Internet-Draft will expire on 26 June 2022.<a href="#section-boilerplate.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="copyright">
<section id="section-boilerplate.2">
        <h2 id="name-copyright-notice">
<a href="#name-copyright-notice" class="section-name selfRef">Copyright Notice</a>
        </h2>
<p id="section-boilerplate.2-1">
            Copyright (c) 2021 IETF Trust and the persons identified as the
            document authors. All rights reserved.<a href="#section-boilerplate.2-1" class="pilcrow">¶</a></p>
<p id="section-boilerplate.2-2">
            This document is subject to BCP 78 and the IETF Trust's Legal
            Provisions Relating to IETF Documents
            (<span><a href="https://trustee.ietf.org/license-info">https://trustee.ietf.org/license-info</a></span>) in effect on the date of
            publication of this document. Please review these documents
            carefully, as they describe your rights and restrictions with
            respect to this document. Code Components extracted from this
            document must include Revised BSD License text as described in
            Section 4.e of the Trust Legal Provisions and are provided without
            warranty as described in the Revised BSD License.<a href="#section-boilerplate.2-2" class="pilcrow">¶</a></p>
</section>
</div>
<div id="toc">
<section id="section-toc.1">
        <a href="#" onclick="scroll(0,0)" class="toplink">▲</a><h2 id="name-table-of-contents">
<a href="#name-table-of-contents" class="section-name selfRef">Table of Contents</a>
        </h2>
<nav class="toc"><ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.1">
            <p id="section-toc.1-1.1.1" class="keepWithNext"><a href="#section-1" class="xref">1</a>.  <a href="#name-terminology" class="xref">Terminology</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2">
            <p id="section-toc.1-1.2.1"><a href="#section-2" class="xref">2</a>.  <a href="#name-problem-statement" class="xref">Problem statement</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.1">
                <p id="section-toc.1-1.2.2.1.1" class="keepWithNext"><a href="#section-2.1" class="xref">2.1</a>.  <a href="#name-multipe-igp-domains" class="xref">Multipe IGP domains</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.2.2.2">
                <p id="section-toc.1-1.2.2.2.1" class="keepWithNext"><a href="#section-2.2" class="xref">2.2</a>.  <a href="#name-seamless-mpls-network" class="xref">Seamless MPLS Network</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.3">
            <p id="section-toc.1-1.3.1"><a href="#section-3" class="xref">3</a>.  <a href="#name-proposed-solution" class="xref">Proposed Solution</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4">
            <p id="section-toc.1-1.4.1"><a href="#section-4" class="xref">4</a>.  <a href="#name-specifications" class="xref">Specifications</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.1">
                <p id="section-toc.1-1.4.2.1.1"><a href="#section-4.1" class="xref">4.1</a>.  <a href="#name-redistribution-of-bier-info" class="xref">Redistribution of BIER Information</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.2">
                <p id="section-toc.1-1.4.2.2.1"><a href="#section-4.2" class="xref">4.2</a>.  <a href="#name-bier-proxy-range-sub-tlv" class="xref">BIER proxy range sub-TLV</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.4.2.3">
                <p id="section-toc.1-1.4.2.3.1"><a href="#section-4.3" class="xref">4.3</a>.  <a href="#name-birt-bift-calculation" class="xref">BIRT/BIFT Calculation</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.5">
            <p id="section-toc.1-1.5.1"><a href="#section-5" class="xref">5</a>.  <a href="#name-iana-considerations" class="xref">IANA Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.6">
            <p id="section-toc.1-1.6.1"><a href="#section-6" class="xref">6</a>.  <a href="#name-security-considerations" class="xref">Security Considerations</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.7">
            <p id="section-toc.1-1.7.1"><a href="#section-7" class="xref">7</a>.  <a href="#name-acknowledgements" class="xref">Acknowledgements</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8">
            <p id="section-toc.1-1.8.1"><a href="#section-8" class="xref">8</a>.  <a href="#name-references" class="xref">References</a></p>
<ul class="compact toc ulBare ulEmpty">
<li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.1">
                <p id="section-toc.1-1.8.2.1.1"><a href="#section-8.1" class="xref">8.1</a>.  <a href="#name-normative-references" class="xref">Normative References</a></p>
</li>
              <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.8.2.2">
                <p id="section-toc.1-1.8.2.2.1"><a href="#section-8.2" class="xref">8.2</a>.  <a href="#name-informative-references" class="xref">Informative References</a></p>
</li>
            </ul>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.9">
            <p id="section-toc.1-1.9.1"><a href="#appendix-A" class="xref">Appendix A</a>.  <a href="#name-proxy-range-sub-tlv-usage" class="xref">Proxy range sub-TLV usage</a></p>
</li>
          <li class="compact toc ulBare ulEmpty" id="section-toc.1-1.10">
            <p id="section-toc.1-1.10.1"><a href="#appendix-B" class="xref"></a><a href="#name-authors-addresses" class="xref">Authors' Addresses</a></p>
</li>
        </ul>
</nav>
</section>
</div>
<div id="terminology">
<section id="section-1">
      <h2 id="name-terminology">
<a href="#section-1" class="section-number selfRef">1. </a><a href="#name-terminology" class="section-name selfRef">Terminology</a>
      </h2>
<p id="section-1-1">It is assumed that readers of this document are familiar with
   BIER architecture <span>[<a href="#RFC8279" class="xref">RFC8279</a>]</span> and OSPF/ISIS/BGP signaling for BIER
   <span>[<a href="#RFC8401" class="xref">RFC8401</a>]</span>, <span>[<a href="#RFC8444" class="xref">RFC8444</a>]</span>, <span>[<a href="#I-D.ietf-bier-idr-extensions" class="xref">I-D.ietf-bier-idr-extensions</a>]</span>,
 <span>[<a href="#I-D.ietf-bier-ospfv3-extensions" class="xref">I-D.ietf-bier-ospfv3-extensions</a>]</span>. The following terminologies are listed
   for convenience.
   (to be added)...<a href="#section-1-1" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-2">
      <h2 id="name-problem-statement">
<a href="#section-2" class="section-number selfRef">2. </a><a href="#name-problem-statement" class="section-name selfRef">Problem statement</a>
      </h2>
<p id="section-2-1">BIER <span>[<a href="#RFC8279" class="xref">RFC8279</a>]</span> is a new multicast architecture
   that does not need per-tree state inside a network for multicast
   forwarding. 
   BIER forwarding state (which is not per-tree) is built according
   to a routing underlay, which is defaulted to an IGP domain
   though not limited to that. In this routin underlay, BIER information
   like BIER-prefix, BFR-id, subdomain-id, and encapsulation is propagated
   using IGP or BGP as specified 
 in documents such as <span>[<a href="#RFC8401" class="xref">RFC8401</a>]</span>, 
 <span>[<a href="#RFC8444" class="xref">RFC8444</a>]</span>, 
 <span>[<a href="#I-D.ietf-bier-idr-extensions" class="xref">I-D.ietf-bier-idr-extensions</a>]</span>,
 <span>[<a href="#I-D.ietf-bier-ospfv3-extensions" class="xref">I-D.ietf-bier-ospfv3-extensions</a>]</span>, 
    <span>[<a href="#I-D.ietf-bier-lsr-ethernet-extensions" class="xref">I-D.ietf-bier-lsr-ethernet-extensions</a>]</span>.<a href="#section-2-1" class="pilcrow">¶</a></p>
<p id="section-2-2">In some deployment situations, different routing protocols may
   be used in differet parts of a network yet there are just small 
   number of BFERs in each protocol domain, so a single BIER sub-domain
   is desired. This requires BIER information redistribution among
   different protocols, as described in the following two sections.<a href="#section-2-2" class="pilcrow">¶</a></p>
<div id="multi-igp">
<section id="section-2.1">
        <h3 id="name-multipe-igp-domains">
<a href="#section-2.1" class="section-number selfRef">2.1. </a><a href="#name-multipe-igp-domains" class="section-name selfRef">Multipe IGP domains</a>
        </h3>
<div class="alignCenter art-text artwork" id="section-2.1-1">
<pre>
            +----+             +----+
       +----+ R1 +-------------+ R2 +-----+
       |    +----+             +----+     |
       |          OSPF / ISIS             |
       |           domain 1               |
       |                                  |
       |     +----+            +----+     |
       +-----+    +------------+    +-----+
+------------+ R3 +---+    +---+ R4 +------------+
|            +----+   |    |   +----+            |
|        OSPF         |    |        OSPF         |
|                     |    |                     |
|     domain 2        |    |       domain 3      |
|  +----+     +----+  |    |   +----+    +----+  |
+--+ Rm +-----+ Rn +--+    +---+ Rx +----+ Ry +--+
   +----+     +----+           +----+    +----+
                     Figure 1
</pre><a href="#section-2.1-1" class="pilcrow">¶</a>
</div>
<p id="section-2.1-2" class="keepWithPrevious"></p>
<p id="section-2.1-3">While one could treat each IGP domain in the above network
   as a separate BIER sub-domain, the border routers R3/R4 would need
   decapsulate incoming BIER header in one BIER sub-domain,
   forward based on flow overlay per-tree state,
   and re-ecapsulate with a BIER header for forwarding in
   the next BIER sub-domain. This not only is inefficient in forwarding, 
      but also require per-tree state on the border routers,
   which is undesired.<a href="#section-2.1-3" class="pilcrow">¶</a></p>
<p id="section-2.1-4">A better solution is to treat the entire network of
 multiple IGP domains as single BIER sub-domain with a single
 routing underlay.<a href="#section-2.1-4" class="pilcrow">¶</a></p>
</section>
</div>
<div id="seamless">
<section id="section-2.2">
        <h3 id="name-seamless-mpls-network">
<a href="#section-2.2" class="section-number selfRef">2.2. </a><a href="#name-seamless-mpls-network" class="section-name selfRef">Seamless MPLS Network</a>
        </h3>
<p id="section-2.2-1">Figure 1 could also depict a Seamless MPLS
    <span>[<a href="#I-D.ietf-mpls-seamless-mpls" class="xref">I-D.ietf-mpls-seamless-mpls</a>]</span> network, where
    BGP-LU <span>[<a href="#RFC8277" class="xref">RFC8277</a>]</span> is used to distribute routes
    for edge routers (e.g.  R1/R2/Rm/Rn/Rx/Ry) among the edge
    routers and border routers (e.g. R3/R4), but those routes
    are not redistributed into
    other IGP areas/domains. With that, internal routers in
    an area/domain will only have routes to local nodes, yet they still
    need to build BIER forwarding state for BFERs in other areas/domains.<a href="#section-2.2-1" class="pilcrow">¶</a></p>
</section>
</div>
</section>
<section id="section-3">
      <h2 id="name-proposed-solution">
<a href="#section-3" class="section-number selfRef">3. </a><a href="#name-proposed-solution" class="section-name selfRef">Proposed Solution</a>
      </h2>
<p id="section-3-1">For the multiple IGP domains scenario in <a href="#multi-igp" class="xref">Section 2.1</a>,
   BIER information
 from one domain needs to be redistributed into another
 domain, like that BIER information is redistributed
 from one IGP area to another as specified in <span>[<a href="#RFC8401" class="xref">RFC8401</a>]</span>, 
 <span>[<a href="#RFC8444" class="xref">RFC8444</a>]</span>, and <span>[<a href="#I-D.ietf-bier-ospfv3-extensions" class="xref">I-D.ietf-bier-ospfv3-extensions</a>]</span>.<a href="#section-3-1" class="pilcrow">¶</a></p>
<p id="section-3-2">Specifically, when an ASBR redistributes BIER prefixes
 for BFERs from one protocol domain to another, BIER
 information is also redistributed except the encapsulation
 information (because BFRs in one domain will not directly
 send BIER packets to BFRs in the other domain so
 only the BFR-IDs of the BFERs matters). When BIER prefixes
 for non-BFIR/BFER (i.e. whose BFR-ID is 0) are redistributed,
 BIER information is not redistributed.<a href="#section-3-2" class="pilcrow">¶</a></p>
<p id="section-3-3">
   If route summarization is used, because a summarized prefix
   may cover many BFERs, the BFR-IDs of those covered BFERs needs
   to be explicitly listed in proxy range sub-TLV
   (see <a href="#proxy-range" class="xref">Section 4.2</a>).
   In case of Seamless MPLS (<a href="#seamless" class="xref">Section 2.2</a>),
   when a border router advertise BIER information for itself in
   one area/domain, it also explicitly lists the BFIRs/BFERs
   in other areas/domains that are reachable via itself in the
   proxy range sub-TLV.<a href="#section-3-3" class="pilcrow">¶</a></p>
<p id="section-3-4">In figure 1, R3/R4 connects two routing domains. After R3 receives 
 BIER information for Rm/Rn from domain 2 and redistribute to 
 domain 1, BFRs in domain 1 can build
 BIER forwarding state for BFERs in domain 2 through R3. 
 Similarly, R3 receives BIER information for R1/R2 from domain 1
 and redistribute into domain 2. BFRs in domain 2 can build 
 BIER forwarding state for BFERs in domain 1 through R3.<a href="#section-3-4" class="pilcrow">¶</a></p>
<p id="section-3-5">For example, in this network, suppose that Rm and Rn have 
 the prefix of 201.1.1.1/32, 201.1.1.2/32. In order to build 
 one BIER sub-domain which includes these three IGP domains, R3 
 advertises the BFR-ids of Rm/Rn with associated prefixes 
 (201.1.1.1/32, 201.1.1.2/32) into the upper domain. Similarly, 
 R4 advertises the BFR-ids of Rx/Ry with associated prefixes 
 (202.1.1.1/32, 202.1.1.2/32) into the upper domain too.<a href="#section-3-5" class="pilcrow">¶</a></p>
<p id="section-3-6">And R3/R4 advertises the prefixes of R1 and R2 (suppose 
 that the prefixes are 200.1.1.1/32 and 200.1.1.2/32) with associated BFR-ids into 
 IGP domain 1 and domain 2. Also, R3 advertises the prefixes learned from R4 
 (202.1.1.1/32, 202.1.1.2/32) with associated BFR-ids into IGP 
 domain 1. R4 also advertises the prefixes (201.1.1.1/32, 201.1.1.2/32) 
 with associated BFR-ids into IGP domain 2.<a href="#section-3-6" class="pilcrow">¶</a></p>
<p id="section-3-7">Obviously, in order to build the large BIER sub-domain, the 
 BFR-id of edge router in each IGP domain MUST NOT overlap.<a href="#section-3-7" class="pilcrow">¶</a></p>
</section>
<section id="section-4">
      <h2 id="name-specifications">
<a href="#section-4" class="section-number selfRef">4. </a><a href="#name-specifications" class="section-name selfRef">Specifications</a>
      </h2>
<section id="section-4.1">
        <h3 id="name-redistribution-of-bier-info">
<a href="#section-4.1" class="section-number selfRef">4.1. </a><a href="#name-redistribution-of-bier-info" class="section-name selfRef">Redistribution of BIER Information</a>
        </h3>
<p id="section-4.1-1">Consider a BIER sub-domain that spans multiple routing domains.
   The procedures in this section apply if a border router, which is also
   a BFR, redistribute routing information from one routing domain
   into another.<a href="#section-4.1-1" class="pilcrow">¶</a></p>
<p id="section-4.1-2">If a redistributed route is for a host route for a BFIR/BFER
   (i.e. the BFR-ID is not zero) in the same sub-domain,
   BIER information for the BFIR/BFERs MUST be advertised in the
   target routing domain as following:<a href="#section-4.1-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="section-4.1-3.1">If the target routing domain is OSPFv2, a BIER Sub-TLV
 <span>[<a href="#RFC8444" class="xref">RFC8444</a>]</span> is attached to the OSPFv2 Extended
 Prefix TLV in the OSPFv2 Extended Prefix Opaque LSA <span>[<a href="#RFC7684" class="xref">RFC7684</a>]</span>
 corresponding to the redistributed host route.<a href="#section-4.1-3.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.1-3.2">If the target routing domain is OSPFv3, a BIER Sub-TLV
 <span>[<a href="#I-D.ietf-bier-ospfv3-extensions" class="xref">I-D.ietf-bier-ospfv3-extensions</a>]</span> is attached to the OSPFv3 Extended LSA TLVs
    in the Intra-Area-Prefix TLV <span>[<a href="#RFC8362" class="xref">RFC8362</a>]</span>.
 corresponding to the redistributed host route.<a href="#section-4.1-3.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.1-3.3">If the target routing domain is ISIS, a BIER Info Sub-TLV
 <span>[<a href="#RFC8401" class="xref">RFC8401</a>]</span> is attached to the TLVs of 235, 237,
    <span>[<a href="#RFC5120" class="xref">RFC5120</a>]</span>, 135 <span>[<a href="#RFC5305" class="xref">RFC5305</a>]</span>, or 236 <span>[<a href="#RFC5308" class="xref">RFC5308</a>]</span>.<a href="#section-4.1-3.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.1-3.4">If the target routing domain is BGP, a BIER TLV
 <span>[<a href="#I-D.ietf-bier-idr-extensions" class="xref">I-D.ietf-bier-idr-extensions</a>]</span> is attached to BGP Path Attribute.<a href="#section-4.1-3.4" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-4.1-4">The BIER Sub-TLV (in case of OSPF2 and OSPFv3), BIER Info Sub-TLV (in case of IS-IS) and BIER TLV (in case of BGP) are encoded as
   specified in <span>[<a href="#RFC8444" class="xref">RFC8444</a>]</span>, 
   <span>[<a href="#I-D.ietf-bier-ospfv3-extensions" class="xref">I-D.ietf-bier-ospfv3-extensions</a>]</span>, 
   and <span>[<a href="#RFC8401" class="xref">RFC8401</a>]</span>, and <span>[<a href="#I-D.ietf-bier-idr-extensions" class="xref">I-D.ietf-bier-idr-extensions</a>]</span>.
      The encapsulation sub-TLV SHOULD NOT be included because it
      would not be used.<a href="#section-4.1-4" class="pilcrow">¶</a></p>
<p id="section-4.1-5">If a redistributed route is for a host route for a transit BFR
   (i.e. the BFR-ID is zero), BIER information for the BFR SHOULD
   NOT be redistributed, because it would not be used.<a href="#section-4.1-5" class="pilcrow">¶</a></p>
<p id="section-4.1-6">If the redistributed route is a summary or default route,
   and it covers some BFIR/BFERs, a BIER Sub-TLV (for OSPFv2 and OSPFv3), 
   or a BIER Info Sub-TLV (in case of IS-IS), or a BIER TLV (in case of BGP) MUST be
   used to advertise the covered BFIRs/BFERs via the
   BIER proxy range sub-TLV as specified in the following section.<a href="#section-4.1-6" class="pilcrow">¶</a></p>
</section>
<div id="proxy-range">
<section id="section-4.2">
        <h3 id="name-bier-proxy-range-sub-tlv">
<a href="#section-4.2" class="section-number selfRef">4.2. </a><a href="#name-bier-proxy-range-sub-tlv" class="section-name selfRef">BIER proxy range sub-TLV</a>
        </h3>
<p id="section-4.2-1">The BIER Sub-TLV can include a proxy range sub-TLV, which
   lists BFIRs/BFERs covered by a summary/default route or
   reachable via a BFR.<a href="#section-4.2-1" class="pilcrow">¶</a></p>
<div class="alignCenter art-text artwork" id="section-4.2-2">
<pre>
        0                   1                   2                   3
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |    Type       |   Length      | subdomain-id  |    resv       |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |           BFR-id              |          BFR-id range         |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |                            ...                                |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |           BFR-id              |          BFR-id range         |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                              figure 2
</pre><a href="#section-4.2-2" class="pilcrow">¶</a>
</div>
<p id="section-4.2-3" class="keepWithPrevious"></p>
<ul class="normal">
<li class="normal" id="section-4.2-4.1">Type: 8-bit unsigned integer. TBD to indicate the BIER proxy 
 range sub-TLV.<a href="#section-4.2-4.1" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.2-4.2">Length: 8-bit unsigned integer. Length of the BIER proxy range 
 sub-TLV in 4-octet units, not including the first 4 octets.<a href="#section-4.2-4.2" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.2-4.3">Subdomain-id: 8-bit unsigned integer.<a href="#section-4.2-4.3" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.2-4.4">resv: 16-bit unsigned integer. The reserved field.<a href="#section-4.2-4.4" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.2-4.5">BFR-id: 16-bit unsigned integer. The first BFR-id from original 
 advertisement.<a href="#section-4.2-4.5" class="pilcrow">¶</a>
</li>
          <li class="normal" id="section-4.2-4.6">BFR-id range: 16-bit unsigned integer. The range of BFR-ids 
 with one subdomain-id.<a href="#section-4.2-4.6" class="pilcrow">¶</a>
</li>
        </ul>
<p id="section-4.2-5">
      The BIER proxy range sub-TLV is included in the BIER Sub-TLV
   for an aggregated/summary route prefix or default route prefix,
   or in the BIER Sub-TLV for a BIER prefix (for a border router in
   a Seamless MPLS network). Multiple BIER proxy range sub-TLVs MAY be
   included in the BIER Sub-TLV.<a href="#section-4.2-5" class="pilcrow">¶</a></p>
<p id="section-4.2-6">
    The range in the BIER proxy range sub-TLV can be as granular as to
   advertise individual BFR-ids.  Though a larger range can increase
   advertisement efficiency, that requires careful planning for BFR-id
   assignment.<a href="#section-4.2-6" class="pilcrow">¶</a></p>
<p id="section-4.2-7">
    When the proxy range sub-TLV is used, 
 the mapping between a BIER prefix and its BFR-id is no longer 
 conveyed in the routing underlay. As a result, the mapping must 
 be provided by other means, e.g. in the multicast overlay.<a href="#section-4.2-7" class="pilcrow">¶</a></p>
</section>
</div>
<section id="section-4.3">
        <h3 id="name-birt-bift-calculation">
<a href="#section-4.3" class="section-number selfRef">4.3. </a><a href="#name-birt-bift-calculation" class="section-name selfRef">BIRT/BIFT Calculation</a>
        </h3>
<p id="section-4.3-1">If a BFR receives a BIER prefix whose BIER Sub-TLV includes
 a proxy range sub-TLV (i.e., the Seamless MPLS scenario),
 it treats as if that the originator advertised a default route
 with the proxy range sub-TLV.  Note that this imaginary default
 route is only for the purpose of building BIRT/BIFT entries
 and not used for unicast forwarding.<a href="#section-4.3-1" class="pilcrow">¶</a></p>
<p id="section-4.3-2">With the BIER prefixes originated in the local routing area/domain,
 the BIER prefixes and summary/default routes redistributed into the
 local routing area/domain, and the imaginary default route mentioned
 above, a BFR builds BIRTs as specified in <span>[<a href="#RFC8279" class="xref">RFC8279</a>]</span> with entries including
 host/summary/default prefixes.<a href="#section-4.3-2" class="pilcrow">¶</a></p>
<p id="section-4.3-3">BIFT entries are then derived from a corresponding BIRT.
 For a BFER covered by the proxy range sub-TLVs associated with
 the summary/default prefixes (whether or not the deafult prefix is the
 imaginary one as mentioned above), its BIFT entry is derived from
 the summary/default prefix entry in the BIRT.
   It is possible that a BFER is covered in the proxy
   range sub-TLV of multiple default/summary routes. In that case, ECMP
   MAY be used and longest match SHOULD be used. For example, if ABR1
   advertises default/summary route P1 while ABR2 advertises a more
   specific summary route P2 and both have a proxy range sub-TLV that
   covers BFR-ID 100, then the BIFT entry for BFR-ID 100 should follow
   the P2 route in BIRT.<a href="#section-4.3-3" class="pilcrow">¶</a></p>
<p id="section-4.3-4">
      With this scheme, even though the BIER prefixes are not advertised
   into the IGP for an area/domain in a Seamless MPLS network and unicast
   traffic for those BIER prefixes are tunneled through, corresponding BIFT entries are
   maintained inside the area/domain for the purpose of efficient BIER
   forwarding.  Otherwise, BIER forwarding through the area/domain would be
   tunneled just like unicast case.<a href="#section-4.3-4" class="pilcrow">¶</a></p>
</section>
</section>
<section id="section-5">
      <h2 id="name-iana-considerations">
<a href="#section-5" class="section-number selfRef">5. </a><a href="#name-iana-considerations" class="section-name selfRef">IANA Considerations</a>
      </h2>
<p id="section-5-1">IANA is requested to set up a new types of sub-TLV (TLV) registry value
    for BIER proxy range advertisement in OSPF, ISIS, BGP, etc.<a href="#section-5-1" class="pilcrow">¶</a></p>
</section>
<section id="section-6">
      <h2 id="name-security-considerations">
<a href="#section-6" class="section-number selfRef">6. </a><a href="#name-security-considerations" class="section-name selfRef">Security Considerations</a>
      </h2>
<p id="section-6-1">Implementations must assure that malformed TLV and Sub-TLV
 permutations do not result in errors which cause hard protocol
 failures.<a href="#section-6-1" class="pilcrow">¶</a></p>
</section>
<section id="section-7">
      <h2 id="name-acknowledgements">
<a href="#section-7" class="section-number selfRef">7. </a><a href="#name-acknowledgements" class="section-name selfRef">Acknowledgements</a>
      </h2>
<p id="section-7-1">The authors would like to thank Stig Venaas for his valuable comments and suggestions.<a href="#section-7-1" class="pilcrow">¶</a></p>
</section>
<section id="section-8">
      <h2 id="name-references">
<a href="#section-8" class="section-number selfRef">8. </a><a href="#name-references" class="section-name selfRef">References</a>
      </h2>
<section id="section-8.1">
        <h3 id="name-normative-references">
<a href="#section-8.1" class="section-number selfRef">8.1. </a><a href="#name-normative-references" class="section-name selfRef">Normative References</a>
        </h3>
<dl class="references">
<dt id="I-D.ietf-bier-idr-extensions">[I-D.ietf-bier-idr-extensions]</dt>
        <dd>
<span class="refAuthor">Xu, X.</span>, <span class="refAuthor">Chen, M.</span>, <span class="refAuthor">Patel, K.</span>, <span class="refAuthor">Wijnands, I.</span>, and <span class="refAuthor">A. Przygienda</span>, <span class="refTitle">"BGP Extensions for BIER"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-bier-idr-extensions-07</span>, <time datetime="2019-09-06" class="refDate">6 September 2019</time>, <span>&lt;<a href="https://www.ietf.org/archive/id/draft-ietf-bier-idr-extensions-07.txt">https://www.ietf.org/archive/id/draft-ietf-bier-idr-extensions-07.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-bier-lsr-ethernet-extensions">[I-D.ietf-bier-lsr-ethernet-extensions]</dt>
        <dd>
<span class="refAuthor">Dhanaraj, S.</span>, <span class="refAuthor">Yan, G.</span>, <span class="refAuthor">Wijnands, I.</span>, <span class="refAuthor">Psenak, P.</span>, <span class="refAuthor">Zhang, Z.</span>, and <span class="refAuthor">J. Xie</span>, <span class="refTitle">"LSR Extensions for BIER over Ethernet"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-bier-lsr-ethernet-extensions-02</span>, <time datetime="2020-12-02" class="refDate">2 December 2020</time>, <span>&lt;<a href="https://www.ietf.org/archive/id/draft-ietf-bier-lsr-ethernet-extensions-02.txt">https://www.ietf.org/archive/id/draft-ietf-bier-lsr-ethernet-extensions-02.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="I-D.ietf-bier-ospfv3-extensions">[I-D.ietf-bier-ospfv3-extensions]</dt>
        <dd>
<span class="refAuthor">Psenak, P.</span>, <span class="refAuthor">Nainar, N. K.</span>, and <span class="refAuthor">I. Wijnands</span>, <span class="refTitle">"OSPFv3 Extensions for BIER"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-bier-ospfv3-extensions-05</span>, <time datetime="2021-11-19" class="refDate">19 November 2021</time>, <span>&lt;<a href="https://www.ietf.org/archive/id/draft-ietf-bier-ospfv3-extensions-05.txt">https://www.ietf.org/archive/id/draft-ietf-bier-ospfv3-extensions-05.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5120">[RFC5120]</dt>
        <dd>
<span class="refAuthor">Przygienda, T.</span>, <span class="refAuthor">Shen, N.</span>, and <span class="refAuthor">N. Sheth</span>, <span class="refTitle">"M-ISIS: Multi Topology (MT) Routing in Intermediate System to Intermediate Systems (IS-ISs)"</span>, <span class="seriesInfo">RFC 5120</span>, <span class="seriesInfo">DOI 10.17487/RFC5120</span>, <time datetime="2008-02" class="refDate">February 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5120">https://www.rfc-editor.org/info/rfc5120</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5305">[RFC5305]</dt>
        <dd>
<span class="refAuthor">Li, T.</span> and <span class="refAuthor">H. Smit</span>, <span class="refTitle">"IS-IS Extensions for Traffic Engineering"</span>, <span class="seriesInfo">RFC 5305</span>, <span class="seriesInfo">DOI 10.17487/RFC5305</span>, <time datetime="2008-10" class="refDate">October 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5305">https://www.rfc-editor.org/info/rfc5305</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC5308">[RFC5308]</dt>
        <dd>
<span class="refAuthor">Hopps, C.</span>, <span class="refTitle">"Routing IPv6 with IS-IS"</span>, <span class="seriesInfo">RFC 5308</span>, <span class="seriesInfo">DOI 10.17487/RFC5308</span>, <time datetime="2008-10" class="refDate">October 2008</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc5308">https://www.rfc-editor.org/info/rfc5308</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7684">[RFC7684]</dt>
        <dd>
<span class="refAuthor">Psenak, P.</span>, <span class="refAuthor">Gredler, H.</span>, <span class="refAuthor">Shakir, R.</span>, <span class="refAuthor">Henderickx, W.</span>, <span class="refAuthor">Tantsura, J.</span>, and <span class="refAuthor">A. Lindem</span>, <span class="refTitle">"OSPFv2 Prefix/Link Attribute Advertisement"</span>, <span class="seriesInfo">RFC 7684</span>, <span class="seriesInfo">DOI 10.17487/RFC7684</span>, <time datetime="2015-11" class="refDate">November 2015</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7684">https://www.rfc-editor.org/info/rfc7684</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8279">[RFC8279]</dt>
        <dd>
<span class="refAuthor">Wijnands, IJ., Ed.</span>, <span class="refAuthor">Rosen, E., Ed.</span>, <span class="refAuthor">Dolganow, A.</span>, <span class="refAuthor">Przygienda, T.</span>, and <span class="refAuthor">S. Aldrin</span>, <span class="refTitle">"Multicast Using Bit Index Explicit Replication (BIER)"</span>, <span class="seriesInfo">RFC 8279</span>, <span class="seriesInfo">DOI 10.17487/RFC8279</span>, <time datetime="2017-11" class="refDate">November 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8279">https://www.rfc-editor.org/info/rfc8279</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8362">[RFC8362]</dt>
        <dd>
<span class="refAuthor">Lindem, A.</span>, <span class="refAuthor">Roy, A.</span>, <span class="refAuthor">Goethals, D.</span>, <span class="refAuthor">Reddy Vallem, V.</span>, and <span class="refAuthor">F. Baker</span>, <span class="refTitle">"OSPFv3 Link State Advertisement (LSA) Extensibility"</span>, <span class="seriesInfo">RFC 8362</span>, <span class="seriesInfo">DOI 10.17487/RFC8362</span>, <time datetime="2018-04" class="refDate">April 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8362">https://www.rfc-editor.org/info/rfc8362</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8401">[RFC8401]</dt>
        <dd>
<span class="refAuthor">Ginsberg, L., Ed.</span>, <span class="refAuthor">Przygienda, T.</span>, <span class="refAuthor">Aldrin, S.</span>, and <span class="refAuthor">Z. Zhang</span>, <span class="refTitle">"Bit Index Explicit Replication (BIER) Support via IS-IS"</span>, <span class="seriesInfo">RFC 8401</span>, <span class="seriesInfo">DOI 10.17487/RFC8401</span>, <time datetime="2018-06" class="refDate">June 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8401">https://www.rfc-editor.org/info/rfc8401</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8444">[RFC8444]</dt>
      <dd>
<span class="refAuthor">Psenak, P., Ed.</span>, <span class="refAuthor">Kumar, N.</span>, <span class="refAuthor">Wijnands, IJ.</span>, <span class="refAuthor">Dolganow, A.</span>, <span class="refAuthor">Przygienda, T.</span>, <span class="refAuthor">Zhang, J.</span>, and <span class="refAuthor">S. Aldrin</span>, <span class="refTitle">"OSPFv2 Extensions for Bit Index Explicit Replication (BIER)"</span>, <span class="seriesInfo">RFC 8444</span>, <span class="seriesInfo">DOI 10.17487/RFC8444</span>, <time datetime="2018-11" class="refDate">November 2018</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8444">https://www.rfc-editor.org/info/rfc8444</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
<section id="section-8.2">
        <h3 id="name-informative-references">
<a href="#section-8.2" class="section-number selfRef">8.2. </a><a href="#name-informative-references" class="section-name selfRef">Informative References</a>
        </h3>
<dl class="references">
<dt id="I-D.ietf-mpls-seamless-mpls">[I-D.ietf-mpls-seamless-mpls]</dt>
        <dd>
<span class="refAuthor">Leymann, N.</span>, <span class="refAuthor">Decraene, B.</span>, <span class="refAuthor">Filsfils, C.</span>, <span class="refAuthor">Konstantynowicz, M.</span>, and <span class="refAuthor">D. Steinberg</span>, <span class="refTitle">"Seamless MPLS Architecture"</span>, <span class="refContent">Work in Progress</span>, <span class="seriesInfo">Internet-Draft, draft-ietf-mpls-seamless-mpls-07</span>, <time datetime="2014-06-28" class="refDate">28 June 2014</time>, <span>&lt;<a href="https://www.ietf.org/archive/id/draft-ietf-mpls-seamless-mpls-07.txt">https://www.ietf.org/archive/id/draft-ietf-mpls-seamless-mpls-07.txt</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC7761">[RFC7761]</dt>
        <dd>
<span class="refAuthor">Fenner, B.</span>, <span class="refAuthor">Handley, M.</span>, <span class="refAuthor">Holbrook, H.</span>, <span class="refAuthor">Kouvelas, I.</span>, <span class="refAuthor">Parekh, R.</span>, <span class="refAuthor">Zhang, Z.</span>, and <span class="refAuthor">L. Zheng</span>, <span class="refTitle">"Protocol Independent Multicast - Sparse Mode (PIM-SM): Protocol Specification (Revised)"</span>, <span class="seriesInfo">STD 83</span>, <span class="seriesInfo">RFC 7761</span>, <span class="seriesInfo">DOI 10.17487/RFC7761</span>, <time datetime="2016-03" class="refDate">March 2016</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc7761">https://www.rfc-editor.org/info/rfc7761</a>&gt;</span>. </dd>
<dd class="break"></dd>
<dt id="RFC8277">[RFC8277]</dt>
      <dd>
<span class="refAuthor">Rosen, E.</span>, <span class="refTitle">"Using BGP to Bind MPLS Labels to Address Prefixes"</span>, <span class="seriesInfo">RFC 8277</span>, <span class="seriesInfo">DOI 10.17487/RFC8277</span>, <time datetime="2017-10" class="refDate">October 2017</time>, <span>&lt;<a href="https://www.rfc-editor.org/info/rfc8277">https://www.rfc-editor.org/info/rfc8277</a>&gt;</span>. </dd>
<dd class="break"></dd>
</dl>
</section>
</section>
<section id="appendix-A">
      <h2 id="name-proxy-range-sub-tlv-usage">
<a href="#appendix-A" class="section-number selfRef">Appendix A. </a><a href="#name-proxy-range-sub-tlv-usage" class="section-name selfRef">Proxy range sub-TLV usage</a>
      </h2>
<p id="appendix-A-1">This appendix is to make the function understood more easily.
    Except for inter-area case, the function is also suitable for inter-as case.    
    In the same example of figure 1, in case there are 40 edge routers in domain 1, 
 the BFR-ids of domain 1 start from 51 to 90, and the prefixes of 
 these routers start from 201.1.1.1/32 to 201.1.1.40/32. These 
 assigned BFR-IDs are not overlapped with the BFR-IDs in any other domain.<a href="#appendix-A-1" class="pilcrow">¶</a></p>
<p id="appendix-A-2">
    In order to build a BIER sub-domain across these areas, the two advertisement methods 
    defined in <a href="#proxy-range" class="xref">Section 4.2</a> can be used:<a href="#appendix-A-2" class="pilcrow">¶</a></p>
<ul class="normal">
<li class="normal" id="appendix-A-3.1">As a transit node, R3 advertises the BIER sub-TLV with BFR-ID set to 0. 
    When R3 is not allowed to advertise the summary or specific prefixes into the upper domain, 
  R3 can advertise the proxy range sub-TLV with the host prefix directly. 
  So there are two sub-TLVs advertisement associated with the host prefix of R3.<a href="#appendix-A-3.1" class="pilcrow">¶</a>
</li>
        <li class="normal" id="appendix-A-3.2">As a transit node, R3 advertises the BIER sub-TLV with BFR-ID set to 0. 
    When R3 is allowed to advertise the summary prefix into the upper domain, 
 R3 can advertise the proxy range sub-TLV with the summarized prefix, 201.1.1.0/24, with the BFR-id set 
 to 51, the BFR-id range set to 40, into the upper domain. In this case, there are two prefixes advertised by R3. 
  But the summary prefix can not be used to encapsulate BIER packet directly in case of tunneling case. 
  The summary prefix is only used to generate the BIFT.<a href="#appendix-A-3.2" class="pilcrow">¶</a>
</li>
      </ul>
<p id="appendix-A-4">Then the router in the uppler domain can build the BIER forwarding table, the nexthops of BFR-IDs 
  in the proxy range sub-TLV are set to R3.<a href="#appendix-A-4" class="pilcrow">¶</a></p>
<p id="appendix-A-5">The same function is also applied to R4 when it advertises the BFR-IDs to the upper domain. 
  This method is also applied to R3/R4 when it advertises the BFR-IDs to the lower domain. 
  When R3 advertises the prefixes from the upper domain and domain 2 
 into domain 1, except the host prefix of R3 with BFR-ID set to 0, 
  R3 may advertise only one default route (0.0.0.0/0) 
 into domain 1 if one or more continuous BFR-id range can be 
 attached. Suppose that the BFR-id in the upper domain starts from 
 1001 to 1050, the BFR-id in domain 2 starts from 201 to 250, and 
 these ranges are not overlapped with the ranges in any other 
 domain. Suppose that the sub-domain ID is 1, the BIER proxy range 
 sub-TLV may be advertised like this:<a href="#appendix-A-5" class="pilcrow">¶</a></p>
<div class="alignCenter art-text artwork" id="appendix-A-6">
<pre>
    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |     TBD       |       2        |       1      |       0       |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           1001                 |              50              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           201                  |              50              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
                         figure 3
</pre><a href="#appendix-A-6" class="pilcrow">¶</a>
</div>
<p id="appendix-A-7" class="keepWithPrevious"></p>
<p id="appendix-A-8">Then the BIER overlay is built among R1, R2, Rm, Rn, Rx and Ry. 
 R3 and R4 need not maintain the multicast overlay states. 
  The optimized summary/ aggregated or default prefix can be 
 generated by the operation policy which is configured by the 
 network administrator.<a href="#appendix-A-8" class="pilcrow">¶</a></p>
<p id="appendix-A-9">If two or more ABRs in one domain are used to reistribute the prefix, for example in figure 4 below:<a href="#appendix-A-9" class="pilcrow">¶</a></p>
<div class="alignCenter art-text artwork" id="appendix-A-10">
<pre>
+-------------------------------------------------------+
|              +----+             +----+         BIER   |
|  +-----------+ R1 +-------------+ R2 +-----+ domain 1 |
|  |           +----+             +----+     |          |
|  |                   OSPF/ISIS             |          |
|  |                                         |          |
|  |  +----+    +----+            +----+     |          |
|  +--+    +----+    +------------+    +-----+          |
|  +--+ R5 +----+ R3 +---+    +---+ R4 +------------+   |
|  |  +----+    +----+   |    |   +----+            |   |
|  |                     |    |                     |   |
|  |    OSPF domain 1    |    |    OSPF domain 2    |   |
|  |                     |    |                     |   |
|  |  +----+     +----+  |    |   +----+    +----+  |   |
|  +--+ Rm +-----+ Rn +--+    +---+ Rx +----+ Ry +--+   |
|     +----+     +----+           +----+    +----+      |
+-------------------------------------------------------+
                       Figure 4
</pre><a href="#appendix-A-10" class="pilcrow">¶</a>
</div>
<p id="appendix-A-11" class="keepWithPrevious"></p>
<p id="appendix-A-12">As the ABRs, except the host prefixes of R3 and R5 advertisement, 
  R3 and R5 can both advertise the proxy range sub-TLV with their host prefix, 
  the routers can select one of them as the nexthop, or select both of them for ECMP.<a href="#appendix-A-12" class="pilcrow">¶</a></p>
<p id="appendix-A-13">If R3 and R5 are allowed to advertise the summary prefix received from the upper domain. 
  They can advertise the same summary prefixes or the different prefixes according to the operation policy. 
  When they advertise the same summary prefixes, the R3 and R5 can also be used for ECMP. 
  When they advertise the different summary prefixes, the more specific prefixes are used to generate 
  the BIER forwarding table. 
  Whatever the same or different prefixes are advertised, the nexthop is set to R3/R5.<a href="#appendix-A-13" class="pilcrow">¶</a></p>
<p id="appendix-A-14">In case the range of BFR-ids in one domain is overlapped with the 
 BFR-ids in any other domain, the proxy range sub-TLV may not be used. 
 In the same example above, if the BFR-ids in domain 1 are 21, 31, 41, 
 etc., the BFR-ids in domain 2 are 22, 32, 42, etc., even if the 
 summarized prefixes are not overlapped with the prefixes in any 
 other domain, when R3 advertises the summarized prefixes in domain 1 
 into the upper domain, the proxy range sub-TLV may not optimize the 
 advertisement.<a href="#appendix-A-14" class="pilcrow">¶</a></p>
<p id="appendix-A-15">After the forwarding plane is built, 
  the nexthop of the range BFR-IDs is set to the ABR router. 
  For example, when R1 receives multicast 
 packet, and the receivers of this flow are connected by Rm and Rx, 
 R1 encapsulates BIER header in front of the flow packet with 
 BFR-ids set to Rm and Rx. The routers in the upper domain forward the packet to the ABR routers: R3, R4 and R5.   
  When R3/R4/R5 receives the packet, R3/R4/R5 needs 
 not decapsulate and re-encapsulate the packet. R3/R4/R5 just forwards 
 the packet according to the BIER forwarding table. 
  Similar with the upper domain, the routers in lower domain forward the packet to the edge routers: Rm and Rx.
  When the packet reaches Rm and Rx, Rm and Rx remove the BIER header and forward it to receivers.<a href="#appendix-A-15" class="pilcrow">¶</a></p>
</section>
<div id="authors-addresses">
<section id="appendix-B">
      <h2 id="name-authors-addresses">
<a href="#name-authors-addresses" class="section-name selfRef">Authors' Addresses</a>
      </h2>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Zheng(Sandy) Zhang</span></div>
<div dir="auto" class="left"><span class="org">ZTE Corporation</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:zhang.zheng@zte.com.cn" class="email">zhang.zheng@zte.com.cn</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Bo Wu</span></div>
<div dir="auto" class="left"><span class="org">Individual</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:w1973941761@163.com" class="email">w1973941761@163.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Zhaohui Zhang (<span class="role">editor</span>)</span></div>
<div dir="auto" class="left"><span class="org">Juniper Networks</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:zzhang@juniper.net" class="email">zzhang@juniper.net</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">IJsbrand Wijnands</span></div>
<div dir="auto" class="left"><span class="org">Cisco Systems, Inc.</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:ice@cisco.com" class="email">ice@cisco.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Yisong Liu</span></div>
<div dir="auto" class="left"><span class="org">China Mobile</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:liuyisong.ietf@gmail.com" class="email">liuyisong.ietf@gmail.com</a>
</div>
</address>
<address class="vcard">
        <div dir="auto" class="left"><span class="fn nameRole">Hooman Bidgoli</span></div>
<div dir="auto" class="left"><span class="org">Nokia</span></div>
<div class="email">
<span>Email:</span>
<a href="mailto:hooman.bidgoli@nokia.com" class="email">hooman.bidgoli@nokia.com</a>
</div>
</address>
</section>
</div>
<script>const toc = document.getElementById("toc");
toc.querySelector("h2").addEventListener("click", e => {
  toc.classList.toggle("active");
});
toc.querySelector("nav").addEventListener("click", e => {
  toc.classList.remove("active");
});
</script>
</body>
</html>
