


Network Working Group                                         G. Somogyi
Internet-Draft                                    Nokia Siemens Networks
Updates: 4867 (if approved)                            November 21, 2008
Intended status: Standards Track
Expires: May 25, 2009



                   draft-somogyi-sdp-amr-bicc-like-00

Status of this Memo

   By submitting this Internet-Draft, each author represents that any
   applicable patent or other IPR claims of which he or she is aware
   have been or will be disclosed, and any of which he or she becomes
   aware will be disclosed, in accordance with Section 6 of BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on May 25, 2009.

Abstract

   This document describes and update to File Storage Format for the
   Adaptive Multi-Rate (AMR) and Adaptive Multi-Rate Wideband (AMR-WB)
   Audio Codecs.  The new format allows better interworking with widely
   deployed mobile telecommunication switching systems.  This document
   updates RFC 4867 [RFC4867].









Somogyi                   Expires May 25, 2009                  [Page 1]

Internet-Draft        SDP format for AMR and AMR-WB        November 2008


Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . . . 3
     1.1.  Requirements Language . . . . . . . . . . . . . . . . . . . 3
   2.  Shortcomings of the original format . . . . . . . . . . . . . . 3
     2.1.  Information loss  . . . . . . . . . . . . . . . . . . . . . 3
     2.2.  Significant signaling overhead  . . . . . . . . . . . . . . 4
   3.  SDP format extension  . . . . . . . . . . . . . . . . . . . . . 5
     3.1.  New parameters  . . . . . . . . . . . . . . . . . . . . . . 5
     3.2.  Example . . . . . . . . . . . . . . . . . . . . . . . . . . 5
   4.  Backward compatibility  . . . . . . . . . . . . . . . . . . . . 6
     4.1.  Full backward compatibility . . . . . . . . . . . . . . . . 6
     4.2.  Partial backward compatibility  . . . . . . . . . . . . . . 7
     4.3.  Deciding backward compatibility mode  . . . . . . . . . . . 7
   5.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . . . 7
   6.  IANA Considerations . . . . . . . . . . . . . . . . . . . . . . 7
   7.  Security Considerations . . . . . . . . . . . . . . . . . . . . 7
   8.  References  . . . . . . . . . . . . . . . . . . . . . . . . . . 7
     8.1.  Normative References  . . . . . . . . . . . . . . . . . . . 7
     8.2.  Informative References  . . . . . . . . . . . . . . . . . . 8
   Author's Address  . . . . . . . . . . . . . . . . . . . . . . . . . 8
   Intellectual Property and Copyright Statements  . . . . . . . . . . 9





























Somogyi                   Expires May 25, 2009                  [Page 2]

Internet-Draft        SDP format for AMR and AMR-WB        November 2008


1.  Introduction

   The SDP [RFC4566] format description of AMR and AMR-WB codecs are
   described in RFC 4867 [RFC4867].  That format causes trouble for SIP
   [RFC3261] based mobile switching systems, as the described SDP format
   did not contain all the necessary information for proper codec
   negotiation.  And that format caused significant signaling overhead.

   The aim of this document to address these issues, while remaining
   backward compatible.  This document introduces new parameters,
   allowing describing codecs of mobile world in full detail.  The new
   parameters make the SDP even larger.  But it makes several payload
   types of the same codec redundant, thus those could be omitted.
   Omitting those payload types limits backward compatibility, and
   therefore optional.

   The new syntax elements were designed to fully support 3GPP
   Transcoder Free Operation (TrFO; 3GPP TS 23.153 [3GPP23153]) and
   Tandem Free Operation (TFO; 3GPP TS 28.062 [3GPP28062]).  Compliance
   with 3GPP IP Multimedia Subsystem (IMS; TS 26.114[3GPP26114]) was
   taken care of.  Although 3GPP Release 8 standards were used as
   reference, the descriptions apply to earlier and possibly later
   releases, as well.  Besides mobile switching systems this document
   was created with the intention to be able to be used within any kind
   of SIP systems.

1.1.  Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described inRFC 2119 [RFC2119].


2.  Shortcomings of the original format

2.1.  Information loss

   The old syntax did not provide a way to represent all the AMR codec
   information defined for mobile switches at 3GPP TS 23.153
   [3GPP23153].  The information loss could result extra transcoding and
   speech quality degradation.

   Using the syntax defined in RFC 4867 only the following 3GPP single
   codec format parameter is presented in SDP in full detail:







Somogyi                   Expires May 25, 2009                  [Page 3]

Internet-Draft        SDP format for AMR and AMR-WB        November 2008


   ACS:            Active Codec mode Set is presented by "mode-set"
                   parameter.

   Using the syntax defined in RFC 4867 the following 3GPP single codec
   format parameters are NOT presented in full detail:

   SCS:            Supported Codec mode Set is the list of all supported
                   modes.  It is a superset of ACS.  Using codec
                   negotiation methods ACS can be modified to use any of
                   the supported modes.

                   As the syntax defined in RFC 4867 does not have
                   parameter representing SCS, several distinct payload
                   types present the most preferred mode sets, in
                   accordance with 3GPP TS 29.163 [3GPP29163].
                   Therefore only a fraction of the mode combinations
                   are presented, compared to what is intended.

   MACS:           Maximal number of codec modes in the ACS shows the
                   maximum number of codec modes that may be selected
                   for the ACS at a time during speech codec
                   negotiation.

   OM:             Optimization Mode flag shows whether optimization
                   (modification) of Active Codec mode Set is supported
                   or not.  If optimization is not supported, SCS and
                   MACS have no meaning for the relevant codec.

   Codec type:     There are numerous AMR codec types, described at
                   3GPP TS 26.103 [3GPP26103].  Those form two groups,
                   narrow-band (NB) and wide-band (WB) AMR codecs.  In
                   SDP representation there is one NB and one WB codec
                   type.  As codecs within one group have different
                   properties, those properties are described by
                   additional codec parameters in SDP.  According to
                   3GPP TS 29.163 [3GPP29163] when only one mode is
                   defined in "mode-set" parameter, "mode-change-period"
                   and "mode-change-neighbor" parameters should not be
                   present.  That causes trouble, as in single mode
                   configuration "UMTS AMR" and "FR AMR" codecs become
                   indistinguishable, even though they are not
                   compatible, according to 3GPP TS 23.153 [3GPP23153].

2.2.  Significant signaling overhead

   As described beforehand, RFC 4867 [RFC4867] does not provide a
   mechanism to signal the SCS, MACS or OM parameters in SDP.  Therefore
   codecs with OM allowed should have been translated into a list of SDP



Somogyi                   Expires May 25, 2009                  [Page 4]

Internet-Draft        SDP format for AMR and AMR-WB        November 2008


   payload formats, where each includes a "mode-set" parameter with a
   unique value derived from the ACS, SCS and MACS.  That resulted in
   quite huge SDPs.  Regarding signaling that significantly increased
   the traffic, required significantly mode processing resources to
   parse and significant extra memory to store the information elements
   of SDP.


3.  SDP format extension

3.1.  New parameters

   The following new codec format parameters are introduced:

   extra-mode-set: Lists supported modes that are not listed in mode-set
                   (ACS).  Value syntax is the same as for parameter
                   "mode-set", defined at RFC 4867 [RFC4867].  If
                   optimization of ACS is supported and SCS differs from
                   ACS, then the parameter MUST be present, otherwise it
                   SHOULD NOT be present.

   macs:           Defines MACS.  Valid values between 1 and 8.  (Note,
                   that 3GPP TS 26.103 [3GPP26103] defines range between
                   0 and 7, value zero meaning eight.  Here "8"
                   represents value eight.)  If optimization of ACS is
                   supported, then the parameter MUST be present,
                   otherwise it MUST NOT be present.  Consequently, the
                   presence of "macs" parameter indicates the status of
                   OM.

   codec-type:     Codec type.  Valid values are capitalized names of
                   AMR codecs defined in 3GPP TS 26.103 [3GPP26103],
                   spaces replaced by underscores.  Namely FR_AMR,
                   HR_AMR, UMTS_AMR, UMTS_AMR_2, OHR_AMR, FR_AMR-WB,
                   UMTS_AMR-WB, OFR_AMR-WB and OHR_AMR-WB.  This
                   parameter MAY be omitted if the codec type is obvious
                   from mode change parameters defined at RFC 4867
                   [RFC4867].  In such case omitting codec type is
                   RECOMMENDED.  Codec type MUST NOT conflict with mode
                   change parameters.

3.2.  Example

   The example shows a possible SDP representation of FR AMR codec with
   ACS=4,5,6,7; SCS=2,3,4,5,6,7; OM=supported; MACS=4.

   Note: There is an extra line-break in the SDP example at extra-mode-
   set attribute.  That was added so that to match traditional RFC



Somogyi                   Expires May 25, 2009                  [Page 5]

Internet-Draft        SDP format for AMR and AMR-WB        November 2008


   formatting.  Real SDP does not contain such line break.

           v=0
           o=- 0 1 IN IP4 1.2.3.4
           s=-
           c=IN IP4 5.6.7.8
           t=0 0
           m=audio 6000 RTP/AVP 96 97 98 99 100
           b=AS:16
           a=rtpmap:96 AMR/8000
           a=fmtp:96 mode-set=4,5,6,7; mode-change-period=2;
            extra-mode-set=2,3; macs=4
           a=rtpmap:97 AMR/8000
           a=fmtp:97 mode-set=2,4,5,6; mode-change-period=2
           a=rtpmap:98 AMR/8000
           a=fmtp:98 mode-set=2,4,6; mode-change-period=2
           a=rtpmap:99 AMR/8000
           a=fmtp:99 mode-set=3,6; mode-change-period=2
           a=rtpmap:100 AMR/8000
           a=fmtp:100 mode-set=3; codec-type=FR_AMR

   Explanation on RTP payload type descriptions:

   96:     All codec data present.  Codec type is obvious, so not
           explicitly stated.

   97-99:  These lines are not necessary to be present, if full backward
           compatibility is not needed.  Codec type is obvious, so not
           explicitly stated.  These lines do not contain any new
           parameter defined in this document, as the extra information
           is available at the definition of payload 96.

   100:    This line is not necessary to be present, if full backward
           compatibility is not needed.  As codec type is not obvious,
           it is explicitly stated here.


4.  Backward compatibility

4.1.  Full backward compatibility

   Full backward compatibility with RFC 4867 [RFC4867] can be achieved
   by enumerating possible mode sets, as before.  Extra parameters must
   not cause any problem for older implementations.







Somogyi                   Expires May 25, 2009                  [Page 6]

Internet-Draft        SDP format for AMR and AMR-WB        November 2008


4.2.  Partial backward compatibility

   The aim of providing only partial compatibility is to reduce
   signaling bandwidth, CPU and RAM usage.  Partial compatibility is
   achieved by not presenting redundant information (payload type
   description 97-100 in the example).  Older implementations interpret
   the received payload type description as usual, but they are provided
   with less rich set of choices.

4.3.  Deciding backward compatibility mode

   It is up to the implementation which approach to take.  For example
   the compatibility mode can be fixed, configurable, or even route
   specific decisions could be made.


5.  Acknowledgements

   Andras Stefan (Nokia Siemens Networks) provided great support in
   writing this document by explaining his viewes on issues of AMR
   codecs.


6.  IANA Considerations

   This memo includes no request to IANA.  Two media types (audio/AMR
   and audio/AMR-WB) have already been registered.


7.  Security Considerations

   There are no specific security issues regarding AMR codec syntax
   extension.


8.  References

8.1.  Normative References

   [3GPP23153]
              3rd Generation Partnership Project, 3GPP., "3GPP TS 23.153
              Out of band transcoder control; Stage 2, version 8.0.0",
              2007-12.

   [3GPP26103]
              3rd Generation Partnership Project, 3GPP., "3GPP TS 26.103
              Speech codec list for GSM and UMTS, version 8.0.0",
              2008-09.



Somogyi                   Expires May 25, 2009                  [Page 7]

Internet-Draft        SDP format for AMR and AMR-WB        November 2008


   [3GPP29163]
              3rd Generation Partnership Project, 3GPP., "3GPP TS 29.163
              Interworking between the IP Multimedia (IM) Core Network
              (CN) subsystem and Circuit Switched (CS) networks, version
              8.1.0", 2007-12.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC4867]  Sjoberg, J., Westerlund, M., Lakaniemi, A., and Q. Xie,
              "RTP Payload Format and File Storage Format for the
              Adaptive Multi-Rate (AMR) and Adaptive Multi-Rate Wideband
              (AMR-WB) Audio Codecs", RFC 4867, April 2007.

8.2.  Informative References

   [3GPP26114]
              3rd Generation Partnership Project, 3GPP., "3GPP TS 26.114
              IP Multimedia Subsystem (IMS); Multimedia Telephony; Media
              handling and interaction, version 8.0.0", 2008-09.

   [3GPP28062]
              3rd Generation Partnership Project, 3GPP., "3GPP TS 28.062
              Inband Tandem Free Operation (TFO) of speech codecs;
              Service description; Stage 3, version 7.0.0", 2007-06.

   [RFC3261]  Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston,
              A., Peterson, J., Sparks, R., Handley, M., and E.
              Schooler, "SIP: Session Initiation Protocol", RFC 3261,
              June 2002.

   [RFC4566]  Handley, M., Jacobson, V., and C. Perkins, "SDP: Session
              Description Protocol", RFC 4566, July 2006.


Author's Address

   Gabor Somogyi
   Nokia Siemens Networks
   Koztelek u. 6.
   Budapest  1092
   Hungary

   Email: gabor.somogyi@nsn.com







Somogyi                   Expires May 25, 2009                  [Page 8]

Internet-Draft        SDP format for AMR and AMR-WB        November 2008


Full Copyright Statement

   Copyright (C) The IETF Trust (2008).

   This document is subject to the rights, licenses and restrictions
   contained in BCP 78, and except as set forth therein, the authors
   retain all their rights.

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY, THE IETF TRUST AND
   THE INTERNET ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS
   OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF
   THE INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Intellectual Property

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in BCP 78 and BCP 79.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   http://www.ietf.org/ipr.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.











Somogyi                   Expires May 25, 2009                  [Page 9]


