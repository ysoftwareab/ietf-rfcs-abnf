



Network Working Group                                      L. Qiang, Ed.
Internet-Draft                                                    B. Liu
Intended status: Informational                                    Huawei
Expires: November 30, 2018                                       L. Geng
                                                            China Mobile
                                                            May 29, 2018


                   Large-Scale Deterministic Network
                draft-qiang-detnet-large-scale-detnet-00

Abstract

   This document presents a Large-scale Deterministic Network (LDN)
   system, which consists of Scalable Deterministic Forwarding (SDF) and
   Scalable Resource Reservation (SRR).

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on November 30, 2018.

Copyright Notice

   Copyright (c) 2018 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.



Qiang, et al.           Expires November 30, 2018               [Page 1]

Internet-Draft  Supervised Heterogeneous Network Slicing        May 2018


Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
     1.1.  Requirements Language . . . . . . . . . . . . . . . . . .   2
     1.2.  Terminology & Abbreviations . . . . . . . . . . . . . . .   2
   2.  Scalable Deterministic Forwarding . . . . . . . . . . . . . .   3
     2.1.  Three Queues  . . . . . . . . . . . . . . . . . . . . . .   4
     2.2.  Cycle Identifier Carrying . . . . . . . . . . . . . . . .   5
   3.  Scalable Resource Reservation . . . . . . . . . . . . . . . .   5
   4.  Performance Analysis  . . . . . . . . . . . . . . . . . . . .   6
     4.1.  Queueing Delay  . . . . . . . . . . . . . . . . . . . . .   6
     4.2.  Jitter  . . . . . . . . . . . . . . . . . . . . . . . . .   6
   5.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   6
   6.  Security Considerations . . . . . . . . . . . . . . . . . . .   6
   7.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   6
   8.  Normative References  . . . . . . . . . . . . . . . . . . . .   6
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   7

1.  Introduction

   This document presents a Large-scale Deterministic Network (LDN)
   system, which consists of Scalable Deterministic Forwarding (SDF) and
   Scalable Resource Reservation (SRR).  The technologies of SDF and SRR
   can be used independently.

   As [draft-ietf-detnet-problem-statement] indicates, deterministic
   forwarding can only apply on flows with well-defined traffic
   characteristics.  The traffic characteristics of DetNet flow has been
   discussed in [draft-ietf-detnet-architecture], that could be achieved
   through shaping at Ingress node or up-front commitment by
   application.  This document assumes that DetNet flows follow some
   specific traffic patterns accordingly.

1.1.  Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119.

1.2.  Terminology & Abbreviations

   This document uses the terminology defined in
   [draft-ietf-detnet-architecture].

   TSN: Time Sensitive Network

   CQF: Cyclic Queuing and Forwarding




Qiang, et al.           Expires November 30, 2018               [Page 2]

Internet-Draft  Supervised Heterogeneous Network Slicing        May 2018


   LDN: Large-scale Deterministic Network

   SDF: Scalable Deterministic Forwarding

   SRR: Scalable Resource Reservation

   DSCP: Differentiated Services Code Point

   EXP: Experimental

   T: the length of a cycle

   H: the number of hops

   K: the size of aggregated resource reservation window

2.  Scalable Deterministic Forwarding

   DetNet aims at providing deterministic service over large scale
   network.  In large scale network, it is difficulty to get precise
   time synchronization among numerous and diverse devices.  As a
   compromise, this document assumes that just clock synchronization is
   required among devices.  That is different devices maintain the same
   clock frequency 1/T, but may at the different time as shown in
   Figure 1.

         <-----T----->                       <-----T----->
         |           |           |           |           |           |
 Node A  +-----------+-----------+   Node A  +-----------+-----------+


         |           |           |              |           |           |
 Node B  +-----------+-----------+   Node B     +-----------+-----------+


     (i) time synchronization           (ii) clock synchronization


          Figure 1: Time Synchronization & Clock Synchronization

   IEEE 802.1 CQF is an efficient forwarding mechanism in TSN that
   guarantees bounded end-to-end latency.  CQF is designed for limited
   scale network, the time synchronization is required, and the link
   propagation delay is required to be smaller than a cycle length T.
   Considering the large scale network deployment, the proposed Scalable
   Deterministic Forwarding (SDF) permits clock synchronization and link
   propagation delay may exceed T.  Besides these two points, CQF and
   the asynchronous forwarding are very similar.



Qiang, et al.           Expires November 30, 2018               [Page 3]

Internet-Draft  Supervised Heterogeneous Network Slicing        May 2018


   Figure 2 compares them through an example.  Suppose Node A is the
   upstream node of Node B.  In CQF, packets sent from Node A at cycle
   x, will be received by Node B at the same cycle, then further be sent
   to downstream node by Node B at cycle x+1.  Due to long link
   propagation delay and clock synchronization, Node B will receive
   packets from Node A at different cycle denoted by y in the SDF, and
   Node B swaps the cycles carried in packets with y+1, then sends out
   those packets at cycle y+1.  This kind of cycle mapping (e.g., x <-->
   y+1) exists between any pair of neighbor nodes, can be studied
   through just once forwarding.  With this mapping, the receiving node
   can easily figure out when the received packets should be send out,
   the only requirement is to carry the cycle identifier of sending node
   in the packets.

       |  cycle x  | cycle x+1 |             |  cycle x  | cycle x+1 |
Node A +-----------+-----------+      Node A +-----------+-----------+
          \                                         \
           \packet                                   \packet
            \receiving                                \receiving
             \                                         \
       |      V    | cycle x+1 |                 |      V    |  cycle y+1|
Node B +-----------+-----------+      Node B     +-----------+-----------+
          cycle x      \packets                     cycle y      \packets
                        \sending                                  \sending
                         \                                         \
                          \                                         \
                           V                                         V

              (i) CQF                                (ii) SDF


                            Figure 2: CQF & SDF

2.1.  Three Queues

   In CQF each port needs to maintain 2 (or 3) queues for each class of
   flows, one is used to buffer newly received packets, another one is
   used to store the packets that are going to be sent out, one more
   queue may be needed to avoid output starvation [scheduled-queues].
   While in SDF, at least 3 queues are needed.

   As Figure 3 illustrated, a node may receive packets sent at two
   different cycles from a single upstream node due to the clock
   synchronization.  Following the timing slot mapping (i.e., x <-->
   y+1), packets that carry cycle identifier x should be send out by
   Node B at cycle y+1, and packets that carry cycle identifier x+1
   should be send out by Node B at cycle y+2.  Therefore, two queues are
   needed to store the newly received packets, as well as one queue to



Qiang, et al.           Expires November 30, 2018               [Page 4]

Internet-Draft  Supervised Heterogeneous Network Slicing        May 2018


   store the sending packets.  In order to absorb jitter, more queues
   also might be necessary.

                         |  cycle x  | cycle x+1 |
                 Node A  +-----------+-----------+
                                  \      \
                                   \      \packet
                                    \      \receiving
                                   | V      V  |           |
                        Node B     +-----------+-----------+
                                      cycle y    cycle y+1


                       Figure 3: Three Queues in SDF

2.2.  Cycle Identifier Carrying

   As former two sections explained, cycle identifier needs to be
   carried in packet, so that an appropriate queue can be selected
   accordingly.  That means 2 bits is needed in the three queues model
   of SDF, in order to identify different cycles between a pair of
   neighbor nodes.  There are several ways to carry this 2 bits cycle
   identifier, for example:

   o  DSCP of IPv4 Header

   o  Traffic Class of IPv6 Header

   o  EXP of MPLS Header

   o  EtherType of Ethernet Header

   o  IPv6 Extension Header

   o  TLV of SRv6

   o  EXP of MPLS-SR Header

3.  Scalable Resource Reservation

   SDF must work with some resource reservation mechanisms, that can be
   the proposed Scalable Resource Reservation (SRR) or other mechanisms.
   Resource reservation guarantees the necessary network resources when
   deterministic flows are scheduled.  Network nodes have to record how
   many network resources are reserved for a specific flow from when it
   starts to when it ends (e.g., <flow_identifier, reserved_resource,
   start_time, end_time>).  Maintaining per-flow resource reservation
   status may be acceptable to edge nodes, but un-acceptable to core



Qiang, et al.           Expires November 30, 2018               [Page 5]

Internet-Draft  Supervised Heterogeneous Network Slicing        May 2018


   nodes.  [draft-ietf-detnet-architecture] pointed out that aggregation
   must be supported for scalability.

   [Details of SRR is TBD.]

4.  Performance Analysis

4.1.  Queueing Delay

   End-to-end queueing delay's expectation is 1.5*T*H, where H is the
   number of hops.

   [Detailed Analysis is TBD]

4.2.  Jitter

   Jitter's upper bound is 2*T.

   [Detailed Analysis is TBD]

5.  IANA Considerations

   This document makes no request of IANA.

6.  Security Considerations

   Security issues have been carefully considered in
   [draft-ietf-detnet-security].  More discussion is TBD.

7.  Acknowledgements

   TBD.

8.  Normative References

   [draft-ietf-detnet-architecture]
              "DetNet Architecture", <https://datatracker.ietf.org/doc/
              draft-ietf-detnet-architecture/>.

   [draft-ietf-detnet-dp-sol]
              "DetNet Data Plane Encapsulation",
              <https://datatracker.ietf.org/doc/
              draft-ietf-detnet-dp-sol/>.

   [draft-ietf-detnet-problem-statement]
              "DetNet Problem Statement",
              <https://datatracker.ietf.org/doc/
              draft-ietf-detnet-problem-statement/>.



Qiang, et al.           Expires November 30, 2018               [Page 6]

Internet-Draft  Supervised Heterogeneous Network Slicing        May 2018


   [draft-ietf-detnet-security]
              "DetNet Security Considerations",
              <https://datatracker.ietf.org/doc/
              draft-ietf-detnet-security/>.

   [draft-ietf-detnet-use-cases]
              "DetNet Use Cases", <https://datatracker.ietf.org/doc/
              draft-ietf-detnet-use-cases/>.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.

   [scheduled-queues]
              "Scheduled queues, UBS, CQF, and Input Gates",
              <http://www.ieee802.org/1/files/public/docs2015/
              new-nfinn-input-gates-0115-v04.pdf>.

Authors' Addresses

   Li Qiang (editor)
   Huawei
   Beijing
   China

   Email: qiangli3@huawei.com


   Bingyang Liu
   Huawei
   Beijing
   China

   Email: liubingyang@huawei.com


   Liang Geng
   China Mobile
   Beijing
   China

   Email: gengliang@chinamobile.com








Qiang, et al.           Expires November 30, 2018               [Page 7]
