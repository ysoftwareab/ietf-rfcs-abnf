MOBILE-IP Working Group                       Youngjune L. Gwon (Editor)
INTERNET-DRAFT                                         Atsushi Takeshita
Expires: August 23, 2001                                DoCoMo USA Labs
                                                       February 23, 2001

        Network Layer Triggered Mobile IPv4 Predictive Handoff
               <draft-gwon-mobileip-l3mp-mipv4-00.txt>

Status of this memo

   This document is an individual contribution for consideration by the
   Mobile IP Working Group of the Internet Engineering Task Force.
   Comments should be submitted to the mobile-
   ip@standards.nortelnetworks.com mailing list.

   Distribution of this memo is unlimited.

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026. Internet-Drafts are working
   documents of the Internet Engineering Task Force (IETF), its areas,
   and its working groups.  Note that other groups may also distribute
   working documents as Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at:

      http://www.ietf.org/ietf/1id-abstracts.txt

   The list of Internet-Draft Shadow Directories can be accessed at:

      http://www.ietf.org/shadow.html.

Abstract

   This draft describes a network layer (layer 3) handoff-triggering 
   mechanism and associated Mobile IPv4 predictive handoff scheme that 
   is free of the link layer (layer 2) triggering events. By utilizing 
   layer 3 information only, the network layer mobility prediction 
   (L3MP) mechanism first predicts the future per packet latency. Then,
   the L3MP selects the future access point given the predicted values
   in advance. The future access point suggestion by the L3MP triggers
   the Mobile IP predictive handoff. The predictive handoff scheme 
   described in this draft encompasses three significant steps before 
   switching the actual access point: L3MP handoff triggering, 
   pre-register, and route pre-optimization. 

Table of Contents

   1. Introduction
   2. Terminology

Gwon, et al.            Expires August 23, 2001                 [Page 1]

INTERNET-DRAFT    Layer 3 Triggered MIPv4 Predictive Handoff    Feb 2001

   3. Scope of the Solution
   4. Link Layer Independency
   5. Access Network Considerations
      5.1 Layer 3 Signaling from Different Nearby Base Stations
      5.2 Signal Strength vs. Per Packet Latency 
   6. Network Layer Mobility Prediction (L3MP)
      6.1 L3MP Latency Prediction (L3MP-LP)
      6.2 L3MP Access Point Selection (L3MP-APS)
      6.3 Compact Layer 3 Beacon Format
   7. Specifying Handoff Triggering Events
   8. Mobile IPv4 Predictive Handoff
      8.1 Layer 3 Trigger
      8.2 Pre-register
      8.3 Route Pre-optimization
   9. Security Considerations
   10. Acknowledgement
   11. References
   12. Author's Addresses

1. Introduction

   A number of Mobile IP fast handoff schemes currently proposed in the 
   IETF Mobile-IP Working Group require a handoff trigger specified by 
   the link layer (layer 2) events. The layer 2 triggering events are 
   interpreted to initiate the Mobile IP handoff at the network layer 
   (layer 3). Although a handoff solution should not depend on the 
   mobile wireless access technologies, it is an obscure task to 
   universally specify the layer 2 triggering events from different 
   access technologies. Furthermore, one cannot expect the layer 2 
   triggers from every wireless device. To avoid this air-interface 
   (physical layer or layer 1) and layer 2 diversity issues, a 
   generalized layer 3-contained methodology or layer 3 triggering 
   mechanism that is independent of the access technologies (layers 1 
   and 2) must be developed.

   This draft considers both the layer 3 mobility prediction mechanism 
   (L3MP) and the L3MP triggered predictive Mobile IPv4 handoff. By 
   utilizing the layer 3 information only, the L3MP is an association of
   two sub-functions: Latency Prediction (L3MP-LP) and Access Point 
   Selection (L3MP-APS). The L3MP-LP predicts the future per packet 
   latency based on the present and the previous latency samples 
   obtained at the layer 3. Thus, the L3MP-LP reflects the future layer
   3 communication quality. The L3MP-APS selects the future access point
   given multiple L3MP-LP values for different access points (e.g. 
   mobility agents and access routers) in prior to an occurrence of the 
   actual handoff.  

   The Mobile IPv4 predictive handoff scheme presented in this draft 
   encompasses three steps performed in advance: predictive handoff 
   triggering, pre-register, and route pre-optimization.      



Gwon, et al.            Expires August 23, 2001                 [Page 2]

INTERNET-DRAFT    Layer 3 Triggered MIPv4 Predictive Handoff    Feb 2001

2. Terminology

   This draft uses terms defined in Mobile IPv4 and other related 
   documents. In addition, this document uses the following terms:

   Layer 3 Triggering Events
      Layer 3 contained process that initiates the Mobile IP 
      predictive handoff. 

   L3MP
      An acronym for layer 3 mobility prediction or network layer 
      mobility prediction (See network layer mobility prediction).

   L3MP-LP
      An acronym for L3MP-latency prediction is a process of 
      predicting the future value of per packet latency using the 
      present and previous latency samples. Latency samples are 
      obtained by using ICMP timestamp option on layer 3 beacon. 
      Timestamp is marked by the mobility agents and the mobile node 
      retrieves the packet traveling time upon the reception of the 
      layer 3 beacon. Thus, L3MP-LP is a prediction based layer 3 
      link evaluation capability.

   L3MP-APS
      An acronym for L3MP-access point selection is a process of 
      choosing the access point (access routers or mobility agents) 
      given the L3MP-LP prediction values.  

   Network Layer Mobility Prediction
      A mechanism that chooses the future access point for a mobile 
      node by encompassing two separate processes: latency prediction 
     (L3MP-LP) and access point selection (L3MP-APS). 

   Pre-register
      Mobile IPv4 registration before switching the actual access 
      point. Pre-register can only be successful if the handoff of a 
      mobile node is correctly anticipated in timely manner. 
      Otherwise, it will only increase the layer 3 control signaling 
      due to unnecessary pre-register.   
 
   Route Pre-optimization
      Route optimization [2] before switching the actual access
      point, i.e. establishing direct routes between the mobile and 
      correspondent nodes before the actual handoff.     

3. Scope of the Solution

   This draft specifies both the layer 3 handoff-triggering mechanism, 
   namely the L3MP, and the Mobile IPv4 predictive handoff scheme
   that is triggered by the L3MP. This draft specifies the layer 3 
   triggering events and the methodology of obtaining such events. This
   draft also speficies the predictive handoff extentions to the base 

Gwon, et al.            Expires August 23, 2001                 [Page 3]

INTERNET-DRAFT    Layer 3 Triggered MIPv4 Predictive Handoff    Feb 2001

   Mobile IPv4 specification [1] and the route optimization extention 
   [2].
   
4. Link Layer Independency

   This draft describes yet another approach that utilizes the 
   information available at the layer 3 only for the Mobile IP handoff
   trigger. It is necessary to develop the layer 3-contained handoff 
   triggering events for the following reasons:

      a) It is difficult to specify layer 2 triggering events if the 
         access technologies (layers 1 and 2) differ. 

      b) If changes in access technology should not affect layer 3, 
         faster deployment of new access technology is possible.

      c) Broader concept of handoff such as inter-access technology 
         handoff can be implemented easily, e.g. WLAN to cellular 
         handoff.

      d) One cannot expect and specify all possible layer 2 triggers 
	 from every type of wireless devices.

5. Access Network Considerations 
                          
   This draft generally considers fully IP-based network technologies   
   and therefore possibly beyond the third generation networks. However,
   the scope of this draft should not be restricted to the fully 
   IP-based or beyond the third generation network technologies.

5.1 Layer 3 Signaling from Different Nearby Base Stations
 
   A mobile node is in charge of detecting the layer 3 beacons that are 
   used for layer 3 prediction. This draft considers that the mobile 
   node may simultaneously listen to multiple layer 3 signaling beacons 
   transmitted by different nearby base stations. For the current or the
   third generation systems, layer 3 beacon may have to be transmitted 
   over either the signaling channel or common shared channels to 
   resolve the situation.   

5.2 Signal Strength vs. Per Packet Latency 

   Obtaining per packet latency is a layer 3 analogous process that is 
   similar to the periodic beacon pilot strength measurement occurred at
   lower layers (layers 1 and 2). Beacon pilot strength measurement is 
   reflected in terms of SIR (CDMA), SNR (TDMA), or raw signal power 
   depending on wireless access technologies. To accomplish the layer 2 
   like measurement at layer 3, a compact layer 3 beacon packet should 
   be introduced.   

   Furthermore, per packet latency should be predicted. A successful 
   prediction creates a time gap that can be used for preparing the 

Gwon, et al.            Expires August 23, 2001                 [Page 4]

INTERNET-DRAFT    Layer 3 Triggered MIPv4 Predictive Handoff    Feb 2001

   Mobile IP handoff in advance. 


6. Network Layer Mobility Prediction (L3MP)
 
   The L3MP is a mechanism that resides within a mobile node. The mobile
   node is responsible to carry out the L3MP operation by capturing the 
   layer 3 beacons periodically transmitted by the nearby base stations.
   The compact layer 3 beacon format is described in 6.3. 

   The L3MP consists of two parts: latency prediction (L3MP-LP) and 
   access point selection (L3MP-APS). L3MP-LP is the layer 3 link 
   evaluation capability by predicting the future value of per packet 
   latencies with respect to the different foreign agents or access 
   routers. Then, the foreign agent that is predicted for the best 
   future performance, i.e. giving the smallest L3MP-LP value, is 
   selected by the L3MP-APS. 

   Figure 1 depicts an overall diagram of the L3MP operation in the 
   access network.  

       ____   _____   L3 Beacon   ____   L3 Beacon   _____   ____
      |AR1 |-|BTS1 | ==========> | MN | <========== |BTS2 |-|AR2 |
       ----   -----               ----               -----   ----

    Figure 1: Mobile Node Operating L3MP in the Access Network

6.1 L3MP Latency Prediction (L3MP-LP)

   There are a number of ways to predict the future value given the 
   present and past per packet latency samples that are obtained by ICMP
   timestamp on layer 3 beacons. There are some important observations:

      a) The variation of per packet latency over time, T(t), is a 
         stochastic process.

      b) The obtained present and past per packet latency samples are 
         samples of T(t).

      c) More recent latency samples are more correlated to the future 
         outcome of the latency. 

      d) It may be necessary that distorted samples should be sampled 
         out for the prediction accuracy. 

   Estimation theory may be applied to compute the future expected 
   value of the per packet latency given the present and past samples. 
   However, unless the first and the second order distribution of the 
   latency samples are known or properly modeled, estimating the future 
   expected value of a stochastic process involves the complex 
   computation of auto-and-cross correlation matrices. Although relying 
   on estimation theory is a solution, its applicability remains 

Gwon, et al.            Expires August 23, 2001                 [Page 5]

INTERNET-DRAFT    Layer 3 Triggered MIPv4 Predictive Handoff    Feb 2001

   questionable in reality. 

   On the other hand, adaptive approach is a practical solution that 
   involves less computational complexity. Adaptive L3MP-LP is depicted 
   in Figure 2. The present and previous latency samples and error are 
   inputs for the adaptive predictor. Adaptive prediction is iterative 
   process that the prediction error is also fed back for computation. 


                  
                                  ^
                                 /
                                /
                      ------------------
     T_present  ====> |                |
                      |                |
   T_previous_1 ====> |                | 
                      |    Adaptive    |==========> T_predicted
   T_previous_2 ====> |    Predictor   |     |
                      |                |     |
        ....          |                |     |
                      ------------------     |
                          /                  | -
                         /        T_future  + =====> error
                        /                    | 
                       /_____________________|

                 Figure 2: Adaptive L3MP-LP

   The adaptive prediction accuracy is related with the number of 
   previous samples as its inputs. It can also be modeled in terms of 
   the differences of consecutive samples. 

   A popular algorithm such as least mean square (LMS) method [3] can be
   applied to efficiently compute adaptive prediction. Gauss-Markov 
   approximation of the user mobility may further reduce the 
   computational burden by using a couple of the previous samples. 

6.2 L3MP Access Point Selection (L3MP-APS)

   Mapping from the predicted future latency value to the future access 
   point selection is performed by a simple method. Among all 
   communicable mobility agents or access points, one that gives the 
   smallest latency prediction value is chosen, e.g. there may be 6 
   possible nearby base stations connected to different mobility agents 
   in optimal hexagonal cellular network configuration. 

6.3 Compact Layer 3 Beacon Format

   Although there is no definite requirement of layer 3 beaconing 
   period, the layer 3 beacon format must be as compact as possible. 
   Access point entities are required to send this layer 3 beacon so 

Gwon, et al.            Expires August 23, 2001                 [Page 6]

INTERNET-DRAFT    Layer 3 Triggered MIPv4 Predictive Handoff    Feb 2001

   that any mobile node capable of listening can measure the per packet 
   latency for L3MP. Figure 3 shows a compact layer 3 beacon format for 
   this purpose. ICMP timestamp is included for layer 3 detection and 
   measurement purposes. 

    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                     |
    +    IP Header with Agent's IP address (20 Bytes)     +
    |                                                     |           
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                     |
    +              Authentication (Optional)              +
    |                                                     |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                                                     |
    +             ICMP Timestamp (20 Bytes)               +
    |                                                     |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

           Figure 3: Compact Layer 3 Beacon Format

7. Specifying Handoff Triggering Events

   Layer 3 handoff triggering events are specified by the output of the
   L3MP, i.e. in the form of mobility agent's or access router's IP 
   addresses, so that a mobile node can actively contact them to carry 
   out the predictive handoff in timely manner. It is noteworthy that
   the L3MP operates on the basis of optimizing the future latency 
   performance of the mobile node. If multiple agent 
   addresses are available, the preference for each agent also has to be
   specified. 
   
   Once the addresses of the mobility agents or access routers are 
   available, the mobile node may start contacting the candidate 
   agent by sending pre-register request.

8. Mobile IPv4 Predictive Handoff

   The Mobile IPv4 predictive handoff is really a temporary 
   simultaneous binding of a mobile node to two or more 
   care-of-addresses.

8.1 Layer 3 Trigger

   As specified in Section 7, a layer 3 triggering event causes the 
   predictive handoff to be initiated. The layer 3 trigger is created by
   the L3MP to provide the candidate mobility agent's IP addresses used 
   for pre-register and route pre-optimization. 

8.2 Pre-register

   Then, the mobile node sends pre-register request to the nFA via oFA

Gwon, et al.            Expires August 23, 2001                 [Page 7]

INTERNET-DRAFT    Layer 3 Triggered MIPv4 Predictive Handoff    Feb 2001

   while maintaining the connection with the oFA. This is illustrated
   in Figure 3. If other secure (not via oFA) way to pre-register is 
   possible, then the mobile node may do it so. It is also necessary
   if regional registration is not supported, the mobile node should
   pre-register with its home agent. 
                
          Pre-register request via oFA
    ------          -------          ------
   |  MN  |=======>|  oFA  |=======>| nFA  |                 
   |      |<=======|       |<=======|      |
    ------          -------          ------
           Pre-register reply via oFA
   
   Figure 3: Pre-register to nFA via oFA     
   
   It should be noted that pre-register has relatively shorter 
   lifetime compared to the registration. The mobile node is 
   responsible for renewing the pre-register to the (regular) Mobile
   IP registration after actually switching the access point.   
   
   Pre-regsiter request and reply packet formats are identical to 
   the registration request and reply formats except for the different
   type numbers (TBD) and the shorter lifetimes.     

8.3 Route Pre-optimization

   Route pre-optimization sets up the direct and optimized routes 
   between the mobile node and its correspondent nodes in prior to the
   actual handoff. This draft adds two new messages to the route 
   optimization draft [2]: Pre-binding update and route pre-optimization
   completion messages. These two new messages are very similar to 
   the existing binding update and binding acknowledge messages except
   for the different type numbers (TBD) and the shorter lifetime.  

9. Security Considerations

   Any mobile node with proper wireless transceiver is capable of 
   capturing the layer 3 beacon in the access network. Therefore, the 
   L3MP operation can create possible security attacks in the access
   network. It is generally recommended that authentication header 
   should be included in the layer 3 beacon format. 
   
   Since the nature of the L3MP is to provide the predictive handoff 
   trigger at the layer 3 by predicting the future access point in 
   timely manner, unnecessary compuation regarding the authentication 
   that may cause an extra L3MP operational overhead should be avoided.
   Security considerations regarding the predictive handoff extention 
   described in this draft conforms with those of the base Mobile 
   IPv4 specification [1].   

10. Acknowledgements


Gwon, et al.            Expires August 23, 2001                 [Page 8]

INTERNET-DRAFT    Layer 3 Triggered MIPv4 Predictive Handoff    Feb 2001

   The authors of this draft appreciates advisors from the DoCoMo 
   Communications Laboratories USA's Advisory Board for their 
   valuable comments and inputs. The authors are also in gratitude to
   our colleagues at Multimedia and Wireless Laboratories of NTT DoCoMo.

11. References

   [1] Charles Perkins, "IP Mobility Support," RFC 2002, October 1996
   
   [2] C. Perkins and D. Johnson, "Route Optimization in Mobile IP," 
       draft-ietf-mobileip-optim-10.txt (work in progress), November
       2000

   [3] B. Widrow and S. Stearns, "Adaptive Signal Processing," 1985 by 
       Prentice Hall 

12. Authors' Addresses

    Questions about this memo can be directed to:

      Youngjune Gwon
      DoCoMo Communications Laboratories USA, Inc.
      181 Metro Drive, Suite 300
      San Jose, CA 95110
      USA
          
      Phone: +1 408 451 4734
      Email: gyj@dcl.docomo-usa.com
      Fax: +1 408 573 1090

      Atsushi Takeshita
      DoCoMo Communications Laboratories USA, Inc.
      181 Metro Drive, Suite 300
      San Jose, CA 95110
      USA

      Phone: +1 408 451 4705
      Email: takeshita@dcl.docomo-usa.com
      Fax: +1 408 573 1090














Gwon, et al.            Expires August 23, 2001                 [Page 9]