                               <WITHIN>                      June 2006 
                                    
Lemonade                                                                
Internet Draft: WITHIN                                       S. H. Maes 
Document: draft-ietf-lemonade-search-within-02              R. Cromwell 
                                                                   Eds. 
                                                                        
Expires: December 2006                                        June 2006 
    
    
               WITHIN Search extension to the IMAP Protocol  
                                      
Status of this Memo 
    
   By submitting this Internet-Draft, each author represents that any 
   applicable patent or other IPR claims of which he or she is aware 
   have been or will be disclosed, and any of which he or she becomes 
   aware will be disclosed, in accordance with Section 6 of BCP 79. 
    
   Internet-Drafts are working documents of the Internet Engineering 
   Task Force (IETF), its areas, and its working groups.  Note that 
   other groups may also distribute working documents as Internet-
   Drafts. 
    
   Internet-Drafts are draft documents valid for a maximum of six months 
   and may be updated, replaced, or obsoleted by other documents at any 
   time.  It is inappropriate to use Internet-Drafts as reference 
   material or to cite them other than as "work in progress." 
    
   The list of current Internet-Drafts can be accessed at 
        http://www.ietf.org/ietf/1id-abstracts.txt 
    
   The list of Internet-Draft Shadow Directories can be accessed at 
        http://www.ietf.org/shadow.html. 
    
Abstract 
    
   WITHIN is an extension to [RFC3501] SEARCH which returns messages 
   whose internal date is within or outside a specified interval and 
   differs from SINCE in that an interval in days is specified instead 
   of a date. WITHIN is expected to be most useful for persistent 
   searches in combination with mobile devices.  
 
Conventions used in this document 
    
   In examples, "C:" and "S:" indicate lines sent by the client and 
   server respectively. 
    
   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", 
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this 
   document are to be interpreted as described in [RFC2119]. 
    
 
 
Maes                                                          [Page 1] 

                               <WITHIN>                      June 2006 
 
 
   When describing the general syntax, some definitions are omitted as 
   they are defined in [RFC3501].   
 
 
Table of Contents 
          
   Status of this Memo...............................................1 
   Abstract..........................................................1 
   Conventions used in this document.................................1 
   Table of Contents.................................................2 
   1.    Introduction................................................2 
   2.    Formal Syntax...............................................2 
   3.    Examples....................................................3 
   4.    Security Considerations.....................................3 
   Normative References..............................................3 
   Informative References............................................3 
   Future Work.......................................................3 
   Version History...................................................3 
   Acknowledgments...................................................4 
   Authors Addresses.................................................4 
   Intellectual Property Statement...................................4 
   Full Copyright Statement..........................................5 
    
    
1. Introduction 
    
   The WITHIN extension is present in any IMAP4 implementation which 
   returns "WITHIN" as one of the supported capabilities in the 
   CAPABILITY command. 
    
   The extension exposes two new search keys, YOUNGER and OLDER, each of 
   which take a non-zero integer argument corresponding to an interval 
   in hours.  YOUNGER returns messages deposited in the mailbox after 
   the date calculated by subtracting the interval number of hours from 
   the server's current date. OLDER returns messages deposited before 
   the date calculated as described above. 
    
    
    
2. Formal Syntax 
 
   The following syntax specification uses the Augmented Backus-Naur   
   Form (ABNF) notation.  Elements not defined here can be found in   
   the formal syntax of the [ABNF], [RFC3501], and [ABNFEXTEND]. 
    
   The ABNF grammar in [RFC3501] is hereby modified with two new search 
   keys: OLDER <interval hours> and YOUNGER <interval hours> 
    
    
 
 
Maes                   Expires – December 2006               [Page 2] 

                               <WITHIN>                      June 2006 
 
 
      search-key /= "OLDER" SP nz-number / "YOUNGER" SP nz-number 
                       ; search-key defined in [RFC3501]  
    
3. Examples 
 
   C: a1 SEARCH UNSEEN YOUNGER 72 
   S: a1 * SEARCH 4 8 15 16 23 42 
    
   Search for all unseen messages within the past 3 days (72 hours) 
   according to the server’s current time. 
    
 
4. Security Considerations 
 
   The WITHIN extension does not raise any security considerations which 
   are not present in the base protocol. Considerations are the same as 
   for IMAP [RFC 3501]. 
    
    
Normative References 
 
   [ABNF] D. Crocker, et al. "Augmented BNF for Syntax Specifications: 
      ABNF", RFC 2234, November 1997.  
      http://www.ietf.org/rfc/rfc2234 
    
   [ABNFEXTEND] Melnikov, A., and C. Daboo, "Collected extensions to 
   IMAP4 ABNF", RFC 4466, April 2006. 
    
   [RFC3501] Crispin, M. "IMAP4, Internet Message Access Protocol 
      Version 4 rev1", RFC 3501, March 2003. 
      http://www.ietf.org/rfc/rfc3501 
 
 
Informative References 
     
   [P-IMAP] Maes, S.H., Lima R., Kuang, C., Cromwell, R., Ha, V. and 
   Chiu, E., Day, J., Ahad R., Jeong W-H., Rosell G., Sini, J., Sohn S-
   M., Xiaohui F. and Lijun Z., "Push Extensions to the IMAP Protocol 
   (P-IMAP)", draft-maes-lemonade-p-imap-xx.txt, (work in progress). 
     
     
Future Work 
    
   [Note to RFC editor: please delete this section before publication] 
    
   [1] Decide whether other interval units are necessary. 
    
Version History 
    
 
 
Maes                   Expires – December 2006               [Page 3] 

                               <WITHIN>                      June 2006 
 
 
   [Note to RFC editor: please delete this section before publication] 
    
   Release 00 
      Initial release, separated from VFOLDER draft 
    
   Release 01 
      Incorporate feedback and suggestions received from Arnt 
   Gulbrandsen. 
    
   Release 02 
      Interval now defined as hours instead of days as per interim 
   meeting consensus. 
     
Acknowledgments 
    
   The authors want to thank all who have contributed key insight and 
   extensively reviewed and discussed the concepts of LPSEARCH and the 
   authors of its early introduction P-IMAP [P-IMAP]. 
    
   We also want to give a special thanks to A. Melnikov and A. 
   Gulbrandsen for their review and suggestions. 
 
Authors Addresses 
    
   Stephane H. Maes 
   Oracle Corporation 
   500 Oracle Parkway 
   M/S 4op634 
   Redwood Shores, CA 94065 
   USA 
   Phone: +1-650-607-6296 
   Email: stephane.maes@oracle.com 
    
    
   Ray Cromwell 
   Oracle Corporation 
   500 Oracle Parkway 
   Redwood Shores, CA 94065 
   USA 
    
    
    
Intellectual Property Statement 
    
   The IETF takes no position regarding the validity or scope of any 
   intellectual property or other rights that might be claimed to 
   pertain to the implementation or use of the technology described in 
   this document or the extent to which any license under such rights 
   might or might not be available; neither does it represent that it 
 
 
Maes                   Expires – December 2006               [Page 4] 

                               <WITHIN>                      June 2006 
 
 
   has made any effort to identify any such rights.  Information on the 
   IETF's procedures with respect to rights in standards-track and 
   standards-related documentation can be found in BCP-11.  Copies of 
   claims of rights made available for publication and any assurances of 
   licenses to be made available, or the result of an attempt made to 
   obtain a general license or permission for the use of such 
   proprietary rights by implementers or users of this specification can 
   be obtained from the IETF Secretariat. 
        
   The IETF invites any interested party to bring to its attention any 
   copyrights, patents or patent applications, or other proprietary 
   rights, which may cover technology that may be required to practice 
   this standard.  Please address the information to the IETF Executive 
   Director. 
    
Acknowledgement 
    
   Funding for the RFC Editor function is currently provided by the 
   Internet Society. 
    
Full Copyright Statement 
    
   Copyright (C) The Internet Society (2006). This document is subject 
   to the rights, licenses and restrictions contained in BCP 78, and 
   except as set forth therein, the authors retain all their rights. 
    
   This document and the information contained herein are provided on an 
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS 
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET 
   ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED, 
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE 
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED 
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. 
        
   This document and translations of it may be copied and furnished to 
   others, and derivative works that comment on or otherwise explain it 
   or assist in its implementation may be prepared, copied, published 
   and distributed, in whole or in part, without restriction of any 
   kind, provided that the above copyright notice and this paragraph are 
   included on all such copies and derivative works.  However, this 
   document itself may not be modified in any way, such as by removing 
   the copyright notice or references to the Internet Society or other 
   Internet organizations, except as needed for the purpose of 
   developing Internet standards in which case the procedures for 
   copyrights defined in the Internet Standards process must be 
   followed, or as required to translate it into languages other than 
   English. 
        

 
 
Maes                   Expires – December 2006               [Page 5] 

                               <WITHIN>                      June 2006 
 
 
   The limited permissions granted above are perpetual and will not be 
   revoked by the Internet Society or its successors or assigns. 
        
 













































 
 
Maes                   Expires – December 2006               [Page 6] 
