<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Configuration of Pro-Active Operations, Administration, and Maintenance (OAM) Functions for MPLS-based Transport Networks using RSVP-TE</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.1.1" rel="Chapter" title="1.1 Contributing Authors">
<link href="#rfc.section.1.2" rel="Chapter" title="1.2 Requirements Language">
<link href="#rfc.section.2" rel="Chapter" title="2 Overview of MPLS OAM for Transport Applications">
<link href="#rfc.section.3" rel="Chapter" title="3 Theory of Operations">
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 MPLS OAM Configuration Operation Overview">
<link href="#rfc.section.3.1.1" rel="Chapter" title="3.1.1 Configuration of BFD sessions">
<link href="#rfc.section.3.1.2" rel="Chapter" title="3.1.2 Configuration of Performance Monitoring">
<link href="#rfc.section.3.1.3" rel="Chapter" title="3.1.3 Configuration of Measurements and FMS">
<link href="#rfc.section.3.2" rel="Chapter" title="3.2 OAM Configuration TLV">
<link href="#rfc.section.3.3" rel="Chapter" title="3.3 BFD Configuration sub-TLV">
<link href="#rfc.section.3.3.1" rel="Chapter" title="3.3.1 Local Discriminator sub-TLV">
<link href="#rfc.section.3.3.2" rel="Chapter" title="3.3.2 Negotiation Timer Parameters sub-TLV">
<link href="#rfc.section.3.3.3" rel="Chapter" title="3.3.3 BFD Authentication sub-TLV">
<link href="#rfc.section.3.4" rel="Chapter" title="3.4 Performance Monitoring sub-TLV">
<link href="#rfc.section.3.4.1" rel="Chapter" title="3.4.1 MPLS OAM PM Loss sub-TLV">
<link href="#rfc.section.3.4.2" rel="Chapter" title="3.4.2 MPLS OAM PM Delay sub-TLV">
<link href="#rfc.section.3.5" rel="Chapter" title="3.5 MPLS OAM FMS sub-TLV">
<link href="#rfc.section.4" rel="Chapter" title="4 IANA Considerations">
<link href="#rfc.section.5" rel="Chapter" title="5 BFD OAM configuration errors">
<link href="#rfc.section.6" rel="Chapter" title="6 Acknowledgements">
<link href="#rfc.section.7" rel="Chapter" title="7 Security Considerations">
<link href="#rfc.references" rel="Chapter" title="8 References">
<link href="#rfc.references.1" rel="Chapter" title="8.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="8.2 Informative References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="This specification describes the configuration of pro-active MPLS-TP Operations, Administration, and Maintenance (OAM) Functions for a given LSP using a set of TLVs that are carried by the RSVP-TE protocol." />
  <meta name="description" content="This specification describes the configuration of pro-active MPLS-TP Operations, Administration, and Maintenance (OAM) Functions for a given LSP using a set of TLVs that are carried by the RSVP-TE protocol." />
  <meta name="keywords" content="RSVP-TE, GMPLS, MPLS, MPLS-TP" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">CCAMP Working Group</td>
<td class="right">E.B. Bellagamba, Ed.</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">L.A. Andersson, Ed.</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">Ericsson</td>
</tr>
<tr>
<td class="left">Expires: January 12, 2012</td>
<td class="right">P.S. Skoldstrom, Ed.</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Acreo AB</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">D.W. Ward</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Juniper</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">A.T. Takacs</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Ericsson</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">July 11, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Configuration of Pro-Active Operations, Administration, and Maintenance (OAM) Functions for MPLS-based Transport Networks using RSVP-TE<br />
  <span class="filename">draft-ietf-ccamp-rsvp-te-mpls-tp-oam-ext-06</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This specification describes the configuration of pro-active MPLS-TP Operations, Administration, and Maintenance (OAM) Functions for a given LSP using a set of TLVs that are carried by the RSVP-TE protocol.</p>
<p>This document is a product of a joint Internet Engineering Task Force (IETF) / International Telecommunication Union Telecommunication Standardization Sector (ITU-T) effort to include an MPLS Transport Profile within the IETF MPLS and PWE3 architectures to support the capabilities and functionalities of a packet transport network.  </p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on January 12, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>1.1.   <a href="#rfc.section.1.1">Contributing Authors</a>
</li>
<li>1.2.   <a href="#rfc.section.1.2">Requirements Language</a>
</li>
<li>2.   <a href="#rfc.section.2">Overview of MPLS OAM for Transport Applications</a>
</li>
<li>3.   <a href="#rfc.section.3">Theory of Operations</a>
</li>
<li>3.1.   <a href="#rfc.section.3.1">MPLS OAM Configuration Operation Overview</a>
</li>
<li>3.1.1.   <a href="#rfc.section.3.1.1">Configuration of BFD sessions</a>
</li>
<li>3.1.2.   <a href="#rfc.section.3.1.2">Configuration of Performance Monitoring</a>
</li>
<li>3.1.3.   <a href="#rfc.section.3.1.3">Configuration of Measurements and FMS</a>
</li>
<li>3.2.   <a href="#rfc.section.3.2">OAM Configuration TLV</a>
</li>
<li>3.3.   <a href="#rfc.section.3.3">BFD Configuration sub-TLV</a>
</li>
<li>3.3.1.   <a href="#rfc.section.3.3.1">Local Discriminator sub-TLV</a>
</li>
<li>3.3.2.   <a href="#rfc.section.3.3.2">Negotiation Timer Parameters sub-TLV</a>
</li>
<li>3.3.3.   <a href="#rfc.section.3.3.3">BFD Authentication sub-TLV</a>
</li>
<li>3.4.   <a href="#rfc.section.3.4">Performance Monitoring sub-TLV</a>
</li>
<li>3.4.1.   <a href="#rfc.section.3.4.1">MPLS OAM PM Loss sub-TLV</a>
</li>
<li>3.4.2.   <a href="#rfc.section.3.4.2">MPLS OAM PM Delay sub-TLV</a>
</li>
<li>3.5.   <a href="#rfc.section.3.5">MPLS OAM FMS sub-TLV</a>
</li>
<li>4.   <a href="#rfc.section.4">IANA Considerations</a>
</li>
<li>5.   <a href="#rfc.section.5">BFD OAM configuration errors</a>
</li>
<li>6.   <a href="#rfc.section.6">Acknowledgements</a>
</li>
<li>7.   <a href="#rfc.section.7">Security Considerations</a>
</li>
<li>8.   <a href="#rfc.references">References</a>
</li>
<li>8.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>8.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">This document describes the configuration of pro-active MPLS-TP Operations, Administration, and Maintenance (OAM) Functions for a given LSP using TLVs carried by RSVP-TE [RFC3209].  In particular it specifies the mechanisms necessary to establish MPLS-TP OAM entities for monitoring and performing measurements on an LSP, as well as defining information elements and procedures to configure pro-active MPLS OAM functions.  Initialization and control of on-demand MPLS OAM functions are expected to be carried out by directly accessing network nodes via a management interface; hence configuration and control of on-demand OAM functions are out-of-scope for this document.</p>
<p id="rfc.section.1.p.2">The Transport Profile of MPLS must, by definition [RFC5654], be capable of operating without a control plane. Therefore there are three options for configuring MPLS-TP OAM, without a control plane by either using an NMS or LSP Ping, or with a control plane using GMPLS (specifically RSVP-TE) .</p>
<p id="rfc.section.1.p.3">Pro-active MPLS OAM is performed by three different protocols, Bidirectional Forwarding Detection (BFD) [RFC5880] for Continuity Check/Connectivity Verification, the delay measurement protocol (DM) [MPLS-PM] for delay and delay variation (jitter) measurements, and the loss measurement protocol (LM) [MPLS-PM] for packet loss and throughput measurements. Additionally there is a number of Fault Management Signals that can be configured.  </p>
<p id="rfc.section.1.p.4">BFD is a protocol that provides low-overhead, fast detection of failures in the path between two forwarding engines, including the interfaces, data link(s), and to the extent possible the forwarding engines themselves. BFD can be used to track the liveliness and detect data plane failures of MPLS-TP point-to-point and might also be extended to support point-to-multipoint connections.  </p>
<p id="rfc.section.1.p.5">The delay and loss measurements protocols [MPLS-PM] use a simple query/response model for performing bidirectional measurements that allows the originating node to measure packet loss and delay in both directions. By timestamping and/or writing current packet counters to the measurement packets at four times (Tx and Rx in both directions) current delays and packet losses can be calculated. By performing successive delay measurements the delay variation (jitter) can be calculated. Current throughput can be calculated from the packet loss measurements by dividing the number of packets sent/received with the time it took to perform the measurement, given by the timestamp in LM header. Combined with a packet generator the throughput measurement can be used to measure the maximum capacity of a particular LSP.  </p>
<p id="rfc.section.1.p.6">MPLS Transport Profile (MPLS-TP) describes a profile of MPLS that enables operational models typical in transport networks, while providing additional OAM, survivability and other maintenance functions not currently supported by MPLS.  [RFC5860] defines the requirements for the OAM functionality of MPLS-TP.</p>
<p id="rfc.section.1.p.7">This document is a product of a joint Internet Engineering Task Force (IETF) / International Telecommunication Union Telecommunication Standardization Sector (ITU-T) effort to include an MPLS Transport Profile within the IETF MPLS and PWE3 architectures to support the capabilities and functionalities of a packet transport network.  </p>
<h1 id="rfc.section.1.1">
<a href="#rfc.section.1.1">1.1.</a> Contributing Authors</h1>
<p id="rfc.section.1.1.p.1">This document is the result of a large team of authors and contributors.  The following is a list of the co-authors:</p>
<p></p>

<ul class="empty">
<li>John Drake</li>
<li>Benoit Tremblay</li>
</ul>

<p> </p>
<h1 id="rfc.section.1.2">
<a href="#rfc.section.1.2">1.2.</a> Requirements Language</h1>
<p id="rfc.section.1.2.p.1">The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">RFC 2119</a> <cite title="NONE">[RFC2119]</cite>.  </p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> Overview of MPLS OAM for Transport Applications</h1>
<p id="rfc.section.2.p.1">[MPLS-TP-OAM-FWK] describes how MPLS OAM mechanisms are operated to meet transport requirements outlined in [RFC5860].</p>
<p id="rfc.section.2.p.2">[BFD-CCCV] specifies two BFD operation modes: 1) "CC mode", which uses periodic BFD message exchanges with symmetric timer settings, supporting Continuity Check, 2) "CV/CC mode" which sends unique maintenance entity identifiers in the periodic BFD messages supporting Connectivity Verification as well as Continuity Check.</p>
<p id="rfc.section.2.p.3">[MPLS-PM] specifies mechanisms for performance monitoring of LSPs, in particular it specifies loss and delay measurement OAM functions.</p>
<p id="rfc.section.2.p.4">[MPLS-FMS] specifies fault management signals with which a server LSP can notify client LSPs about various fault conditions to suppress alarms or to be used as triggers for actions in the client LSPs.  The following signals are defined: Alarm Indication Signal (AIS), Link Down Indication (LDI) and Locked Report (LKR). To indicate client faults associated with the attachment circuits Client Signal Failure Indication (CSF) can be used. CSF is described in [MPLS-TP-OAM-FWK] and in the context of this document is for further study.</p>
<p id="rfc.section.2.p.5">[MPLS-TP-OAM-FWK] describes the mapping of fault conditions to consequent actions. Some of these mappings may be configured by the operator, depending on the application of the LSP. The following defects are identified: Loss Of Continuity (LOC), Misconnectivity, MEP Misconfiguration and Period Misconfiguration. Out of these defect conditions, the following consequent actions may be configurable: 1) whether or not the LOC defect should result in blocking the outgoing data traffic; 2) whether or not the "Period Misconfiguration defect" should result in a signal fail condition.</p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> Theory of Operations</h1>
<h1 id="rfc.section.3.1">
<a href="#rfc.section.3.1">3.1.</a> MPLS OAM Configuration Operation Overview</h1>
<p id="rfc.section.3.1.p.1">RSVP-TE, or alternatively LSP Ping [LSP-PING CONF], can be used to simply enable the different OAM functions, by setting the corresponding flags in the "OAM Functions TLV". Additionally one may include sub-TLVs for the different OAM functions in order to specify different parameters in detail. </p>
<h1 id="rfc.section.3.1.1">
<a href="#rfc.section.3.1.1">3.1.1.</a> Configuration of BFD sessions</h1>
<p id="rfc.section.3.1.1.p.1">For this specification, BFD MUST be run in either one of the two modes:</p>
<p></p>

<ul class="empty">
<li>- Asynchronous mode, where both sides should be in active mode.</li>
<li>- Unidirectional mode</li>
</ul>

<p> </p>
<p id="rfc.section.3.1.1.p.3">In the simplest scenario LSP Ping, or alternatively RSVP-TE [RSVP-TE CONF], is used only to bootstrap a BFD session for an LSP, without any timer negotiation.</p>
<p id="rfc.section.3.1.1.p.4">Timer negotiation can be performed either in subsequent BFD control messages (in this case the operation is similar to LSP Ping based bootstrapping described in [RFC5884]) or directly in the LSP ping configuration messages.</p>
<p id="rfc.section.3.1.1.p.5">When BFD Control packets are transported in the G-ACh they are not protected by any end-to-end checksum, only lower-layers are providing error detection/correction. A single bit error, e.g. a flipped bit in the BFD State field could cause the receiving end to wrongly conclude that the link is down and in turn trigger protection switching. To prevent this from happening the "BFD Configuration sub-TLV" has an Integrity flag that when set enables BFD Authentication using Keyed SHA1 with an empty key (all 0s) [RFC5880]. This would make every BFD Control packet carry an SHA1 hash of itself that can be used to detect errors.</p>
<p id="rfc.section.3.1.1.p.6">If BFD Authentication using a pre-shared key / password is desired (i.e. authentication and not only error detection) the "BFD Authentication sub-TLV" MUST be included in the "BFD Configuration sub-TLV". The "BFD Authentication sub-TLV" is used to specify which authentication method that should be used and which pre-shared key / password that should be used for this particular session. How the key exchange is performed is out of scope of this document.</p>
<h1 id="rfc.section.3.1.2">
<a href="#rfc.section.3.1.2">3.1.2.</a> Configuration of Performance Monitoring</h1>
<p id="rfc.section.3.1.2.p.1">It is possible to configure Performance Monitoring functionalities such as Loss, Delay and Throuhput as described in [MPLS-PM].</p>
<p id="rfc.section.3.1.2.p.2">When configuring Performance monitoring functionalities it can be choosen either the default configuration (by only setting the respective flags in the "OAM functions TLV") or a customized configuration (by including the respective Loss and/or Delay sub-TLVs).</p>
<h1 id="rfc.section.3.1.3">
<a href="#rfc.section.3.1.3">3.1.3.</a> Configuration of Measurements and FMS</h1>
<p id="rfc.section.3.1.3.p.1">Additional OAM functions may be configured by setting the appropriate flags in the "OAM Functions TLV", these include Performance Measurements (packet loss, throughput, delay, and delay variation) and Fault Management Signal handling.</p>
<p id="rfc.section.3.1.3.p.2">By setting the PM Loss flag in the "OAM Functions TLV" and including the "MPLS OAM PM Loss sub-TLV" one can configure the measurement interval and loss threshold values for triggering protection.</p>
<p id="rfc.section.3.1.3.p.3">Delay measurements are configured by setting PM Delay flag in the "OAM Functions TLV" and including the "MPLS OAM PM Loss sub-TLV" one can configure the measurement interval and the delay threshold values for triggering protection.</p>
<p id="rfc.section.3.1.3.p.4">To configure Fault Monitoring Signals and their refresh time the FMS flag in the "OAM Functions TLV" MUST be set and the "MPLS OAM FMS sub-TLV" included. </p>
<h1 id="rfc.section.3.2">
<a href="#rfc.section.3.2">3.2.</a> OAM Configuration TLV</h1>
<p id="rfc.section.3.2.p.1">The "OAM Configuration TLV" is depicted in the following figure.  It specifies the OAM functions that are to be used for the LSP and it is defined in [OAM-CONF-FWK]. The "OAM Configuration TLV" is carried in the LSP_ATTRIBUTES object in Path and Resv messages.</p>
<div id="#rfc.figure.1"></div>
<pre>
	      
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|           Type (2) (IANA)     |           Length              |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    OAM Type   |                Reserved                       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
~                           sub-TLVs                            ~
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                

	    </pre>
<p></p>
<p id="rfc.section.3.2.p.3">Type: indicates the "OAM Configuration TLV" (2) (IANA to assign).</p>
<p id="rfc.section.3.2.p.4">OAM Type: one octet that specifies the technology specific OAM Type.  If the requested OAM Type is not supported, an error must be generated: "OAM Problem/Unsupported OAM Type".</p>
<p id="rfc.section.3.2.p.5">This document defines a new OAM Type: "MPLS OAM" (suggested value 2, IANA to assign) from the "RSVP-TE OAM Configuration Registry".  The "MPLS OAM" type is set to request the establishment of OAM functions for MPLS-TP LSPs.  The specific OAM functions are specified in the "Function Flags" sub-TLV as depicted in [OAM-CONF-FWK].</p>
<p id="rfc.section.3.2.p.6">The receiving edge LSR when the MPLS-TP OAM Type is requested should check which OAM Function Flags are set in the "Function Flags TLV" (also defined in [OAM-CONF-FWK]) and look for the corresponding technology specific configuration TLVs.</p>
<p id="rfc.section.3.2.p.7">Additional corresponding sub-TLVs are as follows:</p>
<p></p>

<ul class="empty">
<li>- "BFD Configuration sub-TLV", which MUST be included if the CC and/or the CV OAM Function flag is set. This sub-TLV MUST carry a "BFD Local Discriminator sub-TLV" and a "Timer Negotiation Parameters sub-TLV" if the N flag is cleared. If the I flag is set, the "BFD Authentication sub-TLV" may be included.</li>
<li>- "MPLS OAM PM Loss sub-TLV" within the "Performance Monitoring sub-TLV", which MAY be included if the PM/Loss OAM Function flag is set. If the "MPLS OAM PM Loss sub-TLV" is not included, default configuration values are used. Such sub-TLV MAY also be included in case the Throughput function flag is set and there is the need to specify measurement interval different from the default ones. In fact the throughput measurement make use of the same tool as the loss measurement, hence the same TLV is used.</li>
<li>- "MPLS OAM PM Delay sub-TLV" within the "Performance Monitoring sub-TLV", which MAY be included if the PM/Delay OAM Function flag is set. If the "MPLS OAM PM Delay sub-TLV" is not included, default configuration values are used.</li>
<li>- "MPLS OAM FMS sub-TLV", which MAY be included if the FMS OAM Function flag is set. If the "MPLS OAM FMS sub-TLV" is not included, default configuration values are used.</li>
</ul>
<p id="rfc.section.3.2.p.9">Moreover, if the CV or CC flag is set, the CC flag MUST be set at the same time. The format of an MPLS-TP CV/CC message is shown in [BFD-CCCV] and it requires, together with the BFD control packet information, the "Unique MEP-ID of source of BFD packet".  [MPLS-TP-IDENTIF] defines the composition of such identifier as:</p>
<p id="rfc.section.3.2.p.10">&lt;"Unique MEP-ID of source of BFD packet"&gt; ::= &lt;src_node_id&gt;&lt;src_tunnel_num&gt;&lt;lsp_num&gt;</p>
<p id="rfc.section.3.2.p.11">GMPLS signaling [RFC3473] uses a 5-tuple to uniquely identify an LSP within an operator's network.  This tuple is composed of a Tunnel Endpoint Address, Tunnel_ID, Extended Tunnel ID, and Tunnel Sender Address and (GMPLS) LSP_ID.</p>
<p id="rfc.section.3.2.p.12">Hence, the following mapping is used without the need of redefining a new TLV for MPLS-TP proactive CV purpose.</p>
<p></p>

<ul class="empty">
<li>- Tunnel ID = src_tunnel_num</li>
<li>- Tunnel Sender Address = src_node_id</li>
<li>- LSP ID = LSP_Num</li>
</ul>

<p> </p>
<p id="rfc.section.3.2.p.14">"Tunnel ID" and "Tunnel Sender Address" are included in the "SESSION" object [RFC3209], which is mandatory in both Path and Resv messages.</p>
<p id="rfc.section.3.2.p.15">"LSP ID" will be the same on both directions and it is included in the "SENDER_TEMPLATE" object [RFC3209] which is mandatory in Path messages.</p>
<p id="rfc.section.3.2.p.16">[Author's note: the same "Unique MEP-ID of source" will be likely required for Performance monitoring purposes. This need to be agreed with [MPLS-PM] authors.]</p>
<h1 id="rfc.section.3.3">
<a href="#rfc.section.3.3">3.3.</a> BFD Configuration sub-TLV</h1>
<p id="rfc.section.3.3.p.1">The "BFD Configuration sub-TLV" (depicted below) is defined for BFD OAM specific configuration parameters.  The "BFD Configuration sub-TLV" is carried as a sub-TLV of the "OAM Configuration TLV".</p>
<p id="rfc.section.3.3.p.2">This TLV accommodates generic BFD OAM information and carries sub-TLVs.</p>
<div id="#rfc.figure.2"></div>
<pre> 
    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Type (3) (IANA)     |           Length              |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |Vers.| PHB |N|S|I|    Reserved (set to all 0s)                 |      
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                                                               |
   ~                           sub-TLVs                            ~
   |                                                               |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+                  			  
             </pre>
<p></p>
<p id="rfc.section.3.3.p.4">Type: indicates a new type, the "BFD Configuration sub-TLV" (IANA to define).</p>
<p id="rfc.section.3.3.p.5">Length: indicates the total length including sub-TLVs.</p>
<p id="rfc.section.3.3.p.6">Version: identifies the BFD protocol version. If a node does not support a specific BFD version an error must be generated: "OAM Problem/Unsupported OAM Version".</p>
<p id="rfc.section.3.3.p.7">PHB: Identifies the Per-Hop Behavior (PHB) to be used for periodic continuity monitoring messages.</p>
<p id="rfc.section.3.3.p.8">BFD Negotiation (N): If set timer negotiation/re-negotiation via BFD Control Messages is enabled, when cleared it is disabled.</p>
<p id="rfc.section.3.3.p.9">Symmetric session (S): If set the BFD session MUST use symmetric timing values. </p>
<p id="rfc.section.3.3.p.10">Integrity (I): If set BFD Authentication MUST be enabled. If the "BFD Configuration sub-TLV" does not include a "BFD Authentication sub-TLV" the authentication MUST use Keyed SHA1 with an empty pre-shared key (all 0s). </p>
<p id="rfc.section.3.3.p.11">Encapsulation Capability (G): if set, it shows the capability of encapsulating BFD messages into G-Ach channel.  If both the G bit and U bit are set, configuration gives precedence to the G bit.</p>
<p id="rfc.section.3.3.p.12">Encapsulation Capability (U): if set, it shows the capability of encapsulating BFD messages into UDP packets.  If both the G bit and U bit are set, configuration gives precedence to the G bit.</p>
<p id="rfc.section.3.3.p.13">Bidirectional (B): if set, it configures BFD in the Bidirectional mode.  If it is not set it configures BFD in unidirectional mode. In the second case, the source node does not expect any Discriminator values back from the destination node.</p>
<p id="rfc.section.3.3.p.14">The "BFD Configuration sub-TLV" MUST include the following sub-TLVs in the Path message:</p>
<p></p>

<ul class="empty">
<li>- "Local Discriminator sub-TLV";</li>
<li>- "Negotiation Timer Parameters sub-TLV" if the N flag is cleared.</li>
</ul>
<p id="rfc.section.3.3.p.16">The "BFD Configuration sub-TLV" MUST include the following sub-TLVs in the Resv message:</p>
<p></p>

<ul class="empty">
<li>- "Local Discriminator sub-TLV;"</li>
<li>- "Negotiation Timer Parameters sub-TLV" if: <ul class="empty">
<li>- the N and S flags are cleared </li>
<li>- the N flag is cleared and the S flag is set and a timing interval larger than the one received needs to be used</li>
</ul>
<p> </p>
</li>
</ul>
<p id="rfc.section.3.3.p.18">Reserved: Reserved for future specification and set to 0.</p>
<h1 id="rfc.section.3.3.1">
<a href="#rfc.section.3.3.1">3.3.1.</a> Local Discriminator sub-TLV</h1>
<p id="rfc.section.3.3.1.p.1">The "Local Discriminator sub-TLV" is carried as a sub-TLV of the "BFD Configuration sub-TLV" and is depicted below.</p>
<div id="#rfc.figure.3"></div>
<pre> 
    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |           Type (1) (IANA)     |         Length = 8            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    		  Local Discriminator                      |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
             </pre>
<p></p>
<p id="rfc.section.3.3.1.p.3">Type: indicates a new type, the Local Discriminator sub-TLV (1) (IANA to define).</p>
<p id="rfc.section.3.3.1.p.4">Length: indicates the TLV total length in octets.</p>
<p id="rfc.section.3.3.1.p.5">Local Discriminator: A unique, nonzero discriminator value generated by the transmitting system and referring to itself, used to demultiplex multiple BFD sessions between the same pair of systems.</p>
<h1 id="rfc.section.3.3.2">
<a href="#rfc.section.3.3.2">3.3.2.</a> Negotiation Timer Parameters sub-TLV</h1>
<p id="rfc.section.3.3.2.p.1">The "Negotiation Timer Parameters sub-TLV" is carried as a sub-TLV of the "BFD Configuration sub-TLV" and is depicted below.</p>
<div id="#rfc.figure.4"></div>
<pre> 
        0                   1                   2                   3
        0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |  Timer Neg. Type (2) (IANA)   |          Length = 20          |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |         Acceptable Min. Asynchronous TX interval              |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |         Acceptable Min. Asynchronous RX interval              |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
       |               Required Echo TX Interval                       |
       +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
             </pre>
<p></p>
<p id="rfc.section.3.3.2.p.3">Type: indicates a new type, the "Negotiation Timer Parameters sub-TLV" (IANA to define).</p>
<p id="rfc.section.3.3.2.p.4">Length: indicates the TLV total length in octets. (20)</p>
<p id="rfc.section.3.3.2.p.5">Acceptable Min. Asynchronous TX interval: in case of S (symmetric) flag set in the "BFD Configuration sub-TLV", it expresses the desired time interval (in microseconds) at which the ingress LER intends to both transmit and receive BFD periodic control packets. If the receiving edge LSR can not support such value, it can reply with an interval greater than the one proposed.</p>
<p id="rfc.section.3.3.2.p.6">In case of S (symmetric) flag cleared in the "BFD Configuration sub-TLV", this field expresses the desired time interval (in microseconds) at which a edge LSR intends to transmit BFD periodic control packets in its transmitting direction.</p>
<p id="rfc.section.3.3.2.p.7">Acceptable Min. Asynchronous RX interval: in case of S (symmetric) flag set in the "BFD Configuration sub-TLV", this field MUST be equal to "Acceptable Min. Asynchronous TX interval" and has no additional meaning respect to the one described for "Acceptable Min. Asynchronous TX interval".</p>
<p id="rfc.section.3.3.2.p.8">In case of S (symmetric) flag cleared in the "BFD Configuration sub-TLV", it expresses the minimum time interval (in microseconds) at which edge LSRs can receive BFD periodic control packets. In case this value is greater than the "Acceptable Min. Asynchronous TX interval" received from the other edge LSR, such edge LSR MUST adopt the interval expressed in this "Acceptable Min. Asynchronous RX interval".</p>
<p id="rfc.section.3.3.2.p.9">Required Echo TX Interval: the minimum interval (in microseconds) between received BFD Echo packets that this system is capable of supporting, less any jitter applied by the sender as described in [RFC5880] sect. 6.8.9.  This value is also an indication for the receiving system of the minimum interval between transmitted BFD Echo packets.  If this value is zero, the transmitting system does not support the receipt of BFD Echo packets.  If the receiving system can not support this value an error MUST be generated "Unsupported BFD TX rate interval".</p>
<h1 id="rfc.section.3.3.3">
<a href="#rfc.section.3.3.3">3.3.3.</a> BFD Authentication sub-TLV</h1>
<p id="rfc.section.3.3.3.p.1">The "BFD Authentication sub-TLV" is carried as a sub-TLV of the "BFD Configuration sub-TLV" and is depicted below.</p>
<div id="#rfc.figure.5"></div>
<pre> 
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    BFD Auth. Type (3) (IANA)  |          Length = 8           |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|   Auth Type   |  Auth Key ID  |         Reserved (0s)         |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
             </pre>
<p></p>
<p id="rfc.section.3.3.3.p.3">Type: indicates a new type, the "BFD Authentication sub-TLV" (IANA to define).</p>
<p id="rfc.section.3.3.3.p.4">Length: indicates the TLV total length in octets. (8)</p>
<p id="rfc.section.3.3.3.p.5">Auth Type: indicates which type of authentication to use. The same values as are defined in section 4.1 of [RFC5880] are used. </p>
<p id="rfc.section.3.3.3.p.6">Auth Key ID: indicates which authentication key or password (depending on Auth Type) should be used. How the key exchange is performed is out of scope of this document.</p>
<p id="rfc.section.3.3.3.p.7">Reserved: Reserved for future specification and set to 0. </p>
<h1 id="rfc.section.3.4">
<a href="#rfc.section.3.4">3.4.</a> Performance Monitoring sub-TLV</h1>
<p id="rfc.section.3.4.p.1">If the "OAM functions TLV" has either the L (Loss), D (Delay) or T (Throughput) flag set, the "Performance Monitoring sub-TLV" MUST be present.</p>
<p id="rfc.section.3.4.p.2">In case the vlues needs to be different than the default ones the "Performance Monitoring sub-TLV", "MPLS OAM PM Loss sub-TLV" MAY include the following sub-TLVs: </p>

<ul class="empty">
<li>- "MPLS OAM PM Loss sub-TLV" if the L flag is set in the "OAM functions TLV";</li>
<li>- "MPLS OAM PM Delay sub-TLV" if the D flag is set in the "OAM functions TLV";</li>
</ul>

<p> </p>
<p id="rfc.section.3.4.p.3">The "Performance Monitoring sub-TLV" depicted below is carried as a sub-TLV of the "OAM Functions TLV".</p>
<div id="#rfc.figure.6"></div>
<pre>
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|    Perf Monitoring Type (IANA)|          Length               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|D|L|J|Y|K|C|            Reserved (set to all 0s)               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                                                               |
~                           sub-TLVs                            ~
|                                                               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

</pre>
<p></p>
<p id="rfc.section.3.4.p.5">Configuration Flags, for the specific function description please refer to [MPLS-PM]: </p>

<ul class="empty">
<li>- D: Delay inferred/direct (0=INFERRED, 1=DIRECT)</li>
<li>- L: Loss inferred/direct (0=INFERRED, 1=DIRECT)</li>
<li>- J: Delay variation/jitter (1=ACTIVE, 0=NOT ACTIVE)</li>
<li>- Y: Dyadic (1=ACTIVE, 0=NOT ACTIVE)</li>
<li>- K: Loopback (1=ACTIVE, 0=NOT ACTIVE)</li>
<li>- C: Combined (1=ACTIVE, 0=NOT ACTIVE)</li>
</ul>

<p> </p>
<h1 id="rfc.section.3.4.1">
<a href="#rfc.section.3.4.1">3.4.1.</a> MPLS OAM PM Loss sub-TLV</h1>
<p id="rfc.section.3.4.1.p.1">The "MPLS OAM PM Loss sub-TLV" depicted below is carried as a sub-TLV of the "Performance Monitoring sub-TLV".</p>
<div id="#rfc.figure.7"></div>
<pre>
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  PM Loss Type (1) (IANA)      |          Length               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| OTF |T|B|                    RESERVED                         |    
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                    Measurement Interval                       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                       Test Interval                           |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                      Loss Threshold                           |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

</pre>
<p></p>
<p id="rfc.section.3.4.1.p.3">Type: indicates a new type, the "MPLS OAM PM Loss sub-TLV" (IANA to define, suggested value 1).</p>
<p id="rfc.section.3.4.1.p.4">Length: indicates the length of the parameters in octets (12).</p>
<p id="rfc.section.3.4.1.p.5">OTF: Origin Timestamp Format of the Origin Timestamp field described in [MPLS-PM].  By default it is set to IEEE 1588 version 1.</p>
<p id="rfc.section.3.4.1.p.6">Configuration Flags, please refer to [MPLS-PM] for further details: </p>

<ul class="empty">
<li>- T: Traffic-class-specific measurement indicator. Set to 1 when the measurement operation is scoped to packets of a particular traffic class (DSCP value), and 0 otherwise.  When set to 1, the DS field of the message indicates the measured traffic class.  By default it is set to 1.</li>
<li>- B: Octet (byte) count. When set to 1, indicates that the Counter 1-4 fields represent octet counts.  When set to 0, indicates that the Counter 1-4 fields represent packet counts.  By default it is set to 0.</li>
</ul>

<p> </p>
<p id="rfc.section.3.4.1.p.7">Measurement Interval: the time interval (in microseconds) at which Loss Measurement query messages MUST be sent on both directions. If the edge LSR receiving the Path message can not support such value, it can reply back with a higher interval. By default it is set to (TBD).</p>
<p id="rfc.section.3.4.1.p.8">Test Interval: test messages interval as described in [MPLS-PM].  By default it is set to (TBD).</p>
<p id="rfc.section.3.4.1.p.9">Loss Threshold: the threshold value of lost packets over which protections MUST be triggered. By default it is set to (TBD).</p>
<h1 id="rfc.section.3.4.2">
<a href="#rfc.section.3.4.2">3.4.2.</a> MPLS OAM PM Delay sub-TLV</h1>
<p id="rfc.section.3.4.2.p.1">The "MPLS OAM PM Delay sub-TLV" depicted below is carried as a sub-TLV of the "OAM Functions TLV".</p>
<div id="#rfc.figure.8"></div>
<pre> 
0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|  PM Delay Type (2) (IANA)     |          Length               |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
| OTF |T|B|                    RESERVED                         |    
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                    Measurement Interval                       |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                       Test Interval                           |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
|                      Delay Threshold                          |
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

</pre>
<p></p>
<p id="rfc.section.3.4.2.p.3">Type: indicates a new type, the "MPLS OAM PM Loss sub-TLV" (IANA to define, suggested value 1).</p>
<p id="rfc.section.3.4.2.p.4">Length: indicates the length of the parameters in octets (12).</p>
<p id="rfc.section.3.4.2.p.5">OTF: Origin Timestamp Format of the Origin Timestamp field described in [MPLS-PM].  By default it is set to IEEE 1588 version 1.</p>
<p id="rfc.section.3.4.2.p.6">Configuration Flags, please refer to [MPLS-PM] for further details: </p>

<ul class="empty">
<li>- T: Traffic-class-specific measurement indicator. Set to 1 when the measurement operation is scoped to packets of a particular traffic class (DSCP value), and 0 otherwise.  When set to 1, the DS field of the message indicates the measured traffic class.  By default it is set to 1.</li>
<li>- B: Octet (byte) count. When set to 1, indicates that the Counter 1-4 fields represent octet counts.  When set to 0, indicates that the Counter 1-4 fields represent packet counts.  By default it is set to 0.</li>
</ul>

<p> </p>
<p id="rfc.section.3.4.2.p.7">Measurement Interval: the time interval (in microseconds) at which Delay Measurement query messages MUST be sent on both directions. If the edge LSR receiving the Path message can not support such value, it can reply back with a higher interval. By default it is set to (TBD).</p>
<p id="rfc.section.3.4.2.p.8">Test Interval: test messages interval as described in [MPLS-PM].  By default it is set to (TBD).</p>
<p id="rfc.section.3.4.2.p.9">Delay Threshold: the threshold value of measured delay (in microseconds) over which protections MUST be triggered. By default it is set to (TBD).</p>
<h1 id="rfc.section.3.5">
<a href="#rfc.section.3.5">3.5.</a> MPLS OAM FMS sub-TLV</h1>
<p id="rfc.section.3.5.p.1">The "MPLS OAM FMS sub-TLV" depicted below is carried as a sub-TLV of the "OAM Configuration sub-TLV".</p>
<div id="#rfc.figure.9"></div>
<pre> 
       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |           Type (5)  (IANA)    |        Length = 12            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |A|D|L|C|             Reserved   (set all to 0s)        |E| PHB |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                      Refresh Timer                            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
             </pre>
<p></p>
<p id="rfc.section.3.5.p.3">Type: indicates a new type, the "MPLS OAM FMS sub-TLV" (IANA to define).</p>
<p id="rfc.section.3.5.p.4">Length: indicates the TLV total length in octets.</p>
<p id="rfc.section.3.5.p.5">Signal Flags: are used to enable the following signals: </p>

<ul class="empty">
<li>- A: Alarm Indication Signal (AIS) as described in [MPLS-FMS]</li>
<li>- D: Link Down Indication (LDI) as described in [MPLS-FMS]</li>
<li>- L: Locked Report (LKR) as described in [MPLS-FMS]</li>
<li>- C: Client Signal Failure (CSF) as described in [MPLS-CSF]</li>
<li>- Remaining bits: Reserved for future specification and set to 0.</li>
</ul>

<p> </p>
<p id="rfc.section.3.5.p.6">Configuration Flags: </p>

<ul class="empty">
<li>- E: used to enable/disable explicitly clearing faults</li>
<li>- PHB: identifies the per-hop behavior of packets with fault management information</li>
</ul>

<p> </p>
<p id="rfc.section.3.5.p.7">Refresh Timer: indicates the refresh timer (in microseconds) of fault indication messages. If the edge LSR receiving the Path message can not support such value, it can reply back with a higher interval.</p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#IANA" id="IANA">IANA Considerations</a>
</h1>
<p id="rfc.section.4.p.1">This document specifies the following new TLV types:</p>
<p></p>

<ul class="empty">
<li>- "BFD Configuration" type: 2;</li>
<li>- "MPLS OAM PM Loss" type: 3;</li>
<li>- "MPLS OAM PM Delay" type: 4;</li>
<li>- "MPLS OAM FMS" type: 5.</li>
</ul>

<p> </p>
<p id="rfc.section.4.p.3">sub-TLV types to be carried in the "BFD Configuration sub-TLV": </p>

<ul class="empty">
<li>- "Local Discriminator" sub-TLV type: 1;</li>
<li>- "Negotiation Timer Parameters" sub-TLV type: 2.</li>
<li>- "BFD Authentication" sub-TLV type: 3.</li>
</ul>

<p> </p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> BFD OAM configuration errors</h1>
<p id="rfc.section.5.p.1">In addition to error values specified in [OAM-CONF-FWK] and [ETH-OAM] this document defines the following values for the "OAM Problem" Error Code:</p>
<p></p>

<ul class="empty">
<li>- "MPLS OAM Unsupported Functionality";</li>
<li>- "OAM Problem/Unsupported TX rate interval".</li>
</ul>

<p> </p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> Acknowledgements</h1>
<p id="rfc.section.6.p.1">The authors would like to thank David Allan, Lou Berger, Annamaria Fulignoli, Eric Gray, Andras Kern, David Jocha and David Sinicrope for their useful comments.</p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#Security" id="Security">Security Considerations</a>
</h1>
<p id="rfc.section.7.p.1">The signaling of OAM related parameters and the automatic establishment of OAM entities introduces additional security considerations to those discussed in [RFC3473].  In particular, a network element could be overloaded if an attacker were to request high frequency liveliness monitoring of a large number of LSPs, targeting a single network element.</p>
<p id="rfc.section.7.p.2">Security aspects will be covered in more detailed in subsequent versions of this document.</p>
<h1 id="rfc.references">
<a href="#rfc.references">8.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">8.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC3471">[RFC3471]</b></td>
<td class="top">
<a>Berger, L.</a>, "<a href="http://tools.ietf.org/html/rfc3471">Generalized Multi-Protocol Label Switching (GMPLS) Signaling Functional Description</a>", RFC 3471, January 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5586">[RFC5586]</b></td>
<td class="top">
<a>Bocci, M.</a>, <a>Vigoureux, M.</a> and <a>S. Bryant</a>, "<a href="http://tools.ietf.org/html/rfc5586">MPLS Generic Associated Channel</a>", RFC 5586, June 2009.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5654">[RFC5654]</b></td>
<td class="top">
<a>Niven-Jenkins, B.</a>, <a>Brungard, D.</a>, <a>Betts, M.</a>, <a>Sprecher, N.</a> and <a>S. Ueno</a>, "<a href="http://tools.ietf.org/html/rfc5654">Requirements of an MPLS Transport Profile</a>", RFC 5654, September 2009.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5880">[RFC5880]</b></td>
<td class="top">
<a>Katz, D.</a> and <a>D. Ward</a>, "<a href="http://tools.ietf.org/html/rfc5880">Bidirectional Forwarding Detection (BFD)</a>", RFC 5880, June 2010.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3209">[RFC3209]</b></td>
<td class="top">
<a>Awduche, D.</a>, <a>Berger, L.</a>, <a>Gan, D.</a>, <a>Li, T.</a>, <a>Srinivasan, V.</a> and <a>G. Swallow</a>, "<a href="http://tools.ietf.org/html/rfc3209">RSVP-TE: Extensions to RSVP for LSP Tunnels</a>", RFC 3209, December 2001.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3473">[RFC3473]</b></td>
<td class="top">
<a>Berger, L.</a>, "<a href="http://tools.ietf.org/html/rfc3473">Generalized Multi-Protocol Label Switching (GMPLS) Signaling Resource ReserVation Protocol-Traffic Engineering (RSVP-TE) Extensions</a>", RFC 3473, January 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5884">[RFC5884]</b></td>
<td class="top">
<a>Aggarwal, R.</a>, <a>Kompella, K.</a>, <a>Nadeau, T.</a> and <a>G. Swallow</a>, "<a href="http://tools.ietf.org/html/rfc5884">Bidirectional Forwarding Detection (BFD) for MPLS Label Switched Paths (LSPs)</a>", RFC 5884, June 2010.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5860">[RFC5860]</b></td>
<td class="top">
<a>Vigoureux, M.</a>, <a>Ward, D.</a> and <a>M. Betts</a>, "<a href="http://tools.ietf.org/html/rfc5860">Requirements for Operations, Administration, and Maintenance (OAM) in MPLS Transport Networks</a>", RFC 5860, May 2010.</td>
</tr>
<tr>
<td class="reference"><b id="OAM-CONF-FWK">[OAM-CONF-FWK]</b></td>
<td class="top">
<a>Takacs, A</a>, <a>Fedyk, D</a> and <a>J van He</a>, "<a>OAM Configuration Framework for GMPLS RSVP-TE</a>", 2009.</td>
</tr>
<tr>
<td class="reference"><b id="MPLS-TP-IDENTIF">[MPLS-TP-IDENTIF]</b></td>
<td class="top">
<a>Bocci, M</a>, <a>Swallow, G</a> and <a>E Gray</a>, "<a>MPLS-TP Identifiers</a>", 2010.</td>
</tr>
<tr>
<td class="reference"><b id="MPLS-PM">[MPLS-PM]</b></td>
<td class="top">
<a>Bryant, S</a> and <a>D Frost</a>, "<a>Packet Loss and Delay Measurement for the MPLS Transport Profile</a>", 2010.</td>
</tr>
<tr>
<td class="reference"><b id="MPLS-PM-Profile">[MPLS-PM-Profile]</b></td>
<td class="top">
<a>Bryant, S</a> and <a>D Frost</a>, "<a>A Packet Loss and Delay Measurement Profile for MPLS-based Transport Networks</a>", 2010.</td>
</tr>
<tr>
<td class="reference"><b id="MPLS-FMS">[MPLS-FMS]</b></td>
<td class="top">
<a>Swallow, G</a>, <a>Fulignoli, A</a>, <a>Vigoureux, M</a>, <a>Boutros, S</a> and <a>D Ward</a>, "<a>MPLS Fault Management OAM</a>", 2009.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">8.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="LSP-PING CONF">[LSP-PING CONF]</b></td>
<td class="top">
<a title="Ericsson">Bellagamba, E</a>, <a title="Ericsson">Andersson, L</a>, <a title="Cisco">Ward, D</a> and <a title="Acreo">P Skoldstrom</a>, "<a>Configuration of pro-active MPLS-TP Operations, Administration, and Maintenance (OAM) Functions Using LSP Ping</a>", 2010.</td>
</tr>
<tr>
<td class="reference"><b id="BFD-CCCV">[BFD-CCCV]</b></td>
<td class="top">
<a>Allan, D</a>, <a>Swallow, G</a> and <a>J Drake</a>, "<a>Proactive Connectivity Verification, Continuity Check and Remote Defect indication for MPLS Transport Profile</a>", 2010.</td>
</tr>
<tr>
<td class="reference"><b id="BFD-Ping">[BFD-Ping]</b></td>
<td class="top">
<a>Bahadur, N</a>, <a>Aggarwal, R</a>, <a>Ward, D</a>, <a>Nadeau, T</a>, <a>Sprecher, N</a> and <a>Y Weingarten</a>, "<a>LSP Ping and BFD encapsulation over ACH</a>", 2010.</td>
</tr>
<tr>
<td class="reference"><b id="MPLS-TP-OAM-FWK">[MPLS-TP-OAM-FWK]</b></td>
<td class="top">
<a>Bocci, M</a> and <a>D Allan</a>, "<a>Operations, Administration and Maintenance Framework for MPLS-based Transport Networks</a>", 2010.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4447">[RFC4447]</b></td>
<td class="top">
<a>Martini, L.</a>, <a>Rosen, E.</a>, <a>El-Aawar, N.</a>, <a>Smith, T.</a> and <a>G. Heron</a>, "<a href="http://tools.ietf.org/html/rfc4447">Pseudowire Setup and Maintenance Using the Label Distribution Protocol (LDP)</a>", RFC 4447, April 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5921">[RFC5921]</b></td>
<td class="top">
<a>Bocci, M.</a>, <a>Bryant, S.</a>, <a>Frost, D.</a>, <a>Levrau, L.</a> and <a>L. Berger</a>, "<a href="http://tools.ietf.org/html/rfc5921">A Framework for MPLS in Transport Networks</a>", RFC 5921, July 2010.</td>
</tr>
<tr>
<td class="reference"><b id="ETH-OAM">[ETH-OAM]</b></td>
<td class="top">
<a>Takacs, A</a>, <a>Gero, B</a>, <a>Fedyk, D</a>, <a>Mohan, D</a> and <a>D Long</a>, "<a>GMPLS RSVP-TE Extensions for Ethernet OAM</a>", 2009.</td>
</tr>
<tr>
<td class="reference"><b id="MPLS-TP OAM Analysis">[MPLS-TP OAM Analysis]</b></td>
<td class="top">
<a>Sprecher, N</a>, <a>Weingarten, Y</a> and <a>E Bellagamba</a>, "<a>MPLS-TP OAM Analysis</a>", 2011.</td>
</tr>
<tr>
<td class="reference"><b id="LSP Ping">[LSP Ping]</b></td>
<td class="top">
<a>Kompella, K</a> and <a>G Swallow</a>, "<a>Detecting Multi-Protocol Label Switched (MPLS) Data Plane Failures</a>", 2006.</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Elisa Bellagamba</span> editor
	  <span class="n hidden">
		<span class="family-name">Bellagamba</span>
	  </span>
	</span>
	<span class="org vcardline">Ericsson</span>
	<span class="adr">
	  <span>Torshamnsgatan 48</span>

	  <span class="vcardline">
		<span class="locality">Kista</span>,  
		<span class="region"></span>
		<span class="code">164 40</span>
	  </span>
	  <span class="country-name vcardline">Sweden</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:elisa.bellagamba@ericsson.com">elisa.bellagamba@ericsson.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Loa Andersson</span> editor
	  <span class="n hidden">
		<span class="family-name">Andersson</span>
	  </span>
	</span>
	<span class="org vcardline">Ericsson</span>
	<span class="adr">
	  <span>Torshamnsgatan 48</span>

	  <span class="vcardline">
		<span class="locality">Kista</span>,  
		<span class="region"></span>
		<span class="code">164 40</span>
	  </span>
	  <span class="country-name vcardline">Sweden</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:loa.andersson@ericsson.com">loa.andersson@ericsson.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Pontus Skoldstrom</span> editor
	  <span class="n hidden">
		<span class="family-name">Skoldstrom</span>
	  </span>
	</span>
	<span class="org vcardline">Acreo AB</span>
	<span class="adr">
	  <span>Electrum 236</span>

	  <span class="vcardline">
		<span class="locality">Kista</span>,  
		<span class="region"></span>
		<span class="code">164 40</span>
	  </span>
	  <span class="country-name vcardline">Sweden</span>
	</span>
	<span class="vcardline">Phone: +46 8 6327731</span>

<span class="vcardline">EMail: <a href="mailto:pontus.skoldstrom@acreo.se">pontus.skoldstrom@acreo.se</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Dave Ward</span> 
	  <span class="n hidden">
		<span class="family-name">Ward</span>
	  </span>
	</span>
	<span class="org vcardline">Juniper</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:dward@juniper.net">dward@juniper.net</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Attila Takacs</span> 
	  <span class="n hidden">
		<span class="family-name">Takacs</span>
	  </span>
	</span>
	<span class="org vcardline">Ericsson</span>
	<span class="adr">
	  <span>1. Laborc u.  </span>

	  <span class="vcardline">
		<span class="locality">Budapest</span>,  
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline">HUNGARY</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:attila.takacs@ericsson.com">attila.takacs@ericsson.com</a></span>

  </address>
</div>

</body>
</html>