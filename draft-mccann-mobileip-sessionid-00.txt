

INTERNET DRAFT                                               Pete McCann
Category:                                            Lucent Technologies
Title: draft-mccann-mobileip-sessionid-00.txt                 Kent Leung
Date: March 2000                                           Cisco Systems



                 Mobile IP Session Identifier Extension
                  draft-ietf-mobileip-sessionid-00.txt

Status of this Memo

   This document is an Internet Draft and is in full compliance with
   all provisions of Section 10 of RFC2026.

   Internet Drafts are working documents of the Internet Engineering
   Task Force (IETF), its Areas, and its Working Groups.  Note that
   other groups may also distribute working documents as Internet
   Drafts.

   Internet Drafts are draft documents valid for a maximum of six
   months.  Internet Drafts may be updated, replaced, or obsoleted by
   other documents at any time.  It is inappropriate to use Internet
   Drafts as reference material or to cite them other than as "work in
   progress".

   The list of current Internet Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt

   The list of Internet Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.


Abstract

   The Network Access Identifier can be added to a Mobile IP
   registration request to identify the user and to allow the
   assignment of a dynamic home address.  However, users may want to
   open several simultaneous sessions using the same NAI from the same
   or different devices and to obtain a unique IP address for each
   session.  The Mobile IP Session Identifier Extension defined in this
   draft can be used to distinguish registration requests belonging to
   these various sessions.  This draft also clarifies how a dynamic
   address is to be managed when and if the user returns to the home
   network that assigned the address.


1. Introduction

   A Mobile IP Registration Request may carry a Network Access
   Identifier (NAI) [1,2] that serves to identify the user requesting
   access to the network.  However, a given user may want to open


McCann and Leung           Expires 09/2000                           1
INTERNET DRAFT      Mobile IP Session ID Extension          March 2000


   multiple, simultaneous Mobile IP sessions from the same or different
   devices, using the same NAI, and the user may desire to use a
   dynamic home address on each.  For these situations some mechanism
   is needed to distinguish the registration requests pertaining to the
   different sessions.  This document proposes a Session Identifier
   Extension to Mobile IP that can play this role.  When it is included
   in each Registration Request sent by a mobile node, a user can have
   multiple active Mobile IP sessions, each with a different Home
   Address, while using the same NAI and Home Agent.

   A user may need to continue using an assigned address independent of
   any mobility bindings for that address.  For example, when a
   dynamically addressed MN returns home, it may want to de-register
   all care-of addresses but continue to use the assigned address on
   the home network.  This document proposes procedures to be followed
   by the MN and HA that allow the allocated address to be managed
   independently of any mobility bindings.  When these procedures are
   followed a dynamically addressed MN may enjoy continuous service
   even when returning to the home network.


2. Session Identifier Extension

   The Session Identifier extension MAY be attached to the registration
   request and/or reply.  It is defined as follows:

     0                   1                   2                   3
     0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |    Type       |    Length     |   Sub-Type    |      rsv      |
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
    |                         Session ID...
    +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

          Type

               Skippable (TBD)

          Length

               Length in bytes of this extension, not including the
               Type and Length bytes.

          Sub-Type

               A number assigned to identify the Session ID type.
               Currently this field MUST be set to zero.  Future drafts
               may specify other values and associated meanings for
               this field.

          rsv


McCann and Leung           Expires 09/2000                           2
INTERNET DRAFT      Mobile IP Session ID Extension          March 2000


               Reserved for future use. MUST be set to 0 on sending,
               MUST be ignored on reception.

          Session ID

               The Session ID field is one or more octets that
               identifies the session for which the mobile node is
               registering.  There are no restrictions on the contents
               of the Session ID field.  For example, it MAY contain
               ASCII character strings or globally unique identifiers
               in ASN.1 syntax.  The Session ID should not be NUL or
               CR/LF terminated.  The size is determined from the
               Length field.


3. Mobile Node Considerations

   The Session Identifier Extension contains a value that distinguishes
   the Registration Request as belonging to a particular session.  The
   MN should choose a suitable value for this field at the beginning of
   a session and consistently place the same value in any subsequent
   Registration Requests pertaining to that session.  If the MN sets
   teh Home Address field to zero, it is requesting that the HA assign
   an address and return it in the Home Address field of the
   Registration Reply.  If the MN includes a nonzero value in the Home
   Address field, it MUST use an address that was previously
   (dynamically or statically) allocated to the same Session ID.  When
   the Session Identifier Extension is present in the Registration
   Request it MUST appear in the Registration Request before both the
   Mobile-Home Authentication extension and Mobile-Foreign
   Authentication extension, if present.

   If the MN wishes to continue using a dynamically assigned address
   even after de-registering with its HA, it MUST follow the procedures
   outlined in Section 6.


4.  Foreign Agent Considerations

   If the Home Address is zero in the Registration Request, and the
   Session Identifier Extension is present, the foreign agent MUST use
   the NAI provided by the NAI extension [1] and the Session ID
   provided by the Session Identifier Extension to index its pending
   registration request records.  If the foreign agent cannot manage
   pending registration request records in this way, it MUST return
   Registration Reply with Code NONZERO_HOMEADDR_REQD [1]. If the
   mobile node includes the Session Identifier Extension in its
   Registration Request, then the corresponding Registration Reply from
   the Home Agent MUST include the same Session Identifier Extension.
   If not the foreign agent SHOULD send the Registration Reply to the
   mobile node, changing the Code to the value MISSING_SESSION_ID (see
   section 7).

McCann and Leung           Expires 09/2000                           3
INTERNET DRAFT      Mobile IP Session ID Extension          March 2000




5.  Home Agent Considerations

   If the mobile node includes the Session Identifier Extension in its
   Registration Request, then the corresponding Registration Reply from
   the home agent MUST also include the same Session Identifier
   Extension. If the Registration Request received by the HA has a Home
   Address field set to zero, the HA will attempt to allocate an IP
   address for the MN at the home domain and return it in the Home
   Address field of the Registration Reply.  If the home agent could
   not allocate an IP address for the mobile node or if the given
   address was already allocated to a different session it MUST return
   a Registration Reply with code CANNOT_ALLOC_IP (see section 7).  If
   the HA returns a dynamically allocated IP address, it is the
   responsibility of the HA to ensure that the address is not allocated
   to any other node for the duration of the established Mobile IP
   Lifetime.

   To ensure that the MN receives continuous service even after
   returning home, the HA MUST support the procedures outlined in
   Section 6.


6.  Address Management

   If all of the registrations for a given home address expire, then
   the home agent will release all the resources allocated for the MN
   including any dynamically allocated IP address.  However, some new
   mechanism is needed to support continued use of the address even
   when no care-of addresses are registered such as when the MN has de-
   registered after returning home.

   When the MN wishes to de-register, it should send a Registration
   Request to the HA as follows:

      - If the MN has a statically allocated home IP address, it sets
        the fields of the Registration Request as outlined in basic
        Mobile IP [3].

      - If the MN has a dynamically allocated home IP address and
        wishes to release all resources including its dynamically
        allocated IP address, it sets the Care-of Address field to its
        allocated home address and the Lifetime field to zero.

      - If the MN has a dynamically allocated home IP address and
        wishes to release all mobility bindings but wishes to keep the
        allocated IP address for use on the home network, it sets the
        Care-of Address field to zero (0.0.0.0) and also sets the
        Lifetime field to zero.  The HA will cease to tunnel traffic
        but will continue to ensure that the assigned IP address is not


McCann and Leung           Expires 09/2000                           4
INTERNET DRAFT      Mobile IP Session ID Extension          March 2000


        allocated to any other node for the duration of the previously
        established Mobile IP Lifetime.

      - If the MN has a dynamically allocated home IP address and
        wishes to de-register only one mobility binding, but not the
        allocated home address and not other mobility bindings, it sets
        the Care-of Address field to the binding it wishes to de-
        register and the Lifetime field to zero.  This does not release
        the allocated address.

      - If the MN has a dynamically allocated home IP address and
        wishes to extend the use of the address without affecting any
        mobility bindings that may be in place, it sets the Care-of
        Address field to its allocated home address and the Lifetime
        field to a value greater than zero.

   As an example, assume that the MN powers up and connects to some FA.
   Since it does not yet have an address, it sets the Home Address
   field to zero (0.0.0.0), the Care-of Address to that of the FA, and
   sets the NAI, Session ID, and Lifetime to appropriate values.  The
   HA allocates an address and returns it.  Later, the MN moves back to
   the home network.  It de-registers its mobility binding by sending a
   Registration Request to the HA with the Care-of Address set to the
   FA's address and the Lifetime set to zero.  Although this removes
   the mobility binding, the MN's home address is still reserved for
   the remaining Lifetime that was previously established.  The MN may
   periodically renew use of the address before it expires by sending a
   Registration Request to the HA with Care-of Address set to the
   allocated home address and the Lifetime set to an appropriate value.
   The MN may explicitly release the address by sending a Registration
   Request with Care-of Address set to the allocated home address and
   the Lifetime set to zero.


7.  Error Values

   The following table contains the error Code [3] to be returned in
   the Registration Reply, the value for the Code, and the section in
   which it is first mentioned.

    Error Name                 Value         Section
    ----------                 ------        --------
    MISSING_SESSION_ID          TBD            4
    CANNOT_ALLOC_IP             TBD            5


8. IANA Considerations

   The Session Identifier Extension defined in Section 2 is a Mobile IP
   registration extension as defined in RFC 2002 [3].  IANA should
   assign a Type value consistent with this number space.


McCann and Leung           Expires 09/2000                           5
INTERNET DRAFT      Mobile IP Session ID Extension          March 2000


   The Code values defined in Section 6 are error codes as defined in
   RFC 2002 [3].  IANA should assign values to these codes consistent
   with this number space.


9. Security Considerations

   Mobile IP registration messages are authenticated, and the
   authentication verified by the recipient.  The Session Identifier
   Extension is always covered by at least a Mobile-Home Authentication
   Extension.


10. IPv6 Considerations

   As with the NAI extension for Mobile IP [1], support for Session ID
   based registration in IPv6 is outside the scope of this document.
   Any of the methods suggested there for creating an attendant
   function in the visited network could also make use of a Session ID
   extension to support multiple, simultaneous sessions.


11. Acknowledgements

   Thanks to Mohamed Khalil for his participation in early drafts of
   this document.


12. Intellectual Property Statement

   Cisco may have IPR on material contained in this draft.  Upon
   approval by the IESG of the relevant Internet standards track
   specification and if any patents issue to Cisco or its subsidiaries
   with claims that are necessary for practicing this standard, any
   party will be able to obtain the right to implement, use and
   distribute the technology or works when implementing, using or
   distributing technology based upon the specific specification(s)
   under openly specified, reasonable, non-discriminatory terms.


13. References

   [1] P. Calhoun and C. Perkins.  Mobile IP Network Access Identifier
      Extension.  Internet Draft, Internet Engineering Task Force.
      draft-ietf-mobileip-mn-nai-07.txt, January 2000.  Work in
      progress.

   [2] B. Aboba and M. Beadles.  The Network Access Identifier.
      Request for Comments (Proposed Standard) 2486, Internet
      Engineering Task Force, January 1999



McCann and Leung           Expires 09/2000                           6
INTERNET DRAFT      Mobile IP Session ID Extension          March 2000


   [3] C. Perkins.  IP Mobility Support for IPv4, revised.  Internet
      Draft, Internet Engineering Task Force.
      draft-ietf-mobileip-rfc2002-bis-01.txt, January 2000.  Work in
      progress.


Author's Addresses

   Questions about this memo can be directed to:

         Peter J. McCann
         Lucent Technologies
         Rm 2Z-305
         263 Shuman Blvd
         Naperville, IL  60566
         USA
         email: mccap@lucent.com
         phone: +1 630 713 9359
         fax:   +1 630 713 4982


         Kent Leung
         Cisco Systems, Inc.
         170 West Tasman Drive
         San Jose, CA 95134
         USA
         email: kleung@cisco.com
         phone: +1 408 526 5030
         fax:   +1 408 526 4952
























McCann and Leung           Expires 09/2000                           7

