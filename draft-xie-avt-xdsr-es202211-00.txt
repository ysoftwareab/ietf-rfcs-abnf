

Audio Video Transport WG                                          Q. Xie
Internet-Draft                                                 D. Pearce
Expires: April 18, 2004                                         Motorola
                                                        October 19, 2003


      RTP Payload Format for European Telecommunications Standards
  Institute (ETSI) European Standard ES 202 211 Extended  Distributed
                   Speech Recognition Encoding (XFE)
                   draft-xie-avt-xdsr-es202211-00.txt

Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups. Note that other
   groups may also distribute working documents as Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time. It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at http://
   www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on April 18, 2004.

Copyright Notice

   Copyright (C) The Internet Society (2003). All Rights Reserved.

Abstract

   This document specifies an RTP payload format for encapsulating ETSI
   Standard ES 202 211 extended advanced front-end signal processing
   feature streams for distributed speech recognition (DSR) systems.










Xie & Pearce             Expires April 18, 2004                 [Page 1]

Internet-Draft    RTP Payload Format for ES202211 DSR       October 2003


Table of Contents

   1.  Conventions  . . . . . . . . . . . . . . . . . . . . . . . . .  3
   2.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3
   2.1 ETSI ES 202 211 Extended DSR Front-end Codec . . . . . . . . .  3
   3.  ES 202 211 DSR RTP Payload Format  . . . . . . . . . . . . . .  4
   3.1 Consideration on Number of FPs in Each RTP Packet  . . . . . .  5
   3.2 Support for Discontinuous Transmission . . . . . . . . . . . .  5
   4.  Frame Pair Formats . . . . . . . . . . . . . . . . . . . . . .  5
   4.1 Format of Speech and Non-speech FPs  . . . . . . . . . . . . .  5
   4.2 Format of Null FP  . . . . . . . . . . . . . . . . . . . . . .  7
   4.3 RTP header usage . . . . . . . . . . . . . . . . . . . . . . .  7
   5.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . .  8
   5.1 Mapping MIME Parameters into SDP . . . . . . . . . . . . . . .  9
   6.  Security Considerations  . . . . . . . . . . . . . . . . . . . 10
   7.  Acknowledgments  . . . . . . . . . . . . . . . . . . . . . . . 10
       Normative References . . . . . . . . . . . . . . . . . . . . . 10
       Informative References . . . . . . . . . . . . . . . . . . . . 10
       Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . 11
       Intellectual Property and Copyright Statements . . . . . . . . 12































Xie & Pearce             Expires April 18, 2004                 [Page 2]

Internet-Draft    RTP Payload Format for ES202211 DSR       October 2003


1. Conventions

   The keywords MUST, MUST NOT, REQUIRED, SHALL, SHALL NOT, SHOULD,
   SHOULD NOT, RECOMMENDED, NOT RECOMMENDED, MAY, and OPTIONAL, when
   they appear in this document, are to be interpreted as described in
   [3].

   The following acronyms are used in this document:

      DSR  - Distributed Speech Recognition
      ETSI - the European Telecommunications Standards Institute
      FP   - Frame Pair
      DTX  - Discontinuous Transmission


2. Introduction

   Distributed speech recognition (DSR) technology is intended for a
   remote device acting as a thin client, also known as the front-end,
   to communicate with a speech recognition server, also called a speech
   engine, over a network connection to obtain speech recognition
   services. More details on DSR over Internet can be found in [7].

   To achieve interoperability with different client devices and speech
   engines, the first ETSI standard DSR front-end ES 201 108 was
   published in early 2000 [8], and an RTP packetization for ES 201 108
   frames is defined in [7] in IETF.

   In ES 202 211 [1], ETSI issues another standard for an Extended DSR
   front-end that provides additional fundamental frequency and voicing
   class information along with the front-end features of ES 201 108.
   The purpose of this information is to enable the reconstruction of
   speech waveform at the back-end and may also be useful in enhancing
   the recognition accuracy of tonal languages, e.g., Mandarin,
   Cantonese, and Thai.

   The RTP packetization for ES 202 211 front-end defined in this
   document uses the same RTP packet format layout as that defined in
   [7] but with the addition of the compressed information for the
   extension in the frame bit definition for the payload. It also has a
   different payload type MIME registration.

2.1 ETSI ES 202 211 Extended DSR Front-end Codec

   Some relevant characteristics of ES 202 211 Extended DSR front-end
   codec are summarized below.

   ES 202 211 is an extension of the mel-cepstrum DSR Front-end standard



Xie & Pearce             Expires April 18, 2004                 [Page 3]

Internet-Draft    RTP Payload Format for ES202211 DSR       October 2003


   ES 201 108 [8]. The mel-cepstrum front-end provides the features for
   speech recognition but these are not available for human listening.
   The purpose of the extension is allow the reconstruction of the
   speech waveform from these features so that they can be replayed. The
   front-end feature extraction part of the processing is exactly the
   same as for ES 201 108. To allow speech reconstruction additional
   fundamental frequency (perceived as pitch) and voicing class (e.g.
   non-speech, voiced, unvoiced and mixed) information is needed. This
   is the extra information that is provided by the extended front-end
   processing algorithms at the device side that is compressed and
   transmitted along with the front-end features to the server. This
   extra information may also be useful for improved speech recognition
   performance with tonal languages such as Mandarin, Cantonese and
   Thai.

   Full information about the client side signal processing algorithms
   used in the standard are described in the specification ES 202 211
   [1].

   The additional fundamental frequency and voicing class information is
   compressed for each frame pair. The pitch for the first frame of the
   FP is quantised to 7 bits and the second frame is differentially
   quantized with 5 bits. The voicing class is indicated with one bit
   for each frame. The total for the extension information for a frame
   pair therefore consists of 14 bits plus and additional 2 bits of CRC
   error protection computed over these extension bits only.

   The total information for the frame pair is made up of 92 bits for
   the two compressed front-end feature frames (including 4 bits for
   their CRC) plus 16 bits for the extension (including 2 bits for their
   CRC) and 4 bits of null padding to give a total of 14 octets per
   frame pair. As for ES 201 208 the extended frame pair also
   corresponds to 20ms of speech.  The extended front-end supports three
   raw sampling rates: 8 kHz, 11 kHz, and 16 kHz.

   The quantized vectors from two consecutive frames are put into an FP,
   as described in more detail in Section 4.1 below.

   The parameters received at the remote server from the RTP extended
   DSR payload specified here can be used to synthesize an intelligible
   speech waveform for replay. The algorithms to do this are described
   in the specification ES 202 211 [1].

3. ES 202 211 DSR RTP Payload Format

   An ES 202 211 DSR RTP payload datagram is very similar to that
   defined in Section 3 of [7], i.e., a standard RTP header followed by
   a DSR payload containing a series of DSR FPs.



Xie & Pearce             Expires April 18, 2004                 [Page 4]

Internet-Draft    RTP Payload Format for ES202211 DSR       October 2003


   The size of each ES 202 211 FP is 112 bits or 14 octets (see Sections
   4 below). This ensures that a DSR RTP payload will always end on an
   octet boundary.

3.1 Consideration on Number of FPs in Each RTP Packet

   Same considerations described in Section 3.1 of [7] apply to ES 202
   211 RTP payload.

3.2 Support for Discontinuous Transmission

   Same considerations described in Section 3.2 of [7] apply to ES 202
   211 RTP payload.

4. Frame Pair Formats

4.1 Format of Speech and Non-speech FPs

   The following mel-cepstral frame MUST be used, as defined in Section
   6.2.4 in [1]:

   As defined in Section 6.2.4 in [1], after two frames (Frame #1 and
   Frame #2) worth of codebook indices, or 88 bits, a 4-bit CRC
   calculated on these 88 bits immediately follows it. The pitch indices
   of the first frame (Pidx1: 7 bits) and the second frame (Pidx2: 5
   bits) of the frame pair then follow. The class indices of the two
   frames in the frame pair worth 1 bit each (Cidx1 and Cidx2) next
   follow. Finally, a 2-bit CRC calculated on the pitch and class bits
   (total: 14 bits) of the frame pair using the binary polynomial g(X) =
   1 + X + X2 is included (PC-CRC).  The total number of bits in frame
   pair packet is therefore 44 + 44 + 4 + 7 + 5 + 1 + 1 + 2 = 108. At
   the end, each FP MUST be padded with 4 zeros to the MSB 4 bits of the
   last octet in order to make the FP aligned to the 32-bit word
   boundary.

   The following diagram shows a complete ES 202 211 FP:















Xie & Pearce             Expires April 18, 2004                 [Page 5]

Internet-Draft    RTP Payload Format for ES202211 DSR       October 2003


     Frame #1 in FP:
     ===============
       (MSB)                                     (LSB)
         0     1     2     3     4     5     6     7
      +-----+-----+-----+-----+-----+-----+-----+-----+
      :  idx(2,3) |            idx(0,1)               |    Octet 1
      +-----+-----+-----+-----+-----+-----+-----+-----+
      :       idx(4,5)        |     idx(2,3) (cont)   :    Octet 2
      +-----+-----+-----+-----+-----+-----+-----+-----+
      |             idx(6,7)              |idx(4,5)(cont)  Octet 3
      +-----+-----+-----+-----+-----+-----+-----+-----+
       idx(10,11) |              idx(8,9)             |    Octet 4
      +-----+-----+-----+-----+-----+-----+-----+-----+
      :       idx(12,13)      |   idx(10,11) (cont)   :    Octet 5
      +-----+-----+-----+-----+-----+-----+-----+-----+
                              |   idx(12,13) (cont)   :    Octet 6/1
                              +-----+-----+-----+-----+


    Frame #2 in FP:
    ===============
       (MSB)                                     (LSB)
         0     1     2     3     4     5     6     7
      +-----+-----+-----+-----+
      :        idx(0,1)       |                            Octet 6/2
      +-----+-----+-----+-----+-----+-----+-----+-----+
      |              idx(2,3)             |idx(0,1)(cont)  Octet 7
      +-----+-----+-----+-----+-----+-----+-----+-----+
      :  idx(6,7) |              idx(4,5)             |    Octet 8
      +-----+-----+-----+-----+-----+-----+-----+-----+
      :        idx(8,9)       |      idx(6,7) (cont)  :    Octet 9
      +-----+-----+-----+-----+-----+-----+-----+-----+
      |          idx(10,11)               |idx(8,9)(cont)  Octet 10
      +-----+-----+-----+-----+-----+-----+-----+-----+
      |                   idx(12,13)                  |    Octet 11
      +-----+-----+-----+-----+-----+-----+-----+-----+


    CRC for Frame #1 and Frame #2 in FP:
    ====================================
       (MSB)                                     (LSB)
         0     1     2     3     4     5     6     7
                              +-----+-----+-----+-----+
                              |          CRC          |    Octet 12/1
                              +-----+-----+-----+-----+






Xie & Pearce             Expires April 18, 2004                 [Page 6]

Internet-Draft    RTP Payload Format for ES202211 DSR       October 2003


    Extension information and padding in FP:
    ========================================
       (MSB)                                     (LSB)
         0     1     2     3     4     5     6     7
      +-----+-----+-----+-----+
      :       Pidx1           |                            Octet 12/2
      +-----+-----+-----+-----+-----+-----+-----+-----+
      |            Pidx2            |   Pidx1 (cont)  :    Octet 13
      +-----+-----+-----+-----+-----+-----+-----+-----+
      |  0  |  0  |  0  |  0  |  PC-CRC   |Cidx2|Cidx1|    Octet 14
      +-----+-----+-----+-----+-----+-----+-----+-----+

   The 4-bit CRC and the 2-bit PC-CRC in the FP MUST be calculated using
   the formula (including the bit-order rules) defined in 6.2.4 in [1].

   Therefore, each FP represents 20ms of original speech. Note, as shown
   above, each FP MUST be padded with 4 zeros to the MSB 4 bits of the
   last octet in order to make the FP aligned to the 32-bit word
   boundary. This makes the total size of an FP 112 bits, or 14 octets.
   Note, this padding is separate from padding indicated by the P bit in
   the RTP header.

   Any number of FPs MAY be aggregate together in an RTP payload and
   they MUST be consecutive in time. However, one SHOULD always keep the
   RTP payload size smaller than the MTU in order to avoid IP
   fragmentation and SHOULD follow the recommendations given in Section
   3.1 in [7] when determining the proper number of FPs in an RTP
   payload.

4.2 Format of Null FP

   A Null FP for the ES 202 211 front-end codec is defined by setting
   all the 112 bits of the FP with 0's.

4.3 RTP header usage

   The format of the RTP header is specified in [5]. This payload format
   uses the fields of the header in a manner consistent with that
   specification.

   The RTP timestamp corresponds to the sampling instant of the first
   sample encoded for the first FP in the packet. The timestamp clock
   frequency is the same as the sampling frequency, so the timestamp
   unit is in samples.

   As defined by ES 202 211 front-end codec, the duration of one FP is
   20 ms, corresponding to 160, 220, or 320 encoded samples with
   sampling rate of 8, 11, or 16 kHz being used at the front-end,



Xie & Pearce             Expires April 18, 2004                 [Page 7]

Internet-Draft    RTP Payload Format for ES202211 DSR       October 2003


   respectively.  Thus, the timestamp is increased by 160, 220, or 320
   for each consecutive FP, respectively.

   The DSR payload for ES 202 211 front-end codes is always an integral
   number of octets. If additional padding is required for some other
   purpose, then the P bit in the RTP in the header may be set and
   padding appended as specified in [5].

   The RTP header marker bit (M) should be set following the general
   rules for audio codecs as defined in Section 4.1 in [6].

   The assignment of an RTP payload type for this new packet format is
   outside the scope of this document, and will not be specified here.
   It is expected that the RTP profile under which this payload format
   is being used will assign a payload type for this encoding or specify
   that the payload type is to be bound dynamically.

5. IANA Considerations

   One new MIME subtype registration is required for this payload type,
   as described below.

   Media Type name: audio

   Media subtype name: dsr-es202211

   Required parameters: none

   Optional parameters:

   rate: Indicates the sample rate of the speech.  Valid values include:
      8000, 11000, and 16000.  If this parameter is not present, 8000
      sample rate is assumed.

   maxptime: The maximum amount of media which can be encapsulated in
      each packet, expressed as time in milliseconds. The time shall be
      calculated as the sum of the time the media present in the packet
      represents.  The time SHOULD be a multiple of the frame pair size
      (i.e., one FP => 20ms).

      If this parameter is not present, maxptime is assumed to be 80ms.

      Note, since the performance of most speech recognizers are
      extremely sensitive to consecutive FP losses, if the user of the
      payload format expects a high packet loss ratio for the session,
      it MAY consider to explicitly choose a maxptime value for the
      session that is shorter than the default value.




Xie & Pearce             Expires April 18, 2004                 [Page 8]

Internet-Draft    RTP Payload Format for ES202211 DSR       October 2003


   ptime: see RFC2327 [4].

   Encoding considerations: This type is defined for transfer via RTP
      [5] as described in Sections 3 and 4 of RFC XXXX.

   Security considerations: See Section 6 of RFC XXXX.

   Person & email address to contact for further information:
      Qiaobing.Xie@motorola.com

   Intended usage: COMMON. It is expected that many VoIP applications
      (as well as mobile applications) will use this type.

   Author/Change controller:

      *  Qiaobing.Xie@motorola.com

      *  IETF Audio/Video transport working group


5.1 Mapping MIME Parameters into SDP

   The information carried in the MIME media type specification has a
   specific mapping to fields in the Session Description Protocol (SDP)
   [4], which is commonly used to describe RTP sessions. When SDP is
   used to specify sessions employing ES 202 050 DSR codec, the mapping
   is as follows:

   o  The MIME type ("audio") goes in SDP "m=" as the media name.

   o  The MIME subtype ("dsr-es202211") goes in SDP "a=rtpmap" as the
      encoding name.

   o  The optional parameter "rate" also goes in "a=rtpmap" as clock
      rate.

   o  The optional parameters "ptime" and "maxptime" go in the SDP
      "a=ptime" and "a=maxptime" attributes, respectively.

   Example of usage of ES 202 211 DSR:

     m=audio 49120 RTP/AVP 101
     a=rtpmap:101 dsr-es202211/8000
     a=maxptime:40







Xie & Pearce             Expires April 18, 2004                 [Page 9]

Internet-Draft    RTP Payload Format for ES202211 DSR       October 2003


6. Security Considerations

   Implementations using the payload defined in this specification are
   subject to the security considerations discussed in the RTP
   specification [5] and the RTP profile [6]. This payload does not
   specify any different security services.

7. Acknowledgments

   The design presented here is based on that of [7].

Normative References

   [1]  European Telecommunications Standards Institute (ETSI) Standard
        ES 202 211 v0.1.1, "Speech Processing, Transmission and Quality
        Aspects (STQ); Distributed Speech Recognition; Extended
        Front-end Feature Extraction Algorithm; Compression Algorithms",
        (http://pda.etsi.org/pda/home.asp?wki_id=??) , April 2003.

   [2]  Bradner, S., "The Internet Standards Process -- Revision 3", BCP
        9, RFC 2026, October 1996.

   [3]  Bradner, S., "Key words for use in RFCs to Indicate Requirement
        Levels", BCP 14, RFC 2119, March 1997.

   [4]  Handley, M. and V. Jacobson, "SDP: Session Description
        Protocol", RFC 2327, April 1998.

   [5]  Schulzrinne, H., Casner, S., Frederick, R. and V. Jacobson,
        "RTP: A Transport Protocol for Real-Time Applications", RFC
        3550, July 2003.

   [6]  Schulzrinne, H. and S. Casner, "RTP Profile for Audio and Video
        Conferences with Minimal Control", RFC 3551, July 2003.

   [7]  Xie, Q., "RTP Payload Format for European Telecommunications
        Standards Institute (ETSI) European Standard ES 201 108
        Distributed Speech Recognition Encoding", RFC 3557, July 2003.

Informative References

   [8]  European Telecommunications Standards Institute (ETSI) Standard
        ES 201 108, "Speech Processing, Transmission and Quality Aspects
        (STQ); Distributed Speech Recognition; Front-end Feature
        Extraction Algorithm; Compression Algorithms", http://
        webapp.etsi.org/pda/home.asp?wki_id=9948 , April 2000.





Xie & Pearce             Expires April 18, 2004                [Page 10]

Internet-Draft    RTP Payload Format for ES202211 DSR       October 2003


Authors' Addresses

   Qiaobing Xie
   Motorola, Inc.
   1501 W. Shure Drive, 2-F9
   Arlington Heights, IL  60004
   US

   Phone: +1-847-632-3028
   EMail: qxie1@email.mot.com


   David Pearce
   Motorola Labs
   UK Research Laboratory
   Jays Close
   Viables Industrial Estate
   Basingstoke, HANTS  RG22 4PD
   UK

   Phone: +44 (0)1256 484 436
   EMail: bdp003@motorola.com





























Xie & Pearce             Expires April 18, 2004                [Page 11]

Internet-Draft    RTP Payload Format for ES202211 DSR       October 2003


Intellectual Property Statement

   The IETF takes no position regarding the validity or scope of any
   intellectual property or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; neither does it represent that it
   has made any effort to identify any such rights. Information on the
   IETF's procedures with respect to rights in standards-track and
   standards-related documentation can be found in BCP-11. Copies of
   claims of rights made available for publication and any assurances of
   licenses to be made available, or the result of an attempt made to
   obtain a general license or permission for the use of such
   proprietary rights by implementors or users of this specification can
   be obtained from the IETF Secretariat.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights which may cover technology that may be required to practice
   this standard. Please address the information to the IETF Executive
   Director.


Full Copyright Statement

   Copyright (C) The Internet Society (2003). All Rights Reserved.

   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it
   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works. However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.

   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assignees.

   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION



Xie & Pearce             Expires April 18, 2004                [Page 12]

Internet-Draft    RTP Payload Format for ES202211 DSR       October 2003


   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Acknowledgement

   Funding for the RFC Editor function is currently provided by the
   Internet Society.











































Xie & Pearce             Expires April 18, 2004                [Page 13]

