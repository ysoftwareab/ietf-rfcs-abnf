<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Locations with Locally-Defined Coordinate Reference Systems for the Presence Information Data Format - Location Object (PIDF-LO)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Locations with Locally-Defined Coordinate Reference Systems for the Presence Information Data Format - Location Object (PIDF-LO)">
<meta name="keywords" content="Internet-Draft, Indoor, CRS, Uncertainty, GML">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">GEOPRIV</td><td class="header">M. Thomson</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">J. Winterbottom</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">Andrew Corporation</td></tr>
<tr><td class="header">Expires: June 4, 2010</td><td class="header">December 01, 2009</td></tr>
</table></td></tr></table>
<h1><br />Locations with Locally-Defined Coordinate Reference Systems for the Presence Information Data Format - Location Object (PIDF-LO)<br />draft-thomson-geopriv-indoor-location-01</h1>

<h3>Abstract</h3>

<p>A method is described for constructing a Presence Information Data Format - Location Object (PIDF-LO) document that contains location information using a locally-defined coordinate reference system (CRS).  This form of representation allows for use of locally-defined coordinates with potential advantages for improved accuracy and usability in local context, in particular location applications that operate indoors.  A framework for defining a local CRS is provided.   A process for transformation of coordinates defined in the local CRS and the widely used World Geodetic System 1984 (WGS84) CRS is defined.
      
</p>
<h3>Status of This Memo</h3>
<p>
This Internet-Draft is submitted to IETF in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF), its areas, and its working groups.
Note that other groups may also distribute working documents as
Internet-Drafts.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
The list of current Internet-Drafts can be accessed at
<a href='http://www.ietf.org/ietf/1id-abstracts.txt'>http://www.ietf.org/ietf/1id-abstracts.txt</a>.</p>
<p>
The list of Internet-Draft Shadow Directories can be accessed at
<a href='http://www.ietf.org/shadow.html'>http://www.ietf.org/shadow.html</a>.</p>
<p>
This Internet-Draft will expire on June 4, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2009 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">1.1.</a>&nbsp;
Solution<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">1.2.</a>&nbsp;
Example Use Case<br />
<a href="#conventions">2.</a>&nbsp;
Conventions used in this document<br />
<a href="#anchor4">3.</a>&nbsp;
Overview<br />
<a href="#anchor5">4.</a>&nbsp;
Generating Local Location Information<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">4.1.</a>&nbsp;
Local Map Image<br />
<a href="#crs">5.</a>&nbsp;
Local Coordinate Reference System<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#cs">5.1.</a>&nbsp;
Cartesian Coordinate System<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#indoorDatum">5.2.</a>&nbsp;
Local or Indoor Datum<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor">5.2.1.</a>&nbsp;
Anchor Location<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#orientation">5.2.2.</a>&nbsp;
Orientation<br />
<a href="#localMap">6.</a>&nbsp;
Local Map Presentation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">6.1.</a>&nbsp;
Image Coordinates<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#image">6.2.</a>&nbsp;
Map Image<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#referenceLocation">6.3.</a>&nbsp;
Reference Location<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#offset">6.4.</a>&nbsp;
Pixel Offset<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#scale">6.5.</a>&nbsp;
Scaling<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor8">6.5.1.</a>&nbsp;
Map Projections<br />
<a href="#transform">7.</a>&nbsp;
Coordinate Transformation<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">7.1.</a>&nbsp;
Conversion from WGS84 to Local CRS<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">7.2.</a>&nbsp;
Conversion from Local CRS to WGS<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#matrix">7.3.</a>&nbsp;
Transformation Matrix<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#extraunc">7.4.</a>&nbsp;
Managing Uncertainty<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">7.5.</a>&nbsp;
Angles of Orientation<br />
<a href="#example">8.</a>&nbsp;
Example PIDF-LO<br />
<a href="#anchor12">9.</a>&nbsp;
GML Definitions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#uom">9.1.</a>&nbsp;
Units of Measure<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#codeSpace">9.2.</a>&nbsp;
Code Space Definitions<br />
<a href="#schema">10.</a>&nbsp;
XML Schema<br />
<a href="#security">11.</a>&nbsp;
Security Considerations<br />
<a href="#iana">12.</a>&nbsp;
IANA Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#iana-ns">12.1.</a>&nbsp;
URN Sub-Namespace Registration for 'urn:ietf:params:xml:ns:geopriv:indoor'<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#iana-schema">12.2.</a>&nbsp;
XML Schema Registration<br />
<a href="#anchor13">13.</a>&nbsp;
Acknowledgements<br />
<a href="#rfc.references1">14.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">14.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">14.2.</a>&nbsp;
Informative References<br />
<a href="#whatsup">Appendix&nbsp;A.</a>&nbsp;
Calculating WGS84 ECEF Up, North and East Vectors<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>Providing location information in indoor environments presents new sets of technical challenges and use cases for location determination and representation.  For use indoors, location information that is in a form specific to that locality can be both more accurate and more usable.
      
</p>
<p>The ability to specify relative coordinates simplifies the use of local applications, especially local mapping or navigation applications, which often rely on floor plan images or provide directions based on fixtures of the local environment.
      
</p>
<p>Within the confines of a building, or in any local context, location information might be determined in relation to fixtures in that environment.  This might provide location information that is highly accurate within a local region, but errors are added if conversion to a globally useful form like World Geodetic System 1984 (WGS84) are required.
      </p>
<blockquote class="text">
<p>For instance, wireless positioning systems within a building might provide excellent accuracy in relation to the wireless transmitters.  However, in converting locations in a local reference frame to a globally applicable systems such as WGS84, these systems encounter difficulties.
        
</p>
<p>On the other hand, Global Navigation Satellite Systems (GNSS), which are widely used to generate location information, operate poorly indoors or anywhere an unobstructed view of the sky cannot be found.
        
</p>
</blockquote><p>
      For these cases and others like them, avoiding conversion steps ensures that unnecessary errors are not introduced.
      
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.1"></a><h3>1.1.&nbsp;
Solution</h3>

<p>A means to describe a location in relation to a fixed reference is defined.  These locations use the forms defined in <a class='info' href='#OGC.GeoShape'>[OGC.GeoShape]<span> (</span><span class='info'>Thomson, M. and C. Reed, &ldquo;GML 3.1.1 PIDF-LO Shape Application Schema for use by the Internet Engineering Task Force (IETF),&rdquo; April&nbsp;2007.</span><span>)</span></a>, using a custom coordinate reference system (CRS).
        
</p>
<p>A form for defining a local CRS is described, such that locations in that CRS can be trivially translated to and from the World Geodetic System 1984 (WGS84) CRS used in PIDF-LO.  This allows for location to be expressed in a canonical form, while preserving the location information for use in the local context.
        
</p>
<p>Guidelines are further provided for constructing a <a class='info' href='#RFC4119'>Presence Information Data Format - Location Object (PIDF-LO) document<span> (</span><span class='info'>Peterson, J., &ldquo;A Presence-based GEOPRIV Location Object Format,&rdquo; December&nbsp;2005.</span><span>)</span></a> [RFC4119] so that existing applications and consumers of location information are able to operate.  These guidelines are based on those described in <a class='info' href='#RFC5491'>RFC 5491<span> (</span><span class='info'>Winterbottom, J., Thomson, M., and H. Tschofenig, &ldquo;GEOPRIV Presence Information Data Format Location Object (PIDF-LO) Usage Clarification, Considerations, and Recommendations,&rdquo; March&nbsp;2009.</span><span>)</span></a> [RFC5491].
        
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1.2"></a><h3>1.2.&nbsp;
Example Use Case</h3>

<p>A shopper uses the information contained in a PIDF-LO to identify the location of a store in a mall.  The <a class='info' href='#OGC.GeoShape'>geodetic location information<span> (</span><span class='info'>Thomson, M. and C. Reed, &ldquo;GML 3.1.1 PIDF-LO Shape Application Schema for use by the Internet Engineering Task Force (IETF),&rdquo; April&nbsp;2007.</span><span>)</span></a> [OGC.GeoShape] or <a class='info' href='#RFC5139'>civic address information<span> (</span><span class='info'>Thomson, M. and J. Winterbottom, &ldquo;Revised Civic Location Format for Presence Information Data Format Location Object (PIDF-LO),&rdquo; February&nbsp;2008.</span><span>)</span></a> [RFC5139] helps the shopper identify the location of the mall.
        
</p>
<p>The relative, or indoor, location representation helps the shopper find the store within the mall.  This information can be used together with a map of the mall, providing information in a form that is more readily usable to the shopper.  The location of the store or the shopper can be overlaid on the provided map, aiding in finding the store.
        
</p>
<p>Transformation from WGS84 to the local CRS allows the shopper to use location determination methods that are not aware of the local CRS.  Conversely, the location in the local CRS can be transformed into a geodetic location for use outside of the mall, or for applications that are unaware of the local context.
        
</p>
<a name="conventions"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Conventions used in this document</h3>

<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
      
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Overview</h3>

<p>A location in a user-defined CRS is included in a PIDF-LO document as shown in <a class='info' href='#overview'>Figure&nbsp;1<span> (</span><span class='info'>PIDF-LO Structure Overview</span><span>)</span></a>, which includes the high-level elements involved.

</p><br /><hr class="insert" />
<a name="overview"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;presence entity="pres:..."&gt;

    &lt;tuple id="geodetic"&gt;&lt;status&gt;&lt;geopriv&gt;  * geodetic tuple
      &lt;location-info&gt;
        &lt;Circle srsName="urn:..." .../&gt;     * geodetic location
      &lt;/location-info&gt; ...
    &lt;/geopriv&gt;&lt;/status&gt;&lt;/tuple&gt;

    &lt;tuple id="indoor"&gt;&lt;status&gt;&lt;geopriv&gt;    * indoor tuple
      &lt;location-info&gt;

        &lt;Circle srsName="#indoorCRS" .../&gt;  * indoor location

        &lt;EngineeringCRS ...&gt;                * local CRS
          &lt;srsName&gt;#indoorCRS&lt;/srsName&gt;
          &lt;usesCS .../&gt;                     * coordinate system
          &lt;usesEngineeringDatum&gt;
            &lt;IndoorDatum .../&gt;              * local datum
          &lt;/usesEngineeringDatum&gt;
        &lt;/EngineeringCRS&gt;

        &lt;mapImage .../&gt;                     * image information
      &lt;/location-info&gt; ...
    &lt;/geopriv&gt;&lt;/status&gt;&lt;/tuple&gt;

  &lt;/presence&gt;
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;1: PIDF-LO Structure Overview&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>Two tuples are included in the PIDF-LO.  One containing geodetic location information, the second containing locally defined coordinates.  Depending on how the location generator operates, <a class='info' href='#transform'>transformation<span> (</span><span class='info'>Coordinate Transformation</span><span>)</span></a> might be used to construct one or other location element.
      
</p>
<p>The first <tt>tuple</tt> (or <tt>device</tt> or <tt>person</tt>) contains <a class='info' href='#OGC.GeoShape'>geodetic information<span> (</span><span class='info'>Thomson, M. and C. Reed, &ldquo;GML 3.1.1 PIDF-LO Shape Application Schema for use by the Internet Engineering Task Force (IETF),&rdquo; April&nbsp;2007.</span><span>)</span></a> [OGC.GeoShape].  This first tuple uses a WGS84 CRS, so that the information is usable outside of the local context.

      </p>
<blockquote class="text">
<p>Aside from being required by <a class='info' href='#RFC5491'>[RFC5491]<span> (</span><span class='info'>Winterbottom, J., Thomson, M., and H. Tschofenig, &ldquo;GEOPRIV Presence Information Data Format Location Object (PIDF-LO) Usage Clarification, Considerations, and Recommendations,&rdquo; March&nbsp;2009.</span><span>)</span></a>, this ensures that overly simplistic processors that rely on tuple ordering do not erroneously assume the use of WGS84 with the subsequent shape information.
</p>
</blockquote><p>
      
</p>
<p>A second <tt>tuple</tt> includes location information using a <a class='info' href='#OGC.GML-3.1.1'>Geography Markup Language (GML)<span> (</span><span class='info'>Cox, S., Daisey, P., Lake, R., Portele, C., and A. Whiteside, &ldquo;Geographic information - Geography Markup Language (GML),&rdquo; April&nbsp;2004.</span><span>)</span></a> [OGC.GML&#8209;3.1.1] geometry element, but using a custom, geo-referenced CRS in place of the WGS84 reference that is used for the geodetic shape.  A formal definition of the CRS is included in the tuple with the shape.
      
</p>
<p>The CRS is defined only within the scope of the PIDF-LO. A URI fragment identifier is used to identify the CRS <tt>srsName</tt> parameters that reference the CRS.
      
</p>
<p>A reference to a GML dictionary containing the CRS MAY be used in place of the fragment identifier used in this document.  An <tt>http:</tt> or <tt>https:</tt> URI MUST be used for this purpose unless an alternative scheme is known to be supported or recognized by recipients of the PIDF-LO.  Authors of PIDF-LO documents that rely on providing a reference to the CRS need to have some assurance that all potential recipients of the location information are either able to resolve the reference or do not require the local information.
      
</p>
<p>This document describes a means of generating a geodetic location from a locally defined location, providing that the reference point of the local CRS is specified as a geodetic location.  If a civic address is used as a reference point, other information is needed to ensure that the location information is useful outside of the local context.
      
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Generating Local Location Information</h3>

<p>When creating location information for use in a local context, a coordinate reference system definition is required.  Once the CRS is defined, the shapes from <a class='info' href='#OGC.GeoShape'>[OGC.GeoShape]<span> (</span><span class='info'>Thomson, M. and C. Reed, &ldquo;GML 3.1.1 PIDF-LO Shape Application Schema for use by the Internet Engineering Task Force (IETF),&rdquo; April&nbsp;2007.</span><span>)</span></a> can be used with an <tt>srsName</tt> attribute that references the newly defined CRS, rather than WGS84.
</p>
<p>The locally-defined shapes only differ from those in <a class='info' href='#OGC.GeoShape'>[OGC.GeoShape]<span> (</span><span class='info'>Thomson, M. and C. Reed, &ldquo;GML 3.1.1 PIDF-LO Shape Application Schema for use by the Internet Engineering Task Force (IETF),&rdquo; April&nbsp;2007.</span><span>)</span></a> by the CRS identifier used:
        
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;gs:Circle srsName="#indoorCRS"&gt; &lt;!-- Local CRS --&gt;
    &lt;gml:pos&gt;47.5 22&lt;/gml:pos&gt;
    &lt;gs:radius uom="urn:ogc:def:uom:EPSG::9001"&gt;2.4
    &lt;/gs:radius&gt;
  &lt;/gs:Circle&gt;
</pre></div>
<p>A GML <tt>EngineeringCRS</tt> element is used to define a local coordinate reference system.  An engineering CRS is formed of an identifier and name, a coordinate system and a datum.
      
</p>
<p>The <tt>gml:id</tt> attribute of <tt>EngineeringCRS</tt> contains any valid XML name.  The <tt>srsName</tt> includes a <a class='info' href='#RFC3986'>URI fragment<span> (</span><span class='info'>Berners-Lee, T., Fielding, R., and L. Masinter, &ldquo;Uniform Resource Identifier (URI): Generic Syntax,&rdquo; January&nbsp;2005.</span><span>)</span></a> [RFC3986] that refers to this identifier; this value is used in the <tt>srsName</tt> in place of a WGS84 CRS URI.  No <tt>codeSpace</tt> attribute is included.
      
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;gml:EngineeringCRS gml:id="indoorCRS"&gt;
    &lt;gml:srsName&gt;#indoorCRS&lt;/gml:srsName&gt;
</pre></div>
<p>The CRS then needs a reference to the coordinate system defined in <a class='info' href='#cs'>this document<span> (</span><span class='info'>Cartesian Coordinate System</span><span>)</span></a>.  This reference is provided using an <a class='info' href='#W3C.REC-xlink-20010627'>XLink<span> (</span><span class='info'>DeRose, S., Orchard, D., and E. Maler, &ldquo;XML Linking Language (XLink) Version 1.0,&rdquo; June&nbsp;2001.</span><span>)</span></a> [W3C.REC&#8209;xlink&#8209;20010627] attribute:
      
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;gml:usesCS
      xlink:href="urn:ietf:params:xml:schema:geopriv:indoor#cs2d"/&gt;
</pre></div>
<p>An engineering datum is used to define how the coordinate system then relates to the local environment.  This uses the <tt>IndoorDatum</tt> element defined in <a class='info' href='#indoorDatum'>this document<span> (</span><span class='info'>Local or Indoor Datum</span><span>)</span></a>.  This uses similar identification to the CRS definition:
      
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;indoor:IndoorDatum gml:id="officeDatum"
      xmlns:indoor="urn:ietf:params:xml:ns:geopriv:indoor"&gt;
    &lt;gml:datumName&gt;#officeDatum&lt;/gml:datumName&gt;
    ...
  &lt;/indoor:IndoorDatum&gt;
</pre></div>
<p>An indoor datum requires a <a class='info' href='#anchor'>reference point<span> (</span><span class='info'>Anchor Location</span><span>)</span></a> and an <a class='info' href='#orientation'>orientation<span> (</span><span class='info'>Orientation</span><span>)</span></a> angle.  The reference point is described using either a <a class='info' href='#OGC.GeoShape'>geodetic shape<span> (</span><span class='info'>Thomson, M. and C. Reed, &ldquo;GML 3.1.1 PIDF-LO Shape Application Schema for use by the Internet Engineering Task Force (IETF),&rdquo; April&nbsp;2007.</span><span>)</span></a> [OGC.GeoShape], a <a class='info' href='#RFC5139'>civic address<span> (</span><span class='info'>Thomson, M. and J. Winterbottom, &ldquo;Revised Civic Location Format for Presence Information Data Format Location Object (PIDF-LO),&rdquo; February&nbsp;2008.</span><span>)</span></a> [RFC5139], or both elements according to the rules in <a class='info' href='#RFC5491'>RFC 5491<span> (</span><span class='info'>Winterbottom, J., Thomson, M., and H. Tschofenig, &ldquo;GEOPRIV Presence Information Data Format Location Object (PIDF-LO) Usage Clarification, Considerations, and Recommendations,&rdquo; March&nbsp;2009.</span><span>)</span></a> [RFC5491].  A complete example document is included in <a class='info' href='#example'>Section&nbsp;8<span> (</span><span class='info'>Example PIDF-LO</span><span>)</span></a>.
      
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
Local Map Image</h3>

<p>An optional map image can be provided to be used in presenting the local information. If a map image is used as a reference, then pixel coordinates from an image can then be used directly.
        
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;indoor:localMap&gt;
    &lt;indoor:image .../&gt;
    &lt;indoor:referenceLocation .../&gt;
    &lt;indoor:offset .../&gt;
    &lt;indoor:scale .../&gt;
  &lt;/indoor:localMap&gt;
</pre></div>
<p>The manner in which a map image can be related to the local coordinate system is described in <a class='info' href='#localMap'>Section&nbsp;6<span> (</span><span class='info'>Local Map Presentation</span><span>)</span></a>.
        
</p>
<a name="crs"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Local Coordinate Reference System</h3>

<p>A coordinate reference system (CRS) requires the definition of a coordinate system, and a description of how that coordinate system relates to a particular model of physical space.
      
</p>
<p>The coordinate system used in relation to images is defined in this document.  All images use the same coordinate system.  Two coordinate systems are defined, identified by the URNs:
      </p>
<ul class="text">
<li>urn:ietf:params:xml:schema:geopriv:indoor#cs3d
</li>
<li>urn:ietf:params:xml:schema:geopriv:indoor#cs2d
</li>
</ul><p>
      
</p>
<p>The datum that establishes the origin for the coordinate system is defined during construction of the PIDF-LO.  The datum is anchored to a specific location.
      
</p>
<p><a class='info' href='#example'>Section&nbsp;8<span> (</span><span class='info'>Example PIDF-LO</span><span>)</span></a> shows an example definition of an coordinate reference system that include the definition of a location-specific datum that corresponds to a specific anchor point.
      
</p>
<a name="cs"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.1"></a><h3>5.1.&nbsp;
Cartesian Coordinate System</h3>

<p>A custom coordinate reference system (CRS) is defined for use in representing indoor locations.  This allows positions to be expressed in relation to a floor plan or map.
        
</p>
<p><a class='info' href='#schema'>Section&nbsp;10<span> (</span><span class='info'>XML Schema</span><span>)</span></a> includes the definition of two Cartesian coordinate systems.  The two-dimensional Cartesian coordinate system is identified by the URN <tt>urn:ietf:params:xml:schema:geopriv:indoor#cs2d</tt>.  The three-dimensional Cartesian coordinate system is identified by the URN <tt>urn:ietf:params:xml:schema:geopriv:indoor#cs3d</tt>.
        
</p>
<p>The coordinate system described is positively oriented (that is, it is right-handed).  The two-dimensional coordinate system uses x- and y-axes to represent coordinates.  The three-dimensional coordinate system adds a z-axis.
        
</p>
<a name="indoorDatum"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2"></a><h3>5.2.&nbsp;
Local or Indoor Datum</h3>

<p>The image datum establishes a relationship between the coordinate system and a physical space.
        
</p>
<p>An extension of the GML <tt>ImageDatum</tt> type is used to define a datum precisely.  This definition allows for transformation between the local CRS and WGS84.
        
</p>
<p></p>
<blockquote class="text"><dl>
<dt>Note:</dt>
<dd>WGS84 coordinates are specified in the order of latitude, longitude, altitude.  The local coordinate system is specified in order: x, y, z.  With an orientation of zero the x-axis roughly corresponds to longitude, and the y-axis to the inverse of latitude.  Following the process described in <a class='info' href='#transform'>Section&nbsp;7<span> (</span><span class='info'>Coordinate Transformation</span><span>)</span></a> ensures that this "reordering" does not introduce errors.
        
</dd>
</dl></blockquote>

<a name="anchor"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.1"></a><h3>5.2.1.&nbsp;
Anchor Location</h3>

<p>This engineering datum identifies a point in space as the location of the origin.  This can be objectively specified using WGS84 coordinates in a <a class='info' href='#OGC.GeoShape'>geodetic shape<span> (</span><span class='info'>Thomson, M. and C. Reed, &ldquo;GML 3.1.1 PIDF-LO Shape Application Schema for use by the Internet Engineering Task Force (IETF),&rdquo; April&nbsp;2007.</span><span>)</span></a> [OGC.GeoShape]; alternatively, it can be subjectively specified using a <a class='info' href='#RFC5139'>civic address<span> (</span><span class='info'>Thomson, M. and J. Winterbottom, &ldquo;Revised Civic Location Format for Presence Information Data Format Location Object (PIDF-LO),&rdquo; February&nbsp;2008.</span><span>)</span></a> [RFC5139].  Both forms of location data MAY be included.
          
</p>
<p>The form of reference location that is used depends on what purpose the information is intended to serve.  A geodetic reference location provides a basis for unambiguous transformation between locations in the locally-defined CRS and WGS84.  Civic addresses are often more readily usable by people.
          
</p>
<p>The <tt>anchor</tt> element allows for the inclusion of any form of GML geometry.  Geodetic shapes produced by implementations conforming to this specification MUST use one of the forms described in <a class='info' href='#OGC.GeoShape'>[OGC.GeoShape]<span> (</span><span class='info'>Thomson, M. and C. Reed, &ldquo;GML 3.1.1 PIDF-LO Shape Application Schema for use by the Internet Engineering Task Force (IETF),&rdquo; April&nbsp;2007.</span><span>)</span></a>.
          
</p>
<p>A single reference point can derived from the provided location.  The <a class='info' href='#I-D.thomson-geopriv-uncertainty'>centroid of the geodetic shape<span> (</span><span class='info'>Thomson, M. and J. Winterbottom, &ldquo;Representation of Uncertainty and Confidence in PIDF-LO,&rdquo; November&nbsp;2009.</span><span>)</span></a> [I&#8209;D.thomson&#8209;geopriv&#8209;uncertainty] is used if the origin is included with uncertainty.  This point is used to anchor the local datum, as well as establishing the plane of the horizontal.
          
</p>
<p>The means for determining a point from a civic address is not defined.  The <tt>LOC</tt> field of the civic address can be used to provide a textual description of the reference point.
          
</p>
<a name="orientation"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5.2.2"></a><h3>5.2.2.&nbsp;
Orientation</h3>

<p>In many cases, it is convenient to use a rotated coordinate system in the local context.  It is rare that a building is neatly aligned with North.  Within the local context, directions are made in relation to the building, not the cardinal directions.
          
</p>
<p>Maps for use within structures are only rarely produced with geodetic North toward the top of the image.  Building maps are often oriented so that the majority of features do not appear at irregular angles on the map.
          
</p>
<p>The <tt>orientation</tt> element provides a way to use locally useful coordinates.  This element contains a single angular measure that describes how the local coordinate system is oriented in relation to the North and East directions from the reference point (see <a class='info' href='#whatsup'>Appendix&nbsp;A<span> (</span><span class='info'>Calculating WGS84 ECEF Up, North and East Vectors</span><span>)</span></a>).
          
</p>
<p>The positive x-axis corresponds to an Easting vector at the anchor point, rotated in a clockwise direction (that is, Northing to Easting) about the vertical by the orientation angle.  Similarly, the y-axis corresponds to a rotated Northing vector.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
        ^ North
        |
        |        _
        +--._    /\ y-axis
        |    `. /   (north+o)
        |      /
        |     /
        |    /
        |   /
        |  /
        | /
        |/                    East
        o-------------+---------&gt;
         `-._         |
             `-._     ; orientation
                 `-._/
                     `-._
                         `_|  x-axis
    [ Up == z-axis ]         (east+o)
</pre></div>
<p>The z-axis in the three-dimensional coordinate system is oriented directly upwards from the plane tangential to the WGS84 ellipsoid at the anchor point.  This is unaffected by the orientation angle.
          
</p>
<a name="localMap"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
Local Map Presentation</h3>

<p>A map image can be referred to using the <tt>localMap</tt> element.  This allows for the locally defined location to be presented with additional context.
      
</p>
<p>Image information is placed in the <tt>location-info</tt> element after the shape information and CRS.
      
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.1"></a><h3>6.1.&nbsp;
Image Coordinates</h3>

<p>A position on an image generally uses a coordinate system with an origin in the upper left.  For a two-dimensional image, a columns-axis increases to the right and a rows-axis increases towards the bottom of the image.
        
</p>
<p>This left-handed coordinate system - inherited from the path that the beam in a Cathode-ray tube follows - does not directly map to the axes used in the local, Cartesian coordinate system.  The rows-axis is in the opposite direction to the y-axis.
        
</p><br /><hr class="insert" />
<a name="imageaxes"></a>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
                   (local coordinates)
               ^
               |
             y-axis
               |
               |
                   ---- x-axis ----&gt;
            O------------------------------+
            |    ---- columns-axis ----&gt;   |
            |  |                           |
            |  |                           |
            | rows-axis                    |
            |  |                           |
            |  v                           |
            |      (image coordinates)     |
            +------------------------------+
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Figure&nbsp;2: Image Axes&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<p>If a left-handed coordinate system is used in an image, the <a class='info' href='#scale'>scale<span> (</span><span class='info'>Scaling</span><span>)</span></a> element can be used to convert negative y-axis values into positive rows-axis values.  A negative value for the rows/y value (the second value) can be used for this purpose.
        
</p>
<p>Some image types specifically defined how coordinates are interpreted for the image.  However, if this is not specified or unknown for the image type and it is necessary to place a point with sub-pixel precision, whole integer values in image coordinates are found at the low-valued corner of the referenced pixel.  This is usually the top left corner of the pixel where row/column coordinates are used.
        
</p><br /><hr class="insert" />

<p>For instance, the pixel at [5,13] in the following covers the column range 5.0 to 6.0 and the row range from 13 to 14.
          
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
        4        5        6        7
        |        |        |        |
   12 --+--------+--------+--------+-
        |        |        |        |
        |        |        |        |
        |        |        |        |
   13 --+--------+--------+--------+-
        |        |        |        |
        |        | [5,13] |        |
        |        |        |        |
   14 --+--------+--------+--------+-
        |        |        |        |
        |        |        |        |
        |        |        |        |
   15 --+--------+--------+--------+-
        |        |        |        |
</pre></div><table border="0" cellpadding="0" cellspacing="2" align="center"><tr><td align="center"><font face="monaco, MS Sans Serif" size="1"><b>&nbsp;Whole Integer Image Coordinates&nbsp;</b></font><br /></td></tr></table><hr class="insert" />

<a name="image"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.2"></a><h3>6.2.&nbsp;
Map Image</h3>

<p>The optional <tt>image</tt> element includes an image, usually a map of the locality.  This image might be used to display the associated location information to a user.
        
</p>
<p>Rather than include an image inline, this uses <a class='info' href='#W3C.REC-xlink-20010627'>XLink<span> (</span><span class='info'>DeRose, S., Orchard, D., and E. Maler, &ldquo;XML Linking Language (XLink) Version 1.0,&rdquo; June&nbsp;2001.</span><span>)</span></a> [W3C.REC&#8209;xlink&#8209;20010627] to reference an image document.  The <tt>xlink:href</tt> attribute contains a URL for the image.  An <tt>http:</tt> or <tt>https:</tt> URI MUST be used unless the location generator is able to ensure that authorized recipients of this data are able to use other URI schemes.
        
</p>
<a name="referenceLocation"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.3"></a><h3>6.3.&nbsp;
Reference Location</h3>

<p>The <tt>referenceLocation</tt> element describes the reference location used to place (and orient) the image in space.  This can be specified in the same way that the <a class='info' href='#anchor'>anchor location<span> (</span><span class='info'>Anchor Location</span><span>)</span></a> for the datum is specified using a geodetic shape or civic address.
        
</p>
<p>If a local CRS is defined in the same document, the reference point SHOULD refer the origin of the coordinate reference system, using the <tt>crsOrigin</tt> element.  This references the anchor point used in the CRS definition, saving unnecessary duplication of this information.
        
</p>
<p>The rows-axis of the image is either along the negative y-axis of a Cartesian CRS or Southing from the reference point.  The columns-axis of the image is along the positive y-axis or Easting from the reference point.  Any vertical axis is oriented along the z-axis or directly up from the reference point.  See <a class='info' href='#whatsup'>Appendix&nbsp;A<span> (</span><span class='info'>Calculating WGS84 ECEF Up, North and East Vectors</span><span>)</span></a> for details on how to determine North, East and Up vectors from an arbitrary point.
        
</p>
<a name="offset"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.4"></a><h3>6.4.&nbsp;
Pixel Offset</h3>

<p>The anchor point is matched to a point on the image, thus establishing a common point in both coordinate reference systems.  The <tt>offset</tt> element includes the coordinates of the reference point in the image.
        
</p>
<a name="scale"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.5"></a><h3>6.5.&nbsp;
Scaling</h3>

<p>The <tt>scale</tt> element includes a value in pixels per meter that describes how coordinates in the local datum, specified in meters, are translated to coordinates on the image at the reference point.
        
</p>
<p>A scaling factor is provided for each axis in the coordinate system.  For a two-dimensional coordinate system, two values are included to allow for different scaling along the x/columns- and y/rows-axes independently.  For a three-dimensional coordinate system, three values are specified for the x/columns-, y/rows- and z/vertical-axes.
        
</p>
<p>Alternatively, a single scaling value MAY be used to apply the same scaling factor to all coordinate components (x/columns- and y/rows-axes, and optionally the z/vertical-axis).
        
</p>
<p>A negative value for the y/rows-axis scaling value can be used to account for the change in direction between the y-axis and the rows axis, as shown in <a class='info' href='#imageaxes'>Figure&nbsp;2<span> (</span><span class='info'>Image Axes</span><span>)</span></a>.
        
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6.5.1"></a><h3>6.5.1.&nbsp;
Map Projections</h3>

<p>The method used to orient and scale a map image is limited in applicability.  This method does not account for distortion produced by the curvature of the Earth.  That is, it does not allow for the additional complexity that would be necessary to accomodate different map projection methods.  The coordinate space used is strictly Cartesian.
          
</p>
<p>The Cartesian coordinate system suits maps with a orthographic projection centered at the reference point.  It also suits architectural drawings and diagrams that also do not account for the curvature of the Earth.
          
</p>
<p>This does not necessarily prevent the use of alternative map projections.  For other map projections, the scaling factor changes as the distance from the reference point increases.
          
</p>
<p>Over small distances, an orthographic projection might be assumed.  Any errors introduced by this simplication might be acceptable for an application.  This simplication is only appropriate for maps that cover small distances or where any errors resulting from use of different map projections are acceptable.
          
</p>
<a name="transform"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Coordinate Transformation</h3>

<p>It is often important that location information be provided that can be used in a global context, as well as the local context.  This section describes how shapes can be transformed between the WGS84 CRS and the local CRS.
      
</p>
<p>A single point is selected in the image coordinate reference system.  This might be the origin of the image (0, 0), or any other point.  The corresponding point in WGS84 (latitude, longitude, altitude) is also identified.
      
</p>
<p>Selecting a point in each coordinate system establishes a reference point: an origin point.  When converting, all coordinates are expressed relative to the corresponding point in the same coordinate system.
      
</p>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1"></a><h3>7.1.&nbsp;
Conversion from WGS84 to Local CRS</h3>

<p>To convert coordinates specified in WGS84 to coordinates specified in the local CRS use the following algorithm:

        </p>
<ol class="text">
<li>If the coordinates do not include altitude, add an altitude of zero.  This will be removed from the final result, but an altitude value is required for this algorithm.
          
</li>
<li>Convert the WGS84 (latitude, longitude, altitude) coordinates to WGS84 ECEF (X, Y, Z) values.  One commonly used algorithm for this is documented in <a class='info' href='#I-D.thomson-geopriv-uncertainty'>[I&#8209;D.thomson&#8209;geopriv&#8209;uncertainty]<span> (</span><span class='info'>Thomson, M. and J. Winterbottom, &ldquo;Representation of Uncertainty and Confidence in PIDF-LO,&rdquo; November&nbsp;2009.</span><span>)</span></a>.
          
</li>
<li>If necessary, find the centroid of the reference location, specified in the <tt>anchor</tt> element, in WGS84 ECEF (X, Y, Z) coordinates.  Algorithms for this are documented in <a class='info' href='#I-D.thomson-geopriv-uncertainty'>[I&#8209;D.thomson&#8209;geopriv&#8209;uncertainty]<span> (</span><span class='info'>Thomson, M. and J. Winterbottom, &ldquo;Representation of Uncertainty and Confidence in PIDF-LO,&rdquo; November&nbsp;2009.</span><span>)</span></a>.
          
</li>
<li>Subtract the ECEF reference location from the ECEF coordinates to get a relative position vector for the coordinates.
          
</li>
<li>Multiply the resulting relative position by the forward transformation matrix described in <a class='info' href='#matrix'>Section&nbsp;7.3<span> (</span><span class='info'>Transformation Matrix</span><span>)</span></a>.  This gives distances in meters for each of the axes of the local coordinate system.
          
</li>
<li>If altitude was not originally provided, remove any vertical or z-axis component.
          
</li>
<li>If the reference location contains uncertainty, add this uncertainty to any uncertainty in the original location, see <a class='info' href='#extraunc'>Section&nbsp;7.4<span> (</span><span class='info'>Managing Uncertainty</span><span>)</span></a>.
          
</li>
</ol><p>
        
</p>
<p>The results can be summarized as:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   C[local] = R * T[0] * (C[ecef] - R[ecef])
</pre></div>
<p>Where all coordinates are expressed as column vectors and <tt>*</tt> is the matrix product.
</p>
<p>The WGS84 reference point also establishes a reference plane for the image.  The reference plane is the plane of the horizontal at that point - the plane tangential to the WGS84 ellipsoid at the reference point.  This plane, along with the orientation angle, are used to create a transformation matrix.
        
</p>
<p>Coordinates can then be plotted on the map image by applying the following process:
        </p>
<ol class="text">
<li>Multiply each component of the vector by the scaling factor, specified in the <tt>scale</tt> element, to obtain values in pixels.
          
</li>
<li>Add the resulting value to the image offset, specified in the <tt>offset</tt> element, to obtain the coordinates in the image.
          
</li>
</ol><p>
        If the image uses a different reference point to the origin of the local CRS, then the coordinates must first be transformed into coordinates in a local CRS that is centered about that reference point.
        
</p>
<p>The results can be summarized as:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   C[image] = offset + scale .* C[local]
</pre></div>
<p>Where <tt>.*</tt> is the Hadamard or entrywise product.
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2"></a><h3>7.2.&nbsp;
Conversion from Local CRS to WGS</h3>

<p>To convert coordinates specified in the local CRS to coordinates specified in WGS84 use the following algorithm:

        </p>
<ol class="text">
<li>If the coordinates do not include a vertical or z-axis component, set this value to zero.
          
</li>
<li>Multiply the resulting relative position by the reverse transformation matrix described in <a class='info' href='#matrix'>Section&nbsp;7.3<span> (</span><span class='info'>Transformation Matrix</span><span>)</span></a> to get a vector relative to the reference location.
          
</li>
<li>If necessary, find the centroid of the reference location, <tt>origin</tt>, in WGS84 ECEF (X, Y, Z) coordinates.
          
</li>
<li>Add the ECEF reference location to the ECEF coordinates.
          
</li>
<li>Convert the WGS84 ECEF (X, Y, Z) coordinates to WGS84 (latitude, longitude, altitude) values.
          
</li>
<li>If vertical or z-axis values were not provided, remove the altitude value.
          
</li>
<li>If the reference location contains uncertainty, add this uncertainty to any uncertainty in the original location.
          
</li>
</ol><p>
        
</p>
<p>The results can be summarized as:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   C[ecef] = transpose(R * T[0]) * (C[local]) + R[ecef]
</pre></div>
<p>Where <tt>transpose(...)</tt> signifies the matrix transpose.
</p>
<p>If image coordinates are known, the local coordinates can be found by first following these steps:
        </p>
<ol class="text">
<li>Subtract the image offset from the coordinate values.
          
</li>
<li>Divide each component of the vector by the scaling factor.
          
</li>
</ol><p>
        
</p>
<p>The results can be summarized as:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   C[local] = (1/scale) .* (C[image] - offset)
</pre></div>
<p>Where <tt>1/scale</tt> is 1 divided by the scaling factor.
</p>
<a name="matrix"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.3"></a><h3>7.3.&nbsp;
Transformation Matrix</h3>

<p>The transformation matrix used to convert coordinates between WGS84 and the local CRS uses the centroid of the origin location, contained in the <tt>origin</tt> element.
        
</p>
<p>The transformation matrix is formed from the North, East and Up vectors from the origin location.  <a class='info' href='#whatsup'>Appendix&nbsp;A<span> (</span><span class='info'>Calculating WGS84 ECEF Up, North and East Vectors</span><span>)</span></a> describes how to determine these vectors in WGS84 ECEF coordinates:
        
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   East  = [ -sinlng          ; coslng           ; 0      ]
   North = [ -sinlat * coslng ; -sinlat * sinlng ; coslat ]
   Up    = [ coslat * coslng  ; coslat * sinlng  ; sinlat ]
</pre></div>
<p>This is used directly to form the following transformation matrix for the case where the orientation is zero:
        
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
          [ -sinlng          ; coslng           ; 0      ]
   T[0] = [ -sinlat * coslng ; -sinlat * sinlng ; coslat ]
          [ coslat * coslng  ; coslat * sinlng  ; sinlat ]
</pre></div>
<p>The orientation of the map, included in the <tt>orientation</tt> element, affects the x-axis and y-axis parts of this matrix.  The rotation matrix is a counter-clockwise rotation matrix, as follows:
        
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
       [ cos(orientation) ; -sin(orientation) ; 0 ]
   R = [ sin(orientation) ; cos(orientation)  ; 0 ]
       [ 0                ; 0                 ; 1 ]
</pre></div>
<p>Both <tt>R</tt> and <tt>T[0]</tt> perform rotations.  The final transformation matrix is then the product of the rotation matrix and the coordinate transformation matrix.  This gives the following orthonormal coordinate transformation matrix.
        
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   T = R * T[0]
</pre></div>
<p>When transforming from local coordinates to WGS84, the transformation matrix is transposed to find its inverse.
        
</p>
<a name="extraunc"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.4"></a><h3>7.4.&nbsp;
Managing Uncertainty</h3>

<p>The WGS84 origin location MAY include uncertainty if that location is not sufficiently accurate.  In this case, the centroid of the uncertainty region is used as the origin point.  The uncertainty in this location increases any uncertainty when performing a transformation.
        
</p>
<p>An increase to uncertainty is applied when transforming both to and from WGS84.  Repeated transformations can increase uncertainty indefinitely.
        
</p>
<p>Converting the origin location and the target shape to a Circle or Sphere prior to transformation simplifies the management of uncertainty.  The resulting uncertainty radius is the sum of the radius from the original shape, plus the radius from the origin location.
        
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.5"></a><h3>7.5.&nbsp;
Angles of Orientation</h3>

<p>Translation of Ellipse, Ellipsoid and ArcBand shapes requires that the included angle measures are rotated.  When translating from the local coordinate reference system, the orientation of the image datum is added to the angle.  The orientation of the image datum is subtracted when translating from WGS84 coordinates.
        
</p>
<a name="example"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Example PIDF-LO</h3>

<p>The following example PIDF-LO document contains geodetic location in the first tuple, followed by a similar location in the local CRS.  A map image is also included.  All other optional elements are omitted from this example.
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
  &lt;presence
      xmlns="urn:ietf:params:xml:ns:pidf"
      xmlns:gml="http://www.opengis.net/gml"
      xmlns:gs="http://www.opengis.net/pidflo/1.0"
      xmlns:gp="urn:ietf:params:xml:ns:pidf:geopriv10"
      xmlns:ca="urn:ietf:params:xml:ns:pidf:geopriv10:civicAddr"
      xmlns:indoor="urn:ietf:params:xml:ns:geopriv:indoor"
      xmlns:xlink="http://www.w3.org/1999/xlink"
      entity="pres:ae3be8585902e2253ce2@lis.example"&gt;

    &lt;tuple id="geodeticLocation"&gt;
      &lt;status&gt;
        &lt;gp:geopriv&gt;
          &lt;gp:location-info&gt;
            &lt;gs:Circle srsName="urn:ogc:def:crs:EPSG::4326"&gt;
              &lt;gml:pos&gt;-34.407124 150.882673&lt;/gml:pos&gt;
              &lt;gs:radius uom="urn:ogc:def:uom:EPSG::9001"&gt;10
              &lt;/gs:radius&gt;
            &lt;/gs:Circle&gt;
          &lt;/gp:location-info&gt;
          &lt;gp:usage-rules/&gt;
        &lt;/gp:geopriv&gt;
      &lt;/status&gt;
    &lt;/tuple&gt;

    &lt;tuple id="indoorLocation"&gt;
      &lt;status&gt;
        &lt;gp:geopriv&gt;
          &lt;gp:location-info&gt;
            &lt;gs:Circle srsName="#officeCRS"&gt;
              &lt;gml:pos&gt;47.5 22&lt;/gml:pos&gt;
              &lt;gs:radius uom="urn:ogc:def:uom:EPSG::9001"&gt;2.4
              &lt;/gs:radius&gt;
            &lt;/gs:Circle&gt;

            &lt;gml:EngineeringCRS gml:id="officeCRS"&gt;
              &lt;gml:srsName&gt;#officeCRS&lt;/gml:srsName&gt;
              &lt;gml:usesCS
  xlink:href="urn:ietf:params:xml:schema:geopriv:indoor#cs2d"/&gt;
              &lt;gml:usesEngineeringDatum&gt;
                &lt;indoor:IndoorDatum gml:id="officeDatum"&gt;
                  &lt;gml:datumName&gt;#officeDatum&lt;/gml:datumName&gt;
                  &lt;indoor:anchor&gt;
                    &lt;gs:Circle srsName="urn:ogc:def:crs:EPSG::4326"&gt;
                      &lt;gml:pos&gt;-34.407168 150.882533&lt;/gml:pos&gt;
                      &lt;gs:radius uom="urn:ogc:def:uom:EPSG::9001"&gt;5
                      &lt;/gs:radius&gt;
                    &lt;/gs:Circle&gt;
                    &lt;ca:civicAddress xml:lang="en"&gt;
                      &lt;ca:country&gt;AU&lt;/ca:country&gt;
                      &lt;ca:A1&gt;NSW&lt;/ca:A1&gt;
                      &lt;ca:A3&gt;Wollongong&lt;/ca:A3&gt;
                      &lt;ca:A4&gt;Gwynneville&lt;/ca:A4&gt;
                      &lt;ca:RD&gt;Northfields&lt;/ca:RD&gt;
                      &lt;ca:STS&gt;Avenue&lt;/ca:STS&gt;
                      &lt;ca:LMK&gt;University of Wollongong&lt;/ca:LMK&gt;
                      &lt;ca:LOC&gt;Director's Office&lt;/ca:LOC&gt;
                      &lt;ca:FLR&gt;2&lt;/ca:FLR&gt;
                      &lt;ca:NAM&gt;Andrew Corporation&lt;/ca:NAM&gt;
                      &lt;ca:PC&gt;2500&lt;/ca:PC&gt;
                      &lt;ca:BLD&gt;39&lt;/ca:BLD&gt;
                      &lt;ca:PLC&gt;office&lt;/ca:PLC&gt;
                    &lt;/ca:civicAddress&gt;
                  &lt;/indoor:anchor&gt;
                  &lt;indoor:orientation
                      uom="urn:ogc:def:uom:EPSG::9102"&gt;8.4
                  &lt;/indoor:orientation&gt;
                &lt;/indoor:IndoorDatum&gt;
              &lt;/gml:usesEngineeringDatum&gt;
            &lt;/gml:EngineeringCRS&gt;

            &lt;indoor:localMap&gt;
              &lt;indoor:image xlink:href="http://example.com/map.png"/&gt;
              &lt;indoor:referenceLocation&gt;
                &lt;indoor:crsOrigin xlink:href="#officeCRS"/&gt;
              &lt;/indoor:referenceLocation&gt;
              &lt;indoor:offset
  uom="urn:ietf:params:xml:schema:geopriv:indoor#px"&gt;374 184
              &lt;/indoor:offset&gt;
              &lt;indoor:scale
  uom="urn:ietf:params:xml:schema:geopriv:indoor#pxpm"&gt;20
              &lt;/indoor:scale&gt;
            &lt;/indoor:localMap&gt;
          &lt;/gp:location-info&gt;

          &lt;gp:usage-rules/&gt;
        &lt;/gp:geopriv&gt;
      &lt;/status&gt;
    &lt;/tuple&gt;
  &lt;/presence&gt;
</pre></div>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
GML Definitions</h3>

<p>Formal GML definitions for a coordinate reference system are provided in the PIDF-LO.  However, these definitions rely on the definitions in this document, plus the formal GML definitions included in <a class='info' href='#schema'>the schema<span> (</span><span class='info'>XML Schema</span><span>)</span></a>.
      
</p>
<p>This section provides references to definitions of the various code points used in the formal definitions.
      
</p>
<a name="uom"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.1"></a><h3>9.1.&nbsp;
Units of Measure</h3>

<p>This document uses the same restricted set of units of measure as defined in <a class='info' href='#RFC5491'>[RFC5491]<span> (</span><span class='info'>Winterbottom, J., Thomson, M., and H. Tschofenig, &ldquo;GEOPRIV Presence Information Data Format Location Object (PIDF-LO) Usage Clarification, Considerations, and Recommendations,&rdquo; March&nbsp;2009.</span><span>)</span></a>, with additions for the local CRS.
        
</p>
<p>The units for meters (urn:ogc:def:uom:EPSG::9001), degrees (urn:ogc:def:uom:EPSG::9102) and radians (urn:ogc:def:uom:EPSG::9101) are used where applicable.  Meters are used for all distance measures.  Degrees or radians are used for all angular measures.
        
</p>
<p>A pixel is defined as a subjective length measure.  In this definition, a pixel does cannot be used directly with other forms of length measure.  The pixel measure is context-dependent and can be related to other length measures by different factors.  The <a class='info' href='#scale'>scaling<span> (</span><span class='info'>Scaling</span><span>)</span></a> parameters establish how pixels relate to other measures for a particular image.
        
</p>
<p>Additional units of measure are defined for pixels (urn:ietf:params:xml:schema:geopriv:indoor#px) and pixels per meter (urn:ietf:params:xml:schema:geopriv:indoor#pxpm).  Formal definitions of these units are included in an annotation to the XML schema.  Pixel coordinates are used to describe a position in an image.  Pixels per meter are used to establish a scale for conversion between meters and pixels.
        
</p>
<a name="codeSpace"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9.2"></a><h3>9.2.&nbsp;
Code Space Definitions</h3>

<p>The GML definitions for the local coordinate system rely on identifiers that are defined in the <tt>http://ietf.org/rfc/rfcXXXX.txt</tt> (the URL of this document [[EDITOR NOTE: Please update this link at publication]]).  These identifiers are defined thus:
        </p>
<blockquote class="text"><dl>
<dt>x</dt>
<dd>The x-axis of the local coordinate system.
          
</dd>
<dt>y</dt>
<dd>The y-axis of the local coordinate system.
          
</dd>
<dt>z</dt>
<dd>The z-axis of the three-dimensional local coordinate system.
          
</dd>
<dt>east+o</dt>
<dd>East from the reference point, rotated clockwise (about the Up vector) by the orientation angle, see <a class='info' href='#whatsup'>Appendix&nbsp;A<span> (</span><span class='info'>Calculating WGS84 ECEF Up, North and East Vectors</span><span>)</span></a> and <a class='info' href='#matrix'>Section&nbsp;7.3<span> (</span><span class='info'>Transformation Matrix</span><span>)</span></a>.
          
</dd>
<dt>north+o</dt>
<dd>North from the reference point, rotated clockwise (about the Up vector) by the orientation angle, see <a class='info' href='#whatsup'>Appendix&nbsp;A<span> (</span><span class='info'>Calculating WGS84 ECEF Up, North and East Vectors</span><span>)</span></a> and <a class='info' href='#matrix'>Section&nbsp;7.3<span> (</span><span class='info'>Transformation Matrix</span><span>)</span></a>.
          
</dd>
<dt>up</dt>
<dd>Up from the reference point, see <a class='info' href='#whatsup'>Appendix&nbsp;A<span> (</span><span class='info'>Calculating WGS84 ECEF Up, North and East Vectors</span><span>)</span></a> and <a class='info' href='#matrix'>Section&nbsp;7.3<span> (</span><span class='info'>Transformation Matrix</span><span>)</span></a>.
          
</dd>
<dt>pixel</dt>
<dd>The name for the pixels unit of measure, see <a class='info' href='#uom'>Section&nbsp;9.1<span> (</span><span class='info'>Units of Measure</span><span>)</span></a>.
          
</dd>
<dt>px</dt>
<dd>The abbreviated name for the pixels unit of measure.
          
</dd>
<dt>pixels per metre</dt>
<dd>The English name for the pixels per meter unit of measure, using the standard spelling, see <a class='info' href='#uom'>Section&nbsp;9.1<span> (</span><span class='info'>Units of Measure</span><span>)</span></a>.
          
</dd>
<dt>pxpm</dt>
<dd>The abbreviated name for the pixels per meter unit of measure.
          
</dd>
</dl></blockquote><p>
        
</p>
<p>Documents created to represent local locations use a document-local code space, signified by the absence of the <tt>codeSpace</tt> attribute.
        
</p>
<a name="schema"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
XML Schema</h3>

<p>The XML schema for the indoor location elements also includes a definition of the 2-dimensional and 3-dimensional local coordinate systems and units of measure used in definitions of coordinate reference systems.
      </p>
<blockquote class="text">
<p>To identify the elements that are defined in this schema, a URI is used.  This document is not identified by a URL, instead it uses the URN that is registered for identification of the schema <tt>urn:ietf:params:xml:schema:geopriv:indoor</tt>.
</p>
</blockquote><p>
      
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;?xml version="1.0"?&gt;
&lt;xs:schema
    xmlns:in="urn:ietf:params:xml:ns:geopriv:indoor"
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:gml="http://www.opengis.net/gml"
    xmlns:xlink="http://www.w3.org/1999/xlink"
    xmlns:ca="urn:ietf:params:xml:ns:pidf:geopriv10:civicAddr"
    targetNamespace="urn:ietf:params:xml:ns:geopriv:indoor"
    elementFormDefault="qualified"
    attributeFormDefault="unqualified"&gt;

  &lt;!-- [[NOTE TO RFC-EDITOR: Please replace all instances of the URL
       'http://ietf.org/rfc/rfcXXXX.txt' with the URL of published
       document and remove this note.]] --&gt;

  &lt;xs:annotation&gt;
    &lt;xs:appinfo
        source="urn:ietf:params:xml:schema:geopriv:indoor"&gt;
      Indoor Location for PIDF-LO

      &lt;!-- These definitions use the code-space definition
           'http://ietf.org/rfc/rfcXXXX.txt' --&gt;
      &lt;gml:Dictionary gml:id="defs"&gt;
        &lt;gml:description&gt;
          A dictionary including a Cartesian Coordinate System and
          units of measure for a system of indoor location.
        &lt;/gml:description&gt;
        &lt;gml:name&gt;Indoor Location&lt;/gml:name&gt;

        &lt;!-- urn:ietf:params:xml:schema:geopriv:indoor#cs3d --&gt;
        &lt;gml:dictionaryEntry&gt;
          &lt;gml:CartesianCS gml:id="cs3d"&gt;
            &lt;gml:csName&gt;3-D Cartesian CS&lt;/gml:csName&gt;
            &lt;gml:usesAxis&gt;
              &lt;gml:CoordinateSystemAxis
                  gml:id="x3d" gml:uom="urn:ogc:def:uom:EPSG::9001"&gt;
                &lt;gml:name&gt;X-Axis&lt;/gml:name&gt;
                &lt;gml:axisAbbrev
                    codeSpace="http://ietf.org/rfc/rfcXXXX.txt"
                    &gt;x&lt;/gml:axisAbbrev&gt;
                &lt;gml:axisDirection
                    codeSpace="http://ietf.org/rfc/rfcXXXX.txt"
                    &gt;east+o&lt;/gml:axisDirection&gt;
              &lt;/gml:CoordinateSystemAxis&gt;
            &lt;/gml:usesAxis&gt;
            &lt;gml:usesAxis&gt;
              &lt;gml:CoordinateSystemAxis
                  gml:id="y3d" gml:uom="urn:ogc:def:uom:EPSG::9001"&gt;
                &lt;gml:name&gt;Y-Axis&lt;/gml:name&gt;
                &lt;gml:axisAbbrev
                    codeSpace="http://ietf.org/rfc/rfcXXXX.txt"
                    &gt;y&lt;/gml:axisAbbrev&gt;
                &lt;gml:axisDirection
                    codeSpace="http://ietf.org/rfc/rfcXXXX.txt"
                    &gt;north+o&lt;/gml:axisDirection&gt;
              &lt;/gml:CoordinateSystemAxis&gt;
            &lt;/gml:usesAxis&gt;
            &lt;gml:usesAxis&gt;
              &lt;gml:CoordinateSystemAxis
                  gml:id="z3d" gml:uom="urn:ogc:def:uom:EPSG::9001"&gt;
                &lt;gml:name&gt;Z-Axis&lt;/gml:name&gt;
                &lt;gml:axisAbbrev
                    codeSpace="http://ietf.org/rfc/rfcXXXX.txt"
                    &gt;z&lt;/gml:axisAbbrev&gt;
                &lt;gml:axisDirection
                    codeSpace="http://ietf.org/rfc/rfcXXXX.txt"
                    &gt;up&lt;/gml:axisDirection&gt;
              &lt;/gml:CoordinateSystemAxis&gt;
            &lt;/gml:usesAxis&gt;
          &lt;/gml:CartesianCS&gt;
        &lt;/gml:dictionaryEntry&gt;

        &lt;!-- urn:ietf:params:xml:schema:geopriv:indoor#cs2d --&gt;
        &lt;gml:dictionaryEntry&gt;
          &lt;gml:CartesianCS gml:id="cs2d"&gt;
            &lt;gml:csName&gt;2-D Cartesian CS&lt;/gml:csName&gt;
            &lt;gml:usesAxis xlink:href="#x3d"/&gt;
            &lt;gml:usesAxis xlink:href="#y3d"/&gt;
          &lt;/gml:CartesianCS&gt;
        &lt;/gml:dictionaryEntry&gt;

        &lt;!-- urn:ietf:params:xml:schema:geopriv:indoor#px --&gt;
        &lt;gml:dictionaryEntry&gt;
          &lt;gml:BaseUnit gml:id="px"&gt;
            &lt;gml:description&gt;
              The pixel is the basic unit of measure used in images.
            &lt;/gml:description&gt;
            &lt;gml:name codeSpace="http://ietf.org/rfc/rfcXXXX.txt"
                      &gt;pixel&lt;/gml:name&gt;
            &lt;gml:quantityType&gt;image units&lt;/gml:quantityType&gt;
            &lt;gml:catalogSymbol
                codeSpace="http://ietf.org/rfc/rfcXXXX.txt"
                &gt;px&lt;/gml:catalogSymbol&gt;
            &lt;gml:unitsSystem
                xlink:href="http://ietf.org/rfc/rfcXXXX.txt"/&gt;
          &lt;/gml:BaseUnit&gt;
        &lt;/gml:dictionaryEntry&gt;

        &lt;!-- urn:ietf:params:xml:schema:geopriv:indoor#pxpm --&gt;
        &lt;gml:dictionaryEntry&gt;
          &lt;gml:DerivedUnit gml:id="pxpm"&gt;
            &lt;gml:description&gt;
              A mapping of pixels to a length in metres.
            &lt;/gml:description&gt;
            &lt;gml:name codeSpace="http://ietf.org/rfc/rfcXXXX.txt"
                      &gt;pixels per metre&lt;/gml:name&gt;
            &lt;gml:name codeSpace="http://ietf.org/rfc/rfcXXXX.txt"
                      xml:lang="en-US"&gt;pixels per meter&lt;/gml:name&gt;
            &lt;gml:quantityType&gt;
              mapping of local length to physical length
            &lt;/gml:quantityType&gt;
            &lt;gml:catalogSymbol
                codeSpace="http://ietf.org/rfc/rfcXXXX.txt"
                &gt;pxpm&lt;/gml:catalogSymbol&gt;
            &lt;gml:derivationUnitTerm uom="#px" exponent="1"/&gt;
            &lt;gml:derivationUnitTerm uom="urn:ogc:def:uom:EPSG::9001"
                                    exponent="-1"/&gt;
          &lt;/gml:DerivedUnit&gt;
        &lt;/gml:dictionaryEntry&gt;
      &lt;/gml:Dictionary&gt;
    &lt;/xs:appinfo&gt;

    &lt;xs:documentation source="http://ietf.org/rfc/rfcXXXX.txt"&gt;
      This schema defines a location representation that allows for
      the trivial creation of a locally-defined coordinate reference
      system; specifically one that is based on a local map image.
    &lt;/xs:documentation&gt;

  &lt;/xs:annotation&gt;

  &lt;xs:import namespace="http://www.opengis.net/gml"/&gt;
  &lt;xs:import namespace="http://www.w3.org/1999/xlink"/&gt;
  &lt;xs:import
      namespace="urn:ietf:params:xml:ns:pidf:geopriv10:civicAddr"/&gt;

  &lt;xs:element name="IndoorDatum" type="in:IndoorDatumType"
              substitutionGroup="gml:EngineeringDatum"/&gt;

  &lt;xs:complexType name="IndoorDatumType"&gt;
    &lt;xs:complexContent&gt;
      &lt;xs:extension base="gml:EngineeringDatumType"&gt;
        &lt;xs:sequence&gt;
          &lt;xs:element name="anchor"
                      type="in:locationType"/&gt;
          &lt;xs:element name="orientation"
                      type="gml:AngleType"/&gt;
          &lt;xs:any namespace="##other" processContents="lax"
                  minOccurs="0" maxOccurs="unbounded"/&gt;
        &lt;/xs:sequence&gt;
        &lt;xs:anyAttribute namespace="##other" processContents="lax"/&gt;
      &lt;/xs:extension&gt;
    &lt;/xs:complexContent&gt;
  &lt;/xs:complexType&gt;

  &lt;!-- geodetic location, civic address, or both --&gt;
  &lt;xs:group name="locationGroup"&gt;
    &lt;xs:choice&gt;
      &lt;xs:sequence&gt;
        &lt;xs:element ref="gml:_Geometry"/&gt;
        &lt;xs:element ref="ca:civicAddress" minOccurs="0"/&gt;
      &lt;/xs:sequence&gt;
      &lt;xs:element ref="ca:civicAddress"/&gt;
    &lt;/xs:choice&gt;
  &lt;/xs:group&gt;

  &lt;xs:complexType name="locationType"&gt;
    &lt;xs:complexContent&gt;
      &lt;xs:restriction base="xs:anyType"&gt;
        &lt;xs:group ref="in:locationGroup"/&gt;
      &lt;/xs:restriction&gt;
    &lt;/xs:complexContent&gt;
  &lt;/xs:complexType&gt;

  &lt;xs:element name="localMap" type="in:localMapType"/&gt;

  &lt;xs:complexType name="localMapType"&gt;
    &lt;xs:complexContent&gt;
      &lt;xs:restriction base="xs:anyType"&gt;
        &lt;xs:sequence&gt;
          &lt;xs:element name="image" type="in:imageType"/&gt;
          &lt;xs:element name="referenceLocation"
                      type="in:referenceLocationType"/&gt;
          &lt;xs:element name="offset"
                      type="gml:MeasureListType" minOccurs="0"/&gt;
          &lt;xs:element name="scale" type="gml:MeasureListType"/&gt;
        &lt;/xs:sequence&gt;
      &lt;/xs:restriction&gt;
    &lt;/xs:complexContent&gt;
  &lt;/xs:complexType&gt;

  &lt;xs:complexType name="imageType"&gt;
    &lt;xs:complexContent&gt;
      &lt;xs:restriction base="xs:anyType"&gt;
        &lt;xs:sequence&gt;
          &lt;xs:any namespace="##other" processContents="lax"
                  minOccurs="0" maxOccurs="unbounded"/&gt;
        &lt;/xs:sequence&gt;
        &lt;xs:attributeGroup ref="xlink:simpleLink"/&gt;
      &lt;/xs:restriction&gt;
    &lt;/xs:complexContent&gt;
  &lt;/xs:complexType&gt;

  &lt;xs:complexType name="referenceLocationType"&gt;
    &lt;xs:complexContent&gt;
      &lt;xs:restriction base="xs:anyType"&gt;
        &lt;xs:choice&gt;
          &lt;xs:group ref="in:locationGroup"/&gt;
          &lt;xs:element name="crsOrigin"  minOccurs="0"
                      type="gml:CoordinateReferenceSystemRefType"/&gt;
        &lt;/xs:choice&gt;
      &lt;/xs:restriction&gt;
    &lt;/xs:complexContent&gt;
  &lt;/xs:complexType&gt;
&lt;/xs:schema&gt;
</pre></div>
<a name="security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11"></a><h3>11.&nbsp;
Security Considerations</h3>

<p>This document describes information that is intended for inclusion within a location object, specifically a PIDF-LO.  The security concerns relating to the use of a location object are described in <a class='info' href='#RFC4119'>[RFC4119]<span> (</span><span class='info'>Peterson, J., &ldquo;A Presence-based GEOPRIV Location Object Format,&rdquo; December&nbsp;2005.</span><span>)</span></a>.  Further security and privacy considerations are included in <a class='info' href='#I-D.ietf-geopriv-arch'>[I&#8209;D.ietf&#8209;geopriv&#8209;arch]<span> (</span><span class='info'>Barnes, R., Lepinski, M., Cooper, A., Morris, J., Tschofenig, H., and H. Schulzrinne, &ldquo;An Architecture for Location and Location Privacy in Internet Applications,&rdquo; October&nbsp;2009.</span><span>)</span></a>.  No further considerations are known to apply.
      
</p>
<a name="iana"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12"></a><h3>12.&nbsp;
IANA Considerations</h3>

<p>This section registers a URN for the identification of XML elements for describing a local CRS, plus the schema that defines those elements.
</p>
<a name="iana-ns"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12.1"></a><h3>12.1.&nbsp;
URN Sub-Namespace Registration for 'urn:ietf:params:xml:ns:geopriv:indoor'</h3>

<p>This section registers a new XML namespace, <tt>urn:ietf:params:xml:ns:geopriv:indoor</tt>, per the guidelines in <a class='info' href='#RFC3688'>[RFC3688]<span> (</span><span class='info'>Mealling, M., &ldquo;The IETF XML Registry,&rdquo; January&nbsp;2004.</span><span>)</span></a>.
        </p>
<blockquote class="text">
<p>URI: urn:ietf:params:xml:ns:geopriv:indoor
</p>
<p>Registrant Contact: IETF, GEOPRIV working group, (geopriv@ietf.org), Martin Thomson (martin.thomson@andrew.com).
</p>
<p>XML: </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
      BEGIN
        &lt;?xml version="1.0"?&gt;
        &lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;
        &lt;html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"&gt;
          &lt;head&gt;
            &lt;title&gt;GEOPRIV: Indoor location representation&lt;/title&gt;
          &lt;/head&gt;
          &lt;body&gt;
            &lt;h1&gt;Namespace for Indoor location representation&lt;/h1&gt;
            &lt;h2&gt;urn:ietf:params:xml:ns:geopriv:indoor&lt;/h2&gt;
    [NOTE TO IANA/RFC-EDITOR: Please replace XXXX
    with the RFC number for this specification.]
            &lt;p&gt;See RFCXXXX&lt;/p&gt;
          &lt;/body&gt;
        &lt;/html&gt;
      END
</pre></div><p>

</p>
</blockquote>

<a name="iana-schema"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12.2"></a><h3>12.2.&nbsp;
XML Schema Registration</h3>

<p>This section registers an XML schema as per the guidelines in <a class='info' href='#RFC3688'>[RFC3688]<span> (</span><span class='info'>Mealling, M., &ldquo;The IETF XML Registry,&rdquo; January&nbsp;2004.</span><span>)</span></a>.
        </p>
<blockquote class="text"><dl>
<dt>URI:</dt>
<dd>urn:ietf:params:xml:schema:geopriv:indoor
</dd>
<dt>Registrant Contact:</dt>
<dd>IETF, GEOPRIV working group, (geopriv@ietf.org), Martin Thomson (martin.thomson@andrew.com).
          
</dd>
<dt>Schema:</dt>
<dd>
            The XML for this schema can be found in <a class='info' href='#schema'>Section&nbsp;10<span> (</span><span class='info'>XML Schema</span><span>)</span></a> of this document starting with <tt>&lt;xs:schema</tt> and ending with <tt>&lt;/xs:schema&gt;</tt>.
          
</dd>
</dl></blockquote>

<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.13"></a><h3>13.&nbsp;
Acknowledgements</h3>

<p>Cullen Jennings provided valuable feedback on the use of maps with early versions of this document.
      
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.14"></a><h3>14.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>14.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC4119">[RFC4119]</a></td>
<td class="author-text">Peterson, J., &ldquo;<a href="http://tools.ietf.org/html/rfc4119">A Presence-based GEOPRIV Location Object Format</a>,&rdquo; RFC&nbsp;4119, December&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc4119.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5139">[RFC5139]</a></td>
<td class="author-text">Thomson, M. and J. Winterbottom, &ldquo;<a href="http://tools.ietf.org/html/rfc5139">Revised Civic Location Format for Presence Information Data Format Location Object (PIDF-LO)</a>,&rdquo; RFC&nbsp;5139, February&nbsp;2008 (<a href="http://www.rfc-editor.org/rfc/rfc5139.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5491">[RFC5491]</a></td>
<td class="author-text">Winterbottom, J., Thomson, M., and H. Tschofenig, &ldquo;<a href="http://tools.ietf.org/html/rfc5491">GEOPRIV Presence Information Data Format Location Object (PIDF-LO) Usage Clarification, Considerations, and Recommendations</a>,&rdquo; RFC&nbsp;5491, March&nbsp;2009 (<a href="http://www.rfc-editor.org/rfc/rfc5491.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="OGC.GeoShape">[OGC.GeoShape]</a></td>
<td class="author-text">Thomson, M. and C. Reed, &ldquo;GML 3.1.1 PIDF-LO Shape Application Schema for use by the Internet Engineering Task Force (IETF),&rdquo; OGC Best Practice&nbsp;06-142r1, Version: 1.0, April&nbsp;2007.</td></tr>
<tr><td class="author-text" valign="top"><a name="W3C.REC-xlink-20010627">[W3C.REC-xlink-20010627]</a></td>
<td class="author-text">DeRose, S., Orchard, D., and E. Maler, &ldquo;<a href="http://www.w3.org/TR/2001/REC-xlink-20010627">XML Linking Language (XLink) Version 1.0</a>,&rdquo; World Wide Web Consortium Recommendation&nbsp;REC-xlink-20010627, June&nbsp;2001 (<a href="http://www.w3.org/TR/2001/REC-xlink-20010627">HTML</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>14.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC3688">[RFC3688]</a></td>
<td class="author-text">Mealling, M., &ldquo;<a href="http://tools.ietf.org/html/rfc3688">The IETF XML Registry</a>,&rdquo; BCP&nbsp;81, RFC&nbsp;3688, January&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3688.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3986">[RFC3986]</a></td>
<td class="author-text"><a href="mailto:timbl@w3.org">Berners-Lee, T.</a>, <a href="mailto:fielding@gbiv.com">Fielding, R.</a>, and <a href="mailto:LMM@acm.org">L. Masinter</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc3986">Uniform Resource Identifier (URI): Generic Syntax</a>,&rdquo; STD&nbsp;66, RFC&nbsp;3986, January&nbsp;2005 (<a href="http://www.rfc-editor.org/rfc/rfc3986.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc3986.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc3986.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="OGC.GML-3.1.1">[OGC.GML-3.1.1]</a></td>
<td class="author-text">Cox, S., Daisey, P., Lake, R., Portele, C., and A. Whiteside, &ldquo;<a href="http://portal.opengeospatial.org/files/?artifact_id=4700">Geographic information - Geography Markup Language (GML)</a>,&rdquo; OpenGIS&nbsp;03-105r1, April&nbsp;2004.</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.ietf-geopriv-arch">[I-D.ietf-geopriv-arch]</a></td>
<td class="author-text">Barnes, R., Lepinski, M., Cooper, A., Morris, J., Tschofenig, H., and H. Schulzrinne, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-geopriv-arch-01.txt">An Architecture for Location and Location Privacy in Internet Applications</a>,&rdquo; draft-ietf-geopriv-arch-01 (work in progress), October&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-geopriv-arch-01.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="I-D.thomson-geopriv-uncertainty">[I-D.thomson-geopriv-uncertainty]</a></td>
<td class="author-text">Thomson, M. and J. Winterbottom, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-thomson-geopriv-uncertainty-04.txt">Representation of Uncertainty and Confidence in PIDF-LO</a>,&rdquo; draft-thomson-geopriv-uncertainty-04 (work in progress), November&nbsp;2009 (<a href="http://www.ietf.org/internet-drafts/draft-thomson-geopriv-uncertainty-04.txt">TXT</a>).</td></tr>
</table>

<a name="whatsup"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
Calculating WGS84 ECEF Up, North and East Vectors</h3>

<p>Unit vectors corresponding to Up, North and East from a given point are used for transformation of coordinates between WGS84 and the local CRS.  These vectors are provided in the Cartesian coordinate system used by WGS84: the Earth-Centered, Earth-Fixed (ECEF) variant of WGS84 (X, Y, Z).
      
</p>
<p>These vectors change depending on location, but depend only on latitude and longitude; the altitude of the point has no affect on the vectors.
      
</p>
<p>The following values are used (where sin(x) is the sine function of x and cos(x) the cosine function): coslat = cos(latitude); sinlat = sin(latitude); coslng = cos(longitude); sinlng = sin(longitude).
      
</p>
<p>When calculating the orientation of Up, North and East vectors in Earth-Centered, Earth-Fixed (ECEF) coordinates, inverse flattening of the WGS84 ellipsoid is not considered.  These vectors are:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   East  = [ -sinlng          ; coslng           ; 0      ]
   North = [ -sinlat * coslng ; -sinlat * sinlng ; coslat ]
   Up    = [ coslat * coslng  ; coslat * sinlng  ; sinlat ]
</pre></div>
<p>These are all orthogonal unit vectors, therefore the matrix they form is also orthogonal.
</p>
<p>The Up vector plus the ECEF coordinates of a point defines the plane of the horizontal at that point:
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
   (x - c[x]) * Up[x] + (y - c[y]) * Up[y] + (z - c[z]) * Up[z] = 0
</pre></div>
<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Martin Thomson</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Andrew Corporation</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Andrew Building (39)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Wollongong University Campus</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Northfields Avenue</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Wollongong, NSW  2522</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">AU</td></tr>
<tr><td class="author" align="right">EMail:&nbsp;</td>
<td class="author-text"><a href="mailto:martin.thomson@andrew.com">martin.thomson@andrew.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">James Winterbottom</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Andrew Corporation</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Andrew Building (39)</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Wollongong University Campus</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Northfields Avenue</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Wollongong, NSW  2522</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">AU</td></tr>
<tr><td class="author" align="right">EMail:&nbsp;</td>
<td class="author-text"><a href="mailto:james.winterbottom@andrew.com">james.winterbottom@andrew.com</a></td></tr>
</table>
</body></html>
