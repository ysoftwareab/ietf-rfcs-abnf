<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Session Description Protocol (SDP) Alternate Connectivity (ALTC) Attribute</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.1.1" rel="Chapter" title="1.1 Overall Context">
<link href="#rfc.section.1.2" rel="Chapter" title="1.2 Purpose">
<link href="#rfc.section.1.3" rel="Chapter" title="1.3 Scope">
<link href="#rfc.section.2" rel="Chapter" title="2 Use Cases">
<link href="#rfc.section.3" rel="Chapter" title="3 Overview of the ALTC Mechanism">
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 Overview">
<link href="#rfc.section.3.2" rel="Chapter" title="3.2 Rationale for the Chosen Syntax">
<link href="#rfc.section.4" rel="Chapter" title="4 Alternate Connectivity Attribute">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 ALTC Syntax">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Usage and Interaction">
<link href="#rfc.section.4.2.1" rel="Chapter" title="4.2.1 Usage">
<link href="#rfc.section.4.2.2" rel="Chapter" title="4.2.2 Usage of ALTC in an SDP Answer">
<link href="#rfc.section.4.2.3" rel="Chapter" title="4.2.3 Interaction with ICE">
<link href="#rfc.section.4.2.4" rel="Chapter" title="4.2.4 Interaction with SDP-Cap-Neg">
<link href="#rfc.section.5" rel="Chapter" title="5 The ALTC Option Tag">
<link href="#rfc.section.6" rel="Chapter" title="6 IANA Considerations">
<link href="#rfc.section.7" rel="Chapter" title="7 Security Considerations">
<link href="#rfc.section.8" rel="Chapter" title="8 Acknowledgements">
<link href="#rfc.references" rel="Chapter" title="9 References">
<link href="#rfc.references.1" rel="Chapter" title="9.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="9.2 Informative References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="This document proposes a mechanism which allows to carry multiple IP addresses, of different address families (e.g., IPv4, IPv6), in the same SDP offer. The proposed attribute solves the backward compatibility problem which plagued ANAT, due to its syntax." />
  <meta name="description" content="This document proposes a mechanism which allows to carry multiple IP addresses, of different address families (e.g., IPv4, IPv6), in the same SDP offer. The proposed attribute solves the backward compatibility problem which plagued ANAT, due to its syntax." />
  <meta name="keywords" content="" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Network Working Group</td>
<td class="right">M. Boucadair</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">France Telecom</td>
</tr>
<tr>
<td class="left">Intended status: Standards Track</td>
<td class="right">H. Kaplan</td>
</tr>
<tr>
<td class="left">Expires: March 19, 2012</td>
<td class="right">Acme Packet</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">R. . Gilman</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Independent</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">S. Veikkolainen</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">Nokia</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">September 16, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Session Description Protocol (SDP) Alternate Connectivity (ALTC) Attribute<br />
  <span class="filename">draft-boucadair-mmusic-altc-03.txt</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This document proposes a mechanism which allows to carry multiple IP addresses, of different address families (e.g., IPv4, IPv6), in the same SDP offer. The proposed attribute solves the backward compatibility problem which plagued ANAT, due to its syntax.</p>
<h1><a>Requirements Language</a></h1>
<p>The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in <a href="#RFC2119">RFC 2119</a> <cite title="NONE">[RFC2119]</cite>.</p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on March 19, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>1.1.   <a href="#rfc.section.1.1">Overall Context</a>
</li>
<li>1.2.   <a href="#rfc.section.1.2">Purpose</a>
</li>
<li>1.3.   <a href="#rfc.section.1.3">Scope</a>
</li>
<li>2.   <a href="#rfc.section.2">Use Cases</a>
</li>
<li>3.   <a href="#rfc.section.3">Overview of the ALTC Mechanism</a>
</li>
<li>3.1.   <a href="#rfc.section.3.1">Overview</a>
</li>
<li>3.2.   <a href="#rfc.section.3.2">Rationale for the Chosen Syntax</a>
</li>
<li>4.   <a href="#rfc.section.4">Alternate Connectivity Attribute</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">ALTC Syntax</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">Usage and Interaction</a>
</li>
<li>4.2.1.   <a href="#rfc.section.4.2.1">Usage</a>
</li>
<li>4.2.2.   <a href="#rfc.section.4.2.2">Usage of ALTC in an SDP Answer</a>
</li>
<li>4.2.3.   <a href="#rfc.section.4.2.3">Interaction with ICE</a>
</li>
<li>4.2.4.   <a href="#rfc.section.4.2.4">Interaction with SDP-Cap-Neg</a>
</li>
<li>5.   <a href="#rfc.section.5">The ALTC Option Tag</a>
</li>
<li>6.   <a href="#rfc.section.6">IANA Considerations</a>
</li>
<li>7.   <a href="#rfc.section.7">Security Considerations</a>
</li>
<li>8.   <a href="#rfc.section.8">Acknowledgements</a>
</li>
<li>9.   <a href="#rfc.references">References</a>
</li>
<li>9.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>9.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p></p>
<h1 id="rfc.section.1.1">
<a href="#rfc.section.1.1">1.1.</a> Overall Context</h1>
<p id="rfc.section.1.1.p.1">Due to the IPv4 address exhaustion problem, IPv6 deployment is becoming an urgent need, along with the need to properly handle IPv6 and IPv4 co-existence. The reality of IPv4-IPv6 co-existence introduces heterogeneous scenarios with combinations of IPv4 and IPv6 nodes, some of which are capable of supporting both IPv4 and IPv6 dual-stack (DS) and some of which are capable of supporting only IPv4 or only IPv6. In this context, Session Initiation Protocol (SIP <a href="#RFC3261">[RFC3261]</a>) User Agents (UAs) need to be able to indicate their available IP capabilities in order to increase the ability to establish successful SIP sessions, and also to avoid invocation of adaptation functions such as Application Layer Gateways (ALGs) and IPv4-IPv6 interconnection functions (e.g., NAT64 <a href="#RFC6146">[RFC6146]</a>), and to avoid using private IPv4 addresses through consumer NATs or Carrier Grade NATs (CGN <a href="#I-D.ietf-behave-lsn-requirements">[I-D.ietf-behave-lsn-requirements]</a>).</p>
<p id="rfc.section.1.1.p.2">In the meantime, service providers are investigating scenarios to upgrade their service offering to be IPv6-capable. The current strategies involve either offering IPv6 only, for example to mobile devices, or providing both IPv4 and IPv6 but with private IPv4 addresses which are NAT'ed by CGNs. In the latter case the end device may be using "normal" IPv4 and IPv6 stacks and interfaces, or it may tunnel the IPv4 packets though a DS-Lite stack integrated into the host; in either case the device has both address families available from a SIP and media perspective.</p>
<p id="rfc.section.1.1.p.3">Regardless of the IPv6 transition strategy being used, it is obvious that there will be a need for dual-stack SIP devices to communicate with IPv4-only legacy UAs, and IPv6-only UAs, and other dual-stack UAs. It may not, for example, be possible for a dual-stack UA to communicate with an IPv6-only UA unless the dual-stack UA had a means of providing the IPv6-only UA with its IPv6 local address for media, while clearly it needs to provide a legacy IPv4-only device its local IPv4 address. The communication must be possible in a backwards-compatible fashion, such that IPv4-only SIP devices need not support the new mechanism to communicate with dual-stack UAs.</p>
<p id="rfc.section.1.1.p.4">The current means by which multiple address families can be communicated are through ANAT <a href="#RFC4091">[RFC4091]</a> or ICE <a href="#RFC5245">[RFC5245]</a>. ANAT has serious backwards-compatibility problems as described in <a href="#RFC4092">[RFC4092]</a>, which effectively make it unusable, and it is deprecated by the IETF <a href="#RFC5245">[RFC5245]</a>. ICE at least allows interoperability with legacy devices, by not doing ICE in such cases, but it is a complicated and processing intensive mechanism, and has seen limited deployment and implementation in SIP applications. In some deployment models (e.g., closed networks), ICE is not usable at all.</p>
<p id="rfc.section.1.1.p.5">The use of the ALTC solution is compliant with <a href="#RFC6157">[RFC6157]</a> which states:</p>

<ul class="empty"><li>"The use of ICE can be avoided for signaling messages that stay within such managed networks."</li></ul>
<h1 id="rfc.section.1.2">
<a href="#rfc.section.1.2">1.2.</a> Purpose</h1>
<p id="rfc.section.1.2.p.1">This document proposes a new alternative: a backwards-compatible syntax for indicating multiple media connection addresses and ports in an SDP offer, which can immediately be selected from and used in an SDP answer.</p>
<p id="rfc.section.1.2.p.2">The proposed mechanism is independent of the model described in <a href="#RFC5939">[RFC5939]</a> and does not require implementation of sdp-capabilities-negotiations (a.k.a., sdp-cap-neg) to function. When sdp-cap-neg is supported, the CCAP attribute defined in <a href="#I-D.garcia-mmusic-sdp-misc-cap">[I-D.garcia-mmusic-sdp-misc-cap]</a> should be used.</p>
<p id="rfc.section.1.2.p.3">It should be noted that "backwards-compatible" in this document generally refers to working with legacy IPv4-only devices. The choice has to be made, one way or the other, because to interoperate with legacy devices requires constructing SDP bodies which they would understand and support, such that they detect their local address family in the SDP connection line. It is not possible to support interworking with both legacy IPv4-only and legacy IPv6-only devices with the same SDP offer. Clearly, there are far more legacy IPv4-only devices in existence, and thus those are the ones assumed in this document. However, the syntax allows for a UA to choose which address family to be backwards-compatible with, in case it has some means of determining it.</p>
<p id="rfc.section.1.2.p.4">Furthermore, even for cases where both sides support the same address family, there should be a means by which the "best" address family transport is used, based on what the UAs decide. The address family which is "best" for a particular session cannot always be known a priori. For example, in some cases the IPv4 transport may be better, even if both UAs support IPv6.</p>
<p id="rfc.section.1.2.p.5">The proposed solution provides the following benefits:</p>
<p></p>

<ul>
<li>Allows a UA to signal more than one IP address (type) in the same SDP offer/answer;</li>
<li>Is backwards compatible. No parsing or semantic errors will be experienced by a legacy UA or intermediary SIP nodes which do not understand this new mechanism;</li>
<li>Is as lightweight as possible to achieve the goal, while still allowing and interoperating with nodes which support other similar or related mechanisms;</li>
<li>Is easily deployable in managed networks;</li>
<li>Requires minimal increase of the length of the SDP offer (I.e., minimizes fragmentation risks).</li>
</ul>
<h1 id="rfc.section.1.3">
<a href="#rfc.section.1.3">1.3.</a> Scope</h1>
<p id="rfc.section.1.3.p.1">This document proposes an alternative scheme, as replacement to the ANAT procedure, to carry several IP address types in the same SDP offer/answer while preserving backward compatibility.</p>
<p id="rfc.section.1.3.p.2">While clearly two UAs communicating directly at a SIP layer need to be able to support the same address family for SIP itself, current SIP deployments almost always have Proxy Servers or B2BUA's in the SIP signaling path, which can provide the necessary interworking of the IP address family at the SIP layer. SIP-layer address family interworking is out of scope of this document (see <a href="#I-D.boucadair-sipping-ipv6-atypes">[I-D.boucadair-sipping-ipv6-atypes]</a> for a solution candidate). Instead, this document focuses on the problem of communicating media address family capabilities in a backwards-compatible fashion. Since media can go directly between two UAs, without a priori knowledge by the UAC of which address family the far-end UAS supports, it has to offer both, in a backwards-compatible fashion.</p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> Use Cases</h1>
<p id="rfc.section.2.p.1">Although the ALTC mechanism defined in this document is meant for general use, the following use cases were explicitly considered:</p>
<p></p>

<ul>
<li>A dual-stack UAC initiating a SIP session without knowing the address family of the ultimate target UAS.</li>
<li>A UA receiving a SIP session request with SDP offer and wishes to avoid using IPv4, or to avoid IPv6.</li>
<li>An IPv6-only UA wishes to avoid using a NAT64 <a href="#RFC6146">[RFC6146]</a>.</li>
<li>A SIP UA behind a Dual-Stack Lite CGN <a href="#RFC6333">[RFC6333]</a>.</li>
<li>A SIP Service Provider or Enterprise domain of IPv4-only and/or IPv6-only UA, which provides interworking by invoking IPv4-IPv6 media relays, wishes to avoid invoking such functions and let media go end-to-end as much as possible.</li>
<li>A SIP Service Provider or Enterprise domain of a UA, which communicates with other domains and wishes to either avoid invoking IPv4-IPv6 interworking or let media go end-to-end as much as possible.</li>
<li>A SIP Service Provider providing transit peering services for SIP sessions, which may need to modify SDP in order to provide IPv4-IPv6 interworking, but would prefer to avoid such interworking or avoid relaying media in general, as much as possible.</li>
<li>SIP sessions using the new mechanism crossing legacy SDP-aware middleboxes which may not understand this new mechanism.</li>
</ul>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> Overview of the ALTC Mechanism</h1>
<p></p>
<h1 id="rfc.section.3.1">
<a href="#rfc.section.3.1">3.1.</a> Overview</h1>
<p id="rfc.section.3.1.p.1">The ALTC mechanism relies solely on the SDP offer/answer mechanism, with specific syntax to indicate alternative connection addresses. The basic concept is to use a new SDP attribute "altc", to indicate the IP addresses for potential alternative connection addresses. The address which is most likely to get chosen for the session is in the normal 'c=' line. Typically in current operational networks this would be an IPv4 address. The &#8220;a=altc&#8221; lines contain, in preference order, the alternative addresses offered for this session. This way, a dual-stack UA might encode its IPv4 address in the &#8220;c=&#8221; line, while possibly preferring to use an IPv6 address by indicating this by the &#8220;a=altc&#8221; attribute line ordering. One of the &#8220;a=altc&#8221; lines duplicates the address contained in the &#8220;c=&#8221; line, for reasons explained in <a href="#syntax">Section 3.2</a>). The SDP answerer would indicate its chosen address, by simply using that address family in the &#8220;c=&#8221; line of its response.</p>
<p id="rfc.section.3.1.p.2">An example of an SDP offer using this mechanism is as follows when IPv4 is considered most likely to be used for the session, but IPv6 is preferred:</p>
<div id="#rfc.figure.1"></div>
<pre>v=0
o=- 25678 753849 IN IP4 192.0.2.1
s=
c=IN IP4 192.0.2.1
t=0 0
m=audio 12340 RTP/AVP 0 8
a=altc IP6 2001:db8::1 45678
a=altc IP4 192.0.2.1 12340</pre>
<p></p>
<p id="rfc.section.3.1.p.4">If IPv6 was considered most likely to be used for the session, the SDP offer would be as follows:</p>
<div id="#rfc.figure.2"></div>
<pre>v=0
o=- 25678 753849 IN IP6 2001:db8::1
s=
c=IN IP6 2001:db8::1
t=0 0
m=audio 12340 RTP/AVP 0 8
a=altc IP6 2001:db8::1 45678
a=altc IP4 192.0.2.1 12340
</pre>
<p></p>
<p id="rfc.section.3.1.p.6">Since an alternative address is likely to require an alternative TCP/ UDP port number as well, the new &#8220;altc&#8221; attribute includes both an IP address and a receive transport port number (or multiple port numbers). The ALTC mechanism does not itself support offering a different transport type (i.e., UDP vs. TCP), codec, nor any other attribute. It is only intended for offering an alternative IP address and port number.</p>
<h1 id="rfc.section.3.2">
<a href="#rfc.section.3.2">3.2.</a> <a href="#syntax" id="syntax">Rationale for the Chosen Syntax</a>
</h1>
<p id="rfc.section.3.2.p.1">The use of an 'a=' attribute line is, according to <a href="#RFC4566">[RFC4566]</a>, the primary means for extending SDP and tailoring it to particular applications or media. A compliant SDP parser will ignore any session description that contains attribute lines it does not support.</p>
<p id="rfc.section.3.2.p.2">The rationale for encoding the same address and port in the &#8220;a=altc&#8221; line as in the &#8220;m=&#8221; and &#8220;c=&#8221; lines is to provide detection of legacy SDP-changing middleboxes. Such systems may change the connection address and media transport port numbers, but not support this new mechanism, and thus two UAs supporting this mechanism would try to connect to the wrong addresses. Therefore, the rules detailed in this document require the SDP processor to check for matching altc and connection line addresses and media ports, before choosing one of the alternatives.</p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> Alternate Connectivity Attribute</h1>
<p></p>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> ALTC Syntax</h1>
<p id="rfc.section.4.1.p.1">The altc attribute adheres to the <a href="#RFC4566">[RFC4566]</a> "attribute" production. The ABNF syntax <a href="#RFC5234">[RFC5234]</a> of altc is provided below:</p>
<div id="#rfc.figure.3"></div>
<div id="#Connectivity-ABNF"></div>
<pre>altc-attr = "altc" att-value
att-value = addrtype SP connection-address SP port ["/" integer]</pre>
<p></p>
<p id="rfc.section.4.1.p.3">The meaning of the fields are listed hereafter:</p>
<p></p>

<ul>
<li>addrtype: the addrtype field as defined in <a href="#RFC4566">[RFC4566]</a> for connection data.</li>
<li>connection-address: a network address as defined in <a href="#RFC4566">[RFC4566]</a> corresponding to the address type specified by addrtype.</li>
<li>port: the port number to be used, as defined in <a href="#RFC4566">[RFC4566]</a>. Distinct port numbers may be used per IP address type. If the specified address type does not require a port number, a value defined for that address type should be used.</li>
</ul>
<p id="rfc.section.4.1.p.5">The &#8220;altc&#8221; attribute is only applicable in an SDP offer. The &#8220;altc&#8221; attribute is a media-level-only attribute, and MUST NOT appear at the SDP session level (since it defines a port number, it is inherently tied to the media level).  There MUST NOT be more than one &#8220;altc&#8221; attribute per addrtype within each media description. This restriction is necessary in order that the addrtype of the reply may be used by the offerer to determine which alternative was accepted.</p>
<p id="rfc.section.4.1.p.6">The &lt;addrtype&gt;'s of the altc MUST correspond to the &lt;nettype&gt; of the current connection (c=) line.</p>
<p id="rfc.section.4.1.p.7">A media description MUST contain at least two &#8220;altc&#8221; attributes: the alternative address and port as well as an address and port which "duplicates" the address/port information from the current 'c=' and 'm=' lines. Each media level MUST contain at least one such duplicate altc attribute, of the same IP address family, address, and transport port number as those in the SDP connection and media lines of its level. In particular, if a 'c=' line appears within a media description, the addr-type and connection-address from that 'c=' line MUST be used in the duplicate &#8220;altc&#8221; attribute for that media description. If a 'c=' line appears only at the session level and a given media description does not have its own connection line, then the duplicate &#8220;altc&#8221; attribute for that media description MUST be the same as the session-level address information.</p>
<p id="rfc.section.4.1.p.8">The &#8220;altc&#8221; attributes appearing within a media description MUST be prioritized in order of appearance, with the first altc given highest priority and the following altc attributes prioritized in decending order. Given this rule, and the requirement that the address information provided in the &#8220;m=&#8221; line and &#8220;o=&#8221; line must be provided in an &#8220;altc&#8221; attribute as well, it is possible that the address in the &#8220;m=&#8221; line and &#8220;o=&#8221; line are not the preferred choice.</p>
<p id="rfc.section.4.1.p.9">If the addrtype of an &#8220;altc&#8221; attribute is not compatible with the transport protocol or media format specified in the media description, that altc attribute MUST be ignored.</p>
<p id="rfc.section.4.1.p.10">Note that &#8220;a=altc&#8221; lines describe alternative connection addresses, NOT addresses for parallel connections. When several altc lines are present, multiple sessions establishment MUST be avoided. Only one session is to be maintained with the remote party for the associated media description.</p>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> Usage and Interaction</h1>
<p></p>
<h1 id="rfc.section.4.2.1">
<a href="#rfc.section.4.2.1">4.2.1.</a> Usage</h1>
<p id="rfc.section.4.2.1.p.1">In an SDP offer/answer model, the SDP offer includes &#8220;altc&#8221; attributes to indicate alternative connection information (i.e., address type, address and port number(s)), including the "duplicate" connection information already identified in the 'c=' and 'm=' lines.</p>
<p id="rfc.section.4.2.1.p.2">Additional, subsequent offers MAY include &#8220;altc&#8221; attributes again, and may change the IP address, port numbers, and order of preference; but they MUST include a duplicate &#8220;altc&#8221; attribute for the connection and media lines in that specific subsequent offer. In other words, every offered SDP media description with an alternative address offer with an &#8220;altc&#8221; attribute has at least two of them:</p>
<p></p>

<ul class="empty">
<li>- one duplicating the 'c=' and 'm=' line information for that media description, and</li>
<li>- one for each of the alternatives,</li>
</ul>
<p id="rfc.section.4.2.1.p.4">even though these need not be the same as the original SDP offer.</p>
<p id="rfc.section.4.2.1.p.5">The purpose of encoding a duplicate &#8220;altc&#8221; attribute is to allow receivers of the SDP offer to detect if a legacy SDP-changing middle box has modified the 'c=' and/or 'm=' line address/port information. If the SDP answerer does not find a duplicate &#8220;altc&#8221; attribute value for which the address and port match exactly those in the 'c=' line and 'm=' line, the SDP answerer MUST ignore the &#8220;altc&#8221; attributes and use the 'c=' and 'm=' offered address/ports for the entire SDP instead, as if no &#8220;altc&#8221; attributes were present. The rationale for this is that many SDP-changing middleboxes will end the media sessions if they do not detect media flowing through them; if a middlebox modified the SDP addresses, media MUST be sent using the modified information.</p>
<p id="rfc.section.4.2.1.p.6">Note that for RTCP, if applicable for the given media types, each side would act as if the chosen &#8220;altc&#8221; attribute's port number was in the 'm=' media line. Typically, this would mean RTCP is sent to the odd +1 of the port number, unless some other attribute determines otherwise.</p>
<h1 id="rfc.section.4.2.2">
<a href="#rfc.section.4.2.2">4.2.2.</a> Usage of ALTC in an SDP Answer</h1>
<p id="rfc.section.4.2.2.p.1">The SDP answer SHOULD NOT contain &#8220;altc&#8221; attributes, as the answer's 'c=' line implicitly and definitively chooses the address family from the offer and includes it in &#8220;c=&#8221; and &#8220;m=&#8221; lines of the answer. Furthermore, this avoids establishing several sessions simultaneously between the participating peers.</p>
<p id="rfc.section.4.2.2.p.2">Any solution requiring the use of ALTC in SDP answer SHOULD document its usage, in particular how sessions are established between the participating peers.</p>
<h1 id="rfc.section.4.2.3">
<a href="#rfc.section.4.2.3">4.2.3.</a> Interaction with ICE</h1>
<p id="rfc.section.4.2.3.p.1">Since ICE also includes address and port number information in its candidate attributes, a potential problem arises: which one wins. Since ICE also includes specific ICE attributes in the SDP answer, the problem is easily avoided: if the SDP offerer supports both ALTC and ICE, it may include both sets of attributes in the same SDP offer. A legacy ICE-only answerer will simply ignore the ALTC attributes, and use ICE. An ALTC-only answerer will ignore the ICE attributes and reply without them. An answerer which supports both MUST choose one and only one of the mechanisms to use: either ICE or ALTC (unless the 'm=' or 'c=' lines were changed by a middlebox, in which case the rules for both ALTC and ICE would make the answerer revert to basic SDP semantics).</p>
<h1 id="rfc.section.4.2.4">
<a href="#rfc.section.4.2.4">4.2.4.</a> Interaction with SDP-Cap-Neg</h1>
<p id="rfc.section.4.2.4.p.1">The ALTC mechanism is orthogonal to sdp-cap-neg. If the offerer supports both ALTC and sdp-cap-neg, it may offer both.</p>
<p id="rfc.section.4.2.4.p.2">A method based on sdp-cap-neg is described in <a href="#I-D.garcia-mmusic-sdp-misc-cap">[I-D.garcia-mmusic-sdp-misc-cap]</a> and may be used to specify different connectivity for alternative configurations.</p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> The ALTC Option Tag</h1>
<p id="rfc.section.5.p.1">This document defines a new SIP option-tag for use in the "Supported" SIP header field called "altc". This option-tag is for the purpose of indicating that a UA supports the ALTC mechanism defined in this document AND actually has multiple address family addresses available, in order to improve troubleshooting, and in some cases provide a hint to other nodes that the UA is capable of both IPv4 and IPv6 and ALTC.</p>
<p id="rfc.section.5.p.2">A UA MUST NOT include this option tag unless it both (1) supports the ALTC mechanism AND (2) has both an IPv4 and IPv6 address available for media use. The reason it only includes the "altc" option-tag if it actually has both addresses, is that having only a single address family available implies the UA cannot truly perform ALTC in an offer; it may have the necessary logic to, but it does not have the addresses to do so. (remember one does not include the "altc" attribute in SDP unless one has both address families available)</p>
<p id="rfc.section.5.p.3">A UA SHOULD include the ALTC option-tag in a "Supported" SIP header field in SIP REGISTER, OPTIONS, and INVITE requests and related responses, if it has both address-family addresses available and supports the ALTC mechanism. A UA MUST NOT include the ALTC option- tag in the "Require" or "Proxy-Require" SIP header fields under any conditions.</p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#IANA" id="IANA">IANA Considerations</a>
</h1>
<p id="rfc.section.6.p.1">If this document moves forward, it requests a new SDP attribute name "altc", as defined earlier; and a new SIP option-tag be reserved, named "altc", for the purposes described earlier.</p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#Security" id="Security">Security Considerations</a>
</h1>
<p id="rfc.section.7.p.1">The security implications for ALTC are effectively the same as they are for SDP in general <a href="#RFC4566">[RFC4566]</a>.</p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> Acknowledgements</h1>
<p id="rfc.section.8.p.1">Many thanks to T. Taylor for his review and comments.</p>
<h1 id="rfc.references">
<a href="#rfc.references">9.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">9.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3261">[RFC3261]</b></td>
<td class="top">
<a>Rosenberg, J.</a>, <a>Schulzrinne, H.</a>, <a>Camarillo, G.</a>, <a>Johnston, A.</a>, <a>Peterson, J.</a>, <a>Sparks, R.</a>, <a>Handley, M.</a> and <a>E. Schooler</a>, "<a href="http://tools.ietf.org/html/rfc3261">SIP: Session Initiation Protocol</a>", RFC 3261, June 2002.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4566">[RFC4566]</b></td>
<td class="top">
<a>Handley, M.</a>, <a>Jacobson, V.</a> and <a>C. Perkins</a>, "<a href="http://tools.ietf.org/html/rfc4566">SDP: Session Description Protocol</a>", RFC 4566, July 2006.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5234">[RFC5234]</b></td>
<td class="top">
<a>Crocker, D.</a> and <a>P. Overell</a>, "<a href="http://tools.ietf.org/html/rfc5234">Augmented BNF for Syntax Specifications: ABNF</a>", STD 68, RFC 5234, January 2008.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">9.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC5245">[RFC5245]</b></td>
<td class="top">
<a>Rosenberg, J.</a>, "<a href="http://tools.ietf.org/html/rfc5245">Interactive Connectivity Establishment (ICE): A Protocol for Network Address Translator (NAT) Traversal for Offer/Answer Protocols</a>", RFC 5245, April 2010.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5939">[RFC5939]</b></td>
<td class="top">
<a>Andreasen, F.</a>, "<a href="http://tools.ietf.org/html/rfc5939">Session Description Protocol (SDP) Capability Negotiation</a>", RFC 5939, September 2010.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.boucadair-sipping-ipv6-atypes">[I-D.boucadair-sipping-ipv6-atypes]</b></td>
<td class="top">
<a>Boucadair, M</a>, <a>Noisette, Y</a> and <a>A Allen</a>, "<a href="http://tools.ietf.org/html/draft-boucadair-sipping-ipv6-atypes-02">The atypes media feature tag for Session Initiation Protocol (SIP)</a>", Internet-Draft draft-boucadair-sipping-ipv6-atypes-02, July 2009.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.garcia-mmusic-sdp-misc-cap">[I-D.garcia-mmusic-sdp-misc-cap]</b></td>
<td class="top">
<a>Garcia, M</a>, <a>Veikkolainen, S</a> and <a>R Gilman</a>, "<a href="http://tools.ietf.org/html/draft-garcia-mmusic-sdp-misc-cap-01">Miscellaneous Capabilities Negotiation in the Session Description Protocol (SDP)</a>", Internet-Draft draft-garcia-mmusic-sdp-misc-cap-01, July 2009.</td>
</tr>
<tr>
<td class="reference"><b id="RFC6146">[RFC6146]</b></td>
<td class="top">
<a>Bagnulo, M.</a>, <a>Matthews, P.</a> and <a>I. van Beijnum</a>, "<a href="http://tools.ietf.org/html/rfc6146">Stateful NAT64: Network Address and Protocol Translation from IPv6 Clients to IPv4 Servers</a>", RFC 6146, April 2011.</td>
</tr>
<tr>
<td class="reference"><b id="RFC6157">[RFC6157]</b></td>
<td class="top">
<a>Camarillo, G.</a>, <a>El Malki, K.</a> and <a>V. Gurbani</a>, "<a href="http://tools.ietf.org/html/rfc6157">IPv6 Transition in the Session Initiation Protocol (SIP)</a>", RFC 6157, April 2011.</td>
</tr>
<tr>
<td class="reference"><b id="RFC6333">[RFC6333]</b></td>
<td class="top">
<a>Durand, A.</a>, <a>Droms, R.</a>, <a>Woodyatt, J.</a> and <a>Y. Lee</a>, "<a href="http://tools.ietf.org/html/rfc6333">Dual-Stack Lite Broadband Deployments Following IPv4 Exhaustion</a>", RFC 6333, August 2011.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4091">[RFC4091]</b></td>
<td class="top">
<a>Camarillo, G.</a> and <a>J. Rosenberg</a>, "<a href="http://tools.ietf.org/html/rfc4091">The Alternative Network Address Types (ANAT) Semantics for the Session Description Protocol (SDP) Grouping Framework</a>", RFC 4091, June 2005.</td>
</tr>
<tr>
<td class="reference"><b id="RFC4092">[RFC4092]</b></td>
<td class="top">
<a>Camarillo, G.</a> and <a>J. Rosenberg</a>, "<a href="http://tools.ietf.org/html/rfc4092">Usage of the Session Description Protocol (SDP) Alternative Network Address Types (ANAT) Semantics in the Session Initiation Protocol (SIP)</a>", RFC 4092, June 2005.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.ietf-behave-lsn-requirements">[I-D.ietf-behave-lsn-requirements]</b></td>
<td class="top">
<a>Perreault, S</a>, <a>Yamagata, I</a>, <a>Miyakawa, S</a>, <a>Nakagawa, A</a> and <a>H Ashida</a>, "<a href="http://tools.ietf.org/html/draft-ietf-behave-lsn-requirements-04">Common requirements for Carrier Grade NAT (CGN)</a>", Internet-Draft draft-ietf-behave-lsn-requirements-04, October 2011.</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Mohamed Boucadair</span> 
	  <span class="n hidden">
		<span class="family-name">Boucadair</span>
	  </span>
	</span>
	<span class="org vcardline">France Telecom</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality">Rennes</span>,  
		<span class="region"></span>
		<span class="code">35000</span>
	  </span>
	  <span class="country-name vcardline">France</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:mohamed.boucadair@orange-ftgroup.com">mohamed.boucadair@orange-ftgroup.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Hadriel Kaplan</span> 
	  <span class="n hidden">
		<span class="family-name">Kaplan</span>
	  </span>
	</span>
	<span class="org vcardline">Acme Packet</span>
	<span class="adr">
	  <span>71 Third Ave.</span>

	  <span class="vcardline">
		<span class="locality">Burlington</span>,  
		<span class="region">MA</span> 
		<span class="code">01803</span>
	  </span>
	  <span class="country-name vcardline">USA</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:hkaplan@acmepacket.com">hkaplan@acmepacket.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Robert R Gilman </span> 
	  <span class="n hidden">
		<span class="family-name">Gilman</span>
	  </span>
	</span>
	<span class="org vcardline">Independent</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:bob_gilman@comcast.net">bob_gilman@comcast.net</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Simo Veikkolainen</span> 
	  <span class="n hidden">
		<span class="family-name">Veikkolainen</span>
	  </span>
	</span>
	<span class="org vcardline">Nokia</span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:Simo.Veikkolainen@nokia.com">Simo.Veikkolainen@nokia.com</a></span>

  </address>
</div>

</body>
</html>