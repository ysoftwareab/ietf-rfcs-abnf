Half-Pint-message = HalfPintVersion     
                       Addressee 
                       Sender 
                       TransactionID    
                     [ AuthenticationInfo ]  
                       MessageTypeandParameterPair              
    
HalfPintVersion = (ôHalfPintVersionö | ôvö) ô:ö *token 
    
Addressee = (ôAddresseeö | ôaö) ô:ö absoluteURI 
    
Sender = (ôSenderö | ôsö) ô:ö absoulteURI 
    
TransactionID = (ôTransactionIDö | ôtö) ô:ö token [ ô@ö token] 
    
AuthenticationInfo = (ôAuthenticationInfoö | ôaiö) ô:ö *token 
    
Token = 1*< any CHAR  except CTL's  or separators> ; as in SIP spec [2] 
    
CTL = <any US-ASCII control character octets 0 -- 31) and DEL (127)> 
    
MessagetTypeandParameterPair = (ôMessagetTypeö | ômö) ô:ö  
         ( ôCreateCallö CreateCallParameterSet 
         | ôAddPartyToCallö AddPartyToCallParameterSet 
         | ôBookConferenceCallö BookConferenceCallParameterSet 
         | ôConferenceCallResponseö ConferenceCallResponseParameterSet 
         | ôGeneralResponseö GeneralResponseParameterSet 
         | ôRegisterCallAlertö RegisterCallAlertParameterSet 
         | ôCancelCallAlertö CancelCallALertParameterSet 
         | ôGetCallLogö GetCallLogParameterSet 
         | ôClearCallLogö ClearCallLogParameterSet 
         | ôCallLogö CallLogParameterSet 
 
CreateCallParameterSet =   CallingParty 
                              CalledParty 
                             [AnnouncementID]  
                              CompletionNotification 
                             [CLIPresentation] 
    
CallingParty = (ôCallingPartyö | ôcpö) ô:ö *token 
CalledParty = (ôCalledPartyö | ôcdpö) ô:ö*token 
AnnouncementID = (ôAnnouncementIDö | ôaidö) ô:ö *token 
CompletionNotification = (ôCompletionNotifictaionö | ôcnö) ô:ö (ôyö |  ônö) 
CLIPresentation = (ôCLIPresentation ö | ôcliö)  ô:ö   Restrict 
                                                       | Present 
Restrict = ôRestrictö | ôrö 
Present = ôPresentö | ôpö 
                                          
 
AddPartyToCallParameterSet =   SubscriberNumToAdd 
                                  SubscriberNumber 
                                 [CLIPresentation] 
                            
    
SubscriberNumToAdd = (ôSubscriberNumToAddö | ôsnaö) ô:ö *token 
SubscriberNumber = (ôSubscriberNumberö | ôsnö) ô:ö*token 
CLIPresentation = (ôCLIPresentation ö | ôcliö)  ô:ö   Restrict 
                                                       | Present 
Restrict = ôRestrictö | ôrö 
Present = ôPresentö | ôpö                                       
    
    
    
BookConferenceCallParameterSet =   StartTime 
                                        EndTime 
                                        MaxParticipants 
                                         
    
StartTime = (ôStartTimeö | ôsö) ô:ö DateAndTime 
EndTime = (ôEndTimeö | ôeö) ô:ö DateAndTime 
MaxParticipants = (ôMaxParticipantsö | ômpö) ô:ö  *Digit 
DateAndTime = (ôDateAndTimeö | ôdö) ô:ö   Date Time 
Date = Day.Month.Year 
Time = hour.min 
Day = ôMonö | ôTueö | ôWedö | ôThurö | ôFriö | ôSatö | ôSunö 
Month = firstdigit.seconddigit 
Year = 4*4Digit 
Firstdigit = %x30-31; can be ô0ö or ô1ö 
Seconddigit = %x30-39; can be ô0ö to ô9ö 
Hour = hourfirstdigit.hourseconddigit 
Hourfirstdigit = %x30-32; can be ô0ö or ô1ö or ô2ö 
Hourseconddigit = %x30-39; can be ô0ö to ô9ö 
Min = Minfirstdigit.Minseconddigit 
Minfirstdigit = %x30-35; can be ô0ö or ô1ö or ô2ö or ô3ö or ô4ö or ô5ö 
Minseconddigit = %x30-39; can be ô0ö to ô9ö 
    
   
                                          
 
ConferenceCallResponseParameterSet = Confirmation 
                                       [HostNumber 
                                        HostPassword 
                                        ParticipantNumber 
                                        ParticipantPassword ]  
                                         
Confirmation = (ôConfirmationö | ôcö) ô:ö (ôyö |  ônö) 
HostNumber = (ôHostNumberö | ôhnö) ô:ö*token 
HostPassword = (ôHostPasswordö | ôhpö) ô:ö*token 
ParticipantNumber = (ôParticipantNumberö | ôpnö) ô:ö*token 
ParticipantPassword = (ôParticipantPasswordö | ôppö) ô:ö*token 
                                          
    
 
RegisterCallAlertParameterSet =   SubscriberNumber 
                                    *URItoAlert 
                                      
    
SubscriberNumber = (ôSubscriberNumberö | ôsnö) ô:ö *token 
URItoAlert = (ôURItoAlertö | ôUö) ô:ö absoluteURI 
 
    
CancelCallAlertParameterSet =   SubscriberNumber 
                                  [*URItoAlert] 
    
SubscriberNumber = (ôSubscriberNumberö | ôsnö) ô:ö *token 
URItoAlert = (ôURItoAlertö | ôUö) ô:ö absoluteURI 
    
    
CallAlertParameterSet =   CallingParty 
                             CalledParty 
                            [ForwardedFromParty] 
                            *AlertParameters 
    
CallingParty = (ôCallingPartyö | ôcpö) ô:ö *token 
CalledParty = (ôCalledPartyö | ôcdpö) ô:ö *token 
ForwardedFromParty = (ôForwardedFromPartyö | ôfpö) ô:ö *token 
AlertParameters =  ContactURL  
                    | CallingName   
                    | CallingPictureURL 
                    | ActionOption 
ContactURL = (ôContactURLö | ôctuö) ô:ö AbsoluteURI 
CallingName = (ôCallingNameö | ôclnö) ô:ö *token 
CallingPictureURL = (ôCallingPictureURLö | ôpicUö) ô:ö AbsoluteURI 
ActionOption =  ActionLabel 
                  [ActionText]  
ActionText = *Token 
ActionLabel =  PreDefinedAction 
                | SenderDefinedAction 
SenderDefinedAction = *Token 
PreDefinedAction =  ôRejectCallö 
                     | ôForwardCallToö ô:ö  *token 
                     | ôSendToVoiceMailö 
    
    
CallAlertResponseParameterSet = ActionLabel 
                                   
    
CallAlertErrorParameterSet =   ErrorType 
                                  ErrorMessage 
    
ErrorType = ôNoCallAlertSentö 
             | ôResponseFromOtherDeviceReceivedö 
             | ôUnknownActionö 
             | ôActionNotAllowedö 
             | ôCallErrorö 
    
ErrorMessage = *Token 
    
GetCallLogParameterSet = SubscriberNumber 
                            Direction 
                           [NumberOfCalls]    
    
    
SubscriberNumber = (ôSubscriberNumberö | ôsnö) ô:ö *token 
Direction = (ôDirectionö | ôDö) ô:ö DirectionString 
DirectionString = (ôIncomingö | ôIö) |(ôOutgoingö | ôOö) | (ôbothö | ôbö) 
NumberOfCalls = Integer 
    
ClearCallLogParameterSet =  SubscriberNumber 
                               Direction 
    
    
SubscriberNumber = (ôSubscriberNumberö | ôsnö) ô:ö  *token 
Direction = (ôDirectionö | ôDö) ô:ö DirectionString 
DirectionString = (ôIncomingö | ôIö) |(ôOutgoingö | ôOö) | (ôbothö | ôbö) 
    
CallLogParameterSet = SubscriberNumber 
                         * (Direction 
                            CallLogReport) 
    
    
SubscriberNumber = (ôSubscriberNumberö | ôsnö) ô:ö  *token 
Direction = (ôDirectionö | ôDö) ô:ö DirectionString 
DirectionString = (ôIncomingö | ôIö) |(ôOutgoingö | ôOö) | (ôbothö | ôbö) 
 
CallLogReport = *token| url 
    
SetSubscriberServiceParameterSet =   SubscriberNumber 
                                        ServiceName 
                                        ServiceInfo 
    
SubscriberNumber = (ôSubscriberNumberö | ôsnö) ô:ö *token 
ServiceName = (ôServiceNameö | ôsvnö) ô:ö *token 
ServiceInfo = (ôServiceInfoö | ôsviö) ô:ö *token 
    
QuerySubscriberServiceParameterSet =   SubscriberNumber 
                                         [ *ServiceName ] 
    
                                           
    
SubscriberNumber = (ôSubscriberNumberö | ôsnö) ô:ö *token 
ServiceName = (ôServiceNameö | ôsvnö) ô:ö *token 
    
SubscriberServiceStatusParameterSet =   SubscriberNumber 
                                         *[ServiceName 
                                           ServiceInfo] 
                                       
SubscriberNumber = (ôSubscriberNumberö | ôsnö) ô:ö *token 
ServiceName = (ôServiceNameö | ôsvnö) ô:ö *token 
ServiceInfo = (ôServiceInfoö | ôsviö) ô:ö *token 
    
VoiceMailBoxQueryParameterSet = SubscriberNumber 
    
SubscriberNumber = (ôSubscriberNumberö | ôsnö) ô:ö *token 
    
    
VoiceMailBoxResponseParameterSet = SubscriberNumber 
                                      NumberOfVoiceMails 
                                    *[VoiceMailRecord] 
    
SubscriberNumber = (ôSubscriberNumberö | ôsnö) ô:ö *token 
NumberofVoiceMails = (ôNumberOfVoiceMailsö | ônvö) ô:ö *Digit 
VoiceMailRecord = VoiceMailID 
                     CallingNumber 
                     DateAndTime 
                     Duration 
                     ReadTag 
                    [Urgency] 
    
VoiceMailID = (ôVoiceMailIDö | ôvmiö) ô:ö *token  
CallingNumber = (ôCallingNumberö | ôcnö) ô:ö *token 
DateAndTime = (ôDateAndTimeö | ôdö) ô:ö Date Time; see BookConferenceCall 
 
Duration = (ôDuration ö | ôduö) ô:ö *digit 
ReadTag = (ôReadTagö | ôrö) ô:ö (ôyö | ônö) 
Urgency = (ôUrgencyö | ôuö) ô:ö *token 
    
    
VoiceMailRequestParameterSet = SubscriberNumber 
                                      VoiceMailID 
                                      RequestType 
    
SubscriberNumber = (ôSubscriberNumberö | ôsnö) ô:ö *token 
VoiceMailID = (ôVoiceMailIDö | ôvmiö) ô:ö *token  
RequestType = (ôRequestTypeö | ôrö) ô:ö  RetreiveRequestType 
                                          | ôDeleteö 
                                          | ForwardRequestType 
    
    
RetreiveRequestType = (ôRetrieve in formatö | ôrfö) ô:ö *token 
ForwardRequestType = (ôForward toö | ôftö) ô:ö *token 
    
    
VoiceMailResponseParameterSet =  SubscriberNumber 
                                    VoiceMailID 
                                    Format 
                                    VoiceMail 
    
SubscriberNumber = (ôSubscriberNumberö | ôsnö) ô:ö *token 
VoiceMailID = (ôVoiceMailIDö | ôvmiö) ô:ö *token  
Format = (ôFormatö | ôfö) ô:ö *token 
VoiceMail = (ôVoiceMailö | ôvö) ô:ö Vmail 
Vmail =  *token  
          | absoluteURI 
 
GeneralResponseParameterSet = ResponseType 
                                [Responsetext]   
    
ResponseType =  (ôResponseTypeö | ôrtö) ô:ö  
                  (  ôOKö 
                   | ôErrorö 
                   | ôUnexpectedMessageö 
                   | ôUnrecognisedMessageö 
                   | ôCannotServiceRequestö 
                   | *token ) 
    
ResponseText = (ôResponseTextö | ôrtxö) ô:ö *token 
                                   
    
content=\"2;URL=CreateCallConfirmationCheck?transactionID=" + 
href=\"http:XXXXXX\"</a>manually every few seconds"); 
                out.println("</body></html>"); 
    
       } else { 
                /* Generate the 'job done' page */ 
                out.println("<html> <body>"); 
                out.println("<h1>Job done - call created</h1>"); 
                out.println("</html> </body>"); 
 
ds = new DatagramSocket(7071); 
receivedMessage = HalfPintMessage.createHPMessage(new 
content=\"2\">"); 
                        out.println("<meta name=\"keywords\" 
content=\"automatic redirection\">"); 
                        out.println("</head><body>"); 
                        out.println("If your browser doesn't automatically 
href=\"http:XXXXXX\"</a>manually every few seconds"); 
                        out.println("</body></html>"); 
          } else { 
                        /* Check that the call was created successfully */ 


 
