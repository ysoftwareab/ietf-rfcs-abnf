Network Working Group                                          Y. Wang
Internet Draft                                                    Q.Wu
                                                                Huawei
Intended status: Standards Track                          July 6, 2009
Expires: January 2010



                Trace Control Support for Proxy Mobile IPv6
                  draft-wang-netext-trace-control-00.txt


Status of this Memo

   This Internet-Draft is submitted to IETF in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html

   This Internet-Draft will expire on January 6, 2009.

Copyright Notice

   Copyright (c) 2009 IETF Trust and the persons identified as the
   document authors. All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents in effect on the date of
   publication of this document (http://trustee.ietf.org/license-info).
   Please review these documents carefully, as they describe your rights
   and restrictions with respect to this document.







Wang                  Expires January 6, 2010                [Page 1]

Internet-Draft     Trace Control Support for PMIPv6          July 2009


Abstract

   In some Proxy Mobile IPv6 (PMIPv6) [RFC5213] deployments, a mobility
   session needs to be traced by the back-end network manager for
   network diagnosis, troubleshooting, new service testing, etc. This
   document defines a Trace Session option for PMIPv6 protocol to
   control and manage (activation and de-activation) a trace session
   associated with a mobility session of the mobile node. This option is
   sent by the mobile access gateway in Proxy Binding Update message to
   request the local mobile anchor to activate the trace session. When
   the local mobile anchor successfully processes the Proxy Binding
   Update, it then activates the trace session and starts to
   record/report the traced mobility session based on the corresponding
   trace parameters.

Table of Contents

   1. Introduction.................................................3
   2. Conventions used in this document............................3
   3. Protocol Overview............................................3
   4. Mobile Access Gateway Considerations.........................4
      4.1. Extensions to the Conceptual Data Structure.............4
      4.2. Signaling Consideration.................................4
   5. Local Mobile Anchor Consideration............................5
      5.1. Extensions to the Conceptual Data Structure.............5
      5.2. Signaling Consideration.................................5
   6. Message Format...............................................6
      6.1. Trace Session option....................................6
   7. Security Considerations......................................7
   8. IANA Considerations..........................................7
   9. References...................................................7
      9.1. Normative References....................................7
      9.2. Informative References..................................7
   10. Acknowledgments.............................................7














Wang                  Expires January 6, 2010                [Page 2]

Internet-Draft     Trace Control Support for PMIPv6          July 2009



1. Introduction

   In some Proxy Mobile IPv6 (PMIPv6) [RFC5213] deployments, a mobility
   session of the mobile node needs to be traced by the back-end network
   manager for network diagnosis, troubleshooting, new service testing,
   etc. If a mobility session of the mobile node is being traced, the
   MAG and the LMA should firstly activate trace session associated with
   the mobility session of the mobile node respectively and then start
   to record/report the traced mobility session based on the
   corresponding trace parameters to the back-end network manager. In
   this case, the trace session is used to configure trace parameters
   and identify the time interval through activation and de-activation
   operations. In order to synchronize starting trace session between
   the MAG and the LMA, the interaction between the MAG and the LMA is
   required. However there is no relevant works to discuss how the trace
   session is propagated from the mobile access gateway to the local
   mobile anchor.

   This document defines a new mobility option, i.e., trace session
   option. This option is used by the MAG to carry trace parameter to
   the LMA and activate the trace session associate with the mobility
   session of the mobile node.



2. Conventions used in this document

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC2119 [RFC2119].

3. Protocol Overview

   This document defines a new extension for PMIPv6 protocol to control
   and manage (activation and de-activation) a trace session associated
   with a special mobility session of the mobile node by using the Trace
   Session option.

   When the mobile node is attached to the mobile access gateway, the
   AAA server propagates the trace parameters to the mobile access
   gateway after the mobile node is successfully authenticated and
   authorized. And then the MAG stores the trace parameters in the
   mobile node's binding cache entry and activates the trace session.

   The mobile access gateway further propagates the trace parameters
   encapsulated into the Trace Session option in the Proxy Binding


Wang                  Expires January 6, 2010                [Page 3]

Internet-Draft     Trace Control Support for PMIPv6          July 2009


   Update message to the mobile node's local mobile anchor. When the
   local mobility anchor successfully processes the Proxy Binding Update
   message, it then stores the trace parameters in the mobile node's
   binding cache entry and activates the trace session.

4. Mobile Access Gateway Considerations

4.1. Extensions to the Conceptual Data Structure

   The binding update list (defined in section 6.1 of [RFC5213])
   maintained on the mobile access gateway should be extended with
   following additional fields in this document.

   O  Session Identifier, the identifier of the trace session. This
       identifier is used to identify a unique trace session of a mobile
       node and can be acquired when the trace session is activated.

   O  Trace Parameters, the parameters of the trace session. These
       parameters are acquired when the trace session is activated and
       are used to determine what and when the mobility session of the
       mobile node is recorded and reported, etc.

4.2. Signaling Consideration

   O   If the mobile access gateway determines that a mobility session
       of a mobile node needs to be traced, it sends a Proxy Binding
       Update message with the Trace Session option to the local
       mobility anchor. In the Trace Session option, following
       parameters should be set.

      -  The session identifier of the trace session to be activated.
          It is assigned by the mobile access gateway or acquired from
          policy server.

      -  The A-flag is set to 1.

      -  Trace parameters the trace session to be activated. They are
          acquired from policy server.

   O   If the mobile access gateway determines that a trace session of a
       mobile node needs to be stopped, it sends a Proxy Binding Update
       message with the Trace Session option to the local mobility
       anchor. In the Trace Session option, following parameters should
       be set.

      -  The session identifier of the trace session to be de-activated.



Wang                  Expires January 6, 2010                [Page 4]

Internet-Draft     Trace Control Support for PMIPv6          July 2009


      -  A-flag is set to 0.

5. Local Mobile Anchor Consideration

5.1. Extensions to the Conceptual Data Structure

   The binding update list (defined in section 5.1 of [RFC5213])
   maintained on the local mobile anchor should be extended with
   following additional fields in this document.

   O  Session Identifier, the identifier of the trace session. This
       identifier is used to identify a unique trace session of a mobile
       node and can be acquired when the trace session is activated and

   O  Trace Parameters, the parameters of the trace session. These
       parameters are acquired when the trace session is activated and
       are used to determine what and when the mobility session of the
       mobile node is recorded and reported, etc.

5.2. Signaling Consideration

   If the local mobility anchor successfully processes a Proxy Binding
   Update message with the Trace Session option, it must perform the
   following actions.

   O  If the A-flag is set to 1 and the session identifier is firstly
       presented, the local mobile anchor MUST store the session
       identifier and trace parameters in the corresponding BCE and
       activate the trace session of the mobility session.

   O  If the A-flag is set to 1 and the session identifier is re-
       presented (matching the session identifier in the corresponding
       BCE), the local mobile anchor MUST update trace parameters in the
       corresponding BCE and re-activate the trace session of the
       mobility session.

   O  If the A-flag is set to 0 and the session identifier matches an
       existing session identifier of the trace session, the local
       mobile anchor MUST stop the trace session of the mobility session
       and delete the session identifier and the trace parameters of the
       trace session.

   O  If the A-flag is set to 0 and the session identifier matches an
       existing session identifier of the trace session, the local
       mobile anchor MUST stop the trace session of the mobility session
       and delete the session identifier and the trace parameters of the
       trace session.


Wang                  Expires January 6, 2010                [Page 5]

Internet-Draft     Trace Control Support for PMIPv6          July 2009


   After the Proxy Binding Update message is successfully processed, the
   local mobility anchor MUST respond with a successful Proxy Binding
   Acknowledgement with the Trace Session option. The option is only
   included with the A-flag and the session identifier which are set
   with the same values in the corresponding Trace Session option of the
   Proxy Binding Update message.

6. Message Format

6.1. Trace Session option

   The Trace Session option contains a unique session identifier, a flag
   to indicate activation or de-activation of a trace session and the
   trace parameters which are configured on the MAG and the LMA to
   indication start and stop of recording the traced mobility session
   and further reporting the record information to the back-end server.

   The format of the option is:

   0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |     Type      |    Length     | Session Id    |A| Reserved    |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |   Trace Parameters ...
   +-+-+-+-+-+-+-+-+-+-+-+-+


   Type

         <IANA>

   Length

         8-bit unsigned integer, indicating the length in octets of the
         option excluding the type and length fields.

   Session Identifier

         8-bit unsigned integer, the session identifier is unique for
         each mobility session. One mobile node may have one or more
         than one session identifiers.

   A Flag

         This flag indicates that the trace session of the mobile node
         mobility session needs to be activated.  When this flag is


Wang                  Expires January 6, 2010                [Page 6]

Internet-Draft     Trace Control Support for PMIPv6          July 2009


         cleared, it means the trace session of the mobile node mobility
         session is requested to be de-activated.

   Reserved

         These fields are unused.  They MUST be initialized to zero by
         the sender and MUST be ignored by the receiver.

   Trace Parameters

         This field is variable length field. These parameters indicate
         the detailed content of the trace session, which is defined out
         of scope of this document.

7. Security Considerations

    TBD

8. IANA Considerations

   Trace Session option-type

9. References

9.1. Normative References

   [RFC2119] Bradner, S., "Key words for use in RFCs to Indicate
             Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC5213] Gundavelli, S., Leung, K., Devarapalli, V., Chowdhury, K.,
             and B. Patil, "Proxy Mobile IPv6", RFC 5213, August 2008.

9.2. Informative References



10. Acknowledgments

   Thanks to Netext members for their comments.










Wang                  Expires January 6, 2010                [Page 7]

Internet-Draft     Trace Control Support for PMIPv6          July 2009


Authors' Addresses

   Yungui Wang
   Huawei Technologies Co.,Ltd.
   Floor 10, HuiHong Mansion, No.91 BaiXia Rd.
   Nanjing, Jiangsu, 210001 P.R.China

   Email: w52006@huawei.com


   Qin Wu
   Huawei Technologies Co.,Ltd.
   Floor 12, HuiHong Mansion, No.91 BaiXia Rd.
   Nanjing, Jiangsu, 210001 P.R.China

   Email: sunseawq@huawei.com
































Wang                  Expires January 6, 2010                [Page 8]

