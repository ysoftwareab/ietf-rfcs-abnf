
Network Working Group                                     Naiming Shen
INTERNET DRAFT                                             Albert Tian
Expiration Date: October 2004                         Redback Networks
                                                           Derek Yeung
                                                      Procket Networks

                                                            April 2004


                Inter-Area IP Route Attribute in IS-IS

              <draft-shen-isis-interarea-route-attr-00.txt>


1. Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.
  
   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as ``work in progress.''
  
   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt
  
   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.


2. Abstract
   
   This document describes an extension to the IS-IS protocol to allow
   some routing attributes to be associated with advertised inter-area
   prefixes. The extension allows routers to learn this routing
   information without the knowledge of the link-state topology in
   another IS-IS level. The initial applications for this extension
   are inter-area IP MPLS fast reroute for node protection and
   inter-area TE LSPs.


3. Introduction

   An IS-IS [1][2] routing domain can be partitioned into multiple
   levels with L1/L2 border routers redistributing routes between
   levels. When routes are leaked into another level most of the
   routing or topology information is lost. However, certain 


Shen, Tian, Yeung        Expires October 2004                   [Page 1]

Internet Draft           Inter-Area Route Attr                April 2004


   applications requiring network topology information may not be
   bounded by the IGP area/level. This document proposes to add
   additional routing attributes during the inter-area route
   redistribution in inter-area prefix advertisement.

   IP fast re-route for node protection [3][4] uses the link-state
   topology information to compute alternative paths to reach
   next-nexthop IP nodes. When the nexthop node is a border router
   and the next-nexthop router resides in another IS-IS level,
   the PLR node won't have the topology information needed to 
   select an inter-area next-nexthop node for node protection.
   This IS-IS inter-area route attribute extension provides a
   mechanism for IS-IS border routers to include the required
   topology information along with intra-area prefixes. 


4. Terminology

   FRR                Fast Reroute.

   Level              IS-IS routing level, it is inter-changeable with
                      "area" in this document.

   Next-Nexthop Node  The router is the Nexthop node of PLR's Nexthop
                      node.

   PLR                Point of Local Repair. This node detects the link
                      or nexthop node failure and performs the fast
                      reroute operation.

   TE LSP             MPLS traffic engineer LSP or label switched path.


5. Inter-Area Route Attribute Sub-TLV

   This document proposes a new "Inter-Area Route Attribute"
   sub-TLV to be added to TLVs 135 and 235 [5][6]. This sub-TLV
   includes a list of "Attribute Flag" and a "Router ID". This
   sub-TLV is only used for IS-IS L1/L2 border router for advertising
   leaked IP prefixes.

   The Inter-Area Route Attribute sub-TLV has the following
   structure:

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |     Type      |   Length      |  Attr Flag 1  |  Router-ID 1  |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |    Router-ID 1 (continued)                    |  Attr Flag 2  |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   

Shen, Tian, Yeung         Expires October 2004                  [Page 2]

Internet Draft            Inter-Area Route Attr               April 2004


   |                        Router-ID 2                            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   //                                             //  Attr Flag N  |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |                        Router-ID N                            |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


   Type    An 8 bit field. The Sub-TLV code value is 4.

   Length  An 8 bit field and the value is 5 * N. N is the number
           of route attributes in the list. Each route attribute
           contains an 8-bit attribute flag and a 32-bit Router-ID.

   Attribute Flag

      This is a 8-bit field with three bits currently defined.

         0 1 2 3 4 5 6 7
        +-+-+-+-+-+-+-+-+
        |N|O|B| reserved|
        +-+-+-+-+-+-+-+-+

        Bits       Description

           N       Nexthop Bit. If set, the router advertising this
                   IP prefix with this sub-TLV uses router specified
                   in the Router-ID field as the nexthop node. 

           O       Origination Bit. If set, the router advertising this
                   IP prefix with this sub-TLV had learnt this prefix
                   from the router specified in the Router-ID field.  

           B       Non-Best Path Bit. The N bit and B bit are mutually
                   exclusive. If set, the border router advertising this
                   this sub-TLV does not consider router specified in
                   the Router-ID field to be on the IGP best path to
                   reach the IP prefix. For some applications such as
                   traffic engineering, the LSP path setup may not
                   follow the shortest path.

   Router-ID

      This is a 32-bit unsigned number representing the router which
      can be used to forward traffic towards the destination for
      the prefixes.

   The list may contain multiple (Attribute Flag, Router-ID) tuples to
   handle ECMP or non-ECMP cases.




Shen, Tian, Yeung         Expires October 2004                  [Page 3]

Internet Draft            Inter-Area Route Attr               April 2004


6. Applications

   Determination of when to advertise route attribute associated with
   an IP prefix using the proposed sub-TLV is application dependent.
   This document only describes the mechanism for node protection
   of IP fast reroute. Other applications, such as inter-area TE LSP
   setup mechanism, are beyond the scope of this document.

6.1. Inter-Area IP node protection using FRR
   
   In the IP fast reroute for node protection case, the IS-IS border
   router can be configured to advertise Inter-Area Route Attribute
   sub-TLVs along with inter-area prefixes. This can be used by the
   adjacent PLR nodes to fast reroute traffic to inter-area
   next-nexthop nodes when the IS-IS border router fails. The Router-ID
   is the TE router-id [5] advertised by the nexthop router. The
   Nexthop bit in the Attribute Flag must be set. Whether an
   inter-area prefix should include this Inter-Area Route Attribute
   sub-TLV can be determined based on local policy or on the
   administrative route tags associated with the prefix. The sub-TLV
   may contain a list of the route attributes in ECMP case.

   When the IS-IS node (PLR) adjacent to the area border router has an
   alternative path to a next-nexthop node (in another area) which does
   not go through the area border router, it can pre-build an
   alternative IP path for the prefixes and perform the node protection
   fast switchover when the area border router fails.


7. Security Considerations
   
   This document raises no new security issues.


8. Acknowledgments

   The authors would like to thank Tony Li and Acee Lindem for their
   comments to this document.


9. IANA Considerations

   The authors have chosen "4" as the type code for this sub-TLV.
   This value must be allocated by IANA.


10. Full Copyright Statement
   
   Copyright (C) The Internet Society (2002). All Rights Reserved.
   This document and translations of it may be copied and furnished to
   others, and derivative works that comment on or otherwise explain it


Shen, Tian, Yeung          Expires October 2004                 [Page 4]

Internet Draft             Inter-Area Route Attr              April 2004


   or assist in its implementation may be prepared, copied, published
   and distributed, in whole or in part, without restriction of any
   kind, provided that the above copyright notice and this paragraph are
   included on all such copies and derivative works.  However, this
   document itself may not be modified in any way, such as by removing
   the copyright notice or references to the Internet Society or other
   Internet organizations, except as needed for the  purpose of
   developing Internet standards in which case the procedures for
   copyrights defined in the Internet Standards process must be
   followed, or as required to translate it into languages other than
   English.
   
   The limited permissions granted above are perpetual and will not be
   revoked by the Internet Society or its successors or assigns.
   This document and the information contained herein is provided on an
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING 
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF 
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


11. References

   [1] "Intermediate System to Intermediate System Intra-Domain Routeing
       Exchange Protocol for use in Conjunction with the Protocol for
       Providing the Connectionless-mode Network Service (ISO 8473)",
       ISO 10589.
   
   [2] Callon, R., RFC 1195, "Use of OSI IS-IS for routing in TCP/IP and
       dual environments", RFC 1195, December 1990.

   [3]  Shen, N., Pan, P., "Nexthop Fast ReRoute for IP and MPLS",
        Internet draft, draft-shen-nhop-fastreroute-00.txt, work in
        progress.

   [4]  Smit, H., Shen, N., "Calculating IGP Routes Over Traffic
        Engineering Tunnels", draft-ietf-rtgwg-igp-shortcut-00.txt,
        Work In Progress.

   [5]  Li, T., and Smit, H., "IS-IS extensions for Traffic
        Engineering", draft-ietf-isis-traffic-05.txt, Work in Progress,
        August 2003.

   [6]  Przygienda, Shen, Sheth, "Multi Topology (MT) Routing in IS-IS",
        draft-ietf-isis-wg-multi-topology-06.txt, Work in progress.


12. Authors' Addresses

   Naiming Shen 
   Redback Networks, Inc.


Shen, Tian, Yeung         Expires October 2004                  [Page 5]

Internet Draft            Inter-Area Route Attr               April 2004


   300 Holger Way
   San Jose, CA 95134 
   Email: naiming@redback.com

   Albert Tian 
   Redback Networks, Inc.
   300 Holger Way
   San Jose, CA 95134 
   Email: tian@redback.com

   Derek M. Yeung
   Procket Networks, Inc.
   1100 Cadillac Court
   Milpitas, CA 95035 USA
   Email: myeung@procket.com






































Shen, Tian, Yeung         Expires October 2004                  [Page 6]


