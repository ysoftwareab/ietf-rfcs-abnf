


Internet                                                        A. Atlas
Internet-Draft                                              Google, Inc.
Expires: August 5, 2006                                       JR. Rivers
                                                           Nuova Systems
                                                               R. Bonica
                                                        Juniper Networks
                                                                 N. Shen
                                                                 E. Chen
                                                           Cisco Systems
                                                           February 2006


               ICMP Extensions for Unnumbered Interfaces
                     draft-atlas-icmp-unnumbered-01

Status of this Memo

   By submitting this Internet-Draft, each author represents that any
   applicable patent or other IPR claims of which he or she is aware
   have been or will be disclosed, and any of which he or she becomes
   aware will be disclosed, in accordance with Section 6 of BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on August 5, 2006.

Copyright Notice

   Copyright (C) The Internet Society (2006).

Abstract

   This memo defines extensions to ICMP that permit identification of
   unnumbered interfaces.  The interface the triggering IPv4 packet was



Atlas, et al.            Expires August 5, 2006                 [Page 1]

Internet-Draft               ICMP Unnumbered               February 2006


   received upon can be identified by appending an ifIndex and/or a
   string describing the interface.  These extensions are defined to
   facilitate troubleshooting in network with unnumbered interfaces.
   Additionally, to facilitate debugging of numbered interfaces, the
   IPv4 address of the interface the triggering IPv4 packet was received
   upon can be identified by appending the IPv4 address.


Table of Contents

   1.  Conventions Used In This Document . . . . . . . . . . . . . . . 3
   2.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . . . 3
   3.  Application to TRACEROUTE . . . . . . . . . . . . . . . . . . . 4
   4.  Interface ID Object . . . . . . . . . . . . . . . . . . . . . . 4
   5.  Interface Description Object  . . . . . . . . . . . . . . . . . 5
   6.  Security Considerations . . . . . . . . . . . . . . . . . . . . 6
   7.  IANA Considerations . . . . . . . . . . . . . . . . . . . . . . 6
   8.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . . . 6
   9.  References  . . . . . . . . . . . . . . . . . . . . . . . . . . 6
     9.1.  Normative References  . . . . . . . . . . . . . . . . . . . 6
     9.2.  Informative References  . . . . . . . . . . . . . . . . . . 7
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . . . 8
   Intellectual Property and Copyright Statements  . . . . . . . . . . 9




























Atlas, et al.            Expires August 5, 2006                 [Page 2]

Internet-Draft               ICMP Unnumbered               February 2006


1.   Conventions Used In This Document

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC2119 [RFC2119].


2.  Introduction

   IP routers use the Internet Control Message Protocol (ICMP) [RFC0792]
   to convey control information to source hosts.  Network operators use
   this information to diagnose routing problems.

   When a router generates an ICMP message, the source IP address, as
   specified in RFC1812 [RFC1812], MUST be either one of the IP
   addresses associated with the transmitting interface or, for
   unnumbered interfaces, the router's router-id.  When the transmitting
   interface is the same as the incoming interface of the packet that
   triggered the ICMP message and that interface is numbered, this
   allows easy identification of specific interface and is very useful
   for troubleshooting connectivity issues.  The transmitting and
   incoming interfaces may be different due to an asymmetric return
   path, which can occur due to asymmetric link costs or ECMP.  This
   specification provides an extension so that the IPv4 address of the
   incoming interface can be explicitly reported.

   When a network uses unnumbered interfaces and parallel links, it is
   not currently possible to identify the specific incoming interface of
   a packet based upon the responding ICMP message.  This memo defines
   two additional extensions to ICMP that permit an operator to identify
   the specific incoming interface traversed by a packet that triggered
   an ICMP message.

   These two extensions are motivated by the desire for similar
   information to that for numbered interfaces.  In the case of
   traceroute, the ICMP message contains the interfaces's IP address;
   then that IP address is commonly resolved via DNS to provide a
   meaningful name for the interface that is easier for humans.  One
   extension permits a router to include the interface's ifIndex; this
   can be used in combination with the source IP address for management
   tasks.  The second extension permits a router to include an interface
   description string.

   The inclusion of an interface description may also be useful for
   numbered interfaces that use a private IP address that DNS cannot
   resolve for supported users of traceroute and other ICMP message
   triggers.




Atlas, et al.            Expires August 5, 2006                 [Page 3]

Internet-Draft               ICMP Unnumbered               February 2006


   The ICMP message MUST include the IP header and leading payload
   octets of the original datagram.  As described in [I-D.bonica-
   internet-icmp], an ICMP Extension Structure Header MUST follow the
   octets from the original datagram and come before any ICMP Extension
   Objects.


3.  Application to TRACEROUTE

   ICMP extensions defined in this memo support enhancements to
   TRACEROUTE (the reasons are discussed in [I-D.bonica-internet-icmp]).
   The enhanced TRACEROUTE application, like older implementations,
   indicates which nodes the original datagram visited en route to its
   destination.  It differs from older implementations in that it also
   reflects the incoming interface on which the original triggering
   packet arrived, even when that interface is unnumbered.


4.  Interface ID Object

   This section defines an ICMP extension object that can be appended to
   the ICMP Time Exceeded and Destination Unreachable messages.  An
   Interface ID Object of c-type 1 can be appended to these messages.
   The incoming interface is the one upon which the packet which
   triggered the ICMP message was received.  If the incoming interface
   is unnumbered, then an Interface ID Object of c-type 1 SHOULD be
   included in the ICMP Time Exceeded or Destination Unreachable
   message.  If the incoming interface has an IPv4 address, then an
   Interface ID Object of c-type 1 MAY be included in the ICMP Time
   Exceeded and Destination Unreachable messages; additionally, one or
   Interface ID Objects of c-type 2 MAY be included in those messages.

   Figure 1 depicts the Interface ID Object.  It must be preceded by an
   ICMP Extension Structure Header and an ICMP Object Header.  Both are
   defined in [I-D.bonica-internet-icmp].  The ifIndex included is that
   assigned to the interface by the router in as specified by the
   Interfaces Group MIB [RFC2863].


             Class-Num = 2,
             C-Type = 1  (Specifies ifIndex of incoming interface)
             Length = 8

             0             1             2            3
     +-------------+-------------+-------------+-------------+
     |                Interface ifIndex                      |
     +-------------+-------------+-------------+-------------+




Atlas, et al.            Expires August 5, 2006                 [Page 4]

Internet-Draft               ICMP Unnumbered               February 2006


   Figure 1: Interface ID Object - ifIndex



        Class-Num = 2,
        C-Type = 2
             Specifies an IPv4 address of the incoming interface.
        Length = 8

             0             1             2            3
     +-------------+-------------+-------------+-------------+
     |        an IPv4 address of the incoming interface      |
     +-------------+-------------+-------------+-------------+

   Figure 2: Interface ID Object - IPv4 address


5.  Interface Description Object

   This section defines an ICMP extention object that can be appended to
   the ICMP Time Exceeded and Destination Unreachable messages.  An
   Interface Description Object with c-type 1 or 2 can be appended to
   these messages.  If the incoming interface is unnumbered, then an
   Interface ID Object of C-type 1 MAY be included in the ICMP Time
   Exceeded message and Destination Unreachable messages.

   Figure 3 depicts the Interface Description Object.  It must be
   preceded by an ICMP Extension Structure Header and an ICMP Object
   Header.  Both are defined in [I-D.bonica-internet-icmp].


        Interface Class-Num = 3,
          C-Type = 1 or 2

                  0             1             2            3
          +-------------+-------------+-------------+-------------+
          |              Interface Description                    |
          +-------------+-------------+-------------+-------------+
          //            Interface Description, continued         //
          +-------------+-------------+-------------+-------------+
          |              Interface Description, continued         |
          +-------------+-------------+-------------+-------------+

   Figure 3: Interface Description Object

   C-Type 1: This contains the description of the incoming interface.
   Human-readable text for this c-type MUST be provided in the US-ASCII
   charset [US-ASCII] using the Default Language [RFC2277].



Atlas, et al.            Expires August 5, 2006                 [Page 5]

Internet-Draft               ICMP Unnumbered               February 2006


   C-Type 2: This contains the description of the incoming interface.
   Human-readable text for this c-type MUST be provided in the UTF-8
   charset [RFC3629] using the Default Language [RFC2277].

   Interface Description: This field MUST have a length that is a
   multiple of 4 bytes; the string should be padded with zeroes as
   necessary.  The description SHOULD be the MIB-II ifName [RFC2863] but
   MAY be some other human-meaningful description of the interface.


6.  Security Considerations

   These extensions can provide the user of traceroute with additional
   network information that is not currently available.  It may be
   desirable to provide this information to a particular network's
   operators and not to others.  If such policy controls are desirable,
   then an implementation could determine what extensions to include
   based upon the destination IP address of the ICMP message.  For
   instance, the ifIndex might be appropriate for all potential
   recipients; the description could be included as well if the
   destination IP address is a management address of the network that
   has administrative control of the router.


7.  IANA Considerations

   IANA should should reserve from the ICMP Extension Object registry: 2
   for the Interface ID Object and 3 for the Interface Description
   Object.  IANA should reserve from the Interface ID Object's c-type
   the value 1 for Incoming Interface ifIndex and the value 2 for the
   Incoming Interface IPv4 address.  IANA should reserve from the
   Interface Description Object's c-type the value 1 for the incoming
   interface description in ASCII and the value 2 for the incoming
   interface description in UTF-8.


8.  Acknowledgements

   The authors would like to thank Carlos Pignataro and Sasha Vainshtein
   for their comments and suggestions.


9.  References

9.1.  Normative References

   [I-D.bonica-internet-icmp]
              Bonica, R., "Extending the Internet Control Message



Atlas, et al.            Expires August 5, 2006                 [Page 6]

Internet-Draft               ICMP Unnumbered               February 2006


              Protocol (ICMP)", draft-bonica-internet-icmp-01 (work in
              progress), January 2006.

   [RFC0792]  Postel, J., "Internet Control Message Protocol", STD 5,
              RFC 792, September 1981.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC2863]  McCloghrie, K. and F. Kastenholz, "The Interfaces Group
              MIB", RFC 2863, June 2000.

9.2.  Informative References

   [RFC1812]  Baker, F., "Requirements for IP Version 4 Routers",
              RFC 1812, June 1995.

   [RFC2277]  Alvestrand, H., "IETF Policy on Character Sets and
              Languages", BCP 18, RFC 2277, January 1998.

   [RFC3629]  Yergeau, F., "UTF-8, a transformation format of ISO
              10646", STD 63, RFC 3629, November 2003.

   [US-ASCII]
              "Coded Character Set -- 7-bit American Standard Code for
              Information Interchange, ANSI X3.4-1986".

























Atlas, et al.            Expires August 5, 2006                 [Page 7]

Internet-Draft               ICMP Unnumbered               February 2006


Authors' Addresses

   Alia K. Atlas
   Google, Inc.
   1600 Amphitheatre Parkway
   Mountain View, CA  94043
   USA

   Email: akatlas@google.com


   J.R. Rivers
   Nuova Systems

   Email: jrrivers@nuovasystems.com


   Ronald P. Bonica
   Juniper Networks
   2251 Corporate Park Drive
   Herndon, VA  20171
   USA

   Email: rbonica@juniper.net


   Naiming Shen
   Cisco Systems
   225 West Tasman Drive
   San Jose, CA  95134
   USA

   Email: naiming@cisco.com


   Enke Chen
   Cisco Systems
   170 West Tasman Drive
   San Jose, CA  95134
   USA

   Email: enkechen@cisco.com









Atlas, et al.            Expires August 5, 2006                 [Page 8]

Internet-Draft               ICMP Unnumbered               February 2006


Intellectual Property Statement

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in BCP 78 and BCP 79.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   http://www.ietf.org/ipr.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.


Disclaimer of Validity

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET
   ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Copyright Statement

   Copyright (C) The Internet Society (2006).  This document is subject
   to the rights, licenses and restrictions contained in BCP 78, and
   except as set forth therein, the authors retain all their rights.


Acknowledgment

   Funding for the RFC Editor function is currently provided by the
   Internet Society.




Atlas, et al.            Expires August 5, 2006                 [Page 9]


