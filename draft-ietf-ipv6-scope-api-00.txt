IPv6 Working Group                                         R.E. Gilligan
INTERNET-DRAFT: draft-ietf-ipv6-scope-api-00.txt              Cache Flow
                                                              S. Thomson
                                                                   Cisco
                                                                J. Bound
                                                               J. McCann
                                                         Hewlett-Packard
                                                           W. R. Stevens
                                                               July 2002






        Scoped Address Extensions to the IPv6 Basic Socket API

                   <draft-ietf-ipv6-scope-api-00.txt>


Status of this Memo

   This document is an Internet-Draft and is in full conformance with
   all provisions of Section 10 of RFC2026.

   This document is a submission by the Internet Protocol IPv6 Working
   Group of the Internet Engineering Task Force (IETF).  Comments should
   be submitted to the ipng@sunroof.eng.sun.com mailing list.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as Internet-
   Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet- Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.


Abstract

   This document specifies a set of extensions to the basic IPv6 sockets
   API for the support of scoped addresses.











draft-ietf-ipv6-scope-api-00.txt    Expires January 2003        [Page 1]


INTERNET-DRAFT      draft-ietf-ipv6-scope-api-00.txt           July 2002


Table of Contents:


   1. Introduction.................................................3
   2. API Extensions...............................................3
   2.1. sin6_scope_id..............................................3
   2.2. getaddrinfo()..............................................3
   2.3. getnameinfo()..............................................3
   3. Summary of New Definitions...................................4
   4. Security Considerations......................................4
   5. IANA Considerations..........................................4
   Acknowledgments.................................................4
   References......................................................4
   Authors' Addresses..............................................4














































draft-ietf-ipv6-scope-api-00.txt    Expires January 2003        [Page 2]


INTERNET-DRAFT      draft-ietf-ipv6-scope-api-00.txt           July 2002


1. Introduction

   This document specifies a set of extensions to the basic IPv6 sockets
   API for the support of scoped addresses.

   The material contained in this document was originally specified in
   [BASIC-API], causing [SCOPE-ARCH] to be a normative reference for
   [BASIC-API].  To allow [BASIC-API] to proceed independently of
   [SCOPE-ARCH], the relevant material was removed from [BASIC-API] and
   moved to this document.



2. API Extensions



2.1. sin6_scope_id

   The definition of the sin6_scope_id is extended as follows:

   - The sin6_scope_id field of the sockaddr_in6 structure contains
     a zone index [SCOPE-ARCH] as appropriate for the scope of the
     address carried in the sin6_addr field.  For a link scope
     sin6_addr, sin6_scope_id would contain a link index.  For a
     site scope sin6_addr, sin6_scope_id would contain a site index.
     The value zero in the sin6_scope_id field represents a default
     zone.



2.2. getaddrinfo()

   The definition of the getaddrinfo() function is extended as follows:

   - If the specified address family is AF_INET6 or AF_UNSPEC, the
     nodename argument may use the format defined for textual
     representation of scoped IPv6 addresses [SCOPE-ARCH].



2.3. getnameinfo()

   The definition of the getnameinfo() function is extended as follows:

   - When the numeric form of a node's address is returned, if the
     sa argument is an IPv6 address, the returned nodename may use
     the format defined for textual representation of scoped IPv6
     addresses [SCOPE-ARCH].

   - If the flag bit NI_NUMERICSCOPE is set in the flags argument
     of getnameinfo(), the numeric form of the scope identifier shall
     be returned (for example, link index) instead of its name.
     This flag is ignored if the sa argument is not an IPv6 address.
     The NI_NUMERICSCOPE flag is defined in <netdb.h>.





draft-ietf-ipv6-scope-api-00.txt    Expires January 2003        [Page 3]


INTERNET-DRAFT      draft-ietf-ipv6-scope-api-00.txt           July 2002


3. Summary of New Definitions

   The following list summarizes the constants, structure, and extern
   definitions discussed in this memo, sorted by header.

      <netdb.h>       NI_NUMERICSCOPE



4. Security Considerations

   None.



5. IANA Considerations

   None.



Acknowledgments

   This document contains material originally specified in [BASIC-API].
   The authors of and all contributors to that document are gratefully
   acknowledged.



References

   [BASIC-API]  Gilligan, R., et al. "Basic Socket Interface Extensions
                for IPv6", Work in Progress

   [SCOPE-ARCH] Deering, S., et al. "IPv6 Scoped Address Architecture",
                Work in Progress



Authors' Addresses


   Bob Gilligan
   Cacheflow, Inc.
   650 Almanor Ave.
   Sunnyvale, CA 94086
   Telephone: 408-220-2084 (voice)
              408-220-2250 (fax)
   Email: gilligan@cacheflow.com

   Susan Thomson
   Cisco Systems
   499 Thornall Street, 8th floor
   Edison, NJ 08837
   Telephone: 732-635-3086
   Email:  sethomso@cisco.com




draft-ietf-ipv6-scope-api-00.txt    Expires January 2003        [Page 4]


INTERNET-DRAFT      draft-ietf-ipv6-scope-api-00.txt           July 2002


   Jim Bound
   Hewlett-Packard Company
   110 Spitbrook Road ZKO3-3/W20
   Nashua, NH 03062
   Telephone: 603-884-0062
   Email: Jim.Bound@hp.com

   Jack McCann
   Hewlett-Packard Company
   110 Spitbrook Road ZKO3-3/W20
   Nashua, NH 03062
   Telephone: 603-884-2608
   Email: Jack.McCann@hp.com















































draft-ietf-ipv6-scope-api-00.txt    Expires January 2003        [Page 5]

