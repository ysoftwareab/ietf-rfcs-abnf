<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Registration for Multiple Phone Numbers in the Session Initiation Protocol (SIP)</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Registration for Multiple Phone Numbers in the Session Initiation Protocol (SIP)">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">MARTINI WG</td><td class="header">A. Roach</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Tekelec</td></tr>
<tr><td class="header">Intended status: Standards Track</td><td class="header">April 20, 2010</td></tr>
<tr><td class="header">Expires: October 22, 2010</td><td class="header">&nbsp;</td></tr>
</table></td></tr></table>
<h1><br />Registration for Multiple Phone Numbers in the Session Initiation Protocol (SIP)<br />draft-ietf-martini-gin-01</h1>

<h3>Abstract</h3>

<p>
      This document defines a mechanism by which a SIP server
      acting as a traditional Private Branch Exchange (PBX)
      can register with a SIP Service Provider (SSP) to receive
      phone calls for terminals designated by phone numbers.
      In order to function properly, this mechanism relies on
      the fact that the phone numbers are fully qualified and
      globally unique.
    
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on October 22, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#anchor1">1.</a>&nbsp;
Introduction<br />
<a href="#constraints">2.</a>&nbsp;
Constraints<br />
<a href="#anchor2">3.</a>&nbsp;
Terminology<br />
<a href="#anchor3">4.</a>&nbsp;
Mechanism Overview<br />
<a href="#anchor4">5.</a>&nbsp;
Registering for Multiple Phone Numbers<br />
<a href="#ssp-processing">6.</a>&nbsp;
SSP Processing of Inbound Phone Number Requests<br />
<a href="#anchor5">7.</a>&nbsp;
Interaction with Other Mechanisms<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#gruu">7.1.</a>&nbsp;
Globally Routable User-Agent URIs (GRUU)<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">7.1.1.</a>&nbsp;
Public GRUUs<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor7">7.1.2.</a>&nbsp;
Temporary GRUUs<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">7.2.</a>&nbsp;
Registration Event Package<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#pbx-reg-event">7.2.1.</a>&nbsp;
PBX Aggregate Registration State<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#reg-terminal">7.2.2.</a>&nbsp;
Individual Phone Number Registration State<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor10">7.3.</a>&nbsp;
Client-Initiated (Outbound) Connections<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor11">7.4.</a>&nbsp;
Non-Adjacent Contact Registration (Path) and Service Route Discovery<br />
<a href="#anchor12">8.</a>&nbsp;
Examples<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor13">8.1.</a>&nbsp;
Usage Scenario: Basic Registration<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor14">8.2.</a>&nbsp;
Usage Scenario: Using Path to Control Request URI<br />
<a href="#anchor15">9.</a>&nbsp;
Requirements Analysis<br />
<a href="#anchor16">10.</a>&nbsp;
IANA Considerations<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor17">10.1.</a>&nbsp;
New SIP Option Tag<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor18">10.2.</a>&nbsp;
New SIP URI Parameters<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor19">10.2.1.</a>&nbsp;
'bnc' SIP URI paramter<br />
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor20">10.2.2.</a>&nbsp;
'sg' SIP URI paramter<br />
<a href="#anchor21">11.</a>&nbsp;
Security Considerations<br />
<a href="#anchor22">12.</a>&nbsp;
Acknowledgements<br />
<a href="#rfc.references1">13.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">13.1.</a>&nbsp;
Normative References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">13.2.</a>&nbsp;
Informative References<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Author's Address<br />
</p>
<br clear="all" />

<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
      One of SIP's primary functions is providing rendezvous between
      users. By design, this rendezvous has been provided through
      a combination of the server look-up procedures defined in
      RFC 3263 <a class='info' href='#RFC3263'>[3]<span> (</span><span class='info'>Rosenberg, J. and H. Schulzrinne, &ldquo;Session Initiation Protocol (SIP): Locating SIP Servers,&rdquo; June&nbsp;2002.</span><span>)</span></a>, and the registrar procedures
      described in RFC 3261 <a class='info' href='#RFC3261'>[2]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a>.
    
</p>
<p>
      The intention of the original protocol design was that any user's
      AOR would be handled by the authority indicated by the hostport
      portion of the AOR. The users registered individual reachability
      information with this authority, which would then route
      incoming requests accordingly.
    
</p>
<p>
      In actual deployments, some SIP servers have been deployed
      in architectures that, for various reasons, have
      requirements to provide dynamic routing information
      for large blocks of AORs, where all of the AORs in
      the block were to be handled by the same server. For
      purposes of efficiency, many of these deployments do
      not wish to maintain separate registrations for each of
      the AORs in the block. This leads to the desire for an
      alternate mechanism for providing dynamic routing
      information for blocks of AORs.
    
</p>
<p>
      Although the use of REGISTER to update reachability
      information for multiple users simultaneously is somewhat
      beyond the original semantics defined for REGISTER, this
      approach has seen significant deployment in certain
      environments. In particular, deployments in which small
      to medium SIP PBX servers are addressed using E.164 numbers
      have used this mechanism to avoid the need to maintain
      DNS entries or static IP addresses for the PBX servers.
    
</p>
<p>
      In recognition of the momentum that REGISTER-based
      approaches have seen in deployments,
      this document defines a REGISTER-based approach that is
      tailored to E.164-addressed terminals in a SIP PBX
      environment. It does not address
      registration of SIP URIs in which the user portion
      is not an E.164 number.
    
</p>
<a name="constraints"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Constraints</h3>

<p>
      The following paragraph is perhaps the most important
      in understanding the solution defined in this document.
    
</p>
<p>
      Within the problem space that has been established for
      this work, several constraints shape our solution. These
      are being defined in the MARTINI requirements document
      <a class='info' href='#I-D.ietf-martini-reqs'>[5]<span> (</span><span class='info'>Elwell, J. and H. Kaplan, &ldquo;Requirements for multiple address of record (AOR) reachability information in the Session Initiation Protocol (SIP),&rdquo; March&nbsp;2010.</span><span>)</span></a>.
      In terms of impact to the solution at hand, the following
      two constraints have the most profound effect:
      (1) The PBX cannot be assumed to be assigned a static
          IP address; and 
      (2) No DNS entry can be relied upon to consistently resolve
          to the IP address of the PBX.
    
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Terminology</h3>

<p> The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL
    NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL"
    in this document are to be interpreted as described in RFC 2119
    <a class='info' href='#RFC2119'>[1]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
</p>
<p>Further, the term "SSP" is meant as an acronym for a "SIP Service
    Provider," while the term "PBX" is used to indicate a SIP Private
    Branch Exchange.
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Mechanism Overview</h3>

<p>
      The overall mechanism is achieved using a REGISTER
      request with a specially-formatted Contact URI.
      This document also defines an option tag that can be used to
      ensure a registrar and any intermediaries understand the
      mechanism described herein.
    
</p>
<p>
      The Contact URI itself is tagged with a URI parameter
      to indicate that it actually represents a multitude of
      phone-number-associated contacts.
    
</p>
<p>
      We also define some lightweight extensions for Globally Routable
      UA URIs (GRUU) to
      allow the use of public and temporary GRUUs assigned by
      the SSP. 
    
</p>
<p>
      Aside from these extensions, the REGISTER message itself
      is processed by a registrar in the same way as normal
      registrations: by updating its location service with
      additional AOR to Contact bindings.
    
</p>
<p>
      Note that the list of phone numbers associated with a
      PBX is a matter of local provisioning at the SSP and
      at the PBX. The mechanism defined in this document
      does not provide any means to detect or recover from
      provisioning mismatches (although the registration
      event package can be used as a standardized means
      for auditing such phone numbers;
      see <a class='info' href='#pbx-reg-event'>Section&nbsp;7.2.1<span> (</span><span class='info'>PBX Aggregate Registration State</span><span>)</span></a>).
    
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Registering for Multiple Phone Numbers</h3>

<p>
      To register for multiple phone numbers, the PBX sends
      a REGISTER message to the SSP. This REGISTER varies
      from a typical register in two important ways. First,
      it must contain an option tag of "gin"
      in both a "Require" header field and a "Proxy-Require"
      header field.  (The option tag "gin" is an acronym for
      "generate implicit numbers".)
      Second, in at least 
      one "Contact" header field, it must include a Contact
      URI that contains the URI parameter "bnc", and no user
      portion (hence no "@" symbol).
      A URI with a "bnc" parameter MUST NOT contain a
      user portion.
    
</p>
<p>
      Because of the constraints
      discussed in <a class='info' href='#constraints'>Section&nbsp;2<span> (</span><span class='info'>Constraints</span><span>)</span></a>, the host
      portion of the Contact URI will generally contain
      an IP address, although nothing in this mechanism
      enforces or relies upon that fact. If the PBX operator
      chooses to maintain DNS entries that resolve to the
      IP address of his PBX via RFC 3263 resolution procedures,
      then this mechanism works just fine with domain names
      in the Contact header field.
    
</p>
<p>
      The URI parameter indicates that special interpretation
      of the Contact URI is necessary: instead of representing
      a single, concrete Contact URI to be inserted into the
      location service, it represents a multitude of Contact
      URIs (one for each associated phone number), semantically
      resulting in a multitude of AOR-to-Contact rows in the
      location service.
    
</p>
<p>
      The registrar, upon receipt of a REGISTER message in the
      foregoing form, will use the value in the "To" header field
      to identify the PBX for which registration is being requested.
      It then authenticates the PBX (using, e.g., SIP Digest
      authentication, mutual TLS, or some other authentication
      mechanism).  After the PBX is authenticated, the registrar
      updates its location service with a unique AOR to Contact
      mapping for each of the phone numbers associated with the
      PBX.  Semantically, each of these mappings will be treated
      as a unique row in the location service.  The actual
      implementation may, of course, perform internal optimizations
      to reduce the amount of memory used to store
      such information.
    
</p>
<p>
      For each of these unique rows, the AOR will be in the format
      that the SSP expects to receive from external parties (e.g.
      "sip:+12145550102@ssp.example.com"), and the corresponding
      Contact will be formed by adding to the REGISTER's Contact
      URI a user portion containing the fully-qualified, E.164-formatted
      phone number (including the preceding "+" symbol) and removing
      the "bnc" parameter. Aside from the initial "+" symbol, this
      E.164-formatted number MUST consist exclusively of digits
      from 0 through 9, and explicitly MUST NOT contain any visual
      separator symbols (e.g., "-", ".", "(", or ")").  For
      example, if the "Contact" header field contains the URI
      &lt;sip:198.51.100.3:5060;user=phone;bnc>, then the Contact
      value
      associated with the aforementioned AOR will be
      &lt;sip:+12145550102@198.51.100.3:5060;user=phone>.
    
</p>
<p>
      Aside from the "bnc" parameter, all URI parameters present
      on the "Contact" URI in the REGISTER message MUST be copied
      to the Contact value stored in the location service.
    
</p>
<p>
      Although the SSP treats this registration as a number of
      discrete rows for the purpose of re-targeting incoming requests,
      the renewal, expiration, and removal of these rows is bound
      to the registered "bnc" contact. In particular, this means
      that REGISTER requests that attempt to de-register a single
      phone number that has been implicitly registered MUST NOT
      remove that phone number from the bulk registration.  A further
      implication of this property is that an individual extension
      that is implicitly registered may also be explicitly registered
      using a normal, non-bulk registration (subject to SSP policy).
      If such a registration exists, it is refreshed independently
      of the bulk registration, and is not removed when the bulk
      registration is removed.
    
</p>
<p>
      Although it is not a special case from a protocol perspective,
      implementors are reminded that this behavior includes any
      "user" parameter on the URI. For example, if the registering
      PBX requires incoming messages to include a "user=phone"
      parameter on their Request-URI, it will include "user=phone"
      on the URI in the "Contact" header field of its registration.
      Because of the requirement on the SSP to copy parameters into
      the location service, it will appear on any Request-URIs that
      are re-targeted to the PBX based on that registration. Conversely,
      if the registering PBX does not include a "user=phone"
      parameter, any SSP using the procedures defined in this
      document would not be at liberty to include one on the
      Request-URI.
    
</p>
<p>
      Any PBX implementing the registration mechanism defined in
      this document MUST also support the Path mechanism defined
      by RFC 3327 <a class='info' href='#RFC3327'>[6]<span> (</span><span class='info'>Willis, D. and B. Hoeneisen, &ldquo;Session Initiation Protocol (SIP) Extension Header Field for Registering Non-Adjacent Contacts,&rdquo; December&nbsp;2002.</span><span>)</span></a>, and MUST include a
      'path' option-tag in the Supported header field of the REGISTER
      request (which is a stronger requirement than imposed by the
      Path mechanism itself).  This behavior is necessary because
      proxies between the PBX and the Registrar may need to insert
      Path header field values in the REGISTER request for this
      document's mechanism to function properly, and per RFC 3327
      <a class='info' href='#RFC3327'>[6]<span> (</span><span class='info'>Willis, D. and B. Hoeneisen, &ldquo;Session Initiation Protocol (SIP) Extension Header Field for Registering Non-Adjacent Contacts,&rdquo; December&nbsp;2002.</span><span>)</span></a>, they can only do so if the UAC
      inserted the option-tag in the Supported header field.  In
      accordance with the procedures defined in RFC 3327 <a class='info' href='#RFC3327'>[6]<span> (</span><span class='info'>Willis, D. and B. Hoeneisen, &ldquo;Session Initiation Protocol (SIP) Extension Header Field for Registering Non-Adjacent Contacts,&rdquo; December&nbsp;2002.</span><span>)</span></a>, the PBX is allowed to ignore the Path
      header fields returned in the REGISTER response.
    
</p>
<p>
      A Registrar compliant with this document MUST support the
      Path mechanism defined in RFC 3327 <a class='info' href='#RFC3327'>[6]<span> (</span><span class='info'>Willis, D. and B. Hoeneisen, &ldquo;Session Initiation Protocol (SIP) Extension Header Field for Registering Non-Adjacent Contacts,&rdquo; December&nbsp;2002.</span><span>)</span></a>.
    
</p>
<a name="ssp-processing"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
SSP Processing of Inbound Phone Number Requests</h3>

<p>
      In general, after processing the AOR to Contact mapping
      described in the preceding section, the SSP Proxy/Registrar
      (or equivalent entity) performs traditional Proxy/Registrar
      behavior, based on the mapping.  For any inbound SIP requests
      whose AOR indicates an E.164 number assigned to one of
      the SSP's customers, this will generally involve
      setting the target set to the registered contacts
      associated with that AOR, and performing
      request forwarding as described in section 16.6 of
      RFC 3261 <a class='info' href='#RFC3261'>[2]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a>. An SSP using the mechanism
      defined in this document MUST perform
      such processing for inbound INVITE requests and SUBSCRIBE requests
      to the "reg" event package (see <a class='info' href='#reg-terminal'>Section&nbsp;7.2.2<span> (</span><span class='info'>Individual Phone Number Registration State</span><span>)</span></a>),
      and SHOULD perform such processing for all other method types, 
      including unrecognized SIP methods.
    
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Interaction with Other Mechanisms</h3>

<p>
      The following sections describe the means by which this mechanism
      interacts with relevant REGISTER-related extensions currently
      defined by the IETF.
    
</p>
<p>
      Currently, the descriptions are somewhat informal, and
      omit some details for the sake of brevity. If the MARTINI
      working group expresses interest in furthering the mechanism
      described by this document, they will be fleshed out with
      more detail and formality.
    
</p>
<a name="gruu"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1"></a><h3>7.1.&nbsp;
Globally Routable User-Agent URIs (GRUU)</h3>

<p>
        To enable advanced services to work with terminals
        behind a SIP PBX, it is important that the GRUU
        mechanism defined by RFC 5627 
        <a class='info' href='#RFC5627'>[10]<span> (</span><span class='info'>Rosenberg, J., &ldquo;Obtaining and Using Globally Routable User Agent URIs (GRUUs) in the Session Initiation Protocol (SIP),&rdquo; October&nbsp;2009.</span><span>)</span></a> work correctly
        with the mechanism defined by this document -- that is,
        that User Agents services by the PBX can acquire and
        use GRUUs for their own use.
      
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1.1"></a><h3>7.1.1.&nbsp;
Public GRUUs</h3>

<p>
          When a PBX registers a Bulk Number Contact (a Contact with
          a "bnc" parameter), and also invokes GRUU procedures for
          that Contact during registration, then the SSP will
          assign a public GRUU to the PBX in the normal fashion.
          Because the URI being registered contains a "bnc" parameter,
          the GRUU will also contain a "bnc" parameter. In particular,
          this means that the GRUU will not contain a user portion.
        
</p>
<p>
          When a terminal registers with the PBX using GRUU procedures
          for a Contact, the PBX adds an "sg" parameter to the GRUU
          parameter it received from the SSP. This "sg" parameter
          contains a disambiguation token that the PBX can use to
          route the request to the proper user agent.
        
</p>
<p>
          So, for example, when the PBX registers with the following
          contact header field:

          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Contact: &lt;sip:198.51.100.3;user=phone;bnc&gt;;
  +sip.instance="&lt;urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6&gt;"
</pre></div><p>


          Then the SSP may choose to respond with a Contact header field
          that looks like this:

          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;allOneLine&gt;
Contact: &lt;sip:198.51.100.3;user=phone;bnc&gt;;
pub-gruu="sip:ssp.example.com;gr=urn:
uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6";
+sip.instance="&lt;urn:uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6&gt;"
;expires=7200
&lt;/allOneLine&gt;
</pre></div><p>


          When its own terminals register, the PBX
          can then add  whatever device identifier it feels appropriate
          in an "sg" parameter, and present this value to its
          own terminals. For example, assume the terminal associated
          with the phone number "+12145550102" sent the following
          Contact header field in its register:

          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Contact: &lt;sip:line-1@10.20.1.17&gt;;
  +sip.instance="&lt;urn:uuid:d0e2f290-104b-11df-8a39-0800200c9a66&gt;"
</pre></div><p>


          The PBX will add an "sg" parameter to the pub-gruu it
          received from the SSP with a token that uniquely 
          identifies the device (possibly the URN itself; possibly
          some other identifier); insert a user portion containing
          the fully-qualified E.164 number associated with the
          terminal; and return the result to the terminal as its
          public GRUU. The resulting Contact header field would 
          look something like this:

          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;allOneLine&gt;
Contact: &lt;sip:line-1@10.20.1.17&gt;;
pub-gruu="sip:+12145550102@ssp.example.com;gr=urn:
uuid:f81d4fae-7dec-11d0-a765-00a0c91e6bf6;sg=00:05:03:5e:70:a6";
+sip.instance="&lt;urn:uuid:d0e2f290-104b-11df-8a39-0800200c9a66&gt;"
;expires=3600
&lt;/allOneLine&gt;
</pre></div><p>

        
</p>
<p>
          When an incoming request arrives at the SSP for a GRUU
          corresponding to a bulk number contact ("bnc"), the SSP
          performs slightly different processing for the GRUU than
          a Proxy/Registrar would. When the GRUU is re-targeted
          to the registered bulk number contact, the SSP MUST
          copy the "sg" parameter from the GRUU to the new target.
          The PBX can then use this "sg" parameter to determine which
          user agent the request should be routed to. For example,
          the first line of an INVITE request that has been re-targeted
          to the PBX for the terminal shown above would look like this:
          </p>
<div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;allOneLine&gt;
INVITE sip:+12145550102@198.51.100.3;gr=urn:uuid:f81d4fae-7dec-
11d0-a765-00a0c91e6bf6;sg=00:05:03:5e:70:a6 SIP/2.0
&lt;/allOneLine&gt;
</pre></div><p>

        
</p>
<a name="anchor7"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1.2"></a><h3>7.1.2.&nbsp;
Temporary GRUUs</h3>

<p>
          PBXes have two options for creating temporary GRUUs
          for use by its terminals.
        
</p>
<a name="anchor8"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1.2.1"></a><h3>7.1.2.1.&nbsp;
Approach 1 - Self Made GRUUs</h3>

<p>
            If a PBX wishes to provide temporary GRUUs for
            its terminals, it may do so by producing its own
            "Self-made GRUUs" (as defined in section 4.3 of RFC 5627
            <a class='info' href='#RFC5627'>[10]<span> (</span><span class='info'>Rosenberg, J., &ldquo;Obtaining and Using Globally Routable User Agent URIs (GRUUs) in the Session Initiation Protocol (SIP),&rdquo; October&nbsp;2009.</span><span>)</span></a>).
            These GRUUs are produced using the PBX's own IP address
            (or domain, if it maintains one in DNS). The temporary
            GRUUs are then propagated to terminals using normal
            GRUU mechanism.
          
</p>
<p>
            The ability to produce temporary GRUUs in this fashion
            is predicated on the conditions described in section
            4.3 of RFC 5627. In particular, it requires PBX to be
            publicly routable, and willing to accept requests destined
            for its own Self-made GRUUs from sources other than the
            SSP.  If these conditions cannot be satisfied (or the PBX operator
            chooses not to satisfy them for policy reasons), then the
            PBX users will not be able to make use of temporary GRUUs.
          
</p>
<p>
            This mechanism is also predicated on the IP address for the
            PBX being relatively stable over a long period of time. This
            is generally a safe assumption to make, as frequent PBX
            IP address changes will result in intermittent connectivity
            issues and interruptions to ongoing calls.
          
</p>
<p>
            On a related note: when used with this extension, the SSP 
            will not return a temporary GRUU in the registration
            response for any contacts that include a "bnc" parameter in
            their URI.
          
</p>
<p>
            For example, using the same setup as in the "Public GRUU"
            section above, a terminal registering with the PBX
            might obtain a temp gruu by receiving a Contact header
            field that looks like:
          
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;allOneLine&gt;
Contact: &lt;sip:line-1@10.20.1.17&gt;;
pub-gruu="sip:ssp.example.com;gr=urn:uuid:f81d4fae-7dec-11d0-a765-
00a0c91e6bf6;sg=a0471c99573b877b";
+sip.instance="&lt;urn:uuid:d0e2f290-104b-11df-8a39-0800200c9a66&gt;"
;expires=3600
&lt;/allOneLine&gt;
</pre></div>
<a name="anon-gruu"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.1.2.2"></a><h3>7.1.2.2.&nbsp;
Approach 2 - Anonymous Public GRUUs</h3>

<p>
            If a PBX does not satisfy the criteria for producing
            its own "Self-made GRUUs," then it may create temporary
            GRUUs based on the public GRUUs it received from the
            SSP at registration time. To create Temporary GRUUs of
            this form, the PBX will add an opaque "sg" parameter to
            the public GRUU it received from the SSP, and will
            omit the user portion.
          
</p>
<p>
            Note that, because these GRUUs are temporary GRUUs,
            a unique "sg" parameter will be generated for each
            successful registration attempt. The PBX tracks the
            various "sg" values associated with each user agent, 
            and can re-target to the correct instance when the
            request arrives.
          
</p>
<p>
            For this approach to function, the SSP must be able to
            resolve a GRUU based solely on the value of its "gr"
            parameter, as the user portion of the GRUU will not
            contain an E.164 number. Further, the SSP will not
            know which actual phone number the request is destined
            for, only that it corresponds to an phone number belonging
            to the PBX.
          
</p>
<p>
            Using the same basic setup as the example for the
            public GRUU, a terminal might receive a temporary
            GRUU by getting back a Contact header field that looks
            like this:
          
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
&lt;allOneLine&gt;
Contact: &lt;sip:line-1@10.20.1.17&gt;;
temp-gruu="sip:ssp.example.com;gr=urn:uuid:f81d4fae-7dec-11d0-a765-
00a0c91e6bf6;sg=0UYYRV046P";+sip.instance="&lt;urn:uuid:d0e2f290-104b-
11df-8a39-0800200c9a66&gt;";expires=3600
&lt;/allOneLine&gt;
</pre></div>
<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2"></a><h3>7.2.&nbsp;
Registration Event Package</h3>

<p>
        As this mechanism inherently deals with REGISTER behavior,
        it is imperative to consider its impact on the Registration
        Event Package defined by RFC 3680 <a class='info' href='#RFC3680'>[8]<span> (</span><span class='info'>Rosenberg, J., &ldquo;A Session Initiation Protocol (SIP) Event Package for Registrations,&rdquo; March&nbsp;2004.</span><span>)</span></a>.
        In practice, there will be two main use cases for subscribing
        to registration data: learning about the overall registration
        state for the PBX, and learning about the registration state
        for a single PBX phone number.
      
</p>
<a name="pbx-reg-event"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2.1"></a><h3>7.2.1.&nbsp;
PBX Aggregate Registration State</h3>

<p>
          If the PBX (or another interested and authorized party)
          wishes to monitor or audit the registration state for
          all of the phone numbers currently registered to that PBX,
          it can subscribe to the SIP registration event package
          at the PBX's main URI -- that is, the URI used in
          the "To" header field of the REGISTER message.
        
</p>
<p>
          The NOTIFY messages for such a subscription will contain
          a body that contains one record for each phone number
          associated with the PBX. The AORs will be in the format
          expected to be received by the SSP (e.g., 
          "sip:+12145550105@ssp.example.com"), and the Contacts
          will correspond to the mapped Contact created by the
          registration (e.g., "sip:+12145550105@98.51.100.3").
        
</p>
<p>
          In particular, the "bnc" parameter is forbidden from
          appearing in the body of a reg-event notify.
        
</p>
<a name="reg-terminal"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.2.2"></a><h3>7.2.2.&nbsp;
Individual Phone Number Registration State</h3>

<p>
          As described in <a class='info' href='#ssp-processing'>Section&nbsp;6<span> (</span><span class='info'>SSP Processing of Inbound Phone Number Requests</span><span>)</span></a>, the
          SSP will generally retarget all requests addressed to
          a phone number owned by a PBX to that PBX according
          to the mapping established at registration time.
          Although policy at the SSP may override this generally
          expected behavior, proper behavior of the registration
          event package requires that all "reg" event SUBSCRIBE
          requests are processed by the PBX. As a consequence,
          the requirements on an SSP for processing registration
          event package SUBSCRIBE requests are not left to policy.
        
</p>
<p>
          If the SSP receives a SUBSCRIBE request for the registration
          event package with a Request-URI that indicates a
          contact registered via the "Bulk Number Contact" mechanism
          defined in this document, then it MUST proxy that SUBSCRIBE
          to the PBX in the same way that is would proxy an INVITE
          bound for that AOR.
        
</p>
<p>
          Defining the behavior in this way is important, since
          the reg-event subscriber is interested in finding out
          about the comprehensive list of devices associated with
          the phone number. Only the PBX will have authoritative
          access to this information.  For example, if the user has
          registered multiple terminals with differing capabilities,
          the SSP will not know about the devices or their capabilities.
          By contrast, the PBX will.
        
</p>
<a name="anchor10"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.3"></a><h3>7.3.&nbsp;
Client-Initiated (Outbound) Connections</h3>

<p>
        RFC 5626 <a class='info' href='#RFC5626'>[9]<span> (</span><span class='info'>Jennings, C., Mahy, R., and F. Audet, &ldquo;Managing Client-Initiated Connections in the Session Initiation Protocol (SIP),&rdquo; October&nbsp;2009.</span><span>)</span></a>
        -- needs analysis. Some people think it might "just work."
      
</p>
<a name="anchor11"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7.4"></a><h3>7.4.&nbsp;
Non-Adjacent Contact Registration (Path) and Service Route Discovery</h3>

<p>
        RFC 3327 <a class='info' href='#RFC3327'>[6]<span> (</span><span class='info'>Willis, D. and B. Hoeneisen, &ldquo;Session Initiation Protocol (SIP) Extension Header Field for Registering Non-Adjacent Contacts,&rdquo; December&nbsp;2002.</span><span>)</span></a> defines a means by which
        a registrar and its associated proxy can be informed of a
        route that is to be used between the proxy and the registered
        user agent. The scope of the route created by a "Path" header
        field is contact-specific; if an AOR has multiple contacts
        associated with it, the routes associated with each contact
        may be different from each other.
      
</p>
<p>
        At registration time, any proxies between the user agent and
        the registrar may add themselves to the Path. By doing so,
        they request that any requests destined to the user agent
        as a result of the associated registration include them
        as part of the Route towards the User Agent. Although the
        Path mechanism does deliver the final Path value to the
        registering UA, UAs typically ignore the value of the Path.
      
</p>
<p>
        To provide similar functionality in the opposite direction --
        that is, to establish a route for requests sent by a registering
        UA -- RFC 3608 <a class='info' href='#RFC3608'>[7]<span> (</span><span class='info'>Willis, D. and B. Hoeneisen, &ldquo;Session Initiation Protocol (SIP) Extension Header Field for Service Route Discovery During Registration,&rdquo; October&nbsp;2003.</span><span>)</span></a> defines a means
        by which a UA can be informed of a route that is to be used by
        the UA to route all outbound requests associated with the
        AOR used in the registration. This information is scoped to the
        AOR within the UA, and is not specific to the Contact (or Contacts)
        in the REGISTER request.
      
</p>
<p>
        The registrar unilaterally generates the values of the service
        route using whatever local policy it wishes to apply. Although it
        is common to use the Path and/or Route information in the request
        in composing the Service-Route, registrar behavior is not constrained
        in any way that requires it to do so.
      
</p>
<p>
        In considering the interaction between these mechanisms and the
        registration of multiple AORs in a single request, implementors
        of proxies, registrars, and intermediaries must keep in mind
        the following issues, which stem from the fact that GIN effectively
        registers multiple AORs and multiple Contacts. 
      
</p>
<p>
        First, all location service records that result from expanding a
        single "bnc" Contact will necessarily share a single path. Proxies
        will be unable to make policy decisions on a contact-by-contact
        basis regarding whether to include themselves in the path. Second,
        and similarly, all AORs on the PBX that are registered with a
        common REGISTER message will be forced to share a common
        Service-Route.
      
</p>
<p>
        One interesting technique that Path and Service-Route enable
        is the inclusion of a token or cookie in the user portion of the
        Service-Route or Path entries. This token or cookie may convey
        information to proxies about the identity, capabilities, and/or
        policies associated with the user. Since this information will
        be shared among several AORs and several Contacts when multiple
        AOR registration is employed, care should be taken to ensure that
        doing so is acceptable for all AORs and all Contacts registered
        in a single REGISTER message.
      
</p>
<a name="anchor12"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
Examples</h3>

<a name="anchor13"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.1"></a><h3>8.1.&nbsp;
Usage Scenario: Basic Registration</h3>

<p>
        This example shows the message flows for a basic bulk REGISTER
        transaction, followed by an INVITE addressed to one of the
        registered terminals. Example messages are shown after
        the sequence diagram.
      
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Internet                        SSP                              PBX
|                                |                                 |
|                                |(1) REGISTER                     |
|                                |Contact:&lt;sip:198.51.100.3;bnc&gt;   |
|                                |&lt;--------------------------------|
|                                |                                 |
|                                |(2) 200 OK                       |
|                                |--------------------------------&gt;|
|                                |                                 |
|(3) INVITE                      |                                 |
|sip:+12145550105@ssp.example.com|                                 |
|-------------------------------&gt;|                                 |
|                                |                                 |
|                                |(4) INVITE                       |
|                                |sip:+12145550105@198.51.100.3    |
|                                |--------------------------------&gt;|
</pre></div><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
(1) The PBX registers with the SSP for a range of phone numbers.

REGISTER sip:ssp.example.com SIP/2.0
Via: SIP/2.0/UDP 198.51.100.3:5060;branch=z9hG4bKnashds7
Max-Forwards: 70
To: &lt;sip:pbx@ssp.example.com&gt;
From: &lt;sip:pbx@ssp.example.com&gt;;tag=a23589
Call-ID: 843817637684230@998sdasdh09
CSeq: 1826 REGISTER
Proxy-Require: gin
Require: gin
Supported: path
Contact: &lt;sip:198.51.100.3:5060;user=phone;bnc&gt;
Expires: 7200
Content-Length: 0
</pre></div><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
(3) The SSP receives a request for a phone number assigned
    to the PBX.

INVITE sip:+12145550105@ssp.example.com;user=phone SIP/2.0
Via: SIP/2.0/UDP foo.example;branch=z9hG4bKa0bc7a0131f0ad
Max-Forwards: 69
To: &lt;sip:2145550105@some-other-place.example.net&gt;
From: &lt;sip:gsmith@example.org&gt;;tag=456248
Call-ID: f7aecbfc374d557baf72d6352e1fbcd4
CSeq: 24762 INVITE
Contact: &lt;sip:line-1@192.0.2.178:2081&gt;
Content-Type: application/sdp
Content-Length: ...

&lt;sdp body here&gt;
</pre></div><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
(4) The SSP retargets the incoming request according to the
    information received from the PBX at registration time.

INVITE sip:+12145550105@198.51.100.3;user=phone SIP/2.0
Via: SIP/2.0/UDP foo.example;branch=z9hG4bKa0bc7a0131f0ad
Via: SIP/2.0/UDP ssp.example.com;branch=z9hG4bKa45cd5c52a6dd50
Max-Forwards: 68
To: &lt;sip:2145550105@some-other-place.example.net&gt;
From: &lt;sip:gsmith@example.org&gt;;tag=456248
Call-ID: 7ca24b9679ffe9aff87036a105e30d9b
CSeq: 24762 INVITE
Contact: &lt;sip:line-1@192.0.2.178:2081&gt;
Content-Type: application/sdp
Content-Length: ...

&lt;sdp body here&gt;
</pre></div>
<a name="anchor14"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8.2"></a><h3>8.2.&nbsp;
Usage Scenario: Using Path to Control Request URI</h3>

<p>
        This example shows a bulk REGISTER transaction with
        the SSP making use of the "Path" header field extension
        <a class='info' href='#RFC3327'>[6]<span> (</span><span class='info'>Willis, D. and B. Hoeneisen, &ldquo;Session Initiation Protocol (SIP) Extension Header Field for Registering Non-Adjacent Contacts,&rdquo; December&nbsp;2002.</span><span>)</span></a>.
        This allows the SSP to designate a domain on the incoming
        Request URI that does not necessarily resolve to the
        PBX from when the SSP applies RFC 3263 procedures to it.
      
</p><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
Internet                        SSP                              PBX
|                                |                                 |
|                                |(1) REGISTER                     |
|                                |Path:&lt;sip:pbx@198.51.100.3;lr&gt;   |
|                                |Contact:&lt;sip:pbx.example;bnc&gt;    |
|                                |&lt;--------------------------------|
|                                |                                 |
|                                |(2) 200 OK                       |
|                                |--------------------------------&gt;|
|                                |                                 |
|(3) INVITE                      |                                 |
|sip:+12145550105@ssp.example.com|                                 |
|-------------------------------&gt;|                                 |
|                                |                                 |
|                                |(4) INVITE                       |
|                                |sip:+12145550105@pbx.example     |
|                                |Route:&lt;sip:pbx@198.51.100.3;lr&gt;  |
|                                |--------------------------------&gt;|
</pre></div><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
(1) The PBX registers with the SSP for a range of phone numbers.
    It includes the URI it expects to receive in the Request-URI
    in its "Contact" header field, and includes information that
    routes to the PBX in the "Path" header field.

REGISTER sip:ssp.example.com SIP/2.0
Via: SIP/2.0/UDP 198.51.100.3:5060;branch=z9hG4bKnashds7
Max-Forwards: 70
To: &lt;sip:pbx@ssp.example.com&gt;
From: &lt;sip:pbx@ssp.example.com&gt;;tag=a23589
Call-ID: 843817637684230@998sdasdh09
CSeq: 1826 REGISTER
Proxy-Require: gin
Require: gin
Supported: path
Path: &lt;sip:pbx@198.51.100.3:5060;lr&gt;
Contact: &lt;sip:pbx.example;user=phone;bnc&gt;
Expires: 7200
Content-Length: 0
</pre></div><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
(3) The SSP receives a request for a phone number assigned
    to the PBX.

INVITE sip:+12145550105@ssp.example.com;user=phone SIP/2.0
Via: SIP/2.0/UDP foo.example;branch=z9hG4bKa0bc7a0131f0ad
Max-Forwards: 69
To: &lt;sip:2145550105@some-other-place.example.net&gt;
From: &lt;sip:gsmith@example.org&gt;;tag=456248
Call-ID: f7aecbfc374d557baf72d6352e1fbcd4
CSeq: 24762 INVITE
Contact: &lt;sip:line-1@192.0.2.178:2081&gt;
Content-Type: application/sdp
Content-Length: ...

&lt;sdp body here&gt;
</pre></div><div style='display: table; width: 0; margin-left: 3em; margin-right: auto'><pre>
(4) The SSP retargets the incoming request according to the
    information received from the PBX at registration time.
    Per the normal processing associated with "Path," it
    will insert the "Path" value indicated by the PBX at
    registration time in a "Route" header field, and
    set the request URI to the registered Contact.

INVITE sip:+12145550105@pbx.example;user=phone SIP/2.0
Via: SIP/2.0/UDP foo.example;branch=z9hG4bKa0bc7a0131f0ad
Via: SIP/2.0/UDP ssp.example.com;branch=z9hG4bKa45cd5c52a6dd50
Route: &lt;sip:pbx@198.51.100.3:5060;lr&gt;
Max-Forwards: 68
To: &lt;sip:2145550105@some-other-place.example.net&gt;
From: &lt;sip:gsmith@example.org&gt;;tag=456248
Call-ID: 7ca24b9679ffe9aff87036a105e30d9b
CSeq: 24762 INVITE
Contact: &lt;sip:line-1@192.0.2.178:2081&gt;
Content-Type: application/sdp
Content-Length: ...

&lt;sdp body here&gt;
</pre></div>
<a name="anchor15"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.9"></a><h3>9.&nbsp;
Requirements Analysis</h3>

<p>
      The document "Requirements for multiple address of record
      (AOR) reachability information in the Session Initiation
      Protocol (SIP)" <a class='info' href='#I-D.ietf-martini-reqs'>[5]<span> (</span><span class='info'>Elwell, J. and H. Kaplan, &ldquo;Requirements for multiple address of record (AOR) reachability information in the Session Initiation Protocol (SIP),&rdquo; March&nbsp;2010.</span><span>)</span></a>
      contains a list of requirements and desired properties for a
      mechanism to register multiple AORs with a single SIP
      transaction.  This section evaluates those requirements against
      the mechanism described in this document.
    
</p>
<p>REQ1 - The mechanism MUST allow a SIP-PBX to enter into a trunking arrangement with an SSP whereby the two parties have agreed on a set of telephone numbers deemed to have been assigned to the SIP-PBX.
</p>
<p></p>
<blockquote class="text">
<p>The requirement is satisfied.
</p>
</blockquote>

<p>REQ2 - The mechanism MUST allow a set of assigned telephone numbers to comprise E.164 numbers, which can be in contiguous ranges, discrete, or in any combination of the two.
</p>
<p></p>
<blockquote class="text">
<p>The requirement is satisfied; the DIDs associated with a registration is established by bilateral agreement between the SSP and the PBX, and is not part of the mechanism described in this document.
</p>
</blockquote>

<p>REQ3 - The mechanism MUST allow a SIP-PBX to register reachability information with its SSP, in order to enable the SSP to route to the SIP-PBX inbound requests targeted at assigned telephone numbers.
</p>
<p></p>
<blockquote class="text">
<p>The requirement is satisfied.
</p>
</blockquote>

<p>REQ4 - The mechanism MUST NOT prevent UAs attached to a SIP-PBX registering with the SIP-PBX on behalf of AORs based on assigned telephone numbers in order to receive requests targeted at those telephone numbers, without needing to involve the SSP in the registration process.
</p>
<p></p>
<blockquote class="text">
<p>The requirement is satisfied; in the presumed architecture, PBX terminals register with the PBX, an require no interaction with the SSP.
</p>
</blockquote>

<p>REQ5 - The mechanism MUST allow a SIP-PBX to handle internally requests originating at its own UAs and targeted at its assigned telephone numbers, without routing those requests to the SSP.
</p>
<p></p>
<blockquote class="text">
<p>The requirement is satisfied; PBXes may recognize their own DID and their own GRUUs, and perform on-PBX routing without sending the requests to the SSP.
</p>
</blockquote>

<p>REQ6 - The mechanism MUST allow a SIP-PBX to receive requests to its assigned telephone numbers originating outside the SIP-PBX and arriving via the SSP, so that the PBX can route those requests onwards to its UAs, as it would for internal requests to those telephone numbers.
</p>
<p></p>
<blockquote class="text">
<p>The requirement is satisfied
</p>
</blockquote>

<p>REQ7 - The mechanism MUST provide a means whereby a SIP-PBX knows which of its assigned telephone numbers an inbound request from its SSP is targeted at.
</p>
<p></p>
<blockquote class="text">
<p>The requirement is satisfied. For ordinary calls and calls using Public GRUUs, the DID is indicated in the user portion of the Request-URI. For calls using Temp GRUUs constructed with the mechanism described in <a class='info' href='#anon-gruu'>Section&nbsp;7.1.2.2<span> (</span><span class='info'>Approach 2 - Anonymous Public GRUUs</span><span>)</span></a>, the "sg" parameter provides a correlation token the PBX can use to identify which terminal the call should be routed to.
</p>
</blockquote>

<p>REQ8 - The mechanism MUST provide a means of avoiding problems due to one side using the mechanism and the other side not.
</p>
<p></p>
<blockquote class="text">
<p>The requirement is satisfied through the 'gin' option tag and the 'bnc' Contact parameter.
</p>
</blockquote>

<p>REQ9 - The mechanism MUST observe SIP backwards compatibility principles.
</p>
<p></p>
<blockquote class="text">
<p>The requirement is satisfied through the 'gin' option tag.
</p>
</blockquote>

<p>REQ10 - The mechanism MUST work in the presence of intermediate SIP entities on the SSP side of the SIP-PBX-to-SSP interface (i.e., between the SIP-PBX and the SSP's domain proxy), where those intermediate SIP entities need to be on the path of inbound requests to the PBX.
</p>
<p></p>
<blockquote class="text">
<p>The requirement is satisfied through the use of the Path mechanism defined in RFC 3327 <a class='info' href='#RFC3327'>[6]<span> (</span><span class='info'>Willis, D. and B. Hoeneisen, &ldquo;Session Initiation Protocol (SIP) Extension Header Field for Registering Non-Adjacent Contacts,&rdquo; December&nbsp;2002.</span><span>)</span></a> 
</p>
</blockquote>

<p>REQ11 - The mechanism MUST work when a SIP-PBX obtains its IP address dynamically.
</p>
<p></p>
<blockquote class="text">
<p>The requirement is satisfied by allowing the PBX to use an IP address in the Bulk Number Contact URI contained in a REGISTER Contact header field.
</p>
</blockquote>

<p>REQ12 - The mechanism MUST work without requiring the SIP-PBX to have a domain name or the ability to publish its domain name in the DNS.
</p>
<p></p>
<blockquote class="text">
<p>The requirement is satisfied by allowing the PBX to use an IP address in the Bulk Number Contact URI contained in a REGISTER Contact header field.
</p>
</blockquote>

<p>REQ13 - For a given SIP-PBX and its SSP, there MUST be no impact on other domains, which are expected to be able to use normal RFC 3263 procedures to route requests, including requests needing to be routed via the SSP in order to reach the SIP-PBX.
</p>
<p></p>
<blockquote class="text">
<p>The requirement is satisfied by allowing the domain name in the Request URI used by external entities to resolve to the SSP's servers via normal RFC 3263 resolution procedures.
</p>
</blockquote>

<p>REQ14 - The mechanism MUST be able to operate over a transport that provides integrity protection and confidentiality.
</p>
<p></p>
<blockquote class="text">
<p>The requirement is satisfied; nothing in the proposed mechanism prevent the use of TLS between the SSP and the PBX.
</p>
</blockquote>

<p>REQ15 - The mechanism MUST support authentication of the SIP-PBX by the SSP and vice versa.
</p>
<p></p>
<blockquote class="text">
<p>The requirement is satisfied; PBXes may employ either SIP digest authentication or mutually-authenticated TLS for authentication purposes.
</p>
</blockquote>

<p>REQ16 - The mechanism MUST allow the SIP-PBX to provide its UAs with public or temporary Globally Routable UA URIs (GRUUs) <a class='info' href='#RFC5627'>[10]<span> (</span><span class='info'>Rosenberg, J., &ldquo;Obtaining and Using Globally Routable User Agent URIs (GRUUs) in the Session Initiation Protocol (SIP),&rdquo; October&nbsp;2009.</span><span>)</span></a>.
</p>
<p></p>
<blockquote class="text">
<p>The requirement is satisfied via the mechanisms detailed in <a class='info' href='#gruu'>Section&nbsp;7.1<span> (</span><span class='info'>Globally Routable User-Agent URIs (GRUU)</span><span>)</span></a>.
</p>
</blockquote>

<p>REQ17 - The mechanism MUST NOT preclude the ability of the SIP-PBX to route on-PBX requests directly, without hair-pinning the signaling through the SSP.
</p>
<p></p>
<blockquote class="text">
<p>The requirement is satisfied; PBXes may recognize their own DID and their own GRUUs, and perform on-PBX routing without sending the requests to the SSP. (Note that this requirement duplicates REQ5, and will probably be removed in a future version of the requirements document.)
</p>
</blockquote>

<p>REQ18 - The mechanism MUST work over any existing transport specified for SIP, including UDP.
</p>
<p></p>
<blockquote class="text">
<p>The requirement is satisfied to the extent that UDP can be used for REGISTER requests in general. The application of certain extensions and/or network topologies may exceed UDP MTU sizes, but such issues arise both with and without the mechanism described in this document. This document does not exacerbate such issues.
</p>
</blockquote>

<p>DES1 - The mechanism SHOULD allow an SSP to exploit its mechanisms for providing SIP service to ordinary subscribers in order to provide a SIP trunking service to SIP-PBXes.
</p>
<p></p>
<blockquote class="text">
<p>The desired property is satisfied; the routing mechanism described in this document is identical to the routing performed for singly-registered AORs.
</p>
</blockquote>

<p>DES2 - The mechanism SHOULD scale to SIP-PBX's of several thousand assigned telephone numbers.
</p>
<p></p>
<blockquote class="text">
<p>The desired property is satisfied; nothing in this document precludes DID pools of arbitrary size.
</p>
</blockquote>

<p>DES3 - The mechanism SHOULD scale to support several thousand SIP-PBX's on a single SSP.
</p>
<p></p>
<blockquote class="text">
<p>The desired property is satisfied; nothing in this document precludes an arbitrary number of PBXes from attaching to a single SSP.
</p>
</blockquote>

<p>DES4 - The mechanism SHOULD require relatively modest changes to a substantial population of existing SSP and SIP-PBX implementations, in order to encourage a fast market adoption of the standardized mechanism.
</p>
<p></p>
<blockquote class="text">
<p>The desired property is difficult to evaluate in the context of any solution. The mechanism proposed in this document uses the REGISTER method, which is the method preferred by many existing PBX deployments. The handling of request routing logic is nearly identical to that of RFC 3261 proxy/registrars, allowing implementors to leverage existing proxy/registrar code.
</p>
</blockquote>

<a name="anchor16"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10"></a><h3>10.&nbsp;
IANA Considerations</h3>

<p>
      This document registers a new SIP option tag to indicate support
      for the mechanism it defines, plus two new SIP URI parameters.
    
</p>
<a name="anchor17"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.1"></a><h3>10.1.&nbsp;
New SIP Option Tag</h3>

<p> This section defines a new SIP option tag per the guidelines
      in Section 27.1 of RFC 3261<a class='info' href='#RFC3261'>[2]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a>.

        </p>
<blockquote class="text"><dl>
<dt>Name:</dt>
<dd>gin
</dd>
<dt>Description:</dt>
<dd> This option tag is used to identify
          the extension that provides Registration for Multiple Phone
          Numbers in SIP. When present in a Require or Proxy-Require
          header field of a REGISTER request, it indicates that support
          for this extension is required of registrars and proxies,
          respectively, that are a party to the registration transaction.
          
</dd>
<dt>Reference:</dt>
<dd>RFCXXXX (this document)
</dd>
</dl></blockquote><p>
      
</p>
<a name="anchor18"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.2"></a><h3>10.2.&nbsp;
New SIP URI Parameters</h3>

<p>
        This specification defines two new SIP URI parameters, as per the
        registry created by RFC 3969 <a class='info' href='#RFC3969'>[4]<span> (</span><span class='info'>Camarillo, G., &ldquo;The Internet Assigned Number Authority (IANA) Uniform Resource Identifier (URI) Parameter Registry for the Session Initiation Protocol (SIP),&rdquo; December&nbsp;2004.</span><span>)</span></a>.
      
</p>
<a name="anchor19"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.2.1"></a><h3>10.2.1.&nbsp;
'bnc' SIP URI paramter</h3>

<p>
        </p>
<blockquote class="text"><dl>
<dt>Parameter Name:</dt>
<dd>bnc
</dd>
<dt>Predefined Values:</dt>
<dd>No (no values are allowed)
</dd>
<dt>Reference:</dt>
<dd>RFCXXXX (this document)
</dd>
</dl></blockquote><p>
        
</p>
<a name="anchor20"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.10.2.2"></a><h3>10.2.2.&nbsp;
'sg' SIP URI paramter</h3>

<p>
        </p>
<blockquote class="text"><dl>
<dt>Parameter Name:</dt>
<dd>sg
</dd>
<dt>Predefined Values:</dt>
<dd>No
</dd>
<dt>Reference:</dt>
<dd>RFCXXXX (this document)
</dd>
</dl></blockquote><p>
        
</p>
<a name="anchor21"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.11"></a><h3>11.&nbsp;
Security Considerations</h3>

<p>
      There are certainly security implications associated with the
      mechanisms described in this document, mostly dealing with
      the unprecedented semantic inclusion of multiple AORs in a
      single REGISTER request. This section will be formulated
      following an analysis of the security impact of GIN on Path,
      Service-Route, and Outbound.
    
</p>
<a name="anchor22"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.12"></a><h3>12.&nbsp;
Acknowledgements</h3>

<p>
      Thanks to John Elwell for his requirements analysis of the
      mechanism described in this document, and to Dean Willis for
      his analysis of the interaction between this mechanism and
      the Path and Service-Route extensions.
    
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.13"></a><h3>13.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>13.1.&nbsp;Normative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[1]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3261">[2]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;<a href="http://tools.ietf.org/html/rfc3261">SIP: Session Initiation Protocol</a>,&rdquo; RFC&nbsp;3261, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3261.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3263">[3]</a></td>
<td class="author-text">Rosenberg, J. and H. Schulzrinne, &ldquo;<a href="http://tools.ietf.org/html/rfc3263">Session Initiation Protocol (SIP): Locating SIP Servers</a>,&rdquo; RFC&nbsp;3263, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3263.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3969">[4]</a></td>
<td class="author-text">Camarillo, G., &ldquo;<a href="http://tools.ietf.org/html/rfc3969">The Internet Assigned Number Authority (IANA) Uniform Resource Identifier (URI) Parameter Registry for the Session Initiation Protocol (SIP)</a>,&rdquo; BCP&nbsp;99, RFC&nbsp;3969, December&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3969.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>13.2.&nbsp;Informative References</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="I-D.ietf-martini-reqs">[5]</a></td>
<td class="author-text">Elwell, J. and H. Kaplan, &ldquo;<a href="http://www.ietf.org/internet-drafts/draft-ietf-martini-reqs-03.txt">Requirements for multiple address of record (AOR) reachability information in the Session Initiation Protocol (SIP)</a>,&rdquo; draft-ietf-martini-reqs-03 (work in progress), March&nbsp;2010 (<a href="http://www.ietf.org/internet-drafts/draft-ietf-martini-reqs-03.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3327">[6]</a></td>
<td class="author-text">Willis, D. and B. Hoeneisen, &ldquo;<a href="http://tools.ietf.org/html/rfc3327">Session Initiation Protocol (SIP) Extension Header Field for Registering Non-Adjacent Contacts</a>,&rdquo; RFC&nbsp;3327, December&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3327.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3608">[7]</a></td>
<td class="author-text">Willis, D. and B. Hoeneisen, &ldquo;<a href="http://tools.ietf.org/html/rfc3608">Session Initiation Protocol (SIP) Extension Header Field for Service Route Discovery During Registration</a>,&rdquo; RFC&nbsp;3608, October&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3608.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3680">[8]</a></td>
<td class="author-text">Rosenberg, J., &ldquo;<a href="http://tools.ietf.org/html/rfc3680">A Session Initiation Protocol (SIP) Event Package for Registrations</a>,&rdquo; RFC&nbsp;3680, March&nbsp;2004 (<a href="http://www.rfc-editor.org/rfc/rfc3680.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5626">[9]</a></td>
<td class="author-text">Jennings, C., Mahy, R., and F. Audet, &ldquo;<a href="http://tools.ietf.org/html/rfc5626">Managing Client-Initiated Connections in the Session Initiation Protocol (SIP)</a>,&rdquo; RFC&nbsp;5626, October&nbsp;2009 (<a href="http://www.rfc-editor.org/rfc/rfc5626.txt">TXT</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC5627">[10]</a></td>
<td class="author-text">Rosenberg, J., &ldquo;<a href="http://tools.ietf.org/html/rfc5627">Obtaining and Using Globally Routable User Agent URIs (GRUUs) in the Session Initiation Protocol (SIP)</a>,&rdquo; RFC&nbsp;5627, October&nbsp;2009 (<a href="http://www.rfc-editor.org/rfc/rfc5627.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Author's Address</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Adam Roach</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Tekelec</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">17210 Campbell Rd.</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Suite 250</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Dallas, TX  75252</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">US</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:adam@nostrum.com">adam@nostrum.com</a></td></tr>
</table>
</body></html>
