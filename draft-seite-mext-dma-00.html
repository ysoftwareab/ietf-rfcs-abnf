<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Dynamic Mobility Anchoring</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Terminology">
<link href="#rfc.section.2" rel="Chapter" title="2 Introduction">
<link href="#rfc.section.3" rel="Chapter" title="3 Basics of Dynamic Mobility Anchoring">
<link href="#rfc.section.4" rel="Chapter" title="4 Solution Overview">
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 Dynamic Mobility Anchoring">
<link href="#rfc.section.4.2" rel="Chapter" title="4.2 Protocol sequence for handover management">
<link href="#rfc.section.4.3" rel="Chapter" title="4.3 Difference with Proxy Mobile IPv6">
<link href="#rfc.section.4.4" rel="Chapter" title="4.4 IP flow mobility support">
<link href="#rfc.section.5" rel="Chapter" title="5 Security Considerations">
<link href="#rfc.section.6" rel="Chapter" title="6 IANA Considerations">
<link href="#rfc.section.7" rel="Chapter" title="7 Acknowledgements">
<link href="#rfc.references" rel="Chapter" title="8 References">
<link href="#rfc.references.1" rel="Chapter" title="8.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="8.2 Informative References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="Most existing IP mobility solutions are derived from Mobile IP principles where a given mobility anchor maintains Mobile Nodes (MNs) binding up-to-date. Data traffic is then encapsulated between the mobility anchor and the MN or its Access Router.  These approaches are usually implemented on a centralised architectures where both MN context and traffic encapsulation need to be processed at a central network entity, i.e. the mobility anchor.  However, one of the trend in mobile network evolution is to "flatten" mobility architecture by confining mobility support in the access network, e.g. at the access routers level, keeping the rest of the network unaware of the mobility events and their support.  This document discusses the deployment of a Proxy Mobile IP approach in such a flat architecture.  The solution allows to dynamically distribute mobility functions among access routers.  The goal is also to dynamically adapt the mobility support of the MN’s needs by applying traffic redirection only to MNs’ flows when an IP handover occurs.  " />
  <meta name="description" content="Most existing IP mobility solutions are derived from Mobile IP principles where a given mobility anchor maintains Mobile Nodes (MNs) binding up-to-date. Data traffic is then encapsulated between the mobility anchor and the MN or its Access Router.  These approaches are usually implemented on a centralised architectures where both MN context and traffic encapsulation need to be processed at a central network entity, i.e. the mobility anchor.  However, one of the trend in mobile network evolution is to "flatten" mobility architecture by confining mobility support in the access network, e.g. at the access routers level, keeping the rest of the network unaware of the mobility events and their support.  This document discusses the deployment of a Proxy Mobile IP approach in such a flat architecture.  The solution allows to dynamically distribute mobility functions among access routers.  The goal is also to dynamically adapt the mobility support of the MN’s needs by applying traffic redirection only to MNs’ flows when an IP handover occurs.  " />
  <meta name="keywords" content="" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Network Working Group</td>
<td class="right">P. Seite</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">P. Bertin</td>
</tr>
<tr>
<td class="left">Intended status: Informational</td>
<td class="right">France Telecom - Orange</td>
</tr>
<tr>
<td class="left">Expires: May 17, 2012</td>
<td class="right">November 14, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Dynamic Mobility Anchoring<br />
  <span class="filename">draft-seite-mext-dma-00.txt</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>Most existing IP mobility solutions are derived from Mobile IP principles where a given mobility anchor maintains Mobile Nodes (MNs) binding up-to-date. Data traffic is then encapsulated between the mobility anchor and the MN or its Access Router.  These approaches are usually implemented on a centralised architectures where both MN context and traffic encapsulation need to be processed at a central network entity, i.e. the mobility anchor.  However, one of the trend in mobile network evolution is to "flatten" mobility architecture by confining mobility support in the access network, e.g. at the access routers level, keeping the rest of the network unaware of the mobility events and their support.  This document discusses the deployment of a Proxy Mobile IP approach in such a flat architecture.  The solution allows to dynamically distribute mobility functions among access routers.  The goal is also to dynamically adapt the mobility support of the MN&#8217;s needs by applying traffic redirection only to MNs&#8217; flows when an IP handover occurs.  </p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on May 17, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Terminology</a>
</li>
<li>2.   <a href="#rfc.section.2">Introduction</a>
</li>
<li>3.   <a href="#rfc.section.3">Basics of Dynamic Mobility Anchoring</a>
</li>
<li>4.   <a href="#rfc.section.4">Solution Overview</a>
</li>
<li>4.1.   <a href="#rfc.section.4.1">Dynamic Mobility Anchoring</a>
</li>
<li>4.2.   <a href="#rfc.section.4.2">Protocol sequence for handover management</a>
</li>
<li>4.3.   <a href="#rfc.section.4.3">Difference with Proxy Mobile IPv6</a>
</li>
<li>4.4.   <a href="#rfc.section.4.4">IP flow mobility support</a>
</li>
<li>5.   <a href="#rfc.section.5">Security Considerations</a>
</li>
<li>6.   <a href="#rfc.section.6">IANA Considerations</a>
</li>
<li>7.   <a href="#rfc.section.7">Acknowledgements</a>
</li>
<li>8.   <a href="#rfc.references">References</a>
</li>
<li>8.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>8.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Terminology</h1>
<p id="rfc.section.1.p.1">Proxy Mobile IPv6 inherited terminology <br><br> </p>

<ul class="empty"><li>The following terms used in this document are to be interpreted as defined in the Proxy Mobile IPv6 specification <a href="#RFC5213">[RFC5213]</a>; Mobile Node (MN), ome Network Prefix (HNP), Mobile Node Identifier (MN-Identifier), Proxy Binding Update (PBU), and Proxy Binding Acknowledgement (PBA).  </li></ul>

<p> </p>
<p id="rfc.section.1.p.2">Mobility capable Access Router (MAR) <br><br> </p>

<ul class="empty"><li>The Mobility capable Access Router is an access router which provides mobility management functions. It has both mobility anchoring and location update functional capabilities. A Mobility capable Access Router can act as a Home or as a Visited Mobility capable Access Router (respectively H-MAR and V-MAR).  Any given MAR could act both as H-MAR and V-MAR for a given mobile node having different HNPs, either allocated by this MAR (H-MAR role) or another MAR on which the mobile node was previously attached (V-MAR role).  <br><br> <ul>
<li>H-MAR: it allocates HNP for mobile nodes.  Similarly to <a href="#RFC5213">[RFC5213]</a>, the H-MAR is the topological anchor point for the mobile node's home network prefix(es) it has allocated. The  H-MAR acts as a regular IPv6 router for HNPs it has allocated, and when a mobile node has moved away and attached to a V-MAR, the H-MAR is responsible for: tracking the mobile node location (i.e. the V-MAR where the mobile node is currently attached), and forwarding packets to the V-MAR where the mobile node is attached.  </li>
<li>V-MAR: it manages the mobility-related signaling for a mobile node, using a HNP allocated by a MAR previously visited by the mobile node,  that is attached to its access link.  </li>
</ul>
<p> </p>
</li></ul>

<p> </p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> Introduction</h1>
<p id="rfc.section.2.p.1">Most existing IP mobility solutions are derived from Mobile IP <a href="#RFC3775">[RFC3775]</a> principles where a given mobility agent (e.g. the Home Agent (HA) in Mobile IP or the Local Mobility Agent (LMA) in Proxy Mobile IPv6 <a href="#RFC5213">[RFC5213]</a>) maintains Mobile Nodes (MNs) bindings. Data traffic is then encapsulated between the MN or its Access Router (e.g. the Mobile Access Gateway (MAG) in PMIPv6) and its mobility agent.  These approaches lead to the implementation of centralised architectures where both MN context and traffic encapsulation need to be maintained at a central network entity, the mobility agent. Thus, when hundreds of thousands of MNs are communicating in a given cellular network, such a centralised network entity causes well-known bottlenecks and single point of failure issues, which requires costly network dimensioning and engineering to be fixed. In addition, tunnelling encapsulations impact the overall network efficiency since they require the maintenance of MN's specific contexts in each tunnel end nodes and they incur delays in packet processing and transport functions.  Such centralised approach provides the ability to route MN traffic whatever its localisation is, as well as to support handovers when it moves from access router to access router.  </p>
<p id="rfc.section.2.p.2">It is however well established that a huge amount of mobile communications are set up while the user is not physically moving, i.e. its MN stays in the same radio cell. For example, the user is being communicating at home, in his office, at a caf&#233;... Applying the aforementioned centralised principles leads then to aggregate user&#8217;s contexts and traffic at a central node in the network for the sake of mobility support whereas the MN remains motionless.  As this leads to the introduced scalability and performances issues, alternative approaches may consider a way to better adapt mobility support in the network to cope with MN&#8217;s movements and its ongoing traffic flows&#8217; requirements. Typically, one of the trend in the evolution of mobile networks is to go on flat architecture with the distribution of network functions, including mobility functions <a href="#I-D.liu-distributed-mobility">[I-D.liu-distributed-mobility]</a>.  According to this principle, <a href="#I-D.chan-netext-distributed-lma">[I-D.chan-netext-distributed-lma]</a> proposes a deployment of Proxy Mobile IPv6 in a flat architecture by splitting the location management and routing functions of the LMA.  </p>
<p id="rfc.section.2.p.3">In this document, we propose a slightly different approach by dynamically distributing mobility handling among terminals and access routers.  This document inherits from concepts introduced in <a href="#NTMS2008">[NTMS2008]</a>. The goal is twofold: </p>

<ul>
<li>dynamically adapting mobility support to each of the MN&#8217;s needs by applying traffic redirection only to MNs&#8217; flows that are already established when an IP handover occurs;</li>
<li>confining the mobility support at the access routers level, keeping the rest of the network unaware of mobility events and their support. </li>
</ul>

<p> </p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> Basics of Dynamic Mobility Anchoring</h1>
<p id="rfc.section.3.p.1">In a standard IPv6 network without specific mobility support, any host is able to set up communications flows using a global IPv6 address acquired with the support of its current access router <a href="#RFC4862">[RFC4862]</a>. When the host moves from this access router to a new one, its ongoing IP sessions cannot be maintained without leveraging on IP mobility mechanisms.  </p>
<p id="rfc.section.3.p.2">However, once attached to the new access router, the host can again acquire a routable global IPv6 address to be used for any new communication flow it sets up. Hence, a flow based mobility support may be restricted to provide traffic indirection to host&#8217;s flows that are already ongoing during host&#8217;s handovers between access routers.  Any new flow being set up uses the new host&#8217;s global address acquired on the new link available after the handover.  </p>
<p id="rfc.section.3.p.3">When a multiple-interface host moves between access routers of different access technologies, such a simple approach can also be applied, considering that each network interface provides dynamically global IPv6 addresses acquired on current access routers.  Flows mobility is then required only to support the necessary traffic indirection from the access router on which the flow has been initially set up to the access router the host is currently attached.  Such IP based indirection can even be made independent from access technologies types, providing thus inherent inter-access mobility facilities.  </p>
<p id="rfc.section.3.p.4">Hence, any given IP flow can be considered as implicitly anchored on the current MN&#8217;s access router when being set up.  While the MN is attached to its initial access router, the IP flow is delivered as for any standard IPv6 node.  The anchoring function at the access router is thus needed only to manage traffic indirection if the MN moves to a new access router (and for subsequent movements while the IP flow remains active), maintaining the flow communication until it ends up.  </p>
<p id="rfc.section.3.p.5">Any flow&#8217;s incoming packet toward the MN is routed in a standard way to the access router anchoring the flow as the packet contains the destination IP address issued from router prefix.  Then, if the MN is currently attached to the initial anchor access router, the incoming packet is directly delivered over the access link.  Otherwise, the anchoring access router needs to redirect the packet to the current (or one of the currents) MN&#8217;s access router(s).  </p>
<p id="rfc.section.3.p.6">Any flow&#8217;s outgoing packet from the MN is sent over either the initial anchor access router link or another access router link it is currently using.  In the first case, the packet can be routed in a standard way, i.e., without requiring networks mobility support functions.  In the second case, we consider its redirection to the initial flows&#8217; anchor router, but it may be noticed that direct routing by the current access router may be also allowed (yet this may lead to more stringent security and policy considerations).  </p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> Solution Overview</h1>
<h1 id="rfc.section.4.1">
<a href="#rfc.section.4.1">4.1.</a> <a href="#sct.dma" id="sct.dma">Dynamic Mobility Anchoring</a>
</h1>
<div id="#rfc.figure.1"></div>
<div id="#fig.dma.archi"></div>
<pre>
	  	    
                  
            
              +------------+
              | session DB |
            / +------------+ 
+----------/--------|------\--+
(       IP /Network |       \  )
+--------/----------|------- \+ 
        /           |         \
     +-------+   +-------+    + ------+
     | MAR1  |___| MAR2  |____|  MAR3 |
     +-------+   +-------+    +-------+
                     |                      
                   +-----+ 
                   | MN1 | 
                   +-----+ 
     
      </pre>
<p id="rfc.section.4.1.p.1">The basic idea is to distribute mobility traffic management with dynamic user's traffic anchoring in access network nodes. The solution relies on a very simple flat architecture outlined in <a href="#fig.dma.archi">Figure 1</a> where the  Mobility capable Access Router (MAR) supports both traffic anchoring and MN's location management functionalities. The architecture relies on a centralized database storing ongoing mobility sessions for the MNs (see <a href="#sect.call.flow">Section 4.2</a> for details). This database stores the HNPs currently allocated to the MN and their respective anchoring point. This database could be an extension to the policy store used in <a href="#RFC5213">[RFC5213]</a>.  </p>
<p id="rfc.section.4.1.p.2">Communications newly initiated, e.g. to CN2, while the mobile node is attached to MAR3 will be routed in a standard way via MAR3.  So, MAR3 is both the mobility anchor, i.e. the H-MAR, for traffic newly initiated (i.e. when the mobile node is attached to MAR3) and the V-MAR for traffic initiated while being attached to MAR1.  If the mobile node moves away from MAR3, while maintaining communications with both CN1 and CN2, two mobility anchors come into play: the data traffic will be anchored in MAR1 for communication with CN1 and in MAR3 for communication with CN2.  Summarizing , it is proposed to locate mobility anchoring depending on where the flow is initially created. Accordingly, communications are expected to be initiated without requiring mobility anchoring and tunneling.  </p>
<p id="rfc.section.4.1.p.3">With this solution, even if a mobile node is moving across several MARs, the tunnel endpoints are always on the initial H-MAR and on the current V-MAR. In the case the mobile node moves from MAR1 to MAR2 then to MAR3, a tunnel will be firstly established between MAR1 and MAR2 to forward HNP1; then a tunnel between MAR1 and MAR3 will be established.  </p>
<p id="rfc.section.4.1.p.4">However such an architecture leads to new requirement on the HNP prefix model.  Actually, because the HNP is anchored to its mobility anchor (i.e. H-MAR), a dynamic mobility anchoring requires that each MAR must advertise different per-MN prefixes set.  For example, if MN1 is anchored to both MAR1 and MAR3, these two mobility capable access routers would advertise respectively HNP1 and HNP3 for MN1.  </p>
<div id="#rfc.figure.2"></div>
<div id="#fig.dma"></div>
<pre>
	  	    
                      _______                _______
                     |       |              |       |
                     |  CN1  |              |  CN2  |
                     |_______|              |_______|
                         '.  Flow#2               .
                  Flow#1 ' '.                     |  Flow#3
                         '  '...'''''''''''''.... .
                       ..'''  '.                 '''..
                     .'  '      '.IP network      .   '.
                     :   '       '.               |    :
                      '..'       +-------+        . ..'
                         '''...  |       |   ....'''
                         '       | MAR2  | \      .   
  MAR1 Forwarding Table  '       |       |  \     | 
 +=====================+ '       |       |'. \    .    
   HNP-1::/64 -&gt; MAR3    '       +-------+\'. \   |
                    +-------+              \ '+ ------+
                    |       |               \ |       |
                    | MAR1  |-----------------|  MAR3 |
                    |       |'''''''''''''''''|       |
                    |       |-----------------|       |
                    +-------+                 +-------+
                                                 ' ' |
                                         Flow#1  ' . .  Flow#3
                                                 ' ' |
                      +-----+            Flow#2 +-----+
                      | MN1 | -----move-------&gt; | MN1 |
                      +-----+                   +-----+
                                            (single interface, IF1)

      

     
      </pre>
<h1 id="rfc.section.4.2">
<a href="#rfc.section.4.2">4.2.</a> <a href="#sect.call.flow" id="sect.call.flow">Protocol sequence for handover management</a>
</h1>
<p id="rfc.section.4.2.p.1">An example of handover management for a single interface mobile node is depicted on <a href="#fig.callflowDMA">Figure 3</a>. The mobile node, MN1, is assumed to move from MAR1 to MAR2. Following are the  main steps of the handover management process: <br><br> </p>

<ol>
<li>The mobile node, MN1, attaches to MAR1 which is responsible for allocating the MN-HNP, e.g. HNP1 for MN1.  </li>
<li>Hence, the mobile node can initiate and maintain data transport sessions (with CN1 in the picture), using IP addresses derived from HNP1, in a standard way while it remains attached to MAR1, i.e. mobility functions do not come into play.  </li>
<li>The MN handoffs to MAR2 which will thus acts as V-MAR for HNP1. Fistly, MAR2 retrieves the ongoing MN's mobility sessions from the centralized sessions database; here only one mobility session is ongoing: (MN::NHP1,MAR1). Then MAR2 proceeds to location update for HNP1 with MAR1 (H-MAR role), i.e., PBU/PBA exchange between MAR2 and MAR1.  </li>
<li>MAR2 also allocates new HNPs for MN1; these HNPs are meant to be used by application flows initiated after the handoff.  </li>
<li>MAR1, playing the H-MAR role for HNP1, encapsulates MN1's traffic and tunnels it to the V-MAR, i.e. MAR2, where packets are decapsulated and delivered to the MN.  </li>
<li>The mobile node can initiate and maintain new data transport sessions, e.g. with CN2, using IP addresses derived from HNP2. This traffic is routed in a standard way while the mobile node remains attached to MAR2.  </li>
</ol>

<p> </p>
<div id="#rfc.figure.3"></div>
<div id="#fig.callflowDMA"></div>
<pre>
	    
  
    MN1           MAR2            MAR1     CN1      CN2
     |             |               |        |        |
     |             |               |        |        |
   L2 Attach       |               |        |        |
     |             |               |        |        |
     |----------------RS----------&gt;|        |        |
     |             |               | MAR1 allocates  |
     |             |               | and advertises HNP1
     |             |               | MAR1 updates MN's 
     |             |               | mobility session  
     |&lt;---------------RA-----------| up to the database
     |             |               |        |        |
  comm. to CN1 using HNP1          |        |        |
     |&lt;----------------data-flow#1---------&gt;|        |
     |             |               |        |        |
  handover         |               |        |        |
  to MA2           |               |        |        |
     |-----RS-----&gt;| MAR2 allocates|        |        |
     |             |  HNP2 for new communications    |
     |             |  and retrieve the anchoring point 
     |             |  from the centralized database  |
     |             |----pBU-------&gt;|        |        |
     |             |               |        |        |
     |             |&lt;---pBA--------|        |        |
     |&lt;---RA-------|               |        |        |
     |             |               |        |        |
  handover         |               |        |        |
  completed        |               |        |        |
     |             |               |        |        |
     |&lt;---flow#1 --|&lt;===tunnel====&gt;|-------&gt;|        |
     |             |               |        |        |
  comm. to CN2 using HNP2          |        |        |
     |             |               |        |        |
     |&lt;-----------------data-flow#2-----------------&gt;|
     |             |               |        |        |
     |             |               |        |        |

      
		</pre>
<h1 id="rfc.section.4.3">
<a href="#rfc.section.4.3">4.3.</a> Difference with Proxy Mobile IPv6</h1>
<p id="rfc.section.4.3.p.1">A V-MAR is required to advertise new per-MN HNP set for new IP communications to be initiated, while Proxy Mobile IPv6 advertises the same HNPs when roaming from MAG to MAG.  So, while Proxy Mobile IPv6 is based on the per-MN prefix model, this proposal leverages on a per-MN and per-MAR prefix model.  It is not required to statically allocate different set of HNPs per MAR.  Actually, at a given time, only active MARs for an MN (i.e. access routers on which the mobile node is currently attached to) need to share the per-MN HNPs set.  So, for the sake of scalability, per-MN HNPs should be dynamically shared out among MN's active MARs.  </p>
<p id="rfc.section.4.3.p.2">Since each MAR anchors the IP traffic initiated when the mobile node was attached to it, a mobile node may be served simultaneously by more than one mobility anchor at the same time.  </p>
<h1 id="rfc.section.4.4">
<a href="#rfc.section.4.4">4.4.</a> IP flow mobility support</h1>
<p id="rfc.section.4.4.p.1">The distribution of mobility functions can also apply in the context of multiple-interfaces terminals and IP flow mobility.  In such a case, any given IP flow can be considered as implicitly anchored on the current host&#8217;s access router when set up.  Until the host does not move from the initial access router (H-MAR), the IP flow is delivered as for any standard IPv6 node.  The anchoring function at the H-MAR is thus managing traffic indirection only if one, or several, IP flow(s) are moved to another interface, and for subsequent movements while the initial anchored flows remain active.  This anchoring is performed on a per-flow basis and each H-MAR needs to track all possible V-MARs for a given host on the move.  The H-MAR must also manage different tunnels for a given mobile node providing that the node is multihomed and it simultaneously processes different IP flows on its interfaces.  </p>
<p id="rfc.section.4.4.p.2">In the following, it is assumed that flow mobility consists in transferring a subset of prefixes from one access to another (i.e. a given prefix is associated to a given IP flow).  This scenario is described in <a href="#I-D.jeyatharan-netext-multihoming-ps">[I-D.jeyatharan-netext-multihoming-ps]</a> and implemented in <a href="#I-D.yokota-netlmm-pmipv6-mn-itho-support">[I-D.yokota-netlmm-pmipv6-mn-itho-support]</a>. However, providing specific extensions to mobility signalling (extensions to be defined), the solution could also matches the scenario where a same prefix is shared across multiple interfaces (scenario described in <a href="#I-D.jeyatharan-netext-multihoming-ps">[I-D.jeyatharan-netext-multihoming-ps]</a> ). In this case, a prefix is still anchored to one MAR but redirected IP flows are routed by the H-MAR using flow filtering mechanism.  </p>
<p id="rfc.section.4.4.p.3">Lets consider a simple example to illustrate the dynamic per-flow mobility anchoring.  <a href="#fig.dmaFlow">Figure 4</a> depicts the IP flow mobility management for a mobile node with two interfaces.  The IP data flows, Flow#1 and Flow#2, have been initiated on if1. Thus, Flow#1 and Flow#2, using respecively prefixes HNP1 and HNP2, are anchored to MAR1.  Referring to the picture, Flow#1 has not been moved; so Flow#1 is delivered in a standard IPv6 way.  Flow#2 has been transferred from If1 to If2, so the the Flow#2 packets, corresponding to HNP2, are tunneled from MAR1 to MAR2.  In other words, MAR1 and MAR2 are respectively the H-MAR anchor and the V-MAR for flow#2.  </p>
<div id="#rfc.figure.4"></div>
<div id="#fig.dmaFlow"></div>
<pre>
	  	    
               _______                _______
             |       |              |       |
             |  CN1  |              |  CN2  |
             |_______|              |_______|
                 '                        .
          Flow#1 '                        |  Flow#2
                 '   ...'''''''''''''.... .
               ..'''                     '''..
             .'  '        IP network      .   '.
             :   '                        |    :
              '..'                        . ..'
                 '''.....................'|'
                 '                        .
                 '                        |
                 ' .- . - . - . - . - . - .
                 ' |
            +-------+     Flow#2      + ------+
            |       |    tunneled     |       |
            | MAR1  |-----------------|  MAR2 |
            |(H-MAR)| -.-.-.-.-.-.-.-.|(V-MAR)|
            |       |-----------------|       |
            +-------+                 +----|--+
                  '                        .
          Flow#1  '                        | Flow#2
                  '                        .
                  '    If1  +-----+ If2    | 
                  ''''''''''| MN  | - . -  .
                            +-----+

     
   </pre>
<p id="rfc.section.4.4.p.4">In case of the handover of an IP flow, initially adressed to one interface, the mobile node must be able to process that traffic also on the target interface.  In order to meet that requirement, the mobile node could support the weak host model, as per <a href="#RFC1122">[RFC1122]</a>, <a href="#I-D.bernardos-mif-pmip">[I-D.bernardos-mif-pmip]</a>. By supporting the weak host model, the mobile node can accept traffic, addressed to one IP address, on any of its interfaces.  </p>
<p id="rfc.section.4.4.p.5">Another solution for the host to support the handover from one interface to another, is to hide the inter-access handover to layers above IP.  The mobile node can support this scenario by using a virtual IP interface. The applicability of that approach is discussed on <a href="#I-D.bernardos-netext-ll-statement">[I-D.bernardos-netext-ll-statement]</a> and <a href="#I-D.yokota-netlmm-pmipv6-mn-itho-support">[I-D.yokota-netlmm-pmipv6-mn-itho-support]</a> describes a solution.  </p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> Security Considerations</h1>
<p id="rfc.section.5.p.1">TBD.  </p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> IANA Considerations</h1>
<p id="rfc.section.6.p.1">This document has no actions for IANA.  </p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> Acknowledgements</h1>
<p id="rfc.section.7.p.1">The authors would like to acknowledge Philippe Quenard and Carole Bonan who have implemented the solution decribed here.  The authors would also like to express their gratitude to Hidetoshi Yokota, Telemaco Melia, Dapeng Liu, Anthony Chan, Julien Laganier, Lucian Suciu, Servane Bonjour, Karine Guillouard and many others for having shared thoughts on the concept of distributed mobility.  </p>
<h1 id="rfc.references">
<a href="#rfc.references">8.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">8.1.</a> Normative References</h1>
<table><tbody><tr>
<td class="reference"><b id="RFC4862">[RFC4862]</b></td>
<td class="top">
<a>Thomson, S.</a>, <a>Narten, T.</a> and <a>T. Jinmei</a>, "<a href="http://tools.ietf.org/html/rfc4862">IPv6 Stateless Address Autoconfiguration</a>", RFC 4862, September 2007.</td>
</tr></tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">8.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC1122">[RFC1122]</b></td>
<td class="top">
<a href="mailto:Braden@ISI.EDU" title="University of Southern California (USC)/ Information Sciences Institute (ISI)">Braden, R.</a>, "<a href="http://tools.ietf.org/html/rfc1122">Requirements for Internet Hosts - Communication Layers</a>", STD 3, RFC 1122, October 1989.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3775">[RFC3775]</b></td>
<td class="top">
<a>Johnson, D.</a>, <a>Perkins, C.</a> and <a>J. Arkko</a>, "<a href="http://tools.ietf.org/html/rfc3775">Mobility Support in IPv6</a>", RFC 3775, June 2004.</td>
</tr>
<tr>
<td class="reference"><b id="RFC5213">[RFC5213]</b></td>
<td class="top">
<a>Gundavelli, S.</a>, <a>Leung, K.</a>, <a>Devarapalli, V.</a>, <a>Chowdhury, K.</a> and <a>B. Patil</a>, "<a href="http://tools.ietf.org/html/rfc5213">Proxy Mobile IPv6</a>", RFC 5213, August 2008.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3484">[RFC3484]</b></td>
<td class="top">
<a>Draves, R.</a>, "<a href="http://tools.ietf.org/html/rfc3484">Default Address Selection for Internet Protocol version 6 (IPv6)</a>", RFC 3484, February 2003.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.liu-distributed-mobility">[I-D.liu-distributed-mobility]</b></td>
<td class="top">
<a>Liu, D</a>, <a>Cao, Z</a>, <a>Seite, P</a> and <a>H Chan</a>, "<a href="http://tools.ietf.org/html/draft-liu-distributed-mobility-02">Distributed mobility management</a>", Internet-Draft draft-liu-distributed-mobility-02, July 2010.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.chan-netext-distributed-lma">[I-D.chan-netext-distributed-lma]</b></td>
<td class="top">
<a>Chan, H</a>, <a>Xia, F</a>, <a>Xiang, J</a> and <a>H Ahmed</a>, "<a href="http://tools.ietf.org/html/draft-chan-netext-distributed-lma-03">Distributed Local Mobility Anchors</a>", Internet-Draft draft-chan-netext-distributed-lma-03, March 2010.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.bernardos-netext-ll-statement">[I-D.bernardos-netext-ll-statement]</b></td>
<td class="top">
<a>Bernardos, C</a>, <a>Zuniga, J</a> and <a>T Melia</a>, "<a href="http://tools.ietf.org/html/draft-bernardos-netext-ll-statement-01">Applicability Statement on Link Layer implementation/Logical Interface over Multiple Physical Interfaces</a>", Internet-Draft draft-bernardos-netext-ll-statement-01, March 2010.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.yokota-netlmm-pmipv6-mn-itho-support">[I-D.yokota-netlmm-pmipv6-mn-itho-support]</b></td>
<td class="top">
<a>Yokota, H</a>, <a>Gundavelli, S</a>, <a>Trung, T</a>, <a>Hong, Y</a> and <a>K Leung</a>, "<a href="http://tools.ietf.org/html/draft-yokota-netlmm-pmipv6-mn-itho-support-03">Virtual Interface Support for IP Hosts</a>", Internet-Draft draft-yokota-netlmm-pmipv6-mn-itho-support-03, March 2010.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.bernardos-mif-pmip">[I-D.bernardos-mif-pmip]</b></td>
<td class="top">
<a>Bernardos, C</a>, <a>Melia, T</a>, <a>Seite, P</a> and <a>J Korhonen</a>, "<a href="http://tools.ietf.org/html/draft-bernardos-mif-pmip-02">Multihoming extensions for Proxy Mobile IPv6</a>", Internet-Draft draft-bernardos-mif-pmip-02, March 2010.</td>
</tr>
<tr>
<td class="reference"><b id="I-D.jeyatharan-netext-multihoming-ps">[I-D.jeyatharan-netext-multihoming-ps]</b></td>
<td class="top">
<a>Jeyatharan, M</a> and <a>C Ng</a>, "<a href="http://tools.ietf.org/html/draft-jeyatharan-netext-multihoming-ps-02">Multihoming Problem Statement in NetLMM</a>", Internet-Draft draft-jeyatharan-netext-multihoming-ps-02, March 2010.</td>
</tr>
<tr>
<td class="reference"><b id="NTMS2008">[NTMS2008]</b></td>
<td class="top">
<a>Bertin, P.</a>, "<a>A Distributed Dynamic Mobility Management Scheme designed for Flat IP Architectures.  </a>", NTMS'2008 , November 2008.</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Pierrick Seite</span> 
	  <span class="n hidden">
		<span class="family-name">Seite</span>
	  </span>
	</span>
	<span class="org vcardline">France Telecom - Orange</span>
	<span class="adr">
	  <span>4, rue du Clos Courtel, BP 91226</span>

	  <span class="vcardline">
		<span class="locality">Cesson-Sevigne</span>,  
		<span class="region"></span>
		<span class="code">35512</span>
	  </span>
	  <span class="country-name vcardline">France</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:pierrick.seite@orange.com">pierrick.seite@orange.com</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Philippe Bertin</span> 
	  <span class="n hidden">
		<span class="family-name">Bertin</span>
	  </span>
	</span>
	<span class="org vcardline">France Telecom - Orange</span>
	<span class="adr">
	  <span>4, rue du Clos Courtel, BP 91226</span>

	  <span class="vcardline">
		<span class="locality">Cesson-Sevigne</span>,  
		<span class="region"></span>
		<span class="code">35512</span>
	  </span>
	  <span class="country-name vcardline">France</span>
	</span>
	<span class="vcardline">EMail: <a href="mailto:philippe.bertin@orange.com">philippe.bertin@orange.com</a></span>

  </address>
</div>

</body>
</html>