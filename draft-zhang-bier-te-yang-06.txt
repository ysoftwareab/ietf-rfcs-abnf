



BIER WG                                                     Zheng. Zhang
Internet-Draft                                                 Cui. Wang
Intended status: Standards Track                               Ran. Chen
Expires: September 12, 2019                                  Fangwei. Hu
                                                         ZTE Corporation
                                                       Mahesh. Sivakumar
                                                     Cisco Systems, Inc.
                                                            Huanan. Chen
                                                           China Telecom
                                                          March 11, 2019


                           BIER TE YANG model
                      draft-zhang-bier-te-yang-06

Abstract

   This document defines a YANG data model for BIER TE configuration and
   operation.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on September 12, 2019.

Copyright Notice

   Copyright (c) 2019 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must



Zhang, et al.          Expires September 12, 2019               [Page 1]

Internet-Draft             BIER TE YANG Model                 March 2019


   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Design of the Data Model  . . . . . . . . . . . . . . . . . .   2
   3.  BIER-TE configuration . . . . . . . . . . . . . . . . . . . .   3
   4.  Notifications . . . . . . . . . . . . . . . . . . . . . . . .   4
   5.  RPCs  . . . . . . . . . . . . . . . . . . . . . . . . . . . .   4
   6.  BIER TE YANG model  . . . . . . . . . . . . . . . . . . . . .   4
   7.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .  13
   8.  Acknowledgement . . . . . . . . . . . . . . . . . . . . . . .  14
   9.  Normative References  . . . . . . . . . . . . . . . . . . . .  14
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .  15

1.  Introduction

   [I-D.ietf-bier-te-arch] introduces an architecture for BIER-TE:
   Traffic Engineering for Bit Index Explicit Replication (BIER).  This
   document defines a YANG data model for BIER TE.  The content is in
   keeping with the TE architecture draft.  In addition, this YANG data
   model contains BIER TE frr items of [I-D.eckert-bier-te-frr].

2.  Design of the Data Model

   The BIER TE YANG model includes BIER TE adjancency configuration and
   forwarding items configuration.  Some features can also be used to
   enhance BIER TE function, like ECMP and FRR.

      module: ietf-bier-te
        augment /rt:routing:
          +--rw bier-te
             +--rw subdomain* [subdomain-id]
                +--rw subdomain-id    uint16
                +--rw te-adj-id
                |  +--rw si* [si]
                |     +--rw si     uint16
                |     +--rw adj* [adj-id]
                |        +--rw adj-id     uint16
                |        +--rw adj-if     if:interface-ref
                |        +--rw bp-type?   enumeration
                +--rw te-bift-id
                |  +--rw type?    enumeration
                |  +--rw value    rt-types:mpls-label
                +--rw bsl* [fwd-bsl]
                |  +--rw fwd-bsl    uint16



Zhang, et al.          Expires September 12, 2019               [Page 2]

Internet-Draft             BIER TE YANG Model                 March 2019


                |  +--rw si* [si]
                |     +--rw si            uint16
                |     +--rw te-bift-id
                |     |  +--rw type?    enumeration
                |     |  +--rw value    rt-types:mpls-label
                |     +--rw fwd-items* [te-bp]
                |        +--rw te-bp       uint16
                |        +--rw bp-type?    enumeration
                |        +--rw (fwd-type)
                |        |  +--:(connected)
                |        |  +--:(routed)
                |        |  +--:(local-decap)
                |        |  +--:(other)
                |        +--rw dnr-flag?   boolean
                |        +--rw out-info
                |        |  +--rw fwd-intf          if:interface-ref
                |        |  +--rw te-out-bift-id
                |        |     +--rw type?    enumeration
                |        |     +--rw value    rt-types:mpls-label
                |        +--rw te-frr {bier-te-frr}?
                |        |  +--rw frr-index?      uint16
                |        |  +--rw resetbitmask* [bitmask]
                |        |     +--rw bitmask    bit-string
                |        +--rw te-ecmp* [out-if] {bier-te-ecmp}?
                |           +--rw out-if            if:interface-ref
                |           +--rw te-out-bift-id
                |              +--rw type?    enumeration
                |              +--rw value    rt-types:mpls-label
                +--rw te-frr-items {bier-te-frr}?
                   +--rw btaft* [frr-index]
                      +--rw frr-index     uint16
                      +--rw frr-si        uint16
                      +--rw frr-bsl       uint16
                      +--rw addbitmask* [bitmask]
                         +--rw bitmask    bit-string

        notifications:
          +---n bier-te-notification
             +--ro bp-is-zero* [if-index]
                +--ro if-index    if:interface-ref
                +--ro bp-type?    enumeration

3.  BIER-TE configuration

   The BIER-TE forwarding item is indexed by the combination of sub-
   domain-id, BitStringLength and set identifier.





Zhang, et al.          Expires September 12, 2019               [Page 3]

Internet-Draft             BIER TE YANG Model                 March 2019


   One interface can be used in different sub-domain, so the BIER TE
   adjacency information is managed by BIER TE function other than by
   interface itself.

   Because the BIER-TE is controlled by controller now, the information
   about IGP is not defined.  If in the future the IGP is used to carry
   the information about BIER-TE, the IGP extension will be added in
   this document.

4.  Notifications

   If the adjacency id of one adjacency is set to zero, the value is
   invalid.  The notification should be sent to controller and network
   manager.

5.  RPCs

   TBD.

6.  BIER TE YANG model

<CODE BEGINS> file "ietf-bier-te.yang"

   module ietf-bier-te {

    yang-version 1.1;

    namespace "urn:ietf:params:xml:ns:yang:ietf-bier-te";

    prefix bier-te;

    import ietf-routing {
        prefix "rt";
        reference "RFC8022";
    }

    import ietf-interfaces {
        prefix "if";
        reference "RFC7223";
    }

    import ietf-routing-types {
        prefix "rt-types";
        reference "RFC8294";
    }

    organization " IETF BIER(Bit Indexed Explicit Replication)
                   Working Group";



Zhang, et al.          Expires September 12, 2019               [Page 4]

Internet-Draft             BIER TE YANG Model                 March 2019


    contact
        "WG Web:   <http://tools.ietf.org/wg/bier/>
         WG List:  <mailto:bier@ietf.org>

         Editor:   Zheng Zhang
                   <mailto:zhang.zheng@zte.com.cn>
         Editor:   Cui Wang
                   <mailto:wang.cui1@zte.com.cn>
         Editor:   Ran Chen
                   <mailto:chen.ran@zte.com.cn>
         Editor:   Fangwei Hu
                   <mailto:hu.fangwei@zte.com.cn>
         Editor:   Mahesh Sivakumar
                   <mailto:masivaku@cisco.com>
        ";

    description
        " The module defines the YANG definitions for BIER TE.

          Copyright (c) 2018 IETF Trust and the persons
          identified as authors of the code.  All rights reserved.

          Redistribution and use in source and binary forms, with or
          without modification, is permitted pursuant to, and subject
          to the license terms contained in, the Simplified BSD License
          set forth in Section 4.c of the IETF Trust's Legal Provisions
          Relating to IETF Documents
          (http://trustee.ietf.org/license-info).
          This version of this YANG module is part of RFC 3618; see
          the RFC itself for full legal notices.";

    revision 2019-03-11 {
        description
        "Initial revision.";
        reference
          "draft-ietf-bier-te-arch: Traffic Engineering for Bit Index
           Explicit Replication (BIER-TE)";
    }

    /*
    * Features
    */
    feature bier-te-frr {
        description
            "Support Fast Re-route feature in BIER TE.";
    }
    feature bier-te-ecmp {
        description



Zhang, et al.          Expires September 12, 2019               [Page 5]

Internet-Draft             BIER TE YANG Model                 March 2019


            "Support ECMP feature in BIER TE.";
    }

    typedef bit-string {
        type uint16;
        description "The bit mask of one bit-string.";
    }

    grouping te-frr {
        description "The TE fast re-route information.";
        list btaft {
            key "frr-index";
            description "The index of the frr paths. This item can be
                         used for multiple links protection in
                         different SI.";
            leaf frr-index {
                type uint16;
                mandatory true;
                description "The frr item index.";
            }
            leaf frr-si{
                type uint16;
                mandatory true;
                description "The set identifier of this forwarding
                             item.";
            }
            leaf frr-bsl {
                type uint16;
                mandatory true;
                description "The value of bitstringlength.";
            }
            list addbitmask {
                key "bitmask";
                description "The adding bitmask of the forwarding
                             item.";
                leaf bitmask {
                    type bit-string;
                    description "The adding bitmask of the forwarding
                                 item. This item should be merged
                                 into the packet's bit-string.";
                }
            }
        }
    }

    grouping fwd-type {
        description "The collection of all possible forwarding types.";
        choice fwd-type {



Zhang, et al.          Expires September 12, 2019               [Page 6]

Internet-Draft             BIER TE YANG Model                 March 2019


            mandatory true;
            case connected {
                description "The forwarding type is connected.
                             Mostly connected interfaces.";
                        }
            case routed {
                description "The forwarding type is routed.
                             Mostly not connected interfaces.";
            }
            case local-decap {
                description "Means that the packet should be
                             decapsulated and forward out
                             of BIER domain.";
            }
            case other {
                description "Means that the packet should be
                             discarded.";
            }
            description "The collection of all possible forwarding
                         types.";
        }
    }

    grouping bp-type {
        description "The collection of all possible adjacency type.";

        leaf bp-type {
            type enumeration {
                enum p2p {
                    description "Describes p2p adjacency.";
                }
                enum bfer {
                    description "Describes bfer adjacency.";
                }
                enum leaf-bfer {
                    description "Describes leaf-bfer adjacency.
                                 There is no next BFR that the packet
                                 should be forwarded.";
                }
                enum lan {
                    description "Describes lan adjacency.";
                }
                enum spoke {
                    description "Describes spoke adjacency of
                                 hub-and-spoke.";
                }
                enum ring-clockwise {
                    description "Describes clockwise adjacency in



Zhang, et al.          Expires September 12, 2019               [Page 7]

Internet-Draft             BIER TE YANG Model                 March 2019


                                 ring.";
                }
                enum ring-counterclockwise {
                    description "Describes counterclockwise adjacency in
                                 ring.";
                }
                enum ecmp {
                    description "Describes ecmp adjacency.
                                 When the type is set to ecmp,
                                 the corresponding ecmp entry
                                 should be used to balance the load.";
                }
                enum virtual-link {
                    description "Describes virtual adjacency
                                 between two indirect connect
                                 nodes.";
                }
                enum other {
                    description "Describes other id type of
                                 adjacency.";
                }
            }
            description "The collection of all possible adjacency
                         type.";
        }
    }

    grouping te-bift-id {
        description "The index of BIER forwarding items. It usually
                     represents the combination of [SD, BSL, SI].";
        leaf type {
            type enumeration {
                enum mpls {
                    description "The bift-id value is represent the
                                 BIER TE mpls forwarding plane. It
                                 is a mpls label.";
                }
                enum eth {
                    description "The bift-id value is represent the
                                 BIER TE ethernet forwarding plane.
                                 It is an index of ethernet
                                 encapsulation.";
                }
                enum other {
                    description "Describes other type of te-bift-id.";
                }
            }
            description "The types of BIER TE bift-id. If this type



Zhang, et al.          Expires September 12, 2019               [Page 8]

Internet-Draft             BIER TE YANG Model                 March 2019


                         is not set, mpls is default type.";
        }
        leaf value {
            type rt-types:mpls-label;
            mandatory true;
            description "The bift-id value of the forwarding
                         item. It can be a mpls label or an
                         index of ethernet encapsulation which
                         is used to represent specific
                         combination of [SD, BSL, SI]. The
                         ethernet index value is the same range
                         (20bits) as mpls label.";
        }
    }

    grouping te-items {
        description "The BIER TE forwarding items collection.";
        uses fwd-type;

        leaf dnr-flag {
            type boolean;
            description
              "When the flag is set to 1, the BP of adjacency
               should not be reset when packet copies are
               created. The flag makes sense only when the
               forwarding type is 'connected'.";
        }

        container out-info {
            description "The information of out forwarding
                         packets. Includes the outbound interface
                         and the bift-id of next hop.";
            leaf fwd-intf {
                type if:interface-ref;
                mandatory true;
                description "The out interface of this
                             forwarding item.";
            }
            container te-out-bift-id {
                description "The bift-id information
                             corresponding to a specific
                             outbound interface.";
                uses te-bift-id;
            }
        }

        container te-frr {
            if-feature bier-te-frr;



Zhang, et al.          Expires September 12, 2019               [Page 9]

Internet-Draft             BIER TE YANG Model                 March 2019


            leaf frr-index {
                type uint16;
                description "The index of this frr path.";
            }
            list resetbitmask {
                key "bitmask";
                description "The deleting bitmask of the
                             forwarding item.";
                leaf bitmask {
                    type bit-string;
                    description "The deleting bitmask of the
                                 forwarding item.";
                }
            }
            description "If this link is protected, frr items can
                         be used to forward flows when this link
                         is down.";
        }
    }

    grouping fwd-items {
        list si {
            key "si";
            description "The forwarding items of one set identifier.";
            leaf si{
                type uint16;
                mandatory true;
                description "The set identifier of this forwarding
                             item.";
            }
                        container te-bift-id {
                description "The bift-id which is used to locate the
                             specific forwarding item.";
                uses te-bift-id;
            }

            list fwd-items {
                key "te-bp";
                description "The forwarding information of one BIER TE
                             item.";
                leaf te-bp {
                    type uint16;
                    mandatory true;
                    description "The bit index of a BIER TE forwarding
                                 item.";
                }

                uses bp-type;



Zhang, et al.          Expires September 12, 2019              [Page 10]

Internet-Draft             BIER TE YANG Model                 March 2019


                uses te-items;

                list te-ecmp {
                    if-feature bier-te-ecmp;
                    key "out-if";
                    leaf out-if {
                        type if:interface-ref;
                        description "The outgoing interface.";
                    }
                    container te-out-bift-id {
                        description "The bift-id info for a specific
                                     outbound interface.";
                        uses te-bift-id;
                    }
                    description "The list of the ecmp paths. When the
                                 type of BP is set to ecmp, this
                                 interface ecmp list should be used to
                                 balance the load on each interface.";
                }
            }
        }
        description "The forwarding items in one combination of
                     SD, BSL and SI.";
    }

    grouping te-info {
        description "The BIER TE forwarding information.";
        list subdomain {
            key "subdomain-id";
            description "The forwarding items of one sub-domain.";
            leaf subdomain-id {
                type uint16;
                description "The sub-domain-id of this sub-domain.";
            }

            container te-adj-id {
                list si {
                    key "si";
                    description "The forwarding items of a set
                                 identifier.";
                    leaf si{
                        type uint16;
                        mandatory true;
                        description "The set identifier of this
                                     forwarding item.";
                    }

                    list adj {



Zhang, et al.          Expires September 12, 2019              [Page 11]

Internet-Draft             BIER TE YANG Model                 March 2019


                        key "adj-id";
                        description "The ID of an adjacency.";
                        leaf adj-id {
                            type uint16;
                            mandatory true;
                            description "The adjacency id.";
                        }
                        leaf adj-if {
                            type if:interface-ref;
                            mandatory true;
                            description "The corresponding interface
                                         of this adjacency.";
                        }
                        uses bp-type;
                    }
                }
                description "This adjacency ID information for BIER TE
                             in a SI.";
            }

                        container te-bift-id {
                description "The bift-id which is used to locate
                             the specific forwarding item.";
                uses te-bift-id;
            }

            list bsl {
                key "fwd-bsl";
                description "The forwarding items in one BSL.";
                leaf fwd-bsl {
                    type uint16;
                    description "The value of bitstringlength.";
                }
                uses fwd-items;
            }

            container te-frr-items {
                if-feature bier-te-frr;
                uses te-frr;
                description "The TE protective fast re-route items.";
            }
        }
    }

    /*
    * data nodes
    */
    augment "/rt:routing" {



Zhang, et al.          Expires September 12, 2019              [Page 12]

Internet-Draft             BIER TE YANG Model                 March 2019


        description "The BIER TE information.";
        container bier-te {
            description "The BIER TE information container.";
            uses te-info;
        }
    }

    /*
    * Notifications
    */
    notification bier-te-notification {
        description
          "The notification is sent when a condition changes.";
        list bp-is-zero {
            key "if-index";
            description "The adjacency id is zero. It is invalid.";
            leaf if-index {
                type if:interface-ref;
                description "The adjacency id is zero.";
            }
            uses bp-type;
        }
    }
}
<CODE ENDS>

7.  IANA Considerations

   The IANA is requested to assign two new URIs from the IETF XML
   registry ([RFC3688]).  Authors are suggesting the following URI:

   URI: urn:ietf:params:xml:ns:yang:ietf-bier-te

   Registrant Contact: BIER WG

   XML: N/A, the requested URI is an XML namespace

   This document also requests one new YANG module name in the YANG
   Module Names registry ([RFC6020]) with the following suggestion:

   name: ietf-bier-te

   namespace: urn:ietf:params:xml:ns:yang:ietf-bier-te

   prefix: bier-te

   reference: RFC XXXX




Zhang, et al.          Expires September 12, 2019              [Page 13]

Internet-Draft             BIER TE YANG Model                 March 2019


8.  Acknowledgement

   The authors would like to thank Min Gu ( gumin20181129@163.com) for
   her testing, verification and valuable suggestion.

9.  Normative References

   [I-D.eckert-bier-te-frr]
              Eckert, T., Cauchie, G., Braun, W., and M. Menth,
              "Protection Methods for BIER-TE", draft-eckert-bier-te-
              frr-03 (work in progress), March 2018.

   [I-D.ietf-bier-bier-yang]
              Chen, R., hu, f., Zhang, Z., dai.xianxian@zte.com.cn, d.,
              and M. Sivakumar, "YANG Data Model for BIER Protocol",
              draft-ietf-bier-bier-yang-04 (work in progress), September
              2018.

   [I-D.ietf-bier-te-arch]
              Eckert, T., Cauchie, G., Braun, W., and M. Menth, "Traffic
              Engineering for Bit Index Explicit Replication (BIER-TE)",
              draft-ietf-bier-te-arch-01 (work in progress), October
              2018.

   [RFC3688]  Mealling, M., "The IETF XML Registry", BCP 81, RFC 3688,
              DOI 10.17487/RFC3688, January 2004,
              <https://www.rfc-editor.org/info/rfc3688>.

   [RFC6020]  Bjorklund, M., Ed., "YANG - A Data Modeling Language for
              the Network Configuration Protocol (NETCONF)", RFC 6020,
              DOI 10.17487/RFC6020, October 2010,
              <https://www.rfc-editor.org/info/rfc6020>.

   [RFC6087]  Bierman, A., "Guidelines for Authors and Reviewers of YANG
              Data Model Documents", RFC 6087, DOI 10.17487/RFC6087,
              January 2011, <https://www.rfc-editor.org/info/rfc6087>.

   [RFC7223]  Bjorklund, M., "A YANG Data Model for Interface
              Management", RFC 7223, DOI 10.17487/RFC7223, May 2014,
              <https://www.rfc-editor.org/info/rfc7223>.

   [RFC8279]  Wijnands, IJ., Ed., Rosen, E., Ed., Dolganow, A.,
              Przygienda, T., and S. Aldrin, "Multicast Using Bit Index
              Explicit Replication (BIER)", RFC 8279,
              DOI 10.17487/RFC8279, November 2017,
              <https://www.rfc-editor.org/info/rfc8279>.





Zhang, et al.          Expires September 12, 2019              [Page 14]

Internet-Draft             BIER TE YANG Model                 March 2019


   [RFC8349]  Lhotka, L., Lindem, A., and Y. Qu, "A YANG Data Model for
              Routing Management (NMDA Version)", RFC 8349,
              DOI 10.17487/RFC8349, March 2018,
              <https://www.rfc-editor.org/info/rfc8349>.

Authors' Addresses

   Zheng(Sandy) Zhang
   ZTE Corporation
   No. 50 Software Ave, Yuhuatai Distinct
   Nanjing
   China

   Email: zhang.zheng@zte.com.cn


   Cui(Linda) Wang
   ZTE Corporation

   Email: lindawangjoy@gmail.com


   Ran Chen
   ZTE Corporation
   No. 50 Software Ave, Yuhuatai Distinct
   Nanjing
   China

   Email: chen.ran@zte.com.cn


   Fangwei Hu
   ZTE Corporation
   No.889 Bibo Rd
   Shanghai
   China

   Email: hu.fangwei@zte.com.cn


   Mahesh Sivakumar
   Cisco Systems, Inc.
   510 McCarthy Blvd
   Milpitas,California 95035
   United States

   Email: masivaku@cisco.com




Zhang, et al.          Expires September 12, 2019              [Page 15]

Internet-Draft             BIER TE YANG Model                 March 2019


   Huanan Chen
   China Telecom
   109 West Zhongshan Ave
   Guangzhou, Guangdong  510630
   China

   Phone: +86 20 38639346
   Email: chenhuanan@gsta.com











































Zhang, et al.          Expires September 12, 2019              [Page 16]
