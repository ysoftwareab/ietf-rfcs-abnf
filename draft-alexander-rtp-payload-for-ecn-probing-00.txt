
Network Working Group                                  C. Alexander, Ed.
Internet-Draft                                                J. Babiarz
Expires: August 15, 2005                                          Nortel
                                                       February 11, 2005


                   RTP Payload Format for ECN Probing
           draft-alexander-rtp-payload-for-ecn-probing-00.txt

Status of this Memo

   This document is an Internet-Draft and is subject to all provisions
   of Section 3 of RFC 3667.  By submitting this Internet-Draft, each
   author represents that any applicable patent or other IPR claims of
   which he or she is aware have been or will be disclosed, and any of
   which he or she become aware will be disclosed, in accordance with
   RFC 3668.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as
   Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/ietf/1id-abstracts.txt.

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html.

   This Internet-Draft will expire on August 15, 2005.

Copyright Notice

   Copyright (C) The Internet Society (2005).

Abstract

   This memo defines a Real Time Transport Protocol (RTP) payload format
   for use when probing for congestion using Explicit Congestion
   Detection (ECN).  This payload format is intended for use with the
   probing mechanisms described in [3].  While defined in terms of the
   specific application of admission control, it is desirable to overlay
   this format with other probing mechanisms so as to reduce the number



Alexander & Babiarz      Expires August 15, 2005                [Page 1]

Internet-Draft                 ECN Probing                 February 2005


   of probing packet formats.

Table of Contents

   1.  Introduction . . . . . . . . . . . . . . . . . . . . . . . . .  3
   2.  Terminology  . . . . . . . . . . . . . . . . . . . . . . . . .  4
   3.  Definitions  . . . . . . . . . . . . . . . . . . . . . . . . .  5
   4.  RTP Payload Format for Real-Time ECN Admission Control . . . .  6
     4.1   Registration . . . . . . . . . . . . . . . . . . . . . . .  6
     4.2   IP Header Fields . . . . . . . . . . . . . . . . . . . . .  6
     4.3   RTP Header Fields  . . . . . . . . . . . . . . . . . . . .  6
     4.4   Payload Format . . . . . . . . . . . . . . . . . . . . . .  6
       4.4.1   Version  . . . . . . . . . . . . . . . . . . . . . . .  7
       4.4.2   Sender Congestion Indication (SCI) . . . . . . . . . .  7
       4.4.3   Responder Congestion Indication (RCI)  . . . . . . . .  7
       4.4.4   Sender Congestion Indication (SCI) Sequence Number . .  7
       4.4.5   Reserved . . . . . . . . . . . . . . . . . . . . . . .  7
   5.  Considerations for New Payload Format  . . . . . . . . . . . .  8
     5.1   Extensibility Considerations . . . . . . . . . . . . . . .  8
     5.2   Flexibility Considerations . . . . . . . . . . . . . . . .  8
   6.  Security Considerations  . . . . . . . . . . . . . . . . . . .  9
   7.  IANA Considerations  . . . . . . . . . . . . . . . . . . . . . 10
   8.  Acknowledgements . . . . . . . . . . . . . . . . . . . . . . . 11
   9.  References . . . . . . . . . . . . . . . . . . . . . . . . . . 12
     9.1   Normative References . . . . . . . . . . . . . . . . . . . 12
     9.2   Informative References . . . . . . . . . . . . . . . . . . 12
       Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . 12
       Intellectual Property and Copyright Statements . . . . . . . . 14























Alexander & Babiarz      Expires August 15, 2005                [Page 2]

Internet-Draft                 ECN Probing                 February 2005


1.  Introduction

   This memo defines a new RTP payload format for use with applications
   requiring congestion detection along the data path, verification of
   data path connectivity, or measurement of Round Trip Time (RTT)
   between two endpoints, for example, admission control of a real-time
   session.  The format described herein is intended for use with the
   mechanisms described in "Congestion Notification Process for
   Real-Time Traffic" [2], which defines the use of the Explicit
   Congestion Detection (ECN) bits in the Internet Protocol (IP) header
   as a means to detect congestion in the network for real-time
   inelastic flows.  The new format can be used to provide the
   capabilities described in "Admission Control Use Case for Real-time
   ECN" [3], although it may additionally be used in other contexts.

   The new RTP payload format defined herein is called "admcntl".
   Packets utilizing this payload are carried as RTP traffic through the
   IP network.  Packets carrying this payload are treated the same as
   any other RTP packet with the exception of play-back by the receiving
   device.

   The advantages of using this new payload format are:

   1.  congestion detection can be performed using a simple probing
       mechanism without having to extend other protocols;
   2.  the payload format accommodates both one-way and
       two-way/loop-back mechanisms;
   3.  the payload format allows for limited detection of devices making
       inappropriate changes to the ECN markings in the network;
   4.  the packet carrying the payload can vary in size from the minimum
       necessary to carry the payload, to a size padded to mimic a
       specific codec.

   Applications will use this payload format to create and send RTP
   probe packets through the IP network to determine the highest state
   of congestion along the path taken by the packets.  Depending on the
   probing mechanism by an implementation, some of the fields defined
   may not be used.

   In all uses, applications receiving this payload MUST NOT attempt to
   play it as actual media.

   This memo only defines the new payload format.  Examples of its usage
   can be found in [3].







Alexander & Babiarz      Expires August 15, 2005                [Page 3]

Internet-Draft                 ECN Probing                 February 2005


2.  Terminology

   In this document, the key words "MUST", "MUST NOT", "REQUIRED",
   "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY",
   and "OPTIONAL" are to be interpreted as described in RFC 2119 [9] and
   indicate requirement levels for compliant implementations.













































Alexander & Babiarz      Expires August 15, 2005                [Page 4]

Internet-Draft                 ECN Probing                 February 2005


3.  Definitions

   The following terms are used in this document:

   Cheater: A device in the network that makes inappropriate changes to
      the ECN markings in the network.  A cheating device might re-mark
      the ECN bits in the IP header in order to hide congestion from an
      endpoint (i.e., by lowering the ECN congestion marking), or might
      force an endpoint to think congestion is present when it is not
      (i.e., by raising the ECN congestion marking).  Due to the nature
      of ECN and how conformant network devices mark ECN for real-time
      inelastic flows, it is possible to detect the presence of cheater
      devices which lower the ECN marking, but not those that raise it.

   Request Probe Packet: In the context of a one-way probing mechanism,
      the Request Probe Packet is an RTP packet utilizing the "admcntl"
      payload format defined herein.  In the context of a two-way
      probing mechanism, it is also an RTP packet using the "admcntl"
      payload format, but it is limited by definition to flow only from
      the Sender to the Responder.

   Responder: In the context of a two-way/loop-back probing mechanism,
      the Responder is an endpoint device which receives a Request Probe
      Packet from the Sender, and generates a Response Probe Packet in
      response.  In the context of a one-way probing mechanism, the
      Responder is simply an endpoint device which receives a Request
      Probe Packet from the Sender.  In this context, however, the
      Responder does not actually respond with a Response Probe Packet.

   Response Probe Packet: In the context of a two-way probing mechanism,
      the Response Probe Packet is an RTP packet utilizing the "admcntl"
      payload.  It differs from the Request Probe Packet in that it is
      limited by definition to flow only from the Responder to the
      Sender.  A Response Probe Packet has no definition in the context
      of a one-way probing mechanism.

   Sender: In the context of both a one-way and a two-way/loop-back
      probing mechanism, the Sender is an endpoint device which
      generates a Request Probe Packet.












Alexander & Babiarz      Expires August 15, 2005                [Page 5]

Internet-Draft                 ECN Probing                 February 2005


4.  RTP Payload Format for Real-Time ECN Admission Control

   The "admcntl" payload is transported in RTP packets.  However, it is
   not part of an RTP stream.  It therefore has no requirements to use
   similar properties of the media to be admitted.

4.1  Registration

   The new RTP payload format is defined as "admcntl", with a MIME type
   of "audio/admcntl" for audio and a MIME type of "video/admcntl" for
   video.  The RTP payload type for RTP packets carrying this payload is
   determined dynamically through methods outside the scope of this
   document.

4.2  IP Header Fields

   DSCP: The DSCP set in the IP header is a critical component of the
      ECN method as outlined in [2].  It should be set appropriately for
      the session media for which admission control is being performed.
   ECN: Unless attempting to detect for the presence of Cheaters along
      the media path, an application MUST set the two-bit ECN field in
      the IP header to 01, which indicates that it is an ECN-capable
      transport, with no congestion experienced.  If attempting to
      detect for the presence of Cheaters, the ECN field SHOULD be set
      as required by the detection method being used.

4.3  RTP Header Fields

   Payload Type: The payload type field MUST be filled with a value
      determined dynamically, and communicated to all application
      devices involved.

4.4  Payload Format

   The "admcntl" payload format is shown in Figure 1.

    0                   1                   2                   3
    0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
   |Version|SCI|RCI|      SCI Sequence Number      |    Reserved   |
   +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                    Figure 1: admcntl Payload Format

   It consists of five fields: Version, SCI, RCI, SCI Sequence Number,
   and Reserved.





Alexander & Babiarz      Expires August 15, 2005                [Page 6]

Internet-Draft                 ECN Probing                 February 2005


4.4.1  Version

   The Version field designates the version of the payload format.  At
   the time of this writing, this field MUST be set to zero.  This field
   is provided for future extensibility of the payload to carry other
   information.

4.4.2  Sender Congestion Indication (SCI)

   This field contains a two-bit ECN value associated with the Sender.
   It has meaning in both one-way and two-way/loop-back probing
   mechanisms.

   For both one-way and two-way/loop-back probing mechanisms, the Sender
   MUST set this field in the Request Probe Packet to the two-bit ECN
   value it uses to send the packet.

   For a two-way/loop-back probing mechanism, the Responder MUST set
   this field in the Response Probe Packet to the two-bit ECN value
   retrieved from the ECN field in the IP header of the associated
   Request Probe Packet.

4.4.3  Responder Congestion Indication (RCI)

   This field contains a two-bit ECN value associated with the
   Responder.  It has meaning only with two-way/loop-back probing
   mechanisms.

   For two-way/loop-back probing mechanisms, the Responder MUST set this
   field in the Response Probe Packet to the two-bit ECN value it uses
   to send the packet.

   For a one-way probing mechanism, this field is unused.

4.4.4  Sender Congestion Indication (SCI) Sequence Number

   This field contains a 16-bit sequence number.  It has meaning only
   with two-way/loop-back probing mechanisms.

   For two-way/loop-back probing mechanisms, the Responder MUST set this
   field in the Response Probe Packet to the 16-bit sequence number in
   the RTP header of the associated Request Probe Packet.

   For a one-way probing mechanism, this field is unused.

4.4.5  Reserved

   This field contains eight bits which are reserved for future use.



Alexander & Babiarz      Expires August 15, 2005                [Page 7]

Internet-Draft                 ECN Probing                 February 2005


5.  Considerations for New Payload Format

   There were two main considerations driving the new payload format
   defined in this memo: extensibility and flexibility.

5.1  Extensibility Considerations

   While the intended use for the new payload format is for admission
   control using ECN, the payload format need not be limited to that
   application.  Even for admission control applications which will use
   it, the payload format also need not be limited to the mechanisms
   described in this memo.  With that in mind, the four-bit Version
   field is included to allow for extensibility for future applications
   and/or implementations.

5.2  Flexibility Considerations

   In addition to planning the payload format for extensibility, another
   flexibility consideration is to allow the initial definition of the
   payload to be used in as wide a range of implementations as possible.
   In the simplest form of the two-way/loop-back mechanisms, probing for
   ECN only requires the two-bit SCI field in which to return the
   received ECN marking.  However, the definition of this single field
   does not limit the use of this payload format only to
   two-way/loop-back mechanisms.

   By adding the RCI field for a two-way/loop-back mechanism, and
   extending the definition of the SCI field for one-way probing
   mechanisms, both mechanisms can utilize these fields to perform
   limited detection of Cheaters.  The SCI Sequence Number field is also
   intended to allow for such detection to be performed.

   The minimum length of the payload is 4 octets, although it MAY be
   padded to simulate a specific codec.  In this case, the application
   also needs to ensure that the packets carrying the padded payload are
   sent at the appropriate rate corresponding to the codec being
   mimicked.














Alexander & Babiarz      Expires August 15, 2005                [Page 8]

Internet-Draft                 ECN Probing                 February 2005


6.  Security Considerations

   Security considerations for the use of ECN for real-time inelastic
   flows is covered in [2].  The main consideration to account for here
   is that when the payload is carrying any relevant information for
   admission control, the payload SHOULD be secured, e.g., using "The
   Secure Real-time Transport Protocol (SRTP)" [5] or "Security
   Architecture for the Internet Protocol" [6].











































Alexander & Babiarz      Expires August 15, 2005                [Page 9]

Internet-Draft                 ECN Probing                 February 2005


7.  IANA Considerations

   The Version field in the admcntl payload format will need to be
   administered.  This field should be administered on a first come,
   first served basis.  Additional details will be provided in future
   revisions of this memo.













































Alexander & Babiarz      Expires August 15, 2005               [Page 10]

Internet-Draft                 ECN Probing                 February 2005


8.  Acknowledgements

   The authors acknowledge a great many inputs, including the following:
   John Rutledge, Jeremy Matthews, Marvin Krym, Stephen Dudley, and Kwok
   Ho Chan.














































Alexander & Babiarz      Expires August 15, 2005               [Page 11]

Internet-Draft                 ECN Probing                 February 2005


9.  References

9.1  Normative References

   [1]  Schulzrinne, H., Casner, S., Frederick, R. and V. Jacobson,
        "RTP: A Transport Protocol for Real-Time Applications",
        RFC 3550, January 2005.

   [2]  Babiarz, J., Chan, K. and V. Firoiu, "Congestion Notification
        Process for Real-Time Traffic, draft-babiarz-tsvwg-rtecn-03",
        Internet-Draft Work in Progress, February 2005.

   [3]  Alexander, C., Ed., Babiarz, J. and J. Matthews, "Admission
        Control Use Case for Real-time ECN,
        draft-alexander-rtecn-admission-control-use-case-00",
        Internet-Draft Work in Progress, February 2005.

9.2  Informative References

   [4]  Ramakrishnan, K., Floyd, S. and D. Black, "The Addition of
        Explicit Congestion Notification (ECN) to IP", RFC 3168,
        September 2001.

   [5]  Baugher, M., Carrara, E., McGrew, D., Naslund, M. and K.
        Norrman, "The Secure Real-time Transport Protocol (SRTP)",
        Internet-Draft Work in Progress, March 2004.

   [6]  Kent, S. and R. Atkinson, "Security Architecture for the
        Internet Protocol", Internet-Draft Work in Progress, November
        1998.


Authors' Addresses

   Corey W. Alexander (editor)
   Nortel
   MS 08704A30
   2370 Performance Drive
   Richardson, TX  75287
   US

   Phone: +1 972 684-8320
   Fax:   +1 972 684-1838
   Email: coreya@nortel.com







Alexander & Babiarz      Expires August 15, 2005               [Page 12]

Internet-Draft                 ECN Probing                 February 2005


   Jozef Babiarz
   Nortel
   MS 04331C04
   3500 Carling Avenue
   Ottawa, Ontario  K2H 8E9
   CA

   Phone: +1 613 763-6098
   Fax:   +1 613 763-2231
   Email: babiarz@nortel.com









































Alexander & Babiarz      Expires August 15, 2005               [Page 13]

Internet-Draft                 ECN Probing                 February 2005


Intellectual Property Statement

   The IETF takes no position regarding the validity or scope of any
   Intellectual Property Rights or other rights that might be claimed to
   pertain to the implementation or use of the technology described in
   this document or the extent to which any license under such rights
   might or might not be available; nor does it represent that it has
   made any independent effort to identify any such rights.  Information
   on the procedures with respect to rights in RFC documents can be
   found in BCP 78 and BCP 79.

   Copies of IPR disclosures made to the IETF Secretariat and any
   assurances of licenses to be made available, or the result of an
   attempt made to obtain a general license or permission for the use of
   such proprietary rights by implementers or users of this
   specification can be obtained from the IETF on-line IPR repository at
   http://www.ietf.org/ipr.

   The IETF invites any interested party to bring to its attention any
   copyrights, patents or patent applications, or other proprietary
   rights that may cover technology that may be required to implement
   this standard.  Please address the information to the IETF at
   ietf-ipr@ietf.org.


Disclaimer of Validity

   This document and the information contained herein are provided on an
   "AS IS" basis and THE CONTRIBUTOR, THE ORGANIZATION HE/SHE REPRESENTS
   OR IS SPONSORED BY (IF ANY), THE INTERNET SOCIETY AND THE INTERNET
   ENGINEERING TASK FORCE DISCLAIM ALL WARRANTIES, EXPRESS OR IMPLIED,
   INCLUDING BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE
   INFORMATION HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED
   WARRANTIES OF MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE.


Copyright Statement

   Copyright (C) The Internet Society (2005).  This document is subject
   to the rights, licenses and restrictions contained in BCP 78, and
   except as set forth therein, the authors retain all their rights.


Acknowledgment

   Funding for the RFC Editor function is currently provided by the
   Internet Society.




Alexander & Babiarz      Expires August 15, 2005               [Page 14]


