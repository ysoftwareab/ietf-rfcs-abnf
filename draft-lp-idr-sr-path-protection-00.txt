



IDR WG                                                          Yao. Liu
Internet-Draft                                              Shaofu. Peng
Intended status: Standards Track                         ZTE Corporation
Expires: April 17, 2021                                 October 14, 2020


            BGP extensions of SR policy for path protection
                   draft-lp-idr-sr-path-protection-00

Abstract

   This document proposes extensions of BGP in order to provide path
   protection within a candidate path when delivering SR policy.  And it
   also extends BGP-LS to provide some extra information of the segment
   list in a candidate path in the advertisement.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on April 17, 2021.

Copyright Notice

   Copyright (c) 2020 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.




Liu & Peng               Expires April 17, 2021                 [Page 1]

Internet-Draft         BGP-LS for Shorter SRv6 SID          October 2020


Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  BGP Extensions for Advertising Segment List . . . . . . . . .   3
     2.1.  Extensions of Segment List sub-TLV  . . . . . . . . . . .   3
     2.2.  List Identifier Sub-TLV . . . . . . . . . . . . . . . . .   3
       2.2.1.  List Protection Sub-TLV . . . . . . . . . . . . . . .   4
   3.  BGP-LS Extensions for Distributing Segment List States  . . .   5
   4.  Security Considerations . . . . . . . . . . . . . . . . . . .   5
   5.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   6
   6.  Normative References  . . . . . . . . . . . . . . . . . . . .   6
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   6

1.  Introduction

   Segment Routing [RFC8402] allows a headend node to steer a packet
   flow along any path.

   [I-D.ietf-spring-segment-routing-policy] details the concepts of SR
   Policy and steering into an SR Policy.  An SR Policy is a set of
   candidate paths, each consisting of one or more segment lists.  The
   headend of an SR Policy may learn multiple candidate paths for an SR
   Policy.

   When SR policies are involved and a strict compliance of the policy
   is required, an end-to-end protection should be preferred over a
   local repair mechanism.

   Candidate path can be used for path protection, that is, the lower
   preference candidate path may be designated as the backup for a
   specific or all (active) candidate path(s).

   Despite using candidate path for protection, protection at segment
   list level within an candidate path is also useful.

   [I-D.ietf-idr-segment-routing-te-policy] specifies BGP extensions for
   the advertisement of SR Policies and each candidate path is carried
   in an NLRI, if candidate path is used for protection ,the BGP origin
   must generate multiple NLRIs.  If protection at segment list level is
   possible, only one NLRI is needed which makes the advertisement more
   simple.

   On the other hand, protection in and between candidate path can be
   combined together to provide a more comprehensive protection
   mechanism.

   This document proposes extensions of BGP in order to provide path
   protection in an candidate path when delivering SR policy.



Liu & Peng               Expires April 17, 2021                 [Page 2]

Internet-Draft         BGP-LS for Shorter SRv6 SID          October 2020


   [I-D.ietf-idr-te-lsp-distribution] describes a mechanism to collect
   the SR policy information that is locally available in a node and
   advertise it into BGP Link State (BGP-LS) updates.  This document
   also extends it to provide some extra information of the segment list
   in a candidate path in the BGP-LS advertisement.

2.  BGP Extensions for Advertising Segment List

2.1.  Extensions of Segment List sub-TLV

   Segment List sub-TLV is introduced in
   [I-D.ietf-idr-segment-routing-te-policy] and it includes the elements
   of the paths (i.e., segments).

   This document introduces a one-bit flag in the RESERVED field.

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |     Type      |             Length            |B|  RESERVED   |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      //                           sub-TLVs                          //
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                      Figure 1: Segment List sub-TLV

   B-Flag(Backup Flag): one bit.  When set to 0, it indicates that the
   segment list acts as the active member in the candidate path.  When
   set to 1, it indicates that the segment list acts as the backup path
   in the candidate path.

   Using segment lists for path protection can be compatible with using
   candidate paths.  When a path fails, the backup segment list within
   the same candidate path is used preferentially for path protection.
   If the backup list is also invalid, then other candidate path can be
   enabled for protection.

2.2.  List Identifier Sub-TLV

   This document introduces a new sub-sub-tlv of Segment List sub-TLV,
   where,










Liu & Peng               Expires April 17, 2021                 [Page 3]

Internet-Draft         BGP-LS for Shorter SRv6 SID          October 2020


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |     Type      |    Length     |           RESERVED            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                      List Identifier                          |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      ~                      Optional TLVs                            ~
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                     Figure 2: List Identifier Sub-TLV

   Type: 1 octet.  TBD.

   Length: 1 octet, specifies the length of the value field not
   including Type and Length fields.

   RESERVED: 2 octet of reserved bits.  SHOULD be unset on transmission
   and MUST be ignored on receipt.

   List Identifier: 4 octets.  It is the identifier of the corresponding
   segment list, so that the segment list can be operated according to
   the specified Segment List identifier.

   This sub-TLV is optional and it MUST NOT appear more than once inside
   the Segment List sub-TLV.

2.2.1.  List Protection Sub-TLV

       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |     Type      |    Length     |           RESERVED            |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                    Backup  List ID 1                          |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                          ...                                  |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |                    Backup  List ID N                          |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                     Figure 3: List Identifier Sub-TLV

   Type: 1 octet.  TBD.

   Length: 1 octet, specifies the length of the value field not
   including Type and Length fields.




Liu & Peng               Expires April 17, 2021                 [Page 4]

Internet-Draft         BGP-LS for Shorter SRv6 SID          October 2020


   RESERVED: 2 octet of reserved bits.  SHOULD be unset on transmission
   and MUST be ignored on receipt.

   Backup List ID: 4 octets.  It is the List Identifier of the backup
   segment list that protects this segment list.  If there're multiple
   backup paths, the list ID of each path should be included in the TLV.

3.  BGP-LS Extensions for Distributing Segment List States

   [I-D.ietf-idr-te-lsp-distribution] describes a mechanism to collect
   the SR Policy information that is locally available in a node and
   advertise it into BGP Link State (BGP-LS) updates.  The SR Policy
   information includes status of the candidate path, e.g, whether the
   candidate path is administrative shut or not.

   SR Segment List TLV is defined in [I-D.ietf-idr-te-lsp-distribution]
   to to report the SID-List(s) of a candidate path.  Figure 4 shows the
   flags in SR Segment List TLV.

          0                   1
          0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5
         +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
         |D|E|C|V|R|F|A|T|M|S|B|         |
         +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

                Figure 4: Flag Field of SR Segment List TLV

   The meaning of the D,E,C,V,R,F,A,M can be found in
   [I-D.ietf-idr-te-lsp-distribution] section 6.5.

   This document introduces two new flags, where,

   S-Flag : Indicates the segment list is in administrative shut state
   when set.

   B-Flag : Indicates the segment list is the backup path within the
   candidate path when set, otherwise it is the active path.

4.  Security Considerations

   Procedures and protocol extensions defined in this document do not
   affect the security considerations discussed in
   [I-D.ietf-idr-segment-routing-te-policy] and
   [I-D.ietf-idr-te-lsp-distribution].







Liu & Peng               Expires April 17, 2021                 [Page 5]

Internet-Draft         BGP-LS for Shorter SRv6 SID          October 2020


5.  IANA Considerations

   TBD

6.  Normative References

   [I-D.ietf-idr-segment-routing-te-policy]
              Previdi, S., Filsfils, C., Talaulikar, K., Mattes, P.,
              Rosen, E., Jain, D., and S. Lin, "Advertising Segment
              Routing Policies in BGP", draft-ietf-idr-segment-routing-
              te-policy-09 (work in progress), May 2020.

   [I-D.ietf-idr-te-lsp-distribution]
              Previdi, S., Talaulikar, K., Dong, J., Chen, M., Gredler,
              H., and J. Tantsura, "Distribution of Traffic Engineering
              (TE) Policies and State using BGP-LS", draft-ietf-idr-te-
              lsp-distribution-13 (work in progress), April 2020.

   [I-D.ietf-spring-segment-routing-policy]
              Filsfils, C., Talaulikar, K., Voyer, D., Bogdanov, A., and
              P. Mattes, "Segment Routing Policy Architecture", draft-
              ietf-spring-segment-routing-policy-08 (work in progress),
              July 2020.

   [RFC8402]  Filsfils, C., Ed., Previdi, S., Ed., Ginsberg, L.,
              Decraene, B., Litkowski, S., and R. Shakir, "Segment
              Routing Architecture", RFC 8402, DOI 10.17487/RFC8402,
              July 2018, <https://www.rfc-editor.org/info/rfc8402>.

Authors' Addresses

   Liu Yao
   ZTE Corporation
   Nanjing
   China

   Email: liu.yao71@zte.com.cn


   Peng Shaofu
   ZTE Corporation
   Nanjing
   China

   Email: peng.shaofu@zte.com.cn






Liu & Peng               Expires April 17, 2021                 [Page 6]
