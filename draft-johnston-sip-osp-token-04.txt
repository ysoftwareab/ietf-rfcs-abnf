

Internet Engineering Task Force                            A. Johnston 
Internet Draft                                              D. Rawlins 
Document: draft-johnston-sip-osp-token-04.txt             H. Sinnreich 
February 2003                                                 WorldCom 
Expires: August 2003                                    Stephen Thomas 
                                                          Wave7 Optics 
                                                       Richard Brennan 
                                                           Telxxis LLC 
                                                                       
                                                                       
    
    
          Session Initiation Protocol Private Extension for an  
                          OSP Authorization Token 
    
    
Status of this Memo 
    
   This document is an Internet-Draft and is in full conformance with 
   all provisions of Section 10 of RFC2026.  
    
   Internet-Drafts are working documents of the Internet Engineering 
   Task Force (IETF), its areas, and its working groups.  Note that      
   other groups may also distribute working documents as Internet-
   Drafts. 
    
   Internet-Drafts are draft documents valid for a maximum of six months 
   and may be updated, replaced, or obsoleted by other documents at any 
   time.  It is inappropriate to use Internet-Drafts as reference 
   material or to cite them other than as "work in progress." 
    
   The list of current Internet-Drafts can be accessed at 
        http://www.ietf.org/ietf/1id-abstracts.txt 
   The list of Internet-Draft Shadow Directories can be accessed at 
        http://www.ietf.org/shadow.html. 
    
    
Abstract 
    
   This draft proposes a private extension to the Session Initiation 
   Protocol (SIP) for carrying OSP (Open Settlements Protocol) 
   authorization tokens in applications such as clearinghouses.  
    







 
 
Johnston, et al.        Expires - August 2003                [Page 1] 

Internet-Draft     SIP Extension for OSP Auth Token      February 2003 
 
 
    
Table of Contents 
    
   1. Introduction...................................................2 
   2. Terminology....................................................3 
   3. Design Alternatives............................................3 
   4. Header Field Definition........................................4 
   5. Protocol Semantics.............................................4 
      5.1 User Agents................................................5 
      5.2 Proxies....................................................5 
   6. Example Message................................................5 
   IANA Considerations...............................................6 
   Security Considerations...........................................6 
   Normative References..............................................6 
   Informative References............................................7 
   Authors' Addresses................................................7 
    
    
1.   Introduction 
    
   The problem of interdomain IP telephony calls with QoS is an 
   important problem being addressed using AAA protocols.  The new 
   private SIP [1] header proposed here is part of an approach to 
   solving this problem, which is summarized briefly here. 
    
   Interdomain IP telephony is accomplished today using clearinghouse 
   services and a mix of proprietary and standard AAA protocols.  Making 
   calls with AAA support between service providers that are affiliated 
   to different clearinghouses is a difficult problem. 
    
   Beyond IP telephony it is also desirable to have a consistent AAA 
   approach for all applications on the Internet. 
    
   Work on a general architecture for AAA is proceeding in the IETF 
   AAAarch research group. A framework and examples have been developed 
   for various Internet applications. At the same time, Internet 
   telephone calls can be set up with QoS and security. Since QoS is a 
   valuable network resource, it requires AAA and possibly payments.  
    
   We propose to use existing IETF protocols and proposals in Internet 
   Drafts for interdomain IP telephony calls with QoS as a first step 
   toward a uniform AAA approach. The approach outlined here may be 
   useful later for developing a uniform AAA architecture and protocols 
   for other application layer services. 
    
   Figure 1 shows the model for an interdomain phone call across the 
   Internet with the various entities having business relationships, but 
   not necessarily trust relationships with their correspondents: 
    
 
 
Johnston, et al.        Expires - August 2003                [Page 2] 

Internet-Draft     SIP Extension for OSP Auth Token      February 2003 
 
 
    
    
                              Clearinghouse             
             +------+------+     +------+     +------+------+ 
             |Policy|  OSP | OSP | OSP  | OSP | OSP  |Policy| 
             |Server|Client|<--->|Server|<--->|Client|Server| 
             +------+------+     +------+     +------+------+ 
                | |                                   |  | 
    Domain 1    | +-----+                        +----+  |    Domain 2 
                |       |                        |       | 
            +-----+     |                        |    +-----+ 
            | PEP |     |                        |    | PEP | 
 +-----+    +-----+     |                        |    +-----+    +-----+ 
 | SIP |SIP | SIP |     |                        |    | SIP |SIP | SIP | 
 | UAC |<-->|Proxy|-------SIP INVITE with OSP Token-->|Proxy|<-->| UAS | 
 +-----+    +-----+     |                        |    +-----+    +--+--+ 
                        |                        |                  | 
                        |                        |                  | 
   SIP                  |                        |                  | 
  Phone            +------+                  +------+            +--+--+ 
 +------+          | Edge |       RSVP       | Edge |            |     | 
 | RSVP |    RSVP  |Router|      tunnel      |Router|     RSVP   | MG  | 
 | Host |<-------->|      |<---------------->|      |<---------->|     | 
 +------+          +------+   Transit Nets   +------+            +-----+ 
 
    
                  Figure 1:   Model for interdomain QoS phone call 
    
   While this approach to interdomain authorization is not a complete 
   one, it is currently used today by IP telephony carriers and is 
   useful in limited applications such as in a clearinghouse.  As such, 
   it is appropriate for the header field extension to SIP be registered 
   as a private SIP header per the SIP change process [3]. 
    
2.   Terminology 
    
   In this document, the key words "MUST", "MUST NOT", "REQUIRED", 
   "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", 
   and "OPTIONAL" are to be interpreted as described in RFC 2119 [2] and 
   indicate requirement levels for compliant SIP caller preferences 
   implementations. 
    
3.   Design Alternatives 
    
   The OSP Token is an opaque string to SIP which must be carried in the 
   INVITE passed between domains. As such, the Token could be carried as 
   a MIME attachment.  However, there are three issues with this: 
    
    - Since the Token must be carried with the SDP, the INVITE would  
 
 
Johnston, et al.        Expires - August 2003                [Page 3] 

Internet-Draft     SIP Extension for OSP Auth Token      February 2003 
 
 
      need to have a multipart MIME message body. If either User Agents  
      do not support multipart MIME, the call will fail. 
    
    - The Token is used by both proxies and User Agents.  As such, the  
      proxy would have to decode the multipart MIME message body to  
      extract the token.  The general design of SIP is for message  
      bodies to contain information of interest to end-points only, with 
      information needed by proxies contained in headers. 
    
    - Multipart MIME encoding/decoding adds more delay to an already 
      lengthy call setup procedure, as compared to header processing. 
    
   For these reasons, a new SIP header is proposed instead of a new MIME 
   type for OSP authorization tokens. 
    
   Note that since OSP tokens are commonly constructed according to  
   Cryptographic Message Syntax [3], their size may depend on the size 
   of X.509 certificates embedded in the CMS format. For this reason, 
   entities using this header MUST NOT use UDP for transport.  Instead 
   TLS SHOULD be used. In addition, it is recommended that systems use 
   the abbreviated token format described in Annex D of [4]. 
    
4.   Header Field Definition 
    
   The table below specifies an extension of Table 2 in RFC 3261 [1] for 
   the new header defined here. 
    
                             where proxy ACK BYE CAN INV OPT REG 
   P-OSP-Auth-Token            R    ad    -   -   -   o   -   - 
   P-OSP-Auth-Token           2xx   ad    -   -   -   o   -   - 
    
    
   The "where" column describes the request and response types with 
   which the header filed can be used. "R" indicates a request header, a 
   numeric value in the "where" column indicates the status code the 
   header field is used with.  The "proxy" column describes whether this 
   message header field MAY be added, "a", or deleted, "d", by a proxy 
   server. In the method columns, "o" means optional and "-" means not 
   applicable. 
    
   The Augmented BNF for the header field (using the form and 
   definitions in Section 25 of RFC 3261) is:  
    
        P-OSP-Auth-Token = "P-OSP-Auth-Token" HCOLON token 
    
5.   Protocol Semantics 
    
   The OSP Token is always encoded per base64 and only allowed in INVITE 
   requests and 200 OK responses to INVITEs. 
 
 
Johnston, et al.        Expires - August 2003                [Page 4] 

Internet-Draft     SIP Extension for OSP Auth Token      February 2003 
 
 
    
5.1    User Agents 
    
   A UAC MAY include the header an INVITE requesting QoS using AAA. 
    
   If present in an INVITE, an AAA/QoS UAS MAY validate the token. 
    
   If it is absent or present in the INVITE, an AAA/QoS UAS MAY include 
   the header field in a 200 OK answer. 
    
   A UAC MAY validate the token received in a 200 OK response to an 
   INVITE. 
    
5.2    Proxies 
    
   A proxy participating in the AAA exchange may add, delete, examine or 
   validate the token. 
    
   Otherwise, the header field is ignored. 
    
6.   Example Message 
    
   This SIP INVITE message is an example exchange between the two 
   domains as shown in Figure 1: 
    
   INVITE sips:+1-972-555-5555@domain2.com;user=phone SIP/2.0 
   Via: SIP/2.0/TLS proxy.domain1.com:5061;branch=z9hG4bK3a56d3.1 
   Via: SIP/2.0/TLS phone1.domain1.com:5061;branch=z9hG4bK3a5654 
    ;received=192.0.2.1 
   Max-Forward: 69 
   From: Alice <sips:alice@phone1.domain1.com>;tag=3 
   To: <sips:+1-972-555-5555@domain2.com;user=phone> 
   Call-ID: 123456@domain1.com 
   CSeq: 1 INVITE 
   Contact: <sips:alice@phone1.domain1.com> 
   Record-Route: <sips:proxy.domain1.com;lr> 
   P-OSP-Auth-Token: "YT64VqpfyF467GhIGfHfYT6jH77n8HHGghyHhHUujhJh756t 
   HGTrfvbnjn8HHGTrfvhJhjH776tbB9HG4VQbnj7567GhIGfH 
   6ghyHhHUujpfyF47GhIGfHfYT64VQbnj" 
   Content-Type: application/sdp 
   Content-Length: 184 
    
   v=0 
   o=alice 9735285123 9721273312 IN IP4 phone1.domain1.com 
   s=-   
   c=IN IP4 phone1.domain1.com    
   t=0 0 
   m=audio 9876 RTP/AVP 0  
   a=rtpmap: 0 PCMU/8000  
 
 
Johnston, et al.        Expires - August 2003                [Page 5] 

Internet-Draft     SIP Extension for OSP Auth Token      February 2003 
 
 
   a=qos:mandatory recv confirm 
    
IANA Considerations 
    
   Registration of "P-OSP-Auth-Token" SIP header field 
    
   This document defines a new private SIP header field, "P-OSP-Auth-
   Token".  As recommended by the policy of the Transport Area [3], this 
   header should be registered by the IANA in the SIP header registry, 
   using the RFC number of this document as its reference. 
    
    Name of Header:          P-OSP-Auth-Token 
    
    Short form:              None 
    
    Registrant:              Alan Johnston                                    
                             alan.johnston@wcom.com 
    
    Normative description:   This document 
    
Security Considerations 
    
   The security and handling of OSP tokens is covered in [4] which 
   includes encryption and the use of IPSec.  
    
   The P-OSP-Auth-Token header field may be protected using standard SIP 
   mechanisms such as TLS transport and/or S/MIME encryption as detailed 
   in [1]. 
    
Normative References 
    
  [1]  J. Rosenberg, H. Schulzrinne, G. Camarillo, A. Johnston, J. 
       Peterson, R. Sparks,  M. Handley, and E. Schooler, "SIP: Session 
       Initiation Protocol," Request for Comments (Proposed Standard) 
       3261, Internet Engineering Task Force, June 2002. 
   
  [2]  S. Bradner, "Key words for use in RFCs to indicate requirement 
       levels," Request for Comments (Best Current Practice) 2119, 
       Internet Engineering Task Force, March 1997. 
   
  [3]  R. Housley, "Cryptographic Message Syntax", RFC 2630, June 1999. 
   
  [4]  European Telecommunications Standards Institute. 
       "Telecommunications and Internet Protocol Harmonization Over 
       Networks (TIPHON); Open Settlement Protocol (OSP) for Inter-
       domain pricing, authorization, and usage exchange". Technical 
       Specification 101 321. Version 2.1.0. 
    
    
 
 
Johnston, et al.        Expires - August 2003                [Page 6] 

Internet-Draft     SIP Extension for OSP Auth Token      February 2003 
 
 
Informative References 
    
  [5]  A. Mankin, S. Bradner, R. Mahy, D. Willis, J. Ott, and B. Rosen, 
       "Change Process for the Session Initiation Protocol (SIP),"IETF 
       Internet-Draft, Work in Progress, August 2002. 
   
    
    
Authors' Addresses 
    
   Alan Johnston 
   WorldCom 
   100 S. 4th Street 
   St. Louis, Missouri 63104 
   alan.johnston@wcom.com 
    
   Henry Sinnreich 
   WorldCom 
   400 International Parkway 
   Richardson, Texas 75081 
   USA 
   henry.sinnreich@wcom.com 
    
   Diana Rawlins 
   WorldCom 
   901 International Parkway 
   Richardson, Texas 75081 
   USA 
   diana.rawlins@wcom.com 
    
   Stephen Thomas 
   Wave7 Optics 
   1075 Windward Ridge Parkway 
   Alpharetta, GA 30005 
   USA 
   stephen.thomas@wave7optics.com 
    
   Richard Brennan 
   Telxxis LLC 
   1670 South Amphlett Blvd. 
   Suite 214, No. 1018 
   San Mateo, CA 94402-2511  
   USA 
   rbrennan@telxxis.com 
    
    
Intellectual Property Statement 
    

 
 
Johnston, et al.        Expires - August 2003                [Page 7] 

Internet-Draft     SIP Extension for OSP Auth Token      February 2003 
 
 
   The IETF takes no position regarding the validity or scope of any 
   intellectual property or other rights that might be claimed to 
   pertain to the implementation or use of the technology described in 
   this document or the extent to which any license under such rights 
   might or might not be available; neither does it represent that it 
   has made any effort to identify any such rights. Information on the 
   IETF's procedures with respect to rights in standards-track and 
   standards-related documentation can be found in BCP-11. Copies of 
   claims of rights made available for publication and any assurances of 
   licenses to be made available, or the result of an attempt made to 
   obtain a general license or permission for the use of such 
   proprietary rights by implementors or users of this specification can 
   be obtained from the IETF Secretariat. 
    
   The IETF invites any interested party to bring to its attention any 
   copyrights, patents or patent applications, or other proprietary 
   rights which may cover technology that may be required to practice 
   this standard. Please address the information to the IETF Executive 
   Director. 
    
Full Copyright Notice 
    
   "Copyright (C) The Internet Society 2003. All Rights Reserved. 
    
   This document and translations of it may be copied and furnished to 
   others, and derivative works that comment on or otherwise explain it 
   or assist in its implementation may be prepared, copied, published 
   and distributed, in whole or in part, without restriction of any 
   kind, provided that the above copyright notice and this paragraph are 
   included on all such copies and derivative works. However, this 
   document itself may not be modified in any way, such as by removing 
   the copyright notice or references to the Internet Society or other 
   Internet organizations, except as needed for the purpose of 
   developing Internet standards in which case the procedures for 
   copyrights defined in the Internet Standards process must be 
   followed, or as required to translate it into languages other than 
   English. 
    
   The limited permissions granted above are perpetual and will not be 
   revoked by the Internet Society or its successors or assigns. 
    
   This document and the information contained herein is provided on an 
   "AS IS" basis and THE INTERNET SOCIETY AND THE INTERNET ENGINEERING 
   TASK FORCE DISCLAIMS ALL WARRANTIES, EXPRESS OR IMPLIED, INCLUDING 
   BUT NOT LIMITED TO ANY WARRANTY THAT THE USE OF THE INFORMATION 
   HEREIN WILL NOT INFRINGE ANY RIGHTS OR ANY IMPLIED WARRANTIES OF 
   MERCHANTABILITY OR FITNESS FOR A PARTICULAR PURPOSE. 
 
Acknowledgement 
 
 
Johnston, et al.        Expires - August 2003                [Page 8] 

Internet-Draft     SIP Extension for OSP Auth Token      February 2003 
 
 
 
   Funding for the RFC Editor function is currently provided by the 
   Internet Society. 
     













































 
 
Johnston, et al.        Expires - August 2003                [Page 9] 
