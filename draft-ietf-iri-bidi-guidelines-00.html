<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard%20http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>Guidelines for Internationalized Resource Identifiers with Bi-directional Characters (Bidi IRIs)</title>

  <style type="text/css" title="Xml2Rfc (sans serif)">
  /*<![CDATA[*/
	  a {
	  text-decoration: none;
	  }
	  a.smpl {
	  color: black;
	  }
	  a:hover {
	  text-decoration: underline;
	  }
	  a:active {
	  text-decoration: underline;
	  }
	  address {
	  margin-top: 1em;
	  margin-left: 2em;
	  font-style: normal;
	  }
	  body {
	  color: black;
	  font-family: verdana, helvetica, arial, sans-serif;
	  font-size: 10pt;
	  
	  }
	  cite {
	  font-style: normal;
	  }
	  dd {
	  margin-right: 2em;
	  }
	  dl {
	  margin-left: 2em;
	  }
	
	  ul.empty {
	  list-style-type: none;
	  }
	  ul.empty li {
	  margin-top: .5em;
	  }
	  dl p {
	  margin-left: 0em;
	  }
	  dt {
	  margin-top: .5em;
	  }
	  h1 {
	  font-size: 14pt;
	  line-height: 21pt;
	  page-break-after: avoid;
	  }
	  h1.np {
	  page-break-before: always;
	  }
	  h1 a {
	  color: #333333;
	  }
	  h2 {
	  font-size: 12pt;
	  line-height: 15pt;
	  page-break-after: avoid;
	  }
	  h3, h4, h5, h6 {
	  font-size: 10pt;
	  page-break-after: avoid;
	  }
	  h2 a, h3 a, h4 a, h5 a, h6 a {
	  color: black;
	  }
	  img {
	  margin-left: 3em;
	  }
	  li {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  ol p {
	  margin-left: 0em;
	  }
	  p {
	  margin-left: 2em;
	  margin-right: 2em;
	  }
	  pre {
	  margin-left: 3em;
	  background-color: lightyellow;
	  padding: .25em;
	  }
	  pre.text2 {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f0f0f0;
	  width: 69em;
	  }
	  pre.inline {
	  background-color: white;
	  padding: 0em;
	  }
	  pre.text {
	  border-style: dotted;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  width: 69em;
	  }
	  pre.drawing {
	  border-style: solid;
	  border-width: 1px;
	  background-color: #f8f8f8;
	  padding: 2em;
	  }
	  table {
	  margin-left: 2em;
	  }
	  table.tt {
	  vertical-align: top;
	  }
	  table.full {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.headers {
	  border-style: outset;
	  border-width: 1px;
	  }
	  table.tt td {
	  vertical-align: top;
	  }
	  table.full td {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.tt th {
	  vertical-align: top;
	  }
	  table.full th {
	  border-style: inset;
	  border-width: 1px;
	  }
	  table.headers th {
	  border-style: none none inset none;
	  border-width: 1px;
	  }
	  table.left {
	  margin-right: auto;
	  }
	  table.right {
	  margin-left: auto;
	  }
	  table.center {
	  margin-left: auto;
	  margin-right: auto;
	  }
	  caption {
	  caption-side: bottom;
	  font-weight: bold;
	  font-size: 9pt;
	  margin-top: .5em;
	  }
	
	  table.header {
	  border-spacing: 1px;
	  width: 95%;
	  font-size: 10pt;
	  color: white;
	  }
	  td.top {
	  vertical-align: top;
	  }
	  td.topnowrap {
	  vertical-align: top;
	  white-space: nowrap; 
	  }
	  table.header td {
	  background-color: gray;
	  width: 50%;
	  }
	  table.header a {
	  color: white;
	  }
	  td.reference {
	  vertical-align: top;
	  white-space: nowrap;
	  padding-right: 1em;
	  }
	  thead {
	  display:table-header-group;
	  }
	  ul.toc, ul.toc ul {
	  list-style: none;
	  margin-left: 1.5em;
	  margin-right: 0em;
	  padding-left: 0em;
	  }
	  ul.toc li {
	  line-height: 150%;
	  font-weight: bold;
	  font-size: 10pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  ul.toc li li {
	  line-height: normal;
	  font-weight: normal;
	  font-size: 9pt;
	  margin-left: 0em;
	  margin-right: 0em;
	  }
	  li.excluded {
	  font-size: 0pt;
	  }
	  ul p {
	  margin-left: 0em;
	  }
	
	  .comment {
	  background-color: yellow;
	  }
	  .center {
	  text-align: center;
	  }
	  .error {
	  color: red;
	  font-style: italic;
	  font-weight: bold;
	  }
	  .figure {
	  font-weight: bold;
	  text-align: center;
	  font-size: 9pt;
	  }
	  .filename {
	  color: #333333;
	  font-weight: bold;
	  font-size: 12pt;
	  line-height: 21pt;
	  text-align: center;
	  }
	  .fn {
	  font-weight: bold;
	  }
	  .hidden {
	  display: none;
	  }
	  .left {
	  text-align: left;
	  }
	  .right {
	  text-align: right;
	  }
	  .title {
	  color: #990000;
	  font-size: 18pt;
	  line-height: 18pt;
	  font-weight: bold;
	  text-align: center;
	  margin-top: 36pt;
	  }
	  .vcardline {
	  display: block;
	  }
	  .warning {
	  font-size: 14pt;
	  background-color: yellow;
	  }
	
	
	  @media print {
	  .noprint {
		display: none;
	  }
	
	  a {
		color: black;
		text-decoration: none;
	  }
	
	  table.header {
		width: 90%;
	  }
	
	  td.header {
		width: 50%;
		color: black;
		background-color: white;
		vertical-align: top;
		font-size: 12pt;
	  }
	
	  ul.toc a::after {
		content: leader('.') target-counter(attr(href), page);
	  }
	
	  ul.ind li li a {
		content: target-counter(attr(href), page);
	  }
	
	  .print2col {
		column-count: 2;
		-moz-column-count: 2;
		column-fill: auto;
	  }
	  }
	
	  @page {
	  @top-left {
		   content: "Internet-Draft"; 
	  } 
	  @top-right {
		   content: "December 2010"; 
	  } 
	  @top-center {
		   content: "Abbreviated Title";3
	  } 
	  @bottom-left {
		   content: "Doe"; 
	  } 
	  @bottom-center {
		   content: "Expires June 2011"; 
	  } 
	  @bottom-right {
		   content: "[Page " counter(page) "]"; 
	  } 
	  }
	
	  @page:first { 
		@top-left {
		  content: normal;
		}
		@top-right {
		  content: normal;
		}
		@top-center {
		  content: normal;
		}
	  }
  /*]]>*/
  </style>

  <link href="#rfc.toc" rel="Contents">
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction">
<link href="#rfc.section.1.1" rel="Chapter" title="1.1 Notation">
<link href="#rfc.section.2" rel="Chapter" title="2 Logical Storage and Visual Presentation">
<link href="#rfc.section.3" rel="Chapter" title="3 Bidi IRI Structure">
<link href="#rfc.section.4" rel="Chapter" title="4 Input of Bidi IRIs">
<link href="#rfc.section.5" rel="Chapter" title="5 Examples">
<link href="#rfc.section.6" rel="Chapter" title="6 IANA Considerations">
<link href="#rfc.section.7" rel="Chapter" title="7 Security Considerations">
<link href="#rfc.section.8" rel="Chapter" title="8 Acknowledgements">
<link href="#rfc.references" rel="Chapter" title="9 References">
<link href="#rfc.references.1" rel="Chapter" title="9.1 Normative References">
<link href="#rfc.references.2" rel="Chapter" title="9.2 Informative References">
<link href="#rfc.authors" rel="Chapter">


  <meta name="generator" content=
  "http://greenbytes.de/tech/webdav/rfc2629.xslt, Revision 1.539, 2011-01-02 17:13:00, XSLT vendor: SAXON 6.5.5 from Michael Kay http://saxon.sf.net/" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />
  <meta name="dct.creator" content="Doe, J." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-sample-input-00" />
  <meta name="dct.issued" scheme="ISO8601" content="2010-12" />
  
  <meta name="dct.abstract" content="This specification gives guidelines for selection, use, presentation of International Resource Identifiers (IRI) which include characters with in inherent right-to-left (rtl) writing direction. " />
  <meta name="description" content="This specification gives guidelines for selection, use, presentation of International Resource Identifiers (IRI) which include characters with in inherent right-to-left (rtl) writing direction. " />
  <meta name="keywords" content="IRI, Internationalized Resource Identifier, BIDI, URI, URL, IDN" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
<td class="left">Internationalized Resource Identifiers (iri)</td>
<td class="right">M.J. Duerst</td>
</tr>
<tr>
<td class="left">Internet-Draft</td>
<td class="right">Aoyama Gakuin University</td>
</tr>
<tr>
<td class="left">Intended status: Best Current Practice</td>
<td class="right">L. Masinter</td>
</tr>
<tr>
<td class="left">Expires: February 15, 2012</td>
<td class="right">Adobe</td>
</tr>
<tr>
<td class="left"></td>
<td class="right">August 14, 2011</td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">Guidelines for Internationalized Resource Identifiers with Bi-directional Characters (Bidi IRIs)<br />
  <span class="filename">draft-ietf-iri-bidi-guidelines-00</span></p>
  
  <h1 id="rfc.abstract"><a href="#rfc.abstract">Abstract</a></h1>
<p>This specification gives guidelines for selection, use, presentation of International Resource Identifiers (IRI) which include characters with in inherent right-to-left (rtl) writing direction. </p>
<h1 id="rfc.status"><a href="#rfc.status">Status of this Memo</a></h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet- Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on February 15, 2012.</p>
<h1 id="rfc.copyrightnotice"><a href="#rfc.copyrightnotice">Copyright Notice</a></h1>
<p>Copyright (c) 2011 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>
<p>This document may contain material from IETF Documents or IETF Contributions published or made publicly available before November 10, 2008.  The person(s) controlling the copyright in some of this material may not have granted the IETF Trust the right to allow modifications of such material outside the IETF Standards Process. Without obtaining an adequate license from the person(s) controlling the copyright in such materials, this document may not be modified outside the IETF Standards Process, and derivative works of it may not be created outside the IETF Standards Process, except to format it for publication as an RFC or to translate it into languages other than English.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a>
</li>
<li>1.1.   <a href="#rfc.section.1.1">Notation</a>
</li>
<li>2.   <a href="#rfc.section.2">Logical Storage and Visual Presentation</a>
</li>
<li>3.   <a href="#rfc.section.3">Bidi IRI Structure</a>
</li>
<li>4.   <a href="#rfc.section.4">Input of Bidi IRIs</a>
</li>
<li>5.   <a href="#rfc.section.5">Examples</a>
</li>
<li>6.   <a href="#rfc.section.6">IANA Considerations</a>
</li>
<li>7.   <a href="#rfc.section.7">Security Considerations</a>
</li>
<li>8.   <a href="#rfc.section.8">Acknowledgements</a>
</li>
<li>9.   <a href="#rfc.references">References</a>
</li>
<li>9.1.   <a href="#rfc.references.1">Normative References</a>
</li>
<li>9.2.   <a href="#rfc.references.2">Informative References</a>
</li>
<li><a href="#rfc.authors">Authors' Addresses</a>
</li>


  </ul>

  <h1 id="rfc.section.1">
<a href="#rfc.section.1">1.</a> Introduction</h1>
<p id="rfc.section.1.p.1">Some UCS characters, such as those used in the Arabic and Hebrew scripts, have an inherent right-to-left (rtl) writing direction. IRIs containing these characters (called bidirectional IRIs or Bidi IRIs) require additional attention because of the non-trivial relation between logical representation (used for digital representation and for reading/spelling) and visual representation (used for display/printing).</p>
<p id="rfc.section.1.p.2">Because of the complex interaction between the logical representation, the visual representation, and the syntax of a Bidi IRI, a balance is needed between various requirements.  The main requirements are</p>

<dl>
<dt>1.</dt>
<dd style="margin-left: 8">user-predictable conversion between visual and logical representation;</dd>
<dt>2.</dt>
<dd style="margin-left: 8">the ability to include a wide range of characters in various parts of the IRI; and</dd>
<dt>3.</dt>
<dd style="margin-left: 8">minor or no changes or restrictions for implementations.</dd>
</dl>
<h1 id="rfc.section.1.1">
<a href="#rfc.section.1.1">1.1.</a> Notation</h1>
<p id="rfc.section.1.1.p.1">In this document, Bidi Notation is used for bidirectional examples: Lower case letters stand for Latin letters or other letters that are written left to right, whereas upper case letters represent Arabic or Hebrew letters that are written right to left.</p>
<p id="rfc.section.1.1.p.2">In this document, the key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" are to be interpreted as described in <a href="#RFC2119">[RFC2119]</a>.</p>
<h1 id="rfc.section.2">
<a href="#rfc.section.2">2.</a> <a href="#visual" id="visual">Logical Storage and Visual Presentation</a>
</h1>
<p id="rfc.section.2.p.1">When stored or transmitted in digital representation, bidirectional IRIs MUST be in full logical order and MUST conform to the IRI syntax rules (which includes the rules relevant to their scheme). This ensures that bidirectional IRIs can be processed in the same way as other IRIs.</p>
<p id="rfc.section.2.p.2">Bidirectional IRIs MUST be rendered by using the Unicode Bidirectional Algorithm <a href="#UNIV6">[UNIV6]</a>, <a href="#UNI9">[UNI9]</a>.  Bidirectional IRIs MUST be rendered in the same way as they would be if they were in a left-to-right embedding; i.e., as if they were preceded by U+202A, LEFT-TO-RIGHT EMBEDDING (LRE), and followed by U+202C, POP DIRECTIONAL FORMATTING (PDF).  Setting the embedding direction can also be done in a higher-level protocol (e.g., the dir='ltr' attribute in HTML).</p>
<p id="rfc.section.2.p.3">There is no requirement to use the above embedding if the display is still the same without the embedding. For example, a bidirectional IRI in a text with left-to-right base directionality (such as used for English or Cyrillic) that is preceded and followed by whitespace and strong left-to-right characters does not need an embedding.  Also, a bidirectional relative IRI reference that only contains strong right-to-left characters and weak characters and that starts and ends with a strong right-to-left character and appears in a text with right-to-left base directionality (such as used for Arabic or Hebrew) and is preceded and followed by whitespace and strong characters does not need an embedding.</p>
<p id="rfc.section.2.p.4">In some other cases, using U+200E, LEFT-TO-RIGHT MARK (LRM), may be sufficient to force the correct display behavior.  However, the details of the Unicode Bidirectional algorithm are not always easy to understand. Implementers are strongly advised to err on the side of caution and to use embedding in all cases where they are not completely sure that the display behavior is unaffected without the embedding.</p>
<p id="rfc.section.2.p.5">The Unicode Bidirectional Algorithm (<a href="#UNI9">[UNI9]</a>, section 4.3) permits higher-level protocols to influence bidirectional rendering. Such changes by higher-level protocols MUST NOT be used if they change the rendering of IRIs.</p>
<p id="rfc.section.2.p.6">The bidirectional formatting characters that may be used before or after the IRI to ensure correct display are not themselves part of the IRI.  IRIs MUST NOT contain bidirectional formatting characters (LRM, RLM, LRE, RLE, LRO, RLO, and PDF). They affect the visual rendering of the IRI but do not appear themselves. It would therefore not be possible to input an IRI with such characters correctly.</p>
<h1 id="rfc.section.3">
<a href="#rfc.section.3">3.</a> <a href="#bidi-structure" id="bidi-structure">Bidi IRI Structure</a>
</h1>
<p id="rfc.section.3.p.1">The Unicode Bidirectional Algorithm is designed mainly for running text.  To make sure that it does not affect the rendering of bidirectional IRIs too much, some restrictions on bidirectional IRIs are necessary. These restrictions are given in terms of delimiters (structural characters, mostly punctuation such as "@", ".", ":", and<br>"/") and components (usually consisting mostly of letters and digits).</p>
<p id="rfc.section.3.p.2">The following syntax rules from the ABNF of <a href="#RFC3987bis">[RFC3987bis]</a> correspond to components for the purpose of Bidi behavior: iuserinfo, ireg-name, isegment, isegment-nz, isegment-nz-nc, ireg-name, iquery, and ifragment.</p>
<p id="rfc.section.3.p.3">Specifications that define the syntax of any of the above components MAY divide them further and define smaller parts to be components according to this document. As an example, the restrictions of <a href="#RFC3490">[RFC3490]</a> on bidirectional domain names correspond to treating each label of a domain name as a component for schemes with ireg-name as a domain name.  Even where the components are not defined formally, it may be helpful to think about some syntax in terms of components and to apply the relevant restrictions.  For example, for the usual name/value syntax in query parts, it is convenient to treat each name and each value as a component. As another example, the extensions in a resource name can be treated as separate components.</p>
<p id="rfc.section.3.p.4">For each component, the following restrictions apply:</p>
<p></p>

<dl>
<dt>1.</dt>
<dd style="margin-left: 8">A component SHOULD NOT use both right-to-left and left-to-right characters.</dd>
<dt>2.</dt>
<dd style="margin-left: 8">A component using right-to-left characters SHOULD start and end with right-to-left characters.</dd>
</dl>
<p id="rfc.section.3.p.6">The above restrictions are given as "SHOULD"s, rather than as "MUST"s.  For IRIs that are never presented visually, they are not relevant.  However, for IRIs in general, they are very important to ensure consistent conversion between visual presentation and logical representation, in both directions.</p>
<p></p>

<dl>
<dt>Note:</dt>
<dd style="margin-left: 8">In some components, the above restrictions may actually be strictly enforced.  For example, <a href="#RFC3490">[RFC3490]</a> requires that these restrictions apply to the labels of a host name for those schemes where ireg-name is a host name.  In some other components (for example, path components) following these restrictions may not be too difficult.  For other components, such as parts of the query part, it may be very difficult to enforce the restrictions because the values of query parameters may be arbitrary character sequences.</dd>
</dl>
<p id="rfc.section.3.p.8">If the above restrictions cannot be satisfied otherwise, the affected component can always be mapped to URI notation using the general percent-encoding of IRI components, as described in <a href="#RFC3987bis">[RFC3987bis]</a>. Please note that the whole component has to be mapped (see also Example 9 below).</p>
<h1 id="rfc.section.4">
<a href="#rfc.section.4">4.</a> <a href="#bidiInput" id="bidiInput">Input of Bidi IRIs</a>
</h1>
<p id="rfc.section.4.p.1">Bidi input methods MUST generate Bidi IRIs in logical order while rendering them according to <a href="#visual">Section 2</a>.  During input, rendering SHOULD be updated after every new character is input to avoid end-user confusion.</p>
<h1 id="rfc.section.5">
<a href="#rfc.section.5">5.</a> Examples</h1>
<p id="rfc.section.5.p.1">This section gives examples of bidirectional IRIs, in Bidi Notation.  It shows legal IRIs with the relationship between logical and visual representation and explains how certain phenomena in this relationship may look strange to somebody not familiar with bidirectional behavior, but familiar to users of Arabic and Hebrew. It also shows what happens if the restrictions given in <a href="#bidi-structure">Section 3</a> are not followed. The examples below can be seen at <a href="#BidiEx">[BidiEx]</a>, in Arabic, Hebrew, and Bidi Notation variants.</p>
<p id="rfc.section.5.p.2">To read the bidi text in the examples, read the visual representation from left to right until you encounter a block of rtl text. Read the rtl block (including slashes and other special characters) from right to left, then continue at the next unread ltr character.</p>
<p id="rfc.section.5.p.3">Example 1: A single component with rtl characters is inverted: <br>Logical representation: "http://ab.CDEFGH.ij/kl/mn/op.html"<br>Visual representation: "http://ab.HGFEDC.ij/kl/mn/op.html"<br> Components can be read one by one, and each component can be read in its natural direction.</p>
<p id="rfc.section.5.p.4">Example 2: More than one consecutive component with rtl characters is inverted as a whole: <br>Logical representation: "http://ab.CDE.FGH/ij/kl/mn/op.html"<br>Visual representation: "http://ab.HGF.EDC/ij/kl/mn/op.html"<br> A sequence of rtl components is read rtl, in the same way as a sequence of rtl words is read rtl in a bidi text.</p>
<p id="rfc.section.5.p.5">Example 3: All components of an IRI (except for the scheme) are rtl.  All rtl components are inverted overall: <br>Logical representation: "http://AB.CD.EF/GH/IJ/KL?MN=OP;QR=ST#UV"<br>Visual representation: "http://VU#TS=RQ;PO=NM?LK/JI/HG/FE.DC.BA"<br> The whole IRI (except the scheme) is read rtl. Delimiters between rtl components stay between the respective components; delimiters between ltr and rtl components don't move.</p>
<p id="rfc.section.5.p.6">Example 4: Each of several sequences of rtl components is inverted on its own: <br>Logical representation: "http://AB.CD.ef/gh/IJ/KL.html"<br>Visual representation: "http://DC.BA.ef/gh/LK/JI.html"<br> Each sequence of rtl components is read rtl, in the same way as each sequence of rtl words in an ltr text is read rtl.</p>
<p id="rfc.section.5.p.7">Example 5: Example 2, applied to components of different kinds: <br>Logical representation: "http://ab.cd.EF/GH/ij/kl.html" <br>Visual representation: "http://ab.cd.HG/FE/ij/kl.html"<br> The inversion of the domain name label and the path component may be unexpected, but it is consistent with other bidi behavior.  For reassurance that the domain component really is "ab.cd.EF", it may be helpful to read aloud the visual representation following the bidi algorithm. After "http://ab.cd." one reads the RTL block "E-F-slash-G-H", which corresponds to the logical representation.  </p>
<p id="rfc.section.5.p.8">Example 6: Same as Example 5, with more rtl components: <br>Logical representation: "http://ab.CD.EF/GH/IJ/kl.html"<br>Visual representation: "http://ab.JI/HG/FE.DC/kl.html"<br> The inversion of the domain name labels and the path components may be easier to identify because the delimiters also move.</p>
<p id="rfc.section.5.p.9">Example 7: A single rtl component includes digits: <br>Logical representation: "http://ab.CDE123FGH.ij/kl/mn/op.html"<br>Visual representation: "http://ab.HGF123EDC.ij/kl/mn/op.html"<br> Numbers are written ltr in all cases but are treated as an additional embedding inside a run of rtl characters. This is completely consistent with usual bidirectional text.</p>
<p id="rfc.section.5.p.10">Example 8 (not allowed): Numbers are at the start or end of an rtl component:<br>Logical representation: "http://ab.cd.ef/GH1/2IJ/KL.html"<br>Visual representation: "http://ab.cd.ef/LK/JI1/2HG.html"<br> The sequence "1/2" is interpreted by the bidi algorithm as a fraction, fragmenting the components and leading to confusion. There are other characters that are interpreted in a special way close to numbers; in particular, "+", "-", "#", "$", "%", ",", ".", and ":".</p>
<p id="rfc.section.5.p.11">Example 9 (not allowed): The numbers in the previous example are percent-encoded: <br>Logical representation: "http://ab.cd.ef/GH%31/%32IJ/KL.html",<br>Visual representation: "http://ab.cd.ef/LK/JI%32/%31HG.html"</p>
<p id="rfc.section.5.p.12">Example 10 (allowed but not recommended): <br>Logical representation: "http://ab.CDEFGH.123/kl/mn/op.html"<br>Visual representation: "http://ab.123.HGFEDC/kl/mn/op.html"<br> Components consisting of only numbers are allowed (it would be rather difficult to prohibit them), but these may interact with adjacent RTL components in ways that are not easy to predict.</p>
<p id="rfc.section.5.p.13">Example 11 (allowed but not recommended): <br>Logical representation: "http://ab.CDEFGH.123ij/kl/mn/op.html"<br>Visual representation: "http://ab.123.HGFEDCij/kl/mn/op.html"<br> Components consisting of numbers and left-to-right characters are allowed, but these may interact with adjacent RTL components in ways that are not easy to predict.</p>
<h1 id="rfc.section.6">
<a href="#rfc.section.6">6.</a> <a href="#iana" id="iana">IANA Considerations</a>
</h1>
<p id="rfc.section.6.p.1">This document makes no changes to IANA registries.</p>
<h1 id="rfc.section.7">
<a href="#rfc.section.7">7.</a> <a href="#security" id="security">Security Considerations</a>
</h1>
<p id="rfc.section.7.p.1">Confusion can occur with bidirectional IRIs, if the restrictions in <a href="#bidi-structure">Section 3</a> are not followed. The same visual representation may be interpreted as different logical representations, and vice versa. It is also very important that a correct Unicode bidirectional implementation be used.</p>
<h1 id="rfc.section.8">
<a href="#rfc.section.8">8.</a> Acknowledgements</h1>
<p id="rfc.section.8.p.1">This document was derived from <a href="#RFC3987">[RFC3987]</a> and <a href="#RFC3987bis">[RFC3987bis]</a> and the acknowledgments of those documents apply.</p>
<h1 id="rfc.references">
<a href="#rfc.references">9.</a> References</h1>
<h1 id="rfc.references.1">
<a href="#rfc.references.1">9.1.</a> Normative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="RFC3987bis">[RFC3987bis]</b></td>
<td class="top">
<a>Duerst, M.</a>, <a>Masinter, L.</a> and <a>M. Suignard</a>, "<a>Internationalized Resource Identifiers (IRIs)</a>", August 2011.</td>
</tr>
<tr>
<td class="reference"><b id="ASCII">[ASCII]</b></td>
<td class="top">
<a>American National Standards Institute</a>, "<a>Coded Character Set -- 7-bit American Standard Code for Information Interchange</a>", ANSI X3.4, 1986.</td>
</tr>
<tr>
<td class="reference"><b id="ISO10646">[ISO10646]</b></td>
<td class="top">
<a>International Organization for Standardization</a>, "<a>ISO/IEC 10646:2003: Information Technology - Universal Multiple-Octet Coded Character Set (UCS)</a>", ISO Standard 10646, December 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC2119">[RFC2119]</b></td>
<td class="top">
<a href="mailto:sob@harvard.edu" title="Harvard University">Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, March 1997.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3490">[RFC3490]</b></td>
<td class="top">
<a>Faltstrom, P.</a>, <a>Hoffman, P.</a> and <a>A. Costello</a>, "<a href="http://tools.ietf.org/html/rfc3490">Internationalizing Domain Names in Applications (IDNA)</a>", RFC 3490, March 2003.</td>
</tr>
<tr>
<td class="reference"><b id="RFC3491">[RFC3491]</b></td>
<td class="top">
<a>Hoffman, P.</a> and <a>M. Blanchet</a>, "<a href="http://tools.ietf.org/html/rfc3491">Nameprep: A Stringprep Profile for Internationalized Domain Names (IDN)</a>", RFC 3491, March 2003.</td>
</tr>
<tr>
<td class="reference"><b id="UNIV6">[UNIV6]</b></td>
<td class="top">
<a>The Unicode Consortium</a>, "<a>The Unicode Standard, Version 6.0.0 (Mountain View, CA, The Unicode Consortium, 2011, ISBN 978-1-936213-01-6)</a>", October 2010.</td>
</tr>
<tr>
<td class="reference"><b id="UNI9">[UNI9]</b></td>
<td class="top">
<a>Davis, M.</a>, "<a>The Bidirectional Algorithm</a>", Unicode Standard Annex #9, March 2004.</td>
</tr>
</tbody></table>
<h1 id="rfc.references.2">
<a href="#rfc.references.2">9.2.</a> Informative References</h1>
<table><tbody>
<tr>
<td class="reference"><b id="BidiEx">[BidiEx]</b></td>
<td class="top">
<a>Examples of bidirectional IRIs</a>", .</td>, "</tr>
<tr>
<td class="reference"><b id="RFC3987">[RFC3987]</b></td>
<td class="top">
<a>Duerst, M.</a> and <a>M. Suignard</a>, "<a href="http://tools.ietf.org/html/rfc3987">Internationalized Resource Identifiers (IRIs)</a>", RFC 3987, January 2005.</td>
</tr>
</tbody></table>
<h1 id="rfc.authors"><a href="#rfc.authors">Authors' Addresses</a></h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Martin Duerst</span> 
	  <span class="n hidden">
		<span class="family-name">Duerst</span>
	  </span>
	</span>
	<span class="org vcardline">Aoyama Gakuin University</span>
	<span class="adr">
	  <span>5-10-1 Fuchinobe</span>

	  <span class="vcardline">
		<span class="locality">Sagamihara</span>,  
		<span class="region">Kanagawa</span> 
		<span class="code">229-8558</span>
	  </span>
	  <span class="country-name vcardline">Japan</span>
	</span>
	<span class="vcardline">Phone: +81 42 759 6329</span>

<span class="vcardline">EMail: <a href="mailto:duerst@it.aoyama.ac.jp">duerst@it.aoyama.ac.jp</a></span>

<span class="vcardline">URI: <a href="http://www.sw.it.aoyama.ac.jp/D%C3%BCrst/">http://www.sw.it.aoyama.ac.jp/D%C3%BCrst/</a></span>

  </address>
</div><div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">Larry Masinter</span> 
	  <span class="n hidden">
		<span class="family-name">Masinter</span>
	  </span>
	</span>
	<span class="org vcardline">Adobe</span>
	<span class="adr">
	  <span>345 Park Ave</span>

	  <span class="vcardline">
		<span class="locality">San Jose</span>,  
		<span class="region">CA</span> 
		<span class="code">95110</span>
	  </span>
	  <span class="country-name vcardline">U.S.A.</span>
	</span>
	<span class="vcardline">Phone: +1-408-536-3024</span>

<span class="vcardline">EMail: <a href="mailto:masinter@adobe.com">masinter@adobe.com</a></span>

<span class="vcardline">URI: <a href="http://larry.masinter.net">http://larry.masinter.net</a></span>

  </address>
</div>

</body>
</html>