



Networking Working Group                                       Ran. Chen
Internet-Draft                                               Fangwei. Hu
Intended status: Standards Track                         ZTE Corporation
Expires: April 22, 2018                                 October 19, 2017


Path Computation Element communication Protocol extension for Associated
                                  ECMP
                   draft-chen-pce-association-ecmp-01

Abstract

   [I-D.ietf-pce-association-group]introduces and explains a generic
   mechanism to create a grouping of LSPs.  The grouping can then be
   used to define associations between a set of LSPs and/or a set of
   attributes (such as configuration parameters or behaviours) and is
   equally applicable to the active and passive modes of a stateful PCE
   [I-D.ietf-pce-stateful-pce] as well as a stateless PCE [RFC5440].

   This document specifies a PCEP extension to bind one or more LSPs
   into an ECMP Associated Group.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on April 22, 2018.

Copyright Notice

   Copyright (c) 2017 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents



Chen & Hu                Expires April 22, 2018                 [Page 1]

Internet-Draft            PCEP Associated ECMP              October 2017


   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Introduction  . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Conventions used in this document . . . . . . . . . . . . . .   2
   3.  Overview  . . . . . . . . . . . . . . . . . . . . . . . . . .   2
   4.  Protocol extension  . . . . . . . . . . . . . . . . . . . . .   3
     4.1.  Association Object  . . . . . . . . . . . . . . . . . . .   3
     4.2.  Per-packet ECMP Association TLV . . . . . . . . . . . . .   3
     4.3.  Per-flow ECMP Association TLV . . . . . . . . . . . . . .   4
   5.  Security Considerations . . . . . . . . . . . . . . . . . . .   5
   6.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   5
     6.1.  Association Types . . . . . . . . . . . . . . . . . . . .   5
     6.2.  Per-packet ECMP Association TLV . . . . . . . . . . . . .   5
     6.3.  Per-flow ECMP Association Type  . . . . . . . . . . . . .   6
   7.  Acknowledgements  . . . . . . . . . . . . . . . . . . . . . .   6
   8.  Normative references  . . . . . . . . . . . . . . . . . . . .   6
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   7

1.  Introduction

   [I-D.ietf-pce-association-group]introduces and explains a generic
   mechanism to create a grouping of LSPs.  The grouping can then be
   used to define associations between a set of LSPs and/or a set of
   attributes (such as configuration parameters or behaviours) and is
   equally applicable to the active and passive modes of a stateful PCE
   [I-D.ietf-pce-stateful-pce] as well as a stateless PCE [RFC5440].

   This document specifies a PCEP extension to bind one or more LSPs
   into an ECMP Associated Group.

2.  Conventions used in this document

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC2119.

3.  Overview

   As shown in Figure 1, assume that paths AHE, ABCDE, and ABGE all have
   the same path cost.  The three paths can be associated to form an
   associated ECMP Associated Group.




Chen & Hu                Expires April 22, 2018                 [Page 2]

Internet-Draft            PCEP Associated ECMP              October 2017


   Note: The LSPs can also be binded into an ECMP Associated Group that
   satisfies the set of required constraints (i.g. bandwidth constraint,
   delay constraint).  The LSPs should originate from the same head-
   end(s) and terminate at the same or different tail-end(s).



                                  +-----+
                                  | PCE |
                                  +-----+
                                    |
                                    |
                                    | -------- H --------
                                    |/                    \
                                    A --- B ---C ---D --- E
                                           \              |
                                            --------G-----


                                 Figure 1

4.  Protocol extension

4.1.  Association Object

   As per [I-D.ietf-pce-association-group], LSPs are associated by
   adding them to a common association group.

   Based on the generic Association object, this document defines two
   new Association types as follows:

   o  Association Type = TBD1, Per-packet ECMP Association

   o  Association Type = TBD2, Per-flow ECMP Association

4.2.  Per-packet ECMP Association TLV

   The Per-packet ECMP Association TLV is an optional TLV for use with
   the Per-packet ECMP Association Type.

   The following the Per-packet ECMP Association TLV is defined:










Chen & Hu                Expires April 22, 2018                 [Page 3]

Internet-Draft            PCEP Associated ECMP              October 2017


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |         Type = TBD3           |            Length             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      | FC Per.   |                             Reserved              |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


                                 Figure 2

   Type: TBD3, to be assigned by IANA.

   Length: 2 octets.

   FC Per.: Percentage of the traffic that carried by the LSP.

   The Per-packet ECMP Association TLV MUST NOT be present more than
   once.  If it appears more than once, first one MUST be used and
   subsequent ones MUST be ignored.

4.3.  Per-flow ECMP Association TLV

   The Per-flow ECMP Association TLV is an optional TLV for use with the
   Per-flow ECMP Association Type.

   The following the Per-flow ECMP Association TLV is defined:


       0                   1                   2                   3
       0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |          Type=TBD4            |              Length           |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
      |           SF                  |          Reserved             |
      +-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+


                                 Figure 3

   Type: TBD4, to be assigned by IANA.

   Length: 2 octets.

   SF: 2 octets, the route selected factor for load balance.  The
   following is the route selected factor that recommended.





Chen & Hu                Expires April 22, 2018                 [Page 4]

Internet-Draft            PCEP Associated ECMP              October 2017


             0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 ............in_port
             0 0 0 0 0 0 0 0 0 0 0 0 0 0 1 0.............src_mac
             0 0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 ............dst_mac
             0 0 0 0 0 0 0 0 0 0 0 0 1 0 0 0.............eth_type
             0 0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 ............vlan_id
             0 0 0 0 0 0 0 0 0 0 1 0 0 0 0 0.............label
             0 0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 ............ip_dscp
             0 0 0 0 0 0 0 0 1 0 0 0 0 0 0 0.............src_ip
             0 0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 ............dst_ip
             0 0 0 0 0 0 1 0 0 0 0 0 0 0 0 0.............ip_proto
             0 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0.............src_port
             0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 ............dst_port


5.  Security Considerations

   This document defines two new Association Types for the Association
   Object, which do not introduce no additional security concerns beyond
   those discussed in [RFC5440], [I-D.ietf-pce-association-group] and
   [I-D.ietf-pce-stateful-pce].

6.  IANA Considerations

6.1.  Association Types

   This document defines the following Association Types for the
   Association Object defined in [I-D.ietf-pce-association-group].


                  Value Name                        Reference

               TBD1 Per-packet ECMP Association    [This I.D.]
               TBD2 Per-flow ECMP Association      [This I.D.]



6.2.  Per-packet ECMP Association TLV

   This document defines a new TLV for the Per-packet ECMP Association
   Type as follows:











Chen & Hu                Expires April 22, 2018                 [Page 5]

Internet-Draft            PCEP Associated ECMP              October 2017


         +--------------------+------------------------+-------------+
         | TLV Type Value     | TLV Name               | Reference   |
         +--------------------+------------------------+-------------+
         | TBD3               | Per-packet ECMP        | This        |
         |                    | Association TLV        | document    |
         +--------------------+------------------------+-------------+



6.3.  Per-flow ECMP Association Type

   This document defines a new TLV for the Per-flow ECMP Association
   Type as follows:


         +--------------------+------------------------+-------------+
         | TLV Type Value     | TLV Name               | Reference   |
         +--------------------+------------------------+-------------+
         | TBD4               |  Per-flow ECMP         | This        |
         |                    |  Association TLV       | document    |
         +--------------------+------------------------+-------------+



7.  Acknowledgements

   TBD.

8.  Normative references

   [I-D.ietf-pce-association-group]
              Minei, I., Crabbe, E., Sivabalan, S., Ananthakrishnan, H.,
              Dhody, D., and Y. Tanaka, "PCEP Extensions for
              Establishing Relationships Between Sets of LSPs", draft-
              ietf-pce-association-group-04 (work in progress), August
              2017.

   [I-D.ietf-pce-stateful-pce]
              Crabbe, E., Minei, I., Medved, J., and R. Varga, "PCEP
              Extensions for Stateful PCE", draft-ietf-pce-stateful-
              pce-21 (work in progress), June 2017.

   [RFC2119]  Bradner, S., "Key words for use in RFCs to Indicate
              Requirement Levels", BCP 14, RFC 2119,
              DOI 10.17487/RFC2119, March 1997,
              <https://www.rfc-editor.org/info/rfc2119>.





Chen & Hu                Expires April 22, 2018                 [Page 6]

Internet-Draft            PCEP Associated ECMP              October 2017


   [RFC4665]  Augustyn, W., Ed. and Y. Serbest, Ed., "Service
              Requirements for Layer 2 Provider-Provisioned Virtual
              Private Networks", RFC 4665, DOI 10.17487/RFC4665,
              September 2006, <https://www.rfc-editor.org/info/rfc4665>.

   [RFC5440]  Vasseur, JP., Ed. and JL. Le Roux, Ed., "Path Computation
              Element (PCE) Communication Protocol (PCEP)", RFC 5440,
              DOI 10.17487/RFC5440, March 2009,
              <https://www.rfc-editor.org/info/rfc5440>.

Authors' Addresses

   Ran Chen
   ZTE Corporation
   No.50 Software Avenue,Yuhuatai District
   Nanjing, Jiangsu Province  210012
   China

   Phone: +86 025 88014636
   Email: chen.ran@zte.com.cn


   Fangwei Hu
   ZTE Corporation
   No.889 Bibo Rd
   Shanghai  201203
   China

   Email: hu.fangwei@zte.com.cn






















Chen & Hu                Expires April 22, 2018                 [Page 7]
