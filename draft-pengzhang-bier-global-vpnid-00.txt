



BIER                                                        Shaofu. Peng
Internet-Draft                                              Zheng. Zhang
Intended status: Standards Track                         ZTE Corporation
Expires: December 30, 2018                                 June 28, 2018


               Global vpnid advertisement in BIER overlay
                  draft-pengzhang-bier-global-vpnid-00

Abstract

   This document specifies a method to achieve multipoint VPN
   interconnection through a BIER domain.

Requirements Language

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC2119.

Status of This Memo

   This Internet-Draft is submitted in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF).  Note that other groups may also distribute
   working documents as Internet-Drafts.  The list of current Internet-
   Drafts is at https://datatracker.ietf.org/drafts/current/.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   This Internet-Draft will expire on December 30, 2018.

Copyright Notice

   Copyright (c) 2018 IETF Trust and the persons identified as the
   document authors.  All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (https://trustee.ietf.org/license-info) in effect on the date of
   publication of this document.  Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document.  Code Components extracted from this document must



Peng & Zhang            Expires December 30, 2018               [Page 1]

Internet-Draft              BIER GLOBAL VPNID                  June 2018


   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1.  Terminology . . . . . . . . . . . . . . . . . . . . . . . . .   2
   2.  Problem statement . . . . . . . . . . . . . . . . . . . . . .   2
   3.  Solution  . . . . . . . . . . . . . . . . . . . . . . . . . .   3
     3.1.  Advertisement . . . . . . . . . . . . . . . . . . . . . .   3
     3.2.  Encapsulation . . . . . . . . . . . . . . . . . . . . . .   4
     3.3.  Decapsulation . . . . . . . . . . . . . . . . . . . . . .   4
     3.4.  Formats . . . . . . . . . . . . . . . . . . . . . . . . .   4
   4.  IANA Considerations . . . . . . . . . . . . . . . . . . . . .   5
   5.  Security Considerations . . . . . . . . . . . . . . . . . . .   5
   6.  Normative References  . . . . . . . . . . . . . . . . . . . .   5
   Authors' Addresses  . . . . . . . . . . . . . . . . . . . . . . .   6

1.  Terminology

   This document uses terminologies defined in [RFC8279], [RFC6513],
   [RFC6514], [I-D.ietf-bier-mld].

2.  Problem statement

   BIER (Bit Indexed Explicit Replication) [RFC8279] introduces an
   architecture for the forwarding of multicast data packet.  It
   provides optimal forwarding of multicast packet through a 'multicast
   domain'.  It does not require explicitly building multicast
   distribution trees, nor does require intermediate nodes to maintain
   any per-flow state.

   BIER MVPN [I-D.ietf-bier-mvpn] introduces a method which using BIER
   as multicast tunnels (P-tunnels) to carry multicast traffic across
   the BIER domain.  The advertising method from [RFC6513] and [RFC6514]
   is general and flexible, but it is complicated in some situations at
   the same time because of the program of many parameters, like RD, RT,
   etc.  In many situations which only interconnect different sites
   across a domain, the comprehensive MVPN configuration increases the
   network administrative complication.

   In the other hand, BIER MVPN using upstream assigned label to
   indicate the corresponding multicast flow in a MVPN.  The pair of
   ingress PE and upsteam assigned labels increases label administration
   and flow forwarding complication.
   [I-D.zzhang-bess-mvpn-evpn-aggregation-label] arises a discussion
   about using common label assigned by controller in MVPN.  But in a




Peng & Zhang            Expires December 30, 2018               [Page 2]

Internet-Draft              BIER GLOBAL VPNID                  June 2018


   network without a controller, it is still a problem to achieve the
   multipoint interconnection without MVPN configuration.

   So for the networks that need flow isolation across domain but do not
   need complicated configuration, this document specifies a method to
   achieve multipoint VPN interconnection across a BIER domain by
   advertising global vpn-id in BIER forwarding overlay, and defines
   encapsulation and forwarding functions to carry and execute the
   global vpn-id.  It is similar as the usage of VNI-VSID in case of
   EVPN VXLAN/ NVGRE described in [I-D.ietf-bier-evpn].

3.  Solution

   The multipoint VPN here means some flows should be forwarded to
   multiple edge routers across a domain.  In the simple multipoint
   interconnection situations that does not deploy MVPN configuration
   like RD, RT, etc., a global vpn-id is used to indicate the
   corresponding VPN.  This global vpn-id is encapsulated between BIER
   header and actual data packet.  The BIER forwarding function is also
   modified to execute this kind of packet.

3.1.  Advertisement

   BIER overlay protocols include BMLD [I-D.ietf-bier-mld], MVPN
   [I-D.ietf-bier-mvpn], and PIM [I-D.ietf-bier-pim-signaling], EVPN
   [I-D.ietf-bier-evpn].  Global vpn-id extension should be added in
   these BIER overlay protocols by a TLV format.  When using BGP as BIER
   overlay protocol to advertise global vpn-id, specific VPN parameters
   like RD, RT defined in [RFC6513] and [RFC6514] need not be used.

   A BIER domain edge router can belong to several VPNs.  A unique
   global vpn-id is assigned to a particular VPN.  An edge router
   belongs to several VPNs is assigned several global vpn-ids.

   Edge routers belong to a same VPN should be assigned a same global
   vpn-id.  The two edge routers which have same global vpn-id indicates
   that the two routers belong to a same particular VPN.

   When BIER domain edge routers exchange BIER overlay information, the
   edge routers belong to one or more VPNs should advertise the
   corresponding global vpn-ids extension.

   After a router receives global vpn-id extensions from the other edge
   routers, the router MUST store the edge routers which have same
   global vpn-ids with local VPNs.






Peng & Zhang            Expires December 30, 2018               [Page 3]

Internet-Draft              BIER GLOBAL VPNID                  June 2018


   The router SHOULD store the edge routers which have different global
   vpn-ids with local VPNs in order to increase converged efficiency
   that caused by configuration modification.

3.2.  Encapsulation

   After ingress router gathers the information of edge routers which
   have same global vpn-ids, ingress router generates forwarding items
   which include global vpn-id and BFR-ids of egress routers.

   When ingress router encapsulates the data packet which should be sent
   to the egress routers according to a global vpn-id, the value of
   global vpn-id MUST be added between BIER header and actual data
   packet.  The encapsulation function is the same as [RFC8296], the
   'Proto' field in BIER header should be set to the value for a new
   type of global vpn-id.

   The forwarding of intermediate routers is unchanged according to the
   forwarding function defined in [RFC8279].

3.3.  Decapsulation

   Finally the packet reaches egress routers.  Egress router looks for
   the forwarding items indexed by the global vpn-id according to the
   'Proto' field in BIER header.  After decapsulation, egress router
   forwards data packet to corresponding local receivers.

3.4.  Formats

   [RFC2685] defines a globally unique VPN identifier to connect same
   VPN in different sites.  The format of global vpn-id defined in
   [RFC2685] is 7 octets.  But in actually deployment, a global vpn-id
   with 20 bits is enough to indicate the corresponding VPN.  So the
   global vpn-id can be used as BIFT-ID defined in [RFC8296]directly.

   When MLD protocol is used as BIER overlay, a new type of TLV is added
   in BMLD report messages.

   When BGP protocol is used as BIER overlay, a new type of TLV is added
   in BGP update message.

   When PIM protocol is used as BIER overlay, a new type of TLV is added
   in PIM join/ prune messages.

   For the edge routers which act as ingress routers or egress routers,
   the corresponding global vpn-ids are carried in the new TLV.  And the
   BFR-id of the router itself is also included in the TLV.




Peng & Zhang            Expires December 30, 2018               [Page 4]

Internet-Draft              BIER GLOBAL VPNID                  June 2018


4.  IANA Considerations

   A new type which indicates the global vpn-id should be added in BIER
   'Proto' assignment.  A new type of global vpn-id extension should be
   added in each BIER overlay protocols, includes MLD, PIM, BGP.

5.  Security Considerations

   There is no further security requirements in this document.

6.  Normative References

   [I-D.ietf-bier-evpn]
              Zhang, Z., Przygienda, T., Sajassi, A., and J. Rabadan,
              "EVPN BUM Using BIER", draft-ietf-bier-evpn-01 (work in
              progress), April 2018.

   [I-D.ietf-bier-mld]
              Pfister, P., Wijnands, I., Venaas, S., Wang, C., Zhang,
              Z., and M. Stenberg, "BIER Ingress Multicast Flow Overlay
              using Multicast Listener Discovery Protocols", draft-ietf-
              bier-mld-00 (work in progress), June 2017.

   [I-D.ietf-bier-mvpn]
              Rosen, E., Sivakumar, M., Aldrin, S., Dolganow, A., and T.
              Przygienda, "Multicast VPN Using BIER", draft-ietf-bier-
              mvpn-11 (work in progress), March 2018.

   [I-D.ietf-bier-pim-signaling]
              Bidgoli, H., Dolganow, A., Kotalwar, J., Xu, F., mishra,
              m., and Z. Zhang, "PIM Signaling Through BIER Core",
              draft-ietf-bier-pim-signaling-03 (work in progress), June
              2018.

   [I-D.zzhang-bess-mvpn-evpn-aggregation-label]
              Zhang, Z., Rosen, E., Lin, W., Li, Z., and I. Wijnands,
              "MVPN/EVPN Tunnel Aggregation with Common Labels", draft-
              zzhang-bess-mvpn-evpn-aggregation-label-01 (work in
              progress), April 2018.

   [RFC2685]  Fox, B. and B. Gleeson, "Virtual Private Networks
              Identifier", RFC 2685, DOI 10.17487/RFC2685, September
              1999, <https://www.rfc-editor.org/info/rfc2685>.

   [RFC6513]  Rosen, E., Ed. and R. Aggarwal, Ed., "Multicast in MPLS/
              BGP IP VPNs", RFC 6513, DOI 10.17487/RFC6513, February
              2012, <https://www.rfc-editor.org/info/rfc6513>.




Peng & Zhang            Expires December 30, 2018               [Page 5]

Internet-Draft              BIER GLOBAL VPNID                  June 2018


   [RFC6514]  Aggarwal, R., Rosen, E., Morin, T., and Y. Rekhter, "BGP
              Encodings and Procedures for Multicast in MPLS/BGP IP
              VPNs", RFC 6514, DOI 10.17487/RFC6514, February 2012,
              <https://www.rfc-editor.org/info/rfc6514>.

   [RFC8279]  Wijnands, IJ., Ed., Rosen, E., Ed., Dolganow, A.,
              Przygienda, T., and S. Aldrin, "Multicast Using Bit Index
              Explicit Replication (BIER)", RFC 8279,
              DOI 10.17487/RFC8279, November 2017,
              <https://www.rfc-editor.org/info/rfc8279>.

   [RFC8296]  Wijnands, IJ., Ed., Rosen, E., Ed., Dolganow, A.,
              Tantsura, J., Aldrin, S., and I. Meilik, "Encapsulation
              for Bit Index Explicit Replication (BIER) in MPLS and Non-
              MPLS Networks", RFC 8296, DOI 10.17487/RFC8296, January
              2018, <https://www.rfc-editor.org/info/rfc8296>.

Authors' Addresses

   Shaofu Peng
   ZTE Corporation

   EMail: peng.shaofu@zte.com.cn


   Zheng(Sandy) Zhang
   ZTE Corporation

   EMail: zzhang_ietf@hotmail.com






















Peng & Zhang            Expires December 30, 2018               [Page 6]
