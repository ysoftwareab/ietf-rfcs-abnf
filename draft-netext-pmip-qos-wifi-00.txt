 



NETEXT WG                                            John Kaippallimalil
INTERNET-DRAFT                                                    Huawei
Intended Status: Informational                      Rajesh S. Pazhyannur
Expires: November 3, 2014                                          Cisco
                                                           Parviz Yegani
                                                                 Juniper
                                                             May 2, 2014


             Mapping 802.11 QoS in a PMIPv6 Mobility Domain
                     draft-netext-pmip-qos-wifi-00

Abstract

   This document provides a model for enabling end to end QoS in systems
   where there is a 802.11 based wireless system coupled with a PMIPv6
   mobility domain consisting a local mobility anchor and mobility
   access gateway. This enables QoS policing and labeling of packets in
   a consistent manner on the 802.11 link between the MN and the AP as
   well as the link between the MAG and the LMA. To enable this, the
   document specifies mapping between QoS parameters on the 802.11 link
   and the QoS Mobility options in the PMIPv6 domain.


Status of this Memo

   This Internet-Draft is submitted to IETF in full conformance with the
   provisions of BCP 78 and BCP 79.

   Internet-Drafts are working documents of the Internet Engineering
   Task Force (IETF), its areas, and its working groups.  Note that
   other groups may also distribute working documents as
   Internet-Drafts.

   Internet-Drafts are draft documents valid for a maximum of six months
   and may be updated, replaced, or obsoleted by other documents at any
   time.  It is inappropriate to use Internet-Drafts as reference
   material or to cite them other than as "work in progress."

   The list of current Internet-Drafts can be accessed at
   http://www.ietf.org/1id-abstracts.html

   The list of Internet-Draft Shadow Directories can be accessed at
   http://www.ietf.org/shadow.html

Copyright and License Notice

   Copyright (c) 2014 IETF Trust and the persons identified as the
 


Kaippallimalil et al.   Expires November 3, 2014                [Page 1]

INTERNET DRAFT         Mapping WiFi QoS in PMIPv6            May 2, 2014


   document authors. All rights reserved.

   This document is subject to BCP 78 and the IETF Trust's Legal
   Provisions Relating to IETF Documents
   (http://trustee.ietf.org/license-info) in effect on the date of
   publication of this document. Please review these documents
   carefully, as they describe your rights and restrictions with respect
   to this document. Code Components extracted from this document must
   include Simplified BSD License text as described in Section 4.e of
   the Trust Legal Provisions and are provided without warranty as
   described in the Simplified BSD License.

Table of Contents

   1. Introduction  . . . . . . . . . . . . . . . . . . . . . . . . .  3
     1.1. Terminology . . . . . . . . . . . . . . . . . . . . . . . .  5
     1.2. Definitions . . . . . . . . . . . . . . . . . . . . . . . .  5
     1.3. Abbreviations . . . . . . . . . . . . . . . . . . . . . . .  5
     2. Mapping 802.11 and PMIP QoS . . . . . . . . . . . . . . . . .  6
       2.1. Service Structure and Semantics of 802.11 QoS . . . . . .  6
       2.2. Mapping of 802.11 QoS to PMIP QoS Parameters  . . . . . .  6
       2.2.1. Connection Parameters . . . . . . . . . . . . . . . . .  6
       2.2.2. QoS Class . . . . . . . . . . . . . . . . . . . . . . .  7
       2.2.3. Bandwidth . . . . . . . . . . . . . . . . . . . . . . .  7
       2.3. 802.11 and MAG Admission Control Considerations . . . . .  8
   3. Call Flows  . . . . . . . . . . . . . . . . . . . . . . . . . .  9
     3.1. MN Initiated QoS Provisioning . . . . . . . . . . . . . . .  9
       3.1.1. MN Initiated QoS Request  . . . . . . . . . . . . . . .  9
       3.1.2. MN Initiated QoS Release  . . . . . . . . . . . . . . . 11
     3.2. Network Initiated QoS Provisioning  . . . . . . . . . . . . 12
       3.2.1. Network Initiated QoS Request . . . . . . . . . . . . . 12
       3.2.2. Network Initiated QoS Release . . . . . . . . . . . . . 14
   4. Security Considerations . . . . . . . . . . . . . . . . . . . . 16
   5. IANA Considerations . . . . . . . . . . . . . . . . . . . . . . 16
   6. Acknowledgements  . . . . . . . . . . . . . . . . . . . . . . . 16
   7. References  . . . . . . . . . . . . . . . . . . . . . . . . . . 16
     7.1. Normative References  . . . . . . . . . . . . . . . . . . . 16
     7.2. Informative References  . . . . . . . . . . . . . . . . . . 16
   Authors' Addresses . . . . . . . . . . . . . . . . . . . . . . . . 17









 


Kaippallimalil et al.   Expires November 3, 2014                [Page 2]

INTERNET DRAFT         Mapping WiFi QoS in PMIPv6            May 2, 2014


1. Introduction

   802.11 networks can currently apply QoS policy by using ALG
   (Application Level Gateway) to detect an application (e.g. SIP
   signaling) and then install QoS for the corresponding IP flow on the
   Wireless LAN Controller (WLC)/ Access Point (AP). However, this is
   not a general mechanism and would require ALG or detection of
   application level semantics in the access to install the right QoS. 

   [PMIP-QoS] describes a application neutral procedure to obtain QoS
   for PMIPv6 flows and sessions. However, there are differences in
   parameters and procedures that need to be mapped between PMIPv6 QoS
   and 802.11. PMIPv6 has the notion of QoS for mobility sessions and
   flows while in 802.11 these should correspond to QoS for 802.11 data
   frames. Parameters in 802.11 QoS do not always have a one-to-one
   correspondence in PMIPv6 QoS. Further, 802.11 and PMIP QoS procedures
   need to be aligned based on whether QoS setup is triggered by the MN
   or pushed by the the network, as well as working with WMM or 802.11aa
   mechanisms.

   This document provides information on using PMIPv6 QoS parameters for
   an MN connection over a 802.11 access network. The recommendations
   here allow for dynamic QoS policy information per Mobile Node (MN)
   and  session to be configured by the 802.11 access network. PMIPv6
   QoS signaling between MAG and LMA provisions the per MN QoS policies
   in the MAG. In the 802.11 access network modeled here, the MAG is
   located at the Access Point (AP)/ Wireless LAN Controller (WLC) .
   Figure 1 below provides an overview of the entities and protocols.

                                      +--------+          +-------+
                                      |  AAA   |          |  PCF  |
                                      +---+----+          +---+---+
                                          |                   |
                                          |                   |
        +----+                        +---+----+          +---+---+
        |    | 802.11 (WMM, 802.11aa) |        |  PMIPv6  |       |
        | MN <------------------------> AP/WLC <==========>  LMA  |
        |    |     (ADDTS, DELTS)     | (MAG)  |   QoS    |       |
        +----+                        +--------+          +-------+

        Figure 1: QoS Policy in 802.11 Access

   MN and AP/WLC use 802.11 QoS mechanisms to setup admission controlled
   flows.
   The AP/WLC (MAG) requests QoS policy from the LMA using PMIPv6 QoS
   extensions. This document does not exclude various deployments
   including those where AP and WLC are separate nodes, or the MAG
   control and data planes are separate. 
 


Kaippallimalil et al.   Expires November 3, 2014                [Page 3]

INTERNET DRAFT         Mapping WiFi QoS in PMIPv6            May 2, 2014


   The LMA provisions QoS policy when the MN initiates QoS requests and
   when QoS policy is pushed to the MN.  In WMM [WMM 1.2.0], the AP
   advertises if admission control is mandatory for an access class.
   Admission control for best effort or background access classes is not
   recommended. When the MN initiates QoS setup, it uses ADDTS (Add
   Traffic Stream) to request QoS for a traffic stream between itself
   and the AP, and DELTS (Delete Traffic Stream) to delete that stream. 
   When the network initiates QoS policy provisioning, 802.11aa
   capability is required. The LMA sends QoS policy to the AP/WLC, which
   in turn triggers an ADDTS reservation request to the MN. 

   The parameter mapping recommendations described here support the
   procedures by which the 3GPP network provisions QoS per application
   dynamically or during authorization of the Mobile Node (MN). However,
   the 802.11 procedures described here are not limited to work for just
   the 3GPP policy provisioning. If PMIPv6 QoS parameters can be
   provisioned on the MAG via mechanisms defined in [PMIP-QoS], the 
   802.11 procedures can be applied in general for provisioning OoS in a
   802.11 network.

   PMIPv6 QoS parameters need to be mapped to 802.11 QoS parameters. In
   some cases, there is no one-to-one mapping. And in other cases such
   as bandwidth, the values received in PMIP should be mapped to the
   right 802.11 parameters. This document provides recommendations to
   perform QoS mapping between PMIPv6 and 802.11 QoS. 

   [PMIP-QoS] does not explicitly describe how the QoS signaling and QoS
   sub-options map into corresponding signaling and parameters in the
   802.11 access network. This mapping and the procedures in the 802.11
   network to setup procedures are the focus of this document.   The
   end-to-end flow spanning 802.11 access and PMIPv6 domain and the QoS
   parameters in both segments are described here. Thus, it provides a
   systematic way to map  the various QoS parameters available in
   initial authorization, as well as setup of new sessions (such as a
   voice/video call). The mapping recommendations allow for proper
   provisioning and consistent interpretation between the various QoS
   parameters provided by PMIP QoS, and 802.11.

   The rest of the document is organized as follows. Chapter 2 provides
   an overview of establishing mobility sessions with no admission
   control. These mechanisms are specified in [PMIP QoS] and outlined
   here since the mobility session established is the basis for
   subsequent admission controlled requests for flows. Chapter 3
   describes how end to end QoS with 802.11 admission control is
   achieved. The mapping of parameters between 802.11 and PMIP QoS is
   described in Chapter 5.  


 


Kaippallimalil et al.   Expires November 3, 2014                [Page 4]

INTERNET DRAFT         Mapping WiFi QoS in PMIPv6            May 2, 2014


1.1. Terminology

   The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT",
   "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this
   document are to be interpreted as described in RFC 2119 [RFC2119].

1.2. Definitions

   Peak Data Rate
       In WMM, Peak Data Rate specifies the maximum data rate in bits
       per second. The Maximum Data Rate does not include the MAC and
       PHY overheads [WMM 1.2.0].

   Mean Data Rate
       This is the average data rate in bits per second. The Mean Data
       Rate does not include the MAC and PHY overheads [WMM1.2.0]

   Minimum Data Rate
       In WMM, Minimum Data Rate specifies the minimum data rate in bits
       per second. The Minimum Data Rate does not include the MAC and
       PHY overheads [WMM 1.2.0].

   TSPEC
       The TSPEC element in 802.11 contains the set of parameters that
       define the characteristics and QoS expectations of a traffic
       flow.

   TCLAS
       The TCLAS element specifies an element that contains a set of
       parameters necessary to identify incoming MSDU (MAC Service Data
       Unit) that belong to a particular TS (Traffic Stream) [802.11].
   	
1.3. Abbreviations

   AAA		Authentication Authorization Accounting
   AMBR		Aggregate Maximum Bit Rate
   ARP		Allocation and Retention Priority
   AP		Access Point
   DSCP		Differentiated Services Code Point
   EPC		Enhanced Packet Core
   GBR		Guaranteed Bit Rate
   MAG		Mobility Access Gateway
   MBR		Maximum Bit Rate
   MN		Mobile Node
   QCI		QoS Class Indicator
   QoS		Quality of Service
   TCLAS		Type Classification
   TSPEC		Traffic Conditioning Spec
 


Kaippallimalil et al.   Expires November 3, 2014                [Page 5]

INTERNET DRAFT         Mapping WiFi QoS in PMIPv6            May 2, 2014


   WLC		Wireless Controller

2. Mapping 802.11 and PMIP QoS

   This section provides an outline of the semantics and mapping of QoS
   parameters between 802.11 and PMIP QoS. While PMIP QoS provisions QoS
   for IP sessions and flows, 802.11 QoS reservations are made for an
   MN's data frames. Similarly, parameters in PMIP QoS and 802.11 do not
   have a one-to-one correspondence. The sections below provide
   recommendations on mapping of parameters as well as signaling
   triggers for the QoS service request.

2.1. Service Structure and Semantics of 802.11 QoS

   IEEE 802.11-2012 [802.11-2012] provides an enhancement of the MAC
   layer in 802.11 networks to support QoS--EDCA (Enhanced Distributed
   Channel Access). EDCA uses a contention based channel access method
   to provide differentiated, distributed access using eight different
   UPs (User Priorities). EDCA defines four access categories (AC) that
   provide support for the delivery of traffic. In EDCA, the random
   back-off timer and arbitration inter-frame space is adjusted
   according to the QoS priority. Frames with higher priority AC have
   shorter random back-off timers and arbitration inter-frame spaces.
   Thus, there is a better chance for higher priority frames to be
   transmitted. The Wi-Fi Alliance has created a specification referred
   to as WMM (Wi-Fi Multimedia) based on above.

   The MN uses ADDTS (Add Traffic Specs) to setup QoS for a traffic
   stream between itself and the AP, and DELTS to delete that stream. In
   WMM [WMM 1.2.0], the AP advertises if admission control is mandatory
   for an access class. Admission control for best effort or background
   access classes is not recommended. The Wi-Fi Alliance has created a
   specification referred to as WMM-AC (Wi-Fi Multimedia Admission
   Control) based on the above.

   It should be noted that there are no guaranteed or committed
   resources in an 802.11 network - only prioritization that gives
   better opportunity for frames to compete for a shared medium. 

2.2. Mapping of 802.11 QoS to PMIP QoS Parameters

2.2.1. Connection Parameters

   TSPEC in 802.11 is used to reserve QoS for a traffic stream (MN MAC,
   TS(Traffic Stream) id). The 802.11 QoS reservation is for 802.11
   frames associated with an MN's MAC address. TCLAS element with
   Classifier 1 (TCP/UDP Parameters) are used to identify a PMIP QoS
   flow. There is a one-to-one mapping between the TCLAS defined flow
 


Kaippallimalil et al.   Expires November 3, 2014                [Page 6]

INTERNET DRAFT         Mapping WiFi QoS in PMIPv6            May 2, 2014


   and that in Traffic Selector.

      +------------------------------+------------------------------+
      |    MN <--> AP/WLC(802.11)    | AP/WLC(MAG) <--> LMA PMIPv6  |
      +------------------------------+------------------------------+
      | (TCLAS) TCP/UDP IP           |   Traffic Selector (IP flow) |
      | (TCLAS) User Priority        |   DSCP                       |
      +------------------------------+------------------------------+

      Table 1: 802.11 - PMIPv6 QoS Connection mapping

   If the MN or AP/WLC is not able to convey flow parameters in TCLAS,
   the AP/WLC should use out of band methods to determine the IP flow
   for which QoS is requested. This may include higher level connection
   setup signaling (e.g., WCS in 3GPP 23.402).

2.2.2. QoS Class

   Table 2 contains a mapping between Access Class (WMM AC) and 802.1D
   in 802.11 frames, and DSCP in IP data packets. The table also
   provides the mapping between Access Class (WMM AC) and DSCP for use
   in 802.11 TSPEC and PMIP QoS reservations.

     QCI     DSCP   802.1D UP    WMM AC      Example Services
    ------------------------------------------------------------
      1       EF      6(VO)      3 AC_VO     conversational voice	
      2       EF      6(VO)      3 AC_VO     conversational video
      3       EF      6(VO)      3 AC_VO     real-time gaming
      4      AF41     5(VI)      2 AC_VI     buffered streaming
      5      AF31     4(CL)      2 AC_VI     signaling
      6      AF32     4(CL)      2 AC_VI     buffered streaming
      7      AF21     3(EE)      0 AC_BE     interactive gaming
      8      AF11     1(BE)      0 AC_BE     web access
      9       BE      0(BK)      1 AC_BK     e-mail

      Table 2: QoS Mapping between QCI/DSCP, 802.1D UP, WMM AC

   The MN tags all data packets with DSCP and 802.1D UP corresponding to
   the application and the subscribed policy or authorization. The
   AP/WLC polices sessions and flows based on the configured QoS policy
   values for the MN.

   For QoS reservations, TSPEC uses WMM AC values and PMIP QoS uses
   corresponding DSCP values in Traffic Selector. 802.11 QoS Access
   Class AC_VO, AC_VI are used for QoS reservations. AC_BE, AC_BK should
   not be used in reservations.

2.2.3. Bandwidth
 


Kaippallimalil et al.   Expires November 3, 2014                [Page 7]

INTERNET DRAFT         Mapping WiFi QoS in PMIPv6            May 2, 2014


   Bandwidth parameters that need to be mapped between 802.11 and PMIP
   QoS are shown in Table 3. 

   Table 3 shows the mapping of bandwidth parameters.

       +-------------------------+------------------------------+ 
       | MN <--> AP/WLC(802.11)  | AP/WLC(MAG) <--> LMA PMIPv6  |
       +-------------------------+------------------------------+
       | Mean Data Rate, DL      |   Guaranteed-DL-Bit-Rate     |
       | Mean Data Rate, UL      |   Guaranteed-UL-Bit-Rate     |
       | Peak Data Rate, DL      |   Aggregate-Max-DL-Bit-Rate  |
       | Peak Data Rate, UL      |   Aggregate-Max-UL-Bit-Rate  |
       +-------------------------+------------------------------+

       Table 3: Bandwidth Parameters for Admission Controlled Flows

   In PMIP QoS, services using a sending rate smaller than or equal to
   Guaranteed Bit Rate (GBR) can in general assume that congestion
   related packet drops will not occur [TS 23.203]. If the rate offered
   by the service exceeds this threshold, there are no guarantees
   provided. 802.11 radio networks do not offer such a guarantee, but
   [WMM 1.2.0] notes that the application (service) requirements are
   captured in TSPEC by the MSDU (MAC Service Data Unit) and Mean Data
   Rate. The TSPEC should contain Mean Data Rate and it is recommended
   that it be mapped to the GBR parameters, Guaranteed-DL-Bit-Rate and
   Guaranteed-UL-Bit-Rate in PMIP QoS.

   802.11 TSPEC requests do not require all fields to be completed. [WMM
   1.2.0] specifies a list of TSPEC parameters that are required in the
   specification. Peak Data Rate is not required in WMM, however for MNs
   and APs that are capable of specifying the Peak Data Rate, it should
   be mapped to MBR (Maximum Bit Rate) in PMIP QoS. The AP/WLC should
   use the MBR parameters, Aggregate-Max-DL-Bit-Rate and Aggregate-Max-
   UL-Bit-Rate to police these flows on the backhaul segment between MAG
   and LMA.

   During the QoS reservation procedure, if the MN requests Mean Data
   Rate, or Peak Data Rate in excess of values authorized in PMIP QoS,
   the AP/WLC should deny the request in ADDTS Response. The AP/WLC may
   set the reject cause code to REJECTED_WITH_SUGGESTED_CHANGES and send
   a revised TSPEC with Mean Data Rate and Peak Data Rate set to
   acceptable GBR and MBR respectively in PMIP QoS.

2.3. 802.11 and MAG Admission Control Considerations

   Flows and sessions that do not need QoS reservation have no signaling
   or equivalent mapping in 802.11. These sessions and flows are policed
   by the AP/WLC to ensure that QoS policy obtained initially (during MN
 


Kaippallimalil et al.   Expires November 3, 2014                [Page 8]

INTERNET DRAFT         Mapping WiFi QoS in PMIPv6            May 2, 2014


   authorization) or dynamically over PMIP QoS is not exceeded by the
   MN.

   All connection sessions of the MN with no explicit reservation should
   not in total exceed Per-MN-Agg-Max-DL-Bit-Rate and Per-MN-Agg-Max-UL-
   Bit-Rate in the downlink and uplink directions respectively. The non-
   admission controlled flows of a single connectivity session of an MN
   should not exceed Per-Session-Agg-Max-DL-Bit-Rate and Per-Session-
   Agg-Max-UL-Bit-Rate in the downlink and uplink directions
   respectively.

   When there are insufficient resources in the radio network, the
   AP/WLC may preempt existing calls based on the Preemption-Capability
   of a new call and Preemption-Vulnerability of established calls.
   Parameter Allocation-Retention-Priority and sub fields of Priority,
   Preemption-Capability and Preemption-Vulnerability are used as
   defined in [RFC 7222]. If the AP/WLC determines that an established
   flow with reserved resources should be released, the AP/WLC should
   inform the MN using ADDTS (802.11aa) and signal the LMA with a
   revised QoS reservation in PBU/PBA.

3. Call Flows

   There are two main types of interaction possible to provision QoS for
   flows that require admission control - one where the MN initiates the
   QoS request and the network provisions the resources. The second is
   where the network provisions resources as a result of PMIP QoS
   request. In the second scenario, if the MN supports 802.11aa, the
   network can push the QoS configuration to the MN. If the MN only
   supports WMM QoS, then MN requests for QoS for the 802.11 segment and
   the MAG provisions based on QoS already provisioned for the MN.

3.1. MN Initiated QoS Provisioning

3.1.1. MN Initiated QoS Request

   This procedure outlines the case where the MN is configured to start
   the QoS signaling. In this case, the MN sends an ADDTS request
   indicating the QoS required for the flow. The AP/WLC (MAG) obtains
   the corresponding level of QoS to be granted to the flow by PMIPv6
   PBU/PBA sequence with QoS options with the LMA. Details of the QoS
   provisioning for the flow are described below. 






 


Kaippallimalil et al.   Expires November 3, 2014                [Page 9]

INTERNET DRAFT         Mapping WiFi QoS in PMIPv6            May 2, 2014


                                  +--------+              
      +----+                      | AP/WLC |            +-------+
      | MN |                      | (MAG)  |            |  LMA  |  
      +-+--+                      +---+----+            +---+---+
        |                             |                     |
      +-------------------------------------------------------------+
      |   [0] establish connection session to mobile network        |
      +-------------------------------------------------------------+
        |                             |                     |
      +-------------+                 |                     | 
      |upper layer  |                 |                     |
      |notification |                 |                     |
      +-+-+-+-+-+-+-+                 |                     |
        |                             |                     |
        | ADDTS Request (TCLAS,TSPEC) |                     |
        |---------------------------->| PBU(QoS options)[2] |
        |             [1]             |-------------------->| QoS Policy
        |                             |PBA (QoS option) [3] |<--------->
        | ADDTS Response(TCLAS,TSPEC) |<--------------------|
        |<----------------------------|                     |
        |             [4]             |                     |

      Figure 3: MN initiated QoS setup

    [0] The MN establishes a connectivity session as described in [RFC
        7222], section 3.1, MAG-initiated QoS service request, steps 1-
        4. At this point, a connection with PMIPv6 tunnel is established
        to the LMA. This allows the MN to start application level
        signaling.

    [1] The trigger for MN to request QoS is an upper layer
        notification. This may be the result of end-to-end application
        signaling and setup procedures (e.g. SIP)

        Since the MN is configured to start QoS signaling, it sends an
        ADDTS request with TSPEC and TCLAS identifying the flow for
        which QoS is requested. The TSPECs for both uplink and downlink
        in this request should contain the Mean Data Rate and and may
        contain Peak Data Rate.    

    [2] If there are sufficient resources at the AP/WLC to satisfy the
        request, the MAG (AP/WLC sends a PBU with QoS options,
        operational code  ALLOCATE and Traffic Selector identifying the
        flow. The Traffic selector is derived from the TCLAS to identify
        the flow requesting QoS. 802.11 QoS parameters in TSPEC are
        mapped to PMIPv6 parameters. The mapping of TCLAS to PMIPv6 is
        shown in Table 1. TSPEC parameter mapping is shown in Table 3.

 


Kaippallimalil et al.   Expires November 3, 2014               [Page 10]

INTERNET DRAFT         Mapping WiFi QoS in PMIPv6            May 2, 2014


    [3] The LMA obtains the authorized QoS for the flow and responds to
        the MAG with operational code set to RESPONSE. Mapping of PMIPv6
        to 802.11 TCLAS is shown in Table 1, TSPEC parameters in Table
        3.

        Reserved bandwidth for flows are accounted separately from the
        non-reserved session bandwidth. The Traffic Selector identifies
        the flow for which the QoS reservations are made. 

    [4] The AP/WLC (MAG) provisions the corresponding QoS and replies
        with ADDTS Response containing authorized QoS in TSPEC and flow
        identification in TSPEC.

        The AP/WLC polices these flows according to the QoS
        provisioning.

3.1.2. MN Initiated QoS Release

   QoS resources reserved for a session are released on completion of
   the session. When the application session completes, the policy
   server, or the MN may signal for the release of resources. In this
   use case, the network initiates the release of QoS resources.


























 


Kaippallimalil et al.   Expires November 3, 2014               [Page 11]

INTERNET DRAFT         Mapping WiFi QoS in PMIPv6            May 2, 2014


                             +--------+               
      +----+                 | AP/WLC |           +-------+
      | MN |                 | (MAG)  |           |  LMA  |         
      +-+--+                 +---+----+           +---+---+
        |                        |                    |
      +-------------------------------------------------------------+
      |         [0] Establishment of application session            |
      |              and reservation of QoS resources               |
      |                                                             |
      |                  ( Session in progress)                     |
      |                                                             |
      |               Release of application session                |
      +-------------------------------------------------------------+
        |                        |                    |
        | DELTS Request          |                    |
        |       (TS INFO)[1]     |                    |
        |----------------------->|                    |
        | DELTS Response         |                    |
        |       (TS INFO)[2]     |                    |
        |<-----------------------|                    | 
        |                        |PBU(QoSx,DE-ALLOC)[3]
        |                        |------------------->| Policy Update
        |                        |PBA(QoSx,RESPONSE)[4]<------------>
        |                        |<-------------------|       
        |                        |                    |

      Figure 6: Network initiated QoS resource release

    [0] The MN establishes and reserves QoS resources as in use cases A,
        B or C.
        When the application session terminates, the MN prepares to
        release QoS  resources. 

    [1] MN releases its own internal resources and sends a DELTS Request
        to the AP/WLC with TS (Traffic Stream) INFO. 

    [2] AP/WLC receives the DELTS request, releases local resources and
        responds to MN with a DELTS response.

    [3] AP/WLC (MAG) initiates a PBU with Traffic Selector constructed
        from TCLAS and PMIPv6 QoS parameters from TSPEC (QoSx).
    [4] LMA receives the PBU, releases local resources and informs
        policy server. The LMA then responds with a PBA.

3.2. Network Initiated QoS Provisioning

3.2.1. Network Initiated QoS Request

 


Kaippallimalil et al.   Expires November 3, 2014               [Page 12]

INTERNET DRAFT         Mapping WiFi QoS in PMIPv6            May 2, 2014


   When the MN is provisioned to wait for QoS configuration from the
   network, QoS policy configuration is triggered by PMIP QoS requests
   from LMA to MAG. This use case illustrates how an MN and 802.11
   network that support 802.11aa can provision QoS to flows of the MN
   that when the policy server pushes the reservation request.
                                  +--------+               
      +----+                      | AP/WLC |         +-------+
      | MN |                      | (MAG)  |         |  LMA  |         
      +-+--+                      +---+----+         +---+---+
        |                             |                  |
      +----------------------------------------------------------------+
      |   [0] establish connection session to mobile network           |
      +----------------------------------------------------------------+
        |                             |                  |
        |                             |                  | Policy update
        |                             |UPN(QoS option)[2]|<-------------
        | ADDTS Reserve Request       |<-----------------|       [1]
        |         (TCLAS, TSPEC)[3]   |                  |
        |<----------------------------|                  |
        | ADDTS Reserve Response      |                  |
        |         (TCLAS, TSPEC)[4]   |                  |
        |---------------------------->|                  |
        |                             |UPA(QoS option)[5]|
        |                             |----------------->|
        |                             |                  |

      Figure 4: Network initiated QoS setup with 802.11aa

    [0] The MN sets up best effort connectivity session as described in
        Case A. This allows the MN to perform application level
        signaling and setup.

    [1] The policy server sends a QoS reservation request to the LMA.
        This is usually sent in response to an application that requests
        the policy server for higher QoS for some of its flows.

        The LMA reserves resources for the flow requested. 

    [2] LMA sends PMIP UPN (Update Notification) to the MAG with QoS
        parameters for the flow for which the LMA reserved resources in
        step [1]. In UPN, the operational code in QoS option is set to
        ALLOCATE and the Traffic Selector identifies the flow for QoS.

        The LMA QoS parameters include Guaranteed-DL-Bit-
        Rate/Guaranteed-UL-Bit-Rate and Aggregate-Max-DL-Bit-
        Rate/Aggregate-Max-UL-Bit-Rate for the flow. In networks like
        3GPP, the reserved bandwidth for flows are accounted separately
        from the non-reserved session bandwidth. 
 


Kaippallimalil et al.   Expires November 3, 2014               [Page 13]

INTERNET DRAFT         Mapping WiFi QoS in PMIPv6            May 2, 2014


    [3] If there are sufficient resources to satisfy the request, the
        AP/WLC (MAG) sends an ADDTS Reserve Request (802.11aa)
        specifying the QoS reserved for the traffic stream including
        TSPEC and TCLAS element mapped from PMIP QoS Traffic Selector to
        identify the flow.

        PMIPv6 parameters are mapped to TCLAS (Table 1) and TSPEC (Table
        3).

        If there are insufficient resources at the AP/WLC, the MAG will
        not send and ADDTS message and will continue processing of step
        [5].

    [4] MN accepts the QoS reserved in the network and replies with
        ADDTS Reserve Response.   

    [5] The MAG (AP/WLC) replies with UPA confirming the acceptance of
        QoS options and operational code set to RESPONSE. The AP/WLC
        police flows based on the new QoS.

        If there are insufficient resources at the AP/WLC, the MAG sends
        a response with UPA status code set to
        CANNOT_MEET_QOS_SERVICE_REQUEST.

3.2.2. Network Initiated QoS Release

   QoS resources reserved for a session are released on completion of
   the session. When the application session completes, the policy
   server, or the MN may signal for the release of resources. In this
   use case, the network initiates the release of QoS resources.


















 


Kaippallimalil et al.   Expires November 3, 2014               [Page 14]

INTERNET DRAFT         Mapping WiFi QoS in PMIPv6            May 2, 2014


                             +--------+               
      +----+                 | AP/WLC |           +-------+
      | MN |                 | (MAG)  |           |  LMA  |         
      +-+--+                 +---+----+           +---+---+
        |                        |                    |
      +-------------------------------------------------------------+
      |         [0] Establishment of application session            |
      |              and reservation of QoS resources               |
      |                                                             |
      |                  ( Session in progress)                     |
      |                                                             |
      |               Release of application session                |
      +-------------------------------------------------------------+
        |                        |                    | Policy update
        |                        |UPN(QoSx,DE-ALLOC)[2]<--------------
        |                        |<-------------------|       [1]
        |                        |UPA(QoSx,RESPONSE)[3]
        |                        |------------------->|       
        | DELTS Request          |                    |
        |       (TS INFO)[4]     |                    |
        |<-----------------------|                    |
        | DELTS Response         |                    |
        |       (TS INFO)[5]     |                    |
        |----------------------->|                    |
        |                        |                    |

      Figure 6: Network initiated QoS resource release

    [0] The MN establishes and reserves QoS resources as in use cases A,
        B or C.
        When the application session terminates, the policy server
        receives notification that the session has terminated. 

    [1] LMA receives a policy update indicating that QoS for flow (QoSx)
        should be released. The LMA releases local resources associated
        with the flow.

    [2] LMA sends a UPN with QoS options - Traffic Selector field
        identifying the flow for which QoS resources are to be released,
        and operation code set to DE-ALLOCATE. No additional LMA QoS
        parameters are sent. 

    [3] MAG replies with UPA confirming the acceptance and operation
        code set to RESPONSE. 

    [4] AP/WLC (MAG) releases local QoS resources associated with the
        flow. AP/WLC derives the corresponding 802.11 Traffic Stream
        from the PMIPv6 Traffic Selector. The AP sends a DELTS Request
 


Kaippallimalil et al.   Expires November 3, 2014               [Page 15]

INTERNET DRAFT         Mapping WiFi QoS in PMIPv6            May 2, 2014


        with TS INFO identifying the reservation.

    [5] MN sends DELTS Response confirming release.

        Since the MN has completed the session, it may send a DELTS to
        explicitly request release QoS resources at AP. If the AP and MN
        are 802.11aa capable, the release of resources may also be
        signaled to the MN.

4. Security Considerations

   This document describes mapping of PMIP QoS parameters to IEEE 802.11
   QoS parameters. No security concerns need to be addressed as a result
   of this mapping.

5. IANA Considerations

   No IANA assignment of parameters are required.

6. Acknowledgements
   The authors of this document thank the NetExt Working Group for the
   valuable feedback to different versions of this specification. In
   particular, the authors wish to thank Sri Gundavelli, Rajeev, Koodli,
   Georgios Karagianis, Kent Leung, Marco Liebsch, Basavaraj Patil,
   Pierrick Seite, Hidetoshi Yokota for their suggestions and valuable
   input. The authors also thank George Calcev, Mirko Schramm, Mazin
   Shalash and Marco Spini for detailed input on parameters and
   scheduling in 802.11 and 3GPP radio networks.

7. References

7.1. Normative References

   [RFC2119]     Bradner, S., "Key words for use in RFCs to Indicate
                 Requirement Levels", BCP 14, RFC 2119, March 1997.

   [RFC7222]     Liebsch, et al., "Quality of Service Option for Proxy
                 Mobile IPv6", draft-ietf-netext-pmip6-qos-11, Feb 2014.

   [RFC 5226]    Narten, T. and H. Alvestrand, "Guidelines for Writing
                 an IANA Considerations Section in RFCs", BCP 26, RFC
                 5226, May 2008.

7.2. Informative References

   [802.11-2012] 802.11-2012 - IEEE Standard for Information Technology-
                 -Telecommunications and information exchange between
                 systems Local and metropolitan area networks--Specific
 


Kaippallimalil et al.   Expires November 3, 2014               [Page 16]

INTERNET DRAFT         Mapping WiFi QoS in PMIPv6            May 2, 2014


                 requirements Part 11: Wireless LAN Medium Access
                 Control (MAC) and Physical Layer (PHY) Specifications

   [WMM 1.2.0]   Wi-Fi Multimedia Technical Specification (with WMM-
                 Power Save and WMM-Admission Control) Version 1.2.0

   [802.11aa]    Wireless LAN Medium Access Control (MAC) and Physical
                 Layer (PHY) Specification, Amendment 2: MAC
                 Enhancements for Robust Audio Video Streaming, IEEE
                 802.11aa-2012. 

   [GSMA-IR34]   Inter-Service Provider Backbone Guidelines 5.0, 22
                 December 2010

   [TS23.402]    Architecture Enhancements for non-3GPP accesses(Release
                 12), 3GPP TS 23.402, V12.2.0 (2013-09).

   [TS23.203]    Policy and Charging Control Architecture, Release 11,
                 3GPP TS 23.203, V11.2.0 (2011-06). 

   [RFC 2211]    Wroclawski, J., "Specification of the Controlled Load
                 Quality of Service", RFC 2211, September 1997.

   [RFC 2212]    Shenker, S., Partridge, C., and R. Guerin,
                 "Specification of Guaranteed Quality of Service", RFC
                 2212, September 1997.

   [RFC 2216]    Shenker, S., and J. Wroclawski, "Network Element QoS
                 Control Service Specification Template", RFC 2216,
                 September 1997.


Authors' Addresses

   John Kaippallimalil
   5340 Legacy Drive, Suite 175
   Plano, Texas 75024

   E-Mail: john.kaippallimalil@huawei.com


   Rajesh Pazhyannur
   170 West Tasman Drive
   San Jose, CA 95134

   E-Mail: rpazhyan@cisco.com


 


Kaippallimalil et al.   Expires November 3, 2014               [Page 17]

INTERNET DRAFT         Mapping WiFi QoS in PMIPv6            May 2, 2014


   Parviz Yegani
   1194 North Mathilda Ave.
   Sunnyvale, CA 94089-1206

   E-Mail: pyegani@juniper.net














































Kaippallimalil et al.   Expires November 3, 2014               [Page 18]
