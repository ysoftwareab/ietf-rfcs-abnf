<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html lang="en"><head><title>Session Initiation Protocol (SIP): single registration for Multiple Address of Record (AoR) reachabiliTy InformatioN, with FedeRated Intra ENterprise Domain name Setup</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<meta name="description" content="Session Initiation Protocol (SIP): single registration for Multiple Address of Record (AoR) reachabiliTy InformatioN, with FedeRated Intra ENterprise Domain name Setup">
<meta name="keywords" content="SIP, enterprise, corporate, private network, business communication">
<meta name="generator" content="xml2rfc v1.35 (http://xml.resource.org/)">
<meta name="viewport" content="width=600;" />
<style type='text/css'><!--
        body {
                font-family: verdana, charcoal, helvetica, arial, sans-serif;
                font-size: 85%;
		max-width: 40em; 
		color: #000; background-color: #FFF;
                margin: 2em;
        }
        h1, h2, h3, h4, h5, h6 {
                font-family: helvetica, monaco, "MS Sans Serif", arial, sans-serif;
                font-weight: bold; font-style: normal;
        }
        h1 { color: #900; background-color: transparent; text-align: right; }
        h3 { color: #333; background-color: transparent; }

        td.RFCbug {
                font-size: x-small; text-decoration: none;
                width: 30px; height: 30px; padding-top: 2px;
                text-align: justify; vertical-align: middle;
                background-color: #000;
        }
        td.RFCbug span.RFC {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: bold; color: #666;
        }
        td.RFCbug span.hotText {
                font-family: charcoal, monaco, geneva, "MS Sans Serif", helvetica, verdana, sans-serif;
                font-weight: normal; text-align: center; color: #FFF;
        }

        table.TOCbug { width: 30px; height: 15px; }
        td.TOCbug {
                text-align: center; width: 30px; height: 15px;
                color: #FFF; background-color: #900;
        }
        td.TOCbug a {
                font-family: monaco, charcoal, geneva, "MS Sans Serif", helvetica, sans-serif;
                font-weight: bold; font-size: x-small; text-decoration: none;
                color: #FFF; background-color: transparent;
        }

        td.header {
                font-family: arial, helvetica, sans-serif; font-size: x-small;
                vertical-align: top; width: 33%;
                color: #FFF; background-color: #666;
        }
        td.author { font-weight: bold; font-size: x-small; margin-left: 4em; }
        td.author-text { font-size: x-small; }

        /* info code from SantaKlauss at http://www.madaboutstyle.com/tooltip2.html */
        a.info {
                /* This is the key. */
                position: relative;
                z-index: 24;
                text-decoration: none;
        }
        a.info:hover {
                z-index: 25;
                color: #FFF; background-color: #900;
        }
        a.info span { display: none; }
        a.info:hover span.info {
                /* The span will display just on :hover state. */
                display: block;
                position: absolute;
                font-size: smaller;
                top: 2em; left: -5em; width: 15em;
                padding: 2px; border: 1px solid #333;
                color: #900; background-color: #EEE;
                text-align: left;
        }

        a { font-weight: bold; }
        a:link    { color: #900; background-color: transparent; }
        a:visited { color: #633; background-color: transparent; }
        a:active  { color: #633; background-color: transparent; }

        p { margin-left: 2em; margin-right: 2em; }
        p.copyright { font-size: x-small; }
        p.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; margin-left: 3em; }
        table.toc { margin: 0 0 0 3em; padding: 0; border: 0; vertical-align: text-top; }
        td.toc { font-size: 85%;
		max-width: 40em; 
		font-weight: bold; vertical-align: text-top; }

        ol.text { margin-left: 2em; margin-right: 2em; }
        ul.text { margin-left: 2em; margin-right: 2em; }
        li      { margin-left: 3em; }

        /* RFC-2629 <spanx>s and <artwork>s. */
        em     { font-style: italic; }
        strong { font-weight: bold; }
        dfn    { font-weight: bold; font-style: normal; }
        cite   { font-weight: normal; font-style: normal; }
        tt     { color: #036; }
        tt, pre, pre dfn, pre em, pre cite, pre span {
                font-family: "Courier New", Courier, monospace; font-size: small;
        }
        pre {
                text-align: left; padding: 4px;
                color: #000; background-color: #CCC;
        }
        pre dfn  { color: #900; }
        pre em   { color: #66F; background-color: #FFC; font-weight: normal; }
        pre .key { color: #33C; font-weight: bold; }
        pre .id  { color: #900; }
        pre .str { color: #000; background-color: #CFF; }
        pre .val { color: #066; }
        pre .rep { color: #909; }
        pre .oth { color: #000; background-color: #FCF; }
        pre .err { background-color: #FCC; }

        /* RFC-2629 <texttable>s. */
        table.all, table.full, table.headers, table.none {
                font-size: 85%;
		max-width: 40em; 
		text-align: center; border-width: 2px;
                vertical-align: top; border-collapse: collapse;
        }
        table.all, table.full { border-style: solid; border-color: black; }
        table.headers, table.none { border-style: none; }
        th {
                font-weight: bold; border-color: black;
                border-width: 2px 2px 3px 2px;
        }
        table.all th, table.full th { border-style: solid; }
        table.headers th { border-style: none none solid none; }
        table.none th { border-style: none; }
        table.all td {
                border-style: solid; border-color: #333;
                border-width: 1px 2px;
        }
        table.full td, table.headers td, table.none td { border-style: none; }

        hr { height: 1px; }
        hr.insert {
                width: 80%; border-style: none; border-width: 0;
                color: #CCC; background-color: #CCC;
        }
--></style>
</head>
<body>
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<table summary="layout" width="66%" border="0" cellpadding="0" cellspacing="0"><tr><td><table summary="layout" width="100%" border="0" cellpadding="2" cellspacing="1">
<tr><td class="header">MARTINI Working Group</td><td class="header">J. van Elburg</td></tr>
<tr><td class="header">Internet-Draft</td><td class="header">Detecon International Gmbh</td></tr>
<tr><td class="header">Intended status: Informational</td><td class="header">B. Chatras</td></tr>
<tr><td class="header">Expires: October 30, 2010</td><td class="header">France Telecom Orange</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">M. Dolly</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">AT&T Labs, Inc.</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">T. Dwight</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Verizon</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">J. van Geel</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Belgacom</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">C. Holmberg</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Ericsson</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">K. Drage</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">P. Mourot</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">Alcatel-Lucent</td></tr>
<tr><td class="header">&nbsp;</td><td class="header">April 28, 2010</td></tr>
</table></td></tr></table>
<h1><br />Session Initiation Protocol (SIP): single registration for Multiple Address of Record (AoR) reachabiliTy InformatioN, with FedeRated Intra ENterprise Domain name Setup<br />draft-vanelburg-martini-friends-00</h1>

<h3>Abstract</h3>

<p>
      The Martini Working Group is defining a mechanism for SIP
      IP-PBX type devices to REGISTER and obtain SIP service for
      E.164-based Address of Records.  In doing so it has selected a
      solution that is not compatible with the solution that was
      specified in ETSI TISPAN and 3GPP for subscription based
      business trunking. The latter solution not only covers E.164
      numbers but also handles non-E.164 numbers and alphanumeric
      AOR's.
    
</p>
<p>
      This document defines a extension of the martini mechanism
      that allows it to be used also with ETSI TISPAN and 3GPP
      standard subscription based business trunking arrangements.
    
</p>
<h3>Status of this Memo</h3>
<p>
This Internet-Draft is submitted  in full
conformance with the provisions of BCP&nbsp;78 and BCP&nbsp;79.</p>
<p>
Internet-Drafts are working documents of the Internet Engineering
Task Force (IETF).  Note that other groups may also distribute
working documents as Internet-Drafts.  The list of current
Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>
Internet-Drafts are draft documents valid for a maximum of six months
and may be updated, replaced, or obsoleted by other documents at any time.
It is inappropriate to use Internet-Drafts as reference material or to cite
them other than as &ldquo;work in progress.&rdquo;</p>
<p>
This Internet-Draft will expire on October 30, 2010.</p>

<h3>Copyright Notice</h3>
<p>
Copyright (c) 2010 IETF Trust and the persons identified as the
document authors.  All rights reserved.</p>
<p>
This document is subject to BCP 78 and the IETF Trust's Legal
Provisions Relating to IETF Documents
(http://trustee.ietf.org/license-info) in effect on the date of
publication of this document.  Please review these documents
carefully, as they describe your rights and restrictions with respect
to this document. Code Components extracted from this document must
include Simplified BSD License text as described in Section 4.e of
the Trust Legal Provisions and are provided without warranty as
described in the Simplified BSD License.</p>
<p>
This document may contain material from IETF Documents or IETF
Contributions published or made publicly available before November
10, 2008.  The person(s) controlling the copyright in some of this
material may not have granted the IETF Trust the right to allow
modifications of such material outside the IETF Standards Process.
Without obtaining an adequate license from the person(s) controlling
the copyright in such materials, this document may not be modified
outside the IETF Standards Process, and derivative works of it may
not be created outside the IETF Standards Process, except to format
it for publication as an RFC or to translate it into languages other
than English.</p>
<a name="toc"></a><br /><hr />
<h3>Table of Contents</h3>
<p class="toc">
<a href="#sec-introduction">1.</a>&nbsp;
Introduction<br />
<a href="#sec-conventions">2.</a>&nbsp;
Conventions<br />
<a href="#sec-definitions">3.</a>&nbsp;
Definitions<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-definitions-aor">3.1.</a>&nbsp;
AOR<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor1">3.2.</a>&nbsp;
Alphanumeric SIP URI<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor2">3.3.</a>&nbsp;
Implicit Registration<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor3">3.4.</a>&nbsp;
Reachability Information<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor4">3.5.</a>&nbsp;
SSP<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor5">3.6.</a>&nbsp;
BC<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor6">3.7.</a>&nbsp;
domain federation<br />
<a href="#sec-complementing">4.</a>&nbsp;
Overview of the FRIENDS solution<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-compl-issue">4.1.</a>&nbsp;
The issue in short<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-compl-registration">4.2.</a>&nbsp;
Registration signalling<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#sec-compl-inbound">4.3.</a>&nbsp;
SSP Processing of Inbound Requests targeted at an implicitly registered AOR assigned to a bulk contact<br />
<a href="#sec-security">5.</a>&nbsp;
Security considerations<br />
<a href="#sec-iana">6.</a>&nbsp;
IANA considerations<br />
<a href="#sec-acks">7.</a>&nbsp;
Acknowledgments<br />
<a href="#rfc.references1">8.</a>&nbsp;
References<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references1">8.1.</a>&nbsp;
Normative references<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#rfc.references2">8.2.</a>&nbsp;
Informative references<br />
<a href="#app-revision-info">Appendix&nbsp;A.</a>&nbsp;
Revision Information<br />
&nbsp;&nbsp;&nbsp;&nbsp;<a href="#anchor9">A.1.</a>&nbsp;
version 00, MARTINI<br />
<a href="#rfc.authors">&#167;</a>&nbsp;
Authors' Addresses<br />
</p>
<br clear="all" />

<a name="sec-introduction"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.1"></a><h3>1.&nbsp;
Introduction</h3>

<p>
	In many deployed SIP Service Provider (SSP) architectures,
	it is common to use REGISTER requests to provide the
	reachability information for IP-PBXs, instead of DNS-based
	resolution and routing.  An IETF-defined mechanism for doing
	so is being worked on in the Martini Working Group, in
	[draft-gin].
      
</p>
<p>
	The actual end users that are served by the IP-PBX will most
	likely register themselves with the IP-PBX, if that IP-PBX is
	connecting end users using the SIP protocol. This means that
	end users register with the IP-PBX so the IP-PBX knows where
	to reach them, additionally the IP-PBX will have registered
	with the SSP using a bulkcontact which allows the SSP to know
	where to reach end users that are assigned to that IP-PBX in
	the SSP systems.
      
</p>
<p>
	Taking one step back and considering the normal SIP arrangement
	without any IP-PBX, in this case the usual setup in which SIP is
	used is that any user's AOR would be handled by a proxy that
	is responsible for handling requests for the domain indicated
	by the hostport portion of the AOR. Note that this does not
	imply exclusivity of this proxy instance as there may be a
	farm of cooperating proxies all handling requests for that
	same domain.  The users registered individual reachability
	information with the proxy instance assigned during
	registration, which would then route incoming requests
	accordingly.
      
</p>
<p>
	Fast forwarding again to the case where the IP-PBX provides
	reachability information to the SSP's proxy using a REGISTER
	request. The problem that martini is tasked to resolve is that
	current solutions like the one standardised by ETSI/3GPP or
	the ones specified by the SIP Forum lack an explicit
	indication during registration, this is reflected in the name
	of the work group "Multiple AoR reachabiliTy InformatioN
	Indication", a description can be found in
	[draft-ietf-martini-reqs].
      
</p>
<p>
	The current proposed Martini mechanism described in
	[draft-ietf-martini-gin] only supports E.164-based AoR's,
	however in actual deployments private-extension or "local"
	numbers are used for hosted and carrier-provided
	intra-Enterprise calling services, and domain-scoped
	alphanumeric URIs may become more popular in the near future.
	Neither of these forms of AoRs are supported by the current
	Martini mechanism.
      
</p>
<p>
	Furthermore the current martini routing mechanism provides a
	solution that is not compatible with the solution that is
	standardised in ETSI TISPAN and 3GPP for subscription based
	business trunking. That solution not only supports E.164 numbers
	but also handles non-E.164 numbers and alphanumeric AOR's.
      
</p>
<p>
	The current martini mechanism described in
	[draft-ietf-martini-gin] is said to put less requirements on
	the SIP IP-PBX in terms of configuration and might therefore
	put less requirements on simple IP-PBX regarding configuration
	and be more appropriate in limited deployments where there is
	no need for addressing users beyond traditional E.164
	numbers. That might well be, but it also is only representing
	a small fraction of the market as it ignores the only service
	provider standard available today.
      
</p>
<p>
	This document therefore proposes a way forward whereby two
	modes of operation can be signalled independently, in a
	manner consistent with (RFC3261 <a class='info' href='#RFC3261'>[RFC3261]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a>).
      
</p>
<p>
	ETSI TISPAN defines Next Generation Networks (NGN) which uses
	the 3rd-Generqation Partnership Project (3GPP) IMS (IP
	Multimedia Subsystem) which in turn uses SIP (RFC3261
	<a class='info' href='#RFC3261'>[RFC3261]<span> (</span><span class='info'>Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;SIP: Session Initiation Protocol,&rdquo; June&nbsp;2002.</span><span>)</span></a>) as its main signalling
	protocol. (For more information on the IMS, a detailed
	description can be found in 3GPP TS 23.228
	<a class='info' href='#3GPP.23.228'>[3GPP.23.228]<span> (</span><span class='info'>3GPP, &ldquo;IP Multimedia Subsystem (IMS); Stage 2,&rdquo; .</span><span>)</span></a> and 3GPP TS 24.229
	<a class='info' href='#3GPP.24.229'>[3GPP.24.229]<span> (</span><span class='info'>3GPP, &ldquo;Internet Protocol (IP) multimedia call control protocol based on Session Initiation Protocol (SIP) and Session Description Protocol (SDP); Stage 3,&rdquo; .</span><span>)</span></a>.)
      
</p>
<a name="sec-conventions"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.2"></a><h3>2.&nbsp;
Conventions</h3>

<p>
	The key words "MUST", "MUST NOT", "REQUIRED", "SHALL",
	"SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY",
	and "OPTIONAL" in this document are to be interpreted as
	described in BCP 14, RFC 2119 <a class='info' href='#RFC2119'>[RFC2119]<span> (</span><span class='info'>Bradner, S., &ldquo;Key words for use in RFCs to Indicate Requirement Levels,&rdquo; March&nbsp;1997.</span><span>)</span></a>.
      
</p>
<a name="sec-definitions"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3"></a><h3>3.&nbsp;
Definitions</h3>

<a name="sec-definitions-aor"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.1"></a><h3>3.1.&nbsp;
AOR</h3>

<p>
	  address-of-record, as defined by RFC 3261: a URI by which
	  the user is canonically known (e.g., on their business
	  cards, in the From header field of their requests, in the
	  To header field of REGISTER requests, etc.).
	  
</p>
<a name="anchor1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.2"></a><h3>3.2.&nbsp;
Alphanumeric SIP URI</h3>

<p>
	    a SIP AoR which does not identify a global E.164 number or
	    local-number.
 	  
</p>
<a name="anchor2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.3"></a><h3>3.3.&nbsp;
Implicit Registration</h3>

<p>
	    implicitly providing the reachability information for
	    something other than the AoR explicitly indicated in the
	    Register transaction.
 	  
</p>
<a name="anchor3"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.4"></a><h3>3.4.&nbsp;
Reachability Information</h3>

<p>
	    a set of URI's identifying the host and path of Proxies to
	    reach that host; like any URI, these URI's may identify
	    the specific connection transport, IP Address, and port
	    information, or they may only identify FQDN's.
 	  
</p>
<a name="anchor4"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.5"></a><h3>3.5.&nbsp;
SSP</h3>

<p>
	    SIP Service Provider, as defined by [RFC5486].
 	  
</p>
<a name="anchor5"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.6"></a><h3>3.6.&nbsp;
BC</h3>

<p>
	    bulk contact, a contact address that is used as a
	    reachability address for multiple AOR.
 	  
</p>
<a name="anchor6"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.3.7"></a><h3>3.7.&nbsp;
domain federation</h3>

<p>
	    Domain federation constitutes an architecture whereby SSP and the
	    enterprise owning a PBX connected to the SSP's network,
	    together manage a specific domain.
 	  
</p>
<a name="sec-complementing"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4"></a><h3>4.&nbsp;
Overview of the FRIENDS solution</h3>

<a name="sec-compl-issue"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.1"></a><h3>4.1.&nbsp;
The issue in short</h3>

<p>
	  The current martini solution based on the GIN draft solves
	  only a subspace of the total SIP trunking problemspace. It
	  does so by staying carefully within the boundaries of what
	  can be made to work with simple SIP proxies, taking for
	  granted that the solution is suboptimal when more
	  complicated deployments need to be served involving
	  private numberplans, alphanumeric naming schemes etc.
	
</p>
<p>
	  It chooses a solution where Request-URI is rewritten with
	  the PBX-contact for routing as is also done normally on the
	  last hop to the UAS, this means that such Request-URI
	  rewriting is also imposed on the intermediary hop between
	  the SSP and the SIP IP-PBX. It has been recognised in
	  earlier discussions that this is in fact an error in SIP to
	  use Request-URI rewriting for request routing. In fact
	  RFC3261 already introduced a mechanism to overcome this on
	  intermediary hops for which it provides the Route
	  header field. The Route header field is part of the core routing
	  mechanism of SIP RFC3261 compliant proxies.
	
</p>
<p>
	  Other standards have been developed (especially ETSI TISPAN
	  TS 182 025 and related work in 3GPP 24229) to serve such
	  more complicated scenarios, the solution is build on placing
	  the PBX-contact in the Route header field and leaving the
	  Request-URI unchanged. There exist on the market place
	  already a number of IP-PBX that expect the AOR in the
	  Request-URI and its own contact address in the Route header field.
	
</p>
<p>
	  Both mechanisms have their area of applicability and are
	  superior in their respective application niches.
	
</p>
<p>
	  Building on these facts the conclusion must be that it would
	  be beneficial to combine both mechanisms and allow both
	  routing variants to be supported.
	
</p>
<a name="sec-compl-registration"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.2"></a><h3>4.2.&nbsp;
Registration signalling</h3>

<p>
	  This document extends the martini mechanism by
	  distinguishing basic and federated bulk contact routing.
	
</p>
<p>
	  A PBX can announce that it supports basic bulk contact
	  routing, by registering with bulk contact parameter set to
	  the value "basic" in the registered contact.
	
</p>
<p>
	  A PBX can announce that it supports federated bulk contact
	  routing, by registering with bulk contact parameter set to
	  the value "federated" in the registered contact.
	
</p>
<p>
	  A PBX can announce that it supports both basic and
	  federated bulk contact routing, by including two
	  occurrences of the bulk contact parameter in the register
	  request.
	
</p>
<p>
	  A PBX that supports basic bulk contact routing, supports
	  and understands Request-URI's resulting from the current
	  GIN model. This is good for simple PBX's or undemanding
	  non-IMS deployments and it works great with numbers.
	
</p>
<p>
	  A PBX that supports federated bulk contact routing can
	  handle cases where the enterprise domain to which the PBX
	  belongs is federated with the SSP. And hence it is OK to be
	  treated as a next hop proxy and receive the PBX-contact on
	  the Route header field and a Request-URI where the hostpart
	  portion contains the federated domain name. The latter
	  allows delivery of the AOR in the Request-URI to the IP-PBX.
	
</p>
<p>
	  Upon receipt of a register request the SSP determines
	  whether bulk contact routing applies and which variant to
	  use based on the presence of the bulk contact parameter in
	  the registration.
	
</p>
<a name="sec-compl-inbound"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.4.3"></a><h3>4.3.&nbsp;
SSP Processing of Inbound Requests targeted at an implicitly registered AOR assigned to a bulk contact</h3>

<p>
	  When a request enters the SSP that belongs to an
	  implicitly registered AOR assigned to a bulk contact the
	  SSP's proxy checks whether the bulk contact registered for
	  basic or federated bulk contact routing.
	
</p>
<p>
	  If the bulk contact parameter indicated support for basic
	  bulk contact routing or if the bulk contact was absent but
	  the provisioned bulk contact indicator indicated support
	  for basic bulk contact routing the SSP proxy proceeds with
	  behaviour as specified in [draft-ietf-martini-gin-01].
	
</p>
<p>
	  If the bulk contact parameter indicated support for
	  federated bulk contact routing or if the bulk contact
	  parameter was absent but the provisioned bulk contact
	  indicator indicated support for federated bulk contact
	  routing, then the SSP proxy will proceed by placing the
	  registered PBX-contact at the end of the Route header field and
	  leave the Request-URI unchanged.
	
</p>
<p>
	  The above behaviour makes sure that federated routing is
	  only used in cases where it is certain that the SSP
	  configured its system knowingly to perform that behaviour
	  for a certain customer. He will make sure that both sides
	  are configured properly. This addresses the issues that
	  people raised with solutions based on placing the contact
	  on the Route header field in terms of problems with domain
	  ownership.
	
</p>
<a name="sec-security"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.5"></a><h3>5.&nbsp;
Security considerations</h3>

<p>
	tbd
      
</p>
<a name="sec-iana"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.6"></a><h3>6.&nbsp;
IANA considerations</h3>

<p>
	tbd
      
</p>
<a name="sec-acks"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.7"></a><h3>7.&nbsp;
Acknowledgments</h3>

<p>
	Thanks to Adam Roach and Hadriel Kaplan for (unknowingly)
	providing text which we used for inspiration [draft-shaken],
	[draft-gin], [draft-olive]. Thanks to Martien Huysmans for
	providing text for the definition of the federated concept.
      
</p>
<a name="rfc.references"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.8"></a><h3>8.&nbsp;
References</h3>

<a name="rfc.references1"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.1.&nbsp;Normative references</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="RFC2119">[RFC2119]</a></td>
<td class="author-text"><a href="mailto:sob@harvard.edu">Bradner, S.</a>, &ldquo;<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>,&rdquo; BCP&nbsp;14, RFC&nbsp;2119, March&nbsp;1997 (<a href="http://www.rfc-editor.org/rfc/rfc2119.txt">TXT</a>, <a href="http://xml.resource.org/public/rfc/html/rfc2119.html">HTML</a>, <a href="http://xml.resource.org/public/rfc/xml/rfc2119.xml">XML</a>).</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3261">[RFC3261]</a></td>
<td class="author-text">Rosenberg, J., Schulzrinne, H., Camarillo, G., Johnston, A., Peterson, J., Sparks, R., Handley, M., and E. Schooler, &ldquo;<a href="http://tools.ietf.org/html/rfc3261">SIP: Session Initiation Protocol</a>,&rdquo; RFC&nbsp;3261, June&nbsp;2002 (<a href="http://www.rfc-editor.org/rfc/rfc3261.txt">TXT</a>).</td></tr>
</table>

<a name="rfc.references2"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>8.2.&nbsp;Informative references</h3>
<table width="99%" border="0">
<tr><td class="author-text" valign="top"><a name="ETSI.181.019">[ETSI.181.019]</a></td>
<td class="author-text">ETSI, &ldquo;<a href="http://pda.etsi.org/pda/queryform.asp">Telecommunication and Internet converged Services and Protocols for Advanced Networking (TISPAN); Business Communication Requirements</a>,&rdquo; ETSI TS&nbsp;181 019 V2, July&nbsp;2007.</td></tr>
<tr><td class="author-text" valign="top"><a name="ETSI.182.025">[ETSI.182.025]</a></td>
<td class="author-text">ETSI, &ldquo;<a href="http://pda.etsi.org/pda/queryform.asp">Telecommunications and Internet converged Services and Protocols for Advanced Networking (TISPAN);Business trunking;Architecture and functional description</a>,&rdquo; ETSI TS&nbsp;182 025 V2, Sept&nbsp;2008.</td></tr>
<tr><td class="author-text" valign="top"><a name="3GPP.23.228">[3GPP.23.228]</a></td>
<td class="author-text">3GPP, &ldquo;<a href="http://www.3gpp.org/ftp/Specs/html-info/23228.htm">IP Multimedia Subsystem (IMS); Stage 2</a>,&rdquo; 3GPP TS&nbsp;23.228 V8.</td></tr>
<tr><td class="author-text" valign="top"><a name="3GPP.24.229">[3GPP.24.229]</a></td>
<td class="author-text">3GPP, &ldquo;<a href="http://www.3gpp.org/ftp/Specs/html-info/24229.htm">Internet Protocol (IP) multimedia call control protocol based on Session Initiation Protocol (SIP) and Session Description Protocol (SDP); Stage 3</a>,&rdquo; 3GPP TS&nbsp;24.229 V8.</td></tr>
<tr><td class="author-text" valign="top"><a name="RFC3455">[RFC3455]</a></td>
<td class="author-text">Garcia-Martin, M., Henrikson, E., and D. Mills, &ldquo;<a href="http://tools.ietf.org/html/rfc3455">Private Header (P-Header) Extensions to the Session Initiation Protocol (SIP) for the 3rd-Generation Partnership Project (3GPP)</a>,&rdquo; RFC&nbsp;3455, January&nbsp;2003 (<a href="http://www.rfc-editor.org/rfc/rfc3455.txt">TXT</a>).</td></tr>
</table>

<a name="app-revision-info"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A"></a><h3>Appendix A.&nbsp;
Revision Information</h3>

<a name="anchor9"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<a name="rfc.section.A.1"></a><h3>A.1.&nbsp;
version 00, MARTINI</h3>

<ol class="text">
<li>
	    2010-04-27, Initial version
	  
</li>
</ol>
<a name="rfc.authors"></a><br /><hr />
<table summary="layout" cellpadding="0" cellspacing="2" class="TOCbug" align="right"><tr><td class="TOCbug"><a href="#toc">&nbsp;TOC&nbsp;</a></td></tr></table>
<h3>Authors' Addresses</h3>
<table width="99%" border="0" cellpadding="0" cellspacing="0">
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Hans Erik van Elburg</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Detecon International Gmbh</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Oberkasselerstrasse 2</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Bonn  53227</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Germany</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:ietf.hanserik@gmail.com">ietf.hanserik@gmail.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Bruno Chatras</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">France Telecom Orange</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">38-40 rue du General Leclerc</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Issy Les Moulineaux  92794</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">France</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:bruno.chatras@orange-ftgroup.com">bruno.chatras@orange-ftgroup.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Martin Dolly</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">AT&T Labs, Inc.</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">200 Laurel Ave.</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Middletown, NJ  </td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:md3135@att.com">md3135@att.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Timothy Dwight</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Verizon</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">2400 North Glenville Drive</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Richardson, Texas  </td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">USA</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:timothy.dwight@verizon.com">timothy.dwight@verizon.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Jan van Geel</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Belgacom</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Koning Albert II laan</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Brussels  1030</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Belgium</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:jan.van.geel@belgacom.eb">jan.van.geel@belgacom.eb</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Christer Holmberg</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Ericsson</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Hirsalantie 11</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Jorvas  02420</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Finland</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:christer.holmberg@ericsson.com">christer.holmberg@ericsson.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Keith Drage</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Alcatel-Lucent</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">The Quadrant, Stonehill Green, Westlea</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Swindon  SN5 7DJ</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">UK</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:drage@alcatel-lucent.com">drage@alcatel-lucent.com</a></td></tr>
<tr cellpadding="3"><td>&nbsp;</td><td>&nbsp;</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Patrick Mourot</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Alcatel-Lucent</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">1 rue du Dr. A. Schweitzer</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">Illkirch  67400</td></tr>
<tr><td class="author-text">&nbsp;</td>
<td class="author-text">France</td></tr>
<tr><td class="author" align="right">Email:&nbsp;</td>
<td class="author-text"><a href="mailto:patrick.mourot@alcatel-lucent.com">patrick.mourot@alcatel-lucent.com</a></td></tr>
</table>
</body></html>
